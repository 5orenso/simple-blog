(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{t1gC:function(e,t,a){"use strict";a.r(t),function(e){function s(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,s)}return a}function c(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?s(Object(a),!0).forEach((function(t){l(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):s(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function l(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var i,r=a("hosL"),o=a("Utv1"),n=a("/eY4"),h=a("OhSV"),b=a("Y3FI"),d=a("ZOvn");const p=d.a.marginTop(!1),u=d.a.marginTopBack(!1),m=d.a.marginBottom(),g=(d.a.subMenuMarginTop(),{isLoading:!1});let O=Object(n.a)(i=class extends r.Component{constructor(e){var t;super(e),t=this,this.signupToRace=async function(){const{raceStore:e,userStore:a}=t.props.stores,{user:s}=a,{signup:l}=e,{raceid:i}=t.props;await e.addContestant({id:i,classId:l.class,newContestant:c({team:s.team,firstname:s.firstname,lastname:s.lastname,sportsClub:s.sportsClub,email:s.email,cellphone:s.cellphone,facebook:s.facebook,instagram:s.instagram},l)})},this.updateSignup=e=>{const t=e.target.id,a=e.target.value,{raceStore:s}=this.props.stores;s.updateObjectKeyValue("signup",t,a)},this.editSignup=e=>{const{raceid:t}=this.props,{raceStore:a}=this.props.stores,s=e.target.id,c=e.target.value,{classid:l,contestantid:i}=e.target.dataset;a.updateObjectKeyValue("signup",s,c);const r={raceClassId:l,contestantId:i,["raceClassContestant"+o.a.ucfirst(s)]:c};clearTimeout(this.updateTimer[s]),this.updateTimer[s]=setTimeout((async function(){a.editClass({id:t,data:r})}),500)},this.likeRace=async function(){const{raceStore:e}=t.props.stores,{race:a}=e;await e.likeRace({id:a.id})},this.toggleAddComment=e=>{const t=e.target.parentElement.dataset.id||e.target.dataset.id,{showAddComment:a}=this.state;this.setState({showAddComment:!a},()=>{this.inputRef[t]&&this.inputRef[t].focus()})},this.back=()=>{Object(b.route)("/",!0)},this.state=c({},g),this.inputRef={},this.updateTimer={}}async loadRace(e=this.props){this.setState({isLoading:!0});const{raceStore:t,userStore:a}=e.stores,{user:s={}}=a,{raceid:l}=e;await t.load(l),this.setState({isLoading:!1});let i={};const{race:r}=t;if(r.classes&&s&&s.email)for(let e=0,t=r.classes.length;e<t;e+=1){const t=r.classes[e];if(t.contestants){const e=t.contestants.findIndex(e=>e.email===s.email);e>-1&&(i=c({},t.contestants[e]))}}t.updateKeyValue("signup",i)}componentDidMount(){this.loadRace()}componentWillReceiveProps(e){e.raceid!==this.props.raceid&&this.loadRace(e)}render(){const{userStore:t,raceStore:a,appState:s}=this.props.stores,{user:c={},teams:l=[]}=t,{race:i,signup:n}=a,{language:b="en"}=s;let d={};n.class&&(d=a.getRaceClassById(n.class));const g=new Date;return Object(r.h)("div",{class:"container-fluid",style:`margin-bottom: ${m}; margin-top: ${p};`},Object(r.h)("button",{class:"btn btn-link pl-0 fixed-top text-primary",style:`top: ${u}; left: 5px; font-size: 35px; width: 45px;`,onClick:this.back},Object(r.h)("i",{class:"fas fa-arrow-circle-left"})),Object(r.h)("div",{class:"row m-2"},Object(r.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-3 mb-2"},Object(r.h)("div",{class:"row d-flex align-items-center position-relative"},Object(r.h)("h5",{class:"position-absolute",style:"top: 3px; right: 5px;"},"signup"===status&&Object(r.h)(e,null,Object(r.h)("span",{class:"badge badge-primary border border-white ml-2"},Object(r.h)(h.c,{id:"races.signup-open"},"Påmelding åpen"))),"race"===status&&Object(r.h)(e,null,Object(r.h)("span",{class:"badge badge-danger border border-white ml-2"},Object(r.h)(h.c,{id:"races.race-in-progress"},"Løp pågår"))),"done"===status&&Object(r.h)(e,null,Object(r.h)("span",{class:"badge badge-success border border-white ml-2"},Object(r.h)(h.c,{id:"races.race-finished"},"Løp avsluttet")))),i.images&&i.images[0]?Object(r.h)("img",{src:i.images[0].s3LargeLink,class:"img-fluid"}):""))),Object(r.h)("div",{class:"row m-2"},Object(r.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-0 mb-2"},Object(r.h)("h2",{class:"mb-0"},Object(r.h)(h.c,{id:"races.signup"},"Påmelding")," ",Object(r.h)("span",{class:"font-weight-lighter",style:"letter-spacing: -1px;"}," - ",i.title)))),Object(r.h)("div",{class:"row m-2"},Object(r.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-3 mb-2"},Object(r.h)("div",{class:"mb-4"},i.startDate&&Object(r.h)(e,null,Object(r.h)(h.c,{id:"races.periode"},"Periode"),": ",o.a.formatDate(i.startDate,{locale:"no-NB",hour12:!1,hour:"2-digit",minute:"2-digit"})),i.endDate&&Object(r.h)(e,null," - ",o.a.formatDate(i.endDate,{locale:"no-NB",hour12:!1,hour:"2-digit",minute:"2-digit"}))),g>=new Date(i.signupStartDate)&&g<=new Date(i.signupEndDate)?Object(r.h)(e,null,Object(r.h)("span",{class:"font-weight-lighter"},Object(r.h)(h.c,{id:"races.signed-in-as"},"Logget inn som"),":")," ",c.email,Object(r.h)("br",null),Object(r.h)("br",null),n.id?Object(r.h)(e,null,Object(r.h)("div",{class:"font-weight-bold mb-4"},Object(r.h)("i",{class:"fas fa-check text-success"})," ",Object(r.h)(h.c,{id:"races.signed-up"},"Din bruker er påmeldt!"),Object(r.h)("br",null)),i.signuppayment&&Object(r.h)(e,null,Object(r.h)("div",{class:"form-group row my-0"},Object(r.h)("label",{for:"cellphone",class:"col-2 col-form-label text-right font-weight-lighter"},Object(r.h)(h.c,{id:"races.signup"},"Påmelding")),Object(r.h)("div",{class:"col-10"},n.paidSignupfee?Object(r.h)("div",{class:"py-2"},Object(r.h)(h.c,{id:"races.paid"},"Betalt"),": ",o.a.formatDate(n.paidSignupfee),Object(r.h)("i",{class:"fas fa-check text-success ml-3"})):Object(r.h)(e,null,Object(r.h)("div",{class:"alert alert-danger mb-1",role:"alert"},Object(r.h)("h5",null,Object(r.h)("span",{class:"font-weight-lighter"},Object(r.h)(h.c,{id:"races.payment-info"},"Betaling påmelding"),":")," ",function(e="",t,a="en"){if(o.a.isString(e)){let s=e;const c=new RegExp(`<${a}>(.*?)</${a}>`,"s").exec(s);if(c){const e=c[0];e&&(s=e)}return s.replace(/\{\{img\.(\d+)\s*(\d*)\}\}/g,(function(e,a,s){return o.a.isObject(t[a])?`<img src=${t[a].s3XXLargeLink} class='img-fluid float-right' style='width: ${s||40}%;' />`:""}))}return e}(i.signuppayment,i.images,b),Object(r.h)("br",null),d.signupfee||i.signupfee," NOK")))))),Object(r.h)("div",{class:"clearfix mt-2"},Object(r.h)("span",{class:"font-weight-lighter float-right"},Object(r.h)(h.c,{id:"races.click-to-change"},"Klikk for å endre info i påmeldingen."))),Object(r.h)("div",{class:"form-group row my-0"},Object(r.h)("label",{for:"cellphone",class:"col-2 col-form-label text-right font-weight-lighter"},Object(r.h)(h.c,{id:"races.cellphone"},"Mobil")),Object(r.h)("div",{class:"col-10"},Object(r.h)(h.b,null,Object(r.h)("input",{type:"text",class:"form-control-plaintext",id:"cellphone","data-classid":n.class,"data-contestantid":n.id,onInput:this.editSignup,value:n.cellphone,placeholder:Object(r.h)(h.c,{id:"races.cellphone-help"},"Hva er mobilnummer ditt?")})))),Object(r.h)("div",{class:"form-group row my-0"},Object(r.h)("label",{for:"firstname",class:"col-2 col-form-label text-right font-weight-lighter"},Object(r.h)(h.c,{id:"races.firstname"},"Fornavn")),Object(r.h)("div",{class:"col-10"},Object(r.h)(h.b,null,Object(r.h)("input",{type:"text",class:"form-control-plaintext",id:"firstname","data-classid":n.class,"data-contestantid":n.id,onInput:this.editSignup,value:n.firstname,placeholder:Object(r.h)(h.c,{id:"races.firstname-help"},"Hva er fornavnet ditt?")})))),Object(r.h)("div",{class:"form-group row my-0"},Object(r.h)("label",{for:"lastname",class:"col-2 col-form-label text-right font-weight-lighter"},Object(r.h)(h.c,{id:"races.lastname"},"Etternavn")),Object(r.h)("div",{class:"col-10"},Object(r.h)(h.b,null,Object(r.h)("input",{type:"text",class:"form-control-plaintext",id:"lastname","data-classid":n.class,"data-contestantid":n.id,onInput:this.editSignup,value:n.lastname,placeholder:Object(r.h)(h.c,{id:"races.lastname-help"},"Hva er etternavnet ditt?")})))),Object(r.h)("div",{class:"form-group row my-0"},Object(r.h)("label",{for:"sportsClub",class:"col-2 col-form-label text-right font-weight-lighter"},Object(r.h)(h.c,{id:"races.sportsclub"},"Klubb")),Object(r.h)("div",{class:"col-10"},Object(r.h)(h.b,null,Object(r.h)("input",{type:"text",class:"form-control-plaintext",id:"sportsClub","data-classid":n.class,"data-contestantid":n.id,onInput:this.editSignup,value:n.sportsClub,placeholder:Object(r.h)(h.c,{id:"races.sportsClub-help"},"Hvilken klubb tilhører du?")})))),Object(r.h)("div",{class:"form-group row my-0"},Object(r.h)("label",{for:"facebook",class:"col-2 col-form-label text-right font-weight-lighter"},Object(r.h)(h.c,{id:"races.facebook"},"Facebook")),Object(r.h)("div",{class:"col-10"},Object(r.h)(h.b,null,Object(r.h)("input",{type:"text",class:"form-control-plaintext",id:"facebook","data-classid":n.class,"data-contestantid":n.id,onInput:this.editSignup,value:n.facebook,placeholder:Object(r.h)(h.c,{id:"races.facebook-help"},"Hva er Facebook brukernavnet ditt?")})))),Object(r.h)("div",{class:"form-group row my-0"},Object(r.h)("label",{for:"instagram",class:"col-2 col-form-label text-right font-weight-lighter"},Object(r.h)(h.c,{id:"races.instagram"},"Instagram")),Object(r.h)("div",{class:"col-10"},Object(r.h)(h.b,null,Object(r.h)("input",{type:"text",class:"form-control-plaintext",id:"instagram","data-classid":n.class,"data-contestantid":n.id,onInput:this.editSignup,value:n.instagram,placeholder:Object(r.h)(h.c,{id:"races.instagram-help"},"Hva er Instagram brukernavnet ditt?")})))),Object(r.h)("div",{class:"form-group row my-0"},Object(r.h)("label",{for:"team",class:"col-2 col-form-label text-right font-weight-lighter"},Object(r.h)(h.c,{id:"races.team"},"Team")),Object(r.h)("div",{class:"col-10"},Object(r.h)("select",{class:"form-control-plaintext",id:"team","aria-describedby":"teamHelp","data-classid":n.class,"data-contestantid":n.id,onInput:this.editSignup,value:n.team},Object(r.h)("option",{value:""},"-- ",Object(r.h)(h.c,{id:"races.choose-team"},"Velg team")," --"),l.map(e=>Object(r.h)("option",{value:e.id},e.name))))),Object(r.h)("div",{class:"form-group row my-0"},Object(r.h)("label",{for:"team",class:"col-2 col-form-label text-right font-weight-lighter"},Object(r.h)(h.c,{id:"races.class"},"Klasse")),Object(r.h)("div",{class:"col-10"},Object(r.h)("select",{class:"form-control-plaintext",id:"class","aria-describedby":"classHelp",onInput:this.editSignup,value:n.class,disabled:!0},Object(r.h)("option",{value:""},"-- ",Object(r.h)(h.c,{id:"races.choose-class"},"Velg klasse")," --"),i.classes&&i.classes.sort((e,t)=>e.distance-t.distance).map(t=>Object(r.h)(e,null,Object(r.h)("option",{value:t.id},t.title," - ",t.distance," km - Påmelding: ",t.signupfee||i.signupfee," NOK"))))))):Object(r.h)(e,null,Object(r.h)("div",{class:"form-group"},Object(r.h)("label",{for:"cellphone"},Object(r.h)(h.c,{id:"races.cellphone"},"Mobil")),Object(r.h)("input",{type:"text",class:"form-control",id:"cellphone","aria-describedby":"cellphoneHelp",placeholder:c.cellphone,onInput:this.updateSignup,value:n.cellphone}),Object(r.h)("small",{id:"cellphoneHelp",class:"form-text text-muted"},Object(r.h)(h.c,{id:"races.cellphone-help"},"'Hva er mobilnummer ditt?'"))),Object(r.h)("div",{class:"row"},Object(r.h)("div",{class:"col"},Object(r.h)("div",{class:"form-group"},Object(r.h)("label",{for:"firstname"},Object(r.h)(h.c,{id:"races.firstname"},"Fornavn")),Object(r.h)("input",{type:"text",class:"form-control",id:"firstname","aria-describedby":"firstnameHelp",placeholder:c.firstname,onInput:this.updateSignup,value:n.firstname}),Object(r.h)("small",{id:"firstnameHelp",class:"form-text text-muted"},Object(r.h)(h.c,{id:"races.firstname-help"},"Hva er fornavnet ditt?")))),Object(r.h)("div",{class:"col"},Object(r.h)("div",{class:"form-group"},Object(r.h)("label",{for:"lastname"},Object(r.h)(h.c,{id:"races.lastname"},"Etternavn")),Object(r.h)("input",{type:"text",class:"form-control",id:"lastname","aria-describedby":"lastnameHelp",placeholder:c.lastname,onInput:this.updateSignup,value:n.lastname}),Object(r.h)("small",{id:"lastnameHelp",class:"form-text text-muted"},Object(r.h)(h.c,{id:"races.lastname-help"},"Hva er etternavnet ditt?"))))),Object(r.h)("div",{class:"form-group"},Object(r.h)("label",{for:"sportsClub"},Object(r.h)(h.c,{id:"races.sportsclub"},"Klubb")),Object(r.h)("input",{type:"text",class:"form-control",id:"sportsClub","aria-describedby":"sportsClubHelp",placeholder:c.sportsClub,onInput:this.updateSignup,value:n.sportsClub}),Object(r.h)("small",{id:"sportsClubHelp",class:"form-text text-muted"},Object(r.h)(h.c,{id:"races.sportsClub-help"},"Hvilken klubb tilhører du?"))),Object(r.h)("div",{class:"row"},Object(r.h)("div",{class:"col"},Object(r.h)("div",{class:"form-group"},Object(r.h)("label",{for:"facebook"},Object(r.h)(h.c,{id:"races.facebook"},"Facebook")),Object(r.h)("input",{type:"text",class:"form-control",id:"facebook","aria-describedby":"facebookHelp",placeholder:c.facebook,onInput:this.updateSignup,value:n.facebook}),Object(r.h)("small",{id:"facebookHelp",class:"form-text text-muted"},Object(r.h)(h.c,{id:"races.facebook-help"},"Hva er Facebook brukernavnet ditt?")))),Object(r.h)("div",{class:"col"},Object(r.h)("div",{class:"form-group"},Object(r.h)("label",{for:"instagram"},Object(r.h)(h.c,{id:"races.instagram"},"Instagram")),Object(r.h)("input",{type:"text",class:"form-control",id:"instagram","aria-describedby":"instagramHelp",placeholder:c.instagram,onInput:this.updateSignup,value:n.instagram}),Object(r.h)("small",{id:"instagramHelp",class:"form-text text-muted"},Object(r.h)(h.c,{id:"races.instagram-help"},"Hva er Instagram brukernavnet ditt?"))))),Object(r.h)("div",{class:"form-group"},Object(r.h)("label",{for:"team"},Object(r.h)(h.c,{id:"races.team"},"Team")),Object(r.h)("select",{class:"form-control",id:"team","aria-describedby":"teamHelp",onInput:this.updateSignup,value:n.team},Object(r.h)("option",{value:""},"-- ",Object(r.h)(h.c,{id:"races.choose-team"},"Velg team")," --"),l.map(e=>Object(r.h)("option",{value:e.id},e.name))),Object(r.h)("small",{id:"teamHelp",class:"form-text text-muted"},Object(r.h)(h.c,{id:"races.choose-team-help"},"Velg fra dine team"))),Object(r.h)("div",{class:"form-group"},Object(r.h)("label",{for:"class"},Object(r.h)(h.c,{id:"races.class"},"Klasse")),Object(r.h)("select",{class:"form-control",id:"class","aria-describedby":"classHelp",onInput:this.updateSignup,value:n.class},Object(r.h)("option",{value:""},"-- ",Object(r.h)(h.c,{id:"races.choose-class"},"Velg klasse")," --"),i.classes&&i.classes.map(t=>Object(r.h)(e,null,Object(r.h)("option",{value:t.id},t.title," - ",t.distance," km - Påmelding: ",t.signupfee||i.signupfee," NOK")))),Object(r.h)("small",{id:"classHelp",class:"form-text text-muted"},Object(r.h)(h.c,{id:"races.choose-class-help"},"Velg ønsket klasse."))),Object(r.h)("div",{class:"form-group form-check"},Object(r.h)("input",{type:"checkbox",class:"form-check-input",id:"termsAndAgreement",onInput:this.updateSignup,checked:n.termsAndAgreement,value:!0}),Object(r.h)("label",{class:"form-check-label",for:"termsAndAgreement"},Object(r.h)(h.c,{id:"races.agreement-accept"},"Jeg har lest og godtar reglene for løpet."))),Object(r.h)("button",{type:"button",class:"btn btn-primary",onClick:this.signupToRace},Object(r.h)(h.c,{id:"races.do-signup"},"Meld meg på")))):Object(r.h)(e,null,g<new Date(i.signupStartDate)?Object(r.h)(e,null,Object(r.h)("h5",{class:"mt-4"},Object(r.h)("i",{class:"fas fa-exclamation-circle"})," ",Object(r.h)(h.c,{id:"races.signup-not-open-yet"},"Påmeldingen har ikke åpnet ennå!")),Object(r.h)("p",{class:"mt-4"},Object(r.h)(h.c,{id:"races.signup-opening"},"Påmeldingen åpner"),":",Object(r.h)("br",null),Object(r.h)("span",{class:"display-4"},o.a.formatDate(i.signupStartDate,{locale:"no-NB",hour12:!1,hour:"2-digit",minute:"2-digit"})))):Object(r.h)(e,null,Object(r.h)("h5",{class:"mt-4 mb-4"},Object(r.h)("i",{class:"fas fa-exclamation-circle"})," ",Object(r.h)(h.c,{id:"races.signup-closed"},"Påmeldingen er stengt!")))))))}})||i;t.default=O}.call(this,a("hosL").Fragment)}}]);
//# sourceMappingURL=route-app-races.chunk.58077.esm.js.map