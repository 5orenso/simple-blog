{"version":3,"sources":["webpack:///./routes/teams/connect.js"],"names":["MARGIN_TOP","mu","marginTop","MARGIN_BOTTOM","marginTopBack","marginBottom","SUB_MENU_MARGIN_TOP","subMenuMarginTop","initialState","isLoading","limit","offset","submenu","Teams","observer","props","setLoadMore","stores","teamStore","state","search","setState","loadTeams","unsetLoadMore","searchForTeams","chooseSubmenu","e","target","parentElement","dataset","menu","opts","this","notfollowing","following","loadPublic","componentDidMount","componentWillUnmount","render","scrolledDown","publicTeamsToFollow","darkmode","appState","class","style","href","id","data-menu","onClick","fields","total","length","for","type","onInput","linkState","map","team","Component"],"mappings":"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","file":"114.chunk.5f470.js","sourcesContent":["import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport { Text, Localizer } from 'preact-i18n';\nimport linkState from 'linkstate';\n\nimport mu from '../../lib/musher-util';\nconst MARGIN_TOP = mu.marginTop(true);\nconst MARGIN_TOP_BACK = mu.marginTopBack(false);\nconst MARGIN_BOTTOM = mu.marginBottom();\nconst SUB_MENU_MARGIN_TOP = mu.subMenuMarginTop();\n\nimport PublicTeam from '../../components/team/public';\n\nconst initialState = {\n\tisLoading: false,\n\tlimit: 25,\n\toffset: 0,\n\tsubmenu: 'notfollowing',\n};\n\n@observer\nclass Teams extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            ...initialState,\n        };\n    }\n\n\tasync loadTeams({ limit, offset, search }) {\n\t\tconst { submenu } = this.state;\n\t\tthis.setState({ isLoading: true });\n\t\tconst { teamStore } = this.props.stores;\n\t\tconst opts = {};\n\t\tif (submenu === 'notfollowing') {\n\t\t\topts.notfollowing = 1;\n\t\t}\n\t\tif (submenu === 'following') {\n\t\t\topts.following = 1;\n\t\t}\n\t\tawait teamStore.loadPublic({ limit, offset, search, opts });\n\t\tthis.setState({ isLoading: false });\n\t}\n\n    setLoadMore = () => {\n        const { teamStore } = this.props.stores;\n        teamStore.setLoadMore(() => {\n            let { limit, offset, search } = this.state;\n            offset += limit;\n            this.setState({ offset });\n            this.loadTeams({ limit, offset, search });\n        });\n    }\n\n\tunsetLoadMore = () => {\n        const { teamStore } = this.props.stores;\n        teamStore.setLoadMore(() => {});\n    }\n\n\tsearchForTeams = () => {\n\t\tconst { search, limit } = this.state;\n\t\tthis.setState({\n\t\t\toffset: 0,\n\t\t});\n\t\tthis.loadTeams({ search, limit });\n\t}\n\n    chooseSubmenu = (e) => {\n\t\tconst { limit } = this.state;\n\t\tconst submenu = e.target.parentElement.dataset.menu || e.target.dataset.menu;\n\t\tthis.setState({\n\t\t\tsubmenu,\n\t\t\toffset: 0,\n\t\t}, () => {\n\t\t\tthis.loadTeams({\n\t\t\t\tlimit,\n\t\t\t\toffset: 0,\n\t\t\t});\n\t\t});\n\t}\n\n\tcomponentDidMount() {\n        const { limit, offset } = this.state;\n\t\tthis.loadTeams({ limit, offset });\n        this.setLoadMore();\n\t}\n\n    componentWillUnmount() {\n        this.unsetLoadMore();\n    }\n\n\trender() {\n        const { scrolledDown } = this.props;\n\t\tconst { isLoading, submenu } = this.state;\n\t\tconst { teamStore, userStore, appState } = this.props.stores;\n\t\tconst { publicTeamsToFollow = [] } = teamStore;\n\t\tconst { user } = userStore;\n\t\tconst { darkmode } = appState;\n\n\t\treturn (\n\t\t\t<div class='container-fluid' style={`margin-bottom: ${MARGIN_BOTTOM}; margin-top: ${MARGIN_TOP};`}>\n\t\t\t\t<div class='row fixed-top pt-2' style={`margin-top: ${scrolledDown > 0 ? 0 : SUB_MENU_MARGIN_TOP}; background-color: ${darkmode ? '#191d21' : '#f8f9fa'}; transition: all 0.3s ease-in-out;`}>\n\t\t\t\t\t<div class='col text-center subtopmenu'>\n\t\t\t\t\t\t<a href='/teams/' class='text-secondary stretched-link'><nobr><i class='fas fa-users' /> <Text id='teams.your-teams'>Your teams</Text></nobr></a>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class='col text-center border-bottom border-primary subtopmenu'>\n\t\t\t\t\t\t<a href='/teams/connect' class='text-primary stretched-link'><nobr><i class='fas fa-users' /> <Text id='teams.public-teams'>Public teams</Text></nobr></a>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\n\t\t\t\t<div class='row'>\n                    <div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 my-3'>\n\t\t\t\t\t\t<div class='row'>\n\t\t\t\t\t\t\t<div class='w-100 overflow-hidden'>\n\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\tclass='d-flex flex-row flex-nowrap pb-2 px-1'\n\t\t\t\t\t\t\t\t\tstyle='overflow: auto; scroll-snap-type: x mandatory;'\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<div class='col px-0 pt-2'>\n\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\tclass={`btn btn-block rounded-pill-left rounded-none ${submenu === 'all' ? 'btn-primary' : 'btn-outline-primary'} text-nowrap`}\n\t\t\t\t\t\t\t\t\t\t\tstyle='text-overflow: ellipsis; overflow: hidden;'\n\t\t\t\t\t\t\t\t\t\t\tdata-menu='all'\n\t\t\t\t\t\t\t\t\t\t\tonClick={this.chooseSubmenu}\n\t\t\t\t\t\t\t\t\t\t><i class='fas fa-users' /> <Text id='teams.all'>All</Text></button>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div class='col px-0 pt-2'>\n\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\tclass={`btn btn-block rounded-none ${submenu === 'notfollowing' ? 'btn-primary' : 'btn-outline-primary'} text-nowrap`}\n\t\t\t\t\t\t\t\t\t\t\tstyle='text-overflow: ellipsis; overflow: hidden;'\n\t\t\t\t\t\t\t\t\t\t\tdata-menu='notfollowing'\n\t\t\t\t\t\t\t\t\t\t\tonClick={this.chooseSubmenu}\n\t\t\t\t\t\t\t\t\t\t><i class='fas fa-unlink' /> <Text id='teams.notfollowing'>Not following</Text></button>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div class='col px-0 pt-2'>\n\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\tclass={`btn btn-block rounded-pill-right rounded-none ${submenu === 'following' ? 'btn-primary' : 'btn-outline-primary'} text-nowrap`}\n\t\t\t\t\t\t\t\t\t\t\tstyle='text-overflow: ellipsis; overflow: hidden;'\n\t\t\t\t\t\t\t\t\t\t\tdata-menu='following'\n\t\t\t\t\t\t\t\t\t\t\tonClick={this.chooseSubmenu}\n\t\t\t\t\t\t\t\t\t\t><i class='fas fa-link' /> <Text id='teams.following'>Following</Text></button>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\n\t\t\t\t<div class='row'>\n\t\t\t\t\t<div class='col-12'>\n\t\t\t\t\t\t<div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 px-0'>\n\t\t\t\t\t\t\t<h5><Text id='teams.connect.all-teams' fields={{ total: publicTeamsToFollow.length }}>Alle offentlige team - {publicTeamsToFollow.length} stk</Text></h5>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 px-0'>\n\t                        <div class='d-flex flex-row flex-nowrap position-relative' style='overflow: auto;'>\n\t\t\t\t\t\t\t\t<div class='flex-grow-1'>\n\t\t\t\t\t\t\t\t\t<label class='sr-only' for='teamSearch'><Text id='search.title'>Search</Text></label>\n\t\t\t\t\t\t\t\t\t<Localizer>\n\t\t\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\t\t\ttype='text'\n\t\t\t\t\t\t\t\t\t\t\tclass='form-control form-control-lg mb-2'\n\t\t\t\t\t\t\t\t\t\t\tid='teamSearch'\n\t\t\t\t\t\t\t\t\t\t\tonInput={linkState(this, 'search')}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</Localizer>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class='align-self-end ml-1'>\n\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\ttype='button'\n\t\t\t\t\t\t\t\t\t\tclass='btn btn-lg btn-primary mb-2'\n\t\t\t\t\t\t\t\t\t\tonClick={this.searchForTeams}\n\t\t\t\t\t\t\t\t\t><Text id='dog.veterinary.search'>Search</Text></button>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t{publicTeamsToFollow && publicTeamsToFollow.map(team => (\n\t\t\t\t\t\t\t<PublicTeam stores={this.props.stores} team={team} />\n\t\t\t\t\t\t))}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nexport default Teams;\n"],"sourceRoot":""}