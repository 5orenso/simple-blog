(window.webpackJsonp=window.webpackJsonp||[]).push([[73],{"3kDq":function(t,e,a){"use strict";(function(t){function s(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,s)}return a}function c(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}var l,i=a("hosL"),o=a("QRet"),r=a("Utv1"),n=a("/eY4"),d=a("OhSV");const h={};let b=Object(n.a)(l=class extends i.Component{constructor(t){super(t),this.state=function(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?s(Object(a),!0).forEach((function(e){c(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):s(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}({},h)}render(){const{raceStore:e,appState:a}=this.props.stores,{title:s}=this.props,{language:c="en"}=a,{race:l}=e,n=new Date;let h="";return n>=new Date(l.startDate)&&n<=new Date(l.endDate)?h="race":n>=new Date(l.signupStartDate)&&n<=new Date(l.signupEndDate)?h="signup":n>new Date(l.endDate)&&(h="done"),Object(i.h)(t,null,Object(i.h)("div",{class:"d-flex"},Object(i.h)("div",{class:"flex-fill"},function(t,e=""){return Object(o.d)(()=>{document.title="Homerun Race: "+t},[t]),Object(i.h)("h1",{class:e},t)}(s,"mb-0")),Object(i.h)("div",{class:"flex-fill text-center d-none d-md-block"},Object(i.h)("h1",{class:"mb-0",style:"line-height: 0.8em;"},Object(i.h)("span",{class:"font-weight-lighter",style:"letter-spacing: -1px;"},l.title)),Object(i.h)("small",{class:""},l.startDate&&Object(i.h)(t,null,r.a.formatDate(l.startDate,{locale:c,hour12:!1,hour:"2-digit",minute:"2-digit"})),l.endDate&&Object(i.h)(t,null," - ",r.a.formatDate(l.endDate,{locale:c,hour12:!1,hour:"2-digit",minute:"2-digit"})))),Object(i.h)("div",{class:"flex-fill"},Object(i.h)("h3",{class:"float-right"},"signup"===h&&!l.liveRace&&Object(i.h)(t,null,Object(i.h)("div",{class:"spinner-grow text-primary",role:"status"}),Object(i.h)("span",{class:"badge badge-primary ml-2"},Object(i.h)(d.c,{id:"races.signup-open"},"Påmelding åpen"))),"race"===h&&Object(i.h)(t,null,Object(i.h)("div",{class:"spinner-grow text-danger",role:"status"}),Object(i.h)("span",{class:"badge badge-danger ml-2"},Object(i.h)(d.c,{id:"races.race-in-progress"},"Løp pågår"))),"done"===h&&Object(i.h)(t,null,Object(i.h)("i",{class:"fas fa-check text-success"}),Object(i.h)("span",{class:"badge badge-success ml-2"},Object(i.h)(d.c,{id:"races.race-finished"},"Løp avsluttet")))))),Object(i.h)("div",{class:"d-block d-md-none"},Object(i.h)("h4",{class:"mb-0",style:"line-height: 0.8em;"},Object(i.h)("span",{class:"font-weight-light",style:"letter-spacing: -1px;"},l.title)),Object(i.h)("small",null,l.startDate&&Object(i.h)(t,null,r.a.formatDate(l.startDate,{locale:c,hour12:!1,hour:"2-digit",minute:"2-digit"})),l.endDate&&Object(i.h)(t,null," - ",r.a.formatDate(l.endDate,{locale:c,hour12:!1,hour:"2-digit",minute:"2-digit"})))))}})||l;e.a=b}).call(this,a("hosL").Fragment)},"5l0g":function(t,e,a){"use strict";(function(t){function s(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,s)}return a}function c(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}var l,i=a("hosL"),o=(a("Utv1"),a("/eY4")),r=(a("OhSV"),a("cneo"),a("HqZR"));a("ZOvn");const n={showAddComment:!1};let d=Object(o.a)(l=class extends i.Component{constructor(t){super(t),this.state=function(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?s(Object(a),!0).forEach((function(e){c(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):s(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}({},n),this.updateTimer={},this.inputRef={}}async loadHeatmap(){this.setState({isLoading:!0});const{adminStore:t}=this.props.stores,{raceid:e}=this.props;await t.getPublicHeatmap(e),this.setState({isLoading:!1})}componentDidMount(){this.loadHeatmap()}render(){const{adminStore:e}=this.props.stores,{waypoints:a,zoomToMarkers:s,mapid:c,fullscreenMap:l}=this.props,{publicHeatmap:o}=e;return Object(i.h)(t,null,Object(i.h)(r.a,{stores:this.props.stores,mapId:o.length,heatmap:o,minZoom:2,maxZoom:18,height:600,waypoints:a,zoomToMarkers:s,fullscreenMap:l,key:"map-"+c}))}})||l;e.a=d}).call(this,a("hosL").Fragment)},"8gML":function(t,e,a){"use strict";(function(t){function s(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,s)}return a}function c(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}var l,i=a("hosL"),o=a("Utv1"),r=a("/eY4"),n=a("OhSV"),d=(a("go65"),a("RMlE"),a("5l0g"),a("ZOvn"));d.a.marginTop(!0),d.a.marginBottom(),d.a.subMenuMarginTop();const h={isLoading:!1,email:"",submenu:"ads",jwtToken:o.a.getJwtToken()};let b=Object(r.a)(l=class extends i.Component{constructor(t){super(t),this.state=function(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?s(Object(a),!0).forEach((function(e){c(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):s(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}({},h)}render(){const{appState:e}=this.props.stores,{raceid:a,path:s}=this.props,{darkmode:c}=e;let l="default";return s.match(/\/race\/:raceid$/)?l="default":s.match(/\/race\/:raceid\/mushers$/)?l="mushers":s.match(/\/race\/:raceid\/results$/)?l="results":s.match(/\/race\/:raceid\/media$/)?l="media":s.match(/\/race\/:raceid\/tracking$/)&&(l="tracking"),Object(i.h)(t,null,Object(i.h)("div",{class:"row fixed-top pr-3",style:`margin-top: 40px; background-color: ${c?"#191d21":"#f8f9fa"};`},Object(i.h)("div",{class:"col-12 my-2 mx-2"},Object(i.h)("ul",{class:"nav nav-pills nav-fill flex-nowrap"},Object(i.h)("li",{class:"nav-item",style:"max-width: 20%;"},Object(i.h)("a",{href:"/race/"+a,class:"text-overflow nav-link "+("default"===l?"active":"")},Object(i.h)("nobr",null,Object(i.h)("i",{class:"fas fa-info-circle"})," ",Object(i.h)(n.c,{id:"race.therace"},"Løpet")))),Object(i.h)("li",{class:"nav-item",style:"max-width: 20%;"},Object(i.h)("a",{href:`/race/${a}/mushers`,class:"text-overflow nav-link "+("mushers"===l?"active":"")},Object(i.h)("nobr",null,Object(i.h)("i",{class:"fas fa-users"})," ",Object(i.h)(n.c,{id:"race.mushers"},"Deltakere")))),Object(i.h)("li",{class:"nav-item",style:"max-width: 20%;"},Object(i.h)("a",{href:`/race/${a}/results`,class:"text-overflow nav-link "+("results"===l?"active":"")},Object(i.h)("nobr",null,Object(i.h)("i",{class:"fas fa-poll"})," ",Object(i.h)(n.c,{id:"race.results"},"Resultater")))),Object(i.h)("li",{class:"nav-item",style:"max-width: 20%;"},Object(i.h)("a",{href:`/race/${a}/media`,class:"text-overflow nav-link "+("media"===l?"active":"")},Object(i.h)("nobr",null,Object(i.h)("i",{class:"fas fa-images"})," ",Object(i.h)(n.c,{id:"race.media"},"Bilder")))),Object(i.h)("li",{class:"nav-item",style:"max-width: 20%;"},Object(i.h)("a",{href:`/race/${a}/tracking`,class:"text-overflow nav-link "+("tracking"===l?"active":"")},Object(i.h)("nobr",null,Object(i.h)("i",{class:"fas fa-map-marked-alt"})," ",Object(i.h)(n.c,{id:"race.tracking"},"Tracking"))))))))}})||l;e.a=b}).call(this,a("hosL").Fragment)},LMwI:function(t){t.exports={pointerCursor:"pointerCursor__1W6mM"}},PBOB:function(t,e,a){"use strict";a.r(e),function(t){function s(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,s)}return a}function c(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?s(Object(a),!0).forEach((function(e){l(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):s(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}function l(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}var i,o=a("hosL"),r=(a("QRet"),a("Utv1")),n=a("/eY4"),d=a("OhSV"),h=a("go65"),b=a("fh8t"),p=a.n(b),u=a("RMlE"),m=a("8gML"),O=a("3kDq"),j=(a("aGZh"),a("ZOvn"));const g=j.a.marginTop(!0,!0),f=j.a.marginBottom(),v={isLoading:!1,email:"",submenu:"ads",jwtToken:r.a.getJwtToken(),reloadInSec:null,reloadLastEpoch:null,reloadIsActive:!1,showAdminSendMessage:{},message:{subject:"",body:""}};let y=Object(n.a)(i=class extends o.Component{constructor(t){var e;super(t),e=this,this.toggleDisplayDetails=t=>{const e=t.target.closest("tr").dataset.email,{appState:a}=this.props.stores,{editUserDetails:s}=a;s[e]||a.toggleDisplayDetails(e)},this.adminToggleEditUser=t=>{t.stopPropagation();const e=t.target.closest("tr").dataset.email,{appState:a}=this.props.stores;a.toggleEditUserDetails(e)},this.adminSignupEdit=t=>{const{raceid:e}=this.props,{raceStore:a}=this.props.stores,s=t.target.id,c=t.target.value,{classid:l,contestantid:i}=t.target.dataset,o={raceClassId:l,contestantId:i,["raceClassContestant"+r.a.ucfirst(s)]:c};clearTimeout(this.updateTimer[s]),this.updateTimer[s]=setTimeout((async function(){a.editClass({id:e,data:o})}),500)},this.toggleAdminSendMessage=t=>{const e=t.target.closest("button").dataset.class,{showAdminSendMessage:a}=this.state;a[e]=!a[e],this.setState({showAdminSendMessage:a})},this.sendEmail=async function(t){const{raceid:a}=e.props,s=t.target.closest("button").dataset.to,c=t.target.closest("button").dataset.raceclassid,{appState:l}=e.props.stores,{message:i}=e.state,{subject:o,body:r}=i,n=await l.sendEmail({to:s,subject:o,body:r,raceId:a,raceClassId:c});e.setState({emailResponse:n})},this.resetEmail=()=>{this.setState({emailResponse:null,message:{subject:"",body:""}})},this.signupToRace=async function({signup:t}){const{raceStore:a}=e.props.stores,{race:s={}}=e.props,l=s.id;await a.addContestant({id:l,classId:t.class,newContestant:c({},t)})},this.parseInput=async function(t,a){clearTimeout(e.parseInputTimer),e.parseInputTimer=setTimeout(()=>e.doParseInput(t,a),500)},this.doParseInput=async function(t,a){const s=String(t).split("\n");let c=[];const l=[],i=s[0];c=i.match(/\t/)?i.split("\t"):i.match(/;/)?i.split(";"):i.split(",");for(let t=1,e=s.length;t<e;t+=1){const e=s[t];let a;a=e.match(/\t/)?e.split("\t"):e.match(/;/)?e.split(";"):e.split(",");const i={};a.forEach((t,e)=>{let a=t;"email"===c[e]&&(a=t.toLowerCase()),i[c[e]]=a}),l.push(i)}const{raceStore:o}=e.props.stores,{raceid:r}=e.props;return o.addMultipleContestants({id:r,classId:a,contestants:l}),!0},this.state=c({},v),this.updateTimer={}}async loadRace(t=this.props){this.setState({isLoading:!0});const{raceStore:e}=t.stores,{raceid:a}=t;await e.load(a);const{race:s}=e,c=s.classes.map(t=>{if(t.contestants)return t.contestants.map(t=>t.team)});c.length>0&&await e.loadTeams(c.join(",")),this.setState({isLoading:!1})}componentWillUnmount(){clearTimeout(this.updateTimer.reload),clearTimeout(this.updateTimer.tick)}componentDidMount(){this.loadRace()}componentWillReceiveProps(t){this.loadRace(t)}render(){const{appState:e,raceStore:a,userStore:s}=this.props.stores,{raceid:c,path:l}=this.props,{showAdminSendMessage:i,message:n,emailResponse:b}=this.state,{displayDetails:v,editUserDetails:y,language:w="en"}=e,{race:x}=a,{isAdmin:S}=s,{reloadInSec:D}=this.state,k=Math.floor(r.a.normalizeBetween(D,0,60,0,100));return Object(o.h)(t,null,Object(o.h)(u.a,{stores:this.props.stores}),Object(o.h)("div",{class:"container-fluid ",style:`margin-bottom: ${f}; margin-top: ${g};`},Object(o.h)(m.a,{stores:this.props.stores,path:l,raceid:c}),Object(o.h)("div",{class:"row border-bottom "},Object(o.h)("div",{class:"col-12"},Object(o.h)(d.b,null,Object(o.h)(O.a,{stores:this.props.stores,title:Object(o.h)(d.c,{id:"races.mushers"},"Deltakere")})),D>=0&&Object(o.h)(t,null,Object(o.h)("div",{class:"progress fixed-top",style:"height: 2px;"},Object(o.h)("div",{class:"progress-bar",role:"progressbar",style:`width: ${k}%;`,"aria-valuenow":k,"aria-valuemin":"0","aria-valuemax":"100"}))),x.contestantsUrl?Object(o.h)("div",{class:"p-3 my-4 bg-light"},Object(o.h)("a",{href:x.contestantsUrl,target:"_blank",rel:"noreferrer",native:!0},x.contestantsText?x.contestantsText:Object(o.h)(t,null,Object(o.h)(d.c,{id:"races.musher-here"},"Se deltakere her"))," ",Object(o.h)("i",{class:"fas fa-chevron-circle-right"}))):Object(o.h)(t,null),!x.classes&&Object(o.h)("div",{class:"d-flex justify-content-center my-5 py-5"},Object(o.h)("div",{class:"spinner-border text-primary",role:"status"},Object(o.h)("span",{class:"sr-only"},"Loading..."))),x.classes&&x.classes.sort((t,e)=>t.distance-e.distance).map(e=>Object(o.h)(t,null,S&&Object(o.h)("span",{class:"float-right"},"Total app users: ",e.contestants&&e.contestants.filter(t=>t.user).length),Object(o.h)("h5",null,e.title," ",e.startDate&&Object(o.h)(t,null,": ",Object(o.h)("span",{class:"font-weight-lighter"},r.a.formatDate(`${e.startDate} ${e.startTime||"00:00:00"}`,{locale:w,hour12:!1,hour:"2-digit",minute:"2-digit"})," - ",r.a.formatDate(`${e.endDate} ${e.endTime||"00:00:00"}`,{locale:w,hour12:!1,hour:"2-digit",minute:"2-digit"})))),Object(o.h)("div",{class:"table-responsive-md"},Object(o.h)("table",{class:"table table-sm table-striped"},Object(o.h)("thead",null,Object(o.h)("tr",null,Object(o.h)("th",{scope:"col"},"#"),Object(o.h)("th",{scope:"col",style:"min-width: 200px;"},Object(o.h)(d.c,{id:"races.name"},"Navn")),Object(o.h)("th",{scope:"col",style:"min-width: 400px;"},Object(o.h)(d.c,{id:"races.dogs"},"Hundene")),S&&Object(o.h)("th",{class:"text-center"},Object(o.h)(d.c,{id:"races.admin"},"Admin")))),Object(o.h)("tbody",null,e.contestants&&e.contestants.map((s,c)=>{const l=a.getTeamById(s.team);return Object(o.h)(t,null,Object(o.h)("tr",{onClick:this.toggleDisplayDetails,"data-email":s.email},Object(o.h)("th",{scope:"row"},c+1),Object(o.h)("td",{class:""+(v[s.email]?"font-weight-bold":""),style:""+(v[s.email]?"":"line-height: 0.8em;")},v[s.email]?Object(o.h)(t,null,s.firstname," ",s.lastname,Object(o.h)("br",null),Object(o.h)("span",{class:"text-muted"},l.name),Object(o.h)("br",null),Object(o.h)("small",{class:"text-muted"},s.sportsClub),Object(o.h)("br",null),s.facebook&&Object(o.h)("a",{class:"mr-2",href:j.a.asFacebookLink(s.facebook),native:!0,target:"_blank",rel:"noreferrer"},Object(o.h)("i",{class:"fab fa-facebook"})),s.instagram&&Object(o.h)("a",{class:"mr-2",href:j.a.asInstagramLink(s.instagram),native:!0,target:"_blank",rel:"noreferrer"},Object(o.h)("i",{class:"fab fa-instagram"})),Object(o.h)("br",null),s.price1&&Object(o.h)("div",{class:"font-weight-lighter"},Object(o.h)("i",{class:"fas fa-trophy text-warning"})," ",s.price1,s.priceSent&&Object(o.h)(t,null,Object(o.h)("i",{class:"fas fa-check text-success"}))),s.price2&&Object(o.h)("div",{class:"font-weight-lighter"},Object(o.h)("i",{class:"fas fa-trophy text-warning"})," ",s.price2),s.price3&&Object(o.h)("div",{class:"font-weight-lighter"},Object(o.h)("i",{class:"fas fa-trophy text-warning"})," ",s.price3)):Object(o.h)(t,null,s.price1&&Object(o.h)("span",{class:"float-right text-warning",style:"font-size: 1.2em;"},Object(o.h)("i",{class:"fas fa-trophy"}),s.priceSent&&Object(o.h)(t,null,Object(o.h)("i",{class:"fas fa-check text-success"}))),Object(o.h)("nobr",null,s.firstname," ",s.lastname,Object(o.h)("br",null),Object(o.h)("small",{class:"text-muted"},s.sportsClub),Object(o.h)("br",null)))),Object(o.h)("td",null,S&&Object(o.h)(t,null,Object(o.h)("button",{class:"btn btn-primary btn-sm float-right",onClick:this.adminToggleEditUser},Object(o.h)("i",{class:"fas fa-user-edit"}))),S&&x.liveRace&&Object(o.h)(t,null,Object(o.h)("span",{class:"float-right text-warning mr-2",style:"font-size: 1.2em;"},s.user)),v[s.email]||y[s.email]?Object(o.h)(t,null,Object(o.h)("div",{class:"d-flex "+(v[s.email]?"flex-nowrap":""),style:"min-width: 400px;"},l&&l.dogs&&l.dogs.map(e=>Object(o.h)("div",{class:"mx-0 mr-1 px-0 position-relative pt-1"},Object(o.h)("div",{class:"text-center border rounded-circle imageRounded text-muted pt-2",style:(e.image?`background-image: url("${e.image.s3SmallLink}"); background-size: cover;`:"")+" border-width: 2px !important;"},!e.image&&Object(o.h)("span",{class:"font-weight-lighter",style:"font-size: 35px;"},r.a.ucfirst(e.name,!0))),Object(o.h)("small",null,Object(o.h)("span",{class:"float-left text-overflow",style:"width: 70px;"},e.name),Object(o.h)("br",null)),(e.birth||e.gender)&&Object(o.h)("small",null,Object(o.h)("small",{class:"font-weight-normal float-right position-absolute text-white bg-info p-1 rounded",style:"top: 0px; right: 0px; line-height: 0.8em;"},e.birth&&Object(o.h)("span",{class:"mr-1 text-white"},r.a.age(e.birth,e.deceased)),e.gender&&Object(o.h)(t,null,"female"===e.gender?Object(o.h)("i",{class:"fas fa-venus"}):Object(o.h)("i",{class:"fas fa-mars"})))))))):Object(o.h)(t,null,l&&l.dogs&&Object(o.h)(t,null,l.dogs.length," ",Object(o.h)("i",{style:"width: 20px;",class:"fas fa-dog"}))),S&&y[s.email]&&Object(o.h)(t,null,Object(o.h)("h5",null,"Admin edit:"),Object(o.h)("div",{class:"form-group row my-0"},Object(o.h)("label",{class:"col-sm-2 col-form-label text-right"},"Email"),Object(o.h)("div",{class:"col-sm-10"},s.email)),Object(o.h)("div",{class:"form-group row my-0"},Object(o.h)("label",{for:"bib",class:"col-4 col-form-label text-right"},"bib"),Object(o.h)("div",{class:"col-8"},Object(o.h)("input",{type:"number",class:"form-control",id:"bib","data-classid":e.id,"data-contestantid":s.id,onInput:this.adminSignupEdit,value:s.bib}))),Object(o.h)("div",{class:"form-group row my-0"},Object(o.h)("label",{for:"startTime",class:"col-4 col-form-label text-right"},"startTime"),Object(o.h)("div",{class:"col-8"},Object(o.h)("input",{type:"date",class:"form-control",id:"startTime","data-classid":e.id,"data-contestantid":s.id,onInput:this.adminSignupEdit,value:s.startTime?r.a.isoDate(s.startTime,!1,!1,!1):null}))),Object(o.h)("div",{class:"form-group row my-0"},Object(o.h)("label",{for:"team",class:"col-4 col-form-label text-right"},"team"),Object(o.h)("div",{class:"col-8"},Object(o.h)("input",{type:"number",class:"form-control",id:"team","data-classid":e.id,"data-contestantid":s.id,onInput:this.adminSignupEdit,value:s.team}))),Object(o.h)("div",{class:"form-group row my-0"},Object(o.h)("label",{for:"user",class:"col-4 col-form-label text-right"},"user"),Object(o.h)("div",{class:"col-8"},Object(o.h)("input",{type:"number",class:"form-control",id:"user","data-classid":e.id,"data-contestantid":s.id,onInput:this.adminSignupEdit,value:s.user}))),Object(o.h)("div",{class:"form-group row my-0"},Object(o.h)("label",{for:"team",class:"col-4 col-form-label text-right"},"Race status"),Object(o.h)("div",{class:"col-8"},Object(o.h)("select",{class:"form-control",id:"raceStatus","data-classid":e.id,"data-contestantid":s.id,onInput:this.adminSignupEdit,value:s.raceStatus},Object(o.h)("option",{value:""},"-- Choose race status --"),Object(o.h)("option",{value:"OK"},"OK - Everything ok"),Object(o.h)("option",{value:"DNS"},"DNS - Did Not Start"),Object(o.h)("option",{value:"DNF"},"DNF - Did Not Finish"),Object(o.h)("option",{value:"DNQ"},"DNQ - Did not qualify"),Object(o.h)("option",{value:"DQ"},"DQ - Disqualified")))),Object(o.h)("div",{class:"form-group row my-0"},Object(o.h)("label",{for:"raceComment",class:"col-4 col-form-label text-right"},"Race comment"),Object(o.h)("div",{class:"col-8"},Object(o.h)("input",{type:"text",class:"form-control",id:"raceComment","data-classid":e.id,"data-contestantid":s.id,onInput:this.adminSignupEdit,value:s.raceComment}))),Object(o.h)("div",{class:"form-group row my-0"},Object(o.h)("label",{for:"gpxResultsApproved",class:"col-4 col-form-label text-right"},"GPX Results approved (date)"),Object(o.h)("div",{class:"col-8"},Object(o.h)("input",{type:"date",class:"form-control",id:"gpxResultsApproved","data-classid":e.id,"data-contestantid":s.id,onInput:this.adminSignupEdit,value:s.gpxResultsApproved?r.a.isoDate(s.gpxResultsApproved,!1,!1,!0):null}))),Object(o.h)("div",{class:"form-group row my-0"},Object(o.h)("label",{for:"paidSignupfee",class:"col-4 col-form-label text-right"},"paidSignupfee (date)"),Object(o.h)("div",{class:"col-8"},Object(o.h)("input",{type:"date",class:"form-control",id:"paidSignupfee","data-classid":e.id,"data-contestantid":s.id,onInput:this.adminSignupEdit,value:s.paidSignupfee?r.a.isoDate(s.paidSignupfee,!1,!1,!0):null}))),Object(o.h)("div",{class:"form-group row my-0"},Object(o.h)("label",{for:"startOrder",class:"col-4 col-form-label text-right"},"startOrder"),Object(o.h)("div",{class:"col-8"},Object(o.h)("input",{type:"number",class:"form-control",id:"startOrder","data-classid":e.id,"data-contestantid":s.id,onInput:this.adminSignupEdit,value:s.startOrder}))),Object(o.h)("div",{class:"form-group row my-0"},Object(o.h)("label",{for:"cellphone",class:"col-4 col-form-label text-right"},"Mobil"),Object(o.h)("div",{class:"col-8"},Object(o.h)("input",{type:"text",class:"form-control",id:"cellphone","data-classid":e.id,"data-contestantid":s.id,onInput:this.adminSignupEdit,value:s.cellphone}))),Object(o.h)("div",{class:"form-group row my-0"},Object(o.h)("label",{for:"name",class:"col-4 col-form-label text-right"},"Navn"),Object(o.h)("div",{class:"col-8"},Object(o.h)("input",{type:"text",class:"form-control",id:"name","data-classid":e.id,"data-contestantid":s.id,onInput:this.adminSignupEdit,value:s.name}))),Object(o.h)("div",{class:"form-group row my-0"},Object(o.h)("label",{for:"firstname",class:"col-4 col-form-label text-right"},"Fornavn"),Object(o.h)("div",{class:"col-8"},Object(o.h)("input",{type:"text",class:"form-control",id:"firstname","data-classid":e.id,"data-contestantid":s.id,onInput:this.adminSignupEdit,value:s.firstname}))),Object(o.h)("div",{class:"form-group row my-0"},Object(o.h)("label",{for:"lastname",class:"col-4 col-form-label text-right"},"Etternavn"),Object(o.h)("div",{class:"col-8"},Object(o.h)("input",{type:"text",class:"form-control",id:"lastname","data-classid":e.id,"data-contestantid":s.id,onInput:this.adminSignupEdit,value:s.lastname}))),Object(o.h)("div",{class:"form-group row my-0"},Object(o.h)("label",{for:"address",class:"col-4 col-form-label text-right"},"Adresse"),Object(o.h)("div",{class:"col-8"},Object(o.h)("input",{type:"text",class:"form-control",id:"address","data-classid":e.id,"data-contestantid":s.id,onInput:this.adminSignupEdit,value:s.address}))),Object(o.h)("div",{class:"form-group row my-0"},Object(o.h)("label",{for:"postalcode",class:"col-4 col-form-label text-right"},"Postalcode"),Object(o.h)("div",{class:"col-8"},Object(o.h)("input",{type:"text",class:"form-control",id:"postalcode","data-classid":e.id,"data-contestantid":s.id,onInput:this.adminSignupEdit,value:s.postalcode}))),Object(o.h)("div",{class:"form-group row my-0"},Object(o.h)("label",{for:"postalplace",class:"col-4 col-form-label text-right"},"Postalplace"),Object(o.h)("div",{class:"col-8"},Object(o.h)("input",{type:"text",class:"form-control",id:"postalplace","data-classid":e.id,"data-contestantid":s.id,onInput:this.adminSignupEdit,value:s.postalplace}))),Object(o.h)("div",{class:"form-group row my-0"},Object(o.h)("label",{for:"flag",class:"col-4 col-form-label text-right"},"flag (emoji)"),Object(o.h)("div",{class:"col-8"},Object(o.h)("input",{type:"text",class:"form-control",id:"flag","data-classid":e.id,"data-contestantid":s.id,onInput:this.adminSignupEdit,value:s.flag}))),Object(o.h)("div",{class:"form-group row my-0"},Object(o.h)("label",{for:"countryCode",class:"col-4 col-form-label text-right"},"countryCode (iso)"),Object(o.h)("div",{class:"col-8"},Object(o.h)("input",{type:"text",class:"form-control",id:"countryCode","data-classid":e.id,"data-contestantid":s.id,onInput:this.adminSignupEdit,value:s.countryCode}))),Object(o.h)("div",{class:"form-group row my-0"},Object(o.h)("label",{for:"birthdate",class:"col-4 col-form-label text-right"},"birthdate"),Object(o.h)("div",{class:"col-8"},Object(o.h)("input",{type:"date",class:"form-control",id:"birthdate","data-classid":e.id,"data-contestantid":s.id,onInput:this.adminSignupEdit,value:s.birthdate?r.a.isoDate(s.birthdate,!1,!1,!0):null}))),Object(o.h)("div",{class:"form-group row my-0"},Object(o.h)("label",{for:"sportsClub",class:"col-4 col-form-label text-right"},"Klubb"),Object(o.h)("div",{class:"col-8"},Object(o.h)("input",{type:"text",class:"form-control",id:"sportsClub","data-classid":e.id,"data-contestantid":s.id,onInput:this.adminSignupEdit,value:s.sportsClub}))),Object(o.h)("div",{class:"form-group row my-0"},Object(o.h)("label",{for:"facebook",class:"col-4 col-form-label text-right"},"Facebook"),Object(o.h)("div",{class:"col-8"},Object(o.h)("input",{type:"text",class:"form-control",id:"facebook","data-classid":e.id,"data-contestantid":s.id,onInput:this.adminSignupEdit,value:s.facebook}))),Object(o.h)("div",{class:"form-group row my-0"},Object(o.h)("label",{for:"instagram",class:"col-4 col-form-label text-right"},"Instagram"),Object(o.h)("div",{class:"col-8"},Object(o.h)("input",{type:"text",class:"form-control",id:"instagram","data-classid":e.id,"data-contestantid":s.id,onInput:this.adminSignupEdit,value:s.instagram}))),Object(o.h)("div",{class:"form-group row my-0"},Object(o.h)("label",{for:"team",class:"col-4 col-form-label text-right"},"Klasse"),Object(o.h)("div",{class:"col-8"},Object(o.h)("select",{class:"form-control",id:"class","aria-describedby":"classHelp","data-classid":e.id,"data-contestantid":s.id,onInput:this.adminSignupEdit,value:s.class},Object(o.h)("option",{value:""},"-- Choose race class --"),x.classes&&x.classes.sort((t,e)=>t.distance-e.distance).map(e=>Object(o.h)(t,null,Object(o.h)("option",{value:e.id},e.title," - ",e.distance," km - Påmelding: ",e.signupfee||x.signupfee," NOK")))))),Object(o.h)("div",{class:"form-group row my-0"},Object(o.h)("label",{for:"price1",class:"col-4 col-form-label text-right"},"Price 1"),Object(o.h)("div",{class:"col-8"},Object(o.h)("input",{type:"text",class:"form-control",id:"price1","data-classid":e.id,"data-contestantid":s.id,onInput:this.adminSignupEdit,value:s.price1}))),Object(o.h)("div",{class:"form-group row my-0"},Object(o.h)("label",{for:"price2",class:"col-4 col-form-label text-right"},"Price 2"),Object(o.h)("div",{class:"col-8"},Object(o.h)("input",{type:"text",class:"form-control",id:"price2","data-classid":e.id,"data-contestantid":s.id,onInput:this.adminSignupEdit,value:s.price2}))),Object(o.h)("div",{class:"form-group row my-0"},Object(o.h)("label",{for:"price3",class:"col-4 col-form-label text-right"},"Price 3"),Object(o.h)("div",{class:"col-8"},Object(o.h)("input",{type:"text",class:"form-control",id:"price3","data-classid":e.id,"data-contestantid":s.id,onInput:this.adminSignupEdit,value:s.price3}))),Object(o.h)("div",{class:"form-group row my-0"},Object(o.h)("label",{for:"priceSent",class:"col-4 col-form-label text-right"},"Price sent"),Object(o.h)("div",{class:"col-8"},Object(o.h)("input",{type:"date",class:"form-control",id:"priceSent","data-classid":e.id,"data-contestantid":s.id,onInput:this.adminSignupEdit,value:s.priceSent?r.a.isoDate(s.priceSent,!1,!1,!0):null}))),Object(o.h)("div",{class:"form-group row my-5"},Object(o.h)("div",{class:"col-sm-10"},Object(o.h)("button",{type:"button",class:"btn btn-danger float-right",id:"deleteUser",value:"1",onClick:this.adminSignupEdit,"data-classid":e.id,"data-contestantid":s.id},"Delete user from this class"))))),S&&Object(o.h)("td",{class:"text-center",style:"line-height: 1.0em;"},s.paidSignupfee&&Object(o.h)(t,null,Object(o.h)("i",{class:"fas fa-check text-success"}),Object(o.h)("br",null)),Object(o.h)("small",null,s.raceStatus&&Object(o.h)(t,null,Object(o.h)("span",{class:"text-muted"},"raceStatus:"),Object(o.h)("br",null)," ",s.raceStatus,Object(o.h)("br",null)),s.raceComment&&Object(o.h)(t,null,Object(o.h)("span",{class:"text-muted"},"raceComment:"),Object(o.h)("br",null)," ",s.raceComment,Object(o.h)("br",null)),s.gpxResultsApproved&&Object(o.h)(t,null,Object(o.h)("span",{class:"text-muted"},"gpxResultsApproved:"),Object(o.h)("br",null)," ",s.gpxResultsApproved,Object(o.h)("br",null))))))})))),S&&Object(o.h)(t,null,i[e.id]?Object(o.h)(t,null,Object(o.h)("div",{class:"container"},Object(o.h)("div",{class:"row"},Object(o.h)("div",{class:"col-12"},Object(o.h)("h5",null,"Message to all mushers in ",e.title),Object(o.h)("div",{class:"overflow-auto p-5",style:"max-height: 30vh;"},Object(o.h)("small",null,e.emails&&e.emails.map(t=>{return Object(o.h)("div",{class:"border rounded-lg p-3 mb-3"},Object(o.h)("div",{class:"row bg-light"},Object(o.h)("div",{class:"col-3 text-right"},"Date:"),Object(o.h)("div",{class:"col-9"},r.a.formatDate(t.date,{locale:w,hour12:!1,hour:"2-digit",minute:"2-digit"}))),Object(o.h)("div",{class:"row bg-light"},Object(o.h)("div",{class:"col-3 text-right"},"To:"),Object(o.h)("div",{class:"col-9"},t.to.map(t=>Object(o.h)("span",{class:"badge badge-info px-2 py-1 mr-2"},t)))),Object(o.h)("div",{class:"row bg-light"},Object(o.h)("div",{class:"col-3 text-right"},"Subject:"),Object(o.h)("div",{class:"col-9"},t.subject)),Object(o.h)("div",{class:"row mt-2"},Object(o.h)("div",{class:"col-3 text-right"},"Body:"),Object(o.h)("div",{class:"col-9",dangerouslySetInnerHTML:{__html:(e=t.body,"string"==typeof e?e.replace(/[\n]/g,"<br>"):e)}})));var e}))),Object(o.h)("div",{class:"form-group row"},Object(o.h)("label",{for:"subject",class:"col-2 col-form-label text-right font-weight-lighter"},"To"),Object(o.h)("div",{class:"col-10"},e.contestants&&e.contestants.map(e=>Object(o.h)(t,null,Object(o.h)("span",{class:"badge badge-info px-2 py-1 mr-2"},e.firstname," ",e.lastname," (",e.email,")"))))),Object(o.h)("div",{class:"form-group row"},Object(o.h)("label",{for:"subject",class:"col-2 col-form-label text-right font-weight-lighter"},"Subject"),Object(o.h)("div",{class:"col-10"},Object(o.h)("input",{type:"text",class:"form-control",id:"subject",onInput:Object(h.a)(this,"message.subject"),value:n.subject}))),Object(o.h)("div",{class:"form-group row"},Object(o.h)("label",{for:"body",class:"col-2 col-form-label text-right font-weight-lighter"},"Message"),Object(o.h)("div",{class:"col-5"},Object(o.h)("textarea",{type:"text",class:"form-control",id:"body",rows:"10",onInput:Object(h.a)(this,"message.body"),value:n.body})),Object(o.h)("div",{class:"col-5 contain-images"},Object(o.h)(p.a,{markdown:n.body,markdownOpts:j.a.getMarkdownOptions()}))),b&&Object(o.h)(t,null,Object(o.h)("div",{class:"alert alert-"+(b&&b.status>=300?"danger":"success"),role:"alert"},Object(o.h)("small",null,Object(o.h)("xmp",null,JSON.stringify(b,null,4))))),Object(o.h)("button",{class:"btn btn-success float-right",type:"button","data-to":e.contestants&&e.contestants.map(t=>t.email),"data-raceclassid":e.id,onClick:this.sendEmail},Object(o.h)("i",{class:"fas fa-paper-plane"})," Send email to all mushers"),Object(o.h)("button",{class:"btn btn-danger float-right mr-2",type:"button",onClick:this.resetEmail},Object(o.h)("i",{class:"fas fa-times"})," Reset email")),Object(o.h)("div",{class:"col-12 text-center"},Object(o.h)("button",{class:"btn btn-sm btn-link",type:"button",onClick:this.toggleAdminSendMessage,"data-class":e.id},"Hide email form"))))):Object(o.h)(t,null,Object(o.h)("div",{class:"col-12 text-center"},Object(o.h)("button",{class:"btn btn-sm btn-link",type:"button",onClick:this.toggleAdminSendMessage,"data-class":e.id},"Send message to all in this class"))),S&&1===x.liveRace&&Object(o.h)(t,null,Object(o.h)("div",{class:"form-group"},Object(o.h)("label",{for:"importUsers"},Object(o.h)(d.c,{id:"races.paste-users"},"Paste your user data here to import users"),":"),Object(o.h)("textarea",{class:"form-control",id:"importUsers",rows:"20",oninput:t=>this.parseInput(t.target.value,e.id)}))))))))))}})||i;e.default=y}.call(this,a("hosL").Fragment)},RMlE:function(t,e,a){"use strict";function s(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,s)}return a}function c(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}var l,i=a("hosL"),o=a("ox/y"),r=(a("Utv1"),a("/eY4")),n=(a("go65"),a("Y3FI")),d=a("OhSV");a("LMwI");const h={menu:{profile:!1,main:!1},searchText:""};let b=Object(r.a)(l=class extends i.Component{constructor(t){var e;super(t),e=this,this.toggleDropdown=t=>{const{menu:e}=this.state;let a=t.target.dataset.name;!a&&t.target.parentNode&&(a=t.target.parentNode.dataset.name),a&&(e[a]=!e[a]),this.setState({menu:e})},this.toggleDarkmode=t=>{const{appState:e}=this.props.stores;e.toggleDarkmode(),this.toggleDropdown(t)},this.toggleViewmode=t=>{const{appState:e}=this.props.stores;let a=t.target.dataset.mode;!a&&t.target.parentNode&&(a=t.target.parentNode.dataset.mode),e.toggleViewmode(a),this.toggleDropdown(t)},this.reloadApp=()=>{window.location.reload(!0)},this.adminLoadAll=async function(){const{userStore:t}=e.props.stores;await t.getInfo(!0)},this.changeLanguage=t=>{const e=t.target.value;console.log("changeLanguage",e);const{appState:a,userStore:s}=this.props.stores,{user:c={}}=s;c.email&&s.setLanguage({email:c.email,language:e}),a.setLanguage(e)},this.search=()=>{const{searchText:t}=this.state;Object(n.route)("/search/"+t)},this.state=function(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?s(Object(a),!0).forEach((function(e){c(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):s(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}({},h)}render(){const{menu:t}=this.state,{appState:e,userStore:a}=this.props.stores,{darkmode:s}=e,{user:c,notifications:l=[]}=a,{language:r="en"}=(l.filter(t=>!t.read),c);return Object(i.h)("nav",{class:"navbar navbar-expand-lg navbar-themed fixed-top py-1",style:"z-index: 99999;"},Object(i.h)("a",{class:"navbar-brand",href:"/race/"},Object(i.h)("img",{src:`./assets/homerun-race-logo-2-${s?"white-":""}small.png`,height:"37",class:"position-absolute",style:"top: 5px; left: 6px"}),Object(i.h)("span",{class:"font-weight-normal",style:"margin-left: 30px; font-size: 20px;"},"Homerun Race")),Object(i.h)("button",{class:"navbar-toggler",type:"button","data-name":"main",onClick:this.toggleDropdown},Object(i.h)("span",{class:"navbar-toggler-icon"})),Object(i.h)("div",{class:"collapse navbar-collapse "+(t.main?"show":""),id:"navbarSupportedContent"},Object(i.h)("ul",{class:"navbar-nav mr-auto ml-5"},Object(i.h)("li",{class:"nav-item"},Object(i.h)(o.Link,{className:"nav-link",activeClassName:"active",href:"/race","data-name":"main",style:"font-size: 1.0em !important;",onClick:this.toggleDropdown},Object(i.h)("i",{class:"fas fa-flag-checkered"})," ",Object(i.h)(d.c,{id:"header.races"},"Løpene"))),Object(i.h)("li",{class:"nav-item"},Object(i.h)(o.Link,{className:"nav-link",activeClassName:"active",href:"/race/support","data-name":"main",style:"font-size: 1.0em !important;",onClick:this.toggleDropdown},Object(i.h)("i",{class:"far fa-question-circle"})," ",Object(i.h)(d.c,{id:"header.support"},"Support"))),Object(i.h)("li",{class:"nav-item"},Object(i.h)(o.Link,{className:"nav-link",activeClassName:"active",href:"/race/news","data-name":"main",style:"font-size: 1.0em !important;",onClick:this.toggleDropdown},Object(i.h)("i",{class:"fas fa-quote-right"})," ",Object(i.h)(d.c,{id:"header.news"},"Nyheter")))),Object(i.h)("ul",{class:"navbar-nav ml-auto "},Object(i.h)("li",{class:"nav-item mr-2"},Object(i.h)("div",{class:"form-row align-items-center"},Object(i.h)("div",{class:"col-auto my-1",style:"width: 80px;"},Object(i.h)("select",{class:"custom-select",style:"background-color: inherit; border: none; padding: 0; height: 1.1em; font-size: 0.9em;",onInput:this.changeLanguage},Object(i.h)("option",{value:"no",selected:"no"===r},"🇳🇴 NO"),Object(i.h)("option",{value:"en",selected:"en"===r},"🇬🇧 EN"),Object(i.h)("option",{value:"es",selected:"es"===r},"🇪🇸 ES"),Object(i.h)("option",{value:"de",selected:"de"===r},"🇩🇪 DE"),Object(i.h)("option",{value:"fr",selected:"fr"===r},"🇫🇷 FR"),Object(i.h)("option",{value:"ru",selected:"ru"===r},"🇷🇺 RU"),Object(i.h)("option",{value:"se",selected:"se"===r},"🇸🇪 SE"))))),Object(i.h)("li",{class:"nav-item d-block d-lg-none"},Object(i.h)(o.Link,{className:"nav-link",activeClassName:"active","data-name":"main",onClick:this.toggleDarkmode},Object(i.h)("i",{class:(s?"fas text-warning":"far")+" fa-moon"})," ",Object(i.h)(d.c,{id:"header.darkmode"},"Nattmodus"))),Object(i.h)("li",{class:"nav-item mr-2 d-none d-lg-block"},Object(i.h)("button",{class:"btn btn-link","data-name":"profile",onClick:this.toggleDarkmode},Object(i.h)("i",{class:(s?"fas text-warning":"far")+" fa-moon"}))))))}})||l;e.a=b},aGZh:function(t,e,a){"use strict";(function(t){function e(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,s)}return a}function s(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}var c,l=a("hosL"),i=a("/eY4");const o={};Object(i.a)(c=class extends l.Component{constructor(t){super(t),this.state=function(t){for(var a=1;a<arguments.length;a++){var c=null!=arguments[a]?arguments[a]:{};a%2?e(Object(c),!0).forEach((function(e){s(t,e,c[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(c)):e(Object(c)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(c,e))}))}return t}({},o)}render(){const{appState:e}=this.props.stores,{text:a}=this.props,{language:s="en"}=e;let c=a;const i=new RegExp(`/<${s}>(.*?)</${s}>/`);return a.replace(i,"$1")&&(c=a),Object(l.h)(t,null,c)}})}).call(this,a("hosL").Fragment)}}]);
//# sourceMappingURL=73.chunk.cdabd.esm.js.map