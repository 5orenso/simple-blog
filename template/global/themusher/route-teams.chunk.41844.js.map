{"version":3,"sources":["webpack:///./routes/teams/index.js","webpack:///./components/data/distance.js","webpack:///./components/data/temperature.js","webpack:///./components/data/weight.js","webpack:///./components/team/index.js","webpack:///./components/data/elevation.js","webpack:///./components/data/speed.js"],"names":["MARGIN_TOP","mu","marginTop","MARGIN_BOTTOM","marginTopBack","marginBottom","SUB_MENU_MARGIN_TOP","subMenuMarginTop","initialState","isLoading","Teams","observer","props","state","loadTeams","this","setState","userStore","stores","messageStore","teamStore","load","undefined","addData","getNotifications","getUnReadMessages","componentDidMount","render","scrolledDown","teams","darkmode","appState","class","style","href","id","fields","total","length","map","team","Component","displayDistance","distance","util","format","Distance","value","smallUnit","user","settings","imperial","kmToMiles","Temperature","celciusToFahrenheit","Weight","kgToPounds","Team","requestFollowTeam","e","preventDefault","stopPropagation","teamId","parseInt","target","parentElement","dataset","followRequest","requestSent","getButton","text","skipHome","isYourTeam","members","indexOf","isFollowing","followers","isBlocked","blockedFollowers","hasRequestedFollow","followRequests","findIndex","type","onClick","unFollowTeam","disabled","data-team","public","showButton","publicUsers","showLocation","showMembers","currentMonth","Date","getMonth","currentYear","getFullYear","month","year","seasonStart","workoutSummary","findWorkoutSummary","language","teamAmbition","findTeamAmbition","ambition","ambitions","teamType","findTeamType","teamUser","find","teamUserDisplayName","displayName","image","getImage","priority","url","name","place","country","dogs","distanceKm","elevation","duration","secToHms","speedAvg","Elevation","meterToFeet","Speed","kmtToMph"],"mappings":"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","file":"route-teams.chunk.41844.js","sourcesContent":["import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport { Text, Localizer } from 'preact-i18n';\n\nimport mu from '../../lib/musher-util';\nconst MARGIN_TOP = mu.marginTop(true);\nconst MARGIN_TOP_BACK = mu.marginTopBack(false);\nconst MARGIN_BOTTOM = mu.marginBottom();\nconst SUB_MENU_MARGIN_TOP = mu.subMenuMarginTop();\n\nimport Team from '../../components/team';\n\nconst initialState = {\n\tisLoading: false,\n};\n\n@observer\nclass Teams extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            ...initialState,\n        };\n    }\n\n\tasync loadTeams() {\n\t\tthis.setState({ isLoading: true });\n\t\tconst { teamStore, userStore, messageStore } = this.props.stores;\n\t\tawait teamStore.load(undefined, false, { addData: ['workoutSummary', 'musherSummary'] });\n\t\tawait userStore.getNotifications();\n        await messageStore.getUnReadMessages();\n\t\tthis.setState({ isLoading: false });\n\t}\n\n\tcomponentDidMount() {\n\t\tthis.loadTeams();\n\t}\n\n\trender() {\n        const { scrolledDown } = this.props;\n\t\tconst { isLoading } = this.state;\n\t\tconst { teamStore, userStore, appState } = this.props.stores;\n\t\tconst { teams } = teamStore;\n\t\tconst { user } = userStore;\n\t\tconst { darkmode } = appState;\n\n\t\treturn (\n\t\t\t<div class='container-fluid' style={`margin-bottom: ${MARGIN_BOTTOM}; margin-top: ${MARGIN_TOP};`}>\n\t\t\t\t<div class='row fixed-top pt-2' style={`margin-top: ${scrolledDown > 0 ? 0 : SUB_MENU_MARGIN_TOP}; background-color: ${darkmode ? '#191d21' : '#f8f9fa'}; transition: all 0.3s ease-in-out;`}>\n\t\t\t\t\t<div class='col text-center border-bottom border-primary subtopmenu'>\n\t\t\t\t\t\t<a href='/teams/' class='text-primary stretched-link'><nobr><i class='fas fa-users' /> <Text id='teams.your-teams'>Your teams</Text></nobr></a>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class='col text-center subtopmenu'>\n\t\t\t\t\t\t<a href='/teams/connect' class='text-secondary stretched-link'><nobr><i class='fas fa-users' /> <Text id='teams.public-teams'>Public teams</Text></nobr></a>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class='row'>\n\t\t\t\t\t<div class='col-12'>\n\t\t\t\t\t\t<div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 px-0'>\n\t\t\t\t\t\t\t<h5><Text id='teams.all-teams' fields={{ total: teams.length }}>Teamene dine - {teams.length} stk</Text></h5>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 px-0 clearfix mb-2'>\n\t\t\t\t\t\t\t<a class='btn btn-sm btn-primary float-right'\n\t\t\t\t\t\t\t\thref='/teams/edit/new'\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<i class='fas fa-plus' /> <Text id='teams.add-new'>Legg til team</Text>\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t{teams && teams.map(team => (\n\t\t\t\t\t\t\t<Team stores={this.props.stores} team={team} />\n\t\t\t\t\t\t))}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nexport default Teams;\n","import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport { Text, Localizer } from 'preact-i18n';\n\nimport mu from '../../lib/musher-util';\n\nfunction displayDistance(distance) {\n\tif (distance < 5) {\n\t\treturn util.format(distance, 2);\n\t}\n\tif (distance < 10) {\n\t\treturn util.format(distance, 1);\n\t}\n\treturn util.format(distance, 1);\n}\n\nfunction kmToMiles(value) {\n    return 0.621371 * value;\n}\n\n@observer\nclass Distance extends Component {\n    render() {\n\t\tconst { value = 0, smallUnit } = this.props;\n\t\tconst { userStore } = this.props.stores;\n\t\tconst { user } = userStore;\n\t\tconst { settings = {} } = user;\n\n        if (settings.imperial) {\n            return (<>\n                <nobr>\n\t\t\t\t\t{displayDistance(kmToMiles(value))} {smallUnit ? <><small><small><small class='ml-0 text-muted'>mi</small></small></small></> : <>mi</>}\n\t\t\t\t</nobr>\n            </>);\n        }\n\n\t\treturn (<>\n\t\t\t<nobr>\n\t            {displayDistance(value)} {smallUnit ? <><small><small><small class='ml-0 text-muted'>km</small></small></small></> : <>km</>}\n\t\t\t</nobr>\n\t    </>);\n    }\n}\n\nexport default Distance;\n","import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport { Text, Localizer } from 'preact-i18n';\n\nimport mu from '../../lib/musher-util';\n\nfunction celciusToFahrenheit(value) {\n    return ((value * 9/5) + 32);\n}\n\n@observer\nclass Temperature extends Component {\n    render() {\n\t\tconst { value = 0, smallUnit } = this.props;\n\t\tconst { userStore } = this.props.stores;\n\t\tconst { user } = userStore;\n\t\tconst { settings = {} } = user;\n\n        if (settings.imperial) {\n            return (<>\n                <nobr>\n                    {util.format(celciusToFahrenheit(value), 0)}°F\n                </nobr>\n            </>);\n        }\n\n\t\treturn (<>\n            <nobr>\n                {util.format(value, 1)}°C\n            </nobr>\n        </>);\n    }\n}\n\nexport default Temperature;\n","import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport { Text, Localizer } from 'preact-i18n';\n\nimport mu from '../../lib/musher-util';\n\nfunction kgToPounds(value) {\n    return 2.20462 * value;\n}\n\n@observer\nclass Weight extends Component {\n    render() {\n\t\tconst { value = 0, smallUnit } = this.props;\n\t\tconst { userStore } = this.props.stores;\n\t\tconst { user } = userStore;\n\t\tconst { settings = {} } = user;\n\n        if (settings.imperial) {\n            return (<>\n                <nobr>\n                    {util.format(kgToPounds(value), 0)} lb\n                </nobr>\n            </>);\n        }\n\n\t\treturn (<>\n            <nobr>\n                {util.format(value, 0)} kg\n            </nobr>\n        </>);\n    }\n}\n\nexport default Weight;\n","import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport { Text, Localizer } from 'preact-i18n';\n\nimport Speed from '../../components/data/speed';\nimport Elevation from '../../components/data/elevation';\nimport Weight from '../../components/data/weight';\nimport Distance from '../../components/data/distance';\nimport Temperature from '../../components/data/temperature';\n\nimport mu from '../../lib/musher-util';\n\n@observer\nclass Team extends Component {\n    requestFollowTeam = (e) => {\n        e.preventDefault();\n        e.stopPropagation();\n        const { teamStore, userStore } = this.props.stores;\n        const { user } = userStore;\n        const teamId = parseInt(e.target.parentElement.dataset.team || e.target.dataset.team, 10);\n        teamStore.followRequest(teamId, user);\n        this.setState({ requestSent: true });\n    }\n\n    getButton = (text = '') => {\n        const { requestSent } = this.state;\n        const { userStore } = this.props.stores;\n        const { user } = userStore;\n        const { team, skipHome } = this.props;\n        const isYourTeam = team.members && team.members.indexOf(user.id) > -1;\n        const isFollowing = team.followers && team.followers.indexOf(user.id) > -1;\n        const isBlocked = team.blockedFollowers && team.blockedFollowers.indexOf(user.id) > -1;\n        const hasRequestedFollow = requestSent || team.followRequests && team.followRequests.findIndex(e => e.id === user.id) > -1;\n\n        if (isYourTeam) {\n            if (skipHome) {\n                return '';\n            }\n            return (\n                <i class='fas fa-home' />\n            );\n        }\n        if (isFollowing) {\n            return (\n                <button\n                    type='button'\n                    class={`btn btn-sm btn-outline-secondary float-right`}\n                    onClick={this.unFollowTeam}\n                    disabled='true'\n                    data-team={team.id}\n                >\n                    <i class='fas fa-link mr-2' />\n                    <Text id='teams.connect.is-following'>Følger</Text> {text}\n                </button>\n            );\n        }\n        if (isBlocked) {\n            return '';\n            // return (\n            //     <button\n            //         class={`btn btn-block btn-outline-secondary float-right`}\n            //         disabled='true'\n            //     >\n            //         <i class='fas fa-hand-paper mr-2' />\n            //         <Text id='teams.connect.is-blocked'>Blokkert</Text> {text}\n            //     </button>\n            // );\n        }\n        if (hasRequestedFollow) {\n            return (\n                <button\n                    type='button'\n                    class={`btn btn-sm btn-outline-secondary float-right`}\n                    disabled='true'\n                >\n                    <i class='fas fa-hourglass-half mr-2' />\n                    <Text id='teams.connect.has-requested'>Venter på godkjenning</Text> {text}\n                </button>\n            );\n        }\n        if (team.public) {\n            return (\n                <button\n                    type='button'\n                    class={`btn btn-sm btn-outline-success float-right`}\n                    onClick={this.requestFollowTeam}\n                    data-team={team.id}\n                >\n                    <i class='far fa-hand-point-right mr-2' />\n                    <Text id='teams.connect.follow'>Følg</Text> {text}\n                </button>\n            );\n        }\n    }\n\n    render() {\n        const { team, showButton, publicUsers = [], showLocation, showMembers } = this.props;\n        const { teamStore, userStore } = this.props.stores;\n\n        const currentMonth = new Date().getMonth() + 1;\n        const currentYear = new Date().getFullYear();\n\t\tconst { month = currentMonth, year = currentYear } = this.props;\n\t\tconst seasonStart = parseInt(month < 8 ? year - 1 : year, 10);\n\n        const workoutSummary = teamStore.findWorkoutSummary(team.id, seasonStart) || {};\n        const { user } = userStore;\n        const { language = 'en' } = user;\n        const teamAmbition = userStore.findTeamAmbition({ ambition: team.ambitions, language });\n        const teamType = userStore.findTeamType({ type: team.type, language });\n\n        const teamUser = publicUsers.find(e => e.id === team.user);\n        const teamUserDisplayName = mu.displayName(teamUser);\n        const image = mu.getImage({ user: teamUser, team, priority: 'user' });\n\n        const { url = `/teams/${team.id}` } = this.props;\n\n        return (\n            <div class='w-100 mb-3'>\n                <div class='row'>\n                    <div class='col-12 col-sm-8 col-lg-6 offset-sm-2 offset-lg-3 d-flex mb-0 position-relative'>\n                        <div class='position-relative d-flex flex-grow-1'>\n                            {/* {JSON.stringify(team, null, 4)} */}\n                            <div class={`text-center border rounded-circle imageRounded`} style={image ? `background-image: url(\"${image}\"); background-size: cover;` : ''}>\n                                {!image && <i class='fas fa-users text-muted mt-3' style='font-size: 40px;' />}\n                            </div>\n                            <div class='flex-grow-1 pl-3' style='line-height: 1.2em;'>\n                                <a class='stretched-link' href={url}>\n                                    <h5 class='mb-1' style='line-height: 1.0em;'>{team.name}</h5>\n                                </a>\n                                {showLocation && <div>\n                                    {(team.place || team.country) && <span class='mr-3'>\n                                        <i class='fas fa-map-marker-alt' />  {team.place} {team.place ? `, ${team.country}` : team.country}\n                                    </span>}\n                                </div>}\n                                {showMembers && <div>\n                                    {teamUser && <span class='mr-2'>\n                                        <i class='fas fa-user' /> {teamUserDisplayName}\n                                    </span>}\n\n                                    {/* {team.members && team.members.length > 1 && team.members.slice(1, 10).map(member => {\n                                        const u = publicUsers.find(e => e.id === member);\n                                        const teamUserDisplayName = mu.displayName(u);\n                                        return (<span class='badge badge-secondary font-weight-light mr-2'>\n                                            <i class='fas fa-user' /> {teamUserDisplayName}\n                                        </span>);\n                                    })} */}\n                                </div>}\n                                <div>\n                                    {teamType && <span class='badge badge-pill badge-secondary'>{teamType}</span>}\n                                    {teamAmbition && <span class='badge badge-pill badge-secondary ml-2'>{teamAmbition}</span>}\n                                </div>\n                                <small class='text-muted'>\n                                    {team && team.dogs && <span class=''><i class='fas fa-dog' /> {team.dogs.length}</span>} \n                                    {team && team.members && <span class='ml-2'><i class='fas fa-user' /> {team.members.length}</span>}\n\n                                    {workoutSummary && workoutSummary.distanceKm > 0 && <span class='ml-2'><i class='fas fa-road' /> <Distance stores={this.props.stores} value={workoutSummary.distanceKm} /></span>}\n                                    {workoutSummary && workoutSummary.elevation > 0 && <span class='ml-2'><i class='fas fa-mountain' /> <Elevation stores={this.props.stores} value={workoutSummary.elevation} /></span>}\n                                    {workoutSummary && workoutSummary.duration > 0 && <span class='ml-2'><i class='fas fa-clock' /> {util.secToHms(workoutSummary.duration)}</span>}\n                                    {workoutSummary && workoutSummary.speedAvg > 0 && <span class='ml-2'><i class='fas fa-tachometer-alt' /> <Speed stores={this.props.stores} value={workoutSummary.speedAvg} /></span>}\n                                </small>\n                            </div>\n                        </div>\n                        {showButton && <div>\n                            {this.getButton()}\n                        </div>}\n                    </div>\n                </div>\n            </div>\n        );\n    }\n}\n\nexport default Team;\n","import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport { Text, Localizer } from 'preact-i18n';\n\nimport mu from '../../lib/musher-util';\n\nfunction meterToFeet(value) {\n    return 3.28084 * value;\n}\n\n@observer\nclass Elevation extends Component {\n    render() {\n\t\tconst { value = 0, smallUnit } = this.props;\n\t\tconst { userStore } = this.props.stores;\n\t\tconst { user } = userStore;\n\t\tconst { settings = {} } = user;\n\n        if (settings.imperial) {\n            return (<>\n                <nobr>\n                    {util.format(meterToFeet(value), 0)} {smallUnit ? <><small><small><small class='ml-0 text-muted'>ft</small></small></small></> : <>ft</>}\n                </nobr>\n            </>);\n        }\n\n\t\treturn (<>\n            <nobr>\n                {util.format(value, 0)} {smallUnit ? <><small><small><small class='ml-0 text-muted'>m</small></small></small></> : <>m</>}\n            </nobr>\n        </>);\n    }\n}\n\nexport default Elevation;\n","import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport { Text, Localizer } from 'preact-i18n';\n\nimport mu from '../../lib/musher-util';\n\nfunction kmtToMph(value) {\n    return 0.621371 * value;\n}\n\n@observer\nclass Speed extends Component {\n    render() {\n\t\tconst { value = 0, smallUnit } = this.props;\n\t\tconst { userStore } = this.props.stores;\n\t\tconst { user } = userStore;\n\t\tconst { settings = {} } = user;\n\n        if (settings.imperial) {\n            return (<>\n                <nobr>\n                    {util.format(kmtToMph(value), 1)} {smallUnit ? <><small><small><small class='ml-0 text-muted'><Text id='workouts.mph'>mph</Text></small></small></small></> : <><Text id='workouts.mph'>mph</Text></>}\n                </nobr>\n            </>);\n        }\n\n\t\treturn (<>\n            <nobr>\n                {util.format(value, 1)} {smallUnit ? <><small><small><small class='ml-0 text-muted'><Text id='workouts.kmt'>km/t</Text></small></small></small></> : <><Text id='workouts.kmt'>km/t</Text></>}\n            </nobr>\n        </>);\n    }\n}\n\nexport default Speed;\n"],"sourceRoot":""}