{"version":3,"sources":["webpack:///./components/error/index.js","webpack:///./routes/users/index.js"],"names":["Error","observer","Component","componentDidUpdate","remove","this","props","clearTimeout","removeTimer","setTimeout","componentWillUnmount","render","message","icon","class","href","onclick","className","MARGIN_TOP","mu","marginTop","MARGIN_BOTTOM","marginBottom","SUB_MENU_MARGIN_TOP","subMenuMarginTop","MARGIN_TOP_BACK","marginTopBack","Profile","constructor","super","resetEmailMessage","userStore","stores","updateField","resetEmailError","toggleSetting","async","field","user","settings","updateSetting","subscriptionCreate","paypalStore","setState","paypalLoading","getInfo","subscriptionCancel","e","id","target","closest","dataset","planId","subscriptionDetail","subscription","payPalSubscriptionId","response","setSubscriptionPaypal","data","toggleCancel","showCancel","state","toggleDetails","showDetails","back","history","goBack","time","Date","now","count","componentDidMount","verifyEmailToken","verifyEmail","token","scrolledDown","appState","darkmode","emailMessage","emailError","emailMessageIcon","emailErrorIcon","isAdmin","teams","allTeams","findTeams","util","getApiServer","getJwtToken","style","onClick","email","team","findTeam","map","name","username","firstname","lastname","cellphone","url","facebook","instagram","snapchat"],"mappings":"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","file":"route-users.chunk.0bd7b.esm.js","sourcesContent":["import { h, Component } from 'preact';\nimport { observer } from 'mobx-preact';\n\nconst ERROR_DISPLAY_MS = 10000;\n\n@observer\nclass Error extends Component {\n    componentDidUpdate() {\n        const { remove = () => {} } = this.props;\n        clearTimeout(this.removeTimer);\n        this.removeTimer = setTimeout(() => remove(), ERROR_DISPLAY_MS);\n    }\n\n    componentWillUnmount() {\n        clearTimeout(this.removeTimer);\n    }\n\n    render() {\n        const { message, icon, remove = () => {} } = this.props;\n\n        if (!message) {\n            return '';\n        }\n        return (\n            <div class='container'>\n                <div class='alert alert-danger row'>\n                    <div class={`col-12`}>\n                        <a href='#' onclick={remove} class='float-right'>\n                            <i className='fas fa-times' />\n                        </a>\n                        {icon && <h1 class='float-left mr-3'><i class={icon} /></h1>}\n                        {message && <span>{message}</span>}\n                    </div>\n                </div>\n            </div>\n        );\n    }\n}\n\nexport default Error;\n","import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport { Text, Localizer } from 'preact-i18n';\nimport { route } from 'preact-router';\n\nimport mu from '../../lib/musher-util';\nconst MARGIN_TOP = mu.marginTop(true);\nconst MARGIN_BOTTOM = mu.marginBottom();\nconst SUB_MENU_MARGIN_TOP = mu.subMenuMarginTop();\nconst MARGIN_TOP_BACK = mu.marginTopBack(true);\n\nimport Error from '../../components/error';\nimport Message from '../../components/message';\n\n@observer\nclass Profile extends Component {\n\tconstructor(props) {\n        super(props);\n        this.state = {\n            time: Date.now(),\n\t\t\tcount: 10\n        };\n    }\n\n\tresetEmailMessage = () => {\n\t\tconst { userStore } = this.props.stores;\n\t\tuserStore.updateField('emailMessage', '');\n\t\tuserStore.updateField('emailMessageIcon', '');\n\t}\n\n\tresetEmailError = () => {\n\t\tconst { userStore } = this.props.stores;\n\t\tuserStore.updateField('emailError', '');\n\t\tuserStore.updateField('emailErrorIcon', '');\n\t}\n\n\ttoggleSetting= async (field) => {\n        const { userStore } = this.props.stores;\n\t\tconst { user } = userStore;\n\t\tconst { settings = {} } = user;\n        await userStore.updateSetting({ [`settings.${field}`]: settings[field] === 1 ? 0 : 1 });\n    }\n\n\tsubscriptionCreate = async () => {\n\t\tconst { paypalStore, userStore } = this.props.stores;\n\t\tthis.setState({ paypalLoading: true });\n\t\tawait paypalStore.subscriptionCreate({});\n\t\tawait userStore.getInfo();\n\t\tthis.setState({ paypalLoading: false });\n\t}\n\n\tsubscriptionCancel = async (e) => {\n\t\tconst { id } = e.target.closest('button').dataset;\n\t\tconst { paypalStore, userStore } = this.props.stores;\n\t\tawait paypalStore.subscriptionCancel({ planId: id });\n\t\tawait userStore.getInfo();\n\t}\n\n\tsubscriptionDetail = async () => {\n\t\tconst { paypalStore, userStore } = this.props.stores;\n\t\tconst { user = {} } = userStore;\n\t\tconst { subscription } = user;\n\n\t\tif (subscription.payPalSubscriptionId) {\n\t\t\tconst response = await paypalStore.subscriptionDetail({ id: subscription.payPalSubscriptionId });\n\t\t\tuserStore.setSubscriptionPaypal(response.data);\n\t\t\tawait userStore.getInfo();\n\t\t}\n\t}\n\n\ttoggleCancel = () => {\n\t\tconst { showCancel } = this.state;\n\t\tthis.setState({\n\t\t\tshowCancel: !showCancel,\n\t\t});\n\t}\n\ttoggleDetails = () => {\n\t\tconst { showDetails } = this.state;\n\t\tif (!showDetails) {\n\t\t\tthis.subscriptionDetail();\n\t\t}\n\t\tthis.setState({\n\t\t\tshowDetails: !showDetails,\n\t\t});\n\t}\n\n\tcomponentDidMount() {\n\t\tconst { userStore } = this.props.stores;\n\n\t\tif (this.props.verifyEmailToken) {\n\t\t\tuserStore.verifyEmail({ token: this.props.verifyEmailToken });\n\t\t}\n\t}\n\n    back = () => {\n        const { history } = this.props.stores;\n        history.goBack();\n    }\n\n\trender() {\n\t\tconst { scrolledDown } = this.props;\n\t\tconst { userStore, appState } = this.props.stores;\n\t\tconst { darkmode } = appState;\n\t\tconst { user, emailMessage, emailError, emailMessageIcon, emailErrorIcon, isAdmin } = userStore;\n\t\tconst { teams, settings = {} } = user;\n\t\tconst allTeams = userStore.findTeams(teams);\n\t\tconst apiServer = util.getApiServer();\n\t\tconst jwtToken = util.getJwtToken();\n\t\treturn (\n\t\t\t<div class='container-fluid' style={`margin-bottom: ${MARGIN_BOTTOM}; margin-top: ${MARGIN_TOP};`}>\n\t\t\t\t<button class='btn btn-link pl-0 fixed-top text-primary'\n                    style={`top: ${MARGIN_TOP_BACK}; left: 5px; font-size: 35px; width: 45px;`}\n                    onClick={this.back}>\n                    <i class='fas fa-arrow-circle-left' />\n                </button>\n\t\t\t\t<div class='row fixed-top' style={`margin-top: ${scrolledDown > 0 ? 0 : SUB_MENU_MARGIN_TOP}; background-color: ${darkmode ? '#191d21' : '#f8f9fa'}; transition: all 0.3s ease-in-out;`}>\n\t\t\t\t\t<div class='col text-center border-bottom border-primary subtopmenu text-overflow'>\n\t\t\t\t\t\t<nobr><a href='/users' class='text-primary stretched-link'><i class='fas fa-user' /> <Text id='users.title'>Din profil</Text></a></nobr>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class='col text-center subtopmenu text-overflow'>\n\t\t\t\t\t\t<nobr><a href='/settings/user' class='text-secondary stretched-link'><i class='fas fa-sliders-h' /> <Text id='users.settings'>Innstillinger</Text></a></nobr>\n\t\t\t\t\t</div>\n\t\t\t\t\t{isAdmin && <div class='col text-center subtopmenu text-overflow'>\n\t\t\t\t\t\t<nobr><a href='/users/subscription' class='text-secondary stretched-link'><i class='fas fa-signature' /> <Text id='users.subscriptions'>Abonnement</Text></a></nobr>\n\t\t\t\t\t</div>}\n\t\t\t\t\t<div class='col text-center subtopmenu text-overflow'>\n\t\t\t\t\t\t<nobr><a href='/users/integrations' class='text-secondary stretched-link'><i class='fas fa-plug' /> <Text id='users.integrations'>Integrasjoner</Text></a></nobr>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\n                <div class='row mt-5'>\n\t\t\t\t\t<div class='col-12'>\n\t\t\t\t\t\t<Error message={emailError} icon={emailErrorIcon} remove={this.resetEmailError} />\n                        <Message message={emailMessage} icon={emailMessageIcon} remove={this.resetEmailMessage}  />\n\n\t\t\t\t\t\t<a href='/users/edit' class='btn btn-primary btn-sm float-right'>\n\t\t\t\t\t\t\t<Text id='users.edit'>Endre</Text>\n\t\t\t\t\t\t</a>\n\n\t\t\t\t\t\t<h5 class='ml-3'><Text id='users.title'>Din profil</Text></h5>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class='col-4 text-muted text-right'><Text id='users.email'>E-post</Text></div><div class='col-8'>{user.email}</div>\n\n\t\t\t\t\t<div class='col-4 text-muted text-right'><Text id='users.password'>Passord</Text></div><div class='col-8'>\n\t\t\t\t\t\t<a href='/users/edit-password' class='btn btn-primary btn-sm'>\n\t\t\t\t\t\t\t<Text id='users.change-password'>Endre passord</Text>\n\t\t\t\t\t\t</a>\n\t\t\t\t\t</div>\n\t\t\t\t\n\t\t\t\t\t{user.team && <><div class='col-4 text-muted text-right'><Text id='users.main-team'>Hovedteam</Text></div><div class='col-8'>{userStore.findTeam(user.team)}</div></>}\n\t\t\t\t\t{user.teams && <><div class='col-4 text-muted text-right'><Text id='users.all-teams'>Alle teamene</Text></div><div class='col-8'>{allTeams.map(team => (\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t{team.name}\n\t\t\t\t\t\t\t{/* <span class='text-muted'>\n\t\t\t\t\t\t\t\t<i class='fas fa-dog ml-3' /> {team.dogs.length}\n\t\t\t\t\t\t\t\t<i class='fas fa-users ml-3' /> {team.members.length}\n\t\t\t\t\t\t\t</span> */}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t))}</div></>}\n\t\t\t\t\t{user.username && <><div class='col-4 text-muted text-right'><Text id='users.username'>Brukernavn</Text></div><div class='col-8'>{user.username}</div></>}\n\t\t\t\t\t{user.firstname && <><div class='col-4 text-muted text-right'><Text id='users.firstname'>Fornavn</Text></div><div class='col-8'>{user.firstname}</div></>}\n\t\t\t\t\t{user.lastname && <><div class='col-4 text-muted text-right'><Text id='users.lastname'>Etternavn</Text></div><div class='col-8'>{user.lastname}</div></>}\n\t\t\t\t\t{user.cellphone && <><div class='col-4 text-muted text-right'><Text id='users.cellphone'>Mobil</Text></div><div class='col-8'>{user.cellphone}</div></>}\n\t\t\t\t\t{user.url && <><div class='col-4 text-muted text-right'><Text id='users.homepage'>Hjemmeside</Text></div><div class='col-8'>{user.url}</div></>}\n\t\t\t\t\t{user.facebook && <><div class='col-4 text-muted text-right'><Text id='users.facebook'>Facebook</Text></div><div class='col-8'>{user.facebook}</div></>}\n\t\t\t\t\t{user.instagram && <><div class='col-4 text-muted text-right'><Text id='users.instagram'>Instagram</Text></div><div class='col-8'>{user.instagram}</div></>}\n\t\t\t\t\t{user.snapchat && <><div class='col-4 text-muted text-right'><Text id='users.snapchat'>Snapchat</Text></div><div class='col-8'>{user.snapchat}</div></>}\n\t\t\t\t</div>\n\n\t\t\t\t\n\t\t\t\t<div class='row mt-5 pt-5'>\n\t\t\t\t\t<div class='col-12 text-center'>\n\t\t\t\t\t\t<a href='/logout' class='btn btn-block btn-lg btn-warning'>\n\t\t\t\t\t\t\t<i class='fas fa-sign-out-alt' /> <Text id='header.logout'>Logg ut</Text>\n\t\t\t\t\t\t</a>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nexport default Profile;\n"],"sourceRoot":""}