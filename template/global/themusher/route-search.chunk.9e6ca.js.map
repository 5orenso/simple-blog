{"version":3,"sources":["webpack:///./components/team/publicFeedLine.js","webpack:///./components/team/index.js","webpack:///./routes/search/index.js"],"names":["initialState","showAddComment","likeWorkout","idxSuggestion","idxAd","limit","offset","hasFollowSugguestions","hasAd","sessionid","Date","getTime","TeamPublicFeedLine","observer","props","toggleDate","e","stopPropagation","preventDefault","setState","showDate","state","workoutId","response","parseInt","target","closest","dataset","id","workoutStore","stores","setTimeout","status","addLikeToFeed","data","addCommentToFeed","workout","commentId","replyId","teamStore","type","addLikeToComment","addLikeToCommentReply","addCommentToWorkoutComment","addCommentToWorkout","addLikeToWorkout","toggleAddComment","inputRef","focus","shareLink","appState","shareUrl","url","title","text","containerRef","render","image","this","feed","onTeamClick","userStore","user","isAdmin","language","hasShareApi","team","findPublicTeam","teamType","findTeamAmbition","ambition","ambitions","findTeamType","s3SmallLink","images","likes","comments","hasLikedWorkout","findIndex","totalFollowers","followers","length","isYourTeam","members","indexOf","isFollowing","hasRequestedFollow","followRequests","workoutEquipment","findEquipment","equipment","workoutEquipmentIcon","field","mapImage","push","imgs","toJS","distanceKm","currentLocationGeocode","views","mu","getViews","statistics","name","class","style","public","href","uuidv4","onClick","date","util","formatDate","locale","hour12","hour","minute","formatDistance","format","dogs","track","sledWeight","temperature","formatted_address","markdown","replaceImages","markdownOpts","getMarkdownOptions","comment","elevation","duration","secToHms","speedAvg","dblClick","likeRef","buttonOnly","data-id","data-url","data-title","rel","c","inputRefObject","col","showAvatar","extraClass","callback","compact","Component","Team","currentMonth","getMonth","currentYear","getFullYear","month","year","seasonStart","workoutSummary","findWorkoutSummary","teamAmbition","submenu","hits","searchText","Search","loadAll","allData","names","idx","storyStore","search","getSearch","publicUsers","localUpdateField","publicTeams","searchResultStories","searchResultDogs","searchResultWorkouts","searchResultTeams","searchResultTracks","searchResultUsers","map","a","Math","max","reduce","partialSum","route","chooseSubmenu","parentElement","menu","componentDidMount","componentWillReceiveProps","nextProps","fields","placeholder","value","onInput","linkState","data-menu","dog","story","key"],"mappings":"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","file":"route-search.chunk.9e6ca.js","sourcesContent":["import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport { toJS } from 'mobx';\nimport { Text, Localizer } from 'preact-i18n';\nimport Markdown from 'preact-markdown';\n\nimport ImageScroller from '../imageScroller';\nimport WorkoutComments from '../workout/comments';\nimport WorkoutAddComment from '../workout/commentAdd';\n\nimport PublicTeam from '../team/public';\n\nimport LikesAndComments from '../feedback/likesAndComments';\n\nimport mu from '../../lib/musher-util';\n\nfunction displayDistance(distanceKm) {\n\tif (distanceKm < 5) {\n\t\treturn util.format(distanceKm, 2);\n\t}\n\tif (distanceKm < 10) {\n\t\treturn util.format(distanceKm, 1);\n\t}\n\treturn util.format(distanceKm, 1);\n}\n\nconst initialState = {\n\tshowAddComment: {},\n    // viewImageIdx: {},\n    likeWorkout: {},\n    idxSuggestion: 0,\n    idxAd: 4,\n    limit: 15,\n    offset: 0,\n    hasFollowSugguestions: false, \n    hasAd: false,\n    sessionid: new Date().getTime(),\n};\n\n@observer\nclass TeamPublicFeedLine extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            ...initialState,\n        };\n        this.inputRef = {};\n        this.containerRef = null;\n    }\n\n    toggleDate = (e) => {\n        e.stopPropagation();\n        e.preventDefault();\n        const { showDate } = this.state;\n        this.setState({ showDate: !showDate });\n    }\n\n\tlikeWorkout = async (e) => {\n        const workoutId = parseInt(e.target.closest('.imageContainer').dataset.id, 10);\n\t\tconst { workoutStore } = this.props.stores;\n\n        const { likeWorkout } = this.state;\n        likeWorkout[workoutId] = true;\n        this.setState({ likeWorkout });\n        setTimeout(() => {\n            const { likeWorkout } = this.state;\n            delete likeWorkout[workoutId];\n            this.setState({ likeWorkout });\n        }, 1200);\n\n\t\tconst response = await workoutStore.likeWorkout({ id: workoutId });\n        if (response && response.status === 200) {\n            this.addLikeToFeed(workoutId, response.data);\n\t\t}\n\t}\n\n    addCommentToFeed = ({ type, workout, response, commentId, replyId }) => {\n        // console.log('addCommentToFeed', { workout, response, commentId });\n        const { teamStore } = this.props.stores;\n        switch (type) {\n            case 'likeComment':\n                teamStore.addLikeToComment({ id: workout.id, data: response.data, commentId });\n                break;\n            case 'likeReply':\n                teamStore.addLikeToCommentReply({ id: workout.id, data: response.data, commentId, replyId });\n                break;\n        \n            default:\n                if (commentId) {\n                    teamStore.addCommentToWorkoutComment({ id: workout.id, data: response.data, commentId });\n                } else {\n                    teamStore.addCommentToWorkout({ id: workout.id, data: response.data });\n                }\n                break;\n        }\n    }\n\n    addLikeToFeed = (id, data) => {\n        const { teamStore } = this.props.stores;\n        teamStore.addLikeToWorkout({ id, data });\n    }\n\n\ttoggleAddComment = (e) => {\n\t\tconst workoutId = e.target.closest('button').dataset.id;\n\t\tconst { showAddComment } = this.state;\n        if (showAddComment[workoutId]) {\n            delete showAddComment[workoutId];\n        } else {\n            showAddComment[workoutId] = true;\n        }\n\t\tthis.setState({\n\t\t\tshowAddComment,\n\t\t}, () => {\n\t\t\tif (this.inputRef[workoutId]) {\n\t\t\t\tthis.inputRef[workoutId].focus();\n\t\t\t}\n\t\t});\n\t}\n\n    shareLink = (e) => {\n        const { url, title, text } = e.target.closest('button').dataset;\n        const { appState } = this.props.stores;\n        appState.shareUrl({ url, title, text });\n    }\n\n    render() {\n        const { feed, idx, onTeamClick = () => {}, onUserClick = () => {} } = this.props;\n        const { showAddComment, showDate, likeWorkout, } = this.state;\n        const { teamStore, userStore, appState } = this.props.stores;\n        const { user, isAdmin } = userStore;\n        const { language = 'no' } = user;\n        const { darkmode, hasShareApi } = appState;\n\n        const team = teamStore.findPublicTeam(feed.team) || {};\n        const teamAmbition = userStore.findTeamAmbition({ ambition: team.ambitions, language });\n        const teamType = userStore.findTeamType({ type: team.type, language });\n\n        let image;\n        if (team.image && team.image.s3SmallLink) {\n            image = team.image;\n        } else if (team.images && team.images[0] && team.images[0].s3SmallLink) {\n            image = team.images[0];\n        }\n        const { likes, comments } = feed;\n        const hasLikedWorkout = feed.likes && feed.likes.findIndex(e => e.user === user.id) > -1;\n        const totalFollowers = team && team.followers ? team.followers.length : 0;\n\n        const isYourTeam = team.members && team.members.indexOf(user.id) > -1;\n        const isFollowing = team && team.followers && team.followers.indexOf(user.id) > -1;\n        const hasRequestedFollow = team.followRequests && team.followRequests.findIndex(e => e.id === user.id) > -1;\n        const workoutEquipment = userStore.findEquipment({ equipment: feed.equipment, language });\n        const workoutEquipmentIcon = userStore.findEquipment({ equipment: feed.equipment, field: 'icon' });\n\n        const images = [];\n        if (feed.mapImage) {\n            images.push({\n                ...feed.mapImage,\n                type: 'map',\n            });\n        }\n        if (feed.images) {\n            const imgs = toJS(feed.images);\n            images.push(...imgs);\n        }\n\n        const { currentLocationGeocode = {}, yrWeather = [] } = feed;\n        const views = mu.getViews(feed.statistics);\n\n        if (!team || !team.name) {\n            return '';\n        }\n\n        return (<>\n            <div class='d-flex position-relative'>\n                <div class='text-center'>\n                    <div\n                        class={`text-center border rounded-circle imageRounded imageRoundedSmall`}\n                        style={image ? `background-image: url(\"${image.s3SmallLink}\"); background-size: cover;` : ''}>\n                        {!image && <i class='fas fa-users text-muted mt-2' style='font-size: 20px;' />}\n                    </div>\n                </div>\n                <div class='flex-grow-1 pl-3' style='line-height: 1.2em;'>\n                    <span class='badge badge-pill badge-secondary float-right'>{teamType}</span>\n                    <h5 class='mb-1' style='line-height: 1.0em;'>\n                        {team.public ? <>\n                            <a href={`/teams/public/${team.uuidv4}`} onClick={(e) => onTeamClick(e, team.uuidv4)} class='stretched-link'>{team.name}</a>\n                        </> : <>\n                            {team.name}\n                        </>}\n                    </h5>\n                    <div>\n                        {feed.date && <small class='text-muted' onClick={this.toggleDate}>\n                            {showDate ? util.formatDate(feed.date, { locale: 'no-NB', hour12: false, hour: '2-digit', minute: '2-digit' }) : util.formatDistance(feed.date, new Date(), { locale: 'no-NB' })}\n                        </small>}\n                        {feed.public === 1 ? <>\n                            <small class='ml-2 text-muted'>\n                                <i class='fas fa-globe-europe' />\n                            </small>\n                        </> : <>\n                            <small class='ml-2 text-muted'>\n                                <i class='fas fa-users' /> ({util.format(totalFollowers)})\n                            </small>\n                        </>}\n                        <small class='text-muted'>\n                            {feed.equipment > 0 && <><i class={`${workoutEquipmentIcon} ml-2`} /> {workoutEquipment}</>}\n                            {/* {feed.distanceKm > 0 && <><i class='fas fa-road ml-2' /> {displayDistance(feed.distanceKm)}km</>}\n                            {feed.elevation > 0 && <><i class='fas fa-mountain ml-2' /> {util.format(feed.elevation, 0)}m</>}\n                            {feed.speedAvg > 0 && <><i class='fas fa-tachometer-alt ml-2' /> {util.format(feed.speedAvg, 1)}km/t</>} */}\n                            {feed.dogs > 0 && <><i class='fas fa-dog ml-2' /> {feed.dogs.length}</>}\n                            {feed.track > 0 && <><i class={`fas fa-map-marked text-${feed.track > 0 ? 'success' : 'danger'} ml-2`} /></>}\n                            {/* {feed.dogsLeft > 0 && <><i class={`fas fa-crosshairs text-${feed.dogsLeft && feed.dogsRight ? 'success' : 'danger'} ml-2`} /></>} */}\n                            {feed.sledWeight > 0 && <>\n                                <i class='fas fa-sleigh ml-2' /> {util.format(feed.sledWeight, 0)} kg\n                            </>}\n                            {feed.temperature !== 0 && <>\n                                <i class='fas fa-temperature-low ml-2' /> {util.format(feed.temperature, 1)}°C\n                            </>}\n                            {/* {feed.kcalBurnedTotal && <><i class='fas fa-balance-scale' /> {util.format(feed.kcalBurnedTotal)} kcal</>}\n                            {feed.kcalMeatGramsTotal && <><i class='fas fa-drumstick-bite ml-2' /> {util.format(feed.kcalMeatGramsTotal / 1000, 1)} kg</>}\n                            {feed.kcalSalmonGramsTotal && <><i class='fas fa-fish ml-2' /> {util.format(feed.kcalSalmonGramsTotal / 1000, 1)} kg</>}\n                            {feed.kcalFatGramsTotal && <><i class='fas fa-piggy-bank ml-2' /> {util.format(feed.kcalFatGramsTotal / 1000, 1)} kg</>} */}\n                        </small>\n                        {isAdmin && currentLocationGeocode && currentLocationGeocode.formatted_address && <>\n                            <small class='ml-2 text-muted'>\n                                <i class='fas fa-map-marker-alt' /> {currentLocationGeocode.formatted_address}\n                            </small>\n                        </>}\n                    </div>\n                </div>\n            </div>\n\n            <div class='row mt-2'>\n                <div class='clearfix col-12 font-weight-bold' style='font-size: 1.2em;'>\n                    <Markdown markdown={mu.replaceImages(feed.name, feed.images, language)} markdownOpts={mu.getMarkdownOptions()} />\n                </div>\n                <div class='clearfix col-12'>\n                    <Markdown markdown={mu.replaceImages(feed.comment, feed.images, language)} markdownOpts={mu.getMarkdownOptions()} />\n                </div>\n            </div>\n\n            <div class='row mt-1'>\n                {feed.distanceKm > 0 && <div class='col-3'>\n                    <div class='text-overflow'>\n                        <small><i class='fas fa-road' /> <Text id='workout.calendar.distance'>Distanse</Text></small>\n                    </div>\n                    <div class='text-overflow font-weight-light' style='font-size: 1.2em;'>\n                        {displayDistance(feed.distanceKm)}km\n                    </div>\n                </div>}\n                {feed.elevation > 0 && <div class='col-3'>\n                    <div class='text-overflow'>\n                        <small><i class='fas fa-mountain' /> <Text id='workout.calendar.ascend'>Høydemeter</Text></small>\n                    </div>\n                    <div class='text-overflow font-weight-light' style='font-size: 1.2em;'>\n                        {util.format(feed.elevation, 0)}m\n                    </div>\n                </div>}\n                {feed.duration > 0 && <div class='col-3'>\n                    <div class='text-overflow'>\n                        <small><i class='fas fa-clock' /> <Text id='workout.calendar.duration'>Varighet</Text></small>\n                    </div>\n                    <div class='text-overflow font-weight-light' style='font-size: 1.2em;'>\n                        {util.secToHms(feed.duration, true)}\n                    </div>\n                </div>}\n                {feed.speedAvg > 0 && <div class='col-3'>\n                    <div class='text-overflow'>\n                        <small><i class='fas fa-tachometer-alt' /> <Text id='workout.calendar.avg-speed'>Snittfart</Text></small>\n                    </div>\n                    <div class='text-overflow font-weight-light' style='font-size: 1.2em;'>\n                        {util.format(feed.speedAvg, 1)}km/t\n                    </div>\n                </div>}\n            </div>\n\n            {/* <div class='row'>\n                <div class='row mb-3'>\n                    {feed.gpxInfo && feed.gpxInfo.svgMap && <>\n                        <div class='col-6 mt-auto text-center overflow-hidden'>\n                            <svg viewBox='0 0 300 300' style='width: 150px; height: 150px;'>\n                                <path d={`${feed.gpxInfo.svgMap}`} style='fill: none; stroke: #0275d8; stroke-width: 5; opacity: 0.5;' />\n                            </svg>\n                            <small class='text-muted'>Track</small>\n                        </div>\n                    </>}\n                    {feed.gpxInfo && feed.gpxInfo.svgElevation && <>\n                        <div class='col-6 mt-auto text-center overflow-hidden'>\n                            <svg viewBox='0 0 300 200' style='width: 150px; height: 100px;'>\n                                <path d={`${feed.gpxInfo.svgElevation}`} style='fill: none; stroke: #5cb85c; stroke-width: 5; opacity: 0.5;' />\n                            </svg>\n                            <small class='text-muted'>Elevation</small>\n                        </div>\n                    </>}\n                </div>\n            </div> */}\n\n            <div class='container-fluid px-0 mt-1'>\n                <div class='row'>\n                    <ImageScroller stores={this.props.stores} images={images} id={feed.id} dblClick={this.likeWorkout} likeRef={likeWorkout} />\n                </div>\n            </div>\n\n            <div class='mt-2'>\n                <LikesAndComments stores={this.props.stores} likes={likes} comments={comments} type='team' />\n            </div>\n\n            {!isYourTeam && !isFollowing && !hasRequestedFollow && <div class='clearfix mb-2'>\n                <PublicTeam stores={this.props.stores} team={team} buttonOnly={true} />\n            </div>}\n\n            <div>\n                <div class='row'>\n                    <div class='col text-center'>\n                        <button type='button' class={`imageContainer btn btn-sm btn-outline-${hasLikedWorkout ? 'primary' : 'secondary'} btn-lg btn-block ${hasLikedWorkout ? 'text-primary' : ''} text-overflow`}\n                            data-id={feed.id}\n                            onClick={this.likeWorkout}\n                            // disabled={hasLikedWorkout}\n                        >\n                            <i class={`${hasLikedWorkout ? 'text-primary fas' : 'far'} fa-thumbs-up`} /> <Text id='comments.like'>Lik</Text>\n                        </button>\n                    </div>\n                    <div class='col text-center'>\n                        <button type='button' class='btn btn-sm btn-outline-secondary btn-lg btn-block text-overflow'\n                            data-id={feed.id}\n                            onClick={this.toggleAddComment}\n                        >\n                            <i class='fas fa-comment' /> <Text id='comments.comment-add'>Kommentar</Text>\n                        </button>\n                    </div>\n                    {hasShareApi ? <>\n                        <div class='col text-center'>\n                            <button class='btn btn-sm btn-outline-secondary btn-lg btn-block text-overflow'\n                                onClick={this.shareLink}\n                                data-url={`https://themusher.app/share/workout/${feed.uuidv4}`}\n                                data-title={`title: ${feed.title}`}\n                            >\n                                <i class='fas fa-share' /> <Text id='story.share'>Del</Text>\n                            </button>\n                        </div>\n                    </> : <>\n                        <div class='col text-center'>\n                            <a class='btn btn-sm btn-outline-secondary btn-lg btn-block text-overflow'\n                                href={`https://themusher.app/share/workout/${feed.uuidv4}`}\n                                target='_blank'\n                                rel='noreferrer'\n                            >\n                                <i class='fas fa-share' /> <Text id='story.share'>Del</Text>\n                            </a>\n                        </div>\n                    </>}\n                </div>\n            </div>\n\n            {views > 0 && <div>\n                <small class='ml-2 text-muted'>\n                    {views} <Text id='story.views'>views</Text>\n                </small>\n            </div>}\n\n            <div class='mt-2'>\n                {showAddComment[feed.id] && <WorkoutAddComment\n                    stores={this.props.stores}\n                    workout={feed}\n                    inputRef={c => this.inputRef[feed.id] = c}\n                    inputRefObject={this.inputRef}\n                    col='12'\n                    offset='0'\n                    showAvatar={true}\n                    extraClass='px-0'\n                    callback={this.addCommentToFeed}\n                />}\n                <WorkoutComments\n                    stores={this.props.stores}\n                    workout={feed}\n                    col='12'\n                    offset='0'\n                    compact={false}\n                    callback={this.addCommentToFeed}\n                />\n            </div>\n        </>);\n    }\n}\n\nexport default TeamPublicFeedLine;\n","import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\n\n@observer\nclass Team extends Component {\n    render() {\n        const { team } = this.props;\n        const { teamStore, userStore } = this.props.stores;\n\n        const currentMonth = new Date().getMonth() + 1;\n        const currentYear = new Date().getFullYear();\n\t\tconst { month = currentMonth, year = currentYear } = this.props;\n\t\tconst seasonStart = parseInt(month < 8 ? year - 1 : year, 10);\n\n        const workoutSummary = teamStore.findWorkoutSummary(team.id, seasonStart) || {};\n        const { user } = userStore;\n        const { language = 'no' } = user;\n        const teamAmbition = userStore.findTeamAmbition({ ambition: team.ambitions, language });\n        const teamType = userStore.findTeamType({ type: team.type, language });\n        const image = team.image && team.image.s3SmallLink ? team.image : null;\n\n        const { url = `/teams/${team.id}` } = this.props;\n\n        return (\n            <div class='w-100 mb-3'>\n                <div class='row'>\n                    <div class='col-12 col-sm-8 col-lg-6 offset-sm-2 offset-lg-3 d-flex mb-0 position-relative'>\n                        {/* {JSON.stringify(team, null, 4)} */}\n                        <div class={`text-center border rounded-circle imageRounded`} style={image ? `background-image: url(\"${image.s3SmallLink}\");` : ''}>\n                            {!image && <i class='fas fa-users text-muted mt-3' style='font-size: 40px;' />}\n                        </div>\n                        <div class='flex-grow-1 pl-3' style='line-height: 1.2em;'>\n                            <a class='stretched-link' href={url}>\n                                <h5 class='mb-1' style='line-height: 1.0em;'>{team.name}</h5>\n                            </a>\n                            <div>\n                                {teamType && <span class='badge badge-pill badge-secondary'>{teamType}</span>}\n                                {teamAmbition && <span class='badge badge-pill badge-secondary ml-2'>{teamAmbition}</span>}\n                            </div>\n                            <small class='text-muted'>\n                                {team && team.dogs && <span class=''><i class='fas fa-dog' /> {team.dogs.length}</span>} \n                                {team && team.members && <span class='ml-2'><i class='fas fa-user' /> {team.members.length}</span>}\n\n                                {workoutSummary && workoutSummary.distanceKm > 0 && <span class='ml-2'><i class='fas fa-road' /> {util.format(workoutSummary.distanceKm, 0)}km</span>}\n                                {workoutSummary && workoutSummary.elevation > 0 && <span class='ml-2'><i class='fas fa-mountain' /> {util.format(workoutSummary.elevation, 0)}m</span>}\n                                {workoutSummary && workoutSummary.duration > 0 && <span class='ml-2'><i class='fas fa-clock' /> {util.secToHms(workoutSummary.duration)}</span>}\n                                {workoutSummary && workoutSummary.speedAvg > 0 && <span class='ml-2'><i class='fas fa-tachometer-alt' /> {util.format(workoutSummary.speedAvg, 1)}km/t</span>}\n                            </small>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        );\n    }\n}\n\nexport default Team;\n","import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport { Text, Localizer } from 'preact-i18n';\nimport linkState from 'linkstate';\n\nimport { route } from 'preact-router';\n\nimport Dog from '../../components/dog';\nimport Workout from '../../components/workout';\nimport Team from '../../components/team';\nimport Track from '../../components/track';\nimport User from '../../components/user';\nimport Story from '../../components/story/publicStory';\n\nimport TeamPublicFeedLine from '../../components/team/publicFeedLine';\n\nconst initialState = {\n\tsubmenu: 'dogs',\n\thits: 0,\n\tsearchText: '',\n};\n\n@observer\nclass Search extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            ...initialState,\n        };\n    }\n\n\tloadAll = async (props = this.props) => {\n\t\tconst { appState, storyStore, teamStore } = this.props.stores;\n\t\tconst { search } = props;\n\t    await appState.getSearch(search);\n\t\tconst { publicTeams, publicUsers } = appState;\n\t\tstoryStore.localUpdateField('publicTeams', publicTeams);\n\t\tstoryStore.localUpdateField('publicUsers', publicUsers);\n\t\tteamStore.localUpdateField('publicTeams', publicTeams);\n\t\tteamStore.localUpdateField('publicUsers', publicUsers);\n\n\t\tconst { searchResultStories, searchResultDogs, searchResultWorkouts, searchResultTeams, searchResultTracks, searchResultUsers } = appState;\n\t\tconst allData = [searchResultStories, searchResultDogs, searchResultWorkouts, searchResultTeams, searchResultTracks, searchResultUsers];\n\t\tconst names = ['stories', 'dogs', 'workouts', 'teams', 'tracks', 'users'];\n\t\tconst idx = allData\n\t\t\t.map(a => a.length)\n\t\t\t.indexOf(Math.max(...allData.map(a => a.length)));\n\t\tconst hits = allData.map(a => a.length).reduce((partialSum, a) => partialSum + a, 0);\n\t\tthis.setState({\n\t\t\tsearchText: search,\n\t\t\tsubmenu: names[idx],\n\t\t\thits,\n\t\t});\n\t}\n\n\tsearch = () => {\n\t\tconst { searchText } = this.state;\n\t\troute(`/search/${searchText}`, true);\n\t}\n\n\tchooseSubmenu = (e) => {\n\t\tconst submenu = e.target.parentElement.dataset.menu || e.target.dataset.menu;\n\t\tthis.setState({ submenu });\n\t}\n\n\tcomponentDidMount() {\n\t\tthis.loadAll();\n\t}\n\n\tcomponentWillReceiveProps(nextProps) {\n        // console.log('componentWillReceiveProps', nextProps);\n        if (nextProps.search !== this.props.search) {\n            this.loadAll(nextProps);\n        }\n    }\n\n\trender() {\n\t\tconst { appState, userStore } = this.props.stores;\n\t\tconst { search } = this.props;\n\n\t\tconst { isAdmin } = userStore;\n\t\tconst { searchResultStories, searchResultDogs, searchResultWorkouts, searchResultTeams, searchResultTracks, searchResultUsers } = appState;\n\t\tconst { submenu, hits, searchText } = this.state;\n\t\treturn (\n\t\t\t<div class='container-fluid' style='margin-bottom: 200px; margin-top: 60px;'>\n\t\t\t\t<div class='row'>\n\t\t\t\t\t<div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-0 mb-2'>\n\t\t\t\t\t\t<h1><Text id='search.title'>Search</Text></h1>\n\t\t\t\t\t\t<h5 class='my-3'><Text id='search.search-for' fields={{ search, hits }}>{hits} in your search for \"{search}\"</Text></h5>\n\n\t\t\t\t\t\t<form class='form-inline'>\n\t\t\t\t\t\t\t<Localizer>\n\t\t\t\t\t\t\t\t<input class='form-control form-control mr-2' type='search' placeholder={<Text id='header.search-placeholder'>Søk etter det meste...</Text>}\n\t\t\t\t\t\t\t\t\tvalue={searchText}\n\t\t\t\t\t\t\t\t\tonInput={linkState(this, 'searchText')}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</Localizer>\n\t\t\t\t\t\t\t<button class='btn btn-outline-success' type='button'\n\t\t\t\t\t\t\t\tonClick={this.search}\n\t\t\t\t\t\t\t><Text id='header.search'>Søk</Text></button>\n\t\t\t\t\t\t</form>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 my-3'>\n\t\t\t\t\t\t<div class='row'>\n\t\t\t\t\t\t\t<div class='col px-1 pt-2'>\n\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\tclass={`btn btn-block ${submenu === 'dogs' ? 'btn-primary' : 'btn-outline-primary'} text-nowrap`}\n\t\t\t\t\t\t\t\t\tstyle='text-overflow: ellipsis; overflow: hidden;'\n\t\t\t\t\t\t\t\t\tdata-menu='dogs'\n\t\t\t\t\t\t\t\t\tonClick={this.chooseSubmenu}\n\t\t\t\t\t\t\t\t><i class='fas fa-dog' /> <Text id='search.dogs'>Dogs</Text> ({searchResultDogs.length || 0})</button>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class='col px-1 pt-2'>\n\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\tclass={`btn btn-block ${submenu === 'workouts' ? 'btn-primary' : 'btn-outline-primary'} text-nowrap`}\n\t\t\t\t\t\t\t\t\tstyle='text-overflow: ellipsis; overflow: hidden;'\n\t\t\t\t\t\t\t\t\tdata-menu='workouts'\n\t\t\t\t\t\t\t\t\tonClick={this.chooseSubmenu}\n\t\t\t\t\t\t\t\t><i class='fas fa-running' /> <Text id='search.workouts'>Workouts</Text> ({searchResultWorkouts.length || 0})</button>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class='col px-1 pt-2'>\n\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\tclass={`btn btn-block ${submenu === 'teams' ? 'btn-primary' : 'btn-outline-primary'} text-nowrap`}\n\t\t\t\t\t\t\t\t\tstyle='text-overflow: ellipsis; overflow: hidden;'\n\t\t\t\t\t\t\t\t\tdata-menu='teams'\n\t\t\t\t\t\t\t\t\tonClick={this.chooseSubmenu}\n\t\t\t\t\t\t\t\t><i class='fas fa-users' /> <Text id='search.teams'>Teams</Text> ({searchResultTeams.length || 0})</button>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class='col px-1 pt-2'>\n\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\tclass={`btn btn-block ${submenu === 'tracks' ? 'btn-primary' : 'btn-outline-primary'} text-nowrap`}\n\t\t\t\t\t\t\t\t\tstyle='text-overflow: ellipsis; overflow: hidden;'\n\t\t\t\t\t\t\t\t\tdata-menu='tracks'\n\t\t\t\t\t\t\t\t\tonClick={this.chooseSubmenu}\n\t\t\t\t\t\t\t\t><i class='fas fa-map-marked-alt' /> <Text id='search.tracks'>Tracks</Text> ({searchResultTracks.length || 0})</button>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t{isAdmin && <div class='col px-1 pt-2'>\n\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\tclass={`btn btn-block ${submenu === 'users' ? 'btn-primary' : 'btn-outline-primary'} text-nowrap`}\n\t\t\t\t\t\t\t\t\tstyle='text-overflow: ellipsis; overflow: hidden;'\n\t\t\t\t\t\t\t\t\tdata-menu='users'\n\t\t\t\t\t\t\t\t\tonClick={this.chooseSubmenu}\n\t\t\t\t\t\t\t\t><i class='fas fa-user' /> <Text id='search.users'>Users</Text> ({searchResultUsers.length || 0})</button>\n\t\t\t\t\t\t\t</div>}\n\t\t\t\t\t\t\t<div class='col px-1 pt-2'>\n\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\tclass={`btn btn-block ${submenu === 'stories' ? 'btn-primary' : 'btn-outline-primary'} text-nowrap`}\n\t\t\t\t\t\t\t\t\tstyle='text-overflow: ellipsis; overflow: hidden;'\n\t\t\t\t\t\t\t\t\tdata-menu='stories'\n\t\t\t\t\t\t\t\t\tonClick={this.chooseSubmenu}\n\t\t\t\t\t\t\t\t><i class='fas fa-comments' /> <Text id='search.stories'>Stories</Text> ({searchResultStories.length || 0})</button>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t{submenu === 'dogs' && <>\n\t\t\t\t\t\t<div class='col-12'>\n\t\t\t\t\t\t\t{(!searchResultDogs || searchResultDogs.length === 0) && <>\n\t\t\t\t\t\t\t\t<div class='text-center text-muted'>\n\t\t\t\t\t\t\t\t\t<div class='display-1'>\n\t\t\t\t\t\t\t\t\t\t<i class='fas fa-dog' />\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<h3 class='font-weight-lighter'>\n\t\t\t\t\t\t\t\t\t\t<Text id='search.no-dogs-found'>No dogs found.</Text>\n\t\t\t\t\t\t\t\t\t</h3>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</>}\n\t\t\t\t\t\t\t{searchResultDogs && searchResultDogs.map(dog => (\n\t\t\t\t\t\t\t\t<Dog stores={this.props.stores} dog={dog} url={`/dogs/public/${dog.uuidv4}`} />\n\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</>}\n\t\t\t\t\t{submenu === 'workouts' && <>\n\t\t\t\t\t\t<div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-0 mb-2'>\n\t\t\t\t\t\t\t{(!searchResultWorkouts || searchResultWorkouts.length === 0) && <>\n\t\t\t\t\t\t\t\t<div class='text-center text-muted'>\n\t\t\t\t\t\t\t\t\t<div class='display-1'>\n\t\t\t\t\t\t\t\t\t\t<i class='fas fa-running' />\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<h3 class='font-weight-lighter'>\n\t\t\t\t\t\t\t\t\t\t<Text id='search.no-workouts-found'>No workouts found.</Text>\n\t\t\t\t\t\t\t\t\t</h3>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</>}\n\t\t\t\t\t\t\t{searchResultWorkouts && searchResultWorkouts.map((workout, idx) => (\n\t\t\t\t\t\t\t\t<TeamPublicFeedLine\n\t\t\t\t\t\t\t\t\tstores={this.props.stores}\n\t\t\t\t\t\t\t\t\tfeed={workout}\n\t\t\t\t\t\t\t\t\tidx={idx}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</>}\n\t\t\t\t\t{submenu === 'teams' && <>\n\t\t\t\t\t\t<div class='col-12'>\n\t\t\t\t\t\t\t{(!searchResultTeams || searchResultTeams.length === 0) && <>\n\t\t\t\t\t\t\t\t<div class='text-center text-muted'>\n\t\t\t\t\t\t\t\t\t<div class='display-1'>\n\t\t\t\t\t\t\t\t\t\t<i class='fas fa-users' />\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<h3 class='font-weight-lighter'>\n\t\t\t\t\t\t\t\t\t\t<Text id='search.no-teams-found'>No teams found.</Text>\n\t\t\t\t\t\t\t\t\t</h3>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</>}\n\t\t\t\t\t\t\t{searchResultTeams && searchResultTeams.map(team => (\n\t\t\t\t\t\t\t\t<Team stores={this.props.stores} team={team} url={`/teams/public/${team.uuidv4}`} />\n\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</>}\n\t\t\t\t\t{submenu === 'tracks' && <>\n\t\t\t\t\t\t<div class='col-12'>\n\t\t\t\t\t\t\t{(!searchResultTracks || searchResultTracks.length === 0) && <>\n\t\t\t\t\t\t\t\t<div class='text-center text-muted'>\n\t\t\t\t\t\t\t\t\t<div class='display-1'>\n\t\t\t\t\t\t\t\t\t\t<i class='fas fa-map-marked-alt' />\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<h3 class='font-weight-lighter'>\n\t\t\t\t\t\t\t\t\t\t<Text id='search.no-tracks-found'>No tracks found.</Text>\n\t\t\t\t\t\t\t\t\t</h3>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</>}\n\t\t\t\t\t\t\t{searchResultTracks && searchResultTracks.map(track => (\n\t\t\t\t\t\t\t\t<Track stores={this.props.stores} track={track} />\n\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</>}\n\t\t\t\t\t{submenu === 'users' && <>\n\t\t\t\t\t\t<div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-0 mb-2'>\n\t\t\t\t\t\t\t{(!searchResultUsers || searchResultUsers.length === 0) && <>\n\t\t\t\t\t\t\t\t<div class='text-center text-muted'>\n\t\t\t\t\t\t\t\t\t<div class='display-1'>\n\t\t\t\t\t\t\t\t\t\t<i class='fas fa-user' />\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<h3 class='font-weight-lighter'>\n\t\t\t\t\t\t\t\t\t\t<Text id='search.no-users-found'>No users found.</Text>\n\t\t\t\t\t\t\t\t\t</h3>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</>}\n\t\t\t\t\t\t\t{searchResultUsers && searchResultUsers.map(user => (\n\t\t\t\t\t\t\t\t<User stores={this.props.stores} user={user} />\n\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</>}\n\t\t\t\t\t{submenu === 'stories' && <>\n\t\t\t\t\t\t<div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-0 mb-2'>\n\t\t\t\t\t\t\t{(!searchResultStories || searchResultStories.length === 0) && <>\n\t\t\t\t\t\t\t\t<div class='text-center text-muted'>\n\t\t\t\t\t\t\t\t\t<div class='display-1'>\n\t\t\t\t\t\t\t\t\t\t<i class='fas fa-comments' />\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<h3 class='font-weight-lighter'>\n\t\t\t\t\t\t\t\t\t\t<Text id='search.no-stories-found'>No stories found.</Text>\n\t\t\t\t\t\t\t\t\t</h3>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</>}\n\t\t\t\t\t\t\t{searchResultStories && searchResultStories.map(story => (\n\t\t\t\t\t\t\t\t<Story\n\t\t\t\t\t\t\t\t\tstores={this.props.stores}\n\t\t\t\t\t\t\t\t\tstory={story}\n\t\t\t\t\t\t\t\t\tkey={`story-detail-${story.id}`}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</>}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nexport default Search;\n"],"sourceRoot":""}