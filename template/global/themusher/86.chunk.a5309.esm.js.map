{"version":3,"sources":["webpack:///./routes/teams/public.js","webpack:///./components/header/subnavigation.js","webpack:///./components/user/invite.js","webpack:///./components/team/connect-confirm.js"],"names":["MARGIN_TOP","mu","marginTop","MARGIN_BOTTOM","marginTopBack","marginBottom","initialState","requestSent","submenu","TeamsDetail","observer","Component","constructor","props","super","back","history","this","stores","goBack","chooseSubmenu","e","setState","target","parentElement","dataset","menu","state","updateTimer","loadPublicTeams","teamStore","loadPublic","componentDidMount","loadAll","componentWillReceiveProps","nextProps","dog","render","userStore","user","language","publicTeamsToFollow","waitingForApproval","filter","followRequests","findIndex","f","id","following","followers","indexOf","notFollowing","members","t","class","style","title","backtext","data-menu","onClick","util","isArray","length","forceShow","map","team","SUB_MENU_MARGIN_TOP","subMenuMarginTop","SubNavigation","appState","previousPath","route","darkmode","Invite","inviteKennel","async","friendEmail","email","response","inviteSent","inviteNew","hideInvite","updateSetting","settings","type","for","placeholder","onInput","linkState","confirmed","deleted","Teams","confirmRequest","follow","closest","confirmFollowRequest","parseInt","followRequestUser","deleteRequest","deleteFollowRequest","load","query","addData","loadTeams","teams","hasFollowRequests","reqUser","image","s3SmallLink","isDeleted","isConfirmed","publicTeam","find","displayNameShort","displayName","data-team","data-user","public","data-follow"],"mappings":"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","file":"86.chunk.a5309.esm.js","sourcesContent":["import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport { route } from 'preact-router';\nimport { Text, Localizer } from 'preact-i18n';\nimport Markdown from 'preact-markdown';\n\nimport PubSub, { topics } from '../../lib/pubsub';\nimport mu from '../../lib/musher-util';\nconst MARGIN_TOP = mu.marginTop(true);\nconst MARGIN_TOP_BACK = mu.marginTopBack(false);\nconst MARGIN_BOTTOM = mu.marginBottom();\n\nimport DogSimplePublic from '../../components/dog/simplePublic';\nimport PublicTeam from '../../components/team/public';\nimport TeamConnectConfirm from '../../components/team/connect-confirm';\nimport TeamLine from '../../components/team/publicLine';\nimport SubNavigation from '../../components/header/subnavigation';\nimport UserInvite from '../../components/user/invite';\n\nconst initialState = {\n\trequestSent: {},\n    submenu: 'notfollowing',\n};\n\n@observer\nclass TeamsDetail extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            ...initialState,\n        };\n        this.updateTimer = {};\n    }\n\n    async loadAll(props = this.props) {\n        await this.loadPublicTeams(props);\n    }\n\n    async loadPublicTeams(props = this.props) {\n\t\tconst { teamStore } = props.stores;\n        const { teamid } = props;\n        await teamStore.loadPublic({});\n    }\n\n    back = () => {\n        const { history } = this.props.stores;\n        history.goBack();\n    }\n\n    chooseSubmenu = (e) => {\n\t\tconst submenu = e.target.parentElement.dataset.menu || e.target.dataset.menu;\n\t\tthis.setState({ submenu });\n\t}\n\n\tcomponentDidMount() {\n        this.loadAll();\n    }\n\n    componentWillReceiveProps(nextProps) {\n        // console.log('componentWillReceiveProps', nextProps);\n        if (nextProps.dog !== this.props.dog) {\n            this.loadAll(nextProps);\n        }\n    }\n\n\trender() {\n        const { submenu } = this.state;\n\t\tconst { teamStore, userStore, storyStore } = this.props.stores;\n        const { user } = userStore;\n        const { language = 'en' } = user;\n\t\tconst { publicTeamsToFollow } = teamStore;\n\n        const waitingForApproval = publicTeamsToFollow.filter(e => e.followRequests && e.followRequests.findIndex(f => f.id === user.id) > -1);\n        const following = publicTeamsToFollow.filter(e => e.followers && e.followers.indexOf(user.id) > -1);\n        const notFollowing = publicTeamsToFollow.filter(e => {\n            const isYourTeam = e.members && e.members.findIndex(t => t.id === user.id) > -1;\n            if (isYourTeam) {\n                return false;\n            }\n            if (waitingForApproval.findIndex(t => t.id === e.id) > -1) {\n                return false;\n            }\n            if (following.findIndex(t => t.id === e.id) > -1) {\n                return false;\n            }\n            return true;            \n        });            \n\t\treturn (<>\n\t\t\t<div class='container-fluid' style={`margin-bottom: ${MARGIN_BOTTOM}; margin-top: ${MARGIN_TOP};`}>\n                <Localizer>\n                    <SubNavigation stores={this.props.stores}\n                        title={<Text id='home.find-teams'>Find teams to follow</Text>}\n                        backtext={<Text id='home.back'>Back</Text>}\n                    />\n                </Localizer>\n    \n                <div class='row mt-4'>\n                    <div class={`col-12`}>\n                        <TeamConnectConfirm stores={this.props.stores} />\n                    </div>\n                </div>\n\n                <div class='row'>\n                    <div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 my-3'>\n\t\t\t\t\t\t<div class='row'>\n\t\t\t\t\t\t\t<div class='col px-1 pt-2'>\n                                <button\n                                    class={`btn btn-block ${submenu === 'notfollowing' ? 'btn-primary' : 'btn-outline-primary'} text-nowrap`}\n                                    style='text-overflow: ellipsis; overflow: hidden;'\n                                    data-menu='notfollowing'\n                                    onClick={this.chooseSubmenu}\n                                ><i class='fas fa-tachometer-alt' /> <Text id='teams.notfollowing'>Not following</Text></button>\n                            </div>\n\t\t\t\t\t\t\t<div class='col px-1 pt-2'>\n                                <button\n                                    class={`btn btn-block ${submenu === 'waiting' ? 'btn-primary' : 'btn-outline-primary'} text-nowrap`}\n                                    style='text-overflow: ellipsis; overflow: hidden;'\n                                    data-menu='waiting'\n                                    onClick={this.chooseSubmenu}\n                                ><i class='fas fa-chalkboard-teacher' /> <Text id='teams.waiting-approval'>Waiting for approval</Text></button>\n                            </div>\n\t\t\t\t\t\t\t<div class='col px-1 pt-2'>\n                                <button\n                                    class={`btn btn-block ${submenu === 'following' ? 'btn-primary' : 'btn-outline-primary'} text-nowrap`}\n                                    style='text-overflow: ellipsis; overflow: hidden;'\n                                    data-menu='following'\n                                    onClick={this.chooseSubmenu}\n                                ><i class='fas fa-chalkboard-teacher' /> <Text id='teams.following'>Following</Text></button>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n\n                <div class='row mt-4'>\n                    <div class={`col-12 col-sm-8 col-lg-6 offset-sm-2 offset-lg-3 mb-0 position-relative`}>\n                        <div class='row'>\n                            {submenu === 'notfollowing' && <>\n                                {(!util.isArray(notFollowing) || notFollowing.length === 0) && <>\n                                    <div class='col-12 text-center text-muted mb-5'>\n                                        <div class='display-1'>\n                                            <i class='fas fa-search' />\n                                        </div>\n                                        <h3 class='font-weight-lighter'>\n                                            <Text id='teams.no-more-teams-to-follow'>No more teams to follow.</Text>\n                                        </h3>\n                                    </div>\n                                    <UserInvite stores={this.props.stores} forceShow={true} />\n                                </>}\n                                {util.isArray(notFollowing) && notFollowing.map(team => <TeamLine stores={this.props.stores} team={team} />)}\n                            </>}\n                            {submenu === 'waiting' && <>\n                                {(!util.isArray(waitingForApproval) || waitingForApproval.length === 0) && <>\n                                    <div class='col-12 text-center text-muted mb-5'>\n                                        <div class='display-1'>\n                                            <i class='fas fa-check' />\n                                        </div>\n                                        <h3 class='font-weight-lighter'>\n                                            <Text id='teams.no-pending-follow-requests'>No pending follow requests.</Text>\n                                        </h3>\n                                    </div>\n                                </>}\n                                <UserInvite stores={this.props.stores} forceShow={true} />\n                                {util.isArray(waitingForApproval) && waitingForApproval.map(team => <TeamLine stores={this.props.stores} team={team} />)}\n                            </>}\n                            {submenu === 'following' && <>\n                                {(!util.isArray(following) || following.length === 0) && <>\n                                    <div class='col-12 text-center text-muted mb-5'>\n                                        <div class='display-1'>\n                                            <i class='fas fa-check' />\n                                        </div>\n                                        <h3 class='font-weight-lighter'>\n                                            <Text id='teams.not-following-any-teams'>You are not following any teams.</Text>\n                                        </h3>\n                                    </div>\n                                </>}\n                                <UserInvite stores={this.props.stores} forceShow={true} />\n                                {util.isArray(following) && following.map(team => <TeamLine stores={this.props.stores} team={team} />)}\n                            </>}\n                        </div>\n                    </div>\n                </div>\n\n                <div class='row mt-4'>\n                    <div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3'>\n                        <div class='text-center text-muted'>\n                            <div class='display-1'>\n                                <i class='fas fa-ellipsis-h' />\n                            </div>\n                            <div style='line-height: 0.9em;'>\n                                <small>\n                                    <Text id='teams.something-missing'>Er det noe du savner på denne siden? Send oss en melding på Facebook.</Text>\n                                </small>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n\n            </div>\n\n\n\t\t</>);\n\t}\n}\n\nexport default TeamsDetail;\n","import { h, Component } from 'preact';\nimport { Link } from 'preact-router/match';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport linkState from 'linkstate';\nimport { route } from 'preact-router';\nimport { Text, Localizer } from 'preact-i18n';\n\nimport mu from '../../lib/musher-util';\n\nconst SUB_MENU_MARGIN_TOP = mu.subMenuMarginTop();\n\nconst initialState = {\n};\n\n@observer\nclass SubNavigation extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            ...initialState,\n        };\n    }\n\n    back = () => {\n        const { appState } = this.props.stores;\n        const { previousPath = '/' } = appState;\n        route(previousPath);\n    }\n\n    render() {\n        const { title, backtext } = this.props;\n        const { appState } = this.props.stores;\n        const { darkmode } = appState;\n\t\treturn (\n            <div class='row fixed-top border-bottom' style={`margin-top: ${SUB_MENU_MARGIN_TOP}; background-color: ${darkmode ? '#191d21' : '#f8f9fa'};`}>\n                <div class={`col text-center subtopmenu position-relative`}>\n                    <div class={`text-left subtopmenu position-absolute`} style='top: 0px; left: 20px; line-height: 1.8em;'>\n                        <button\n                            class='btn btn-link text-secondary p-0'\n                            onClick={this.back}\n                        >\n                            <nobr>\n                                <i class='fas fa-chevron-left font-weight-bold' /> {backtext ? <>\n                                    {backtext}\n                                </> : <>\n                                    <Text id='home.home'>Home</Text>\n                                </>}\n                            </nobr>\n                        </button>\n                    </div>\n                    <nobr>\n                        <strong>\n                            {title}\n                        </strong>\n                    </nobr>\n                </div>\n            </div>\n\t\t);\n\t}\n}\n\nexport default SubNavigation;\n","import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport { Text, Localizer } from 'preact-i18n';\nimport linkState from 'linkstate';\n\n@observer\nclass Invite extends Component {\n    inviteKennel = async () => {\n        const { friendEmail: email } = this.state;\n\t\tconst { userStore } = this.props.stores;\n        const response = await userStore.inviteKennel({ email });\n        this.setState({\n            response,\n            inviteSent: true,\n        });\n    }\n\n    inviteNew = () => {\n        this.setState({\n            inviteSent: false,\n        });\n    }\n\n    hideInvite = async () => {\n        const { userStore } = this.props.stores;\n        await userStore.updateSetting({ 'settings.hideInvite': 1 });\n        this.setState({\n            hideInvite: true,\n        });\n    }\n\n    render() {\n        const { inviteSent, hideInvite } = this.state;\n\t\tconst { userStore } = this.props.stores;\n        const { forceShow } = this.props;\n        const { user } = userStore;\n        const { settings = {} } = user;\n        if (!forceShow && settings.hideInvite || hideInvite) {\n            return '';\n        }\n        if (inviteSent) {\n            return (\n                <div class='col-12'>\n                    <Text id='users.invite.thanks'>Takk for at du hjelper oss til å bli flere 😃</Text>\n                    <button type='button' class='btn btn-sm btn-link mb-2' onClick={this.inviteNew}>\n                        <Text id='users.invite.more'>Invitere flere</Text>\n                    </button>\n                </div>\n            );\n        }\n        return (\n            <div class='col-12 pb-4 clearfix'>\n                <h5><Text id='users.invite.title'>Inviter ny kennel til The Musher</Text></h5>\n                <p>\n                    <Text id='users.invite.text'>Jeg håper du vil hjelpe oss til å bli flere. Appen vil bli lansert veldig snart og det er påtide å invitere inn flere brukere.</Text>\n                </p>\n                <div>\n                    <div class='form-row align-items-center'>\n                        <div class='col-auto'>\n                            <label class='sr-only' for='inlineFormInput'><Text id='users.invite.email'>E-post</Text></label>\n                            <Localizer>\n                                <input type='text' class='form-control form-control-sm mb-2' id='inlineFormInput'\n                                    placeholder={<Text id='users.invite.email-placeholder'>E-post til ny kennel</Text>}\n                                    onInput={linkState(this, 'friendEmail')}\n                                />\n                            </Localizer>\n                        </div>\n                        <div class='col-auto'>\n                            <button type='button' class='btn btn-sm btn-primary mb-2' onClick={this.inviteKennel}>\n                                <Text id='users.invite.send'>Send invitasjon</Text>\n                            </button>\n                        </div>\n                    </div>\n                </div>\n                {!forceShow && <button type='button' class='btn btn-sm btn-link mb-2 float-left' onClick={this.hideInvite}>\n                    <i class='fas fa-eye-slash' /> <Text id='users.invite.hide'>Skjul</Text>\n                </button>}\n            </div>\n        );\n    }\n}\n\nexport default Invite;\n","import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport { Text, Localizer } from 'preact-i18n';\n\nimport mu from '../../lib/musher-util';\n\nimport PublicTeam from '../../components/team/public';\n\nconst initialState = {\n\tconfirmed: {},\n\tdeleted: {},\n};\n\n@observer\nclass Teams extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            ...initialState,\n        };\n    }\n\n    async loadTeams() {\n        const { teamStore } = this.props.stores;\n        await teamStore.load({ query: {}, addData: ['followRequests'] });\n    }\n\n    confirmRequest = (e) => {\n        const { team, user, follow } = e.target.closest('button').dataset;\n        const { teamStore } = this.props.stores;\n        teamStore.confirmFollowRequest({\n            team: parseInt(team, 10),\n            user: parseInt(user, 10),\n        });\n        const { confirmed } = this.state;\n\t\tconfirmed[`${team}-${user}`] = true;\n        this.setState({ confirmed });\n\n        if (follow) {\n            teamStore.followRequestUser(user);\n        }\n    }\n\n    deleteRequest = (e) => {\n        const { team, user } = e.target.closest('button').dataset;\n        const { teamStore } = this.props.stores;\n        teamStore.deleteFollowRequest({\n            team: parseInt(team, 10),\n            user: parseInt(user, 10),\n        });\n        const { deleted } = this.state;\n\t\tdeleted[`${team}-${user}`] = true;\n        this.setState({ deleted });\n    }\n\n\tcomponentDidMount() {\n\t\tthis.loadTeams();\n\t}\n\n\trender() {\n        const { deleted = {}, confirmed = {} } = this.state;\n\t\tconst { teamStore, appState } = this.props.stores;\n\t\tconst { teams, hasFollowRequests, followRequests = [] } = teamStore;\n        const { darkmode } = appState;\n\t\tif (!hasFollowRequests) {\n\t\t\treturn '';\n\t\t}\n\n\t\treturn (\n            <div class='row pb-1'>\n                <div class={`col-12 col-sm-8 col-lg-6 offset-sm-2 offset-lg-3 mb-0 position-relative rounded rounded-lg py-3 bg-${darkmode ? 'black' : 'white'} shadow-sm`}>\n                    <div class='container-fluid'>\n                        <div class='row'>\n                            <div class='col-12'>\n                                <h5><Text id='teams.connect.teams-follow-requests'>Forespørsel om å følge</Text>:</h5>\n                            </div>\n                        </div>\n\t\t\t\t\t\t<div class='row'>\n                            <div class='d-flex flex-row flex-nowrap' style='overflow: auto;'>\n                                {util.isArray(teams) && teams.map((team) => <>\n                                    {team && util.isArray(team.followRequests) && team.followRequests.map((reqUser) => {\n                                        const image = reqUser.image && reqUser.image.s3SmallLink ? reqUser.image : null;\n                                        const isDeleted = deleted[`${team.id}-${reqUser.id}`];\n                                        const isConfirmed = confirmed[`${team.id}-${reqUser.id}`];\n                                        const publicTeam = followRequests.find(e => e.user.id === reqUser.id);\n                                        return (\n                                            <div class='mr-2 py-2 border rounded-lg' style='width: 150px;'>\n                                                <div class={`text-center border rounded-circle imageRounded imageRoundedSmall mx-auto`} style={image ? `background-image: url(\"${image.s3SmallLink}\");` : ''}>\n                                                    {!image && <div class='text-muted font-weight-lighter' style='font-size: 20px; padding-top: 5px;'>{mu.displayNameShort(reqUser)}</div>}\n                                                </div>\n                                                <small>\n                                                    <div class='text-overflow text-center'>\n                                                        <strong>{mu.displayName(reqUser)}</strong><br />\n                                                        {/* {publicTeam && publicTeam.public > 0 ? <>\n                                                            <a href={`/teams/public/${publicTeam.uuidv4}`}>{publicTeam.name}</a>\n                                                        </> : <>\n                                                            {publicTeam ? <>{publicTeam.name}</> : ''}<br />\n                                                            <span class='text-muted'>(<Text id='teams.not-public'>Not public</Text>)</span>\n                                                        </>} */}\n                                                    </div>\n                                                    <div class='text-overflow text-center'>\n                                                        <Text id='teams.connect.wants-to-follow'>wants to follow your team:</Text>\n                                                    </div>\n                                                    <div class='text-overflow text-center'>\n                                                        <strong>{mu.displayName(team)}</strong>\n                                                    </div>\n                                                </small>\n                                                {(isConfirmed || isDeleted) ? <>\n                                                    <div class='text-center'>\n                                                        {isConfirmed ? <div class='text-success'>\n                                                            <Text id='teams.connect.confirmed'>Confirmed</Text> <i class='fas fa-check' />\n                                                        </div> : <div class='text-danger'>\n                                                            <Text id='teams.connect.deleted'>Deleted</Text> <i class='fas fa-trash-alt' />\n                                                        </div>}\n                                                    </div>\n                                                </> : <>                                    \n                                                    <div>\n                                                        <button class='btn btn-sm btn-block btn-success text-overflow mt-1' onClick={this.confirmRequest} data-team={team.id} data-user={reqUser.id}>\n                                                            <Text id='teams.connect.confirm'>Confirm</Text>\n                                                        </button>\n                                                        {publicTeam && publicTeam.public > 0 && <button class='btn btn-sm btn-block btn-outline-success text-overflow mt-1' onClick={this.confirmRequest} data-team={team.id} data-user={reqUser.id} data-follow={true}>\n                                                            <Text id='teams.connect.confirm-and-follow'>Confirm & follow back</Text>\n                                                        </button>}\n                                                        <div class='mt-3'>\n                                                            <small>\n                                                                <button class='btn btn-sm btn-block btn-link text-overflow' style='font-size: 1.0em;' onClick={this.deleteRequest} data-team={team.id} data-user={reqUser.id}>\n                                                                    <Text id='teams.connect.delete'>Del</Text>\n                                                                </button>\n                                                            </small>\n                                                        </div>\n                                                    </div>\n                                                </>}\n                                            </div>\n                                        );\n                                    })}\n                                </>)}\n                            </div>\n                        </div>\n                        <details class='mt-3'>\n                            <summary><small><Text id='teams.connect.how-summary'>How does this work?</Text></small></summary>\n                            <p>\n                                <Text id='teams.connect.how-text'>What can followers see when I grant them access to follow? The answer is very little. They can see main details of the workouts you share and name of the dogs. That's all. Try to follow a team and check out the workout tab.</Text>\n                            </p>\n                        </details>\n                    </div>\n                </div>\n            </div>\n\t\t);\n\t}\n}\n\nexport default Teams;\n"],"sourceRoot":""}