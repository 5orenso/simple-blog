(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{B7Gj:function(t,e,r){"use strict";function o(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,o)}return r}function n(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}r.r(e);var s,a=r("hosL"),c=r("Utv1"),l=r("/eY4"),i=r("OhSV"),h=r("ZOvn"),u=r.n(h),b=r("JWe/"),d=(r("3pQw"),r("WAWY")),p=r("azdc"),m=r("3UPq"),f=r("pJjI"),O=u.a.marginTop(!0),j=u.a.marginBottom(),g=u.a.subMenuMarginTop(),y={isLoading:!1},k=Object(l.a)(s=function(t){function e(e){var r;return(r=t.call(this,e)||this).loadWorkouts=function(t){return new Promise((function(e,o){var n,s;return void 0===t&&(t=r.props),r.setState({isLoading:!0}),s=(n=t.stores).userStore,n.workoutStore.currentTeam,Promise.resolve(r.loadWorkoutSummary(t)).then((function(){try{return Promise.resolve(r.loadWorkoutPlans(t)).then((function(){try{return Promise.resolve(s.getNotifications()).then((function(){try{return r.setState({isLoading:!1}),e()}catch(t){return o(t)}}),o)}catch(t){return o(t)}}),o)}catch(t){return o(t)}}),o)}))},r.loadWorkoutPlans=function(t){return new Promise((function(e,o){function n(){return r.setState({isLoading:!1}),e()}var s,a,l,i,h,u,b,d;return void 0===t&&(t=r.props),r.setState({isLoading:!0}),s=t.year,a=(new Date).getMonth()+1,l=c.a.getYear(),i=parseInt(s||(a<6?l-1:l),10),b=(h=t.stores).workoutStore.currentTeam,(u=h.workoutPlanStore).updateItem("workoutPlans",[]),u.updateItem("workoutPlan",{}),u.resetGraphPlanWeekDistanceCurrent(),b?Promise.resolve(u.load({query:{team:b,seasonYear:i,seasonMonth:6}})).then(function(){try{if((d=u.workoutPlans[0]||{}).id)return Promise.resolve(u.load(d.id)).then(function(){try{return u.prepareWeekGraphs({year:s}),t.call(this)}catch(t){return o(t)}}.bind(this),o);function t(){return n.call(this)}return t.call(this)}catch(t){return o(t)}}.bind(this),o):n.call(this)}))},r.state=function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?o(Object(r),!0).forEach((function(e){n(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({},y),r}var r,s;s=t,(r=e).prototype=Object.create(s.prototype),r.prototype.constructor=r,r.__proto__=s;var l=e.prototype;return l.loadWorkoutSummary=function(t){return new Promise(function(e,r){var o;return void 0===t&&(t=this.props),o=t.stores,Promise.resolve(o.userStore.getWorkoutSummary({team:o.workoutStore.currentTeam,year:t.year})).then((function(){try{return e()}catch(t){return r(t)}}),r)}.bind(this))},l.componentDidMount=function(){this.loadWorkouts()},l.componentWillReceiveProps=function(t){t.month===this.props.month&&t.year===this.props.year&&t.team===this.props.team||this.loadWorkouts(t)},l.render=function(){var t=this,e=this.state.isLoading,r=this.props.stores,o=r.workoutStore,n=r.workoutPlanStore,s=n.workoutPlan,c=n.workoutPlans,l=this.props,h=l.month,u=l.year,y=o.currentTeam,k=r.appState.darkmode,w=o.getLatests();return Object(a.h)("div",{class:"container-fluid",style:"margin-bottom: "+j+"; margin-top: "+O+";"},Object(a.h)("div",{class:"row mb-4 fixed-top",style:"margin-top: "+g+"; background-color: "+(k?"#191d21":"#f8f9fa")+";"},Object(a.h)("div",{class:"col text-center border-bottom border-primary"},Object(a.h)("a",{href:"/workouts/",class:"text-primary stretched-link"},Object(a.h)("i",{class:"fas fa-chart-line"})," ",Object(a.h)(i.c,{id:"workout.index.dashboard"},"Oversikt"))),Object(a.h)("div",{class:"col text-center"},Object(a.h)("a",{href:"/workouts/list",class:"text-secondary stretched-link"},Object(a.h)("i",{class:"fas fa-list"})," ",Object(a.h)(i.c,{id:"workout.index.list"},"Liste"))),Object(a.h)("div",{class:"col text-center"},Object(a.h)("a",{href:"/workouts/plan",class:"text-secondary stretched-link"},Object(a.h)("i",{class:"fas fa-calendar-alt"})," ",Object(a.h)(i.c,{id:"workout.index.plan"},"Plan")))),Object(a.h)("div",{class:"row"},Object(a.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 border-bottom"},Object(a.h)(f.a,{stores:this.props.stores,callback:this.loadWorkouts,key:"teams-"+y})),Object(a.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-2 mb-2"},Object(a.h)("a",{class:"btn btn-primary btn-sm float-right",href:"/workouts/edit/new"},Object(a.h)("i",{class:"fas fa-plus"})," ",Object(a.h)(i.c,{id:"workout.index.add-workout"},"Legg til treningstur"))),Object(a.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3"},Object(a.h)(p.a,{stores:this.props.stores,isLoading:e,year:u,key:"table-"+s.id+"-"+c.length}),Object(a.h)(d.a,{stores:this.props.stores,isLoading:e,year:u,key:"graph-"+s.id+"-"+c.length})),Object(a.h)(m.a,{stores:this.props.stores,team:y,basehref:"/workouts/",month:h,year:u,key:"calendar-"+s.id+"-"+c.length})),Object(a.h)("div",{class:"row"},w&&w.length>0&&Object(a.h)("div",{class:"col-12 mb-4"},Object(a.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 px-0 mt-4"},Object(a.h)("h5",null,Object(a.h)(i.c,{id:"workout.index.last-workouts",fields:{total:w.length}},"Nyeste treningsturer - ",w.length," stk"))),w&&w.map((function(e){return Object(a.h)(b.a,{stores:t.props.stores,workout:e})})))),!1)},e}(a.Component))||s;e.default=k},azdc:function(t,e,r){"use strict";(function(t){var o,n=r("hosL"),s=r("Utv1"),a=r("/eY4"),c=r("OhSV"),l=r("ZOvn"),i=r.n(l),h=Object(c.d)((function(){return{week:Object(n.h)(c.c,{id:"workout.graph.week"}),distance:Object(n.h)(c.c,{id:"workout.graph.distance"}),ascend:Object(n.h)(c.c,{id:"workout.graph.ascend"}),plan:Object(n.h)(c.c,{id:"workout.graph.plan"})}}))(o=Object(a.a)(o=function(e){function r(){return e.apply(this,arguments)||this}var o,a;return a=e,(o=r).prototype=Object.create(a.prototype),o.prototype.constructor=o,o.__proto__=a,r.prototype.render=function(){for(var e=this.props.stores.userStore,r=this.props,o=r.year,a=e.user.language,l=i.a.getMonths(void 0===a?"no":a),h=(new Date).getMonth()+1,u=s.a.getYear(),b=parseInt(o||(h<6?u-1:u),10),d=s.a.monthRange(b+"-06-01",b+1+"-05-31"),p=s.a.monthRange(b-1+"-06-01",b+"-05-31"),m=s.a.weekRange(b+"-06-01",b+1+"-05-31").map((function(t){return t.week})),f=Math.floor(m.length/(m.length%6)),O=[],j=0,g=m.length;j<g;j+=f)O.push(m[j]);return Object(n.h)(t,null,Object(n.h)("h5",null,Object(n.h)(c.c,{id:"workout.graph.title"},"Treningsstatistikk")," ",b," - ",b+1),Object(n.h)("div",{class:"w-100 mt-3 mb-4"},Object(n.h)("small",{class:"mb-4"},Object(n.h)("small",null,Object(n.h)("table",{class:"table table-sm font-weigth-lighter border-bottom"},Object(n.h)("thead",null,Object(n.h)("tr",null,Object(n.h)("th",{style:"padding: .15rem;"},Object(n.h)(c.c,{id:"workout.graph.season"},"Sesong")),d.map((function(t){return Object(n.h)("th",{class:"text-right",style:"padding: .15rem;"},Object(n.h)("a",{href:"/workouts/month/"+t.month+"/"+t.year},l[t.month-1]))})))),Object(n.h)("tbody",null,Object(n.h)("tr",null,Object(n.h)("th",{scope:"row",style:"padding: .15rem;"},b-1," - ",b),p.map((function(r){return Object(n.h)(t,null,Object(n.h)("td",{class:"text-right",style:"padding: .15rem;"},Object(n.h)("nobr",null,e.findWorkoutSummaryMonth(r.year,r.month)),Object(n.h)("br",null),Object(n.h)("nobr",null,e.findWorkoutSummaryMonth(r.year,r.month,"elevation")),Object(n.h)("br",null)))})),Object(n.h)("td",{class:"text-muted",style:"padding: .15rem;"},Object(n.h)("nobr",null,Object(n.h)("i",{class:"fas fa-road"})," km"),Object(n.h)("br",null),Object(n.h)("nobr",null,Object(n.h)("i",{class:"fas fa-mountain"})," m"),Object(n.h)("br",null))),Object(n.h)("tr",null,Object(n.h)("th",{scope:"row",style:"padding: .15rem;"},b," - ",b+1),d.map((function(r){return Object(n.h)(t,null,Object(n.h)("td",{class:"text-right",style:"padding: .15rem;"},Object(n.h)("nobr",null,e.findWorkoutSummaryMonth(r.year,r.month)),Object(n.h)("br",null),Object(n.h)("nobr",null,e.findWorkoutSummaryMonth(r.year,r.month,"elevation")),Object(n.h)("br",null)))})),Object(n.h)("td",{class:"text-muted",style:"padding: .15rem;"},Object(n.h)("nobr",null,Object(n.h)("i",{class:"fas fa-road"})," km"),Object(n.h)("br",null),Object(n.h)("nobr",null,Object(n.h)("i",{class:"fas fa-mountain"})," m"),Object(n.h)("br",null)))))))))},r}(n.Component))||o)||o;e.a=h}).call(this,r("hosL").Fragment)}}]);
//# sourceMappingURL=route-workouts.chunk.f1122.js.map