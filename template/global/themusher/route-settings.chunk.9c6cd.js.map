{"version":3,"sources":["webpack:///./routes/settings/index.js"],"names":["MARGIN_TOP_BACK","mu","marginTopBack","initialState","searchText","showInfo","Settings","withText","veterinaryAllowed","id","veterinaryAllowedHelp","imperial","imperialHelp","observer","props","toggleDarkmode","stores","appState","toggleInfo","e","name","target","closest","dataset","state","setState","toggleSetting","field","settings","userStore","user","updateSetting","back","history","goBack","componentWillReceiveProps","nextProps","search","this","loadAll","render","darkmode","class","style","onClick","data-name","type","onInput","checked","for","map","setting","idx","href","general","Component"],"mappings":"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","file":"route-settings.chunk.9c6cd.js","sourcesContent":["import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport { Text, Localizer, withText } from 'preact-i18n';\nimport linkState from 'linkstate';\n\nimport { route } from 'preact-router';\n\nimport mu from '../../lib/musher-util';\n\nconst MARGIN_TOP_BACK = mu.marginTopBack(false);\n\nconst initialState = {\n\tsearchText: '',\n    showInfo: {},\n};\n\n@withText({\n    veterinaryAllowed: <Text id='users.settings-allow-racevet'>Tillat veterinær</Text>,\n    veterinaryAllowedHelp: <Text id='users.settings-veterinary-help'>Dersom du ønsker at godkjente veterinærer skal kunne søke deg opp og legge inn vaksiner må du skru på her.</Text>,\n    imperial: <Text id='users.settings-imperial'>Imperial units</Text>,\n    imperialHelp: <Text id='users.settings-imperial-email'>Use imperial units like mils, mph, Fahrenheit.</Text>,\n})\n@observer\nclass Settings extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            ...initialState,\n        };\n    }\n\n    toggleDarkmode = (e) => {\n        const { appState } = this.props.stores;\n\t\tappState.toggleDarkmode();\n\t}\n\n    toggleInfo = (e) => {\n        const { name } = e.target.closest('i').dataset;\n        const { showInfo } = this.state;\n        showInfo[name] = !showInfo[name];\n        this.setState({ showInfo });\n\t}\n\n    toggleSetting= async (field) => {\n        const { userStore } = this.props.stores;\n\t\tconst { user } = userStore;\n\t\tconst { settings = {} } = user;\n        await userStore.updateSetting({ [`settings.${field}`]: settings[field] === 1 ? 0 : 1 }, { [field]: settings[field] === 1 ? 0 : 1 });\n    }\n\n\tcomponentWillReceiveProps(nextProps) {\n        // console.log('componentWillReceiveProps', nextProps);\n        if (nextProps.search !== this.props.search) {\n            this.loadAll(nextProps);\n        }\n    }\n\n    back = () => {\n        const { history } = this.props.stores;\n        history.goBack();\n    }\n\n\trender() {\n\t\tconst { submenu, hits, searchText, showInfo = {} } = this.state;\n\t\tconst { appState, userStore } = this.props.stores;\n\t\tconst { search } = this.props;\n\n\t\tconst { darkmode, viewmode } = appState;\n\n\t\tconst { isAdmin, user } = userStore;\n        const { settings = {}, language = 'en' } = user;\n\n\t\tconst { searchResultStories, searchResultDogs, searchResultWorkouts, searchResultTeams, searchResultTracks, searchResultUsers } = appState;\n\t\treturn (\n\t\t\t<div class='container-fluid' style='margin-bottom: 200px; margin-top: 60px;'>\n                <button class='btn btn-link pl-0 fixed-top text-primary'\n                    style={`top: ${MARGIN_TOP_BACK}; left: 5px; font-size: 35px; width: 45px;`}\n                    onClick={this.back}>\n                    <i class='fas fa-arrow-circle-left' />\n                </button>\n\n\t\t\t\t<div class='row m-2'>\n\t\t\t\t\t<div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-0 mb-2'>\n\t\t\t\t\t\t<h1><Text id='settings.title'>Settings</Text></h1>\n                    </div>\n                </div>\n\t\t\t\t<div class='row m-2'>\n\t\t\t\t\t{/* <div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-0 mb-2'>\n\t\t\t\t\t\t<div class='d-flex justify-content-center py-3'>\n\t\t\t\t\t\t\t<Localizer>\n\t\t\t\t\t\t\t\t<input class='form-control form-control mr-2' type='search' placeholder={<Text id='settings.search-placeholder'>Search for settings...</Text>}\n\t\t\t\t\t\t\t\t\tvalue={searchText}\n\t\t\t\t\t\t\t\t\tonInput={linkState(this, 'searchText')}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</Localizer>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div> */}\n\n                    <div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-3 mb-2'>\n                        <h5 class='m-0 text-muted'><Text id='settings.quick-settings'>Quick settings</Text></h5>\n                    </div>\n                    <div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mb-3 bg-light rounded-lg' style='font-size: 1.2em;'>\n\t\t\t\t\t\t<div class='row'>\n\t\t\t\t\t\t\t<div class='col-12 py-2 d-flex align-items-center position-relative'>\n                                <button class='btn btn-secondary py-0 px-1 mr-3' style='width: 2.0em;'>\n                                    <i class='fas fa-moon text-warning' />\n                                </button>\n                                <span class='flex-grow-1' style='line-height: 1.0em;'>\n                                    Darkmode\n                                    <i class='fas fa-info-circle text-muted ml-2' onClick={this.toggleInfo} data-name={'darkmode'} />\n                                    {showInfo.darkmode && <>\n                                        <br /><small class='text-muted'><Text id='settings.darkmode'>Dark or light layout</Text></small>\n                                    </>}\n                                </span>\n                                <div class='custom-control custom-switch custom-switch-lg mt-2' style=\"transform: scale(1.8);\">\n                                    <input type='checkbox' class='custom-control-input' id='settingsDarkmode' onInput={() => this.toggleDarkmode()} checked={darkmode} />\n                                    <label class='custom-control-label' for='settingsDarkmode' />\n                                </div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n                        {['imperial'].map((setting, idx) => <>\n                            <div class={`row ${idx >= 0 ? 'border-top' : ''}`}>\n                                <div class='col-12 py-2 d-flex align-items-center position-relative'>\n                                    <span class='flex-grow-1' style='line-height: 1.0em;'>\n                                        {this.props[setting]}\n                                        {this.props[`${setting}Help`] && <i class='fas fa-info-circle text-muted ml-2' onClick={this.toggleInfo} data-name={setting} />}\n                                        {this.props[`${setting}Help`] && showInfo[setting] && <>\n                                            <br /><small class='text-muted'>{this.props[`${setting}Help`]}</small>\n                                        </>}\n                                    </span>\n                                    <div class='custom-control custom-switch custom-switch-lg mt-2 ml-3' style=\"transform: scale(1.8);\">\n                                        <input type='checkbox' class='custom-control-input' id={`settings${setting}`} onInput={() => this.toggleSetting(setting)} checked={settings[setting]} />\n                                        <label class='custom-control-label' for={`settings${setting}`} />\n                                    </div>\n                                </div>\n                            </div>\n                        </>)}\n\t\t\t\t\t</div>\n\n                    <div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-3 mb-2'>\n                        <h5 class='m-0 text-muted'><Text id='settings.veterinary'>Veterinary</Text></h5>\n                    </div>\n\t\t\t\t\t<div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mb-3 bg-light rounded-lg' style='font-size: 1.2em;'>\n                        {['veterinaryAllowed'].map((setting, idx) => <>\n                            <div class={`row ${idx > 0 ? 'border-top' : ''}`}>\n                                <div class='col-12 py-2 d-flex align-items-center position-relative'>\n                                    <span class='flex-grow-1' style='line-height: 1.0em;'>\n                                        {this.props[setting]}\n                                        {this.props[`${setting}Help`] && <i class='fas fa-info-circle text-muted ml-2' onClick={this.toggleInfo} data-name={setting} />}\n                                        {this.props[`${setting}Help`] && showInfo[setting] && <>\n                                            <br /><small class='text-muted'>{this.props[`${setting}Help`]}</small>\n                                        </>}\n                                    </span>\n                                    <div class='custom-control custom-switch custom-switch-lg mt-2 ml-3' style=\"transform: scale(1.8);\">\n                                        <input type='checkbox' class='custom-control-input' id={`settings${setting}`} onInput={() => this.toggleSetting(setting)} checked={settings[setting]} />\n                                        <label class='custom-control-label' for={`settings${setting}`} />\n                                    </div>\n                                </div>\n                            </div>\n                        </>)}\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 my-3 bg-light rounded-lg' style='font-size: 1.2em;'>\n\t\t\t\t\t\t<div class='row'>\n\t\t\t\t\t\t\t<div class='col-12 py-2 d-flex align-items-center position-relative'>\n                                <button class='btn btn-secondary py-0 px-1 mr-3' style='width: 2.0em;'>\n                                    <i class='fas fa-cog' />\n                                </button>\n                                <span class='flex-grow-1' style='line-height: 1.0em;'>\n                                    <a href='/settings/general' class='stretched-link'><Text id='settings.general'>General</Text></a>\n                                    <i class='fas fa-info-circle text-muted ml-2' onClick={this.toggleInfo} data-name={'general'} />\n                                    {showInfo.general && <>\n                                        <br /><small class='text-muted'><Text id='settings.general-info'>Language, viewmode, logout</Text></small>\n                                    </>}\n                                </span>\n                                <button class='btn btn-link btn-lg py-0 px-1 mr-3'>\n                                    <i class='fas fa-angle-right' />\n                                </button>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class='row border-top'>\n\t\t\t\t\t\t\t<div class='col-12 py-2 d-flex align-items-center position-relative'>\n                                <button class='btn btn-primary py-0 px-1 mr-3' style='width: 2.0em;'>\n                                    <i class='fas fa-user' />\n                                </button>\n                                <span class='flex-grow-1'>\n                                    <a href='/settings/user' class='stretched-link'><Text id='settings.user'>User</Text></a>\n                                </span>\n                                <button class='btn btn-link btn-lg py-0 px-1 mr-3'>\n                                    <i class='fas fa-angle-right' />\n                                </button>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class='row border-top'>\n\t\t\t\t\t\t\t<div class='col-12 py-2 d-flex align-items-center position-relative'>\n                                <button class='btn btn-info py-0 px-1 mr-3' style='width: 2.0em;'>\n                                    <i class='fas fa-users' />\n                                </button>\n                                <span class='flex-grow-1'>\n                                    <a href='/settings/team' class='stretched-link'><Text id='settings.team'>Team</Text></a>\n                                </span>\n                                <button class='btn btn-link btn-lg py-0 px-1 mr-3'>\n                                    <i class='fas fa-angle-right' />\n                                </button>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 my-3 bg-light rounded-lg'>\n\t\t\t\t\t\t<div class='row'>\n\t\t\t\t\t\t\t<div class='col-12 py-2 d-flex align-items-center position-relative'>\n                                <button class='btn btn-secondary py-0 px-1 mr-3' style='width: 2.0em; background-color: #fc4c02; border-color: #fc4c02;'>\n                                    <i class='fab fa-strava' />\n                                </button>\n                                <span class='flex-grow-1'>\n                                    <a href='/users/integrations' class='stretched-link'><Text id='settings.strava'>Strava</Text></a>\n                                </span>\n                                <button class='btn btn-link btn-lg py-0 px-1 mr-3'>\n                                    <i class='fas fa-angle-right' />\n                                </button>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class='row border-top'>\n\t\t\t\t\t\t\t<div class='col-12 py-2 d-flex align-items-center position-relative'>\n                                <button class='btn btn-success py-0 px-1 mr-3' style='width: 2.0em;'>\n                                    <i class='fas fa-plug' />\n                                </button>\n                                <span class='flex-grow-1'>\n                                    <a href='/users/integrations' class='stretched-link'><Text id='settings.garmin-connect'>Garmin Connect</Text></a>\n                                </span>\n                                <button class='btn btn-link btn-lg py-0 px-1 mr-3'>\n                                    <i class='fas fa-angle-right' />\n                                </button>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nexport default Settings;\n"],"sourceRoot":""}