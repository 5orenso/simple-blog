{"version":3,"sources":["webpack:///./routes/tv/style.css","webpack:///./routes/tv/oneTeam.js"],"names":["module","exports","MARGIN_TOP","mu","marginTop","MARGIN_BOTTOM","marginBottom","initialState","OneTeam","observer","Component","constructor","props","super","gotoBib","bib","this","state","raceid","route","checkForEnter","e","key","setState","isLoading","raceStore","stores","load","race","allTeamIds","classes","filter","currentClass","contestants","length","map","musher","team","flat","loadTeams","join","loadWorkoutSummary","getWorkoutSummaryActiveTeams","getAllClassesSortedBy","componentDidMount","loadRace","render","getMusherByBibId","getTeamById","user","members","find","m","email","image","getImage","priority","size","class","style","hoverElement","hoverelementonly","type","onInput","linkstate","onKeyDown","onClick","firstname","lastname","name","flag","sportsClub"],"mappings":"2EACAA,EAAOC,QAAU,CAAC,iBAAmB,0BAA0B,aAAe,sBAAsB,iBAAmB,4B,0fCUvH,MAAMC,EAAaC,IAAGC,WAAU,GAC1BC,EAAgBF,IAAGG,eAEnBC,EAAe,G,IAGfC,EADLC,Y,EAAD,cACsBC,YAClBC,YAAYC,GACRC,MAAMD,GADS,KAyBnBE,QAAU,KACN,MAAM,IAAEC,GAAQC,KAAKC,OACf,OAAEC,GAAWF,KAAKJ,MACxBO,gBAAO,YAAWD,KAAUH,MA5Bb,KA+BnBK,cAAiBC,IACC,UAAVA,EAAEC,KACFN,KAAKF,WA/BTE,KAAKC,M,+VAAL,IACOV,GAKX,eAAeK,EAAQI,KAAKJ,OAC9BI,KAAKO,SAAS,CAAEC,WAAW,IAC3B,MAAM,UAAEC,GAAcb,EAAMc,QACtB,OAAER,GAAWN,QACPa,EAAUE,KAAKT,GACrB,MAAM,KAAEU,GAASH,EACjBI,EAAaD,EAAKE,QAAQC,OAAOC,GAAgBA,EAAaC,aAAeD,EAAaC,YAAYC,OAAS,GAAGC,IAAKH,GAC5GA,EAAaC,YAAYF,OAAOK,GAAUA,EAAOC,KAAO,GAAGF,IAAIC,GAAUA,EAAOC,OAC9FC,OACCT,EAAWK,OAAS,GAAKhB,UACtBO,EAAUc,UAAUV,EAAWW,KAAK,YACpCf,EAAUgB,mBAAmBZ,EAAWW,KAAK,KAAMtB,GACzDO,EAAUiB,gCAEXjB,EAAUkB,wBAeXC,oBACC5B,KAAK6B,WAGHC,SACI,MAAM,IAA+B/B,GAAQC,KAAKJ,OAClD,UAAaa,GAAwBT,KAAKJ,MAAMc,OAE1CU,EAASX,EAAUsB,iBAAiBhC,GACpCsB,EAAOZ,EAAUuB,YAAYZ,EAAOC,MACpCY,EAAOZ,EAAKa,QAAUb,EAAKa,QAAQC,KAAKC,GAAKA,EAAEC,QAAUjB,EAAOiB,OAAS,GACzEC,EAAQnD,IAAGoD,SAAS,CAAEN,OAAMZ,OAAMmB,SAAU,OAAQC,KAAM,gBAEhE,OAAQ,mBACJ,mBAAKC,MAAQ,aAAYC,IAAMC,aAAgBD,MAAM,kBACjD,mBAAKD,MAAQ,GAAEC,IAAME,kBACjB,mBAAKH,MAAQ,OACT,mBAAKA,MAAM,mBACP,mBAAKA,MAAM,cACP,qBAAOA,MAAM,qBAAb,aACA,qBACIA,MAAM,2DACNC,MAAM,6BACNG,KAAK,OACLC,QAASC,YAAUhD,KAAM,OACzBiD,UAAWjD,KAAKI,gBAEpB,sBACI0C,KAAK,SACLJ,MAAM,iCACNQ,QAASlD,KAAKF,SAHlB,iBAU7B,mBAAK4C,MAAM,oCAAoCC,MAAQ,kBAAiBtD,kBAA8BH,0BAAmCG,OAAmBH,OAI9IoD,GAAS,mBACNI,MAAM,2BACNC,MAAM,+CAMN,mBACID,MAAQ,qFACRC,MAAOL,EAAS,0BAAyBA,+BAAqC,IAFlF,MAUJ,mBACII,MAAM,2BACNC,MAAM,2MAUN,mBACID,MAAM,2CACNC,MAAM,kFAOL5C,GAEL,mBACI2C,MAAM,yDACNC,MAAM,4GAQN,wBACKvB,EAAO+B,UAAY,mBAChB,oBAAMR,MAAM,qBAAqBvB,EAAO+B,WADxB,IAC0C,oBAAMR,MAAM,qBAAqBvB,EAAOgC,WAChG,mBACDhC,EAAOiC,QAIpB,mBACIX,MAAM,wDACNC,MAAM,2GAQN,wBAAOvB,EAAOkC,MAAQ,mBAAKZ,MAAM,uBAAuBC,MAAM,yCAAyCvB,EAAOkC,MAA9G,IAA4HlC,EAAOmC,oB,EAU5I/D,a","file":"91.chunk.56090.esm.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"hoverelementonly\":\"hoverelementonly__3_DrK\",\"hoverElement\":\"hoverElement__3ED7Q\",\"hoverelementhide\":\"hoverelementhide__2AP13\"};","import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport { Text, Localizer } from 'preact-i18n';\nimport linkstate from 'linkstate';\nimport { route } from 'preact-router';\n\nimport mu from '../../lib/musher-util';\n\nimport style from './style.css';\n\nconst MARGIN_TOP = mu.marginTop(true);\nconst MARGIN_BOTTOM = mu.marginBottom();\n\nconst initialState = {};\n\n@observer\nclass OneTeam extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            ...initialState,\n        };\n    }\n\n\n    async loadRace(props = this.props) {\n\t\tthis.setState({ isLoading: true });\n\t\tconst { raceStore } = props.stores;\n\t\tconst { raceid } = props;\n        await raceStore.load(raceid);\n        const { race } = raceStore;\n\t\tconst allTeamIds = race.classes.filter(currentClass => currentClass.contestants && currentClass.contestants.length > 0).map((currentClass) => {\n            return currentClass.contestants.filter(musher => musher.team > 0).map(musher => musher.team);\n\t\t}).flat();\n\t\tif (allTeamIds.length > 0 && raceid) {\n\t\t\tawait raceStore.loadTeams(allTeamIds.join(','));\n\t\t\tawait raceStore.loadWorkoutSummary(allTeamIds.join(','), raceid);\n\t\t\traceStore.getWorkoutSummaryActiveTeams();\n\t\t}\n\t\traceStore.getAllClassesSortedBy();\n\t}\n\n    gotoBib = () => {\n        const { bib } = this.state;\n        const { raceid } = this.props;\n        route(`/tv/team/${raceid}/${bib}`);\n    }\n\n    checkForEnter = (e) => {\n        if (e.key === 'Enter') {\n            this.gotoBib();\n        }\n    }\n\n\tcomponentDidMount() {\n\t\tthis.loadRace();\n\t}\n\n    render() {\n        const { goto, gotoTitle, routerName, bib } = this.props;\n\t\tconst { userStore, raceStore, appState } = this.props.stores;\n\n        const musher = raceStore.getMusherByBibId(bib);\n        const team = raceStore.getTeamById(musher.team);\n        const user = team.members ? team.members.find(m => m.email === musher.email) : {};\n        const image = mu.getImage({ user, team, priority: 'user', size: 's3LargeLink' });\n\n        return (<>\n            <div class={`fixed-top ${style.hoverElement}`} style='height: 100px;'>\n                <div class={`${style.hoverelementonly}`}>\n                    <div class={`row`}>\n                        <div class='col form-inline'>\n                            <div class='form-group'>\n                                <label class='text-success mr-2'>Enter Bib</label>\n                                <input\n                                    class='form-control form-control-lg text-success border-success'\n                                    style='background-color: inherit;'\n                                    type='text'\n                                    onInput={linkstate(this, 'bib')}\n                                    onKeyDown={this.checkForEnter}\n                                />\n                                <button\n                                    type='button'\n                                    class='btn btn-lg btn-outline-success'\n                                    onClick={this.gotoBib}\n                                >Show Bib</button>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n\t\t\t<div class='container-fluid position-relative' style={`margin-bottom: ${MARGIN_BOTTOM}; margin-top: ${MARGIN_TOP}; height: calc(100% - ${MARGIN_BOTTOM} - ${MARGIN_TOP});`}>\n                {/* <xmp class='text-dark'>musher: {JSON.stringify(musher, null, 4)}</xmp>\n                <xmp class='text-dark'>user: {JSON.stringify(user, null, 4)}</xmp>\n                <xmp class='text-dark'>image: {JSON.stringify(image, null, 4)}</xmp> */}\n                {image && <div\n                    class='d-flex position-absolute'\n                    style='\n                        bottom: 20px;\n                        left: 248px;\n                        z-index: 9999;\n                    '\n                >\n                    <div\n                        class={`position-relative text-center border rounded-circle imageRounded imageRoundedLarge`}\n                        style={image ? `background-image: url(\"${image}\"); background-size: cover;` : ''}\n                    >\n                        &nbsp;\n                    </div>\n                </div>}\n\n                {/* <xmp class='text-dark'>{JSON.stringify(image, null, 4)}</xmp> */}\n\n                <div\n                    class='d-flex position-absolute'\n                    style='\n                        bottom: -100px;\n                        left: 125px;\n                        background-image: url(\"https://themusher.app/assets/tv-oneteam-background.png\");\n                        background-position: 0 100%;\n                        background-repeat: no-repeat;\n                        width: 740px;\n                        height: 400px;\n                    '\n                >\n                    <div\n                        class='text-white text-center position-absolute'\n                        style='\n                            font-size: 2.5em;\n                            font-weight: bold;\n                            bottom: 114px;\n                            left: 3px;\n                            width: 114px;\n                    '>\n                        {bib}\n                    </div>\n                    <div\n                        class='text-white text-left position-absolute overflow-hidden'\n                        style='\n                            font-size: 2.3em;\n                            font-weight: 400;\n                            text-transform: uppercase;\n                            bottom: 46px;\n                            left: 62px;\n                            width: 520px;\n                    '>\n                        <nobr>\n                            {musher.firstname ? <>\n                                <span style='font-weight: 300;'>{musher.firstname}</span> <span style='font-weight: 600;'>{musher.lastname}</span>\n                            </> : <>\n                                {musher.name}\n                            </>}\n                        </nobr>\n                    </div>\n                    <div\n                        class='text-dark text-left position-absolute overflow-hidden'\n                        style='\n                            color: #000000 !important;\n                            font-size: 1.4em;\n                            font-weight: 600;\n                            bottom: 5px;\n                            left: 62px;\n                            width: 460px;\n                    '>\n                        <nobr>{musher.flag && <div class='float-left pt-1 mr-3' style='font-size: 1.5em; line-height: 0.8em;'>{musher.flag}</div>} {musher.sportsClub}</nobr>\n                    </div>\n                </div>\n\n\n            </div>\n        </>);\n    }\n}\n\nexport default OneTeam;\n"],"sourceRoot":""}