{"version":3,"sources":["webpack:///./components/util/scrollIntoView.js","webpack:///./components/imageSlider/index.js","webpack:///./routes/workouts/detail.js","webpack:///./components/workout/infoGraph.js","webpack:///./components/dog/index.js","webpack:///./components/dog/simple.js","webpack:///./components/gauge/style.css","webpack:///./components/ad/index.js","webpack:///./components/states/index.js","webpack:///./components/user/musher.js","webpack:///./components/gauge/index.js"],"names":["initialState","ScrollIntoView","observer","Component","constructor","props","super","this","state","container","componentDidMount","horizontal","vertical","behavior","inline","block","scrollIntoView","render","ref","c","touchStart","e","stopPropagation","setState","startX","touches","pageX","touchEnd","undefined","sliding","touchMove","totalImages","scrollDistance","x","prevImage","nextImage","images","imageContainer","currentImage1","currentImage2","currentIdx","length","imageDots","Array","fill","map","y","nextImageContainer","nextIdx","componentWillReceiveProps","nextProps","nextImages","img","curImage","htmlImageRatio","height","width","imgHeight","imgWidth","dimensions","orientation","imageRatio","class","style","onTouchstart","onTouchend","onTouchmove","loading","src","s3LargeLink","image1","image2","i","getWorkoutColor","workout","type","getWorkoutIcon","MARGIN_TOP","mu","marginTop","MARGIN_TOP_BACK","marginTopBack","MARGIN_BOTTOM","marginBottom","MAX_LOADINDEX","getMaxLoadIndex","newDog","submenu","showAddComment","mapHeight","mapMaxHeight","reloadInSec","reloadLastEpoch","reloadIsActive","onInputDuration","field","updateField","value","parseInt","target","name","hh","Math","floor","mi","match","id","handleImageErrored","image","onerror","setTimeout","Date","removeImage","async","workoutStore","stores","parentElement","dataset","removeMainImage","setDateToNow","util","isoDate","setTimeToNow","isoTime","setValue","setRightValue","rightValueReal","saved","datalist","min","max","step","elementtype","title","icon","help","onInput","rightValue","displayValue","insertValue","toJS","maxValue","secToHms","checkNested","yr","instant","details","date","air_temperature","wind_speed","windDirection","wind_from_direction","cloud_area_fraction","air_pressure_at_sea_level","relative_humidity","asNumber","for","Files","object","s3SmallLink","onError","onClick","data-name","autoOpen","list","aria-describedby","data-id","data-field","el","data-value","checked","data-type","data-elementtype","AdminInfo","firstPoint","getFirstPoint","midPoint","getMidPoint","endPoint","tracks","firstTrackPoint","lastTrackPoint","duration","startTime","timestamp","getTime","join","t","coords","accuracy","JSON","stringify","WorkoutDetail","loadWorkout","showAdminInfo","addData","push","load","plotGeocluster","isNew","updateFieldValue","datatype","skipTimer","newValue","localObjectValue","isArray","split","parseFloat","updateObjectKeyValue","doUpdateField","clearTimeout","updateTimer","totalDistance","maxSpeed","avgSpeed","ascent","decent","rest","startLatlng","endLatlng","gpx","gpxInfo","updateObject","roundTo","distanceKm","speedmax","speedAvg","elevation","save","showModal","preventDefault","displayModal","currentImage","currentImageXXL","imagexxl","thumb","closeModal","deleteWorkout","saveField","PubSub","publish","topics","STATUS_MESSAGE","message","route","duplicateWorkout","response","makeTrack","makeTrackFromWorkout","likeWorkout","toggleAddComment","workoutId","inputRef","focus","toggleAdminInfo","userStore","isAdmin","chooseSubmenu","menu","showStateDetail","data","closest","stateDetail","reimportStravaWorkout","stravaId","reimportGarminWorkout","garminId","reCalculateGpxData","recalculated","reLoad","toggleMapSize","finishWorkout","cordovaSaveTracking","isInProgress","sendGpxFile","gpxFileSent","shareLink","url","text","appState","shareUrl","onTeamClick","teamid","showTeam","hideTeam","onUserClick","onDogClick","dogid","dogs","showDog","hideDog","back","history","goBack","tickReloadTimeer","now","componentWillUnmount","reload","mapColorMode","mapRangeMin","mapRangeMax","isCordova","hasShareApi","viewmode","user","waypoints2","waypoints3","normalizeBetween","likes","comments","language","team","findTeam","teamAmbition","findTeamAmbition","ambition","ambitions","teamType","findTeamType","workoutType","findWorkoutType","workoutTypeIcon","track","findTrack","workoutEquipment","findEquipment","equipment","workoutEquipmentIcon","findDogs","mushers","findMushers","intensity","findIntensity","code","workoutNavigation","getWorkoutNavigation","hasLikedWorkout","findIndex","weightedTotalKcal","loadIndex","kcalMultiplier","totalKcalRelated","teamNames","teams","batteryUsage","battegryLevelStart","battegryLevelEnd","mapImage","imgs","showReimport","views","getViews","statistics","musherImages","slice","musher","u","findMusher","firstMusher","isLocked","href","previous","total","idx","next","role","sledWeight","format","comment","markdown","replaceImages","markdownOpts","getMarkdownOptions","data-menu","mapId","geojson","geoJSON","skipGeojson","key","fullscreenMap","weather","temperature","currentSpeed","calculatedTotalDistance","abs","calculatedAscend","calculatedDescend","descent","section","endTime","minEpoch","maxEpoch","avgMovingSpeeds","avgGpsSpeed","avgGpsMovingSpeed","reimported","states","radius","showPercentText","color","getLoadIndexColor","percent","completed","getLoadIndexText","prefix","typeFactor","ambitionFactor","normalSpeed","speedFactor","normalDuration","durationFactor","intensityFactor","kcalBurnedTotal","kcalBurned","kcalFatGramsTotal","kcalFatGrams","kcalMeatGramsTotal","kcalMeatGrams","kcalSalmonGramsTotal","kcalSalmonGrams","dogsLeft","dogId","dog","findDog","className","dogsRight","fields","sunPosition","start","end","moonPosition","altitudeDeg","moonIllumination","phaseIcon","fraction","aria-valuenow","aria-valuemin","aria-valuemax","indexOf","rating","private","data-url","uuidv4","data-title","rel","data-native","inputRefObject","isTeamAdmin","WorkoutInfoGraph","withText","week","distance","ascend","plan","subGpxInfo","finalGpxInfo","gpsSpeeds","speeds","elevations","temperatures","climbs","distances","ecor","dataLeft","dataLeft2","dataLeft3","dataRight","dataRight3","legendLeft","legendLeft2","legendLeft3","legendRight","legendRight3","unitLeft","unitLeft2","unitLeft3","unitRight","unitRight3","smoothArray","xTicks","xTicksRange","range","ceil","partSize","l","showXTicks","xTicksVal","val","paddingTop","lineFromXzero","lineFromXmax","dataFillLeft","showYTicksLeft","yTicksLeftPostfix","avgWindowLeft","smoothLeft","showYTicksRight","yTicksRightPostfix","avgWindowRight","smoothRight","yMaxMinLeftRound","yTicksRightVal","v","Dog","dogStore","currentMonth","getMonth","currentYear","getFullYear","month","year","seasonStart","workoutSummary","findWorkoutSummary","dogStatuses","statuses","findDogstatus","status","dogVaccines","findVaccineStatuses","dogVaccineLogStatuses","findVaccineLogStatuses","chipId","dogHistoryStatuses","findHistoryStatuses","dogStatus","dogPosition","findDogposition","position","forEach","hasBirthday","birth","daysUntilBirthday","daysUntilNextBirthday","ucfirst","findHarness","harness","age","deceased","gender","shortname","weight","bodyScore","endDate","vaccineType","positions","lead","point","wheel","specialNeeds","lang","filter","vac","inKarens","vaccineAgens","getFatigueLevel","wo","STOP_STATUSES","WARN_STATUSES","showWorkout","showNeeds","showInfo","showName","showPosition","showAge","size","findCurrentWorkoutSummary","module","exports","Ad","subject","body","logClick","adStore","ads","apiServer","getApiServer","isLoading","path","currentTeam","postalcode","place","country","page","replace","query","setTime","loadAd","time","ad","native","getStateColor","getStateIcon","States","hideDetail","nextStateDetail","nextState","avgspeed","statespeeds","stateSpeeds","prevStateDetail","prevIdx","prevState","showText","currentWidth","data-idx","data-state","data-duration","data-distance","data-avgspeed","data-statespeeds","data-point","data-start","data-end","data-percent","formatDate","parseInputDate","locale","hour12","day","hour","minute","Musher","email","fname","mouseData","Gauge","svgRef","heightAdd","showCenterText","centerText","centerTextSize","centerTextX","centerTextY","totalY","totalX","totalTextAnchor","completedY","completedX","completedTextAnchor","strokeWidth","innerRadius","strokeWidthGauge","circumference","PI","arc","dashArray","transform","offset","textSize","textSizeSmall","xmlns","svg","preserveAspectRatio","gaugeBackground","cx","cy","r","strokeDasharray","strokeLinecap","gauge","stroke","strokeDashoffset","transition","gaugeText","dominant-baseline","text-anchor","font-size","secondary"],"mappings":"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","file":"13.chunk.91eab.esm.js","sourcesContent":["import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\n\nconst initialState = {};\n\n@observer\nclass ScrollIntoView extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            ...initialState,\n        };\n        this.container = null;\n    }\n\n    componentDidMount() {\n        const { horizontal, vertical = '' } = this.props;\n        const props = {\n            behavior: 'smooth',\n        };\n        if (horizontal) {\n            props.inline = horizontal;\n        }\n        if (vertical) {\n            props.block = vertical;\n        }\n\t\tthis.container.scrollIntoView(props);\n\t}\n\n    render() {\n        return (\n            <div ref={c => this.container = c}>&nbsp;</div>\n        );\n    }\n}\n\nexport default ScrollIntoView;\n","import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\n\n@observer\nclass ImageSlider extends Component {\n    constructor(props) {\n        super(props);\n        const { images = [] } = props;\n        this.state = {\n            imageContainer: 1,\n            currentImage1: images[0] || {},\n            currentImage2: {},\n            currentIdx: 0,\n            totalImages: images.length || 0,\n            imageDots: [...Array(images.length || 0).fill(1).map((x, y) => x + y)],\n        };\n    }\n\n    nextImage() {\n        // console.log('next');\n        const { images } = this.props;\n        const { totalImages, currentIdx, imageContainer } = this.state;\n        const nextImageContainer = imageContainer === 1 ? 2 : 1;\n        let nextIdx = currentIdx + 1;\n        if (nextIdx > totalImages -1) {\n            nextIdx = 0;\n        }\n        this.setState({\n            [`currentImage${nextImageContainer}`]: images[nextIdx],\n            currentIdx: nextIdx,\n            imageContainer: nextImageContainer,\n        });\n    }\n\n    prevImage() {\n        // console.log('prev');\n        const { images } = this.props;\n        const { totalImages, currentIdx, imageContainer } = this.state;\n        const nextImageContainer = imageContainer === 1 ? 2 : 1;\n        let nextIdx = currentIdx - 1;\n        if (nextIdx < 0) {\n            nextIdx = totalImages - 1;\n        }\n        this.setState({\n            [`currentImage${nextImageContainer}`]: images[nextIdx],\n            currentIdx: nextIdx,\n            imageContainer: imageContainer === 1 ? 2 : 1,\n        });\n    }\n\n    touchStart = (e) => {\n        e.stopPropagation();\n        this.setState({\n            startX: e.touches[0].pageX,\n        })\n    }\n\n    touchEnd = (e) => {\n        e.stopPropagation();\n        this.setState({\n            startX: undefined,\n            sliding: false,\n        })\n    }\n\n    touchMove = (e) => {\n        e.stopPropagation();\n        // e.preventDefault();\n        const { totalImages } = this.state;\n        if (totalImages > 1) {\n            const { startX, sliding } = this.state;\n            const scrollDistance = 50;\n            const x = e.touches[0].pageX;\n            if (!sliding) {\n                if (x > startX + scrollDistance) {\n                    this.setState({ sliding: true })\n                    this.prevImage();\n                } else if (x < startX - scrollDistance) {\n                    this.setState({ sliding: true })\n                    this.nextImage();\n                }\n            }\n        }\n    }\n\n    componentWillReceiveProps(nextProps) {\n        // console.log('componentWillReceiveProps', nextProps);\n        if (nextProps.images !== this.props.images) {\n            const { images: nextImages = [] } = nextProps;\n            this.setState({\n                imageContainer: 1,\n                currentImage1: nextImages.length > 0 ? nextImages[0] : {},\n                currentImage2: {},\n                currentIdx: 0,\n                totalImages: nextImages.length || 0,\n                imageDots: [...Array(nextImages.length || 0).fill(1).map((x, y) => x + y)],\n            });\n        }\n    }\n\n    render() {\n        const { currentImage1, currentImage2, imageContainer, totalImages, imageDots, currentIdx } = this.state;\n        const img = this[`image${imageContainer}`];\n        const curImage = imageContainer === 1 ? currentImage1 : currentImage2;\n        const htmlImageRatio = img && img.height ? img.width / img.height : 4 / 3;\n        let imgHeight;\n        let imgWidth;\n        if (curImage.dimensions) {\n            const { width, height, orientation } = curImage.dimensions;\n            if (orientation > 4 && orientation < 9) {\n                imgHeight = width;\n                imgWidth = height;\n            } else {\n                imgHeight = height;\n                imgWidth = width;\n            }\n        }\n        const imageRatio = curImage.dimensions ? imgWidth / imgHeight : htmlImageRatio;\n        if (totalImages <= 0) {\n            return '';\n        }\n\n        return (\n            <div class='w-100'>\n                <div class='border rounded position-relative w-100'\n                    style={`height: calc(85vw / ${imageRatio}); overflow: hidden; transition: all .3s ease-in-out;`}\n                    onTouchstart={this.touchStart}\n                    onTouchend={this.touchEnd}\n                    onTouchmove={this.touchMove}\n                >\n                    {totalImages > 1 && <span class='position-absolute' style='top:0px; right: 5px; z-index: 2000;'><small>{currentIdx + 1}/{totalImages}</small></span>}\n                    {currentImage1 && <div class='position-absolute' style={`${imageContainer === 1 ? 'opacity: 1;' :  'opacity: 0;'} transition: all .3s ease-in-out; top: 0; left: 0;`}>\n                        <img loading='lazy' src={currentImage1.s3LargeLink}\n                            class='img-fluid align-middle'\n                            ref={c => this.image1 = c}\n                        />\n                    </div>}\n                    {currentImage2 && <div class='position-absolute' style={`${imageContainer === 2 ? 'opacity: 1;' :  'opacity: 0;'} transition: all .3s ease-in-out; top: 0; left: 0;`}>\n                        <img loading='lazy' src={currentImage2.s3LargeLink}\n                            class='img-fluid align-middle'\n                            ref={c => this.image2 = c}\n                        />\n                    </div>}\n                </div>\n                {imageDots.length > 1 && <div class='w-100 text-center'>{imageDots.map(i => <span style={`color: ${i === currentIdx + 1 ? '#ffffff' : '#808080'};`}>&bull;</span>)}</div>}\n            </div>\n        );\n    }\n}\n\nexport default ImageSlider;\n","import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport { route } from 'preact-router';\nimport { Text, Localizer } from 'preact-i18n';\nimport { toJS } from 'mobx';\nimport Markdown from 'preact-markdown';\n\nimport PubSub, { topics } from '../../lib/pubsub';\n\nimport mu from '../../lib/musher-util';\nconst MARGIN_TOP = mu.marginTop(false);\nconst MARGIN_TOP_BACK = mu.marginTopBack(false);\nconst MARGIN_BOTTOM = mu.marginBottom();\n\nconst MAX_LOADINDEX = mu.getMaxLoadIndex();\nconst RELOAD_INTERVAL_IN_SEC = 60;\n\nimport Map from '../../components/map';\nimport ImageSlider from '../../components/imageSlider';\nimport ImageScroller from '../../components/imageScroller';\nimport Dog from '../../components/dog';\nimport Musher from '../../components/user/musher';\nimport DogSimple from '../../components/dog/simple';\nimport WorkoutInfoGraph from '../../components/workout/infoGraph';\nimport WorkoutComments from '../../components/workout/comments';\nimport WorkoutAddComment from '../../components/workout/commentAdd';\nimport Gauge from '../../components/gauge';\nimport Ad from '../../components/ad/';\nimport Images from '../../components/form/images';\n\nimport Overlay from '../../components/overlay/';\nimport TeamsPublicDetail from '../../routes/teams/publicDetail';\nimport DogPublicDetail from '../../routes/dogs/publicDetail';\n\nimport LikesAndComments from '../../components/feedback/likesAndComments';\nimport Views from '../../components/feedback/views';\n\nimport Speed from '../../components/data/speed';\nimport Elevation from '../../components/data/elevation';\nimport Weight from '../../components/data/weight';\nimport Distance from '../../components/data/distance';\nimport Temperature from '../../components/data/temperature';\n\nimport States from '../../components/states';\n\nimport ScrollIntoView from '../../components/util/scrollIntoView';\n\nfunction getWorkoutColor(workout) {\n\tswitch (workout.type) {\n\t\tcase 1:\n\t\t\treturn 'border-primary';\n\t\tcase 2:\n\t\t\treturn 'border-danger';\n\t\tcase 3:\n\t\t\treturn 'border-success';\n\t\tcase 4:\n\t\t\treturn 'border-info';\n\t\tdefault:\n\t\t\treturn 'border-warning';\n\t}\n}\n\nfunction getWorkoutIcon(workout) {\n\tswitch (workout.type) {\n\t\tcase 1:\n\t\t\treturn 'fas fa-running';\n\t\tcase 2:\n\t\t\treturn 'fas fa-flag-checkered';\n\t\tcase 3:\n\t\t\treturn 'fas fa-hiking';\n\t\tcase 4:\n\t\t\treturn 'fas fa-futbol';\n\t\tdefault:\n\t\t\treturn 'fas fa-hiking';\n\t}\n}\n\nfunction getStateColor(state) {\n\tswitch (state) {\n\t\tcase 'running':\n\t\t\treturn 'primary';\n\t\tcase 'rest':\n\t\t\treturn 'warning';\n\t\tcase 'restTrail':\n\t\t\treturn 'danger';\n\t}\n}\n\nfunction getStateIcon(state) {\n\tswitch (state) {\n\t\tcase 'running':\n\t\t\treturn 'fas fa-running';\n\t\tcase 'rest':\n\t\t\treturn 'fas fa-male';\n\t\tcase 'restTrail':\n\t\t\treturn 'fas fa-bed';\n\t}\n}\n\nfunction displayDistance(distanceKm) {\n\tif (distanceKm < 5) {\n\t\treturn util.format(distanceKm, 2);\n\t}\n\tif (distanceKm < 10) {\n\t\treturn util.format(distanceKm, 1);\n\t}\n\treturn util.format(distanceKm, 1);\n}\n\nconst initialState = {\n    newDog: {},\n\tsubmenu: 'totals',\n\tshowAddComment: false,\n\tmapHeight: 300,\n\tmapMaxHeight: 600,\n\treloadInSec: null,\n\treloadLastEpoch: null,\n\treloadIsActive: false,\n};\n\n@observer\nclass Input extends Component {\n    onInputDuration = (e) => {\n        const { field, updateField, workout } = this.props;\n        const value = parseInt(e.target.value, 10);\n        const name = e.target.name;\n        let hh = Math.floor(workout[field] / 3600) || 0;\n        let mi = Math.floor(workout[field] / 3600) || 0;\n        if (name.match(/-hours/)) {\n            hh = value;\n        }\n        if (name.match(/-minutes/)) {\n            mi = value;\n        }\n        const combinedValue = (hh * 3600) + (mi * 60);\n        updateField({ id: workout.id, field, value: combinedValue });\n    }\n\n    handleImageErrored = (e) => {\n        const image = e.target;\n        image.onerror = null;\n        setTimeout(() => {\n            image.src += `?${new Date()}`;\n        }, 1000);\n    }\n\n    removeImage = async (e) => {\n        const { workoutStore } = this.props.stores;\n        const { workout } = this.props;\n        const imageName = e.target.parentElement.dataset.name || e.target.dataset.name;\n        workoutStore.removeImage({\n            id: workout.id,\n            name: imageName,\n        });\n    }\n\n    removeMainImage = () => {\n        const { workout, field, updateField } = this.props;\n        updateField({ id: workout.id, field, value: {} });\n    }\n\n    setDateToNow = () => {\n        const { field, updateField, workout } = this.props;\n        const value = util.isoDate(undefined, false, false, true);\n        // updateFieldValue = ({ id, field, value, datatype, elementtype, type, isNew = false, skipTimer = false }) => {\n        updateField({ id: workout.id, field, value });\n    }\n\n    setTimeToNow = () => {\n        const { field, updateField, workout } = this.props;\n        const value = util.isoTime();\n        // updateFieldValue = ({ id, field, value, datatype, elementtype, type, isNew = false, skipTimer = false }) => {\n        updateField({ id: workout.id, field, value });\n    }\n\n    setValue = (e) => {\n        const value = e.target.parentElement.dataset.value || e.target.dataset.value;\n        if (value) {\n            const { field, updateField, workout } = this.props;\n            // updateFieldValue = ({ id, field, value, datatype, elementtype, type, isNew = false, skipTimer = false }) => {\n            updateField({ id: workout.id, field, value });\n        }\n    }\n\n    setRightValue = () => {\n        const { field, updateField, workout, rightValueReal } = this.props;\n        updateField({ id: workout.id, field, value: rightValueReal });\n    }\n\n    render() {\n        const { saved, workout, type, datalist = [], min, max, step, elementtype, field, title, icon, help, onInput, updateField, rightValue } = this.props;\n        let value = toJS(workout[field]);\n        let maxValue = max;\n        if (type === 'date') {\n            if (value) {\n                value = util.isoDate(workout[field], false, false, true);\n            }\n            if (max === 'today') {\n                maxValue = util.isoDate(undefined, false, false, true);\n            }\n        }\n        // if (type === 'time') {\n        //     if (value) {\n        //         value = util.isoTime(workout[field]);\n        //     }\n        // }\n        let displayValue;\n        let insertValue;\n        if (field === 'duration' || field === 'rest') {\n            displayValue = util.secToHms(value, true);\n        }\n        if (field === 'weather' && util.checkNested(workout, 'yr', '0', 'instant', 'details')) {\n            const yr = toJS(workout.yr[0].instant.details);\n            const yrDate = util.isoDate(workout.yr[0].date, false, false, true);\n            const workoutDate = util.isoDate(workout.date, false, false, true);\n            // air_pressure_at_sea_level, air_temperature, cloud_area_fraction, relative_humidity, wind_from_direction, wind_speed\n            if (yrDate === workoutDate) {\n                displayValue = `Yr.no:  ${yr.air_temperature}C,  ${yr.wind_speed}m/s  ${mu.windDirection(yr.wind_from_direction)},  ${yr.cloud_area_fraction}%, ${yr.air_pressure_at_sea_level}mb,  ${yr.relative_humidity}%`;\n                insertValue = displayValue;\n            }\n        }\n        if (field === 'temperature' && util.checkNested(workout, 'yr', '0', 'instant', 'details')) {\n            const yr = toJS(workout.yr[0].instant.details);\n            const yrDate = util.isoDate(workout.yr[0].date, false, false, true);\n            const workoutDate = util.isoDate(workout.date, false, false, true);\n            // air_pressure_at_sea_level, air_temperature, cloud_area_fraction, relative_humidity, wind_from_direction, wind_speed\n            if (yrDate === workoutDate) {\n                displayValue = `Yr.no:  ${yr.air_temperature}C`;\n                insertValue = util.asNumber(yr.air_temperature);\n            }\n        }\n        if (type === 'file') {\n            return (\n                <div class={`form-group ${saved[`${field}.${workout.id}`] ? 'is-valid' : ''}`}>\n                    <label for={`${field}Input`}>{icon && <i class={`${icon} text-muted`} />} {title}</label>\n                    <Files saved={saved} object={workout} field={field} updateField={updateField} />\n                    {saved[`${field}.${workout.id}`] ? <div class={`valid-feedback`} style='display: block;'><Text id='workouts.changes-saved'>Endringene er lagret</Text></div> :\n                        <small id={`${field}Help`} class='form-text text-muted'>{help}</small>}\n                </div>\n            );\n        }\n        if (type === 'image') {\n            return (\n                <div class={`form-group  mb-5 pb-1 border-bottom ${saved[`${field}.${workout.id}`] ? 'is-valid' : ''}`}>\n                    <label for={`${field}Input`}>{icon && <i class={`${icon} text-muted`} />} {title}</label>\n                    <div class='container-fluid'>\n                        <div class='row'>\n                            {workout.image && workout.image.s3SmallLink && <div class='col-3 p-1'>\n                                <img loading='lazy' src={workout.image.s3SmallLink} class='img-fluid border rounded-lg' onError={this.handleImageErrored} />\n                                <button class='btn btn-sm btn-link'\n                                    onClick={this.removeMainImage}\n                                    data-name={workout.image.name}\n                                ><i class='fas fa-trash' /> Del</button>\n                                <span class='badge badge-success'>Main</span>\n                            </div>}\n                            {workout.images && workout.images.map(img => (\n                                <div class='col-3 p-1'>\n                                    <img loading='lazy' src={img.s3SmallLink} class='img-fluid' onError={this.handleImageErrored} />\n                                    <button class='btn btn-sm btn-link'\n                                        onClick={this.removeImage}\n                                        data-name={img.name}\n                                    ><i class='fas fa-trash' /> Del</button>\n                                </div>\n                            ))}\n                        </div>\n                    </div>\n                    <Images saved={saved} object={workout} field={field} updateField={updateField} autoOpen={false} />\n                    {saved[`${field}.${workout.id}`] ? <div class={`valid-feedback`} style='display: block;'>Endringene er lagret</div> :\n                        <small id={`${field}Help`} class='form-text text-muted'>{help}</small>}\n                </div>\n            );\n        }\n        if (type === 'datalist') {\n            return (\n                <div class={`form-group  mb-5 pb-1 border-bottom ${saved[`${field}.${workout.id}`] ? 'is-valid' : ''}`}>\n                    <label for={`${field}Input`}>{icon && <i class={`${icon} text-muted`} />} {title}</label>\n                    <input list={`list-${field}`} class={`form-control ${saved[`${field}.${workout.id}`] ? 'is-valid' : ''}`} id={`${field}Input`} aria-describedby={`${field}Help`}\n                        value={value}\n                        data-id={workout.id}\n                        data-field={field}\n                        onInput={onInput}\n                    />\n                    <datalist id={`list-${field}`} >\n                        {datalist.map(el => (\n                            <option value={el[0]}>{el[1]}</option>\n                        ))}\n                    </datalist>\n                    {saved[`${field}.${workout.id}`] ? <div class={`valid-feedback`} style='display: block;'><Text id='workouts.changes-saved'>Endringene er lagret</Text></div> :\n                        <small id={`${field}Help`} class='form-text text-muted'>{help}</small>}\n                </div>\n            );\n        }\n        if (type === 'duration') {\n            const hh = Math.floor(workout[field] / 3600);\n            const mi = Math.floor(workout[field] % 3600 / 60);\n            // const ss = Math.floor(newWorkout[field] % 3600 % 60);\n\n            return (\n                <div class={`form-group mb-5 pb-1 border-bottom`}>\n                    <span class='float-right'>\n                        <strong onClick={this.setValue} data-value={insertValue}>{displayValue}</strong>\n                    </span>\n                    <label for={`${field}Input`}>{icon && <i class={`${icon} text-muted`} />} {title}</label>\n                    <div class='form-row'>\n                        <div class='form-group col-3 offset-3'>\n                            <input class={`form-control text-right`} id={`${field}Input`} aria-describedby={`${field}Help`}\n                                onInput={this.onInputDuration}\n                                name={`${field}-hours`}\n                                value={hh}\n                                type='number'\n                                min='0'\n                                max='24'\n                            />\n                        </div>\n                        <div class='form-group col-3'>\n                            <input class={`form-control`} id={`${field}Input`} aria-describedby={`${field}Help`}\n                                onInput={this.onInputDuration}\n                                name={`${field}-minutes`}\n                                value={mi}\n                                type='number'\n                                min='0'\n                                max='59'\n                            />\n                        </div>\n                    </div>\n                    <small id={`${field}Help`} class='form-text text-muted'>{help}</small>\n                </div>\n            );\n        }\n        if (type === 'toggle') {\n            return (\n                <div class={`form-group ${saved[`${field}.${workout.id}`] ? 'is-valid' : ''}`}>\n                    <label for={`${field}Input`}>{icon && <i class={`${icon} text-muted`} />} {title}</label>\n                    <div class='custom-control custom-switch'>\n                        <input type='checkbox'\n                            class='custom-control-input'\n                            id={`${field}Input`}\n                            value={value === 1 ? 0 : 1}\n                            data-id={workout.id}\n                            data-field={field}\n                            onInput={onInput}\n                            checked={value == 1 ? 'checked' : ''}\n                        />\n                        <label class='custom-control-label' for={`${field}Input`} />\n                    </div>\n                    {saved[`${field}.${workout.id}`] ? <div class={`valid-feedback`} style='display: block;'><Text id='workouts.changes-saved'>Endringene er lagret</Text></div> :\n                        <small id={`${field}Help`} class='form-text text-muted'>{help}</small>}\n                </div>\n            );\n        }\n\n        return (\n            <div class={`form-group  mb-5 pb-1 border-bottom ${saved[`${field}.${workout.id}`] ? 'is-valid' : ''}`}>\n                {type === 'date' && <span class='float-right text-muted font-weight-lighter' onClick={this.setDateToNow}>I dag <i class='far fa-check-circle' /></span>}\n                {type === 'time' && <span class='float-right text-muted font-weight-lighter' onClick={this.setTimeToNow}>N <i class='far fa-check-circle' /></span>}\n                {rightValue && <span class='float-right text-muted font-weight-lighter' onClick={this.setRightValue}>{rightValue}</span>}\n\n                <label for={`${field}Input`}>{icon && <i class={`${icon} text-muted`} />} {title}</label>\n                {displayValue && <span class='float-right'>\n                    <strong onClick={this.setValue} data-value={insertValue}>{displayValue}</strong>\n                </span>}\n                <input type={type} class={`form-control ${saved[`${field}.${workout.id}`] ? 'is-valid' : ''}`} id={`${field}Input`} aria-describedby={`${field}Help`}\n                    min={min}\n                    max={maxValue}\n                    step={step}\n                    value={value}\n                    data-id={workout.id}\n                    data-field={field}\n                    data-type={type}\n                    data-elementtype={elementtype}\n                    onInput={onInput}\n                />\n                {saved[`${field}.${workout.id}`] ? <div class={`valid-feedback`} style='display: block;'><Text id='workouts.changes-saved'>Endringene er lagret</Text></div> :\n                    <small id={`${field}Help`} class='form-text text-muted'>{help}</small>}\n            </div>\n        );\n    }\n}\n\n@observer\nclass AdminInfo extends Component {\n    render() {\n\t\tconst { workoutStore } = this.props.stores;\n\t\tconst { workout = {} } = workoutStore;\n\n        const firstPoint = mu.getFirstPoint(workout);\n        const midPoint = mu.getMidPoint(workout, 0.5);\n        const endPoint = mu.getMidPoint(workout, 1);\n\n\t\tconst { tracks = [] } = workout;\n\t\tconst firstTrackPoint = tracks[0];\n\t\tconst lastTrackPoint = tracks[tracks.length - 1];\n\n\t\tlet duration;\n\t\tif (firstTrackPoint && lastTrackPoint) {\n\t\t\tconst startDate = new Date(firstTrackPoint.timestamp);\n\t\t\tconst startTime = startDate.getTime() / 1000;\n\t\t\tconst endDate = new Date(lastTrackPoint.timestamp);\n\t\t\tconst endTime = endDate.getTime() / 1000;\n\t\t\tduration = endTime - startTime;\n\t\t}\n\n        return (\n            <div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3'>\n                <div class='alert alert-warning'>\n                    <h5>Admin info</h5>\n\t\t\t\t\t<xmp>\n                        firstPoint: {firstPoint.join(', ')}<br />\n                        midPoint: {midPoint.join(', ')}<br />\n                        endPoint: {endPoint.join(', ')}<br />\n\t\t\t\t\t\t<br />\n\t\t\t\t\t\tduration: {util.secToHms(workout.duration)}<br />\n\t\t\t\t\t\t<br />\n\t\t\t\t\t\t<strong>Tracking info</strong><br />\n\t\t\t\t\t\tduration: {util.secToHms(duration)}<br />\n\t\t\t\t\t\t<br />\n\t\t\t\t\t</xmp>\n\t\t\t\t\t<div class='d-flex align-content-start flex-wrap'>\n\t\t\t\t\t\t{tracks && tracks.map(t => <span class='ml-1'>\n\t\t\t\t\t\t\t{t.coords.accuracy}\n\t\t\t\t\t\t</span>)}\n\t\t\t\t\t</div>\n\t\t\t\t\t<xmp>\n\t\t\t\t\t\t<br />\n\t\t\t\t\t\tfirstTrackPoint:<br />\n\t\t\t\t\t\t{JSON.stringify(firstTrackPoint, null, 4)}<br />\n\t\t\t\t\t\t<br />\n\t\t\t\t\t\tlastTrackPoint:<br />\n\t\t\t\t\t\t{JSON.stringify(lastTrackPoint, null, 4)}<br />\n\t\t\t\t\t\t<br />\n\t\t\t\t\t</xmp>\n                </div>\n            </div>\n        );\n    }\n}\n\n@observer\nclass WorkoutDetail extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            ...initialState,\n            submenu: props.submenu || 'totals',\n        };\n        this.updateTimer = {};\n\t\tthis.inputRef = {};\n    }\n\n    loadWorkout = async (props = this.props) => {\n\t\tconst { workoutStore } = this.props.stores;\n\t\tconst { showAdminInfo } = this.state;\n\t\tconst addData = ['publicTeams', 'publicUsers'];\n\t\tif (showAdminInfo) {\n\t\t\taddData.push('geocluster');\n\t\t}\n        await workoutStore.load(props.workout, false, { addData });\n\t\tconst { workout } = workoutStore;\n\t\tworkoutStore.plotGeocluster();\n\n\t\t// if (workout.isInProgress > 0) {\n\t\t// \tconst reloadLastEpoch = Math.floor(new Date().getTime() / 1000);\n\t\t// \tthis.setState({\n\t\t// \t\treloadIsActive: true,\n\t\t// \t\treloadLastEpoch,\n\t\t// \t}, () => this.tickReloadTimeer());\n\t\t// \t// Set reload timer\n\t\t// \tthis.updateTimer.reload = setTimeout(async () => {\n\t\t// \t\tconst reloadLastEpoch = Math.floor(new Date().getTime() / 1000);\n\t\t// \t\tthis.setState({ reloadLastEpoch });\n\t\t// \t\tthis.loadWorkout();\n\t\t// \t}, RELOAD_INTERVAL_IN_SEC * 1000);\n\t\t// }\n    }\n\n\ttickReloadTimeer() {\n\t\tconst { reloadIsActive, reloadLastEpoch } = this.state;\n        if (reloadIsActive) {\n\t\t\tconst now = Math.floor(new Date().getTime() / 1000);\n\t\t\tconst reloadInSec = RELOAD_INTERVAL_IN_SEC - (now - reloadLastEpoch);\n\t\t\tthis.setState({ reloadInSec });\n\t\t\tsetTimeout(() => this.tickReloadTimeer(), 1000);\n        }\n\t\treturn false;\n    }\n\n    updateField = (e) => {\n        const { id, field, type, elementtype, isNew } = e.target.dataset;\n        const value = e.target.value;\n        this.updateFieldValue({ id: parseInt(id, 10), field, value, type, elementtype, isNew });\n    }\n\n    updateFieldValue = async ({ id, field, value, datatype, elementtype, type, isNew = false, skipTimer = false }) => {\n        const { workoutStore } = this.props.stores;\n        let newValue = value;\n        let localObjectValue = value;\n        const { workout } = workoutStore;\n        if (field === 'images') {\n            if (Array.isArray(workout.images) && Array.isArray(value)) {\n                localObjectValue = [...workout.images, ...value];\n            }\n        }\n        if (datatype === 'array' && !Array.isArray(value)) {\n            if (elementtype === 'number') {\n                newValue = value.split(',').map(e => parseFloat(e) || e);\n            } else  {\n                newValue = value.split(',');\n            }\n            // console.log('updateFieldValue', id, field, value, datatype, elementtype);\n        }\n        if (isNew) {\n            workoutStore.updateObjectKeyValue('newWorkout', field, value);\n        } else {\n            workoutStore.updateField(id, field, localObjectValue);\n            if (skipTimer) {\n                await this.doUpdateField(id, field, newValue);\n            } else {\n                clearTimeout(this.updateTimer[field]);\n                this.updateTimer[field] = setTimeout(async () => {\n                    this.doUpdateField(id, field, newValue);\n                }, 500);\n            }\n        }\n\n        // GPX update stuff\n        if (field === 'gpx' && workout && util.checkNested(workout, 'gpx', 'gpxInfo')) {\n            const { totalDistance, maxSpeed, avgSpeed, ascent, decent, duration, rest, startLatlng, endLatlng } = workout.gpx.gpxInfo;\n            const updateObject = {};\n            if (duration) {\n                workoutStore.updateField(id, 'duration', duration);\n                updateObject.duration = duration;\n            }\n            if (rest) {\n                workoutStore.updateField(id, 'rest', rest);\n                updateObject.rest = rest;\n            }\n            if (totalDistance) {\n                workoutStore.updateField(id, 'distanceKm', util.roundTo(totalDistance, 10));\n                updateObject.distanceKm = util.roundTo(totalDistance, 10);\n            }\n            if (maxSpeed) {\n                workoutStore.updateField(id, 'speedmax', util.roundTo(maxSpeed, 10));\n                updateObject.speedmax = util.roundTo(maxSpeed, 10);\n            }\n            if (avgSpeed) {\n                workoutStore.updateField(id, 'speedAvg', util.roundTo(avgSpeed, 10));\n                updateObject.speedAvg = util.roundTo(avgSpeed, 10);\n            }\n            if (ascent) {\n                workoutStore.updateField(id, 'elevation', ascent);\n                updateObject.elevation = ascent;\n            }\n            if (decent) {\n                workoutStore.updateField(id, 'decent', decent);\n                updateObject.decent = decent;\n            }\n            if (startLatlng) {\n                workoutStore.updateField(id, 'startLatlng', startLatlng);\n                updateObject.startLatlng = startLatlng;\n            }\n            if (endLatlng) {\n                workoutStore.updateField(id, 'endLatlng', endLatlng);\n                updateObject.endLatlng = endLatlng;\n            }\n            await workoutStore.save(updateObject, workout.id);\n        }\n    }\n\n    async doUpdateField(id, field, value) {\n        const { workoutStore } = this.props.stores;\n        if (id && field) {\n            await workoutStore.saveField(id, field, value);\n        }\n    }\n\n    // loadWorkoutDetail = async ({ workout }) => {\n\t// \tconst { workoutStore } = this.props.stores;\n    //     workoutStore.load(workout.id);\n    // }\n\n\tshowModal = (e) => {\n        e.stopPropagation();\n        e.preventDefault();\n        const img = e.target.dataset.image;\n        const imgXXL = e.target.dataset.imagexxl;\n\t\tconst thumb = e.target.dataset.thumb;\n        const name = e.target.dataset.name;\n        const title = e.target.dataset.title;\n        const date = e.target.dataset.date;\n        this.setState({\n            displayModal: true,\n            currentImage: img,\n            currentImageXXL: imgXXL,\n            thumb,\n            name,\n            title,\n            date,\n        });\n    }\n\n    closeModal = () => {\n        this.setState({\n            displayModal: false,\n        });\n    }\n\n\tdeleteWorkout = async () => {\n\t\tconst { workoutStore } = this.props.stores;\n\t\tconst { workout } = workoutStore;\n        await workoutStore.saveField(workout.id, 'offline', 1);\n\t\tPubSub.publish(topics.STATUS_MESSAGE, {\n\t\t\tmessage: 'Workout was deleted',\n\t\t\ttype: 'success',\n\t\t\ticon: 'fas fa-check',\n\t\t});\n        route(`/workouts/list`);\n\t}\n\n\tduplicateWorkout = async () => {\n\t\tconst { workoutStore } = this.props.stores;\n\t\tconst { workout } = workoutStore;\n\t\tconst response = await workoutStore.duplicateWorkout({ id: workout.id });\n\t\tif (response && response.id) {\n\t\t\tPubSub.publish(topics.STATUS_MESSAGE, {\n\t\t\t\tmessage: 'Workout was duplicated successfully',\n\t\t\t\ttype: 'success',\n\t\t\t\ticon: 'fas fa-check',\n\t\t\t});\n\t\t\troute(`/workouts/${response.id}`);\n\t\t}\n\t}\n\n\tmakeTrack = async () => {\n\t\tconst { workoutStore } = this.props.stores;\n\t\tconst { workout } = workoutStore;\n\t\tconst response = await workoutStore.makeTrackFromWorkout({ id: workout.id });\n\t\tif (response && response.id) {\n\t\t\tPubSub.publish(topics.STATUS_MESSAGE, {\n\t\t\t\tmessage: 'Track was created successfully',\n\t\t\t\ttype: 'success',\n\t\t\t\ticon: 'fas fa-check',\n\t\t\t});\n\t\t\troute(`/tracks/edit/${response.id}`);\n\t\t}\n\t}\n\n\tlikeWorkout = async () => {\n\t\tconst { workoutStore } = this.props.stores;\n\t\tconst { workout } = workoutStore;\n\t\tconst response = await workoutStore.likeWorkout({ id: workout.id });\n\n        if (response && response.status === 200) {\n\t\t\t// this.loadWorkoutDetail({ workout });\n\t\t}\n\t}\n\n\ttoggleAddComment = (e) => {\n\t\tconst workoutId = e.target.parentElement.dataset.id || e.target.dataset.id;\n\t\tconst { showAddComment } = this.state;\n\t\tthis.setState({\n\t\t\tshowAddComment: !showAddComment,\n\t\t}, () => {\n\t\t\tif (this.inputRef[workoutId]) {\n\t\t\t\tthis.inputRef[workoutId].focus();\n\t\t\t}\n\t\t});\n\t}\n\n\ttoggleAdminInfo = () => {\n\t\tconst { userStore } = this.props.stores;\n\t\tconst { isAdmin } = userStore;\n\t\tif (isAdmin) {\n\t\t\tconst { showAdminInfo } = this.state;\n\t\t\tthis.setState({\n\t\t\t\tshowAdminInfo: !showAdminInfo,\n\t\t\t}, () => {\n\t\t\t\tthis.loadWorkout();\n\t\t\t});\n\t\t}\n\t}\n\n\tchooseSubmenu = (e) => {\n\t\tconst submenu = e.target.parentElement.dataset.menu || e.target.dataset.menu;\n\t\tthis.setState({ submenu });\n\t}\n\n\tshowStateDetail = (e) => {\n\t\tconst data = e.target.closest('div').dataset;\n\t\tthis.setState({\n\t\t\tstateDetail: {\n\t\t\t\t...data,\n\t\t\t},\n\t\t});\n\t}\n\n\treimportStravaWorkout = async () => {\n        const { workoutStore } = this.props.stores;\n\t\tconst { workout } = workoutStore;\n\t\tawait workoutStore.reimportStravaWorkout(workout.stravaId, workout.id);\n        this.loadWorkout();\n    }\n\n\treimportGarminWorkout = async () => {\n        const { workoutStore } = this.props.stores;\n\t\tconst { workout } = workoutStore;\n\t\tawait workoutStore.reimportGarminWorkout(workout.garminId, workout.id);\n        this.loadWorkout();\n    }\n\n\treCalculateGpxData = async () => {\n\t\tconst { recalculated } = this.state;\n\t\tif (recalculated) {\n\t\t\treturn true;\n\t\t}\n\t\tconst { workoutStore } = this.props.stores;\n\t\tconst { workout } = workoutStore;\n\t\tthis.setState({ recalculated: true });\n        await workoutStore.reLoad(workout.id);\n    }\n\n\ttoggleMapSize = () => {\n\t\tconst { mapHeight } = this.state;\n\t\tif (mapHeight === initialState.mapHeight) {\n\t\t\tthis.setState({ mapHeight: initialState.mapMaxHeight });\n\t\t} else {\n\t\t\tthis.setState({ mapHeight: initialState.mapHeight });\n\t\t}\n\t}\n\n\tfinishWorkout = async () => {\n\t\tconst { workoutStore } = this.props.stores;\n\t\tawait workoutStore.cordovaSaveTracking();\n\t\tconst { workout } = workoutStore;\n        const updateObject = {\n            isInProgress: 0,\n        };\n        await workoutStore.save(updateObject, workout.id);\n\t\tthis.loadWorkout();\n\t}\n\n\tsendGpxFile = async () => {\n\t\tconst { workoutStore } = this.props.stores;\n\t\tconst { workout } = workoutStore;\n\n\t\tawait workoutStore.sendGpxFile(workout.id);\n\t\tthis.setState({\n\t\t\tgpxFileSent: true,\n\t\t});\n\t}\n\n\tshareLink = (e) => {\n        const { url, title, text } = e.target.closest('button').dataset;\n        const { appState } = this.props.stores;\n        appState.shareUrl({ url, title, text });\n    }\n\n\t// Overlay functions\n    onTeamClick = (e, teamid) => {\n        e.preventDefault();\n        e.stopPropagation();\n        this.setState({\n            showTeam: teamid,\n        });\n        return false;\n    }\n\n    hideTeam = () => {\n        this.setState({\n            showTeam: null,\n        });\n    }\n\n    onUserClick = (e, userid) => {\n        e.preventDefault();\n        e.stopPropagation();\n        return false;\n    }\n\n    onDogClick = (e, dogid, dogs) => {\n        e.preventDefault();\n        e.stopPropagation();\n        this.setState({\n            showDog: dogid,\n            dogs,\n        });\n        return false;\n    }\n\n    hideDog = () => {\n        this.setState({\n            showDog: null,\n        });\n    }\n\n    back = () => {\n        const { history } = this.props.stores;\n        history.goBack();\n    }\n\n    componentDidMount() {\n        this.loadWorkout();\n\t\t// this.addNavigation();\n    }\n\n\tcomponentWillReceiveProps(nextProps) {\n        // console.log('componentWillReceiveProps', nextProps);\n        if (nextProps.workout !== this.props.workout) {\n            this.loadWorkout(nextProps);\n        }\n    }\n\n\tcomponentWillUnmount() {\n\t\tclearTimeout(this.updateTimer.reload);\n\t}\n\n    //     const { workoutStore } = this.props.stores;\n\t// \tworkoutStore.cleanupMemory();\n    // }\n\n\t// // Swipe navigation\n\t// addNavigation = () => {\n\t// \tconsole.log('addNavigation');\n    //     const { appState, workoutStore } = this.props.stores;\n\t// \tappState.setSwipeRight(() => {\n\t// \t\tconsole.log('swipeRight');\n\t// \t\tconst { workoutStore } = this.props.stores;\n\t// \t\tconst { workout } = this.props;\n\t// \t\tconst workoutNavigation = workoutStore.getWorkoutNavigation(parseInt(workout, 10)) || {};\n\t// \t\troute(`/workouts/${workoutNavigation.previous.id}`);\n\t// \t});\n\t// \tappState.setSwipeLeft(() => {\n\t// \t\tconsole.log('swipeLeft');\n\t// \t\tconst { workoutStore } = this.props.stores;\n\t// \t\tconst { workout } = this.props;\n\t// \t\tconst workoutNavigation = workoutStore.getWorkoutNavigation(parseInt(workout, 10)) || {};\n\t// \t\troute(`/workouts/${workoutNavigation.next.id}`);\n\t// \t});\n\t// }\n\n\t// componentWillUnmount() {\n\t// \tconsole.log('removeNavigation');\n\t// \tconst { appState } = this.props.stores;\n\t// \tappState.setSwipeRight();\n\t// \tappState.setSwipeLeft();\n\t// }\n\t// // /Swipe navigation\n\n\trender() {\n\t\tconst { workoutStore, userStore, appState } = this.props.stores;\n\t\tconst { mapColorMode, mapRangeMin, mapRangeMax, isCordova, hasShareApi, viewmode } = appState;\n\t\tconst { user, isAdmin } = userStore;\n\t\tconst { submenu, showAddComment, showAdminInfo, mapHeight, reloadInSec, reloadLastEpoch, stateDetail, gpxFileSent,\n            showTeam,\n            showDog,\n\t\t\trecalculated,\n\t\t} = this.state;\n\t\tconst reloadPercent = Math.floor(util.normalizeBetween(reloadInSec, 0, RELOAD_INTERVAL_IN_SEC, 0, 100));\n\t\tconst { workout, saved, waypoints2 = [], waypoints3 = [] } = workoutStore;\n\t\tconst { likes = [], comments = [] } = workout;\n        const { language = 'en' } = user;\n\t\tconst team = userStore.findTeam(workout.team, true) || {};\n\t\tconst teamAmbition = userStore.findTeamAmbition({ ambition: team.ambitions, language });\n        const teamType = userStore.findTeamType({ type: team.type, language });\n        const workoutType = userStore.findWorkoutType({ type: workout.type, language });\n\t\tconst workoutTypeIcon = userStore.findWorkoutType({ type: workout.type, field: 'icon' });\n\t\tconst track = userStore.findTrack(workout.track);\n\t\tconst workoutEquipment = userStore.findEquipment({ equipment: workout.equipment, language });\n\t\tconst workoutEquipmentIcon = userStore.findEquipment({ equipment: workout.equipment, field: 'icon' });\n\n\t\tconst dogs = userStore.findDogs(workout.dogs);\n\t\tconst mushers = userStore.findMushers(workout.mushers);\n\t\tconst intensity = userStore.findIntensity({ code: workout.intensity, language }) || {};\n\t\tconst workoutNavigation = workoutStore.getWorkoutNavigation(workout.id) || {};\n\t\tconst hasLikedWorkout = workout.likes && workout.likes.findIndex(e => e.user === user.id) > -1;\n\t\tconst { gpxInfo = {}, gpx = { gpxInfo: {} } } = workout;\n\t\tconst { weightedTotalKcal = 0, loadIndex = 0 } = gpxInfo;\n\t\tconst loadMultiplier = loadIndex / 100;\n\t\tconst kcalMultiplier = gpxInfo.totalKcalRelated / 100;\n        const teamNames = workout.teams ? workout.teams.map(e => userStore.findTeam(e)) : [];\n        let batteryUsage;\n        if (workout && workout.gpxInfo && workout.gpxInfo.battegryLevelStart) {\n            batteryUsage = (workout.gpxInfo.battegryLevelStart - workout.gpxInfo.battegryLevelEnd) * 100;\n        }\n\n\t\tconst images = [];\n        if (workout.mapImage) {\n            images.push({\n                ...workout.mapImage,\n                type: 'map',\n            });\n        }\n        if (workout.images) {\n            const imgs = toJS(workout.images);\n            images.push(...imgs);\n        }\n\n\t\tlet showReimport = false;\n\n\t\tconst views = mu.getViews(workout.statistics);\n\n\t\tconst musherImages = [];\n        if (workout.mushers && workout.mushers.length > 1) {\n            workout.mushers.slice(1, 10).map((musher) => {\n\t\t\t\tconst u = userStore.findMusher(musher);\n                if (u && u.images && u.images[0]) {\n                    musherImages.push(u.images[0]);\n                }\n            });\n        }\n\n        let image;\n\t\tif (workout.mushers && workout.mushers[0]) {\n\t\t\tlet firstMusher = userStore.findMusher(workout.mushers[0]);\n\t\t\tif (firstMusher && firstMusher.images && firstMusher.images[0]) {\n\t\t\t\timage = firstMusher.images[0];\n\t\t\t}\n        } else if (team.image && team.image.s3SmallLink) {\n            image = team.image;\n        } else if (team.images && team.images[0] && team.images[0].s3SmallLink) {\n            image = team.images[0];\n        } else if (workout.image && workout.image.s3SmallLink) {\n            image = workout.image;\n        }\n\n\t\treturn (<>\n\n            {showTeam && <Overlay>\n                <TeamsPublicDetail stores={this.props.stores} teamid={showTeam} marginTop={'0px;'} marginBottom={'0px;'} back={this.hideTeam} hideTeam={this.hideTeam} />\n            </Overlay>}\n\n            {showDog && <Overlay>\n                <DogPublicDetail stores={this.props.stores} dogid={showDog} marginTop={'0px;'} marginBottom={'0px;'} back={this.hideDog} dogs={dogs} />\n            </Overlay>}\n\n\t\t\t<div class='container-fluid' style={`margin-bottom: ${MARGIN_BOTTOM}; margin-top: ${MARGIN_TOP};`}>\n                <div class='d-flex justify-content-between mb-2'>\n                    <div>\n\t\t\t\t\t\t<button class='btn btn-link float-left pl-0 fixed-top text-primary'\n                            style={`top: ${MARGIN_TOP_BACK}; left: 5px; font-size: 35px; width: 45px;`}\n\t\t\t\t\t\t\tonClick={this.back}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<i class='fas fa-arrow-circle-left' />\n\t\t\t\t\t\t</button>\n                    </div>\n                    <div>\n                        <h5 class='text-muted'>&nbsp;</h5>\n                    </div>\n                    <div>\n                        {workout.isLocked === 1 ? <>\n\t\t\t\t\t\t\t<i class='fas fa-lock text-danger' style='font-size: 1.5em;' />\n\t\t\t\t\t\t\t{isAdmin && <>\n\t\t\t\t\t\t\t\t<a class='btn btn-primary float-right'\n\t\t\t\t\t\t\t\t\thref={`/workouts/edit/${workout.id}`}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<i class='fas fa-edit' /> <Text id='workouts.admin-edit'>Admin edit</Text>\n\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t</>}\n\t\t\t\t\t\t</> : <>\n\t\t\t\t\t\t\t<a class='btn btn btn-primary float-right mt-1'\n\t\t\t\t\t\t\t\thref={`/workouts/edit/${workout.id}`}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<i class='fas fa-edit' /> <Text id='workouts.edit'>Endre</Text>\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t</>}\n                    </div>\n                </div>\n\n\t\t\t\t<div class='d-flex justify-content-between mb-2'>\n                    <div class='text-muted'>\n\t\t\t\t\t\t{workoutNavigation && workoutNavigation.previous && <a href={`/workouts/${workoutNavigation.previous.id}`} class='text-muted'>\n\t\t\t\t\t\t\t<i class='fas fa-arrow-circle-left' />\n\t\t\t\t\t\t</a>}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class='text-muted'>\n\t\t\t\t\t\t{workoutNavigation.total > 0 && <>\n\t\t\t\t\t\t\t{workoutNavigation.idx + 1} / {workoutNavigation.total}\n\t\t\t\t\t\t</>}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class='text-muted'>\n\t\t\t\t\t\t{workoutNavigation && workoutNavigation.next && <a href={`/workouts/${workoutNavigation.next.id}`} class='text-muted'>\n\t\t\t\t\t\t\t<i class='fas fa-arrow-circle-right' />\n\t\t\t\t\t\t</a>}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class='row'>\n\t\t\t\t\t<div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3'>\n\t\t\t\t\t\t<div class='d-flex mb-2'>\n\t\t\t\t\t\t\t<div class={`position-relative text-center border rounded-circle imageRounded ${getWorkoutColor(workout)}`}\n                                style={`${image ? `background-image: url(\"${image.s3SmallLink}\"); background-size: cover;` : ''} border-width: 3px !important;`}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{!image && <i class={`${getWorkoutIcon(workout)} text-${intensity.class ? intensity.class : 'muted'} mt-3`} style='font-size: 40px;' />}\n\n                                {musherImages && musherImages.map((img, idx) => <>\n                                    <div\n                                        class='position-absolute rounded-circle imageRounded border imageRoundedThumb border-white'\n                                        style={`\n                                            background-image: url(\"${img.s3SmallLink}\");\n                                            background-size: cover;\n                                            bottom: -3px;\n                                            left: ${-5 + (idx * 10)}px;\n                                        `}\n                                    />\n                                </>)}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class='flex-grow-1 pl-3'>\n\t\t\t\t\t\t\t\t<h5 class='my-0'>\n\t\t\t\t\t\t\t\t\t{workout.name}\n\t\t\t\t\t\t\t\t\t{workout.isInProgress > 0 && <>\n\t\t\t\t\t\t\t\t\t\t<span class='position-relative ml-3'>\n\t\t\t\t\t\t\t\t\t\t\t{workout.isInProgress === 1 && <div class='spinner-grow text-success position-absolute' style='top: -5px; left: -6px;' role='status' />}\n\t\t\t\t\t\t\t\t\t\t\t{/* {workout.isInProgress === 2 && <i class='fas fa-stop-circle text-warning position-absolute' style='top: 0px; left: 0px;' />} */}\n\t\t\t\t\t\t\t\t\t\t\t{/* {reloadInSec > 0 && <div class='position-absolute' style='top: -5px; left: -5px;'>\n\t\t\t\t\t\t\t\t\t\t\t\t<Gauge key={`gauge-reload-page`}\n\t\t\t\t\t\t\t\t\t\t\t\t\tcolor='primary'\n\t\t\t\t\t\t\t\t\t\t\t\t\tradius={15}\n\t\t\t\t\t\t\t\t\t\t\t\t\tshowPercentText={false}\n\t\t\t\t\t\t\t\t\t\t\t\t\tpercent={reloadPercent}\n\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t</div>} */}\n\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t<i class='fas fa-stop-circle float-right text-warning' style='font-size: 1.5em; cursor: pointer; pointer-events: inherit;' onClick={this.finishWorkout} />\n\t\t\t\t\t\t\t\t\t</>}\n\n\t\t\t\t\t\t\t\t\t{isCordova && showAdminInfo && isAdmin && <>\n\t\t\t\t\t\t\t\t\t\t<a href={`/workouts/tracking/${workout.id}`} class='ml-4'>\n\t\t\t\t\t\t\t\t\t\t\t<i class='far fa-play-circle' />\n\t\t\t\t\t\t\t\t\t\t\t<Text id='footer.workouts-continue'>Continue</Text>\n\t\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t</>}\n\t\t\t\t\t\t\t\t</h5>\n\t\t\t\t\t\t\t\t{workout.garminId && <div class={`float-right ml-2 text-center border rounded-circle imageRounded imageRoundedIcon`} style={`background-image: url('./assets/garmin-connect.png');`} />}\n\t\t\t\t\t\t\t\t{workout.stravaId && <div class={`float-right ml-2 text-center border rounded-circle imageRounded imageRoundedIcon`} style={`background-image: url('./assets/strava-icon.png');`} />}\n\n\t\t\t\t\t\t\t\t{workout.team && userStore.findTeam(workout.team)}\n\t\t\t\t\t\t\t\t{teamNames && teamNames.length > 0 && <small class='font-weight-lighter'>\n                                    , {teamNames.map((name, idx) => <>{idx > 0 ? ', ' : ''}{name}</>)}\n                                </small>}\n\t\t\t\t\t\t\t\t<br />\n\n\t\t\t\t\t\t\t\t<small class='text-muted'>\n\t\t\t\t\t\t\t\t\t{util.isoDate(workout.date, false, false, false)}\n\t\t\t\t\t\t\t\t</small>\n\t\t\t\t\t\t\t\t{intensity.class && <span class={`badge badge-${intensity.class} ml-2`}>{intensity.name}</span>}\n\t\t\t\t\t\t\t\t{workout.sledWeight > 0 && <small class='ml-3 text-muted'>\n\t\t\t\t\t\t\t\t\t<i class='fas fa-sleigh' /> <Text id='workouts.sledWeight'>Sledevekt</Text>: <Weight stores={this.props.stores} value={workout.sledWeight} />\n\t\t\t\t\t\t\t\t</small>}\n\t\t\t\t\t\t\t\t{batteryUsage > 0 && <small class='text-muted ml-3'><i class='fas fa-battery-three-quarters' /> {util.format(batteryUsage, 1)}% used</small>}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 my-1'>\n\t\t\t\t\t\t{workout.comment && <div class='mb-3'>\n\t\t\t\t\t\t\t<Markdown markdown={mu.replaceImages(workout.comment, workout.images, language)} markdownOpts={mu.getMarkdownOptions()} />\n\t\t\t\t\t\t</div>}\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 my-1'>\n\t\t\t\t\t\t<div class='row'>\n\t\t\t\t\t\t\t<div class='w-100 overflow-hidden'>\n                                <div\n                                    class='d-flex flex-row flex-nowrap pb-2 px-1'\n                                    style='overflow: auto; scroll-snap-type: x mandatory;'\n                                >\n\t\t\t\t\t\t\t\t\t{workout.isInProgress > 0 && <div class='col px-0 pt-2'>\n\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\tclass={`btn btn-block rounded-pill-left rounded-none ${submenu === 'current' ? 'btn-primary' : 'btn-outline-primary'} text-nowrap`}\n\t\t\t\t\t\t\t\t\t\t\tstyle='text-overflow: ellipsis; overflow: hidden;'\n\t\t\t\t\t\t\t\t\t\t\tdata-menu='current'\n\t\t\t\t\t\t\t\t\t\t\tonClick={this.chooseSubmenu}\n\t\t\t\t\t\t\t\t\t\t><i class='fas fa-tachometer-alt' /> <Text id='workouts.current'>Akkurat n</Text></button>\n                                        {submenu === 'current' && <ScrollIntoView horizontal={'center'} vertical={'end'} />}\n\t\t\t\t\t\t\t\t\t</div>}\n\t\t\t\t\t\t\t\t\t<div class='col px-0 pt-2'>\n\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\tclass={`btn btn-block ${workout.isInProgress > 0 ? '' : 'rounded-pill-left'} rounded-none ${submenu === 'totals' ? 'btn-primary' : 'btn-outline-primary'} text-nowrap`}\n\t\t\t\t\t\t\t\t\t\t\tstyle='text-overflow: ellipsis; overflow: hidden;'\n\t\t\t\t\t\t\t\t\t\t\tdata-menu='totals'\n\t\t\t\t\t\t\t\t\t\t\tonClick={this.chooseSubmenu}\n\t\t\t\t\t\t\t\t\t\t><i class='fas fa-tachometer-alt' /> <Text id='workouts.totals'>Totaler</Text></button>\n                                        {submenu === 'totals' && <ScrollIntoView horizontal={'center'} vertical={'end'} />}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div class='col px-0 pt-2'>\n\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\tclass={`btn btn-block rounded-none ${submenu === 'map' ? 'btn-primary' : 'btn-outline-primary'} text-nowrap`}\n\t\t\t\t\t\t\t\t\t\t\tstyle='text-overflow: ellipsis; overflow: hidden;'\n\t\t\t\t\t\t\t\t\t\t\tdata-menu='map'\n\t\t\t\t\t\t\t\t\t\t\tonClick={this.chooseSubmenu}\n\t\t\t\t\t\t\t\t\t\t><i class='fas fa-tachometer-alt' /> <Text id='workouts.map'>Map</Text></button>\n                                        {submenu === 'map' && <ScrollIntoView horizontal={'center'} vertical={'end'} />}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div class='col px-0 pt-2'>\n\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\tclass={`btn btn-block rounded-none ${submenu === 'analysis' ? 'btn-primary' : 'btn-outline-primary'} text-nowrap`}\n\t\t\t\t\t\t\t\t\t\t\tstyle='text-overflow: ellipsis; overflow: hidden;'\n\t\t\t\t\t\t\t\t\t\t\tdata-menu='analysis'\n\t\t\t\t\t\t\t\t\t\t\tonClick={this.chooseSubmenu}\n\t\t\t\t\t\t\t\t\t\t><i class='fas fa-chart-area' /> <Text id='workouts.analysis'>Analyser</Text></button>\n                                        {submenu === 'analysis' && <ScrollIntoView horizontal={'center'} vertical={'end'} />}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div class='col px-0 pt-2'>\n\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\tclass={`btn btn-block rounded-none ${submenu === 'images' ? 'btn-primary' : 'btn-outline-primary'} text-nowrap`}\n\t\t\t\t\t\t\t\t\t\t\tstyle='text-overflow: ellipsis; overflow: hidden;'\n\t\t\t\t\t\t\t\t\t\t\tdata-menu='images'\n\t\t\t\t\t\t\t\t\t\t\tonClick={this.chooseSubmenu}\n\t\t\t\t\t\t\t\t\t\t><i class='fas fa-images' /> <Text id='workouts.images'>Bilder</Text></button>\n                                        {submenu === 'images' && <ScrollIntoView horizontal={'center'} vertical={'end'} />}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div class='col px-0 pt-2'>\n\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\tclass={`btn btn-block rounded-none ${submenu === 'dogs' ? 'btn-primary' : 'btn-outline-primary'} text-nowrap`}\n\t\t\t\t\t\t\t\t\t\t\tstyle='text-overflow: ellipsis; overflow: hidden;'\n\t\t\t\t\t\t\t\t\t\t\tdata-menu='dogs'\n\t\t\t\t\t\t\t\t\t\t\tonClick={this.chooseSubmenu}\n\t\t\t\t\t\t\t\t\t\t><i class='fas fa-dog' /> <Text id='workouts.dogs'>Hunder</Text></button>\n                                        {submenu === 'dogs' && <ScrollIntoView horizontal={'center'} vertical={'end'} />}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div class='col px-0 pt-2'>\n\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\tclass={`btn btn-block rounded-none ${submenu === 'handlers' ? 'btn-primary' : 'btn-outline-primary'} text-nowrap`}\n\t\t\t\t\t\t\t\t\t\t\tstyle='text-overflow: ellipsis; overflow: hidden;'\n\t\t\t\t\t\t\t\t\t\t\tdata-menu='handlers'\n\t\t\t\t\t\t\t\t\t\t\tonClick={this.chooseSubmenu}\n\t\t\t\t\t\t\t\t\t\t><i class='fas fa-user' /> <Text id='workouts.handlers'>Handlere</Text></button>\n                                        {submenu === 'handlers' && <ScrollIntoView horizontal={'center'} vertical={'end'} />}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div class='col px-0 pt-2'>\n\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\tclass={`btn btn-block rounded-none ${submenu === 'gpx' ? 'btn-primary' : 'btn-outline-primary'} text-nowrap`}\n\t\t\t\t\t\t\t\t\t\t\tstyle='text-overflow: ellipsis; overflow: hidden;'\n\t\t\t\t\t\t\t\t\t\t\tdata-menu='gpx'\n\t\t\t\t\t\t\t\t\t\t\tonClick={this.chooseSubmenu}\n\t\t\t\t\t\t\t\t\t\t><i class='fas fa-user' /> <Text id='workouts.gpx'>GPX</Text></button>\n                                        {submenu === 'gpx' && <ScrollIntoView horizontal={'center'} vertical={'end'} />}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div class='col px-0 pt-2'>\n\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\tclass={`btn btn-block rounded-pill-right rounded-none ${submenu === 'advanced' ? 'btn-primary' : 'btn-outline-primary'} text-nowrap`}\n\t\t\t\t\t\t\t\t\t\t\tstyle='text-overflow: ellipsis; overflow: hidden;'\n\t\t\t\t\t\t\t\t\t\t\tdata-menu='advanced'\n\t\t\t\t\t\t\t\t\t\t\tonClick={this.chooseSubmenu}\n\t\t\t\t\t\t\t\t\t\t><i class='fas fa-cogs' /> <Text id='workouts.advanced'>advanced</Text></button>\n                                        {submenu === 'advanced' && <ScrollIntoView horizontal={'center'} vertical={'end'} />}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 my-3'>\n\t\t\t\t\t\t{isAdmin && <>\n\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\tclass='btn btn-link btn-block'\n\t\t\t\t\t\t\t\tonClick={this.toggleAdminInfo}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\tShow admin details\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t</>}\n\t\t\t\t\t</div>\n\n\t\t\t\t\t{submenu === 'map' && <>\n\t\t\t\t\t\t<div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 my-3'>\n\t\t\t\t\t\t\t{workout && workout.gpx && <>\n\t\t\t\t\t\t\t\t<button class='btn btn-sm btn-link float-right' onClick={this.toggleMapSize}>\n\t\t\t\t\t\t\t\t\tToggle map size\n\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t<div class='clearfix'>\n\t\t\t\t\t\t\t\t\t<div class='' style={`height: ${mapHeight + 40}px;`}>\n\t\t\t\t\t\t\t\t\t\t<Map\n\t\t\t\t\t\t\t\t\t\t\tstores={this.props.stores}\n\t\t\t\t\t\t\t\t\t\t\tmapId={`${workout.id}-${mapHeight}`}\n\t\t\t\t\t\t\t\t\t\t\tgeojson={workout.gpx.geoJSON}\n\t\t\t\t\t\t\t\t\t\t\tskipGeojson={false}\n\t\t\t\t\t\t\t\t\t\t\tgpxInfo={workout.gpxInfo}\n\t\t\t\t\t\t\t\t\t\t\theight={mapHeight}\n\t\t\t\t\t\t\t\t\t\t\tmapColorMode={mapColorMode}\n\t\t\t\t\t\t\t\t\t\t\tmapRangeMin={mapRangeMin}\n\t\t\t\t\t\t\t\t\t\t\tmapRangeMax={mapRangeMax}\n\t\t\t\t\t\t\t\t\t\t\tkey={`workout-map-${reloadLastEpoch}`}\n\t\t\t\t\t\t\t\t\t\t\twaypoints2={waypoints2}\n\t\t\t\t\t\t\t\t\t\t\twaypoints3={waypoints3}\n\t\t\t\t\t\t\t\t\t\t\tfullscreenMap={true}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</>}\n\t\t\t\t\t\t\t{track && track.gpx && !(workout && workout.gpx) && <>\n\t\t\t\t\t\t\t\t<div class='clearfix' style={`height: ${mapHeight}px;`}>\n\t\t\t\t\t\t\t\t\t<Map\n\t\t\t\t\t\t\t\t\t\tstores={this.props.stores}\n\t\t\t\t\t\t\t\t\t\tmapId={`${track.id}-${mapHeight}`}\n\t\t\t\t\t\t\t\t\t\tgeojson={track.gpx.geoJSON}\n\t\t\t\t\t\t\t\t\t\tskipGeojson={false}\n\t\t\t\t\t\t\t\t\t\tgpxInfo={track.gpx.gpxInfo}\n\t\t\t\t\t\t\t\t\t\theight={mapHeight}\n\t\t\t\t\t\t\t\t\t\tmapColorMode={mapColorMode}\n\t\t\t\t\t\t\t\t\t\tmapRangeMin={mapRangeMin}\n\t\t\t\t\t\t\t\t\t\tmapRangeMax={mapRangeMax}\n\t\t\t\t\t\t\t\t\t\tkey={`workout-map-${reloadLastEpoch}`}\n\t                                    fullscreenMap={true}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</>}\n\n\t\t\t\t\t\t\t<div class='text-center'>\n\t\t\t\t\t\t\t\t<small class='text-muted'>\n\t\t\t\t\t\t\t\t\t{workout.weather}\n\t\t\t\t\t\t\t\t\t{!workout.weather && <>\n\t\t\t\t\t\t\t\t\t\t{util.format(workout.temperature, 1)}C\n\t\t\t\t\t\t\t\t\t</>}\n\t\t\t\t\t\t\t\t</small>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</>}\n\n\t\t\t\t\t{submenu === 'current' && <>\n\t\t\t\t\t\t<div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3'>\n\t\t\t\t\t\t\t<div class='row mt-2'>\n\t\t\t\t\t\t\t\t<div class='col text-center' style='line-height: 1.0em;'>\n\t\t\t\t\t\t\t\t\t<small class='text-muted'><i class='fas fa-clock ml-2' /> <Text id='workouts.duration'>Vargihet</Text></small>\n\t\t\t\t\t\t\t\t\t<h3>\n\t\t\t\t\t\t\t\t\t\t{util.secToHms(workout.duration)}\n\t\t\t\t\t\t\t\t\t</h3>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class='col text-center' style='line-height: 1.0em;'>\n\t\t\t\t\t\t\t\t\t<small class='text-muted'><i class='fas fa-clock ml-2' /> <Text id='workouts.rest'>Hvile</Text></small>\n\t\t\t\t\t\t\t\t\t<h3 class='text-muted'>\n\t\t\t\t\t\t\t\t\t\t{util.secToHms(workout.rest)}\n\t\t\t\t\t\t\t\t\t</h3>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class='row mt-2'>\n\t\t\t\t\t\t\t\t<div class='col text-center' style='line-height: 1.0em;'>\n\t\t\t\t\t\t\t\t\t<small class='text-muted'><i class='fas fa-tachometer-alt ml-2' /> <Text id='workouts.avgspeed'>Gj.fart</Text></small>\n\t\t\t\t\t\t\t\t\t<h3>\n\t\t\t\t\t\t\t\t\t\t<Speed stores={this.props.stores} value={workout.speedAvg} />\n\t\t\t\t\t\t\t\t\t</h3>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class='col text-center' style='line-height: 1.0em;'>\n\t\t\t\t\t\t\t\t\t<small class='text-muted'><i class='fas fa-tachometer-alt ml-2' /> <Text id='workouts.currentspeed'>Fart</Text></small>\n\t\t\t\t\t\t\t\t\t<h3>\n\t\t\t\t\t\t\t\t\t\t<Speed stores={this.props.stores} value={workout.currentSpeed} />\n\t\t\t\t\t\t\t\t\t</h3>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class='row mt-2'>\n\t\t\t\t\t\t\t\t<div class='col  text-center' style='line-height: 1.0em;'>\n\t\t\t\t\t\t\t\t\t<small class='text-muted'><i class='fas fa-road ml-2' /> <Text id='workouts.distance'>Distanse</Text></small>\n\t\t\t\t\t\t\t\t\t<h3>\n\t\t\t\t\t\t\t\t\t\t<Distance stores={this.props.stores} value={workout.distanceKm} />\n\t\t\t\t\t\t\t\t\t</h3>\n\t\t\t\t\t\t\t\t\t{gpxInfo.calculatedTotalDistance > 0 && Math.abs(workout.distanceKm - gpxInfo.calculatedTotalDistance) > 1 && <small class='text-muted' style='line-height: 0.8em;'>\n\t\t\t\t\t\t\t\t\t\t<Text id='workouts.kcal-calculated'>Beregnet:</Text> {util.format(gpxInfo.calculatedTotalDistance, 1)} km <br />\n\t\t\t\t\t\t\t\t\t</small>}\n\t\t\t\t\t\t\t\t\t{isAdmin && showAdminInfo && gpxInfo.calculatedTotalDistance > 0 && <small class='text-danger' style='line-height: 0.8em;'>\n\t\t\t\t\t\t\t\t\t\tgpxInfo.calculatedTotalDistance: {util.format(gpxInfo.calculatedTotalDistance, 2)} km <br />\n\t\t\t\t\t\t\t\t\t</small>}\n\t\t\t\t\t\t\t\t\t{isAdmin && showAdminInfo && gpx.gpxInfo && gpx.gpxInfo.totalDistance > 0 && <small class='text-danger' style='line-height: 0.8em;'>\n\t\t\t\t\t\t\t\t\t\tgpx.gpxInfo.totalDistance: {util.format(gpx.gpxInfo.totalDistance, 2)} km <br />\n\t\t\t\t\t\t\t\t\t</small>}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class='col  text-center' style='line-height: 1.0em;'>\n\t\t\t\t\t\t\t\t\t<small class='text-muted'><i class='fas fa-mountain ml-2' /> <Text id='workouts.ascend'>Stigning</Text></small>\n\t\t\t\t\t\t\t\t\t<h3>\n\t\t\t\t\t\t\t\t\t\t<Elevation stores={this.props.stores} value={workout.elevation} />\n\t\t\t\t\t\t\t\t\t</h3>\n\t\t\t\t\t\t\t\t\t{gpxInfo.calculatedAscend > 0 && Math.abs(workout.elevation - gpxInfo.calculatedAscend) > 50 && <small class='text-muted' style='line-height: 0.8em;'>\n\t\t\t\t\t\t\t\t\t\t<Text id='workouts.kcal-calculated'>Beregnet:</Text> {util.format(gpxInfo.calculatedAscend, 0)} m <br />\n\t\t\t\t\t\t\t\t\t</small>}\n\t\t\t\t\t\t\t\t\t{isAdmin && showAdminInfo && gpxInfo.calculatedAscend > 0 && <small class='text-danger' style='line-height: 0.8em;'>\n\t\t\t\t\t\t\t\t\t\tgpxInfo.calculatedAscend: {util.format(gpxInfo.calculatedAscend, 0)} m <br />\n\t\t\t\t\t\t\t\t\t</small>}\n\t\t\t\t\t\t\t\t\t{isAdmin && showAdminInfo && gpxInfo.calculatedDescend > 0 && <small class='text-danger' style='line-height: 0.8em;'>\n\t\t\t\t\t\t\t\t\t\tgpxInfo.calculatedDescend: {util.format(gpxInfo.calculatedDescend, 0)} m <br />\n\t\t\t\t\t\t\t\t\t</small>}\n\t\t\t\t\t\t\t\t\t{isAdmin && showAdminInfo && gpx.gpxInfo && gpx.gpxInfo.ascent > 0 && <small class='text-danger' style='line-height: 0.8em;'>\n\t\t\t\t\t\t\t\t\t\tgpx.gpxInfo.ascent: {util.format(gpx.gpxInfo.ascent, 0)} m <br />\n\t\t\t\t\t\t\t\t\t</small>}\n\t\t\t\t\t\t\t\t\t{isAdmin && showAdminInfo && gpx.gpxInfo && gpx.gpxInfo.descent > 0 && <small class='text-danger' style='line-height: 0.8em;'>\n\t\t\t\t\t\t\t\t\t\tgpx.gpxInfo.descent: {util.format(gpx.gpxInfo.descent, 0)} m <br />\n\t\t\t\t\t\t\t\t\t</small>}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class='col-12'>\n\t\t\t\t\t\t\t<Ad stores={this.props.stores} url={this.props.url} section={submenu} />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</>}\n\n\t\t\t\t\t{submenu === 'totals' && <>\n\t\t\t\t\t\t<div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3'>\n\t\t\t\t\t\t\t{isAdmin && showAdminInfo && <div class='row mt-2'>\n\t\t\t\t\t\t\t\t<div class='col text-center' style='line-height: 1.0em;'>\n\t\t\t\t\t\t\t\t\t<small class='text-muted'><i class='fas fa-user-shield ml-2' /> <Text id='workouts.admin-info'>Admin info</Text></small>\n\t\t\t\t\t\t\t\t\t<h3>Admin</h3>\n\t\t\t\t\t\t\t\t\t{isAdmin && showAdminInfo && gpx.gpxInfo && gpx.gpxInfo.startTime > 0 && <small class='text-danger' style='line-height: 0.8em;'>\n\t\t\t\t\t\t\t\t\t\tgpx.gpxInfo.startTime: {util.isoDate(gpx.gpxInfo.startTime)} <br />\n\t\t\t\t\t\t\t\t\t\tgpx.gpxInfo.endTime: {util.isoDate(gpx.gpxInfo.endTime)} <br />\n\t\t\t\t\t\t\t\t\t</small>}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>}\n\t\t\t\t\t\t\t<div class='row mt-2'>\n\t\t\t\t\t\t\t\t<div class='col text-center' style='line-height: 1.0em;'>\n\t\t\t\t\t\t\t\t\t<small class='text-muted'><i class='fas fa-clock ml-2' /> <Text id='workouts.duration'>Vargihet</Text></small>\n\t\t\t\t\t\t\t\t\t<h3>\n\t\t\t\t\t\t\t\t\t\t{util.secToHms(workout.duration)}\n\t\t\t\t\t\t\t\t\t</h3>\n\t\t\t\t\t\t\t\t\t{isAdmin && showAdminInfo && gpxInfo.minEpoch > 0 && gpxInfo.maxEpoch > 0 && <small class='text-danger' style='line-height: 0.8em;'>\n\t\t\t\t\t\t\t\t\t\tgpxInfo.maxEpoch-minEpoch: {util.secToHms(gpxInfo.maxEpoch - gpxInfo.minEpoch)} <br />\n\t\t\t\t\t\t\t\t\t</small>}\n\t\t\t\t\t\t\t\t\t{isAdmin && showAdminInfo && gpxInfo.duration > 0 && <small class='text-danger' style='line-height: 0.8em;'>\n\t\t\t\t\t\t\t\t\t\tgpxInfo.duration: {util.secToHms(gpxInfo.duration)} <br />\n\t\t\t\t\t\t\t\t\t</small>}\n\t\t\t\t\t\t\t\t\t{isAdmin && showAdminInfo && gpx.gpxInfo && gpx.gpxInfo.endTime > 0 && gpx.gpxInfo.startTime > 0 && <small class='text-danger' style='line-height: 0.8em;'>\n\t\t\t\t\t\t\t\t\t\tgpx.gpxInfo.endTime-startTime: {util.secToHms((gpx.gpxInfo.endTime - gpx.gpxInfo.startTime) / 1000)} <br />\n\t\t\t\t\t\t\t\t\t</small>}\n\t\t\t\t\t\t\t\t\t{isAdmin && showAdminInfo && gpx.gpxInfo && gpx.gpxInfo.duration > 0 && <small class='text-danger' style='line-height: 0.8em;'>\n\t\t\t\t\t\t\t\t\t\tgpx.gpxInfo.duration: {util.secToHms(gpx.gpxInfo.duration)} <br />\n\t\t\t\t\t\t\t\t\t</small>}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class='col text-center' style='line-height: 1.0em;'>\n\t\t\t\t\t\t\t\t\t<small class='text-muted'><i class='fas fa-clock ml-2' /> <Text id='workouts.rest'>Hvile</Text></small>\n\t\t\t\t\t\t\t\t\t<h3 class='text-muted'>\n\t\t\t\t\t\t\t\t\t\t{util.secToHms(workout.rest)}\n\t\t\t\t\t\t\t\t\t</h3>\n\t\t\t\t\t\t\t\t\t{isAdmin && showAdminInfo && gpxInfo.minEpoch > 0 && gpxInfo.maxEpoch > 0 && <small class='text-danger' style='line-height: 0.8em;'>\n\t\t\t\t\t\t\t\t\t\tgpxInfo.maxEpoch-minEpoch: {util.secToHms(gpxInfo.rest)} <br />\n\t\t\t\t\t\t\t\t\t</small>}\n\t\t\t\t\t\t\t\t\t{isAdmin && showAdminInfo && gpxInfo.rest > 0 && <small class='text-danger' style='line-height: 0.8em;'>\n\t\t\t\t\t\t\t\t\t\tgpxInfo.rest: {util.secToHms(gpxInfo.rest)} <br />\n\t\t\t\t\t\t\t\t\t</small>}\n\t\t\t\t\t\t\t\t\t{isAdmin && showAdminInfo && gpx.gpxInfo && gpx.gpxInfo.rest > 0 && <small class='text-danger' style='line-height: 0.8em;'>\n\t\t\t\t\t\t\t\t\t\tgpx.gpxInfo.rest: {util.secToHms(gpx.gpxInfo.rest)} <br />\n\t\t\t\t\t\t\t\t\t</small>}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class='row mt-2'>\n\t\t\t\t\t\t\t\t<div class='col text-center' style='line-height: 1.0em;'>\n\t\t\t\t\t\t\t\t\t<small class='text-muted'><i class='fas fa-tachometer-alt ml-2' /> <Text id='workouts.avgspeed'>Gj.fart</Text></small>\n\t\t\t\t\t\t\t\t\t<h3>\n\t\t\t\t\t\t\t\t\t\t{/* {gpxInfo && gpxInfo.avgGpsMovingSpeed > 0 ? <>\n\t\t\t\t\t\t\t\t\t\t\t<Speed stores={this.props.stores} value={gpxInfo.avgMovingSpeeds * 3.6} />\n\t\t\t\t\t\t\t\t\t\t</> : <> */}\n\t\t\t\t\t\t\t\t\t\t<Speed stores={this.props.stores} value={workout.speedAvg} />\n\t\t\t\t\t\t\t\t\t\t{/* </>} */}\n\t\t\t\t\t\t\t\t\t</h3>\n\t\t\t\t\t\t\t\t\t{/* avgGpsMovingSpeed */}\n\t\t\t\t\t\t\t\t\t{isAdmin && showAdminInfo && gpxInfo.avgMovingSpeeds > 0 && <small class='text-danger' style='line-height: 0.8em;'>\n\t\t\t\t\t\t\t\t\t\tgpxInfo.avgMovingSpeeds {util.format(gpxInfo.avgMovingSpeeds * 3.6, 2)} km/t <br />\n\t\t\t\t\t\t\t\t\t</small>}\n\t\t\t\t\t\t\t\t\t{isAdmin && showAdminInfo && gpxInfo.avgGpsSpeed > 0 && <small class='text-danger' style='line-height: 0.8em;'>\n\t\t\t\t\t\t\t\t\t\tgpxInfo.avgGpsSpeed {util.format(gpxInfo.avgGpsSpeed * 3.6, 2)} km/t <br />\n\t\t\t\t\t\t\t\t\t</small>}\n\t\t\t\t\t\t\t\t\t{isAdmin && showAdminInfo && gpxInfo.avgGpsMovingSpeed > 0 && <small class='text-danger' style='line-height: 0.8em;'>\n\t\t\t\t\t\t\t\t\t\tgpxInfo.avgGpsMovingSpeed {util.format(gpxInfo.avgGpsMovingSpeed * 3.6, 2)} km/t <br />\n\t\t\t\t\t\t\t\t\t</small>}\n\t\t\t\t\t\t\t\t\t{isAdmin && showAdminInfo && gpx.gpxInfo && gpx.gpxInfo.avgSpeed > 0 && <small class='text-danger' style='line-height: 0.8em;'>\n\t\t\t\t\t\t\t\t\t\tgpx.gpxInfo.avgSpeed {util.format(gpx.gpxInfo.avgSpeed * 3.6, 2)} km/t <br />\n\t\t\t\t\t\t\t\t\t</small>}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class='col text-center' style='line-height: 1.0em;'>\n\t\t\t\t\t\t\t\t\t<small class='text-muted'><i class={`${workoutTypeIcon}`} /> <Text id='workouts.type'>Type</Text></small>\n\t\t\t\t\t\t\t\t\t<h3>\n\t\t\t\t\t\t\t\t\t\t {workoutType}\n\t\t\t\t\t\t\t\t\t</h3>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class='row mt-2'>\n\t\t\t\t\t\t\t\t<div class='col text-center' style='line-height: 1.0em;'>\n\t\t\t\t\t\t\t\t\t<small class='text-muted'><i class={`${workoutEquipmentIcon}`} /> <Text id='workouts.equipment'>Utstyr</Text></small>\n\t\t\t\t\t\t\t\t\t<h3>\n\t\t\t\t\t\t\t\t\t\t{workoutEquipment}\n\t\t\t\t\t\t\t\t\t</h3>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class='col text-center' style='line-height: 1.0em;'>\n\t\t\t\t\t\t\t\t\t<small class='text-muted'><i class='fas fa-dog ml-2' /> <Text id='workouts.dogs'>Hunder</Text></small>\n\t\t\t\t\t\t\t\t\t<h3>\n\t\t\t\t\t\t\t\t\t\t{workout.dogs && <span>{workout.dogs.length}</span>}\n\t\t\t\t\t\t\t\t\t</h3>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class='row mt-2'>\n\t\t\t\t\t\t\t\t<div class='col  text-center' style='line-height: 1.0em;'>\n\t\t\t\t\t\t\t\t\t<small class='text-muted'><i class='fas fa-road ml-2' /> <Text id='workouts.distance'>Distanse</Text></small>\n\t\t\t\t\t\t\t\t\t<h3>\n\t\t\t\t\t\t\t\t\t\t<Distance stores={this.props.stores} value={workout.distanceKm} />\n\t\t\t\t\t\t\t\t\t</h3>\n\t\t\t\t\t\t\t\t\t{gpxInfo.calculatedTotalDistance > 0 && Math.abs(workout.distanceKm - gpxInfo.calculatedTotalDistance) > 1 && <small class='text-muted' style='line-height: 0.8em;'>\n\t\t\t\t\t\t\t\t\t\t<Text id='workouts.kcal-calculated'>Beregnet:</Text> {util.format(gpxInfo.calculatedTotalDistance, 1)} km <br />\n\t\t\t\t\t\t\t\t\t</small>}\n\t\t\t\t\t\t\t\t\t{isAdmin && showAdminInfo && gpxInfo.calculatedTotalDistance > 0 && <small class='text-danger' style='line-height: 0.8em;'>\n\t\t\t\t\t\t\t\t\t\tgpxInfo.calculatedTotalDistance: {util.format(gpxInfo.calculatedTotalDistance, 2)} km <br />\n\t\t\t\t\t\t\t\t\t</small>}\n\t\t\t\t\t\t\t\t\t{isAdmin && showAdminInfo && gpx.gpxInfo && gpx.gpxInfo.totalDistance > 0 && <small class='text-danger' style='line-height: 0.8em;'>\n\t\t\t\t\t\t\t\t\t\tgpx.gpxInfo.totalDistance: {util.format(gpx.gpxInfo.totalDistance, 2)} km <br />\n\t\t\t\t\t\t\t\t\t</small>}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class='col  text-center' style='line-height: 1.0em;'>\n\t\t\t\t\t\t\t\t\t<small class='text-muted'><i class='fas fa-mountain ml-2' /> <Text id='workouts.ascend'>Stigning</Text></small>\n\t\t\t\t\t\t\t\t\t<h3>\n\t\t\t\t                        <Elevation stores={this.props.stores} value={workout.elevation} />\n\t\t\t\t\t\t\t\t\t</h3>\n\t\t\t\t\t\t\t\t\t{gpxInfo.calculatedAscend > 0 && Math.abs(workout.elevation - gpxInfo.calculatedAscend) > 50 && <small class='text-muted' style='line-height: 0.8em;'>\n\t\t\t\t\t\t\t\t\t\t<Text id='workouts.kcal-calculated'>Beregnet:</Text> {util.format(gpxInfo.calculatedAscend, 0)} m <br />\n\t\t\t\t\t\t\t\t\t</small>}\n\t\t\t\t\t\t\t\t\t{isAdmin && showAdminInfo && gpxInfo.calculatedAscend > 0 && <small class='text-danger' style='line-height: 0.8em;'>\n\t\t\t\t\t\t\t\t\t\tgpxInfo.calculatedAscend: {util.format(gpxInfo.calculatedAscend, 0)} m <br />\n\t\t\t\t\t\t\t\t\t</small>}\n\t\t\t\t\t\t\t\t\t{isAdmin && showAdminInfo && gpxInfo.calculatedDescend > 0 && <small class='text-danger' style='line-height: 0.8em;'>\n\t\t\t\t\t\t\t\t\t\tgpxInfo.calculatedDescend: {util.format(gpxInfo.calculatedDescend, 0)} m <br />\n\t\t\t\t\t\t\t\t\t</small>}\n\t\t\t\t\t\t\t\t\t{isAdmin && showAdminInfo && gpx.gpxInfo && gpx.gpxInfo.ascent > 0 && <small class='text-danger' style='line-height: 0.8em;'>\n\t\t\t\t\t\t\t\t\t\tgpx.gpxInfo.ascent: {util.format(gpx.gpxInfo.ascent, 0)} m <br />\n\t\t\t\t\t\t\t\t\t</small>}\n\t\t\t\t\t\t\t\t\t{isAdmin && showAdminInfo && gpx.gpxInfo && gpx.gpxInfo.descent > 0 && <small class='text-danger' style='line-height: 0.8em;'>\n\t\t\t\t\t\t\t\t\t\tgpx.gpxInfo.descent: {util.format(gpx.gpxInfo.descent, 0)} m <br />\n\t\t\t\t\t\t\t\t\t</small>}\n\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class='row mt-2'>\n\t\t\t\t\t\t\t\t<div class='col text-center' style='line-height: 1.0em;'>\n\t\t\t\t\t\t\t\t\t{workout.isLocked === 1 ? <>\n\t\t\t\t\t\t\t\t\t\t<i class='fas fa-lock text-danger' style='font-size: 1.5em;' />\n\t\t\t\t\t\t\t\t\t</> : <>\n\t\t\t\t\t\t\t\t\t\t{workout.stravaId && !gpxInfo.reimported && <button class='btn btn-sm btn-link text-muted'\n\t\t\t\t\t\t\t\t\t\t\tstyle='font-size: 0.8em;'\n\t\t\t\t\t\t\t\t\t\t\tonClick={this.reimportStravaWorkout}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t{showReimport = true}\n\t\t\t\t\t\t\t\t\t\t\t<i class='fas fa-sync' /> Reimport Strava data\n\t\t\t\t\t\t\t\t\t\t</button>}\n\t\t\t\t\t\t\t\t\t\t{workout.garminId && !gpxInfo.reimported && <button class='btn btn-sm btn-link text-muted'\n\t\t\t\t\t\t\t\t\t\t\tstyle='font-size: 0.8em;'\n\t\t\t\t\t\t\t\t\t\t\tonClick={this.reimportGarminWorkout}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t{showReimport = true}\n\t\t\t\t\t\t\t\t\t\t\t<i class='fas fa-sync' /> Reimport Garmin data\n\t\t\t\t\t\t\t\t\t\t</button>}\n\t\t\t\t\t\t\t\t\t\t{(isAdmin || !showReimport) && <button class={`btn btn-sm btn-link text-muted`}\n\t\t\t\t\t\t\t\t\t\t\tstyle='font-size: 0.8em;'\n\t\t\t\t\t\t\t\t\t\t\tonClick={this.reCalculateGpxData}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t<i class='fas fa-sync' /> Recalculate GPX data\n\t\t\t\t\t\t\t\t\t\t</button>}\n\t\t\t\t\t\t\t\t\t</>}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<States stores={this.props.stores} states={gpxInfo.states} duration={workout.duration} />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class='col-12'>\n\t\t\t\t\t\t\t<Ad stores={this.props.stores} url={this.props.url} section={submenu} />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</>}\n\n\t\t\t\t\t{submenu === 'analysis' && <>\n\t\t\t\t\t\t<div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3'>\n\t\t\t\t\t\t\t{(util.checkNested(workout, 'gpxInfo', 'elevations') || util.checkNested(workout, 'gpx', 'gpxInfo', 'elevations')) ? <>\n\t\t\t\t\t\t\t\t<WorkoutInfoGraph stores={this.props.stores} key={`workout-elevation-${workout.id}`} />\n\t\t\t\t\t\t\t</> : <>\n\t\t\t\t\t\t\t\t<div class='text-center text-muted'>\n\t\t\t\t\t\t\t\t\t<div class='display-1'>\n\t\t\t\t\t\t\t\t\t\t<i class='fas fa-chart-area' />\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<h3 class='font-weight-lighter'>\n\t\t\t\t\t\t\t\t\t\t<Text id='workout.no-elevation-data'>No elevation data. If you use a GPS to track your workouts you will get a nice graph here and more correct analysis of the energy usage.</Text>\n\t\t\t\t\t\t\t\t\t</h3>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</>}\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t<div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3'>\n\t\t\t\t\t\t\t{loadIndex > 0 && <div class='row mt-4'>\n\t\t\t\t\t\t\t\t<div class='col text-center'>\n\t\t\t\t\t\t\t\t\t<h5 onClick={this.toggleAdminInfo}>\n\t\t\t\t\t\t\t\t\t\t<Text id='workouts.load-index'>Belastningsindex</Text>\n\t\t\t\t\t\t\t\t\t</h5>\n\t\t\t\t\t\t\t\t\t<Gauge key={`gauge-${loadIndex}`}\n\t\t\t\t\t\t\t\t\t\tradius={100}\n\t\t\t\t\t\t\t\t\t\tshowPercentText={true}\n\t\t\t\t\t\t\t\t\t\tcolor={mu.getLoadIndexColor(util.normalizeBetween(loadIndex, 0, MAX_LOADINDEX, 0, 100))}\n\t\t\t\t\t\t\t\t\t\tpercent={Math.floor(util.normalizeBetween(loadIndex, 0, MAX_LOADINDEX, 0, 100))}\n\t\t\t\t\t\t\t\t\t\tcompleted={mu.getLoadIndexText(util.normalizeBetween(loadIndex, 0, MAX_LOADINDEX, 0, 100))}\n\t\t\t\t\t\t\t\t\t\tprefix=''\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\t{teamType && <a href={`/settings/team/${workout.team}`}><span class='badge badge-pill badge-secondary'>{teamType}</span></a>}\n\t\t\t\t\t\t\t\t\t\t{teamAmbition && <a href={`/settings/team/${workout.team}`}><span class='badge badge-pill badge-secondary ml-2'>{teamAmbition}</span></a>}<br />\n\t\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t\t{workout.stravaId && !gpxInfo.reimported && <button class='btn btn-sm btn-link text-muted'\n\t\t\t\t\t\t\t\t\t\tstyle='font-size: 0.8em;'\n\t\t\t\t\t\t\t\t\t\tonClick={this.reimportStravaWorkout}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<i class='fas fa-sync' /> <Text id='workouts.reimport-strava'>Reimport Strava data</Text>\n\t\t\t\t\t\t\t\t\t</button>}\n\t\t\t\t\t\t\t\t\t{workout.garminId && !gpxInfo.reimported && <button class='btn btn-sm btn-link text-muted'\n\t\t\t\t\t\t\t\t\t\tstyle='font-size: 0.8em;'\n\t\t\t\t\t\t\t\t\t\tonClick={this.reimportGarminWorkout}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<i class='fas fa-sync' /> <Text id='workouts.reimport-garmin'>Reimport Garmin data</Text>\n\t\t\t\t\t\t\t\t\t</button>}\n\n\t\t\t\t\t\t\t\t\t{isAdmin && showAdminInfo && <div>\n\t\t\t\t\t\t\t\t\t\t<small>\n\t\t\t\t\t\t\t\t\t\t\t<span class='badge badge-secondary mr-2'>loadIndex: {gpxInfo.loadIndex}</span>\n\t\t\t\t\t\t\t\t\t\t\t<span class='badge badge-secondary mr-2'>Max loadIndex: {MAX_LOADINDEX}</span>\n\t\t\t\t\t\t\t\t\t\t\t<span class='badge badge-secondary mr-2'>totalKcalRelated: {util.format(gpxInfo.totalKcalRelated, 1)}</span>\n\t\t\t\t\t\t\t\t\t\t\t<span class='badge badge-secondary mr-2'>typeFactor: {gpxInfo.typeFactor}</span>\n\t\t\t\t\t\t\t\t\t\t\t<span class='badge badge-secondary mr-2'>ambitionFactor: {gpxInfo.ambitionFactor}</span>\n\t\t\t\t\t\t\t\t\t\t\t<span class='badge badge-secondary mr-2'>normalSpeed: {gpxInfo.normalSpeed}</span>\n\t\t\t\t\t\t\t\t\t\t\t<span class='badge badge-secondary mr-2'>speedFactor: {util.format(gpxInfo.speedFactor, 2)}</span>\n\t\t\t\t\t\t\t\t\t\t\t<span class='badge badge-secondary mr-2'>normalDuration: {gpxInfo.normalDuration}</span>\n\t\t\t\t\t\t\t\t\t\t\t<span class='badge badge-secondary mr-2'>durationFactor: {util.format(gpxInfo.durationFactor, 2)}</span>\n\t\t\t\t\t\t\t\t\t\t\t<span class='badge badge-secondary mr-2'>intensityFactor: {util.format(gpxInfo.intensityFactor, 2)}</span>\n\t\t\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\t\t\t<small class='text-muted'>\n\t\t\t\t\t\t\t\t\t\t\t\t\tloadIndex = Math.floor(totalKcalRelated * durationFactor * speedFactor * typeFactor * ambitionFactor);\n\t\t\t\t\t\t\t\t\t\t\t\t</small>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t</small>\n\t\t\t\t\t\t\t\t\t</div>}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>}\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t<div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3'>\n\t\t\t\t\t\t\t<div class='row mt-4'>\n\t\t\t\t\t\t\t\t<div class='col text-center'>\n\t\t\t\t\t\t\t\t\t<small class='text-muted'>\n\t\t\t\t\t\t\t\t\t\t<Text id='workouts.energy-consumption-help'>Energiforbruk er regnet ut fra 1,25 kcal / kg kroppsvekt / km.</Text>\n\t\t\t\t\t\t\t\t\t</small>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class='row mt-2'>\n\t\t\t\t\t\t\t\t<div class='col  text-center'>\n\t\t\t\t\t\t\t\t\t<small class='text-muted'><i class='fas fa-balance-scale ml-2' /> <Text id='workouts.energy-consumption-total'>Energiforbruk totalt</Text></small>\n\t\t\t\t\t\t\t\t\t<h3>\n\t\t\t\t\t\t\t\t\t\t{util.format(workout.kcalBurnedTotal, 0)} <Text id='workout.kcal'>kcal</Text>\n\t\t\t\t\t\t\t\t\t</h3>\n\t\t\t\t\t\t\t\t\t{kcalMultiplier > 0 && <small class='text-muted' style='line-height: 0.8em;'>\n\t\t\t\t\t\t\t\t\t\t<Text id='workouts.kcal-calculated'>Beregnet:</Text> {util.format(workout.kcalBurnedTotal * kcalMultiplier, 0)} <Text id='workout.kcal'>kcal</Text> <br />\n\t\t\t\t\t\t\t\t\t</small>}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class='col  text-center'>\n\t\t\t\t\t\t\t\t\t<small class='text-muted'><i class='fas fa-balance-scale ml-2' /> <Text id='workouts.energy-consumption'>Energiforbruk pr hund</Text></small>\n\t\t\t\t\t\t\t\t\t<h3>\n\t\t\t\t\t\t\t\t\t\t{util.format(workout.kcalBurned, 0)} kcal\n\t\t\t\t\t\t\t\t\t</h3>\n\t\t\t\t\t\t\t\t\t{kcalMultiplier > 0 && <small class='text-muted' style='line-height: 0.8em;'>\n\t\t\t\t\t\t\t\t\t\t<Text id='workouts.kcal-calculated'>Beregnet:</Text> {util.format(weightedTotalKcal, 0)} <Text id='workout.kcal'>kcal</Text> <br />\n\t\t\t\t\t\t\t\t\t</small>}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class='row mt-2'>\n\t\t\t\t\t\t\t\t<div class='col  text-center'>\n\t\t\t\t\t\t\t\t\t<small class='text-muted'><i class='fas fa-piggy-bank ml-2' /> <Text id='workouts.energy-consumption-fat-total'>Fett totalt</Text></small>\n\t\t\t\t\t\t\t\t\t<h3>\n\t\t\t\t\t\t\t\t\t\t{util.format(workout.kcalFatGramsTotal / 1000, 1)} <Text id='workout.kg'>kg</Text>\n\t\t\t\t\t\t\t\t\t</h3>\n\t\t\t\t\t\t\t\t\t{kcalMultiplier > 0 && <small class='text-muted' style='line-height: 0.8em;'>\n\t\t\t\t\t\t\t\t\t\t<Text id='workouts.kcal-calculated'>Beregnet:</Text> {util.format(workout.kcalFatGramsTotal / 1000 * kcalMultiplier, 1)} <Text id='workout.kg'>kg</Text>\n\t\t\t\t\t\t\t\t\t</small>}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class='col  text-center'>\n\t\t\t\t\t\t\t\t\t<small class='text-muted'><i class='fas fa-piggy-bank ml-2' /> <Text id='workouts.energy-consumption-fat'>Fett pr hund</Text></small>\n\t\t\t\t\t\t\t\t\t<h3>\n\t\t\t\t\t\t\t\t\t\t{util.format(workout.kcalFatGrams / 1000, 1)} <Text id='workout.kg'>kg</Text>\n\t\t\t\t\t\t\t\t\t</h3>\n\t\t\t\t\t\t\t\t\t{kcalMultiplier > 0 && <small class='text-muted' style='line-height: 0.8em;'>\n\t\t\t\t\t\t\t\t\t\t<Text id='workouts.kcal-calculated'>Beregnet:</Text> {util.format(workout.kcalFatGrams / 1000 * kcalMultiplier, 1)} <Text id='workout.kg'>kg</Text>\n\t\t\t\t\t\t\t\t\t</small>}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class='row mt-2'>\n\t\t\t\t\t\t\t\t<div class='col  text-center'>\n\t\t\t\t\t\t\t\t\t<small class='text-muted'><i class='fas fa-drumstick-bite ml-2' /> <Text id='workouts.energy-consumption-meat-total'>Kjtt totalt</Text></small>\n\t\t\t\t\t\t\t\t\t<h3>\n\t\t\t\t\t\t\t\t\t\t{util.format(workout.kcalMeatGramsTotal / 1000, 1)} <Text id='workout.kg'>kg</Text>\n\t\t\t\t\t\t\t\t\t</h3>\n\t\t\t\t\t\t\t\t\t{kcalMultiplier > 0 && <small class='text-muted' style='line-height: 0.8em;'>\n\t\t\t\t\t\t\t\t\t\t<Text id='workouts.kcal-calculated'>Beregnet:</Text> {util.format(workout.kcalMeatGramsTotal / 1000 * kcalMultiplier, 1)} <Text id='workout.kg'>kg</Text>\n\t\t\t\t\t\t\t\t\t</small>}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class='col  text-center'>\n\t\t\t\t\t\t\t\t\t<small class='text-muted'><i class='fas fa-drumstick-bite ml-2' /> <Text id='workouts.energy-consumption-meat'>Kjtt pr hund</Text></small>\n\t\t\t\t\t\t\t\t\t<h3>\n\t\t\t\t\t\t\t\t\t\t{util.format(workout.kcalMeatGrams / 1000, 1)} kg\n\t\t\t\t\t\t\t\t\t</h3>\n\t\t\t\t\t\t\t\t\t{kcalMultiplier > 0 && <small class='text-muted' style='line-height: 0.8em;'>\n\t\t\t\t\t\t\t\t\t\t<Text id='workouts.kcal-calculated'>Beregnet:</Text> {util.format(workout.kcalMeatGrams / 1000 * kcalMultiplier, 1)} <Text id='workout.kg'>kg</Text>\n\t\t\t\t\t\t\t\t\t</small>}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class='row mt-2'>\n\t\t\t\t\t\t\t\t<div class='col  text-center'>\n\t\t\t\t\t\t\t\t\t<small class='text-muted'><i class='fas fa-fish ml-2' /> <Text id='workouts.energy-consumption-salmon-total'>Kjtt totalt</Text></small>\n\t\t\t\t\t\t\t\t\t<h3>\n\t\t\t\t\t\t\t\t\t\t{util.format(workout.kcalSalmonGramsTotal / 1000, 1)} <Text id='workout.kg'>kg</Text>\n\t\t\t\t\t\t\t\t\t</h3>\n\t\t\t\t\t\t\t\t\t{kcalMultiplier > 0 && <small class='text-muted' style='line-height: 0.8em;'>\n\t\t\t\t\t\t\t\t\t\t<Text id='workouts.kcal-calculated'>Beregnet:</Text> {util.format(workout.kcalSalmonGramsTotal / 1000 * kcalMultiplier, 1)} <Text id='workout.kg'>kg</Text>\n\t\t\t\t\t\t\t\t\t</small>}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class='col  text-center'>\n\t\t\t\t\t\t\t\t\t<small class='text-muted'><i class='fas fa-fish ml-2' /> <Text id='workouts.energy-consumption-salmon'>Kjtt pr hund</Text></small>\n\t\t\t\t\t\t\t\t\t<h3>\n\t\t\t\t\t\t\t\t\t\t{util.format(workout.kcalSalmonGrams / 1000, 1)} <Text id='workout.kg'>kg</Text>\n\t\t\t\t\t\t\t\t\t</h3>\n\t\t\t\t\t\t\t\t\t{kcalMultiplier > 0 && <small class='text-muted' style='line-height: 0.8em;'>\n\t\t\t\t\t\t\t\t\t\t<Text id='workouts.kcal-calculated'>Beregnet:</Text> {util.format(workout.kcalSalmonGrams / 1000 * kcalMultiplier, 1)} <Text id='workout.kg'>kg</Text>\n\t\t\t\t\t\t\t\t\t</small>}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class='col-12'>\n\t\t\t\t\t\t\t<Ad stores={this.props.stores} url={this.props.url} section={submenu} />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</>}\n\n\t\t\t\t\t{submenu === 'images' && <>\n\t\t\t\t\t\t<div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3'>\n\t\t\t\t\t\t\t<div class='row'>\n\t\t\t\t\t\t\t\t<ImageScroller stores={this.props.stores} images={images} />\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t<div class='col-12'>\n\t\t\t\t\t\t\t<Ad stores={this.props.stores} url={this.props.url} section={submenu} />\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t{/* <div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mb-2 mt-5 bg-light py-4 border rounded-lg'>\n\t\t\t\t\t\t\t<Input saved={saved} workout={workout} field='image' type='image'\n\t\t\t\t\t\t\t\tstores={this.props.stores}\n\t\t\t\t\t\t\t\ttitle={<Text id='workouts.photos'>Bilder</Text>}\n\t\t\t\t\t\t\t\thelp={<Text id='workouts.photos-help'>Legg til bilde fra treningen.</Text>}\n\t\t\t\t\t\t\t\tonInput={this.updateField}\n\t\t\t\t\t\t\t\tupdateField={this.updateFieldValue}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div> */}\n\t\t\t\t\t</>}\n\n\t\t\t\t\t{submenu === 'dogs' && <>\n\t\t\t\t\t\t{workout.dogsLeft && <div class='offset-0 col-12 mt-4'>\n\t\t\t\t\t\t\t<div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 px-0'>\n\t\t\t\t\t\t\t\t<h5><Text id='workouts.dogs-positions'>Posisjoner i spannet</Text></h5>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class='row'>\n\t\t\t\t\t\t\t\t<div class='col-6 p-0'>\n\t\t\t\t\t\t\t\t\t{workout.dogsLeft && workout.dogsLeft.map(dogId => {\n\t\t\t\t\t\t\t\t\t\tconst dog = userStore.findDog(dogId);\n\t\t\t\t\t\t\t\t\t\treturn <DogSimple stores={this.props.stores} dog={dog} className='ml-auto' />;\n\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class='col-6 p-0'>\n\t\t\t\t\t\t\t\t\t{workout.dogsRight && workout.dogsRight.map(dogId => {\n\t\t\t\t\t\t\t\t\t\tconst dog = userStore.findDog(dogId);\n\t\t\t\t\t\t\t\t\t\treturn <DogSimple stores={this.props.stores} dog={dog} className='mr-auto' />;\n\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>}\n\t\t\t\t\t</>}\n\n\t\t\t\t\t{submenu === 'dogs' && <>\n\t\t\t\t\t\t<div class='offset-0 col-12 mt-4'>\n\t\t\t\t\t\t\t<div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 px-0'>\n\t\t\t\t\t\t\t\t<h5><Text id='workouts.all-dogs' fields={{ total: dogs.length }}>Hundene - {dogs.length} stk</Text></h5>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t{dogs && dogs.map(dog => (\n\t\t\t\t\t\t\t\t<Dog stores={this.props.stores} dog={dog} />\n\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class='col-12'>\n\t\t\t\t\t\t\t<Ad stores={this.props.stores} url={this.props.url} section={submenu} />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</>}\n\n\t\t\t\t\t{submenu === 'handlers' && <>\n\t\t\t\t\t\t<div class='offset-0 col-12 mt-4'>\n\t\t\t\t\t\t\t<div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 px-0'>\n\t\t\t\t\t\t\t\t<h5><Text id='workouts.all-mushers' fields={{ total: mushers.length }}>Handlere - {mushers.length} stk</Text></h5>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t{mushers && mushers.map(musher => (\n\t\t\t\t\t\t\t\t<Musher stores={this.props.stores} musher={musher} />\n\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class='col-12'>\n\t\t\t\t\t\t\t<Ad stores={this.props.stores} url={this.props.url} section={submenu} />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</>}\n\n\t\t\t\t\t{submenu === 'gpx' && <>\n\t\t\t\t\t\t<div class='offset-0 col-12 mt-4'>\n\t\t\t\t\t\t\t<div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 px-0 mb-3'>\n\t\t\t\t\t\t\t\t<h5><Text id='workouts.gpx-title'>GPX</Text></h5>\n\t\t\t\t\t\t\t\t<Text id='workouts.gpx-description'>Send GPX-file to your email address.</Text>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 px-0 mb-5'>\n\t\t\t\t\t\t\t\t{gpxFileSent ? <>\n\t\t\t\t\t\t\t\t\t<i class='fas fa-check text-success' /> <Text id='workouts.gpx-file-sent'>GPX file sent via email.</Text>\n\t\t\t\t\t\t\t\t</> : <>\n\t\t\t\t\t\t\t\t\t<button class='btn btn-success' onClick={this.sendGpxFile}>\n\t\t\t\t\t\t\t\t\t\t<Text id='workouts.gpx-send'>Send GPX-file</Text>\n\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t</>}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t<div class='col-12'>\n\t\t\t\t\t\t\t<Ad stores={this.props.stores} url={this.props.url} section={submenu} />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</>}\n\n\n\t\t\t\t\t {submenu === 'advanced' && <>\n\t\t\t\t\t\t<div class='offset-0 col-12 mt-4'>\n\t\t\t\t\t\t\t<div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 px-0 mb-3'>\n\t\t\t\t\t\t\t\t<h5><Text id='workouts.advanced'>Advanced</Text></h5>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 px-0 mb-5'>\n\t\t\t\t\t\t\t\t<div class='row mt-2'>\n\t\t\t\t\t\t\t\t\t<div class='col text-center' style='line-height: 1.0em;'>\n\t\t\t\t\t\t\t\t\t\t<small class='text-muted'>\n\t\t\t\t\t\t\t\t\t\t\t<i class='fas fa-cloud-sun-rain ml-2' /> <Text id='workouts.weather'>The weather during this workout</Text>\n\t\t\t\t\t\t\t\t\t\t</small>\n\t\t\t\t\t\t\t\t\t\t<h3 class='font-weight-lighter'>\n\t\t\t\t\t\t\t\t\t\t\t{workout.weather}\n\t\t\t\t\t\t\t\t\t\t</h3>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class='row mt-4'>\n\t\t\t\t\t\t\t\t\t<div class='col text-center' style='line-height: 1.0em;'>\n\t\t\t\t\t\t\t\t\t\t<small class='text-muted'>\n\t\t\t\t\t\t\t\t\t\t\t<i class='fas fa-temperature-low ml-2' /> <Text id='workouts.temperature'>Temperature</Text>\n\t\t\t\t\t\t\t\t\t\t</small>\n\t\t\t\t\t\t\t\t\t\t<h3>\n\t\t\t\t\t\t\t\t\t\t\t<Temperature stores={this.props.stores} value={workout.temperature} />\n\t\t\t\t\t\t\t\t\t\t</h3>\n\t\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t\t{workout.sunPosition && <div class='col text-center' style='line-height: 1.0em;'>\n\t\t\t\t\t\t\t\t\t\t<small class='text-muted'>\n\t\t\t\t\t\t\t\t\t\t\t<i class='fas fa-sun ml-2' /> <Text id='workouts.periode-of-day'>Periode of day</Text>\n\t\t\t\t\t\t\t\t\t\t</small>\n\t\t\t\t\t\t\t\t\t\t<h3>\n\t\t\t\t\t\t\t\t\t\t\t{workout.sunPosition.start} - {workout.sunPosition.end}\n\t\t\t\t\t\t\t\t\t\t</h3>\n\t\t\t\t\t\t\t\t\t</div>}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class='row mt-4'>\n\t\t\t\t\t\t\t\t\t{workout.moonPosition && workout.moonPosition.start && workout.moonPosition.start.altitudeDeg > 0 && <div class='col text-center' style='line-height: 1.0em;'>\n\t\t\t\t\t\t\t\t\t\t<small class='text-muted'>\n\t\t\t\t\t\t\t\t\t\t\t{workout.moonIllumination && workout.moonIllumination.phaseIcon && <>{workout.moonIllumination.phaseIcon}</>} <Text id='workouts.moon-position'>Moon position</Text>\n\t\t\t\t\t\t\t\t\t\t</small>\n\t\t\t\t\t\t\t\t\t\t<h3>\n\t\t\t\t\t\t\t\t\t\t\t{util.format(workout.moonPosition.start.altitudeDeg, 0)} {workout.moonPosition.end && workout.moonPosition.end.altitudeDeg > 0 && <> - {util.format(workout.moonPosition.end.altitudeDeg, 0)}</>}\n\t\t\t\t\t\t\t\t\t\t</h3>\n\t\t\t\t\t\t\t\t\t\t{workout.moonIllumination && workout.moonIllumination.fraction && <>\n\t\t\t\t\t\t\t\t\t\t\t<div class='progress'>\n\t\t\t\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\t\t\t\tclass='progress-bar bg-warning'\n\t\t\t\t\t\t\t\t\t\t\t\t\trole='progressbar'\n\t\t\t\t\t\t\t\t\t\t\t\t\tstyle={`width: ${workout.moonIllumination.fraction * 100}%`}\n\t\t\t\t\t\t\t\t\t\t\t\t\taria-valuenow={workout.moonIllumination.fraction * 100}\n\t\t\t\t\t\t\t\t\t\t\t\t\taria-valuemin='0'\n\t\t\t\t\t\t\t\t\t\t\t\t\taria-valuemax='100'>{util.format(workout.moonIllumination.fraction * 100, 0)}%</div>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t</>}\n\t\t\t\t\t\t\t\t\t</div>}\n\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t{['beta', 'advanced', 'normal'].indexOf(viewmode) > -1 && <>\n\t\t\t\t\t\t\t\t\t<div class='row mt-4'>\n\t\t\t\t\t\t\t\t\t\t<div class='col text-center' style='line-height: 1.0em;'>\n\t\t\t\t\t\t\t\t\t\t\t<small class='text-muted'>\n\t\t\t\t\t\t\t\t\t\t\t\t<i class='fas fa-dice ml-2' /> <Text id='workouts.rating'>Workout rating</Text>\n\t\t\t\t\t\t\t\t\t\t\t</small>\n\t\t\t\t\t\t\t\t\t\t\t<h3>\n\t\t\t\t\t\t\t\t\t\t\t\t{util.format(workout.rating, 0)}\n\t\t\t\t\t\t\t\t\t\t\t</h3>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div class='col text-center' style='line-height: 1.0em;'>\n\t\t\t\t\t\t\t\t\t\t\t<small class='text-muted'>\n\t\t\t\t\t\t\t\t\t\t\t\t<i class='fas fa-dumbbell ml-2' /> <Text id='workouts.intensity'>Workout intensity</Text>\n\t\t\t\t\t\t\t\t\t\t\t</small>\n\t\t\t\t\t\t\t\t\t\t\t<h3>\n\t\t\t\t\t\t\t\t\t\t\t\t{intensity.class && <span class={`badge badge-${intensity.class} ml-2`}>{intensity.name}</span>}\n\t\t\t\t\t\t\t\t\t\t\t</h3>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</>}\n\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t{isAdmin && showAdminInfo && <>\n\t\t\t\t\t\t\t<AdminInfo stores={this.props.stores} />\n\t\t\t\t\t\t</>}\n\n\t\t\t\t\t\t<div class='col-12'>\n\t\t\t\t\t\t\t<Ad stores={this.props.stores} url={this.props.url} section={submenu} />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</>}\n\n\t\t\t\t\t{submenu !== 'advanced' && <>\n\t\t\t\t\t\t<div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-3'>\n\t\t\t\t\t\t\t<LikesAndComments\n\t\t\t\t\t\t\t\tstores={this.props.stores}\n\t\t\t\t\t\t\t\tlikes={likes}\n\t\t\t\t\t\t\t\tcomments={comments}\n\t\t\t\t\t\t\t\ttype='workout'\n\t\t\t\t\t\t\t\tonTeamClick={this.onTeamClick}\n\t\t\t\t\t\t\t\tonUserClick={this.onUserClick}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t<div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-2 mb-3'>\n\t\t\t\t\t\t\t<div class='row'>\n\t\t\t\t\t\t\t\t<div class='col text-center'>\n\t\t\t\t\t\t\t\t\t<button type='button' class={`btn btn-outline-${hasLikedWorkout ? 'primary' : 'secondary'} btn-sm btn-block ${hasLikedWorkout ? 'text-primary' : ''}`}\n\t\t\t\t\t\t\t\t\t\tonClick={this.likeWorkout}\n\t\t\t\t\t\t\t\t\t\t// disabled={hasLikedWorkout}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<i class={`${hasLikedWorkout ? 'text-primary fas' : 'far'} fa-thumbs-up`} /> <Text id='workouts.like'>Like</Text>\n\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class='col text-center'>\n\t\t\t\t\t\t\t\t\t<button type='button' class='btn btn-outline-secondary btn-sm btn-block'\n\t\t\t\t\t\t\t\t\t\tdata-id={workout.id}\n\t\t\t\t\t\t\t\t\t\tonClick={this.toggleAddComment}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<i class='fas fa-comment' /> <Text id='workouts.comment'>Comment</Text>\n\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t{workout.private ? <>\n\t\t\t\t\t\t\t\t\t<div class='col text-center'>\n\t\t\t\t\t\t\t\t\t\t<Text id='workouts.is-private'>Workout is private</Text>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</> : <>\n\t\t\t\t\t\t\t\t\t{hasShareApi ? <>\n\t\t\t\t\t\t\t\t\t\t<div class='col text-center'>\n\t\t\t\t\t\t\t\t\t\t\t<button class='btn btn-outline-secondary btn-sm btn-block text-overflow'\n\t\t\t\t\t\t\t\t\t\t\t\tonClick={this.shareLink}\n\t\t\t\t\t\t\t\t\t\t\t\tdata-url={`https://themusher.app/share/workout/${workout.uuidv4}`}\n\t\t\t\t\t\t\t\t\t\t\t\tdata-title={`title: ${workout.title}`}\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t<i class='fas fa-share' /> <Text id='story.share'>Del</Text>\n\t\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</> : <>\n\t\t\t\t\t\t\t\t\t\t<div class='col text-center'>\n\t\t\t\t\t\t\t\t\t\t\t<a class='btn btn-outline-secondary btn-sm btn-block text-overflow'\n\t\t\t\t\t\t\t\t\t\t\t\thref={`https://themusher.app/share/workout/${workout.uuidv4}`}\n\t\t\t\t\t\t\t\t\t\t\t\ttarget='_blank'\n\t\t\t\t\t\t\t\t\t\t\t\trel='noreferrer'\n\t\t\t\t\t\t\t\t\t\t\t\tdata-native\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t<i class='fas fa-share' /> <Text id='story.share'>Del</Text>\n\t\t\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</>}\n\t\t\t\t\t\t\t\t</>}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t<div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-2 mb-3'>\n\t\t\t\t\t\t\t{showAddComment && <WorkoutAddComment\n\t\t\t\t\t\t\t\tstores={this.props.stores}\n\t\t\t\t\t\t\t\tworkout={workout}\n\t\t\t\t\t\t\t\t// callback={this.loadWorkoutDetail}\n\t\t\t\t\t\t\t\tinputRef={c => this.inputRef[workout.id] = c}\n\t\t\t\t\t\t\t\tinputRefObject={this.inputRef}\n\t\t\t\t\t\t\t/>}\n\t\t\t\t\t\t\t<WorkoutComments\n\t\t\t\t\t\t\t\tstores={this.props.stores}\n\t\t\t\t\t\t\t\tworkout={workout}\n\t\t\t\t\t\t\t\t// callback={this.loadWorkoutDetail}\n\t\t\t\t\t\t\t/>\n\n\t\t\t\t\t\t\t{views > 0 && <>\n\t\t\t\t\t\t\t\t<div class='mt-2'>\n\t\t\t\t\t\t\t\t\t<Views\n\t\t\t\t\t\t\t\t\t\tstores={this.props.stores}\n\t\t\t\t\t\t\t\t\t\tviews={views}\n\t\t\t\t\t\t\t\t\t\tobject={workout}\n\t\t\t\t\t\t\t\t\t\ttype='workout'\n\t\t\t\t\t\t\t\t\t\tisTeamAdmin={true}\n\t\t\t\t\t\t\t\t\t\tisAdmin={false}\n\t\t\t\t\t\t\t\t\t\tonTeamClick={this.onTeamClick}\n\t\t\t\t\t\t\t\t\t\tonUserClick={this.onUserClick}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</>}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</>}\n\n\t\t\t\t\t{workout.isLocked === 1 ? <>\n\n\t\t\t\t\t</> : <>\n\t\t\t\t\t\t{submenu === 'advanced' && <>\n\t\t\t\t\t\t\t<div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mb-5 mt-5 border-top'>\n\t\t\t\t\t\t\t\t<h5 class='mt-5'><Text id='workouts.recalculate-title'>Recalculate data</Text></h5>\n\t\t\t\t\t\t\t\t<Text id='workouts.recalculate-help'>\n\t\t\t\t\t\t\t\t\tClick the button below if you want to recalculate this workout.<br />\n\t\t\t\t\t\t\t\t\tPlease don't overuse this function. If the calculations is not changed after 1 try,\n\t\t\t\t\t\t\t\t\tthen it's not going to change the next time either.\n\t\t\t\t\t\t\t\t</Text>\n\n\t\t\t\t\t\t\t\t<button class={`btn btn-block btn-warning mt-2 float-left ${recalculated ? 'disabled': ''}`}\n\t\t\t\t\t\t\t\t\tstyle='font-size: 0.8em;'\n\t\t\t\t\t\t\t\t\tonClick={this.reCalculateGpxData}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<i class='fas fa-sync' /> <Text id='workouts.recalculate'>Recalculate data</Text>\n\t\t\t\t\t\t\t\t</button><br />\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t<div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mb-5 mt-5 border-top'>\n\t\t\t\t\t\t\t\t<h5 class='mt-5'><Text id='workouts.duplicate-title'>Duplicate workout</Text></h5>\n\t\t\t\t\t\t\t\t<Text id='workouts.duplicate-help'>\n\t\t\t\t\t\t\t\t\tClick the button below if you want to duplicate this workout.\n\t\t\t\t\t\t\t\t\tAfter you have duplicated this workout you can edit it as a regular workout.\n\t\t\t\t\t\t\t\t</Text>\n\t\t\t\t\t\t\t\t<button class='btn btn-block btn-secondary mt-2 float-left'\n\t\t\t\t\t\t\t\t\tonClick={this.duplicateWorkout}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<i class='fas fa-copy' /> <Text id='workouts.duplicate'>Duplicate workout</Text>\n\t\t\t\t\t\t\t\t</button><br />\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t<div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mb-5 mt-5 border-top'>\n\t\t\t\t\t\t\t\t<h5 class='mt-5'><Text id='workouts.make-track-title'>Make track</Text></h5>\n\t\t\t\t\t\t\t\t<Text id='workouts.make-track-help'>\n\t\t\t\t\t\t\t\t\tUse this workout to make a track. This track can shared and downloaded as a regular track.\n\t\t\t\t\t\t\t\t</Text>\n\t\t\t\t\t\t\t\t<button class='btn btn-block btn-info mt-2 float-left'\n\t\t\t\t\t\t\t\t\tonClick={this.makeTrack}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<i class='fas fa-map-marked-alt' /> <Text id='workouts.make-track'>Make track</Text>\n\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t<div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-5 border-top'>\n\t\t\t\t\t\t\t\t<h5 class='mt-5'><Text id='workouts.delete-title'>Delete workout</Text></h5>\n\t\t\t\t\t\t\t\t<Text id='workouts.delete-help'>\n\t\t\t\t\t\t\t\t\tClick the button below to delete this workout. All data related to this workout will be lost. All team and dog statistics will also be affected.\n\t\t\t\t\t\t\t\t</Text>\n\t\t\t\t\t\t\t\t<button class='btn btn-block btn-sm btn-danger mt-2 float-right'\n\t\t\t\t\t\t\t\t\tonClick={this.deleteWorkout}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<i class='fas fa-trash' /> <Text id='workouts.delete'>Delete</Text> {workout.name}\n\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</>}\n\t\t\t\t\t</>}\n\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</>);\n\t}\n}\n\nexport default WorkoutDetail;\n","import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport { Text, Localizer, withText } from 'preact-i18n';\n\nimport mu from '../../lib/musher-util';\n\nimport LineGraph from '../../components/lineGraph';\n\n@withText((props) => ({\n    week: <Text id='workout.graph.week' />,\n    distance: <Text id='workout.graph.distance' />,\n    ascend: <Text id='workout.graph.ascend' />,\n    plan: <Text id='workout.graph.plan' />,\n}))\n@observer\nclass WorkoutInfoGraph extends Component {\n    render() {\n        const { showDebug } = this.props;\n        const { workoutStore } = this.props.stores;\n        const { workout = {} } = workoutStore;\n        const { gpx = {}, gpxInfo } = workout;\n        const { gpxInfo: subGpxInfo = {} } = gpx;\n\n        const finalGpxInfo = {\n            ...subGpxInfo,\n            ...gpxInfo,\n        };\n        const { gpsSpeeds = [] } = finalGpxInfo;\n        const { speeds = gpsSpeeds, elevations = [], temperatures = [], climbs = [], distances = [], ecor = [] } = finalGpxInfo;\n\n        let dataLeft = [];\n        let dataLeft2 = [];\n        let dataLeft3 = [];\n        let dataRight = [];\n        let dataRight3 = [];\n        const legendLeft = [];\n        const legendLeft2 = [];\n        const legendLeft3 = [];\n        const legendRight = [];\n        const legendRight3 = [];\n        const unitLeft = [];\n        const unitLeft2 = [];\n        const unitLeft3 = [];\n        const unitRight = [];\n        const unitRight3 = [];\n\n        if (elevations.length > 0) {\n            const smoothed = mu.smoothArray(elevations, 5);\n            const data = smoothed.map((e, idx) => ({\n                x: idx,\n                y: e,\n            }));\n            dataLeft.push(data);\n            legendLeft.push('Elevation');\n            unitLeft.push('m');\n        }\n        if (speeds.length > 0) {\n            const smoothed = mu.smoothArray(speeds, 3);\n            const data = smoothed.map((e, idx) => ({\n                x: idx,\n                y: e * 3.6,\n            }));\n            dataRight.push(data);\n            legendRight.push('Speed');\n            unitRight.push('km/t');\n        }\n        if (temperatures.length > 0) {\n            const smoothed = mu.smoothArray(temperatures, 2);\n            const data = smoothed.map((e, idx) => ({\n                x: idx,\n                y: e,\n            }));\n            dataLeft2.push(data);\n            legendLeft2.push('Temp');\n            unitLeft2.push('C');\n        }\n        if (climbs.length > 0) {\n            const smoothed = mu.smoothArray(climbs, 2);\n            const data = smoothed.map((e, idx) => ({\n                x: idx,\n                y: e,\n            }));\n            dataLeft3.push(data);\n            legendLeft3.push('Climblevel');\n            unitLeft3.push('%');\n        }\n        if (ecor.length > 0) {\n            const smoothed = mu.smoothArray(ecor, 1);\n            const data = smoothed.map((e, idx) => ({\n                x: idx,\n                y: e * 1000,\n            }));\n            dataRight3.push(data);\n            legendRight3.push('ECOR (kcal/kg/km)');\n            unitRight3.push('kcal/kg/km');\n        }\n        // if (distances.length > 0) {\n        //     const smoothed = mu.smoothArray(distances, 30);\n        //     const data = smoothed.map((e, idx) => ({\n        //         x: idx,\n        //         y: e * 1000,\n        //     }));\n        //     dataRight3.push(data);\n        //     legendRight3.push('Distance');\n        //     unitRight3.push('km');\n        // }\n\n        // const firstData = dataLeft[0] || [];\n        const xTicks = [];\n        if (workout.distanceKm > 0) {\n            const xTicksRange = util.range(0, Math.ceil(finalGpxInfo.calculatedTotalDistance || workout.distanceKm), 1);\n            const partSize = Math.ceil(xTicksRange.length / 5);\n            const parts = Math.floor(xTicksRange.length / partSize);\n            // if (showDebug) {\n                // console.log({ xTicksRange, parts, partSize });\n            // }\n            for (let i = 0, l = xTicksRange.length; i < l; i += partSize) {\n                xTicks.push(xTicksRange[i]);\n            }\n            xTicks.push(xTicksRange[xTicksRange.length - 1]);\n        }\n        // if (firstData.length) {\n        //     const partSize = Math.ceil(firstData.length / 4);\n        //     const parts = Math.floor(firstData.length / partSize);\n        //     if (showDebug) {\n        //         console.log({ firstData, parts, partSize });\n        //     }\n        //     for (let i = 0, l = firstData.length; i < l; i += partSize) {\n        //         xTicks.push(firstData[i].epoch);\n        //     }\n        //     xTicks.push(firstData[firstData.length - 1].epoch);\n        // }\n        return (\n            <>\n                <div class='w-100 mt-3 mb-4'>\n                    {/* <xmp>graphWorkoutSummaryWeekDistanceCurrent: {JSON.stringify(graphWorkoutSummaryWeekDistanceCurrent, null, 4)}</xmp>\n                    <xmp>graphWorkoutSummaryWeekDistancePrev: {JSON.stringify(graphWorkoutSummaryWeekDistancePrev, null, 4)}</xmp> */}\n                    <LineGraph\n                        stores={this.props.stores}\n                        width={1000}\n                        height={200}\n                        showXTicks={1}\n                        xTicksVal={val => `${val}km`}\n                        xTicks={xTicks}\n                        paddingTop={30}\n                        lineFromXzero={true}\n                        lineFromXmax={true}\n                        // xTicksLink={'/workouts/week/'}\n\n                        dataLeft={dataLeft}\n                        legendLeft={legendLeft}\n                        dataFillLeft={[1]}\n                        // yMaxLeft={30}\n                        // yMinLeft={0}\n                        showYTicksLeft={1}\n                        yTicksLeftPostfix={' m'}\n                        unitLeft={unitLeft}\n                        avgWindowLeft={[0, 0, 0]}\n                        smoothLeft={[1, 1, 1]}\n\n                        dataRight={dataRight}\n                        legendRight={legendRight}\n                        // dataRight={[graphWorkoutSummaryWeekElevationCurrent, graphWorkoutSummaryWeekElevationPrev]}\n                        // legendRight={[`${seasonStart} ${ascend}`, `${seasonStart - 1} ${ascend}`]}\n                        showYTicksRight={dataRight.length > 0 ? 1 : 0}\n                        yTicksRightPostfix={'km/t'}\n                        unitRight={unitRight}\n                        avgWindowRight={[0, 0, 0]}\n                        smoothRight={[1, 1, 1]}\n\n                        // marker={week}\n                    />\n                </div>\n\n                {dataLeft2.length > 0 && <div class='w-100 mt-3 mb-4'>\n                    {/* <xmp>graphWorkoutSummaryWeekDistanceCurrent: {JSON.stringify(graphWorkoutSummaryWeekDistanceCurrent, null, 4)}</xmp>\n                    <xmp>graphWorkoutSummaryWeekDistancePrev: {JSON.stringify(graphWorkoutSummaryWeekDistancePrev, null, 4)}</xmp> */}\n                    <LineGraph\n                        stores={this.props.stores}\n                        width={1000}\n                        height={100}\n                        showXTicks={1}\n                        xTicksVal={val => `${val}km`}\n                        xTicks={xTicks}\n                        paddingTop={30}\n                        lineFromXzero={true}\n                        lineFromXmax={true}\n                        // xTicksLink={'/workouts/week/'}\n\n                        dataLeft={dataLeft2}\n                        legendLeft={legendLeft2}\n                        dataFillLeft={[1]}\n                        // yMaxLeft={10}\n                        // yMinLeft={-20}\n                        yMaxMinLeftRound={false}\n                        showYTicksLeft={1}\n                        yTicksLeftPostfix={' C'}\n                        unitLeft={unitLeft2}\n                        avgWindowLeft={[0]}\n                        smoothLeft={[1]}\n                        // marker={week}\n                    />\n                </div>}\n\n                {dataLeft3.length > 0 && <div class='w-100 mt-3 mb-4'>\n                    {/* <xmp>graphWorkoutSummaryWeekDistanceCurrent: {JSON.stringify(graphWorkoutSummaryWeekDistanceCurrent, null, 4)}</xmp>\n                    <xmp>graphWorkoutSummaryWeekDistancePrev: {JSON.stringify(graphWorkoutSummaryWeekDistancePrev, null, 4)}</xmp> */}\n                    <LineGraph\n                        stores={this.props.stores}\n                        width={1000}\n                        height={200}\n                        showXTicks={1}\n                        xTicksVal={val => `${val}km`}\n                        xTicks={xTicks}\n                        paddingTop={30}\n                        lineFromXzero={true}\n                        lineFromXmax={true}\n                        // xTicksLink={'/workouts/week/'}\n\n                        dataLeft={dataLeft3}\n                        legendLeft={legendLeft3}\n                        dataFillLeft={[1]}\n                        // yMaxLeft={20}\n                        // yMinLeft={-20}\n                        yMaxMinLeftRound={false}\n                        showYTicksLeft={1}\n                        yTicksLeftPostfix={' %'}\n                        unitLeft={unitLeft3}\n                        avgWindowLeft={[0]}\n                        smoothLeft={[1]}\n                        // marker={week}\n\n                        dataRight={dataRight3}\n                        legendRight={legendRight3}\n                        // dataRight={[graphWorkoutSummaryWeekElevationCurrent, graphWorkoutSummaryWeekElevationPrev]}\n                        // legendRight={[`${seasonStart} ${ascend}`, `${seasonStart - 1} ${ascend}`]}\n                        showYTicksRight={dataRight3.length > 0 ? 1 : 0}\n                        yTicksRightVal={v => util.format(v / 1000, 2)}\n                        // yTicksRightPostfix={'kcal/kg/km'}\n                        unitRight={unitRight3}\n                        avgWindowRight={[0, 0, 0]}\n                        smoothRight={[1, 1, 1]}\n                    />\n                </div>}\n\n            </>\n        );\n    }\n}\n\nexport default WorkoutInfoGraph;\n","import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport { Text, Localizer, withText } from 'preact-i18n';\n\nimport Speed from '../../components/data/speed';\nimport Elevation from '../../components/data/elevation';\nimport Weight from '../../components/data/weight';\nimport Distance from '../../components/data/distance';\nimport Temperature from '../../components/data/temperature';\n\nimport mu from '../../lib/musher-util';\n\n@observer\nclass Dog extends Component {\n    render() {\n        const { dog } = this.props;\n\t\tconst { userStore, dogStore, appState } = this.props.stores;\n        const { isAdmin, user } = userStore;\n        const { language = 'en' } = user;\n        const { viewmode } = appState;\n\n        const currentMonth = new Date().getMonth() + 1;\n        const currentYear = new Date().getFullYear();\n\t\tconst { month = currentMonth, year = currentYear } = this.props;\n\t\tconst seasonStart = parseInt(month < 8 ? year - 1 : year, 10);\n\n        const workoutSummary = dogStore.findWorkoutSummary(dog.id, seasonStart) || {};\n        // {\"0\":{\"year\":2020,\"dog\":16,\"count\":1,\"distanceKm\":9.9,\"elevation\":202,\"duration\":0,\"speedAvg\":0}}\n        const dogStatuses = dog.statuses ? dog.statuses.map(e => userStore.findDogstatus({ status: e, language })) : [];\n        const dogVaccines = dogStore.findVaccineStatuses(dog.id);\n        const dogVaccineLogStatuses = dogStore.findVaccineLogStatuses(dog.chipId);\n        const dogHistoryStatuses = dogStore.findHistoryStatuses(dog.id);\n        const dogStatus = userStore.findDogstatus({ status: dog.status, language });\n        const dogPosition = userStore.findDogposition({ position: dog.position, language });\n        const teamNames = [];\n        if (userStore.findTeam(dog.team)) {\n            teamNames.push(userStore.findTeam(dog.team));\n        }\n        if (dog.teams) {\n            dog.teams.forEach((e) => {\n                if (userStore.findTeam(e)) {\n                    teamNames.push(userStore.findTeam(e));\n                }\n            });\n        }\n        const hasBirthday = mu.hasBirthday(dog.birth);\n        const daysUntilBirthday = dog.birth ? Math.ceil(mu.daysUntilNextBirthday(dog.birth)) : 365;\n\n        const { url = `/dogs/${dog.id}` } = this.props;\n\n        return (\n            <div class='w-100 mb-3'>\n                <div class='row'>\n                    <div class='col-12 col-sm-8 col-lg-6 offset-sm-2 offset-lg-3 d-flex mb-0 position-relative'>\n                        {/* {JSON.stringify(dog, null, 4)} */}\n                        <div class={`text-center border rounded-circle imageRounded text-muted pt-2`} style={dog.image ? `background-image: url(\"${dog.image.s3SmallLink}\"); background-size: cover;` : ''}>\n                            {/* {!dog.image && <i class='fas fa-dog mt-3' style='font-size: 40px;' />} */}\n                            {!dog.image && <span class='font-weight-lighter' style='font-size: 35px;'>{util.ucfirst(dog.name, true)}</span>}\n                        </div>\n                        <div class='flex-grow-1 pl-3 pr-2'\n                            style={`border-right: 4px solid ${userStore.findHarness(dog.harness, 'colorNonstop')} !important; line-height: 1.2em;`}\n                        >\n                            <span class='float-right'>\n                                {dogPosition && <span class={`badge badge-${dogPosition.class || 'primary'} mr-3`}>{dogPosition.icon && <i class={dogPosition.icon} />} {dogPosition.name}</span>}\n                                {daysUntilBirthday < 7 && <>\n                                    <span class='text-muted mr-2'>\n                                        <i class='fas fa-birthday-cake' /> in {daysUntilBirthday} days\n                                    </span>\n                                </>}                                \n                                {dog.birth && <span class='mr-2'>{util.age(dog.birth, dog.deceased)}</span>}\n                                {dog.gender === 'female' ? <i class='fas fa-venus' /> : <i class='fas fa-mars' />}\n                            </span>\n                            <a class='stretched-link' href={url}>\n                                <h5 class='mb-1' style='line-height: 1.0em;'>\n                                    {dog.shortname || dog.name} {dog.shortname && dog.shortname !== '' && <> - <span class='font-weight-lighter'>{dog.name}</span></>}\n                                    {hasBirthday && <>\n                                        <i class='fas fa-birthday-cake ml-3' />\n                                    </>}\n                                </h5>\n                            </a>\n                            <div>\n                                {teamNames && teamNames.length > 0 && <small class='font-weight-lighter'>\n                                    {teamNames.map((name, idx) => <>{idx > 0 ? ', ' : ''}{name}</>)}\n                                </small>}\n                                <br />\n                            </div>\n\n                            <small class='text-muted'>\n                                {/* {dog.chipId && <span class='ml-0'><i class='fas fa-microchip' /> {dog.chipId}</span>} */}\n                                {dog.history > 0 && <span class='ml-0'><i class='fas fa-file-signature' /> {dog.history.length}</span>}\n                                {dog.images > 0 && <span class='ml-2'><i class='fas fa-image' /> {dog.images.length}</span>}\n\n                                {workoutSummary && workoutSummary.distanceKm > 0 && <span class='ml-2'><i class='fas fa-road' /> <Distance stores={this.props.stores} value={workoutSummary.distanceKm} /></span>}\n                                {workoutSummary && workoutSummary.elevation > 0 && <span class='ml-2'><i class='fas fa-mountain' /> <Elevation stores={this.props.stores} value={workoutSummary.elevation} /></span>}\n                                {workoutSummary && workoutSummary.duration > 0 && <span class='ml-2'><i class='fas fa-clock' /> {util.secToHms(workoutSummary.duration, true)}</span>}\n                                {workoutSummary && workoutSummary.speedAvg > 0 && <span class='ml-2'><i class='fas fa-tachometer-alt' /> <Speed stores={this.props.stores} value={workoutSummary.speedAvg} /></span>}\n\n                                {dog.weight > 0 && <><i class='fas fa-balance-scale ml-2' /> <Weight stores={this.props.stores} value={dog.weight} /></>}\n                                {dog.bodyScore > 0 && <><i class='fas fa-dog ml-2' /> {util.format(dog.bodyScore, 1)}</>}\n                            </small>\n\n                            {['beta', 'advanced', 'normal'].indexOf(viewmode) > -1 && <>\n                                <div>\n                                    {dogVaccines && dogVaccines.map(v => (\n                                        <span class={`badge badge-success mr-2`} title={util.isoDate(v.endDate, false, false, true)}>\n                                            {v.vaccineType}\n                                            <span class='font-weight-light ml-3'>\n                                                <i class='fas fa-calendar-check' /> {util.isoDate(v.endDate, false, false, true)}                                    \n                                            </span>\n                                        </span>\n                                    ))}\n                                    {dogHistoryStatuses && dogHistoryStatuses.map(v => (\n                                        <span class={`badge badge-warning mr-2`} title={util.isoDate(v.endDate, false, false, true)}>{v.title}</span>\n                                    ))}\n                                </div>\n                            </>}\n\n                            {['beta', 'advanced'].indexOf(viewmode) > -1 && <>\n                                {dog.positions && dog.positions.lead && <div class=''>\n                                    {dog.positions.lead.distanceKm > 0 && <span class='badge badge-secondary mr-2'>\n                                        <span class='font-weight-lighter'><Text id='dogs.sort-lead'>Lead</Text>:</span> <Distance stores={this.props.stores} value={dog.positions.lead.distanceKm} />\n                                    </span>}\n                                    {dog.positions.point.distanceKm > 0 && <span class='badge badge-secondary mr-2'>\n                                        <span class='font-weight-lighter'><Text id='dogs.sort-point'>Point</Text>:</span> <Distance stores={this.props.stores} value={dog.positions.point.distanceKm} />\n                                    </span>}\n                                    {dog.positions.team.distanceKm > 0 && <span class='badge badge-secondary mr-2'>\n                                        <span class='font-weight-lighter'><Text id='dogs.sort-team'>Team</Text>:</span> <Distance stores={this.props.stores} value={dog.positions.team.distanceKm} />\n                                    </span>}\n                                    {dog.positions.wheel.distanceKm > 0 && <span class='badge badge-secondary mr-2'>\n                                        <span class='font-weight-lighter'><Text id='dogs.sort-wheel'>Wheel</Text>:</span> <Distance stores={this.props.stores} value={dog.positions.wheel.distanceKm} />\n                                    </span>}\n                                </div>}\n                            </>}\n\n                            <div class='clearfix pb-0'>\n                                {dog.specialNeeds && <span class={`badge badge-warning ml-2 mt-1 float-right`}><i class='fas fa-exclamation-triangle' /> {dog.specialNeeds}</span>}\n                                {dogStatus && <span class={`badge badge-${dogStatus.class} ml-2 mt-1 float-right`}>{dogStatus.icon && <i class={dogStatus.icon} />} {dogStatus.name}</span>}\n                                {dogStatuses && dogStatuses.map(status => <>\n                                    <span class={`badge badge-${status.class} ml-2 mt-1 float-right`}>\n                                        {status.icon && <i class={status.icon} />} {status.lang && status.lang[language] ? status.lang[language] : status.name}\n                                    </span>\n                                </>)}\n                            </div>\n\n                            {dogVaccineLogStatuses && dogVaccineLogStatuses.length > 0 && <>\n                                <div class='mt-2'>\n                                    {dogVaccineLogStatuses && dogVaccineLogStatuses.filter(e => e.chipId === dog.chipId).map((vac) => {\n                                        return (\n                                            <span class={`badge badge-${vac.inKarens ? 'warning' : 'success'} mr-2 mb-1`}>\n                                                <i class='fas fa-user-md' /> {vac.vaccineAgens.name}\n                                                {/* <span class='font-weight-lighter ml-2'> */}\n                                                    {/* <i class='fas fa-calendar-check' /> {util.isoDate(vac.vaccineAgens.durationEnd, false, false, true)} */}\n                                                    {/* {vac.inKarens && <>\n                                                        <br />\n                                                        (karens: {util.format(vac.karensDaysLeft, 0)} days left)\n                                                    </>} */}\n                                                {/* </span> */}\n                                            </span>\n                                        );\n                                    })}\n                                </div>\n                            </>}\n\n                        </div>\n                    </div>\n                </div>\n            </div>\n        );\n    }\n}\n\nexport default Dog;\n","import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\n\nimport mu from '../../lib/musher-util';\n\nconst STOP_STATUSES = [2, 9];\nconst WARN_STATUSES = [4, 8];\n\n\nfunction getFatigueLevel(wo, dog) {\n    if (dog) {\n        if (STOP_STATUSES.indexOf(dog.status) > -1) {\n            return 'danger';\n        } else if (WARN_STATUSES.indexOf(dog.status) > -1) {\n            return 'warning';\n        }\n    }\n    if (wo) {\n        if (wo.distanceKm > 50) {\n            return 'danger';\n        } else if (wo.distanceKm > 30) {\n            return 'warning';\n        }\n    }\n    return 'success';\n}\n\n@observer\nclass Dog extends Component {\n    render() {\n        const { \n            dog,\n            showWorkout,\n            showTeam,\n            showNeeds,\n            showInfo,\n            showName = true,\n            showPosition = true,\n            showAge = false,\n            className,\n            size,\n        } = this.props;\n\t\tconst { userStore, dogStore } = this.props.stores;\n        const { isAdmin, user } = userStore;\n        const { language = 'en' } = user;\n\n        if (!dog) {\n            if (size === 'small') {\n                return (\n                    <div class={`mb-1 position-relative ${className}`} style='width: 50px;'>\n                        <div class={`text-center border rounded-circle imageRounded imageRoundedSmall text-muted pt-2  mx-auto`}>\n                            <span class='font-weight-lighter' style='font-size: 20px;'>&nbsp;</span>\n                        </div>\n                        {showName && <div class='text-center'>\n                            &nbsp;\n                        </div>}\n                    </div>\n                );\n            }\n            if (size === 'medium') {\n                return (\n                    <div class={`mb-1 position-relative ${className}`} style='width: 60px;'>\n                        <div class={`text-center border rounded-circle imageRounded imageRoundedMedium text-muted pt-2  mx-auto`}>\n                            <span class='font-weight-lighter' style='font-size: 25px;'>&nbsp;</span>\n                        </div>\n                        {showName && <div class='text-center'>\n                            &nbsp;\n                        </div>}\n                    </div>\n                );\n            }\n            return (\n                <div class={`mb-2 position-relative ${className}`} style='width: 92px;'>\n                    <div class={`text-center border rounded-circle imageRounded text-muted pt-2  mx-auto`}>\n                        <span class='font-weight-lighter' style='font-size: 35px;'>&nbsp;</span>\n                    </div>\n                    {showName && <div class='text-center'>\n                        &nbsp;\n                    </div>}\n                </div>\n            );\n        }\n\n        const dogStatus = userStore.findDogstatus({ status: dog.status, language });\n        const dogPosition = userStore.findDogposition({ position: dog.position, language });\n        const workoutSummary = dogStore.findCurrentWorkoutSummary(dog.id);\n        const hasBirthday = mu.hasBirthday(dog.birth);\n        const daysUntilBirthday = Math.ceil(mu.daysUntilNextBirthday(dog.birth));\n\n        if (size === 'small') {\n            return (\n                <div class={`mb-1 position-relative ${className}`} style='width: 50px;'>\n                    <div\n                        class={`text-center border border-${getFatigueLevel(workoutSummary, dog)} rounded-circle imageRounded imageRoundedSmall mx-auto text-muted pt-2`}\n                        style={`${dog.image ? `background-image: url(\"${dog.image.s3SmallLink}\"); background-size: cover;` : ''} border-width: 2px !important;`}\n                    >\n                        {!dog.image && <span class='font-weight-lighter' style='font-size: 20px;'>{util.ucfirst(dog.name, true)}</span>}\n                    </div>\n                </div>\n            );\n        }\n        if (size === 'medium') {\n            return (\n                <div class={`mb-1 position-relative ${className}`} style='width: 60px;'>\n                    <div\n                        class={`text-center border border-${getFatigueLevel(workoutSummary, dog)} rounded-circle imageRounded imageRoundedMedium mx-auto text-muted pt-2`}\n                        style={`${dog.image ? `background-image: url(\"${dog.image.s3SmallLink}\"); background-size: cover;` : ''} border-width: 2px !important;`}\n                    >\n                        {!dog.image && <span class='font-weight-lighter' style='font-size: 20px;'>{util.ucfirst(dog.name, true)}</span>}\n                    </div>\n                </div>\n            );\n        }\n\n        return (\n            <div class={`mb-2 position-relative ${className}`} style='width: 92px;'>\n                {/* {JSON.stringify(dog, null, 4)} */}\n                {showPosition && dogPosition && <small class='position-absolute' style='left:0px; top: 50px;'>\n                    <span class={`badge badge-${dogPosition.class || 'primary'} mr-3`}>{dogPosition.icon && <i class={dogPosition.icon} />} {dogPosition.name}</span>\n                </small>}\n                <div\n                    class={`text-center border border-${getFatigueLevel(workoutSummary, dog)} rounded-circle imageRounded mx-auto text-muted pt-2`}\n                    style={`${dog.image ? `background-image: url(\"${dog.image.s3SmallLink}\"); background-size: cover;` : ''} border-width: 2px !important;`}\n                >\n                    {/* {!dog.image && <i class='fas fa-dog mt-3' style='font-size: 40px;' />} */}\n                    {!dog.image && <span class='font-weight-lighter' style='font-size: 35px;'>{util.ucfirst(dog.name, true)}</span>}\n                </div>\n                <div class='text-center' style='line-height: 1.0em;'>\n                    <small>\n                        {/* <span class='float-right'>\n                            {dog.birth && <span class='mr-2'>{util.age(dog.birth, dog.deceased)}</span>}\n                            {dog.gender === 'female' ? <i class='fas fa-venus' /> : <i class='fas fa-mars' />}\n                        </span> */}\n                        {showName && <a class='stretched-link' href={`/dogs/${dog.id}`}>\n                            <h5 class='mb-1 font-weight-light' style='line-height: 1.0em; font-size: 1.3em;'>\n                                {dog.shortname || dog.name}\n                                {hasBirthday && <>\n                                    <i class='fas fa-birthday-cake ml-3' />\n                                </>}\n                            </h5>\n                        </a>}\n\n                        {dog.birth && showAge && <>\n                            <span>\n                                {daysUntilBirthday < 7 && <>\n                                    <span class='text-muted mr-2'>\n                                        <i class='fas fa-birthday-cake' /> in {daysUntilBirthday} days\n                                    </span>\n                                </>}                                \n                                {dog.birth && <span class='mr-2'>{util.age(dog.birth, dog.deceased)}</span>}\n                                {dog.gender === 'female' ? <i class='fas fa-venus' /> : <i class='fas fa-mars' />}\n                            </span>\n                        </>}\n\n                        {showTeam && <><span class='font-weight-light'>{userStore.findTeam(dog.team)}</span><br /></>}\n\n                        {showWorkout && <small class='text-muted'>\n                            {workoutSummary && workoutSummary.distanceKm > 0 && <span class='mr-2'><i class='fas fa-road' /> {util.format(workoutSummary.distanceKm, 0)}km</span>}\n                            {workoutSummary && workoutSummary.elevation > 0 && <span class='mr-2'><i class='fas fa-mountain' /> {util.format(workoutSummary.elevation, 0)}m</span>}\n                            {workoutSummary && workoutSummary.duration > 0 && <span class='mr-2'><i class='fas fa-clock' /> {util.secToHms(workoutSummary.duration, true)}</span>}\n                            {workoutSummary && workoutSummary.speedAvg > 0 && <span class='mr-2'><i class='fas fa-tachometer-alt' /> {util.format(workoutSummary.speedAvg, 1)}km/t</span>}\n                        </small>}\n\n                        {showInfo && <small class='text-muted'>\n                            {dog.weight && <><i class='fas fa-balance-scale ml-2' /> {util.format(dog.weight, 1)} kg</>}\n                            {dog.bodyScore && <><i class='fas fa-dog ml-2' /> {util.format(dog.bodyScore, 1)}</>}\n                        </small>}\n\n                        {showNeeds && <div class='clearfix pb-0 pt-1'>\n                            {dog.specialNeeds && <span class={`badge badge-warning mr-2`}><i class='fas fa-exclamation-triangle' /> {dog.specialNeeds}</span>}\n                            {dogStatus && <span class={`badge badge-${dogStatus.class} mr-2`}>{dogStatus.icon && <i class={dogStatus.icon} />} {dogStatus.name}</span>}\n                        </div>}\n                    </small>\n                </div>\n            </div>\n        );\n    }\n}\n\nexport default Dog;\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"gaugeBackground\":\"gaugeBackground__1UGxt\",\"gauge\":\"gauge__2ZDxd\",\"success\":\"success__3UQxg\",\"primary\":\"primary__3pPV6\",\"secondary\":\"secondary__-Vrk_\",\"info\":\"info__3t5zs\",\"warning\":\"warning__1jHlR\",\"danger\":\"danger__BLVC9\",\"gaugeText\":\"gaugeText__1on-w\"};","import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport { Text, Localizer, withText } from 'preact-i18n';\n\nimport mu from '../../lib/musher-util';\n\nconst initialState = {\n\tshowAddComment: false,\n};\n\n@withText(() => ({\n    subject: <Text id='ad.subject'>Annonseforesprsel</Text>,\n    body: <Text id='ad.body'>Hei, Jeg nsker  vite mer om annonsering i appen The Musher.</Text>,\n}))\n\n@observer\nclass Ad extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            ...initialState,\n        };\n        this.updateTimer = {};\n\t\tthis.inputRef = {};\n        this.apiServer = util.getApiServer();\n    }\n\n\tasync loadAd(props = this.props) {\n\t\tthis.setState({ isLoading: true });\n\t\tconst { adStore, workoutStore, userStore, appState } = this.props.stores;\n        const { section } = this.props;\n        const { path: url = '' } = appState;\n        const { currentTeam } = workoutStore;\n        const { user } = userStore;\n        const { language = 'en' } = user;\n        let team = {};\n        let ambitions;\n        let type;\n        let postalcode;\n        let place;\n        let country;\n        if (currentTeam) {\n            team = userStore.findTeam(currentTeam, true);\n            if (team && team.id) {\n                ambitions = userStore.findTeamAmbition({ ambition: team.ambitions, language });\n                type = userStore.findTeamType({ type: team.type, language });\n                postalcode = team.postalcode;\n                place = team.place;\n                country = team.country;\n            }\n        }\n        // console.log({ currentTeam, team, ambitions,  type, postalcode, place, country });\n        // const { url = '' } = this.props;\n        let page = url.replace(/\\d+$/, 'detail');\n        page = url.replace(/\\/\\d+/, '/detail');\n\n        // props: { \"url\": \"/\" }\n        // props: { \"url\": \"/workouts/\" }\n        // props: { \"url\": \"/workouts/4708\" }\n        // props: { \"url\": \"/dogs\" }\n        // props: { \"url\": \"/dogs/10\" }\n\n\t\tawait adStore.load({ query: { page, section }});\n        adStore.setTime();\n\t\tthis.setState({ isLoading: false });\n\t}\n\n    logClick = async () => {\n        const { adStore, userStore } = this.props.stores;\n        const { ads = [] } = adStore;\n        let id = ads.length > 0 ? ads[0].id : null;\n        const { user = {} } = userStore;\n        await adStore.logClick({ id, user: user.id });\n    }\n\n\tcomponentDidMount() {\n\t\tthis.loadAd();\n\t}\n\n    componentWillReceiveProps(nextProps) {\n        // console.log('componentWillReceiveProps', nextProps);\n        if (nextProps.path !== this.props.path) {\n            this.loadAd(nextProps);\n        }\n    }\n\n    render() {\n        const { adStore, userStore, appState } = this.props.stores;\n        const { subject, body, section } = this.props;\n        const { path } = appState;\n        const { user = {} } = userStore;\n        const { ads = [], time, adViews, adClicks } = adStore;\n        if (!user || !user.id || !ads || ads.length === 0) {\n            if (path.match(/\\/(home)/i)) {\n                return <>\n                    <div class='w-100'>\n                        <div class='row'>\n                            <div class='col-12 col-sm-8 col-lg-6 offset-sm-2 offset-lg-3 mb-0 position-relative'>\n                                <div class='border rounded-lg p-4 my-3'>\n                                    <span class='float-right display-4 text-warning'>\n                                        <i class='far fa-smile-wink' />\n                                    </span>\n                                    <h5><Text id='ad.heading'>Vil du annonsere her?</Text></h5>\n                                    <div><Text id='ad.teaser'>Det er super enkelt :)</Text></div>\n                                    <Localizer>\n                                        <a href={`mailto:post@themusher.no?subject=${subject}: ${path}: ${section}&body=${body}`} target='_blank' rel='noreferrer'>\n                                            <i class='fas fa-paper-plane' /> <Text id='ad.linktext'>Ta kontakt med The Musher</Text>\n                                        </a>\n                                    </Localizer>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </>;\n            }\n            return <></>;\n        }\n        const ad = ads[0];\n        return (\n            <>\n                <div class='w-100'>\n                    <div class='row'>\n                        <div class='col-12 col-sm-8 col-lg-6 offset-sm-2 offset-lg-3 mb-0 position-relative'>\n                            <div>\n                                <small><small class='text-muted'>\n                                    <Text id='ad.ad'>Annonse</Text>:\n                                    <img src={`${this.apiServer}/api/ads/${ad.id}/view?user=${user.id}&time=${time}`} style='width: 1; height: 1; opacity: 0.1;' />\n                                </small></small>\n                            </div>\n                            {ad.target ? <>\n                                <a\n                                    class='stretched-link'\n                                    href={`${ad.url}`}\n                                    target={ad.target || '_blank'}\n                                    rel='noopener noreferrer'\n                                    onClick={this.logClick}\n                                    native\n                                >\n                                    {ad.images && ad.images[0] && <>\n                                        <img src={ad.images[0].s3LargeLink} class='img-fluid rounded-lg' />\n                                    </>}\n                                </a>                            \n                            </> : <>\n                                <a\n                                    class='stretched-link'\n                                    href={`${ad.url}`}\n                                    onClick={this.logClick}\n                                >\n                                    {ad.images && ad.images[0] && <>\n                                        <img src={ad.images[0].s3LargeLink} class='img-fluid rounded-lg' />\n                                    </>}\n                                </a>\n                            </>}\n                        </div>\n                    </div>\n                </div>\n            </>\n        );\n    }\n}\n\nexport default Ad;\n","import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport { route } from 'preact-router';\nimport { Text, Localizer } from 'preact-i18n';\nimport { toJS } from 'mobx';\nimport Markdown from 'preact-markdown';\n\nimport mu from '../../lib/musher-util';\n\nimport Speed from '../../components/data/speed';\nimport Elevation from '../../components/data/elevation';\nimport Weight from '../../components/data/weight';\nimport Distance from '../../components/data/distance';\nimport Temperature from '../../components/data/temperature';\n\nfunction getStateColor(state) {\n\tswitch (state) {\n\t\tcase 'running':\n\t\t\treturn 'primary';\n\t\tcase 'rest':\n\t\t\treturn 'warning';\n\t\tcase 'restTrail':\n\t\t\treturn 'danger';\n\t}\n}\n\nfunction getStateIcon(state) {\n\tswitch (state) {\n\t\tcase 'running':\n\t\t\treturn 'fas fa-running';\n\t\tcase 'rest':\n\t\t\treturn 'fas fa-male';\n\t\tcase 'restTrail':\n\t\t\treturn 'fas fa-bed';\n\t}\n}\n\n@observer\nclass States extends Component {\n    hideDetail = (e) => {\n        e.preventDefault();\n        e.stopPropagation();\n        this.setState({\n\t\t\tstateDetail: {\n\t\t\t\tstate: '',\n                idx: 0,\n\t\t\t},\n\t\t});\n    }\n\n\tshowStateDetail = (e) => {\n        e.preventDefault();\n        e.stopPropagation();\n\t\tconst data = e.target.closest('div').dataset;\n\t\tthis.setState({\n\t\t\tstateDetail: {\n\t\t\t\t...data,\n\t\t\t},\n\t\t});\n\t}\n\n    nextStateDetail = (e) => {\n        e.preventDefault();\n        e.stopPropagation();\n        const { states, duration } = this.props;\n        const { stateDetail = {} } = this.state;\n        const currentIdx = parseInt(stateDetail.idx, 10);\n        const nextIdx = currentIdx + 1;\n        const nextState = states[nextIdx];\n        if (nextState) {\n            this.setState({\n                stateDetail: {\n                    idx: nextIdx,\n                    state: nextState.state,\n                    duration: nextState.duration,\n                    distance: nextState.distance,\n                    avgspeed: nextState.avgSpeed,\n                    statespeeds: nextState.stateSpeeds,\n                    point: nextState.point,\n                    start: nextState.start,\n                    end: nextState.end,\n                    percent: util.normalizeBetween(nextState.duration, 0, duration, 0, 100),\n                },\n            });\n        }\n    }\n\n   prevStateDetail = (e) => {\n        e.preventDefault();\n        e.stopPropagation();\n        const { states, duration } = this.props;\n        const { stateDetail = {} } = this.state;\n        const currentIdx = parseInt(stateDetail.idx, 10);\n        const prevIdx = currentIdx - 1;\n        const prevState = states[prevIdx];\n        if (prevState) {\n            this.setState({\n                stateDetail: {\n                    idx: prevIdx,\n                    state: prevState.state,\n                    duration: prevState.duration,\n                    distance: prevState.distance,\n                    avgspeed: prevState.avgSpeed,\n                    statespeeds: prevState.stateSpeeds,\n                    point: prevState.point,\n                    start: prevState.start,\n                    end: prevState.end,\n                    percent: util.normalizeBetween(prevState.duration, 0, duration, 0, 100),\n                },\n            });\n        }\n    }\n\n    render() {\n        const { states, duration, height = '20px', showText = true } = this.props;\n        const { stateDetail = {} } = this.state;\n        const locale = 'en-GB';\n\n        return (<>\n            <div class='row'>\n                {states && <div class='col-12 px-0'>\n                    <div class='progress' style={`height: ${(stateDetail && stateDetail.idx) ? '20px' : height};`}>\n                        {states.map((state, idx) => {\n                            const value = Math.ceil(util.normalizeBetween(state.duration, 0, duration, 0, 100));\n                            let currentWidth = value;\n                            if (stateDetail && stateDetail.idx == idx) {\n                                currentWidth = value < 10 ? 10 : value;\n                            }\n                            return (<>\n                                <div\n                                    class={`progress-bar bg-${getStateColor(state.state)}`}\n                                    role='progressbar'\n                                    style={`width: ${currentWidth}%`}\n                                    aria-valuenow={value}\n                                    aria-valuemin='0'\n                                    aria-valuemax='100'\n                                    data-idx={idx}\n                                    data-state={state.state}\n                                    data-duration={state.duration}\n                                    data-distance={state.distance}\n                                    data-avgspeed={state.avgSpeed}\n                                    data-statespeeds={state.stateSpeeds}\n                                    data-point={state.point}\n                                    data-start={state.start}\n                                    data-end={state.end}\n                                    data-percent={util.normalizeBetween(state.duration, 0, duration, 0, 100)}\n                                    onClick={this.showStateDetail}\n                                >\n                                    {showText ? <>\n                                        <nobr>\n                                            {value > 10 && <>\n                                                {state.state === 'rest' ? <>\n                                                    {util.secToHms(state.duration, true)}\n                                                </> : <>\n                                                    {util.format(state.distance / 1000, 0)}km\n                                                </>}\n                                            </>}\n                                            {(stateDetail && stateDetail.idx == idx) ? <i class={`fas fa-hand-point-down text-${state.state === 'rest' ? 'dark' : 'warning'} mx-2`} /> : ''}\n                                        </nobr>\n                                    </> : <>\n                                        {(stateDetail && stateDetail.idx == idx) ? <i class={`fas fa-hand-point-down text-${state.state === 'rest' ? 'dark' : 'warning'} mx-2`} /> : ''}\n                                    </>}\n                                </div>\n                            </>);\n                        })}\n                    </div>\n                    {stateDetail && stateDetail.state && <>\n                        <div class='card position-relative'>\n                            <span class='position-absolute' style='top: 0px; right: 5px;'>\n                                <small class='text-muted'>\n                                    <i class={getStateIcon(stateDetail.state)} /> {util.format(stateDetail.percent, 1)}%\n                                </small>\n                            </span>\n                            <div class='card-body'>\n                                {stateDetail.state === 'rest' ? <>\n                                    <div class='card-text row'>\n                                        <div class='col-4 text-nowrap text-overflow'>\n                                            <small class='text-muted'>\n                                                <i class='fas fa-clock ml-2' /> <Text id='workouts.duration'>Vargihet</Text>\n                                            </small>\n                                            <h6>\n                                                {util.secToHms(stateDetail.duration, true)}\n                                            </h6>\n                                        </div>\n                                        {stateDetail.point && <div class='col-8 text-nowrap text-overflow'>\n                                            <small class='text-muted'>\n                                                <i class='fa-map-marked ml-2' /> <Text id='workouts.position'>Position</Text>\n                                            </small>\n                                            <h6>\n                                                {stateDetail.point}\n                                            </h6>\n                                        </div>}\n                                    </div>\n                                    <div class='card-text row'>\n                                        {stateDetail.start && <div class='col-4 text-nowrap text-overflow'>\n                                            <small class='text-muted'>\n                                                <i class='fas fa-clock ml-2' /> <Text id='workouts.starttime'>Start</Text>\n                                            </small>\n                                            <h6>\n                                                {mu.formatDate(util.parseInputDate(stateDetail.start), { locale, hour12: false, day: 'numeric', month: 'numeric', hour: '2-digit', minute: '2-digit' })}\n                                            </h6>\n                                        </div>}\n                                        {stateDetail.end && <div class='col-4 text-nowrap text-overflow'>\n                                            <small class='text-muted'>\n                                                <i class='fas fa-clock ml-2' /> <Text id='workouts.endtime'>End</Text>\n                                            </small>\n                                            <h6>\n                                                {mu.formatDate(util.parseInputDate(stateDetail.end), { locale, hour12: false, day: 'numeric', month: 'numeric', hour: '2-digit', minute: '2-digit' })}\n                                            </h6>\n                                        </div>}\n                                    </div>\n                                </> : <>\n                                    <div class='card-text row'>\n                                        <div class='col-4 text-nowrap text-overflow'>\n                                            <small class='text-muted'>\n                                                <i class='fas fa-road ml-2' /> <Text id='workouts.distance'>Distanse</Text>\n                                            </small>\n                                            <h6>\n                                                <Distance stores={this.props.stores} value={stateDetail.distance / 1000} />\n                                            </h6>\n                                        </div>\n\n                                        <div class='col-4 text-nowrap text-overflow'>\n                                            <small class='text-muted'>\n                                                <i class='fas fa-clock ml-2' /> <Text id='workouts.duration'>Vargihet</Text>\n                                            </small>\n                                            <h6>\n                                                {util.secToHms(stateDetail.duration, true)}\n                                            </h6>\n                                        </div>\n\n                                        <div class='col-4 text-nowrap text-overflow'>\n                                            <small class='text-muted'>\n                                                <i class='fas fa-tachometer-alt ml-2' /> <Text id='workouts.avgspeed'>Gj.fart</Text>\n                                            </small>\n                                            <h6>\n                                                <Speed stores={this.props.stores} value={stateDetail.distance / stateDetail.duration * 3.6} />\n                                            </h6>\n                                        </div>\n                                    </div>\n                                    <div class='card-text row'>\n                                        {stateDetail.start && <div class='col-4 text-nowrap text-overflow'>\n                                            <small class='text-muted'>\n                                                <i class='fas fa-clock ml-2' /> <Text id='workouts.starttime'>Start</Text>\n                                            </small>\n                                            <h6>\n                                                {mu.formatDate(util.parseInputDate(stateDetail.start), { locale, hour12: false, day: 'numeric', month: 'numeric', hour: '2-digit', minute: '2-digit' })}\n                                            </h6>\n                                        </div>}\n                                        {stateDetail.end && <div class='col-4 text-nowrap text-overflow'>\n                                            <small class='text-muted'>\n                                                <i class='fas fa-clock ml-2' /> <Text id='workouts.endtime'>End</Text>\n                                            </small>\n                                            <h6>\n                                                {mu.formatDate(util.parseInputDate(stateDetail.end), { locale, hour12: false, day: 'numeric', month: 'numeric', hour: '2-digit', minute: '2-digit' })}\n                                            </h6>\n                                        </div>}\n                                    </div>\n                                </>}\n                            </div>\n                            <div class='float-right'>\n\n                            <button class='btn btn-link text-primary mx-2 py-0 float-right' onClick={this.hideDetail} style='line-height: 1.0em; font-size: 2.0em;'>\n                                <i class='fas fa-times' />\n                            </button>\n\n                            {stateDetail.idx < states.length - 1 && <button class='btn btn-link text-primary mx-2 py-0 float-right' onClick={this.nextStateDetail} style='line-height: 1.0em; font-size: 2.0em;'>\n                                <i class='fas fa-angle-right' />\n                            </button>}\n                            {stateDetail.idx > 0 && <button class='btn btn-link text-primary mx-2 py-0 float-right' onClick={this.prevStateDetail} style='line-height: 1.0em; font-size: 2.0em;'>\n                                <i class='fas fa-angle-left' />\n                            </button>}\n\n                            </div>\n                        </div>\n                    </>}\n                </div>}\n            </div>\n        </>);\n    }\n}\n\nexport default States;\n","import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\n\n@observer\nclass Musher extends Component {\n    render() {\n        const { musher } = this.props;\n\t\t// const { userStore, dogStore } = this.props.stores;\n        // const workoutSummary = dogStore.findWorkoutSummary(dog.id, 2020) || {};\n        // // {\"0\":{\"year\":2020,\"dog\":16,\"count\":1,\"distanceKm\":9.9,\"elevation\":202,\"duration\":0,\"speedAvg\":0}}\n        // const dogVaccines = dogStore.findVaccineStatuses(dog.id);\n        return (\n            <div class='w-100 mb-3'>\n                <div class='row'>\n                    <div class='col-12 col-sm-8 col-lg-6 offset-sm-2 offset-lg-3 d-flex mb-0 position-relative'>\n                        {/* {JSON.stringify(dog, null, 4)} */}\n                        <div class={`text-center border rounded-circle imageRounded text-muted pt-2`} style={musher.image ? `background-image: url(\"${musher.image.s3SmallLink}\");` : ''}>\n                            {/* {!dog.image && <i class='fas fa-dog mt-3' style='font-size: 40px;' />} */}\n                            {!musher.image && <span class='font-weight-lighter' style='font-size: 35px;'>{util.ucfirst(musher.email, true)}</span>}\n                        </div>\n                        <div class='flex-grow-1 pl-3 pr-2'>\n                            <span class='float-right'>\n                                {/* {musher.birth && <span class='mr-2'>{util.age(musher.birth, musher.deceased)}</span>}\n                                {musher.gender === 'female' ? <i class='fas fa-venus' /> : <i class='fas fa-mars' />} */}\n                            </span>\n                            {/* <a class='stretched-link' href={`/dogs/${musher.id}`}> */}\n                                <h5 class='mb-1' style='line-height: 1.0em;'>{musher.fname || musher.email}</h5>\n                            {/* </a> */}\n                            {/* <span class='font-weight-light'>{userStore.findTeam(dog.team)}</span><br /> */}\n\n                            {/* <small class='text-muted'> */}\n                                {/* {dog.chipId && <span class='ml-0'><i class='fas fa-microchip' /> {dog.chipId}</span>} */}\n                                {/* {dog.history && <span class='ml-0'><i class='fas fa-file-signature' /> {dog.history.length}</span>}\n                                {dog.images && <span class='ml-2'><i class='fas fa-image' /> {dog.images.length}</span>}\n\n                                {workoutSummary && workoutSummary.distanceKm > 0 && <span class='ml-2'><i class='fas fa-road' /> {util.format(workoutSummary.distanceKm, 0)}km</span>}\n                                {workoutSummary && workoutSummary.elevation > 0 && <span class='ml-2'><i class='fas fa-mountain' /> {util.format(workoutSummary.elevation, 0)}m</span>}\n                                {workoutSummary && workoutSummary.duration > 0 && <span class='ml-2'><i class='fas fa-clock' /> {util.secToHms(workoutSummary.duration, true)}</span>}\n                                {workoutSummary && workoutSummary.speedAvg > 0 && <span class='ml-2'><i class='fas fa-tachometer-alt' /> {util.format(workoutSummary.speedAvg, 1)}km/t</span>}\n                                <div>\n                                    {dogVaccines && dogVaccines.map(v => (\n                                        <span class={`badge badge-success mr-2`} title={util.isoDate(v.endDate, false, false, true)}>{v.vaccineType}</span>\n                                    ))}\n                                </div> */}\n                            {/* </small> */}\n                            {/* <div class='clearfix pb-0'>\n                                {dog.specialNeeds && <span class={`badge badge-warning ml-2 float-right`}><i class='fas fa-exclamation-triangle' /> {dog.specialNeeds}</span>}\n                                {dogStatus && <span class={`badge badge-${dogStatus.class} ml-2 float-right`}>{dogStatus.icon && <i class={dogStatus.icon} />} {dogStatus.name}</span>}\n                            </div> */}\n                        </div>\n                    </div>\n                </div>\n            </div>\n        );\n    }\n}\n\nexport default Musher;\n","import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\n\nimport style from './style.css';\n\nconst initialState = {\n    mouseData: {},\n};\n\n@observer\nclass Gauge extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            ...initialState,\n        };\n        this.svgRef = null;\n    }\n\n    render() {\n        const {\n            radius = 50,\n            heightAdd = 0,\n            color = 'success',\n\n            showPercentText = true,\n            percent = 0,\n            prefix = '',\n\n            showCenterText= false,\n            centerText,\n            centerTextSize,\n            centerTextX,\n            centerTextY,\n\n            total = '',\n            totalY = '90%',\n            totalX = '50%',\n            totalTextAnchor = 'middle',\n                        \n            completed = '',\n            completedY = '65%',\n            completedX = '50%',\n            completedTextAnchor = 'middle',\n        } = this.props;\n        const strokeWidth = radius * 0.3;\n        const innerRadius = radius - strokeWidth / 2;\n\n        const strokeWidthGauge = radius * 0.3;\n\n        const circumference = innerRadius * 2 * Math.PI;\n        const arc = circumference * (270 / 360);\n        const dashArray = `${arc} ${circumference}`;\n        const transform = `rotate(135, ${radius}, ${radius})`;\n\n        const percentNormalized = Math.min(Math.max(percent, 0), 100);\n        const offset = arc - (percentNormalized / 100) * arc;\n\n        const textSize = centerTextSize || radius / 2.5;\n        const textSizeSmall = radius / 5;\n\n        return (\n            <>\n                <svg xmlns='http://www.w3.org/2000/svg' class={style.svg}\n                    // viewBox={`0 0 ${radius * 2} ${radius * 2}`}\n                    width={radius * 2}\n                    height={radius * 2 + heightAdd}\n                    preserveAspectRatio='none'\n                    ref={c => this.svgRef = c}\n                >\n\n                    <circle\n                        class={`${style.gaugeBackground}`}\n                        cx={radius}\n                        cy={radius}\n                        r={innerRadius}\n                        strokeWidth={strokeWidth}\n                        strokeDasharray={dashArray}\n                        strokeLinecap='round'\n                        transform={transform}\n                    />\n                    \n                    <circle\n                        class={`${style[color]} ${style.gauge}`}\n                        cx={radius}\n                        cy={radius}\n                        r={innerRadius}\n                        stroke='url(#grad)'\n                        strokeDasharray={dashArray}\n                        strokeDashoffset={offset}\n                        strokeLinecap='round'\n                        strokeWidth={strokeWidthGauge}\n                        style={{\n                            transition: 'stroke-dashoffset 0.3s',\n                        }}\n                        transform={transform}\n                    />\n                     \n                    {showPercentText && <text\n                        class={`${style.gaugeText} ${style[color]}`}\n                        x={centerTextX || '50%'}\n                        y={centerTextY || '50%'}\n                        dominant-baseline='middle'\n                        text-anchor='middle'\n                        font-size={textSize}\n                    >{percent} {prefix}</text>}\n\n                    {showCenterText && <text\n                        class={`${style.gaugeText} ${style[color]}`}\n                        x={centerTextX || '50%'}\n                        y={centerTextY || '50%'}\n                        dominant-baseline='middle'\n                        text-anchor='middle'\n                        font-size={textSize}\n                    >{centerText}</text>}\n\n                    {completed && <text\n                        class={`${style.gaugeText} ${style[color]}`}\n                        x={completedX}\n                        y={completedY}\n                        dominant-baseline='middle'\n                        text-anchor={completedTextAnchor}\n                        font-size={textSizeSmall}\n                    >{completed}</text>}\n\n                    <text\n                        class={`${style.gaugeText} ${style.secondary}`}\n                        x={totalX}\n                        y={totalY}\n                        dominant-baseline='middle'\n                        text-anchor={totalTextAnchor}\n                        font-size={textSizeSmall}\n                    >{total}</text>\n\n                </svg>\n            </>\n        );\n    }\n}\n\nexport default Gauge;\n"],"sourceRoot":""}