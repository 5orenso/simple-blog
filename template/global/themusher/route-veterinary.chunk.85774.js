(window.webpackJsonp=window.webpackJsonp||[]).push([[64],{"6a5D":function(e,t,s){"use strict";function n(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function a(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}var c,r=s("hosL"),o=s("ox/y"),i=(s("Utv1"),s("/eY4")),l=(s("go65"),s("Y3FI")),d=s("OhSV"),h={menu:{profile:!1,main:!1},searchText:""};Object(i.a)(c=function(e){function t(t){var s;return(s=e.call(this,t)||this).toggleDropdown=function(e){var t=s.state.menu,n=e.target.dataset.name;!n&&e.target.parentNode&&(n=e.target.parentNode.dataset.name),n&&(t[n]=!t[n]),s.setState({menu:t})},s.toggleDarkmode=function(e){s.props.stores.appState.toggleDarkmode(),s.toggleDropdown(e)},s.toggleViewmode=function(e){var t=e.target.dataset.mode;!t&&e.target.parentNode&&(t=e.target.parentNode.dataset.mode),s.props.stores.appState.toggleViewmode(t),s.toggleDropdown(e)},s.reloadApp=function(){window.location.reload(!0)},s.adminLoadAll=function(){return new Promise((function(e,t){return Promise.resolve(s.props.stores.userStore.getInfo(!0)).then((function(){try{return e()}catch(e){return t(e)}}),t)}))},s.changeLanguage=function(e){var t=e.target.value;console.log("changeLanguage",t);var n=s.props.stores,a=n.appState,c=n.userStore,r=c.user,o=void 0===r?{}:r;o.email&&c.setLanguage({email:o.email,language:t}),a.setLanguage(t)},s.search=function(){var e=s.state.searchText;Object(l.route)("/search/"+e)},s.state=function(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?n(Object(s),!0).forEach((function(t){a(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):n(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}({},h),s}var s,c;return c=e,(s=t).prototype=Object.create(c.prototype),s.prototype.constructor=s,s.__proto__=c,t.prototype.render=function(){var e=this.state,t=e.menu,s=this.props.stores,n=s.appState,a=s.userStore,c=n.darkmode,i=a.user,l=a.notifications,h=((void 0===l?[]:l).filter((function(e){return!e.read})),i.language),b=void 0===h?"en":h;return Object(r.h)("nav",{class:"navbar navbar-expand-lg navbar-themed fixed-top",style:"z-index: 99999;"},Object(r.h)("a",{class:"navbar-brand",href:"/"},Object(r.h)("img",{src:"./assets/logo.png",height:"37",class:"position-absolute",style:"top: 10px; left: 6px"}),Object(r.h)("span",{class:"font-weight-normal",style:"margin-left: 30px; font-size: 25px;"},"The Musher")),Object(r.h)("button",{class:"navbar-toggler",type:"button","data-name":"main",onClick:this.toggleDropdown},Object(r.h)("span",{class:"navbar-toggler-icon"})),Object(r.h)("div",{class:"collapse navbar-collapse "+(t.main?"show":""),id:"navbarSupportedContent"},Object(r.h)("ul",{class:"navbar-nav mr-auto ml-5"}),Object(r.h)("ul",{class:"navbar-nav ml-auto "},Object(r.h)("li",{class:"nav-item mr-2"},Object(r.h)("div",{class:"form-row align-items-center"},Object(r.h)("div",{class:"col-auto my-1",style:"width: 80px;"},Object(r.h)("select",{class:"custom-select",style:"background-color: inherit; border: none; padding: 0; height: 1.1em; font-size: 0.9em;",onInput:this.changeLanguage},Object(r.h)("option",{value:"no",selected:"no"===b},"ðŸ‡³ðŸ‡´ NO"),Object(r.h)("option",{value:"en",selected:"en"===b},"ðŸ‡¬ðŸ‡§ EN"),Object(r.h)("option",{value:"es",selected:"es"===b},"ðŸ‡ªðŸ‡¸ ES"),Object(r.h)("option",{value:"de",selected:"de"===b},"ðŸ‡©ðŸ‡ª DE"),Object(r.h)("option",{value:"fr",selected:"fr"===b},"ðŸ‡«ðŸ‡· FR"),Object(r.h)("option",{value:"ru",selected:"ru"===b},"ðŸ‡·ðŸ‡º RU"),Object(r.h)("option",{value:"se",selected:"se"===b},"ðŸ‡¸ðŸ‡ª SE"))))),Object(r.h)("li",{class:"nav-item d-block d-lg-none"},Object(r.h)(o.Link,{className:"nav-link",activeClassName:"active","data-name":"main",onClick:this.toggleDarkmode},Object(r.h)("i",{class:(c?"fas text-warning":"far")+" fa-moon"})," ",Object(r.h)(d.c,{id:"header.darkmode"},"Nattmodus"))),Object(r.h)("li",{class:"nav-item mr-2 d-none d-lg-block"},Object(r.h)("button",{class:"btn btn-link","data-name":"profile",onClick:this.toggleDarkmode},Object(r.h)("i",{class:(c?"fas text-warning":"far")+" fa-moon"}))))))},t}(r.Component))},atwK:function(e,t,s){"use strict";s.r(t),function(e){function n(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function a(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?n(Object(s),!0).forEach((function(t){c(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):n(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function c(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function r(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}var o,i,l,d=s("hosL"),h=(s("QRet"),s("Utv1")),b=s("/eY4"),u=s("OhSV"),g=s("go65"),p=(s("fh8t"),s("cneo"),s("6a5D"),s("s4FZ")),m=s("ZOvn"),O=m.a.marginTop(!0),f=m.a.marginBottom(),j=(m.a.subMenuMarginTop(),m.a.getVaccineTypesVet(),m.a.getVaccineAgensVet()),v=(h.a.getApiServer(),{isLoading:!1,email:"",submenu:"ads",jwtToken:h.a.getJwtToken()}),y=Object(b.a)(o=function(t){function s(){for(var e,s=arguments.length,n=new Array(s),a=0;a<s;a++)n[a]=arguments[a];return(e=t.call.apply(t,[this].concat(n))||this).selectTeam=function(t){return new Promise((function(s){return t.preventDefault(),e.setState({displayTeam:parseInt(t.target.value,10)}),s()}))},e}return r(s,t),s.prototype.render=function(){var t=this,s=this.props,n=s.teams,a=void 0===n?[]:n,c=s.displayUser,r=this.props.stores.userStore.isLoading,o=this.state.displayTeam,i=void 0===o?(a[0]?a[0]:{}).id:o;return Object(d.h)("div",{class:"bg-light p-0"},r.getDogs?Object(d.h)(e,null,"Loading..."):Object(d.h)(e,null,Object(d.h)("select",{class:"form-control form-control-lg mb-2",id:"team",onChange:this.selectTeam},Object(d.h)("option",{value:""},"-- ",Object(d.h)(u.c,{id:"dog.veterinary.choose-team"},"Choose team")," --"),a&&a.map((function(t){return Object(d.h)(e,null,Object(d.h)("option",{value:t.id},t.name))}))),a&&a.map((function(s){return Object(d.h)(e,null,i===s.id&&Object(d.h)(e,null,Object(d.h)(w,{stores:t.props.stores,dogs:s.dogs,displayUser:c})))}))))},s}(d.Component))||o,w=Object(b.a)(i=function(t){function s(e){var s;return(s=t.call(this,e)||this).selectDog=function(e){var t=e.target.closest(".dogLine").dataset.id,n=s.state,a=n.selectedDogs,c=n.missingChipId,r=parseInt(t,10),o=a.indexOf(r);if(s.props.dogs.find((function(e){return e.id===r})).chipId.length<10)return c[r]=!c[r],s.setState({missingChipId:c}),"";-1===o?a.push(r):a.splice(o,1),s.setState({selectedDogs:a})},s.selectDogSection=function(e){var t=e.target.closest("i").dataset.id,n=s.state,a=n.selectedDogs,c=n.missingChipId,r=parseInt(t,10),o=a.indexOf(r);if(s.props.dogs.find((function(e){return e.id===r})).chipId.length<10)return c[r]=!c[r],s.setState({missingChipId:c}),"";-1===o?a.push(r):a.splice(o,1),s.setState({selectedDogs:a})},s.selectAllDogs=function(){for(var e=s.props.dogs,t=e.filter((function(e){return e.chipId.length>10})).map((function(e){return e.id})),n=e.filter((function(e){return e.chipId.length<10})).map((function(e){return e.id})),a=s.state.missingChipId,c=0,r=n.length;c<r;c+=1){var o=n[c];a[o]=!a[o]}s.setState({selectedDogs:t,missingChipId:a})},s.removeAllDogs=function(){s.setState({selectedDogs:[]})},s.selectVaccine=function(e){var t=e.target.closest("tr").dataset.id,n=s.state.selectedVaccines,a=parseInt(t,10),c=n.indexOf(a);-1===c?n.push(a):n.splice(c,1),s.setState({selectedVaccines:n})},s.addVaccinesToDogs=function(){return new Promise((function(e,t){var n,c,r,o,i,l,d,h,b,u,g,p,m,O;for(r=(n=s.state).selectedVaccines,o=n.vaccineDate,d=(i=s.props.stores).vaccineLogStore,b=[],u=s.props.dogs,g={id:(h=(l=i.userStore).user).id,firstname:h.firstname,lastname:h.lastname,email:h.email,image:h.image},p=function(e){for(var t=c[e],s=u.find((function(e){return e.id===t})),n={id:s.id,user:s.user,team:s.team,name:s.name,shortname:s.shortname,chipId:s.chipId},i=function(e){var t=r[e],s=j.find((function(e){return e.id===t})),c={date:o,id:s.id,name:s.name,agens:s.agens,comment:s.comment};b.push({dog:a({},n),vaccine:a({},c),veterinary:a({},g)})},l=0,d=r.length;l<d;l+=1)i(l)},m=0,O=(c=n.selectedDogs).length;m<O;m+=1)p(m);return Promise.resolve(d.insert({data:b})).then((function(){try{return s.setState({data:b,selectedDogs:[],selectedVaccines:[]}),l.addVaccineLogStatuses(b),e()}catch(e){return t(e)}}),t)}))},s.toggleShowAddVaccineToDogs=function(){var e=s.state.showAddVaccineToDogs;s.setState({showAddVaccineToDogs:!(void 0!==e&&e)})},s.toggleUploadedImages=function(){var e=s.state.showUploadedImages;s.setState({showUploadedImages:!(void 0!==e&&e)})},s.hideAdminShit=function(){var e=s.state.showAdminShit;s.setState({showAdminShit:!(void 0===e||e)})},s.state={missingChipId:{},selectedDogs:[],selectedVaccines:[],vaccineDate:h.a.isoDate(new Date,!1,!1,!0)},s}return r(s,t),s.prototype.render=function(){var t=this,s=this.state,n=s.selectedDogs,a=s.selectedVaccines,c=s.missingChipId,r=s.data,o=s.showAddVaccineToDogs,i=void 0!==o&&o,l=s.vaccineDate,b=s.showUploadedImages,m=s.showAdminShit,O=void 0===m||m,f=this.props.stores.userStore,v=f.isAdmin,y=f.vaccineLogStatuses,w=this.props.dogs,x=j.filter((function(e){return a.indexOf(e.id)>-1})).map((function(e){return e.agens.map((function(e){return e.name}))})).flat();return Object(d.h)(e,null,Object(d.h)("div",{class:"w-100 mt-3"},v&&O&&Object(d.h)("button",{class:"btn btn-sm btn-block btn-outline-danger mt-2",onClick:this.hideAdminShit},"Hide admin stuff"),v&&O&&Object(d.h)("button",{class:"btn btn-sm btn-block "+(b?"btn-secondary":"btn-outline-secondary")+" mt-2",onClick:this.toggleUploadedImages},b?Object(d.h)(e,null,Object(d.h)(u.c,{id:"dog.veterinary.hide-uploaded-images"},"Hide uploaded images")):Object(d.h)(e,null,Object(d.h)(u.c,{id:"dog.veterinary.show-uploaded-images"},"Show uploaded images"))),Object(d.h)("button",{class:"btn btn-lg btn-block btn-outline-success mt-2",onClick:this.selectAllDogs},Object(d.h)(u.c,{id:"dog.veterinary.select-all-dogs"},"Select all dogs")),n&&n.length>0&&Object(d.h)(e,null,Object(d.h)("button",{class:"btn btn-sm btn-block btn-outline-danger mt-2",onClick:this.removeAllDogs},Object(d.h)(u.c,{id:"dog.veterinary.remove-all-dogs"},"Remove all dogs"))),w&&w.map((function(s){var a;s.images&&s.images[0]&&(a=s.images[0]),s.image&&(a=s.image);var r=n.indexOf(s.id)>-1,o=c[s.id];return Object(d.h)(e,null,Object(d.h)("div",{class:"d-flex w-100 dogLine mt-2",onClick:t.selectDog,"data-id":s.id},Object(d.h)("div",{class:"position-relative"},Object(d.h)("div",{class:"text-center border rounded-circle imageRounded text-muted pt-2",style:a?"background-image: url('"+a.s3ThumbLink+"'); background-size: cover;":""},!a&&Object(d.h)("span",{class:"font-weight-lighter",style:"font-size: 35px;"},h.a.ucfirst(s.name,!0))),r&&Object(d.h)("span",{class:"position-absolute display-3",style:"top: 0px; left: 0px;"},Object(d.h)("i",{class:"fas fa-check text-success"})),o&&Object(d.h)("span",{class:"position-absolute display-4",style:"top: 0px; left: 0px;"},Object(d.h)("i",{class:"fas fa-hand-paper text-danger"}))),Object(d.h)("div",{class:"flex-grow-1 pl-3 text-overflow"},Object(d.h)("span",{class:"float-right"},s.birth&&Object(d.h)("span",{class:"mr-2"},h.a.age(s.birth,s.deceased)),"female"===s.gender?Object(d.h)("i",{class:"fas fa-venus"}):Object(d.h)("i",{class:"fas fa-mars"})),Object(d.h)("h5",null,s.name," ",s.shortname&&Object(d.h)("span",{class:"font-weight-lighter"}," - '",s.shortname,"'")),Object(d.h)("div",null,Object(d.h)("span",{class:"text-muted"},s.chipId&&Object(d.h)(e,null,Object(d.h)("i",{class:"fas fa-microchip"})," ",s.chipId))),Object(d.h)("div",{style:"overflow: hidden;"},Object(d.h)("div",{class:"d-flex flex-row flex-nowrap py-2",style:"overflow: auto;"},y&&y.filter((function(e){return e.chipId===s.chipId})).map((function(t){return Object(d.h)("span",{class:"badge badge-"+(t.inKarens?"warning":"success")+" mr-2 mb-1"},t.vaccineAgens.name,Object(d.h)("span",{class:"font-weight-lighter ml-2"},Object(d.h)("i",{class:"fas fa-calendar-check"})," ",h.a.isoDate(t.vaccineAgens.durationEnd,!1,!1,!0),t.inKarens&&Object(d.h)(e,null,Object(d.h)("br",null),"(karens: ",h.a.format(t.karensDaysLeft,0)," days left)")))})))),v&&O&&b&&Object(d.h)(e,null,Object(d.h)("h5",null,"Uploaded files for this dog:"),s.files&&s.files.length>0?Object(d.h)(e,null,Object(d.h)(p.a,{stores:t.props.stores,images:s.files.filter((function(e){return e.s3LargeLink}))})):Object(d.h)(e,null)))))}))),Object(d.h)("div",{class:"mt-5"},n&&n.length>0&&Object(d.h)(e,null,Object(d.h)("div",{class:"form-row align-items-center"},Object(d.h)("div",{class:"col-12"},Object(d.h)("h5",null,Object(d.h)("i",{class:"fas fa-syringe"})," ",Object(d.h)(u.c,{id:"dog.addlog.vaccine-type"},"Vaksinetype")),Object(d.h)("table",{class:"table table-striped"},Object(d.h)("thead",null,Object(d.h)("tr",null,Object(d.h)("th",{scope:"col",style:"width: 100px;"},"Â "),Object(d.h)("th",{scope:"col"},Object(d.h)(u.c,{id:"dog.veterinary.name"},"Name")))),Object(d.h)("tbody",null,j&&j.map((function(s){var n=a.indexOf(s.id)>-1;return Object(d.h)("tr",{"data-id":s.id,onClick:t.selectVaccine},Object(d.h)("td",null,n?Object(d.h)(e,null,Object(d.h)("div",{class:"display-4 text-center"},Object(d.h)("i",{class:"fas fa-check text-success"}))):Object(d.h)(e,null,Object(d.h)("div",{class:"display-4 border rounded-lg text-center"},Object(d.h)("i",{class:"fas fa-radio text-success"})))),Object(d.h)("td",null,s.name,Object(d.h)("br",null),Object(d.h)("small",null,s.agens.map((function(t){return Object(d.h)(e,null,Object(d.h)("span",{class:"badge badge-dark mr-2 mt-1"},t.name," (",t.durationMonths," months, ",t.karensDays," days)"))})))))}))))),Object(d.h)("div",{class:"col-12 pt-4"},Object(d.h)("label",{for:"team"},Object(d.h)("i",{class:"fas fa-dog"})," ",Object(d.h)(u.c,{id:"dog.veterinary.choosen-dogs"},"Valgte hunder")),Object(d.h)("div",{class:"d-flex flex-wrap"},w&&w.map((function(s){var a;if(s.images&&s.images[0]&&(a=s.images[0]),s.image&&(a=s.image),!(n.indexOf(s.id)>-1))return"";var c=y.filter((function(e){return e.chipId===s.chipId})).map((function(e){return e.vaccineAgens.name})).flat();return Object(d.h)(e,null,Object(d.h)("section",{class:"p-2 position-relative",style:"width: 120px;"},Object(d.h)("div",{class:"text-center border rounded-circle imageRounded text-muted pt-2",style:a?"background-image: url('"+a.s3ThumbLink+"');":""},!a&&Object(d.h)("span",{class:"font-weight-lighter",style:"font-size: 35px;"},h.a.ucfirst(s.name,!0))),Object(d.h)("small",null,s.name),Object(d.h)("br",null),Object(d.h)("small",{class:"text-muted"},s.birth&&Object(d.h)("span",{class:"mr-2"},h.a.age(s.birth,s.deceased)),"female"===s.gender?Object(d.h)("i",{class:"fas fa-venus"}):Object(d.h)("i",{class:"fas fa-mars"})),x&&Object(d.h)(e,null,x.filter((function(e){return c.indexOf(e)>-1})).map((function(t){return Object(d.h)(e,null,Object(d.h)("span",{class:"badge badge-danger mr-2 mb-1"},Object(d.h)("i",{class:"fas fa-exclamation-triangle"})," ",t))}))),Object(d.h)("div",{class:"position-absolute",style:"top: 0px; right: 0px; font-size: 2.0em;"},Object(d.h)("i",{class:"fas fa-times-circle text-danger",onClick:t.selectDogSection,"data-id":s.id}))))})))),Object(d.h)("div",{class:"col-12 pt-4"},Object(d.h)("label",null,Object(d.h)("i",{class:"fas fa-syringe"})," ",Object(d.h)(u.c,{id:"dog.veterinary.chosen-vaccines"},"Valgte vaksiner")),j&&j.map((function(t){return a.indexOf(t.id)>-1?Object(d.h)("div",{class:"mb-3"},Object(d.h)("span",{class:"font-weight-lighter"},"+")," ",t.name,Object(d.h)("br",null),Object(d.h)("small",null,t.agens.map((function(t){return Object(d.h)(e,null,Object(d.h)("span",{class:"badge badge-dark mr-2 mt-1"},t.name," (",t.durationMonths," months, ",t.karensDays," days)"))})))):""}))),a&&a.length>0?Object(d.h)(e,null,Object(d.h)("div",{class:"col-12 pt-4"},Object(d.h)("label",null,Object(d.h)("i",{class:"fas fa-calendar-alt"})," ",Object(d.h)(u.c,{id:"dog.veterinary.vaccine-date"},"Dato for vaksine")),Object(d.h)(u.b,null,Object(d.h)("input",{type:"date",class:"form-control form-control-lg mb-2",id:"vetSearch",placeholder:Object(d.h)(u.c,{id:"dog.veterinary.vaccine-date-placeholder"},"Velg dato for vaksine. Dersom vaksine er dagens dato, sÃ¥ trenger du ikke velge."),onInput:Object(g.a)(this,"vaccineDate"),value:l}))),i?Object(d.h)(e,null,Object(d.h)("div",{class:"col-12 pt-4"},Object(d.h)("h5",null,Object(d.h)(u.c,{id:"dog.veterinary.are-you-sure",fields:{dogs:n.length}},"Are you sure you want to add vaccine to ",n.length," dog?")),Object(d.h)("button",{type:"button",class:"btn btn-lg btn-block btn-success mb-2",onClick:this.addVaccinesToDogs},Object(d.h)(u.c,{id:"dog.veterinary.yes-iam-sure"},"Yes, I'm sure!")),Object(d.h)("button",{type:"button",class:"btn btn-lg btn-block btn-danger mb-2",onClick:this.toggleShowAddVaccineToDogs},Object(d.h)(u.c,{id:"dog.veterinary.cancel"},"Cancel")))):Object(d.h)(e,null,Object(d.h)("div",{class:"col-12 pt-4"},Object(d.h)("button",{type:"button",class:"btn btn-lg btn-block btn-success mb-2",onClick:this.toggleShowAddVaccineToDogs},Object(d.h)(u.c,{id:"dog.veterinary.add-vaccine-to-dogs",fields:{dogs:n.length}},"Add vaccine to ",n.length," dogs"))))):Object(d.h)(e,null,Object(d.h)("h3",{class:"text-muted mt-4"},Object(d.h)(u.c,{id:"dog.veterinary.choose-vaccines"},"Velg vaksiner i listen over")))))),r&&Object(d.h)(e,null,Object(d.h)("div",{class:"mt-5"},Object(d.h)("div",{class:"row"},Object(d.h)("div",{class:"col-12 pt-4"},Object(d.h)("h5",null,Object(d.h)(u.c,{id:"dog.veterinary.recepipt"},"Receipt")),Object(d.h)("table",{class:"table table-striped"},Object(d.h)("thead",null,Object(d.h)("tr",null,Object(d.h)("th",{scope:"col"},Object(d.h)(u.c,{id:"dog.veterinary.dog"},"Dog")),Object(d.h)("th",{scope:"col"},Object(d.h)(u.c,{id:"dog.veterinary.vaccine"},"Vaccine")))),Object(d.h)("tbody",null,r&&r.map((function(t){var s=t.dog,n=t.vaccine;return Object(d.h)(e,null,Object(d.h)("tr",null,Object(d.h)("td",null,s.name,Object(d.h)("br",null),Object(d.h)("small",{class:"text-muted"},s.chipId)),Object(d.h)("td",null,n.name,Object(d.h)("small",null,n.agens.map((function(t){return Object(d.h)(e,null,Object(d.h)("span",{class:"badge badge-dark mr-2 mt-1"},t.name," (",t.durationMonths," months, ",t.karensDays," days)"))}))))))})))))))))},s}(d.Component))||i,x=Object(b.a)(l=function(t){function s(e){var s;return(s=t.call(this,e)||this).searchForMusher=function(e){return new Promise((function(t,n){var a,c;return e.preventDefault(),a=s.props.stores.userStore,c=s.state.search,s.setState({isSearcing:!0,displayUser:null}),Promise.resolve(a.searchUsers({search:c})).then((function(){try{return s.setState({isSearcing:!1}),t()}catch(e){return n(e)}}),n)}))},s.selectMusher=function(e){return new Promise((function(t,n){function a(){return t()}var c,r,o;if(c=e.target.closest(".musherLine").dataset.id,r=s.state.displayUser,o=parseInt(c,10),!isNaN(o)){return r===o?(s.setState({displayUser:null}),i.call(this)):(s.setState({displayUser:o}),Promise.resolve(s.props.stores.userStore.getDogs({id:o})).then(function(){try{return i.call(this)}catch(e){return n(e)}}.bind(this),n));function i(){return a.call(this)}}return a.call(this)}))},s.state=a({},v),s}r(s,t);var n=s.prototype;return n.componentDidMount=function(){},n.componentWillReceiveProps=function(){},n.render=function(){var t=this,s=this.state,n=s.displayUser,a=s.isSearcing,c=this.props.stores,r=c.userStore,o=r.searchUsersResult,i=r.searchUserTeams,l=r.user,b=this.props,p=b.col,j=void 0===p?12:p,v=b.offset,w=void 0===v?0:v;if(!r.isVeterinary)return Object(d.h)(e,null,Object(d.h)("div",{class:"container-fluid h-100"},Object(d.h)("div",{class:"row h-100"},Object(d.h)("div",{class:"col-12 text-center my-auto"},Object(d.h)("div",{class:"display-1 text-danger"},Object(d.h)("i",{class:"fas fa-hand-paper"})),Object(d.h)("h5",null,Object(d.h)(u.c,{id:"dog.veterinary.no-access"},"No access!")),Object(d.h)("p",null,Object(d.h)(u.c,{id:"dog.veterinary.attempts-logged"},"All attempts are logged and reported.")),Object(d.h)("a",{class:"mt-3 btn btn-lg btn-primary",href:"/"},Object(d.h)(u.c,{id:"dog.veterinary.goto-frontpage"},"Go to the frontpage"))))));var x=m.a.getImage({user:l}),k=m.a.displayNameShort(l),S=m.a.displayName(l,!0);return Object(d.h)(e,null,Object(d.h)("div",{class:"container-fluid",style:"margin-bottom: "+f+"; margin-top: "+O+";"},Object(d.h)("div",{class:"row"},Object(d.h)("div",{class:"col-"+j+" offset-"+w+" col-sm-8 col-lg-8 offset-sm-2 offset-lg-2"},Object(d.h)("div",{class:"d-flex position-relative mb-3"},Object(d.h)("div",{class:"text-center border rounded-circle imageRounded imageRoundedSmall",style:x?'background-image: url("'+x+'"); background-size: cover;':""},!x&&Object(d.h)("div",{class:"text-muted",style:"font-size: 20px; padding-top: 3px;"},k)),Object(d.h)("div",{class:"flex-grow-1 pl-3 text-overflow",style:"line-height: 0.9em;"},Object(d.h)("h1",{class:"mb-0"},Object(d.h)(u.c,{id:"dog.veterinary.title"},"Veterinary search")),Object(d.h)("small",{class:"text-muted"},S))),Object(d.h)("form",{onSubmit:this.searchForMusher},Object(d.h)("div",{class:"form-row align-items-center"},Object(d.h)("div",{class:"col-10"},Object(d.h)("label",{class:"sr-only",for:"vetSearch"},Object(d.h)(u.c,{id:"dog.veterinary.name"},"Name")),Object(d.h)(u.b,null,Object(d.h)("input",{type:"text",class:"form-control form-control-lg mb-2",id:"vetSearch",placeholder:Object(d.h)(u.c,{id:"dog.veterinary.search-placeholder"},"Search for musher by email, cellphone or name..."),onInput:Object(g.a)(this,"search")}))),Object(d.h)("div",{class:"col-2"},Object(d.h)("button",{type:"button",class:"btn btn-lg btn-primary mb-2",onClick:this.searchForMusher},Object(d.h)("i",{class:"fas fa-search"})))))),Object(d.h)("div",{class:"col-"+j+" offset-"+w+" col-sm-8 col-lg-8 offset-sm-2 offset-lg-2 mt-3"},a&&Object(d.h)(e,null,Object(d.h)("div",{class:"spinner-border text-primary",role:"status"},Object(d.h)("span",{class:"sr-only"},Object(d.h)(u.c,{id:"dog.veterinary.searching"},"Searcing...")))),o&&0!==o.length?Object(d.h)(e,null,o&&o.filter((function(e){return!n||e.id===n})).map((function(s){var a;return s.images&&s.images[0]&&(a=s.images[0]),s.image&&(a=s.image),Object(d.h)(e,null,Object(d.h)("div",{class:"d-flex pointerCursor musherLine mb-3",onClick:t.selectMusher,"data-id":s.id},Object(d.h)("div",{class:"text-center border rounded-circle imageRounded text-muted pt-2",style:a?"background-image: url('"+a.s3ThumbLink+"');":""},!a&&Object(d.h)("span",{class:"font-weight-lighter",style:"font-size: 35px;"},s.firstname?Object(d.h)(e,null,h.a.ucfirst(s.firstname,!0),h.a.ucfirst(s.lastname,!0)):Object(d.h)(e,null,h.a.ucfirst(s.email,!0)))),Object(d.h)("div",{class:"flex-grow-1 pl-3 text-overflow"},s.firstname," ",s.lastname,Object(d.h)("br",null),Object(d.h)("i",{class:"fas fa-mobile-alt"})," ",s.cellphone,Object(d.h)("i",{class:"fas fa-envelope ml-3"})," ",s.email)),n===s.id&&Object(d.h)(e,null,Object(d.h)(y,{stores:t.props.stores,teams:i,displayUser:n})))}))):Object(d.h)(e,null,"Â ")))))},s}(d.Component))||l;t.default=x}.call(this,s("hosL").Fragment)}}]);
//# sourceMappingURL=route-veterinary.chunk.85774.js.map