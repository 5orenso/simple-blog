{"version":3,"sources":["webpack:///./routes/public/race/style.css","webpack:///./routes/public/race/header.js","webpack:///./routes/public/race/raceText.js","webpack:///./routes/public/race/index.js"],"names":["module","exports","initialState","menu","profile","main","searchText","Navigation","observer","props","toggleDropdown","e","state","menuName","target","dataset","name","parentNode","setState","toggleDarkmode","stores","appState","toggleViewmode","mode","reloadApp","window","location","reload","adminLoadAll","userStore","getInfo","changeLanguage","lang","value","console","log","user","email","setLanguage","language","search","route","render","this","darkmode","notifications","filter","read","class","style","href","src","height","type","data-name","onClick","id","className","activeClassName","onInput","selected","Component","text","finalText","regex","RegExp","replace","MARGIN_TOP","mu","marginTop","MARGIN_BOTTOM","marginBottom","subMenuMarginTop","isLoading","submenu","jwtToken","util","getJwtToken","PublicRace","toggleShowNews","showNews","loadRace","raceStore","load","query","sort","countAll","loadNews","newsStore","tag","isAdmin","showall","componentDidMount","componentWillReceiveProps","nextProps","title","isInApp","races","newsList","news","role","images","s3XXLargeLink","active","markdown","replaceImages","ingress","markdownOpts","getMarkdownOptions","body","useEffect","document","map","race","today","Date","status","startDate","endDate","signupStartDate","signupEndDate","liveRace","s3MediumLink","classes","a","b","distance","currentClass","formatDate","locale"],"mappings":"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","file":"78.chunk.1d4b7.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"pointerCursor\":\"pointerCursor__1W6mM\"};","import { h, Component } from 'preact';\nimport { Link } from 'preact-router/match';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport linkState from 'linkstate';\nimport { route } from 'preact-router';\nimport { Text, Localizer } from 'preact-i18n';\n\nimport style from './style.css';\n\n\nconst initialState = {\n    menu: {\n\t\tprofile: false,\n\t\tmain: false,\n\t},\n\tsearchText: '',\n};\n\n@observer\nclass Navigation extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            ...initialState,\n        };\n    }\n\n\ttoggleDropdown = (e) => {\n\t\tconst { menu } = this.state;\n\t\tlet menuName = e.target.dataset.name;\n\t\tif (!menuName && e.target.parentNode) {\n\t\t\tmenuName = e.target.parentNode.dataset.name;\n\t\t}\n\t\tif (menuName) {\n\t\t\tmenu[menuName] = !menu[menuName];\n\t\t}\n\t\tthis.setState({ menu });\n\t}\n\n\ttoggleDarkmode = (e) => {\n        const { appState } = this.props.stores;\n\t\tappState.toggleDarkmode();\n\t\tthis.toggleDropdown(e);\n\t}\n\n\ttoggleViewmode = (e) => {\n        const { appState } = this.props.stores;\n\t\tlet mode = e.target.dataset.mode;\n\t\tif (!mode && e.target.parentNode) {\n\t\t\tmode = e.target.parentNode.dataset.mode;\n\t\t}\n\t\tappState.toggleViewmode(mode);\n\t\tthis.toggleDropdown(e);\n\t}\n\n\treloadApp = () => {\n\t\twindow.location.reload(true);\n\t}\n\n\tadminLoadAll = async (e) => {\n        const { userStore } = this.props.stores;\n        await userStore.getInfo(true);\n\t}\n\n\tchangeLanguage = (e) => {\n\t\tconst lang = e.target.value;\n\t\tconsole.log('changeLanguage', lang);\n\t\tconst { appState, userStore } = this.props.stores;\n\t\tconst { user = {} } = userStore;\n\t\tif (user.email) {\n\t\t\tuserStore.setLanguage({ email: user.email, language: lang });\n\t\t}\n\t\tappState.setLanguage(lang);\n\t}\n\n\tsearch = () => {\n\t\tconst { searchText } = this.state;\n\t\troute(`/search/${searchText}`);\n\t}\n\n    render() {\n\t\tconst { menu, searchText } = this.state;\n        const { appState, userStore } = this.props.stores;\n        const { darkmode, viewmode, isCordova } = appState;\n\t\tconst { allUsers, isAdmin, user, notifications = [] } = userStore;\n\t\tconst unreadNotificatins = notifications.filter(e => !e.read);\n\t\tconst unread = unreadNotificatins.length || 0;\n\t\tconst { language = 'en' } = user;\n\n\t\treturn (\n\t\t\t<nav class='navbar navbar-expand-lg navbar-themed fixed-top py-1' style='z-index: 99999;'>\n\t\t\t\t<a class='navbar-brand' href='/race/'>\n\t\t\t\t\t{/* <img src={`./assets/logo-jul-2020-v2-${darkmode ? 'black' : 'white'}.png`} height='30' class='position-absolute' style='top: 8px; left: 6px' /> */}\n\t\t\t\t\t<img src={`./assets/homerun-race-logo-2-${darkmode ? 'white-' : ''}small.png`} height='37' class='position-absolute' style='top: 5px; left: 6px' />\n\t\t\t\t\t<span class='font-weight-normal' style='margin-left: 30px; font-size: 20px;'>Homerun Race</span>\n\t\t\t\t</a>\n\n\t\t\t\t<button class='navbar-toggler' type='button'\n\t\t\t\t\tdata-name='main'\n\t\t\t\t\tonClick={this.toggleDropdown}\n\t\t\t\t>\n\t\t\t\t\t<span class='navbar-toggler-icon' />\n\t\t\t\t</button>\n\n\t\t\t\t<div class={`collapse navbar-collapse ${menu.main ? 'show' : ''}`} id='navbarSupportedContent'>\n\t\t\t\t\t<ul class='navbar-nav mr-auto ml-5'>\n\t\t\t\t\t\t<li class='nav-item'>\n\t\t\t\t\t\t\t<Link className='nav-link' activeClassName={'active'} href='/race'\n\t\t\t\t\t\t\t\tdata-name='main'\n\t\t\t\t\t\t\t\tstyle='font-size: 1.0em !important;'\n\t\t\t\t\t\t\t\tonClick={this.toggleDropdown}\n\t\t\t\t\t\t\t><i class='fas fa-flag-checkered' /> <Text id='header.races'>Løpene</Text></Link>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t\t<li class='nav-item'>\n\t\t\t\t\t\t\t<Link className='nav-link' activeClassName={'active'} href='/race/support'\n\t\t\t\t\t\t\t\tdata-name='main'\n\t\t\t\t\t\t\t\tstyle='font-size: 1.0em !important;'\n\t\t\t\t\t\t\t\tonClick={this.toggleDropdown}\n\t\t\t\t\t\t\t><i class='far fa-question-circle' /> <Text id='header.support'>Support</Text></Link>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t\t<li class='nav-item'>\n\t\t\t\t\t\t\t<Link className='nav-link' activeClassName={'active'} href='/race/news'\n\t\t\t\t\t\t\t\tdata-name='main'\n\t\t\t\t\t\t\t\tstyle='font-size: 1.0em !important;'\n\t\t\t\t\t\t\t\tonClick={this.toggleDropdown}\n\t\t\t\t\t\t\t><i class='fas fa-quote-right' /> <Text id='header.news'>Nyheter</Text></Link>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t\t{/* <li class='nav-item'>\n\t\t\t\t\t\t\t<Link className='nav-link' activeClassName={'active'} href='/'\n\t\t\t\t\t\t\t\tdata-name='main'\n\t\t\t\t\t\t\t\tonClick={this.toggleDropdown}\n\t\t\t\t\t\t\t><i class='fas fa-dog' /> <Text id='header.backtoapp'>The Musher</Text></Link>\n\t\t\t\t\t\t</li> */}\n\t\t\t\t\t\t{/* <li class='nav-item'>\n\t\t\t\t\t\t\t<Link className='nav-link' activeClassName={'active'} href='/news'\n\t\t\t\t\t\t\t\tdata-name='main'\n\t\t\t\t\t\t\t\tonClick={this.toggleDropdown}\n\t\t\t\t\t\t\t><i class='fas fa-quote-right' /> <Text id='header.news'>Nyheter</Text></Link>\n\t\t\t\t\t\t</li> */}\n\t\t\t\t\t\t{/* <li class='nav-item d-block d-lg-none'>\n\t\t\t\t\t\t\t<Link className='nav-link' activeClassName={'active'} href='/howto'\n\t\t\t\t\t\t\t\tdata-name='main'\n\t\t\t\t\t\t\t\tonClick={this.toggleDropdown}\n\t\t\t\t\t\t\t><i class='fas fa-quote-right' /> <Text id='header.howto'>Hvordan gjør man det?</Text></Link>\n\t\t\t\t\t\t</li> */}\n\t\t\t\t\t</ul>\n\n\t\t\t\t\t<ul class='navbar-nav ml-auto '>\n\t\t\t\t\t\t{/* <li class='nav-item mr-2'>\n\t\t\t\t\t\t\t<Link className='nav-link' activeClassName={'active'}\n\t\t\t\t\t\t\t\thref='/users/notifications'\n\t\t\t\t\t\t\t\tdata-name='main'\n\t\t\t\t\t\t\t\tonClick={this.toggleDropdown}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<i class='fas fa-bell mr-1' />\n\t\t\t\t\t\t\t\t{unread > 0 && <>\n\t\t\t\t\t\t\t\t\t<span class='badge badge-pill badge-danger'>{unread > 9 ? '9+' : unread}</span>\n\t\t\t\t\t\t\t\t</>}\n\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t</li> */}\n\t\t\t\t\t\t<li class='nav-item mr-2'>\n\t\t\t\t\t\t\t<div class='form-row align-items-center'>\n\t\t\t\t\t\t\t\t<div class='col-auto my-1' style='width: 80px;'>\n\t\t\t\t\t\t\t\t\t<select class='custom-select'\n\t\t\t\t\t\t\t\t\t\tstyle='background-color: inherit; border: none; padding: 0; height: 1.1em; font-size: 0.9em;'\n\t\t\t\t\t\t\t\t\t\tonInput={this.changeLanguage}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<option value='no' selected={language === 'no'}>🇳🇴 NO</option>\n\t\t\t\t\t\t\t\t\t\t<option value='en' selected={language === 'en'}>🇬🇧 EN</option>\n\t\t\t\t\t\t\t\t\t\t<option value='es' selected={language === 'es'}>🇪🇸 ES</option>\n\t\t\t\t\t\t\t\t\t\t<option value='de' selected={language === 'de'}>🇩🇪 DE</option>\n\t                                    <option value='fr' selected={language === 'fr'}>🇫🇷 FR</option>\n\t                                    <option value='ru' selected={language === 'ru'}>🇷🇺 RU</option>\n\t                                    <option value='se' selected={language === 'se'}>🇸🇪 SE</option>\n\t\t\t\t\t\t\t\t\t</select>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t\t<li class='nav-item d-block d-lg-none'>\n\t\t\t\t\t\t\t<Link className='nav-link' activeClassName={'active'}\n\t\t\t\t\t\t\t\tdata-name='main'\n\t\t\t\t\t\t\t\tonClick={this.toggleDarkmode}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<i class={`${darkmode ? 'fas text-warning' : 'far'} fa-moon`} /> <Text id='header.darkmode'>Nattmodus</Text>\n\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t\t<li class='nav-item mr-2 d-none d-lg-block'>\n\t\t\t\t\t\t\t<button class='btn btn-link'\n\t\t\t\t\t\t\t\tdata-name='profile'\n\t\t\t\t\t\t\t\tonClick={this.toggleDarkmode}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<i class={`${darkmode ? 'fas text-warning' : 'far'} fa-moon`} />\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t\t{/* <li class='nav-item ml-auto d-none d-lg-block'>\n\t\t\t\t\t\t\t<form class='form-inline my-2 my-lg-0'>\n\t\t\t\t\t\t\t\t<Localizer>\n\t\t\t\t\t\t\t\t\t<input class='form-control form-control-sm mr-sm-2' type='search' placeholder={<Text id='header.search-placeholder'>Søk etter det meste...</Text>}\n\t\t\t\t\t\t\t\t\t\tvalue={searchText}\n\t\t\t\t\t\t\t\t\t\tonInput={linkState(this, 'searchText')}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</Localizer>\n\t\t\t\t\t\t\t\t<button class='btn btn-sm btn-outline-success my-2 my-sm-0' type='button'\t\n\t\t\t\t\t\t\t\t\tonClick={this.search}\n\t\t\t\t\t\t\t\t><Text id='header.search'>Søk</Text></button>\n\t\t\t\t\t\t\t</form>\n\t\t\t\t\t\t</li> */}\n\t\t\t\t\t</ul>\n\n\t\t\t\t    \n\n\t\t\t\t</div>\n\t\t\t</nav>\n\t\t);\n\t}\n}\n\nexport default Navigation;\n","import { h, Component } from 'preact';\nimport { observer } from 'mobx-preact';\n\nconst initialState = {\n};\n\n@observer\nclass RaceText extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            ...initialState,\n        };\n    }\n\n    render() {\n\t\tconst { appState } = this.props.stores;\n\t\tconst { text } = this.props;\n\t\tconst { darkmode, language = 'en' } = appState;\n\n        let finalText = text;\n\n        const regex = new RegExp(`/<${language}>(.*?)<\\/${language}>/`);\n        const parsedText = text.replace(regex, '$1');\n        if (parsedText) {\n            finalText = text;\n        }\n\n\t\treturn (\n\t\t\t<>\n                {finalText}\n\t\t\t</>\n\t\t);\n\t}\n}\n\nexport default RaceText;\n","import { h, Component } from 'preact';\nimport { useEffect } from \"preact/hooks\";\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport { Text, Localizer } from 'preact-i18n';\nimport linkstate from 'linkstate';\nimport Markdown from 'preact-markdown';\nimport Header from './header';\nimport RaceText from './raceText';\n\nimport mu from '../../../lib/musher-util';\nconst MARGIN_TOP = mu.marginTop(true);\nconst MARGIN_BOTTOM = mu.marginBottom();\nconst SUB_MENU_MARGIN_TOP = mu.subMenuMarginTop();\n\nfunction PageTitle(title = '') {\n  useEffect(() => {\n    document.title = `Homerun Race - Race where you live`;\n  }, [title]);\n  return <h1>{title}</h1>;\n}\n\nconst initialState = {\n\tisLoading: false,\n\temail: '',\n\tsubmenu: 'ads',\n\tjwtToken: util.getJwtToken(),\n};\n\n@observer\nclass PublicRace extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            ...initialState,\n        };\n    }\n\n\tasync loadRace(props = this.props) {\n\t\tthis.setState({ isLoading: true });\n\t\tconst { raceStore } = props.stores;\n\t\tconst query = {};\n\t\tawait raceStore.load({ query, sort: '-startDate' });\n\t\traceStore.countAll();\n\t\tthis.setState({ isLoading: false });\n\t}\n\n\tasync loadNews(props = this.props) {\n\t\tthis.setState({ isLoading: true });\n\t\tconst { newsStore, userStore } = props.stores;\n\t\tconst { isAdmin } = userStore;\n\t\tconst query = {\n\t\t\ttag: props.tag,\n\t\t};\n\t\tif (isAdmin) {\n\t\t\tquery.showall = 1;\n\t\t}\n\t\tawait newsStore.load({ query });\n\t\tthis.setState({ isLoading: false });\n\t}\n\n\ttoggleShowNews = () => {\n\t\tconst { showNews } = this.state;\n\t\tthis.setState({\n\t\t\tshowNews: !showNews,\n\t\t});\n\t}\n\n\tcomponentDidMount() {\n\t\tthis.loadRace();\n\t\tthis.loadNews();\n\t}\n\n\tcomponentWillReceiveProps(nextProps) {\n\t\tthis.loadRace(nextProps);\n\t\tthis.loadNews(nextProps);\n\t}\n\n\trender() {\n\t\tconst { isInApp } = this.props;\n\t\tconst { appState, userStore, raceStore, newsStore } = this.props.stores;\n\t\tconst { allUsers, isAdmin, user, notifications = [] } = userStore;\n\t\tconst { races } = raceStore;\n\t\tconst { newsList } = newsStore;\n\t\tconst news = newsList && newsList[0] ? newsList[0] : null;\n\t\tconst { darkmode, language = 'en' } = appState;\n\t\tconst { showNews } = this.state;\n\n\t\treturn (\n\t\t\t<>\n\t\t\t\t<Header stores={this.props.stores} isInApp={isInApp} />\n\n\t\t\t\t<div class='container-fluid' style={`margin-bottom: ${MARGIN_BOTTOM}; margin-top: ${MARGIN_TOP};`}>\n\n\t\t\t\t\t{!news && <div class='d-flex justify-content-center my-5 py-5'>\n\t\t\t\t\t\t<div class='spinner-border text-primary' role='status'>\n\t\t\t\t\t\t\t<span class='sr-only'>Loading...</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>}\n\n\t\t\t\t\t{news && <div class='row clearfix' style='min-height: 450px;'>\n\t\t\t\t\t\t<div class='col-12'>\n\t\t\t\t\t\t\t<div class='jumbotron-thumb d-flex align-items-center'>\n\t\t\t\t\t\t\t\t{(news.images && news.images[0]) ? <img src={news.images[0].s3XXLargeLink} class='img-fluid border rounded-lg' style='min-width: 100%' /> : ''}\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t<div class='jumbotron py-2'>\n\t\t\t\t\t\t\t\t<h1 class='display-4'>{isAdmin && <i class={`fas fa-eye${news.active ? ' text-success' : '-slash text-danger'} float-right`} />} {news.title}</h1>\n\n\t\t\t\t\t\t\t\t<p class='lead'>\n\t\t\t\t\t\t\t\t\t<Markdown markdown={mu.replaceImages(news.ingress, news.images, language)} markdownOpts={mu.getMarkdownOptions()} />\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t</p>\n\n\t\t\t\t\t\t\t\t{showNews ? <>\n\t\t\t\t\t\t\t\t\t{/* {mu.nl2p(news.body).map((part, idx) => (\n\t\t\t\t\t\t\t\t\t\t<p \n\t\t\t\t\t\t\t\t\t\t\tclass='clearfix'\n\t\t\t\t\t\t\t\t\t\t\tdangerouslySetInnerHTML={{\n\t\t\t\t\t\t\t\t\t\t\t\t__html: replaceTags(part, news.images, idx)\n\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t\t\t<hr /> */}\n\t\t\t\t\t\t\t\t\t<Markdown markdown={mu.replaceImages(news.body, news.images, language)} markdownOpts={mu.getMarkdownOptions()} />\n\n\t\t\t\t\t\t\t\t\t<button class='btn btn-secondary btn-lg' type='button' onClick={this.toggleShowNews}>\n\t\t\t\t\t\t\t\t\t\t<Text id='races.hide-details'>Skjul detaljer</Text>  <i class='fas fa-caret-down' />\n\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t</> : <>\n\t\t\t\t\t\t\t\t\t<button class='btn btn-primary btn-lg' type='button' onClick={this.toggleShowNews}>\n\t\t\t\t\t\t\t\t\t\t<Text id='races.read-more'>Les mer</Text> <i class='fas fa-caret-right' />\n\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t</>}\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>}\n\t\t\t\t\t<div class='row'>\n\t\t\t\t\t\t<div class='col-12 bg-light'>\n\t\t\t\t\t\t\t<Localizer>\n\t\t\t\t\t\t\t\t{PageTitle(<Text id='races.races'>Løpene</Text>)}\n\t\t\t\t\t\t\t</Localizer>\n\t\t\t\t\t\t\t{isAdmin && <>\n\t\t\t\t\t\t\t\t<a href='/race/new/edit' class='position-absolute btn btn-sm btn-primary' style='top: 0px; right: 15px;'>\n\t\t\t\t\t\t\t\t\t<i class='fas fa-plus-circle' /> <Text id='race.new'>Nytt løp</Text>\n\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t</>}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class='row mt-3'>\n\t\t\t\t\t\t{!races && <div class='d-flex justify-content-center my-5 py-5'>\n\t\t\t\t\t\t\t<div class='spinner-border text-primary' role='status'>\n\t\t\t\t\t\t\t\t<span class='sr-only'>Loading...</span>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>}\n\n\t\t\t\t\t\t{races && races.map(race =>  {\n\t\t\t\t\t\t\tconst today = new Date();\n\t\t\t\t\t\t\tlet status = '';\n\t\t\t\t\t\t\tif (today >= new Date(race.startDate) && today <= new Date(race.endDate)) {\n\t\t\t\t\t\t\t\tstatus = 'race';\n\t\t\t\t\t\t\t} else if (today >= new Date(race.signupStartDate) && today <= new Date(race.signupEndDate)) {\n\t\t\t\t\t\t\t\tstatus = 'signup';\n\t\t\t\t\t\t\t} else if (today > new Date(race.endDate)) {\n\t\t\t\t\t\t\t\tstatus = 'done';\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\treturn (<>\n\t\t\t\t\t\t\t\t<div class='col-12 col-sm-6 col-md-4 mb-3'>\n\n\t\t\t\t\t\t\t\t\t<div class='card position-relative'>\n\t\t\t\t\t\t\t\t\t\t<h5 class='position-absolute' style='top: 10px; right: 10px;'>\n\t\t\t\t\t\t\t\t\t\t\t{status === 'signup' && <>\n\t\t\t\t\t\t\t\t\t\t\t\t<div class='spinner-grow text-primary' role='status' />\n\t\t\t\t\t\t\t\t\t\t\t</>}\n\t\t\t\t\t\t\t\t\t\t\t{status === 'race' && <>\n\t\t\t\t\t\t\t\t\t\t\t\t<div class='spinner-grow text-danger' role='status' />\n\t\t\t\t\t\t\t\t\t\t\t</>}\n\t\t\t\t\t\t\t\t\t\t\t{status === 'done' && <>\n\t\t\t\t\t\t\t\t\t\t\t\t<span><i class='fas fa-check text-success' /></span>\n\t\t\t\t\t\t\t\t\t\t\t</>}\n\t\t\t\t\t\t\t\t\t\t</h5>\n\t\t\t\t\t\t\t\t\t\t<h5 class='card-header'>\n\t\t\t\t\t\t\t\t\t\t\t{isAdmin && <i class={`fas fa-eye${race.active ? ' text-success' : '-slash text-danger'} float-right`} />}\n\t\t\t\t\t\t\t\t\t\t\t{race.title}\n\t\t\t\t\t\t\t\t\t\t</h5>\n\t\t\t\t\t\t\t\t\t\t<div class='list-thumb d-flex align-items-center position-relative'>\n\t\t\t\t\t\t\t\t\t\t\t<h5 class='position-absolute' style='top: 3px; right: 5px;'>\n\t\t\t\t\t\t\t\t\t\t\t\t{status === 'signup' && !race.liveRace && <>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span class='badge badge-primary border border-white ml-2'><Text id='races.signup-open'>Påmelding åpen</Text></span>\n\t\t\t\t\t\t\t\t\t\t\t\t</>}\n\t\t\t\t\t\t\t\t\t\t\t\t{status === 'race' && <>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span class='badge badge-danger border border-white ml-2'><Text id='races.race-in-progress'>Løp pågår</Text></span>\n\t\t\t\t\t\t\t\t\t\t\t\t</>}\n\t\t\t\t\t\t\t\t\t\t\t\t{status === 'done' && <>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span class='badge badge-success border border-white ml-2'><Text id='races.race-finished'>Løp avsluttet</Text></span>\n\t\t\t\t\t\t\t\t\t\t\t\t</>}\n\t\t\t\t\t\t\t\t\t\t\t</h5>\n\t\t\t\t\t\t\t\t\t\t\t{(race.images && race.images[0]) ? <img src={race.images[0].s3MediumLink} class='card-img-top' /> : ''}\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div class='card-body'>\n\t\t\t\t\t\t\t\t\t\t\t<p class='card-text'>\n\t\t\t\t\t\t\t\t\t\t\t\t<Markdown markdown={mu.replaceImages(race.ingress, race.images, language)} markdownOpts={mu.getMarkdownOptions()} />\n\t\t\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t\t\t{race.classes && <>\n\t\t\t\t\t\t\t\t\t\t\t\t<div class='mb-3'>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<small class='font-weight-lighter mr-2'><Text id='races.classes'>Klasser</Text>: </small><br />\n\t\t\t\t\t\t\t\t\t\t\t\t\t{race.classes.sort((a, b) => a.distance - b.distance).map(currentClass => <>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span class='badge badge-pill badge-light mr-2 font-weight-light'>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{currentClass.title}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{/* <span class='badge badge-info ml-2 font-weight-light'>{currentClass.contestants.length}</span> */}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</>)}\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t</>}\n\t\t\t\t\t\t\t\t\t\t\t<a href={`/race/${race.id}`} class='btn btn-primary stretched-link'><Text id='races.read-more'>Les mer</Text></a>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div class='card-footer'>\n\t\t\t\t\t\t\t\t\t\t\t<small class='text-muted'>\n\t\t\t\t\t\t\t\t\t\t\t\t<Text id='races.race-days'>Løpsdager</Text>: {race.startDate && <>{util.formatDate(race.startDate, { locale: language })}</>}\n\t\t\t\t\t\t\t\t\t\t\t\t{race.endDate && <> - {util.formatDate(race.endDate, { locale: language })}</>}\n\t\t\t\t\t\t\t\t\t\t\t</small>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\n\t\t\t\t\t\t\t</>);\n\t\t\t\t\t\t})}\n\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</>\n\t\t);\n\t}\n}\n\nexport default PublicRace;\n"],"sourceRoot":""}