(window.webpackJsonp=window.webpackJsonp||[]).push([[50],{"07/T":function(e,t,s){"use strict";(function(e){function n(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function o(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}var r,i=s("hosL"),c=s("Utv1"),a=s("/eY4"),l=s("ZOvn"),m=s("4dUO"),d=s("PWmE"),b={showAddComment:!1},p=Object(a.a)(r=function(t){function s(e){var s;return(s=t.call(this,e)||this).likeNews=function(){return new Promise((function(e,t){return Promise.resolve(s.props.stores.newsStore.likeNews({id:s.props.news.id})).then((function(s){try{return s,e()}catch(e){return t(e)}}),t)}))},s.toggleAddComment=function(e){var t=e.target.parentElement.dataset.id||e.target.dataset.id;s.setState({showAddComment:!s.state.showAddComment},(function(){s.inputRef[t]&&s.inputRef[t].focus()}))},s.state=function(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?n(Object(s),!0).forEach((function(t){o(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):n(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}({},b),s.updateTimer={},s.inputRef={},s}var r,a;return a=t,(r=s).prototype=Object.create(a.prototype),r.prototype.constructor=r,r.__proto__=a,s.prototype.render=function(){var t=this,s=this.state.showAddComment,n=this.props.news,o=void 0===n?{}:n,r=this.props.stores.userStore.user,a=r.language,b=void 0===a?"en":a,p=o.likes,h=void 0===p?[]:p,u=o.comments,f=void 0===u?[]:u,g=o.likes&&o.likes.findIndex((function(e){return e.user===r.id}))>-1;return Object(i.h)(e,null,Object(i.h)("div",{class:"w-100 mb-5"},Object(i.h)("div",{class:"row"},Object(i.h)("div",{class:"col-12 col-sm-8 col-lg-6 offset-sm-2 offset-lg-3 d-flex mb-0 position-relative"},Object(i.h)("div",{class:"text-center border rounded-circle imageRounded",style:o.images&&o.images[0]?'background-image: url("'+o.images[0].s3SmallLink+'");':""},!(o.images&&o.images[0])&&Object(i.h)("i",{class:"fas fa-paragraph text-muted mt-3",style:"font-size: 40px;"})),Object(i.h)("div",{class:"flex-grow-1 pl-3",style:"line-height: 1.2em;"},Object(i.h)("a",{class:"stretched-link",href:"/news/"+o.id},Object(i.h)("i",{class:"fas fa-eye"+(o.active?" text-success":"-slash text-danger")+" float-right"}),Object(i.h)("h5",{class:"mb-1",style:"line-height: 1.0em;"},l.a.replaceImages(o.title,o.images,b))),Object(i.h)("div",null,Object(i.h)("small",{class:"text-muted"},c.a.isoDate(o.createdDate)," - ",o.tag)),l.a.replaceImages(o.ingress,o.images,b))),Object(i.h)("div",{class:"col-10 offset-2 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-0"},h&&h.length>0&&Object(i.h)("small",{class:"bg-light shadow-sm rounded-lg py-0 px-1",style:"bottom: 20px; right: 15px;"},Object(i.h)("i",{class:"fas fa-thumbs-up text-primary"})," ",h.length),f&&f.length>0&&Object(i.h)("small",{class:"float-right bg-light shadow-sm rounded-lg py-0 px-1",style:"bottom: 20px; right: 15px;"},Object(i.h)("i",{class:"fas fa-comment text-primary"})," ",f.length)),Object(i.h)("div",{class:"col-10 offset-2 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-1 mb-2"},Object(i.h)("div",{class:"row"},Object(i.h)("div",{class:"col-6 text-center"},Object(i.h)("button",{type:"button",class:"btn btn-sm btn-outline-"+(g?"primary":"secondary")+" btn-lg btn-block "+(g?"text-primary":""),onClick:this.likeNews},Object(i.h)("i",{class:(g?"text-primary fas":"far")+" fa-thumbs-up"})," Like")),Object(i.h)("div",{class:"col-6 text-center"},Object(i.h)("button",{type:"button",class:"btn btn-sm btn-outline-secondary btn-lg btn-block","data-id":o.id,onClick:this.toggleAddComment},Object(i.h)("i",{class:"fas fa-comment"})," Comment")))),s&&Object(i.h)(d.a,{stores:this.props.stores,news:o,inputRef:function(e){return t.inputRef[o.id]=e}}),Object(i.h)(m.a,{stores:this.props.stores,news:o,col:10,offset:2,compact:!0}))))},s}(i.Component))||r;t.a=p}).call(this,s("hosL").Fragment)},"4dUO":function(e,t,s){"use strict";function n(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function o(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}var r,i,c=s("hosL"),a=s("Utv1"),l=s("/eY4"),m=s("OhSV"),d=s("go65"),b=(s("ETxl"),s("ZOvn"),Object(l.a)(r=function(e){function t(){for(var t,s=arguments.length,n=new Array(s),o=0;o<s;o++)n[o]=arguments[o];return(t=e.call.apply(e,[this].concat(n))||this).commentNews=function(){return new Promise((function(e,s){var n,o,r,i,c,a;return r=void 0===(o=(n=t.props).callback)?function(){}:o,i=t.props.news,c=t.state.comment,Promise.resolve(t.props.stores.newsStore.commentReplyNews({id:i.id,commentId:n.commentId,comment:void 0===c?"":c})).then((function(n){try{return(a=n)&&200===a.status&&(t.setState({comment:""}),r({news:i,response:a})),e()}catch(e){return s(e)}}),s)}))},t}var s,n;return n=e,(s=t).prototype=Object.create(n.prototype),s.prototype.constructor=s,s.__proto__=n,t.prototype.render=function(){var e=this.props.inputRef,t=this.state.comment,s=this.props.stores.userStore.user,n=void 0===s?{}:s,o=n.firstname?""+a.a.ucfirst(n.firstname,!0)+a.a.ucfirst(n.lastname,!0):""+a.a.ucfirst(n.email||"",!0),r=n.image||(n.images?n.images[0]:void 0);return Object(c.h)("div",{class:"w-100"},Object(c.h)("div",{class:"d-flex mb-0 position-relative w-100"},Object(c.h)("div",{class:"text-center border rounded-circle imageRounded imageRoundedThumb",style:(r?"background-image: url('"+r.s3SmallLink+"'); background-size: cover;":"")+" border-width: 3px !important;"},!r&&Object(c.h)("span",{class:"font-weight-lighter",style:"font-size: 15px;"},o)),Object(c.h)("div",{class:"col pl-3",style:"line-height: 1.2em;"},Object(c.h)("div",{class:"d-flex bd-highlight"},Object(c.h)("div",{class:"p-0 w-100 bd-highlight"},Object(c.h)("label",{class:"sr-only",for:"inlineFormInput"},Object(c.h)(m.c,{id:"comments.comment"},"Kommentar")),Object(c.h)("div",{class:"border rounded rounded-lg position-relative"},Object(c.h)(m.b,null,Object(c.h)("input",{class:"form-control-plaintext px-2",type:"text",placeholder:Object(c.h)(m.c,{id:"comments.write-comment"},"Skriv en kommentar..."),onInput:Object(d.a)(this,"comment"),value:t,ref:e})))),Object(c.h)("div",{class:"p-0 pl-2 flex-shrink-1 bd-highlight"},Object(c.h)("button",{type:"button",class:"btn btn-sm btn-primary mb-2",onClick:this.commentNews},Object(c.h)("i",{class:"fas fa-paper-plane"})))))))},t}(c.Component))||r),p={showAddComment:{},showAllComments:!1,showAllReplies:{}},h=Object(l.a)(i=function(e){function t(t){var s;return(s=e.call(this,t)||this).likeComment=function(e){return new Promise((function(t,n){var o,r,i,c,a;return r=void 0===(o=s.props.callback)?function(){}:o,i=e.target.parentElement.dataset.id||e.target.dataset.id,c=s.props.news,Promise.resolve(s.props.stores.newsStore.likeNewsComment({id:c.id,commentId:i})).then((function(e){try{return(a=e)&&200===a.status&&r({news:c,commentId:i,response:a}),t(!0)}catch(e){return n(e)}}),n)}))},s.likeReply=function(e){return new Promise((function(t,n){var o,r,i,c,a;return r=void 0===(o=s.props.callback)?function(){}:o,i=e.target.parentElement.dataset.comment||e.target.dataset.comment,c=s.props.news,Promise.resolve(s.props.stores.newsStore.likeNewsCommentReply({id:c.id,replyId:e.target.parentElement.dataset.id||e.target.dataset.id,commentId:i})).then((function(e){try{return(a=e)&&200===a.status&&r({news:c,commentId:i,response:a}),t()}catch(e){return n(e)}}),n)}))},s.replyComment=function(e){return new Promise((function(t){var n=e.target.parentElement.dataset.id||e.target.dataset.id,o=s.state.showAddComment;return o[n]=!o[n],s.setState({showAddComment:o},(function(){s.inputRef[n]&&s.inputRef[n].focus()})),t()}))},s.toggleComments=function(){s.setState({showAllComments:!s.state.showAllComments})},s.toggleReplies=function(e){var t=e.target.parentElement.dataset.id||e.target.dataset.id,n=s.state.showAllReplies;n[t]=!n[t],s.setState({showAllReplies:n})},s.state=function(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?n(Object(s),!0).forEach((function(t){o(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):n(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}({},p),s.inputRef={},s}var s,r;return r=e,(s=t).prototype=Object.create(r.prototype),s.prototype.constructor=s,s.__proto__=r,t.prototype.render=function(){var e=this,t=this.state,s=t.showAddComment,n=t.showAllComments,o=t.showAllReplies,r=this.props,i=r.news,l=r.callback,d=void 0===l?function(){}:l,p=r.col,h=void 0===p?12:p,u=r.offset,f=void 0===u?0:u,g=r.compact,O=this.props.stores.userStore.user,j=[],v=0,y=0;if(i.comments){if(v=i.comments.length,n)j=i.comments;else j=i.comments.slice(Math.max(v-(void 0!==g&&g?0:2),0));y=j.length}return Object(c.h)("div",{class:"col-"+h+" offset-"+f+" col-sm-8 col-lg-6 offset-sm-2 offset-lg-3"},n&&Object(c.h)("div",null,Object(c.h)("button",{class:"btn btn-sm btn-link py-0 mb-2",onClick:this.toggleComments},Object(c.h)(m.c,{id:"comments.hide-all-comments"},"Skjul alle kommentarene."))),i&&j&&j.reverse().map((function(t){var n=t.user,r=void 0===n?{}:n,l=r.firstname?""+a.a.ucfirst(r.firstname,!0)+a.a.ucfirst(r.lastname,!0):""+a.a.ucfirst(r.email||"",!0),p=r.firstname?r.firstname+" "+r.lastname:""+r.email,h=r.image||(r.images?r.images[0]:void 0),u=t.likes&&t.likes.findIndex((function(e){return e.user===O.id}))>-1,f=[],g=0,j=0;return t.comments&&(g=t.comments.length,j=(f=o[t.id]?t.comments:t.comments.slice(0,void 0)).length),Object(c.h)("div",{class:"row"},Object(c.h)("div",{class:"col-12 d-flex mb-2 position-relative"},Object(c.h)("div",{class:"text-center border rounded-circle imageRounded imageRoundedSmall",style:(h?'background-image: url("'+h.s3SmallLink+'"); background-size: cover;':"")+" border-width: 3px !important;"},!r.image&&Object(c.h)("span",{class:"font-weight-lighter",style:"font-size: 15px;"},l)),Object(c.h)("div",{class:"flex-grow-1 pl-3 pt-0",style:"line-height: 1.2em;"},Object(c.h)("div",{class:"bg-light p-2 rounded-lg"},Object(c.h)("h5",{class:"font-weight-bold mb-0",style:"font-size: 1.0em;"},p),t.comment),Object(c.h)("small",null,Object(c.h)("button",{class:"btn btn-sm btn-link py-0 "+(u?"text-primary":""),onClick:e.likeComment,"data-id":t.id},Object(c.h)(m.c,{id:"comments.like"},"Lik")),"-",Object(c.h)("button",{class:"btn btn-sm btn-link py-0",onClick:e.replyComment,"data-id":t.id},Object(c.h)(m.c,{id:"comments.comment-add"},"Kommentar")),"-",Object(c.h)("button",{class:"btn btn-sm btn-link py-0 disabled"},a.a.formatDistance(t.createdDate,new Date,{locale:"no-NB"})))),t.likes&&t.likes.length>0&&Object(c.h)("small",{class:"position-absolute bg-light shadow-sm rounded-lg py-0 px-1",style:"bottom: 20px; right: 15px;"},Object(c.h)("i",{class:"fas fa-thumbs-up text-primary"})," ",t.likes.length)),Object(c.h)("div",{class:"col-11 offset-1 mb-2"},t&&f&&f.map((function(s){var n=s.user,o=void 0===n?{}:n,r=o.firstname?""+a.a.ucfirst(o.firstname,!0)+a.a.ucfirst(o.lastname,!0):""+a.a.ucfirst(o.email||"",!0),i=o.firstname?o.firstname+" "+o.lastname:""+o.email,l=o.image||(o.images?o.images[0]:void 0),d=s.likes&&s.likes.findIndex((function(e){return e.user===O.id}))>-1;return Object(c.h)("div",{class:"row"},Object(c.h)("div",{class:"col-12 d-flex mb-2 position-relative"},Object(c.h)("div",{class:"text-center border rounded-circle imageRounded imageRoundedThumb",style:(l?'background-image: url("'+l.s3SmallLink+'"); background-size: cover;':"")+" border-width: 3px !important;"},!o.image&&Object(c.h)("span",{class:"font-weight-lighter",style:"font-size: 15px;"},r)),Object(c.h)("div",{class:"flex-grow-1 pl-3 pt-0",style:"line-height: 1.2em;"},Object(c.h)("div",{class:"bg-light p-2 rounded-lg"},Object(c.h)("h5",{class:"font-weight-bold mb-0",style:"font-size: 1.0em;"},i),s.comment),Object(c.h)("small",null,Object(c.h)("button",{class:"btn btn-sm btn-link py-0 "+(d?"text-primary":""),onClick:e.likeReply,"data-comment":t.id,"data-id":s.id},Object(c.h)(m.c,{id:"comments.like"},"Lik")),"-",Object(c.h)("button",{class:"btn btn-sm btn-link py-0",onClick:e.replyComment,"data-id":t.id},Object(c.h)(m.c,{id:"comments.comment-add"},"Kommentar")),"-",Object(c.h)("button",{class:"btn btn-sm btn-link py-0 disabled"},a.a.formatDistance(s.createdDate,new Date,{locale:"no-NB"})))),s.likes&&Object(c.h)("small",{class:"position-absolute bg-light shadow-sm rounded-lg py-0 px-1",style:"bottom: 20px; right: 15px;"},Object(c.h)("i",{class:"fas fa-thumbs-up text-primary"})," ",s.likes.length)))})),g-j>0&&Object(c.h)("div",null,Object(c.h)("button",{class:"btn btn-sm btn-link py-0",onClick:e.toggleReplies,"data-id":t.id},Object(c.h)(m.c,{id:"comments.show-more",fields:{more:g-j}},"Vis ",g-j," flere kommentarer...")))),s[t.id]&&Object(c.h)("div",{class:"col-11 offset-1 d-flex mb-2 position-relative"},Object(c.h)(b,{stores:e.props.stores,news:i,callback:d,commentId:t.id,inputRef:function(s){return e.inputRef[t.id]=s}})))})),v-y>0&&Object(c.h)("div",null,Object(c.h)("button",{class:"btn btn-sm btn-link py-0",onClick:this.toggleComments},Object(c.h)(m.c,{id:"comments.show-more",fields:{more:v-y}},"Vis ",v-y," flere kommentarer..."))),n&&Object(c.h)("div",null,Object(c.h)("button",{class:"btn btn-sm btn-link py-0",onClick:this.toggleComments},Object(c.h)(m.c,{id:"comments.hide-all-comments"},"Skjul alle kommentarene."))))},t}(c.Component))||i;t.a=h},AxFz:function(e,t,s){"use strict";function n(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function o(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}s.r(t);var r,i=s("hosL"),c=(s("Utv1"),s("/eY4")),a=s("OhSV"),l=s("07/T"),m=s("ZOvn"),d=m.a.marginTop(!1),b=m.a.marginBottom(),p={isLoading:!1},h=Object(c.a)(r=function(e){function t(t){var s;return(s=e.call(this,t)||this).state=function(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?n(Object(s),!0).forEach((function(t){o(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):n(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}({},p),s}var s,r;r=e,(s=t).prototype=Object.create(r.prototype),s.prototype.constructor=s,s.__proto__=r;var c=t.prototype;return c.loadNews=function(e){return new Promise(function(t,s){var n,o,r;return void 0===e&&(e=this.props),this.setState({isLoading:!0}),o=(n=e.stores).newsStore,r={tag:e.tag},n.userStore.isAdmin&&(r.showall=1,delete r.tag),Promise.resolve(o.load({query:r})).then(function(){try{return this.setState({isLoading:!1}),t()}catch(e){return s(e)}}.bind(this),s)}.bind(this))},c.componentDidMount=function(){this.loadNews()},c.componentWillReceiveProps=function(e){this.loadNews(e)},c.render=function(){var e=this,t=this.props.tag,s=this.props.stores,n=s.newsStore.newsList,o=s.userStore.isAdmin;return Object(i.h)("div",{class:"container-fluid",style:"margin-bottom: "+b+"; margin-top: "+d+";"},Object(i.h)("div",{class:"row"},Object(i.h)("div",{class:"col-12"},Object(i.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 px-0"},Object(i.h)("h5",null,"news"===t?Object(i.h)(a.c,{id:"news.heading"},"Siste nytt"):Object(i.h)(a.c,{id:"news.heading-howo"},"Hvordan gjÃ¸r man det?"))),o&&Object(i.h)("a",{class:"btn btn-sm btn-success float-right ml-2",href:"/news/edit/new"},Object(i.h)("i",{class:"fas fa-plus"})," ",Object(i.h)(a.c,{id:"news.create"},"Ny")),n&&n.map((function(t){return Object(i.h)(l.a,{stores:e.props.stores,news:t})})))))},t}(i.Component))||r;t.default=h},ETxl:function(e){e.exports={hoverelementonly:"hoverelementonly__1mJGJ",hoverElement:"hoverElement__axh3O",hoverelementhide:"hoverelementhide__1k_qH","progress-bar-vertical":"progress-bar-vertical__1B2sC","progress-bar":"progress-bar__pnsVj",dragged:"dragged__QXO46",over:"over__1re3x",list:"list__q_emZ"}},PWmE:function(e,t,s){"use strict";var n,o=s("hosL"),r=s("Utv1"),i=s("/eY4"),c=s("OhSV"),a=s("go65"),l=(s("ETxl"),s("ZOvn"),Object(i.a)(n=function(e){function t(){for(var t,s=arguments.length,n=new Array(s),o=0;o<s;o++)n[o]=arguments[o];return(t=e.call.apply(e,[this].concat(n))||this).commentNews=function(){return new Promise((function(e,s){var n,o,r,i,c;return o=void 0===(n=t.props.callback)?function(){}:n,r=t.props.news,i=t.state.comment,Promise.resolve(t.props.stores.newsStore.commentNews({id:r.id,comment:void 0===i?"":i})).then((function(n){try{return(c=n)&&200===c.status&&(t.setState({comment:""}),o({news:r,response:c})),e()}catch(e){return s(e)}}),s)}))},t}var s,n;return n=e,(s=t).prototype=Object.create(n.prototype),s.prototype.constructor=s,s.__proto__=n,t.prototype.render=function(){var e=this.props.inputRef,t=this.state.comment,s=this.props.stores.userStore.user,n=void 0===s?{}:s,i=n.firstname?""+r.a.ucfirst(n.firstname,!0)+r.a.ucfirst(n.lastname,!0):""+r.a.ucfirst(n.email||"",!0),l=n.image||(n.images?n.images[0]:void 0);return Object(o.h)("div",{class:"col-12 col-sm-8 col-lg-6 offset-sm-2 offset-lg-3 d-flex mb-3 position-relative"},Object(o.h)("div",{class:"d-flex mb-0 position-relative w-100"},Object(o.h)("div",{class:"text-center border rounded-circle imageRounded imageRoundedSmall",style:(l?"background-image: url('"+l.s3SmallLink+"'); background-size: cover;":"")+" border-width: 3px !important;"},!l&&Object(o.h)("span",{class:"font-weight-lighter",style:"font-size: 15px;"},i)),Object(o.h)("div",{class:"col pl-3",style:"line-height: 1.2em;"},Object(o.h)("div",{class:"d-flex bd-highlight"},Object(o.h)("div",{class:"p-0 w-100 bd-highlight"},Object(o.h)("label",{class:"sr-only",for:"inlineFormInput"},Object(o.h)(c.c,{id:"comments.comment"},"Kommentar")),Object(o.h)("div",{class:"border rounded rounded-lg position-relative"},Object(o.h)(c.b,null,Object(o.h)("input",{class:"form-control-plaintext px-2",type:"text",placeholder:Object(o.h)(c.c,{id:"comments.write-comment"},"Skriv en kommentar..."),onInput:Object(a.a)(this,"comment"),value:t,ref:e})))),Object(o.h)("div",{class:"p-0 pl-2 flex-shrink-1 bd-highlight"},Object(o.h)("button",{type:"button",class:"btn btn-primary mb-2",onClick:this.commentNews},Object(o.h)("i",{class:"fas fa-paper-plane"})))))))},t}(o.Component))||n);t.a=l}}]);
//# sourceMappingURL=route-news.chunk.e033c.js.map