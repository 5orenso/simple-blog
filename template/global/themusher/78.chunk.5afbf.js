(window.webpackJsonp=window.webpackJsonp||[]).push([[78],{EMNp:function(t,e,r){"use strict";r.r(e),function(t){function n(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function o(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?n(Object(r),!0).forEach((function(e){s(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function s(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function i(t,e){var r=void 0!==t.musher;return(void 0!==e.musher)-r||!0===r&&t.musher.bib-e.musher.bib||0}var a,c=r("hosL"),l=(r("Utv1"),r("/eY4")),u=(r("OhSV"),r("go65"),r("Y3FI"),r("ZOvn")),p=r("eT2M"),d=r.n(p),h=u.a.marginTop(!0),f=u.a.marginBottom(),m={},v=Object(l.a)(a=function(e){function r(t){var r;return(r=e.call(this,t)||this).loadLiveRaceResults=function(t,e,n){return new Promise((function(o,s){var i;return void 0===t&&(t=r.props),i=t.stores.raceStore,Promise.resolve(i.getRaceTrackerData(i.race.raceTrackerRace)).then((function(){try{return i.getRaceTrackerActiveTeams(e,n),o()}catch(t){return s(t)}}),s)}))},r.loadRaceResults=function(t,e,n){return new Promise((function(o,s){var i;return void 0===t&&(t=r.props),i=t.stores.raceStore,Promise.resolve(i.loadWorkoutSummary(e,t.raceid)).then((function(){try{return i.getWorkoutSummaryActiveTeams(e,n),o()}catch(t){return s(t)}}),s)}))},r.loadRace=function(t){return new Promise((function(e,n){var o,s,i,a,c,l,u,p,d,h,f,m;return void 0===t&&(t=r.props),r.setState({isLoading:!0}),s=(o=t.stores).raceStore,i=o.appState,c=(a=t).classid,Promise.resolve(s.load(a.raceid)).then(function(){try{if(l=s.race,u=i.focusOnMushers,d=void 0===(p=i.selectedClassIds)?[]:p,h=c||d[0],c&&i.toggleSelectedClassId(c,!0),(f=l.classes.filter((function(t){return t.id===h})).filter((function(t){return t.contestants&&t.contestants.length>0})).map((function(t){return t.contestants.filter((function(t){return t.team>0})).map((function(t){return t.team}))})).flat()).length>0)return Promise.resolve(s.loadTeams(f.join(","))).then(function(){try{return o.call(this)}catch(t){return n(t)}}.bind(this),n);function o(){function o(){return s.getAllClassesSortedBy(),(m=s.getClassById(h))&&m.raceTrackerResults&&s.getRacetrackerResults(m.raceTrackerResults),clearTimeout(r.updateTimer.reload),r.updateTimer.reload=setTimeout((function(){return new Promise((function(e){var n=Math.floor((new Date).getTime()/1e3);return r.setState({reloadLastEpoch:n}),r.loadRace(t),e()}))}),6e4),r.scrollList(),r.setState({isLoading:!1}),e()}return l.liveRace>0?Promise.resolve(r.loadLiveRaceResults(r.props,f,u)).then(function(){try{return o.call(this)}catch(t){return n(t)}}.bind(this),n):Promise.resolve(r.loadRaceResults(r.props,f,u)).then(function(){try{return o.call(this)}catch(t){return n(t)}}.bind(this),n)}return o.call(this)}catch(t){return n(t)}}.bind(this),n)}))},r.scrollList=function(){r.scrollTimer=setTimeout((function(){return new Promise((function(t){var e=r.state.scrollPosition+1350;return e>r.contestantContainer.scrollWidth-r.contestantContainer.clientWidth+1350?e=0:(r.contestantContainer.scrollTo({top:0,left:e,behavior:"smooth"}),r.scrollList()),r.setState({scrollPosition:e}),t()}))}),5e3)},r.toggleFocusOnMusher=function(t){var e=r.props.stores,n=e.appState,o=e.raceStore;n.toggleFocusOnMusher(t.target.parentElement.dataset.musherid||t.target.dataset.musherid);var s=n.focusOnMushers;o.race.liveRace>0?o.getRaceTrackerActiveTeams(null,s):o.getWorkoutSummaryActiveTeams(null,s)},r.state=o(o({},m),{},{scrollPosition:0}),r.updateTimer={},r.scrollTimer=null,r.contestantContainer=null,r}var n,s;s=e,(n=r).prototype=Object.create(s.prototype),n.prototype.constructor=n,n.__proto__=s;var a=r.prototype;return a.componentWillUnmount=function(){clearTimeout(this.updateTimer.reload),clearTimeout(this.updateTimer.tick)},a.componentDidMount=function(){this.loadRace()},a.componentWillReceiveProps=function(t){this.props.classid!==t.classid&&this.loadRace(t)},a.render=function(){var e=this,r=this.props.stores,n=r.raceStore,o=this.props,s=o.classid,a=o.limit,l=void 0===a?10:a,p=n.race,m=void 0===p?{}:p,v=n.classes,b=void 0===v?[]:v,g=n.raceTrackerResults,O=new Date(m.endDate);O.setHours(O.getHours()+2);var y=m.classes&&m.classes.find((function(t){return t.id===s}))||{},w=[];return g&&g.data?w=g.data.slice(0,l).map((function(t){var e=n.raceTrackerMapLine(t),r=parseInt(e.Bib,10),o={};return b&&b[y.id].contestants&&(o=b[y.id].contestants.find((function(t){return t.musher.bib===r}))||{}),o})):b[y.id]&&b[y.id].contestants&&(w=b[y.id].contestants.sort(i).slice(0,l).map((function(t){return t}))),Object(c.h)(t,null,Object(c.h)("div",{class:"fixed-top "+d.a.hoverElement,style:"height: 100px;"},Object(c.h)("div",{class:""+d.a.hoverelementonly},Object(c.h)("div",{class:"row"},m.classes&&m.classes.sort((function(t,e){return t.distance-e.distance})).map((function(e){return Object(c.h)(t,null,Object(c.h)("div",{class:"col"},Object(c.h)("a",{class:"btn btn-block "+(e.id===s?"btn-success":"btn-outline-success")+" text-nowrap",style:"text-overflow: ellipsis; overflow: hidden;","data-id":e.id,href:"/tv/top10ticker/"+m.id+"/"+e.id},e.title)))}))))),Object(c.h)("div",{class:"container-fluid position-relative",style:"margin-bottom: "+f+"; margin-top: "+h+"; height: calc(100% - "+f+" - "+h+");"},Object(c.h)("div",{class:"d-flex position-absolute",style:' bottom: -185px; left: 150px; background-image: url("https://themusher.app/assets/tv-ticker.png"); background-position: 0 100%; background-repeat: no-repeat; width: 1780px; height: 115px; '},Object(c.h)("div",{class:"text-white text-left position-absolute",style:" font-size: 2.3em; font-weight: normal; bottom: 50px; left: 110px; width: 550px; "},Object(c.h)("span",{class:"font-weight-light"},"Topp 10")," - GPS Ranking"),Object(c.h)("div",{class:"text-dark text-left position-absolute",style:"\n                            font-size: 2.0em;\n                            font-weight: normal;\n                            bottom: 4px;\n                            left: 99px;\n                            width: 1486px;\n                    "},Object(c.h)("div",{class:"w-100"},Object(c.h)("div",{class:"d-flex flex-row flex-nowrap",style:"overflow: auto; scroll-snap-type: x mandatory;",onScroll:this.scrollImages,ref:function(t){return e.contestantContainer=t}},w&&w.map((function(e,r){var n=e.musher,o=void 0===n?{}:n;return Object(c.h)(t,null,Object(c.h)("div",{class:"clearfix position-relative p-0 mx-0"},Object(c.h)("div",{class:"h-100 d-flex flex-nowrap justify-content-start align-items-center",style:"\n                                                    flex-wrap: wrap;\n                                                    overflow-y: hidden;\n                                                    width: 450px;\n                                                ",onTouchstart:function(t){t.stopPropagation()},onTouchend:function(t){t.stopPropagation()},onTouchmove:function(t){t.stopPropagation()}},Object(c.h)("div",{class:"pl-3 pr-2 clearfix text-white rounded-pill-right",style:"width: 100px; background-color: "+u.a.getRankingColor(r+1)},o.bib||r+1),Object(c.h)("div",{class:"pl-1 pr-3"},Object(c.h)("nobr",null,o.flag," ",o.firstname," ",o.lastname,Object(c.h)("br",null))))))}))))))))},r}(c.Component))||a;e.default=v}.call(this,r("hosL").Fragment)},eT2M:function(t){t.exports={hoverelementonly:"hoverelementonly__3_DrK",hoverElement:"hoverElement__3ED7Q",hoverelementhide:"hoverelementhide__2AP13"}}}]);
//# sourceMappingURL=78.chunk.5afbf.js.map