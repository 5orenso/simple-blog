{"version":3,"sources":["webpack:///./components/util/scrollIntoView.js","webpack:///./components/workout/week.js","webpack:///./routes/workouts/week.js","webpack:///./components/team/teams.js"],"names":["initialState","ScrollIntoView","observer","props","state","container","componentDidMount","this","horizontal","vertical","behavior","inline","block","scrollIntoView","render","ref","c","Component","WorkoutWeek","stores","userStore","appState","user","language","DAYS","mu","getDays","darkmode","week","year","daysOfWeek","util","getDaysInWeek","totalDistanceKmWeek","totalCountWeek","totalElevationWeek","totalDurationWeek","totalSpeedavgWeek","weekNum","parseInt","yearNum","getNextWeek","nextWeek","nextYear","getPrevWeek","prevWeek","prevYear","class","href","id","fields","getMonth","getFullYear","isoDate","length","map","day","getDay","yyyy","mm","dd","getDate","summary","findWorkoutSummaryWeekDay","distanceKm","count","elevation","duration","push","speedAvg","style","getDayColor","getTrainingColor","format","secToHms","avgArr","MARGIN_TOP","marginTop","MARGIN_BOTTOM","marginBottom","SUB_MENU_MARGIN_TOP","subMenuMarginTop","isLoading","Workouts","loadWorkouts","setState","loadWorkoutSummary","loadDogs","dogStore","load","query","team","currentTeam","addData","loadTracks","trackStore","workoutStore","getWorkoutSummary","getWorkoutSummaryDay","componentWillReceiveProps","nextProps","shouldComponentUpdate","getYear","workoutsDay","callback","key","workout","showDate","Teams","toggleTeam","unsetTeamIfSelected","setCurrentTeam","undefined","isDefined","showAllTeams","teams","highlight","showAll","idx","classNames","onClick","name","indexOf","role"],"mappings":"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","file":"30.chunk.cb9ea.js","sourcesContent":["import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\n\nconst initialState = {};\n\n@observer\nclass ScrollIntoView extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            ...initialState,\n        };\n        this.container = null;\n    }\n\n    componentDidMount() {\n        const { horizontal, vertical = '' } = this.props;\n        const props = {\n            behavior: 'smooth',\n        };\n        if (horizontal) {\n            props.inline = horizontal;\n        }\n        if (vertical) {\n            props.block = vertical;\n        }\n\t\tthis.container.scrollIntoView(props);\n\t}\n\n    render() {\n        return (\n            <div ref={c => this.container = c}>&nbsp;</div>\n        );\n    }\n}\n\nexport default ScrollIntoView;\n","import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport { Text, Localizer, withText } from 'preact-i18n';\n\nimport mu from '../../lib/musher-util';\n\n@observer\nclass WorkoutWeek extends Component {\n    render() {\n        const { isLoading } = this.state;\n\t\tconst { userStore, appState, workoutStore } = this.props.stores;\n        const { currentTeam } = workoutStore;\n        const { user } = userStore;\n        const { language = 'en' } = user;\n        const DAYS = mu.getDays(language);\n\t\tconst { darkmode } = appState;\n\t\tconst { week, year } = this.props;\n\t\tconst {\n            workoutsDay, workoutSummaryWeekDay,\n\t\t} = userStore;\n\n        const daysOfWeek = util.getDaysInWeek(week, year);\n        let totalDistanceKmWeek = 0;\n        let totalCountWeek = 0;\n        let totalElevationWeek = 0;\n        let totalDurationWeek = 0;\n        let totalSpeedavgWeek = [];\n\n        const weekNum = parseInt(week, 10);\n        const yearNum = parseInt(year, 10);\n        const { week: nextWeek, year: nextYear } = mu.getNextWeek(weekNum, yearNum);\n        const { week: prevWeek, year: prevYear } = mu.getPrevWeek(weekNum, yearNum);\n\n        return (\n            <>\n                <div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-4'>\n                    <a href={`/workouts/week/${nextWeek}/${nextYear}`} class='float-right btn btn-sm btn-link'><i class='fas fa-arrow-right' /></a>\n                    <a href={`/workouts/week/${prevWeek}/${prevYear}`} class='float-left btn btn-sm btn-link'><i class='fas fa-arrow-left' /></a>\n                    <h5>\n                        <Text id='workouts.week-workouts' fields={{ week, year }}>Treningsturene - Uke - {week} {year}</Text>\n                    </h5>\n                    <small>\n                        <a href={`/workouts/month/${daysOfWeek[0].getMonth() + 1}/${daysOfWeek[0].getFullYear()}`}>\n                            {util.isoDate(daysOfWeek[0], false, false, true)}\n                        </a> - <a href={`/workouts/month/${daysOfWeek[daysOfWeek.length - 1].getMonth() + 1}/${daysOfWeek[daysOfWeek.length - 1].getFullYear()}`}>\n                            {util.isoDate(daysOfWeek[daysOfWeek.length - 1], false, false, true)}\n                        </a>\n                    </small>\n                </div>\n\n                <div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-4'>\n\n                    <table class='table table-striped table-sm'>\n                        <thead>\n                            <tr>\n                                <th class='text-muted'><Text id='workout.calendar.week'>Uke</Text></th>\n                                {daysOfWeek.map(day => <th>{DAYS[day.getDay()]}</th>)}\n                                <th class='text-muted'><Text id='workout.calendar.sum'>Sum</Text></th>\n                                {/* <th class='text-muted'>Totalt</th> */}\n                            </tr>\n                        </thead>\n\n                        <tbody>\n                            <tr>\n                                <td class='text-right text-muted pt-3'>{week}</td>\n                                {daysOfWeek.map(day => {\n                                    const yyyy = day.getFullYear();\n                                    const mm = day.getMonth() + 1;\n                                    const dd = day.getDate();\n                                    const summary = userStore.findWorkoutSummaryWeekDay(yyyy, mm, dd) || {};\n                                    if (summary && summary.distanceKm) {\n                                        totalDistanceKmWeek += summary.distanceKm;\n                                        totalCountWeek += summary.count;\n                                        totalElevationWeek += summary.elevation;\n                                        totalDurationWeek += summary.duration;\n                                        totalSpeedavgWeek.push(summary.speedAvg);\n                                    }\n                                    // console.log(summary);\n                                    // count: 1, day: 5, distanceKm: 10, duration: 3600, elevation: 200, month: 9, speedAvg: 12, year: 2020\n                                    return (\n                                        <td class={`text-center font-weight-light position-relative pt-3`}\n                                            style={`background-color: ${mu.getDayColor(day.getDay(), darkmode)};`}>\n                                            <div class='position-absolute text-muted' style='top: 0px; right: 2px; font-size: 0.7em;'>\n                                                {day.getDate()}\n                                            </div>\n                                            {summary && summary.distanceKm ? \n                                                <div class='rounded-pill w-100 px-1'\n                                                    style={`background-color: ${mu.getTrainingColor(summary, darkmode)}`}\n                                                >\n                                                    {util.format(summary.distanceKm, 1)}\n                                                    {summary.count > 1 && <span class='position-absolute text-danger' style='bottom: 0; right: 0px; font-size: 0.6em;'>{summary.count}</span>}\n                                                </div> : '-'}\n                                        </td>\n                                    );\n                                })}\n                                <td class='text-right pt-3'>{totalDistanceKmWeek}</td>\n                                {/* <td class='text-right text-muted pt-3'>{totalWorkoutKm}</td> */}\n                            </tr>\n                        </tbody>\n                    </table>\n\n                    <h5 class='mt-4'><Text id='workout.calendar.summary'>Oppsummering</Text> - {week} {year}</h5>\n                    <table class='table table-striped table-sm'>\n                        <tbody>\n                            <tr>\n                                <td class='text-muted'><Text id='workout.calendar.totalWorkouts'>Antall økter</Text></td>\n                                <td class='text-right'>{totalCountWeek}</td>\n                            </tr>\n                            <tr>\n                                <td class='text-muted'><Text id='workout.calendar.distance'>Distanse</Text></td>\n                                <td class='text-right'>{util.format(totalDistanceKmWeek, 1)} km</td>\n                            </tr>\n                            <tr>\n                                <td class='text-muted'><Text id='workout.calendar.ascend'>Høydemeter</Text></td>\n                                <td class='text-right'>{util.format(totalElevationWeek, 0)} m</td>\n                            </tr>\n                            <tr>\n                                <td class='text-muted'><Text id='workout.calendar.duration'>Varighet</Text></td>\n                                <td class='text-right'>{util.secToHms(totalDurationWeek)}</td>\n                            </tr>\n                            <tr>\n                                <td class='text-muted'><Text id='workout.calendar.avg-speed'>Gjennomsnittsfart</Text></td>\n                                <td class='text-right'>{util.format(mu.avgArr(totalSpeedavgWeek), 1)} km/t</td>\n                            </tr>\n                        </tbody>\n                    </table>\n\n                </div>\n            </>\n        );\n    }\n}\n\nexport default WorkoutWeek;\n","import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport { Text, Localizer, withText } from 'preact-i18n';\n\nimport mu from '../../lib/musher-util';\nconst MARGIN_TOP = mu.marginTop(true);\nconst MARGIN_BOTTOM = mu.marginBottom();\nconst SUB_MENU_MARGIN_TOP = mu.subMenuMarginTop();\n\nimport Workout from '../../components/workout';\nimport WorkoutWeek from '../../components/workout/week';\nimport Teams from '../../components/team/teams';\n\nconst initialState = {\n\tisLoading: false,\n};\n\n@observer\nclass Workouts extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            ...initialState,\n        };\n    }\n\n\tloadWorkouts = async () => {\n\t\tthis.setState({ isLoading: true });\n\t\t// const { workoutStore } = this.props.stores;\n\t\t// const { currentTeam } = workoutStore;\n\t\t// await workoutStore.load({ query: { team: currentTeam } });\n\t\tawait this.loadWorkoutSummary();\n\t\tthis.setState({ isLoading: false });\n\t}\n\n\tloadDogs = async () => {\n\t\tconst { dogStore } = this.props.stores;\n\t\tconst { currentTeam } = dogStore;\n\n\t\tawait dogStore.load({ query: { team: currentTeam }, addData: ['workoutSummary'] });\n\t}\n\n\tasync loadTracks() {\n\t\tconst { trackStore } = this.props.stores;\n\t\tawait trackStore.load();\n\t}\n\n\tasync loadWorkoutSummary(props = this.props) {\n\t\tconst { userStore, workoutStore } = this.props.stores;\n\t\tconst { currentTeam } = workoutStore;\n        const { week, year } = props;\n        await userStore.getWorkoutSummary({ team: currentTeam });\n        await userStore.getWorkoutSummaryDay({ week, year, team: currentTeam });\n    }\n\n    componentDidMount() {\n\t\tthis.loadWorkouts();\n\t\t// this.loadDogs();\n\t\t// this.loadTracks();\n    }\n\n    componentWillReceiveProps(nextProps) {\n        // console.log('componentWillReceiveProps', nextProps);\n        if (nextProps.week !== this.props.week) {\n            this.loadWorkoutSummary(nextProps);\n        }\n    }\n\n    shouldComponentUpdate(nextProps) {\n        if (nextProps.week !== this.props.week) {\n            return true;\n        }\n    }\n\n\trender() {\n\t\tconst { isLoading } = this.state;\n\t\tconst { userStore, appState, workoutStore } = this.props.stores;\n        const { currentTeam } = workoutStore;\n\t\tconst { darkmode } = appState;\n\t\tconst { week, year = util.getYear() } = this.props;\n\t\tconst {\n            workoutsDay, workoutSummaryWeekDay,\n\t\t} = userStore;\n\n\t\treturn (\n\t\t\t<div class='container-fluid' style={`margin-bottom: ${MARGIN_BOTTOM}; margin-top: ${MARGIN_TOP};`}>\n\t\t\t\t<div class='row fixed-top' style={`margin-top: ${SUB_MENU_MARGIN_TOP}; background-color: ${darkmode ? '#191d21' : '#f8f9fa'};`}>\n\t\t\t\t\t<div class='col text-center subtopmenu'>\n\t\t\t\t\t\t<a href='/workouts/' class='text-secondary stretched-link'><nobr><i class='fas fa-chart-line' /> <Text id='workout.index.dashboard'>Oversikt</Text></nobr></a>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class='col text-center subtopmenu'>\n\t\t\t\t\t\t<a href='/workouts/list' class='text-secondary stretched-link'><nobr><i class='fas fa-list' /> <Text id='workout.index.list'>Liste</Text></nobr></a>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class='col text-center subtopmenu'>\n\t\t\t\t\t\t<a href='/workouts/plan' class='text-secondary stretched-link'><nobr><i class='fas fa-calendar-alt' /> <Text id='workout.index.plan'>Plan</Text></nobr></a>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\n\t\t\t\t<div class='row'>\n\t\t\t\t\t<div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 border-bottom'>\n\t\t\t\t\t\t<Teams stores={this.props.stores} callback={this.loadWorkouts} key={`teams-${currentTeam}`} />\n\t\t\t\t\t</div>\n\n                    {/* <div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3'>\n\t\t\t\t\t\t<WorkoutGraph stores={this.props.stores} isLoading={isLoading} />\n\t\t\t\t\t</div> */}\n\n                    <WorkoutWeek stores={this.props.stores} team={currentTeam} week={week} year={year} key={`${year}-${week}-${currentTeam}`} />\n\n\t\t\t\t\t<div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-4'>\n                        <h5>\n                            <Text id='workouts.week-workouts' fields={{ week, year }}>Treningsturene - Uke - {week} {year}</Text>\n                        </h5>\n\t\t\t\t\t</div>\n                    <div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-4'>\n                        {workoutsDay && workoutsDay.map(workout => (\n                            <Workout stores={this.props.stores} workout={workout} showDate={true} />\n                        ))}\n                    </div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nexport default Workouts;\n","import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport { Text, Localizer } from 'preact-i18n';\n\nimport ScrollIntoView from '../../components/util/scrollIntoView';\n\n@observer\nclass Teams extends Component {\n    toggleTeam = (team) => {\n\t\tconst { callback, unsetTeamIfSelected = true } = this.props;\n        const { dogStore, workoutStore } = this.props.stores;\n\t\tconst { currentTeam } = dogStore;\n\t\tif (unsetTeamIfSelected && team === currentTeam) {\n\t\t\tdogStore.setCurrentTeam(undefined);\n\t\t\tworkoutStore.setCurrentTeam(undefined);\n\t\t} else {\n\t\t\tdogStore.setCurrentTeam(team);\n\t\t\tworkoutStore.setCurrentTeam(team);\n\t\t}\n\t\tif (util.isDefined(callback)) {\n\t\t\tcallback();\n\t\t}\n\t}\n\n    showAllTeams = () => {\n\t\tconst { callback } = this.props;\n        const { dogStore, workoutStore } = this.props.stores;\n\t\tdogStore.setCurrentTeam(undefined);\n\t\tworkoutStore.setCurrentTeam(undefined);\n\t\tif (util.isDefined(callback)) {\n\t\t\tcallback();\n\t\t}\n\t}\n\n\t// componentDidMount() {\n\t// \tif (this.container) {\n\t// \t\tthis.container.scrollIntoView({ behavior: 'smooth', block: 'end', inline: 'center' });\n\t// \t}\n\t// }\n\n    render() {\n        const { userStore, dogStore } = this.props.stores;\n        const { teams } = userStore;\n\t\tconst { currentTeam } = dogStore;\n\t\tconst { highlight, showAll = true } = this.props;\n        return (\n\t\t\t<div class='row mt-2'>\n\t\t\t\t<div class='w-100 overflow-hidden'>\n\t\t\t\t\t<div\n\t\t\t\t\t\tclass='d-flex flex-row flex-nowrap pb-2 px-1 no-scrollbar'\n\t\t\t\t\t\tstyle='overflow: auto; scroll-snap-type: x mandatory;'\n\t\t\t\t\t>\n\t\t\t\t\t\t{/* <xmp><br /><br /><br /><br />{JSON.stringify(teams, null, 4)}</xmp> */}\n\t\t\t\t\t\t{teams && teams.map((team, idx) => {\n\t\t\t\t\t\t\tlet classNames;\n\t\t\t\t\t\t\tif (teams.length === 1) {\n\t\t\t\t\t\t\t\tclassNames = 'rounded-pill-both';\n\t\t\t\t\t\t\t} else if (idx === 0) {\n\t\t\t\t\t\t\t\tclassNames = 'rounded-pill-left';\n\t\t\t\t\t\t\t} else if (idx + 1 === teams.length) {\n\t\t\t\t\t\t\t\tclassNames = 'rounded-pill-right';\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t<div class='col mb-0 px-0 clearfix' key={team.id}>\n\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\tclass={`btn btn-sm btn-block \n\t\t\t\t\t\t\t\t\t\t\trounded-none ${classNames}\n\t\t\t\t\t\t\t\t\t\t\t${currentTeam === team.id ? 'btn-success' : 'btn-outline-success'}\n\t\t\t\t\t\t\t\t\t\t\ttext-nowrap clearfix`}\n\t\t\t\t\t\t\t\t\t\tstyle='text-overflow: ellipsis; overflow: hidden;'\n\t\t\t\t\t\t\t\t\t\tonClick={() => this.toggleTeam(team.id)}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<i class='fas fa-users' /> {team.name}\n\n\t\t\t\t\t\t\t\t\t\t{highlight && highlight.indexOf(team.id) > -1 && <>\n\t\t\t\t\t\t\t\t\t\t\t{currentTeam === team.id ? <>\n\t\t\t\t\t\t\t\t\t\t\t\t<i class='fas fa-check float-right' />\n\t\t\t\t\t\t\t\t\t\t\t</> : <>\n\t\t\t\t\t\t\t\t\t\t\t\t<div class='spinner-grow text-warning float-right' role='status'>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span class='sr-only'>Loading...</span>\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t<i class='far fa-hand-point-left float-right' style='font-size: 2.0em;' />   \n\t\t\t\t\t\t\t\t\t\t\t</>}\n\t\t\t\t\t\t\t\t\t\t</>}\n\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t{/* {currentTeam === team.id && <ScrollIntoView horizontal={'center'} vertical={'end'} />} */}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t})}\n\t\t\t\t\t</div>\n\t\t\t\t\t{showAll && <div class='row'>\n\t\t\t\t\t\t<div class='col-12 mb-1 px-1 d-flex justify-content-center'>\n\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\tclass={`btn btn-sm rounded-lg btn-link text-nowrap clearfix`}\n\t\t\t\t\t\t\t\tstyle='text-overflow: ellipsis; overflow: hidden;'\n\t\t\t\t\t\t\t\tonClick={this.showAllTeams}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<i class='fas fa-users' /> <Text id='teams.show-all'>Show all</Text>\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>}\n\t\t\t\t</div>\n\t\t\t</div>\n        );\n    }\n}\n\nexport default Teams;\n"],"sourceRoot":""}