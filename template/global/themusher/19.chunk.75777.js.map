{"version":3,"sources":["webpack:///./components/feedback/likesAndComments.js","webpack:///./components/workout/commentAdd.js","webpack:///./components/util/scrollIntoView.js","webpack:///./components/team/formGraph.js","webpack:///./components/workout/totals.js","webpack:///./components/workout/commentReply.js","webpack:///./lib/icons.js","webpack:///./components/form/links.js","webpack:///./components/data/distance.js","webpack:///./components/workout/status.js","webpack:///./components/map/style.css","webpack:///./components/style.css","webpack:///./components/user/index.js","webpack:///./components/map/index.js","webpack:///./components/workout/index.js","webpack:///./components/workout/calendarPlan.js","webpack:///./components/dog/index.js","webpack:///./components/form/achievements.js","webpack:///./components/dog/simplePublic.js","webpack:///./components/data/temperature.js","webpack:///./components/workout/graphAvg.js","webpack:///./components/form/files.js","webpack:///./components/modal/index.js","webpack:///./components/data/weight.js","webpack:///./components/workout/graph.js","webpack:///./components/user/invite.js","webpack:///./components/dog/scroller.js","webpack:///./routes/teams/detail.js","webpack:///./components/team/public.js","webpack:///./components/ad/index.js","webpack:///./routes/teams/publicDetail.js","webpack:///./components/data/elevation.js","webpack:///./components/team/publicLine.js","webpack:///./components/data/speed.js","webpack:///./components/form/images.js","webpack:///./components/overlay/index.js","webpack:///./components/team/connect-confirm.js","webpack:///./components/workout/comments.js","webpack:///./components/form/dragNdropFileupload.js","webpack:///./components/feedback/views.js","webpack:///./components/premium/badge.js"],"names":["initialState","DisplayLikesAndComments","observer","props","toggleLikes","setState","showLikesList","state","render","this","stores","storyStore","teamStore","workoutStore","raceStore","likes","comments","type","onTeamClick","class","length","style","onClick","slice","map","like","user","teams","publicTeam","findPublicUser","findPublicTeamByMembers","util","isArray","find","e","public","mu","getImage","team","priority","displayNameShort","name","displayName","href","uuidv4","title","id","fields","total","image","shortname","Component","WorkoutAdd","beforeImagesUploaded","sendButtonEnabled","afterImagesUploaded","commentWorkout","response","callback","inputRefObject","workout","comment","showAddImage","status","body","images","resizeTextarea","addImage","addImages","push","value","handleImageErrored","target","onerror","setTimeout","src","Date","inputRef","col","offset","showAvatar","extraClass","userStore","firstname","ucfirst","lastname","email","userImage","undefined","s3SmallLink","for","placeholder","onInput","linkState","onKeyUp","onFocus","ref","data-id","disabled","img","onError","removeImage","data-name","object","updateField","before","after","autoOpen","ScrollIntoView","container","componentDidMount","horizontal","vertical","behavior","inline","block","scrollIntoView","c","FormGraph","graphFitness","graphFatigue","graphForm","xTicksAll","date","partsLength","Math","floor","xTicks","i","l","width","height","showXTicks","paddingTop","lineFromXzero","lineFromXmax","dataLeft","dataFillLeft","legendLeft","dataRight","legendRight","showYTicksLeft","avgWindowLeft","smoothLeft","showYTicksRight","scrollToRight","WorkoutTotals","loadAll","loadTeams","currentMonth","currentYear","getMonth","getFullYear","month","year","load","query","currentTeam","skipMusherWorkoutSummary","addData","componentWillReceiveProps","nextProps","currentSeasonSummary","currentSeason","prevSeasonSummary","prevSeason","seasonStart","parseInt","findWorkoutSummary","findWorkoutSummaryTotal","distanceKm","smallUnit","elevation","secToHms","duration","speedAvg","WorkoutCommentReply","commentId","commentReplyWorkout","ICONS","adit","Icon","iconUrl","iconSize","iconAnchor","airport","analyse","archaeological","architecture","arrow_up","arrow_up_double","atm","avatar","bag","bar","barracks","battlefield","beach","bicycle","boundary_stone","buddhism","building","burger","bus","bus_stop","cable_car","camera","camp_site","car","caravan_site","cartography","cash","castle","castle_defensive","cave_entrance","cemetery","chapel","christianism","cinema","cinema_alt","city","cityhall","clean","compass","compass_alt","construction","contour","court_house","crown","crucifix","data","database","dentist","dislike","download","drag_lift","drop","eye","facebook","fire","fishing","flag","forbidden","fort","fountain","fuel","fuel_alt","gallery","gear","github","go","golf","heart","helicopter","home","hospital","hostel","hotel","hotel_alt","ice_ring","information","internet","invisible","islamism","island","judaism","laptop","library","lighthouse","linkedin","lion","lock","magnifier","mall","mapkey","mapshakers","marina","marker","market_place","mine","monument","mountain","museum","music","nature","nocamera","nonsmoking","north","north_alt","north_alt_II","north_alt_III","oppositeway","parking","pharmacy","picnic_site","pitch","playground","playground_alt","police","post_office","pub","restaurant","rocks","ruins","saddle","sailboat","school","seal","shelter","sinkhole","skype","smartphone","smoking","sport_centre","spring","square","stadium","star","stop","stupa","supermarket","swimming_pool","telephone","theatre","ticket","toilet","tower","town","traffic_signal","train","tram","tram_stop","tree_cinofer","tree_leaf","triangle","underground","unesco","university","upload","viewpoint","viewtower","village","vineyard","volcano","water_tower","water_well","watermill","waterpark","waterwork","wayside_cross","wind_generator","windmill","zoo","Icons","get","icon","list","Object","keys","getDiv","color","textColor","borderColor","iconWidth","iconHeight","randomPassword","hsl2Rgb","DivIcon","className","html","getRaceMarker","bib","rank","iconAnchorX","iconAnchorY","imageCirlceRadius","lineHeight","fontSize","paddingBottom","mapChecked","titlePrefix","dotColor","getRankingColor","mapIsDark","test","imageCircle","getDistanceMarker","getMarker","getSmallMarker","Achievements","handleAdd","field","url","removeLink","dogStore","closest","dataset","linkId","showFiles","links","file","isoDate","createdDate","aria-describedby","linkstate","displayDistance","distance","format","Distance","settings","imperial","kmToMiles","WorkoutStatus","loadWorkoutPlans","workoutPlanCurrent","workoutPlanStore","seasonYear","seasonMonth","workoutPlans","loadWorkoutSummary","getWorkoutSummary","dog","lastPlanMonth","workoutPlan","language","MONTHS","getMonths","findTeam","months","monthRange","planMonth","sumWorkoutPlanMonth","percCompleted","findWorkoutSummaryMonth","role","aria-valuenow","aria-valuemin","aria-valuemax","module","exports","User","removeUser","parentNode","console","log","removeMember","adminUpdateUser","clearTimeout","updateTimer","doAdminUpdateUser","simulateUser","getSimulateUser","currentUser","isAdmin","findTeams","summary","findMusherSummary","isTeamAdmin","cellphone","asUrl","rel","asFacebookLink","instagram","asInstagramLink","snapchat","asSnapchatLink","data-email","JSON","stringify","subscription","deviceInfo","notifications","notificationTopics","applications","shadowTags","garmin","strava","currentLocationGeocode","lastActivityEpoch","activities","veterinaryAllowed","checked","twoFactorLogin","isVeterinary","avgDistance","avgElevation","avgDuration","avgDogs","data-team","MARKDOWN_OPTIONS","pedantic","gfm","breaks","sanitize","smartLists","smartypants","xhtml","BaseLayer","LayersControl","Overlay","L","Default","prototype","_getIconUrl","mergeOptions","iconRetinaUrl","require","shadowUrl","createClusterCustomIcon","cluster","divIcon","getChildCount","point","App","mapRef","createRef","polyRef","handleViewportChanged","mapCenter","center","mapZoom","zoom","handleLocationFound","latlng","hasLocation","onEachFeature","feature","layer","gpxInfo","popupContent","totalDistance","maxSpeed","avgSpeed","ascent","calculatedAscend","decent","calculatedDescend","bindPopup","handleClick","appState","setLatlng","zoomToGeoJSON","bounds","getBounds","_northEast","err","zoomToMarkers","markers","force","hasZoomedToMarkers","current","leafletElement","markerBounds","latLngBounds","forEach","extend","lat","lng","fitBounds","zoomToAllMarkers","waypoints","zoomToFirst10Markers","zoomToFirst3Markers","zoomToFavoriteMarkers","overlayAdd","visibleLayers","overlayRemove","polylineOptions","rangeSteps","maxHslColor","mapColorMode","newRangeMin","mapRangeMin","newRangeMax","mapRangeMax","speeds","min","ceil","max","range","colors","val","newMin","newMax","normalizeRange","r","g","b","setMapRange","setMapColors","polylineOptionIdxFn","latLng","altThresholds","mapRange","meta","polylinetrackPointFactory","dataArray","climbs","filter","item","idx","trkpt","showSpeed","setMapColorMode","handleMarkerClick","opt","onMarkerClick","handleMarker2Click","onMarker2Click","handleMarker3Click","onMarker3Click","baseLayerChange","setMapChecked","whenReadyHandler","on","Windspeed","geoJSONStyle","weight","fillOpacity","fillColor","geoJSONStyleList","componentWillUnmount","startMarker","endMarker","waypoints2","waypoints3","geoJSONs","geojson","minZoom","maxZoom","heatmap","skipGeojson","zoomToWaypoints","fullscreenMap","showZoomControl","showLayersControl","showScaleControl","showRange","showTrackProfile","distanceMarkerSteps","showDistanceMarkers","groupWaypoints","largeMarkers","layersControlPosition","mapColors","tempGeoJson","toJS","track","asObject","hasWaypoints","distanceMarkers","distances","currentDistance","steps","Array","onTouchmove","captureAllEvents","onScroll","onViewportChanged","onLocationfound","zoomControl","doubleClickZoom","scrollWheelZoom","dragging","Browser","mobile","tap","touchZoom","animate","easeLinearity","onOverlayadd","onOverlayremove","whenReady","position","attribution","subdomains","metric","Temperature","Precipitation","fitBoundsOnLoad","fitBoundsOnUpdate","points","longitudeExtractor","m","latitudeExtractor","intensityExtractor","parseFloat","positions","optionIdxFn","options","lineCap","opacity","smoothFactor","zoomAnimation","key","gj","onAdd","icons","wp","draggable","markdown","markdownOpts","reverse","zIndexOffset","maxClusterRadius","iconCreateFunction","speed","bearing","currentState","getWorkoutColor","getWorkoutIcon","MAX_LOADINDEX","getMaxLoadIndex","showAddComment","viewImageIdx","likeWorkout","Workout","toggleDate","stopPropagation","preventDefault","showDate","workoutId","toggleAddComment","parentElement","focus","viewImage","shareLink","shareUrl","text","teamid","showTeam","hideTeam","onUserClick","onDogClick","dogid","dogs","showDog","hideDog","forceShowDate","wrapperClasses","wrapperClassesRow","viewmode","hasShareApi","allDogs","intensity","findIntensity","code","teamName","teamNames","hasLikedWorkout","findIndex","mushers","loadIndex","workoutEquipment","findEquipment","equipment","workoutEquipmentIcon","musherImages","musher","u","publicUser","mapImage","imgs","batteryUsage","battegryLevelStart","battegryLevelEnd","views","getViews","statistics","marginTop","marginBottom","back","temperature","isLocked","isInProgress","formatDate","locale","hour12","hour","minute","formatDistance","getLoadIndexColor","normalizeBetween","getLoadIndexText","garminId","stravaId","dogsLeft","dogsRight","sledWeight","indexOf","kcalBurnedTotal","kcalMeatGramsTotal","kcalSalmonGramsTotal","kcalFatGramsTotal","description","replaceImages","getMarkdownOptions","avgGpsMovingSpeed","dblClick","likeRef","data-url","data-title","data-native","compact","RED_DAYS","Calendar","setFocus","editMonth","showInput","inputYear","inputMonth","inputDay","inputWeek","newDistance","editWeek","week","editDay","day","saveDistance","saveField","resetInput","getYear","insert","nextDay","addDays","getDate","getWeek","checkKeydown","updateWorkoutPlanTips","hideWorkoutPlanTips","toggleTips","newValue","updateSetting","darkmode","DAYS","getDays","currentDay","currentEpoch","getTime","basehref","showNavigation","showHeader","monthNum","yearNum","getNextMonth","nextMonth","nextYear","getPrevMonth","prevMonth","prevYear","daysOfMonth","getDaysInMonth","weeksInMonth","getWeeksInMonth","daysOfWeek","getDaysInWeek","totalDistanceKmMonth","totalDistanceKmMonthPlan","totalWorkoutDistanceKmMonth","isMonthInTheFuture","summaryMonth","findWorkoutPlanSummaryMonth","tips","tipsMonth","padDate","hasTipsMonth","onKeydown","autocomplete","getDay","weekObj","summaryWeek","findWorkoutPlanSummaryWeek","asNumber","isWeekInTheFuture","totalWeek","totalWorkoutWeek","tipsWeek","hasTipsWeek","data-week","data-year","data-distance","yyyy","mm","dd","isDayInTheFuture","summaryWorkout","findWorkoutSummaryWeekDay","findWorkoutPlanSummaryDay","isChosen","isToday","isDayOff","data-day","data-month","getPlanColor","count","colspan","time","totalWorkouts","Dog","workoutSummary","dogStatuses","statuses","findDogstatus","dogVaccines","findVaccineStatuses","dogVaccineLogStatuses","findVaccineLogStatuses","chipId","dogHistoryStatuses","findHistoryStatuses","dogStatus","dogPosition","findDogposition","hasBirthday","birth","daysUntilBirthday","daysUntilNextBirthday","findHarness","harness","age","deceased","gender","history","bodyScore","v","endDate","vaccineType","lead","wheel","specialNeeds","lang","vac","inKarens","vaccineAgens","removeAchievement","achievementId","achievements","showInfo","showName","showPosition","showAge","size","containerWidth","imageClasses","onTouchstart","onTouchend","celciusToFahrenheit","WorkoutGraphAvg","withText","distanceAvgAll","distanceAvg","ascendAvgAll","ascendAvg","speedAvgAll","durationAvgAll","durationAvg","realDurationAvgAll","realDurationAvg","loadIndexAll","plan","teamAmbition","teamType","teamId","graphAvgWorkoutStatsDistance","graphAvgWorkoutStatsElevation","graphAvgWorkoutStatsSpeed","graphAvgWorkoutStatsDuration","graphAvgWorkoutStatsLoadIndex","graphWorkoutAvgWeekDistanceCurrent","graphWorkoutAvgWeekElevationCurrent","graphWorkoutAvgWeekSpeedCurrent","graphWorkoutAvgWeekDurationCurrent","graphWorkoutAvgWeekLoadIndexCurrent","graphAvgWorkoutStatsCount","weekRange","wo","partSize","xTicksVal","smoothRight","yTicksLeftPostfix","unitLeft","yTicksLeftVal","Files","handleAddImage","files","uploadStatus","apiUrl","Modal","touchStart","startY","touches","pageY","touchEnd","readyToRefresh","touchMove","appContainer","scrollTop","refreshing","close","imagexxl","thumb","Weight","kgToPounds","WorkoutGraph","rest","ascend","avgImages","rating","graphWorkoutSummaryWeekDistanceCurrent","graphWorkoutSummaryWeekDistancePrev","graphWorkoutSummaryWeekElevationCurrent","graphWorkoutSummaryWeekElevationPrev","avgDayDistance","avgDayElevation","avgDayDuration","avgDaySpeedAvg","avgDayLoadIndex","avgDayAvgDogs","avgDayAvgImages","avgDaySledWeight","avgDayRest","avgDayRating","avgDayTemperature","graphPlanWeekDistanceCurrent","isLoading","showExtra","seasonWeeks","seasonDays","dayRange","parts","xTicksAllDays","partsDays","xTicksDays","xTicksLink","yTicksRightPostfix","unitRight","avgWindowRight","paddingLeft","yTicksLeftWidth","yTicksRightVal","Invite","inviteKennel","friendEmail","inviteSent","inviteNew","hideInvite","forceShow","DogScroller","scrollImages","imageIdx","scrollLeft","clientWidth","nearestInt","round","diff","abs","Number","isInteger","sortByName","a","dogA","dogB","sort","dogId","d","MARGIN_TOP","MARGIN_TOP_BACK","marginTopBack","MARGIN_BOTTOM","newTeam","submenu","Input","removeMainImage","saved","help","datalist","showImages","addToImages","data-field","el","rows","formatBytes","removeFile","TeamsDetail","loadTeam","plotFormGraph","loadHeatmap","getHeatmap","loadMore","loadWorkouts","append","limit","viewTeam","getWorkoutSummaryDay","daysBack","updateItem","resetGraphPlanWeekDistanceCurrent","prepareWeekGraphs","updateKeyValue","deleteTeam","PubSub","publish","topics","STATUS_MESSAGE","message","route","elementtype","isNew","updateFieldValue","datatype","skipTimer","localObjectValue","split","updateObjectKeyValue","doUpdateField","reCalculateFitness","recalculated","reCalcFitness","chooseSubmenu","menu","goBack","loadSummaryData","Promise","all","workouts","users","followers","blockedFollowers","imageHeader","findTeamAmbition","ambition","ambitions","findTeamType","headerImage","s3XXLargeLink","teamImage","s3LargeLink","place","country","data-menu","noimagestext","section","trophys","getTrophyImage","textHeader","descriptionHeader","native","t","myTeamId","showBlockButton","isBlocked","mapId","Team","requestFollowTeam","followRequest","requestSent","unFollowTeam","unollowTeam","unfollowed","getButton","skipHome","simple","classNames","isYourTeam","members","isFollowing","hasRequestedFollow","followRequests","buttonOnly","Ad","subject","logClick","ads","adStore","apiServer","getApiServer","loadAd","page","path","postalcode","replace","setTime","match","ad","subscribeNotificationTopic","setNotificationTopic","loadPublicView","getPublicViews","loadPublicTeam","loadPublicDetail","setSwipeRight","publicViewsGraphData","some","publicTrophys","publicMemories","publicDogs","topic","imagesSponsor","sponsors","descriptionWorkoutplan","Elevation","meterToFeet","confirmed","deleted","TeamLine","confirmRequest","confirmFollowRequest","deleteRequest","deleteFollowRequest","getUnblockButton","userId","isConfirmed","data-user","username","isDeleted","s3MediumLink","Speed","kmtToMph","Images","children","Teams","follow","followRequestUser","hasFollowRequests","reqUser","data-follow","showAllComments","showAllReplies","WorkoutComments","likeComment","likeWorkoutComment","likeReply","replyId","likeWorkoutCommentReply","replyComment","toggleComments","toggleReplies","translate","showOriginal","translatedText","commentid","replyid","translateCommentReply","translateComment","max_comments","filteredComments","totalComments","diplayedComments","hasLikedComment","filteredReplises","totalReplies","diplayedReplies","currentImage","translation","getCommentTranslations","targetLang","loading","data-idx","data-commentid","updatedDate","formatted_address","reply","hasLikedReply","replyTranslation","getCommentReplyTranslations","replyBody","data-comment","data-replyid","more","DragNDropFileupload","dropRef","handleDrag","handleDragIn","dragCounter","dataTransfer","items","drag","handleDragOut","handleDrop","readLocalFile","handleAddFiles","event","handleEvent","handleUpload","fileObject","isFunction","formData","FormData","uploadMeta","progress","xhr","XMLHttpRequest","addEventListener","updateProgress","fileObj","uploadDone","open","setRequestHeader","getJwtToken","send","filename","uploadedFilesData","imageNum","resolve","reject","reader","FileReader","error","photo","readAsDataURL","lengthComputable","percentComplete","loaded","readyState","parse","responseText","addFileToUpload","fileInput","loadingProgress","uploadedFiles","div","click","removeEventListener","border","backgroundColor","top","bottom","left","right","zIndex","textAlign","multiple","onchange","isImage","result","toggleViews","showViewList","viewUsersArrays","entries","weekObject","viewUsers","flat"],"mappings":"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","file":"19.chunk.75777.js","sourcesContent":["import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport { Text, Localizer } from 'preact-i18n';\n\nimport mu from '../../lib/musher-util';\n\nconst initialState = {};\n\nconst MAX_USERS_TO_DISPLAY = 1;\n\n@observer\nclass DisplayLikesAndComments extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            ...initialState,\n        };\n    }\n\n    toggleLikes = () => {\n        const { showLikesList } = this.state;\n        this.setState({\n            showLikesList: !showLikesList,\n        });\n    }\n\n    render() {\n        const { showLikesList } = this.state;\n        const { storyStore, teamStore, workoutStore, raceStore } = this.props.stores;\n        const { likes, comments, type = 'story', onTeamClick = () => {}, onUserClick = () => {} } = this.props;\n\t\treturn (<>\n            <div class='d-flex justify-content-between mb-2'>\n                {likes && likes.length > 0 && <>\n                    <div class='d-flex flex-row flex-nowrap position-relative mr-3' style='overflow: auto;'>\n                        <span\n                            class='text-muted mr-2'\n                            onClick={this.toggleLikes}\n                        >\n                            <i class='fas fa-thumbs-up text-primary' /> {likes.length}\n                        </span>\n                        {likes.slice(0, MAX_USERS_TO_DISPLAY).map((like) => {\n                            let user;\n                            let teams;\n                            if (type === 'story') {\n                                user = storyStore.findPublicUser(like.user);\n                                teams = storyStore.findPublicTeamByMembers(like.user);\n                            } else if (type === 'team') {\n                                user = teamStore.findPublicUser(like.user);\n                                teams = teamStore.findPublicTeamByMembers(like.user);\n                            } else if (type === 'workout') {\n                                user = workoutStore.findPublicUser(like.user);\n                                teams = workoutStore.findPublicTeamByMembers(like.user);\n                            } else if (type === 'race') {\n                                user = raceStore.findPublicUser(like.user);\n                                teams = raceStore.findPublicTeamByMembers(like.user);\n                            }\n                            let publicTeam;\n                            if (util.isArray(teams)) {\n                                publicTeam = teams.find(e => e.public === 1);\n                            }\n                            const image = mu.getImage({ user, team: publicTeam, priority: 'user' });\n                            const shortname = mu.displayNameShort(user);\n                            const name = mu.displayName(user);\n                            return (<>\n                                <span class='font-weight-lighter'>\n                                    {publicTeam ? <>\n                                        <a href={`/teams/public/${publicTeam.uuidv4}`} title={publicTeam.name} onClick={(e) => onTeamClick(e, publicTeam.uuidv4)}>\n                                            {name}\n                                        </a>\n                                    </> : <>\n                                        {name}\n                                    </>}\n                                </span>\n                            </>);\n                            // return (<>\n                            //     {publicTeam ? <>\n                            //         <a href={`/teams/public/${publicTeam.uuidv4}`} title={publicTeam.name} onClick={(e) => onTeamClick(e, publicTeam.uuidv4)}>\n                            //             <div\n                            //                 class={`text-center border rounded-circle imageRounded imageRoundedThumb`}\n                            //                 style={`${image ? `background-image: url(\"${image}\"); background-size: cover;` : ''}`}\n                            //             >\n                            //                 {!image && <div class='' style='font-size: 12px; padding-top: 3px;'>{shortname}</div>}\n                            //             </div>\n                            //         </a>\n                            //     </> : <>\n                            //         <div\n                            //             class={`text-center border rounded-circle imageRounded imageRoundedThumb`}\n                            //             style={`${image ? `background-image: url(\"${image}\"); background-size: cover;` : ''} opacity: 0.5;`}\n                            //         >\n                            //             {!image && <div class='text-muted' style='font-size: 12px; padding-top: 3px;'>{shortname}</div>}\n                            //         </div>\n                            //     </>}\n                            // </>);\n                        })}\n                        {likes.length > MAX_USERS_TO_DISPLAY && <>\n                            <span class='text-muted font-weight-lighter ml-2' onClick={this.toggleLikes}>\n                                <Text id='likes-comments.and' fields={{ total: likes.length - MAX_USERS_TO_DISPLAY }}>and {likes.length - MAX_USERS_TO_DISPLAY} others.</Text>\n                            </span>\n                        </>}\n                    </div>\n                </>}\n\n                {comments && comments.length > 0 && <span class='float-right text-muted'>\n                    <i class='fas fa-comment text-primary' /> {comments.length}\n                </span>}\n            </div>\n            {showLikesList && <div class='mt-3 mb-3'>\n                {likes && likes.map((like) => {\n                    let user;\n                    let teams;\n                    if (type === 'story') {\n                        user = storyStore.findPublicUser(like.user);\n                        teams = storyStore.findPublicTeamByMembers(like.user);\n                    } else if (type === 'team') {\n                        user = teamStore.findPublicUser(like.user);\n                        teams = teamStore.findPublicTeamByMembers(like.user);\n                    } else if (type === 'workout') {\n                        user = workoutStore.findPublicUser(like.user);\n                        teams = workoutStore.findPublicTeamByMembers(like.user);\n                    } else if (type === 'race') {\n                        user = raceStore.findPublicUser(like.user);\n                        teams = raceStore.findPublicTeamByMembers(like.user);\n                    }\n                    let publicTeam;\n                    if (util.isArray(teams)) {\n                        publicTeam = teams.find(e => e.public === 1);\n                    }\n                    const image = mu.getImage({ user, team: publicTeam, priority: 'user' });\n                    const shortname = mu.displayNameShort(user);\n                    const name = mu.displayName(user, true);\n                    return (<div class='d-flex flex-row position-relative font-weight-light mb-1'>\n                        {publicTeam ? <>\n                            <a href={`/teams/public/${publicTeam.uuidv4}`} title={publicTeam.name} onClick={(e) => onTeamClick(e, publicTeam.uuidv4)} class='stretched-link'>\n                                <div\n                                    class={`text-center border rounded-circle imageRounded imageRoundedThumb`}\n                                    style={`${image ? `background-image: url(\"${image}\"); background-size: cover;` : ''}`}\n                                >\n                                    {!image && <div class='' style='font-size: 12px; padding-top: 3px;'>{shortname}</div>}\n                                </div>\n                            </a>\n                            <div class='ml-2 '>\n                                {name} <span class='font-weight-lighter'>- {publicTeam.name}</span>\n                            </div>\n                        </> : <>\n                            <div\n                                class={`text-center border rounded-circle imageRounded imageRoundedThumb`}\n                                style={`${image ? `background-image: url(\"${image}\"); background-size: cover;` : ''} opacity: 0.5;`}\n                            >\n                                {!image && <div class='text-muted' style='font-size: 12px; padding-top: 3px;'>{shortname}</div>}\n                            </div>\n                            <div class='ml-2'>\n                                {name}\n                            </div>\n                        </>}\n                    </div>);\n                })}\n            </div>}\n\t\t</>);\n\t}\n}\n\nexport default DisplayLikesAndComments;\n","import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport { Text, Localizer, withText } from 'preact-i18n';\nimport linkState from 'linkstate';\n\nimport Images from '../form/images';\n\nimport style from '../style.css';\nimport mu from '../../lib/musher-util';\n\n@observer\nclass WorkoutAdd extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            comment: {\n                body: '',\n                images: [],\n            },\n            showAddImage: false,\n            sendButtonEnabled: true,\n        };\n        this.inputRef = {};\n    }\n\n    beforeImagesUploaded = () => {\n        this.setState({ sendButtonEnabled: false });\n    }\n\n    afterImagesUploaded = () => {\n        this.setState({ sendButtonEnabled: true });\n    }\n    \n    commentWorkout = async () => {\n        const { sendButtonEnabled } = this.state;\n        if (!sendButtonEnabled) {\n            return false;\n        }\n        const { callback = () => {}, inputRefObject = {} } = this.props;\n        const { workout } = this.props;\n\t\tconst { workoutStore } = this.props.stores;\n        const { comment, showAddImage } = this.state;\n        this.setState({ sendButtonEnabled: false });\n\t\tconst response = await workoutStore.commentWorkout({ id: workout.id, comment });\n\t\tif (response && response.status === 200) {\n            this.setState({\n                comment: {\n                    body: '',\n                    images: [],\n                },\n            }, () => {\n                mu.resizeTextarea(inputRefObject[workout.id]);\n                if (showAddImage) {\n                    this.addImage();\n                }\n            });\n            callback({ workout, response });\n\t\t}\n        this.setState({ sendButtonEnabled: true });\n\t}\n\n    addImages = ({ value }) => {\n        // updateField({ id: object.id, field: 'images', value: images, skipTimer: true });\n        const { comment } = this.state;\n        comment.images.push(...value);\n        this.setState({ comment });\n    }\n\n    addImage = () => {\n        const { showAddImage = false } = this.state;\n        this.setState({\n            showAddImage: !showAddImage,\n        });\n    }\n\n    handleImageErrored = (e) => {\n        const image = e.target;\n        image.onerror = null;\n        setTimeout(() => {\n            image.src += `?${new Date()}`;\n        }, 1000);\n    }\n\n    render() {\n        const { inputRef, col = 12, offset = 0, showAvatar = true, extraClass = '', workout } = this.props;\n        const { comment, showAddImage, sendButtonEnabled } = this.state;\n        const { userStore } = this.props.stores;\n        const { user = {} } = userStore;\n        const displayNameShort = user.firstname ? `${util.ucfirst(user.firstname, true)}${util.ucfirst(user.lastname, true)}` : `${util.ucfirst(user.email || '', true)}`;\n        // const displayName = user.firstname ? `${user.firstname} ${user.lastname}` : `${user.email}`;\n        const userImage = user.image || (user.images ? user.images[0] : undefined);\n\n        return (\n            <div class={`col-${col} offset-${offset} ${extraClass}`}>\n                <div class='d-flex mb-0 position-relative w-100'>\n                    {showAvatar && <div \n                        class={`text-center border rounded-circle imageRounded imageRoundedSmall`}\n                        style={`${userImage ? `background-image: url('${userImage.s3SmallLink}'); background-size: cover;` : ''} border-width: 3px !important;`}\n                    >\n                        {!user.image && <span class='font-weight-lighter' style='font-size: 15px;'>{displayNameShort}</span>}\n                    </div>}\n                    <div class='col pl-3' style='line-height: 1.2em;'>\n\n                        <div class='d-flex bd-highlight'>\n                            <div class='p-0 w-100 bd-highlight'>\n                                <label class='sr-only' for='inlineFormInput'><Text id='comments.comment'>Kommentar</Text></label>\n                                <div class='border rounded rounded-lg position-relative'>\n                                    <Localizer>\n                                        <textarea\n                                            class='form-control-plaintext px-2'\n                                            type='text'\n                                            placeholder={<Text id='comments.write-comment'>Skriv en kommentar...</Text>}\n                                            onInput={linkState(this, 'comment.body')}\n                                            onKeyUp={mu.resizeTextarea}\n                                            onFocus={mu.resizeTextarea}\n                                            style='height: 2.3em;'\n                                            value={comment.body}\n                                            ref={inputRef}\n                                        />\n                                    </Localizer>\n                                    <div class='position-absolute' style='top: 8px; right: 10px; font-size: 1.2em;'>\n                                        <i class='fas fa-image pointerCursor'\n                                            data-id={workout.id}\n                                            onClick={this.addImage}\n                                        />\n                                    </div>\n                                </div>\n                            </div>\n                            <div class='p-0 pl-2 flex-shrink-1 bd-highlight'>\n                                <button type='button' class={`btn btn-${sendButtonEnabled ? 'primary' : 'secondary'} mb-2`} disabled={!sendButtonEnabled}\n                                    onClick={this.commentWorkout}\n                                ><i class='fas fa-paper-plane' /></button>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n                {showAddImage && <>\n                    <div class='col-12 text-center'>\n                        <div class='container-fluid'>\n                            <div class='row'>\n                                {comment.images && comment.images.map(img => (\n                                    <div class='col-3 p-1'>\n                                        <img src={img.s3SmallLink} class='img-fluid' onError={this.handleImageErrored} />\n                                        <button class='btn btn-sm btn-link'\n                                            onClick={this.removeImage}\n                                            data-name={img.name}\n                                        ><i class='fas fa-trash' />  <Text id='comments.remove-image'>Remove</Text></button>\n                                    </div>\n                                ))}\n                            </div>\n                        </div>\n                        <Images object={comment} updateField={this.addImages} before={this.beforeImagesUploaded} after={this.afterImagesUploaded} autoOpen={true} />\n                    </div>\n                </>}\n            </div>\n        );\n    }\n}\n\nexport default WorkoutAdd;\n","import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\n\nconst initialState = {};\n\n@observer\nclass ScrollIntoView extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            ...initialState,\n        };\n        this.container = null;\n    }\n\n    componentDidMount() {\n        const { horizontal, vertical = '' } = this.props;\n        const props = {\n            behavior: 'smooth',\n        };\n        if (horizontal) {\n            props.inline = horizontal;\n        }\n        if (vertical) {\n            props.block = vertical;\n        }\n\t\tthis.container.scrollIntoView(props);\n\t}\n\n    render() {\n        return (\n            <div ref={c => this.container = c}>&nbsp;</div>\n        );\n    }\n}\n\nexport default ScrollIntoView;\n","import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport { Text, Localizer, withText } from 'preact-i18n';\n\nimport mu from '../../lib/musher-util';\n\nimport LineGraph from '../../components/lineGraph';\n\n@observer\nclass FormGraph extends Component {\n    render() {\n        const { teamStore } = this.props.stores;\n        const {\n            graphFitness,\n            graphFatigue,\n            graphForm,\n\t\t} = teamStore;\n\n        if (!graphFitness || graphFitness.length === 0) {\n            return '';\n        }\n\n        const xTicksAll = graphForm.map(e => e.date);\n        const partsLength = Math.floor(xTicksAll.length / 4);\n        const xTicks = [];\n        for (let i = 0, l = xTicksAll.length; i < l; i += partsLength) {\n            xTicks.push(xTicksAll[i]);\n        }\n        xTicks[xTicks.length - 1] = xTicksAll[xTicksAll.length - 1];\n\n        return (\n            <>\n                <h5><Text id='teams.fitness'>Form og belastning</Text></h5>\n                <div class='w-100 mt-3 mb-4'>\n                    <Localizer>\n                        <LineGraph\n                            stores={this.props.stores}\n                            width={1500}\n                            height={300}\n                            showXTicks={1}\n                            xTicks={xTicks}\n                            paddingTop={30}\n                            lineFromXzero={false}\n                            lineFromXmax={false}\n\n                            dataLeft={[graphFitness, graphFatigue]}\n                            dataFillLeft={[1]}\n                            legendLeft={[<Text id='teams.legend-fitness'>Fitness</Text>, <Text id='teams.legend-fatigue'>Fatigue</Text>]}\n\n                            dataRight={[graphForm]}\n                            legendRight={[<Text id='teams.legend-form'>Form</Text>]}\n\n                            // yMaxLeft={30}\n                            // yMinLeft={0}\n                            showYTicksLeft={1}\n                            avgWindowLeft={[0, 0]}\n                            smoothLeft={[0, 0]}\n\n                            // dataRight={[graphWorkoutAvgWeekElevationCurrent, graphAvgWorkoutStatsElevation]}\n                            // legendRight={[`${seasonStart} ${ascendAvg}`, `${seasonStart} ${ascendAvgAll}`]}\n                            showYTicksRight={1}\n                            // yTicksRightPostfix={'m'}\n                            // unitRight={['m', 'm']}\n                            // avgWindowRight={[0, 0]}\n                            // smoothRight={[1, 1]}\n\n                            // marker={week}\n                            scrollToRight={true}\n                        />\n                    </Localizer>\n                </div>\n            </>\n        );\n    }\n}\n\nexport default FormGraph;\n","import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport { Text, Localizer, withText } from 'preact-i18n';\n\nimport style from '../style.css';\nimport mu from '../../lib/musher-util';\n\nimport Speed from '../../components/data/speed';\nimport Elevation from '../../components/data/elevation';\nimport Weight from '../../components/data/weight';\nimport Distance from '../../components/data/distance';\nimport Temperature from '../../components/data/temperature';\n\n@observer\nclass WorkoutTotals extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {};\n    }\n\n    async loadAll(props = this.props) {\n        await this.loadTeams(props);\n        // await Promise.all([\n        //     this.loadTeams(props),\n        // ]);\n    }\n\n    async loadTeams(props = this.props) {\n\t\tconst { teamStore } = props.stores;\n\n        const currentMonth = new Date().getMonth() + 1;\n        const currentYear = new Date().getFullYear();\n\n\t\tconst { month = currentMonth, year = currentYear, currentTeam } = props;\n\n\t\tawait teamStore.load({ query: { team: currentTeam, skipMusherWorkoutSummary: true, year, month }, addData: ['workoutSummary'] });\n\t}\n\n\tcomponentDidMount() {\n\t\tthis.loadAll();\n\t}\n\n    componentWillReceiveProps(nextProps) {\n        if (nextProps.year !== this.props.year || nextProps.currentTeam !== this.props.currentTeam) {\n            this.loadAll(nextProps);\n        }\n    }\n\n    render() {\n        const { teamStore } = this.props.stores;\n\n        const currentMonth = new Date().getMonth() + 1;\n        const currentYear = new Date().getFullYear();\n\t\tconst { month = currentMonth, year = currentYear, currentTeam, currentSeason: currentSeasonSummary, prevSeason: prevSeasonSummary } = this.props;\n\t\tconst seasonStart = parseInt(month < 8 ? year - 1 : year, 10);\n\n        const { workoutSummary } = teamStore;\n        const prevSeason = prevSeasonSummary || ((currentTeam ? teamStore.findWorkoutSummary(currentTeam, seasonStart - 1) : teamStore.findWorkoutSummaryTotal(seasonStart - 1)) || {});\n        const currentSeason = currentSeasonSummary || ((currentTeam ? teamStore.findWorkoutSummary(currentTeam, seasonStart) : teamStore.findWorkoutSummaryTotal(seasonStart)) || {});\n\n        return (\n            <div class='container-fluid mb-2'>\n                <div class='row mt-2 border-top'>\n                    <div class='col text-center'>\n                        <small class='text-muted'><i class='fas fa-road' /> {seasonStart}-{seasonStart + 1}</small>\n                        <h3>\n                            <Distance stores={this.props.stores} value={currentSeason.distanceKm || 0} smallUnit={true} />\n                        </h3>\n                    </div>\n                    <div class='col text-center border-left'>\n                        <small class='text-muted'><i class='fas fa-road' /> {seasonStart - 1}-{seasonStart}</small>\n                        <h3 class='text-muted'>\n                            <Distance stores={this.props.stores} value={prevSeason.distanceKm || 0} smallUnit={true} />\n                        </h3>\n                    </div>\n                </div>\n                <div class='row mt-2'>\n                    <div class='col text-center'>\n                        <small class='text-muted'><i class='fas fa-mountain' /> {seasonStart}-{seasonStart + 1}</small>\n                        <h3>\n                            <Elevation stores={this.props.stores} value={currentSeason.elevation || 0} smallUnit={true} />\n                        </h3>\n                    </div>\n                    <div class='col text-center border-left'>\n                        <small class='text-muted'><i class='fas fa-mountain' /> {seasonStart - 1}-{seasonStart}</small>\n                        <h3 class='text-muted'>\n                            <Elevation stores={this.props.stores} value={prevSeason.elevation || 0} smallUnit={true} />\n                        </h3>\n                    </div>\n                </div>\n                <div class='row mt-2'>\n                    <div class='col text-center'>\n                        <small class='text-muted'><i class='fas fa-clock' /> {seasonStart}-{seasonStart + 1}</small>\n                        <h3>\n                            {util.secToHms(currentSeason.duration || 0)}\n                        </h3>\n                    </div>\n                    <div class='col text-center border-left'>\n                        <small class='text-muted'><i class='fas fa-clock' /> {seasonStart - 1}-{seasonStart}</small>\n                        <h3 class='text-muted'>\n                            {util.secToHms(prevSeason.duration || 0)}\n                        </h3>\n                    </div>\n                </div>\n                <div class='row mt-2 border-bottom'>\n                    <div class='col text-center'>\n                        <small class='text-muted'><i class='fas fa-tachometer-alt' /> {seasonStart}-{seasonStart + 1}</small>\n                        <h3>\n                            <Speed stores={this.props.stores} value={currentSeason.speedAvg || 0} smallUnit={true} />\n                        </h3>\n                    </div>\n                    <div class='col text-center border-left'>\n                        <small class='text-muted'><i class='fas fa-tachometer-alt' /> {seasonStart - 1}-{seasonStart}</small>\n                        <h3 class='text-muted'>\n                            <Speed stores={this.props.stores} value={prevSeason.speedAvg || 0} smallUnit={true} />\n                        </h3>\n                    </div>\n                </div>\n\n            </div>\n        );\n    }\n}\n\nexport default WorkoutTotals;\n","import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport { Text, Localizer, withText } from 'preact-i18n';\nimport linkState from 'linkstate';\n\nimport style from '../style.css';\nimport mu from '../../lib/musher-util';\n\n@observer\nclass WorkoutCommentReply extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            sendButtonEnabled: true,\n        };\n        this.inputRef = {};\n    }\n\n    commentWorkout = async () => {\n        const { sendButtonEnabled } = this.state;\n        if (!sendButtonEnabled) {\n            return false;\n        }\n        const { callback = () => {}, commentId, inputRefObject = {} } = this.props;\n        const { workout } = this.props;\n\t\tconst { workoutStore } = this.props.stores;\n        const { comment = '' } = this.state;\n        this.setState({ sendButtonEnabled: false });\n\t\tconst response = await workoutStore.commentReplyWorkout({ id: workout.id, commentId, comment });\n\t\tif (response && response.status === 200) {\n            this.setState({\n                comment: '',\n            }, () => {\n                mu.resizeTextarea(inputRefObject[commentId]);\n            });\n            callback({ workout, response, commentId });\n\t\t}\n        this.setState({ sendButtonEnabled: true });\n\t}\n\n    render() {\n        const { inputRef } = this.props;\n        const { comment, sendButtonEnabled } = this.state;\n        const { userStore } = this.props.stores;\n        const { user = {} } = userStore;\n        const displayNameShort = user.firstname ? `${util.ucfirst(user.firstname, true)}${util.ucfirst(user.lastname, true)}` : `${util.ucfirst(user.email || '', true)}`;\n        // const displayName = user.firstname ? `${user.firstname} ${user.lastname}` : `${user.email}`;\n        const userImage = user.image || (user.images ? user.images[0] : undefined);\n\n        return (\n            <div class='w-100'>\n                <div class='d-flex mb-0 position-relative w-100'>\n                    <div \n                        class={`text-center border rounded-circle imageRounded imageRoundedThumb`}\n                        style={`${userImage ? `background-image: url('${userImage.s3SmallLink}'); background-size: cover;` : ''} border-width: 3px !important;`}\n                    >\n                        {!userImage && <span class='font-weight-lighter' style='font-size: 15px;'>{displayNameShort}</span>}\n                    </div>\n                    <div class='col pl-3' style='line-height: 1.2em;'>\n\n                        <div class='d-flex bd-highlight'>\n                            <div class='p-0 w-100 bd-highlight'>\n                                <label class='sr-only' for='inlineFormInput'><Text id='comments.comment'>Kommentar</Text></label>\n                                <div class='border rounded rounded-lg position-relative'>\n                                    <Localizer>\n                                        <textarea\n                                            class='form-control-plaintext px-2'\n                                            type='text'\n                                            placeholder={<Text id='comments.write-comment'>Skriv en kommentar...</Text>}\n                                            onInput={linkState(this, 'comment')}\n                                            onKeyUp={mu.resizeTextarea}\n                                            style='height: 2.3em;'\n                                            value={comment}\n                                            ref={inputRef}\n                                        />\n                                    </Localizer>\n                                </div>\n                            </div>\n                            <div class='p-0 pl-2 flex-shrink-1 bd-highlight'>\n                                <button type='button' class={`btn btn-${sendButtonEnabled ? 'primary' : 'secondary'} mb-2`} disabled={!sendButtonEnabled}\n                                    onClick={this.commentWorkout}\n                                ><i class='fas fa-paper-plane' /></button>\n                            </div>\n                        </div>\n\n                    </div>\n                </div>\n            </div>\n        );\n    }\n}\n\nexport default WorkoutCommentReply;\n","import { DivIcon, Icon } from 'leaflet';\nimport util from 'preact-util';\n\nimport mu from './musher-util';\n\nconst ICONS = {\n\tadit: new Icon({ iconUrl: './assets/svg/adit.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\tairport: new Icon({ iconUrl: './assets/svg/airport.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\tanalyse: new Icon({ iconUrl: './assets/svg/analyse.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\tarchaeological: new Icon({ iconUrl: './assets/svg/archaeological.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\tarchitecture: new Icon({ iconUrl: './assets/svg/architecture.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\tarrow_up: new Icon({ iconUrl: './assets/svg/arrow_up.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\tarrow_up_double: new Icon({ iconUrl: './assets/svg/arrow_up_double.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\tatm: new Icon({ iconUrl: './assets/svg/atm.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\tavatar: new Icon({ iconUrl: './assets/svg/avatar.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\tbag: new Icon({ iconUrl: './assets/svg/bag.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\tbar: new Icon({ iconUrl: './assets/svg/bar.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\tbarracks: new Icon({ iconUrl: './assets/svg/barracks.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\tbattlefield: new Icon({ iconUrl: './assets/svg/battlefield.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\tbeach: new Icon({ iconUrl: './assets/svg/beach.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\tbicycle: new Icon({ iconUrl: './assets/svg/bicycle.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\tboundary_stone: new Icon({ iconUrl: './assets/svg/boundary_stone.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\tbuddhism: new Icon({ iconUrl: './assets/svg/buddhism.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\tbuilding: new Icon({ iconUrl: './assets/svg/building.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\tburger: new Icon({ iconUrl: './assets/svg/burger.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\tbus: new Icon({ iconUrl: './assets/svg/bus.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\tbus_stop: new Icon({ iconUrl: './assets/svg/bus_stop.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\tcable_car: new Icon({ iconUrl: './assets/svg/cable_car.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\tcamera: new Icon({ iconUrl: './assets/svg/camera.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\tcamp_site: new Icon({ iconUrl: './assets/svg/camp_site.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\tcar: new Icon({ iconUrl: './assets/svg/car.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\tcaravan_site: new Icon({ iconUrl: './assets/svg/caravan_site.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\tcartography: new Icon({ iconUrl: './assets/svg/cartography.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\tcash: new Icon({ iconUrl: './assets/svg/cash.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\tcastle: new Icon({ iconUrl: './assets/svg/castle.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\tcastle_defensive: new Icon({ iconUrl: './assets/svg/castle_defensive.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\tcave_entrance: new Icon({ iconUrl: './assets/svg/cave_entrance.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\tcemetery: new Icon({ iconUrl: './assets/svg/cemetery.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\tchapel: new Icon({ iconUrl: './assets/svg/chapel.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\tchristianism: new Icon({ iconUrl: './assets/svg/christianism.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\tcinema: new Icon({ iconUrl: './assets/svg/cinema.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\tcinema_alt: new Icon({ iconUrl: './assets/svg/cinema_alt.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\tcity: new Icon({ iconUrl: './assets/svg/city.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\tcityhall: new Icon({ iconUrl: './assets/svg/cityhall.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\tclean: new Icon({ iconUrl: './assets/svg/clean.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\tcompass: new Icon({ iconUrl: './assets/svg/compass.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\tcompass_alt: new Icon({ iconUrl: './assets/svg/compass_alt.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\tconstruction: new Icon({ iconUrl: './assets/svg/construction.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\tcontour: new Icon({ iconUrl: './assets/svg/contour.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\tcourt_house: new Icon({ iconUrl: './assets/svg/court_house.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\tcrown: new Icon({ iconUrl: './assets/svg/crown.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\tcrucifix: new Icon({ iconUrl: './assets/svg/crucifix.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\tdata: new Icon({ iconUrl: './assets/svg/data.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\tdatabase: new Icon({ iconUrl: './assets/svg/database.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\tdentist: new Icon({ iconUrl: './assets/svg/dentist.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\tdisabled: new Icon({ iconUrl: './assets/svg/disabled.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\tdislike: new Icon({ iconUrl: './assets/svg/dislike.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\tdownload: new Icon({ iconUrl: './assets/svg/download.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\tdrag_lift: new Icon({ iconUrl: './assets/svg/drag_lift.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\tdrop: new Icon({ iconUrl: './assets/svg/drop.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\teye: new Icon({ iconUrl: './assets/svg/eye.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\tfacebook: new Icon({ iconUrl: './assets/svg/facebook.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\tfire: new Icon({ iconUrl: './assets/svg/fire.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\tfishing: new Icon({ iconUrl: './assets/svg/fishing.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\tflag: new Icon({ iconUrl: './assets/svg/flag.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\tforbidden: new Icon({ iconUrl: './assets/svg/forbidden.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\tfort: new Icon({ iconUrl: './assets/svg/fort.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\tfountain: new Icon({ iconUrl: './assets/svg/fountain.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\tfuel: new Icon({ iconUrl: './assets/svg/fuel.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\tfuel_alt: new Icon({ iconUrl: './assets/svg/fuel_alt.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\tgallery: new Icon({ iconUrl: './assets/svg/gallery.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\tgear: new Icon({ iconUrl: './assets/svg/gear.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\tgithub: new Icon({ iconUrl: './assets/svg/github.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\tgo: new Icon({ iconUrl: './assets/svg/go.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\tgolf: new Icon({ iconUrl: './assets/svg/golf.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\theart: new Icon({ iconUrl: './assets/svg/heart.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\thelicopter: new Icon({ iconUrl: './assets/svg/helicopter.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\thome: new Icon({ iconUrl: './assets/svg/home.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\thospital: new Icon({ iconUrl: './assets/svg/hospital.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\thostel: new Icon({ iconUrl: './assets/svg/hostel.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\thotel: new Icon({ iconUrl: './assets/svg/hotel.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\thotel_alt: new Icon({ iconUrl: './assets/svg/hotel_alt.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\tice_ring: new Icon({ iconUrl: './assets/svg/ice_ring.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\tinformation: new Icon({ iconUrl: './assets/svg/information.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\tinternet: new Icon({ iconUrl: './assets/svg/internet.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\tinvisible: new Icon({ iconUrl: './assets/svg/invisible.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\tislamism: new Icon({ iconUrl: './assets/svg/islamism.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\tisland: new Icon({ iconUrl: './assets/svg/island.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\tjudaism: new Icon({ iconUrl: './assets/svg/judaism.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\tlaptop: new Icon({ iconUrl: './assets/svg/laptop.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\tlibrary: new Icon({ iconUrl: './assets/svg/library.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\tlighthouse: new Icon({ iconUrl: './assets/svg/lighthouse.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\tlike: new Icon({ iconUrl: './assets/svg/like.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\tlinkedin: new Icon({ iconUrl: './assets/svg/linkedin.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\tlion: new Icon({ iconUrl: './assets/svg/lion.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\tlock: new Icon({ iconUrl: './assets/svg/lock.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\tmagnifier: new Icon({ iconUrl: './assets/svg/magnifier.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\tmall: new Icon({ iconUrl: './assets/svg/mall.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\tmap: new Icon({ iconUrl: './assets/svg/map.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\tmapkey: new Icon({ iconUrl: './assets/svg/mapkey.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\tmapshakers: new Icon({ iconUrl: './assets/svg/mapshakers.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\tmarina: new Icon({ iconUrl: './assets/svg/marina.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\tmarker: new Icon({ iconUrl: './assets/svg/marker.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\tmarket_place: new Icon({ iconUrl: './assets/svg/market_place.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\tmine: new Icon({ iconUrl: './assets/svg/mine.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\tmonument: new Icon({ iconUrl: './assets/svg/monument.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\tmountain: new Icon({ iconUrl: './assets/svg/mountain.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\tmuseum: new Icon({ iconUrl: './assets/svg/museum.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\tmusic: new Icon({ iconUrl: './assets/svg/music.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\tnature: new Icon({ iconUrl: './assets/svg/nature.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\tnocamera: new Icon({ iconUrl: './assets/svg/nocamera.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\tnonsmoking: new Icon({ iconUrl: './assets/svg/nonsmoking.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\tnorth: new Icon({ iconUrl: './assets/svg/north.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\tnorth_alt: new Icon({ iconUrl: './assets/svg/north_alt.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\tnorth_alt_II: new Icon({ iconUrl: './assets/svg/north_alt_II.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\tnorth_alt_III: new Icon({ iconUrl: './assets/svg/north_alt_III.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\toppositeway: new Icon({ iconUrl: './assets/svg/oppositeway.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\tparking: new Icon({ iconUrl: './assets/svg/parking.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\tpharmacy: new Icon({ iconUrl: './assets/svg/pharmacy.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\tpicnic_site: new Icon({ iconUrl: './assets/svg/picnic_site.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\tpitch: new Icon({ iconUrl: './assets/svg/pitch.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\tplayground: new Icon({ iconUrl: './assets/svg/playground.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\tplayground_alt: new Icon({ iconUrl: './assets/svg/playground_alt.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\tpolice: new Icon({ iconUrl: './assets/svg/police.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\tpost_office: new Icon({ iconUrl: './assets/svg/post_office.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\tpub: new Icon({ iconUrl: './assets/svg/pub.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\trestaurant: new Icon({ iconUrl: './assets/svg/restaurant.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\trocks: new Icon({ iconUrl: './assets/svg/rocks.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\truins: new Icon({ iconUrl: './assets/svg/ruins.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\tsaddle: new Icon({ iconUrl: './assets/svg/saddle.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\tsailboat: new Icon({ iconUrl: './assets/svg/sailboat.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\tschool: new Icon({ iconUrl: './assets/svg/school.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\tseal: new Icon({ iconUrl: './assets/svg/seal.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\tshelter: new Icon({ iconUrl: './assets/svg/shelter.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\tsinkhole: new Icon({ iconUrl: './assets/svg/sinkhole.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\tskype: new Icon({ iconUrl: './assets/svg/skype.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\tsmartphone: new Icon({ iconUrl: './assets/svg/smartphone.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\tsmoking: new Icon({ iconUrl: './assets/svg/smoking.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\tsport_centre: new Icon({ iconUrl: './assets/svg/sport_centre.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\tspring: new Icon({ iconUrl: './assets/svg/spring.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\tsquare: new Icon({ iconUrl: './assets/svg/square.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\tstadium: new Icon({ iconUrl: './assets/svg/stadium.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\tstar: new Icon({ iconUrl: './assets/svg/star.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\tstop: new Icon({ iconUrl: './assets/svg/stop.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\tstupa: new Icon({ iconUrl: './assets/svg/stupa.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\tsupermarket: new Icon({ iconUrl: './assets/svg/supermarket.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\tswimming_pool: new Icon({ iconUrl: './assets/svg/swimming_pool.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\ttelephone: new Icon({ iconUrl: './assets/svg/telephone.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\ttheatre: new Icon({ iconUrl: './assets/svg/theatre.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\tticket: new Icon({ iconUrl: './assets/svg/ticket.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\ttoilet: new Icon({ iconUrl: './assets/svg/toilet.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\ttower: new Icon({ iconUrl: './assets/svg/tower.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\ttown: new Icon({ iconUrl: './assets/svg/town.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\ttraffic_signal: new Icon({ iconUrl: './assets/svg/traffic_signal.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\ttrain: new Icon({ iconUrl: './assets/svg/train.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\ttram: new Icon({ iconUrl: './assets/svg/tram.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\ttram_stop: new Icon({ iconUrl: './assets/svg/tram_stop.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\ttree_cinofer: new Icon({ iconUrl: './assets/svg/tree_cinofer.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\ttree_leaf: new Icon({ iconUrl: './assets/svg/tree_leaf.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\ttriangle: new Icon({ iconUrl: './assets/svg/triangle.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\tunderground: new Icon({ iconUrl: './assets/svg/underground.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\tunesco: new Icon({ iconUrl: './assets/svg/unesco.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\tuniversity: new Icon({ iconUrl: './assets/svg/university.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\tupload: new Icon({ iconUrl: './assets/svg/upload.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\tviewpoint: new Icon({ iconUrl: './assets/svg/viewpoint.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\tviewtower: new Icon({ iconUrl: './assets/svg/viewtower.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\tvillage: new Icon({ iconUrl: './assets/svg/village.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\tvineyard: new Icon({ iconUrl: './assets/svg/vineyard.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\tvolcano: new Icon({ iconUrl: './assets/svg/volcano.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\twater_tower: new Icon({ iconUrl: './assets/svg/water_tower.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\twater_well: new Icon({ iconUrl: './assets/svg/water_well.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\twatermill: new Icon({ iconUrl: './assets/svg/watermill.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\twaterpark: new Icon({ iconUrl: './assets/svg/waterpark.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\twaterwork: new Icon({ iconUrl: './assets/svg/waterwork.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\twayside_cross: new Icon({ iconUrl: './assets/svg/wayside_cross.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\twind_generator: new Icon({ iconUrl: './assets/svg/wind_generator.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\twindmill: new Icon({ iconUrl: './assets/svg/windmill.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\tzoo: new Icon({ iconUrl: './assets/svg/zoo.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n}\n\nclass Icons {\n    static get(icon) {\n        return ICONS[icon];\n    }\n\n    static list() {\n        return Object.keys(ICONS);\n    }\n\n\tstatic getDiv({ icon, title, body, color, textColor = '#333333', borderColor = 0, iconWidth = 150, iconHeight = 70 }) {\n\t\tconst id = `img-${util.randomPassword()}`;\n\t\tconst { r, g, b } = util.hsl2Rgb(color, 100, 60);\n\t\tconst { r: wr, g: wg, b: wb } = util.hsl2Rgb(100 - borderColor, 100, 50);\n\t\treturn new DivIcon({\n\t\t\ticonSize: [iconWidth, iconHeight + 30],\n\t\t\ticonAnchor: [15, iconHeight + 30],\n\t\t\tclassName: 'my-div-icon',\n\t\t\thtml: `<div id='${id}' style='width: ${iconWidth}px; height: ${iconHeight + 30}px; line-height: 1.1em;'>\n\t\t\t\t<style>\n\t\t\t\t\t#${id} .map-marker:after {\n\t\t\t\t\t\tborder-top-color: ${color};\n\t\t\t\t\t}\n\t\t\t\t</style>\n\t\t\t\t<div class='map-marker text-white p-1' style='color: ${textColor}; background-color: ${color}; height: ${iconHeight}px;'>\n\t\t\t\t\t<nobr><strong>${title}</strong></nobr><br />\n\t\t\t\t\t<span class='font-weight-light'><nobr>${body}</nobr></span>\n\t\t\t\t</div>\n\t\t\t</div>`,\n\t\t});\n    }\n\n\tstatic getRaceMarker({\n\t\ticon,\n\t\tbib,\n\t\tspeed = '',\n\t\tbearing = '',\n\t\trank,\n\t\tflag = '',\n\t\timage,\n\t\ttitle,\n\t\tbody,\n\t\tcolor,\n\t\ttextColor = '#333333',\n\t\tborderColor = 0,\n\t\ticonWidth = 180,\n\t\ticonHeight = 15,\n\t\ticonAnchorX = 5,\n\t\ticonAnchorY = 5,\n\t\timageCirlceRadius = 10,\n\n\t\tlineHeight = '0.9em',\n\t\tfontSize = '0.9em',\n\t\tpaddingTop = '3px',\n\t\tpaddingBottom = '3px',\n\n\t\tmapChecked,\n\t\ttitlePrefix = '',\n\t}) {\n\t\tconst id = `img-${util.randomPassword()}`;\n\t\tconst { r, g, b } = util.hsl2Rgb(color, 100, 60);\n\t\tconst { r: wr, g: wg, b: wb } = util.hsl2Rgb(100 - borderColor, 100, 50);\n\n\t\tconst dotColor = mu.getRankingColor(rank);\n\t\tconst mapIsDark = /dark/i.test(mapChecked);\n\n\n\t\tlet imageCircle = image ? `\n\t\t\t<div\n\t\t\t\tclass='rounded-circle imageRounded imageRoundedSmallIcon'\n\t\t\t\tstyle='background-image: url(\"${image}\"); background-size: cover; border: 1px ${dotColor} solid;'\n\t\t\t>\n\t\t\t\t&nbsp;\n\t\t\t</div>\n\t\t` : '';\n\t\timageCircle = bib || rank ? `\n\t\t\t<div\n\t\t\t\tclass='px-0 text-center' style='background-color: ${dotColor ? dotColor : ''}'\n\t\t\t>\n\t\t\t\t${bib || rank}\n\t\t\t</div>\n\t\t` : imageCircle;\n\t\treturn new DivIcon({\n\t\t\ticonSize: [iconWidth, iconHeight],\n\t\t\ticonAnchor: [iconAnchorX, iconAnchorY],\n\t\t\tclassName: 'my-div-icon',\n\t\t\thtml: iconAnchorX > 100 ? `\n\t\t\t\t<div class='d-flex flex-nowrap overflow-hidden justify-content-end' id='${id}' style='width: ${iconWidth}px; height: ${iconHeight}px; line-height: ${lineHeight}; font-size: ${fontSize};'>\n\t\t\t\t\t<div\n\t\t\t\t\t\tclass='${mapIsDark ? 'text-white' : 'text-dark'} pl-3 pr-1 rounded-pill-left rounded-none ${mapIsDark ? 'bg-dark' : 'bg-white'} overflow-hidden'\n\t\t\t\t\t\tstyle='padding-top: ${paddingTop}; padding-bottom: ${paddingBottom};'\n\t\t\t\t\t>\n\t\t\t\t\t\t<nobr>\n\t\t\t\t\t\t\t${titlePrefix} <strong>${title}</strong> ${flag}\n\t\t\t\t\t\t</nobr>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div\n\t\t\t\t\t\tclass='text-white font-weight-bolder pr-2 pl-1 rounded-pill-right rounded-none'\n\t\t\t\t\t\tstyle='background-color: ${dotColor ? dotColor : ''}; padding-top: ${paddingTop}; padding-bottom: ${paddingBottom};'\n\t\t\t\t\t>\n\t\t\t\t\t\t${imageCircle}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class='rounded rounded-circle ml-2 mt-1' style='width: ${imageCirlceRadius}px; height: ${imageCirlceRadius}px; background-color: ${dotColor};'>\n\t\t\t\t\t\t&nbsp;\n\t\t\t\t\t</div>\n\t\t\t\t</div>\t\t\t\n\t\t\t` : `\n\t\t\t\t<div class='d-flex flex-nowrap overflow-hidden' id='${id}' style='width: ${iconWidth}px; height: ${iconHeight}px; line-height: ${lineHeight}; font-size: ${fontSize};'>\n\t\t\t\t\t<div class='rounded rounded-circle mr-2 mt-1' style='width: ${imageCirlceRadius}px; height: ${imageCirlceRadius}px; background-color: ${dotColor};'>\n\t\t\t\t\t\t&nbsp;\n\t\t\t\t\t</div>\n\t\t\t\t\t<div\n\t\t\t\t\t\tclass='text-white font-weight-bolder pl-2 pr-1 rounded-pill-left rounded-none'\n\t\t\t\t\t\tstyle='background-color: ${dotColor ? dotColor : ''}; padding-top: ${paddingTop}; padding-bottom: ${paddingBottom};'\n\t\t\t\t\t>\n\t\t\t\t\t\t${imageCircle}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div\n\t\t\t\t\t\tclass='${mapIsDark ? 'text-white' : 'text-dark'} pr-3 pl-1 rounded-pill-right rounded-none ${mapIsDark ? 'bg-dark' : 'bg-white'} overflow-hidden'\n\t\t\t\t\t\tstyle='padding-top: ${paddingTop}; padding-bottom: ${paddingBottom};'\n\t\t\t\t\t>\n\t\t\t\t\t\t<nobr>\n\t\t\t\t\t\t\t${flag} <strong>${title}</strong> ${titlePrefix}\n\t\t\t\t\t\t</nobr>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t`,\n\t\t});\n\t\t// ${speed ? `${util.format(speed, 1)} km/t` : ''} ${bearing ? mu.windDirection(bearing) : ''}\n    }\n\n\tstatic getDistanceMarker({ title = '', body = '', color, textColor = '#888', borderColor = 0 }) {\n\t\tconst id = `img-${util.randomPassword()}`;\n\t\treturn new DivIcon({\n\t\t\ticonSize: [20, 20],\n\t\t\ticonAnchor: [10, 10],\n\t\t\tclassName: 'my-div-icon',\n\t\t\thtml: `<div id='${id}' class='rounded-circle bg-primary text-white text-center' style='width: 20px; height: 20px;'>\n\t\t\t\t<strong>${title}</strong><br />\n\t\t\t\t<span class='font-weight-light'>${body}</span>\n\t\t\t</div>`,\n\t\t});\n    }\n\n\t// static getMarker({ title = '', body = '', color, textColor = '#888', borderColor = 0 }) {\n\t// \tconst id = `img-${util.randomPassword()}`;\n\t// \treturn new DivIcon({\n\t// \t\ticonSize: [10, 10],\n\t// \t\ticonAnchor: [5, 5],\n\t// \t\tclassName: 'my-div-icon',\n\t// \t\thtml: `<div id='${id}' class='rounded-circle bg-primary text-white text-center' style='width: 10px; height: 10px;'>\n\t// \t\t\t<strong>${title}</strong><br />\n\t// \t\t\t<span class='font-weight-light'>${body}</span>\n\t// \t\t</div>`,\n\t// \t});\n    // }\n\tstatic getMarker({\n\t\ticon,\n\t\tbib,\n\t\trank,\n\t\tflag = '',\n\t\timage,\n\t\ttitle,\n\t\tbody,\n\t\tcolor = '#a0a0a0',\n\t\ttextColor = '#333333',\n\t\tborderColor = 0,\n\n\t\ticonWidth = 250,\n\t\ticonHeight = 20,\n\t\ticonAnchorX = 7,\n\t\ticonAnchorY = 7,\n\n\t\timageCirlceRadius = 10,\n\n\t\tlineHeight = '1.0em',\n\t\tfontSize = '1.0em',\n\t\tpaddingTop = '3px',\n\t\tpaddingBottom = '3px',\n\n\t\tmapChecked,\n\t}) {\n\t\tconst id = `img-${util.randomPassword()}`;\n\t\tconst { r, g, b } = util.hsl2Rgb(color, 100, 60);\n\t\tconst { r: wr, g: wg, b: wb } = util.hsl2Rgb(100 - borderColor, 100, 50);\n\n\t\tconst dotColor = mu.getRankingColor(bib || rank) || '#808080';\n\t\tconst mapIsDark = /dark/i.test(mapChecked);\n\n\t\tlet imageCircle = image ? `\n\t\t\t<div\n\t\t\t\tclass='rounded-circle imageRounded imageRoundedSmallIcon'\n\t\t\t\tstyle='background-image: url(\"${image}\"); background-size: cover; border: 1px ${dotColor} solid;'\n\t\t\t>\n\t\t\t\t&nbsp;\n\t\t\t</div>\n\t\t` : '';\n\t\timageCircle = bib || rank ? `\n\t\t\t<div\n\t\t\t\tclass='rounded-pill-both px-1 text-center ${dotColor ? '' : 'bg-primary'}' style='background-color: ${dotColor ? dotColor : ''}'\n\t\t\t>\n\t\t\t\t${bib || rank}\n\t\t\t</div>\n\t\t` : imageCircle;\n\t\treturn new DivIcon({\n\t\t\ticonSize: [iconWidth, iconHeight],\n\t\t\ticonAnchor: [iconAnchorX, iconAnchorY],\n\t\t\tclassName: 'my-div-icon',\n\t\t\thtml: `\n\t\t\t\t<div class='d-flex flex-nowrap overflow-hidden' id='${id}' style='width: ${iconWidth}px; height: ${iconHeight}px; line-height: ${lineHeight}; font-size: ${fontSize};'>\n\t\t\t\t\t<div class='rounded rounded-circle mr-2 mt-1' style='width: ${imageCirlceRadius}px; height: ${imageCirlceRadius}px; background-color: ${dotColor};'>\n\t\t\t\t\t\t&nbsp;\n\t\t\t\t\t</div>\n\t\t\t\t\t<div\n\t\t\t\t\t\tclass='${mapIsDark ? 'text-white' : 'text-dark'} px-3 pl-1 rounded-pill-both rounded-none ${mapIsDark ? 'bg-info' : 'bg-info'} overflow-hidden'\n\t\t\t\t\t\tstyle='padding-top: ${paddingTop}; padding-bottom: ${paddingBottom};'\n\t\t\t\t\t>\n\t\t\t\t\t\t<nobr>${flag} <strong>${title}</strong></nobr>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t`,\n\t\t});\n    }\n\n\n\tstatic getSmallMarker({ title = '', body = '', color, textColor = '#888', borderColor = 0 }) {\n\t\tconst id = `img-${util.randomPassword()}`;\n\t\treturn new DivIcon({\n\t\t\ticonSize: [6, 6],\n\t\t\ticonAnchor: [3, 3],\n\t\t\tclassName: 'my-div-icon',\n\t\t\thtml: `<div id='${id}' class='rounded-circle bg-success text-white text-center' style='width: 5px; height: 5px;'>\n\t\t\t\t<strong>${title}</strong><br />\n\t\t\t\t<span class='font-weight-light'>${body}</span>\n\t\t\t</div>`,\n\t\t});\n    }\n\n}\n\nexport default Icons;\n","import { h, Component } from 'preact';\nimport { observer } from 'mobx-preact';\nimport { toJS } from 'mobx';\nimport util from 'preact-util';\nimport { Text, Localizer } from 'preact-i18n';\nimport linkstate from 'linkstate';\n\n@observer\nclass Achievements extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            data: {},\n        };\n    }\n    \n    handleAdd = () => {\n        const { data } = this.state;\n        const {\n            updateField,\n            object,\n            field,\n        } = this.props;\n        updateField({ id: object.id, field, value: { ...data } });\n        this.setState({\n            data: {\n                name: '',\n                url: '',\n            }\n        });\n    };\n\n    removeLink = async (e) => {\n        const { dogStore } = this.props.stores;\n        const { object } = this.props;\n        const { name, id } = e.target.closest('button').dataset;\n        dogStore.removeLink({\n            id: object.id,\n            name,\n            linkId: id,\n        });\n    }\n\n    render() {\n        const { showFiles = true, object = {} } = this.props;\n\n        return (\n            <div class='row'>\n                <div class='col-12 mt-3'>\n                    {showFiles && <>\n                        <div class='container-fluid'>\n                            <div class='row'>\n\n                                {(!object.links || object.links.length === 0) && <>\n                                    <div class='text-center text-muted'>\n                                        <div class='display-1'><i class='fas fa-link' /></div>\n                                        <h3><Text id='dogs.no-links-title'>No links for this dog!</Text></h3>\n                                        <Text id='dogs.no-links-text'>You can add links to this dog. Ie. Links to Facebook page, Instagram page, blogg, etc.</Text>\n                                    </div>\n                                </>}\n\n                                {object.links && object.links.map(file => (\n                                    <div class='col-12 p-1'>\n                                        <span class='font-weight-lighter mr-2'>{util.isoDate(file.createdDate, false, false, true)}</span>\n                                        <span class='mr-2'>{file.name}</span>\n                                        <span class='mr-2'>{file.url}</span>\n                                        <button class='btn btn-sm btn-link float-right p-0'\n                                            onClick={this.removeLink}\n                                            data-name={file.name}\n                                            data-id={file.id}\n                                        ><i class='fas fa-trash-alt' /> Del</button>\n                                    </div>\n                                ))}\n                            </div>\n                        </div>\n                    </>}\n                </div>\n                <div class='col-12 mt-3'>\n                    <details>\n                        <summary><Text id='dogs.link-add'>Add new link</Text></summary>\n                        <div class='form-group'>\n                            <label for='name'><Text id='dogs.link-name'>Name</Text></label>\n                            <input type='text' class='form-control' id='name' aria-describedby='nameHelp' onInput={linkstate(this, 'data.name')} />\n                            <small id='nameHelp' class='form-text text-muted'><Text id='dogs.link-name-help'>Name of link</Text></small>\n                        </div>\n                        <div class='form-group'>\n                            <label for='url'><Text id='dogs.link-url'>Url</Text></label>\n                            <input type='text' class='form-control' id='url' aria-describedby='urlHelp' onInput={linkstate(this, 'data.url')} />\n                            <small id='urlHelp' class='form-text text-muted'><Text id='dogs.link-url-help'>URL of link</Text></small>\n                        </div>\n                        <button class='btn btn-success' onClick={this.handleAdd}>\n                            <Text id='dogs.link-add'>Add link</Text>\n                        </button>\n                    </details>\n                </div>\n            </div>\n        );\n    }\n}\n\nexport default Achievements;\n","import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport { Text, Localizer } from 'preact-i18n';\n\nimport mu from '../../lib/musher-util';\n\nfunction displayDistance(distance) {\n\tif (distance < 5) {\n\t\treturn util.format(distance, 2);\n\t}\n\tif (distance < 10) {\n\t\treturn util.format(distance, 1);\n\t}\n\treturn util.format(distance, 1);\n}\n\nfunction kmToMiles(value) {\n    return 0.621371 * value;\n}\n\n@observer\nclass Distance extends Component {\n    render() {\n\t\tconst { value = 0, smallUnit } = this.props;\n\t\tconst { userStore } = this.props.stores;\n\t\tconst { user } = userStore;\n\t\tconst { settings = {} } = user;\n\n        if (settings.imperial) {\n            return (<>\n                <nobr>\n\t\t\t\t\t{displayDistance(kmToMiles(value))} {smallUnit ? <><small><small><small class='ml-0 text-muted'>mi</small></small></small></> : <>mi</>}\n\t\t\t\t</nobr>\n            </>);\n        }\n\n\t\treturn (<>\n\t\t\t<nobr>\n\t            {displayDistance(value)} {smallUnit ? <><small><small><small class='ml-0 text-muted'>km</small></small></small></> : <>km</>}\n\t\t\t</nobr>\n\t    </>);\n    }\n}\n\nexport default Distance;\n","import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport { Text, Localizer, withText } from 'preact-i18n';\n\nimport style from '../style.css';\nimport mu from '../../lib/musher-util';\n\n@observer\nclass WorkoutStatus extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {};\n    }\n\n    async loadAll(props = this.props) {\n        // await Promise.all([\n        //     this.loadTeams(props),\n        //     this.loadWorkoutPlans(props),\n        //     this.loadWorkoutSummary(props),\n        // ]);\n    }\n\n    async loadTeams(props = this.props) {\n\t\tconst { teamStore } = props.stores;\n\n        const currentMonth = new Date().getMonth() + 1;\n        const currentYear = new Date().getFullYear();\n\n\t\tconst { month = currentMonth, year = currentYear, currentTeam } = props;\n\t\tawait teamStore.load({ query: { team: currentTeam, skipMusherWorkoutSummary: true, year, month }, addData: ['workoutSummary'] });\n\t}\n\n    loadWorkoutPlans = async (props = this.props) => {\n\t\tconst { workoutPlanStore } = props.stores;\n\n\t\tconst currentMonth = new Date().getMonth() + 1;\n        const currentYear = new Date().getFullYear();\n\t\tconst { year = currentYear, month = currentMonth, currentTeam } = props;\n\t\tconst seasonStart = parseInt(year || (month < 8 ? year - 1 : year), 10);\n\n\t\tif (currentTeam) {\n\t\t\tawait workoutPlanStore.load({ query: {\n\t\t\t\tteam: currentTeam,\n\t\t\t\tseasonYear: seasonStart,\n\t\t\t\tseasonMonth: 6,\n\t\t\t} });\n\t\t\tconst { workoutPlans } = workoutPlanStore;\n\t\t\tconst workoutPlanCurrent = workoutPlans[0] || {};\n\t\t\tif (workoutPlanCurrent.id) {\n\t\t\t\tawait workoutPlanStore.load(workoutPlanCurrent.id);\n\t\t\t}\n\t\t}\n\t}\n\n    async loadWorkoutSummary(props = this.props) {\n        const { year, currentTeam, dog } = props;\n\t\tconst { userStore } = props.stores;\n        await userStore.getWorkoutSummary({ team: currentTeam, year, dog });\n    }\n\n\tcomponentDidMount() {\n\t\tthis.loadAll();\n\t}\n\n    componentWillReceiveProps(nextProps) {\n        if (nextProps.year !== this.props.year || nextProps.currentTeam !== this.props.currentTeam) {\n            this.loadAll(nextProps);\n        }\n    }\n\n    render() {\n\t\tconst { currentSeason, prevSeason, currentTeam } = this.props;\n\n        const { userStore, workoutPlanStore, teamStore } = this.props.stores;\n        const { workoutPlan } = workoutPlanStore;\n        const { user, workoutSummaryTeam } = userStore;\n        const { language = 'en' } = user;\n\t\tconst MONTHS = mu.getMonths(language);\n\n\t\tconst team = teamStore.findTeam(currentTeam) || {};\n\n        const currentMonth = new Date().getMonth() + 1;\n        const currentYear = new Date().getFullYear();\n\n        const { year = currentYear, month = currentMonth } = this.props;\n\t\tconst seasonStart = parseInt(month < 8 ? year - 1 : year, 10);\n        const months = util.monthRange(`${seasonStart}-08-01`, `${seasonStart + 1}-07-31`);\n        let lastPlanMonth;\n\n        return (\n            <div class='container-fluid mb-2'>\n                <div class='row mt-2'>\n                    <div class='col-12'>\n                        <h5>\n                            <span style='display: none;'>{workoutPlan.id}</span>\n                            <Text id='workout.totals.title'>Treningsplanstatus</Text>\n                        </h5>\n                    </div>\n                </div>\n                <div class='row mt-2 border-bottom pb-2'>\n                    {months && months.map((month) => {\n                        if (month.year > year || (month.year === year && month.month >= month)) {\n                            return '';\n                        }\n                        const planMonth = workoutPlanStore.sumWorkoutPlanMonth(month.year, month.month + 1);\n                        if (!planMonth) {\n                            return '';\n                        }\n                        lastPlanMonth = planMonth;\n                        const summaryMonth = userStore.findWorkoutSummaryMonth(month.year, month.month + 1);\n                        const percCompleted = summaryMonth / planMonth * 100;\n                        const height = percCompleted > 100 ? 100 : util.format(percCompleted, 0);\n                        return (\n                            <div class='col-3 text-center'>\n                                {/* <div class='w-100 mt-1'>\n                                    <small class='text-muted'>\n                                        {planMonth}km\n                                    </small>\n                                    <small class='text-info'>\n                                        {summaryMonth}km\n                                    </small>\n                                </div> */}\n                                <div class='px-auto w-100 clearfix'>\n                                    <div class={`progress ${style['progress-bar-vertical']}`}\n                                        style={' margin-left: calc(50% - 20px);'}\n                                    >\n                                        <div class='progress-bar progress-bar-striped bg-success' role='progressbar'\n                                            style={`height: ${height}%; width: 40px;`}\n                                            aria-valuenow={height} aria-valuemin='0' aria-valuemax='100'\n                                        >\n                                            {util.format(percCompleted, 0)}%\n                                        </div>\n                                    </div>\n                                </div>\n                                <div class='w-100 mt-1'>\n                                    {MONTHS[month.month]} {month.year}\n                                </div>\n                            </div>\n                        );\n                    })}\n                    {!lastPlanMonth && <div class='col-12 text-center text-muted mb-5'>\n                        <div class='display-1'>\n                            <i class='far fa-sad-tear' />\n                        </div>\n                        <h3 class='font-weight-lighter'>\n                            <Text id='workout.plan.no-workout-plan-found' fields={{ name: team.name }}>Ingen treningsplaner funnet for team {team.name}.</Text>\n                        </h3>\n                        <a class='btn btn-success btn-lg mt-3' href='/workouts/plan'><i class='fas fa-calendar-alt' /> <Text id='workout.plan.new'>New workoutplan</Text></a>\n                    </div>}\n                </div>\n\n            </div>\n        );\n    }\n}\n\nexport default WorkoutStatus;\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"pointerCursor\":\"pointerCursor__2Gpay\",\"marker-cluster-custom\":\"marker-cluster-custom__1z-5y\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"hoverelementonly\":\"hoverelementonly__1mJGJ\",\"hoverElement\":\"hoverElement__axh3O\",\"hoverelementhide\":\"hoverelementhide__1k_qH\",\"progress-bar-vertical\":\"progress-bar-vertical__1B2sC\",\"progress-bar\":\"progress-bar__pnsVj\",\"dragged\":\"dragged__QXO46\",\"over\":\"over__1re3x\",\"list\":\"list__q_emZ\"};","import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport { Text, Localizer, withText } from 'preact-i18n';\n\nimport Speed from '../../components/data/speed';\nimport Elevation from '../../components/data/elevation';\nimport Weight from '../../components/data/weight';\nimport Distance from '../../components/data/distance';\nimport Temperature from '../../components/data/temperature';\n\nimport mu from '../../lib/musher-util';\n\n@observer\nclass User extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {};\n        this.updateTimer = {};\n    }\n    \n    removeUser = async (e) => {\n        let id =  e.target.dataset.id;\n        let email =  e.target.dataset.email;\n        let team =  e.target.dataset.team;\n        if (!id && e.target.parentNode) {\n            id =  e.target.parentNode.dataset.id;\n            email =  e.target.parentNode.dataset.email;\n            team =  e.target.parentNode.dataset.team;\n\t\t}\n        console.log('id, email, team', id, email, team);\n        const { teamStore } = this.props.stores;\n        await teamStore.removeMember(team, { id, email });\n    }\n\n    adminUpdateUser = (e) => {\n        const { email } = e.target.closest('input').dataset;\n        const { name } = e.target;\n        const field = `${email}-${name}`;\n\n        clearTimeout(this.updateTimer[field]);\n        this.updateTimer[field] = setTimeout(() => {\n            this.doAdminUpdateUser(e);\n        }, 500);\n    }\n\n    doAdminUpdateUser = async (e) => {\n        const { email } = e.target.closest('input').dataset;\n        const { name, value } = e.target;\n\n        // console.log({ email, name, value });\n\t\tconst { userStore } = this.props.stores;\n        await userStore.adminUpdateUser(email, { [name]: value });\n    }\n\n    simulateUser = (e) => {\n        const { email } = e.target.closest('button').dataset;\n        const { userStore } = this.props.stores;\n\t\tuserStore.getSimulateUser(email);\n    }\n\n    render() {\n        const { user, team = {} } = this.props;\n\t\tconst { userStore, teamStore } = this.props.stores;\n        const { user: currentUser, isAdmin } = userStore;\n        const teams = userStore.findTeams(user.teams);\n        const summary = teamStore.findMusherSummary(user.id, team.id) || {};\n        const isTeamAdmin = team.user === currentUser.id;\n        const image = mu.getImage({ user, team });\n        const name = mu.displayName(user);\n\n        // const workoutSummary = dogStore.findWorkoutSummary(dog.id, 2020) || {};\n        // {'0':{'year':2020,'dog':16,'count':1,'distanceKm':9.9,'elevation':202,'duration':0,'speedAvg':0}}\n        return (\n            <div class='w-100 mb-3'>\n                <div class='row'>\n                    <div class='col-12 d-flex mb-0 position-relative'>\n                        {/* {JSON.stringify(dog, null, 4)} */}\n                        <div class={`text-center border rounded-circle imageRounded`} style={image ? `background-image: url('${image}'); background-size: cover;` : ''}>\n                            {!image && <i class='fas fa-user text-muted mt-3' style='font-size: 40px;' />}\n                        </div>\n                        <div class='flex-grow-1 pl-3 pr-2'>\n                            {/* <span class='float-right'>\n                                {dog.birth && <span class='mr-2'>{util.age(dog.birth, dog.deceased)}</span>}\n                                {dog.gender === 'female' ? <i class='fas fa-venus' /> : <i class='fas fa-mars' />}\n                            </span> */}\n                            \n                            <h5>{name}</h5>\n                            <div>\n                                <small class='text-muted'>\n                                    <div class='d-flex justify-content-left'>\n                                        {user.cellphone && <div class='mr-2'><i class='fas fa-mobile-alt' /> {user.cellphone}</div>}\n                                        {user.email && <div class='mr-2'><i class='fas fa-envelope ml-3' /> {user.email}</div>}\n                                        {user.url && <div class='mr-2'><a href={mu.asUrl(user.url)} target='_blank' rel='noreferrer'><i class='fas fa-link' /></a></div>}\n                                        {user.facebook && <div class='mr-2'><a href={mu.asFacebookLink(user.facebook)} target='_blank' rel='noreferrer'><i class='fab fa-facebook' /></a></div>}\n                                        {user.instagram && <div class='mr-2'><a href={mu.asInstagramLink(user.instagram)} target='_blank' rel='noreferrer'><i class='fab fa-instagram' /></a></div>}\n                                        {user.snapchat && <div class='mr-2'><a href={mu.asSnapchatLink(user.snapchat)} target='_blank' rel='noreferrer'><i class='fab fa-snapchat' /></a></div>}\n                                    </div>\n                                </small>\n                            </div>\n                            {isAdmin && <>\n                                <button class='btn btn-block btn-success' onClick={this.simulateUser} data-email={user.email}>\n                                    Simulate user\n                                </button>\n\n                                <small>\n                                    <details>\n                                        <summary>settings</summary>\n                                        <xmp>{JSON.stringify(user.settings, null, 4)}</xmp>\n                                    </details>\n                                    <details>\n                                        <summary>subscription</summary>\n                                        <xmp>{JSON.stringify(user.subscription, null, 4)}</xmp>\n                                    </details>\n                                    <details>\n                                        <summary>deviceInfo</summary>\n                                        <xmp>{JSON.stringify(user.deviceInfo, null, 4)}</xmp>\n                                    </details>\n                                    <details>\n                                        <summary>subscription</summary>\n                                        <xmp>{JSON.stringify(user.subscription, null, 4)}</xmp>\n                                    </details>\n                                    <details>\n                                        <summary>notifications</summary>\n                                        <xmp>{JSON.stringify(user.notifications, null, 4)}</xmp>\n                                    </details>\n                                    <details>\n                                        <summary>notificationTopics</summary>\n                                        <xmp>{JSON.stringify(user.notificationTopics, null, 4)}</xmp>\n                                    </details>\n                                    <details>\n                                        <summary>applications</summary>\n                                        <xmp>{JSON.stringify(user.applications, null, 4)}</xmp>\n                                    </details>\n                                    <details>\n                                        <summary>shadowTags</summary>\n                                        <xmp>{JSON.stringify(user.shadowTags, null, 4)}</xmp>\n                                    </details>\n                                    <details>\n                                        <summary>garmin</summary>\n                                        <xmp>{JSON.stringify(user.garmin, null, 4)}</xmp>\n                                    </details>\n                                    <details>\n                                        <summary>strava</summary>\n                                        <xmp>{JSON.stringify(user.strava, null, 4)}</xmp>\n                                    </details>\n                                    <details>\n                                        <summary>currentLocationGeocode</summary>\n                                        <xmp>{JSON.stringify(user.currentLocationGeocode, null, 4)}</xmp>\n                                    </details>\n                                    lastActivityEpoch: {util.isoDate(user.lastActivityEpoch)}<br />\n                                    activities: {util.format(user.activities)}<br />\n\n                                    {user.settings && <div class='form-check'>\n                                        <input class='form-check-input' type='checkbox' value={user.settings.veterinaryAllowed ? 0 : 1} id={`settings.veterinaryAllowed-${user.id}`} name='settings.veterinaryAllowed' checked={user.settings.veterinaryAllowed ? 'checked' : ''} data-email={user.email} onInput={this.adminUpdateUser} />\n                                        <label class='form-check-label' for={`settings.veterinaryAllowed-${user.id}`}>\n                                            settings.veterinaryAllowed\n                                        </label>\n                                    </div>}\n                                    <div class='form-check'>\n                                        <input class='form-check-input' type='checkbox' value={user.twoFactorLogin ? 0 : 1} id={`twoFactorLogin-${user.id}`} name='twoFactorLogin' checked={user.twoFactorLogin ? 'checked' : ''} data-email={user.email} onInput={this.adminUpdateUser} />\n                                        <label class='form-check-label' for={`twoFactorLogin-${user.id}`}>\n                                            twoFactorLogin\n                                        </label>\n                                    </div>\n                                    <div class='form-check'>\n                                        <input class='form-check-input' type='checkbox' value={user.isVeterinary ? 0 : 1} id={`isVeterinary-${user.id}`} name='isVeterinary' checked={user.isVeterinary ? 'checked' : ''} data-email={user.email} onInput={this.adminUpdateUser} />\n                                        <label class='form-check-label' for={`isVeterinary-${user.id}`}>\n                                            isVeterinary\n                                        </label>\n                                    </div>\n                                    <div class='form-group row'>\n                                        <label class='col-sm-2 col-form-label' for={`cellphone-${user.id}`}>cellphone</label>\n                                        <div class='col-sm-10'>\n                                            <input type='text' id={`cellphone-${user.id}`} name='cellphone' class='form-control' value={user.cellphone} data-email={user.email} onInput={this.adminUpdateUser} />\n                                        </div>\n                                    </div>\n                                    <div class='form-group row'>\n                                        <label class='col-sm-2 col-form-label' for={`firstname-${user.id}`}>firstname</label>\n                                        <div class='col-sm-10'>\n                                            <input type='text' id={`firstname-${user.id}`} name='firstname' class='form-control' value={user.firstname} data-email={user.email} onInput={this.adminUpdateUser} />\n                                        </div>\n                                    </div>\n                                    <div class='form-group row'>\n                                        <label class='col-sm-2 col-form-label' for={`lastname-${user.id}`}>lastname</label>\n                                        <div class='col-sm-10'>\n                                            <input type='text' id={`lastname-${user.id}`} name='lastname' class='form-control' value={user.lastname} data-email={user.email} onInput={this.adminUpdateUser} />\n                                        </div>\n                                    </div>\n                                </small>\n                            </>}\n                            {user.teams && <>\n                                {teams.map(team => (\n                                    <span class='badge badge-pill badge-info mr-2'>{team.name}</span>\n                                ))}<br />\n                            </>}\n                            {team.id && summary && <>\n                                <small class='text-muted'>\n                                    Total:\n                                    {summary && <span class='ml-2'><i class='fas fa-road' /> <Distance stores={this.props.stores} value={summary.distanceKm} /></span>}\n                                    {summary && <span class='ml-2'><i class='fas fa-mountain' /> <Elevation stores={this.props.stores} value={summary.elevation} /></span>}\n                                    {summary && <span class='ml-2'><i class='fas fa-clock' /> {util.secToHms(summary.duration || 0)}</span>}\n                                </small><br />\n                                <small class='text-muted'>\n                                    Avg: \n                                    {summary && <span class='ml-2'><i class='fas fa-road' /> <Distance stores={this.props.stores} value={summary.avgDistance} /></span>}\n                                    {summary && <span class='ml-2'><i class='fas fa-mountain' /> <Elevation stores={this.props.stores} value={summary.avgElevation} /></span>}\n                                    {summary && <span class='ml-2'><i class='fas fa-clock' /> {util.secToHms(summary.avgDuration || 0)}</span>}\n                                    {summary && <span class='ml-2'><i class='fas fa-tachometer-alt' /> <Speed stores={this.props.stores} value={summary.speedAvg} /></span>}\n                                    {summary && <span class='ml-2'><i class='fas fa-dog' /> {util.format(summary.avgDogs, 1)}</span>}\n                                </small>\n                            </>}\n                        </div>\n                        <div>\n                            {isTeamAdmin && user.id !== currentUser.id && <button class='btn btn-sm btn-danger'\n                                onClick={this.removeUser}\n                                data-email={user.email}\n                                data-id={user.id}\n                                data-team={team.id}\n                            ><i class='fas fa-ban' /></button>}\n                            {!isTeamAdmin && user.id === currentUser.id && <button class='btn btn-sm btn-secondary'\n                                onClick={this.removeUser}\n                                data-email={user.email}\n                                data-id={user.id}\n                                data-team={team.id}\n                            ><i class='fas fa-sign-out-alt' />{team.id}</button>}\n                        </div>\n                    </div>\n                </div>\n            </div>\n        );\n    }\n}\n\nexport default User;\n","import { h, Component, createRef, useEffect } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport { toJS } from 'mobx';\nimport Markdown from 'preact-markdown';\n\nimport ReactLeafletMultiOptionsPolyline from 'react-leaflet-multi-options-polyline';\n\nimport style from './style.css';\n\nimport mu from '../../lib/musher-util';\n\nconst MARKDOWN_OPTIONS = {\n\tpedantic: false,\n\tgfm: true,\n\tbreaks: true,\n\tsanitize: false,\n\tsmartLists: true,\n\tsmartypants: true,\n\txhtml: true,\n};\n\nimport {\n\tCircle,\n\tFeatureGroup,\n\tLayerGroup,\n\tLayersControl,\n\tMap,\n\tMarker,\n\tPopup,\n\tRectangle,\n\tTileLayer,\n\tVideoOverlay,\n\tImageOverlay,\n\tGeoJSON,\n\tWMSTileLayer,\n    useLeaflet,\n\tScaleControl,\n\tPolyline,\n} from 'react-leaflet';\n\nimport HeatmapLayer from 'react-leaflet-heatmap-layer';\n\nimport MarkerClusterGroup from 'react-leaflet-markercluster';\nimport '../../../node_modules/react-leaflet-markercluster/dist/styles.min.css';\n\n// import FullscreenControl from 'react-leaflet-fullscreen';\n// import '../../../node_modules/react-leaflet-fullscreen/dist/styles.css';\n\nimport Control from 'react-leaflet-control';\n\nconst { BaseLayer, Overlay } = LayersControl;\n\nimport icons from '../../lib/icons';\nimport '../../../node_modules/leaflet/dist/leaflet.css';\n\nimport L from 'leaflet';\n\ndelete L.Icon.Default.prototype._getIconUrl;\nL.Icon.Default.mergeOptions({\n    iconRetinaUrl: require('../../../node_modules/leaflet/dist/images/marker-icon-2x.png'),\n    iconUrl: require('../../../node_modules/leaflet/dist/images/marker-icon.png'),\n    shadowUrl: require('../../../node_modules/leaflet/dist/images/marker-shadow.png')\n});\n\nconst createClusterCustomIcon = function (cluster) {\n  return L.divIcon({\n    html: `<span>${cluster.getChildCount()}</span>`,\n    className: style['marker-cluster-custom'],\n    iconSize: L.point(40, 40, true),\n  });\n};\n\nfunction normalizeRange(val, min, max, newMin, newMax) {\n    return newMin + (val - min) * (newMax - newMin) / (max - min);\n}\n\nfunction kmtToMph(value) {\n    return 0.621371 * value;\n}\n\nfunction kmToMiles(value) {\n    return 0.621371 * value;\n}\n\nfunction meterToFeet(value) {\n    return 3.28084 * value;\n}\n\nfunction celciusToFahrenheit(value) {\n    return ((value * 9/5) + 32);\n}\n\nconst API_OPEN_WEATHERMAP_KEY = '75cd92317c98db6873031cd2d8de75c5';\nconst INCLINE_STEP = 1;\nconst MAX_HSL_COLOR = 230;\n\n@observer\nclass App extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\thasLocation: false,\n\t\t\tvisibleLayers: {\n\t\t\t\tWindspeed: false,\n\t\t\t},\n\t\t\tmapCenter: [],\n\t\t\tmapZoom: 10,\n\t\t\trangeSteps: INCLINE_STEP,\n\t\t\tmaxHslColor: MAX_HSL_COLOR,\n\t\t\thasZoomedToMarkers: false,\n\t\t};\n\t\t// const { waypointStore } = this.props.stores;\n\t\t// waypointStore.load();\n\t}\n\n\tmapRef = createRef();\n\tpolyRef = createRef();\n\n\thandleViewportChanged = (e) => {\n\t\t// console.log('onViewportChanged', e);\n\t\tthis.setState({\n\t\t\tmapCenter: e.center,\n\t\t\tmapZoom: e.zoom,\n\t\t})\n\t}\n\n\thandleLocationFound = (e) => {\n\t\tif (e.latlng) {\n\t\t\tthis.setState({\n\t\t\t\thasLocation: true,\n\t\t\t\tlatlng: e.latlng,\n\t\t\t});\n\t\t}\n\t}\n\n\tgeoJSONStyle() {\n\t\treturn {\n\t\t\tcolor: '#0347A2',\n\t\t\tweight: 5,\n\t\t\tfillOpacity: 0.5,\n\t\t\tfillColor: '#0347A2',\n\t\t}\n\t}\n\n\tgeoJSONStyleList(idx) {\n\t\tconst color = mu.getRankingColor(idx + 1);\n\t\treturn {\n\t\t\tcolor,\n\t\t\tweight: 3,\n\t\t\tfillOpacity: 0.5,\n\t\t\tfillColor: color,\n\t\t}\n\t}\n\n\tonEachFeature = (feature, layer) => {\n\t\tconst { gpxInfo = {} } = this.props;\n\t\tconst popupContent = `<Popup>\n\t\t\t<h5>Details</h5>\n\t\t\t<ul>\n\t\t\t\t<li>Total distance: ${util.format(gpxInfo.totalDistance, 2)} km</li>\n\t\t\t\t<li>Max speed: ${util.format(gpxInfo.maxSpeed, 1)} km/t</li>\n\t\t\t\t<li>Avg speed: ${util.format(gpxInfo.avgSpeed, 1)} km/t</li>\n\t\t\t\t<li>Ascent: ${util.format(gpxInfo.ascent || gpxInfo.calculatedAscend, 0)} m</li>\n\t\t\t\t<li>Descent: ${util.format(gpxInfo.decent || gpxInfo.calculatedDescend, 0)} m</li>\n\t\t\t\t<li>Duration: ${util.secToHms(gpxInfo.duration)}</li>\n\t\t\t</ul>\n\t\t</Popup>`\n\t\tlayer.bindPopup(popupContent)\n\t}\n\n\thandleClick = (e) => {\n\t\tconst { appState } = this.props.stores;\n\t\tappState.setLatlng(e.latlng);\n\t\t// this.setState({ currentPos: e.latlng });\n\t}\n\n\tzoomToGeoJSON = (e) => {\n\t\ttry {\n\t\t\tif (e.target) {\n\t\t\t\tlet bounds = e.target.getBounds();\n\n\t\t\t\tif (bounds && bounds._northEast) {\n\t\t\t\t\tthis.setState({ bounds });\n\t\t\t\t}\n\t\t\t\t// const map = this.mapRef.leafletElement;  //get native Map instance\n\t\t\t\t// map.fitBounds(bounds);\n\t\t\t}\n\t\t} catch (err) {\n\t\t\tconsole.log(err);\n\t\t}\n\t\t// if (this.geoJSONRef.leafletElement) {\n\t\t// console.log(e);\n\t\t// \tconst map = this.mapRef.leafletElement;  //get native Map instance\n\t\t// \tconst group = this.geoJSONRef.leafletElement; //get native featureGroup instance\n\t\t// \tmap.fitBounds(group.getBounds());\n\t\t// }\n\t}\n\n\tzoomToMarkers = (markers = [], force = false) => {\n\t\tconst { hasZoomedToMarkers } = this.state;\n\t\ttry {\n\t\t\t// console.log('zoomToMarkers', hasZoomedToMarkers, { markers });\n\t\t\tif ((force || !hasZoomedToMarkers) && markers.length && markers.length > 0) {\n\t\t\t\tconst map = this.mapRef.current.leafletElement;  //get native Map instance\n\t\t\t\tconst markerBounds = L.latLngBounds([]);\n\t\t\t\tmarkers.forEach(marker => {\n\t// console.log({ marker });\n\t\t\t\t\tmarkerBounds.extend([marker.lat, marker.lng])\n\t\t\t\t});\n\t// console.log('map.fitBounds');\n\t\t\t\tmap.fitBounds(markerBounds);\n\t\t\t\tthis.setState({ hasZoomedToMarkers: true });\n\t\t\t}\n\t\t} catch (err) {\n\t\t\tconsole.log(err);\n\t\t}\n\t}\n\n\tzoomToAllMarkers = () => {\n\t\tconst { waypoints = [] } = this.props;\n\t\tconst markers = waypoints;\n\t\tthis.zoomToMarkers(markers, true);\n\t}\n\n\tzoomToFirst10Markers = () => {\n\t\tconst { waypoints = [] } = this.props;\n\t\tconst markers = waypoints.slice(0, 10);\n\t\tthis.zoomToMarkers(markers, true);\n\t}\n\n\tzoomToFirst3Markers = () => {\n\t\tconst { waypoints = [] } = this.props;\n\t\tconst markers = waypoints.slice(0, 3);\n\t\tthis.zoomToMarkers(markers, true);\n\t}\n\t\n\tzoomToFavoriteMarkers = () => {\n\t\tconst { zoomToMarkers = [], waypoints = [] } = this.props;\n\t\tconst markers = zoomToMarkers.length > 0 ? zoomToMarkers : waypoints;\n\t\tthis.zoomToMarkers(markers, true);\n\t}\n\n\t// componentDidMount() {\n\t// }\n\n\tcomponentWillReceiveProps(nextProps) {\n\t\tif (this.props.zoomToMarkers !== nextProps.zoomToMarkers) {\n\t\t\t// console.log(nextProps.zoomToMarkers)\n\t\t\tthis.zoomToMarkers(nextProps.zoomToMarkers, true);\n        } else if (this.props.waypoints !== nextProps.waypoints) {\n\t\t\tthis.zoomToMarkers(nextProps.waypoints);\n\t\t}\n\n// \t\tconst { zoomToMarkers = [], waypoints = [] } = nextProps;\n// \t\tconst { zoomToMarkers: prevZoomToMarkers = [] } = this.props;\n// // console.log('componentWillReceiveProps', JSON.stringify(zoomToMarkers.length), JSON.stringify(prevZoomToMarkers.length));\n// \t\t// if (zoomToMarkers.length !== prevZoomToMarkers.length) {\n// \t\tconst markers = zoomToMarkers.length > 0 ? zoomToMarkers : waypoints;\n// \t\tthis.zoomToMarkers(markers);\n\t\t// }\n\t}\n\n\tcomponentWillUnmount() {\n\t\t// try {\n\t\t// \tconst map = this.mapRef.current.leafletElement;  //get native Map instance\n\t\t// \tmap.remove()\n\t\t// } catch (err) {\n\t\t// \tconsole.log(err);\n\t\t// }\n\t}\n\n\toverlayAdd = (e) => {\n\t\t// console.log('overlayAdd', e);\n\t\tconst { name } = e;\n\t\tconst { visibleLayers } = this.state;\n\t\tvisibleLayers[name] = true;\n\t\tthis.setState({ visibleLayers });\n\t}\n\toverlayRemove = (e) => {\n\t\tconst { name } = e;\n\t\t// console.log('overlayRemove', e, name)\n\t\tconst { visibleLayers } = this.state;\n\t\tvisibleLayers[name] = false;\n\t\tthis.setState({ visibleLayers });\n\t}\n\n\tpolylineOptions = () => {\n\t\tconst { gpxInfo } = this.props;\n\t\tconst { rangeSteps } = this.state;\n\t\tlet { maxHslColor } = this.state;\n\t\tconst { appState } = this.props.stores;\n\t\tconst { mapColorMode, mapRangeMin, mapRangeMax } = appState;\n\n\t\tlet newRangeMin = mapRangeMin;\n\t\tlet newRangeMax = mapRangeMax;\n\n\t\tif (mapColorMode === 'speed') {\n\t\t\tif (gpxInfo && gpxInfo.speeds && gpxInfo.speeds.length > 0) {\n\t\t\t\tnewRangeMin = Math.floor(Math.min(...gpxInfo.speeds.map(e => e * 3.6)));\n\t\t\t\tnewRangeMax = Math.ceil(Math.max(...gpxInfo.speeds.map(e => e * 3.6)));\n\t\t\t}\n\t\t}\n\n\t\tconst range = util.range(newRangeMin, newRangeMax, rangeSteps);\n\t\tconst colors = range.map((e) => {\n\t\t\tconst val = normalizeRange(e, newRangeMin, newRangeMax, 0, maxHslColor);\n\t\t\tlet colorValue;\n\t\t\tif (mapColorMode === 'speed') {\n\t\t\t\tcolorValue = maxHslColor - val;\n\t\t\t} else {\n\t\t\t\tcolorValue = maxHslColor - val;\n\t\t\t}\n\t\t\tconst { r, g, b } = util.hsl2Rgb(colorValue, 100, 45);\n\t\t\treturn { color: `rgb(${r}, ${g}, ${b})` };\n\t\t});\n\n\t\tappState.setMapRange(range, newRangeMin, newRangeMax);\n\t\tappState.setMapColors(colors);\n\t\treturn colors;\n\t}\n\n\tpolylineOptionIdxFn = (latLng) => {\n\t\tconst { appState } = this.props.stores;\n\t\tconst { mapRange: altThresholds } = appState;\n\t\t// const altThresholds = util.range(MIN_INCLINE, MAX_INCLINE, INCLINE_STEP);\n\t\tfor (let i = 0; i < altThresholds.length; ++i) {\n\t\t\tif (latLng.meta <= altThresholds[i]) {\n\t\t\t\treturn i;\n\t\t\t}\n\t\t}\n\t\treturn altThresholds.length;\n\t}\n\n\tpolylinetrackPointFactory = (data) => {\n\t\tconst { gpxInfo } = this.props;\n\t\tconst { appState } = this.props.stores;\n\t\tconst { mapColorMode, mapRangeMin, mapRangeMax } = appState;\n\n\n\t\tlet dataArray = [];\n\t\tif (mapColorMode === 'speed' && gpxInfo.speeds && gpxInfo.speeds.length > 0) {\n\t\t\tdataArray = gpxInfo.speeds.map(e => e * 3.6);\n\t\t} else if (gpxInfo && gpxInfo.climbs) {\n\t\t\tdataArray = gpxInfo.climbs;\n\t\t}\n\n\t\tconst points = data.filter(e => e[0] && e[1] && e[2]).map((item, idx) => {\n\t\t\tconst trkpt = L.latLng(item[1], item[0], item[2]);\n\t\t\tif (dataArray && dataArray.length > 0) {\n\t\t\t\ttrkpt.meta = dataArray[idx] || 0;\n\t\t\t\tif (trkpt.meta > mapRangeMax) {\n\t\t\t\t\ttrkpt.meta = mapRangeMax;\n\t\t\t\t}\n\t\t\t\tif (trkpt.meta < mapRangeMin) {\n\t\t\t\t\ttrkpt.meta = mapRangeMin;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\ttrkpt.meta = 0;\n\t\t\t}\n\t\t\treturn trkpt;\n\t\t});\n\t\treturn points;\n\t}\n\n\tshowSpeed = () => {\n\t\tconst { appState } = this.props.stores;\n\t\tappState.setMapColorMode('speed');\n\t}\n\n\t// handleMarkerClick = ({ title, bib, email, e }) => {\n\thandleMarkerClick = (opt = {}) => {\n\t\tconst { onMarkerClick = ({ title, bib }) => console.log({ title, bib }) } = this.props;\n\t\ttry {\n\t\t\tonMarkerClick({ ...opt });\n\t\t} catch (err) {\n\t\t\tconsole.log(err);\n\t\t}\n\t}\n\n\thandleMarker2Click = (opt = {}) => {\n\t\tconst { onMarker2Click = (opt) => console.log(opt) } = this.props;\n\t\ttry {\n\t\t\tonMarker2Click({ ...opt });\n\t\t} catch (err) {\n\t\t\tconsole.log(err);\n\t\t}\n\t}\n\n\thandleMarker3Click = (opt = {}) => {\n\t\tconst { onMarker3Click = (opt) => console.log(opt) } = this.props;\n\t\ttry {\n\t\t\tonMarker3Click({ ...opt });\n\t\t} catch (err) {\n\t\t\tconsole.log(err);\n\t\t}\n\t}\n\n\tbaseLayerChange = (e) => {\n\t\tconst { name } = e;\n\t\tconsole.log('baseLayerChange event', e);\n\t\tconsole.log({ name });\n\t\tconst { appState } = this.props.stores;\n\t\tappState.setMapChecked(name);\n\t}\n\n\twhenReadyHandler = (e) => {\n\t\tconst { target } = e;\n\t\ttarget.on('baselayerchange', this.baseLayerChange);\n\t}\n\n\trender() {\n\t\tconst { userStore, appState } = this.props.stores;\n\t\tconst { mapChecked } = appState;\n\t\tconst { user } = userStore;\n\t\tconst { settings = {} } = user;\n\n\t\tconst { visibleLayers, mapZoom, bounds = null } = this.state;\n\t\tconst {\n\t\t\twaypoints = [],\n\t\t\twaypoints2 = [],\n\t\t\twaypoints3 = [],\n\t\t\tgeoJSONs = [],\n\t\t\tzoomToMarkers = [],\n\t\t\tgeojson,\n\t\t\tgpxInfo,\n\t\t\tmapId = 1,\n\t\t\tcenter = [61.0779066, 9.800984],\n\t\t\tzoom = 5,\n\t\t\tminZoom = 4,\n\t\t\tmaxZoom = 18,\n\t\t\tdarkmode,\n\t\t\theight = 500,\n\t\t\theatmap = [],\n\t\t\tskipGeojson = false,\n\t\t\tzoomToWaypoints = false,\n\t\t\tfullscreenMap = false,\n\n\t\t\tshowSearch = true,\n\t\t\tshowZoomControl = true,\n\t\t\tshowLayersControl = true,\n\t\t\tshowFullscreenControl = true,\n\t\t\tshowScaleControl = true,\n\t\t\tshowRange = true,\n\t\t\tshowTrackProfile = true,\n\t\t\tdistanceMarkerSteps = 'normal',\n\t\t\tshowDistanceMarkers = true,\n\t\t\tgroupWaypoints = true,\n\n\t\t\tlargeMarkers,\n\n\t\t\tlayersControlPosition = 'topright',\n\t\t} = this.props;\n\t\tconst { mapColorMode, mapRange: range, mapColors: colors, mapRangeMin, mapRangeMax } = appState;\n\n\t\tconst tempGeoJson = toJS(geojson);\n\t\tconst track = util.asObject(tempGeoJson, 'features', 0, 'geometry', 'coordinates');\n\t\tconst hasWaypoints = zoomToMarkers.length > 0 || waypoints.length > 0;\n\t\tconst hasWaypoints2 = waypoints2.length > 0;\n\n\t\tlet startMarker;\n\t\tlet endMarker;\n\t\tconst distanceMarkers = [];\n\t\tif (track && track[0] && track[0][0]) {\n\t\t\tstartMarker = track[0][0] && track[0][0][0] ?  [track[0][0][1], track[0][0][0]] : [track[0][1], track[0][0]];\n\t\t\tendMarker = track[track.length - 1][0] && track[track.length - 1][0][0] ? [track[track.length - 1][0][1], track[track.length - 1][0][0]] : [track[track.length - 1][1], track[track.length - 1][0]];\n\t\t\tif (gpxInfo && gpxInfo.distances) {\n\t\t\t\tlet totalDistance = 0;\n\t\t\t\tlet currentDistance = 0;\n\t\t\t\tlet steps = 10;\n\t\t\t\tswitch (mapZoom) {\n\t\t\t\t\tcase 15:\n\t\t\t\t\t\tsteps = distanceMarkerSteps === 'long' ? 3 : 1;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 14:\n\t\t\t\t\t\tsteps = distanceMarkerSteps === 'long' ? 5 : 2;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 13:\n\t\t\t\t\t\tsteps = distanceMarkerSteps === 'long' ? 7 : 3;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 12:\n\t\t\t\t\t\tsteps = distanceMarkerSteps === 'long' ? 10 : 5;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 11:\n\t\t\t\t\t\tsteps = distanceMarkerSteps === 'long' ? 15 : 10;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 10:\n\t\t\t\t\t\tsteps = distanceMarkerSteps === 'long' ? 15 : 10;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 9:\n\t\t\t\t\t\tsteps = distanceMarkerSteps === 'long' ? 20 : 15;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 8:\n\t\t\t\t\t\tsteps = distanceMarkerSteps === 'long' ? 30 : 20;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 7:\n\t\t\t\t\t\tsteps = distanceMarkerSteps === 'long' ? 40 : 30;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 6:\n\t\t\t\t\t\tsteps = distanceMarkerSteps === 'long' ? 70 : 50;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 5:\n\t\t\t\t\t\tsteps = distanceMarkerSteps === 'long' ? 150 : 100;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tsteps = distanceMarkerSteps === 'long' ? 200 : 150;\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\t// console.log({ mapZoom, steps });\n\t\t\t\tgpxInfo.distances.forEach((e, idx) => {\n\t\t\t\t\ttotalDistance += settings.imperial ? kmToMiles(e) : e;\n\t\t\t\t\tcurrentDistance += settings.imperial ? kmToMiles(e) : e;\n\t\t\t\t\tif (currentDistance >= steps) {\n\t\t\t\t\t\tcurrentDistance = 0;\n\t\t\t\t\t\tif (track[idx] && Array.isArray(track[idx])) {\n\t\t\t\t\t\t\tdistanceMarkers.push({\n\t\t\t\t\t\t\t\tlat: track[idx][1],\n\t\t\t\t\t\t\t\tlng: track[idx][0],\n\t\t\t\t\t\t\t\t// icon: wp.icon || 'marker',\n\t\t\t\t\t\t\t\ttitle: Math.floor(totalDistance),\n\t\t\t\t\t\t\t\tbody: '',\n\t\t\t\t\t\t\t\t// color: wp.color,\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t}\n        // const mapChecked = darkmode ? 'OpenStreetMap.Dark' : 'OpenStreetMap.Mapnik';\n\t\tconst { isAdmin } = userStore;\n\t\treturn (\n\t\t\t<>\n\t\t\t\t<div class={`${style.home} w-100 h-100 overflow-hidden position-relative`}\n\t\t\t\t\t// onTouchstart={mu.captureAllEvents}\n\t\t\t\t\t// onTouchend={mu.captureAllEvents}\n\t\t\t\t\tonTouchmove={mu.captureAllEvents}\n\t\t\t\t\tonScroll={mu.captureAllEvents}\n\t\t\t\t>\n\t\t\t\t\t<Map\n\t\t\t\t\t\t// key={mapId}\n\t\t\t\t\t\tbounds={bounds}\n\t\t\t\t\t\tref={this.mapRef}\n\t\t\t\t\t\t// onLoad={(e) => console.log(e)}\n\t\t\t\t\t\tonViewportChanged={this.handleViewportChanged}\n\t\t\t\t\t\tminZoom={minZoom}\n\t\t\t\t\t\tmaxZoom={maxZoom}\n\t\t\t\t\t\t// maxBounds={MAX_BOUNDS}\n\t\t\t\t\t\tcenter={center}\n\t\t\t\t\t\t// onClick={this.handleClick}\n\t\t\t\t\t\tonLocationfound={this.handleLocationFound}\n\t\t\t\t\t\t// onLayeradd={(e) => console.log(e)}\n\t\t\t\t\t\t// onOverlayadd={(e) => console.log(e)}\n\t\t\t\t\t\t// ref={(r) => { this.mapRef = r; }}\n\t\t\t\t\t\tzoom={zoom}\n\t\t\t\t\t\tzoomControl={showZoomControl}\n\t\t\t\t\t\tdoubleClickZoom={true}\n\t\t\t\t\t\tscrollWheelZoom={true}\n\t\t\t\t\t\tdragging={fullscreenMap || !L.Browser.mobile}\n\t\t\t\t\t\t// tap={fullscreenMap || !L.Browser.mobile}\n\t\t\t\t\t\t// tap={!L.Browser.mobile}\n\t\t\t\t\t\ttap={!L.Browser.mobile}\n\t\t\t\t\t\ttouchZoom={L.Browser.mobile ? 'center' : false}\n\t\t\t\t\t\tanimate={true}\n\t\t\t\t\t\teaseLinearity={0.35}\n\t\t\t\t\t\tstyle={`width: 100%; min-height: ${height}px; height: 100%;`} className='h-100'\n\t\t\t\t\t\tonOverlayadd={this.overlayAdd}\n\t\t\t\t\t\tonOverlayremove={this.overlayRemove}\n\t\t\t\t\t\twhenReady={this.whenReadyHandler}\n\t\t\t\t\t>\n\t\t\t\t\t\t{showLayersControl && <LayersControl position={layersControlPosition}>\n\t\t\t\t\t\t\t<BaseLayer checked={mapChecked === 'OpenStreetMap.Mapnik'} name='OpenStreetMap.Mapnik'>\n\t\t\t\t\t\t\t\t<TileLayer\n\t\t\t\t\t\t\t\t\tattribution='&amp;copy <a href=\"http://osm.org/copyright\">OpenStreetMap</a> contributors'\n\t\t\t\t\t\t\t\t\turl='https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png'\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</BaseLayer>\n\t\t\t\t\t\t\t<BaseLayer checked={mapChecked === 'OpenStreetMap.Dark'}name='OpenStreetMap.Dark'>\n\t\t\t\t\t\t\t\t<TileLayer\n\t\t\t\t\t\t\t\t\tattribution='&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors, &copy; Map tiles by Carto, under CC BY 3.0. Data by OpenStreetMap, under ODbL.'\n\t\t\t\t\t\t\t\t\turl='https://cartodb-basemaps-{s}.global.ssl.fastly.net/dark_all/{z}/{x}/{y}.png'\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</BaseLayer>\n\n\t\t\t\t\t\t\t{/* {['matrikkel_bakgrunn', 'topo4', 'topo4graatone', 'europa', 'toporaster3', 'sjokartraster', 'norges_grunnkart',\n\t\t\t\t\t\t\t'norges_grunnkart_graatone', 'egk', 'terreng_norgeskart', 'havbunn_grunnkart', 'bakgrunnskart_forenklet'].map(layer => <>\t\t\t\t\t\t\t */}\n\t\t\t\t\t\t\t<BaseLayer checked={mapChecked === `Norway Kartverket topo4`} name={`Norway Kartverket topo4`}>\n\t\t\t\t\t\t\t\t<TileLayer\n\t\t\t\t\t\t\t\t\tsubdomains={['opencache', 'opencache2', 'opencache3']}\n\t\t\t\t\t\t\t\t\tattribution='&amp;copy <a href=\"http://kartverket.no\">Kartverket</a>'\n\t\t\t\t\t\t\t\t\turl='https://{s}.statkart.no/gatekeeper/gk/gk.open_gmaps?layers=topo4&zoom={z}&x={x}&y={y}'\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</BaseLayer>\n\t\t\t\t\t\t\t<BaseLayer checked={mapChecked === `Norway Kartverket topo4graatone`} name={`Norway Kartverket topo4graatone`}>\n\t\t\t\t\t\t\t\t<TileLayer\n\t\t\t\t\t\t\t\t\tsubdomains={['opencache', 'opencache2', 'opencache3']}\n\t\t\t\t\t\t\t\t\tattribution='&amp;copy <a href=\"http://kartverket.no\">Kartverket</a>'\n\t\t\t\t\t\t\t\t\turl='https://{s}.statkart.no/gatekeeper/gk/gk.open_gmaps?layers=topo4graatone&zoom={z}&x={x}&y={y}'\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</BaseLayer>\n\t\t\t\t\t\t\t{/* <BaseLayer checked={mapChecked === `Norway Kartverket terreng_norgeskart`} name={`Norway Kartverket terreng_norgeskart`}>\n\t\t\t\t\t\t\t\t<TileLayer\n\t\t\t\t\t\t\t\t\tsubdomains={['opencache', 'opencache2', 'opencache3']}\n\t\t\t\t\t\t\t\t\tattribution='&amp;copy <a href=\"http://kartverket.no\">Kartverket</a>'\n\t\t\t\t\t\t\t\t\turl='https://{s}.statkart.no/gatekeeper/gk/gk.open_gmaps?layers=terreng_norgeskart&zoom={z}&x={x}&y={y}'\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</BaseLayer>\n\t\t\t\t\t\t\t<BaseLayer checked={mapChecked === `Norway Kartverket norges_grunnkart`} name={`Norway Kartverket norges_grunnkart`}>\n\t\t\t\t\t\t\t\t<TileLayer\n\t\t\t\t\t\t\t\t\tsubdomains={['opencache', 'opencache2', 'opencache3']}\n\t\t\t\t\t\t\t\t\tattribution='&amp;copy <a href=\"http://kartverket.no\">Kartverket</a>'\n\t\t\t\t\t\t\t\t\turl='https://{s}.statkart.no/gatekeeper/gk/gk.open_gmaps?layers=norges_grunnkart&zoom={z}&x={x}&y={y}'\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</BaseLayer>\n\t\t\t\t\t\t\t<BaseLayer checked={mapChecked === `Norway Kartverket norges_grunnkart_graatone`} name={`Norway Kartverket norges_grunnkart_graatone`}>\n\t\t\t\t\t\t\t\t<TileLayer\n\t\t\t\t\t\t\t\t\tsubdomains={['opencache', 'opencache2', 'opencache3']}\n\t\t\t\t\t\t\t\t\tattribution='&amp;copy <a href=\"http://kartverket.no\">Kartverket</a>'\n\t\t\t\t\t\t\t\t\turl='https://{s}.statkart.no/gatekeeper/gk/gk.open_gmaps?layers=norges_grunnkart_graatone&zoom={z}&x={x}&y={y}'\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</BaseLayer> */}\n\n\t\t\t\t\t\t\t{/* <BaseLayer checked={mapChecked === `Google Satellite`} name={`Google Satellite`}>\n\t\t\t\t\t\t\t\t<TileLayer\n\t\t\t\t\t\t\t\t\tsubdomains={['mt0','mt1','mt2','mt3']}\n\t\t\t\t\t\t\t\t\tattribution='&amp;copy <a href=\"http://google.com\">Google</a>'\n\t\t\t\t\t\t\t\t\turl='https://{s}.google.com/vt/lyrs=s&x={x}&y={y}&z={z}'\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</BaseLayer>\n\t\t\t\t\t\t\t<BaseLayer checked={mapChecked === `Google Roadmap`} name={`Google Roadmap`}>\n\t\t\t\t\t\t\t\t<TileLayer\n\t\t\t\t\t\t\t\t\tsubdomains={['mt0','mt1','mt2','mt3']}\n\t\t\t\t\t\t\t\t\tattribution='&amp;copy <a href=\"http://google.com\">Google</a>'\n\t\t\t\t\t\t\t\t\turl='https://{s}.google.com/vt/lyrs=m&x={x}&y={y}&z={z}'\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</BaseLayer> */}\n\t\t\t\t\t\t\t<BaseLayer checked={mapChecked === `Google Satellite Text`} name={`Google Satellite Text`}>\n\t\t\t\t\t\t\t\t<TileLayer\n\t\t\t\t\t\t\t\t\tsubdomains={['mt0','mt1','mt2','mt3']}\n\t\t\t\t\t\t\t\t\tattribution='&amp;copy <a href=\"http://google.com\">Google</a>'\n\t\t\t\t\t\t\t\t\turl='https://{s}.google.com/vt/lyrs=s,h&x={x}&y={y}&z={z}'\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</BaseLayer>\n\t\t\t\t\t\t\t{/* <BaseLayer name='OpenStreetMap.BlackAndWhite'>\n\t\t\t\t\t\t\t\t<TileLayer\n\t\t\t\t\t\t\t\t\tattribution='&amp;copy <a href=\"http://osm.org/copyright\">OpenStreetMap</a> contributors'\n\t\t\t\t\t\t\t\t\turl='https://tiles.wmflabs.org/bw-mapnik/{z}/{x}/{y}.png'\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</BaseLayer> */}\n\t\t\t\t\t\t\t{/* <BaseLayer name='OpenStreetMap.Carto'>\n\t\t\t\t\t\t\t\t<TileLayer\n\t\t\t\t\t\t\t\t\tattribution='&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors, &copy; <a href=\"https://carto.com/attribution\">CARTO</a>'\n\t\t\t\t\t\t\t\t\turl='https://{s}.basemaps.cartocdn.com/light_nolabels/{z}/{x}/{y}.png'\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</BaseLayer> */}\n\t\t\t\t\t\t\t{/* <BaseLayer name='OpenStreetMap.Hikemap'>\n\t\t\t\t\t\t\t\t<TileLayer\n\t\t\t\t\t\t\t\t\tattribution='&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors, &copy; wmflabs Hike & Bike'\n\t\t\t\t\t\t\t\t\turl='https://tiles.wmflabs.org/hikebike/{z}/{x}/{y}.png'\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</BaseLayer> */}\n\t\t\t\t\t\t\t{/* <BaseLayer name='OpenStreetMap.Hiking'>\n\t\t\t\t\t\t\t\t<TileLayer\n\t\t\t\t\t\t\t\t\tattribution='&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors, &copy; Map tiles by Carto, under CC BY 3.0. Data by OpenStreetMap, under ODbL.'\n\t\t\t\t\t\t\t\t\turl=' http://{s}.tiles.wmflabs.org/hikebike/{z}/{x}/{y}.png'\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</BaseLayer> */}\n\t\t\t\t\t\t\t{/*\n\t\t\t\t\t\t\t<Overlay checked name='Layer group with circles'>\n\t\t\t\t\t\t\t\t<LayerGroup>\n\t\t\t\t\t\t\t\t\t<Circle center={center} fillColor='blue' radius={200} />\n\t\t\t\t\t\t\t\t\t<Circle\n\t\t\t\t\t\t\t\t\t\tcenter={center}\n\t\t\t\t\t\t\t\t\t\tfillColor='red'\n\t\t\t\t\t\t\t\t\t\tradius={100}\n\t\t\t\t\t\t\t\t\t\tstroke={false}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t<LayerGroup>\n\t\t\t\t\t\t\t\t\t\t<Circle\n\t\t\t\t\t\t\t\t\t\t\tcenter={circle2}\n\t\t\t\t\t\t\t\t\t\t\tcolor='green'\n\t\t\t\t\t\t\t\t\t\t\tfillColor='green'\n\t\t\t\t\t\t\t\t\t\t\tradius={100}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</LayerGroup>\n\t\t\t\t\t\t\t\t</LayerGroup>\n\t\t\t\t\t\t\t</Overlay>\n\t\t\t\t\t\t\t<Overlay name='Feature group'>\n\t\t\t\t\t\t\t\t<FeatureGroup color='purple'>\n\t\t\t\t\t\t\t\t\t<Popup>Popup in FeatureGroup</Popup>\n\t\t\t\t\t\t\t\t\t<Circle center={circle2} radius={200} />\n\t\t\t\t\t\t\t\t\t<Rectangle bounds={rectangle} />\n\t\t\t\t\t\t\t\t</FeatureGroup>\n\t\t\t\t\t\t\t</Overlay> */}\n\n\t\t\t\t\t\t\t{/* <Overlay name='Geoportal.gov.pl'>\n\t\t\t\t\t\t\t\t<WMSTileLayer\n\t\t\t\t\t\t\t\t\tlayers={'Raster'}\n\t\t\t\t\t\t\t\t\tformat={'image/png'}\n\t\t\t\t\t\t\t\t\ttransparent={true}\n\t\t\t\t\t\t\t\t\turl='http://mapy.geoportal.gov.pl/wss/service/img/guest/ORTO/MapServer/WMSServer?'\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</Overlay>\n\t\t\t\t\t\t\t<Overlay name='Wildfire'>\n\t\t\t\t\t\t\t\t<WMSTileLayer\n\t\t\t\t\t\t\t\t\tlayers={'GWIS'}\n\t\t\t\t\t\t\t\t\tformat={'image/png'}\n\t\t\t\t\t\t\t\t\ttransparent={true}\n\t\t\t\t\t\t\t\t\turl={'https://ies-ows.jrc.ec.europa.eu/gwis?language=eng&'}\n\t\t\t\t\t\t\t\t\tattribution={'European Commission, Joint Research Centre'}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</Overlay> */}\n\n\n\t\t\t\t\t\t\t<Overlay name='Windspeed'>\n\t\t\t\t\t\t\t\t<WMSTileLayer\n\t\t\t\t\t\t\t\t\t// layer={'wind_new'}\n\t\t\t\t\t\t\t\t\t// format={'image/png'}\n\t\t\t\t\t\t\t\t\t// transparent={true}\n\t\t\t\t\t\t\t\t\t// url={`https://tile.openweathermap.org/map/{layer}/{z}/{x}/{y}.png?appid=${API_OPEN_WEATHERMAP_KEY}`}\n\t\t\t\t\t\t\t\t\turl={`https://maps.openweathermap.org/maps/2.0/weather/WND/{z}/{x}/{y}?use_norm=false&opacity=0.25&palette=0:0073FF; 2:00AAFF; 3:4BD0D6; 6:8DE7C7; 12:B0F720; 25:F3363B; 50:C60000&arrow_step=64&appid=${API_OPEN_WEATHERMAP_KEY}`}\n\t\t\t\t\t\t\t\t\tattribution={'Open weather maps'}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</Overlay>\n\t\t\t\t\t\t\t{/* <Overlay checked name='Windspeed2'>\n\t\t\t\t\t\t\t\t<WMSTileLayer\n\t\t\t\t\t\t\t\t\top={'WND'}\n\t\t\t\t\t\t\t\t\t// format={'image/png'}\n\t\t\t\t\t\t\t\t\t// transparent={true}\n\t\t\t\t\t\t\t\t\turl={`http://maps.openweathermap.org/maps/2.0/weather/{op}/{z}/{x}/{y}?appid=${API_OPEN_WEATHERMAP_KEY}`}\n\t\t\t\t\t\t\t\t\tattribution={'Open weather maps'}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</Overlay> */}\n\t\t\t\t\t\t\t<Overlay name='Temperature'>\n\t\t\t\t\t\t\t\t<WMSTileLayer\n\t\t\t\t\t\t\t\t\t// layer={'temp_new'}\n\t\t\t\t\t\t\t\t\t// format={'image/png'}\n\t\t\t\t\t\t\t\t\t// transparent={true}\n\t\t\t\t\t\t\t\t\t// url={`https://tile.openweathermap.org/map/{layer}/{z}/{x}/{y}.png?appid=${API_OPEN_WEATHERMAP_KEY}`}\n\t\t\t\t\t\t\t\t\turl={`https://maps.openweathermap.org/maps/2.0/weather/TA2/{z}/{x}/{y}?fill_bound=true&opacity=0.35&appid=${API_OPEN_WEATHERMAP_KEY}`}\n\t\t\t\t\t\t\t\t\tattribution={'Open weather maps'}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</Overlay>\n\t\t\t\t\t\t\t<Overlay name='Snow depth'>\n\t\t\t\t\t\t\t\t<WMSTileLayer\n\t\t\t\t\t\t\t\t\t// layer={'precipitation_new'}\n\t\t\t\t\t\t\t\t\t// format={'image/png'}\n\t\t\t\t\t\t\t\t\t// transparent={true}\n\t\t\t\t\t\t\t\t\turl={`https://maps.openweathermap.org/maps/2.0/weather/SD0/{z}/{x}/{y}?fill_bound=true&opacity=0.35&appid=${API_OPEN_WEATHERMAP_KEY}`}\n\t\t\t\t\t\t\t\t\tattribution={'Open weather maps'}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</Overlay>\n\t\t\t\t\t\t\t<Overlay name='Precipitation'>\n\t\t\t\t\t\t\t\t<WMSTileLayer\n\t\t\t\t\t\t\t\t\t// layer={'precipitation_new'}\n\t\t\t\t\t\t\t\t\t// format={'image/png'}\n\t\t\t\t\t\t\t\t\t// transparent={true}\n\t\t\t\t\t\t\t\t\turl={`https://maps.openweathermap.org/maps/2.0/weather/PA0/{z}/{x}/{y}?fill_bound=true&opacity=0.35&appid=${API_OPEN_WEATHERMAP_KEY}`}\n\t\t\t\t\t\t\t\t\tattribution={'Open weather maps'}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</Overlay>\n\t\t\t\t\t\t\t{isAdmin && <Overlay name='Atmospheric pressure'>\n\t\t\t\t\t\t\t\t<WMSTileLayer\n\t\t\t\t\t\t\t\t\t// layer={'precipitation_new'}\n\t\t\t\t\t\t\t\t\t// format={'image/png'}\n\t\t\t\t\t\t\t\t\t// transparent={true}\n\t\t\t\t\t\t\t\t\turl={`https://maps.openweathermap.org/maps/2.0/weather/APM/{z}/{x}/{y}?fill_bound=true&opacity=0.35&appid=${API_OPEN_WEATHERMAP_KEY}`}\n\t\t\t\t\t\t\t\t\tattribution={'Open weather maps'}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</Overlay>}\n\t\t\t\t\t\t</LayersControl>}\n\n\t\t\t\t\t\t{/* {showFullscreenControl && <FullscreenControl position='topright' />} */}\n\n\t\t\t\t\t\t{showScaleControl && <ScaleControl\n\t\t\t\t\t\t\tmetric={true}\n\t\t\t\t\t\t\timperial={false}\n\t\t\t\t\t\t/>}\n\n\t\t\t\t\t\t{visibleLayers.Windspeed && <Control position='bottomright'>\n\t\t\t\t\t\t\t<div style=\"\n\t\t\t\t\t\t\t\tcolor: #48484a;\n\t\t\t\t\t\t\t\tdisplay: flex;\n\t\t\t\t\t\t\t\talign-items: center;\n\t\t\t\t\t\t\t\tpadding: 2pt 4pt;\n\t\t\t\t\t\t\t\tbackground-color: #fff;\n\t\t\t\t\t\t\t\tborder-radius: 4pt;\n\t\t\t\t\t\t\t\tbox-shadow: 0 1px 3px rgba(0,0,0,.12),0 1px 2px rgba(0,0,0,.24);\n\t\t\t\t\t\t\t\ttransition: box-shadow .1s ease-out;\n\t\t\t\t\t\t\t\ttransition: box-shadow .1s ease-out,-webkit-box-shadow .1s ease-out;\n\t\t\t\t\t\t\t\tmargin-bottom: 10px;\n\t\t\t\t\t\t\t\tjustify-content: space-between;\n\t\t\t\t\t\t\t\tfont-size: 10px;\n\t\t\t\t\t\t\t\">\n\t\t\t\t\t\t\t\t<div>Wind speed, m/s</div>\n\t\t\t\t\t\t\t\t<div style=\"\n\t\t\t\t\t\t\t\t\tmargin-left: 10px;\n\t\t\t\t\t\t\t\t\tdisplay: flex;\n\t\t\t\t\t\t\t\t\tflex-direction: column;\n\t\t\t\t\t\t\t\t\">\n\t\t\t\t\t\t\t\t\t<div style=\"width: 260px; display: flex; justify-content: space-between;\" class=\"scale-dividers\" >\n\t\t\t\t\t\t\t\t\t\t<div>0</div>\n\t\t\t\t\t\t\t\t\t\t<div>2</div>\n\t\t\t\t\t\t\t\t\t\t<div>3</div>\n\t\t\t\t\t\t\t\t\t\t<div>6</div>\n\t\t\t\t\t\t\t\t\t\t<div>12</div>\n\t\t\t\t\t\t\t\t\t\t<div>25</div>\n\t\t\t\t\t\t\t\t\t\t<div>50</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div style=\"\n\t\t\t\t\t\t\t\t\t\twidth: 260px;\n\t\t\t\t\t\t\t\t\t\theight: 5px;\n\t\t\t\t\t\t\t\t\t\t// background: rgba(0, 0, 0, 0) linear-gradient(to left, rgb(158, 128, 177), rgba(116, 76, 172, 0.9), rgb(164, 123, 170), rgba(170, 128, 177, 0.84), rgba(176, 128, 177, 0.71), rgba(170, 128, 177, 0.54), rgba(170, 128, 177, 0.44), rgba(255, 255, 0, 0)) repeat scroll 0% 0%;\n\t\t\t\t\t\t\t\t\t\tbackground: linear-gradient(to right, #0073FF,#00AAFF,#4BD0D6,#8DE7C7,#B0F720,#F0B800,#FB5515,#F3363B,#C60000) repeat scroll 0% 0%;\n\t\t\t\t\t\t\t\t\t\" />\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</Control>}\n\n\t\t\t\t\t\t{visibleLayers.Temperature && <Control position='bottomright'>\n\t\t\t\t\t\t\t<div style=\"\n\t\t\t\t\t\t\t\tcolor: #48484a;\n\t\t\t\t\t\t\t\tdisplay: flex;\n\t\t\t\t\t\t\t\talign-items: center;\n\t\t\t\t\t\t\t\tpadding: 2pt 4pt;\n\t\t\t\t\t\t\t\tbackground-color: #fff;\n\t\t\t\t\t\t\t\tborder-radius: 4pt;\n\t\t\t\t\t\t\t\tbox-shadow: 0 1px 3px rgba(0,0,0,.12),0 1px 2px rgba(0,0,0,.24);\n\t\t\t\t\t\t\t\ttransition: box-shadow .1s ease-out;\n\t\t\t\t\t\t\t\ttransition: box-shadow .1s ease-out,-webkit-box-shadow .1s ease-out;\n\t\t\t\t\t\t\t\tmargin-bottom: 10px;\n\t\t\t\t\t\t\t\tjustify-content: space-between;\n\t\t\t\t\t\t\t\tfont-size: 10px;\n\t\t\t\t\t\t\t\">\n\t\t\t\t\t\t\t\t<div>Temperature, °C</div>\n\t\t\t\t\t\t\t\t<div style=\"\n\t\t\t\t\t\t\t\t\tmargin-left: 10px;\n\t\t\t\t\t\t\t\t\tdisplay: flex;\n\t\t\t\t\t\t\t\t\tflex-direction: column;\n\t\t\t\t\t\t\t\t\">\n\t\t\t\t\t\t\t\t\t<div style=\"width: 260px; display: flex; justify-content: space-between;\" class=\"scale-dividers\" >\n\t\t\t\t\t\t\t\t\t\t<div>-40</div><div>-20</div><div>0</div><div>20</div><div>40</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div style=\"\n\t\t\t\t\t\t\t\t\t\twidth: 260px;\n\t\t\t\t\t\t\t\t\t\theight: 5px;\n\t\t\t\t\t\t\t\t\t\tbackground-image: linear-gradient(to right, rgb(159, 85, 181) 0%, rgb(44, 106, 187) 8.75%, rgb(82, 139, 213) 12.5%, rgb(103, 163, 222) 18.75%, rgb(142, 202, 240) 25%, rgb(155, 213, 244) 31.25%, rgb(172, 225, 253) 37.5%, rgb(194, 234, 255) 43.75%, rgb(255, 255, 208) 50%, rgb(254, 248, 174) 56.25%, rgb(254, 232, 146) 62.5%, rgb(254, 226, 112) 68.75%, rgb(253, 212, 97) 75%, rgb(244, 168, 94) 82.5%, rgb(244, 129, 89) 87.5%, rgb(244, 104, 89) 93.75%, rgb(244, 76, 73) 100%);\n\t\t\t\t\t\t\t\t\t\" />\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</Control>}\n\n\t\t\t\t\t\t{visibleLayers.Precipitation && <Control position='bottomright'>\n\t\t\t\t\t\t\t<div style=\"\n\t\t\t\t\t\t\t\tcolor: #48484a;\n\t\t\t\t\t\t\t\tdisplay: flex;\n\t\t\t\t\t\t\t\talign-items: center;\n\t\t\t\t\t\t\t\tpadding: 2pt 4pt;\n\t\t\t\t\t\t\t\tbackground-color: #fff;\n\t\t\t\t\t\t\t\tborder-radius: 4pt;\n\t\t\t\t\t\t\t\tbox-shadow: 0 1px 3px rgba(0,0,0,.12),0 1px 2px rgba(0,0,0,.24);\n\t\t\t\t\t\t\t\ttransition: box-shadow .1s ease-out;\n\t\t\t\t\t\t\t\ttransition: box-shadow .1s ease-out,-webkit-box-shadow .1s ease-out;\n\t\t\t\t\t\t\t\tmargin-bottom: 10px;\n\t\t\t\t\t\t\t\tjustify-content: space-between;\n\t\t\t\t\t\t\t\tfont-size: 10px;\n\t\t\t\t\t\t\t\">\n\t\t\t\t\t\t\t\t<div>Precipitation, mm/h</div>\n\t\t\t\t\t\t\t\t<div style=\"\n\t\t\t\t\t\t\t\t\tmargin-left: 10px;\n\t\t\t\t\t\t\t\t\tdisplay: flex;\n\t\t\t\t\t\t\t\t\tflex-direction: column;\n\t\t\t\t\t\t\t\t\">\n\t\t\t\t\t\t\t\t\t<div style=\"width: 260px; display: flex; justify-content: space-between;\" class=\"scale-dividers\" >\n\t\t\t\t\t\t\t\t\t\t<div>0</div><div>0.5</div><div>1</div><div>2</div><div>4</div><div>6</div><div>7</div><div>10</div><div>12</div><div>14</div><div>16</div><div>24</div><div>32</div><div>60</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div style=\"\n\t\t\t\t\t\t\t\t\t\twidth: 260px;\n\t\t\t\t\t\t\t\t\t\theight: 5px;\n\t\t\t\t\t\t\t\t\t\tbackground: rgba(0, 0, 0, 0) linear-gradient(to left, rgb(170, 43, 195), rgb(255, 0, 146), rgb(255, 0, 100), rgb(255, 0, 0), rgb(255, 91, 0), rgb(255, 150, 0), rgb(255, 205, 0), rgb(239, 248, 0), rgb(0, 70, 0), rgb(0, 90, 0), rgb(0, 160, 0), rgb(0, 211, 0), rgb(0, 250, 100), rgba(0, 0, 0, 0)) repeat scroll 0% 0%;\n\t\t\t\t\t\t\t\t\t\" />\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</Control>}\n\n\t\t\t\t\t\t{visibleLayers['Snow depth'] && <Control position='bottomright'>\n\t\t\t\t\t\t\t<div style=\"\n\t\t\t\t\t\t\t\tcolor: #48484a;\n\t\t\t\t\t\t\t\tdisplay: flex;\n\t\t\t\t\t\t\t\talign-items: center;\n\t\t\t\t\t\t\t\tpadding: 2pt 4pt;\n\t\t\t\t\t\t\t\tbackground-color: #fff;\n\t\t\t\t\t\t\t\tborder-radius: 4pt;\n\t\t\t\t\t\t\t\tbox-shadow: 0 1px 3px rgba(0,0,0,.12),0 1px 2px rgba(0,0,0,.24);\n\t\t\t\t\t\t\t\ttransition: box-shadow .1s ease-out;\n\t\t\t\t\t\t\t\ttransition: box-shadow .1s ease-out,-webkit-box-shadow .1s ease-out;\n\t\t\t\t\t\t\t\tmargin-bottom: 10px;\n\t\t\t\t\t\t\t\tjustify-content: space-between;\n\t\t\t\t\t\t\t\tfont-size: 10px;\n\t\t\t\t\t\t\t\">\n\t\t\t\t\t\t\t\t<div>Snow depth (m)</div>\n\t\t\t\t\t\t\t\t<div style=\"\n\t\t\t\t\t\t\t\t\tmargin-left: 10px;\n\t\t\t\t\t\t\t\t\tdisplay: flex;\n\t\t\t\t\t\t\t\t\tflex-direction: column;\n\t\t\t\t\t\t\t\t\">\n\t\t\t\t\t\t\t\t\t<div style=\"width: 260px; display: flex; justify-content: space-between;\" class=\"scale-dividers\" >\n\t\t\t\t\t\t\t\t\t\t<div>0.05</div>\n\t\t\t\t\t\t\t\t\t\t<div>0.4</div>\n\t\t\t\t\t\t\t\t\t\t<div>0.8</div>\n\t\t\t\t\t\t\t\t\t\t<div>1.8</div>\n\t\t\t\t\t\t\t\t\t\t<div>15</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div style=\"\n\t\t\t\t\t\t\t\t\t\twidth: 260px;\n\t\t\t\t\t\t\t\t\t\theight: 5px;\n\t\t\t\t\t\t\t\t\t\tbackground: linear-gradient(to right, #EDEDED, #D9F0F4, #A5E5EF, #7DDEED, #35D2EA, #00CCE8, #706DCE, #514FCC, #3333CC, #1818CC, #C454B7, #C12CB0, #BF00A8, #85408C, #7F2389, #790087, #E80068) repeat scroll 0% 0%;\n\t\t\t\t\t\t\t\t\t\" />\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</Control>}\n\n\t\t\t\t\t\t{visibleLayers['Atmospheric pressure'] && <Control position='bottomright'>\n\t\t\t\t\t\t\t<div style=\"\n\t\t\t\t\t\t\t\tcolor: #48484a;\n\t\t\t\t\t\t\t\tdisplay: flex;\n\t\t\t\t\t\t\t\talign-items: center;\n\t\t\t\t\t\t\t\tpadding: 2pt 4pt;\n\t\t\t\t\t\t\t\tbackground-color: #fff;\n\t\t\t\t\t\t\t\tborder-radius: 4pt;\n\t\t\t\t\t\t\t\tbox-shadow: 0 1px 3px rgba(0,0,0,.12),0 1px 2px rgba(0,0,0,.24);\n\t\t\t\t\t\t\t\ttransition: box-shadow .1s ease-out;\n\t\t\t\t\t\t\t\ttransition: box-shadow .1s ease-out,-webkit-box-shadow .1s ease-out;\n\t\t\t\t\t\t\t\tmargin-bottom: 10px;\n\t\t\t\t\t\t\t\tjustify-content: space-between;\n\t\t\t\t\t\t\t\tfont-size: 10px;\n\t\t\t\t\t\t\t\">\n\t\t\t\t\t\t\t\t<div>Atmospheric pressure (hPa)</div>\n\t\t\t\t\t\t\t\t<div style=\"\n\t\t\t\t\t\t\t\t\tmargin-left: 10px;\n\t\t\t\t\t\t\t\t\tdisplay: flex;\n\t\t\t\t\t\t\t\t\tflex-direction: column;\n\t\t\t\t\t\t\t\t\">\n\t\t\t\t\t\t\t\t\t<div style=\"width: 260px; display: flex; justify-content: space-between;\" class=\"scale-dividers\" >\n\t\t\t\t\t\t\t\t\t\t<div>940</div>\n\t\t\t\t\t\t\t\t\t\t<div>980</div>\n\t\t\t\t\t\t\t\t\t\t<div>1010</div>\n\t\t\t\t\t\t\t\t\t\t<div>1040</div>\n\t\t\t\t\t\t\t\t\t\t<div>1080</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div style=\"\n\t\t\t\t\t\t\t\t\t\twidth: 260px;\n\t\t\t\t\t\t\t\t\t\theight: 5px;\n\t\t\t\t\t\t\t\t\t\tbackground: linear-gradient(to right, #0073FF,#00AAFF,#4BD0D6,#8DE7C7,#B0F720,#F0B800,#FB5515,#F3363B,#C60000) repeat scroll 0% 0%;\n\t\t\t\t\t\t\t\t\t\" />\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</Control>}\n\n\n\t\t\t\t\t\t{/* <ImageOverlay\n\t\t\t\t\t\t\turl='./assets/515-overlay-v2.png'\n\t\t\t\t\t\t\tbounds={[\n\t\t\t\t\t\t\t\t[52.056765505175235, 15.068457126617433],\n\t\t\t\t\t\t\t\t[52.04421634105194, 15.105557441711428],\n\t\t\t\t\t\t\t]}\n\t\t\t\t\t\t/> */}\n\t\t\t\t\t\t{heatmap && heatmap.length > 0 && <HeatmapLayer\n\t\t\t\t\t\t\tfitBoundsOnLoad={!hasWaypoints}\n\t\t\t\t\t\t\tfitBoundsOnUpdate={false}\n\t\t\t\t\t\t\tpoints={heatmap}\n\t\t\t\t\t\t\tlongitudeExtractor={m => m[1]}\n\t\t\t\t\t\t\tlatitudeExtractor={m => m[0]}\n\t\t\t\t\t\t\tintensityExtractor={m => parseFloat(m[2])}\n\t\t\t\t\t\t/>}\n\n\t\t\t\t\t\t{showTrackProfile && <>\n\t\t\t\t\t\t\t{track && track.length > 0 && <ReactLeafletMultiOptionsPolyline\n\t\t\t\t\t\t\t\tref={this.polyRef}\n\t\t\t\t\t\t\t\tpositions={this.polylinetrackPointFactory(track)}\n\t\t\t\t\t\t\t\toptionIdxFn={this.polylineOptionIdxFn}\n\t\t\t\t\t\t\t\toptions={this.polylineOptions()}\n\t\t\t\t\t\t\t\tweight={7}\n\t\t\t\t\t\t\t\tlineCap='butt'\n\t\t\t\t\t\t\t\topacity={0.75}\n\t\t\t\t\t\t\t\tsmoothFactor={1}\n\t\t\t\t\t\t\t\tzoomAnimation={true}\n\t\t\t\t\t\t\t\tkey={`${mapColorMode}`}\n\t\t\t\t\t\t\t/>}\n\t\t\t\t\t\t</>}\n\n\t\t\t\t\t\t{geoJSONs && geoJSONs.length > 0 && geoJSONs.map((gj, idx) => <GeoJSON\n\t\t\t\t\t\t\tdata={gj}\n\t\t\t\t\t\t\tstyle={() => this.geoJSONStyleList(idx)}\n\t\t\t\t\t\t/>)}\n\n\t\t\t\t\t\t{!skipGeojson && geojson && startMarker && <GeoJSON\n\t\t\t\t\t\t\tdata={geojson}\n\t\t\t\t\t\t\tstyle={this.geoJSONStyle}\n\t\t\t\t\t\t\tonEachFeature={this.onEachFeature}\n\t\t\t\t\t\t\tonAdd={zoomToMarkers && zoomToMarkers.length > 0 ? null : this.zoomToGeoJSON}\n\t\t\t\t\t\t/>}\n\n\n\t\t\t\t\t\t{startMarker && <Marker position={startMarker} icon={icons.get('marker')}>\n\t\t\t\t\t\t\t<Popup>\n\t\t\t\t\t\t\t\tStart position: {util.format(startMarker[0], 4)}, {util.format(startMarker[1], 4)}\n\t\t\t\t\t\t\t</Popup>\n\t\t\t\t\t\t</Marker>}\n\t\t\t\t\t\t{endMarker && <Marker position={endMarker} icon={icons.get('flag')}>\n\t\t\t\t\t\t\t<Popup>\n\t\t\t\t\t\t\t\tEnd position: {util.format(endMarker[0], 4)}, {util.format(endMarker[1], 4)}\n\t\t\t\t\t\t\t</Popup>\n\t\t\t\t\t\t</Marker>}\n\n\t\t\t\t\t\t{showDistanceMarkers && distanceMarkers && distanceMarkers.length > 0 && <>\n\t\t\t\t\t\t\t{distanceMarkers.length > 0 && distanceMarkers.map(wp => (\n\t\t\t\t\t\t\t\t<Marker\n\t\t\t\t\t\t\t\t\tposition={[wp.lat, wp.lng]}\n\t\t\t\t\t\t\t\t\tdraggable={false}\n\t\t\t\t\t\t\t\t\ticon={icons.getDistanceMarker({\n\t\t\t\t\t\t\t\t\t\ttitle: wp.title,\n\t\t\t\t\t\t\t\t\t\tbody: wp.body,\n\t\t\t\t\t\t\t\t\t\tcolor: wp.color,\n\t\t\t\t\t\t\t\t\t\ttextColor: darkmode ? '#333' : '#333',\n\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<Popup position={[wp.lat, wp.lng]}>\n\t\t\t\t\t\t\t\t\t\t<h5>{wp.title}</h5>\n\t\t\t\t\t\t\t\t\t\t<Markdown markdown={wp.body} markdownOpts={MARKDOWN_OPTIONS} />\n\t\t\t\t\t\t\t\t\t</Popup>\n\t\t\t\t\t\t\t\t</Marker>\n\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t</>}\n\n\t\t\t\t\t\t{waypoints3.length > 0 && waypoints3.reverse().map((wp, idx) => (\n\t\t\t\t\t\t\t<Marker\n\t\t\t\t\t\t\t\tposition={[wp.lat, wp.lng]}\n\t\t\t\t\t\t\t\tdraggable={false}\n\t\t\t\t\t\t\t\ticon={icons.getSmallMarker({\n\t\t\t\t\t\t\t\t\ticon: wp.icon || 'marker',\n\t\t\t\t\t\t\t\t\tbib: wp.bib,\n\t\t\t\t\t\t\t\t\tflag: wp.flag,\n\t\t\t\t\t\t\t\t\ttitle: wp.title,\n\t\t\t\t\t\t\t\t\tbody: wp.body,\n\t\t\t\t\t\t\t\t\tcolor: wp.color,\n\t\t\t\t\t\t\t\t\ttextColor: wp.textColor,\n\t\t\t\t\t\t\t\t\tmapChecked,\n\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\tonClick={(e) => this.handleMarker3Click({ ...wp, e })}\n\t\t\t\t\t\t\t\tzIndexOffset={100 + idx}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{/* <Popup position={[wp.lat, wp.lng]}>\n\t\t\t\t\t\t\t\t\t<h5><Markdown markdown={wp.title} markdownOpts={MARKDOWN_OPTIONS} /></h5>\n\t\t\t\t\t\t\t\t\t<Markdown markdown={wp.body} markdownOpts={MARKDOWN_OPTIONS} />\n\t\t\t\t\t\t\t\t</Popup> */}\n\t\t\t\t\t\t\t</Marker>\n\t\t\t\t\t\t))}\n\n\t\t\t\t\t\t{groupWaypoints ? <>\n\t\t\t\t\t\t\t<MarkerClusterGroup\n\t\t\t\t\t\t\t\tmaxClusterRadius={10}\n\t\t\t\t\t\t\t\ticonCreateFunction={createClusterCustomIcon}\n\t\t\t\t\t\t\t\tanimate={true}\n\t\t\t\t\t\t\t\tfitBoundsOnLoad={zoomToWaypoints}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{waypoints2.length > 0 && waypoints2.reverse().map((wp, idx) => (\n\t\t\t\t\t\t\t\t\t<Marker\n\t\t\t\t\t\t\t\t\t\tposition={[wp.lat, wp.lng]}\n\t\t\t\t\t\t\t\t\t\tdraggable={false}\n\t\t\t\t\t\t\t\t\t\ticon={icons.getMarker({\n\t\t\t\t\t\t\t\t\t\t\ticon: wp.icon || 'marker',\n\t\t\t\t\t\t\t\t\t\t\tbib: wp.bib,\n\t\t\t\t\t\t\t\t\t\t\tflag: wp.flag,\n\t\t\t\t\t\t\t\t\t\t\ttitle: wp.title,\n\t\t\t\t\t\t\t\t\t\t\tbody: wp.body,\n\t\t\t\t\t\t\t\t\t\t\tcolor: wp.color,\n\t\t\t\t\t\t\t\t\t\t\ttextColor: wp.textColor,\n\t\t\t\t\t\t\t\t\t\t\tmapChecked,\n\t\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\t\tonClick={(e) => this.handleMarker2Click({ ...wp, e })}\n\t\t\t\t\t\t\t\t\t\tzIndexOffset={200 + idx}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t{/* <Popup position={[wp.lat, wp.lng]}>\n\t\t\t\t\t\t\t\t\t\t\t<h5><Markdown markdown={wp.title} markdownOpts={MARKDOWN_OPTIONS} /></h5>\n\t\t\t\t\t\t\t\t\t\t\t<Markdown markdown={wp.body} markdownOpts={MARKDOWN_OPTIONS} />\n\t\t\t\t\t\t\t\t\t\t</Popup> */}\n\t\t\t\t\t\t\t\t\t</Marker>\n\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t</MarkerClusterGroup>\n\t\t\t\t\t\t\t<MarkerClusterGroup\n\t\t\t\t\t\t\t\tmaxClusterRadius={10}\n\t\t\t\t\t\t\t\ticonCreateFunction={createClusterCustomIcon}\n\t\t\t\t\t\t\t\tanimate={true}\n\t\t\t\t\t\t\t\tfitBoundsOnLoad={zoomToWaypoints}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{waypoints.length > 0 && waypoints.reverse().map((wp, idx) => (\n\t\t\t\t\t\t\t\t\t<Marker\n\t\t\t\t\t\t\t\t\t\tposition={[wp.lat, wp.lng]}\n\t\t\t\t\t\t\t\t\t\tdraggable={false}\n\t\t\t\t\t\t\t\t\t\ticon={icons.getRaceMarker({\n\t\t\t\t\t\t\t\t\t\t\tlargeMarkers,\n\t\t\t\t\t\t\t\t\t\t\ticon: wp.icon || 'marker',\n\t\t\t\t\t\t\t\t\t\t\tbib: wp.bib,\n\t\t\t\t\t\t\t\t\t\t\trank: wp.rank,\n\t\t\t\t\t\t\t\t\t\t\tspeed: wp.speed,\n\t\t\t\t\t\t\t\t\t\t\tbearing: wp.bearing,\n\t\t\t\t\t\t\t\t\t\t\temail: wp.email,\n\t\t\t\t\t\t\t\t\t\t\timage: wp.image,\n\t\t\t\t\t\t\t\t\t\t\tflag: wp.flag,\n\t\t\t\t\t\t\t\t\t\t\ttitle: wp.title,\n\t\t\t\t\t\t\t\t\t\t\tbody: wp.body,\n\t\t\t\t\t\t\t\t\t\t\tcolor: wp.color,\n\t\t\t\t\t\t\t\t\t\t\ttextColor: wp.textColor,\n\t\t\t\t\t\t\t\t\t\t\ticonWidth: 170,\n\t\t\t\t\t\t\t\t\t\t\ticonAnchorX: (idx % 2 === 0 ? 7 : 163),\n\t\t\t\t\t\t\t\t\t\t\ttitlePrefix: wp.currentState === 'rest' ? '💤' : '',\n\t\t\t\t\t\t\t\t\t\t\tmapChecked,\n\t\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\t\tonClick={(e) => this.handleMarkerClick({ ...wp, e })}\n\t\t\t\t\t\t\t\t\t\tzIndexOffset={300 + idx}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t{/* <Popup position={[wp.lat, wp.lng]}> */}\n\t\t\t\t\t\t\t\t\t\t\t{/* <h5><Markdown markdown={wp.title} markdownOpts={MARKDOWN_OPTIONS} /></h5>\n\t\t\t\t\t\t\t\t\t\t\t<Markdown markdown={wp.body} markdownOpts={MARKDOWN_OPTIONS} /> */}\n\t\t\t\t\t\t\t\t\t\t{/* </Popup> */}\n\t\t\t\t\t\t\t\t\t</Marker>\n\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t</MarkerClusterGroup>\n\t\t\t\t\t\t</> : <>\n\t\t\t\t\t\t\t{waypoints2.length > 0 && waypoints2.reverse().map((wp, idx) => (\n\t\t\t\t\t\t\t\t<Marker\n\t\t\t\t\t\t\t\t\tposition={[wp.lat, wp.lng]}\n\t\t\t\t\t\t\t\t\tdraggable={false}\n\t\t\t\t\t\t\t\t\ticon={icons.getMarker({\n\t\t\t\t\t\t\t\t\t\ticon: wp.icon || 'marker',\n\t\t\t\t\t\t\t\t\t\tbib: wp.bib,\n\t\t\t\t\t\t\t\t\t\tflag: wp.flag,\n\t\t\t\t\t\t\t\t\t\ttitle: wp.title,\n\t\t\t\t\t\t\t\t\t\tbody: wp.body,\n\t\t\t\t\t\t\t\t\t\tcolor: wp.color,\n\t\t\t\t\t\t\t\t\t\ttextColor: wp.textColor,\n\n\t\t\t\t\t\t\t\t\t\ticonWidth: largeMarkers ? 300 : 250,\n\t\t\t\t\t\t\t\t\t\ticonHeight: largeMarkers ? 30 : 20,\n\t\t\t\t\t\t\t\t\t\ticonAnchorX: largeMarkers ? 10 : 7,\n\t\t\t\t\t\t\t\t\t\ticonAnchorY: largeMarkers ? 10 : 7,\n\t\t\t\t\t\t\t\t\t\timageCirlceRadius: largeMarkers ? 20 : 14,\n\n\t\t\t\t\t\t\t\t\t\tlineHeight: largeMarkers ? '1.5em' : '1.1em',\n\t\t\t\t\t\t\t\t\t\tfontSize: largeMarkers ? '1.5em' : '1.1em',\n\t\t\t\t\t\t\t\t\t\tpaddingTop: largeMarkers ? '2px' : '3px',\n\t\t\t\t\t\t\t\t\t\tpaddingBottom: largeMarkers ? '2px' : '3px',\n\n\t\t\t\t\t\t\t\t\t\tmapChecked,\n\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\tonClick={(e) => this.handleMarker2Click({ ...wp, e })}\n\t\t\t\t\t\t\t\t\tzIndexOffset={200 + idx}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{/* <Popup position={[wp.lat, wp.lng]}>\n\t\t\t\t\t\t\t\t\t\t<h5><Markdown markdown={wp.title} markdownOpts={MARKDOWN_OPTIONS} /></h5>\n\t\t\t\t\t\t\t\t\t\t<Markdown markdown={wp.body} markdownOpts={MARKDOWN_OPTIONS} />\n\t\t\t\t\t\t\t\t\t</Popup> */}\n\t\t\t\t\t\t\t\t</Marker>\n\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t{waypoints.length > 0 && waypoints.reverse().map((wp, idx) => (\n\t\t\t\t\t\t\t\t<Marker\n\t\t\t\t\t\t\t\t\tposition={[wp.lat, wp.lng]}\n\t\t\t\t\t\t\t\t\tdraggable={false}\n\t\t\t\t\t\t\t\t\ticon={icons.getRaceMarker({\n\t\t\t\t\t\t\t\t\t\ticon: wp.icon || 'marker',\n\t\t\t\t\t\t\t\t\t\tbib: wp.bib,\n\t\t\t\t\t\t\t\t\t\tspeed: wp.speed,\n\t\t\t\t\t\t\t\t\t\tbearing: wp.bearing,\n\t\t\t\t\t\t\t\t\t\trank: wp.rank,\n\t\t\t\t\t\t\t\t\t\temail: wp.email,\n\t\t\t\t\t\t\t\t\t\timage: wp.image,\n\t\t\t\t\t\t\t\t\t\tflag: wp.flag,\n\t\t\t\t\t\t\t\t\t\ttitle: wp.title,\n\t\t\t\t\t\t\t\t\t\tbody: wp.body,\n\t\t\t\t\t\t\t\t\t\tcolor: wp.color,\n\t\t\t\t\t\t\t\t\t\ttextColor: wp.textColor,\n\n\t\t\t\t\t\t\t\t\t\ticonWidth: largeMarkers ? 300 : 170,\n\t\t\t\t\t\t\t\t\t\ticonHeight: largeMarkers ? 30 : 15,\n\t\t\t\t\t\t\t\t\t\ticonAnchorX: largeMarkers ? (idx % 2 === 0 ? 10 : 290) : (idx % 2 === 0 ? 7 : 163),\n\t\t\t\t\t\t\t\t\t\ticonAnchorY: largeMarkers ? 10 : 5,\n\t\t\t\t\t\t\t\t\t\timageCirlceRadius: largeMarkers ? 20 : 10,\n\n\t\t\t\t\t\t\t\t\t\tlineHeight: largeMarkers ? '1.5em' : '0.9em',\n\t\t\t\t\t\t\t\t\t\tfontSize: largeMarkers ? '1.5em' : '0.9em',\n\t\t\t\t\t\t\t\t\t\tpaddingTop: largeMarkers ? '2px' : '3px',\n\t\t\t\t\t\t\t\t\t\tpaddingBottom: largeMarkers ? '2px' : '3px',\n\n\t\t\t\t\t\t\t\t\t\ttitlePrefix: wp.currentState === 'rest' ? '💤' : '',\n\t\t\t\t\t\t\t\t\t\tmapChecked,\n\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\tonClick={(e) => this.handleMarkerClick({ ...wp, e })}\n\t\t\t\t\t\t\t\t\tzIndexOffset={300 + idx}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{/* <Popup position={[wp.lat, wp.lng]}> */}\n\t\t\t\t\t\t\t\t\t\t{/* <h5><Markdown markdown={wp.title} markdownOpts={MARKDOWN_OPTIONS} /></h5>\n\t\t\t\t\t\t\t\t\t\t<Markdown markdown={wp.body} markdownOpts={MARKDOWN_OPTIONS} /> */}\n\t\t\t\t\t\t\t\t\t{/* </Popup> */}\n\t\t\t\t\t\t\t\t</Marker>\n\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t</>}\n\t\t\t\t\t</Map>\n\n\t\t\t\t\t{/* {showSearch && <div class='position-absolute' style='bottom: 20px; right: 5px; z-index: 999999;'>\n\t\t\t\t\t\t<button type='button' class='btn btn-sm btn-info' onClick={this.zoomToAllMarkers}><i class='fas fa-search' /></button>\n\t\t\t\t\t\t<button type='button' class='btn btn-sm btn-success ml-1' onClick={this.zoomToFavoriteMarkers}><i class='fas fa-search-location' /></button>\n\t\t\t\t\t</div>} */}\n\t\t\t\t\t{waypoints.length > 0 && <div class='position-absolute' style='bottom: 20px; right: 5px; z-index: 999999;'>\n\t\t\t\t\t\t<button type='button' class='btn btn-sm btn-info' onClick={this.zoomToAllMarkers}><i class='fas fa-crosshairs' /></button>\n\t\t\t\t\t</div>}\n\t\t\t\t\t{waypoints.length >= 3 && <div class='position-absolute' style='bottom: 20px; right: 45px; z-index: 999999;'>\n\t\t\t\t\t\t<button type='button' class='btn btn-sm btn-info' onClick={this.zoomToFirst3Markers}><i class='fas fa-crosshairs' /> 3</button>\n\t\t\t\t\t</div>}\n\t\t\t\t\t{waypoints.length >= 10 && <div class='position-absolute' style='bottom: 20px; right: 105px; z-index: 999999;'>\n\t\t\t\t\t\t<button type='button' class='btn btn-sm btn-info' onClick={this.zoomToFirst10Markers}><i class='fas fa-crosshairs' /> 10</button>\n\t\t\t\t\t</div>}\n\n\t\t\t\t</div>\n\t\t\t\t{showRange && range && range.length > 0 && <>\n\t\t\t\t\t<div class='mb-4'>\n\t\t\t\t\t\t<div class='float-right mt-1'>\n\t\t\t\t\t\t\t<div class='px-1 py-0 float-left' style='line-height: 0.8em;'>\n\t\t\t\t\t\t\t\t<small>\n\t\t\t\t\t\t\t\t\t<small>\n\t\t\t\t\t\t\t\t\t\t{util.format(mapRangeMin, 0)}<span class='text-muted'>{mapColorMode === 'speed' ? 'km/t' : '%'}</span>\n\t\t\t\t\t\t\t\t\t</small>\n\t\t\t\t\t\t\t\t</small>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t{range && range.length > 0 && range.map((val, idx) => (\n\t\t\t\t\t\t\t\t<div class='float-left'>\n\t\t\t\t\t\t\t\t\t<div style={`background-color: ${colors[idx].color}; height: 13px; width: 10px;`} />\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t<div class='px-1 py-0 float-left' style='line-height: 0.8em;'>\n\t\t\t\t\t\t\t\t<small>\n\t\t\t\t\t\t\t\t\t<small>\n\t\t\t\t\t\t\t\t\t\t{util.format(mapRangeMax, 0)}<span class='text-muted'>{mapColorMode === 'speed' ? 'km/t' : '%'}</span>\n\t\t\t\t\t\t\t\t\t</small>\n\t\t\t\t\t\t\t\t</small>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t{/* <div class='float-right mt-1 clearfix'>\n\t\t\t\t\t\t\t<button class='btn btn-link' onClick={this.showSpeed}>Show speed</button>\n\t\t\t\t\t\t</div> */}\n\t\t\t\t\t</div>\n\t\t\t\t</>}\n\t\t\t</>\n\t\t);\n\t}\n}\n\nexport default App;\n\n","import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport { toJS } from 'mobx';\nimport { Text, Localizer, withText } from 'preact-i18n';\nimport Markdown from 'preact-markdown';\n\nimport Modal from '../modal';\nimport WorkoutComments from '../../components/workout/comments';\nimport WorkoutAddComment from '../../components/workout/commentAdd';\nimport ImageScroller from '../../components/imageScroller';\nimport DogScroller from '../../components/dog/scroller';\n\nimport Overlay from '../../components/overlay/';\nimport TeamsPublicDetail from '../../routes/teams/publicDetail';\nimport DogPublicDetail from '../../routes/dogs/publicDetail';\n\nimport LikesAndComments from '../../components/feedback/likesAndComments';\nimport Views from '../../components/feedback/views';\n\nimport Speed from '../../components/data/speed';\nimport Elevation from '../../components/data/elevation';\nimport Weight from '../../components/data/weight';\nimport Distance from '../../components/data/distance';\nimport Temperature from '../../components/data/temperature';\n\nimport mu from '../../lib/musher-util';\n\nconst MAX_LOADINDEX = mu.getMaxLoadIndex();\n\nfunction getWorkoutColor(workout) {\n\tswitch (workout.type) {\n\t\tcase 1:\n\t\t\treturn 'border-primary';\n\t\tcase 2:\n\t\t\treturn 'border-danger';\n\t\tcase 3:\n\t\t\treturn 'border-success';\n\t\tcase 4:\n\t\t\treturn 'border-info';\n\t\tdefault:\n\t\t\treturn 'border-warning';\n\t}\n}\n\nfunction getWorkoutIcon(workout) {\n\tswitch (workout.type) {\n\t\tcase 1:\n\t\t\treturn 'fas fa-running';\n\t\tcase 2:\n\t\t\treturn 'fas fa-flag-checkered';\n\t\tcase 3:\n\t\t\treturn 'fas fa-hiking';\n\t\tcase 4:\n\t\t\treturn 'fas fa-futbol';\n\t\tdefault:\n\t\t\treturn 'fas fa-hiking';\n\t}\n}\n\nfunction displayDistance(distanceKm) {\n\tif (distanceKm < 5) {\n\t\treturn util.format(distanceKm, 2);\n\t}\n\tif (distanceKm < 10) {\n\t\treturn util.format(distanceKm, 1);\n\t}\n\treturn util.format(distanceKm, 1);\n}\n\nconst initialState = {\n\tshowAddComment: false,\n    viewImageIdx: {},\n    likeWorkout: {},\n};\n\n@observer\nclass Workout extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            ...initialState,\n        };\n        this.updateTimer = {};\n\t\tthis.inputRef = {};\n    }\n\n    toggleDate = (e) => {\n        e.stopPropagation();\n        e.preventDefault();\n        const { showDate } = this.state;\n        this.setState({ showDate: !showDate });\n    }\n\n\n\tlikeWorkout = async () => {\n\t\tconst { workoutStore } = this.props.stores;\n        const { workout } = this.props;\n        const workoutId = workout.id;\n\n        const { likeWorkout } = this.state;\n        likeWorkout[workoutId] = true;\n        this.setState({ likeWorkout });\n        setTimeout(() => {\n            const { likeWorkout } = this.state;\n            delete likeWorkout[workoutId];\n            this.setState({ likeWorkout });\n        }, 1200);\n\n\t\tconst response = await workoutStore.likeWorkout({ id: workoutId });\n        if (response && response.status === 200) {\n\n\t\t}\n\t}\n\n\ttoggleAddComment = (e) => {\n\t\tconst workoutId = e.target.parentElement.dataset.id || e.target.dataset.id;\n\t\tconst { showAddComment } = this.state;\n\t\tthis.setState({\n\t\t\tshowAddComment: !showAddComment,\n\t\t}, () => {\n\t\t\tif (this.inputRef[workoutId]) {\n\t\t\t\tthis.inputRef[workoutId].focus();\n\t\t\t}\n\t\t});\n\t}\n\n    viewImage = (e) => {\n\t\tconst { id, idx } = e.target.closest('img').dataset;\n        const { viewImageIdx } = this.state;\n        viewImageIdx[id] = idx;\n        this.setState({ viewImageIdx });\n    }\n\n    shareLink = (e) => {\n        const { url, title, text } = e.target.closest('button').dataset;\n        const { appState } = this.props.stores;\n        appState.shareUrl({ url, title, text });\n    }\n\n        // Overlay functions\n    onTeamClick = (e, teamid) => {\n        e.preventDefault();\n        e.stopPropagation();\n        this.setState({\n            showTeam: teamid,\n        });\n        return false;\n    }\n\n    hideTeam = () => {\n        this.setState({\n            showTeam: null,\n        });\n    }\n\n    onUserClick = (e, userid) => {\n        e.preventDefault();\n        e.stopPropagation();\n        return false;\n    }\n\n    onDogClick = (e, dogid, dogs) => {\n        e.preventDefault();\n        e.stopPropagation();\n        this.setState({\n            showDog: dogid,\n            dogs,\n        });\n        return false;\n    }\n\n    hideDog = () => {\n        this.setState({\n            showDog: null,\n        });\n    }\n\n    render() {\n        const {\n            showDate,\n            showAddComment,\n            viewImageIdx = {},\n            likeWorkout,\n            dogs,\n            showTeam,\n            showDog,\n        } = this.state;\n        const {\n            workout,\n            showDate: forceShowDate,\n            wrapperClasses = 'col-12 col-sm-8 col-lg-6 offset-sm-2 offset-lg-3',\n            wrapperClassesRow = 'row',\n        } = this.props;\n\t\tconst { userStore, appState, workoutStore } = this.props.stores;\n        const { viewmode, hasShareApi } = appState;\n        const { user, dogs: allDogs } = userStore;\n        const { language = 'en' } = user;\n        const intensity = userStore.findIntensity({ code: workout.intensity, language }) || {};\n        // const teamName = userStore.findTeam(workout.team);\n        const team = userStore.findTeam(workout.team, true) || {};\n        const teamName = team.name;\n        // const teamNames = workout.teams ? workout.teams.map(e => userStore.findTeam(e)) : [];\n        const teamNames = [];\n        if (teamName) {\n            teamNames.push(teamName);\n        }\n        if (workout.teams) {\n            workout.teams.forEach((e) => {\n                if (userStore.findTeam(e)) {\n                    teamNames.push(userStore.findTeam(e));\n                }\n            });\n        }\n\n        const { likes = [], comments = [] } = workout;\n\t\tconst hasLikedWorkout = workout.likes && workout.likes.findIndex(e => e.user === user.id) > -1;\n        const { gpxInfo = {}, mushers = [] } = workout;\n\t\tconst { loadIndex = 0 } = gpxInfo;\n        const workoutEquipment = userStore.findEquipment({ equipment: workout.equipment, language });\n        const workoutEquipmentIcon = userStore.findEquipment({ equipment: workout.equipment, field: 'icon' });\n\n        const musherImages = [];\n        if (mushers.length > 1) {\n            mushers.slice(1, 10).map((musher) => {\n                const u = workoutStore.findPublicUser(musher) || {};\n                if (u.images && u.images[0]) {\n                    musherImages.push(u.images[0]);\n                }\n            });\n        }\n\n        const publicUser = workoutStore.findPublicUser(mushers[0]) || {};\n        let image;\n        if (publicUser && publicUser.images && publicUser.images[0]) {\n            image = publicUser.images[0];\n        } else if (team.image && team.image.s3SmallLink) {\n            image = team.image;\n        } else if (team.images && team.images[0] && team.images[0].s3SmallLink) {\n            image = team.images[0];\n        } else if (workout.image && workout.image.s3SmallLink) {\n            image = workout.image;\n        }\n\n        const images = [];\n        if (workout.mapImage) {\n            images.push({\n                ...workout.mapImage,\n                type: 'map',\n            });\n        }\n        if (workout.images) {\n            const imgs = toJS(workout.images);\n            images.push(...imgs);\n        }\n        const imageIdx = viewImageIdx[workout.id] ? viewImageIdx[workout.id] : 0;\n        const currentImage = images && images[imageIdx] ? images[imageIdx] : null;\n\n        let batteryUsage;\n        if (workout && workout.gpxInfo && workout.gpxInfo.battegryLevelStart) {\n            batteryUsage = (workout.gpxInfo.battegryLevelStart - workout.gpxInfo.battegryLevelEnd) * 100;\n        }\n\n        const views = mu.getViews(workout.statistics);\n\n        // let temperature;\n        // let windSpeed;\n        // if (util.checkNested(workout, 'temperature')) {\n        //     const yr = toJS(workout.yr[0].instant.details);\n        //     // displayValue = `Yr.no: 🌡️ ${yr.air_temperature}°C, 💨 ${yr.wind_speed}m/s 🧭 ${mu.windDirection(yr.wind_from_direction)}, ☁️ ${yr.cloud_area_fraction}%, ${yr.air_pressure_at_sea_level}mb, 💦 ${yr.relative_humidity}%`;\n        //     temperature = `${yr.air_temperature}°C`;\n        //     windSpeed = `${yr.wind_speed}m/s`;\n        // }\n\t\t// // const loadMultiplier = loadIndex / 100;\n\n        return (<>\n\n            {showTeam && <Overlay>\n                <TeamsPublicDetail stores={this.props.stores} teamid={showTeam} marginTop={'0px;'} marginBottom={'0px;'} back={this.hideTeam} hideTeam={this.hideTeam} />\n            </Overlay>}\n\n            {showDog && <Overlay>\n                <DogPublicDetail stores={this.props.stores} dogid={showDog} marginTop={'0px;'} marginBottom={'0px;'} back={this.hideDog} dogs={dogs} />\n            </Overlay>}\n\n            <div class='w-100 mb-2'>\n                <div class={wrapperClassesRow}>\n\n                    <div class={`${wrapperClasses} d-flex mb-0 position-relative`}>\n\n                        {/* {workout.gpxInfo && <svg viewBox='0 0 300 300' style='top: 80px; left: 10px; width: 90px; height: 90px;' class='position-absolute'>\n                            <path d={`${workout.gpxInfo.svgMap}`} style='fill: none; stroke: #0063FF; stroke-width: 5; opacity: 0.3;' />\n                        </svg>} */}\n\n                        {/* {JSON.stringify(workout, null, 4)} */}\n                        <div class='text-center'>\n                            <div\n                                class={`position-relative text-center border rounded-circle imageRounded ${getWorkoutColor(workout)}`}\n                                style={`${image ? `background-image: url(\"${image.s3SmallLink}\"); background-size: cover;` : ''} border-width: 3px !important;`}\n                            >\n                                {!image && <i class={`${getWorkoutIcon(workout)} text-${intensity.class ? intensity.class : 'muted'} mt-3`} style='font-size: 40px;' />}\n\n                                {musherImages && musherImages.map((img, idx) => <>\n                                    <div\n                                        class='position-absolute rounded-circle imageRounded border imageRoundedThumb border-white'\n                                        style={`\n                                            background-image: url(\"${img.s3SmallLink}\");\n                                            background-size: cover;\n                                            bottom: -3px;\n                                            left: ${-5 + (idx * 10)}px;\n                                        `}\n                                    />\n                                </>)}\n                            </div>\n                            {workout.temperature !== 0 && <>\n                                <span class='text-muted font-weight-light'>\n                                    <Temperature stores={this.props.stores} value={workout.temperature} />\n                                </span>\n                            </>}\n                        </div>\n                        <div class='flex-grow-1 pl-3' style='line-height: 1.2em;'>\n                            <span class='float-right'>\n                                {workout.isLocked === 1 && <i class='fas fa-lock text-danger ml-3' />}\n                                {workout.isInProgress === 1 && <div class='spinner-grow text-success ml-3' role='status' />}\n                                {workout.isInProgress === 2 && <i class='fas fa-pause-circle text-warning ml-3' />}\n                            </span>\n                            <a class='stretched-link' href={`/workouts/${workout.id}`}>\n                                <h5 class='my-0 mb-1' style='line-height: 1.0em;'>\n                                    {workout.name}\n                                </h5>\n                            </a>\n                            {teamNames && teamNames.length > 0 && <small class='font-weight-lighter'>\n                                {teamNames.map((name, idx) => <>{idx > 0 ? ', ' : ''}{name}</>)}\n                            </small>}\n                            <br />\n                            <small class='text-muted'>\n                                {workout.date && <small onClick={this.toggleDate}>\n                                    {forceShowDate || showDate ? util.formatDate(workout.date, { locale: 'no-NB', hour12: false, hour: '2-digit', minute: '2-digit' }) : util.formatDistance(workout.date, new Date(), { locale: 'no-NB' })}\n                                </small>}\n                                <span class={`badge badge-${intensity.class} ml-2`}>{intensity.name}</span>\n                                {loadIndex > 0 && <span class={`ml-2 text-${mu.getLoadIndexColor(util.normalizeBetween(loadIndex, 0, MAX_LOADINDEX, 0, 100))}`}>\n                                    <i class='fas fa-hand-rock mr-1' />\n                                    {Math.floor(util.normalizeBetween(loadIndex, 0, MAX_LOADINDEX, 0, 100))} -&nbsp;\n                                    {mu.getLoadIndexText(util.normalizeBetween(loadIndex, 0, MAX_LOADINDEX, 0, 100))}\n                                </span>}\n                                <br />\n                            </small>\n                            <small>\n                                <div class='text-muted'>\n                                    {workout.garminId > 0 && <div class={`float-left mr-2 text-center border rounded-circle imageRounded imageRoundedIcon`} style={`background-image: url(\"./assets/garmin-connect.png\");`} />}\n                                    {workout.stravaId > 0&& <div class={`float-left mr-2 text-center border rounded-circle imageRounded imageRoundedIcon`} style={`background-image: url(\"./assets/strava-icon.png\");`} />}\n\n                                    {workout.equipment > 0 && <><i class={`${workoutEquipmentIcon} ml-2`} /> {workoutEquipment}</>}\n                                    {/* {workout.distanceKm > 0 && <><i class='fas fa-road ml-2' /> {displayDistance(workout.distanceKm)}km</>}\n                                    {workout.elevation > 0 && <><i class='fas fa-mountain ml-2' /> {util.format(workout.elevation, 0)}m</>} */}\n                                    {/* {workout.speedAvg > 0 && <><i class='fas fa-tachometer-alt ml-2' /> {util.format(workout.speedAvg, 1)}km/t</>} */}\n                                    {workout.dogs > 0 && <><i class='fas fa-dog ml-2' /> {workout.dogs.length}</>}\n                                    {workout.track > 0 && <><i class={`fas fa-map-marked text-${workout.track > 0 ? 'success' : 'danger'} ml-2`} /></>}\n                                    {workout.dogsLeft > 0 && <><i class={`fas fa-crosshairs text-${workout.dogsLeft && workout.dogsRight ? 'success' : 'danger'} ml-2`} /></>}\n                                    {workout.sledWeight > 0 && <>\n                                        <i class='fas fa-sleigh ml-2' /> <Weight stores={this.props.stores} value={workout.sledWeight} />\n                                    </>}\n                                    {batteryUsage > 0 && <span class='text-muted ml-2'><i class='fas fa-battery-three-quarters' /> {util.format(batteryUsage, 1)}% <Text id='workout.battery-used'>used</Text></span>}\n                                </div>\n                                {['beta', 'advanced'].indexOf(viewmode) > -1 && (\n                                    <span class='text-muted'>\n                                        <i class='fas fa-balance-scale' /> {util.format(workout.kcalBurnedTotal)} <Text id='workout.kcal'>kcal</Text>\n                                        <i class='fas fa-drumstick-bite ml-2' /> <Weight stores={this.props.stores} value={workout.kcalMeatGramsTotal / 1000} />\n                                        <i class='fas fa-fish ml-2' /> <Weight stores={this.props.stores} value={workout.kcalSalmonGramsTotal / 1000} />\n                                        <i class='fas fa-piggy-bank ml-2' /> <Weight stores={this.props.stores} value={workout.kcalFatGramsTotal / 1000} />\n                                    </span>\n                                )}\n                            </small>\n                        </div>\n                    </div>\n                    <div class={`${wrapperClasses} position-relative mt-2`}>\n                        <strong>\n                            {workout.description}\n                        </strong>\n                    </div>\n                    <div class={`${wrapperClasses} position-relative`}>\n                        <Markdown markdown={mu.replaceImages(workout.comment, workout.images, language)} markdownOpts={mu.getMarkdownOptions()} />\n                    </div>\n                    <div class={`${wrapperClasses} d-flex mb-0 position-relative`}>\n                        <div class='container-fluid px-0'>\n                            <div class='row mt-1'>\n                                {workout.distanceKm > 0 && <div class='col-3'>\n                                    <div class='text-overflow'>\n                                        <small><i class='fas fa-road' /> <Text id='workout.calendar.distance'>Distanse</Text></small>\n                                    </div>\n                                    <div class='text-overflow font-weight-light' style='font-size: 1.2em;'>\n                                        <Distance stores={this.props.stores} value={workout.distanceKm} />\n                                    </div>\n                                </div>}\n                                {workout.elevation > 0 && <div class='col-3'>\n                                    <div class='text-overflow'>\n                                        <small><i class='fas fa-mountain' /> <Text id='workout.calendar.ascend'>Høydemeter</Text></small>\n                                    </div>\n                                    <div class='text-overflow font-weight-light' style='font-size: 1.2em;'>\n                                        <Elevation stores={this.props.stores} value={workout.elevation} />\n                                    </div>\n                                </div>}\n                                {workout.duration > 0 && <div class='col-3'>\n                                    <div class='text-overflow'>\n                                        <small><i class='fas fa-clock' /> <Text id='workout.calendar.duration'>Varighet</Text></small>\n                                    </div>\n                                    <div class='text-overflow font-weight-light' style='font-size: 1.2em;'>\n                                        {util.secToHms(workout.duration, true)}\n                                    </div>\n                                </div>}\n                                {workout.speedAvg > 0 && <div class='col-3'>\n                                    <div class='text-overflow'>\n                                        <small><i class='fas fa-tachometer-alt' /> <Text id='workout.calendar.avg-speed'>Snittfart</Text></small>\n                                    </div>\n                                    <div class='text-overflow font-weight-light' style='font-size: 1.2em;'>\n\t\t\t\t                        {workout.gpxInfo && workout.gpxInfo.avgGpsMovingSpeed > 0 ? <>\n                                            <Speed stores={this.props.stores} value={workout.gpxInfo.avgGpsMovingSpeed * 3.6} />\n                                        </> : <>\n                                            <Speed stores={this.props.stores} value={workout.speedAvg} />\n                                        </>}\n                                    </div>\n                                </div>}\n                            </div>\n                        </div>\n                    </div>\n\n                    {['beta', 'advanced', 'normal'].indexOf(viewmode) > -1 && (\n                        <div class={`${wrapperClasses}`}>\n                            <div class='container-fluid px-0 mt-1'>\n                                <div class='row'>\n                                    <ImageScroller stores={this.props.stores} images={images} id={workout.id} dblClick={this.likeWorkout} likeRef={likeWorkout} />\n                                </div>\n                            </div>\n                        </div>\n                    )}\n\n                    {['beta', 'advanced', 'normal'].indexOf(viewmode) > -1 && <>\n                        {workout.dogs && workout.dogs.length > 0 && <div class='container-fluid px-0 mt-1'>\n                            <div class='row pt-2'>\n                                <DogScroller stores={this.props.stores} dogs={workout.dogs} allDogs={allDogs} onDogClick={this.onDogClick} />\n                            </div>\n                        </div>}\n\n                        <div class='mt-2'>\n                            <LikesAndComments\n                                stores={this.props.stores}\n                                likes={likes}\n                                comments={comments}\n                                type='workout'\n                                onTeamClick={this.onTeamClick}\n                                onUserClick={this.onUserClick}\n                            />\n                        </div>\n\n                    </>}\n\n                    {['beta', 'advanced', 'normal'].indexOf(viewmode) > -1 && <>\n                        <div class={`${wrapperClasses} mb-0 position-relative mt-2`}>\n                            <div class='row'>\n                                <div class='col text-center'>\n                                    <button type='button' class={`btn btn-sm btn-outline-${hasLikedWorkout ? 'primary' : 'secondary'} btn-lg btn-block ${hasLikedWorkout ? 'text-primary' : ''}`}\n                                        onClick={this.likeWorkout}\n                                        // disabled={hasLikedWorkout}\n                                    >\n                                        <i class={`${hasLikedWorkout ? 'text-primary fas' : 'far'} fa-thumbs-up`} /> <Text id='comments.like'>Lik</Text>\n                                    </button>\n                                </div>\n                                <div class='col text-center'>\n                                    <button type='button' class='btn btn-sm btn-outline-secondary btn-lg btn-block'\n                                        data-id={workout.id}\n                                        onClick={this.toggleAddComment}\n                                    >\n                                        <i class='fas fa-comment' /> <Text id='comments.comment-add'>Kommentar</Text>\n                                    </button>\n                                </div>\n                                {hasShareApi ? <>\n                                    <div class='col text-center'>\n                                        <button class='btn btn-sm btn-outline-secondary btn-lg btn-block text-overflow'\n                                            onClick={this.shareLink}\n                                            data-url={`https://themusher.app/share/workout/${workout.uuidv4}`}\n                                            data-title={`title: ${workout.name}`}\n                                        >\n                                            <i class='fas fa-share' /> <Text id='workout.share'>Del</Text>\n                                        </button>\n                                    </div>\n                                </> : <>\n                                    <div class='col text-center'>\n                                        <a class='btn btn-sm btn-outline-secondary btn-lg btn-block text-overflow'\n                                            href={`https://themusher.app/share/workout/${workout.uuidv4}`}\n                                            target='_blank'\n                                            rel='noreferrer'\n                                            data-native\n                                        >\n                                            <i class='fas fa-share' /> <Text id='workout.share'>Del</Text>\n                                        </a>\n                                    </div>\n                                </>}\n                            </div>\n                        </div>\n\n                        <div class={`${wrapperClasses} mt-2 mb-3`}>\n                            {showAddComment && <WorkoutAddComment\n                                stores={this.props.stores}\n                                workout={workout}\n                                inputRef={c => this.inputRef[workout.id] = c}\n                                inputRefObject={this.inputRef}\n                                col='12'\n                                offset='0'\n                            />}\n                            <WorkoutComments stores={this.props.stores} workout={workout} col='10' offset='2' compact={true} />\n                        </div>\n\n                        {views > 0 && <>\n                            <div class='mt-2'>\n                                <Views\n                                    stores={this.props.stores}\n                                    views={views}\n                                    object={workout}\n                                    type='workout'\n                                    isTeamAdmin={true}\n                                    isAdmin={false}\n                                    onTeamClick={this.onTeamClick}\n                                    onUserClick={this.onUserClick}\n                                />\n                            </div>\n                        </>}\n\n                    </>}\n\n                </div>\n            </div>\n        </>);\n    }\n}\n\nexport default Workout;\n","import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport linkState from 'linkstate';\nimport { Text, Localizer, withText } from 'preact-i18n';\n\nimport Speed from '../../components/data/speed';\nimport Elevation from '../../components/data/elevation';\nimport Weight from '../../components/data/weight';\nimport Distance from '../../components/data/distance';\nimport Temperature from '../../components/data/temperature';\n\nimport mu from '../../lib/musher-util';\n\nconst RED_DAYS = [0, 6];\n\n@observer\nclass Calendar extends Component {\n\tsetFocus = () => {\n\t\tif (this.inputRef) {\n\t\t\tthis.inputRef.focus();\n\t\t}\n\t}\n\teditMonth = (e) => {\n\t\tconst month = e.target.parentElement.dataset.month || e.target.dataset.month;\n\t\tconst year = e.target.parentElement.dataset.year || e.target.dataset.year;\n\t\tconst distance = e.target.parentElement.dataset.distance || e.target.dataset.distance;\n\t\t// console.log({ month, year });\n\t\tthis.setState({\n\t\t\tshowInput: true,\n\t\t\tinputYear: year,\n\t\t\tinputMonth: month,\n\t\t\tinputDay: null,\n\t\t\tinputWeek: null,\n\t\t\tnewDistance: distance || null,\n\t\t}, () => this.setFocus());\n\t}\n\n\teditWeek = (e) => {\n\t\tconst week = e.target.parentElement.dataset.week || e.target.dataset.week;\n\t\tconst year = e.target.parentElement.dataset.year || e.target.dataset.year;\n\t\tconst distance = e.target.parentElement.dataset.distance || e.target.dataset.distance;\n\t\t// console.log({ week, year });\n\t\tthis.setState({\n\t\t\tshowInput: true,\n\t\t\tinputYear: year,\n\t\t\tinputWeek: week,\n\t\t\tinputMonth: null,\n\t\t\tinputDay: null,\n\t\t\tnewDistance: distance || null,\n\t\t}, () => this.setFocus());\n\t}\n\n\teditDay = (e) => {\n\t\tconst day = e.target.parentElement.dataset.day || e.target.dataset.day;\n\t\tconst month = e.target.parentElement.dataset.month || e.target.dataset.month;\n\t\tconst year = e.target.parentElement.dataset.year || e.target.dataset.year;\n\t\tconst week = e.target.parentElement.dataset.week || e.target.dataset.week;\n\t\tconst distance = e.target.parentElement.dataset.distance || e.target.dataset.distance;\n\t\t// console.log({ day, month, year });\n\t\tthis.setState({\n\t\t\tshowInput: true,\n\t\t\tinputYear: year,\n\t\t\tinputMonth: month,\n\t\t\tinputDay: day,\n\t\t\tinputWeek: week,\n\t\t\tnewDistance: distance || null,\n\t\t}, () => this.setFocus());\n\t}\n\n\tsaveDistance = async () => {\n\t\tconst { workoutPlanStore, workoutStore, userStore } = this.props.stores;\n\t\tconst { currentTeam } = workoutStore;\n\t\tconst teamName = userStore.findTeam(currentTeam) || '';\n\t\tconst { year, month } = this.props;\n\t\tconst { workoutPlans } = workoutPlanStore;\n\t\tconst workoutPlanCurrent = workoutPlans[0] || {};\n\t\tconst { inputYear, inputMonth, inputWeek, inputDay, newDistance } = this.state;\n\t\t// console.log({ showInput, inputYear, inputMonth, inputWeek, inputDay, newDistance });\n\n\t\tconst currentMonth = month || new Date().getMonth() + 1;\n\t\tconst currentYear = year || util.getYear();\n\t\tconst seasonStart = parseInt(currentMonth < 8 ? currentYear - 1 : currentYear, 10);\n\n\t\tif (!workoutPlanCurrent.id) {\n\t\t\tconst response = await workoutPlanStore.insert({\n\t\t\t\ttitle: `Workout plan for ${seasonStart} - ${seasonStart + 1}: ${teamName}`,\n\t\t\t\tteam: currentTeam,\n\t\t\t\tseasonYear: seasonStart,\n\t\t\t\tseasonMonth: 6,\n\t\t\t});\n\t\t\tconst { id: newId } = response.data;\n\t\t\tawait workoutPlanStore.load(newId);\n\t\t} else {\n\t\t\tawait workoutPlanStore.load(workoutPlanCurrent.id);\n\t\t}\n\t\tconst { workoutPlan } = workoutPlanStore;\n\t\tconst { id } = workoutPlan;\n\t\t// console.log({ id });\n\n\t\tlet field;\n\t\tif (inputYear) {\n\t\t\tif (inputDay) {\n\t\t\t\tfield = 'days';\n\t\t\t} else {\n\t\t\t\tfield = 'weeks';\n\t\t\t}\n\t\t}\n\t\tawait workoutPlanStore.saveField(id, field, {\n\t\t\tyear: inputYear,\n\t\t\tmonth: inputMonth,\n\t\t\tday: inputDay,\n\t\t\tweek: inputWeek,\n\t\t\tdistance: newDistance,\n\t\t});\n\t\tawait workoutPlanStore.load(id);\n\n\t\tthis.resetInput(true);\n\t}\n\n\tresetInput = (nextDay) => {\n\t\tif (nextDay) {\n\t\t\tconst { inputYear, inputMonth, inputDay } = this.state;\n\t\t\tconst nextDay = util.addDays(new Date(inputYear, inputMonth - 1, inputDay, 0, 0, 0, 0), 1);\n\t\t\tthis.setState({\n\t\t\t\tshowInput: true,\n\t\t\t\tinputYear: nextDay.getFullYear(),\n\t\t\t\tinputMonth: nextDay.getMonth() + 1,\n\t\t\t\tinputDay: nextDay.getDate(),\n\t\t\t\tinputWeek: util.getWeek(nextDay),\n\t\t\t\tnewDistance: null,\n\t\t\t});\n\t\t\tthis.setFocus();\n\t\t} else {\n\t\t\tthis.setState({\n\t\t\t\tshowInput: false,\n\t\t\t\tinputYear: null,\n\t\t\t\tinputMonth: null,\n\t\t\t\tinputDay: null,\n\t\t\t\tinputWeek: null,\n\t\t\t\tnewDistance: null,\n\t\t\t});\n\t\t}\n\t}\n\n\tcheckKeydown = (e) => {\n\t\tswitch (e.key) {\n\t\t\tcase 'Enter':\n\t\t\t\tthis.saveDistance();\n\t\t\t\tbreak;\n\n\t\t\tcase 'Escape':\n\t\t\t\tthis.resetInput();\n\t\t\t\tbreak;\n\t\t\n\t\t\tdefault:\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\tcomponentDidMount() {\n\t\tthis.updateWorkoutPlanTips();\n\t}\n\n\tupdateWorkoutPlanTips = () => {\n\t\t// console.log('updateWorkoutPlanTips');\n\t\tconst { userStore } = this.props.stores;\n\t\tconst { user = {} } = userStore;\n\t\tconst { settings = {} } = user;\n\t\tthis.setState({ hideWorkoutPlanTips: settings.hideWorkoutPlanTips });\n\t}\n\n\ttoggleTips = async () => {\n\t\tconst { hideWorkoutPlanTips } = this.state;\n\t\tconst { userStore } = this.props.stores;\n\t\tconst newValue = hideWorkoutPlanTips === 1 ? 0 : 1;\n\t\tthis.setState({ hideWorkoutPlanTips: newValue });\n\t\tawait userStore.updateSetting({ 'settings.hideWorkoutPlanTips': newValue }, { hideWorkoutPlanTips: newValue });\n\t}\n\n\trender() {\n\t\tconst { hideWorkoutPlanTips } = this.state;\n\t\tconst { appState, workoutPlanStore, userStore, workoutStore, teamStore } = this.props.stores;\n\t\tconst { user } = userStore;\n\t\tconst { language = 'en' } = user;\n\t\tconst { darkmode } = appState;\n\t\tconst DAYS = mu.getDays(language);\n\t\tconst MONTHS = mu.getMonths(language);\n\n\t\tconst { showInput, inputYear, inputMonth, inputWeek, inputDay, newDistance } = this.state;\n\n        const currentDay = new Date().getDate();\n        const currentMonth = new Date().getMonth() + 1;\n        const currentYear = new Date().getFullYear();\n\n\t\tconst currentEpoch = new Date().getTime();\n\t\tconst { month = currentMonth, year = currentYear, dog, basehref, showNavigation = true, showHeader = true, currentTeam } = this.props;\n\n\t\tconst seasonStart = parseInt(month < 8 ? year - 1 : year, 10);\n\n        const monthNum = parseInt(month, 10);\n        const yearNum = parseInt(year, 10);\n        const { month: nextMonth, year: nextYear } = mu.getNextMonth(monthNum, yearNum);\n        const { month: prevMonth, year: prevYear } = mu.getPrevMonth(monthNum, yearNum);\n\n        const daysOfMonth = util.getDaysInMonth(month, year);\n        const weeksInMonth = util.getWeeksInMonth(month, year);\n        const firstWeek = weeksInMonth[0].week;\n        const daysOfWeek = util.getDaysInWeek(firstWeek, year, month);\n        let totalDistanceKmMonth = 0;\n\t\tlet totalDistanceKmMonthPlan = 0;\n\t\tlet totalWorkoutDistanceKmMonth = 0;\n\n\t\tconst monthEpoch = daysOfMonth[daysOfMonth.length - 1].getTime();\n\t\tconst isMonthInTheFuture = monthEpoch > currentEpoch;\n\n\t\tconst summaryMonth = workoutPlanStore.findWorkoutPlanSummaryMonth(year, monthNum) || {};\n\t\tconst { workoutPlan, tips } = workoutPlanStore;\n\n\t\tconst tipsMonth = tips[`${year}-${util.padDate(month)}`];\n\t\tconst hasTipsMonth = tipsMonth && (tipsMonth.comments.length > 0 || tipsMonth.distance);\n\n\t\tconst team = teamStore.findTeam(currentTeam) || {};\n\n\t\treturn (\n\t\t\t<>\n                {showHeader && <>\n\t\t\t\t\t<div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-4 text-center'>\n\t\t\t\t\t\t{showNavigation && <a href={`${basehref || '/workouts/month/'}${nextMonth}/${nextYear}/skipScroll`} class='float-right btn btn-sm btn-outline-secondary ml-2'><i class='fas fa-arrow-right' /></a>}\n\t\t\t\t\t\t{showNavigation && <a href={`${basehref || '/workouts/month/'}${prevMonth}/${prevYear}/skipScroll`} class='float-left btn btn-sm btn-outline-secondary mr-2'><i class='fas fa-arrow-left' /></a>}\n\t\t\t\t\t\t<h3><Text id='workout.plan.month'>Måned</Text> - {MONTHS[month - 1]} {year} {summaryMonth.distance ? `- ${util.format(summaryMonth.distance, 0)} km` : ''}</h3>\n\t\t\t\t\t\t<h5 class='text-muted font-weight-light'><Text id='workout.plan.season'>Sesongen</Text> {seasonStart} - {seasonStart + 1}</h5>\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t{workoutPlan.id ? <>\n\t\t\t\t\t\t\t\t<small>{workoutPlan.title}</small>\n\t\t\t\t\t\t\t</> : <>\n\t\t\t\t\t\t\t\t<div class='display-4'>\n\t\t\t\t\t\t\t\t\t<i class='far fa-sad-tear text-muted' />\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<h5 class='font-weight-lighter text-muted'>\n\t\t\t\t\t\t\t\t\t<Text id='workout.plan.no-workout-plan-found' fields={{ name: team }}>Ingen plan</Text>\n\t\t\t\t\t\t\t\t</h5>\n\t\t\t\t\t\t\t\t<div class='text-muted'>\n\t\t\t\t\t\t\t\t\t<Text id='workout.plan.click-to-start'>Click on a date to get started.</Text>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</>}\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t{dog && <div>{dog.name}</div>}\n\t\t\t\t\t\t{/* <small>{util.isoDate(daysOfMonth[0], false, false, true)} - {util.isoDate(daysOfMonth[daysOfMonth.length - 1], false, false, true)}</small> */}\n\t\t\t\t\t</div>\n\t\t\t\t</>}\n\n                <div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3'>\n\t\t\t\t\t{!!(showInput && inputYear && inputWeek && !inputDay) && (\n\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t<div class='form-inline w-100'>\n\t\t\t\t\t\t\t\t<div class='form-group w-75 mr-3 mb-0'>\n\t\t\t\t\t\t\t\t\t<input class='form-control w-100 form-control' type='text' \n\t\t\t\t\t\t\t\t\t\tplaceholder={`Enter distance for ${inputYear} w${inputWeek}`}\n\t\t\t\t\t\t\t\t\t\tref={c => this.inputRef = c}\n\t\t\t\t\t\t\t\t\t\tonInput={linkState(this, 'newDistance')}\n\t\t\t\t\t\t\t\t\t\tonKeydown={this.checkKeydown}\n\t\t\t\t\t\t\t\t\t\tautocomplete='off'\n\t\t\t\t\t\t\t\t\t\tvalue={newDistance || ''}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<button type='button' class='btn btn-primary' onClick={this.saveDistance}><Text id='workout.plan.save'>Lagre</Text></button>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</>\n\t\t\t\t\t)}\n\t\t\t\t\t{!!(showInput && inputYear && inputMonth) && (\n\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t<div class='form-inline w-100'>\n\t\t\t\t\t\t\t\t<div class='form-group w-75 mr-3 mb-0'>\n\t\t\t\t\t\t\t\t\t<input class='form-control w-100 form-control' type='text'\n\t\t\t\t\t\t\t\t\t\tplaceholder={`Enter distance for ${inputYear}-${util.padDate(inputMonth)} ${inputDay ? `-${util.padDate(inputDay)}` : ''}`}\n\t\t\t\t\t\t\t\t\t\tref={c => this.inputRef = c}\n\t\t\t\t\t\t\t\t\t\tonInput={linkState(this, 'newDistance')}\n\t\t\t\t\t\t\t\t\t\tonKeydown={this.checkKeydown}\n\t\t\t\t\t\t\t\t\t\tautocomplete='off'\n\t\t\t\t\t\t\t\t\t\tvalue={newDistance || ''}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<button type='button' class='btn btn-primary' onClick={this.saveDistance}><Text id='workout.plan.save'>Lagre</Text></button>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</>\n\t\t\t\t\t)}\n\t\t\t\t</div>\n\n\t\t\t\t{language === 'no' && <>\n\t\t\t\t\t{hideWorkoutPlanTips ? <>\n\t\t\t\t\t\t<div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-4 d-flex justify-content-end'>\n\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\ttype='button'\n\t\t\t\t\t\t\t\tclass='btn btn-outline-primary btn-sm'\n\t\t\t\t\t\t\t\tonClick={this.toggleTips}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<i class='fas fa-eye' /> <Text id='workout.plan.show-tips'>Show tips</Text>\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</> : <>\n\t\t\t\t\t\t<div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-4 d-flex justify-content-end'>\n\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\ttype='button'\n\t\t\t\t\t\t\t\tclass='btn btn-primary btn-sm'\n\t\t\t\t\t\t\t\tonClick={this.toggleTips}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<i class='fas fa-eye-slash' /> <Text id='workout.plan.hide-tips'>Hide tips</Text>\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</>}\n\t\t\t\t</>}\n\n                <div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3'>\n\t\t\t\t\t<div class='table-responsive'>\n\t\t\t\t\t\t<table class='table table-striped table-sm'>\n\t\t\t\t\t\t\t<thead>\n\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t<th class='text-muted'><small><Text id='workout.plan.week'>Uke</Text></small></th>\n\t\t\t\t\t\t\t\t\t{daysOfWeek.map(day => <th><small>{DAYS[day.getDay()]}</small></th>)}\n\t\t\t\t\t\t\t\t\t<th class='text-muted'><small><Text id='workout.plan.sum'>Sum</Text></small></th>\n\t\t\t\t\t\t\t\t\t<th class='text-muted'><small><Text id='workout.plan.planned'>Plan</Text></small></th>\n\t\t\t\t\t\t\t\t\t{/* <th class='text-muted'>Totalt</th> */}\n\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t</thead>\n\t\t\t\t\t\t\t<tbody>\n\t\t\t\t\t\t\t\t{weeksInMonth && weeksInMonth.map(weekObj => {\n\t\t\t\t\t\t\t\t\tconst daysOfWeek = util.getDaysInWeek(weekObj.week, year, month);\n\t\t\t\t\t\t\t\t\tconst summaryWeek = workoutPlanStore.findWorkoutPlanSummaryWeek(util.asNumber(year), weekObj.week) || {};\n\t\t\t\t\t\t\t\t\tconst weekEpoch = daysOfWeek[6].getTime();\n\t\t\t\t\t\t\t\t\tconst isWeekInTheFuture = weekEpoch > currentEpoch;\n\t\t\t\t\t\t\t\t\tlet totalWeek = 0;\n\t\t\t\t\t\t\t\t\tlet totalWorkoutWeek = 0;\n\t\t\t\t\t\t\t\t\tif (summaryWeek.distance > 0) {\n\t\t\t\t\t\t\t\t\t\ttotalDistanceKmMonthPlan += summaryWeek.distance;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tconst tipsWeek = tips[`${year}-${util.padDate(month)}-w${util.padDate(weekObj.week)}`];\n\t\t\t\t\t\t\t\t\tconst hasTipsWeek = tipsWeek && (tipsWeek.comments.length > 0 || tipsWeek.distance);\n\n\t\t\t\t\t\t\t\t\treturn (<>\n\t\t\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t\t\t<td class={`text-right text-muted pt-3 border-right ${!inputDay && inputYear == year && inputWeek == weekObj.week ? 'border rounded border-primary' : ''}`}>\n\t\t\t\t\t\t\t\t\t\t\t\t<small onClick={this.editWeek} data-week={weekObj.week} data-year={year} data-distance={summaryWeek.distance}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t{weekObj.week}\n\t\t\t\t\t\t\t\t\t\t\t\t</small>\n\t\t\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t\t\t{daysOfWeek.map(day => {\n\t\t\t\t\t\t\t\t\t\t\t\tconst yyyy = day.getFullYear();\n\t\t\t\t\t\t\t\t\t\t\t\tconst mm = day.getMonth() + 1;\n\t\t\t\t\t\t\t\t\t\t\t\tconst dd = day.getDate();\n\t\t\t\t\t\t\t\t\t\t\t\tconst epoch = day.getTime();\n\t\t\t\t\t\t\t\t\t\t\t\tconst isDayInTheFuture = epoch > currentEpoch;\n\t\t\t\t\t\t\t\t\t\t\t\tconst summaryWorkout = userStore.findWorkoutSummaryWeekDay((isDayInTheFuture ? yyyy - 1 : yyyy), mm, dd, monthNum) || {};\n\t\t\t\t\t\t\t\t\t\t\t\tconst summary = workoutPlanStore.findWorkoutPlanSummaryDay(yyyy, mm, dd, monthNum) || {};\n\t\t\t\t\t\t\t\t\t\t\t\tif (summary && summary.distance) {\n\t\t\t\t\t\t\t\t\t\t\t\t\ttotalWeek += summary.distance;\n\t\t\t\t\t\t\t\t\t\t\t\t\ttotalDistanceKmMonth += summary.distance;\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\tif (summaryWorkout.distanceKm) {\n\t\t\t\t\t\t\t\t\t\t\t\t\ttotalWorkoutWeek += summaryWorkout.distanceKm;\n\t\t\t\t\t\t\t\t\t\t\t\t\ttotalWorkoutDistanceKmMonth += summaryWorkout.distanceKm;\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\t\t\tconst isChosen = (inputYear == yyyy && inputMonth == mm && inputDay == dd);\n\t\t\t\t\t\t\t\t\t\t\t\tconst isToday =  (currentYear == yyyy) && (currentMonth == mm) && (currentDay == dd);\n\t\t\t\t\t\t\t\t\t\t\t\tconst isDayOff = RED_DAYS.indexOf(day.getDay()) > -1;\n\n\t\t\t\t\t\t\t\t\t\t\t\t// console.log(summary);\n\t\t\t\t\t\t\t\t\t\t\t\t// count: 1, day: 5, distanceKm: 10, duration: 3600, elevation: 200, month: 9, speedAvg: 12, year: 2020\n\t\t\t\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t\t\t\t<td class={`text-center overflow-hidden font-weight-light position-relative pt-3 pb-3 border-right ${isChosen ? 'calendarIsChosen' : ''} ${isToday ? 'calendarIsToday' : ''} ${isDayOff ? 'calendarIsWeekend' : ''}`}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tstyle={`font-size: 0.8em; min-width: 3rem;`}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={this.editDay} data-day={day.getDate()} data-month={day.getMonth() + 1} data-year={year} data-week={weekObj.week} data-distance={summary.distance}\n\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div class='position-absolute text-muted' style='top: 0px; right: 2px; font-size: 0.7em;'>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{day.getDate()}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{summary && summary.distance ? \n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div class='rounded-pill w-100 px-1'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstyle={`background-color: ${mu.getPlanColor(summary, darkmode)};`}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Distance stores={this.props.stores} value={summary.distance} />\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{summary.count > 1 && <span class='position-absolute text-danger' style='bottom: 0; right: 0px; font-size: 0.6em;'>{summary.count}</span>}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div> : '-'}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{summaryWorkout.distanceKm > 0 && (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span class={`position-absolute font-weight-bold`}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstyle={`bottom: 0; left: 0px; font-size: 0.85em; color: ${isDayInTheFuture ? '#393DB1' : '#2BAAA9'};`}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Distance stores={this.props.stores} value={summaryWorkout.distanceKm} />\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t)}\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\t\t\t<td class='text-right pt-3 pb-3 position-relative border-right' style='font-size: 0.8em;'>\n\t\t\t\t\t\t\t\t\t\t\t\t<Distance stores={this.props.stores} value={totalWeek} />\n\t\t\t\t\t\t\t\t\t\t\t\t{totalWorkoutWeek > 0 && (\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span class={`position-absolute`}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tstyle={`bottom: 0; left: 0px; font-size: 0.85em; color: ${isWeekInTheFuture ? '#393DB1' : '#2BAAA9'};`}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Distance stores={this.props.stores} value={totalWorkoutWeek} />\n\t\t\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t\t\t<td class='text-right pt-3 pb-3 text-muted border-right' style='font-size: 0.8em;'\n\t\t\t\t\t\t\t\t\t\t\t\tonClick={this.editWeek} data-week={weekObj.week} data-year={year} data-distance={summaryWeek.distance}\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t{summaryWeek.distance > 0 && <>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div class='rounded-pill w-100 px-1 text-white text-center'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tstyle={`background-color: ${mu.getPlanColor(summaryWeek, darkmode)};`}\n\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Distance stores={this.props.stores} value={summaryWeek.distance} />\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t</>}\n\t\t\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t\t\t{/* <td class='text-right text-muted pt-3'>{totalDistanceKmMonth}</td> */}\n\t\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t\t{!hideWorkoutPlanTips && language === 'no' && tipsWeek && hasTipsWeek && <tr>\n\t\t\t\t\t\t\t\t\t\t\t<td colspan='10' class='pb-3'>\n\t\t\t\t\t\t\t\t\t\t\t\t<h5><span class='font-weight-lighter'>Uke {weekObj.week} {year}:</span>Tips fra Femundløpet</h5>\n\n\t\t\t\t\t\t\t\t\t\t\t\t{tipsWeek.totalDistance > 0 && <div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span class='text-muted'><i class='fas fa-road' /> Distanse</span>: {tipsWeek.totalDistance} km\n\t\t\t\t\t\t\t\t\t\t\t\t</div>}\n\t\t\t\t\t\t\t\t\t\t\t\t{tipsWeek.distance > 0 && <div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span class='text-muted'><i class='fas fa-road' /> Distanse pr økt</span>: {tipsWeek.distance}\n\t\t\t\t\t\t\t\t\t\t\t\t</div>}\n\t\t\t\t\t\t\t\t\t\t\t\t{tipsWeek.time && <div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span class='text-muted'><i class='fas fa-clock' /> Tid pr økt</span>: {tipsWeek.time}\n\t\t\t\t\t\t\t\t\t\t\t\t</div>}\n\t\t\t\t\t\t\t\t\t\t\t\t{tipsWeek.totalWorkouts > 0 && <div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span class='text-muted'><i class='fas fa-list-ol' /> Antall økter</span>: {tipsWeek.totalWorkouts}\n\t\t\t\t\t\t\t\t\t\t\t\t</div>}\n\t\t\t\t\t\t\t\t\t\t\t\t{tipsWeek.avgSpeed && <div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span class='text-muted'><i class='fas fa-tachometer-alt' /> Gjennomsnittsfart</span>: {tipsWeek.avgSpeed}\n\t\t\t\t\t\t\t\t\t\t\t\t</div>}\n\n\t\t\t\t\t\t\t\t\t\t\t\t{tipsWeek.comments && <div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t{tipsWeek.comments.map(c => <p>{c}</p>)}\n\t\t\t\t\t\t\t\t\t\t\t\t</div>}\n\t\t\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t\t</tr>}\n\n\t\t\t\t\t\t\t\t\t</>);\n\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t</tbody>\n\t\t\t\t\t\t\t<tfoot>\n\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t<td colspan='8' class='text-right pb-3'><Text id='workout.plan.totalkm'>Totalt km</Text></td>\n\t\t\t\t\t\t\t\t\t<td class='text-right position-relative pb-3'>\n\t\t\t\t\t\t\t\t\t\t<Distance stores={this.props.stores} value={totalDistanceKmMonth} />\n\t\t\t\t\t\t\t\t\t\t{totalWorkoutDistanceKmMonth > 0 && (\n\t\t\t\t\t\t\t\t\t\t\t<span class='position-absolute'\n\t\t\t\t\t\t\t\t\t\t\t\tstyle={`bottom: 0; left: 0px; font-size: 0.65em; color: ${isMonthInTheFuture ? '#393DB1' : '#2BAAA9'};`}\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t<Distance stores={this.props.stores} value={totalWorkoutDistanceKmMonth} />\n\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t<td class='text-right text-muted'>\n\t\t\t\t\t\t\t\t\t\t<Distance stores={this.props.stores} value={totalDistanceKmMonthPlan} />\n\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t{!hideWorkoutPlanTips && language === 'no' && tipsMonth && hasTipsMonth && <tr>\n\t\t\t\t\t\t\t\t\t<td colspan='10' class='pb-3'>\n\t\t\t\t\t\t\t\t\t\t<h5><span class='font-weight-lighter'>{MONTHS[month - 1]} {year}:</span> Tips fra Femundløpet</h5>\n\n\t\t\t\t\t\t\t\t\t\t{tipsMonth.totalDistance > 0 && <div>\n\t\t\t\t\t\t\t\t\t\t\t<span class='text-muted'><i class='fas fa-road' /> Distanse</span>: {tipsMonth.totalDistance} km\n\t\t\t\t\t\t\t\t\t\t</div>}\n\t\t\t\t\t\t\t\t\t\t{tipsMonth.distance > 0 && <div>\n\t\t\t\t\t\t\t\t\t\t\t<span class='text-muted'><i class='fas fa-road' /> Distanse pr økt</span>: {tipsMonth.distance}\n\t\t\t\t\t\t\t\t\t\t</div>}\n\t\t\t\t\t\t\t\t\t\t{tipsMonth.time && <div>\n\t\t\t\t\t\t\t\t\t\t\t<span class='text-muted'><i class='fas fa-clock' /> Tid pr økt</span>: {tipsMonth.time}\n\t\t\t\t\t\t\t\t\t\t</div>}\n\t\t\t\t\t\t\t\t\t\t{tipsMonth.totalWorkouts > 0 && <div>\n\t\t\t\t\t\t\t\t\t\t\t<span class='text-muted'><i class='fas fa-list-ol' /> Antall økter</span>: {tipsMonth.totalWorkouts}\n\t\t\t\t\t\t\t\t\t\t</div>}\n\t\t\t\t\t\t\t\t\t\t{tipsMonth.avgSpeed && <div>\n\t\t\t\t\t\t\t\t\t\t\t<span class='text-muted'><i class='fas fa-tachometer-alt' /> Gjennomsnittsfart</span>: {tipsMonth.avgSpeed}\n\t\t\t\t\t\t\t\t\t\t</div>}\n\n\t\t\t\t\t\t\t\t\t\t{tipsMonth.comments && <div>\n\t\t\t\t\t\t\t\t\t\t\t{tipsMonth.comments.map(c => <p>{c}</p>)}\n\t\t\t\t\t\t\t\t\t\t</div>}\n\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t</tr>}\n\t\t\t\t\t\t\t</tfoot>\n\t\t\t\t\t\t</table>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</>\n\t\t);\n\t}\n}\n\nexport default Calendar;\n","import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport { Text, Localizer, withText } from 'preact-i18n';\n\nimport Speed from '../../components/data/speed';\nimport Elevation from '../../components/data/elevation';\nimport Weight from '../../components/data/weight';\nimport Distance from '../../components/data/distance';\nimport Temperature from '../../components/data/temperature';\n\nimport mu from '../../lib/musher-util';\n\n@observer\nclass Dog extends Component {\n    render() {\n        const { dog } = this.props;\n\t\tconst { userStore, dogStore, appState } = this.props.stores;\n        const { isAdmin, user } = userStore;\n        const { language = 'en' } = user;\n        const { viewmode } = appState;\n\n        const currentMonth = new Date().getMonth() + 1;\n        const currentYear = new Date().getFullYear();\n\t\tconst { month = currentMonth, year = currentYear } = this.props;\n\t\tconst seasonStart = parseInt(month < 8 ? year - 1 : year, 10);\n\n        const workoutSummary = dogStore.findWorkoutSummary(dog.id, seasonStart) || {};\n        // {\"0\":{\"year\":2020,\"dog\":16,\"count\":1,\"distanceKm\":9.9,\"elevation\":202,\"duration\":0,\"speedAvg\":0}}\n        const dogStatuses = dog.statuses ? dog.statuses.map(e => userStore.findDogstatus({ status: e, language })) : [];\n        const dogVaccines = dogStore.findVaccineStatuses(dog.id);\n        const dogVaccineLogStatuses = dogStore.findVaccineLogStatuses(dog.chipId);\n        const dogHistoryStatuses = dogStore.findHistoryStatuses(dog.id);\n        const dogStatus = userStore.findDogstatus({ status: dog.status, language });\n        const dogPosition = userStore.findDogposition({ position: dog.position, language });\n        const teamNames = [];\n        if (userStore.findTeam(dog.team)) {\n            teamNames.push(userStore.findTeam(dog.team));\n        }\n        if (dog.teams) {\n            dog.teams.forEach((e) => {\n                if (userStore.findTeam(e)) {\n                    teamNames.push(userStore.findTeam(e));\n                }\n            });\n        }\n        const hasBirthday = mu.hasBirthday(dog.birth);\n        const daysUntilBirthday = dog.birth ? Math.ceil(mu.daysUntilNextBirthday(dog.birth)) : 365;\n\n        const { url = `/dogs/${dog.id}` } = this.props;\n\n        return (\n            <div class='w-100 mb-3'>\n                <div class='row'>\n                    <div class='col-12 col-sm-8 col-lg-6 offset-sm-2 offset-lg-3 d-flex mb-0 position-relative'>\n                        {/* {JSON.stringify(dog, null, 4)} */}\n                        <div class={`text-center border rounded-circle imageRounded text-muted pt-2`} style={dog.image ? `background-image: url(\"${dog.image.s3SmallLink}\"); background-size: cover;` : ''}>\n                            {/* {!dog.image && <i class='fas fa-dog mt-3' style='font-size: 40px;' />} */}\n                            {!dog.image && <span class='font-weight-lighter' style='font-size: 35px;'>{util.ucfirst(dog.name, true)}</span>}\n                        </div>\n                        <div class='flex-grow-1 pl-3 pr-2'\n                            style={`border-right: 4px solid ${userStore.findHarness(dog.harness, 'colorNonstop')} !important; line-height: 1.2em;`}\n                        >\n                            <span class='float-right'>\n                                {dogPosition && <span class={`badge badge-${dogPosition.class || 'primary'} mr-3`}>{dogPosition.icon && <i class={dogPosition.icon} />} {dogPosition.name}</span>}\n                                {daysUntilBirthday < 7 && <>\n                                    <span class='text-muted mr-2'>\n                                        <i class='fas fa-birthday-cake' /> in {daysUntilBirthday} days\n                                    </span>\n                                </>}                                \n                                {dog.birth && <span class='mr-2'>{util.age(dog.birth, dog.deceased)}</span>}\n                                {dog.gender === 'female' ? <i class='fas fa-venus' /> : <i class='fas fa-mars' />}\n                            </span>\n                            <a class='stretched-link' href={url}>\n                                <h5 class='mb-1' style='line-height: 1.0em;'>\n                                    {dog.shortname || dog.name} {dog.shortname && dog.shortname !== '' && <> - <span class='font-weight-lighter'>{dog.name}</span></>}\n                                    {hasBirthday && <>\n                                        <i class='fas fa-birthday-cake ml-3' />\n                                    </>}\n                                </h5>\n                            </a>\n                            <div>\n                                {teamNames && teamNames.length > 0 && <small class='font-weight-lighter'>\n                                    {teamNames.map((name, idx) => <>{idx > 0 ? ', ' : ''}{name}</>)}\n                                </small>}\n                                <br />\n                            </div>\n\n                            <small class='text-muted'>\n                                {/* {dog.chipId && <span class='ml-0'><i class='fas fa-microchip' /> {dog.chipId}</span>} */}\n                                {dog.history > 0 && <span class='ml-0'><i class='fas fa-file-signature' /> {dog.history.length}</span>}\n                                {dog.images > 0 && <span class='ml-2'><i class='fas fa-image' /> {dog.images.length}</span>}\n\n                                {workoutSummary && workoutSummary.distanceKm > 0 && <span class='ml-2'><i class='fas fa-road' /> <Distance stores={this.props.stores} value={workoutSummary.distanceKm} /></span>}\n                                {workoutSummary && workoutSummary.elevation > 0 && <span class='ml-2'><i class='fas fa-mountain' /> <Elevation stores={this.props.stores} value={workoutSummary.elevation} /></span>}\n                                {workoutSummary && workoutSummary.duration > 0 && <span class='ml-2'><i class='fas fa-clock' /> {util.secToHms(workoutSummary.duration, true)}</span>}\n                                {workoutSummary && workoutSummary.speedAvg > 0 && <span class='ml-2'><i class='fas fa-tachometer-alt' /> <Speed stores={this.props.stores} value={workoutSummary.speedAvg} /></span>}\n\n                                {dog.weight > 0 && <><i class='fas fa-balance-scale ml-2' /> <Weight stores={this.props.stores} value={dog.weight} /></>}\n                                {dog.bodyScore > 0 && <><i class='fas fa-dog ml-2' /> {util.format(dog.bodyScore, 1)}</>}\n                            </small>\n\n                            {['beta', 'advanced', 'normal'].indexOf(viewmode) > -1 && <>\n                                <div>\n                                    {dogVaccines && dogVaccines.map(v => (\n                                        <span class={`badge badge-success mr-2`} title={util.isoDate(v.endDate, false, false, true)}>\n                                            {v.vaccineType}\n                                            <span class='font-weight-light ml-3'>\n                                                <i class='fas fa-calendar-check' /> {util.isoDate(v.endDate, false, false, true)}                                    \n                                            </span>\n                                        </span>\n                                    ))}\n                                    {dogHistoryStatuses && dogHistoryStatuses.map(v => (\n                                        <span class={`badge badge-warning mr-2`} title={util.isoDate(v.endDate, false, false, true)}>{v.title}</span>\n                                    ))}\n                                </div>\n                            </>}\n\n                            {['beta', 'advanced'].indexOf(viewmode) > -1 && <>\n                                {dog.positions && dog.positions.lead && <div class=''>\n                                    {dog.positions.lead.distanceKm > 0 && <span class='badge badge-secondary mr-2'>\n                                        <span class='font-weight-lighter'><Text id='dogs.sort-lead'>Lead</Text>:</span> <Distance stores={this.props.stores} value={dog.positions.lead.distanceKm} />\n                                    </span>}\n                                    {dog.positions.point.distanceKm > 0 && <span class='badge badge-secondary mr-2'>\n                                        <span class='font-weight-lighter'><Text id='dogs.sort-point'>Point</Text>:</span> <Distance stores={this.props.stores} value={dog.positions.point.distanceKm} />\n                                    </span>}\n                                    {dog.positions.team.distanceKm > 0 && <span class='badge badge-secondary mr-2'>\n                                        <span class='font-weight-lighter'><Text id='dogs.sort-team'>Team</Text>:</span> <Distance stores={this.props.stores} value={dog.positions.team.distanceKm} />\n                                    </span>}\n                                    {dog.positions.wheel.distanceKm > 0 && <span class='badge badge-secondary mr-2'>\n                                        <span class='font-weight-lighter'><Text id='dogs.sort-wheel'>Wheel</Text>:</span> <Distance stores={this.props.stores} value={dog.positions.wheel.distanceKm} />\n                                    </span>}\n                                </div>}\n                            </>}\n\n                            <div class='clearfix pb-0'>\n                                {dog.specialNeeds && <span class={`badge badge-warning ml-2 mt-1 float-right`}><i class='fas fa-exclamation-triangle' /> {dog.specialNeeds}</span>}\n                                {dogStatus && <span class={`badge badge-${dogStatus.class} ml-2 mt-1 float-right`}>{dogStatus.icon && <i class={dogStatus.icon} />} {dogStatus.name}</span>}\n                                {dogStatuses && dogStatuses.map(status => <>\n                                    <span class={`badge badge-${status.class} ml-2 mt-1 float-right`}>\n                                        {status.icon && <i class={status.icon} />} {status.lang && status.lang[language] ? status.lang[language] : status.name}\n                                    </span>\n                                </>)}\n                            </div>\n\n                            {dogVaccineLogStatuses && dogVaccineLogStatuses.length > 0 && <>\n                                <div class='mt-2'>\n                                    {dogVaccineLogStatuses && dogVaccineLogStatuses.filter(e => e.chipId === dog.chipId).map((vac) => {\n                                        return (\n                                            <span class={`badge badge-${vac.inKarens ? 'warning' : 'success'} mr-2 mb-1`}>\n                                                <i class='fas fa-user-md' /> {vac.vaccineAgens.name}\n                                                {/* <span class='font-weight-lighter ml-2'> */}\n                                                    {/* <i class='fas fa-calendar-check' /> {util.isoDate(vac.vaccineAgens.durationEnd, false, false, true)} */}\n                                                    {/* {vac.inKarens && <>\n                                                        <br />\n                                                        (karens: {util.format(vac.karensDaysLeft, 0)} days left)\n                                                    </>} */}\n                                                {/* </span> */}\n                                            </span>\n                                        );\n                                    })}\n                                </div>\n                            </>}\n\n                        </div>\n                    </div>\n                </div>\n            </div>\n        );\n    }\n}\n\nexport default Dog;\n","import { h, Component } from 'preact';\nimport { observer } from 'mobx-preact';\nimport { toJS } from 'mobx';\nimport util from 'preact-util';\nimport { Text, Localizer } from 'preact-i18n';\nimport linkstate from 'linkstate';\n\n@observer\nclass Achievements extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            data: {},\n        };\n    }\n    \n    handleAdd = () => {\n        const { data } = this.state;\n        const {\n            updateField,\n            object,\n            field,\n        } = this.props;\n        updateField({ id: object.id, field, value: { ...data } });\n        this.setState({\n            data: {\n                name: '',\n                description: '',\n                url: '',\n            }\n        });\n    };\n\n\n    removeAchievement = async (e) => {\n        const { dogStore } = this.props.stores;\n        const { object } = this.props;\n        const { name, id } = e.target.closest('button').dataset;\n        dogStore.removeAchievement({\n            id: object.id,\n            name,\n            achievementId: id,\n        });\n    }\n\n    render() {\n        const { data } = this.state;\n        const { showFiles = true, object = {} } = this.props;\n        return (\n            <div class='row'>\n                <div class='col-12 mt-3'>\n                    {showFiles && <>\n                        <div class='container-fluid'>\n                            <div class='row'>\n\n                                {(!object.achievements || object.achievements.length === 0) && <>\n                                    <div class='text-center text-muted'>\n                                        <div class='display-1'><i class='fas fa-trophy' /></div>\n                                        <h3><Text id='dogs.no-achievements-title'>No achievements for this dog!</Text></h3>\n                                        <Text id='dogs.no-achievements-text'>You can add achievements to this dog. Ie. Memories, trips, tests, prices, races, etc.</Text>\n                                    </div>\n                                </>}\n\n                                {object.achievements && object.achievements.map(file => (\n                                    <div class='col-12 p-1'>\n                                        <span class='font-weight-lighter mr-2'>{util.isoDate(file.date, false, false, true)}</span>\n                                        <span class='mr-2'>{file.name}</span>\n                                        <span class='mr-2'>{file.url}</span>\n                                        <button class='btn btn-sm btn-link float-right p-0'\n                                            onClick={this.removeAchievement}\n                                            data-name={file.name}\n                                            data-id={file.id}\n                                        ><i class='fas fa-trash-alt' /> Del</button>\n                                    </div>\n                                ))}\n                            </div>\n                        </div>\n                    </>}\n                </div>\n                <div class='col-12 mt-3'>\n                    <details>\n                        <summary><Text id='dogs.achievement-add'>Add new achievement</Text></summary>\n\n                        <div class='form-group'>\n                            <label for='name'><Text id='dogs.achievement-name'>Name</Text></label>\n                            <input type='text' class='form-control' id='name' aria-describedby='nameHelp' onInput={linkstate(this, 'data.name')} value={data.name} />\n                            <small id='nameHelp' class='form-text text-muted'><Text id='dogs.achievement-name-help'>Name of achievement</Text></small>\n                        </div>\n                        <div class='form-group'>\n                            <label for='date'><Text id='dogs.achievement-date'>Date</Text></label>\n                            <input type='date' class='form-control' id='date' aria-describedby='dateHelp' onInput={linkstate(this, 'data.date')} value={data.date} />\n                            <small id='dateHelp' class='form-text text-muted'><Text id='dogs.achievement-date-help'>Date of achievement</Text></small>\n                        </div>\n                        <div class='form-group'>\n                            <label for='description'><Text id='dogs.achievement-description'>Description</Text></label>\n                            <input type='text' class='form-control' id='description' aria-describedby='descriptionHelp' onInput={linkstate(this, 'data.description')} value={data.description} />\n                            <small id='descriptionHelp' class='form-text text-muted'><Text id='dogs.achievement-description-help'>Description of achievement</Text></small>\n                        </div>\n                        <div class='form-group'>\n                            <label for='url'><Text id='dogs.achievement-url'>Url</Text></label>\n                            <input type='text' class='form-control' id='url' aria-describedby='urlHelp' onInput={linkstate(this, 'data.url')} value={data.url} />\n                            <small id='urlHelp' class='form-text text-muted'><Text id='dogs.achievement-url-help'>URL of achievement</Text></small>\n                        </div>\n                        <button class='btn btn-success' onClick={this.handleAdd}>\n                            <Text id='dogs.achievement-add'>Add achievement</Text>\n                        </button>\n                    </details>\n                </div>\n            </div>\n        );\n    }\n}\n\nexport default Achievements;\n","import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\n\nimport mu from '../../lib/musher-util';\n\nconst STOP_STATUSES = [2, 9];\nconst WARN_STATUSES = [4, 8];\n\n\nfunction getFatigueLevel(wo, dog) {\n    if (dog) {\n        if (STOP_STATUSES.indexOf(dog.status) > -1) {\n            return 'danger';\n        } else if (WARN_STATUSES.indexOf(dog.status) > -1) {\n            return 'warning';\n        }\n    }\n    if (wo) {\n        if (wo.distanceKm > 50) {\n            return 'danger';\n        } else if (wo.distanceKm > 30) {\n            return 'warning';\n        }\n    }\n    return 'success';\n}\n\n@observer\nclass Dog extends Component {\n    render() {\n        const { \n            dog = {},\n            dogs = [],\n            showTeam,\n            showInfo,\n            showName = true,\n            showPosition = true,\n            showAge = false,\n            className,\n            size,\n            onDogClick = () => {},\n        } = this.props;\n\t\tconst { userStore } = this.props.stores;\n        const { isAdmin, user } = userStore;\n        const { language = 'en' } = user;\n\n        const dogPosition = userStore.findDogposition({ position: dog.position, language });\n        const hasBirthday = mu.hasBirthday(dog.birth);\n        const daysUntilBirthday = Math.ceil(mu.daysUntilNextBirthday(dog.birth));\n\n        let containerWidth = '92px';\n        let imageClasses = '';\n        let fontSize = '35px';\n        if (size === 'small') {\n            containerWidth = '50px';\n            imageClasses = 'imageRoundedSmall';\n            fontSize = '20px';\n        } else if (size === 'medium') {\n            containerWidth = '60px';\n            imageClasses = 'imageRoundedMedium';\n            fontSize = '25px';\n        }\n\n        return (\n            <div class={`mb-2 position-relative ${className} clearfix`} style={`width: ${containerWidth}`}\n                onTouchstart={(e) => { e.stopPropagation(); }}\n                onTouchend={(e) => { e.stopPropagation(); }}\n                onTouchmove={(e) => { e.stopPropagation(); }}\n            >\n                {/* {JSON.stringify(dog, null, 4)} */}\n                {showPosition && dogPosition && <small class='position-absolute' style='left:0px; top: 50px;'>\n                    <span class={`badge badge-${dogPosition.class || 'primary'} mr-3`}>{dogPosition.icon && <i class={dogPosition.icon} />} {dogPosition.name}</span>\n                </small>}\n                <div\n                    class={`text-center border rounded-circle imageRounded ${imageClasses} mx-auto text-muted pt-2`}\n                    style={`${dog.image ? `background-image: url(\"${dog.image.s3SmallLink}\"); background-size: cover;` : ''} border-width: 2px !important;`}\n                >\n                    {/* {!dog.image && <i class='fas fa-dog mt-3' style='font-size: 40px;' />} */}\n                    {!dog.image && <span class='font-weight-lighter' style={`font-size: ${fontSize};`}>{util.ucfirst(dog.name, true)}</span>}\n                </div>\n                <div class='text-center text-overflow' style='line-height: 1.0em;'>\n                    <small>\n                        {/* <span class='float-right'>\n                            {dog.birth && <span class='mr-2'>{util.age(dog.birth, dog.deceased)}</span>}\n                            {dog.gender === 'female' ? <i class='fas fa-venus' /> : <i class='fas fa-mars' />}\n                        </span> */}\n                        <a href={`/dogs/public/${dog.uuidv4}`} onClick={(e) => onDogClick(e, dog.uuidv4, dogs)} class='stretched-link'>\n                            {showName && <>\n                                <span class='mb-1 font-weight-light'>\n                                    <nobr>\n                                        {dog.shortname || dog.name}\n                                        {hasBirthday && <>\n                                            <i class='fas fa-birthday-cake ml-3' />\n                                        </>}\n                                    </nobr>\n                                </span>\n                            </>}\n                        </a>\n                    </small>\n                </div>\n                <div class='text-center text-overflow' style='line-height: 1.0em;'>\n                    <small>\n                        {dog.birth && showAge && <>\n                            <span class='float-right'>\n                                {/* {daysUntilBirthday < 7 && <>\n                                    <span class='text-muted mr-2'>\n                                        <i class='fas fa-birthday-cake' /> in {daysUntilBirthday} days\n                                    </span>\n                                </>}                                 */}\n                                {dog.birth && <span class='mr-2'>{util.age(dog.birth, dog.deceased)}</span>}\n                                {dog.gender === 'female' ? <i class='fas fa-venus' /> : <i class='fas fa-mars' />}\n                            </span>\n                        </>}\n\n                        {showTeam && <><span class='font-weight-light'>{userStore.findTeam(dog.team)}</span><br /></>}\n\n                        {showInfo && <small class='text-muted'>\n                            {dog.weight && <><i class='fas fa-balance-scale ml-2' /> {util.format(dog.weight, 1)} kg</>}\n                            {dog.bodyScore && <><i class='fas fa-dog ml-2' /> {util.format(dog.bodyScore, 1)}</>}\n                        </small>}\n\n                    </small>\n                </div>\n            </div>\n        );\n    }\n}\n\nexport default Dog;\n","import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport { Text, Localizer } from 'preact-i18n';\n\nimport mu from '../../lib/musher-util';\n\nfunction celciusToFahrenheit(value) {\n    return ((value * 9/5) + 32);\n}\n\n@observer\nclass Temperature extends Component {\n    render() {\n\t\tconst { value = 0, smallUnit } = this.props;\n\t\tconst { userStore } = this.props.stores;\n\t\tconst { user } = userStore;\n\t\tconst { settings = {} } = user;\n\n        if (settings.imperial) {\n            return (<>\n                <nobr>\n                    {util.format(celciusToFahrenheit(value), 0)}°F\n                </nobr>\n            </>);\n        }\n\n\t\treturn (<>\n            <nobr>\n                {util.format(value, 1)}°C\n            </nobr>\n        </>);\n    }\n}\n\nexport default Temperature;\n","import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport { Text, Localizer, withText } from 'preact-i18n';\n\nimport mu from '../../lib/musher-util';\n\nimport LineGraph from '../../components/lineGraph';\n\n@withText((props) => ({\n    week: <Text id='workout.graph.week' />,\n    distanceAvgAll: <Text id='workout.graph.distance-avg-all' />,\n    distanceAvg: <Text id='workout.graph.distance-avg' />,\n    ascendAvgAll: <Text id='workout.graph.ascend-avg-all' />,\n    ascendAvg: <Text id='workout.graph.ascend-avg' />,\n    speedAvgAll: <Text id='workout.graph.speed-avg-all' />,\n    speedAvg: <Text id='workout.graph.speed-avg' />,\n    durationAvgAll: <Text id='workout.graph.duration-avg-all' />,\n    durationAvg: <Text id='workout.graph.duration-avg' />,\n    realDurationAvgAll: <Text id='workout.graph.real-duration-avg-all' />,\n    realDurationAvg: <Text id='workout.graph.real-duration-avg' />,\n    loadIndex: <Text id='workout.graph.load-index' />,\n    loadIndexAll: <Text id='workout.graph.load-index-all' />,\n    plan: <Text id='workout.graph.plan' />,\n}))\n@observer\nclass WorkoutGraphAvg extends Component {\n    render() {\n        const { userStore } = this.props.stores;\n        const { week, distanceAvgAll, distanceAvg, ascendAvgAll, ascendAvg, speedAvgAll, speedAvg,\n            durationAvg, realDurationAvg,\n            durationAvgAll, realDurationAvgAll,\n            loadIndex, loadIndexAll,\n            year,\n            teamAmbition,\n            teamType,\n            teamId,\n        } = this.props;\n        const {\n\t\t\tgraphAvgWorkoutStatsDistance,\n\t\t\tgraphAvgWorkoutStatsElevation,\n            graphAvgWorkoutStatsSpeed,\n            graphAvgWorkoutStatsDuration,\n            graphAvgWorkoutStatsRealDuration,\n            graphAvgWorkoutStatsLoadIndex,\n            graphWorkoutAvgWeekDistanceCurrent,\n            graphWorkoutAvgWeekElevationCurrent,\n            graphWorkoutAvgWeekSpeedCurrent,\n            graphWorkoutAvgWeekDurationCurrent,\n            graphWorkoutAvgWeekRealDurationCurrent,\n            graphWorkoutAvgWeekLoadIndexCurrent,\n            graphAvgWorkoutStatsCount,\n            user,\n\t\t} = userStore;\n\n        const { settings = {} } = user;\n\n        const currentMonth = new Date().getMonth() + 1;\n        const currentYear = year || util.getYear();\n\t\tconst seasonStart = parseInt(currentMonth < 8 ? currentYear - 1 : currentYear, 10);\n\n        // const summaryMonth = workoutPlanStore.findWorkoutPlanSummaryMonth(year, monthNum) || {};\n        const seasonWeeks = util.weekRange(`${seasonStart}-08-01`, `${seasonStart + 1}-07-31`);\n\n        const xTicksAll = seasonWeeks.map(wo => wo.week);\n        const parts = xTicksAll.length % 6;\n        const partSize = Math.floor(xTicksAll.length / parts);\n        const xTicks = [];\n        for (let i = 0, l = xTicksAll.length; i < l; i += partSize) {\n            xTicks.push(xTicksAll[i]);\n        }\n\n        return (\n            <>\n                {teamType && <a href={`/settings/team/${teamId}`}><span class='badge badge-pill badge-secondary ml-2 float-right'>{teamType}</span></a>}\n                {teamAmbition && <a href={`/settings/team/${teamId}`}><span class='badge badge-pill badge-secondary ml-2 float-right'>{teamAmbition}</span></a>}\n\n                <h5><Text id='workout.graph.title-avg'>Gjennomsnitt</Text> {seasonStart} - {seasonStart + 1}</h5>\n                <div class='w-100 mt-3 mb-4'>\n                    {/* <xmp>graphWorkoutSummaryWeekDistanceCurrent: {JSON.stringify(graphWorkoutSummaryWeekDistanceCurrent, null, 4)}</xmp>\n                    <xmp>graphWorkoutSummaryWeekDistancePrev: {JSON.stringify(graphWorkoutSummaryWeekDistancePrev, null, 4)}</xmp> */}\n                    <LineGraph\n                        stores={this.props.stores}\n                        width={500}\n                        height={150}\n                        showXTicks={1}\n                        xTicksVal={val => `${week} ${val}`}\n                        xTicks={xTicks}\n                        paddingTop={30}\n                        lineFromXzero={true}\n                        lineFromXmax={true}\n\n                        dataLeft={[graphWorkoutAvgWeekLoadIndexCurrent, graphAvgWorkoutStatsLoadIndex]}\n                        legendLeft={[`${seasonStart} ${loadIndex}`, `${seasonStart} ${loadIndexAll}`]}\n                        dataFillLeft={[1]}\n\n                        // yMaxLeft={30}\n                        // yMinLeft={0}\n                        showYTicksLeft={1}\n                        avgWindowLeft={[0, 2]}\n                        smoothLeft={[1, 1]}\n\n                        dataRight={[graphAvgWorkoutStatsCount]}\n                        showYTicksRight={1}\n                        smoothRight={[1]}\n                        // yTicksRightPostfix={'m'}\n                        // unitRight={['m', 'm']}\n                        // avgWindowRight={[0, 0]}\n\n                        // marker={week}\n                    />\n                </div>\n\n                <div class='w-100 mt-3 mb-4'>\n                    {/* <xmp>graphWorkoutSummaryWeekDistanceCurrent: {JSON.stringify(graphWorkoutSummaryWeekDistanceCurrent, null, 4)}</xmp>\n                    <xmp>graphWorkoutSummaryWeekDistancePrev: {JSON.stringify(graphWorkoutSummaryWeekDistancePrev, null, 4)}</xmp> */}\n                    <LineGraph\n                        stores={this.props.stores}\n                        width={500}\n                        height={150}\n                        showXTicks={1}\n                        xTicksVal={val => `${week} ${val}`}\n                        xTicks={xTicks}\n                        paddingTop={30}\n                        lineFromXzero={true}\n                        lineFromXmax={true}\n\n                        dataLeft={[graphWorkoutAvgWeekDistanceCurrent, graphAvgWorkoutStatsDistance]}\n                        legendLeft={[`${seasonStart} ${distanceAvg}`, `${seasonStart} ${distanceAvgAll}`]}\n                        dataFillLeft={[1]}\n                        // yMaxLeft={30}\n                        // yMinLeft={0}\n                        showYTicksLeft={1}\n                        yTicksLeftPostfix={settings.imperial ? 'mi' : 'km'}\n                        unitLeft={settings.imperial ? ['mi', 'mi', 'mi'] : ['km', 'km', 'km']}\n                        avgWindowLeft={[0, 2]}\n                        smoothLeft={[1, 1]}\n\n                        dataRight={[graphAvgWorkoutStatsCount]}\n                        showYTicksRight={1}\n                        smoothRight={[1]}\n                        // yTicksRightPostfix={'m'}\n                        // unitRight={['m', 'm']}\n                        // avgWindowRight={[0, 0]}\n                        // smoothRight={[1, 1]}\n\n                        // marker={week}\n                    />\n                </div>\n                <div class='w-100 mt-3 mb-4'>\n                    {/* <xmp>graphWorkoutSummaryWeekDistanceCurrent: {JSON.stringify(graphWorkoutSummaryWeekDistanceCurrent, null, 4)}</xmp>\n                    <xmp>graphWorkoutSummaryWeekDistancePrev: {JSON.stringify(graphWorkoutSummaryWeekDistancePrev, null, 4)}</xmp> */}\n                    <LineGraph\n                        stores={this.props.stores}\n                        width={500}\n                        height={150}\n                        showXTicks={1}\n                        xTicksVal={val => `${week} ${val}`}\n                        xTicks={xTicks}\n                        paddingTop={30}\n                        lineFromXzero={true}\n                        lineFromXmax={true}\n\n                        dataLeft={[graphWorkoutAvgWeekElevationCurrent, graphAvgWorkoutStatsElevation]}\n                        legendLeft={[`${seasonStart} ${ascendAvg}`, `${seasonStart} ${ascendAvgAll}`]}\n                        dataFillLeft={[1]}\n                        // yMaxLeft={30}\n                        // yMinLeft={0}\n                        showYTicksLeft={1}\n                        yTicksLeftPostfix={settings.imperial ? 'ft' : 'm'}\n                        unitLeft={settings.imperial ? ['ft', 'ft', 'ft'] : ['m', 'm', 'm']}\n                        avgWindowLeft={[0, 2]}\n                        smoothLeft={[1, 1]}\n\n                        dataRight={[graphAvgWorkoutStatsCount]}\n                        showYTicksRight={1}\n                        smoothRight={[1]}\n                        // marker={week}\n                    />\n                </div>\n                <div class='w-100 mt-3 mb-4'>\n                    {/* <xmp>graphWorkoutSummaryWeekDistanceCurrent: {JSON.stringify(graphWorkoutSummaryWeekDistanceCurrent, null, 4)}</xmp>\n                    <xmp>graphWorkoutSummaryWeekDistancePrev: {JSON.stringify(graphWorkoutSummaryWeekDistancePrev, null, 4)}</xmp> */}\n                    <LineGraph\n                        stores={this.props.stores}\n                        width={500}\n                        height={150}\n                        showXTicks={1}\n                        xTicksVal={val => `${week} ${val}`}\n                        xTicks={xTicks}\n                        paddingTop={30}\n                        lineFromXzero={true}\n                        lineFromXmax={true}\n\n                        dataLeft={[graphWorkoutAvgWeekSpeedCurrent, graphAvgWorkoutStatsSpeed]}\n                        legendLeft={[`${seasonStart} ${speedAvg}`, `${seasonStart} ${speedAvgAll}`]}\n                        dataFillLeft={[1]}\n                        // yMaxLeft={30}\n                        // yMinLeft={0}\n                        showYTicksLeft={1}\n                        yTicksLeftPostfix={settings.imperial ? 'mph' : 'km/t'}\n                        avgWindowLeft={[0, 2]}\n                        smoothLeft={[1, 1]}\n\n                        dataRight={[graphAvgWorkoutStatsCount]}\n                        showYTicksRight={1}\n                        smoothRight={[1]}\n\n                        // dataRight={[\n                        //     graphWorkoutAvgWeekDurationCurrent,\n                        //     graphAvgWorkoutStatsDuration,\n                        // ]}\n                        // legendRight={[\n                        //     `${seasonStart} ${durationAvg}`,\n                        //     `${seasonStart} ${durationAvgAll}`,\n                        // ]}\n                        // showYTicksRight={1}\n                        // yTicksRightVal={val => util.secToHms(val, true)}\n                        // avgWindowRight={[0, 0, 2, 2]}\n                        // smoothRight={[1, 1, 1, 1]}\n                        // marker={week}\n                    />\n                </div>\n                <div class='w-100 mt-3 mb-4'>\n                    {/* <xmp>graphWorkoutSummaryWeekDistanceCurrent: {JSON.stringify(graphWorkoutSummaryWeekDistanceCurrent, null, 4)}</xmp>\n                    <xmp>graphWorkoutSummaryWeekDistancePrev: {JSON.stringify(graphWorkoutSummaryWeekDistancePrev, null, 4)}</xmp> */}\n                    <LineGraph\n                        stores={this.props.stores}\n                        width={500}\n                        height={150}\n                        showXTicks={1}\n                        xTicksVal={val => `${week} ${val}`}\n                        xTicks={xTicks}\n                        paddingTop={30}\n                        lineFromXzero={true}\n                        lineFromXmax={true}\n\n                        dataLeft={[graphWorkoutAvgWeekDurationCurrent, graphAvgWorkoutStatsDuration]}\n                        legendLeft={[`${seasonStart} ${durationAvg}`, `${seasonStart} ${durationAvgAll}`]}\n                        dataFillLeft={[1]}\n                        // yMaxLeft={30}\n                        // yMinLeft={0}\n                        showYTicksLeft={1}\n                        yTicksLeftVal={val => util.secToHms(val, true)}\n                        avgWindowLeft={[0, 2]}\n                        smoothLeft={[1, 1]}\n\n                        dataRight={[graphAvgWorkoutStatsCount]}\n                        showYTicksRight={1}\n                        smoothRight={[1]}\n                        // marker={week}\n                    />\n                </div>\n            </>\n        );\n    }\n}\n\nexport default WorkoutGraphAvg;\n","import { h, Component } from 'preact';\nimport { observer } from 'mobx-preact';\nimport { toJS } from 'mobx';\nimport util from 'preact-util';\nimport { Text, Localizer } from 'preact-i18n';\n\nimport DragNDropFileupload from './dragNdropFileupload';\n\n@observer\nclass Files extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            files: [],\n        };\n    }\n    \n    handleAddImage = (file) => {\n        // <Images saved={saved} object={dog} field={field} updateField={updateField} />\n        // updateFieldValue = ({ id, field, value, datatype, elementtype, isNew = false, skipTimer = false }) => {\n        const {\n            updateField,\n            object,\n            field,\n        } = this.props;\n        updateField({ id: object.id, field, value: file });\n\n        // let images = toJS(object.images);\n        // if (!util.isArray(images)) {\n        //     images = [];\n        // }\n        // images.push(file);\n        // updateField({ id: object.id, field: 'images', value: images });\n    };\n\n    render() {\n        const { uploadStatus = () => {}, before = () => {}, after = () => {}, autoOpen = false } = this.props;\n        return (\n            <div class='row'>\n                <div class='col-12'>\n                    <Text id='form.files.upload-file'>Last opp fil</Text>:<br />\n                    <DragNDropFileupload\n                        handleAddImage={this.handleAddImage}\n                        apiUrl={'/api/fileupload'}\n                        uploadStatus={uploadStatus}\n                        before={before}\n                        after={after}\n                        autoOpen={autoOpen}\n                    >\n                        <div style={{ height: 30, width: '100%' }}>\n                            {/* {files.map((file, idx) => (\n                                <div key={idx}>\n                                    {file.name}\n                                    Total: {util.asString(file, 'load', 'total')}\n                                    <img style='width: 48px;'\n                                        alt='Preview'\n                                        key={file.preview}\n                                        src={file.src}\n                                    />\n                                </div>\n                            ))} */}\n                        </div>\n                    </DragNDropFileupload>\n                </div>\n            </div>\n        );\n    }\n}\n\nexport default Files;\n","import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport { Text, Localizer, withText } from 'preact-i18n';\n\n@observer\nclass Modal extends Component {\n    toggleDate = () => {\n        const { showDate } = this.state;\n        this.setState({ showDate: !showDate });\n    }\n\n    touchStart = (e) => {\n        e.stopPropagation();\n        this.setState({\n            startY: e.touches[0].pageY,\n        })\n    }\n\n    touchEnd = (e) => {\n        e.stopPropagation();\n        this.setState({\n            startY: undefined,\n            readyToRefresh: false,\n        })\n    }\n\n    touchMove = (e) => {\n        e.stopPropagation();\n        const { close } = this.props;\n        const { startY, refreshing } = this.state;\n        const scrollDistance = 30;\n        const y = e.touches[0].pageY;\n        if (this.appContainer) {\n            const { scrollTop } = this.appContainer;\n            if (scrollTop === 0 && y > startY + scrollDistance && !refreshing) {\n                close();\n            }\n        }\n    }\n\n    render() {\n        const { showDate } = this.state;\n        const { image, imagexxl, close, thumb, name, title, date } = this.props;\n        return (\n            <div class='fixed-top bg-dark text-center pt-2' style='width: 100vw; height: 100vh;'>\n                <button class='btn btn-secondary float-right mr-2' onClick={close}>X</button>\n\n                    <div class='d-flex mb-2 px-2'>\n                        {/* {JSON.stringify(dog, null, 4)} */}\n                        {thumb && <div class={`text-center border rounded-circle imageRounded imageRoundedSmall`} style={thumb ? `background-image: url(\"${thumb}\");` : ''}>\n                            &nbsp;\n                        </div>}\n                        <div class='flex-grow-1 pl-3 pr-2 text-left' style='line-height: 1.3em;'>\n                            {name && <strong class='mr-2'>{name}:</strong>}\n                            {title}<br />\n                            <small class='text-muted'>\n                                {date && <small onClick={this.toggleDate}>\n                                    {showDate ? util.formatDate(date, { locale: 'no-NB' }) : util.formatDistance(date, new Date(), { locale: 'no-NB' })}\n                                </small>}\n                            </small>\n                        </div>\n                    </div>\n\n\n                <img src={image}\n                    class='img-fluid align-middle mt-2 mb-2'\n                    onClick={close}\n                    onTouchstart={this.touchStart}\n                    onTouchend={this.touchEnd}\n                    onTouchmove={this.touchMove}\n                    ref={c => this.appContainer = c}\n                />\n\n                <a target='_blank' rel='noopener noreferrer' href={imagexxl || image} download={imagexxl || image}>\n                    <i class='fas fa-download' /> <Text id='modal.download'>Last ned bildet</Text>\n                </a>\n            </div>\n        );\n    }\n}\n\nexport default Modal;\n","import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport { Text, Localizer } from 'preact-i18n';\n\nimport mu from '../../lib/musher-util';\n\nfunction kgToPounds(value) {\n    return 2.20462 * value;\n}\n\n@observer\nclass Weight extends Component {\n    render() {\n\t\tconst { value = 0, smallUnit } = this.props;\n\t\tconst { userStore } = this.props.stores;\n\t\tconst { user } = userStore;\n\t\tconst { settings = {} } = user;\n\n        if (settings.imperial) {\n            return (<>\n                <nobr>\n                    {util.format(kgToPounds(value), 0)} lb\n                </nobr>\n            </>);\n        }\n\n\t\treturn (<>\n            <nobr>\n                {util.format(value, 0)} kg\n            </nobr>\n        </>);\n    }\n}\n\nexport default Weight;\n","import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport { Text, Localizer, withText } from 'preact-i18n';\n\nimport mu from '../../lib/musher-util';\n\nimport LineGraph from '../../components/lineGraph';\n\n@withText((props) => ({\n    week: <Text id='workout.graph.week' />,\n    distance: <Text id='workout.graph.distance' />,\n    duration: <Text id='workout.graph.duration'>Duration</Text>,\n    rest: <Text id='workout.graph.rest'>Rest</Text>,\n    ascend: <Text id='workout.graph.ascend' />,\n    plan: <Text id='workout.graph.plan' />,\n    speedAvg: <Text id='workout.graph.speedavg'>Speed</Text>,\n    loadIndex: <Text id='workout.graph.loadindex'>Loadindex</Text>,\n\n    avgDogs: <Text id='workout.graph.avgdogs'>Avg dogs</Text>,\n    avgImages: <Text id='workout.graph.avgimages'>Avg images</Text>,\n    sledWeight: <Text id='workout.graph.sledweight'>Sled weight</Text>,\n    rating: <Text id='workout.graph.rating'>Rating</Text>,\n    temperature: <Text id='workout.graph.temperature'>Temperature</Text>,\n}))\n@observer\nclass WorkoutGraph extends Component {\n    render() {\n        const { userStore, workoutPlanStore } = this.props.stores;\n        const {\n            user,\n\t\t\tworkoutSummary,\n\t\t\tgraphWorkoutSummaryWeekDistanceCurrent, graphWorkoutSummaryWeekDistancePrev,\n\t\t\tgraphWorkoutSummaryWeekElevationCurrent, graphWorkoutSummaryWeekElevationPrev,\n            avgDayDistance, avgDayElevation, \n            avgDayDuration, avgDaySpeedAvg, avgDayLoadIndex, \n            avgDayAvgDogs, avgDayAvgImages, avgDaySledWeight,\n            avgDayRest, avgDayRating, avgDayTemperature,\n\t\t} = userStore;\n        const { settings = {} } = user;\n        const { graphPlanWeekDistanceCurrent } = workoutPlanStore;\n\n        const currentMonth = new Date().getMonth() + 1;\n        const currentYear = new Date().getFullYear();\n\n        const {\n            isLoading,\n            week,\n            distance,\n            duration,\n            rest,\n            ascend,\n            plan,\n            speedAvg,\n            loadIndex,\n            avgDogs,\n            avgImages,\n            sledWeight,\n            rating,\n            temperature,\n            year = currentYear,\n            month = currentMonth,\n            showExtra = false,\n        } = this.props;\n\t\tconst seasonStart = parseInt(month < 8 ? year - 1 : year, 10);\n\n        // const summaryMonth = workoutPlanStore.findWorkoutPlanSummaryMonth(year, monthNum) || {};\n        const seasonWeeks = util.weekRange(`${seasonStart}-08-01`, `${seasonStart + 1}-07-31`);\n        const seasonDays = util.dayRange(`${seasonStart}-08-01`, `${seasonStart + 1}-07-31`);\n\n        const xTicksAll = seasonWeeks.map(wo => wo.week);\n        const parts = Math.floor(xTicksAll.length / 5);\n        const xTicks = [];\n        for (let i = 0, l = xTicksAll.length; i < l; i += parts) {\n            xTicks.push(xTicksAll[i]);\n        }\n\n        const xTicksAllDays = seasonDays.map(wo => `${wo.day}.${wo.month}`);\n        const partsDays = Math.floor(xTicksAllDays.length / 5);\n        const xTicksDays = [];\n        for (let i = 0, l = xTicksAllDays.length; i < l; i += partsDays) {\n            xTicksDays.push(xTicksAllDays[i]);\n        }\n\n        return (\n            <>\n                {/* <h5><Text id='workout.graph.title'>Treningsstatistikk</Text> {seasonStart} - {seasonStart + 1}</h5> */}\n                <div class='w-100 mt-3 mb-4 border-top pt-5'>\n                    {/* <xmp>graphWorkoutSummaryWeekDistanceCurrent: {JSON.stringify(graphWorkoutSummaryWeekDistanceCurrent, null, 4)}</xmp>\n                    <xmp>graphWorkoutSummaryWeekDistancePrev: {JSON.stringify(graphWorkoutSummaryWeekDistancePrev, null, 4)}</xmp> */}\n                    <h5 class='text-center'><Text id='workout.graph.total-distance'>Total distance</Text></h5>\n                    <LineGraph\n                        stores={this.props.stores}\n                        width={500}\n                        height={200}\n                        showXTicks={1}\n                        xTicksVal={val => `${week} ${val}`}\n                        xTicks={xTicks}\n                        paddingTop={30}\n                        lineFromXzero={true}\n                        lineFromXmax={true}\n                        xTicksLink={'/workouts/week/'}\n\n                        dataLeft={[graphWorkoutSummaryWeekDistanceCurrent, graphWorkoutSummaryWeekDistancePrev, graphPlanWeekDistanceCurrent]}\n                        legendLeft={[`${seasonStart} ${distance}`, `${seasonStart - 1} ${distance}`, `${seasonStart} ${plan}`]}\n                        dataFillLeft={[1]}\n                        // yMaxLeft={30}\n                        // yMinLeft={0}\n                        showYTicksLeft={1}\n                        yTicksLeftPostfix={settings.imperial ? 'mi' : 'km'}\n                        unitLeft={settings.imperial ? ['mi', 'mi', 'mi'] : ['km', 'km', 'km']}\n                        avgWindowLeft={[0, 0, 0]}\n                        smoothLeft={[1, 1, 1]}\n\n                        dataRight={[graphWorkoutSummaryWeekElevationCurrent, graphWorkoutSummaryWeekElevationPrev]}\n                        legendRight={[`${seasonStart} ${ascend}`, `${seasonStart - 1} ${ascend}`]}\n                        showYTicksRight={1}\n                        yTicksRightPostfix={settings.imperial ? 'ft' : 'm'}\n                        unitRight={settings.imperial ? ['ft', 'ft'] : ['m', 'm']}\n                        avgWindowRight={[0, 0]}\n                        smoothRight={[1, 1]}\n\n                        // marker={week}\n                    />\n                </div>\n\n                {!isLoading && graphWorkoutSummaryWeekDistanceCurrent && graphWorkoutSummaryWeekDistanceCurrent.length < 3 && (\n                    <div class='mb-5 py-3 border-top border-bottom'>\n                        <div class='text-left' style='line-height: 1.0em;'>\n                            <div class='display-4 float-left text-warning mr-3'>\n                                <i class='fas fa-paw' />\n                            </div>\n                            <small>\n                                <Text id='workout.graph.too-little-data'>Foreløpig er det litt lite data for å kunne vise noen fine grafer. \n                                Etterhvert som du legger inn flere treninger så vil dette bli en fin tabell og graf som viser progresjonen din.</Text>\n                            </small>\n                        </div>\n                    </div>\n                )}\n                {showExtra && <>\n                    <div class='w-100 mt-3 mb-4 mt-5 pt-5 border-top'>\n                        <h5 class='text-center'><Text id='workout.graph.avg-rating'>Average rating/day</Text></h5>\n                        <LineGraph\n                            stores={this.props.stores}\n                            width={500}\n                            height={200}\n                            showXTicks={1}\n                            xTicksVal={val => `${val}`}\n                            xTicks={xTicksDays}\n                            paddingTop={30}\n                            lineFromXzero={true}\n                            lineFromXmax={true}\n                            // xTicksLink={'/workouts/week/'}\n\n                            dataLeft={[avgDayRating]}\n                            legendLeft={[`${seasonStart} ${rating}`]}\n                            // dataFillLeft={[1]}\n                            // yMaxLeft={30}\n                            // yMinLeft={0}\n                            showYTicksLeft={1}\n                            // yTicksLeftPostfix={settings.imperial ? 'mph' : 'km/t'}\n                            // unitLeft={settings.imperial ? ['mph', 'mph', 'mph'] : ['km/t', 'km/t', 'km/t']}\n                            avgWindowLeft={[0, 0, 0]}\n                            smoothLeft={[0, 0, 0]}\n\n                            dataRight={[avgDayTemperature]}\n                            legendRight={[`${seasonStart} ${temperature}`]}\n                            showYTicksRight={1}\n                            yTicksRightPostfix={settings.imperial ? '°F' : '°C'}\n                            // unitRight={settings.imperial ? ['ft', 'ft'] : ['m', 'm']}\n                            avgWindowRight={[0, 0]}\n                            smoothRight={[0, 0]}\n\n                            // marker={week}\n                        />\n                    </div>\n\n                    <div class='w-100 mt-3 mb-4 mt-5 pt-5 border-top'>\n                        <h5 class='text-center'><Text id='workout.graph.avg-distance'>Average distance/day</Text></h5>\n                        <LineGraph\n                            stores={this.props.stores}\n                            width={500}\n                            height={200}\n                            showXTicks={1}\n                            xTicksVal={val => `${val}`}\n                            xTicks={xTicksDays}\n                            paddingTop={30}\n                            lineFromXzero={true}\n                            lineFromXmax={true}\n                            // xTicksLink={'/workouts/week/'}\n\n                            dataLeft={[avgDayDistance]}\n                            legendLeft={[`${seasonStart} ${distance}`]}\n                            // dataFillLeft={[1]}\n                            // yMaxLeft={30}\n                            // yMinLeft={0}\n                            showYTicksLeft={1}\n                            yTicksLeftPostfix={settings.imperial ? 'mi' : 'km'}\n                            unitLeft={settings.imperial ? ['mi', 'mi', 'mi'] : ['km', 'km', 'km']}\n                            avgWindowLeft={[0, 0, 0]}\n                            smoothLeft={[0, 0, 0]}\n\n                            dataRight={[avgDayElevation]}\n                            legendRight={[`${seasonStart} ${ascend}`]}\n                            showYTicksRight={1}\n                            yTicksRightPostfix={settings.imperial ? 'ft' : 'm'}\n                            unitRight={settings.imperial ? ['ft', 'ft'] : ['m', 'm']}\n                            avgWindowRight={[0, 0]}\n                            smoothRight={[0, 0]}\n\n                            // marker={week}\n                        />\n                    </div>\n\n                    <div class='w-100 mt-3 mb-4 mt-5 pt-5 border-top'>\n                        <h5 class='text-center'><Text id='workout.graph.avg-duration'>Average duration/day</Text></h5>\n                        <LineGraph\n                            stores={this.props.stores}\n                            width={500}\n                            height={200}\n                            showXTicks={1}\n                            xTicksVal={val => `${val}`}\n                            xTicks={xTicksDays}\n                            paddingTop={30}\n                            paddingLeft={50}\n                            yTicksLeftWidth={'50px'}\n                            lineFromXzero={true}\n                            lineFromXmax={true}\n                            // xTicksLink={'/workouts/week/'}\n\n                            dataLeft={[avgDayDuration]}\n                            legendLeft={[`${seasonStart} ${duration}`]}\n                            yTicksLeftVal={val => `${util.secToHms(val)}`}\n\n                            // dataFillLeft={[1]}\n                            // yMaxLeft={30}\n                            // yMinLeft={0}\n                            showYTicksLeft={1}\n                            // yTicksLeftPostfix={settings.imperial ? 'mi' : 'km'}\n                            // unitLeft={settings.imperial ? ['mi', 'mi', 'mi'] : ['km', 'km', 'km']}\n                            avgWindowLeft={[0, 0, 0]}\n                            smoothLeft={[0, 0, 0]}\n\n                            dataRight={[avgDayRest]}\n                            legendRight={[`${seasonStart} ${rest}`]}\n                            showYTicksRight={1}\n                            yTicksRightVal={val => `${util.secToHms(val)}`}\n                            // yTicksRightPostfix={settings.imperial ? 'ft' : 'm'}\n                            // unitRight={settings.imperial ? ['ft', 'ft'] : ['m', 'm']}\n                            avgWindowRight={[0, 0]}\n                            smoothRight={[0, 0]}\n\n                            // marker={week}\n                        />\n                    </div>\n\n                    <div class='w-100 mt-3 mb-4 mt-5 pt-5 border-top'>\n                        <h5 class='text-center'><Text id='workout.graph.avg-speed'>Average speed/day</Text></h5>\n                        <LineGraph\n                            stores={this.props.stores}\n                            width={500}\n                            height={200}\n                            showXTicks={1}\n                            xTicksVal={val => `${val}`}\n                            xTicks={xTicksDays}\n                            paddingTop={30}\n                            lineFromXzero={true}\n                            lineFromXmax={true}\n                            // xTicksLink={'/workouts/week/'}\n\n                            dataLeft={[avgDaySpeedAvg]}\n                            legendLeft={[`${seasonStart} ${speedAvg}`]}\n                            // dataFillLeft={[1]}\n                            // yMaxLeft={30}\n                            // yMinLeft={0}\n                            showYTicksLeft={1}\n                            yTicksLeftPostfix={settings.imperial ? 'mph' : 'km/t'}\n                            unitLeft={settings.imperial ? ['mph', 'mph', 'mph'] : ['km/t', 'km/t', 'km/t']}\n                            avgWindowLeft={[0, 0, 0]}\n                            smoothLeft={[0, 0, 0]}\n\n                            dataRight={[avgDayLoadIndex]}\n                            legendRight={[`${seasonStart} ${loadIndex}`]}\n                            showYTicksRight={1}\n                            // yTicksRightPostfix={settings.imperial ? 'ft' : 'm'}\n                            // unitRight={settings.imperial ? ['ft', 'ft'] : ['m', 'm']}\n                            avgWindowRight={[0, 0]}\n                            smoothRight={[0, 0]}\n\n                            // marker={week}\n                        />\n                    </div>\n\n                    <div class='w-100 mt-3 mb-4 mt-5 pt-5 border-top'>\n                        <h5 class='text-center'><Text id='workout.graph.avg-dogs'>Average dogs/day</Text></h5>\n                        <LineGraph\n                            stores={this.props.stores}\n                            width={500}\n                            height={200}\n                            showXTicks={1}\n                            xTicksVal={val => `${val}`}\n                            xTicks={xTicksDays}\n                            paddingTop={30}\n                            lineFromXzero={true}\n                            lineFromXmax={true}\n                            // xTicksLink={'/workouts/week/'}\n\n                            dataLeft={[avgDayAvgDogs, avgDayAvgImages]}\n                            legendLeft={[`${seasonStart} ${avgDogs}`, `${seasonStart} ${avgImages}`]}\n                            // dataFillLeft={[1]}\n                            // yMaxLeft={30}\n                            // yMinLeft={0}\n                            showYTicksLeft={1}\n                            // yTicksLeftPostfix={settings.imperial ? 'mph' : 'km/t'}\n                            // unitLeft={settings.imperial ? ['mph', 'mph', 'mph'] : ['km/t', 'km/t', 'km/t']}\n                            avgWindowLeft={[0, 0, 0]}\n                            smoothLeft={[0, 0, 0]}\n\n                            dataRight={[avgDaySledWeight]}\n                            legendRight={[`${seasonStart} ${sledWeight}`]}\n                            showYTicksRight={1}\n                            // yTicksRightPostfix={settings.imperial ? 'ft' : 'm'}\n                            // unitRight={settings.imperial ? ['ft', 'ft'] : ['m', 'm']}\n                            avgWindowRight={[0, 0]}\n                            smoothRight={[0, 0]}\n\n                            // marker={week}\n                        />\n                    </div>\n\n                    {/* <xmp>{JSON.stringify(avgDayDuration, null, 4)}</xmp> */}\n                </>}\n            </>\n        );\n    }\n}\n\nexport default WorkoutGraph;\n","import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport { Text, Localizer } from 'preact-i18n';\nimport linkState from 'linkstate';\n\n@observer\nclass Invite extends Component {\n    inviteKennel = async () => {\n        const { friendEmail: email } = this.state;\n\t\tconst { userStore } = this.props.stores;\n        const response = await userStore.inviteKennel({ email });\n        this.setState({\n            response,\n            inviteSent: true,\n        });\n    }\n\n    inviteNew = () => {\n        this.setState({\n            inviteSent: false,\n        });\n    }\n\n    hideInvite = async () => {\n        const { userStore } = this.props.stores;\n        await userStore.updateSetting({ 'settings.hideInvite': 1 });\n        this.setState({\n            hideInvite: true,\n        });\n    }\n\n    render() {\n        const { inviteSent, hideInvite } = this.state;\n\t\tconst { userStore } = this.props.stores;\n        const { forceShow } = this.props;\n        const { user } = userStore;\n        const { settings = {} } = user;\n        if (!forceShow && settings.hideInvite || hideInvite) {\n            return '';\n        }\n        if (inviteSent) {\n            return (\n                <div class='col-12'>\n                    <Text id='users.invite.thanks'>Takk for at du hjelper oss til å bli flere 😃</Text>\n                    <button type='button' class='btn btn-sm btn-link mb-2' onClick={this.inviteNew}>\n                        <Text id='users.invite.more'>Invitere flere</Text>\n                    </button>\n                </div>\n            );\n        }\n        return (\n            <div class='col-12 pb-4 clearfix'>\n                <h5><Text id='users.invite.title'>Inviter ny kennel til The Musher</Text></h5>\n                <p>\n                    <Text id='users.invite.text'>Jeg håper du vil hjelpe oss til å bli flere. Appen vil bli lansert veldig snart og det er påtide å invitere inn flere brukere.</Text>\n                </p>\n                <div>\n                    <div class='form-row align-items-center'>\n                        <div class='col-auto'>\n                            <label class='sr-only' for='inlineFormInput'><Text id='users.invite.email'>E-post</Text></label>\n                            <Localizer>\n                                <input type='text' class='form-control form-control-sm mb-2' id='inlineFormInput'\n                                    placeholder={<Text id='users.invite.email-placeholder'>E-post til ny kennel</Text>}\n                                    onInput={linkState(this, 'friendEmail')}\n                                />\n                            </Localizer>\n                        </div>\n                        <div class='col-auto'>\n                            <button type='button' class='btn btn-sm btn-primary mb-2' onClick={this.inviteKennel}>\n                                <Text id='users.invite.send'>Send invitasjon</Text>\n                            </button>\n                        </div>\n                    </div>\n                </div>\n                {!forceShow && <button type='button' class='btn btn-sm btn-link mb-2 float-left' onClick={this.hideInvite}>\n                    <i class='fas fa-eye-slash' /> <Text id='users.invite.hide'>Skjul</Text>\n                </button>}\n            </div>\n        );\n    }\n}\n\nexport default Invite;\n","import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport { Text, Localizer } from 'preact-i18n';\n\nimport DogSimplePublic from './simplePublic';\n\n@observer\nclass DogScroller extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            imageIdx: 0,\n        };\n    }\n\n    scrollImages = (e) => {\n        const { dogs } = this.props;\n\n        const { scrollLeft, scrollWidth, clientWidth } = e.target;\n        const imageStep = clientWidth;\n        const imageIdx = scrollLeft / imageStep;\n        // console.log({ e, imageStep, imageIdx, scrollLeft, scrollWidth, clientWidth });\n\n        const nearestInt = Math.round(imageIdx);\n        const diff = Math.abs(nearestInt - imageIdx);\n        // console.log({ nearestInt, diff });\n        if (Number.isInteger(imageIdx) || diff < 0.1) {\n            this.setState({\n                imageIdx: nearestInt,\n            });\n        }\n    }\n\n    sortByName = (a, b) => {\n        const { allDogs = [] } = this.props;\n        const dogA = allDogs.find(e => e.id === a);\n        const dogB = allDogs.find(e => e.id === b);\n        if (dogA && dogB) {\n            if (dogA.name > dogB.name) {\n                return 1;\n            }\n        }\n        return -1;\n    }\n\n    render() {\n        const { imageIdx } = this.state;\n        const { dogs, allDogs = [], size = 'medium', onDogClick = () => {} } = this.props;\n\n        return (\n            <div class='w-100'>\n                <div\n                    class='d-flex flex-row flex-nowrap no-scrollbar'\n                    style='overflow: auto; scroll-snap-type: x mandatory;'\n                    onScroll={this.scrollImages}\n                >\n                    {dogs && dogs.sort(this.sortByName).map((dogId, idx) => {\n                        const dog = allDogs.find(e => e.id === dogId);\n                        if (!dog) {\n                            return '';\n                        }\n                        return (\n                            <div class='col clearfix position-relative p-0 mx-2'>\n                                <div\n                                    class={`w-100 h-100 text-center rounded-lg imageContainer d-flex justify-content-center align-items-center`}\n                                    style={`\n                                        flex-wrap: wrap;\n                                        overflow-y: hidden;\n                                    `}\n                                    onTouchstart={(e) => { e.stopPropagation(); }}\n                                    onTouchend={(e) => { e.stopPropagation(); }}\n                                    onTouchmove={(e) => { e.stopPropagation(); }}\n                                >\n                                    <DogSimplePublic\n                                        stores={this.props.stores}\n                                        dog={dog}\n                                        dogs={allDogs.filter(d => dogs.indexOf(d.id) > -1).sort((a, b) => a.name > b.name ? 1 : -1)}\n                                        className='mx-auto'\n                                        showName={true}\n                                        showPosition={false}\n                                        size={size}\n                                        onDogClick={onDogClick} \n                                    />\n                                    {/* <xmp>{JSON.stringify(img, null, 4)}</xmp> */}\n                                </div>\n                            </div>\n                        );\n                    })}\n                </div>\n            </div>\n        );\n    }\n}\n\nexport default DogScroller;\n","import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport { route } from 'preact-router';\nimport { Text, Localizer } from 'preact-i18n';\nimport Markdown from 'preact-markdown';\n\nimport PubSub, { topics } from '../../lib/pubsub';\nimport mu from '../../lib/musher-util';\nconst MARGIN_TOP = mu.marginTop(false);\nconst MARGIN_TOP_BACK = mu.marginTopBack(false);\nconst MARGIN_BOTTOM = mu.marginBottom();\n\nimport Dog from '../../components/dog';\nimport User from '../../components/user';\nimport FormGraph from '../../components/team/formGraph';\nimport TeamLine from '../../components/team/publicLine';\nimport WorkoutGraph from '../../components/workout/graph';\nimport WorkoutGraphAvg from '../../components/workout/graphAvg';\nimport WorkoutTotals from '../../components/workout/totals';\nimport WorkoutStatus from '../../components/workout/status';\nimport Workout from '../../components/workout';\nimport Map from '../../components/map';\nimport PremiumBadge from '../../components/premium/badge';\nimport UserInvite from '../../components/user/invite';\nimport TeamConnectConfirm from '../../components/team/connect-confirm';\nimport Images from '../../components/form/images';\nimport Files from '../../components/form/files';\nimport Achievements from '../../components/form/achievements';\nimport Links from '../../components/form/links';\nimport ImageScroller from '../../components/imageScroller';\nimport CalendarPlan from '../../components/workout/calendarPlan';\nimport Ad from '../../components/ad/';\n\nimport ScrollIntoView from '../../components/util/scrollIntoView';\n\nconst initialState = {\n    newTeam: {},\n    submenu: 'stats',\n};\n\nconst LIMIT = 10;\n\n\n@observer\nclass Input extends Component {\n    handleImageErrored = (e) => {\n        const image = e.target;\n        image.onerror = null;\n        setTimeout(() => {\n            image.src += `?${new Date()}`;\n        }, 1000);\n    }\n\n    removeImage = async (e) => {\n        const { teamStore } = this.props.stores;\n        const { team } = this.props;\n        const imageName = e.target.parentElement.dataset.name || e.target.dataset.name;\n        teamStore.removeImage({\n            id: team.id,\n            name: imageName,\n        });\n    }\n\n    removeMainImage = () => {\n        const { team, field, updateField } = this.props;\n        updateField({ id: team.id, field, value: {} });\n    }\n\n    render() {\n        const { saved, team, field, icon, title, type, help, onInput, updateField, datalist = [], showImages = true, showFiles = true, addToImages = true } = this.props;\n        const value = team[field];\n        if (type === 'datalist') {\n            return (\n                <div class={`form-group  mb-5 pb-1 border-bottom ${saved[`${field}.${team.id}`] ? 'is-valid' : ''}`}>\n                    <label for={`${field}Input`}>{icon && <i class={`${icon} text-muted`} />} {title}</label>\n                    <input list={`list-${field}`} class={`form-control ${saved[`${field}.${team.id}`] ? 'is-valid' : ''}`} id={`${field}Input`} aria-describedby={`${field}Help`}\n                        value={value}\n                        data-id={team.id}\n                        data-field={field}\n                        onInput={onInput}\n                    />\n                    <datalist id={`list-${field}`} >\n                        {datalist.map(el => (\n                            <option value={el[0]}>{el[1]}</option>\n                        ))}\n                    </datalist>\n                    {saved[`${field}.${team.id}`] ? <div class={`valid-feedback`} style='display: block;'><Text id='teams.changes-saved'>Endringene er lagret</Text></div> : \n                        <small id={`${field}Help`} class='form-text text-muted'>{help}</small>}\n                </div>\n            );\n        }\n\n        if (type === 'select') {\n            return (\n                <div class={`form-group  mb-5 pb-1 border-bottom ${saved[`${field}.${team.id}`] ? 'is-valid' : ''}`}>\n                    <label for={`${field}Input`}>{icon && <i class={`${icon} text-muted`} />} {title}</label>\n\n                    <select\n                        list={`list-${field}`}\n                        class={`form-control ${saved[`${field}.${team.id}`] ? 'is-valid' : ''}`}\n                        id={`${field}Input`}\n                        aria-describedby={`${field}Help`}\n                        value={value}\n                        data-id={team.id}\n                        data-field={field}\n                        onInput={onInput}\n                        autocomplete='off'\n                    >\n                        <option value=''>-- <Text id='teams.choose-country'>Velg land</Text> --</option>\n                        {datalist.map(el => (\n                            <option value={el[0]}>{el[1]}</option>\n                        ))}\n                    </select>\n                    {saved[`${field}.${team.id}`] ? <div class={`valid-feedback`} style='display: block;'><Text id='teams.changes-saved'>Endringene er lagret</Text></div> : \n                        <small id={`${field}Help`} class='form-text text-muted'>{help}</small>}\n                </div>\n            );\n        }\n\n\n        if (type === 'image') {\n            return (\n                <div class={`form-group ${saved[`${field}.${team.id}`] ? 'is-valid' : ''}`}>\n                    <label for={`${field}Input`}>{icon && <i class={`${icon} text-muted`} />} {title}</label>\n\n                    <div class='container-fluid'>\n                        <div class='row'>\n                            {team[field] && team[field].s3SmallLink && <div class='col-3 p-1'>\n                                <img src={team[field].s3SmallLink} class='img-fluid border rounded-lg' onError={this.handleImageErrored} />\n                                <button class='btn btn-sm btn-link'\n                                    onClick={this.removeMainImage}\n                                    data-name={team[field].name}\n                                ><i class='fas fa-trash' /> Del</button>\n                                <span class='badge badge-success'>Main</span>\n                            </div>}\n                            {showImages && <>                            \n                                {team.images && team.images.map(img => (\n                                    <div class='col-3 p-1'>\n                                        <img src={img.s3SmallLink} class='img-fluid' onError={this.handleImageErrored} />\n                                        <button class='btn btn-sm btn-link'\n                                            onClick={this.removeImage}\n                                            data-name={img.name}\n                                        ><i class='fas fa-trash' /> Del</button>\n                                    </div>\n                                ))}\n                            </>}\n                        </div>\n                    </div>\n                    <Images saved={saved} object={team} field={field} updateField={updateField} addToImages={addToImages} autoOpen={false} />\n                    {saved[`${field}.${team.id}`] ? <div class={`valid-feedback`} style='display: block;'><Text id='teams.changes-saved'>Endringene er lagret</Text></div> : \n                        <small id={`${field}Help`} class='form-text text-muted'>{help}</small>}\n                </div>\n            );\n        }\n        if (type === 'toggle') {\n            return (\n                <div class={`form-group ${saved[`${field}.${team.id}`] ? 'is-valid' : ''}`}>\n                    <label for={`${field}Input`}>{icon && <i class={`${icon} text-muted`} />} {title}</label>\n                    <div class='custom-control custom-switch'>\n                        <input type='checkbox'\n                            class='custom-control-input'\n                            id={`${field}Input`}\n                            value={value === 1 ? 0 : 1}\n                            data-id={team.id}\n                            data-field={field}\n                            onInput={onInput}\n                            checked={value == 1 ? 'checked' : ''}\n                        />\n                        <label class='custom-control-label' for={`${field}Input`} />\n                    </div>\n                    {saved[`${field}.${team.id}`] ? <div class={`valid-feedback`} style='display: block;'><Text id='teams.changes-saved'>Endringene er lagret</Text></div> : \n                        <small id={`${field}Help`} class='form-text text-muted'>{help}</small>}\n                </div>\n            );\n        }\n        if (type === 'textarea') {\n            return (\n                <div class={`form-group ${saved[`${field}.${team.id}`] ? 'is-valid' : ''}`}>\n                    <label for={`${field}Input`}>{icon && <i class={`${icon} text-muted`} />} {title}</label>\n                    <textarea type='text' class={`form-control ${saved[`${field}.${team.id}`] ? 'is-valid' : ''}`} id={`${field}Input`} aria-describedby={`${field}Help`}\n                        value={value}\n                        data-id={team.id}\n                        data-field={field}\n                        onInput={onInput}\n                        rows={10}\n                    />\n                    {saved[`${field}.${team.id}`] ? <div class={`valid-feedback`} style='display: block;'><Text id='teams.changes-saved'>Endringene er lagret</Text></div> : \n                        <small id={`${field}Help`} class='form-text text-muted'>{help}</small>}\n                </div>\n            );\n        }\n        if (type === 'file') {\n            return (\n                <div class={`form-group ${saved[`${field}.${team.id}`] ? 'is-valid' : ''}`}>\n                    <label for={`${field}Input`}>{icon && <i class={`${icon} text-muted`} />} {title}</label>\n                    {showFiles && <>\n                        <div class='container-fluid'>\n                            <div class='row'>\n\n                                {(!team.files || team.files.length === 0) && <>\n                                    <div class='text-center text-muted'>\n                                        <div class='display-1'><i class='fas fa-file' /></div>\n                                        <h3><Text id='teams.no-files-title'>No files attached to this dog!</Text></h3>\n                                        <Text id='teams.no-files-text'>You can upload files to this dog inside edit. These files can be of any type. Ie: Certificates, test, etc.</Text>\n                                    </div>\n                                </>}\n\n                                {team.files && team.files.map(file => (\n                                    <div class='col-12 p-1'>\n                                        <span class='font-weight-lighter mr-2'>{util.isoDate(file.createdDate, false, false, true)}</span>\n                                        <span class='mr-2'>{file.name}</span>\n                                        <span class='font-weight-lighter mr-2'>{util.formatBytes(file.size, 1)}</span>\n                                        <button class='btn btn-sm btn-link float-right p-0'\n                                            onClick={this.removeFile}\n                                            data-name={file.name}\n                                        ><i class='fas fa-trash-alt' /> Del</button>\n                                    </div>\n                                ))}\n                            </div>\n                        </div>\n                    </>}\n                    <Files saved={saved} object={team} field={field} updateField={updateField} />\n                    {saved[`${field}.${team.id}`] ? <div class={`valid-feedback`} style='display: block;'><Text id='teams.changes-saved'>Endringene er lagret</Text></div> : \n                        <small id={`${field}Help`} class='form-text text-muted'>{help}</small>}\n                </div>\n            );\n        }        \n        if (field === 'links') {\n            return (\n                <div class={`form-group ${saved[`${field}.${team.id}`] ? 'is-valid' : ''}`}>\n                    <label for={`${field}Input`}>{icon && <i class={`${icon} text-muted`} />} {title}</label>\n                    <Links saved={saved} stores={this.props.stores} object={team} field={field} updateField={updateField} />\n                    {saved[`${field}.${team.id}`] ? <div class={`valid-feedback`} style='display: block;'><Text id='teams.changes-saved'>Endringene er lagret</Text></div> : \n                        <small id={`${field}Help`} class='form-text text-muted'>{help}</small>}\n                </div>\n            );\n        }\n        if (field === 'achievements') {\n            return (\n                <div class={`form-group ${saved[`${field}.${team.id}`] ? 'is-valid' : ''}`}>\n                    <label for={`${field}Input`}>{icon && <i class={`${icon} text-muted`} />} {title}</label>\n                    <Achievements saved={saved} stores={this.props.stores} object={team} field={field} updateField={updateField} />\n                    {saved[`${field}.${team.id}`] ? <div class={`valid-feedback`} style='display: block;'><Text id='teams.changes-saved'>Endringene er lagret</Text></div> : \n                        <small id={`${field}Help`} class='form-text text-muted'>{help}</small>}\n                </div>\n            );\n        }\n        return (\n            <div class={`form-group ${saved[`${field}.${team.id}`] ? 'is-valid' : ''}`}>\n                <label for={`${field}Input`}>{icon && <i class={`${icon} text-muted`} />} {title}</label>\n                <input type='text' class={`form-control ${saved[`${field}.${team.id}`] ? 'is-valid' : ''}`} id={`${field}Input`} aria-describedby={`${field}Help`}\n                    value={value}\n                    data-id={team.id}\n                    data-field={field}\n                    onInput={onInput}\n                />\n                {saved[`${field}.${team.id}`] ? <div class={`valid-feedback`} style='display: block;'><Text id='teams.changes-saved'>Endringene er lagret</Text></div> : \n                    <small id={`${field}Help`} class='form-text text-muted'>{help}</small>}\n            </div>\n        );\n    }\n}\n\n\n@observer\nclass TeamsDetail extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            ...initialState,\n        };\n        this.updateTimer = {};\n    }\n\n    async loadAll(props = this.props) {\n        this.setState({ isLoading: true });\n        await this.loadTeam(props),\n        await this.loadSummaryData(props);\n        this.setState({ isLoading: false });\n    }\n\n    async loadSummaryData(props = this.props) {\n        await Promise.all([\n            this.loadWorkoutPlans(props),\n            this.loadWorkoutSummary(props),\n            this.loadHeatmap(props),\n            this.loadWorkouts(),\n        ]);\n    }\n\n    loadTeam = async (props = this.props) => {\n\t\tconst { teamStore, userStore, workoutStore } = props.stores;\n        await teamStore.load(props.team, false, { addData: ['dogs', 'users', 'followers', 'blockedFollowers'] });\n        const { team } = teamStore;\n        await userStore.getWorkoutSummary({ team: team.id });\n        teamStore.plotFormGraph();\n    }\n\n    loadHeatmap = async (props = this.props) => {\n\t\tconst { workoutStore } = props.stores;\n        await workoutStore.getHeatmap(props.team);\n    }\n\n\tloadMore = () => {\n\t\tconst { offset } = this.state;\n\t\tthis.setState({ offset: offset + LIMIT }, () => {\n\t\t\tthis.loadWorkouts(true);\n\t\t});\n\t}\n\n    loadWorkouts = async (append = false) => {\n\t\tthis.setState({ isLoading: true });\n\t\tconst { workoutStore } = this.props.stores;\n        const { team } = this.props;\n\t\tconst { offset } = this.state;\n\t\tawait workoutStore.load({ query: { team }, limit: LIMIT, offset }, append);\n\t\t// await this.loadWorkoutSummary();\n\t\tthis.setState({ isLoading: false });\n\t}\n\n    loadWorkoutSummary = async (props = this.props) => {\n\t\tconst { userStore, workoutStore } = props.stores;\n\n\t\tconst currentMonth = new Date().getMonth() + 1;\n        const currentYear = new Date().getFullYear();\n\t\tconst { month = currentMonth, year = currentYear } = props;\n\n\t\tconst { currentTeam } = workoutStore;\n        const viewTeam = props.team || currentTeam;\n        await userStore.getWorkoutSummary({ team: viewTeam, year, month });\n\t\t// await userStore.getWorkoutSummaryDay({ month, year, team: viewTeam });\n\t\t// await userStore.getWorkoutSummaryDay({ month, year: year - 1, team: viewTeam });\n\t\tawait userStore.getWorkoutSummaryDay({ daysBack: 500, team: viewTeam });\n    }\n\n    loadWorkoutPlans = async (props = this.props) => {\n\t\tconst { year } = props;\n\t\tconst currentMonth = new Date().getMonth() + 1;\n\t\tconst currentYear = util.getYear();\n\t\tconst seasonStart = parseInt(year || (currentMonth < 8 ? currentYear - 1 : currentYear), 10);\n\t\tconst { workoutPlanStore, teamStore } = props.stores;\n        const { team } = teamStore;\n\n\t\tworkoutPlanStore.updateItem('workoutPlans', []);\n\t\tworkoutPlanStore.updateItem('workoutPlan', {});\n\t\tworkoutPlanStore.resetGraphPlanWeekDistanceCurrent();\n\n\t\tif (team.id) {\n\t\t\tawait workoutPlanStore.load({\n\t\t\t\tquery: {\n\t\t\t\t\tteam: team.id,\n\t\t\t\t\tseasonYear: seasonStart,\n\t\t\t\t},\n\t\t\t\taddData: ['tips'],\n\t\t\t});\n\t\t\tconst { workoutPlans } = workoutPlanStore;\n\t\t\tconst workoutPlanCurrent = workoutPlans[0] || {};\n\t\t\tif (workoutPlanCurrent.id) {\n\t\t\t\tawait workoutPlanStore.load(workoutPlanCurrent.id);\n\t\t\t\tworkoutPlanStore.prepareWeekGraphs({ year });\n\t\t\t} else {\n\t\t\t\tworkoutPlanStore.updateKeyValue('workoutPlan', {});\n\t\t\t\tworkoutPlanStore.updateKeyValue('workoutPlans', []);\n\t\t\t\tworkoutPlanStore.resetGraphPlanWeekDistanceCurrent();\n\t\t\t}\n\t\t}\n\t}\n\n\tdeleteTeam = async () => {\n\t\tconst { teamStore } = this.props.stores;\n\t\tconst { team } = teamStore;\n        await teamStore.saveField(team.id, 'offline', 1);\n\t\tPubSub.publish(topics.STATUS_MESSAGE, {\n\t\t\tmessage: 'Teamet er slettet',\n\t\t\ttype: 'success',\n\t\t\ticon: 'fas fa-check',\n\t\t});\n        route(`/teams/list`);\n\t}\n\n    updateField = (e) => {\n        const { id, field, type, elementtype, isNew } = e.target.dataset;\n        const value = e.target.value;\n        this.updateFieldValue({ id: parseInt(id, 10), field, value, type, elementtype, isNew });\n    }\n\n    updateFieldValue = ({ id, field, value, datatype, elementtype, isNew = false, skipTimer = false }) => {\n        const { teamStore } = this.props.stores;\n        let newValue = value;\n\n        let localObjectValue = value;\n        const { team } = teamStore;\n        if (field === 'images') {\n            if (Array.isArray(team.images) && Array.isArray(value)) {\n                localObjectValue = [...team.images, ...value];\n            }\n        }\n        if (field === 'achievements') {\n            if (Array.isArray(team.achievements)) {\n                if (Array.isArray(value)) {\n                    localObjectValue = [...team.achievements, ...value];\n                } else {\n                    localObjectValue = [...team.achievements, value];\n                }\n            }\n        }\n        if (field === 'links') {\n            if (Array.isArray(team.links)) {\n                if (Array.isArray(value)) {\n                    localObjectValue = [...team.links, ...value];\n                } else {\n                    localObjectValue = [...team.links, value];\n                }\n            }\n        }\n        if (field === 'files') {\n            if (Array.isArray(team.files)) {\n                if (Array.isArray(value)) {\n                    localObjectValue = [...team.files, ...value];\n                } else {\n                    localObjectValue = [...team.files, value];\n                }\n            }\n        }        \n        if (datatype === 'array' && !Array.isArray(value)) {\n            if (elementtype === 'number') {\n                newValue = value.split(',').map(e => parseFloat(e) || e);\n            } else  {\n                newValue = value.split(',');\n            }\n            // console.log('updateFieldValue', id, field, value, datatype, elementtype);\n        }\n\n        if (isNew) {\n            teamStore.updateObjectKeyValue('newTeam', field, value);\n        } else {\n            teamStore.updateField(id, field, localObjectValue);\n            if (skipTimer) {\n                this.doUpdateField(id, field, newValue);\n            } else {\n                clearTimeout(this.updateTimer[field]);\n                this.updateTimer[field] = setTimeout(async () => {\n                    this.doUpdateField(id, field, newValue);\n                }, 500);\n            }\n        }\n    }\n\n    async doUpdateField(id, field, value) {\n        const { teamStore } = this.props.stores;\n        await teamStore.saveField(id, field, value);\n    }\n\n    reCalculateFitness = async () => {\n\t\tconst { recalculated } = this.state;\n\t\tif (recalculated) {\n\t\t\treturn true;\n\t\t}\n\t\tconst { teamStore } = this.props.stores;\n\t\tconst { team } = teamStore;\n\t\tthis.setState({ recalculated: true });\n        await teamStore.reCalcFitness(team.id);\n    }\n\n    chooseSubmenu = (e) => {\n\t\tconst submenu = e.target.parentElement.dataset.menu || e.target.dataset.menu;\n\t\tthis.setState({ submenu });\n\t}\n\n    back = () => {\n        const { history } = this.props.stores;\n        history.goBack();\n    }\n\n\tcomponentDidMount() {\n        this.loadAll();\n    }\n\n    componentWillReceiveProps(nextProps) {\n        // console.log('componentWillReceiveProps', nextProps);\n        if (nextProps.team !== this.props.team) {\n            this.loadAll(nextProps);\n        }\n        if (nextProps.month !== this.props.month || nextProps.year !== this.props.year) {\n            this.loadSummaryData(nextProps);\n        }\n    }\n\n\trender() {\n        const { submenu, recalculated } = this.state;\n\t\tconst { teamStore, userStore, workoutPlanStore, workoutStore } = this.props.stores;\n        const { workoutPlan, workoutPlans } = workoutPlanStore;\n        const { heatmap, workouts, currentTeam } = workoutStore;\n\n        const currentMonth = new Date().getMonth() + 1;\n        const currentYear = new Date().getFullYear();\n\n\t\tconst { month = currentMonth, year = currentYear } = this.props;\n\t\tconst seasonStart = parseInt(month < 8 ? year - 1 : year, 10);\n\n\t\tconst { team, dogs, users, followers = [], blockedFollowers = [], saved, graphFitness } = teamStore;\n\n        const { image, imageHeader } = team;\n        const { isAdmin, user } = userStore;\n        const { language = 'en' } = user;\n        const {\n            user: currentUser,\n        } = userStore;\n        const isTeamAdmin = team.user === currentUser.id;\n        const teamAmbition = userStore.findTeamAmbition({ ambition: team.ambitions, language });\n        const teamType = userStore.findTeamType({ type: team.type, language });\n\n        const defaultImage = {\n            s3XXLargeLink: './assets/homerun-race-logo.png',\n        };\n\n        const headerImage = imageHeader && imageHeader.s3XXLargeLink ? imageHeader : defaultImage;\n        const teamImage = image && image.s3LargeLink ? image : null;\n\n\t\treturn (\n\t\t\t<div class='container-fluid' style={`margin-bottom: ${MARGIN_BOTTOM}; margin-top: ${MARGIN_TOP};`}>\n                <button class='btn btn-link pl-0 fixed-top text-primary'\n                    style={`top: ${MARGIN_TOP_BACK}; left: 5px; font-size: 35px; width: 45px;`}\n                    onClick={this.back}>\n                    <i class='fas fa-arrow-circle-left' />\n                </button>\n\n                <div class='row mb-1'>\n                    <div class='w-100 position-relative'\n                        style={`height: 25vh; background-size: cover; background-repeat: no-repeat; background-position: 50% 50%; background-color: #a0a0a0; ${headerImage ? `background-image: url(\"${headerImage.s3XXLargeLink}\");` : ''}`}\n                    >\n                        <a class='btn btn-sm btn-primary position-absolute'\n                            style={`top: 5px; right: 10px;`}\n                            href={`/teams/edit/${team.id}`}\n                        >\n                            <i class='fas fa-edit' /> <Text id='teams.edit'>Endre</Text>\n                        </a>\n                    </div>\n\t\t\t\t\t<div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-3'>\n                        <div class='row'>\n                            <div class='col-3 col-sm-4 col-md-3 col-lg-4 position-relative'>\n                                <div\n                                    class={`text-center border border-white rounded-circle position-absolute imageRounded imageRoundedResponsive imageRoundedResponsivePosition`}\n                                    style={`left: 20px; ${teamImage ? `background-image: url(\"${teamImage.s3LargeLink}\"); background-size: cover; background-repeat: no-repeat; background-position: 50% 50%;` : ''}`}\n                                >\n                                    {!teamImage && <i class='fas fa-users text-muted mt-4' style='font-size: 60px;' />}\n                                </div>\n                                &nbsp;\n                            </div>\n                            <div class='col-9 col-sm-8 col-md-9 col-lg-8' style='line-height: 1.2em;'>\n                                <h5 class='my-0'>{team.name}</h5>\n                                <small class='text-muted'>\n                                    {team.place ? `${team.place}, ` : ''}{team.country}\n                                </small><br />\n                                {teamType && <a href={`/settings/team/${team.id}`}><span class='badge badge-pill badge-secondary mt-2'>{teamType}</span></a>}\n                                {teamAmbition && <a href={`/settings/team/${team.id}`}><span class='badge badge-pill badge-secondary mt-2 ml-2'>{teamAmbition}</span></a>}\n                                {isTeamAdmin && <span class='badge badge-pill badge-primary mt-2 ml-2'><Text id='teams.admin'>Admin</Text></span>}\n                            </div>\n                        </div>\n                    </div>\n                </div>\n\n\t\t\t\t<div class='row'>\n\t\t\t\t\t<div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 my-1'>\n                        {team.public > 0 && <>\n                            <a href={`/teams/public/${team.uuidv4}`} class='btn btn-success btn-block'><i class='fas fa-users' /> <Text id='teams.public-profile'>Public profile</Text></a>\n                        </>}\n                    </div>\n                </div>\n\n\t\t\t\t<div class='row'>\n                    <div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 my-1'>\n\t\t\t\t\t\t<div class='row'>\n                            <div class='w-100 overflow-hidden'>\n                                <div\n                                    class='d-flex flex-row flex-nowrap pb-2 px-1'\n                                    style='overflow: auto; scroll-snap-type: x mandatory;'\n                                >\n                                    <div class='col px-0 pt-2'>\n                                        <button\n                                            class={`btn btn-block rounded-pill-left rounded-none ${submenu === 'stats' ? 'btn-primary' : 'btn-outline-primary'} text-nowrap`}\n                                            style='text-overflow: ellipsis; overflow: hidden;'\n                                            data-menu='stats'\n                                            onClick={this.chooseSubmenu}\n                                        ><i class='fas fa-tachometer-alt' /> <Text id='teams.stats'>Stats</Text></button>\n                                        {submenu === 'stats' && <ScrollIntoView horizontal={'center'} vertical={'end'} />}\n                                    </div>\n                                    <div class='col px-0 pt-2'>\n                                        <button\n                                            class={`btn btn-block rounded-none ${submenu === 'presentation' ? 'btn-primary' : 'btn-outline-primary'} text-nowrap`}\n                                            style='text-overflow: ellipsis; overflow: hidden;'\n                                            data-menu='presentation'\n                                            onClick={this.chooseSubmenu}\n                                        ><i class='fas fa-chalkboard-teacher' /> <Text id='teams.presentation'>Presentation</Text></button>\n                                        {submenu === 'presentation' && <ScrollIntoView horizontal={'center'} vertical={'end'} />}\n                                    </div>\n                                    <div class='col px-0 pt-2'>\n                                        <button\n                                            class={`btn btn-block rounded-none ${submenu === 'pictures' ? 'btn-primary' : 'btn-outline-primary'} text-nowrap`}\n                                            style='text-overflow: ellipsis; overflow: hidden;'\n                                            data-menu='pictures'\n                                            onClick={this.chooseSubmenu}\n                                        ><i class='fas fa-images' /> <Text id='teams.pictures'>Pictures</Text></button>\n                                        {submenu === 'pictures' && <ScrollIntoView horizontal={'center'} vertical={'end'} />}\n                                    </div>\n                                    <div class='col px-0 pt-2'>\n                                        <button\n                                            class={`btn btn-block rounded-none ${submenu === 'dogs' ? 'btn-primary' : 'btn-outline-primary'} text-nowrap`}\n                                            style='text-overflow: ellipsis; overflow: hidden;'\n                                            data-menu='dogs'\n                                            onClick={this.chooseSubmenu}\n                                        ><i class='fas fa-dog' /> <Text id='teams.dogs-menu'>Dogs</Text></button>\n                                        {submenu === 'dogs' && <ScrollIntoView horizontal={'center'} vertical={'end'} />}\n                                    </div>\n                                    <div class='col px-0 pt-2'>\n                                        <button\n                                            class={`btn btn-block rounded-none ${submenu === 'mushers' ? 'btn-primary' : 'btn-outline-primary'} text-nowrap`}\n                                            style='text-overflow: ellipsis; overflow: hidden;'\n                                            data-menu='mushers'\n                                            onClick={this.chooseSubmenu}\n                                        ><i class='fas fa-user' /> <Text id='teams.mushers'>Mushers</Text></button>\n                                        {submenu === 'mushers' && <ScrollIntoView horizontal={'center'} vertical={'end'} />}\n                                    </div>\n                                    <div class='col px-0 pt-2'>\n                                        <button\n                                            class={`btn btn-block rounded-none ${submenu === 'workouts' ? 'btn-primary' : 'btn-outline-primary'} text-nowrap`}\n                                            style='text-overflow: ellipsis; overflow: hidden;'\n                                            data-menu='workouts'\n                                            onClick={this.chooseSubmenu}\n                                        ><i class='fas fa-running' /> <Text id='teams.workouts'>Workouts</Text></button>\n                                        {submenu === 'workouts' && <ScrollIntoView horizontal={'center'} vertical={'end'} />}\n                                    </div>\n                                    <div class='col px-0 pt-2'>\n                                        <button\n                                            class={`btn btn-block rounded-none ${submenu === 'workoutplan' ? 'btn-primary' : 'btn-outline-primary'} text-nowrap`}\n                                            style='text-overflow: ellipsis; overflow: hidden;'\n                                            data-menu='workoutplan'\n                                            onClick={this.chooseSubmenu}\n                                        ><i class='fas fa-calendar-alt' /> <Text id='workouts.workoutplan'>Treningsplan</Text></button>\n                                        {submenu === 'workoutplan' && <ScrollIntoView horizontal={'center'} vertical={'end'} />}\n                                    </div>\n                                    <div class='col px-0 pt-2'>\n                                        <button\n                                            class={`btn btn-block rounded-none ${submenu === 'fitness' ? 'btn-primary' : 'btn-outline-primary'} text-nowrap`}\n                                            style='text-overflow: ellipsis; overflow: hidden;'\n                                            data-menu='fitness'\n                                            onClick={this.chooseSubmenu}\n                                        ><i class='fas fa-chart-line' /> <Text id='teams.fitness-menu'>Fitness</Text></button>\n                                        {submenu === 'fitness' && <ScrollIntoView horizontal={'center'} vertical={'end'} />}\n                                    </div>\n                                    <div class='col px-0 pt-2'>\n                                        <button\n                                            class={`btn btn-block rounded-none ${submenu === 'compare' ? 'btn-primary' : 'btn-outline-primary'} text-nowrap`}\n                                            style='text-overflow: ellipsis; overflow: hidden;'\n                                            data-menu='compare'\n                                            onClick={this.chooseSubmenu}\n                                        ><i class='fas fa-exchange-alt' /> <Text id='teams.compare'>Compare</Text></button>\n                                        {submenu === 'compare' && <ScrollIntoView horizontal={'center'} vertical={'end'} />}\n                                    </div>\n                                    <div class='col px-0 pt-2'>\n                                        <button\n                                            class={`btn btn-block rounded-none ${submenu === 'trophy' ? 'btn-primary' : 'btn-outline-primary'} text-nowrap`}\n                                            style='text-overflow: ellipsis; overflow: hidden;'\n                                            data-menu='trophy'\n                                            onClick={this.chooseSubmenu}\n                                        ><i class='fas fa-award' /> <Text id='teams.trophy'>Trophy case</Text></button>\n                                        {submenu === 'trophy' && <ScrollIntoView horizontal={'center'} vertical={'end'} />}\n                                    </div>\n                                    <div class='col px-0 pt-2'>\n                                        <button\n                                            class={`btn btn-block rounded-none ${submenu === 'achievements' ? 'btn-primary' : 'btn-outline-primary'} text-nowrap`}\n                                            style='text-overflow: ellipsis; overflow: hidden;'\n                                            data-menu='achievements'\n                                            onClick={this.chooseSubmenu}\n                                        ><i class='fas fa-clock' /> <Text id='teams.achievements'>Achievements</Text></button>\n                                        {submenu === 'achievements' && <ScrollIntoView horizontal={'center'} vertical={'end'} />}\n                                    </div>\n                                    <div class='col px-0 pt-2'>\n                                        <button\n                                            class={`btn btn-block rounded-none ${submenu === 'followers' ? 'btn-primary' : 'btn-outline-primary'} text-nowrap`}\n                                            style='text-overflow: ellipsis; overflow: hidden;'\n                                            data-menu='followers'\n                                            onClick={this.chooseSubmenu}\n                                        ><i class='fas fa-users' /> <Text id='teams.followers'>Followers</Text></button>\n                                        {submenu === 'followers' && <ScrollIntoView horizontal={'center'} vertical={'end'} />}\n                                    </div>\n                                    {/* <div class='col px-0 pt-2'>\n                                        <button\n                                            class={`btn btn-block ${submenu === 'veterinary' ? 'btn-primary' : 'btn-outline-primary'} text-nowrap`}\n                                            style='text-overflow: ellipsis; overflow: hidden;'\n                                            data-menu='veterinary'\n                                            onClick={this.chooseSubmenu}\n                                        ><i class='fas fa-cogs' /> <Text id='teams.veterinary'>Vet</Text></button>\n                                        {submenu === 'veterinary' && <ScrollIntoView horizontal={'center'} vertical={'end'} />}\n                                    </div> */}\n                                    <div class='col px-0 pt-2'>\n                                        <button\n                                            class={`btn btn-block rounded-pill-right rounded-none ${submenu === 'advanced' ? 'btn-primary' : 'btn-outline-primary'} text-nowrap`}\n                                            style='text-overflow: ellipsis; overflow: hidden;'\n                                            data-menu='advanced'\n                                            onClick={this.chooseSubmenu}\n                                        ><i class='fas fa-cogs' /> <Text id='teams.log'>Advanced</Text></button>\n                                        {submenu === 'advanced' && <ScrollIntoView horizontal={'center'} vertical={'end'} />}\n                                    </div>\n                                </div>\n                            </div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n                </div>\n\n\n                {submenu === 'stats' && <>\n                    <div class='row mt-3'>\n                        <div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3'>\n                            <WorkoutGraph stores={this.props.stores} isLoading={false} key={`graph-${workoutPlan.id}-${workoutPlans.length}`} />\n                            <WorkoutTotals stores={this.props.stores} currentTeam={team.id} />\n                            <WorkoutStatus stores={this.props.stores} currentTeam={team.id} />\n                        </div>\n                    </div>\n                </>}\n\n                {submenu === 'presentation' && <>\n                    <div class='row mt-3'>\n                        <div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-3'>\n                            <div class='d-flex justify-content-center'>\n                                {!team.facebook && <>\n                                    <div class='text-center text-muted'>\n                                        <div class='display-1'>\n                                            <i class='fab fa-facebook' />\n                                        </div>\n                                        <h3 class='font-weight-lighter'>\n                                            <Text id='teams.add-sosialmedia'>Gå inn på endring av teamet for å legge inn en sosialemedier.</Text>\n                                        </h3>\n                                    </div>\n                                </>}\n\n                                {team.url && <div class='mx-2'><h3><a href={mu.asUrl(team.url)} target='_blank' rel='noreferrer'><i class='fas fa-link' /></a></h3></div>}\n                                {team.facebook && <div class='mx-2'><h3><a href={mu.asFacebookLink(team.facebook)} target='_blank' rel='noreferrer'><i class='fab fa-facebook' /></a></h3></div>}\n                                {team.instagram && <div class='mx-2'><h3><a href={mu.asInstagramLink(team.instagram)} target='_blank' rel='noreferrer'><i class='fab fa-instagram' /></a></h3></div>}\n                                {team.snapchat && <div class='mx-2'><h3><a href={mu.asSnapchatLink(team.snapchat)} target='_blank' rel='noreferrer'><i class='fab fa-snapchat' /></a></h3></div>}\n                            </div>\n                        </div>\n                        <div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-3'>\n                            {!team.description && <>\n                                <div class='text-center text-muted'>\n                                    <div class='display-1'>\n                                        <i class='fas fa-pen-nib' />\n                                    </div>\n                                    <h3 class='font-weight-lighter'>\n                                        <Text id='teams.add-description'>Gå inn på endring av teamet for å legge inn en beskrivelse.</Text>\n                                    </h3>\n                                </div>\n                            </>}\n                            <Markdown markdown={mu.replaceImages(team.description, team.images, language)} markdownOpts={mu.getMarkdownOptions()} />\n                        </div>\n                    </div>\n                </>}\n\n                {submenu === 'pictures' && <>\n                    <div class='row mt-3'>\n                        <div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 px-0'>\n                            <Localizer>\n                                <ImageScroller stores={this.props.stores} images={team.images} noimagestext={<Text id='teams.no-photos'>No photos for this team.</Text>} />\n                            </Localizer>\n                        </div>\n                    </div>\n                </>}\n\n                {submenu === 'dogs' && <>\n                    <div class='row mt-3'>\n\n                        {(!dogs || dogs.length === 0) && <>\n                            <div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 px-0'>\n                                <div class='text-center text-muted'>\n                                    <div class='display-1'><i class='fas fa-dog' /></div>\n                                    <h3><Text id='teams.no-dogs-title'>No dogs for this team!</Text></h3>\n                                    <Text id='teams.no-dogs-text'>You can add more dogs to this team.</Text>\n                                </div>\n                            </div>\n                        </>}\n\n                        {dogs && dogs.length > 0 && <>\n                            <div class='col-12 mt-3'>\n                                <div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 px-0'>\n                                    <h5><Text id='teams.dogs' fields={{ total: dogs.length }}>Hundene - {dogs.length} stk</Text></h5>\n                                </div>\n                                {dogs && dogs.map(dog => (\n                                    <Dog stores={this.props.stores} dog={dog} />\n                                ))}\n                            </div>\n                        </>}\n                    </div>\n                </>}\n\n                {submenu === 'mushers' && <>\n                    <div class='row mt-3'>\n                        <div class='offset-0 col-12 mt-2'>\n                            <div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 px-0'>\n                                <a class='btn btn-secondary float-right'\n                                    href={`/teams/addmember/${team.id}`}\n                                >\n                                    <i class='fas fa-plus' /> <Text id='teams.add-new-member'>Legg til medlem</Text>\n                                </a>\n                            </div>\n                        </div>\n\n                        <div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-3'>\n                            <h5><Text id='teams.members' fields={{ total: users.length }}>Medlemmer - {users.length} stk</Text></h5>\n                            {users && users.map(user => (\n                                <User stores={this.props.stores} user={user} team={team} />\n                            ))}\n                        </div>\n                    </div>\n                </>}\n\n                {submenu === 'workouts' && <>\n                    <div class='row mt-3'>\n\n                        {(!workouts || workouts.length === 0) && <>\n                            <div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 px-0'>\n                                <div class='text-center text-muted'>\n                                    <div class='display-1'><i class='fas fa-running' /></div>\n                                    <h3><Text id='teams.no-workouts-title'>No workouts for this team!</Text></h3>\n                                    <Text id='teams.no-workouts-text'>You can add more workouts to this team.</Text>\n                                </div>\n                                <div class='text-center mt-3'>\n                                    <a href='/workouts' class='btn btn-primary'>\n                                        <i class='fas fa-running' /> <Text id='header.add-workouts'>Add Workouts</Text>\n                                    </a>\n                                </div>\n                            </div>\n                        </>}\n\n                        {workouts && workouts.length > 0 && <>\n                            <div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-3'>\n                                <h5><Text id='teams.workouts'>Workouts</Text></h5>\n                            </div>\n                            <div class='offset-0 col-12 mt-3'>\n                                {workouts && workouts.map(workout => (\n                                    <Workout stores={this.props.stores} workout={workout} showDate={true} />\n                                ))}\n                            </div>\n                        </>}\n                    </div>\n                </>}\n\n                {submenu === 'workoutplan' && <>\n                    <div class='row mt-3'>\n                        <CalendarPlan stores={this.props.stores}\n                            basehref={`/teams/${team.id}/`}\n                            month={month}\n                            year={year}\n                            key={`${workoutPlan.id || seasonStart}-${currentTeam}-${month}-${year}`}\n                            showNavigation={true}\n                            showHeader={true}\n                            currentTeam={currentTeam}\n                        />\n                        <div class='col-12'>\n                            <Ad stores={this.props.stores} url={this.props.url} section={submenu} />\n                        </div>\n                    </div>\n                </>}\n\n                {submenu === 'fitness' && <>\n                    <div class='row mt-3'>\n                        {(!graphFitness || graphFitness.length === 0) && <>\n                            <div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 px-0'>\n                                <div class='text-center text-muted'>\n                                    <div class='display-1'><i class='fas fa-chart-area' /></div>\n                                    <h3><Text id='teams.no-workouts-title'>No workouts for this team!</Text></h3>\n                                    <Text id='teams.no-workouts-fitness-text'>When you add workouts your fitness graph will be calculated every night.</Text>\n                                </div>\n                                <div class='text-center mt-3'>\n                                    <a href='/workouts' class='btn btn-primary'>\n                                        <i class='fas fa-running' /> <Text id='header.add-workouts'>Add Workouts</Text>\n                                    </a>\n                                </div>\n                            </div>\n                        </>}\n\n                        <div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-3'>\n                            <FormGraph stores={this.props.stores} />\n                        </div>\n                    </div>\n                </>}\n\n                {submenu === 'compare' && <>\n                    <div class='row mt-3'>\n                        <div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-3'>\n                            <h5><Text id='teams.compare'>Compare</Text></h5>\n                            <WorkoutGraphAvg stores={this.props.stores} isLoading={false}\n                                key={`graph-avg-${workoutPlan.id}-${workoutPlans.length}`}\n                                teamId={team.id}\n                                teamAmbition={teamAmbition}\n                                teamType={teamType}\n                            />\n                        </div>\n                    </div>\n                </>}\n\n                {submenu === 'trophy' && <>\n                    <div class='row mt-3'>\n                        <div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3'>\n                            {(!team.trophys || team.trophys.length === 0) && <>\n                                <div class='text-center text-muted'>\n                                    <div class='display-1'><i class='fas fa-award' /></div>\n                                    <h3><Text id='teams.no-trophys-title'>No trophys for this team!</Text></h3>\n                                    <Text id='teams.no-trophys-text'>You have to add more workouts, pictures, log entries for dogs, etc to earn trophys.</Text>\n                                </div>\n                            </>}\n\n                            <div class='row'>\n                                {team.trophys && team.trophys.reverse().map(file => {\n                                    const img = mu.getTrophyImage(file.name);\n                                    if (!img) {\n                                        return '';\n                                    }\n                                    const textHeader = file.descriptionHeader && file.descriptionHeader[language] ? file.descriptionHeader[language] : '';\n                                    const text = file.description && file.description[language] ? file.description[language] : '';\n                                    return (\n                                        <div class='col-4 mt-3'>\n                                            <div class='mb-2'>\n                                                <img src={img} class='img-fluid' />\n                                            </div>\n                                            <strong>{textHeader}</strong>\n                                            {/* <small class='font-weight-lighter mr-2'>\n                                                {util.isoDate(file.createdDate, false, false, true)}\n                                            </small> */}\n                                            <small>\n                                                <details>\n                                                    <summary><Text id='teams.trophy-details'>Details</Text></summary>\n                                                    <Markdown markdown={mu.replaceImages(text, team.images, language)} markdownOpts={mu.getMarkdownOptions()} />\n                                                </details>\n                                            </small>\n                                        </div>\n                                    );\n                                })}\n                            </div>\n\n                        </div>\n                    </div>\n                </>}\n\n                {submenu === 'achievements' && <>\n                    <div class='row mt-3'>\n                        <div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3'>\n                            {(!team.achievements || team.achievements.length === 0) && <>\n                                <div class='text-center text-muted'>\n                                    <div class='display-1'><i class='fas fa-clock' /></div>\n                                    <h3><Text id='teams.no-achievements-title'>No achievements for this team!</Text></h3>\n                                    <Text id='teams.no-achievements-text'>You can add achievements to this team. Ie. Memories, trips, tests, prices, races, etc.</Text>\n                                </div>\n                            </>}\n\n                            {team.achievements && team.achievements.map(file => (\n                                <div class='col-12 p-1'>\n                                    {file.date && <span class='font-weight-lighter mr-2'>{util.isoDate(file.date, false, false, true)}</span>}\n                                    <span class='mr-2 font-weight-bold'>{file.name}</span>\n                                    <span class='mr-2 font-weight-light'>{file.description}</span>\n                                    {file.url && <span class='mr-2'><a href={mu.asUrl(file.url)} target='_blank' rel='noreferrer' native><i class='fas fa-link' /></a></span>}\n                                </div>\n                            ))}\n                        </div>\n                    </div>\n                </>}\n\n                {submenu === 'followers' && <>\n                    <div class='row mt-3'>\n                        <div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-3'>\n                            <h5><Text id='teams.followers'>Followers</Text></h5>\n                        </div>\n\n                        <div class={`col-12`}>\n                            <TeamConnectConfirm stores={this.props.stores} />\n                        </div>\n\n                        <div class={`col-12 col-sm-8 col-lg-6 offset-sm-2 offset-lg-3 mb-0 position-relative`}>\n                            <div class='row'>\n                                {(!util.isArray(followers) || followers.length === 0) && <>\n                                    <div class='col-12 text-center text-muted mb-5'>\n                                        <div class='display-1'>\n                                            <i class='far fa-sad-tear' />\n                                        </div>\n                                        <h3 class='font-weight-lighter'>\n                                            <Text id='teams.no-followers'>Currently you have no followers, but fear not. It's easy get new followers. Be active in the feed and make you team profile beautiful.</Text>\n                                        </h3>\n                                    </div>\n\n                                    <div class='col-12 mb-5' style='font-size: 1.5em;'>\n                                        <Localizer>\n                                            <Input stores={this.props.stores} saved={saved} team={team} field='public' icon='fas fa-eye' type='toggle'\n                                                title={<Text id='teams.public'>Synlig offentlig</Text>}\n                                                help={<Text id='teams.public-help'>Skal teamet være mulig å følge? Alle som vil følge må godkjennes av dere først.</Text>}\n                                                onInput={this.updateField}\n                                            />\n                                        </Localizer>\n                                    </div>\n                                    {/* <UserInvite stores={this.props.stores} forceShow={true} /> */}\n                                </>}\n\n                                {util.isArray(followers) && followers.map(t => \n                                    <TeamLine stores={this.props.stores} team={t} myTeamId={team.id} showBlockButton={true} callback={this.loadTeam} />\n                                )}\n\n                                {util.isArray(blockedFollowers) && blockedFollowers.length > 0 && <>\n                                    <div class='col-12 mt-5'>\n                                        <h5><Text id='teams.blocked-followers'>Blokkerte team</Text>:</h5>\n                                    </div>\n                                    {util.isArray(blockedFollowers) && blockedFollowers.map(t => \n                                        <TeamLine stores={this.props.stores} team={t} myTeamId={team.id} isBlocked={true} callback={this.loadTeam} />\n                                    )}\n                                </>}\n                            </div>\n                        </div>\n                    </div>\n                </>}\n\n                {submenu === 'advanced' && <>\n                    <div class='row mt-3'>\n                        <div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-3'>\n                            <h5><Text id='teams.heatmap'>Heatmap</Text></h5>\n                            <Text id='teams.heatmap-info'>Heatmapen viser hvor du har vært denne sesongen.</Text>\n                        </div>\n                        <div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-3'>\n                            {heatmap && heatmap.length > 0 && <Map\n                                stores={this.props.stores}\n                                mapId={heatmap.length}\n                                heatmap={heatmap}\n                                minZoom={2}\n                                height={600}\n                            />}\n                        </div>\n\n\n                        <div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mb-5 mt-5 border-top'>\n                            <h5 class='mt-5'><Text id='teams.recalculate-title'>Recalculate fitness, form and fatigue</Text></h5>\n                            <Text id='teams.recalculate-help'>\n                                Click the button below if you want to recalculate the fitness, form and fatigue data for your team and all dogs in this team.<br />\n                                Please don't overuse this function. If the calculations is not changed after 1 try, \n                                then it's not going to change the next time either.<br />\n                                <br />\n                                Calculations can take up to 1 hour, so please be patitient.\n                            </Text>\n\n                            <button class={`btn btn-block btn-warning mt-2 float-left ${recalculated ? 'disabled': ''}`}\n                                style='font-size: 0.8em;'\n                                onClick={this.reCalculateFitness}\n                            >\n                                <i class='fas fa-sync' /> <Text id='teams.recalculate'>Recalculate fitness, form and fatigue</Text>\n                            </button><br />\n                        </div>\n\n                        <div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-5 border-top'>\n                            <h5 class='mt-5'><Text id='teams.delete-title'>Delete team</Text></h5>\n                            <Text id='teams.delete-help'>\n                                Click the button below to delete this team. All data related to this team will be lost. All team statistics will also be affected.<br />\n                                <br />\n                                It's important to remember that you need to have at lease one team in the app, even if you only have one dog.\n                            </Text>\n                            <button class='btn btn-block btn-sm btn-danger mt-2 float-right'\n                                onClick={this.deleteTeam}\n                            >\n                                <i class='fas fa-trash' /> <Text id='teams.delete'>Delete</Text> {team.name}\n                            </button>\n                        </div>\n\n                    </div>\n                </>}\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nexport default TeamsDetail;\n","import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport { Text, Localizer } from 'preact-i18n';\n\n@observer\nclass Team extends Component {\n    requestFollowTeam = (e) => {\n        const { teamStore, userStore } = this.props.stores;\n        const { user } = userStore;\n        const teamId = parseInt(e.target.parentElement.dataset.team || e.target.dataset.team, 10);\n        teamStore.followRequest(teamId, user);\n        this.setState({ requestSent: true });\n    }\n\n    unFollowTeam = (e) => {\n        const { teamStore, userStore } = this.props.stores;\n        const { user } = userStore;\n        const teamId = parseInt(e.target.parentElement.dataset.team || e.target.dataset.team, 10);\n        teamStore.unollowTeam(teamId);\n        this.setState({ unfollowed: true });\n    }\n\n    getButton = (text = '') => {\n        const { requestSent } = this.state;\n        const { userStore } = this.props.stores;\n        const { user } = userStore;\n        const { team, skipHome, simple, classNames } = this.props;\n        const isYourTeam = team.members && team.members.indexOf(user.id) > -1;\n        const isFollowing = team.followers && team.followers.indexOf(user.id) > -1;\n        const isBlocked = team.blockedFollowers && team.blockedFollowers.indexOf(user.id) > -1;\n        const hasRequestedFollow = requestSent || team.followRequests && team.followRequests.findIndex(e => e.id === user.id) > -1;\n\n        if (isYourTeam) {\n            if (skipHome) {\n                return '';\n            }\n            return (\n                <i class='fas fa-home' />\n            );\n        }\n        if (isFollowing) {\n            return (<>\n                <button\n                    class={classNames || `btn btn-block btn-outline-secondary float-right`}\n                    onClick={this.unFollowTeam}\n                    disabled='true'\n                    data-team={team.id}\n                >\n                    <i class='fas fa-link mr-2' />\n                    <Text id='teams.connect.is-following'>Følger</Text> {!simple && <>{text}</>}\n                </button>\n                <button\n                    class={classNames || `btn btn-sm btn-block btn-danger float-right`}\n                    onClick={this.unFollowTeam}\n                    data-team={team.id}\n                >\n                    <i class='fas fa-unlink mr-2' />\n                    <Text id='teams.connect.unfollow'>Unfollow</Text>\n                </button>\n            </>);\n        }\n        if (isBlocked) {\n            return '';\n            // return (\n            //     <button\n            //         class={`btn btn-block btn-outline-secondary float-right`}\n            //         disabled='true'\n            //     >\n            //         <i class='fas fa-hand-paper mr-2' />\n            //         <Text id='teams.connect.is-blocked'>Blokkert</Text> {text}\n            //     </button>\n            // );\n        }\n        if (hasRequestedFollow) {\n            return (\n                <button\n                    class={classNames || `btn btn-block btn-outline-secondary float-right`}\n                    disabled='true'\n                >\n                    <i class='fas fa-hourglass-half mr-2' />\n                    <Text id='teams.connect.has-requested'>Venter på godkjenning</Text> {!simple && <>{text}</>}\n                </button>\n            );\n        }\n        if (team.public) {\n            return (\n                <button\n                    class={classNames || `btn btn-block btn-outline-success float-right`}\n                    onClick={this.requestFollowTeam}\n                    data-team={team.id}\n                >\n                    <i class='fas fa-plus mr-2' />\n                    <Text id='teams.connect.follow'>Følg</Text> {!simple && <>{text}</>}\n                </button>\n            );\n        }\n    }\n\n    render() {\n        const { unfollowed } = this.state;\n        const { team, buttonOnly } = this.props;\n        const { userStore } = this.props.stores;\n        const { user } = userStore;\n        const { language = 'en' } = user;\n        const teamAmbition = userStore.findTeamAmbition({ ambition: team.ambitions, language });\n        const teamType = userStore.findTeamType({ type: team.type, language });\n        const image = team.image && team.image.s3SmallLink ? team.image : null;\n\n        if (buttonOnly) {\n            return (<>\n                {this.getButton(`${team.name}`)}\n            </>);\n        }\n\n        return (\n            <div class='w-100 mb-3'>\n                <div class='row'>\n                    <div class='col-12 col-sm-8 col-lg-6 offset-sm-2 offset-lg-3 d-flex mb-0 position-relative border-top pt-3'\n                        style={`${unfollowed ? 'text-decoration: line-through; opacity: 0.3;' : ''}`}\n                    >\n                        {/* {JSON.stringify(team, null, 4)} */}\n                        <a href={`/teams/public/${team.uuidv4}`}>\n                        <div class={`text-center border rounded-circle imageRounded`} style={image ? `background-image: url(\"${image.s3SmallLink}\");  background-size: cover;` : ''}>\n                            {!image && <i class='fas fa-users text-muted mt-3' style='font-size: 40px;' />}\n                        </div>\n                        </a>\n                        <div class='flex-grow-1 pl-3' style='line-height: 1.2em;'>\n                            <h5 class='mb-1' style='line-height: 1.0em;'>\n                                {team.public ? <>\n                                    <a href={`/teams/public/${team.uuidv4}`}>{team.name}</a>\n                                </> : <>\n                                    {team.name}\n                                </>}\n                            </h5>\n                            <div>\n                                {team.place} {team.country}\n                            </div>\n                            <div>\n                                {teamType && <span class='badge badge-pill badge-secondary'>{teamType}</span>}\n                                {teamAmbition && <span class='badge badge-pill badge-secondary ml-2'>{teamAmbition}</span>}\n                            </div>\n                            <small class='text-muted'>\n                                {team && team.dogs && <span class=''><i class='fas fa-dog' /> {team.dogs.length}</span>} \n                                {team && team.followers && <span class='ml-2'><i class='fas fa-user' /> {team.followers.length}</span>}\n                            </small>\n                        </div>\n                        <div>\n                            {this.getButton()}\n                        </div>\n                    </div>\n                </div>\n            </div>\n        );\n    }\n}\n\nexport default Team;\n","import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport { Text, Localizer, withText } from 'preact-i18n';\n\nimport mu from '../../lib/musher-util';\n\nconst initialState = {\n\tshowAddComment: false,\n};\n\n@withText(() => ({\n    subject: <Text id='ad.subject'>Annonseforespørsel</Text>,\n    body: <Text id='ad.body'>Hei, Jeg ønsker å vite mer om annonsering i appen The Musher.</Text>,\n}))\n\n@observer\nclass Ad extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            ...initialState,\n        };\n        this.updateTimer = {};\n\t\tthis.inputRef = {};\n        this.apiServer = util.getApiServer();\n    }\n\n\tasync loadAd(props = this.props) {\n\t\tthis.setState({ isLoading: true });\n\t\tconst { adStore, workoutStore, userStore, appState } = this.props.stores;\n        const { section } = this.props;\n        const { path: url = '' } = appState;\n        const { currentTeam } = workoutStore;\n        const { user } = userStore;\n        const { language = 'en' } = user;\n        let team = {};\n        let ambitions;\n        let type;\n        let postalcode;\n        let place;\n        let country;\n        if (currentTeam) {\n            team = userStore.findTeam(currentTeam, true);\n            if (team && team.id) {\n                ambitions = userStore.findTeamAmbition({ ambition: team.ambitions, language });\n                type = userStore.findTeamType({ type: team.type, language });\n                postalcode = team.postalcode;\n                place = team.place;\n                country = team.country;\n            }\n        }\n        // console.log({ currentTeam, team, ambitions,  type, postalcode, place, country });\n        // const { url = '' } = this.props;\n        let page = url.replace(/\\d+$/, 'detail');\n        page = url.replace(/\\/\\d+/, '/detail');\n\n        // props: { \"url\": \"/\" }\n        // props: { \"url\": \"/workouts/\" }\n        // props: { \"url\": \"/workouts/4708\" }\n        // props: { \"url\": \"/dogs\" }\n        // props: { \"url\": \"/dogs/10\" }\n\n\t\tawait adStore.load({ query: { page, section }});\n        adStore.setTime();\n\t\tthis.setState({ isLoading: false });\n\t}\n\n    logClick = async () => {\n        const { adStore, userStore } = this.props.stores;\n        const { ads = [] } = adStore;\n        let id = ads.length > 0 ? ads[0].id : null;\n        const { user = {} } = userStore;\n        await adStore.logClick({ id, user: user.id });\n    }\n\n\tcomponentDidMount() {\n\t\tthis.loadAd();\n\t}\n\n    componentWillReceiveProps(nextProps) {\n        // console.log('componentWillReceiveProps', nextProps);\n        if (nextProps.path !== this.props.path) {\n            this.loadAd(nextProps);\n        }\n    }\n\n    render() {\n        const { adStore, userStore, appState } = this.props.stores;\n        const { subject, body, section } = this.props;\n        const { path } = appState;\n        const { user = {} } = userStore;\n        const { ads = [], time, adViews, adClicks } = adStore;\n        if (!user || !user.id || !ads || ads.length === 0) {\n            if (path.match(/\\/(home)/i)) {\n                return <>\n                    <div class='w-100'>\n                        <div class='row'>\n                            <div class='col-12 col-sm-8 col-lg-6 offset-sm-2 offset-lg-3 mb-0 position-relative'>\n                                <div class='border rounded-lg p-4 my-3'>\n                                    <span class='float-right display-4 text-warning'>\n                                        <i class='far fa-smile-wink' />\n                                    </span>\n                                    <h5><Text id='ad.heading'>Vil du annonsere her?</Text></h5>\n                                    <div><Text id='ad.teaser'>Det er super enkelt :)</Text></div>\n                                    <Localizer>\n                                        <a href={`mailto:post@themusher.no?subject=${subject}: ${path}: ${section}&body=${body}`} target='_blank' rel='noreferrer'>\n                                            <i class='fas fa-paper-plane' /> <Text id='ad.linktext'>Ta kontakt med The Musher</Text>\n                                        </a>\n                                    </Localizer>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </>;\n            }\n            return <></>;\n        }\n        const ad = ads[0];\n        return (\n            <>\n                <div class='w-100'>\n                    <div class='row'>\n                        <div class='col-12 col-sm-8 col-lg-6 offset-sm-2 offset-lg-3 mb-0 position-relative'>\n                            <div>\n                                <small><small class='text-muted'>\n                                    <Text id='ad.ad'>Annonse</Text>:\n                                    <img src={`${this.apiServer}/api/ads/${ad.id}/view?user=${user.id}&time=${time}`} style='width: 1; height: 1; opacity: 0.1;' />\n                                </small></small>\n                            </div>\n                            {ad.target ? <>\n                                <a\n                                    class='stretched-link'\n                                    href={`${ad.url}`}\n                                    target={ad.target || '_blank'}\n                                    rel='noopener noreferrer'\n                                    onClick={this.logClick}\n                                    native\n                                >\n                                    {ad.images && ad.images[0] && <>\n                                        <img src={ad.images[0].s3LargeLink} class='img-fluid rounded-lg' />\n                                    </>}\n                                </a>                            \n                            </> : <>\n                                <a\n                                    class='stretched-link'\n                                    href={`${ad.url}`}\n                                    onClick={this.logClick}\n                                >\n                                    {ad.images && ad.images[0] && <>\n                                        <img src={ad.images[0].s3LargeLink} class='img-fluid rounded-lg' />\n                                    </>}\n                                </a>\n                            </>}\n                        </div>\n                    </div>\n                </div>\n            </>\n        );\n    }\n}\n\nexport default Ad;\n","import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport { route, Router } from 'preact-router';\nimport { Text, Localizer } from 'preact-i18n';\nimport Markdown from 'preact-markdown';\n\nimport PubSub, { topics } from '../../lib/pubsub';\nimport mu from '../../lib/musher-util';\nconst MARGIN_TOP = mu.marginTop(false);\nconst MARGIN_TOP_BACK = mu.marginTopBack(false);\nconst MARGIN_BOTTOM = mu.marginBottom();\n\nimport DogSimplePublic from '../../components/dog/simplePublic';\nimport ImageScroller from '../../components/imageScroller';\n// import TeamConnectConfirm from '../../components/team/connect-confirm';\nimport TeamLine from '../../components/team/publicLine';\nimport PublicTeam from '../../components/team/public';\n\nimport Overlay from '../../components/overlay/';\nimport DogPublicDetail from '../dogs/publicDetail';\n\nimport MiniViewGraph from '../../components/dog/miniViewGraph';\n\nconst initialState = {\n    newTeam: {},\n};\n\n@observer\nclass TeamsDetail extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            ...initialState,\n        };\n        this.updateTimer = {};\n        this.time = new Date().getTime();\n        this.apiServer = util.getApiServer();\n    }\n\n    async loadPublicView(props) {\n\t\tthis.setState({ isLoading: true });\n        const { teamid } = props;\n\t\tconst { teamStore } = this.props.stores;\n        await teamStore.getPublicViews(teamid);\n\t\tthis.setState({ isLoading: false });\n\t}\n\n    async loadAll(props = this.props) {\n        await this.loadPublicTeam(props);\n        await this.loadPublicView(props);\n    }\n\n    async loadPublicTeam(props = this.props) {\n\t\tconst { teamStore } = props.stores;\n        const { teamid } = props;\n        await teamStore.loadPublicDetail({ id: teamid });\n    }\n\n    // Overlay functions\n    onDogClick = (e, dogid) => {\n        e.preventDefault();\n        e.stopPropagation();\n        this.setState({\n            showDog: dogid,\n        });\n        return false;\n    }\n\n    hideDog = () => {\n        this.setState({\n            showDog: null,\n        });\n    }\n\n    onUserClick = (e, userid) => {\n        e.preventDefault();\n        e.stopPropagation();\n        return false;\n    }\n    // /Overlay functions\n\n    subscribeNotificationTopic = async (field) => {\n\t\tconst { userStore } = this.props.stores;\n        const { user } = userStore;\n        const { notificationTopics = {} } = user;\n        const value = 1;\n        await userStore.setNotificationTopic({\n            field: `notificationTopics.${field}`,\n            value,\n        });\n    }\n\n    back = () => {\n        const { history } = this.props.stores;\n        history.goBack();\n    }\n    \n\tcomponentDidMount() {\n        const { back = this.back } = this.props;\n        const { appState } = this.props.stores;\n        appState.setSwipeRight(() => {\n            appState.setSwipeRight();\n            back();\n        });\n        this.loadAll();\n    }\n\n    componentWillReceiveProps(nextProps) {\n        // console.log('componentWillReceiveProps', nextProps);\n        if (nextProps.teamid !== this.props.teamid) {\n            this.loadAll(nextProps);\n        }\n    }\n\n\trender() {\n        const { showDog } = this.state;\n\t\tconst { teamStore, userStore } = this.props.stores;\n        const { user, isAdmin } = userStore;\n        const { language = 'en' } = user;\n\t\tconst { publicTeam, publicTeamFollowers, publicViewsGraphData, publicViewsGraphLegend } = teamStore;\n        const isTeamAdmin = (publicTeam && publicTeam.members) ? publicTeam.members.some(m => m.id === user.id) : false;\n\n        const { marginTop, marginBottom, back = this.back, hideTeam = () => {} } = this.props;\n\n        const defaultImage = {\n            s3XXLargeLink: './assets/homerun-race-logo.png',\n        };\n\n        const {\n            dogs = [],\n            users = [],\n            image,\n            imageHeader,\n            publicWorkouts,\n            publicWorkoutDetails,\n            publicWorkoutSummary,\n            publicTrophys,\n            publicMemories,\n            publicDogs,\n        } = publicTeam;\n\n        const headerImage = imageHeader && imageHeader.s3XXLargeLink ? imageHeader : defaultImage;\n        const teamImage = image && image.s3LargeLink ? image : null;\n        const teamAmbition = userStore.findTeamAmbition({ ambition: publicTeam.ambitions, language });\n        const teamType = userStore.findTeamType({ type: publicTeam.type, language });\n        const isYourTeam = publicTeam.members && publicTeam.members.findIndex(e => e.id === user.id) > -1;\n        const isFollowing = publicTeam && publicTeam.followers && publicTeam.followers.indexOf(user.id) > -1;\n        const hasRequestedFollow = publicTeam.followRequests && publicTeam.followRequests.findIndex(e => e.id === user.id) > -1;\n\n        const { notificationTopics = {} } = user;\n        const topic = `team-${publicTeam.id}`;\n\n\t\treturn (<>\n            {showDog && <Overlay>\n                <DogPublicDetail stores={this.props.stores} dogid={showDog} marginTop={'0px;'} marginBottom={'0px;'} back={this.hideDog} dogs={dogs} />\n            </Overlay>}\n\n\t\t\t<div class='container-fluid pb-5' style={`margin-bottom: ${marginBottom || MARGIN_BOTTOM}; margin-top: ${marginTop || MARGIN_TOP};`}>\n                <button class='btn btn-link pl-0 fixed-top text-primary'\n                    style={`top: ${MARGIN_TOP_BACK}; left: 5px; font-size: 35px; width: 45px;`}\n                    onClick={back}>\n                    <i class='fas fa-arrow-circle-left' />\n                </button>\n\n                <div class='row mb-0'>\n                    <div class='w-100 position-relative'\n                        style={`height: 25vh; background-size: cover; background-repeat: no-repeat; background-position: 50% 50%; background-color: #a0a0a0; ${headerImage ? `background-image: url(\"${headerImage.s3XXLargeLink}\");` : ''}`}\n                    >\n                        {isYourTeam && <>\n                            <a class='btn btn-sm btn-primary position-absolute'\n                                style={`top: 5px; right: 10px;`}\n                                href={`/teams/edit/${publicTeam.id}`}\n                            >\n                                <i class='fas fa-edit' /> <Text id='teams.edit'>Endre</Text>\n                            </a>\n                        </>}                    \n                    </div>\n\t\t\t\t\t<div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-3'>\n                        <div class='row'>\n                            <div class='col-3 col-sm-4 col-md-3 col-lg-4 position-relative'>\n                                <div\n                                    class={`text-center border border-white rounded-circle position-absolute imageRounded imageRoundedResponsive imageRoundedResponsivePosition`}\n                                    style={`left: 20px; ${teamImage ? `background-image: url(\"${teamImage.s3LargeLink}\"); background-size: cover; background-repeat: no-repeat; background-position: 50% 50%;` : ''}`}\n                                >\n                                    {!teamImage && <i class='fas fa-users text-muted mt-3' style='font-size: 40px;' />}\n                                </div>\n                                &nbsp;\n                            </div>\n                            <div class='col-9 col-sm-8 col-md-9 col-lg-8' style='line-height: 1.2em;'>\n                                <h5 class='my-0'>{publicTeam.name}</h5>\n                                <small class='text-muted'>\n                                    {publicTeam.place ? `${publicTeam.place}, ` : ''}{publicTeam.country}\n                                </small><br />\n                                {teamType && <span class='badge badge-pill badge-secondary mt-2'>{teamType}</span>}\n                                {teamAmbition && <span class='badge badge-pill badge-secondary mt-2 ml-2'>{teamAmbition}</span>}\n                                <h6 class='mt-2'>\n                                    <span class='mr-3'><span class='font-weight-bolder'>{publicTeam.followers ? publicTeam.followers.length : 0}</span> <Text id='teams.followers'>followers</Text></span>\n                                    <span class='mr-3'><span class='font-weight-bolder'>{publicTeam.dogs ? publicTeam.dogs.length : 0}</span> <Text id='teams.dogs-menu'>dogs</Text></span>\n                                </h6>\n                            </div>\n                        </div>\n                    </div>\n                    {(!notificationTopics || !notificationTopics[topic]) && <>\n                        <div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-3'>\n                            <button class='btn btn-block btn-primary btn-sm' onClick={() => this.subscribeNotificationTopic(topic)}>\n                                <Text id='team.notifications'>Subscribe to team notifications</Text>\n                            </button>                    \n                        </div>\n                    </>}\n                </div>\n\n\t\t\t\t<div class='row mt-5'>\n                    <div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3'>\n                        {!isYourTeam && !isFollowing && !hasRequestedFollow && publicTeam.public > 0 && <div class='clearfix mb-2'>\n                            <PublicTeam stores={this.props.stores} team={publicTeam} buttonOnly={true} skipHome={true} />\n                        </div>}\n                    </div>\n                </div>\n\n                {/* <TeamConnectConfirm stores={this.props.stores} /> */}\n\n\t\t\t\t<div class='row mt-5'>\n                    <div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3'>\n                        <h5 class='font-weight-lighter text-muted border-bottom'><Text id='teams.socialmedia'>Sosialemedier</Text></h5>\n                    </div>\n                    <div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3'>\n                        <div class='d-flex justify-content-center'>\n\n                            {isYourTeam && !publicTeam.facebook && <>\n                                <div class='text-center text-muted'>\n                                    <div class='display-1'>\n                                        <i class='fab fa-facebook' />\n                                    </div>\n                                    <h3 class='font-weight-lighter'>\n                                        <Text id='teams.add-sosialmedia'>Gå inn på endring av teamet for å legge inn en sosialemedier.</Text>\n                                    </h3>\n                                </div>\n                            </>}\n\n                            {publicTeam.url && <div class='mx-2'><h3><a href={mu.asUrl(publicTeam.url)} target='_blank' rel='noreferrer'><i class='fas fa-link' /></a></h3></div>}\n                            {publicTeam.facebook && <div class='mx-2'><h3><a href={mu.asFacebookLink(publicTeam.facebook)} target='_blank' rel='noreferrer'><i class='fab fa-facebook' /></a></h3></div>}\n                            {publicTeam.instagram && <div class='mx-2'><h3><a href={mu.asInstagramLink(publicTeam.instagram)} target='_blank' rel='noreferrer'><i class='fab fa-instagram' /></a></h3></div>}\n                            {publicTeam.snapchat && <div class='mx-2'><h3><a href={mu.asSnapchatLink(publicTeam.snapchat)} target='_blank' rel='noreferrer'><i class='fab fa-snapchat' /></a></h3></div>}\n                        </div>\n                        <div class='d-flex justify-content-center mt-3'>\n                            <div class='mx-2'><h3><a class='btn btn-outline-success' href={`/stories/team/${publicTeam.uuidv4}`}><i class='fas fa-rss' /> <Text id='story.all-stories'>Stories</Text></a></h3></div>\n                            <div class='mx-2'><h3><a class='btn btn-outline-primary' href={`/teams/workouts/team/${publicTeam.uuidv4}`} onClick={hideTeam}><i class='fas fa-running' /> <Text id='story.all-workouts'>All workouts</Text></a></h3></div>\n                        </div>\n                    </div>\n                </div>\n\n                {publicTeam.imagesSponsor && <div class='row mt-5'>\n                    <div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3'>\n                        <h5 class='font-weight-lighter text-muted border-bottom'><Text id='teams.public-sponsor-images' fields={{ total: publicTeam.imagesSponsor.length }}>Sponsorer - {publicTeam.imagesSponsor.length} stk</Text></h5>\n                    </div>\n                    <div class={`col-12 col-sm-8 col-lg-6 offset-sm-2 offset-lg-3 mb-0 position-relative px-0`}>\n                        <ImageScroller stores={this.props.stores} images={publicTeam.imagesSponsor} />\n                    </div>\n                </div>}\n\n                {publicTeam.sponsors && <div class='row mt-5'>\n                    <div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3'>\n                        <h5 class='font-weight-lighter text-muted border-bottom'><Text id='teams.sponsors'>Sponsors</Text></h5>\n                    </div>\n                    <div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3'>\n                        {isYourTeam && !publicTeam.sponsors && <>\n                            <div class='text-center text-muted'>\n                                <div class='display-1'>\n                                    <i class='fas fa-pen-nib' />\n                                </div>\n                                <h3 class='font-weight-lighter'>\n                                    <Text id='teams.add-sponsors'>Gå inn på endring av teamet for å legge inn sponsorer.</Text>\n                                </h3>\n                            </div>\n                        </>}\n                        <Markdown markdown={mu.replaceImages(publicTeam.sponsors, publicTeam.imagesSponsor, language)} markdownOpts={mu.getMarkdownOptions()} />\n                    </div>\n                </div>}\n\n\n\t\t\t\t<div class='row mt-5'>\n                    <div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3'>\n                        <h5 class='font-weight-lighter text-muted border-bottom'><Text id='teams.description'>Beskrivelse</Text></h5>\n                    </div>\n                    <div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3'>\n                        {isYourTeam && !publicTeam.description && <>\n                            <div class='text-center text-muted'>\n                                <div class='display-1'>\n                                    <i class='fas fa-pen-nib' />\n                                </div>\n                                <h3 class='font-weight-lighter'>\n                                    <Text id='teams.add-description'>Gå inn på endring av teamet for å legge inn en beskrivelse.</Text>\n                                </h3>\n                            </div>\n                        </>}\n                        <Markdown markdown={mu.replaceImages(publicTeam.description, publicTeam.images, language)} markdownOpts={mu.getMarkdownOptions()} />\n                    </div>\n                </div>\n\n\t\t\t\t{publicTeam.descriptionWorkoutplan && <div class='row mt-5'>\n                    <div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3'>\n                        <h5 class='font-weight-lighter text-muted border-bottom'><Text id='teams.description-workoutplan'>Workoutplan</Text></h5>\n                    </div>\n                    <div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3'>\n                        {isYourTeam && !publicTeam.descriptionWorkoutplan && <>\n                            <div class='text-center text-muted'>\n                                <div class='display-1'>\n                                    <i class='fas fa-pen-nib' />\n                                </div>\n                                <h3 class='font-weight-lighter'>\n                                    <Text id='teams.add-description-workoutplan'>Gå inn på endring av teamet for å legge inn en treningsplan.</Text>\n                                </h3>\n                            </div>\n                        </>}\n                        <Markdown markdown={mu.replaceImages(publicTeam.descriptionWorkoutplan, publicTeam.images, language)} markdownOpts={mu.getMarkdownOptions()} />\n                    </div>\n                </div>}\n\n\t\t\t\t{publicDogs && <div class='row mt-5'>\n                    <div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3'>\n                        <h5 class='font-weight-lighter text-muted border-bottom'><Text id='teams.dogs' fields={{ total: dogs.length }}>Hundene - {dogs.length} stk</Text></h5>\n                    </div>\n\n                    <div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3'>\n                        <div class='row'>\n                            {dogs && dogs.map(dog => (\n                                <DogSimplePublic stores={this.props.stores} dog={dog} showAge={true} className={'col'}\n                                    onDogClick={this.onDogClick} \n                                />\n                            ))}\n                        </div>\n                    </div>\n                </div>}\n\n\t\t\t\t{publicTeam.images && <div class='row mt-5'>\n                    <div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3'>\n                        <h5 class='font-weight-lighter text-muted border-bottom'><Text id='teams.public-photos' fields={{ total: publicTeam.images.length }}>Teambilder - {publicTeam.images.length} stk</Text></h5>\n                    </div>\n                    <div class={`col-12 col-sm-8 col-lg-6 offset-sm-2 offset-lg-3 mb-0 position-relative px-0`}>\n                        <ImageScroller stores={this.props.stores} images={publicTeam.images} />\n                    </div>\n\t\t\t\t</div>}\n\n                {publicMemories && publicTeam.achievements && <div class='row mt-5'>\n                    <div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3'>\n                        <h5 class='font-weight-lighter text-muted border-bottom'><Text id='teams.achievements'>Achievements</Text></h5>\n                    </div>\n                    <div class={`col-12 col-sm-8 col-lg-6 offset-sm-2 offset-lg-3 mb-0 position-relative`}>\n                        <div class='row'>\n                            {publicTeam.achievements && publicTeam.achievements.map(file => {\n                                return (\n                                    <div class='col-12'>\n                                        {file.date && <span class='font-weight-lighter mr-2'>{util.isoDate(file.date, false, false, true)}</span>}\n                                        <span class='mr-2 font-weight-bold'>{file.name}</span>\n                                        <span class='mr-2 font-weight-light'>{file.description}</span>\n                                        {file.url && <span class='mr-2'><a href={mu.asUrl(file.url)} target='_blank' rel='noreferrer' native><i class='fas fa-link' /></a></span>}\n                                    </div>\n                                );\n                            })}\n                        </div>\n                    </div>\n\t\t\t\t</div>}\n\n\t\t\t\t{publicTrophys && publicTeam.trophys && <div class='row mt-5'>\n                    <div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3'>\n                        <h5 class='font-weight-lighter text-muted border-bottom'><Text id='teams.trophy'>Trophys</Text></h5>\n                    </div>\n                    <div class={`col-12 col-sm-8 col-lg-6 offset-sm-2 offset-lg-3 mb-0 position-relative`}>\n                        <div class='row'>\n                            {publicTeam.trophys && publicTeam.trophys.reverse().map(file => {\n                                const img = mu.getTrophyImage(file.name);\n                                if (!img) {\n                                    return '';\n                                }\n                                const textHeader = file.descriptionHeader && file.descriptionHeader[language] ? file.descriptionHeader[language] : '';\n                                const text = file.description && file.description[language] ? file.description[language] : '';\n                                return (\n                                    <div class='col-4 mt-3'>\n                                        <div class='mb-2'>\n                                            <img src={img} class='img-fluid' />\n                                        </div>\n                                        <strong>{textHeader}</strong>\n                                        {/* <small class='font-weight-lighter mr-2'>\n                                            {util.isoDate(file.createdDate, false, false, true)}\n                                        </small> */}\n                                        <small>\n                                            <details>\n                                                <summary><Text id='teams.trophy-details'>Details</Text></summary>\n                                                <Markdown markdown={mu.replaceImages(text, publicTeam.images, language)} markdownOpts={mu.getMarkdownOptions()} />\n                                            </details>\n                                        </small>\n                                    </div>\n                                );\n                            })}\n                        </div>\n                    </div>\n\t\t\t\t</div>}\n\n                {/* {util.isArray(publicTeamFollowers) && <div class='row mt-5'>\n                    <div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3'>\n                        <h5 class='font-weight-lighter text-muted border-bottom'><Text id='teams.followers'>Followers</Text></h5>\n                    </div>\n                    <div class={`col-12 col-sm-8 col-lg-6 offset-sm-2 offset-lg-3 mb-0 position-relative`}>\n                        {util.isArray(publicTeamFollowers) && publicTeamFollowers.map(t => \n                            <TeamLine stores={this.props.stores} team={t} myTeamId={publicTeam.id} showBlockButton={false} callback={this.loadTeam} />\n                        )}\n                    </div>\n                </div>} */}\n\n\t\t\t\t<div class='row mt-5 mb-5'>\n                    <div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3'>\n                        <div class='text-center text-muted'>\n                            <div class='display-1'>\n                                <i class='fas fa-ellipsis-h' />\n                            </div>\n                            <div style='line-height: 0.9em;'>\n                                <small>\n                                    <Text id='teams.something-missing'>Er det noe du savner på denne siden? Send oss en melding på Facebook.</Text>\n                                </small>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n\n                {(isAdmin || isTeamAdmin) && <>\n                    <h5 class='font-weight-lighter text-muted border-bottom'><Text id='teams.visits'>Team page visits</Text></h5>\n                    <MiniViewGraph stores={this.props.stores}\n                        dataLeft={publicViewsGraphData}\n                        legendLeft={['team']}\n                        key={`minigraph-team-${publicTeam.uuidv4}`}\n                    />\n                </>}\n\n                {publicTeam.uuidv4 && <img src={`${this.apiServer}/api/teams/${publicTeam.uuidv4}/view?user=${user.id}&time=${this.time}`} style='width: 1; height: 1; opacity: 0.1;' />}\n\t\t\t</div>\n\t\t</>);\n\t}\n}\n\nexport default TeamsDetail;\n","import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport { Text, Localizer } from 'preact-i18n';\n\nimport mu from '../../lib/musher-util';\n\nfunction meterToFeet(value) {\n    return 3.28084 * value;\n}\n\n@observer\nclass Elevation extends Component {\n    render() {\n\t\tconst { value = 0, smallUnit } = this.props;\n\t\tconst { userStore } = this.props.stores;\n\t\tconst { user } = userStore;\n\t\tconst { settings = {} } = user;\n\n        if (settings.imperial) {\n            return (<>\n                <nobr>\n                    {util.format(meterToFeet(value), 0)} {smallUnit ? <><small><small><small class='ml-0 text-muted'>ft</small></small></small></> : <>ft</>}\n                </nobr>\n            </>);\n        }\n\n\t\treturn (<>\n            <nobr>\n                {util.format(value, 0)} {smallUnit ? <><small><small><small class='ml-0 text-muted'>m</small></small></small></> : <>m</>}\n            </nobr>\n        </>);\n    }\n}\n\nexport default Elevation;\n","import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport { route } from 'preact-router';\nimport { Text, Localizer } from 'preact-i18n';\n\nimport mu from '../../lib/musher-util';\n\nconst initialState = {\n\trequestSent: {},\n    confirmed: {},\n    deleted: {},\n    submenu: 'notfollowing',\n};\n\n@observer\nclass TeamLine extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            ...initialState,\n        };\n        this.updateTimer = {};\n    }\n\n    requestFollowTeam = async (e) => {\n        const { teamStore, userStore } = this.props.stores;\n        const { user } = userStore;\n        const teamId = parseInt(e.target.parentElement.dataset.team || e.target.dataset.team, 10);\n        teamStore.followRequest(teamId, user);\n        const { requestSent } = this.state;\n        requestSent[teamId] = true;\n        this.setState({ requestSent });\n    }\n\n    confirmRequest = async (e) => {\n        const { callback = () => {} } = this.props;\n        const { team, user } = e.target.closest('button').dataset;\n        const { teamStore } = this.props.stores;\n        const { confirmed, deleted } = this.state;\n\t\tconfirmed[`${team}-${user}`] = true;\n        delete deleted[`${team}-${user}`];\n        this.setState({ confirmed, deleted });\n        await teamStore.confirmFollowRequest({\n            team: parseInt(team, 10),\n            user: parseInt(user, 10),\n        });\n        callback();\n    }\n\n    deleteRequest = async (e) => {\n        const { callback = () => {} } = this.props;\n        const { team, user } = e.target.closest('button').dataset;\n        const { teamStore } = this.props.stores;\n        const { deleted, confirmed } = this.state;\n\t\tdeleted[`${team}-${user}`] = true;\n        delete confirmed[`${team}-${user}`];\n        this.setState({ deleted, confirmed });\n        await teamStore.deleteFollowRequest({\n            team: parseInt(team, 10),\n            user: parseInt(user, 10),\n        });\n        callback();\n    }\n\n    unFollowTeam = (e) => {\n        const { teamStore, userStore } = this.props.stores;\n        const { user } = userStore;\n        const teamId = parseInt(e.target.parentElement.dataset.team || e.target.dataset.team, 10);\n        teamStore.unollowTeam(teamId);\n        this.setState({ unfollowed: true });\n    }\n\n    getUnblockButton = (userId, myTeamId) => {\n        const { confirmed } = this.state;\n        const isConfirmed = confirmed[`${myTeamId}-${userId}`];\n        return <>\n            {isConfirmed ? <>\n                <small class='text-success'>\n                    <i class='fas fa-check' /> <Text id='teams.connect.confirmed'>Confirmed</Text>\n                </small>\n            </> : <>\n                <button class='btn btn-sm btn-block btn-success text-overflow mt-1'\n                    onClick={this.confirmRequest}\n                    data-team={myTeamId}\n                    data-user={userId}>\n                    <Text id='teams.connect.confirm'>Confirm</Text>\n                </button>\n            </>}\n        </>;\n    }\n\n    getButton = (team) => {\n        const { requestSent } = this.state;\n        const { userStore } = this.props.stores;\n        const { user } = userStore;\n\n        const isYourTeam = team.members && team.members.indexOf(user.id) > -1;\n        const isFollowing = team.followers && team.followers.indexOf(user.id) > -1;\n        const isBlocked = team.blockedFollowers && team.blockedFollowers.indexOf(user.id) > -1;\n        const hasRequestedFollow = requestSent[team.id] || team.followRequests && team.followRequests.findIndex(e => e.id === user.id) > -1;\n\n        if (isYourTeam) {\n            return (\n                <i class='fas fa-home' />\n            );\n        }\n        if (!team.public) {\n            return (<>\n                <small class='text-muted'>\n                    <Text id='teams.not-public'>Ikke offentlig</Text>\n                </small>\n            </>);\n        }\n        if (isFollowing) {\n            return (<>\n                <button\n                    class={`btn btn-sm btn-block btn-outline-secondary float-right`}\n                    onClick={this.unFollowTeam}\n                    disabled='true'\n                    data-team={team.id}\n                >\n                    <i class='fas fa-link mr-2' />\n                    <Text id='teams.connect.is-following'>Følger</Text>\n                </button>\n                <button\n                    class={`btn btn-sm btn-block btn-outline-danger float-right`}\n                    onClick={this.unFollowTeam}\n                    disabled='true'\n                    data-team={team.id}\n                >\n                    <Text id='teams.connect.unfollow'>Unfollow</Text>\n                </button>\n            </>);\n        }\n        if (isBlocked) {\n            return (<></>);\n            // return (\n            //     <button\n            //         class={`btn btn-sm btn-block btn-outline-secondary float-right`}\n            //         disabled='true'\n            //     >\n            //         <i class='fas fa-hand-paper mr-2' />\n            //         <Text id='teams.connect.is-blocked'>Blokkert</Text>\n            //     </button>\n            // );\n        }\n        if (hasRequestedFollow) {\n            return (\n                <button\n                    class={`btn btn-sm btn-block btn-outline-secondary float-right`}\n                    disabled='true'\n                >\n                    <i class='fas fa-hourglass-half mr-2' />\n                    <Text id='teams.connect.has-requested'>Venter på godkjenning</Text>\n                </button>\n            );\n        }\n        return (\n            <button\n                class={`btn btn-sm btn-block btn-outline-success float-right`}\n                onClick={this.requestFollowTeam}\n                data-team={team.id}\n            >\n                <i class='far fa-hand-point-right mr-2' />\n                <Text id='teams.connect.follow'>Følg</Text>\n            </button>\n        );\n    }\n\n\trender() {\n        const { deleted = {}, unfollowed } = this.state;\n        const { team, isBlocked, myTeamId, showBlockButton } = this.props;\n        const { storyStore } = this.props.stores;\n\n        const user = storyStore.findPublicUser(team.user) || team.user || {};\n        let image;\n        if (team.image && team.image.s3SmallLink) {\n            image = team.image;\n        } else if (team.images && team.images[0] && team.images[0].s3SmallLink) {\n            image = team.images[0];\n        } else if (user.image && user.image.s3SmallLink) {\n            image = user.image;\n        } else if (user.images && user.images[0] && user.images[0].s3SmallLink) {\n            image = user.images[0];\n        }\n        let shortname;\n        let name;\n        let username;\n        if (team && team.name) {\n            shortname = mu.displayNameShort(team);\n            name = mu.displayName(team);\n            username = mu.displayName(user);\n        } else if (user && user.id) {\n            shortname = mu.displayNameShort(user);\n            name = mu.displayName(user);\n        }\n\n        const isDeleted = deleted[`${myTeamId}-${user.id}`];\n\n        return (\n            <div class='col-12 mb-2 pb-2 border-bottom'\n                style={`${unfollowed ? 'text-decoration: line-through; opacity: 0.3;' : ''}`}\n            >\n                <div class='d-flex position-relative'>\n                    <div\n                        class={`text-center border rounded-circle imageRounded imageRoundedMedium`}\n                        style={image ? `background-image: url(\"${image.s3MediumLink}\"); background-size: cover;` : ''}\n                    >\n                        {!image && <div class='text-muted' style='font-size: 20px; padding-top: 3px;'>{shortname}</div>}\n                    </div>\n                    <div class='flex-grow-1 pl-3 text-overflow' style='line-height: 1.2em;'>\n                        <h5 class='mb-0'>\n                            {team.public ? <>\n                                <a href={`/teams/public/${team.uuidv4}`}>{name}</a>\n                            </> : <>\n                                {name}\n                            </>}                                         \n                        </h5>\n                        <div>\n                            {team.place ? `${team.place}, ` : ''} {team.country} &nbsp;\n                        </div>\n                        <div>\n                            <small class='text-muted'>\n                                {team && team.dogs && <span class=''><i class='fas fa-dog' /> {team.dogs.length}</span>} \n                                {team && team.followers && <span class='ml-2'><i class='fas fa-user' /> {team.followers.length}</span>}\n                                {username && <>\n                                    <small class='ml-2 text-muted'>\n                                        {username}\n                                    </small>\n                                </>}\n                                {showBlockButton && <>\n                                    {isDeleted ? <>\n                                        <small class='text-danger ml-3'>\n                                            <i class='fas fa-ban' /> <Text id='teams.connect.deleted'>Deleted</Text>\n                                        </small>\n                                    </> : <>\n                                        <button class='btn btn-sm btn-link text-overflow p-0 text-muted ml-3'\n                                            style='font-size: 0.8em;'\n                                            onClick={this.deleteRequest}\n                                            data-team={myTeamId}\n                                            data-user={user.id}\n                                        >\n                                            <i class='fas fa-ban' /> <Text id='teams.connect.block'>Blokkere</Text>\n                                        </button>\n                                    </>}\n                                </>}\n                            </small>\n                        </div>\n                    </div>\n                    <div>\n                        {isBlocked ? <>\n                            {this.getUnblockButton(user.id, myTeamId)}\n                        </> : <>\n                            {this.getButton(team)}\n                        </>}\n                    </div>\n                </div>\n            </div>\n        );\n    }\n}\n\nexport default TeamLine;\n","import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport { Text, Localizer } from 'preact-i18n';\n\nimport mu from '../../lib/musher-util';\n\nfunction kmtToMph(value) {\n    return 0.621371 * value;\n}\n\n@observer\nclass Speed extends Component {\n    render() {\n\t\tconst { value = 0, smallUnit } = this.props;\n\t\tconst { userStore } = this.props.stores;\n\t\tconst { user } = userStore;\n\t\tconst { settings = {} } = user;\n\n        if (settings.imperial) {\n            return (<>\n                <nobr>\n                    {util.format(kmtToMph(value), 1)} {smallUnit ? <><small><small><small class='ml-0 text-muted'><Text id='workouts.mph'>mph</Text></small></small></small></> : <><Text id='workouts.mph'>mph</Text></>}\n                </nobr>\n            </>);\n        }\n\n\t\treturn (<>\n            <nobr>\n                {util.format(value, 1)} {smallUnit ? <><small><small><small class='ml-0 text-muted'><Text id='workouts.kmt'>km/t</Text></small></small></small></> : <><Text id='workouts.kmt'>km/t</Text></>}\n            </nobr>\n        </>);\n    }\n}\n\nexport default Speed;\n","import { h, Component } from 'preact';\nimport { observer } from 'mobx-preact';\nimport { toJS } from 'mobx';\nimport util from 'preact-util';\n\nimport DragNDropFileupload from './dragNdropFileupload';\n\n@observer\nclass Images extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            files: [],\n        };\n    }\n    \n    handleAddImage = (file) => {\n        const { addToImages = true } = this.props;\n\n        // <Images saved={saved} object={dog} field={field} updateField={updateField} />\n        // updateFieldValue = ({ id, field, value, datatype, elementtype, isNew = false, skipTimer = false }) => {\n        const {\n            updateField,\n            object,\n            field,\n        } = this.props;\n\n        if (field) {\n            updateField({ id: object.id, field, value: file, skipTimer: true });\n        }\n\n        // let images = toJS(object.images);\n        // if (!util.isArray(images)) {\n        //     images = [];\n        // }\n        if (addToImages) {\n            const images = [];\n            images.push(file);\n            updateField({ id: object.id, field: 'images', value: images, skipTimer: true });\n        }\n        // const allImages = [];\n        // allImages.push(file);\n        // updateField({ id: object.id, field: 'allImages', value: allImages, skipTimer: true });\n    };\n\n    render() {\n        const { uploadStatus = () => {}, before = () => {}, after = () => {}, autoOpen = true } = this.props;\n        return (\n            <div class='row'>\n                <div class='col-12'>\n                    <DragNDropFileupload\n                        handleAddImage={this.handleAddImage}\n                        uploadStatus={uploadStatus}\n                        apiUrl={'/api/fileupload'}\n                        before={before}\n                        after={after}\n                        autoOpen={autoOpen}\n                    >\n                        <div style={{ height: 30, width: '100%' }}>\n                            {/* {files.map((file, idx) => (\n                                <div key={idx}>\n                                    {file.name}\n                                    Total: {util.asString(file, 'load', 'total')}\n                                    <img style='width: 48px;'\n                                        alt='Preview'\n                                        key={file.preview}\n                                        src={file.src}\n                                    />\n                                </div>\n                            ))} */}\n                        </div>\n                    </DragNDropFileupload>\n                </div>\n            </div>\n        );\n    }\n}\n\nexport default Images;\n","import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport { Text, Localizer, withText } from 'preact-i18n';\n\nimport mu from '../../lib/musher-util';\n\nconst MARGIN_TOP = mu.marginTop(false);\nconst MARGIN_BOTTOM = mu.marginBottom();\n\n@observer\nclass Overlay extends Component {\n    render() {\n        const { children } = this.props;\n        return (\n            <div\n                class='w-100 h-100 fixed-top bg-light skipRefresh'\n                style={`\n                    margin-bottom: ${MARGIN_BOTTOM};\n                    margin-top: ${MARGIN_TOP};\n                    height: calc(100vh - ${MARGIN_TOP}) !important;\n                    top: 0;\n                    left: 0;\n                    overflow-x: auto;\n                    overflow-y: auto;\n                    transition: .3s;\n                    overscroll-behavior: contain;\n                    z-index: 10000;\n                `}\n            >\n                {children}\n            </div>\n        );\n    }\n}\n\nexport default Overlay;\n","import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport { Text, Localizer } from 'preact-i18n';\n\nimport mu from '../../lib/musher-util';\n\nimport PublicTeam from '../../components/team/public';\n\nconst initialState = {\n\tconfirmed: {},\n\tdeleted: {},\n};\n\n@observer\nclass Teams extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            ...initialState,\n        };\n    }\n\n    async loadTeams() {\n        const { teamStore } = this.props.stores;\n        await teamStore.load({ query: {}, addData: ['followRequests'] });\n    }\n\n    confirmRequest = (e) => {\n        const { team, user, follow } = e.target.closest('button').dataset;\n        const { teamStore } = this.props.stores;\n        teamStore.confirmFollowRequest({\n            team: parseInt(team, 10),\n            user: parseInt(user, 10),\n        });\n        const { confirmed } = this.state;\n\t\tconfirmed[`${team}-${user}`] = true;\n        this.setState({ confirmed });\n\n        if (follow) {\n            teamStore.followRequestUser(user);\n        }\n    }\n\n    deleteRequest = (e) => {\n        const { team, user } = e.target.closest('button').dataset;\n        const { teamStore } = this.props.stores;\n        teamStore.deleteFollowRequest({\n            team: parseInt(team, 10),\n            user: parseInt(user, 10),\n        });\n        const { deleted } = this.state;\n\t\tdeleted[`${team}-${user}`] = true;\n        this.setState({ deleted });\n    }\n\n\tcomponentDidMount() {\n\t\tthis.loadTeams();\n\t}\n\n\trender() {\n        const { deleted = {}, confirmed = {} } = this.state;\n\t\tconst { teamStore, appState } = this.props.stores;\n\t\tconst { teams, hasFollowRequests, followRequests = [] } = teamStore;\n        const { darkmode } = appState;\n\t\tif (!hasFollowRequests) {\n\t\t\treturn '';\n\t\t}\n\n\t\treturn (\n            <div class='row pb-1'>\n                <div class={`col-12 col-sm-8 col-lg-6 offset-sm-2 offset-lg-3 mb-0 position-relative rounded rounded-lg py-3 bg-${darkmode ? 'black' : 'white'} shadow-sm`}>\n                    <div class='container-fluid'>\n                        <div class='row'>\n                            <div class='col-12'>\n                                <h5><Text id='teams.connect.teams-follow-requests'>Forespørsel om å følge</Text>:</h5>\n                            </div>\n                        </div>\n\t\t\t\t\t\t<div class='row'>\n                            <div class='d-flex flex-row flex-nowrap' style='overflow: auto;'>\n                                {util.isArray(teams) && teams.map((team) => <>\n                                    {team && util.isArray(team.followRequests) && team.followRequests.map((reqUser) => {\n                                        const image = reqUser.image && reqUser.image.s3SmallLink ? reqUser.image : null;\n                                        const isDeleted = deleted[`${team.id}-${reqUser.id}`];\n                                        const isConfirmed = confirmed[`${team.id}-${reqUser.id}`];\n                                        const publicTeam = followRequests.find(e => e.user.id === reqUser.id);\n                                        return (\n                                            <div class='mr-2 py-2 border rounded-lg' style='width: 150px;'>\n                                                <div class={`text-center border rounded-circle imageRounded imageRoundedSmall mx-auto`} style={image ? `background-image: url(\"${image.s3SmallLink}\");` : ''}>\n                                                    {!image && <div class='text-muted font-weight-lighter' style='font-size: 20px; padding-top: 5px;'>{mu.displayNameShort(reqUser)}</div>}\n                                                </div>\n                                                <small>\n                                                    <div class='text-overflow text-center'>\n                                                        <strong>{mu.displayName(reqUser)}</strong><br />\n                                                        {/* {publicTeam && publicTeam.public > 0 ? <>\n                                                            <a href={`/teams/public/${publicTeam.uuidv4}`}>{publicTeam.name}</a>\n                                                        </> : <>\n                                                            {publicTeam ? <>{publicTeam.name}</> : ''}<br />\n                                                            <span class='text-muted'>(<Text id='teams.not-public'>Not public</Text>)</span>\n                                                        </>} */}\n                                                    </div>\n                                                    <div class='text-overflow text-center'>\n                                                        <Text id='teams.connect.wants-to-follow'>wants to follow your team:</Text>\n                                                    </div>\n                                                    <div class='text-overflow text-center'>\n                                                        <strong>{mu.displayName(team)}</strong>\n                                                    </div>\n                                                </small>\n                                                {(isConfirmed || isDeleted) ? <>\n                                                    <div class='text-center'>\n                                                        {isConfirmed ? <div class='text-success'>\n                                                            <Text id='teams.connect.confirmed'>Confirmed</Text> <i class='fas fa-check' />\n                                                        </div> : <div class='text-danger'>\n                                                            <Text id='teams.connect.deleted'>Deleted</Text> <i class='fas fa-trash-alt' />\n                                                        </div>}\n                                                    </div>\n                                                </> : <>                                    \n                                                    <div>\n                                                        <button class='btn btn-sm btn-block btn-success text-overflow mt-1' onClick={this.confirmRequest} data-team={team.id} data-user={reqUser.id}>\n                                                            <Text id='teams.connect.confirm'>Confirm</Text>\n                                                        </button>\n                                                        {publicTeam && publicTeam.public > 0 && <button class='btn btn-sm btn-block btn-outline-success text-overflow mt-1' onClick={this.confirmRequest} data-team={team.id} data-user={reqUser.id} data-follow={true}>\n                                                            <Text id='teams.connect.confirm-and-follow'>Confirm & follow back</Text>\n                                                        </button>}\n                                                        <div class='mt-3'>\n                                                            <small>\n                                                                <button class='btn btn-sm btn-block btn-link text-overflow' style='font-size: 1.0em;' onClick={this.deleteRequest} data-team={team.id} data-user={reqUser.id}>\n                                                                    <Text id='teams.connect.delete'>Del</Text>\n                                                                </button>\n                                                            </small>\n                                                        </div>\n                                                    </div>\n                                                </>}\n                                            </div>\n                                        );\n                                    })}\n                                </>)}\n                            </div>\n                        </div>\n                        <details class='mt-3'>\n                            <summary><small><Text id='teams.connect.how-summary'>How does this work?</Text></small></summary>\n                            <p>\n                                <Text id='teams.connect.how-text'>What can followers see when I grant them access to follow? The answer is very little. They can see main details of the workouts you share and name of the dogs. That's all. Try to follow a team and check out the workout tab.</Text>\n                            </p>\n                        </details>\n                    </div>\n                </div>\n            </div>\n\t\t);\n\t}\n}\n\nexport default Teams;\n","import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport { toJS } from 'mobx';\nimport { Text, Localizer, withText } from 'preact-i18n';\nimport Markdown from 'preact-markdown';\n\nimport WorkoutReplyComment from '../../components/workout/commentReply';\n\nimport style from '../style.css';\nimport mu from '../../lib/musher-util';\n\nconst initialState = {\n    showAddComment: {},\n    showAllComments: false,\n    showAllReplies: {},\n    viewImageIdx: {},\n};\n\nconst MAX_COMMENTS = 1;\n\n@observer\nclass WorkoutComments extends Component {\n     constructor(props) {\n        super(props);\n        this.state = {\n            ...initialState,\n        };\n        this.inputRef = {};\n    }\n\n    likeComment = async (e) => {\n        const { callback = () => {} } = this.props;\n        const commentId = e.target.parentElement.dataset.id || e.target.dataset.id;\n\n        const { workout } = this.props;\n\t\tconst { workoutStore } = this.props.stores;\n\t\tconst response = await workoutStore.likeWorkoutComment({ id: workout.id, commentId });\n\n\t\tif (response && response.status === 200) {\n            callback({ type: 'likeComment', workout, commentId, response });\n\t\t}\n        return true;\n    }\n\n    likeReply = async (e) => {\n        const { callback = () => {} } = this.props;\n\n        const replyId = e.target.parentElement.dataset.id || e.target.dataset.id;\n        const commentId = e.target.parentElement.dataset.comment || e.target.dataset.comment;\n\n        const { workout } = this.props;\n\t\tconst { workoutStore } = this.props.stores;\n\t\tconst response = await workoutStore.likeWorkoutCommentReply({ id: workout.id, replyId, commentId });\n\n        if (response && response.status === 200) {\n            callback({ type: 'likeReply', workout, commentId, replyId, response });\n\t\t}\n    }\n\n    replyComment = async (e) => {\n        const commentId = e.target.parentElement.dataset.id || e.target.dataset.id;\n\n        const { showAddComment } = this.state;\n        showAddComment[commentId] = !showAddComment[commentId];\n\t\tthis.setState({\n\t\t\tshowAddComment,\n\t\t}, () => {\n            if (this.inputRef[commentId]) {\n                this.inputRef[commentId].focus();\n            }\n\t\t});\n    }\n\n    toggleComments = () => {\n\t\tconst { showAllComments } = this.state;\n\t\tthis.setState({\n\t\t\tshowAllComments: !showAllComments,\n\t\t});\n\t}\n\n    toggleReplies = (e) => {\n        const commentId = e.target.parentElement.dataset.id || e.target.dataset.id;\n\t\tconst { showAllReplies } = this.state;\n        showAllReplies[commentId] = !showAllReplies[commentId];\n\t\tthis.setState({\n\t\t\tshowAllReplies,\n\t\t});\n\t}\n\n    viewImage = (e) => {\n\t\tconst { id, idx } = e.target.closest('img').dataset;\n        const { viewImageIdx } = this.state;\n        viewImageIdx[id] = idx;\n        this.setState({ viewImageIdx });\n    }\n\n    translate = async (e) => {\n        e.preventDefault();\n        e.stopPropagation();\n        const { replyid, commentid } = e.target.closest('button').dataset;\n        const { workout } = this.props;\n        const { userStore, teamStore } = this.props.stores;\n        const { user } = userStore;\n        const { showOriginal = {}, translatedText = {} } = this.state;\n        const key = `${commentid}${replyid ? `-${replyid}`: ''}`;\n        showOriginal[key] = 0;\n        if (replyid) {\n            translatedText[key] = await teamStore.translateCommentReply({ commentid, replyid, object: workout, user });\n        } else {\n            translatedText[key] = await teamStore.translateComment({ commentid, object: workout, user });\n        }\n        this.setState({ showOriginal, translatedText });\n    }\n\n    showOriginal = (e) => {\n        const { replyid, commentid } = e.target.closest('button').dataset;\n        e.preventDefault();\n        e.stopPropagation();\n        const { showOriginal = {} } = this.state;\n        showOriginal[`${commentid}${replyid ? `-${replyid}`: ''}`] = 1;\n        this.setState({ showOriginal });\n    }\n\n    render() {\n        const { showAddComment, showAllComments, showAllReplies, viewImageIdx, showOriginal = {}, translatedText = {} } = this.state;\n\t\tconst { workout, callback = () => {}, col = 12, offset = 0, compact = false } = this.props;\n        const { userStore, teamStore } = this.props.stores;\n        const { user: currentUser, isAdmin } = userStore;\n        const { language = 'en' } = currentUser;\n\n        let filteredComments = [];\n        let totalComments = 0;\n        let diplayedComments = 0;\n        let max_comments;\n        if (workout.comments) {\n            totalComments = workout.comments.length;\n            if (showAllComments) {\n                filteredComments = workout.comments;\n            } else {\n                // filteredComments = workout.comments.slice(0, MAX_COMMENTS);\n                max_comments = compact ? 0 : MAX_COMMENTS;\n                filteredComments = workout.comments.slice(Math.max(totalComments - max_comments, 0));\n            }\n            diplayedComments = filteredComments.length;\n        }\n\n        return (\n            <div>\n                {/* {showAllComments && <div>\n                    <button class='btn btn-sm btn-link py-0 mb-2'\n                        onClick={this.toggleComments}\n                    >\n                        <Text id='comments.hide-all-comments'>Skjul alle kommentarene.</Text>\n                    </button>\n                </div>} */}\n                {workout && filteredComments && filteredComments.reverse().map((comment) => {\n                    const { user = {} } = comment;\n                    const teams = teamStore.findPublicTeamByMembers(user.id);\n                    const displayNameShort = mu.displayNameShort(user);\n                    const displayName = mu.displayName(user);\n                    const userImage = user.image || (user.images ? user.images[0] : undefined);\n                    const hasLikedComment = comment.likes && comment.likes.findIndex(e => e.user === currentUser.id) > -1;\n\n                    let filteredReplises = [];\n                    let totalReplies = 0;\n                    let diplayedReplies = 0;\n                    if (comment.comments) {\n                        totalReplies = comment.comments.length;\n                        if (showAllReplies[comment.id]) {\n                            filteredReplises = comment.comments;\n                        } else {\n                            filteredReplises = comment.comments.slice(0, max_comments);\n                        }\n                        diplayedReplies = filteredReplises.length;\n                    }\n\n                    const images = [];\n                    if (comment.images) {\n                        const imgs = toJS(comment.images);\n                        images.push(...imgs);\n                    }\n                    const imageIdx = viewImageIdx[comment.id] ? viewImageIdx[comment.id] : 0;\n                    const currentImage = images && images[imageIdx] ? images[imageIdx] : null;\n\n                    const { currentLocationGeocode = {} } = comment;\n\n                   const translation = teamStore.getCommentTranslations({\n                        object: workout,\n                        commentid: comment.id,\n                        targetLang: language,\n                    }) || translatedText[comment.id];\n                    let body = translation || comment.comment;\n                    if (showOriginal[comment.id]) {\n                        body = comment.comment;\n                    }\n\n                    return (\n                        <div class='row'>\n                            <div class='col-12 d-flex mb-2 position-relative'>\n                                <div \n                                    class={`text-center border rounded-circle imageRounded imageRoundedSmall`}\n                                    style={`${userImage ? `background-image: url(\"${userImage.s3SmallLink}\"); background-size: cover;` : ''} border-width: 3px !important;`}\n                                >\n                                    {!user.image && <span class='font-weight-lighter' style='font-size: 15px;'>{displayNameShort}</span>}\n                                </div>\n                                <div class='flex-grow-1 pl-3 pt-0' style='line-height: 1.2em;'>\n                                    <div class='bg-light p-2 rounded rounded-lg'>\n                                        <div>\n                                            <span style='font-size: 0.95em;'>\n                                                <h5 class='font-weight-bold mb-0' style='font-size: 1.0em;'>\n                                                    {displayName}\n                                                </h5>\n\n                                                {teams && teams.length > 0 && <div class='mb-2'>\n                                                    <small class='font-weight-lighter text-muted'>\n                                                        {teams.filter(e => e.public === 1).slice(0, 2).map(t => <>\n                                                            <a href={`/teams/public/${t.uuidv4}`} class='mr-2'><i class='fas fa-users text-muted' /> {t.name}</a>\n                                                        </>)}\n                                                    </small>\n                                                </div>}\n\n                                                <Markdown markdown={mu.replaceImages(body, comment.images, language)} markdownOpts={mu.getMarkdownOptions()} />\n                                            </span>\n                                        </div>\n                                        <div class='container-fluid px-3 mt-1'>\n                                            {currentImage && <div class='clearfix row'>\n                                                <div\n                                                    class={`col-12 px-0 overflow-hidden`}\n                                                    style={`max-height: 30vh;`}                                                    \n                                                >\n                                                    <img loading='lazy' class={`img-fluid`} style='min-width: 100px;' src={currentImage.s3LargeLink} />\n                                                </div>\n                                            </div>}\n                                            {images && images.length > 1 && <div class='clearfix d-flex flex-wrap row'>\n                                                {images.map((img, idx) => {\n                                                    return (<>\n                                                        <div\n                                                            class={`col px-0 overflow-hidden`}\n                                                            style={`max-height: 100px; min-width: 100px;`}\n                                                        >\n                                                            <img loading='lazy' class={`img-fluid border`} style='min-width: 100px;' src={img.s3SmallLink} onClick={this.viewImage} data-id={comment.id} data-idx={idx} />\n                                                        </div>\n                                                    </>);\n                                                })}\n                                            </div>}\n                                        </div>\n                                    </div>\n                                    <small>\n                                        <button class={`btn btn-sm btn-link py-0 ${hasLikedComment ? 'text-primary' : ''}`}\n                                            onClick={this.likeComment}\n                                            data-id={comment.id}\n                                        >\n                                            <Text id='comments.like'>Lik</Text>\n                                        </button>\n                                        -\n                                        <button class='btn btn-sm btn-link py-0'\n                                            onClick={this.replyComment}\n                                            data-id={comment.id}\n                                        >\n                                            <Text id='comments.comment-add'>Kommentar</Text>\n                                        </button>\n                                        {comment.language !== language && <>\n                                            -\n                                            {!showOriginal[comment.id] && translation ? <>\n                                                <button\n                                                    type='button'\n                                                    class='btn btn-sm btn-link'\n                                                    data-commentid={comment.id}\n                                                    onClick={this.showOriginal}\n                                                >\n                                                    <i class='fas fa-cog' />  <Text id='home.translate-show-original'>Show original</Text>\n                                                </button>\n                                            </> : <>\n                                                <button\n                                                    type='button'\n                                                    class='btn btn-sm btn-link'\n                                                    onClick={this.translate}\n                                                    data-commentid={comment.id}\n                                                >\n                                                    <i class='fas fa-cog' /> <Text id='home.translate-to'>See translation</Text>\n                                                </button>\n                                            </>}\n                                        </>}\n                                        -\n                                        <button class='btn btn-sm btn-link py-0 disabled'>\n                                            {util.formatDistance(comment.createdDate, new Date(), { locale: 'no-NB' })}\n                                            {comment.updatedDate && <>\n                                                <span class='font-weight-light ml-2'>(Edited {util.formatDistance(comment.updatedDate, new Date(), { locale: 'no-NB' })})</span>\n                                            </>}\n                                        </button>\n                                        {isAdmin && currentLocationGeocode && currentLocationGeocode.formatted_address && <>\n                                            <span class='ml-2 text-muted'>\n                                                <i class='fas fa-map-marker-alt' /> {currentLocationGeocode.formatted_address}\n                                            </span>\n                                        </>}\n                                    </small>\n                                </div>\n                                {comment.likes && comment.likes.length > 0 && <small class='position-absolute bg-light shadow-sm rounded-lg py-0 px-1' style='bottom: 20px; right: 15px;'>\n                                    <i class='fas fa-thumbs-up text-primary' /> {comment.likes.length}\n                                </small>}\n                            </div>\n                            <div class='col-11 offset-1 mb-2'>\n\n                                {comment && filteredReplises && filteredReplises.map((reply) => {\n                                    const { user = {} } = reply;\n                                    const teams = teamStore.findPublicTeamByMembers(user.id);\n                                    const displayNameShort = user.firstname ? `${util.ucfirst(user.firstname, true)}${util.ucfirst(user.lastname, true)}` : `${util.ucfirst(user.email || '', true)}`;\n                                    const displayName = user.firstname ? `${user.firstname} ${user.lastname}` : `${user.email}`;\n                                    const userImage = user.image || (user.images ? user.images[0] : undefined);\n                                    const hasLikedReply = reply.likes && reply.likes.findIndex(e => e.user === currentUser.id) > -1;\n\n                                    const replyTranslation = teamStore.getCommentReplyTranslations({\n                                        object: workout,\n                                        commentid: comment.id,\n                                        replyid: reply.id,\n                                        targetLang: language,\n                                    }) || translatedText[`${comment.id}-${reply.id}`];\n                                    let replyBody = replyTranslation || reply.comment;\n                                    if (showOriginal[`${comment.id}-${reply.id}`]) {\n                                        replyBody = reply.comment;\n                                    }\n\n                                    return (\n                                        <div class='row'>\n                                            <div class='col-12 d-flex mb-2 position-relative'>\n                                                <div \n                                                    class={`text-center border rounded-circle imageRounded imageRoundedThumb`}\n                                                    style={`${userImage ? `background-image: url(\"${userImage.s3SmallLink}\"); background-size: cover;` : ''} border-width: 3px !important;`}\n                                                >\n                                                    {!user.image && <span class='font-weight-lighter' style='font-size: 15px;'>{displayNameShort}</span>}\n                                                </div>\n                                                <div class='flex-grow-1 pl-3 pt-0' style='line-height: 1.2em;'>\n                                                    <div class='bg-light p-2 rounded-lg'>\n                                                        <span style='font-size: 0.95em;'>\n                                                            <h5 class='font-weight-bold mb-0' style='font-size: 1.0em;'>\n                                                                {displayName}\n                                                            </h5>\n\n                                                            {teams && teams.length > 0 && <div class='mb-2'>\n                                                                <small class='font-weight-lighter text-muted'>\n                                                                    {teams.filter(e => e.public === 1).slice(0, 2).map(t => <>\n                                                                        <a href={`/teams/public/${t.uuidv4}`} class='mr-2'>\n                                                                            <i class='fas fa-users text-muted' /> {t.name}\n                                                                        </a>\n                                                                    </>)}\n                                                                </small>\n                                                            </div>}\n\n                                                            <Markdown markdown={mu.replaceImages(replyBody, reply.images, language)} markdownOpts={mu.getMarkdownOptions()} />\n                                                        </span>\n                                                    </div>\n                                                    <small>\n                                                        <button class={`btn btn-sm btn-link py-0 ${hasLikedReply ? 'text-primary' : ''}`}\n                                                            onClick={this.likeReply}\n                                                            data-comment={comment.id}\n                                                            data-id={reply.id}\n                                                        >\n                                                            <Text id='comments.like'>Lik</Text>\n                                                        </button>\n                                                        -\n                                                        <button class='btn btn-sm btn-link py-0'\n                                                            onClick={this.replyComment}\n                                                            data-id={comment.id}\n                                                        >\n                                                            <Text id='comments.comment-add'>Kommentar</Text>\n                                                        </button>\n                                                        {reply.language !== language && <>\n                                                            -\n                                                            {!showOriginal[`${comment.id}-${reply.id}`] && replyTranslation ? <>\n                                                                <button\n                                                                    type='button'\n                                                                    class='btn btn-sm btn-link'\n                                                                    data-commentid={comment.id}\n                                                                    data-replyid={reply.id}\n                                                                    onClick={this.showOriginal}\n                                                                >\n                                                                    <i class='fas fa-cog' />  <Text id='home.translate-show-original'>Show original</Text>\n                                                                </button>\n                                                            </> : <>\n                                                                <button\n                                                                    type='button'\n                                                                    class='btn btn-sm btn-link'\n                                                                    onClick={this.translate}\n                                                                    data-commentid={comment.id}\n                                                                    data-replyid={reply.id}\n                                                                >\n                                                                    <i class='fas fa-cog' /> <Text id='home.translate-to'>See translation</Text>\n                                                                </button>\n                                                            </>}\n                                                        </>}\n                                                        -\n                                                        <button class='btn btn-sm btn-link py-0 disabled'>\n                                                            {util.formatDistance(reply.createdDate, new Date(), { locale: 'no-NB' })}\n                                                        </button>\n                                                    </small>\n                                                </div>\n                                                {reply.likes && <small class='position-absolute bg-light shadow-sm rounded-lg py-0 px-1' style='bottom: 20px; right: 15px;'>\n                                                    <i class='fas fa-thumbs-up text-primary' /> {reply.likes.length}\n                                                </small>}\n                                            </div>\n                                        </div>\n                                    );\n                                })}\n                                {totalReplies - diplayedReplies > 0 && <div>\n                                    <button class='btn btn-sm btn-link py-0'\n                                        onClick={this.toggleReplies}\n                                        data-id={comment.id}\n                                    >\n                                        <Text id='comments.show-more' fields={{ more: totalReplies - diplayedReplies }}>\n                                            Vis {totalReplies - diplayedReplies} flere kommentarer...\n                                        </Text>\n                                    </button>\n                                </div>}\n\n                            </div>\n                            {showAddComment[comment.id] && <div class='col-11 offset-1 d-flex mb-2 position-relative'>\n                                <WorkoutReplyComment stores={this.props.stores} workout={workout}\n                                    callback={callback}\n                                    commentId={comment.id}\n                                    inputRef={c => this.inputRef[comment.id] = c}\n                                    inputRefObject={this.inputRef}\n                                />\n                            </div>}\n                        </div>\n                    );\n                })}\n                {totalComments - diplayedComments > 0 && <div>\n                    <button class='btn btn-sm btn-link py-0'\n                        onClick={this.toggleComments}\n                    >\n                        <Text id='comments.show-more' fields={{ more: totalComments - diplayedComments }}>\n                            Vis {totalComments - diplayedComments} flere kommentarer...\n                        </Text>\n                    </button>\n                </div>}\n                {showAllComments && <div>\n                    <button class='btn btn-sm btn-link py-0'\n                        onClick={this.toggleComments}\n                    >\n                        <Text id='comments.hide-all-comments'>Skjul alle kommentarene.</Text>\n                    </button>\n                </div>}\n            </div>\n        );\n    }\n}\n\nexport default WorkoutComments;\n","import { h, Component, createRef } from 'preact';\nimport { observer } from 'mobx-preact';\nimport util from 'preact-util';\nimport { Text, Localizer, withText } from 'preact-i18n';\n\nconst debug = false;\nconst debugName = 'Images';\n\n@observer\nclass DragNDropFileupload extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            drag: false,\n            loadingProgress: 0,\n            uploadedFiles: [],\n            uploadedFilesData: {},\n        };\n    }\n\n    dropRef = createRef();\n\n    handleDrag = (e) => {\n        e.preventDefault();\n        e.stopPropagation();\n    }\n\n    handleDragIn = (e) => {\n        e.preventDefault();\n        e.stopPropagation();\n        this.dragCounter++;\n        if (e.dataTransfer.items && e.dataTransfer.items.length > 0) {\n            this.setState({ drag: true });\n        }\n    }\n\n    handleDragOut = (e) => {\n        e.preventDefault();\n        e.stopPropagation();\n        this.dragCounter--;\n        if (this.dragCounter === 0) {\n            this.setState({ drag: false });\n        }\n    }\n\n    handleDrop = (e) => {\n        if (debug) {\n            console.log(`${debugName}.handleDrop: event`, e);\n        }\n        e.preventDefault();\n        e.stopPropagation();\n        this.setState({ drag: false });\n        if (e.dataTransfer.files && e.dataTransfer.files.length > 0) {\n            // this.props.handleDrop(e.dataTransfer.files);\n            // e.dataTransfer.clearData();\n            for (let i = 0, l = e.dataTransfer.files.length; i < l; i += 1) {\n                const photo = e.dataTransfer.files[i];\n                // if (photo.type.match('image.*')) {\n                this.readLocalFile(photo);\n                // }\n            }\n            this.dragCounter = 0;\n        }\n    }\n\n    // Upload\n    handleAddFiles = (event) => {\n        event.preventDefault();\n        const el = event.target;\n        if (debug) {\n            console.log(`${debugName}.handleAddFiles: event, el`, event, el);\n        }\n        for (let i = 0, l = el.files.length; i < l; i += 1) {\n            const photo = el.files[i];\n            // if (photo.type.match('image.*')) {\n            this.readLocalFile(photo);\n            // }\n        }\n    }\n\n    handleEvent = (e, fileObject) => {\n        if (debug) {\n            console.log(`${debugName}.handleEvent[${fileObject.name}]: ${e.type}: `\n                + `${e.loaded} bytes transferred of ${e.total}. Is lengthComputable: ${e.lengthComputable}: `\n                + `${JSON.stringify(e)}`);\n        }\n    }\n\n    handleUpload = (fileObject) => {\n        if (debug) {\n            console.log(`${debugName}.handleUpload[${fileObject.name}]`);\n        }\n\n        const { uploadStatus = () => {}, before = () => {}, after = () => {} } = this.props;\n        uploadStatus(false);\n\n        if (util.isFunction(before)) {\n            before();\n        }\n\n        const formData = new FormData();\n        formData.append('files[]', fileObject);\n        const uploadMeta = {\n            progress: 1,\n        };\n\n        uploadMeta.xhr = new XMLHttpRequest();\n\n        uploadMeta.xhr.upload.addEventListener('progress', (event) => {\n            const fileObj = fileObject;\n            this.updateProgress(event, fileObj);\n        });\n        uploadMeta.xhr.addEventListener('loadstart', (event) => {\n            const fileObj = fileObject;\n            this.handleEvent(event, fileObj);\n        });\n        uploadMeta.xhr.addEventListener('load', (event) => {\n            const fileObj = fileObject;\n            this.handleEvent(event, fileObj);\n        });\n        uploadMeta.xhr.addEventListener('loadend', (event) => {\n            const fileObj = fileObject;\n            if (util.isFunction(after)) {\n                after();\n            }\n            this.handleEvent(event, fileObj);\n        });\n        uploadMeta.xhr.addEventListener('progress', (event) => {\n            const fileObj = fileObject;\n            this.handleEvent(event, fileObj);\n        });\n        uploadMeta.xhr.addEventListener('error', (event) => {\n            const fileObj = fileObject;\n            this.handleEvent(event, fileObj);\n        });\n        uploadMeta.xhr.addEventListener('abort', (event) => {\n            const fileObj = fileObject;\n            this.handleEvent(event, fileObj);\n        });\n        uploadMeta.xhr.addEventListener('readystatechange', (event) => {\n            const fileObj = fileObject;\n            this.uploadDone(event, fileObj);\n        });\n\n        uploadMeta.xhr.open('POST', `${util.getApiServer()}${this.props.apiUrl}`);\n        uploadMeta.xhr.setRequestHeader('Authorization', `Bearer ${util.getJwtToken()}`);\n        uploadMeta.xhr.send(formData);\n\n        const filename = fileObject.name;\n        const uploadedFilesData = this.state.uploadedFilesData;\n        if (!uploadedFilesData[filename]) {\n            uploadedFilesData[filename] = {};\n        }\n        uploadedFilesData[filename].uploadMeta = uploadMeta;\n        uploadedFilesData[filename].imageNum = this.state.imageNum;\n        this.setState({ uploadedFilesData });\n    }\n\n    // eslint-disable-next-line\n    readLocalFile = (fileObject) => {\n        return new Promise((resolve, reject) => {\n            const reader = new FileReader();\n\n            reader.addEventListener('error', (error) => {\n                if (debug) {\n                    console.log(`${debugName}.FileReader: Error occurred reading file: ${fileObject.name}: ${error}`);\n                }\n                reject(error);\n            });\n\n            reader.addEventListener('load', (event) => {\n                if (debug) {\n                    console.log(`${debugName}.FileReader: File: ${fileObject.name} read successfully: `\n                        + `${JSON.stringify(event)}`);\n                }\n                const photo = fileObject;\n                const filename = photo.name;\n                const uploadedFilesData = this.state.uploadedFilesData;\n                if (!uploadedFilesData[filename]) {\n                    uploadedFilesData[filename] = {};\n                }\n                uploadedFilesData[filename].event = event;\n                this.setState({ uploadedFilesData });\n                this.handleUpload(photo);\n                resolve(event);\n            });\n\n            reader.readAsDataURL(fileObject);\n        });\n    }\n\n    updateProgress = (event, fileObject) => {\n        if (event.lengthComputable) {\n            const filename = fileObject.name;\n            const uploadedFilesData = this.state.uploadedFilesData;\n            const percentComplete = (event.loaded / event.total) * 100;\n            if (debug) {\n                console.log(`${debugName}.updateProgress[${filename}].progress`, percentComplete);\n            }\n            uploadedFilesData[filename].uploadMeta.progress = percentComplete;\n            this.setState({ uploadedFilesData });\n        }\n    }\n\n    uploadDone = (event, fileObject) => {\n        const filename = fileObject.name;\n        const uploadedFilesData = this.state.uploadedFilesData;\n        const uploadMeta = uploadedFilesData[filename].uploadMeta;\n        if (debug) {\n            console.log(`${debugName}.uploadDone[${filename}].uploadedFilesData`, uploadedFilesData);\n            console.log(`${debugName}.uploadDone[${filename}].uploadMeta`, uploadMeta);\n            console.log(`${debugName}.uploadDone.event`, event);\n        }\n\n        if (uploadMeta && uploadMeta.xhr.readyState === 4 && uploadMeta.xhr.status === 201) {\n            const response = JSON.parse(uploadMeta.xhr.responseText);\n            const files = response.data.files;\n            for (let i = 0; i < files.length; i += 1) {\n                const file = files[i];\n                this.addFileToUpload(file);\n                this.fileInput.value = '';\n            }\n        }\n    }\n\n    addFileToUpload(file) {\n        if (debug) {\n            console.log(`${debugName}.addFileToUpload[${file.name}]`);\n        }\n        const { uploadedFilesData } = this.state;\n        const { handleAddImage, uploadStatus = () => {} } = this.props;\n\n        delete uploadedFilesData[file.name];\n        this.setState({ uploadedFilesData });\n        handleAddImage(file);\n        uploadStatus(true);\n    }\n    // /Upload\n\n    componentDidMount() {\n        const div = this.dropRef.current;\n        div.addEventListener('dragenter', this.handleDragIn);\n        div.addEventListener('dragleave', this.handleDragOut);\n        div.addEventListener('dragover', this.handleDrag);\n        div.addEventListener('drop', this.handleDrop);\n\n        const { autoOpen } = this.props;\n\n        if (autoOpen) {\n            setTimeout(() => {\n                // console.log('[setTimeout]');\n                this.fileInput.click();\n            }, 10);\n        }\n    }\n\n    componentWillUnmount() {\n        const div = this.dropRef.current;\n        div.removeEventListener('dragenter', this.handleDragIn);\n        div.removeEventListener('dragleave', this.handleDragOut);\n        div.removeEventListener('dragover', this.handleDrag);\n        div.removeEventListener('drop', this.handleDrop);\n    }\n\n    render() {\n        const { uploadedFilesData } = this.state;\n\n        return (\n            <div style={{ position: 'relative' }} ref={this.dropRef}>\n                {this.state.drag &&\n                <div style={{\n                    border: 'dashed grey 4px',\n                    backgroundColor: 'rgba(255,255,255,.8)',\n                    position: 'absolute',\n                    top: 0,\n                    bottom: 0,\n                    left: 0,\n                    right: 0,\n                    zIndex: 9999,\n                }}>\n                    <div\n                        style={{\n                            position: 'absolute',\n                            top: '50%',\n                            right: 0,\n                            left: 0,\n                            textAlign: 'center',\n                            color: 'grey',\n                            fontSize: 36,\n                        }}\n                    >\n                        <div><Text id='imageupload.drag-files-here'>drop your files here :)</Text></div>\n                    </div>\n                </div>}\n\n                <div>\n                    <input class='btn btn-info col-sm-12' multiple\n                        type='file'\n                        id='image-file'\n                        onchange={this.handleAddFiles}\n                        ref={(c) => {\n                            this.fileInput = c;\n                        }}\n                    />\n                </div>\n                <div>\n                    {Object.keys(uploadedFilesData).length > 0 ? (<h3><Text id='imageupload.upload-images'>Uploaded images</Text></h3>) : ''}\n                    <ul class='list-group'>\n                        {Object.keys(uploadedFilesData).map((key) => {\n                            const { uploadMeta = {} } = uploadedFilesData[key];\n                            const isImage = key.match(/(jpg|jpeg|png|gif|heic|heif|svg|webp|tif)/i);\n                            return (\n                                <li class='list-group-item list-group-item-action flex-column align-items-start'>\n                                    <div class='d-flex w-100 justify-content-between'>\n                                        {isImage && <img class='img-fluid mr-3'\n                                            src={uploadedFilesData[key].event.target.result}\n                                            style='max-height: 50px;'\n                                        />}\n                                        <small>{uploadedFilesData[key].event.uploadDone}</small>\n                                        <Text id='imageupload.uploading-image'>Laster opp bilde...</Text>\n                                        <small>{util.formatBytes(uploadedFilesData[key].event.total, 2)}</small>\n                                    </div>\n                                    <div class='progress mt-1' style='height: 4px;'>\n                                        <div\n                                            class='progress-bar progress-bar-striped progress-bar-animated bg-success'\n                                            role='progressbar'\n                                            style={`width: ${uploadMeta.progress}%; height: 4px;`}\n                                            aria-valuenow={uploadMeta.progress}\n                                            aria-valuemin='0'\n                                            aria-valuemax='100'\n                                        />\n                                    </div>\n                                </li>\n                            );\n                        })}\n                    </ul>\n                </div>\n\n                {this.props.children}\n            </div>\n        );\n    }\n}\n\nexport default DragNDropFileupload;\n","import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport { Text, Localizer } from 'preact-i18n';\n\nimport mu from '../../lib/musher-util';\n\nconst initialState = {};\n\n@observer\nclass DisplayLikesAndComments extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            ...initialState,\n        };\n    }\n\n    toggleViews = () => {\n        const { showViewList } = this.state;\n        const { isTeamAdmin, isAdmin } = this.props;\n        if (isTeamAdmin || isAdmin) {\n            this.setState({\n                showViewList: !showViewList,\n            });\n        }\n    }\n\n    render() {\n        const { showViewList } = this.state;\n        const { storyStore, teamStore, workoutStore } = this.props.stores;\n        const { views, object, isTeamAdmin, isAdmin,\n            type = 'story', onTeamClick = () => {}, onUserClick = () => {} } = this.props;\n\n        const viewUsersArrays = [];\n        Object.entries(object.statistics).forEach(([year, yearObject]) => {\n            // console.log({ year, yearObject });\n            Object.entries(yearObject).forEach(([week, weekObject]) => {\n                // console.log({ week, weekObject });\n                if (weekObject.viewUsers) {\n                    viewUsersArrays.push(weekObject.viewUsers);\n                }\n            });\n        });\n        const viewUsers = viewUsersArrays.flat().slice(0, 50);\n\n\t\treturn (<>\n            <div class='d-flex justify-content-end mb-2'>\n                <span class='ml-2 text-muted font-weight-lighter'\n                    onClick={this.toggleViews}\n                >\n                    {views} <Text id='story.views'>views</Text>\n                </span>\n            </div>\n            {showViewList && <div class='mt-3 mb-3'>\n                {viewUsers && viewUsers.map((userId) => {\n                    let user;\n                    let teams;\n                    if (type === 'story') {\n                        user = storyStore.findPublicUser(userId);\n                        teams = storyStore.findPublicTeamByMembers(userId);\n                    } else if (type === 'team') {\n                        user = teamStore.findPublicUser(userId);\n                        teams = teamStore.findPublicTeamByMembers(userId);\n                    } else if (type === 'workout') {\n                        user = workoutStore.findPublicUser(userId);\n                        teams = workoutStore.findPublicTeamByMembers(userId);\n                    }\n                    if (!user) {\n                        return '';\n                    }\n                    let publicTeam;\n                    if (util.isArray(teams)) {\n                        publicTeam = teams.find(e => e.public === 1);\n                    }\n                    const image = mu.getImage({ user, team: publicTeam, priority: 'user' });\n                    const shortname = mu.displayNameShort(user);\n                    const name = mu.displayName(user, true);\n                    return (<div class='d-flex flex-row position-relative font-weight-light mb-1'>\n                        {publicTeam ? <>\n                            <a href={`/teams/public/${publicTeam.uuidv4}`} title={publicTeam.name} onClick={(e) => onTeamClick(e, publicTeam.uuidv4)} class='stretched-link'>\n                                <div\n                                    class={`text-center border rounded-circle imageRounded imageRoundedThumb`}\n                                    style={`${image ? `background-image: url(\"${image}\"); background-size: cover;` : ''}`}\n                                >\n                                    {!image && <div class='' style='font-size: 12px; padding-top: 3px;'>{shortname}</div>}\n                                </div>\n                            </a>\n                            <div class='ml-2 '>\n                                {name} <span class='font-weight-lighter'>- {publicTeam.name}</span>\n                            </div>\n                        </> : <>\n                            <div\n                                class={`text-center border rounded-circle imageRounded imageRoundedThumb`}\n                                style={`${image ? `background-image: url(\"${image}\"); background-size: cover;` : ''} opacity: 0.5;`}\n                            >\n                                {!image && <div class='text-muted' style='font-size: 12px; padding-top: 3px;'>{shortname}</div>}\n                            </div>\n                            <div class='ml-2'>\n                                {name}\n                            </div>\n                        </>}\n                    </div>);\n                })}\n                {views > viewUsers.length && <>\n                    <small class='text-muted'>\n                        <Text id='story.limited-to'>Limited to max 50 users.</Text>\n                    </small>\n                </>}\n            </div>}\n\t\t</>);\n\t}\n}\n\nexport default DisplayLikesAndComments;\n","import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport { Text, Localizer } from 'preact-i18n';\n\nimport mu from '../../lib/musher-util';\n\nconst initialState = {};\n\n@observer\nclass PremiumBadge extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            ...initialState,\n        };\n    }\n\n    render() {\n        return (\n            <span class='badge badge-pill badge-warning float-right'><i class='fas fa-award mr-2' /> <Text id='premium.title'>Premium</Text></span>\n\n        );\n    }\n}\n\nexport default PremiumBadge;\n"],"sourceRoot":""}