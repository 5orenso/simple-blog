(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{"+1Jk":function(t,e,s){"use strict";s.r(e),function(t){function o(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,o)}return s}function r(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}var n,a=s("hosL"),i=s("Utv1"),c=s("/eY4"),l=s("OhSV"),d=s("ZOvn"),h=s("JWe/"),m=s("WAWY"),u=s("azdc"),b=s("XPU5"),p=(s("ZWUU"),s("CE5K")),f=s("qv+O"),g=s("sgpT"),O=s("0SNj"),j=s("9Bb9"),v=s("bUJL"),y=s("4imK"),w=s("pJjI"),k=s("L3gU"),x=s("AEg1"),S=s("gOLw"),P=s("epqT"),C=s("w93r"),D=d.a.marginTop(!0),I=d.a.marginBottom(),T=d.a.subMenuMarginTop(),L={isLoading:!1,submenu:"lastWorkouts",viewmenu:"wall"},E=Object(c.a)(n=function(e){function s(t){var s;return(s=e.call(this,t)||this).loadTeamInfo=function(){return new Promise((function(t,e){return Promise.resolve(s.loadWorkoutSummary()).then((function(){try{return Promise.resolve(s.loadWorkoutPlans()).then((function(){try{return t()}catch(t){return e(t)}}),e)}catch(t){return e(t)}}),e)}))},s.loadWorkoutPlans=function(t){return new Promise((function(e,o){function r(){return e()}var n,a,c,l,d,h,m,u,b;return void 0===t&&(t=s.props),n=t.year,a=(new Date).getMonth()+1,c=i.a.getYear(),l=parseInt(n||(a<6?c-1:c),10),h=(d=t.stores).workoutPlanStore,(u=void 0===(m=d.workoutStore.currentTeam)?d.userStore.team.id:m)?Promise.resolve(h.load({query:{team:u,seasonYear:l,seasonMonth:6}})).then(function(){try{if((b=h.workoutPlans[0]||{}).id)return Promise.resolve(h.load(b.id)).then(function(){try{return h.prepareWeekGraphs({year:n}),t.call(this)}catch(t){return o(t)}}.bind(this),o);function t(){return r.call(this)}return t.call(this)}catch(t){return o(t)}}.bind(this),o):(h.updateItem("workoutPlans",[]),h.updateItem("workoutPlan",{}),h.resetGraphPlanWeekDistanceCurrent(),r.call(this))}))},s.loadDogs=function(){return new Promise((function(t,e){var o;return o=s.props.stores.dogStore,Promise.resolve(o.load({query:{team:o.currentTeam},addData:["workoutSummary"]})).then((function(){try{return t()}catch(t){return e(t)}}),e)}))},s.reloadFeeds=function(t){return new Promise((function(e,o){return t.preventDefault(),s.setState({isLoading:!0}),Promise.resolve(s.loadStoriesPublicFeed()).then((function(){try{return Promise.resolve(s.loadTeamsPublicFeed()).then((function(){try{return s.setState({isLoading:!1}),e()}catch(t){return o(t)}}),o)}catch(t){return o(t)}}),o)}))},s.setViewMenu=function(t){t.preventDefault();var e=t.target.closest("a").dataset.menu;s.setState({viewmenu:e})},s.toggleViewmode=function(t){var e=t.target.dataset.mode;!e&&t.target.parentNode&&(e=t.target.parentNode.dataset.mode),s.props.stores.appState.toggleViewmode(e)},s.chooseSubmenu=function(t){s.setState({submenu:t.target.parentElement.dataset.menu||t.target.dataset.menu})},s.state=function(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?o(Object(s),!0).forEach((function(e){r(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):o(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}({},L),s}var n,c;c=e,(n=s).prototype=Object.create(c.prototype),n.prototype.constructor=n,n.__proto__=c;var d=s.prototype;return d.loadAll=function(){return new Promise(function(t,e){var s,o,r,n,a;return o=(s=this.props.stores).appState,r=s.userStore,this.setState({isLoading:!0}),Promise.resolve(o.getFingerprint()).then(function(){try{return Promise.resolve(r.getInfo()).then(function(){try{return Promise.resolve(r.getNotifications()).then(function(){try{return(n=r.user).currentLocationInfo&&n.currentLocationInfo.coords&&r.getWeatherUser({lat:(a=n.currentLocationInfo.coords).latitude,lon:a.longitude,altitude:a.altitude}),Promise.resolve(this.loadWorkoutSummary()).then(function(){try{return Promise.resolve(Promise.all([this.loadWorkoutPlans(),this.loadTeams()])).then(function(){try{return this.setState({isLoading:!1}),t()}catch(t){return e(t)}}.bind(this),e)}catch(t){return e(t)}}.bind(this),e)}catch(t){return e(t)}}.bind(this),e)}catch(t){return e(t)}}.bind(this),e)}catch(t){return e(t)}}.bind(this),e)}.bind(this))},d.loadTeams=function(t){return new Promise(function(e,s){var o;return void 0===t&&(t=this.props),o=t.stores,Promise.resolve(o.teamStore.load({query:{team:o.workoutStore.currentTeam,skipMusherWorkoutSummary:!0},addData:["workoutSummary"]})).then((function(){try{return e()}catch(t){return s(t)}}),s)}.bind(this))},d.loadFeed=function(){return new Promise(function(t,e){return Promise.resolve(this.props.stores.userStore.getFeed({})).then((function(){try{return t()}catch(t){return e(t)}}),e)}.bind(this))},d.loadWorkoutSummary=function(){return new Promise(function(t,e){var s;return s=this.props.stores,Promise.resolve(s.userStore.getWorkoutSummary({team:s.workoutStore.currentTeam})).then((function(){try{return t()}catch(t){return e(t)}}),e)}.bind(this))},d.loadStoriesPublicFeed=function(t){return new Promise(function(e,s){return void 0===t&&(t=this.props),Promise.resolve(t.stores.storyStore.loadPublicFeed()).then((function(){try{return e()}catch(t){return s(t)}}),s)}.bind(this))},d.loadTeamsPublicFeed=function(t){return new Promise(function(e,s){return void 0===t&&(t=this.props),Promise.resolve(t.stores.teamStore.loadPublicFeed()).then((function(){try{return e()}catch(t){return s(t)}}),s)}.bind(this))},d.componentDidMount=function(){this.loadAll()},d.render=function(){var e=this,s=this.state,o=s.isLoading,r=s.submenu,n=s.viewmenu,c=this.props.stores,d=c.userStore,L=c.appState,E=c.workoutPlanStore,_=c.teamStore,R=c.workoutStore,A=c.stravaActivityStore,M=c.garminActivityDetailsStore,F=E.workoutPlan,W=E.workoutPlans,z=L.darkmode,V=L.viewmode,N=d.workouts,U=d.isAdmin,K=d.user,B=K.yrWeather,Y=K.currentLocationGeocode,q=(void 0===Y?{}:Y).formatted_address,Z=d.teams.length,G=d.dogs.length,H=d.tracks.length,J=R.currentTeam,Q=R.cordovaActiveTrackingParams,X=R.isRunning,$=R.totalDistance,tt=R.currentSpeed,et=R.totalTime,st=d.findTeam(J,!0),ot=_.workoutSummary,rt=(J?_.findWorkoutSummary(J,2019):_.findWorkoutSummaryTotal(2019))||{},nt=(J?_.findWorkoutSummary(J,2020):_.findWorkoutSummaryTotal(2020))||{},at=A.stravaActivities,it=M.garminActivityDetails;return Object(a.h)("div",{class:"container-fluid",style:"margin-bottom: "+I+"; margin-top: "+D+";"},Object(a.h)("div",{class:"row mb-4 fixed-top",style:"margin-top: "+T+"; background-color: "+(z?"#191d21":"#f8f9fa")+";"},U&&Object(a.h)("div",{class:"col text-center subtopmenu"},Object(a.h)("a",{href:"/admin",class:"text-secondary stretched-link"},Object(a.h)("nobr",null,Object(a.h)("i",{class:"fas fa-user-shield"})," ",Object(a.h)(l.c,{id:"home.admin"},"Admin")))),Object(a.h)("div",{class:"col text-center subtopmenu border-bottom border-primary"},Object(a.h)("a",{href:"/",class:"text-primary stretched-link"},Object(a.h)("nobr",null,Object(a.h)("i",{class:"fas fa-chart-line"})," ",Object(a.h)(l.c,{id:"home.dashboard"},"Dashboard")))),Object(a.h)("div",{class:"col text-center subtopmenu"},Object(a.h)("a",{href:"/feed",class:"text-secondary stretched-link"},Object(a.h)("nobr",null,Object(a.h)("i",{class:"fas fa-rss"})," ",Object(a.h)(l.c,{id:"home.feed"},"Feed")))),Object(a.h)("div",{class:"col text-center subtopmenu"},Object(a.h)("a",{href:"/todo",class:"text-secondary stretched-link"},Object(a.h)("nobr",null,Object(a.h)("i",{class:"fas fa-list"})," ",Object(a.h)(l.c,{id:"home.todo"},"Todo"))))),X&&Q&&Object(a.h)(t,null,Object(a.h)("div",{class:"row"},Object(a.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 border-bottom bg-light py-4"},Object(a.h)("h1",{class:"text-success font-weight-bold"},"Tracking",Object(a.h)("div",{class:"spinner-grow ml-3",role:"status"})),Object(a.h)("div",{class:"row mb-3"},Object(a.h)("div",{class:"col-4 text-center font-weight-bold",style:"font-size: 1.3em;"},i.a.secToHms(et)),Object(a.h)("div",{class:"col-4 text-center font-weight-bold",style:"font-size: 1.3em;"},i.a.format(3.6*tt,1)," km/t"),Object(a.h)("div",{class:"col-4 text-center font-weight-bold",style:"font-size: 1.3em;"},i.a.format($/1e3,2)," km")),Object(a.h)("a",{class:"btn btn-block btn-danger",href:"/workouts/tracking"},Object(a.h)(l.c,{id:"workouts.go-to-tracking"},"Go to tracking"))))),["beta"].indexOf(V)>-1?Object(a.h)(t,null,Object(a.h)(P.a,{stores:this.props.stores,url:this.props.url}),Object(a.h)("div",{class:"row"},Object(a.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 text-center"},Object(a.h)("button",{type:"button",class:"btn btn-link btn-sm font-weight-lighter","data-mode":"normal",onClick:this.toggleViewmode},Object(a.h)("small",null,Object(a.h)("i",{class:"fas fa-flask"})," ",Object(a.h)(l.c,{id:"header.viewmode-back-to-normal"},"GÃ¥ tilbake til vanlig versjon"))))),Object(a.h)("div",{class:"bg-light"},Object(a.h)(C.a,{stores:this.props.stores,data:B,place:q})),Object(a.h)(x.a,{stores:this.props.stores}),Object(a.h)("div",{class:"row bg-light"},Object(a.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 border-bottom"},Object(a.h)("small",null,Object(a.h)("small",null,Object(a.h)("div",{class:"float-right"},o?Object(a.h)(t,null,Object(a.h)("div",{class:"spinner-border text-primary",role:"status"},Object(a.h)("span",{class:"sr-only"},"Loading..."))):Object(a.h)(t,null,Object(a.h)("a",{href:"#",style:"font-size: 1.8em;",onClick:this.reloadFeeds},Object(a.h)("i",{class:"fas fa-sync-alt"})))),Object(a.h)("ul",{class:"nav nav-sm nav-tabs"},Object(a.h)("li",{class:"nav-item"},Object(a.h)("a",{class:"nav-link "+("wall"===n?"active":""),href:"#",onClick:this.setViewMenu,"data-menu":"wall"},Object(a.h)("i",{class:"fas fa-rss"})," ",Object(a.h)(l.c,{id:"home.wall"},"Veggen"))),Object(a.h)("li",{class:"nav-item"},Object(a.h)("a",{class:"nav-link "+("workout"===n?"active":""),href:"#",onClick:this.setViewMenu,"data-menu":"workout"},Object(a.h)("i",{class:"fas fa-running"})," ",Object(a.h)(l.c,{id:"home.workouts"},"Treninger"))),Object(a.h)("li",{class:"nav-item"},Object(a.h)("a",{class:"nav-link "+("totals"===n?"active":""),href:"#",onClick:this.setViewMenu,"data-menu":"totals"},Object(a.h)("i",{class:"fas fa-list-ol"})," ",Object(a.h)(l.c,{id:"home.totals"},"Totaler")))))))),"wall"===n&&Object(a.h)(t,null,Object(a.h)(S.a,{stores:this.props.stores})),"workout"===n&&Object(a.h)(t,null,Object(a.h)(k.a,{stores:this.props.stores})),"totals"===n&&Object(a.h)(t,null,Object(a.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 border-bottom"},Object(a.h)(w.a,{stores:this.props.stores,callback:this.loadTeamInfo,key:"teams-"+J}),Object(a.h)(O.a,{stores:this.props.stores,key:"totals-"+nt.distancekm,currentSeason:nt,prevSeason:rt}),Object(a.h)(j.a,{stores:this.props.stores,key:"status-"+nt.distancekm,currentSeason:nt,prevSeason:rt})))):Object(a.h)(t,null,Object(a.h)("div",{class:"row"},Object(a.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 border-bottom"},Object(a.h)(w.a,{stores:this.props.stores,callback:this.loadTeamInfo,key:"teams-"+J})),Object(a.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3"},!o&&ot&&0===ot.length&&Object(a.h)("div",{class:"mb-5 py-3 border-top border-bottom"},Object(a.h)("div",{class:"text-center"},Object(a.h)("div",{class:"display-4"},Object(a.h)("i",{class:"fas fa-paw"})),Object(a.h)("h5",null,Object(a.h)(l.c,{id:"home.welcome-title"},"Velkommen til The Musher.")),Object(a.h)("p",null,Object(a.h)(l.c,{id:"home.welcome-body-1"},"The Musher er en app som er kontinuerlig under utvikling. Alle ideer/innspill/kommentarer mottas med stor takk pÃ¥ Facebooksiden vÃ¥r ð")),Object(a.h)("p",null,Object(a.h)(l.c,{id:"home.welcome-body-2"},"Fokus til appen er enkel registrering av hunder, team, treninger og hendelser rundt hundene. NÃ¥r man har mange hunder sÃ¥ er det ofte vanskelig Ã¥ holde styr pÃ¥ lÃ¸petid, vaksiner, treninger, skader, vetrinÃ¦rbesÃ¸k, chiplister, osv.")),Object(a.h)("p",null,Object(a.h)(l.c,{id:"home.welcome-body-3"},"Alle data lagres sentralt i skyen hos AWS (Amazon Web Services) og det vil derfor vÃ¦re mulig Ã¥ bruke appen fra flere telefoner og datamaskiner samtidig. Dette kan vÃ¦re fint dersom det er flere som trener og fÃ¸lger opp hundene."))),Object(a.h)("h5",null,Object(a.h)(l.c,{id:"home.howto-title"},"Slik kommer du i gang:")),Object(a.h)("ol",null,Z<1&&Object(a.h)("li",null,Object(a.h)("a",{class:"btn btn-info mt-3",href:"/teams/"},Object(a.h)(l.c,{id:"home.howto-step-1"},"Legg inn teamene dine."))),G<1&&Object(a.h)("li",null,Object(a.h)("a",{class:"btn btn-info mt-3",href:"/dogs/"},Object(a.h)(l.c,{id:"home.howto-step-2"},"Legg inn hundene dine."))),H<1&&Object(a.h)("li",null,Object(a.h)("a",{class:"btn btn-info mt-3",href:"/tracks/"},Object(a.h)(l.c,{id:"home.howto-step-3"},"Legg inn rundene dine."))),Object(a.h)("li",null,Object(a.h)("a",{class:"btn btn-info mt-3",href:"/workouts/"},Object(a.h)(l.c,{id:"home.howto-step-4"},"Begynn Ã¥ registrere treningene."))))),Object(a.h)(m.a,{stores:this.props.stores,isLoading:o,key:"graph-"+F.id+"-"+W.length}),["beta","advanced"].indexOf(V)>-1&&Object(a.h)(t,null,Object(a.h)(u.a,{stores:this.props.stores,isLoading:o,key:"workout-table-"+F.id+"-"+W.length,showHeader:!1})))),Object(a.h)(P.a,{stores:this.props.stores,url:this.props.url}),Object(a.h)("div",{class:"row"},Object(a.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 my-3"},Object(a.h)("div",{class:"row"},Object(a.h)("div",{class:"col px-1 pt-2"},Object(a.h)("button",{class:"btn btn-block "+("races"===r?"btn-danger":"btn-outline-danger")+" text-nowrap",style:"text-overflow: ellipsis; overflow: hidden;","data-menu":"races",onClick:this.chooseSubmenu},Object(a.h)("i",{class:"fas fa-dog"})," ",Object(a.h)(l.c,{id:"home.races"},"LÃ¸p"))),Object(a.h)("div",{class:"col px-1 pt-2"},Object(a.h)("button",{class:"btn btn-block "+("lastWorkouts"===r?"btn-primary":"btn-outline-primary")+" text-nowrap",style:"text-overflow: ellipsis; overflow: hidden;","data-menu":"lastWorkouts",onClick:this.chooseSubmenu},Object(a.h)("i",{class:"fas fa-running"})," ",Object(a.h)(l.c,{id:"home.workouts"},"Treninger"))),Object(a.h)("div",{class:"col px-1 pt-2"},Object(a.h)("button",{class:"btn btn-block "+("totals"===r?"btn-primary":"btn-outline-primary")+" text-nowrap",style:"text-overflow: ellipsis; overflow: hidden;","data-menu":"totals",onClick:this.chooseSubmenu},Object(a.h)("i",{class:"fas fa-equals"})," ",Object(a.h)(l.c,{id:"home.totals"},"Totaler"))),Object(a.h)("div",{class:"col px-1 pt-2"},Object(a.h)("button",{class:"btn btn-block "+("workoutplanStatus"===r?"btn-primary":"btn-outline-primary")+" text-nowrap",style:"text-overflow: ellipsis; overflow: hidden;","data-menu":"workoutplanStatus",onClick:this.chooseSubmenu},Object(a.h)("i",{class:"fas fa-chart-line"})," ",Object(a.h)(l.c,{id:"home.status"},"Status"))))),"races"===r&&Object(a.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3"},Object(a.h)(f.a,{stores:this.props.stores})),"lastWorkouts"===r&&Object(a.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3"},Object(a.h)(p.a,null),Object(a.h)(b.a,{stores:this.props.stores})),"totals"===r&&Object(a.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3"},Object(a.h)(O.a,{stores:this.props.stores,key:"totals-"+nt.distancekm,currentSeason:nt,prevSeason:rt})),"workoutplanStatus"===r&&Object(a.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3"},Object(a.h)(j.a,{stores:this.props.stores,key:"status-"+nt.distancekm,currentSeason:nt,prevSeason:rt}))),Object(a.h)(g.a,{stores:this.props.stores}),Object(a.h)("div",{class:"row"},Object(a.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 my-3"},Object(a.h)("button",{type:"button",class:"btn btn-success btn-block","data-mode":"beta",onClick:this.toggleViewmode},Object(a.h)("i",{class:"fas fa-flask"})," ",Object(a.h)(l.c,{id:"header.viewmode-try-beta"},"PrÃ¸v den nye versjonen av forsiden")))),"lastWorkouts"===r&&Object(a.h)("div",{class:"row"},K&&K.strava&&at&&at.length>0&&Object(a.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 border-top border-bottom pt-3 pb-3 my-2 overflow-auto",style:"max-height: 30vh;"},Object(a.h)("h5",null,Object(a.h)(l.c,{id:"workout.index.strava-workouts"},"Strava workouts / not imported")),at&&at.map((function(t){return Object(a.h)(v.a,{stores:e.props.stores,activity:t,key:"strava-"+J+"-"+t.id})}))),K&&K.garmin&&it&&it.length>0&&Object(a.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 border-top border-bottom pt-3 pb-3 my-2 overflow-auto",style:"max-height: 30vh;"},Object(a.h)("h5",null,Object(a.h)(l.c,{id:"workout.index.garmin-workouts"},"Garmin workouts / not imported")),it&&it.map((function(t){return Object(a.h)(y.a,{stores:e.props.stores,activity:t,key:"garmin-"+J+"-"+t.id})}))),N&&N.length>0&&Object(a.h)("div",{class:"col-12 mb-4"},Object(a.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 px-0 mt-4"},Object(a.h)("h5",null,Object(a.h)(l.c,{id:"home.last-workouts",fields:{total:N.length}},"Siste treningsturer - ",N.length," stk"),st&&st.name&&Object(a.h)("div",null,Object(a.h)("small",{class:"font-weight-lighter"},"(",Object(a.h)(l.c,{id:"workout.index.filtered-by"},"Filtered by"),": ",st.name,")")))),N&&N.map((function(t){return Object(a.h)(h.a,{stores:e.props.stores,workout:t})}))))))},s}(a.Component))||n;e.default=E}.call(this,s("hosL").Fragment)},"4QWe":function(t,e,s){"use strict";(function(t){var o,r=s("hosL"),n=s("Utv1"),a=s("/eY4"),i=s("OhSV"),c=s("go65"),l=s("om2D"),d=s("ZOvn"),h=Object(a.a)(o=function(e){function s(t){var s;return(s=e.call(this,t)||this).commentStory=function(){return new Promise((function(t,e){var o,r,n,a,i,c,l,h,m;return n=void 0===(r=(o=s.props).callback)?function(){}:r,i=void 0===(a=o.inputRefObject)?{}:a,c=s.props.story,h=(l=s.state).showAddImage,Promise.resolve(s.props.stores.storyStore.commentStory({id:c.id,comment:l.comment})).then((function(o){try{return(m=o)&&200===m.status&&(s.setState({comment:{body:"",images:[]}},(function(){d.a.resizeTextarea(i[c.id]),h&&s.addImage()})),n({story:c,response:m})),t()}catch(t){return e(t)}}),e)}))},s.addImages=function(t){var e,o=s.state.comment;(e=o.images).push.apply(e,t.value),s.setState({comment:o})},s.addImage=function(){var t=s.state.showAddImage;s.setState({showAddImage:!(void 0!==t&&t)})},s.handleImageErrored=function(t){var e=t.target;e.onerror=null,setTimeout((function(){e.src+="?"+new Date}),1e3)},s.state={comment:{body:"",images:[]},showAddImage:!1},s.inputRef={},s}var o,a;return a=e,(o=s).prototype=Object.create(a.prototype),o.prototype.constructor=o,o.__proto__=a,s.prototype.render=function(){var e=this,s=this.props,o=s.inputRef,a=s.story,h=this.state,m=h.comment,u=h.showAddImage,b=this.props.stores.userStore.user,p=void 0===b?{}:b,f=p.firstname?""+n.a.ucfirst(p.firstname,!0)+n.a.ucfirst(p.lastname,!0):""+n.a.ucfirst(p.email||"",!0),g=p.image||(p.images?p.images[0]:void 0);return Object(r.h)("div",null,Object(r.h)("div",{class:"d-flex mb-0 position-relative w-100"},Object(r.h)("div",{class:"text-center border rounded-circle imageRounded imageRoundedSmall",style:(g?"background-image: url('"+g.s3SmallLink+"'); background-size: cover;":"")+" border-width: 3px !important;"},!p.image&&Object(r.h)("span",{class:"font-weight-lighter",style:"font-size: 15px;"},f)),Object(r.h)("div",{class:"col pl-3",style:"line-height: 1.2em;"},Object(r.h)("div",{class:"d-flex bd-highlight"},Object(r.h)("div",{class:"p-0 w-100 bd-highlight"},Object(r.h)("label",{class:"sr-only",for:"inlineFormInput"},Object(r.h)(i.c,{id:"comments.comment"},"Kommentar")),Object(r.h)("div",{class:"border rounded rounded-lg position-relative"},Object(r.h)(i.b,null,Object(r.h)("textarea",{class:"form-control-plaintext px-2",type:"text",placeholder:Object(r.h)(i.c,{id:"comments.write-comment"},"Skriv en kommentar..."),onInput:Object(c.a)(this,"comment.body"),onKeyUp:d.a.resizeTextarea,style:"height: 2.3em;",value:m.body,ref:o})),Object(r.h)("div",{class:"position-absolute",style:"top: 8px; right: 10px; font-size: 1.2em;"},Object(r.h)("i",{class:"fas fa-image pointerCursor","data-id":a.id,onClick:this.addImage})))),Object(r.h)("div",{class:"p-0 pl-2 flex-shrink-1 bd-highlight"},Object(r.h)("button",{type:"button",class:"btn btn-primary mb-2",onClick:this.commentStory},Object(r.h)("i",{class:"fas fa-paper-plane"})))))),u&&Object(r.h)(t,null,Object(r.h)("div",{class:"col-12 text-center"},Object(r.h)("div",{class:"container-fluid"},Object(r.h)("div",{class:"row"},m.images&&m.images.map((function(t){return Object(r.h)("div",{class:"col-3 p-1"},Object(r.h)("img",{src:t.s3SmallLink,class:"img-fluid",onError:e.handleImageErrored}),Object(r.h)("button",{class:"btn btn-sm btn-link",onClick:e.removeImage,"data-name":t.name},Object(r.h)("i",{class:"fas fa-trash"})," Del"))})))),Object(r.h)(l.a,{object:m,updateField:this.addImages}))))},s}(r.Component))||o;e.a=h}).call(this,s("hosL").Fragment)},"5uob":function(t,e,s){"use strict";var o,r=s("hosL"),n=s("Utv1"),a=s("/eY4"),i=s("OhSV"),c=s("go65"),l=(s("ETxl"),s("ZOvn")),d=Object(a.a)(o=function(t){function e(){for(var e,s=arguments.length,o=new Array(s),r=0;r<s;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))||this).commentStory=function(){return new Promise((function(t,s){var o,r,n,a,i,c,d,h,m;return n=void 0===(r=(o=e.props).callback)?function(){}:r,a=o.commentId,c=void 0===(i=o.inputRefObject)?{}:i,d=e.props.story,h=e.state.comment,Promise.resolve(e.props.stores.storyStore.commentReplyStory({id:d.id,commentId:a,comment:void 0===h?"":h})).then((function(o){try{return(m=o)&&200===m.status&&(e.setState({comment:""},(function(){l.a.resizeTextarea(c[a])})),n({story:d,response:m,commentId:a})),t()}catch(t){return s(t)}}),s)}))},e}var s,o;return o=t,(s=e).prototype=Object.create(o.prototype),s.prototype.constructor=s,s.__proto__=o,e.prototype.render=function(){var t=this.props.inputRef,e=this.state.comment,s=this.props.stores.userStore.user,o=void 0===s?{}:s,a=o.firstname?""+n.a.ucfirst(o.firstname,!0)+n.a.ucfirst(o.lastname,!0):""+n.a.ucfirst(o.email||"",!0),d=o.image||(o.images?o.images[0]:void 0);return Object(r.h)("div",{class:"w-100"},Object(r.h)("div",{class:"d-flex mb-0 position-relative w-100"},Object(r.h)("div",{class:"text-center border rounded-circle imageRounded imageRoundedThumb",style:(d?"background-image: url('"+d.s3SmallLink+"'); background-size: cover;":"")+" border-width: 3px !important;"},!d&&Object(r.h)("span",{class:"font-weight-lighter",style:"font-size: 15px;"},a)),Object(r.h)("div",{class:"col pl-3",style:"line-height: 1.2em;"},Object(r.h)("div",{class:"d-flex bd-highlight"},Object(r.h)("div",{class:"p-0 w-100 bd-highlight"},Object(r.h)("label",{class:"sr-only",for:"inlineFormInput"},Object(r.h)(i.c,{id:"comments.comment"},"Kommentar")),Object(r.h)(i.b,null,Object(r.h)("textarea",{class:"form-control form-control-sm rounded rounded-lg",type:"text",placeholder:Object(r.h)(i.c,{id:"comments.write-comment"},"Skriv en kommentar..."),onInput:Object(c.a)(this,"comment"),onKeyUp:l.a.resizeTextarea,style:"height: 2.3em;",value:e,ref:t}))),Object(r.h)("div",{class:"p-0 pl-2 flex-shrink-1 bd-highlight"},Object(r.h)("button",{type:"button",class:"btn btn-sm btn-primary mb-2",onClick:this.commentStory},Object(r.h)(i.c,{id:"comments.add-comment"},"Send")))))))},e}(r.Component))||o;e.a=d},"9Bb9":function(t,e,s){"use strict";var o,r=s("hosL"),n=s("Utv1"),a=s("/eY4"),i=s("OhSV"),c=s("ETxl"),l=s.n(c),d=s("ZOvn"),h=Object(a.a)(o=function(t){function e(){return t.apply(this,arguments)||this}var s,o;return o=t,(s=e).prototype=Object.create(o.prototype),s.prototype.constructor=s,s.__proto__=o,e.prototype.render=function(){var t,e=this.props.stores,s=e.userStore,o=e.workoutPlanStore,a=e.teamStore,c=s.user.language,h=d.a.getMonths(void 0===c?"no":c),m=a.team,u=this.props.year,b=(new Date).getMonth()+1,p=u||n.a.getYear(),f=parseInt(b<6?p-1:p,10),g=n.a.monthRange(f+"-06-01",f+1+"-05-31");return Object(r.h)("div",{class:"container-fluid mb-2"},Object(r.h)("div",{class:"row mt-2"},Object(r.h)("div",{class:"col-12"},Object(r.h)("h5",null,Object(r.h)(i.c,{id:"workout.totals.title"},"Treningsplanstatus")))),Object(r.h)("div",{class:"row mt-2 border-bottom pb-2"},g&&g.map((function(e){if(e.year>p||e.year===p&&e.month>=b)return"";var a=o.sumWorkoutPlanMonth(e.year,e.month+1);if(!a)return"";t=a;var i=s.findWorkoutSummaryMonth(e.year,e.month+1)/a*100,c=i>100?100:n.a.format(i,0);return Object(r.h)("div",{class:"col-3 text-center"},Object(r.h)("div",{class:"px-auto w-100 clearfix"},Object(r.h)("div",{class:"progress "+l.a["progress-bar-vertical"],style:" margin-left: calc(50% - 20px);"},Object(r.h)("div",{class:"progress-bar progress-bar-striped bg-success",role:"progressbar",style:"height: "+c+"%; width: 40px;","aria-valuenow":c,"aria-valuemin":"0","aria-valuemax":"100"},n.a.format(i,0),"%"))),Object(r.h)("div",{class:"w-100 mt-1"},h[e.month]," ",e.year))})),!t&&Object(r.h)("div",{class:"col-12 text-center"},Object(r.h)("h3",null,Object(r.h)(i.c,{id:"workout.plan.no-workout-plan-found",fields:{name:m.name}},"Ingen treningsplaner funnet for team ",m.name,".")))))},e}(r.Component))||o;e.a=h},AEg1:function(t,e,s){"use strict";(function(t){function o(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,o)}return s}function r(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}var n,a=s("hosL"),i=s("Utv1"),c=s("/eY4"),l=s("OhSV"),d=s("go65"),h=s("om2D"),m=s("ZOvn"),u={story:{title:"",body:"",images:[],public:1},showAddImage:!1,showTeamChange:!1,showChangeVisibility:!1},b=Object(c.a)(n=function(e){function s(t){var s;return(s=e.call(this,t)||this).addStory=function(){return new Promise((function(t,e){var o,r,n,a,i,c,l,d;return r=void 0===(o=s.props.callback)?function(){}:o,c=(n=s.state).showAddImage,l=s.props.stores.storyStore,(i=void 0===(a=n.story)?{}:a).body?Promise.resolve(l.insert({title:i.title,body:i.body,images:i.images,public:i.public?1:0,team:i.team})).then(function(o){try{if((d=o)&&201===d.status)return Promise.resolve(l.loadPublicFeed()).then(function(){try{return r(d.data),s.setState({story:{title:"",body:"",images:[]}},(function(){m.a.resizeTextarea(s.inputRef.newStoryBody),c&&s.addImage()})),n.call(this)}catch(t){return e(t)}}.bind(this),e);function n(){return t()}return n.call(this)}catch(t){return e(t)}}.bind(this),e):t(!1)}))},s.addImages=function(t){var e,o=s.state.story;(e=o.images).push.apply(e,t.value),s.setState({story:o})},s.addImage=function(){s.setState({showAddImage:!s.state.showAddImage})},s.changeVisibility=function(){s.setState({showChangeVisibility:!s.state.showChangeVisibility})},s.toggleTeamChange=function(){s.setState({showTeamChange:!s.state.showTeamChange})},s.handleImageErrored=function(t){var e=t.target;e.onerror=null,setTimeout((function(){e.src+="?"+new Date}),1e3)},s.state=function(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?o(Object(s),!0).forEach((function(e){r(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):o(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}({},u),s.inputRef={},s}var n,c;return c=e,(n=s).prototype=Object.create(c.prototype),n.prototype.constructor=n,n.__proto__=c,s.prototype.render=function(){var e=this,s=this.props,o=s.col,r=void 0===o?12:o,n=s.offset,c=void 0===n?0:n,u=this.state,b=u.story,p=void 0===b?{}:b,f=u.showAddImage,g=u.showTeamChange,O=u.showChangeVisibility,j=this.props.stores,v=j.userStore,y=j.appState,w=v.user,k=void 0===w?{}:w,x=k.firstname?""+i.a.ucfirst(k.firstname,!0)+i.a.ucfirst(k.lastname,!0):""+i.a.ucfirst(k.email||"",!0),S=k.image||(k.images?k.images[0]:void 0),P=y.darkmode;return Object(a.h)("div",{class:"w-100"},Object(a.h)("div",{class:"row bg-light"},Object(a.h)("div",{class:"col-"+r+" offset-"+c+" col-sm-8 col-lg-6 offset-sm-2 offset-lg-3 rounded rounded-lg pt-3 pb-1 bg-"+(P?"black":"white")+" shadow-sm mb-3"},Object(a.h)("div",{class:"d-flex mb-0 position-relative w-100"},Object(a.h)("div",{class:"position-relative"},Object(a.h)("div",{class:"text-center border rounded-circle imageRounded imageRoundedSmall pointerCursor",style:(S?"background-image: url('"+S.s3SmallLink+"'); background-size: cover;":"")+" border-width: 3px !important;",onClick:this.toggleTeamChange},!S&&Object(a.h)("span",{class:"font-weight-lighter",style:"font-size: 15px;"},x)),Object(a.h)("div",{class:"position-absolute",style:"top: 20px; right: 0px;"},Object(a.h)("small",{class:"text-muted font-weight-lighter"},Object(a.h)("i",{class:"fas fa-edit pointerCursor",onClick:this.toggleTeamChange})))),Object(a.h)("div",{class:"col pl-3",style:"line-height: 1.2em;"},Object(a.h)("div",{class:"d-flex bd-highlight"},Object(a.h)("div",{class:"p-0 w-100 bd-highlight"},Object(a.h)("label",{class:"sr-only",for:"inlineFormInput"},Object(a.h)(l.c,{id:"story.body"},"Story")),Object(a.h)("div",{class:"border rounded rounded-lg position-relative"},Object(a.h)(l.b,null,Object(a.h)("textarea",{class:"form-control-plaintext px-2",type:"text",placeholder:Object(a.h)(l.c,{id:"story.write-body"},"Hva tenker du pÃ¥?.."),onInput:Object(d.a)(this,"story.body"),onKeyUp:m.a.resizeTextarea,style:"height: 2.3em;",value:p.body,ref:function(t){return e.inputRef.newStoryBody=t}})),Object(a.h)("div",{class:"position-absolute",style:"top: 8px; right: 10px; font-size: 1.2em;"},Object(a.h)("i",{class:"fas fa-image pointerCursor","data-id":p.id,onClick:this.addImage}),Object(a.h)("i",{class:"fas fa-"+(1===p.public?"globe-europe":"users")+" pointerCursor ml-2","data-id":p.id,onClick:this.changeVisibility})))),Object(a.h)("div",{class:"p-0 pl-2 flex-shrink-1 bd-highlight"},Object(a.h)("button",{type:"button",class:"btn btn-primary mb-2",onClick:this.addStory},Object(a.h)("i",{class:"fas fa-paper-plane"})))))),Object(a.h)("div",null,Object(a.h)("div",{class:"row"},g&&Object(a.h)(t,null,Object(a.h)("div",{class:"col-12 text-center"},Object(a.h)("div",{class:"form-group"},Object(a.h)("small",null,Object(a.h)("select",{class:"custom-select custom-select-sm",id:"team",onInput:Object(d.a)(this,"story.team"),onChange:this.toggleTeamChange},k.teams&&k.teams.map((function(t){var e=v.findTeam(t,!0);return e&&e.public?Object(a.h)("option",{value:e.id},e.name):""})),!k.teams&&Object(a.h)(t,null,Object(a.h)("option",{value:""},"No public teams"))))))),O&&Object(a.h)(t,null,Object(a.h)("div",{class:"col-12 text-center"},Object(a.h)("div",{class:"form-group"},Object(a.h)("small",null,Object(a.h)("select",{class:"custom-select custom-select-sm",id:"team",onInput:Object(d.a)(this,"story.public"),value:p.public,onChange:this.changeVisibility},Object(a.h)("option",{value:0,selected:0===p.public?"selected":""},"ð¥ ",Object(a.h)(l.c,{id:"story.visibility-followers"},"Kun synlig for de som fÃ¸lger deg.")),Object(a.h)("option",{value:1,selected:1===p.public?"selected":""},"ð ",Object(a.h)(l.c,{id:"story.visibility-public"},"Synlig for alle som bruker appen."))))))),f&&Object(a.h)(t,null,Object(a.h)("div",{class:"col-12 text-center"},Object(a.h)("div",{class:"container-fluid"},Object(a.h)("div",{class:"row"},p.images&&p.images.map((function(t){return Object(a.h)("div",{class:"col-3 p-1"},Object(a.h)("img",{src:t.s3SmallLink,class:"img-fluid",onError:e.handleImageErrored}),Object(a.h)("button",{class:"btn btn-sm btn-link",onClick:e.removeImage,"data-name":t.name},Object(a.h)("i",{class:"fas fa-trash"})," Del"))})))),Object(a.h)(h.a,{object:p,updateField:this.addImages}))))))))},s}(a.Component))||n;e.a=b}).call(this,s("hosL").Fragment)},B95u:function(t,e,s){"use strict";(function(t){function o(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,o)}return s}function r(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}var n,a=s("hosL"),i=s("Utv1"),c=s("/eY4"),l=s("cneo"),d=s("OhSV"),h=s("fh8t"),m=s.n(h),u=s("go65"),b=s("5uob"),p=(s("ETxl"),s("ZOvn")),f={showAddComment:{},showAllComments:!1,showAllReplies:{},viewImageIdx:{}},g=Object(c.a)(n=function(e){function s(t){var s;return(s=e.call(this,t)||this).likeComment=function(t){return new Promise((function(e,o){var r,n,a,i,c;return n=void 0===(r=s.props.callback)?function(){}:r,a=t.target.parentElement.dataset.id||t.target.dataset.id,i=s.props.story,Promise.resolve(s.props.stores.storyStore.likeStoryComment({id:i.id,commentId:a})).then((function(t){try{return(c=t)&&200===c.status&&n({type:"likeComment",story:i,commentId:a,response:c}),e(!0)}catch(t){return o(t)}}),o)}))},s.likeReply=function(t){return new Promise((function(e,o){var r,n,a,i,c,l;return n=void 0===(r=s.props.callback)?function(){}:r,a=t.target.parentElement.dataset.id||t.target.dataset.id,i=t.target.parentElement.dataset.comment||t.target.dataset.comment,c=s.props.story,Promise.resolve(s.props.stores.storyStore.likeStoryCommentReply({id:c.id,replyId:a,commentId:i})).then((function(t){try{return(l=t)&&200===l.status&&n({type:"likeReply",story:c,commentId:i,replyId:a,response:l}),e()}catch(t){return o(t)}}),o)}))},s.replyComment=function(t){return new Promise((function(e){var o=t.target.parentElement.dataset.id||t.target.dataset.id,r=s.state.showAddComment;return r[o]=!r[o],s.setState({showAddComment:r},(function(){s.inputRef[o]&&s.inputRef[o].focus()})),e()}))},s.toggleComments=function(){s.setState({showAllComments:!s.state.showAllComments})},s.toggleReplies=function(t){var e=t.target.parentElement.dataset.id||t.target.dataset.id,o=s.state.showAllReplies;o[e]=!o[e],s.setState({showAllReplies:o})},s.toggleMenu=function(t){var e=t.target.closest("i").dataset.id,o=s.state.showMenu,r=void 0===o?{}:o;r[e]=!r[e],s.setState({showDeleteComment:{},showEdit:{},showMenu:r})},s.toggleEdit=function(t){var e=t.target.closest("button").dataset,o=e.id,r=e.comment,n=s.state.showEdit,a=void 0===n?{}:n;a[o]=!a[o],s.setState({showDeleteComment:{},showEdit:a,showMenu:{},commentEditText:r})},s.toggleDeleteComment=function(t){var e=t.target.closest("button").dataset.id,o=s.state.showDeleteComment,r=void 0===o?{}:o;r[e]=!r[e],s.setState({showDeleteComment:r,showEdit:{},showMenu:{}})},s.deleteComment=function(t){return new Promise((function(e,o){var r;return r=t.target.closest("button").dataset.id,Promise.resolve(s.props.stores.storyStore.deleteCommentStory({id:s.props.story.id,commentId:r})).then((function(){try{return s.setState({commentEditText:"",showDeleteComment:{},showEdit:{},showMenu:{}}),e()}catch(t){return o(t)}}),o)}))},s.deleteCommentReply=function(t){return new Promise((function(e,o){var r;return r=t.target.closest("button").dataset,Promise.resolve(s.props.stores.storyStore.deleteCommentReplyStory({id:s.props.story.id,commentId:r.commentid,replyId:r.id})).then((function(){try{return s.setState({commentEditText:"",showDeleteComment:{},showEdit:{},showMenu:{}}),e()}catch(t){return o(t)}}),o)}))},s.saveComment=function(t){return new Promise((function(e,o){var r;return r=t.target.closest("button").dataset.id,Promise.resolve(s.props.stores.storyStore.editCommentStory({id:s.props.story.id,commentId:r,comment:s.state.commentEditText})).then((function(){try{return s.setState({commentEditText:"",showDeleteComment:{},showEdit:{},showMenu:{}}),e()}catch(t){return o(t)}}),o)}))},s.saveCommentReply=function(t){return new Promise((function(e,o){var r;return r=t.target.closest("button").dataset,Promise.resolve(s.props.stores.storyStore.editCommentReplyStory({id:s.props.story.id,commentId:r.commentid,replyId:r.id,comment:s.state.commentEditText})).then((function(){try{return s.setState({commentEditText:"",showDeleteComment:{},showEdit:{},showMenu:{}}),e()}catch(t){return o(t)}}),o)}))},s.viewImage=function(t){var e=t.target.closest("img").dataset,o=s.state.viewImageIdx;o[e.id]=e.idx,s.setState({viewImageIdx:o})},s.state=function(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?o(Object(s),!0).forEach((function(e){r(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):o(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}({},f),s.inputRef={},s}var n,c;return c=e,(n=s).prototype=Object.create(c.prototype),n.prototype.constructor=n,n.__proto__=c,s.prototype.render=function(){var e,s=this,o=this.state,r=o.showAddComment,n=o.showAllComments,c=o.showAllReplies,h=o.viewImageIdx,f=o.showMenu,g=void 0===f?{}:f,O=o.showEdit,j=void 0===O?{}:O,v=o.showDeleteComment,y=void 0===v?{}:v,w=o.commentEditText,k=this.props,x=k.story,S=k.callback,P=void 0===S?function(){}:S,C=k.compact,D=this.props.stores.userStore,I=D.user,T=D.language,L=void 0===T?"no":T,E=D.isAdmin,_=[],R=0,A=0;return x.comments&&(R=x.comments.length,n?_=x.comments:(e=void 0!==C&&C?0:2,_=x.comments.slice(Math.max(R-e,0))),A=_.length),Object(a.h)("div",null,x&&_&&_.reverse().map((function(o){var n=o.user,f=void 0===n?{}:n,O=p.a.displayNameShort(f),v=p.a.displayName(f),k=f.image||(f.images?f.images[0]:void 0),S=o.likes&&o.likes.findIndex((function(t){return t.user===I.id}))>-1,C=[],D=0,T=0;o.comments&&(D=o.comments.length,T=(C=c[o.id]?o.comments:o.comments.slice(0,e)).length);var _=[];if(o.images){var R=Object(l.i)(o.images);_.push.apply(_,R)}var A=h[o.id]?h[o.id]:0,M=_&&_[A]?_[A]:null,F=o.currentLocationGeocode,W=void 0===F?{}:F;return Object(a.h)("div",{class:"row"},Object(a.h)("div",{class:"col-11 offset-1 d-flex mb-2 position-relative"},Object(a.h)("div",{class:"text-center border rounded-circle imageRounded imageRoundedSmall",style:(k?'background-image: url("'+k.s3SmallLink+'"); background-size: cover;':"")+" border-width: 3px !important;"},!f.image&&Object(a.h)("span",{class:"font-weight-lighter",style:"font-size: 15px;"},O)),Object(a.h)("div",{class:"flex-grow-1 pl-3 pt-0",style:"line-height: 1.2em;"},Object(a.h)("div",{class:"bg-light p-2 rounded rounded-lg position-relative"},I.id===f.id&&Object(a.h)(t,null,Object(a.h)("span",{class:"float-right font-weight-lighter text-muted"},Object(a.h)("i",{class:"fas fa-ellipsis-h",onClick:s.toggleMenu,"data-id":o.id}))),g[o.id]&&Object(a.h)(t,null,Object(a.h)("div",{class:"position-absolute bg-white p-2 border rounded rounded-lg shadow-sm",style:"top: 30px; right: 10px; width: 60%; z-index: 999999;"},Object(a.h)("button",{class:"btn btn-link btn-block text-left",onClick:s.toggleEdit,"data-id":o.id,"data-comment":o.comment},Object(a.h)("i",{class:"fas fa-edit"})," Edit"),Object(a.h)("hr",null),Object(a.h)("button",{class:"btn btn-link btn-block text-left",onClick:s.toggleDeleteComment,"data-id":o.id},Object(a.h)("i",{class:"fas fa-trash-alt"})," Delete"))),Object(a.h)("div",null,Object(a.h)("span",{style:"font-size: 0.95em;"},Object(a.h)("h5",{class:"font-weight-bold mb-0",style:"font-size: 1.0em;"},v),j[o.id]?Object(a.h)(t,null,Object(a.h)("div",{class:"d-flex bd-highlight"},Object(a.h)("div",{class:"p-0 w-100 bd-highlight"},Object(a.h)("label",{class:"sr-only",for:"inlineFormInput"},Object(a.h)(d.c,{id:"comments.comment"},"Kommentar")),Object(a.h)("div",{class:"border rounded rounded-lg position-relative"},Object(a.h)(d.b,null,Object(a.h)("textarea",{class:"form-control-plaintext px-2",type:"text",placeholder:Object(a.h)(d.c,{id:"comments.write-comment"},"Skriv en kommentar..."),onInput:Object(u.a)(s,"commentEditText"),onKeyUp:p.a.resizeTextarea,onFocus:p.a.resizeTextarea,style:"height: 2.3em;",value:w})))),Object(a.h)("div",{class:"p-0 pl-2 flex-shrink-1 bd-highlight"},Object(a.h)("button",{type:"button",class:"btn btn-primary mb-2",onClick:s.saveComment,"data-id":o.id},Object(a.h)("i",{class:"fas fa-paper-plane"}))))):Object(a.h)(t,null,Object(a.h)(m.a,{markdown:p.a.replaceImages(o.comment,o.images,L),markdownOpts:p.a.getMarkdownOptions()})),y[o.id]&&Object(a.h)("div",{class:"clearfix mt-3 mb-3"},Object(a.h)("button",{class:"btn btn-danger float-left",onClick:s.deleteComment,"data-id":o.id},Object(a.h)("i",{class:"fas fa-trash-alt"})," Delete"),Object(a.h)("button",{class:"btn btn-secondary float-right",onClick:s.toggleDeleteComment,"data-id":o.id},Object(a.h)("i",{class:"fas fa-times-circle"})," Cancel")))),Object(a.h)("div",null,Object(a.h)("div",{class:"container-fluid px-3 mt-1"},M&&Object(a.h)("div",{class:"clearfix row"},Object(a.h)("div",{class:"col-12 px-0 overflow-hidden",style:"max-height: 60vh;"},Object(a.h)("img",{class:"img-fluid",style:"min-width: 100px;",src:M.s3LargeLink}))),_&&_.length>1&&Object(a.h)("div",{class:"clearfix d-flex flex-wrap row"},_.map((function(e,r){return Object(a.h)(t,null,Object(a.h)("div",{class:"col px-0 overflow-hidden",style:"max-height: 100px; min-width: 100px;"},Object(a.h)("img",{class:"img-fluid border",style:"min-width: 100px;",src:e.s3SmallLink,onClick:s.viewImage,"data-id":o.id,"data-idx":r})))})))))),Object(a.h)("small",null,Object(a.h)("button",{class:"btn btn-sm btn-link py-0 "+(S?"text-primary":""),onClick:s.likeComment,"data-id":o.id},Object(a.h)(d.c,{id:"comments.like"},"Lik")),"-",Object(a.h)("button",{class:"btn btn-sm btn-link py-0",onClick:s.replyComment,"data-id":o.id},Object(a.h)(d.c,{id:"comments.comment-add"},"Kommentar")),"-",Object(a.h)("button",{class:"btn btn-sm btn-link py-0 disabled"},i.a.formatDistance(o.createdDate,new Date,{locale:"no-NB"}),o.updatedDate&&Object(a.h)(t,null,Object(a.h)("span",{class:"font-weight-light ml-2"},"(Edited ",i.a.formatDistance(o.updatedDate,new Date,{locale:"no-NB"}),")"))),E&&W&&W.formatted_address&&Object(a.h)(t,null,Object(a.h)("span",{class:"ml-2 text-muted"},Object(a.h)("i",{class:"fas fa-map-marker-alt"})," ",W.formatted_address)))),o.likes&&o.likes.length>0&&Object(a.h)("small",{class:"position-absolute bg-light shadow-sm rounded-lg py-0 px-1",style:"bottom: 20px; right: 15px;"},Object(a.h)("i",{class:"fas fa-thumbs-up text-primary"})," ",o.likes.length)),Object(a.h)("div",{class:"col-10 offset-2 mb-2"},o&&C&&C.map((function(e){var r=e.user,n=void 0===r?{}:r,c=p.a.displayNameShort(n),l=p.a.displayName(n),h=n.image||(n.images?n.images[0]:void 0),b=e.likes&&e.likes.findIndex((function(t){return t.user===I.id}))>-1,f=e.currentLocationGeocode,O=void 0===f?{}:f;return Object(a.h)("div",{class:"row"},Object(a.h)("div",{class:"col-12 d-flex mb-2 position-relative"},Object(a.h)("div",{class:"text-center border rounded-circle imageRounded imageRoundedThumb",style:(h?'background-image: url("'+h.s3SmallLink+'"); background-size: cover;':"")+" border-width: 3px !important;"},!n.image&&Object(a.h)("span",{class:"font-weight-lighter",style:"font-size: 15px;"},c)),Object(a.h)("div",{class:"flex-grow-1 pl-3 pt-0",style:"line-height: 1.2em;"},Object(a.h)("div",{class:"bg-light p-2 rounded-lg position-relative"},I.id===n.id&&Object(a.h)(t,null,Object(a.h)("span",{class:"float-right font-weight-lighter text-muted"},Object(a.h)("i",{class:"fas fa-ellipsis-h",onClick:s.toggleMenu,"data-id":e.id}))),g[e.id]&&Object(a.h)(t,null,Object(a.h)("div",{class:"position-absolute bg-white p-2 border rounded rounded-lg shadow-sm",style:"top: 30px; right: 10px; width: 60%; z-index: 999999;"},Object(a.h)("button",{class:"btn btn-link btn-block text-left",onClick:s.toggleEdit,"data-id":e.id,"data-comment":e.comment},Object(a.h)("i",{class:"fas fa-edit"})," Edit"),Object(a.h)("hr",null),Object(a.h)("button",{class:"btn btn-link btn-block text-left",onClick:s.toggleDeleteComment,"data-id":e.id},Object(a.h)("i",{class:"fas fa-trash-alt"})," Delete"))),Object(a.h)("span",{style:"font-size: 0.95em;"},Object(a.h)("h5",{class:"font-weight-bold mb-0",style:"font-size: 1.0em;"},l),j[e.id]?Object(a.h)(t,null,Object(a.h)("div",{class:"d-flex bd-highlight"},Object(a.h)("div",{class:"p-0 w-100 bd-highlight"},Object(a.h)("label",{class:"sr-only",for:"inlineFormInput"},Object(a.h)(d.c,{id:"comments.comment"},"Kommentar")),Object(a.h)("div",{class:"border rounded rounded-lg position-relative"},Object(a.h)(d.b,null,Object(a.h)("textarea",{class:"form-control-plaintext px-2",type:"text",placeholder:Object(a.h)(d.c,{id:"comments.write-comment"},"Skriv en kommentar..."),onInput:Object(u.a)(s,"commentEditText"),onKeyUp:p.a.resizeTextarea,onFocus:p.a.resizeTextarea,style:"height: 2.3em;",value:w})))),Object(a.h)("div",{class:"p-0 pl-2 flex-shrink-1 bd-highlight"},Object(a.h)("button",{type:"button",class:"btn btn-primary mb-2",onClick:s.saveCommentReply,"data-commentid":o.id,"data-id":e.id},Object(a.h)("i",{class:"fas fa-paper-plane"}))))):Object(a.h)(t,null,Object(a.h)(m.a,{markdown:p.a.replaceImages(e.comment,e.images,L),markdownOpts:p.a.getMarkdownOptions()})),y[e.id]&&Object(a.h)("div",{class:"clearfix mt-3 mb-3"},Object(a.h)("button",{class:"btn btn-danger float-left",onClick:s.deleteCommentReply,"data-id":e.id,"data-commentid":o.id},Object(a.h)("i",{class:"fas fa-trash-alt"})," Delete"),Object(a.h)("button",{class:"btn btn-secondary float-right",onClick:s.toggleDeleteComment,"data-id":e.id},Object(a.h)("i",{class:"fas fa-times-circle"})," Cancel")))),Object(a.h)("small",null,Object(a.h)("button",{class:"btn btn-sm btn-link py-0 "+(b?"text-primary":""),onClick:s.likeReply,"data-comment":o.id,"data-id":e.id},Object(a.h)(d.c,{id:"comments.like"},"Lik")),"-",Object(a.h)("button",{class:"btn btn-sm btn-link py-0",onClick:s.replyComment,"data-id":o.id},Object(a.h)(d.c,{id:"comments.comment-add"},"Kommentar")),"-",Object(a.h)("button",{class:"btn btn-sm btn-link py-0 disabled"},i.a.formatDistance(e.createdDate,new Date,{locale:"no-NB"}),e.updatedDate&&Object(a.h)(t,null,Object(a.h)("span",{class:"font-weight-light ml-2"},"(Edited ",i.a.formatDistance(e.updatedDate,new Date,{locale:"no-NB"}),")"))),E&&O&&O.formatted_address&&Object(a.h)(t,null,Object(a.h)("span",{class:"ml-2 text-muted"},Object(a.h)("i",{class:"fas fa-map-marker-alt"})," ",O.formatted_address)))),e.likes&&Object(a.h)("small",{class:"position-absolute bg-light shadow-sm rounded-lg py-0 px-1",style:"bottom: 20px; right: 15px;"},Object(a.h)("i",{class:"fas fa-thumbs-up text-primary"})," ",e.likes.length)))})),D-T>0&&Object(a.h)("div",null,Object(a.h)("button",{class:"btn btn-sm btn-link py-0",onClick:s.toggleReplies,"data-id":o.id},Object(a.h)(d.c,{id:"comments.show-more",fields:{more:D-T}},"Vis ",D-T," flere kommentarer...")))),r[o.id]&&Object(a.h)("div",{class:"col-11 offset-1 d-flex mb-2 position-relative"},Object(a.h)(b.a,{stores:s.props.stores,story:x,callback:P,commentId:o.id,inputRef:function(t){return s.inputRef[o.id]=t},inputRefObject:s.inputRef,key:"story-commentreply-"+o.id})))})),R-A>0&&Object(a.h)("div",null,Object(a.h)("button",{class:"btn btn-sm btn-link py-0",onClick:this.toggleComments},Object(a.h)(d.c,{id:"comments.show-more",fields:{more:R-A}},"Vis ",R-A," flere kommentarer..."))),n&&Object(a.h)("div",null,Object(a.h)("button",{class:"btn btn-sm btn-link py-0",onClick:this.toggleComments},Object(a.h)(d.c,{id:"comments.hide-all-comments"},"Skjul alle kommentarene."))))},s}(a.Component))||n;e.a=g}).call(this,s("hosL").Fragment)},L3gU:function(t,e,s){"use strict";(function(t){function o(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,o)}return s}function r(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?o(Object(s),!0).forEach((function(e){n(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):o(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}function n(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}var a,i=s("hosL"),c=s("Utv1"),l=s("/eY4"),d=s("cneo"),h=s("OhSV"),m=s("fh8t"),u=s.n(m),b=(s("1OK2"),s("sqi2")),p=s("/922"),f=s("eQ6k"),g=s("ZOvn"),O={showAddComment:{},viewImageIdx:{}},j=Object(l.a)(a=function(e){function s(t){var s;return(s=e.call(this,t)||this).toggleDate=function(t){t.stopPropagation(),t.preventDefault(),s.setState({showDate:!s.state.showDate})},s.likeWorkout=function(t){return new Promise((function(e,o){var r,n;return r=parseInt(t.target.closest("button").dataset.id,10),Promise.resolve(s.props.stores.workoutStore.likeWorkout({id:r})).then((function(t){try{return 200===(n=t).status&&s.addLikeToFeed(r,n.data),e()}catch(t){return o(t)}}),o)}))},s.addCommentToFeed=function(t){var e=t.workout,o=t.response,r=t.commentId,n=t.replyId,a=s.props.stores.teamStore;switch(t.type){case"likeComment":a.addLikeToComment({id:e.id,data:o.data,commentId:r});break;case"likeReply":a.addLikeToCommentReply({id:e.id,data:o.data,commentId:r,replyId:n});break;default:r?a.addCommentToWorkoutComment({id:e.id,data:o.data,commentId:r}):a.addCommentToWorkout({id:e.id,data:o.data})}},s.addLikeToFeed=function(t,e){s.props.stores.teamStore.addLikeToWorkout({id:t,data:e})},s.toggleAddComment=function(t){var e=t.target.closest("button").dataset.id,o=s.state.showAddComment;o[e]?delete o[e]:o[e]=!0,s.setState({showAddComment:o},(function(){s.inputRef[e]&&s.inputRef[e].focus()}))},s.viewImage=function(t){var e=t.target.closest("img").dataset,o=s.state.viewImageIdx;o[e.id]=e.idx,s.setState({viewImageIdx:o})},s.state=r({},O),s.inputRef={},s}var o,n;n=e,(o=s).prototype=Object.create(n.prototype),o.prototype.constructor=o,o.__proto__=n;var a=s.prototype;return a.loadTeamsPublicFeed=function(t){return new Promise(function(e,s){return void 0===t&&(t=this.props),Promise.resolve(t.stores.teamStore.loadPublicFeed()).then((function(){try{return e()}catch(t){return s(t)}}),s)}.bind(this))},a.loadAll=function(){return new Promise(function(t,e){return Promise.resolve(this.loadTeamsPublicFeed()).then((function(){try{return t()}catch(t){return e(t)}}),e)}.bind(this))},a.componentDidMount=function(){this.loadAll()},a.render=function(){var e=this,s=this.state,o=s.showAddComment,n=s.showDate,a=s.viewImageIdx,l=void 0===a?{}:a,m=this.props.stores,O=m.teamStore,j=m.userStore,v=j.user,y=v.language,w=void 0===y?"no":y,k=O.publicTeamsFeed,x=m.appState.darkmode;return Object(i.h)("div",{class:"w-100"},k&&k.map((function(s){var a,m=O.findPublicTeam(s.team)||{};m.image&&m.image.s3SmallLink?a=m.image:m.images&&m.images[0]&&m.images[0].s3SmallLink&&(a=m.images[0]);var y=s.likes,k=s.comments,S=s.likes&&s.likes.findIndex((function(t){return t.user===v.id}))>-1,P=m&&m.followers?m.followers.length:0,C=m.members&&m.members.indexOf(v.id)>-1,D=m&&m.followers&&m.followers.indexOf(v.id)>-1,I=m.followRequests&&m.followRequests.findIndex((function(t){return t.id===v.id}))>-1,T=[];if(s.mapImage&&T.push(r(r({},s.mapImage),{},{type:"map"})),s.images){var L=Object(d.i)(s.images);T.push.apply(T,L)}var E,_=l[s.id]?l[s.id]:0,R=T&&T[_]?T[_]:null;return m&&m.name?Object(i.h)(t,null,Object(i.h)("div",{class:"row pb-4 bg-light"},Object(i.h)("div",{class:"col-12 col-sm-8 col-lg-6 offset-sm-2 offset-lg-3 mb-0 position-relative rounded rounded-lg py-3 bg-"+(x?"black":"white")+" shadow-sm"},Object(i.h)("div",{class:"d-flex"},Object(i.h)("div",{class:"text-center"},Object(i.h)("div",{class:"text-center border rounded-circle imageRounded imageRoundedSmall",style:a?'background-image: url("'+a.s3SmallLink+'");':""},!a&&Object(i.h)("i",{class:"fas fa-users text-muted mt-2",style:"font-size: 20px;"}))),Object(i.h)("div",{class:"flex-grow-1 pl-3",style:"line-height: 1.2em;"},Object(i.h)("h5",{class:"mb-1",style:"line-height: 1.0em;"},m.name),Object(i.h)("div",null,s.date&&Object(i.h)("small",{class:"text-muted",onClick:e.toggleDate},n?c.a.formatDate(s.date,{locale:"no-NB",hour12:!1,hour:"2-digit",minute:"2-digit"}):c.a.formatDistance(s.date,new Date,{locale:"no-NB"})),1===s.public?Object(i.h)(t,null,Object(i.h)("small",{class:"ml-2 text-muted"},Object(i.h)("i",{class:"fas fa-globe-europe"}))):Object(i.h)(t,null,Object(i.h)("small",{class:"ml-2 text-muted"},Object(i.h)("i",{class:"fas fa-users"})," (",c.a.format(P),")")),Object(i.h)("small",{class:"text-muted"},s.equipment>0&&Object(i.h)(t,null,Object(i.h)("i",{class:"fas fa-tools ml-2"})," ",j.findEquipment(s.equipment)||s.equipment),s.dogs>0&&Object(i.h)(t,null,Object(i.h)("i",{class:"fas fa-dog ml-2"})," ",s.dogs.length),s.track>0&&Object(i.h)(t,null,Object(i.h)("i",{class:"fas fa-map-marked text-"+(s.track>0?"success":"danger")+" ml-2"})),s.sledWeight>0&&Object(i.h)(t,null,Object(i.h)("i",{class:"fas fa-sleigh ml-2"})," ",c.a.format(s.sledWeight,0)," kg"),0!==s.temperature&&Object(i.h)(t,null,Object(i.h)("i",{class:"fas fa-temperature-low ml-2"})," ",s.temperature,"Â°C"))))),Object(i.h)("div",{class:"row mt-2"},Object(i.h)("div",{class:"clearfix col-12 font-weight-bold",style:"font-size: 1.2em;"},Object(i.h)(u.a,{markdown:g.a.replaceImages(s.name,s.images,w),markdownOpts:g.a.getMarkdownOptions()})),Object(i.h)("div",{class:"clearfix col-12"},Object(i.h)(u.a,{markdown:g.a.replaceImages(s.comment,s.images,w),markdownOpts:g.a.getMarkdownOptions()}))),Object(i.h)("div",{class:"row mt-1"},s.distanceKm>0&&Object(i.h)("div",{class:"col-3"},Object(i.h)("div",{class:"text-overflow"},Object(i.h)("small",null,Object(i.h)("i",{class:"fas fa-road"})," ",Object(i.h)(h.c,{id:"workout.calendar.distance"},"Distanse"))),Object(i.h)("div",{class:"text-overflow font-weight-light",style:"font-size: 1.2em;"},c.a.format(E=s.distanceKm,E<5?2:1),"km")),s.elevation>0&&Object(i.h)("div",{class:"col-3"},Object(i.h)("div",{class:"text-overflow"},Object(i.h)("small",null,Object(i.h)("i",{class:"fas fa-mountain"})," ",Object(i.h)(h.c,{id:"workout.calendar.ascend"},"HÃ¸ydemeter"))),Object(i.h)("div",{class:"text-overflow font-weight-light",style:"font-size: 1.2em;"},c.a.format(s.elevation,0),"m")),s.duration>0&&Object(i.h)("div",{class:"col-3"},Object(i.h)("div",{class:"text-overflow"},Object(i.h)("small",null,Object(i.h)("i",{class:"fas fa-clock"})," ",Object(i.h)(h.c,{id:"workout.calendar.duration"},"Varighet"))),Object(i.h)("div",{class:"text-overflow font-weight-light",style:"font-size: 1.2em;"},c.a.secToHms(s.duration,!0))),s.speedAvg>0&&Object(i.h)("div",{class:"col-3"},Object(i.h)("div",{class:"text-overflow"},Object(i.h)("small",null,Object(i.h)("i",{class:"fas fa-tachometer-alt"})," ",Object(i.h)(h.c,{id:"workout.calendar.avg-speed"},"Snittfart"))),Object(i.h)("div",{class:"text-overflow font-weight-light",style:"font-size: 1.2em;"},c.a.format(s.speedAvg,1),"km/t"))),Object(i.h)("div",{class:"container-fluid px-0 mt-1"},R&&Object(i.h)("div",{class:"clearfix row"},Object(i.h)("div",{class:"col-12 px-0 overflow-hidden",style:"max-height: 50vh;"},Object(i.h)("img",{class:"img-fluid",style:"min-width: 100px;",src:R.s3LargeLink}))),T&&T.length>1&&Object(i.h)("div",{class:"clearfix d-flex flex-wrap row"},T.map((function(o,r){return Object(i.h)(t,null,Object(i.h)("div",{class:"col px-0 overflow-hidden",style:"max-height: 100px;"},Object(i.h)("img",{class:"img-fluid border",style:"min-width: 100px;",src:o.s3SmallLink,onClick:e.viewImage,"data-id":s.id,"data-idx":r})))})))),Object(i.h)("div",{class:"mt-2"},y&&y.length>0&&Object(i.h)("small",{class:"bg-light shadow-sm rounded-lg py-0 px-1",style:"bottom: 20px; right: 15px;"},Object(i.h)("i",{class:"fas fa-thumbs-up text-primary"})," ",y.length),k&&k.length>0&&Object(i.h)("small",{class:"float-right bg-light shadow-sm rounded-lg py-0 px-1",style:"bottom: 20px; right: 15px;"},Object(i.h)("i",{class:"fas fa-comment text-primary"})," ",k.length)),!C&&!D&&!I&&Object(i.h)("div",{class:"clearfix mb-2"},Object(i.h)(f.a,{stores:e.props.stores,team:m,buttonOnly:!0})),Object(i.h)("div",null,Object(i.h)("div",{class:"row"},Object(i.h)("div",{class:"col-6 text-center"},Object(i.h)("button",{type:"button",class:"btn btn-sm btn-outline-"+(S?"primary":"secondary")+" btn-lg btn-block "+(S?"text-primary":""),"data-id":s.id,onClick:e.likeWorkout},Object(i.h)("i",{class:(S?"text-primary fas":"far")+" fa-thumbs-up"})," ",Object(i.h)(h.c,{id:"comments.like"},"Lik"))),Object(i.h)("div",{class:"col-6 text-center"},Object(i.h)("button",{type:"button",class:"btn btn-sm btn-outline-secondary btn-lg btn-block","data-id":s.id,onClick:e.toggleAddComment},Object(i.h)("i",{class:"fas fa-comment"})," ",Object(i.h)(h.c,{id:"comments.comment-add"},"Kommentar"))))),Object(i.h)("div",{class:"mt-2"},o[s.id]&&Object(i.h)(p.a,{stores:e.props.stores,workout:s,inputRef:function(t){return e.inputRef[s.id]=t},inputRefObject:e.inputRef,col:"12",offset:"0",showAvatar:!0,extraClass:"px-0",callback:e.addCommentToFeed}),Object(i.h)(b.a,{stores:e.props.stores,workout:s,col:"12",offset:"0",compact:!1,callback:e.addCommentToFeed}))))):""})))},s}(i.Component))||a;e.a=j}).call(this,s("hosL").Fragment)},ZWUU:function(t,e,s){"use strict";var o,r=s("hosL"),n=(s("Utv1"),s("/eY4")),a=s("OhSV");s("go65"),Object(n.a)(o=function(t){function e(){for(var e,s=arguments.length,o=new Array(s),r=0;r<s;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))||this).toggleSetting=function(t){return new Promise((function(s,o){var r,n,a;return a=(n=e.props.stores.userStore).user.settings,Promise.resolve(n.updateSetting((r={},r["settings."+t]=1===(void 0===a?{}:a)[t]?0:1,r))).then((function(){try{return s()}catch(t){return o(t)}}),o)}))},e.hideSettings=function(){return new Promise((function(t,s){return Promise.resolve(e.props.stores.userStore.updateSetting({"settings.hideSettings":1})).then((function(){try{return e.setState({hideSettings:!0}),t()}catch(t){return s(t)}}),s)}))},e}var s,o;return o=t,(s=e).prototype=Object.create(o.prototype),s.prototype.constructor=s,s.__proto__=o,e.prototype.render=function(){var t=this,e=this.props.stores.userStore.user.settings,s=void 0===e?{}:e;return this.state.hideSettings||s.hideSettings||!this.props.forceShow&&s.summaryEmails&&s.infoEmails&&s.partnerEmails?"":Object(r.h)("div",{class:"col-12 col-sm-8 col-lg-6 offset-sm-2 offset-lg-3 mt-4 mb-4 pt-4 pb-4 border-bottom border-top"},Object(r.h)("h5",null,Object(r.h)(a.c,{id:"users.settings"},"Brukerinnstillinger")),!s.summaryEmails&&Object(r.h)("div",{class:"row mt-4"},Object(r.h)("div",{class:"col-4 text-muted text-right"},Object(r.h)(a.c,{id:"users.settings-summary-email"},"Oppsummeringer")),Object(r.h)("div",{class:"col-8"},Object(r.h)("div",{class:"custom-control custom-switch"},Object(r.h)("input",{type:"checkbox",class:"custom-control-input",id:"settingsSummaryEmails",onInput:function(){return t.toggleSetting("summaryEmails")},checked:s.summaryEmails}),Object(r.h)("label",{class:"custom-control-label",for:"settingsSummaryEmails"})),Object(r.h)("small",{class:"text-muted"},Object(r.h)(a.c,{id:"users.settings-receive-summary-email"},"Motta oppsummeringer via e-post")))),!s.infoEmails&&Object(r.h)("div",{class:"row mt-4"},Object(r.h)("div",{class:"col-4 text-muted text-right"},Object(r.h)(a.c,{id:"users.settings-info-email"},"Info")),Object(r.h)("div",{class:"col-8"},Object(r.h)("div",{class:"custom-control custom-switch"},Object(r.h)("input",{type:"checkbox",class:"custom-control-input",id:"settingsInfoEmails",onInput:function(){return t.toggleSetting("infoEmails")},checked:s.infoEmails}),Object(r.h)("label",{class:"custom-control-label",for:"settingsInfoEmails"})),Object(r.h)("small",{class:"text-muted"},Object(r.h)(a.c,{id:"users.settings-receive-info-email"},"Motta info via e-post")))),!s.partnerEmails&&Object(r.h)("div",{class:"row mt-4"},Object(r.h)("div",{class:"col-4 text-muted text-right"},Object(r.h)(a.c,{id:"users.settings-partner-email"},"Partners")),Object(r.h)("div",{class:"col-8"},Object(r.h)("div",{class:"custom-control custom-switch"},Object(r.h)("input",{type:"checkbox",class:"custom-control-input",id:"settingsPartnerEmails",onInput:function(){return t.toggleSetting("partnerEmails")},checked:s.partnerEmails}),Object(r.h)("label",{class:"custom-control-label",for:"settingsPartnerEmails"})),Object(r.h)("small",{class:"text-muted"},Object(r.h)(a.c,{id:"users.settings-receive-partner-email"},"Motta tilbud fra vÃ¥re partnere via e-post")))),Object(r.h)("div",{class:"row mt-4"},Object(r.h)("div",{class:"col-12 text-muted"},Object(r.h)("small",null,Object(r.h)("a",{href:"/users"},Object(r.h)("i",{class:"fas fa-sliders-h"})," ",Object(r.h)(a.c,{id:"users.settings-text-info"},"Innstillingene finner du inne pÃ¥ profilen din."))))),Object(r.h)("div",{class:"row mt-4"},Object(r.h)("div",{class:"col-12 text-muted text-right"},Object(r.h)("small",null,Object(r.h)("button",{type:"button",class:"btn btn-sm btn-link mb-2",onClick:this.hideSettings},Object(r.h)("i",{class:"fas fa-eye-slash"})," ",Object(r.h)(a.c,{id:"users.hide-settings"},"Skjul innstillingene"))))))},e}(r.Component))},azdc:function(t,e,s){"use strict";(function(t){var o,r=s("hosL"),n=s("Utv1"),a=s("/eY4"),i=s("OhSV"),c=s("ZOvn"),l=Object(i.d)((function(){return{week:Object(r.h)(i.c,{id:"workout.graph.week"}),distance:Object(r.h)(i.c,{id:"workout.graph.distance"}),ascend:Object(r.h)(i.c,{id:"workout.graph.ascend"}),plan:Object(r.h)(i.c,{id:"workout.graph.plan"})}}))(o=Object(a.a)(o=function(e){function s(){return e.apply(this,arguments)||this}var o,a;return a=e,(o=s).prototype=Object.create(a.prototype),o.prototype.constructor=o,o.__proto__=a,s.prototype.render=function(){for(var e=this.props.stores.userStore,s=this.props,o=s.year,a=s.month,l=s.showHeader,d=void 0===l||l,h=e.user.language,m=c.a.getMonths(void 0===h?"no":h),u=a||(new Date).getMonth()+1,b=o||n.a.getYear(),p=parseInt(u<6?b-1:b,10),f=n.a.monthRange(p+"-06-01",p+1+"-05-31"),g=n.a.monthRange(p-1+"-06-01",p+"-05-31"),O=n.a.weekRange(p+"-06-01",p+1+"-05-31").map((function(t){return t.week})),j=Math.floor(O.length/(O.length%6)),v=[],y=0,w=O.length;y<w;y+=j)v.push(O[y]);return Object(r.h)(t,null,d&&Object(r.h)("h5",null,Object(r.h)(i.c,{id:"workout.graph.title"},"Treningsstatistikk")," ",p," - ",p+1),Object(r.h)("div",{class:"w-100 mt-3 mb-4"},Object(r.h)("small",{class:"mb-4"},Object(r.h)("small",null,Object(r.h)("table",{class:"table table-sm font-weigth-lighter border-bottom"},Object(r.h)("thead",null,Object(r.h)("tr",null,Object(r.h)("th",{style:"padding: .15rem;"},Object(r.h)(i.c,{id:"workout.graph.season"},"Sesong")),f.map((function(t){return Object(r.h)("th",{class:"text-right",style:"padding: .15rem;"},Object(r.h)("a",{href:"/workouts/month/"+t.month+"/"+t.year},m[t.month-1]))})))),Object(r.h)("tbody",null,Object(r.h)("tr",null,Object(r.h)("th",{scope:"row",style:"padding: .15rem;"},p-1," - ",p),g.map((function(s){return Object(r.h)(t,null,Object(r.h)("td",{class:"text-right",style:"padding: .15rem;"},Object(r.h)("nobr",null,e.findWorkoutSummaryMonth(s.year,s.month)),Object(r.h)("br",null),Object(r.h)("nobr",null,e.findWorkoutSummaryMonth(s.year,s.month,"elevation")),Object(r.h)("br",null)))})),Object(r.h)("td",{class:"text-muted",style:"padding: .15rem;"},Object(r.h)("nobr",null,Object(r.h)("i",{class:"fas fa-road"})," km"),Object(r.h)("br",null),Object(r.h)("nobr",null,Object(r.h)("i",{class:"fas fa-mountain"})," m"),Object(r.h)("br",null))),Object(r.h)("tr",null,Object(r.h)("th",{scope:"row",style:"padding: .15rem;"},p," - ",p+1),f.map((function(s){return Object(r.h)(t,null,Object(r.h)("td",{class:"text-right",style:"padding: .15rem;"},Object(r.h)("nobr",null,e.findWorkoutSummaryMonth(s.year,s.month)),Object(r.h)("br",null),Object(r.h)("nobr",null,e.findWorkoutSummaryMonth(s.year,s.month,"elevation")),Object(r.h)("br",null)))})),Object(r.h)("td",{class:"text-muted",style:"padding: .15rem;"},Object(r.h)("nobr",null,Object(r.h)("i",{class:"fas fa-road"})," km"),Object(r.h)("br",null),Object(r.h)("nobr",null,Object(r.h)("i",{class:"fas fa-mountain"})," m"),Object(r.h)("br",null)))))))))},s}(r.Component))||o)||o;e.a=l}).call(this,s("hosL").Fragment)},gOLw:function(t,e,s){"use strict";(function(t){function o(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,o)}return s}function r(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}var n,a=s("hosL"),i=s("Utv1"),c=s("/eY4"),l=s("cneo"),d=s("OhSV"),h=s("fh8t"),m=s.n(h),u=s("go65"),b=(s("1OK2"),s("B95u")),p=s("4QWe"),f=s("eQ6k"),g=s("ZOvn"),O={showAddComment:{},viewImageIdx:{}},j=Object(c.a)(n=function(e){function s(t){var s;return(s=e.call(this,t)||this).toggleDate=function(t){t.stopPropagation(),t.preventDefault(),s.setState({showDate:!s.state.showDate})},s.likeStory=function(t){return new Promise((function(e,o){var r;return r=parseInt(t.target.closest("button").dataset.id,10),Promise.resolve(s.props.stores.storyStore.likeStory({id:r})).then((function(t){try{return t,e()}catch(t){return o(t)}}),o)}))},s.toggleAddComment=function(t){var e=t.target.closest("button").dataset.id,o=s.state.showAddComment;o[e]?delete o[e]:o[e]=!0,s.setState({showAddComment:o},(function(){s.inputRef[e]&&s.inputRef[e].focus()}))},s.viewImage=function(t){var e=t.target.closest("img").dataset,o=s.state.viewImageIdx;o[e.id]=e.idx,s.setState({viewImageIdx:o})},s.toggleMenu=function(t){var e=t.target.closest("i").dataset.id,o=s.state.showMenu,r=void 0===o?{}:o;r[e]=!r[e],s.setState({showDeleteStory:{},showEdit:{},showMenu:r})},s.toggleEdit=function(t){var e=t.target.closest("button").dataset,o=e.id,r=e.story,n=s.state.showEdit,a=void 0===n?{}:n;a[o]=!a[o],s.setState({showDeleteStory:{},showEdit:a,showMenu:{},storyBody:r})},s.toggleDeleteStory=function(t){var e=t.target.closest("button").dataset.id,o=s.state.showDeleteStory,r=void 0===o?{}:o;r[e]=!r[e],s.setState({showDeleteStory:r,showEdit:{},showMenu:{}})},s.deleteStory=function(t){return new Promise((function(e,o){var r,n;return r=t.target.closest("button").dataset.id,n=s.props.stores.storyStore,Promise.resolve(n.saveField(parseInt(r,10),"offline",1,!0)).then((function(){try{return n.publicFeedUpdate(parseInt(r,10),"offline",1),s.setState({storyBody:"",showDeleteStory:{},showEdit:{},showMenu:{}}),e()}catch(t){return o(t)}}),o)}))},s.saveStory=function(t){return new Promise((function(e,o){var r,n,a;return r=t.target.closest("button").dataset.id,n=s.state.storyBody,a=s.props.stores.storyStore,Promise.resolve(a.saveField(parseInt(r,10),"body",n,!0)).then((function(){try{return a.publicFeedUpdate(parseInt(r,10),"body",n),s.setState({storyBody:"",showDeleteStory:{},showEdit:{},showMenu:{}}),e()}catch(t){return o(t)}}),o)}))},s.state=function(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?o(Object(s),!0).forEach((function(e){r(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):o(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}({},O),s.inputRef={},s}var n,c;c=e,(n=s).prototype=Object.create(c.prototype),n.prototype.constructor=n,n.__proto__=c;var h=s.prototype;return h.loadStoriesPublicFeed=function(t){return new Promise(function(e,s){return void 0===t&&(t=this.props),Promise.resolve(t.stores.storyStore.loadPublicFeed()).then((function(){try{return e()}catch(t){return s(t)}}),s)}.bind(this))},h.componentDidMount=function(){this.loadStoriesPublicFeed()},h.render=function(){var e=this,s=this.state,o=s.showAddComment,r=s.showDate,n=s.viewImageIdx,c=s.showMenu,h=void 0===c?{}:c,O=s.showEdit,j=void 0===O?{}:O,v=s.showDeleteStory,y=void 0===v?{}:v,w=s.storyBody,k=void 0===w?"":w,x=this.props.stores,S=x.userStore,P=x.storyStore,C=S.user,D=S.isAdmin,I=P.publicFeed,T=C.language,L=void 0===T?"no":T,E=x.appState.darkmode;return Object(a.h)("div",{class:"w-100"},I&&I.map((function(s){var c,O,v,w,x=P.findPublicTeam(s.team)||{},S=P.findPublicUser(s.user)||{};x.image&&x.image.s3SmallLink?c=x.image:x.images&&x.images[0]&&x.images[0].s3SmallLink?c=x.images[0]:S.image&&S.image.s3SmallLink?c=S.image:S.images&&S.images[0]&&S.images[0].s3SmallLink&&(c=S.images[0]),x&&x.name?(O=g.a.displayNameShort(x),v=g.a.displayName(x),w=g.a.displayName(S)):S&&S.id&&(O=g.a.displayNameShort(S),v=g.a.displayName(S));var I=s.likes,T=s.comments,_=s.likes&&s.likes.findIndex((function(t){return t.user===S.id}))>-1,R=x&&x.followers?x.followers.length:0,A=x.members&&x.members.indexOf(S.id)>-1,M=x&&x.followers&&x.followers.indexOf(S.id)>-1,F=x.followRequests&&x.followRequests.findIndex((function(t){return t.id===S.id}))>-1,W=[];if(s.images){var z=Object(l.i)(s.images);W.push.apply(W,z)}var V=n[s.id]?n[s.id]:0,N=W&&W[V]?W[V]:null,U=s.currentLocationGeocode,K=void 0===U?{}:U;return Object(a.h)(t,null,Object(a.h)("div",{class:"row pb-4 bg-light",style:s.offline?"opacity: 0.4;":""},Object(a.h)("div",{class:"col-12 col-sm-8 col-lg-6 offset-sm-2 offset-lg-3 mb-0 position-relative rounded rounded-lg py-3 bg-"+(E?"black":"white")+" shadow-sm"},C.id===S.id&&Object(a.h)(t,null,Object(a.h)("span",{class:"float-right font-weight-lighter text-muted"},Object(a.h)("i",{class:"fas fa-ellipsis-h",onClick:e.toggleMenu,"data-id":s.id}))),h[s.id]&&Object(a.h)(t,null,Object(a.h)("div",{class:"position-absolute bg-white p-2 border rounded rounded-lg shadow-sm",style:"top: 30px; right: 10px; width: 60%; z-index: 999999;"},Object(a.h)("button",{class:"btn btn-link btn-block text-left",onClick:e.toggleEdit,"data-id":s.id,"data-story":s.body},Object(a.h)("i",{class:"fas fa-edit"})," Edit"),Object(a.h)("hr",null),Object(a.h)("button",{class:"btn btn-link btn-block text-left",onClick:e.toggleDeleteStory,"data-id":s.id},Object(a.h)("i",{class:"fas fa-trash-alt"})," Delete"))),Object(a.h)("div",{class:"d-flex"},Object(a.h)("div",{class:"text-center border rounded-circle imageRounded imageRoundedSmall",style:c?'background-image: url("'+c.s3SmallLink+'");':""},!c&&Object(a.h)("div",{class:"text-muted",style:"font-size: 20px; padding-top: 3px;"},O)),Object(a.h)("div",{class:"flex-grow-1 pl-3 text-overflow",style:"line-height: 1.2em;"},Object(a.h)("h5",{class:"mb-1",style:"line-height: 1.0em; "+(s.offline?"text-decoration: line-through;":"")},v),Object(a.h)("div",{class:"mb-2",style:s.offline?"text-decoration: line-through;":""},s.date&&Object(a.h)("small",{class:"text-muted",onClick:e.toggleDate},r?i.a.formatDate(s.date,{locale:"no-NB",hour12:!1,hour:"2-digit",minute:"2-digit"}):i.a.formatDistance(s.date,new Date,{locale:"no-NB"})),1===s.public?Object(a.h)(t,null,Object(a.h)("small",{class:"ml-2 text-muted"},Object(a.h)("i",{class:"fas fa-globe-europe"}))):Object(a.h)(t,null,Object(a.h)("small",{class:"ml-2 text-muted"},Object(a.h)("i",{class:"fas fa-users"})," (",i.a.format(R),")")),w&&Object(a.h)(t,null,Object(a.h)("small",{class:"ml-2 text-muted"},w)),D&&K&&K.formatted_address&&Object(a.h)(t,null,Object(a.h)("small",{class:"ml-2 text-muted"},Object(a.h)("i",{class:"fas fa-map-marker-alt"})," ",K.formatted_address))))),Object(a.h)("div",{class:"row mt-2"},Object(a.h)("div",{class:"clearfix col-12",style:s.offline?"text-decoration: line-through;":""},j[s.id]?Object(a.h)(t,null,Object(a.h)("div",{class:"d-flex bd-highlight"},Object(a.h)("div",{class:"p-0 w-100 bd-highlight"},Object(a.h)("label",{class:"sr-only",for:"inlineFormInput"},Object(a.h)(d.c,{id:"comments.comment"},"Kommentar")),Object(a.h)("div",{class:"border rounded rounded-lg position-relative"},Object(a.h)(d.b,null,Object(a.h)("textarea",{class:"form-control-plaintext px-2",type:"text",placeholder:Object(a.h)(d.c,{id:"comments.write-comment"},"Skriv en kommentar..."),onInput:Object(u.a)(e,"storyBody"),onKeyUp:g.a.resizeTextarea,onFocus:g.a.resizeTextarea,style:"height: 2.3em;",value:k})))),Object(a.h)("div",{class:"p-0 pl-2 flex-shrink-1 bd-highlight"},Object(a.h)("button",{type:"button",class:"btn btn-primary mb-2",onClick:e.saveStory,"data-id":s.id},Object(a.h)("i",{class:"fas fa-paper-plane"}))))):Object(a.h)(t,null,Object(a.h)(m.a,{markdown:g.a.replaceImages(s.body,s.images,L),markdownOpts:g.a.getMarkdownOptions()})),y[s.id]&&Object(a.h)("div",{class:"clearfix mt-3 mb-3"},Object(a.h)("button",{class:"btn btn-danger float-left",onClick:e.deleteStory,"data-id":s.id},Object(a.h)("i",{class:"fas fa-trash-alt"})," Delete"),Object(a.h)("button",{class:"btn btn-secondary float-right",onClick:e.toggleDeleteStory,"data-id":s.id},Object(a.h)("i",{class:"fas fa-times-circle"})," Cancel")))),Object(a.h)("div",{class:"container-fluid px-0 mt-1"},N&&Object(a.h)("div",{class:"clearfix row"},Object(a.h)("div",{class:"col-12 px-0 overflow-hidden",style:"max-height: 70vh;"},Object(a.h)("img",{class:"img-fluid",style:"min-width: 100px;",src:N.s3LargeLink}))),W&&W.length>1&&Object(a.h)("div",{class:"clearfix d-flex flex-wrap row"},W.map((function(o,r){return Object(a.h)(t,null,Object(a.h)("div",{class:"col px-0 overflow-hidden",style:"max-height: 100px; min-width: 100px;"},Object(a.h)("img",{class:"img-fluid border",style:"min-width: 100px;",src:o.s3SmallLink,onClick:e.viewImage,"data-id":s.id,"data-idx":r})))})))),Object(a.h)("div",{class:"mt-2"},I&&I.length>0&&Object(a.h)("small",{class:"bg-light shadow-sm rounded-lg py-0 px-1",style:"bottom: 20px; right: 15px;"},Object(a.h)("i",{class:"fas fa-thumbs-up text-primary"})," ",I.length),T&&T.length>0&&Object(a.h)("small",{class:"float-right bg-light shadow-sm rounded-lg py-0 px-1",style:"bottom: 20px; right: 15px;"},Object(a.h)("i",{class:"fas fa-comment text-primary"})," ",T.length)),!A&&!M&&!F&&x.public>0&&Object(a.h)("div",{class:"clearfix mb-2"},Object(a.h)(f.a,{stores:e.props.stores,team:x,buttonOnly:!0})),Object(a.h)("div",null,Object(a.h)("div",{class:"row"},Object(a.h)("div",{class:"col-6 text-center"},Object(a.h)("button",{type:"button",class:"btn btn-sm btn-outline-"+(_?"primary":"secondary")+" btn-lg btn-block "+(_?"text-primary":""),"data-id":s.id,onClick:e.likeStory},Object(a.h)("i",{class:(_?"text-primary fas":"far")+" fa-thumbs-up"})," ",Object(a.h)(d.c,{id:"comments.like"},"Lik"))),Object(a.h)("div",{class:"col-6 text-center"},Object(a.h)("button",{type:"button",class:"btn btn-sm btn-outline-secondary btn-lg btn-block","data-id":s.id,onClick:e.toggleAddComment},Object(a.h)("i",{class:"fas fa-comment"})," ",Object(a.h)(d.c,{id:"comments.comment-add"},"Kommentar"))))),Object(a.h)("div",{class:"mt-2"},o[s.id]&&Object(a.h)(p.a,{stores:e.props.stores,story:s,inputRef:function(t){return e.inputRef[s.id]=t},inputRefObject:e.inputRef,col:"10",offset:"2",key:"story-comment-"+s.id}),Object(a.h)(b.a,{stores:e.props.stores,story:s,col:"10",offset:"2",compact:!1})))))})))},s}(a.Component))||n;e.a=j}).call(this,s("hosL").Fragment)},"qv+O":function(t,e,s){"use strict";(function(t){function o(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,o)}return s}function r(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}function n(t,e,s){if(void 0===t&&(t=""),void 0===s&&(s="no"),c.a.isString(t)){var o=t,r=new RegExp("<"+s+">(.*?)</"+s+">","s").exec(o);if(r){var n=r[0];n&&(o=n)}return o.replace(/\{\{img\.(\d+)\s*(\d*)\}\}/g,(function(t,s,o){return c.a.isObject(e[s])?"<img src="+e[s].s3XXLargeLink+" class='img-fluid float-right' style='width: "+(o||40)+"%;' />":""}))}return t}var a,i=s("hosL"),c=s("Utv1"),l=s("/eY4"),d=s("OhSV"),h=s("fh8t"),m=s.n(h),u=(s("ZOvn"),{pedantic:!1,gfm:!0,breaks:!0,sanitize:!1,smartLists:!0,smartypants:!0,xhtml:!0}),b={isLoading:!1},p=Object(l.a)(a=function(e){function s(t){var s;return(s=e.call(this,t)||this).state=function(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?o(Object(s),!0).forEach((function(e){r(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):o(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}({},b),s}var a,l;l=e,(a=s).prototype=Object.create(l.prototype),a.prototype.constructor=a,a.__proto__=l;var h=s.prototype;return h.loadRace=function(t){return new Promise(function(e,s){return void 0===t&&(t=this.props),this.setState({isLoading:!0}),Promise.resolve(t.stores.raceStore.load({query:{}})).then(function(){try{return this.setState({isLoading:!1}),e()}catch(t){return s(t)}}.bind(this),s)}.bind(this))},h.componentDidMount=function(){this.loadRace()},h.componentWillReceiveProps=function(t){this.loadRace(t)},h.render=function(){var e=this.props.stores,s=e.appState,o=e.userStore,r=o.isAdmin,a=e.raceStore.races,l=s.language,h=void 0===l?"no":l;return Object(i.h)("div",{class:"row"},Object(i.h)("div",{class:"col-12"},Object(i.h)("h5",null,Object(i.h)(d.c,{id:"races.homerun"},"Homerun races"))),(a||0===a.length)&&Object(i.h)("div",{class:"col-12 text-center py-5"},Object(i.h)("h5",null,"No upcoming races!"),"Take a look at the previous races:",Object(i.h)("br",null),Object(i.h)("a",{href:"https://homerunrace.no/"},"homerunrace.no")),a&&a.sort((function(t,e){return t.startDate-e.startDate})).reverse().map((function(e){var s=new Date,o="";if(s>=new Date(e.startDate)&&s<=new Date(e.endDate))o="race";else if(s>=new Date(e.signupStartDate)&&s<=new Date(e.signupEndDate))o="signup";else if(s>new Date(e.endDate))return Object(i.h)(t,null);return Object(i.h)(t,null,Object(i.h)("div",{class:"col-12 col-sm-12 col-md-6 col-lg-6 mb-3"},Object(i.h)("div",{class:"card position-relative"},Object(i.h)("h5",{class:"position-absolute",style:"top: 10px; right: 10px;"},"signup"===o&&Object(i.h)(t,null,Object(i.h)("div",{class:"spinner-grow text-primary",role:"status"})),"race"===o&&Object(i.h)(t,null,Object(i.h)("div",{class:"spinner-grow text-danger",role:"status"})),"done"===o&&Object(i.h)(t,null,Object(i.h)("span",null,Object(i.h)("i",{class:"fas fa-check text-success"})))),Object(i.h)("h5",{class:"card-header"},r&&Object(i.h)("i",{class:"fas fa-eye"+(e.active?" text-success":"-slash text-danger")+" float-right"}),e.title),Object(i.h)("div",{class:"list-thumb d-flex align-items-center position-relative"},Object(i.h)("h5",{class:"position-absolute",style:"top: 3px; right: 5px;"},"signup"===o&&Object(i.h)(t,null,Object(i.h)("span",{class:"badge badge-primary border border-white ml-2"},Object(i.h)(d.c,{id:"races.signup-open"},"PÃ¥melding Ã¥pen"))),"race"===o&&Object(i.h)(t,null,Object(i.h)("span",{class:"badge badge-danger border border-white ml-2"},Object(i.h)(d.c,{id:"races.race-in-progress"},"LÃ¸p pÃ¥gÃ¥r"))),"done"===o&&Object(i.h)(t,null,Object(i.h)("span",{class:"badge badge-success border border-white ml-2"},Object(i.h)(d.c,{id:"races.race-finished"},"LÃ¸p avsluttet")))),e.images&&e.images[0]?Object(i.h)("img",{src:e.images[0].s3MediumLink,class:"card-img-top"}):""),Object(i.h)("div",{class:"card-body"},Object(i.h)("p",{class:"card-text"},Object(i.h)(m.a,{markdown:n(e.ingress,e.images,h),markdownOpts:u})),e.classes&&Object(i.h)(t,null,Object(i.h)("div",{class:"mb-3"},Object(i.h)("small",{class:"font-weight-lighter mr-2"},Object(i.h)(d.c,{id:"races.classes"},"Klasser"),": "),Object(i.h)("br",null),e.classes.sort((function(t,e){return t.distance-e.distance})).map((function(e){return Object(i.h)(t,null,Object(i.h)("span",{class:"badge badge-pill badge-light mr-2 font-weight-light"},e.title))})))),Object(i.h)("a",{href:"/app-races/"+e.id,class:"btn btn-primary stretched-link"},Object(i.h)(d.c,{id:"races.read-more"},"Les mer"))),Object(i.h)("div",{class:"card-footer"},Object(i.h)("small",{class:"text-muted"},Object(i.h)(d.c,{id:"races.race-days"},"LÃ¸psdager"),": ",e.startDate&&Object(i.h)(t,null,c.a.formatDate(e.startDate,{locale:h})),e.endDate&&Object(i.h)(t,null," - ",c.a.formatDate(e.endDate,{locale:h})))))))})))},s}(i.Component))||a;e.a=p}).call(this,s("hosL").Fragment)},sgpT:function(t,e,s){"use strict";function o(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,o)}return s}function r(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}var n,a=s("hosL"),i=(s("ox/y"),s("Utv1"),s("/eY4")),c=(s("go65"),s("Y3FI"),s("OhSV")),l={menu:{profile:!1,main:!1},searchText:""},d=Object(i.a)(n=function(t){function e(e){var s;return(s=t.call(this,e)||this).state=function(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?o(Object(s),!0).forEach((function(e){r(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):o(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}({},l),s}var s,n;return n=t,(s=e).prototype=Object.create(n.prototype),s.prototype.constructor=s,s.__proto__=n,e.prototype.render=function(){var t=this.props.stores.userStore.notifications,e=(void 0===t?[]:t).filter((function(t){return!t.read})).length||0;return e<3?"":Object(a.h)("div",{class:"col-12 col-sm-8 col-lg-6 offset-sm-2 offset-lg-3 mt-4 mb-4 clearfix px-0"},Object(a.h)("div",{class:"alert alert-danger",role:"alert"},Object(a.h)("a",{href:"/users/notifications",class:"text-dark"},Object(a.h)("i",{class:"fas fa-bell mr-2 text-dark"}),Object(a.h)("span",{class:"badge badge-pill badge-danger"},e)," ",Object(a.h)(c.c,{id:"notifications.unread"},"Uleste varslinger. Klikk her for Ã¥ se alle..."))))},e}(a.Component))||n;e.a=d},w93r:function(t,e,s){"use strict";var o,r=s("hosL"),n=s("/eY4"),a=s("Utv1"),i=s("ZOvn"),c=Object(n.a)(o=function(t){function e(){for(var e,s=arguments.length,o=new Array(s),r=0;r<s;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))||this).toggleWeather=function(){var t=e.state.showWeather;console.log({showWeather:t}),e.setState({showWeather:!t})},e}var s,o;return o=t,(s=e).prototype=Object.create(o.prototype),s.prototype.constructor=s,s.__proto__=o,e.prototype.render=function(){var t=this.props,e=t.data,s=t.place;return e&&s?this.state.showWeather?Object(r.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 text-center"},e&&e.length>0&&Object(r.h)("div",{class:"container-fluid mb-4"},Object(r.h)("div",{class:"row",onClick:this.toggleWeather},Object(r.h)("div",{class:"col-12"},Object(r.h)("h5",null,s)),e&&e.length>0&&e.slice(0,4).map((function(t){return Object(r.h)("div",{class:"col-3 text-center"},Object(r.h)("small",{class:"font-weight-lighter text-muted"},a.a.isoTime(t.time)),Object(r.h)("br",null),Object(r.h)("img",{src:"./assets/svg/"+a.a.getNestedValue(t,"next_1_hours.summary.symbol_code")+".svg"}),Object(r.h)("br",null),Object(r.h)("nobr",null,Object(r.h)("small",null,Object(r.h)("i",{class:"fas fa-temperature-low text-muted ml-1"}))," ",a.a.getNestedValue(t,"instant.details.air_temperature")," ",Object(r.h)("span",{class:"text-muted font-weight-lighter"},"Â°C")),Object(r.h)("br",null),Object(r.h)("small",{class:"text-overflow"},Object(r.h)("i",{class:"fas fa-wind text-muted ml-1"})," ",a.a.getNestedValue(t,"instant.details.wind_speed"),Object(r.h)("span",{class:"text-muted font-weight-lighter"},"m/s")," ",Object(r.h)("span",{class:"text-muted font-weight-lighter"},i.a.windDirection(a.a.getNestedValue(t,"instant.details.wind_from_direction"))),Object(r.h)("br",null),Object(r.h)("i",{class:"fas fa-cloud-rain text-muted ml-1"})," ",a.a.getNestedValue(t,"next_1_hours.details.precipitation_amount")," ",Object(r.h)("span",{class:"text-muted font-weight-lighter"},"mm"),Object(r.h)("br",null)))}))))):Object(r.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 px-0"},e&&e.length>0&&Object(r.h)("div",{class:"container-fluid px-0"},Object(r.h)("div",{class:"row",onClick:this.toggleWeather},e&&e.length>0&&e.slice(0,1).map((function(t){return Object(r.h)("div",{class:"col-12 text-right"},Object(r.h)("nobr",null,Object(r.h)("small",{class:"font-weight-light text-muted"},a.a.isoTime(t.time)),":",Object(r.h)("img",{src:"./assets/svg/"+a.a.getNestedValue(t,"next_1_hours.summary.symbol_code")+".svg",class:"ml-2",style:"height: 20px;"}),a.a.getNestedValue(t,"next_1_hours.details.precipitation_amount")>0&&Object(r.h)("small",{class:"ml-2"},a.a.getNestedValue(t,"next_1_hours.details.precipitation_amount"),Object(r.h)("span",{class:"text-muted font-weight-lighter"},"mm")),Object(r.h)("small",{class:"ml-2"},Object(r.h)("i",{class:"fas fa-temperature-low text-muted"})," ",a.a.getNestedValue(t,"instant.details.air_temperature"),Object(r.h)("span",{class:"text-muted font-weight-lighter"},"Â°C")),Object(r.h)("small",{class:"ml-2"},Object(r.h)("i",{class:"fas fa-wind text-muted"})," ",a.a.getNestedValue(t,"instant.details.wind_speed"),Object(r.h)("span",{class:"text-muted font-weight-lighter"},"m/s")," ",Object(r.h)("span",{class:"text-muted font-weight-lighter"},i.a.windDirection(a.a.getNestedValue(t,"instant.details.wind_from_direction"))))),Object(r.h)("br",null))}))))):""},e}(r.Component))||o;e.a=c}}]);
//# sourceMappingURL=route-home.chunk.fb66e.js.map