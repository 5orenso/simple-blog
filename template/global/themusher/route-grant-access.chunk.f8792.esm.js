(window.webpackJsonp=window.webpackJsonp||[]).push([[49],{"/DnB":function(t,e,s){"use strict";function c(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(t);e&&(c=c.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,c)}return s}function o(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}var a,r=s("hosL"),n=(s("Utv1"),s("/eY4"));const l={};let i=Object(n.a)(a=class extends r.Component{constructor(t){super(t),this.state=function(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?c(Object(s),!0).forEach((function(e){o(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):c(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}({},l),this.container=null}componentDidMount(){const{horizontal:t,vertical:e=""}=this.props,s={behavior:"smooth"};t&&(s.inline=t),e&&(s.block=e),this.container.scrollIntoView(s)}render(){return Object(r.h)("div",{ref:t=>this.container=t},"Â ")}})||a;e.a=i},pJjI:function(t,e,s){"use strict";(function(t){var c,o=s("hosL"),a=s("Utv1"),r=s("/eY4"),n=s("OhSV");s("/DnB");let l=Object(r.a)(c=class extends o.Component{constructor(...t){super(...t),this.toggleTeam=t=>{const{callback:e,unsetTeamIfSelected:s=!0}=this.props,{dogStore:c,workoutStore:o}=this.props.stores,{currentTeam:r}=c;s&&t===r?(c.setCurrentTeam(void 0),o.setCurrentTeam(void 0)):(c.setCurrentTeam(t),o.setCurrentTeam(t)),a.a.isDefined(e)&&e()},this.showAllTeams=()=>{const{callback:t}=this.props,{dogStore:e,workoutStore:s}=this.props.stores;e.setCurrentTeam(void 0),s.setCurrentTeam(void 0),a.a.isDefined(t)&&t()}}render(){const{userStore:e,dogStore:s}=this.props.stores,{teams:c}=e,{currentTeam:a}=s,{highlight:r,showAll:l=!0}=this.props;return Object(o.h)("div",{class:"row mt-2"},Object(o.h)("div",{class:"w-100 overflow-hidden"},Object(o.h)("div",{class:"d-flex flex-row flex-nowrap pb-2 px-1 no-scrollbar",style:"overflow: auto; scroll-snap-type: x mandatory;"},c&&c.map((e,s)=>{let n;return 1===c.length?n="rounded-pill-both":0===s?n="rounded-pill-left":s+1===c.length&&(n="rounded-pill-right"),Object(o.h)("div",{class:"col mb-0 px-0 clearfix",key:e.id},Object(o.h)("button",{class:`btn btn-sm btn-block \n\t\t\t\t\t\t\t\t\t\t\trounded-none ${n}\n\t\t\t\t\t\t\t\t\t\t\t${a===e.id?"btn-success":"btn-outline-success"}\n\t\t\t\t\t\t\t\t\t\t\ttext-nowrap clearfix`,style:"text-overflow: ellipsis; overflow: hidden;",onClick:()=>this.toggleTeam(e.id)},Object(o.h)("i",{class:"fas fa-users"})," ",e.name,r&&r.indexOf(e.id)>-1&&Object(o.h)(t,null,a===e.id?Object(o.h)(t,null,Object(o.h)("i",{class:"fas fa-check float-right"})):Object(o.h)(t,null,Object(o.h)("div",{class:"spinner-grow text-warning float-right",role:"status"},Object(o.h)("span",{class:"sr-only"},"Loading...")),Object(o.h)("i",{class:"far fa-hand-point-left float-right",style:"font-size: 2.0em;"})))))})),l&&Object(o.h)("div",{class:"row"},Object(o.h)("div",{class:"col-12 mb-1 px-1 d-flex justify-content-center"},Object(o.h)("button",{class:"btn btn-sm rounded-lg btn-link text-nowrap clearfix",style:"text-overflow: ellipsis; overflow: hidden;",onClick:this.showAllTeams},Object(o.h)("i",{class:"fas fa-users"})," ",Object(o.h)(n.c,{id:"teams.show-all"},"Show all"))))))}})||c;e.a=l}).call(this,s("hosL").Fragment)},qZTL:function(t,e,s){"use strict";s.r(e),function(t){var c,o=s("hosL"),a=s("Utv1"),r=s("/eY4"),n=s("Y3FI"),l=(s("go65"),s("OhSV")),i=s("fh8t"),h=s.n(i),d=s("ZOvn"),b=s("67HY"),p=s("gbHB"),u=s("B+py"),f=s("pJjI"),g=s("s4FZ");let O=Object(r.a)(c=class extends o.Component{constructor(t){var e;super(t),e=this,this.loadApplication=()=>{const{id:t}=this.state,{applicationStore:e}=this.props.stores;e.load(t)},this.loadTeam=async function(){e.setState({isLoading:!0});const{teamStore:t,workoutStore:s}=e.props.stores,{currentTeam:c}=s;await t.load(c),e.setState({isLoading:!1})},this.changeLanguage=t=>{const e=t.target.value,{appState:s}=this.props.stores;s.setLanguage(e)},this.grantAccess=async function(){const{userStore:t,teamStore:s,workoutStore:c}=e.props.stores,{currentTeam:o}=c,{user:a}=t,{returnUrl:r,id:n}=e.state,l={grantedDate:new Date,returnUrl:r,team:o,appId:n};t.findApplicationById(n)||(await t.saveField(a.id,"applications",l),await t.saveField(a.id,"settings.veterinaryAllowed",1),await s.saveField(o,"public",1)),e.setState({accessGranted:1})},this.denyAccess=()=>{Object(n.route)("/")},this.saveInputParams=()=>{let{returnUrl:t,id:e}=this.props;t?(a.a.set("returnUrl",t),a.a.set("id",e)):(t=a.a.get("returnUrl"),e=a.a.get("id")),this.setState({returnUrl:t,id:e})},this.state={returnUrl:"",id:0}}componentWillMount(){this.saveInputParams()}componentDidMount(){this.loadApplication(),this.loadTeam()}render(){const{appState:e,userStore:s,applicationStore:c,workoutStore:a,teamStore:r}=this.props.stores,{subsection:n}=this.props,{returnUrl:i,accessGranted:O}=this.state,{currentTeam:m}=a,{user:j}=s,{language:w="en",darkmode:v}=e,{application:y}=c,{team:k}=r;if(!y)return Object(o.h)("div",{class:"container-fluid"},Object(o.h)("div",{class:"row"},Object(o.h)("div",{class:"col-10 offset-1 col-sm-8 offset-sm-2 col-md-6 offset-md-3 col-lg-4 offset-lg-4 pt-5"},Object(o.h)("div",{class:"d-flex justify-content-center"},v?Object(o.h)(t,null,Object(o.h)("img",{src:"https://themusher.app/assets/logo-qpaws-dark.png",height:"100"})):Object(o.h)(t,null,Object(o.h)("img",{src:"https://themusher.app/assets/logo-qpaws-light.png",height:"100"}))),Object(o.h)("div",{class:"d-flex justify-content-center"},Object(o.h)("h5",{class:"mt-1 mb-3 font-weight-lighter"},Object(o.h)(l.c,{id:"grant-access.title"},"Grant access"))),Object(o.h)("div",{class:"alert alert-danger",role:"alert"},Object(o.h)("h5",null,"Error"),"Application not found!"))));const{title:S,body:x,images:L}=y;return Object(o.h)("div",{class:"container-fluid"},Object(o.h)("div",{class:"row"},Object(o.h)("div",{class:"col-10 offset-1 col-sm-8 offset-sm-2 col-md-6 offset-md-3 col-lg-4 offset-lg-4 pt-5"},Object(o.h)("div",{class:"d-flex justify-content-center"},v?Object(o.h)(t,null,Object(o.h)("img",{src:"https://themusher.app/assets/logo-qpaws-dark.png",height:"100"})):Object(o.h)(t,null,Object(o.h)("img",{src:"https://themusher.app/assets/logo-qpaws-light.png",height:"100"}))),Object(o.h)("div",{class:"d-flex justify-content-center"},Object(o.h)("h5",{class:"mt-1 mb-3 font-weight-lighter"},Object(o.h)(l.c,{id:"grant-access.title"},"Grant access"))),Object(o.h)(g.a,{stores:this.props.stores,images:L,minHeight:"50px"}),Object(o.h)("h5",{class:"mt-3"},S),Object(o.h)("p",{class:"mt-3"},Object(o.h)(h.a,{markdown:d.a.replaceImages(x,L,w),markdownOpts:d.a.getMarkdownOptions()})))),Object(o.h)("div",{class:"row"},j.email?Object(o.h)(t,null,O?Object(o.h)(t,null,Object(o.h)("div",{class:"col-10 offset-1 col-sm-8 offset-sm-2 col-md-6 offset-md-3 col-lg-4 offset-lg-4 mt-3 border-top pt-3"},Object(o.h)("div",{class:"display-1 text-success text-center"},Object(o.h)("i",{class:"fas fa-check"})),Object(o.h)("p",null,Object(o.h)(l.c,{id:"grant-access.access-granted"},"Access granted. Now please click the button below to go back to")," ",S,"."),Object(o.h)("a",{class:"btn btn-success btn-block",href:`${i}?userId=${j.uuidv4}&teamId=${k.uuidv4}`,native:!0},Object(o.h)(l.c,{id:"grant-access.back-to-application"},"Back to"),": ",S," ",Object(o.h)("i",{class:"fas fa-arrow-right"})))):Object(o.h)(t,null,Object(o.h)("div",{class:"col-10 offset-1 col-sm-8 offset-sm-2 col-md-6 offset-md-3 col-lg-4 offset-lg-4 mt-3 border-top pt-3"},Object(o.h)("h5",{class:"font-weight-light"},Object(o.h)(l.c,{id:"grant-access.data-shared"},"Data beeing shared"),":"),Object(o.h)("p",null,Object(o.h)("i",{class:"fas fa-user"}),": ",Object(o.h)(l.c,{id:"grant-access.fields-shared-person"},"Image, Name, email, cellphone, address")),Object(o.h)("p",null,Object(o.h)("i",{class:"fas fa-dog"}),": ",Object(o.h)(l.c,{id:"grant-access.fields-shared-dog"},"Image, Name, chipId, gender, birth, vaccines")),Object(o.h)("p",null,Object(o.h)("i",{class:"fas fa-users"}),": ",Object(o.h)(l.c,{id:"grant-access.fields-shared-team"},"Name, description, images"))),Object(o.h)("div",{class:"col-10 offset-1 col-sm-8 offset-sm-2 col-md-6 offset-md-3 col-lg-4 offset-lg-4 mt-3 border-top pt-3"},Object(o.h)("h5",{class:"font-weight-light"},Object(o.h)(l.c,{id:"grant-access.choose-team"},"Choose team")),Object(o.h)("div",{class:"col-12"},Object(o.h)(f.a,{stores:this.props.stores,callback:this.loadTeam,key:"teams-"+m,showAll:!1}))),m?Object(o.h)(t,null,Object(o.h)("div",{class:"col-10 offset-1 col-sm-8 offset-sm-2 col-md-6 offset-md-3 col-lg-4 offset-lg-4 mt-3"},Object(o.h)("button",{class:"btn btn-primary btn-block",onClick:this.grantAccess},Object(o.h)("i",{class:"fas fa-check"})," ",Object(o.h)(l.c,{id:"grant-access.grant"},"Grant access")),Object(o.h)("button",{class:"mt-4 btn btn-sm btn-link text-muted float-right",onClick:this.denyAccess},Object(o.h)(l.c,{id:"grant-access.deny"},"Deny access")))):Object(o.h)(t,null,Object(o.h)("div",{class:"col-10 offset-1 col-sm-8 offset-sm-2 col-md-6 offset-md-3 col-lg-4 offset-lg-4 mt-3"},Object(o.h)("span",{class:"display-4"},Object(o.h)("i",{class:"fas fa-hand-point-up"})," Choose team"))))):Object(o.h)(t,null,!n&&Object(o.h)(b.a,{stores:this.props.stores,showLogo:!1,routeLoginOk:"/grant-access",routeLoginNew:"/grant-access/newUser",routeLoginForgot:"/grant-access/forgotPassword"}),"newUser"===n&&Object(o.h)(p.default,{stores:this.props.stores,showLogo:!1,routeLogin:"/grant-access",routeLoginForgot:"/grant-access/forgotPassword",skipPubSub:!0}),"forgotPassword"===n&&Object(o.h)(u.default,{stores:this.props.stores,showLogo:!1,routeLogin:"/grant-access",routeLoginNew:"/grant-access/newUser"}))),Object(o.h)("div",{class:"col-10 offset-1 col-sm-8 offset-sm-2 col-md-6 offset-md-3 col-lg-4 offset-lg-4"},Object(o.h)("div",{class:"form-row align-items-center"},Object(o.h)("div",{class:"col-auto my-1 mx-auto",style:"width: 80px;"},Object(o.h)("select",{class:"custom-select",style:"background-color: inherit; border: none;",onInput:this.changeLanguage},Object(o.h)("option",{value:"no",selected:"no"===w},"ðŸ‡³ðŸ‡´ NO"),Object(o.h)("option",{value:"en",selected:"en"===w},"ðŸ‡¬ðŸ‡§ EN"),Object(o.h)("option",{value:"es",selected:"es"===w},"ðŸ‡ªðŸ‡¸ ES"),Object(o.h)("option",{value:"de",selected:"de"===w},"ðŸ‡©ðŸ‡ª DE"),Object(o.h)("option",{value:"fr",selected:"fr"===w},"ðŸ‡«ðŸ‡· FR"),Object(o.h)("option",{value:"ru",selected:"ru"===w},"ðŸ‡·ðŸ‡º RU"),Object(o.h)("option",{value:"se",selected:"se"===w},"ðŸ‡¸ðŸ‡ª SE"))))))}})||c;e.default=O}.call(this,s("hosL").Fragment)}}]);
//# sourceMappingURL=route-grant-access.chunk.f8792.esm.js.map