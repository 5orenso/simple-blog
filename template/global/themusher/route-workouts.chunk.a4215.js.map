{"version":3,"sources":["webpack:///./components/workout/summary.js","webpack:///./components/garmin/index.js","webpack:///./routes/workouts/index.js","webpack:///./components/workout/calendarPlan.js","webpack:///./components/workout/table.js","webpack:///./components/strava/index.js","webpack:///./components/team/teams.js","webpack:///./components/team/fastList.js"],"names":["observer","render","this","props","summary","class","style","week","year","count","util","format","distanceKm","elevation","secToHms","duration","speedAvg","Component","Garmin","toggleDate","e","stopPropagation","preventDefault","setState","showDate","state","ignoreGarminWorkout","stores","garminActivityDetailsStore","ignoreWorkout","target","parentElement","dataset","id","loadGarminActivities","importGarminWorkout","loadWorkouts","currentTeam","workoutStore","asTrack","importTrack","importWorkout","load","query","team","toggleDetail","showDetail","hideImported","componentDidMount","activities","forceShowDate","userStore","selectedTeam","findTeam","length","type","onClick","map","activity","startDate","parseInputDate","startTimeInSeconds","deviceName","activityType","formatDate","locale","formatDistance","Date","value","distanceInMeters","totalElevationGainInMeters","averageSpeedInMetersPerSecond","durationInSeconds","data-id","kmToMiles","MARGIN_TOP","mu","marginTop","MARGIN_BOTTOM","marginBottom","SUB_MENU_MARGIN_TOP","subMenuMarginTop","initialState","loadedTime","isLoading","offset","limit","submenu","workoutFilter","sessionid","getTime","dataFields","Workouts","loadAll","currentMonth","currentYear","messageStore","getMonth","getFullYear","month","Promise","all","loadWorkoutSummary","loadWorkoutPlans","getNotifications","getUnReadMessages","loadStravaActivities","loadTeams","changeTeam","addData","setLoadMore","unsetLoadMore","workoutPlanCurrent","workoutPlanStore","imperial","user","settings","seasonYear","workoutPlans","prepareWeekGraphs","updateKeyValue","resetGraphPlanWeekDistanceCurrent","chooseSubmenu","menu","chooseDay","day","dd","mm","yyyy","w","date","d","getDate","m","y","parseInt","renderContent","obj","workout","wrapperClasses","wrapperClassesRow","setupIntersection","handleIntersection","intersectionObserverCallback","scrollViewTimer","setInterval","postScrollview","getIntersectionObserverHistory","teamStore","skipMusherWorkoutSummary","stravaActivityStore","getWorkoutSummary","getWorkoutSummaryDay","daysBack","componentWillMount","componentWillUnmount","clearInterval","appState","checkCordova","componentWillReceiveProps","nextProps","percentComplete","scrolledDown","workoutPlan","workoutSummaryWeekDay","language","MONTHS","getMonths","seasonStart","currentTeamObject","darkmode","workouts","cordovaActiveTrackingParams","isRunning","totalDistance","currentSpeed","totalTime","workoutsFiltered","filter","planMonth","sumWorkoutPlanMonth","summaryMonth","findWorkoutSummaryMonth","Math","floor","totalCountMonth","totalDistanceKmMonth","totalDurationMonth","totalSpeedavgMonth","stravaActivities","garminActivityDetails","href","role","callback","changeTeams","key","data-menu","horizontal","vertical","chooseDayFunction","hideTable","hideSummary","skipLoadSummary","radius","percent","prefix","total","completed","smallUnit","url","section","showExtra","basehref","showNavigation","showHeader","strava","garmin","name","data","wrapperClassNames","contentClassNames","dataValues","fields","RED_DAYS","Calendar","setFocus","inputRef","focus","editMonth","showInput","inputYear","inputMonth","inputDay","inputWeek","newDistance","distance","editWeek","editDay","saveDistance","field","saveField","resetInput","teamName","getYear","insert","title","seasonMonth","nextDay","addDays","getWeek","checkKeydown","updateWorkoutPlanTips","hideWorkoutPlanTips","toggleTips","newValue","updateSetting","DAYS","getDays","currentDay","currentEpoch","dog","monthNum","yearNum","getNextMonth","nextMonth","nextYear","getPrevMonth","prevMonth","prevYear","daysOfMonth","getDaysInMonth","weeksInMonth","getWeeksInMonth","daysOfWeek","getDaysInWeek","totalDistanceKmMonthPlan","totalWorkoutDistanceKmMonth","isMonthInTheFuture","findWorkoutPlanSummaryMonth","tips","tipsMonth","padDate","hasTipsMonth","comments","placeholder","ref","c","onInput","linkState","onKeydown","autocomplete","getDay","weekObj","summaryWeek","findWorkoutPlanSummaryWeek","asNumber","isWeekInTheFuture","totalWeek","totalWorkoutWeek","tipsWeek","hasTipsWeek","data-week","data-year","data-distance","isDayInTheFuture","summaryWorkout","findWorkoutSummaryWeekDay","findWorkoutPlanSummaryDay","isChosen","isToday","isDayOff","indexOf","data-day","data-month","getPlanColor","colspan","time","totalWorkouts","avgSpeed","WorkoutTable","withText","ascend","plan","seasonMonths","monthRange","prevSeasonMonths","xTicksAll","weekRange","wo","partSize","xTicks","i","l","push","scope","Strava","ignoreStravaWorkout","importStravaWorkout","start_date","total_elevation_gain","average_speed","elapsed_time","Teams","toggleTeam","unsetTeamIfSelected","dogStore","setCurrentTeam","undefined","isDefined","showAllTeams","teams","highlight","showAll","idx","classNames","FastListLine","containerRef","removeIntersectionObserver","addIntersectionObserver","dataProperties","forEach","encodeURI","data-idx","FastList","deleteIntersectionObserver","intersectionObserver","entries","isIntersecting","height","currentHeight","max","childNodes","offsetHeight","scrollHeight","display","minHeight","setupIntersectionObserver","window","IntersectionObserverEntry","prototype","IntersectionObserver","root","rootMargin","threshold","observe","unobserve","isObject","hasOwnProperty","contentClasses"],"mappings":"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","file":"route-workouts.chunk.a4215.js","sourcesContent":["import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport { Text, Localizer, withText } from 'preact-i18n';\n\n@observer\nclass WorkoutSummary extends Component {\n    render() {\n        const { summary = {} } = this.props;\n\n        return (\n            <div class='w-100 mb-3'>\n                <div class='row'>\n                    <div class='col-12 col-sm-8 col-lg-6 offset-sm-2 offset-lg-3 d-flex mb-0 position-relative'>\n                        {/* {JSON.stringify(workout, null, 4)} */}\n                        <div class={`text-center border rounded-circle imageRounded`}>\n                            <div class={`text-muted mt-2`} style='font-size: 40px; line-height: 1;'>{summary.week}</div>\n                            <div class={`text-muted`} style='font-size: 10px; line-height: 0.8em;'>{summary.year}</div>\n                        </div>\n                        <div class='flex-grow-1 pl-3'>\n                            <h5 class='my-0'>{summary.week} - {summary.year}</h5>\n                            <small class='text-muted'>\n                                <i class='fas fa-wave-square' /> {summary.count}\n                                <i class='fas fa-road ml-2' /> {util.format(summary.distanceKm, 0)}km\n                                <i class='fas fa-mountain ml-2' /> {util.format(summary.elevation, 0)}m\n                                <i class='fas fa-stopwatch ml-2' /> {util.secToHms(summary.duration)}\n                                <i class='fas fa-tachometer-alt ml-2' /> {util.format(summary.speedAvg, 1)}km/t\n                            </small>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        );\n    }\n}\n\nexport default WorkoutSummary;\n","import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport { Text, Localizer, withText } from 'preact-i18n';\n\nimport Speed from '../../components/data/speed';\nimport Elevation from '../../components/data/elevation';\nimport Weight from '../../components/data/weight';\nimport Distance from '../../components/data/distance';\nimport Temperature from '../../components/data/temperature';\n\n@observer\nclass Garmin extends Component {\n    toggleDate = (e) => {\n        e.stopPropagation();\n        e.preventDefault();\n        const { showDate } = this.state;\n        this.setState({ showDate: !showDate });\n    }\n\n    ignoreGarminWorkout = async (e) => {\n        e.stopPropagation();\n        const id = e.target.parentElement.dataset.id || e.target.dataset.id;\n        const { garminActivityDetailsStore } = this.props.stores;\n\t\tawait garminActivityDetailsStore.ignoreWorkout(id);\n        this.loadGarminActivities();\n    }\n\n    importGarminWorkout = async (e) => {\n        e.stopPropagation();\n        const id = e.target.parentElement.dataset.id || e.target.dataset.id;\n        const { asTrack } = this.props;\n        const { garminActivityDetailsStore, workoutStore } = this.props.stores;\n\t\tconst { currentTeam } = workoutStore;\n        if (asTrack) {\n            await garminActivityDetailsStore.importTrack(id, currentTeam);\n        } else {\n            await garminActivityDetailsStore.importWorkout(id, currentTeam);\n        }\n        this.loadGarminActivities();\n        this.loadWorkouts();\n    }\n\n    async loadGarminActivities() {\n\t\tconst { garminActivityDetailsStore } = this.props.stores;\n\t\tgarminActivityDetailsStore.load({ query: { hideImported: 1 }});\n\t}\n\n    loadWorkouts = async () => {\n\t\tconst { workoutStore } = this.props.stores;\n\t\tconst { currentTeam } = workoutStore;\n\t\tawait workoutStore.load({ query: { team: currentTeam } });\n\t}\n\n    toggleDetail = () => {\n        const { showDetail = false } = this.state;\n        this.setState({\n            showDetail: !showDetail,\n        });\n    }\n\n    componentDidMount() {\n\t\tthis.loadGarminActivities();\n\t}\n\n    render() {\n        const { showDate, showDetail = false } = this.state;\n        const { activities = [], showDate: forceShowDate, asTrack = false } = this.props;\n\t\tconst { userStore, workoutStore } = this.props.stores;\n        const { currentTeam } = workoutStore;\n        const { team } = userStore;\n\n        const selectedTeam = userStore.findTeam(currentTeam || team.id);\n\n        if (!showDetail) {\n            if (activities && activities.length > 0) {\n                return (<>\n                    <div class='col-12 mb-3'>\n                        <button type='button' class='btn btn-block btn-outline-info' onClick={this.toggleDetail}>\n                            <div class={`float-right ml-2 text-center border rounded-circle imageRounded imageRoundedIcon`} style={`background-image: url('./assets/garmin-connect.png');`} />\n                            <Text id='workout.index.garmin-workouts'>Garmin workouts / not imported</Text> {activities.length}\n                        </button>\n                    </div>\n                </>);\n            }\n            return (<></>);\n        }\n\n        return (<>\n            <div class='col-12 mb-3'>\n                <div class='row'>\n                    {activities && activities.length > 0 && (\n                        <div\n                            class='col-12 border-top border-bottom pt-3 pb-3 my-2 bg-light'\n                        >\n                            <button type='button' class='float-right btn btn-sm btn-link' onClick={this.toggleDetail}>\n                                <i class='fas fa-caret-up' /> <Text id='garmin.hide-list'>Hide list</Text>\n                            </button>\n                            <h5><Text id='workout.index.garmin-workouts'>Garmin workouts / not imported</Text> {activities.length}</h5>\n                            {activities && activities.map(activity => {\n                                const { summary = {} } = activity;\n                                const startDate = util.parseInputDate(summary.startTimeInSeconds);\n\n                                return (<>\n                                    {/* <td>{util.secToHms(activity.moving_time)}</td> */}\n                                    {/* <td>{util.secToHms(activity.elapsed_time)}</td> */}\n\n                                    {/* {\n                                        \"durationInSeconds\": 616,\n                                        \"startTimeInSeconds\": 1602065947,\n                                        \"startTimeOffsetInSeconds\": 7200,\n                                        \"activityType\": \"ROAD_BIKING\",\n                                        \"averageSpeedInMetersPerSecond\": 0.152,\n                                        \"averagePaceInMinutesPerKilometer\": 109.649124, \n                                        \"activeKilocalories\": 1, \n                                        \"deviceName\": \"edge1000\", \n                                        \"distanceInMeters\": 94.02, \n                                        \"maxPaceInMinutesPerKilometer\": 14.6455765, \n                                        \"maxSpeedInMetersPerSecond\": 1.138, \n                                        \"startingLatitudeInDegree\": 61.00674974732101, \n                                        \"startingLongitudeInDegree\": 9.975536987185478, \n                                        \"totalElevationLossInMeters\": 2\n                                    } */}\n\n                                    <div class='col-12 d-flex mb-4 position-relative'>\n                                        <div class={`text-center border rounded-circle imageRounded`} style={`background-image: url(\"./assets/garmin-connect.png\"); border-width: 3px !important;`}>\n                                            &nbsp;\n                                        </div>\n                                        <div class='flex-grow-1 pl-3' style='line-height: 1.2em;'>\n                                            <h5 class='my-0 mb-1' style='line-height: 1.0em;'>{summary.deviceName}</h5>\n                                            {summary.activityType}<br />\n                                            <small class='text-muted'>\n                                                {startDate && <small onClick={this.toggleDate}>\n                                                    {forceShowDate || showDate ? util.formatDate(startDate, { locale: 'no-NB' }) : util.formatDistance(startDate, new Date(), { locale: 'no-NB' })}\n                                                </small>}\n                                                <span class='text-muted'>\n                                                    <i class='fas fa-road ml-2' /> <Distance stores={this.props.stores} value={summary.distanceInMeters / 1000} />\n                                                    <i class='fas fa-mountain ml-2' /> <Elevation stores={this.props.stores} value={summary.totalElevationGainInMeters} />\n                                                    <i class='fas fa-tachometer-alt ml-2' /> <Speed stores={this.props.stores} value={summary.averageSpeedInMetersPerSecond * 3.6} />\n                                                    <i class='fas fa-stopwatch ml-2' /> {util.secToHms(summary.durationInSeconds)}\n                                                </span>\n                                            </small>\n                                            <br />\n                                            <button class='btn btn-sm btn-block btn-primary' onClick={this.importGarminWorkout} data-id={activity.id}>\n                                                <i class='fas fa-file-import' /> {asTrack ? <Text id='garmin.import-track'>Import as track</Text> : <><Text id='garmin.import'>Import workout</Text> <i class='fas fa-arrow-right' /> {selectedTeam}</>} \n                                            </button>\n                                            <button class='btn btn-sm btn-link' onClick={this.ignoreGarminWorkout} data-id={activity.id}>\n                                                <i class='fas fa-trash-alt' /> <Text id='garmin.ignore'>Ignore workout</Text>\n                                            </button>\n                                        </div>\n                                    </div>\n                                </>);\n                            })}\n\n                            <button type='button' class='btn btn-block btn-primary mt-3' onClick={this.toggleDetail}>\n                                <i class='fas fa-caret-up' /> <Text id='garmin.hide-list'>Hide list</Text>\n                            </button>\n                        </div>\n                    )}\n\n                </div>\n            </div>\n        </>);\n    }\n}\n\nexport default Garmin;\n","import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport { Text, Localizer, withText } from 'preact-i18n';\n\nimport mu from '../../lib/musher-util';\nconst MARGIN_TOP = mu.marginTop(true);\nconst MARGIN_BOTTOM = mu.marginBottom();\nconst SUB_MENU_MARGIN_TOP = mu.subMenuMarginTop();\n\nimport Workout from '../../components/workout';\nimport WorkoutSummary from '../../components/workout/summary';\nimport WorkoutTotals from '../../components/workout/totals';\nimport WorkoutStatus from '../../components/workout/status';\nimport WorkoutGraph from '../../components/workout/graph';\nimport WorkoutTable from '../../components/workout/table';\nimport WorkoutCalendar from '../../components/workout/calendar';\nimport Teams from '../../components/team/teams';\nimport Gauge from '../../components/gauge';\nimport CalendarPlan from '../../components/workout/calendarPlan';\nimport Strava from '../../components/strava';\nimport Garmin from '../../components/garmin';\nimport Ad from '../../components/ad/';\n\nimport Speed from '../../components/data/speed';\nimport Elevation from '../../components/data/elevation';\nimport Weight from '../../components/data/weight';\nimport Distance from '../../components/data/distance';\nimport Temperature from '../../components/data/temperature';\n\nimport ScrollIntoView from '../../components/util/scrollIntoView';\n\nimport FastList from '../../components/team/fastList';\n\nfunction kmToMiles(value) {\n    return util.format(0.621371 * value, 1);\n}\n\nconst initialState = {\n\tloadedTime: 0,\n\tisLoading: false,\n\toffset: 0,\n\tlimit: 5,\n\tsubmenu: 'totals',\n\tworkoutFilter: () => true,\n\tsessionid: new Date().getTime(),\n};\n\nconst dataFields = ['id', 'type', 'user', 'team', 'title'];\n\n@observer\nclass Workouts extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            ...initialState,\n        };\n    }\n\n\tloadAll = async (props = this.props) => {\n\t\tconst { limit, offset } = this.state;\n\t\tthis.setState({ isLoading: true });\n\t\tconst { workoutStore, userStore, messageStore } = props.stores;\n\t\tconst { currentTeam } = workoutStore;\n\n\t\t// const currentMonth = new Date().getMonth() + 1;\n        // const { month = currentMonth, year = util.getYear(), team = currentTeam, dog = {} } = props;\n\n\t\t// const { year } = props;\n\t\tconst currentMonth = new Date().getMonth() + 1;\n        const currentYear = new Date().getFullYear();\n\t\tconst { month = currentMonth, year = currentYear } = props;\n\n        // await userStore.getInfo();\n\t\tawait Promise.all([\n\t\t\tthis.loadWorkouts({ team: currentTeam, year, month, limit, offset }),\n\t\t\tthis.loadWorkoutSummary(props),\n\t\t\tthis.loadWorkoutPlans(props),\n\t\t\tuserStore.getNotifications(),\n\t\t\tmessageStore.getUnReadMessages(),\n\t\t\tthis.loadStravaActivities(),\n\t\t\tthis.loadGarminActivities(),\n\t\t\tthis.loadTeams(props),\n\t\t]);\n\t\tthis.setState({\n\t\t\tloadedTime: new Date().getTime(),\n\t\t\tisLoading: false,\n\t\t});\n\t}\n\n\tchangeTeam = () => {\n        this.loadAll();\n\t}\n\n\tloadWorkouts = ({ team, year, month, limit, offset }) => {\n\t\tconst { workoutStore } = this.props.stores;\n\t\tconst append = offset > 0;\n\t\tworkoutStore.load({\n\t\t\tquery: {\n\t\t\t\tteam,\n\t\t\t\tyear,\n\t\t\t\tmonth,\n\t\t\t},\n\t\t\tlimit,\n\t\t\toffset,\n\t\t\taddData: ['publicTeams', 'publicUsers'],\n\t\t}, append);\n\t}\n\n    setLoadMore = () => {\n        const { workoutStore } = this.props.stores;\n\t\tconst { currentTeam } = workoutStore;\n\t\tconst currentMonth = new Date().getMonth() + 1;\n        const currentYear = new Date().getFullYear();\n\t\tconst { month = currentMonth, year = currentYear } = this.props;\n\n        workoutStore.setLoadMore(() => {\n            let { limit, offset } = this.state;\n            offset += limit;\n            this.setState({ offset });\n            this.loadWorkouts({ team: currentTeam, year, month, limit, offset });\n        });\n    }\n\n    unsetLoadMore = () => {\n        const { workoutStore } = this.props.stores;\n        workoutStore.setLoadMore(() => {});\n    }\n\n\tasync loadTeams(props = this.props) {\n\t\tconst { teamStore, workoutStore } = props.stores;\n\t\tconst { currentTeam } = workoutStore;\n\n\t\tconst currentMonth = new Date().getMonth() + 1;\n        const currentYear = new Date().getFullYear();\n\n\t\tconst { month = currentMonth, year = currentYear } = props;\n\t\tawait teamStore.load({ query: { team: currentTeam, skipMusherWorkoutSummary: true, year, month }, addData: ['workoutSummary'] });\n\t}\n\n\tasync loadStravaActivities() {\n\t\tconst { stravaActivityStore } = this.props.stores;\n\t\tstravaActivityStore.load({ query: { hideImported: 1 }});\n\t}\n\n\tasync loadGarminActivities() {\n\t\tconst { garminActivityDetailsStore } = this.props.stores;\n\t\tgarminActivityDetailsStore.load({ query: { hideImported: 1 }});\n\t}\n\n\tloadWorkoutPlans = async (props = this.props) => {\n\t\tthis.setState({ isLoading: true });\n\n\t\tconst currentMonth = new Date().getMonth() + 1;\n        const currentYear = new Date().getFullYear();\n\n\t\tconst { year = currentYear, month = currentMonth } = props;\n\t\tconst seasonStart = (month < 8 ? year - 1 : year);\n\n\t\tconst { workoutPlanStore, workoutStore, userStore } = props.stores;\n\t\tconst { currentTeam } = workoutStore;\n\n\t\tconst { user } = userStore;\n        const { settings = {} } = user;\n\t\tconst { imperial } = settings;\n\n\t\t// workoutPlanStore.updateItem('workoutPlans', []);\n\t\t// workoutPlanStore.updateItem('workoutPlan', {});\n\t\t// workoutPlanStore.resetGraphPlanWeekDistanceCurrent();\n\n\t\tif (currentTeam) {\n\t\t\tawait workoutPlanStore.load({\n\t\t\t\tquery: {\n\t\t\t\t\tteam: currentTeam,\n\t\t\t\t\tseasonYear: seasonStart,\n\t\t\t\t},\n\t\t\t\taddData: ['tips'],\n\t\t\t});\n\t\t\tconst { workoutPlans } = workoutPlanStore;\n\t\t\tconst workoutPlanCurrent = workoutPlans[0] || {};\n\t\t\tif (workoutPlanCurrent.id) {\n\t\t\t\tawait workoutPlanStore.load(workoutPlanCurrent.id);\n\t\t\t\tworkoutPlanStore.prepareWeekGraphs({ year, imperial });\n\t\t\t} else {\n\t\t\t\tworkoutPlanStore.updateKeyValue('workoutPlan', {});\n\t\t\t\tworkoutPlanStore.updateKeyValue('workoutPlans', []);\n\t\t\t\tworkoutPlanStore.resetGraphPlanWeekDistanceCurrent();\n\t\t\t}\n\t\t}\n\t\tthis.setState({ isLoading: false });\n\t}\n\n\tasync loadWorkoutSummary(props = this.props) {\n\t\tconst { userStore, workoutStore } = props.stores;\n\n\t\tconst currentMonth = new Date().getMonth() + 1;\n        const currentYear = new Date().getFullYear();\n\t\tconst { month = currentMonth, year = currentYear } = props;\n\n\t\tconst { currentTeam } = workoutStore;\n        await userStore.getWorkoutSummary({ team: currentTeam, year, month });\n\t\t// await userStore.getWorkoutSummaryDay({ month, year, team: currentTeam });\n\t\t// await userStore.getWorkoutSummaryDay({ month, year: year - 1, team: currentTeam });\n\t\tawait userStore.getWorkoutSummaryDay({ daysBack: 500, team: currentTeam });\n    }\n\n\tchooseSubmenu = (e) => {\n\t\tconst submenu = e.target.parentElement.dataset.menu || e.target.dataset.menu;\n\t\tthis.setState({ submenu });\n\t}\n\n\tchooseDay = ({ day, month, year }) => {\n\t\tconst { dd, mm, yyyy } = this.state;\n\t\tif (dd === day && mm === month && yyyy === year) {\n\t\t\treturn this.setState({\n\t\t\t\tworkoutFilter: () => true,\n\t\t\t\tdd: null,\n\t\t\t\tmm: null,\n\t\t\t\tyyyy: null,\n\t\t\t});\n\t\t}\n\t\tthis.setState({\n\t\t\tdd: day,\n\t\t\tmm: month,\n\t\t\tyyyy: year,\n\t\t\tworkoutFilter: (w) => {\n\t\t\t\tconst date = new Date(w.date);\n\t\t\t\tconst d = date.getDate();\n\t\t\t\tconst m = date.getMonth() + 1;\n\t\t\t\tconst y = date.getFullYear();\n\t\t\t\treturn d === parseInt(day, 10) && m === parseInt(month, 10) && y === parseInt(year, 10);\n\t\t\t},\n\t\t});\n\t}\n\n\trenderContent = ({ obj, idx }) => {\n        const { appState } = this.props.stores;\n        const { path } = appState;\n        const { hashtag } = this.props;\n\n        return (<>\n\t\t\t<Workout\n\t\t\t\tstores={this.props.stores}\n\t\t\t\tworkout={obj}\n\t\t\t\tshowDate={true}\n\t\t\t\twrapperClasses={'w-100'}\n\t\t\t\twrapperClassesRow={''}\n\t\t\t/>\n        </>);\n    }\n\n\t// Scroll views timer\n    setupIntersection = () => {\n        this.setState({\n            handleIntersection: mu.intersectionObserverCallback,\n        });\n        const { workoutStore } = this.props.stores;\n        this.scrollViewTimer = setInterval(() => workoutStore.postScrollview(mu.getIntersectionObserverHistory()), 30 * 1000);\n    }\n\n\tcomponentWillMount() {\n        this.setupIntersection();\n    }\n\n\tcomponentWillUnmount() {\n        const { workoutStore, stravaActivityStore, garminActivityDetailsStore } = this.props.stores;\n        workoutStore.postScrollview(mu.getIntersectionObserverHistory());\n        clearInterval(this.scrollViewTimer);\n        this.unsetLoadMore();\n\t\t// workoutStore.cleanupMemory();\n    }\n\t// /Scroll views timer\n\n\tcomponentDidMount() {\n\t\tconst { appState } = this.props.stores;\n\t\tthis.loadAll();\n\t\t// this.loadDogs();\n\t\t// this.loadTracks();\n\t\tappState.checkCordova();\n\t\tthis.setLoadMore();\n\t}\n\n\tcomponentWillReceiveProps(nextProps) {\n        // console.log('componentWillReceiveProps', nextProps);\n        if (nextProps.month !== this.props.month\n            || nextProps.year !== this.props.year\n            || nextProps.team !== this.props.team) {\n            this.loadAll(nextProps);\n        }\n    }\n\n\trender() {\n        const { scrolledDown } = this.props;\n\t\tconst { isLoading, submenu, handleIntersection, sessionid, loadedTime } = this.state;\n\t\tconst { userStore, appState, workoutStore, workoutPlanStore,\n\t\t\tstravaActivityStore, garminActivityDetailsStore } = this.props.stores;\n\t\tconst { workoutPlan, workoutPlans } = workoutPlanStore;\n\n\t\tconst { user, workoutSummaryWeekDay = [] } = userStore;\n        const { language = 'en', settings = {} } = user;\n        const MONTHS = mu.getMonths(language);\n\n\t\tconst currentMonth = new Date().getMonth() + 1;\n        const currentYear = new Date().getFullYear();\n\n\t\tconst { month = currentMonth, year = currentYear } = this.props;\n\t\tconst seasonStart = parseInt(month < 8 ? year - 1 : year, 10);\n\t\n\t\tconst { currentTeam } = workoutStore;\n\t\tconst currentTeamObject = userStore.findTeam(currentTeam, true);\n\n\t\tconst { darkmode } = appState;\n\t\tconst { workouts, cordovaActiveTrackingParams, isRunning, totalDistance, currentSpeed, totalTime } = workoutStore;\n\n\t\tconst { workoutFilter } = this.state;\n\t\tconst workoutsFiltered = workouts.filter(workoutFilter);\n\n\t\tconst planMonth = workoutPlanStore.sumWorkoutPlanMonth(parseInt(year, 10), parseInt(month, 10)) || 0;\n\t\tconst summaryMonth = userStore.findWorkoutSummaryMonth(parseInt(year, 10), parseInt(month, 10), 'distanceKm', true) || 0;\n\t\tlet percentComplete;\n\t\tif (planMonth) {\n\t\t\tpercentComplete = Math.floor(summaryMonth / planMonth * 100);\n\t\t}\n\t\tconst totalCountMonth = userStore.findWorkoutSummaryMonth(parseInt(year, 10), parseInt(month, 10), 'count', true) || 0;\n\t\tconst totalDistanceKmMonth = userStore.findWorkoutSummaryMonth(parseInt(year, 10), parseInt(month, 10), 'distanceKm', true) || 0;\n\t\tconst totalDurationMonth = userStore.findWorkoutSummaryMonth(parseInt(year, 10), parseInt(month, 10), 'duration', true) || 0;\n\t\tconst totalSpeedavgMonth = userStore.findWorkoutSummaryMonth(parseInt(year, 10), parseInt(month, 10), 'speedAvg', true) || 0;\n\t\tconst totalElevationMonth = userStore.findWorkoutSummaryMonth(parseInt(year, 10), parseInt(month, 10), 'elevation', true) || 0;\n\n\t\tconst { stravaActivities = [] } = stravaActivityStore;\n\t\tconst { garminActivityDetails = [] } = garminActivityDetailsStore;\n\n\t\treturn (\n\t\t\t<div class='container-fluid' style={`margin-bottom: ${MARGIN_BOTTOM}; margin-top: ${MARGIN_TOP};`}>\n\t\t\t\t<div class='row fixed-top pt-2' style={`margin-top: ${scrolledDown > 0 ? 0 : SUB_MENU_MARGIN_TOP}; background-color: ${darkmode ? '#191d21' : '#f8f9fa'}; transition: all 0.3s ease-in-out;`}>\n\t\t\t\t\t<div class='col text-center border-bottom border-primary subtopmenu'>\n\t\t\t\t\t\t<a href='/workouts/' class='text-primary stretched-link'><nobr><i class='fas fa-chart-line' /> <Text id='workout.index.dashboard'>Oversikt</Text></nobr></a>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class='col text-center subtopmenu'>\n\t\t\t\t\t\t<a href='/workouts/list' class='text-secondary stretched-link'><nobr><i class='fas fa-list' /> <Text id='workout.index.list'>Liste</Text></nobr></a>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class='col text-center subtopmenu'>\n\t\t\t\t\t\t<a href='/workouts/plan' class='text-secondary stretched-link'><nobr><i class='fas fa-calendar-alt' /> <Text id='workout.index.plan'>Plan</Text></nobr></a>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\n\t\t\t\t{/* <xmp>\n\t\t\t\ttotalTime: {totalTime}<br />\n\t\t\t\tcordovaActiveTrackingParams: {JSON.stringify(cordovaActiveTrackingParams)}<br />\n\t\t\t\t</xmp> */}\n\n\t\t\t\t{isRunning && cordovaActiveTrackingParams && <>\n\t\t\t\t\t<div class='row'>\n\t\t\t\t\t\t<div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 border-bottom bg-light py-4'>\n\t\t\t\t\t\t\t<h1 class='text-success font-weight-bold'>\n\t\t\t\t\t\t\t\tTracking\n\t\t\t\t\t\t\t\t<div class='spinner-grow ml-3' role='status' />\n\t\t\t\t\t\t\t</h1>\n\t\t\t\t\t\t\t<div class='row mb-3'>\n\t\t\t\t\t\t\t\t<div class='col-4 text-center font-weight-bold' style='font-size: 1.3em;'>{util.secToHms(totalTime)}</div>\n\t\t\t\t\t\t\t\t<div class='col-4 text-center font-weight-bold' style='font-size: 1.3em;'>\n\t\t\t\t\t\t\t\t\t<Speed stores={this.props.stores} value={currentSpeed * 3.6} />\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class='col-4 text-center font-weight-bold' style='font-size: 1.3em;'>\n\t\t\t\t\t\t\t\t\t<Distance stores={this.props.stores} value={totalDistance / 1000} />\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<a class='btn btn-block btn-danger' href='/workouts/tracking'><Text id='workouts.go-to-tracking'>Go to tracking</Text></a>\n\t\t\t\t\t\t\t{/* {JSON.stringify(cordovaActiveTrackingParams)}\n\t\t\t\t\t\t\t{JSON.stringify(isRunning)} */}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</>}\n\n\t\t\t\t<div class='row'>\n\t\t\t\t\t<div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 border-bottom'>\n\t\t\t\t\t\t<Teams stores={this.props.stores} callback={this.changeTeams} key={`teams-${currentTeam}`} />\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-2 mb-2'>\n\t\t\t\t\t\t<a class='btn btn-primary btn-sm float-right'\n\t\t\t\t\t\t\thref='/workouts/edit/new'\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<i class='fas fa-plus' /> <Text id='workout.index.add-workout'>Legg til treningstur</Text>\n\t\t\t\t\t\t</a>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 my-1'>\n\t\t\t\t\t\t<div class='row'>\n\t\t\t\t\t\t\t<div class='w-100 overflow-hidden'>\n                                <div\n                                    class='d-flex flex-row flex-nowrap pb-2 px-1'\n                                    style='overflow: auto; scroll-snap-type: x mandatory;'\n                                >\n\t\t\t\t\t\t\t\t\t<div class='col px-0 pt-2'>\n\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\tclass={`btn btn-block rounded-pill-left rounded-none ${submenu === 'totals' ? 'btn-primary' : 'btn-outline-primary'} text-nowrap`}\n\t\t\t\t\t\t\t\t\t\t\tstyle='text-overflow: ellipsis; overflow: hidden;'\n\t\t\t\t\t\t\t\t\t\t\tdata-menu='totals'\n\t\t\t\t\t\t\t\t\t\t\tonClick={this.chooseSubmenu}\n\t\t\t\t\t\t\t\t\t\t><i class='fas fa-tachometer-alt' /> <Text id='workouts.totals'>Totaler</Text></button>\n                                        {submenu === 'totals' && <ScrollIntoView horizontal={'center'} vertical={'end'} />}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div class='col px-0 pt-2'>\n\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\tclass={`btn btn-block rounded-none ${submenu === 'seasontotals' ? 'btn-primary' : 'btn-outline-primary'} text-nowrap`}\n\t\t\t\t\t\t\t\t\t\t\tstyle='text-overflow: ellipsis; overflow: hidden;'\n\t\t\t\t\t\t\t\t\t\t\tdata-menu='seasontotals'\n\t\t\t\t\t\t\t\t\t\t\tonClick={this.chooseSubmenu}\n\t\t\t\t\t\t\t\t\t\t><i class='fas fa-tachometer-alt' /> <Text id='workouts.seasontotals'>Season totals</Text></button>\n                                        {submenu === 'seasontotals' && <ScrollIntoView horizontal={'center'} vertical={'end'} />}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div class='col px-0 pt-2'>\n\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\tclass={`btn btn-block rounded-none ${submenu === 'analysis' ? 'btn-primary' : 'btn-outline-primary'} text-nowrap`}\n\t\t\t\t\t\t\t\t\t\t\tstyle='text-overflow: ellipsis; overflow: hidden;'\n\t\t\t\t\t\t\t\t\t\t\tdata-menu='analysis'\n\t\t\t\t\t\t\t\t\t\t\tonClick={this.chooseSubmenu}\n\t\t\t\t\t\t\t\t\t\t><i class='fas fa-chart-area' /> <Text id='workouts.analysis'>Analyser</Text></button>\n                                        {submenu === 'analysis' && <ScrollIntoView horizontal={'center'} vertical={'end'} />}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div class='col px-0 pt-2'>\n\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\tclass={`btn btn-block rounded-none ${submenu === 'table' ? 'btn-primary' : 'btn-outline-primary'} text-nowrap`}\n\t\t\t\t\t\t\t\t\t\t\tstyle='text-overflow: ellipsis; overflow: hidden;'\n\t\t\t\t\t\t\t\t\t\t\tdata-menu='table'\n\t\t\t\t\t\t\t\t\t\t\tonClick={this.chooseSubmenu}\n\t\t\t\t\t\t\t\t\t\t><i class='fas fa-table' /> <Text id='workouts.table'>Tabell</Text></button>\n                                        {submenu === 'table' && <ScrollIntoView horizontal={'center'} vertical={'end'} />}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div class='col px-0 pt-2'>\n\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\tclass={`btn btn-block rounded-none ${submenu === 'workoutplan' ? 'btn-primary' : 'btn-outline-primary'} text-nowrap`}\n\t\t\t\t\t\t\t\t\t\t\tstyle='text-overflow: ellipsis; overflow: hidden;'\n\t\t\t\t\t\t\t\t\t\t\tdata-menu='workoutplan'\n\t\t\t\t\t\t\t\t\t\t\tonClick={this.chooseSubmenu}\n\t\t\t\t\t\t\t\t\t\t><i class='fas fa-calendar-alt' /> <Text id='workouts.workoutplan'>Treningsplan</Text></button>\n                                        {submenu === 'workoutplan' && <ScrollIntoView horizontal={'center'} vertical={'end'} />}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div class='col px-0 pt-2'>\n\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\tclass={`btn btn-block rounded-pill-right rounded-none ${submenu === 'calendar' ? 'btn-primary' : 'btn-outline-primary'} text-nowrap`}\n\t\t\t\t\t\t\t\t\t\t\tstyle='text-overflow: ellipsis; overflow: hidden;'\n\t\t\t\t\t\t\t\t\t\t\tdata-menu='calendar'\n\t\t\t\t\t\t\t\t\t\t\tonClick={this.chooseSubmenu}\n\t\t\t\t\t\t\t\t\t\t><i class='fas fa-calendar-alt' /> <Text id='workouts.calendar'>Kalender</Text></button>\n                                        {submenu === 'calendar' && <ScrollIntoView horizontal={'center'} vertical={'end'} />}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t{submenu === 'totals' && <>\n\t\t\t\t\t\t<WorkoutCalendar stores={this.props.stores} isLoading={isLoading}\n\t\t\t\t\t\t\tyear={year}\n\t\t\t\t\t\t\tmonth={month}\n\t\t\t\t\t\t\tchooseDayFunction={this.chooseDay}\n\t\t\t\t\t\t\tkey={`calendar-header-${year}-${month}-${currentTeam}-${loadedTime}-${workoutSummaryWeekDay.length}`}\n\t\t\t\t\t\t\thideTable={submenu === 'calendar' ? 0 : 1}\n\t\t\t\t\t\t\thideSummary={submenu === 'calendar' ? 0 : 1}\n\t\t\t\t\t\t\tskipLoadSummary={submenu === 'calendar' ? 0 : 1}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-2 mb-2'>\n\t\t\t\t\t\t\t<div class='row'>\n\t\t\t\t\t\t\t\t<div class='col-4 text-center'>\n\t\t\t\t\t\t\t\t\t{planMonth >= 0 && (\n\t\t\t\t\t\t\t\t\t\t<Gauge \n\t\t\t\t\t\t\t\t\t\t\tkey={`gauge-${percentComplete}`}\n\t\t\t\t\t\t\t\t\t\t\tradius={55}\n\t\t\t\t\t\t\t\t\t\t\tpercent={percentComplete}\n\t\t\t\t\t\t\t\t\t\t\tprefix='%'\n\t\t\t\t\t\t\t\t\t\t\ttotal={settings.imperial ? `${kmToMiles(planMonth)} mi` : `${util.format(planMonth, 0)} km`}\n\t\t\t\t\t\t\t\t\t\t\tcompleted={settings.imperial ? `${kmToMiles(summaryMonth)} mi` : `${util.format(summaryMonth, 0)} km`}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t)}<br />\n\t\t\t\t\t\t\t\t\t<small class='text-muted'><Text id='workout.index.plan'>Treningsplan</Text></small>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class='col-4 text-center'>\n\t\t\t\t\t\t\t\t\t<h5><span class='text-muted font-weight-lighter'><i class='fas fa-road' /></span></h5>\n\t\t\t\t\t\t\t\t\t<h3>\n\t\t\t\t\t\t\t\t\t\t<Distance stores={this.props.stores} value={totalDistanceKmMonth} smallUnit={true} />\n\t\t\t\t\t\t\t\t\t</h3>\n\t\t\t\t\t\t\t\t\t<small class='text-muted'>\n\t\t\t\t\t\t\t\t\t\t<Text id='workout.calendar.distance'>Distanse</Text>\n\t\t\t\t\t\t\t\t\t</small>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class='col-4 text-center'>\n\t\t\t\t\t\t\t\t\t<h5><span class='text-muted font-weight-lighter'><i class='fas fa-tachometer-alt ml-3' /></span></h5>\n\t\t\t\t\t\t\t\t\t<h3>\n\t\t\t\t\t\t\t\t\t\t<Speed stores={this.props.stores} value={totalSpeedavgMonth} smallUnit={true} />\n\t\t\t\t\t\t\t\t\t</h3>\n\t\t\t\t\t\t\t\t\t<small class='text-muted'>\n\t\t\t\t\t\t\t\t\t\t<Text id='workout.calendar.avg-speed'>Gj.snittsfart</Text>\n\t\t\t\t\t\t\t\t\t</small>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class='col-12 text-center'>\n\t\t\t\t\t\t\t\t\t<span class='text-muted font-weight-lighter'><i class='fas fa-running' /> </span> {totalCountMonth}\n\t\t\t\t\t\t\t\t\t<span class='text-muted font-weight-lighter'><i class='fas fa-clock ml-3' /></span> {util.secToHms(totalDurationMonth)}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class='col-12'>\n\t\t\t\t\t\t\t<Ad stores={this.props.stores} url={this.props.url} section={submenu} />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</>}\n\n\t\t\t\t\t{submenu === 'seasontotals' && <>\n\t\t\t\t\t\t{/* <WorkoutCalendar stores={this.props.stores} isLoading={isLoading}\n\t\t\t\t\t\t\tyear={year}\n\t\t\t\t\t\t\tmonth={month}\n\t\t\t\t\t\t\tchooseDayFunction={this.chooseDay}\n\t\t\t\t\t\t\tkey={`calendar-header-${year}-${month}-${currentTeam}-${loadedTime}-${workoutSummaryWeekDay.length}`}\n\t\t\t\t\t\t\thideTable={submenu === 'calendar' ? 0 : 1}\n\t\t\t\t\t\t\thideSummary={submenu === 'calendar' ? 0 : 1}\n\t\t\t\t\t\t\tskipLoadSummary={submenu === 'calendar' ? 0 : 1}\n\t\t\t\t\t\t/> */}\n\t\t\t\t\t\t<div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 my-3 text-center'>\n\t\t\t\t\t\t\t<h3>\n\t\t\t\t\t\t\t\t<i class='fas fa-tachometer-alt' /> <Text id='workouts.seasontotals'>Season totals</Text>\n\t\t\t\t\t\t\t</h3>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3'>\n\t\t\t\t\t\t\t<WorkoutTotals\n\t\t\t\t\t\t\t\tstores={this.props.stores}\n\t\t\t\t\t\t\t\tcurrentTeam={currentTeam}\n\t\t\t\t\t\t\t\tyear={year}\n\t\t\t\t\t\t\t\tmonth={month}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<WorkoutStatus\n\t\t\t\t\t\t\t\tstores={this.props.stores}\n\t\t\t\t\t\t\t\tcurrentTeam={currentTeam}\n\t\t\t\t\t\t\t\tyear={year}\n\t\t\t\t\t\t\t\tmonth={month}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class='col-12'>\n\t\t\t\t\t\t\t<Ad stores={this.props.stores} url={this.props.url} section={submenu} />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</>}\n\n\t\t\t\t\t{submenu === 'analysis' && <>\n\t\t\t\t\t\t{/* <WorkoutCalendar stores={this.props.stores} isLoading={isLoading}\n\t\t\t\t\t\t\tyear={year}\n\t\t\t\t\t\t\tmonth={month}\n\t\t\t\t\t\t\tchooseDayFunction={this.chooseDay}\n\t\t\t\t\t\t\tkey={`calendar-header-${year}-${month}-${currentTeam}-${loadedTime}-${workoutSummaryWeekDay.length}`}\n\t\t\t\t\t\t\thideTable={submenu === 'calendar' ? 0 : 1}\n\t\t\t\t\t\t\thideSummary={submenu === 'calendar' ? 0 : 1}\n\t\t\t\t\t\t\tskipLoadSummary={submenu === 'calendar' ? 0 : 1}\n\t\t\t\t\t\t/> */}\n\t\t\t\t\t\t<div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 my-3 text-center'>\n\t\t\t\t\t\t\t<h3>\n\t\t\t\t\t\t\t\t<i class='fas fa-chart-area' /> <Text id='workouts.analysis'>Analyser</Text>\n\t\t\t\t\t\t\t</h3>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3'>\n\t\t\t\t\t\t\t<WorkoutGraph\n\t\t\t\t\t\t\t\tstores={this.props.stores}\n\t\t\t\t\t\t\t\tisLoading={isLoading}\n\t\t\t\t\t\t\t\tyear={year}\n\t\t\t\t\t\t\t\tmonth={month}\n\t\t\t\t\t\t\t\tkey={`graph-${workoutPlan.id}-${workoutPlans.length}-${settings.imperial}`}\n\t\t\t\t\t\t\t\tshowExtra={true}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class='col-12'>\n\t\t\t\t\t\t\t<Ad stores={this.props.stores} url={this.props.url} section={submenu} />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</>}\n\n\t\t\t\t\t{submenu === 'table' && <>\n\t\t\t\t\t\t{/* <WorkoutCalendar stores={this.props.stores} isLoading={isLoading}\n\t\t\t\t\t\t\tyear={year}\n\t\t\t\t\t\t\tmonth={month}\n\t\t\t\t\t\t\tchooseDayFunction={this.chooseDay}\n\t\t\t\t\t\t\tkey={`calendar-header-${year}-${month}-${currentTeam}-${loadedTime}-${workoutSummaryWeekDay.length}`}\n\t\t\t\t\t\t\thideTable={submenu === 'calendar' ? 0 : 1}\n\t\t\t\t\t\t\thideSummary={submenu === 'calendar' ? 0 : 1}\n\t\t\t\t\t\t\tskipLoadSummary={submenu === 'calendar' ? 0 : 1}\n\t\t\t\t\t\t/> */}\n\t\t\t\t\t\t<div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 my-3 text-center'>\n\t\t\t\t\t\t\t<h3>\n\t\t\t\t\t\t\t\t<i class='fas fa-table' /> <Text id='workouts.table'>Tabell</Text>\n\t\t\t\t\t\t\t</h3>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3'>\n\t\t\t\t\t\t\t<WorkoutTable\n\t\t\t\t\t\t\t\tstores={this.props.stores}\n\t\t\t\t\t\t\t\tisLoading={isLoading}\n\t\t\t\t\t\t\t\tyear={year}\n\t\t\t\t\t\t\t\tmonth={month}\n\t\t\t\t\t\t\t\tkey={`table-${workoutPlan.id}-${workoutPlans.length}`}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class='col-12'>\n\t\t\t\t\t\t\t<Ad stores={this.props.stores} url={this.props.url} section={submenu} />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</>}\n\n\t\t\t\t\t{submenu === 'calendar' && <>\n\t\t\t\t\t\t<WorkoutCalendar stores={this.props.stores} isLoading={isLoading}\n\t\t\t\t\t\t\tyear={year}\n\t\t\t\t\t\t\tmonth={month}\n\t\t\t\t\t\t\tchooseDayFunction={this.chooseDay}\n\t\t\t\t\t\t\tkey={`calendar-header-${year}-${month}-${currentTeam}-${loadedTime}-${workoutSummaryWeekDay.length}`}\n\t\t\t\t\t\t\thideTable={submenu === 'calendar' ? 0 : 1}\n\t\t\t\t\t\t\thideSummary={submenu === 'calendar' ? 0 : 1}\n\t\t\t\t\t\t\tskipLoadSummary={submenu === 'calendar' ? 0 : 1}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<div class='col-12'>\n\t\t\t\t\t\t\t<Ad stores={this.props.stores} url={this.props.url} section={submenu} />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</>}\n\n\t\t\t\t\t{submenu === 'workoutplan' && <>\n\t\t\t\t\t\t<CalendarPlan stores={this.props.stores}\n\t\t\t\t\t\t\tbasehref='/workouts/'\n\t\t\t\t\t\t\tmonth={month}\n\t\t\t\t\t\t\tyear={year}\n\t\t\t\t\t\t\tkey={`${workoutPlan.id || seasonStart}-${currentTeam}-${month}-${year}-${loadedTime}`}\n\t\t\t\t\t\t\tshowNavigation={true}\n\t\t\t\t\t\t\tshowHeader={true}\n\t\t\t\t\t\t\tcurrentTeam={currentTeam}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<div class='col-12'>\n\t\t\t\t\t\t\t<Ad stores={this.props.stores} url={this.props.url} section={submenu} />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</>}\n\n\t\t\t\t</div>\n\n\t\t\t\t{submenu === 'totals' && <>\n\t\t\t\t\t<div class='row mt-3'>\n\t\t\t\t\t\t<div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-4'>\t\t\n\t\t\t\t\t\t\t<div class='row'>\n\t\t\t\t\t\t\t\t{user && user.strava && <>\n\t\t\t\t\t\t\t\t\t<Strava stores={this.props.stores} activities={stravaActivities} key={`strava-${currentTeam}-${stravaActivities.length}`} />\n\t\t\t\t\t\t\t\t</>}\n\t\t\t\t\t\t\t\t{user && user.garmin && <>\n\t\t\t\t\t\t\t\t\t<Garmin stores={this.props.stores} activities={garminActivityDetails} key={`garmin-${currentTeam}-${garminActivityDetails.length}`} />\n\t\t\t\t\t\t\t\t</>}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class='row'>\n\t\t\t\t\t\t{workoutsFiltered && workoutsFiltered.length > 0 && <div class='col-12 mb-4'>\n\t\t\t\t\t\t\t<div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 px-0 mt-4'>\t\t\n\t\t\t\t\t\t\t\t<h5>\n\t\t\t\t\t\t\t\t\t{/* <Text id='workout.index.last-workouts' fields={{ total: workoutsFiltered.length, month: MONTHS[month - 1], year }}>\n\t\t\t\t\t\t\t\t\t\tTreningsturer {MONTHS[month - 1]} {year} - {workoutsFiltered.length} stk\n\t\t\t\t\t\t\t\t\t</Text> */}\n\t\t\t\t\t\t\t\t\t{currentTeamObject && currentTeamObject.name && <div>\n\t\t\t\t\t\t\t\t\t\t<small class='font-weight-lighter'>(<Text id='workout.index.filtered-by'>Filtered by</Text>: {currentTeamObject.name})</small>\n\t\t\t\t\t\t\t\t\t</div>}\n\t\t\t\t\t\t\t\t</h5>\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t<FastList\n\t\t\t\t\t\t\t\tdata={workoutsFiltered}\n\t\t\t\t\t\t\t\twrapperClassNames={'row pb-4'}\n\t\t\t\t\t\t\t\tcontentClassNames={`col-12 col-sm-8 col-lg-6 offset-sm-2 offset-lg-3 my-1 position-relative rounded rounded-lg py-3 bg-${darkmode ? 'black' : 'white'} shadow-sm`}\n\t\t\t\t\t\t\t\trenderContent={this.renderContent}\n\t\t\t\t\t\t\t\tdataFields={dataFields}\n\t\t\t\t\t\t\t\tdataValues={{ type: '11' }}\n\t\t\t\t\t\t\t\thandleIntersection={handleIntersection}\n\t\t\t\t\t\t\t\tsessionid={sessionid}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t{/* {workoutsFiltered && workoutsFiltered.map(workout => (\n\t\t\t\t\t\t\t\t<Workout stores={this.props.stores} workout={workout} />\n\t\t\t\t\t\t\t))} */}\n\t\t\t\t\t\t</div>}\n\n\t\t\t\t\t\t{!workouts || workouts.length === 0 && <div class='col-12 mb-4 text-center pt-5 pb-5'>\n\t\t\t\t\t\t\t<h1 class='text-muted'><i class='fas fa-running' /></h1>\n\t\t\t\t\t\t\t<h5 class='text-muted font-weight-lighter'>\n\t\t\t\t\t\t\t\t<Text id='workouts.no-workouts' fields={{ month: MONTHS[month - 1], year }}>Ingen treningsturer registrert...</Text>\n\t\t\t\t\t\t\t</h5>\n\t\t\t\t\t\t</div>}\n\t\t\t\t\t</div>\n\t\t\t\t</>}\t\t\t\n\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nexport default Workouts;\n","import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport linkState from 'linkstate';\nimport { Text, Localizer, withText } from 'preact-i18n';\n\nimport Speed from '../../components/data/speed';\nimport Elevation from '../../components/data/elevation';\nimport Weight from '../../components/data/weight';\nimport Distance from '../../components/data/distance';\nimport Temperature from '../../components/data/temperature';\n\nimport mu from '../../lib/musher-util';\n\nconst RED_DAYS = [0, 6];\n\n@observer\nclass Calendar extends Component {\n\tsetFocus = () => {\n\t\tif (this.inputRef) {\n\t\t\tthis.inputRef.focus();\n\t\t}\n\t}\n\teditMonth = (e) => {\n\t\tconst month = e.target.parentElement.dataset.month || e.target.dataset.month;\n\t\tconst year = e.target.parentElement.dataset.year || e.target.dataset.year;\n\t\tconst distance = e.target.parentElement.dataset.distance || e.target.dataset.distance;\n\t\t// console.log({ month, year });\n\t\tthis.setState({\n\t\t\tshowInput: true,\n\t\t\tinputYear: year,\n\t\t\tinputMonth: month,\n\t\t\tinputDay: null,\n\t\t\tinputWeek: null,\n\t\t\tnewDistance: distance || null,\n\t\t}, () => this.setFocus());\n\t}\n\n\teditWeek = (e) => {\n\t\tconst week = e.target.parentElement.dataset.week || e.target.dataset.week;\n\t\tconst year = e.target.parentElement.dataset.year || e.target.dataset.year;\n\t\tconst distance = e.target.parentElement.dataset.distance || e.target.dataset.distance;\n\t\t// console.log({ week, year });\n\t\tthis.setState({\n\t\t\tshowInput: true,\n\t\t\tinputYear: year,\n\t\t\tinputWeek: week,\n\t\t\tinputMonth: null,\n\t\t\tinputDay: null,\n\t\t\tnewDistance: distance || null,\n\t\t}, () => this.setFocus());\n\t}\n\n\teditDay = (e) => {\n\t\tconst day = e.target.parentElement.dataset.day || e.target.dataset.day;\n\t\tconst month = e.target.parentElement.dataset.month || e.target.dataset.month;\n\t\tconst year = e.target.parentElement.dataset.year || e.target.dataset.year;\n\t\tconst week = e.target.parentElement.dataset.week || e.target.dataset.week;\n\t\tconst distance = e.target.parentElement.dataset.distance || e.target.dataset.distance;\n\t\t// console.log({ day, month, year });\n\t\tthis.setState({\n\t\t\tshowInput: true,\n\t\t\tinputYear: year,\n\t\t\tinputMonth: month,\n\t\t\tinputDay: day,\n\t\t\tinputWeek: week,\n\t\t\tnewDistance: distance || null,\n\t\t}, () => this.setFocus());\n\t}\n\n\tsaveDistance = async () => {\n\t\tconst { workoutPlanStore, workoutStore, userStore } = this.props.stores;\n\t\tconst { currentTeam } = workoutStore;\n\t\tconst teamName = userStore.findTeam(currentTeam) || '';\n\t\tconst { year, month } = this.props;\n\t\tconst { workoutPlans } = workoutPlanStore;\n\t\tconst workoutPlanCurrent = workoutPlans[0] || {};\n\t\tconst { inputYear, inputMonth, inputWeek, inputDay, newDistance } = this.state;\n\t\t// console.log({ showInput, inputYear, inputMonth, inputWeek, inputDay, newDistance });\n\n\t\tconst currentMonth = month || new Date().getMonth() + 1;\n\t\tconst currentYear = year || util.getYear();\n\t\tconst seasonStart = parseInt(currentMonth < 8 ? currentYear - 1 : currentYear, 10);\n\n\t\tif (!workoutPlanCurrent.id) {\n\t\t\tconst response = await workoutPlanStore.insert({\n\t\t\t\ttitle: `Workout plan for ${seasonStart} - ${seasonStart + 1}: ${teamName}`,\n\t\t\t\tteam: currentTeam,\n\t\t\t\tseasonYear: seasonStart,\n\t\t\t\tseasonMonth: 6,\n\t\t\t});\n\t\t\tconst { id: newId } = response.data;\n\t\t\tawait workoutPlanStore.load(newId);\n\t\t} else {\n\t\t\tawait workoutPlanStore.load(workoutPlanCurrent.id);\n\t\t}\n\t\tconst { workoutPlan } = workoutPlanStore;\n\t\tconst { id } = workoutPlan;\n\t\t// console.log({ id });\n\n\t\tlet field;\n\t\tif (inputYear) {\n\t\t\tif (inputDay) {\n\t\t\t\tfield = 'days';\n\t\t\t} else {\n\t\t\t\tfield = 'weeks';\n\t\t\t}\n\t\t}\n\t\tawait workoutPlanStore.saveField(id, field, {\n\t\t\tyear: inputYear,\n\t\t\tmonth: inputMonth,\n\t\t\tday: inputDay,\n\t\t\tweek: inputWeek,\n\t\t\tdistance: newDistance,\n\t\t});\n\t\tawait workoutPlanStore.load(id);\n\n\t\tthis.resetInput(true);\n\t}\n\n\tresetInput = (nextDay) => {\n\t\tif (nextDay) {\n\t\t\tconst { inputYear, inputMonth, inputDay } = this.state;\n\t\t\tconst nextDay = util.addDays(new Date(inputYear, inputMonth - 1, inputDay, 0, 0, 0, 0), 1);\n\t\t\tthis.setState({\n\t\t\t\tshowInput: true,\n\t\t\t\tinputYear: nextDay.getFullYear(),\n\t\t\t\tinputMonth: nextDay.getMonth() + 1,\n\t\t\t\tinputDay: nextDay.getDate(),\n\t\t\t\tinputWeek: util.getWeek(nextDay),\n\t\t\t\tnewDistance: null,\n\t\t\t});\n\t\t\tthis.setFocus();\n\t\t} else {\n\t\t\tthis.setState({\n\t\t\t\tshowInput: false,\n\t\t\t\tinputYear: null,\n\t\t\t\tinputMonth: null,\n\t\t\t\tinputDay: null,\n\t\t\t\tinputWeek: null,\n\t\t\t\tnewDistance: null,\n\t\t\t});\n\t\t}\n\t}\n\n\tcheckKeydown = (e) => {\n\t\tswitch (e.key) {\n\t\t\tcase 'Enter':\n\t\t\t\tthis.saveDistance();\n\t\t\t\tbreak;\n\n\t\t\tcase 'Escape':\n\t\t\t\tthis.resetInput();\n\t\t\t\tbreak;\n\t\t\n\t\t\tdefault:\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\tcomponentDidMount() {\n\t\tthis.updateWorkoutPlanTips();\n\t}\n\n\tupdateWorkoutPlanTips = () => {\n\t\t// console.log('updateWorkoutPlanTips');\n\t\tconst { userStore } = this.props.stores;\n\t\tconst { user = {} } = userStore;\n\t\tconst { settings = {} } = user;\n\t\tthis.setState({ hideWorkoutPlanTips: settings.hideWorkoutPlanTips });\n\t}\n\n\ttoggleTips = async () => {\n\t\tconst { hideWorkoutPlanTips } = this.state;\n\t\tconst { userStore } = this.props.stores;\n\t\tconst newValue = hideWorkoutPlanTips === 1 ? 0 : 1;\n\t\tthis.setState({ hideWorkoutPlanTips: newValue });\n\t\tawait userStore.updateSetting({ 'settings.hideWorkoutPlanTips': newValue }, { hideWorkoutPlanTips: newValue });\n\t}\n\n\trender() {\n\t\tconst { hideWorkoutPlanTips } = this.state;\n\t\tconst { appState, workoutPlanStore, userStore, workoutStore, teamStore } = this.props.stores;\n\t\tconst { user } = userStore;\n\t\tconst { language = 'en' } = user;\n\t\tconst { darkmode } = appState;\n\t\tconst DAYS = mu.getDays(language);\n\t\tconst MONTHS = mu.getMonths(language);\n\n\t\tconst { showInput, inputYear, inputMonth, inputWeek, inputDay, newDistance } = this.state;\n\n        const currentDay = new Date().getDate();\n        const currentMonth = new Date().getMonth() + 1;\n        const currentYear = new Date().getFullYear();\n\n\t\tconst currentEpoch = new Date().getTime();\n\t\tconst { month = currentMonth, year = currentYear, dog, basehref, showNavigation = true, showHeader = true, currentTeam } = this.props;\n\n\t\tconst seasonStart = parseInt(month < 8 ? year - 1 : year, 10);\n\n        const monthNum = parseInt(month, 10);\n        const yearNum = parseInt(year, 10);\n        const { month: nextMonth, year: nextYear } = mu.getNextMonth(monthNum, yearNum);\n        const { month: prevMonth, year: prevYear } = mu.getPrevMonth(monthNum, yearNum);\n\n        const daysOfMonth = util.getDaysInMonth(month, year);\n        const weeksInMonth = util.getWeeksInMonth(month, year);\n        const firstWeek = weeksInMonth[0].week;\n        const daysOfWeek = util.getDaysInWeek(firstWeek, year, month);\n        let totalDistanceKmMonth = 0;\n\t\tlet totalDistanceKmMonthPlan = 0;\n\t\tlet totalWorkoutDistanceKmMonth = 0;\n\n\t\tconst monthEpoch = daysOfMonth[daysOfMonth.length - 1].getTime();\n\t\tconst isMonthInTheFuture = monthEpoch > currentEpoch;\n\n\t\tconst summaryMonth = workoutPlanStore.findWorkoutPlanSummaryMonth(year, monthNum) || {};\n\t\tconst { workoutPlan, tips } = workoutPlanStore;\n\n\t\tconst tipsMonth = tips[`${year}-${util.padDate(month)}`];\n\t\tconst hasTipsMonth = tipsMonth && (tipsMonth.comments.length > 0 || tipsMonth.distance);\n\n\t\tconst team = teamStore.findTeam(currentTeam) || {};\n\n\t\treturn (\n\t\t\t<>\n                {showHeader && <>\n\t\t\t\t\t<div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-4 text-center'>\n\t\t\t\t\t\t{showNavigation && <a href={`${basehref || '/workouts/month/'}${nextMonth}/${nextYear}/skipScroll`} class='float-right btn btn-sm btn-outline-secondary ml-2'><i class='fas fa-arrow-right' /></a>}\n\t\t\t\t\t\t{showNavigation && <a href={`${basehref || '/workouts/month/'}${prevMonth}/${prevYear}/skipScroll`} class='float-left btn btn-sm btn-outline-secondary mr-2'><i class='fas fa-arrow-left' /></a>}\n\t\t\t\t\t\t<h3><Text id='workout.plan.month'>Måned</Text> - {MONTHS[month - 1]} {year} {summaryMonth.distance ? `- ${util.format(summaryMonth.distance, 0)} km` : ''}</h3>\n\t\t\t\t\t\t<h5 class='text-muted font-weight-light'><Text id='workout.plan.season'>Sesongen</Text> {seasonStart} - {seasonStart + 1}</h5>\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t{workoutPlan.id ? <>\n\t\t\t\t\t\t\t\t<small>{workoutPlan.title}</small>\n\t\t\t\t\t\t\t</> : <>\n\t\t\t\t\t\t\t\t<div class='display-4'>\n\t\t\t\t\t\t\t\t\t<i class='far fa-sad-tear text-muted' />\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<h5 class='font-weight-lighter text-muted'>\n\t\t\t\t\t\t\t\t\t<Text id='workout.plan.no-workout-plan-found' fields={{ name: team }}>Ingen plan</Text>\n\t\t\t\t\t\t\t\t</h5>\n\t\t\t\t\t\t\t\t<div class='text-muted'>\n\t\t\t\t\t\t\t\t\t<Text id='workout.plan.click-to-start'>Click on a date to get started.</Text>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</>}\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t{dog && <div>{dog.name}</div>}\n\t\t\t\t\t\t{/* <small>{util.isoDate(daysOfMonth[0], false, false, true)} - {util.isoDate(daysOfMonth[daysOfMonth.length - 1], false, false, true)}</small> */}\n\t\t\t\t\t</div>\n\t\t\t\t</>}\n\n                <div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3'>\n\t\t\t\t\t{!!(showInput && inputYear && inputWeek && !inputDay) && (\n\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t<div class='form-inline w-100'>\n\t\t\t\t\t\t\t\t<div class='form-group w-75 mr-3 mb-0'>\n\t\t\t\t\t\t\t\t\t<input class='form-control w-100 form-control' type='text' \n\t\t\t\t\t\t\t\t\t\tplaceholder={`Enter distance for ${inputYear} w${inputWeek}`}\n\t\t\t\t\t\t\t\t\t\tref={c => this.inputRef = c}\n\t\t\t\t\t\t\t\t\t\tonInput={linkState(this, 'newDistance')}\n\t\t\t\t\t\t\t\t\t\tonKeydown={this.checkKeydown}\n\t\t\t\t\t\t\t\t\t\tautocomplete='off'\n\t\t\t\t\t\t\t\t\t\tvalue={newDistance || ''}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<button type='button' class='btn btn-primary' onClick={this.saveDistance}><Text id='workout.plan.save'>Lagre</Text></button>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</>\n\t\t\t\t\t)}\n\t\t\t\t\t{!!(showInput && inputYear && inputMonth) && (\n\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t<div class='form-inline w-100'>\n\t\t\t\t\t\t\t\t<div class='form-group w-75 mr-3 mb-0'>\n\t\t\t\t\t\t\t\t\t<input class='form-control w-100 form-control' type='text'\n\t\t\t\t\t\t\t\t\t\tplaceholder={`Enter distance for ${inputYear}-${util.padDate(inputMonth)} ${inputDay ? `-${util.padDate(inputDay)}` : ''}`}\n\t\t\t\t\t\t\t\t\t\tref={c => this.inputRef = c}\n\t\t\t\t\t\t\t\t\t\tonInput={linkState(this, 'newDistance')}\n\t\t\t\t\t\t\t\t\t\tonKeydown={this.checkKeydown}\n\t\t\t\t\t\t\t\t\t\tautocomplete='off'\n\t\t\t\t\t\t\t\t\t\tvalue={newDistance || ''}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<button type='button' class='btn btn-primary' onClick={this.saveDistance}><Text id='workout.plan.save'>Lagre</Text></button>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</>\n\t\t\t\t\t)}\n\t\t\t\t</div>\n\n\t\t\t\t{language === 'no' && <>\n\t\t\t\t\t{hideWorkoutPlanTips ? <>\n\t\t\t\t\t\t<div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-4 d-flex justify-content-end'>\n\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\ttype='button'\n\t\t\t\t\t\t\t\tclass='btn btn-outline-primary btn-sm'\n\t\t\t\t\t\t\t\tonClick={this.toggleTips}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<i class='fas fa-eye' /> <Text id='workout.plan.show-tips'>Show tips</Text>\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</> : <>\n\t\t\t\t\t\t<div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-4 d-flex justify-content-end'>\n\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\ttype='button'\n\t\t\t\t\t\t\t\tclass='btn btn-primary btn-sm'\n\t\t\t\t\t\t\t\tonClick={this.toggleTips}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<i class='fas fa-eye-slash' /> <Text id='workout.plan.hide-tips'>Hide tips</Text>\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</>}\n\t\t\t\t</>}\n\n                <div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3'>\n\t\t\t\t\t<div class='table-responsive'>\n\t\t\t\t\t\t<table class='table table-striped table-sm'>\n\t\t\t\t\t\t\t<thead>\n\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t<th class='text-muted'><small><Text id='workout.plan.week'>Uke</Text></small></th>\n\t\t\t\t\t\t\t\t\t{daysOfWeek.map(day => <th><small>{DAYS[day.getDay()]}</small></th>)}\n\t\t\t\t\t\t\t\t\t<th class='text-muted'><small><Text id='workout.plan.sum'>Sum</Text></small></th>\n\t\t\t\t\t\t\t\t\t<th class='text-muted'><small><Text id='workout.plan.planned'>Plan</Text></small></th>\n\t\t\t\t\t\t\t\t\t{/* <th class='text-muted'>Totalt</th> */}\n\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t</thead>\n\t\t\t\t\t\t\t<tbody>\n\t\t\t\t\t\t\t\t{weeksInMonth && weeksInMonth.map(weekObj => {\n\t\t\t\t\t\t\t\t\tconst daysOfWeek = util.getDaysInWeek(weekObj.week, year, month);\n\t\t\t\t\t\t\t\t\tconst summaryWeek = workoutPlanStore.findWorkoutPlanSummaryWeek(util.asNumber(year), weekObj.week) || {};\n\t\t\t\t\t\t\t\t\tconst weekEpoch = daysOfWeek[6].getTime();\n\t\t\t\t\t\t\t\t\tconst isWeekInTheFuture = weekEpoch > currentEpoch;\n\t\t\t\t\t\t\t\t\tlet totalWeek = 0;\n\t\t\t\t\t\t\t\t\tlet totalWorkoutWeek = 0;\n\t\t\t\t\t\t\t\t\tif (summaryWeek.distance > 0) {\n\t\t\t\t\t\t\t\t\t\ttotalDistanceKmMonthPlan += summaryWeek.distance;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tconst tipsWeek = tips[`${year}-${util.padDate(month)}-w${util.padDate(weekObj.week)}`];\n\t\t\t\t\t\t\t\t\tconst hasTipsWeek = tipsWeek && (tipsWeek.comments.length > 0 || tipsWeek.distance);\n\n\t\t\t\t\t\t\t\t\treturn (<>\n\t\t\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t\t\t<td class={`text-right text-muted pt-3 border-right ${!inputDay && inputYear == year && inputWeek == weekObj.week ? 'border rounded border-primary' : ''}`}>\n\t\t\t\t\t\t\t\t\t\t\t\t<small onClick={this.editWeek} data-week={weekObj.week} data-year={year} data-distance={summaryWeek.distance}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t{weekObj.week}\n\t\t\t\t\t\t\t\t\t\t\t\t</small>\n\t\t\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t\t\t{daysOfWeek.map(day => {\n\t\t\t\t\t\t\t\t\t\t\t\tconst yyyy = day.getFullYear();\n\t\t\t\t\t\t\t\t\t\t\t\tconst mm = day.getMonth() + 1;\n\t\t\t\t\t\t\t\t\t\t\t\tconst dd = day.getDate();\n\t\t\t\t\t\t\t\t\t\t\t\tconst epoch = day.getTime();\n\t\t\t\t\t\t\t\t\t\t\t\tconst isDayInTheFuture = epoch > currentEpoch;\n\t\t\t\t\t\t\t\t\t\t\t\tconst summaryWorkout = userStore.findWorkoutSummaryWeekDay((isDayInTheFuture ? yyyy - 1 : yyyy), mm, dd, monthNum) || {};\n\t\t\t\t\t\t\t\t\t\t\t\tconst summary = workoutPlanStore.findWorkoutPlanSummaryDay(yyyy, mm, dd, monthNum) || {};\n\t\t\t\t\t\t\t\t\t\t\t\tif (summary && summary.distance) {\n\t\t\t\t\t\t\t\t\t\t\t\t\ttotalWeek += summary.distance;\n\t\t\t\t\t\t\t\t\t\t\t\t\ttotalDistanceKmMonth += summary.distance;\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\tif (summaryWorkout.distanceKm) {\n\t\t\t\t\t\t\t\t\t\t\t\t\ttotalWorkoutWeek += summaryWorkout.distanceKm;\n\t\t\t\t\t\t\t\t\t\t\t\t\ttotalWorkoutDistanceKmMonth += summaryWorkout.distanceKm;\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\t\t\tconst isChosen = (inputYear == yyyy && inputMonth == mm && inputDay == dd);\n\t\t\t\t\t\t\t\t\t\t\t\tconst isToday =  (currentYear == yyyy) && (currentMonth == mm) && (currentDay == dd);\n\t\t\t\t\t\t\t\t\t\t\t\tconst isDayOff = RED_DAYS.indexOf(day.getDay()) > -1;\n\n\t\t\t\t\t\t\t\t\t\t\t\t// console.log(summary);\n\t\t\t\t\t\t\t\t\t\t\t\t// count: 1, day: 5, distanceKm: 10, duration: 3600, elevation: 200, month: 9, speedAvg: 12, year: 2020\n\t\t\t\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t\t\t\t<td class={`text-center overflow-hidden font-weight-light position-relative pt-3 pb-3 border-right ${isChosen ? 'calendarIsChosen' : ''} ${isToday ? 'calendarIsToday' : ''} ${isDayOff ? 'calendarIsWeekend' : ''}`}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tstyle={`font-size: 0.8em; min-width: 3rem;`}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={this.editDay} data-day={day.getDate()} data-month={day.getMonth() + 1} data-year={year} data-week={weekObj.week} data-distance={summary.distance}\n\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div class='position-absolute text-muted' style='top: 0px; right: 2px; font-size: 0.7em;'>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{day.getDate()}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{summary && summary.distance ? \n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div class='rounded-pill w-100 px-1'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstyle={`background-color: ${mu.getPlanColor(summary, darkmode)};`}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Distance stores={this.props.stores} value={summary.distance} />\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{summary.count > 1 && <span class='position-absolute text-danger' style='bottom: 0; right: 0px; font-size: 0.6em;'>{summary.count}</span>}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div> : '-'}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{summaryWorkout.distanceKm > 0 && (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span class={`position-absolute font-weight-bold`}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstyle={`bottom: 0; left: 0px; font-size: 0.85em; color: ${isDayInTheFuture ? '#393DB1' : '#2BAAA9'};`}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Distance stores={this.props.stores} value={summaryWorkout.distanceKm} />\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t)}\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\t\t\t<td class='text-right pt-3 pb-3 position-relative border-right' style='font-size: 0.8em;'>\n\t\t\t\t\t\t\t\t\t\t\t\t<Distance stores={this.props.stores} value={totalWeek} />\n\t\t\t\t\t\t\t\t\t\t\t\t{totalWorkoutWeek > 0 && (\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span class={`position-absolute`}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tstyle={`bottom: 0; left: 0px; font-size: 0.85em; color: ${isWeekInTheFuture ? '#393DB1' : '#2BAAA9'};`}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Distance stores={this.props.stores} value={totalWorkoutWeek} />\n\t\t\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t\t\t<td class='text-right pt-3 pb-3 text-muted border-right' style='font-size: 0.8em;'\n\t\t\t\t\t\t\t\t\t\t\t\tonClick={this.editWeek} data-week={weekObj.week} data-year={year} data-distance={summaryWeek.distance}\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t{summaryWeek.distance > 0 && <>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div class='rounded-pill w-100 px-1 text-white text-center'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tstyle={`background-color: ${mu.getPlanColor(summaryWeek, darkmode)};`}\n\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Distance stores={this.props.stores} value={summaryWeek.distance} />\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t</>}\n\t\t\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t\t\t{/* <td class='text-right text-muted pt-3'>{totalDistanceKmMonth}</td> */}\n\t\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t\t{!hideWorkoutPlanTips && language === 'no' && tipsWeek && hasTipsWeek && <tr>\n\t\t\t\t\t\t\t\t\t\t\t<td colspan='10' class='pb-3'>\n\t\t\t\t\t\t\t\t\t\t\t\t<h5><span class='font-weight-lighter'>Uke {weekObj.week} {year}:</span>Tips fra Femundløpet</h5>\n\n\t\t\t\t\t\t\t\t\t\t\t\t{tipsWeek.totalDistance > 0 && <div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span class='text-muted'><i class='fas fa-road' /> Distanse</span>: {tipsWeek.totalDistance} km\n\t\t\t\t\t\t\t\t\t\t\t\t</div>}\n\t\t\t\t\t\t\t\t\t\t\t\t{tipsWeek.distance > 0 && <div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span class='text-muted'><i class='fas fa-road' /> Distanse pr økt</span>: {tipsWeek.distance}\n\t\t\t\t\t\t\t\t\t\t\t\t</div>}\n\t\t\t\t\t\t\t\t\t\t\t\t{tipsWeek.time && <div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span class='text-muted'><i class='fas fa-clock' /> Tid pr økt</span>: {tipsWeek.time}\n\t\t\t\t\t\t\t\t\t\t\t\t</div>}\n\t\t\t\t\t\t\t\t\t\t\t\t{tipsWeek.totalWorkouts > 0 && <div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span class='text-muted'><i class='fas fa-list-ol' /> Antall økter</span>: {tipsWeek.totalWorkouts}\n\t\t\t\t\t\t\t\t\t\t\t\t</div>}\n\t\t\t\t\t\t\t\t\t\t\t\t{tipsWeek.avgSpeed && <div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span class='text-muted'><i class='fas fa-tachometer-alt' /> Gjennomsnittsfart</span>: {tipsWeek.avgSpeed}\n\t\t\t\t\t\t\t\t\t\t\t\t</div>}\n\n\t\t\t\t\t\t\t\t\t\t\t\t{tipsWeek.comments && <div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t{tipsWeek.comments.map(c => <p>{c}</p>)}\n\t\t\t\t\t\t\t\t\t\t\t\t</div>}\n\t\t\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t\t</tr>}\n\n\t\t\t\t\t\t\t\t\t</>);\n\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t</tbody>\n\t\t\t\t\t\t\t<tfoot>\n\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t<td colspan='8' class='text-right pb-3'><Text id='workout.plan.totalkm'>Totalt km</Text></td>\n\t\t\t\t\t\t\t\t\t<td class='text-right position-relative pb-3'>\n\t\t\t\t\t\t\t\t\t\t<Distance stores={this.props.stores} value={totalDistanceKmMonth} />\n\t\t\t\t\t\t\t\t\t\t{totalWorkoutDistanceKmMonth > 0 && (\n\t\t\t\t\t\t\t\t\t\t\t<span class='position-absolute'\n\t\t\t\t\t\t\t\t\t\t\t\tstyle={`bottom: 0; left: 0px; font-size: 0.65em; color: ${isMonthInTheFuture ? '#393DB1' : '#2BAAA9'};`}\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t<Distance stores={this.props.stores} value={totalWorkoutDistanceKmMonth} />\n\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t<td class='text-right text-muted'>\n\t\t\t\t\t\t\t\t\t\t<Distance stores={this.props.stores} value={totalDistanceKmMonthPlan} />\n\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t{!hideWorkoutPlanTips && language === 'no' && tipsMonth && hasTipsMonth && <tr>\n\t\t\t\t\t\t\t\t\t<td colspan='10' class='pb-3'>\n\t\t\t\t\t\t\t\t\t\t<h5><span class='font-weight-lighter'>{MONTHS[month - 1]} {year}:</span> Tips fra Femundløpet</h5>\n\n\t\t\t\t\t\t\t\t\t\t{tipsMonth.totalDistance > 0 && <div>\n\t\t\t\t\t\t\t\t\t\t\t<span class='text-muted'><i class='fas fa-road' /> Distanse</span>: {tipsMonth.totalDistance} km\n\t\t\t\t\t\t\t\t\t\t</div>}\n\t\t\t\t\t\t\t\t\t\t{tipsMonth.distance > 0 && <div>\n\t\t\t\t\t\t\t\t\t\t\t<span class='text-muted'><i class='fas fa-road' /> Distanse pr økt</span>: {tipsMonth.distance}\n\t\t\t\t\t\t\t\t\t\t</div>}\n\t\t\t\t\t\t\t\t\t\t{tipsMonth.time && <div>\n\t\t\t\t\t\t\t\t\t\t\t<span class='text-muted'><i class='fas fa-clock' /> Tid pr økt</span>: {tipsMonth.time}\n\t\t\t\t\t\t\t\t\t\t</div>}\n\t\t\t\t\t\t\t\t\t\t{tipsMonth.totalWorkouts > 0 && <div>\n\t\t\t\t\t\t\t\t\t\t\t<span class='text-muted'><i class='fas fa-list-ol' /> Antall økter</span>: {tipsMonth.totalWorkouts}\n\t\t\t\t\t\t\t\t\t\t</div>}\n\t\t\t\t\t\t\t\t\t\t{tipsMonth.avgSpeed && <div>\n\t\t\t\t\t\t\t\t\t\t\t<span class='text-muted'><i class='fas fa-tachometer-alt' /> Gjennomsnittsfart</span>: {tipsMonth.avgSpeed}\n\t\t\t\t\t\t\t\t\t\t</div>}\n\n\t\t\t\t\t\t\t\t\t\t{tipsMonth.comments && <div>\n\t\t\t\t\t\t\t\t\t\t\t{tipsMonth.comments.map(c => <p>{c}</p>)}\n\t\t\t\t\t\t\t\t\t\t</div>}\n\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t</tr>}\n\t\t\t\t\t\t\t</tfoot>\n\t\t\t\t\t\t</table>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</>\n\t\t);\n\t}\n}\n\nexport default Calendar;\n","import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport { Text, Localizer, withText } from 'preact-i18n';\n\nimport Speed from '../../components/data/speed';\nimport Elevation from '../../components/data/elevation';\nimport Weight from '../../components/data/weight';\nimport Distance from '../../components/data/distance';\nimport Temperature from '../../components/data/temperature';\n\nimport mu from '../../lib/musher-util';\n\n@withText((props) => ({\n    week: <Text id='workout.graph.week' />,\n    distance: <Text id='workout.graph.distance' />,\n    ascend: <Text id='workout.graph.ascend' />,\n    plan: <Text id='workout.graph.plan' />,\n}))\n@observer\nclass WorkoutTable extends Component {\n    render() {\n        const { userStore } = this.props.stores;\n\n        const currentMonth = new Date().getMonth() + 1;\n        const currentYear = new Date().getFullYear();\n\n        const { isLoading, year = currentYear, month = currentMonth, showHeader = true } = this.props;\n\t\tconst seasonStart = parseInt(month < 8 ? year - 1 : year, 10);\n\n        const { user } = userStore;\n        const { language = 'en' } = user;\n\t\tconst MONTHS = mu.getMonths(language);\n\n\n        // const summaryMonth = workoutPlanStore.findWorkoutPlanSummaryMonth(year, monthNum) || {};\n        const seasonMonths = util.monthRange(`${seasonStart}-08-01`, `${seasonStart + 1}-07-31`);\n        const prevSeasonMonths = util.monthRange(`${seasonStart - 1}-08-01`, `${seasonStart}-07-31`);\n        const seasonWeeks = util.weekRange(`${seasonStart}-08-01`, `${seasonStart + 1}-07-31`);\n\n        const xTicksAll = seasonWeeks.map(wo => wo.week);\n        const parts = xTicksAll.length % 6;\n        const partSize = Math.floor(xTicksAll.length / parts);\n        const xTicks = [];\n        for (let i = 0, l = xTicksAll.length; i < l; i += partSize) {\n            xTicks.push(xTicksAll[i]);\n        }\n\n        return (\n            <>\n                {showHeader && <h5><Text id='workout.graph.title'>Treningsstatistikk</Text> {seasonStart} - {seasonStart + 1}</h5>}\n                <div class='w-100 mt-3 mb-4'>\n                    {/* <xmp>graphWorkoutSummaryWeekDistanceCurrent: {JSON.stringify(graphWorkoutSummaryWeekDistanceCurrent, null, 4)}</xmp>\n                    <xmp>graphWorkoutSummaryWeekDistancePrev: {JSON.stringify(graphWorkoutSummaryWeekDistancePrev, null, 4)}</xmp> */}\n                    <div class='table-responsive-lg'>\n                        <table class='table table-sm table-striped font-weigth-lighter border-bottom'>\n                            <thead>\n                                <tr>\n                                    <th class='text-center'><Text id='workout.graph.season'>Sesong</Text></th>\n                                    {seasonMonths.map(m => (\n                                        <th class='text-center'><a href={`/workouts/month/${m.month}/${m.year}`}>{MONTHS[m.month - 1]}</a></th>\n                                    ))}\n                                </tr>\n                            </thead>\n                            <tbody>\n                                <tr>\n                                    <th scope='row' style='padding: .15rem;'><nobr>{seasonStart - 1} - {seasonStart}</nobr></th>\n                                    {prevSeasonMonths.map(m => {\n                                        // const summaryMonth = workoutPlanStore.findWorkoutPlanSummaryMonth(m.year, m.month) || {};\n                                        return (\n                                            <>\n                                                <td class='text-right px-3'>\n                                                    {/* <nobr>{summaryMonth.distance}</nobr><br /> */}\n                                                    <nobr>\n                                                        <Distance stores={this.props.stores} value={userStore.findWorkoutSummaryMonth(m.year, m.month)} smallUnit={true} />\n                                                    </nobr><br />\n                                                    <nobr>\n                                                        <Elevation stores={this.props.stores} value={userStore.findWorkoutSummaryMonth(m.year, m.month, 'elevation')} smallUnit={true} />\n                                                    </nobr><br />\n                                                </td>\n                                            </>\n                                        );\n                                    })}\n                                </tr>\n                                <tr>\n                                    <th scope='row' style='padding: .15rem;'><nobr>{seasonStart} - {seasonStart + 1}</nobr></th>\n                                    {seasonMonths.map(m => {\n                                        // const summaryMonth = workoutPlanStore.findWorkoutPlanSummaryMonth(m.year, m.month) || {};\n                                        return (\n                                            <>\n                                                <td class='text-right px-3'>\n                                                    <nobr>\n                                                        <Distance stores={this.props.stores} value={userStore.findWorkoutSummaryMonth(m.year, m.month)} smallUnit={true} />\n                                                    </nobr><br />\n                                                    <nobr>\n                                                        <Elevation stores={this.props.stores} value={userStore.findWorkoutSummaryMonth(m.year, m.month, 'elevation')} smallUnit={true} />\n                                                    </nobr><br />\n                                                </td>\n                                            </>\n                                        );\n                                    })}\n                                </tr>\n                            </tbody>\n                        </table>\n                    </div>\n\n                </div>\n            </>\n        );\n    }\n}\n\nexport default WorkoutTable;\n","import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport { Text, Localizer, withText } from 'preact-i18n';\n\nimport Speed from '../../components/data/speed';\nimport Elevation from '../../components/data/elevation';\nimport Weight from '../../components/data/weight';\nimport Distance from '../../components/data/distance';\nimport Temperature from '../../components/data/temperature';\n\n@observer\nclass Strava extends Component {\n    toggleDate = (e) => {\n        e.stopPropagation();\n        e.preventDefault();\n        const { showDate } = this.state;\n        this.setState({ showDate: !showDate });\n    }\n\n    ignoreStravaWorkout = async (e) => {\n        e.stopPropagation();\n        const id = e.target.parentElement.dataset.id || e.target.dataset.id;\n        const { stravaActivityStore } = this.props.stores;\n\t\tawait stravaActivityStore.ignoreWorkout(id);\n        this.loadStravaActivities();\n    }\n\n    importStravaWorkout = async (e) => {\n        e.stopPropagation();\n        const id = e.target.parentElement.dataset.id || e.target.dataset.id;\n        const { stravaActivityStore, workoutStore } = this.props.stores;\n\t\tconst { currentTeam } = workoutStore;\n\t\tawait stravaActivityStore.importWorkout(id, currentTeam);\n        this.loadStravaActivities();\n        this.loadWorkouts();\n    }\n\n    async loadStravaActivities() {\n\t\tconst { stravaActivityStore } = this.props.stores;\n\t\tstravaActivityStore.load({ query: { hideImported: 1 }});\n\t}\n\n    loadWorkouts = async () => {\n\t\tconst { workoutStore } = this.props.stores;\n\t\tconst { currentTeam } = workoutStore;\n\t\tawait workoutStore.load({ query: { team: currentTeam } });\n\t}\n\n    toggleDetail = () => {\n        const { showDetail = false } = this.state;\n        this.setState({\n            showDetail: !showDetail,\n        });\n    }\n\n\tcomponentDidMount() {\n\t\tthis.loadStravaActivities();\n\t}\n\n    render() {\n        const { showDate, showDetail = false } = this.state;\n        const { activities, showDate: forceShowDate } = this.props;\n\t\tconst { userStore, workoutStore } = this.props.stores;\n        const { currentTeam } = workoutStore;\n        const { team } = userStore;\n\n        const selectedTeam = userStore.findTeam(currentTeam || team.id);\n\n         if (!showDetail) {\n            if (activities && activities.length > 0) {\n                return (<>\n                    <div class='col-12 mb-3'>\n                        <button type='button' class='btn btn-block btn-outline-info' onClick={this.toggleDetail}>\n                            <div class={`float-right ml-2 text-center border rounded-circle imageRounded imageRoundedIcon`} style={`background-image: url('./assets/strava-icon.png');`} />\n                            <Text id='workout.index.strava-workouts'>Strava workouts / not imported</Text> {activities.length}\n                        </button>\n                    </div>\n                </>);\n            }\n            return (<></>);\n        }\n\n        return (<>\n            <div class='col-12 mb-3'>\n                <div class='row'>\n                    {activities && activities.length > 0 && (\n                        <div\n                            class='col-12 border-top border-bottom pt-3 pb-3 my-2 bg-light'\n                        >\n                            <button type='button' class='float-right btn btn-sm btn-link' onClick={this.toggleDetail}>\n                                <i class='fas fa-caret-up' /> <Text id='strava.hide-list'>Hide list</Text>\n                            </button>\n                            <h5><Text id='workout.index.strava-workouts'>Strava workouts / not imported</Text> {activities.length}</h5>\n                            {activities && activities.map(activity => {\n                                const { summary = {} } = activity;\n                                const startDate = util.parseInputDate(summary.startTimeInSeconds);\n\n                                return (<>\n                                    {/* <td>{util.secToHms(activity.moving_time)}</td> */}\n                                    {/* <td>{util.secToHms(activity.elapsed_time)}</td> */}\n\n                                    <div class='col-12 d-flex mb-4 position-relative'>\n                                        <div class={`text-center border rounded-circle imageRounded`} style={`background-image: url(\"./assets/strava-icon.png\"); border-width: 3px !important;`}>\n                                            &nbsp;\n                                        </div>\n                                        <div class='flex-grow-1 pl-3' style='line-height: 1.2em;'>\n                                            <h5 class='my-0 mb-1' style='line-height: 1.0em;'>{activity.name}</h5>\n                                            {activity.type}<br />\n                                            <small class='text-muted'>\n                                                {activity.start_date && <small onClick={this.toggleDate}>\n                                                    {forceShowDate || showDate ? util.formatDate(activity.start_date, { locale: 'no-NB' }) : util.formatDistance(activity.start_date, new Date(), { locale: 'no-NB' })}\n                                                </small>}\n                                                <span class='text-muted'>\n                                                    <i class='fas fa-road ml-2' /> <Distance stores={this.props.stores} value={activity.distance / 1000} />\n                                                    <i class='fas fa-mountain ml-2' /> <Elevation stores={this.props.stores} value={activity.total_elevation_gain} />\n                                                    <i class='fas fa-tachometer-alt ml-2' /> <Speed stores={this.props.stores} value={activity.average_speed * 3.6} />\n                                                    <i class='fas fa-stopwatch ml-2' /> {util.secToHms(activity.elapsed_time)}\n                                                </span>\n                                            </small>\n                                            <br />\n                                            <button class='btn btn-sm btn-block btn-primary' onClick={this.importStravaWorkout} data-id={activity.id}>\n                                                <i class='fas fa-file-import' /> <Text id='strava.import'>Import workout</Text> <i class='fas fa-arrow-right' /> {selectedTeam}\n                                            </button>\n                                            <button class='btn btn-sm btn-link' onClick={this.ignoreStravaWorkout} data-id={activity.id}>\n                                                <i class='fas fa-trash-alt' /> <Text id='strava.ignore'>Ignore workout</Text>\n                                            </button>\n                                        </div>\n                                    </div>\n                                </>);\n                            })}\n\n                            <button type='button' class='btn btn-block btn-primary mt-3' onClick={this.toggleDetail}>\n                                <i class='fas fa-caret-up' /> <Text id='strava.hide-list'>Hide list</Text>\n                            </button>\n                        </div>\n                    )}\n                </div>\n            </div>\n        </>);\n    }\n}\n\nexport default Strava;\n","import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport { Text, Localizer } from 'preact-i18n';\n\nimport ScrollIntoView from '../../components/util/scrollIntoView';\n\n@observer\nclass Teams extends Component {\n    toggleTeam = (team) => {\n\t\tconst { callback, unsetTeamIfSelected = true } = this.props;\n        const { dogStore, workoutStore } = this.props.stores;\n\t\tconst { currentTeam } = dogStore;\n\t\tif (unsetTeamIfSelected && team === currentTeam) {\n\t\t\tdogStore.setCurrentTeam(undefined);\n\t\t\tworkoutStore.setCurrentTeam(undefined);\n\t\t} else {\n\t\t\tdogStore.setCurrentTeam(team);\n\t\t\tworkoutStore.setCurrentTeam(team);\n\t\t}\n\t\tif (util.isDefined(callback)) {\n\t\t\tcallback();\n\t\t}\n\t}\n\n    showAllTeams = () => {\n\t\tconst { callback } = this.props;\n        const { dogStore, workoutStore } = this.props.stores;\n\t\tdogStore.setCurrentTeam(undefined);\n\t\tworkoutStore.setCurrentTeam(undefined);\n\t\tif (util.isDefined(callback)) {\n\t\t\tcallback();\n\t\t}\n\t}\n\n\t// componentDidMount() {\n\t// \tif (this.container) {\n\t// \t\tthis.container.scrollIntoView({ behavior: 'smooth', block: 'end', inline: 'center' });\n\t// \t}\n\t// }\n\n    render() {\n        const { userStore, dogStore } = this.props.stores;\n        const { teams } = userStore;\n\t\tconst { currentTeam } = dogStore;\n\t\tconst { highlight, showAll = true } = this.props;\n        return (\n\t\t\t<div class='row mt-2'>\n\t\t\t\t<div class='w-100 overflow-hidden'>\n\t\t\t\t\t<div\n\t\t\t\t\t\tclass='d-flex flex-row flex-nowrap pb-2 px-1 no-scrollbar'\n\t\t\t\t\t\tstyle='overflow: auto; scroll-snap-type: x mandatory;'\n\t\t\t\t\t>\n\t\t\t\t\t\t{/* <xmp><br /><br /><br /><br />{JSON.stringify(teams, null, 4)}</xmp> */}\n\t\t\t\t\t\t{teams && teams.map((team, idx) => {\n\t\t\t\t\t\t\tlet classNames;\n\t\t\t\t\t\t\tif (teams.length === 1) {\n\t\t\t\t\t\t\t\tclassNames = 'rounded-pill-both';\n\t\t\t\t\t\t\t} else if (idx === 0) {\n\t\t\t\t\t\t\t\tclassNames = 'rounded-pill-left';\n\t\t\t\t\t\t\t} else if (idx + 1 === teams.length) {\n\t\t\t\t\t\t\t\tclassNames = 'rounded-pill-right';\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t<div class='col mb-0 px-0 clearfix' key={team.id}>\n\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\tclass={`btn btn-sm btn-block \n\t\t\t\t\t\t\t\t\t\t\trounded-none ${classNames}\n\t\t\t\t\t\t\t\t\t\t\t${currentTeam === team.id ? 'btn-success' : 'btn-outline-success'}\n\t\t\t\t\t\t\t\t\t\t\ttext-nowrap clearfix`}\n\t\t\t\t\t\t\t\t\t\tstyle='text-overflow: ellipsis; overflow: hidden;'\n\t\t\t\t\t\t\t\t\t\tonClick={() => this.toggleTeam(team.id)}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<i class='fas fa-users' /> {team.name}\n\n\t\t\t\t\t\t\t\t\t\t{highlight && highlight.indexOf(team.id) > -1 && <>\n\t\t\t\t\t\t\t\t\t\t\t{currentTeam === team.id ? <>\n\t\t\t\t\t\t\t\t\t\t\t\t<i class='fas fa-check float-right' />\n\t\t\t\t\t\t\t\t\t\t\t</> : <>\n\t\t\t\t\t\t\t\t\t\t\t\t<div class='spinner-grow text-warning float-right' role='status'>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span class='sr-only'>Loading...</span>\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t<i class='far fa-hand-point-left float-right' style='font-size: 2.0em;' />   \n\t\t\t\t\t\t\t\t\t\t\t</>}\n\t\t\t\t\t\t\t\t\t\t</>}\n\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t{/* {currentTeam === team.id && <ScrollIntoView horizontal={'center'} vertical={'end'} />} */}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t})}\n\t\t\t\t\t</div>\n\t\t\t\t\t{showAll && <div class='row'>\n\t\t\t\t\t\t<div class='col-12 mb-1 px-1 d-flex justify-content-center'>\n\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\tclass={`btn btn-sm rounded-lg btn-link text-nowrap clearfix`}\n\t\t\t\t\t\t\t\tstyle='text-overflow: ellipsis; overflow: hidden;'\n\t\t\t\t\t\t\t\tonClick={this.showAllTeams}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<i class='fas fa-users' /> <Text id='teams.show-all'>Show all</Text>\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>}\n\t\t\t\t</div>\n\t\t\t</div>\n        );\n    }\n}\n\nexport default Teams;\n","import { h, Component } from 'preact';\nimport { observer } from 'mobx-preact';\nimport util from 'preact-util';\n\n// TODO: Do we need mobx? What is mobx doing here?  \n\n@observer\nclass FastListLine extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {};\n        this.containerRef = null;\n    }\n\n    componentWillUnmount() {\n        const { removeIntersectionObserver } = this.props;\n        if (removeIntersectionObserver) {\n            removeIntersectionObserver(this.containerRef);\n        }\n    }\n\n    componentDidMount() {\n        const { addIntersectionObserver } = this.props;\n        if (addIntersectionObserver) {\n            addIntersectionObserver(this.containerRef);\n        }\n    }\n\n    render() {\n        const {\n            wrapperClassNames = '',\n            contentClassNames = '',\n            renderContent,\n            obj = {},\n            idx,\n            dataFields,\n            dataValues,\n            sessionid,\n        } = this.props;\n\n        const dataProperties = {};\n        if (sessionid) {\n            dataProperties.sessionid = sessionid;\n        }\n        dataFields.forEach(e => dataProperties[`data-${e}`] = encodeURI(dataValues[e] || obj[e]));\n\n        return (\n            <div\n                class={`${wrapperClassNames}`}\n                ref={c => this.containerRef = c}\n                data-idx={idx}\n                {...dataProperties}\n            >\n                <div\n                    class={`${contentClassNames}`}\n                    style={`display: block;`}\n                >\n                    {renderContent({\n                        obj,\n                        idx,\n                    })}\n                </div>\n            </div>\n        );\n    }\n}\n\n@observer\nclass FastList extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {};\n    }\n\n    // IntersectionObserver\n    deleteIntersectionObserver = () => {\n        this.intersectionObserver = null;\n    }\n\n    handleIntersection = (entries) => {\n        const { handleIntersection } = this.props;\n        if (typeof(handleIntersection) === 'function') {\n            // console.log('handleIntersection');\n            handleIntersection(entries);\n        }\n        // console.log({ entries });\n        // TODO: Make it possible to run defined functions for entries.\n        // mu.intersectionObserverCallback(entries);\n        entries.forEach((e) => {\n            const { isIntersecting } = e;\n            const { height = 0 } = e.target.dataset;\n            // const childHeight = e.target.childNodes[0].getBoundingClientRect().height;\n            // const targetHeight = e.target.getBoundingClientRect().height;\n            const childHeight = e.target.childNodes[0].offsetHeight;\n            const targetHeight = e.target.offsetHeight;\n            const scrollHeight = e.target.scrollHeight;\n            const currentHeight = Math.max(childHeight, targetHeight, scrollHeight);\n            // console.log({ isIntersecting, height, childHeight, targetHeight, scrollHeight, currentHeight }, e.target);\n\n            if (isIntersecting) {\n                e.target.childNodes[0].style.display=`block`;\n                // TODO: Should be set after image is loaded.\n                // const height = e.target.childNodes[0].clientHeight > e.target.clientHeight ? e.target.childNodes[0].clientHeight : e.target.clientHeight;\n                // console.log(e.target);\n                // console.log('e.target.childNodes[0].offsetHeight:', e.target.childNodes[0].offsetHeight);\n                // console.log('e.target.childNodes[0].scrollHeight:', e.target.childNodes[0].scrollHeight);\n                // console.log('e.target.childNodes[0].clientHeight:', e.target.childNodes[0].clientHeight);\n                // console.log('e.target.offsetHeight:', e.target.offsetHeight);\n                // console.log('e.target.scrollHeight:', e.target.scrollHeight);\n                // console.log('e.target.clientHeight:', e.target.clientHeight);\n                // console.log('height:', height);\n                // e.target.style.height=`${height}px`;\n                e.target.style.minHeight = `${currentHeight > height ? currentHeight : height}px`;\n            } else if (e.target.style.minHeight) {\n                // e.target.style.height = `${currentHeight > height ? currentHeight : height}px`;\n                e.target.style.minHeight = `${currentHeight > height ? currentHeight : height}px`;\n                e.target.childNodes[0].style.display=`none`;\n            }\n        });\n    }\n\n    setupIntersectionObserver = () => {\n        if (!('IntersectionObserver' in window) ||\n            !('IntersectionObserverEntry' in window) ||\n            !('intersectionRatio' in window.IntersectionObserverEntry.prototype)) {\n            return false;\n        }\n\n        const options = {\n            root: null,\n            rootMargin: '100px',\n            threshold: 0.1,\n        };\n        this.intersectionObserver = new IntersectionObserver(this.handleIntersection, options);\n    }\n\n    addIntersectionObserver = (ref) => {\n        if (this.intersectionObserver && ref) {\n            this.intersectionObserver.observe(ref);\n        }\n    }\n    removeIntersectionObserver = (ref) => {\n        if (this.intersectionObserver && ref) {\n            this.intersectionObserver.unobserve(ref);\n        }\n    }\n\n    componentWillMount() {\n        this.setupIntersectionObserver();\n    }\n\n    componentWillUnmount() {\n        this.deleteIntersectionObserver();\n    }\n\n    render() {\n        const {\n            data = [],\n            wrapperClassNames = 'row pb-4 bg-light',\n            contentClassNames = `col-12 col-sm-8 col-lg-6 offset-sm-2 offset-lg-3 mb-0 position-relative rounded rounded-lg py-3 shadow-sm`,\n            renderContent = (e) => <>Missing render function!</>,\n            dataFields = [],\n            dataValues = {},\n        } = this.props;\n        \n        return (\n            <div class='w-100'>\n                {data && data.filter(e => util.isObject(e)).map((obj, idx) => {\n                    const wrapperClasses = obj.hasOwnProperty('wrapperClassNames') ? obj.wrapperClassNames : wrapperClassNames;\n                    const contentClasses = obj.hasOwnProperty('contentClassNames') ? obj.contentClassNames : contentClassNames;\n                    return (<>\n                        <FastListLine\n                            key={`fastline-${idx}-${obj.id}`}\n                            obj={obj}\n                            idx={idx}\n                            addIntersectionObserver={this.addIntersectionObserver}\n                            removeIntersectionObserver={this.removeIntersectionObserver}\n                            wrapperClassNames={wrapperClasses}\n                            contentClassNames={contentClasses}\n                            renderContent={renderContent}\n                            dataFields={dataFields}\n                            dataValues={dataValues}\n                        />\n                    </>);\n                })}\n            </div>\n        );\n    };\n}\n\nexport default FastList;\n"],"sourceRoot":""}