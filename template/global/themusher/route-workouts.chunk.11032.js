(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{B7Gj:function(t,e,o){"use strict";o.r(e),function(t){function r(t,e){var o=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),o.push.apply(o,r)}return o}function n(t,e,o){return e in t?Object.defineProperty(t,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[e]=o,t}var s,a=o("hosL"),c=o("Utv1"),i=o("/eY4"),l=o("OhSV"),u=o("ZOvn"),h=o.n(u),b=o("JWe/"),d=(o("3pQw"),o("WAWY")),p=o("azdc"),m=o("3UPq"),f=o("pJjI"),O=o("wanP"),g=o("K9Qx"),j=o("bUJL"),y=o("4imK"),k=h.a.marginTop(!0),w=h.a.marginBottom(),v=h.a.subMenuMarginTop(),x={isLoading:!1,submenu:"totals"},S=Object(i.a)(s=function(e){function o(t){var o;return(o=e.call(this,t)||this).loadWorkouts=function(t){return new Promise((function(e,r){var n,s,a,i,l,u,h,b,d;return void 0===t&&(t=o.props),o.setState({isLoading:!0}),a=(n=t.stores).userStore,i=(s=n.workoutStore).currentTeam,l=(new Date).getMonth()+1,u=c.a.getYear(),b=(h=t).month,d=h.year,Promise.resolve(Promise.all([s.load({query:{team:i,year:void 0===d?u:d,month:void 0===b?l:b}}),o.loadWorkoutSummary(t),o.loadWorkoutPlans(t),a.getNotifications(),o.loadStravaActivities(),o.loadGarminActivities()])).then((function(){try{return o.setState({isLoading:!1}),e()}catch(t){return r(t)}}),r)}))},o.loadWorkoutPlans=function(t){return new Promise((function(e,r){function n(){return o.setState({isLoading:!1}),e()}var s,a,i,l,u,h,b,d;return void 0===t&&(t=o.props),o.setState({isLoading:!0}),s=t.year,a=(new Date).getMonth()+1,i=c.a.getYear(),l=parseInt(s||(a<6?i-1:i),10),b=(u=t.stores).workoutStore.currentTeam,(h=u.workoutPlanStore).updateItem("workoutPlans",[]),h.updateItem("workoutPlan",{}),h.resetGraphPlanWeekDistanceCurrent(),b?Promise.resolve(h.load({query:{team:b,seasonYear:l,seasonMonth:6}})).then(function(){try{if((d=h.workoutPlans[0]||{}).id)return Promise.resolve(h.load(d.id)).then(function(){try{return h.prepareWeekGraphs({year:s}),t.call(this)}catch(t){return r(t)}}.bind(this),r);function t(){return n.call(this)}return t.call(this)}catch(t){return r(t)}}.bind(this),r):n.call(this)}))},o.chooseSubmenu=function(t){o.setState({submenu:t.target.parentElement.dataset.menu||t.target.dataset.menu})},o.state=function(t){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?r(Object(o),!0).forEach((function(e){n(t,e,o[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):r(Object(o)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(o,e))}))}return t}({},x),o}var s,i;i=e,(s=o).prototype=Object.create(i.prototype),s.prototype.constructor=s,s.__proto__=i;var u=o.prototype;return u.loadStravaActivities=function(){return new Promise(function(t){return this.props.stores.stravaActivityStore.load({query:{hideImported:1}}),t()}.bind(this))},u.loadGarminActivities=function(){return new Promise(function(t){return this.props.stores.garminActivityDetailsStore.load({query:{hideImported:1}}),t()}.bind(this))},u.loadWorkoutSummary=function(t){return new Promise(function(e,o){var r,n,s,a,i,l,u,h,b;return void 0===t&&(t=this.props),n=(r=t.stores).userStore,s=r.workoutStore,a=(new Date).getMonth()+1,i=c.a.getYear(),void 0===(u=(l=t).month)?a:u,h=l.year,b=s.currentTeam,Promise.resolve(n.getWorkoutSummary({team:b,year:void 0===h?i:h})).then((function(){try{return Promise.resolve(n.getWorkoutSummaryDay({daysBack:500,team:b})).then((function(){try{return e()}catch(t){return o(t)}}),o)}catch(t){return o(t)}}),o)}.bind(this))},u.componentDidMount=function(){this.loadWorkouts()},u.componentWillReceiveProps=function(t){t.month===this.props.month&&t.year===this.props.year&&t.team===this.props.team||this.loadWorkouts(t)},u.render=function(){var e,o=this,r=this.state,n=r.isLoading,s=r.submenu,i=this.props.stores,u=i.userStore,x=i.appState,S=i.workoutStore,P=i.workoutPlanStore,_=i.stravaActivityStore,W=i.garminActivityDetailsStore,D=P.workoutPlan,M=P.workoutPlans,L=u.user,I=L.language,T=h.a.getMonths(void 0===I?"no":I),A=(new Date).getMonth()+1,Y=c.a.getYear(),C=this.props,R=C.month,B=void 0===R?A:R,G=C.year,U=void 0===G?Y:G,z=S.currentTeam,V=x.darkmode,q=S.workouts,E=P.sumWorkoutPlanMonth(parseInt(U,10),parseInt(B,10))||0,J=u.findWorkoutSummaryMonth(parseInt(U,10),parseInt(B,10))||0;E&&(e=Math.floor(J/E*100));var K=u.findWorkoutSummaryMonth(parseInt(U,10),parseInt(B,10),"count",!0)||0,F=u.findWorkoutSummaryMonth(parseInt(U,10),parseInt(B,10),"distanceKm",!0)||0,H=u.findWorkoutSummaryMonth(parseInt(U,10),parseInt(B,10),"duration",!0)||0,Q=parseInt(U||(A<6?Y-1:Y),10),Z=_.stravaActivities,N=W.garminActivityDetails;return Object(a.h)("div",{class:"container-fluid",style:"margin-bottom: "+w+"; margin-top: "+k+";"},Object(a.h)("div",{class:"row mb-4 fixed-top",style:"margin-top: "+v+"; background-color: "+(V?"#191d21":"#f8f9fa")+";"},Object(a.h)("div",{class:"col text-center border-bottom border-primary subtopmenu"},Object(a.h)("a",{href:"/workouts/",class:"text-primary stretched-link"},Object(a.h)("nobr",null,Object(a.h)("i",{class:"fas fa-chart-line"})," ",Object(a.h)(l.c,{id:"workout.index.dashboard"},"Oversikt")))),Object(a.h)("div",{class:"col text-center subtopmenu"},Object(a.h)("a",{href:"/workouts/list",class:"text-secondary stretched-link"},Object(a.h)("nobr",null,Object(a.h)("i",{class:"fas fa-list"})," ",Object(a.h)(l.c,{id:"workout.index.list"},"Liste")))),Object(a.h)("div",{class:"col text-center subtopmenu"},Object(a.h)("a",{href:"/workouts/plan",class:"text-secondary stretched-link"},Object(a.h)("nobr",null,Object(a.h)("i",{class:"fas fa-calendar-alt"})," ",Object(a.h)(l.c,{id:"workout.index.plan"},"Plan"))))),Object(a.h)("div",{class:"row"},Object(a.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 border-bottom"},Object(a.h)(f.a,{stores:this.props.stores,callback:this.loadWorkouts,key:"teams-"+z})),Object(a.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-2 mb-2"},Object(a.h)("a",{class:"btn btn-primary btn-sm float-right",href:"/workouts/edit/new"},Object(a.h)("i",{class:"fas fa-plus"})," ",Object(a.h)(l.c,{id:"workout.index.add-workout"},"Legg til treningstur"))),Object(a.h)(m.a,{stores:this.props.stores,isLoading:n,year:U,month:B,key:"calendar-header-"+D.id+"-"+M.length,hideTable:1,hideSummary:1}),"totals"===s&&Object(a.h)(t,null,Object(a.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-2 mb-2"},Object(a.h)("div",{class:"row"},Object(a.h)("div",{class:"col-5 text-center"},E>=0&&Object(a.h)(O.a,{key:"gauge-"+e,radius:60,percent:e,prefix:"%",total:E+" km",completed:J+" km"}),Object(a.h)("br",null),Object(a.h)("small",{class:"text-muted"},Object(a.h)(l.c,{id:"workout.index.plan"},"Treningsplan"))),Object(a.h)("div",{class:"col-7 text-right"},Object(a.h)("h5",null,Object(a.h)("span",{class:"text-muted font-weight-lighter"},Object(a.h)(l.c,{id:"workout.calendar.totalWorkouts"},"Antall Ã¸kter")),": ",K),Object(a.h)("h5",null,Object(a.h)("span",{class:"text-muted font-weight-lighter"},Object(a.h)(l.c,{id:"workout.calendar.distance"},"Distanse")),": ",c.a.format(F,1)," km"),Object(a.h)("h5",null,Object(a.h)("span",{class:"text-muted font-weight-lighter"},Object(a.h)(l.c,{id:"workout.calendar.duration"},"Varighet")),": ",c.a.secToHms(H)))))),"analysis"===s&&Object(a.h)(t,null,Object(a.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3"},Object(a.h)(d.a,{stores:this.props.stores,isLoading:n,year:U,key:"graph-"+D.id+"-"+M.length}))),"table"===s&&Object(a.h)(t,null,Object(a.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3"},Object(a.h)(p.a,{stores:this.props.stores,isLoading:n,year:U,key:"table-"+D.id+"-"+M.length}))),"workoutplan"===s&&Object(a.h)(t,null,Object(a.h)(g.a,{stores:this.props.stores,basehref:"/workouts/",month:B,year:U,key:(D.id||Q)+"-"+z+"-"+B+"-"+U,showNavigation:!1,showHeader:!1})),Object(a.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 my-3"},Object(a.h)("div",{class:"row"},Object(a.h)("div",{class:"col px-1 pt-2"},Object(a.h)("button",{class:"btn btn-block "+("totals"===s?"btn-primary":"btn-outline-primary")+" text-nowrap",style:"text-overflow: ellipsis; overflow: hidden;","data-menu":"totals",onClick:this.chooseSubmenu},Object(a.h)("i",{class:"fas fa-tachometer-alt"})," ",Object(a.h)(l.c,{id:"workouts.totals"},"Totaler"))),Object(a.h)("div",{class:"col px-1 pt-2"},Object(a.h)("button",{class:"btn btn-block "+("analysis"===s?"btn-primary":"btn-outline-primary")+" text-nowrap",style:"text-overflow: ellipsis; overflow: hidden;","data-menu":"analysis",onClick:this.chooseSubmenu},Object(a.h)("i",{class:"fas fa-chart-area"})," ",Object(a.h)(l.c,{id:"workouts.analysis"},"Analyser"))),Object(a.h)("div",{class:"col px-1 pt-2"},Object(a.h)("button",{class:"btn btn-block "+("table"===s?"btn-primary":"btn-outline-primary")+" text-nowrap",style:"text-overflow: ellipsis; overflow: hidden;","data-menu":"table",onClick:this.chooseSubmenu},Object(a.h)("i",{class:"fas fa-table"})," ",Object(a.h)(l.c,{id:"workouts.table"},"Tabell"))),Object(a.h)("div",{class:"col px-1 pt-2"},Object(a.h)("button",{class:"btn btn-block "+("workoutplan"===s?"btn-primary":"btn-outline-primary")+" text-nowrap",style:"text-overflow: ellipsis; overflow: hidden;","data-menu":"workoutplan",onClick:this.chooseSubmenu},Object(a.h)("i",{class:"fas fa-calendar-alt"})," ",Object(a.h)(l.c,{id:"workouts.workoutplan"},"Treningsplan")))))),Object(a.h)("div",{class:"row"},L&&L.strava&&Z&&Z.length>0&&Object(a.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 border-top border-bottom pt-3 pb-3 my-2"},Object(a.h)("h5",null,Object(a.h)(l.c,{id:"workout.index.strava-workouts"},"Strava workouts / not imported")),Z&&Z.map((function(t){return Object(a.h)(j.a,{stores:o.props.stores,activity:t,key:"strava-"+z+"-"+t.id})}))),L&&L.garmin&&N&&N.length>0&&Object(a.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 border-top border-bottom pt-3 pb-3 my-2"},Object(a.h)("h5",null,Object(a.h)(l.c,{id:"workout.index.garmin-workouts"},"Garmin workouts / not imported")),N&&N.map((function(t){return Object(a.h)(y.a,{stores:o.props.stores,activity:t,key:"garmin-"+z+"-"+t.id})})))),Object(a.h)("div",{class:"row"},q&&q.length>0&&Object(a.h)("div",{class:"col-12 mb-4"},Object(a.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 px-0 mt-4"},Object(a.h)("h5",null,Object(a.h)(l.c,{id:"workout.index.last-workouts",fields:{total:q.length,month:T[B-1],year:U}},"Treningsturer ",T[B-1]," ",U," - ",q.length," stk"))),q&&q.map((function(t){return Object(a.h)(b.a,{stores:o.props.stores,workout:t})}))),!q||0===q.length&&Object(a.h)("div",{class:"col-12 mb-4 text-center pt-5 pb-5"},Object(a.h)("h1",{class:"text-muted"},Object(a.h)("i",{class:"fas fa-running"})),Object(a.h)("h5",{class:"text-muted font-weight-lighter"},Object(a.h)(l.c,{id:"workouts.no-workouts",fields:{month:T[B-1],year:U}},"Ingen treningsturer registrert...")))),!1)},o}(a.Component))||s;e.default=S}.call(this,o("hosL").Fragment)},azdc:function(t,e,o){"use strict";(function(t){var r,n=o("hosL"),s=o("Utv1"),a=o("/eY4"),c=o("OhSV"),i=o("ZOvn"),l=o.n(i),u=Object(c.d)((function(){return{week:Object(n.h)(c.c,{id:"workout.graph.week"}),distance:Object(n.h)(c.c,{id:"workout.graph.distance"}),ascend:Object(n.h)(c.c,{id:"workout.graph.ascend"}),plan:Object(n.h)(c.c,{id:"workout.graph.plan"})}}))(r=Object(a.a)(r=function(e){function o(){return e.apply(this,arguments)||this}var r,a;return a=e,(r=o).prototype=Object.create(a.prototype),r.prototype.constructor=r,r.__proto__=a,o.prototype.render=function(){for(var e=this.props.stores.userStore,o=this.props,r=o.year,a=e.user.language,i=l.a.getMonths(void 0===a?"no":a),u=(new Date).getMonth()+1,h=s.a.getYear(),b=parseInt(r||(u<6?h-1:h),10),d=s.a.monthRange(b+"-06-01",b+1+"-05-31"),p=s.a.monthRange(b-1+"-06-01",b+"-05-31"),m=s.a.weekRange(b+"-06-01",b+1+"-05-31").map((function(t){return t.week})),f=Math.floor(m.length/(m.length%6)),O=[],g=0,j=m.length;g<j;g+=f)O.push(m[g]);return Object(n.h)(t,null,Object(n.h)("h5",null,Object(n.h)(c.c,{id:"workout.graph.title"},"Treningsstatistikk")," ",b," - ",b+1),Object(n.h)("div",{class:"w-100 mt-3 mb-4"},Object(n.h)("small",{class:"mb-4"},Object(n.h)("small",null,Object(n.h)("table",{class:"table table-sm font-weigth-lighter border-bottom"},Object(n.h)("thead",null,Object(n.h)("tr",null,Object(n.h)("th",{style:"padding: .15rem;"},Object(n.h)(c.c,{id:"workout.graph.season"},"Sesong")),d.map((function(t){return Object(n.h)("th",{class:"text-right",style:"padding: .15rem;"},Object(n.h)("a",{href:"/workouts/month/"+t.month+"/"+t.year},i[t.month-1]))})))),Object(n.h)("tbody",null,Object(n.h)("tr",null,Object(n.h)("th",{scope:"row",style:"padding: .15rem;"},b-1," - ",b),p.map((function(o){return Object(n.h)(t,null,Object(n.h)("td",{class:"text-right",style:"padding: .15rem;"},Object(n.h)("nobr",null,e.findWorkoutSummaryMonth(o.year,o.month)),Object(n.h)("br",null),Object(n.h)("nobr",null,e.findWorkoutSummaryMonth(o.year,o.month,"elevation")),Object(n.h)("br",null)))})),Object(n.h)("td",{class:"text-muted",style:"padding: .15rem;"},Object(n.h)("nobr",null,Object(n.h)("i",{class:"fas fa-road"})," km"),Object(n.h)("br",null),Object(n.h)("nobr",null,Object(n.h)("i",{class:"fas fa-mountain"})," m"),Object(n.h)("br",null))),Object(n.h)("tr",null,Object(n.h)("th",{scope:"row",style:"padding: .15rem;"},b," - ",b+1),d.map((function(o){return Object(n.h)(t,null,Object(n.h)("td",{class:"text-right",style:"padding: .15rem;"},Object(n.h)("nobr",null,e.findWorkoutSummaryMonth(o.year,o.month)),Object(n.h)("br",null),Object(n.h)("nobr",null,e.findWorkoutSummaryMonth(o.year,o.month,"elevation")),Object(n.h)("br",null)))})),Object(n.h)("td",{class:"text-muted",style:"padding: .15rem;"},Object(n.h)("nobr",null,Object(n.h)("i",{class:"fas fa-road"})," km"),Object(n.h)("br",null),Object(n.h)("nobr",null,Object(n.h)("i",{class:"fas fa-mountain"})," m"),Object(n.h)("br",null)))))))))},o}(n.Component))||r)||r;e.a=u}).call(this,o("hosL").Fragment)},eK6s:function(t){t.exports={gaugeBackground:"gaugeBackground__1UGxt",gauge:"gauge__2ZDxd",success:"success__3UQxg",primary:"primary__3pPV6",secondary:"secondary__-Vrk_",info:"info__3t5zs",warning:"warning__1jHlR",danger:"danger__BLVC9",gaugeText:"gaugeText__1on-w"}},wanP:function(t,e,o){"use strict";(function(t){function r(t,e){var o=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),o.push.apply(o,r)}return o}function n(t,e,o){return e in t?Object.defineProperty(t,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[e]=o,t}var s,a=o("hosL"),c=(o("Utv1"),o("/eY4")),i=o("eK6s"),l=o.n(i),u={mouseData:{}},h=Object(c.a)(s=function(e){function o(t){var o;return(o=e.call(this,t)||this).state=function(t){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?r(Object(o),!0).forEach((function(e){n(t,e,o[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):r(Object(o)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(o,e))}))}return t}({},u),o.svgRef=null,o}var s,c;return c=e,(s=o).prototype=Object.create(c.prototype),s.prototype.constructor=s,s.__proto__=c,o.prototype.render=function(){var e=this,o=this.props,r=o.radius,n=void 0===r?50:r,s=o.percent,c=void 0===s?0:s,i=o.color,u=void 0===i?"success":i,h=o.total,b=void 0===h?"":h,d=o.completed,p=void 0===d?"":d,m=o.prefix,f=void 0===m?"":m,O=.3*n,g=n-O/2,j=.3*n,y=2*g*Math.PI,k=.75*y,w=k+" "+y,v="rotate(135, "+n+", "+n+")",x=k-Math.min(Math.max(c,0),100)/100*k,S=n/2.5,P=n/5;return Object(a.h)(t,null,Object(a.h)("svg",{xmlns:"http://www.w3.org/2000/svg",class:l.a.svg,width:2*n,height:2*n,preserveAspectRatio:"none",ref:function(t){return e.svgRef=t}},Object(a.h)("circle",{class:""+l.a.gaugeBackground,cx:n,cy:n,r:g,strokeWidth:O,strokeDasharray:w,strokeLinecap:"round",transform:v}),Object(a.h)("circle",{class:l.a[u]+" "+l.a.gauge,cx:n,cy:n,r:g,stroke:"url(#grad)",strokeDasharray:w,strokeDashoffset:x,strokeLinecap:"round",strokeWidth:j,style:{transition:"stroke-dashoffset 0.3s"},transform:v}),Object(a.h)("text",{class:l.a.gaugeText+" "+l.a[u],x:"50%",y:"50%","dominant-baseline":"middle","text-anchor":"middle","font-size":S},c," ",f),Object(a.h)("text",{class:l.a.gaugeText+" "+l.a[u],x:"50%",y:"65%","dominant-baseline":"middle","text-anchor":"middle","font-size":P},p),Object(a.h)("text",{class:l.a.gaugeText+" "+l.a.secondary,x:"50%",y:"90%","dominant-baseline":"middle","text-anchor":"middle","font-size":P},b)))},o}(a.Component))||s;e.a=h}).call(this,o("hosL").Fragment)}}]);
//# sourceMappingURL=route-workouts.chunk.11032.js.map