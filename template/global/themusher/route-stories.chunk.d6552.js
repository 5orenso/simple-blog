(window.webpackJsonp=window.webpackJsonp||[]).push([[56],{"+JSK":function(t,e,s){"use strict";(function(t){function o(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,o)}return s}function n(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}var r,a=s("hosL"),i=s("Utv1"),l=s("/eY4"),c=s("OhSV"),d=s("ZOvn"),u={},h=Object(l.a)(r=function(e){function s(t){var s;return(s=e.call(this,t)||this).toggleLikes=function(){s.setState({showLikesList:!s.state.showLikesList})},s.state=function(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?o(Object(s),!0).forEach((function(e){n(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):o(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}({},u),s}var r,l;return l=e,(r=s).prototype=Object.create(l.prototype),r.prototype.constructor=r,r.__proto__=l,s.prototype.render=function(){var e=this.state.showLikesList,s=this.props.stores,o=s.storyStore,n=s.teamStore,r=s.workoutStore,l=s.raceStore,u=this.props,h=u.likes,m=u.comments,b=u.type,p=void 0===b?"story":b,f=u.onTeamClick,O=void 0===f?function(){}:f;return Object(a.h)(t,null,Object(a.h)("div",{class:"d-flex justify-content-between mb-2"},h&&h.length>0&&Object(a.h)(t,null,Object(a.h)("div",{class:"d-flex flex-row flex-nowrap position-relative mr-3",style:"overflow: auto;"},Object(a.h)("span",{class:"text-muted mr-2",onClick:this.toggleLikes},Object(a.h)("i",{class:"fas fa-thumbs-up text-primary"})," ",h.length),h.slice(0,1).map((function(e){var s,c,u;"story"===p?(s=o.findPublicUser(e.user),c=o.findPublicTeamByMembers(e.user)):"team"===p?(s=n.findPublicUser(e.user),c=n.findPublicTeamByMembers(e.user)):"workout"===p?(s=r.findPublicUser(e.user),c=r.findPublicTeamByMembers(e.user)):"race"===p&&(s=l.findPublicUser(e.user),c=l.findPublicTeamByMembers(e.user)),i.a.isArray(c)&&(u=c.find((function(t){return 1===t.public})));d.a.getImage({user:s,team:u,priority:"user"}),d.a.displayNameShort(s);var h=d.a.displayName(s);return Object(a.h)(t,null,Object(a.h)("span",{class:"font-weight-lighter"},u?Object(a.h)(t,null,Object(a.h)("a",{href:"/teams/public/"+u.uuidv4,title:u.name,onClick:function(t){return O(t,u.uuidv4)}},h)):Object(a.h)(t,null,h)))})),h.length>1&&Object(a.h)(t,null,Object(a.h)("span",{class:"text-muted font-weight-lighter ml-2",onClick:this.toggleLikes},Object(a.h)(c.c,{id:"likes-comments.and",fields:{total:h.length-1}},"and ",h.length-1," others."))))),m&&m.length>0&&Object(a.h)("span",{class:"float-right text-muted"},Object(a.h)("i",{class:"fas fa-comment text-primary"})," ",m.length)),e&&Object(a.h)("div",{class:"mt-3 mb-3"},h&&h.map((function(e){var s,c,u;"story"===p?(s=o.findPublicUser(e.user),c=o.findPublicTeamByMembers(e.user)):"team"===p?(s=n.findPublicUser(e.user),c=n.findPublicTeamByMembers(e.user)):"workout"===p?(s=r.findPublicUser(e.user),c=r.findPublicTeamByMembers(e.user)):"race"===p&&(s=l.findPublicUser(e.user),c=l.findPublicTeamByMembers(e.user)),i.a.isArray(c)&&(u=c.find((function(t){return 1===t.public})));var h=d.a.getImage({user:s,team:u,priority:"user"}),m=d.a.displayNameShort(s),b=d.a.displayName(s,!0);return Object(a.h)("div",{class:"d-flex flex-row position-relative font-weight-light mb-1"},u?Object(a.h)(t,null,Object(a.h)("a",{href:"/teams/public/"+u.uuidv4,title:u.name,onClick:function(t){return O(t,u.uuidv4)},class:"stretched-link"},Object(a.h)("div",{class:"text-center border rounded-circle imageRounded imageRoundedThumb",style:h?'background-image: url("'+h+'"); background-size: cover;':""},!h&&Object(a.h)("div",{class:"",style:"font-size: 12px; padding-top: 3px;"},m))),Object(a.h)("div",{class:"ml-2 "},b," ",Object(a.h)("span",{class:"font-weight-lighter"},"- ",u.name))):Object(a.h)(t,null,Object(a.h)("div",{class:"text-center border rounded-circle imageRounded imageRoundedThumb",style:(h?'background-image: url("'+h+'"); background-size: cover;':"")+" opacity: 0.5;"},!h&&Object(a.h)("div",{class:"text-muted",style:"font-size: 12px; padding-top: 3px;"},m)),Object(a.h)("div",{class:"ml-2"},b)))}))))},s}(a.Component))||r;e.a=h}).call(this,s("hosL").Fragment)},"/922":function(t,e,s){"use strict";(function(t){var o,n=s("hosL"),r=s("Utv1"),a=s("/eY4"),i=s("OhSV"),l=s("go65"),c=s("om2D"),d=(s("ETxl"),s("ZOvn")),u=Object(a.a)(o=function(e){function s(t){var s;return(s=e.call(this,t)||this).beforeImagesUploaded=function(){s.setState({sendButtonEnabled:!1})},s.afterImagesUploaded=function(){s.setState({sendButtonEnabled:!0})},s.commentWorkout=function(){return new Promise((function(t,e){var o,n,r,a,i,l,c,u,h,m,b;return s.state.sendButtonEnabled?(r=void 0===(n=(o=s.props).callback)?function(){}:n,i=void 0===(a=o.inputRefObject)?{}:a,l=s.props.workout,c=s.props.stores.workoutStore,h=(u=s.state).comment,m=u.showAddImage,s.setState({sendButtonEnabled:!1}),Promise.resolve(c.commentWorkout({id:l.id,comment:h})).then((function(o){try{return(b=o)&&200===b.status&&(s.setState({comment:{body:"",images:[]}},(function(){d.a.resizeTextarea(i[l.id]),m&&s.addImage()})),r({workout:l,response:b})),s.setState({sendButtonEnabled:!0}),t()}catch(t){return e(t)}}),e)):t(!1)}))},s.addImages=function(t){var e,o=s.state.comment;(e=o.images).push.apply(e,t.value),s.setState({comment:o})},s.addImage=function(){var t=s.state.showAddImage;s.setState({showAddImage:!(void 0!==t&&t)})},s.handleImageErrored=function(t){var e=t.target;e.onerror=null,setTimeout((function(){e.src+="?"+new Date}),1e3)},s.state={comment:{body:"",images:[]},showAddImage:!1,sendButtonEnabled:!0},s.inputRef={},s}var o,a;return a=e,(o=s).prototype=Object.create(a.prototype),o.prototype.constructor=o,o.__proto__=a,s.prototype.render=function(){var e=this,s=this.props,o=s.inputRef,a=s.col,u=void 0===a?12:a,h=s.offset,m=void 0===h?0:h,b=s.showAvatar,p=void 0===b||b,f=s.extraClass,O=void 0===f?"":f,g=s.workout,j=this.state,v=j.comment,y=j.showAddImage,w=j.sendButtonEnabled,k=this.props.stores.userStore.user,x=void 0===k?{}:k,S=x.firstname?""+r.a.ucfirst(x.firstname,!0)+r.a.ucfirst(x.lastname,!0):""+r.a.ucfirst(x.email||"",!0),C=x.image||(x.images?x.images[0]:void 0);return Object(n.h)("div",{class:"col-"+u+" offset-"+m+" "+O},Object(n.h)("div",{class:"d-flex mb-0 position-relative w-100"},p&&Object(n.h)("div",{class:"text-center border rounded-circle imageRounded imageRoundedSmall",style:(C?"background-image: url('"+C.s3SmallLink+"'); background-size: cover;":"")+" border-width: 3px !important;"},!x.image&&Object(n.h)("span",{class:"font-weight-lighter",style:"font-size: 15px;"},S)),Object(n.h)("div",{class:"col pl-3",style:"line-height: 1.2em;"},Object(n.h)("div",{class:"d-flex bd-highlight"},Object(n.h)("div",{class:"p-0 w-100 bd-highlight"},Object(n.h)("label",{class:"sr-only",for:"inlineFormInput"},Object(n.h)(i.c,{id:"comments.comment"},"Kommentar")),Object(n.h)("div",{class:"border rounded rounded-lg position-relative"},Object(n.h)(i.b,null,Object(n.h)("textarea",{class:"form-control-plaintext px-2",type:"text",placeholder:Object(n.h)(i.c,{id:"comments.write-comment"},"Skriv en kommentar..."),onInput:Object(l.a)(this,"comment.body"),onKeyUp:d.a.resizeTextarea,onFocus:d.a.resizeTextarea,style:"height: 2.3em;",value:v.body,ref:o})),Object(n.h)("div",{class:"position-absolute",style:"top: 8px; right: 10px; font-size: 1.2em;"},Object(n.h)("i",{class:"fas fa-image pointerCursor","data-id":g.id,onClick:this.addImage})))),Object(n.h)("div",{class:"p-0 pl-2 flex-shrink-1 bd-highlight"},Object(n.h)("button",{type:"button",class:"btn btn-"+(w?"primary":"secondary")+" mb-2",disabled:!w,onClick:this.commentWorkout},Object(n.h)("i",{class:"fas fa-paper-plane"})))))),y&&Object(n.h)(t,null,Object(n.h)("div",{class:"col-12 text-center"},Object(n.h)("div",{class:"container-fluid"},Object(n.h)("div",{class:"row"},v.images&&v.images.map((function(t){return Object(n.h)("div",{class:"col-3 p-1"},Object(n.h)("img",{src:t.s3SmallLink,class:"img-fluid",onError:e.handleImageErrored}),Object(n.h)("button",{class:"btn btn-sm btn-link",onClick:e.removeImage,"data-name":t.name},Object(n.h)("i",{class:"fas fa-trash"}),"  ",Object(n.h)(i.c,{id:"comments.remove-image"},"Remove")))})))),Object(n.h)(c.a,{object:v,updateField:this.addImages,before:this.beforeImagesUploaded,after:this.afterImagesUploaded,autoOpen:!0}))))},s}(n.Component))||o;e.a=u}).call(this,s("hosL").Fragment)},"1OK2":function(t,e,s){"use strict";var o,n=s("hosL"),r=(s("Utv1"),s("/eY4"));Object(r.a)(o=function(t){function e(e){var s;(s=t.call(this,e)||this).touchStart=function(t){t.stopPropagation(),s.setState({startX:t.touches[0].pageX})},s.touchEnd=function(t){t.stopPropagation(),s.setState({startX:void 0,sliding:!1})},s.touchMove=function(t){if(t.stopPropagation(),s.state.totalImages>1){var e=s.state,o=e.startX,n=t.touches[0].pageX;e.sliding||(n>o+50?(s.setState({sliding:!0}),s.prevImage()):n<o-50&&(s.setState({sliding:!0}),s.nextImage()))}};var o=e.images,n=void 0===o?[]:o;return s.state={imageContainer:1,currentImage1:n[0]||{},currentImage2:{},currentIdx:0,totalImages:n.length||0,imageDots:[].concat(Array(n.length||0).fill(1).map((function(t,e){return t+e})))},s}var s,o;o=t,(s=e).prototype=Object.create(o.prototype),s.prototype.constructor=s,s.__proto__=o;var r=e.prototype;return r.nextImage=function(){var t,e=this.state,s=1===e.imageContainer?2:1,o=e.currentIdx+1;o>e.totalImages-1&&(o=0),this.setState(((t={})["currentImage"+s]=this.props.images[o],t.currentIdx=o,t.imageContainer=s,t))},r.prevImage=function(){var t,e=this.state,s=e.imageContainer,o=e.currentIdx-1;o<0&&(o=e.totalImages-1),this.setState(((t={})["currentImage"+(1===s?2:1)]=this.props.images[o],t.currentIdx=o,t.imageContainer=1===s?2:1,t))},r.componentWillReceiveProps=function(t){if(t.images!==this.props.images){var e=t.images,s=void 0===e?[]:e;this.setState({imageContainer:1,currentImage1:s.length>0?s[0]:{},currentImage2:{},currentIdx:0,totalImages:s.length||0,imageDots:[].concat(Array(s.length||0).fill(1).map((function(t,e){return t+e})))})}},r.render=function(){var t,e,s=this,o=this.state,r=o.currentImage1,a=o.currentImage2,i=o.imageContainer,l=o.totalImages,c=o.imageDots,d=o.currentIdx,u=this["image"+i],h=1===i?r:a;if(h.dimensions){var m=h.dimensions,b=m.width,p=m.height,f=m.orientation;f>4&&f<9?(t=b,e=p):(t=p,e=b)}var O=h.dimensions?e/t:u&&u.height?u.width/u.height:4/3;return l<=0?"":Object(n.h)("div",{class:"w-100"},Object(n.h)("div",{class:"border rounded position-relative w-100",style:"height: calc(85vw / "+O+"); overflow: hidden; transition: all .3s ease-in-out;",onTouchstart:this.touchStart,onTouchend:this.touchEnd,onTouchmove:this.touchMove},l>1&&Object(n.h)("span",{class:"position-absolute",style:"top:0px; right: 5px; z-index: 2000;"},Object(n.h)("small",null,d+1,"/",l)),r&&Object(n.h)("div",{class:"position-absolute",style:(1===i?"opacity: 1;":"opacity: 0;")+" transition: all .3s ease-in-out; top: 0; left: 0;"},Object(n.h)("img",{loading:"lazy",src:r.s3LargeLink,class:"img-fluid align-middle",ref:function(t){return s.image1=t}})),a&&Object(n.h)("div",{class:"position-absolute",style:(2===i?"opacity: 1;":"opacity: 0;")+" transition: all .3s ease-in-out; top: 0; left: 0;"},Object(n.h)("img",{loading:"lazy",src:a.s3LargeLink,class:"img-fluid align-middle",ref:function(t){return s.image2=t}}))),c.length>1&&Object(n.h)("div",{class:"w-100 text-center"},c.map((function(t){return Object(n.h)("span",{style:"color: "+(t===d+1?"#ffffff":"#808080")+";"},"â€¢")}))))},e}(n.Component))},"3wGD":function(t,e,s){"use strict";var o,n=s("hosL"),r=s("Utv1"),a=s("/eY4"),i=s("OhSV"),l=s("go65"),c=(s("ETxl"),s("ZOvn")),d=Object(a.a)(o=function(t){function e(e){var s;return(s=t.call(this,e)||this).commentWorkout=function(){return new Promise((function(t,e){var o,n,r,a,i,l,d,u,h,m,b;return s.state.sendButtonEnabled?(r=void 0===(n=(o=s.props).callback)?function(){}:n,a=o.commentId,l=void 0===(i=o.inputRefObject)?{}:i,d=s.props.workout,u=s.props.stores.workoutStore,m=void 0===(h=s.state.comment)?"":h,s.setState({sendButtonEnabled:!1}),Promise.resolve(u.commentReplyWorkout({id:d.id,commentId:a,comment:m})).then((function(o){try{return(b=o)&&200===b.status&&(s.setState({comment:""},(function(){c.a.resizeTextarea(l[a])})),r({workout:d,response:b,commentId:a})),s.setState({sendButtonEnabled:!0}),t()}catch(t){return e(t)}}),e)):t(!1)}))},s.state={sendButtonEnabled:!0},s.inputRef={},s}var s,o;return o=t,(s=e).prototype=Object.create(o.prototype),s.prototype.constructor=s,s.__proto__=o,e.prototype.render=function(){var t=this.props.inputRef,e=this.state,s=e.comment,o=e.sendButtonEnabled,a=this.props.stores.userStore.user,d=void 0===a?{}:a,u=d.firstname?""+r.a.ucfirst(d.firstname,!0)+r.a.ucfirst(d.lastname,!0):""+r.a.ucfirst(d.email||"",!0),h=d.image||(d.images?d.images[0]:void 0);return Object(n.h)("div",{class:"w-100"},Object(n.h)("div",{class:"d-flex mb-0 position-relative w-100"},Object(n.h)("div",{class:"text-center border rounded-circle imageRounded imageRoundedThumb",style:(h?"background-image: url('"+h.s3SmallLink+"'); background-size: cover;":"")+" border-width: 3px !important;"},!h&&Object(n.h)("span",{class:"font-weight-lighter",style:"font-size: 15px;"},u)),Object(n.h)("div",{class:"col pl-3",style:"line-height: 1.2em;"},Object(n.h)("div",{class:"d-flex bd-highlight"},Object(n.h)("div",{class:"p-0 w-100 bd-highlight"},Object(n.h)("label",{class:"sr-only",for:"inlineFormInput"},Object(n.h)(i.c,{id:"comments.comment"},"Kommentar")),Object(n.h)("div",{class:"border rounded rounded-lg position-relative"},Object(n.h)(i.b,null,Object(n.h)("textarea",{class:"form-control-plaintext px-2",type:"text",placeholder:Object(n.h)(i.c,{id:"comments.write-comment"},"Skriv en kommentar..."),onInput:Object(l.a)(this,"comment"),onKeyUp:c.a.resizeTextarea,style:"height: 2.3em;",value:s,ref:t})))),Object(n.h)("div",{class:"p-0 pl-2 flex-shrink-1 bd-highlight"},Object(n.h)("button",{type:"button",class:"btn btn-"+(o?"primary":"secondary")+" mb-2",disabled:!o,onClick:this.commentWorkout},Object(n.h)("i",{class:"fas fa-paper-plane"})))))))},e}(n.Component))||o;e.a=d},"4QWe":function(t,e,s){"use strict";(function(t){var o,n=s("hosL"),r=s("Utv1"),a=s("/eY4"),i=s("OhSV"),l=s("go65"),c=s("om2D"),d=s("ZOvn"),u=Object(a.a)(o=function(e){function s(t){var s;return(s=e.call(this,t)||this).beforeImagesUploaded=function(){s.setState({sendButtonEnabled:!1})},s.afterImagesUploaded=function(){s.setState({sendButtonEnabled:!0})},s.commentStory=function(){return new Promise((function(t,e){var o,n,r,a,i,l,c,u,h,m,b;return s.state.sendButtonEnabled?(r=void 0===(n=(o=s.props).callback)?function(){}:n,i=void 0===(a=o.inputRefObject)?{}:a,l=s.props.story,c=s.props.stores.storyStore,h=(u=s.state).comment,m=u.showAddImage,s.setState({sendButtonEnabled:!1}),Promise.resolve(c.commentStory({id:l.id,comment:h})).then((function(o){try{return(b=o)&&200===b.status&&(s.setState({comment:{body:"",images:[]}},(function(){d.a.resizeTextarea(i[l.id]),m&&s.addImage()})),r({story:l,response:b})),s.setState({sendButtonEnabled:!0}),t()}catch(t){return e(t)}}),e)):t(!1)}))},s.addImages=function(t){var e,o=s.state.comment;(e=o.images).push.apply(e,t.value),s.setState({comment:o})},s.addImage=function(){var t=s.state.showAddImage;s.setState({showAddImage:!(void 0!==t&&t)})},s.handleImageErrored=function(t){var e=t.target;e.onerror=null,setTimeout((function(){e.src+="?"+new Date}),1e3)},s.state={comment:{body:"",images:[]},showAddImage:!1,sendButtonEnabled:!0},s.inputRef={},s}var o,a;return a=e,(o=s).prototype=Object.create(a.prototype),o.prototype.constructor=o,o.__proto__=a,s.prototype.render=function(){var e=this,s=this.props,o=s.inputRef,a=s.story,u=this.state,h=u.comment,m=u.showAddImage,b=u.sendButtonEnabled,p=this.props.stores.userStore.user,f=void 0===p?{}:p,O=d.a.displayNameShort(f),g=(d.a.displayName(f),f.image||(f.images?f.images[0]:void 0));return Object(n.h)("div",null,Object(n.h)("div",{class:"d-flex mb-0 position-relative w-100"},Object(n.h)("div",{class:"text-center border rounded-circle imageRounded imageRoundedSmall",style:(g?"background-image: url('"+g.s3SmallLink+"'); background-size: cover;":"")+" border-width: 3px !important;"},!f.image&&Object(n.h)("span",{class:"font-weight-lighter",style:"font-size: 15px;"},O)),Object(n.h)("div",{class:"col pl-3",style:"line-height: 1.2em;"},Object(n.h)("div",{class:"d-flex bd-highlight"},Object(n.h)("div",{class:"p-0 w-100 bd-highlight"},Object(n.h)("label",{class:"sr-only",for:"inlineFormInput"},Object(n.h)(i.c,{id:"comments.comment"},"Kommentar")),Object(n.h)("div",{class:"border rounded rounded-lg position-relative"},Object(n.h)(i.b,null,Object(n.h)("textarea",{class:"form-control-plaintext px-2",type:"text",placeholder:Object(n.h)(i.c,{id:"comments.write-comment"},"Skriv en kommentar..."),onInput:Object(l.a)(this,"comment.body"),onKeyUp:d.a.resizeTextarea,onFocus:d.a.resizeTextarea,style:"height: 2.3em;",value:h.body,ref:o})),Object(n.h)("div",{class:"position-absolute",style:"top: 8px; right: 10px; font-size: 1.2em;"},Object(n.h)("i",{class:"fas fa-image pointerCursor","data-id":a.id,onClick:this.addImage})))),Object(n.h)("div",{class:"p-0 pl-2 flex-shrink-1 bd-highlight"},Object(n.h)("button",{type:"button",class:"btn btn-"+(b?"primary":"secondary")+" mb-2",disabled:!b,onClick:this.commentStory},Object(n.h)("i",{class:"fas fa-paper-plane"})))))),m&&Object(n.h)(t,null,Object(n.h)("div",{class:"col-12 text-center"},Object(n.h)("div",{class:"container-fluid"},Object(n.h)("div",{class:"row"},r.a.isArray(h.images)&&h.images.map((function(t){return Object(n.h)("div",{class:"col-3 p-1"},Object(n.h)("img",{src:t.s3SmallLink,class:"img-fluid",onError:e.handleImageErrored}),Object(n.h)("button",{class:"btn btn-sm btn-link",onClick:e.removeImage,"data-name":t.name},Object(n.h)("i",{class:"fas fa-trash"})," ",Object(n.h)(i.c,{id:"comments.remove-image"},"Remove")))})))),Object(n.h)(c.a,{object:h,updateField:this.addImages,before:this.beforeImagesUploaded,after:this.afterImagesUploaded,autoOpen:!0}))))},s}(n.Component))||o;e.a=u}).call(this,s("hosL").Fragment)},"5uob":function(t,e,s){"use strict";var o,n=s("hosL"),r=(s("Utv1"),s("/eY4")),a=s("OhSV"),i=s("go65"),l=(s("ETxl"),s("ZOvn")),c=Object(r.a)(o=function(t){function e(e){var s;return(s=t.call(this,e)||this).commentStory=function(){return new Promise((function(t,e){var o,n,r,a,i,c,d,u,h,m,b;return s.state.sendButtonEnabled?(r=void 0===(n=(o=s.props).callback)?function(){}:n,a=o.commentId,c=void 0===(i=o.inputRefObject)?{}:i,d=s.props.story,u=s.props.stores.storyStore,m=void 0===(h=s.state.comment)?"":h,s.setState({sendButtonEnabled:!1}),Promise.resolve(u.commentReplyStory({id:d.id,commentId:a,comment:m})).then((function(o){try{return(b=o)&&200===b.status&&(s.setState({comment:""},(function(){l.a.resizeTextarea(c[a])})),r({story:d,response:b,commentId:a})),s.setState({sendButtonEnabled:!0}),t()}catch(t){return e(t)}}),e)):t(!1)}))},s.state={sendButtonEnabled:!0},s.inputRef={},s}var s,o;o=t,(s=e).prototype=Object.create(o.prototype),s.prototype.constructor=s,s.__proto__=o;var r=e.prototype;return r.componentDidMount=function(){var t=this.props.initCall;(void 0===t?function(){}:t)()},r.render=function(){var t=this.props.inputRef,e=this.state,s=e.comment,o=e.sendButtonEnabled,r=this.props.stores.userStore.user,c=void 0===r?{}:r,d=l.a.displayNameShort(c),u=(l.a.displayName(c),c.image||(c.images?c.images[0]:void 0));return Object(n.h)("div",{class:"w-100"},Object(n.h)("div",{class:"d-flex mb-0 position-relative w-100"},Object(n.h)("div",{class:"text-center border rounded-circle imageRounded imageRoundedThumb",style:(u?"background-image: url('"+u.s3SmallLink+"'); background-size: cover;":"")+" border-width: 3px !important;"},!u&&Object(n.h)("span",{class:"font-weight-lighter",style:"font-size: 15px;"},d)),Object(n.h)("div",{class:"col pl-3",style:"line-height: 1.2em;"},Object(n.h)("div",{class:"d-flex bd-highlight"},Object(n.h)("div",{class:"p-0 w-100 bd-highlight"},Object(n.h)("label",{class:"sr-only",for:"inlineFormInput"},Object(n.h)(a.c,{id:"comments.comment"},"Kommentar")),Object(n.h)("div",{class:"border rounded rounded-lg position-relative"},Object(n.h)(a.b,null,Object(n.h)("textarea",{class:"form-control-plaintext px-2",type:"text",placeholder:Object(n.h)(a.c,{id:"comments.write-comment"},"Skriv en kommentar..."),onInput:Object(i.a)(this,"comment"),onKeyUp:l.a.resizeTextarea,style:"height: 2.3em;",value:s,ref:t})))),Object(n.h)("div",{class:"p-0 pl-2 flex-shrink-1 bd-highlight"},Object(n.h)("button",{type:"button",class:"btn btn-"+(o?"primary":"secondary")+" mb-2",disabled:!o,onClick:this.commentStory},Object(n.h)("i",{class:"fas fa-paper-plane"})))))))},e}(n.Component))||o;e.a=c},"8Lgr":function(t,e,s){"use strict";(function(t){function o(t){return a.a.format(t,t<5?2:1)}var n,r=s("hosL"),a=s("Utv1"),i=s("/eY4"),l=(s("OhSV"),s("ZOvn"),Object(i.a)(n=function(e){function s(){return e.apply(this,arguments)||this}var n,a;return a=e,(n=s).prototype=Object.create(a.prototype),n.prototype.constructor=n,n.__proto__=a,s.prototype.render=function(){var e=this.props,s=e.value,n=void 0===s?0:s,a=e.smallUnit,i=this.props.stores.userStore.user.settings;return(void 0===i?{}:i).imperial?Object(r.h)(t,null,Object(r.h)("nobr",null,o(function(t){return.621371*t}(n))," ",a?Object(r.h)(t,null,Object(r.h)("small",null,Object(r.h)("small",null,Object(r.h)("small",{class:"ml-0 text-muted"},"mi")))):Object(r.h)(t,null,"mi"))):Object(r.h)(t,null,Object(r.h)("nobr",null,o(n)," ",a?Object(r.h)(t,null,Object(r.h)("small",null,Object(r.h)("small",null,Object(r.h)("small",{class:"ml-0 text-muted"},"km")))):Object(r.h)(t,null,"km")))},s}(r.Component))||n);e.a=l}).call(this,s("hosL").Fragment)},AEg1:function(t,e,s){"use strict";(function(t){function o(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,o)}return s}function n(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}var r,a=s("hosL"),i=s("Utv1"),l=s("/eY4"),c=s("OhSV"),d=s("go65"),u=s("om2D"),h=s("ZOvn"),m={showAddImage:!1,showTeamChange:!1,showChangeVisibility:!1,showChangeType:!1,sendButtonEnabled:!0},b=Object(l.a)(r=function(e){function s(t){var s;return(s=e.call(this,t)||this).beforeImagesUploaded=function(){s.setState({sendButtonEnabled:!1})},s.afterImagesUploaded=function(){s.setState({sendButtonEnabled:!0})},s.addStory=function(){return new Promise((function(t,e){var o,n,r,a,i,l,c,d,u,m,b,p,f,O,g;return r=void 0===(n=(o=s.state).story)?{}:n,a=o.showAddImage,c=void 0===(l=(i=s.props).callback)?function(){}:l,u=void 0===(d=i.hashTags)?[]:d,m=i.postfix,p=void 0===(b=i.topic)?"team-"+r.team:b,f=s.props.stores.storyStore,o.sendButtonEnabled&&r.body?(s.setState({sendButtonEnabled:!1}),O=r.body,m&&(O+="\n\n"+m),u&&u.length>0&&(O+="\n\n"+u.map((function(t){return"#"+t})).join(" ")),Promise.resolve(f.insert({type:r.type,title:r.title,body:O,pinned:r.pinned,images:r.images,public:r.public?1:0,team:r.team,urlText:r.urlText,url:r.url,currency:r.currency,price:r.price,code:r.code,country:r.country,region:r.region,startDate:r.startDate,endDate:r.endDate,topic:p})).then(function(o){try{if((g=o)&&201===g.status)return Promise.resolve(f.loadPublicFeed({hashtags:u})).then(function(){try{return s.setState({story:{type:1,title:"",body:"",pinned:null,images:[],public:1,urlText:"",url:"",currency:"",price:null,code:"",country:"",region:"",startDate:null,endDate:null}},(function(){h.a.resizeTextarea(s.inputRef.newStoryBody),a&&s.addImage()})),c(g.data),n.call(this)}catch(t){return e(t)}}.bind(this),e);function n(){return s.setState({sendButtonEnabled:!0}),t()}return n.call(this)}catch(t){return e(t)}}.bind(this),e)):t(!1)}))},s.addImages=function(t){var e,o=s.state.story;(e=o.images).push.apply(e,t.value),s.setState({story:o})},s.removeImage=function(t){return new Promise((function(e){var o=s.state.story,n=t.target.parentElement.dataset.name||t.target.dataset.name;if(i.a.isArray(o.images)){var r=o.images.findIndex((function(t){return t.name===n}));r>-1&&o.images.splice(r,1)}return s.setState({story:o}),e()}))},s.addImage=function(){s.setState({showAddImage:!s.state.showAddImage})},s.changeVisibility=function(){s.setState({showChangeVisibility:!s.state.showChangeVisibility})},s.changePinned=function(){s.setState({showChangeVisibility:!s.state.showChangeVisibility})},s.changeType=function(){s.setState({showChangeType:!s.state.showChangeType})},s.toggleTeamChange=function(){s.setState({showTeamChange:!s.state.showTeamChange})},s.handleImageErrored=function(t){var e=t.target;e.onerror=null,setTimeout((function(){e.src+="?"+new Date}),1e3)},s.setPublicTeam=function(){var t=s.props.stores.userStore.findPublicTeams();if(i.a.isArray(t)&&t.length>0){var e=s.state.story;e.team=t[0].id,s.setState({story:e})}},s.setFocus=function(t){s.setState({hasFocus:!0}),h.a.resizeTextarea(t.target)},s.removeFocus=function(){s.setState({hasFocus:!1})},s.state=function(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?o(Object(s),!0).forEach((function(e){n(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):o(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}({story:{type:1,title:"",body:"",images:[],public:1,urlText:"",url:"",currency:"",price:0,code:"",country:"",region:"",startDate:"",endDate:""}},m),s.inputRef={},s}var r,l;l=e,(r=s).prototype=Object.create(l.prototype),r.prototype.constructor=r,r.__proto__=l;var b=s.prototype;return b.componentDidMount=function(){this.setPublicTeam()},b.render=function(){var e=this,s=this.props,o=s.col,n=void 0===o?12:o,r=s.offset,l=void 0===r?0:r,m=s.hashTags,b=void 0===m?[]:m,p=this.state,f=p.story,O=void 0===f?{}:f,g=p.showAddImage,j=p.showTeamChange,v=p.showChangeVisibility,y=p.showChangeType,w=p.sendButtonEnabled,k=p.hasFocus,x=this.props.stores,S=x.userStore,C=x.appState,I=S.user,P=void 0===I?{}:I,T=S.isAdmin,D=P.firstname?""+i.a.ucfirst(P.firstname,!0)+i.a.ucfirst(P.lastname,!0):""+i.a.ucfirst(P.email||"",!0),R=P.image||(P.images?P.images[0]:void 0);if(O.team){var _=parseInt(O.team,10),L=S.findTeam(_,!0);R=L.image||(L.images?L.images[0]:void 0)}var E=C.darkmode;return Object(a.h)("div",{class:"w-100 px-0"},Object(a.h)("div",{class:"row"},Object(a.h)("div",{class:"col-"+n+" offset-"+l+" col-sm-8 col-lg-6 offset-sm-2 offset-lg-3 rounded rounded-lg pt-3 pb-1 bg-"+(E?"black":"white")+" shadow-sm mb-1"},Object(a.h)("div",{class:"d-flex mb-0 position-relative w-100"},Object(a.h)("div",{class:"position-relative"},Object(a.h)("div",{class:"text-center border rounded-circle imageRounded imageRoundedSmall pointerCursor",style:(R?"background-image: url('"+R.s3SmallLink+"'); background-size: cover;":"")+" border-width: 3px !important;",onClick:this.toggleTeamChange},!R&&Object(a.h)("span",{class:"font-weight-lighter",style:"font-size: 15px;"},D)),Object(a.h)("div",{class:"position-absolute",style:"top: 16px; right: 0px;"},Object(a.h)("small",{class:"text-white",style:"font-size: 1.5em;"},Object(a.h)("i",{class:"fas fa-caret-down pointerCursor",onClick:this.toggleTeamChange})))),Object(a.h)("div",{class:"col pl-3 pr-0",style:"line-height: 1.2em;"},Object(a.h)("div",{class:"d-flex bd-highlight"},Object(a.h)("div",{class:"p-0 w-100 bd-highlight"},Object(a.h)("label",{class:"sr-only",for:"inlineFormInput"},Object(a.h)(c.c,{id:"story.body"},"Story")),Object(a.h)("div",{class:"border rounded rounded-lg position-relative"},Object(a.h)(c.b,null,Object(a.h)("textarea",{class:"form-control-plaintext px-2",type:"text",placeholder:Object(a.h)(c.c,{id:"story.write-body"},"Hva tenker du pÃ¥?.."),onInput:Object(d.a)(this,"story.body"),onKeyUp:h.a.resizeTextarea,onFocus:this.setFocus,style:"height: 2.3em;",value:O.body,ref:function(t){return e.inputRef.newStoryBody=t}})),k&&Object(a.h)("div",{class:"position-absolute",style:"bottom: 8px; right: 10px; font-size: 1.2em;"},Object(a.h)("i",{class:"fas fa-image pointerCursor","data-id":O.id,onClick:this.addImage}),Object(a.h)("i",{class:"fas fa-"+(1===O.public?"globe-europe":"users")+" pointerCursor ml-2","data-id":O.id,onClick:this.changeVisibility}),T&&Object(a.h)("i",{class:"fas fa-cog pointerCursor ml-2","data-id":O.id,onClick:this.changeType}))),b&&b.length>0&&Object(a.h)(t,null,b.map((function(e){return Object(a.h)(t,null,Object(a.h)("span",{class:"badge badge-secondary mr-2 my-1"},Object(a.h)("a",{href:"/stories/tag/"+e,class:"text-white"},"#",e)))})))),Object(a.h)("div",{class:"p-0 pl-2 flex-shrink-1 bd-highlight pt-auto"},Object(a.h)("button",{type:"button",class:"btn btn-"+(w?"primary":"secondary")+" ml-1",disabled:!w,onClick:this.addStory},Object(a.h)("i",{class:"fas fa-paper-plane"})))))),Object(a.h)("div",null,Object(a.h)("div",{class:"row"},j&&Object(a.h)(t,null,Object(a.h)("div",{class:"col-12 text-center mt-2"},Object(a.h)("div",{class:"form-group"},Object(a.h)("small",null,Object(a.h)("select",{class:"custom-select custom-select-sm",id:"team",onInput:Object(d.a)(this,"story.team"),onChange:this.toggleTeamChange},Object(a.h)("option",{value:""},"-- ",Object(a.h)(c.c,{id:"story.team-choose"},"Velg team")," --"),i.a.isArray(P.teams)&&P.teams.map((function(t){var e=S.findTeam(t,!0);return e&&e.public?Object(a.h)("option",{value:e.id,selected:O.team==e.id?"selected":""},e.name):""})),!P.teams&&Object(a.h)(t,null,Object(a.h)("option",{value:""},"No public teams"))))))),v&&Object(a.h)(t,null,T&&Object(a.h)(t,null,Object(a.h)("div",{class:"col-12 text-center mt-2"},Object(a.h)("div",{class:"form-group"},Object(a.h)("small",null,Object(a.h)("label",{for:"pinned"},"Pinned to top:"),Object(a.h)("input",{id:"pinned",type:"checkbox",onInput:Object(d.a)(this,"story.pinned"),value:1,checked:O.pinned?1:0}))))),Object(a.h)("div",{class:"col-12 text-center mt-2"},Object(a.h)("div",{class:"form-group"},Object(a.h)("small",null,Object(a.h)("select",{class:"custom-select custom-select-sm",id:"team",onInput:Object(d.a)(this,"story.public"),value:O.public,onChange:this.changeVisibility},Object(a.h)("option",{value:0,selected:0==O.public?"selected":""},"ðŸ‘¥ ",Object(a.h)(c.c,{id:"story.visibility-followers"},"Kun synlig for de som fÃ¸lger deg.")),Object(a.h)("option",{value:1,selected:1==O.public?"selected":""},"ðŸŒ ",Object(a.h)(c.c,{id:"story.visibility-public"},"Synlig for alle som bruker appen."))))))),y&&Object(a.h)(t,null,Object(a.h)("div",{class:"col-12 text-center mt-2"},Object(a.h)("div",{class:"form-group"},Object(a.h)("small",null,Object(a.h)("select",{class:"custom-select custom-select-sm",id:"team",onInput:Object(d.a)(this,"story.type"),value:O.type,onChange:this.changeType},Object(a.h)("option",{value:""},"-- ",Object(a.h)(c.c,{id:"story.type-choose"},"Velg type")," --"),Object(a.h)("option",{value:1,selected:1==O.type?"selected":""},"âœï¸ ",Object(a.h)(c.c,{id:"story.type-regular"},"Vanlig")),Object(a.h)("option",{value:2,selected:2==O.type?"selected":""},"ðŸš€ ",Object(a.h)(c.c,{id:"story.type-ad"},"Annonse")),Object(a.h)("option",{value:3,selected:3==O.type?"selected":""},"ðŸ“„ ",Object(a.h)(c.c,{id:"story.type-article"},"Artikkel"))))))),g&&Object(a.h)(t,null,Object(a.h)("div",{class:"col-12 text-center mt-2"},Object(a.h)("div",{class:"container-fluid"},Object(a.h)("div",{class:"row"},i.a.isArray(O.images)&&O.images.map((function(t){return Object(a.h)("div",{class:"col-3 p-1"},Object(a.h)("img",{src:t.s3SmallLink,class:"img-fluid",onError:e.handleImageErrored}),Object(a.h)("button",{class:"btn btn-sm btn-link",onClick:e.removeImage,"data-name":t.name},Object(a.h)("i",{class:"fas fa-trash"})," Del"))})))),Object(a.h)(u.a,{object:O,updateField:this.addImages,before:this.beforeImagesUploaded,after:this.afterImagesUploaded,autoOpen:!0}))),O.type>1&&Object(a.h)(t,null,Object(a.h)("div",{class:"col-12 mt-3"},Object(a.h)("label",null,Object(a.h)(c.c,{id:"story.url-text"},"URL text")),Object(a.h)("div",{class:"form-group"},Object(a.h)("small",null,Object(a.h)("input",{class:"form-control",type:"text",name:"urlText",onInput:Object(d.a)(this,"story.urlText"),value:O.urlText})))),Object(a.h)("div",{class:"col-12 mt-3"},Object(a.h)("label",null,Object(a.h)(c.c,{id:"story.url"},"URL")),Object(a.h)("div",{class:"form-group"},Object(a.h)("small",null,Object(a.h)("input",{class:"form-control",type:"text",name:"url",onInput:Object(d.a)(this,"story.url"),value:O.url}))))),2==O.type&&Object(a.h)(t,null,Object(a.h)("div",{class:"col-12 mt-3"},Object(a.h)("label",null,Object(a.h)(c.c,{id:"story.code"},"Code")),Object(a.h)("div",{class:"form-group"},Object(a.h)("small",null,Object(a.h)("input",{class:"form-control",type:"text",name:"code",onInput:Object(d.a)(this,"story.code"),value:O.code})))),Object(a.h)("div",{class:"col-12"},Object(a.h)("label",null,Object(a.h)(c.c,{id:"story.region"},"Region")),Object(a.h)("div",{class:"form-group"},Object(a.h)("small",null,Object(a.h)("input",{class:"form-control",type:"text",name:"region",onInput:Object(d.a)(this,"story.region"),value:O.region})))),Object(a.h)("div",{class:"col-12"},Object(a.h)("label",null,Object(a.h)(c.c,{id:"story.country"},"Country")),Object(a.h)("div",{class:"form-group"},Object(a.h)("small",null,Object(a.h)("input",{class:"form-control",type:"text",name:"country",onInput:Object(d.a)(this,"story.country"),value:O.country})))),Object(a.h)("div",{class:"col-4"},Object(a.h)("label",null,Object(a.h)(c.c,{id:"story.currency"},"Currency")),Object(a.h)("div",{class:"form-group"},Object(a.h)("small",null,Object(a.h)("input",{class:"form-control",type:"text",name:"currency",onInput:Object(d.a)(this,"story.currency"),value:O.currency})))),Object(a.h)("div",{class:"col-8"},Object(a.h)("label",null,Object(a.h)(c.c,{id:"story.price"},"Price")),Object(a.h)("div",{class:"form-group"},Object(a.h)("small",null,Object(a.h)("input",{class:"form-control",type:"text",name:"price",onInput:Object(d.a)(this,"story.price"),value:O.price}))))))))))},s}(a.Component))||r;e.a=b}).call(this,s("hosL").Fragment)},AJN2:function(t,e,s){"use strict";(function(t){function o(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,o)}return s}function n(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}var r,a=s("hosL"),i=(s("Utv1"),s("/eY4")),l=s("NMoA"),c=(s("ZOvn"),{}),d=Object(i.a)(r=function(e){function s(t){var s;return(s=e.call(this,t)||this).state=function(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?o(Object(s),!0).forEach((function(e){n(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):o(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}({},c),s.inputRef={},s}var r,i;i=e,(r=s).prototype=Object.create(i.prototype),r.prototype.constructor=r,r.__proto__=i;var d=s.prototype;return d.loadStoriesPublicFeed=function(t){return new Promise(function(e,s){return void 0===t&&(t=this.props),Promise.resolve(t.stores.storyStore.loadPublicFeed({story:t.story})).then((function(){try{return e()}catch(t){return s(t)}}),s)}.bind(this))},d.componentDidMount=function(){this.loadStoriesPublicFeed()},d.componentWillReceiveProps=function(t){t.story!==this.props.story&&this.loadStoriesPublicFeed(t)},d.render=function(){var e=this,s=this.props.stores,o=s.storyStore.publicFeed,n=s.appState.darkmode;return Object(a.h)("div",{class:"w-100"},Object(a.h)("div",{class:"row pb-4 bg-light"},Object(a.h)("div",{class:"col-12 col-sm-8 col-lg-6 offset-sm-2 offset-lg-3 my-1 position-relative rounded rounded-lg py-3 bg-"+(n?"black":"white")+" shadow-sm"},!o||0===o.length&&Object(a.h)(t,null,Object(a.h)("div",{class:"text-center text-muted mt-5"},Object(a.h)("div",{class:"display-1 text-center mb-5"},Object(a.h)("i",{class:"fas fa-comment"})),Object(a.h)("h3",null,"No story found!"))),o&&o.map((function(s){return Object(a.h)(t,null,Object(a.h)(l.a,{stores:e.props.stores,story:s,showAllComments:!0}))})))))},s}(a.Component))||r;e.a=d}).call(this,s("hosL").Fragment)},B95u:function(t,e,s){"use strict";(function(t){function o(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,o)}return s}function n(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?o(Object(s),!0).forEach((function(e){r(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):o(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}function r(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}var a,i=s("hosL"),l=s("Utv1"),c=s("/eY4"),d=s("cneo"),u=s("OhSV"),h=s("fh8t"),m=s.n(h),b=s("go65"),p=s("5uob"),f=(s("ETxl"),s("ZOvn")),O={showAddComment:{},showAllComments:!1,showAllReplies:{},viewImageIdx:{},likeComment:{},likeReply:{},showOriginal:{}},g=Object(c.a)(a=function(e){function s(t){var s;return(s=e.call(this,t)||this).addLikeComment=function(t){return new Promise((function(e,o){var n,r,a,i,l,c,d;return r=void 0===(n=s.props.callback)?function(){}:n,a=t.target.closest(".commentContainer").dataset.id,i=s.props.story,l=s.props.stores.storyStore,(c=s.state.likeComment)[a]=!0,s.setState({likeComment:c}),setTimeout((function(){var t=s.state.likeComment;delete t[a],s.setState({likeComment:t})}),1200),Promise.resolve(l.likeStoryComment({id:i.id,commentId:a})).then((function(t){try{return(d=t)&&200===d.status&&r({type:"likeComment",story:i,commentId:a,response:d}),e(!0)}catch(t){return o(t)}}),o)}))},s.likeReply=function(t){return new Promise((function(e,o){var n,r,a,i,l,c,d,u;return r=void 0===(n=s.props.callback)?function(){}:n,a=t.target.closest(".replyContainer").dataset.id,i=t.target.closest(".replyContainer").dataset.comment,l=s.props.story,c=s.props.stores.storyStore,(d=s.state.likeReply)[a]=!0,s.setState({likeReply:d}),setTimeout((function(){var t=s.state.likeReply;delete t[a],s.setState({likeReply:t})}),1200),Promise.resolve(c.likeStoryCommentReply({id:l.id,replyId:a,commentId:i})).then((function(t){try{return(u=t)&&200===u.status&&r({type:"likeReply",story:l,commentId:i,replyId:a,response:u}),e()}catch(t){return o(t)}}),o)}))},s.replyComment=function(t){return new Promise((function(e){var o=t.target.parentElement.dataset.id||t.target.dataset.id,n=s.state.showAddComment;return n[o]=!n[o],s.setState({showAddComment:n},(function(){s.inputRef[o]&&s.inputRef[o].focus()})),e()}))},s.toggleComments=function(){s.setState({showAllComments:!s.state.showAllComments})},s.toggleReplies=function(t){var e=t.target.parentElement.dataset.id||t.target.dataset.id,o=s.state.showAllReplies;o[e]=!o[e],s.setState({showAllReplies:o})},s.toggleMenu=function(t){var e=t.target.closest("i").dataset.id,o=s.state.showMenu,n=void 0===o?{}:o;n[e]=!n[e],s.setState({showDeleteComment:{},showEdit:{},showMenu:n})},s.toggleEdit=function(t){var e=t.target.closest("button").dataset,o=e.id,n=e.comment,r=s.state.showEdit,a=void 0===r?{}:r;a[o]=!a[o],s.setState({showDeleteComment:{},showEdit:a,showMenu:{},commentEditText:n})},s.toggleDeleteComment=function(t){var e=t.target.closest("button").dataset.id,o=s.state.showDeleteComment,n=void 0===o?{}:o;n[e]=!n[e],s.setState({showDeleteComment:n,showEdit:{},showMenu:{}})},s.deleteComment=function(t){return new Promise((function(e,o){var n;return n=t.target.closest("button").dataset.id,Promise.resolve(s.props.stores.storyStore.deleteCommentStory({id:s.props.story.id,commentId:n})).then((function(){try{return s.setState({commentEditText:"",showDeleteComment:{},showEdit:{},showMenu:{}}),e()}catch(t){return o(t)}}),o)}))},s.deleteCommentReply=function(t){return new Promise((function(e,o){var n;return n=t.target.closest("button").dataset,Promise.resolve(s.props.stores.storyStore.deleteCommentReplyStory({id:s.props.story.id,commentId:n.commentid,replyId:n.id})).then((function(){try{return s.setState({commentEditText:"",showDeleteComment:{},showEdit:{},showMenu:{}}),e()}catch(t){return o(t)}}),o)}))},s.saveComment=function(t){return new Promise((function(e,o){var n;return n=t.target.closest("button").dataset.id,Promise.resolve(s.props.stores.storyStore.editCommentStory({id:s.props.story.id,commentId:n,comment:s.state.commentEditText})).then((function(){try{return s.setState({commentEditText:"",showDeleteComment:{},showEdit:{},showMenu:{}}),e()}catch(t){return o(t)}}),o)}))},s.saveCommentReply=function(t){return new Promise((function(e,o){var n;return n=t.target.closest("button").dataset,Promise.resolve(s.props.stores.storyStore.editCommentReplyStory({id:s.props.story.id,commentId:n.commentid,replyId:n.id,comment:s.state.commentEditText})).then((function(){try{return s.setState({commentEditText:"",showDeleteComment:{},showEdit:{},showMenu:{}}),e()}catch(t){return o(t)}}),o)}))},s.viewImage=function(t){var e=t.target.closest("img").dataset,o=s.state.viewImageIdx;o[e.id]=e.idx,s.setState({viewImageIdx:o})},s.translate=function(t){return new Promise((function(e,o){function n(){return s.setState({showOriginal:b,translatedText:f}),e()}var r,a,i,l,c,d,u,h,m,b,p,f,O;return t.preventDefault(),t.stopPropagation(),r=t.target.closest("button").dataset,l=s.props.story,d=(c=s.props.stores).storyStore,u=c.userStore.user,f=void 0===(p=(h=s.state).translatedText)?{}:p,(b=void 0===(m=h.showOriginal)?{}:m)[O=(i=r.commentid)+((a=r.replyid)?"-"+a:"")]=0,a?Promise.resolve(d.translateCommentReply({commentid:i,replyid:a,story:l,user:u})).then(function(t){try{return f[O]=t,n.call(this)}catch(t){return o(t)}}.bind(this),o):Promise.resolve(d.translateComment({commentid:i,story:l,user:u})).then(function(t){try{return f[O]=t,n.call(this)}catch(t){return o(t)}}.bind(this),o)}))},s.showOriginal=function(t){var e=t.target.closest("button").dataset,o=e.replyid,n=e.commentid;t.preventDefault(),t.stopPropagation();var r=s.state.showOriginal,a=void 0===r?{}:r;a[n+(o?"-"+o:"")]=1,s.setState({showOriginal:a})},s.state=n(n({},O),{},{showAllComments:t.showAllComments}),s.inputRef={},s}var o,r;return r=e,(o=s).prototype=Object.create(r.prototype),o.prototype.constructor=o,o.__proto__=r,s.prototype.render=function(){var e,s=this,o=this.state,n=o.showAddComment,r=o.showAllComments,a=o.showAllReplies,c=o.viewImageIdx,h=o.showMenu,O=void 0===h?{}:h,g=o.showEdit,j=void 0===g?{}:g,v=o.showDeleteComment,y=void 0===v?{}:v,w=o.commentEditText,k=o.likeComment,x=o.showOriginal,S=void 0===x?{}:x,C=o.translatedText,I=void 0===C?{}:C,P=this.props,T=P.story,D=P.callback,R=void 0===D?function(){}:D,_=P.initCall,L=void 0===_?function(){}:_,E=P.compact,F=this.props.stores,A=F.userStore,N=F.storyStore,U=A.user,M=U.language,z=void 0===M?"en":M,B=[],V=0,W=0;return T.comments&&(V=T.comments.length,r?B=T.comments:(e=void 0!==E&&E?0:2,B=T.comments.slice(Math.max(V-e,0))),W=B.length),Object(i.h)("div",null,T&&l.a.isArray(B)&&B.reverse().map((function(o){var r=o.user,h=void 0===r?{}:r,g=N.findPublicTeamByMembers(h.id),v=f.a.displayNameShort(h),x=f.a.displayName(h),C=h.image||(h.images?h.images[0]:void 0),P=o.likes&&o.likes.findIndex((function(t){return t.user===U.id}))>-1,D=[],_=0,E=0;o.comments&&(_=o.comments.length,E=(D=a[o.id]?o.comments:o.comments.slice(0,e)).length);var F=[];if(o.images){var A=Object(d.i)(o.images);F.push.apply(F,A)}var M=c[o.id]?c[o.id]:0,B=F&&F[M]?F[M]:null,V=N.getCommentTranslations({story:T,commentid:o.id,targetLang:z})||I[o.id],W=V||o.comment;return S[o.id]&&(W=o.comment),Object(i.h)("div",{class:"row"},Object(i.h)("div",{class:"col-11 offset-1 d-flex mb-2 position-relative"},Object(i.h)("div",{class:"text-center border rounded-circle imageRounded imageRoundedSmall",style:(C?'background-image: url("'+C.s3SmallLink+'"); background-size: cover;':"")+" border-width: 3px !important;"},!h.image&&Object(i.h)("span",{class:"font-weight-lighter",style:"font-size: 15px;"},v)),Object(i.h)("div",{class:"flex-grow-1 pl-3 pt-0",style:"line-height: 1.2em;"},Object(i.h)("div",{class:"bg-light p-2 rounded rounded-lg position-relative"},U.id===h.id&&Object(i.h)(t,null,Object(i.h)("span",{class:"float-right font-weight-lighter text-muted"},Object(i.h)("i",{class:"fas fa-ellipsis-h",onClick:s.toggleMenu,"data-id":o.id}))),O[o.id]&&Object(i.h)(t,null,Object(i.h)("div",{class:"position-absolute bg-white p-2 border rounded rounded-lg shadow-sm",style:"top: 30px; right: 10px; width: 60%; z-index: 999999;"},Object(i.h)("button",{class:"btn btn-link btn-block text-left",onClick:s.toggleEdit,"data-id":o.id,"data-comment":o.comment},Object(i.h)("i",{class:"fas fa-edit"})," Edit"),Object(i.h)("hr",null),Object(i.h)("button",{class:"btn btn-link btn-block text-left",onClick:s.toggleDeleteComment,"data-id":o.id},Object(i.h)("i",{class:"fas fa-trash-alt"})," Delete"))),Object(i.h)("div",null,Object(i.h)("span",{style:"font-size: 0.95em;"},Object(i.h)("h5",{class:"font-weight-bold mb-2",style:"font-size: 1.0em;"},h.uuidv4&&h.uuidv4!==U.uuidv4?Object(i.h)(t,null,Object(i.h)("a",{href:"/inbox/"+h.uuidv4},x)):Object(i.h)(t,null,x),g&&g.length>0&&Object(i.h)(t,null,Object(i.h)("span",{class:"font-weight-lighter text-muted ml-1"},g.filter((function(t){return 1===t.public})).slice(0,1).map((function(e){return Object(i.h)(t,null,"- ",Object(i.h)("a",{href:"/teams/public/"+e.uuidv4},e.name))}))))),j[o.id]?Object(i.h)(t,null,Object(i.h)("div",{class:"d-flex bd-highlight"},Object(i.h)("div",{class:"p-0 w-100 bd-highlight"},Object(i.h)("label",{class:"sr-only",for:"inlineFormInput"},Object(i.h)(u.c,{id:"comments.comment"},"Kommentar")),Object(i.h)("div",{class:"border rounded rounded-lg position-relative"},Object(i.h)(u.b,null,Object(i.h)("textarea",{class:"form-control-plaintext px-2",type:"text",placeholder:Object(i.h)(u.c,{id:"comments.write-comment"},"Skriv en kommentar..."),onInput:Object(b.a)(s,"commentEditText"),onKeyUp:f.a.resizeTextarea,onFocus:f.a.resizeTextarea,style:"height: 2.3em;",value:w})))),Object(i.h)("div",{class:"p-0 pl-2 flex-shrink-1 bd-highlight"},Object(i.h)("button",{type:"button",class:"btn btn-primary mb-2",onClick:s.saveComment,"data-id":o.id},Object(i.h)("i",{class:"fas fa-paper-plane"}))))):Object(i.h)(t,null,Object(i.h)(m.a,{markdown:f.a.replaceImages(W,o.images,z),markdownOpts:f.a.getMarkdownOptions()})),y[o.id]&&Object(i.h)("div",{class:"clearfix mt-3 mb-3"},Object(i.h)("button",{class:"btn btn-danger float-left",onClick:s.deleteComment,"data-id":o.id},Object(i.h)("i",{class:"fas fa-trash-alt"})," Delete"),Object(i.h)("button",{class:"btn btn-secondary float-right",onClick:s.toggleDeleteComment,"data-id":o.id},Object(i.h)("i",{class:"fas fa-times-circle"})," Cancel")))),Object(i.h)("div",null,Object(i.h)("div",{class:"container-fluid px-3 mt-1"},B&&Object(i.h)("div",{class:"clearfix row position-relative"},Object(i.h)("div",{class:"commentContainer col-12 px-0 overflow-hidden",style:"max-height: 60vh;",onDblclick:s.addLikeComment,"data-id":o.id},Object(i.h)("img",{loading:"lazy",class:"img-fluid",style:"min-width: 100px;",src:B.s3LargeLink})),k[o.id]&&Object(i.h)("span",{class:"likeHeart position-absolute text-white display-1",style:"top: calc(50% - 50px); left: calc(50% - 50px); width: 100px; height: 100px;"},Object(i.h)("i",{class:"fas fa-heart likeStory"}))),F&&F.length>1&&Object(i.h)("div",{class:"clearfix d-flex flex-wrap row"},l.a.isArray(F)&&F.map((function(e,n){return Object(i.h)(t,null,Object(i.h)("div",{class:"col px-0 overflow-hidden",style:"max-height: 100px; min-width: 100px;"},Object(i.h)("img",{loading:"lazy",class:"img-fluid border",style:"min-width: 100px;",src:e.s3SmallLink,onClick:s.viewImage,"data-id":o.id,"data-idx":n})))})))))),Object(i.h)("small",null,Object(i.h)("button",{class:"commentContainer btn btn-sm btn-link py-0 "+(P?"text-primary":""),onClick:s.addLikeComment,"data-id":o.id,disabled:P},P?Object(i.h)(u.c,{id:"comments.has-liked"},"Liked"):Object(i.h)(u.c,{id:"comments.like"},"Lik")),"-",Object(i.h)("button",{class:"btn btn-sm btn-link py-0",onClick:s.replyComment,"data-id":o.id},Object(i.h)(u.c,{id:"comments.comment-add"},"Kommentar")),o.language!==z&&Object(i.h)(t,null,"-",!S[o.id]&&V?Object(i.h)(t,null,Object(i.h)("button",{type:"button",class:"btn btn-sm btn-link","data-commentid":o.id,onClick:s.showOriginal},Object(i.h)("i",{class:"fas fa-cog"}),"  ",Object(i.h)(u.c,{id:"home.translate-show-original"},"Show original"))):Object(i.h)(t,null,Object(i.h)("button",{type:"button",class:"btn btn-sm btn-link",onClick:s.translate,"data-commentid":o.id},Object(i.h)("i",{class:"fas fa-cog"})," ",Object(i.h)(u.c,{id:"home.translate-to"},"See translation")))),"-",Object(i.h)("button",{class:"btn btn-sm btn-link py-0 disabled"},l.a.formatDistance(o.createdDate,new Date,{locale:"no-NB"}),o.updatedDate&&Object(i.h)(t,null,Object(i.h)("span",{class:"font-weight-light ml-2"},"(Edited ",l.a.formatDistance(o.updatedDate,new Date,{locale:"no-NB"}),")"))))),o.likes&&o.likes.length>0&&Object(i.h)("small",{class:"position-absolute bg-light shadow-sm rounded-lg py-0 px-1",style:"bottom: 20px; right: 15px;"},Object(i.h)("i",{class:"fas fa-thumbs-up text-primary"})," ",o.likes.length)),Object(i.h)("div",{class:"col-10 offset-2 mb-2"},o&&l.a.isArray(D)&&D.map((function(e){var n=e.user,r=void 0===n?{}:n,a=N.findPublicTeamByMembers(r.id),c=f.a.displayNameShort(r),d=f.a.displayName(r),h=r.image||(r.images?r.images[0]:void 0),p=e.likes&&e.likes.findIndex((function(t){return t.user===U.id}))>-1,g=N.getCommentReplyTranslations({story:T,commentid:o.id,replyid:e.id,targetLang:z})||I[o.id+"-"+e.id],v=g||e.comment;return S[o.id+"-"+e.id]&&(v=e.comment),Object(i.h)("div",{class:"row"},Object(i.h)("div",{class:"col-12 d-flex mb-2 position-relative"},Object(i.h)("div",{class:"text-center border rounded-circle imageRounded imageRoundedSmall",style:(h?'background-image: url("'+h.s3SmallLink+'"); background-size: cover;':"")+" border-width: 3px !important;"},!r.image&&Object(i.h)("span",{class:"font-weight-lighter",style:"font-size: 15px;"},c)),Object(i.h)("div",{class:"flex-grow-1 pl-3 pt-0",style:"line-height: 1.2em;"},Object(i.h)("div",{class:"bg-light p-2 rounded-lg position-relative"},U.id===r.id&&Object(i.h)(t,null,Object(i.h)("span",{class:"float-right font-weight-lighter text-muted"},Object(i.h)("i",{class:"fas fa-ellipsis-h",onClick:s.toggleMenu,"data-id":e.id}))),O[e.id]&&Object(i.h)(t,null,Object(i.h)("div",{class:"position-absolute bg-white p-2 border rounded rounded-lg shadow-sm",style:"top: 30px; right: 10px; width: 60%; z-index: 999999;"},Object(i.h)("button",{class:"btn btn-link btn-block text-left",onClick:s.toggleEdit,"data-id":e.id,"data-comment":e.comment},Object(i.h)("i",{class:"fas fa-edit"})," Edit"),Object(i.h)("hr",null),Object(i.h)("button",{class:"btn btn-link btn-block text-left",onClick:s.toggleDeleteComment,"data-id":e.id},Object(i.h)("i",{class:"fas fa-trash-alt"})," Delete"))),Object(i.h)("span",{style:"font-size: 0.95em;"},Object(i.h)("h5",{class:"font-weight-bold mb-2",style:"font-size: 1.0em;"},d,a&&a.length>0&&Object(i.h)(t,null,Object(i.h)("span",{class:"font-weight-lighter text-muted ml-2"},a.filter((function(t){return 1===t.public})).slice(0,1).map((function(e){return Object(i.h)(t,null,"- ",Object(i.h)("a",{href:"/teams/public/"+e.uuidv4,class:"mr-2"}," ",e.name))}))))),j[e.id]?Object(i.h)(t,null,Object(i.h)("div",{class:"d-flex bd-highlight"},Object(i.h)("div",{class:"p-0 w-100 bd-highlight"},Object(i.h)("label",{class:"sr-only",for:"inlineFormInput"},Object(i.h)(u.c,{id:"comments.comment"},"Kommentar")),Object(i.h)("div",{class:"border rounded rounded-lg position-relative"},Object(i.h)(u.b,null,Object(i.h)("textarea",{class:"form-control-plaintext px-2",type:"text",placeholder:Object(i.h)(u.c,{id:"comments.write-comment"},"Skriv en kommentar..."),onInput:Object(b.a)(s,"commentEditText"),onKeyUp:f.a.resizeTextarea,onFocus:f.a.resizeTextarea,style:"height: 2.3em;",value:w})))),Object(i.h)("div",{class:"p-0 pl-2 flex-shrink-1 bd-highlight"},Object(i.h)("button",{type:"button",class:"btn btn-primary mb-2",onClick:s.saveCommentReply,"data-commentid":o.id,"data-id":e.id},Object(i.h)("i",{class:"fas fa-paper-plane"}))))):Object(i.h)(t,null,Object(i.h)(m.a,{markdown:f.a.replaceImages(v,e.images,z),markdownOpts:f.a.getMarkdownOptions()})),y[e.id]&&Object(i.h)("div",{class:"clearfix mt-3 mb-3"},Object(i.h)("button",{class:"btn btn-danger float-left",onClick:s.deleteCommentReply,"data-id":e.id,"data-commentid":o.id},Object(i.h)("i",{class:"fas fa-trash-alt"})," Delete"),Object(i.h)("button",{class:"btn btn-secondary float-right",onClick:s.toggleDeleteComment,"data-id":e.id},Object(i.h)("i",{class:"fas fa-times-circle"})," Cancel")))),Object(i.h)("small",null,Object(i.h)("button",{class:"replyContainer btn btn-sm btn-link py-0 "+(p?"text-primary":""),onClick:s.likeReply,"data-comment":o.id,"data-id":e.id,disabled:p},p?Object(i.h)(u.c,{id:"comments.has-liked"},"Liked"):Object(i.h)(u.c,{id:"comments.like"},"Lik")),"-",Object(i.h)("button",{class:"btn btn-sm btn-link py-0",onClick:s.replyComment,"data-id":o.id},Object(i.h)(u.c,{id:"comments.comment-add"},"Kommentar")),e.language!==z&&Object(i.h)(t,null,"-",!S[o.id+"-"+e.id]&&g?Object(i.h)(t,null,Object(i.h)("button",{type:"button",class:"btn btn-sm btn-link","data-commentid":o.id,"data-replyid":e.id,onClick:s.showOriginal},Object(i.h)("i",{class:"fas fa-cog"}),"  ",Object(i.h)(u.c,{id:"home.translate-show-original"},"Show original"))):Object(i.h)(t,null,Object(i.h)("button",{type:"button",class:"btn btn-sm btn-link",onClick:s.translate,"data-commentid":o.id,"data-replyid":e.id},Object(i.h)("i",{class:"fas fa-cog"})," ",Object(i.h)(u.c,{id:"home.translate-to"},"See translation")))),"-",Object(i.h)("button",{class:"btn btn-sm btn-link py-0 disabled"},l.a.formatDistance(e.createdDate,new Date,{locale:"no-NB"}),e.updatedDate&&Object(i.h)(t,null,Object(i.h)("span",{class:"font-weight-light ml-2"},"(Edited ",l.a.formatDistance(e.updatedDate,new Date,{locale:"no-NB"}),")"))))),e.likes&&Object(i.h)("small",{class:"position-absolute bg-light shadow-sm rounded-lg py-0 px-1",style:"bottom: 20px; right: 15px;"},Object(i.h)("i",{class:"fas fa-thumbs-up text-primary"})," ",e.likes.length)))})),_-E>0&&Object(i.h)("div",null,Object(i.h)("button",{class:"btn btn-sm btn-link py-0",onClick:s.toggleReplies,"data-id":o.id},Object(i.h)(u.c,{id:"comments.show-more",fields:{more:_-E}},"Vis ",_-E," flere kommentarer...")))),n[o.id]&&Object(i.h)("div",{class:"col-11 offset-1 d-flex mb-2 position-relative"},Object(i.h)(p.a,{stores:s.props.stores,story:T,initCall:L,callback:R,commentId:o.id,inputRef:function(t){return s.inputRef[o.id]=t},inputRefObject:s.inputRef,key:"story-commentreply-"+o.id})))})),V-W>0&&Object(i.h)("div",null,Object(i.h)("button",{class:"btn btn-sm btn-link py-0",onClick:this.toggleComments},Object(i.h)(u.c,{id:"comments.show-more",fields:{more:V-W}},"Vis ",V-W," flere kommentarer..."))),r&&Object(i.h)("div",null,Object(i.h)("button",{class:"btn btn-sm btn-link py-0",onClick:this.toggleComments},Object(i.h)(u.c,{id:"comments.hide-all-comments"},"Skjul alle kommentarene."))))},s}(i.Component))||a;e.a=g}).call(this,s("hosL").Fragment)},ETxl:function(t){t.exports={hoverelementonly:"hoverelementonly__1mJGJ",hoverElement:"hoverElement__axh3O",hoverelementhide:"hoverelementhide__1k_qH","progress-bar-vertical":"progress-bar-vertical__1B2sC","progress-bar":"progress-bar__pnsVj",dragged:"dragged__QXO46",over:"over__1re3x",list:"list__q_emZ"}},ISGx:function(t,e,s){"use strict";(function(t){function o(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,o)}return s}function n(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?o(Object(s),!0).forEach((function(e){r(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):o(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}function r(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}var a,i=s("hosL"),l=s("Utv1"),c=s("/eY4"),d=s("cneo"),u=s("OhSV"),h=s("fh8t"),m=s.n(h),b=s("Y3FI"),p=s("s4FZ"),f=s("ZQlJ"),O=s("sqi2"),g=s("/922"),j=s("eQ6k"),v=s("+JSK"),y=s("vY+r"),w=s("nHdA"),k=s("irB3"),x=s("UwwE"),S=s("8Lgr"),C=s("QkTp"),I=s("ZOvn"),P={showAddComment:{},likeWorkout:{},idxSuggestion:0,idxAd:4,limit:15,offset:0,hasFollowSugguestions:!1,hasAd:!1,sessionid:(new Date).getTime()},T=Object(c.a)(a=function(e){function s(t){var s;return(s=e.call(this,t)||this).toggleDate=function(t){t.stopPropagation(),t.preventDefault(),s.setState({showDate:!s.state.showDate})},s.likeWorkout=function(t){return new Promise((function(e,o){var n,r,a,i;return n=parseInt(t.target.closest(".imageContainer").dataset.id,10),r=s.props.stores.workoutStore,(a=s.state.likeWorkout)[n]=!0,s.setState({likeWorkout:a}),setTimeout((function(){var t=s.state.likeWorkout;delete t[n],s.setState({likeWorkout:t})}),1200),Promise.resolve(r.likeWorkout({id:n})).then((function(t){try{return(i=t)&&200===i.status&&s.addLikeToFeed(n,i.data),e()}catch(t){return o(t)}}),o)}))},s.addCommentToFeed=function(t){var e=t.type,o=t.workout,n=t.response,r=t.commentId,a=t.replyId,i=s.props.holdingStore,l=void 0===i?"team":i;if("team"===l){var c=s.props.stores.teamStore;switch(e){case"likeComment":c.addLikeToComment({id:o.id,data:n.data,commentId:r});break;case"likeReply":c.addLikeToCommentReply({id:o.id,data:n.data,commentId:r,replyId:a});break;default:r?c.addCommentToWorkoutComment({id:o.id,data:n.data,commentId:r}):c.addCommentToWorkout({id:o.id,data:n.data})}}else if("story"===l){var d=s.props.stores.storyStore;switch(e){case"likeComment":d.workoutsAddLikeToComment({id:o.id,data:n.data,commentId:r});break;case"likeReply":d.workoutsAddLikeToCommentReply({id:o.id,data:n.data,commentId:r,replyId:a});break;default:r?d.workoutsAddCommentToWorkoutComment({id:o.id,data:n.data,commentId:r}):d.workoutsAddCommentToWorkout({id:o.id,data:n.data})}}},s.addLikeToFeed=function(t,e){var o=s.props.holdingStore,n=void 0===o?"team":o;if("team"===n)s.props.stores.teamStore.addLikeToWorkout({id:t,data:e});else if("story"===n){s.props.stores.storyStore.workoutsAddLikeToWorkout({id:t,data:e})}},s.toggleAddComment=function(t){var e=t.target.closest("button").dataset.id,o=s.state.showAddComment;o[e]?delete o[e]:o[e]=!0,s.setState({showAddComment:o},(function(){s.inputRef[e]&&s.inputRef[e].focus()}))},s.shareLink=function(t){var e=t.target.closest("button").dataset;s.props.stores.appState.shareUrl({url:e.url,title:e.title,text:e.text})},s.showWorkoutDetail=function(t){if("a"===t.target.localName)return!1;var e=t.target.closest("#workoutDetail");if(e){var s=e.dataset.id;s&&(console.log({target:e,id:s}),Object(b.route)("/workouts/public/"+s))}},s.translate=function(t){return new Promise((function(e,o){var n,r,a,i,l,c,d;return t.preventDefault(),t.stopPropagation(),r=void 0===(n=s.props.feed)?{}:n,i=(a=s.props.stores).teamStore,l=a.userStore.user,Promise.resolve(i.translate({object:r,user:l,field:"name"})).then(function(t){try{if(c=t,r.comment)return Promise.resolve(i.translate({object:r,user:l,field:"comment"})).then(function(t){try{return d=t,n.call(this)}catch(t){return o(t)}}.bind(this),o);function n(){return s.setState({showOriginal:0,translatedTextName:c,translatedTextComment:d}),e()}return n.call(this)}catch(t){return o(t)}}.bind(this),o)}))},s.showOriginal=function(t){t.preventDefault(),t.stopPropagation(),s.setState({showOriginal:1})},s.state=n({},P),s.inputRef={},s.containerRef=null,s}var o,r;return r=e,(o=s).prototype=Object.create(r.prototype),o.prototype.constructor=o,o.__proto__=r,s.prototype.render=function(){var e,s=this,o=this.props,r=o.feed,a=o.onTeamClick,c=void 0===a?function(){}:a,h=o.onUserClick,b=void 0===h?function(){}:h,P=o.onDogClick,T=void 0===P?function(){}:P,D=o.holdingStore,R=void 0===D?"team":D,_=this.state,L=_.showAddComment,E=_.showDate,F=_.likeWorkout,A=_.showOriginal,N=_.translatedTextName,U=_.translatedTextComment,M=this.props.stores,z=M.teamStore,B=M.storyStore,V=M.userStore,W=M.appState,q=V.user,K=V.isAdmin,Y=q.language,Z=void 0===Y?"en":Y,H=W.hasShareApi,J={},G={};if("team"===R)J=z.findPublicTeam(r.team),G=z.findPublicUser(r.user)||{},e=z.publicDogs;else if("story"===R){J=B.findPublicTeam(r.team),G=B.findPublicUser(r.user)||{},e=B.publicDogs}V.findTeamAmbition({ambition:J.ambitions,language:Z});var Q,X,$=V.findTeamType({type:J.type,language:Z}),tt=!(!J||!J.members)&&J.members.some((function(t){return t===q.id})),et=I.a.getImage({user:G,team:J,object:r,priority:"user"}),st=r.likes,ot=r.comments,nt=r.likes&&r.likes.findIndex((function(t){return t.user===q.id}))>-1,rt=J&&J.followers?J.followers.length:0,at=J.members&&J.members.indexOf(q.id)>-1,it=J&&J.followers&&J.followers.indexOf(q.id)>-1,lt=J.followRequests&&J.followRequests.findIndex((function(t){return t.id===q.id}))>-1,ct=V.findEquipment({equipment:r.equipment,language:Z}),dt=V.findEquipment({equipment:r.equipment,field:"icon"}),ut=r.gpxInfo,ht=void 0===ut?{}:ut;G&&(I.a.displayNameShort(G),I.a.displayName(G),Q=I.a.displayName(G),G.settings&&G.uuidv4!==q.uuidv4&&(X=G.settings.hideProfile?null:"/inbox/"+G.uuidv4));var mt=[];if(r.mapImage&&mt.push(n(n({},r.mapImage),{},{type:"map"})),r.images){var bt=Object(d.i)(r.images);mt.push.apply(mt,bt)}var pt=r.currentLocationGeocode,ft=void 0===pt?{}:pt,Ot=I.a.getViews(r.statistics),gt=I.a.getAdminData(r.statistics);if(!J||!J.name)return"";var jt=I.a.getTranslation({object:r,targetLang:Z,field:"name"})||N,vt=jt||r.name,yt=I.a.getTranslation({object:r,targetLang:Z,field:"comment"})||U||r.comment;return A&&(vt=r.name,yt=r.comment),Object(i.h)(t,null,Object(i.h)("div",{class:"d-flex position-relative"},Object(i.h)("div",{class:"text-center"},Object(i.h)("div",{class:"position-relative text-center border rounded-circle imageRounded imageRoundedMedium",style:et?'background-image: url("'+et+'"); background-size: cover;':""},!et&&Object(i.h)("i",{class:"fas fa-users text-muted mt-2",style:"font-size: 20px;"}))),Object(i.h)("div",{class:"flex-grow-1 pl-3 text-overflow",style:"line-height: 1.2em;"},Object(i.h)("span",{class:"badge badge-pill badge-secondary float-right"},$),Object(i.h)("h5",{class:"mb-1 position-relative",style:"line-height: 1.0em;"},J.public?Object(i.h)(t,null,Object(i.h)("a",{href:"/teams/public/"+J.uuidv4,onClick:function(t){return c(t,J.uuidv4)},class:"stretched-link"},J.name)):Object(i.h)(t,null,J.name)),Object(i.h)("div",{class:"mb-2"},r.date&&Object(i.h)("small",{class:"text-muted",onClick:this.toggleDate},E?l.a.formatDate(r.date,{locale:"no-NB",hour12:!1,hour:"2-digit",minute:"2-digit"}):l.a.formatDistance(r.date,new Date,{locale:"no-NB"})),1===r.public?Object(i.h)(t,null,Object(i.h)("small",{class:"ml-2 text-muted"},Object(i.h)("i",{class:"fas fa-globe-europe"}))):Object(i.h)(t,null,Object(i.h)("small",{class:"ml-2 text-muted"},Object(i.h)("i",{class:"fas fa-users"})," (",l.a.format(rt),")")),Q&&Object(i.h)(t,null,Object(i.h)("small",{class:"ml-2 text-muted"},X?Object(i.h)(t,null,Object(i.h)("i",{class:"fas fa-user"})," ",Object(i.h)("a",{href:X},Q)):Object(i.h)(t,null,Object(i.h)("i",{class:"fas fa-user"})," ",Q))),Object(i.h)("small",{class:"text-muted"},r.equipment>0&&Object(i.h)(t,null,Object(i.h)("i",{class:dt+" ml-2"})," ",ct),r.dogs>0&&Object(i.h)(t,null,Object(i.h)("i",{class:"fas fa-dog ml-2"})," ",r.dogs.length),r.track>0&&Object(i.h)(t,null,Object(i.h)("i",{class:"fas fa-map-marked text-"+(r.track>0?"success":"danger")+" ml-2"})),r.sledWeight>0&&Object(i.h)(t,null,Object(i.h)("i",{class:"fas fa-sleigh ml-2"})," ",Object(i.h)(x.a,{stores:this.props.stores,value:r.sledWeight})),0!==r.temperature&&Object(i.h)(t,null,Object(i.h)("i",{class:"fas fa-temperature-low ml-2"})," ",Object(i.h)(C.a,{stores:this.props.stores,value:r.temperature})),r.dogs&&r.dogs.length>0&&Object(i.h)(t,null,Object(i.h)("i",{class:"fas fa-dog ml-2"})," ",l.a.format(r.dogs.length,0)),ft&&ft.formattedCounty&&Object(i.h)(t,null,Object(i.h)("i",{class:"fas fa-map-marker-alt ml-2"})," ",ft.formattedCounty),r.moonIllumination&&r.moonIllumination.phaseIcon&&Object(i.h)("span",{class:"float-right ml-2"},r.moonIllumination.phaseIcon))),K&&Object(i.h)("div",{class:"d-flex flex-row flex-nowrap bg-light border-top border-bottom py-2",style:"overflow: auto;"},Object(i.h)("small",{class:"text-muted mr-2"},"Adm:"),ft&&ft.formatted_address&&Object(i.h)(t,null,Object(i.h)("small",{class:"text-muted"},Object(i.h)("i",{class:"fas fa-map-marker-alt"})," ",ft.formatted_address)),G.deviceInfo&&Object(i.h)(t,null,Object(i.h)("span",{class:"badge badge-secondary ml-1 float-right font-weight-light"},["platform","manufacturer","model"].map((function(e){return Object(i.h)(t,null,Object(i.h)("span",{class:"ml-1 text-white"},G.deviceInfo[e]))})))),gt&&Object(i.h)(t,null,Object(i.h)("small",{class:"ml-2 text-muted"},"V: ",gt.count),Object(i.h)("small",{class:"ml-2 text-muted"},"R: ",gt.ranking," ",l.a.isNumber(gt.rankingTrend)&&Object(i.h)(t,null,Object(i.h)("i",{class:I.a.getClassForTrend(gt.rankingTrend)}))),Object(i.h)("small",{class:"ml-2 text-muted"},"D: ",l.a.format(gt.durationAvg/1e3,1),"s ",l.a.isNumber(gt.durationAvgTrend)&&Object(i.h)(t,null,Object(i.h)("i",{class:I.a.getClassForTrend(gt.durationAvgTrend)}))),r.statisticsCurrent&&r.statisticsCurrent.totalInteractions>0&&Object(i.h)("small",{class:"ml-2 text-muted"},"S: ",l.a.format(r.statisticsCurrent.totalInteractions,0)),r.shadowTags&&r.shadowTags.map((function(e){return Object(i.h)(t,null,Object(i.h)("span",{class:"badge badge-secondary ml-2 float-right font-weight-light"},e))})))))),Object(i.h)("div",{class:"container-fluid px-0 mt-1"},Object(i.h)("div",{class:"row"},Object(i.h)(p.a,{stores:this.props.stores,images:mt,id:r.id,dblClick:this.likeWorkout,likeRef:F}))),r.dogs&&r.dogs.length>0&&Object(i.h)("div",{class:"container-fluid px-0 mt-1"},Object(i.h)("div",{class:"row pt-2"},Object(i.h)(f.a,{stores:this.props.stores,dogs:r.dogs,allDogs:e,onDogClick:T}))),Object(i.h)("div",{class:"d-flex justify-content-between bg-light rounded-lg px-2"},r.distanceKm>0&&Object(i.h)("div",{class:"mr-2 text-center"},Object(i.h)("div",{class:"text-overflow text-muted"},Object(i.h)("small",null,Object(i.h)("i",{class:"fas fa-road"})," ",Object(i.h)(u.c,{id:"workout.calendar.distance"},"Distanse"))),Object(i.h)("div",{class:"text-overflow font-weight-light",style:"font-size: 1.2em;"},Object(i.h)(S.a,{stores:this.props.stores,value:r.distanceKm}))),r.elevation>0&&Object(i.h)("div",{class:"mr-2 text-center"},Object(i.h)("div",{class:"text-overflow text-muted"},Object(i.h)("small",null,Object(i.h)("i",{class:"fas fa-mountain"})," ",Object(i.h)(u.c,{id:"workout.calendar.ascend"},"HÃ¸ydemeter"))),Object(i.h)("div",{class:"text-overflow font-weight-light",style:"font-size: 1.2em;"},Object(i.h)(k.a,{stores:this.props.stores,value:r.elevation}))),r.duration>0&&Object(i.h)("div",{class:"mr-2 text-center"},Object(i.h)("div",{class:"text-overflow text-muted"},Object(i.h)("small",null,Object(i.h)("i",{class:"fas fa-clock"})," ",Object(i.h)(u.c,{id:"workout.calendar.duration"},"Varighet"))),Object(i.h)("div",{class:"text-overflow font-weight-light",style:"font-size: 1.2em;"},l.a.secToHms(r.duration,!0))),r.speedAvg>0&&Object(i.h)("div",{class:"text-center"},Object(i.h)("div",{class:"text-overflow text-muted"},Object(i.h)("small",null,Object(i.h)("i",{class:"fas fa-tachometer-alt"})," ",Object(i.h)(u.c,{id:"workout.calendar.avg-speed"},"Snittfart"))),Object(i.h)("div",{class:"text-overflow font-weight-light",style:"font-size: 1.2em;"},ht&&ht.avgGpsMovingSpeed>0?Object(i.h)(t,null,Object(i.h)(w.a,{stores:this.props.stores,value:3.6*ht.avgGpsMovingSpeed})):Object(i.h)(t,null,Object(i.h)(w.a,{stores:this.props.stores,value:r.speedAvg}))))),Object(i.h)("div",{class:"row mt-2"},Object(i.h)("div",{id:"workoutDetail",class:"clearfix col-12 font-weight-bold",style:"font-size: 1.2em;",onClick:this.showWorkoutDetail,"data-id":r.uuidv4},Object(i.h)(m.a,{markdown:I.a.replaceImages(vt,r.images,Z),markdownOpts:I.a.getMarkdownOptions()})),Object(i.h)("div",{class:"clearfix col-12"},Object(i.h)(m.a,{markdown:I.a.replaceImages(yt,r.images,Z),markdownOpts:I.a.getMarkdownOptions()})),r.language!==Z&&Object(i.h)(t,null,!A&&jt?Object(i.h)(t,null,Object(i.h)("button",{type:"button",class:"btn btn-sm btn-link text-muted",onClick:this.showOriginal},Object(i.h)("i",{class:"fas fa-cog"}),"  ",Object(i.h)(u.c,{id:"home.translate-show-original"},"Show original"))):Object(i.h)(t,null,Object(i.h)("button",{type:"button",class:"btn btn-sm btn-link text-muted",onClick:this.translate},Object(i.h)("i",{class:"fas fa-cog"})," ",Object(i.h)(u.c,{id:"home.translate-to"},"See translation"))))),Object(i.h)("div",{class:"mt-2"},Object(i.h)(v.a,{stores:this.props.stores,likes:st,comments:ot,type:"team",onTeamClick:c,onUserClick:b})),!at&&!it&&!lt&&Object(i.h)("div",{class:"clearfix mb-2"},Object(i.h)(j.a,{stores:this.props.stores,team:J,buttonOnly:!0})),Object(i.h)("div",null,Object(i.h)("div",{class:"row"},Object(i.h)("div",{class:"col text-center"},Object(i.h)("button",{type:"button",class:"imageContainer btn btn-sm btn-outline-"+(nt?"primary":"secondary")+" btn-lg btn-block "+(nt?"text-primary":"")+" text-overflow","data-id":r.id,onClick:this.likeWorkout},Object(i.h)("i",{class:(nt?"text-primary fas":"far")+" fa-thumbs-up"})," ",Object(i.h)(u.c,{id:"comments.like"},"Lik"))),Object(i.h)("div",{class:"col text-center"},Object(i.h)("button",{type:"button",class:"btn btn-sm btn-outline-secondary btn-lg btn-block text-overflow","data-id":r.id,onClick:this.toggleAddComment},Object(i.h)("i",{class:"fas fa-comment"})," ",Object(i.h)(u.c,{id:"comments.comment-add"},"Kommentar"))),H?Object(i.h)(t,null,Object(i.h)("div",{class:"col text-center"},Object(i.h)("button",{class:"btn btn-sm btn-outline-secondary btn-lg btn-block text-overflow",onClick:this.shareLink,"data-url":"https://themusher.app/share/workout/"+r.uuidv4,"data-title":"title: "+r.title},Object(i.h)("i",{class:"fas fa-share"})," ",Object(i.h)(u.c,{id:"story.share"},"Del")))):Object(i.h)(t,null,Object(i.h)("div",{class:"col text-center"},Object(i.h)("a",{class:"btn btn-sm btn-outline-secondary btn-lg btn-block text-overflow",href:"https://themusher.app/share/workout/"+r.uuidv4,target:"_blank",rel:"noreferrer","data-native":!0},Object(i.h)("i",{class:"fas fa-share"})," ",Object(i.h)(u.c,{id:"story.share"},"Del")))))),Ot>0&&Object(i.h)(t,null,Object(i.h)("div",{class:"mt-2"},Object(i.h)(y.a,{stores:this.props.stores,views:Ot,object:r,type:"team",isTeamAdmin:tt,isAdmin:K,onTeamClick:c,onUserClick:b}))),Object(i.h)("div",{class:"mt-2"},L[r.id]&&Object(i.h)(g.a,{stores:this.props.stores,workout:r,inputRef:function(t){return s.inputRef[r.id]=t},inputRefObject:this.inputRef,col:"12",offset:"0",showAvatar:!0,extraClass:"px-0",callback:this.addCommentToFeed}),Object(i.h)(O.a,{stores:this.props.stores,workout:r,col:"12",offset:"0",compact:!1,callback:this.addCommentToFeed})))},s}(i.Component))||a;e.a=T}).call(this,s("hosL").Fragment)},NMoA:function(t,e,s){"use strict";(function(t){function o(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,o)}return s}function n(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?o(Object(s),!0).forEach((function(e){r(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):o(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}function r(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}function a(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}var i,l,c,d,u,h=s("hosL"),m=s("Utv1"),b=s("/eY4"),p=s("cneo"),f=s("OhSV"),O=s("fh8t"),g=s.n(O),j=s("go65"),v=s("Y3FI"),y=(s("X9Km"),s("1OK2"),s("B95u")),w=s("4QWe"),k=(s("NMoA"),s("P9Fo")),x=s("s4FZ"),S=s("+JSK"),C=s("vY+r"),I=s("eQ6k"),P=s("om2D"),T=s("ZOvn"),D={showAddComment:{},showTeamSetting:{},viewImageIdx:{},likeStory:{}},R=Object(b.a)(i=function(e){function s(t){var s;return(s=e.call(this,t)||this).saveStory=function(t){return new Promise((function(e,o){var n,r,a,i,l;return n=t.target.closest("button").dataset.id,r=s.state.storyBody,a=s.props.stores.storyStore,l=void 0===(i=s.props.callback)?function(){return!0}:i,Promise.resolve(a.saveField(parseInt(n,10),"body",r,!0)).then((function(){try{return a.publicFeedUpdate(parseInt(n,10),"body",r),s.setState({storyBody:"",storyType:0}),l(),e()}catch(t){return o(t)}}),o)}))},s.saveStoryField=function(t){return new Promise((function(e){var o=s.props.story.id,n=t.target,r=n.value,a=n.name,i=t.target.dataset,l=i.subfield,c=i.subvalue;return s.state.sendButtonEnabled?(s.props.stores.storyStore.publicFeedUpdate(o,a,r),clearTimeout(s.updateTimer[a]),s.updateTimer[a]=setTimeout((function(){return new Promise((function(t){var e;return s.doUpdateField(o,a,r,{query:(e={},e[l]=c,e)}),t()}))}),1e3),e()):e(!1)}))},s.updateFieldValue=function(t){var e=t.id,o=t.field,n=t.value,r=t.skipTimer,a=void 0!==r&&r,i=s.props.story,l=s.props.stores.storyStore,c=n,d=n;"images"===o&&Array.isArray(i.images)&&Array.isArray(n)&&(d=[].concat(i.images,n)),l.updateField(e,o,d),l.publicFeedUpdate(e,o,d),a?s.doUpdateField(e,o,c):(clearTimeout(s.updateTimer[o]),s.updateTimer[o]=setTimeout((function(){return new Promise((function(t){return s.doUpdateField(e,o,c),t()}))}),500))},s.beforeImagesUploaded=function(){s.setState({sendButtonEnabled:!1})},s.afterImagesUploaded=function(){s.setState({sendButtonEnabled:!0})},s.removeImage=function(t){return new Promise((function(e){return s.props.stores.storyStore.removeImage({id:s.props.story.id,name:t.target.parentElement.dataset.name||t.target.dataset.name}),e()}))},s.handleImageErrored=function(t){var e=t.target;e.onerror=null,setTimeout((function(){e.src+="?"+new Date}),1e3)},s.updateTimer={},s.textareaRef=Object(h.createRef)(),s.state={sendButtonEnabled:!0,storyBody:t.story.body},s}a(s,e);var o=s.prototype;return o.doUpdateField=function(t,e,s,o){return new Promise(function(r,a){return void 0===o&&(o={}),this.setState({sendButtonEnabled:!1}),Promise.resolve(this.props.stores.storyStore.saveField(parseInt(t,10),e,s,!0,{query:n({},o.query)})).then(function(){try{return this.setState({sendButtonEnabled:!0}),r()}catch(t){return a(t)}}.bind(this),a)}.bind(this))},o.componentDidMount=function(){this.textareaRef.current.focus()},o.render=function(){var e=this,s=this.state,o=s.storyBody,n=s.storyType,r=s.sendButtonEnabled,a=this.props.stores.userStore.isAdmin,i=this.props.story;return Object(h.h)(t,null,Object(h.h)("div",{class:"container-fluid px-0 mt-1"},Object(h.h)("div",{class:"row"},Object(h.h)("div",{class:"col-12 text-center mt-2"},Object(h.h)("div",{class:"container-fluid"},Object(h.h)("div",{class:"row d-flex align-items-end"},m.a.isArray(i.images)&&i.images.map((function(t,s){return Object(h.h)("div",{class:"col-3 p-1"},Object(h.h)("img",{src:t.s3SmallLink,class:"img-fluid",onError:e.handleImageErrored}),Object(h.h)("button",{class:"btn btn-sm btn-link",onClick:e.removeImage,"data-name":t.name},Object(h.h)("i",{class:"fas fa-trash"})," Del"),Object(h.h)("small",null,Object(h.h)("input",{class:"form-control",type:"text",name:"images.title","data-subfield":"name","data-subvalue":i.images[s].name,onInput:e.saveStoryField,value:i.images[s].title})))})))),Object(h.h)(P.a,{object:i,updateField:this.updateFieldValue,before:this.beforeImagesUploaded,after:this.afterImagesUploaded,autoOpen:!1}))),Object(h.h)("div",{class:"row"},Object(h.h)("div",{class:"col-12 mt-2"},Object(h.h)("label",null,Object(h.h)(f.c,{id:"story.content"},"Content")),Object(h.h)("div",{class:"border rounded rounded-lg position-relative"},Object(h.h)(f.b,null,Object(h.h)("textarea",{class:"form-control-plaintext px-2",type:"text",placeholder:Object(h.h)(f.c,{id:"story.add-content"},"Add your text here..."),onInput:Object(j.a)(this,"storyBody"),onFocus:T.a.resizeTextarea,style:"height: 2.3em;",value:o||i.body,ref:this.textareaRef}))))),Object(h.h)("div",{class:"row"},Object(h.h)("div",{class:"col-12 mt-2"},a&&Object(h.h)(t,null,Object(h.h)("div",{class:"col-12 mt-2"},Object(h.h)("div",{class:"form-group"},Object(h.h)("small",null,Object(h.h)("input",{type:"checkbox",id:"pinned-"+i.id,name:"pinned",onInput:this.saveStoryField,value:i.pinned?"":m.a.isoDate(),checked:i.pinned?"checked":""}),Object(h.h)("label",{class:"ml-2",for:"pinned-"+i.id},"Pinned to top."))))),a&&Object(h.h)(t,null,Object(h.h)("label",null,Object(h.h)(f.c,{id:"story.type"},"Type")),Object(h.h)("div",{class:"form-group"},Object(h.h)("small",null,Object(h.h)("select",{class:"custom-select custom-select-sm",id:i.id,name:"type",onInput:this.saveStoryField,value:n||i.type},Object(h.h)("option",{value:""},"-- ",Object(h.h)(f.c,{id:"story.type-choose"},"Velg type")," --"),Object(h.h)("option",{value:1,selected:1==i.type?"selected":""},"âœï¸ ",Object(h.h)(f.c,{id:"story.type-regular"},"Vanlig")),Object(h.h)("option",{value:2,selected:2==i.type?"selected":""},"ðŸš€ ",Object(h.h)(f.c,{id:"story.type-ad"},"Annonse")),Object(h.h)("option",{value:3,selected:3==i.type?"selected":""},"ðŸ“„ ",Object(h.h)(f.c,{id:"story.type-article"},"Artikkel")))))),i.type>=2&&Object(h.h)(t,null,Object(h.h)("label",null,Object(h.h)(f.c,{id:"story.url-text"},"URL text")),Object(h.h)("div",{class:"form-group"},Object(h.h)("small",null,Object(h.h)("input",{class:"form-control",type:"text",name:"urlText",onInput:this.saveStoryField,value:i.urlText}))),Object(h.h)("label",null,Object(h.h)(f.c,{id:"story.url"},"URL")),Object(h.h)("div",{class:"form-group"},Object(h.h)("small",null,Object(h.h)("input",{class:"form-control",type:"text",name:"url",onInput:this.saveStoryField,value:i.url})))),2===i.type&&Object(h.h)(t,null,Object(h.h)("label",null,Object(h.h)(f.c,{id:"story.code"},"Code")),Object(h.h)("div",{class:"form-group"},Object(h.h)("small",null,Object(h.h)("input",{class:"form-control",type:"text",name:"code",onInput:this.saveStoryField,value:i.code}))),Object(h.h)("label",null,Object(h.h)(f.c,{id:"story.country"},"Country")),Object(h.h)("div",{class:"form-group"},Object(h.h)("small",null,Object(h.h)("input",{class:"form-control",type:"text",name:"country",onInput:this.saveStoryField,value:i.country}))),Object(h.h)("label",null,Object(h.h)(f.c,{id:"story.region"},"Region")),Object(h.h)("div",{class:"form-group"},Object(h.h)("small",null,Object(h.h)("input",{class:"form-control",type:"text",name:"region",onInput:this.saveStoryField,value:i.region}))),Object(h.h)("label",null,Object(h.h)(f.c,{id:"story.currency"},"Currency")),Object(h.h)("div",{class:"form-group"},Object(h.h)("small",null,Object(h.h)("input",{class:"form-control",type:"text",name:"currency",onInput:this.saveStoryField,value:i.currency}))),Object(h.h)("label",null,Object(h.h)(f.c,{id:"story.price"},"Price")),Object(h.h)("div",{class:"form-group"},Object(h.h)("small",null,Object(h.h)("input",{class:"form-control",type:"text",name:"price",onInput:this.saveStoryField,value:i.price})))))),Object(h.h)("div",{class:"row"},Object(h.h)("div",{class:"col-12 mt-2"},Object(h.h)("button",{type:"button",class:"btn btn-block btn-"+(r?"primary":"secondary")+" mb-2",disabled:!r,onClick:this.saveStory,"data-id":i.id},Object(h.h)("i",{class:"fas fa-paper-plane"})," ",Object(h.h)(f.c,{id:"story.edit-save"},"Save changes"))))))},s}(h.Component))||i,_=Object(b.a)(l=function(e){function s(t){var s;return(s=e.call(this,t)||this).viewImage=function(t){var e=t.target.closest("img").dataset,o=s.state.viewImageIdx;o[e.id]=e.idx,s.setState({viewImageIdx:o})},s.showStoryDetail=function(t){if("a"===t.target.localName)return!1;var e=t.target.closest("#storyDetail").dataset.id;e&&Object(v.route)("/stories/"+e)},s.translate=function(t){return new Promise((function(e,o){var n;return t.preventDefault(),t.stopPropagation(),n=s.props.stores,Promise.resolve(n.storyStore.translate({story:s.props.story,user:n.userStore.user})).then((function(t){try{return s.setState({showOriginal:0,translatedText:t}),e()}catch(t){return o(t)}}),o)}))},s.showOriginal=function(t){t.preventDefault(),t.stopPropagation(),s.setState({showOriginal:1})},s.setSelectedImage=function(t){s.setState({selectedImageIdx:t})},s.state={viewImageIdx:{}},s}return a(s,e),s.prototype.render=function(){var e=this,s=this.state,o=s.showOriginal,n=s.translatedText,r=s.selectedImageIdx,a=void 0===r?0:r,i=this.props.stores,l=this.props,c=l.story,d=l.likeStory,u=l.likeRef,m=i.userStore.user.language,b=void 0===m?"en":m,O=[];if(c.images){var j=Object(p.i)(c.images);O.push.apply(O,j)}var v=T.a.getTranslation({object:c,targetLang:b,field:"body"})||n,y=v||c.body;o&&(y=c.body);var w=T.a.getInlineComponents(y||""),S=w.components,C=void 0===S?[]:S,I=w.finalBody,P=void 0===I?"":I;return Object(h.h)(t,null,Object(h.h)("div",{class:"container-fluid px-0 mt-1"},Object(h.h)("div",{class:"row"},Object(h.h)(x.a,{stores:this.props.stores,images:O,id:c.id,dblClick:d,likeRef:u,callback:this.setSelectedImage}))),Object(h.h)("div",{class:"row mt-2"},Object(h.h)("div",{class:"clearfix col-12 overflow-hidden",style:c.offline?"text-decoration: line-through;":""},Object(h.h)("div",{id:"storyDetail",onClick:this.showStoryDetail,"data-id":c.id},Object(h.h)(g.a,{markdown:T.a.replaceImages(P,c.images,b),markdownOpts:T.a.getMarkdownOptions()}),c.language!==b&&Object(h.h)(t,null,!o&&v?Object(h.h)(t,null,Object(h.h)("button",{type:"button",class:"btn btn-sm btn-link text-muted",onClick:this.showOriginal},Object(h.h)("i",{class:"fas fa-cog"}),"  ",Object(h.h)(f.c,{id:"home.translate-show-original"},"Show original"))):Object(h.h)(t,null,Object(h.h)("button",{type:"button",class:"btn btn-sm btn-link text-muted",onClick:this.translate},Object(h.h)("i",{class:"fas fa-cog"})," ",Object(h.h)(f.c,{id:"home.translate-to"},"See translation"))))),C&&C.map((function(t){if("poll"===t.name)return Object(h.h)(k.a,{stores:e.props.stores,story:c,storyId:c.id,params:t.params,opts:t.opts,content:t.content,selectedImageIdx:a})})))))},s}(h.Component))||l,L=Object(b.a)(c=function(e){function s(t){var s;return(s=e.call(this,t)||this).viewImage=function(t){var e=t.target.closest("img").dataset,o=s.state.viewImageIdx;o[e.id]=e.idx,s.setState({viewImageIdx:o})},s.showStoryDetail=function(t){if("a"===t.target.localName)return!1;var e=t.target.closest("#storyDetail").dataset.id;e&&Object(v.route)("/stories/"+e)},s.translate=function(t){return new Promise((function(e,o){var n,r,a,i;return t.preventDefault(),t.stopPropagation(),n=s.props.story,a=(r=s.props.stores).storyStore,i=r.userStore.user,s.setState({showOriginal:0}),Promise.resolve(a.translate({story:n,user:i})).then((function(){try{return e()}catch(t){return o(t)}}),o)}))},s.showOriginal=function(t){t.preventDefault(),t.stopPropagation(),s.setState({showOriginal:1})},s.getTranslation=function(){var t=s.props.stores,e=t.userStore,o=e.user.language;T.a.getTranslation({object:s.props.story,targetLang:void 0===o?"en":o,field:"body"})&&s.setState({showOriginal:0})},s.state={viewImageIdx:{}},s}a(s,e);var o=s.prototype;return o.componentWillMount=function(){this.getTranslation()},o.render=function(){var e=this.state,s=e.showOriginal,o=this.props.stores,n=this.props,r=n.story,a=n.likeStory,i=n.likeRef,l=o.userStore.user.language,c=void 0===l?"en":l,d=[];if(r.images){var u=Object(p.i)(r.images);d.push.apply(d,u)}var b=T.a.getTranslation({object:r,targetLang:c,field:"body"}),O=b||r.body;return s&&(O=r.body),Object(h.h)(t,null,Object(h.h)("div",{class:"container-fluid px-0 mt-1"},Object(h.h)("div",{class:"row"},Object(h.h)(x.a,{stores:this.props.stores,images:d,id:r.id,dblClick:a,likeRef:i}))),Object(h.h)("div",{class:"row mt-2"},Object(h.h)("div",{class:"clearfix col-12 overflow-hidden",style:r.offline?"text-decoration: line-through;":""},Object(h.h)("div",{id:"storyDetail","data-id":r.id},Object(h.h)(g.a,{markdown:T.a.replaceImages(O,r.images,c),markdownOpts:T.a.getMarkdownOptions()}),r.language!==c&&Object(h.h)(t,null,!s&&b?Object(h.h)(t,null,Object(h.h)("button",{type:"button",class:"btn btn-sm btn-link",onClick:this.showOriginal},Object(h.h)("i",{class:"fas fa-cog"}),"  ",Object(h.h)(f.c,{id:"home.translate-show-original"},"Show original"))):Object(h.h)(t,null,Object(h.h)("button",{type:"button",class:"btn btn-sm btn-link",onClick:this.translate},Object(h.h)("i",{class:"fas fa-cog"})," ",Object(h.h)(f.c,{id:"home.translate-to"},"See translation")))))),!!(r.url||r.code||r.price>0)&&Object(h.h)(t,null,Object(h.h)("div",{class:"clearfix col-12  py-2",style:r.offline?"text-decoration: line-through;":""},Object(h.h)("div",{class:"row"},r.url&&Object(h.h)(t,null,Object(h.h)("div",{class:"col-12 text-left",style:"font-size: 1.0em;"},Object(h.h)("a",{href:T.a.asUrl(r.url),target:"_blank",rel:"noreferrer"},Object(h.h)("i",{class:"fas fa-link mr-2"}),r.urlText?Object(h.h)(t,null,r.urlText):Object(h.h)(t,null,Object(h.h)(f.c,{id:"story.ad-url-readmore"},"Les mer..."))))),r.code&&Object(h.h)(t,null,Object(h.h)("div",{class:"col text-left",style:"font-size: 1.2em;"},Object(h.h)("nobr",null,Object(h.h)("span",{class:"font-weight-lighter"},Object(h.h)(f.c,{id:"story.ad-campaign-code"},"Kampanjekode"),":")," ",r.code))),r.price>0&&Object(h.h)(t,null,Object(h.h)("div",{class:"col text-right",style:"font-size: 1.2em;"},Object(h.h)("nobr",null,r.currencty&&Object(h.h)("span",{class:"font-weight-lighter"},r.currency)," ",m.a.format(r.price,2)))))))))},s}(h.Component))||c,E=Object(b.a)(d=function(e){function s(t){var s;return(s=e.call(this,t)||this).viewImage=function(t){var e=t.target.closest("img").dataset,o=s.state.viewImageIdx;o[e.id]=e.idx,s.setState({viewImageIdx:o})},s.showStoryDetail=function(t){if("a"===t.target.localName)return!1;var e=t.target.closest("#storyDetail").dataset.id;e&&Object(v.route)("/stories/"+e)},s.translate=function(t){return new Promise((function(e,o){var n,r,a,i;return t.preventDefault(),t.stopPropagation(),n=s.props.story,a=(r=s.props.stores).storyStore,i=r.userStore.user,s.setState({showOriginal:0}),Promise.resolve(a.translate({story:n,user:i})).then((function(){try{return e()}catch(t){return o(t)}}),o)}))},s.showOriginal=function(t){t.preventDefault(),t.stopPropagation(),s.setState({showOriginal:1})},s.getTranslation=function(){var t=s.props.stores,e=t.userStore,o=e.user.language;T.a.getTranslation({object:s.props.story,targetLang:void 0===o?"en":o,field:"body"})&&s.setState({showOriginal:0})},s.state={viewImageIdx:{}},s}a(s,e);var o=s.prototype;return o.componentWillMount=function(){this.getTranslation()},o.render=function(){var e=this.state,s=e.showOriginal,o=this.props.stores,n=this.props,r=n.story,a=n.likeStory,i=n.likeRef,l=o.userStore.user.language,c=void 0===l?"en":l,d=[];if(r.images){var u=Object(p.i)(r.images);d.push.apply(d,u)}var m=T.a.getTranslation({object:r,targetLang:c,field:"body"}),b=m||r.body;return s&&(b=r.body),Object(h.h)(t,null,Object(h.h)("div",{class:"container-fluid px-0 mt-1"},Object(h.h)("div",{class:"row"},Object(h.h)(x.a,{stores:this.props.stores,images:d,id:r.id,dblClick:a,likeRef:i}))),Object(h.h)("div",{class:"row mt-2"},Object(h.h)("div",{class:"clearfix col-12 overflow-hidden",style:r.offline?"text-decoration: line-through;":""},Object(h.h)("div",{id:"storyDetail",onClick:this.showStoryDetail,"data-id":r.id},Object(h.h)(g.a,{markdown:T.a.replaceImages(b,r.images,c),markdownOpts:T.a.getMarkdownOptions()}),r.language!==c&&Object(h.h)(t,null,!s&&m?Object(h.h)(t,null,Object(h.h)("button",{type:"button",class:"btn btn-sm btn-link",onClick:this.showOriginal},Object(h.h)("i",{class:"fas fa-cog"}),"  ",Object(h.h)(f.c,{id:"home.translate-show-original"},"Show original"))):Object(h.h)(t,null,Object(h.h)("button",{type:"button",class:"btn btn-sm btn-link",onClick:this.translate},Object(h.h)("i",{class:"fas fa-cog"})," ",Object(h.h)(f.c,{id:"home.translate-to"},"See translation")))))),!!(r.url||r.code||r.price)&&Object(h.h)(t,null,Object(h.h)("div",{class:"clearfix col-12  py-2",style:r.offline?"text-decoration: line-through;":""},Object(h.h)("div",{class:"row"},r.url&&Object(h.h)(t,null,Object(h.h)("div",{class:"col-12 text-left",style:"font-size: 1.0em;"},Object(h.h)("a",{href:T.a.asUrl(r.url),target:"_blank",rel:"noreferrer"},Object(h.h)("i",{class:"fas fa-link mr-2"}),r.urlText?Object(h.h)(t,null,r.urlText):Object(h.h)(t,null,Object(h.h)(f.c,{id:"story.ad-url-readmore"},"Les mer..."))))))))))},s}(h.Component))||d,F=Object(b.a)(u=function(e){function s(t){var s;return(s=e.call(this,t)||this).toggleDate=function(t){t.stopPropagation(),t.preventDefault(),s.setState({showDate:!s.state.showDate})},s.likeStory=function(){return new Promise((function(t,e){var o,n,r,a;return n=s.props.stores.storyStore,(r=s.state.likeStory)[o=s.props.story.id]=!0,a=Object.keys(r),s.setState({likeStory:r,likeIds:a}),setTimeout((function(){var t=s.state.likeStory;delete t[o];var e=Object.keys(t);s.setState({likeStory:t,likeIds:e})}),1200),Promise.resolve(n.likeStory({id:o})).then((function(s){try{return s,t()}catch(t){return e(t)}}),e)}))},s.toggleAddComment=function(t){var e=t.target.closest("button").dataset.id,o=s.state.showAddComment;o[e]?delete o[e]:o[e]=!0,s.setState({showAddComment:o},(function(){s.inputRef[e]&&s.inputRef[e].focus()}))},s.closeAllAddComments=function(){s.setState({showAddComment:{}})},s.toggleShowTeamSetting=function(t){var e=t.target.closest("button").dataset.id,o=s.state.showTeamSetting;o[e]?delete o[e]:o[e]=!0,s.setState({showTeamSetting:o})},s.viewImage=function(t){var e=t.target.closest("img").dataset,o=s.state.viewImageIdx;o[e.id]=e.idx,s.setState({viewImageIdx:o})},s.toggleMenu=function(t){var e=t.target.closest("i").dataset.id,o=s.state.showMenu,n=void 0===o?{}:o;n[e]=!n[e],s.setState({showDeleteStory:{},showEdit:{},showMenu:n})},s.toggleEdit=function(t){var e=t.target.closest("button").dataset.id,o=s.state.showEdit,n=void 0===o?{}:o;n[e]=!n[e],s.setState({showDeleteStory:{},showEdit:n,showMenu:{}})},s.toggleDeleteStory=function(t){var e=t.target.closest("button").dataset.id,o=s.state.showDeleteStory,n=void 0===o?{}:o;n[e]=!n[e],s.setState({showDeleteStory:n,showEdit:{},showMenu:{}})},s.reportStory=function(t){return new Promise((function(e,o){var n;return n=t.target.closest("button").dataset.id,Promise.resolve(s.props.stores.storyStore.reportStory({id:n})).then((function(){try{return s.setState({showEdit:{},showMenu:{}}),e()}catch(t){return o(t)}}),o)}))},s.adminRemoveStory=function(t){return new Promise((function(e,o){var n;return n=t.target.closest("button").dataset.id,Promise.resolve(s.props.stores.storyStore.adminHideStory({id:n})).then((function(){try{return s.setState({showEdit:{},showMenu:{}}),e()}catch(t){return o(t)}}),o)}))},s.deleteStory=function(t){return new Promise((function(e,o){var n,r;return n=t.target.closest("button").dataset.id,r=s.props.stores.storyStore,Promise.resolve(r.saveField(parseInt(n,10),"offline",1,!0)).then((function(){try{return r.publicFeedUpdate(parseInt(n,10),"offline",1),s.setState({storyBody:"",showDeleteStory:{},showEdit:{},showMenu:{}}),e()}catch(t){return o(t)}}),o)}))},s.doneEdit=function(){s.setState({showDeleteStory:{},showEdit:{},showMenu:{}})},s.showStoryDetail=function(t){if("a"===t.target.localName)return!1;var e=t.target.closest("#storyDetail").dataset.id;e&&Object(v.route)("/stories/"+e)},s.shareLink=function(t){var e=t.target.closest("button").dataset;s.props.stores.appState.shareUrl({url:e.url,title:e.title,text:e.text})},s.state=n({},D),s.inputRef={},s}a(s,e);var o=s.prototype;return o.loadStoriesPublicFeed=function(t){return new Promise(function(e,s){return void 0===t&&(t=this.props),Promise.resolve(t.stores.storyStore.loadPublicFeed({hashtag:t.hashtag})).then((function(){try{return e()}catch(t){return s(t)}}),s)}.bind(this))},o.render=function(){var e,s,o,n,r=this,a=this.state,i=a.showAddComment,l=a.showDate,c=a.showMenu,d=void 0===c?{}:c,u=a.showEdit,b=void 0===u?{}:u,p=a.showDeleteStory,O=void 0===p?{}:p,g=a.showTeamSetting,j=a.likeStory,v=a.likeIds,k=this.props,x=k.story,P=k.showAllComments,D=k.onTeamClick,F=void 0===D?function(){}:D,A=k.onUserClick,N=void 0===A?function(){}:A,U=this.props.stores,M=U.userStore,z=U.storyStore,B=U.appState,V=M.user,W=void 0===V?{}:V,q=M.isAdmin,K=B.hasShareApi,Y=z.findPublicTeam(x.team)||{},Z=z.findPublicUser(x.user)||{},H=T.a.getImage({user:Z,team:Y,priority:"user",object:x}),J=!(!Y||!Y.members)&&Y.members.some((function(t){return t===W.id}));Y&&Y.name?(e=T.a.displayNameShort(Y),s=T.a.displayName(Y),o=T.a.displayName(Z),Z.settings&&W.uuidv4!==Z.uuidv4&&(n=Z.settings.hideProfile?null:"/inbox/"+Z.uuidv4)):Z&&Z.id&&(e=T.a.displayNameShort(Z),s=T.a.displayName(Z));var G=x.likes,Q=x.comments,X=x.reports,$=void 0===X?[]:X,tt=x.likes&&x.likes.findIndex((function(t){return t.user===W.id}))>-1,et=Y.followers?Y.followers.length:0,st=Y.members&&Y.members.indexOf(W.id)>-1,ot=Y.followers&&Y.followers.indexOf(W.id)>-1,nt=Y.followRequests&&Y.followRequests.findIndex((function(t){return t.id===W.id}))>-1,rt=x.currentLocationGeocode,at=void 0===rt?{}:rt,it=T.a.getViews(x.statistics),lt=T.a.getAdminData(x.statistics);return Object(h.h)(t,null,q||W.id===Z.id?Object(h.h)(t,null,Object(h.h)("span",{class:"float-right font-weight-lighter text-muted"},Object(h.h)("i",{class:"fas fa-ellipsis-h",onClick:this.toggleMenu,"data-id":x.id}))):Object(h.h)(t,null,!st&&!ot&&!nt&&Y.public>0&&Object(h.h)("span",{class:"float-right"},Object(h.h)(I.a,{stores:this.props.stores,team:Y,buttonOnly:!0,simple:!0,classNames:"btn btn-link text-primary"}))),d[x.id]&&Object(h.h)(t,null,Object(h.h)("div",{class:"position-absolute bg-light p-2 border rounded rounded-lg shadow-sm",style:"top: 30px; right: 10px; width: 60%; z-index: 999999;"},W.id===Z.id?Object(h.h)(t,null,Object(h.h)("button",{class:"btn btn-link btn-block text-left",onClick:this.toggleEdit,"data-id":x.id},Object(h.h)("i",{class:"fas fa-edit"})," Edit"),Object(h.h)("hr",null),Object(h.h)("button",{class:"btn btn-link btn-block text-left text-danger",onClick:this.toggleDeleteStory,"data-id":x.id},Object(h.h)("i",{class:"fas fa-trash-alt"})," Delete")):Object(h.h)(t,null,Object(h.h)("button",{class:"btn btn-link btn-block text-left",onClick:this.reportStory,"data-id":x.id},Object(h.h)("i",{class:"fas fa-flag"})," Report"),q&&Object(h.h)(t,null,Object(h.h)("hr",null),Object(h.h)("button",{class:"btn btn-link btn-block text-left text-danger",onClick:this.adminRemoveStory,"data-id":x.id},Object(h.h)("i",{class:"fas fa-eraser"})," Remove from feed"))))),Object(h.h)("div",{class:"d-flex position-relative"},Object(h.h)("div",{class:"position-relative text-center border rounded-circle imageRounded imageRoundedMedium",style:H?'background-image: url("'+H+'"); background-size: cover;':""},!H&&Object(h.h)("div",{class:"text-muted",style:"font-size: 20px; padding-top: 3px;"},e)),Object(h.h)("div",{class:"flex-grow-1 pl-3 text-overflow",style:"line-height: 1.2em;"},Object(h.h)("h5",{class:"mb-1 position-relative",style:"line-height: 1.0em; "+(x.offline?"text-decoration: line-through;":"")},Y.public?Object(h.h)(t,null,Object(h.h)("a",{href:"/teams/public/"+Y.uuidv4,onClick:function(t){return F(t,Y.uuidv4)},class:"stretched-link"},s)):Object(h.h)(t,null,s),st&&!Y.public&&Object(h.h)("button",{type:"button",class:"btn btn-sm btn-link text-muted","data-id":x.id,onClick:this.toggleShowTeamSetting},Object(h.h)("i",{class:"fas fa-exclamation-triangle"}))),Object(h.h)("div",{class:"mb-2",style:x.offline?"text-decoration: line-through;":""},x.pinned&&Object(h.h)(t,null,Object(h.h)("small",{class:"text-muted mr-2"},Object(h.h)("i",{class:"fas fa-thumbtack"}))),2===x.type?Object(h.h)(t,null,Object(h.h)("small",{class:"text-muted"},Object(h.h)(f.c,{id:"story.sponsored"},"Sponsored")," -")):Object(h.h)(t,null,x.date&&Object(h.h)("small",{class:"text-muted",onClick:this.toggleDate},l?m.a.formatDate(x.date,{locale:"no-NB",hour12:!1,hour:"2-digit",minute:"2-digit"}):m.a.formatDistance(x.date,new Date,{locale:"no-NB"}))),1===x.public?Object(h.h)(t,null,Object(h.h)("small",{class:"ml-2 text-muted"},Object(h.h)("i",{class:"fas fa-globe-europe"}))):Object(h.h)(t,null,Object(h.h)("small",{class:"ml-2 text-muted"},Object(h.h)("i",{class:"fas fa-users"})," (",m.a.format(et),")")),o&&Object(h.h)(t,null,Object(h.h)("small",{class:"ml-2 text-muted"},n?Object(h.h)(t,null,Object(h.h)("i",{class:"fas fa-user"})," ",Object(h.h)("a",{href:n},o)):Object(h.h)(t,null,Object(h.h)("i",{class:"fas fa-user"})," ",o))),at&&at.formattedCounty&&Object(h.h)(t,null,Object(h.h)("small",{class:"ml-2 text-muted"},Object(h.h)("i",{class:"fas fa-map-marker-alt"})," ",at.formattedCounty))),q&&Object(h.h)("div",{class:"d-flex flex-row flex-nowrap bg-light border-top border-bottom py-2",style:"overflow: auto;"},Object(h.h)("small",{class:"text-muted mr-2"},"Adm:"),$&&$.length>0&&Object(h.h)(t,null,Object(h.h)("small",{class:"text-danger mr-2"},Object(h.h)("i",{class:"fas fa-flag"})," ",$.length)),at&&at.formatted_address&&Object(h.h)(t,null,Object(h.h)("small",{class:"text-muted"},Object(h.h)("i",{class:"fas fa-map-marker-alt"})," ",at.formatted_address)),Z.deviceInfo&&Object(h.h)(t,null,Object(h.h)("span",{class:"badge badge-secondary ml-2 float-right font-weight-light"},["platform","manufacturer","model"].map((function(e){return Object(h.h)(t,null,Object(h.h)("span",{class:"ml-2 text-white"},Z.deviceInfo[e]))})))),lt&&Object(h.h)(t,null,Object(h.h)("small",{class:"ml-2 text-muted"},"V: ",lt.count),Object(h.h)("small",{class:"ml-2 text-muted"},"R: ",lt.ranking," ",m.a.isNumber(lt.rankingTrend)&&Object(h.h)(t,null,Object(h.h)("i",{class:T.a.getClassForTrend(lt.rankingTrend)}))),Object(h.h)("small",{class:"ml-2 text-muted"},"D: ",m.a.format(lt.durationAvg/1e3,1),"s ",m.a.isNumber(lt.durationAvgTrend)&&Object(h.h)(t,null,Object(h.h)("i",{class:T.a.getClassForTrend(lt.durationAvgTrend)}))),x.statisticsCurrent&&x.statisticsCurrent.totalInteractions>0&&Object(h.h)("small",{class:"ml-2 text-muted"},"S: ",m.a.format(x.statisticsCurrent.totalInteractions,0)),x.shadowTags&&x.shadowTags.map((function(e){return Object(h.h)(t,null,Object(h.h)("span",{class:"badge badge-secondary ml-2 float-right font-weight-light"},e))})))))),b[x.id]||O[x.id]?Object(h.h)(t,null,Object(h.h)("div",{class:"row mt-2"},Object(h.h)("div",{class:"clearfix col-12",style:x.offline?"text-decoration: line-through;":""},b[x.id]&&Object(h.h)(t,null,Object(h.h)(R,{stores:this.props.stores,story:x,key:"story-edit-"+x.id,callback:this.doneEdit})),O[x.id]&&Object(h.h)("div",{class:"clearfix mt-3 mb-3"},Object(h.h)("button",{class:"btn btn-danger float-left",onClick:this.deleteStory,"data-id":x.id},Object(h.h)("i",{class:"fas fa-trash-alt"})," Delete"),Object(h.h)("button",{class:"btn btn-secondary float-right",onClick:this.toggleDeleteStory,"data-id":x.id},Object(h.h)("i",{class:"fas fa-times-circle"})," Cancel"))))):Object(h.h)(t,null,(!x.type||1==x.type)&&Object(h.h)(_,{stores:this.props.stores,story:x,key:"story-regular-view-"+x.id,likeStory:this.likeStory,likeRef:j,keys:v}),2==x.type&&Object(h.h)(L,{stores:this.props.stores,story:x,key:"story-ad-view-"+x.id,likeStory:this.likeStory,likeRef:j,keys:v}),3==x.type&&Object(h.h)(E,{stores:this.props.stores,story:x,key:"story-article-view-"+x.id,likeStory:this.likeStory,likeRef:j,keys:v}),Object(h.h)("div",{class:"d-flex justify-content-between mt-2"},Object(h.h)("div",{class:"mr-2"},Object(h.h)(S.a,{stores:this.props.stores,likes:G,comments:Q,type:"story",onTeamClick:F,onUserClick:N})),it>0&&Object(h.h)(t,null,Object(h.h)("div",null,Object(h.h)(C.a,{stores:this.props.stores,views:it,object:x,type:"story",isTeamAdmin:J,isAdmin:q,onTeamClick:F,onUserClick:N})))),g[x.id]&&Object(h.h)(t,null,Object(h.h)("small",null,Object(h.h)("div",{class:"alert alert-info",role:"alert"},Object(h.h)("span",{class:"display-4 float-left"},Object(h.h)("i",{class:"fas fa-exclamation-triangle mr-3 mb-3"})),Object(h.h)("p",null,Object(h.h)(f.c,{id:"story.alert-text-1"},"Your team is not visible and it's not possible to request friendship with your team.")),Object(h.h)("p",null,Object(h.h)(f.c,{id:"story.alert-text-2"},"If you want to make your team visible so other can request to follow your team, you can find the setting here:")),Object(h.h)("p",null,Object(h.h)("a",{href:"/teams/edit/"+Y.id},Object(h.h)(f.c,{id:"story.alert-text-3"},"Edit team")))))),Object(h.h)("div",null,Object(h.h)("div",{class:"row"},Object(h.h)("div",{class:"col text-center"},Object(h.h)("button",{type:"button",class:"storyImage btn btn-sm btn-outline-"+(tt?"primary":"secondary")+" btn-lg btn-block "+(tt?"text-primary":"")+" text-overflow","data-id":x.id,onClick:this.likeStory},Object(h.h)("i",{class:(tt?"text-primary fas":"far")+" fa-thumbs-up"})," ",tt?Object(h.h)(f.c,{id:"comments.has-liked"},"Liked"):Object(h.h)(f.c,{id:"comments.like"},"Lik"))),Object(h.h)("div",{class:"col text-center"},Object(h.h)("button",{type:"button",class:"btn btn-sm btn-outline-secondary btn-lg btn-block text-overflow","data-id":x.id,onClick:this.toggleAddComment},Object(h.h)("i",{class:"fas fa-comment"})," ",Object(h.h)(f.c,{id:"comments.comment-add"},"Kommentar"))),K?Object(h.h)(t,null,Object(h.h)("div",{class:"col text-center"},Object(h.h)("button",{class:"btn btn-sm btn-outline-secondary btn-lg btn-block text-overflow",onClick:this.shareLink,"data-url":"https://themusher.app/share/story/"+x.uuidv4,"data-title":"title: "+x.title},Object(h.h)("i",{class:"fas fa-share"})," ",Object(h.h)(f.c,{id:"story.share"},"Del")))):Object(h.h)(t,null,Object(h.h)("div",{class:"col text-center"},Object(h.h)("a",{class:"btn btn-sm btn-outline-secondary btn-lg btn-block text-overflow",href:"https://themusher.app/share/story/"+x.uuidv4,target:"_blank",rel:"noreferrer","data-native":!0},Object(h.h)("i",{class:"fas fa-share"})," ",Object(h.h)(f.c,{id:"story.share"},"Del")))))),Object(h.h)("div",{class:"mt-2"},Object(h.h)(y.a,{stores:this.props.stores,story:x,col:"10",offset:"2",compact:!1,showAllComments:P,initCall:this.closeAllAddComments}),i[x.id]&&Object(h.h)(w.a,{stores:this.props.stores,story:x,inputRef:function(t){return r.inputRef[x.id]=t},inputRefObject:this.inputRef,col:"10",offset:"2",key:"story-comment-"+x.id}))))},s}(h.Component))||u;e.a=F}).call(this,s("hosL").Fragment)},P9Fo:function(t,e,s){"use strict";(function(t){var o,n=s("hosL"),r=s("Utv1"),a=s("/eY4"),i=(s("cneo"),s("OhSV")),l=s("fh8t"),c=s.n(l),d=(s("go65"),s("ZOvn")),u=Object(a.a)(o=function(e){function s(t){var s;return(s=e.call(this,t)||this).pollStory=function(t){return new Promise((function(e,o){return Promise.resolve(s.props.stores.storyStore.pollStory({id:s.props.storyId,line:t.target.dataset.line})).then((function(t){try{return t,e()}catch(t){return o(t)}}),o)}))},s.toggleResult=function(){s.setState({viewResult:!s.state.viewResult})},s.state={},s.inputRef={},s}var o,a;return a=e,(o=s).prototype=Object.create(a.prototype),o.prototype.constructor=o,o.__proto__=a,s.prototype.render=function(){var e=this,s=this.state.viewResult,o=this.props,a=o.story,l=o.opts,u=o.selectedImageIdx,h=this.props.stores,m=h.userStore.user,b=m.language,p=void 0===b?"en":b,f=o.content.split("\n").map((function(t){return t.trim().replace(/^\-\s*/g,"")})),O=a.polls&&a.polls.findIndex((function(t){return t.user===m.id}))>-1,g=a.polls?a.polls.length:0,j=0;f.forEach((function(t){var e=100*(a.polls?a.polls.filter((function(e){return e.line===d.a.md5(t)})).length/g:0);e>j&&(j=e)}));var v=l.days?parseInt(l.days,10):7,y=r.a.addDays(a.date,v),w=y<new Date,k=new RegExp(/{{img\./i);return Object(n.h)(t,null,Object(n.h)("div",{class:"w-100 my-4 storyPoll"},w||O||s?Object(n.h)(t,null,f&&f.map((function(e){var s=a.polls&&a.polls.findIndex((function(t){return t.user===m.id&&t.line===d.a.md5(e)}))>-1,o=(a.polls?a.polls.filter((function(t){return t.line===d.a.md5(e)})).length:0)/g*100;return Object(n.h)(t,null,Object(n.h)("div",{class:"progress position-relative my-2 ",style:"height: 1.5em; font-size: 1.3em;"},Object(n.h)("span",{class:"position-absolute",style:"right: 10px;"}," ",r.a.format(o||0,1),"%"),Object(n.h)("span",{class:"position-absolute",style:"left: 10px;"},Object(n.h)(c.a,{markdown:d.a.replaceImages(e+" "+(s&&"<i class='fas fa-check-circle' />"),a.images,p,!1),markdownOpts:d.a.getMarkdownOptions()})),Object(n.h)("div",{class:"progress-bar "+(j===o?"bg-primary":"bg-secondary"),role:"progressbar",style:"width: "+o+"%;","aria-valuenow":o,"aria-valuemin":"0","aria-valuemax":"100"})))})),Object(n.h)("div",{class:"w-100 mt-3 text-muted d-flex justify-content-start"},Object(n.h)("div",null,r.a.format(g,0)," ",1===g?Object(n.h)(i.c,{id:"story.poll"},"vote"):Object(n.h)(i.c,{id:"story.polls"},"votes")),w?Object(n.h)(t,null,Object(n.h)("div",{class:"ml-2"},"- ",Object(n.h)(i.c,{id:"story.finished"},"Finished"))):Object(n.h)(t,null,Object(n.h)("div",{class:"ml-2"},"- ",r.a.formatDistance(y,new Date,{},{extended:!0})," ",Object(n.h)(i.c,{id:"story.left"},"left")),!O&&Object(n.h)("div",{class:"ml-2",onClick:this.toggleResult},"- ",Object(n.h)(i.c,{id:"story.view-vote"},"View vote"))))):Object(n.h)(t,null,f&&f.map((function(s,o){return Object(n.h)(t,null,Object(n.h)("button",{class:"btn btn-block "+(k.test(s)&&o===u?"btn-outline-success":"btn-outline-primary")+" rounded-pill",onClick:e.pollStory,"data-line":d.a.md5(s)},k.test(s)&&o===u&&Object(n.h)("span",{class:"float-right"},Object(n.h)("i",{class:"fas fa-eye"})),Object(n.h)(c.a,{markdown:d.a.replaceImages(s,a.images,p,!1),markdownOpts:d.a.getMarkdownOptions()})))})),Object(n.h)("div",{class:"w-100 mt-3 text-muted d-flex justify-content-start"},Object(n.h)("div",null,r.a.format(g,0)," ",1===g?Object(n.h)(i.c,{id:"story.poll"},"vote"):Object(n.h)(i.c,{id:"story.polls"},"votes")),w?Object(n.h)(t,null,Object(n.h)("div",{class:"ml-2"},"- ",Object(n.h)(i.c,{id:"story.finished"},"Finished"))):Object(n.h)(t,null,Object(n.h)("div",{class:"ml-2"},"- ",r.a.formatDistance(y,new Date,{},{extended:!0})," ",Object(n.h)(i.c,{id:"story.left"},"left"))),Object(n.h)("div",{class:"ml-2",onClick:this.toggleResult},"- ",Object(n.h)(i.c,{id:"story.view-results"},"View results"))))))},s}(n.Component))||o;e.a=u}).call(this,s("hosL").Fragment)},QkTp:function(t,e,s){"use strict";(function(t){var o,n=s("hosL"),r=s("Utv1"),a=s("/eY4"),i=(s("OhSV"),s("ZOvn"),Object(a.a)(o=function(e){function s(){return e.apply(this,arguments)||this}var o,a;return a=e,(o=s).prototype=Object.create(a.prototype),o.prototype.constructor=o,o.__proto__=a,s.prototype.render=function(){var e=this.props,s=e.value,o=void 0===s?0:s,a=this.props.stores.userStore.user.settings;return(void 0===a?{}:a).imperial?Object(n.h)(t,null,Object(n.h)("nobr",null,r.a.format(function(t){return 9*t/5+32}(o),0),"Â°F")):Object(n.h)(t,null,Object(n.h)("nobr",null,r.a.format(o,1),"Â°C"))},s}(n.Component))||o);e.a=i}).call(this,s("hosL").Fragment)},UwwE:function(t,e,s){"use strict";(function(t){var o,n=s("hosL"),r=s("Utv1"),a=s("/eY4"),i=(s("OhSV"),s("ZOvn"),Object(a.a)(o=function(e){function s(){return e.apply(this,arguments)||this}var o,a;return a=e,(o=s).prototype=Object.create(a.prototype),o.prototype.constructor=o,o.__proto__=a,s.prototype.render=function(){var e=this.props,s=e.value,o=void 0===s?0:s,a=this.props.stores.userStore.user.settings;return(void 0===a?{}:a).imperial?Object(n.h)(t,null,Object(n.h)("nobr",null,r.a.format(function(t){return 2.20462*t}(o),0)," lb")):Object(n.h)(t,null,Object(n.h)("nobr",null,r.a.format(o,0)," kg"))},s}(n.Component))||o);e.a=i}).call(this,s("hosL").Fragment)},VKmm:function(t,e,s){"use strict";function o(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,o)}return s}function n(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}var r,a=s("hosL"),i=s("Utv1"),l=s("/eY4"),c=s("OhSV"),d=(s("ZOvn"),s("eQ6k"),{requestSent:{}}),u=Object(l.a)(r=function(t){function e(e){var s;return(s=t.call(this,e)||this).requestFollowTeam=function(t){var e=s.props.stores,o=e.teamStore,n=e.userStore.user,r=t.target.closest("button").dataset.team;o.followRequest(parseInt(r,10),n);var a=s.state.requestSent;a[r]=!0,s.setState({requestSent:a})},s.getButton=function(t){var e=s.state.requestSent,o=s.props.stores.userStore.user,n=t.members&&t.members.findIndex((function(t){return t.id===o.id}))>-1,r=t.followers&&t.followers.indexOf(o.id)>-1,i=t.blockedFollowers&&t.blockedFollowers.indexOf(o.id)>-1,l=e[t.id]||t.followRequests&&t.followRequests.findIndex((function(t){return t.id===o.id}))>-1;return n?Object(a.h)("i",{class:"fas fa-home"}):r?Object(a.h)("button",{class:"btn btn-sm btn-block btn-outline-secondary float-right",onClick:s.unFollowTeam,disabled:"true","data-team":t.id},Object(a.h)("i",{class:"fas fa-link mr-2"}),Object(a.h)(c.c,{id:"teams.connect.is-following"},"FÃ¸lger")):i?Object(a.h)("button",{class:"btn btn-sm btn-block btn-outline-secondary float-right",disabled:"true"},Object(a.h)("i",{class:"fas fa-hand-paper mr-2"}),Object(a.h)(c.c,{id:"teams.connect.is-blocked"},"Blokkert")):l?Object(a.h)("button",{class:"btn btn-sm btn-block btn-outline-secondary float-right",disabled:"true"},Object(a.h)("i",{class:"fas fa-hourglass-half mr-2"}),Object(a.h)(c.c,{id:"teams.connect.has-requested"},"Venter pÃ¥ godkjenning")):Object(a.h)("button",{class:"btn btn-sm btn-block btn-outline-success float-right",onClick:s.requestFollowTeam,"data-team":t.id},Object(a.h)("i",{class:"far fa-hand-point-right mr-2"}),Object(a.h)(c.c,{id:"teams.connect.follow"},"FÃ¸lg"))},s.state=function(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?o(Object(s),!0).forEach((function(e){n(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):o(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}({},d),s}var s,r;r=t,(s=e).prototype=Object.create(r.prototype),s.prototype.constructor=s,s.__proto__=r;var l=e.prototype;return l.loadTeams=function(){return new Promise(function(t,e){return this.setState({isLoading:!0}),Promise.resolve(this.props.stores.teamStore.loadPublic({query:{notfollowing:1,array:1},limit:15})).then(function(){try{return this.setState({isLoading:!1}),t()}catch(t){return e(t)}}.bind(this),e)}.bind(this))},l.componentDidMount=function(){this.loadTeams()},l.render=function(){var t=this,e=this.props.stores,s=e.teamStore.publicTeamsToFollow,o=e.appState.darkmode;return s&&0!==s.length?Object(a.h)("div",{class:"row pb-1 bg-light"},Object(a.h)("div",{class:"col-12 col-sm-8 col-lg-6 offset-sm-2 offset-lg-3 mb-0 position-relative rounded rounded-lg py-3 bg-"+(o?"black":"white")+" shadow-sm"},Object(a.h)("div",{class:"container-fluid"},Object(a.h)("div",{class:"row"},Object(a.h)("div",{class:"col-12"},Object(a.h)("h5",null,Object(a.h)(c.c,{id:"teams.connect.teams-to-follow"},"Team du kan fÃ¸lge"),":"))),Object(a.h)("div",{class:"row"},Object(a.h)("div",{class:"d-flex flex-row flex-nowrap",style:"overflow: auto;"},i.a.isArray(s)&&s.map((function(e){var s=e.image&&e.image.s3SmallLink?e.image:null;return Object(a.h)("div",{class:"mr-2",style:"width: 110px;"},Object(a.h)("div",{class:"text-center border rounded-lg",style:s?'background-image: url("'+s.s3SmallLink+'"); background-size: cover; width: 110px; height: 100px;':"width: 110px; height: 100px;"},!s&&Object(a.h)("i",{class:"fas fa-users text-muted mt-3",style:"font-size: 40px;"})),Object(a.h)("small",null,Object(a.h)("div",{class:"text-overflow"},Object(a.h)("strong",null,e.name)),Object(a.h)("div",{class:"text-overflow"},e.place?e.place+", ":""," ",e.country," Â "),Object(a.h)("div",{class:"text-overflow"},Object(a.h)("small",{class:"text-muted"},e&&e.dogs&&Object(a.h)("span",{class:""},Object(a.h)("i",{class:"fas fa-dog"})," ",e.dogs.length),e&&e.followers&&Object(a.h)("span",{class:"ml-2"},Object(a.h)("i",{class:"fas fa-user"})," ",e.followers.length)))),Object(a.h)("div",null,t.getButton(e)))}))))))):""},e}(a.Component))||r;e.a=u},epqT:function(t,e,s){"use strict";(function(t){function o(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,o)}return s}function n(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}var r,a=s("hosL"),i=s("Utv1"),l=s("/eY4"),c=s("OhSV"),d=(s("ZOvn"),{showAddComment:!1}),u=Object(c.d)((function(){return{subject:Object(a.h)(c.c,{id:"ad.subject"},"AnnonseforespÃ¸rsel"),body:Object(a.h)(c.c,{id:"ad.body"},"Hei, Jeg Ã¸nsker Ã¥ vite mer om annonsering i appen The Musher.")}}))(r=Object(l.a)(r=function(e){function s(t){var s;return(s=e.call(this,t)||this).logClick=function(){return new Promise((function(t,e){var o,n,r,a,i;return a=void 0===(r=(n=(o=s.props.stores).adStore).ads)?[]:r,i=o.userStore.user,Promise.resolve(n.logClick({id:a.length>0?a[0].id:null,user:(void 0===i?{}:i).id})).then((function(){try{return t()}catch(t){return e(t)}}),e)}))},s.state=function(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?o(Object(s),!0).forEach((function(e){n(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):o(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}({},d),s.updateTimer={},s.inputRef={},s.apiServer=i.a.getApiServer(),s}var r,l;l=e,(r=s).prototype=Object.create(l.prototype),r.prototype.constructor=r,r.__proto__=l;var u=s.prototype;return u.loadAd=function(t){return new Promise(function(e,s){var o,n,r,a,i,l,c,d,u,h,m;return void 0===t&&(t=this.props),this.setState({isLoading:!0}),n=(o=this.props.stores).adStore,a=this.props.section,l=void 0===(i=o.appState.path)?"":i,u=void 0===(d=(r=o.userStore).user.language)?"en":d,h={},(c=o.workoutStore.currentTeam)&&(h=r.findTeam(c,!0))&&h.id&&(r.findTeamAmbition({ambition:h.ambitions,language:u}),r.findTeamType({type:h.type,language:u}),h.postalcode,h.place,h.country),l.replace(/\d+$/,"detail"),m=l.replace(/\/\d+/,"/detail"),Promise.resolve(n.load({query:{page:m,section:a}})).then(function(){try{return n.setTime(),this.setState({isLoading:!1}),e()}catch(t){return s(t)}}.bind(this),s)}.bind(this))},u.componentDidMount=function(){this.loadAd()},u.componentWillReceiveProps=function(t){t.path!==this.props.path&&this.loadAd(t)},u.render=function(){var e=this.props.stores,s=e.adStore,o=this.props,n=o.subject,r=o.body,i=o.section,l=e.appState.path,d=e.userStore.user,u=void 0===d?{}:d,h=s.ads,m=void 0===h?[]:h,b=s.time;if(!u||!u.id||!m||0===m.length)return l.match(/\/(home)/i)?Object(a.h)(t,null,Object(a.h)("div",{class:"w-100"},Object(a.h)("div",{class:"row"},Object(a.h)("div",{class:"col-12 col-sm-8 col-lg-6 offset-sm-2 offset-lg-3 mb-0 position-relative"},Object(a.h)("div",{class:"border rounded-lg p-4 my-3"},Object(a.h)("span",{class:"float-right display-4 text-warning"},Object(a.h)("i",{class:"far fa-smile-wink"})),Object(a.h)("h5",null,Object(a.h)(c.c,{id:"ad.heading"},"Vil du annonsere her?")),Object(a.h)("div",null,Object(a.h)(c.c,{id:"ad.teaser"},"Det er super enkelt :)")),Object(a.h)(c.b,null,Object(a.h)("a",{href:"mailto:post@themusher.no?subject="+n+": "+l+": "+i+"&body="+r,target:"_blank",rel:"noreferrer"},Object(a.h)("i",{class:"fas fa-paper-plane"})," ",Object(a.h)(c.c,{id:"ad.linktext"},"Ta kontakt med The Musher")))))))):Object(a.h)(t,null);var p=m[0];return Object(a.h)(t,null,Object(a.h)("div",{class:"w-100"},Object(a.h)("div",{class:"row"},Object(a.h)("div",{class:"col-12 col-sm-8 col-lg-6 offset-sm-2 offset-lg-3 mb-0 position-relative"},Object(a.h)("div",null,Object(a.h)("small",null,Object(a.h)("small",{class:"text-muted"},Object(a.h)(c.c,{id:"ad.ad"},"Annonse"),":",Object(a.h)("img",{src:this.apiServer+"/api/ads/"+p.id+"/view?user="+u.id+"&time="+b,style:"width: 1; height: 1; opacity: 0.1;"})))),p.target?Object(a.h)(t,null,Object(a.h)("a",{class:"stretched-link",href:""+p.url,target:p.target||"_blank",rel:"noopener noreferrer",onClick:this.logClick,native:!0},p.images&&p.images[0]&&Object(a.h)(t,null,Object(a.h)("img",{src:p.images[0].s3LargeLink,class:"img-fluid rounded-lg"})))):Object(a.h)(t,null,Object(a.h)("a",{class:"stretched-link",href:""+p.url,onClick:this.logClick},p.images&&p.images[0]&&Object(a.h)(t,null,Object(a.h)("img",{src:p.images[0].s3LargeLink,class:"img-fluid rounded-lg"}))))))))},s}(a.Component))||r)||r;e.a=u}).call(this,s("hosL").Fragment)},fQqW:function(t,e,s){"use strict";s.r(e),function(t){function o(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,o)}return s}function n(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}var r,a=s("hosL"),i=(s("Utv1"),s("/eY4")),l=s("OhSV"),c=(s("Y3FI"),s("go65"),s("X9Km"),s("ZOvn")),d=s("AEg1"),u=s("gOLw"),h=(s("AJN2"),s("epqT"),s("w93r")),m=c.a.marginTop(!1),b=c.a.marginBottom(),p=c.a.marginTopBack(!1),f={isLoading:!1,submenu:"lastWorkouts",viewmenu:"wall"},O=Object(i.a)(r=function(e){function s(t){var s;return(s=e.call(this,t)||this).reloadFeeds=function(t){return new Promise((function(e){return t.preventDefault(),s.setState({isLoading:!0}),s.setState({isLoading:!1}),e()}))},s.sortby=function(t){var e=s.props.stores.storyStore,o=function(){};switch(t.target.value){case"likes":o=function(t,e){return t.likes&&e.likes&&t.likes.length<e.likes.length};break;case"-likes":o=function(t,e){return t.likes&&e.likes&&t.likes.length>e.likes.length};break;case"comments":o=function(t,e){return t.comments&&e.comments&&t.comments.length<e.comments.length};break;case"-comments":o=function(t,e){return t.comments&&e.comments&&t.comments.length>e.comments.length};break;default:o=function(t,e){return t.id<e.id}}e.sortPublicFeed(o)},s.back=function(){s.props.stores.history.goBack()},s.state=function(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?o(Object(s),!0).forEach((function(e){n(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):o(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}({},f),s}var r,i;i=e,(r=s).prototype=Object.create(i.prototype),r.prototype.constructor=r,r.__proto__=i;var O=s.prototype;return O.loadAll=function(){return new Promise(function(t,e){var s,o,n,r,a,i;return o=(s=this.props.stores).appState,n=s.userStore,r=s.messageStore,this.setState({isLoading:!0}),Promise.resolve(o.getFingerprint()).then(function(){try{return Promise.resolve(n.getInfo()).then(function(){try{return Promise.resolve(n.getNotifications()).then(function(){try{return Promise.resolve(r.getUnReadMessages()).then(function(){try{return(a=n.user).currentLocationInfo&&a.currentLocationInfo.coords&&n.getWeatherUser({lat:(i=a.currentLocationInfo.coords).latitude,lon:i.longitude,altitude:i.altitude}),this.setState({isLoading:!1}),t()}catch(t){return e(t)}}.bind(this),e)}catch(t){return e(t)}}.bind(this),e)}catch(t){return e(t)}}.bind(this),e)}catch(t){return e(t)}}.bind(this),e)}.bind(this))},O.componentDidMount=function(){this.loadAll()},O.render=function(){var e,s,o=this.props,n=o.story,r=o.hashtag,i=o.teamid,f=o.path,O=this.props.stores,g=O.userStore,j=O.storyStore.findPublicTeamByUuidv4(i),v=g.user,y=v.yrWeather,w=v.currentLocationGeocode,k=(void 0===w?{}:w).formatted_address,x=c.a.getImage({team:j});return j&&j.name?(e=c.a.displayNameShort(j),s=c.a.displayName(j),c.a.displayName(v)):v&&v.id&&(e=c.a.displayNameShort(v),s=c.a.displayName(v)),Object(a.h)("div",{class:"container-fluid",style:"margin-bottom: "+b+"; margin-top: "+m+";"},Object(a.h)("button",{class:"btn btn-link pl-0 fixed-top text-primary",style:"top: "+p+"; left: 5px; font-size: 35px; width: 45px;",onClick:this.back},Object(a.h)("i",{class:"fas fa-arrow-circle-left"})),Object(a.h)("div",{class:"bg-light"},Object(a.h)(h.a,{stores:this.props.stores,data:y,place:k})),Object(a.h)(d.a,{stores:this.props.stores}),Object(a.h)("div",{class:"row bg-light pb-3 pt-3"},Object(a.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 border-bottom"},Object(a.h)("div",{class:"row"},Object(a.h)("div",{class:"col-7 text-overflow"},Object(a.h)("h3",null,r&&Object(a.h)(t,null,Object(a.h)("span",{class:"badge badge-primary"},"#",r)),j&&Object(a.h)(t,null,Object(a.h)("div",{class:"d-flex position-relative"},Object(a.h)("div",{class:"text-center border rounded-circle imageRounded imageRoundedSmall",style:x?'background-image: url("'+x+'"); background-size: cover;':""},!x&&Object(a.h)("div",{class:"text-muted",style:"font-size: 20px; padding-top: 3px;"},e)),Object(a.h)("div",{class:"flex-grow-1 pl-3 text-overflow",style:"line-height: 1.2em;"},Object(a.h)("h3",{class:"mb-1"},j.public?Object(a.h)(t,null,Object(a.h)("a",{href:"/teams/public/"+j.uuidv4,class:"stretched-link"},s)):Object(a.h)(t,null,s))))))),Object(a.h)("div",{class:"col-5"},Object(a.h)("small",{class:"float-right mt-1"},Object(a.h)("select",{class:"custom-select custom-select-sm",id:"team",onChange:this.sortby},Object(a.h)("option",{value:""},Object(a.h)(l.c,{id:"story.sort.new"},"Nyeste fÃ¸rst")),Object(a.h)("option",{value:"likes"},Object(a.h)(l.c,{id:"story.sort.likes-desc"},"Flest likes fÃ¸rst")),Object(a.h)("option",{value:"-likes"},Object(a.h)(l.c,{id:"story.sort.likes-asc"},"FÃ¦rrest likes fÃ¸rst")),Object(a.h)("option",{value:"comments"},Object(a.h)(l.c,{id:"story.sort.comments-desc"},"Flest kommentarer fÃ¸rst")),Object(a.h)("option",{value:"-comments"},Object(a.h)(l.c,{id:"story.sort.comments-asc"},"FÃ¦rrest kommentarer fÃ¸rst")))))))),Object(a.h)(u.a,{stores:this.props.stores,story:n,hashtag:r,teamid:i,path:f}))},s}(a.Component))||r;e.default=O}.call(this,s("hosL").Fragment)},gOLw:function(t,e,s){"use strict";(function(t){function o(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,o)}return s}function n(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}var r,a=s("hosL"),i=s("Utv1"),l=s("/eY4"),c=(s("X9Km"),s("NMoA")),d=s("VKmm"),u=s("rWES"),h=s("epqT"),m=s("yHBq"),b=s("q/oJ"),p=s("gWxU"),f=s("Nanz"),O=s("ISGx"),g=s("ZOvn"),j=g.a.marginTop(!1),v={loading:!1,limit:10,offset:0,idxConfirm:0,idxSuggestion:1,idxAd:5,sessionid:(new Date).getTime()},y=["id","type","user","team","title"],w=Object(l.a)(r=function(e){function s(s){var r;return(r=e.call(this,s)||this).reloadStories=function(){return new Promise((function(t,e){var s,o,n;return s=r.props.stores.appState,n=(o=r.state).limit,o.offset,0,r.setState({offset:0}),Promise.resolve(r.loadStoriesPublicFeed({props:r.props,limit:n,offset:0})).then((function(){try{return s.appContainerScrollTop(),t()}catch(t){return e(t)}}),e)}))},r.setCheckForNewStories=function(t){void 0===t&&(t=r.props),r.checkForNewStoriesTimer=setInterval((function(){return r.checkForNewStories({props:t})}),6e4)},r.clearCheckForNewStories=function(){clearInterval(r.checkForNewStoriesTimer)},r.insertTopRanked=function(){var t=r.props.stores.storyStore,e=t.publicFeed,s=i.a.shuffleArray(t.topRankedStories),o=[].concat(e),n=0,a=new Date;o.forEach((function(t,e){var s=i.a.parseInputDate(t.date);Math.floor((a.getTime()-s.getTime())/1e3)<86400&&(n=e+1)}));var l=o.length;if(l>n+3){for(var c=0;c<3;c+=1){var d=g.a.randomInt(n,l);i.a.isObject(s[c])&&o.splice(d,0,s[c])}t.localUpdateField("publicFeed",o)}},r.insertAds=function(){var t=r.state.idxAd,e=r.props.stores.storyStore,s=[].concat(e.publicFeed);s.splice(t,0,{type:"ad",wrapperClassNames:"row",contentClassNames:"col-12"}),e.localUpdateField("publicFeed",s)},r.insertTeamConfirm=function(){var t=r.state.idxConfirm,e=r.props.stores.storyStore,s=[].concat(e.publicFeed);s.splice(t,0,{type:"teamConfirm",wrapperClassNames:"row",contentClassNames:"col-12"}),e.localUpdateField("publicFeed",s)},r.insertTeamSuggestions=function(){var t=r.state.idxSuggestion,e=r.props.stores.storyStore,s=[].concat(e.publicFeed);s.splice(t,0,{type:"teamSuggestions",wrapperClassNames:"row",contentClassNames:"col-12"}),e.localUpdateField("publicFeed",s)},r.setLoadMore=function(){r.props.stores.storyStore.setLoadMore((function(){var t=r.state,e=t.limit,s=t.offset;r.setState({offset:s+=e}),r.loadStoriesPublicFeed({limit:e,offset:s})}))},r.unsetLoadMore=function(){r.props.stores.storyStore.setLoadMore((function(){}))},r.onTeamClick=function(t,e){return t.preventDefault(),t.stopPropagation(),r.setState({showTeam:e}),!1},r.hideTeam=function(){r.setState({showTeam:null})},r.onUserClick=function(t){return t.preventDefault(),t.stopPropagation(),!1},r.onDogClick=function(t,e,s){return t.preventDefault(),t.stopPropagation(),r.setState({showDog:e,dogs:s}),!1},r.hideDog=function(){r.setState({showDog:null})},r.setupIntersection=function(){r.setState({handleIntersection:g.a.intersectionObserverCallback});var t=r.props.stores.storyStore;r.scrollViewTimer=setInterval((function(){return t.postScrollview(g.a.getIntersectionObserverHistory())}),3e4)},r.renderContent=function(e){var s=e.obj,o=e.idx,n=r.props.stores.appState.path,i=r.props.hashtag;return"ad"===s.type?Object(a.h)(t,null,Object(a.h)(h.a,{stores:r.props.stores,path:n})):"teamConfirm"===s.type?Object(a.h)(t,null,Object(a.h)(u.a,{stores:r.props.stores})):"teamSuggestions"===s.type?Object(a.h)(t,null,Object(a.h)(d.a,{stores:r.props.stores})):"workout"===s.type?Object(a.h)(t,null,Object(a.h)(O.a,{stores:r.props.stores,feed:s,idx:o,onTeamClick:r.onTeamClick,onUserClick:r.onUserClick,onDogClick:r.onDogClick,holdingStore:"story"})):Object(a.h)(t,null,Object(a.h)(c.a,{stores:r.props.stores,story:s,hashtag:i,key:"story-detail-"+s.id,onTeamClick:r.onTeamClick,onUserClick:r.onUserClick}))},r.state=function(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?o(Object(s),!0).forEach((function(e){n(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):o(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}({},v),r.inputRef={},r.ref={},r}var r,l;l=e,(r=s).prototype=Object.create(l.prototype),r.prototype.constructor=r,r.__proto__=l;var w=s.prototype;return w.loadStoriesPublicFeed=function(t){return new Promise(function(e,s){var o,n,r;return r=t.offset,(n=void 0===(o=t.props)?this.props:o).path,Promise.resolve(n.stores.storyStore.loadPublicFeed({hashtag:n.hashtag,hashtags:n.hashtags,teamid:n.teamid,limit:t.limit,offset:r,sort:void 0})).then(function(){try{return r||(this.insertTopRanked(),this.insertTeamConfirm()),e()}catch(t){return s(t)}}.bind(this),s)}.bind(this))},w.checkForNewStories=function(t){return new Promise(function(e,s){var o,n;return t.limit,t.offset,(n=void 0===(o=t.props)?this.props:o).path,Promise.resolve(n.stores.storyStore.checkForNewStories({hashtag:n.hashtag,hashtags:n.hashtags,teamid:n.teamid})).then((function(){try{return e()}catch(t){return s(t)}}),s)}.bind(this))},w.componentWillMount=function(){this.setupIntersection()},w.componentDidMount=function(){this.loadStoriesPublicFeed({limit:this.state.limit,offset:0}),this.setLoadMore(),this.setCheckForNewStories()},w.componentWillUnmount=function(){this.unsetLoadMore(),this.props.stores.storyStore.postScrollview(g.a.getIntersectionObserverHistory()),clearInterval(this.scrollViewTimer),this.clearCheckForNewStories()},w.componentWillReceiveProps=function(t){t.hashtag===this.props.hashtag&&t.path===this.props.path||this.loadStoriesPublicFeed({props:t,limit:this.state.limit,offset:0})},w.render=function(){var e=this.state,s=e.loading,o=e.handleIntersection,n=e.sessionid,r=e.showTeam,i=e.showDog,l=this.props.stores,c=l.storyStore,d=c.publicFeed,u=c.hasNewStories,h=c.publicDogs,O=l.appState.darkmode;return Object(a.h)(t,null,r&&Object(a.h)(b.a,null,Object(a.h)(p.default,{stores:this.props.stores,teamid:r,marginTop:"0px;",marginBottom:"0px;",back:this.hideTeam})),i&&Object(a.h)(b.a,null,Object(a.h)(f.default,{stores:this.props.stores,dogid:i,marginTop:"0px;",marginBottom:"0px;",back:this.hideDog,dogs:h})),Object(a.h)("div",{class:"w-100"},u&&Object(a.h)(t,null,Object(a.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 d-flex justify-content-center fixed-top",style:"margin-top: "+j+";"},Object(a.h)("button",{class:"btn btn-sm btn-primary rounded-pill",onClick:this.reloadStories},"New stories"))),Object(a.h)(m.a,{data:d,wrapperClassNames:"row pb-1",contentClassNames:"col-12 col-sm-8 col-lg-6 offset-sm-2 offset-lg-3 my-1 position-relative rounded rounded-lg py-3 bg-"+(O?"black":"white")+" shadow-sm",renderContent:this.renderContent,dataFields:y,handleIntersection:o,sessionid:n}),s&&Object(a.h)("div",{class:"d-flex justify-content-center"},Object(a.h)("div",{class:"spinner-border text-primary",role:"status"},Object(a.h)("span",{class:"sr-only"},"Loading...")))))},s}(a.Component))||r;e.a=w}).call(this,s("hosL").Fragment)},irB3:function(t,e,s){"use strict";(function(t){var o,n=s("hosL"),r=s("Utv1"),a=s("/eY4"),i=(s("OhSV"),s("ZOvn"),Object(a.a)(o=function(e){function s(){return e.apply(this,arguments)||this}var o,a;return a=e,(o=s).prototype=Object.create(a.prototype),o.prototype.constructor=o,o.__proto__=a,s.prototype.render=function(){var e=this.props,s=e.value,o=void 0===s?0:s,a=e.smallUnit,i=this.props.stores.userStore.user.settings;return(void 0===i?{}:i).imperial?Object(n.h)(t,null,Object(n.h)("nobr",null,r.a.format(function(t){return 3.28084*t}(o),0)," ",a?Object(n.h)(t,null,Object(n.h)("small",null,Object(n.h)("small",null,Object(n.h)("small",{class:"ml-0 text-muted"},"ft")))):Object(n.h)(t,null,"ft"))):Object(n.h)(t,null,Object(n.h)("nobr",null,r.a.format(o,0)," ",a?Object(n.h)(t,null,Object(n.h)("small",null,Object(n.h)("small",null,Object(n.h)("small",{class:"ml-0 text-muted"},"m")))):Object(n.h)(t,null,"m")))},s}(n.Component))||o);e.a=i}).call(this,s("hosL").Fragment)},nHdA:function(t,e,s){"use strict";(function(t){var o,n=s("hosL"),r=s("Utv1"),a=s("/eY4"),i=s("OhSV"),l=(s("ZOvn"),Object(a.a)(o=function(e){function s(){return e.apply(this,arguments)||this}var o,a;return a=e,(o=s).prototype=Object.create(a.prototype),o.prototype.constructor=o,o.__proto__=a,s.prototype.render=function(){var e=this.props,s=e.value,o=void 0===s?0:s,a=e.smallUnit,l=this.props.stores.userStore.user.settings;return(void 0===l?{}:l).imperial?Object(n.h)(t,null,Object(n.h)("nobr",null,r.a.format(function(t){return.621371*t}(o),1)," ",a?Object(n.h)(t,null,Object(n.h)("small",null,Object(n.h)("small",null,Object(n.h)("small",{class:"ml-0 text-muted"},Object(n.h)(i.c,{id:"workouts.mph"},"mph"))))):Object(n.h)(t,null,Object(n.h)(i.c,{id:"workouts.mph"},"mph")))):Object(n.h)(t,null,Object(n.h)("nobr",null,r.a.format(o,1)," ",a?Object(n.h)(t,null,Object(n.h)("small",null,Object(n.h)("small",null,Object(n.h)("small",{class:"ml-0 text-muted"},Object(n.h)(i.c,{id:"workouts.kmt"},"km/t"))))):Object(n.h)(t,null,Object(n.h)(i.c,{id:"workouts.kmt"},"km/t"))))},s}(n.Component))||o);e.a=l}).call(this,s("hosL").Fragment)},om2D:function(t,e,s){"use strict";var o,n=s("hosL"),r=s("/eY4"),a=(s("cneo"),s("Utv1"),s("u2zT")),i=Object(r.a)(o=function(t){function e(e){var s;return(s=t.call(this,e)||this).handleAddImage=function(t){var e=s.props.addToImages,o=void 0===e||e,n=s.props,r=n.updateField,a=n.object,i=n.field;if(i&&r({id:a.id,field:i,value:t,skipTimer:!0}),o){var l=[];l.push(t),r({id:a.id,field:"images",value:l,skipTimer:!0})}},s.state={files:[]},s}var s,o;return o=t,(s=e).prototype=Object.create(o.prototype),s.prototype.constructor=s,s.__proto__=o,e.prototype.render=function(){var t=this.props,e=t.uploadStatus,s=void 0===e?function(){}:e,o=t.before,r=void 0===o?function(){}:o,i=t.after,l=void 0===i?function(){}:i,c=t.autoOpen,d=void 0===c||c;return Object(n.h)("div",{class:"row"},Object(n.h)("div",{class:"col-12"},Object(n.h)(a.a,{handleAddImage:this.handleAddImage,uploadStatus:s,apiUrl:"/api/fileupload",before:r,after:l,autoOpen:d},Object(n.h)("div",{style:{height:30,width:"100%"}}))))},e}(n.Component))||o;e.a=i},rWES:function(t,e,s){"use strict";(function(t){function o(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,o)}return s}function n(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}var r,a=s("hosL"),i=s("Utv1"),l=s("/eY4"),c=s("OhSV"),d=s("ZOvn"),u=(s("eQ6k"),{confirmed:{},deleted:{}}),h=Object(l.a)(r=function(e){function s(t){var s;return(s=e.call(this,t)||this).confirmRequest=function(t){var e=t.target.closest("button").dataset,o=e.team,n=e.user,r=e.follow,a=s.props.stores.teamStore;a.confirmFollowRequest({team:parseInt(o,10),user:parseInt(n,10)});var i=s.state.confirmed;i[o+"-"+n]=!0,s.setState({confirmed:i}),r&&a.followRequestUser(n)},s.deleteRequest=function(t){var e=t.target.closest("button").dataset,o=e.team,n=e.user;s.props.stores.teamStore.deleteFollowRequest({team:parseInt(o,10),user:parseInt(n,10)});var r=s.state.deleted;r[o+"-"+n]=!0,s.setState({deleted:r})},s.state=function(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?o(Object(s),!0).forEach((function(e){n(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):o(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}({},u),s}var r,l;l=e,(r=s).prototype=Object.create(l.prototype),r.prototype.constructor=r,r.__proto__=l;var h=s.prototype;return h.loadTeams=function(){return new Promise(function(t,e){return Promise.resolve(this.props.stores.teamStore.load({query:{},addData:["followRequests"]})).then((function(){try{return t()}catch(t){return e(t)}}),e)}.bind(this))},h.componentDidMount=function(){this.loadTeams()},h.render=function(){var e=this,s=this.state,o=s.deleted,n=void 0===o?{}:o,r=s.confirmed,l=void 0===r?{}:r,u=this.props.stores,h=u.teamStore,m=h.teams,b=h.followRequests,p=void 0===b?[]:b,f=u.appState.darkmode;return h.hasFollowRequests?Object(a.h)("div",{class:"row pb-1"},Object(a.h)("div",{class:"col-12 col-sm-8 col-lg-6 offset-sm-2 offset-lg-3 mb-0 position-relative rounded rounded-lg py-3 bg-"+(f?"black":"white")+" shadow-sm"},Object(a.h)("div",{class:"container-fluid"},Object(a.h)("div",{class:"row"},Object(a.h)("div",{class:"col-12"},Object(a.h)("h5",null,Object(a.h)(c.c,{id:"teams.connect.teams-follow-requests"},"ForespÃ¸rsel om Ã¥ fÃ¸lge"),":"))),Object(a.h)("div",{class:"row"},Object(a.h)("div",{class:"d-flex flex-row flex-nowrap",style:"overflow: auto;"},i.a.isArray(m)&&m.map((function(s){return Object(a.h)(t,null,s&&i.a.isArray(s.followRequests)&&s.followRequests.map((function(o){var r=o.image&&o.image.s3SmallLink?o.image:null,i=n[s.id+"-"+o.id],u=l[s.id+"-"+o.id],h=p.find((function(t){return t.user.id===o.id}));return Object(a.h)("div",{class:"mr-2 py-2 border rounded-lg",style:"width: 150px;"},Object(a.h)("div",{class:"text-center border rounded-circle imageRounded imageRoundedSmall mx-auto",style:r?'background-image: url("'+r.s3SmallLink+'");':""},!r&&Object(a.h)("div",{class:"text-muted font-weight-lighter",style:"font-size: 20px; padding-top: 5px;"},d.a.displayNameShort(o))),Object(a.h)("small",null,Object(a.h)("div",{class:"text-overflow text-center"},Object(a.h)("strong",null,d.a.displayName(o)),Object(a.h)("br",null)),Object(a.h)("div",{class:"text-overflow text-center"},Object(a.h)(c.c,{id:"teams.connect.wants-to-follow"},"wants to follow your team:")),Object(a.h)("div",{class:"text-overflow text-center"},Object(a.h)("strong",null,d.a.displayName(s)))),u||i?Object(a.h)(t,null,Object(a.h)("div",{class:"text-center"},u?Object(a.h)("div",{class:"text-success"},Object(a.h)(c.c,{id:"teams.connect.confirmed"},"Confirmed")," ",Object(a.h)("i",{class:"fas fa-check"})):Object(a.h)("div",{class:"text-danger"},Object(a.h)(c.c,{id:"teams.connect.deleted"},"Deleted")," ",Object(a.h)("i",{class:"fas fa-trash-alt"})))):Object(a.h)(t,null,Object(a.h)("div",null,Object(a.h)("button",{class:"btn btn-sm btn-block btn-success text-overflow mt-1",onClick:e.confirmRequest,"data-team":s.id,"data-user":o.id},Object(a.h)(c.c,{id:"teams.connect.confirm"},"Confirm")),h&&h.public>0&&Object(a.h)("button",{class:"btn btn-sm btn-block btn-outline-success text-overflow mt-1",onClick:e.confirmRequest,"data-team":s.id,"data-user":o.id,"data-follow":!0},Object(a.h)(c.c,{id:"teams.connect.confirm-and-follow"},"Confirm & follow back")),Object(a.h)("div",{class:"mt-3"},Object(a.h)("small",null,Object(a.h)("button",{class:"btn btn-sm btn-block btn-link text-overflow",style:"font-size: 1.0em;",onClick:e.deleteRequest,"data-team":s.id,"data-user":o.id},Object(a.h)(c.c,{id:"teams.connect.delete"},"Del")))))))})))})))),Object(a.h)("details",{class:"mt-3"},Object(a.h)("summary",null,Object(a.h)("small",null,Object(a.h)(c.c,{id:"teams.connect.how-summary"},"How does this work?"))),Object(a.h)("p",null,Object(a.h)(c.c,{id:"teams.connect.how-text"},"What can followers see when I grant them access to follow? The answer is very little. They can see main details of the workouts you share and name of the dogs. That's all. Try to follow a team and check out the workout tab.")))))):""},s}(a.Component))||r;e.a=h}).call(this,s("hosL").Fragment)},sqi2:function(t,e,s){"use strict";(function(t){function o(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,o)}return s}function n(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}var r,a=s("hosL"),i=s("Utv1"),l=s("/eY4"),c=s("cneo"),d=s("OhSV"),u=s("fh8t"),h=s.n(u),m=s("3wGD"),b=(s("ETxl"),s("ZOvn")),p={showAddComment:{},showAllComments:!1,showAllReplies:{},viewImageIdx:{}},f=Object(l.a)(r=function(e){function s(t){var s;return(s=e.call(this,t)||this).likeComment=function(t){return new Promise((function(e,o){var n,r,a,i,l;return r=void 0===(n=s.props.callback)?function(){}:n,a=t.target.parentElement.dataset.id||t.target.dataset.id,i=s.props.workout,Promise.resolve(s.props.stores.workoutStore.likeWorkoutComment({id:i.id,commentId:a})).then((function(t){try{return(l=t)&&200===l.status&&r({type:"likeComment",workout:i,commentId:a,response:l}),e(!0)}catch(t){return o(t)}}),o)}))},s.likeReply=function(t){return new Promise((function(e,o){var n,r,a,i,l,c;return r=void 0===(n=s.props.callback)?function(){}:n,a=t.target.parentElement.dataset.id||t.target.dataset.id,i=t.target.parentElement.dataset.comment||t.target.dataset.comment,l=s.props.workout,Promise.resolve(s.props.stores.workoutStore.likeWorkoutCommentReply({id:l.id,replyId:a,commentId:i})).then((function(t){try{return(c=t)&&200===c.status&&r({type:"likeReply",workout:l,commentId:i,replyId:a,response:c}),e()}catch(t){return o(t)}}),o)}))},s.replyComment=function(t){return new Promise((function(e){var o=t.target.parentElement.dataset.id||t.target.dataset.id,n=s.state.showAddComment;return n[o]=!n[o],s.setState({showAddComment:n},(function(){s.inputRef[o]&&s.inputRef[o].focus()})),e()}))},s.toggleComments=function(){s.setState({showAllComments:!s.state.showAllComments})},s.toggleReplies=function(t){var e=t.target.parentElement.dataset.id||t.target.dataset.id,o=s.state.showAllReplies;o[e]=!o[e],s.setState({showAllReplies:o})},s.viewImage=function(t){var e=t.target.closest("img").dataset,o=s.state.viewImageIdx;o[e.id]=e.idx,s.setState({viewImageIdx:o})},s.translate=function(t){return new Promise((function(e,o){function n(){return s.setState({showOriginal:b,translatedText:f}),e()}var r,a,i,l,c,d,u,h,m,b,p,f,O;return t.preventDefault(),t.stopPropagation(),r=t.target.closest("button").dataset,l=s.props.workout,d=(c=s.props.stores).teamStore,u=c.userStore.user,f=void 0===(p=(h=s.state).translatedText)?{}:p,(b=void 0===(m=h.showOriginal)?{}:m)[O=(i=r.commentid)+((a=r.replyid)?"-"+a:"")]=0,a?Promise.resolve(d.translateCommentReply({commentid:i,replyid:a,object:l,user:u})).then(function(t){try{return f[O]=t,n.call(this)}catch(t){return o(t)}}.bind(this),o):Promise.resolve(d.translateComment({commentid:i,object:l,user:u})).then(function(t){try{return f[O]=t,n.call(this)}catch(t){return o(t)}}.bind(this),o)}))},s.showOriginal=function(t){var e=t.target.closest("button").dataset,o=e.replyid,n=e.commentid;t.preventDefault(),t.stopPropagation();var r=s.state.showOriginal,a=void 0===r?{}:r;a[n+(o?"-"+o:"")]=1,s.setState({showOriginal:a})},s.state=function(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?o(Object(s),!0).forEach((function(e){n(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):o(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}({},p),s.inputRef={},s}var r,l;return l=e,(r=s).prototype=Object.create(l.prototype),r.prototype.constructor=r,r.__proto__=l,s.prototype.render=function(){var e,s=this,o=this.state,n=o.showAddComment,r=o.showAllComments,l=o.showAllReplies,u=o.viewImageIdx,p=o.showOriginal,f=void 0===p?{}:p,O=o.translatedText,g=void 0===O?{}:O,j=this.props,v=j.workout,y=j.callback,w=void 0===y?function(){}:y,k=j.compact,x=this.props.stores,S=x.userStore,C=x.teamStore,I=S.user,P=S.isAdmin,T=I.language,D=void 0===T?"en":T,R=[],_=0,L=0;return v.comments&&(_=v.comments.length,r?R=v.comments:(e=void 0!==k&&k?0:1,R=v.comments.slice(Math.max(_-e,0))),L=R.length),Object(a.h)("div",null,v&&R&&R.reverse().map((function(o){var r=o.user,p=void 0===r?{}:r,O=C.findPublicTeamByMembers(p.id),j=b.a.displayNameShort(p),y=b.a.displayName(p),k=p.image||(p.images?p.images[0]:void 0),x=o.likes&&o.likes.findIndex((function(t){return t.user===I.id}))>-1,S=[],T=0,R=0;o.comments&&(T=o.comments.length,R=(S=l[o.id]?o.comments:o.comments.slice(0,e)).length);var _=[];if(o.images){var L=Object(c.i)(o.images);_.push.apply(_,L)}var E=u[o.id]?u[o.id]:0,F=_&&_[E]?_[E]:null,A=o.currentLocationGeocode,N=void 0===A?{}:A,U=C.getCommentTranslations({object:v,commentid:o.id,targetLang:D})||g[o.id],M=U||o.comment;return f[o.id]&&(M=o.comment),Object(a.h)("div",{class:"row"},Object(a.h)("div",{class:"col-12 d-flex mb-2 position-relative"},Object(a.h)("div",{class:"text-center border rounded-circle imageRounded imageRoundedSmall",style:(k?'background-image: url("'+k.s3SmallLink+'"); background-size: cover;':"")+" border-width: 3px !important;"},!p.image&&Object(a.h)("span",{class:"font-weight-lighter",style:"font-size: 15px;"},j)),Object(a.h)("div",{class:"flex-grow-1 pl-3 pt-0",style:"line-height: 1.2em;"},Object(a.h)("div",{class:"bg-light p-2 rounded rounded-lg"},Object(a.h)("div",null,Object(a.h)("span",{style:"font-size: 0.95em;"},Object(a.h)("h5",{class:"font-weight-bold mb-0",style:"font-size: 1.0em;"},y),O&&O.length>0&&Object(a.h)("div",{class:"mb-2"},Object(a.h)("small",{class:"font-weight-lighter text-muted"},O.filter((function(t){return 1===t.public})).slice(0,2).map((function(e){return Object(a.h)(t,null,Object(a.h)("a",{href:"/teams/public/"+e.uuidv4,class:"mr-2"},Object(a.h)("i",{class:"fas fa-users text-muted"})," ",e.name))})))),Object(a.h)(h.a,{markdown:b.a.replaceImages(M,o.images,D),markdownOpts:b.a.getMarkdownOptions()}))),Object(a.h)("div",{class:"container-fluid px-3 mt-1"},F&&Object(a.h)("div",{class:"clearfix row"},Object(a.h)("div",{class:"col-12 px-0 overflow-hidden",style:"max-height: 30vh;"},Object(a.h)("img",{loading:"lazy",class:"img-fluid",style:"min-width: 100px;",src:F.s3LargeLink}))),_&&_.length>1&&Object(a.h)("div",{class:"clearfix d-flex flex-wrap row"},_.map((function(e,n){return Object(a.h)(t,null,Object(a.h)("div",{class:"col px-0 overflow-hidden",style:"max-height: 100px; min-width: 100px;"},Object(a.h)("img",{loading:"lazy",class:"img-fluid border",style:"min-width: 100px;",src:e.s3SmallLink,onClick:s.viewImage,"data-id":o.id,"data-idx":n})))}))))),Object(a.h)("small",null,Object(a.h)("button",{class:"btn btn-sm btn-link py-0 "+(x?"text-primary":""),onClick:s.likeComment,"data-id":o.id},Object(a.h)(d.c,{id:"comments.like"},"Lik")),"-",Object(a.h)("button",{class:"btn btn-sm btn-link py-0",onClick:s.replyComment,"data-id":o.id},Object(a.h)(d.c,{id:"comments.comment-add"},"Kommentar")),o.language!==D&&Object(a.h)(t,null,"-",!f[o.id]&&U?Object(a.h)(t,null,Object(a.h)("button",{type:"button",class:"btn btn-sm btn-link","data-commentid":o.id,onClick:s.showOriginal},Object(a.h)("i",{class:"fas fa-cog"}),"  ",Object(a.h)(d.c,{id:"home.translate-show-original"},"Show original"))):Object(a.h)(t,null,Object(a.h)("button",{type:"button",class:"btn btn-sm btn-link",onClick:s.translate,"data-commentid":o.id},Object(a.h)("i",{class:"fas fa-cog"})," ",Object(a.h)(d.c,{id:"home.translate-to"},"See translation")))),"-",Object(a.h)("button",{class:"btn btn-sm btn-link py-0 disabled"},i.a.formatDistance(o.createdDate,new Date,{locale:"no-NB"}),o.updatedDate&&Object(a.h)(t,null,Object(a.h)("span",{class:"font-weight-light ml-2"},"(Edited ",i.a.formatDistance(o.updatedDate,new Date,{locale:"no-NB"}),")"))),P&&N&&N.formatted_address&&Object(a.h)(t,null,Object(a.h)("span",{class:"ml-2 text-muted"},Object(a.h)("i",{class:"fas fa-map-marker-alt"})," ",N.formatted_address)))),o.likes&&o.likes.length>0&&Object(a.h)("small",{class:"position-absolute bg-light shadow-sm rounded-lg py-0 px-1",style:"bottom: 20px; right: 15px;"},Object(a.h)("i",{class:"fas fa-thumbs-up text-primary"})," ",o.likes.length)),Object(a.h)("div",{class:"col-11 offset-1 mb-2"},o&&S&&S.map((function(e){var n=e.user,r=void 0===n?{}:n,l=C.findPublicTeamByMembers(r.id),c=r.firstname?""+i.a.ucfirst(r.firstname,!0)+i.a.ucfirst(r.lastname,!0):""+i.a.ucfirst(r.email||"",!0),u=r.firstname?r.firstname+" "+r.lastname:""+r.email,m=r.image||(r.images?r.images[0]:void 0),p=e.likes&&e.likes.findIndex((function(t){return t.user===I.id}))>-1,O=C.getCommentReplyTranslations({object:v,commentid:o.id,replyid:e.id,targetLang:D})||g[o.id+"-"+e.id],j=O||e.comment;return f[o.id+"-"+e.id]&&(j=e.comment),Object(a.h)("div",{class:"row"},Object(a.h)("div",{class:"col-12 d-flex mb-2 position-relative"},Object(a.h)("div",{class:"text-center border rounded-circle imageRounded imageRoundedThumb",style:(m?'background-image: url("'+m.s3SmallLink+'"); background-size: cover;':"")+" border-width: 3px !important;"},!r.image&&Object(a.h)("span",{class:"font-weight-lighter",style:"font-size: 15px;"},c)),Object(a.h)("div",{class:"flex-grow-1 pl-3 pt-0",style:"line-height: 1.2em;"},Object(a.h)("div",{class:"bg-light p-2 rounded-lg"},Object(a.h)("span",{style:"font-size: 0.95em;"},Object(a.h)("h5",{class:"font-weight-bold mb-0",style:"font-size: 1.0em;"},u),l&&l.length>0&&Object(a.h)("div",{class:"mb-2"},Object(a.h)("small",{class:"font-weight-lighter text-muted"},l.filter((function(t){return 1===t.public})).slice(0,2).map((function(e){return Object(a.h)(t,null,Object(a.h)("a",{href:"/teams/public/"+e.uuidv4,class:"mr-2"},Object(a.h)("i",{class:"fas fa-users text-muted"})," ",e.name))})))),Object(a.h)(h.a,{markdown:b.a.replaceImages(j,e.images,D),markdownOpts:b.a.getMarkdownOptions()}))),Object(a.h)("small",null,Object(a.h)("button",{class:"btn btn-sm btn-link py-0 "+(p?"text-primary":""),onClick:s.likeReply,"data-comment":o.id,"data-id":e.id},Object(a.h)(d.c,{id:"comments.like"},"Lik")),"-",Object(a.h)("button",{class:"btn btn-sm btn-link py-0",onClick:s.replyComment,"data-id":o.id},Object(a.h)(d.c,{id:"comments.comment-add"},"Kommentar")),e.language!==D&&Object(a.h)(t,null,"-",!f[o.id+"-"+e.id]&&O?Object(a.h)(t,null,Object(a.h)("button",{type:"button",class:"btn btn-sm btn-link","data-commentid":o.id,"data-replyid":e.id,onClick:s.showOriginal},Object(a.h)("i",{class:"fas fa-cog"}),"  ",Object(a.h)(d.c,{id:"home.translate-show-original"},"Show original"))):Object(a.h)(t,null,Object(a.h)("button",{type:"button",class:"btn btn-sm btn-link",onClick:s.translate,"data-commentid":o.id,"data-replyid":e.id},Object(a.h)("i",{class:"fas fa-cog"})," ",Object(a.h)(d.c,{id:"home.translate-to"},"See translation")))),"-",Object(a.h)("button",{class:"btn btn-sm btn-link py-0 disabled"},i.a.formatDistance(e.createdDate,new Date,{locale:"no-NB"})))),e.likes&&Object(a.h)("small",{class:"position-absolute bg-light shadow-sm rounded-lg py-0 px-1",style:"bottom: 20px; right: 15px;"},Object(a.h)("i",{class:"fas fa-thumbs-up text-primary"})," ",e.likes.length)))})),T-R>0&&Object(a.h)("div",null,Object(a.h)("button",{class:"btn btn-sm btn-link py-0",onClick:s.toggleReplies,"data-id":o.id},Object(a.h)(d.c,{id:"comments.show-more",fields:{more:T-R}},"Vis ",T-R," flere kommentarer...")))),n[o.id]&&Object(a.h)("div",{class:"col-11 offset-1 d-flex mb-2 position-relative"},Object(a.h)(m.a,{stores:s.props.stores,workout:v,callback:w,commentId:o.id,inputRef:function(t){return s.inputRef[o.id]=t},inputRefObject:s.inputRef})))})),_-L>0&&Object(a.h)("div",null,Object(a.h)("button",{class:"btn btn-sm btn-link py-0",onClick:this.toggleComments},Object(a.h)(d.c,{id:"comments.show-more",fields:{more:_-L}},"Vis ",_-L," flere kommentarer..."))),r&&Object(a.h)("div",null,Object(a.h)("button",{class:"btn btn-sm btn-link py-0",onClick:this.toggleComments},Object(a.h)(d.c,{id:"comments.hide-all-comments"},"Skjul alle kommentarene."))))},s}(a.Component))||r;e.a=f}).call(this,s("hosL").Fragment)},u2zT:function(t,e,s){"use strict";var o,n=s("hosL"),r=s("/eY4"),a=s("Utv1"),i=s("OhSV"),l=Object(r.a)(o=function(t){function e(e){var s;return(s=t.call(this,e)||this).dropRef=Object(n.createRef)(),s.handleDrag=function(t){t.preventDefault(),t.stopPropagation()},s.handleDragIn=function(t){t.preventDefault(),t.stopPropagation(),s.dragCounter++,t.dataTransfer.items&&t.dataTransfer.items.length>0&&s.setState({drag:!0})},s.handleDragOut=function(t){t.preventDefault(),t.stopPropagation(),s.dragCounter--,0===s.dragCounter&&s.setState({drag:!1})},s.handleDrop=function(t){if(t.preventDefault(),t.stopPropagation(),s.setState({drag:!1}),t.dataTransfer.files&&t.dataTransfer.files.length>0){for(var e=0,o=t.dataTransfer.files.length;e<o;e+=1){s.readLocalFile(t.dataTransfer.files[e])}s.dragCounter=0}},s.handleAddFiles=function(t){t.preventDefault();var e=t.target;for(var o=0,n=e.files.length;o<n;o+=1){s.readLocalFile(e.files[o])}},s.handleEvent=function(){0},s.handleUpload=function(t){var e=s.props,o=e.uploadStatus,n=e.before,r=void 0===n?function(){}:n,i=e.after,l=void 0===i?function(){}:i;(void 0===o?function(){}:o)(!1),a.a.isFunction(r)&&r();var c=new FormData;c.append("files[]",t);var d={progress:1};d.xhr=new XMLHttpRequest,d.xhr.upload.addEventListener("progress",(function(e){s.updateProgress(e,t)})),d.xhr.addEventListener("loadstart",(function(e){s.handleEvent(e,t)})),d.xhr.addEventListener("load",(function(e){s.handleEvent(e,t)})),d.xhr.addEventListener("loadend",(function(e){var o=t;a.a.isFunction(l)&&l(),s.handleEvent(e,o)})),d.xhr.addEventListener("progress",(function(e){s.handleEvent(e,t)})),d.xhr.addEventListener("error",(function(e){s.handleEvent(e,t)})),d.xhr.addEventListener("abort",(function(e){s.handleEvent(e,t)})),d.xhr.addEventListener("readystatechange",(function(e){s.uploadDone(e,t)})),d.xhr.open("POST",""+a.a.getApiServer()+s.props.apiUrl),d.xhr.setRequestHeader("Authorization","Bearer "+a.a.getJwtToken()),d.xhr.send(c);var u=t.name,h=s.state.uploadedFilesData;h[u]||(h[u]={}),h[u].uploadMeta=d,h[u].imageNum=s.state.imageNum,s.setState({uploadedFilesData:h})},s.readLocalFile=function(t){return new Promise((function(e,o){var n=new FileReader;n.addEventListener("error",(function(t){o(t)})),n.addEventListener("load",(function(o){var n=t,r=n.name,a=s.state.uploadedFilesData;a[r]||(a[r]={}),a[r].event=o,s.setState({uploadedFilesData:a}),s.handleUpload(n),e(o)})),n.readAsDataURL(t)}))},s.updateProgress=function(t,e){if(t.lengthComputable){var o=e.name,n=s.state.uploadedFilesData,r=t.loaded/t.total*100;0,n[o].uploadMeta.progress=r,s.setState({uploadedFilesData:n})}},s.uploadDone=function(t,e){var o=e.name,n=s.state.uploadedFilesData,r=n[o].uploadMeta;if(r&&4===r.xhr.readyState&&201===r.xhr.status)for(var a=JSON.parse(r.xhr.responseText).data.files,i=0;i<a.length;i+=1){s.addFileToUpload(a[i]),s.fileInput.value=""}},s.state={drag:!1,loadingProgress:0,uploadedFiles:[],uploadedFilesData:{}},s}var s,o;o=t,(s=e).prototype=Object.create(o.prototype),s.prototype.constructor=s,s.__proto__=o;var r=e.prototype;return r.addFileToUpload=function(t){var e=this.state.uploadedFilesData,s=this.props,o=s.handleAddImage,n=s.uploadStatus,r=void 0===n?function(){}:n;delete e[t.name],this.setState({uploadedFilesData:e}),o(t),r(!0)},r.componentDidMount=function(){var t=this,e=this.dropRef.current;e.addEventListener("dragenter",this.handleDragIn),e.addEventListener("dragleave",this.handleDragOut),e.addEventListener("dragover",this.handleDrag),e.addEventListener("drop",this.handleDrop),this.props.autoOpen&&setTimeout((function(){t.fileInput.click()}),10)},r.componentWillUnmount=function(){var t=this.dropRef.current;t.removeEventListener("dragenter",this.handleDragIn),t.removeEventListener("dragleave",this.handleDragOut),t.removeEventListener("dragover",this.handleDrag),t.removeEventListener("drop",this.handleDrop)},r.render=function(){var t=this,e=this.state.uploadedFilesData;return Object(n.h)("div",{style:{position:"relative"},ref:this.dropRef},this.state.drag&&Object(n.h)("div",{style:{border:"dashed grey 4px",backgroundColor:"rgba(255,255,255,.8)",position:"absolute",top:0,bottom:0,left:0,right:0,zIndex:9999}},Object(n.h)("div",{style:{position:"absolute",top:"50%",right:0,left:0,textAlign:"center",color:"grey",fontSize:36}},Object(n.h)("div",null,Object(n.h)(i.c,{id:"imageupload.drag-files-here"},"drop your files here :)")))),Object(n.h)("div",null,Object(n.h)("input",{class:"btn btn-info col-sm-12",multiple:!0,type:"file",id:"image-file",onchange:this.handleAddFiles,ref:function(e){t.fileInput=e}})),Object(n.h)("div",null,Object.keys(e).length>0?Object(n.h)("h3",null,Object(n.h)(i.c,{id:"imageupload.upload-images"},"Uploaded images")):"",Object(n.h)("ul",{class:"list-group"},Object.keys(e).map((function(t){var s=e[t].uploadMeta,o=void 0===s?{}:s,r=t.match(/(jpg|jpeg|png|gif|heic|heif|svg|webp|tif)/i);return Object(n.h)("li",{class:"list-group-item list-group-item-action flex-column align-items-start"},Object(n.h)("div",{class:"d-flex w-100 justify-content-between"},r&&Object(n.h)("img",{class:"img-fluid mr-3",src:e[t].event.target.result,style:"max-height: 50px;"}),Object(n.h)("small",null,e[t].event.uploadDone),Object(n.h)(i.c,{id:"imageupload.uploading-image"},"Laster opp bilde..."),Object(n.h)("small",null,a.a.formatBytes(e[t].event.total,2))),Object(n.h)("div",{class:"progress mt-1",style:"height: 4px;"},Object(n.h)("div",{class:"progress-bar progress-bar-striped progress-bar-animated bg-success",role:"progressbar",style:"width: "+o.progress+"%; height: 4px;","aria-valuenow":o.progress,"aria-valuemin":"0","aria-valuemax":"100"})))})))),this.props.children)},e}(n.Component))||o;e.a=l},"vY+r":function(t,e,s){"use strict";(function(t){function o(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,o)}return s}function n(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}var r,a=s("hosL"),i=s("Utv1"),l=s("/eY4"),c=s("OhSV"),d=s("ZOvn"),u={},h=Object(l.a)(r=function(e){function s(t){var s;return(s=e.call(this,t)||this).toggleViews=function(){var t=s.props;(t.isTeamAdmin||t.isAdmin)&&s.setState({showViewList:!s.state.showViewList})},s.state=function(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?o(Object(s),!0).forEach((function(e){n(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):o(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}({},u),s}var r,l;return l=e,(r=s).prototype=Object.create(l.prototype),r.prototype.constructor=r,r.__proto__=l,s.prototype.render=function(){var e=this.state.showViewList,s=this.props.stores,o=s.storyStore,n=s.teamStore,r=s.workoutStore,l=this.props,u=l.views,h=l.type,m=void 0===h?"story":h,b=l.onTeamClick,p=void 0===b?function(){}:b,f=[];Object.entries(l.object.statistics).forEach((function(t){Object.entries(t[1]).forEach((function(t){var e=t[1];e.viewUsers&&f.push(e.viewUsers)}))}));var O=f.flat().slice(0,50);return Object(a.h)(t,null,Object(a.h)("div",{class:"d-flex justify-content-end mb-2"},Object(a.h)("span",{class:"ml-2 text-muted font-weight-lighter",onClick:this.toggleViews},u," ",Object(a.h)(c.c,{id:"story.views"},"views"))),e&&Object(a.h)("div",{class:"mt-3 mb-3"},O&&O.map((function(e){var s,l,c;if("story"===m?(s=o.findPublicUser(e),l=o.findPublicTeamByMembers(e)):"team"===m?(s=n.findPublicUser(e),l=n.findPublicTeamByMembers(e)):"workout"===m&&(s=r.findPublicUser(e),l=r.findPublicTeamByMembers(e)),!s)return"";i.a.isArray(l)&&(c=l.find((function(t){return 1===t.public})));var u=d.a.getImage({user:s,team:c,priority:"user"}),h=d.a.displayNameShort(s),b=d.a.displayName(s,!0);return Object(a.h)("div",{class:"d-flex flex-row position-relative font-weight-light mb-1"},c?Object(a.h)(t,null,Object(a.h)("a",{href:"/teams/public/"+c.uuidv4,title:c.name,onClick:function(t){return p(t,c.uuidv4)},class:"stretched-link"},Object(a.h)("div",{class:"text-center border rounded-circle imageRounded imageRoundedThumb",style:u?'background-image: url("'+u+'"); background-size: cover;':""},!u&&Object(a.h)("div",{class:"",style:"font-size: 12px; padding-top: 3px;"},h))),Object(a.h)("div",{class:"ml-2 "},b," ",Object(a.h)("span",{class:"font-weight-lighter"},"- ",c.name))):Object(a.h)(t,null,Object(a.h)("div",{class:"text-center border rounded-circle imageRounded imageRoundedThumb",style:(u?'background-image: url("'+u+'"); background-size: cover;':"")+" opacity: 0.5;"},!u&&Object(a.h)("div",{class:"text-muted",style:"font-size: 12px; padding-top: 3px;"},h)),Object(a.h)("div",{class:"ml-2"},b)))})),u>O.length&&Object(a.h)(t,null,Object(a.h)("small",{class:"text-muted"},Object(a.h)(c.c,{id:"story.limited-to"},"Limited to max 50 users.")))))},s}(a.Component))||r;e.a=h}).call(this,s("hosL").Fragment)},w93r:function(t,e,s){"use strict";(function(t){var o,n=s("hosL"),r=s("/eY4"),a=s("Utv1"),i=s("OhSV"),l=(s("X9Km"),s("QkTp")),c=s("ZOvn"),d=Object(r.a)(o=function(e){function s(t){var s;return(s=e.call(this,t)||this).toggleyrWeather=function(){s.setState({showWeather:!s.state.showWeather})},s.state={},s.inputRef={},s}var o,r;r=e,(o=s).prototype=Object.create(r.prototype),o.prototype.constructor=o,o.__proto__=r;var d=s.prototype;return d.loadWeather=function(){return new Promise(function(t){var e=this.props.stores.userStore;this.setState({isLoading:!0});var s=e.user;if(s.currentLocationInfo&&s.currentLocationInfo.coords){var o=s.currentLocationInfo.coords;e.getWeatherUser({lat:o.latitude,lon:o.longitude,altitude:o.altitude}),e.formatWeather()}return t()}.bind(this))},d.componentDidMount=function(){this.loadWeather()},d.render=function(){var e=this,s=this.props.stores.userStore,o=s.yrWeather,r=s.yrWeatherKeys,d=s.yrWeatherFormatted,u=s.user.currentLocationGeocode;return o&&this.props.place?this.state.showWeather?Object(n.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 px-0 mb-4"},u&&u.formatted_address&&Object(n.h)("h5",null,u.formatted_address),Object(n.h)("div",{class:"table-responsive",onTouchstart:c.a.captureEvents,onTouchend:c.a.captureEvents,onTouchmove:c.a.captureEvents,onScroll:c.a.captureEvents},Object(n.h)("table",{class:"table table-striped table-sm"},Object(n.h)("thead",null,Object(n.h)("tr",null,Object(n.h)("th",{class:"text-center"},"Â "),Object(n.h)("th",{class:"text-center"},Object(n.h)(i.c,{id:"weather.night"},"Night")),Object(n.h)("th",{class:"text-center"},Object(n.h)(i.c,{id:"weather.morning"},"Morning")),Object(n.h)("th",{class:"text-center"},Object(n.h)(i.c,{id:"weather.afternoon"},"Afternoon")),Object(n.h)("th",{class:"text-center"},Object(n.h)(i.c,{id:"weather.evening"},"Evening")),Object(n.h)("th",{class:"text-center"},Object(n.h)(i.c,{id:"weather.temp"},"Temp")),Object(n.h)("th",{class:"text-center"},Object(n.h)(i.c,{id:"weather.rainfall"},"Rainfall")),Object(n.h)("th",{class:"text-center"},Object(n.h)(i.c,{id:"weather.wind"},"Wind")))),Object(n.h)("tbody",null,r&&r.map((function(s){return Object(n.h)(t,null,Object(n.h)("tr",null,Object(n.h)("td",{class:"text-center"},Object(n.h)("nobr",null,s)),Object(n.h)("td",{class:"text-center"},Object(n.h)("nobr",null,a.a.getNestedValue(d[s].night,"next_6_hours.summary.symbol_code")&&Object(n.h)("img",{style:"width: 40px;",src:"./assets/svg/"+a.a.getNestedValue(d[s].night,"next_6_hours.summary.symbol_code")+".svg"}))),Object(n.h)("td",{class:"text-center"},Object(n.h)("nobr",null,a.a.getNestedValue(d[s].morning,"next_6_hours.summary.symbol_code")&&Object(n.h)("img",{style:"width: 40px;",src:"./assets/svg/"+a.a.getNestedValue(d[s].morning,"next_6_hours.summary.symbol_code")+".svg"}))),Object(n.h)("td",{class:"text-center"},Object(n.h)("nobr",null,a.a.getNestedValue(d[s].day,"next_6_hours.summary.symbol_code")&&Object(n.h)("img",{style:"width: 40px;",src:"./assets/svg/"+a.a.getNestedValue(d[s].day,"next_6_hours.summary.symbol_code")+".svg"}))),Object(n.h)("td",{class:"text-center"},Object(n.h)("nobr",null,a.a.getNestedValue(d[s].evening,"next_6_hours.summary.symbol_code")&&Object(n.h)("img",{style:"width: 40px;",src:"./assets/svg/"+a.a.getNestedValue(d[s].evening,"next_6_hours.summary.symbol_code")+".svg"}))),Object(n.h)("td",{class:"text-center"},Object(n.h)("nobr",null,Object(n.h)("i",{class:"fas fa-temperature-low text-muted ml-1 mr-2"}),Object(n.h)("span",{class:c.a.getTemperatureColor(a.a.getNestedValue(d[s],"air_temperatures_min"))},Object(n.h)(l.a,{stores:e.props.stores,value:a.a.getNestedValue(d[s],"air_temperatures_min")})),Object(n.h)("span",{class:"text-muted font-weight-lighter mx-1"},"-"),Object(n.h)("span",{class:c.a.getTemperatureColor(a.a.getNestedValue(d[s],"air_temperatures_max"))},Object(n.h)(l.a,{stores:e.props.stores,value:a.a.getNestedValue(d[s],"air_temperatures_max")})))),Object(n.h)("td",{class:"text-center"},Object(n.h)("nobr",null,a.a.format(a.a.getNestedValue(d[s],"precipitation_amount"),1)," ",Object(n.h)("span",{class:"text-muted font-weight-lighter"},"mm"))),Object(n.h)("td",{class:"text-center"},Object(n.h)("nobr",null,Object(n.h)("i",{class:"fas fa-wind text-muted ml-1"})," ",Object(n.h)("span",{class:c.a.getWindSpeedColor(a.a.getNestedValue(d[s],"wind_speeds_min"))},a.a.format(a.a.getNestedValue(d[s],"wind_speeds_min"),1))," ",Object(n.h)("span",{class:"text-muted font-weight-lighter"},"-")," ",Object(n.h)("span",{class:c.a.getWindSpeedColor(a.a.getNestedValue(d[s],"wind_speeds_max"))},a.a.format(a.a.getNestedValue(d[s],"wind_speeds_max"),1))," ",Object(n.h)("span",{class:"text-muted font-weight-lighter"},"m/s")))))}))))),Object(n.h)("button",{type:"button",class:"btn btn-block btn-primary btn-sm",onClick:this.toggleyrWeather},Object(n.h)("i",{class:"fas fa-times-circle"})," ",Object(n.h)(i.c,{id:"weather.close"},"Close"))):Object(n.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 px-0"},o&&o.length>0&&Object(n.h)("div",{class:"container-fluid px-0"},Object(n.h)("div",{class:"row",onClick:this.toggleyrWeather},o&&o.length>0&&o.slice(0,1).map((function(t){return Object(n.h)("div",{class:"col-12 text-right"},Object(n.h)("nobr",null,Object(n.h)("small",{class:"font-weight-light text-muted"},a.a.isoTime(t.time)),":",Object(n.h)("img",{src:"./assets/svg/"+a.a.getNestedValue(t,"next_1_hours.summary.symbol_code")+".svg",class:"ml-2",style:"height: 20px;"}),a.a.getNestedValue(t,"next_1_hours.details.precipitation_amount")>0&&Object(n.h)("small",{class:"ml-2"},a.a.getNestedValue(t,"next_1_hours.details.precipitation_amount"),Object(n.h)("span",{class:"text-muted font-weight-lighter"},"mm")),Object(n.h)("small",{class:"ml-2"},Object(n.h)("i",{class:"fas fa-temperature-low text-muted"})," ",Object(n.h)(l.a,{stores:e.props.stores,value:a.a.getNestedValue(t,"instant.details.air_temperature")})),Object(n.h)("small",{class:"ml-2"},Object(n.h)("i",{class:"fas fa-wind text-muted"})," ",a.a.getNestedValue(t,"instant.details.wind_speed"),Object(n.h)("span",{class:"text-muted font-weight-lighter"},"m/s")," ",Object(n.h)("span",{class:"text-muted font-weight-lighter"},c.a.windDirection(a.a.getNestedValue(t,"instant.details.wind_from_direction"))))),Object(n.h)("br",null))}))))):""},s}(n.Component))||o;e.a=d}).call(this,s("hosL").Fragment)},yHBq:function(t,e,s){"use strict";(function(t){function o(){return(o=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var s=arguments[e];for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(t[o]=s[o])}return t}).apply(this,arguments)}function n(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}var r,a,i=s("hosL"),l=s("/eY4"),c=s("Utv1"),d=Object(l.a)(r=function(t){function e(e){var s;return(s=t.call(this,e)||this).state={},s.containerRef=null,s}n(e,t);var s=e.prototype;return s.componentWillUnmount=function(){var t=this.props.removeIntersectionObserver;t&&t(this.containerRef)},s.componentDidMount=function(){var t=this.props.addIntersectionObserver;t&&t(this.containerRef)},s.render=function(){var t=this,e=this.props,s=e.wrapperClassNames,n=void 0===s?"":s,r=e.contentClassNames,a=void 0===r?"":r,l=e.renderContent,c=e.obj,d=void 0===c?{}:c,u=e.idx,h=e.dataFields,m=e.dataValues,b=e.sessionid,p={};return b&&(p.sessionid=b),h.forEach((function(t){return p["data-"+t]=encodeURI(m[t]||d[t])})),Object(i.h)("div",o({class:""+n,ref:function(e){return t.containerRef=e},"data-idx":u},p),Object(i.h)("div",{class:""+a,style:"display: block;"},l({obj:d,idx:u})))},e}(i.Component))||r,u=Object(l.a)(a=function(e){function s(t){var s;return(s=e.call(this,t)||this).deleteIntersectionObserver=function(){s.intersectionObserver=null},s.handleIntersection=function(t){var e=s.props.handleIntersection;"function"==typeof e&&e(t),t.forEach((function(t){var e=t.isIntersecting,s=t.target.dataset.height,o=void 0===s?0:s,n=Math.max(t.target.childNodes[0].offsetHeight,t.target.offsetHeight,t.target.scrollHeight);e?(t.target.childNodes[0].style.display="block",t.target.style.minHeight=(n>o?n:o)+"px"):t.target.style.minHeight&&(t.target.style.minHeight=(n>o?n:o)+"px",t.target.childNodes[0].style.display="none")}))},s.setupIntersectionObserver=function(){if(!("IntersectionObserver"in window)||!("IntersectionObserverEntry"in window)||!("intersectionRatio"in window.IntersectionObserverEntry.prototype))return!1;s.intersectionObserver=new IntersectionObserver(s.handleIntersection,{root:null,rootMargin:"100px",threshold:.1})},s.addIntersectionObserver=function(t){s.intersectionObserver&&t&&s.intersectionObserver.observe(t)},s.removeIntersectionObserver=function(t){s.intersectionObserver&&t&&s.intersectionObserver.unobserve(t)},s.state={},s}n(s,e);var o=s.prototype;return o.componentWillMount=function(){this.setupIntersectionObserver()},o.componentWillUnmount=function(){this.deleteIntersectionObserver()},o.render=function(){var e=this,s=this.props,o=s.data,n=void 0===o?[]:o,r=s.wrapperClassNames,a=void 0===r?"row pb-4 bg-light":r,l=s.contentClassNames,u=void 0===l?"col-12 col-sm-8 col-lg-6 offset-sm-2 offset-lg-3 mb-0 position-relative rounded rounded-lg py-3 shadow-sm":l,h=s.renderContent,m=void 0===h?function(){return Object(i.h)(t,null,"Missing render function!")}:h,b=s.dataFields,p=void 0===b?[]:b,f=s.dataValues,O=void 0===f?{}:f;return Object(i.h)("div",{class:"w-100"},n&&n.filter((function(t){return c.a.isObject(t)})).map((function(s,o){var n=s.hasOwnProperty("wrapperClassNames")?s.wrapperClassNames:a,r=s.hasOwnProperty("contentClassNames")?s.contentClassNames:u;return Object(i.h)(t,null,Object(i.h)(d,{key:"fastline-"+o+"-"+s.id,obj:s,idx:o,addIntersectionObserver:e.addIntersectionObserver,removeIntersectionObserver:e.removeIntersectionObserver,wrapperClassNames:n,contentClassNames:r,renderContent:m,dataFields:p,dataValues:O}))})))},s}(i.Component))||a;e.a=u}).call(this,s("hosL").Fragment)}}]);
//# sourceMappingURL=route-stories.chunk.d6552.js.map