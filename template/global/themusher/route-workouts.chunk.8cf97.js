(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{B7Gj:function(t,e,o){"use strict";o.r(e),function(t){function r(t,e){var o=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),o.push.apply(o,r)}return o}function n(t,e,o){return e in t?Object.defineProperty(t,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[e]=o,t}var a,s=o("hosL"),c=o("Utv1"),i=o("/eY4"),l=o("OhSV"),u=o("ZOvn"),h=o.n(u),b=o("JWe/"),d=(o("3pQw"),o("WAWY")),p=o("azdc"),m=o("3UPq"),f=o("pJjI"),O=o("wanP"),j=o("K9Qx"),g=o("bUJL"),y=o("4imK"),k=h.a.marginTop(!0),w=h.a.marginBottom(),v=h.a.subMenuMarginTop(),x={isLoading:!1,submenu:"totals"},S=Object(i.a)(a=function(e){function o(t){var o;return(o=e.call(this,t)||this).loadWorkouts=function(t){return new Promise((function(e,r){var n,a,s,i,l,u,h,b,d;return void 0===t&&(t=o.props),o.setState({isLoading:!0}),s=(n=t.stores).userStore,i=(a=n.workoutStore).currentTeam,l=(new Date).getMonth()+1,u=c.a.getYear(),b=(h=t).month,d=h.year,Promise.resolve(Promise.all([a.load({query:{team:i,year:void 0===d?u:d,month:void 0===b?l:b}}),o.loadWorkoutSummary(t),o.loadWorkoutPlans(t),s.getNotifications(),o.loadStravaActivities(),o.loadGarminActivities()])).then((function(){try{return o.setState({isLoading:!1}),e()}catch(t){return r(t)}}),r)}))},o.loadWorkoutPlans=function(t){return new Promise((function(e,r){function n(){return o.setState({isLoading:!1}),e()}var a,s,i,l,u,h,b,d;return void 0===t&&(t=o.props),o.setState({isLoading:!0}),a=t.year,s=(new Date).getMonth()+1,i=c.a.getYear(),l=parseInt(a||(s<6?i-1:i),10),b=(u=t.stores).workoutStore.currentTeam,(h=u.workoutPlanStore).updateItem("workoutPlans",[]),h.updateItem("workoutPlan",{}),h.resetGraphPlanWeekDistanceCurrent(),b?Promise.resolve(h.load({query:{team:b,seasonYear:l,seasonMonth:6}})).then(function(){try{if((d=h.workoutPlans[0]||{}).id)return Promise.resolve(h.load(d.id)).then(function(){try{return h.prepareWeekGraphs({year:a}),t.call(this)}catch(t){return r(t)}}.bind(this),r);function t(){return n.call(this)}return t.call(this)}catch(t){return r(t)}}.bind(this),r):n.call(this)}))},o.chooseSubmenu=function(t){o.setState({submenu:t.target.parentElement.dataset.menu||t.target.dataset.menu})},o.state=function(t){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?r(Object(o),!0).forEach((function(e){n(t,e,o[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):r(Object(o)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(o,e))}))}return t}({},x),o}var a,i;i=e,(a=o).prototype=Object.create(i.prototype),a.prototype.constructor=a,a.__proto__=i;var u=o.prototype;return u.loadStravaActivities=function(){return new Promise(function(t){return this.props.stores.stravaActivityStore.load({query:{hideImported:1}}),t()}.bind(this))},u.loadGarminActivities=function(){return new Promise(function(t){return this.props.stores.garminActivityDetailsStore.load({query:{hideImported:1}}),t()}.bind(this))},u.loadWorkoutSummary=function(t){return new Promise(function(e,o){var r,n,a,s,i,l,u,h,b;return void 0===t&&(t=this.props),n=(r=t.stores).userStore,a=r.workoutStore,s=(new Date).getMonth()+1,i=c.a.getYear(),void 0===(u=(l=t).month)?s:u,h=l.year,b=a.currentTeam,Promise.resolve(n.getWorkoutSummary({team:b,year:void 0===h?i:h})).then((function(){try{return Promise.resolve(n.getWorkoutSummaryDay({daysBack:500,team:b})).then((function(){try{return e()}catch(t){return o(t)}}),o)}catch(t){return o(t)}}),o)}.bind(this))},u.componentDidMount=function(){this.loadWorkouts()},u.componentWillReceiveProps=function(t){t.month===this.props.month&&t.year===this.props.year&&t.team===this.props.team||this.loadWorkouts(t)},u.render=function(){var e,o=this,r=this.state,n=r.isLoading,a=r.submenu,i=this.props.stores,u=i.userStore,x=i.appState,S=i.workoutStore,P=i.workoutPlanStore,_=i.stravaActivityStore,W=i.garminActivityDetailsStore,M=P.workoutPlan,D=P.workoutPlans,I=u.user,L=I.language,T=h.a.getMonths(void 0===L?"no":L),A=(new Date).getMonth()+1,C=c.a.getYear(),Y=this.props,G=Y.month,R=void 0===G?A:G,B=Y.year,U=void 0===B?C:B,z=S.currentTeam,K=x.darkmode,V=S.workouts,q=P.sumWorkoutPlanMonth(parseInt(U,10),parseInt(R,10))||0,E=u.findWorkoutSummaryMonth(parseInt(U,10),parseInt(R,10))||0;q&&(e=Math.floor(E/q*100));var J=u.findWorkoutSummaryMonth(parseInt(U,10),parseInt(R,10),"count",!0)||0,F=u.findWorkoutSummaryMonth(parseInt(U,10),parseInt(R,10),"distanceKm",!0)||0,H=u.findWorkoutSummaryMonth(parseInt(U,10),parseInt(R,10),"duration",!0)||0,Q=u.findWorkoutSummaryMonth(parseInt(U,10),parseInt(R,10),"speedAvg",!0)||0,Z=parseInt(U||(A<6?C-1:C),10),N=_.stravaActivities,X=W.garminActivityDetails;return Object(s.h)("div",{class:"container-fluid",style:"margin-bottom: "+w+"; margin-top: "+k+";"},Object(s.h)("div",{class:"row mb-4 fixed-top",style:"margin-top: "+v+"; background-color: "+(K?"#191d21":"#f8f9fa")+";"},Object(s.h)("div",{class:"col text-center border-bottom border-primary subtopmenu"},Object(s.h)("a",{href:"/workouts/",class:"text-primary stretched-link"},Object(s.h)("nobr",null,Object(s.h)("i",{class:"fas fa-chart-line"})," ",Object(s.h)(l.c,{id:"workout.index.dashboard"},"Oversikt")))),Object(s.h)("div",{class:"col text-center subtopmenu"},Object(s.h)("a",{href:"/workouts/list",class:"text-secondary stretched-link"},Object(s.h)("nobr",null,Object(s.h)("i",{class:"fas fa-list"})," ",Object(s.h)(l.c,{id:"workout.index.list"},"Liste")))),Object(s.h)("div",{class:"col text-center subtopmenu"},Object(s.h)("a",{href:"/workouts/plan",class:"text-secondary stretched-link"},Object(s.h)("nobr",null,Object(s.h)("i",{class:"fas fa-calendar-alt"})," ",Object(s.h)(l.c,{id:"workout.index.plan"},"Plan"))))),Object(s.h)("div",{class:"row"},Object(s.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 border-bottom"},Object(s.h)(f.a,{stores:this.props.stores,callback:this.loadWorkouts,key:"teams-"+z})),Object(s.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-2 mb-2"},Object(s.h)("a",{class:"btn btn-primary btn-sm float-right",href:"/workouts/edit/new"},Object(s.h)("i",{class:"fas fa-plus"})," ",Object(s.h)(l.c,{id:"workout.index.add-workout"},"Legg til treningstur"))),Object(s.h)(m.a,{stores:this.props.stores,isLoading:n,year:U,month:R,key:"calendar-header-"+M.id+"-"+D.length,hideTable:"calendar"===a?0:1,hideSummary:"calendar"===a?0:1,skipLoadSummary:"calendar"===a?0:1}),"totals"===a&&Object(s.h)(t,null,Object(s.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-2 mb-2"},Object(s.h)("div",{class:"row"},Object(s.h)("div",{class:"col-5 text-center"},q>=0&&Object(s.h)(O.a,{key:"gauge-"+e,radius:60,percent:e,prefix:"%",total:q+" km",completed:E+" km"}),Object(s.h)("br",null),Object(s.h)("small",{class:"text-muted"},Object(s.h)(l.c,{id:"workout.index.plan"},"Treningsplan"))),Object(s.h)("div",{class:"col-7 text-right"},Object(s.h)("h5",null,Object(s.h)("span",{class:"text-muted font-weight-lighter"},Object(s.h)(l.c,{id:"workout.calendar.totalWorkouts"},"Antall Ã¸kter")),": ",J),Object(s.h)("h5",null,Object(s.h)("span",{class:"text-muted font-weight-lighter"},Object(s.h)(l.c,{id:"workout.calendar.distance"},"Distanse")),": ",c.a.format(F,1)," km"),Object(s.h)("h5",null,Object(s.h)("span",{class:"text-muted font-weight-lighter"},Object(s.h)(l.c,{id:"workout.calendar.duration"},"Varighet")),": ",c.a.secToHms(H)),Object(s.h)("h5",null,Object(s.h)("nobr",null,Object(s.h)("span",{class:"text-muted font-weight-lighter"},Object(s.h)(l.c,{id:"workout.calendar.avg-speed"},"Gj.snittsfart")),": ",c.a.format(Q,1)," km/t")))))),"analysis"===a&&Object(s.h)(t,null,Object(s.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3"},Object(s.h)(d.a,{stores:this.props.stores,isLoading:n,year:U,key:"graph-"+M.id+"-"+D.length}))),"table"===a&&Object(s.h)(t,null,Object(s.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3"},Object(s.h)(p.a,{stores:this.props.stores,isLoading:n,year:U,key:"table-"+M.id+"-"+D.length}))),"workoutplan"===a&&Object(s.h)(t,null,Object(s.h)(j.a,{stores:this.props.stores,basehref:"/workouts/",month:R,year:U,key:(M.id||Z)+"-"+z+"-"+R+"-"+U,showNavigation:!1,showHeader:!1})),Object(s.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 my-3"},Object(s.h)("div",{class:"row"},Object(s.h)("div",{class:"col px-1 pt-2"},Object(s.h)("button",{class:"btn btn-block "+("totals"===a?"btn-primary":"btn-outline-primary")+" text-nowrap",style:"text-overflow: ellipsis; overflow: hidden;","data-menu":"totals",onClick:this.chooseSubmenu},Object(s.h)("i",{class:"fas fa-tachometer-alt"})," ",Object(s.h)(l.c,{id:"workouts.totals"},"Totaler"))),Object(s.h)("div",{class:"col px-1 pt-2"},Object(s.h)("button",{class:"btn btn-block "+("analysis"===a?"btn-primary":"btn-outline-primary")+" text-nowrap",style:"text-overflow: ellipsis; overflow: hidden;","data-menu":"analysis",onClick:this.chooseSubmenu},Object(s.h)("i",{class:"fas fa-chart-area"})," ",Object(s.h)(l.c,{id:"workouts.analysis"},"Analyser"))),Object(s.h)("div",{class:"col px-1 pt-2"},Object(s.h)("button",{class:"btn btn-block "+("table"===a?"btn-primary":"btn-outline-primary")+" text-nowrap",style:"text-overflow: ellipsis; overflow: hidden;","data-menu":"table",onClick:this.chooseSubmenu},Object(s.h)("i",{class:"fas fa-table"})," ",Object(s.h)(l.c,{id:"workouts.table"},"Tabell"))),Object(s.h)("div",{class:"col px-1 pt-2"},Object(s.h)("button",{class:"btn btn-block "+("workoutplan"===a?"btn-primary":"btn-outline-primary")+" text-nowrap",style:"text-overflow: ellipsis; overflow: hidden;","data-menu":"workoutplan",onClick:this.chooseSubmenu},Object(s.h)("i",{class:"fas fa-calendar-alt"})," ",Object(s.h)(l.c,{id:"workouts.workoutplan"},"Treningsplan"))),Object(s.h)("div",{class:"col px-1 pt-2"},Object(s.h)("button",{class:"btn btn-block "+("calendar"===a?"btn-primary":"btn-outline-primary")+" text-nowrap",style:"text-overflow: ellipsis; overflow: hidden;","data-menu":"calendar",onClick:this.chooseSubmenu},Object(s.h)("i",{class:"fas fa-calendar-alt"})," ",Object(s.h)(l.c,{id:"workouts.workoutplan"},"Kalender")))))),Object(s.h)("div",{class:"row"},I&&I.strava&&N&&N.length>0&&Object(s.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 border-top border-bottom pt-3 pb-3 my-2"},Object(s.h)("h5",null,Object(s.h)(l.c,{id:"workout.index.strava-workouts"},"Strava workouts / not imported")),N&&N.map((function(t){return Object(s.h)(g.a,{stores:o.props.stores,activity:t,key:"strava-"+z+"-"+t.id})}))),I&&I.garmin&&X&&X.length>0&&Object(s.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 border-top border-bottom pt-3 pb-3 my-2"},Object(s.h)("h5",null,Object(s.h)(l.c,{id:"workout.index.garmin-workouts"},"Garmin workouts / not imported")),X&&X.map((function(t){return Object(s.h)(y.a,{stores:o.props.stores,activity:t,key:"garmin-"+z+"-"+t.id})})))),Object(s.h)("div",{class:"row"},V&&V.length>0&&Object(s.h)("div",{class:"col-12 mb-4"},Object(s.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 px-0 mt-4"},Object(s.h)("h5",null,Object(s.h)(l.c,{id:"workout.index.last-workouts",fields:{total:V.length,month:T[R-1],year:U}},"Treningsturer ",T[R-1]," ",U," - ",V.length," stk"))),V&&V.map((function(t){return Object(s.h)(b.a,{stores:o.props.stores,workout:t})}))),!V||0===V.length&&Object(s.h)("div",{class:"col-12 mb-4 text-center pt-5 pb-5"},Object(s.h)("h1",{class:"text-muted"},Object(s.h)("i",{class:"fas fa-running"})),Object(s.h)("h5",{class:"text-muted font-weight-lighter"},Object(s.h)(l.c,{id:"workouts.no-workouts",fields:{month:T[R-1],year:U}},"Ingen treningsturer registrert...")))),!1)},o}(s.Component))||a;e.default=S}.call(this,o("hosL").Fragment)},azdc:function(t,e,o){"use strict";(function(t){var r,n=o("hosL"),a=o("Utv1"),s=o("/eY4"),c=o("OhSV"),i=o("ZOvn"),l=o.n(i),u=Object(c.d)((function(){return{week:Object(n.h)(c.c,{id:"workout.graph.week"}),distance:Object(n.h)(c.c,{id:"workout.graph.distance"}),ascend:Object(n.h)(c.c,{id:"workout.graph.ascend"}),plan:Object(n.h)(c.c,{id:"workout.graph.plan"})}}))(r=Object(s.a)(r=function(e){function o(){return e.apply(this,arguments)||this}var r,s;return s=e,(r=o).prototype=Object.create(s.prototype),r.prototype.constructor=r,r.__proto__=s,o.prototype.render=function(){for(var e=this.props.stores.userStore,o=this.props,r=o.year,s=e.user.language,i=l.a.getMonths(void 0===s?"no":s),u=(new Date).getMonth()+1,h=a.a.getYear(),b=parseInt(r||(u<6?h-1:h),10),d=a.a.monthRange(b+"-06-01",b+1+"-05-31"),p=a.a.monthRange(b-1+"-06-01",b+"-05-31"),m=a.a.weekRange(b+"-06-01",b+1+"-05-31").map((function(t){return t.week})),f=Math.floor(m.length/(m.length%6)),O=[],j=0,g=m.length;j<g;j+=f)O.push(m[j]);return Object(n.h)(t,null,Object(n.h)("h5",null,Object(n.h)(c.c,{id:"workout.graph.title"},"Treningsstatistikk")," ",b," - ",b+1),Object(n.h)("div",{class:"w-100 mt-3 mb-4"},Object(n.h)("small",{class:"mb-4"},Object(n.h)("small",null,Object(n.h)("table",{class:"table table-sm font-weigth-lighter border-bottom"},Object(n.h)("thead",null,Object(n.h)("tr",null,Object(n.h)("th",{style:"padding: .15rem;"},Object(n.h)(c.c,{id:"workout.graph.season"},"Sesong")),d.map((function(t){return Object(n.h)("th",{class:"text-right",style:"padding: .15rem;"},Object(n.h)("a",{href:"/workouts/month/"+t.month+"/"+t.year},i[t.month-1]))})))),Object(n.h)("tbody",null,Object(n.h)("tr",null,Object(n.h)("th",{scope:"row",style:"padding: .15rem;"},b-1," - ",b),p.map((function(o){return Object(n.h)(t,null,Object(n.h)("td",{class:"text-right",style:"padding: .15rem;"},Object(n.h)("nobr",null,e.findWorkoutSummaryMonth(o.year,o.month)),Object(n.h)("br",null),Object(n.h)("nobr",null,e.findWorkoutSummaryMonth(o.year,o.month,"elevation")),Object(n.h)("br",null)))})),Object(n.h)("td",{class:"text-muted",style:"padding: .15rem;"},Object(n.h)("nobr",null,Object(n.h)("i",{class:"fas fa-road"})," km"),Object(n.h)("br",null),Object(n.h)("nobr",null,Object(n.h)("i",{class:"fas fa-mountain"})," m"),Object(n.h)("br",null))),Object(n.h)("tr",null,Object(n.h)("th",{scope:"row",style:"padding: .15rem;"},b," - ",b+1),d.map((function(o){return Object(n.h)(t,null,Object(n.h)("td",{class:"text-right",style:"padding: .15rem;"},Object(n.h)("nobr",null,e.findWorkoutSummaryMonth(o.year,o.month)),Object(n.h)("br",null),Object(n.h)("nobr",null,e.findWorkoutSummaryMonth(o.year,o.month,"elevation")),Object(n.h)("br",null)))})),Object(n.h)("td",{class:"text-muted",style:"padding: .15rem;"},Object(n.h)("nobr",null,Object(n.h)("i",{class:"fas fa-road"})," km"),Object(n.h)("br",null),Object(n.h)("nobr",null,Object(n.h)("i",{class:"fas fa-mountain"})," m"),Object(n.h)("br",null)))))))))},o}(n.Component))||r)||r;e.a=u}).call(this,o("hosL").Fragment)},eK6s:function(t){t.exports={gaugeBackground:"gaugeBackground__1UGxt",gauge:"gauge__2ZDxd",success:"success__3UQxg",primary:"primary__3pPV6",secondary:"secondary__-Vrk_",info:"info__3t5zs",warning:"warning__1jHlR",danger:"danger__BLVC9",gaugeText:"gaugeText__1on-w"}},wanP:function(t,e,o){"use strict";(function(t){function r(t,e){var o=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),o.push.apply(o,r)}return o}function n(t,e,o){return e in t?Object.defineProperty(t,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[e]=o,t}var a,s=o("hosL"),c=(o("Utv1"),o("/eY4")),i=o("eK6s"),l=o.n(i),u={mouseData:{}},h=Object(c.a)(a=function(e){function o(t){var o;return(o=e.call(this,t)||this).state=function(t){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?r(Object(o),!0).forEach((function(e){n(t,e,o[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):r(Object(o)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(o,e))}))}return t}({},u),o.svgRef=null,o}var a,c;return c=e,(a=o).prototype=Object.create(c.prototype),a.prototype.constructor=a,a.__proto__=c,o.prototype.render=function(){var e=this,o=this.props,r=o.radius,n=void 0===r?50:r,a=o.percent,c=void 0===a?0:a,i=o.color,u=void 0===i?"success":i,h=o.total,b=void 0===h?"":h,d=o.completed,p=void 0===d?"":d,m=o.prefix,f=void 0===m?"":m,O=.3*n,j=n-O/2,g=.3*n,y=2*j*Math.PI,k=.75*y,w=k+" "+y,v="rotate(135, "+n+", "+n+")",x=k-Math.min(Math.max(c,0),100)/100*k,S=n/2.5,P=n/5;return Object(s.h)(t,null,Object(s.h)("svg",{xmlns:"http://www.w3.org/2000/svg",class:l.a.svg,width:2*n,height:2*n,preserveAspectRatio:"none",ref:function(t){return e.svgRef=t}},Object(s.h)("circle",{class:""+l.a.gaugeBackground,cx:n,cy:n,r:j,strokeWidth:O,strokeDasharray:w,strokeLinecap:"round",transform:v}),Object(s.h)("circle",{class:l.a[u]+" "+l.a.gauge,cx:n,cy:n,r:j,stroke:"url(#grad)",strokeDasharray:w,strokeDashoffset:x,strokeLinecap:"round",strokeWidth:g,style:{transition:"stroke-dashoffset 0.3s"},transform:v}),Object(s.h)("text",{class:l.a.gaugeText+" "+l.a[u],x:"50%",y:"50%","dominant-baseline":"middle","text-anchor":"middle","font-size":S},c," ",f),Object(s.h)("text",{class:l.a.gaugeText+" "+l.a[u],x:"50%",y:"65%","dominant-baseline":"middle","text-anchor":"middle","font-size":P},p),Object(s.h)("text",{class:l.a.gaugeText+" "+l.a.secondary,x:"50%",y:"90%","dominant-baseline":"middle","text-anchor":"middle","font-size":P},b)))},o}(s.Component))||a;e.a=h}).call(this,o("hosL").Fragment)}}]);
//# sourceMappingURL=route-workouts.chunk.8cf97.js.map