{"version":3,"sources":["webpack:///./components/team/index.js","webpack:///./routes/search/index.js"],"names":["Team","observer","Component","requestFollowTeam","e","preventDefault","stopPropagation","teamStore","userStore","this","props","stores","user","teamId","parseInt","target","parentElement","dataset","team","followRequest","setState","requestSent","getButton","text","state","skipHome","isYourTeam","members","indexOf","id","isFollowing","followers","isBlocked","blockedFollowers","hasRequestedFollow","followRequests","findIndex","class","type","onClick","unFollowTeam","disabled","data-team","public","render","showButton","publicUsers","showLocation","showMembers","currentMonth","Date","getMonth","currentYear","getFullYear","month","year","seasonStart","workoutSummary","findWorkoutSummary","language","teamAmbition","findTeamAmbition","ambition","ambitions","teamType","findTeamType","teamUser","find","teamUserDisplayName","mu","displayName","image","getImage","priority","url","style","href","name","place","country","dogs","length","distanceKm","value","elevation","duration","util","secToHms","speedAvg","initialState","submenu","hits","searchText","Search","constructor","super","loadAll","async","appState","storyStore","search","getSearch","publicTeams","localUpdateField","searchResultStories","searchResultDogs","searchResultWorkouts","searchResultTeams","searchResultTracks","allData","idx","map","a","Math","max","reduce","partialSum","route","chooseSubmenu","menu","componentDidMount","componentWillReceiveProps","nextProps","fields","placeholder","onInput","linkState","data-menu","dog","uuidv4","workout","feed","track","story","key"],"mappings":"8NAcMA,EADLC,Y,EAAD,cACmBC,YAAU,mCACzBC,kBAAqBC,IACjBA,EAAEC,iBACFD,EAAEE,kBACF,MAAM,UAAEC,EAAF,UAAaC,GAAcC,KAAKC,MAAMC,QACtC,KAAEC,GAASJ,EACXK,EAASC,SAASV,EAAEW,OAAOC,cAAcC,QAAQC,MAAQd,EAAEW,OAAOE,QAAQC,KAAM,IACtFX,EAAUY,cAAcN,EAAQD,GAChCH,KAAKW,SAAS,CAAEC,aAAa,KARR,KAWzBC,UAAY,CAACC,EAAO,MAChB,MAAM,YAAEF,GAAgBZ,KAAKe,OACvB,UAAEhB,GAAcC,KAAKC,MAAMC,QAC3B,KAAEC,GAASJ,GACX,KAAEU,EAAF,SAAQO,GAAahB,KAAKC,MAC1BgB,EAAaR,EAAKS,SAAWT,EAAKS,QAAQC,QAAQhB,EAAKiB,KAAO,EAC9DC,EAAcZ,EAAKa,WAAab,EAAKa,UAAUH,QAAQhB,EAAKiB,KAAO,EACnEG,EAAYd,EAAKe,kBAAoBf,EAAKe,iBAAiBL,QAAQhB,EAAKiB,KAAO,EAC/EK,EAAqBb,GAAeH,EAAKiB,gBAAkBjB,EAAKiB,eAAeC,UAAUhC,GAAKA,EAAEyB,KAAOjB,EAAKiB,KAAO,EAEzH,OAAIH,EACID,EACO,GAGP,iBAAGY,MAAM,gBAGbP,EAEI,sBACIQ,KAAK,SACLD,MAAQ,+CACRE,QAAS9B,KAAK+B,aACdC,SAAS,OACTC,YAAWxB,EAAKW,IAEhB,iBAAGQ,MAAM,qBACT,YAAC,IAAD,CAAMR,GAAG,8BAAT,UARJ,IAQyDN,GAI7DS,EACO,GAWPE,EAEI,sBACII,KAAK,SACLD,MAAQ,+CACRI,SAAS,QAET,iBAAGJ,MAAM,+BACT,YAAC,IAAD,CAAMR,GAAG,+BAAT,yBANJ,IAMyEN,GAI7EL,EAAKyB,OAED,sBACIL,KAAK,SACLD,MAAQ,6CACRE,QAAS9B,KAAKN,kBACduC,YAAWxB,EAAKW,IAEhB,iBAAGQ,MAAM,iCACT,YAAC,IAAD,CAAMR,GAAG,wBAAT,QAPJ,IAOiDN,QATzD,GAeJqB,SACI,MAAM,KAAE1B,EAAF,WAAQ2B,EAAR,YAAoBC,EAAc,GAAlC,aAAsCC,EAAtC,YAAoDC,GAAgBvC,KAAKC,OACzE,UAAEH,EAAF,UAAaC,GAAcC,KAAKC,MAAMC,OAEtCsC,GAAe,IAAIC,MAAOC,WAAa,EACvCC,GAAc,IAAIF,MAAOG,eAC/B,MAAEC,EAAQL,EAAV,KAAwBM,EAAOH,GAAgB3C,KAAKC,MACpD8C,EAAc1C,SAASwC,EAAQ,EAAIC,EAAO,EAAIA,EAAM,IAE9CE,EAAiBlD,EAAUmD,mBAAmBxC,EAAKW,GAAI2B,IAAgB,IACvE,KAAE5C,GAASJ,GACX,SAAEmD,EAAW,MAAS/C,EACtBgD,EAAepD,EAAUqD,iBAAiB,CAAEC,SAAU5C,EAAK6C,UAAWJ,aACtEK,EAAWxD,EAAUyD,aAAa,CAAE3B,KAAMpB,EAAKoB,KAAMqB,aAErDO,EAAWpB,EAAYqB,KAAK/D,GAAKA,EAAEyB,KAAOX,EAAKN,MAC/CwD,EAAsBC,IAAGC,YAAYJ,GACrCK,EAAQF,IAAGG,SAAS,CAAE5D,KAAMsD,EAAUhD,OAAMuD,SAAU,UAEtD,IAAEC,EAAO,UAASxD,EAAKW,IAASpB,KAAKC,MAE3C,OACI,mBAAK2B,MAAM,cACP,mBAAKA,MAAM,OACP,mBAAKA,MAAM,kFACP,mBAAKA,MAAM,wCAEP,mBAAKA,MAAQ,iDAAiDsC,MAAOJ,EAAS,0BAAyBA,+BAAqC,KACtIA,GAAS,iBAAGlC,MAAM,+BAA+BsC,MAAM,sBAE7D,mBAAKtC,MAAM,mBAAmBsC,MAAM,uBAChC,iBAAGtC,MAAM,iBAAiBuC,KAAMF,GAC5B,kBAAIrC,MAAM,OAAOsC,MAAM,uBAAuBzD,EAAK2D,OAEtD9B,GAAgB,wBACX7B,EAAK4D,OAAS5D,EAAK6D,UAAY,oBAAM1C,MAAM,QACzC,iBAAGA,MAAM,0BADoB,KACSnB,EAAK4D,MADd,IACsB5D,EAAK4D,MAAS,KAAI5D,EAAK6D,QAAY7D,EAAK6D,UAGlG/B,GAAe,uBACXkB,GAAY,oBAAM7B,MAAM,QACrB,iBAAGA,MAAM,gBADA,IACkB+B,IAWnC,uBACKJ,GAAY,oBAAM3B,MAAM,oCAAoC2B,GAC5DJ,GAAgB,oBAAMvB,MAAM,yCAAyCuB,IAE1E,qBAAOvB,MAAM,cACRnB,GAAQA,EAAK8D,MAAQ,oBAAM3C,MAAM,IAAG,iBAAGA,MAAM,eAAxB,IAAyCnB,EAAK8D,KAAKC,QACxE/D,GAAQA,EAAKS,SAAW,oBAAMU,MAAM,QAAO,iBAAGA,MAAM,gBAA5B,IAA8CnB,EAAKS,QAAQsD,QAEnFxB,GAAkBA,EAAeyB,WAAa,GAAK,oBAAM7C,MAAM,QAAO,iBAAGA,MAAM,gBAA5B,IAA6C,YAAC,IAAD,CAAU1B,OAAQF,KAAKC,MAAMC,OAAQwE,MAAO1B,EAAeyB,cAC3JzB,GAAkBA,EAAe2B,UAAY,GAAK,oBAAM/C,MAAM,QAAO,iBAAGA,MAAM,oBAA5B,IAAiD,YAAC,IAAD,CAAW1B,OAAQF,KAAKC,MAAMC,OAAQwE,MAAO1B,EAAe2B,aAC/J3B,GAAkBA,EAAe4B,SAAW,GAAK,oBAAMhD,MAAM,QAAO,iBAAGA,MAAM,iBAA5B,IAA+CiD,IAAKC,SAAS9B,EAAe4B,WAC7H5B,GAAkBA,EAAe+B,SAAW,GAAK,oBAAMnD,MAAM,QAAO,iBAAGA,MAAM,0BAA5B,IAAuD,YAAC,IAAD,CAAO1B,OAAQF,KAAKC,MAAMC,OAAQwE,MAAO1B,EAAe+B,eAI5K3C,GAAc,uBACVpC,KAAKa,oB,EASnBtB,O,6iBC5Jf,MAAMyF,EAAe,CACpBC,QAAS,OACTC,KAAM,EACNC,WAAY,I,IAIPC,EADL5F,Y,EAAD,cACqBC,YACjB4F,YAAYpF,GAAO,MACfqF,MAAMrF,GADS,YAOtBsF,QAAUC,eAAOvF,EAAQ,EAAKA,OAC7B,MAAM,SAAEwF,EAAF,WAAYC,EAAZ,UAAwB5F,GAAc,EAAKG,MAAMC,QACjD,OAAEyF,GAAW1F,QACVwF,EAASG,UAAUD,GAC5B,MAAM,YAAEE,EAAF,YAAexD,GAAgBoD,EACrCC,EAAWI,iBAAiB,cAAeD,GAC3CH,EAAWI,iBAAiB,cAAezD,GAC3CvC,EAAUgG,iBAAiB,cAAeD,GAC1C/F,EAAUgG,iBAAiB,cAAezD,GAE1C,MAAM,oBAAE0D,EAAF,iBAAuBC,EAAvB,qBAAyCC,EAAuB,GAAhE,kBAAoEC,EAApE,mBAAuFC,GAAuBV,EAC9GW,EAAU,CAACL,EAAqBC,EAAkBC,EAAsBC,EAAmBC,GAE3FE,EAAMD,EACVE,IAAIC,GAAKA,EAAE/B,QACXrD,QAAQqF,KAAKC,OAAOL,EAAQE,IAAIC,GAAKA,EAAE/B,UACnCU,EAAOkB,EAAQE,IAAIC,GAAKA,EAAE/B,QAAQkC,OAAO,CAACC,EAAYJ,IAAMI,EAAaJ,EAAG,GAClF,EAAK5F,SAAS,CACbwE,WAAYQ,EACZV,QAPa,CAAC,UAAW,OAAQ,WAAY,QAAS,SAAU,SAOjDoB,GACfnB,UA3BoB,KA+BtBS,OAAS,KACR,MAAM,WAAER,GAAenF,KAAKe,MAC5B6F,gBAAO,WAAUzB,IAjCI,KAoCtB0B,cAAiBlH,IAEhBK,KAAKW,SAAS,CAAEsE,QADAtF,EAAEW,OAAOC,cAAcC,QAAQsG,MAAQnH,EAAEW,OAAOE,QAAQsG,QAnClE9G,KAAKe,M,+VAAL,IACOiE,GAsCd+B,oBACC/G,KAAKuF,UAGNyB,0BAA0BC,GAEfA,EAAUtB,SAAW3F,KAAKC,MAAM0F,QAChC3F,KAAKuF,QAAQ0B,GAIxB9E,SACC,MAAM,SAAEsD,EAAF,UAAY1F,GAAcC,KAAKC,MAAMC,QACrC,OAAEyF,GAAW3F,KAAKC,OAGlB,oBAAE8F,EAAF,iBAAuBC,EAAvB,qBAAyCC,EAAuB,GAAhE,kBAAoEC,EAApE,mBAAuFC,EAAvF,YAA2G9D,GAA6BoD,GACxI,QAAER,EAAF,KAAWC,EAAX,WAAiBC,GAAenF,KAAKe,MAC3C,OACC,mBAAKa,MAAM,kBAAkBsC,MAAM,2CAClC,mBAAKtC,MAAM,OACV,mBAAKA,MAAM,uEACV,sBAAI,YAAC,IAAD,CAAMR,GAAG,gBAAT,WACJ,kBAAIQ,MAAM,QAAO,YAAC,IAAD,CAAMR,GAAG,oBAAoB8F,OAAQ,CAAEvB,SAAQT,SAASA,EAAxD,wBAAmFS,EAAnF,MAEjB,mBAAK/D,MAAM,sCACV,YAAC,IAAD,KACC,qBAAOA,MAAM,iCAAiCC,KAAK,SAASsF,YAAa,YAAC,IAAD,CAAM/F,GAAG,6BAAT,0BACxEsD,MAAOS,EACPiC,QAASC,YAAUrH,KAAM,iBAG3B,sBAAQ4B,MAAM,0BAA0BC,KAAK,SAC5CC,QAAS9B,KAAK2F,QACd,YAAC,IAAD,CAAMvE,GAAG,iBAAT,UAIH,mBAAKQ,MAAM,kEACV,mBAAKA,MAAM,OACV,mBAAKA,MAAM,yBACc,mBACIA,MAAM,wCACNsC,MAAM,kDAEjC,mBAAKtC,MAAM,iBACV,sBACCA,MAAQ,gDAA2D,SAAZqD,EAAqB,cAAgB,oCAC5Ff,MAAM,6CACNoD,YAAU,OACVxF,QAAS9B,KAAK6G,eACd,iBAAGjF,MAAM,eALV,IAK0B,YAAC,IAAD,CAAMR,GAAG,eAAT,QAL1B,KAK+D4E,EAAiBxB,QAAU,EAL1F,MAeD,mBAAK5C,MAAM,iBACV,sBACCA,MAAQ,8BAAyC,UAAZqD,EAAsB,cAAgB,oCAC3Ef,MAAM,6CACNoD,YAAU,QACVxF,QAAS9B,KAAK6G,eACd,iBAAGjF,MAAM,iBALV,IAK4B,YAAC,IAAD,CAAMR,GAAG,gBAAT,SAL5B,KAKmE8E,EAAkB1B,QAAU,EAL/F,MAOD,mBAAK5C,MAAM,iBACV,sBACCA,MAAQ,8BAAyC,WAAZqD,EAAuB,cAAgB,oCAC5Ef,MAAM,6CACNoD,YAAU,SACVxF,QAAS9B,KAAK6G,eACd,iBAAGjF,MAAM,0BALV,IAKqC,YAAC,IAAD,CAAMR,GAAG,iBAAT,UALrC,KAK8E+E,EAAmB3B,QAAU,EAL3G,MAOD,mBAAK5C,MAAM,iBACV,sBACCA,MAAQ,iDAA4D,YAAZqD,EAAwB,cAAgB,oCAChGf,MAAM,6CACNoD,YAAU,UACVxF,QAAS9B,KAAK6G,eACd,iBAAGjF,MAAM,oBALV,IAK+B,YAAC,IAAD,CAAMR,GAAG,kBAAT,WAL/B,KAK0E2E,EAAoBvB,QAAU,EALxG,UAYQ,SAAZS,GAAsB,mBACtB,mBAAKrD,MAAM,YACPoE,GAAgD,IAA5BA,EAAiBxB,SAAiB,mBACxD,mBAAK5C,MAAM,0BACV,mBAAKA,MAAM,aACV,iBAAGA,MAAM,gBAEV,kBAAIA,MAAM,uBACT,YAAC,IAAD,CAAMR,GAAG,wBAAT,qBAIF4E,GAAoBA,EAAiBM,IAAIiB,GACzC,YAAC,IAAD,CAAKrH,OAAQF,KAAKC,MAAMC,OAAQqH,IAAKA,EAAKtD,IAAM,gBAAesD,EAAIC,YAIzD,aAAZvC,GAA0B,mBAC1B,mBAAKrD,MAAM,yEACPqE,GAAwD,IAAhCA,EAAqBzB,SAAiB,mBAChE,mBAAK5C,MAAM,0BACV,mBAAKA,MAAM,aACV,iBAAGA,MAAM,oBAEV,kBAAIA,MAAM,uBACT,YAAC,IAAD,CAAMR,GAAG,4BAAT,yBAIF6E,GAAwBA,EAAqBK,IAAI,CAACmB,EAASpB,IAC3D,mBAAKzE,MAAM,YACV,mBAAKA,MAAM,eACV,YAAC,IAAD,CACC1B,OAAQF,KAAKC,MAAMC,OACnBwH,KAAMD,EACNpB,IAAKA,SAOE,UAAZpB,GAAuB,mBACvB,mBAAKrD,MAAM,YACPsE,GAAkD,IAA7BA,EAAkB1B,SAAiB,mBAC1D,mBAAK5C,MAAM,0BACV,mBAAKA,MAAM,aACV,iBAAGA,MAAM,kBAEV,kBAAIA,MAAM,uBACT,YAAC,IAAD,CAAMR,GAAG,yBAAT,sBAIF8E,GAAqBA,EAAkBI,IAAI7F,GAAQ,mBACnD,YAAC,IAAD,CACCP,OAAQF,KAAKC,MAAMC,OACnBO,KAAMA,EACNwD,IAAM,iBAAgBxD,EAAK+G,OAC3BpF,YAAY,EACZC,YAAaA,EACbE,YAAa,EACbD,aAAc,QAKL,WAAZ2C,GAAwB,mBACxB,mBAAKrD,MAAM,YACPuE,GAAoD,IAA9BA,EAAmB3B,SAAiB,mBAC5D,mBAAK5C,MAAM,0BACV,mBAAKA,MAAM,aACV,iBAAGA,MAAM,2BAEV,kBAAIA,MAAM,uBACT,YAAC,IAAD,CAAMR,GAAG,0BAAT,uBAIF+E,GAAsBA,EAAmBG,IAAIqB,GAC7C,YAAC,IAAD,CAAOzH,OAAQF,KAAKC,MAAMC,OAAQyH,MAAOA,OAI/B,YAAZ1C,GAAyB,mBACzB,mBAAKrD,MAAM,yEACPmE,GAAsD,IAA/BA,EAAoBvB,SAAiB,mBAC9D,mBAAK5C,MAAM,0BACV,mBAAKA,MAAM,aACV,iBAAGA,MAAM,qBAEV,kBAAIA,MAAM,uBACT,YAAC,IAAD,CAAMR,GAAG,2BAAT,wBAIF2E,GAAuBA,EAAoBO,IAAIsB,GAC/C,mBAAKhG,MAAM,YACV,mBAAKA,MAAM,eACV,YAAC,IAAD,CACC1B,OAAQF,KAAKC,MAAMC,OACnB0H,MAAOA,EACPC,IAAM,gBAAeD,EAAMxG,gB,EAavBgE,a","file":"route-search.chunk.c6919.esm.js","sourcesContent":["import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport { Text, Localizer } from 'preact-i18n';\n\nimport Speed from '../../components/data/speed';\nimport Elevation from '../../components/data/elevation';\nimport Weight from '../../components/data/weight';\nimport Distance from '../../components/data/distance';\nimport Temperature from '../../components/data/temperature';\n\nimport mu from '../../lib/musher-util';\n\n@observer\nclass Team extends Component {\n    requestFollowTeam = (e) => {\n        e.preventDefault();\n        e.stopPropagation();\n        const { teamStore, userStore } = this.props.stores;\n        const { user } = userStore;\n        const teamId = parseInt(e.target.parentElement.dataset.team || e.target.dataset.team, 10);\n        teamStore.followRequest(teamId, user);\n        this.setState({ requestSent: true });\n    }\n\n    getButton = (text = '') => {\n        const { requestSent } = this.state;\n        const { userStore } = this.props.stores;\n        const { user } = userStore;\n        const { team, skipHome } = this.props;\n        const isYourTeam = team.members && team.members.indexOf(user.id) > -1;\n        const isFollowing = team.followers && team.followers.indexOf(user.id) > -1;\n        const isBlocked = team.blockedFollowers && team.blockedFollowers.indexOf(user.id) > -1;\n        const hasRequestedFollow = requestSent || team.followRequests && team.followRequests.findIndex(e => e.id === user.id) > -1;\n\n        if (isYourTeam) {\n            if (skipHome) {\n                return '';\n            }\n            return (\n                <i class='fas fa-home' />\n            );\n        }\n        if (isFollowing) {\n            return (\n                <button\n                    type='button'\n                    class={`btn btn-sm btn-outline-secondary float-right`}\n                    onClick={this.unFollowTeam}\n                    disabled='true'\n                    data-team={team.id}\n                >\n                    <i class='fas fa-link mr-2' />\n                    <Text id='teams.connect.is-following'>Følger</Text> {text}\n                </button>\n            );\n        }\n        if (isBlocked) {\n            return '';\n            // return (\n            //     <button\n            //         class={`btn btn-block btn-outline-secondary float-right`}\n            //         disabled='true'\n            //     >\n            //         <i class='fas fa-hand-paper mr-2' />\n            //         <Text id='teams.connect.is-blocked'>Blokkert</Text> {text}\n            //     </button>\n            // );\n        }\n        if (hasRequestedFollow) {\n            return (\n                <button\n                    type='button'\n                    class={`btn btn-sm btn-outline-secondary float-right`}\n                    disabled='true'\n                >\n                    <i class='fas fa-hourglass-half mr-2' />\n                    <Text id='teams.connect.has-requested'>Venter på godkjenning</Text> {text}\n                </button>\n            );\n        }\n        if (team.public) {\n            return (\n                <button\n                    type='button'\n                    class={`btn btn-sm btn-outline-success float-right`}\n                    onClick={this.requestFollowTeam}\n                    data-team={team.id}\n                >\n                    <i class='far fa-hand-point-right mr-2' />\n                    <Text id='teams.connect.follow'>Følg</Text> {text}\n                </button>\n            );\n        }\n    }\n\n    render() {\n        const { team, showButton, publicUsers = [], showLocation, showMembers } = this.props;\n        const { teamStore, userStore } = this.props.stores;\n\n        const currentMonth = new Date().getMonth() + 1;\n        const currentYear = new Date().getFullYear();\n\t\tconst { month = currentMonth, year = currentYear } = this.props;\n\t\tconst seasonStart = parseInt(month < 8 ? year - 1 : year, 10);\n\n        const workoutSummary = teamStore.findWorkoutSummary(team.id, seasonStart) || {};\n        const { user } = userStore;\n        const { language = 'en' } = user;\n        const teamAmbition = userStore.findTeamAmbition({ ambition: team.ambitions, language });\n        const teamType = userStore.findTeamType({ type: team.type, language });\n\n        const teamUser = publicUsers.find(e => e.id === team.user);\n        const teamUserDisplayName = mu.displayName(teamUser);\n        const image = mu.getImage({ user: teamUser, team, priority: 'user' });\n\n        const { url = `/teams/${team.id}` } = this.props;\n\n        return (\n            <div class='w-100 mb-3'>\n                <div class='row'>\n                    <div class='col-12 col-sm-8 col-lg-6 offset-sm-2 offset-lg-3 d-flex mb-0 position-relative'>\n                        <div class='position-relative d-flex flex-grow-1'>\n                            {/* {JSON.stringify(team, null, 4)} */}\n                            <div class={`text-center border rounded-circle imageRounded`} style={image ? `background-image: url(\"${image}\"); background-size: cover;` : ''}>\n                                {!image && <i class='fas fa-users text-muted mt-3' style='font-size: 40px;' />}\n                            </div>\n                            <div class='flex-grow-1 pl-3' style='line-height: 1.2em;'>\n                                <a class='stretched-link' href={url}>\n                                    <h5 class='mb-1' style='line-height: 1.0em;'>{team.name}</h5>\n                                </a>\n                                {showLocation && <div>\n                                    {(team.place || team.country) && <span class='mr-3'>\n                                        <i class='fas fa-map-marker-alt' />  {team.place} {team.place ? `, ${team.country}` : team.country}\n                                    </span>}\n                                </div>}\n                                {showMembers && <div>\n                                    {teamUser && <span class='mr-2'>\n                                        <i class='fas fa-user' /> {teamUserDisplayName}\n                                    </span>}\n\n                                    {/* {team.members && team.members.length > 1 && team.members.slice(1, 10).map(member => {\n                                        const u = publicUsers.find(e => e.id === member);\n                                        const teamUserDisplayName = mu.displayName(u);\n                                        return (<span class='badge badge-secondary font-weight-light mr-2'>\n                                            <i class='fas fa-user' /> {teamUserDisplayName}\n                                        </span>);\n                                    })} */}\n                                </div>}\n                                <div>\n                                    {teamType && <span class='badge badge-pill badge-secondary'>{teamType}</span>}\n                                    {teamAmbition && <span class='badge badge-pill badge-secondary ml-2'>{teamAmbition}</span>}\n                                </div>\n                                <small class='text-muted'>\n                                    {team && team.dogs && <span class=''><i class='fas fa-dog' /> {team.dogs.length}</span>} \n                                    {team && team.members && <span class='ml-2'><i class='fas fa-user' /> {team.members.length}</span>}\n\n                                    {workoutSummary && workoutSummary.distanceKm > 0 && <span class='ml-2'><i class='fas fa-road' /> <Distance stores={this.props.stores} value={workoutSummary.distanceKm} /></span>}\n                                    {workoutSummary && workoutSummary.elevation > 0 && <span class='ml-2'><i class='fas fa-mountain' /> <Elevation stores={this.props.stores} value={workoutSummary.elevation} /></span>}\n                                    {workoutSummary && workoutSummary.duration > 0 && <span class='ml-2'><i class='fas fa-clock' /> {util.secToHms(workoutSummary.duration)}</span>}\n                                    {workoutSummary && workoutSummary.speedAvg > 0 && <span class='ml-2'><i class='fas fa-tachometer-alt' /> <Speed stores={this.props.stores} value={workoutSummary.speedAvg} /></span>}\n                                </small>\n                            </div>\n                        </div>\n                        {showButton && <div>\n                            {this.getButton()}\n                        </div>}\n                    </div>\n                </div>\n            </div>\n        );\n    }\n}\n\nexport default Team;\n","import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport { Text, Localizer } from 'preact-i18n';\nimport linkState from 'linkstate';\n\nimport { route } from 'preact-router';\n\nimport Dog from '../../components/dog';\nimport Workout from '../../components/workout';\nimport Team from '../../components/team';\nimport Track from '../../components/track';\nimport User from '../../components/user';\nimport Story from '../../components/story/publicStory';\n\nimport TeamPublicFeedLine from '../../components/team/publicFeedLine';\n\nconst initialState = {\n\tsubmenu: 'dogs',\n\thits: 0,\n\tsearchText: '',\n};\n\n@observer\nclass Search extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            ...initialState,\n        };\n    }\n\n\tloadAll = async (props = this.props) => {\n\t\tconst { appState, storyStore, teamStore } = this.props.stores;\n\t\tconst { search } = props;\n\t    await appState.getSearch(search);\n\t\tconst { publicTeams, publicUsers } = appState;\n\t\tstoryStore.localUpdateField('publicTeams', publicTeams);\n\t\tstoryStore.localUpdateField('publicUsers', publicUsers);\n\t\tteamStore.localUpdateField('publicTeams', publicTeams);\n\t\tteamStore.localUpdateField('publicUsers', publicUsers);\n\n\t\tconst { searchResultStories, searchResultDogs, searchResultWorkouts = [], searchResultTeams, searchResultTracks } = appState;\n\t\tconst allData = [searchResultStories, searchResultDogs, searchResultWorkouts, searchResultTeams, searchResultTracks];\n\t\tconst names = ['stories', 'dogs', 'workouts', 'teams', 'tracks', 'users'];\n\t\tconst idx = allData\n\t\t\t.map(a => a.length)\n\t\t\t.indexOf(Math.max(...allData.map(a => a.length)));\n\t\tconst hits = allData.map(a => a.length).reduce((partialSum, a) => partialSum + a, 0);\n\t\tthis.setState({\n\t\t\tsearchText: search,\n\t\t\tsubmenu: names[idx],\n\t\t\thits,\n\t\t});\n\t}\n\n\tsearch = () => {\n\t\tconst { searchText } = this.state;\n\t\troute(`/search/${searchText}`);\n\t}\n\n\tchooseSubmenu = (e) => {\n\t\tconst submenu = e.target.parentElement.dataset.menu || e.target.dataset.menu;\n\t\tthis.setState({ submenu });\n\t}\n\n\tcomponentDidMount() {\n\t\tthis.loadAll();\n\t}\n\n\tcomponentWillReceiveProps(nextProps) {\n        // console.log('componentWillReceiveProps', nextProps);\n        if (nextProps.search !== this.props.search) {\n            this.loadAll(nextProps);\n        }\n    }\n\n\trender() {\n\t\tconst { appState, userStore } = this.props.stores;\n\t\tconst { search } = this.props;\n\n\t\tconst { isAdmin } = userStore;\n\t\tconst { searchResultStories, searchResultDogs, searchResultWorkouts = [], searchResultTeams, searchResultTracks, publicUsers, publicTeams } = appState;\n\t\tconst { submenu, hits, searchText } = this.state;\n\t\treturn (\n\t\t\t<div class='container-fluid' style='margin-bottom: 200px; margin-top: 60px;'>\n\t\t\t\t<div class='row'>\n\t\t\t\t\t<div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-0 mb-2'>\n\t\t\t\t\t\t<h1><Text id='search.title'>Search</Text></h1>\n\t\t\t\t\t\t<h5 class='my-3'><Text id='search.search-for' fields={{ search, hits }}>{hits} in your search for \"{search}\"</Text></h5>\n\n\t\t\t\t\t\t<div class='d-flex justify-content-center py-3'>\n\t\t\t\t\t\t\t<Localizer>\n\t\t\t\t\t\t\t\t<input class='form-control form-control mr-2' type='search' placeholder={<Text id='header.search-placeholder'>Søk etter det meste...</Text>}\n\t\t\t\t\t\t\t\t\tvalue={searchText}\n\t\t\t\t\t\t\t\t\tonInput={linkState(this, 'searchText')}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</Localizer>\n\t\t\t\t\t\t\t<button class='btn btn-outline-success' type='button'\n\t\t\t\t\t\t\t\tonClick={this.search}\n\t\t\t\t\t\t\t><Text id='header.search'>Søk</Text></button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 my-3'>\n\t\t\t\t\t\t<div class='row'>\n\t\t\t\t\t\t\t<div class='w-100 overflow-hidden'>\n                                <div\n                                    class='d-flex flex-row flex-nowrap pb-2 px-1'\n                                    style='overflow: auto; scroll-snap-type: x mandatory;'\n                                >\n\t\t\t\t\t\t\t\t\t<div class='col px-0 pt-2'>\n\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\tclass={`btn btn-block rounded-pill-left rounded-none ${submenu === 'dogs' ? 'btn-primary' : 'btn-outline-primary'} text-nowrap`}\n\t\t\t\t\t\t\t\t\t\t\tstyle='text-overflow: ellipsis; overflow: hidden;'\n\t\t\t\t\t\t\t\t\t\t\tdata-menu='dogs'\n\t\t\t\t\t\t\t\t\t\t\tonClick={this.chooseSubmenu}\n\t\t\t\t\t\t\t\t\t\t><i class='fas fa-dog' /> <Text id='search.dogs'>Dogs</Text> ({searchResultDogs.length || 0})</button>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t{/* <div class='col px-0 pt-2'>\n\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\tclass={`btn btn-block rounded-none ${submenu === 'workouts' ? 'btn-primary' : 'btn-outline-primary'} text-nowrap`}\n\t\t\t\t\t\t\t\t\t\t\tstyle='text-overflow: ellipsis; overflow: hidden;'\n\t\t\t\t\t\t\t\t\t\t\tdata-menu='workouts'\n\t\t\t\t\t\t\t\t\t\t\tonClick={this.chooseSubmenu}\n\t\t\t\t\t\t\t\t\t\t><i class='fas fa-running' /> <Text id='search.workouts'>Workouts</Text> ({searchResultWorkouts.length || 0})</button>\n\t\t\t\t\t\t\t\t\t</div> */}\n\t\t\t\t\t\t\t\t\t<div class='col px-0 pt-2'>\n\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\tclass={`btn btn-block rounded-none ${submenu === 'teams' ? 'btn-primary' : 'btn-outline-primary'} text-nowrap`}\n\t\t\t\t\t\t\t\t\t\t\tstyle='text-overflow: ellipsis; overflow: hidden;'\n\t\t\t\t\t\t\t\t\t\t\tdata-menu='teams'\n\t\t\t\t\t\t\t\t\t\t\tonClick={this.chooseSubmenu}\n\t\t\t\t\t\t\t\t\t\t><i class='fas fa-users' /> <Text id='search.teams'>Teams</Text> ({searchResultTeams.length || 0})</button>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div class='col px-0 pt-2'>\n\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\tclass={`btn btn-block rounded-none ${submenu === 'tracks' ? 'btn-primary' : 'btn-outline-primary'} text-nowrap`}\n\t\t\t\t\t\t\t\t\t\t\tstyle='text-overflow: ellipsis; overflow: hidden;'\n\t\t\t\t\t\t\t\t\t\t\tdata-menu='tracks'\n\t\t\t\t\t\t\t\t\t\t\tonClick={this.chooseSubmenu}\n\t\t\t\t\t\t\t\t\t\t><i class='fas fa-map-marked-alt' /> <Text id='search.tracks'>Tracks</Text> ({searchResultTracks.length || 0})</button>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div class='col px-0 pt-2'>\n\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\tclass={`btn btn-block rounded-pill-right rounded-none ${submenu === 'stories' ? 'btn-primary' : 'btn-outline-primary'} text-nowrap`}\n\t\t\t\t\t\t\t\t\t\t\tstyle='text-overflow: ellipsis; overflow: hidden;'\n\t\t\t\t\t\t\t\t\t\t\tdata-menu='stories'\n\t\t\t\t\t\t\t\t\t\t\tonClick={this.chooseSubmenu}\n\t\t\t\t\t\t\t\t\t\t><i class='fas fa-comments' /> <Text id='search.stories'>Stories</Text> ({searchResultStories.length || 0})</button>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t{submenu === 'dogs' && <>\n\t\t\t\t\t\t<div class='col-12'>\n\t\t\t\t\t\t\t{(!searchResultDogs || searchResultDogs.length === 0) && <>\n\t\t\t\t\t\t\t\t<div class='text-center text-muted'>\n\t\t\t\t\t\t\t\t\t<div class='display-1'>\n\t\t\t\t\t\t\t\t\t\t<i class='fas fa-dog' />\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<h3 class='font-weight-lighter'>\n\t\t\t\t\t\t\t\t\t\t<Text id='search.no-dogs-found'>No dogs found.</Text>\n\t\t\t\t\t\t\t\t\t</h3>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</>}\n\t\t\t\t\t\t\t{searchResultDogs && searchResultDogs.map(dog => (\n\t\t\t\t\t\t\t\t<Dog stores={this.props.stores} dog={dog} url={`/dogs/public/${dog.uuidv4}`} />\n\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</>}\n\t\t\t\t\t{submenu === 'workouts' && <>\n\t\t\t\t\t\t<div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-0 mb-2'>\n\t\t\t\t\t\t\t{(!searchResultWorkouts || searchResultWorkouts.length === 0) && <>\n\t\t\t\t\t\t\t\t<div class='text-center text-muted'>\n\t\t\t\t\t\t\t\t\t<div class='display-1'>\n\t\t\t\t\t\t\t\t\t\t<i class='fas fa-running' />\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<h3 class='font-weight-lighter'>\n\t\t\t\t\t\t\t\t\t\t<Text id='search.no-workouts-found'>No workouts found.</Text>\n\t\t\t\t\t\t\t\t\t</h3>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</>}\n\t\t\t\t\t\t\t{searchResultWorkouts && searchResultWorkouts.map((workout, idx) => (\n\t\t\t\t\t\t\t\t<div class='row mb-4'>\n\t\t\t\t\t\t\t\t\t<div class='col-12 py-3'>\n\t\t\t\t\t\t\t\t\t\t<TeamPublicFeedLine\n\t\t\t\t\t\t\t\t\t\t\tstores={this.props.stores}\n\t\t\t\t\t\t\t\t\t\t\tfeed={workout}\n\t\t\t\t\t\t\t\t\t\t\tidx={idx}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</>}\n\t\t\t\t\t{submenu === 'teams' && <>\n\t\t\t\t\t\t<div class='col-12'>\n\t\t\t\t\t\t\t{(!searchResultTeams || searchResultTeams.length === 0) && <>\n\t\t\t\t\t\t\t\t<div class='text-center text-muted'>\n\t\t\t\t\t\t\t\t\t<div class='display-1'>\n\t\t\t\t\t\t\t\t\t\t<i class='fas fa-users' />\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<h3 class='font-weight-lighter'>\n\t\t\t\t\t\t\t\t\t\t<Text id='search.no-teams-found'>No teams found.</Text>\n\t\t\t\t\t\t\t\t\t</h3>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</>}\n\t\t\t\t\t\t\t{searchResultTeams && searchResultTeams.map(team => <>\n\t\t\t\t\t\t\t\t<Team\n\t\t\t\t\t\t\t\t\tstores={this.props.stores}\n\t\t\t\t\t\t\t\t\tteam={team}\n\t\t\t\t\t\t\t\t\turl={`/teams/public/${team.uuidv4}`}\n\t\t\t\t\t\t\t\t\tshowButton={true}\n\t\t\t\t\t\t\t\t\tpublicUsers={publicUsers}\n\t\t\t\t\t\t\t\t\tshowMembers={1}\n\t\t\t\t\t\t\t\t\tshowLocation={1}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</>)}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</>}\n\t\t\t\t\t{submenu === 'tracks' && <>\n\t\t\t\t\t\t<div class='col-12'>\n\t\t\t\t\t\t\t{(!searchResultTracks || searchResultTracks.length === 0) && <>\n\t\t\t\t\t\t\t\t<div class='text-center text-muted'>\n\t\t\t\t\t\t\t\t\t<div class='display-1'>\n\t\t\t\t\t\t\t\t\t\t<i class='fas fa-map-marked-alt' />\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<h3 class='font-weight-lighter'>\n\t\t\t\t\t\t\t\t\t\t<Text id='search.no-tracks-found'>No tracks found.</Text>\n\t\t\t\t\t\t\t\t\t</h3>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</>}\n\t\t\t\t\t\t\t{searchResultTracks && searchResultTracks.map(track => (\n\t\t\t\t\t\t\t\t<Track stores={this.props.stores} track={track} />\n\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</>}\n\t\t\t\t\t{submenu === 'stories' && <>\n\t\t\t\t\t\t<div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-0 mb-2'>\n\t\t\t\t\t\t\t{(!searchResultStories || searchResultStories.length === 0) && <>\n\t\t\t\t\t\t\t\t<div class='text-center text-muted'>\n\t\t\t\t\t\t\t\t\t<div class='display-1'>\n\t\t\t\t\t\t\t\t\t\t<i class='fas fa-comments' />\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<h3 class='font-weight-lighter'>\n\t\t\t\t\t\t\t\t\t\t<Text id='search.no-stories-found'>No stories found.</Text>\n\t\t\t\t\t\t\t\t\t</h3>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</>}\n\t\t\t\t\t\t\t{searchResultStories && searchResultStories.map(story => (\n\t\t\t\t\t\t\t\t<div class='row mb-4'>\n\t\t\t\t\t\t\t\t\t<div class='col-12 py-3'>\n\t\t\t\t\t\t\t\t\t\t<Story\n\t\t\t\t\t\t\t\t\t\t\tstores={this.props.stores}\n\t\t\t\t\t\t\t\t\t\t\tstory={story}\n\t\t\t\t\t\t\t\t\t\t\tkey={`story-detail-${story.id}`}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</>}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nexport default Search;\n"],"sourceRoot":""}