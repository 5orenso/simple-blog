(window.webpackJsonp=window.webpackJsonp||[]).push([[63],{"+JSK":function(t,e,r){"use strict";(function(t){function o(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,o)}return r}function n(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var s,a=r("hosL"),i=r("Utv1"),c=r("/eY4"),l=r("OhSV"),u=r("ZOvn"),d={},h=Object(c.a)(s=function(e){function r(t){var r;return(r=e.call(this,t)||this).toggleLikes=function(){r.setState({showLikesList:!r.state.showLikesList})},r.state=function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?o(Object(r),!0).forEach((function(e){n(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({},d),r}var s,c;return c=e,(s=r).prototype=Object.create(c.prototype),s.prototype.constructor=s,s.__proto__=c,r.prototype.render=function(){var e=this.state.showLikesList,r=this.props.stores,o=r.storyStore,n=r.teamStore,s=r.workoutStore,c=r.raceStore,d=this.props,h=d.likes,m=d.comments,b=d.type,p=void 0===b?"story":b,f=d.onTeamClick,g=void 0===f?function(){}:f;return Object(a.h)(t,null,Object(a.h)("div",{class:"d-flex justify-content-between mb-2"},h&&h.length>0&&Object(a.h)(t,null,Object(a.h)("div",{class:"d-flex flex-row flex-nowrap position-relative mr-3",style:"overflow: auto;"},Object(a.h)("span",{class:"text-muted mr-2",onClick:this.toggleLikes},Object(a.h)("i",{class:"fas fa-thumbs-up text-primary"})," ",h.length),h.slice(0,1).map((function(e){var r,l,d;"story"===p?(r=o.findPublicUser(e.user),l=o.findPublicTeamByMembers(e.user)):"team"===p?(r=n.findPublicUser(e.user),l=n.findPublicTeamByMembers(e.user)):"workout"===p?(r=s.findPublicUser(e.user),l=s.findPublicTeamByMembers(e.user)):"race"===p&&(r=c.findPublicUser(e.user),l=c.findPublicTeamByMembers(e.user)),i.a.isArray(l)&&(d=l.find((function(t){return 1===t.public})));u.a.getImage({user:r,team:d,priority:"user"}),u.a.displayNameShort(r);var h=u.a.displayName(r);return Object(a.h)(t,null,Object(a.h)("span",{class:"font-weight-lighter"},d?Object(a.h)(t,null,Object(a.h)("a",{href:"/teams/public/"+d.uuidv4,title:d.name,onClick:function(t){return g(t,d.uuidv4)}},h)):Object(a.h)(t,null,h)))})),h.length>1&&Object(a.h)(t,null,Object(a.h)("span",{class:"text-muted font-weight-lighter ml-2",onClick:this.toggleLikes},Object(a.h)(l.c,{id:"likes-comments.and",fields:{total:h.length-1}},"and ",h.length-1," others."))))),m&&m.length>0&&Object(a.h)("span",{class:"float-right text-muted"},Object(a.h)("i",{class:"fas fa-comment text-primary"})," ",m.length)),e&&Object(a.h)("div",{class:"mt-3 mb-3"},h&&h.map((function(e){var r,l,d;"story"===p?(r=o.findPublicUser(e.user),l=o.findPublicTeamByMembers(e.user)):"team"===p?(r=n.findPublicUser(e.user),l=n.findPublicTeamByMembers(e.user)):"workout"===p?(r=s.findPublicUser(e.user),l=s.findPublicTeamByMembers(e.user)):"race"===p&&(r=c.findPublicUser(e.user),l=c.findPublicTeamByMembers(e.user)),i.a.isArray(l)&&(d=l.find((function(t){return 1===t.public})));var h=u.a.getImage({user:r,team:d,priority:"user"}),m=u.a.displayNameShort(r),b=u.a.displayName(r,!0);return Object(a.h)("div",{class:"d-flex flex-row position-relative font-weight-light mb-1"},d?Object(a.h)(t,null,Object(a.h)("a",{href:"/teams/public/"+d.uuidv4,title:d.name,onClick:function(t){return g(t,d.uuidv4)},class:"stretched-link"},Object(a.h)("div",{class:"text-center border rounded-circle imageRounded imageRoundedThumb",style:h?'background-image: url("'+h+'"); background-size: cover;':""},!h&&Object(a.h)("div",{class:"",style:"font-size: 12px; padding-top: 3px;"},m))),Object(a.h)("div",{class:"ml-2 "},b," ",Object(a.h)("span",{class:"font-weight-lighter"},"- ",d.name))):Object(a.h)(t,null,Object(a.h)("div",{class:"text-center border rounded-circle imageRounded imageRoundedThumb",style:(h?'background-image: url("'+h+'"); background-size: cover;':"")+" opacity: 0.5;"},!h&&Object(a.h)("div",{class:"text-muted",style:"font-size: 12px; padding-top: 3px;"},m)),Object(a.h)("div",{class:"ml-2"},b)))}))))},r}(a.Component))||s;e.a=h}).call(this,r("hosL").Fragment)},"/922":function(t,e,r){"use strict";(function(t){var o,n=r("hosL"),s=r("Utv1"),a=r("/eY4"),i=r("OhSV"),c=r("go65"),l=r("om2D"),u=(r("ETxl"),r("ZOvn")),d=Object(a.a)(o=function(e){function r(t){var r;return(r=e.call(this,t)||this).beforeImagesUploaded=function(){r.setState({sendButtonEnabled:!1})},r.afterImagesUploaded=function(){r.setState({sendButtonEnabled:!0})},r.commentWorkout=function(){return new Promise((function(t,e){var o,n,s,a,i,c,l,d,h,m,b;return r.state.sendButtonEnabled?(s=void 0===(n=(o=r.props).callback)?function(){}:n,i=void 0===(a=o.inputRefObject)?{}:a,c=r.props.workout,l=r.props.stores.workoutStore,h=(d=r.state).comment,m=d.showAddImage,r.setState({sendButtonEnabled:!1}),Promise.resolve(l.commentWorkout({id:c.id,comment:h})).then((function(o){try{return(b=o)&&200===b.status&&(r.setState({comment:{body:"",images:[]}},(function(){u.a.resizeTextarea(i[c.id]),m&&r.addImage()})),s({workout:c,response:b})),r.setState({sendButtonEnabled:!0}),t()}catch(t){return e(t)}}),e)):t(!1)}))},r.addImages=function(t){var e,o=r.state.comment;(e=o.images).push.apply(e,t.value),r.setState({comment:o})},r.addImage=function(){var t=r.state.showAddImage;r.setState({showAddImage:!(void 0!==t&&t)})},r.handleImageErrored=function(t){var e=t.target;e.onerror=null,setTimeout((function(){e.src+="?"+new Date}),1e3)},r.state={comment:{body:"",images:[]},showAddImage:!1,sendButtonEnabled:!0},r.inputRef={},r}var o,a;return a=e,(o=r).prototype=Object.create(a.prototype),o.prototype.constructor=o,o.__proto__=a,r.prototype.render=function(){var e=this,r=this.props,o=r.inputRef,a=r.col,d=void 0===a?12:a,h=r.offset,m=void 0===h?0:h,b=r.showAvatar,p=void 0===b||b,f=r.extraClass,g=void 0===f?"":f,O=r.workout,v=this.state,j=v.comment,y=v.showAddImage,w=v.sendButtonEnabled,k=this.props.stores.userStore.user,x=void 0===k?{}:k,S=x.firstname?""+s.a.ucfirst(x.firstname,!0)+s.a.ucfirst(x.lastname,!0):""+s.a.ucfirst(x.email||"",!0),D=x.image||(x.images?x.images[0]:void 0);return Object(n.h)("div",{class:"col-"+d+" offset-"+m+" "+g},Object(n.h)("div",{class:"d-flex mb-0 position-relative w-100"},p&&Object(n.h)("div",{class:"text-center border rounded-circle imageRounded imageRoundedSmall",style:(D?"background-image: url('"+D.s3SmallLink+"'); background-size: cover;":"")+" border-width: 3px !important;"},!x.image&&Object(n.h)("span",{class:"font-weight-lighter",style:"font-size: 15px;"},S)),Object(n.h)("div",{class:"col pl-3",style:"line-height: 1.2em;"},Object(n.h)("div",{class:"d-flex bd-highlight"},Object(n.h)("div",{class:"p-0 w-100 bd-highlight"},Object(n.h)("label",{class:"sr-only",for:"inlineFormInput"},Object(n.h)(i.c,{id:"comments.comment"},"Kommentar")),Object(n.h)("div",{class:"border rounded rounded-lg position-relative"},Object(n.h)(i.b,null,Object(n.h)("textarea",{class:"form-control-plaintext px-2",type:"text",placeholder:Object(n.h)(i.c,{id:"comments.write-comment"},"Skriv en kommentar..."),onInput:Object(c.a)(this,"comment.body"),onKeyUp:u.a.resizeTextarea,onFocus:u.a.resizeTextarea,style:"height: 2.3em;",value:j.body,ref:o})),Object(n.h)("div",{class:"position-absolute",style:"top: 8px; right: 10px; font-size: 1.2em;"},Object(n.h)("i",{class:"fas fa-image pointerCursor","data-id":O.id,onClick:this.addImage})))),Object(n.h)("div",{class:"p-0 pl-2 flex-shrink-1 bd-highlight"},Object(n.h)("button",{type:"button",class:"btn btn-"+(w?"primary":"secondary")+" mb-2",disabled:!w,onClick:this.commentWorkout},Object(n.h)("i",{class:"fas fa-paper-plane"})))))),y&&Object(n.h)(t,null,Object(n.h)("div",{class:"col-12 text-center"},Object(n.h)("div",{class:"container-fluid"},Object(n.h)("div",{class:"row"},j.images&&j.images.map((function(t){return Object(n.h)("div",{class:"col-3 p-1"},Object(n.h)("img",{src:t.s3SmallLink,class:"img-fluid",onError:e.handleImageErrored}),Object(n.h)("button",{class:"btn btn-sm btn-link",onClick:e.removeImage,"data-name":t.name},Object(n.h)("i",{class:"fas fa-trash"}),"  ",Object(n.h)(i.c,{id:"comments.remove-image"},"Remove")))})))),Object(n.h)(l.a,{object:j,updateField:this.addImages,before:this.beforeImagesUploaded,after:this.afterImagesUploaded,autoOpen:!0}))))},r}(n.Component))||o;e.a=d}).call(this,r("hosL").Fragment)},"/DnB":function(t,e,r){"use strict";function o(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,o)}return r}function n(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var s,a=r("hosL"),i=(r("Utv1"),r("/eY4")),c={},l=Object(i.a)(s=function(t){function e(e){var r;return(r=t.call(this,e)||this).state=function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?o(Object(r),!0).forEach((function(e){n(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({},c),r.container=null,r}var r,s;s=t,(r=e).prototype=Object.create(s.prototype),r.prototype.constructor=r,r.__proto__=s;var i=e.prototype;return i.componentDidMount=function(){var t=this.props,e=t.horizontal,r=t.vertical,o=void 0===r?"":r,n={behavior:"smooth"};e&&(n.inline=e),o&&(n.block=o),this.container.scrollIntoView(n)},i.render=function(){var t=this;return Object(a.h)("div",{ref:function(e){return t.container=e}}," ")},e}(a.Component))||s;e.a=l},"3wGD":function(t,e,r){"use strict";var o,n=r("hosL"),s=r("Utv1"),a=r("/eY4"),i=r("OhSV"),c=r("go65"),l=(r("ETxl"),r("ZOvn")),u=Object(a.a)(o=function(t){function e(e){var r;return(r=t.call(this,e)||this).commentWorkout=function(){return new Promise((function(t,e){var o,n,s,a,i,c,u,d,h,m,b;return r.state.sendButtonEnabled?(s=void 0===(n=(o=r.props).callback)?function(){}:n,a=o.commentId,c=void 0===(i=o.inputRefObject)?{}:i,u=r.props.workout,d=r.props.stores.workoutStore,m=void 0===(h=r.state.comment)?"":h,r.setState({sendButtonEnabled:!1}),Promise.resolve(d.commentReplyWorkout({id:u.id,commentId:a,comment:m})).then((function(o){try{return(b=o)&&200===b.status&&(r.setState({comment:""},(function(){l.a.resizeTextarea(c[a])})),s({workout:u,response:b,commentId:a})),r.setState({sendButtonEnabled:!0}),t()}catch(t){return e(t)}}),e)):t(!1)}))},r.state={sendButtonEnabled:!0},r.inputRef={},r}var r,o;return o=t,(r=e).prototype=Object.create(o.prototype),r.prototype.constructor=r,r.__proto__=o,e.prototype.render=function(){var t=this.props.inputRef,e=this.state,r=e.comment,o=e.sendButtonEnabled,a=this.props.stores.userStore.user,u=void 0===a?{}:a,d=u.firstname?""+s.a.ucfirst(u.firstname,!0)+s.a.ucfirst(u.lastname,!0):""+s.a.ucfirst(u.email||"",!0),h=u.image||(u.images?u.images[0]:void 0);return Object(n.h)("div",{class:"w-100"},Object(n.h)("div",{class:"d-flex mb-0 position-relative w-100"},Object(n.h)("div",{class:"text-center border rounded-circle imageRounded imageRoundedThumb",style:(h?"background-image: url('"+h.s3SmallLink+"'); background-size: cover;":"")+" border-width: 3px !important;"},!h&&Object(n.h)("span",{class:"font-weight-lighter",style:"font-size: 15px;"},d)),Object(n.h)("div",{class:"col pl-3",style:"line-height: 1.2em;"},Object(n.h)("div",{class:"d-flex bd-highlight"},Object(n.h)("div",{class:"p-0 w-100 bd-highlight"},Object(n.h)("label",{class:"sr-only",for:"inlineFormInput"},Object(n.h)(i.c,{id:"comments.comment"},"Kommentar")),Object(n.h)("div",{class:"border rounded rounded-lg position-relative"},Object(n.h)(i.b,null,Object(n.h)("textarea",{class:"form-control-plaintext px-2",type:"text",placeholder:Object(n.h)(i.c,{id:"comments.write-comment"},"Skriv en kommentar..."),onInput:Object(c.a)(this,"comment"),onKeyUp:l.a.resizeTextarea,style:"height: 2.3em;",value:r,ref:t})))),Object(n.h)("div",{class:"p-0 pl-2 flex-shrink-1 bd-highlight"},Object(n.h)("button",{type:"button",class:"btn btn-"+(o?"primary":"secondary")+" mb-2",disabled:!o,onClick:this.commentWorkout},Object(n.h)("i",{class:"fas fa-paper-plane"})))))))},e}(n.Component))||o;e.a=u},"4imK":function(t,e,r){"use strict";(function(t){var o,n=r("hosL"),s=r("Utv1"),a=r("/eY4"),i=r("OhSV"),c=r("nHdA"),l=r("irB3"),u=(r("UwwE"),r("8Lgr")),d=(r("QkTp"),Object(a.a)(o=function(e){function r(){for(var t,r=arguments.length,o=new Array(r),n=0;n<r;n++)o[n]=arguments[n];return(t=e.call.apply(e,[this].concat(o))||this).toggleDate=function(e){e.stopPropagation(),e.preventDefault(),t.setState({showDate:!t.state.showDate})},t.ignoreGarminWorkout=function(e){return new Promise((function(r,o){return e.stopPropagation(),Promise.resolve(t.props.stores.garminActivityDetailsStore.ignoreWorkout(e.target.parentElement.dataset.id||e.target.dataset.id)).then((function(){try{return t.loadGarminActivities(),r()}catch(t){return o(t)}}),o)}))},t.importGarminWorkout=function(e){return new Promise((function(r,o){function n(){return t.loadGarminActivities(),t.loadWorkouts(),r()}var s,a,i,c;return e.stopPropagation(),s=e.target.parentElement.dataset.id||e.target.dataset.id,i=(a=t.props.stores).garminActivityDetailsStore,c=a.workoutStore.currentTeam,t.props.asTrack?Promise.resolve(i.importTrack(s,c)).then(function(){try{return n.call(this)}catch(t){return o(t)}}.bind(this),o):Promise.resolve(i.importWorkout(s,c)).then(function(){try{return n.call(this)}catch(t){return o(t)}}.bind(this),o)}))},t.loadWorkouts=function(){return new Promise((function(e,r){var o;return o=t.props.stores.workoutStore,Promise.resolve(o.load({query:{team:o.currentTeam}})).then((function(){try{return e()}catch(t){return r(t)}}),r)}))},t.toggleDetail=function(){var e=t.state.showDetail;t.setState({showDetail:!(void 0!==e&&e)})},t}var o,a;a=e,(o=r).prototype=Object.create(a.prototype),o.prototype.constructor=o,o.__proto__=a;var d=r.prototype;return d.loadGarminActivities=function(){return new Promise(function(t){return this.props.stores.garminActivityDetailsStore.load({query:{hideImported:1}}),t()}.bind(this))},d.componentDidMount=function(){this.loadGarminActivities()},d.render=function(){var e=this,r=this.state,o=r.showDate,a=r.showDetail,d=void 0!==a&&a,h=this.props,m=h.activities,b=void 0===m?[]:m,p=h.showDate,f=h.asTrack,g=void 0!==f&&f,O=this.props.stores,v=O.userStore,j=v.findTeam(O.workoutStore.currentTeam||v.team.id);return d?Object(n.h)(t,null,Object(n.h)("div",{class:"col-12 mb-3"},Object(n.h)("div",{class:"row"},b&&b.length>0&&Object(n.h)("div",{class:"col-12 border-top border-bottom pt-3 pb-3 my-2 bg-light"},Object(n.h)("button",{type:"button",class:"float-right btn btn-sm btn-link",onClick:this.toggleDetail},Object(n.h)("i",{class:"fas fa-caret-up"})," ",Object(n.h)(i.c,{id:"garmin.hide-list"},"Hide list")),Object(n.h)("h5",null,Object(n.h)(i.c,{id:"workout.index.garmin-workouts"},"Garmin workouts / not imported")," ",b.length),b&&b.map((function(r){var a=r.summary,d=void 0===a?{}:a,h=s.a.parseInputDate(d.startTimeInSeconds);return Object(n.h)(t,null,Object(n.h)("div",{class:"col-12 d-flex mb-4 position-relative"},Object(n.h)("div",{class:"text-center border rounded-circle imageRounded",style:'background-image: url("./assets/garmin-connect.png"); border-width: 3px !important;'}," "),Object(n.h)("div",{class:"flex-grow-1 pl-3",style:"line-height: 1.2em;"},Object(n.h)("h5",{class:"my-0 mb-1",style:"line-height: 1.0em;"},d.deviceName),d.activityType,Object(n.h)("br",null),Object(n.h)("small",{class:"text-muted"},h&&Object(n.h)("small",{onClick:e.toggleDate},p||o?s.a.formatDate(h,{locale:"no-NB"}):s.a.formatDistance(h,new Date,{locale:"no-NB"})),Object(n.h)("span",{class:"text-muted"},Object(n.h)("i",{class:"fas fa-road ml-2"})," ",Object(n.h)(u.a,{stores:e.props.stores,value:d.distanceInMeters/1e3}),Object(n.h)("i",{class:"fas fa-mountain ml-2"})," ",Object(n.h)(l.a,{stores:e.props.stores,value:d.totalElevationGainInMeters}),Object(n.h)("i",{class:"fas fa-tachometer-alt ml-2"})," ",Object(n.h)(c.a,{stores:e.props.stores,value:3.6*d.averageSpeedInMetersPerSecond}),Object(n.h)("i",{class:"fas fa-stopwatch ml-2"})," ",s.a.secToHms(d.durationInSeconds))),Object(n.h)("br",null),Object(n.h)("button",{class:"btn btn-sm btn-block btn-primary",onClick:e.importGarminWorkout,"data-id":r.id},Object(n.h)("i",{class:"fas fa-file-import"})," ",g?Object(n.h)(i.c,{id:"garmin.import-track"},"Import as track"):Object(n.h)(t,null,Object(n.h)(i.c,{id:"garmin.import"},"Import workout")," ",Object(n.h)("i",{class:"fas fa-arrow-right"})," ",j)),Object(n.h)("button",{class:"btn btn-sm btn-link",onClick:e.ignoreGarminWorkout,"data-id":r.id},Object(n.h)("i",{class:"fas fa-trash-alt"})," ",Object(n.h)(i.c,{id:"garmin.ignore"},"Ignore workout")))))})),Object(n.h)("button",{type:"button",class:"btn btn-block btn-primary mt-3",onClick:this.toggleDetail},Object(n.h)("i",{class:"fas fa-caret-up"})," ",Object(n.h)(i.c,{id:"garmin.hide-list"},"Hide list")))))):b&&b.length>0?Object(n.h)(t,null,Object(n.h)("div",{class:"col-12 mb-3"},Object(n.h)("button",{type:"button",class:"btn btn-block btn-outline-info",onClick:this.toggleDetail},Object(n.h)("div",{class:"float-right ml-2 text-center border rounded-circle imageRounded imageRoundedIcon",style:"background-image: url('./assets/garmin-connect.png');"}),Object(n.h)(i.c,{id:"workout.index.garmin-workouts"},"Garmin workouts / not imported")," ",b.length))):Object(n.h)(t,null)},r}(n.Component))||o);e.a=d}).call(this,r("hosL").Fragment)},"8Lgr":function(t,e,r){"use strict";(function(t){function o(t){return a.a.format(t,t<5?2:1)}var n,s=r("hosL"),a=r("Utv1"),i=r("/eY4"),c=(r("OhSV"),r("ZOvn"),Object(i.a)(n=function(e){function r(){return e.apply(this,arguments)||this}var n,a;return a=e,(n=r).prototype=Object.create(a.prototype),n.prototype.constructor=n,n.__proto__=a,r.prototype.render=function(){var e=this.props,r=e.value,n=void 0===r?0:r,a=e.smallUnit,i=this.props.stores.userStore.user.settings;return(void 0===i?{}:i).imperial?Object(s.h)(t,null,Object(s.h)("nobr",null,o(function(t){return.621371*t}(n))," ",a?Object(s.h)(t,null,Object(s.h)("small",null,Object(s.h)("small",null,Object(s.h)("small",{class:"ml-0 text-muted"},"mi")))):Object(s.h)(t,null,"mi"))):Object(s.h)(t,null,Object(s.h)("nobr",null,o(n)," ",a?Object(s.h)(t,null,Object(s.h)("small",null,Object(s.h)("small",null,Object(s.h)("small",{class:"ml-0 text-muted"},"km")))):Object(s.h)(t,null,"km")))},r}(s.Component))||n);e.a=c}).call(this,r("hosL").Fragment)},ETxl:function(t){t.exports={hoverelementonly:"hoverelementonly__1mJGJ",hoverElement:"hoverElement__axh3O",hoverelementhide:"hoverelementhide__1k_qH","progress-bar-vertical":"progress-bar-vertical__1B2sC","progress-bar":"progress-bar__pnsVj",dragged:"dragged__QXO46",over:"over__1re3x",list:"list__q_emZ"}},"JWe/":function(t,e,r){"use strict";(function(t){function o(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,o)}return r}function n(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?o(Object(r),!0).forEach((function(e){s(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function s(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function a(t){switch(t.type){case 1:return"border-primary";case 2:return"border-danger";case 3:return"border-success";case 4:return"border-info";default:return"border-warning"}}function i(t){switch(t.type){case 1:return"fas fa-running";case 2:return"fas fa-flag-checkered";case 3:return"fas fa-hiking";case 4:return"fas fa-futbol";default:return"fas fa-hiking"}}var c,l=r("hosL"),u=r("Utv1"),d=r("/eY4"),h=r("cneo"),m=r("OhSV"),b=r("fh8t"),p=r.n(b),f=(r("UJvz"),r("sqi2")),g=r("/922"),O=r("s4FZ"),v=r("ZQlJ"),j=r("q/oJ"),y=r("gWxU"),w=r("Nanz"),k=r("+JSK"),x=r("vY+r"),S=r("nHdA"),D=r("irB3"),C=r("UwwE"),P=r("8Lgr"),I=r("QkTp"),T=r("ZOvn"),L=T.a.getMaxLoadIndex(),_={showAddComment:!1,viewImageIdx:{},likeWorkout:{}},E=Object(d.a)(c=function(e){function r(t){var r;return(r=e.call(this,t)||this).toggleDate=function(t){t.stopPropagation(),t.preventDefault(),r.setState({showDate:!r.state.showDate})},r.likeWorkout=function(){return new Promise((function(t,e){var o,n,s;return o=r.props.stores.workoutStore,(s=r.state.likeWorkout)[n=r.props.workout.id]=!0,r.setState({likeWorkout:s}),setTimeout((function(){var t=r.state.likeWorkout;delete t[n],r.setState({likeWorkout:t})}),1200),Promise.resolve(o.likeWorkout({id:n})).then((function(r){try{return r,t()}catch(t){return e(t)}}),e)}))},r.toggleAddComment=function(t){var e=t.target.parentElement.dataset.id||t.target.dataset.id;r.setState({showAddComment:!r.state.showAddComment},(function(){r.inputRef[e]&&r.inputRef[e].focus()}))},r.viewImage=function(t){var e=t.target.closest("img").dataset,o=r.state.viewImageIdx;o[e.id]=e.idx,r.setState({viewImageIdx:o})},r.shareLink=function(t){var e=t.target.closest("button").dataset;r.props.stores.appState.shareUrl({url:e.url,title:e.title,text:e.text})},r.onTeamClick=function(t,e){return t.preventDefault(),t.stopPropagation(),r.setState({showTeam:e}),!1},r.hideTeam=function(){r.setState({showTeam:null})},r.onUserClick=function(t){return t.preventDefault(),t.stopPropagation(),!1},r.onDogClick=function(t,e,o){return t.preventDefault(),t.stopPropagation(),r.setState({showDog:e,dogs:o}),!1},r.hideDog=function(){r.setState({showDog:null})},r.state=n({},_),r.updateTimer={},r.inputRef={},r}var o,s;return s=e,(o=r).prototype=Object.create(s.prototype),o.prototype.constructor=o,o.__proto__=s,r.prototype.render=function(){var e=this,r=this.state,o=r.showDate,s=r.showAddComment,c=r.likeWorkout,d=r.dogs,b=r.showTeam,_=r.showDog,E=this.props,R=E.workout,A=E.showDate,U=E.wrapperClasses,B=void 0===U?"col-12 col-sm-8 col-lg-6 offset-sm-2 offset-lg-3":U,M=E.wrapperClassesRow,F=void 0===M?"row":M,W=this.props.stores,z=W.userStore,N=W.appState,V=W.workoutStore,Y=N.viewmode,H=N.hasShareApi,q=z.user,G=z.dogs,J=q.language,Z=void 0===J?"en":J,K=z.findIntensity({code:R.intensity,language:Z})||{},Q=z.findTeam(R.team,!0)||{},X=Q.name,$=[];X&&$.push(X),R.teams&&R.teams.forEach((function(t){z.findTeam(t)&&$.push(z.findTeam(t))}));var tt=R.likes,et=void 0===tt?[]:tt,rt=R.comments,ot=void 0===rt?[]:rt,nt=R.likes&&R.likes.findIndex((function(t){return t.user===q.id}))>-1,st=R.gpxInfo,at=R.mushers,it=void 0===at?[]:at,ct=(void 0===st?{}:st).loadIndex,lt=void 0===ct?0:ct,ut=z.findEquipment({equipment:R.equipment,language:Z}),dt=z.findEquipment({equipment:R.equipment,field:"icon"}),ht=[];it.length>1&&it.slice(1,10).map((function(t){var e=V.findPublicUser(t)||{};e.images&&e.images[0]&&ht.push(e.images[0])}));var mt,bt=V.findPublicUser(it[0])||{};bt&&bt.images&&bt.images[0]?mt=bt.images[0]:Q.image&&Q.image.s3SmallLink?mt=Q.image:Q.images&&Q.images[0]&&Q.images[0].s3SmallLink?mt=Q.images[0]:R.image&&R.image.s3SmallLink&&(mt=R.image);var pt=[];if(R.mapImage&&pt.push(n(n({},R.mapImage),{},{type:"map"})),R.images){var ft=Object(h.i)(R.images);pt.push.apply(pt,ft)}var gt;R&&R.gpxInfo&&R.gpxInfo.battegryLevelStart&&(gt=100*(R.gpxInfo.battegryLevelStart-R.gpxInfo.battegryLevelEnd));var Ot=T.a.getViews(R.statistics);return Object(l.h)(t,null,b&&Object(l.h)(j.a,null,Object(l.h)(y.default,{stores:this.props.stores,teamid:b,marginTop:"0px;",marginBottom:"0px;",back:this.hideTeam,hideTeam:this.hideTeam})),_&&Object(l.h)(j.a,null,Object(l.h)(w.default,{stores:this.props.stores,dogid:_,marginTop:"0px;",marginBottom:"0px;",back:this.hideDog,dogs:d})),Object(l.h)("div",{class:"w-100 mb-2"},Object(l.h)("div",{class:F},Object(l.h)("div",{class:B+" d-flex mb-0 position-relative"},Object(l.h)("div",{class:"text-center"},Object(l.h)("div",{class:"position-relative text-center border rounded-circle imageRounded "+a(R),style:(mt?'background-image: url("'+mt.s3SmallLink+'"); background-size: cover;':"")+" border-width: 3px !important;"},!mt&&Object(l.h)("i",{class:i(R)+" text-"+(K.class?K.class:"muted")+" mt-3",style:"font-size: 40px;"}),ht&&ht.map((function(e,r){return Object(l.h)(t,null,Object(l.h)("div",{class:"position-absolute rounded-circle imageRounded border imageRoundedThumb border-white",style:'\n                                            background-image: url("'+e.s3SmallLink+'");\n                                            background-size: cover;\n                                            bottom: -3px;\n                                            left: '+(10*r-5)+"px;\n                                        "}))}))),0!==R.temperature&&Object(l.h)(t,null,Object(l.h)("span",{class:"text-muted font-weight-light"},Object(l.h)(I.a,{stores:this.props.stores,value:R.temperature})))),Object(l.h)("div",{class:"flex-grow-1 pl-3",style:"line-height: 1.2em;"},Object(l.h)("span",{class:"float-right"},1===R.isLocked&&Object(l.h)("i",{class:"fas fa-lock text-danger ml-3"}),1===R.isInProgress&&Object(l.h)("div",{class:"spinner-grow text-success ml-3",role:"status"}),2===R.isInProgress&&Object(l.h)("i",{class:"fas fa-pause-circle text-warning ml-3"})),Object(l.h)("a",{class:"stretched-link",href:"/workouts/"+R.id},Object(l.h)("h5",{class:"my-0 mb-1",style:"line-height: 1.0em;"},R.name)),$&&$.length>0&&Object(l.h)("small",{class:"font-weight-lighter"},$.map((function(e,r){return Object(l.h)(t,null,r>0?", ":"",e)}))),Object(l.h)("br",null),Object(l.h)("small",{class:"text-muted"},R.date&&Object(l.h)("small",{onClick:this.toggleDate},A||o?u.a.formatDate(R.date,{locale:"no-NB",hour12:!1,hour:"2-digit",minute:"2-digit"}):u.a.formatDistance(R.date,new Date,{locale:"no-NB"})),Object(l.h)("span",{class:"badge badge-"+K.class+" ml-2"},K.name),lt>0&&Object(l.h)("span",{class:"ml-2 text-"+T.a.getLoadIndexColor(u.a.normalizeBetween(lt,0,L,0,100))},Object(l.h)("i",{class:"fas fa-hand-rock mr-1"}),Math.floor(u.a.normalizeBetween(lt,0,L,0,100))," - ",T.a.getLoadIndexText(u.a.normalizeBetween(lt,0,L,0,100))),Object(l.h)("br",null)),Object(l.h)("small",null,Object(l.h)("div",{class:"text-muted"},R.garminId>0&&Object(l.h)("div",{class:"float-left mr-2 text-center border rounded-circle imageRounded imageRoundedIcon",style:'background-image: url("./assets/garmin-connect.png");'}),R.stravaId>0&&Object(l.h)("div",{class:"float-left mr-2 text-center border rounded-circle imageRounded imageRoundedIcon",style:'background-image: url("./assets/strava-icon.png");'}),R.equipment>0&&Object(l.h)(t,null,Object(l.h)("i",{class:dt+" ml-2"})," ",ut),R.dogs>0&&Object(l.h)(t,null,Object(l.h)("i",{class:"fas fa-dog ml-2"})," ",R.dogs.length),R.track>0&&Object(l.h)(t,null,Object(l.h)("i",{class:"fas fa-map-marked text-"+(R.track>0?"success":"danger")+" ml-2"})),R.dogsLeft>0&&Object(l.h)(t,null,Object(l.h)("i",{class:"fas fa-crosshairs text-"+(R.dogsLeft&&R.dogsRight?"success":"danger")+" ml-2"})),R.sledWeight>0&&Object(l.h)(t,null,Object(l.h)("i",{class:"fas fa-sleigh ml-2"})," ",Object(l.h)(C.a,{stores:this.props.stores,value:R.sledWeight})),gt>0&&Object(l.h)("span",{class:"text-muted ml-2"},Object(l.h)("i",{class:"fas fa-battery-three-quarters"})," ",u.a.format(gt,1),"% ",Object(l.h)(m.c,{id:"workout.battery-used"},"used"))),["beta","advanced"].indexOf(Y)>-1&&Object(l.h)("span",{class:"text-muted"},Object(l.h)("i",{class:"fas fa-balance-scale"})," ",u.a.format(R.kcalBurnedTotal)," ",Object(l.h)(m.c,{id:"workout.kcal"},"kcal"),Object(l.h)("i",{class:"fas fa-drumstick-bite ml-2"})," ",Object(l.h)(C.a,{stores:this.props.stores,value:R.kcalMeatGramsTotal/1e3}),Object(l.h)("i",{class:"fas fa-fish ml-2"})," ",Object(l.h)(C.a,{stores:this.props.stores,value:R.kcalSalmonGramsTotal/1e3}),Object(l.h)("i",{class:"fas fa-piggy-bank ml-2"})," ",Object(l.h)(C.a,{stores:this.props.stores,value:R.kcalFatGramsTotal/1e3}))))),Object(l.h)("div",{class:B+" position-relative mt-2"},Object(l.h)("strong",null,R.description)),Object(l.h)("div",{class:B+" position-relative"},Object(l.h)(p.a,{markdown:T.a.replaceImages(R.comment,R.images,Z),markdownOpts:T.a.getMarkdownOptions()})),Object(l.h)("div",{class:B+" d-flex mb-0 position-relative"},Object(l.h)("div",{class:"container-fluid px-0"},Object(l.h)("div",{class:"row mt-1"},R.distanceKm>0&&Object(l.h)("div",{class:"col-3"},Object(l.h)("div",{class:"text-overflow"},Object(l.h)("small",null,Object(l.h)("i",{class:"fas fa-road"})," ",Object(l.h)(m.c,{id:"workout.calendar.distance"},"Distanse"))),Object(l.h)("div",{class:"text-overflow font-weight-light",style:"font-size: 1.2em;"},Object(l.h)(P.a,{stores:this.props.stores,value:R.distanceKm}))),R.elevation>0&&Object(l.h)("div",{class:"col-3"},Object(l.h)("div",{class:"text-overflow"},Object(l.h)("small",null,Object(l.h)("i",{class:"fas fa-mountain"})," ",Object(l.h)(m.c,{id:"workout.calendar.ascend"},"Høydemeter"))),Object(l.h)("div",{class:"text-overflow font-weight-light",style:"font-size: 1.2em;"},Object(l.h)(D.a,{stores:this.props.stores,value:R.elevation}))),R.duration>0&&Object(l.h)("div",{class:"col-3"},Object(l.h)("div",{class:"text-overflow"},Object(l.h)("small",null,Object(l.h)("i",{class:"fas fa-clock"})," ",Object(l.h)(m.c,{id:"workout.calendar.duration"},"Varighet"))),Object(l.h)("div",{class:"text-overflow font-weight-light",style:"font-size: 1.2em;"},u.a.secToHms(R.duration,!0))),R.speedAvg>0&&Object(l.h)("div",{class:"col-3"},Object(l.h)("div",{class:"text-overflow"},Object(l.h)("small",null,Object(l.h)("i",{class:"fas fa-tachometer-alt"})," ",Object(l.h)(m.c,{id:"workout.calendar.avg-speed"},"Snittfart"))),Object(l.h)("div",{class:"text-overflow font-weight-light",style:"font-size: 1.2em;"},R.gpxInfo&&R.gpxInfo.avgGpsMovingSpeed>0?Object(l.h)(t,null,Object(l.h)(S.a,{stores:this.props.stores,value:3.6*R.gpxInfo.avgGpsMovingSpeed})):Object(l.h)(t,null,Object(l.h)(S.a,{stores:this.props.stores,value:R.speedAvg}))))))),["beta","advanced","normal"].indexOf(Y)>-1&&Object(l.h)("div",{class:""+B},Object(l.h)("div",{class:"container-fluid px-0 mt-1"},Object(l.h)("div",{class:"row"},Object(l.h)(O.a,{stores:this.props.stores,images:pt,id:R.id,dblClick:this.likeWorkout,likeRef:c})))),["beta","advanced","normal"].indexOf(Y)>-1&&Object(l.h)(t,null,R.dogs&&R.dogs.length>0&&Object(l.h)("div",{class:"container-fluid px-0 mt-1"},Object(l.h)("div",{class:"row pt-2"},Object(l.h)(v.a,{stores:this.props.stores,dogs:R.dogs,allDogs:G,onDogClick:this.onDogClick}))),Object(l.h)("div",{class:"mt-2"},Object(l.h)(k.a,{stores:this.props.stores,likes:et,comments:ot,type:"workout",onTeamClick:this.onTeamClick,onUserClick:this.onUserClick}))),["beta","advanced","normal"].indexOf(Y)>-1&&Object(l.h)(t,null,Object(l.h)("div",{class:B+" mb-0 position-relative mt-2"},Object(l.h)("div",{class:"row"},Object(l.h)("div",{class:"col text-center"},Object(l.h)("button",{type:"button",class:"btn btn-sm btn-outline-"+(nt?"primary":"secondary")+" btn-lg btn-block "+(nt?"text-primary":""),onClick:this.likeWorkout},Object(l.h)("i",{class:(nt?"text-primary fas":"far")+" fa-thumbs-up"})," ",Object(l.h)(m.c,{id:"comments.like"},"Lik"))),Object(l.h)("div",{class:"col text-center"},Object(l.h)("button",{type:"button",class:"btn btn-sm btn-outline-secondary btn-lg btn-block","data-id":R.id,onClick:this.toggleAddComment},Object(l.h)("i",{class:"fas fa-comment"})," ",Object(l.h)(m.c,{id:"comments.comment-add"},"Kommentar"))),H?Object(l.h)(t,null,Object(l.h)("div",{class:"col text-center"},Object(l.h)("button",{class:"btn btn-sm btn-outline-secondary btn-lg btn-block text-overflow",onClick:this.shareLink,"data-url":"https://themusher.app/share/workout/"+R.uuidv4,"data-title":"title: "+R.name},Object(l.h)("i",{class:"fas fa-share"})," ",Object(l.h)(m.c,{id:"workout.share"},"Del")))):Object(l.h)(t,null,Object(l.h)("div",{class:"col text-center"},Object(l.h)("a",{class:"btn btn-sm btn-outline-secondary btn-lg btn-block text-overflow",href:"https://themusher.app/share/workout/"+R.uuidv4,target:"_blank",rel:"noreferrer","data-native":!0},Object(l.h)("i",{class:"fas fa-share"})," ",Object(l.h)(m.c,{id:"workout.share"},"Del")))))),Object(l.h)("div",{class:B+" mt-2 mb-3"},s&&Object(l.h)(g.a,{stores:this.props.stores,workout:R,inputRef:function(t){return e.inputRef[R.id]=t},inputRefObject:this.inputRef,col:"12",offset:"0"}),Object(l.h)(f.a,{stores:this.props.stores,workout:R,col:"10",offset:"2",compact:!0})),Ot>0&&Object(l.h)(t,null,Object(l.h)("div",{class:"mt-2"},Object(l.h)(x.a,{stores:this.props.stores,views:Ot,object:R,type:"workout",isTeamAdmin:!0,isAdmin:!1,onTeamClick:this.onTeamClick,onUserClick:this.onUserClick})))))))},r}(l.Component))||c;e.a=E}).call(this,r("hosL").Fragment)},QkTp:function(t,e,r){"use strict";(function(t){var o,n=r("hosL"),s=r("Utv1"),a=r("/eY4"),i=(r("OhSV"),r("ZOvn"),Object(a.a)(o=function(e){function r(){return e.apply(this,arguments)||this}var o,a;return a=e,(o=r).prototype=Object.create(a.prototype),o.prototype.constructor=o,o.__proto__=a,r.prototype.render=function(){var e=this.props,r=e.value,o=void 0===r?0:r,a=this.props.stores.userStore.user.settings;return(void 0===a?{}:a).imperial?Object(n.h)(t,null,Object(n.h)("nobr",null,s.a.format(function(t){return 9*t/5+32}(o),0),"°F")):Object(n.h)(t,null,Object(n.h)("nobr",null,s.a.format(o,1),"°C"))},r}(n.Component))||o);e.a=i}).call(this,r("hosL").Fragment)},UJvz:function(t,e,r){"use strict";var o,n=r("hosL"),s=r("Utv1"),a=r("/eY4"),i=r("OhSV"),c=Object(a.a)(o=function(t){function e(){for(var e,r=arguments.length,o=new Array(r),n=0;n<r;n++)o[n]=arguments[n];return(e=t.call.apply(t,[this].concat(o))||this).toggleDate=function(){e.setState({showDate:!e.state.showDate})},e.touchStart=function(t){t.stopPropagation(),e.setState({startY:t.touches[0].pageY})},e.touchEnd=function(t){t.stopPropagation(),e.setState({startY:void 0,readyToRefresh:!1})},e.touchMove=function(t){t.stopPropagation();var r=e.state;e.appContainer&&(0===e.appContainer.scrollTop&&t.touches[0].pageY>r.startY+30&&!r.refreshing&&(0,e.props.close)())},e}var r,o;return o=t,(r=e).prototype=Object.create(o.prototype),r.prototype.constructor=r,r.__proto__=o,e.prototype.render=function(){var t=this,e=this.state.showDate,r=this.props,o=r.image,a=r.imagexxl,c=r.close,l=r.thumb,u=r.name,d=r.title,h=r.date;return Object(n.h)("div",{class:"fixed-top bg-dark text-center pt-2",style:"width: 100vw; height: 100vh;"},Object(n.h)("button",{class:"btn btn-secondary float-right mr-2",onClick:c},"X"),Object(n.h)("div",{class:"d-flex mb-2 px-2"},l&&Object(n.h)("div",{class:"text-center border rounded-circle imageRounded imageRoundedSmall",style:l?'background-image: url("'+l+'");':""}," "),Object(n.h)("div",{class:"flex-grow-1 pl-3 pr-2 text-left",style:"line-height: 1.3em;"},u&&Object(n.h)("strong",{class:"mr-2"},u,":"),d,Object(n.h)("br",null),Object(n.h)("small",{class:"text-muted"},h&&Object(n.h)("small",{onClick:this.toggleDate},e?s.a.formatDate(h,{locale:"no-NB"}):s.a.formatDistance(h,new Date,{locale:"no-NB"}))))),Object(n.h)("img",{src:o,class:"img-fluid align-middle mt-2 mb-2",onClick:c,onTouchstart:this.touchStart,onTouchend:this.touchEnd,onTouchmove:this.touchMove,ref:function(e){return t.appContainer=e}}),Object(n.h)("a",{target:"_blank",rel:"noopener noreferrer",href:a||o,download:a||o},Object(n.h)("i",{class:"fas fa-download"})," ",Object(n.h)(i.c,{id:"modal.download"},"Last ned bildet")))},e}(n.Component))||o;e.a=c},UwwE:function(t,e,r){"use strict";(function(t){var o,n=r("hosL"),s=r("Utv1"),a=r("/eY4"),i=(r("OhSV"),r("ZOvn"),Object(a.a)(o=function(e){function r(){return e.apply(this,arguments)||this}var o,a;return a=e,(o=r).prototype=Object.create(a.prototype),o.prototype.constructor=o,o.__proto__=a,r.prototype.render=function(){var e=this.props,r=e.value,o=void 0===r?0:r,a=this.props.stores.userStore.user.settings;return(void 0===a?{}:a).imperial?Object(n.h)(t,null,Object(n.h)("nobr",null,s.a.format(function(t){return 2.20462*t}(o),0)," lb")):Object(n.h)(t,null,Object(n.h)("nobr",null,s.a.format(o,0)," kg"))},r}(n.Component))||o);e.a=i}).call(this,r("hosL").Fragment)},ZQlJ:function(t,e,r){"use strict";var o,n=r("hosL"),s=(r("Utv1"),r("/eY4")),a=(r("OhSV"),r("NDEG")),i=Object(s.a)(o=function(t){function e(e){var r;return(r=t.call(this,e)||this).scrollImages=function(t){var e=t.target,o=e.scrollLeft/e.clientWidth,n=Math.round(o),s=Math.abs(n-o);(Number.isInteger(o)||s<.1)&&r.setState({imageIdx:n})},r.sortByName=function(t,e){var o=r.props.allDogs,n=void 0===o?[]:o,s=n.find((function(e){return e.id===t})),a=n.find((function(t){return t.id===e}));return s&&a&&s.name>a.name?1:-1},r.state={imageIdx:0},r}var r,o;return o=t,(r=e).prototype=Object.create(o.prototype),r.prototype.constructor=r,r.__proto__=o,e.prototype.render=function(){var t=this,e=this.props,r=e.dogs,o=e.allDogs,s=void 0===o?[]:o,i=e.size,c=void 0===i?"medium":i,l=e.onDogClick,u=void 0===l?function(){}:l;return Object(n.h)("div",{class:"w-100"},Object(n.h)("div",{class:"d-flex flex-row flex-nowrap",style:"overflow: auto; scroll-snap-type: x mandatory;",onScroll:this.scrollImages},r&&r.sort(this.sortByName).map((function(e){var o=s.find((function(t){return t.id===e}));return o?Object(n.h)("div",{class:"col clearfix position-relative p-0 mx-2"},Object(n.h)("div",{class:"w-100 h-100 text-center rounded-lg imageContainer d-flex justify-content-center align-items-center",style:"\n                                        flex-wrap: wrap;\n                                        overflow-y: hidden;\n                                    ",onTouchstart:function(t){t.stopPropagation()},onTouchend:function(t){t.stopPropagation()},onTouchmove:function(t){t.stopPropagation()}},Object(n.h)(a.a,{stores:t.props.stores,dog:o,dogs:s.filter((function(t){return r.indexOf(t.id)>-1})).sort((function(t,e){return t.name>e.name?1:-1})),className:"mx-auto",showName:!0,showPosition:!1,size:c,onDogClick:u}))):""}))))},e}(n.Component))||o;e.a=i},bUJL:function(t,e,r){"use strict";(function(t){var o,n=r("hosL"),s=r("Utv1"),a=r("/eY4"),i=r("OhSV"),c=r("nHdA"),l=r("irB3"),u=(r("UwwE"),r("8Lgr")),d=(r("QkTp"),Object(a.a)(o=function(e){function r(){for(var t,r=arguments.length,o=new Array(r),n=0;n<r;n++)o[n]=arguments[n];return(t=e.call.apply(e,[this].concat(o))||this).toggleDate=function(e){e.stopPropagation(),e.preventDefault(),t.setState({showDate:!t.state.showDate})},t.ignoreStravaWorkout=function(e){return new Promise((function(r,o){return e.stopPropagation(),Promise.resolve(t.props.stores.stravaActivityStore.ignoreWorkout(e.target.parentElement.dataset.id||e.target.dataset.id)).then((function(){try{return t.loadStravaActivities(),r()}catch(t){return o(t)}}),o)}))},t.importStravaWorkout=function(e){return new Promise((function(r,o){var n;return e.stopPropagation(),n=t.props.stores,Promise.resolve(n.stravaActivityStore.importWorkout(e.target.parentElement.dataset.id||e.target.dataset.id,n.workoutStore.currentTeam)).then((function(){try{return t.loadStravaActivities(),t.loadWorkouts(),r()}catch(t){return o(t)}}),o)}))},t.loadWorkouts=function(){return new Promise((function(e,r){var o;return o=t.props.stores.workoutStore,Promise.resolve(o.load({query:{team:o.currentTeam}})).then((function(){try{return e()}catch(t){return r(t)}}),r)}))},t.toggleDetail=function(){var e=t.state.showDetail;t.setState({showDetail:!(void 0!==e&&e)})},t}var o,a;a=e,(o=r).prototype=Object.create(a.prototype),o.prototype.constructor=o,o.__proto__=a;var d=r.prototype;return d.loadStravaActivities=function(){return new Promise(function(t){return this.props.stores.stravaActivityStore.load({query:{hideImported:1}}),t()}.bind(this))},d.componentDidMount=function(){this.loadStravaActivities()},d.render=function(){var e=this,r=this.state,o=r.showDate,a=r.showDetail,d=void 0!==a&&a,h=this.props,m=h.activities,b=h.showDate,p=this.props.stores,f=p.userStore,g=f.findTeam(p.workoutStore.currentTeam||f.team.id);return d?Object(n.h)(t,null,Object(n.h)("div",{class:"col-12 mb-3"},Object(n.h)("div",{class:"row"},m&&m.length>0&&Object(n.h)("div",{class:"col-12 border-top border-bottom pt-3 pb-3 my-2 bg-light"},Object(n.h)("button",{type:"button",class:"float-right btn btn-sm btn-link",onClick:this.toggleDetail},Object(n.h)("i",{class:"fas fa-caret-up"})," ",Object(n.h)(i.c,{id:"strava.hide-list"},"Hide list")),Object(n.h)("h5",null,Object(n.h)(i.c,{id:"workout.index.strava-workouts"},"Strava workouts / not imported")," ",m.length),m&&m.map((function(r){var a=r.summary;s.a.parseInputDate((void 0===a?{}:a).startTimeInSeconds);return Object(n.h)(t,null,Object(n.h)("div",{class:"col-12 d-flex mb-4 position-relative"},Object(n.h)("div",{class:"text-center border rounded-circle imageRounded",style:'background-image: url("./assets/strava-icon.png"); border-width: 3px !important;'}," "),Object(n.h)("div",{class:"flex-grow-1 pl-3",style:"line-height: 1.2em;"},Object(n.h)("h5",{class:"my-0 mb-1",style:"line-height: 1.0em;"},r.name),r.type,Object(n.h)("br",null),Object(n.h)("small",{class:"text-muted"},r.start_date&&Object(n.h)("small",{onClick:e.toggleDate},b||o?s.a.formatDate(r.start_date,{locale:"no-NB"}):s.a.formatDistance(r.start_date,new Date,{locale:"no-NB"})),Object(n.h)("span",{class:"text-muted"},Object(n.h)("i",{class:"fas fa-road ml-2"})," ",Object(n.h)(u.a,{stores:e.props.stores,value:r.distance/1e3}),Object(n.h)("i",{class:"fas fa-mountain ml-2"})," ",Object(n.h)(l.a,{stores:e.props.stores,value:r.total_elevation_gain}),Object(n.h)("i",{class:"fas fa-tachometer-alt ml-2"})," ",Object(n.h)(c.a,{stores:e.props.stores,value:3.6*r.average_speed}),Object(n.h)("i",{class:"fas fa-stopwatch ml-2"})," ",s.a.secToHms(r.elapsed_time))),Object(n.h)("br",null),Object(n.h)("button",{class:"btn btn-sm btn-block btn-primary",onClick:e.importStravaWorkout,"data-id":r.id},Object(n.h)("i",{class:"fas fa-file-import"})," ",Object(n.h)(i.c,{id:"strava.import"},"Import workout")," ",Object(n.h)("i",{class:"fas fa-arrow-right"})," ",g),Object(n.h)("button",{class:"btn btn-sm btn-link",onClick:e.ignoreStravaWorkout,"data-id":r.id},Object(n.h)("i",{class:"fas fa-trash-alt"})," ",Object(n.h)(i.c,{id:"strava.ignore"},"Ignore workout")))))})),Object(n.h)("button",{type:"button",class:"btn btn-block btn-primary mt-3",onClick:this.toggleDetail},Object(n.h)("i",{class:"fas fa-caret-up"})," ",Object(n.h)(i.c,{id:"strava.hide-list"},"Hide list")))))):m&&m.length>0?Object(n.h)(t,null,Object(n.h)("div",{class:"col-12 mb-3"},Object(n.h)("button",{type:"button",class:"btn btn-block btn-outline-info",onClick:this.toggleDetail},Object(n.h)("div",{class:"float-right ml-2 text-center border rounded-circle imageRounded imageRoundedIcon",style:"background-image: url('./assets/strava-icon.png');"}),Object(n.h)(i.c,{id:"workout.index.strava-workouts"},"Strava workouts / not imported")," ",m.length))):Object(n.h)(t,null)},r}(n.Component))||o);e.a=d}).call(this,r("hosL").Fragment)},fSHa:function(t,e,r){"use strict";r.r(e),function(t){function o(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,o)}return r}function n(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var s,a=r("hosL"),i=(r("Utv1"),r("/eY4")),c=r("OhSV"),l=(r("go65"),r("ZOvn")),u=r("JWe/"),d=r("bUJL"),h=r("4imK"),m=r("pJjI"),b=r("yHBq"),p=l.a.marginTop(!0),f=l.a.marginBottom(),g=l.a.subMenuMarginTop(),O={isLoading:!1,offset:0,limit:5,sessionid:(new Date).getTime()},v=["id","type","user","team","title"],j=Object(i.a)(s=function(e){function r(r){var s;return(s=e.call(this,r)||this).loadWorkouts=function(t){return new Promise((function(e,r){var o,n,a;return o=t.limit,n=t.offset,s.setState({isLoading:!0}),a=s.props.stores.workoutStore,Promise.resolve(a.load({query:{team:a.currentTeam},limit:o,offset:n,addData:["publicTeams","publicUsers"]},n>0)).then((function(){try{return s.setState({isLoading:!1}),e()}catch(t){return r(t)}}),r)}))},s.changeTeam=function(){s.loadWorkouts({limit:s.state.limit,offset:0})},s.setLoadMore=function(){s.props.stores.workoutStore.setLoadMore((function(){var t=s.state,e=t.limit,r=t.offset;s.setState({offset:r+=e}),s.loadWorkouts({limit:e,offset:r})}))},s.unsetLoadMore=function(){s.props.stores.workoutStore.setLoadMore((function(){}))},s.loadDogs=function(){return new Promise((function(t,e){var r;return r=s.props.stores.dogStore,Promise.resolve(r.load({query:{team:r.currentTeam},addData:["workoutSummary"]})).then((function(){try{return t()}catch(t){return e(t)}}),e)}))},s.removeFilterText=function(){s.setState({filterText:""})},s.renderContent=function(e){var r=e.obj;return Object(a.h)(t,null,Object(a.h)(u.a,{stores:s.props.stores,workout:r,showDate:!0,wrapperClasses:"w-100",wrapperClassesRow:""}))},s.setupIntersection=function(){s.setState({handleIntersection:l.a.intersectionObserverCallback});var t=s.props.stores.workoutStore;s.scrollViewTimer=setInterval((function(){return t.postScrollview(l.a.getIntersectionObserverHistory())}),3e4)},s.state=function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?o(Object(r),!0).forEach((function(e){n(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({},O),s}var s,i;i=e,(s=r).prototype=Object.create(i.prototype),s.prototype.constructor=s,s.__proto__=i;var j=r.prototype;return j.loadTracks=function(){return new Promise(function(t,e){return Promise.resolve(this.props.stores.trackStore.load()).then((function(){try{return t()}catch(t){return e(t)}}),e)}.bind(this))},j.loadWorkoutSummary=function(){return new Promise(function(t,e){var r;return r=this.props.stores,Promise.resolve(r.userStore.getWorkoutSummary({team:r.workoutStore.currentTeam})).then((function(){try{return t()}catch(t){return e(t)}}),e)}.bind(this))},j.loadStravaActivities=function(){return new Promise(function(t){return this.props.stores.stravaActivityStore.load({query:{hideImported:1}}),t()}.bind(this))},j.loadGarminActivities=function(){return new Promise(function(t){return this.props.stores.garminActivityDetailsStore.load({query:{hideImported:1}}),t()}.bind(this))},j.componentWillMount=function(){this.setupIntersection()},j.componentWillUnmount=function(){var t=this.props.stores;t.workoutStore.postScrollview(l.a.getIntersectionObserverHistory()),clearInterval(this.scrollViewTimer),this.unsetLoadMore()},j.componentDidMount=function(){this.loadWorkouts({limit:this.state.limit,offset:0}),this.loadDogs(),this.loadStravaActivities(),this.loadGarminActivities(),this.setLoadMore()},j.render=function(){var e=this.props.scrolledDown,r=this.state,o=r.isLoading,n=r.filterText,s=r.handleIntersection,i=r.sessionid,l=this.props.stores,u=l.trackStore,O=l.workoutStore,j=l.dogStore,y=l.stravaActivityStore,w=l.garminActivityDetailsStore,k=l.userStore,x=l.appState.darkmode,S=this.props.message,D=O.workouts,C=O.currentTeam,P=k.findTeam(C,!0),I=function(){return!0};n&&(I=function(t){return t.name.match(new RegExp(n,"i"))});var T=D.filter(I),L=u.tracks,_=j.dogs,E=k.user,R=y.stravaActivities,A=void 0===R?[]:R,U=w.garminActivityDetails,B=void 0===U?[]:U;return Object(a.h)("div",{class:"container-fluid",style:"margin-bottom: "+f+"; margin-top: "+p+";"},Object(a.h)("div",{class:"row fixed-top",style:"margin-top: "+(e>0?0:g)+"; background-color: "+(x?"#191d21":"#f8f9fa")+"; transition: all 0.3s ease-in-out;"},Object(a.h)("div",{class:"col text-center subtopmenu"},Object(a.h)("a",{href:"/workouts/",class:"text-secondary stretched-link"},Object(a.h)("nobr",null,Object(a.h)("i",{class:"fas fa-chart-line"})," ",Object(a.h)(c.c,{id:"workout.index.dashboard"},"Oversikt")))),Object(a.h)("div",{class:"col text-center border-bottom border-primary subtopmenu"},Object(a.h)("a",{href:"/workouts/list",class:"text-primary stretched-link"},Object(a.h)("nobr",null,Object(a.h)("i",{class:"fas fa-list"})," ",Object(a.h)(c.c,{id:"workout.index.list"},"Liste")))),Object(a.h)("div",{class:"col text-center subtopmenu"},Object(a.h)("a",{href:"/workouts/plan",class:"text-secondary stretched-link"},Object(a.h)("nobr",null,Object(a.h)("i",{class:"fas fa-calendar-alt"})," ",Object(a.h)(c.c,{id:"workout.index.plan"},"Plan"))))),S&&Object(a.h)("div",{class:"alert alert-success mb-3",role:"alert"},Object(a.h)("i",{class:"fas fa-check"})," ",S),Object(a.h)("div",{class:"row"},Object(a.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 border-bottom"},Object(a.h)(m.a,{stores:this.props.stores,callback:this.changeTeam,key:"teams-"+C})),Object(a.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-2 mb-2"},Object(a.h)("a",{class:"btn btn-primary btn-sm float-right",href:"/workouts/edit/new"},Object(a.h)("i",{class:"fas fa-plus"})," ",Object(a.h)(c.c,{id:"workout.index.add-workout"},"Legg til treningstur"))),Object(a.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mb-3"},Object(a.h)("div",{class:"row mt-3"},E&&E.strava&&Object(a.h)(t,null,Object(a.h)(d.a,{stores:this.props.stores,activities:A,key:"strava-"+C+"-"+A.length})),E&&E.garmin&&Object(a.h)(t,null,Object(a.h)(h.a,{stores:this.props.stores,activities:B,key:"garmin-"+C+"-"+B.length})))),Object(a.h)("div",{class:"col-12"},Object(a.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 px-0"},Object(a.h)("h5",null,P&&P.name&&Object(a.h)("div",null,Object(a.h)("small",{class:"font-weight-lighter"},"(",Object(a.h)(c.c,{id:"workout.index.filtered-by"},"Filtered by"),": ",P.name,")")))),!o&&D&&0===D.length&&Object(a.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 text-muted"},_&&0===_.length&&Object(a.h)("div",{class:"mb-5 py-3 text-center border-top border-bottom"},Object(a.h)("div",{class:"display-4"},Object(a.h)("i",{class:"fas fa-dog"})),Object(a.h)("h5",null,Object(a.h)(c.c,{id:"workouts.no-dogs"},"Ingen hunder er registert.")),Object(a.h)(c.c,{id:"workouts.no-dogs-tip"},"Det er lurt å legge inn hunder før du registrerer en treningstur."),Object(a.h)("br",null),Object(a.h)("a",{class:"btn btn-info mt-3",href:"/dogs/edit/new"},Object(a.h)("i",{class:"fas fa-dog"})," ",Object(a.h)(c.c,{id:"workouts.add-dog"},"Legg til hund"))),L&&0===L.length&&Object(a.h)("div",{class:"mb-5 py-3 text-center border-top border-bottom"},Object(a.h)("div",{class:"display-4"},Object(a.h)("i",{class:"fas fa-map-marked"})),Object(a.h)("h5",null,Object(a.h)(c.c,{id:"workouts.no-tracks"},"Ingen runder er registert.")),Object(a.h)(c.c,{id:"workouts.no-tracks-tip-1"},"Det er lurt å legge inn runden før du registrerer en treningstur. Da får du automatisk fylt ut distanse og høydemeter."),Object(a.h)("br",null),Object(a.h)(c.c,{id:"workouts.no-tracks-tip-2"},"Dersom du ikke har GPX-filen fra denne runden, så kan du likevel registrere treningen."),Object(a.h)("br",null),Object(a.h)("a",{class:"btn btn-info mt-3",href:"/tracks/edit/new"},Object(a.h)("i",{class:"fas fa-map-marked"})," ",Object(a.h)(c.c,{id:"workouts.add-track"},"Legg til runde"))),Object(a.h)("div",{class:"text-center mb-5"},Object(a.h)("div",{class:"display-1"},Object(a.h)("i",{class:"fas fa-running"})),Object(a.h)("h5",null,Object(a.h)(c.c,{id:"workouts.no-workouts"},"Ingen treningsturer er registrert ennå."))),Object(a.h)("p",{class:"text-center"},Object(a.h)("p",null,Object(a.h)(c.c,{id:"workouts.no-workouts-1"},"Tracking i appen er ikke helt klart ennå pga noen tekniske begrensninger i Apple iOS.")),Object(a.h)("p",null,Object(a.h)(c.c,{id:"workouts.no-workouts-2"},"Når jeg får tak i en Android telefon skal jeg får satt opp denne funksjonen slik at den kan brukes der."))),Object(a.h)("p",{class:"text-center"},Object(a.h)(c.c,{id:"workouts.no-workouts-3"},"Kart over ruten du har kjørt legges inn som GPX under runder.")),Object(a.h)(c.c,{id:"workouts.no-workouts-howto"},"Slik kommer du i gang"),":",Object(a.h)("ol",null,Object(a.h)("li",null,Object(a.h)(c.c,{id:"workouts.no-workouts-howto-1"},'Trykk på knappen "Legg til treningstur" oppe til høyre.')))),Object(a.h)(b.a,{data:T,wrapperClassNames:"row pb-4",contentClassNames:"col-12 col-sm-8 col-lg-6 offset-sm-2 offset-lg-3 my-1 position-relative rounded rounded-lg py-3 bg-"+(x?"black":"white")+" shadow-sm",renderContent:this.renderContent,dataFields:v,dataValues:{type:"11"},handleIntersection:s,sessionid:i}))))},r}(a.Component))||s;e.default=j}.call(this,r("hosL").Fragment)},irB3:function(t,e,r){"use strict";(function(t){var o,n=r("hosL"),s=r("Utv1"),a=r("/eY4"),i=(r("OhSV"),r("ZOvn"),Object(a.a)(o=function(e){function r(){return e.apply(this,arguments)||this}var o,a;return a=e,(o=r).prototype=Object.create(a.prototype),o.prototype.constructor=o,o.__proto__=a,r.prototype.render=function(){var e=this.props,r=e.value,o=void 0===r?0:r,a=e.smallUnit,i=this.props.stores.userStore.user.settings;return(void 0===i?{}:i).imperial?Object(n.h)(t,null,Object(n.h)("nobr",null,s.a.format(function(t){return 3.28084*t}(o),0)," ",a?Object(n.h)(t,null,Object(n.h)("small",null,Object(n.h)("small",null,Object(n.h)("small",{class:"ml-0 text-muted"},"ft")))):Object(n.h)(t,null,"ft"))):Object(n.h)(t,null,Object(n.h)("nobr",null,s.a.format(o,0)," ",a?Object(n.h)(t,null,Object(n.h)("small",null,Object(n.h)("small",null,Object(n.h)("small",{class:"ml-0 text-muted"},"m")))):Object(n.h)(t,null,"m")))},r}(n.Component))||o);e.a=i}).call(this,r("hosL").Fragment)},nHdA:function(t,e,r){"use strict";(function(t){var o,n=r("hosL"),s=r("Utv1"),a=r("/eY4"),i=r("OhSV"),c=(r("ZOvn"),Object(a.a)(o=function(e){function r(){return e.apply(this,arguments)||this}var o,a;return a=e,(o=r).prototype=Object.create(a.prototype),o.prototype.constructor=o,o.__proto__=a,r.prototype.render=function(){var e=this.props,r=e.value,o=void 0===r?0:r,a=e.smallUnit,c=this.props.stores.userStore.user.settings;return(void 0===c?{}:c).imperial?Object(n.h)(t,null,Object(n.h)("nobr",null,s.a.format(function(t){return.621371*t}(o),1)," ",a?Object(n.h)(t,null,Object(n.h)("small",null,Object(n.h)("small",null,Object(n.h)("small",{class:"ml-0 text-muted"},Object(n.h)(i.c,{id:"workouts.mph"},"mph"))))):Object(n.h)(t,null,Object(n.h)(i.c,{id:"workouts.mph"},"mph")))):Object(n.h)(t,null,Object(n.h)("nobr",null,s.a.format(o,1)," ",a?Object(n.h)(t,null,Object(n.h)("small",null,Object(n.h)("small",null,Object(n.h)("small",{class:"ml-0 text-muted"},Object(n.h)(i.c,{id:"workouts.kmt"},"km/t"))))):Object(n.h)(t,null,Object(n.h)(i.c,{id:"workouts.kmt"},"km/t"))))},r}(n.Component))||o);e.a=c}).call(this,r("hosL").Fragment)},om2D:function(t,e,r){"use strict";var o,n=r("hosL"),s=r("/eY4"),a=(r("cneo"),r("Utv1"),r("u2zT")),i=Object(s.a)(o=function(t){function e(e){var r;return(r=t.call(this,e)||this).handleAddImage=function(t){var e=r.props.addToImages,o=void 0===e||e,n=r.props,s=n.updateField,a=n.object,i=n.field;if(i&&s({id:a.id,field:i,value:t,skipTimer:!0}),o){var c=[];c.push(t),s({id:a.id,field:"images",value:c,skipTimer:!0})}},r.state={files:[]},r}var r,o;return o=t,(r=e).prototype=Object.create(o.prototype),r.prototype.constructor=r,r.__proto__=o,e.prototype.render=function(){var t=this.props,e=t.uploadStatus,r=void 0===e?function(){}:e,o=t.before,s=void 0===o?function(){}:o,i=t.after,c=void 0===i?function(){}:i,l=t.autoOpen,u=void 0===l||l;return Object(n.h)("div",{class:"row"},Object(n.h)("div",{class:"col-12"},Object(n.h)(a.a,{handleAddImage:this.handleAddImage,uploadStatus:r,apiUrl:"/api/fileupload",before:s,after:c,autoOpen:u},Object(n.h)("div",{style:{height:30,width:"100%"}}))))},e}(n.Component))||o;e.a=i},pJjI:function(t,e,r){"use strict";(function(t){var o,n=r("hosL"),s=r("Utv1"),a=r("/eY4"),i=r("OhSV"),c=(r("/DnB"),Object(a.a)(o=function(e){function r(){for(var t,r=arguments.length,o=new Array(r),n=0;n<r;n++)o[n]=arguments[n];return(t=e.call.apply(e,[this].concat(o))||this).toggleTeam=function(e){var r=t.props,o=r.callback,n=r.unsetTeamIfSelected,a=t.props.stores,i=a.dogStore,c=a.workoutStore;(void 0===n||n)&&e===i.currentTeam?(i.setCurrentTeam(void 0),c.setCurrentTeam(void 0)):(i.setCurrentTeam(e),c.setCurrentTeam(e)),s.a.isDefined(o)&&o()},t.showAllTeams=function(){var e=t.props.callback,r=t.props.stores,o=r.workoutStore;r.dogStore.setCurrentTeam(void 0),o.setCurrentTeam(void 0),s.a.isDefined(e)&&e()},t}var o,a;return a=e,(o=r).prototype=Object.create(a.prototype),o.prototype.constructor=o,o.__proto__=a,r.prototype.render=function(){var e=this,r=this.props.stores,o=r.userStore.teams,s=r.dogStore.currentTeam,a=this.props,c=a.highlight,l=a.showAll,u=void 0===l||l;return Object(n.h)("div",{class:"row mt-2"},Object(n.h)("div",{class:"w-100 overflow-hidden"},Object(n.h)("div",{class:"d-flex flex-row flex-nowrap pb-2 px-1",style:"overflow: auto; scroll-snap-type: x mandatory;"},o&&o.map((function(r,a){return Object(n.h)("div",{class:"col mb-0 px-0 clearfix",key:r.id},Object(n.h)("button",{class:"btn btn-sm btn-block \n\t\t\t\t\t\t\t\t\t\trounded-none "+(0===a?"rounded-pill-left":a+1===o.length?"rounded-pill-right":"")+"\n\t\t\t\t\t\t\t\t\t\t"+(s===r.id?"btn-success":"btn-outline-success")+"\n\t\t\t\t\t\t\t\t\t\ttext-nowrap clearfix",style:"text-overflow: ellipsis; overflow: hidden;",onClick:function(){return e.toggleTeam(r.id)}},Object(n.h)("i",{class:"fas fa-users"})," ",r.name,c&&c.indexOf(r.id)>-1&&Object(n.h)(t,null,s===r.id?Object(n.h)(t,null,Object(n.h)("i",{class:"fas fa-check float-right"})):Object(n.h)(t,null,Object(n.h)("div",{class:"spinner-grow text-warning float-right",role:"status"},Object(n.h)("span",{class:"sr-only"},"Loading...")),Object(n.h)("i",{class:"far fa-hand-point-left float-right",style:"font-size: 2.0em;"})))))}))),u&&Object(n.h)("div",{class:"row"},Object(n.h)("div",{class:"col-12 mb-1 px-1 d-flex justify-content-center"},Object(n.h)("button",{class:"btn btn-sm rounded-lg btn-link text-nowrap clearfix",style:"text-overflow: ellipsis; overflow: hidden;",onClick:this.showAllTeams},Object(n.h)("i",{class:"fas fa-users"})," ",Object(n.h)(i.c,{id:"teams.show-all"},"Show all"))))))},r}(n.Component))||o);e.a=c}).call(this,r("hosL").Fragment)},sqi2:function(t,e,r){"use strict";(function(t){function o(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,o)}return r}function n(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var s,a=r("hosL"),i=r("Utv1"),c=r("/eY4"),l=r("cneo"),u=r("OhSV"),d=r("fh8t"),h=r.n(d),m=r("3wGD"),b=(r("ETxl"),r("ZOvn")),p={showAddComment:{},showAllComments:!1,showAllReplies:{},viewImageIdx:{}},f=Object(c.a)(s=function(e){function r(t){var r;return(r=e.call(this,t)||this).likeComment=function(t){return new Promise((function(e,o){var n,s,a,i,c;return s=void 0===(n=r.props.callback)?function(){}:n,a=t.target.parentElement.dataset.id||t.target.dataset.id,i=r.props.workout,Promise.resolve(r.props.stores.workoutStore.likeWorkoutComment({id:i.id,commentId:a})).then((function(t){try{return(c=t)&&200===c.status&&s({type:"likeComment",workout:i,commentId:a,response:c}),e(!0)}catch(t){return o(t)}}),o)}))},r.likeReply=function(t){return new Promise((function(e,o){var n,s,a,i,c,l;return s=void 0===(n=r.props.callback)?function(){}:n,a=t.target.parentElement.dataset.id||t.target.dataset.id,i=t.target.parentElement.dataset.comment||t.target.dataset.comment,c=r.props.workout,Promise.resolve(r.props.stores.workoutStore.likeWorkoutCommentReply({id:c.id,replyId:a,commentId:i})).then((function(t){try{return(l=t)&&200===l.status&&s({type:"likeReply",workout:c,commentId:i,replyId:a,response:l}),e()}catch(t){return o(t)}}),o)}))},r.replyComment=function(t){return new Promise((function(e){var o=t.target.parentElement.dataset.id||t.target.dataset.id,n=r.state.showAddComment;return n[o]=!n[o],r.setState({showAddComment:n},(function(){r.inputRef[o]&&r.inputRef[o].focus()})),e()}))},r.toggleComments=function(){r.setState({showAllComments:!r.state.showAllComments})},r.toggleReplies=function(t){var e=t.target.parentElement.dataset.id||t.target.dataset.id,o=r.state.showAllReplies;o[e]=!o[e],r.setState({showAllReplies:o})},r.viewImage=function(t){var e=t.target.closest("img").dataset,o=r.state.viewImageIdx;o[e.id]=e.idx,r.setState({viewImageIdx:o})},r.translate=function(t){return new Promise((function(e,o){function n(){return r.setState({showOriginal:b,translatedText:f}),e()}var s,a,i,c,l,u,d,h,m,b,p,f,g;return t.preventDefault(),t.stopPropagation(),s=t.target.closest("button").dataset,c=r.props.workout,u=(l=r.props.stores).teamStore,d=l.userStore.user,f=void 0===(p=(h=r.state).translatedText)?{}:p,(b=void 0===(m=h.showOriginal)?{}:m)[g=(i=s.commentid)+((a=s.replyid)?"-"+a:"")]=0,a?Promise.resolve(u.translateCommentReply({commentid:i,replyid:a,object:c,user:d})).then(function(t){try{return f[g]=t,n.call(this)}catch(t){return o(t)}}.bind(this),o):Promise.resolve(u.translateComment({commentid:i,object:c,user:d})).then(function(t){try{return f[g]=t,n.call(this)}catch(t){return o(t)}}.bind(this),o)}))},r.showOriginal=function(t){var e=t.target.closest("button").dataset,o=e.replyid,n=e.commentid;t.preventDefault(),t.stopPropagation();var s=r.state.showOriginal,a=void 0===s?{}:s;a[n+(o?"-"+o:"")]=1,r.setState({showOriginal:a})},r.state=function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?o(Object(r),!0).forEach((function(e){n(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({},p),r.inputRef={},r}var s,c;return c=e,(s=r).prototype=Object.create(c.prototype),s.prototype.constructor=s,s.__proto__=c,r.prototype.render=function(){var e,r=this,o=this.state,n=o.showAddComment,s=o.showAllComments,c=o.showAllReplies,d=o.viewImageIdx,p=o.showOriginal,f=void 0===p?{}:p,g=o.translatedText,O=void 0===g?{}:g,v=this.props,j=v.workout,y=v.callback,w=void 0===y?function(){}:y,k=v.compact,x=this.props.stores,S=x.userStore,D=x.teamStore,C=S.user,P=S.isAdmin,I=C.language,T=void 0===I?"en":I,L=[],_=0,E=0;return j.comments&&(_=j.comments.length,s?L=j.comments:(e=void 0!==k&&k?0:1,L=j.comments.slice(Math.max(_-e,0))),E=L.length),Object(a.h)("div",null,j&&L&&L.reverse().map((function(o){var s=o.user,p=void 0===s?{}:s,g=D.findPublicTeamByMembers(p.id),v=b.a.displayNameShort(p),y=b.a.displayName(p),k=p.image||(p.images?p.images[0]:void 0),x=o.likes&&o.likes.findIndex((function(t){return t.user===C.id}))>-1,S=[],I=0,L=0;o.comments&&(I=o.comments.length,L=(S=c[o.id]?o.comments:o.comments.slice(0,e)).length);var _=[];if(o.images){var E=Object(l.i)(o.images);_.push.apply(_,E)}var R=d[o.id]?d[o.id]:0,A=_&&_[R]?_[R]:null,U=o.currentLocationGeocode,B=void 0===U?{}:U,M=D.getCommentTranslations({object:j,commentid:o.id,targetLang:T})||O[o.id],F=M||o.comment;return f[o.id]&&(F=o.comment),Object(a.h)("div",{class:"row"},Object(a.h)("div",{class:"col-12 d-flex mb-2 position-relative"},Object(a.h)("div",{class:"text-center border rounded-circle imageRounded imageRoundedSmall",style:(k?'background-image: url("'+k.s3SmallLink+'"); background-size: cover;':"")+" border-width: 3px !important;"},!p.image&&Object(a.h)("span",{class:"font-weight-lighter",style:"font-size: 15px;"},v)),Object(a.h)("div",{class:"flex-grow-1 pl-3 pt-0",style:"line-height: 1.2em;"},Object(a.h)("div",{class:"bg-light p-2 rounded rounded-lg"},Object(a.h)("div",null,Object(a.h)("span",{style:"font-size: 0.95em;"},Object(a.h)("h5",{class:"font-weight-bold mb-0",style:"font-size: 1.0em;"},y),g&&g.length>0&&Object(a.h)("div",{class:"mb-2"},Object(a.h)("small",{class:"font-weight-lighter text-muted"},g.filter((function(t){return 1===t.public})).slice(0,2).map((function(e){return Object(a.h)(t,null,Object(a.h)("a",{href:"/teams/public/"+e.uuidv4,class:"mr-2"},Object(a.h)("i",{class:"fas fa-users text-muted"})," ",e.name))})))),Object(a.h)(h.a,{markdown:b.a.replaceImages(F,o.images,T),markdownOpts:b.a.getMarkdownOptions()}))),Object(a.h)("div",{class:"container-fluid px-3 mt-1"},A&&Object(a.h)("div",{class:"clearfix row"},Object(a.h)("div",{class:"col-12 px-0 overflow-hidden",style:"max-height: 30vh;"},Object(a.h)("img",{loading:"lazy",class:"img-fluid",style:"min-width: 100px;",src:A.s3LargeLink}))),_&&_.length>1&&Object(a.h)("div",{class:"clearfix d-flex flex-wrap row"},_.map((function(e,n){return Object(a.h)(t,null,Object(a.h)("div",{class:"col px-0 overflow-hidden",style:"max-height: 100px; min-width: 100px;"},Object(a.h)("img",{loading:"lazy",class:"img-fluid border",style:"min-width: 100px;",src:e.s3SmallLink,onClick:r.viewImage,"data-id":o.id,"data-idx":n})))}))))),Object(a.h)("small",null,Object(a.h)("button",{class:"btn btn-sm btn-link py-0 "+(x?"text-primary":""),onClick:r.likeComment,"data-id":o.id},Object(a.h)(u.c,{id:"comments.like"},"Lik")),"-",Object(a.h)("button",{class:"btn btn-sm btn-link py-0",onClick:r.replyComment,"data-id":o.id},Object(a.h)(u.c,{id:"comments.comment-add"},"Kommentar")),o.language!==T&&Object(a.h)(t,null,"-",!f[o.id]&&M?Object(a.h)(t,null,Object(a.h)("button",{type:"button",class:"btn btn-sm btn-link","data-commentid":o.id,onClick:r.showOriginal},Object(a.h)("i",{class:"fas fa-cog"}),"  ",Object(a.h)(u.c,{id:"home.translate-show-original"},"Show original"))):Object(a.h)(t,null,Object(a.h)("button",{type:"button",class:"btn btn-sm btn-link",onClick:r.translate,"data-commentid":o.id},Object(a.h)("i",{class:"fas fa-cog"})," ",Object(a.h)(u.c,{id:"home.translate-to"},"See translation")))),"-",Object(a.h)("button",{class:"btn btn-sm btn-link py-0 disabled"},i.a.formatDistance(o.createdDate,new Date,{locale:"no-NB"}),o.updatedDate&&Object(a.h)(t,null,Object(a.h)("span",{class:"font-weight-light ml-2"},"(Edited ",i.a.formatDistance(o.updatedDate,new Date,{locale:"no-NB"}),")"))),P&&B&&B.formatted_address&&Object(a.h)(t,null,Object(a.h)("span",{class:"ml-2 text-muted"},Object(a.h)("i",{class:"fas fa-map-marker-alt"})," ",B.formatted_address)))),o.likes&&o.likes.length>0&&Object(a.h)("small",{class:"position-absolute bg-light shadow-sm rounded-lg py-0 px-1",style:"bottom: 20px; right: 15px;"},Object(a.h)("i",{class:"fas fa-thumbs-up text-primary"})," ",o.likes.length)),Object(a.h)("div",{class:"col-11 offset-1 mb-2"},o&&S&&S.map((function(e){var n=e.user,s=void 0===n?{}:n,c=D.findPublicTeamByMembers(s.id),l=s.firstname?""+i.a.ucfirst(s.firstname,!0)+i.a.ucfirst(s.lastname,!0):""+i.a.ucfirst(s.email||"",!0),d=s.firstname?s.firstname+" "+s.lastname:""+s.email,m=s.image||(s.images?s.images[0]:void 0),p=e.likes&&e.likes.findIndex((function(t){return t.user===C.id}))>-1,g=D.getCommentReplyTranslations({object:j,commentid:o.id,replyid:e.id,targetLang:T})||O[o.id+"-"+e.id],v=g||e.comment;return f[o.id+"-"+e.id]&&(v=e.comment),Object(a.h)("div",{class:"row"},Object(a.h)("div",{class:"col-12 d-flex mb-2 position-relative"},Object(a.h)("div",{class:"text-center border rounded-circle imageRounded imageRoundedThumb",style:(m?'background-image: url("'+m.s3SmallLink+'"); background-size: cover;':"")+" border-width: 3px !important;"},!s.image&&Object(a.h)("span",{class:"font-weight-lighter",style:"font-size: 15px;"},l)),Object(a.h)("div",{class:"flex-grow-1 pl-3 pt-0",style:"line-height: 1.2em;"},Object(a.h)("div",{class:"bg-light p-2 rounded-lg"},Object(a.h)("span",{style:"font-size: 0.95em;"},Object(a.h)("h5",{class:"font-weight-bold mb-0",style:"font-size: 1.0em;"},d),c&&c.length>0&&Object(a.h)("div",{class:"mb-2"},Object(a.h)("small",{class:"font-weight-lighter text-muted"},c.filter((function(t){return 1===t.public})).slice(0,2).map((function(e){return Object(a.h)(t,null,Object(a.h)("a",{href:"/teams/public/"+e.uuidv4,class:"mr-2"},Object(a.h)("i",{class:"fas fa-users text-muted"})," ",e.name))})))),Object(a.h)(h.a,{markdown:b.a.replaceImages(v,e.images,T),markdownOpts:b.a.getMarkdownOptions()}))),Object(a.h)("small",null,Object(a.h)("button",{class:"btn btn-sm btn-link py-0 "+(p?"text-primary":""),onClick:r.likeReply,"data-comment":o.id,"data-id":e.id},Object(a.h)(u.c,{id:"comments.like"},"Lik")),"-",Object(a.h)("button",{class:"btn btn-sm btn-link py-0",onClick:r.replyComment,"data-id":o.id},Object(a.h)(u.c,{id:"comments.comment-add"},"Kommentar")),e.language!==T&&Object(a.h)(t,null,"-",!f[o.id+"-"+e.id]&&g?Object(a.h)(t,null,Object(a.h)("button",{type:"button",class:"btn btn-sm btn-link","data-commentid":o.id,"data-replyid":e.id,onClick:r.showOriginal},Object(a.h)("i",{class:"fas fa-cog"}),"  ",Object(a.h)(u.c,{id:"home.translate-show-original"},"Show original"))):Object(a.h)(t,null,Object(a.h)("button",{type:"button",class:"btn btn-sm btn-link",onClick:r.translate,"data-commentid":o.id,"data-replyid":e.id},Object(a.h)("i",{class:"fas fa-cog"})," ",Object(a.h)(u.c,{id:"home.translate-to"},"See translation")))),"-",Object(a.h)("button",{class:"btn btn-sm btn-link py-0 disabled"},i.a.formatDistance(e.createdDate,new Date,{locale:"no-NB"})))),e.likes&&Object(a.h)("small",{class:"position-absolute bg-light shadow-sm rounded-lg py-0 px-1",style:"bottom: 20px; right: 15px;"},Object(a.h)("i",{class:"fas fa-thumbs-up text-primary"})," ",e.likes.length)))})),I-L>0&&Object(a.h)("div",null,Object(a.h)("button",{class:"btn btn-sm btn-link py-0",onClick:r.toggleReplies,"data-id":o.id},Object(a.h)(u.c,{id:"comments.show-more",fields:{more:I-L}},"Vis ",I-L," flere kommentarer...")))),n[o.id]&&Object(a.h)("div",{class:"col-11 offset-1 d-flex mb-2 position-relative"},Object(a.h)(m.a,{stores:r.props.stores,workout:j,callback:w,commentId:o.id,inputRef:function(t){return r.inputRef[o.id]=t},inputRefObject:r.inputRef})))})),_-E>0&&Object(a.h)("div",null,Object(a.h)("button",{class:"btn btn-sm btn-link py-0",onClick:this.toggleComments},Object(a.h)(u.c,{id:"comments.show-more",fields:{more:_-E}},"Vis ",_-E," flere kommentarer..."))),s&&Object(a.h)("div",null,Object(a.h)("button",{class:"btn btn-sm btn-link py-0",onClick:this.toggleComments},Object(a.h)(u.c,{id:"comments.hide-all-comments"},"Skjul alle kommentarene."))))},r}(a.Component))||s;e.a=f}).call(this,r("hosL").Fragment)},u2zT:function(t,e,r){"use strict";var o,n=r("hosL"),s=r("/eY4"),a=r("Utv1"),i=r("OhSV"),c=Object(s.a)(o=function(t){function e(e){var r;return(r=t.call(this,e)||this).dropRef=Object(n.createRef)(),r.handleDrag=function(t){t.preventDefault(),t.stopPropagation()},r.handleDragIn=function(t){t.preventDefault(),t.stopPropagation(),r.dragCounter++,t.dataTransfer.items&&t.dataTransfer.items.length>0&&r.setState({drag:!0})},r.handleDragOut=function(t){t.preventDefault(),t.stopPropagation(),r.dragCounter--,0===r.dragCounter&&r.setState({drag:!1})},r.handleDrop=function(t){if(t.preventDefault(),t.stopPropagation(),r.setState({drag:!1}),t.dataTransfer.files&&t.dataTransfer.files.length>0){for(var e=0,o=t.dataTransfer.files.length;e<o;e+=1){r.readLocalFile(t.dataTransfer.files[e])}r.dragCounter=0}},r.handleAddFiles=function(t){t.preventDefault();var e=t.target;for(var o=0,n=e.files.length;o<n;o+=1){r.readLocalFile(e.files[o])}},r.handleEvent=function(){0},r.handleUpload=function(t){var e=r.props,o=e.uploadStatus,n=e.before,s=void 0===n?function(){}:n,i=e.after,c=void 0===i?function(){}:i;(void 0===o?function(){}:o)(!1),a.a.isFunction(s)&&s();var l=new FormData;l.append("files[]",t);var u={progress:1};u.xhr=new XMLHttpRequest,u.xhr.upload.addEventListener("progress",(function(e){r.updateProgress(e,t)})),u.xhr.addEventListener("loadstart",(function(e){r.handleEvent(e,t)})),u.xhr.addEventListener("load",(function(e){r.handleEvent(e,t)})),u.xhr.addEventListener("loadend",(function(e){var o=t;a.a.isFunction(c)&&c(),r.handleEvent(e,o)})),u.xhr.addEventListener("progress",(function(e){r.handleEvent(e,t)})),u.xhr.addEventListener("error",(function(e){r.handleEvent(e,t)})),u.xhr.addEventListener("abort",(function(e){r.handleEvent(e,t)})),u.xhr.addEventListener("readystatechange",(function(e){r.uploadDone(e,t)})),u.xhr.open("POST",""+a.a.getApiServer()+r.props.apiUrl),u.xhr.setRequestHeader("Authorization","Bearer "+a.a.getJwtToken()),u.xhr.send(l);var d=t.name,h=r.state.uploadedFilesData;h[d]||(h[d]={}),h[d].uploadMeta=u,h[d].imageNum=r.state.imageNum,r.setState({uploadedFilesData:h})},r.readLocalFile=function(t){return new Promise((function(e,o){var n=new FileReader;n.addEventListener("error",(function(t){o(t)})),n.addEventListener("load",(function(o){var n=t,s=n.name,a=r.state.uploadedFilesData;a[s]||(a[s]={}),a[s].event=o,r.setState({uploadedFilesData:a}),r.handleUpload(n),e(o)})),n.readAsDataURL(t)}))},r.updateProgress=function(t,e){if(t.lengthComputable){var o=e.name,n=r.state.uploadedFilesData,s=t.loaded/t.total*100;0,n[o].uploadMeta.progress=s,r.setState({uploadedFilesData:n})}},r.uploadDone=function(t,e){var o=e.name,n=r.state.uploadedFilesData,s=n[o].uploadMeta;if(s&&4===s.xhr.readyState&&201===s.xhr.status)for(var a=JSON.parse(s.xhr.responseText).data.files,i=0;i<a.length;i+=1){r.addFileToUpload(a[i]),r.fileInput.value=""}},r.state={drag:!1,loadingProgress:0,uploadedFiles:[],uploadedFilesData:{}},r}var r,o;o=t,(r=e).prototype=Object.create(o.prototype),r.prototype.constructor=r,r.__proto__=o;var s=e.prototype;return s.addFileToUpload=function(t){var e=this.state.uploadedFilesData,r=this.props,o=r.handleAddImage,n=r.uploadStatus,s=void 0===n?function(){}:n;delete e[t.name],this.setState({uploadedFilesData:e}),o(t),s(!0)},s.componentDidMount=function(){var t=this,e=this.dropRef.current;e.addEventListener("dragenter",this.handleDragIn),e.addEventListener("dragleave",this.handleDragOut),e.addEventListener("dragover",this.handleDrag),e.addEventListener("drop",this.handleDrop),this.props.autoOpen&&setTimeout((function(){t.fileInput.click()}),10)},s.componentWillUnmount=function(){var t=this.dropRef.current;t.removeEventListener("dragenter",this.handleDragIn),t.removeEventListener("dragleave",this.handleDragOut),t.removeEventListener("dragover",this.handleDrag),t.removeEventListener("drop",this.handleDrop)},s.render=function(){var t=this,e=this.state.uploadedFilesData;return Object(n.h)("div",{style:{position:"relative"},ref:this.dropRef},this.state.drag&&Object(n.h)("div",{style:{border:"dashed grey 4px",backgroundColor:"rgba(255,255,255,.8)",position:"absolute",top:0,bottom:0,left:0,right:0,zIndex:9999}},Object(n.h)("div",{style:{position:"absolute",top:"50%",right:0,left:0,textAlign:"center",color:"grey",fontSize:36}},Object(n.h)("div",null,Object(n.h)(i.c,{id:"imageupload.drag-files-here"},"drop your files here :)")))),Object(n.h)("div",null,Object(n.h)("input",{class:"btn btn-info col-sm-12",multiple:!0,type:"file",id:"image-file",onchange:this.handleAddFiles,ref:function(e){t.fileInput=e}})),Object(n.h)("div",null,Object.keys(e).length>0?Object(n.h)("h3",null,Object(n.h)(i.c,{id:"imageupload.upload-images"},"Uploaded images")):"",Object(n.h)("ul",{class:"list-group"},Object.keys(e).map((function(t){var r=e[t].uploadMeta,o=void 0===r?{}:r,s=t.match(/(jpg|jpeg|png|gif|heic|heif|svg|webp|tif)/i);return Object(n.h)("li",{class:"list-group-item list-group-item-action flex-column align-items-start"},Object(n.h)("div",{class:"d-flex w-100 justify-content-between"},s&&Object(n.h)("img",{class:"img-fluid mr-3",src:e[t].event.target.result,style:"max-height: 50px;"}),Object(n.h)("small",null,e[t].event.uploadDone),Object(n.h)(i.c,{id:"imageupload.uploading-image"},"Laster opp bilde..."),Object(n.h)("small",null,a.a.formatBytes(e[t].event.total,2))),Object(n.h)("div",{class:"progress mt-1",style:"height: 4px;"},Object(n.h)("div",{class:"progress-bar progress-bar-striped progress-bar-animated bg-success",role:"progressbar",style:"width: "+o.progress+"%; height: 4px;","aria-valuenow":o.progress,"aria-valuemin":"0","aria-valuemax":"100"})))})))),this.props.children)},e}(n.Component))||o;e.a=c},"vY+r":function(t,e,r){"use strict";(function(t){function o(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,o)}return r}function n(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var s,a=r("hosL"),i=r("Utv1"),c=r("/eY4"),l=r("OhSV"),u=r("ZOvn"),d={},h=Object(c.a)(s=function(e){function r(t){var r;return(r=e.call(this,t)||this).toggleViews=function(){var t=r.props;(t.isTeamAdmin||t.isAdmin)&&r.setState({showViewList:!r.state.showViewList})},r.state=function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?o(Object(r),!0).forEach((function(e){n(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({},d),r}var s,c;return c=e,(s=r).prototype=Object.create(c.prototype),s.prototype.constructor=s,s.__proto__=c,r.prototype.render=function(){var e=this.state.showViewList,r=this.props.stores,o=r.storyStore,n=r.teamStore,s=r.workoutStore,c=this.props,d=c.views,h=c.type,m=void 0===h?"story":h,b=c.onTeamClick,p=void 0===b?function(){}:b,f=[];Object.entries(c.object.statistics).forEach((function(t){Object.entries(t[1]).forEach((function(t){var e=t[1];e.viewUsers&&f.push(e.viewUsers)}))}));var g=f.flat().slice(0,50);return Object(a.h)(t,null,Object(a.h)("div",{class:"d-flex justify-content-end mb-2"},Object(a.h)("span",{class:"ml-2 text-muted font-weight-lighter",onClick:this.toggleViews},d," ",Object(a.h)(l.c,{id:"story.views"},"views"))),e&&Object(a.h)("div",{class:"mt-3 mb-3"},g&&g.map((function(e){var r,c,l;if("story"===m?(r=o.findPublicUser(e),c=o.findPublicTeamByMembers(e)):"team"===m?(r=n.findPublicUser(e),c=n.findPublicTeamByMembers(e)):"workout"===m&&(r=s.findPublicUser(e),c=s.findPublicTeamByMembers(e)),!r)return"";i.a.isArray(c)&&(l=c.find((function(t){return 1===t.public})));var d=u.a.getImage({user:r,team:l,priority:"user"}),h=u.a.displayNameShort(r),b=u.a.displayName(r,!0);return Object(a.h)("div",{class:"d-flex flex-row position-relative font-weight-light mb-1"},l?Object(a.h)(t,null,Object(a.h)("a",{href:"/teams/public/"+l.uuidv4,title:l.name,onClick:function(t){return p(t,l.uuidv4)},class:"stretched-link"},Object(a.h)("div",{class:"text-center border rounded-circle imageRounded imageRoundedThumb",style:d?'background-image: url("'+d+'"); background-size: cover;':""},!d&&Object(a.h)("div",{class:"",style:"font-size: 12px; padding-top: 3px;"},h))),Object(a.h)("div",{class:"ml-2 "},b," ",Object(a.h)("span",{class:"font-weight-lighter"},"- ",l.name))):Object(a.h)(t,null,Object(a.h)("div",{class:"text-center border rounded-circle imageRounded imageRoundedThumb",style:(d?'background-image: url("'+d+'"); background-size: cover;':"")+" opacity: 0.5;"},!d&&Object(a.h)("div",{class:"text-muted",style:"font-size: 12px; padding-top: 3px;"},h)),Object(a.h)("div",{class:"ml-2"},b)))})),d>g.length&&Object(a.h)(t,null,Object(a.h)("small",{class:"text-muted"},Object(a.h)(l.c,{id:"story.limited-to"},"Limited to max 50 users.")))))},r}(a.Component))||s;e.a=h}).call(this,r("hosL").Fragment)},yHBq:function(t,e,r){"use strict";(function(t){function o(){return(o=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])}return t}).apply(this,arguments)}function n(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}var s,a,i=r("hosL"),c=r("/eY4"),l=r("Utv1"),u=Object(c.a)(s=function(t){function e(e){var r;return(r=t.call(this,e)||this).state={},r.containerRef=null,r}n(e,t);var r=e.prototype;return r.componentWillUnmount=function(){var t=this.props.removeIntersectionObserver;t&&t(this.containerRef)},r.componentDidMount=function(){var t=this.props.addIntersectionObserver;t&&t(this.containerRef)},r.render=function(){var t=this,e=this.props,r=e.wrapperClassNames,n=void 0===r?"":r,s=e.contentClassNames,a=void 0===s?"":s,c=e.renderContent,l=e.obj,u=void 0===l?{}:l,d=e.idx,h=e.dataFields,m=e.dataValues,b=e.sessionid,p={};return b&&(p.sessionid=b),h.forEach((function(t){return p["data-"+t]=encodeURI(m[t]||u[t])})),Object(i.h)("div",o({class:""+n,ref:function(e){return t.containerRef=e},"data-idx":d},p),Object(i.h)("div",{class:""+a,style:"display: block;"},c({obj:u,idx:d})))},e}(i.Component))||s,d=Object(c.a)(a=function(e){function r(t){var r;return(r=e.call(this,t)||this).deleteIntersectionObserver=function(){r.intersectionObserver=null},r.handleIntersection=function(t){var e=r.props.handleIntersection;"function"==typeof e&&e(t),t.forEach((function(t){var e=t.isIntersecting,r=t.target.dataset.height,o=void 0===r?0:r,n=Math.max(t.target.childNodes[0].offsetHeight,t.target.offsetHeight,t.target.scrollHeight);e?(t.target.childNodes[0].style.display="block",t.target.style.minHeight=(n>o?n:o)+"px"):t.target.style.minHeight&&(t.target.style.minHeight=(n>o?n:o)+"px",t.target.childNodes[0].style.display="none")}))},r.setupIntersectionObserver=function(){if(!("IntersectionObserver"in window)||!("IntersectionObserverEntry"in window)||!("intersectionRatio"in window.IntersectionObserverEntry.prototype))return!1;r.intersectionObserver=new IntersectionObserver(r.handleIntersection,{root:null,rootMargin:"100px",threshold:.1})},r.addIntersectionObserver=function(t){r.intersectionObserver&&t&&r.intersectionObserver.observe(t)},r.removeIntersectionObserver=function(t){r.intersectionObserver&&t&&r.intersectionObserver.unobserve(t)},r.state={},r}n(r,e);var o=r.prototype;return o.componentWillMount=function(){this.setupIntersectionObserver()},o.componentWillUnmount=function(){this.deleteIntersectionObserver()},o.render=function(){var e=this,r=this.props,o=r.data,n=void 0===o?[]:o,s=r.wrapperClassNames,a=void 0===s?"row pb-4 bg-light":s,c=r.contentClassNames,d=void 0===c?"col-12 col-sm-8 col-lg-6 offset-sm-2 offset-lg-3 mb-0 position-relative rounded rounded-lg py-3 shadow-sm":c,h=r.renderContent,m=void 0===h?function(){return Object(i.h)(t,null,"Missing render function!")}:h,b=r.dataFields,p=void 0===b?[]:b,f=r.dataValues,g=void 0===f?{}:f;return Object(i.h)("div",{class:"w-100"},n&&n.filter((function(t){return l.a.isObject(t)})).map((function(r,o){var n=r.hasOwnProperty("wrapperClassNames")?r.wrapperClassNames:a,s=r.hasOwnProperty("contentClassNames")?r.contentClassNames:d;return Object(i.h)(t,null,Object(i.h)(u,{key:"fastline-"+o+"-"+r.id,obj:r,idx:o,addIntersectionObserver:e.addIntersectionObserver,removeIntersectionObserver:e.removeIntersectionObserver,wrapperClassNames:n,contentClassNames:s,renderContent:m,dataFields:p,dataValues:g}))})))},r}(i.Component))||a;e.a=d}).call(this,r("hosL").Fragment)}}]);
//# sourceMappingURL=63.chunk.00cb2.js.map