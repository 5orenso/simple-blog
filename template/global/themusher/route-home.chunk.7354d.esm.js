(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{"+1Jk":function(t,e,s){"use strict";s.r(e),function(t){function a(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,a)}return s}function o(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}var i,r=s("hosL"),c=s("Utv1"),n=s("/eY4"),l=s("OhSV"),h=s("Y3FI"),d=(s("X9Km"),s("ZOvn")),m=(s("XPU5"),s("ZWUU"),s("CE5K"),s("qv+O"),s("0SNj")),b=s("9Bb9"),u=s("pJjI"),p=s("L3gU"),O=s("AEg1"),f=s("gOLw"),g=s("w93r");const j=d.a.marginTop(!1),w=d.a.marginBottom(),v=(d.a.subMenuMarginTop(),{isLoading:!1,submenu:"lastWorkouts"});let k=Object(n.a)(i=class extends r.Component{constructor(t){super(t),this.chooseSubmenu=t=>{this.setState({submenu:t.target.parentElement.dataset.menu||t.target.dataset.menu})},this.addNavigation=(t=this.props)=>{const{viewmenu:e}=t,{appState:s}=this.props.stores;"wall"===e&&(s.setSwipeRight(),s.setSwipeLeft(()=>{s.setSwipeLeft(),Object(h.route)("/home-workout")})),"workout"===e&&(s.setSwipeLeft(),s.setSwipeRight(()=>{s.setSwipeRight(),Object(h.route)("/")}))},this.state=function(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?a(Object(s),!0).forEach((function(e){o(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):a(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}({},v)}async loadAll(){const{appState:t,userStore:e}=this.props.stores;this.setState({isLoading:!0}),await t.getFingerprint(),await e.getInfo(),await e.getNotifications(),this.setState({isLoading:!1})}componentDidMount(){this.addNavigation(),this.loadAll()}componentWillUnmount(){const{appState:t}=this.props.stores;t.setSwipeRight(),t.setSwipeLeft()}componentWillReceiveProps(t){t.viewmenu!==this.props.viewmenu&&this.addNavigation(t)}render(){const{viewmenu:e,path:s}=this.props,{userStore:a,appState:o,workoutStore:i}=this.props.stores,{user:n}=a,{currentLocationGeocode:h={},yrWeatherKeys:d=[]}=n,{formatted_address:v}=h,{currentTeam:k,cordovaActiveTrackingParams:y,isRunning:S,totalDistance:x,currentSpeed:T,totalTime:C}=i;return Object(r.h)("div",{class:"container-fluid",style:`margin-bottom: ${w}; margin-top: ${j};`},S&&y&&Object(r.h)(t,null,Object(r.h)("div",{class:"row"},Object(r.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 border-bottom bg-light py-4"},Object(r.h)("h1",{class:"text-success font-weight-bold"},"Tracking",Object(r.h)("div",{class:"spinner-grow ml-3",role:"status"})),Object(r.h)("div",{class:"row mb-3"},Object(r.h)("div",{class:"col-4 text-center font-weight-bold",style:"font-size: 1.3em;"},c.a.secToHms(C)),Object(r.h)("div",{class:"col-4 text-center font-weight-bold",style:"font-size: 1.3em;"},c.a.format(3.6*T,1)," km/t"),Object(r.h)("div",{class:"col-4 text-center font-weight-bold",style:"font-size: 1.3em;"},c.a.format(x/1e3,2)," km")),Object(r.h)("a",{class:"btn btn-block btn-danger",href:"/workouts/tracking"},Object(r.h)(l.c,{id:"workouts.go-to-tracking"},"Go to tracking"))))),Object(r.h)("div",{class:""},n.id&&Object(r.h)(g.a,{stores:this.props.stores,place:v,yrWeather:d.join(",")})),n.id&&Object(r.h)(O.a,{stores:this.props.stores}),Object(r.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-0 mb-2"},Object(r.h)("div",{class:"row"},Object(r.h)("div",{class:"col px-1 pt-2"},Object(r.h)("a",{class:`btn btn-block ${"wall"===e?"btn-primary":"btn-outline-primary"} text-nowrap`,style:"text-overflow: ellipsis; overflow: hidden;","data-menu":"wall",href:"/home-wall"},Object(r.h)("i",{class:"fas fa-comments"})," ",Object(r.h)(l.c,{id:"home.wall"},"Veggen"))),Object(r.h)("div",{class:"col px-1 pt-2"},Object(r.h)("a",{class:`btn btn-block ${"workout"===e?"btn-primary":"btn-outline-primary"} text-nowrap`,style:"text-overflow: ellipsis; overflow: hidden;","data-menu":"workout",href:"/home-workout"},Object(r.h)("i",{class:"fas fa-running"}),"  ",Object(r.h)(l.c,{id:"home.workouts"},"Treninger"))))),"wall"===e&&Object(r.h)(t,null,Object(r.h)(f.a,{stores:this.props.stores,path:s})),"workout"===e&&Object(r.h)(t,null,Object(r.h)(p.a,{stores:this.props.stores})),"totals"===e&&Object(r.h)(t,null,Object(r.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 border-bottom"},Object(r.h)(u.a,{stores:this.props.stores}),Object(r.h)(m.a,{stores:this.props.stores,currentTeam:k}),Object(r.h)(b.a,{stores:this.props.stores,currentTeam:k}))))}})||i;e.default=k}.call(this,s("hosL").Fragment)},ISGx:function(t,e,s){"use strict";(function(t){function a(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,a)}return s}function o(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?a(Object(s),!0).forEach((function(e){i(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):a(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}function i(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}var r,c=s("hosL"),n=s("Utv1"),l=s("/eY4"),h=s("cneo"),d=s("OhSV"),m=s("fh8t"),b=s.n(m),u=s("s4FZ"),p=s("sqi2"),O=s("/922"),f=s("eQ6k"),g=s("+JSK"),j=s("ZOvn");const w={showAddComment:{},likeWorkout:{},idxSuggestion:0,idxAd:4,limit:15,offset:0,hasFollowSugguestions:!1,hasAd:!1,sessionid:(new Date).getTime()};let v=Object(l.a)(r=class extends c.Component{constructor(t){var e;super(t),e=this,this.toggleDate=t=>{t.stopPropagation(),t.preventDefault();const{showDate:e}=this.state;this.setState({showDate:!e})},this.likeWorkout=async function(t){const s=parseInt(t.target.closest(".imageContainer").dataset.id,10),{workoutStore:a}=e.props.stores,{likeWorkout:o}=e.state;o[s]=!0,e.setState({likeWorkout:o}),setTimeout(()=>{const{likeWorkout:t}=e.state;delete t[s],e.setState({likeWorkout:t})},1200);const i=await a.likeWorkout({id:s});i&&200===i.status&&e.addLikeToFeed(s,i.data)},this.addCommentToFeed=({type:t,workout:e,response:s,commentId:a,replyId:o})=>{const{teamStore:i}=this.props.stores;switch(t){case"likeComment":i.addLikeToComment({id:e.id,data:s.data,commentId:a});break;case"likeReply":i.addLikeToCommentReply({id:e.id,data:s.data,commentId:a,replyId:o});break;default:a?i.addCommentToWorkoutComment({id:e.id,data:s.data,commentId:a}):i.addCommentToWorkout({id:e.id,data:s.data})}},this.addLikeToFeed=(t,e)=>{const{teamStore:s}=this.props.stores;s.addLikeToWorkout({id:t,data:e})},this.toggleAddComment=t=>{const e=t.target.closest("button").dataset.id,{showAddComment:s}=this.state;s[e]?delete s[e]:s[e]=!0,this.setState({showAddComment:s},()=>{this.inputRef[e]&&this.inputRef[e].focus()})},this.shareLink=t=>{const{url:e,title:s,text:a}=t.target.closest("button").dataset,{appState:o}=this.props.stores;o.shareUrl({url:e,title:s,text:a})},this.state=o({},w),this.inputRef={},this.containerRef=null}render(){const{feed:e,onTeamClick:s=(()=>{}),onUserClick:a=(()=>{})}=this.props,{showAddComment:i,showDate:r,likeWorkout:l}=this.state,{teamStore:m,userStore:w,appState:v}=this.props.stores,{user:k,isAdmin:y}=w,{language:S="no"}=k,{hasShareApi:x}=v,T=m.findPublicTeam(e.team)||{},C=(w.findTeamAmbition({ambition:T.ambitions,language:S}),w.findTeamType({type:T.type,language:S}));let D;T.image&&T.image.s3SmallLink?D=T.image:T.images&&T.images[0]&&T.images[0].s3SmallLink&&(D=T.images[0]);const{likes:P,comments:L}=e,I=e.likes&&e.likes.findIndex(t=>t.user===k.id)>-1,E=T&&T.followers?T.followers.length:0,F=T.members&&T.members.indexOf(k.id)>-1,A=T&&T.followers&&T.followers.indexOf(k.id)>-1,R=T.followRequests&&T.followRequests.findIndex(t=>t.id===k.id)>-1,W=w.findEquipment({equipment:e.equipment,language:S}),U=w.findEquipment({equipment:e.equipment,field:"icon"}),M=[];if(e.mapImage&&M.push(o(o({},e.mapImage),{},{type:"map"})),e.images){const t=Object(h.i)(e.images);M.push(...t)}const{currentLocationGeocode:N={},yrWeather:q=[]}=e,$=j.a.getViews(e.statistics),V=j.a.getAdminData(e.statistics);return T&&T.name?Object(c.h)(t,null,Object(c.h)("div",{class:"d-flex position-relative"},Object(c.h)("div",{class:"text-center"},Object(c.h)("div",{class:"text-center border rounded-circle imageRounded imageRoundedSmall",style:D?`background-image: url("${D.s3SmallLink}"); background-size: cover;`:""},!D&&Object(c.h)("i",{class:"fas fa-users text-muted mt-2",style:"font-size: 20px;"}))),Object(c.h)("div",{class:"flex-grow-1 pl-3",style:"line-height: 1.2em;"},Object(c.h)("span",{class:"badge badge-pill badge-secondary float-right"},C),Object(c.h)("h5",{class:"mb-1",style:"line-height: 1.0em;"},T.public?Object(c.h)(t,null,Object(c.h)("a",{href:"/teams/public/"+T.uuidv4,onClick:t=>s(t,T.uuidv4),class:"stretched-link"},T.name)):Object(c.h)(t,null,T.name)),Object(c.h)("div",null,e.date&&Object(c.h)("small",{class:"text-muted",onClick:this.toggleDate},r?n.a.formatDate(e.date,{locale:"no-NB",hour12:!1,hour:"2-digit",minute:"2-digit"}):n.a.formatDistance(e.date,new Date,{locale:"no-NB"})),1===e.public?Object(c.h)(t,null,Object(c.h)("small",{class:"ml-2 text-muted"},Object(c.h)("i",{class:"fas fa-globe-europe"}))):Object(c.h)(t,null,Object(c.h)("small",{class:"ml-2 text-muted"},Object(c.h)("i",{class:"fas fa-users"})," (",n.a.format(E),")")),Object(c.h)("small",{class:"text-muted"},e.equipment>0&&Object(c.h)(t,null,Object(c.h)("i",{class:U+" ml-2"})," ",W),e.dogs>0&&Object(c.h)(t,null,Object(c.h)("i",{class:"fas fa-dog ml-2"})," ",e.dogs.length),e.track>0&&Object(c.h)(t,null,Object(c.h)("i",{class:`fas fa-map-marked text-${e.track>0?"success":"danger"} ml-2`})),e.sledWeight>0&&Object(c.h)(t,null,Object(c.h)("i",{class:"fas fa-sleigh ml-2"})," ",n.a.format(e.sledWeight,0)," kg"),0!==e.temperature&&Object(c.h)(t,null,Object(c.h)("i",{class:"fas fa-temperature-low ml-2"})," ",n.a.format(e.temperature,1),"°C")),y&&N&&N.formatted_address&&Object(c.h)(t,null,Object(c.h)("small",{class:"ml-2 text-muted"},Object(c.h)("i",{class:"fas fa-map-marker-alt"})," ",N.formatted_address)),y&&V&&Object(c.h)(t,null,Object(c.h)("br",null),Object(c.h)("small",{class:"text-muted"},"Admin:"),Object(c.h)("small",{class:"ml-2 text-muted"},"Views: ",V.count),Object(c.h)("small",{class:"ml-2 text-muted"},"Rank: ",V.ranking," ",n.a.isNumber(V.rankingTrend)&&Object(c.h)(t,null,Object(c.h)("i",{class:j.a.getClassForTrend(V.rankingTrend)}))),Object(c.h)("small",{class:"ml-2 text-muted"},"Dur: ",n.a.format(V.durationAvg/1e3,1),"s ",n.a.isNumber(V.durationAvgTrend)&&Object(c.h)(t,null,Object(c.h)("i",{class:j.a.getClassForTrend(V.durationAvgTrend)}))),e.statisticsCurrent&&e.statisticsCurrent.totalInteractions>0&&Object(c.h)("small",{class:"ml-2 text-muted"},"Score: ",n.a.format(e.statisticsCurrent.totalInteractions,0)))))),Object(c.h)("div",{class:"row mt-2"},Object(c.h)("div",{class:"clearfix col-12 font-weight-bold",style:"font-size: 1.2em;"},Object(c.h)(b.a,{markdown:j.a.replaceImages(e.name,e.images,S),markdownOpts:j.a.getMarkdownOptions()})),Object(c.h)("div",{class:"clearfix col-12"},Object(c.h)(b.a,{markdown:j.a.replaceImages(e.comment,e.images,S),markdownOpts:j.a.getMarkdownOptions()}))),Object(c.h)("div",{class:"row mt-1"},e.distanceKm>0&&Object(c.h)("div",{class:"col-3"},Object(c.h)("div",{class:"text-overflow"},Object(c.h)("small",null,Object(c.h)("i",{class:"fas fa-road"})," ",Object(c.h)(d.c,{id:"workout.calendar.distance"},"Distanse"))),Object(c.h)("div",{class:"text-overflow font-weight-light",style:"font-size: 1.2em;"},n.a.format(z=e.distanceKm,z<5?2:1),"km")),e.elevation>0&&Object(c.h)("div",{class:"col-3"},Object(c.h)("div",{class:"text-overflow"},Object(c.h)("small",null,Object(c.h)("i",{class:"fas fa-mountain"})," ",Object(c.h)(d.c,{id:"workout.calendar.ascend"},"Høydemeter"))),Object(c.h)("div",{class:"text-overflow font-weight-light",style:"font-size: 1.2em;"},n.a.format(e.elevation,0),"m")),e.duration>0&&Object(c.h)("div",{class:"col-3"},Object(c.h)("div",{class:"text-overflow"},Object(c.h)("small",null,Object(c.h)("i",{class:"fas fa-clock"})," ",Object(c.h)(d.c,{id:"workout.calendar.duration"},"Varighet"))),Object(c.h)("div",{class:"text-overflow font-weight-light",style:"font-size: 1.2em;"},n.a.secToHms(e.duration,!0))),e.speedAvg>0&&Object(c.h)("div",{class:"col-3"},Object(c.h)("div",{class:"text-overflow"},Object(c.h)("small",null,Object(c.h)("i",{class:"fas fa-tachometer-alt"})," ",Object(c.h)(d.c,{id:"workout.calendar.avg-speed"},"Snittfart"))),Object(c.h)("div",{class:"text-overflow font-weight-light",style:"font-size: 1.2em;"},n.a.format(e.speedAvg,1),"km/t"))),Object(c.h)("div",{class:"container-fluid px-0 mt-1"},Object(c.h)("div",{class:"row"},Object(c.h)(u.a,{stores:this.props.stores,images:M,id:e.id,dblClick:this.likeWorkout,likeRef:l}))),Object(c.h)("div",{class:"mt-2"},Object(c.h)(g.a,{stores:this.props.stores,likes:P,comments:L,type:"team",onTeamClick:s,onUserClick:a})),!F&&!A&&!R&&Object(c.h)("div",{class:"clearfix mb-2"},Object(c.h)(f.a,{stores:this.props.stores,team:T,buttonOnly:!0})),Object(c.h)("div",null,Object(c.h)("div",{class:"row"},Object(c.h)("div",{class:"col text-center"},Object(c.h)("button",{type:"button",class:`imageContainer btn btn-sm btn-outline-${I?"primary":"secondary"} btn-lg btn-block ${I?"text-primary":""} text-overflow`,"data-id":e.id,onClick:this.likeWorkout},Object(c.h)("i",{class:(I?"text-primary fas":"far")+" fa-thumbs-up"})," ",Object(c.h)(d.c,{id:"comments.like"},"Lik"))),Object(c.h)("div",{class:"col text-center"},Object(c.h)("button",{type:"button",class:"btn btn-sm btn-outline-secondary btn-lg btn-block text-overflow","data-id":e.id,onClick:this.toggleAddComment},Object(c.h)("i",{class:"fas fa-comment"})," ",Object(c.h)(d.c,{id:"comments.comment-add"},"Kommentar"))),x?Object(c.h)(t,null,Object(c.h)("div",{class:"col text-center"},Object(c.h)("button",{class:"btn btn-sm btn-outline-secondary btn-lg btn-block text-overflow",onClick:this.shareLink,"data-url":"https://themusher.app/share/workout/"+e.uuidv4,"data-title":"title: "+e.title},Object(c.h)("i",{class:"fas fa-share"})," ",Object(c.h)(d.c,{id:"story.share"},"Del")))):Object(c.h)(t,null,Object(c.h)("div",{class:"col text-center"},Object(c.h)("a",{class:"btn btn-sm btn-outline-secondary btn-lg btn-block text-overflow",href:"https://themusher.app/share/workout/"+e.uuidv4,target:"_blank",rel:"noreferrer"},Object(c.h)("i",{class:"fas fa-share"})," ",Object(c.h)(d.c,{id:"story.share"},"Del")))))),$>0&&Object(c.h)("div",null,Object(c.h)("small",{class:"ml-2 text-muted"},$," ",Object(c.h)(d.c,{id:"story.views"},"views"))),Object(c.h)("div",{class:"mt-2"},i[e.id]&&Object(c.h)(O.a,{stores:this.props.stores,workout:e,inputRef:t=>this.inputRef[e.id]=t,inputRefObject:this.inputRef,col:"12",offset:"0",showAvatar:!0,extraClass:"px-0",callback:this.addCommentToFeed}),Object(c.h)(p.a,{stores:this.props.stores,workout:e,col:"12",offset:"0",compact:!1,callback:this.addCommentToFeed}))):"";var z}})||r;e.a=v}).call(this,s("hosL").Fragment)},L3gU:function(t,e,s){"use strict";(function(t){function a(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,a)}return s}function o(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}var i,r=s("hosL"),c=s("Utv1"),n=s("/eY4"),l=(s("OhSV"),s("VKmm")),h=s("rWES"),d=s("epqT"),m=s("yHBq"),b=s("q/oJ"),u=s("gWxU"),p=s("ISGx"),O=s("ZOvn");const f={showAddComment:{},likeWorkout:{},idxSuggestion:0,idxAd:4,limit:10,offset:0,hasFollowSugguestions:!1,hasAd:!1,sessionid:(new Date).getTime()},g=["id","type","user","team","title"];let j=Object(n.a)(i=class extends r.Component{constructor(e){super(e),this.setLoadMore=()=>{const{teamStore:t}=this.props.stores;t.setLoadMore(()=>{let{limit:t,offset:e}=this.state;e+=t,this.setState({offset:e}),this.loadTeamsPublicFeed({limit:t,offset:e})})},this.unsetLoadMore=()=>{const{teamStore:t}=this.props.stores;t.setLoadMore(()=>{})},this.insertTopRanked=()=>{const{teamStore:t}=this.props.stores,{publicTeamsFeed:e,topRankedWorkouts:s}=t,a=c.a.shuffleArray(s),o=[...e];for(let t=0,e=3;t<e;t+=1){const e=O.a.randomInt(0,7);c.a.isObject(a[t])&&o.splice(e,0,a[t])}t.localUpdateField("publicTeamsFeed",o)},this.insertAds=()=>{const{idxAd:t}=this.state,{teamStore:e}=this.props.stores,{publicTeamsFeed:s}=e,a=[...s];a.splice(t,0,{type:"ad",wrapperClassNames:"",contentClassNames:""}),e.localUpdateField("publicTeamsFeed",a)},this.insertTeamConfirm=()=>{const{idxConfirm:t}=this.state,{teamStore:e}=this.props.stores,{publicTeamsFeed:s}=e,a=[...s];a.splice(t,0,{type:"teamConfirm",wrapperClassNames:"",contentClassNames:""}),e.localUpdateField("publicTeamsFeed",a)},this.insertTeamSuggestions=()=>{const{idxSuggestion:t}=this.state,{teamStore:e}=this.props.stores,{publicTeamsFeed:s}=e,a=[...s];a.splice(t,0,{type:"teamSuggestions",wrapperClassNames:"",contentClassNames:""}),e.localUpdateField("publicTeamsFeed",a)},this.onTeamClick=(t,e)=>(t.preventDefault(),t.stopPropagation(),this.setState({showTeam:e}),!1),this.hideTeam=()=>{this.setState({showTeam:null})},this.onUserClick=t=>(t.preventDefault(),t.stopPropagation(),!1),this.setupIntersection=()=>{this.setState({handleIntersection:O.a.intersectionObserverCallback});const{teamStore:t}=this.props.stores;this.scrollViewTimer=setInterval(()=>t.postScrollview(O.a.getIntersectionObserverHistory()),3e4)},this.renderContent=({obj:e,idx:s})=>{const{appState:a}=this.props.stores,{path:o}=a;return"ad"===e.type?Object(r.h)(t,null,Object(r.h)(d.a,{stores:this.props.stores,path:o})):"teamConfirm"===e.type?Object(r.h)(t,null,Object(r.h)(h.a,{stores:this.props.stores})):"teamSuggestions"===e.type?Object(r.h)(t,null,Object(r.h)(l.a,{stores:this.props.stores})):Object(r.h)(t,null,Object(r.h)(p.a,{stores:this.props.stores,feed:e,idx:s,onTeamClick:this.onTeamClick,onUserClick:this.onUserClick}))},this.state=function(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?a(Object(s),!0).forEach((function(e){o(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):a(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}({},f)}async loadTeamsPublicFeed({props:t=this.props,limit:e,offset:s}){const{teamStore:a}=t.stores;await a.loadPublicFeed({limit:e,offset:s})}async loadAll(){const{limit:t}=this.state;await this.loadTeamsPublicFeed({limit:t,offset:0}),this.insertTopRanked()}componentWillMount(){this.setupIntersection()}componentWillUnmount(){this.unsetLoadMore();const{teamStore:t}=this.props.stores;t.postScrollview(O.a.getIntersectionObserverHistory()),clearInterval(this.scrollViewTimer)}componentDidMount(){this.loadAll(),this.setLoadMore()}render(){const{showTeam:e,handleIntersection:s,sessionid:a}=this.state,{teamStore:o,appState:i}=this.props.stores,{publicTeamsFeed:c}=o,{darkmode:n}=i;return Object(r.h)(t,null,e&&Object(r.h)(b.a,null,Object(r.h)(u.a,{stores:this.props.stores,teamid:e,marginTop:"0px;",marginBottom:"0px;",back:this.hideTeam})),Object(r.h)("div",{class:"w-100"},Object(r.h)(h.a,{stores:this.props.stores}),Object(r.h)(m.a,{data:c,wrapperClassNames:"row pb-4",contentClassNames:`col-12 col-sm-8 col-lg-6 offset-sm-2 offset-lg-3 my-1 position-relative rounded rounded-lg py-3 bg-${n?"black":"white"} shadow-sm`,renderContent:this.renderContent,dataFields:g,dataValues:{type:"10"},handleIntersection:s,sessionid:a})))}})||i;e.a=j}).call(this,s("hosL").Fragment)},ZWUU:function(t,e,s){"use strict";var a,o=s("hosL"),i=(s("Utv1"),s("/eY4")),r=s("OhSV");s("go65");Object(i.a)(a=class extends o.Component{constructor(...t){var e;super(...t),e=this,this.toggleSetting=async function(t){const{userStore:s}=e.props.stores,{user:a}=s,{settings:o={}}=a;await s.updateSetting({["settings."+t]:1===o[t]?0:1})},this.hideSettings=async function(){const{userStore:t}=e.props.stores;await t.updateSetting({"settings.hideSettings":1}),e.setState({hideSettings:!0})}}render(){const{hideSettings:t}=this.state,{userStore:e}=this.props.stores,{forceShow:s}=this.props,{user:a}=e,{settings:i={}}=a;return t||i.hideSettings||!s&&i.summaryEmails&&i.infoEmails&&i.partnerEmails?"":Object(o.h)("div",{class:"col-12 col-sm-8 col-lg-6 offset-sm-2 offset-lg-3 mt-4 mb-4 pt-4 pb-4 border-bottom border-top"},Object(o.h)("h5",null,Object(o.h)(r.c,{id:"users.settings"},"Brukerinnstillinger")),!i.summaryEmails&&Object(o.h)("div",{class:"row mt-4"},Object(o.h)("div",{class:"col-4 text-muted text-right"},Object(o.h)(r.c,{id:"users.settings-summary-email"},"Oppsummeringer")),Object(o.h)("div",{class:"col-8"},Object(o.h)("div",{class:"custom-control custom-switch"},Object(o.h)("input",{type:"checkbox",class:"custom-control-input",id:"settingsSummaryEmails",onInput:()=>this.toggleSetting("summaryEmails"),checked:i.summaryEmails}),Object(o.h)("label",{class:"custom-control-label",for:"settingsSummaryEmails"})),Object(o.h)("small",{class:"text-muted"},Object(o.h)(r.c,{id:"users.settings-receive-summary-email"},"Motta oppsummeringer via e-post")))),!i.infoEmails&&Object(o.h)("div",{class:"row mt-4"},Object(o.h)("div",{class:"col-4 text-muted text-right"},Object(o.h)(r.c,{id:"users.settings-info-email"},"Info")),Object(o.h)("div",{class:"col-8"},Object(o.h)("div",{class:"custom-control custom-switch"},Object(o.h)("input",{type:"checkbox",class:"custom-control-input",id:"settingsInfoEmails",onInput:()=>this.toggleSetting("infoEmails"),checked:i.infoEmails}),Object(o.h)("label",{class:"custom-control-label",for:"settingsInfoEmails"})),Object(o.h)("small",{class:"text-muted"},Object(o.h)(r.c,{id:"users.settings-receive-info-email"},"Motta info via e-post")))),!i.partnerEmails&&Object(o.h)("div",{class:"row mt-4"},Object(o.h)("div",{class:"col-4 text-muted text-right"},Object(o.h)(r.c,{id:"users.settings-partner-email"},"Partners")),Object(o.h)("div",{class:"col-8"},Object(o.h)("div",{class:"custom-control custom-switch"},Object(o.h)("input",{type:"checkbox",class:"custom-control-input",id:"settingsPartnerEmails",onInput:()=>this.toggleSetting("partnerEmails"),checked:i.partnerEmails}),Object(o.h)("label",{class:"custom-control-label",for:"settingsPartnerEmails"})),Object(o.h)("small",{class:"text-muted"},Object(o.h)(r.c,{id:"users.settings-receive-partner-email"},"Motta tilbud fra våre partnere via e-post")))),Object(o.h)("div",{class:"row mt-4"},Object(o.h)("div",{class:"col-12 text-muted"},Object(o.h)("small",null,Object(o.h)("a",{href:"/users"},Object(o.h)("i",{class:"fas fa-sliders-h"})," ",Object(o.h)(r.c,{id:"users.settings-text-info"},"Innstillingene finner du inne på profilen din."))))),Object(o.h)("div",{class:"row mt-4"},Object(o.h)("div",{class:"col-12 text-muted text-right"},Object(o.h)("small",null,Object(o.h)("button",{type:"button",class:"btn btn-sm btn-link mb-2",onClick:this.hideSettings},Object(o.h)("i",{class:"fas fa-eye-slash"})," ",Object(o.h)(r.c,{id:"users.hide-settings"},"Skjul innstillingene"))))))}})},"qv+O":function(t,e,s){"use strict";(function(t){function e(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,a)}return s}function a(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}function o(t="",e,s="no"){if(c.a.isString(t)){let a=t;const o=new RegExp(`<${s}>(.*?)</${s}>`,"s").exec(a);if(o){const t=o[0];t&&(a=t)}return a.replace(/\{\{img\.(\d+)\s*(\d*)\}\}/g,(function(t,s,a){return c.a.isObject(e[s])?`<img src=${e[s].s3XXLargeLink} class='img-fluid float-right' style='width: ${a||40}%;' />`:""}))}return t}var i,r=s("hosL"),c=s("Utv1"),n=s("/eY4"),l=s("OhSV"),h=s("fh8t"),d=s.n(h);s("ZOvn");const m={pedantic:!1,gfm:!0,breaks:!0,sanitize:!1,smartLists:!0,smartypants:!0,xhtml:!0},b={isLoading:!1};Object(n.a)(i=class extends r.Component{constructor(t){super(t),this.state=function(t){for(var s=1;s<arguments.length;s++){var o=null!=arguments[s]?arguments[s]:{};s%2?e(Object(o),!0).forEach((function(e){a(t,e,o[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):e(Object(o)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(o,e))}))}return t}({},b)}async loadRace(t=this.props){this.setState({isLoading:!0});const{raceStore:e}=t.stores;await e.load({query:{}}),this.setState({isLoading:!1})}componentDidMount(){this.loadRace()}componentWillReceiveProps(t){this.loadRace(t)}render(){const{appState:e,userStore:s,raceStore:a,newsStore:i}=this.props.stores,{isAdmin:n,notifications:h=[]}=s,{races:b}=a,{newsList:u}=i,{language:p="no"}=e;return Object(r.h)("div",{class:"row"},Object(r.h)("div",{class:"col-12"},Object(r.h)("h5",null,Object(r.h)(l.c,{id:"races.homerun"},"Homerun races"))),(b||0===b.length)&&Object(r.h)("div",{class:"col-12 text-center py-5"},Object(r.h)("h5",null,"No upcoming races!"),"Take a look at the previous races:",Object(r.h)("br",null),Object(r.h)("a",{href:"https://homerunrace.no/",target:"_blank",rel:"noreferrer"},"homerunrace.no")),b&&b.sort((t,e)=>t.startDate-e.startDate).reverse().map(e=>{const s=new Date;let a="";if(s>=new Date(e.startDate)&&s<=new Date(e.endDate))a="race";else if(s>=new Date(e.signupStartDate)&&s<=new Date(e.signupEndDate))a="signup";else if(s>new Date(e.endDate))return Object(r.h)(t,null);return Object(r.h)(t,null,Object(r.h)("div",{class:"col-12 col-sm-12 col-md-6 col-lg-6 mb-3"},Object(r.h)("div",{class:"card position-relative"},Object(r.h)("h5",{class:"position-absolute",style:"top: 10px; right: 10px;"},"signup"===a&&Object(r.h)(t,null,Object(r.h)("div",{class:"spinner-grow text-primary",role:"status"})),"race"===a&&Object(r.h)(t,null,Object(r.h)("div",{class:"spinner-grow text-danger",role:"status"})),"done"===a&&Object(r.h)(t,null,Object(r.h)("span",null,Object(r.h)("i",{class:"fas fa-check text-success"})))),Object(r.h)("h5",{class:"card-header"},n&&Object(r.h)("i",{class:`fas fa-eye${e.active?" text-success":"-slash text-danger"} float-right`}),e.title),Object(r.h)("div",{class:"list-thumb d-flex align-items-center position-relative"},Object(r.h)("h5",{class:"position-absolute",style:"top: 3px; right: 5px;"},"signup"===a&&Object(r.h)(t,null,Object(r.h)("span",{class:"badge badge-primary border border-white ml-2"},Object(r.h)(l.c,{id:"races.signup-open"},"Påmelding åpen"))),"race"===a&&Object(r.h)(t,null,Object(r.h)("span",{class:"badge badge-danger border border-white ml-2"},Object(r.h)(l.c,{id:"races.race-in-progress"},"Løp pågår"))),"done"===a&&Object(r.h)(t,null,Object(r.h)("span",{class:"badge badge-success border border-white ml-2"},Object(r.h)(l.c,{id:"races.race-finished"},"Løp avsluttet")))),e.images&&e.images[0]?Object(r.h)("img",{src:e.images[0].s3MediumLink,class:"card-img-top"}):""),Object(r.h)("div",{class:"card-body"},Object(r.h)("p",{class:"card-text"},Object(r.h)(d.a,{markdown:o(e.ingress,e.images,p),markdownOpts:m})),e.classes&&Object(r.h)(t,null,Object(r.h)("div",{class:"mb-3"},Object(r.h)("small",{class:"font-weight-lighter mr-2"},Object(r.h)(l.c,{id:"races.classes"},"Klasser"),": "),Object(r.h)("br",null),e.classes.sort((t,e)=>t.distance-e.distance).map(e=>Object(r.h)(t,null,Object(r.h)("span",{class:"badge badge-pill badge-light mr-2 font-weight-light"},e.title))))),Object(r.h)("a",{href:"/app-races/"+e.id,class:"btn btn-primary stretched-link"},Object(r.h)(l.c,{id:"races.read-more"},"Les mer"))),Object(r.h)("div",{class:"card-footer"},Object(r.h)("small",{class:"text-muted"},Object(r.h)(l.c,{id:"races.race-days"},"Løpsdager"),": ",e.startDate&&Object(r.h)(t,null,c.a.formatDate(e.startDate,{locale:p})),e.endDate&&Object(r.h)(t,null," - ",c.a.formatDate(e.endDate,{locale:p})))))))}))}})}).call(this,s("hosL").Fragment)}}]);
//# sourceMappingURL=route-home.chunk.7354d.esm.js.map