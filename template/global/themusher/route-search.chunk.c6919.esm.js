(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{bMs3:function(e,t,s){"use strict";var c,a=s("hosL"),o=s("Utv1"),l=s("/eY4"),r=s("OhSV"),n=s("nHdA"),i=s("irB3"),h=(s("UwwE"),s("8Lgr")),b=(s("QkTp"),s("ZOvn"));let d=Object(l.a)(c=class extends a.Component{constructor(...e){super(...e),this.requestFollowTeam=e=>{e.preventDefault(),e.stopPropagation();const{teamStore:t,userStore:s}=this.props.stores,{user:c}=s,a=parseInt(e.target.parentElement.dataset.team||e.target.dataset.team,10);t.followRequest(a,c),this.setState({requestSent:!0})},this.getButton=(e="")=>{const{requestSent:t}=this.state,{userStore:s}=this.props.stores,{user:c}=s,{team:o,skipHome:l}=this.props,n=o.members&&o.members.indexOf(c.id)>-1,i=o.followers&&o.followers.indexOf(c.id)>-1,h=o.blockedFollowers&&o.blockedFollowers.indexOf(c.id)>-1,b=t||o.followRequests&&o.followRequests.findIndex(e=>e.id===c.id)>-1;return n?l?"":Object(a.h)("i",{class:"fas fa-home"}):i?Object(a.h)("button",{type:"button",class:"btn btn-sm btn-outline-secondary float-right",onClick:this.unFollowTeam,disabled:"true","data-team":o.id},Object(a.h)("i",{class:"fas fa-link mr-2"}),Object(a.h)(r.c,{id:"teams.connect.is-following"},"Følger")," ",e):h?"":b?Object(a.h)("button",{type:"button",class:"btn btn-sm btn-outline-secondary float-right",disabled:"true"},Object(a.h)("i",{class:"fas fa-hourglass-half mr-2"}),Object(a.h)(r.c,{id:"teams.connect.has-requested"},"Venter på godkjenning")," ",e):o.public?Object(a.h)("button",{type:"button",class:"btn btn-sm btn-outline-success float-right",onClick:this.requestFollowTeam,"data-team":o.id},Object(a.h)("i",{class:"far fa-hand-point-right mr-2"}),Object(a.h)(r.c,{id:"teams.connect.follow"},"Følg")," ",e):void 0}}render(){const{team:e,showButton:t,publicUsers:s=[],showLocation:c,showMembers:l}=this.props,{teamStore:r,userStore:d}=this.props.stores,u=(new Date).getMonth()+1,p=(new Date).getFullYear(),{month:m=u,year:f=p}=this.props,O=parseInt(m<8?f-1:f,10),j=r.findWorkoutSummary(e.id,O)||{},{user:g}=d,{language:v="en"}=g,w=d.findTeamAmbition({ambition:e.ambitions,language:v}),y=d.findTeamType({type:e.type,language:v}),x=s.find(t=>t.id===e.user),k=b.a.displayName(x),S=b.a.getImage({user:x,team:e,priority:"user"}),{url:T="/teams/"+e.id}=this.props;return Object(a.h)("div",{class:"w-100 mb-3"},Object(a.h)("div",{class:"row"},Object(a.h)("div",{class:"col-12 col-sm-8 col-lg-6 offset-sm-2 offset-lg-3 d-flex mb-0 position-relative"},Object(a.h)("div",{class:"position-relative d-flex flex-grow-1"},Object(a.h)("div",{class:"text-center border rounded-circle imageRounded",style:S?`background-image: url("${S}"); background-size: cover;`:""},!S&&Object(a.h)("i",{class:"fas fa-users text-muted mt-3",style:"font-size: 40px;"})),Object(a.h)("div",{class:"flex-grow-1 pl-3",style:"line-height: 1.2em;"},Object(a.h)("a",{class:"stretched-link",href:T},Object(a.h)("h5",{class:"mb-1",style:"line-height: 1.0em;"},e.name)),c&&Object(a.h)("div",null,(e.place||e.country)&&Object(a.h)("span",{class:"mr-3"},Object(a.h)("i",{class:"fas fa-map-marker-alt"}),"  ",e.place," ",e.place?", "+e.country:e.country)),l&&Object(a.h)("div",null,x&&Object(a.h)("span",{class:"mr-2"},Object(a.h)("i",{class:"fas fa-user"})," ",k)),Object(a.h)("div",null,y&&Object(a.h)("span",{class:"badge badge-pill badge-secondary"},y),w&&Object(a.h)("span",{class:"badge badge-pill badge-secondary ml-2"},w)),Object(a.h)("small",{class:"text-muted"},e&&e.dogs&&Object(a.h)("span",{class:""},Object(a.h)("i",{class:"fas fa-dog"})," ",e.dogs.length),e&&e.members&&Object(a.h)("span",{class:"ml-2"},Object(a.h)("i",{class:"fas fa-user"})," ",e.members.length),j&&j.distanceKm>0&&Object(a.h)("span",{class:"ml-2"},Object(a.h)("i",{class:"fas fa-road"})," ",Object(a.h)(h.a,{stores:this.props.stores,value:j.distanceKm})),j&&j.elevation>0&&Object(a.h)("span",{class:"ml-2"},Object(a.h)("i",{class:"fas fa-mountain"})," ",Object(a.h)(i.a,{stores:this.props.stores,value:j.elevation})),j&&j.duration>0&&Object(a.h)("span",{class:"ml-2"},Object(a.h)("i",{class:"fas fa-clock"})," ",o.a.secToHms(j.duration)),j&&j.speedAvg>0&&Object(a.h)("span",{class:"ml-2"},Object(a.h)("i",{class:"fas fa-tachometer-alt"})," ",Object(a.h)(n.a,{stores:this.props.stores,value:j.speedAvg}))))),t&&Object(a.h)("div",null,this.getButton()))))}})||c;t.a=d},zc1A:function(e,t,s){"use strict";s.r(t),function(e){function c(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);t&&(c=c.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,c)}return s}function a(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}var o,l=s("hosL"),r=(s("Utv1"),s("/eY4")),n=s("OhSV"),i=s("go65"),h=s("Y3FI"),b=s("KDoM"),d=(s("JWe/"),s("bMs3")),u=s("w8dD"),p=(s("Gx/q"),s("NMoA")),m=s("ISGx");const f={submenu:"dogs",hits:0,searchText:""};let O=Object(r.a)(o=class extends l.Component{constructor(e){var t;super(e),t=this,this.loadAll=async function(e=t.props){const{appState:s,storyStore:c,teamStore:a}=t.props.stores,{search:o}=e;await s.getSearch(o);const{publicTeams:l,publicUsers:r}=s;c.localUpdateField("publicTeams",l),c.localUpdateField("publicUsers",r),a.localUpdateField("publicTeams",l),a.localUpdateField("publicUsers",r);const{searchResultStories:n,searchResultDogs:i,searchResultWorkouts:h=[],searchResultTeams:b,searchResultTracks:d}=s,u=[n,i,h,b,d],p=u.map(e=>e.length).indexOf(Math.max(...u.map(e=>e.length))),m=u.map(e=>e.length).reduce((e,t)=>e+t,0);t.setState({searchText:o,submenu:["stories","dogs","workouts","teams","tracks","users"][p],hits:m})},this.search=()=>{const{searchText:e}=this.state;Object(h.route)("/search/"+e)},this.chooseSubmenu=e=>{this.setState({submenu:e.target.parentElement.dataset.menu||e.target.dataset.menu})},this.state=function(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?c(Object(s),!0).forEach((function(t){a(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):c(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}({},f)}componentDidMount(){this.loadAll()}componentWillReceiveProps(e){e.search!==this.props.search&&this.loadAll(e)}render(){const{appState:t,userStore:s}=this.props.stores,{search:c}=this.props,{searchResultStories:a,searchResultDogs:o,searchResultWorkouts:r=[],searchResultTeams:h,searchResultTracks:f,publicUsers:O}=t,{submenu:j,hits:g,searchText:v}=this.state;return Object(l.h)("div",{class:"container-fluid",style:"margin-bottom: 200px; margin-top: 60px;"},Object(l.h)("div",{class:"row"},Object(l.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-0 mb-2"},Object(l.h)("h1",null,Object(l.h)(n.c,{id:"search.title"},"Search")),Object(l.h)("h5",{class:"my-3"},Object(l.h)(n.c,{id:"search.search-for",fields:{search:c,hits:g}},g,' in your search for "',c,'"')),Object(l.h)("div",{class:"d-flex justify-content-center py-3"},Object(l.h)(n.b,null,Object(l.h)("input",{class:"form-control form-control mr-2",type:"search",placeholder:Object(l.h)(n.c,{id:"header.search-placeholder"},"Søk etter det meste..."),value:v,onInput:Object(i.a)(this,"searchText")})),Object(l.h)("button",{class:"btn btn-outline-success",type:"button",onClick:this.search},Object(l.h)(n.c,{id:"header.search"},"Søk")))),Object(l.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 my-3"},Object(l.h)("div",{class:"row"},Object(l.h)("div",{class:"w-100 overflow-hidden"},Object(l.h)("div",{class:"d-flex flex-row flex-nowrap pb-2 px-1",style:"overflow: auto; scroll-snap-type: x mandatory;"},Object(l.h)("div",{class:"col px-0 pt-2"},Object(l.h)("button",{class:`btn btn-block rounded-pill-left rounded-none ${"dogs"===j?"btn-primary":"btn-outline-primary"} text-nowrap`,style:"text-overflow: ellipsis; overflow: hidden;","data-menu":"dogs",onClick:this.chooseSubmenu},Object(l.h)("i",{class:"fas fa-dog"})," ",Object(l.h)(n.c,{id:"search.dogs"},"Dogs")," (",o.length||0,")")),Object(l.h)("div",{class:"col px-0 pt-2"},Object(l.h)("button",{class:`btn btn-block rounded-none ${"teams"===j?"btn-primary":"btn-outline-primary"} text-nowrap`,style:"text-overflow: ellipsis; overflow: hidden;","data-menu":"teams",onClick:this.chooseSubmenu},Object(l.h)("i",{class:"fas fa-users"})," ",Object(l.h)(n.c,{id:"search.teams"},"Teams")," (",h.length||0,")")),Object(l.h)("div",{class:"col px-0 pt-2"},Object(l.h)("button",{class:`btn btn-block rounded-none ${"tracks"===j?"btn-primary":"btn-outline-primary"} text-nowrap`,style:"text-overflow: ellipsis; overflow: hidden;","data-menu":"tracks",onClick:this.chooseSubmenu},Object(l.h)("i",{class:"fas fa-map-marked-alt"})," ",Object(l.h)(n.c,{id:"search.tracks"},"Tracks")," (",f.length||0,")")),Object(l.h)("div",{class:"col px-0 pt-2"},Object(l.h)("button",{class:`btn btn-block rounded-pill-right rounded-none ${"stories"===j?"btn-primary":"btn-outline-primary"} text-nowrap`,style:"text-overflow: ellipsis; overflow: hidden;","data-menu":"stories",onClick:this.chooseSubmenu},Object(l.h)("i",{class:"fas fa-comments"})," ",Object(l.h)(n.c,{id:"search.stories"},"Stories")," (",a.length||0,")")))))),"dogs"===j&&Object(l.h)(e,null,Object(l.h)("div",{class:"col-12"},(!o||0===o.length)&&Object(l.h)(e,null,Object(l.h)("div",{class:"text-center text-muted"},Object(l.h)("div",{class:"display-1"},Object(l.h)("i",{class:"fas fa-dog"})),Object(l.h)("h3",{class:"font-weight-lighter"},Object(l.h)(n.c,{id:"search.no-dogs-found"},"No dogs found.")))),o&&o.map(e=>Object(l.h)(b.a,{stores:this.props.stores,dog:e,url:"/dogs/public/"+e.uuidv4})))),"workouts"===j&&Object(l.h)(e,null,Object(l.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-0 mb-2"},(!r||0===r.length)&&Object(l.h)(e,null,Object(l.h)("div",{class:"text-center text-muted"},Object(l.h)("div",{class:"display-1"},Object(l.h)("i",{class:"fas fa-running"})),Object(l.h)("h3",{class:"font-weight-lighter"},Object(l.h)(n.c,{id:"search.no-workouts-found"},"No workouts found.")))),r&&r.map((e,t)=>Object(l.h)("div",{class:"row mb-4"},Object(l.h)("div",{class:"col-12 py-3"},Object(l.h)(m.a,{stores:this.props.stores,feed:e,idx:t})))))),"teams"===j&&Object(l.h)(e,null,Object(l.h)("div",{class:"col-12"},(!h||0===h.length)&&Object(l.h)(e,null,Object(l.h)("div",{class:"text-center text-muted"},Object(l.h)("div",{class:"display-1"},Object(l.h)("i",{class:"fas fa-users"})),Object(l.h)("h3",{class:"font-weight-lighter"},Object(l.h)(n.c,{id:"search.no-teams-found"},"No teams found.")))),h&&h.map(t=>Object(l.h)(e,null,Object(l.h)(d.a,{stores:this.props.stores,team:t,url:"/teams/public/"+t.uuidv4,showButton:!0,publicUsers:O,showMembers:1,showLocation:1}))))),"tracks"===j&&Object(l.h)(e,null,Object(l.h)("div",{class:"col-12"},(!f||0===f.length)&&Object(l.h)(e,null,Object(l.h)("div",{class:"text-center text-muted"},Object(l.h)("div",{class:"display-1"},Object(l.h)("i",{class:"fas fa-map-marked-alt"})),Object(l.h)("h3",{class:"font-weight-lighter"},Object(l.h)(n.c,{id:"search.no-tracks-found"},"No tracks found.")))),f&&f.map(e=>Object(l.h)(u.a,{stores:this.props.stores,track:e})))),"stories"===j&&Object(l.h)(e,null,Object(l.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-0 mb-2"},(!a||0===a.length)&&Object(l.h)(e,null,Object(l.h)("div",{class:"text-center text-muted"},Object(l.h)("div",{class:"display-1"},Object(l.h)("i",{class:"fas fa-comments"})),Object(l.h)("h3",{class:"font-weight-lighter"},Object(l.h)(n.c,{id:"search.no-stories-found"},"No stories found.")))),a&&a.map(e=>Object(l.h)("div",{class:"row mb-4"},Object(l.h)("div",{class:"col-12 py-3"},Object(l.h)(p.a,{stores:this.props.stores,story:e,key:"story-detail-"+e.id}))))))))}})||o;t.default=O}.call(this,s("hosL").Fragment)}}]);
//# sourceMappingURL=route-search.chunk.c6919.esm.js.map