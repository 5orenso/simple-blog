(window.webpackJsonp=window.webpackJsonp||[]).push([[51],{"/DnB":function(t,e,s){"use strict";function o(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,o)}return s}function c(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}var r,n=s("hosL"),a=(s("Utv1"),s("/eY4")),l={},i=Object(a.a)(r=function(t){function e(e){var s;return(s=t.call(this,e)||this).state=function(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?o(Object(s),!0).forEach((function(e){c(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):o(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}({},l),s.container=null,s}var s,r;r=t,(s=e).prototype=Object.create(r.prototype),s.prototype.constructor=s,s.__proto__=r;var a=e.prototype;return a.componentDidMount=function(){var t=this.props,e=t.horizontal,s=t.vertical,o=void 0===s?"":s,c={behavior:"smooth"};e&&(c.inline=e),o&&(c.block=o),this.container.scrollIntoView(c)},a.render=function(){var t=this;return Object(n.h)("div",{ref:function(e){return t.container=e}},"Â ")},e}(n.Component))||r;e.a=i},pJjI:function(t,e,s){"use strict";(function(t){var o,c=s("hosL"),r=s("Utv1"),n=s("/eY4"),a=s("OhSV"),l=(s("/DnB"),Object(n.a)(o=function(e){function s(){for(var t,s=arguments.length,o=new Array(s),c=0;c<s;c++)o[c]=arguments[c];return(t=e.call.apply(e,[this].concat(o))||this).toggleTeam=function(e){var s=t.props,o=s.callback,c=s.unsetTeamIfSelected,n=t.props.stores,a=n.dogStore,l=n.workoutStore;(void 0===c||c)&&e===a.currentTeam?(a.setCurrentTeam(void 0),l.setCurrentTeam(void 0)):(a.setCurrentTeam(e),l.setCurrentTeam(e)),r.a.isDefined(o)&&o()},t.showAllTeams=function(){var e=t.props.callback,s=t.props.stores,o=s.workoutStore;s.dogStore.setCurrentTeam(void 0),o.setCurrentTeam(void 0),r.a.isDefined(e)&&e()},t}var o,n;return n=e,(o=s).prototype=Object.create(n.prototype),o.prototype.constructor=o,o.__proto__=n,s.prototype.render=function(){var e=this,s=this.props.stores,o=s.userStore.teams,r=s.dogStore.currentTeam,n=this.props,l=n.highlight,i=n.showAll,h=void 0===i||i;return Object(c.h)("div",{class:"row mt-2"},Object(c.h)("div",{class:"w-100 overflow-hidden"},Object(c.h)("div",{class:"d-flex flex-row flex-nowrap pb-2 px-1 no-scrollbar",style:"overflow: auto; scroll-snap-type: x mandatory;"},o&&o.map((function(s,n){var a;return 1===o.length?a="rounded-pill-both":0===n?a="rounded-pill-left":n+1===o.length&&(a="rounded-pill-right"),Object(c.h)("div",{class:"col mb-0 px-0 clearfix",key:s.id},Object(c.h)("button",{class:"btn btn-sm btn-block \n\t\t\t\t\t\t\t\t\t\t\trounded-none "+a+"\n\t\t\t\t\t\t\t\t\t\t\t"+(r===s.id?"btn-success":"btn-outline-success")+"\n\t\t\t\t\t\t\t\t\t\t\ttext-nowrap clearfix",style:"text-overflow: ellipsis; overflow: hidden;",onClick:function(){return e.toggleTeam(s.id)}},Object(c.h)("i",{class:"fas fa-users"})," ",s.name,l&&l.indexOf(s.id)>-1&&Object(c.h)(t,null,r===s.id?Object(c.h)(t,null,Object(c.h)("i",{class:"fas fa-check float-right"})):Object(c.h)(t,null,Object(c.h)("div",{class:"spinner-grow text-warning float-right",role:"status"},Object(c.h)("span",{class:"sr-only"},"Loading...")),Object(c.h)("i",{class:"far fa-hand-point-left float-right",style:"font-size: 2.0em;"})))))}))),h&&Object(c.h)("div",{class:"row"},Object(c.h)("div",{class:"col-12 mb-1 px-1 d-flex justify-content-center"},Object(c.h)("button",{class:"btn btn-sm rounded-lg btn-link text-nowrap clearfix",style:"text-overflow: ellipsis; overflow: hidden;",onClick:this.showAllTeams},Object(c.h)("i",{class:"fas fa-users"})," ",Object(c.h)(a.c,{id:"teams.show-all"},"Show all"))))))},s}(c.Component))||o);e.a=l}).call(this,s("hosL").Fragment)},qZTL:function(t,e,s){"use strict";s.r(e),function(t){var o,c=s("hosL"),r=s("Utv1"),n=s("/eY4"),a=s("Y3FI"),l=(s("go65"),s("OhSV")),i=s("fh8t"),h=s.n(i),u=s("ZOvn"),d=s("67HY"),p=s("gbHB"),f=s("B+py"),b=s("pJjI"),g=s("s4FZ"),m=Object(n.a)(o=function(e){function s(t){var s;return(s=e.call(this,t)||this).loadApplication=function(){s.props.stores.applicationStore.load(s.state.id)},s.loadTeam=function(){return new Promise((function(t,e){var o;return s.setState({isLoading:!0}),o=s.props.stores,Promise.resolve(o.teamStore.load(o.workoutStore.currentTeam)).then((function(){try{return s.setState({isLoading:!1}),t()}catch(t){return e(t)}}),e)}))},s.changeLanguage=function(t){s.props.stores.appState.setLanguage(t.target.value)},s.grantAccess=function(){return new Promise((function(t,e){function o(){return s.setState({accessGranted:1}),t()}var c,r,n,a,l,i,h,u,d;return n=(c=s.props.stores).teamStore,a=c.workoutStore.currentTeam,l=(r=c.userStore).user,h=(i=s.state).returnUrl,u=i.id,d={grantedDate:new Date,returnUrl:h,team:a,appId:u},r.findApplicationById(u)?o.call(this):Promise.resolve(r.saveField(l.id,"applications",d)).then(function(){try{return Promise.resolve(r.saveField(l.id,"settings.veterinaryAllowed",1)).then(function(){try{return Promise.resolve(n.saveField(a,"public",1)).then(function(){try{return o.call(this)}catch(t){return e(t)}}.bind(this),e)}catch(t){return e(t)}}.bind(this),e)}catch(t){return e(t)}}.bind(this),e)}))},s.denyAccess=function(){Object(a.route)("/")},s.saveInputParams=function(){var t=s.props,e=t.returnUrl,o=t.id;e?(r.a.set("returnUrl",e),r.a.set("id",o)):(e=r.a.get("returnUrl"),o=r.a.get("id")),s.setState({returnUrl:e,id:o})},s.state={returnUrl:"",id:0},s}var o,n;n=e,(o=s).prototype=Object.create(n.prototype),o.prototype.constructor=o,o.__proto__=n;var i=s.prototype;return i.componentWillMount=function(){this.saveInputParams()},i.componentDidMount=function(){this.loadApplication(),this.loadTeam()},i.render=function(){var e=this.props.stores,s=e.appState,o=this.props.subsection,r=this.state,n=r.returnUrl,a=r.accessGranted,i=e.workoutStore.currentTeam,m=e.userStore.user,O=s.language,j=void 0===O?"en":O,v=s.darkmode,w=e.applicationStore.application,y=e.teamStore.team;if(!w)return Object(c.h)("div",{class:"container-fluid"},Object(c.h)("div",{class:"row"},Object(c.h)("div",{class:"col-10 offset-1 col-sm-8 offset-sm-2 col-md-6 offset-md-3 col-lg-4 offset-lg-4 pt-5"},Object(c.h)("div",{class:"d-flex justify-content-center"},v?Object(c.h)(t,null,Object(c.h)("img",{src:"https://themusher.app/assets/logo-qpaws-dark.png",height:"100"})):Object(c.h)(t,null,Object(c.h)("img",{src:"https://themusher.app/assets/logo-qpaws-light.png",height:"100"}))),Object(c.h)("div",{class:"d-flex justify-content-center"},Object(c.h)("h5",{class:"mt-1 mb-3 font-weight-lighter"},Object(c.h)(l.c,{id:"grant-access.title"},"Grant access"))),Object(c.h)("div",{class:"alert alert-danger",role:"alert"},Object(c.h)("h5",null,"Error"),"Application not found!"))));var k=w.title,S=w.body,x=w.images;return Object(c.h)("div",{class:"container-fluid"},Object(c.h)("div",{class:"row"},Object(c.h)("div",{class:"col-10 offset-1 col-sm-8 offset-sm-2 col-md-6 offset-md-3 col-lg-4 offset-lg-4 pt-5"},Object(c.h)("div",{class:"d-flex justify-content-center"},v?Object(c.h)(t,null,Object(c.h)("img",{src:"https://themusher.app/assets/logo-qpaws-dark.png",height:"100"})):Object(c.h)(t,null,Object(c.h)("img",{src:"https://themusher.app/assets/logo-qpaws-light.png",height:"100"}))),Object(c.h)("div",{class:"d-flex justify-content-center"},Object(c.h)("h5",{class:"mt-1 mb-3 font-weight-lighter"},Object(c.h)(l.c,{id:"grant-access.title"},"Grant access"))),Object(c.h)(g.a,{stores:this.props.stores,images:x,minHeight:"50px"}),Object(c.h)("h5",{class:"mt-3"},k),Object(c.h)("p",{class:"mt-3"},Object(c.h)(h.a,{markdown:u.a.replaceImages(S,x,j),markdownOpts:u.a.getMarkdownOptions()})))),Object(c.h)("div",{class:"row"},m.email?Object(c.h)(t,null,a?Object(c.h)(t,null,Object(c.h)("div",{class:"col-10 offset-1 col-sm-8 offset-sm-2 col-md-6 offset-md-3 col-lg-4 offset-lg-4 mt-3 border-top pt-3"},Object(c.h)("div",{class:"display-1 text-success text-center"},Object(c.h)("i",{class:"fas fa-check"})),Object(c.h)("p",null,Object(c.h)(l.c,{id:"grant-access.access-granted"},"Access granted. Now please click the button below to go back to")," ",k,"."),Object(c.h)("a",{class:"btn btn-success btn-block",href:n+"?userId="+m.uuidv4+"&teamId="+y.uuidv4,native:!0},Object(c.h)(l.c,{id:"grant-access.back-to-application"},"Back to"),": ",k," ",Object(c.h)("i",{class:"fas fa-arrow-right"})))):Object(c.h)(t,null,Object(c.h)("div",{class:"col-10 offset-1 col-sm-8 offset-sm-2 col-md-6 offset-md-3 col-lg-4 offset-lg-4 mt-3 border-top pt-3"},Object(c.h)("h5",{class:"font-weight-light"},Object(c.h)(l.c,{id:"grant-access.data-shared"},"Data beeing shared"),":"),Object(c.h)("p",null,Object(c.h)("i",{class:"fas fa-user"}),": ",Object(c.h)(l.c,{id:"grant-access.fields-shared-person"},"Image, Name, email, cellphone, address")),Object(c.h)("p",null,Object(c.h)("i",{class:"fas fa-dog"}),": ",Object(c.h)(l.c,{id:"grant-access.fields-shared-dog"},"Image, Name, chipId, gender, birth, vaccines")),Object(c.h)("p",null,Object(c.h)("i",{class:"fas fa-users"}),": ",Object(c.h)(l.c,{id:"grant-access.fields-shared-team"},"Name, description, images"))),Object(c.h)("div",{class:"col-10 offset-1 col-sm-8 offset-sm-2 col-md-6 offset-md-3 col-lg-4 offset-lg-4 mt-3 border-top pt-3"},Object(c.h)("h5",{class:"font-weight-light"},Object(c.h)(l.c,{id:"grant-access.choose-team"},"Choose team")),Object(c.h)("div",{class:"col-12"},Object(c.h)(b.a,{stores:this.props.stores,callback:this.loadTeam,key:"teams-"+i,showAll:!1}))),i?Object(c.h)(t,null,Object(c.h)("div",{class:"col-10 offset-1 col-sm-8 offset-sm-2 col-md-6 offset-md-3 col-lg-4 offset-lg-4 mt-3"},Object(c.h)("button",{class:"btn btn-primary btn-block",onClick:this.grantAccess},Object(c.h)("i",{class:"fas fa-check"})," ",Object(c.h)(l.c,{id:"grant-access.grant"},"Grant access")),Object(c.h)("button",{class:"mt-4 btn btn-sm btn-link text-muted float-right",onClick:this.denyAccess},Object(c.h)(l.c,{id:"grant-access.deny"},"Deny access")))):Object(c.h)(t,null,Object(c.h)("div",{class:"col-10 offset-1 col-sm-8 offset-sm-2 col-md-6 offset-md-3 col-lg-4 offset-lg-4 mt-3"},Object(c.h)("span",{class:"display-4"},Object(c.h)("i",{class:"fas fa-hand-point-up"})," Choose team"))))):Object(c.h)(t,null,!o&&Object(c.h)(d.a,{stores:this.props.stores,showLogo:!1,routeLoginOk:"/grant-access",routeLoginNew:"/grant-access/newUser",routeLoginForgot:"/grant-access/forgotPassword"}),"newUser"===o&&Object(c.h)(p.default,{stores:this.props.stores,showLogo:!1,routeLogin:"/grant-access",routeLoginForgot:"/grant-access/forgotPassword",skipPubSub:!0}),"forgotPassword"===o&&Object(c.h)(f.default,{stores:this.props.stores,showLogo:!1,routeLogin:"/grant-access",routeLoginNew:"/grant-access/newUser"}))),Object(c.h)("div",{class:"col-10 offset-1 col-sm-8 offset-sm-2 col-md-6 offset-md-3 col-lg-4 offset-lg-4"},Object(c.h)("div",{class:"form-row align-items-center"},Object(c.h)("div",{class:"col-auto my-1 mx-auto",style:"width: 80px;"},Object(c.h)("select",{class:"custom-select",style:"background-color: inherit; border: none;",onInput:this.changeLanguage},Object(c.h)("option",{value:"no",selected:"no"===j},"ðŸ‡³ðŸ‡´ NO"),Object(c.h)("option",{value:"en",selected:"en"===j},"ðŸ‡¬ðŸ‡§ EN"),Object(c.h)("option",{value:"es",selected:"es"===j},"ðŸ‡ªðŸ‡¸ ES"),Object(c.h)("option",{value:"de",selected:"de"===j},"ðŸ‡©ðŸ‡ª DE"),Object(c.h)("option",{value:"fr",selected:"fr"===j},"ðŸ‡«ðŸ‡· FR"),Object(c.h)("option",{value:"ru",selected:"ru"===j},"ðŸ‡·ðŸ‡º RU"),Object(c.h)("option",{value:"se",selected:"se"===j},"ðŸ‡¸ðŸ‡ª SE"))))))},s}(c.Component))||o;e.default=m}.call(this,s("hosL").Fragment)}}]);
//# sourceMappingURL=route-grant-access.chunk.4390e.js.map