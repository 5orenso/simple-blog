{"version":3,"sources":["webpack:///./components/util/scrollIntoView.js","webpack:///./components/workout/index.js","webpack:///./components/modal/index.js","webpack:///./components/dog/scroller.js","webpack:///./components/workout/week.js","webpack:///./routes/workouts/week.js","webpack:///./components/team/teams.js"],"names":["initialState","ScrollIntoView","observer","Component","constructor","props","super","this","state","container","componentDidMount","horizontal","vertical","behavior","inline","block","scrollIntoView","render","ref","c","getWorkoutColor","workout","type","getWorkoutIcon","MAX_LOADINDEX","mu","getMaxLoadIndex","showAddComment","viewImageIdx","likeWorkout","Workout","toggleDate","e","stopPropagation","preventDefault","showDate","setState","async","workoutStore","stores","workoutId","id","setTimeout","toggleAddComment","target","parentElement","dataset","inputRef","focus","viewImage","idx","closest","shareLink","url","title","text","appState","shareUrl","onTeamClick","teamid","showTeam","hideTeam","onUserClick","onDogClick","dogid","dogs","showDog","hideDog","updateTimer","forceShowDate","wrapperClasses","wrapperClassesRow","userStore","viewmode","hasShareApi","user","allDogs","language","intensity","findIntensity","code","team","findTeam","teamName","name","teamNames","push","teams","forEach","likes","comments","hasLikedWorkout","findIndex","gpxInfo","mushers","loadIndex","workoutEquipment","findEquipment","equipment","workoutEquipmentIcon","field","musherImages","length","slice","map","musher","u","findPublicUser","images","publicUser","image","s3SmallLink","mapImage","imgs","toJS","batteryUsage","battegryLevelStart","battegryLevelEnd","views","getViews","statistics","marginTop","marginBottom","back","class","style","img","temperature","value","isLocked","isInProgress","role","href","date","onClick","util","formatDate","locale","hour12","hour","minute","formatDistance","Date","getLoadIndexColor","normalizeBetween","Math","floor","getLoadIndexText","garminId","stravaId","track","dogsLeft","dogsRight","sledWeight","format","indexOf","kcalBurnedTotal","kcalMeatGramsTotal","kcalSalmonGramsTotal","kcalFatGramsTotal","description","markdown","replaceImages","comment","markdownOpts","getMarkdownOptions","distanceKm","elevation","duration","secToHms","speedAvg","avgGpsMovingSpeed","dblClick","likeRef","data-id","data-url","uuidv4","data-title","rel","data-native","inputRefObject","col","offset","compact","object","isTeamAdmin","isAdmin","Modal","touchStart","startY","touches","pageY","touchEnd","undefined","readyToRefresh","touchMove","close","refreshing","y","appContainer","scrollTop","imagexxl","thumb","src","onTouchstart","onTouchend","onTouchmove","download","DogScroller","scrollImages","scrollLeft","clientWidth","imageIdx","nearestInt","round","diff","abs","Number","isInteger","sortByName","a","b","dogA","find","dogB","size","onScroll","sort","dogId","dog","filter","d","className","showName","showPosition","WorkoutWeek","DAYS","getDays","darkmode","week","year","daysOfWeek","getDaysInWeek","totalDistanceKmWeek","totalCountWeek","totalElevationWeek","totalDurationWeek","totalSpeedavgWeek","weekNum","parseInt","yearNum","nextWeek","nextYear","getNextWeek","prevWeek","prevYear","getPrevWeek","fields","getMonth","getFullYear","isoDate","day","getDay","yyyy","mm","dd","getDate","summary","findWorkoutSummaryWeekDay","count","getDayColor","getTrainingColor","avgArr","MARGIN_TOP","MARGIN_BOTTOM","SUB_MENU_MARGIN_TOP","subMenuMarginTop","isLoading","Workouts","loadWorkouts","loadWorkoutSummary","loadDogs","dogStore","currentTeam","load","query","addData","trackStore","getWorkoutSummary","getWorkoutSummaryDay","componentWillReceiveProps","nextProps","shouldComponentUpdate","getYear","workoutsDay","callback","key","Teams","toggleTeam","unsetTeamIfSelected","setCurrentTeam","isDefined","showAllTeams","highlight","showAll"],"mappings":"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","file":"58.chunk.ed68a.esm.js","sourcesContent":["import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\n\nconst initialState = {};\n\n@observer\nclass ScrollIntoView extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            ...initialState,\n        };\n        this.container = null;\n    }\n\n    componentDidMount() {\n        const { horizontal, vertical = '' } = this.props;\n        const props = {\n            behavior: 'smooth',\n        };\n        if (horizontal) {\n            props.inline = horizontal;\n        }\n        if (vertical) {\n            props.block = vertical;\n        }\n\t\tthis.container.scrollIntoView(props);\n\t}\n\n    render() {\n        return (\n            <div ref={c => this.container = c}>&nbsp;</div>\n        );\n    }\n}\n\nexport default ScrollIntoView;\n","import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport { toJS } from 'mobx';\nimport { Text, Localizer, withText } from 'preact-i18n';\nimport Markdown from 'preact-markdown';\n\nimport Modal from '../modal';\nimport WorkoutComments from '../../components/workout/comments';\nimport WorkoutAddComment from '../../components/workout/commentAdd';\nimport ImageScroller from '../../components/imageScroller';\nimport DogScroller from '../../components/dog/scroller';\n\nimport Overlay from '../../components/overlay/';\nimport TeamsPublicDetail from '../../routes/teams/publicDetail';\nimport DogPublicDetail from '../../routes/dogs/publicDetail';\n\nimport LikesAndComments from '../../components/feedback/likesAndComments';\nimport Views from '../../components/feedback/views';\n\nimport Speed from '../../components/data/speed';\nimport Elevation from '../../components/data/elevation';\nimport Weight from '../../components/data/weight';\nimport Distance from '../../components/data/distance';\nimport Temperature from '../../components/data/temperature';\n\nimport mu from '../../lib/musher-util';\n\nconst MAX_LOADINDEX = mu.getMaxLoadIndex();\n\nfunction getWorkoutColor(workout) {\n\tswitch (workout.type) {\n\t\tcase 1:\n\t\t\treturn 'border-primary';\n\t\tcase 2:\n\t\t\treturn 'border-danger';\n\t\tcase 3:\n\t\t\treturn 'border-success';\n\t\tcase 4:\n\t\t\treturn 'border-info';\n\t\tdefault:\n\t\t\treturn 'border-warning';\n\t}\n}\n\nfunction getWorkoutIcon(workout) {\n\tswitch (workout.type) {\n\t\tcase 1:\n\t\t\treturn 'fas fa-running';\n\t\tcase 2:\n\t\t\treturn 'fas fa-flag-checkered';\n\t\tcase 3:\n\t\t\treturn 'fas fa-hiking';\n\t\tcase 4:\n\t\t\treturn 'fas fa-futbol';\n\t\tdefault:\n\t\t\treturn 'fas fa-hiking';\n\t}\n}\n\nfunction displayDistance(distanceKm) {\n\tif (distanceKm < 5) {\n\t\treturn util.format(distanceKm, 2);\n\t}\n\tif (distanceKm < 10) {\n\t\treturn util.format(distanceKm, 1);\n\t}\n\treturn util.format(distanceKm, 1);\n}\n\nconst initialState = {\n\tshowAddComment: false,\n    viewImageIdx: {},\n    likeWorkout: {},\n};\n\n@observer\nclass Workout extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            ...initialState,\n        };\n        this.updateTimer = {};\n\t\tthis.inputRef = {};\n    }\n\n    toggleDate = (e) => {\n        e.stopPropagation();\n        e.preventDefault();\n        const { showDate } = this.state;\n        this.setState({ showDate: !showDate });\n    }\n\n\n\tlikeWorkout = async () => {\n\t\tconst { workoutStore } = this.props.stores;\n        const { workout } = this.props;\n        const workoutId = workout.id;\n\n        const { likeWorkout } = this.state;\n        likeWorkout[workoutId] = true;\n        this.setState({ likeWorkout });\n        setTimeout(() => {\n            const { likeWorkout } = this.state;\n            delete likeWorkout[workoutId];\n            this.setState({ likeWorkout });\n        }, 1200);\n\n\t\tconst response = await workoutStore.likeWorkout({ id: workoutId });\n        if (response && response.status === 200) {\n\n\t\t}\n\t}\n\n\ttoggleAddComment = (e) => {\n\t\tconst workoutId = e.target.parentElement.dataset.id || e.target.dataset.id;\n\t\tconst { showAddComment } = this.state;\n\t\tthis.setState({\n\t\t\tshowAddComment: !showAddComment,\n\t\t}, () => {\n\t\t\tif (this.inputRef[workoutId]) {\n\t\t\t\tthis.inputRef[workoutId].focus();\n\t\t\t}\n\t\t});\n\t}\n\n    viewImage = (e) => {\n\t\tconst { id, idx } = e.target.closest('img').dataset;\n        const { viewImageIdx } = this.state;\n        viewImageIdx[id] = idx;\n        this.setState({ viewImageIdx });\n    }\n\n    shareLink = (e) => {\n        const { url, title, text } = e.target.closest('button').dataset;\n        const { appState } = this.props.stores;\n        appState.shareUrl({ url, title, text });\n    }\n\n        // Overlay functions\n    onTeamClick = (e, teamid) => {\n        e.preventDefault();\n        e.stopPropagation();\n        this.setState({\n            showTeam: teamid,\n        });\n        return false;\n    }\n\n    hideTeam = () => {\n        this.setState({\n            showTeam: null,\n        });\n    }\n\n    onUserClick = (e, userid) => {\n        e.preventDefault();\n        e.stopPropagation();\n        return false;\n    }\n\n    onDogClick = (e, dogid, dogs) => {\n        e.preventDefault();\n        e.stopPropagation();\n        this.setState({\n            showDog: dogid,\n            dogs,\n        });\n        return false;\n    }\n\n    hideDog = () => {\n        this.setState({\n            showDog: null,\n        });\n    }\n\n    render() {\n        const {\n            showDate,\n            showAddComment,\n            viewImageIdx = {},\n            likeWorkout,\n            dogs,\n            showTeam,\n            showDog,\n        } = this.state;\n        const {\n            workout,\n            showDate: forceShowDate,\n            wrapperClasses = 'col-12 col-sm-8 col-lg-6 offset-sm-2 offset-lg-3',\n            wrapperClassesRow = 'row',\n        } = this.props;\n\t\tconst { userStore, appState, workoutStore } = this.props.stores;\n        const { viewmode, hasShareApi } = appState;\n        const { user, dogs: allDogs } = userStore;\n        const { language = 'en' } = user;\n        const intensity = userStore.findIntensity({ code: workout.intensity, language }) || {};\n        // const teamName = userStore.findTeam(workout.team);\n        const team = userStore.findTeam(workout.team, true) || {};\n        const teamName = team.name;\n        // const teamNames = workout.teams ? workout.teams.map(e => userStore.findTeam(e)) : [];\n        const teamNames = [];\n        if (teamName) {\n            teamNames.push(teamName);\n        }\n        if (workout.teams) {\n            workout.teams.forEach((e) => {\n                if (userStore.findTeam(e)) {\n                    teamNames.push(userStore.findTeam(e));\n                }\n            });\n        }\n\n        const { likes = [], comments = [] } = workout;\n\t\tconst hasLikedWorkout = workout.likes && workout.likes.findIndex(e => e.user === user.id) > -1;\n        const { gpxInfo = {}, mushers = [] } = workout;\n\t\tconst { loadIndex = 0 } = gpxInfo;\n        const workoutEquipment = userStore.findEquipment({ equipment: workout.equipment, language });\n        const workoutEquipmentIcon = userStore.findEquipment({ equipment: workout.equipment, field: 'icon' });\n\n        const musherImages = [];\n        if (mushers.length > 1) {\n            mushers.slice(1, 10).map((musher) => {\n                const u = workoutStore.findPublicUser(musher) || {};\n                if (u.images && u.images[0]) {\n                    musherImages.push(u.images[0]);\n                }\n            });\n        }\n\n        const publicUser = workoutStore.findPublicUser(mushers[0]) || {};\n        let image;\n        if (publicUser && publicUser.images && publicUser.images[0]) {\n            image = publicUser.images[0];\n        } else if (team.image && team.image.s3SmallLink) {\n            image = team.image;\n        } else if (team.images && team.images[0] && team.images[0].s3SmallLink) {\n            image = team.images[0];\n        } else if (workout.image && workout.image.s3SmallLink) {\n            image = workout.image;\n        }\n\n        const images = [];\n        if (workout.mapImage) {\n            images.push({\n                ...workout.mapImage,\n                type: 'map',\n            });\n        }\n        if (workout.images) {\n            const imgs = toJS(workout.images);\n            images.push(...imgs);\n        }\n        const imageIdx = viewImageIdx[workout.id] ? viewImageIdx[workout.id] : 0;\n        const currentImage = images && images[imageIdx] ? images[imageIdx] : null;\n\n        let batteryUsage;\n        if (workout && workout.gpxInfo && workout.gpxInfo.battegryLevelStart) {\n            batteryUsage = (workout.gpxInfo.battegryLevelStart - workout.gpxInfo.battegryLevelEnd) * 100;\n        }\n\n        const views = mu.getViews(workout.statistics);\n\n        // let temperature;\n        // let windSpeed;\n        // if (util.checkNested(workout, 'temperature')) {\n        //     const yr = toJS(workout.yr[0].instant.details);\n        //     // displayValue = `Yr.no: üå°Ô∏è ${yr.air_temperature}¬∞C, üí® ${yr.wind_speed}m/s üß≠ ${mu.windDirection(yr.wind_from_direction)}, ‚òÅÔ∏è ${yr.cloud_area_fraction}%, ${yr.air_pressure_at_sea_level}mb, üí¶ ${yr.relative_humidity}%`;\n        //     temperature = `${yr.air_temperature}¬∞C`;\n        //     windSpeed = `${yr.wind_speed}m/s`;\n        // }\n\t\t// // const loadMultiplier = loadIndex / 100;\n\n        return (<>\n\n            {showTeam && <Overlay>\n                <TeamsPublicDetail stores={this.props.stores} teamid={showTeam} marginTop={'0px;'} marginBottom={'0px;'} back={this.hideTeam} hideTeam={this.hideTeam} />\n            </Overlay>}\n\n            {showDog && <Overlay>\n                <DogPublicDetail stores={this.props.stores} dogid={showDog} marginTop={'0px;'} marginBottom={'0px;'} back={this.hideDog} dogs={dogs} />\n            </Overlay>}\n\n            <div class='w-100 mb-2'>\n                <div class={wrapperClassesRow}>\n\n                    <div class={`${wrapperClasses} d-flex mb-0 position-relative`}>\n\n                        {/* {workout.gpxInfo && <svg viewBox='0 0 300 300' style='top: 80px; left: 10px; width: 90px; height: 90px;' class='position-absolute'>\n                            <path d={`${workout.gpxInfo.svgMap}`} style='fill: none; stroke: #0063FF; stroke-width: 5; opacity: 0.3;' />\n                        </svg>} */}\n\n                        {/* {JSON.stringify(workout, null, 4)} */}\n                        <div class='text-center'>\n                            <div\n                                class={`position-relative text-center border rounded-circle imageRounded ${getWorkoutColor(workout)}`}\n                                style={`${image ? `background-image: url(\"${image.s3SmallLink}\"); background-size: cover;` : ''} border-width: 3px !important;`}\n                            >\n                                {!image && <i class={`${getWorkoutIcon(workout)} text-${intensity.class ? intensity.class : 'muted'} mt-3`} style='font-size: 40px;' />}\n\n                                {musherImages && musherImages.map((img, idx) => <>\n                                    <div\n                                        class='position-absolute rounded-circle imageRounded border imageRoundedThumb border-white'\n                                        style={`\n                                            background-image: url(\"${img.s3SmallLink}\");\n                                            background-size: cover;\n                                            bottom: -3px;\n                                            left: ${-5 + (idx * 10)}px;\n                                        `}\n                                    />\n                                </>)}\n                            </div>\n                            {workout.temperature !== 0 && <>\n                                <span class='text-muted font-weight-light'>\n                                    <Temperature stores={this.props.stores} value={workout.temperature} />\n                                </span>\n                            </>}\n                        </div>\n                        <div class='flex-grow-1 pl-3' style='line-height: 1.2em;'>\n                            <span class='float-right'>\n                                {workout.isLocked === 1 && <i class='fas fa-lock text-danger ml-3' />}\n                                {workout.isInProgress === 1 && <div class='spinner-grow text-success ml-3' role='status' />}\n                                {workout.isInProgress === 2 && <i class='fas fa-pause-circle text-warning ml-3' />}\n                            </span>\n                            <a class='stretched-link' href={`/workouts/${workout.id}`}>\n                                <h5 class='my-0 mb-1' style='line-height: 1.0em;'>\n                                    {workout.name}\n                                </h5>\n                            </a>\n                            {teamNames && teamNames.length > 0 && <small class='font-weight-lighter'>\n                                {teamNames.map((name, idx) => <>{idx > 0 ? ', ' : ''}{name}</>)}\n                            </small>}\n                            <br />\n                            <small class='text-muted'>\n                                {workout.date && <small onClick={this.toggleDate}>\n                                    {forceShowDate || showDate ? util.formatDate(workout.date, { locale: 'no-NB', hour12: false, hour: '2-digit', minute: '2-digit' }) : util.formatDistance(workout.date, new Date(), { locale: 'no-NB' })}\n                                </small>}\n                                <span class={`badge badge-${intensity.class} ml-2`}>{intensity.name}</span>\n                                {loadIndex > 0 && <span class={`ml-2 text-${mu.getLoadIndexColor(util.normalizeBetween(loadIndex, 0, MAX_LOADINDEX, 0, 100))}`}>\n                                    <i class='fas fa-hand-rock mr-1' />\n                                    {Math.floor(util.normalizeBetween(loadIndex, 0, MAX_LOADINDEX, 0, 100))} -&nbsp;\n                                    {mu.getLoadIndexText(util.normalizeBetween(loadIndex, 0, MAX_LOADINDEX, 0, 100))}\n                                </span>}\n                                <br />\n                            </small>\n                            <small>\n                                <div class='text-muted'>\n                                    {workout.garminId > 0 && <div class={`float-left mr-2 text-center border rounded-circle imageRounded imageRoundedIcon`} style={`background-image: url(\"./assets/garmin-connect.png\");`} />}\n                                    {workout.stravaId > 0&& <div class={`float-left mr-2 text-center border rounded-circle imageRounded imageRoundedIcon`} style={`background-image: url(\"./assets/strava-icon.png\");`} />}\n\n                                    {workout.equipment > 0 && <><i class={`${workoutEquipmentIcon} ml-2`} /> {workoutEquipment}</>}\n                                    {/* {workout.distanceKm > 0 && <><i class='fas fa-road ml-2' /> {displayDistance(workout.distanceKm)}km</>}\n                                    {workout.elevation > 0 && <><i class='fas fa-mountain ml-2' /> {util.format(workout.elevation, 0)}m</>} */}\n                                    {/* {workout.speedAvg > 0 && <><i class='fas fa-tachometer-alt ml-2' /> {util.format(workout.speedAvg, 1)}km/t</>} */}\n                                    {workout.dogs > 0 && <><i class='fas fa-dog ml-2' /> {workout.dogs.length}</>}\n                                    {workout.track > 0 && <><i class={`fas fa-map-marked text-${workout.track > 0 ? 'success' : 'danger'} ml-2`} /></>}\n                                    {workout.dogsLeft > 0 && <><i class={`fas fa-crosshairs text-${workout.dogsLeft && workout.dogsRight ? 'success' : 'danger'} ml-2`} /></>}\n                                    {workout.sledWeight > 0 && <>\n                                        <i class='fas fa-sleigh ml-2' /> <Weight stores={this.props.stores} value={workout.sledWeight} />\n                                    </>}\n                                    {batteryUsage > 0 && <span class='text-muted ml-2'><i class='fas fa-battery-three-quarters' /> {util.format(batteryUsage, 1)}% <Text id='workout.battery-used'>used</Text></span>}\n                                </div>\n                                {['beta', 'advanced'].indexOf(viewmode) > -1 && (\n                                    <span class='text-muted'>\n                                        <i class='fas fa-balance-scale' /> {util.format(workout.kcalBurnedTotal)} <Text id='workout.kcal'>kcal</Text>\n                                        <i class='fas fa-drumstick-bite ml-2' /> <Weight stores={this.props.stores} value={workout.kcalMeatGramsTotal / 1000} />\n                                        <i class='fas fa-fish ml-2' /> <Weight stores={this.props.stores} value={workout.kcalSalmonGramsTotal / 1000} />\n                                        <i class='fas fa-piggy-bank ml-2' /> <Weight stores={this.props.stores} value={workout.kcalFatGramsTotal / 1000} />\n                                    </span>\n                                )}\n                            </small>\n                        </div>\n                    </div>\n                    <div class={`${wrapperClasses} position-relative mt-2`}>\n                        <strong>\n                            {workout.description}\n                        </strong>\n                    </div>\n                    <div class={`${wrapperClasses} position-relative`}>\n                        <Markdown markdown={mu.replaceImages(workout.comment, workout.images, language)} markdownOpts={mu.getMarkdownOptions()} />\n                    </div>\n                    <div class={`${wrapperClasses} d-flex mb-0 position-relative`}>\n                        <div class='container-fluid px-0'>\n                            <div class='row mt-1'>\n                                {workout.distanceKm > 0 && <div class='col-3'>\n                                    <div class='text-overflow'>\n                                        <small><i class='fas fa-road' /> <Text id='workout.calendar.distance'>Distanse</Text></small>\n                                    </div>\n                                    <div class='text-overflow font-weight-light' style='font-size: 1.2em;'>\n                                        <Distance stores={this.props.stores} value={workout.distanceKm} />\n                                    </div>\n                                </div>}\n                                {workout.elevation > 0 && <div class='col-3'>\n                                    <div class='text-overflow'>\n                                        <small><i class='fas fa-mountain' /> <Text id='workout.calendar.ascend'>H√∏ydemeter</Text></small>\n                                    </div>\n                                    <div class='text-overflow font-weight-light' style='font-size: 1.2em;'>\n                                        <Elevation stores={this.props.stores} value={workout.elevation} />\n                                    </div>\n                                </div>}\n                                {workout.duration > 0 && <div class='col-3'>\n                                    <div class='text-overflow'>\n                                        <small><i class='fas fa-clock' /> <Text id='workout.calendar.duration'>Varighet</Text></small>\n                                    </div>\n                                    <div class='text-overflow font-weight-light' style='font-size: 1.2em;'>\n                                        {util.secToHms(workout.duration, true)}\n                                    </div>\n                                </div>}\n                                {workout.speedAvg > 0 && <div class='col-3'>\n                                    <div class='text-overflow'>\n                                        <small><i class='fas fa-tachometer-alt' /> <Text id='workout.calendar.avg-speed'>Snittfart</Text></small>\n                                    </div>\n                                    <div class='text-overflow font-weight-light' style='font-size: 1.2em;'>\n\t\t\t\t                        {workout.gpxInfo && workout.gpxInfo.avgGpsMovingSpeed > 0 ? <>\n                                            <Speed stores={this.props.stores} value={workout.gpxInfo.avgGpsMovingSpeed * 3.6} />\n                                        </> : <>\n                                            <Speed stores={this.props.stores} value={workout.speedAvg} />\n                                        </>}\n                                    </div>\n                                </div>}\n                            </div>\n                        </div>\n                    </div>\n\n                    {['beta', 'advanced', 'normal'].indexOf(viewmode) > -1 && (\n                        <div class={`${wrapperClasses}`}>\n                            <div class='container-fluid px-0 mt-1'>\n                                <div class='row'>\n                                    <ImageScroller stores={this.props.stores} images={images} id={workout.id} dblClick={this.likeWorkout} likeRef={likeWorkout} />\n                                </div>\n                            </div>\n                        </div>\n                    )}\n\n                    {['beta', 'advanced', 'normal'].indexOf(viewmode) > -1 && <>\n                        {workout.dogs && workout.dogs.length > 0 && <div class='container-fluid px-0 mt-1'>\n                            <div class='row pt-2'>\n                                <DogScroller stores={this.props.stores} dogs={workout.dogs} allDogs={allDogs} onDogClick={this.onDogClick} />\n                            </div>\n                        </div>}\n\n                        <div class='mt-2'>\n                            <LikesAndComments\n                                stores={this.props.stores}\n                                likes={likes}\n                                comments={comments}\n                                type='workout'\n                                onTeamClick={this.onTeamClick}\n                                onUserClick={this.onUserClick}\n                            />\n                        </div>\n\n                    </>}\n\n                    {['beta', 'advanced', 'normal'].indexOf(viewmode) > -1 && <>\n                        <div class={`${wrapperClasses} mb-0 position-relative mt-2`}>\n                            <div class='row'>\n                                <div class='col text-center'>\n                                    <button type='button' class={`btn btn-sm btn-outline-${hasLikedWorkout ? 'primary' : 'secondary'} btn-lg btn-block ${hasLikedWorkout ? 'text-primary' : ''}`}\n                                        onClick={this.likeWorkout}\n                                        // disabled={hasLikedWorkout}\n                                    >\n                                        <i class={`${hasLikedWorkout ? 'text-primary fas' : 'far'} fa-thumbs-up`} /> <Text id='comments.like'>Lik</Text>\n                                    </button>\n                                </div>\n                                <div class='col text-center'>\n                                    <button type='button' class='btn btn-sm btn-outline-secondary btn-lg btn-block'\n                                        data-id={workout.id}\n                                        onClick={this.toggleAddComment}\n                                    >\n                                        <i class='fas fa-comment' /> <Text id='comments.comment-add'>Kommentar</Text>\n                                    </button>\n                                </div>\n                                {hasShareApi ? <>\n                                    <div class='col text-center'>\n                                        <button class='btn btn-sm btn-outline-secondary btn-lg btn-block text-overflow'\n                                            onClick={this.shareLink}\n                                            data-url={`https://themusher.app/share/workout/${workout.uuidv4}`}\n                                            data-title={`title: ${workout.name}`}\n                                        >\n                                            <i class='fas fa-share' /> <Text id='workout.share'>Del</Text>\n                                        </button>\n                                    </div>\n                                </> : <>\n                                    <div class='col text-center'>\n                                        <a class='btn btn-sm btn-outline-secondary btn-lg btn-block text-overflow'\n                                            href={`https://themusher.app/share/workout/${workout.uuidv4}`}\n                                            target='_blank'\n                                            rel='noreferrer'\n                                            data-native\n                                        >\n                                            <i class='fas fa-share' /> <Text id='workout.share'>Del</Text>\n                                        </a>\n                                    </div>\n                                </>}\n                            </div>\n                        </div>\n\n                        <div class={`${wrapperClasses} mt-2 mb-3`}>\n                            {showAddComment && <WorkoutAddComment\n                                stores={this.props.stores}\n                                workout={workout}\n                                inputRef={c => this.inputRef[workout.id] = c}\n                                inputRefObject={this.inputRef}\n                                col='12'\n                                offset='0'\n                            />}\n                            <WorkoutComments stores={this.props.stores} workout={workout} col='10' offset='2' compact={true} />\n                        </div>\n\n                        {views > 0 && <>\n                            <div class='mt-2'>\n                                <Views\n                                    stores={this.props.stores}\n                                    views={views}\n                                    object={workout}\n                                    type='workout'\n                                    isTeamAdmin={true}\n                                    isAdmin={false}\n                                    onTeamClick={this.onTeamClick}\n                                    onUserClick={this.onUserClick}\n                                />\n                            </div>\n                        </>}\n\n                    </>}\n\n                </div>\n            </div>\n        </>);\n    }\n}\n\nexport default Workout;\n","import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport { Text, Localizer, withText } from 'preact-i18n';\n\n@observer\nclass Modal extends Component {\n    toggleDate = () => {\n        const { showDate } = this.state;\n        this.setState({ showDate: !showDate });\n    }\n\n    touchStart = (e) => {\n        e.stopPropagation();\n        this.setState({\n            startY: e.touches[0].pageY,\n        })\n    }\n\n    touchEnd = (e) => {\n        e.stopPropagation();\n        this.setState({\n            startY: undefined,\n            readyToRefresh: false,\n        })\n    }\n\n    touchMove = (e) => {\n        e.stopPropagation();\n        const { close } = this.props;\n        const { startY, refreshing } = this.state;\n        const scrollDistance = 30;\n        const y = e.touches[0].pageY;\n        if (this.appContainer) {\n            const { scrollTop } = this.appContainer;\n            if (scrollTop === 0 && y > startY + scrollDistance && !refreshing) {\n                close();\n            }\n        }\n    }\n\n    render() {\n        const { showDate } = this.state;\n        const { image, imagexxl, close, thumb, name, title, date } = this.props;\n        return (\n            <div class='fixed-top bg-dark text-center pt-2' style='width: 100vw; height: 100vh;'>\n                <button class='btn btn-secondary float-right mr-2' onClick={close}>X</button>\n\n                    <div class='d-flex mb-2 px-2'>\n                        {/* {JSON.stringify(dog, null, 4)} */}\n                        {thumb && <div class={`text-center border rounded-circle imageRounded imageRoundedSmall`} style={thumb ? `background-image: url(\"${thumb}\");` : ''}>\n                            &nbsp;\n                        </div>}\n                        <div class='flex-grow-1 pl-3 pr-2 text-left' style='line-height: 1.3em;'>\n                            {name && <strong class='mr-2'>{name}:</strong>}\n                            {title}<br />\n                            <small class='text-muted'>\n                                {date && <small onClick={this.toggleDate}>\n                                    {showDate ? util.formatDate(date, { locale: 'no-NB' }) : util.formatDistance(date, new Date(), { locale: 'no-NB' })}\n                                </small>}\n                            </small>\n                        </div>\n                    </div>\n\n\n                <img src={image}\n                    class='img-fluid align-middle mt-2 mb-2'\n                    onClick={close}\n                    onTouchstart={this.touchStart}\n                    onTouchend={this.touchEnd}\n                    onTouchmove={this.touchMove}\n                    ref={c => this.appContainer = c}\n                />\n\n                <a target='_blank' rel='noopener noreferrer' href={imagexxl || image} download={imagexxl || image}>\n                    <i class='fas fa-download' /> <Text id='modal.download'>Last ned bildet</Text>\n                </a>\n            </div>\n        );\n    }\n}\n\nexport default Modal;\n","import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport { Text, Localizer } from 'preact-i18n';\n\nimport DogSimplePublic from './simplePublic';\n\n@observer\nclass DogScroller extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            imageIdx: 0,\n        };\n    }\n\n    scrollImages = (e) => {\n        const { dogs } = this.props;\n\n        const { scrollLeft, scrollWidth, clientWidth } = e.target;\n        const imageStep = clientWidth;\n        const imageIdx = scrollLeft / imageStep;\n        // console.log({ e, imageStep, imageIdx, scrollLeft, scrollWidth, clientWidth });\n\n        const nearestInt = Math.round(imageIdx);\n        const diff = Math.abs(nearestInt - imageIdx);\n        // console.log({ nearestInt, diff });\n        if (Number.isInteger(imageIdx) || diff < 0.1) {\n            this.setState({\n                imageIdx: nearestInt,\n            });\n        }\n    }\n\n    sortByName = (a, b) => {\n        const { allDogs = [] } = this.props;\n        const dogA = allDogs.find(e => e.id === a);\n        const dogB = allDogs.find(e => e.id === b);\n        if (dogA && dogB) {\n            if (dogA.name > dogB.name) {\n                return 1;\n            }\n        }\n        return -1;\n    }\n\n    render() {\n        const { imageIdx } = this.state;\n        const { dogs, allDogs = [], size = 'medium', onDogClick = () => {} } = this.props;\n\n        return (\n            <div class='w-100'>\n                <div\n                    class='d-flex flex-row flex-nowrap'\n                    style='overflow: auto; scroll-snap-type: x mandatory;'\n                    onScroll={this.scrollImages}\n                >\n                    {dogs && dogs.sort(this.sortByName).map((dogId, idx) => {\n                        const dog = allDogs.find(e => e.id === dogId);\n                        if (!dog) {\n                            return '';\n                        }\n                        return (\n                            <div class='col clearfix position-relative p-0 mx-2'>\n                                <div\n                                    class={`w-100 h-100 text-center rounded-lg imageContainer d-flex justify-content-center align-items-center`}\n                                    style={`\n                                        flex-wrap: wrap;\n                                        overflow-y: hidden;\n                                    `}\n                                    onTouchstart={(e) => { e.stopPropagation(); }}\n                                    onTouchend={(e) => { e.stopPropagation(); }}\n                                    onTouchmove={(e) => { e.stopPropagation(); }}\n                                >\n                                    <DogSimplePublic\n                                        stores={this.props.stores}\n                                        dog={dog}\n                                        dogs={allDogs.filter(d => dogs.indexOf(d.id) > -1).sort((a, b) => a.name > b.name ? 1 : -1)}\n                                        className='mx-auto'\n                                        showName={true}\n                                        showPosition={false}\n                                        size={size}\n                                        onDogClick={onDogClick} \n                                    />\n                                    {/* <xmp>{JSON.stringify(img, null, 4)}</xmp> */}\n                                </div>\n                            </div>\n                        );\n                    })}\n                </div>\n            </div>\n        );\n    }\n}\n\nexport default DogScroller;\n","import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport { Text, Localizer, withText } from 'preact-i18n';\n\nimport mu from '../../lib/musher-util';\n\n@observer\nclass WorkoutWeek extends Component {\n    render() {\n        const { isLoading } = this.state;\n\t\tconst { userStore, appState, workoutStore } = this.props.stores;\n        const { currentTeam } = workoutStore;\n        const { user } = userStore;\n        const { language = 'en' } = user;\n        const DAYS = mu.getDays(language);\n\t\tconst { darkmode } = appState;\n\t\tconst { week, year } = this.props;\n\t\tconst {\n            workoutsDay, workoutSummaryWeekDay,\n\t\t} = userStore;\n\n        const daysOfWeek = util.getDaysInWeek(week, year);\n        let totalDistanceKmWeek = 0;\n        let totalCountWeek = 0;\n        let totalElevationWeek = 0;\n        let totalDurationWeek = 0;\n        let totalSpeedavgWeek = [];\n\n        const weekNum = parseInt(week, 10);\n        const yearNum = parseInt(year, 10);\n        const { week: nextWeek, year: nextYear } = mu.getNextWeek(weekNum, yearNum);\n        const { week: prevWeek, year: prevYear } = mu.getPrevWeek(weekNum, yearNum);\n\n        return (\n            <>\n                <div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-4'>\n                    <a href={`/workouts/week/${nextWeek}/${nextYear}`} class='float-right btn btn-sm btn-link'><i class='fas fa-arrow-right' /></a>\n                    <a href={`/workouts/week/${prevWeek}/${prevYear}`} class='float-left btn btn-sm btn-link'><i class='fas fa-arrow-left' /></a>\n                    <h5>\n                        <Text id='workouts.week-workouts' fields={{ week, year }}>Treningsturene - Uke - {week} {year}</Text>\n                    </h5>\n                    <small>\n                        <a href={`/workouts/month/${daysOfWeek[0].getMonth() + 1}/${daysOfWeek[0].getFullYear()}`}>\n                            {util.isoDate(daysOfWeek[0], false, false, true)}\n                        </a> - <a href={`/workouts/month/${daysOfWeek[daysOfWeek.length - 1].getMonth() + 1}/${daysOfWeek[daysOfWeek.length - 1].getFullYear()}`}>\n                            {util.isoDate(daysOfWeek[daysOfWeek.length - 1], false, false, true)}\n                        </a>\n                    </small>\n                </div>\n\n                <div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-4'>\n\n                    <table class='table table-striped table-sm'>\n                        <thead>\n                            <tr>\n                                <th class='text-muted'><Text id='workout.calendar.week'>Uke</Text></th>\n                                {daysOfWeek.map(day => <th>{DAYS[day.getDay()]}</th>)}\n                                <th class='text-muted'><Text id='workout.calendar.sum'>Sum</Text></th>\n                                {/* <th class='text-muted'>Totalt</th> */}\n                            </tr>\n                        </thead>\n\n                        <tbody>\n                            <tr>\n                                <td class='text-right text-muted pt-3'>{week}</td>\n                                {daysOfWeek.map(day => {\n                                    const yyyy = day.getFullYear();\n                                    const mm = day.getMonth() + 1;\n                                    const dd = day.getDate();\n                                    const summary = userStore.findWorkoutSummaryWeekDay(yyyy, mm, dd) || {};\n                                    if (summary && summary.distanceKm) {\n                                        totalDistanceKmWeek += summary.distanceKm;\n                                        totalCountWeek += summary.count;\n                                        totalElevationWeek += summary.elevation;\n                                        totalDurationWeek += summary.duration;\n                                        totalSpeedavgWeek.push(summary.speedAvg);\n                                    }\n                                    // console.log(summary);\n                                    // count: 1, day: 5, distanceKm: 10, duration: 3600, elevation: 200, month: 9, speedAvg: 12, year: 2020\n                                    return (\n                                        <td class={`text-center font-weight-light position-relative pt-3`}\n                                            style={`background-color: ${mu.getDayColor(day.getDay(), darkmode)};`}>\n                                            <div class='position-absolute text-muted' style='top: 0px; right: 2px; font-size: 0.7em;'>\n                                                {day.getDate()}\n                                            </div>\n                                            {summary && summary.distanceKm ? \n                                                <div class='rounded-pill w-100 px-1'\n                                                    style={`background-color: ${mu.getTrainingColor(summary, darkmode)}`}\n                                                >\n                                                    {util.format(summary.distanceKm, 1)}\n                                                    {summary.count > 1 && <span class='position-absolute text-danger' style='bottom: 0; right: 0px; font-size: 0.6em;'>{summary.count}</span>}\n                                                </div> : '-'}\n                                        </td>\n                                    );\n                                })}\n                                <td class='text-right pt-3'>{totalDistanceKmWeek}</td>\n                                {/* <td class='text-right text-muted pt-3'>{totalWorkoutKm}</td> */}\n                            </tr>\n                        </tbody>\n                    </table>\n\n                    <h5 class='mt-4'><Text id='workout.calendar.summary'>Oppsummering</Text> - {week} {year}</h5>\n                    <table class='table table-striped table-sm'>\n                        <tbody>\n                            <tr>\n                                <td class='text-muted'><Text id='workout.calendar.totalWorkouts'>Antall √∏kter</Text></td>\n                                <td class='text-right'>{totalCountWeek}</td>\n                            </tr>\n                            <tr>\n                                <td class='text-muted'><Text id='workout.calendar.distance'>Distanse</Text></td>\n                                <td class='text-right'>{util.format(totalDistanceKmWeek, 1)} km</td>\n                            </tr>\n                            <tr>\n                                <td class='text-muted'><Text id='workout.calendar.ascend'>H√∏ydemeter</Text></td>\n                                <td class='text-right'>{util.format(totalElevationWeek, 0)} m</td>\n                            </tr>\n                            <tr>\n                                <td class='text-muted'><Text id='workout.calendar.duration'>Varighet</Text></td>\n                                <td class='text-right'>{util.secToHms(totalDurationWeek)}</td>\n                            </tr>\n                            <tr>\n                                <td class='text-muted'><Text id='workout.calendar.avg-speed'>Gjennomsnittsfart</Text></td>\n                                <td class='text-right'>{util.format(mu.avgArr(totalSpeedavgWeek), 1)} km/t</td>\n                            </tr>\n                        </tbody>\n                    </table>\n\n                </div>\n            </>\n        );\n    }\n}\n\nexport default WorkoutWeek;\n","import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport { Text, Localizer, withText } from 'preact-i18n';\n\nimport mu from '../../lib/musher-util';\nconst MARGIN_TOP = mu.marginTop(true);\nconst MARGIN_BOTTOM = mu.marginBottom();\nconst SUB_MENU_MARGIN_TOP = mu.subMenuMarginTop();\n\nimport Workout from '../../components/workout';\nimport WorkoutWeek from '../../components/workout/week';\nimport Teams from '../../components/team/teams';\n\nconst initialState = {\n\tisLoading: false,\n};\n\n@observer\nclass Workouts extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            ...initialState,\n        };\n    }\n\n\tloadWorkouts = async () => {\n\t\tthis.setState({ isLoading: true });\n\t\t// const { workoutStore } = this.props.stores;\n\t\t// const { currentTeam } = workoutStore;\n\t\t// await workoutStore.load({ query: { team: currentTeam } });\n\t\tawait this.loadWorkoutSummary();\n\t\tthis.setState({ isLoading: false });\n\t}\n\n\tloadDogs = async () => {\n\t\tconst { dogStore } = this.props.stores;\n\t\tconst { currentTeam } = dogStore;\n\n\t\tawait dogStore.load({ query: { team: currentTeam }, addData: ['workoutSummary'] });\n\t}\n\n\tasync loadTracks() {\n\t\tconst { trackStore } = this.props.stores;\n\t\tawait trackStore.load();\n\t}\n\n\tasync loadWorkoutSummary(props = this.props) {\n\t\tconst { userStore, workoutStore } = this.props.stores;\n\t\tconst { currentTeam } = workoutStore;\n        const { week, year } = props;\n        await userStore.getWorkoutSummary({ team: currentTeam });\n        await userStore.getWorkoutSummaryDay({ week, year, team: currentTeam });\n    }\n\n    componentDidMount() {\n\t\tthis.loadWorkouts();\n\t\t// this.loadDogs();\n\t\t// this.loadTracks();\n    }\n\n    componentWillReceiveProps(nextProps) {\n        // console.log('componentWillReceiveProps', nextProps);\n        if (nextProps.week !== this.props.week) {\n            this.loadWorkoutSummary(nextProps);\n        }\n    }\n\n    shouldComponentUpdate(nextProps) {\n        if (nextProps.week !== this.props.week) {\n            return true;\n        }\n    }\n\n\trender() {\n\t\tconst { isLoading } = this.state;\n\t\tconst { userStore, appState, workoutStore } = this.props.stores;\n        const { currentTeam } = workoutStore;\n\t\tconst { darkmode } = appState;\n\t\tconst { week, year = util.getYear() } = this.props;\n\t\tconst {\n            workoutsDay, workoutSummaryWeekDay,\n\t\t} = userStore;\n\n\t\treturn (\n\t\t\t<div class='container-fluid' style={`margin-bottom: ${MARGIN_BOTTOM}; margin-top: ${MARGIN_TOP};`}>\n\t\t\t\t<div class='row fixed-top' style={`margin-top: ${SUB_MENU_MARGIN_TOP}; background-color: ${darkmode ? '#191d21' : '#f8f9fa'};`}>\n\t\t\t\t\t<div class='col text-center subtopmenu'>\n\t\t\t\t\t\t<a href='/workouts/' class='text-secondary stretched-link'><nobr><i class='fas fa-chart-line' /> <Text id='workout.index.dashboard'>Oversikt</Text></nobr></a>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class='col text-center subtopmenu'>\n\t\t\t\t\t\t<a href='/workouts/list' class='text-secondary stretched-link'><nobr><i class='fas fa-list' /> <Text id='workout.index.list'>Liste</Text></nobr></a>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class='col text-center subtopmenu'>\n\t\t\t\t\t\t<a href='/workouts/plan' class='text-secondary stretched-link'><nobr><i class='fas fa-calendar-alt' /> <Text id='workout.index.plan'>Plan</Text></nobr></a>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\n\t\t\t\t<div class='row'>\n\t\t\t\t\t<div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 border-bottom'>\n\t\t\t\t\t\t<Teams stores={this.props.stores} callback={this.loadWorkouts} key={`teams-${currentTeam}`} />\n\t\t\t\t\t</div>\n\n                    {/* <div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3'>\n\t\t\t\t\t\t<WorkoutGraph stores={this.props.stores} isLoading={isLoading} />\n\t\t\t\t\t</div> */}\n\n                    <WorkoutWeek stores={this.props.stores} team={currentTeam} week={week} year={year} key={`${year}-${week}-${currentTeam}`} />\n\n\t\t\t\t\t<div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-4'>\n                        <h5>\n                            <Text id='workouts.week-workouts' fields={{ week, year }}>Treningsturene - Uke - {week} {year}</Text>\n                        </h5>\n\t\t\t\t\t</div>\n                    <div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-4'>\n                        {workoutsDay && workoutsDay.map(workout => (\n                            <Workout stores={this.props.stores} workout={workout} showDate={true} />\n                        ))}\n                    </div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nexport default Workouts;\n","import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport { Text, Localizer } from 'preact-i18n';\n\nimport ScrollIntoView from '../../components/util/scrollIntoView';\n\n@observer\nclass Teams extends Component {\n    toggleTeam = (team) => {\n\t\tconst { callback, unsetTeamIfSelected = true } = this.props;\n        const { dogStore, workoutStore } = this.props.stores;\n\t\tconst { currentTeam } = dogStore;\n\t\tif (unsetTeamIfSelected && team === currentTeam) {\n\t\t\tdogStore.setCurrentTeam(undefined);\n\t\t\tworkoutStore.setCurrentTeam(undefined);\n\t\t} else {\n\t\t\tdogStore.setCurrentTeam(team);\n\t\t\tworkoutStore.setCurrentTeam(team);\n\t\t}\n\t\tif (util.isDefined(callback)) {\n\t\t\tcallback();\n\t\t}\n\t}\n\n    showAllTeams = () => {\n\t\tconst { callback } = this.props;\n        const { dogStore, workoutStore } = this.props.stores;\n\t\tdogStore.setCurrentTeam(undefined);\n\t\tworkoutStore.setCurrentTeam(undefined);\n\t\tif (util.isDefined(callback)) {\n\t\t\tcallback();\n\t\t}\n\t}\n\n\t// componentDidMount() {\n\t// \tif (this.container) {\n\t// \t\tthis.container.scrollIntoView({ behavior: 'smooth', block: 'end', inline: 'center' });\n\t// \t}\n\t// }\n\n    render() {\n        const { userStore, dogStore } = this.props.stores;\n        const { teams } = userStore;\n\t\tconst { currentTeam } = dogStore;\n\t\tconst { highlight, showAll = true } = this.props;\n        return (\n\t\t\t<div class='row mt-2'>\n\t\t\t\t<div class='w-100 overflow-hidden'>\n\t\t\t\t\t<div\n\t\t\t\t\t\tclass='d-flex flex-row flex-nowrap pb-2 px-1'\n\t\t\t\t\t\tstyle='overflow: auto; scroll-snap-type: x mandatory;'\n\t\t\t\t\t>\n\t\t\t\t\t\t{/* <xmp><br /><br /><br /><br />{JSON.stringify(teams, null, 4)}</xmp> */}\n\t\t\t\t\t\t{teams && teams.map((team, idx) => (\n\t\t\t\t\t\t\t<div class='col mb-0 px-0 clearfix' key={team.id}>\n\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\tclass={`btn btn-sm btn-block \n\t\t\t\t\t\t\t\t\t\trounded-none ${idx === 0 ? 'rounded-pill-left' : (idx + 1 === teams.length ? 'rounded-pill-right': '')}\n\t\t\t\t\t\t\t\t\t\t${currentTeam === team.id ? 'btn-success' : 'btn-outline-success'}\n\t\t\t\t\t\t\t\t\t\ttext-nowrap clearfix`}\n\t\t\t\t\t\t\t\t\tstyle='text-overflow: ellipsis; overflow: hidden;'\n\t\t\t\t\t\t\t\t\tonClick={() => this.toggleTeam(team.id)}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<i class='fas fa-users' /> {team.name}\n\n\t\t\t\t\t\t\t\t\t{highlight && highlight.indexOf(team.id) > -1 && <>\n\t\t\t\t\t\t\t\t\t\t{currentTeam === team.id ? <>\n\t\t\t\t\t\t\t\t\t\t\t<i class='fas fa-check float-right' />\n\t\t\t\t\t\t\t\t\t\t</> : <>\n\t\t\t\t\t\t\t\t\t\t\t<div class='spinner-grow text-warning float-right' role='status'>\n\t\t\t\t\t\t\t\t\t\t\t\t<span class='sr-only'>Loading...</span>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t<i class='far fa-hand-point-left float-right' style='font-size: 2.0em;' />   \n\t\t\t\t\t\t\t\t\t\t</>}\n\t\t\t\t\t\t\t\t\t</>}\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t{/* {currentTeam === team.id && <ScrollIntoView horizontal={'center'} vertical={'end'} />} */}\n\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t))}\n\t\t\t\t\t</div>\n\t\t\t\t\t{showAll && <div class='row'>\n\t\t\t\t\t\t<div class='col-12 mb-1 px-1 d-flex justify-content-center'>\n\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\tclass={`btn btn-sm rounded-lg btn-link text-nowrap clearfix`}\n\t\t\t\t\t\t\t\tstyle='text-overflow: ellipsis; overflow: hidden;'\n\t\t\t\t\t\t\t\tonClick={this.showAllTeams}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<i class='fas fa-users' /> <Text id='teams.show-all'>Show all</Text>\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>}\n\t\t\t\t</div>\n\t\t\t</div>\n        );\n    }\n}\n\nexport default Teams;\n"],"sourceRoot":""}