{"version":3,"sources":["webpack:///./components/news/commentReply.js","webpack:///./components/news/comments.js","webpack:///./routes/news/detail.js","webpack:///./components/style.css","webpack:///./components/news/detail.js","webpack:///./components/news/commentAdd.js"],"names":["NewsCommentReply","observer","commentNews","response","callback","props","news","state","comment","stores","newsStore","commentReplyNews","id","commentId","status","setState","render","inputRef","this","userStore","user","displayNameShort","firstname","util","ucfirst","lastname","email","userImage","image","images","undefined","class","style","s3SmallLink","for","type","placeholder","onInput","linkState","value","ref","onClick","Component","initialState","showAddComment","showAllComments","showAllReplies","NewsComments","likeComment","e","target","parentElement","dataset","likeNewsComment","likeReply","likeNewsCommentReply","replyId","replyComment","focus","toggleComments","toggleReplies","col","offset","compact","currentUser","filteredComments","totalComments","diplayedComments","comments","length","slice","Math","max","reverse","map","displayName","hasLikedComment","likes","findIndex","filteredReplises","totalReplies","diplayedReplies","max_comments","data-id","formatDistance","createdDate","Date","locale","reply","hasLikedReply","data-comment","fields","more","c","MARGIN_TOP","mu","marginTop","MARGIN_TOP_BACK","marginTopBack","MARGIN_BOTTOM","marginBottom","isLoading","News","likeNews","toggleAddComment","newsId","back","route","loadNews","load","componentDidMount","isAdmin","hasLikedNews","href","cols","module","exports","NewsDetail","language","loading","src","s3LargeLink","active","replaceImages","title","isoDate","tag","ingress","markdown","body","markdownOpts","getMarkdownOptions","NewsAdd"],"mappings":"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","file":"78.chunk.fce6f.js","sourcesContent":["import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport { Text, Localizer, withText } from 'preact-i18n';\nimport linkState from 'linkstate';\n\nimport style from '../style.css';\nimport mu from '../../lib/musher-util';\n\n@observer\nclass NewsCommentReply extends Component {\n    commentNews = async () => {\n        const { callback = () => {}, commentId } = this.props;\n        const { news } = this.props;\n\t\tconst { newsStore } = this.props.stores;\n        const { comment = '' } = this.state;\n\t\tconst response = await newsStore.commentReplyNews({ id: news.id, commentId, comment });\n\t\tif (response && response.status === 200) {\n            this.setState({\n                comment: '',\n            });\n            callback({ news, response });\n\t\t}\n\t}\n\n    render() {\n        const { inputRef } = this.props;\n        const { comment } = this.state;\n        const { userStore } = this.props.stores;\n        const { user = {} } = userStore;\n        const displayNameShort = user.firstname ? `${util.ucfirst(user.firstname, true)}${util.ucfirst(user.lastname, true)}` : `${util.ucfirst(user.email || '', true)}`;\n        // const displayName = user.firstname ? `${user.firstname} ${user.lastname}` : `${user.email}`;\n        const userImage = user.image || (user.images ? user.images[0] : undefined);\n\n        return (\n            <div class='w-100'>\n                <div class='d-flex mb-0 position-relative w-100'>\n                    <div \n                        class={`text-center border rounded-circle imageRounded imageRoundedThumb`}\n                        style={`${userImage ? `background-image: url('${userImage.s3SmallLink}'); background-size: cover;` : ''} border-width: 3px !important;`}\n                    >\n                        {!userImage && <span class='font-weight-lighter' style='font-size: 15px;'>{displayNameShort}</span>}\n                    </div>\n                    <div class='col pl-3' style='line-height: 1.2em;'>\n\n                        <div class='d-flex bd-highlight'>\n                            <div class='p-0 w-100 bd-highlight'>\n                                <label class='sr-only' for='inlineFormInput'><Text id='comments.comment'>Kommentar</Text></label>\n                                <div class='border rounded rounded-lg position-relative'>\n                                    <Localizer>\n                                        <input\n                                            class='form-control-plaintext px-2'\n                                            type='text'\n                                            placeholder={<Text id='comments.write-comment'>Skriv en kommentar...</Text>}\n                                            onInput={linkState(this, 'comment')}\n                                            value={comment}\n                                            ref={inputRef}\n                                        />\n                                    </Localizer>\n                                </div>\n                            </div>\n                            <div class='p-0 pl-2 flex-shrink-1 bd-highlight'>\n                                <button type='button' class='btn btn-sm btn-primary mb-2'\n                                    onClick={this.commentNews}\n                                ><i class='fas fa-paper-plane' /></button>\n                            </div>\n                        </div>\n\n                    </div>\n                </div>\n            </div>\n        );\n    }\n}\n\nexport default NewsCommentReply;\n","import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport { Text, Localizer, withText } from 'preact-i18n';\n\nimport NewsReplyComment from '../../components/news/commentReply';\n\nimport style from '../style.css';\nimport mu from '../../lib/musher-util';\n\nconst initialState = {\n    showAddComment: {},\n    showAllComments: false,\n    showAllReplies: {},\n};\n\nconst MAX_COMMENTS = 2;\n\n@observer\nclass NewsComments extends Component {\n     constructor(props) {\n        super(props);\n        this.state = {\n            ...initialState,\n        };\n        this.inputRef = {};\n    }\n\n    likeComment = async (e) => {\n        const { callback = () => {} } = this.props;\n        const commentId = e.target.parentElement.dataset.id || e.target.dataset.id;\n\n        const { news } = this.props;\n\t\tconst { newsStore } = this.props.stores;\n\t\tconst response = await newsStore.likeNewsComment({ id: news.id, commentId });\n\n\t\tif (response && response.status === 200) {\n            callback({ news, commentId, response });\n\t\t}\n        return true;\n    }\n\n    likeReply = async (e) => {\n        const { callback = () => {} } = this.props;\n\n        const replyId = e.target.parentElement.dataset.id || e.target.dataset.id;\n        const commentId = e.target.parentElement.dataset.comment || e.target.dataset.comment;\n\n        const { news } = this.props;\n\t\tconst { newsStore } = this.props.stores;\n\t\tconst response = await newsStore.likeNewsCommentReply({ id: news.id, replyId, commentId });\n\n        if (response && response.status === 200) {\n            callback({ news, commentId, response });\n\t\t}\n    }\n\n    replyComment = async (e) => {\n        const commentId = e.target.parentElement.dataset.id || e.target.dataset.id;\n\n        const { showAddComment } = this.state;\n        showAddComment[commentId] = !showAddComment[commentId];\n\t\tthis.setState({\n\t\t\tshowAddComment,\n\t\t}, () => {\n            if (this.inputRef[commentId]) {\n                this.inputRef[commentId].focus();\n            }\n\t\t});\n    }\n\n    toggleComments = () => {\n\t\tconst { showAllComments } = this.state;\n\t\tthis.setState({\n\t\t\tshowAllComments: !showAllComments,\n\t\t});\n\t}\n\n    toggleReplies = (e) => {\n        const commentId = e.target.parentElement.dataset.id || e.target.dataset.id;\n\t\tconst { showAllReplies } = this.state;\n        showAllReplies[commentId] = !showAllReplies[commentId];\n\t\tthis.setState({\n\t\t\tshowAllReplies,\n\t\t});\n\t}\n\n    render() {\n        const { showAddComment, showAllComments, showAllReplies } = this.state;\n\t\tconst { news, callback = () => {}, col = 12, offset = 0, compact = false  } = this.props;\n        const { userStore } = this.props.stores;\n        const { user: currentUser } = userStore;\n\n        let filteredComments = [];\n        let totalComments = 0;\n        let diplayedComments = 0;\n        let max_comments;\n        if (news.comments) {\n            totalComments = news.comments.length;\n            if (showAllComments) {\n                filteredComments = news.comments;\n            } else {\n                // filteredComments = news.comments.slice(0, MAX_COMMENTS);\n                const max_comments = compact ? 0 : MAX_COMMENTS;\n                filteredComments = news.comments.slice(Math.max(totalComments - max_comments, 0));\n            }\n            diplayedComments = filteredComments.length;\n        }\n\n        return (\n            <div class={`col-${col} offset-${offset} col-sm-8 col-lg-6 offset-sm-2 offset-lg-3`}>\n                {showAllComments && <div>\n                    <button class='btn btn-sm btn-link py-0 mb-2'\n                        onClick={this.toggleComments}\n                    >\n                        <Text id='comments.hide-all-comments'>Skjul alle kommentarene.</Text>\n                    </button>\n                </div>}\n                {news && filteredComments && filteredComments.reverse().map((comment) => {\n                    const { user = {} } = comment;\n                    const displayNameShort = user.firstname ? `${util.ucfirst(user.firstname, true)}${util.ucfirst(user.lastname, true)}` : `${util.ucfirst(user.email || '', true)}`;\n                    const displayName = user.firstname ? `${user.firstname} ${user.lastname}` : `${user.email}`;\n                    const userImage = user.image || (user.images ? user.images[0] : undefined);\n                    const hasLikedComment = comment.likes && comment.likes.findIndex(e => e.user === currentUser.id) > -1;\n\n                    let filteredReplises = [];\n                    let totalReplies = 0;\n                    let diplayedReplies = 0;\n                    if (comment.comments) {\n                        totalReplies = comment.comments.length;\n                        if (showAllReplies[comment.id]) {\n                            filteredReplises = comment.comments;\n                        } else {\n                            filteredReplises = comment.comments.slice(0, max_comments);\n                        }\n                        diplayedReplies = filteredReplises.length;\n                    }\n\n                    return (\n                        <div class='row'>\n                            <div class='col-12 d-flex mb-2 position-relative'>\n                                <div \n                                    class={`text-center border rounded-circle imageRounded imageRoundedSmall`}\n                                    style={`${userImage ? `background-image: url(\"${userImage.s3SmallLink}\"); background-size: cover;` : ''} border-width: 3px !important;`}\n                                >\n                                    {!user.image && <span class='font-weight-lighter' style='font-size: 15px;'>{displayNameShort}</span>}\n                                </div>\n                                <div class='flex-grow-1 pl-3 pt-0' style='line-height: 1.2em;'>\n                                    <div class='bg-light p-2 rounded-lg'>\n                                        <h5 class='font-weight-bold mb-0' style='font-size: 1.0em;'>{displayName}</h5>\n                                        {comment.comment}\n                                    </div>\n                                    <small>\n                                        <button class={`btn btn-sm btn-link py-0 ${hasLikedComment ? 'text-primary' : ''}`}\n                                            onClick={this.likeComment}\n                                            data-id={comment.id}\n                                        >\n                                            <Text id='comments.like'>Lik</Text>\n                                        </button>\n                                        -\n                                        <button class='btn btn-sm btn-link py-0'\n                                            onClick={this.replyComment}\n                                            data-id={comment.id}\n                                        >\n                                            <Text id='comments.comment-add'>Kommentar</Text>\n                                        </button>\n                                        -\n                                        <button class='btn btn-sm btn-link py-0 disabled'>\n                                            {util.formatDistance(comment.createdDate, new Date(), { locale: 'no-NB' })}\n                                        </button>\n                                    </small>\n                                </div>\n                                {comment.likes && comment.likes.length > 0 && <small class='position-absolute bg-light shadow-sm rounded-lg py-0 px-1' style='bottom: 20px; right: 15px;'>\n                                    <i class='fas fa-thumbs-up text-primary' /> {comment.likes.length}\n                                </small>}\n                            </div>\n                            <div class='col-11 offset-1 mb-2'>\n\n                                {comment && filteredReplises && filteredReplises.map((reply) => {\n                                    const { user = {} } = reply;\n                                    const displayNameShort = user.firstname ? `${util.ucfirst(user.firstname, true)}${util.ucfirst(user.lastname, true)}` : `${util.ucfirst(user.email || '', true)}`;\n                                    const displayName = user.firstname ? `${user.firstname} ${user.lastname}` : `${user.email}`;\n                                    const userImage = user.image || (user.images ? user.images[0] : undefined);\n                                    const hasLikedReply = reply.likes && reply.likes.findIndex(e => e.user === currentUser.id) > -1;\n\n                                    return (\n                                        <div class='row'>\n                                            <div class='col-12 d-flex mb-2 position-relative'>\n                                                <div \n                                                    class={`text-center border rounded-circle imageRounded imageRoundedThumb`}\n                                                    style={`${userImage ? `background-image: url(\"${userImage.s3SmallLink}\"); background-size: cover;` : ''} border-width: 3px !important;`}\n                                                >\n                                                    {!user.image && <span class='font-weight-lighter' style='font-size: 15px;'>{displayNameShort}</span>}\n                                                </div>\n                                                <div class='flex-grow-1 pl-3 pt-0' style='line-height: 1.2em;'>\n                                                    <div class='bg-light p-2 rounded-lg'>\n                                                        <h5 class='font-weight-bold mb-0' style='font-size: 1.0em;'>{displayName}</h5>\n                                                        {reply.comment}\n                                                    </div>\n                                                    <small>\n                                                        <button class={`btn btn-sm btn-link py-0 ${hasLikedReply ? 'text-primary' : ''}`}\n                                                            onClick={this.likeReply}\n                                                            data-comment={comment.id}\n                                                            data-id={reply.id}\n                                                        >\n                                                            <Text id='comments.like'>Lik</Text>\n                                                        </button>\n                                                        -\n                                                        <button class='btn btn-sm btn-link py-0'\n                                                            onClick={this.replyComment}\n                                                            data-id={comment.id}\n                                                        >\n                                                            <Text id='comments.comment-add'>Kommentar</Text>\n                                                        </button>\n                                                        -\n                                                        <button class='btn btn-sm btn-link py-0 disabled'>\n                                                            {util.formatDistance(reply.createdDate, new Date(), { locale: 'no-NB' })}\n                                                        </button>\n                                                    </small>\n                                                </div>\n                                                {reply.likes && <small class='position-absolute bg-light shadow-sm rounded-lg py-0 px-1' style='bottom: 20px; right: 15px;'>\n                                                    <i class='fas fa-thumbs-up text-primary' /> {reply.likes.length}\n                                                </small>}\n                                            </div>\n                                        </div>\n                                    );\n                                })}\n                                {totalReplies - diplayedReplies > 0 && <div>\n                                    <button class='btn btn-sm btn-link py-0'\n                                        onClick={this.toggleReplies}\n                                        data-id={comment.id}\n                                    >\n                                        <Text id='comments.show-more' fields={{ more: totalReplies - diplayedReplies }}>\n                                            Vis {totalReplies - diplayedReplies} flere kommentarer...\n                                        </Text>\n                                    </button>\n                                </div>}\n\n                            </div>\n                            {showAddComment[comment.id] && <div class='col-11 offset-1 d-flex mb-2 position-relative'>\n                                <NewsReplyComment stores={this.props.stores} news={news}\n                                    callback={callback}\n                                    commentId={comment.id}\n                                    inputRef={c => this.inputRef[comment.id] = c}\n                                />\n                            </div>}\n                        </div>\n                    );\n                })}\n                {totalComments - diplayedComments > 0 && <div>\n                    <button class='btn btn-sm btn-link py-0'\n                        onClick={this.toggleComments}\n                    >\n                        <Text id='comments.show-more' fields={{ more: totalComments - diplayedComments }}>\n                            Vis {totalComments - diplayedComments} flere kommentarer...\n                        </Text>\n                    </button>\n                </div>}\n                {showAllComments && <div>\n                    <button class='btn btn-sm btn-link py-0'\n                        onClick={this.toggleComments}\n                    >\n                        <Text id='comments.hide-all-comments'>Skjul alle kommentarene.</Text>\n                    </button>\n                </div>}\n            </div>\n        );\n    }\n}\n\nexport default NewsComments;\n","import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport { Text, Localizer } from 'preact-i18n';\nimport { route } from 'preact-router';\n\nimport NewsDetail from '../../components/news/detail';\nimport NewsComments from '../../components/news/comments';\nimport NewsAddComment from '../../components/news/commentAdd';\n\nimport mu from '../../lib/musher-util';\nconst MARGIN_TOP = mu.marginTop(false);\nconst MARGIN_TOP_BACK = mu.marginTopBack(false);\nconst MARGIN_BOTTOM = mu.marginBottom();\n\nconst initialState = {\n\tisLoading: false,\n    showAddComment: false,\n};\n\n@observer\nclass News extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            ...initialState,\n        };\n        this.inputRef = {};\n    }\n\n\tasync loadNews(props = this.props) {\n\t\tthis.setState({ isLoading: true });\n\t\tconst { newsStore } = this.props.stores;\n\t\tawait newsStore.load(props.id);\n\t\tthis.setState({ isLoading: false });\n\t}\n\n    likeNews = async () => {\n\t\tconst { newsStore } = this.props.stores;\n\t\tconst { news } = newsStore;\n\t\tconst response = await newsStore.likeNews({ id: news.id });\n\n        if (response && response.status === 200) {\n\t\t\t// this.loadNewsDetail({ news });\n\t\t}\n\t}\n\n\ttoggleAddComment = (e) => {\n\t\tconst newsId = e.target.parentElement.dataset.id || e.target.dataset.id;\n\t\tconst { showAddComment } = this.state;\n\t\tthis.setState({\n\t\t\tshowAddComment: !showAddComment,\n\t\t}, () => {\n\t\t\tif (this.inputRef[newsId]) {\n\t\t\t\tthis.inputRef[newsId].focus();\n\t\t\t}\n\t\t});\n\t}\n\n\tcomponentDidMount() {\n\t\tthis.loadNews();\n\t}\n\n    back = () => {\n        route(`/news`);\n    }\n\n\trender() {\n        const { showAddComment } = this.state;\n\t\tconst { newsStore, userStore } = this.props.stores;\n        const { isAdmin } = userStore;\n\t\tconst { news } = newsStore;\n\n\t\tconst { user } = userStore;\n        const { likes = [], comments = [] } = news;\n\t\tconst hasLikedNews = news.likes && news.likes.findIndex(e => e.user === user.id) > -1;\n\n\t\treturn (\n\t\t\t<div class='container-fluid' style={`margin-bottom: ${MARGIN_BOTTOM}; margin-top: ${MARGIN_TOP};`}>\n                <div class='d-flex justify-content-between mb-2'>\n                    <div>\n                        <button class='btn btn-link pl-0 fixed-top text-primary'\n                            style={`top: ${MARGIN_TOP_BACK}; left: 5px; font-size: 35px; width: 45px;`}\n                            onClick={this.back}>\n                            <i class='fas fa-arrow-circle-left' />\n                        </button>\n                    </div>\n                    <div>\n                        <h5 class='text-muted'>\n                            <Text id='news.heading'>Siste nytt</Text>\n                        </h5>\n                    </div>\n                    <div>\n                        {isAdmin && <a class='btn btn-sm btn-primary float-right ml-2'\n\t\t\t\t\t\t\thref={`/news/edit/${news.id}`}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<i class='fas fa-edit' /> <Text id='news.edit'>Endre</Text>\n\t\t\t\t\t\t</a>}\n                        {isAdmin && <a class='btn btn-sm btn-success float-right ml-2'\n\t\t\t\t\t\t\thref={`/news/edit/new`}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<i class='fas fa-plus' /> <Text id='news.create'>Ny</Text>\n\t\t\t\t\t\t</a>}\n                    </div>\n                </div>\n\n\t\t\t\t<div class='row'>\n\t\t\t\t\t<div class='col-12'>\n                        <NewsDetail stores={this.props.stores} news={news} />\n\t\t\t\t\t</div>\n\n\n                    <div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-3'>\n\t\t\t\t\t\t{likes && likes.length > 0 && <small class='bg-light shadow-sm rounded-lg py-0 px-1' style='bottom: 20px; right: 15px;'>\n\t\t\t\t\t\t\t<i class='fas fa-thumbs-up text-primary' /> {likes.length}\n\t\t\t\t\t\t</small>}\n\t\t\t\t\t\t{comments && comments.length > 0 && <small class='float-right bg-light shadow-sm rounded-lg py-0 px-1' style='bottom: 20px; right: 15px;'>\n\t\t\t\t\t\t\t<i class='fas fa-comment text-primary' /> {comments.length}\n\t\t\t\t\t\t</small>}\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-2 mb-3'>\n\t\t\t\t\t\t<div class='row'>\n\t\t\t\t\t\t\t<div class='col-6 text-center'>\n\t\t\t\t\t\t\t\t<button type='button' class={`btn btn-outline-${hasLikedNews ? 'primary' : 'secondary'} btn-lg btn-block ${hasLikedNews ? 'text-primary' : ''}`}\n\t\t\t\t\t\t\t\t\tonClick={this.likeNews}\n\t\t\t\t\t\t\t\t\t// disabled={hasLikedNews}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<i class={`${hasLikedNews ? 'text-primary fas' : 'far'} fa-thumbs-up`} /> Like\n\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class='col-6 text-center'>\n\t\t\t\t\t\t\t\t<button type='button' class='btn btn-outline-secondary btn-lg btn-block'\n\t\t\t\t\t\t\t\t\tdata-id={news.id}\n\t\t\t\t\t\t\t\t\tonClick={this.toggleAddComment}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<i class='fas fa-comment' /> Comment\n\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\n\n\t\t\t\t\t{showAddComment && <NewsAddComment\n\t\t\t\t\t\tstores={this.props.stores}\n\t\t\t\t\t\tnews={news}\n\t\t\t\t\t\t// callback={this.loadNewsDetail}\n\t\t\t\t\t\tinputRef={c => this.inputRef[news.id] = c}\n\t\t\t\t\t/>}\n\t\t\t\t\t<NewsComments\n\t\t\t\t\t\tstores={this.props.stores}\n\t\t\t\t\t\tnews={news}\n                        cols='12'\n\t\t\t\t\t\t// callback={this.loadNewsDetail}\n\t\t\t\t\t/>\n\n\t\t\t\t</div>\n\n\t\t\t\t<div class='row'>\n\t\t\t\t\t<div class='col-12'>\n                        <a href='/news' class='btn btn-secondary'>\n                            <i class='fas fa-arrow-left mr-2' />\n                            <Text id='news.back'>Tilbake</Text>\n                        </a>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nexport default News;\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"hoverelementonly\":\"hoverelementonly__1mJGJ\",\"hoverElement\":\"hoverElement__axh3O\",\"hoverelementhide\":\"hoverelementhide__1k_qH\",\"progress-bar-vertical\":\"progress-bar-vertical__1B2sC\",\"progress-bar\":\"progress-bar__pnsVj\",\"dragged\":\"dragged__QXO46\",\"over\":\"over__1re3x\",\"list\":\"list__q_emZ\"};","import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport Markdown from 'preact-markdown';\n\nimport mu from '../../lib/musher-util';\n\nfunction replaceImages(line, images) {\n    function imageReplacer(match, p1, p2, p3, offset, string) {\n        // console.log({ match, p1, p2, p3, offset, string })\n        if (util.isObject(images[p1])) {\n            return `<img loading='lazy' src=${images[p1].s3MediumLink} class='img-fluid border rounded-lg float-right' style='width: ${p2 || 50}vw;' />`;\n        }\n        return '';\n    }\n\n    if (util.isString(line)) {\n        return line.replace(/\\{\\{img\\.(\\d+)\\s*(\\d*)\\}\\}/g, imageReplacer);\n    }\n    return line;\n}\n\nfunction replaceLinks(line) {\n    function linkReplacer(match, p1, p2, p3, offset, string) {\n        // console.log({ match, p1, p2, p3, offset, string })\n        return `<a href='${p2}'>${p1}</a>`;\n    }\n\n    if (util.isString(line)) {\n        return line.replace(/\\[([^\\]]+)\\]\\(([^)]+)\\)/g, linkReplacer);\n    }\n    return line;\n}\n\nfunction replaceTags(part, images, idx) {\n    // <img src={news.images[idx + 1].s3MediumLink} class='img-fluid border rounded-lg float-right' style='width: 50vw;' />\n    const htmlLines = mu.nl2br(part).map((line) => {\n        return `${replaceLinks(replaceImages(line, images))} <br />`;\n    });\n    return htmlLines.join('');\n}\n\n@observer\nclass NewsDetail extends Component {\n    render() {\n        const { news } = this.props;\n        const { userStore, appState } = this.props.stores;\n        const { user } = userStore;\n        const { language = 'en' } = user;\n        const { isAdmin } = userStore;\n        return (\n            <>\n                <div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 px-0'>\n                    {(news.images && news.images[0]) ? <img loading='lazy' src={news.images[0].s3LargeLink} class='img-fluid border rounded-lg' /> : ''}\n                    \n                    <h1>{isAdmin && <i class={`fas fa-eye${news.active ? ' text-success' : '-slash text-danger'} float-right`} />} {mu.replaceImages(news.title, news.images, language)}</h1>\n                    <div class='text-muted'>\n                        <small>\n                            {util.isoDate(news.createdDate)} - {news.tag}\n                        </small>\n                    </div>\n                    <p class='clearfix'>\n                        <strong>{mu.replaceImages(news.ingress, news.images, language)}</strong>\n                    </p>\n                    <Markdown markdown={mu.replaceImages(news.body, news.images, language)} markdownOpts={mu.getMarkdownOptions()} />\n                </div>\n            </>\n        );\n    }\n}\n\nexport default NewsDetail;\n","import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport { Text, Localizer, withText } from 'preact-i18n';\nimport linkState from 'linkstate';\n\nimport style from '../style.css';\nimport mu from '../../lib/musher-util';\n\n@observer\nclass NewsAdd extends Component {\n    commentNews = async () => {\n        const { callback = () => {} } = this.props;\n        const { news } = this.props;\n\t\tconst { newsStore } = this.props.stores;\n        const { comment = '' } = this.state;\n\t\tconst response = await newsStore.commentNews({ id: news.id, comment });\n\t\tif (response && response.status === 200) {\n            this.setState({\n                comment: '',\n            });\n            callback({ news, response });\n\t\t}\n\t}\n\n    render() {\n        const { inputRef } = this.props;\n        const { comment } = this.state;\n        const { userStore } = this.props.stores;\n        const { user = {} } = userStore;\n        const displayNameShort = user.firstname ? `${util.ucfirst(user.firstname, true)}${util.ucfirst(user.lastname, true)}` : `${util.ucfirst(user.email || '', true)}`;\n        // const displayName = user.firstname ? `${user.firstname} ${user.lastname}` : `${user.email}`;\n        const userImage = user.image || (user.images ? user.images[0] : undefined);\n\n        return (\n            <div class='col-12 col-sm-8 col-lg-6 offset-sm-2 offset-lg-3 d-flex mb-3 position-relative'>\n                <div class='d-flex mb-0 position-relative w-100'>\n                    <div \n                        class={`text-center border rounded-circle imageRounded imageRoundedSmall`}\n                        style={`${userImage ? `background-image: url('${userImage.s3SmallLink}'); background-size: cover;` : ''} border-width: 3px !important;`}\n                    >\n                        {!userImage && <span class='font-weight-lighter' style='font-size: 15px;'>{displayNameShort}</span>}\n                    </div>\n                    <div class='col pl-3' style='line-height: 1.2em;'>\n\n                        <div class='d-flex bd-highlight'>\n                            <div class='p-0 w-100 bd-highlight'>\n                                <label class='sr-only' for='inlineFormInput'><Text id='comments.comment'>Kommentar</Text></label>\n                                <div class='border rounded rounded-lg position-relative'>\n                                    <Localizer>\n                                        <input\n                                            class='form-control-plaintext px-2'\n                                            type='text'\n                                            placeholder={<Text id='comments.write-comment'>Skriv en kommentar...</Text>}\n                                            onInput={linkState(this, 'comment')}\n                                            value={comment}\n                                            ref={inputRef}\n                                        />\n                                    </Localizer>\n                                </div>\n                            </div>\n                            <div class='p-0 pl-2 flex-shrink-1 bd-highlight'>\n                                <button type='button' class='btn btn-primary mb-2'\n                                    onClick={this.commentNews}\n                                ><i class='fas fa-paper-plane' /></button>\n                            </div>\n                        </div>\n\n                    </div>\n                </div>\n            </div>\n        );\n    }\n}\n\nexport default NewsAdd;\n"],"sourceRoot":""}