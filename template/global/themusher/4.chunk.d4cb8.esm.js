(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{"+JSK":function(e,t,s){"use strict";(function(e){function n(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function i(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}var a,l=s("hosL"),o=s("Utv1"),r=s("/eY4"),c=s("OhSV"),m=s("ZOvn");const h={};let d=Object(r.a)(a=class extends l.Component{constructor(e){super(e),this.toggleLikes=()=>{const{showLikesList:e}=this.state;this.setState({showLikesList:!e})},this.displayTeam=(e,t)=>{e.preventDefault(),e.stopPropagation();const{appState:s}=this.props.stores;s.openDrawer("publicTeam",{teamId:t,height:"80vh"})},this.openInbox=(e,t)=>{e.preventDefault(),e.stopPropagation();const{appState:s}=this.props.stores;s.openDrawer("inboxDetail",{fromuser:t,height:"80vh"})},this.state=function(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?n(Object(s),!0).forEach((function(t){i(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):n(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}({},h)}render(){const{showLikesList:t}=this.state,{storyStore:s,teamStore:n,workoutStore:i,raceStore:a}=this.props.stores,{likes:r,comments:h,type:d="story",onTeamClick:b=(()=>{}),onUserClick:u=(()=>{})}=this.props;return Object(l.h)(e,null,Object(l.h)("div",{class:"d-flex justify-content-between mb-2"},r&&r.length>0&&Object(l.h)(e,null,Object(l.h)("div",{class:"d-flex flex-row flex-nowrap position-relative mr-3",style:"overflow: auto;"},Object(l.h)("span",{class:"text-muted mr-2",onClick:this.toggleLikes},Object(l.h)("small",null,Object(l.h)("i",{class:"fas fa-thumbs-up text-primary"})," ",r.length)),r.slice(0,1).map(t=>{let r,c,h;"story"===d?(r=s.findPublicUser(t.user),c=s.findPublicTeamByMembers(t.user)):"team"===d?(r=n.findPublicUser(t.user),c=n.findPublicTeamByMembers(t.user)):"workout"===d?(r=i.findPublicUser(t.user),c=i.findPublicTeamByMembers(t.user)):"race"===d&&(r=a.findPublicUser(t.user),c=a.findPublicTeamByMembers(t.user)),o.a.isArray(c)&&(h=c.find(e=>1===e.public));m.a.getImage({user:r,team:h,priority:"user"}),m.a.displayNameShort(r);const b=m.a.displayName(r);return Object(l.h)(e,null,Object(l.h)("span",{class:"font-weight-normal"},Object(l.h)("small",null,h?Object(l.h)(e,null,Object(l.h)("a",{href:"/teams/public/"+h.uuidv4,title:h.name,onClick:e=>this.displayTeam(e,h.uuidv4)},b)):Object(l.h)(e,null,b))))}),r.length>1&&Object(l.h)(e,null,Object(l.h)("span",{class:"text-muted font-weight-normal ml-2",onClick:this.toggleLikes},Object(l.h)("small",null,Object(l.h)(c.c,{id:"likes-comments.and",fields:{total:r.length-1}},"and ",r.length-1," others.")))))),h&&h.length>0&&Object(l.h)("span",{class:"float-right text-muted"},Object(l.h)("small",null,Object(l.h)("i",{class:"fas fa-comment text-primary"})," ",h.length))),t&&Object(l.h)("div",{class:"mt-3 mb-3"},r&&r.map(t=>{let r,c,h;"story"===d?(r=s.findPublicUser(t.user),c=s.findPublicTeamByMembers(t.user)):"team"===d?(r=n.findPublicUser(t.user),c=n.findPublicTeamByMembers(t.user)):"workout"===d?(r=i.findPublicUser(t.user),c=i.findPublicTeamByMembers(t.user)):"race"===d&&(r=a.findPublicUser(t.user),c=a.findPublicTeamByMembers(t.user)),o.a.isArray(c)&&(h=c.find(e=>1===e.public));const b=m.a.getImage({user:r,team:h,priority:"user"}),u=m.a.displayNameShort(r),p=m.a.displayName(r,!0);return Object(l.h)("div",{class:"d-flex flex-row position-relative font-weight-normal mb-1"},h?Object(l.h)(e,null,Object(l.h)("a",{href:"/teams/public/"+h.uuidv4,title:h.name,onClick:e=>this.displayTeam(e,h.uuidv4),class:"stretched-link"},Object(l.h)("div",{class:"text-center border rounded-circle imageRounded imageRoundedThumb",style:""+(b?`background-image: url("${b}"); background-size: cover;`:"")},!b&&Object(l.h)("div",{class:"",style:"font-size: 12px; padding-top: 3px;"},u))),Object(l.h)("div",{class:"ml-2 "},Object(l.h)("small",null,p," ",Object(l.h)("span",{class:"font-weight-lighter"},"- ",h.name)))):Object(l.h)(e,null,Object(l.h)("div",{class:"text-center border rounded-circle imageRounded imageRoundedThumb",style:(b?`background-image: url("${b}"); background-size: cover;`:"")+" opacity: 0.5;"},!b&&Object(l.h)("div",{class:"text-muted",style:"font-size: 12px; padding-top: 3px;"},u)),Object(l.h)("div",{class:"ml-2"},Object(l.h)("small",null,p))))})))}})||a;t.a=d}).call(this,s("hosL").Fragment)},"/922":function(e,t,s){"use strict";(function(e){var n,i=s("hosL"),a=s("Utv1"),l=s("/eY4"),o=s("OhSV"),r=s("go65"),c=s("om2D"),m=(s("ETxl"),s("ZOvn"));let h=Object(l.a)(n=class extends i.Component{constructor(e){var t;super(e),t=this,this.beforeImagesUploaded=()=>{this.setState({sendButtonEnabled:!1})},this.afterImagesUploaded=()=>{this.setState({sendButtonEnabled:!0})},this.commentWorkout=async function(){const{sendButtonEnabled:e}=t.state;if(!e)return!1;const{callback:s=(()=>{}),inputRefObject:n={}}=t.props,{workout:i}=t.props,{workoutStore:a}=t.props.stores,{comment:l,showAddImage:o}=t.state;t.setState({sendButtonEnabled:!1});const r=await a.commentWorkout({id:i.id,comment:l});r&&200===r.status&&(t.setState({comment:{body:"",images:[]}},()=>{m.a.resizeTextarea(n[i.id]),o&&t.addImage()}),s({workout:i,response:r})),t.setState({sendButtonEnabled:!0})},this.addImages=({value:e})=>{const{comment:t}=this.state;t.images.push(...e),this.setState({comment:t})},this.addImage=()=>{const{showAddImage:e=!1}=this.state;this.setState({showAddImage:!e})},this.handleImageErrored=e=>{const t=e.target;t.onerror=null,setTimeout(()=>{t.src+="?"+new Date},1e3)},this.state={comment:{body:"",images:[]},showAddImage:!1,sendButtonEnabled:!0},this.inputRef={}}render(){const{inputRef:t,col:s=12,offset:n=0,showAvatar:l=!0,extraClass:h="",workout:d}=this.props,{comment:b,showAddImage:u,sendButtonEnabled:p}=this.state,{userStore:O}=this.props.stores,{user:g={}}=O,j=g.firstname?`${a.a.ucfirst(g.firstname,!0)}${a.a.ucfirst(g.lastname,!0)}`:""+a.a.ucfirst(g.email||"",!0),f=g.image||(g.images?g.images[0]:void 0);return Object(i.h)("div",{class:`col-${s} offset-${n} ${h}`},Object(i.h)("div",{class:"d-flex mb-0 position-relative w-100"},l&&Object(i.h)("div",{class:"text-center border rounded-circle imageRounded imageRoundedSmall",style:(f?`background-image: url('${f.s3SmallLink}'); background-size: cover;`:"")+" border-width: 3px !important;"},!g.image&&Object(i.h)("span",{class:"font-weight-lighter",style:"font-size: 15px;"},j)),Object(i.h)("div",{class:"col pl-3",style:"line-height: 1.2em;"},Object(i.h)("div",{class:"d-flex bd-highlight"},Object(i.h)("div",{class:"p-0 w-100 bd-highlight"},Object(i.h)("label",{class:"sr-only",for:"inlineFormInput"},Object(i.h)(o.c,{id:"comments.comment"},"Kommentar")),Object(i.h)("div",{class:"border rounded rounded-lg position-relative"},Object(i.h)(o.b,null,Object(i.h)("textarea",{class:"form-control-plaintext px-2",type:"text",placeholder:Object(i.h)(o.c,{id:"comments.write-comment"},"Skriv en kommentar..."),onInput:Object(r.a)(this,"comment.body"),onKeyUp:m.a.resizeTextarea,onFocus:m.a.resizeTextarea,style:"height: 2.3em;",value:b.body,ref:t})),Object(i.h)("div",{class:"position-absolute",style:"top: 8px; right: 10px; font-size: 1.2em;"},Object(i.h)("i",{class:"fas fa-image pointerCursor","data-id":d.id,onClick:this.addImage})))),Object(i.h)("div",{class:"p-0 pl-2 flex-shrink-1 bd-highlight"},Object(i.h)("button",{type:"button",class:`btn btn-${p?"primary":"secondary"} mb-2`,disabled:!p,onClick:this.commentWorkout},Object(i.h)("i",{class:"fas fa-paper-plane"})))))),u&&Object(i.h)(e,null,Object(i.h)("div",{class:"col-12 text-center"},Object(i.h)("div",{class:"container-fluid"},Object(i.h)("div",{class:"row"},b.images&&b.images.map(e=>Object(i.h)("div",{class:"col-3 p-1"},Object(i.h)("img",{src:e.s3SmallLink,class:"img-fluid",onError:this.handleImageErrored}),Object(i.h)("button",{class:"btn btn-sm btn-link",onClick:this.removeImage,"data-name":e.name},Object(i.h)("i",{class:"fas fa-trash"}),"  ",Object(i.h)(o.c,{id:"comments.remove-image"},"Remove")))))),Object(i.h)(c.a,{object:b,updateField:this.addImages,before:this.beforeImagesUploaded,after:this.afterImagesUploaded,autoOpen:!0}))))}})||n;t.a=h}).call(this,s("hosL").Fragment)},"3wGD":function(e,t,s){"use strict";var n,i=s("hosL"),a=s("Utv1"),l=s("/eY4"),o=s("OhSV"),r=s("go65"),c=(s("ETxl"),s("ZOvn"));let m=Object(l.a)(n=class extends i.Component{constructor(e){var t;super(e),t=this,this.commentWorkout=async function(){const{sendButtonEnabled:e}=t.state;if(!e)return!1;const{callback:s=(()=>{}),commentId:n,inputRefObject:i={}}=t.props,{workout:a}=t.props,{workoutStore:l}=t.props.stores,{comment:o=""}=t.state;t.setState({sendButtonEnabled:!1});const r=await l.commentReplyWorkout({id:a.id,commentId:n,comment:o});r&&200===r.status&&(t.setState({comment:""},()=>{c.a.resizeTextarea(i[n])}),s({workout:a,response:r,commentId:n})),t.setState({sendButtonEnabled:!0})},this.state={sendButtonEnabled:!0},this.inputRef={}}render(){const{inputRef:e}=this.props,{comment:t,sendButtonEnabled:s}=this.state,{userStore:n}=this.props.stores,{user:l={}}=n,m=l.firstname?`${a.a.ucfirst(l.firstname,!0)}${a.a.ucfirst(l.lastname,!0)}`:""+a.a.ucfirst(l.email||"",!0),h=l.image||(l.images?l.images[0]:void 0);return Object(i.h)("div",{class:"w-100"},Object(i.h)("div",{class:"d-flex mb-0 position-relative w-100"},Object(i.h)("div",{class:"text-center border rounded-circle imageRounded imageRoundedThumb",style:(h?`background-image: url('${h.s3SmallLink}'); background-size: cover;`:"")+" border-width: 3px !important;"},!h&&Object(i.h)("span",{class:"font-weight-lighter",style:"font-size: 15px;"},m)),Object(i.h)("div",{class:"col pl-3",style:"line-height: 1.2em;"},Object(i.h)("div",{class:"d-flex bd-highlight"},Object(i.h)("div",{class:"p-0 w-100 bd-highlight"},Object(i.h)("label",{class:"sr-only",for:"inlineFormInput"},Object(i.h)(o.c,{id:"comments.comment"},"Kommentar")),Object(i.h)("div",{class:"border rounded rounded-lg position-relative"},Object(i.h)(o.b,null,Object(i.h)("textarea",{class:"form-control-plaintext px-2",type:"text",placeholder:Object(i.h)(o.c,{id:"comments.write-comment"},"Skriv en kommentar..."),onInput:Object(r.a)(this,"comment"),onKeyUp:c.a.resizeTextarea,style:"height: 2.3em;",value:t,ref:e})))),Object(i.h)("div",{class:"p-0 pl-2 flex-shrink-1 bd-highlight"},Object(i.h)("button",{type:"button",class:`btn btn-${s?"primary":"secondary"} mb-2`,disabled:!s,onClick:this.commentWorkout},Object(i.h)("i",{class:"fas fa-paper-plane"})))))))}})||n;t.a=m},"8Lgr":function(e,t,s){"use strict";(function(e){function n(e){return l.a.format(e,e<5?2:1)}var i,a=s("hosL"),l=s("Utv1"),o=s("/eY4");s("OhSV"),s("ZOvn");let r=Object(o.a)(i=class extends a.Component{render(){const{value:t=0,smallUnit:s}=this.props,{userStore:i}=this.props.stores,{user:l}=i,{settings:o={}}=l;return o.imperial?Object(a.h)(e,null,Object(a.h)("nobr",null,n(function(e){return.621371*e}(t))," ",s?Object(a.h)(e,null,Object(a.h)("small",null,Object(a.h)("small",null,Object(a.h)("small",{class:"ml-0 text-muted"},"mi")))):Object(a.h)(e,null,"mi"))):Object(a.h)(e,null,Object(a.h)("nobr",null,n(t)," ",s?Object(a.h)(e,null,Object(a.h)("small",null,Object(a.h)("small",null,Object(a.h)("small",{class:"ml-0 text-muted"},"km")))):Object(a.h)(e,null,"km")))}})||i;t.a=r}).call(this,s("hosL").Fragment)},ETxl:function(e){e.exports={hoverelementonly:"hoverelementonly__1mJGJ",hoverElement:"hoverElement__axh3O",hoverelementhide:"hoverelementhide__1k_qH","progress-bar-vertical":"progress-bar-vertical__1B2sC","progress-bar":"progress-bar__pnsVj",dragged:"dragged__QXO46",over:"over__1re3x",list:"list__q_emZ"}},QkTp:function(e,t,s){"use strict";(function(e){var n,i=s("hosL"),a=s("Utv1"),l=s("/eY4");s("OhSV"),s("ZOvn");let o=Object(l.a)(n=class extends i.Component{render(){const{value:t=0}=this.props,{userStore:s}=this.props.stores,{user:n}=s,{settings:l={}}=n;return l.imperial?Object(i.h)(e,null,Object(i.h)("nobr",null,a.a.format(function(e){return 9*e/5+32}(t),0),"°F")):Object(i.h)(e,null,Object(i.h)("nobr",null,a.a.format(t,1),"°C"))}})||n;t.a=o}).call(this,s("hosL").Fragment)},UwwE:function(e,t,s){"use strict";(function(e){var n,i=s("hosL"),a=s("Utv1"),l=s("/eY4");s("OhSV"),s("ZOvn");let o=Object(l.a)(n=class extends i.Component{render(){const{value:t=0}=this.props,{userStore:s}=this.props.stores,{user:n}=s,{settings:l={}}=n;return l.imperial?Object(i.h)(e,null,Object(i.h)("nobr",null,a.a.format(function(e){return 2.20462*e}(t),0)," lb")):Object(i.h)(e,null,Object(i.h)("nobr",null,a.a.format(t,0)," kg"))}})||n;t.a=o}).call(this,s("hosL").Fragment)},irB3:function(e,t,s){"use strict";(function(e){var n,i=s("hosL"),a=s("Utv1"),l=s("/eY4");s("OhSV"),s("ZOvn");let o=Object(l.a)(n=class extends i.Component{render(){const{value:t=0,smallUnit:s}=this.props,{userStore:n}=this.props.stores,{user:l}=n,{settings:o={}}=l;return o.imperial?Object(i.h)(e,null,Object(i.h)("nobr",null,a.a.format(function(e){return 3.28084*e}(t),0)," ",s?Object(i.h)(e,null,Object(i.h)("small",null,Object(i.h)("small",null,Object(i.h)("small",{class:"ml-0 text-muted"},"ft")))):Object(i.h)(e,null,"ft"))):Object(i.h)(e,null,Object(i.h)("nobr",null,a.a.format(t,0)," ",s?Object(i.h)(e,null,Object(i.h)("small",null,Object(i.h)("small",null,Object(i.h)("small",{class:"ml-0 text-muted"},"m")))):Object(i.h)(e,null,"m")))}})||n;t.a=o}).call(this,s("hosL").Fragment)},nHdA:function(e,t,s){"use strict";(function(e){var n,i=s("hosL"),a=s("Utv1"),l=s("/eY4"),o=s("OhSV");s("ZOvn");let r=Object(l.a)(n=class extends i.Component{render(){const{value:t=0,smallUnit:s}=this.props,{userStore:n}=this.props.stores,{user:l}=n,{settings:r={}}=l;return r.imperial?Object(i.h)(e,null,Object(i.h)("nobr",null,a.a.format(function(e){return.621371*e}(t),1)," ",s?Object(i.h)(e,null,Object(i.h)("small",null,Object(i.h)("small",null,Object(i.h)("small",{class:"ml-0 text-muted"},Object(i.h)(o.c,{id:"workouts.mph"},"mph"))))):Object(i.h)(e,null,Object(i.h)(o.c,{id:"workouts.mph"},"mph")))):Object(i.h)(e,null,Object(i.h)("nobr",null,a.a.format(t,1)," ",s?Object(i.h)(e,null,Object(i.h)("small",null,Object(i.h)("small",null,Object(i.h)("small",{class:"ml-0 text-muted"},Object(i.h)(o.c,{id:"workouts.kmt"},"km/t"))))):Object(i.h)(e,null,Object(i.h)(o.c,{id:"workouts.kmt"},"km/t"))))}})||n;t.a=r}).call(this,s("hosL").Fragment)},sqi2:function(e,t,s){"use strict";(function(e){function n(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function i(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}var a,l=s("hosL"),o=s("Utv1"),r=s("/eY4"),c=s("cneo"),m=s("OhSV"),h=s("fh8t"),d=s.n(h),b=s("3wGD"),u=(s("ETxl"),s("ZOvn"));const p={showAddComment:{},showAllComments:!1,showAllReplies:{},viewImageIdx:{}};let O=Object(r.a)(a=class extends l.Component{constructor(e){var t;super(e),t=this,this.likeComment=async function(e){const{callback:s=(()=>{})}=t.props,n=e.target.parentElement.dataset.id||e.target.dataset.id,{workout:i}=t.props,{workoutStore:a}=t.props.stores,l=await a.likeWorkoutComment({id:i.id,commentId:n});return l&&200===l.status&&s({type:"likeComment",workout:i,commentId:n,response:l}),!0},this.likeReply=async function(e){const{callback:s=(()=>{})}=t.props,n=e.target.parentElement.dataset.id||e.target.dataset.id,i=e.target.parentElement.dataset.comment||e.target.dataset.comment,{workout:a}=t.props,{workoutStore:l}=t.props.stores,o=await l.likeWorkoutCommentReply({id:a.id,replyId:n,commentId:i});o&&200===o.status&&s({type:"likeReply",workout:a,commentId:i,replyId:n,response:o})},this.replyComment=async function(e){const s=e.target.parentElement.dataset.id||e.target.dataset.id,{showAddComment:n}=t.state;n[s]=!n[s],t.setState({showAddComment:n},()=>{t.inputRef[s]&&t.inputRef[s].focus()})},this.toggleComments=()=>{const{showAllComments:e}=this.state;this.setState({showAllComments:!e})},this.toggleReplies=e=>{const t=e.target.parentElement.dataset.id||e.target.dataset.id,{showAllReplies:s}=this.state;s[t]=!s[t],this.setState({showAllReplies:s})},this.viewImage=e=>{const{id:t,idx:s}=e.target.closest("img").dataset,{viewImageIdx:n}=this.state;n[t]=s,this.setState({viewImageIdx:n})},this.translate=async function(e){e.preventDefault(),e.stopPropagation();const{replyid:s,commentid:n}=e.target.closest("button").dataset,{workout:i}=t.props,{userStore:a,teamStore:l}=t.props.stores,{user:o}=a,{showOriginal:r={},translatedText:c={}}=t.state,m=`${n}${s?"-"+s:""}`;r[m]=0,c[m]=s?await l.translateCommentReply({commentid:n,replyid:s,object:i,user:o}):await l.translateComment({commentid:n,object:i,user:o}),t.setState({showOriginal:r,translatedText:c})},this.showOriginal=e=>{const{replyid:t,commentid:s}=e.target.closest("button").dataset;e.preventDefault(),e.stopPropagation();const{showOriginal:n={}}=this.state;n[`${s}${t?"-"+t:""}`]=1,this.setState({showOriginal:n})},this.displayTeam=(e,t)=>{e.preventDefault(),e.stopPropagation();const{appState:s}=this.props.stores;s.openDrawer("publicTeam",{teamId:t,height:"80vh"})},this.openInbox=(e,t)=>{e.preventDefault(),e.stopPropagation();const{appState:s}=this.props.stores;s.openDrawer("inboxDetail",{fromuser:t,height:"80vh"})},this.state=function(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?n(Object(s),!0).forEach((function(t){i(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):n(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}({},p),this.inputRef={}}render(){const{showAddComment:t,showAllComments:s,showAllReplies:n,viewImageIdx:i,showOriginal:a={},translatedText:r={}}=this.state,{workout:h,callback:p=(()=>{}),col:O=12,offset:g=0,compact:j=!1}=this.props,{userStore:f,teamStore:v}=this.props.stores,{user:y,isAdmin:w}=f,{language:k="en"}=y;let x,S=[],C=0,P=0;return h.comments&&(C=h.comments.length,s?S=h.comments:(x=j?0:1,S=h.comments.slice(Math.max(C-x,0))),P=S.length),Object(l.h)("div",null,h&&S&&S.reverse().map(s=>{const{user:O={}}=s,g=v.findPublicTeamByMembers(O.id),j=u.a.displayNameShort(O),f=u.a.displayName(O),S=O.image||(O.images?O.images[0]:void 0),C=s.likes&&s.likes.findIndex(e=>e.user===y.id)>-1;let P=[],I=0,L=0;s.comments&&(I=s.comments.length,P=n[s.id]?s.comments:s.comments.slice(0,x),L=P.length);const T=[];if(s.images){const e=Object(c.i)(s.images);T.push(...e)}const R=i[s.id]?i[s.id]:0,D=T&&T[R]?T[R]:null,{currentLocationGeocode:E={}}=s,U=v.getCommentTranslations({object:h,commentid:s.id,targetLang:k})||r[s.id];let $=U||s.comment;return a[s.id]&&($=s.comment),Object(l.h)("div",{class:"row"},Object(l.h)("div",{class:"col-12 d-flex mb-2 position-relative"},Object(l.h)("div",{class:"text-center border rounded-circle imageRounded imageRoundedSmall",style:(S?`background-image: url("${S.s3SmallLink}"); background-size: cover;`:"")+" border-width: 3px !important;"},!O.image&&Object(l.h)("span",{class:"font-weight-lighter",style:"font-size: 15px;"},j)),Object(l.h)("div",{class:"flex-grow-1 pl-3 pt-0",style:"line-height: 1.2em;"},Object(l.h)("div",{class:"bg-light p-2 rounded rounded-lg"},Object(l.h)("div",null,Object(l.h)("span",{style:"font-size: 0.95em;"},Object(l.h)("h5",{class:"font-weight-bold mb-0",style:"font-size: 1.0em;"},O.uuidv4&&O.uuidv4!==y.uuidv4?Object(l.h)(e,null,Object(l.h)("a",{href:"/inbox/"+O.uuidv4,onClick:e=>this.openInbox(e,O.uuidv4)},f)):Object(l.h)(e,null,f)),g&&g.length>0&&Object(l.h)("div",{class:"mb-2"},Object(l.h)("small",{class:"font-weight-lighter text-muted"},g.filter(e=>1===e.public).slice(0,2).map(t=>Object(l.h)(e,null,Object(l.h)("a",{href:"/teams/public/"+t.uuidv4,class:"mr-2"},Object(l.h)("i",{class:"fas fa-users text-muted"})," ",t.name))))),Object(l.h)(d.a,{markdown:u.a.replaceImages($,s.images,k),markdownOpts:u.a.getMarkdownOptions()}))),Object(l.h)("div",{class:"container-fluid px-3 mt-1"},D&&Object(l.h)("div",{class:"clearfix row"},Object(l.h)("div",{class:"col-12 px-0 overflow-hidden",style:"max-height: 30vh;"},Object(l.h)("img",{loading:"lazy",class:"img-fluid",style:"min-width: 100px;",src:D.s3LargeLink}))),T&&T.length>1&&Object(l.h)("div",{class:"clearfix d-flex flex-wrap row"},T.map((t,n)=>Object(l.h)(e,null,Object(l.h)("div",{class:"col px-0 overflow-hidden",style:"max-height: 100px; min-width: 100px;"},Object(l.h)("img",{loading:"lazy",class:"img-fluid border",style:"min-width: 100px;",src:t.s3SmallLink,onClick:this.viewImage,"data-id":s.id,"data-idx":n}))))))),Object(l.h)("small",null,Object(l.h)("button",{class:"btn btn-sm btn-link py-0 "+(C?"text-primary":""),onClick:this.likeComment,"data-id":s.id},Object(l.h)(m.c,{id:"comments.like"},"Lik")),"-",Object(l.h)("button",{class:"btn btn-sm btn-link py-0",onClick:this.replyComment,"data-id":s.id},Object(l.h)(m.c,{id:"comments.comment-add"},"Kommentar")),s.language!==k&&Object(l.h)(e,null,"-",!a[s.id]&&U?Object(l.h)(e,null,Object(l.h)("button",{type:"button",class:"btn btn-sm btn-link","data-commentid":s.id,onClick:this.showOriginal},Object(l.h)("i",{class:"fas fa-cog"}),"  ",Object(l.h)(m.c,{id:"home.translate-show-original"},"Show original"))):Object(l.h)(e,null,Object(l.h)("button",{type:"button",class:"btn btn-sm btn-link",onClick:this.translate,"data-commentid":s.id},Object(l.h)("i",{class:"fas fa-cog"})," ",Object(l.h)(m.c,{id:"home.translate-to"},"See translation")))),"-",Object(l.h)("button",{class:"btn btn-sm btn-link py-0 disabled"},o.a.formatDistance(s.createdDate,new Date,{locale:"no-NB"}),s.updatedDate&&Object(l.h)(e,null,Object(l.h)("span",{class:"font-weight-light ml-2"},"(Edited ",o.a.formatDistance(s.updatedDate,new Date,{locale:"no-NB"}),")"))),w&&E&&E.formatted_address&&Object(l.h)(e,null,Object(l.h)("span",{class:"ml-2 text-muted"},Object(l.h)("i",{class:"fas fa-map-marker-alt"})," ",E.formatted_address)))),s.likes&&s.likes.length>0&&Object(l.h)("small",{class:"position-absolute bg-light shadow-sm rounded-lg py-0 px-1",style:"bottom: 20px; right: 15px;"},Object(l.h)("i",{class:"fas fa-thumbs-up text-primary"})," ",s.likes.length)),Object(l.h)("div",{class:"col-11 offset-1 mb-2"},s&&P&&P.map(t=>{const{user:n={}}=t,i=v.findPublicTeamByMembers(n.id),c=n.firstname?`${o.a.ucfirst(n.firstname,!0)}${o.a.ucfirst(n.lastname,!0)}`:""+o.a.ucfirst(n.email||"",!0),b=n.firstname?`${n.firstname} ${n.lastname}`:""+n.email,p=n.image||(n.images?n.images[0]:void 0),O=t.likes&&t.likes.findIndex(e=>e.user===y.id)>-1,g=v.getCommentReplyTranslations({object:h,commentid:s.id,replyid:t.id,targetLang:k})||r[`${s.id}-${t.id}`];let j=g||t.comment;return a[`${s.id}-${t.id}`]&&(j=t.comment),Object(l.h)("div",{class:"row"},Object(l.h)("div",{class:"col-12 d-flex mb-2 position-relative"},Object(l.h)("div",{class:"text-center border rounded-circle imageRounded imageRoundedThumb",style:(p?`background-image: url("${p.s3SmallLink}"); background-size: cover;`:"")+" border-width: 3px !important;"},!n.image&&Object(l.h)("span",{class:"font-weight-lighter",style:"font-size: 15px;"},c)),Object(l.h)("div",{class:"flex-grow-1 pl-3 pt-0",style:"line-height: 1.2em;"},Object(l.h)("div",{class:"bg-light p-2 rounded-lg"},Object(l.h)("span",{style:"font-size: 0.95em;"},Object(l.h)("h5",{class:"font-weight-bold mb-0",style:"font-size: 1.0em;"},n.uuidv4&&n.uuidv4!==y.uuidv4?Object(l.h)(e,null,Object(l.h)("a",{href:"/inbox/"+n.uuidv4,onClick:e=>this.openInbox(e,n.uuidv4)},b)):Object(l.h)(e,null,b)),i&&i.length>0&&Object(l.h)("div",{class:"mb-2"},Object(l.h)("small",{class:"font-weight-lighter text-muted"},i.filter(e=>1===e.public).slice(0,2).map(t=>Object(l.h)(e,null,Object(l.h)("a",{href:"/teams/public/"+t.uuidv4,class:"mr-2"},Object(l.h)("i",{class:"fas fa-users text-muted"})," ",t.name))))),Object(l.h)(d.a,{markdown:u.a.replaceImages(j,t.images,k),markdownOpts:u.a.getMarkdownOptions()}))),Object(l.h)("small",null,Object(l.h)("button",{class:"btn btn-sm btn-link py-0 "+(O?"text-primary":""),onClick:this.likeReply,"data-comment":s.id,"data-id":t.id},Object(l.h)(m.c,{id:"comments.like"},"Lik")),"-",Object(l.h)("button",{class:"btn btn-sm btn-link py-0",onClick:this.replyComment,"data-id":s.id},Object(l.h)(m.c,{id:"comments.comment-add"},"Kommentar")),t.language!==k&&Object(l.h)(e,null,"-",!a[`${s.id}-${t.id}`]&&g?Object(l.h)(e,null,Object(l.h)("button",{type:"button",class:"btn btn-sm btn-link","data-commentid":s.id,"data-replyid":t.id,onClick:this.showOriginal},Object(l.h)("i",{class:"fas fa-cog"}),"  ",Object(l.h)(m.c,{id:"home.translate-show-original"},"Show original"))):Object(l.h)(e,null,Object(l.h)("button",{type:"button",class:"btn btn-sm btn-link",onClick:this.translate,"data-commentid":s.id,"data-replyid":t.id},Object(l.h)("i",{class:"fas fa-cog"})," ",Object(l.h)(m.c,{id:"home.translate-to"},"See translation")))),"-",Object(l.h)("button",{class:"btn btn-sm btn-link py-0 disabled"},o.a.formatDistance(t.createdDate,new Date,{locale:"no-NB"})))),t.likes&&Object(l.h)("small",{class:"position-absolute bg-light shadow-sm rounded-lg py-0 px-1",style:"bottom: 20px; right: 15px;"},Object(l.h)("i",{class:"fas fa-thumbs-up text-primary"})," ",t.likes.length)))}),I-L>0&&Object(l.h)("div",null,Object(l.h)("button",{class:"btn btn-sm btn-link py-0",onClick:this.toggleReplies,"data-id":s.id},Object(l.h)(m.c,{id:"comments.show-more",fields:{more:I-L}},"Vis ",I-L," flere kommentarer...")))),t[s.id]&&Object(l.h)("div",{class:"col-11 offset-1 d-flex mb-2 position-relative"},Object(l.h)(b.a,{stores:this.props.stores,workout:h,callback:p,commentId:s.id,inputRef:e=>this.inputRef[s.id]=e,inputRefObject:this.inputRef})))}),C-P>0&&Object(l.h)("div",null,Object(l.h)("button",{class:"btn btn-sm btn-link py-0",onClick:this.toggleComments},Object(l.h)(m.c,{id:"comments.show-more",fields:{more:C-P}},"Vis ",C-P," flere kommentarer..."))),s&&Object(l.h)("div",null,Object(l.h)("button",{class:"btn btn-sm btn-link py-0",onClick:this.toggleComments},Object(l.h)(m.c,{id:"comments.hide-all-comments"},"Skjul alle kommentarene."))))}})||a;t.a=O}).call(this,s("hosL").Fragment)},"vY+r":function(e,t,s){"use strict";(function(e){function n(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function i(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}var a,l=s("hosL"),o=s("Utv1"),r=s("/eY4"),c=s("OhSV"),m=s("ZOvn");const h={};let d=Object(r.a)(a=class extends l.Component{constructor(e){super(e),this.toggleViews=()=>{const{showViewList:e}=this.state,{isTeamAdmin:t,isAdmin:s}=this.props;(t||s)&&this.setState({showViewList:!e})},this.state=function(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?n(Object(s),!0).forEach((function(t){i(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):n(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}({},h)}render(){const{showViewList:t}=this.state,{storyStore:s,teamStore:n,workoutStore:i}=this.props.stores,{views:a,object:r,type:h="story",onTeamClick:d=(()=>{}),onUserClick:b=(()=>{})}=this.props,u=[];Object.entries(r.statistics).forEach(([e,t])=>{Object.entries(t).forEach(([e,t])=>{t.viewUsers&&u.push(t.viewUsers)})});const p=u.flat().slice(0,50);return Object(l.h)(e,null,Object(l.h)("div",{class:"d-flex justify-content-end mb-2"},Object(l.h)("span",{class:"ml-2 text-muted font-weight-normal",onClick:this.toggleViews},Object(l.h)("small",null,a," ",Object(l.h)(c.c,{id:"story.views"},"views")))),t&&Object(l.h)("div",{class:"mt-3 mb-3"},p&&p.map(t=>{let a,r,c;if("story"===h?(a=s.findPublicUser(t),r=s.findPublicTeamByMembers(t)):"team"===h?(a=n.findPublicUser(t),r=n.findPublicTeamByMembers(t)):"workout"===h&&(a=i.findPublicUser(t),r=i.findPublicTeamByMembers(t)),!a)return"";o.a.isArray(r)&&(c=r.find(e=>1===e.public));const b=m.a.getImage({user:a,team:c,priority:"user"}),u=m.a.displayNameShort(a),p=m.a.displayName(a,!0);return Object(l.h)("div",{class:"d-flex flex-row position-relative font-weight-normal mb-1"},c?Object(l.h)(e,null,Object(l.h)("a",{href:"/teams/public/"+c.uuidv4,title:c.name,onClick:e=>d(e,c.uuidv4),class:"stretched-link"},Object(l.h)("div",{class:"text-center border rounded-circle imageRounded imageRoundedThumb",style:""+(b?`background-image: url("${b}"); background-size: cover;`:"")},!b&&Object(l.h)("div",{class:"",style:"font-size: 12px; padding-top: 3px;"},u))),Object(l.h)("div",{class:"ml-2 "},Object(l.h)("small",null,p," ",Object(l.h)("span",{class:"font-weight-normal"},"- ",c.name)))):Object(l.h)(e,null,Object(l.h)("div",{class:"text-center border rounded-circle imageRounded imageRoundedThumb",style:(b?`background-image: url("${b}"); background-size: cover;`:"")+" opacity: 0.5;"},!b&&Object(l.h)("div",{class:"text-muted",style:"font-size: 12px; padding-top: 3px;"},u)),Object(l.h)("div",{class:"ml-2"},Object(l.h)("small",null,p))))}),a>p.length&&Object(l.h)(e,null,Object(l.h)("small",{class:"text-muted"},Object(l.h)(c.c,{id:"story.limited-to"},"Limited to max 50 users.")))))}})||a;t.a=d}).call(this,s("hosL").Fragment)}}]);
//# sourceMappingURL=4.chunk.d4cb8.esm.js.map