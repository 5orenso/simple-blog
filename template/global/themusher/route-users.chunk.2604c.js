(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{ztHd:function(t,e,s){"use strict";s.r(e),function(t){var c,i=s("hosL"),r=s("Utv1"),n=s("/eY4"),a=s("OhSV"),l=s("ZOvn"),o=s("tJLP"),h=s("Cjoz"),u=l.a.marginTop(!1),b=l.a.marginBottom(),d=Object(n.a)(c=function(e){function s(t){var s;return(s=e.call(this,t)||this).resetEmailMessage=function(){var t=s.props.stores.userStore;t.updateField("emailMessage",""),t.updateField("emailMessageIcon","")},s.resetEmailError=function(){var t=s.props.stores.userStore;t.updateField("emailError",""),t.updateField("emailErrorIcon","")},s.toggleSetting=function(t){return new Promise((function(e,c){var i,r,n;return n=(r=s.props.stores.userStore).user.settings,Promise.resolve(r.updateSetting((i={},i["settings."+t]=1===(void 0===n?{}:n)[t]?0:1,i))).then((function(){try{return e()}catch(t){return c(t)}}),c)}))},s.subscriptionCreate=function(){return new Promise((function(t,e){var c,i,r;return i=(c=s.props.stores).paypalStore,r=c.userStore,s.setState({paypalLoading:!0}),Promise.resolve(i.subscriptionCreate({})).then((function(){try{return Promise.resolve(r.getInfo()).then((function(){try{return s.setState({paypalLoading:!1}),t()}catch(t){return e(t)}}),e)}catch(t){return e(t)}}),e)}))},s.subscriptionCancel=function(t){return new Promise((function(e,c){var i,r,n;return i=t.target.closest("button").dataset.id,n=(r=s.props.stores).userStore,Promise.resolve(r.paypalStore.subscriptionCancel({planId:i})).then((function(){try{return Promise.resolve(n.getInfo()).then((function(){try{return e()}catch(t){return c(t)}}),c)}catch(t){return c(t)}}),c)}))},s.subscriptionDetail=function(){return new Promise((function(t,e){function c(){return t()}var i,r,n,a;return(a=(void 0===(n=(r=(i=s.props.stores).userStore).user)?{}:n).subscription).payPalSubscriptionId?Promise.resolve(i.paypalStore.subscriptionDetail({id:a.payPalSubscriptionId})).then(function(t){try{return r.setSubscriptionPaypal(t.data),Promise.resolve(r.getInfo()).then(function(){try{return c.call(this)}catch(t){return e(t)}}.bind(this),e)}catch(t){return e(t)}}.bind(this),e):c.call(this)}))},s.toggleCancel=function(){s.setState({showCancel:!s.state.showCancel})},s.toggleDetails=function(){var t=s.state.showDetails;t||s.subscriptionDetail(),s.setState({showDetails:!t})},s.state={time:Date.now(),count:10},s}var c,n;n=e,(c=s).prototype=Object.create(n.prototype),c.prototype.constructor=c,c.__proto__=n;var l=s.prototype;return l.getPaypalButton=function(){var e=this.state,s=e.paypalLoading,c=e.showCancel,n=this.props.stores.userStore,a=n.user,l=n.subscriptionPaypal,o=void 0===l?{}:l,h=(void 0===a?{}:a).subscription,u=void 0===h?{}:h;if(u&&u.isActive){if(e.showDetails){var b=o.subscriber,d=void 0===b?{}:b,m=o.billing_info,j=void 0===m?{}:m,O=d.name,p=void 0===O?{}:O,v=j.last_payment,g=void 0===v?{}:v;return Object(i.h)(t,null,Object(i.h)("h5",null,"Subscriber"),Object(i.h)("table",{class:"table table-sm table-striped"},Object(i.h)("tbody",null,Object(i.h)("tr",null,Object(i.h)("th",null,"Email"),Object(i.h)("td",null,d.email_address)),Object(i.h)("tr",null,Object(i.h)("th",null,"Name"),Object(i.h)("td",null,p.given_name," ",p.surname)),Object(i.h)("tr",null,Object(i.h)("th",null,"Next billing"),Object(i.h)("td",null,r.a.isoDate(j.next_billing_time))),Object(i.h)("tr",null,Object(i.h)("th",null,"Last payment"),Object(i.h)("td",null,r.a.isoDate(g.time)," ",g.amount&&Object(i.h)(t,null,g.amount.currency_code," ",g.amount.value))))),c?Object(i.h)(t,null,Object(i.h)("button",{type:"submit",class:"btn btn-danger btn-lg",onClick:this.subscriptionCancel,disabled:s,"data-id":u.payPalSubscriptionId},"Cancel subscription ",s&&Object(i.h)(t,null,Object(i.h)("span",{class:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"}),Object(i.h)("span",{class:"sr-only"},"Loading...")))):Object(i.h)(t,null,Object(i.h)("small",{class:"font-weight-lighter",onClick:this.toggleCancel},"Cancel subscription")))}return Object(i.h)(t,null,Object(i.h)("div",{class:"d-flex"},Object(i.h)("div",{class:"display-4 text-success float-left"},Object(i.h)("i",{class:"fas fa-check"})),Object(i.h)("div",{class:"align-self-stretch ml-3 pt-3"},"Active premium subscription since ",r.a.isoDate(u.startDate),Object(i.h)("br",null),Object(i.h)("small",{class:"font-weight-lighter",onClick:this.toggleDetails},"Subscription details"))))}if(u&&u.approveLinkObject){var f=u.approveLinkObject.href;return Object(i.h)(t,null,Object(i.h)("a",{class:"btn btn-primary btn-lg",href:f,target:"_blank",rel:"noreferrer"},"Approve payment at PayPal"))}return Object(i.h)(t,null,Object(i.h)("button",{type:"submit",class:"btn btn-success btn-lg",onClick:this.subscriptionCreate,disabled:s},"Subscripe to Premium / Monthly $5 ",s&&Object(i.h)(t,null,Object(i.h)("span",{class:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"}),Object(i.h)("span",{class:"sr-only"},"Loading..."))))},l.componentDidMount=function(){this.props.verifyEmailToken&&this.props.stores.userStore.verifyEmail({token:this.props.verifyEmailToken})},l.render=function(){var e=this,s=this.props.stores.userStore,c=s.user,n=s.emailMessage,l=s.emailError,d=s.emailMessageIcon,m=s.emailErrorIcon,j=s.isAdmin,O=c.settings,p=void 0===O?{}:O,v=s.findTeams(c.teams),g=r.a.getApiServer(),f=r.a.getJwtToken();return Object(i.h)("div",{class:"container-fluid",style:"margin-bottom: "+b+"; margin-top: "+u+";"},Object(i.h)("div",{class:"row"},Object(i.h)("div",{class:"col-12"},Object(i.h)(o.a,{message:l,icon:m,remove:this.resetEmailError}),Object(i.h)(h.a,{message:n,icon:d,remove:this.resetEmailMessage}),Object(i.h)("a",{href:"/users/edit",class:"btn btn-primary btn-sm float-right"},Object(i.h)(a.c,{id:"users.edit"},"Endre")),Object(i.h)("h5",null,Object(i.h)(a.c,{id:"users.title"},"Din profil"))),Object(i.h)("div",{class:"col-4 text-muted text-right"},Object(i.h)(a.c,{id:"users.email"},"E-post")),Object(i.h)("div",{class:"col-8"},c.email),Object(i.h)("div",{class:"col-4 text-muted text-right"},Object(i.h)(a.c,{id:"users.password"},"Passord")),Object(i.h)("div",{class:"col-8"},Object(i.h)("a",{href:"/users/edit-password",class:"btn btn-primary btn-sm"},Object(i.h)(a.c,{id:"users.change-password"},"Endre passord"))),c.team&&Object(i.h)(t,null,Object(i.h)("div",{class:"col-4 text-muted text-right"},Object(i.h)(a.c,{id:"users.main-team"},"Hovedteam")),Object(i.h)("div",{class:"col-8"},s.findTeam(c.team))),c.teams&&Object(i.h)(t,null,Object(i.h)("div",{class:"col-4 text-muted text-right"},Object(i.h)(a.c,{id:"users.all-teams"},"Alle teamene")),Object(i.h)("div",{class:"col-8"},v.map((function(t){return Object(i.h)("div",null,t.name)})))),c.username&&Object(i.h)(t,null,Object(i.h)("div",{class:"col-4 text-muted text-right"},Object(i.h)(a.c,{id:"users.username"},"Brukernavn")),Object(i.h)("div",{class:"col-8"},c.username)),c.firstname&&Object(i.h)(t,null,Object(i.h)("div",{class:"col-4 text-muted text-right"},Object(i.h)(a.c,{id:"users.firstname"},"Fornavn")),Object(i.h)("div",{class:"col-8"},c.firstname)),c.lastname&&Object(i.h)(t,null,Object(i.h)("div",{class:"col-4 text-muted text-right"},Object(i.h)(a.c,{id:"users.lastname"},"Etternavn")),Object(i.h)("div",{class:"col-8"},c.lastname)),c.cellphone&&Object(i.h)(t,null,Object(i.h)("div",{class:"col-4 text-muted text-right"},Object(i.h)(a.c,{id:"users.cellphone"},"Mobil")),Object(i.h)("div",{class:"col-8"},c.cellphone)),c.url&&Object(i.h)(t,null,Object(i.h)("div",{class:"col-4 text-muted text-right"},Object(i.h)(a.c,{id:"users.homepage"},"Hjemmeside")),Object(i.h)("div",{class:"col-8"},c.url)),c.facebook&&Object(i.h)(t,null,Object(i.h)("div",{class:"col-4 text-muted text-right"},Object(i.h)(a.c,{id:"users.facebook"},"Facebook")),Object(i.h)("div",{class:"col-8"},c.facebook)),c.instagram&&Object(i.h)(t,null,Object(i.h)("div",{class:"col-4 text-muted text-right"},Object(i.h)(a.c,{id:"users.instagram"},"Instagram")),Object(i.h)("div",{class:"col-8"},c.instagram)),c.snapchat&&Object(i.h)(t,null,Object(i.h)("div",{class:"col-4 text-muted text-right"},Object(i.h)(a.c,{id:"users.snapchat"},"Snapchat")),Object(i.h)("div",{class:"col-8"},c.snapchat))),Object(i.h)("div",{class:"row mt-4"},Object(i.h)("div",{class:"col-4 text-muted text-right"},Object(i.h)(a.c,{id:"users.settings-hide-profile"},"Skjul profilen")),Object(i.h)("div",{class:"col-8"},Object(i.h)("div",{class:"custom-control custom-switch"},Object(i.h)("input",{type:"checkbox",class:"custom-control-input",id:"settingsHideProfile",onInput:function(){return e.toggleSetting("hideProfile")},checked:p.hideProfile}),Object(i.h)("label",{class:"custom-control-label",for:"settingsHideProfile"})),Object(i.h)("small",{class:"text-muted"},Object(i.h)(a.c,{id:"users.settings-hide-profile-help"},"Det vil snart være mulig å bli venner med andre her på The Musher. Dersom du ikke vil at andre skal kunne finne deg, så kan du skjule profilen din her.")))),Object(i.h)("div",{class:"row mt-4"},Object(i.h)("div",{class:"col-4 text-muted text-right"},Object(i.h)(a.c,{id:"users.settings-hide-invite"},"Skjul invitasjonsboks")),Object(i.h)("div",{class:"col-8"},Object(i.h)("div",{class:"custom-control custom-switch"},Object(i.h)("input",{type:"checkbox",class:"custom-control-input",id:"settingsHideInvitation",onInput:function(){return e.toggleSetting("hideInvite")},checked:p.hideInvite}),Object(i.h)("label",{class:"custom-control-label",for:"settingsHideInvitation"})),Object(i.h)("small",{class:"text-muted"},Object(i.h)(a.c,{id:"users.settings-hide-invite-help"},"Skjul invitasjonsboksen på forsiden.")))),Object(i.h)("div",{class:"row mt-4"},Object(i.h)("div",{class:"col-4 text-muted text-right"},Object(i.h)(a.c,{id:"users.settings-hide-settings"},"Skjul innstillinger")),Object(i.h)("div",{class:"col-8"},Object(i.h)("div",{class:"custom-control custom-switch"},Object(i.h)("input",{type:"checkbox",class:"custom-control-input",id:"settingsHideSettings",onInput:function(){return e.toggleSetting("hideSettings")},checked:p.hideSettings}),Object(i.h)("label",{class:"custom-control-label",for:"settingsHideSettings"})),Object(i.h)("small",{class:"text-muted"},Object(i.h)(a.c,{id:"users.settings-hide-settings-help"},"Skjul innstillinger på forsiden.")))),Object(i.h)("div",{class:"row mt-4"},Object(i.h)("div",{class:"col-4 text-muted text-right"},Object(i.h)(a.c,{id:"users.settings-summary-email"},"Oppsummeringer")),Object(i.h)("div",{class:"col-8"},Object(i.h)("div",{class:"custom-control custom-switch"},Object(i.h)("input",{type:"checkbox",class:"custom-control-input",id:"settingsSummaryEmails",onInput:function(){return e.toggleSetting("summaryEmails")},checked:p.summaryEmails}),Object(i.h)("label",{class:"custom-control-label",for:"settingsSummaryEmails"})),Object(i.h)("small",{class:"text-muted"},Object(i.h)(a.c,{id:"users.settings-receive-summary-email"},"Motta oppsummeringer via e-post")))),Object(i.h)("div",{class:"row mt-4"},Object(i.h)("div",{class:"col-4 text-muted text-right"},Object(i.h)(a.c,{id:"users.settings-info-email"},"Info")),Object(i.h)("div",{class:"col-8"},Object(i.h)("div",{class:"custom-control custom-switch"},Object(i.h)("input",{type:"checkbox",class:"custom-control-input",id:"settingsInfoEmails",onInput:function(){return e.toggleSetting("infoEmails")},checked:p.infoEmails}),Object(i.h)("label",{class:"custom-control-label",for:"settingsInfoEmails"})),Object(i.h)("small",{class:"text-muted"},Object(i.h)(a.c,{id:"users.settings-receive-info-email"},"Motta info via e-post")))),Object(i.h)("div",{class:"row mt-4"},Object(i.h)("div",{class:"col-4 text-muted text-right"},Object(i.h)(a.c,{id:"users.settings-partner-email"},"Partners")),Object(i.h)("div",{class:"col-8"},Object(i.h)("div",{class:"custom-control custom-switch"},Object(i.h)("input",{type:"checkbox",class:"custom-control-input",id:"settingsPartnerEmails",onInput:function(){return e.toggleSetting("partnerEmails")},checked:p.partnerEmails}),Object(i.h)("label",{class:"custom-control-label",for:"settingsPartnerEmails"})),Object(i.h)("small",{class:"text-muted"},Object(i.h)(a.c,{id:"users.settings-receive-partner-email"},"Motta tilbud fra våre partnere via e-post")))),j&&Object(i.h)("div",{class:"row border-top mt-5 pt-5"},Object(i.h)("div",{class:"col-12"},this.getPaypalButton())),Object(i.h)("div",{class:"row border-top mt-5 pt-5"},Object(i.h)("div",{class:"col-12"},Object(i.h)("div",null,Object(i.h)("img",{src:"./assets/strava_logo_orange.png",style:"max-height: 100px;"}))),c.strava&&c.strava.access_token?Object(i.h)(t,null,Object(i.h)("div",{class:"col-12"},Object(i.h)("h5",null,Object(i.h)("i",{class:"fas fa-thumbs-up text-success"})," ",Object(i.h)(a.c,{id:"users.strava-connected"},"Connected to Strava!"))),Object(i.h)("div",{class:"col-4 text-right text-muted"},Object(i.h)(a.c,{id:"users.strava-id"},"id"),":"),Object(i.h)("div",{class:"col-8"}," ",c.strava.athlete.id),Object(i.h)("div",{class:"col-4 text-right text-muted"},Object(i.h)(a.c,{id:"users.strava-username"},"username"),":"),Object(i.h)("div",{class:"col-8"}," ",c.strava.athlete.username),Object(i.h)("div",{class:"col-4 text-right text-muted"},Object(i.h)(a.c,{id:"users.strava-profile"},"profile"),":"),Object(i.h)("div",{class:"col-8"}," ",Object(i.h)("img",{src:c.strava.athlete.profile})),Object(i.h)("div",{class:"col-12 mt-2"},Object(i.h)("div",{class:"display-1 text-success"},Object(i.h)("i",{class:"fas fa-check"})),Object(i.h)("small",{class:"text-muted"},Object(i.h)("small",null,Object(i.h)(a.c,{id:"users.strava-reconnect-help"},"Hvis du opplever problemer med integrasjoen så kan du prøve å koble til på nytt"),":",Object(i.h)("br",null),Object(i.h)("a",{href:g+"/api/strava/request-access?token="+f,native:!0,target:"_blank",rel:"noreferrer"},Object(i.h)(a.c,{id:"users.strava-reconnect"},"Reconnect to Strava")))))):Object(i.h)(t,null,Object(i.h)("div",{class:"col-12 mt-2"},Object(i.h)("a",{class:"btn btn-primary",href:g+"/api/strava/request-access?token="+f,native:!0,target:"_blank",rel:"noreferrer"},Object(i.h)(a.c,{id:"users.strava-connect"},"Connect to Strava"))))),Object(i.h)("div",{class:"row border-top mt-5 pt-5"},Object(i.h)("div",{class:"col-12"},Object(i.h)("div",null,Object(i.h)("img",{src:"./assets/garmin-connect.png",style:"height: 100px;"}))),c.garmin&&c.garmin.access&&c.garmin.access.oauth_token?Object(i.h)(t,null,Object(i.h)("div",{class:"col-12"},Object(i.h)("h5",null,Object(i.h)("i",{class:"fas fa-thumbs-up text-success"})," ",Object(i.h)(a.c,{id:"users.garmin-connected"},"Connected to Garmin Connect!"))),Object(i.h)("div",{class:"col-12 mt-2"},Object(i.h)("div",{class:"display-1 text-success"},Object(i.h)("i",{class:"fas fa-check"})),Object(i.h)("small",{class:"text-muted"},Object(i.h)("small",null,Object(i.h)(a.c,{id:"users.garmin-reconnect-help"},"Hvis du opplever problemer med integrasjoen så kan du prøve å koble til på nytt"),":",Object(i.h)("br",null),Object(i.h)("a",{href:g+"/api/garmin/request-access?token="+f,native:!0,target:"_blank",rel:"noreferrer"},Object(i.h)(a.c,{id:"users.garmin-reconnect"},"Reconnect to Garmin Connect")))))):Object(i.h)(t,null,Object(i.h)("div",{class:"col-12 mt-2"},Object(i.h)("a",{class:"btn btn-primary",href:g+"/api/garmin/request-access?token="+f,native:!0,target:"_blank",rel:"noreferrer"},Object(i.h)(a.c,{id:"users.garmin-connect"},"Connect to Garmin Connect"))))),Object(i.h)("div",{class:"row border-top mt-5 pt-5"},Object(i.h)("div",{class:"col-12 text-center"},Object(i.h)("a",{href:"/logout",class:"btn btn-block btn-lg btn-warning"},Object(i.h)("i",{class:"fas fa-sign-out-alt"})," ",Object(i.h)(a.c,{id:"header.logout"},"Logg ut")))))},s}(i.Component))||c;e.default=d}.call(this,s("hosL").Fragment)}}]);
//# sourceMappingURL=route-users.chunk.2604c.js.map