{"version":3,"sources":["webpack:///./routes/app-races/index.js"],"names":["MARGIN_TOP","mu","marginTop","MARGIN_TOP_BACK","marginTopBack","MARGIN_BOTTOM","marginBottom","initialState","subMenuMarginTop","isLoading","showAdminSendMessage","newRaceArticle","newRaceUserImage","message","subject","body","AppRaceDetailSignup","observer","Component","constructor","props","super","likeRace","async","raceStore","stores","race","id","toggleAddComment","e","raceId","target","parentElement","dataset","showAddComment","this","state","setState","inputRef","focus","chooseSubmenu","submenu","menu","raceid","route","resizeTextarea","el","element","scrollHeight","style","height","resizeAllTextareas","textareaList","document","getElementsByTagName","i","l","length","addNavigation","back","updateTimer","userStore","user","load","signup","classes","email","currentClass","contestants","idx","findIndex","class","updateKeyValue","getDogs","allTeamIds","filter","map","musher","team","flat","loadTeams","join","getAllClassesSortedBy","loadPublicInteractions","componentDidMount","loadRace","componentWillReceiveProps","nextProps","render","appState","teams","isAdmin","language","likes","comments","hasLikedRace","today","Date","status","startDate","endDate","signupStartDate","signupEndDate","isLiveRace","liveRace","showSignup","onClick","data-menu","images","src","s3LargeLink","href","title","util","formatDate","locale","hour12","hour","minute","horizontal","vertical","rules","veterinaryInfo","checkpoints","trailDescription","program","prices","markdown","replaceImages","ingress","markdownOpts","getMarkdownOptions","tag","split","rel","native","indexOf","type","data-id","c","inputRefObject","cols"],"mappings":"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","file":"route-app-races.chunk.5a637.esm.js","sourcesContent":["import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport { Text, Localizer } from 'preact-i18n';\nimport { route } from 'preact-router';\nimport Markdown from 'preact-markdown';\nimport linkstate from 'linkstate';\n\nimport RaceComments from '../public/race/comments';\nimport RaceAddComment from '../public/race/commentAdd';\nimport RaceText from '../public/race/raceText';\nimport Images from '../../components/form/images';\nimport LikesAndComments from '../../components/feedback/likesAndComments';\n\nimport ScrollIntoView from '../../components/util/scrollIntoView';\n\nimport RaceResults from './results';\nimport RaceNews from './news';\nimport RaceSignup from './signup';\nimport RaceClasses from './classes';\nimport RaceMushers from './mushers';\nimport RaceUserImages from './userImages';\nimport RaceTracking from './tracking';\nimport RaceNotifications from './notifications';\n\nimport mu from '../../lib/musher-util';\nconst MARGIN_TOP = mu.marginTop(false);\nconst MARGIN_TOP_BACK = mu.marginTopBack(false);\nconst MARGIN_BOTTOM = mu.marginBottom();\nconst SUB_MENU_MARGIN_TOP = mu.subMenuMarginTop();\n\nconst initialState = {\n\tisLoading: false,\n    showAdminSendMessage: {},\n\tnewRaceArticle: {},\n\tnewRaceUserImage: {},\n\tmessage: {\n\t\tsubject: '',\n\t\tbody: '',\n\t},\n};\n\n@observer\nclass AppRaceDetailSignup extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            ...initialState,\n            showAdminSendMessage: {},\n            newRaceArticle: {},\n            newRaceUserImage: {},\n            message: {\n                subject: '',\n                body: '',\n            },\n            submenu: props.submenu || 'about',\n        };\n\t\tthis.inputRef = {};\n        this.updateTimer = {};\n    }\n\n\tasync loadRace(props = this.props) {\n\t\tthis.setState({ isLoading: true });\n\t\tconst { raceStore, userStore } = props.stores;\n\t\tconst { user = {} } = userStore;\n\t\tconst { raceid } = props;\n\t\tawait raceStore.load(raceid);\n\t\tthis.setState({ isLoading: false });\n\n\t\tlet signup = {};\n\t\tconst { race } = raceStore;\n\t\tif (race.classes && user && user.email) {\n\t\t\tfor (let i = 0, l = race.classes.length; i < l; i += 1) {\n\t\t\t\tconst currentClass = race.classes[i];\n\t\t\t\tif (currentClass.contestants) {\n\t\t\t\t\tconst idx = currentClass.contestants.findIndex(e => e.email === user.email);\n\t\t\t\t\tif (idx > -1) {\n\t\t\t\t\t\tsignup = { ...currentClass.contestants[idx], class: currentClass.id };\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\traceStore.updateKeyValue('signup', signup);\n        if (signup.user) {\n            await userStore.getDogs({ id: signup.user });\n        }\n\n\t\tconst allTeamIds = race.classes.filter(currentClass => currentClass.contestants && currentClass.contestants.length > 0).map((currentClass) => {\n            return currentClass.contestants.filter(musher => musher.team > 0).map(musher => musher.team);\n\t\t}).flat();\n\t\tif (allTeamIds.length > 0 && raceid) {\n\t\t\tawait raceStore.loadTeams(allTeamIds.join(','));\n\t\t}\n\t\traceStore.getAllClassesSortedBy();\n\n\t\tawait raceStore.loadPublicInteractions(raceid);\n\t}\n\n    likeRace = async () => {\n\t\tconst { raceStore } = this.props.stores;\n\t\tconst { race } = raceStore;\n\t\tconst response = await raceStore.likeRace({ id: race.id });\n\n        if (response && response.status === 200) {\n\t\t\t// this.loadRaceDetail({ race });\n\t\t}\n\t}\n\n\ttoggleAddComment = (e) => {\n\t\tconst raceId = e.target.parentElement.dataset.id || e.target.dataset.id;\n\t\tconst { showAddComment } = this.state;\n\t\tthis.setState({\n\t\t\tshowAddComment: !showAddComment,\n\t\t}, () => {\n\t\t\tif (this.inputRef[raceId]) {\n\t\t\t\tthis.inputRef[raceId].focus();\n\t\t\t}\n\t\t});\n\t}\n\n\tchooseSubmenu = (e) => {\n\t\tconst submenu = e.target.parentElement.dataset.menu || e.target.dataset.menu;\n\t\tthis.setState({ submenu });\n        const { raceid } = this.props;\n        route(`/app-races/${raceid}/${submenu}`);\n\t}\n\n    resizeTextarea = (el) => {\n\t\tlet element = el;\n\t\tif (element.target) {\n\t\t\telement = el.target;\n\t\t}\n\t\tconst { scrollHeight } = element;\n\t\telement.style.height = `${scrollHeight}px`;\n\t}\n\n\tresizeAllTextareas = () => {\n\t\tconst textareaList = document.getElementsByTagName('textarea');\n\t\tfor(let i = 0, l = textareaList.length; i < l; i += 1){\n\t\t\tconst textarea = textareaList[i];\n\t\t\tthis.resizeTextarea(textarea);\n\t\t}\n\t}\n\n    addNavigation = (props) => {\n        // console.log({ props });\n        this.setState({ submenu: props.submenu });\n    }\n\n\tcomponentDidMount() {\n\t\tthis.loadRace();\n        this.resizeAllTextareas();\n\t}\n\n    componentWillReceiveProps(nextProps) {\n        if (nextProps.raceid !== this.props.raceid) {\n            this.loadRace(nextProps);\n        }\n        // console.log('componentWillReceiveProps', nextProps.submenu, this.props.submenu);\n        if (nextProps.submenu !== this.props.submenu) {\n            this.addNavigation(nextProps);\n        }\n\t}\n\n    back = () => {\n        route(`/`);\n    }\n\n\trender() {\n        const { submenu } = this.state;\n        const { showAdminSendMessage, message, emailResponse } = this.state;\n        const { showAddComment, newRaceArticle, newRaceUserImage } = this.state;\n\n\t\tconst { userStore, raceStore, appState } = this.props.stores;\n\t\tconst { user = {}, teams = [], isAdmin } = userStore;\n        const { language = 'en' } = user;\n\n\t\tconst { raceid, subsection } = this.props;\n\t\tconst { race, signup, zoomToMarkers } = raceStore;\n        const { darkmode, displayDetails, editUserDetails } = appState;\n\n\t\tconst { likes = [], comments = [] } = race;\n\t\tconst hasLikedRace = race.likes && race.likes.findIndex(e => e.user === user.id) > -1;\n\n        const today = new Date();\n        let status = '';\n        if (today >= new Date(race.startDate) && today <= new Date(race.endDate)) {\n            status = 'race';\n        } else if (today >= new Date(race.signupStartDate) && today <= new Date(race.signupEndDate)) {\n            status = 'signup';\n        }\n        const isLiveRace = race.liveRace === 1;\n        const showSignup = isLiveRace ? !!signup.email : true;\n\n        if (submenu === 'tracking') {\n            return (\n                <RaceTracking stores={this.props.stores} raceid={raceid} />\n            );\n        }\n\n\t\treturn (\n\t\t\t<div class='container-fluid' style={`margin-bottom: ${MARGIN_BOTTOM}; margin-top: ${MARGIN_TOP};`}>\n                <button class='btn btn-link pl-0 fixed-top text-primary'\n                    style={`top: ${MARGIN_TOP_BACK}; left: 5px; font-size: 35px; width: 45px;`}\n                    onClick={this.back}>\n                    <i class='fas fa-arrow-circle-left' />\n                </button>\n\n                <div class='row m-0'>\n\t\t\t\t\t<div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-1 mb-2 p-0'>\n                        <div class='row d-flex align-items-center position-relative'>\n                            <h3 class='position-absolute' style='top: 3px; right: 5px;'>\n                                {status === 'signup' && !isLiveRace && <>\n                                    <span\n                                        class='badge badge-primary badge-lg border border-white ml-2'\n                                        data-menu='signup'\n                                        onClick={this.chooseSubmenu}\n                                    >\n                                        <Text id='races.signup-open'>Påmelding åpen</Text>\n                                    </span>\n                                </>}\n                                {status === 'race' && <>\n                                    <span class='badge badge-danger border border-white ml-2'><Text id='races.race-in-progress'>Løp pågår</Text></span>\n                                </>}\n                                {status === 'done' && <>\n                                    <span class='badge badge-success border border-white ml-2'><Text id='races.race-finished'>Løp avsluttet</Text></span>\n                                </>}\n                            </h3>\n                            {(race.images && race.images[0]) ? <img src={race.images[0].s3LargeLink} class='img-fluid' /> : ''}\n                        </div>\n                    </div>\n                </div>\n\n                <div class='row'>\n                    <div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3'>\n                        {isAdmin && <>\n                            <a class='btn btn-primary float-right' href={`https://homerunrace.no/index#/race/${race.id}/edit`}>Edit</a>\n                        </>}\n                        <h3>{race.title}</h3>\n                        <div>\n                            {race.startDate && <><Text id='races.periode'>Periode</Text>: {util.formatDate(race.startDate, { locale: 'no-NB', hour12: false, hour: '2-digit', minute: '2-digit' })}</>}\n                            {race.endDate && <> - {util.formatDate(race.endDate, { locale: 'no-NB', hour12: false, hour: '2-digit', minute: '2-digit' })}</>}\n                        </div>\n                    </div>\n                </div>\n\n                <div class='row'>\n                    <div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3'>\n                        <div class='row'>\n                            <div class='w-100 overflow-hidden'>\n                                <div\n                                    class='d-flex flex-row flex-nowrap pb-2 px-1'\n                                    style='overflow: auto; scroll-snap-type: x mandatory;'\n                                >\n                                    <div class='col px-0 pt-2'>\n                                        <button\n                                            class={`btn btn-block rounded-pill-left rounded-none ${submenu === 'about' ? 'btn-primary' : 'btn-outline-primary'} text-nowrap`}\n                                            style='text-overflow: ellipsis; overflow: hidden;'\n                                            data-menu='about'\n                                            onClick={this.chooseSubmenu}\n                                        ><i class='fas fa-info-circle' /> <Text id='race.about'>About</Text></button>\n                                        {submenu === 'about' && <ScrollIntoView horizontal={'center'} vertical={'end'} />}\n                                    </div>\n                                    <div class='col px-0 pt-2'>\n                                        <button\n                                            class={`btn btn-block rounded-none ${submenu === 'results' ? 'btn-primary' : 'btn-outline-primary'} text-nowrap`}\n                                            style='text-overflow: ellipsis; overflow: hidden;'\n                                            data-menu='results'\n                                            onClick={this.chooseSubmenu}\n                                        ><i class='fas fa-list-ol' /> <Text id='race.results'>Results</Text></button>\n                                        {submenu === 'results' && <ScrollIntoView horizontal={'center'} vertical={'end'} />}\n                                    </div>\n                                    <div class='col px-0 pt-2'>\n                                        <button\n                                            class={`btn btn-block rounded-none ${submenu === 'tracking' ? 'btn-primary' : 'btn-outline-primary'} text-nowrap`}\n                                            style='text-overflow: ellipsis; overflow: hidden;'\n                                            data-menu='tracking'\n                                            onClick={this.chooseSubmenu}\n                                        ><i class='fas fa-map-marker-alt' /> <Text id='race.tracking'>Tracking</Text></button>\n                                        {submenu === 'tracking' && <ScrollIntoView horizontal={'center'} vertical={'end'} />}\n                                    </div>\n                                    <div class='col px-0 pt-2'>\n                                        <button\n                                            class={`btn btn-block rounded-none ${submenu === 'news' ? 'btn-primary' : 'btn-outline-primary'} text-nowrap`}\n                                            style='text-overflow: ellipsis; overflow: hidden;'\n                                            data-menu='news'\n                                            onClick={this.chooseSubmenu}\n                                        ><i class='fas fa-rss' /> <Text id='race.news'>News</Text></button>\n                                        {submenu === 'news' && <ScrollIntoView horizontal={'center'} vertical={'end'} />}\n                                    </div>\n                                    <div class='col px-0 pt-2'>\n                                        <button\n                                            class={`btn btn-block rounded-none ${submenu === 'userImages' ? 'btn-primary' : 'btn-outline-primary'} text-nowrap`}\n                                            style='text-overflow: ellipsis; overflow: hidden;'\n                                            data-menu='userImages'\n                                            onClick={this.chooseSubmenu}\n                                        ><i class='fas fa-images' /> <Text id='race.user-images'>User images</Text></button>\n                                        {submenu === 'userImages' && <ScrollIntoView horizontal={'center'} vertical={'end'} />}\n                                    </div>\n                                    {race.rules && <div class='col px-0 pt-2'>\n                                        <button\n                                            class={`btn btn-block rounded-none ${submenu === 'rules' ? 'btn-primary' : 'btn-outline-primary'} text-nowrap`}\n                                            style='text-overflow: ellipsis; overflow: hidden;'\n                                            data-menu='rules'\n                                            onClick={this.chooseSubmenu}\n                                        ><i class='fas fa-gavel' /> <Text id='race.rules'>Rules</Text></button>\n                                        {submenu === 'rules' && <ScrollIntoView horizontal={'center'} vertical={'end'} />}\n                                    </div>}\n                                    {race.veterinaryInfo && <div class='col px-0 pt-2'>\n                                        <button\n                                            class={`btn btn-block rounded-none ${submenu === 'veterinary' ? 'btn-primary' : 'btn-outline-primary'} text-nowrap`}\n                                            style='text-overflow: ellipsis; overflow: hidden;'\n                                            data-menu='veterinary'\n                                            onClick={this.chooseSubmenu}\n                                        ><i class='fas fa-stethoscope' /> <Text id='race.veterinary'>Veterinary info</Text></button>\n                                        {submenu === 'veterinary' && <ScrollIntoView horizontal={'center'} vertical={'end'} />}\n                                    </div>}\n                                    {race.checkpoints && <div class='col px-0 pt-2'>\n                                        <button\n                                            class={`btn btn-block rounded-none ${submenu === 'checkpoints' ? 'btn-primary' : 'btn-outline-primary'} text-nowrap`}\n                                            style='text-overflow: ellipsis; overflow: hidden;'\n                                            data-menu='checkpoints'\n                                            onClick={this.chooseSubmenu}\n                                        ><i class='fas fa-map-marker-alt' /> <Text id='race.checkpoints'>Checkpoints</Text></button>\n                                        {submenu === 'checkpoints' && <ScrollIntoView horizontal={'center'} vertical={'end'} />}\n                                    </div>}\n                                    {race.trailDescription && <div class='col px-0 pt-2'>\n                                        <button\n                                            class={`btn btn-block rounded-none ${submenu === 'track' ? 'btn-primary' : 'btn-outline-primary'} text-nowrap`}\n                                            style='text-overflow: ellipsis; overflow: hidden;'\n                                            data-menu='track'\n                                            onClick={this.chooseSubmenu}\n                                        ><i class='fas fa-map-signs' /> <Text id='race.track-description'>Track description</Text></button>\n                                        {submenu === 'track' && <ScrollIntoView horizontal={'center'} vertical={'end'} />}\n                                    </div>}\n                                    {race.program && <div class='col px-0 pt-2'>\n                                        <button\n                                            class={`btn btn-block rounded-none ${submenu === 'program' ? 'btn-primary' : 'btn-outline-primary'} text-nowrap`}\n                                            style='text-overflow: ellipsis; overflow: hidden;'\n                                            data-menu='program'\n                                            onClick={this.chooseSubmenu}\n                                        ><i class='fas fa-list-alt' /> <Text id='race.program'>Program</Text></button>\n                                        {submenu === 'program' && <ScrollIntoView horizontal={'center'} vertical={'end'} />}\n                                    </div>}\n                                    {race.prices && <div class='col px-0 pt-2'>\n                                        <button\n                                            class={`btn btn-block rounded-none ${submenu === 'prices' ? 'btn-primary' : 'btn-outline-primary'} text-nowrap`}\n                                            style='text-overflow: ellipsis; overflow: hidden;'\n                                            data-menu='prices'\n                                            onClick={this.chooseSubmenu}\n                                        ><i class='fas fa-award' /> <Text id='race.prices'>Premier</Text></button>\n                                        {submenu === 'prices' && <ScrollIntoView horizontal={'center'} vertical={'end'} />}\n                                    </div>}\n                                    {!isLiveRace && <div class='col px-0 pt-2'>\n                                        <button\n                                            class={`btn btn-block rounded-none ${submenu === 'classes' ? 'btn-primary' : 'btn-outline-primary'} text-nowrap`}\n                                            style='text-overflow: ellipsis; overflow: hidden;'\n                                            data-menu='classes'\n                                            onClick={this.chooseSubmenu}\n                                        ><i class='fas fa-folder-open' /> <Text id='race.classes'>Classes</Text></button>\n                                        {submenu === 'classes' && <ScrollIntoView horizontal={'center'} vertical={'end'} />}\n                                    </div>}\n                                    <div class='col px-0 pt-2'>\n                                        <button\n                                            class={`btn btn-block rounded-none ${showSignup ? '' : 'rounded-pill-right'} ${submenu === 'mushers' ? 'btn-primary' : 'btn-outline-primary'} text-nowrap`}\n                                            style='text-overflow: ellipsis; overflow: hidden;'\n                                            data-menu='mushers'\n                                            onClick={this.chooseSubmenu}\n                                        ><i class='fas fa-users' /> <Text id='races.mushers'>Mushers</Text></button>\n                                        {submenu === 'mushers' && <ScrollIntoView horizontal={'center'} vertical={'end'} />}\n                                    </div>\n                                    {showSignup && <div class='col px-0 pt-2'>\n                                        <button\n                                            class={`btn btn-block rounded-pill-right rounded-none ${submenu === 'signup' ? 'btn-primary' : 'btn-outline-primary'} text-nowrap`}\n                                            style='text-overflow: ellipsis; overflow: hidden;'\n                                            data-menu='signup'\n                                            onClick={this.chooseSubmenu}\n                                        ><i class='fas fa-user-edit' /> <Text id='race.signup'>Sign up</Text></button>\n                                        {submenu === 'signup' && <ScrollIntoView horizontal={'center'} vertical={'end'} />}\n                                    </div>}\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n\n                {submenu === 'about' && <>\n                    <RaceNotifications stores={this.props.stores} race={race} />\n                    <div class='row'>\n                        <div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-0 mb-2'>\n                            <h2 class='mb-0'><Text id='race.about'>Om løpet</Text></h2>\n                        </div>\n                        <div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-3 mb-2'>\n                            <p class='clearfix'>\n                                <strong>\n                                    <Markdown markdown={mu.replaceImages(race.ingress, race.images, language)} markdownOpts={mu.getMarkdownOptions()} />\n                                </strong>\n                            </p>\n\n                            {status === 'signup' && <>\n                                {isLiveRace ? <>                                \n                                    <button\n                                        class='btn btn-block btn-success mb-3'\n                                        data-menu='signup'\n                                        onClick={this.chooseSubmenu}\n                                    >\n                                        <i class='fas fa-user-edit' /> <Text id='race.declaration'>Declaration</Text> & <Text id='race.chiplist'>Chiplist</Text>\n                                    </button>\n                                </> : <>                                \n                                    <button\n                                        class='btn btn-block btn-success mb-3'\n                                        data-menu='signup'\n                                        onClick={this.chooseSubmenu}\n                                    >\n                                        <i class='fas fa-user-edit' /> <Text id='race.signup'>Sign up</Text>\n                                    </button>\n                                </>}\n                            </>}\n\n                            <Markdown markdown={mu.replaceImages(race.body, race.images, language)} markdownOpts={mu.getMarkdownOptions()} />\n                        </div>\n                        <div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-3 mb-2'>\n                            {race.tag && race.tag.split(',').map(tag => <>\n                                <span class='badge badge-pill badge-primary py-1 ml-2'>\n                                    <a class='text-white' href={`https://www.facebook.com/hashtag/${tag}`} target='_blank' rel='noreferrer' native>\n                                        <i class='fab fa-facebook' /> #{tag}\n                                    </a>\n                                </span>\n                                <span class='badge badge-pill badge-primary py-1 ml-2'>\n                                    <a class='text-white' href={`https://www.instagram.com/explore/tags/${tag}`} target='_blank' rel='noreferrer' native>\n                                        <i class='fab fa-instagram' /> #{tag}\n                                    </a>\n                                </span>\n                            </>)}\n                        </div>\n                    </div>\n                </>}\n                {submenu === 'results' && <>\n                    <RaceNotifications stores={this.props.stores} race={race} />\n                    <RaceResults stores={this.props.stores} raceid={raceid} />\n                </>}\n                {submenu === 'tracking' && <>\n                    <RaceTracking stores={this.props.stores} raceid={raceid} />\n                </>}\n                {submenu === 'news' && <>\n                    <RaceNews stores={this.props.stores} race={race} />\n                </>}\n                {submenu === 'userImages' && <>\n                    <RaceUserImages stores={this.props.stores} race={race} />\n                </>}\n                {submenu === 'rules' && <>\n                    <div class='row'>\n                        <div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-0 mb-2'>\n                            <h2 class='mb-0'><Text id='race.rules'>Regler</Text></h2>\n                        </div>\n                        <div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-3 mb-2'>\n                            <Markdown markdown={mu.replaceImages(race.rules, race.images, language)} markdownOpts={mu.getMarkdownOptions()} />\n                        </div>\n                    </div>\n                </>}\n                {submenu === 'veterinary' && <>\n                    <div class='row'>\n                        <div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-0 mb-2'>\n                            <h2 class='mb-0'><Text id='race.veterinary'>Veterinærinfo</Text></h2>\n                        </div>\n                        <div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-3 mb-2'>\n                            <Markdown markdown={mu.replaceImages(race.veterinaryInfo, race.images, language)} markdownOpts={mu.getMarkdownOptions()} />\n                        </div>\n                    </div>\n                </>}\n                {submenu === 'checkpoints' && <>\n                    <div class='row'>\n                        <div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-0 mb-2'>\n                            <h2 class='mb-0'><Text id='race.checkpoints'>Sjekkpunkter</Text></h2>\n                        </div>\n                        <div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-3 mb-2'>\n                            <Markdown markdown={mu.replaceImages(race.checkpoints, race.images, language)} markdownOpts={mu.getMarkdownOptions()} />\n                        </div>\n                    </div>\n                </>}\n                {submenu === 'track' && <>\n                    <div class='row'>\n                        <div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-0 mb-2'>\n                            <h2 class='mb-0'><Text id='race.track-description'>Løypebeskrivelse</Text></h2>\n                        </div>\n                        <div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-3 mb-2'>\n                            <Markdown markdown={mu.replaceImages(race.trailDescription, race.images, language)} markdownOpts={mu.getMarkdownOptions()} />\n                        </div>\n                    </div>\n                </>}\n                {submenu === 'program' && <>\n                    <div class='row'>\n                        <div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-0 mb-2'>\n                            <h2 class='mb-0'><Text id='race.program'>Program</Text></h2>\n                        </div>\n                        <div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-3 mb-2'>\n                            <Markdown markdown={mu.replaceImages(race.program, race.images, language)} markdownOpts={mu.getMarkdownOptions()} />\n                        </div>\n                    </div>\n                </>}\n                {submenu === 'prices' && <>\n                    <div class='row'>\n                        <div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-0 mb-2'>\n                            <h2 class='mb-0'><Text id='race.prices'>Premier</Text></h2>\n                        </div>\n                        <div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-3 mb-2'>\n                            <Markdown markdown={mu.replaceImages(race.prices, race.images, language)} markdownOpts={mu.getMarkdownOptions()} />\n                        </div>\n                    </div>\n                </>}\n                {submenu === 'mushers' && <>\n                    <RaceMushers stores={this.props.stores} race={race} />\n                </>}\n                {submenu === 'classes' && <>\n                    <RaceClasses stores={this.props.stores} race={race} />\n                </>}\n                {submenu === 'signup' && <>\n                    <RaceSignup stores={this.props.stores} race={race} />\n                </>}\n\n                {['about'].indexOf(submenu) > -1 && <>\n                    <div class='row'>\n                        <div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-0 mb-2'>\n                            <div class=''>\n                                <LikesAndComments\n                                    stores={this.props.stores}\n                                    likes={likes}\n                                    comments={comments}\n                                    type='race'\n                                    // onTeamClick={onTeamClick}\n                                    // onUserClick={onUserClick}\n                                />\n                            </div>\n                        </div>\n\n                        <div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-2 mb-3'>\n                            <div class='row'>\n                                <div class='col-6 text-center'>\n                                    <button type='button' class={`btn btn-outline-${hasLikedRace ? 'primary' : 'secondary'} btn-lg btn-block ${hasLikedRace ? 'text-primary' : ''}`}\n                                        onClick={this.likeRace}\n                                        // disabled={hasLikedRace}\n                                    >\n                                        <i class={`${hasLikedRace ? 'text-primary fas' : 'far'} fa-thumbs-up`} /> {hasLikedRace ? <Text id='comments.has-liked'>Liked</Text> : <Text id='comments.like'>Lik</Text>}\n                                    </button>\n                                </div>\n                                <div class='col-6 text-center'>\n                                    <button type='button' class='btn btn-outline-secondary btn-lg btn-block'\n                                        data-id={race.id}\n                                        onClick={this.toggleAddComment}\n                                    >\n                                        <i class='fas fa-comment' /> <Text id='comments.comment-add'>Comment</Text>\n                                    </button>\n                                </div>\n                            </div>\n                        </div>\n                        <div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-2 mb-3'>\n                            {showAddComment && user.email && <RaceAddComment\n                                stores={this.props.stores}\n                                race={race}\n                                // callback={this.loadRaceDetail}\n                                inputRef={c => this.inputRef[race.id] = c}\n                                inputRefObject={this.inputRef}\n                            />}\n                        </div>\n                        <div class='col-12 mt-2'>\n                            <RaceComments\n                                stores={this.props.stores}\n                                race={race}\n                                cols='12'\n                                // callback={this.loadRaceDetail}\n                            />\n                        </div>\n                    </div>\n                </>}\n            </div>\n\t\t);\n\t}\n}\n\nexport default AppRaceDetailSignup;\n"],"sourceRoot":""}