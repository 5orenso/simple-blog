(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{"1OK2":function(t,e,s){"use strict";var a,o=s("hosL"),i=(s("Utv1"),s("/eY4"));Object(i.a)(a=class extends o.Component{constructor(t){super(t),this.touchStart=t=>{t.stopPropagation(),this.setState({startX:t.touches[0].pageX})},this.touchEnd=t=>{t.stopPropagation(),this.setState({startX:void 0,sliding:!1})},this.touchMove=t=>{t.stopPropagation();const{totalImages:e}=this.state;if(e>1){const{startX:e,sliding:s}=this.state,a=50,o=t.touches[0].pageX;s||(o>e+a?(this.setState({sliding:!0}),this.prevImage()):o<e-a&&(this.setState({sliding:!0}),this.nextImage()))}};const{images:e=[]}=t;this.state={imageContainer:1,currentImage1:e[0]||{},currentImage2:{},currentIdx:0,totalImages:e.length||0,imageDots:[...Array(e.length||0).fill(1).map((t,e)=>t+e)]}}nextImage(){const{images:t}=this.props,{totalImages:e,currentIdx:s,imageContainer:a}=this.state,o=1===a?2:1;let i=s+1;i>e-1&&(i=0),this.setState({["currentImage"+o]:t[i],currentIdx:i,imageContainer:o})}prevImage(){const{images:t}=this.props,{totalImages:e,currentIdx:s,imageContainer:a}=this.state;let o=s-1;o<0&&(o=e-1),this.setState({["currentImage"+(1===a?2:1)]:t[o],currentIdx:o,imageContainer:1===a?2:1})}componentWillReceiveProps(t){if(t.images!==this.props.images){const{images:e=[]}=t;this.setState({imageContainer:1,currentImage1:e.length>0?e[0]:{},currentImage2:{},currentIdx:0,totalImages:e.length||0,imageDots:[...Array(e.length||0).fill(1).map((t,e)=>t+e)]})}}render(){const{currentImage1:t,currentImage2:e,imageContainer:s,totalImages:a,imageDots:i,currentIdx:l}=this.state,n=this["image"+s],c=1===s?t:e,r=n&&n.height?n.width/n.height:4/3;let d,h;if(c.dimensions){const{width:t,height:e,orientation:s}=c.dimensions;s>4&&s<9?(d=t,h=e):(d=e,h=t)}const m=c.dimensions?h/d:r;return a<=0?"":Object(o.h)("div",{class:"w-100"},Object(o.h)("div",{class:"border rounded position-relative w-100",style:`height: calc(85vw / ${m}); overflow: hidden; transition: all .3s ease-in-out;`,onTouchstart:this.touchStart,onTouchend:this.touchEnd,onTouchmove:this.touchMove},a>1&&Object(o.h)("span",{class:"position-absolute",style:"top:0px; right: 5px; z-index: 2000;"},Object(o.h)("small",null,l+1,"/",a)),t&&Object(o.h)("div",{class:"position-absolute",style:(1===s?"opacity: 1;":"opacity: 0;")+" transition: all .3s ease-in-out; top: 0; left: 0;"},Object(o.h)("img",{loading:"lazy",src:t.s3LargeLink,class:"img-fluid align-middle",ref:t=>this.image1=t})),e&&Object(o.h)("div",{class:"position-absolute",style:(2===s?"opacity: 1;":"opacity: 0;")+" transition: all .3s ease-in-out; top: 0; left: 0;"},Object(o.h)("img",{loading:"lazy",src:e.s3LargeLink,class:"img-fluid align-middle",ref:t=>this.image2=t}))),i.length>1&&Object(o.h)("div",{class:"w-100 text-center"},i.map(t=>Object(o.h)("span",{style:`color: ${t===l+1?"#ffffff":"#808080"};`},"•"))))}})},"4QWe":function(t,e,s){"use strict";(function(t){var a,o=s("hosL"),i=s("Utv1"),l=s("/eY4"),n=s("OhSV"),c=s("go65"),r=s("om2D"),d=s("ZOvn");let h=Object(l.a)(a=class extends o.Component{constructor(t){var e;super(t),e=this,this.beforeImagesUploaded=()=>{this.setState({sendButtonEnabled:!1})},this.afterImagesUploaded=()=>{this.setState({sendButtonEnabled:!0})},this.commentStory=async function(){const{sendButtonEnabled:t}=e.state;if(!t)return!1;const{callback:s=(()=>{}),inputRefObject:a={}}=e.props,{story:o}=e.props,{storyStore:i}=e.props.stores,{comment:l,showAddImage:n}=e.state;e.setState({sendButtonEnabled:!1});const c=await i.commentStory({id:o.id,comment:l});c&&200===c.status&&(e.setState({comment:{body:"",images:[]}},()=>{d.a.resizeTextarea(a[o.id]),n&&e.addImage()}),s({story:o,response:c})),e.setState({sendButtonEnabled:!0})},this.addImages=({value:t})=>{const{comment:e}=this.state;e.images.push(...t),this.setState({comment:e})},this.addImage=()=>{const{showAddImage:t=!1}=this.state;this.setState({showAddImage:!t})},this.handleImageErrored=t=>{const e=t.target;e.onerror=null,setTimeout(()=>{e.src+="?"+new Date},1e3)},this.state={comment:{body:"",images:[]},showAddImage:!1,sendButtonEnabled:!0},this.inputRef={}}render(){const{inputRef:e,story:s}=this.props,{comment:a,showAddImage:l,sendButtonEnabled:h}=this.state,{userStore:m}=this.props.stores,{user:b={}}=m,u=d.a.displayNameShort(b),p=(d.a.displayName(b),b.image||(b.images?b.images[0]:void 0));return Object(o.h)("div",null,Object(o.h)("div",{class:"d-flex mb-0 position-relative w-100"},Object(o.h)("div",{class:"text-center border rounded-circle imageRounded imageRoundedSmall",style:(p?`background-image: url('${p.s3SmallLink}'); background-size: cover;`:"")+" border-width: 3px !important;"},!b.image&&Object(o.h)("span",{class:"font-weight-lighter",style:"font-size: 15px;"},u)),Object(o.h)("div",{class:"col pl-3",style:"line-height: 1.2em;"},Object(o.h)("div",{class:"d-flex bd-highlight"},Object(o.h)("div",{class:"p-0 w-100 bd-highlight"},Object(o.h)("label",{class:"sr-only",for:"inlineFormInput"},Object(o.h)(n.c,{id:"comments.comment"},"Kommentar")),Object(o.h)("div",{class:"border rounded rounded-lg position-relative"},Object(o.h)(n.b,null,Object(o.h)("textarea",{class:"form-control-plaintext px-2",type:"text",placeholder:Object(o.h)(n.c,{id:"comments.write-comment"},"Skriv en kommentar..."),onInput:Object(c.a)(this,"comment.body"),onKeyUp:d.a.resizeTextarea,onFocus:d.a.resizeTextarea,style:"height: 2.3em;",value:a.body,ref:e})),Object(o.h)("div",{class:"position-absolute",style:"top: 8px; right: 10px; font-size: 1.2em;"},Object(o.h)("i",{class:"fas fa-image pointerCursor","data-id":s.id,onClick:this.addImage})))),Object(o.h)("div",{class:"p-0 pl-2 flex-shrink-1 bd-highlight"},Object(o.h)("button",{type:"button",class:`btn btn-${h?"primary":"secondary"} mb-2`,disabled:!h,onClick:this.commentStory},Object(o.h)("i",{class:"fas fa-paper-plane"})))))),l&&Object(o.h)(t,null,Object(o.h)("div",{class:"col-12 text-center"},Object(o.h)("div",{class:"container-fluid"},Object(o.h)("div",{class:"row"},i.a.isArray(a.images)&&a.images.map(t=>Object(o.h)("div",{class:"col-3 p-1"},Object(o.h)("img",{src:t.s3SmallLink,class:"img-fluid",onError:this.handleImageErrored}),Object(o.h)("button",{class:"btn btn-sm btn-link",onClick:this.removeImage,"data-name":t.name},Object(o.h)("i",{class:"fas fa-trash"})," ",Object(o.h)(n.c,{id:"comments.remove-image"},"Remove")))))),Object(o.h)(r.a,{object:a,updateField:this.addImages,before:this.beforeImagesUploaded,after:this.afterImagesUploaded,autoOpen:!0}))))}})||a;e.a=h}).call(this,s("hosL").Fragment)},"5uob":function(t,e,s){"use strict";var a,o=s("hosL"),i=(s("Utv1"),s("/eY4")),l=s("OhSV"),n=s("go65"),c=(s("ETxl"),s("ZOvn"));let r=Object(i.a)(a=class extends o.Component{constructor(t){var e;super(t),e=this,this.commentStory=async function(){const{sendButtonEnabled:t}=e.state;if(!t)return!1;const{callback:s=(()=>{}),commentId:a,inputRefObject:o={}}=e.props,{story:i}=e.props,{storyStore:l}=e.props.stores,{comment:n=""}=e.state;e.setState({sendButtonEnabled:!1});const r=await l.commentReplyStory({id:i.id,commentId:a,comment:n});r&&200===r.status&&(e.setState({comment:""},()=>{c.a.resizeTextarea(o[a])}),s({story:i,response:r,commentId:a})),e.setState({sendButtonEnabled:!0})},this.state={sendButtonEnabled:!0},this.inputRef={}}componentDidMount(){const{initCall:t=(()=>{})}=this.props;t()}render(){const{inputRef:t}=this.props,{comment:e,sendButtonEnabled:s}=this.state,{userStore:a}=this.props.stores,{user:i={}}=a,r=c.a.displayNameShort(i),d=(c.a.displayName(i),i.image||(i.images?i.images[0]:void 0));return Object(o.h)("div",{class:"w-100"},Object(o.h)("div",{class:"d-flex mb-0 position-relative w-100"},Object(o.h)("div",{class:"text-center border rounded-circle imageRounded imageRoundedThumb",style:(d?`background-image: url('${d.s3SmallLink}'); background-size: cover;`:"")+" border-width: 3px !important;"},!d&&Object(o.h)("span",{class:"font-weight-lighter",style:"font-size: 15px;"},r)),Object(o.h)("div",{class:"col pl-3",style:"line-height: 1.2em;"},Object(o.h)("div",{class:"d-flex bd-highlight"},Object(o.h)("div",{class:"p-0 w-100 bd-highlight"},Object(o.h)("label",{class:"sr-only",for:"inlineFormInput"},Object(o.h)(l.c,{id:"comments.comment"},"Kommentar")),Object(o.h)("div",{class:"border rounded rounded-lg position-relative"},Object(o.h)(l.b,null,Object(o.h)("textarea",{class:"form-control-plaintext px-2",type:"text",placeholder:Object(o.h)(l.c,{id:"comments.write-comment"},"Skriv en kommentar..."),onInput:Object(n.a)(this,"comment"),onKeyUp:c.a.resizeTextarea,style:"height: 2.3em;",value:e,ref:t})))),Object(o.h)("div",{class:"p-0 pl-2 flex-shrink-1 bd-highlight"},Object(o.h)("button",{type:"button",class:`btn btn-${s?"primary":"secondary"} mb-2`,disabled:!s,onClick:this.commentStory},Object(o.h)("i",{class:"fas fa-paper-plane"})))))))}})||a;e.a=r},B95u:function(t,e,s){"use strict";(function(t){function a(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,a)}return s}function o(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?a(Object(s),!0).forEach((function(e){i(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):a(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}function i(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}var l,n=s("hosL"),c=s("Utv1"),r=s("/eY4"),d=s("cneo"),h=s("OhSV"),m=s("fh8t"),b=s.n(m),u=s("go65"),p=s("5uob"),g=(s("ETxl"),s("ZOvn"));const O={showAddComment:{},showAllComments:!1,showAllReplies:{},viewImageIdx:{},likeComment:{},likeReply:{},showOriginal:{}};let j=Object(r.a)(l=class extends n.Component{constructor(t){var e;super(t),e=this,this.addLikeComment=async function(t){const{callback:s=(()=>{})}=e.props,a=t.target.closest(".commentContainer").dataset.id,{story:o}=e.props,{storyStore:i}=e.props.stores,{likeComment:l}=e.state;l[a]=!0,e.setState({likeComment:l}),setTimeout(()=>{const{likeComment:t}=e.state;delete t[a],e.setState({likeComment:t})},1200);const n=await i.likeStoryComment({id:o.id,commentId:a});return n&&200===n.status&&s({type:"likeComment",story:o,commentId:a,response:n}),!0},this.likeReply=async function(t){const{callback:s=(()=>{})}=e.props,a=t.target.closest(".replyContainer").dataset.id,o=t.target.closest(".replyContainer").dataset.comment,{story:i}=e.props,{storyStore:l}=e.props.stores,{likeReply:n}=e.state;n[a]=!0,e.setState({likeReply:n}),setTimeout(()=>{const{likeReply:t}=e.state;delete t[a],e.setState({likeReply:t})},1200);const c=await l.likeStoryCommentReply({id:i.id,replyId:a,commentId:o});c&&200===c.status&&s({type:"likeReply",story:i,commentId:o,replyId:a,response:c})},this.replyComment=async function(t){const s=t.target.parentElement.dataset.id||t.target.dataset.id,{showAddComment:a}=e.state;a[s]=!a[s],e.setState({showAddComment:a},()=>{e.inputRef[s]&&e.inputRef[s].focus()})},this.toggleComments=()=>{const{showAllComments:t}=this.state;this.setState({showAllComments:!t})},this.toggleReplies=t=>{const e=t.target.parentElement.dataset.id||t.target.dataset.id,{showAllReplies:s}=this.state;s[e]=!s[e],this.setState({showAllReplies:s})},this.toggleMenu=t=>{const{id:e}=t.target.closest("i").dataset,{showMenu:s={}}=this.state;s[e]=!s[e],this.setState({showDeleteComment:{},showEdit:{},showMenu:s})},this.toggleEdit=t=>{const{id:e,comment:s}=t.target.closest("button").dataset,{showEdit:a={}}=this.state;a[e]=!a[e],this.setState({showDeleteComment:{},showEdit:a,showMenu:{},commentEditText:s})},this.toggleDeleteComment=t=>{const{id:e}=t.target.closest("button").dataset,{showDeleteComment:s={}}=this.state;s[e]=!s[e],this.setState({showDeleteComment:s,showEdit:{},showMenu:{}})},this.deleteComment=async function(t){const{id:s}=t.target.closest("button").dataset,{story:a}=e.props,{storyStore:o}=e.props.stores;await o.deleteCommentStory({id:a.id,commentId:s}),e.setState({commentEditText:"",showDeleteComment:{},showEdit:{},showMenu:{}})},this.deleteCommentReply=async function(t){const{id:s,commentid:a}=t.target.closest("button").dataset,{story:o}=e.props,{storyStore:i}=e.props.stores;await i.deleteCommentReplyStory({id:o.id,commentId:a,replyId:s}),e.setState({commentEditText:"",showDeleteComment:{},showEdit:{},showMenu:{}})},this.saveComment=async function(t){const{id:s}=t.target.closest("button").dataset,{commentEditText:a}=e.state,{story:o}=e.props,{storyStore:i}=e.props.stores;await i.editCommentStory({id:o.id,commentId:s,comment:a}),e.setState({commentEditText:"",showDeleteComment:{},showEdit:{},showMenu:{}})},this.saveCommentReply=async function(t){const{id:s,commentid:a}=t.target.closest("button").dataset,{commentEditText:o}=e.state,{story:i}=e.props,{storyStore:l}=e.props.stores;await l.editCommentReplyStory({id:i.id,commentId:a,replyId:s,comment:o}),e.setState({commentEditText:"",showDeleteComment:{},showEdit:{},showMenu:{}})},this.viewImage=t=>{const{id:e,idx:s}=t.target.closest("img").dataset,{viewImageIdx:a}=this.state;a[e]=s,this.setState({viewImageIdx:a})},this.translate=async function(t){t.preventDefault(),t.stopPropagation();const{replyid:s,commentid:a}=t.target.closest("button").dataset,{story:o}=e.props,{userStore:i,storyStore:l}=e.props.stores,{user:n}=i,{showOriginal:c={},translatedText:r={}}=e.state,d=`${a}${s?"-"+s:""}`;c[d]=0,r[d]=s?await l.translateCommentReply({commentid:a,replyid:s,story:o,user:n}):await l.translateComment({commentid:a,story:o,user:n}),e.setState({showOriginal:c,translatedText:r})},this.showOriginal=t=>{const{replyid:e,commentid:s}=t.target.closest("button").dataset;t.preventDefault(),t.stopPropagation();const{showOriginal:a={}}=this.state;a[`${s}${e?"-"+e:""}`]=1,this.setState({showOriginal:a})},this.displayTeam=(t,e)=>{t.preventDefault(),t.stopPropagation();const{appState:s}=this.props.stores;s.openDrawer("publicTeam",{teamId:e,height:"80vh"})},this.openInbox=(t,e)=>{t.preventDefault(),t.stopPropagation();const{appState:s}=this.props.stores;s.openDrawer("inboxDetail",{fromuser:e,height:"80vh"})},this.state=o(o({},O),{},{showAllComments:t.showAllComments}),this.inputRef={}}render(){const{showAddComment:e,showAllComments:s,showAllReplies:a,viewImageIdx:o,showMenu:i={},showEdit:l={},showDeleteComment:r={},commentEditText:m,likeComment:O,showOriginal:j={},translatedText:f={}}=this.state,{story:y,callback:v=(()=>{}),initCall:w=(()=>{}),compact:k=!1}=this.props,{userStore:x,storyStore:S}=this.props.stores,{user:C}=x,{language:I="en"}=C;let D,T=[],R=0,A=0;return y.comments&&(R=y.comments.length,s?T=y.comments:(D=k?0:2,T=y.comments.slice(Math.max(R-D,0))),A=T.length),Object(n.h)("div",null,y&&c.a.isArray(T)&&T.reverse().map(s=>{const{user:k={}}=s,x=S.findPublicTeamByMembers(k.id),T=g.a.displayNameShort(k),R=g.a.displayName(k),A=k.image||(k.images?k.images[0]:void 0),E=s.likes&&s.likes.findIndex(t=>t.user===C.id)>-1;let P=[],L=0,F=0;s.comments&&(L=s.comments.length,P=a[s.id]?s.comments:s.comments.slice(0,D),F=P.length);const M=[];if(s.images){const t=Object(d.i)(s.images);M.push(...t)}const z=o[s.id]?o[s.id]:0,U=M&&M[z]?M[z]:null,{currentLocationGeocode:B={}}=s,N=S.getCommentTranslations({story:y,commentid:s.id,targetLang:I})||f[s.id];let W=N||s.comment;return j[s.id]&&(W=s.comment),Object(n.h)("div",{class:"row"},Object(n.h)("div",{class:"col-11 offset-1 d-flex mb-2 position-relative"},Object(n.h)("div",{class:"text-center border rounded-circle imageRounded imageRoundedSmall",style:(A?`background-image: url("${A.s3SmallLink}"); background-size: cover;`:"")+" border-width: 3px !important;"},!k.image&&Object(n.h)("span",{class:"font-weight-lighter",style:"font-size: 15px;"},T)),Object(n.h)("div",{class:"flex-grow-1 pl-3 pt-0",style:"line-height: 1.2em;"},Object(n.h)("div",{class:"bg-light p-2 rounded rounded-lg position-relative"},C.id===k.id&&Object(n.h)(t,null,Object(n.h)("span",{class:"float-right font-weight-lighter text-muted"},Object(n.h)("i",{class:"fas fa-ellipsis-h",onClick:this.toggleMenu,"data-id":s.id}))),i[s.id]&&Object(n.h)(t,null,Object(n.h)("div",{class:"position-absolute bg-white p-2 border rounded rounded-lg shadow-sm",style:"top: 30px; right: 10px; width: 60%; z-index: 999999;"},Object(n.h)("button",{class:"btn btn-link btn-block text-left",onClick:this.toggleEdit,"data-id":s.id,"data-comment":s.comment},Object(n.h)("i",{class:"fas fa-edit"})," Edit"),Object(n.h)("hr",null),Object(n.h)("button",{class:"btn btn-link btn-block text-left",onClick:this.toggleDeleteComment,"data-id":s.id},Object(n.h)("i",{class:"fas fa-trash-alt"})," Delete"))),Object(n.h)("div",null,Object(n.h)("span",{style:"font-size: 0.95em;"},Object(n.h)("h5",{class:"font-weight-bold mb-2",style:"font-size: 1.0em;"},k.uuidv4&&k.uuidv4!==C.uuidv4?Object(n.h)(t,null,Object(n.h)("a",{href:"/inbox/"+k.uuidv4,onClick:t=>this.openInbox(t,k.uuidv4)},R)):Object(n.h)(t,null,R),x&&x.length>0&&Object(n.h)(t,null,Object(n.h)("span",{class:"font-weight-lighter text-muted ml-1"},x.filter(t=>1===t.public).slice(0,1).map(e=>Object(n.h)(t,null,"- ",Object(n.h)("a",{href:"/teams/public/"+e.uuidv4,onClick:t=>this.displayTeam(t,e.uuidv4)},e.name)))))),l[s.id]?Object(n.h)(t,null,Object(n.h)("div",{class:"d-flex bd-highlight"},Object(n.h)("div",{class:"p-0 w-100 bd-highlight"},Object(n.h)("label",{class:"sr-only",for:"inlineFormInput"},Object(n.h)(h.c,{id:"comments.comment"},"Kommentar")),Object(n.h)("div",{class:"border rounded rounded-lg position-relative"},Object(n.h)(h.b,null,Object(n.h)("textarea",{class:"form-control-plaintext px-2",type:"text",placeholder:Object(n.h)(h.c,{id:"comments.write-comment"},"Skriv en kommentar..."),onInput:Object(u.a)(this,"commentEditText"),onKeyUp:g.a.resizeTextarea,onFocus:g.a.resizeTextarea,style:"height: 2.3em;",value:m})))),Object(n.h)("div",{class:"p-0 pl-2 flex-shrink-1 bd-highlight"},Object(n.h)("button",{type:"button",class:"btn btn-primary mb-2",onClick:this.saveComment,"data-id":s.id},Object(n.h)("i",{class:"fas fa-paper-plane"}))))):Object(n.h)(t,null,Object(n.h)(b.a,{markdown:g.a.replaceImages(W,s.images,I),markdownOpts:g.a.getMarkdownOptions()})),r[s.id]&&Object(n.h)("div",{class:"clearfix mt-3 mb-3"},Object(n.h)("button",{class:"btn btn-danger float-left",onClick:this.deleteComment,"data-id":s.id},Object(n.h)("i",{class:"fas fa-trash-alt"})," Delete"),Object(n.h)("button",{class:"btn btn-secondary float-right",onClick:this.toggleDeleteComment,"data-id":s.id},Object(n.h)("i",{class:"fas fa-times-circle"})," Cancel")))),Object(n.h)("div",null,Object(n.h)("div",{class:"container-fluid px-3 mt-1"},U&&Object(n.h)("div",{class:"clearfix row position-relative"},Object(n.h)("div",{class:"commentContainer col-12 px-0 overflow-hidden",style:"max-height: 60vh;",onDblclick:this.addLikeComment,"data-id":s.id},Object(n.h)("img",{loading:"lazy",class:"img-fluid",style:"min-width: 100px;",src:U.s3LargeLink})),O[s.id]&&Object(n.h)("span",{class:"likeHeart position-absolute text-white display-1",style:"top: calc(50% - 50px); left: calc(50% - 50px); width: 100px; height: 100px;"},Object(n.h)("i",{class:"fas fa-heart likeStory"}))),M&&M.length>1&&Object(n.h)("div",{class:"clearfix d-flex flex-wrap row"},c.a.isArray(M)&&M.map((e,a)=>Object(n.h)(t,null,Object(n.h)("div",{class:"col px-0 overflow-hidden",style:"max-height: 100px; min-width: 100px;"},Object(n.h)("img",{loading:"lazy",class:"img-fluid border",style:"min-width: 100px;",src:e.s3SmallLink,onClick:this.viewImage,"data-id":s.id,"data-idx":a})))))))),Object(n.h)("small",null,Object(n.h)("button",{class:"commentContainer btn btn-sm btn-link py-0 "+(E?"text-primary":""),onClick:this.addLikeComment,"data-id":s.id,disabled:E},E?Object(n.h)(h.c,{id:"comments.has-liked"},"Liked"):Object(n.h)(h.c,{id:"comments.like"},"Lik")),"-",Object(n.h)("button",{class:"btn btn-sm btn-link py-0",onClick:this.replyComment,"data-id":s.id},Object(n.h)(h.c,{id:"comments.comment-add"},"Kommentar")),s.language!==I&&Object(n.h)(t,null,"-",!j[s.id]&&N?Object(n.h)(t,null,Object(n.h)("button",{type:"button",class:"btn btn-sm btn-link","data-commentid":s.id,onClick:this.showOriginal},Object(n.h)("i",{class:"fas fa-cog"}),"  ",Object(n.h)(h.c,{id:"home.translate-show-original"},"Show original"))):Object(n.h)(t,null,Object(n.h)("button",{type:"button",class:"btn btn-sm btn-link",onClick:this.translate,"data-commentid":s.id},Object(n.h)("i",{class:"fas fa-cog"})," ",Object(n.h)(h.c,{id:"home.translate-to"},"See translation")))),"-",Object(n.h)("button",{class:"btn btn-sm btn-link py-0 disabled"},c.a.formatDistance(s.createdDate,new Date,{locale:"no-NB"}),s.updatedDate&&Object(n.h)(t,null,Object(n.h)("span",{class:"font-weight-light ml-2"},"(Edited ",c.a.formatDistance(s.updatedDate,new Date,{locale:"no-NB"}),")"))))),s.likes&&s.likes.length>0&&Object(n.h)("small",{class:"position-absolute bg-light shadow-sm rounded-lg py-0 px-1",style:"bottom: 20px; right: 15px;"},Object(n.h)("i",{class:"fas fa-thumbs-up text-primary"})," ",s.likes.length)),Object(n.h)("div",{class:"col-10 offset-2 mb-2"},s&&c.a.isArray(P)&&P.map(e=>{const{user:a={}}=e,o=S.findPublicTeamByMembers(a.id),d=g.a.displayNameShort(a),p=g.a.displayName(a),O=a.image||(a.images?a.images[0]:void 0),v=e.likes&&e.likes.findIndex(t=>t.user===C.id)>-1,{currentLocationGeocode:w={}}=e,k=S.getCommentReplyTranslations({story:y,commentid:s.id,replyid:e.id,targetLang:I})||f[`${s.id}-${e.id}`];let x=k||e.comment;return j[`${s.id}-${e.id}`]&&(x=e.comment),Object(n.h)("div",{class:"row"},Object(n.h)("div",{class:"col-12 d-flex mb-2 position-relative"},Object(n.h)("div",{class:"text-center border rounded-circle imageRounded imageRoundedSmall",style:(O?`background-image: url("${O.s3SmallLink}"); background-size: cover;`:"")+" border-width: 3px !important;"},!a.image&&Object(n.h)("span",{class:"font-weight-lighter",style:"font-size: 15px;"},d)),Object(n.h)("div",{class:"flex-grow-1 pl-3 pt-0",style:"line-height: 1.2em;"},Object(n.h)("div",{class:"bg-light p-2 rounded-lg position-relative"},C.id===a.id&&Object(n.h)(t,null,Object(n.h)("span",{class:"float-right font-weight-lighter text-muted"},Object(n.h)("i",{class:"fas fa-ellipsis-h",onClick:this.toggleMenu,"data-id":e.id}))),i[e.id]&&Object(n.h)(t,null,Object(n.h)("div",{class:"position-absolute bg-white p-2 border rounded rounded-lg shadow-sm",style:"top: 30px; right: 10px; width: 60%; z-index: 999999;"},Object(n.h)("button",{class:"btn btn-link btn-block text-left",onClick:this.toggleEdit,"data-id":e.id,"data-comment":e.comment},Object(n.h)("i",{class:"fas fa-edit"})," Edit"),Object(n.h)("hr",null),Object(n.h)("button",{class:"btn btn-link btn-block text-left",onClick:this.toggleDeleteComment,"data-id":e.id},Object(n.h)("i",{class:"fas fa-trash-alt"})," Delete"))),Object(n.h)("span",{style:"font-size: 0.95em;"},Object(n.h)("h5",{class:"font-weight-bold mb-2",style:"font-size: 1.0em;"},a.uuidv4&&a.uuidv4!==C.uuidv4?Object(n.h)(t,null,Object(n.h)("a",{href:"/inbox/"+a.uuidv4,onClick:t=>this.openInbox(t,a.uuidv4)},p)):Object(n.h)(t,null,p),o&&o.length>0&&Object(n.h)(t,null,Object(n.h)("span",{class:"font-weight-lighter text-muted ml-2"},o.filter(t=>1===t.public).slice(0,1).map(e=>Object(n.h)(t,null,"- ",Object(n.h)("a",{href:"/teams/public/"+e.uuidv4,class:"mr-2",onClick:t=>this.displayTeam(t,e.uuidv4)}," ",e.name)))))),l[e.id]?Object(n.h)(t,null,Object(n.h)("div",{class:"d-flex bd-highlight"},Object(n.h)("div",{class:"p-0 w-100 bd-highlight"},Object(n.h)("label",{class:"sr-only",for:"inlineFormInput"},Object(n.h)(h.c,{id:"comments.comment"},"Kommentar")),Object(n.h)("div",{class:"border rounded rounded-lg position-relative"},Object(n.h)(h.b,null,Object(n.h)("textarea",{class:"form-control-plaintext px-2",type:"text",placeholder:Object(n.h)(h.c,{id:"comments.write-comment"},"Skriv en kommentar..."),onInput:Object(u.a)(this,"commentEditText"),onKeyUp:g.a.resizeTextarea,onFocus:g.a.resizeTextarea,style:"height: 2.3em;",value:m})))),Object(n.h)("div",{class:"p-0 pl-2 flex-shrink-1 bd-highlight"},Object(n.h)("button",{type:"button",class:"btn btn-primary mb-2",onClick:this.saveCommentReply,"data-commentid":s.id,"data-id":e.id},Object(n.h)("i",{class:"fas fa-paper-plane"}))))):Object(n.h)(t,null,Object(n.h)(b.a,{markdown:g.a.replaceImages(x,e.images,I),markdownOpts:g.a.getMarkdownOptions()})),r[e.id]&&Object(n.h)("div",{class:"clearfix mt-3 mb-3"},Object(n.h)("button",{class:"btn btn-danger float-left",onClick:this.deleteCommentReply,"data-id":e.id,"data-commentid":s.id},Object(n.h)("i",{class:"fas fa-trash-alt"})," Delete"),Object(n.h)("button",{class:"btn btn-secondary float-right",onClick:this.toggleDeleteComment,"data-id":e.id},Object(n.h)("i",{class:"fas fa-times-circle"})," Cancel")))),Object(n.h)("small",null,Object(n.h)("button",{class:"replyContainer btn btn-sm btn-link py-0 "+(v?"text-primary":""),onClick:this.likeReply,"data-comment":s.id,"data-id":e.id,disabled:v},v?Object(n.h)(h.c,{id:"comments.has-liked"},"Liked"):Object(n.h)(h.c,{id:"comments.like"},"Lik")),"-",Object(n.h)("button",{class:"btn btn-sm btn-link py-0",onClick:this.replyComment,"data-id":s.id},Object(n.h)(h.c,{id:"comments.comment-add"},"Kommentar")),e.language!==I&&Object(n.h)(t,null,"-",!j[`${s.id}-${e.id}`]&&k?Object(n.h)(t,null,Object(n.h)("button",{type:"button",class:"btn btn-sm btn-link","data-commentid":s.id,"data-replyid":e.id,onClick:this.showOriginal},Object(n.h)("i",{class:"fas fa-cog"}),"  ",Object(n.h)(h.c,{id:"home.translate-show-original"},"Show original"))):Object(n.h)(t,null,Object(n.h)("button",{type:"button",class:"btn btn-sm btn-link",onClick:this.translate,"data-commentid":s.id,"data-replyid":e.id},Object(n.h)("i",{class:"fas fa-cog"})," ",Object(n.h)(h.c,{id:"home.translate-to"},"See translation")))),"-",Object(n.h)("button",{class:"btn btn-sm btn-link py-0 disabled"},c.a.formatDistance(e.createdDate,new Date,{locale:"no-NB"}),e.updatedDate&&Object(n.h)(t,null,Object(n.h)("span",{class:"font-weight-light ml-2"},"(Edited ",c.a.formatDistance(e.updatedDate,new Date,{locale:"no-NB"}),")"))))),e.likes&&Object(n.h)("small",{class:"position-absolute bg-light shadow-sm rounded-lg py-0 px-1",style:"bottom: 20px; right: 15px;"},Object(n.h)("i",{class:"fas fa-thumbs-up text-primary"})," ",e.likes.length)))}),L-F>0&&Object(n.h)("div",null,Object(n.h)("button",{class:"btn btn-sm btn-link py-0",onClick:this.toggleReplies,"data-id":s.id},Object(n.h)(h.c,{id:"comments.show-more",fields:{more:L-F}},"Vis ",L-F," flere kommentarer...")))),e[s.id]&&Object(n.h)("div",{class:"col-11 offset-1 d-flex mb-2 position-relative"},Object(n.h)(p.a,{stores:this.props.stores,story:y,initCall:w,callback:v,commentId:s.id,inputRef:t=>this.inputRef[s.id]=t,inputRefObject:this.inputRef,key:"story-commentreply-"+s.id})))}),R-A>0&&Object(n.h)("div",null,Object(n.h)("button",{class:"btn btn-sm btn-link py-0",onClick:this.toggleComments},Object(n.h)(h.c,{id:"comments.show-more",fields:{more:R-A}},"Vis ",R-A," flere kommentarer..."))),s&&Object(n.h)("div",null,Object(n.h)("button",{class:"btn btn-sm btn-link py-0",onClick:this.toggleComments},Object(n.h)(h.c,{id:"comments.hide-all-comments"},"Skjul alle kommentarene."))))}})||l;e.a=j}).call(this,s("hosL").Fragment)},ISGx:function(t,e,s){"use strict";(function(t){function a(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,a)}return s}function o(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?a(Object(s),!0).forEach((function(e){i(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):a(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}function i(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}var l,n=s("hosL"),c=s("Utv1"),r=s("/eY4"),d=s("cneo"),h=s("OhSV"),m=s("fh8t"),b=s.n(m),u=s("Y3FI"),p=s("s4FZ"),g=s("ZQlJ"),O=s("sqi2"),j=s("/922"),f=s("eQ6k"),y=s("+JSK"),v=s("vY+r"),w=s("nHdA"),k=s("irB3"),x=s("UwwE"),S=s("8Lgr"),C=s("QkTp"),I=s("ZOvn");const D={showAddComment:{},likeWorkout:{},idxSuggestion:0,idxAd:4,limit:15,offset:0,hasFollowSugguestions:!1,hasAd:!1,sessionid:(new Date).getTime()};let T=Object(r.a)(l=class extends n.Component{constructor(t){var e;super(t),e=this,this.toggleDate=t=>{t.stopPropagation(),t.preventDefault();const{showDate:e}=this.state;this.setState({showDate:!e})},this.likeWorkout=async function(t){const s=parseInt(t.target.closest(".imageContainer").dataset.id,10),{workoutStore:a}=e.props.stores,{likeWorkout:o}=e.state;o[s]=!0,e.setState({likeWorkout:o}),setTimeout(()=>{const{likeWorkout:t}=e.state;delete t[s],e.setState({likeWorkout:t})},1200);const i=await a.likeWorkout({id:s});i&&200===i.status&&e.addLikeToFeed(s,i.data)},this.addCommentToFeed=({type:t,workout:e,response:s,commentId:a,replyId:o})=>{const{holdingStore:i="team"}=this.props;if("team"===i){const{teamStore:i}=this.props.stores;switch(t){case"likeComment":i.addLikeToComment({id:e.id,data:s.data,commentId:a});break;case"likeReply":i.addLikeToCommentReply({id:e.id,data:s.data,commentId:a,replyId:o});break;default:a?i.addCommentToWorkoutComment({id:e.id,data:s.data,commentId:a}):i.addCommentToWorkout({id:e.id,data:s.data})}}else if("story"===i){const{storyStore:i}=this.props.stores;switch(t){case"likeComment":i.workoutsAddLikeToComment({id:e.id,data:s.data,commentId:a});break;case"likeReply":i.workoutsAddLikeToCommentReply({id:e.id,data:s.data,commentId:a,replyId:o});break;default:a?i.workoutsAddCommentToWorkoutComment({id:e.id,data:s.data,commentId:a}):i.workoutsAddCommentToWorkout({id:e.id,data:s.data})}}},this.addLikeToFeed=(t,e)=>{const{holdingStore:s="team"}=this.props;if("team"===s){const{teamStore:s}=this.props.stores;s.addLikeToWorkout({id:t,data:e})}else if("story"===s){const{storyStore:s}=this.props.stores;s.workoutsAddLikeToWorkout({id:t,data:e})}},this.toggleAddComment=t=>{const e=t.target.closest("button").dataset.id,{showAddComment:s}=this.state;s[e]?delete s[e]:s[e]=!0,this.setState({showAddComment:s},()=>{this.inputRef[e]&&this.inputRef[e].focus()})},this.toggleMenu=t=>{const{id:e}=t.target.closest("i").dataset,{showMenu:s={}}=this.state;s[e]=!s[e],this.setState({showMenu:s})},this.toggleAdminDetails=()=>{const{showAdminDetails:t}=this.state;this.setState({showAdminDetails:!t}),this.setState({showEdit:{},showMenu:{}})},this.reportWorkout=async function(t){const{id:s}=t.target.closest("button").dataset,{teamStore:a}=e.props.stores;await a.reportWorkout({id:s}),e.setState({showEdit:{},showMenu:{}})},this.adminRemoveWorkout=async function(t){const{id:s}=t.target.closest("button").dataset,{teamStore:a}=e.props.stores;await a.adminHideWorkout({id:s}),e.setState({showEdit:{},showMenu:{}})},this.shareLink=t=>{const{url:e,title:s,text:a}=t.target.closest("button").dataset,{appState:o}=this.props.stores;o.shareUrl({url:e,title:s,text:a})},this.showWorkoutDetail=t=>{if("a"===t.target.localName)return!1;const e=t.target.closest("#workoutDetail");if(e){const{id:t}=e.dataset;t&&(console.log({target:e,id:t}),Object(u.route)("/workouts/public/"+t))}},this.translate=async function(t){t.preventDefault(),t.stopPropagation();const{feed:s={}}=e.props,{userStore:a,teamStore:o}=e.props.stores,{user:i}=a,l=await o.translate({object:s,user:i,field:"name"});let n;s.comment&&(n=await o.translate({object:s,user:i,field:"comment"})),e.setState({showOriginal:0,translatedTextName:l,translatedTextComment:n})},this.showOriginal=t=>{t.preventDefault(),t.stopPropagation(),this.setState({showOriginal:1})},this.displayTeam=(t,e)=>{t.preventDefault(),t.stopPropagation();const{appState:s}=this.props.stores;s.openDrawer("publicTeam",{teamId:e,height:"80vh"})},this.openInbox=(t,e)=>{t.preventDefault(),t.stopPropagation();const{appState:s}=this.props.stores;s.openDrawer("inboxDetail",{fromuser:e,height:"80vh"})},this.state=o({},D),this.inputRef={},this.containerRef=null}render(){const{showAddComment:e,showDate:s,likeWorkout:a,showOriginal:i,translatedTextName:l,translatedTextComment:r,showAdminDetails:m,showMenu:u={}}=this.state,{feed:D,onTeamClick:T=(()=>{}),onUserClick:R=(()=>{}),onDogClick:A=(()=>{}),holdingStore:E="team"}=this.props,{teamStore:P,storyStore:L,userStore:F,appState:M}=this.props.stores,{user:z,isAdmin:U}=F,{language:B="en"}=z,{hasShareApi:N}=M;let W,$={},K={};if("team"===E){$=P.findPublicTeam(D.team),K=P.findPublicUser(D.user)||{};const{publicDogs:t}=P;W=t}else if("story"===E){$=L.findPublicTeam(D.team),K=L.findPublicUser(D.user)||{};const{publicDogs:t}=L;W=t}F.findTeamAmbition({ambition:$.ambitions,language:B}),F.findTeamType({type:$.type,language:B});const V=!(!$||!$.members)&&$.members.some(t=>t===z.id),q=I.a.getImage({user:K,team:$,object:D,priority:"user"}),{likes:Y,comments:Z,reports:_=[]}=D,G=D.likes&&D.likes.findIndex(t=>t.user===z.id)>-1,H=$.members&&$.members.indexOf(z.id)>-1,Q=$&&$.followers&&$.followers.indexOf(z.id)>-1,J=$.followRequests&&$.followRequests.findIndex(t=>t.id===z.id)>-1,X=F.findEquipment({equipment:D.equipment,language:B}),tt=F.findEquipment({equipment:D.equipment,field:"icon"}),{gpxInfo:et={}}=D;let st,at,ot,it;K&&(st=I.a.displayNameShort(K),at=I.a.displayName(K),ot=I.a.displayName(K),K.settings&&K.uuidv4!==z.uuidv4&&(it=K.settings.hideProfile?null:"/inbox/"+K.uuidv4));const lt=[];if(D.mapImage&&lt.push(o(o({},D.mapImage),{},{type:"map"})),D.images){const t=Object(d.i)(D.images);lt.push(...t)}const{currentLocationGeocode:nt={},yrWeather:ct=[]}=D,rt=I.a.getViews(D.statistics),dt=I.a.getAdminData(D.statistics);if(!$||!$.name)return"";const ht=I.a.getTranslation({object:D,targetLang:B,field:"name"})||l;let mt=ht||D.name;let bt=I.a.getTranslation({object:D,targetLang:B,field:"comment"})||r||D.comment;return i&&(mt=D.name,bt=D.comment),Object(n.h)(t,null,U||z.id===D.user?Object(n.h)(t,null,Object(n.h)("span",{class:"float-right font-weight-lighter text-muted"},Object(n.h)("i",{class:"fas fa-ellipsis-h",onClick:this.toggleMenu,"data-id":D.uuidv4}))):Object(n.h)(t,null,!H&&!Q&&!J&&$.public>0&&Object(n.h)("span",{class:"float-right"},Object(n.h)(f.a,{stores:this.props.stores,team:$,buttonOnly:!0,simple:!0,classNames:"btn btn-link text-primary"}))),u[D.uuidv4]&&Object(n.h)(t,null,Object(n.h)("div",{class:"position-absolute bg-light p-2 border rounded rounded-lg shadow-sm",style:"top: 30px; right: 10px; width: 60%; z-index: 999999;"},Object(n.h)("button",{class:"btn btn-link btn-block text-left",onClick:this.reportWorkout,"data-id":D.uuidv4},Object(n.h)("i",{class:"fas fa-flag"})," Report"),U&&Object(n.h)(t,null,Object(n.h)("hr",null),Object(n.h)("button",{class:"btn btn-link btn-block text-left text-danger",onClick:this.adminRemoveWorkout,"data-id":D.id},Object(n.h)("i",{class:"fas fa-eraser"})," Remove from feed")),Object(n.h)("button",{class:"btn btn-link btn-block text-left",onClick:this.toggleAdminDetails},Object(n.h)("i",{class:"fas fa-user-cog"})," Toggle admin details"))),Object(n.h)("div",{class:"d-flex position-relative"},Object(n.h)("div",{class:"text-center"},Object(n.h)("div",{class:"position-relative text-center border rounded-circle imageRounded imageRoundedMedium",style:q?`background-image: url("${q}"); background-size: cover;`:""},!q&&Object(n.h)("i",{class:"fas fa-users text-muted mt-2",style:"font-size: 20px;"}))),Object(n.h)("div",{class:"flex-grow-1 pl-3 text-overflow",style:"line-height: 1.2em;"},Object(n.h)("h5",{class:"mb-1 position-relative",style:"line-height: 1.0em;"},$.public?Object(n.h)(t,null,Object(n.h)("a",{href:"/teams/public/"+$.uuidv4,onClick:t=>this.displayTeam(t,$.uuidv4),class:"stretched-link"},$.name)):Object(n.h)(t,null,$.name)),Object(n.h)("div",{class:"d-flex flex-row flex-nowrap",style:"overflow: auto;"},D.date&&Object(n.h)("small",{class:"text-muted",onClick:this.toggleDate},s?c.a.formatDate(D.date,{locale:"no-NB",hour12:!1,hour:"2-digit",minute:"2-digit"}):c.a.formatDistance(D.date,new Date,{locale:"no-NB"})),ot&&Object(n.h)(t,null,Object(n.h)("small",{class:"ml-2 text-muted"},it?Object(n.h)(t,null,Object(n.h)("i",{class:"fas fa-user"})," ",Object(n.h)("a",{href:it,onClick:t=>this.openInbox(t,K.uuidv4)},ot)):Object(n.h)(t,null,Object(n.h)("i",{class:"fas fa-user"})," ",ot))),Object(n.h)("small",{class:"text-muted"},D.equipment>0&&Object(n.h)(t,null,Object(n.h)("i",{class:tt+" ml-2"})," ",X),D.dogs>0&&Object(n.h)(t,null,Object(n.h)("i",{class:"fas fa-dog ml-2"})," ",D.dogs.length),D.track>0&&Object(n.h)(t,null,Object(n.h)("i",{class:`fas fa-map-marked text-${D.track>0?"success":"danger"} ml-2`})),D.sledWeight>0&&Object(n.h)(t,null,Object(n.h)("i",{class:"fas fa-sleigh ml-2"})," ",Object(n.h)(x.a,{stores:this.props.stores,value:D.sledWeight})),0!==D.temperature&&Object(n.h)(t,null,Object(n.h)("i",{class:"fas fa-temperature-low ml-2"})," ",Object(n.h)(C.a,{stores:this.props.stores,value:D.temperature})),D.dogs&&D.dogs.length>0&&Object(n.h)(t,null,Object(n.h)("i",{class:"fas fa-dog ml-2"})," ",c.a.format(D.dogs.length,0)),nt&&nt.formattedCounty&&Object(n.h)(t,null,Object(n.h)("i",{class:"fas fa-map-marker-alt ml-2"})," ",nt.formattedCounty),D.moonIllumination&&D.moonIllumination.phaseIcon&&Object(n.h)("span",{class:"ml-2"},D.moonIllumination.phaseIcon))),m&&U&&Object(n.h)("div",{class:"d-flex flex-row flex-nowrap bg-light border-top border-bottom py-2",style:"overflow: auto;"},Object(n.h)("small",{class:"text-muted mr-2"},"Adm:"),_&&_.length>0&&Object(n.h)(t,null,Object(n.h)("small",{class:"text-danger mr-2"},Object(n.h)("i",{class:"fas fa-flag"})," ",_.length)),nt&&nt.formatted_address&&Object(n.h)(t,null,Object(n.h)("small",{class:"text-muted"},Object(n.h)("i",{class:"fas fa-map-marker-alt"})," ",nt.formatted_address)),K.deviceInfo&&Object(n.h)(t,null,Object(n.h)("span",{class:"badge badge-secondary ml-1 float-right font-weight-light"},["platform","manufacturer","model"].map(e=>Object(n.h)(t,null,Object(n.h)("span",{class:"ml-1 text-white"},K.deviceInfo[e]))))),dt&&Object(n.h)(t,null,Object(n.h)("small",{class:"ml-2 text-muted"},"V: ",dt.count),Object(n.h)("small",{class:"ml-2 text-muted"},"R: ",dt.ranking," ",c.a.isNumber(dt.rankingTrend)&&Object(n.h)(t,null,Object(n.h)("i",{class:I.a.getClassForTrend(dt.rankingTrend)}))),Object(n.h)("small",{class:"ml-2 text-muted"},"D: ",c.a.format(dt.durationAvg/1e3,1),"s ",c.a.isNumber(dt.durationAvgTrend)&&Object(n.h)(t,null,Object(n.h)("i",{class:I.a.getClassForTrend(dt.durationAvgTrend)}))),D.statisticsCurrent&&D.statisticsCurrent.totalInteractions>0&&Object(n.h)("small",{class:"ml-2 text-muted"},"S: ",c.a.format(D.statisticsCurrent.totalInteractions,0)),D.shadowTags&&D.shadowTags.map(e=>Object(n.h)(t,null,Object(n.h)("span",{class:"badge badge-secondary ml-2 float-right font-weight-light"},e))))))),Object(n.h)("div",{class:"container-fluid px-0 mt-1"},Object(n.h)("div",{class:"row"},Object(n.h)(p.a,{stores:this.props.stores,images:lt,id:D.id,dblClick:this.likeWorkout,likeRef:a}))),D.dogs&&D.dogs.length>0&&Object(n.h)("div",{class:"container-fluid px-0 mt-1"},Object(n.h)("div",{class:"row pt-2"},Object(n.h)(g.a,{stores:this.props.stores,dogs:D.dogs,allDogs:W,onDogClick:A}))),Object(n.h)("div",{class:"d-flex justify-content-between bg-light rounded-lg px-2"},D.distanceKm>0&&Object(n.h)("div",{class:"mr-2 text-center"},Object(n.h)("div",{class:"text-overflow text-muted"},Object(n.h)("small",null,Object(n.h)("i",{class:"fas fa-road"})," ",Object(n.h)(h.c,{id:"workout.calendar.distance"},"Distanse"))),Object(n.h)("div",{class:"text-overflow font-weight-light",style:"font-size: 1.2em;"},Object(n.h)(S.a,{stores:this.props.stores,value:D.distanceKm}))),D.elevation>0&&Object(n.h)("div",{class:"mr-2 text-center"},Object(n.h)("div",{class:"text-overflow text-muted"},Object(n.h)("small",null,Object(n.h)("i",{class:"fas fa-mountain"})," ",Object(n.h)(h.c,{id:"workout.calendar.ascend"},"Høydemeter"))),Object(n.h)("div",{class:"text-overflow font-weight-light",style:"font-size: 1.2em;"},Object(n.h)(k.a,{stores:this.props.stores,value:D.elevation}))),D.duration>0&&Object(n.h)("div",{class:"mr-2 text-center"},Object(n.h)("div",{class:"text-overflow text-muted"},Object(n.h)("small",null,Object(n.h)("i",{class:"fas fa-clock"})," ",Object(n.h)(h.c,{id:"workout.calendar.duration"},"Varighet"))),Object(n.h)("div",{class:"text-overflow font-weight-light",style:"font-size: 1.2em;"},c.a.secToHms(D.duration,!0))),D.speedAvg>0&&Object(n.h)("div",{class:"text-center"},Object(n.h)("div",{class:"text-overflow text-muted"},Object(n.h)("small",null,Object(n.h)("i",{class:"fas fa-tachometer-alt"})," ",Object(n.h)(h.c,{id:"workout.calendar.avg-speed"},"Snittfart"))),Object(n.h)("div",{class:"text-overflow font-weight-light",style:"font-size: 1.2em;"},et&&et.avgGpsMovingSpeed>0?Object(n.h)(t,null,Object(n.h)(w.a,{stores:this.props.stores,value:3.6*et.avgGpsMovingSpeed})):Object(n.h)(t,null,Object(n.h)(w.a,{stores:this.props.stores,value:D.speedAvg}))))),Object(n.h)("div",{class:"row mt-2"},Object(n.h)("div",{id:"workoutDetail",class:"clearfix col-12 font-weight-bold",style:"font-size: 1.2em;",onClick:this.showWorkoutDetail,"data-id":D.uuidv4},Object(n.h)(b.a,{markdown:I.a.replaceImages(mt,D.images,B),markdownOpts:I.a.getMarkdownOptions()})),Object(n.h)("div",{class:"clearfix col-12"},Object(n.h)(b.a,{markdown:I.a.replaceImages(bt,D.images,B),markdownOpts:I.a.getMarkdownOptions()})),D.language!==B&&Object(n.h)(t,null,!i&&ht?Object(n.h)(t,null,Object(n.h)("button",{type:"button",class:"btn btn-sm btn-link text-muted",onClick:this.showOriginal},Object(n.h)("i",{class:"fas fa-cog"}),"  ",Object(n.h)(h.c,{id:"home.translate-show-original"},"Show original"))):Object(n.h)(t,null,Object(n.h)("button",{type:"button",class:"btn btn-sm btn-link text-muted",onClick:this.translate},Object(n.h)("i",{class:"fas fa-cog"})," ",Object(n.h)(h.c,{id:"home.translate-to"},"See translation"))))),Object(n.h)("div",{class:"mt-2"},Object(n.h)(y.a,{stores:this.props.stores,likes:Y,comments:Z,type:"team",onTeamClick:T,onUserClick:R})),!H&&!Q&&!J&&Object(n.h)("div",{class:"clearfix mb-2"},Object(n.h)(f.a,{stores:this.props.stores,team:$,buttonOnly:!0})),Object(n.h)("div",null,Object(n.h)("div",{class:"row"},Object(n.h)("div",{class:"col text-center"},Object(n.h)("button",{type:"button",class:`imageContainer btn btn-sm btn-outline-${G?"primary":"secondary"} btn-lg btn-block ${G?"text-primary":""} text-overflow`,"data-id":D.id,onClick:this.likeWorkout},Object(n.h)("i",{class:(G?"text-primary fas":"far")+" fa-thumbs-up"})," ",Object(n.h)(h.c,{id:"comments.like"},"Lik"))),Object(n.h)("div",{class:"col text-center"},Object(n.h)("button",{type:"button",class:"btn btn-sm btn-outline-secondary btn-lg btn-block text-overflow","data-id":D.id,onClick:this.toggleAddComment},Object(n.h)("i",{class:"fas fa-comment"})," ",Object(n.h)(h.c,{id:"comments.comment-add"},"Kommentar"))),N?Object(n.h)(t,null,Object(n.h)("div",{class:"col text-center"},Object(n.h)("button",{class:"btn btn-sm btn-outline-secondary btn-lg btn-block text-overflow",onClick:this.shareLink,"data-url":"https://themusher.app/share/workout/"+D.uuidv4,"data-title":"title: "+D.title},Object(n.h)("i",{class:"fas fa-share"})," ",Object(n.h)(h.c,{id:"story.share"},"Del")))):Object(n.h)(t,null,Object(n.h)("div",{class:"col text-center"},Object(n.h)("a",{class:"btn btn-sm btn-outline-secondary btn-lg btn-block text-overflow",href:"https://themusher.app/share/workout/"+D.uuidv4,target:"_blank",rel:"noreferrer","data-native":!0},Object(n.h)("i",{class:"fas fa-share"})," ",Object(n.h)(h.c,{id:"story.share"},"Del")))))),rt>0&&Object(n.h)(t,null,Object(n.h)("div",{class:"mt-2"},Object(n.h)(v.a,{stores:this.props.stores,views:rt,object:D,type:"team",isTeamAdmin:V,isAdmin:U,onTeamClick:T,onUserClick:R}))),Object(n.h)("div",{class:"mt-2"},e[D.id]&&Object(n.h)(j.a,{stores:this.props.stores,workout:D,inputRef:t=>this.inputRef[D.id]=t,inputRefObject:this.inputRef,col:"12",offset:"0",showAvatar:!0,extraClass:"px-0",callback:this.addCommentToFeed}),Object(n.h)(O.a,{stores:this.props.stores,workout:D,col:"12",offset:"0",compact:!1,callback:this.addCommentToFeed})))}})||l;e.a=T}).call(this,s("hosL").Fragment)},NMoA:function(t,e,s){"use strict";(function(t){function a(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,a)}return s}function o(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?a(Object(s),!0).forEach((function(e){i(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):a(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}function i(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}var l,n,c,r,d,h=s("hosL"),m=s("Utv1"),b=s("/eY4"),u=s("cneo"),p=s("OhSV"),g=s("fh8t"),O=s.n(g),j=s("go65"),f=s("Y3FI"),y=(s("1OK2"),s("B95u")),v=s("4QWe"),w=(s("NMoA"),s("P9Fo")),k=s("s4FZ"),x=s("+JSK"),S=s("vY+r"),C=s("eQ6k"),I=s("om2D"),D=s("ZOvn");const T={showAddComment:{},showTeamSetting:{},viewImageIdx:{},likeStory:{}};let R=Object(b.a)(l=class extends h.Component{constructor(t){var e;super(t),e=this,this.saveStory=async function(t){const{id:s}=t.target.closest("button").dataset,{storyBody:a}=e.state,{storyStore:o}=e.props.stores,{callback:i=(()=>!0)}=e.props;await o.saveField(parseInt(s,10),"body",a,!0),o.publicFeedUpdate(parseInt(s,10),"body",a),e.setState({storyBody:"",storyType:0}),i()},this.saveStoryField=async function(t){const{story:s}=e.props,{id:a}=s,{value:o,name:i}=t.target,{subfield:l,subvalue:n}=t.target.dataset,{sendButtonEnabled:c}=e.state;if(!c)return!1;const{storyStore:r}=e.props.stores;r.publicFeedUpdate(a,i,o),clearTimeout(e.updateTimer[i]),e.updateTimer[i]=setTimeout((async function(){e.doUpdateField(a,i,o,{query:{[l]:n}})}),1e3)},this.updateFieldValue=({id:t,field:s,value:a,skipTimer:o=!1})=>{const{story:i}=this.props,{storyStore:l}=this.props.stores;let n=a,c=a;"images"===s&&Array.isArray(i.images)&&Array.isArray(a)&&(c=[...i.images,...a]),l.updateField(t,s,c),l.publicFeedUpdate(t,s,c),o?this.doUpdateField(t,s,n):(clearTimeout(this.updateTimer[s]),this.updateTimer[s]=setTimeout((async function(){e.doUpdateField(t,s,n)}),500))},this.beforeImagesUploaded=()=>{this.setState({sendButtonEnabled:!1})},this.afterImagesUploaded=()=>{this.setState({sendButtonEnabled:!0})},this.removeImage=async function(t){const{storyStore:s}=e.props.stores,{story:a}=e.props;s.removeImage({id:a.id,name:t.target.parentElement.dataset.name||t.target.dataset.name})},this.handleImageErrored=t=>{const e=t.target;e.onerror=null,setTimeout(()=>{e.src+="?"+new Date},1e3)},this.updateTimer={},this.textareaRef=Object(h.createRef)(),this.state={sendButtonEnabled:!0,storyBody:t.story.body}}async doUpdateField(t,e,s,a={}){this.setState({sendButtonEnabled:!1});const{storyStore:i}=this.props.stores;await i.saveField(parseInt(t,10),e,s,!0,{query:o({},a.query)}),this.setState({sendButtonEnabled:!0})}componentDidMount(){this.textareaRef.current.focus()}render(){const{storyBody:e,storyType:s,sendButtonEnabled:a}=this.state,{userStore:o}=this.props.stores,{isAdmin:i}=o,{story:l}=this.props;return Object(h.h)(t,null,Object(h.h)("div",{class:"container-fluid px-0 mt-1"},Object(h.h)("div",{class:"row"},Object(h.h)("div",{class:"col-12 text-center mt-2"},Object(h.h)("div",{class:"container-fluid"},Object(h.h)("div",{class:"row d-flex align-items-end"},m.a.isArray(l.images)&&l.images.map((t,e)=>Object(h.h)("div",{class:"col-3 p-1"},Object(h.h)("img",{src:t.s3SmallLink,class:"img-fluid",onError:this.handleImageErrored}),Object(h.h)("button",{class:"btn btn-sm btn-link",onClick:this.removeImage,"data-name":t.name},Object(h.h)("i",{class:"fas fa-trash"})," Del"),Object(h.h)("small",null,Object(h.h)("input",{class:"form-control",type:"text",name:"images.title","data-subfield":"name","data-subvalue":l.images[e].name,onInput:this.saveStoryField,value:l.images[e].title})))))),Object(h.h)(I.a,{object:l,updateField:this.updateFieldValue,before:this.beforeImagesUploaded,after:this.afterImagesUploaded,autoOpen:!1}))),Object(h.h)("div",{class:"row"},Object(h.h)("div",{class:"col-12 mt-2"},Object(h.h)("label",null,Object(h.h)(p.c,{id:"story.content"},"Content")),Object(h.h)("div",{class:"border rounded rounded-lg position-relative"},Object(h.h)(p.b,null,Object(h.h)("textarea",{class:"form-control-plaintext px-2",type:"text",placeholder:Object(h.h)(p.c,{id:"story.add-content"},"Add your text here..."),onInput:Object(j.a)(this,"storyBody"),onFocus:D.a.resizeTextarea,style:"height: 2.3em;",value:e||l.body,ref:this.textareaRef}))))),Object(h.h)("div",{class:"row"},Object(h.h)("div",{class:"col-12 mt-2"},i&&Object(h.h)(t,null,Object(h.h)("div",{class:"col-12 mt-2"},Object(h.h)("div",{class:"form-group"},Object(h.h)("small",null,Object(h.h)("input",{type:"checkbox",id:"pinned-"+l.id,name:"pinned",onInput:this.saveStoryField,value:l.pinned?"false":m.a.isoDate(),checked:l.pinned?"checked":""}),Object(h.h)("label",{class:"ml-2",for:"pinned-"+l.id},"Pinned to top."))))),i&&Object(h.h)(t,null,Object(h.h)("label",null,Object(h.h)(p.c,{id:"story.type"},"Type")),Object(h.h)("div",{class:"form-group"},Object(h.h)("small",null,Object(h.h)("select",{class:"custom-select custom-select-sm",id:l.id,name:"type",onInput:this.saveStoryField,value:s||l.type},Object(h.h)("option",{value:""},"-- ",Object(h.h)(p.c,{id:"story.type-choose"},"Velg type")," --"),Object(h.h)("option",{value:1,selected:1==l.type?"selected":""},"✍️ ",Object(h.h)(p.c,{id:"story.type-regular"},"Vanlig")),Object(h.h)("option",{value:2,selected:2==l.type?"selected":""},"🚀 ",Object(h.h)(p.c,{id:"story.type-ad"},"Annonse")),Object(h.h)("option",{value:3,selected:3==l.type?"selected":""},"📄 ",Object(h.h)(p.c,{id:"story.type-article"},"Artikkel")))))),l.type>=2&&Object(h.h)(t,null,Object(h.h)("label",null,Object(h.h)(p.c,{id:"story.url-text"},"URL text")),Object(h.h)("div",{class:"form-group"},Object(h.h)("small",null,Object(h.h)("input",{class:"form-control",type:"text",name:"urlText",onInput:this.saveStoryField,value:l.urlText}))),Object(h.h)("label",null,Object(h.h)(p.c,{id:"story.url"},"URL")),Object(h.h)("div",{class:"form-group"},Object(h.h)("small",null,Object(h.h)("input",{class:"form-control",type:"text",name:"url",onInput:this.saveStoryField,value:l.url})))),2===l.type&&Object(h.h)(t,null,Object(h.h)("label",null,Object(h.h)(p.c,{id:"story.code"},"Code")),Object(h.h)("div",{class:"form-group"},Object(h.h)("small",null,Object(h.h)("input",{class:"form-control",type:"text",name:"code",onInput:this.saveStoryField,value:l.code}))),Object(h.h)("label",null,Object(h.h)(p.c,{id:"story.country"},"Country")),Object(h.h)("div",{class:"form-group"},Object(h.h)("small",null,Object(h.h)("input",{class:"form-control",type:"text",name:"country",onInput:this.saveStoryField,value:l.country}))),Object(h.h)("label",null,Object(h.h)(p.c,{id:"story.region"},"Region")),Object(h.h)("div",{class:"form-group"},Object(h.h)("small",null,Object(h.h)("input",{class:"form-control",type:"text",name:"region",onInput:this.saveStoryField,value:l.region}))),Object(h.h)("label",null,Object(h.h)(p.c,{id:"story.currency"},"Currency")),Object(h.h)("div",{class:"form-group"},Object(h.h)("small",null,Object(h.h)("input",{class:"form-control",type:"text",name:"currency",onInput:this.saveStoryField,value:l.currency}))),Object(h.h)("label",null,Object(h.h)(p.c,{id:"story.price"},"Price")),Object(h.h)("div",{class:"form-group"},Object(h.h)("small",null,Object(h.h)("input",{class:"form-control",type:"text",name:"price",onInput:this.saveStoryField,value:l.price})))))),Object(h.h)("div",{class:"row"},Object(h.h)("div",{class:"col-12 mt-2"},Object(h.h)("button",{type:"button",class:`btn btn-block btn-${a?"primary":"secondary"} mb-2`,disabled:!a,onClick:this.saveStory,"data-id":l.id},Object(h.h)("i",{class:"fas fa-paper-plane"})," ",Object(h.h)(p.c,{id:"story.edit-save"},"Save changes"))))))}})||l,A=Object(b.a)(n=class extends h.Component{constructor(t){var e;super(t),e=this,this.viewImage=t=>{const{id:e,idx:s}=t.target.closest("img").dataset,{viewImageIdx:a}=this.state;a[e]=s,this.setState({viewImageIdx:a})},this.showStoryDetail=t=>{if("a"===t.target.localName)return!1;const{id:e}=t.target.closest("#storyDetail").dataset;e&&Object(f.route)("/stories/"+e)},this.translate=async function(t){t.preventDefault(),t.stopPropagation();const{story:s}=e.props,{userStore:a,storyStore:o}=e.props.stores,{user:i}=a,l=await o.translate({story:s,user:i});e.setState({showOriginal:0,translatedText:l})},this.showOriginal=t=>{t.preventDefault(),t.stopPropagation(),this.setState({showOriginal:1})},this.setSelectedImage=t=>{this.setState({selectedImageIdx:t})},this.state={viewImageIdx:{}}}render(){const{viewImageIdx:e,showOriginal:s,translatedText:a,selectedImageIdx:o=0}=this.state,{userStore:i}=this.props.stores,{story:l,likeStory:n,likeRef:c}=this.props,{user:r}=i,{language:d="en"}=r,m=[];if(l.images){const t=Object(u.i)(l.images);m.push(...t)}const b=D.a.getTranslation({object:l,targetLang:d,field:"body"})||a;let g=b||l.body;s&&(g=l.body);const{components:j=[],finalBody:f=""}=D.a.getInlineComponents(g||"");return Object(h.h)(t,null,Object(h.h)("div",{class:"container-fluid px-0 mt-1"},Object(h.h)("div",{class:"row"},Object(h.h)(k.a,{stores:this.props.stores,images:m,id:l.id,dblClick:n,likeRef:c,callback:this.setSelectedImage}))),Object(h.h)("div",{class:"row mt-2"},Object(h.h)("div",{class:"clearfix col-12 overflow-hidden",style:""+(l.offline?"text-decoration: line-through;":"")},Object(h.h)("div",{id:"storyDetail",onClick:this.showStoryDetail,"data-id":l.id},Object(h.h)(O.a,{markdown:D.a.replaceImages(f,l.images,d),markdownOpts:D.a.getMarkdownOptions()}),l.language!==d&&Object(h.h)(t,null,!s&&b?Object(h.h)(t,null,Object(h.h)("button",{type:"button",class:"btn btn-sm btn-link text-muted",onClick:this.showOriginal},Object(h.h)("i",{class:"fas fa-cog"}),"  ",Object(h.h)(p.c,{id:"home.translate-show-original"},"Show original"))):Object(h.h)(t,null,Object(h.h)("button",{type:"button",class:"btn btn-sm btn-link text-muted",onClick:this.translate},Object(h.h)("i",{class:"fas fa-cog"})," ",Object(h.h)(p.c,{id:"home.translate-to"},"See translation"))))),j&&j.map(t=>{if("poll"===t.name)return Object(h.h)(w.a,{stores:this.props.stores,story:l,storyId:l.id,params:t.params,opts:t.opts,content:t.content,selectedImageIdx:o})}))))}})||n,E=Object(b.a)(c=class extends h.Component{constructor(t){var e;super(t),e=this,this.viewImage=t=>{const{id:e,idx:s}=t.target.closest("img").dataset,{viewImageIdx:a}=this.state;a[e]=s,this.setState({viewImageIdx:a})},this.showStoryDetail=t=>{if("a"===t.target.localName)return!1;const{id:e}=t.target.closest("#storyDetail").dataset;e&&Object(f.route)("/stories/"+e)},this.translate=async function(t){t.preventDefault(),t.stopPropagation();const{story:s}=e.props,{userStore:a,storyStore:o}=e.props.stores,{user:i}=a;e.setState({showOriginal:0}),await o.translate({story:s,user:i})},this.showOriginal=t=>{t.preventDefault(),t.stopPropagation(),this.setState({showOriginal:1})},this.getTranslation=()=>{const{story:t}=this.props,{userStore:e}=this.props.stores,{user:s}=e,{language:a="en"}=s;D.a.getTranslation({object:t,targetLang:a,field:"body"})&&this.setState({showOriginal:0})},this.state={viewImageIdx:{}}}componentWillMount(){this.getTranslation()}render(){const{viewImageIdx:e,showOriginal:s}=this.state,{userStore:a}=this.props.stores,{story:o,likeStory:i,likeRef:l}=this.props,{user:n}=a,{language:c="en"}=n,r=[];if(o.images){const t=Object(u.i)(o.images);r.push(...t)}const d=D.a.getTranslation({object:o,targetLang:c,field:"body"});let b=d||o.body;return s&&(b=o.body),Object(h.h)(t,null,Object(h.h)("div",{class:"container-fluid px-0 mt-1"},Object(h.h)("div",{class:"row"},Object(h.h)(k.a,{stores:this.props.stores,images:r,id:o.id,dblClick:i,likeRef:l}))),Object(h.h)("div",{class:"row mt-2"},Object(h.h)("div",{class:"clearfix col-12 overflow-hidden",style:""+(o.offline?"text-decoration: line-through;":"")},Object(h.h)("div",{id:"storyDetail","data-id":o.id},Object(h.h)(O.a,{markdown:D.a.replaceImages(b,o.images,c),markdownOpts:D.a.getMarkdownOptions()}),o.language!==c&&Object(h.h)(t,null,!s&&d?Object(h.h)(t,null,Object(h.h)("button",{type:"button",class:"btn btn-sm btn-link",onClick:this.showOriginal},Object(h.h)("i",{class:"fas fa-cog"}),"  ",Object(h.h)(p.c,{id:"home.translate-show-original"},"Show original"))):Object(h.h)(t,null,Object(h.h)("button",{type:"button",class:"btn btn-sm btn-link",onClick:this.translate},Object(h.h)("i",{class:"fas fa-cog"})," ",Object(h.h)(p.c,{id:"home.translate-to"},"See translation")))))),!!(o.url||o.code||o.price>0)&&Object(h.h)(t,null,Object(h.h)("div",{class:"clearfix col-12  py-2",style:""+(o.offline?"text-decoration: line-through;":"")},Object(h.h)("div",{class:"row"},o.url&&Object(h.h)(t,null,Object(h.h)("div",{class:"col-12 text-left",style:"font-size: 1.0em;"},Object(h.h)("a",{href:D.a.asUrl(o.url),target:"_blank",rel:"noreferrer"},Object(h.h)("i",{class:"fas fa-link mr-2"}),o.urlText?Object(h.h)(t,null,o.urlText):Object(h.h)(t,null,Object(h.h)(p.c,{id:"story.ad-url-readmore"},"Les mer..."))))),o.code&&Object(h.h)(t,null,Object(h.h)("div",{class:"col text-left",style:"font-size: 1.2em;"},Object(h.h)("nobr",null,Object(h.h)("span",{class:"font-weight-lighter"},Object(h.h)(p.c,{id:"story.ad-campaign-code"},"Kampanjekode"),":")," ",o.code))),o.price>0&&Object(h.h)(t,null,Object(h.h)("div",{class:"col text-right",style:"font-size: 1.2em;"},Object(h.h)("nobr",null,o.currencty&&Object(h.h)("span",{class:"font-weight-lighter"},o.currency)," ",m.a.format(o.price,2)))))))))}})||c,P=Object(b.a)(r=class extends h.Component{constructor(t){var e;super(t),e=this,this.viewImage=t=>{const{id:e,idx:s}=t.target.closest("img").dataset,{viewImageIdx:a}=this.state;a[e]=s,this.setState({viewImageIdx:a})},this.showStoryDetail=t=>{if("a"===t.target.localName)return!1;const{id:e}=t.target.closest("#storyDetail").dataset;e&&Object(f.route)("/stories/"+e)},this.translate=async function(t){t.preventDefault(),t.stopPropagation();const{story:s}=e.props,{userStore:a,storyStore:o}=e.props.stores,{user:i}=a;e.setState({showOriginal:0}),await o.translate({story:s,user:i})},this.showOriginal=t=>{t.preventDefault(),t.stopPropagation(),this.setState({showOriginal:1})},this.getTranslation=()=>{const{story:t}=this.props,{userStore:e}=this.props.stores,{user:s}=e,{language:a="en"}=s;D.a.getTranslation({object:t,targetLang:a,field:"body"})&&this.setState({showOriginal:0})},this.state={viewImageIdx:{}}}componentWillMount(){this.getTranslation()}render(){const{viewImageIdx:e,showOriginal:s}=this.state,{userStore:a}=this.props.stores,{story:o,likeStory:i,likeRef:l}=this.props,{user:n}=a,{language:c="en"}=n,r=[];if(o.images){const t=Object(u.i)(o.images);r.push(...t)}const d=D.a.getTranslation({object:o,targetLang:c,field:"body"});let m=d||o.body;return s&&(m=o.body),Object(h.h)(t,null,Object(h.h)("div",{class:"container-fluid px-0 mt-1"},Object(h.h)("div",{class:"row"},Object(h.h)(k.a,{stores:this.props.stores,images:r,id:o.id,dblClick:i,likeRef:l}))),Object(h.h)("div",{class:"row mt-2"},Object(h.h)("div",{class:"clearfix col-12 overflow-hidden",style:""+(o.offline?"text-decoration: line-through;":"")},Object(h.h)("div",{id:"storyDetail",onClick:this.showStoryDetail,"data-id":o.id},Object(h.h)(O.a,{markdown:D.a.replaceImages(m,o.images,c),markdownOpts:D.a.getMarkdownOptions()}),o.language!==c&&Object(h.h)(t,null,!s&&d?Object(h.h)(t,null,Object(h.h)("button",{type:"button",class:"btn btn-sm btn-link",onClick:this.showOriginal},Object(h.h)("i",{class:"fas fa-cog"}),"  ",Object(h.h)(p.c,{id:"home.translate-show-original"},"Show original"))):Object(h.h)(t,null,Object(h.h)("button",{type:"button",class:"btn btn-sm btn-link",onClick:this.translate},Object(h.h)("i",{class:"fas fa-cog"})," ",Object(h.h)(p.c,{id:"home.translate-to"},"See translation")))))),!!(o.url||o.code||o.price)&&Object(h.h)(t,null,Object(h.h)("div",{class:"clearfix col-12  py-2",style:""+(o.offline?"text-decoration: line-through;":"")},Object(h.h)("div",{class:"row"},o.url&&Object(h.h)(t,null,Object(h.h)("div",{class:"col-12 text-left",style:"font-size: 1.0em;"},Object(h.h)("a",{href:D.a.asUrl(o.url),target:"_blank",rel:"noreferrer"},Object(h.h)("i",{class:"fas fa-link mr-2"}),o.urlText?Object(h.h)(t,null,o.urlText):Object(h.h)(t,null,Object(h.h)(p.c,{id:"story.ad-url-readmore"},"Les mer..."))))))))))}})||r,L=Object(b.a)(d=class extends h.Component{constructor(t){var e;super(t),e=this,this.toggleDate=t=>{t.stopPropagation(),t.preventDefault();const{showDate:e}=this.state;this.setState({showDate:!e})},this.likeStory=async function(){const{story:t}=e.props,{id:s}=t,a=s,{storyStore:o}=e.props.stores,{likeStory:i}=e.state;i[a]=!0;const l=Object.keys(i);e.setState({likeStory:i,likeIds:l}),setTimeout(()=>{const{likeStory:t}=e.state;delete t[a];const s=Object.keys(t);e.setState({likeStory:t,likeIds:s})},1200);await o.likeStory({id:a})},this.toggleAddComment=t=>{const e=t.target.closest("button").dataset.id,{showAddComment:s}=this.state;s[e]?delete s[e]:s[e]=!0,this.setState({showAddComment:s},()=>{this.inputRef[e]&&this.inputRef[e].focus()})},this.closeAllAddComments=()=>{this.setState({showAddComment:{}})},this.toggleShowTeamSetting=t=>{const e=t.target.closest("button").dataset.id,{showTeamSetting:s}=this.state;s[e]?delete s[e]:s[e]=!0,this.setState({showTeamSetting:s})},this.viewImage=t=>{const{id:e,idx:s}=t.target.closest("img").dataset,{viewImageIdx:a}=this.state;a[e]=s,this.setState({viewImageIdx:a})},this.toggleMenu=t=>{const{id:e}=t.target.closest("i").dataset,{showMenu:s={}}=this.state;s[e]=!s[e],this.setState({showDeleteStory:{},showEdit:{},showMenu:s})},this.toggleEdit=t=>{const{id:e}=t.target.closest("button").dataset,{showEdit:s={}}=this.state;s[e]=!s[e],this.setState({showDeleteStory:{},showEdit:s,showMenu:{}})},this.toggleDeleteStory=t=>{const{id:e}=t.target.closest("button").dataset,{showDeleteStory:s={}}=this.state;s[e]=!s[e],this.setState({showDeleteStory:s,showEdit:{},showMenu:{}})},this.toggleAdminDetails=()=>{const{showAdminDetails:t}=this.state;this.setState({showAdminDetails:!t}),this.setState({showEdit:{},showMenu:{}})},this.reportStory=async function(t){const{id:s}=t.target.closest("button").dataset,{storyStore:a}=e.props.stores;await a.reportStory({id:s}),e.setState({showEdit:{},showMenu:{}})},this.adminRemoveStory=async function(t){const{id:s}=t.target.closest("button").dataset,{storyStore:a}=e.props.stores;await a.adminHideStory({id:s}),e.setState({showEdit:{},showMenu:{}})},this.deleteStory=async function(t){const{id:s}=t.target.closest("button").dataset,{storyStore:a}=e.props.stores;await a.saveField(parseInt(s,10),"offline",1,!0),a.publicFeedUpdate(parseInt(s,10),"offline",1),e.setState({storyBody:"",showDeleteStory:{},showEdit:{},showMenu:{}})},this.doneEdit=()=>{this.setState({showDeleteStory:{},showEdit:{},showMenu:{}})},this.showStoryDetail=t=>{if("a"===t.target.localName)return!1;const{id:e}=t.target.closest("#storyDetail").dataset;e&&Object(f.route)("/stories/"+e)},this.shareLink=t=>{const{url:e,title:s,text:a}=t.target.closest("button").dataset,{appState:o}=this.props.stores;o.shareUrl({url:e,title:s,text:a})},this.displayTeam=(t,e)=>{t.preventDefault(),t.stopPropagation();const{appState:s}=this.props.stores;s.openDrawer("publicTeam",{teamId:e,height:"80vh"})},this.openInbox=(t,e)=>{t.preventDefault(),t.stopPropagation();const{appState:s}=this.props.stores;s.openDrawer("inboxDetail",{fromuser:e,height:"80vh"})},this.state=o({},T),this.inputRef={}}async loadStoriesPublicFeed(t=this.props){const{hashtag:e}=t,{storyStore:s}=t.stores;await s.loadPublicFeed({hashtag:e})}render(){const{showAddComment:e,showDate:s,showMenu:a={},showEdit:o={},showDeleteStory:i={},showTeamSetting:l,likeStory:n,likeIds:c,showAdminDetails:r}=this.state,{story:d,showAllComments:b,onTeamClick:u=(()=>{}),onUserClick:g=(()=>{})}=this.props,{userStore:O,storyStore:j,appState:f}=this.props.stores,{user:w={},isAdmin:k}=O,{hasShareApi:I}=f,T=j.findPublicTeam(d.team)||{},L=j.findPublicUser(d.user)||{},F=D.a.getImage({user:L,team:T,priority:"user",object:d}),M=!(!T||!T.members)&&T.members.some(t=>t===w.id);let z,U,B,N;T&&T.name?(z=D.a.displayNameShort(T),U=D.a.displayName(T),B=D.a.displayName(L),L.settings&&w.uuidv4!==L.uuidv4&&(N=L.settings.hideProfile?null:"/inbox/"+L.uuidv4)):L&&L.id&&(z=D.a.displayNameShort(L),U=D.a.displayName(L));const{likes:W,comments:$,reports:K=[]}=d,V=d.likes&&d.likes.findIndex(t=>t.user===w.id)>-1,q=T.followers?T.followers.length:0,Y=T.members&&T.members.indexOf(w.id)>-1,Z=T.followers&&T.followers.indexOf(w.id)>-1,_=T.followRequests&&T.followRequests.findIndex(t=>t.id===w.id)>-1,{currentLocationGeocode:G={},yrWeather:H=[]}=d,Q=D.a.getViews(d.statistics),J=D.a.getAdminData(d.statistics);return Object(h.h)(t,null,k||w.id===L.id?Object(h.h)(t,null,Object(h.h)("span",{class:"float-right font-weight-lighter text-muted"},Object(h.h)("i",{class:"fas fa-ellipsis-h",onClick:this.toggleMenu,"data-id":d.id}))):Object(h.h)(t,null,!Y&&!Z&&!_&&T.public>0&&Object(h.h)("span",{class:"float-right"},Object(h.h)(C.a,{stores:this.props.stores,team:T,buttonOnly:!0,simple:!0,classNames:"btn btn-link text-primary"}))),a[d.id]&&Object(h.h)(t,null,Object(h.h)("div",{class:"position-absolute bg-light p-2 border rounded rounded-lg shadow-sm",style:"top: 30px; right: 10px; width: 60%; z-index: 999999;"},w.id===L.id?Object(h.h)(t,null,Object(h.h)("button",{class:"btn btn-link btn-block text-left",onClick:this.toggleEdit,"data-id":d.id},Object(h.h)("i",{class:"fas fa-edit"})," Edit"),Object(h.h)("hr",null),Object(h.h)("button",{class:"btn btn-link btn-block text-left text-danger",onClick:this.toggleDeleteStory,"data-id":d.id},Object(h.h)("i",{class:"fas fa-trash-alt"})," Delete")):Object(h.h)(t,null,Object(h.h)("button",{class:"btn btn-link btn-block text-left",onClick:this.reportStory,"data-id":d.id},Object(h.h)("i",{class:"fas fa-flag"})," Report"),k&&Object(h.h)(t,null,Object(h.h)("hr",null),Object(h.h)("button",{class:"btn btn-link btn-block text-left text-danger",onClick:this.adminRemoveStory,"data-id":d.id},Object(h.h)("i",{class:"fas fa-eraser"})," Remove from feed"))),Object(h.h)("button",{class:"btn btn-link btn-block text-left",onClick:this.toggleAdminDetails},Object(h.h)("i",{class:"fas fa-user-cog"})," Toggle admin details"))),Object(h.h)("div",{class:"d-flex position-relative"},Object(h.h)("div",{class:"position-relative text-center border rounded-circle imageRounded imageRoundedMedium",style:F?`background-image: url("${F}"); background-size: cover;`:""},!F&&Object(h.h)("div",{class:"text-muted",style:"font-size: 20px; padding-top: 3px;"},z)),Object(h.h)("div",{class:"flex-grow-1 pl-3 text-overflow",style:"line-height: 1.2em;"},Object(h.h)("h5",{class:"mb-1 position-relative",style:"line-height: 1.0em; "+(d.offline?"text-decoration: line-through;":"")},T.public?Object(h.h)(t,null,Object(h.h)("a",{href:"/teams/public/"+T.uuidv4,onClick:t=>this.displayTeam(t,T.uuidv4),class:"stretched-link"},U)):Object(h.h)(t,null,U),Y&&!T.public&&Object(h.h)("button",{type:"button",class:"btn btn-sm btn-link text-muted","data-id":d.id,onClick:this.toggleShowTeamSetting},Object(h.h)("i",{class:"fas fa-exclamation-triangle"}))),Object(h.h)("div",{class:"mb-2",style:""+(d.offline?"text-decoration: line-through;":"")},d.pinned&&Object(h.h)(t,null,Object(h.h)("small",{class:"text-muted mr-2"},Object(h.h)("i",{class:"fas fa-thumbtack"}))),2===d.type?Object(h.h)(t,null,Object(h.h)("small",{class:"text-muted"},Object(h.h)(p.c,{id:"story.sponsored"},"Sponsored")," -")):Object(h.h)(t,null,d.date&&Object(h.h)("small",{class:"text-muted",onClick:this.toggleDate},s?m.a.formatDate(d.date,{locale:"no-NB",hour12:!1,hour:"2-digit",minute:"2-digit"}):m.a.formatDistance(d.date,new Date,{locale:"no-NB"}))),1===d.public?Object(h.h)(t,null,Object(h.h)("small",{class:"ml-2 text-muted"},Object(h.h)("i",{class:"fas fa-globe-europe"}))):Object(h.h)(t,null,Object(h.h)("small",{class:"ml-2 text-muted"},Object(h.h)("i",{class:"fas fa-users"})," (",m.a.format(q),")")),B&&Object(h.h)(t,null,Object(h.h)("small",{class:"ml-2 text-muted"},N?Object(h.h)(t,null,Object(h.h)("i",{class:"fas fa-user"})," ",Object(h.h)("a",{href:N,onClick:t=>this.openInbox(t,L.uuidv4)},B)):Object(h.h)(t,null,Object(h.h)("i",{class:"fas fa-user"})," ",B))),G&&G.formattedCounty&&Object(h.h)(t,null,Object(h.h)("small",{class:"ml-2 text-muted"},Object(h.h)("i",{class:"fas fa-map-marker-alt"})," ",G.formattedCounty))),r&&k&&Object(h.h)("div",{class:"d-flex flex-row flex-nowrap bg-light border-top border-bottom py-2",style:"overflow: auto;"},Object(h.h)("small",{class:"text-muted mr-2"},"Adm:"),K&&K.length>0&&Object(h.h)(t,null,Object(h.h)("small",{class:"text-danger mr-2"},Object(h.h)("i",{class:"fas fa-flag"})," ",K.length)),G&&G.formatted_address&&Object(h.h)(t,null,Object(h.h)("small",{class:"text-muted"},Object(h.h)("i",{class:"fas fa-map-marker-alt"})," ",G.formatted_address)),L.deviceInfo&&Object(h.h)(t,null,Object(h.h)("span",{class:"badge badge-secondary ml-2 float-right font-weight-light"},["platform","manufacturer","model"].map(e=>Object(h.h)(t,null,Object(h.h)("span",{class:"ml-2 text-white"},L.deviceInfo[e]))))),J&&Object(h.h)(t,null,Object(h.h)("small",{class:"ml-2 text-muted"},"V: ",J.count),Object(h.h)("small",{class:"ml-2 text-muted"},"R: ",J.ranking," ",m.a.isNumber(J.rankingTrend)&&Object(h.h)(t,null,Object(h.h)("i",{class:D.a.getClassForTrend(J.rankingTrend)}))),Object(h.h)("small",{class:"ml-2 text-muted"},"D: ",m.a.format(J.durationAvg/1e3,1),"s ",m.a.isNumber(J.durationAvgTrend)&&Object(h.h)(t,null,Object(h.h)("i",{class:D.a.getClassForTrend(J.durationAvgTrend)}))),d.statisticsCurrent&&d.statisticsCurrent.totalInteractions>0&&Object(h.h)("small",{class:"ml-2 text-muted"},"S: ",m.a.format(d.statisticsCurrent.totalInteractions,0)),d.shadowTags&&d.shadowTags.map(e=>Object(h.h)(t,null,Object(h.h)("span",{class:"badge badge-secondary ml-2 float-right font-weight-light"},e))))))),o[d.id]||i[d.id]?Object(h.h)(t,null,Object(h.h)("div",{class:"row mt-2"},Object(h.h)("div",{class:"clearfix col-12",style:""+(d.offline?"text-decoration: line-through;":"")},o[d.id]&&Object(h.h)(t,null,Object(h.h)(R,{stores:this.props.stores,story:d,key:"story-edit-"+d.id,callback:this.doneEdit})),i[d.id]&&Object(h.h)("div",{class:"clearfix mt-3 mb-3"},Object(h.h)("button",{class:"btn btn-danger float-left",onClick:this.deleteStory,"data-id":d.id},Object(h.h)("i",{class:"fas fa-trash-alt"})," Delete"),Object(h.h)("button",{class:"btn btn-secondary float-right",onClick:this.toggleDeleteStory,"data-id":d.id},Object(h.h)("i",{class:"fas fa-times-circle"})," Cancel"))))):Object(h.h)(t,null,(!d.type||1==d.type)&&Object(h.h)(A,{stores:this.props.stores,story:d,key:"story-regular-view-"+d.id,likeStory:this.likeStory,likeRef:n,keys:c}),2==d.type&&Object(h.h)(E,{stores:this.props.stores,story:d,key:"story-ad-view-"+d.id,likeStory:this.likeStory,likeRef:n,keys:c}),3==d.type&&Object(h.h)(P,{stores:this.props.stores,story:d,key:"story-article-view-"+d.id,likeStory:this.likeStory,likeRef:n,keys:c}),Object(h.h)("div",{class:"d-flex justify-content-between mt-2"},Object(h.h)("div",{class:"mr-2"},Object(h.h)(x.a,{stores:this.props.stores,likes:W,comments:$,type:"story",onTeamClick:u,onUserClick:g})),Q>0&&Object(h.h)(t,null,Object(h.h)("div",null,Object(h.h)(S.a,{stores:this.props.stores,views:Q,object:d,type:"story",isTeamAdmin:M,isAdmin:k,onTeamClick:u,onUserClick:g})))),l[d.id]&&Object(h.h)(t,null,Object(h.h)("small",null,Object(h.h)("div",{class:"alert alert-info",role:"alert"},Object(h.h)("span",{class:"display-4 float-left"},Object(h.h)("i",{class:"fas fa-exclamation-triangle mr-3 mb-3"})),Object(h.h)("p",null,Object(h.h)(p.c,{id:"story.alert-text-1"},"Your team is not visible and it's not possible to request friendship with your team.")),Object(h.h)("p",null,Object(h.h)(p.c,{id:"story.alert-text-2"},"If you want to make your team visible so other can request to follow your team, you can find the setting here:")),Object(h.h)("p",null,Object(h.h)("a",{href:"/teams/edit/"+T.id},Object(h.h)(p.c,{id:"story.alert-text-3"},"Edit team")))))),Object(h.h)("div",null,Object(h.h)("div",{class:"row"},Object(h.h)("div",{class:"col text-center"},Object(h.h)("button",{type:"button",class:`storyImage btn btn-sm btn-outline-${V?"primary":"secondary"} btn-lg btn-block ${V?"text-primary":""} text-overflow`,"data-id":d.id,onClick:this.likeStory},Object(h.h)("i",{class:(V?"text-primary fas":"far")+" fa-thumbs-up"})," ",V?Object(h.h)(p.c,{id:"comments.has-liked"},"Liked"):Object(h.h)(p.c,{id:"comments.like"},"Lik"))),Object(h.h)("div",{class:"col text-center"},Object(h.h)("button",{type:"button",class:"btn btn-sm btn-outline-secondary btn-block text-overflow","data-id":d.id,onClick:this.toggleAddComment},Object(h.h)("i",{class:"fas fa-comment"})," ",Object(h.h)(p.c,{id:"comments.comment-add"},"Kommentar"))),I?Object(h.h)(t,null,Object(h.h)("div",{class:"col text-center"},Object(h.h)("button",{class:"btn btn-sm btn-outline-secondary btn-block text-overflow",onClick:this.shareLink,"data-url":"https://themusher.app/share/story/"+d.uuidv4,"data-title":"title: "+d.title},Object(h.h)("i",{class:"fas fa-share"})," ",Object(h.h)(p.c,{id:"story.share"},"Del")))):Object(h.h)(t,null,Object(h.h)("div",{class:"col text-center"},Object(h.h)("a",{class:"btn btn-sm btn-outline-secondary btn-block text-overflow",href:"https://themusher.app/share/story/"+d.uuidv4,target:"_blank",rel:"noreferrer","data-native":!0},Object(h.h)("i",{class:"fas fa-share"})," ",Object(h.h)(p.c,{id:"story.share"},"Del")))))),Object(h.h)("div",{class:"mt-2"},Object(h.h)(y.a,{stores:this.props.stores,story:d,col:"10",offset:"2",compact:!1,showAllComments:b,initCall:this.closeAllAddComments}),e[d.id]&&Object(h.h)(v.a,{stores:this.props.stores,story:d,inputRef:t=>this.inputRef[d.id]=t,inputRefObject:this.inputRef,col:"10",offset:"2",key:"story-comment-"+d.id}))))}})||d;e.a=L}).call(this,s("hosL").Fragment)},P9Fo:function(t,e,s){"use strict";(function(t){var a,o=s("hosL"),i=s("Utv1"),l=s("/eY4"),n=(s("cneo"),s("OhSV")),c=s("fh8t"),r=s.n(c),d=(s("go65"),s("ZOvn"));let h=Object(l.a)(a=class extends o.Component{constructor(t){var e;super(t),e=this,this.pollStory=async function(t){const{storyId:s}=e.props,{storyStore:a}=e.props.stores,{line:o}=t.target.closest("button").dataset;await a.pollStory({id:s,line:o})},this.toggleResult=()=>{const{viewResult:t}=this.state;this.setState({viewResult:!t})},this.state={},this.inputRef={}}render(){const{viewResult:e}=this.state,{story:s,opts:a,content:l,selectedImageIdx:c}=this.props,{userStore:h}=this.props.stores,{user:m}=h,{language:b="en"}=m,u=l.split("\n").map(t=>t.trim().replace(/^\-\s*/g,"")),p=s.polls&&s.polls.findIndex(t=>t.user===m.id)>-1,g=s.polls?s.polls.length:0;let O=0;u.forEach(t=>{const e=100*(s.polls?s.polls.filter(e=>e.line===d.a.md5(t)).length/g:0);e>O&&(O=e)});const j=a.days?parseInt(a.days,10):7,f=i.a.addDays(s.date,j),y=f<new Date,v=new RegExp(/{{img\./i);return Object(o.h)(t,null,Object(o.h)("div",{class:"w-100 my-4 storyPoll"},y||p||e?Object(o.h)(t,null,u&&u.map(e=>{const a=s.polls&&s.polls.findIndex(t=>t.user===m.id&&t.line===d.a.md5(e))>-1,l=(s.polls?s.polls.filter(t=>t.line===d.a.md5(e)).length:0)/g*100;return Object(o.h)(t,null,Object(o.h)("div",{class:"progress position-relative my-2 ",style:"height: 1.5em; font-size: 1.3em;"},Object(o.h)("span",{class:"position-absolute",style:"right: 10px;"}," ",i.a.format(l||0,1),"%"),Object(o.h)("span",{class:"position-absolute",style:"left: 10px;"},Object(o.h)(r.a,{markdown:d.a.replaceImages(`${e} ${a?"<i class='fas fa-check-circle' />":""}`,s.images,b,!1),markdownOpts:d.a.getMarkdownOptions()})),Object(o.h)("div",{class:"progress-bar "+(O===l?"bg-primary":"bg-secondary"),role:"progressbar",style:`width: ${l}%;`,"aria-valuenow":l,"aria-valuemin":"0","aria-valuemax":"100"})))}),Object(o.h)("div",{class:"w-100 mt-3 text-muted d-flex justify-content-start"},Object(o.h)("div",null,Object(o.h)("small",null,i.a.format(g,0)," ",1===g?Object(o.h)(n.c,{id:"story.poll"},"vote"):Object(o.h)(n.c,{id:"story.polls"},"votes"))),y?Object(o.h)(t,null,Object(o.h)("div",{class:"ml-2"},Object(o.h)("small",null,"- ",Object(o.h)(n.c,{id:"story.finished"},"Finished")))):Object(o.h)(t,null,Object(o.h)("div",{class:"ml-2"},Object(o.h)("small",null,"- ",i.a.formatDistance(f,new Date,{},{extended:!0})," ",Object(o.h)(n.c,{id:"story.left"},"left"))),!p&&Object(o.h)("div",{class:"ml-2",onClick:this.toggleResult},Object(o.h)("small",null,"- ",Object(o.h)(n.c,{id:"story.view-vote"},"View vote")))))):Object(o.h)(t,null,u&&u.map((e,a)=>Object(o.h)(t,null,Object(o.h)("button",{class:`btn btn-block ${v.test(e)&&a===c?"btn-outline-success":"btn-outline-primary"} rounded-pill`,onClick:this.pollStory,"data-line":d.a.md5(e)},v.test(e)&&a===c&&Object(o.h)("span",{class:"float-right"},Object(o.h)("i",{class:"fas fa-eye"})),Object(o.h)(r.a,{markdown:d.a.replaceImages(e,s.images,b,!1),markdownOpts:d.a.getMarkdownOptions()})))),Object(o.h)("div",{class:"w-100 mt-3 text-muted d-flex justify-content-start"},Object(o.h)("div",null,Object(o.h)("small",null,i.a.format(g,0)," ",1===g?Object(o.h)(n.c,{id:"story.poll"},"vote"):Object(o.h)(n.c,{id:"story.polls"},"votes"))),y?Object(o.h)(t,null,Object(o.h)("div",{class:"ml-2"},Object(o.h)("small",null,"- ",Object(o.h)(n.c,{id:"story.finished"},"Finished")))):Object(o.h)(t,null,Object(o.h)("div",{class:"ml-2"},Object(o.h)("small",null,"- ",i.a.formatDistance(f,new Date,{},{extended:!0})," ",Object(o.h)(n.c,{id:"story.left"},"left")))),Object(o.h)("div",{class:"ml-2",onClick:this.toggleResult},Object(o.h)("small",null,"- ",Object(o.h)(n.c,{id:"story.view-results"},"View results")))))))}})||a;e.a=h}).call(this,s("hosL").Fragment)}}]);
//# sourceMappingURL=21.chunk.76df2.esm.js.map