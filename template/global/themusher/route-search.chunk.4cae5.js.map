{"version":3,"sources":["webpack:///./components/team/index.js","webpack:///./routes/search/index.js"],"names":["Team","observer","requestFollowTeam","e","preventDefault","stopPropagation","props","stores","teamStore","user","userStore","teamId","parseInt","target","parentElement","dataset","team","followRequest","setState","requestSent","getButton","text","state","skipHome","isYourTeam","members","indexOf","id","isFollowing","followers","isBlocked","blockedFollowers","hasRequestedFollow","followRequests","findIndex","class","type","onClick","unFollowTeam","disabled","data-team","public","render","this","showButton","publicUsers","showLocation","showMembers","currentMonth","Date","getMonth","currentYear","getFullYear","month","year","seasonStart","workoutSummary","findWorkoutSummary","language","teamAmbition","findTeamAmbition","ambition","ambitions","teamType","findTeamType","teamUser","find","teamUserDisplayName","mu","displayName","image","getImage","priority","url","style","href","name","place","country","dogs","length","distanceKm","value","elevation","duration","util","secToHms","speedAvg","Component","initialState","submenu","hits","searchText","Search","loadAll","allData","names","idx","appState","storyStore","search","getSearch","localUpdateField","publicTeams","searchResultStories","searchResultDogs","searchResultWorkouts","searchResultTeams","searchResultTracks","map","a","Math","max","reduce","partialSum","route","chooseSubmenu","menu","componentDidMount","componentWillReceiveProps","nextProps","fields","placeholder","onInput","linkState","data-menu","dog","uuidv4","workout","feed","track","story","key"],"mappings":"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","file":"route-search.chunk.4cae5.js","sourcesContent":["import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport { Text, Localizer } from 'preact-i18n';\n\nimport Speed from '../../components/data/speed';\nimport Elevation from '../../components/data/elevation';\nimport Weight from '../../components/data/weight';\nimport Distance from '../../components/data/distance';\nimport Temperature from '../../components/data/temperature';\n\nimport mu from '../../lib/musher-util';\n\n@observer\nclass Team extends Component {\n    requestFollowTeam = (e) => {\n        e.preventDefault();\n        e.stopPropagation();\n        const { teamStore, userStore } = this.props.stores;\n        const { user } = userStore;\n        const teamId = parseInt(e.target.parentElement.dataset.team || e.target.dataset.team, 10);\n        teamStore.followRequest(teamId, user);\n        this.setState({ requestSent: true });\n    }\n\n    getButton = (text = '') => {\n        const { requestSent } = this.state;\n        const { userStore } = this.props.stores;\n        const { user } = userStore;\n        const { team, skipHome } = this.props;\n        const isYourTeam = team.members && team.members.indexOf(user.id) > -1;\n        const isFollowing = team.followers && team.followers.indexOf(user.id) > -1;\n        const isBlocked = team.blockedFollowers && team.blockedFollowers.indexOf(user.id) > -1;\n        const hasRequestedFollow = requestSent || team.followRequests && team.followRequests.findIndex(e => e.id === user.id) > -1;\n\n        if (isYourTeam) {\n            if (skipHome) {\n                return '';\n            }\n            return (\n                <i class='fas fa-home' />\n            );\n        }\n        if (isFollowing) {\n            return (\n                <button\n                    type='button'\n                    class={`btn btn-sm btn-outline-secondary float-right`}\n                    onClick={this.unFollowTeam}\n                    disabled='true'\n                    data-team={team.id}\n                >\n                    <i class='fas fa-link mr-2' />\n                    <Text id='teams.connect.is-following'>Følger</Text> {text}\n                </button>\n            );\n        }\n        if (isBlocked) {\n            return '';\n            // return (\n            //     <button\n            //         class={`btn btn-block btn-outline-secondary float-right`}\n            //         disabled='true'\n            //     >\n            //         <i class='fas fa-hand-paper mr-2' />\n            //         <Text id='teams.connect.is-blocked'>Blokkert</Text> {text}\n            //     </button>\n            // );\n        }\n        if (hasRequestedFollow) {\n            return (\n                <button\n                    type='button'\n                    class={`btn btn-sm btn-outline-secondary float-right`}\n                    disabled='true'\n                >\n                    <i class='fas fa-hourglass-half mr-2' />\n                    <Text id='teams.connect.has-requested'>Venter på godkjenning</Text> {text}\n                </button>\n            );\n        }\n        if (team.public) {\n            return (\n                <button\n                    type='button'\n                    class={`btn btn-sm btn-outline-success float-right`}\n                    onClick={this.requestFollowTeam}\n                    data-team={team.id}\n                >\n                    <i class='far fa-hand-point-right mr-2' />\n                    <Text id='teams.connect.follow'>Følg</Text> {text}\n                </button>\n            );\n        }\n    }\n\n    render() {\n        const { team, showButton, publicUsers = [], showLocation, showMembers } = this.props;\n        const { teamStore, userStore } = this.props.stores;\n\n        const currentMonth = new Date().getMonth() + 1;\n        const currentYear = new Date().getFullYear();\n\t\tconst { month = currentMonth, year = currentYear } = this.props;\n\t\tconst seasonStart = parseInt(month < 8 ? year - 1 : year, 10);\n\n        const workoutSummary = teamStore.findWorkoutSummary(team.id, seasonStart) || {};\n        const { user } = userStore;\n        const { language = 'en' } = user;\n        const teamAmbition = userStore.findTeamAmbition({ ambition: team.ambitions, language });\n        const teamType = userStore.findTeamType({ type: team.type, language });\n\n        const teamUser = publicUsers.find(e => e.id === team.user);\n        const teamUserDisplayName = mu.displayName(teamUser);\n        const image = mu.getImage({ user: teamUser, team, priority: 'user' });\n\n        const { url = `/teams/${team.id}` } = this.props;\n\n        return (\n            <div class='w-100 mb-3'>\n                <div class='row'>\n                    <div class='col-12 col-sm-8 col-lg-6 offset-sm-2 offset-lg-3 d-flex mb-0 position-relative'>\n                        <div class='position-relative d-flex flex-grow-1'>\n                            {/* {JSON.stringify(team, null, 4)} */}\n                            <div class={`text-center border rounded-circle imageRounded`} style={image ? `background-image: url(\"${image}\"); background-size: cover;` : ''}>\n                                {!image && <i class='fas fa-users text-muted mt-3' style='font-size: 40px;' />}\n                            </div>\n                            <div class='flex-grow-1 pl-3' style='line-height: 1.2em;'>\n                                <a class='stretched-link' href={url}>\n                                    <h5 class='mb-1' style='line-height: 1.0em;'>{team.name}</h5>\n                                </a>\n                                {showLocation && <div>\n                                    {(team.place || team.country) && <span class='mr-3'>\n                                        <i class='fas fa-map-marker-alt' />  {team.place} {team.place ? `, ${team.country}` : team.country}\n                                    </span>}\n                                </div>}\n                                {showMembers && <div>\n                                    {teamUser && <span class='mr-2'>\n                                        <i class='fas fa-user' /> {teamUserDisplayName}\n                                    </span>}\n\n                                    {/* {team.members && team.members.length > 1 && team.members.slice(1, 10).map(member => {\n                                        const u = publicUsers.find(e => e.id === member);\n                                        const teamUserDisplayName = mu.displayName(u);\n                                        return (<span class='badge badge-secondary font-weight-light mr-2'>\n                                            <i class='fas fa-user' /> {teamUserDisplayName}\n                                        </span>);\n                                    })} */}\n                                </div>}\n                                <div>\n                                    {teamType && <span class='badge badge-pill badge-secondary'>{teamType}</span>}\n                                    {teamAmbition && <span class='badge badge-pill badge-secondary ml-2'>{teamAmbition}</span>}\n                                </div>\n                                <small class='text-muted'>\n                                    {team && team.dogs && <span class=''><i class='fas fa-dog' /> {team.dogs.length}</span>} \n                                    {team && team.members && <span class='ml-2'><i class='fas fa-user' /> {team.members.length}</span>}\n\n                                    {workoutSummary && workoutSummary.distanceKm > 0 && <span class='ml-2'><i class='fas fa-road' /> <Distance stores={this.props.stores} value={workoutSummary.distanceKm} /></span>}\n                                    {workoutSummary && workoutSummary.elevation > 0 && <span class='ml-2'><i class='fas fa-mountain' /> <Elevation stores={this.props.stores} value={workoutSummary.elevation} /></span>}\n                                    {workoutSummary && workoutSummary.duration > 0 && <span class='ml-2'><i class='fas fa-clock' /> {util.secToHms(workoutSummary.duration)}</span>}\n                                    {workoutSummary && workoutSummary.speedAvg > 0 && <span class='ml-2'><i class='fas fa-tachometer-alt' /> <Speed stores={this.props.stores} value={workoutSummary.speedAvg} /></span>}\n                                </small>\n                            </div>\n                        </div>\n                        {showButton && <div>\n                            {this.getButton()}\n                        </div>}\n                    </div>\n                </div>\n            </div>\n        );\n    }\n}\n\nexport default Team;\n","import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport { Text, Localizer } from 'preact-i18n';\nimport linkState from 'linkstate';\n\nimport { route } from 'preact-router';\n\nimport Dog from '../../components/dog';\nimport Workout from '../../components/workout';\nimport Team from '../../components/team';\nimport Track from '../../components/track';\nimport User from '../../components/user';\nimport Story from '../../components/story/publicStory';\n\nimport TeamPublicFeedLine from '../../components/team/publicFeedLine';\n\nconst initialState = {\n\tsubmenu: 'dogs',\n\thits: 0,\n\tsearchText: '',\n};\n\n@observer\nclass Search extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            ...initialState,\n        };\n    }\n\n\tloadAll = async (props = this.props) => {\n\t\tconst { appState, storyStore, teamStore } = this.props.stores;\n\t\tconst { search } = props;\n\t    await appState.getSearch(search);\n\t\tconst { publicTeams, publicUsers } = appState;\n\t\tstoryStore.localUpdateField('publicTeams', publicTeams);\n\t\tstoryStore.localUpdateField('publicUsers', publicUsers);\n\t\tteamStore.localUpdateField('publicTeams', publicTeams);\n\t\tteamStore.localUpdateField('publicUsers', publicUsers);\n\n\t\tconst { searchResultStories, searchResultDogs, searchResultWorkouts = [], searchResultTeams, searchResultTracks } = appState;\n\t\tconst allData = [searchResultStories, searchResultDogs, searchResultWorkouts, searchResultTeams, searchResultTracks];\n\t\tconst names = ['stories', 'dogs', 'workouts', 'teams', 'tracks', 'users'];\n\t\tconst idx = allData\n\t\t\t.map(a => a.length)\n\t\t\t.indexOf(Math.max(...allData.map(a => a.length)));\n\t\tconst hits = allData.map(a => a.length).reduce((partialSum, a) => partialSum + a, 0);\n\t\tthis.setState({\n\t\t\tsearchText: search,\n\t\t\tsubmenu: names[idx],\n\t\t\thits,\n\t\t});\n\t}\n\n\tsearch = () => {\n\t\tconst { searchText } = this.state;\n\t\troute(`/search/${searchText}`);\n\t}\n\n\tchooseSubmenu = (e) => {\n\t\tconst submenu = e.target.parentElement.dataset.menu || e.target.dataset.menu;\n\t\tthis.setState({ submenu });\n\t}\n\n\tcomponentDidMount() {\n\t\tthis.loadAll();\n\t}\n\n\tcomponentWillReceiveProps(nextProps) {\n        // console.log('componentWillReceiveProps', nextProps);\n        if (nextProps.search !== this.props.search) {\n            this.loadAll(nextProps);\n        }\n    }\n\n\trender() {\n\t\tconst { appState, userStore } = this.props.stores;\n\t\tconst { search } = this.props;\n\n\t\tconst { isAdmin } = userStore;\n\t\tconst { searchResultStories, searchResultDogs, searchResultWorkouts = [], searchResultTeams, searchResultTracks, publicUsers, publicTeams } = appState;\n\t\tconst { submenu, hits, searchText } = this.state;\n\t\treturn (\n\t\t\t<div class='container-fluid' style='margin-bottom: 200px; margin-top: 60px;'>\n\t\t\t\t<div class='row'>\n\t\t\t\t\t<div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-0 mb-2'>\n\t\t\t\t\t\t<h1><Text id='search.title'>Search</Text></h1>\n\t\t\t\t\t\t<h5 class='my-3'><Text id='search.search-for' fields={{ search, hits }}>{hits} in your search for \"{search}\"</Text></h5>\n\n\t\t\t\t\t\t<div class='d-flex justify-content-center py-3'>\n\t\t\t\t\t\t\t<Localizer>\n\t\t\t\t\t\t\t\t<input class='form-control form-control mr-2' type='search' placeholder={<Text id='header.search-placeholder'>Søk etter det meste...</Text>}\n\t\t\t\t\t\t\t\t\tvalue={searchText}\n\t\t\t\t\t\t\t\t\tonInput={linkState(this, 'searchText')}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</Localizer>\n\t\t\t\t\t\t\t<button class='btn btn-outline-success' type='button'\n\t\t\t\t\t\t\t\tonClick={this.search}\n\t\t\t\t\t\t\t><Text id='header.search'>Søk</Text></button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 my-3'>\n\t\t\t\t\t\t<div class='row'>\n\t\t\t\t\t\t\t<div class='w-100 overflow-hidden'>\n                                <div\n                                    class='d-flex flex-row flex-nowrap pb-2 px-1'\n                                    style='overflow: auto; scroll-snap-type: x mandatory;'\n                                >\n\t\t\t\t\t\t\t\t\t<div class='col px-0 pt-2'>\n\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\tclass={`btn btn-block rounded-pill-left rounded-none ${submenu === 'dogs' ? 'btn-primary' : 'btn-outline-primary'} text-nowrap`}\n\t\t\t\t\t\t\t\t\t\t\tstyle='text-overflow: ellipsis; overflow: hidden;'\n\t\t\t\t\t\t\t\t\t\t\tdata-menu='dogs'\n\t\t\t\t\t\t\t\t\t\t\tonClick={this.chooseSubmenu}\n\t\t\t\t\t\t\t\t\t\t><i class='fas fa-dog' /> <Text id='search.dogs'>Dogs</Text> ({searchResultDogs.length || 0})</button>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t{/* <div class='col px-0 pt-2'>\n\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\tclass={`btn btn-block rounded-none ${submenu === 'workouts' ? 'btn-primary' : 'btn-outline-primary'} text-nowrap`}\n\t\t\t\t\t\t\t\t\t\t\tstyle='text-overflow: ellipsis; overflow: hidden;'\n\t\t\t\t\t\t\t\t\t\t\tdata-menu='workouts'\n\t\t\t\t\t\t\t\t\t\t\tonClick={this.chooseSubmenu}\n\t\t\t\t\t\t\t\t\t\t><i class='fas fa-running' /> <Text id='search.workouts'>Workouts</Text> ({searchResultWorkouts.length || 0})</button>\n\t\t\t\t\t\t\t\t\t</div> */}\n\t\t\t\t\t\t\t\t\t<div class='col px-0 pt-2'>\n\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\tclass={`btn btn-block rounded-none ${submenu === 'teams' ? 'btn-primary' : 'btn-outline-primary'} text-nowrap`}\n\t\t\t\t\t\t\t\t\t\t\tstyle='text-overflow: ellipsis; overflow: hidden;'\n\t\t\t\t\t\t\t\t\t\t\tdata-menu='teams'\n\t\t\t\t\t\t\t\t\t\t\tonClick={this.chooseSubmenu}\n\t\t\t\t\t\t\t\t\t\t><i class='fas fa-users' /> <Text id='search.teams'>Teams</Text> ({searchResultTeams.length || 0})</button>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div class='col px-0 pt-2'>\n\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\tclass={`btn btn-block rounded-none ${submenu === 'tracks' ? 'btn-primary' : 'btn-outline-primary'} text-nowrap`}\n\t\t\t\t\t\t\t\t\t\t\tstyle='text-overflow: ellipsis; overflow: hidden;'\n\t\t\t\t\t\t\t\t\t\t\tdata-menu='tracks'\n\t\t\t\t\t\t\t\t\t\t\tonClick={this.chooseSubmenu}\n\t\t\t\t\t\t\t\t\t\t><i class='fas fa-map-marked-alt' /> <Text id='search.tracks'>Tracks</Text> ({searchResultTracks.length || 0})</button>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div class='col px-0 pt-2'>\n\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\tclass={`btn btn-block rounded-pill-right rounded-none ${submenu === 'stories' ? 'btn-primary' : 'btn-outline-primary'} text-nowrap`}\n\t\t\t\t\t\t\t\t\t\t\tstyle='text-overflow: ellipsis; overflow: hidden;'\n\t\t\t\t\t\t\t\t\t\t\tdata-menu='stories'\n\t\t\t\t\t\t\t\t\t\t\tonClick={this.chooseSubmenu}\n\t\t\t\t\t\t\t\t\t\t><i class='fas fa-comments' /> <Text id='search.stories'>Stories</Text> ({searchResultStories.length || 0})</button>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t{submenu === 'dogs' && <>\n\t\t\t\t\t\t<div class='col-12'>\n\t\t\t\t\t\t\t{(!searchResultDogs || searchResultDogs.length === 0) && <>\n\t\t\t\t\t\t\t\t<div class='text-center text-muted'>\n\t\t\t\t\t\t\t\t\t<div class='display-1'>\n\t\t\t\t\t\t\t\t\t\t<i class='fas fa-dog' />\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<h3 class='font-weight-lighter'>\n\t\t\t\t\t\t\t\t\t\t<Text id='search.no-dogs-found'>No dogs found.</Text>\n\t\t\t\t\t\t\t\t\t</h3>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</>}\n\t\t\t\t\t\t\t{searchResultDogs && searchResultDogs.map(dog => (\n\t\t\t\t\t\t\t\t<Dog stores={this.props.stores} dog={dog} url={`/dogs/public/${dog.uuidv4}`} />\n\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</>}\n\t\t\t\t\t{submenu === 'workouts' && <>\n\t\t\t\t\t\t<div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-0 mb-2'>\n\t\t\t\t\t\t\t{(!searchResultWorkouts || searchResultWorkouts.length === 0) && <>\n\t\t\t\t\t\t\t\t<div class='text-center text-muted'>\n\t\t\t\t\t\t\t\t\t<div class='display-1'>\n\t\t\t\t\t\t\t\t\t\t<i class='fas fa-running' />\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<h3 class='font-weight-lighter'>\n\t\t\t\t\t\t\t\t\t\t<Text id='search.no-workouts-found'>No workouts found.</Text>\n\t\t\t\t\t\t\t\t\t</h3>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</>}\n\t\t\t\t\t\t\t{searchResultWorkouts && searchResultWorkouts.map((workout, idx) => (\n\t\t\t\t\t\t\t\t<div class='row mb-4'>\n\t\t\t\t\t\t\t\t\t<div class='col-12 py-3'>\n\t\t\t\t\t\t\t\t\t\t<TeamPublicFeedLine\n\t\t\t\t\t\t\t\t\t\t\tstores={this.props.stores}\n\t\t\t\t\t\t\t\t\t\t\tfeed={workout}\n\t\t\t\t\t\t\t\t\t\t\tidx={idx}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</>}\n\t\t\t\t\t{submenu === 'teams' && <>\n\t\t\t\t\t\t<div class='col-12'>\n\t\t\t\t\t\t\t{(!searchResultTeams || searchResultTeams.length === 0) && <>\n\t\t\t\t\t\t\t\t<div class='text-center text-muted'>\n\t\t\t\t\t\t\t\t\t<div class='display-1'>\n\t\t\t\t\t\t\t\t\t\t<i class='fas fa-users' />\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<h3 class='font-weight-lighter'>\n\t\t\t\t\t\t\t\t\t\t<Text id='search.no-teams-found'>No teams found.</Text>\n\t\t\t\t\t\t\t\t\t</h3>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</>}\n\t\t\t\t\t\t\t{searchResultTeams && searchResultTeams.map(team => <>\n\t\t\t\t\t\t\t\t<Team\n\t\t\t\t\t\t\t\t\tstores={this.props.stores}\n\t\t\t\t\t\t\t\t\tteam={team}\n\t\t\t\t\t\t\t\t\turl={`/teams/public/${team.uuidv4}`}\n\t\t\t\t\t\t\t\t\tshowButton={true}\n\t\t\t\t\t\t\t\t\tpublicUsers={publicUsers}\n\t\t\t\t\t\t\t\t\tshowMembers={1}\n\t\t\t\t\t\t\t\t\tshowLocation={1}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</>)}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</>}\n\t\t\t\t\t{submenu === 'tracks' && <>\n\t\t\t\t\t\t<div class='col-12'>\n\t\t\t\t\t\t\t{(!searchResultTracks || searchResultTracks.length === 0) && <>\n\t\t\t\t\t\t\t\t<div class='text-center text-muted'>\n\t\t\t\t\t\t\t\t\t<div class='display-1'>\n\t\t\t\t\t\t\t\t\t\t<i class='fas fa-map-marked-alt' />\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<h3 class='font-weight-lighter'>\n\t\t\t\t\t\t\t\t\t\t<Text id='search.no-tracks-found'>No tracks found.</Text>\n\t\t\t\t\t\t\t\t\t</h3>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</>}\n\t\t\t\t\t\t\t{searchResultTracks && searchResultTracks.map(track => (\n\t\t\t\t\t\t\t\t<Track stores={this.props.stores} track={track} />\n\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</>}\n\t\t\t\t\t{submenu === 'stories' && <>\n\t\t\t\t\t\t<div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-0 mb-2'>\n\t\t\t\t\t\t\t{(!searchResultStories || searchResultStories.length === 0) && <>\n\t\t\t\t\t\t\t\t<div class='text-center text-muted'>\n\t\t\t\t\t\t\t\t\t<div class='display-1'>\n\t\t\t\t\t\t\t\t\t\t<i class='fas fa-comments' />\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<h3 class='font-weight-lighter'>\n\t\t\t\t\t\t\t\t\t\t<Text id='search.no-stories-found'>No stories found.</Text>\n\t\t\t\t\t\t\t\t\t</h3>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</>}\n\t\t\t\t\t\t\t{searchResultStories && searchResultStories.map(story => (\n\t\t\t\t\t\t\t\t<div class='row mb-4'>\n\t\t\t\t\t\t\t\t\t<div class='col-12 py-3'>\n\t\t\t\t\t\t\t\t\t\t<Story\n\t\t\t\t\t\t\t\t\t\t\tstores={this.props.stores}\n\t\t\t\t\t\t\t\t\t\t\tstory={story}\n\t\t\t\t\t\t\t\t\t\t\tkey={`story-detail-${story.id}`}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</>}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nexport default Search;\n"],"sourceRoot":""}