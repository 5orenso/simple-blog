(window.webpackJsonp=window.webpackJsonp||[]).push([[72],{ISGx:function(t,e,s){"use strict";(function(t){function o(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,o)}return s}function a(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?o(Object(s),!0).forEach((function(e){n(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):o(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}function n(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}var r,i=s("hosL"),l=s("Utv1"),c=s("/eY4"),d=s("cneo"),h=s("OhSV"),b=s("fh8t"),u=s.n(b),m=s("Y3FI"),p=s("s4FZ"),O=s("ZQlJ"),f=s("sqi2"),j=s("/922"),g=s("eQ6k"),w=s("+JSK"),v=s("vY+r"),y=s("nHdA"),k=s("irB3"),x=s("UwwE"),S=s("8Lgr"),C=s("QkTp"),T=s("ZOvn");const D={showAddComment:{},likeWorkout:{},idxSuggestion:0,idxAd:4,limit:15,offset:0,hasFollowSugguestions:!1,hasAd:!1,sessionid:(new Date).getTime()};let P=Object(c.a)(r=class extends i.Component{constructor(t){var e;super(t),e=this,this.toggleDate=t=>{t.stopPropagation(),t.preventDefault();const{showDate:e}=this.state;this.setState({showDate:!e})},this.likeWorkout=async function(t){const s=parseInt(t.target.closest(".imageContainer").dataset.id,10),{workoutStore:o}=e.props.stores,{likeWorkout:a}=e.state;a[s]=!0,e.setState({likeWorkout:a}),setTimeout(()=>{const{likeWorkout:t}=e.state;delete t[s],e.setState({likeWorkout:t})},1200);const n=await o.likeWorkout({id:s});n&&200===n.status&&e.addLikeToFeed(s,n.data)},this.addCommentToFeed=({type:t,workout:e,response:s,commentId:o,replyId:a})=>{const{teamStore:n}=this.props.stores;switch(t){case"likeComment":n.addLikeToComment({id:e.id,data:s.data,commentId:o});break;case"likeReply":n.addLikeToCommentReply({id:e.id,data:s.data,commentId:o,replyId:a});break;default:o?n.addCommentToWorkoutComment({id:e.id,data:s.data,commentId:o}):n.addCommentToWorkout({id:e.id,data:s.data})}},this.addLikeToFeed=(t,e)=>{const{teamStore:s}=this.props.stores;s.addLikeToWorkout({id:t,data:e})},this.toggleAddComment=t=>{const e=t.target.closest("button").dataset.id,{showAddComment:s}=this.state;s[e]?delete s[e]:s[e]=!0,this.setState({showAddComment:s},()=>{this.inputRef[e]&&this.inputRef[e].focus()})},this.shareLink=t=>{const{url:e,title:s,text:o}=t.target.closest("button").dataset,{appState:a}=this.props.stores;a.shareUrl({url:e,title:s,text:o})},this.showWorkoutDetail=t=>{if("a"===t.target.localName)return!1;const e=t.target.closest("#workoutDetail");if(e){const{id:t}=e.dataset;t&&(console.log({target:e,id:t}),Object(m.route)("/workouts/public/"+t))}},this.translate=async function(t){t.preventDefault(),t.stopPropagation();const{feed:s={}}=e.props,{userStore:o,teamStore:a}=e.props.stores,{user:n}=o,r=await a.translate({object:s,user:n,field:"name"});let i;s.comment&&(i=await a.translate({object:s,user:n,field:"comment"})),e.setState({showOriginal:0,translatedTextName:r,translatedTextComment:i})},this.showOriginal=t=>{t.preventDefault(),t.stopPropagation(),this.setState({showOriginal:1})},this.state=a({},D),this.inputRef={},this.containerRef=null}render(){const{feed:e,onTeamClick:s=(()=>{}),onUserClick:o=(()=>{}),onDogClick:n=(()=>{})}=this.props,{showAddComment:r,showDate:c,likeWorkout:b,showOriginal:m,translatedTextName:D,translatedTextComment:P}=this.state,{teamStore:I,userStore:R,appState:q}=this.props.stores,{user:N,isAdmin:L}=R,{language:A="en"}=N,{hasShareApi:F}=q,{publicDogs:W}=I,$=I.findPublicTeam(e.team)||{},U=I.findPublicUser(e.user)||{},E=(R.findTeamAmbition({ambition:$.ambitions,language:A}),R.findTeamType({type:$.type,language:A})),M=!(!$||!$.members)&&$.members.some(t=>t===N.id),V=T.a.getImage({user:U,team:$,object:e,priority:"user"}),{likes:z,comments:B}=e,H=e.likes&&e.likes.findIndex(t=>t.user===N.id)>-1,Y=$&&$.followers?$.followers.length:0,Z=$.members&&$.members.indexOf(N.id)>-1,J=$&&$.followers&&$.followers.indexOf(N.id)>-1,G=$.followRequests&&$.followRequests.findIndex(t=>t.id===N.id)>-1,K=R.findEquipment({equipment:e.equipment,language:A}),Q=R.findEquipment({equipment:e.equipment,field:"icon"}),{gpxInfo:_={}}=e;let X,tt,et,st;U&&(X=T.a.displayNameShort(U),tt=T.a.displayName(U),et=T.a.displayName(U),U.settings&&U.uuidv4!==N.uuidv4&&(st=U.settings.hideProfile?null:"/inbox/"+U.uuidv4));const ot=[];if(e.mapImage&&ot.push(a(a({},e.mapImage),{},{type:"map"})),e.images){const t=Object(d.i)(e.images);ot.push(...t)}const{currentLocationGeocode:at={},yrWeather:nt=[]}=e,rt=T.a.getViews(e.statistics),it=T.a.getAdminData(e.statistics);if(!$||!$.name)return"";const lt=T.a.getTranslation({object:e,targetLang:A,field:"name"})||D;let ct=lt||e.name;let dt=T.a.getTranslation({object:e,targetLang:A,field:"comment"})||P||e.comment;return m&&(ct=e.name,dt=e.comment),Object(i.h)(t,null,Object(i.h)("div",{class:"d-flex position-relative"},Object(i.h)("div",{class:"text-center"},Object(i.h)("div",{class:"position-relative text-center border rounded-circle imageRounded imageRoundedMedium",style:V?`background-image: url("${V}"); background-size: cover;`:""},!V&&Object(i.h)("i",{class:"fas fa-users text-muted mt-2",style:"font-size: 20px;"}))),Object(i.h)("div",{class:"flex-grow-1 pl-3 text-overflow",style:"line-height: 1.2em;"},Object(i.h)("span",{class:"badge badge-pill badge-secondary float-right"},E),Object(i.h)("h5",{class:"mb-1 position-relative",style:"line-height: 1.0em;"},$.public?Object(i.h)(t,null,Object(i.h)("a",{href:"/teams/public/"+$.uuidv4,onClick:t=>s(t,$.uuidv4),class:"stretched-link"},$.name)):Object(i.h)(t,null,$.name)),Object(i.h)("div",{class:"mb-2"},e.date&&Object(i.h)("small",{class:"text-muted",onClick:this.toggleDate},c?l.a.formatDate(e.date,{locale:"no-NB",hour12:!1,hour:"2-digit",minute:"2-digit"}):l.a.formatDistance(e.date,new Date,{locale:"no-NB"})),1===e.public?Object(i.h)(t,null,Object(i.h)("small",{class:"ml-2 text-muted"},Object(i.h)("i",{class:"fas fa-globe-europe"}))):Object(i.h)(t,null,Object(i.h)("small",{class:"ml-2 text-muted"},Object(i.h)("i",{class:"fas fa-users"})," (",l.a.format(Y),")")),et&&Object(i.h)(t,null,Object(i.h)("small",{class:"ml-2 text-muted"},st?Object(i.h)(t,null,Object(i.h)("i",{class:"fas fa-user"})," ",Object(i.h)("a",{href:st},et)):Object(i.h)(t,null,Object(i.h)("i",{class:"fas fa-user"})," ",et))),Object(i.h)("small",{class:"text-muted"},e.equipment>0&&Object(i.h)(t,null,Object(i.h)("i",{class:Q+" ml-2"})," ",K),e.dogs>0&&Object(i.h)(t,null,Object(i.h)("i",{class:"fas fa-dog ml-2"})," ",e.dogs.length),e.track>0&&Object(i.h)(t,null,Object(i.h)("i",{class:`fas fa-map-marked text-${e.track>0?"success":"danger"} ml-2`})),e.sledWeight>0&&Object(i.h)(t,null,Object(i.h)("i",{class:"fas fa-sleigh ml-2"})," ",Object(i.h)(x.a,{stores:this.props.stores,value:e.sledWeight})),0!==e.temperature&&Object(i.h)(t,null,Object(i.h)("i",{class:"fas fa-temperature-low ml-2"})," ",Object(i.h)(C.a,{stores:this.props.stores,value:e.temperature})),e.dogs&&e.dogs.length>0&&Object(i.h)(t,null,Object(i.h)("i",{class:"fas fa-dog ml-2"})," ",l.a.format(e.dogs.length,0)),at&&at.formattedCounty&&Object(i.h)(t,null,Object(i.h)("i",{class:"fas fa-map-marker-alt ml-2"})," ",at.formattedCounty),e.moonIllumination&&e.moonIllumination.phaseIcon&&Object(i.h)("span",{class:"float-right ml-2"},e.moonIllumination.phaseIcon))),L&&Object(i.h)("div",{class:"d-flex flex-row flex-nowrap bg-light border-top border-bottom py-2",style:"overflow: auto;"},Object(i.h)("small",{class:"text-muted mr-2"},"Adm:"),at&&at.formatted_address&&Object(i.h)(t,null,Object(i.h)("small",{class:"text-muted"},Object(i.h)("i",{class:"fas fa-map-marker-alt"})," ",at.formatted_address)),U.deviceInfo&&Object(i.h)(t,null,Object(i.h)("span",{class:"badge badge-secondary ml-1 float-right font-weight-light"},["platform","manufacturer","model"].map(e=>Object(i.h)(t,null,Object(i.h)("span",{class:"ml-1 text-white"},U.deviceInfo[e]))))),it&&Object(i.h)(t,null,Object(i.h)("small",{class:"ml-2 text-muted"},"V: ",it.count),Object(i.h)("small",{class:"ml-2 text-muted"},"R: ",it.ranking," ",l.a.isNumber(it.rankingTrend)&&Object(i.h)(t,null,Object(i.h)("i",{class:T.a.getClassForTrend(it.rankingTrend)}))),Object(i.h)("small",{class:"ml-2 text-muted"},"D: ",l.a.format(it.durationAvg/1e3,1),"s ",l.a.isNumber(it.durationAvgTrend)&&Object(i.h)(t,null,Object(i.h)("i",{class:T.a.getClassForTrend(it.durationAvgTrend)}))),e.statisticsCurrent&&e.statisticsCurrent.totalInteractions>0&&Object(i.h)("small",{class:"ml-2 text-muted"},"S: ",l.a.format(e.statisticsCurrent.totalInteractions,0)),e.shadowTags&&e.shadowTags.map(e=>Object(i.h)(t,null,Object(i.h)("span",{class:"badge badge-secondary ml-2 float-right font-weight-light"},e))))))),Object(i.h)("div",{class:"row mt-2"},Object(i.h)("div",{id:"workoutDetail",class:"clearfix col-12 font-weight-bold",style:"font-size: 1.2em;",onClick:this.showWorkoutDetail,"data-id":e.uuidv4},Object(i.h)(u.a,{markdown:T.a.replaceImages(ct,e.images,A),markdownOpts:T.a.getMarkdownOptions()})),Object(i.h)("div",{class:"clearfix col-12"},Object(i.h)(u.a,{markdown:T.a.replaceImages(dt,e.images,A),markdownOpts:T.a.getMarkdownOptions()})),e.language!==A&&Object(i.h)(t,null,!m&&lt?Object(i.h)(t,null,Object(i.h)("button",{type:"button",class:"btn btn-sm btn-link",onClick:this.showOriginal},Object(i.h)("i",{class:"fas fa-cog"}),"  ",Object(i.h)(h.c,{id:"home.translate-show-original"},"Show original"))):Object(i.h)(t,null,Object(i.h)("button",{type:"button",class:"btn btn-sm btn-link",onClick:this.translate},Object(i.h)("i",{class:"fas fa-cog"})," ",Object(i.h)(h.c,{id:"home.translate-to"},"See translation"))))),Object(i.h)("div",{class:"row mt-1"},e.distanceKm>0&&Object(i.h)("div",{class:"col-3"},Object(i.h)("div",{class:"text-overflow"},Object(i.h)("small",null,Object(i.h)("i",{class:"fas fa-road"})," ",Object(i.h)(h.c,{id:"workout.calendar.distance"},"Distanse"))),Object(i.h)("div",{class:"text-overflow font-weight-light",style:"font-size: 1.2em;"},Object(i.h)(S.a,{stores:this.props.stores,value:e.distanceKm}))),e.elevation>0&&Object(i.h)("div",{class:"col-3"},Object(i.h)("div",{class:"text-overflow"},Object(i.h)("small",null,Object(i.h)("i",{class:"fas fa-mountain"})," ",Object(i.h)(h.c,{id:"workout.calendar.ascend"},"Høydemeter"))),Object(i.h)("div",{class:"text-overflow font-weight-light",style:"font-size: 1.2em;"},Object(i.h)(k.a,{stores:this.props.stores,value:e.elevation}))),e.duration>0&&Object(i.h)("div",{class:"col-3"},Object(i.h)("div",{class:"text-overflow"},Object(i.h)("small",null,Object(i.h)("i",{class:"fas fa-clock"})," ",Object(i.h)(h.c,{id:"workout.calendar.duration"},"Varighet"))),Object(i.h)("div",{class:"text-overflow font-weight-light",style:"font-size: 1.2em;"},l.a.secToHms(e.duration,!0))),e.speedAvg>0&&Object(i.h)("div",{class:"col-3"},Object(i.h)("div",{class:"text-overflow"},Object(i.h)("small",null,Object(i.h)("i",{class:"fas fa-tachometer-alt"})," ",Object(i.h)(h.c,{id:"workout.calendar.avg-speed"},"Snittfart"))),Object(i.h)("div",{class:"text-overflow font-weight-light",style:"font-size: 1.2em;"},_&&_.avgGpsMovingSpeed>0?Object(i.h)(t,null,Object(i.h)(y.a,{stores:this.props.stores,value:3.6*_.avgGpsMovingSpeed})):Object(i.h)(t,null,Object(i.h)(y.a,{stores:this.props.stores,value:e.speedAvg}))))),Object(i.h)("div",{class:"container-fluid px-0 mt-1"},Object(i.h)("div",{class:"row"},Object(i.h)(p.a,{stores:this.props.stores,images:ot,id:e.id,dblClick:this.likeWorkout,likeRef:b}))),e.dogs&&e.dogs.length>0&&Object(i.h)("div",{class:"container-fluid px-0 mt-1"},Object(i.h)("div",{class:"row pt-2"},Object(i.h)(O.a,{stores:this.props.stores,dogs:e.dogs,allDogs:W,onDogClick:n}))),Object(i.h)("div",{class:"mt-2"},Object(i.h)(w.a,{stores:this.props.stores,likes:z,comments:B,type:"team",onTeamClick:s,onUserClick:o})),!Z&&!J&&!G&&Object(i.h)("div",{class:"clearfix mb-2"},Object(i.h)(g.a,{stores:this.props.stores,team:$,buttonOnly:!0})),Object(i.h)("div",null,Object(i.h)("div",{class:"row"},Object(i.h)("div",{class:"col text-center"},Object(i.h)("button",{type:"button",class:`imageContainer btn btn-sm btn-outline-${H?"primary":"secondary"} btn-lg btn-block ${H?"text-primary":""} text-overflow`,"data-id":e.id,onClick:this.likeWorkout},Object(i.h)("i",{class:(H?"text-primary fas":"far")+" fa-thumbs-up"})," ",Object(i.h)(h.c,{id:"comments.like"},"Lik"))),Object(i.h)("div",{class:"col text-center"},Object(i.h)("button",{type:"button",class:"btn btn-sm btn-outline-secondary btn-lg btn-block text-overflow","data-id":e.id,onClick:this.toggleAddComment},Object(i.h)("i",{class:"fas fa-comment"})," ",Object(i.h)(h.c,{id:"comments.comment-add"},"Kommentar"))),F?Object(i.h)(t,null,Object(i.h)("div",{class:"col text-center"},Object(i.h)("button",{class:"btn btn-sm btn-outline-secondary btn-lg btn-block text-overflow",onClick:this.shareLink,"data-url":"https://themusher.app/share/workout/"+e.uuidv4,"data-title":"title: "+e.title},Object(i.h)("i",{class:"fas fa-share"})," ",Object(i.h)(h.c,{id:"story.share"},"Del")))):Object(i.h)(t,null,Object(i.h)("div",{class:"col text-center"},Object(i.h)("a",{class:"btn btn-sm btn-outline-secondary btn-lg btn-block text-overflow",href:"https://themusher.app/share/workout/"+e.uuidv4,target:"_blank",rel:"noreferrer","data-native":!0},Object(i.h)("i",{class:"fas fa-share"})," ",Object(i.h)(h.c,{id:"story.share"},"Del")))))),rt>0&&Object(i.h)(t,null,Object(i.h)("div",{class:"mt-2"},Object(i.h)(v.a,{stores:this.props.stores,views:rt,object:e,type:"team",isTeamAdmin:M,isAdmin:L,onTeamClick:s,onUserClick:o}))),Object(i.h)("div",{class:"mt-2"},r[e.id]&&Object(i.h)(j.a,{stores:this.props.stores,workout:e,inputRef:t=>this.inputRef[e.id]=t,inputRefObject:this.inputRef,col:"12",offset:"0",showAvatar:!0,extraClass:"px-0",callback:this.addCommentToFeed}),Object(i.h)(f.a,{stores:this.props.stores,workout:e,col:"12",offset:"0",compact:!1,callback:this.addCommentToFeed})))}})||r;e.a=P}).call(this,s("hosL").Fragment)},VKmm:function(t,e,s){"use strict";function o(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,o)}return s}function a(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}var n,r=s("hosL"),i=s("Utv1"),l=s("/eY4"),c=s("OhSV");s("ZOvn"),s("eQ6k");const d={requestSent:{}};let h=Object(l.a)(n=class extends r.Component{constructor(t){super(t),this.requestFollowTeam=t=>{const{teamStore:e,userStore:s}=this.props.stores,{user:o}=s,{team:a}=t.target.closest("button").dataset;e.followRequest(parseInt(a,10),o);const{requestSent:n}=this.state;n[a]=!0,this.setState({requestSent:n})},this.getButton=t=>{const{requestSent:e}=this.state,{userStore:s}=this.props.stores,{user:o}=s,a=t.members&&t.members.findIndex(t=>t.id===o.id)>-1,n=t.followers&&t.followers.indexOf(o.id)>-1,i=t.blockedFollowers&&t.blockedFollowers.indexOf(o.id)>-1,l=e[t.id]||t.followRequests&&t.followRequests.findIndex(t=>t.id===o.id)>-1;return a?Object(r.h)("i",{class:"fas fa-home"}):n?Object(r.h)("button",{class:"btn btn-sm btn-block btn-outline-secondary float-right",onClick:this.unFollowTeam,disabled:"true","data-team":t.id},Object(r.h)("i",{class:"fas fa-link mr-2"}),Object(r.h)(c.c,{id:"teams.connect.is-following"},"Følger")):i?Object(r.h)("button",{class:"btn btn-sm btn-block btn-outline-secondary float-right",disabled:"true"},Object(r.h)("i",{class:"fas fa-hand-paper mr-2"}),Object(r.h)(c.c,{id:"teams.connect.is-blocked"},"Blokkert")):l?Object(r.h)("button",{class:"btn btn-sm btn-block btn-outline-secondary float-right",disabled:"true"},Object(r.h)("i",{class:"fas fa-hourglass-half mr-2"}),Object(r.h)(c.c,{id:"teams.connect.has-requested"},"Venter på godkjenning")):Object(r.h)("button",{class:"btn btn-sm btn-block btn-outline-success float-right",onClick:this.requestFollowTeam,"data-team":t.id},Object(r.h)("i",{class:"far fa-hand-point-right mr-2"}),Object(r.h)(c.c,{id:"teams.connect.follow"},"Følg"))},this.state=function(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?o(Object(s),!0).forEach((function(e){a(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):o(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}({},d)}async loadTeams(){this.setState({isLoading:!0});const{teamStore:t}=this.props.stores;await t.loadPublic({query:{notfollowing:1,array:1},limit:15}),this.setState({isLoading:!1})}componentDidMount(){this.loadTeams()}render(){const{teamStore:t,appState:e}=this.props.stores,{publicTeamsToFollow:s}=t,{darkmode:o}=e;return s&&0!==s.length?Object(r.h)("div",{class:"row pb-4 bg-light"},Object(r.h)("div",{class:`col-12 col-sm-8 col-lg-6 offset-sm-2 offset-lg-3 mb-0 position-relative rounded rounded-lg py-3 bg-${o?"black":"white"} shadow-sm`},Object(r.h)("div",{class:"container-fluid"},Object(r.h)("div",{class:"row"},Object(r.h)("div",{class:"col-12"},Object(r.h)("h5",null,Object(r.h)(c.c,{id:"teams.connect.teams-to-follow"},"Team du kan følge"),":"))),Object(r.h)("div",{class:"row"},Object(r.h)("div",{class:"d-flex flex-row flex-nowrap",style:"overflow: auto;"},i.a.isArray(s)&&s.map(t=>{const e=t.image&&t.image.s3SmallLink?t.image:null;return Object(r.h)("div",{class:"mr-2",style:"width: 110px;"},Object(r.h)("div",{class:"text-center border rounded-lg",style:e?`background-image: url("${e.s3SmallLink}"); background-size: cover; width: 110px; height: 100px;`:"width: 110px; height: 100px;"},!e&&Object(r.h)("i",{class:"fas fa-users text-muted mt-3",style:"font-size: 40px;"})),Object(r.h)("small",null,Object(r.h)("div",{class:"text-overflow"},Object(r.h)("strong",null,t.name)),Object(r.h)("div",{class:"text-overflow"},t.place?t.place+", ":""," ",t.country,"  "),Object(r.h)("div",{class:"text-overflow"},Object(r.h)("small",{class:"text-muted"},t&&t.dogs&&Object(r.h)("span",{class:""},Object(r.h)("i",{class:"fas fa-dog"})," ",t.dogs.length),t&&t.followers&&Object(r.h)("span",{class:"ml-2"},Object(r.h)("i",{class:"fas fa-user"})," ",t.followers.length)))),Object(r.h)("div",null,this.getButton(t)))})))))):""}})||n;e.a=h},ZQlJ:function(t,e,s){"use strict";var o,a=s("hosL"),n=(s("Utv1"),s("/eY4")),r=(s("OhSV"),s("NDEG"));let i=Object(n.a)(o=class extends a.Component{constructor(t){super(t),this.scrollImages=t=>{const{scrollLeft:e,clientWidth:s}=t.target,o=e/s,a=Math.round(o),n=Math.abs(a-o);(Number.isInteger(o)||n<.1)&&this.setState({imageIdx:a})},this.sortByName=(t,e)=>{const{allDogs:s=[]}=this.props,o=s.find(e=>e.id===t),a=s.find(t=>t.id===e);return o&&a&&o.name>a.name?1:-1},this.state={imageIdx:0}}render(){const{dogs:t,allDogs:e=[],size:s="medium",onDogClick:o=(()=>{})}=this.props;return Object(a.h)("div",{class:"w-100"},Object(a.h)("div",{class:"d-flex flex-row flex-nowrap",style:"overflow: auto; scroll-snap-type: x mandatory;",onScroll:this.scrollImages},t&&t.sort(this.sortByName).map(n=>{const i=e.find(t=>t.id===n);return i?Object(a.h)("div",{class:"col clearfix position-relative p-0 mx-2"},Object(a.h)("div",{class:"w-100 h-100 text-center rounded-lg imageContainer d-flex justify-content-center align-items-center",style:"\n                                        flex-wrap: wrap;\n                                        overflow-y: hidden;\n                                    ",onTouchstart:t=>{t.stopPropagation()},onTouchend:t=>{t.stopPropagation()},onTouchmove:t=>{t.stopPropagation()}},Object(a.h)(r.a,{stores:this.props.stores,dog:i,dogs:e.filter(e=>t.indexOf(e.id)>-1).sort((t,e)=>t.name>e.name?1:-1),className:"mx-auto",showName:!0,showPosition:!1,size:s,onDogClick:o}))):""})))}})||o;e.a=i},epqT:function(t,e,s){"use strict";(function(t){function o(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,o)}return s}function a(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}var n,r=s("hosL"),i=s("Utv1"),l=s("/eY4"),c=s("OhSV");s("ZOvn");const d={showAddComment:!1};let h=Object(c.d)(()=>({subject:Object(r.h)(c.c,{id:"ad.subject"},"Annonseforespørsel"),body:Object(r.h)(c.c,{id:"ad.body"},"Hei, Jeg ønsker å vite mer om annonsering i appen The Musher.")}))(n=Object(l.a)(n=class extends r.Component{constructor(t){var e;super(t),e=this,this.logClick=async function(){const{adStore:t,userStore:s}=e.props.stores,{ads:o=[]}=t;let a=o.length>0?o[0].id:null;const{user:n={}}=s;await t.logClick({id:a,user:n.id})},this.state=function(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?o(Object(s),!0).forEach((function(e){a(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):o(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}({},d),this.updateTimer={},this.inputRef={},this.apiServer=i.a.getApiServer()}async loadAd(t=this.props){this.setState({isLoading:!0});const{adStore:e,workoutStore:s,userStore:o,appState:a}=this.props.stores,{section:n}=this.props,{path:r=""}=a,{currentTeam:i}=s,{user:l}=o,{language:c="en"}=l;let d,h,b,u,m,p={};i&&(p=o.findTeam(i,!0),p&&p.id&&(d=o.findTeamAmbition({ambition:p.ambitions,language:c}),h=o.findTeamType({type:p.type,language:c}),b=p.postalcode,u=p.place,m=p.country));const O=r.replace(/\d+$/,"detail");await e.load({query:{page:O,section:n}}),e.setTime(),this.setState({isLoading:!1})}componentDidMount(){this.loadAd()}componentWillReceiveProps(t){t.path!==this.props.path&&this.loadAd(t)}render(){const{adStore:e,userStore:s,appState:o}=this.props.stores,{subject:a,body:n,section:i}=this.props,{path:l}=o,{user:d={}}=s,{ads:h=[],time:b}=e;if(!d||!d.id||!h||0===h.length)return l.match(/\/(home)/i)?Object(r.h)(t,null,Object(r.h)("div",{class:"w-100"},Object(r.h)("div",{class:"row"},Object(r.h)("div",{class:"col-12 col-sm-8 col-lg-6 offset-sm-2 offset-lg-3 mb-0 position-relative"},Object(r.h)("div",{class:"border rounded-lg p-4 my-3"},Object(r.h)("span",{class:"float-right display-4 text-warning"},Object(r.h)("i",{class:"far fa-smile-wink"})),Object(r.h)("h5",null,Object(r.h)(c.c,{id:"ad.heading"},"Vil du annonsere her?")),Object(r.h)("div",null,Object(r.h)(c.c,{id:"ad.teaser"},"Det er super enkelt :)")),Object(r.h)(c.b,null,Object(r.h)("a",{href:`mailto:post@themusher.no?subject=${a}: ${l}: ${i}&body=${n}`,target:"_blank",rel:"noreferrer"},Object(r.h)("i",{class:"fas fa-paper-plane"})," ",Object(r.h)(c.c,{id:"ad.linktext"},"Ta kontakt med The Musher")))))))):Object(r.h)(t,null);const u=h[0];return Object(r.h)(t,null,Object(r.h)("div",{class:"w-100"},Object(r.h)("div",{class:"row"},Object(r.h)("div",{class:"col-12 col-sm-8 col-lg-6 offset-sm-2 offset-lg-3 mb-0 position-relative"},Object(r.h)("div",null,Object(r.h)("small",null,Object(r.h)("small",{class:"text-muted"},Object(r.h)(c.c,{id:"ad.ad"},"Annonse"),":",Object(r.h)("img",{src:`${this.apiServer}/api/ads/${u.id}/view?user=${d.id}&time=${b}`,style:"width: 1; height: 1; opacity: 0.1;"})))),u.target?Object(r.h)(t,null,Object(r.h)("a",{class:"stretched-link",href:""+u.url,target:u.target||"_blank",rel:"noopener noreferrer",onClick:this.logClick,native:!0},u.images&&u.images[0]&&Object(r.h)(t,null,Object(r.h)("img",{src:u.images[0].s3LargeLink,class:"img-fluid rounded-lg"})))):Object(r.h)(t,null,Object(r.h)("a",{class:"stretched-link",href:""+u.url,onClick:this.logClick},u.images&&u.images[0]&&Object(r.h)(t,null,Object(r.h)("img",{src:u.images[0].s3LargeLink,class:"img-fluid rounded-lg"}))))))))}})||n)||n;e.a=h}).call(this,s("hosL").Fragment)},oISW:function(t,e,s){"use strict";s.r(e),function(t){function o(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,o)}return s}function a(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}var n,r=s("hosL"),i=(s("Utv1"),s("/eY4")),l=s("OhSV"),c=s("VKmm"),d=s("rWES"),h=s("epqT"),b=s("yHBq"),u=s("q/oJ"),m=s("gWxU"),p=s("Nanz"),O=s("ISGx"),f=s("ZOvn");const j=f.a.marginTop(!1),g=f.a.marginTopBack(!1),w=f.a.marginBottom(),v={showAddComment:{},likeWorkout:{},hasFollowSugguestions:!1,hasAd:!1,sessionid:(new Date).getTime()},y=["id","type","user","team","title"];let k=Object(i.a)(n=class extends r.Component{constructor(e){super(e),this.onTeamClick=(t,e)=>(t.preventDefault(),t.stopPropagation(),this.setState({showTeam:e}),!1),this.hideTeam=()=>{this.setState({showTeam:null})},this.onUserClick=t=>(t.preventDefault(),t.stopPropagation(),!1),this.onDogClick=(t,e,s)=>(t.preventDefault(),t.stopPropagation(),this.setState({showDog:e,dogs:s}),!1),this.hideDog=()=>{this.setState({showDog:null})},this.renderContent=({obj:e,idx:s})=>{const{appState:o}=this.props.stores,{path:a}=o;return"ad"===e.type?Object(r.h)(t,null,Object(r.h)(h.a,{stores:this.props.stores,path:a})):"teamConfirm"===e.type?Object(r.h)(t,null,Object(r.h)(d.a,{stores:this.props.stores})):"teamSuggestions"===e.type?Object(r.h)(t,null,Object(r.h)(c.a,{stores:this.props.stores})):Object(r.h)(t,null,Object(r.h)(O.a,{stores:this.props.stores,feed:e,idx:s,onTeamClick:this.onTeamClick,onUserClick:this.onUserClick,onDogClick:this.onDogClick}))},this.back=()=>{const{history:t}=this.props.stores;t.goBack()},this.state=function(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?o(Object(s),!0).forEach((function(e){a(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):o(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}({},v)}async loadPublicWorkouit({props:t=this.props}){const{teamStore:e}=t.stores,{workout:s}=t;await e.loadPublicFeed({workoutid:s})}componentWillUnmount(){const{teamStore:t}=this.props.stores;t.cleanupMemory()}componentDidMount(){this.loadPublicWorkouit(this.props)}componentWillReceiveProps(t){t.workoutid!==this.props.workoutid&&this.loadPublicWorkouit(t)}render(){const{showTeam:e,showDog:s,handleIntersection:o,sessionid:a,dogs:n}=this.state,{teamStore:i,appState:c}=this.props.stores,{publicTeamsFeed:h}=i,{darkmode:O}=c,{teamid:v}=this.props,k=i.findPublicTeamByUuidv4(v),x=f.a.getImage({team:k});let S,C;return k&&k.name&&(S=f.a.displayNameShort(k),C=f.a.displayName(k)),Object(r.h)(t,null,e&&Object(r.h)(u.a,null,Object(r.h)(m.default,{stores:this.props.stores,teamid:e,marginTop:"0px;",marginBottom:"0px;",back:this.hideTeam,hideTeam:this.hideTeam})),s&&Object(r.h)(u.a,null,Object(r.h)(p.default,{stores:this.props.stores,dogid:s,marginTop:"0px;",marginBottom:"0px;",back:this.hideDog,dogs:n})),Object(r.h)("div",{class:"container-fluid",style:`margin-bottom: ${w}; margin-top: ${j};`},Object(r.h)("div",{class:"d-flex justify-content-between mb-2"},Object(r.h)("div",null,Object(r.h)("button",{class:"btn btn-link float-left pl-0 fixed-top",style:`top: ${g}; left: 5px; font-size: 35px; width: 45px;`,onClick:this.back},Object(r.h)("i",{class:"fas fa-arrow-circle-left"}))),Object(r.h)("div",null,Object(r.h)("h5",{class:"text-muted"}," "))),Object(r.h)("div",{class:"w-100"},k?Object(r.h)(t,null,Object(r.h)("div",{class:"row pb-3 pt-3"},Object(r.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 border-bottom"},Object(r.h)("div",{class:"row"},Object(r.h)("h3",null,Object(r.h)("div",{class:"d-flex position-relative"},Object(r.h)("div",{class:"text-center border rounded-circle imageRounded imageRoundedSmall",style:x?`background-image: url("${x}"); background-size: cover;`:""},!x&&Object(r.h)("div",{class:"text-muted",style:"font-size: 20px; padding-top: 3px;"},S)),Object(r.h)("div",{class:"flex-grow-1 pl-3 text-overflow",style:"line-height: 1.2em;"},Object(r.h)("h3",{class:"mb-1"},k.public?Object(r.h)(t,null,Object(r.h)("a",{href:"/teams/public/"+k.uuidv4,class:"stretched-link"},C)):Object(r.h)(t,null,C))))))))):Object(r.h)(t,null,Object(r.h)(d.a,{stores:this.props.stores})),(!h||0===h.length)&&Object(r.h)(t,null,Object(r.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 px-0"},Object(r.h)("div",{class:"text-center text-muted"},Object(r.h)("div",{class:"display-1"},Object(r.h)("i",{class:"fas fa-chart-area"})),Object(r.h)("h3",null,Object(r.h)(l.c,{id:"search.no-workouts-found"},"No workouts found.")),Object(r.h)(l.c,{id:"teams.no-public-workouts-text"},"Please follow more teams to see their workout activity on this page. This is a great way to get updates from all your favorite mushers.")),Object(r.h)("div",{class:"text-center mt-3"},Object(r.h)("a",{href:"/teams/connect",class:"btn btn-primary"},Object(r.h)("i",{class:"fas fa-users"})," ",Object(r.h)(l.c,{id:"header.connect-team"},"Follow teams"))))),Object(r.h)(b.a,{data:h,wrapperClassNames:"row pb-4",contentClassNames:`col-12 col-sm-8 col-lg-6 offset-sm-2 offset-lg-3 my-1 position-relative rounded rounded-lg py-3 bg-${O?"black":"white"} shadow-sm`,renderContent:this.renderContent,dataFields:y,dataValues:{type:"10"},handleIntersection:o,sessionid:a}))))}})||n;e.default=k}.call(this,s("hosL").Fragment)},rWES:function(t,e,s){"use strict";(function(t){function o(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,o)}return s}function a(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}var n,r=s("hosL"),i=s("Utv1"),l=s("/eY4"),c=s("OhSV"),d=s("ZOvn");s("eQ6k");const h={confirmed:{},deleted:{}};let b=Object(l.a)(n=class extends r.Component{constructor(t){super(t),this.confirmRequest=t=>{const{team:e,user:s,follow:o}=t.target.closest("button").dataset,{teamStore:a}=this.props.stores;a.confirmFollowRequest({team:parseInt(e,10),user:parseInt(s,10)});const{confirmed:n}=this.state;n[`${e}-${s}`]=!0,this.setState({confirmed:n}),o&&a.followRequestUser(s)},this.deleteRequest=t=>{const{team:e,user:s}=t.target.closest("button").dataset,{teamStore:o}=this.props.stores;o.deleteFollowRequest({team:parseInt(e,10),user:parseInt(s,10)});const{deleted:a}=this.state;a[`${e}-${s}`]=!0,this.setState({deleted:a})},this.state=function(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?o(Object(s),!0).forEach((function(e){a(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):o(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}({},h)}async loadTeams(){const{teamStore:t}=this.props.stores;await t.load({query:{},addData:["followRequests"]})}componentDidMount(){this.loadTeams()}render(){const{deleted:e={},confirmed:s={}}=this.state,{teamStore:o,appState:a}=this.props.stores,{teams:n,hasFollowRequests:l,followRequests:h=[]}=o,{darkmode:b}=a;return l?Object(r.h)("div",{class:"row pb-4"},Object(r.h)("div",{class:`col-12 col-sm-8 col-lg-6 offset-sm-2 offset-lg-3 mb-0 position-relative rounded rounded-lg py-3 bg-${b?"black":"white"} shadow-sm`},Object(r.h)("div",{class:"container-fluid"},Object(r.h)("div",{class:"row"},Object(r.h)("div",{class:"col-12"},Object(r.h)("h5",null,Object(r.h)(c.c,{id:"teams.connect.teams-follow-requests"},"Forespørsel om å følge"),":"))),Object(r.h)("div",{class:"row"},Object(r.h)("div",{class:"d-flex flex-row flex-nowrap",style:"overflow: auto;"},i.a.isArray(n)&&n.map(o=>Object(r.h)(t,null,o&&i.a.isArray(o.followRequests)&&o.followRequests.map(a=>{const n=a.image&&a.image.s3SmallLink?a.image:null,i=e[`${o.id}-${a.id}`],l=s[`${o.id}-${a.id}`],b=h.find(t=>t.user.id===a.id);return Object(r.h)("div",{class:"mr-2",style:"width: 150px;"},Object(r.h)("div",{class:"text-center border rounded-circle imageRounded mx-auto",style:n?`background-image: url("${n.s3SmallLink}");`:""},!n&&Object(r.h)("div",{class:"text-muted font-weight-lighter",style:"font-size: 40px; padding-top: 5px;"},d.a.displayNameShort(a))),Object(r.h)("small",null,Object(r.h)("div",{class:"text-overflow text-center"},Object(r.h)("strong",null,d.a.displayName(a)),Object(r.h)("br",null),b&&b.public>0?Object(r.h)(t,null,Object(r.h)("a",{href:"/teams/public/"+b.uuidv4},b.name)):Object(r.h)(t,null,b?Object(r.h)(t,null,b.name):"",Object(r.h)("br",null),Object(r.h)("span",{class:"text-muted"},"(",Object(r.h)(c.c,{id:"teams.not-public"},"Not public"),")"))),Object(r.h)("div",{class:"text-overflow text-center"},Object(r.h)(c.c,{id:"teams.connect.wants-to-follow"},"wants to follow your team:")),Object(r.h)("div",{class:"text-overflow text-center"},Object(r.h)("strong",null,d.a.displayName(o)))),l||i?Object(r.h)(t,null,Object(r.h)("div",{class:"text-center"},l?Object(r.h)("div",{class:"text-success"},Object(r.h)(c.c,{id:"teams.connect.confirmed"},"Confirmed")," ",Object(r.h)("i",{class:"fas fa-check"})):Object(r.h)("div",{class:"text-danger"},Object(r.h)(c.c,{id:"teams.connect.deleted"},"Deleted")," ",Object(r.h)("i",{class:"fas fa-trash-alt"})))):Object(r.h)(t,null,Object(r.h)("div",null,Object(r.h)("button",{class:"btn btn-sm btn-block btn-success text-overflow mt-1",onClick:this.confirmRequest,"data-team":o.id,"data-user":a.id},Object(r.h)(c.c,{id:"teams.connect.confirm"},"Confirm")),b&&b.public>0&&Object(r.h)("button",{class:"btn btn-sm btn-block btn-outline-success text-overflow mt-1",onClick:this.confirmRequest,"data-team":o.id,"data-user":a.id,"data-follow":!0},Object(r.h)(c.c,{id:"teams.connect.confirm-and-follow"},"Confirm & follow back")),Object(r.h)("small",{class:"mt-3"},Object(r.h)("button",{class:"btn btn-sm btn-block btn-link text-overflow",onClick:this.deleteRequest,"data-team":o.id,"data-user":a.id},Object(r.h)(c.c,{id:"teams.connect.delete"},"Del"))))))}))))),Object(r.h)("details",{class:"mt-3"},Object(r.h)("summary",null,Object(r.h)(c.c,{id:"teams.connect.how-summary"},"How does this work?")),Object(r.h)("p",null,Object(r.h)(c.c,{id:"teams.connect.how-text"},"What can followers see when I grant them access to follow? The answer is very little. They can see main details of the workouts you share and name of the dogs. That's all. Try to follow a team and check out the workout tab.")))))):""}})||n;e.a=b}).call(this,s("hosL").Fragment)},yHBq:function(t,e,s){"use strict";(function(t){function o(){return(o=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var s=arguments[e];for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(t[o]=s[o])}return t}).apply(this,arguments)}var a,n,r=s("hosL"),i=s("/eY4"),l=s("Utv1");let c=Object(i.a)(a=class extends r.Component{constructor(t){super(t),this.state={},this.containerRef=null}componentWillUnmount(){const{removeIntersectionObserver:t}=this.props;t&&t(this.containerRef)}componentDidMount(){const{addIntersectionObserver:t}=this.props;t&&t(this.containerRef)}render(){const{wrapperClassNames:t="",contentClassNames:e="",renderContent:s,obj:a={},idx:n,dataFields:i,dataValues:l,sessionid:c}=this.props,d={};return c&&(d.sessionid=c),i.forEach(t=>d["data-"+t]=encodeURI(l[t]||a[t])),Object(r.h)("div",o({class:""+t,ref:t=>this.containerRef=t,"data-idx":n},d),Object(r.h)("div",{class:""+e,style:"display: block;"},s({obj:a,idx:n})))}})||a,d=Object(i.a)(n=class extends r.Component{constructor(t){super(t),this.deleteIntersectionObserver=()=>{this.intersectionObserver=null},this.handleIntersection=t=>{const{handleIntersection:e}=this.props;"function"==typeof e&&e(t),t.forEach(t=>{const{isIntersecting:e}=t,{height:s=0}=t.target.dataset,o=Math.max(t.target.childNodes[0].offsetHeight,t.target.offsetHeight,t.target.scrollHeight);e?(t.target.childNodes[0].style.display="block",t.target.style.minHeight=(o>s?o:s)+"px"):t.target.style.minHeight&&(t.target.style.minHeight=(o>s?o:s)+"px",t.target.childNodes[0].style.display="none")})},this.setupIntersectionObserver=()=>{if(!("IntersectionObserver"in window)||!("IntersectionObserverEntry"in window)||!("intersectionRatio"in window.IntersectionObserverEntry.prototype))return!1;this.intersectionObserver=new IntersectionObserver(this.handleIntersection,{root:null,rootMargin:"100px",threshold:.1})},this.addIntersectionObserver=t=>{this.intersectionObserver&&t&&this.intersectionObserver.observe(t)},this.removeIntersectionObserver=t=>{this.intersectionObserver&&t&&this.intersectionObserver.unobserve(t)},this.state={}}componentWillMount(){this.setupIntersectionObserver()}componentWillUnmount(){this.deleteIntersectionObserver()}render(){const{data:e=[],wrapperClassNames:s="row pb-4 bg-light",contentClassNames:o="col-12 col-sm-8 col-lg-6 offset-sm-2 offset-lg-3 mb-0 position-relative rounded rounded-lg py-3 shadow-sm",renderContent:a=(()=>Object(r.h)(t,null,"Missing render function!")),dataFields:n=[],dataValues:i={}}=this.props;return Object(r.h)("div",{class:"w-100"},e&&e.filter(t=>l.a.isObject(t)).map((e,l)=>{const d=e.hasOwnProperty("wrapperClassNames")?e.wrapperClassNames:s,h=e.hasOwnProperty("contentClassNames")?e.contentClassNames:o;return Object(r.h)(t,null,Object(r.h)(c,{key:`fastline-${l}-${e.id}`,obj:e,idx:l,addIntersectionObserver:this.addIntersectionObserver,removeIntersectionObserver:this.removeIntersectionObserver,wrapperClassNames:d,contentClassNames:h,renderContent:a,dataFields:n,dataValues:i}))}))}})||n;e.a=d}).call(this,s("hosL").Fragment)}}]);
//# sourceMappingURL=72.chunk.f0c18.esm.js.map