{"version":3,"sources":["webpack:///./components/dog/simplePublic.js","webpack:///./components/team/public.js","webpack:///./routes/teams/publicDetail.js","webpack:///./components/team/publicLine.js","webpack:///./components/overlay/index.js"],"names":["Dog","observer","render","this","props","dog","dogs","showTeam","showInfo","showName","showPosition","showAge","className","size","onDogClick","userStore","stores","user","language","dogPosition","findDogposition","position","hasBirthday","mu","birth","containerWidth","Math","ceil","daysUntilNextBirthday","imageClasses","fontSize","class","style","onTouchstart","e","stopPropagation","onTouchend","onTouchmove","icon","name","image","s3SmallLink","util","ucfirst","href","uuidv4","onClick","shortname","age","deceased","gender","findTeam","team","weight","format","bodyScore","Component","Team","requestFollowTeam","teamStore","teamId","parseInt","target","parentElement","dataset","followRequest","setState","requestSent","unFollowTeam","unollowTeam","unfollowed","getButton","text","state","skipHome","isYourTeam","members","indexOf","id","isFollowing","followers","isBlocked","blockedFollowers","hasRequestedFollow","followRequests","findIndex","disabled","data-team","public","buttonOnly","teamAmbition","findTeamAmbition","ambition","ambitions","teamType","findTeamType","type","place","country","length","MARGIN_TOP","marginTop","MARGIN_TOP_BACK","marginTopBack","MARGIN_BOTTOM","marginBottom","initialState","newTeam","TeamsDetail","dogid","preventDefault","showDog","hideDog","onUserClick","subscribeNotificationTopic","field","notificationTopics","setNotificationTopic","value","back","history","goBack","updateTimer","time","Date","getTime","apiServer","getApiServer","loadPublicView","isLoading","getPublicViews","teamid","loadAll","loadPublicTeam","loadPublicDetail","componentDidMount","appState","setSwipeRight","componentWillReceiveProps","nextProps","isAdmin","publicTeam","publicViewsGraphData","isTeamAdmin","some","m","hideTeam","imageHeader","publicTrophys","publicMemories","publicDogs","headerImage","s3XXLargeLink","teamImage","s3LargeLink","topic","facebook","url","asUrl","rel","asFacebookLink","instagram","asInstagramLink","snapchat","asSnapchatLink","imagesSponsor","fields","total","images","sponsors","markdown","replaceImages","markdownOpts","getMarkdownOptions","description","descriptionWorkoutplan","map","achievements","file","date","isoDate","native","trophys","reverse","img","getTrophyImage","textHeader","descriptionHeader","src","dataLeft","legendLeft","key","confirmed","deleted","submenu","TeamLine","confirmRequest","callback","closest","confirmFollowRequest","deleteRequest","deleteFollowRequest","getUnblockButton","userId","myTeamId","isConfirmed","data-user","username","showBlockButton","storyStore","findPublicUser","displayNameShort","displayName","isDeleted","s3MediumLink","Overlay","children"],"mappings":"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","file":"5.chunk.a9fba.js","sourcesContent":["import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\n\nimport mu from '../../lib/musher-util';\n\nconst STOP_STATUSES = [2, 9];\nconst WARN_STATUSES = [4, 8];\n\n\nfunction getFatigueLevel(wo, dog) {\n    if (dog) {\n        if (STOP_STATUSES.indexOf(dog.status) > -1) {\n            return 'danger';\n        } else if (WARN_STATUSES.indexOf(dog.status) > -1) {\n            return 'warning';\n        }\n    }\n    if (wo) {\n        if (wo.distanceKm > 50) {\n            return 'danger';\n        } else if (wo.distanceKm > 30) {\n            return 'warning';\n        }\n    }\n    return 'success';\n}\n\n@observer\nclass Dog extends Component {\n    render() {\n        const { \n            dog = {},\n            dogs = [],\n            showTeam,\n            showInfo,\n            showName = true,\n            showPosition = true,\n            showAge = false,\n            className,\n            size,\n            onDogClick = () => {},\n        } = this.props;\n\t\tconst { userStore } = this.props.stores;\n        const { isAdmin, user } = userStore;\n        const { language = 'en' } = user;\n\n        const dogPosition = userStore.findDogposition({ position: dog.position, language });\n        const hasBirthday = mu.hasBirthday(dog.birth);\n        const daysUntilBirthday = Math.ceil(mu.daysUntilNextBirthday(dog.birth));\n\n        let containerWidth = '92px';\n        let imageClasses = '';\n        let fontSize = '35px';\n        if (size === 'small') {\n            containerWidth = '50px';\n            imageClasses = 'imageRoundedSmall';\n            fontSize = '20px';\n        } else if (size === 'medium') {\n            containerWidth = '60px';\n            imageClasses = 'imageRoundedMedium';\n            fontSize = '25px';\n        }\n\n        return (\n            <div class={`mb-2 position-relative ${className} clearfix`} style={`width: ${containerWidth}`}\n                onTouchstart={(e) => { e.stopPropagation(); }}\n                onTouchend={(e) => { e.stopPropagation(); }}\n                onTouchmove={(e) => { e.stopPropagation(); }}\n            >\n                {/* {JSON.stringify(dog, null, 4)} */}\n                {showPosition && dogPosition && <small class='position-absolute' style='left:0px; top: 50px;'>\n                    <span class={`badge badge-${dogPosition.class || 'primary'} mr-3`}>{dogPosition.icon && <i class={dogPosition.icon} />} {dogPosition.name}</span>\n                </small>}\n                <div\n                    class={`text-center border rounded-circle imageRounded ${imageClasses} mx-auto text-muted pt-2`}\n                    style={`${dog.image ? `background-image: url(\"${dog.image.s3SmallLink}\"); background-size: cover;` : ''} border-width: 2px !important;`}\n                >\n                    {/* {!dog.image && <i class='fas fa-dog mt-3' style='font-size: 40px;' />} */}\n                    {!dog.image && <span class='font-weight-lighter' style={`font-size: ${fontSize};`}>{util.ucfirst(dog.name, true)}</span>}\n                </div>\n                <div class='text-center text-overflow' style='line-height: 1.0em;'>\n                    <small>\n                        {/* <span class='float-right'>\n                            {dog.birth && <span class='mr-2'>{util.age(dog.birth, dog.deceased)}</span>}\n                            {dog.gender === 'female' ? <i class='fas fa-venus' /> : <i class='fas fa-mars' />}\n                        </span> */}\n                        <a href={`/dogs/public/${dog.uuidv4}`} onClick={(e) => onDogClick(e, dog.uuidv4, dogs)} class='stretched-link'>\n                            {showName && <>\n                                <span class='mb-1 font-weight-light'>\n                                    <nobr>\n                                        {dog.shortname || dog.name}\n                                        {hasBirthday && <>\n                                            <i class='fas fa-birthday-cake ml-3' />\n                                        </>}\n                                    </nobr>\n                                </span>\n                            </>}\n                        </a>\n                    </small>\n                </div>\n                <div class='text-center text-overflow' style='line-height: 1.0em;'>\n                    <small>\n                        {dog.birth && showAge && <>\n                            <span class='float-right'>\n                                {/* {daysUntilBirthday < 7 && <>\n                                    <span class='text-muted mr-2'>\n                                        <i class='fas fa-birthday-cake' /> in {daysUntilBirthday} days\n                                    </span>\n                                </>}                                 */}\n                                {dog.birth && <span class='mr-2'>{util.age(dog.birth, dog.deceased)}</span>}\n                                {dog.gender === 'female' ? <i class='fas fa-venus' /> : <i class='fas fa-mars' />}\n                            </span>\n                        </>}\n\n                        {showTeam && <><span class='font-weight-light'>{userStore.findTeam(dog.team)}</span><br /></>}\n\n                        {showInfo && <small class='text-muted'>\n                            {dog.weight && <><i class='fas fa-balance-scale ml-2' /> {util.format(dog.weight, 1)} kg</>}\n                            {dog.bodyScore && <><i class='fas fa-dog ml-2' /> {util.format(dog.bodyScore, 1)}</>}\n                        </small>}\n\n                    </small>\n                </div>\n            </div>\n        );\n    }\n}\n\nexport default Dog;\n","import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport { Text, Localizer } from 'preact-i18n';\n\n@observer\nclass Team extends Component {\n    requestFollowTeam = (e) => {\n        const { teamStore, userStore } = this.props.stores;\n        const { user } = userStore;\n        const teamId = parseInt(e.target.parentElement.dataset.team || e.target.dataset.team, 10);\n        teamStore.followRequest(teamId, user);\n        this.setState({ requestSent: true });\n    }\n\n    unFollowTeam = (e) => {\n        const { teamStore, userStore } = this.props.stores;\n        const { user } = userStore;\n        const teamId = parseInt(e.target.parentElement.dataset.team || e.target.dataset.team, 10);\n        teamStore.unollowTeam(teamId);\n        this.setState({ unfollowed: true });\n    }\n\n    getButton = (text = '') => {\n        const { requestSent } = this.state;\n        const { userStore } = this.props.stores;\n        const { user } = userStore;\n        const { team, skipHome } = this.props;\n        const isYourTeam = team.members && team.members.indexOf(user.id) > -1;\n        const isFollowing = team.followers && team.followers.indexOf(user.id) > -1;\n        const isBlocked = team.blockedFollowers && team.blockedFollowers.indexOf(user.id) > -1;\n        const hasRequestedFollow = requestSent || team.followRequests && team.followRequests.findIndex(e => e.id === user.id) > -1;\n\n        if (isYourTeam) {\n            if (skipHome) {\n                return '';\n            }\n            return (\n                <i class='fas fa-home' />\n            );\n        }\n        if (isFollowing) {\n            return (<>\n                <button\n                    class={`btn btn-block btn-outline-secondary float-right`}\n                    onClick={this.unFollowTeam}\n                    disabled='true'\n                    data-team={team.id}\n                >\n                    <i class='fas fa-link mr-2' />\n                    <Text id='teams.connect.is-following'>Følger</Text> {text}\n                </button>\n                <button\n                    class={`btn btn-sm btn-block btn-danger float-right`}\n                    onClick={this.unFollowTeam}\n                    data-team={team.id}\n                >\n                    <i class='fas fa-unlink mr-2' />\n                    <Text id='teams.connect.unfollow'>Unfollow</Text>\n                </button>\n            </>);\n        }\n        if (isBlocked) {\n            return '';\n            // return (\n            //     <button\n            //         class={`btn btn-block btn-outline-secondary float-right`}\n            //         disabled='true'\n            //     >\n            //         <i class='fas fa-hand-paper mr-2' />\n            //         <Text id='teams.connect.is-blocked'>Blokkert</Text> {text}\n            //     </button>\n            // );\n        }\n        if (hasRequestedFollow) {\n            return (\n                <button\n                    class={`btn btn-block btn-outline-secondary float-right`}\n                    disabled='true'\n                >\n                    <i class='fas fa-hourglass-half mr-2' />\n                    <Text id='teams.connect.has-requested'>Venter på godkjenning</Text> {text}\n                </button>\n            );\n        }\n        if (team.public) {\n            return (\n                <button\n                    class={`btn btn-block btn-outline-success float-right`}\n                    onClick={this.requestFollowTeam}\n                    data-team={team.id}\n                >\n                    <i class='far fa-hand-point-right mr-2' />\n                    <Text id='teams.connect.follow'>Følg</Text> {text}\n                </button>\n            );\n        }\n    }\n\n    render() {\n        const { unfollowed } = this.state;\n        const { team, buttonOnly } = this.props;\n        const { userStore } = this.props.stores;\n        const { user } = userStore;\n        const { language = 'en' } = user;\n        const teamAmbition = userStore.findTeamAmbition({ ambition: team.ambitions, language });\n        const teamType = userStore.findTeamType({ type: team.type, language });\n        const image = team.image && team.image.s3SmallLink ? team.image : null;\n\n        if (buttonOnly) {\n            return (<>\n                {this.getButton(`${team.name}`)}\n            </>);\n        }\n\n        return (\n            <div class='w-100 mb-3'>\n                <div class='row'>\n                    <div class='col-12 col-sm-8 col-lg-6 offset-sm-2 offset-lg-3 d-flex mb-0 position-relative border-top pt-3'\n                        style={`${unfollowed ? 'text-decoration: line-through; opacity: 0.3;' : ''}`}\n                    >\n                        {/* {JSON.stringify(team, null, 4)} */}\n                        <a href={`/teams/public/${team.uuidv4}`}>\n                        <div class={`text-center border rounded-circle imageRounded`} style={image ? `background-image: url(\"${image.s3SmallLink}\");  background-size: cover;` : ''}>\n                            {!image && <i class='fas fa-users text-muted mt-3' style='font-size: 40px;' />}\n                        </div>\n                        </a>\n                        <div class='flex-grow-1 pl-3' style='line-height: 1.2em;'>\n                            <h5 class='mb-1' style='line-height: 1.0em;'>\n                                {team.public ? <>\n                                    <a href={`/teams/public/${team.uuidv4}`}>{team.name}</a>\n                                </> : <>\n                                    {team.name}\n                                </>}\n                            </h5>\n                            <div>\n                                {team.place} {team.country}\n                            </div>\n                            <div>\n                                {teamType && <span class='badge badge-pill badge-secondary'>{teamType}</span>}\n                                {teamAmbition && <span class='badge badge-pill badge-secondary ml-2'>{teamAmbition}</span>}\n                            </div>\n                            <small class='text-muted'>\n                                {team && team.dogs && <span class=''><i class='fas fa-dog' /> {team.dogs.length}</span>} \n                                {team && team.followers && <span class='ml-2'><i class='fas fa-user' /> {team.followers.length}</span>}\n                            </small>\n                        </div>\n                        <div>\n                            {this.getButton()}\n                        </div>\n                    </div>\n                </div>\n            </div>\n        );\n    }\n}\n\nexport default Team;\n","import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport { route, Router } from 'preact-router';\nimport { Text, Localizer } from 'preact-i18n';\nimport Markdown from 'preact-markdown';\n\nimport PubSub, { topics } from '../../lib/pubsub';\nimport mu from '../../lib/musher-util';\nconst MARGIN_TOP = mu.marginTop(false);\nconst MARGIN_TOP_BACK = mu.marginTopBack(false);\nconst MARGIN_BOTTOM = mu.marginBottom();\n\nimport DogSimplePublic from '../../components/dog/simplePublic';\nimport ImageScroller from '../../components/imageScroller';\n// import TeamConnectConfirm from '../../components/team/connect-confirm';\nimport TeamLine from '../../components/team/publicLine';\nimport PublicTeam from '../../components/team/public';\n\nimport Overlay from '../../components/overlay/';\nimport DogPublicDetail from '../dogs/publicDetail';\n\nimport MiniViewGraph from '../../components/dog/miniViewGraph';\n\nconst initialState = {\n    newTeam: {},\n};\n\n@observer\nclass TeamsDetail extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            ...initialState,\n        };\n        this.updateTimer = {};\n        this.time = new Date().getTime();\n        this.apiServer = util.getApiServer();\n    }\n\n    async loadPublicView(props) {\n\t\tthis.setState({ isLoading: true });\n        const { teamid } = props;\n\t\tconst { teamStore } = this.props.stores;\n        await teamStore.getPublicViews(teamid);\n\t\tthis.setState({ isLoading: false });\n\t}\n\n    async loadAll(props = this.props) {\n        await this.loadPublicTeam(props);\n        await this.loadPublicView(props);\n    }\n\n    async loadPublicTeam(props = this.props) {\n\t\tconst { teamStore } = props.stores;\n        const { teamid } = props;\n        await teamStore.loadPublicDetail({ id: teamid });\n    }\n\n    // Overlay functions\n    onDogClick = (e, dogid) => {\n        e.preventDefault();\n        e.stopPropagation();\n        this.setState({\n            showDog: dogid,\n        });\n        return false;\n    }\n\n    hideDog = () => {\n        this.setState({\n            showDog: null,\n        });\n    }\n\n    onUserClick = (e, userid) => {\n        e.preventDefault();\n        e.stopPropagation();\n        return false;\n    }\n    // /Overlay functions\n\n    subscribeNotificationTopic = async (field) => {\n\t\tconst { userStore } = this.props.stores;\n        const { user } = userStore;\n        const { notificationTopics = {} } = user;\n        const value = 1;\n        await userStore.setNotificationTopic({\n            field: `notificationTopics.${field}`,\n            value,\n        });\n    }\n\n    back = () => {\n        const { history } = this.props.stores;\n        history.goBack();\n    }\n    \n\tcomponentDidMount() {\n        const { back = this.back } = this.props;\n        const { appState } = this.props.stores;\n        appState.setSwipeRight(() => {\n            appState.setSwipeRight();\n            back();\n        });\n        this.loadAll();\n    }\n\n    componentWillReceiveProps(nextProps) {\n        // console.log('componentWillReceiveProps', nextProps);\n        if (nextProps.teamid !== this.props.teamid) {\n            this.loadAll(nextProps);\n        }\n    }\n\n\trender() {\n        const { showDog } = this.state;\n\t\tconst { teamStore, userStore } = this.props.stores;\n        const { user, isAdmin } = userStore;\n        const { language = 'en' } = user;\n\t\tconst { publicTeam, publicTeamFollowers, publicViewsGraphData, publicViewsGraphLegend } = teamStore;\n        const isTeamAdmin = (publicTeam && publicTeam.members) ? publicTeam.members.some(m => m.id === user.id) : false;\n\n        const { marginTop, marginBottom, back = this.back, hideTeam = () => {} } = this.props;\n\n        const defaultImage = {\n            s3XXLargeLink: './assets/homerun-race-logo.png',\n        };\n\n        const {\n            dogs = [],\n            users = [],\n            image,\n            imageHeader,\n            publicWorkouts,\n            publicWorkoutDetails,\n            publicWorkoutSummary,\n            publicTrophys,\n            publicMemories,\n            publicDogs,\n        } = publicTeam;\n\n        const headerImage = imageHeader && imageHeader.s3XXLargeLink ? imageHeader : defaultImage;\n        const teamImage = image && image.s3LargeLink ? image : null;\n        const teamAmbition = userStore.findTeamAmbition({ ambition: publicTeam.ambitions, language });\n        const teamType = userStore.findTeamType({ type: publicTeam.type, language });\n        const isYourTeam = publicTeam.members && publicTeam.members.findIndex(e => e.id === user.id) > -1;\n        const isFollowing = publicTeam && publicTeam.followers && publicTeam.followers.indexOf(user.id) > -1;\n        const hasRequestedFollow = publicTeam.followRequests && publicTeam.followRequests.findIndex(e => e.id === user.id) > -1;\n\n        const { notificationTopics = {} } = user;\n        const topic = `team-${publicTeam.id}`;\n\n\t\treturn (<>\n            {showDog && <Overlay>\n                <DogPublicDetail stores={this.props.stores} dogid={showDog} marginTop={'0px;'} marginBottom={'0px;'} back={this.hideDog} dogs={dogs} />\n            </Overlay>}\n\n\t\t\t<div class='container-fluid pb-5' style={`margin-bottom: ${marginBottom || MARGIN_BOTTOM}; margin-top: ${marginTop || MARGIN_TOP};`}>\n                <button class='btn btn-link pl-0 fixed-top text-primary'\n                    style={`top: ${MARGIN_TOP_BACK}; left: 5px; font-size: 35px; width: 45px;`}\n                    onClick={back}>\n                    <i class='fas fa-arrow-circle-left' />\n                </button>\n\n                <div class='row mb-0'>\n                    <div class='w-100 position-relative'\n                        style={`height: 25vh; background-size: cover; background-repeat: no-repeat; background-position: 50% 50%; background-color: #a0a0a0; ${headerImage ? `background-image: url(\"${headerImage.s3XXLargeLink}\");` : ''}`}\n                    >\n                        {isYourTeam && <>\n                            <a class='btn btn-sm btn-primary position-absolute'\n                                style={`top: 5px; right: 10px;`}\n                                href={`/teams/edit/${publicTeam.id}`}\n                            >\n                                <i class='fas fa-edit' /> <Text id='teams.edit'>Endre</Text>\n                            </a>\n                        </>}                    \n                    </div>\n\t\t\t\t\t<div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-3'>\n                        <div class='row'>\n                            <div class='col-3 col-sm-4 col-md-3 col-lg-4 position-relative'>\n                                <div\n                                    class={`text-center border border-white rounded-circle position-absolute imageRounded imageRoundedResponsive imageRoundedResponsivePosition`}\n                                    style={`left: 20px; ${teamImage ? `background-image: url(\"${teamImage.s3LargeLink}\"); background-size: cover; background-repeat: no-repeat; background-position: 50% 50%;` : ''}`}\n                                >\n                                    {!teamImage && <i class='fas fa-users text-muted mt-3' style='font-size: 40px;' />}\n                                </div>\n                                &nbsp;\n                            </div>\n                            <div class='col-9 col-sm-8 col-md-9 col-lg-8' style='line-height: 1.2em;'>\n                                <h5 class='my-0'>{publicTeam.name}</h5>\n                                <small class='text-muted'>\n                                    {publicTeam.place ? `${publicTeam.place}, ` : ''}{publicTeam.country}\n                                </small><br />\n                                {teamType && <span class='badge badge-pill badge-secondary mt-2'>{teamType}</span>}\n                                {teamAmbition && <span class='badge badge-pill badge-secondary mt-2 ml-2'>{teamAmbition}</span>}\n                                <h6 class='mt-2'>\n                                    <span class='mr-3'><span class='font-weight-bolder'>{publicTeam.followers ? publicTeam.followers.length : 0}</span> <Text id='teams.followers'>followers</Text></span>\n                                    <span class='mr-3'><span class='font-weight-bolder'>{publicTeam.dogs ? publicTeam.dogs.length : 0}</span> <Text id='teams.dogs-menu'>dogs</Text></span>\n                                </h6>\n                            </div>\n                        </div>\n                    </div>\n                    {(!notificationTopics || !notificationTopics[topic]) && <>\n                        <div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-3'>\n                            <button class='btn btn-block btn-primary btn-sm' onClick={() => this.subscribeNotificationTopic(topic)}>\n                                <Text id='team.notifications'>Subscribe to team notifications</Text>\n                            </button>                    \n                        </div>\n                    </>}\n                </div>\n\n\t\t\t\t<div class='row mt-5'>\n                    <div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3'>\n                        {!isYourTeam && !isFollowing && !hasRequestedFollow && publicTeam.public > 0 && <div class='clearfix mb-2'>\n                            <PublicTeam stores={this.props.stores} team={publicTeam} buttonOnly={true} skipHome={true} />\n                        </div>}\n                    </div>\n                </div>\n\n                {/* <TeamConnectConfirm stores={this.props.stores} /> */}\n\n\t\t\t\t<div class='row mt-5'>\n                    <div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3'>\n                        <h5 class='font-weight-lighter text-muted border-bottom'><Text id='teams.socialmedia'>Sosialemedier</Text></h5>\n                    </div>\n                    <div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3'>\n                        <div class='d-flex justify-content-center'>\n\n                            {isYourTeam && !publicTeam.facebook && <>\n                                <div class='text-center text-muted'>\n                                    <div class='display-1'>\n                                        <i class='fab fa-facebook' />\n                                    </div>\n                                    <h3 class='font-weight-lighter'>\n                                        <Text id='teams.add-sosialmedia'>Gå inn på endring av teamet for å legge inn en sosialemedier.</Text>\n                                    </h3>\n                                </div>\n                            </>}\n\n                            {publicTeam.url && <div class='mx-2'><h3><a href={mu.asUrl(publicTeam.url)} target='_blank' rel='noreferrer'><i class='fas fa-link' /></a></h3></div>}\n                            {publicTeam.facebook && <div class='mx-2'><h3><a href={mu.asFacebookLink(publicTeam.facebook)} target='_blank' rel='noreferrer'><i class='fab fa-facebook' /></a></h3></div>}\n                            {publicTeam.instagram && <div class='mx-2'><h3><a href={mu.asInstagramLink(publicTeam.instagram)} target='_blank' rel='noreferrer'><i class='fab fa-instagram' /></a></h3></div>}\n                            {publicTeam.snapchat && <div class='mx-2'><h3><a href={mu.asSnapchatLink(publicTeam.snapchat)} target='_blank' rel='noreferrer'><i class='fab fa-snapchat' /></a></h3></div>}\n                        </div>\n                        <div class='d-flex justify-content-center mt-3'>\n                            <div class='mx-2'><h3><a class='btn btn-outline-success' href={`/stories/team/${publicTeam.uuidv4}`}><i class='fas fa-rss' /> <Text id='story.all-stories'>Stories</Text></a></h3></div>\n                            <div class='mx-2'><h3><a class='btn btn-outline-primary' href={`/teams/workouts/team/${publicTeam.uuidv4}`} onClick={hideTeam}><i class='fas fa-running' /> <Text id='story.all-workouts'>All workouts</Text></a></h3></div>\n                        </div>\n                    </div>\n                </div>\n\n                {publicTeam.imagesSponsor && <div class='row mt-5'>\n                    <div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3'>\n                        <h5 class='font-weight-lighter text-muted border-bottom'><Text id='teams.public-sponsor-images' fields={{ total: publicTeam.imagesSponsor.length }}>Sponsorer - {publicTeam.imagesSponsor.length} stk</Text></h5>\n                    </div>\n                    <div class={`col-12 col-sm-8 col-lg-6 offset-sm-2 offset-lg-3 mb-0 position-relative px-0`}>\n                        <ImageScroller stores={this.props.stores} images={publicTeam.imagesSponsor} />\n                    </div>\n                </div>}\n\n                {publicTeam.sponsors && <div class='row mt-5'>\n                    <div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3'>\n                        <h5 class='font-weight-lighter text-muted border-bottom'><Text id='teams.sponsors'>Sponsors</Text></h5>\n                    </div>\n                    <div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3'>\n                        {isYourTeam && !publicTeam.sponsors && <>\n                            <div class='text-center text-muted'>\n                                <div class='display-1'>\n                                    <i class='fas fa-pen-nib' />\n                                </div>\n                                <h3 class='font-weight-lighter'>\n                                    <Text id='teams.add-sponsors'>Gå inn på endring av teamet for å legge inn sponsorer.</Text>\n                                </h3>\n                            </div>\n                        </>}\n                        <Markdown markdown={mu.replaceImages(publicTeam.sponsors, publicTeam.imagesSponsor, language)} markdownOpts={mu.getMarkdownOptions()} />\n                    </div>\n                </div>}\n\n\n\t\t\t\t<div class='row mt-5'>\n                    <div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3'>\n                        <h5 class='font-weight-lighter text-muted border-bottom'><Text id='teams.description'>Beskrivelse</Text></h5>\n                    </div>\n                    <div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3'>\n                        {isYourTeam && !publicTeam.description && <>\n                            <div class='text-center text-muted'>\n                                <div class='display-1'>\n                                    <i class='fas fa-pen-nib' />\n                                </div>\n                                <h3 class='font-weight-lighter'>\n                                    <Text id='teams.add-description'>Gå inn på endring av teamet for å legge inn en beskrivelse.</Text>\n                                </h3>\n                            </div>\n                        </>}\n                        <Markdown markdown={mu.replaceImages(publicTeam.description, publicTeam.images, language)} markdownOpts={mu.getMarkdownOptions()} />\n                    </div>\n                </div>\n\n\t\t\t\t{publicTeam.descriptionWorkoutplan && <div class='row mt-5'>\n                    <div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3'>\n                        <h5 class='font-weight-lighter text-muted border-bottom'><Text id='teams.description-workoutplan'>Workoutplan</Text></h5>\n                    </div>\n                    <div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3'>\n                        {isYourTeam && !publicTeam.descriptionWorkoutplan && <>\n                            <div class='text-center text-muted'>\n                                <div class='display-1'>\n                                    <i class='fas fa-pen-nib' />\n                                </div>\n                                <h3 class='font-weight-lighter'>\n                                    <Text id='teams.add-description-workoutplan'>Gå inn på endring av teamet for å legge inn en treningsplan.</Text>\n                                </h3>\n                            </div>\n                        </>}\n                        <Markdown markdown={mu.replaceImages(publicTeam.descriptionWorkoutplan, publicTeam.images, language)} markdownOpts={mu.getMarkdownOptions()} />\n                    </div>\n                </div>}\n\n\t\t\t\t{publicDogs && <div class='row mt-5'>\n                    <div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3'>\n                        <h5 class='font-weight-lighter text-muted border-bottom'><Text id='teams.dogs' fields={{ total: dogs.length }}>Hundene - {dogs.length} stk</Text></h5>\n                    </div>\n\n                    <div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3'>\n                        <div class='row'>\n                            {dogs && dogs.map(dog => (\n                                <DogSimplePublic stores={this.props.stores} dog={dog} showAge={true} className={'col'}\n                                    onDogClick={this.onDogClick} \n                                />\n                            ))}\n                        </div>\n                    </div>\n                </div>}\n\n\t\t\t\t{publicTeam.images && <div class='row mt-5'>\n                    <div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3'>\n                        <h5 class='font-weight-lighter text-muted border-bottom'><Text id='teams.public-photos' fields={{ total: publicTeam.images.length }}>Teambilder - {publicTeam.images.length} stk</Text></h5>\n                    </div>\n                    <div class={`col-12 col-sm-8 col-lg-6 offset-sm-2 offset-lg-3 mb-0 position-relative px-0`}>\n                        <ImageScroller stores={this.props.stores} images={publicTeam.images} />\n                    </div>\n\t\t\t\t</div>}\n\n                {publicMemories && publicTeam.achievements && <div class='row mt-5'>\n                    <div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3'>\n                        <h5 class='font-weight-lighter text-muted border-bottom'><Text id='teams.achievements'>Achievements</Text></h5>\n                    </div>\n                    <div class={`col-12 col-sm-8 col-lg-6 offset-sm-2 offset-lg-3 mb-0 position-relative`}>\n                        <div class='row'>\n                            {publicTeam.achievements && publicTeam.achievements.map(file => {\n                                return (\n                                    <div class='col-12'>\n                                        {file.date && <span class='font-weight-lighter mr-2'>{util.isoDate(file.date, false, false, true)}</span>}\n                                        <span class='mr-2 font-weight-bold'>{file.name}</span>\n                                        <span class='mr-2 font-weight-light'>{file.description}</span>\n                                        {file.url && <span class='mr-2'><a href={mu.asUrl(file.url)} target='_blank' rel='noreferrer' native><i class='fas fa-link' /></a></span>}\n                                    </div>\n                                );\n                            })}\n                        </div>\n                    </div>\n\t\t\t\t</div>}\n\n\t\t\t\t{publicTrophys && publicTeam.trophys && <div class='row mt-5'>\n                    <div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3'>\n                        <h5 class='font-weight-lighter text-muted border-bottom'><Text id='teams.trophy'>Trophys</Text></h5>\n                    </div>\n                    <div class={`col-12 col-sm-8 col-lg-6 offset-sm-2 offset-lg-3 mb-0 position-relative`}>\n                        <div class='row'>\n                            {publicTeam.trophys && publicTeam.trophys.reverse().map(file => {\n                                const img = mu.getTrophyImage(file.name);\n                                if (!img) {\n                                    return '';\n                                }\n                                const textHeader = file.descriptionHeader && file.descriptionHeader[language] ? file.descriptionHeader[language] : '';\n                                const text = file.description && file.description[language] ? file.description[language] : '';\n                                return (\n                                    <div class='col-4 mt-3'>\n                                        <div class='mb-2'>\n                                            <img src={img} class='img-fluid' />\n                                        </div>\n                                        <strong>{textHeader}</strong>\n                                        {/* <small class='font-weight-lighter mr-2'>\n                                            {util.isoDate(file.createdDate, false, false, true)}\n                                        </small> */}\n                                        <small>\n                                            <details>\n                                                <summary><Text id='teams.trophy-details'>Details</Text></summary>\n                                                <Markdown markdown={mu.replaceImages(text, publicTeam.images, language)} markdownOpts={mu.getMarkdownOptions()} />\n                                            </details>\n                                        </small>\n                                    </div>\n                                );\n                            })}\n                        </div>\n                    </div>\n\t\t\t\t</div>}\n\n                {/* {util.isArray(publicTeamFollowers) && <div class='row mt-5'>\n                    <div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3'>\n                        <h5 class='font-weight-lighter text-muted border-bottom'><Text id='teams.followers'>Followers</Text></h5>\n                    </div>\n                    <div class={`col-12 col-sm-8 col-lg-6 offset-sm-2 offset-lg-3 mb-0 position-relative`}>\n                        {util.isArray(publicTeamFollowers) && publicTeamFollowers.map(t => \n                            <TeamLine stores={this.props.stores} team={t} myTeamId={publicTeam.id} showBlockButton={false} callback={this.loadTeam} />\n                        )}\n                    </div>\n                </div>} */}\n\n\t\t\t\t<div class='row mt-5 mb-5'>\n                    <div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3'>\n                        <div class='text-center text-muted'>\n                            <div class='display-1'>\n                                <i class='fas fa-ellipsis-h' />\n                            </div>\n                            <div style='line-height: 0.9em;'>\n                                <small>\n                                    <Text id='teams.something-missing'>Er det noe du savner på denne siden? Send oss en melding på Facebook.</Text>\n                                </small>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n\n                {(isAdmin || isTeamAdmin) && <>\n                    <h5 class='font-weight-lighter text-muted border-bottom'><Text id='teams.visits'>Team page visits</Text></h5>\n                    <MiniViewGraph stores={this.props.stores}\n                        dataLeft={publicViewsGraphData}\n                        legendLeft={['team']}\n                        key={`minigraph-team-${publicTeam.uuidv4}`}\n                    />\n                </>}\n\n                {publicTeam.uuidv4 && <img src={`${this.apiServer}/api/teams/${publicTeam.uuidv4}/view?user=${user.id}&time=${this.time}`} style='width: 1; height: 1; opacity: 0.1;' />}\n\t\t\t</div>\n\t\t</>);\n\t}\n}\n\nexport default TeamsDetail;\n","import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport { route } from 'preact-router';\nimport { Text, Localizer } from 'preact-i18n';\n\nimport mu from '../../lib/musher-util';\n\nconst initialState = {\n\trequestSent: {},\n    confirmed: {},\n    deleted: {},\n    submenu: 'notfollowing',\n};\n\n@observer\nclass TeamLine extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            ...initialState,\n        };\n        this.updateTimer = {};\n    }\n\n    requestFollowTeam = async (e) => {\n        const { teamStore, userStore } = this.props.stores;\n        const { user } = userStore;\n        const teamId = parseInt(e.target.parentElement.dataset.team || e.target.dataset.team, 10);\n        teamStore.followRequest(teamId, user);\n        const { requestSent } = this.state;\n        requestSent[teamId] = true;\n        this.setState({ requestSent });\n    }\n\n    confirmRequest = async (e) => {\n        const { callback = () => {} } = this.props;\n        const { team, user } = e.target.closest('button').dataset;\n        const { teamStore } = this.props.stores;\n        const { confirmed, deleted } = this.state;\n\t\tconfirmed[`${team}-${user}`] = true;\n        delete deleted[`${team}-${user}`];\n        this.setState({ confirmed, deleted });\n        await teamStore.confirmFollowRequest({\n            team: parseInt(team, 10),\n            user: parseInt(user, 10),\n        });\n        callback();\n    }\n\n    deleteRequest = async (e) => {\n        const { callback = () => {} } = this.props;\n        const { team, user } = e.target.closest('button').dataset;\n        const { teamStore } = this.props.stores;\n        const { deleted, confirmed } = this.state;\n\t\tdeleted[`${team}-${user}`] = true;\n        delete confirmed[`${team}-${user}`];\n        this.setState({ deleted, confirmed });\n        await teamStore.deleteFollowRequest({\n            team: parseInt(team, 10),\n            user: parseInt(user, 10),\n        });\n        callback();\n    }\n\n    unFollowTeam = (e) => {\n        const { teamStore, userStore } = this.props.stores;\n        const { user } = userStore;\n        const teamId = parseInt(e.target.parentElement.dataset.team || e.target.dataset.team, 10);\n        teamStore.unollowTeam(teamId);\n        this.setState({ unfollowed: true });\n    }\n\n    getUnblockButton = (userId, myTeamId) => {\n        const { confirmed } = this.state;\n        const isConfirmed = confirmed[`${myTeamId}-${userId}`];\n        return <>\n            {isConfirmed ? <>\n                <small class='text-success'>\n                    <i class='fas fa-check' /> <Text id='teams.connect.confirmed'>Confirmed</Text>\n                </small>\n            </> : <>\n                <button class='btn btn-sm btn-block btn-success text-overflow mt-1'\n                    onClick={this.confirmRequest}\n                    data-team={myTeamId}\n                    data-user={userId}>\n                    <Text id='teams.connect.confirm'>Confirm</Text>\n                </button>\n            </>}\n        </>;\n    }\n\n    getButton = (team) => {\n        const { requestSent } = this.state;\n        const { userStore } = this.props.stores;\n        const { user } = userStore;\n\n        const isYourTeam = team.members && team.members.indexOf(user.id) > -1;\n        const isFollowing = team.followers && team.followers.indexOf(user.id) > -1;\n        const isBlocked = team.blockedFollowers && team.blockedFollowers.indexOf(user.id) > -1;\n        const hasRequestedFollow = requestSent[team.id] || team.followRequests && team.followRequests.findIndex(e => e.id === user.id) > -1;\n\n        if (isYourTeam) {\n            return (\n                <i class='fas fa-home' />\n            );\n        }\n        if (!team.public) {\n            return (<>\n                <small class='text-muted'>\n                    <Text id='teams.not-public'>Ikke offentlig</Text>\n                </small>\n            </>);\n        }\n        if (isFollowing) {\n            return (<>\n                <button\n                    class={`btn btn-sm btn-block btn-outline-secondary float-right`}\n                    onClick={this.unFollowTeam}\n                    disabled='true'\n                    data-team={team.id}\n                >\n                    <i class='fas fa-link mr-2' />\n                    <Text id='teams.connect.is-following'>Følger</Text>\n                </button>\n                <button\n                    class={`btn btn-sm btn-block btn-outline-danger float-right`}\n                    onClick={this.unFollowTeam}\n                    disabled='true'\n                    data-team={team.id}\n                >\n                    <Text id='teams.connect.unfollow'>Unfollow</Text>\n                </button>\n            </>);\n        }\n        if (isBlocked) {\n            return (<></>);\n            // return (\n            //     <button\n            //         class={`btn btn-sm btn-block btn-outline-secondary float-right`}\n            //         disabled='true'\n            //     >\n            //         <i class='fas fa-hand-paper mr-2' />\n            //         <Text id='teams.connect.is-blocked'>Blokkert</Text>\n            //     </button>\n            // );\n        }\n        if (hasRequestedFollow) {\n            return (\n                <button\n                    class={`btn btn-sm btn-block btn-outline-secondary float-right`}\n                    disabled='true'\n                >\n                    <i class='fas fa-hourglass-half mr-2' />\n                    <Text id='teams.connect.has-requested'>Venter på godkjenning</Text>\n                </button>\n            );\n        }\n        return (\n            <button\n                class={`btn btn-sm btn-block btn-outline-success float-right`}\n                onClick={this.requestFollowTeam}\n                data-team={team.id}\n            >\n                <i class='far fa-hand-point-right mr-2' />\n                <Text id='teams.connect.follow'>Følg</Text>\n            </button>\n        );\n    }\n\n\trender() {\n        const { deleted = {}, unfollowed } = this.state;\n        const { team, isBlocked, myTeamId, showBlockButton } = this.props;\n        const { storyStore } = this.props.stores;\n\n        const user = storyStore.findPublicUser(team.user) || team.user || {};\n        let image;\n        if (team.image && team.image.s3SmallLink) {\n            image = team.image;\n        } else if (team.images && team.images[0] && team.images[0].s3SmallLink) {\n            image = team.images[0];\n        } else if (user.image && user.image.s3SmallLink) {\n            image = user.image;\n        } else if (user.images && user.images[0] && user.images[0].s3SmallLink) {\n            image = user.images[0];\n        }\n        let shortname;\n        let name;\n        let username;\n        if (team && team.name) {\n            shortname = mu.displayNameShort(team);\n            name = mu.displayName(team);\n            username = mu.displayName(user);\n        } else if (user && user.id) {\n            shortname = mu.displayNameShort(user);\n            name = mu.displayName(user);\n        }\n\n        const isDeleted = deleted[`${myTeamId}-${user.id}`];\n\n        return (\n            <div class='col-12 mb-2 pb-2 border-bottom'\n                style={`${unfollowed ? 'text-decoration: line-through; opacity: 0.3;' : ''}`}\n            >\n                <div class='d-flex position-relative'>\n                    <div\n                        class={`text-center border rounded-circle imageRounded imageRoundedMedium`}\n                        style={image ? `background-image: url(\"${image.s3MediumLink}\"); background-size: cover;` : ''}\n                    >\n                        {!image && <div class='text-muted' style='font-size: 20px; padding-top: 3px;'>{shortname}</div>}\n                    </div>\n                    <div class='flex-grow-1 pl-3 text-overflow' style='line-height: 1.2em;'>\n                        <h5 class='mb-0'>\n                            {team.public ? <>\n                                <a href={`/teams/public/${team.uuidv4}`}>{name}</a>\n                            </> : <>\n                                {name}\n                            </>}                                         \n                        </h5>\n                        <div>\n                            {team.place ? `${team.place}, ` : ''} {team.country} &nbsp;\n                        </div>\n                        <div>\n                            <small class='text-muted'>\n                                {team && team.dogs && <span class=''><i class='fas fa-dog' /> {team.dogs.length}</span>} \n                                {team && team.followers && <span class='ml-2'><i class='fas fa-user' /> {team.followers.length}</span>}\n                                {username && <>\n                                    <small class='ml-2 text-muted'>\n                                        {username}\n                                    </small>\n                                </>}\n                                {showBlockButton && <>\n                                    {isDeleted ? <>\n                                        <small class='text-danger ml-3'>\n                                            <i class='fas fa-ban' /> <Text id='teams.connect.deleted'>Deleted</Text>\n                                        </small>\n                                    </> : <>\n                                        <button class='btn btn-sm btn-link text-overflow p-0 text-muted ml-3'\n                                            style='font-size: 0.8em;'\n                                            onClick={this.deleteRequest}\n                                            data-team={myTeamId}\n                                            data-user={user.id}\n                                        >\n                                            <i class='fas fa-ban' /> <Text id='teams.connect.block'>Blokkere</Text>\n                                        </button>\n                                    </>}\n                                </>}\n                            </small>\n                        </div>\n                    </div>\n                    <div>\n                        {isBlocked ? <>\n                            {this.getUnblockButton(user.id, myTeamId)}\n                        </> : <>\n                            {this.getButton(team)}\n                        </>}\n                    </div>\n                </div>\n            </div>\n        );\n    }\n}\n\nexport default TeamLine;\n","import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport { Text, Localizer, withText } from 'preact-i18n';\n\nimport mu from '../../lib/musher-util';\n\nconst MARGIN_TOP = mu.marginTop(false);\nconst MARGIN_BOTTOM = mu.marginBottom();\n\n@observer\nclass Overlay extends Component {\n    render() {\n        const { children } = this.props;\n        return (\n            <div\n                class='w-100 h-100 fixed-top bg-light skipRefresh'\n                style={`\n                    margin-bottom: ${MARGIN_BOTTOM};\n                    margin-top: ${MARGIN_TOP};\n                    height: calc(100vh - ${MARGIN_TOP}) !important;\n                    top: 0;\n                    left: 0;\n                    overflow-x: auto;\n                    overflow-y: auto;\n                    transition: .3s;\n                    overscroll-behavior: contain;\n                    z-index: 10000;\n                `}\n            >\n                {children}\n            </div>\n        );\n    }\n}\n\nexport default Overlay;\n"],"sourceRoot":""}