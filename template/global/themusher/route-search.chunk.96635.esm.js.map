{"version":3,"sources":["webpack:///./components/user/index.js","webpack:///./components/workout/index.js","webpack:///./components/dog/index.js","webpack:///./components/dog/scroller.js","webpack:///./components/team/index.js","webpack:///./routes/search/index.js"],"names":["User","observer","Component","constructor","props","super","removeUser","async","e","id","target","dataset","email","team","parentNode","console","log","teamStore","stores","removeMember","adminUpdateUser","closest","name","field","clearTimeout","this","updateTimer","setTimeout","doAdminUpdateUser","value","userStore","simulateUser","getSimulateUser","state","render","user","currentUser","isAdmin","teams","findTeams","summary","findMusherSummary","isTeamAdmin","image","mu","getImage","displayName","class","style","cellphone","url","href","asUrl","rel","facebook","asFacebookLink","instagram","asInstagramLink","snapchat","asSnapchatLink","onClick","data-email","JSON","stringify","settings","subscription","deviceInfo","notifications","notificationTopics","applications","shadowTags","garmin","strava","currentLocationGeocode","util","isoDate","lastActivityEpoch","format","activities","type","veterinaryAllowed","checked","onInput","for","twoFactorLogin","isVeterinary","firstname","lastname","map","distanceKm","elevation","secToHms","duration","avgDistance","avgElevation","avgDuration","speedAvg","avgDogs","data-id","data-team","getWorkoutColor","workout","getWorkoutIcon","MAX_LOADINDEX","getMaxLoadIndex","initialState","showAddComment","viewImageIdx","likeWorkout","Workout","toggleDate","stopPropagation","preventDefault","showDate","setState","workoutStore","workoutId","toggleAddComment","parentElement","inputRef","focus","viewImage","idx","shareLink","title","text","appState","shareUrl","onTeamClick","teamid","showTeam","hideTeam","onUserClick","onDogClick","dogid","dogs","showDog","hideDog","forceShowDate","wrapperClasses","wrapperClassesRow","viewmode","hasShareApi","allDogs","language","intensity","findIntensity","code","findTeam","teamName","teamNames","push","forEach","likes","comments","hasLikedWorkout","findIndex","gpxInfo","mushers","loadIndex","workoutEquipment","findEquipment","equipment","workoutEquipmentIcon","musherImages","length","slice","musher","u","findPublicUser","images","publicUser","s3SmallLink","mapImage","imgs","toJS","batteryUsage","battegryLevelStart","battegryLevelEnd","views","getViews","statistics","marginTop","marginBottom","back","img","temperature","isLocked","isInProgress","role","date","formatDate","locale","hour12","hour","minute","formatDistance","Date","getLoadIndexColor","normalizeBetween","Math","floor","getLoadIndexText","garminId","stravaId","track","dogsLeft","dogsRight","sledWeight","indexOf","kcalBurnedTotal","kcalMeatGramsTotal","kcalSalmonGramsTotal","kcalFatGramsTotal","description","markdown","replaceImages","comment","markdownOpts","getMarkdownOptions","avgGpsMovingSpeed","dblClick","likeRef","data-url","uuidv4","data-title","data-native","c","inputRefObject","col","offset","compact","object","Dog","dog","dogStore","currentMonth","getMonth","currentYear","getFullYear","month","year","seasonStart","parseInt","workoutSummary","findWorkoutSummary","dogStatuses","statuses","findDogstatus","status","dogVaccines","findVaccineStatuses","dogVaccineLogStatuses","findVaccineLogStatuses","chipId","dogHistoryStatuses","findHistoryStatuses","dogStatus","dogPosition","findDogposition","position","hasBirthday","birth","daysUntilBirthday","ceil","daysUntilNextBirthday","ucfirst","findHarness","harness","icon","age","deceased","gender","shortname","history","weight","bodyScore","v","endDate","vaccineType","positions","lead","point","wheel","specialNeeds","lang","filter","vac","inKarens","vaccineAgens","DogScroller","scrollImages","scrollLeft","clientWidth","imageIdx","nearestInt","round","diff","abs","Number","isInteger","sortByName","a","b","dogA","find","dogB","size","onScroll","sort","dogId","onTouchstart","onTouchend","onTouchmove","d","className","showName","showPosition","Team","requestFollowTeam","teamId","followRequest","requestSent","getButton","skipHome","isYourTeam","members","isFollowing","followers","isBlocked","blockedFollowers","hasRequestedFollow","followRequests","unFollowTeam","disabled","public","showButton","publicUsers","showLocation","showMembers","teamAmbition","findTeamAmbition","ambition","ambitions","teamType","findTeamType","teamUser","teamUserDisplayName","priority","place","country","submenu","hits","searchText","Search","loadAll","storyStore","search","getSearch","publicTeams","localUpdateField","searchResultStories","searchResultDogs","searchResultWorkouts","searchResultTeams","searchResultTracks","allData","max","reduce","partialSum","route","chooseSubmenu","menu","componentDidMount","componentWillReceiveProps","nextProps","fields","placeholder","linkState","data-menu","feed","story","key"],"mappings":"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","file":"route-search.chunk.96635.esm.js","sourcesContent":["import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport { Text, Localizer, withText } from 'preact-i18n';\n\nimport Speed from '../../components/data/speed';\nimport Elevation from '../../components/data/elevation';\nimport Weight from '../../components/data/weight';\nimport Distance from '../../components/data/distance';\nimport Temperature from '../../components/data/temperature';\n\nimport mu from '../../lib/musher-util';\n\n@observer\nclass User extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {};\n        this.updateTimer = {};\n    }\n    \n    removeUser = async (e) => {\n        let id =  e.target.dataset.id;\n        let email =  e.target.dataset.email;\n        let team =  e.target.dataset.team;\n        if (!id && e.target.parentNode) {\n            id =  e.target.parentNode.dataset.id;\n            email =  e.target.parentNode.dataset.email;\n            team =  e.target.parentNode.dataset.team;\n\t\t}\n        console.log('id, email, team', id, email, team);\n        const { teamStore } = this.props.stores;\n        await teamStore.removeMember(team, { id, email });\n    }\n\n    adminUpdateUser = (e) => {\n        const { email } = e.target.closest('input').dataset;\n        const { name } = e.target;\n        const field = `${email}-${name}`;\n\n        clearTimeout(this.updateTimer[field]);\n        this.updateTimer[field] = setTimeout(() => {\n            this.doAdminUpdateUser(e);\n        }, 500);\n    }\n\n    doAdminUpdateUser = async (e) => {\n        const { email } = e.target.closest('input').dataset;\n        const { name, value } = e.target;\n\n        // console.log({ email, name, value });\n\t\tconst { userStore } = this.props.stores;\n        await userStore.adminUpdateUser(email, { [name]: value });\n    }\n\n    simulateUser = (e) => {\n        const { email } = e.target.closest('button').dataset;\n        const { userStore } = this.props.stores;\n\t\tuserStore.getSimulateUser(email);\n    }\n\n    render() {\n        const { user, team = {} } = this.props;\n\t\tconst { userStore, teamStore } = this.props.stores;\n        const { user: currentUser, isAdmin } = userStore;\n        const teams = userStore.findTeams(user.teams);\n        const summary = teamStore.findMusherSummary(user.id, team.id) || {};\n        const isTeamAdmin = team.user === currentUser.id;\n        const image = mu.getImage({ user, team });\n        const name = mu.displayName(user);\n\n        // const workoutSummary = dogStore.findWorkoutSummary(dog.id, 2020) || {};\n        // {'0':{'year':2020,'dog':16,'count':1,'distanceKm':9.9,'elevation':202,'duration':0,'speedAvg':0}}\n        return (\n            <div class='w-100 mb-3'>\n                <div class='row'>\n                    <div class='col-12 d-flex mb-0 position-relative'>\n                        {/* {JSON.stringify(dog, null, 4)} */}\n                        <div class={`text-center border rounded-circle imageRounded`} style={image ? `background-image: url('${image}'); background-size: cover;` : ''}>\n                            {!image && <i class='fas fa-user text-muted mt-3' style='font-size: 40px;' />}\n                        </div>\n                        <div class='flex-grow-1 pl-3 pr-2'>\n                            {/* <span class='float-right'>\n                                {dog.birth && <span class='mr-2'>{util.age(dog.birth, dog.deceased)}</span>}\n                                {dog.gender === 'female' ? <i class='fas fa-venus' /> : <i class='fas fa-mars' />}\n                            </span> */}\n                            \n                            <h5>{name}</h5>\n                            <div>\n                                <small class='text-muted'>\n                                    <div class='d-flex justify-content-left'>\n                                        {user.cellphone && <div class='mr-2'><i class='fas fa-mobile-alt' /> {user.cellphone}</div>}\n                                        {user.email && <div class='mr-2'><i class='fas fa-envelope ml-3' /> {user.email}</div>}\n                                        {user.url && <div class='mr-2'><a href={mu.asUrl(user.url)} target='_blank' rel='noreferrer'><i class='fas fa-link' /></a></div>}\n                                        {user.facebook && <div class='mr-2'><a href={mu.asFacebookLink(user.facebook)} target='_blank' rel='noreferrer'><i class='fab fa-facebook' /></a></div>}\n                                        {user.instagram && <div class='mr-2'><a href={mu.asInstagramLink(user.instagram)} target='_blank' rel='noreferrer'><i class='fab fa-instagram' /></a></div>}\n                                        {user.snapchat && <div class='mr-2'><a href={mu.asSnapchatLink(user.snapchat)} target='_blank' rel='noreferrer'><i class='fab fa-snapchat' /></a></div>}\n                                    </div>\n                                </small>\n                            </div>\n                            {isAdmin && <>\n                                <button class='btn btn-block btn-success' onClick={this.simulateUser} data-email={user.email}>\n                                    Simulate user\n                                </button>\n\n                                <small>\n                                    <details>\n                                        <summary>settings</summary>\n                                        <xmp>{JSON.stringify(user.settings, null, 4)}</xmp>\n                                    </details>\n                                    <details>\n                                        <summary>subscription</summary>\n                                        <xmp>{JSON.stringify(user.subscription, null, 4)}</xmp>\n                                    </details>\n                                    <details>\n                                        <summary>deviceInfo</summary>\n                                        <xmp>{JSON.stringify(user.deviceInfo, null, 4)}</xmp>\n                                    </details>\n                                    <details>\n                                        <summary>subscription</summary>\n                                        <xmp>{JSON.stringify(user.subscription, null, 4)}</xmp>\n                                    </details>\n                                    <details>\n                                        <summary>notifications</summary>\n                                        <xmp>{JSON.stringify(user.notifications, null, 4)}</xmp>\n                                    </details>\n                                    <details>\n                                        <summary>notificationTopics</summary>\n                                        <xmp>{JSON.stringify(user.notificationTopics, null, 4)}</xmp>\n                                    </details>\n                                    <details>\n                                        <summary>applications</summary>\n                                        <xmp>{JSON.stringify(user.applications, null, 4)}</xmp>\n                                    </details>\n                                    <details>\n                                        <summary>shadowTags</summary>\n                                        <xmp>{JSON.stringify(user.shadowTags, null, 4)}</xmp>\n                                    </details>\n                                    <details>\n                                        <summary>garmin</summary>\n                                        <xmp>{JSON.stringify(user.garmin, null, 4)}</xmp>\n                                    </details>\n                                    <details>\n                                        <summary>strava</summary>\n                                        <xmp>{JSON.stringify(user.strava, null, 4)}</xmp>\n                                    </details>\n                                    <details>\n                                        <summary>currentLocationGeocode</summary>\n                                        <xmp>{JSON.stringify(user.currentLocationGeocode, null, 4)}</xmp>\n                                    </details>\n                                    lastActivityEpoch: {util.isoDate(user.lastActivityEpoch)}<br />\n                                    activities: {util.format(user.activities)}<br />\n\n                                    {user.settings && <div class='form-check'>\n                                        <input class='form-check-input' type='checkbox' value={user.settings.veterinaryAllowed ? 0 : 1} id={`settings.veterinaryAllowed-${user.id}`} name='settings.veterinaryAllowed' checked={user.settings.veterinaryAllowed ? 'checked' : ''} data-email={user.email} onInput={this.adminUpdateUser} />\n                                        <label class='form-check-label' for={`settings.veterinaryAllowed-${user.id}`}>\n                                            settings.veterinaryAllowed\n                                        </label>\n                                    </div>}\n                                    <div class='form-check'>\n                                        <input class='form-check-input' type='checkbox' value={user.twoFactorLogin ? 0 : 1} id={`twoFactorLogin-${user.id}`} name='twoFactorLogin' checked={user.twoFactorLogin ? 'checked' : ''} data-email={user.email} onInput={this.adminUpdateUser} />\n                                        <label class='form-check-label' for={`twoFactorLogin-${user.id}`}>\n                                            twoFactorLogin\n                                        </label>\n                                    </div>\n                                    <div class='form-check'>\n                                        <input class='form-check-input' type='checkbox' value={user.isVeterinary ? 0 : 1} id={`isVeterinary-${user.id}`} name='isVeterinary' checked={user.isVeterinary ? 'checked' : ''} data-email={user.email} onInput={this.adminUpdateUser} />\n                                        <label class='form-check-label' for={`isVeterinary-${user.id}`}>\n                                            isVeterinary\n                                        </label>\n                                    </div>\n                                    <div class='form-group row'>\n                                        <label class='col-sm-2 col-form-label' for={`cellphone-${user.id}`}>cellphone</label>\n                                        <div class='col-sm-10'>\n                                            <input type='text' id={`cellphone-${user.id}`} name='cellphone' class='form-control' value={user.cellphone} data-email={user.email} onInput={this.adminUpdateUser} />\n                                        </div>\n                                    </div>\n                                    <div class='form-group row'>\n                                        <label class='col-sm-2 col-form-label' for={`firstname-${user.id}`}>firstname</label>\n                                        <div class='col-sm-10'>\n                                            <input type='text' id={`firstname-${user.id}`} name='firstname' class='form-control' value={user.firstname} data-email={user.email} onInput={this.adminUpdateUser} />\n                                        </div>\n                                    </div>\n                                    <div class='form-group row'>\n                                        <label class='col-sm-2 col-form-label' for={`lastname-${user.id}`}>lastname</label>\n                                        <div class='col-sm-10'>\n                                            <input type='text' id={`lastname-${user.id}`} name='lastname' class='form-control' value={user.lastname} data-email={user.email} onInput={this.adminUpdateUser} />\n                                        </div>\n                                    </div>\n                                </small>\n                            </>}\n                            {user.teams && <>\n                                {teams.map(team => (\n                                    <span class='badge badge-pill badge-info mr-2'>{team.name}</span>\n                                ))}<br />\n                            </>}\n                            {team.id && summary && <>\n                                <small class='text-muted'>\n                                    Total:\n                                    {summary && <span class='ml-2'><i class='fas fa-road' /> <Distance stores={this.props.stores} value={summary.distanceKm} /></span>}\n                                    {summary && <span class='ml-2'><i class='fas fa-mountain' /> <Elevation stores={this.props.stores} value={summary.elevation} /></span>}\n                                    {summary && <span class='ml-2'><i class='fas fa-clock' /> {util.secToHms(summary.duration || 0)}</span>}\n                                </small><br />\n                                <small class='text-muted'>\n                                    Avg: \n                                    {summary && <span class='ml-2'><i class='fas fa-road' /> <Distance stores={this.props.stores} value={summary.avgDistance} /></span>}\n                                    {summary && <span class='ml-2'><i class='fas fa-mountain' /> <Elevation stores={this.props.stores} value={summary.avgElevation} /></span>}\n                                    {summary && <span class='ml-2'><i class='fas fa-clock' /> {util.secToHms(summary.avgDuration || 0)}</span>}\n                                    {summary && <span class='ml-2'><i class='fas fa-tachometer-alt' /> <Speed stores={this.props.stores} value={summary.speedAvg} /></span>}\n                                    {summary && <span class='ml-2'><i class='fas fa-dog' /> {util.format(summary.avgDogs, 1)}</span>}\n                                </small>\n                            </>}\n                        </div>\n                        <div>\n                            {isTeamAdmin && user.id !== currentUser.id && <button class='btn btn-sm btn-danger'\n                                onClick={this.removeUser}\n                                data-email={user.email}\n                                data-id={user.id}\n                                data-team={team.id}\n                            ><i class='fas fa-ban' /></button>}\n                            {!isTeamAdmin && user.id === currentUser.id && <button class='btn btn-sm btn-secondary'\n                                onClick={this.removeUser}\n                                data-email={user.email}\n                                data-id={user.id}\n                                data-team={team.id}\n                            ><i class='fas fa-sign-out-alt' />{team.id}</button>}\n                        </div>\n                    </div>\n                </div>\n            </div>\n        );\n    }\n}\n\nexport default User;\n","import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport { toJS } from 'mobx';\nimport { Text, Localizer, withText } from 'preact-i18n';\nimport Markdown from 'preact-markdown';\n\nimport Modal from '../modal';\nimport WorkoutComments from '../../components/workout/comments';\nimport WorkoutAddComment from '../../components/workout/commentAdd';\nimport ImageScroller from '../../components/imageScroller';\nimport DogScroller from '../../components/dog/scroller';\n\nimport Overlay from '../../components/overlay/';\nimport TeamsPublicDetail from '../../routes/teams/publicDetail';\nimport DogPublicDetail from '../../routes/dogs/publicDetail';\n\nimport LikesAndComments from '../../components/feedback/likesAndComments';\nimport Views from '../../components/feedback/views';\n\nimport Speed from '../../components/data/speed';\nimport Elevation from '../../components/data/elevation';\nimport Weight from '../../components/data/weight';\nimport Distance from '../../components/data/distance';\nimport Temperature from '../../components/data/temperature';\n\nimport mu from '../../lib/musher-util';\n\nconst MAX_LOADINDEX = mu.getMaxLoadIndex();\n\nfunction getWorkoutColor(workout) {\n\tswitch (workout.type) {\n\t\tcase 1:\n\t\t\treturn 'border-primary';\n\t\tcase 2:\n\t\t\treturn 'border-danger';\n\t\tcase 3:\n\t\t\treturn 'border-success';\n\t\tcase 4:\n\t\t\treturn 'border-info';\n\t\tdefault:\n\t\t\treturn 'border-warning';\n\t}\n}\n\nfunction getWorkoutIcon(workout) {\n\tswitch (workout.type) {\n\t\tcase 1:\n\t\t\treturn 'fas fa-running';\n\t\tcase 2:\n\t\t\treturn 'fas fa-flag-checkered';\n\t\tcase 3:\n\t\t\treturn 'fas fa-hiking';\n\t\tcase 4:\n\t\t\treturn 'fas fa-futbol';\n\t\tdefault:\n\t\t\treturn 'fas fa-hiking';\n\t}\n}\n\nfunction displayDistance(distanceKm) {\n\tif (distanceKm < 5) {\n\t\treturn util.format(distanceKm, 2);\n\t}\n\tif (distanceKm < 10) {\n\t\treturn util.format(distanceKm, 1);\n\t}\n\treturn util.format(distanceKm, 1);\n}\n\nconst initialState = {\n\tshowAddComment: false,\n    viewImageIdx: {},\n    likeWorkout: {},\n};\n\n@observer\nclass Workout extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            ...initialState,\n        };\n        this.updateTimer = {};\n\t\tthis.inputRef = {};\n    }\n\n    toggleDate = (e) => {\n        e.stopPropagation();\n        e.preventDefault();\n        const { showDate } = this.state;\n        this.setState({ showDate: !showDate });\n    }\n\n\n\tlikeWorkout = async () => {\n\t\tconst { workoutStore } = this.props.stores;\n        const { workout } = this.props;\n        const workoutId = workout.id;\n\n        const { likeWorkout } = this.state;\n        likeWorkout[workoutId] = true;\n        this.setState({ likeWorkout });\n        setTimeout(() => {\n            const { likeWorkout } = this.state;\n            delete likeWorkout[workoutId];\n            this.setState({ likeWorkout });\n        }, 1200);\n\n\t\tconst response = await workoutStore.likeWorkout({ id: workoutId });\n        if (response && response.status === 200) {\n\n\t\t}\n\t}\n\n\ttoggleAddComment = (e) => {\n\t\tconst workoutId = e.target.parentElement.dataset.id || e.target.dataset.id;\n\t\tconst { showAddComment } = this.state;\n\t\tthis.setState({\n\t\t\tshowAddComment: !showAddComment,\n\t\t}, () => {\n\t\t\tif (this.inputRef[workoutId]) {\n\t\t\t\tthis.inputRef[workoutId].focus();\n\t\t\t}\n\t\t});\n\t}\n\n    viewImage = (e) => {\n\t\tconst { id, idx } = e.target.closest('img').dataset;\n        const { viewImageIdx } = this.state;\n        viewImageIdx[id] = idx;\n        this.setState({ viewImageIdx });\n    }\n\n    shareLink = (e) => {\n        const { url, title, text } = e.target.closest('button').dataset;\n        const { appState } = this.props.stores;\n        appState.shareUrl({ url, title, text });\n    }\n\n        // Overlay functions\n    onTeamClick = (e, teamid) => {\n        e.preventDefault();\n        e.stopPropagation();\n        this.setState({\n            showTeam: teamid,\n        });\n        return false;\n    }\n\n    hideTeam = () => {\n        this.setState({\n            showTeam: null,\n        });\n    }\n\n    onUserClick = (e, userid) => {\n        e.preventDefault();\n        e.stopPropagation();\n        return false;\n    }\n\n    onDogClick = (e, dogid, dogs) => {\n        e.preventDefault();\n        e.stopPropagation();\n        this.setState({\n            showDog: dogid,\n            dogs,\n        });\n        return false;\n    }\n\n    hideDog = () => {\n        this.setState({\n            showDog: null,\n        });\n    }\n\n    render() {\n        const {\n            showDate,\n            showAddComment,\n            viewImageIdx = {},\n            likeWorkout,\n            dogs,\n            showTeam,\n            showDog,\n        } = this.state;\n        const {\n            workout,\n            showDate: forceShowDate,\n            wrapperClasses = 'col-12 col-sm-8 col-lg-6 offset-sm-2 offset-lg-3',\n            wrapperClassesRow = 'row',\n        } = this.props;\n\t\tconst { userStore, appState, workoutStore } = this.props.stores;\n        const { viewmode, hasShareApi } = appState;\n        const { user, dogs: allDogs } = userStore;\n        const { language = 'en' } = user;\n        const intensity = userStore.findIntensity({ code: workout.intensity, language }) || {};\n        // const teamName = userStore.findTeam(workout.team);\n        const team = userStore.findTeam(workout.team, true) || {};\n        const teamName = team.name;\n        // const teamNames = workout.teams ? workout.teams.map(e => userStore.findTeam(e)) : [];\n        const teamNames = [];\n        if (teamName) {\n            teamNames.push(teamName);\n        }\n        if (workout.teams) {\n            workout.teams.forEach((e) => {\n                if (userStore.findTeam(e)) {\n                    teamNames.push(userStore.findTeam(e));\n                }\n            });\n        }\n\n        const { likes = [], comments = [] } = workout;\n\t\tconst hasLikedWorkout = workout.likes && workout.likes.findIndex(e => e.user === user.id) > -1;\n        const { gpxInfo = {}, mushers = [] } = workout;\n\t\tconst { loadIndex = 0 } = gpxInfo;\n        const workoutEquipment = userStore.findEquipment({ equipment: workout.equipment, language });\n        const workoutEquipmentIcon = userStore.findEquipment({ equipment: workout.equipment, field: 'icon' });\n\n        const musherImages = [];\n        if (mushers.length > 1) {\n            mushers.slice(1, 10).map((musher) => {\n                const u = workoutStore.findPublicUser(musher) || {};\n                if (u.images && u.images[0]) {\n                    musherImages.push(u.images[0]);\n                }\n            });\n        }\n\n        const publicUser = workoutStore.findPublicUser(mushers[0]) || {};\n        let image;\n        if (publicUser && publicUser.images && publicUser.images[0]) {\n            image = publicUser.images[0];\n        } else if (team.image && team.image.s3SmallLink) {\n            image = team.image;\n        } else if (team.images && team.images[0] && team.images[0].s3SmallLink) {\n            image = team.images[0];\n        } else if (workout.image && workout.image.s3SmallLink) {\n            image = workout.image;\n        }\n\n        const images = [];\n        if (workout.mapImage) {\n            images.push({\n                ...workout.mapImage,\n                type: 'map',\n            });\n        }\n        if (workout.images) {\n            const imgs = toJS(workout.images);\n            images.push(...imgs);\n        }\n        const imageIdx = viewImageIdx[workout.id] ? viewImageIdx[workout.id] : 0;\n        const currentImage = images && images[imageIdx] ? images[imageIdx] : null;\n\n        let batteryUsage;\n        if (workout && workout.gpxInfo && workout.gpxInfo.battegryLevelStart) {\n            batteryUsage = (workout.gpxInfo.battegryLevelStart - workout.gpxInfo.battegryLevelEnd) * 100;\n        }\n\n        const views = mu.getViews(workout.statistics);\n\n        // let temperature;\n        // let windSpeed;\n        // if (util.checkNested(workout, 'temperature')) {\n        //     const yr = toJS(workout.yr[0].instant.details);\n        //     // displayValue = `Yr.no: 🌡️ ${yr.air_temperature}°C, 💨 ${yr.wind_speed}m/s 🧭 ${mu.windDirection(yr.wind_from_direction)}, ☁️ ${yr.cloud_area_fraction}%, ${yr.air_pressure_at_sea_level}mb, 💦 ${yr.relative_humidity}%`;\n        //     temperature = `${yr.air_temperature}°C`;\n        //     windSpeed = `${yr.wind_speed}m/s`;\n        // }\n\t\t// // const loadMultiplier = loadIndex / 100;\n\n        return (<>\n\n            {showTeam && <Overlay>\n                <TeamsPublicDetail stores={this.props.stores} teamid={showTeam} marginTop={'0px;'} marginBottom={'0px;'} back={this.hideTeam} hideTeam={this.hideTeam} />\n            </Overlay>}\n\n            {showDog && <Overlay>\n                <DogPublicDetail stores={this.props.stores} dogid={showDog} marginTop={'0px;'} marginBottom={'0px;'} back={this.hideDog} dogs={dogs} />\n            </Overlay>}\n\n            <div class='w-100 mb-2'>\n                <div class={wrapperClassesRow}>\n\n                    <div class={`${wrapperClasses} d-flex mb-0 position-relative`}>\n\n                        {/* {workout.gpxInfo && <svg viewBox='0 0 300 300' style='top: 80px; left: 10px; width: 90px; height: 90px;' class='position-absolute'>\n                            <path d={`${workout.gpxInfo.svgMap}`} style='fill: none; stroke: #0063FF; stroke-width: 5; opacity: 0.3;' />\n                        </svg>} */}\n\n                        {/* {JSON.stringify(workout, null, 4)} */}\n                        <div class='text-center'>\n                            <div\n                                class={`position-relative text-center border rounded-circle imageRounded ${getWorkoutColor(workout)}`}\n                                style={`${image ? `background-image: url(\"${image.s3SmallLink}\"); background-size: cover;` : ''} border-width: 3px !important;`}\n                            >\n                                {!image && <i class={`${getWorkoutIcon(workout)} text-${intensity.class ? intensity.class : 'muted'} mt-3`} style='font-size: 40px;' />}\n\n                                {musherImages && musherImages.map((img, idx) => <>\n                                    <div\n                                        class='position-absolute rounded-circle imageRounded border imageRoundedThumb border-white'\n                                        style={`\n                                            background-image: url(\"${img.s3SmallLink}\");\n                                            background-size: cover;\n                                            bottom: -3px;\n                                            left: ${-5 + (idx * 10)}px;\n                                        `}\n                                    />\n                                </>)}\n                            </div>\n                            {workout.temperature !== 0 && <>\n                                <span class='text-muted font-weight-light'>\n                                    <Temperature stores={this.props.stores} value={workout.temperature} />\n                                </span>\n                            </>}\n                        </div>\n                        <div class='flex-grow-1 pl-3' style='line-height: 1.2em;'>\n                            <span class='float-right'>\n                                {workout.isLocked === 1 && <i class='fas fa-lock text-danger ml-3' />}\n                                {workout.isInProgress === 1 && <div class='spinner-grow text-success ml-3' role='status' />}\n                                {workout.isInProgress === 2 && <i class='fas fa-pause-circle text-warning ml-3' />}\n                            </span>\n                            <a class='stretched-link' href={`/workouts/${workout.id}`}>\n                                <h5 class='my-0 mb-1' style='line-height: 1.0em;'>\n                                    {workout.name}\n                                </h5>\n                            </a>\n                            {teamNames && teamNames.length > 0 && <small class='font-weight-lighter'>\n                                {teamNames.map((name, idx) => <>{idx > 0 ? ', ' : ''}{name}</>)}\n                            </small>}\n                            <br />\n                            <small class='text-muted'>\n                                {workout.date && <small onClick={this.toggleDate}>\n                                    {forceShowDate || showDate ? util.formatDate(workout.date, { locale: 'no-NB', hour12: false, hour: '2-digit', minute: '2-digit' }) : util.formatDistance(workout.date, new Date(), { locale: 'no-NB' })}\n                                </small>}\n                                <span class={`badge badge-${intensity.class} ml-2`}>{intensity.name}</span>\n                                {loadIndex > 0 && <span class={`ml-2 text-${mu.getLoadIndexColor(util.normalizeBetween(loadIndex, 0, MAX_LOADINDEX, 0, 100))}`}>\n                                    <i class='fas fa-hand-rock mr-1' />\n                                    {Math.floor(util.normalizeBetween(loadIndex, 0, MAX_LOADINDEX, 0, 100))} -&nbsp;\n                                    {mu.getLoadIndexText(util.normalizeBetween(loadIndex, 0, MAX_LOADINDEX, 0, 100))}\n                                </span>}\n                                <br />\n                            </small>\n                            <small>\n                                <div class='text-muted'>\n                                    {workout.garminId > 0 && <div class={`float-left mr-2 text-center border rounded-circle imageRounded imageRoundedIcon`} style={`background-image: url(\"./assets/garmin-connect.png\");`} />}\n                                    {workout.stravaId > 0&& <div class={`float-left mr-2 text-center border rounded-circle imageRounded imageRoundedIcon`} style={`background-image: url(\"./assets/strava-icon.png\");`} />}\n\n                                    {workout.equipment > 0 && <><i class={`${workoutEquipmentIcon} ml-2`} /> {workoutEquipment}</>}\n                                    {/* {workout.distanceKm > 0 && <><i class='fas fa-road ml-2' /> {displayDistance(workout.distanceKm)}km</>}\n                                    {workout.elevation > 0 && <><i class='fas fa-mountain ml-2' /> {util.format(workout.elevation, 0)}m</>} */}\n                                    {/* {workout.speedAvg > 0 && <><i class='fas fa-tachometer-alt ml-2' /> {util.format(workout.speedAvg, 1)}km/t</>} */}\n                                    {workout.dogs > 0 && <><i class='fas fa-dog ml-2' /> {workout.dogs.length}</>}\n                                    {workout.track > 0 && <><i class={`fas fa-map-marked text-${workout.track > 0 ? 'success' : 'danger'} ml-2`} /></>}\n                                    {workout.dogsLeft > 0 && <><i class={`fas fa-crosshairs text-${workout.dogsLeft && workout.dogsRight ? 'success' : 'danger'} ml-2`} /></>}\n                                    {workout.sledWeight > 0 && <>\n                                        <i class='fas fa-sleigh ml-2' /> <Weight stores={this.props.stores} value={workout.sledWeight} />\n                                    </>}\n                                    {batteryUsage > 0 && <span class='text-muted ml-2'><i class='fas fa-battery-three-quarters' /> {util.format(batteryUsage, 1)}% <Text id='workout.battery-used'>used</Text></span>}\n                                </div>\n                                {['beta', 'advanced'].indexOf(viewmode) > -1 && (\n                                    <span class='text-muted'>\n                                        <i class='fas fa-balance-scale' /> {util.format(workout.kcalBurnedTotal)} <Text id='workout.kcal'>kcal</Text>\n                                        <i class='fas fa-drumstick-bite ml-2' /> <Weight stores={this.props.stores} value={workout.kcalMeatGramsTotal / 1000} />\n                                        <i class='fas fa-fish ml-2' /> <Weight stores={this.props.stores} value={workout.kcalSalmonGramsTotal / 1000} />\n                                        <i class='fas fa-piggy-bank ml-2' /> <Weight stores={this.props.stores} value={workout.kcalFatGramsTotal / 1000} />\n                                    </span>\n                                )}\n                            </small>\n                        </div>\n                    </div>\n                    <div class={`${wrapperClasses} position-relative mt-2`}>\n                        <strong>\n                            {workout.description}\n                        </strong>\n                    </div>\n                    <div class={`${wrapperClasses} position-relative`}>\n                        <Markdown markdown={mu.replaceImages(workout.comment, workout.images, language)} markdownOpts={mu.getMarkdownOptions()} />\n                    </div>\n                    <div class={`${wrapperClasses} d-flex mb-0 position-relative`}>\n                        <div class='container-fluid px-0'>\n                            <div class='row mt-1'>\n                                {workout.distanceKm > 0 && <div class='col-3'>\n                                    <div class='text-overflow'>\n                                        <small><i class='fas fa-road' /> <Text id='workout.calendar.distance'>Distanse</Text></small>\n                                    </div>\n                                    <div class='text-overflow font-weight-light' style='font-size: 1.2em;'>\n                                        <Distance stores={this.props.stores} value={workout.distanceKm} />\n                                    </div>\n                                </div>}\n                                {workout.elevation > 0 && <div class='col-3'>\n                                    <div class='text-overflow'>\n                                        <small><i class='fas fa-mountain' /> <Text id='workout.calendar.ascend'>Høydemeter</Text></small>\n                                    </div>\n                                    <div class='text-overflow font-weight-light' style='font-size: 1.2em;'>\n                                        <Elevation stores={this.props.stores} value={workout.elevation} />\n                                    </div>\n                                </div>}\n                                {workout.duration > 0 && <div class='col-3'>\n                                    <div class='text-overflow'>\n                                        <small><i class='fas fa-clock' /> <Text id='workout.calendar.duration'>Varighet</Text></small>\n                                    </div>\n                                    <div class='text-overflow font-weight-light' style='font-size: 1.2em;'>\n                                        {util.secToHms(workout.duration, true)}\n                                    </div>\n                                </div>}\n                                {workout.speedAvg > 0 && <div class='col-3'>\n                                    <div class='text-overflow'>\n                                        <small><i class='fas fa-tachometer-alt' /> <Text id='workout.calendar.avg-speed'>Snittfart</Text></small>\n                                    </div>\n                                    <div class='text-overflow font-weight-light' style='font-size: 1.2em;'>\n\t\t\t\t                        {workout.gpxInfo && workout.gpxInfo.avgGpsMovingSpeed > 0 ? <>\n                                            <Speed stores={this.props.stores} value={workout.gpxInfo.avgGpsMovingSpeed * 3.6} />\n                                        </> : <>\n                                            <Speed stores={this.props.stores} value={workout.speedAvg} />\n                                        </>}\n                                    </div>\n                                </div>}\n                            </div>\n                        </div>\n                    </div>\n\n                    {['beta', 'advanced', 'normal'].indexOf(viewmode) > -1 && (\n                        <div class={`${wrapperClasses}`}>\n                            <div class='container-fluid px-0 mt-1'>\n                                <div class='row'>\n                                    <ImageScroller stores={this.props.stores} images={images} id={workout.id} dblClick={this.likeWorkout} likeRef={likeWorkout} />\n                                </div>\n                            </div>\n                        </div>\n                    )}\n\n                    {['beta', 'advanced', 'normal'].indexOf(viewmode) > -1 && <>\n                        {workout.dogs && workout.dogs.length > 0 && <div class='container-fluid px-0 mt-1'>\n                            <div class='row pt-2'>\n                                <DogScroller stores={this.props.stores} dogs={workout.dogs} allDogs={allDogs} onDogClick={this.onDogClick} />\n                            </div>\n                        </div>}\n\n                        <div class='mt-2'>\n                            <LikesAndComments\n                                stores={this.props.stores}\n                                likes={likes}\n                                comments={comments}\n                                type='workout'\n                                onTeamClick={this.onTeamClick}\n                                onUserClick={this.onUserClick}\n                            />\n                        </div>\n\n                    </>}\n\n                    {['beta', 'advanced', 'normal'].indexOf(viewmode) > -1 && <>\n                        <div class={`${wrapperClasses} mb-0 position-relative mt-2`}>\n                            <div class='row'>\n                                <div class='col text-center'>\n                                    <button type='button' class={`btn btn-sm btn-outline-${hasLikedWorkout ? 'primary' : 'secondary'} btn-lg btn-block ${hasLikedWorkout ? 'text-primary' : ''}`}\n                                        onClick={this.likeWorkout}\n                                        // disabled={hasLikedWorkout}\n                                    >\n                                        <i class={`${hasLikedWorkout ? 'text-primary fas' : 'far'} fa-thumbs-up`} /> <Text id='comments.like'>Lik</Text>\n                                    </button>\n                                </div>\n                                <div class='col text-center'>\n                                    <button type='button' class='btn btn-sm btn-outline-secondary btn-lg btn-block'\n                                        data-id={workout.id}\n                                        onClick={this.toggleAddComment}\n                                    >\n                                        <i class='fas fa-comment' /> <Text id='comments.comment-add'>Kommentar</Text>\n                                    </button>\n                                </div>\n                                {hasShareApi ? <>\n                                    <div class='col text-center'>\n                                        <button class='btn btn-sm btn-outline-secondary btn-lg btn-block text-overflow'\n                                            onClick={this.shareLink}\n                                            data-url={`https://themusher.app/share/workout/${workout.uuidv4}`}\n                                            data-title={`title: ${workout.name}`}\n                                        >\n                                            <i class='fas fa-share' /> <Text id='workout.share'>Del</Text>\n                                        </button>\n                                    </div>\n                                </> : <>\n                                    <div class='col text-center'>\n                                        <a class='btn btn-sm btn-outline-secondary btn-lg btn-block text-overflow'\n                                            href={`https://themusher.app/share/workout/${workout.uuidv4}`}\n                                            target='_blank'\n                                            rel='noreferrer'\n                                            data-native\n                                        >\n                                            <i class='fas fa-share' /> <Text id='workout.share'>Del</Text>\n                                        </a>\n                                    </div>\n                                </>}\n                            </div>\n                        </div>\n\n                        <div class={`${wrapperClasses} mt-2 mb-3`}>\n                            {showAddComment && <WorkoutAddComment\n                                stores={this.props.stores}\n                                workout={workout}\n                                inputRef={c => this.inputRef[workout.id] = c}\n                                inputRefObject={this.inputRef}\n                                col='12'\n                                offset='0'\n                            />}\n                            <WorkoutComments stores={this.props.stores} workout={workout} col='10' offset='2' compact={true} />\n                        </div>\n\n                        {views > 0 && <>\n                            <div class='mt-2'>\n                                <Views\n                                    stores={this.props.stores}\n                                    views={views}\n                                    object={workout}\n                                    type='workout'\n                                    isTeamAdmin={true}\n                                    isAdmin={false}\n                                    onTeamClick={this.onTeamClick}\n                                    onUserClick={this.onUserClick}\n                                />\n                            </div>\n                        </>}\n\n                    </>}\n\n                </div>\n            </div>\n        </>);\n    }\n}\n\nexport default Workout;\n","import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport { Text, Localizer, withText } from 'preact-i18n';\n\nimport Speed from '../../components/data/speed';\nimport Elevation from '../../components/data/elevation';\nimport Weight from '../../components/data/weight';\nimport Distance from '../../components/data/distance';\nimport Temperature from '../../components/data/temperature';\n\nimport mu from '../../lib/musher-util';\n\n@observer\nclass Dog extends Component {\n    render() {\n        const { dog } = this.props;\n\t\tconst { userStore, dogStore, appState } = this.props.stores;\n        const { isAdmin, user } = userStore;\n        const { language = 'en' } = user;\n        const { viewmode } = appState;\n\n        const currentMonth = new Date().getMonth() + 1;\n        const currentYear = new Date().getFullYear();\n\t\tconst { month = currentMonth, year = currentYear } = this.props;\n\t\tconst seasonStart = parseInt(month < 8 ? year - 1 : year, 10);\n\n        const workoutSummary = dogStore.findWorkoutSummary(dog.id, seasonStart) || {};\n        // {\"0\":{\"year\":2020,\"dog\":16,\"count\":1,\"distanceKm\":9.9,\"elevation\":202,\"duration\":0,\"speedAvg\":0}}\n        const dogStatuses = dog.statuses ? dog.statuses.map(e => userStore.findDogstatus({ status: e, language })) : [];\n        const dogVaccines = dogStore.findVaccineStatuses(dog.id);\n        const dogVaccineLogStatuses = dogStore.findVaccineLogStatuses(dog.chipId);\n        const dogHistoryStatuses = dogStore.findHistoryStatuses(dog.id);\n        const dogStatus = userStore.findDogstatus({ status: dog.status, language });\n        const dogPosition = userStore.findDogposition({ position: dog.position, language });\n        const teamNames = [];\n        if (userStore.findTeam(dog.team)) {\n            teamNames.push(userStore.findTeam(dog.team));\n        }\n        if (dog.teams) {\n            dog.teams.forEach((e) => {\n                if (userStore.findTeam(e)) {\n                    teamNames.push(userStore.findTeam(e));\n                }\n            });\n        }\n        const hasBirthday = mu.hasBirthday(dog.birth);\n        const daysUntilBirthday = dog.birth ? Math.ceil(mu.daysUntilNextBirthday(dog.birth)) : 365;\n\n        const { url = `/dogs/${dog.id}` } = this.props;\n\n        return (\n            <div class='w-100 mb-3'>\n                <div class='row'>\n                    <div class='col-12 col-sm-8 col-lg-6 offset-sm-2 offset-lg-3 d-flex mb-0 position-relative'>\n                        {/* {JSON.stringify(dog, null, 4)} */}\n                        <div class={`text-center border rounded-circle imageRounded text-muted pt-2`} style={dog.image ? `background-image: url(\"${dog.image.s3SmallLink}\"); background-size: cover;` : ''}>\n                            {/* {!dog.image && <i class='fas fa-dog mt-3' style='font-size: 40px;' />} */}\n                            {!dog.image && <span class='font-weight-lighter' style='font-size: 35px;'>{util.ucfirst(dog.name, true)}</span>}\n                        </div>\n                        <div class='flex-grow-1 pl-3 pr-2'\n                            style={`border-right: 4px solid ${userStore.findHarness(dog.harness, 'colorNonstop')} !important; line-height: 1.2em;`}\n                        >\n                            <span class='float-right'>\n                                {dogPosition && <span class={`badge badge-${dogPosition.class || 'primary'} mr-3`}>{dogPosition.icon && <i class={dogPosition.icon} />} {dogPosition.name}</span>}\n                                {daysUntilBirthday < 7 && <>\n                                    <span class='text-muted mr-2'>\n                                        <i class='fas fa-birthday-cake' /> in {daysUntilBirthday} days\n                                    </span>\n                                </>}                                \n                                {dog.birth && <span class='mr-2'>{util.age(dog.birth, dog.deceased)}</span>}\n                                {dog.gender === 'female' ? <i class='fas fa-venus' /> : <i class='fas fa-mars' />}\n                            </span>\n                            <a class='stretched-link' href={url}>\n                                <h5 class='mb-1' style='line-height: 1.0em;'>\n                                    {dog.shortname || dog.name} {dog.shortname && dog.shortname !== '' && <> - <span class='font-weight-lighter'>{dog.name}</span></>}\n                                    {hasBirthday && <>\n                                        <i class='fas fa-birthday-cake ml-3' />\n                                    </>}\n                                </h5>\n                            </a>\n                            <div>\n                                {teamNames && teamNames.length > 0 && <small class='font-weight-lighter'>\n                                    {teamNames.map((name, idx) => <>{idx > 0 ? ', ' : ''}{name}</>)}\n                                </small>}\n                                <br />\n                            </div>\n\n                            <small class='text-muted'>\n                                {/* {dog.chipId && <span class='ml-0'><i class='fas fa-microchip' /> {dog.chipId}</span>} */}\n                                {dog.history > 0 && <span class='ml-0'><i class='fas fa-file-signature' /> {dog.history.length}</span>}\n                                {dog.images > 0 && <span class='ml-2'><i class='fas fa-image' /> {dog.images.length}</span>}\n\n                                {workoutSummary && workoutSummary.distanceKm > 0 && <span class='ml-2'><i class='fas fa-road' /> <Distance stores={this.props.stores} value={workoutSummary.distanceKm} /></span>}\n                                {workoutSummary && workoutSummary.elevation > 0 && <span class='ml-2'><i class='fas fa-mountain' /> <Elevation stores={this.props.stores} value={workoutSummary.elevation} /></span>}\n                                {workoutSummary && workoutSummary.duration > 0 && <span class='ml-2'><i class='fas fa-clock' /> {util.secToHms(workoutSummary.duration, true)}</span>}\n                                {workoutSummary && workoutSummary.speedAvg > 0 && <span class='ml-2'><i class='fas fa-tachometer-alt' /> <Speed stores={this.props.stores} value={workoutSummary.speedAvg} /></span>}\n\n                                {dog.weight > 0 && <><i class='fas fa-balance-scale ml-2' /> <Weight stores={this.props.stores} value={dog.weight} /></>}\n                                {dog.bodyScore > 0 && <><i class='fas fa-dog ml-2' /> {util.format(dog.bodyScore, 1)}</>}\n                            </small>\n\n                            {['beta', 'advanced', 'normal'].indexOf(viewmode) > -1 && <>\n                                <div>\n                                    {dogVaccines && dogVaccines.map(v => (\n                                        <span class={`badge badge-success mr-2`} title={util.isoDate(v.endDate, false, false, true)}>\n                                            {v.vaccineType}\n                                            <span class='font-weight-light ml-3'>\n                                                <i class='fas fa-calendar-check' /> {util.isoDate(v.endDate, false, false, true)}                                    \n                                            </span>\n                                        </span>\n                                    ))}\n                                    {dogHistoryStatuses && dogHistoryStatuses.map(v => (\n                                        <span class={`badge badge-warning mr-2`} title={util.isoDate(v.endDate, false, false, true)}>{v.title}</span>\n                                    ))}\n                                </div>\n                            </>}\n\n                            {['beta', 'advanced'].indexOf(viewmode) > -1 && <>\n                                {dog.positions && dog.positions.lead && <div class=''>\n                                    {dog.positions.lead.distanceKm > 0 && <span class='badge badge-secondary mr-2'>\n                                        <span class='font-weight-lighter'><Text id='dogs.sort-lead'>Lead</Text>:</span> <Distance stores={this.props.stores} value={dog.positions.lead.distanceKm} />\n                                    </span>}\n                                    {dog.positions.point.distanceKm > 0 && <span class='badge badge-secondary mr-2'>\n                                        <span class='font-weight-lighter'><Text id='dogs.sort-point'>Point</Text>:</span> <Distance stores={this.props.stores} value={dog.positions.point.distanceKm} />\n                                    </span>}\n                                    {dog.positions.team.distanceKm > 0 && <span class='badge badge-secondary mr-2'>\n                                        <span class='font-weight-lighter'><Text id='dogs.sort-team'>Team</Text>:</span> <Distance stores={this.props.stores} value={dog.positions.team.distanceKm} />\n                                    </span>}\n                                    {dog.positions.wheel.distanceKm > 0 && <span class='badge badge-secondary mr-2'>\n                                        <span class='font-weight-lighter'><Text id='dogs.sort-wheel'>Wheel</Text>:</span> <Distance stores={this.props.stores} value={dog.positions.wheel.distanceKm} />\n                                    </span>}\n                                </div>}\n                            </>}\n\n                            <div class='clearfix pb-0'>\n                                {dog.specialNeeds && <span class={`badge badge-warning ml-2 mt-1 float-right`}><i class='fas fa-exclamation-triangle' /> {dog.specialNeeds}</span>}\n                                {dogStatus && <span class={`badge badge-${dogStatus.class} ml-2 mt-1 float-right`}>{dogStatus.icon && <i class={dogStatus.icon} />} {dogStatus.name}</span>}\n                                {dogStatuses && dogStatuses.map(status => <>\n                                    <span class={`badge badge-${status.class} ml-2 mt-1 float-right`}>\n                                        {status.icon && <i class={status.icon} />} {status.lang && status.lang[language] ? status.lang[language] : status.name}\n                                    </span>\n                                </>)}\n                            </div>\n\n                            {dogVaccineLogStatuses && dogVaccineLogStatuses.length > 0 && <>\n                                <div class='mt-2'>\n                                    {dogVaccineLogStatuses && dogVaccineLogStatuses.filter(e => e.chipId === dog.chipId).map((vac) => {\n                                        return (\n                                            <span class={`badge badge-${vac.inKarens ? 'warning' : 'success'} mr-2 mb-1`}>\n                                                <i class='fas fa-user-md' /> {vac.vaccineAgens.name}\n                                                {/* <span class='font-weight-lighter ml-2'> */}\n                                                    {/* <i class='fas fa-calendar-check' /> {util.isoDate(vac.vaccineAgens.durationEnd, false, false, true)} */}\n                                                    {/* {vac.inKarens && <>\n                                                        <br />\n                                                        (karens: {util.format(vac.karensDaysLeft, 0)} days left)\n                                                    </>} */}\n                                                {/* </span> */}\n                                            </span>\n                                        );\n                                    })}\n                                </div>\n                            </>}\n\n                        </div>\n                    </div>\n                </div>\n            </div>\n        );\n    }\n}\n\nexport default Dog;\n","import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport { Text, Localizer } from 'preact-i18n';\n\nimport DogSimplePublic from './simplePublic';\n\n@observer\nclass DogScroller extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            imageIdx: 0,\n        };\n    }\n\n    scrollImages = (e) => {\n        const { dogs } = this.props;\n\n        const { scrollLeft, scrollWidth, clientWidth } = e.target;\n        const imageStep = clientWidth;\n        const imageIdx = scrollLeft / imageStep;\n        // console.log({ e, imageStep, imageIdx, scrollLeft, scrollWidth, clientWidth });\n\n        const nearestInt = Math.round(imageIdx);\n        const diff = Math.abs(nearestInt - imageIdx);\n        // console.log({ nearestInt, diff });\n        if (Number.isInteger(imageIdx) || diff < 0.1) {\n            this.setState({\n                imageIdx: nearestInt,\n            });\n        }\n    }\n\n    sortByName = (a, b) => {\n        const { allDogs = [] } = this.props;\n        const dogA = allDogs.find(e => e.id === a);\n        const dogB = allDogs.find(e => e.id === b);\n        if (dogA && dogB) {\n            if (dogA.name > dogB.name) {\n                return 1;\n            }\n        }\n        return -1;\n    }\n\n    render() {\n        const { imageIdx } = this.state;\n        const { dogs, allDogs = [], size = 'medium', onDogClick = () => {} } = this.props;\n\n        return (\n            <div class='w-100'>\n                <div\n                    class='d-flex flex-row flex-nowrap no-scrollbar'\n                    style='overflow: auto; scroll-snap-type: x mandatory;'\n                    onScroll={this.scrollImages}\n                >\n                    {dogs && dogs.sort(this.sortByName).map((dogId, idx) => {\n                        const dog = allDogs.find(e => e.id === dogId);\n                        if (!dog) {\n                            return '';\n                        }\n                        return (\n                            <div class='col clearfix position-relative p-0 mx-2'>\n                                <div\n                                    class={`w-100 h-100 text-center rounded-lg imageContainer d-flex justify-content-center align-items-center`}\n                                    style={`\n                                        flex-wrap: wrap;\n                                        overflow-y: hidden;\n                                    `}\n                                    onTouchstart={(e) => { e.stopPropagation(); }}\n                                    onTouchend={(e) => { e.stopPropagation(); }}\n                                    onTouchmove={(e) => { e.stopPropagation(); }}\n                                >\n                                    <DogSimplePublic\n                                        stores={this.props.stores}\n                                        dog={dog}\n                                        dogs={allDogs.filter(d => dogs.indexOf(d.id) > -1).sort((a, b) => a.name > b.name ? 1 : -1)}\n                                        className='mx-auto'\n                                        showName={true}\n                                        showPosition={false}\n                                        size={size}\n                                        onDogClick={onDogClick} \n                                    />\n                                    {/* <xmp>{JSON.stringify(img, null, 4)}</xmp> */}\n                                </div>\n                            </div>\n                        );\n                    })}\n                </div>\n            </div>\n        );\n    }\n}\n\nexport default DogScroller;\n","import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport { Text, Localizer } from 'preact-i18n';\n\nimport Speed from '../../components/data/speed';\nimport Elevation from '../../components/data/elevation';\nimport Weight from '../../components/data/weight';\nimport Distance from '../../components/data/distance';\nimport Temperature from '../../components/data/temperature';\n\nimport mu from '../../lib/musher-util';\n\n@observer\nclass Team extends Component {\n    requestFollowTeam = (e) => {\n        e.preventDefault();\n        e.stopPropagation();\n        const { teamStore, userStore } = this.props.stores;\n        const { user } = userStore;\n        const teamId = parseInt(e.target.parentElement.dataset.team || e.target.dataset.team, 10);\n        teamStore.followRequest(teamId, user);\n        this.setState({ requestSent: true });\n    }\n\n    getButton = (text = '') => {\n        const { requestSent } = this.state;\n        const { userStore } = this.props.stores;\n        const { user } = userStore;\n        const { team, skipHome } = this.props;\n        const isYourTeam = team.members && team.members.indexOf(user.id) > -1;\n        const isFollowing = team.followers && team.followers.indexOf(user.id) > -1;\n        const isBlocked = team.blockedFollowers && team.blockedFollowers.indexOf(user.id) > -1;\n        const hasRequestedFollow = requestSent || team.followRequests && team.followRequests.findIndex(e => e.id === user.id) > -1;\n\n        if (isYourTeam) {\n            if (skipHome) {\n                return '';\n            }\n            return (\n                <i class='fas fa-home' />\n            );\n        }\n        if (isFollowing) {\n            return (\n                <button\n                    type='button'\n                    class={`btn btn-sm btn-outline-secondary float-right`}\n                    onClick={this.unFollowTeam}\n                    disabled='true'\n                    data-team={team.id}\n                >\n                    <i class='fas fa-link mr-2' />\n                    <Text id='teams.connect.is-following'>Følger</Text> {text}\n                </button>\n            );\n        }\n        if (isBlocked) {\n            return '';\n            // return (\n            //     <button\n            //         class={`btn btn-block btn-outline-secondary float-right`}\n            //         disabled='true'\n            //     >\n            //         <i class='fas fa-hand-paper mr-2' />\n            //         <Text id='teams.connect.is-blocked'>Blokkert</Text> {text}\n            //     </button>\n            // );\n        }\n        if (hasRequestedFollow) {\n            return (\n                <button\n                    type='button'\n                    class={`btn btn-sm btn-outline-secondary float-right`}\n                    disabled='true'\n                >\n                    <i class='fas fa-hourglass-half mr-2' />\n                    <Text id='teams.connect.has-requested'>Venter på godkjenning</Text> {text}\n                </button>\n            );\n        }\n        if (team.public) {\n            return (\n                <button\n                    type='button'\n                    class={`btn btn-sm btn-outline-success float-right`}\n                    onClick={this.requestFollowTeam}\n                    data-team={team.id}\n                >\n                    <i class='far fa-hand-point-right mr-2' />\n                    <Text id='teams.connect.follow'>Følg</Text> {text}\n                </button>\n            );\n        }\n    }\n\n    render() {\n        const { team, showButton, publicUsers = [], showLocation, showMembers } = this.props;\n        const { teamStore, userStore } = this.props.stores;\n\n        const currentMonth = new Date().getMonth() + 1;\n        const currentYear = new Date().getFullYear();\n\t\tconst { month = currentMonth, year = currentYear } = this.props;\n\t\tconst seasonStart = parseInt(month < 8 ? year - 1 : year, 10);\n\n        const workoutSummary = teamStore.findWorkoutSummary(team.id, seasonStart) || {};\n        const { user } = userStore;\n        const { language = 'en' } = user;\n        const teamAmbition = userStore.findTeamAmbition({ ambition: team.ambitions, language });\n        const teamType = userStore.findTeamType({ type: team.type, language });\n\n        const teamUser = publicUsers.find(e => e.id === team.user);\n        const teamUserDisplayName = mu.displayName(teamUser);\n        const image = mu.getImage({ user: teamUser, team, priority: 'user' });\n\n        const { url = `/teams/${team.id}` } = this.props;\n\n        return (\n            <div class='w-100 mb-3'>\n                <div class='row'>\n                    <div class='col-12 col-sm-8 col-lg-6 offset-sm-2 offset-lg-3 d-flex mb-0 position-relative'>\n                        <div class='position-relative d-flex flex-grow-1'>\n                            {/* {JSON.stringify(team, null, 4)} */}\n                            <div class={`text-center border rounded-circle imageRounded`} style={image ? `background-image: url(\"${image}\"); background-size: cover;` : ''}>\n                                {!image && <i class='fas fa-users text-muted mt-3' style='font-size: 40px;' />}\n                            </div>\n                            <div class='flex-grow-1 pl-3' style='line-height: 1.2em;'>\n                                <a class='stretched-link' href={url}>\n                                    <h5 class='mb-1' style='line-height: 1.0em;'>{team.name}</h5>\n                                </a>\n                                {showLocation && <div>\n                                    {(team.place || team.country) && <span class='mr-3'>\n                                        <i class='fas fa-map-marker-alt' />  {team.place} {team.place ? `, ${team.country}` : team.country}\n                                    </span>}\n                                </div>}\n                                {showMembers && <div>\n                                    {teamUser && <span class='mr-2'>\n                                        <i class='fas fa-user' /> {teamUserDisplayName}\n                                    </span>}\n\n                                    {/* {team.members && team.members.length > 1 && team.members.slice(1, 10).map(member => {\n                                        const u = publicUsers.find(e => e.id === member);\n                                        const teamUserDisplayName = mu.displayName(u);\n                                        return (<span class='badge badge-secondary font-weight-light mr-2'>\n                                            <i class='fas fa-user' /> {teamUserDisplayName}\n                                        </span>);\n                                    })} */}\n                                </div>}\n                                <div>\n                                    {teamType && <span class='badge badge-pill badge-secondary'>{teamType}</span>}\n                                    {teamAmbition && <span class='badge badge-pill badge-secondary ml-2'>{teamAmbition}</span>}\n                                </div>\n                                <small class='text-muted'>\n                                    {team && team.dogs && <span class=''><i class='fas fa-dog' /> {team.dogs.length}</span>} \n                                    {team && team.members && <span class='ml-2'><i class='fas fa-user' /> {team.members.length}</span>}\n\n                                    {workoutSummary && workoutSummary.distanceKm > 0 && <span class='ml-2'><i class='fas fa-road' /> <Distance stores={this.props.stores} value={workoutSummary.distanceKm} /></span>}\n                                    {workoutSummary && workoutSummary.elevation > 0 && <span class='ml-2'><i class='fas fa-mountain' /> <Elevation stores={this.props.stores} value={workoutSummary.elevation} /></span>}\n                                    {workoutSummary && workoutSummary.duration > 0 && <span class='ml-2'><i class='fas fa-clock' /> {util.secToHms(workoutSummary.duration)}</span>}\n                                    {workoutSummary && workoutSummary.speedAvg > 0 && <span class='ml-2'><i class='fas fa-tachometer-alt' /> <Speed stores={this.props.stores} value={workoutSummary.speedAvg} /></span>}\n                                </small>\n                            </div>\n                        </div>\n                        {showButton && <div>\n                            {this.getButton()}\n                        </div>}\n                    </div>\n                </div>\n            </div>\n        );\n    }\n}\n\nexport default Team;\n","import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport { Text, Localizer } from 'preact-i18n';\nimport linkState from 'linkstate';\n\nimport { route } from 'preact-router';\n\nimport Dog from '../../components/dog';\nimport Workout from '../../components/workout';\nimport Team from '../../components/team';\nimport Track from '../../components/track';\nimport User from '../../components/user';\nimport Story from '../../components/story/publicStory';\n\nimport TeamPublicFeedLine from '../../components/team/publicFeedLine';\n\nconst initialState = {\n\tsubmenu: 'dogs',\n\thits: 0,\n\tsearchText: '',\n};\n\n@observer\nclass Search extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            ...initialState,\n        };\n    }\n\n\tloadAll = async (props = this.props) => {\n\t\tconst { appState, storyStore, teamStore } = this.props.stores;\n\t\tconst { search } = props;\n\t    await appState.getSearch(search);\n\t\tconst { publicTeams, publicUsers } = appState;\n\t\tstoryStore.localUpdateField('publicTeams', publicTeams);\n\t\tstoryStore.localUpdateField('publicUsers', publicUsers);\n\t\tteamStore.localUpdateField('publicTeams', publicTeams);\n\t\tteamStore.localUpdateField('publicUsers', publicUsers);\n\n\t\tconst { searchResultStories, searchResultDogs, searchResultWorkouts = [], searchResultTeams, searchResultTracks } = appState;\n\t\tconst allData = [searchResultStories, searchResultDogs, searchResultWorkouts, searchResultTeams, searchResultTracks];\n\t\tconst names = ['stories', 'dogs', 'workouts', 'teams', 'tracks', 'users'];\n\t\tconst idx = allData\n\t\t\t.map(a => a.length)\n\t\t\t.indexOf(Math.max(...allData.map(a => a.length)));\n\t\tconst hits = allData.map(a => a.length).reduce((partialSum, a) => partialSum + a, 0);\n\t\tthis.setState({\n\t\t\tsearchText: search,\n\t\t\tsubmenu: names[idx],\n\t\t\thits,\n\t\t});\n\t}\n\n\tsearch = () => {\n\t\tconst { searchText } = this.state;\n\t\troute(`/search/${searchText}`);\n\t}\n\n\tchooseSubmenu = (e) => {\n\t\tconst submenu = e.target.parentElement.dataset.menu || e.target.dataset.menu;\n\t\tthis.setState({ submenu });\n\t}\n\n\tcomponentDidMount() {\n\t\tthis.loadAll();\n\t}\n\n\tcomponentWillReceiveProps(nextProps) {\n        // console.log('componentWillReceiveProps', nextProps);\n        if (nextProps.search !== this.props.search) {\n            this.loadAll(nextProps);\n        }\n    }\n\n\trender() {\n\t\tconst { appState, userStore } = this.props.stores;\n\t\tconst { search } = this.props;\n\n\t\tconst { isAdmin } = userStore;\n\t\tconst { searchResultStories, searchResultDogs, searchResultWorkouts = [], searchResultTeams, searchResultTracks, publicUsers, publicTeams } = appState;\n\t\tconst { submenu, hits, searchText } = this.state;\n\t\treturn (\n\t\t\t<div class='container-fluid' style='margin-bottom: 200px; margin-top: 60px;'>\n\t\t\t\t<div class='row'>\n\t\t\t\t\t<div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-0 mb-2'>\n\t\t\t\t\t\t<h1><Text id='search.title'>Search</Text></h1>\n\t\t\t\t\t\t<h5 class='my-3'><Text id='search.search-for' fields={{ search, hits }}>{hits} in your search for \"{search}\"</Text></h5>\n\n\t\t\t\t\t\t<div class='d-flex justify-content-center py-3'>\n\t\t\t\t\t\t\t<Localizer>\n\t\t\t\t\t\t\t\t<input class='form-control form-control mr-2' type='search' placeholder={<Text id='header.search-placeholder'>Søk etter det meste...</Text>}\n\t\t\t\t\t\t\t\t\tvalue={searchText}\n\t\t\t\t\t\t\t\t\tonInput={linkState(this, 'searchText')}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</Localizer>\n\t\t\t\t\t\t\t<button class='btn btn-outline-success' type='button'\n\t\t\t\t\t\t\t\tonClick={this.search}\n\t\t\t\t\t\t\t><Text id='header.search'>Søk</Text></button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 my-3'>\n\t\t\t\t\t\t<div class='row'>\n\t\t\t\t\t\t\t<div class='w-100 overflow-hidden'>\n                                <div\n                                    class='d-flex flex-row flex-nowrap pb-2 px-1'\n                                    style='overflow: auto; scroll-snap-type: x mandatory;'\n                                >\n\t\t\t\t\t\t\t\t\t<div class='col px-0 pt-2'>\n\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\tclass={`btn btn-block rounded-pill-left rounded-none ${submenu === 'dogs' ? 'btn-primary' : 'btn-outline-primary'} text-nowrap`}\n\t\t\t\t\t\t\t\t\t\t\tstyle='text-overflow: ellipsis; overflow: hidden;'\n\t\t\t\t\t\t\t\t\t\t\tdata-menu='dogs'\n\t\t\t\t\t\t\t\t\t\t\tonClick={this.chooseSubmenu}\n\t\t\t\t\t\t\t\t\t\t><i class='fas fa-dog' /> <Text id='search.dogs'>Dogs</Text> ({searchResultDogs.length || 0})</button>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t{/* <div class='col px-0 pt-2'>\n\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\tclass={`btn btn-block rounded-none ${submenu === 'workouts' ? 'btn-primary' : 'btn-outline-primary'} text-nowrap`}\n\t\t\t\t\t\t\t\t\t\t\tstyle='text-overflow: ellipsis; overflow: hidden;'\n\t\t\t\t\t\t\t\t\t\t\tdata-menu='workouts'\n\t\t\t\t\t\t\t\t\t\t\tonClick={this.chooseSubmenu}\n\t\t\t\t\t\t\t\t\t\t><i class='fas fa-running' /> <Text id='search.workouts'>Workouts</Text> ({searchResultWorkouts.length || 0})</button>\n\t\t\t\t\t\t\t\t\t</div> */}\n\t\t\t\t\t\t\t\t\t<div class='col px-0 pt-2'>\n\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\tclass={`btn btn-block rounded-none ${submenu === 'teams' ? 'btn-primary' : 'btn-outline-primary'} text-nowrap`}\n\t\t\t\t\t\t\t\t\t\t\tstyle='text-overflow: ellipsis; overflow: hidden;'\n\t\t\t\t\t\t\t\t\t\t\tdata-menu='teams'\n\t\t\t\t\t\t\t\t\t\t\tonClick={this.chooseSubmenu}\n\t\t\t\t\t\t\t\t\t\t><i class='fas fa-users' /> <Text id='search.teams'>Teams</Text> ({searchResultTeams.length || 0})</button>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div class='col px-0 pt-2'>\n\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\tclass={`btn btn-block rounded-none ${submenu === 'tracks' ? 'btn-primary' : 'btn-outline-primary'} text-nowrap`}\n\t\t\t\t\t\t\t\t\t\t\tstyle='text-overflow: ellipsis; overflow: hidden;'\n\t\t\t\t\t\t\t\t\t\t\tdata-menu='tracks'\n\t\t\t\t\t\t\t\t\t\t\tonClick={this.chooseSubmenu}\n\t\t\t\t\t\t\t\t\t\t><i class='fas fa-map-marked-alt' /> <Text id='search.tracks'>Tracks</Text> ({searchResultTracks.length || 0})</button>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div class='col px-0 pt-2'>\n\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\tclass={`btn btn-block rounded-pill-right rounded-none ${submenu === 'stories' ? 'btn-primary' : 'btn-outline-primary'} text-nowrap`}\n\t\t\t\t\t\t\t\t\t\t\tstyle='text-overflow: ellipsis; overflow: hidden;'\n\t\t\t\t\t\t\t\t\t\t\tdata-menu='stories'\n\t\t\t\t\t\t\t\t\t\t\tonClick={this.chooseSubmenu}\n\t\t\t\t\t\t\t\t\t\t><i class='fas fa-comments' /> <Text id='search.stories'>Stories</Text> ({searchResultStories.length || 0})</button>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t{submenu === 'dogs' && <>\n\t\t\t\t\t\t<div class='col-12'>\n\t\t\t\t\t\t\t{(!searchResultDogs || searchResultDogs.length === 0) && <>\n\t\t\t\t\t\t\t\t<div class='text-center text-muted'>\n\t\t\t\t\t\t\t\t\t<div class='display-1'>\n\t\t\t\t\t\t\t\t\t\t<i class='fas fa-dog' />\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<h3 class='font-weight-lighter'>\n\t\t\t\t\t\t\t\t\t\t<Text id='search.no-dogs-found'>No dogs found.</Text>\n\t\t\t\t\t\t\t\t\t</h3>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</>}\n\t\t\t\t\t\t\t{searchResultDogs && searchResultDogs.map(dog => (\n\t\t\t\t\t\t\t\t<Dog stores={this.props.stores} dog={dog} url={`/dogs/public/${dog.uuidv4}`} />\n\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</>}\n\t\t\t\t\t{submenu === 'workouts' && <>\n\t\t\t\t\t\t<div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-0 mb-2'>\n\t\t\t\t\t\t\t{(!searchResultWorkouts || searchResultWorkouts.length === 0) && <>\n\t\t\t\t\t\t\t\t<div class='text-center text-muted'>\n\t\t\t\t\t\t\t\t\t<div class='display-1'>\n\t\t\t\t\t\t\t\t\t\t<i class='fas fa-running' />\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<h3 class='font-weight-lighter'>\n\t\t\t\t\t\t\t\t\t\t<Text id='search.no-workouts-found'>No workouts found.</Text>\n\t\t\t\t\t\t\t\t\t</h3>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</>}\n\t\t\t\t\t\t\t{searchResultWorkouts && searchResultWorkouts.map((workout, idx) => (\n\t\t\t\t\t\t\t\t<div class='row mb-4'>\n\t\t\t\t\t\t\t\t\t<div class='col-12 py-3'>\n\t\t\t\t\t\t\t\t\t\t<TeamPublicFeedLine\n\t\t\t\t\t\t\t\t\t\t\tstores={this.props.stores}\n\t\t\t\t\t\t\t\t\t\t\tfeed={workout}\n\t\t\t\t\t\t\t\t\t\t\tidx={idx}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</>}\n\t\t\t\t\t{submenu === 'teams' && <>\n\t\t\t\t\t\t<div class='col-12'>\n\t\t\t\t\t\t\t{(!searchResultTeams || searchResultTeams.length === 0) && <>\n\t\t\t\t\t\t\t\t<div class='text-center text-muted'>\n\t\t\t\t\t\t\t\t\t<div class='display-1'>\n\t\t\t\t\t\t\t\t\t\t<i class='fas fa-users' />\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<h3 class='font-weight-lighter'>\n\t\t\t\t\t\t\t\t\t\t<Text id='search.no-teams-found'>No teams found.</Text>\n\t\t\t\t\t\t\t\t\t</h3>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</>}\n\t\t\t\t\t\t\t{searchResultTeams && searchResultTeams.map(team => <>\n\t\t\t\t\t\t\t\t<Team\n\t\t\t\t\t\t\t\t\tstores={this.props.stores}\n\t\t\t\t\t\t\t\t\tteam={team}\n\t\t\t\t\t\t\t\t\turl={`/teams/public/${team.uuidv4}`}\n\t\t\t\t\t\t\t\t\tshowButton={true}\n\t\t\t\t\t\t\t\t\tpublicUsers={publicUsers}\n\t\t\t\t\t\t\t\t\tshowMembers={1}\n\t\t\t\t\t\t\t\t\tshowLocation={1}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</>)}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</>}\n\t\t\t\t\t{submenu === 'tracks' && <>\n\t\t\t\t\t\t<div class='col-12'>\n\t\t\t\t\t\t\t{(!searchResultTracks || searchResultTracks.length === 0) && <>\n\t\t\t\t\t\t\t\t<div class='text-center text-muted'>\n\t\t\t\t\t\t\t\t\t<div class='display-1'>\n\t\t\t\t\t\t\t\t\t\t<i class='fas fa-map-marked-alt' />\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<h3 class='font-weight-lighter'>\n\t\t\t\t\t\t\t\t\t\t<Text id='search.no-tracks-found'>No tracks found.</Text>\n\t\t\t\t\t\t\t\t\t</h3>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</>}\n\t\t\t\t\t\t\t{searchResultTracks && searchResultTracks.map(track => (\n\t\t\t\t\t\t\t\t<Track stores={this.props.stores} track={track} />\n\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</>}\n\t\t\t\t\t{submenu === 'stories' && <>\n\t\t\t\t\t\t<div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-0 mb-2'>\n\t\t\t\t\t\t\t{(!searchResultStories || searchResultStories.length === 0) && <>\n\t\t\t\t\t\t\t\t<div class='text-center text-muted'>\n\t\t\t\t\t\t\t\t\t<div class='display-1'>\n\t\t\t\t\t\t\t\t\t\t<i class='fas fa-comments' />\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<h3 class='font-weight-lighter'>\n\t\t\t\t\t\t\t\t\t\t<Text id='search.no-stories-found'>No stories found.</Text>\n\t\t\t\t\t\t\t\t\t</h3>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</>}\n\t\t\t\t\t\t\t{searchResultStories && searchResultStories.map(story => (\n\t\t\t\t\t\t\t\t<div class='row mb-4'>\n\t\t\t\t\t\t\t\t\t<div class='col-12 py-3'>\n\t\t\t\t\t\t\t\t\t\t<Story\n\t\t\t\t\t\t\t\t\t\t\tstores={this.props.stores}\n\t\t\t\t\t\t\t\t\t\t\tstory={story}\n\t\t\t\t\t\t\t\t\t\t\tkey={`story-detail-${story.id}`}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</>}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nexport default Search;\n"],"sourceRoot":""}