(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{RUc2:function(t,e,s){"use strict";s.r(e),function(t){function o(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,o)}return s}function a(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?o(Object(s),!0).forEach((function(e){l(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):o(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}function l(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}var c,n=s("hosL"),i=s("Utv1"),r=s("/eY4"),d=(s("cneo"),s("OhSV")),h=s("ZOvn"),b=(s("KDoM"),s("2X7c")),p=s("7g1v"),g=(s("mPUg"),s("pJjI")),O=s("epqT"),u=s("/DnB");const f=h.a.marginTop(!0),j=h.a.marginBottom(),m=h.a.subMenuMarginTop(),y={isLoading:!1,submenu:"all",showDaysBackEdit:!1,showAllDogs:!1};let w=Object(r.a)(c=class extends n.Component{constructor(t){var e;super(t),e=this,this.loadDogs=async function(t=e.props){const{showAllDogs:s}=e.state;e.setState({isLoading:!0});const{dogStore:o,userStore:a,messageStore:l}=e.props.stores,{currentTeam:c,daysBack:n}=o,i={team:c};s&&(i.deceased=1),await Promise.all([e.loadWorkoutPlans(t),o.load({query:i,addData:["team","user","workoutSummary","vaccineStatuses","historyStatuses","vaccineLogStatuses","allDogs"]}),o.getDogsWithTraining({daysBack:n}),a.getNotifications(),l.getUnReadMessages()]),e.setState({isLoading:!1})},this.loadWorkoutPlans=async function(t=e.props){e.setState({isLoading:!0});const{year:s}=t,o=(new Date).getMonth()+1,a=i.a.getYear(),l=parseInt(s||(o<8?a-1:a),10),{workoutPlanStore:c,workoutStore:n}=t.stores,{currentTeam:r}=n;if(c.updateItem("workoutPlans",[]),c.updateItem("workoutPlan",{}),c.resetGraphPlanWeekDistanceCurrent(),r){await c.load({query:{team:r,seasonYear:l,seasonMonth:6}});const{workoutPlans:t}=c,e=t[0]||{};e.id&&(await c.load(e.id),c.prepareWeekGraphs({year:s}))}e.setState({isLoading:!1})},this.toggleDaysBackEdit=()=>{const{showDaysBackEdit:t}=this.state;this.setState({showDaysBackEdit:!t})},this.toggleShowAllDogs=()=>{const{showAllDogs:t}=this.state;this.setState({showAllDogs:!t},()=>this.loadDogs())},this.setHistoryType=t=>{this.setState({historyType:t})},this.chooseSubmenu=t=>{this.setState({submenu:t.target.parentElement.dataset.menu||t.target.dataset.menu})},this.chooseDaysBack=t=>{const e=parseInt(t.target.parentElement.dataset.daysback||t.target.dataset.daysback,10),{dogStore:s}=this.props.stores;s.setDaysBack(e),s.getDogsWithTraining({daysBack:e}),this.toggleDaysBackEdit()},this.selectDog=t=>{const{chipid:e}=t.target.closest("tr").dataset,{selectedDogs:s}=this.state;if(s.indexOf(e)>-1){const t=s.findIndex(t=>t===e);s.splice(t,1)}else s.push(e);this.setState({selectedDogs:s})},this.sendChiplist=async function(){const{selectedDogs:t}=e.state,{dogStore:s}=e.props.stores,o=await s.sendChiplistByEmail(t);e.setState({sendChiplistResponse:o})},this.state=a(a({},y),{},{selectedDogs:[]})}componentDidMount(){this.loadDogs()}render(){const{scrolledDown:e}=this.props,{isLoading:s,historyType:o,submenu:a,showDaysBackEdit:l,showAllDogs:c,selectedDogs:r,sendChiplistResponse:y}=this.state,{dogStore:w,appState:k,userStore:v}=this.props.stores,{daysBack:x,currentTeam:D}=w,{user:S}=v,{language:C="en"}=S,B=h.a.getHistoryMap(C),{darkmode:$}=k,{dogs:P,workoutSummaryCurrent:T}=w;let L=()=>!0;if(P)switch(a){case"all":L=()=>!0;break;case"leadOnly":L=t=>!!(t.positions&&t.positions.lead&&t.positions.lead.distanceKm>0);break;case"pointOnly":L=t=>!!(t.positions&&t.positions.point&&t.positions.point.distanceKm>0);break;case"teamOnly":L=t=>!!(t.positions&&t.positions.team&&t.positions.team.distanceKm>0);break;case"wheelOnly":L=t=>!!(t.positions&&t.positions.wheel&&t.positions.wheel.distanceKm>0)}let E=P.filter(L);return Object(n.h)("div",{class:"container-fluid",style:`margin-bottom: ${j}; margin-top: ${f};`},Object(n.h)("div",{class:"row fixed-top",style:`margin-top: ${e>0?0:m}; background-color: ${$?"#191d21":"#f8f9fa"}; transition: all 0.3s ease-in-out;`},Object(n.h)("div",{class:"col text-center border-bottom border-primary subtopmenu"},Object(n.h)("nobr",null,Object(n.h)("a",{href:"/dogs",class:"text-primary stretched-link"},Object(n.h)("i",{class:"fas fa-chart-line"})," ",Object(n.h)(d.c,{id:"dogs.dashboard"},"Oversikt")))),Object(n.h)("div",{class:"col text-center subtopmenu"},Object(n.h)("nobr",null,Object(n.h)("a",{href:"/dogs/list",class:"text-secondary stretched-link"},Object(n.h)("i",{class:"fas fa-list"})," ",Object(n.h)(d.c,{id:"dogs.list"},"Liste")))),Object(n.h)("div",{class:"col text-center subtopmenu"},Object(n.h)("nobr",null,Object(n.h)("a",{href:"/dogs/feed",class:"text-secondary stretched-link"},Object(n.h)("i",{class:"fas fa-rss"})," ",Object(n.h)(d.c,{id:"dogs.feed"},"Feed")))),Object(n.h)("div",{class:"col text-center subtopmenu"},Object(n.h)("nobr",null,Object(n.h)("a",{href:"/dogs/todo",class:"text-secondary stretched-link"},Object(n.h)("i",{class:"fas fa-calendar-check"})," ",Object(n.h)(d.c,{id:"dogs.todo"},"Todo"))))),Object(n.h)("div",{class:"row"},Object(n.h)("div",{class:"col-12"},Object(n.h)("div",{class:"row"},Object(n.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 px-0 mb-2 border-bottom"},Object(n.h)(g.a,{stores:this.props.stores,callback:this.loadDogs})),Object(n.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 px-0 pb-2 clearfix"},Object(n.h)("span",{class:"float-right"},Object(n.h)("a",{class:"btn btn-sm btn-primary ml-2",href:"/dogs/edit/new"},Object(n.h)("i",{class:"fas fa-plus"})," ",Object(n.h)(d.c,{id:"dogs.add-dogs"},"Legg til hunder"))),Object(n.h)(b.a,{stores:this.props.stores,dog:{},callback:this.loadDogs})),!s&&P&&0===P.length&&Object(n.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 text-muted"},Object(n.h)("div",{class:"text-center mb-5"},Object(n.h)("div",{class:"display-1"},Object(n.h)("i",{class:"fas fa-dog"})),Object(n.h)("h5",null,Object(n.h)(d.c,{id:"dogs.no-dogs-registered"},"Ingen hunder er registrert ennå."))),Object(n.h)(d.c,{id:"dogs.howto-add-1"},"Slik kommer du i gang:"),Object(n.h)("ol",null,Object(n.h)("li",null,Object(n.h)(d.c,{id:"dogs.howto-add-2"},'Trykk på knappen "Legg til hunder" rett nedenfor.'))))),Object(n.h)("div",{class:"row"},Object(n.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 my-3"},Object(n.h)("div",{class:"row"},Object(n.h)("div",{class:"w-100 overflow-hidden"},Object(n.h)("div",{class:"d-flex flex-row flex-nowrap pb-2 px-1",style:"overflow: auto; scroll-snap-type: x mandatory;"},Object(n.h)("div",{class:"col px-0 pt-2 pl-1"},Object(n.h)("button",{class:`btn btn-block rounded-pill-left rounded-none ${"all"===a?"btn-primary":"btn-outline-primary"} text-nowrap`,style:"text-overflow: ellipsis; overflow: hidden;","data-menu":"all",onClick:this.chooseSubmenu},Object(n.h)("i",{class:"fas fa-tachometer-alt"})," ",Object(n.h)(d.c,{id:"dogs.all"},"Alle")),"all"===a&&Object(n.h)(u.a,{horizontal:"center",vertical:"end"})),Object(n.h)("div",{class:"col px-0 pt-2"},Object(n.h)("button",{class:`btn btn-block rounded-none ${"leadOnly"===a?"btn-primary":"btn-outline-primary"} text-nowrap`,style:"text-overflow: ellipsis; overflow: hidden;","data-menu":"leadOnly",onClick:this.chooseSubmenu},Object(n.h)("i",{class:"fas fa-crosshairs"})," ",Object(n.h)(d.c,{id:"dogs.leadOnly"},"Leder")),"leadOnly"===a&&Object(n.h)(u.a,{horizontal:"center",vertical:"end"})),Object(n.h)("div",{class:"col px-0 pt-2"},Object(n.h)("button",{class:`btn btn-block rounded-none ${"pointOnly"===a?"btn-primary":"btn-outline-primary"} text-nowrap`,style:"text-overflow: ellipsis; overflow: hidden;","data-menu":"pointOnly",onClick:this.chooseSubmenu},Object(n.h)("i",{class:"fas fa-crosshairs"})," ",Object(n.h)(d.c,{id:"dogs.pointOnly"},"Point")),"pointOnly"===a&&Object(n.h)(u.a,{horizontal:"center",vertical:"end"})),Object(n.h)("div",{class:"col px-0 pt-2"},Object(n.h)("button",{class:`btn btn-block rounded-none ${"teamOnly"===a?"btn-primary":"btn-outline-primary"} text-nowrap`,style:"text-overflow: ellipsis; overflow: hidden;","data-menu":"teamOnly",onClick:this.chooseSubmenu},Object(n.h)("i",{class:"fas fa-crosshairs"})," ",Object(n.h)(d.c,{id:"dogs.teamOnly"},"Team")),"teamOnly"===a&&Object(n.h)(u.a,{horizontal:"center",vertical:"end"})),Object(n.h)("div",{class:"col px-0 pt-2 pr-1"},Object(n.h)("button",{class:`btn btn-block rounded-pill-right rounded-none ${"wheelOnly"===a?"btn-primary":"btn-outline-primary"} text-nowrap`,style:"text-overflow: ellipsis; overflow: hidden;","data-menu":"wheelOnly",onClick:this.chooseSubmenu},Object(n.h)("i",{class:"fas fa-crosshairs"})," ",Object(n.h)(d.c,{id:"dogs.wheelOnly"},"Wheel")),"wheelOnly"===a&&Object(n.h)(u.a,{horizontal:"center",vertical:"end"}))))))),Object(n.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 my-3"},l&&Object(n.h)("div",{class:"row"},Object(n.h)("div",{class:"w-100 overflow-hidden"},Object(n.h)("div",{class:"d-flex flex-row flex-nowrap pb-2 px-1",style:"overflow: auto; scroll-snap-type: x mandatory;"},Object(n.h)("div",{class:"col px-0 pt-2"},Object(n.h)("button",{class:`btn btn-block rounded-pill-left rounded-none ${0===x?"btn-warning":"btn-outline-warning"} text-nowrap`,style:"text-overflow: ellipsis; overflow: hidden;","data-daysback":"0",onClick:this.chooseDaysBack},Object(n.h)(d.c,{id:"dogs.d1"},"Dag"))),Object(n.h)("div",{class:"col px-0 pt-2"},Object(n.h)("button",{class:`btn btn-block rounded-none ${1===x?"btn-warning":"btn-outline-warning"} text-nowrap`,style:"text-overflow: ellipsis; overflow: hidden;","data-daysback":"1",onClick:this.chooseDaysBack},Object(n.h)(d.c,{id:"dogs.d2"},"2 dager"))),Object(n.h)("div",{class:"col px-0 pt-2"},Object(n.h)("button",{class:`btn btn-block rounded-none ${7===x?"btn-warning":"btn-outline-warning"} text-nowrap`,style:"text-overflow: ellipsis; overflow: hidden;","data-daysback":"7",onClick:this.chooseDaysBack},Object(n.h)(d.c,{id:"dogs.d7"},"7 dager"))),Object(n.h)("div",{class:"col px-0 pt-2"},Object(n.h)("button",{class:`btn btn-block rounded-none ${14===x?"btn-warning":"btn-outline-warning"} text-nowrap`,style:"text-overflow: ellipsis; overflow: hidden;","data-daysback":"14",onClick:this.chooseDaysBack},Object(n.h)(d.c,{id:"dogs.d14"},"14 dager"))),Object(n.h)("div",{class:"col px-0 pt-2"},Object(n.h)("button",{class:`btn btn-block rounded-pill-right rounded-none ${30===x?"btn-warning":"btn-outline-warning"} text-nowrap`,style:"text-overflow: ellipsis; overflow: hidden;","data-daysback":"30",onClick:this.chooseDaysBack},Object(n.h)(d.c,{id:"dogs.d30"},"30 dager"))))))),Object(n.h)(O.a,{stores:this.props.stores,url:this.props.url}),Object(n.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 px-0 mb-4 clearfix"},Object(n.h)("h5",{class:"font-weight-light"},Object(n.h)("span",{class:"float-right",onClick:this.toggleDaysBackEdit},Object(n.h)("span",{class:"text-muted mr-2"},Object(n.h)(d.c,{id:"dogs.days-back"},"Siste"),":"),0===x?Object(n.h)(d.c,{id:"dogs.d1"},"Dag"):"",1===x?Object(n.h)(d.c,{id:"dogs.d2"},"2 dager"):"",7===x?Object(n.h)(d.c,{id:"dogs.d7"},"7 dager"):"",14===x?Object(n.h)(d.c,{id:"dogs.d14"},"14 dager"):"",30===x?Object(n.h)(d.c,{id:"dogs.d30"},"30 dager"):""),o?Object(n.h)("span",null,Object(n.h)(d.c,{id:"dogs.dogs-filtered-by"},"Filtrert på:")," ",B[o]):Object(n.h)("span",null,Object(n.h)(d.c,{id:"dogs.all-dogs",fields:{total:E.length}},"Alle hundene - ",E.length," stk"))),Object(n.h)("div",{class:"row"},E&&E.map(t=>{const e=(w.findCurrentWorkoutSummary(t.id)||{}).distanceKm;return Object(n.h)(p.a,{stores:this.props.stores,key:`dog-${t.id}-${D}-${T.length}-${e}`,dog:t,hideTeam:!0,showWorkout:!1,daysBack:x,filterBy:a})})),Object(n.h)("span",{class:"pointerCursor ml-2 font-weight-lighter float-right",onClick:this.toggleShowAllDogs},c?Object(n.h)(t,null,Object(n.h)(d.c,{id:"dogs.hide-deceased"},"Vis kun nåværende team")):Object(n.h)(t,null,Object(n.h)(d.c,{id:"dogs.absolutely-all"},"Vis absolutt alle")))))),Object(n.h)("div",{class:"row"},Object(n.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 px-0 mb-2"},Object(n.h)("div",{class:"w-100 overflow-hidden"},Object(n.h)("div",{class:"d-flex flex-row flex-nowrap pb-2 px-1",style:"overflow: auto; scroll-snap-type: x mandatory;"},Object(n.h)("div",{class:"col px-0 pt-2 pl-1"},Object(n.h)("button",{class:`btn btn-block rounded-pill-both rounded-none ${"chiplist"===a?"btn-primary":"btn-outline-primary"} text-nowrap`,style:"text-overflow: ellipsis; overflow: hidden;","data-menu":"chiplist",onClick:this.chooseSubmenu},Object(n.h)("i",{class:"fas fa-list"})," ",Object(n.h)(d.c,{id:"dogs.chiplist"},"Chiplist")))))),"chiplist"===a&&Object(n.h)(t,null,Object(n.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 px-0 mb-2"},Object(n.h)("h5",null,Object(n.h)(d.c,{id:"dogs.chiplist"},"Chiplist")),Object(n.h)("table",{class:"table table-striped"},Object(n.h)("thead",null,Object(n.h)("tr",null,Object(n.h)("th",{style:"width: 5%;"}," "),Object(n.h)("th",{style:"width: 10%;"}," "),Object(n.h)("th",{style:"width: 65%;"},Object(n.h)(d.c,{id:"dogs.name"},"Name")),Object(n.h)("th",{style:"width: 20%;"},Object(n.h)(d.c,{id:"dogs.chip-id"},"Chip ID")))),Object(n.h)("tbody",null,E&&E.map(e=>Object(n.h)("tr",{onClick:this.selectDog,"data-chipid":e.chipId},Object(n.h)("td",null,r.indexOf(e.chipId)>-1?Object(n.h)(t,null,Object(n.h)("i",{class:"text-success fas fa-check",style:"font-size: 1.5em;"})):Object(n.h)(t,null)),Object(n.h)("td",null,Object(n.h)("div",{class:"text-center border rounded-circle imageRounded imageRoundedSmall mx-auto text-muted pt-2 position-relative",style:(e.image?`background-image: url("${e.image.s3SmallLink}"); background-size: cover;`:"")+" border-width: 2px !important;"},!e.image&&Object(n.h)("span",{class:"font-weight-lighter",style:"font-size: 35px;"},i.a.ucfirst(e.name,!0)))),Object(n.h)("td",null,Object(n.h)("span",{class:"float-right"},e.birth&&Object(n.h)("span",{class:"mr-2"},i.a.age(e.birth,e.deceased)),"female"===e.gender?Object(n.h)("i",{class:"fas fa-venus"}):Object(n.h)("i",{class:"fas fa-mars"})),e.shortname||e.name),Object(n.h)("td",null,e.chipId))))),Object(n.h)("button",{class:"btn btn-block btn-success",onClick:this.sendChiplist},Object(n.h)(d.c,{id:"dogs.send-chiplist-by-email"},"Send chiplist by email")),y&&y.message&&Object(n.h)(t,null,Object(n.h)("div",{class:"alert alert-success",role:"alert"},y.message))))))}})||c;e.default=w}.call(this,s("hosL").Fragment)}}]);
//# sourceMappingURL=route-dogs.chunk.7e6ca.esm.js.map