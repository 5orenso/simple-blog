{"version":3,"sources":["webpack:///./routes/users/index.js"],"names":["MARGIN_TOP","mu","marginTop","MARGIN_BOTTOM","marginBottom","Profile","observer","props","resetEmailMessage","userStore","stores","updateField","resetEmailError","state","time","Date","now","count","componentDidMount","this","verifyEmailToken","verifyEmail","token","render","user","emailMessage","emailError","emailMessageIcon","emailErrorIcon","isAdmin","allTeams","findTeams","teams","apiServer","util","getApiServer","jwtToken","getJwtToken","class","style","message","icon","remove","id","email","team","findTeam","map","name","username","firstname","lastname","cellphone","url","facebook","instagram","snapchat","strava","access_token","athlete","resource_state","city","country","sex","premium","summit","created_at","updated_at","badge_type_id","src","profile_medium","profile","friend","follower","onclick","stravaGetActivityStream","href","native","Component"],"mappings":"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","file":"route-users.chunk.c9987.js","sourcesContent":["import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport { Text, Localizer } from 'preact-i18n';\n\nimport mu from '../../lib/musher-util';\nconst MARGIN_TOP = mu.marginTop(false);\nconst MARGIN_BOTTOM = mu.marginBottom();\n\nimport Error from '../../components/error';\nimport Message from '../../components/message';\n\n@observer\nclass Profile extends Component {\n\tconstructor(props) {\n        super(props);\n        this.state = {\n            time: Date.now(),\n\t\t\tcount: 10\n        };\n    }\n\n\tresetEmailMessage = () => {\n\t\tconst { userStore } = this.props.stores;\n\t\tuserStore.updateField('emailMessage', '');\n\t\tuserStore.updateField('emailMessageIcon', '');\n\t}\n\n\tresetEmailError = () => {\n\t\tconst { userStore } = this.props.stores;\n\t\tuserStore.updateField('emailError', '');\n\t\tuserStore.updateField('emailErrorIcon', '');\n\t}\n\n\tcomponentDidMount() {\n\t\tconst { userStore } = this.props.stores;\n\n\t\tif (this.props.verifyEmailToken) {\n\t\t\tuserStore.verifyEmail({ token: this.props.verifyEmailToken });\n\t\t}\n\t}\n\n\trender() {\n\t\tconst { userStore } = this.props.stores;\n\t\tconst { user, emailMessage, emailError, emailMessageIcon, emailErrorIcon, isAdmin } = userStore;\n\t\tconst { teams } = user;\n\t\tconst allTeams = userStore.findTeams(teams);\n\t\tconst apiServer = util.getApiServer();\n\t\tconst jwtToken = util.getJwtToken();\n\t\treturn (\n\t\t\t<div class='container-fluid' style={`margin-bottom: ${MARGIN_BOTTOM}; margin-top: ${MARGIN_TOP};`}>\n                <div class='row'>\n\t\t\t\t\t<div class='col-12'>\n\t\t\t\t\t\t<Error message={emailError} icon={emailErrorIcon} remove={this.resetEmailError} />\n                        <Message message={emailMessage} icon={emailMessageIcon} remove={this.resetEmailMessage}  />\n\n\t\t\t\t\t\t<h5><Text id='users.title'>Din profil</Text></h5>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class='col-4 text-muted text-right'><Text id='users.email'>E-post</Text></div><div class='col-8'>{user.email}</div>\n\t\t\t\t\t{user.team && <><div class='col-4 text-muted text-right'><Text id='users.main-team'>Hovedteam</Text></div><div class='col-8'>{userStore.findTeam(user.team)}</div></>}\n\t\t\t\t\t{user.teams && <><div class='col-4 text-muted text-right'><Text id='users.all-teams'>Alle teamene</Text></div><div class='col-8'>{allTeams.map(team => (\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t{team.name}\n\t\t\t\t\t\t\t{/* <span class='text-muted'>\n\t\t\t\t\t\t\t\t<i class='fas fa-dog ml-3' /> {team.dogs.length}\n\t\t\t\t\t\t\t\t<i class='fas fa-users ml-3' /> {team.members.length}\n\t\t\t\t\t\t\t</span> */}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t))}</div></>}\n\t\t\t\t\t{user.username && <><div class='col-4 text-muted text-right'><Text id='users.username'>Brukernavn</Text></div><div class='col-8'>{user.username}</div></>}\n\t\t\t\t\t{user.firstname && <><div class='col-4 text-muted text-right'><Text id='users.firstname'>Fornavn</Text></div><div class='col-8'>{user.firstname}</div></>}\n\t\t\t\t\t{user.lastname && <><div class='col-4 text-muted text-right'><Text id='users.lastname'>Etternavn</Text></div><div class='col-8'>{user.lastname}</div></>}\n\t\t\t\t\t{user.cellphone && <><div class='col-4 text-muted text-right'><Text id='users.cellphone'>Mobil</Text></div><div class='col-8'>{user.cellphone}</div></>}\n\t\t\t\t\t{user.url && <><div class='col-4 text-muted text-right'><Text id='users.homepage'>Hjemmeside</Text></div><div class='col-8'>{user.url}</div></>}\n\t\t\t\t\t{user.facebook && <><div class='col-4 text-muted text-right'><Text id='users.facebook'>Facebook</Text></div><div class='col-8'>{user.facebook}</div></>}\n\t\t\t\t\t{user.instagram && <><div class='col-4 text-muted text-right'><Text id='users.instagram'>Instagram</Text></div><div class='col-8'>{user.instagram}</div></>}\n\t\t\t\t\t{user.snapchat && <><div class='col-4 text-muted text-right'><Text id='users.snapchat'>Snapchat</Text></div><div class='col-8'>{user.snapchat}</div></>}\n\t\t\t\t</div>\n\t\t\t\t{isAdmin && <div class='row border mt-5 pt-5'>\n\t\t\t\t\t<div class='col-12'>\n\t\t\t\t\t\t<h3>Strava</h3>\n\t\t\t\t\t</div>\n\t\t\t\t\t{user.strava && user.strava.access_token ? (\n\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t<div class='col-12'><h5>Connected to Strava!</h5></div>\n\t\t\t\t\t\t\t<div class='col-4 text-right text-muted'>id:</div><div class='col-8'> {user.strava.athlete.id}</div>\n\t\t\t\t\t\t\t<div class='col-4 text-right text-muted'>username:</div><div class='col-8'> {user.strava.athlete.username}</div>\n\t\t\t\t\t\t\t<div class='col-4 text-right text-muted'>resource_state:</div><div class='col-8'> {user.strava.athlete.resource_state}</div>\n\t\t\t\t\t\t\t<div class='col-4 text-right text-muted'>firstname:</div><div class='col-8'> {user.strava.athlete.firstname}</div>\n\t\t\t\t\t\t\t<div class='col-4 text-right text-muted'>lastname:</div><div class='col-8'> {user.strava.athlete.lastname}</div>\n\t\t\t\t\t\t\t<div class='col-4 text-right text-muted'>city:</div><div class='col-8'> {user.strava.athlete.city}</div>\n\t\t\t\t\t\t\t<div class='col-4 text-right text-muted'>state:</div><div class='col-8'> {user.strava.athlete.state}</div>\n\t\t\t\t\t\t\t<div class='col-4 text-right text-muted'>country:</div><div class='col-8'> {user.strava.athlete.country}</div>\n\t\t\t\t\t\t\t<div class='col-4 text-right text-muted'>sex:</div><div class='col-8'> {user.strava.athlete.sex}</div>\n\t\t\t\t\t\t\t<div class='col-4 text-right text-muted'>premium:</div><div class='col-8'> {user.strava.athlete.premium}</div>\n\t\t\t\t\t\t\t<div class='col-4 text-right text-muted'>summit:</div><div class='col-8'> {user.strava.athlete.summit}</div>\n\t\t\t\t\t\t\t<div class='col-4 text-right text-muted'>created_at:</div><div class='col-8'> {user.strava.athlete.created_at}</div>\n\t\t\t\t\t\t\t<div class='col-4 text-right text-muted'>updated_at:</div><div class='col-8'> {user.strava.athlete.updated_at}</div>\n\t\t\t\t\t\t\t<div class='col-4 text-right text-muted'>badge_type_id:</div><div class='col-8'> {user.strava.athlete.badge_type_id}</div>\n\t\t\t\t\t\t\t<div class='col-4 text-right text-muted'>profile_medium:</div><div class='col-8'> <img src={user.strava.athlete.profile_medium} /></div>\n\t\t\t\t\t\t\t<div class='col-4 text-right text-muted'>profile:</div><div class='col-8'> <img src={user.strava.athlete.profile} /></div>\n\t\t\t\t\t\t\t<div class='col-4 text-right text-muted'>friend:</div><div class='col-8'> {user.strava.athlete.friend}</div>\n\t\t\t\t\t\t\t<div class='col-4 text-right text-muted'>follower:</div><div class='col-8'> {user.strava.athlete.follower}</div>\n\n\t\t\t\t\t\t\t<div class='col-12'>\n\t\t\t\t\t\t\t\t<button class='btn btn-primary' onclick={userStore.stravaGetActivityStream}>Get activity streams</button>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class='col-12'>\n\t\t\t\t\t\t\t\t<a href={`${apiServer}/api/strava/request-access?token=${jwtToken}`} native>Reconnect to Strava</a>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</>\n\t\t\t\t\t) : (\n\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t<a href={`${apiServer}/api/strava/request-access?token=${jwtToken}`} native>Connect to Strava</a>\n\t\t\t\t\t\t</>\n\t\t\t\t\t)}\n\t\t\t\t</div>}\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nexport default Profile;\n"],"sourceRoot":""}