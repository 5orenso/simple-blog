{"version":3,"sources":["webpack:///./components/util/scrollIntoView.js","webpack:///./components/garmin/index.js","webpack:///./components/strava/index.js","webpack:///./routes/workouts/list.js","webpack:///./components/team/teams.js","webpack:///./components/team/fastList.js"],"names":["initialState","ScrollIntoView","observer","props","state","container","componentDidMount","this","horizontal","vertical","behavior","inline","block","scrollIntoView","render","ref","c","Component","Garmin","toggleDate","e","stopPropagation","preventDefault","setState","showDate","ignoreGarminWorkout","stores","garminActivityDetailsStore","ignoreWorkout","target","parentElement","dataset","id","loadGarminActivities","importGarminWorkout","loadWorkouts","currentTeam","workoutStore","asTrack","importTrack","importWorkout","load","query","team","toggleDetail","showDetail","hideImported","activities","forceShowDate","userStore","selectedTeam","findTeam","class","length","type","onClick","map","activity","summary","startDate","util","parseInputDate","startTimeInSeconds","style","deviceName","activityType","formatDate","locale","formatDistance","Date","value","distanceInMeters","totalElevationGainInMeters","averageSpeedInMetersPerSecond","secToHms","durationInSeconds","data-id","Strava","ignoreStravaWorkout","stravaActivityStore","loadStravaActivities","importStravaWorkout","name","start_date","distance","total_elevation_gain","average_speed","elapsed_time","MARGIN_TOP","mu","marginTop","MARGIN_BOTTOM","marginBottom","SUB_MENU_MARGIN_TOP","subMenuMarginTop","isLoading","offset","limit","sessionid","getTime","dataFields","Workouts","addData","changeTeam","setLoadMore","unsetLoadMore","loadDogs","dogStore","removeFilterText","filterText","renderContent","obj","workout","wrapperClasses","wrapperClassesRow","setupIntersection","handleIntersection","intersectionObserverCallback","scrollViewTimer","setInterval","postScrollview","getIntersectionObserverHistory","loadTracks","trackStore","loadWorkoutSummary","getWorkoutSummary","componentWillMount","componentWillUnmount","clearInterval","scrolledDown","darkmode","appState","message","workouts","currentTeamObject","workoutFilter","match","RegExp","workoutsFiltered","filter","tracks","dogs","user","stravaActivities","garminActivityDetails","href","role","callback","key","strava","garmin","data","wrapperClassNames","contentClassNames","dataValues","Teams","toggleTeam","unsetTeamIfSelected","setCurrentTeam","undefined","isDefined","showAllTeams","teams","highlight","showAll","idx","classNames","indexOf","FastListLine","containerRef","removeIntersectionObserver","addIntersectionObserver","dataProperties","forEach","encodeURI","data-idx","FastList","deleteIntersectionObserver","intersectionObserver","entries","isIntersecting","height","currentHeight","Math","max","childNodes","offsetHeight","scrollHeight","display","minHeight","setupIntersectionObserver","window","IntersectionObserverEntry","prototype","IntersectionObserver","root","rootMargin","threshold","observe","unobserve","isObject","hasOwnProperty","contentClasses"],"mappings":"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","file":"82.chunk.06c79.js","sourcesContent":["import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\n\nconst initialState = {};\n\n@observer\nclass ScrollIntoView extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            ...initialState,\n        };\n        this.container = null;\n    }\n\n    componentDidMount() {\n        const { horizontal, vertical = '' } = this.props;\n        const props = {\n            behavior: 'smooth',\n        };\n        if (horizontal) {\n            props.inline = horizontal;\n        }\n        if (vertical) {\n            props.block = vertical;\n        }\n\t\tthis.container.scrollIntoView(props);\n\t}\n\n    render() {\n        return (\n            <div ref={c => this.container = c}>&nbsp;</div>\n        );\n    }\n}\n\nexport default ScrollIntoView;\n","import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport { Text, Localizer, withText } from 'preact-i18n';\n\nimport Speed from '../../components/data/speed';\nimport Elevation from '../../components/data/elevation';\nimport Weight from '../../components/data/weight';\nimport Distance from '../../components/data/distance';\nimport Temperature from '../../components/data/temperature';\n\n@observer\nclass Garmin extends Component {\n    toggleDate = (e) => {\n        e.stopPropagation();\n        e.preventDefault();\n        const { showDate } = this.state;\n        this.setState({ showDate: !showDate });\n    }\n\n    ignoreGarminWorkout = async (e) => {\n        e.stopPropagation();\n        const id = e.target.parentElement.dataset.id || e.target.dataset.id;\n        const { garminActivityDetailsStore } = this.props.stores;\n\t\tawait garminActivityDetailsStore.ignoreWorkout(id);\n        this.loadGarminActivities();\n    }\n\n    importGarminWorkout = async (e) => {\n        e.stopPropagation();\n        const id = e.target.parentElement.dataset.id || e.target.dataset.id;\n        const { asTrack } = this.props;\n        const { garminActivityDetailsStore, workoutStore } = this.props.stores;\n\t\tconst { currentTeam } = workoutStore;\n        if (asTrack) {\n            await garminActivityDetailsStore.importTrack(id, currentTeam);\n        } else {\n            await garminActivityDetailsStore.importWorkout(id, currentTeam);\n        }\n        this.loadGarminActivities();\n        this.loadWorkouts();\n    }\n\n    async loadGarminActivities() {\n\t\tconst { garminActivityDetailsStore } = this.props.stores;\n\t\tgarminActivityDetailsStore.load({ query: { hideImported: 1 }});\n\t}\n\n    loadWorkouts = async () => {\n\t\tconst { workoutStore } = this.props.stores;\n\t\tconst { currentTeam } = workoutStore;\n\t\tawait workoutStore.load({ query: { team: currentTeam } });\n\t}\n\n    toggleDetail = () => {\n        const { showDetail = false } = this.state;\n        this.setState({\n            showDetail: !showDetail,\n        });\n    }\n\n    componentDidMount() {\n\t\tthis.loadGarminActivities();\n\t}\n\n    render() {\n        const { showDate, showDetail = false } = this.state;\n        const { activities = [], showDate: forceShowDate, asTrack = false } = this.props;\n\t\tconst { userStore, workoutStore } = this.props.stores;\n        const { currentTeam } = workoutStore;\n        const { team } = userStore;\n\n        const selectedTeam = userStore.findTeam(currentTeam || team.id);\n\n        if (!showDetail) {\n            if (activities && activities.length > 0) {\n                return (<>\n                    <div class='col-12 mb-3'>\n                        <button type='button' class='btn btn-block btn-outline-info' onClick={this.toggleDetail}>\n                            <div class={`float-right ml-2 text-center border rounded-circle imageRounded imageRoundedIcon`} style={`background-image: url('./assets/garmin-connect.png');`} />\n                            <Text id='workout.index.garmin-workouts'>Garmin workouts / not imported</Text> {activities.length}\n                        </button>\n                    </div>\n                </>);\n            }\n            return (<></>);\n        }\n\n        return (<>\n            <div class='col-12 mb-3'>\n                <div class='row'>\n                    {activities && activities.length > 0 && (\n                        <div\n                            class='col-12 border-top border-bottom pt-3 pb-3 my-2 bg-light'\n                        >\n                            <button type='button' class='float-right btn btn-sm btn-link' onClick={this.toggleDetail}>\n                                <i class='fas fa-caret-up' /> <Text id='garmin.hide-list'>Hide list</Text>\n                            </button>\n                            <h5><Text id='workout.index.garmin-workouts'>Garmin workouts / not imported</Text> {activities.length}</h5>\n                            {activities && activities.map(activity => {\n                                const { summary = {} } = activity;\n                                const startDate = util.parseInputDate(summary.startTimeInSeconds);\n\n                                return (<>\n                                    {/* <td>{util.secToHms(activity.moving_time)}</td> */}\n                                    {/* <td>{util.secToHms(activity.elapsed_time)}</td> */}\n\n                                    {/* {\n                                        \"durationInSeconds\": 616,\n                                        \"startTimeInSeconds\": 1602065947,\n                                        \"startTimeOffsetInSeconds\": 7200,\n                                        \"activityType\": \"ROAD_BIKING\",\n                                        \"averageSpeedInMetersPerSecond\": 0.152,\n                                        \"averagePaceInMinutesPerKilometer\": 109.649124, \n                                        \"activeKilocalories\": 1, \n                                        \"deviceName\": \"edge1000\", \n                                        \"distanceInMeters\": 94.02, \n                                        \"maxPaceInMinutesPerKilometer\": 14.6455765, \n                                        \"maxSpeedInMetersPerSecond\": 1.138, \n                                        \"startingLatitudeInDegree\": 61.00674974732101, \n                                        \"startingLongitudeInDegree\": 9.975536987185478, \n                                        \"totalElevationLossInMeters\": 2\n                                    } */}\n\n                                    <div class='col-12 d-flex mb-4 position-relative'>\n                                        <div class={`text-center border rounded-circle imageRounded`} style={`background-image: url(\"./assets/garmin-connect.png\"); border-width: 3px !important;`}>\n                                            &nbsp;\n                                        </div>\n                                        <div class='flex-grow-1 pl-3' style='line-height: 1.2em;'>\n                                            <h5 class='my-0 mb-1' style='line-height: 1.0em;'>{summary.deviceName}</h5>\n                                            {summary.activityType}<br />\n                                            <small class='text-muted'>\n                                                {startDate && <small onClick={this.toggleDate}>\n                                                    {forceShowDate || showDate ? util.formatDate(startDate, { locale: 'no-NB' }) : util.formatDistance(startDate, new Date(), { locale: 'no-NB' })}\n                                                </small>}\n                                                <span class='text-muted'>\n                                                    <i class='fas fa-road ml-2' /> <Distance stores={this.props.stores} value={summary.distanceInMeters / 1000} />\n                                                    <i class='fas fa-mountain ml-2' /> <Elevation stores={this.props.stores} value={summary.totalElevationGainInMeters} />\n                                                    <i class='fas fa-tachometer-alt ml-2' /> <Speed stores={this.props.stores} value={summary.averageSpeedInMetersPerSecond * 3.6} />\n                                                    <i class='fas fa-stopwatch ml-2' /> {util.secToHms(summary.durationInSeconds)}\n                                                </span>\n                                            </small>\n                                            <br />\n                                            <button class='btn btn-sm btn-block btn-primary' onClick={this.importGarminWorkout} data-id={activity.id}>\n                                                <i class='fas fa-file-import' /> {asTrack ? <Text id='garmin.import-track'>Import as track</Text> : <><Text id='garmin.import'>Import workout</Text> <i class='fas fa-arrow-right' /> {selectedTeam}</>} \n                                            </button>\n                                            <button class='btn btn-sm btn-link' onClick={this.ignoreGarminWorkout} data-id={activity.id}>\n                                                <i class='fas fa-trash-alt' /> <Text id='garmin.ignore'>Ignore workout</Text>\n                                            </button>\n                                        </div>\n                                    </div>\n                                </>);\n                            })}\n\n                            <button type='button' class='btn btn-block btn-primary mt-3' onClick={this.toggleDetail}>\n                                <i class='fas fa-caret-up' /> <Text id='garmin.hide-list'>Hide list</Text>\n                            </button>\n                        </div>\n                    )}\n\n                </div>\n            </div>\n        </>);\n    }\n}\n\nexport default Garmin;\n","import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport { Text, Localizer, withText } from 'preact-i18n';\n\nimport Speed from '../../components/data/speed';\nimport Elevation from '../../components/data/elevation';\nimport Weight from '../../components/data/weight';\nimport Distance from '../../components/data/distance';\nimport Temperature from '../../components/data/temperature';\n\n@observer\nclass Strava extends Component {\n    toggleDate = (e) => {\n        e.stopPropagation();\n        e.preventDefault();\n        const { showDate } = this.state;\n        this.setState({ showDate: !showDate });\n    }\n\n    ignoreStravaWorkout = async (e) => {\n        e.stopPropagation();\n        const id = e.target.parentElement.dataset.id || e.target.dataset.id;\n        const { stravaActivityStore } = this.props.stores;\n\t\tawait stravaActivityStore.ignoreWorkout(id);\n        this.loadStravaActivities();\n    }\n\n    importStravaWorkout = async (e) => {\n        e.stopPropagation();\n        const id = e.target.parentElement.dataset.id || e.target.dataset.id;\n        const { stravaActivityStore, workoutStore } = this.props.stores;\n\t\tconst { currentTeam } = workoutStore;\n\t\tawait stravaActivityStore.importWorkout(id, currentTeam);\n        this.loadStravaActivities();\n        this.loadWorkouts();\n    }\n\n    async loadStravaActivities() {\n\t\tconst { stravaActivityStore } = this.props.stores;\n\t\tstravaActivityStore.load({ query: { hideImported: 1 }});\n\t}\n\n    loadWorkouts = async () => {\n\t\tconst { workoutStore } = this.props.stores;\n\t\tconst { currentTeam } = workoutStore;\n\t\tawait workoutStore.load({ query: { team: currentTeam } });\n\t}\n\n    toggleDetail = () => {\n        const { showDetail = false } = this.state;\n        this.setState({\n            showDetail: !showDetail,\n        });\n    }\n\n\tcomponentDidMount() {\n\t\tthis.loadStravaActivities();\n\t}\n\n    render() {\n        const { showDate, showDetail = false } = this.state;\n        const { activities, showDate: forceShowDate } = this.props;\n\t\tconst { userStore, workoutStore } = this.props.stores;\n        const { currentTeam } = workoutStore;\n        const { team } = userStore;\n\n        const selectedTeam = userStore.findTeam(currentTeam || team.id);\n\n         if (!showDetail) {\n            if (activities && activities.length > 0) {\n                return (<>\n                    <div class='col-12 mb-3'>\n                        <button type='button' class='btn btn-block btn-outline-info' onClick={this.toggleDetail}>\n                            <div class={`float-right ml-2 text-center border rounded-circle imageRounded imageRoundedIcon`} style={`background-image: url('./assets/strava-icon.png');`} />\n                            <Text id='workout.index.strava-workouts'>Strava workouts / not imported</Text> {activities.length}\n                        </button>\n                    </div>\n                </>);\n            }\n            return (<></>);\n        }\n\n        return (<>\n            <div class='col-12 mb-3'>\n                <div class='row'>\n                    {activities && activities.length > 0 && (\n                        <div\n                            class='col-12 border-top border-bottom pt-3 pb-3 my-2 bg-light'\n                        >\n                            <button type='button' class='float-right btn btn-sm btn-link' onClick={this.toggleDetail}>\n                                <i class='fas fa-caret-up' /> <Text id='strava.hide-list'>Hide list</Text>\n                            </button>\n                            <h5><Text id='workout.index.strava-workouts'>Strava workouts / not imported</Text> {activities.length}</h5>\n                            {activities && activities.map(activity => {\n                                const { summary = {} } = activity;\n                                const startDate = util.parseInputDate(summary.startTimeInSeconds);\n\n                                return (<>\n                                    {/* <td>{util.secToHms(activity.moving_time)}</td> */}\n                                    {/* <td>{util.secToHms(activity.elapsed_time)}</td> */}\n\n                                    <div class='col-12 d-flex mb-4 position-relative'>\n                                        <div class={`text-center border rounded-circle imageRounded`} style={`background-image: url(\"./assets/strava-icon.png\"); border-width: 3px !important;`}>\n                                            &nbsp;\n                                        </div>\n                                        <div class='flex-grow-1 pl-3' style='line-height: 1.2em;'>\n                                            <h5 class='my-0 mb-1' style='line-height: 1.0em;'>{activity.name}</h5>\n                                            {activity.type}<br />\n                                            <small class='text-muted'>\n                                                {activity.start_date && <small onClick={this.toggleDate}>\n                                                    {forceShowDate || showDate ? util.formatDate(activity.start_date, { locale: 'no-NB' }) : util.formatDistance(activity.start_date, new Date(), { locale: 'no-NB' })}\n                                                </small>}\n                                                <span class='text-muted'>\n                                                    <i class='fas fa-road ml-2' /> <Distance stores={this.props.stores} value={activity.distance / 1000} />\n                                                    <i class='fas fa-mountain ml-2' /> <Elevation stores={this.props.stores} value={activity.total_elevation_gain} />\n                                                    <i class='fas fa-tachometer-alt ml-2' /> <Speed stores={this.props.stores} value={activity.average_speed * 3.6} />\n                                                    <i class='fas fa-stopwatch ml-2' /> {util.secToHms(activity.elapsed_time)}\n                                                </span>\n                                            </small>\n                                            <br />\n                                            <button class='btn btn-sm btn-block btn-primary' onClick={this.importStravaWorkout} data-id={activity.id}>\n                                                <i class='fas fa-file-import' /> <Text id='strava.import'>Import workout</Text> <i class='fas fa-arrow-right' /> {selectedTeam}\n                                            </button>\n                                            <button class='btn btn-sm btn-link' onClick={this.ignoreStravaWorkout} data-id={activity.id}>\n                                                <i class='fas fa-trash-alt' /> <Text id='strava.ignore'>Ignore workout</Text>\n                                            </button>\n                                        </div>\n                                    </div>\n                                </>);\n                            })}\n\n                            <button type='button' class='btn btn-block btn-primary mt-3' onClick={this.toggleDetail}>\n                                <i class='fas fa-caret-up' /> <Text id='strava.hide-list'>Hide list</Text>\n                            </button>\n                        </div>\n                    )}\n                </div>\n            </div>\n        </>);\n    }\n}\n\nexport default Strava;\n","import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport { Text, Localizer, withText } from 'preact-i18n';\nimport linkState from 'linkstate';\n\nimport mu from '../../lib/musher-util';\nconst MARGIN_TOP = mu.marginTop(true);\nconst MARGIN_BOTTOM = mu.marginBottom();\nconst SUB_MENU_MARGIN_TOP = mu.subMenuMarginTop();\n\nimport Workout from '../../components/workout';\nimport Strava from '../../components/strava';\nimport Garmin from '../../components/garmin';\nimport Teams from '../../components/team/teams';\n\nimport FastList from '../../components/team/fastList';\n\nconst initialState = {\n\tisLoading: false,\n\toffset: 0,\n\tlimit: 5,\n\tsessionid: new Date().getTime(),\n};\n\nconst dataFields = ['id', 'type', 'user', 'team', 'title'];\n\n@observer\nclass Workouts extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            ...initialState,\n        };\n    }\n\n\t// loadMore = () => {\n\t// \tconst { offset } = this.state;\n\t// \tthis.setState({ offset: offset + LIMIT }, () => {\n\t// \t\tthis.loadWorkouts(true);\n\t// \t});\n\t// }\n\n\tloadWorkouts = async ({ limit, offset }) => {\n\t\tthis.setState({ isLoading: true });\n\t\tconst { workoutStore } = this.props.stores;\n\t\tconst { currentTeam } = workoutStore;\n\t\tconst append = offset > 0;\n\t\tawait workoutStore.load({\n\t\t\tquery: { team: currentTeam },\n\t\t\tlimit,\n\t\t\toffset,\n\t\t\taddData: ['publicTeams', 'publicUsers'],\n\t\t}, append);\n\t\tthis.setState({ isLoading: false });\n\t}\n\n\tchangeTeam = () => {\n\t\tconst { limit } = this.state;\n        this.loadWorkouts({ limit, offset: 0 });\n\t}\n\n    setLoadMore = () => {\n        const { workoutStore } = this.props.stores;\n        workoutStore.setLoadMore(() => {\n            let { limit, offset } = this.state;\n            offset += limit;\n            this.setState({ offset });\n            this.loadWorkouts({ limit, offset });\n        });\n    }\n\n    unsetLoadMore = () => {\n        const { workoutStore } = this.props.stores;\n        workoutStore.setLoadMore(() => {});\n    }\n\n\tloadDogs = async () => {\n\t\tconst { dogStore } = this.props.stores;\n\t\tconst { currentTeam } = dogStore;\n\n\t\tawait dogStore.load({ query: { team: currentTeam }, addData: ['workoutSummary'] });\n\t}\n\n\tasync loadTracks() {\n\t\tconst { trackStore } = this.props.stores;\n\t\tawait trackStore.load();\n\t}\n\n\tasync loadWorkoutSummary() {\n\t\tconst { userStore, workoutStore } = this.props.stores;\n\t\tconst { currentTeam } = workoutStore;\n        await userStore.getWorkoutSummary({ team: currentTeam });\n    }\n\n\tasync loadStravaActivities() {\n\t\tconst { stravaActivityStore } = this.props.stores;\n\t\tstravaActivityStore.load({ query: { hideImported: 1 }});\n\t}\n\n\tasync loadGarminActivities() {\n\t\tconst { garminActivityDetailsStore } = this.props.stores;\n\t\tgarminActivityDetailsStore.load({ query: { hideImported: 1 }});\n\t}\n\n\tremoveFilterText = () => {\n\t\tthis.setState({ filterText: '' });\n\t}\n\n    renderContent = ({ obj, idx }) => {\n        const { appState } = this.props.stores;\n        const { path } = appState;\n        const { hashtag } = this.props;\n\n        return (<>\n\t\t\t<Workout\n\t\t\t\tstores={this.props.stores}\n\t\t\t\tworkout={obj}\n\t\t\t\tshowDate={true}\n\t\t\t\twrapperClasses={'w-100'}\n\t\t\t\twrapperClassesRow={''}\n\t\t\t/>\n        </>);\n    }\n\n\t// Scroll views timer\n    setupIntersection = () => {\n        this.setState({\n            handleIntersection: mu.intersectionObserverCallback,\n        });\n        const { workoutStore } = this.props.stores;\n        this.scrollViewTimer = setInterval(() => workoutStore.postScrollview(mu.getIntersectionObserverHistory()), 30 * 1000);\n    }\n\n\tcomponentWillMount() {\n        this.setupIntersection();\n    }\n\n\tcomponentWillUnmount() {\n        const { workoutStore, garminActivityDetailsStore, stravaActivityStore } = this.props.stores;\n        workoutStore.postScrollview(mu.getIntersectionObserverHistory());\n        clearInterval(this.scrollViewTimer);\n        this.unsetLoadMore();\n\t\t// workoutStore.cleanupMemory();\n    }\n\t// /Scroll views timer\n\n\n    componentDidMount() {\n\t\tconst { limit } = this.state;\n        this.loadWorkouts({ limit, offset: 0 });\n\t\tthis.loadDogs();\n\t\t// this.loadTracks();\n\t\tthis.loadStravaActivities();\n\t\tthis.loadGarminActivities();\n\t\tthis.setLoadMore();\n    }\n\n\trender() {\n        const { scrolledDown } = this.props;\n\t\tconst { isLoading, filterText, handleIntersection, sessionid } = this.state;\n\t\tconst { trackStore, workoutStore, dogStore, appState, stravaActivityStore, garminActivityDetailsStore, userStore } = this.props.stores;\n\t\tconst { darkmode } = appState;\n\t\tconst { message } = this.props;\n\t\tconst { workouts, currentTeam } = workoutStore;\n\t\tconst currentTeamObject = userStore.findTeam(currentTeam, true);\n\n\t\tlet workoutFilter = () => true;\n\t\tif (filterText) {\n\t\t\tworkoutFilter = (e) => e.name.match(new RegExp(filterText, 'i'));\n\t\t}\n\t\tconst workoutsFiltered = workouts.filter(workoutFilter);\n\n\t\tconst { tracks } = trackStore;\n\t\tconst { dogs } = dogStore;\n\t\tconst { user } = userStore;\n\t\tconst { stravaActivities = [] } = stravaActivityStore;\n\t\tconst { garminActivityDetails = [] } = garminActivityDetailsStore;\n\t\treturn (\n\t\t\t<div class='container-fluid' style={`margin-bottom: ${MARGIN_BOTTOM}; margin-top: ${MARGIN_TOP};`}>\n\t\t\t\t<div class='row fixed-top pt-2' style={`margin-top: ${scrolledDown > 0 ? 0 : SUB_MENU_MARGIN_TOP}; background-color: ${darkmode ? '#191d21' : '#f8f9fa'}; transition: all 0.3s ease-in-out;`}>\n\t\t\t\t\t<div class='col text-center subtopmenu'>\n\t\t\t\t\t\t<a href='/workouts/' class='text-secondary stretched-link'><nobr><i class='fas fa-chart-line' /> <Text id='workout.index.dashboard'>Oversikt</Text></nobr></a>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class='col text-center border-bottom border-primary subtopmenu'>\n\t\t\t\t\t\t<a href='/workouts/list' class='text-primary stretched-link'><nobr><i class='fas fa-list' /> <Text id='workout.index.list'>Liste</Text></nobr></a>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class='col text-center subtopmenu'>\n\t\t\t\t\t\t<a href='/workouts/plan' class='text-secondary stretched-link'><nobr><i class='fas fa-calendar-alt' /> <Text id='workout.index.plan'>Plan</Text></nobr></a>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\n\t\t\t\t{message && (\n\t\t\t\t\t<div class='alert alert-success mb-3' role='alert'>\n\t\t\t\t\t\t<i class='fas fa-check' /> {message}\n\t\t\t\t\t</div>\n\t\t\t\t)}\n\n\t\t\t\t<div class='row'>\n\t\t\t\t\t<div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 border-bottom'>\n\t\t\t\t\t\t<Teams stores={this.props.stores} callback={this.changeTeam} key={`teams-${currentTeam}`} />\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-2 mb-2'>\n\t\t\t\t\t\t<a class='btn btn-primary btn-sm float-right'\n\t\t\t\t\t\t\thref='/workouts/edit/new'\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<i class='fas fa-plus' /> <Text id='workout.index.add-workout'>Legg til treningstur</Text>\n\t\t\t\t\t\t</a>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mb-3'>\n\t\t\t\t\t\t<div class='row mt-3'>\n\t\t\t\t\t\t\t{user && user.strava && <>\n\t\t\t\t\t\t\t\t<Strava stores={this.props.stores} activities={stravaActivities} key={`strava-${currentTeam}-${stravaActivities.length}`} />\n\t\t\t\t\t\t\t</>}\n\t\t\t\t\t\t\t{user && user.garmin && <>\n\t\t\t\t\t\t\t\t<Garmin stores={this.props.stores} activities={garminActivityDetails} key={`garmin-${currentTeam}-${garminActivityDetails.length}`} />\n\t\t\t\t\t\t\t</>}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div class='col-12'>\n\n\t\t\t\t\t\t{/* <div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 px-0 mb-3'>\n\n\t\t\t\t\t\t\t<div class='input-group mb-3'>\n\t\t\t\t\t\t\t\t<Localizer>\n\t                                <input\n\t\t\t\t\t\t\t\t\t\tclass='form-control form-control'\n\t\t\t\t\t\t\t\t\t\ttype='text'\n\t\t\t\t\t\t\t\t\t\tautocomplete='off'\n\t\t\t\t\t\t\t\t\t\tvalue={filterText}\n\t\t\t\t\t\t\t\t\t\tplaceholder={<Text id='workouts.search-for'>Søk etter trening</Text>}\n\t\t\t\t\t\t\t\t\t\tonInput={linkState(this, 'filterText')}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</Localizer>\n\t\t\t\t\t\t\t\t{filterText && <div class='input-group-append'>\n\t\t\t\t\t\t\t\t\t<button class='btn btn-sm btn-outline-danger' type='button' onClick={this.removeFilterText}><i class='fas fa-times' /></button>\n\t\t\t\t\t\t\t\t</div>}\n\t\t\t\t\t\t\t</div>\n\n                        </div>\n */}\n\t\t\t\t\t\t<div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 px-0'>\n\t\t\t\t\t\t\t<h5>\n\t\t\t\t\t\t\t\t{/* <Text id='workouts.all-workouts' fields={{ total: workoutsFiltered.length }}>Treningsturene - {workoutsFiltered.length} stk</Text> */}\n\t\t\t\t\t\t\t\t{currentTeamObject && currentTeamObject.name && <div>\n\t\t\t\t\t\t\t\t\t<small class='font-weight-lighter'>(<Text id='workout.index.filtered-by'>Filtered by</Text>: {currentTeamObject.name})</small>\n\t\t\t\t\t\t\t\t</div>}\n\t\t\t\t\t\t\t</h5>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t{!isLoading && workouts && workouts.length === 0 && (\n\t\t\t\t\t\t\t<div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 text-muted'>\n\t\t\t\t\t\t\t\t{dogs && dogs.length === 0 && (\n\t\t\t\t\t\t\t\t\t<div class='mb-5 py-3 text-center border-top border-bottom'>\n\t\t\t\t\t\t\t\t\t\t<div class='display-4'>\n\t\t\t\t\t\t\t\t\t\t\t<i class='fas fa-dog' />\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<h5>\n\t\t\t\t\t\t\t\t\t\t\t<Text id='workouts.no-dogs'>Ingen hunder er registert.</Text>\n\t\t\t\t\t\t\t\t\t\t</h5>\n\t\t\t\t\t\t\t\t\t\t<Text id='workouts.no-dogs-tip'>Det er lurt å legge inn hunder før du registrerer en treningstur.</Text><br />\n\t\t\t\t\t\t\t\t\t\t<a class='btn btn-info mt-3' href='/dogs/edit/new'>\n\t\t\t\t\t\t\t\t\t\t\t<i class='fas fa-dog' /> <Text id='workouts.add-dog'>Legg til hund</Text>\n\t\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t)}\n\n\t\t\t\t\t\t\t\t{tracks && tracks.length === 0 && (\n\t\t\t\t\t\t\t\t\t<div class='mb-5 py-3 text-center border-top border-bottom'>\n\t\t\t\t\t\t\t\t\t\t<div class='display-4'>\n\t\t\t\t\t\t\t\t\t\t\t<i class='fas fa-map-marked' />\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<h5>\n\t\t\t\t\t\t\t\t\t\t\t<Text id='workouts.no-tracks'>Ingen runder er registert.</Text>\n\t\t\t\t\t\t\t\t\t\t</h5>\n\t\t\t\t\t\t\t\t\t\t<Text id='workouts.no-tracks-tip-1'>Det er lurt å legge inn runden før du registrerer en treningstur. Da får du automatisk fylt ut distanse og høydemeter.</Text><br />\n\t\t\t\t\t\t\t\t\t\t<Text id='workouts.no-tracks-tip-2'>Dersom du ikke har GPX-filen fra denne runden, så kan du likevel registrere treningen.</Text><br />\n\n\t\t\t\t\t\t\t\t\t\t<a class='btn btn-info mt-3' href='/tracks/edit/new'>\n\t\t\t\t\t\t\t\t\t\t\t<i class='fas fa-map-marked' /> <Text id='workouts.add-track'>Legg til runde</Text>\n\t\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t)}\n\n\t\t\t\t\t\t\t\t<div class='text-center mb-5'>\n\t\t\t\t\t\t\t\t\t<div class='display-1'>\n\t\t\t\t\t\t\t\t\t\t<i class='fas fa-running' />\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<h5>\n\t\t\t\t\t\t\t\t\t\t<Text id='workouts.no-workouts'>Ingen treningsturer er registrert ennå.</Text>\n\t\t\t\t\t\t\t\t\t</h5>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<p class='text-center'>\n\t\t\t\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t\t\t\t<Text id='workouts.no-workouts-1'>Tracking i appen er ikke helt klart ennå pga noen tekniske begrensninger i Apple iOS.</Text>\n\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t\t\t\t<Text id='workouts.no-workouts-2'>Når jeg får tak i en Android telefon skal jeg får satt opp denne funksjonen slik at den kan brukes der.</Text>\n\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t<p class='text-center'>\n\t\t\t\t\t\t\t\t\t<Text id='workouts.no-workouts-3'>Kart over ruten du har kjørt legges inn som GPX under runder.</Text>\n\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t<Text id='workouts.no-workouts-howto'>Slik kommer du i gang</Text>:\n\t\t\t\t\t\t\t\t<ol>\n\t\t\t\t\t\t\t\t\t<li><Text id='workouts.no-workouts-howto-1'>Trykk på knappen \"Legg til treningstur\" oppe til høyre.</Text></li>\n\t\t\t\t\t\t\t\t</ol>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t)}\n\n\t\t\t\t\t\t<FastList\n\t\t\t\t\t\t\tdata={workoutsFiltered}\n\t\t\t\t\t\t\twrapperClassNames={'row pb-4'}\n\t\t\t\t\t\t\tcontentClassNames={`col-12 col-sm-8 col-lg-6 offset-sm-2 offset-lg-3 my-1 position-relative rounded rounded-lg py-3 bg-${darkmode ? 'black' : 'white'} shadow-sm`}\n\t\t\t\t\t\t\trenderContent={this.renderContent}\n\t\t\t\t\t\t\tdataFields={dataFields}\n\t\t\t\t\t\t\tdataValues={{ type: '11' }}\n\t\t\t\t\t\t\thandleIntersection={handleIntersection}\n\t\t\t\t\t\t\tsessionid={sessionid}\n\t\t\t\t\t\t/>\n\n\t\t\t\t\t\t{/* {workoutsFiltered && workoutsFiltered.map(workout => (\n\t\t\t\t\t\t\t<Workout stores={this.props.stores} workout={workout} showDate={true} />\n\t\t\t\t\t\t))} */}\n\t\t\t\t\t</div>\n\n\t\t\t\t\t{/* <div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 text-center'>\n\t\t\t\t\t\t<button class='btn btn-sm btn-link text-muted'\n\t\t\t\t\t\t\tstyle='font-size: 1.5em;'\n\t\t\t\t\t\t\tonClick={this.loadMore}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<i class='fas fa-download' /> Load {LIMIT} more...\n\t\t\t\t\t\t</button>\n\t\t\t\t\t</div> */}\n\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nexport default Workouts;\n","import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport { Text, Localizer } from 'preact-i18n';\n\nimport ScrollIntoView from '../../components/util/scrollIntoView';\n\n@observer\nclass Teams extends Component {\n    toggleTeam = (team) => {\n\t\tconst { callback, unsetTeamIfSelected = true } = this.props;\n        const { dogStore, workoutStore } = this.props.stores;\n\t\tconst { currentTeam } = dogStore;\n\t\tif (unsetTeamIfSelected && team === currentTeam) {\n\t\t\tdogStore.setCurrentTeam(undefined);\n\t\t\tworkoutStore.setCurrentTeam(undefined);\n\t\t} else {\n\t\t\tdogStore.setCurrentTeam(team);\n\t\t\tworkoutStore.setCurrentTeam(team);\n\t\t}\n\t\tif (util.isDefined(callback)) {\n\t\t\tcallback();\n\t\t}\n\t}\n\n    showAllTeams = () => {\n\t\tconst { callback } = this.props;\n        const { dogStore, workoutStore } = this.props.stores;\n\t\tdogStore.setCurrentTeam(undefined);\n\t\tworkoutStore.setCurrentTeam(undefined);\n\t\tif (util.isDefined(callback)) {\n\t\t\tcallback();\n\t\t}\n\t}\n\n\t// componentDidMount() {\n\t// \tif (this.container) {\n\t// \t\tthis.container.scrollIntoView({ behavior: 'smooth', block: 'end', inline: 'center' });\n\t// \t}\n\t// }\n\n    render() {\n        const { userStore, dogStore } = this.props.stores;\n        const { teams } = userStore;\n\t\tconst { currentTeam } = dogStore;\n\t\tconst { highlight, showAll = true } = this.props;\n        return (\n\t\t\t<div class='row mt-2'>\n\t\t\t\t<div class='w-100 overflow-hidden'>\n\t\t\t\t\t<div\n\t\t\t\t\t\tclass='d-flex flex-row flex-nowrap pb-2 px-1 no-scrollbar'\n\t\t\t\t\t\tstyle='overflow: auto; scroll-snap-type: x mandatory;'\n\t\t\t\t\t>\n\t\t\t\t\t\t{/* <xmp><br /><br /><br /><br />{JSON.stringify(teams, null, 4)}</xmp> */}\n\t\t\t\t\t\t{teams && teams.map((team, idx) => {\n\t\t\t\t\t\t\tlet classNames;\n\t\t\t\t\t\t\tif (teams.length === 1) {\n\t\t\t\t\t\t\t\tclassNames = 'rounded-pill-both';\n\t\t\t\t\t\t\t} else if (idx === 0) {\n\t\t\t\t\t\t\t\tclassNames = 'rounded-pill-left';\n\t\t\t\t\t\t\t} else if (idx + 1 === teams.length) {\n\t\t\t\t\t\t\t\tclassNames = 'rounded-pill-right';\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t<div class='col mb-0 px-0 clearfix' key={team.id}>\n\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\tclass={`btn btn-sm btn-block \n\t\t\t\t\t\t\t\t\t\t\trounded-none ${classNames}\n\t\t\t\t\t\t\t\t\t\t\t${currentTeam === team.id ? 'btn-success' : 'btn-outline-success'}\n\t\t\t\t\t\t\t\t\t\t\ttext-nowrap clearfix`}\n\t\t\t\t\t\t\t\t\t\tstyle='text-overflow: ellipsis; overflow: hidden;'\n\t\t\t\t\t\t\t\t\t\tonClick={() => this.toggleTeam(team.id)}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<i class='fas fa-users' /> {team.name}\n\n\t\t\t\t\t\t\t\t\t\t{highlight && highlight.indexOf(team.id) > -1 && <>\n\t\t\t\t\t\t\t\t\t\t\t{currentTeam === team.id ? <>\n\t\t\t\t\t\t\t\t\t\t\t\t<i class='fas fa-check float-right' />\n\t\t\t\t\t\t\t\t\t\t\t</> : <>\n\t\t\t\t\t\t\t\t\t\t\t\t<div class='spinner-grow text-warning float-right' role='status'>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span class='sr-only'>Loading...</span>\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t<i class='far fa-hand-point-left float-right' style='font-size: 2.0em;' />   \n\t\t\t\t\t\t\t\t\t\t\t</>}\n\t\t\t\t\t\t\t\t\t\t</>}\n\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t{/* {currentTeam === team.id && <ScrollIntoView horizontal={'center'} vertical={'end'} />} */}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t})}\n\t\t\t\t\t</div>\n\t\t\t\t\t{showAll && <div class='row'>\n\t\t\t\t\t\t<div class='col-12 mb-1 px-1 d-flex justify-content-center'>\n\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\tclass={`btn btn-sm rounded-lg btn-link text-nowrap clearfix`}\n\t\t\t\t\t\t\t\tstyle='text-overflow: ellipsis; overflow: hidden;'\n\t\t\t\t\t\t\t\tonClick={this.showAllTeams}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<i class='fas fa-users' /> <Text id='teams.show-all'>Show all</Text>\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>}\n\t\t\t\t</div>\n\t\t\t</div>\n        );\n    }\n}\n\nexport default Teams;\n","import { h, Component } from 'preact';\nimport { observer } from 'mobx-preact';\nimport util from 'preact-util';\n\n// TODO: Do we need mobx? What is mobx doing here?  \n\n@observer\nclass FastListLine extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {};\n        this.containerRef = null;\n    }\n\n    componentWillUnmount() {\n        const { removeIntersectionObserver } = this.props;\n        if (removeIntersectionObserver) {\n            removeIntersectionObserver(this.containerRef);\n        }\n    }\n\n    componentDidMount() {\n        const { addIntersectionObserver } = this.props;\n        if (addIntersectionObserver) {\n            addIntersectionObserver(this.containerRef);\n        }\n    }\n\n    render() {\n        const {\n            wrapperClassNames = '',\n            contentClassNames = '',\n            renderContent,\n            obj = {},\n            idx,\n            dataFields,\n            dataValues,\n            sessionid,\n        } = this.props;\n\n        const dataProperties = {};\n        if (sessionid) {\n            dataProperties.sessionid = sessionid;\n        }\n        dataFields.forEach(e => dataProperties[`data-${e}`] = encodeURI(dataValues[e] || obj[e]));\n\n        return (\n            <div\n                class={`${wrapperClassNames}`}\n                ref={c => this.containerRef = c}\n                data-idx={idx}\n                {...dataProperties}\n            >\n                <div\n                    class={`${contentClassNames}`}\n                    style={`display: block;`}\n                >\n                    {renderContent({\n                        obj,\n                        idx,\n                    })}\n                </div>\n            </div>\n        );\n    }\n}\n\n@observer\nclass FastList extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {};\n    }\n\n    // IntersectionObserver\n    deleteIntersectionObserver = () => {\n        this.intersectionObserver = null;\n    }\n\n    handleIntersection = (entries) => {\n        const { handleIntersection } = this.props;\n        if (typeof(handleIntersection) === 'function') {\n            // console.log('handleIntersection');\n            handleIntersection(entries);\n        }\n        // console.log({ entries });\n        // TODO: Make it possible to run defined functions for entries.\n        // mu.intersectionObserverCallback(entries);\n        entries.forEach((e) => {\n            const { isIntersecting } = e;\n            const { height = 0 } = e.target.dataset;\n            // const childHeight = e.target.childNodes[0].getBoundingClientRect().height;\n            // const targetHeight = e.target.getBoundingClientRect().height;\n            const childHeight = e.target.childNodes[0].offsetHeight;\n            const targetHeight = e.target.offsetHeight;\n            const scrollHeight = e.target.scrollHeight;\n            const currentHeight = Math.max(childHeight, targetHeight, scrollHeight);\n            // console.log({ isIntersecting, height, childHeight, targetHeight, scrollHeight, currentHeight }, e.target);\n\n            if (isIntersecting) {\n                e.target.childNodes[0].style.display=`block`;\n                // TODO: Should be set after image is loaded.\n                // const height = e.target.childNodes[0].clientHeight > e.target.clientHeight ? e.target.childNodes[0].clientHeight : e.target.clientHeight;\n                // console.log(e.target);\n                // console.log('e.target.childNodes[0].offsetHeight:', e.target.childNodes[0].offsetHeight);\n                // console.log('e.target.childNodes[0].scrollHeight:', e.target.childNodes[0].scrollHeight);\n                // console.log('e.target.childNodes[0].clientHeight:', e.target.childNodes[0].clientHeight);\n                // console.log('e.target.offsetHeight:', e.target.offsetHeight);\n                // console.log('e.target.scrollHeight:', e.target.scrollHeight);\n                // console.log('e.target.clientHeight:', e.target.clientHeight);\n                // console.log('height:', height);\n                // e.target.style.height=`${height}px`;\n                e.target.style.minHeight = `${currentHeight > height ? currentHeight : height}px`;\n            } else if (e.target.style.minHeight) {\n                // e.target.style.height = `${currentHeight > height ? currentHeight : height}px`;\n                e.target.style.minHeight = `${currentHeight > height ? currentHeight : height}px`;\n                e.target.childNodes[0].style.display=`none`;\n            }\n        });\n    }\n\n    setupIntersectionObserver = () => {\n        if (!('IntersectionObserver' in window) ||\n            !('IntersectionObserverEntry' in window) ||\n            !('intersectionRatio' in window.IntersectionObserverEntry.prototype)) {\n            return false;\n        }\n\n        const options = {\n            root: null,\n            rootMargin: '100px',\n            threshold: 0.1,\n        };\n        this.intersectionObserver = new IntersectionObserver(this.handleIntersection, options);\n    }\n\n    addIntersectionObserver = (ref) => {\n        if (this.intersectionObserver && ref) {\n            this.intersectionObserver.observe(ref);\n        }\n    }\n    removeIntersectionObserver = (ref) => {\n        if (this.intersectionObserver && ref) {\n            this.intersectionObserver.unobserve(ref);\n        }\n    }\n\n    componentWillMount() {\n        this.setupIntersectionObserver();\n    }\n\n    componentWillUnmount() {\n        this.deleteIntersectionObserver();\n    }\n\n    render() {\n        const {\n            data = [],\n            wrapperClassNames = 'row pb-4 bg-light',\n            contentClassNames = `col-12 col-sm-8 col-lg-6 offset-sm-2 offset-lg-3 mb-0 position-relative rounded rounded-lg py-3 shadow-sm`,\n            renderContent = (e) => <>Missing render function!</>,\n            dataFields = [],\n            dataValues = {},\n        } = this.props;\n        \n        return (\n            <div class='w-100'>\n                {data && data.filter(e => util.isObject(e)).map((obj, idx) => {\n                    const wrapperClasses = obj.hasOwnProperty('wrapperClassNames') ? obj.wrapperClassNames : wrapperClassNames;\n                    const contentClasses = obj.hasOwnProperty('contentClassNames') ? obj.contentClassNames : contentClassNames;\n                    return (<>\n                        <FastListLine\n                            key={`fastline-${idx}-${obj.id}`}\n                            obj={obj}\n                            idx={idx}\n                            addIntersectionObserver={this.addIntersectionObserver}\n                            removeIntersectionObserver={this.removeIntersectionObserver}\n                            wrapperClassNames={wrapperClasses}\n                            contentClassNames={contentClasses}\n                            renderContent={renderContent}\n                            dataFields={dataFields}\n                            dataValues={dataValues}\n                        />\n                    </>);\n                })}\n            </div>\n        );\n    };\n}\n\nexport default FastList;\n"],"sourceRoot":""}