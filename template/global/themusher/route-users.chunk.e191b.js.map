{"version":3,"sources":["webpack:///./routes/users/index.js"],"names":["MARGIN_TOP","mu","marginTop","MARGIN_BOTTOM","marginBottom","SUB_MENU_MARGIN_TOP","subMenuMarginTop","Profile","observer","props","resetEmailMessage","userStore","stores","updateField","resetEmailError","toggleSetting","field","user","settings","updateSetting","subscriptionCreate","paypalStore","setState","paypalLoading","getInfo","subscriptionCancel","e","id","target","closest","dataset","planId","subscriptionDetail","subscription","payPalSubscriptionId","setSubscriptionPaypal","data","toggleCancel","showCancel","state","toggleDetails","showDetails","time","Date","now","count","componentDidMount","this","verifyEmailToken","verifyEmail","token","render","darkmode","appState","emailMessage","emailError","emailMessageIcon","emailErrorIcon","isAdmin","allTeams","findTeams","teams","util","getApiServer","getJwtToken","class","style","href","message","icon","remove","email","team","findTeam","map","name","username","firstname","lastname","cellphone","url","facebook","instagram","snapchat","Component"],"mappings":"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","file":"route-users.chunk.e191b.js","sourcesContent":["import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport { Text, Localizer } from 'preact-i18n';\n\nimport mu from '../../lib/musher-util';\nconst MARGIN_TOP = mu.marginTop(true);\nconst MARGIN_BOTTOM = mu.marginBottom();\nconst SUB_MENU_MARGIN_TOP = mu.subMenuMarginTop();\n\nimport Error from '../../components/error';\nimport Message from '../../components/message';\n\n@observer\nclass Profile extends Component {\n\tconstructor(props) {\n        super(props);\n        this.state = {\n            time: Date.now(),\n\t\t\tcount: 10\n        };\n    }\n\n\tresetEmailMessage = () => {\n\t\tconst { userStore } = this.props.stores;\n\t\tuserStore.updateField('emailMessage', '');\n\t\tuserStore.updateField('emailMessageIcon', '');\n\t}\n\n\tresetEmailError = () => {\n\t\tconst { userStore } = this.props.stores;\n\t\tuserStore.updateField('emailError', '');\n\t\tuserStore.updateField('emailErrorIcon', '');\n\t}\n\n\ttoggleSetting= async (field) => {\n        const { userStore } = this.props.stores;\n\t\tconst { user } = userStore;\n\t\tconst { settings = {} } = user;\n        await userStore.updateSetting({ [`settings.${field}`]: settings[field] === 1 ? 0 : 1 });\n    }\n\n\tsubscriptionCreate = async () => {\n\t\tconst { paypalStore, userStore } = this.props.stores;\n\t\tthis.setState({ paypalLoading: true });\n\t\tawait paypalStore.subscriptionCreate({});\n\t\tawait userStore.getInfo();\n\t\tthis.setState({ paypalLoading: false });\n\t}\n\n\tsubscriptionCancel = async (e) => {\n\t\tconst { id } = e.target.closest('button').dataset;\n\t\tconst { paypalStore, userStore } = this.props.stores;\n\t\tawait paypalStore.subscriptionCancel({ planId: id });\n\t\tawait userStore.getInfo();\n\t}\n\n\tsubscriptionDetail = async () => {\n\t\tconst { paypalStore, userStore } = this.props.stores;\n\t\tconst { user = {} } = userStore;\n\t\tconst { subscription } = user;\n\n\t\tif (subscription.payPalSubscriptionId) {\n\t\t\tconst response = await paypalStore.subscriptionDetail({ id: subscription.payPalSubscriptionId });\n\t\t\tuserStore.setSubscriptionPaypal(response.data);\n\t\t\tawait userStore.getInfo();\n\t\t}\n\t}\n\n\ttoggleCancel = () => {\n\t\tconst { showCancel } = this.state;\n\t\tthis.setState({\n\t\t\tshowCancel: !showCancel,\n\t\t});\n\t}\n\ttoggleDetails = () => {\n\t\tconst { showDetails } = this.state;\n\t\tif (!showDetails) {\n\t\t\tthis.subscriptionDetail();\n\t\t}\n\t\tthis.setState({\n\t\t\tshowDetails: !showDetails,\n\t\t});\n\t}\n\n\tcomponentDidMount() {\n\t\tconst { userStore } = this.props.stores;\n\n\t\tif (this.props.verifyEmailToken) {\n\t\t\tuserStore.verifyEmail({ token: this.props.verifyEmailToken });\n\t\t}\n\t}\n\n\trender() {\n\t\tconst { userStore, appState } = this.props.stores;\n\t\tconst { darkmode } = appState;\n\t\tconst { user, emailMessage, emailError, emailMessageIcon, emailErrorIcon, isAdmin } = userStore;\n\t\tconst { teams, settings = {} } = user;\n\t\tconst allTeams = userStore.findTeams(teams);\n\t\tconst apiServer = util.getApiServer();\n\t\tconst jwtToken = util.getJwtToken();\n\t\treturn (\n\t\t\t<div class='container-fluid' style={`margin-bottom: ${MARGIN_BOTTOM}; margin-top: ${MARGIN_TOP};`}>\n\t\t\t\t<div class='row fixed-top' style={`margin-top: ${SUB_MENU_MARGIN_TOP}; background-color: ${darkmode ? '#191d21' : '#f8f9fa'};`}>\n\t\t\t\t\t<div class='col text-center border-bottom border-primary subtopmenu text-overflow'>\n\t\t\t\t\t\t<nobr><a href='/users' class='text-primary stretched-link'><i class='fas fa-user' /> <Text id='users.title'>Din profil</Text></a></nobr>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class='col text-center subtopmenu text-overflow'>\n\t\t\t\t\t\t<nobr><a href='/users/settings' class='text-secondary stretched-link'><i class='fas fa-sliders-h' /> <Text id='users.settings'>Innstillinger</Text></a></nobr>\n\t\t\t\t\t</div>\n\t\t\t\t\t{isAdmin && <div class='col text-center subtopmenu text-overflow'>\n\t\t\t\t\t\t<nobr><a href='/users/subscription' class='text-secondary stretched-link'><i class='fas fa-signature' /> <Text id='users.subscriptions'>Abonnement</Text></a></nobr>\n\t\t\t\t\t</div>}\n\t\t\t\t\t<div class='col text-center subtopmenu text-overflow'>\n\t\t\t\t\t\t<nobr><a href='/users/integrations' class='text-secondary stretched-link'><i class='fas fa-plug' /> <Text id='users.integrations'>Integrasjoner</Text></a></nobr>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\n                <div class='row mt-5'>\n\t\t\t\t\t<div class='col-12'>\n\t\t\t\t\t\t<Error message={emailError} icon={emailErrorIcon} remove={this.resetEmailError} />\n                        <Message message={emailMessage} icon={emailMessageIcon} remove={this.resetEmailMessage}  />\n\n\t\t\t\t\t\t<a href='/users/edit' class='btn btn-primary btn-sm float-right'>\n\t\t\t\t\t\t\t<Text id='users.edit'>Endre</Text>\n\t\t\t\t\t\t</a>\n\n\t\t\t\t\t\t<h5><Text id='users.title'>Din profil</Text></h5>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class='col-4 text-muted text-right'><Text id='users.email'>E-post</Text></div><div class='col-8'>{user.email}</div>\n\n\t\t\t\t\t<div class='col-4 text-muted text-right'><Text id='users.password'>Passord</Text></div><div class='col-8'>\n\t\t\t\t\t\t<a href='/users/edit-password' class='btn btn-primary btn-sm'>\n\t\t\t\t\t\t\t<Text id='users.change-password'>Endre passord</Text>\n\t\t\t\t\t\t</a>\n\t\t\t\t\t</div>\n\t\t\t\t\n\t\t\t\t\t{user.team && <><div class='col-4 text-muted text-right'><Text id='users.main-team'>Hovedteam</Text></div><div class='col-8'>{userStore.findTeam(user.team)}</div></>}\n\t\t\t\t\t{user.teams && <><div class='col-4 text-muted text-right'><Text id='users.all-teams'>Alle teamene</Text></div><div class='col-8'>{allTeams.map(team => (\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t{team.name}\n\t\t\t\t\t\t\t{/* <span class='text-muted'>\n\t\t\t\t\t\t\t\t<i class='fas fa-dog ml-3' /> {team.dogs.length}\n\t\t\t\t\t\t\t\t<i class='fas fa-users ml-3' /> {team.members.length}\n\t\t\t\t\t\t\t</span> */}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t))}</div></>}\n\t\t\t\t\t{user.username && <><div class='col-4 text-muted text-right'><Text id='users.username'>Brukernavn</Text></div><div class='col-8'>{user.username}</div></>}\n\t\t\t\t\t{user.firstname && <><div class='col-4 text-muted text-right'><Text id='users.firstname'>Fornavn</Text></div><div class='col-8'>{user.firstname}</div></>}\n\t\t\t\t\t{user.lastname && <><div class='col-4 text-muted text-right'><Text id='users.lastname'>Etternavn</Text></div><div class='col-8'>{user.lastname}</div></>}\n\t\t\t\t\t{user.cellphone && <><div class='col-4 text-muted text-right'><Text id='users.cellphone'>Mobil</Text></div><div class='col-8'>{user.cellphone}</div></>}\n\t\t\t\t\t{user.url && <><div class='col-4 text-muted text-right'><Text id='users.homepage'>Hjemmeside</Text></div><div class='col-8'>{user.url}</div></>}\n\t\t\t\t\t{user.facebook && <><div class='col-4 text-muted text-right'><Text id='users.facebook'>Facebook</Text></div><div class='col-8'>{user.facebook}</div></>}\n\t\t\t\t\t{user.instagram && <><div class='col-4 text-muted text-right'><Text id='users.instagram'>Instagram</Text></div><div class='col-8'>{user.instagram}</div></>}\n\t\t\t\t\t{user.snapchat && <><div class='col-4 text-muted text-right'><Text id='users.snapchat'>Snapchat</Text></div><div class='col-8'>{user.snapchat}</div></>}\n\t\t\t\t</div>\n\n\t\t\t\t\n\t\t\t\t<div class='row mt-5 pt-5'>\n\t\t\t\t\t<div class='col-12 text-center'>\n\t\t\t\t\t\t<a href='/logout' class='btn btn-block btn-lg btn-warning'>\n\t\t\t\t\t\t\t<i class='fas fa-sign-out-alt' /> <Text id='header.logout'>Logg ut</Text>\n\t\t\t\t\t\t</a>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nexport default Profile;\n"],"sourceRoot":""}