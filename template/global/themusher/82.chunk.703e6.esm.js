(window.webpackJsonp=window.webpackJsonp||[]).push([[82],{"4dUO":function(t,e,s){"use strict";function n(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,n)}return s}function i(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}var o,c=s("hosL"),a=s("Utv1"),l=s("/eY4"),r=s("OhSV"),m=s("go65");s("ETxl"),s("ZOvn");var d,h=Object(l.a)(o=class extends c.Component{constructor(...t){var e;super(...t),e=this,this.commentNews=async function(){const{callback:t=(()=>{}),commentId:s}=e.props,{news:n}=e.props,{newsStore:i}=e.props.stores,{comment:o=""}=e.state,c=await i.commentReplyNews({id:n.id,commentId:s,comment:o});c&&200===c.status&&(e.setState({comment:""}),t({news:n,response:c}))}}render(){const{inputRef:t}=this.props,{comment:e}=this.state,{userStore:s}=this.props.stores,{user:n={}}=s,i=n.firstname?`${a.a.ucfirst(n.firstname,!0)}${a.a.ucfirst(n.lastname,!0)}`:""+a.a.ucfirst(n.email||"",!0),o=n.image||(n.images?n.images[0]:void 0);return Object(c.h)("div",{class:"w-100"},Object(c.h)("div",{class:"d-flex mb-0 position-relative w-100"},Object(c.h)("div",{class:"text-center border rounded-circle imageRounded imageRoundedThumb",style:(o?`background-image: url('${o.s3SmallLink}'); background-size: cover;`:"")+" border-width: 3px !important;"},!o&&Object(c.h)("span",{class:"font-weight-lighter",style:"font-size: 15px;"},i)),Object(c.h)("div",{class:"col pl-3",style:"line-height: 1.2em;"},Object(c.h)("div",{class:"d-flex bd-highlight"},Object(c.h)("div",{class:"p-0 w-100 bd-highlight"},Object(c.h)("label",{class:"sr-only",for:"inlineFormInput"},Object(c.h)(r.c,{id:"comments.comment"},"Kommentar")),Object(c.h)("div",{class:"border rounded rounded-lg position-relative"},Object(c.h)(r.b,null,Object(c.h)("input",{class:"form-control-plaintext px-2",type:"text",placeholder:Object(c.h)(r.c,{id:"comments.write-comment"},"Skriv en kommentar..."),onInput:Object(m.a)(this,"comment"),value:e,ref:t})))),Object(c.h)("div",{class:"p-0 pl-2 flex-shrink-1 bd-highlight"},Object(c.h)("button",{type:"button",class:"btn btn-sm btn-primary mb-2",onClick:this.commentNews},Object(c.h)("i",{class:"fas fa-paper-plane"})))))))}})||o;const b={showAddComment:{},showAllComments:!1,showAllReplies:{}};let p=Object(l.a)(d=class extends c.Component{constructor(t){var e;super(t),e=this,this.likeComment=async function(t){const{callback:s=(()=>{})}=e.props,n=t.target.parentElement.dataset.id||t.target.dataset.id,{news:i}=e.props,{newsStore:o}=e.props.stores,c=await o.likeNewsComment({id:i.id,commentId:n});return c&&200===c.status&&s({news:i,commentId:n,response:c}),!0},this.likeReply=async function(t){const{callback:s=(()=>{})}=e.props,n=t.target.parentElement.dataset.id||t.target.dataset.id,i=t.target.parentElement.dataset.comment||t.target.dataset.comment,{news:o}=e.props,{newsStore:c}=e.props.stores,a=await c.likeNewsCommentReply({id:o.id,replyId:n,commentId:i});a&&200===a.status&&s({news:o,commentId:i,response:a})},this.replyComment=async function(t){const s=t.target.parentElement.dataset.id||t.target.dataset.id,{showAddComment:n}=e.state;n[s]=!n[s],e.setState({showAddComment:n},()=>{e.inputRef[s]&&e.inputRef[s].focus()})},this.toggleComments=()=>{const{showAllComments:t}=this.state;this.setState({showAllComments:!t})},this.toggleReplies=t=>{const e=t.target.parentElement.dataset.id||t.target.dataset.id,{showAllReplies:s}=this.state;s[e]=!s[e],this.setState({showAllReplies:s})},this.state=function(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?n(Object(s),!0).forEach((function(e){i(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):n(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}({},b),this.inputRef={}}render(){const{showAddComment:t,showAllComments:e,showAllReplies:s}=this.state,{news:n,callback:i=(()=>{}),col:o=12,offset:l=0,compact:m=!1}=this.props,{userStore:d}=this.props.stores,{user:b}=d;let p=[],u=0,f=0;if(n.comments){if(u=n.comments.length,e)p=n.comments;else{p=n.comments.slice(Math.max(u-(m?0:2),0))}f=p.length}return Object(c.h)("div",{class:`col-${o} offset-${l} col-sm-8 col-lg-6 offset-sm-2 offset-lg-3`},e&&Object(c.h)("div",null,Object(c.h)("button",{class:"btn btn-sm btn-link py-0 mb-2",onClick:this.toggleComments},Object(c.h)(r.c,{id:"comments.hide-all-comments"},"Skjul alle kommentarene."))),n&&p&&p.reverse().map(e=>{const{user:o={}}=e,l=o.firstname?`${a.a.ucfirst(o.firstname,!0)}${a.a.ucfirst(o.lastname,!0)}`:""+a.a.ucfirst(o.email||"",!0),m=o.firstname?`${o.firstname} ${o.lastname}`:""+o.email,d=o.image||(o.images?o.images[0]:void 0),p=e.likes&&e.likes.findIndex(t=>t.user===b.id)>-1;let u=[],f=0,g=0;return e.comments&&(f=e.comments.length,u=s[e.id]?e.comments:e.comments.slice(0,void 0),g=u.length),Object(c.h)("div",{class:"row"},Object(c.h)("div",{class:"col-12 d-flex mb-2 position-relative"},Object(c.h)("div",{class:"text-center border rounded-circle imageRounded imageRoundedSmall",style:(d?`background-image: url("${d.s3SmallLink}"); background-size: cover;`:"")+" border-width: 3px !important;"},!o.image&&Object(c.h)("span",{class:"font-weight-lighter",style:"font-size: 15px;"},l)),Object(c.h)("div",{class:"flex-grow-1 pl-3 pt-0",style:"line-height: 1.2em;"},Object(c.h)("div",{class:"bg-light p-2 rounded-lg"},Object(c.h)("h5",{class:"font-weight-bold mb-0",style:"font-size: 1.0em;"},m),e.comment),Object(c.h)("small",null,Object(c.h)("button",{class:"btn btn-sm btn-link py-0 "+(p?"text-primary":""),onClick:this.likeComment,"data-id":e.id},Object(c.h)(r.c,{id:"comments.like"},"Lik")),"-",Object(c.h)("button",{class:"btn btn-sm btn-link py-0",onClick:this.replyComment,"data-id":e.id},Object(c.h)(r.c,{id:"comments.comment-add"},"Kommentar")),"-",Object(c.h)("button",{class:"btn btn-sm btn-link py-0 disabled"},a.a.formatDistance(e.createdDate,new Date,{locale:"no-NB"})))),e.likes&&e.likes.length>0&&Object(c.h)("small",{class:"position-absolute bg-light shadow-sm rounded-lg py-0 px-1",style:"bottom: 20px; right: 15px;"},Object(c.h)("i",{class:"fas fa-thumbs-up text-primary"})," ",e.likes.length)),Object(c.h)("div",{class:"col-11 offset-1 mb-2"},e&&u&&u.map(t=>{const{user:s={}}=t,n=s.firstname?`${a.a.ucfirst(s.firstname,!0)}${a.a.ucfirst(s.lastname,!0)}`:""+a.a.ucfirst(s.email||"",!0),i=s.firstname?`${s.firstname} ${s.lastname}`:""+s.email,o=s.image||(s.images?s.images[0]:void 0),l=t.likes&&t.likes.findIndex(t=>t.user===b.id)>-1;return Object(c.h)("div",{class:"row"},Object(c.h)("div",{class:"col-12 d-flex mb-2 position-relative"},Object(c.h)("div",{class:"text-center border rounded-circle imageRounded imageRoundedThumb",style:(o?`background-image: url("${o.s3SmallLink}"); background-size: cover;`:"")+" border-width: 3px !important;"},!s.image&&Object(c.h)("span",{class:"font-weight-lighter",style:"font-size: 15px;"},n)),Object(c.h)("div",{class:"flex-grow-1 pl-3 pt-0",style:"line-height: 1.2em;"},Object(c.h)("div",{class:"bg-light p-2 rounded-lg"},Object(c.h)("h5",{class:"font-weight-bold mb-0",style:"font-size: 1.0em;"},i),t.comment),Object(c.h)("small",null,Object(c.h)("button",{class:"btn btn-sm btn-link py-0 "+(l?"text-primary":""),onClick:this.likeReply,"data-comment":e.id,"data-id":t.id},Object(c.h)(r.c,{id:"comments.like"},"Lik")),"-",Object(c.h)("button",{class:"btn btn-sm btn-link py-0",onClick:this.replyComment,"data-id":e.id},Object(c.h)(r.c,{id:"comments.comment-add"},"Kommentar")),"-",Object(c.h)("button",{class:"btn btn-sm btn-link py-0 disabled"},a.a.formatDistance(t.createdDate,new Date,{locale:"no-NB"})))),t.likes&&Object(c.h)("small",{class:"position-absolute bg-light shadow-sm rounded-lg py-0 px-1",style:"bottom: 20px; right: 15px;"},Object(c.h)("i",{class:"fas fa-thumbs-up text-primary"})," ",t.likes.length)))}),f-g>0&&Object(c.h)("div",null,Object(c.h)("button",{class:"btn btn-sm btn-link py-0",onClick:this.toggleReplies,"data-id":e.id},Object(c.h)(r.c,{id:"comments.show-more",fields:{more:f-g}},"Vis ",f-g," flere kommentarer...")))),t[e.id]&&Object(c.h)("div",{class:"col-11 offset-1 d-flex mb-2 position-relative"},Object(c.h)(h,{stores:this.props.stores,news:n,callback:i,commentId:e.id,inputRef:t=>this.inputRef[e.id]=t})))}),u-f>0&&Object(c.h)("div",null,Object(c.h)("button",{class:"btn btn-sm btn-link py-0",onClick:this.toggleComments},Object(c.h)(r.c,{id:"comments.show-more",fields:{more:u-f}},"Vis ",u-f," flere kommentarer..."))),e&&Object(c.h)("div",null,Object(c.h)("button",{class:"btn btn-sm btn-link py-0",onClick:this.toggleComments},Object(c.h)(r.c,{id:"comments.hide-all-comments"},"Skjul alle kommentarene."))))}})||d;e.a=p},"88ZV":function(t,e,s){"use strict";function n(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,n)}return s}function i(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}s.r(e);var o,c=s("hosL"),a=(s("Utv1"),s("/eY4")),l=s("OhSV"),r=s("Y3FI"),m=s("Fg+7"),d=s("4dUO"),h=s("PWmE"),b=s("ZOvn");const p=b.a.marginTop(!1),u=b.a.marginTopBack(!1),f=b.a.marginBottom(),g={isLoading:!1,showAddComment:!1};let O=Object(a.a)(o=class extends c.Component{constructor(t){var e;super(t),e=this,this.likeNews=async function(){const{newsStore:t}=e.props.stores,{news:s}=t;await t.likeNews({id:s.id})},this.toggleAddComment=t=>{const e=t.target.parentElement.dataset.id||t.target.dataset.id,{showAddComment:s}=this.state;this.setState({showAddComment:!s},()=>{this.inputRef[e]&&this.inputRef[e].focus()})},this.back=()=>{Object(r.route)("/news")},this.state=function(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?n(Object(s),!0).forEach((function(e){i(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):n(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}({},g),this.inputRef={}}async loadNews(t=this.props){this.setState({isLoading:!0});const{newsStore:e}=this.props.stores;await e.load(t.id),this.setState({isLoading:!1})}componentDidMount(){this.loadNews()}render(){const{showAddComment:t}=this.state,{newsStore:e,userStore:s}=this.props.stores,{isAdmin:n}=s,{news:i}=e,{user:o}=s,{likes:a=[],comments:r=[]}=i,b=i.likes&&i.likes.findIndex(t=>t.user===o.id)>-1;return Object(c.h)("div",{class:"container-fluid",style:`margin-bottom: ${f}; margin-top: ${p};`},Object(c.h)("div",{class:"d-flex justify-content-between mb-2"},Object(c.h)("div",null,Object(c.h)("button",{class:"btn btn-link pl-0 fixed-top text-primary",style:`top: ${u}; left: 5px; font-size: 35px; width: 45px;`,onClick:this.back},Object(c.h)("i",{class:"fas fa-arrow-circle-left"}))),Object(c.h)("div",null,Object(c.h)("h5",{class:"text-muted"},Object(c.h)(l.c,{id:"news.heading"},"Siste nytt"))),Object(c.h)("div",null,n&&Object(c.h)("a",{class:"btn btn-sm btn-primary float-right ml-2",href:"/news/edit/"+i.id},Object(c.h)("i",{class:"fas fa-edit"})," ",Object(c.h)(l.c,{id:"news.edit"},"Endre")),n&&Object(c.h)("a",{class:"btn btn-sm btn-success float-right ml-2",href:"/news/edit/new"},Object(c.h)("i",{class:"fas fa-plus"})," ",Object(c.h)(l.c,{id:"news.create"},"Ny")))),Object(c.h)("div",{class:"row"},Object(c.h)("div",{class:"col-12"},Object(c.h)(m.a,{stores:this.props.stores,news:i})),Object(c.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-3"},a&&a.length>0&&Object(c.h)("small",{class:"bg-light shadow-sm rounded-lg py-0 px-1",style:"bottom: 20px; right: 15px;"},Object(c.h)("i",{class:"fas fa-thumbs-up text-primary"})," ",a.length),r&&r.length>0&&Object(c.h)("small",{class:"float-right bg-light shadow-sm rounded-lg py-0 px-1",style:"bottom: 20px; right: 15px;"},Object(c.h)("i",{class:"fas fa-comment text-primary"})," ",r.length)),Object(c.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-2 mb-3"},Object(c.h)("div",{class:"row"},Object(c.h)("div",{class:"col-6 text-center"},Object(c.h)("button",{type:"button",class:`btn btn-outline-${b?"primary":"secondary"} btn-lg btn-block ${b?"text-primary":""}`,onClick:this.likeNews},Object(c.h)("i",{class:(b?"text-primary fas":"far")+" fa-thumbs-up"})," Like")),Object(c.h)("div",{class:"col-6 text-center"},Object(c.h)("button",{type:"button",class:"btn btn-outline-secondary btn-lg btn-block","data-id":i.id,onClick:this.toggleAddComment},Object(c.h)("i",{class:"fas fa-comment"})," Comment")))),t&&Object(c.h)(h.a,{stores:this.props.stores,news:i,inputRef:t=>this.inputRef[i.id]=t}),Object(c.h)(d.a,{stores:this.props.stores,news:i,cols:"12"})),Object(c.h)("div",{class:"row"},Object(c.h)("div",{class:"col-12"},Object(c.h)("a",{href:"/news",class:"btn btn-secondary"},Object(c.h)("i",{class:"fas fa-arrow-left mr-2"}),Object(c.h)(l.c,{id:"news.back"},"Tilbake")))))}})||o;e.default=O},ETxl:function(t){t.exports={hoverelementonly:"hoverelementonly__1mJGJ",hoverElement:"hoverElement__axh3O",hoverelementhide:"hoverelementhide__1k_qH","progress-bar-vertical":"progress-bar-vertical__1B2sC","progress-bar":"progress-bar__pnsVj",dragged:"dragged__QXO46",over:"over__1re3x",list:"list__q_emZ"}},"Fg+7":function(t,e,s){"use strict";(function(t){var n,i=s("hosL"),o=s("Utv1"),c=s("/eY4"),a=s("fh8t"),l=s.n(a),r=s("ZOvn");let m=Object(c.a)(n=class extends i.Component{render(){const{news:e}=this.props,{userStore:s}=this.props.stores,{user:n}=s,{language:c="en"}=n,{isAdmin:a}=s;return Object(i.h)(t,null,Object(i.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 px-0"},e.images&&e.images[0]?Object(i.h)("img",{loading:"lazy",src:e.images[0].s3LargeLink,class:"img-fluid"}):"",Object(i.h)("h1",null,a&&Object(i.h)("i",{class:`fas fa-eye${e.active?" text-success":"-slash text-danger"} float-right`})," ",r.a.replaceImages(e.title,e.images,c,!1)),Object(i.h)("div",{class:"text-muted"},Object(i.h)("small",null,e.date&&Object(i.h)(t,null,o.a.isoDate(e.date)," - "),e.tag,e.sort&&Object(i.h)(t,null," - ",Object(i.h)("i",{class:"fas fa-sort-amount-down"})," ",e.sort))),Object(i.h)("p",{class:"clearfix"},Object(i.h)(l.a,{markdown:r.a.replaceImages(e.ingress,e.images,c),markdownOpts:r.a.getMarkdownOptions()})),Object(i.h)(l.a,{markdown:r.a.replaceImages(e.body,e.images,c),markdownOpts:r.a.getMarkdownOptions()})))}})||n;e.a=m}).call(this,s("hosL").Fragment)},PWmE:function(t,e,s){"use strict";var n,i=s("hosL"),o=s("Utv1"),c=s("/eY4"),a=s("OhSV"),l=s("go65");s("ETxl"),s("ZOvn");let r=Object(c.a)(n=class extends i.Component{constructor(...t){var e;super(...t),e=this,this.commentNews=async function(){const{callback:t=(()=>{})}=e.props,{news:s}=e.props,{newsStore:n}=e.props.stores,{comment:i=""}=e.state,o=await n.commentNews({id:s.id,comment:i});o&&200===o.status&&(e.setState({comment:""}),t({news:s,response:o}))}}render(){const{inputRef:t}=this.props,{comment:e}=this.state,{userStore:s}=this.props.stores,{user:n={}}=s,c=n.firstname?`${o.a.ucfirst(n.firstname,!0)}${o.a.ucfirst(n.lastname,!0)}`:""+o.a.ucfirst(n.email||"",!0),r=n.image||(n.images?n.images[0]:void 0);return Object(i.h)("div",{class:"col-12 col-sm-8 col-lg-6 offset-sm-2 offset-lg-3 d-flex mb-3 position-relative"},Object(i.h)("div",{class:"d-flex mb-0 position-relative w-100"},Object(i.h)("div",{class:"text-center border rounded-circle imageRounded imageRoundedSmall",style:(r?`background-image: url('${r.s3SmallLink}'); background-size: cover;`:"")+" border-width: 3px !important;"},!r&&Object(i.h)("span",{class:"font-weight-lighter",style:"font-size: 15px;"},c)),Object(i.h)("div",{class:"col pl-3",style:"line-height: 1.2em;"},Object(i.h)("div",{class:"d-flex bd-highlight"},Object(i.h)("div",{class:"p-0 w-100 bd-highlight"},Object(i.h)("label",{class:"sr-only",for:"inlineFormInput"},Object(i.h)(a.c,{id:"comments.comment"},"Kommentar")),Object(i.h)("div",{class:"border rounded rounded-lg position-relative"},Object(i.h)(a.b,null,Object(i.h)("input",{class:"form-control-plaintext px-2",type:"text",placeholder:Object(i.h)(a.c,{id:"comments.write-comment"},"Skriv en kommentar..."),onInput:Object(l.a)(this,"comment"),value:e,ref:t})))),Object(i.h)("div",{class:"p-0 pl-2 flex-shrink-1 bd-highlight"},Object(i.h)("button",{type:"button",class:"btn btn-primary mb-2",onClick:this.commentNews},Object(i.h)("i",{class:"fas fa-paper-plane"})))))))}})||n;e.a=r}}]);
//# sourceMappingURL=82.chunk.703e6.esm.js.map