(window.webpackJsonp=window.webpackJsonp||[]).push([[14,6],{"/DnB":function(e,t,s){"use strict";function o(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,o)}return s}function a(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}var i,l=s("hosL"),n=(s("Utv1"),s("/eY4"));const r={};let c=Object(n.a)(i=class extends l.Component{constructor(e){super(e),this.state=function(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?o(Object(s),!0).forEach((function(t){a(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):o(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}({},r),this.container=null}componentDidMount(){const{horizontal:e,vertical:t=""}=this.props,s={behavior:"smooth"};e&&(s.inline=e),t&&(s.block=t),this.container.scrollIntoView(s)}render(){return Object(l.h)("div",{ref:e=>this.container=e}," ")}})||i;t.a=c},"3on9":function(e,t,s){"use strict";(function(e){function o(){return(o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(e[o]=s[o])}return e}).apply(this,arguments)}function a(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,o)}return s}function i(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?a(Object(s),!0).forEach((function(t){l(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):a(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function l(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}var n,r=s("hosL"),c=s("Utv1"),d=s("/eY4"),h=s("cneo"),u=s("go65"),p=(s("Y3FI"),s("OhSV")),b=s("dVCl");const m={id:0,name:"empty"},f=()=>{const e=i({},m);return e.unique=`${(new Date).getTime()}-${c.a.randomPassword()}`,e};class g extends r.Component{render(){const{provided:e,snapshot:t,innerRef:s,children:a,className:i}=this.props;return Object(r.h)("div",o({class:"h-100 border "+i},e.droppableProps,{ref:s,style:(l=t.isDraggingOver,{borderStyle:l?"dashed":"",width:110})}),a);var l}}class O extends r.Component{constructor(...e){super(...e),this.removeThisPlaceholder=()=>{const{removePlaceholder:e=(()=>{}),idx:t,list:s}=this.props;e({idx:t,list:s})}}render(){const{provided:t,snapshot:s,innerRef:a,dog:l}=this.props;return Object(r.h)("div",o({},t.draggableProps,t.dragHandleProps,{ref:a,class:"mx-2 my-2 p-2",style:(n=s.isDragging,d=t.draggableProps.style,i({userSelect:"none",background:n?"#808080":"",maxWidth:92,height:100},d))}),0===l.id?Object(r.h)(e,null,Object(r.h)("div",null,Object(r.h)("div",{class:"text-center border rounded-circle imageRounded text-muted pt-2"},Object(r.h)("span",{class:"font-weight-lighter",style:"font-size: 35px;"}," ")),Object(r.h)("div",{class:"text-center"},Object(r.h)("button",{class:"btn btn-sm btn-link float-right p-0",onClick:this.removeThisPlaceholder},Object(r.h)("i",{class:"fas fa-trash-alt"}))," "))):Object(r.h)(e,null,Object(r.h)("div",null,Object(r.h)("div",{class:"text-center border rounded-circle imageRounded text-muted pt-2",style:""+(l.image?`background-image: url("${l.image.s3ThumbLink}");`:"")},!l.image&&Object(r.h)("span",{class:"font-weight-lighter",style:"font-size: 35px;"},c.a.ucfirst(l.name,!0))),Object(r.h)("div",{class:"text-center"},Object(r.h)("small",null,l.shortname||l.name,Object(r.h)("br",null))))));var n,d}}const j={filterby:c.a.get("dogs-filter")};let v=Object(d.a)(n=class extends r.Component{constructor(e){var t;super(e),t=this,this.toggleDog=async function(e){const{id:s}=e.target.closest("#dogContainer").dataset,o=parseInt(s,10),{object:a,type:i,elementtype:l,field:n,updateField:r,isNew:c,showPositions:d}=t.props,u=Object(h.i)(a[n])||[],p=u.indexOf(o);let b;p>-1?(u.splice(p,1),b="remove"):(u.push(o),b="add"),await r({id:a.id,field:n,value:u,type:i,elementtype:l,isNew:c,skipTimer:!0,singleValue:o}),t.setState({filterText:""}),d&&t.dndDogs({dogId:o,action:b})},this.findAllDogsInTeams=()=>{const{dogStore:e}=this.props.stores,{dogs:t=[]}=e,{object:s,currentTeam:o={}}=this.props,a=Object(h.i)(s.teams||[]),i=o.id;return t.filter(e=>!!(e.team===i||e.teams&&e.teams.indexOf(i)>-1)||(a.indexOf(e.team)>-1||!!e.teams&&e.teams.some(e=>a.indexOf(e)>=0))).map(e=>e.id)},this.addAllDogsInTeam=async function(){const{object:e,type:s,elementtype:o,field:a,updateField:i,isNew:l}=t.props,n=t.findAllDogsInTeams();await i({id:e.id,field:a,value:n,type:s,elementtype:o,isNew:l,skipTimer:!0})},this.dndDogs=({dogId:e,action:t})=>{const{dogStore:s}=this.props.stores,{dogs:o=[]}=s,{object:a}=this.props,i=a.dogs?e=>a.dogs.indexOf(e.id)>-1:()=>!1,l=Object(h.i)(o),n=e=>0===e||l.find(t=>t.id===e)&&-1===a.dogsRight.indexOf(e),r=e=>0===e||l.find(t=>t.id===e)&&-1===a.dogsLeft.indexOf(e),c=l.filter(i),d=Math.ceil(c.length/2),u=c.splice(0,d);let p=[];a.dogsLeft&&a.dogsLeft.length>0&&(p=a.dogsLeft.filter(n).map(e=>l.find(t=>t.id===e)||f()));let b=[];if(a.dogsRight&&a.dogsRight.length>0&&(b=a.dogsRight.filter(r).map(e=>l.find(t=>t.id===e)||f())),"add"===t){const t=o.find(t=>t.id===e);t&&(p.length>b.length?b.push(t):p.push(t))}if("remove"===t){const t=p.findIndex(t=>t.id===e);t>-1&&p.splice(t,1);const s=b.findIndex(t=>t.id===e);s>-1&&b.splice(s,1)}0===p.length&&0===b.length&&(p=u,b=c),t?this.setState({dogsLeft:p,dogsRight:b,dogPositionUpdated:!0},()=>this.updateDogPositions()):this.setState({dogsLeft:p,dogsRight:b})},this.addPlaceholderLeft=()=>{const{dogsLeft:e=[]}=this.state;e.push(f()),this.setState({dogsLeft:e,dogPositionUpdated:!0})},this.addPlaceholderRight=()=>{const{dogsRight:e=[]}=this.state;e.push(f()),this.setState({dogsRight:e,dogPositionUpdated:!0})},this.removePlaceholder=({idx:e,list:t})=>{if("dogsLeft"===t){const{dogsLeft:t=[]}=this.state;t.splice(e,1),this.setState({dogsLeft:t,dogPositionUpdated:!0})}if("dogsRight"===t){const{dogsRight:t=[]}=this.state;t.splice(e,1),this.setState({dogsRight:t,dogPositionUpdated:!0})}},this.clearAllDogs=async function(){const{object:e,type:s,elementtype:o,field:a,updateField:i,isNew:l}=t.props;await i({id:e.id,field:a,value:[],type:s,elementtype:o,isNew:l,skipTimer:!0}),t.resetDogPositions()},this.toggleSearchField=()=>{const{showSearchField:e}=this.state;this.setState({showSearchField:e?null:1})},this.getList=e=>this.state[e],this.onDragEnd=e=>{const{source:t,destination:s}=e;if(s)if(t.droppableId===s.droppableId){const e=((e,t,s)=>{const o=Array.from(e),[a]=o.splice(t,1);return o.splice(s,0,a),o})(this.getList(t.droppableId),t.index,s.index);this.setState({[t.droppableId]:e,dogPositionUpdated:!0})}else{const e=((e,t,s,o)=>{const a=Array.from(e),i=Array.from(t),[l]=a.splice(s.index,1);i.splice(o.index,0,l);const n={};return n[s.droppableId]=a,n[o.droppableId]=i,n})(this.getList(t.droppableId),this.getList(s.droppableId),t,s);this.setState({dogsLeft:e.dogsLeft,dogsRight:e.dogsRight,dogPositionUpdated:!0})}},this.updateDogPositions=async function(){const{dogsLeft:e=[],dogsRight:s=[]}=t.state,{object:o,updateField:a,isNew:i}=t.props;await a({id:o.id,field:"dogsLeft",value:e.map(e=>e.id),isNew:i,datatype:"array"}),await a({id:o.id,field:"dogsRight",value:s.map(e=>e.id),isNew:i,datatype:"array"}),t.setState({dogPositionUpdated:!1})},this.resetDogPositions=async function(){const{dogStore:e}=t.props.stores,{dogs:s=[]}=e,{object:o,updateField:a,isNew:i}=t.props,l=Object(h.i)(s).filter(e=>o.dogs.indexOf(e.id)>-1),n=Math.ceil(l.length/2),r=l.splice(0,n);await a({id:o.id,field:"dogsLeft",value:r.map(e=>e.id),isNew:i,datatype:"array"}),await a({id:o.id,field:"dogsRight",value:l.map(e=>e.id),isNew:i,datatype:"array"}),t.setState({dogsLeft:r,dogsRight:l,dogPositionUpdated:!1})},this.clearDogPositions=async function(){const{object:e,updateField:s,isNew:o}=t.props,a=[],i=[];await s({id:e.id,field:"dogsLeft",value:i,isNew:o,datatype:"array"}),await s({id:e.id,field:"dogsRight",value:a,isNew:o,datatype:"array"}),t.setState({dogsLeft:i,dogsRight:a,dogPositionUpdated:!1})},this.changeFilter=e=>{const t=e.target.value;this.setState({filterby:t}),c.a.set("dogs-filter",t),this.loadDog()},this.getFilteredDogs=(e=this.props)=>{const{filterby:t,filterText:s}=this.state,{object:o,filter:a=(()=>!0)}=e,{dogStore:i}=this.props.stores,{dogs:l=[]}=i;let n=a;if(o.dogs)switch(t){case"all":n=s?e=>e.name.match(new RegExp(s,"i"))||o.dogs.indexOf(e.id)>-1:()=>!0;break;case"onlySelected":n=s?e=>e.name.match(new RegExp(s,"i"))||o.dogs.indexOf(e.id)>-1:e=>o.dogs.indexOf(e.id)>-1;break;case"onlyTeam":n=s?e=>e.name.match(new RegExp(s,"i"))||o.dogs.indexOf(e.id)>-1:e=>o.team===e.team||o.dogs.indexOf(e.id)>-1;break;case"leadOnly":n=e=>o.dogs.indexOf(e.id)>-1||c.a.getNestedValue(e,"positions.lead.distanceKm")>0;break;case"pointOnly":n=e=>o.dogs.indexOf(e.id)>-1||c.a.getNestedValue(e,"positions.point.distanceKm")>0;break;case"teamOnly":n=e=>o.dogs.indexOf(e.id)>-1||c.a.getNestedValue(e,"positions.team.distanceKm")>0;break;case"wheelOnly":n=e=>o.dogs.indexOf(e.id)>-1||c.a.getNestedValue(e,"positions.wheel.distanceKm")>0}let r=l.filter(n);this.setState({filteredDogs:r})},this.state=i({dogsLeft:[],dogsRight:[]},j)}async loadDog(e=this.props){const{showPositions:t}=this.props,{dogStore:s}=e.stores;await s.load({query:{deceased:0},addData:["team","user","workoutSummary","vaccineStatuses","historyStatuses","vaccineLogStatuses","allDogs"]}),t&&this.dndDogs({}),this.getFilteredDogs()}componentWillReceiveProps(e){e.filter!==this.props.filter&&this.getFilteredDogs(e)}componentDidMount(){this.loadDog()}render(){const{filterby:t,filterText:s,showSearchField:o,dogsLeft:a=[],dogsRight:i=[],dogPositionUpdated:l,filteredDogs:n=[]}=this.state,{userStore:d,dogStore:m}=this.props.stores,{dogs:f=[]}=m,{user:j}=d,{language:v="en"}=j,{saved:y={},object:w,field:k,title:x,icon:I,help:D,showPositions:F=!1,currentTeam:S={}}=this.props,T=Object(h.i)(w[k])||[],V=this.findAllDogsInTeams(),$=w.teams?w.teams.map(e=>d.findTeam(e)):[];return Object(r.h)("div",{class:"form-group  mb-5 pb-1 border-bottom "+(y[`${k}.${w.id}`]?"is-valid":"")},Object(r.h)("span",{class:"float-right",onClick:this.toggleSearchField},Object(r.h)("i",{class:"fas fa-search"})),Object(r.h)("button",{class:"btn btn-sm btn-link float-right mr-5",onClick:this.clearAllDogs},Object(r.h)("i",{class:"fas fa-eraser"})," ",Object(r.h)(p.c,{id:"dog.dogs.remove-all-dogs"},"Fjern alle hundene")),Object(r.h)("label",{for:k+"Input"},I&&Object(r.h)("i",{class:I+" text-muted"})," ",x),Object(r.h)("div",{class:"container-fluid px-0"},o&&Object(r.h)("div",{class:"row"},Object(r.h)("div",{class:"col-12"},Object(r.h)(p.b,null,Object(r.h)("input",{class:"form-control form-control-sm",type:"text",placeholder:Object(r.h)(p.c,{id:"dog.dogs.search-for-dogs"},"Søk etter hund"),value:s,onInput:Object(u.a)(this,"filterText")})))),Object(r.h)("div",{class:"row"},Object(r.h)("div",{class:"col-12"},Object(r.h)("div",{class:"form-row align-items-center"},Object(r.h)("div",{class:"col-auto my-2 mx-auto"},Object(r.h)("select",{class:"custom-select",style:"background-color: inherit; border: none; padding-top: 0; padding-bottom: 0; height: 1.4em; font-size: 0.8em;",onInput:this.changeFilter},Object(r.h)("option",{value:"",selected:!t},"-- ",Object(r.h)(p.c,{id:"dog.dogs.choose-filter"},"Choose filter")," ---"),Object(r.h)("option",{value:"all",selected:"all"===t},Object(r.h)(p.c,{id:"dog.dogs.show-all"},"Vis alle")),Object(r.h)("option",{value:"onlySelected",selected:"onlySelected"===t},Object(r.h)(p.c,{id:"dog.dogs.show-only-selected"},"Vis kun valgte")),Object(r.h)("option",{value:"onlyTeam",selected:"onlyTeam"===t},Object(r.h)(p.c,{id:"dog.dogs.show-only-team-dogs"},"Vis kun hundene i teamet")),Object(r.h)("option",{value:"leadOnly",selected:"leadOnly"===t},Object(r.h)(p.c,{id:"dog.dogs.show-lead-dogs-only"},"Vis kun lederhunder")),Object(r.h)("option",{value:"pointOnly",selected:"pointOnly"===t},Object(r.h)(p.c,{id:"dog.dogs.show-point-dogs-only"},"Vis kun pointhunder")),Object(r.h)("option",{value:"teamOnly",selected:"teamOnly"===t},Object(r.h)(p.c,{id:"dog.dogs.show-team-dogs-only"},"Vis kun teamhunder")),Object(r.h)("option",{value:"wheelOnly",selected:"wheelOnly"===t},Object(r.h)(p.c,{id:"dog.dogs.show-wheel-dogs-only"},"Vis kun wheelhunder"))))))),Object(r.h)("div",{class:"row"},V.length>0&&Object(r.h)(e,null,Object(r.h)("button",{class:"btn btn-primary btn-block",onClick:this.addAllDogsInTeam},Object(r.h)("i",{class:"fas fa-plus mr-2"})," ",Object(r.h)(p.c,{id:"dog.dogs.add-all-in-team",fields:{total:V.length}},"Add all dogs in team"),S.name?": "+S.name:"",$&&$.length>0&&Object(r.h)("span",{class:"font-weight-lighter"},", ",$.map((t,s)=>Object(r.h)(e,null,s>0?", ":"",t))))),c.a.isArray(f)&&n.map(e=>{const s=d.findDogstatus({status:e.status,language:v}),o=d.findDogposition({position:e.position,language:v}),a=m.findHistoryStatuses(e.id);return Object(r.h)("div",{class:"col-6 col-sm-6 col-md-6 col-lg-6 mb-1"},Object(r.h)("div",{class:`border rounded px-3 pt-2 pb-1 ${T.indexOf(e.id)>-1?"bg-success":""} position-relative`,onClick:this.toggleDog,id:"dogContainer","data-id":e.id,style:"padding: .3rem !important; line-height: 1.1em; cursor: pointer; pointer-events: inherit;"},o&&Object(r.h)("small",{class:"position-absolute",style:"left:5px; top: 32px;"},Object(r.h)("span",{class:`badge badge-${o.class||"primary"} mr-3`},o.icon&&Object(r.h)("i",{class:o.icon})," ",o.name)),"leadOnly"===t&&c.a.getNestedValue(e,"positions.lead.distanceKm")>0&&Object(r.h)("small",{class:"position-absolute",style:"left:5px; top: 32px;"},Object(r.h)("span",{class:"badge badge-secondary mr-3"},Object(r.h)(p.c,{id:"dogs.sort-lead"},"Lead"),": ",c.a.format(c.a.getNestedValue(e,"positions.lead.distanceKm"),0),"km")),"pointOnly"===t&&c.a.getNestedValue(e,"positions.point.distanceKm")>0&&Object(r.h)("small",{class:"position-absolute",style:"left:5px; top: 32px;"},Object(r.h)("span",{class:"badge badge-secondary mr-3"},Object(r.h)(p.c,{id:"dogs.sort-point"},"Point"),": ",c.a.format(c.a.getNestedValue(e,"positions.point.distanceKm"),0),"km")),"teamOnly"===t&&c.a.getNestedValue(e,"positions.team.distanceKm")>0&&Object(r.h)("small",{class:"position-absolute",style:"left:5px; top: 32px;"},Object(r.h)("span",{class:"badge badge-secondary mr-3"},Object(r.h)(p.c,{id:"dogs.sort-team"},"Team"),": ",c.a.format(c.a.getNestedValue(e,"positions.team.distanceKm"),0),"km")),"wheelOnly"===t&&c.a.getNestedValue(e,"positions.wheel.distanceKm")>0&&Object(r.h)("small",{class:"position-absolute",style:"left:5px; top: 32px;"},Object(r.h)("span",{class:"badge badge-secondary mr-3"},Object(r.h)(p.c,{id:"dogs.sort-wheel"},"Wheel"),": ",c.a.format(c.a.getNestedValue(e,"positions.wheel.distanceKm"),0),"km")),Object(r.h)("div",{class:"d-flex"},Object(r.h)("div",{class:"text-center border rounded-circle imageRounded imageRoundedSmall text-muted pt-2",style:""+(e.image?`background-image: url("${e.image.s3ThumbLink}");`:"")},!e.image&&Object(r.h)("span",{class:"font-weight-lighter",style:"font-size: 20px;"},c.a.ucfirst(e.name,!0))),Object(r.h)("div",{class:"flex-grow-1 pl-2 pr-1",style:`border-right: 4px solid ${d.findHarness(e.harness,"colorNonstop")} !important; line-height: 0.9em;`},Object(r.h)("small",null,Object(r.h)("small",{class:"float-right"},e.birth&&Object(r.h)("span",{class:"mr-1"},c.a.age(e.birth,e.deceased)),"female"===e.gender?Object(r.h)("i",{class:"fas fa-venus"}):Object(r.h)("i",{class:"fas fa-mars"})),e.shortname||e.name,Object(r.h)("br",null),Object(r.h)("div",{style:"line-height: 0.8em;"},Object(r.h)("small",null,d.findTeam(e.team)))),Object(r.h)("small",{class:"float-right"},s&&s.id&&Object(r.h)("span",{class:`badge badge-${s.class} mr-2 font-weight-light`},s.icon&&Object(r.h)("i",{class:s.icon})," ",s.name),e.specialNeeds&&Object(r.h)("span",{class:"badge badge-warning mr-2 font-weight-light"},Object(r.h)("i",{class:"fas fa-exclamation-triangle"})," ",e.specialNeeds),a&&a.map(e=>Object(r.h)("span",{class:"badge badge-warning mr-2",title:c.a.isoDate(e.endDate,!1,!1,!0)},e.title)))))))}))),y[`${k}.${w.id}`]?Object(r.h)("div",{class:"valid-feedback",style:"display: block;"},Object(r.h)(p.c,{id:"dog.dogs.saved-changes"},"Endringene er lagret")):Object(r.h)("small",{id:k+"Help",class:"form-text text-muted"},D),F&&Object(r.h)(e,null,Object(r.h)("div",{class:"container-fluid px-0 clearfix"},Object(r.h)("div",{class:"row"},Object(r.h)("div",{class:"col-12"},Object(r.h)("h5",null,Object(r.h)(p.c,{id:"dog.dogs.dogs-positions"},"Posisjoner i spannet")))),Object(r.h)(b.a,{onDragEnd:this.onDragEnd},Object(r.h)("div",{class:"row"},Object(r.h)("div",{class:"col-6 pr-0",style:"min-height: 100px;"},Object(r.h)(b.c,{droppableId:"dogsLeft"},(e,t)=>Object(r.h)(g,{provided:e,snapshot:t,innerRef:e.innerRef,className:"ml-auto"},a&&a.map((e,s)=>Object(r.h)(b.b,{key:`${e.id}-${e.unique}`,draggableId:`dragId-${e.id}-${e.unique}`,index:s},o=>Object(r.h)(O,{provided:o,snapshot:t,innerRef:o.innerRef,dog:e,removePlaceholder:this.removePlaceholder,idx:s,list:"dogsLeft"}))),e.placeholder))),Object(r.h)("div",{class:"col-6 pl-0",style:"min-height: 100px;"},Object(r.h)(b.c,{droppableId:"dogsRight"},(e,t)=>Object(r.h)(g,{provided:e,snapshot:t,innerRef:e.innerRef,className:"mr-auto"},i&&i.map((e,s)=>Object(r.h)(b.b,{key:`${e.id}-${e.unique}`,draggableId:`dragId-${e.id}-${e.unique}`,index:s},o=>Object(r.h)(O,{provided:o,snapshot:t,innerRef:o.innerRef,dog:e,removePlaceholder:this.removePlaceholder,idx:s,list:"dogsRight"}))),e.placeholder))))),Object(r.h)("div",{class:"row mb-3 mt-2"},Object(r.h)("div",{class:"col-6 pr-0"},Object(r.h)("button",{class:"btn btn-sm btn-outline-secondary",onClick:this.addPlaceholderLeft},Object(r.h)("i",{class:"fas fa-plus-circle"})," ",Object(r.h)(p.c,{id:"dog.dogs.addplaceholder"},"Add placeholder"))),Object(r.h)("div",{class:"col-6 pl-0"},Object(r.h)("button",{class:"float-right btn btn-sm btn-outline-secondary",onClick:this.addPlaceholderRight},Object(r.h)("i",{class:"fas fa-plus-circle"})," ",Object(r.h)(p.c,{id:"dog.dogs.addplaceholder"},"Add placeholder"))))),Object(r.h)("div",{class:"container-fluid px-0"},Object(r.h)("div",{class:"row"},Object(r.h)("div",{class:"col-6"},Object(r.h)("button",{class:"btn btn-sm btn-"+(l?"primary":"secondary"),onClick:this.updateDogPositions},Object(r.h)("i",{class:"fas fa-save"})," ",Object(r.h)(p.c,{id:"dog.dogs.saveDogPositions"},"Save dog positions"))),Object(r.h)("div",{class:"col-6"},Object(r.h)("button",{class:"float-right btn btn-sm btn-warning",onClick:this.resetDogPositions},Object(r.h)("i",{class:"fas fa-sync"})," ",Object(r.h)(p.c,{id:"dog.dogs.resetDogPositions"},"Reset dog positions")))),Object(r.h)("div",{class:"row mt-2"},Object(r.h)("div",{class:"col-6"}," "),Object(r.h)("div",{class:"col-6"},Object(r.h)("button",{class:"float-right btn btn-sm btn-link",onClick:this.clearDogPositions},Object(r.h)("i",{class:"fas fa-eraser"})," ",Object(r.h)(p.c,{id:"dog.dogs.clearDogPositions"},"Clear dog positions")))))))}})||n;t.a=v}).call(this,s("hosL").Fragment)},TiXY:function(e,t,s){"use strict";var o,a=s("hosL"),i=s("/eY4"),l=(s("cneo"),s("Utv1"),s("OhSV")),n=s("u2zT");let r=Object(i.a)(o=class extends a.Component{constructor(e){super(e),this.handleAddImage=e=>{const{updateField:t,object:s,field:o}=this.props;t({id:s.id,field:o,value:e})},this.state={files:[]}}render(){const{uploadStatus:e=(()=>{}),before:t=(()=>{}),after:s=(()=>{}),autoOpen:o=!1}=this.props;return Object(a.h)("div",{class:"row"},Object(a.h)("div",{class:"col-12"},Object(a.h)(l.c,{id:"form.files.upload-file"},"Last opp fil"),":",Object(a.h)("br",null),Object(a.h)(n.a,{handleAddImage:this.handleAddImage,apiUrl:"/api/fileupload",uploadStatus:e,before:t,after:s,autoOpen:o},Object(a.h)("div",{style:{height:30,width:"100%"}}))))}})||o;t.a=r},f4kV:function(e,t,s){"use strict";s.r(t),function(e){function o(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,o)}return s}function a(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?o(Object(s),!0).forEach((function(t){i(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):o(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function i(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}var l,n,r,c,d,h,u,p,b,m,f=s("hosL"),g=s("Utv1"),O=s("/eY4"),j=s("cneo"),v=s("go65"),y=s("Y3FI"),w=s("OhSV"),k=s("ZOvn"),x=s("X9Km"),I=s("om2D"),D=s("3on9"),F=s("HqZR"),S=s("TiXY"),T=s("/DnB");const V=k.a.marginTop(!1),$=k.a.marginTopBack(!1),N=k.a.marginBottom(),C={newWorkout:{}};let P=Object(O.a)(l=class extends f.Component{constructor(...e){super(...e),this.onInput=e=>{const{field:t}=this.props,s=e.target.value,{workoutStore:o}=this.props.stores;o.updateObjectKeyValue("newWorkout",t,s),o.updateObjectKeyValue("newWorkout","updated-"+t,(new Date).getTime())},this.updateDuration=(e,t)=>{const{field:s}=this.props,{workoutStore:o}=this.props.stores;o.updateObjectKeyValue("newWorkout",e,t);const{newWorkout:a}=o;if(g.a.isUndefined(a[s+"-hours"])){o.updateObjectKeyValue("newWorkout",s+"-hours",0)}if(g.a.isUndefined(a[s+"-minutes"])){o.updateObjectKeyValue("newWorkout",s+"-minutes",0)}o.updateObjectKeyValue("newWorkout",s,3600*(a[s+"-hours"]||0)+60*(a[s+"-minutes"]||0)),o.updateObjectKeyValue("newWorkout","updated-"+s,(new Date).getTime())},this.onInputDuration=e=>{const t=parseInt(e.target.value,10);this.updateDuration(e.target.name,t)},this.decDuration=e=>{const{name:t}=e.target.closest("button").dataset,{workoutStore:s}=this.props.stores,{newWorkout:o}=s,a=(o[t]||0)-1;this.updateDuration(t,a<0?0:a)},this.incDuration=e=>{const{name:t}=e.target.closest("button").dataset,{workoutStore:s}=this.props.stores,{newWorkout:o}=s,a=(o[t]||0)+1;this.updateDuration(t,a<0?0:a)},this.setDateToNow=()=>{const{field:e}=this.props,t=g.a.isoDate(void 0,!1,!1,!0),{workoutStore:s}=this.props.stores;s.updateObjectKeyValue("newWorkout",e,t)},this.setTimeToNow=()=>{const{field:e}=this.props,t=g.a.isoTime(),{workoutStore:s}=this.props.stores;s.updateObjectKeyValue("newWorkout",e,t)},this.setRightValue=()=>{const{field:e,rightValueReal:t}=this.props,{workoutStore:s}=this.props.stores;s.updateObjectKeyValue("newWorkout",e,t)}}render(){const{type:t,datalist:s=[],min:o,max:a,step:i,field:l,title:n,icon:r,help:c,placeholder:d,rightValue:h}=this.props,{workoutStore:u}=this.props.stores,{newWorkout:p}=u;let b,m=a;if("date"===t&&"today"===a&&(m=g.a.isoDate(void 0,!1,!1,!0)),"duration"!==l&&"rest"!==l||(b=g.a.secToHms(p[l],!0)),"weather"===l&&g.a.checkNested(p,"yr","0","instant","details")){const e=Object(j.i)(p.yr[0].instant.details);g.a.isoDate(p.yr[0].date,!1,!1,!0)===g.a.isoDate(p.date,!1,!1,!0)&&(b=`Yr.no: 🌡️ ${e.air_temperature}°C, 💨 ${e.wind_speed}m/s 🧭 ${k.a.windDirection(e.wind_from_direction)}, ☁️ ${e.cloud_area_fraction}%, ${e.air_pressure_at_sea_level}mb, 💦 ${e.relative_humidity}%`)}if("temperature"===l&&g.a.checkNested(p,"yr","0","instant","details")){const e=Object(j.i)(p.yr[0].instant.details);g.a.isoDate(p.yr[0].date,!1,!1,!0)===g.a.isoDate(p.date,!1,!1,!0)&&(b=`Yr.no: 🌡️ ${e.air_temperature}°C`)}if("datalist"===t)return Object(f.h)("div",{class:"form-group mb-1 pb-1 border-bottom"},Object(f.h)("label",{for:l+"Input"},r&&Object(f.h)("i",{class:r+" text-muted"})," ",n),Object(f.h)("input",{list:"list-"+l,class:"form-control",id:l+"Input","aria-describedby":l+"Help",onInput:this.onInput,value:p[l]}),Object(f.h)("datalist",{id:"list-"+l},s.map(e=>Object(f.h)("option",{value:e[0]},e[1]))),Object(f.h)("small",{id:l+"Help",class:"form-text text-muted"},c));if("duration"===t){const e=Math.floor(p[l]/3600),t=Math.floor(p[l]%3600/60);return Object(f.h)("div",{class:"form-group mb-1 pb-1 border-bottom"},Object(f.h)("span",{class:"float-right"},Object(f.h)("strong",null,b)),Object(f.h)("label",{for:l+"Input"},r&&Object(f.h)("i",{class:r+" text-muted"})," ",n),Object(f.h)("div",{class:"form-row"},Object(f.h)("div",{class:"input-group col-5 offset-1 col-xl-3 offset-xl-3"},Object(f.h)("div",{class:"input-group-prepend "},Object(f.h)("button",{class:"btn btn-sm btn-outline-secondary",type:"button","data-name":l+"-hours",onClick:this.decDuration},Object(f.h)("i",{class:"fas fa-minus"}))),Object(f.h)("input",{class:"form-control text-center",id:l+"Input","aria-describedby":l+"Help",onInput:this.onInputDuration,name:l+"-hours",value:e,type:"number",min:"0",max:"24"}),Object(f.h)("div",{class:"input-group-append "},Object(f.h)("button",{class:"btn btn-sm btn-outline-secondary",type:"button","data-name":l+"-hours",onClick:this.incDuration},Object(f.h)("i",{class:"fas fa-plus"})))),Object(f.h)("div",{class:"input-group col-5 col-xl-3"},Object(f.h)("div",{class:"input-group-prepend "},Object(f.h)("button",{class:"btn btn-sm btn-outline-secondary",type:"button","data-name":l+"-minutes",onClick:this.decDuration},Object(f.h)("i",{class:"fas fa-minus"}))),Object(f.h)("input",{class:"form-control text-center",id:l+"Input","aria-describedby":l+"Help",onInput:this.onInputDuration,name:l+"-minutes",value:t,type:"number",min:"0",max:"59"}),Object(f.h)("div",{class:"input-group-append "},Object(f.h)("button",{class:"btn btn-sm btn-outline-secondary",type:"button","data-name":l+"-minutes",onClick:this.incDuration},Object(f.h)("i",{class:"fas fa-plus"}))))),Object(f.h)("small",{id:l+"Help",class:"form-text text-muted"},c))}return"toggle"===t?Object(f.h)("div",{class:"form-group mb-1 pb-1 border-bottom"},Object(f.h)("label",{for:l+"Input"},r&&Object(f.h)("i",{class:r+" text-muted"})," ",n),Object(f.h)("div",{class:"custom-control custom-switch"},Object(f.h)("input",{type:"checkbox",class:"custom-control-input",id:l+"Input",value:1===p[l]?0:1,"data-field":l,onInput:this.onInput,checked:1==p[l]?"checked":""}),Object(f.h)("label",{class:"custom-control-label",for:l+"Input"})),Object(f.h)("small",{id:l+"Help",class:"form-text text-muted"},c)):"textarea"===t?Object(f.h)(e,null,Object(f.h)("div",{class:"form-group mb-1 pb-1 border-bottom"},Object(f.h)("label",{for:l+"Input"},r&&Object(f.h)("i",{class:r+" text-muted"})," ",n),Object(f.h)("textarea",{class:"form-control "+("number"===t||"date"===t||"time"===t?"text-center":""),id:l+"Input","aria-describedby":l+"Help",min:o,max:m,step:i,rows:5,onInput:this.onInput,value:p[l],placeholder:d,onKeyUp:k.a.resizeTextarea,onFocus:k.a.resizeTextarea}),Object(f.h)("small",{id:l+"Help",class:"form-text text-muted"},c))):Object(f.h)("div",{class:"form-group mb-1 pb-1 border-bottom"},"date"===t&&Object(f.h)("span",{class:"float-right text-muted font-weight-lighter",onClick:this.setDateToNow},"I dag ",Object(f.h)("i",{class:"far fa-check-circle"})),"time"===t&&Object(f.h)("span",{class:"float-right text-muted font-weight-lighter",onClick:this.setTimeToNow},"Nå ",Object(f.h)("i",{class:"far fa-check-circle"})),h&&Object(f.h)("span",{class:"float-right text-muted font-weight-lighter",onClick:this.setRightValue},h),Object(f.h)("label",{for:l+"Input"},r&&Object(f.h)("i",{class:r+" text-muted"})," ",n),b&&Object(f.h)("span",{class:"float-right"},Object(f.h)("strong",null,b)),Object(f.h)("input",{type:t,class:"form-control "+("number"===t||"date"===t||"time"===t?"text-center":""),id:l+"Input","aria-describedby":l+"Help",min:o,max:m,step:i,onInput:this.onInput,value:p[l],placeholder:d}),Object(f.h)("small",{id:l+"Help",class:"form-text text-muted"},c))}})||l,H=Object(O.a)(n=class extends f.Component{constructor(...e){var t;super(...e),t=this,this.updateDuration=(e,t)=>{const{field:s,updateField:o,workout:a}=this.props,i=g.a.secToHms(a[s]).split(":");let l=parseInt(i[0]||0,10);isNaN(l)&&(l=0);let n=parseInt(i[1]||0,10);isNaN(n)&&(n=0);let r=parseInt(i[2]||0,10);isNaN(r)&&(r=0),e.match(/-hours/)&&(l=isNaN(t)?0:t),e.match(/-minutes/)&&(n=isNaN(t)?0:t),e.match(/-seconds/)&&(r=isNaN(t)?0:t);o({id:a.id,field:s,value:3600*l+60*n+r})},this.onInputDuration=e=>{const t=parseInt(e.target.value,10);this.updateDuration(e.target.name,t)},this.decDuration=e=>{const{name:t}=e.target.closest("button").dataset,{field:s,workout:o}=this.props,a=g.a.secToHms(o[s]).split(":");let i=parseInt(a[0]||0,10);isNaN(i)&&(i=0);let l=parseInt(a[1]||0,10);isNaN(l)&&(l=0);let n=parseInt(a[2]||0,10);if(isNaN(n)&&(n=0),t.match(/-hours/)){this.updateDuration(t,i-1<0?0:i-1)}if(t.match(/-minutes/)){this.updateDuration(t,l-1<0?0:l-1)}if(t.match(/-seconds/)){this.updateDuration(t,n-1<0?0:n-1)}},this.incDuration=e=>{const{name:t}=e.target.closest("button").dataset,{field:s,workout:o}=this.props,a=g.a.secToHms(o[s]).split(":");let i=parseInt(a[0]||0,10);isNaN(i)&&(i=0);let l=parseInt(a[1]||0,10);isNaN(l)&&(l=0);let n=parseInt(a[2]||0,10);if(isNaN(n)&&(n=0),t.match(/-hours/)){this.updateDuration(t,i+1<0?0:i+1)}if(t.match(/-minutes/)){this.updateDuration(t,l+1<0?0:l+1)}if(t.match(/-seconds/)){this.updateDuration(t,n+1<0?0:n+1)}},this.handleImageErrored=e=>{const t=e.target;t.onerror=null,setTimeout(()=>{t.src+="?"+new Date},1e3)},this.removeImage=async function(e){const{workoutStore:s}=t.props.stores,{workout:o}=t.props;s.removeImage({id:o.id,name:e.target.parentElement.dataset.name||e.target.dataset.name})},this.removeMainImage=()=>{const{workout:e,field:t,updateField:s}=this.props;s({id:e.id,field:t,value:{}})},this.setDateToNow=()=>{const{field:e,updateField:t,workout:s}=this.props,o=g.a.isoDate(void 0,!1,!1,!0);t({id:s.id,field:e,value:o})},this.setTimeToNow=()=>{const{field:e,updateField:t,workout:s}=this.props,o=g.a.isoTime();t({id:s.id,field:e,value:o})},this.setValue=e=>{const t=e.target.parentElement.dataset.value||e.target.dataset.value;if(t){const{field:e,updateField:s,workout:o}=this.props;s({id:o.id,field:e,value:t})}},this.setRightValue=()=>{const{field:e,updateField:t,workout:s,rightValueReal:o}=this.props;t({id:s.id,field:e,value:o})}}render(){const{saved:t,workout:s,type:o,datalist:a=[],min:i,max:l,step:n,elementtype:r,field:c,title:d,icon:h,help:u,onInput:p,updateField:b,rightValue:m}=this.props;let O,v,y=Object(j.i)(s[c]),x=l;if("date"===o&&(y&&(y=g.a.isoDate(s[c],!1,!1,!0)),"today"===l&&(x=g.a.isoDate(void 0,!1,!1,!0))),"duration"!==c&&"rest"!==c||(O=g.a.secToHms(y,!0)),"weather"===c&&g.a.checkNested(s,"yr","0","instant","details")){const e=Object(j.i)(s.yr[0].instant.details);g.a.isoDate(s.yr[0].date,!1,!1,!0)===g.a.isoDate(s.date,!1,!1,!0)&&(O=`Yr.no: 🌡️ ${e.air_temperature}°C, 💨 ${e.wind_speed}m/s 🧭 ${k.a.windDirection(e.wind_from_direction)}, ☁️ ${e.cloud_area_fraction}%, ${e.air_pressure_at_sea_level}mb, 💦 ${e.relative_humidity}%`,v=O)}if("temperature"===c&&g.a.checkNested(s,"yr","0","instant","details")){const e=Object(j.i)(s.yr[0].instant.details);g.a.isoDate(s.yr[0].date,!1,!1,!0)===g.a.isoDate(s.date,!1,!1,!0)&&(O=`Yr.no: 🌡️ ${e.air_temperature}°C`,v=g.a.asNumber(e.air_temperature))}if("file"===o)return Object(f.h)("div",{class:"form-group "+(t[`${c}.${s.id}`]?"is-valid":"")},Object(f.h)("label",{for:c+"Input"},h&&Object(f.h)("i",{class:h+" text-muted"})," ",d),Object(f.h)(S.a,{saved:t,object:s,field:c,updateField:b}),t[`${c}.${s.id}`]?Object(f.h)("div",{class:"valid-feedback",style:"display: block;"},Object(f.h)(w.c,{id:"workouts.changes-saved"},"Endringene er lagret")):Object(f.h)("small",{id:c+"Help",class:"form-text text-muted"},u));if("image"===o)return Object(f.h)("div",{class:"form-group  mb-1 pb-1 border-bottom "+(t[`${c}.${s.id}`]?"is-valid":"")},Object(f.h)("label",{for:c+"Input"},h&&Object(f.h)("i",{class:h+" text-muted"})," ",d),Object(f.h)("div",{class:"container-fluid"},Object(f.h)("div",{class:"row"},s.images&&s.images.map(e=>Object(f.h)("div",{class:"col-3 p-1"},Object(f.h)("img",{src:e.s3SmallLink,class:"img-fluid",onError:this.handleImageErrored}),Object(f.h)("button",{class:"btn btn-sm btn-link",onClick:this.removeImage,"data-name":e.name},Object(f.h)("i",{class:"fas fa-trash"})," Remove"))))),Object(f.h)(I.a,{saved:t,object:s,field:c,updateField:b,autoOpen:!1}),t[`${c}.${s.id}`]?Object(f.h)("div",{class:"valid-feedback",style:"display: block;"},"Endringene er lagret"):Object(f.h)("small",{id:c+"Help",class:"form-text text-muted"},u));if("datalist"===o)return Object(f.h)("div",{class:"form-group  mb-1 pb-1 border-bottom "+(t[`${c}.${s.id}`]?"is-valid":"")},Object(f.h)("label",{for:c+"Input"},h&&Object(f.h)("i",{class:h+" text-muted"})," ",d),Object(f.h)("input",{list:"list-"+c,class:"form-control "+(t[`${c}.${s.id}`]?"is-valid":""),id:c+"Input","aria-describedby":c+"Help",value:y,"data-id":s.id,"data-field":c,onInput:p}),Object(f.h)("datalist",{id:"list-"+c},a.map(e=>Object(f.h)("option",{value:e[0]},e[1]))),t[`${c}.${s.id}`]?Object(f.h)("div",{class:"valid-feedback",style:"display: block;"},Object(f.h)(w.c,{id:"workouts.changes-saved"},"Endringene er lagret")):Object(f.h)("small",{id:c+"Help",class:"form-text text-muted"},u));if("duration"===o){const e=Math.floor(s[c]/3600),o=Math.floor(s[c]%3600/60);Math.floor(s[c]%3600%60);return Object(f.h)("div",{class:"form-group mb-1 pb-1 border-bottom"},Object(f.h)("span",{class:"float-right"},Object(f.h)("strong",{onClick:this.setValue,"data-value":v},O)),Object(f.h)("label",{for:c+"Input"},h&&Object(f.h)("i",{class:h+" text-muted"})," ",d),Object(f.h)("div",{class:"form-row"},Object(f.h)("div",{class:"input-group col-5 offset-1 col-xl-3 offset-xl-3"},Object(f.h)("div",{class:"input-group-prepend "},Object(f.h)("button",{class:"btn btn-sm btn-outline-secondary",type:"button","data-name":c+"-hours",onClick:this.decDuration},Object(f.h)("i",{class:"fas fa-minus"}))),Object(f.h)("input",{class:"form-control text-center",id:c+"Input","aria-describedby":c+"Help",onInput:this.onInputDuration,name:c+"-hours",value:e,type:"number",min:"0",max:"24"}),Object(f.h)("div",{class:"input-group-append "},Object(f.h)("button",{class:"btn btn-sm btn-outline-secondary",type:"button","data-name":c+"-hours",onClick:this.incDuration},Object(f.h)("i",{class:"fas fa-plus"})))),Object(f.h)("div",{class:"input-group col-5 col-xl-3"},Object(f.h)("div",{class:"input-group-prepend "},Object(f.h)("button",{class:"btn btn-sm btn-outline-secondary",type:"button","data-name":c+"-minutes",onClick:this.decDuration},Object(f.h)("i",{class:"fas fa-minus"}))),Object(f.h)("input",{class:"form-control text-center",id:c+"Input","aria-describedby":c+"Help",onInput:this.onInputDuration,name:c+"-minutes",value:o,type:"number",min:"0",max:"59"}),Object(f.h)("div",{class:"input-group-append "},Object(f.h)("button",{class:"btn btn-sm btn-outline-secondary",type:"button","data-name":c+"-minutes",onClick:this.incDuration},Object(f.h)("i",{class:"fas fa-plus"}))))),t[`${c}.${s.id}`]?Object(f.h)("div",{class:"valid-feedback",style:"display: block;"},Object(f.h)(w.c,{id:"workouts.changes-saved"},"Endringene er lagret")):Object(f.h)("small",{id:c+"Help",class:"form-text text-muted"},u))}return"toggle"===o?Object(f.h)("div",{class:"form-group "+(t[`${c}.${s.id}`]?"is-valid":"")},Object(f.h)("label",{for:c+"Input"},h&&Object(f.h)("i",{class:h+" text-muted"})," ",d),Object(f.h)("div",{class:"custom-control custom-switch"},Object(f.h)("input",{type:"checkbox",class:"custom-control-input",id:c+"Input",value:1===y?0:1,"data-id":s.id,"data-field":c,onInput:p,checked:1==y?"checked":""}),Object(f.h)("label",{class:"custom-control-label",for:c+"Input"})),t[`${c}.${s.id}`]?Object(f.h)("div",{class:"valid-feedback",style:"display: block;"},Object(f.h)(w.c,{id:"workouts.changes-saved"},"Endringene er lagret")):Object(f.h)("small",{id:c+"Help",class:"form-text text-muted"},u)):"textarea"===o?Object(f.h)(e,null,Object(f.h)("div",{class:"form-group  mb-1 pb-1 border-bottom "+(t[`${c}.${s.id}`]?"is-valid":"")},Object(f.h)("label",{for:c+"Input"},h&&Object(f.h)("i",{class:h+" text-muted"})," ",d),Object(f.h)("textarea",{class:`form-control ${"number"===o||"date"===o||"time"===o?"text-center":""} ${t[`${c}.${s.id}`]?"is-valid":""}`,id:c+"Input","aria-describedby":c+"Help",min:i,max:x,step:n,rows:5,value:y,"data-id":s.id,"data-field":c,"data-type":o,"data-elementtype":r,onInput:p,onKeyUp:k.a.resizeTextarea,onFocus:k.a.resizeTextarea}),t[`${c}.${s.id}`]?Object(f.h)("div",{class:"valid-feedback",style:"display: block;"},Object(f.h)(w.c,{id:"workouts.changes-saved"},"Endringene er lagret")):Object(f.h)("small",{id:c+"Help",class:"form-text text-muted"},u))):Object(f.h)("div",{class:"form-group  mb-1 pb-1 border-bottom "+(t[`${c}.${s.id}`]?"is-valid":"")},"date"===o&&Object(f.h)("span",{class:"float-right text-muted font-weight-lighter",onClick:this.setDateToNow},"I dag ",Object(f.h)("i",{class:"far fa-check-circle"})),"time"===o&&Object(f.h)("span",{class:"float-right text-muted font-weight-lighter",onClick:this.setTimeToNow},"Nå ",Object(f.h)("i",{class:"far fa-check-circle"})),m&&Object(f.h)("span",{class:"float-right text-muted font-weight-lighter",onClick:this.setRightValue},m),Object(f.h)("label",{for:c+"Input"},h&&Object(f.h)("i",{class:h+" text-muted"})," ",d),O&&Object(f.h)("span",{class:"float-right"},Object(f.h)("strong",{onClick:this.setValue,"data-value":v},O)),Object(f.h)("input",{type:o,class:`form-control ${"number"===o||"date"===o||"time"===o?"text-center":""} ${t[`${c}.${s.id}`]?"is-valid":""}`,id:c+"Input","aria-describedby":c+"Help",min:i,max:x,step:n,value:y,"data-id":s.id,"data-field":c,"data-type":o,"data-elementtype":r,onInput:p}),t[`${c}.${s.id}`]?Object(f.h)("div",{class:"valid-feedback",style:"display: block;"},Object(f.h)(w.c,{id:"workouts.changes-saved"},"Endringene er lagret")):Object(f.h)("small",{id:c+"Help",class:"form-text text-muted"},u))}})||n,K=Object(O.a)(r=class extends f.Component{toggleMusher(e){const{workout:t,type:s,elementtype:o,field:a,updateField:i,isNew:l}=this.props,n=Object(j.i)(t[a])||[],r=n.indexOf(e);r>-1?n.splice(r,1):n.push(e),i({id:t.id,field:a,value:n,type:s,elementtype:o,isNew:l})}componentDidMount(){this.container&&this.container.scrollIntoView({behavior:"smooth",block:"center"})}render(){const{userStore:t}=this.props.stores,{mushers:s}=t,{saved:o,workout:a,field:i,title:l,icon:n,help:r}=this.props,c=Object(j.i)(a[i])||[];return Object(f.h)("div",{class:"form-group mb-1 pb-1 border-bottom "+(o[`${i}.${a.id}`]?"is-valid":"")},Object(f.h)("label",{for:i+"Input"},n&&Object(f.h)("i",{class:n+" text-muted"})," ",l),Object(f.h)("div",{class:"container-fluid px-0"},Object(f.h)("div",{class:"row"},Object(f.h)("div",{class:"w-100 overflow-hidden"},Object(f.h)("div",{class:"d-flex flex-column pb-2 px-1"},s&&s.map(t=>Object(f.h)("div",{class:"col mb-2 px-1",ref:c.indexOf(t.id)>-1?e=>this.container=e:null},Object(f.h)("button",{class:`btn btn-block \n                                                rounded-lg\n                                                btn${c.indexOf(t.id)>-1?"":"-outline"}-success\n                                                text-nowrap overflow-hidden`,style:"text-overflow: ellipsis;",onClick:()=>this.toggleMusher(t.id)},Object(f.h)("i",{class:"fas fa-user mr-2"}),t.firstname?Object(f.h)(e,null,t.firstname," ",t.lastname):Object(f.h)(e,null,t.email)))))))),o[`${i}.${a.id}`]?Object(f.h)("div",{class:"valid-feedback",style:"display: block;"},Object(f.h)(w.c,{id:"workouts.changes-saved"},"Endringene er lagret")):Object(f.h)("small",{id:i+"Help",class:"form-text text-muted"},r))}})||r,L=Object(O.a)(c=class extends f.Component{toggleTeam(e){const{dogStore:t,workoutStore:s}=this.props.stores,{workout:o,type:a,field:i,updateField:l,isNew:n,selectTeam:r}=this.props;let c=Object(j.i)(o[i]);c=c===e?null:e,null===c?l({id:o.id,field:i,value:c,type:a,isNew:n}):o.teams&&o.teams.indexOf(c)>-1?s.removeTeam({id:o.id,team:c}):o.team?s.addTeam({id:o.id,team:c}):(t.setCurrentTeam(c),s.setCurrentTeam(c),l({id:o.id,field:i,value:c,type:a,isNew:n}),g.a.isDefined(r)&&r(e))}componentDidMount(){this.container&&this.container.scrollIntoView({behavior:"smooth",block:"center"})}render(){const{userStore:t}=this.props.stores,{teams:s}=t,{saved:o,workout:a,field:i,title:l,icon:n,help:r}=this.props,c=Object(j.i)(a[i])||[],{highlight:d}=this.props;return Object(f.h)("div",{class:"form-group mb-1 pb-1 border-bottom "+(o[`${i}.${a.id}`]?"is-valid":"")},Object(f.h)("label",{for:i+"Input"},n&&Object(f.h)("i",{class:n+" text-muted"})," ",l),Object(f.h)("div",{class:"container-fluid px-0"},Object(f.h)("div",{class:"row"},Object(f.h)("div",{class:"w-100 overflow-hidden"},Object(f.h)("div",{class:"d-flex flex-row flex-nowrap pb-2 px-1",style:"overflow: auto; scroll-snap-type: x mandatory;"},s&&s.map((t,o)=>{const i=c===t.id,l=a&&g.a.isArray(a.teams)&&a.teams.indexOf(t.id)>-1;return Object(f.h)("div",{class:"col mb-0 px-0",ref:i||l?e=>this.container=e:null},Object(f.h)("button",{class:`btn btn-block \n            \t\t\t\t\t\t\t\t\t\trounded-none ${0===o?"rounded-pill-left":o+1===s.length?"rounded-pill-right":""}\n                                                    btn${i||l?"":"-outline"}-${l?"info":"success"}\n                                                    text-nowrap overflow-hidden`,style:"text-overflow: ellipsis;",onClick:()=>this.toggleTeam(t.id)},a.hintTeam===t.id&&Object(f.h)("span",{class:"float-right text-primary"},Object(f.h)("i",{class:"fas fa-circle"})),Object(f.h)("i",{class:"fas fa-users mr-2"}),t.name,d&&d.indexOf(t.id)>-1&&Object(f.h)(e,null,c===t.id?Object(f.h)(e,null,Object(f.h)("i",{class:"fas fa-check float-right"})):Object(f.h)(e,null,Object(f.h)("div",{class:"spinner-grow text-warning float-right",role:"status"},Object(f.h)("span",{class:"sr-only"},"Loading...")),Object(f.h)("i",{class:"far fa-hand-point-left float-right",style:"font-size: 2.0em;"}))),Object(f.h)("small",null,i&&Object(f.h)("span",{class:"badge badge-pill badge-primary"},"Primary"),l&&Object(f.h)("span",{class:"badge badge-pill badge-secondary"},"Secondary"))))}))))),o[`${i}.${a.id}`]?Object(f.h)("div",{class:"valid-feedback",style:"display: block;"},Object(f.h)(w.c,{id:"workouts.changes-saved"},"Endringene er lagret")):Object(f.h)("small",{id:i+"Help",class:"form-text text-muted"},r))}})||c,E=Object(O.a)(d=class extends f.Component{constructor(...e){super(...e),this.toggleFilter=()=>{const{showAll:e}=this.state;this.setState({showAll:e?0:1})},this.toggleSearchField=()=>{const{showSearchField:e}=this.state;this.setState({showSearchField:e?null:1})}}toggleTrack(e,t){const{showAll:s}=this.state,{workout:o={},type:a,field:i,updateField:l,isNew:n}=this.props,{userStore:r}=this.props.stores,{types:c,user:d}=r,{language:h}=d,u=k.a.getDays(h);let p=Object(j.i)(o[i]);p=p===e?null:e;if(l({id:o.id,field:i,value:p,type:a,isNew:n,skipTimer:!0}),o.distanceKm||l({id:o.id,field:"distanceKm",value:t.distanceKm,type:"number",isNew:n,skipTimer:!0}),o.elevation||l({id:o.id,field:"elevation",value:t.elevation,type:"number",isNew:n,skipTimer:!0}),!o.name){const e=u[(o.date?new Date(o.date):new Date).getDay()],s=c.find(e=>e.id===o.type);l({id:o.id,field:"name",value:`${t.name}: ${e}${s?" "+s.name:"stur"}`,type:"string",isNew:n,skipTimer:!0})}this.setState({filterText:""}),s&&this.toggleFilter()}render(){const{showAll:e,filterText:t,showSearchField:s}=this.state,{userStore:o}=this.props.stores,{tracks:a}=o,{saved:i,workout:l,field:n,title:r,icon:c,help:d,filter:h=(()=>!0)}=this.props,u=Object(j.i)(l[n]);let p=e?()=>!0:h;t&&(p=e=>e.name.match(new RegExp(t,"i"))||l.track===e.id);const b=a.filter(p);return Object(f.h)("div",{class:"form-group mb-1 pb-1 border-bottom "+(i[`${n}.${l.id}`]?"is-valid":"")},Object(f.h)("span",{class:"float-right",onClick:this.toggleSearchField},Object(f.h)("i",{class:"fas fa-search"})),Object(f.h)("label",{for:n+"Input"},c&&Object(f.h)("i",{class:c+" text-muted"})," ",r),Object(f.h)("div",{class:"container-fluid px-0"},s&&Object(f.h)("div",{class:"row"},Object(f.h)("div",{class:"col-12"},Object(f.h)("input",{class:"form-control form-control-sm",type:"text",placeholder:"Søk etter runder",value:t,onInput:Object(v.a)(this,"filterText")}))),Object(f.h)("div",{class:"row"},b&&b.map(e=>Object(f.h)("div",{class:"col-6 col-sm-6 col-md-6 col-lg-6 mb-2"},Object(f.h)("div",{class:"border position-relative rounded p-2 pt-3 pb-1 "+(u===e.id?"bg-success":""),onClick:()=>this.toggleTrack(e.id,e),style:"line-height: 0.9em; cursor: pointer; pointer-events: inherit;"},Object(f.h)("small",{class:"float-right position-absolute",style:"top: 0; right: 5px;"},Object(f.h)("small",null,Object(f.h)("i",{class:"fas fa-road"})," ",g.a.format(e.distanceKm,1)," km",Object(f.h)("i",{class:"fas fa-mountain ml-2"})," ",g.a.format(e.elevation,0)," m")),Object(f.h)("div",{style:"overflow: hidden;"},l.hintTrack===e.id&&Object(f.h)("span",{class:"float-right text-primary"},Object(f.h)("i",{class:"fas fa-circle"})),Object(f.h)("small",null,Object(f.h)("i",{class:"fas fa-map-marked mr-2"}),e.name)))))),Object(f.h)("div",{class:"row"},Object(f.h)("div",{class:"col-12 text-right"},e?Object(f.h)("button",{class:"btn btn-sm btn-link",onClick:this.toggleFilter},Object(f.h)(w.c,{id:"workouts.show-last-used-tracks"},"Vis kun de sist brukte rundene")):Object(f.h)("button",{class:"btn btn-sm btn-link",onClick:this.toggleFilter},Object(f.h)(w.c,{id:"workouts.show-all-tracks"},"Vis alle rundene"))))),i[`${n}.${l.id}`]?Object(f.h)("div",{class:"valid-feedback",style:"display: block;"},Object(f.h)(w.c,{id:"workouts.changes-saved"},"Endringene er lagret")):Object(f.h)("small",{id:n+"Help",class:"form-text text-muted"},d))}})||d,W=Object(O.a)(h=class extends f.Component{constructor(...e){super(...e),this.updateTextField=e=>{const{type:t,updateField:s,isNew:o}=this.props,{id:a,field:i}=e.target.dataset,l=e.target.value;s({id:parseInt(a,10),field:i,value:l,type:t,isNew:o})}}toggleType(e){const{workout:t,type:s,field:o,updateField:a,isNew:i}=this.props;let l=Object(j.i)(t[o]);l=l===e?null:e,a({id:t.id,field:o,value:l,type:s,isNew:i})}componentDidMount(){this.container&&this.container.scrollIntoView({behavior:"smooth",block:"center"})}render(){const{userStore:t,raceStore:s}=this.props.stores,{types:o,user:a}=t,{language:i}=a,{saved:l,workout:n,field:r,title:c,icon:d,help:h,isNew:u}=this.props,p=Object(j.i)(n[r]),b=s.getSignupByUserEmail(a.email).length>0;return Object(f.h)("div",{class:"form-group mb-1 pb-1 border-bottom "+(l[`${r}.${n.id}`]?"is-valid":"")},Object(f.h)("label",{for:r+"Input"},d&&Object(f.h)("i",{class:d+" text-muted"})," ",c),Object(f.h)("div",{class:"container-fluid px-0"},Object(f.h)("div",{class:"row"},Object(f.h)("div",{class:"w-100 overflow-hidden"},Object(f.h)("div",{class:"d-flex flex-row flex-nowrap pb-2 px-1",style:"overflow: auto; scroll-snap-type: x mandatory;"},o&&o.map((t,s)=>Object(f.h)("div",{class:"col mb-0 px-0",ref:p===t.id?e=>this.container=e:null},Object(f.h)("button",{class:`btn btn-block \n        \t\t\t\t\t\t\t\t\t\trounded-none ${0===s?"rounded-pill-left":s+1===o.length?"rounded-pill-right":""}                                    \n                                                btn${p===t.id?"":"-outline"}-success\n                                                text-nowrap overflow-hidden`,style:"text-overflow: ellipsis;",onClick:()=>this.toggleType(t.id)},t.icon&&Object(f.h)("i",{class:t.icon})," ",i&&t.lang&&t.lang[i]?t.lang[i]:t.name,b&&2===t.id&&Object(f.h)(e,null,p===t.id?Object(f.h)(e,null,Object(f.h)("i",{class:"fas fa-check float-right"})):Object(f.h)(e,null,Object(f.h)("div",{class:"spinner-grow text-warning float-right",role:"status"},Object(f.h)("span",{class:"sr-only"},"Loading...")),Object(f.h)("i",{class:"far fa-hand-point-left float-right",style:"font-size: 2.0em;"}))))))))),4===p&&Object(f.h)("div",{class:"row"},u?Object(f.h)("div",{class:"col-12"},Object(f.h)(P,{stores:this.props.stores,field:"typeTitle",title:Object(f.h)(w.c,{id:"workouts.other"},"Annet"),help:Object(f.h)(w.c,{id:"workouts.other-help"},"Hva slags type tur/aktivitet var dette?")})):Object(f.h)("div",{class:"col-12"},Object(f.h)(H,{saved:l,workout:n,field:"typeTitle",title:Object(f.h)(w.c,{id:"workouts.other"},"Annet"),help:Object(f.h)(w.c,{id:"workouts.other-help"},"Hva slags type tur/aktivitet var dette?"),onInput:this.updateTextField})))),l[`${r}.${n.id}`]?Object(f.h)("div",{class:"valid-feedback",style:"display: block;"},Object(f.h)(w.c,{id:"workouts.changes-saved"},"Endringene er lagret")):Object(f.h)("small",{id:r+"Help",class:"form-text text-muted"},h))}})||h,R=Object(O.a)(u=class extends f.Component{toggleType(e){const{workout:t,type:s,field:o,updateField:a,isNew:i}=this.props;let l=Object(j.i)(t[o]);l=l===e?null:e,a({id:t.id,field:o,value:l,type:s,isNew:i})}render(){const{userStore:t}=this.props.stores,{intensities:s}=t,{saved:o,workout:a,field:i,title:l,icon:n,help:r}=this.props,c=Object(j.i)(a[i]);return Object(f.h)("div",{class:"form-group  mb-1 pb-1 border-bottom "+(o[`${i}.${a.id}`]?"is-valid":"")},Object(f.h)("label",{for:i+"Input"},n&&Object(f.h)("i",{class:n+" text-muted"})," ",l),Object(f.h)("div",{class:"container-fluid px-0"},Object(f.h)("div",{class:"row"},s&&s.map(t=>Object(f.h)("div",{class:"col-12 mb-2"},Object(f.h)("button",{class:`btn btn-block btn${c===t.id?"":"-outline"}-${t.class||"success"} text-nowrap overflow-hidden`,style:"text-overflow: ellipsis;",onClick:()=>this.toggleType(t.id)},a.hintIntensity===t.id&&Object(f.h)("span",{class:"float-right text-primary"},Object(f.h)("i",{class:"fas fa-circle"})),Object(f.h)("span",{style:"font-size: 1.5em;"},t.icon||""," ",t.name),t.help&&Object(f.h)(e,null,Object(f.h)("br",null),Object(f.h)("small",null,t.help))))))),o[`${i}.${a.id}`]?Object(f.h)("div",{class:"valid-feedback",style:"display: block;"},Object(f.h)(w.c,{id:"workouts.changes-saved"},"Endringene er lagret")):Object(f.h)("small",{id:i+"Help",class:"form-text text-muted"},r))}})||u,A=Object(O.a)(p=class extends f.Component{toggleEquipment(e){const{workout:t,type:s,field:o,updateField:a,isNew:i}=this.props;let l=Object(j.i)(t[o]);l=l===e?null:e,a({id:t.id,field:o,value:l,type:s,isNew:i})}render(){const{userStore:e}=this.props.stores,{equipments:t,user:s}=e,{language:o}=s,{saved:a,workout:i,field:l,title:n,icon:r,help:c}=this.props,d=Object(j.i)(i[l]);return Object(f.h)("div",{class:"form-group  mb-1 pb-1 border-bottom "+(a[`${l}.${i.id}`]?"is-valid":"")},Object(f.h)("label",{for:l+"Input"},r&&Object(f.h)("i",{class:r+" text-muted"})," ",n),Object(f.h)("div",{class:"container-fluid px-0"},Object(f.h)("div",{class:"row"},Object(f.h)("div",{class:"w-100 overflow-hidden"},Object(f.h)("div",{class:"d-flex flex-column",style:"overflow: auto; scroll-snap-type: x mandatory;"},t&&t.map(e=>Object(f.h)("div",{class:"col px-1 mb-1"},Object(f.h)("button",{class:`btn btn-block btn${d===e.id?"":"-outline"}-success text-nowrap overflow-hidden`,style:"text-overflow: ellipsis;",onClick:()=>this.toggleEquipment(e.id)},e.icon&&Object(f.h)("i",{class:e.icon})," ",o&&e.lang&&e.lang[o]?e.lang[o]:e.name))))))),a[`${l}.${i.id}`]?Object(f.h)("div",{class:"valid-feedback",style:"display: block;"},Object(f.h)(w.c,{id:"workouts.changes-saved"},"Endringene er lagret")):Object(f.h)("small",{id:l+"Help",class:"form-text text-muted"},c))}})||p,_=Object(O.a)(b=class extends f.Component{render(){const{raceStore:e,userStore:t}=this.props.stores,{user:s}=t,o=e.getSignupByUserEmail(s.email);return o&&o.length>0?Object(f.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3"},Object(f.h)("div",{class:"alert alert-warning"},Object(f.h)("h5",null,Object(f.h)(w.c,{id:"races.race-in-progress"},"Løp pågår")),Object(f.h)("ul",null,o.map(e=>Object(f.h)("li",null,e.race.title))),Object(f.h)("i",{class:"fas fa-exclamation-triangle"})," ",Object(f.h)(w.c,{id:"races.choose-correct-team-and-type"},"Velg riktig team og type for løpet."))):""}})||b,M=Object(O.a)(m=class extends f.Component{constructor(e){var t;super(e),t=this,this.loadAll=async function(){await t.loadDogs(),await t.loadWorkout();const{raceStore:e}=t.props.stores;e.loadRaceInProgress()},this.loadWorkout=async function(e){const{workoutStore:s,userStore:o,dogStore:a}=t.props.stores,{user:i}=o,{language:l}=i,n=k.a.getDays(l);let{workouts:r=[],newWorkout:c}=s;const{currentTeam:d}=s;if("new"===t.props.workout){t.setState({createNew:!0}),r=await s.load({query:{team:e||d},skipUpdate:1,limit:5,sort:"-createdDate"});let o=r[0];const l=d||i.team;if(o){c.team||s.updateObjectKeyValue("newWorkout","team",l),s.updateObjectKeyValue("newWorkout","dogs",o.dogs||[]),s.updateObjectKeyValue("newWorkout","dogsLeft",o.dogsLeft||[]),s.updateObjectKeyValue("newWorkout","dogsRight",o.dogsRight||[]),s.updateObjectKeyValue("newWorkout","mushers",o.mushers),s.updateObjectKeyValue("newWorkout","type",o.type),s.updateObjectKeyValue("newWorkout","equipment",o.equipment),s.updateObjectKeyValue("newWorkout","duration",o.duration),s.updateObjectKeyValue("newWorkout","duration-hours",Math.floor(o.duration/3600)),s.updateObjectKeyValue("newWorkout","duration-minutes",Math.floor(o.duration%3600/60)),s.updateObjectKeyValue("newWorkout","rest",o.rest||0),s.updateObjectKeyValue("newWorkout","rest-hours",Math.floor(o.rest/3600)||0),s.updateObjectKeyValue("newWorkout","rest-minutes",Math.floor(o.rest%3600/60)||0),s.updateObjectKeyValue("newWorkout","rating",o.rating||3),s.updateObjectKeyValue("newWorkout","sledWeight",o.sledWeight),c["updated-date"]||s.updateObjectKeyValue("newWorkout","date",g.a.isoDate(o.date,!1,!1,!0)),c["updated-time"]||s.updateObjectKeyValue("newWorkout","time",g.a.isoTime(o.date)),s.updateObjectKeyValue("newWorkout","hintTeam",o.team),s.updateObjectKeyValue("newWorkout","hintType",o.type),s.updateObjectKeyValue("newWorkout","hintTrack",o.track),s.updateObjectKeyValue("newWorkout","hintIntensity",o.intensity);const e=r.map(e=>e.track);t.setState({lastUsedTracks:e})}else{const t=n[(new Date).getDay()],o=await a.load({query:{team:e||d},skipUpdate:1});c.team||s.updateObjectKeyValue("newWorkout","team",l),s.updateObjectKeyValue("newWorkout","dogs",o.map(e=>e.id)||[]),s.updateObjectKeyValue("newWorkout","dogsLeft",[]),s.updateObjectKeyValue("newWorkout","dogsRight",[]),s.updateObjectKeyValue("newWorkout","mushers",[i.id]),s.updateObjectKeyValue("newWorkout","name",g.a.ucfirst(t+" - Tur med hundene")),s.updateObjectKeyValue("newWorkout","type",1),s.updateObjectKeyValue("newWorkout","equipment",2),s.updateObjectKeyValue("newWorkout","duration",3600),s.updateObjectKeyValue("newWorkout","rest",0),s.updateObjectKeyValue("newWorkout","rating",3),s.updateObjectKeyValue("newWorkout","date",g.a.isoDate(void 0,!1,!1,!0)),s.updateObjectKeyValue("newWorkout","time",g.a.isoTime())}s.updateObjectKeyValue("newWorkout","temperature",-1)}else s.load(t.props.workout)},this.loadDogs=async function(){t.setState({isLoading:!0});const{dogStore:e}=t.props.stores;await e.load({query:{deceased:0},addData:["workoutSummary"]}),t.setState({isLoading:!1})},this.insertWorkout=async function(){const{workoutStore:e,userStore:s}=t.props.stores,{newWorkout:o}=e,i=await e.insert(a({},o));422===i.status?x.a.publish(x.b.STATUS_MESSAGE,{message:"Mangler tittel på treningsøkten",type:"warning",icon:"fas fa-exclamation-triangle"}):i.status>=500?x.a.publish(x.b.STATUS_MESSAGE,{message:i.message||i.error,type:"danger",icon:"fas fa-exclamation-triangle"}):(t.resetDog(),s.getInfo(),Object(y.route)("/workouts/"+i.data.id))},this.updateField=e=>{const{id:t,field:s,type:o,elementtype:a,isNew:i}=e.target.dataset,{value:l,type:n,min:r,max:c}=e.target;"date"===n&&r&&c?l>=r&&l<=c&&this.updateFieldValue({id:parseInt(t,10),field:s,value:l,type:o,elementtype:a,isNew:i}):this.updateFieldValue({id:parseInt(t,10),field:s,value:l,type:o,elementtype:a,isNew:i})},this.updateFieldValue=async function({id:e,field:s,value:o,datatype:a,elementtype:i,isNew:l=!1,skipTimer:n=!1}){const{workoutStore:r}=t.props.stores;let c=o,d=o;const{workout:h}=r;if("images"===s&&Array.isArray(h.images)&&Array.isArray(o)&&(d=[...h.images,...o]),"array"!==a||Array.isArray(o)||(c="number"===i?o.split(",").map(e=>parseFloat(e)||e):o.split(",")),l?r.updateObjectKeyValue("newWorkout",s,o):(r.updateField(e,s,d),n?await t.doUpdateField(e,s,c):(clearTimeout(t.updateTimer[s]),t.updateTimer[s]=setTimeout((async function(){t.doUpdateField(e,s,c)}),500))),"gpx"===s&&h&&g.a.checkNested(h,"gpx","gpxInfo")){const{totalDistance:t,maxSpeed:s,avgSpeed:o,ascent:a,decent:i,duration:l,rest:n,startLatlng:c,endLatlng:d}=h.gpx.gpxInfo,u={};l&&(r.updateField(e,"duration",l),u.duration=l),n&&(r.updateField(e,"rest",n),u.rest=n),t&&(r.updateField(e,"distanceKm",g.a.roundTo(t,10)),u.distanceKm=g.a.roundTo(t,10)),s&&(r.updateField(e,"speedmax",g.a.roundTo(s,10)),u.speedmax=g.a.roundTo(s,10)),o&&(r.updateField(e,"speedAvg",g.a.roundTo(o,10)),u.speedAvg=g.a.roundTo(o,10)),a&&(r.updateField(e,"elevation",a),u.elevation=a),i&&(r.updateField(e,"decent",i),u.decent=i),c&&(r.updateField(e,"startLatlng",c),u.startLatlng=c),d&&(r.updateField(e,"endLatlng",d),u.endLatlng=d),await r.save(u,h.id)}},this.dogFilter=e=>{const{workoutStore:t}=this.props.stores,{workout:s}=t;return!(!s||!s.dogs)&&(e.team===s.team||s.dogs.indexOf(e.id)>-1)},this.back=()=>{const{history:e}=this.props.stores;e.goBack()},this.getYrWeather=async function(){const{createNew:e}=t.state,{workoutStore:s,userStore:o}=t.props.stores,{workout:a={},newWorkout:i}=s,l=k.a.getFirstPoint(a),n=k.a.getMidPoint(a,.5),r=await o.getWeather({lat:l[0],lon:l[1],altitude:l[2]}),c=await o.getWeather({lat:n[0],lon:n[1],altitude:n[2]});if(e){if(t.updateFieldValue({id:i.id,field:"yr",value:r,isNew:!0,skipTimer:!1}),t.updateFieldValue({id:i.id,field:"yrMid",value:c,isNew:!0,skipTimer:!1}),g.a.checkNested(i,"yr","0","instant","details")&&!i.weather){let e="";const s=Object(j.i)(i.yr[0].instant.details);e=`Yr.no: 🌡️ ${s.air_temperature}°C, 💨 ${s.wind_speed}m/s 🧭 ${k.a.windDirection(s.wind_from_direction)}, ☁️ ${s.cloud_area_fraction}%, ${s.air_pressure_at_sea_level}mb, 💦 ${s.relative_humidity}%`,t.updateFieldValue({id:i.id,field:"weather",value:e,isNew:!0,skipTimer:!1}),i.temperature||t.updateFieldValue({id:i.id,field:"temperature",value:s.air_temperature,isNew:!0,skipTimer:!1})}}else if(t.updateFieldValue({id:a.id,field:"yr",value:r,isNew:!1,skipTimer:!1}),t.updateFieldValue({id:a.id,field:"yrMid",value:c,isNew:!1,skipTimer:!1}),g.a.checkNested(a,"yr","0","instant","details")){let e="";const s=Object(j.i)(a.yr[0].instant.details);g.a.isoDate(a.yr[0].date,!1,!1,!0)!==g.a.isoDate(a.date,!1,!1,!0)||a.weather&&""!==a.weather||(e=`Yr.no: 🌡️ ${s.air_temperature}°C, 💨 ${s.wind_speed}m/s 🧭 ${k.a.windDirection(s.wind_from_direction)}, ☁️ ${s.cloud_area_fraction}%, ${s.air_pressure_at_sea_level}mb, 💦 ${s.relative_humidity}%`,t.updateFieldValue({id:a.id,field:"weather",value:e,isNew:!1,skipTimer:!1}),a.temperature||t.updateFieldValue({id:a.id,field:"temperature",value:s.air_temperature,isNew:!0,skipTimer:!1}))}},this.chooseSubmenu=e=>{this.setState({submenu:e.target.parentElement.dataset.menu||e.target.dataset.menu})},this.toggleAdminDebug=()=>{const{showAdminDebug:e}=this.state;this.setState({showAdminDebug:!e})},this.state=a(a({},C),{},{submenu:e.submenu||"info"}),this.updateTimer={}}resetDog(){const{workoutStore:e}=this.props.stores;e.updateKeyValue("newWorkout",{})}async doUpdateField(e,t,s){const{workoutStore:o}=this.props.stores;e&&t&&await o.saveField(e,t,s)}componentDidMount(){this.loadAll()}render(){const{createNew:t,lastUsedTracks:s,submenu:o,showAdminDebug:a=!0}=this.state,{workoutStore:i,userStore:l,appState:n,raceStore:r}=this.props.stores,{viewmode:c}=n,{isAdmin:d,user:h}=l,{insertStatus:u,saved:p,workout:b={},newWorkout:m={}}=i,{currentTeam:O}=i,j=l.findTeam(b.team||O,!0),v=r.getSignupByUserEmail(h.email).map(e=>parseInt(e.musher.team,10)),{name:y,gpxInfo:x={},gpx:I={gpxInfo:{}}}=b;let S=!1;return S=t?[6,8].indexOf(m.type)>-1:[6,8].indexOf(b.type)>-1,t?Object(f.h)("div",{class:"container-fluid",style:`margin-bottom: ${N}; margin-top: ${V};`},Object(f.h)("button",{class:"btn btn-link float-left pl-0 fixed-top text-primary",style:`top: ${$}; left: 5px; font-size: 35px; width: 45px;`,onClick:this.back},Object(f.h)("i",{class:"fas fa-arrow-circle-left"})),Object(f.h)("div",{class:"row"},Object(f.h)(_,{stores:this.props.stores}),Object(f.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3",style:"padding-left: 35px;"},Object(f.h)("div",null,Object(f.h)("h5",null,Object(f.h)(w.c,{id:"workouts.add-new"},"Legg til ny treningstur")))),Object(f.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 my-3"},Object(f.h)("div",{class:"row"},Object(f.h)("div",{class:"w-100 overflow-hidden"},Object(f.h)("div",{class:"d-flex flex-row flex-nowrap pb-2 px-1",style:"overflow: auto; scroll-snap-type: x mandatory;"},Object(f.h)("div",{class:"col px-0 pt-2"},Object(f.h)("button",{class:`btn btn-block rounded-pill-left rounded-none ${"info"===o?"btn-primary":"btn-outline-primary"} text-nowrap`,style:"text-overflow: ellipsis; overflow: hidden;","data-menu":"info",onClick:this.chooseSubmenu},Object(f.h)("i",{class:"fas fa-info-circle"})," ",Object(f.h)(w.c,{id:"workouts.info"},"Info")),"info"===o&&Object(f.h)(T.a,{horizontal:"center",vertical:"end"})),Object(f.h)("div",{class:"col px-0 pt-2"},Object(f.h)("button",{class:`btn btn-block rounded-none ${"team"===o?"btn-primary":"btn-outline-primary"} text-nowrap`,style:"text-overflow: ellipsis; overflow: hidden;","data-menu":"team",onClick:this.chooseSubmenu},Object(f.h)("i",{class:"fas fa-users"})," ",Object(f.h)(w.c,{id:"workouts.team"},"Team")),"team"===o&&Object(f.h)(T.a,{horizontal:"center",vertical:"end"})),Object(f.h)("div",{class:"col px-0 pt-2"},Object(f.h)("button",{class:`btn btn-block rounded-none ${"user"===o?"btn-primary":"btn-outline-primary"} text-nowrap`,style:"text-overflow: ellipsis; overflow: hidden;","data-menu":"user",onClick:this.chooseSubmenu},Object(f.h)("i",{class:"fas fa-user"})," ",Object(f.h)(w.c,{id:"workouts.user"},"Musher")),"user"===o&&Object(f.h)(T.a,{horizontal:"center",vertical:"end"})),Object(f.h)("div",{class:"col px-0 pt-2"},Object(f.h)("button",{class:`btn btn-block rounded-none ${"images"===o?"btn-primary":"btn-outline-primary"} text-nowrap`,style:"text-overflow: ellipsis; overflow: hidden;","data-menu":"images",onClick:this.chooseSubmenu},Object(f.h)("i",{class:"fas fa-images"})," ",Object(f.h)(w.c,{id:"workouts.images"},"Bilder")),"images"===o&&Object(f.h)(T.a,{horizontal:"center",vertical:"end"})),Object(f.h)("div",{class:"col px-0 pt-2"},Object(f.h)("button",{class:`btn btn-block rounded-none ${"gps"===o?"btn-primary":"btn-outline-primary"} text-nowrap`,style:"text-overflow: ellipsis; overflow: hidden;","data-menu":"gps",onClick:this.chooseSubmenu},Object(f.h)("i",{class:"fas fa-map-marker-alt"})," ",Object(f.h)(w.c,{id:"workouts.gps"},"GPS")),"gps"===o&&Object(f.h)(T.a,{horizontal:"center",vertical:"end"})),Object(f.h)("div",{class:"col px-0 pt-2"},Object(f.h)("button",{class:`btn btn-block rounded-none ${"equipment"===o?"btn-primary":"btn-outline-primary"} text-nowrap`,style:"text-overflow: ellipsis; overflow: hidden;","data-menu":"equipment",onClick:this.chooseSubmenu},Object(f.h)("i",{class:"fas fa-sleigh"})," ",Object(f.h)(w.c,{id:"workouts.equipment"},"Equipment")),"equipment"===o&&Object(f.h)(T.a,{horizontal:"center",vertical:"end"})),Object(f.h)("div",{class:"col px-0 pt-2"},Object(f.h)("button",{class:`btn btn-block rounded-pill-right rounded-none ${"advanced"===o?"btn-primary":"btn-outline-primary"} text-nowrap`,style:"text-overflow: ellipsis; overflow: hidden;","data-menu":"advanced",onClick:this.chooseSubmenu},Object(f.h)("i",{class:"fas fa-cogs"})," ",Object(f.h)(w.c,{id:"workouts.advanced"},"advanced")),"advanced"===o&&Object(f.h)(T.a,{horizontal:"center",vertical:"end"})))))),"info"===o&&Object(f.h)(e,null,["beta","advanced","normal"].indexOf(c)>-1&&Object(f.h)(e,null,Object(f.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 my-3"},Object(f.h)(W,{stores:this.props.stores,isNew:1,saved:p,workout:m,type:"number",field:"type",icon:"fas fa-running",title:Object(f.h)(w.c,{id:"workouts.type"},"Type tur"),help:Object(f.h)(w.c,{id:"workouts.type-help"},"Type treningstur. 'trening', 'konkurranse', 'tur'."),updateField:this.updateFieldValue}))),Object(f.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 my-3"},Object(f.h)(P,{stores:this.props.stores,field:"name",icon:"fas fa-heading",title:Object(f.h)(w.c,{id:"workouts.title"},"Tittel"),help:Object(f.h)(w.c,{id:"workouts.title-help"},"Tittel på denne turen. 'Fin høsttur i øsende regn...'")})),Object(f.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 my-3"},Object(f.h)(P,{stores:this.props.stores,field:"comment",type:"textarea",title:Object(f.h)(w.c,{id:"workouts.comment"},"Kommentar"),help:Object(f.h)(w.c,{id:"workouts.comment-help"},"Kommentar til turen. Hvordan gikk det?")})),j&&j.public>0&&Object(f.h)(e,null,Object(f.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 my-3"},Object(f.h)(P,{stores:this.props.stores,field:"private",icon:"fas fa-eye",type:"toggle",title:Object(f.h)(w.c,{id:"workouts.private"},"Skjul treningsturen"),help:Object(f.h)(w.c,{id:"workouts.private-help"},"Skal denne turen være skjult for de som følger teamet ditt?")}))),Object(f.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 my-3"},Object(f.h)(P,{stores:this.props.stores,field:"date",icon:"fas fa-calendar",type:"date",min:"2010-01-01",max:"today",title:Object(f.h)(w.c,{id:"workouts.date"},"Dato"),help:Object(f.h)(w.c,{id:"workouts.date-help"},"Dato for turen. Format på dato er: 'YYYY-MM-DD'.")})),Object(f.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 my-3"},Object(f.h)(P,{stores:this.props.stores,field:"time",icon:"fas fa-clock",type:"time",title:Object(f.h)(w.c,{id:"workouts.time"},"Klokka"),help:Object(f.h)(w.c,{id:"workouts.time-help"},"Klokkeslett for turen. Format: 'HH:MI'.")})),Object(f.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 my-3"},Object(f.h)(P,{stores:this.props.stores,field:"duration",type:"duration",icon:"fas fa-stopwatch",title:Object(f.h)(w.c,{id:"workouts.duration"},"Varighet på treningen"),help:Object(f.h)(w.c,{id:"workouts.duration-help"},"Hvor lenge var du ute? (HH:MI)")})),Object(f.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 my-3"},Object(f.h)(P,{stores:this.props.stores,field:"rest",type:"duration",icon:"fas fa-stopwatch",title:Object(f.h)(w.c,{id:"workouts.rest"},"Hviletid på treningen"),help:Object(f.h)(w.c,{id:"workouts.rest-help"},"Hvor lenge stod du stille? (HH:MI)")})),Object(f.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 my-3"},["beta","advanced","normal"].indexOf(c)>-1&&Object(f.h)(e,null,Object(f.h)(P,{stores:this.props.stores,field:"speedAvg",rightValue:g.a.format(k.a.speedAvg({duration:m.duration,rest:m.rest,distanceKm:m.distanceKm}),1,"."," ")+" km/t",rightValueReal:k.a.speedAvg({duration:m.duration,rest:m.rest,distanceKm:m.distanceKm}),updateField:this.updateFieldValue,icon:"fas fa-tachometer-alt",type:"number",min:"0",max:"100",step:"0.1",title:Object(f.h)(w.c,{id:"workouts.avg-speed"},"Gjennomsnittsfart"),help:Object(f.h)(w.c,{id:"workouts.avg-speed-help"},"Gjennomsnittsfart når du var i bevegelse. Dersom du ikke vet dette så legger du bare inn distanse og varighet så blir dette regnet ut.")}))),Object(f.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 my-3"},Object(f.h)("div",{class:"row px-0"},Object(f.h)("div",{class:"col-6"},Object(f.h)(P,{stores:this.props.stores,field:"distanceKm",icon:"fas fa-road",title:Object(f.h)(w.c,{id:"workouts.distance"},"Distanse i km"),type:"number",min:"0",max:"300",step:"1",help:Object(f.h)(w.c,{id:"workouts.distance-help"},"Hvor lang var turen i km.")})),Object(f.h)("div",{class:"col-6"},Object(f.h)(P,{stores:this.props.stores,field:"elevation",icon:"fas fa-mountain",title:Object(f.h)(w.c,{id:"workouts.ascend"},"Høydemeter"),type:"number",min:"0",max:"3000",step:"1",help:Object(f.h)(w.c,{id:"workouts.ascend-help"},"Høydemeter du klatret på denne turen.")}))))),"team"===o&&Object(f.h)(e,null,Object(f.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 my-3"},Object(f.h)(L,{stores:this.props.stores,isNew:1,saved:p,workout:m,type:"number",field:"team",icon:"fas fa-users",title:Object(f.h)(w.c,{id:"workouts.team"},"Team"),help:Object(f.h)(w.c,{id:"workouts.team-help"},"Teamet som er på tur."),updateField:this.updateFieldValue,selectTeam:this.loadWorkout,highlight:v})),Object(f.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 my-3"},Object(f.h)(D.a,{stores:this.props.stores,isNew:1,saved:p,object:m,type:"array",icon:"fas fa-dog",elementtype:"number",field:"dogs",title:Object(f.h)(w.c,{id:"workouts.dogs"},"Hunder"),help:Object(f.h)(w.c,{id:"workouts.dogs-help"},"Hvilke hunder var med på turen."),updateField:this.updateFieldValue,filter:e=>e.team===m.team||m.dogs&&m.dogs.indexOf(e.id)>-1,showPositions:!S&&["beta","advanced","normal"].indexOf(c)>-1,currentTeam:j,key:"dogs-"+g.a.getNestedValue(j,"id")}))),"user"===o&&Object(f.h)(e,null,Object(f.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 my-3"},Object(f.h)(K,{stores:this.props.stores,isNew:1,saved:p,workout:m,type:"array",elementtype:"number",field:"mushers",icon:"fas fa-user",title:Object(f.h)(w.c,{id:"workouts.mushers"},"Kjørere"),help:Object(f.h)(w.c,{id:"workouts.mushers-help"},"Hvem av kjørerne var med på turen."),updateField:this.updateFieldValue}))),"images"===o&&Object(f.h)(e,null,Object(f.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 my-3"},Object(f.h)("div",{class:"text-center text-muted"},Object(f.h)("div",{class:"display-1"},Object(f.h)("i",{class:"fas fa-images"})),Object(f.h)(w.c,{id:"workouts.save-to-add-images"},"Please save workout and then go into edit mode to add images.")))),"gps"===o&&Object(f.h)(e,null,Object(f.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 my-3"},Object(f.h)("div",{class:"text-center text-muted mb-3"},Object(f.h)("div",{class:"display-1"},Object(f.h)("i",{class:"fas fa-map-marker-alt"})),Object(f.h)(w.c,{id:"workouts.save-to-add-gpx"},"Please save workout and then you will be able to upload a GPX-file if you like.")),Object(f.h)(E,{stores:this.props.stores,isNew:1,saved:p,workout:m,type:"number",field:"track",icon:"fas fa-map-marked",title:Object(f.h)(w.c,{id:"workouts.track"},"Runde"),help:Object(f.h)(w.c,{id:"workouts.track-help"},"Hvilken treningsrunde er dette."),updateField:this.updateFieldValue,filter:e=>e.id===m.track||s&&s.indexOf(e.id)>-1}))),"equipment"===o&&Object(f.h)(e,null,Object(f.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 my-3"},Object(f.h)(A,{stores:this.props.stores,isNew:1,saved:p,workout:m,type:"number",field:"equipment",icon:"fas fa-sleigh",title:Object(f.h)(w.c,{id:"workouts.equipment"},"Utstyr"),help:Object(f.h)(w.c,{id:"workouts.equipment-help"},"Utstyr som ble brukt. 'trollvogn', 'atv', 'slede'."),updateField:this.updateFieldValue})),Object(f.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 my-3"},Object(f.h)(P,{stores:this.props.stores,isNew:1,saved:p,workout:m,type:"number",field:"sledWeight",icon:"fas fa-sleigh",title:Object(f.h)(w.c,{id:"workouts.sledWeight"},"Sledevekt"),help:Object(f.h)(w.c,{id:"workouts.sledWeight-help"},"Vekt på sleden denne turen."),updateField:this.updateFieldValue}))),"advanced"===o&&Object(f.h)(e,null,["beta","advanced","normal"].indexOf(c)>-1&&Object(f.h)(e,null,Object(f.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 my-3"},Object(f.h)(P,{stores:this.props.stores,field:"weather",icon:"fas fa-cloud-sun-rain",title:Object(f.h)(w.c,{id:"workouts.weather"},"Været på turen"),help:Object(f.h)(w.c,{id:"workouts.weather-help"},"Hvordan var været.")})),Object(f.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 my-3"},Object(f.h)(P,{stores:this.props.stores,field:"temperature",icon:"fas fa-temperature-low",title:Object(f.h)(w.c,{id:"workouts.temperature"},"Temperatur"),type:"number",min:"-40",max:"20",step:"0.5",help:Object(f.h)(w.c,{id:"workouts.temperature-help"},"Hvilken temperatur var det.")}))),["beta","advanced","normal"].indexOf(c)>-1&&Object(f.h)(e,null,Object(f.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 my-3"},Object(f.h)(P,{stores:this.props.stores,field:"rating",icon:"fas fa-dice",title:Object(f.h)(w.c,{id:"workouts.rating"},"Rating av turen"),type:"number",min:"0",max:"6",step:"1",help:Object(f.h)(w.c,{id:"workouts.rating-help"},"Din rating av turen. 1-6")})),Object(f.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 my-3"},Object(f.h)(R,{stores:this.props.stores,isNew:1,saved:p,workout:m,type:"number",field:"intensity",icon:"fas fa-dumbbell",title:Object(f.h)(w.c,{id:"workouts.intensity"},"Intensitet"),help:Object(f.h)(w.c,{id:"workouts.intensity-help"},"Hvor stor belastning var denne turen?"),updateField:this.updateFieldValue})))),Object(f.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 my-3"},Object(f.h)("div",{class:"form-group mb-1 pb-1 border-bottom"},Object(f.h)("button",{type:"button",class:"btn btn-block btn-primary",onClick:this.insertWorkout},Object(f.h)(w.c,{id:"workouts.add-save-new"},"Lagre treningstur"))))),u&&Object(f.h)("div",{class:"alert alert-success mt-4 col-12",role:"alert"},Object(f.h)(w.c,{id:"workouts.workout-saved"},"Treningen er lagret."))):Object(f.h)("div",{class:"container-fluid",style:`margin-bottom: ${N}; margin-top: ${V};`},Object(f.h)("button",{class:"btn btn-link float-left pl-0 fixed-top",style:`top: ${$}; left: 5px; font-size: 35px; width: 45px;`,onClick:this.back},Object(f.h)("i",{class:"fas fa-arrow-circle-left"})),Object(f.h)("div",{class:"row"},Object(f.h)(_,{stores:this.props.stores}),Object(f.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3",style:"padding-left: 35px;"},Object(f.h)("div",null,Object(f.h)("h5",null,Object(f.h)(w.c,{id:"workouts.edit-workout"},"Endre trening"),": ",y,1===b.isLocked&&Object(f.h)("i",{class:"fas fa-lock text-danger ml-3"})))),Object(f.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 my-3"},Object(f.h)("div",{class:"row"},Object(f.h)("div",{class:"w-100 overflow-hidden"},Object(f.h)("div",{class:"d-flex flex-row flex-nowrap pb-2 px-1",style:"overflow: auto; scroll-snap-type: x mandatory;"},Object(f.h)("div",{class:"col px-0 pt-2"},Object(f.h)("button",{class:`btn btn-block rounded-pill-left rounded-none ${"info"===o?"btn-primary":"btn-outline-primary"} text-nowrap`,style:"text-overflow: ellipsis; overflow: hidden;","data-menu":"info",onClick:this.chooseSubmenu},Object(f.h)("i",{class:"fas fa-info-circle"})," ",Object(f.h)(w.c,{id:"workouts.info"},"Info"))),Object(f.h)("div",{class:"col px-0 pt-2"},Object(f.h)("button",{class:`btn btn-block rounded-none ${"team"===o?"btn-primary":"btn-outline-primary"} text-nowrap`,style:"text-overflow: ellipsis; overflow: hidden;","data-menu":"team",onClick:this.chooseSubmenu},Object(f.h)("i",{class:"fas fa-users"})," ",Object(f.h)(w.c,{id:"workouts.team"},"Team"))),Object(f.h)("div",{class:"col px-0 pt-2"},Object(f.h)("button",{class:`btn btn-block rounded-none ${"user"===o?"btn-primary":"btn-outline-primary"} text-nowrap`,style:"text-overflow: ellipsis; overflow: hidden;","data-menu":"user",onClick:this.chooseSubmenu},Object(f.h)("i",{class:"fas fa-user"})," ",Object(f.h)(w.c,{id:"workouts.user"},"Musher"))),Object(f.h)("div",{class:"col px-0 pt-2"},Object(f.h)("button",{class:`btn btn-block rounded-none ${"images"===o?"btn-primary":"btn-outline-primary"} text-nowrap`,style:"text-overflow: ellipsis; overflow: hidden;","data-menu":"images",onClick:this.chooseSubmenu},Object(f.h)("i",{class:"fas fa-images"})," ",Object(f.h)(w.c,{id:"workouts.images"},"Bilder"))),Object(f.h)("div",{class:"col px-0 pt-2"},Object(f.h)("button",{class:`btn btn-block rounded-none ${"gps"===o?"btn-primary":"btn-outline-primary"} text-nowrap`,style:"text-overflow: ellipsis; overflow: hidden;","data-menu":"gps",onClick:this.chooseSubmenu},Object(f.h)("i",{class:"fas fa-map-marker-alt"})," ",Object(f.h)(w.c,{id:"workouts.gps"},"GPS"))),Object(f.h)("div",{class:"col px-0 pt-2"},Object(f.h)("button",{class:`btn btn-block rounded-none ${"equipment"===o?"btn-primary":"btn-outline-primary"} text-nowrap`,style:"text-overflow: ellipsis; overflow: hidden;","data-menu":"equipment",onClick:this.chooseSubmenu},Object(f.h)("i",{class:"fas fa-sleigh"})," ",Object(f.h)(w.c,{id:"workouts.equipment"},"Equipment"))),Object(f.h)("div",{class:"col px-0 pt-2"},Object(f.h)("button",{class:`btn btn-block rounded-pill-right rounded-none ${"advanced"===o?"btn-primary":"btn-outline-primary"} text-nowrap`,style:"text-overflow: ellipsis; overflow: hidden;","data-menu":"advanced",onClick:this.chooseSubmenu},Object(f.h)("i",{class:"fas fa-cogs"})," ",Object(f.h)(w.c,{id:"workouts.advanced"},"advanced"))))))),"info"===o&&Object(f.h)(e,null,["beta","advanced","normal"].indexOf(c)>-1&&Object(f.h)(e,null,Object(f.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 my-3"},Object(f.h)(W,{stores:this.props.stores,saved:p,workout:b,type:"number",field:"type",icon:"fas fa-running",title:Object(f.h)(w.c,{id:"workouts.type"},"Type tur"),help:Object(f.h)(w.c,{id:"workouts.type-help"},"Type treningstur. 'trening', 'konkurranse', 'tur'."),updateField:this.updateFieldValue}))),Object(f.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 my-3"},Object(f.h)(H,{saved:p,workout:b,field:"name",icon:"fas fa-heading",title:Object(f.h)(w.c,{id:"workouts.title"},"Tittel"),help:Object(f.h)(w.c,{id:"workouts.title-help"},"Tittel på denne turen. 'Fin høsttur i øsende regn...'"),onInput:this.updateField,updateField:this.updateFieldValue})),Object(f.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 my-3"},Object(f.h)(H,{saved:p,workout:b,field:"comment",type:"textarea",title:Object(f.h)(w.c,{id:"workouts.comment"},"Kommentar"),help:Object(f.h)(w.c,{id:"workouts.comment-help"},"Kommentar til turen. Hvordan gikk det?"),onInput:this.updateField,updateField:this.updateFieldValue})),Object(f.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 my-3"},j&&j.public>0&&Object(f.h)(H,{stores:this.props.stores,saved:p,workout:b,field:"private",icon:"fas fa-eye",type:"toggle",title:Object(f.h)(w.c,{id:"workouts.private"},"Skjul treningsturen"),help:Object(f.h)(w.c,{id:"workouts.private-help"},"Skal denne turen være skjult for de som følger teamet ditt?"),onInput:this.updateField,updateField:this.updateFieldValue})),Object(f.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 my-3"},Object(f.h)(H,{stores:this.props.stores,saved:p,workout:b,field:"date",icon:"fas fa-calendar",type:"date",min:"2010-01-01",max:"today",title:Object(f.h)(w.c,{id:"workouts.date"},"Dato"),help:Object(f.h)(w.c,{id:"workouts.date-help"},"Dato for turen. Format på dato er: 'YYYY-MM-DD'."),onInput:this.updateField,updateField:this.updateFieldValue}),a&&Object(f.h)("div",{onClick:this.toggleAdminDebug},d&&x.minEpoch>0&&Object(f.h)("small",{class:"text-danger",style:"line-height: 0.8em;"},"gpxInfo.minEpoch: ",g.a.isoDate(x.minEpoch,!0,!0)," ",Object(f.h)("br",null)),d&&I.gpxInfo&&I.gpxInfo.startTime>0&&Object(f.h)("small",{class:"text-danger",style:"line-height: 0.8em;"},"gpx.gpxInfo.startTime ",g.a.isoDate(I.gpxInfo.startTime,!0,!0)," ",Object(f.h)("br",null)))),Object(f.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 my-3"},Object(f.h)(H,{stores:this.props.stores,saved:p,workout:b,field:"time",icon:"fas fa-clock",type:"time",title:Object(f.h)(w.c,{id:"workouts.time"},"Klokka"),help:Object(f.h)(w.c,{id:"workouts.time-help"},"Klokkeslett for turen. Format: 'HH:MI'."),onInput:this.updateField,updateField:this.updateFieldValue})),Object(f.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 my-3"},Object(f.h)(H,{saved:p,workout:b,field:"duration",type:"duration",icon:"fas fa-stopwatch",title:Object(f.h)(w.c,{id:"workouts.duration"},"Varighet på treningen"),help:Object(f.h)(w.c,{id:"workouts.duration-help"},"Hvor lenge var du ute? (HH:MI)"),onInput:this.updateField,updateField:this.updateFieldValue}),a&&Object(f.h)("div",{onClick:this.toggleAdminDebug},d&&x.minEpoch>0&&x.maxEpoch>0&&Object(f.h)("small",{class:"text-danger",style:"line-height: 0.8em;"},"gpxInfo.maxEpoch-minEpoch: ",g.a.secToHms(x.maxEpoch-x.minEpoch)," ",Object(f.h)("br",null)),d&&x.duration>0&&Object(f.h)("small",{class:"text-danger",style:"line-height: 0.8em;"},"gpxInfo.duration: ",g.a.secToHms(x.duration)," ",Object(f.h)("br",null)),d&&I.gpxInfo&&I.gpxInfo.endTime>0&&I.gpxInfo.startTime>0&&Object(f.h)("small",{class:"text-danger",style:"line-height: 0.8em;"},"gpx.gpxInfo.endTime-startTime: ",g.a.secToHms((I.gpxInfo.endTime-I.gpxInfo.startTime)/1e3)," ",Object(f.h)("br",null)),d&&I.gpxInfo&&I.gpxInfo.duration>0&&Object(f.h)("small",{class:"text-danger",style:"line-height: 0.8em;"},"gpx.gpxInfo.duration: ",g.a.secToHms(I.gpxInfo.duration)," ",Object(f.h)("br",null)))),Object(f.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 my-3"},Object(f.h)(H,{saved:p,workout:b,field:"rest",type:"duration",icon:"fas fa-stopwatch",title:Object(f.h)(w.c,{id:"workouts.rest"},"Hviletid på treningen"),help:Object(f.h)(w.c,{id:"workouts.rest-help"},"Hvor lenge stod du stille? (HH:MI)"),onInput:this.updateField,updateField:this.updateFieldValue}),a&&Object(f.h)("div",{onClick:this.toggleAdminDebug},d&&x.minEpoch>0&&x.maxEpoch>0&&Object(f.h)("small",{class:"text-danger",style:"line-height: 0.8em;"},"gpxInfo.maxEpoch-minEpoch: ",g.a.secToHms(x.rest)," ",Object(f.h)("br",null)),d&&x.rest>0&&Object(f.h)("small",{class:"text-danger",style:"line-height: 0.8em;"},"gpxInfo.rest: ",g.a.secToHms(x.rest)," ",Object(f.h)("br",null)),d&&I.gpxInfo&&I.gpxInfo.rest>0&&Object(f.h)("small",{class:"text-danger",style:"line-height: 0.8em;"},"gpx.gpxInfo.rest: ",g.a.secToHms(I.gpxInfo.rest)," ",Object(f.h)("br",null)))),Object(f.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 my-3"},!S&&Object(f.h)(e,null,["beta","advanced","normal"].indexOf(c)>-1&&Object(f.h)(e,null,Object(f.h)(H,{saved:p,workout:b,field:"speedAvg",rightValue:g.a.format(k.a.speedAvg({duration:b.duration,rest:b.rest,distanceKm:b.distanceKm}),1,"."," ")+" km/t",rightValueReal:k.a.speedAvg({duration:b.duration,rest:b.rest,distanceKm:b.distanceKm}),updateField:this.updateFieldValue,icon:"fas fa-tachometer-alt",title:Object(f.h)(w.c,{id:"workouts.avg-speed"},"Gjennomsnittsfart"),type:"number",min:"0",max:"100",step:"0.1",help:Object(f.h)(w.c,{id:"workouts.avg-speed-help"},"Gjennomsnittsfart når du var i bevegelse. Dersom du ikke vet dette så legger du bare inn distanse og varighet så blir dette regnet ut."),onInput:this.updateField}),a&&Object(f.h)("div",{onClick:this.toggleAdminDebug},d&&x.avgMovingSpeeds>0&&Object(f.h)("small",{class:"text-danger",style:"line-height: 0.8em;"},"gpxInfo.avgMovingSpeeds ",g.a.format(3.6*x.avgMovingSpeeds,2)," km/t ",Object(f.h)("br",null)),d&&x.avgGpsSpeed>0&&Object(f.h)("small",{class:"text-danger",style:"line-height: 0.8em;"},"gpxInfo.avgGpsSpeed ",g.a.format(3.6*x.avgGpsSpeed,2)," km/t ",Object(f.h)("br",null)),d&&x.avgGpsMovingSpeed>0&&Object(f.h)("small",{class:"text-danger",style:"line-height: 0.8em;"},"gpxInfo.avgGpsMovingSpeed ",g.a.format(3.6*x.avgGpsMovingSpeed,2)," km/t ",Object(f.h)("br",null)),d&&I.gpxInfo&&I.gpxInfo.avgSpeed>0&&Object(f.h)("small",{class:"text-danger",style:"line-height: 0.8em;"},"gpx.gpxInfo.avgSpeed ",g.a.format(3.6*I.gpxInfo.avgSpeed,2)," km/t ",Object(f.h)("br",null)))))),Object(f.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 my-3"},Object(f.h)("div",{class:"row px-0"},!S&&Object(f.h)(e,null,Object(f.h)("div",{class:"col-6"},Object(f.h)(H,{saved:p,workout:b,field:"distanceKm",icon:"fas fa-road",title:Object(f.h)(w.c,{id:"workouts.distance"},"Distanse i km"),type:"number",min:"0",max:"300",step:"1",help:Object(f.h)(w.c,{id:"workouts.distance-help"},"Hvor lang var turen i km."),onInput:this.updateField,updateField:this.updateFieldValue}),a&&Object(f.h)("div",{onClick:this.toggleAdminDebug},d&&x.calculatedTotalDistance>0&&Object(f.h)("small",{class:"text-danger",style:"line-height: 0.8em;"},"gpxInfo.calculatedTotalDistance: ",g.a.format(x.calculatedTotalDistance,2)," km ",Object(f.h)("br",null)),d&&I.gpxInfo&&I.gpxInfo.totalDistance>0&&Object(f.h)("small",{class:"text-danger",style:"line-height: 0.8em;"},"gpx.gpxInfo.totalDistance: ",g.a.format(I.gpxInfo.totalDistance,2)," km ",Object(f.h)("br",null)))),Object(f.h)("div",{class:"col-6"},Object(f.h)(H,{saved:p,workout:b,field:"elevation",icon:"fas fa-mountain",title:Object(f.h)(w.c,{id:"workouts.ascend"},"Høydemeter"),type:"number",min:"0",max:"3000",step:"1",help:Object(f.h)(w.c,{id:"workouts.ascend-help"},"Høydemeter du klatret på denne turen."),onInput:this.updateField,updateField:this.updateFieldValue}),a&&Object(f.h)("div",{onClick:this.toggleAdminDebug},d&&x.calculatedAscend>0&&Object(f.h)("small",{class:"text-danger",style:"line-height: 0.8em;"},"gpxInfo.calculatedAscend: ",g.a.format(x.calculatedAscend,0)," m ",Object(f.h)("br",null)),d&&x.calculatedDescend>0&&Object(f.h)("small",{class:"text-danger",style:"line-height: 0.8em;"},"gpxInfo.calculatedDescend: ",g.a.format(x.calculatedDescend,0)," m ",Object(f.h)("br",null)),d&&I.gpxInfo&&I.gpxInfo.ascent>0&&Object(f.h)("small",{class:"text-danger",style:"line-height: 0.8em;"},"gpx.gpxInfo.ascent: ",g.a.format(I.gpxInfo.ascent,0)," m ",Object(f.h)("br",null)),d&&I.gpxInfo&&I.gpxInfo.descent>0&&Object(f.h)("small",{class:"text-danger",style:"line-height: 0.8em;"},"gpx.gpxInfo.descent: ",g.a.format(I.gpxInfo.descent,0)," m ",Object(f.h)("br",null)))))))),"team"===o&&Object(f.h)(e,null,Object(f.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 my-3"},Object(f.h)(L,{stores:this.props.stores,saved:p,workout:b,type:"number",field:"team",icon:"fas fa-users",title:Object(f.h)(w.c,{id:"workouts.team"},"Team"),help:Object(f.h)(w.c,{id:"workouts.team-help"},"Teamet som er på tur."),updateField:this.updateFieldValue,highlight:v})),Object(f.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 my-3"},Object(f.h)(D.a,{stores:this.props.stores,saved:p,object:b,type:"array",elementtype:"number",field:"dogs",icon:"fas fa-dog",title:Object(f.h)(w.c,{id:"workouts.dogs"},"Hunder"),help:Object(f.h)(w.c,{id:"workouts.dogs-help"},"Hvilke hunder var med på turen."),updateField:this.updateFieldValue,filter:this.dogFilter,showPositions:!S&&["beta","advanced","normal"].indexOf(c)>-1,currentTeam:j}))),"user"===o&&Object(f.h)(e,null,Object(f.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 my-3"},Object(f.h)(K,{stores:this.props.stores,saved:p,workout:b,type:"array",elementtype:"number",field:"mushers",icon:"fas fa-user",title:Object(f.h)(w.c,{id:"workouts.mushers"},"Kjørere"),help:Object(f.h)(w.c,{id:"workouts.mushers-help"},"Hvem av kjørerne var med på turen."),updateField:this.updateFieldValue}))),"images"===o&&Object(f.h)(e,null,Object(f.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 my-3"},Object(f.h)(H,{saved:p,workout:b,field:"image",type:"image",stores:this.props.stores,title:Object(f.h)(w.c,{id:"workouts.photos"},"Bilder"),help:Object(f.h)(w.c,{id:"workouts.photos-help"},"Legg til bilde fra treningen."),onInput:this.updateField,updateField:this.updateFieldValue}))),"gps"===o&&Object(f.h)(e,null,Object(f.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 my-3"},I&&Object(f.h)("div",{style:"height: 300px;"},Object(f.h)(F.a,{stores:this.props.stores,mapId:b.id,geojson:I.geoJSON,gpxInfo:I.gpxInfo,height:300})),Object(f.h)(H,{saved:p,workout:b,field:"gpx",type:"file",title:Object(f.h)(w.c,{id:"workouts.gpx"},"Gpx"),help:Object(f.h)(w.c,{id:"workouts.gpx-help"},"Gpx til denne treningen."),onInput:this.updateField,updateField:this.updateFieldValue})),Object(f.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 my-3"},Object(f.h)(E,{stores:this.props.stores,saved:p,workout:b,type:"number",field:"track",icon:"fas fa-map-marked",title:Object(f.h)(w.c,{id:"workouts.track"},"Runde"),help:Object(f.h)(w.c,{id:"workouts.track-help"},"Hvilken treningsrunde er dette."),updateField:this.updateFieldValue,filter:e=>e.id===b.track}))),"equipment"===o&&Object(f.h)(e,null,Object(f.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 my-3"},Object(f.h)(A,{stores:this.props.stores,saved:p,workout:b,type:"number",field:"equipment",icon:"fas fa-sleigh",title:Object(f.h)(w.c,{id:"workouts.equipment"},"Utstyr"),help:Object(f.h)(w.c,{id:"workouts.equipment-help"},"Utstyr som ble brukt. 'trollvogn', 'atv', 'slede'."),updateField:this.updateFieldValue})),Object(f.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 my-3"},Object(f.h)(H,{saved:p,workout:b,field:"sledWeight",type:"number",step:"1",icon:"fas fa-sleigh",title:Object(f.h)(w.c,{id:"workouts.sledWeight"},"Sledevekt"),help:Object(f.h)(w.c,{id:"workouts.sledWeight-help"},"Vekt på sleden denne turen."),onInput:this.updateField,updateField:this.updateFieldValue}))),"advanced"===o&&Object(f.h)(e,null,["beta","advanced","normal"].indexOf(c)>-1&&Object(f.h)(e,null,Object(f.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 my-3"},!g.a.checkNested(b,"yr","0","instant","details")&&Object(f.h)("button",{class:"btn btn-sm float-right btn-secondary",onClick:this.getYrWeather},Object(f.h)(w.c,{id:"workouts.fetch-weather"},"Hent fra yr")),Object(f.h)(H,{saved:p,workout:b,field:"weather",icon:"fas fa-cloud-sun-rain",title:Object(f.h)(w.c,{id:"workouts.weather"},"Været på turen"),help:Object(f.h)(w.c,{id:"workouts.weather-help"},"Hvordan var været."),onInput:this.updateField,updateField:this.updateFieldValue})),Object(f.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 my-3"},Object(f.h)(H,{saved:p,workout:b,field:"temperature",icon:"fas fa-temperature-low",title:Object(f.h)(w.c,{id:"workouts.temperature"},"Temperatur"),type:"number",min:"-40",max:"20",step:"0.5",help:Object(f.h)(w.c,{id:"workouts.temperature-help"},"Hvilken temperatur var det."),onInput:this.updateField,updateField:this.updateFieldValue}))),["beta","advanced","normal"].indexOf(c)>-1&&Object(f.h)(e,null,Object(f.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 my-3"},Object(f.h)(H,{saved:p,workout:b,field:"rating",type:"number",min:"0",max:"6",step:"1",icon:"fas fa-dice",title:Object(f.h)(w.c,{id:"workouts.rating"},"Rating av turen"),help:Object(f.h)(w.c,{id:"workouts.rating-help"},"Din rating av turen. 1-6"),onInput:this.updateField,updateField:this.updateFieldValue})),Object(f.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 my-3"},Object(f.h)(R,{stores:this.props.stores,saved:p,workout:b,type:"number",field:"intensity",icon:"fas fa-dumbbell",title:Object(f.h)(w.c,{id:"workouts.intensity"},"Intensitet"),help:Object(f.h)(w.c,{id:"workouts.intensity-help"},"Hvor stor belastning var denne turen?"),updateField:this.updateFieldValue}))))))}})||m;t.default=M}.call(this,s("hosL").Fragment)},om2D:function(e,t,s){"use strict";var o,a=s("hosL"),i=s("/eY4"),l=(s("cneo"),s("Utv1"),s("u2zT"));let n=Object(i.a)(o=class extends a.Component{constructor(e){super(e),this.handleAddImage=e=>{const{addToImages:t=!0}=this.props,{updateField:s,object:o,field:a}=this.props;if(a&&s({id:o.id,field:a,value:e,skipTimer:!0}),t){const t=[];t.push(e),s({id:o.id,field:"images",value:t,skipTimer:!0})}},this.state={files:[]}}render(){const{uploadStatus:e=(()=>{}),before:t=(()=>{}),after:s=(()=>{}),autoOpen:o=!0}=this.props;return Object(a.h)("div",{class:"row"},Object(a.h)("div",{class:"col-12"},Object(a.h)(l.a,{handleAddImage:this.handleAddImage,uploadStatus:e,apiUrl:"/api/fileupload",before:t,after:s,autoOpen:o},Object(a.h)("div",{style:{height:30,width:"100%"}}))))}})||o;t.a=n},u2zT:function(e,t,s){"use strict";var o,a=s("hosL"),i=s("/eY4"),l=s("Utv1"),n=s("OhSV");let r=Object(i.a)(o=class extends a.Component{constructor(e){super(e),this.dropRef=Object(a.createRef)(),this.handleDrag=e=>{e.preventDefault(),e.stopPropagation()},this.handleDragIn=e=>{e.preventDefault(),e.stopPropagation(),this.dragCounter++,e.dataTransfer.items&&e.dataTransfer.items.length>0&&this.setState({drag:!0})},this.handleDragOut=e=>{e.preventDefault(),e.stopPropagation(),this.dragCounter--,0===this.dragCounter&&this.setState({drag:!1})},this.handleDrop=e=>{if(e.preventDefault(),e.stopPropagation(),this.setState({drag:!1}),e.dataTransfer.files&&e.dataTransfer.files.length>0){for(let t=0,s=e.dataTransfer.files.length;t<s;t+=1){this.readLocalFile(e.dataTransfer.files[t])}this.dragCounter=0}},this.handleAddFiles=e=>{e.preventDefault();const t=e.target;for(let e=0,s=t.files.length;e<s;e+=1){this.readLocalFile(t.files[e])}},this.handleEvent=()=>{0},this.handleUpload=e=>{const{uploadStatus:t=(()=>{}),before:s=(()=>{}),after:o=(()=>{})}=this.props;t(!1),l.a.isFunction(s)&&s();const a=new FormData;a.append("files[]",e);const i={progress:1};i.xhr=new XMLHttpRequest,i.xhr.upload.addEventListener("progress",t=>{this.updateProgress(t,e)}),i.xhr.addEventListener("loadstart",t=>{this.handleEvent(t,e)}),i.xhr.addEventListener("load",t=>{this.handleEvent(t,e)}),i.xhr.addEventListener("loadend",t=>{const s=e;l.a.isFunction(o)&&o(),this.handleEvent(t,s)}),i.xhr.addEventListener("progress",t=>{this.handleEvent(t,e)}),i.xhr.addEventListener("error",t=>{this.handleEvent(t,e)}),i.xhr.addEventListener("abort",t=>{this.handleEvent(t,e)}),i.xhr.addEventListener("readystatechange",t=>{this.uploadDone(t,e)}),i.xhr.open("POST",`${l.a.getApiServer()}${this.props.apiUrl}`),i.xhr.setRequestHeader("Authorization","Bearer "+l.a.getJwtToken()),i.xhr.send(a);const n=e.name,r=this.state.uploadedFilesData;r[n]||(r[n]={}),r[n].uploadMeta=i,r[n].imageNum=this.state.imageNum,this.setState({uploadedFilesData:r})},this.readLocalFile=e=>new Promise((t,s)=>{const o=new FileReader;o.addEventListener("error",e=>{s(e)}),o.addEventListener("load",s=>{const o=e,a=o.name,i=this.state.uploadedFilesData;i[a]||(i[a]={}),i[a].event=s,this.setState({uploadedFilesData:i}),this.handleUpload(o),t(s)}),o.readAsDataURL(e)}),this.updateProgress=(e,t)=>{if(e.lengthComputable){const s=t.name,o=this.state.uploadedFilesData,a=e.loaded/e.total*100;0,o[s].uploadMeta.progress=a,this.setState({uploadedFilesData:o})}},this.uploadDone=(e,t)=>{const s=t.name,o=this.state.uploadedFilesData,a=o[s].uploadMeta;if(a&&4===a.xhr.readyState&&201===a.xhr.status){const e=JSON.parse(a.xhr.responseText).data.files;for(let t=0;t<e.length;t+=1){this.addFileToUpload(e[t]),this.fileInput.value=""}}},this.state={drag:!1,loadingProgress:0,uploadedFiles:[],uploadedFilesData:{}}}addFileToUpload(e){const{uploadedFilesData:t}=this.state,{handleAddImage:s,uploadStatus:o=(()=>{})}=this.props;delete t[e.name],this.setState({uploadedFilesData:t}),s(e),o(!0)}componentDidMount(){const e=this.dropRef.current;e.addEventListener("dragenter",this.handleDragIn),e.addEventListener("dragleave",this.handleDragOut),e.addEventListener("dragover",this.handleDrag),e.addEventListener("drop",this.handleDrop);const{autoOpen:t}=this.props;t&&setTimeout(()=>{this.fileInput.click()},10)}componentWillUnmount(){const e=this.dropRef.current;e.removeEventListener("dragenter",this.handleDragIn),e.removeEventListener("dragleave",this.handleDragOut),e.removeEventListener("dragover",this.handleDrag),e.removeEventListener("drop",this.handleDrop)}render(){const{uploadedFilesData:e}=this.state;return Object(a.h)("div",{style:{position:"relative"},ref:this.dropRef},this.state.drag&&Object(a.h)("div",{style:{border:"dashed grey 4px",backgroundColor:"rgba(255,255,255,.8)",position:"absolute",top:0,bottom:0,left:0,right:0,zIndex:9999}},Object(a.h)("div",{style:{position:"absolute",top:"50%",right:0,left:0,textAlign:"center",color:"grey",fontSize:36}},Object(a.h)("div",null,Object(a.h)(n.c,{id:"imageupload.drag-files-here"},"drop your files here :)")))),Object(a.h)("div",null,Object(a.h)("input",{class:"btn btn-info col-sm-12",multiple:!0,type:"file",id:"image-file",onchange:this.handleAddFiles,ref:e=>{this.fileInput=e}})),Object(a.h)("div",null,Object.keys(e).length>0?Object(a.h)("h3",null,Object(a.h)(n.c,{id:"imageupload.upload-images"},"Uploaded images")):"",Object(a.h)("ul",{class:"list-group"},Object.keys(e).map(t=>{const{uploadMeta:s={}}=e[t],o=t.match(/(jpg|jpeg|png|gif|heic|heif|svg|webp|tif)/i);return Object(a.h)("li",{class:"list-group-item list-group-item-action flex-column align-items-start"},Object(a.h)("div",{class:"d-flex w-100 justify-content-between"},o&&Object(a.h)("img",{class:"img-fluid mr-3",src:e[t].event.target.result,style:"max-height: 50px;"}),Object(a.h)("small",null,e[t].event.uploadDone),Object(a.h)(n.c,{id:"imageupload.uploading-image"},"Laster opp bilde..."),Object(a.h)("small",null,l.a.formatBytes(e[t].event.total,2))),Object(a.h)("div",{class:"progress mt-1",style:"height: 4px;"},Object(a.h)("div",{class:"progress-bar progress-bar-striped progress-bar-animated bg-success",role:"progressbar",style:`width: ${s.progress}%; height: 4px;`,"aria-valuenow":s.progress,"aria-valuemin":"0","aria-valuemax":"100"})))}))),this.props.children)}})||o;t.a=r}}]);
//# sourceMappingURL=14.chunk.c8d0d.esm.js.map