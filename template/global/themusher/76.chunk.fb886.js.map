{"version":3,"sources":["webpack:///./components/data/distance.js","webpack:///./components/style.css","webpack:///./components/data/temperature.js","webpack:///./components/modal/index.js","webpack:///./components/data/weight.js","webpack:///./components/data/elevation.js","webpack:///./components/data/speed.js","webpack:///./routes/tracks/public.js"],"names":["displayDistance","distance","util","format","Distance","observer","render","this","props","value","smallUnit","stores","userStore","user","settings","imperial","kmToMiles","class","Component","module","exports","Temperature","celciusToFahrenheit","Modal","toggleDate","setState","showDate","state","touchStart","e","stopPropagation","startY","touches","pageY","touchEnd","undefined","readyToRefresh","touchMove","appContainer","scrollTop","refreshing","close","image","imagexxl","thumb","name","title","date","style","onClick","formatDate","locale","formatDistance","Date","src","onTouchstart","onTouchend","onTouchmove","ref","c","target","rel","href","download","id","Weight","kgToPounds","Elevation","meterToFeet","Speed","kmtToMph","MARGIN_TOP","mu","marginTop","MARGIN_BOTTOM","marginBottom","SUB_MENU_MARGIN_TOP","subMenuMarginTop","initialState","isLoading","submenu","Tracks","chooseSubmenu","parentElement","dataset","menu","loadTracks","trackStore","load","addData","componentDidMount","scrolledDown","searchText","publicTracks","darkmode","appState","filterBy","gpx","fields","total","length","type","placeholder","onInput","linkState","data-menu","filter","RegExp","test","map","track","showUser","isPublic"],"mappings":"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","file":"76.chunk.fb886.js","sourcesContent":["import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport { Text, Localizer } from 'preact-i18n';\n\nimport mu from '../../lib/musher-util';\n\nfunction displayDistance(distance) {\n\tif (distance < 5) {\n\t\treturn util.format(distance, 2);\n\t}\n\tif (distance < 10) {\n\t\treturn util.format(distance, 1);\n\t}\n\treturn util.format(distance, 1);\n}\n\nfunction kmToMiles(value) {\n    return 0.621371 * value;\n}\n\n@observer\nclass Distance extends Component {\n    render() {\n\t\tconst { value = 0, smallUnit } = this.props;\n\t\tconst { userStore } = this.props.stores;\n\t\tconst { user } = userStore;\n\t\tconst { settings = {} } = user;\n\n        if (settings.imperial) {\n            return (<>\n                <nobr>\n\t\t\t\t\t{displayDistance(kmToMiles(value))} {smallUnit ? <><small><small><small class='ml-0 text-muted'>mi</small></small></small></> : <>mi</>}\n\t\t\t\t</nobr>\n            </>);\n        }\n\n\t\treturn (<>\n\t\t\t<nobr>\n\t            {displayDistance(value)} {smallUnit ? <><small><small><small class='ml-0 text-muted'>km</small></small></small></> : <>km</>}\n\t\t\t</nobr>\n\t    </>);\n    }\n}\n\nexport default Distance;\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"hoverelementonly\":\"hoverelementonly__1mJGJ\",\"hoverElement\":\"hoverElement__axh3O\",\"hoverelementhide\":\"hoverelementhide__1k_qH\",\"progress-bar-vertical\":\"progress-bar-vertical__1B2sC\",\"progress-bar\":\"progress-bar__pnsVj\",\"dragged\":\"dragged__QXO46\",\"over\":\"over__1re3x\",\"list\":\"list__q_emZ\"};","import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport { Text, Localizer } from 'preact-i18n';\n\nimport mu from '../../lib/musher-util';\n\nfunction celciusToFahrenheit(value) {\n    return ((value * 9/5) + 32);\n}\n\n@observer\nclass Temperature extends Component {\n    render() {\n\t\tconst { value = 0, smallUnit } = this.props;\n\t\tconst { userStore } = this.props.stores;\n\t\tconst { user } = userStore;\n\t\tconst { settings = {} } = user;\n\n        if (settings.imperial) {\n            return (<>\n                <nobr>\n                    {util.format(celciusToFahrenheit(value), 0)}°F\n                </nobr>\n            </>);\n        }\n\n\t\treturn (<>\n            <nobr>\n                {util.format(value, 1)}°C\n            </nobr>\n        </>);\n    }\n}\n\nexport default Temperature;\n","import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport { Text, Localizer, withText } from 'preact-i18n';\n\n@observer\nclass Modal extends Component {\n    toggleDate = () => {\n        const { showDate } = this.state;\n        this.setState({ showDate: !showDate });\n    }\n\n    touchStart = (e) => {\n        e.stopPropagation();\n        this.setState({\n            startY: e.touches[0].pageY,\n        })\n    }\n\n    touchEnd = (e) => {\n        e.stopPropagation();\n        this.setState({\n            startY: undefined,\n            readyToRefresh: false,\n        })\n    }\n\n    touchMove = (e) => {\n        e.stopPropagation();\n        const { close } = this.props;\n        const { startY, refreshing } = this.state;\n        const scrollDistance = 30;\n        const y = e.touches[0].pageY;\n        if (this.appContainer) {\n            const { scrollTop } = this.appContainer;\n            if (scrollTop === 0 && y > startY + scrollDistance && !refreshing) {\n                close();\n            }\n        }\n    }\n\n    render() {\n        const { showDate } = this.state;\n        const { image, imagexxl, close, thumb, name, title, date } = this.props;\n        return (\n            <div class='fixed-top bg-dark text-center pt-2' style='width: 100vw; height: 100vh;'>\n                <button class='btn btn-secondary float-right mr-2' onClick={close}>X</button>\n\n                    <div class='d-flex mb-2 px-2'>\n                        {/* {JSON.stringify(dog, null, 4)} */}\n                        {thumb && <div class={`text-center border rounded-circle imageRounded imageRoundedSmall`} style={thumb ? `background-image: url(\"${thumb}\");` : ''}>\n                            &nbsp;\n                        </div>}\n                        <div class='flex-grow-1 pl-3 pr-2 text-left' style='line-height: 1.3em;'>\n                            {name && <strong class='mr-2'>{name}:</strong>}\n                            {title}<br />\n                            <small class='text-muted'>\n                                {date && <small onClick={this.toggleDate}>\n                                    {showDate ? util.formatDate(date, { locale: 'no-NB' }) : util.formatDistance(date, new Date(), { locale: 'no-NB' })}\n                                </small>}\n                            </small>\n                        </div>\n                    </div>\n\n\n                <img src={image}\n                    class='img-fluid align-middle mt-2 mb-2'\n                    onClick={close}\n                    onTouchstart={this.touchStart}\n                    onTouchend={this.touchEnd}\n                    onTouchmove={this.touchMove}\n                    ref={c => this.appContainer = c}\n                />\n\n                <a target='_blank' rel='noopener noreferrer' href={imagexxl || image} download={imagexxl || image}>\n                    <i class='fas fa-download' /> <Text id='modal.download'>Last ned bildet</Text>\n                </a>\n            </div>\n        );\n    }\n}\n\nexport default Modal;\n","import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport { Text, Localizer } from 'preact-i18n';\n\nimport mu from '../../lib/musher-util';\n\nfunction kgToPounds(value) {\n    return 2.20462 * value;\n}\n\n@observer\nclass Weight extends Component {\n    render() {\n\t\tconst { value = 0, smallUnit } = this.props;\n\t\tconst { userStore } = this.props.stores;\n\t\tconst { user } = userStore;\n\t\tconst { settings = {} } = user;\n\n        if (settings.imperial) {\n            return (<>\n                <nobr>\n                    {util.format(kgToPounds(value), 0)} lb\n                </nobr>\n            </>);\n        }\n\n\t\treturn (<>\n            <nobr>\n                {util.format(value, 0)} kg\n            </nobr>\n        </>);\n    }\n}\n\nexport default Weight;\n","import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport { Text, Localizer } from 'preact-i18n';\n\nimport mu from '../../lib/musher-util';\n\nfunction meterToFeet(value) {\n    return 3.28084 * value;\n}\n\n@observer\nclass Elevation extends Component {\n    render() {\n\t\tconst { value = 0, smallUnit } = this.props;\n\t\tconst { userStore } = this.props.stores;\n\t\tconst { user } = userStore;\n\t\tconst { settings = {} } = user;\n\n        if (settings.imperial) {\n            return (<>\n                <nobr>\n                    {util.format(meterToFeet(value), 0)} {smallUnit ? <><small><small><small class='ml-0 text-muted'>ft</small></small></small></> : <>ft</>}\n                </nobr>\n            </>);\n        }\n\n\t\treturn (<>\n            <nobr>\n                {util.format(value, 0)} {smallUnit ? <><small><small><small class='ml-0 text-muted'>m</small></small></small></> : <>m</>}\n            </nobr>\n        </>);\n    }\n}\n\nexport default Elevation;\n","import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport { Text, Localizer } from 'preact-i18n';\n\nimport mu from '../../lib/musher-util';\n\nfunction kmtToMph(value) {\n    return 0.621371 * value;\n}\n\n@observer\nclass Speed extends Component {\n    render() {\n\t\tconst { value = 0, smallUnit } = this.props;\n\t\tconst { userStore } = this.props.stores;\n\t\tconst { user } = userStore;\n\t\tconst { settings = {} } = user;\n\n        if (settings.imperial) {\n            return (<>\n                <nobr>\n                    {util.format(kmtToMph(value), 1)} {smallUnit ? <><small><small><small class='ml-0 text-muted'><Text id='workouts.mph'>mph</Text></small></small></small></> : <><Text id='workouts.mph'>mph</Text></>}\n                </nobr>\n            </>);\n        }\n\n\t\treturn (<>\n            <nobr>\n                {util.format(value, 1)} {smallUnit ? <><small><small><small class='ml-0 text-muted'><Text id='workouts.kmt'>km/t</Text></small></small></small></> : <><Text id='workouts.kmt'>km/t</Text></>}\n            </nobr>\n        </>);\n    }\n}\n\nexport default Speed;\n","import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport { Text, Localizer } from 'preact-i18n';\nimport linkState from 'linkstate';\n\nimport Track from '../../components/track';\n\nimport mu from '../../lib/musher-util';\nconst MARGIN_TOP = mu.marginTop(true);\nconst MARGIN_BOTTOM = mu.marginBottom();\nconst SUB_MENU_MARGIN_TOP = mu.subMenuMarginTop();\n\nconst initialState = {\n\tisLoading: false,\n\tsubmenu: 'all',\n};\n\n@observer\nclass Tracks extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            ...initialState,\n        };\n    }\n\n\tasync loadTracks() {\n\t\tthis.setState({ isLoading: true });\n\t\tconst { trackStore } = this.props.stores;\n\t\tawait trackStore.load({ addData: ['publicTracks'] });\n\t\tthis.setState({ isLoading: false });\n\t}\n\n\tchooseSubmenu = (e) => {\n\t\tconst submenu = e.target.parentElement.dataset.menu || e.target.dataset.menu;\n\t\tthis.setState({ submenu });\n\t}\n\n\tcomponentDidMount() {\n\t\tthis.loadTracks();\n\t}\n\n\trender() {\n        const { scrolledDown } = this.props;\n\t\tconst { isLoading, submenu, searchText } = this.state;\n\t\tconst { trackStore, appState } = this.props.stores;\n\t\tconst { publicTracks } = trackStore;\n\t\tconst { darkmode } = appState;\n\t\tconst filterBy = submenu === 'mapOnly' ? e => e.gpx : () => true;\n\t\tconst filterBySearch = e => searchText ? new RegExp(searchText, 'i').test(e.name) : true;\n\n\t\treturn (\n\t\t\t<div class='container-fluid' style={`margin-bottom: ${MARGIN_BOTTOM}; margin-top: ${MARGIN_TOP};`}>\n\t\t\t\t<div class='row fixed-top pt-2' style={`margin-top: ${scrolledDown > 0 ? 0 : SUB_MENU_MARGIN_TOP}; background-color: ${darkmode ? '#191d21' : '#f8f9fa'}; transition: all 0.3s ease-in-out;`}>\n\t\t\t\t\t<div class='col text-center subtopmenu'>\n\t\t\t\t\t\t<a href='/tracks/' class='text-secondary stretched-link'><nobr><i class='fas fa-map-marked' /> <Text id='tracks.your-tracks'>Dine runder</Text></nobr></a>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class='col text-center border-bottom border-primary subtopmenu'>\n\t\t\t\t\t\t<a href='/tracks/public' class='text-primary stretched-link'><nobr><i class='fas fa-map-marked' /> <Text id='tracks.public-tracks'>Offentlige runder</Text></nobr></a>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\n\t\t\t\t<div class='row'>\n\t\t\t\t\t<div class='col-12'>\n\t\t\t\t\t\t<div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 px-0'>\n\t\t\t\t\t\t\t<h5><Text id='tracks.all-public-tracks' fields={{ total: publicTracks.length }}>Offentlige treningsrunder - {publicTracks.length} stk</Text></h5>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 my-3'>\n\t\t\t\t\t\t\t<div class='d-flex justify-content-center py-3'>\n\t\t\t\t\t\t\t\t<Localizer>\n\t\t\t\t\t\t\t\t\t<input class='form-control form-control mr-2' type='search' placeholder={<Text id='header.search-placeholder'>Søk etter det meste...</Text>}\n\t\t\t\t\t\t\t\t\t\tvalue={searchText}\n\t\t\t\t\t\t\t\t\t\tonInput={linkState(this, 'searchText')}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</Localizer>\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t<div class='row'>\n\t\t\t\t\t\t\t\t<div class='w-100 overflow-hidden'>\n\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\tclass='d-flex flex-row flex-nowrap pb-2 px-1'\n\t\t\t\t\t\t\t\t\t\tstyle='overflow: auto; scroll-snap-type: x mandatory;'\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<div class='col px-0 pt-2'>\n\t\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\t\tclass={`btn btn-block rounded-pill-left rounded-none ${submenu === 'all' ? 'btn-primary' : 'btn-outline-primary'} text-nowrap`}\n\t\t\t\t\t\t\t\t\t\t\t\tstyle='text-overflow: ellipsis; overflow: hidden;'\n\t\t\t\t\t\t\t\t\t\t\t\tdata-menu='all'\n\t\t\t\t\t\t\t\t\t\t\t\tonClick={this.chooseSubmenu}\n\t\t\t\t\t\t\t\t\t\t\t><i class='fas fa-chart-area' /> <Text id='tracks.filter-all'>Vis alle</Text></button>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div class='col px-0 pt-2'>\n\t\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\t\tclass={`btn btn-block rounded-pill-right rounded-none ${submenu === 'mapOnly' ? 'btn-primary' : 'btn-outline-primary'} text-nowrap`}\n\t\t\t\t\t\t\t\t\t\t\t\tstyle='text-overflow: ellipsis; overflow: hidden;'\n\t\t\t\t\t\t\t\t\t\t\t\tdata-menu='mapOnly'\n\t\t\t\t\t\t\t\t\t\t\t\tonClick={this.chooseSubmenu}\n\t\t\t\t\t\t\t\t\t\t\t><i class='fas fa-tachometer-alt' /> <Text id='tracks.filter-only-map'>Vis bare de med kart</Text></button>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t{!isLoading && publicTracks && publicTracks.length === 0 && (\n\t\t\t\t\t\t\t<div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 text-muted'>\n\t\t\t\t\t\t\t\t<div class='text-center mb-5'>\n\t\t\t\t\t\t\t\t\t<div class='display-1'>\n\t\t\t\t\t\t\t\t\t\t<i class='fas fa-map-marked' />\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<h5>\n\t\t\t\t\t\t\t\t\t\t<Text id='tracks.no-tracks-yet'>Ingen runder er registrert ennå.</Text>\n\t\t\t\t\t\t\t\t\t</h5>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<p class='text-center'>\n\t\t\t\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t\t\t\t<Text id='tracks.no-tracks-info-1'>Du har mulighet til å laste opp GPX-filer fra rundene dine.</Text>\n\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t\t\t\t<Text id='tracks.no-tracks-info-2'>Det finnes mange apper som lar deg lage GPX-filer, men vi anbefaler</Text>:\n\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\tViewRanger for <a href='https://apps.apple.com/gb/app/viewranger-hike-ride-or-walk/id404581674'>iOS</a> and\n\t\t\t\t\t\t\t\t\t&nbsp;<a href='https://play.google.com/store/apps/details?id=com.augmentra.viewranger.android&hl=en'>Android</a>.\n\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t<Text id='tracks.howto-title'>Slik kommer du i gang</Text>:\n\t\t\t\t\t\t\t\t<ol>\n\t\t\t\t\t\t\t\t\t<li><Text id='tracks.howto-1'>Trykk på knappen \"Legg til runde\" rett nedenfor.</Text></li>\n\t\t\t\t\t\t\t\t</ol>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t)}\n\n\t\t\t\t\t\t{publicTracks && publicTracks.filter(filterBy).filter(filterBySearch).map(track => (\n\t\t\t\t\t\t\t<Track stores={this.props.stores} track={track} showUser={true} isPublic={true} />\n\t\t\t\t\t\t))}\n\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nexport default Tracks;\n"],"sourceRoot":""}