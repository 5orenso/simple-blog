(window.webpackJsonp=window.webpackJsonp||[]).push([[89,96],{"8as4":function(e,t,s){"use strict";s.r(t),function(e){var a,i=s("hosL"),l=(s("Utv1"),s("/eY4")),r=(s("Y3FI"),s("go65"),s("OhSV"),s("fh8t")),c=s.n(r),o=s("f0JH"),n=s("ZOvn");let d=Object(l.a)(a=class extends i.Component{constructor(e){super(e),this.scrollImages=e=>{const{scrollLeft:t,clientWidth:s}=e.target,a=t/s,i=Math.round(a),l=Math.abs(i-a);(Number.isInteger(a)||l<.1)&&this.setState({imageIdx:i})},this.state={imageIdx:0}}async loadNews(e=this.props){const{newsStore:t,userStore:s}=e.stores,{isAdmin:a}=s,i={tag:"wizardStartup"};a&&(i.showall=1),await t.load({query:i})}componentDidMount(){this.loadNews()}render(){const{imageIdx:t}=this.state,{appState:s}=this.props.stores,{language:a="en"}=s,{newsStore:l}=this.props.stores,{newsList:r}=l;return Object(i.h)("div",{class:"container-fluid"},Object(i.h)("div",{class:"row"},Object(i.h)("div",{class:"fixed-bottom",style:"height: 90vh;"},Object(i.h)("div",{class:"d-flex flex-row flex-nowrap no-scrollbar h-100",style:"overflow: auto; scroll-snap-type: x mandatory;",onScroll:this.scrollImages},r.map(t=>{const s=n.a.replaceFieldTags(t.ingress);return Object(i.h)(e,null,Object(i.h)("div",{class:"col-12 clearfix p-0 position-relative"},Object(i.h)("div",{class:"w-100 h-100 text-center",style:"\n                                                flex-wrap: wrap;\n                                                overflow-y: hidden;\n                                                scroll-snap-align: start;\n                                            ",onTouchstart:e=>{e.stopPropagation()},onTouchend:e=>{e.stopPropagation()},onTouchmove:e=>{e.stopPropagation()}},Object(i.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-md-6 offset-md-3 col-lg-4 offset-lg-4 overflow-hidden",style:"height: 25%;"},t.images&&t.images[0]&&Object(i.h)("img",{src:t.images[0].s3LargeLink,class:"img-fluid "})),Object(i.h)("div",{class:"bg-white text-dark",style:"height: 75%;"},Object(i.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-md-6 offset-md-3 col-lg-4 offset-lg-4 pt-5"},Object(i.h)("h3",null,t.title),Object(i.h)(c.a,{markdown:n.a.replaceImages(t.ingress,t.images,a,!1),markdownOpts:n.a.getMarkdownOptions()}),Object(i.h)("div",{class:"text-left"},s&&s.map(t=>Object(i.h)(e,null,Object(i.h)(o.default,{stores:this.props.stores,field:t.name,type:t.type,title:t.title,help:t.help})))),Object(i.h)("small",null,Object(i.h)(c.a,{markdown:n.a.replaceImages(t.body,t.images,a,!1),markdownOpts:n.a.getMarkdownOptions()})))))))})),Object(i.h)("div",{class:"w-100 text-center position-absolute bg-white text-dark",style:"bottom: 20px; right: 0px;"},Object(i.h)("small",null,Object(i.h)("small",null,r.map((s,a)=>Object(i.h)(e,null,Object(i.h)("i",{class:(a===t?"fas":"far")+" fa-circle mr-1"})))))))))}})||a;t.default=d}.call(this,s("hosL").Fragment)},TiXY:function(e,t,s){"use strict";var a,i=s("hosL"),l=s("/eY4"),r=(s("cneo"),s("Utv1"),s("OhSV")),c=s("u2zT");let o=Object(l.a)(a=class extends i.Component{constructor(e){super(e),this.handleAddImage=e=>{const{updateField:t,object:s,field:a}=this.props;t({id:s.id,field:a,value:e})},this.state={files:[]}}render(){const{uploadStatus:e=(()=>{}),before:t=(()=>{}),after:s=(()=>{}),autoOpen:a=!1}=this.props;return Object(i.h)("div",{class:"row"},Object(i.h)("div",{class:"col-12"},Object(i.h)(r.c,{id:"form.files.upload-file"},"Last opp fil"),":",Object(i.h)("br",null),Object(i.h)(c.a,{handleAddImage:this.handleAddImage,apiUrl:"/api/fileupload",uploadStatus:e,before:t,after:s,autoOpen:a},Object(i.h)("div",{style:{height:30,width:"100%"}}))))}})||a;t.a=o},f0JH:function(e,t,s){"use strict";s.r(t),function(e){function a(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,a)}return s}function i(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}var l,r,c=s("hosL"),o=(s("Utv1"),s("/eY4")),n=(s("Y3FI"),s("OhSV")),d=s("ZOvn"),h=s("om2D"),p=s("TiXY");s("HqZR");const u=d.a.marginTop(!1),b=d.a.marginTopBack(!1),m=d.a.marginBottom(),f={};let O=Object(o.a)(l=class extends c.Component{constructor(...e){var t;super(...e),t=this,this.handleImageErrored=e=>{const t=e.target;t.onerror=null,setTimeout(()=>{t.src+="?"+new Date},1e3)},this.removeImage=async function(e){const{userStore:s}=t.props.stores,{user:a}=t.props;s.removeImage({id:a.id,name:e.target.parentElement.dataset.name||e.target.dataset.name})},this.removeMainImage=()=>{const{user:e,field:t,updateField:s}=this.props;s({id:e.id,field:t,value:{}})}}render(){const{saved:e,user:t,type:s="text",field:a,title:i,icon:l,help:r,onInput:o,updateField:d,skipImageList:u}=this.props,b=t[a],m=e=>!t.image||e.md5!==t.image.md5;return"image"===s?Object(c.h)("div",{class:"form-group "+(e[`${a}.${t.id}`]?"is-valid":"")},Object(c.h)("label",{for:a+"Input"},l&&Object(c.h)("i",{class:l+" text-muted"})," ",i),!u&&Object(c.h)("div",{class:"container-fluid"},Object(c.h)("div",{class:"row"},t.image&&t.image.s3SmallLink&&Object(c.h)("div",{class:"col-3 p-1"},Object(c.h)("img",{src:t.image.s3SmallLink,class:"img-fluid border rounded-lg",onError:this.handleImageErrored}),Object(c.h)("button",{class:"btn btn-sm btn-link",onClick:this.removeMainImage,"data-name":t.image.name},Object(c.h)("i",{class:"fas fa-trash"})," Del"),Object(c.h)("span",{class:"badge badge-success"},"Main")),t.images&&t.images.filter(m).map(e=>Object(c.h)("div",{class:"col-3 p-1"},Object(c.h)("img",{src:e.s3SmallLink,class:"img-fluid",onError:this.handleImageErrored}),Object(c.h)("button",{class:"btn btn-sm btn-link",onClick:this.removeImage,"data-name":e.name},Object(c.h)("i",{class:"fas fa-trash"})," Del"))))),Object(c.h)(h.a,{saved:e,object:t,field:a,updateField:d,autoOpen:!1}),e[`${a}.${t.id}`]?Object(c.h)("div",{class:"valid-feedback",style:"display: block;"},Object(c.h)(n.c,{id:"users.changes-saved"},"Endringene er lagret")):Object(c.h)("small",{id:a+"Help",class:"form-text text-muted"},r)):"file"===s?Object(c.h)("div",{class:"form-group "+(e[`${a}.${t.id}`]?"is-valid":"")},Object(c.h)("label",{for:a+"Input"},l&&Object(c.h)("i",{class:l+" text-muted"})," ",i),Object(c.h)(p.a,{saved:e,object:t,field:a,updateField:d}),e[`${a}.${t.id}`]?Object(c.h)("div",{class:"valid-feedback",style:"display: block;"},Object(c.h)(n.c,{id:"users.changes-saved"},"Endringene er lagret")):Object(c.h)("small",{id:a+"Help",class:"form-text text-muted"},r)):Object(c.h)("div",{class:"form-group "+(e[`${a}.${t.id}`]?"is-valid":"")},Object(c.h)("label",{for:a+"Input"},l&&Object(c.h)("i",{class:l+" text-muted"})," ",i),Object(c.h)("input",{type:"text",class:"form-control "+(e[`${a}.${t.id}`]?"is-valid":""),id:a+"Input","aria-describedby":a+"Help",value:b,"data-id":t.id,"data-field":a,onInput:o}),e[`${a}.${t.id}`]?Object(c.h)("div",{class:"valid-feedback",style:"display: block;"},Object(c.h)(n.c,{id:"users.changes-saved"},"Endringene er lagret")):Object(c.h)("small",{id:a+"Help",class:"form-text text-muted"},r))}})||l,j=Object(o.a)(r=class extends c.Component{constructor(e){var t;super(e),t=this,this.updateField=e=>{const{id:t,field:s,type:a,elementtype:i}=e.target.dataset,l=e.target.value;this.updateFieldValue({id:parseInt(t,10),field:s,value:l,type:a,elementtype:i})},this.updateFieldValue=({id:e,field:s,value:a,datatype:i,elementtype:l,skipTimer:r=!1})=>{const{userStore:c}=this.props.stores;let o=a,n=a;const{user:d}=c;"images"===s&&Array.isArray(d.images)&&Array.isArray(a)&&(n=[...d.images,...a]),"array"!==i||Array.isArray(a)||(o="number"===l?a.split(",").map(e=>parseFloat(e)||e):a.split(",")),c.updateField(e,s,n),r?this.doUpdateField(e,s,o):(clearTimeout(this.updateTimer[s]),this.updateTimer[s]=setTimeout((async function(){t.doUpdateField(e,s,o)}),500))},this.back=()=>{const{history:e}=this.props.stores;e.goBack()},this.state=function(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?a(Object(s),!0).forEach((function(t){i(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):a(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}({},f),this.updateTimer={}}async loadUser(){const{userStore:e}=this.props.stores;e.getInfo()}async doUpdateField(e,t,s){const{userStore:a}=this.props.stores;await a.saveField(e,t,s)}componentDidMount(){this.loadUser()}render(){const{userStore:t}=this.props.stores,{insertStatus:s,saved:a,user:i}=t,{email:l}=i,{field:r,title:o,help:d,icon:h,type:p}=this.props;return r?Object(c.h)(e,null,Object(c.h)(O,{saved:a,user:i,field:r,icon:h,type:p,stores:this.props.stores,title:o,help:d,onInput:this.updateField,updateField:this.updateFieldValue,skipImageList:!1})):Object(c.h)("div",{class:"container-fluid",style:`margin-bottom: ${m}; margin-top: ${u};`},Object(c.h)("button",{class:"btn btn-link pl-0 fixed-top text-primary",style:`top: ${b}; left: 5px; font-size: 35px; width: 45px;`,onClick:this.back},Object(c.h)("i",{class:"fas fa-arrow-circle-left"})),Object(c.h)("div",{class:"row"},Object(c.h)("div",{class:"offset-0 col-12 offset-sm-2 col-sm-8 offset-lg-4 col-lg-4",style:"padding-left: 35px;"},Object(c.h)("div",null,Object(c.h)("h5",null,Object(c.h)(n.c,{id:"users.edit"},"Endre"),": ",l),Object(c.h)(O,{saved:a,user:i,field:"username",icon:"fas fa-user",title:Object(c.h)(n.c,{id:"users.username"},"Brukernavn"),help:Object(c.h)(n.c,{id:"users.username-help"},"Ditt brukernavn pÃ¥ The Musher"),onInput:this.updateField}),Object(c.h)("div",{class:"row"},Object(c.h)("div",{class:"col-6"},Object(c.h)(O,{saved:a,user:i,field:"firstname",title:Object(c.h)(n.c,{id:"users.firstname"},"Fornavn"),help:Object(c.h)(n.c,{id:"users.firstname-help"},"Ditt fornavn"),onInput:this.updateField})),Object(c.h)("div",{class:"col-6"},Object(c.h)(O,{saved:a,user:i,field:"lastname",title:Object(c.h)(n.c,{id:"users.lastname"},"Etternavn"),help:Object(c.h)(n.c,{id:"users.lastname-help"},"Ditt etternavn"),onInput:this.updateField}))),Object(c.h)(O,{saved:a,user:i,field:"cellphone",icon:"fas fa-mobile",title:Object(c.h)(n.c,{id:"users.cellphone"},"Mobil"),help:Object(c.h)(n.c,{id:"users.cellphone-help"},"Ditt mobilnummer"),onInput:this.updateField}),Object(c.h)(O,{saved:a,user:i,field:"url",icon:"fas fa-link",title:Object(c.h)(n.c,{id:"users.url"},"Hjemmeside"),help:Object(c.h)(n.c,{id:"users.url-help"},"Din hjemmeside"),onInput:this.updateField}),Object(c.h)(O,{saved:a,user:i,field:"facebook",icon:"fab fa-facebook-square",title:Object(c.h)(n.c,{id:"users.facebook"},"Facebook"),help:Object(c.h)(n.c,{id:"users.facebook-help"},"Din Facebook profil"),onInput:this.updateField}),Object(c.h)(O,{saved:a,user:i,field:"instagram",icon:"fab fa-instagram",title:Object(c.h)(n.c,{id:"users.instagram"},"Instagram"),help:Object(c.h)(n.c,{id:"users.instagram-help"},"Din Instagram profil"),onInput:this.updateField}),Object(c.h)(O,{saved:a,user:i,field:"snapchat",icon:"fab fa-snapchat",title:Object(c.h)(n.c,{id:"users.snapchat"},"Snapchat"),help:Object(c.h)(n.c,{id:"users.snapchat-help"},"Din Snapchat profil"),onInput:this.updateField}),Object(c.h)(O,{saved:a,user:i,field:"image",icon:"fas fa-camera",type:"image",stores:this.props.stores,title:Object(c.h)(n.c,{id:"users.photos"},"Bilder"),help:Object(c.h)(n.c,{id:"users.photos-help"},"Bilder av deg."),onInput:this.updateField,updateField:this.updateFieldValue}))),s&&Object(c.h)("div",{class:"alert alert-success mt-4 col-12",role:"alert"},Object(c.h)(n.c,{id:"users.saved"},"Profilen er lagret."))))}})||r;t.default=j}.call(this,s("hosL").Fragment)}}]);
//# sourceMappingURL=89.chunk.772bb.esm.js.map