(window.webpackJsonp=window.webpackJsonp||[]).push([[44,5,11,80],{"+JSK":function(e,t,s){"use strict";(function(e){function n(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function a(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}var o,i=s("hosL"),r=s("Utv1"),c=s("/eY4"),l=s("OhSV"),d=s("ZOvn"),h={},u=Object(c.a)(o=function(t){function s(e){var s;return(s=t.call(this,e)||this).toggleLikes=function(){s.setState({showLikesList:!s.state.showLikesList})},s.state=function(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?n(Object(s),!0).forEach((function(t){a(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):n(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}({},h),s}var o,c;return c=t,(o=s).prototype=Object.create(c.prototype),o.prototype.constructor=o,o.__proto__=c,s.prototype.render=function(){var t=this.state.showLikesList,s=this.props.stores,n=s.storyStore,a=s.teamStore,o=s.workoutStore,c=s.raceStore,h=this.props,u=h.likes,b=h.comments,p=h.type,m=void 0===p?"story":p,f=h.onTeamClick,g=void 0===f?function(){}:f;return Object(i.h)(e,null,Object(i.h)("div",{class:"d-flex justify-content-between mb-2"},u&&u.length>0&&Object(i.h)(e,null,Object(i.h)("div",{class:"d-flex flex-row flex-nowrap position-relative mr-3",style:"overflow: auto;"},Object(i.h)("span",{class:"text-muted mr-2",onClick:this.toggleLikes},Object(i.h)("i",{class:"fas fa-thumbs-up text-primary"})," ",u.length),u.slice(0,1).map((function(t){var s,l,h;"story"===m?(s=n.findPublicUser(t.user),l=n.findPublicTeamByMembers(t.user)):"team"===m?(s=a.findPublicUser(t.user),l=a.findPublicTeamByMembers(t.user)):"workout"===m?(s=o.findPublicUser(t.user),l=o.findPublicTeamByMembers(t.user)):"race"===m&&(s=c.findPublicUser(t.user),l=c.findPublicTeamByMembers(t.user)),r.a.isArray(l)&&(h=l.find((function(e){return 1===e.public})));d.a.getImage({user:s,team:h,priority:"user"}),d.a.displayNameShort(s);var u=d.a.displayName(s);return Object(i.h)(e,null,Object(i.h)("span",{class:"font-weight-lighter"},h?Object(i.h)(e,null,Object(i.h)("a",{href:"/teams/public/"+h.uuidv4,title:h.name,onClick:function(e){return g(e,h.uuidv4)}},u)):Object(i.h)(e,null,u)))})),u.length>1&&Object(i.h)(e,null,Object(i.h)("span",{class:"text-muted font-weight-lighter ml-2",onClick:this.toggleLikes},Object(i.h)(l.c,{id:"likes-comments.and",fields:{total:u.length-1}},"and ",u.length-1," others."))))),b&&b.length>0&&Object(i.h)("span",{class:"float-right text-muted"},Object(i.h)("i",{class:"fas fa-comment text-primary"})," ",b.length)),t&&Object(i.h)("div",{class:"mt-3 mb-3"},u&&u.map((function(t){var s,l,h;"story"===m?(s=n.findPublicUser(t.user),l=n.findPublicTeamByMembers(t.user)):"team"===m?(s=a.findPublicUser(t.user),l=a.findPublicTeamByMembers(t.user)):"workout"===m?(s=o.findPublicUser(t.user),l=o.findPublicTeamByMembers(t.user)):"race"===m&&(s=c.findPublicUser(t.user),l=c.findPublicTeamByMembers(t.user)),r.a.isArray(l)&&(h=l.find((function(e){return 1===e.public})));var u=d.a.getImage({user:s,team:h,priority:"user"}),b=d.a.displayNameShort(s),p=d.a.displayName(s,!0);return Object(i.h)("div",{class:"d-flex flex-row position-relative font-weight-light mb-1"},h?Object(i.h)(e,null,Object(i.h)("a",{href:"/teams/public/"+h.uuidv4,title:h.name,onClick:function(e){return g(e,h.uuidv4)},class:"stretched-link"},Object(i.h)("div",{class:"text-center border rounded-circle imageRounded imageRoundedThumb",style:u?'background-image: url("'+u+'"); background-size: cover;':""},!u&&Object(i.h)("div",{class:"",style:"font-size: 12px; padding-top: 3px;"},b))),Object(i.h)("div",{class:"ml-2 "},p," ",Object(i.h)("span",{class:"font-weight-lighter"},"- ",h.name))):Object(i.h)(e,null,Object(i.h)("div",{class:"text-center border rounded-circle imageRounded imageRoundedThumb",style:(u?'background-image: url("'+u+'"); background-size: cover;':"")+" opacity: 0.5;"},!u&&Object(i.h)("div",{class:"text-muted",style:"font-size: 12px; padding-top: 3px;"},b)),Object(i.h)("div",{class:"ml-2"},p)))}))))},s}(i.Component))||o;t.a=u}).call(this,s("hosL").Fragment)},"/DnB":function(e,t,s){"use strict";function n(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function a(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}var o,i=s("hosL"),r=(s("Utv1"),s("/eY4")),c={},l=Object(r.a)(o=function(e){function t(t){var s;return(s=e.call(this,t)||this).state=function(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?n(Object(s),!0).forEach((function(t){a(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):n(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}({},c),s.container=null,s}var s,o;o=e,(s=t).prototype=Object.create(o.prototype),s.prototype.constructor=s,s.__proto__=o;var r=t.prototype;return r.componentDidMount=function(){var e=this.props,t=e.horizontal,s=e.vertical,n=void 0===s?"":s,a={behavior:"smooth"};t&&(a.inline=t),n&&(a.block=n),this.container.scrollIntoView(a)},r.render=function(){var e=this;return Object(i.h)("div",{ref:function(t){return e.container=t}}," ")},t}(i.Component))||o;t.a=l},"1OK2":function(e,t,s){"use strict";var n,a=s("hosL"),o=(s("Utv1"),s("/eY4"));Object(o.a)(n=function(e){function t(t){var s;(s=e.call(this,t)||this).touchStart=function(e){e.stopPropagation(),s.setState({startX:e.touches[0].pageX})},s.touchEnd=function(e){e.stopPropagation(),s.setState({startX:void 0,sliding:!1})},s.touchMove=function(e){if(e.stopPropagation(),s.state.totalImages>1){var t=s.state,n=t.startX,a=e.touches[0].pageX;t.sliding||(a>n+50?(s.setState({sliding:!0}),s.prevImage()):a<n-50&&(s.setState({sliding:!0}),s.nextImage()))}};var n=t.images,a=void 0===n?[]:n;return s.state={imageContainer:1,currentImage1:a[0]||{},currentImage2:{},currentIdx:0,totalImages:a.length||0,imageDots:[].concat(Array(a.length||0).fill(1).map((function(e,t){return e+t})))},s}var s,n;n=e,(s=t).prototype=Object.create(n.prototype),s.prototype.constructor=s,s.__proto__=n;var o=t.prototype;return o.nextImage=function(){var e,t=this.state,s=1===t.imageContainer?2:1,n=t.currentIdx+1;n>t.totalImages-1&&(n=0),this.setState(((e={})["currentImage"+s]=this.props.images[n],e.currentIdx=n,e.imageContainer=s,e))},o.prevImage=function(){var e,t=this.state,s=t.imageContainer,n=t.currentIdx-1;n<0&&(n=t.totalImages-1),this.setState(((e={})["currentImage"+(1===s?2:1)]=this.props.images[n],e.currentIdx=n,e.imageContainer=1===s?2:1,e))},o.componentWillReceiveProps=function(e){if(e.images!==this.props.images){var t=e.images,s=void 0===t?[]:t;this.setState({imageContainer:1,currentImage1:s.length>0?s[0]:{},currentImage2:{},currentIdx:0,totalImages:s.length||0,imageDots:[].concat(Array(s.length||0).fill(1).map((function(e,t){return e+t})))})}},o.render=function(){var e,t,s=this,n=this.state,o=n.currentImage1,i=n.currentImage2,r=n.imageContainer,c=n.totalImages,l=n.imageDots,d=n.currentIdx,h=this["image"+r],u=1===r?o:i;if(u.dimensions){var b=u.dimensions,p=b.width,m=b.height,f=b.orientation;f>4&&f<9?(e=p,t=m):(e=m,t=p)}var g=u.dimensions?t/e:h&&h.height?h.width/h.height:4/3;return c<=0?"":Object(a.h)("div",{class:"w-100"},Object(a.h)("div",{class:"border rounded position-relative w-100",style:"height: calc(85vw / "+g+"); overflow: hidden; transition: all .3s ease-in-out;",onTouchstart:this.touchStart,onTouchend:this.touchEnd,onTouchmove:this.touchMove},c>1&&Object(a.h)("span",{class:"position-absolute",style:"top:0px; right: 5px; z-index: 2000;"},Object(a.h)("small",null,d+1,"/",c)),o&&Object(a.h)("div",{class:"position-absolute",style:(1===r?"opacity: 1;":"opacity: 0;")+" transition: all .3s ease-in-out; top: 0; left: 0;"},Object(a.h)("img",{loading:"lazy",src:o.s3LargeLink,class:"img-fluid align-middle",ref:function(e){return s.image1=e}})),i&&Object(a.h)("div",{class:"position-absolute",style:(2===r?"opacity: 1;":"opacity: 0;")+" transition: all .3s ease-in-out; top: 0; left: 0;"},Object(a.h)("img",{loading:"lazy",src:i.s3LargeLink,class:"img-fluid align-middle",ref:function(e){return s.image2=e}}))),l.length>1&&Object(a.h)("div",{class:"w-100 text-center"},l.map((function(e){return Object(a.h)("span",{style:"color: "+(e===d+1?"#ffffff":"#808080")+";"},"•")}))))},t}(a.Component))},"4QWe":function(e,t,s){"use strict";(function(e){var n,a=s("hosL"),o=s("Utv1"),i=s("/eY4"),r=s("OhSV"),c=s("go65"),l=s("om2D"),d=s("ZOvn"),h=Object(i.a)(n=function(t){function s(e){var s;return(s=t.call(this,e)||this).beforeImagesUploaded=function(){s.setState({sendButtonEnabled:!1})},s.afterImagesUploaded=function(){s.setState({sendButtonEnabled:!0})},s.commentStory=function(){return new Promise((function(e,t){var n,a,o,i,r,c,l,h,u,b,p;return s.state.sendButtonEnabled?(o=void 0===(a=(n=s.props).callback)?function(){}:a,r=void 0===(i=n.inputRefObject)?{}:i,c=s.props.story,l=s.props.stores.storyStore,u=(h=s.state).comment,b=h.showAddImage,s.setState({sendButtonEnabled:!1}),Promise.resolve(l.commentStory({id:c.id,comment:u})).then((function(n){try{return(p=n)&&200===p.status&&(s.setState({comment:{body:"",images:[]}},(function(){d.a.resizeTextarea(r[c.id]),b&&s.addImage()})),o({story:c,response:p})),s.setState({sendButtonEnabled:!0}),e()}catch(e){return t(e)}}),t)):e(!1)}))},s.addImages=function(e){var t,n=s.state.comment;(t=n.images).push.apply(t,e.value),s.setState({comment:n})},s.addImage=function(){var e=s.state.showAddImage;s.setState({showAddImage:!(void 0!==e&&e)})},s.handleImageErrored=function(e){var t=e.target;t.onerror=null,setTimeout((function(){t.src+="?"+new Date}),1e3)},s.state={comment:{body:"",images:[]},showAddImage:!1,sendButtonEnabled:!0},s.inputRef={},s}var n,i;return i=t,(n=s).prototype=Object.create(i.prototype),n.prototype.constructor=n,n.__proto__=i,s.prototype.render=function(){var t=this,s=this.props,n=s.inputRef,i=s.story,h=this.state,u=h.comment,b=h.showAddImage,p=h.sendButtonEnabled,m=this.props.stores.userStore.user,f=void 0===m?{}:m,g=d.a.displayNameShort(f),O=(d.a.displayName(f),f.image||(f.images?f.images[0]:void 0));return Object(a.h)("div",null,Object(a.h)("div",{class:"d-flex mb-0 position-relative w-100"},Object(a.h)("div",{class:"text-center border rounded-circle imageRounded imageRoundedSmall",style:(O?"background-image: url('"+O.s3SmallLink+"'); background-size: cover;":"")+" border-width: 3px !important;"},!f.image&&Object(a.h)("span",{class:"font-weight-lighter",style:"font-size: 15px;"},g)),Object(a.h)("div",{class:"col pl-3",style:"line-height: 1.2em;"},Object(a.h)("div",{class:"d-flex bd-highlight"},Object(a.h)("div",{class:"p-0 w-100 bd-highlight"},Object(a.h)("label",{class:"sr-only",for:"inlineFormInput"},Object(a.h)(r.c,{id:"comments.comment"},"Kommentar")),Object(a.h)("div",{class:"border rounded rounded-lg position-relative"},Object(a.h)(r.b,null,Object(a.h)("textarea",{class:"form-control-plaintext px-2",type:"text",placeholder:Object(a.h)(r.c,{id:"comments.write-comment"},"Skriv en kommentar..."),onInput:Object(c.a)(this,"comment.body"),onKeyUp:d.a.resizeTextarea,onFocus:d.a.resizeTextarea,style:"height: 2.3em;",value:u.body,ref:n})),Object(a.h)("div",{class:"position-absolute",style:"top: 8px; right: 10px; font-size: 1.2em;"},Object(a.h)("i",{class:"fas fa-image pointerCursor","data-id":i.id,onClick:this.addImage})))),Object(a.h)("div",{class:"p-0 pl-2 flex-shrink-1 bd-highlight"},Object(a.h)("button",{type:"button",class:"btn btn-"+(p?"primary":"secondary")+" mb-2",disabled:!p,onClick:this.commentStory},Object(a.h)("i",{class:"fas fa-paper-plane"})))))),b&&Object(a.h)(e,null,Object(a.h)("div",{class:"col-12 text-center"},Object(a.h)("div",{class:"container-fluid"},Object(a.h)("div",{class:"row"},o.a.isArray(u.images)&&u.images.map((function(e){return Object(a.h)("div",{class:"col-3 p-1"},Object(a.h)("img",{src:e.s3SmallLink,class:"img-fluid",onError:t.handleImageErrored}),Object(a.h)("button",{class:"btn btn-sm btn-link",onClick:t.removeImage,"data-name":e.name},Object(a.h)("i",{class:"fas fa-trash"})," ",Object(a.h)(r.c,{id:"comments.remove-image"},"Remove")))})))),Object(a.h)(l.a,{object:u,updateField:this.addImages,before:this.beforeImagesUploaded,after:this.afterImagesUploaded,autoOpen:!0}))))},s}(a.Component))||n;t.a=h}).call(this,s("hosL").Fragment)},"5uob":function(e,t,s){"use strict";var n,a=s("hosL"),o=(s("Utv1"),s("/eY4")),i=s("OhSV"),r=s("go65"),c=(s("ETxl"),s("ZOvn")),l=Object(o.a)(n=function(e){function t(t){var s;return(s=e.call(this,t)||this).commentStory=function(){return new Promise((function(e,t){var n,a,o,i,r,l,d,h,u,b,p;return s.state.sendButtonEnabled?(o=void 0===(a=(n=s.props).callback)?function(){}:a,i=n.commentId,l=void 0===(r=n.inputRefObject)?{}:r,d=s.props.story,h=s.props.stores.storyStore,b=void 0===(u=s.state.comment)?"":u,s.setState({sendButtonEnabled:!1}),Promise.resolve(h.commentReplyStory({id:d.id,commentId:i,comment:b})).then((function(n){try{return(p=n)&&200===p.status&&(s.setState({comment:""},(function(){c.a.resizeTextarea(l[i])})),o({story:d,response:p,commentId:i})),s.setState({sendButtonEnabled:!0}),e()}catch(e){return t(e)}}),t)):e(!1)}))},s.state={sendButtonEnabled:!0},s.inputRef={},s}var s,n;n=e,(s=t).prototype=Object.create(n.prototype),s.prototype.constructor=s,s.__proto__=n;var o=t.prototype;return o.componentDidMount=function(){var e=this.props.initCall;(void 0===e?function(){}:e)()},o.render=function(){var e=this.props.inputRef,t=this.state,s=t.comment,n=t.sendButtonEnabled,o=this.props.stores.userStore.user,l=void 0===o?{}:o,d=c.a.displayNameShort(l),h=(c.a.displayName(l),l.image||(l.images?l.images[0]:void 0));return Object(a.h)("div",{class:"w-100"},Object(a.h)("div",{class:"d-flex mb-0 position-relative w-100"},Object(a.h)("div",{class:"text-center border rounded-circle imageRounded imageRoundedThumb",style:(h?"background-image: url('"+h.s3SmallLink+"'); background-size: cover;":"")+" border-width: 3px !important;"},!h&&Object(a.h)("span",{class:"font-weight-lighter",style:"font-size: 15px;"},d)),Object(a.h)("div",{class:"col pl-3",style:"line-height: 1.2em;"},Object(a.h)("div",{class:"d-flex bd-highlight"},Object(a.h)("div",{class:"p-0 w-100 bd-highlight"},Object(a.h)("label",{class:"sr-only",for:"inlineFormInput"},Object(a.h)(i.c,{id:"comments.comment"},"Kommentar")),Object(a.h)("div",{class:"border rounded rounded-lg position-relative"},Object(a.h)(i.b,null,Object(a.h)("textarea",{class:"form-control-plaintext px-2",type:"text",placeholder:Object(a.h)(i.c,{id:"comments.write-comment"},"Skriv en kommentar..."),onInput:Object(r.a)(this,"comment"),onKeyUp:c.a.resizeTextarea,style:"height: 2.3em;",value:s,ref:e})))),Object(a.h)("div",{class:"p-0 pl-2 flex-shrink-1 bd-highlight"},Object(a.h)("button",{type:"button",class:"btn btn-"+(n?"primary":"secondary")+" mb-2",disabled:!n,onClick:this.commentStory},Object(a.h)("i",{class:"fas fa-paper-plane"})))))))},t}(a.Component))||n;t.a=l},"68RK":function(e,t,s){"use strict";var n=s("ivZ3"),a=s("Utv1"),o=s("ZOvn"),i={adit:new n.Icon({iconUrl:"./assets/svg/adit.svg",iconSize:[30,30],iconAnchor:[10,30]}),airport:new n.Icon({iconUrl:"./assets/svg/airport.svg",iconSize:[30,30],iconAnchor:[10,30]}),analyse:new n.Icon({iconUrl:"./assets/svg/analyse.svg",iconSize:[30,30],iconAnchor:[10,30]}),archaeological:new n.Icon({iconUrl:"./assets/svg/archaeological.svg",iconSize:[30,30],iconAnchor:[10,30]}),architecture:new n.Icon({iconUrl:"./assets/svg/architecture.svg",iconSize:[30,30],iconAnchor:[10,30]}),arrow_up:new n.Icon({iconUrl:"./assets/svg/arrow_up.svg",iconSize:[30,30],iconAnchor:[10,30]}),arrow_up_double:new n.Icon({iconUrl:"./assets/svg/arrow_up_double.svg",iconSize:[30,30],iconAnchor:[10,30]}),atm:new n.Icon({iconUrl:"./assets/svg/atm.svg",iconSize:[30,30],iconAnchor:[10,30]}),avatar:new n.Icon({iconUrl:"./assets/svg/avatar.svg",iconSize:[30,30],iconAnchor:[10,30]}),bag:new n.Icon({iconUrl:"./assets/svg/bag.svg",iconSize:[30,30],iconAnchor:[10,30]}),bar:new n.Icon({iconUrl:"./assets/svg/bar.svg",iconSize:[30,30],iconAnchor:[10,30]}),barracks:new n.Icon({iconUrl:"./assets/svg/barracks.svg",iconSize:[30,30],iconAnchor:[10,30]}),battlefield:new n.Icon({iconUrl:"./assets/svg/battlefield.svg",iconSize:[30,30],iconAnchor:[10,30]}),beach:new n.Icon({iconUrl:"./assets/svg/beach.svg",iconSize:[30,30],iconAnchor:[10,30]}),bicycle:new n.Icon({iconUrl:"./assets/svg/bicycle.svg",iconSize:[30,30],iconAnchor:[10,30]}),boundary_stone:new n.Icon({iconUrl:"./assets/svg/boundary_stone.svg",iconSize:[30,30],iconAnchor:[10,30]}),buddhism:new n.Icon({iconUrl:"./assets/svg/buddhism.svg",iconSize:[30,30],iconAnchor:[10,30]}),building:new n.Icon({iconUrl:"./assets/svg/building.svg",iconSize:[30,30],iconAnchor:[10,30]}),burger:new n.Icon({iconUrl:"./assets/svg/burger.svg",iconSize:[30,30],iconAnchor:[10,30]}),bus:new n.Icon({iconUrl:"./assets/svg/bus.svg",iconSize:[30,30],iconAnchor:[10,30]}),bus_stop:new n.Icon({iconUrl:"./assets/svg/bus_stop.svg",iconSize:[30,30],iconAnchor:[10,30]}),cable_car:new n.Icon({iconUrl:"./assets/svg/cable_car.svg",iconSize:[30,30],iconAnchor:[10,30]}),camera:new n.Icon({iconUrl:"./assets/svg/camera.svg",iconSize:[30,30],iconAnchor:[10,30]}),camp_site:new n.Icon({iconUrl:"./assets/svg/camp_site.svg",iconSize:[30,30],iconAnchor:[10,30]}),car:new n.Icon({iconUrl:"./assets/svg/car.svg",iconSize:[30,30],iconAnchor:[10,30]}),caravan_site:new n.Icon({iconUrl:"./assets/svg/caravan_site.svg",iconSize:[30,30],iconAnchor:[10,30]}),cartography:new n.Icon({iconUrl:"./assets/svg/cartography.svg",iconSize:[30,30],iconAnchor:[10,30]}),cash:new n.Icon({iconUrl:"./assets/svg/cash.svg",iconSize:[30,30],iconAnchor:[10,30]}),castle:new n.Icon({iconUrl:"./assets/svg/castle.svg",iconSize:[30,30],iconAnchor:[10,30]}),castle_defensive:new n.Icon({iconUrl:"./assets/svg/castle_defensive.svg",iconSize:[30,30],iconAnchor:[10,30]}),cave_entrance:new n.Icon({iconUrl:"./assets/svg/cave_entrance.svg",iconSize:[30,30],iconAnchor:[10,30]}),cemetery:new n.Icon({iconUrl:"./assets/svg/cemetery.svg",iconSize:[30,30],iconAnchor:[10,30]}),chapel:new n.Icon({iconUrl:"./assets/svg/chapel.svg",iconSize:[30,30],iconAnchor:[10,30]}),christianism:new n.Icon({iconUrl:"./assets/svg/christianism.svg",iconSize:[30,30],iconAnchor:[10,30]}),cinema:new n.Icon({iconUrl:"./assets/svg/cinema.svg",iconSize:[30,30],iconAnchor:[10,30]}),cinema_alt:new n.Icon({iconUrl:"./assets/svg/cinema_alt.svg",iconSize:[30,30],iconAnchor:[10,30]}),city:new n.Icon({iconUrl:"./assets/svg/city.svg",iconSize:[30,30],iconAnchor:[10,30]}),cityhall:new n.Icon({iconUrl:"./assets/svg/cityhall.svg",iconSize:[30,30],iconAnchor:[10,30]}),clean:new n.Icon({iconUrl:"./assets/svg/clean.svg",iconSize:[30,30],iconAnchor:[10,30]}),compass:new n.Icon({iconUrl:"./assets/svg/compass.svg",iconSize:[30,30],iconAnchor:[10,30]}),compass_alt:new n.Icon({iconUrl:"./assets/svg/compass_alt.svg",iconSize:[30,30],iconAnchor:[10,30]}),construction:new n.Icon({iconUrl:"./assets/svg/construction.svg",iconSize:[30,30],iconAnchor:[10,30]}),contour:new n.Icon({iconUrl:"./assets/svg/contour.svg",iconSize:[30,30],iconAnchor:[10,30]}),court_house:new n.Icon({iconUrl:"./assets/svg/court_house.svg",iconSize:[30,30],iconAnchor:[10,30]}),crown:new n.Icon({iconUrl:"./assets/svg/crown.svg",iconSize:[30,30],iconAnchor:[10,30]}),crucifix:new n.Icon({iconUrl:"./assets/svg/crucifix.svg",iconSize:[30,30],iconAnchor:[10,30]}),data:new n.Icon({iconUrl:"./assets/svg/data.svg",iconSize:[30,30],iconAnchor:[10,30]}),database:new n.Icon({iconUrl:"./assets/svg/database.svg",iconSize:[30,30],iconAnchor:[10,30]}),dentist:new n.Icon({iconUrl:"./assets/svg/dentist.svg",iconSize:[30,30],iconAnchor:[10,30]}),disabled:new n.Icon({iconUrl:"./assets/svg/disabled.svg",iconSize:[30,30],iconAnchor:[10,30]}),dislike:new n.Icon({iconUrl:"./assets/svg/dislike.svg",iconSize:[30,30],iconAnchor:[10,30]}),download:new n.Icon({iconUrl:"./assets/svg/download.svg",iconSize:[30,30],iconAnchor:[10,30]}),drag_lift:new n.Icon({iconUrl:"./assets/svg/drag_lift.svg",iconSize:[30,30],iconAnchor:[10,30]}),drop:new n.Icon({iconUrl:"./assets/svg/drop.svg",iconSize:[30,30],iconAnchor:[10,30]}),eye:new n.Icon({iconUrl:"./assets/svg/eye.svg",iconSize:[30,30],iconAnchor:[10,30]}),facebook:new n.Icon({iconUrl:"./assets/svg/facebook.svg",iconSize:[30,30],iconAnchor:[10,30]}),fire:new n.Icon({iconUrl:"./assets/svg/fire.svg",iconSize:[30,30],iconAnchor:[10,30]}),fishing:new n.Icon({iconUrl:"./assets/svg/fishing.svg",iconSize:[30,30],iconAnchor:[10,30]}),flag:new n.Icon({iconUrl:"./assets/svg/flag.svg",iconSize:[30,30],iconAnchor:[10,30]}),forbidden:new n.Icon({iconUrl:"./assets/svg/forbidden.svg",iconSize:[30,30],iconAnchor:[10,30]}),fort:new n.Icon({iconUrl:"./assets/svg/fort.svg",iconSize:[30,30],iconAnchor:[10,30]}),fountain:new n.Icon({iconUrl:"./assets/svg/fountain.svg",iconSize:[30,30],iconAnchor:[10,30]}),fuel:new n.Icon({iconUrl:"./assets/svg/fuel.svg",iconSize:[30,30],iconAnchor:[10,30]}),fuel_alt:new n.Icon({iconUrl:"./assets/svg/fuel_alt.svg",iconSize:[30,30],iconAnchor:[10,30]}),gallery:new n.Icon({iconUrl:"./assets/svg/gallery.svg",iconSize:[30,30],iconAnchor:[10,30]}),gear:new n.Icon({iconUrl:"./assets/svg/gear.svg",iconSize:[30,30],iconAnchor:[10,30]}),github:new n.Icon({iconUrl:"./assets/svg/github.svg",iconSize:[30,30],iconAnchor:[10,30]}),go:new n.Icon({iconUrl:"./assets/svg/go.svg",iconSize:[30,30],iconAnchor:[10,30]}),golf:new n.Icon({iconUrl:"./assets/svg/golf.svg",iconSize:[30,30],iconAnchor:[10,30]}),heart:new n.Icon({iconUrl:"./assets/svg/heart.svg",iconSize:[30,30],iconAnchor:[10,30]}),helicopter:new n.Icon({iconUrl:"./assets/svg/helicopter.svg",iconSize:[30,30],iconAnchor:[10,30]}),home:new n.Icon({iconUrl:"./assets/svg/home.svg",iconSize:[30,30],iconAnchor:[10,30]}),hospital:new n.Icon({iconUrl:"./assets/svg/hospital.svg",iconSize:[30,30],iconAnchor:[10,30]}),hostel:new n.Icon({iconUrl:"./assets/svg/hostel.svg",iconSize:[30,30],iconAnchor:[10,30]}),hotel:new n.Icon({iconUrl:"./assets/svg/hotel.svg",iconSize:[30,30],iconAnchor:[10,30]}),hotel_alt:new n.Icon({iconUrl:"./assets/svg/hotel_alt.svg",iconSize:[30,30],iconAnchor:[10,30]}),ice_ring:new n.Icon({iconUrl:"./assets/svg/ice_ring.svg",iconSize:[30,30],iconAnchor:[10,30]}),information:new n.Icon({iconUrl:"./assets/svg/information.svg",iconSize:[30,30],iconAnchor:[10,30]}),internet:new n.Icon({iconUrl:"./assets/svg/internet.svg",iconSize:[30,30],iconAnchor:[10,30]}),invisible:new n.Icon({iconUrl:"./assets/svg/invisible.svg",iconSize:[30,30],iconAnchor:[10,30]}),islamism:new n.Icon({iconUrl:"./assets/svg/islamism.svg",iconSize:[30,30],iconAnchor:[10,30]}),island:new n.Icon({iconUrl:"./assets/svg/island.svg",iconSize:[30,30],iconAnchor:[10,30]}),judaism:new n.Icon({iconUrl:"./assets/svg/judaism.svg",iconSize:[30,30],iconAnchor:[10,30]}),laptop:new n.Icon({iconUrl:"./assets/svg/laptop.svg",iconSize:[30,30],iconAnchor:[10,30]}),library:new n.Icon({iconUrl:"./assets/svg/library.svg",iconSize:[30,30],iconAnchor:[10,30]}),lighthouse:new n.Icon({iconUrl:"./assets/svg/lighthouse.svg",iconSize:[30,30],iconAnchor:[10,30]}),like:new n.Icon({iconUrl:"./assets/svg/like.svg",iconSize:[30,30],iconAnchor:[10,30]}),linkedin:new n.Icon({iconUrl:"./assets/svg/linkedin.svg",iconSize:[30,30],iconAnchor:[10,30]}),lion:new n.Icon({iconUrl:"./assets/svg/lion.svg",iconSize:[30,30],iconAnchor:[10,30]}),lock:new n.Icon({iconUrl:"./assets/svg/lock.svg",iconSize:[30,30],iconAnchor:[10,30]}),magnifier:new n.Icon({iconUrl:"./assets/svg/magnifier.svg",iconSize:[30,30],iconAnchor:[10,30]}),mall:new n.Icon({iconUrl:"./assets/svg/mall.svg",iconSize:[30,30],iconAnchor:[10,30]}),map:new n.Icon({iconUrl:"./assets/svg/map.svg",iconSize:[30,30],iconAnchor:[10,30]}),mapkey:new n.Icon({iconUrl:"./assets/svg/mapkey.svg",iconSize:[30,30],iconAnchor:[10,30]}),mapshakers:new n.Icon({iconUrl:"./assets/svg/mapshakers.svg",iconSize:[30,30],iconAnchor:[10,30]}),marina:new n.Icon({iconUrl:"./assets/svg/marina.svg",iconSize:[30,30],iconAnchor:[10,30]}),marker:new n.Icon({iconUrl:"./assets/svg/marker.svg",iconSize:[30,30],iconAnchor:[10,30]}),market_place:new n.Icon({iconUrl:"./assets/svg/market_place.svg",iconSize:[30,30],iconAnchor:[10,30]}),mine:new n.Icon({iconUrl:"./assets/svg/mine.svg",iconSize:[30,30],iconAnchor:[10,30]}),monument:new n.Icon({iconUrl:"./assets/svg/monument.svg",iconSize:[30,30],iconAnchor:[10,30]}),mountain:new n.Icon({iconUrl:"./assets/svg/mountain.svg",iconSize:[30,30],iconAnchor:[10,30]}),museum:new n.Icon({iconUrl:"./assets/svg/museum.svg",iconSize:[30,30],iconAnchor:[10,30]}),music:new n.Icon({iconUrl:"./assets/svg/music.svg",iconSize:[30,30],iconAnchor:[10,30]}),nature:new n.Icon({iconUrl:"./assets/svg/nature.svg",iconSize:[30,30],iconAnchor:[10,30]}),nocamera:new n.Icon({iconUrl:"./assets/svg/nocamera.svg",iconSize:[30,30],iconAnchor:[10,30]}),nonsmoking:new n.Icon({iconUrl:"./assets/svg/nonsmoking.svg",iconSize:[30,30],iconAnchor:[10,30]}),north:new n.Icon({iconUrl:"./assets/svg/north.svg",iconSize:[30,30],iconAnchor:[10,30]}),north_alt:new n.Icon({iconUrl:"./assets/svg/north_alt.svg",iconSize:[30,30],iconAnchor:[10,30]}),north_alt_II:new n.Icon({iconUrl:"./assets/svg/north_alt_II.svg",iconSize:[30,30],iconAnchor:[10,30]}),north_alt_III:new n.Icon({iconUrl:"./assets/svg/north_alt_III.svg",iconSize:[30,30],iconAnchor:[10,30]}),oppositeway:new n.Icon({iconUrl:"./assets/svg/oppositeway.svg",iconSize:[30,30],iconAnchor:[10,30]}),parking:new n.Icon({iconUrl:"./assets/svg/parking.svg",iconSize:[30,30],iconAnchor:[10,30]}),pharmacy:new n.Icon({iconUrl:"./assets/svg/pharmacy.svg",iconSize:[30,30],iconAnchor:[10,30]}),picnic_site:new n.Icon({iconUrl:"./assets/svg/picnic_site.svg",iconSize:[30,30],iconAnchor:[10,30]}),pitch:new n.Icon({iconUrl:"./assets/svg/pitch.svg",iconSize:[30,30],iconAnchor:[10,30]}),playground:new n.Icon({iconUrl:"./assets/svg/playground.svg",iconSize:[30,30],iconAnchor:[10,30]}),playground_alt:new n.Icon({iconUrl:"./assets/svg/playground_alt.svg",iconSize:[30,30],iconAnchor:[10,30]}),police:new n.Icon({iconUrl:"./assets/svg/police.svg",iconSize:[30,30],iconAnchor:[10,30]}),post_office:new n.Icon({iconUrl:"./assets/svg/post_office.svg",iconSize:[30,30],iconAnchor:[10,30]}),pub:new n.Icon({iconUrl:"./assets/svg/pub.svg",iconSize:[30,30],iconAnchor:[10,30]}),restaurant:new n.Icon({iconUrl:"./assets/svg/restaurant.svg",iconSize:[30,30],iconAnchor:[10,30]}),rocks:new n.Icon({iconUrl:"./assets/svg/rocks.svg",iconSize:[30,30],iconAnchor:[10,30]}),ruins:new n.Icon({iconUrl:"./assets/svg/ruins.svg",iconSize:[30,30],iconAnchor:[10,30]}),saddle:new n.Icon({iconUrl:"./assets/svg/saddle.svg",iconSize:[30,30],iconAnchor:[10,30]}),sailboat:new n.Icon({iconUrl:"./assets/svg/sailboat.svg",iconSize:[30,30],iconAnchor:[10,30]}),school:new n.Icon({iconUrl:"./assets/svg/school.svg",iconSize:[30,30],iconAnchor:[10,30]}),seal:new n.Icon({iconUrl:"./assets/svg/seal.svg",iconSize:[30,30],iconAnchor:[10,30]}),shelter:new n.Icon({iconUrl:"./assets/svg/shelter.svg",iconSize:[30,30],iconAnchor:[10,30]}),sinkhole:new n.Icon({iconUrl:"./assets/svg/sinkhole.svg",iconSize:[30,30],iconAnchor:[10,30]}),skype:new n.Icon({iconUrl:"./assets/svg/skype.svg",iconSize:[30,30],iconAnchor:[10,30]}),smartphone:new n.Icon({iconUrl:"./assets/svg/smartphone.svg",iconSize:[30,30],iconAnchor:[10,30]}),smoking:new n.Icon({iconUrl:"./assets/svg/smoking.svg",iconSize:[30,30],iconAnchor:[10,30]}),sport_centre:new n.Icon({iconUrl:"./assets/svg/sport_centre.svg",iconSize:[30,30],iconAnchor:[10,30]}),spring:new n.Icon({iconUrl:"./assets/svg/spring.svg",iconSize:[30,30],iconAnchor:[10,30]}),square:new n.Icon({iconUrl:"./assets/svg/square.svg",iconSize:[30,30],iconAnchor:[10,30]}),stadium:new n.Icon({iconUrl:"./assets/svg/stadium.svg",iconSize:[30,30],iconAnchor:[10,30]}),star:new n.Icon({iconUrl:"./assets/svg/star.svg",iconSize:[30,30],iconAnchor:[10,30]}),stop:new n.Icon({iconUrl:"./assets/svg/stop.svg",iconSize:[30,30],iconAnchor:[10,30]}),stupa:new n.Icon({iconUrl:"./assets/svg/stupa.svg",iconSize:[30,30],iconAnchor:[10,30]}),supermarket:new n.Icon({iconUrl:"./assets/svg/supermarket.svg",iconSize:[30,30],iconAnchor:[10,30]}),swimming_pool:new n.Icon({iconUrl:"./assets/svg/swimming_pool.svg",iconSize:[30,30],iconAnchor:[10,30]}),telephone:new n.Icon({iconUrl:"./assets/svg/telephone.svg",iconSize:[30,30],iconAnchor:[10,30]}),theatre:new n.Icon({iconUrl:"./assets/svg/theatre.svg",iconSize:[30,30],iconAnchor:[10,30]}),ticket:new n.Icon({iconUrl:"./assets/svg/ticket.svg",iconSize:[30,30],iconAnchor:[10,30]}),toilet:new n.Icon({iconUrl:"./assets/svg/toilet.svg",iconSize:[30,30],iconAnchor:[10,30]}),tower:new n.Icon({iconUrl:"./assets/svg/tower.svg",iconSize:[30,30],iconAnchor:[10,30]}),town:new n.Icon({iconUrl:"./assets/svg/town.svg",iconSize:[30,30],iconAnchor:[10,30]}),traffic_signal:new n.Icon({iconUrl:"./assets/svg/traffic_signal.svg",iconSize:[30,30],iconAnchor:[10,30]}),train:new n.Icon({iconUrl:"./assets/svg/train.svg",iconSize:[30,30],iconAnchor:[10,30]}),tram:new n.Icon({iconUrl:"./assets/svg/tram.svg",iconSize:[30,30],iconAnchor:[10,30]}),tram_stop:new n.Icon({iconUrl:"./assets/svg/tram_stop.svg",iconSize:[30,30],iconAnchor:[10,30]}),tree_cinofer:new n.Icon({iconUrl:"./assets/svg/tree_cinofer.svg",iconSize:[30,30],iconAnchor:[10,30]}),tree_leaf:new n.Icon({iconUrl:"./assets/svg/tree_leaf.svg",iconSize:[30,30],iconAnchor:[10,30]}),triangle:new n.Icon({iconUrl:"./assets/svg/triangle.svg",iconSize:[30,30],iconAnchor:[10,30]}),underground:new n.Icon({iconUrl:"./assets/svg/underground.svg",iconSize:[30,30],iconAnchor:[10,30]}),unesco:new n.Icon({iconUrl:"./assets/svg/unesco.svg",iconSize:[30,30],iconAnchor:[10,30]}),university:new n.Icon({iconUrl:"./assets/svg/university.svg",iconSize:[30,30],iconAnchor:[10,30]}),upload:new n.Icon({iconUrl:"./assets/svg/upload.svg",iconSize:[30,30],iconAnchor:[10,30]}),viewpoint:new n.Icon({iconUrl:"./assets/svg/viewpoint.svg",iconSize:[30,30],iconAnchor:[10,30]}),viewtower:new n.Icon({iconUrl:"./assets/svg/viewtower.svg",iconSize:[30,30],iconAnchor:[10,30]}),village:new n.Icon({iconUrl:"./assets/svg/village.svg",iconSize:[30,30],iconAnchor:[10,30]}),vineyard:new n.Icon({iconUrl:"./assets/svg/vineyard.svg",iconSize:[30,30],iconAnchor:[10,30]}),volcano:new n.Icon({iconUrl:"./assets/svg/volcano.svg",iconSize:[30,30],iconAnchor:[10,30]}),water_tower:new n.Icon({iconUrl:"./assets/svg/water_tower.svg",iconSize:[30,30],iconAnchor:[10,30]}),water_well:new n.Icon({iconUrl:"./assets/svg/water_well.svg",iconSize:[30,30],iconAnchor:[10,30]}),watermill:new n.Icon({iconUrl:"./assets/svg/watermill.svg",iconSize:[30,30],iconAnchor:[10,30]}),waterpark:new n.Icon({iconUrl:"./assets/svg/waterpark.svg",iconSize:[30,30],iconAnchor:[10,30]}),waterwork:new n.Icon({iconUrl:"./assets/svg/waterwork.svg",iconSize:[30,30],iconAnchor:[10,30]}),wayside_cross:new n.Icon({iconUrl:"./assets/svg/wayside_cross.svg",iconSize:[30,30],iconAnchor:[10,30]}),wind_generator:new n.Icon({iconUrl:"./assets/svg/wind_generator.svg",iconSize:[30,30],iconAnchor:[10,30]}),windmill:new n.Icon({iconUrl:"./assets/svg/windmill.svg",iconSize:[30,30],iconAnchor:[10,30]}),zoo:new n.Icon({iconUrl:"./assets/svg/zoo.svg",iconSize:[30,30],iconAnchor:[10,30]})};t.a=function(){function e(){}return e.get=function(e){return i[e]},e.list=function(){return Object.keys(i)},e.getDiv=function(e){var t=e.title,s=e.body,o=e.color,i=e.textColor,r=void 0===i?"#333333":i,c=e.borderColor,l=void 0===c?0:c,d=e.iconWidth,h=void 0===d?150:d,u=e.iconHeight,b=void 0===u?70:u,p="img-"+a.a.randomPassword();a.a.hsl2Rgb(o,100,60),a.a.hsl2Rgb(100-l,100,50);return new n.DivIcon({iconSize:[h,b+30],iconAnchor:[15,b+30],className:"my-div-icon",html:"<div id='"+p+"' style='width: "+h+"px; height: "+(b+30)+"px; line-height: 1.1em;'>\n\t\t\t\t<style>\n\t\t\t\t\t#"+p+" .map-marker:after {\n\t\t\t\t\t\tborder-top-color: "+o+";\n\t\t\t\t\t}\n\t\t\t\t</style>\n\t\t\t\t<div class='map-marker text-white p-1' style='color: "+r+"; background-color: "+o+"; height: "+b+"px;'>\n\t\t\t\t\t<nobr><strong>"+t+"</strong></nobr><br />\n\t\t\t\t\t<span class='font-weight-light'><nobr>"+s+"</nobr></span>\n\t\t\t\t</div>\n\t\t\t</div>"})},e.getRaceMarker=function(e){var t=e.bib,s=e.rank,i=e.flag,r=void 0===i?"":i,c=e.image,l=e.title,d=e.color,h=e.borderColor,u=void 0===h?0:h,b=e.iconWidth,p=void 0===b?180:b,m=e.iconHeight,f=void 0===m?20:m,g=e.iconAnchorX,O=void 0===g?7:g,j=e.iconAnchorY,v=void 0===j?7:j,y=e.mapChecked,w="img-"+a.a.randomPassword(),x=(a.a.hsl2Rgb(d,100,60),a.a.hsl2Rgb(100-u,100,50),o.a.getRankingColor(t||s)),k=/dark/i.test(y),S=c?"\n\t\t\t<div\n\t\t\t\tclass='rounded-circle imageRounded imageRoundedSmallIcon'\n\t\t\t\tstyle='background-image: url(\""+c+'"); background-size: cover; border: 1px '+x+" solid;'\n\t\t\t>\n\t\t\t\t&nbsp;\n\t\t\t</div>\n\t\t":"";return S=t||s?"\n\t\t\t<div\n\t\t\t\tclass='px-0 text-center' style='background-color: "+(x||"")+"'\n\t\t\t>\n\t\t\t\t"+(t||s)+"\n\t\t\t</div>\n\t\t":S,new n.DivIcon({iconSize:[p,f],iconAnchor:[O,v],className:"my-div-icon",html:O>100?"\n\t\t\t\t<div class='d-flex flex-nowrap overflow-hidden justify-content-end' id='"+w+"' style='width: "+p+"px; height: "+f+"px; line-height: 1.1em;'>\n\t\t\t\t\t<div\n\t\t\t\t\t\tclass='"+(k?"text-white":"text-dark")+" p-1 pl-3 rounded-pill-left rounded-none "+(k?"bg-dark":"bg-white")+" overflow-hidden'\n\t\t\t\t\t>\n\t\t\t\t\t\t<nobr>\n\t\t\t\t\t\t\t<strong>"+l+"</strong> "+r+"\n\t\t\t\t\t\t</nobr>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div\n\t\t\t\t\t\tclass='text-white font-weight-bolder pr-2 pl-1 py-1 rounded-pill-right rounded-none'\n\t\t\t\t\t\tstyle='background-color: "+(d||"")+"'\n\t\t\t\t\t>\n\t\t\t\t\t\t"+S+"\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class='rounded rounded-circle ml-2 mt-1' style='width: 14px; height: 14px; background-color: "+d+";'>\n\t\t\t\t\t\t&nbsp;\n\t\t\t\t\t</div>\n\t\t\t\t</div>\t\t\t\n\t\t\t":"\n\t\t\t\t<div class='d-flex flex-nowrap overflow-hidden' id='"+w+"' style='width: "+p+"px; height: "+f+"px; line-height: 1.1em;'>\n\t\t\t\t\t<div class='rounded rounded-circle mr-2 mt-1' style='width: 14px; height: 14px; background-color: "+d+";'>\n\t\t\t\t\t\t&nbsp;\n\t\t\t\t\t</div>\n\t\t\t\t\t<div\n\t\t\t\t\t\tclass='text-white font-weight-bolder pl-2 pr-1 py-1 rounded-pill-left rounded-none'\n\t\t\t\t\t\tstyle='background-color: "+(d||"")+"'\n\t\t\t\t\t>\n\t\t\t\t\t\t"+S+"\n\t\t\t\t\t</div>\n\t\t\t\t\t<div\n\t\t\t\t\t\tclass='"+(k?"text-white":"text-dark")+" p-1 pr-3 rounded-pill-right rounded-none "+(k?"bg-dark":"bg-white")+" overflow-hidden'\n\t\t\t\t\t>\n\t\t\t\t\t\t<nobr>\n\t\t\t\t\t\t\t"+r+" <strong>"+l+"</strong>\n\t\t\t\t\t\t</nobr>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t"})},e.getDistanceMarker=function(e){var t=e.title,s=void 0===t?"":t,o=e.body,i=void 0===o?"":o,r="img-"+a.a.randomPassword();return new n.DivIcon({iconSize:[20,20],iconAnchor:[10,10],className:"my-div-icon",html:"<div id='"+r+"' class='rounded-circle bg-primary text-white text-center' style='width: 20px; height: 20px;'>\n\t\t\t\t<strong>"+s+"</strong><br />\n\t\t\t\t<span class='font-weight-light'>"+i+"</span>\n\t\t\t</div>"})},e.getMarker=function(e){var t=e.bib,s=e.rank,i=e.flag,r=void 0===i?"":i,c=e.image,l=e.title,d=e.color,h=void 0===d?"#a0a0a0":d,u=e.borderColor,b=void 0===u?0:u,p=e.iconWidth,m=void 0===p?250:p,f=e.iconHeight,g=void 0===f?20:f,O=e.iconAnchorX,j=void 0===O?7:O,v=e.iconAnchorY,y=void 0===v?7:v,w=e.dotWidth,x=void 0===w?14:w,k=e.dotHeight,S=void 0===k?14:k,I=e.mapChecked,C="img-"+a.a.randomPassword(),T=(a.a.hsl2Rgb(h,100,60),a.a.hsl2Rgb(100-b,100,50),o.a.getRankingColor(t||s)),D=(/dark/i.test(I),c?"\n\t\t\t<div\n\t\t\t\tclass='rounded-circle imageRounded imageRoundedSmallIcon'\n\t\t\t\tstyle='background-image: url(\""+c+'"); background-size: cover; border: 1px '+T+" solid;'\n\t\t\t>\n\t\t\t\t&nbsp;\n\t\t\t</div>\n\t\t":"");return new n.DivIcon({iconSize:[m,g],iconAnchor:[j,y],className:"my-div-icon",html:"\n\t\t\t\t<div class='d-flex flex-nowrap' id='"+C+"' style='width: "+m+"px; height: "+g+"px; line-height: 1.1em;'>\n\t\t\t\t\t<div class='rounded rounded-circle mr-2 mt-1' style='width: "+x+"px; height: "+S+"px; background-color: "+h+";'>\n\t\t\t\t\t\t&nbsp;\n\t\t\t\t\t</div>\n\t\t\t\t\t<div\n\t\t\t\t\t\tclass='text-dark font-weight-bolder pl-2 pr-1 py-1 rounded-pill-left rounded-none bg-info'\n\t\t\t\t\t>\n\t\t\t\t\t\t"+(D=t||s?"\n\t\t\t<div\n\t\t\t\tclass='rounded-pill-both px-1 text-center "+(T?"":"bg-primary")+"' style='background-color: "+(T||"")+"'\n\t\t\t>\n\t\t\t\t"+(t||s)+"\n\t\t\t</div>\n\t\t":D)+"\n\t\t\t\t\t</div>\n\t\t\t\t\t<div\n\t\t\t\t\t\tclass='text-dark p-1 pr-3 rounded-pill-right rounded-none bg-info overflow-hidden'\n\t\t\t\t\t>\n\t\t\t\t\t\t<nobr>"+r+" <strong>"+l+"</strong></nobr>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t"})},e.getSmallMarker=function(e){var t=e.title,s=void 0===t?"":t,o=e.body,i=void 0===o?"":o,r="img-"+a.a.randomPassword();return new n.DivIcon({iconSize:[6,6],iconAnchor:[3,3],className:"my-div-icon",html:"<div id='"+r+"' class='rounded-circle bg-success text-white text-center' style='width: 5px; height: 5px;'>\n\t\t\t\t<strong>"+s+"</strong><br />\n\t\t\t\t<span class='font-weight-light'>"+i+"</span>\n\t\t\t</div>"})},e}()},"6GRK":function(e,t,s){"use strict";(function(e){function n(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function a(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?n(Object(s),!0).forEach((function(t){o(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):n(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function o(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}var i,r=s("hosL"),c=s("/eY4"),l=(s("cneo"),s("Utv1")),d=s("OhSV"),h=s("go65"),u=Object(c.a)(i=function(t){function s(e){var s;return(s=t.call(this,e)||this).handleAdd=function(){var e=s.props;(0,e.updateField)({id:e.object.id,field:e.field,value:a({},s.state.data)}),s.setState({data:{name:"",url:""}})},s.removeLink=function(e){return new Promise((function(t){var n=s.props.stores.dogStore,a=s.props.object,o=e.target.closest("button").dataset;return n.removeLink({id:a.id,name:o.name,linkId:o.id}),t()}))},s.state={data:{}},s}var n,o;return o=t,(n=s).prototype=Object.create(o.prototype),n.prototype.constructor=n,n.__proto__=o,s.prototype.render=function(){var t=this,s=this.props,n=s.showFiles,a=void 0===n||n,o=s.object,i=void 0===o?{}:o;return Object(r.h)("div",{class:"row"},Object(r.h)("div",{class:"col-12 mt-3"},a&&Object(r.h)(e,null,Object(r.h)("div",{class:"container-fluid"},Object(r.h)("div",{class:"row"},(!i.links||0===i.links.length)&&Object(r.h)(e,null,Object(r.h)("div",{class:"text-center text-muted"},Object(r.h)("div",{class:"display-1"},Object(r.h)("i",{class:"fas fa-link"})),Object(r.h)("h3",null,Object(r.h)(d.c,{id:"dogs.no-links-title"},"No links for this dog!")),Object(r.h)(d.c,{id:"dogs.no-links-text"},"You can add links to this dog. Ie. Links to Facebook page, Instagram page, blogg, etc."))),i.links&&i.links.map((function(e){return Object(r.h)("div",{class:"col-12 p-1"},Object(r.h)("span",{class:"font-weight-lighter mr-2"},l.a.isoDate(e.createdDate,!1,!1,!0)),Object(r.h)("span",{class:"mr-2"},e.name),Object(r.h)("span",{class:"mr-2"},e.url),Object(r.h)("button",{class:"btn btn-sm btn-link float-right p-0",onClick:t.removeLink,"data-name":e.name,"data-id":e.id},Object(r.h)("i",{class:"fas fa-trash-alt"})," Del"))})))))),Object(r.h)("div",{class:"col-12 mt-3"},Object(r.h)("details",null,Object(r.h)("summary",null,Object(r.h)(d.c,{id:"dogs.link-add"},"Add new link")),Object(r.h)("div",{class:"form-group"},Object(r.h)("label",{for:"name"},Object(r.h)(d.c,{id:"dogs.link-name"},"Name")),Object(r.h)("input",{type:"text",class:"form-control",id:"name","aria-describedby":"nameHelp",onInput:Object(h.a)(this,"data.name")}),Object(r.h)("small",{id:"nameHelp",class:"form-text text-muted"},Object(r.h)(d.c,{id:"dogs.link-name-help"},"Name of link"))),Object(r.h)("div",{class:"form-group"},Object(r.h)("label",{for:"url"},Object(r.h)(d.c,{id:"dogs.link-url"},"Url")),Object(r.h)("input",{type:"text",class:"form-control",id:"url","aria-describedby":"urlHelp",onInput:Object(h.a)(this,"data.url")}),Object(r.h)("small",{id:"urlHelp",class:"form-text text-muted"},Object(r.h)(d.c,{id:"dogs.link-url-help"},"URL of link"))),Object(r.h)("button",{class:"btn btn-success",onClick:this.handleAdd},Object(r.h)(d.c,{id:"dogs.link-add"},"Add link")))))},s}(r.Component))||i;t.a=u}).call(this,s("hosL").Fragment)},"8n2v":function(e,t,s){"use strict";(function(e){function n(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function a(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}var o,i=s("hosL"),r=(s("Utv1"),s("/eY4")),c=s("OhSV"),l=s("ZOvn"),d=(l.a.marginTop(!1),l.a.marginBottom(),{}),h=Object(r.a)(o=function(t){function s(e){var s;return(s=t.call(this,e)||this).state=function(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?n(Object(s),!0).forEach((function(t){a(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):n(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}({},d),s}var o,r;return r=t,(o=s).prototype=Object.create(r.prototype),o.prototype.constructor=o,o.__proto__=r,s.prototype.render=function(){var t=this.props,s=t.goto,n=t.gotoTitle,a=t.routerName;return Object(i.h)("div",{class:"row h-100"},Object(i.h)("div",{class:"col-12 text-center my-auto"},Object(i.h)("div",{class:"spinner-border text-primary",style:"width: 8rem; height: 8rem;",role:"status"},Object(i.h)("span",{class:"sr-only"},Object(i.h)(c.c,{id:"home.loading"},"Loading..."))),Object(i.h)("h3",{class:"mt-4"},Object(i.h)(c.c,{id:"home.loading"},"Loading...")),s&&Object(i.h)(e,null,Object(i.h)("a",{class:"my-4 btn btn-primary btn-lg btn-block",native:!0,href:s},n," ",Object(i.h)("i",{class:"fas fa-angle-double-right ml-2"})),Object(i.h)("small",{class:"text-muted"},a))))},s}(i.Component))||o;t.a=h}).call(this,s("hosL").Fragment)},"9lZG":function(e,t,s){"use strict";(function(e){var n,a=s("hosL"),o=s("Utv1"),i=s("/eY4"),r=s("OhSV"),c=s("go65"),l=s("om2D"),d=s("ZOvn"),h=Object(i.a)(n=function(t){function s(e){var s;return(s=t.call(this,e)||this).beforeImagesUploaded=function(){s.setState({sendButtonEnabled:!1})},s.afterImagesUploaded=function(){s.setState({sendButtonEnabled:!0})},s.commentRace=function(){return new Promise((function(e,t){var n,a,o,i,r,c,l,h,u,b,p;return s.state.sendButtonEnabled?(o=void 0===(a=(n=s.props).callback)?function(){}:a,r=void 0===(i=n.inputRefObject)?{}:i,c=s.props.race,l=s.props.stores.raceStore,u=(h=s.state).comment,b=h.showAddImage,s.setState({sendButtonEnabled:!1}),Promise.resolve(l.commentRace({id:c.id,comment:u})).then((function(n){try{return(p=n)&&200===p.status&&(s.setState({comment:{body:"",images:[]}},(function(){d.a.resizeTextarea(r[c.id]),b&&s.addImage()})),o({race:c,response:p})),s.setState({sendButtonEnabled:!0}),e()}catch(e){return t(e)}}),t)):e(!1)}))},s.addImages=function(e){var t,n=s.state.comment;(t=n.images).push.apply(t,e.value),s.setState({comment:n})},s.addImage=function(){var e=s.state.showAddImage;s.setState({showAddImage:!(void 0!==e&&e)})},s.handleImageErrored=function(e){var t=e.target;t.onerror=null,setTimeout((function(){t.src+="?"+new Date}),1e3)},s.state={comment:{body:"",images:[]},showAddImage:!1,sendButtonEnabled:!0},s.inputRef={},s}var n,i;return i=t,(n=s).prototype=Object.create(i.prototype),n.prototype.constructor=n,n.__proto__=i,s.prototype.render=function(){var t=this,s=this.props,n=s.inputRef,i=s.race,h=this.state,u=h.comment,b=h.showAddImage,p=h.sendButtonEnabled,m=this.props.stores.userStore.user,f=void 0===m?{}:m,g=d.a.displayNameShort(f),O=(d.a.displayName(f),f.image||(f.images?f.images[0]:void 0));return Object(a.h)(e,null,Object(a.h)("div",null,Object(a.h)("div",{class:"d-flex mb-0 position-relative w-100"},Object(a.h)("div",{class:"text-center border rounded-circle imageRounded imageRoundedSmall",style:(O?"background-image: url('"+O.s3SmallLink+"'); background-size: cover;":"")+" border-width: 3px !important;"},!O&&Object(a.h)("span",{class:"font-weight-lighter",style:"font-size: 15px;"},g)),Object(a.h)("div",{class:"col pl-3",style:"line-height: 1.2em;"},Object(a.h)("div",{class:"d-flex bd-highlight"},Object(a.h)("div",{class:"p-0 w-100 bd-highlight"},Object(a.h)("label",{class:"sr-only",for:"inlineFormInput"},Object(a.h)(r.c,{id:"comments.comment"},"Kommentar")),Object(a.h)("div",{class:"border rounded rounded-lg position-relative"},Object(a.h)(r.b,null,Object(a.h)("textarea",{class:"form-control-plaintext px-2",type:"text",placeholder:Object(a.h)(r.c,{id:"comments.write-comment"},"Skriv en kommentar..."),onInput:Object(c.a)(this,"comment.body"),onKeyUp:d.a.resizeTextarea,onFocus:d.a.resizeTextarea,style:"height: 2.3em;",value:u.body,ref:n})),Object(a.h)("div",{class:"position-absolute",style:"top: 8px; right: 10px; font-size: 1.2em;"},Object(a.h)("i",{class:"fas fa-image pointerCursor","data-id":i.id,onClick:this.addImage})))),Object(a.h)("div",{class:"p-0 pl-2 flex-shrink-1 bd-highlight"},Object(a.h)("button",{type:"button",class:"btn btn-"+(p?"primary":"secondary")+" mb-2",disabled:!p,onClick:this.commentRace},Object(a.h)("i",{class:"fas fa-paper-plane"})))))),b&&Object(a.h)(e,null,Object(a.h)("div",{class:"col-12 text-center"},Object(a.h)("div",{class:"container-fluid"},Object(a.h)("div",{class:"row"},o.a.isArray(u.images)&&u.images.map((function(e){return Object(a.h)("div",{class:"col-3 p-1"},Object(a.h)("img",{src:e.s3SmallLink,class:"img-fluid",onError:t.handleImageErrored}),Object(a.h)("button",{class:"btn btn-sm btn-link",onClick:t.removeImage,"data-name":e.name},Object(a.h)("i",{class:"fas fa-trash"})," ",Object(a.h)(r.c,{id:"comments.remove-image"},"Remove")))})))),Object(a.h)(l.a,{object:u,updateField:this.addImages,before:this.beforeImagesUploaded,after:this.afterImagesUploaded,autoOpen:!0})))))},s}(a.Component))||n;t.a=h}).call(this,s("hosL").Fragment)},"9xg+":function(e,t,s){"use strict";(function(e){function n(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function a(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function o(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}var i,r,c,l,d,h,u=s("hosL"),b=s("Utv1"),p=s("/eY4"),m=s("cneo"),f=(s("go65"),s("Y3FI")),g=s("OhSV"),O=(s("fh8t"),s("ZOvn")),j=s("om2D"),v=s("TiXY"),y=s("KOz6"),w=s("6GRK"),x=s("/DnB"),k=(O.a.marginTop(!1),O.a.marginTopBack(!1),O.a.marginBottom(!1),Object(p.a)(i=function(t){function s(){for(var e,s=arguments.length,n=new Array(s),a=0;a<s;a++)n[a]=arguments[a];return(e=t.call.apply(t,[this].concat(n))||this).handleImageErrored=function(e){var t=e.target;if(t.dataset.retry||(t.dataset.retry=0),t.dataset.retry=parseInt(t.dataset.retry,10)+1,t.dataset.retry>5)return!1;t.onerror=null,setTimeout((function(){t.src+="?"+new Date}),1e3)},e.removeImage=function(t){return new Promise((function(s){return e.props.stores.dogStore.removeImage({id:e.props.dog.id,name:t.target.parentElement.dataset.name||t.target.dataset.name}),s()}))},e.removeFile=function(t){return new Promise((function(s){return e.props.stores.dogStore.removeFile({id:e.props.dog.id,name:t.target.parentElement.dataset.name||t.target.dataset.name}),s()}))},e}return o(s,t),s.prototype.render=function(){var t=this,s=this.props,n=s.saved,a=s.dog,o=s.type,i=void 0===o?"text":o,r=s.datalist,c=void 0===r?[]:r,l=s.min,d=s.max,h=s.step,p=s.field,m=s.title,f=s.icon,O=s.help,x=s.onInput,k=s.updateField,S=s.refName,I=s.showImages,C=void 0!==I&&I,T=s.showFiles,D=void 0===T||T,P=a[p]||"",R=d;return"date"===i&&(P&&(P=b.a.isoDate(a[p],!1,!1,!0)),"today"===d&&(R=b.a.isoDate(void 0,!1,!1,!0))),"file"===i?Object(u.h)("div",{class:"form-group "+(n[p+"."+a.id]?"is-valid":"")},Object(u.h)("label",{for:p+"Input"},f&&Object(u.h)("i",{class:f+" text-muted"})," ",m),D&&Object(u.h)(e,null,Object(u.h)("div",{class:"container-fluid"},Object(u.h)("div",{class:"row"},(!a.files||0===a.files.length)&&Object(u.h)(e,null,Object(u.h)("div",{class:"text-center text-muted"},Object(u.h)("div",{class:"display-1"},Object(u.h)("i",{class:"fas fa-file"})),Object(u.h)("h3",null,Object(u.h)(g.c,{id:"dogs.no-files-title"},"No files attached to this dog!")),Object(u.h)(g.c,{id:"dogs.no-files-text"},"You can upload files to this dog inside edit. These files can be of any type. Ie: Certificates, test, etc."))),a.files&&a.files.map((function(e){return Object(u.h)("div",{class:"col-12 p-1"},Object(u.h)("span",{class:"font-weight-lighter mr-2"},b.a.isoDate(e.createdDate,!1,!1,!0)),Object(u.h)("span",{class:"mr-2"},e.name),Object(u.h)("span",{class:"font-weight-lighter mr-2"},b.a.formatBytes(e.size,1)),Object(u.h)("button",{class:"btn btn-sm btn-link float-right p-0",onClick:t.removeFile,"data-name":e.name},Object(u.h)("i",{class:"fas fa-trash-alt"})," Del"))}))))),Object(u.h)(v.a,{saved:n,object:a,field:p,updateField:k}),n[p+"."+a.id]?Object(u.h)("div",{class:"valid-feedback",style:"display: block;"},Object(u.h)(g.c,{id:"dogs.changes-saved"},"Endringene er lagret")):Object(u.h)("small",{id:p+"Help",class:"form-text text-muted"},O)):"textarea"===i?Object(u.h)("div",{class:"form-group "+(n[p+"."+a.id]?"is-valid":"")},Object(u.h)("label",{for:p+"Input"},f&&Object(u.h)("i",{class:f+" text-muted"})," ",m),Object(u.h)("textarea",{type:"text",class:"form-control "+(n[p+"."+a.id]?"is-valid":""),id:p+"Input","aria-describedby":p+"Help",value:P,"data-id":a.id,"data-field":p,onInput:x,rows:10}),n[p+"."+a.id]?Object(u.h)("div",{class:"valid-feedback",style:"display: block;"},Object(u.h)(g.c,{id:"dogs.changes-saved"},"Endringene er lagret")):Object(u.h)("small",{id:p+"Help",class:"form-text text-muted"},O)):"links"===p?Object(u.h)("div",{class:"form-group "+(n[p+"."+a.id]?"is-valid":"")},Object(u.h)("label",{for:p+"Input"},f&&Object(u.h)("i",{class:f+" text-muted"})," ",m),Object(u.h)(w.a,{saved:n,stores:this.props.stores,object:a,field:p,updateField:k}),n[p+"."+a.id]?Object(u.h)("div",{class:"valid-feedback",style:"display: block;"},Object(u.h)(g.c,{id:"dogs.changes-saved"},"Endringene er lagret")):Object(u.h)("small",{id:p+"Help",class:"form-text text-muted"},O)):"achievements"===p?Object(u.h)("div",{class:"form-group "+(n[p+"."+a.id]?"is-valid":"")},Object(u.h)("label",{for:p+"Input"},f&&Object(u.h)("i",{class:f+" text-muted"})," ",m),Object(u.h)(y.a,{saved:n,stores:this.props.stores,object:a,field:p,updateField:k}),n[p+"."+a.id]?Object(u.h)("div",{class:"valid-feedback",style:"display: block;"},Object(u.h)(g.c,{id:"dogs.changes-saved"},"Endringene er lagret")):Object(u.h)("small",{id:p+"Help",class:"form-text text-muted"},O)):"image"===i?Object(u.h)("div",{class:"form-group "+(n[p+"."+a.id]?"is-valid":"")},Object(u.h)("label",{for:p+"Input"},f&&Object(u.h)("i",{class:f})," ",m),C&&Object(u.h)(e,null,Object(u.h)("div",{class:"container-fluid"},Object(u.h)("div",{class:"row"},(!a.images||0===a.images.length)&&Object(u.h)(e,null,Object(u.h)("div",{class:"text-center text-muted mb-3"},Object(u.h)("div",{class:"display-1"},Object(u.h)("i",{class:"fas fa-images"})),Object(u.h)("h3",null,Object(u.h)(g.c,{id:"dogs.no-images-title"},"No images for this dog!")),Object(u.h)(g.c,{id:"dogs.no-images-text"},"You can add more images to this dog. Puppy pictures, workout pictures, lazy summer pictures, etc. All is a nice way to create a better profile for this dog."))),"image"===p?Object(u.h)(e,null,a.image&&a.image.s3SmallLink&&Object(u.h)("div",{class:"col-3 p-1"},Object(u.h)("img",{src:a.image.s3SmallLink,class:"img-fluid border rounded-lg",onError:this.handleImageErrored}),Object(u.h)("button",{class:"btn btn-sm btn-link",onClick:this.removeImage,"data-name":a.image.name},Object(u.h)("i",{class:"fas fa-trash"})," Remove"),Object(u.h)("span",{class:"badge badge-success"},"Main"))):Object(u.h)(e,null,a.images&&a.images.map((function(e){return Object(u.h)("div",{class:"col-3 p-1"},Object(u.h)("img",{src:e.s3SmallLink,class:"img-fluid",onError:t.handleImageErrored}),Object(u.h)("button",{class:"btn btn-sm btn-link",onClick:t.removeImage,"data-name":e.name},Object(u.h)("i",{class:"fas fa-trash"})," Remove"))})))))),"image"===p?Object(u.h)(e,null,Object(u.h)(j.a,{saved:n,object:a,field:p,updateField:k,autoOpen:!1,addToImages:!1})):Object(u.h)(e,null,Object(u.h)(j.a,{saved:n,object:a,field:p,updateField:k,autoOpen:!1})),n[p+"."+a.id]?Object(u.h)("div",{class:"valid-feedback",style:"display: block;"},Object(u.h)(g.c,{id:"dogs.changes-saved"},"Endringene er lagret")):Object(u.h)("small",{id:p+"Help",class:"form-text text-muted"},O)):"datalist"===i?Object(u.h)("div",{class:"form-group "+(n[p+"."+a.id]?"is-valid":"")},Object(u.h)("label",{for:p+"Input"},f&&Object(u.h)("i",{class:f})," ",m),Object(u.h)("input",{list:"list-"+p,class:"form-control "+(n[p+"."+a.id]?"is-valid":""),id:p+"Input","aria-describedby":p+"Help",value:P,"data-id":a.id,"data-field":p,onInput:x}),Object(u.h)("datalist",{id:"list-"+p},c.map((function(e){return Object(u.h)("option",{value:e[0]},e[1])}))),n[p+"."+a.id]?Object(u.h)("div",{class:"valid-feedback",style:"display: block;"},Object(u.h)(g.c,{id:"dogs.changes-saved"},"Endringene er lagret")):Object(u.h)("small",{id:p+"Help",class:"form-text text-muted"},O)):"select"===i?Object(u.h)("div",{class:"form-group "+(n[p+"."+a.id]?"is-valid":"")},Object(u.h)("label",{for:p+"Input"},f&&Object(u.h)("i",{class:f})," ",m),Object(u.h)("select",{type:i,class:"form-control "+(n[p+"."+a.id]?"is-valid":""),id:p+"Input","aria-describedby":p+"Help",value:P,"data-id":a.id,"data-field":p,onInput:x},Object(u.h)("option",{value:""},"-- Velg kjønn --"),c.map((function(e){return Object(u.h)("option",{value:e[0]},e[1])}))),n[p+"."+a.id]?Object(u.h)("div",{class:"valid-feedback",style:"display: block;"},Object(u.h)(g.c,{id:"dogs.changes-saved"},"Endringene er lagret")):Object(u.h)("small",{id:p+"Help",class:"form-text text-muted"},O)):Object(u.h)("div",{class:"form-group "+(n[p+"."+a.id]?"is-valid":"")},Object(u.h)("label",{for:p+"Input"},f&&Object(u.h)("i",{class:f})," ",m)," ",S,Object(u.h)("input",{type:i,class:"form-control "+(n[p+"."+a.id]?"is-valid":""),id:p+"Input","aria-describedby":p+"Help",min:l,max:R,step:h,value:P,"data-id":a.id,"data-field":p,onInput:x}),n[p+"."+a.id]?Object(u.h)("div",{class:"valid-feedback",style:"display: block;"},Object(u.h)(g.c,{id:"dogs.changes-saved"},"Endringene er lagret")):Object(u.h)("small",{id:p+"Help",class:"form-text text-muted"},O))},s}(u.Component))||i),S=Object(p.a)(r=function(t){function s(){return t.apply(this,arguments)||this}o(s,t);var n=s.prototype;return n.toggleType=function(e){var t=this.props.stores.dogStore,s=this.props,n=s.object,a=s.type,o=s.field,i=s.updateField,r=s.isNew,c=Object(m.i)(n[o]);null===(c=c===e?null:e)?i({id:n.id,field:o,value:c,type:a,isNew:r}):n.teams.indexOf(c)>-1?t.removeTeam({id:n.id,team:c}):n.team?t.addTeam({id:n.id,team:c}):i({id:n.id,field:o,value:c,type:a,isNew:r})},n.componentDidMount=function(){this.container&&this.container.scrollIntoView({behavior:"smooth",block:"center"})},n.render=function(){var t=this,s=this.props.stores.userStore.teams,n=this.props,a=n.saved,o=n.object,i=n.field,r=n.title,c=n.icon,l=n.help,d=Object(m.i)(o[i]),h=this.props.highlight;return Object(u.h)("div",{class:"form-group mb-4 pb-1 border-bottom "+(a[i+"."+o.id]?"is-valid":"")},Object(u.h)("label",{for:i+"Input"},c&&Object(u.h)("i",{class:c+" text-muted"})," ",r),Object(u.h)("div",{class:"container-fluid px-0"},Object(u.h)("div",{class:"row"},Object(u.h)("div",{class:"w-100 overflow-hidden"},Object(u.h)("div",{class:"d-flex flex-row flex-nowrap pb-2 px-1",style:"overflow: auto; scroll-snap-type: x mandatory;"},s&&s.map((function(n,a){var i=d===n.id,r=o&&b.a.isArray(o.teams)&&o.teams.indexOf(n.id)>-1;return Object(u.h)("div",{class:"col mb-0 px-0",ref:i||r?function(e){return t.container=e}:null},Object(u.h)("button",{class:"btn btn-block\n            \t\t\t\t\t\t\t\t\t\trounded-none "+(0===a?"rounded-pill-left":a+1===s.length?"rounded-pill-right":"")+"\n                                                    btn"+(i||r?"":"-outline")+"-"+(r?"info":"success")+"\n                                                    text-nowrap overflow-hidden",style:"text-overflow: ellipsis;",onClick:function(){return t.toggleType(n.id)}},o.hintTeam===n.id&&Object(u.h)("span",{class:"float-right text-primary"},Object(u.h)("i",{class:"fas fa-circle"})),Object(u.h)("i",{class:"fas fa-users mr-2"}),n.name,h&&h.indexOf(n.id)>-1&&Object(u.h)(e,null,d===n.id?Object(u.h)(e,null,Object(u.h)("i",{class:"fas fa-check float-right"})):Object(u.h)(e,null,Object(u.h)("div",{class:"spinner-grow text-warning float-right",role:"status"},Object(u.h)("span",{class:"sr-only"},"Loading...")),Object(u.h)("i",{class:"far fa-hand-point-left float-right",style:"font-size: 2.0em;"}))),Object(u.h)("small",null,i&&Object(u.h)("span",{class:"badge badge-pill badge-primary"},"Primary"),r&&Object(u.h)("span",{class:"badge badge-pill badge-secondary"},"Secondary"))))})))))),a[i+"."+o.id]?Object(u.h)("div",{class:"valid-feedback",style:"display: block;"},Object(u.h)(g.c,{id:"workouts.changes-saved"},"Endringene er lagret")):Object(u.h)("small",{id:i+"Help",class:"form-text text-muted"},l))},s}(u.Component))||r,I=Object(p.a)(c=function(e){function t(){return e.apply(this,arguments)||this}o(t,e);var s=t.prototype;return s.toggleType=function(e){var t=this.props,s=t.object,n=t.type,a=t.field,o=t.updateField,i=t.isNew,r=Object(m.i)(s[a]);o({id:s.id,field:a,value:r=r===e?null:e,type:n,isNew:i})},s.render=function(){var e=this,t=this.props.stores.userStore,s=t.harnesses,n=t.user.language,a=void 0===n?"en":n,o=this.props,i=o.saved,r=o.object,c=o.field,l=o.title,d=o.icon,h=o.help,b=Object(m.i)(r[c]);return Object(u.h)("div",{class:"form-group "+(i[c+"."+r.id]?"is-valid":"")},Object(u.h)("label",{for:c+"Input"},d&&Object(u.h)("i",{class:d})," ",l),Object(u.h)("div",{class:"container-fluid px-0"},Object(u.h)("div",{class:"row"},Object(u.h)("div",{class:"w-100 overflow-hidden"},Object(u.h)("div",{class:"d-flex flex-row flex-nowrap pb-2 px-1",style:"overflow: auto; scroll-snap-type: x mandatory;"},s&&s.map((function(t,n){return Object(u.h)("div",{class:"col px-0 mb-2",ref:b===t.id?function(t){return e.container=t}:null},Object(u.h)("div",{class:"border\n                                            rounded-none "+(0===n?"rounded-pill-left":n+1===s.length?"rounded-pill-right":"")+"\n                                            p-2 "+(b===t.id?"bg-success":""),style:"border-bottom: 3px solid "+t.colorNonstop+" !important;",onClick:function(){return e.toggleType(t.id)}},t.lang&&t.lang[a]?t.lang[a]:t.name))})))))),i[c+"."+r.id]?Object(u.h)("div",{class:"valid-feedback",style:"display: block;"},Object(u.h)(g.c,{id:"dogs.changes-saved"},"Endringene er lagret")):Object(u.h)("small",{id:c+"Help",class:"form-text text-muted"},h))},t}(u.Component))||c,C=Object(p.a)(l=function(e){function t(){return e.apply(this,arguments)||this}o(t,e);var s=t.prototype;return s.toggleStatus=function(e){var t=this.props.stores.dogStore,s=this.props,n=s.object,a=s.type,o=s.field,i=s.updateField,r=s.isNew,c=Object(m.i)(n[o]);0===(c=c===e?0:e)?i({id:n.id,field:o,value:c,type:a,isNew:r}):n.statuses.indexOf(c)>-1?t.removeStatus({id:n.id,status:c}):n.status?t.addStatus({id:n.id,status:c}):i({id:n.id,field:o,value:c,type:a,isNew:r})},s.componentDidMount=function(){this.container&&this.container.scrollIntoView({behavior:"smooth",block:"center"})},s.render=function(){var e=this,t=this.props.stores.userStore,s=t.dogstatuses,n=t.user.language,a=this.props,o=a.saved,i=a.object,r=a.field,c=a.title,l=a.icon,d=a.help,h=Object(m.i)(i[r]);return Object(u.h)("div",{class:"form-group  mb-4 pb-1 border-bottom "+(o[r+"."+i.id]?"is-valid":"")},Object(u.h)("label",{for:r+"Input"},l&&Object(u.h)("i",{class:l+" text-muted"})," ",c),Object(u.h)("div",{class:"container-fluid px-0"},Object(u.h)("div",{class:"row"},Object(u.h)("div",{class:"w-100 overflow-hidden"},Object(u.h)("div",{class:"d-flex flex-row flex-nowrap pb-2 px-1",style:"overflow: auto; scroll-snap-type: x mandatory;"},s&&s.map((function(t,a){var o=h===t.id,r=i&&b.a.isArray(i.statuses)&&i.statuses.indexOf(t.id)>-1;return Object(u.h)("div",{class:"col mb-2 px-0",ref:o||r?function(t){return e.container=t}:null},Object(u.h)("button",{class:"btn btn-block\n            \t\t\t\t\t\t\t\t\t\trounded-none "+(0===a?"rounded-pill-left":a+1===s.length?"rounded-pill-right":"")+"\n                                                    btn"+(o||r?"":"-outline")+"-"+(r?"info":"success")+"\n                                                    text-nowrap overflow-hidden",style:"text-overflow: ellipsis;",onClick:function(){return e.toggleStatus(t.id)}},n&&t.lang&&t.lang[n]?t.lang[n]:t.name))})))))),o[r+"."+i.id]?Object(u.h)("div",{class:"valid-feedback",style:"display: block;"},Object(u.h)(g.c,{id:"dogs.changes-saved"},"Endringene er lagret")):Object(u.h)("small",{id:r+"Help",class:"form-text text-muted"},d))},t}(u.Component))||l,T=Object(p.a)(d=function(e){function t(){return e.apply(this,arguments)||this}o(t,e);var s=t.prototype;return s.toggleStatus=function(e){var t=this.props,s=t.object,n=t.type,a=t.field,o=t.updateField,i=t.isNew,r=Object(m.i)(s[a]);o({id:s.id,field:a,value:r=r===e?null:e,type:n,isNew:i})},s.render=function(){var e=this,t=this.props.stores.userStore.dogPositions,s=this.props,n=s.saved,a=s.object,o=s.field,i=s.title,r=s.icon,c=s.help,l=Object(m.i)(a[o]);return Object(u.h)("div",{class:"form-group  mb-4 pb-1 border-bottom "+(n[o+"."+a.id]?"is-valid":"")},Object(u.h)("label",{for:o+"Input"},r&&Object(u.h)("i",{class:r+" text-muted"})," ",i),Object(u.h)("div",{class:"container-fluid px-0"},Object(u.h)("div",{class:"row"},t&&t.map((function(t){return Object(u.h)("div",{class:"offset-2 col-8 mb-2"},Object(u.h)("div",{class:"border rounded rounded-pill px-3 py-1 bg-"+(l===t.id?t.class||"success":""),onClick:function(){return e.toggleStatus(t.id)},style:"line-height: 1.1em; cursor: pointer; pointer-events: inherit;"},Object(u.h)("small",null,t.name)))})))),n[o+"."+a.id]?Object(u.h)("div",{class:"valid-feedback",style:"display: block;"},Object(u.h)(g.c,{id:"dogs.changes-saved"},"Endringene er lagret")):Object(u.h)("small",{id:o+"Help",class:"form-text text-muted"},c))},t}(u.Component))||d,D=Object(p.a)(h=function(t){function s(e){var s;return(s=t.call(this,e)||this).insertDog=function(){return new Promise((function(e,t){return Promise.resolve(s.props.stores.dogStore.insert(function(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?n(Object(s),!0).forEach((function(t){a(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):n(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}({},s.state.newDog))).then((function(){try{return s.resetDog(),Object(f.route)("/dogs/"),e()}catch(e){return t(e)}}),t)}))},s.updateField=function(e){var t=e.target.dataset,n=t.id,a=t.field,o=t.type,i=t.elementtype,r=t.isNew,c=e.target,l=c.value,d=c.min,h=c.max;"date"===c.type&&d&&h?l>=d&&l<=h&&s.updateFieldValue({id:parseInt(n,10),field:a,value:l,type:o,elementtype:i,isNew:r}):s.updateFieldValue({id:parseInt(n,10),field:a,value:l,type:o,elementtype:i,isNew:r})},s.updateFieldValue=function(e){var t=e.id,n=e.field,a=e.value,o=e.datatype,i=e.elementtype,r=e.isNew,c=void 0!==r&&r,l=e.skipTimer,d=void 0!==l&&l,h=s.props.stores.dogStore,u=a,b=a,p=h.dog;"images"===n&&Array.isArray(p.images)&&Array.isArray(a)&&(b=[].concat(p.images,a)),"files"===n&&Array.isArray(p.files)&&(b=Array.isArray(a)?[].concat(p.files,a):[].concat(p.files,[a])),"achievements"===n&&Array.isArray(p.achievements)&&(b=Array.isArray(a)?[].concat(p.achievements,a):[].concat(p.achievements,[a])),"links"===n&&Array.isArray(p.links)&&(b=Array.isArray(a)?[].concat(p.links,a):[].concat(p.links,[a])),"array"!==o||Array.isArray(a)||(u="number"===i?a.split(",").map((function(e){return parseFloat(e)||e})):a.split(",")),c?h.updateObjectKeyValue("newDog",n,a):(h.updateField(t,n,b),d?s.doUpdateField(t,n,u):(clearTimeout(s.updateTimer[n]),s.updateTimer[n]=setTimeout((function(){return new Promise((function(e){return s.doUpdateField(t,n,u),e()}))}),500)))},s.chooseMother=function(e){var t=s.props.stores.dogStore,n=t.dog,a=parseInt(e.target.value,10),o=t.findDog(a);o?(s.updateFieldValue({id:n.id,field:"mother",value:o.id,skipTimer:!0}),s.updateFieldValue({id:n.id,field:"motherName",value:o.name,skipTimer:!0}),s.updateFieldValue({id:n.id,field:"motherChipId",value:o.chipId,skipTimer:!0})):s.updateFieldValue({id:n.id,field:"mother",value:null,skipTimer:!0})},s.chooseFather=function(e){var t=s.props.stores.dogStore,n=t.dog,a=parseInt(e.target.value,10),o=t.findDog(a);o?(s.updateFieldValue({id:n.id,field:"father",value:o.id,skipTimer:!0}),s.updateFieldValue({id:n.id,field:"fatherName",value:o.name,skipTimer:!0}),s.updateFieldValue({id:n.id,field:"fatherChipId",value:o.chipId,skipTimer:!0})):s.updateFieldValue({id:n.id,field:"father",value:null,skipTimer:!0})},s.chooseSubmenu=function(e){s.setState({submenu:e.target.parentElement.dataset.menu||e.target.dataset.menu})},s.back=function(){s.props.stores.history.goBack()},s.state={newDog:{},submenu:e.submenu||"info"},s.updateTimer={},s}o(s,t);var i=s.prototype;return i.loadDog=function(e){return new Promise(function(t,s){var n,a;return void 0===e&&(e=this.props),n=e.id,(a=this.props.stores.dogStore).cleanupMemoryDetail(),Promise.resolve(a.load(n,!1,{addData:["team","user","workoutSummary","vaccineStatuses","historyStatuses","vaccineLogStatuses","allDogs"]})).then((function(){try{return t()}catch(e){return s(e)}}),s)}.bind(this))},i.resetDog=function(){this.setState({newDog:{},createNew:!1})},i.doUpdateField=function(e,t,s){return new Promise(function(n,a){return Promise.resolve(this.props.stores.dogStore.saveField(e,t,s)).then((function(){try{return n()}catch(e){return a(e)}}),a)}.bind(this))},i.componentDidMount=function(){this.loadDog()},i.componentWillReceiveProps=function(e){e.id!==this.props.id&&this.loadDog(e)},i.render=function(){var t=this.state,s=t.submenu,n=this.props.stores,a=n.dogStore,o=a.saved,i=a.dog,r=a.findDogsByGender("female"),c=a.findDogsByGender("male"),l=O.a.hasBirthday(i.birth),d=i.birth?Math.ceil(O.a.daysUntilNextBirthday(i.birth)):365,h=i.name;return Object(u.h)(e,null,Object(u.h)("div",{class:"d-flex position-relative"},Object(u.h)("div",{class:"text-center border rounded-circle imageRounded float-right",style:i.image?'background-image: url("'+i.image.s3SmallLink+'");':""},!i.image&&Object(u.h)("i",{class:"fas fa-dog text-muted mt-3",style:"font-size: 40px;"})),Object(u.h)("div",{class:"flex-grow-1 pl-3"},Object(u.h)("h5",null,h,l&&Object(u.h)(e,null,Object(u.h)("i",{class:"fas fa-birthday-cake ml-3"}))),Object(u.h)("span",null,d<7&&Object(u.h)(e,null,Object(u.h)("span",{class:"text-muted mr-2"},Object(u.h)("i",{class:"fas fa-birthday-cake"})," in ",d," days")),i.birth&&Object(u.h)("span",{class:"mr-2"},b.a.age(i.birth,i.deceased)),"female"===i.gender?Object(u.h)("i",{class:"fas fa-venus"}):Object(u.h)("i",{class:"fas fa-mars"})))),Object(u.h)("div",{class:"d-flex flex-row flex-nowrap pb-2 px-1",style:"overflow: auto; scroll-snap-type: x mandatory;"},Object(u.h)("div",{class:"col px-0 pt-2"},Object(u.h)("button",{class:"btn btn-block rounded-pill-left rounded-none "+("info"===s?"btn-primary":"btn-outline-primary")+" text-nowrap",style:"text-overflow: ellipsis; overflow: hidden;","data-menu":"info",onClick:this.chooseSubmenu},Object(u.h)("i",{class:"fas fa-info-circle"})," ",Object(u.h)(g.c,{id:"dogs.info"},"Info")),"info"===s&&Object(u.h)(x.a,{horizontal:"center",vertical:"end"})),Object(u.h)("div",{class:"col px-0 pt-2"},Object(u.h)("button",{class:"btn btn-block rounded-none "+("pictures"===s?"btn-primary":"btn-outline-primary")+" text-nowrap",style:"text-overflow: ellipsis; overflow: hidden;","data-menu":"pictures",onClick:this.chooseSubmenu},Object(u.h)("i",{class:"fas fa-images"})," ",Object(u.h)(g.c,{id:"dogs.pictures"},"Pictures")),"pictures"===s&&Object(u.h)(x.a,{horizontal:"center",vertical:"end"})),Object(u.h)("div",{class:"col px-0 pt-2"},Object(u.h)("button",{class:"btn btn-block rounded-none "+("team"===s?"btn-primary":"btn-outline-primary")+" text-nowrap",style:"text-overflow: ellipsis; overflow: hidden;","data-menu":"team",onClick:this.chooseSubmenu},Object(u.h)("i",{class:"fas fa-users"})," ",Object(u.h)(g.c,{id:"dogs.team"},"Team")),"team"===s&&Object(u.h)(x.a,{horizontal:"center",vertical:"end"})),Object(u.h)("div",{class:"col px-0 pt-2"},Object(u.h)("button",{class:"btn btn-block rounded-pill-right rounded-none "+("advanced"===s?"btn-primary":"btn-outline-primary")+" text-nowrap",style:"text-overflow: ellipsis; overflow: hidden;","data-menu":"advanced",onClick:this.chooseSubmenu},Object(u.h)("i",{class:"fas fa-cogs"})," ",Object(u.h)(g.c,{id:"dogs.advanced"},"Advanced")),"advanced"===s&&Object(u.h)(x.a,{horizontal:"center",vertical:"end"}))),Object(u.h)("div",{class:"w-100 overflow-auto position-relative",style:"max-height: 50vh;"},Object(u.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3"},"info"===s&&Object(u.h)(e,null,Object(u.h)(g.b,null,Object(u.h)(k,{saved:o,dog:i,field:"name",title:Object(u.h)(g.c,{id:"dogs.full-name"},"Fullt navn"),help:Object(u.h)(g.c,{id:"dogs.full-name-help"},"Fullt navn på hunden."),onInput:this.updateField}),Object(u.h)(k,{saved:o,dog:i,field:"shortname",title:Object(u.h)(g.c,{id:"dogs.short-name"},"Kallenavn"),help:Object(u.h)(g.c,{id:"dogs.short-name-help"},"Kallenavnet på hunden. Hva roper du på innkalling?"),onInput:this.updateField}),Object(u.h)(k,{saved:o,dog:i,field:"gender",type:"select",datalist:[["male",Object(u.h)(g.c,{id:"dogs.gender-male"},"Male")],["female",Object(u.h)(g.c,{id:"dogs.gender-female"},"Female")]],title:Object(u.h)(g.c,{id:"dogs.gender"},"Kjønn"),help:Object(u.h)(g.c,{id:"dogs.gender-help"},"Kjønn på hunden."),onInput:this.updateField}),Object(u.h)(k,{saved:o,dog:i,field:"chipId",title:Object(u.h)(g.c,{id:"dogs.chip-id"},"Chip ID"),help:Object(u.h)(g.c,{id:"dogs.chip-id-help"},"Chip ID på hunden. Står ofte i vetrinærhåndbok eller passet."),onInput:this.updateField}),Object(u.h)(k,{saved:o,dog:i,field:"birth",type:"date",min:"2000-01-01",max:"today",title:Object(u.h)(g.c,{id:"dogs.birth"},"Fødselsdato"),help:Object(u.h)(g.c,{id:"dogs.birth-help"},"Fødselsdato på hunden."),onInput:this.updateField}),Object(u.h)(I,{stores:this.props.stores,saved:o,object:i,type:"number",field:"harness",title:Object(u.h)(g.c,{id:"dogs.harness-size"},"Selestørrelse"),help:Object(u.h)(g.c,{id:"dogs.harness-size-help"},"Sele til hunden"),updateField:this.updateFieldValue}),Object(u.h)(k,{saved:o,dog:i,field:"description",icon:"fas fa-paragraph",type:"textarea",title:Object(u.h)(g.c,{id:"dogs.description"},"Beskrivelse"),help:Object(u.h)(g.c,{id:"dogs.description-help"},"Beskrivelse av hunden."),onInput:this.updateField}))),"status"===s&&Object(u.h)(e,null,Object(u.h)(g.b,null,Object(u.h)(C,{stores:this.props.stores,saved:o,object:i,type:"number",field:"status",title:Object(u.h)(g.c,{id:"dogs.status"},"Status"),help:Object(u.h)(g.c,{id:"dogs.status-help"},"Status til hunden"),updateField:this.updateFieldValue}),Object(u.h)(k,{saved:o,dog:i,field:"specialNeeds",title:Object(u.h)(g.c,{id:"dogs.special-needs"},"Spesielle behov"),help:Object(u.h)(g.c,{id:"dogs.special-needs-help"},'Har hunden spesielle behov? Trenger ekstra mat, utstyr eller annet? Eks: "Ekstra fett", "Husk ulveklobandasje", etc.'),onInput:this.updateField}))),"pictures"===s&&Object(u.h)(e,null,Object(u.h)(g.b,null,Object(u.h)(k,{saved:o,dog:i,field:"image",type:"image",icon:"fas fa-portrait",stores:this.props.stores,title:Object(u.h)(g.c,{id:"dogs.profile-photo"},"Profilbilde"),help:Object(u.h)(g.c,{id:"dogs.profile-photo-help"},"Profilbilde av hunden."),onInput:this.updateField,updateField:this.updateFieldValue,showImages:!0}))),"team"===s&&Object(u.h)(e,null,Object(u.h)(g.b,null,Object(u.h)(S,{stores:this.props.stores,saved:o,object:i,type:"number",field:"team",title:Object(u.h)(g.c,{id:"dogs.team"},"Team"),help:Object(u.h)(g.c,{id:"dogs.team-help"},"Team som hunden er på."),updateField:this.updateFieldValue}),Object(u.h)(T,{stores:this.props.stores,saved:o,object:i,type:"number",field:"position",title:Object(u.h)(g.c,{id:"dogs.position"},"Plass i spannet"),help:Object(u.h)(g.c,{id:"dogs.position-help"},"Foretrukket plass i spannet."),updateField:this.updateFieldValue}))),"relations"===s&&Object(u.h)(e,null,Object(u.h)("h5",{class:"mt-5"},Object(u.h)(g.c,{id:"dogs.mother"},"Mor")),Object(u.h)("select",{class:"form-control","aria-describedby":"fatherHelp",value:i.mother,onInput:this.chooseMother},Object(u.h)("option",{value:""},"-- ",Object(u.h)(g.c,{id:"dogs.choose-mother"},"Velg blant dine hunder")," --"),r&&r.map((function(e){return Object(u.h)("option",{value:e.id},e.name," - ",b.a.age(e.birth,e.deceased))}))),Object(u.h)(g.b,null,Object(u.h)(k,{saved:o,dog:i,field:"motherName",type:"text",title:Object(u.h)(g.c,{id:"dogs.mother-name"},"Navn på mor"),help:Object(u.h)(g.c,{id:"dogs.mother-name-help"},"Navn på moren til denne hunden."),onInput:this.updateField}),Object(u.h)(k,{saved:o,dog:i,field:"motherChipId",type:"text",title:Object(u.h)(g.c,{id:"dogs.mother-chipid"},"Chip ID på mor"),help:Object(u.h)(g.c,{id:"dogs.mother-chipid-help"},"Chip ID til moren til denne hunden. Dersom hunden finnes blant dine hunder, så vil den bli koblet sammen."),onInput:this.updateField}),Object(u.h)(k,{saved:o,dog:i,field:"motherComment",title:Object(u.h)(g.c,{id:"dogs.mother-comment"},"Kommentar til mor"),help:Object(u.h)(g.c,{id:"dogs.mother-comment-help"},"Kommentar til moren til denne hunden."),onInput:this.updateField})),Object(u.h)("h5",{class:"mt-5"},Object(u.h)(g.c,{id:"dogs.father"},"Far")),Object(u.h)("select",{class:"form-control","aria-describedby":"fatherHelp",value:i.father,onInput:this.chooseFather},Object(u.h)("option",{value:""},"-- ",Object(u.h)(g.c,{id:"dogs.choose-father"},"Velg blant dine hunder")," --"),c&&c.map((function(e){return Object(u.h)("option",{value:e.id},e.name," - ",b.a.age(e.birth,e.deceased))}))),Object(u.h)(g.b,null,Object(u.h)(k,{saved:o,dog:i,field:"fatherName",type:"text",title:Object(u.h)(g.c,{id:"dogs.father-name"},"Navn på far"),help:Object(u.h)(g.c,{id:"dogs.father-name-help"},"Navn på faren til denne hunden."),onInput:this.updateField}),Object(u.h)(k,{saved:o,dog:i,field:"fatherChipId",type:"text",title:Object(u.h)(g.c,{id:"dogs.father-chipid"},"Chip ID på far"),help:Object(u.h)(g.c,{id:"dogs.father-chipid-help"},"Chip ID til faren til denne hunden. Dersom hunden finnes blant dine hunder, så vil den bli koblet sammen."),onInput:this.updateField}),Object(u.h)(k,{saved:o,dog:i,field:"fatherComment",title:Object(u.h)(g.c,{id:"dogs.father-comment"},"Kommentar til far"),help:Object(u.h)(g.c,{id:"dogs.father-comment-help"},"Kommentar til faren til denne hunden."),onInput:this.updateField}))),"links"===s&&Object(u.h)(e,null,Object(u.h)(g.b,null,Object(u.h)(k,{saved:o,dog:i,field:"links",type:"text",icon:"fas fa-link",stores:this.props.stores,title:Object(u.h)(g.c,{id:"dogs.links"},"Linker"),help:Object(u.h)(g.c,{id:"dogs.links-help"},"Linker til denne hunden."),onInput:this.updateField,updateField:this.updateFieldValue}))),"achievements"===s&&Object(u.h)(e,null,Object(u.h)(g.b,null,Object(u.h)(k,{saved:o,dog:i,field:"achievements",type:"text",icon:"fas fa-clock",stores:this.props.stores,title:Object(u.h)(g.c,{id:"dogs.achievements"},"Bragder"),help:Object(u.h)(g.c,{id:"dogs.achievements-help"},"Bragder til denne hunden."),onInput:this.updateField,updateField:this.updateFieldValue}))),"advanced"===s&&Object(u.h)(e,null,Object(u.h)(g.b,null,Object(u.h)(k,{saved:o,dog:i,field:"files",type:"file",icon:"fas fa-file",stores:this.props.stores,title:Object(u.h)(g.c,{id:"dogs.files"},"Files"),help:Object(u.h)(g.c,{id:"dogs.files-help"},"Filer til denne hunden."),onInput:this.updateField,updateField:this.updateFieldValue}))))))},s}(u.Component))||h;t.a=D}).call(this,s("hosL").Fragment)},ABWa:function(e){e.exports={pointerCursor:"pointerCursor__2Gpay","marker-cluster-custom":"marker-cluster-custom__1z-5y"}},AEg1:function(e,t,s){"use strict";(function(e){function n(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function a(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}var o,i=s("hosL"),r=s("Utv1"),c=s("/eY4"),l=s("OhSV"),d=s("go65"),h=s("om2D"),u=s("ZOvn"),b={showAddImage:!1,showTeamChange:!1,showChangeVisibility:!1,showChangeType:!1,sendButtonEnabled:!0},p=Object(c.a)(o=function(t){function s(e){var s;return(s=t.call(this,e)||this).beforeImagesUploaded=function(){s.setState({sendButtonEnabled:!1})},s.afterImagesUploaded=function(){s.setState({sendButtonEnabled:!0})},s.addStory=function(){return new Promise((function(e,t){var n,a,o,i,r,c,l,d,h,b,p,m,f,g,O;return o=void 0===(a=(n=s.state).story)?{}:a,i=n.showAddImage,l=void 0===(c=(r=s.props).callback)?function(){}:c,h=void 0===(d=r.hashTags)?[]:d,b=r.postfix,m=void 0===(p=r.topic)?"team-"+o.team:p,f=s.props.stores.storyStore,n.sendButtonEnabled&&o.body?(s.setState({sendButtonEnabled:!1}),g=o.body,b&&(g+="\n\n"+b),h&&h.length>0&&(g+="\n\n"+h.map((function(e){return"#"+e})).join(" ")),Promise.resolve(f.insert({type:o.type,title:o.title,body:g,pinned:o.pinned,images:o.images,public:o.public?1:0,team:o.team,urlText:o.urlText,url:o.url,currency:o.currency,price:o.price,code:o.code,country:o.country,region:o.region,startDate:o.startDate,endDate:o.endDate,topic:m})).then(function(n){try{if((O=n)&&201===O.status)return Promise.resolve(f.loadPublicFeed({hashtags:h})).then(function(){try{return s.setState({story:{type:1,title:"",body:"",pinned:null,images:[],public:1,urlText:"",url:"",currency:"",price:null,code:"",country:"",region:"",startDate:null,endDate:null}},(function(){u.a.resizeTextarea(s.inputRef.newStoryBody),i&&s.addImage()})),l(O.data),a.call(this)}catch(e){return t(e)}}.bind(this),t);function a(){return s.setState({sendButtonEnabled:!0}),e()}return a.call(this)}catch(e){return t(e)}}.bind(this),t)):e(!1)}))},s.addImages=function(e){var t,n=s.state.story;(t=n.images).push.apply(t,e.value),s.setState({story:n})},s.addImage=function(){s.setState({showAddImage:!s.state.showAddImage})},s.changeVisibility=function(){s.setState({showChangeVisibility:!s.state.showChangeVisibility})},s.changePinned=function(){s.setState({showChangeVisibility:!s.state.showChangeVisibility})},s.changeType=function(){s.setState({showChangeType:!s.state.showChangeType})},s.toggleTeamChange=function(){s.setState({showTeamChange:!s.state.showTeamChange})},s.handleImageErrored=function(e){var t=e.target;t.onerror=null,setTimeout((function(){t.src+="?"+new Date}),1e3)},s.setPublicTeam=function(){var e=s.props.stores.userStore.findPublicTeams();if(r.a.isArray(e)&&e.length>0){var t=s.state.story;t.team=e[0].id,s.setState({story:t})}},s.setFocus=function(e){s.setState({hasFocus:!0}),u.a.resizeTextarea(e.target)},s.removeFocus=function(){s.setState({hasFocus:!1})},s.state=function(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?n(Object(s),!0).forEach((function(t){a(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):n(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}({story:{type:1,title:"",body:"",images:[],public:1,urlText:"",url:"",currency:"",price:0,code:"",country:"",region:"",startDate:"",endDate:""}},b),s.inputRef={},s}var o,c;c=t,(o=s).prototype=Object.create(c.prototype),o.prototype.constructor=o,o.__proto__=c;var p=s.prototype;return p.componentDidMount=function(){this.setPublicTeam()},p.render=function(){var t=this,s=this.props,n=s.col,a=void 0===n?12:n,o=s.offset,c=void 0===o?0:o,b=s.hashTags,p=void 0===b?[]:b,m=this.state,f=m.story,g=void 0===f?{}:f,O=m.showAddImage,j=m.showTeamChange,v=m.showChangeVisibility,y=m.showChangeType,w=m.sendButtonEnabled,x=m.hasFocus,k=this.props.stores,S=k.userStore,I=k.appState,C=S.user,T=void 0===C?{}:C,D=S.isAdmin,P=T.firstname?""+r.a.ucfirst(T.firstname,!0)+r.a.ucfirst(T.lastname,!0):""+r.a.ucfirst(T.email||"",!0),R=T.image||(T.images?T.images[0]:void 0);if(g.team){var A=parseInt(g.team,10),z=S.findTeam(A,!0);R=z.image||(z.images?z.images[0]:void 0)}var F=I.darkmode;return Object(i.h)("div",{class:"w-100 px-0"},Object(i.h)("div",{class:"row"},Object(i.h)("div",{class:"col-"+a+" offset-"+c+" col-sm-8 col-lg-6 offset-sm-2 offset-lg-3 rounded rounded-lg pt-3 pb-1 bg-"+(F?"black":"white")+" shadow-sm mb-1"},Object(i.h)("div",{class:"d-flex mb-0 position-relative w-100"},Object(i.h)("div",{class:"position-relative"},Object(i.h)("div",{class:"text-center border rounded-circle imageRounded imageRoundedSmall pointerCursor",style:(R?"background-image: url('"+R.s3SmallLink+"'); background-size: cover;":"")+" border-width: 3px !important;",onClick:this.toggleTeamChange},!R&&Object(i.h)("span",{class:"font-weight-lighter",style:"font-size: 15px;"},P)),Object(i.h)("div",{class:"position-absolute",style:"top: 16px; right: 0px;"},Object(i.h)("small",{class:"text-white",style:"font-size: 1.5em;"},Object(i.h)("i",{class:"fas fa-caret-down pointerCursor",onClick:this.toggleTeamChange})))),Object(i.h)("div",{class:"col pl-3 pr-0",style:"line-height: 1.2em;"},Object(i.h)("div",{class:"d-flex bd-highlight"},Object(i.h)("div",{class:"p-0 w-100 bd-highlight"},Object(i.h)("label",{class:"sr-only",for:"inlineFormInput"},Object(i.h)(l.c,{id:"story.body"},"Story")),Object(i.h)("div",{class:"border rounded rounded-lg position-relative"},Object(i.h)(l.b,null,Object(i.h)("textarea",{class:"form-control-plaintext px-2",type:"text",placeholder:Object(i.h)(l.c,{id:"story.write-body"},"Hva tenker du på?.."),onInput:Object(d.a)(this,"story.body"),onKeyUp:u.a.resizeTextarea,onFocus:this.setFocus,style:"height: 2.3em;",value:g.body,ref:function(e){return t.inputRef.newStoryBody=e}})),x&&Object(i.h)("div",{class:"position-absolute",style:"bottom: 8px; right: 10px; font-size: 1.2em;"},Object(i.h)("i",{class:"fas fa-image pointerCursor","data-id":g.id,onClick:this.addImage}),Object(i.h)("i",{class:"fas fa-"+(1===g.public?"globe-europe":"users")+" pointerCursor ml-2","data-id":g.id,onClick:this.changeVisibility}),D&&Object(i.h)("i",{class:"fas fa-cog pointerCursor ml-2","data-id":g.id,onClick:this.changeType}))),p&&p.length>0&&Object(i.h)(e,null,p.map((function(t){return Object(i.h)(e,null,Object(i.h)("span",{class:"badge badge-secondary mr-2 my-1"},Object(i.h)("a",{href:"/stories/tag/"+t,class:"text-white"},"#",t)))})))),Object(i.h)("div",{class:"p-0 pl-2 flex-shrink-1 bd-highlight pt-auto"},Object(i.h)("button",{type:"button",class:"btn btn-"+(w?"primary":"secondary")+" ml-1",disabled:!w,onClick:this.addStory},Object(i.h)("i",{class:"fas fa-paper-plane"})))))),Object(i.h)("div",null,Object(i.h)("div",{class:"row"},j&&Object(i.h)(e,null,Object(i.h)("div",{class:"col-12 text-center mt-2"},Object(i.h)("div",{class:"form-group"},Object(i.h)("small",null,Object(i.h)("select",{class:"custom-select custom-select-sm",id:"team",onInput:Object(d.a)(this,"story.team"),onChange:this.toggleTeamChange},Object(i.h)("option",{value:""},"-- ",Object(i.h)(l.c,{id:"story.team-choose"},"Velg team")," --"),r.a.isArray(T.teams)&&T.teams.map((function(e){var t=S.findTeam(e,!0);return t&&t.public?Object(i.h)("option",{value:t.id,selected:g.team==t.id?"selected":""},t.name):""})),!T.teams&&Object(i.h)(e,null,Object(i.h)("option",{value:""},"No public teams"))))))),v&&Object(i.h)(e,null,D&&Object(i.h)(e,null,Object(i.h)("div",{class:"col-12 text-center mt-2"},Object(i.h)("div",{class:"form-group"},Object(i.h)("small",null,Object(i.h)("label",{for:"pinned"},"Pinned to top:"),Object(i.h)("input",{id:"pinned",type:"checkbox",onInput:Object(d.a)(this,"story.pinned"),value:1,checked:g.pinned?1:0}))))),Object(i.h)("div",{class:"col-12 text-center mt-2"},Object(i.h)("div",{class:"form-group"},Object(i.h)("small",null,Object(i.h)("select",{class:"custom-select custom-select-sm",id:"team",onInput:Object(d.a)(this,"story.public"),value:g.public,onChange:this.changeVisibility},Object(i.h)("option",{value:0,selected:0==g.public?"selected":""},"👥 ",Object(i.h)(l.c,{id:"story.visibility-followers"},"Kun synlig for de som følger deg.")),Object(i.h)("option",{value:1,selected:1==g.public?"selected":""},"🌍 ",Object(i.h)(l.c,{id:"story.visibility-public"},"Synlig for alle som bruker appen."))))))),y&&Object(i.h)(e,null,Object(i.h)("div",{class:"col-12 text-center mt-2"},Object(i.h)("div",{class:"form-group"},Object(i.h)("small",null,Object(i.h)("select",{class:"custom-select custom-select-sm",id:"team",onInput:Object(d.a)(this,"story.type"),value:g.type,onChange:this.changeType},Object(i.h)("option",{value:""},"-- ",Object(i.h)(l.c,{id:"story.type-choose"},"Velg type")," --"),Object(i.h)("option",{value:1,selected:1==g.type?"selected":""},"✍️ ",Object(i.h)(l.c,{id:"story.type-regular"},"Vanlig")),Object(i.h)("option",{value:2,selected:2==g.type?"selected":""},"🚀 ",Object(i.h)(l.c,{id:"story.type-ad"},"Annonse")),Object(i.h)("option",{value:3,selected:3==g.type?"selected":""},"📄 ",Object(i.h)(l.c,{id:"story.type-article"},"Artikkel"))))))),O&&Object(i.h)(e,null,Object(i.h)("div",{class:"col-12 text-center mt-2"},Object(i.h)("div",{class:"container-fluid"},Object(i.h)("div",{class:"row"},r.a.isArray(g.images)&&g.images.map((function(e){return Object(i.h)("div",{class:"col-3 p-1"},Object(i.h)("img",{src:e.s3SmallLink,class:"img-fluid",onError:t.handleImageErrored}),Object(i.h)("button",{class:"btn btn-sm btn-link",onClick:t.removeImage,"data-name":e.name},Object(i.h)("i",{class:"fas fa-trash"})," Del"))})))),Object(i.h)(h.a,{object:g,updateField:this.addImages,before:this.beforeImagesUploaded,after:this.afterImagesUploaded,autoOpen:!0}))),g.type>1&&Object(i.h)(e,null,Object(i.h)("div",{class:"col-12 mt-3"},Object(i.h)("label",null,Object(i.h)(l.c,{id:"story.url-text"},"URL text")),Object(i.h)("div",{class:"form-group"},Object(i.h)("small",null,Object(i.h)("input",{class:"form-control",type:"text",name:"urlText",onInput:Object(d.a)(this,"story.urlText"),value:g.urlText})))),Object(i.h)("div",{class:"col-12 mt-3"},Object(i.h)("label",null,Object(i.h)(l.c,{id:"story.url"},"URL")),Object(i.h)("div",{class:"form-group"},Object(i.h)("small",null,Object(i.h)("input",{class:"form-control",type:"text",name:"url",onInput:Object(d.a)(this,"story.url"),value:g.url}))))),2==g.type&&Object(i.h)(e,null,Object(i.h)("div",{class:"col-12 mt-3"},Object(i.h)("label",null,Object(i.h)(l.c,{id:"story.code"},"Code")),Object(i.h)("div",{class:"form-group"},Object(i.h)("small",null,Object(i.h)("input",{class:"form-control",type:"text",name:"code",onInput:Object(d.a)(this,"story.code"),value:g.code})))),Object(i.h)("div",{class:"col-12"},Object(i.h)("label",null,Object(i.h)(l.c,{id:"story.region"},"Region")),Object(i.h)("div",{class:"form-group"},Object(i.h)("small",null,Object(i.h)("input",{class:"form-control",type:"text",name:"region",onInput:Object(d.a)(this,"story.region"),value:g.region})))),Object(i.h)("div",{class:"col-12"},Object(i.h)("label",null,Object(i.h)(l.c,{id:"story.country"},"Country")),Object(i.h)("div",{class:"form-group"},Object(i.h)("small",null,Object(i.h)("input",{class:"form-control",type:"text",name:"country",onInput:Object(d.a)(this,"story.country"),value:g.country})))),Object(i.h)("div",{class:"col-4"},Object(i.h)("label",null,Object(i.h)(l.c,{id:"story.currency"},"Currency")),Object(i.h)("div",{class:"form-group"},Object(i.h)("small",null,Object(i.h)("input",{class:"form-control",type:"text",name:"currency",onInput:Object(d.a)(this,"story.currency"),value:g.currency})))),Object(i.h)("div",{class:"col-8"},Object(i.h)("label",null,Object(i.h)(l.c,{id:"story.price"},"Price")),Object(i.h)("div",{class:"form-group"},Object(i.h)("small",null,Object(i.h)("input",{class:"form-control",type:"text",name:"price",onInput:Object(d.a)(this,"story.price"),value:g.price}))))))))))},s}(i.Component))||o;t.a=p}).call(this,s("hosL").Fragment)},B95u:function(e,t,s){"use strict";(function(e){function n(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function a(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?n(Object(s),!0).forEach((function(t){o(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):n(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function o(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}var i,r=s("hosL"),c=s("Utv1"),l=s("/eY4"),d=s("cneo"),h=s("OhSV"),u=s("fh8t"),b=s.n(u),p=s("go65"),m=s("5uob"),f=(s("ETxl"),s("ZOvn")),g={showAddComment:{},showAllComments:!1,showAllReplies:{},viewImageIdx:{},likeComment:{},likeReply:{},showOriginal:{}},O=Object(l.a)(i=function(t){function s(e){var s;return(s=t.call(this,e)||this).addLikeComment=function(e){return new Promise((function(t,n){var a,o,i,r,c,l,d;return o=void 0===(a=s.props.callback)?function(){}:a,i=e.target.closest(".commentContainer").dataset.id,r=s.props.story,c=s.props.stores.storyStore,(l=s.state.likeComment)[i]=!0,s.setState({likeComment:l}),setTimeout((function(){var e=s.state.likeComment;delete e[i],s.setState({likeComment:e})}),1200),Promise.resolve(c.likeStoryComment({id:r.id,commentId:i})).then((function(e){try{return(d=e)&&200===d.status&&o({type:"likeComment",story:r,commentId:i,response:d}),t(!0)}catch(e){return n(e)}}),n)}))},s.likeReply=function(e){return new Promise((function(t,n){var a,o,i,r,c,l,d,h;return o=void 0===(a=s.props.callback)?function(){}:a,i=e.target.closest(".replyContainer").dataset.id,r=e.target.closest(".replyContainer").dataset.comment,c=s.props.story,l=s.props.stores.storyStore,(d=s.state.likeReply)[i]=!0,s.setState({likeReply:d}),setTimeout((function(){var e=s.state.likeReply;delete e[i],s.setState({likeReply:e})}),1200),Promise.resolve(l.likeStoryCommentReply({id:c.id,replyId:i,commentId:r})).then((function(e){try{return(h=e)&&200===h.status&&o({type:"likeReply",story:c,commentId:r,replyId:i,response:h}),t()}catch(e){return n(e)}}),n)}))},s.replyComment=function(e){return new Promise((function(t){var n=e.target.parentElement.dataset.id||e.target.dataset.id,a=s.state.showAddComment;return a[n]=!a[n],s.setState({showAddComment:a},(function(){s.inputRef[n]&&s.inputRef[n].focus()})),t()}))},s.toggleComments=function(){s.setState({showAllComments:!s.state.showAllComments})},s.toggleReplies=function(e){var t=e.target.parentElement.dataset.id||e.target.dataset.id,n=s.state.showAllReplies;n[t]=!n[t],s.setState({showAllReplies:n})},s.toggleMenu=function(e){var t=e.target.closest("i").dataset.id,n=s.state.showMenu,a=void 0===n?{}:n;a[t]=!a[t],s.setState({showDeleteComment:{},showEdit:{},showMenu:a})},s.toggleEdit=function(e){var t=e.target.closest("button").dataset,n=t.id,a=t.comment,o=s.state.showEdit,i=void 0===o?{}:o;i[n]=!i[n],s.setState({showDeleteComment:{},showEdit:i,showMenu:{},commentEditText:a})},s.toggleDeleteComment=function(e){var t=e.target.closest("button").dataset.id,n=s.state.showDeleteComment,a=void 0===n?{}:n;a[t]=!a[t],s.setState({showDeleteComment:a,showEdit:{},showMenu:{}})},s.deleteComment=function(e){return new Promise((function(t,n){var a;return a=e.target.closest("button").dataset.id,Promise.resolve(s.props.stores.storyStore.deleteCommentStory({id:s.props.story.id,commentId:a})).then((function(){try{return s.setState({commentEditText:"",showDeleteComment:{},showEdit:{},showMenu:{}}),t()}catch(e){return n(e)}}),n)}))},s.deleteCommentReply=function(e){return new Promise((function(t,n){var a;return a=e.target.closest("button").dataset,Promise.resolve(s.props.stores.storyStore.deleteCommentReplyStory({id:s.props.story.id,commentId:a.commentid,replyId:a.id})).then((function(){try{return s.setState({commentEditText:"",showDeleteComment:{},showEdit:{},showMenu:{}}),t()}catch(e){return n(e)}}),n)}))},s.saveComment=function(e){return new Promise((function(t,n){var a;return a=e.target.closest("button").dataset.id,Promise.resolve(s.props.stores.storyStore.editCommentStory({id:s.props.story.id,commentId:a,comment:s.state.commentEditText})).then((function(){try{return s.setState({commentEditText:"",showDeleteComment:{},showEdit:{},showMenu:{}}),t()}catch(e){return n(e)}}),n)}))},s.saveCommentReply=function(e){return new Promise((function(t,n){var a;return a=e.target.closest("button").dataset,Promise.resolve(s.props.stores.storyStore.editCommentReplyStory({id:s.props.story.id,commentId:a.commentid,replyId:a.id,comment:s.state.commentEditText})).then((function(){try{return s.setState({commentEditText:"",showDeleteComment:{},showEdit:{},showMenu:{}}),t()}catch(e){return n(e)}}),n)}))},s.viewImage=function(e){var t=e.target.closest("img").dataset,n=s.state.viewImageIdx;n[t.id]=t.idx,s.setState({viewImageIdx:n})},s.translate=function(e){return new Promise((function(t,n){function a(){return s.setState({showOriginal:p,translatedText:f}),t()}var o,i,r,c,l,d,h,u,b,p,m,f,g;return e.preventDefault(),e.stopPropagation(),o=e.target.closest("button").dataset,c=s.props.story,d=(l=s.props.stores).storyStore,h=l.userStore.user,f=void 0===(m=(u=s.state).translatedText)?{}:m,(p=void 0===(b=u.showOriginal)?{}:b)[g=(r=o.commentid)+((i=o.replyid)?"-"+i:"")]=0,i?Promise.resolve(d.translateCommentReply({commentid:r,replyid:i,story:c,user:h})).then(function(e){try{return f[g]=e,a.call(this)}catch(e){return n(e)}}.bind(this),n):Promise.resolve(d.translateComment({commentid:r,story:c,user:h})).then(function(e){try{return f[g]=e,a.call(this)}catch(e){return n(e)}}.bind(this),n)}))},s.showOriginal=function(e){var t=e.target.closest("button").dataset,n=t.replyid,a=t.commentid;e.preventDefault(),e.stopPropagation();var o=s.state.showOriginal,i=void 0===o?{}:o;i[a+(n?"-"+n:"")]=1,s.setState({showOriginal:i})},s.state=a(a({},g),{},{showAllComments:e.showAllComments}),s.inputRef={},s}var n,o;return o=t,(n=s).prototype=Object.create(o.prototype),n.prototype.constructor=n,n.__proto__=o,s.prototype.render=function(){var t,s=this,n=this.state,a=n.showAddComment,o=n.showAllComments,i=n.showAllReplies,l=n.viewImageIdx,u=n.showMenu,g=void 0===u?{}:u,O=n.showEdit,j=void 0===O?{}:O,v=n.showDeleteComment,y=void 0===v?{}:v,w=n.commentEditText,x=n.likeComment,k=n.showOriginal,S=void 0===k?{}:k,I=n.translatedText,C=void 0===I?{}:I,T=this.props,D=T.story,P=T.callback,R=void 0===P?function(){}:P,A=T.initCall,z=void 0===A?function(){}:A,F=T.compact,L=this.props.stores,E=L.userStore,U=L.storyStore,M=E.user,_=M.language,N=void 0===_?"en":_,B=[],H=0,V=0;return D.comments&&(H=D.comments.length,o?B=D.comments:(t=void 0!==F&&F?0:2,B=D.comments.slice(Math.max(H-t,0))),V=B.length),Object(r.h)("div",null,D&&c.a.isArray(B)&&B.reverse().map((function(n){var o=n.user,u=void 0===o?{}:o,O=U.findPublicTeamByMembers(u.id),v=f.a.displayNameShort(u),k=f.a.displayName(u),I=u.image||(u.images?u.images[0]:void 0),T=n.likes&&n.likes.findIndex((function(e){return e.user===M.id}))>-1,P=[],A=0,F=0;n.comments&&(A=n.comments.length,F=(P=i[n.id]?n.comments:n.comments.slice(0,t)).length);var L=[];if(n.images){var E=Object(d.i)(n.images);L.push.apply(L,E)}var _=l[n.id]?l[n.id]:0,B=L&&L[_]?L[_]:null,H=U.getCommentTranslations({story:D,commentid:n.id,targetLang:N})||C[n.id],V=H||n.comment;return S[n.id]&&(V=n.comment),Object(r.h)("div",{class:"row"},Object(r.h)("div",{class:"col-11 offset-1 d-flex mb-2 position-relative"},Object(r.h)("div",{class:"text-center border rounded-circle imageRounded imageRoundedSmall",style:(I?'background-image: url("'+I.s3SmallLink+'"); background-size: cover;':"")+" border-width: 3px !important;"},!u.image&&Object(r.h)("span",{class:"font-weight-lighter",style:"font-size: 15px;"},v)),Object(r.h)("div",{class:"flex-grow-1 pl-3 pt-0",style:"line-height: 1.2em;"},Object(r.h)("div",{class:"bg-light p-2 rounded rounded-lg position-relative"},M.id===u.id&&Object(r.h)(e,null,Object(r.h)("span",{class:"float-right font-weight-lighter text-muted"},Object(r.h)("i",{class:"fas fa-ellipsis-h",onClick:s.toggleMenu,"data-id":n.id}))),g[n.id]&&Object(r.h)(e,null,Object(r.h)("div",{class:"position-absolute bg-white p-2 border rounded rounded-lg shadow-sm",style:"top: 30px; right: 10px; width: 60%; z-index: 999999;"},Object(r.h)("button",{class:"btn btn-link btn-block text-left",onClick:s.toggleEdit,"data-id":n.id,"data-comment":n.comment},Object(r.h)("i",{class:"fas fa-edit"})," Edit"),Object(r.h)("hr",null),Object(r.h)("button",{class:"btn btn-link btn-block text-left",onClick:s.toggleDeleteComment,"data-id":n.id},Object(r.h)("i",{class:"fas fa-trash-alt"})," Delete"))),Object(r.h)("div",null,Object(r.h)("span",{style:"font-size: 0.95em;"},Object(r.h)("h5",{class:"font-weight-bold mb-2",style:"font-size: 1.0em;"},u.uuidv4&&u.uuidv4!==M.uuidv4?Object(r.h)(e,null,Object(r.h)("a",{href:"/inbox/"+u.uuidv4},k)):Object(r.h)(e,null,k),O&&O.length>0&&Object(r.h)(e,null,Object(r.h)("span",{class:"font-weight-lighter text-muted ml-1"},O.filter((function(e){return 1===e.public})).slice(0,1).map((function(t){return Object(r.h)(e,null,"- ",Object(r.h)("a",{href:"/teams/public/"+t.uuidv4},t.name))}))))),j[n.id]?Object(r.h)(e,null,Object(r.h)("div",{class:"d-flex bd-highlight"},Object(r.h)("div",{class:"p-0 w-100 bd-highlight"},Object(r.h)("label",{class:"sr-only",for:"inlineFormInput"},Object(r.h)(h.c,{id:"comments.comment"},"Kommentar")),Object(r.h)("div",{class:"border rounded rounded-lg position-relative"},Object(r.h)(h.b,null,Object(r.h)("textarea",{class:"form-control-plaintext px-2",type:"text",placeholder:Object(r.h)(h.c,{id:"comments.write-comment"},"Skriv en kommentar..."),onInput:Object(p.a)(s,"commentEditText"),onKeyUp:f.a.resizeTextarea,onFocus:f.a.resizeTextarea,style:"height: 2.3em;",value:w})))),Object(r.h)("div",{class:"p-0 pl-2 flex-shrink-1 bd-highlight"},Object(r.h)("button",{type:"button",class:"btn btn-primary mb-2",onClick:s.saveComment,"data-id":n.id},Object(r.h)("i",{class:"fas fa-paper-plane"}))))):Object(r.h)(e,null,Object(r.h)(b.a,{markdown:f.a.replaceImages(V,n.images,N),markdownOpts:f.a.getMarkdownOptions()})),y[n.id]&&Object(r.h)("div",{class:"clearfix mt-3 mb-3"},Object(r.h)("button",{class:"btn btn-danger float-left",onClick:s.deleteComment,"data-id":n.id},Object(r.h)("i",{class:"fas fa-trash-alt"})," Delete"),Object(r.h)("button",{class:"btn btn-secondary float-right",onClick:s.toggleDeleteComment,"data-id":n.id},Object(r.h)("i",{class:"fas fa-times-circle"})," Cancel")))),Object(r.h)("div",null,Object(r.h)("div",{class:"container-fluid px-3 mt-1"},B&&Object(r.h)("div",{class:"clearfix row position-relative"},Object(r.h)("div",{class:"commentContainer col-12 px-0 overflow-hidden",style:"max-height: 60vh;",onDblclick:s.addLikeComment,"data-id":n.id},Object(r.h)("img",{loading:"lazy",class:"img-fluid",style:"min-width: 100px;",src:B.s3LargeLink})),x[n.id]&&Object(r.h)("span",{class:"likeHeart position-absolute text-white display-1",style:"top: calc(50% - 50px); left: calc(50% - 50px); width: 100px; height: 100px;"},Object(r.h)("i",{class:"fas fa-heart likeStory"}))),L&&L.length>1&&Object(r.h)("div",{class:"clearfix d-flex flex-wrap row"},c.a.isArray(L)&&L.map((function(t,a){return Object(r.h)(e,null,Object(r.h)("div",{class:"col px-0 overflow-hidden",style:"max-height: 100px; min-width: 100px;"},Object(r.h)("img",{loading:"lazy",class:"img-fluid border",style:"min-width: 100px;",src:t.s3SmallLink,onClick:s.viewImage,"data-id":n.id,"data-idx":a})))})))))),Object(r.h)("small",null,Object(r.h)("button",{class:"commentContainer btn btn-sm btn-link py-0 "+(T?"text-primary":""),onClick:s.addLikeComment,"data-id":n.id,disabled:T},T?Object(r.h)(h.c,{id:"comments.has-liked"},"Liked"):Object(r.h)(h.c,{id:"comments.like"},"Lik")),"-",Object(r.h)("button",{class:"btn btn-sm btn-link py-0",onClick:s.replyComment,"data-id":n.id},Object(r.h)(h.c,{id:"comments.comment-add"},"Kommentar")),n.language!==N&&Object(r.h)(e,null,"-",!S[n.id]&&H?Object(r.h)(e,null,Object(r.h)("button",{type:"button",class:"btn btn-sm btn-link","data-commentid":n.id,onClick:s.showOriginal},Object(r.h)("i",{class:"fas fa-cog"}),"  ",Object(r.h)(h.c,{id:"home.translate-show-original"},"Show original"))):Object(r.h)(e,null,Object(r.h)("button",{type:"button",class:"btn btn-sm btn-link",onClick:s.translate,"data-commentid":n.id},Object(r.h)("i",{class:"fas fa-cog"})," ",Object(r.h)(h.c,{id:"home.translate-to"},"See translation")))),"-",Object(r.h)("button",{class:"btn btn-sm btn-link py-0 disabled"},c.a.formatDistance(n.createdDate,new Date,{locale:"no-NB"}),n.updatedDate&&Object(r.h)(e,null,Object(r.h)("span",{class:"font-weight-light ml-2"},"(Edited ",c.a.formatDistance(n.updatedDate,new Date,{locale:"no-NB"}),")"))))),n.likes&&n.likes.length>0&&Object(r.h)("small",{class:"position-absolute bg-light shadow-sm rounded-lg py-0 px-1",style:"bottom: 20px; right: 15px;"},Object(r.h)("i",{class:"fas fa-thumbs-up text-primary"})," ",n.likes.length)),Object(r.h)("div",{class:"col-10 offset-2 mb-2"},n&&c.a.isArray(P)&&P.map((function(t){var a=t.user,o=void 0===a?{}:a,i=U.findPublicTeamByMembers(o.id),l=f.a.displayNameShort(o),d=f.a.displayName(o),u=o.image||(o.images?o.images[0]:void 0),m=t.likes&&t.likes.findIndex((function(e){return e.user===M.id}))>-1,O=U.getCommentReplyTranslations({story:D,commentid:n.id,replyid:t.id,targetLang:N})||C[n.id+"-"+t.id],v=O||t.comment;return S[n.id+"-"+t.id]&&(v=t.comment),Object(r.h)("div",{class:"row"},Object(r.h)("div",{class:"col-12 d-flex mb-2 position-relative"},Object(r.h)("div",{class:"text-center border rounded-circle imageRounded imageRoundedSmall",style:(u?'background-image: url("'+u.s3SmallLink+'"); background-size: cover;':"")+" border-width: 3px !important;"},!o.image&&Object(r.h)("span",{class:"font-weight-lighter",style:"font-size: 15px;"},l)),Object(r.h)("div",{class:"flex-grow-1 pl-3 pt-0",style:"line-height: 1.2em;"},Object(r.h)("div",{class:"bg-light p-2 rounded-lg position-relative"},M.id===o.id&&Object(r.h)(e,null,Object(r.h)("span",{class:"float-right font-weight-lighter text-muted"},Object(r.h)("i",{class:"fas fa-ellipsis-h",onClick:s.toggleMenu,"data-id":t.id}))),g[t.id]&&Object(r.h)(e,null,Object(r.h)("div",{class:"position-absolute bg-white p-2 border rounded rounded-lg shadow-sm",style:"top: 30px; right: 10px; width: 60%; z-index: 999999;"},Object(r.h)("button",{class:"btn btn-link btn-block text-left",onClick:s.toggleEdit,"data-id":t.id,"data-comment":t.comment},Object(r.h)("i",{class:"fas fa-edit"})," Edit"),Object(r.h)("hr",null),Object(r.h)("button",{class:"btn btn-link btn-block text-left",onClick:s.toggleDeleteComment,"data-id":t.id},Object(r.h)("i",{class:"fas fa-trash-alt"})," Delete"))),Object(r.h)("span",{style:"font-size: 0.95em;"},Object(r.h)("h5",{class:"font-weight-bold mb-2",style:"font-size: 1.0em;"},d,i&&i.length>0&&Object(r.h)(e,null,Object(r.h)("span",{class:"font-weight-lighter text-muted ml-2"},i.filter((function(e){return 1===e.public})).slice(0,1).map((function(t){return Object(r.h)(e,null,"- ",Object(r.h)("a",{href:"/teams/public/"+t.uuidv4,class:"mr-2"}," ",t.name))}))))),j[t.id]?Object(r.h)(e,null,Object(r.h)("div",{class:"d-flex bd-highlight"},Object(r.h)("div",{class:"p-0 w-100 bd-highlight"},Object(r.h)("label",{class:"sr-only",for:"inlineFormInput"},Object(r.h)(h.c,{id:"comments.comment"},"Kommentar")),Object(r.h)("div",{class:"border rounded rounded-lg position-relative"},Object(r.h)(h.b,null,Object(r.h)("textarea",{class:"form-control-plaintext px-2",type:"text",placeholder:Object(r.h)(h.c,{id:"comments.write-comment"},"Skriv en kommentar..."),onInput:Object(p.a)(s,"commentEditText"),onKeyUp:f.a.resizeTextarea,onFocus:f.a.resizeTextarea,style:"height: 2.3em;",value:w})))),Object(r.h)("div",{class:"p-0 pl-2 flex-shrink-1 bd-highlight"},Object(r.h)("button",{type:"button",class:"btn btn-primary mb-2",onClick:s.saveCommentReply,"data-commentid":n.id,"data-id":t.id},Object(r.h)("i",{class:"fas fa-paper-plane"}))))):Object(r.h)(e,null,Object(r.h)(b.a,{markdown:f.a.replaceImages(v,t.images,N),markdownOpts:f.a.getMarkdownOptions()})),y[t.id]&&Object(r.h)("div",{class:"clearfix mt-3 mb-3"},Object(r.h)("button",{class:"btn btn-danger float-left",onClick:s.deleteCommentReply,"data-id":t.id,"data-commentid":n.id},Object(r.h)("i",{class:"fas fa-trash-alt"})," Delete"),Object(r.h)("button",{class:"btn btn-secondary float-right",onClick:s.toggleDeleteComment,"data-id":t.id},Object(r.h)("i",{class:"fas fa-times-circle"})," Cancel")))),Object(r.h)("small",null,Object(r.h)("button",{class:"replyContainer btn btn-sm btn-link py-0 "+(m?"text-primary":""),onClick:s.likeReply,"data-comment":n.id,"data-id":t.id,disabled:m},m?Object(r.h)(h.c,{id:"comments.has-liked"},"Liked"):Object(r.h)(h.c,{id:"comments.like"},"Lik")),"-",Object(r.h)("button",{class:"btn btn-sm btn-link py-0",onClick:s.replyComment,"data-id":n.id},Object(r.h)(h.c,{id:"comments.comment-add"},"Kommentar")),t.language!==N&&Object(r.h)(e,null,"-",!S[n.id+"-"+t.id]&&O?Object(r.h)(e,null,Object(r.h)("button",{type:"button",class:"btn btn-sm btn-link","data-commentid":n.id,"data-replyid":t.id,onClick:s.showOriginal},Object(r.h)("i",{class:"fas fa-cog"}),"  ",Object(r.h)(h.c,{id:"home.translate-show-original"},"Show original"))):Object(r.h)(e,null,Object(r.h)("button",{type:"button",class:"btn btn-sm btn-link",onClick:s.translate,"data-commentid":n.id,"data-replyid":t.id},Object(r.h)("i",{class:"fas fa-cog"})," ",Object(r.h)(h.c,{id:"home.translate-to"},"See translation")))),"-",Object(r.h)("button",{class:"btn btn-sm btn-link py-0 disabled"},c.a.formatDistance(t.createdDate,new Date,{locale:"no-NB"}),t.updatedDate&&Object(r.h)(e,null,Object(r.h)("span",{class:"font-weight-light ml-2"},"(Edited ",c.a.formatDistance(t.updatedDate,new Date,{locale:"no-NB"}),")"))))),t.likes&&Object(r.h)("small",{class:"position-absolute bg-light shadow-sm rounded-lg py-0 px-1",style:"bottom: 20px; right: 15px;"},Object(r.h)("i",{class:"fas fa-thumbs-up text-primary"})," ",t.likes.length)))})),A-F>0&&Object(r.h)("div",null,Object(r.h)("button",{class:"btn btn-sm btn-link py-0",onClick:s.toggleReplies,"data-id":n.id},Object(r.h)(h.c,{id:"comments.show-more",fields:{more:A-F}},"Vis ",A-F," flere kommentarer...")))),a[n.id]&&Object(r.h)("div",{class:"col-11 offset-1 d-flex mb-2 position-relative"},Object(r.h)(m.a,{stores:s.props.stores,story:D,initCall:z,callback:R,commentId:n.id,inputRef:function(e){return s.inputRef[n.id]=e},inputRefObject:s.inputRef,key:"story-commentreply-"+n.id})))})),H-V>0&&Object(r.h)("div",null,Object(r.h)("button",{class:"btn btn-sm btn-link py-0",onClick:this.toggleComments},Object(r.h)(h.c,{id:"comments.show-more",fields:{more:H-V}},"Vis ",H-V," flere kommentarer..."))),o&&Object(r.h)("div",null,Object(r.h)("button",{class:"btn btn-sm btn-link py-0",onClick:this.toggleComments},Object(r.h)(h.c,{id:"comments.hide-all-comments"},"Skjul alle kommentarene."))))},s}(r.Component))||i;t.a=O}).call(this,s("hosL").Fragment)},ETxl:function(e){e.exports={hoverelementonly:"hoverelementonly__1mJGJ",hoverElement:"hoverElement__axh3O",hoverelementhide:"hoverelementhide__1k_qH","progress-bar-vertical":"progress-bar-vertical__1B2sC","progress-bar":"progress-bar__pnsVj",dragged:"dragged__QXO46",over:"over__1re3x",list:"list__q_emZ"}},HGwV:function(e,t,s){"use strict";(function(e){function n(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function a(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}var o,i=s("hosL"),r=(s("QRet"),s("Utv1"),s("/eY4")),c=(s("OhSV"),s("Y3FI")),l=s("zYNi"),d=s("ZOvn"),h=d.a.marginTop(!0,!1),u=(d.a.marginTopBack(!1),d.a.marginBottom(),d.a.subMenuMarginTop(),{isLoading:!1}),b=Object(r.a)(o=function(t){function s(e){var s;return(s=t.call(this,e)||this).back=function(){var e=s.props,t=e.raceid;Object(c.route)("/app-races/"+t+"/about")},s.state=function(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?n(Object(s),!0).forEach((function(t){a(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):n(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}({},u),s.updateTimer={},s}var o,r;return r=t,(o=s).prototype=Object.create(r.prototype),o.prototype.constructor=o,o.__proto__=r,s.prototype.render=function(){var t=this.props.raceid;return Object(i.h)(e,null,Object(i.h)("div",{class:"container-fluid position-relative p-0",style:"margin-top: 0; height: calc(100vh - "+h+"); z-index: 9999;"},Object(i.h)(l.a,{stores:this.props.stores,raceid:t})))},s}(i.Component))||o;t.a=b}).call(this,s("hosL").Fragment)},"HQo+":function(e,t,s){"use strict";(function(e){function n(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function a(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}var o,i=s("hosL"),r=(s("Utv1"),s("/eY4")),c=(s("OhSV"),s("cneo"),s("HqZR")),l=(s("ZOvn"),{showAddComment:!1}),d=Object(r.a)(o=function(t){function s(e){var s;return(s=t.call(this,e)||this).state=function(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?n(Object(s),!0).forEach((function(t){a(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):n(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}({},l),s.updateTimer={},s.inputRef={},s}var o,r;r=t,(o=s).prototype=Object.create(r.prototype),o.prototype.constructor=o,o.__proto__=r;var d=s.prototype;return d.loadTrack=function(e){return new Promise(function(t,s){function n(){function e(){return t()}return(d=r.getTrackIdsByClass(l[0]))&&d.length>0?(i.cleanupMemory(),Promise.resolve(i.loadPublic({query:{idin:d}})).then(function(){try{return e.call(this)}catch(e){return s(e)}}.bind(this),s)):e.call(this)}var a,o,i,r,c,l,d;return void 0===e&&(e=this.props),i=(o=e.stores).trackStore,r=o.raceStore,l=void 0===(c=o.appState.selectedClassIds)?[]:c,(a=e).showHeatmap?Promise.resolve(o.adminStore.getPublicHeatmap(a.raceid,a.allTeamIds)).then(function(){try{return n.call(this)}catch(e){return s(e)}}.bind(this),s):n.call(this)}.bind(this))},d.componentDidMount=function(){this.loadTrack()},d.componentWillReceiveProps=function(e){this.props.selectedClassIds!==e.selectedClassIds&&this.loadTrack(e)},d.render=function(){var t=this.props.stores,s=this.props,n=s.waypoints,a=s.waypoints2,o=s.waypoints3,r=s.zoomToMarkers,l=s.fullscreenMap,d=s.onMarkerClick,h=s.showHeatmap,u=s.showTracks,b=s.showDistanceMarkers,p=s.groupWaypoints,m=s.focusOnMushers,f=s.geoJSONs,g=t.adminStore.publicHeatmap,O=t.trackStore.tracks[0];t.raceStore.getTrackIdsByClass();return Object(i.h)(e,null,Object(i.h)(c.a,{stores:this.props.stores,heatmap:h?g:null,track:O,geojson:u&&O&&O.gpx?O.gpx.geoJSON:null,gpxInfo:u&&O&&(O.gpx||O.gpxInfo)?O.gpxInfo||O.gpx.gpxInfo:null,minZoom:2,maxZoom:18,height:600,waypoints:n,waypoints2:a,waypoints3:o,geoJSONs:f,zoomToMarkers:r,fullscreenMap:l,onMarkerClick:d,showTrackProfile:!1,distanceMarkerSteps:"long",showDistanceMarkers:b,groupWaypoints:p,focusOnMushers:m,showFullscreenControl:!1}))},s}(i.Component))||o;t.a=d}).call(this,s("hosL").Fragment)},HqZR:function(e,t,s){"use strict";(function(e){function n(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function a(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?n(Object(s),!0).forEach((function(t){o(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):n(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function o(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function i(e){return.621371*e}var r,c=s("hosL"),l=s("Utv1"),d=s("/eY4"),h=s("cneo"),u=s("fh8t"),b=s.n(u),p=s("6FDT"),m=s.n(p),f=s("ABWa"),g=s.n(f),O=s("ZOvn"),j=s("5eBG"),v=s("/mwY"),y=s("8bLb"),w=s("P2xA"),x=s("FTgN"),k=s("/kKD"),S=s("+5/p"),I=s("9rGW"),C=s("zHmd"),T=s.n(C),D=s("Dq2H"),P=s.n(D),R=(s("yDvG"),s("G5DU")),A=s.n(R),z=s("68RK"),F=(s("A1fj"),s("ivZ3")),L=s.n(F),E={pedantic:!1,gfm:!0,breaks:!0,sanitize:!1,smartLists:!0,smartypants:!0,xhtml:!0},U=j.b.BaseLayer,M=j.b.Overlay;delete L.a.Icon.Default.prototype._getIconUrl,L.a.Icon.Default.mergeOptions({iconRetinaUrl:s("sqja"),iconUrl:s("Drvj"),shadowUrl:s("K5o1")});var _=function(e){return L.a.divIcon({html:"<span>"+e.getChildCount()+"</span>",className:g.a["marker-cluster-custom"],iconSize:L.a.point(40,40,!0)})},N=Object(d.a)(r=function(t){function s(e){var s;return(s=t.call(this,e)||this).mapRef=Object(c.createRef)(),s.polyRef=Object(c.createRef)(),s.handleViewportChanged=function(e){s.setState({mapCenter:e.center,mapZoom:e.zoom})},s.handleLocationFound=function(e){e.latlng&&s.setState({hasLocation:!0,latlng:e.latlng})},s.onEachFeature=function(e,t){var n=s.props.gpxInfo,a=void 0===n?{}:n,o="<Popup>\n\t\t\t<h5>Details</h5>\n\t\t\t<ul>\n\t\t\t\t<li>Total distance: "+l.a.format(a.totalDistance,2)+" km</li>\n\t\t\t\t<li>Max speed: "+l.a.format(a.maxSpeed,1)+" km/t</li>\n\t\t\t\t<li>Avg speed: "+l.a.format(a.avgSpeed,1)+" km/t</li>\n\t\t\t\t<li>Ascent: "+l.a.format(a.ascent||a.calculatedAscend,0)+" m</li>\n\t\t\t\t<li>Descent: "+l.a.format(a.decent||a.calculatedDescend,0)+" m</li>\n\t\t\t\t<li>Duration: "+l.a.secToHms(a.duration)+"</li>\n\t\t\t</ul>\n\t\t</Popup>";t.bindPopup(o)},s.handleClick=function(e){s.props.stores.appState.setLatlng(e.latlng)},s.zoomToGeoJSON=function(e){try{if(e.target){var t=e.target.getBounds();t&&t._northEast&&s.setState({bounds:t})}}catch(e){console.log(e)}},s.zoomToMarkers=function(e,t){void 0===e&&(e=[]),void 0===t&&(t=!1);var n=s.state.hasZoomedToMarkers;try{if((t||!n)&&e.length&&e.length>0){var a=s.mapRef.current.leafletElement,o=L.a.latLngBounds([]);e.forEach((function(e){o.extend([e.lat,e.lng])})),a.fitBounds(o),s.setState({hasZoomedToMarkers:!0})}}catch(e){console.log(e)}},s.zoomToAllMarkers=function(){var e=s.props.waypoints;s.zoomToMarkers(void 0===e?[]:e,!0)},s.zoomToFavoriteMarkers=function(){var e=s.props,t=e.zoomToMarkers,n=void 0===t?[]:t,a=e.waypoints;s.zoomToMarkers(n.length>0?n:void 0===a?[]:a,!0)},s.overlayAdd=function(e){var t=s.state.visibleLayers;t[e.name]=!0,s.setState({visibleLayers:t})},s.overlayRemove=function(e){var t=s.state.visibleLayers;t[e.name]=!1,s.setState({visibleLayers:t})},s.polylineOptions=function(){var e=s.props.gpxInfo,t=s.state.rangeSteps,n=s.state.maxHslColor,a=s.props.stores.appState,o=a.mapColorMode,i=a.mapRangeMin,r=a.mapRangeMax;"speed"===o&&e&&e.speeds&&e.speeds.length>0&&(i=Math.floor(Math.min.apply(Math,e.speeds.map((function(e){return 3.6*e})))),r=Math.ceil(Math.max.apply(Math,e.speeds.map((function(e){return 3.6*e})))));var c=l.a.range(i,r,t),d=c.map((function(e){var t=function(e,t,s,n,a){return n+(e-t)*(a-n)/(s-t)}(e,i,r,0,n),s=l.a.hsl2Rgb(n-t,100,45);return{color:"rgb("+s.r+", "+s.g+", "+s.b+")"}}));return a.setMapRange(c,i,r),a.setMapColors(d),d},s.polylineOptionIdxFn=function(e){for(var t=s.props.stores.appState.mapRange,n=0;n<t.length;++n)if(e.meta<=t[n])return n;return t.length},s.polylinetrackPointFactory=function(e){var t=s.props.gpxInfo,n=s.props.stores.appState,a=n.mapRangeMin,o=n.mapRangeMax,i=[];return"speed"===n.mapColorMode&&t.speeds&&t.speeds.length>0?i=t.speeds.map((function(e){return 3.6*e})):t&&t.climbs&&(i=t.climbs),e.filter((function(e){return e[0]&&e[1]&&e[2]})).map((function(e,t){var s=L.a.latLng(e[1],e[0],e[2]);return i&&i.length>0?(s.meta=i[t]||0,s.meta>o&&(s.meta=o),s.meta<a&&(s.meta=a)):s.meta=0,s}))},s.showSpeed=function(){s.props.stores.appState.setMapColorMode("speed")},s.handleMarkerClick=function(e){void 0===e&&(e={});var t=s.props.onMarkerClick,n=void 0===t?function(e){return console.log({title:e.title,bib:e.bib})}:t;try{n(a({},e))}catch(e){console.log(e)}},s.baseLayerChange=function(e){var t=e.name;console.log("baseLayerChange event",e),console.log({name:t}),s.props.stores.appState.setMapChecked(t)},s.whenReadyHandler=function(e){e.target.on("baselayerchange",s.baseLayerChange)},s.state={hasLocation:!1,visibleLayers:{Windspeed:!1},mapCenter:[],mapZoom:10,rangeSteps:1,maxHslColor:230,hasZoomedToMarkers:!1},s}var n,o;o=t,(n=s).prototype=Object.create(o.prototype),n.prototype.constructor=n,n.__proto__=o;var r=s.prototype;return r.geoJSONStyle=function(){return{color:"#0347A2",weight:5,fillOpacity:.5,fillColor:"#0347A2"}},r.geoJSONStyleList=function(e){var t=O.a.getRankingColor(e+1);return{color:t,weight:3,fillOpacity:.5,fillColor:t}},r.componentWillReceiveProps=function(e){this.props.zoomToMarkers!==e.zoomToMarkers?this.zoomToMarkers(e.zoomToMarkers,!0):this.props.waypoints!==e.waypoints&&this.zoomToMarkers(e.waypoints)},r.componentWillUnmount=function(){},r.render=function(){var t,s,n=this,o=this.props.stores,r=o.userStore,d=o.appState,u=d.mapChecked,p=r.user.settings,f=void 0===p?{}:p,C=this.state,D=C.visibleLayers,R=C.mapZoom,F=C.bounds,N=void 0===F?null:F,B=this.props,H=B.waypoints,V=void 0===H?[]:H,q=B.waypoints2,K=void 0===q?[]:q,Y=B.waypoints3,W=void 0===Y?[]:Y,Z=B.geoJSONs,G=void 0===Z?[]:Z,J=B.zoomToMarkers,X=void 0===J?[]:J,Q=B.geojson,$=B.gpxInfo,ee=B.center,te=void 0===ee?[61.0779066,9.800984]:ee,se=B.zoom,ne=void 0===se?5:se,ae=B.minZoom,oe=void 0===ae?4:ae,ie=B.maxZoom,re=void 0===ie?18:ie,ce=B.height,le=void 0===ce?500:ce,de=B.heatmap,he=void 0===de?[]:de,ue=B.skipGeojson,be=void 0!==ue&&ue,pe=B.zoomToWaypoints,me=void 0!==pe&&pe,fe=B.fullscreenMap,ge=void 0!==fe&&fe,Oe=B.showZoomControl,je=void 0===Oe||Oe,ve=B.showLayersControl,ye=void 0===ve||ve,we=B.showScaleControl,xe=void 0===we||we,ke=B.showRange,Se=void 0===ke||ke,Ie=B.showTrackProfile,Ce=void 0===Ie||Ie,Te=B.distanceMarkerSteps,De=void 0===Te?"normal":Te,Pe=B.showDistanceMarkers,Re=void 0===Pe||Pe,Ae=B.groupWaypoints,ze=void 0===Ae||Ae,Fe=B.layersControlPosition,Le=void 0===Fe?"topright":Fe,Ee=d.mapColorMode,Ue=d.mapRange,Me=d.mapColors,_e=d.mapRangeMin,Ne=d.mapRangeMax,Be=Object(h.i)(Q),He=l.a.asObject(Be,"features",0,"geometry","coordinates"),Ve=X.length>0||V.length>0,qe=[];if(He&&He[0]&&He[0][0]&&(t=He[0][0]&&He[0][0][0]?[He[0][0][1],He[0][0][0]]:[He[0][1],He[0][0]],s=He[He.length-1][0]&&He[He.length-1][0][0]?[He[He.length-1][0][1],He[He.length-1][0][0]]:[He[He.length-1][1],He[He.length-1][0]],$&&$.distances)){var Ke=0,Ye=0,We=10;switch(R){case 15:We="long"===De?3:1;break;case 14:We="long"===De?5:2;break;case 13:We="long"===De?7:3;break;case 12:We="long"===De?10:5;break;case 11:case 10:We="long"===De?15:10;break;case 9:We="long"===De?20:15;break;case 8:We="long"===De?30:20;break;case 7:We="long"===De?40:30;break;case 6:We="long"===De?70:50;break;case 5:We="long"===De?150:100;break;default:We="long"===De?200:150}$.distances.forEach((function(e,t){Ke+=f.imperial?i(e):e,(Ye+=f.imperial?i(e):e)>=We&&(Ye=0,He[t]&&Array.isArray(He[t])&&qe.push({lat:He[t][1],lng:He[t][0],title:Math.floor(Ke),body:""}))}))}var Ze=r.isAdmin;return Object(c.h)(e,null,Object(c.h)("div",{class:g.a.home+" w-100 h-100 overflow-hidden position-relative",onTouchmove:O.a.captureAllEvents,onScroll:O.a.captureAllEvents},Object(c.h)(v.a,{bounds:N,ref:this.mapRef,onViewportChanged:this.handleViewportChanged,minZoom:oe,maxZoom:re,center:te,onLocationfound:this.handleLocationFound,zoom:ne,zoomControl:je,doubleClickZoom:!0,scrollWheelZoom:!0,dragging:ge||!L.a.Browser.mobile,tap:!L.a.Browser.mobile,touchZoom:!!L.a.Browser.mobile&&"center",animate:!0,easeLinearity:.35,style:"width: 100%; min-height: "+le+"px; height: 100%;",className:"h-100",onOverlayadd:this.overlayAdd,onOverlayremove:this.overlayRemove,whenReady:this.whenReadyHandler},ye&&Object(c.h)(j.b,{position:Le},Object(c.h)(U,{checked:"OpenStreetMap.Mapnik"===u,name:"OpenStreetMap.Mapnik"},Object(c.h)(y.a,{attribution:'&copy <a href="http://osm.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"})),Object(c.h)(U,{checked:"OpenStreetMap.Dark"===u,name:"OpenStreetMap.Dark"},Object(c.h)(y.a,{attribution:'© <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors, © Map tiles by Carto, under CC BY 3.0. Data by OpenStreetMap, under ODbL.',url:"https://cartodb-basemaps-{s}.global.ssl.fastly.net/dark_all/{z}/{x}/{y}.png"})),Object(c.h)(U,{checked:"Norway Kartverket topo4"===u,name:"Norway Kartverket topo4"},Object(c.h)(y.a,{subdomains:["opencache","opencache2","opencache3"],attribution:'&copy <a href="http://kartverket.no">Kartverket</a>',url:"https://{s}.statkart.no/gatekeeper/gk/gk.open_gmaps?layers=topo4&zoom={z}&x={x}&y={y}"})),Object(c.h)(U,{checked:"Norway Kartverket topo4graatone"===u,name:"Norway Kartverket topo4graatone"},Object(c.h)(y.a,{subdomains:["opencache","opencache2","opencache3"],attribution:'&copy <a href="http://kartverket.no">Kartverket</a>',url:"https://{s}.statkart.no/gatekeeper/gk/gk.open_gmaps?layers=topo4graatone&zoom={z}&x={x}&y={y}"})),Object(c.h)(U,{checked:"Google Satellite Text"===u,name:"Google Satellite Text"},Object(c.h)(y.a,{subdomains:["mt0","mt1","mt2","mt3"],attribution:'&copy <a href="http://google.com">Google</a>',url:"https://{s}.google.com/vt/lyrs=s,h&x={x}&y={y}&z={z}"})),Object(c.h)(M,{name:"Windspeed"},Object(c.h)(w.a,{url:"https://maps.openweathermap.org/maps/2.0/weather/WND/{z}/{x}/{y}?use_norm=false&opacity=0.25&palette=0:0073FF; 2:00AAFF; 3:4BD0D6; 6:8DE7C7; 12:B0F720; 25:F3363B; 50:C60000&arrow_step=64&appid=75cd92317c98db6873031cd2d8de75c5",attribution:"Open weather maps"})),Object(c.h)(M,{name:"Temperature"},Object(c.h)(w.a,{url:"https://maps.openweathermap.org/maps/2.0/weather/TA2/{z}/{x}/{y}?fill_bound=true&opacity=0.35&appid=75cd92317c98db6873031cd2d8de75c5",attribution:"Open weather maps"})),Object(c.h)(M,{name:"Snow depth"},Object(c.h)(w.a,{url:"https://maps.openweathermap.org/maps/2.0/weather/SD0/{z}/{x}/{y}?fill_bound=true&opacity=0.35&appid=75cd92317c98db6873031cd2d8de75c5",attribution:"Open weather maps"})),Object(c.h)(M,{name:"Precipitation"},Object(c.h)(w.a,{url:"https://maps.openweathermap.org/maps/2.0/weather/PA0/{z}/{x}/{y}?fill_bound=true&opacity=0.35&appid=75cd92317c98db6873031cd2d8de75c5",attribution:"Open weather maps"})),Ze&&Object(c.h)(M,{name:"Atmospheric pressure"},Object(c.h)(w.a,{url:"https://maps.openweathermap.org/maps/2.0/weather/APM/{z}/{x}/{y}?fill_bound=true&opacity=0.35&appid=75cd92317c98db6873031cd2d8de75c5",attribution:"Open weather maps"}))),xe&&Object(c.h)(x.a,{metric:!0,imperial:!1}),D.Windspeed&&Object(c.h)(A.a,{position:"bottomright"},Object(c.h)("div",{style:" color: #48484a; display: flex; align-items: center; padding: 2pt 4pt; background-color: #fff; border-radius: 4pt; box-shadow: 0 1px 3px rgba(0,0,0,.12),0 1px 2px rgba(0,0,0,.24); transition: box-shadow .1s ease-out; transition: box-shadow .1s ease-out,-webkit-box-shadow .1s ease-out; margin-bottom: 10px; justify-content: space-between; font-size: 10px; "},Object(c.h)("div",null,"Wind speed, m/s"),Object(c.h)("div",{style:" margin-left: 10px; display: flex; flex-direction: column; "},Object(c.h)("div",{style:"width: 260px; display: flex; justify-content: space-between;",class:"scale-dividers"},Object(c.h)("div",null,"0"),Object(c.h)("div",null,"2"),Object(c.h)("div",null,"3"),Object(c.h)("div",null,"6"),Object(c.h)("div",null,"12"),Object(c.h)("div",null,"25"),Object(c.h)("div",null,"50")),Object(c.h)("div",{style:" width: 260px; height: 5px; // background: rgba(0, 0, 0, 0) linear-gradient(to left, rgb(158, 128, 177), rgba(116, 76, 172, 0.9), rgb(164, 123, 170), rgba(170, 128, 177, 0.84), rgba(176, 128, 177, 0.71), rgba(170, 128, 177, 0.54), rgba(170, 128, 177, 0.44), rgba(255, 255, 0, 0)) repeat scroll 0% 0%; background: linear-gradient(to right, #0073FF,#00AAFF,#4BD0D6,#8DE7C7,#B0F720,#F0B800,#FB5515,#F3363B,#C60000) repeat scroll 0% 0%; "})))),D.Temperature&&Object(c.h)(A.a,{position:"bottomright"},Object(c.h)("div",{style:" color: #48484a; display: flex; align-items: center; padding: 2pt 4pt; background-color: #fff; border-radius: 4pt; box-shadow: 0 1px 3px rgba(0,0,0,.12),0 1px 2px rgba(0,0,0,.24); transition: box-shadow .1s ease-out; transition: box-shadow .1s ease-out,-webkit-box-shadow .1s ease-out; margin-bottom: 10px; justify-content: space-between; font-size: 10px; "},Object(c.h)("div",null,"Temperature, °C"),Object(c.h)("div",{style:" margin-left: 10px; display: flex; flex-direction: column; "},Object(c.h)("div",{style:"width: 260px; display: flex; justify-content: space-between;",class:"scale-dividers"},Object(c.h)("div",null,"-40"),Object(c.h)("div",null,"-20"),Object(c.h)("div",null,"0"),Object(c.h)("div",null,"20"),Object(c.h)("div",null,"40")),Object(c.h)("div",{style:" width: 260px; height: 5px; background-image: linear-gradient(to right, rgb(159, 85, 181) 0%, rgb(44, 106, 187) 8.75%, rgb(82, 139, 213) 12.5%, rgb(103, 163, 222) 18.75%, rgb(142, 202, 240) 25%, rgb(155, 213, 244) 31.25%, rgb(172, 225, 253) 37.5%, rgb(194, 234, 255) 43.75%, rgb(255, 255, 208) 50%, rgb(254, 248, 174) 56.25%, rgb(254, 232, 146) 62.5%, rgb(254, 226, 112) 68.75%, rgb(253, 212, 97) 75%, rgb(244, 168, 94) 82.5%, rgb(244, 129, 89) 87.5%, rgb(244, 104, 89) 93.75%, rgb(244, 76, 73) 100%); "})))),D.Precipitation&&Object(c.h)(A.a,{position:"bottomright"},Object(c.h)("div",{style:" color: #48484a; display: flex; align-items: center; padding: 2pt 4pt; background-color: #fff; border-radius: 4pt; box-shadow: 0 1px 3px rgba(0,0,0,.12),0 1px 2px rgba(0,0,0,.24); transition: box-shadow .1s ease-out; transition: box-shadow .1s ease-out,-webkit-box-shadow .1s ease-out; margin-bottom: 10px; justify-content: space-between; font-size: 10px; "},Object(c.h)("div",null,"Precipitation, mm/h"),Object(c.h)("div",{style:" margin-left: 10px; display: flex; flex-direction: column; "},Object(c.h)("div",{style:"width: 260px; display: flex; justify-content: space-between;",class:"scale-dividers"},Object(c.h)("div",null,"0"),Object(c.h)("div",null,"0.5"),Object(c.h)("div",null,"1"),Object(c.h)("div",null,"2"),Object(c.h)("div",null,"4"),Object(c.h)("div",null,"6"),Object(c.h)("div",null,"7"),Object(c.h)("div",null,"10"),Object(c.h)("div",null,"12"),Object(c.h)("div",null,"14"),Object(c.h)("div",null,"16"),Object(c.h)("div",null,"24"),Object(c.h)("div",null,"32"),Object(c.h)("div",null,"60")),Object(c.h)("div",{style:" width: 260px; height: 5px; background: rgba(0, 0, 0, 0) linear-gradient(to left, rgb(170, 43, 195), rgb(255, 0, 146), rgb(255, 0, 100), rgb(255, 0, 0), rgb(255, 91, 0), rgb(255, 150, 0), rgb(255, 205, 0), rgb(239, 248, 0), rgb(0, 70, 0), rgb(0, 90, 0), rgb(0, 160, 0), rgb(0, 211, 0), rgb(0, 250, 100), rgba(0, 0, 0, 0)) repeat scroll 0% 0%; "})))),D["Snow depth"]&&Object(c.h)(A.a,{position:"bottomright"},Object(c.h)("div",{style:" color: #48484a; display: flex; align-items: center; padding: 2pt 4pt; background-color: #fff; border-radius: 4pt; box-shadow: 0 1px 3px rgba(0,0,0,.12),0 1px 2px rgba(0,0,0,.24); transition: box-shadow .1s ease-out; transition: box-shadow .1s ease-out,-webkit-box-shadow .1s ease-out; margin-bottom: 10px; justify-content: space-between; font-size: 10px; "},Object(c.h)("div",null,"Snow depth (m)"),Object(c.h)("div",{style:" margin-left: 10px; display: flex; flex-direction: column; "},Object(c.h)("div",{style:"width: 260px; display: flex; justify-content: space-between;",class:"scale-dividers"},Object(c.h)("div",null,"0.05"),Object(c.h)("div",null,"0.4"),Object(c.h)("div",null,"0.8"),Object(c.h)("div",null,"1.8"),Object(c.h)("div",null,"15")),Object(c.h)("div",{style:" width: 260px; height: 5px; background: linear-gradient(to right, #EDEDED, #D9F0F4, #A5E5EF, #7DDEED, #35D2EA, #00CCE8, #706DCE, #514FCC, #3333CC, #1818CC, #C454B7, #C12CB0, #BF00A8, #85408C, #7F2389, #790087, #E80068) repeat scroll 0% 0%; "})))),D["Atmospheric pressure"]&&Object(c.h)(A.a,{position:"bottomright"},Object(c.h)("div",{style:" color: #48484a; display: flex; align-items: center; padding: 2pt 4pt; background-color: #fff; border-radius: 4pt; box-shadow: 0 1px 3px rgba(0,0,0,.12),0 1px 2px rgba(0,0,0,.24); transition: box-shadow .1s ease-out; transition: box-shadow .1s ease-out,-webkit-box-shadow .1s ease-out; margin-bottom: 10px; justify-content: space-between; font-size: 10px; "},Object(c.h)("div",null,"Atmospheric pressure (hPa)"),Object(c.h)("div",{style:" margin-left: 10px; display: flex; flex-direction: column; "},Object(c.h)("div",{style:"width: 260px; display: flex; justify-content: space-between;",class:"scale-dividers"},Object(c.h)("div",null,"940"),Object(c.h)("div",null,"980"),Object(c.h)("div",null,"1010"),Object(c.h)("div",null,"1040"),Object(c.h)("div",null,"1080")),Object(c.h)("div",{style:" width: 260px; height: 5px; background: linear-gradient(to right, #0073FF,#00AAFF,#4BD0D6,#8DE7C7,#B0F720,#F0B800,#FB5515,#F3363B,#C60000) repeat scroll 0% 0%; "})))),he&&he.length>0&&Object(c.h)(T.a,{fitBoundsOnLoad:!Ve,fitBoundsOnUpdate:!1,points:he,longitudeExtractor:function(e){return e[1]},latitudeExtractor:function(e){return e[0]},intensityExtractor:function(e){return parseFloat(e[2])}}),Ce&&Object(c.h)(e,null,He&&He.length>0&&Object(c.h)(m.a,{ref:this.polyRef,positions:this.polylinetrackPointFactory(He),optionIdxFn:this.polylineOptionIdxFn,options:this.polylineOptions(),weight:7,lineCap:"butt",opacity:.75,smoothFactor:1,zoomAnimation:!0,key:""+Ee})),G&&G.length>0&&G.map((function(e,t){return Object(c.h)(k.a,{data:e,style:function(){return n.geoJSONStyleList(t)}})})),!be&&Q&&t&&Object(c.h)(k.a,{data:Q,style:this.geoJSONStyle,onEachFeature:this.onEachFeature,onAdd:X&&X.length>0?null:this.zoomToGeoJSON}),t&&Object(c.h)(S.a,{position:t,icon:z.a.get("marker")},Object(c.h)(I.a,null,"Start position: ",l.a.format(t[0],4),", ",l.a.format(t[1],4))),s&&Object(c.h)(S.a,{position:s,icon:z.a.get("flag")},Object(c.h)(I.a,null,"End position: ",l.a.format(s[0],4),", ",l.a.format(s[1],4))),Re&&qe&&qe.length>0&&Object(c.h)(e,null,qe.length>0&&qe.map((function(e){return Object(c.h)(S.a,{position:[e.lat,e.lng],draggable:!1,icon:z.a.getDistanceMarker({title:e.title,body:e.body,color:e.color,textColor:"#333"})},Object(c.h)(I.a,{position:[e.lat,e.lng]},Object(c.h)("h5",null,e.title),Object(c.h)(b.a,{markdown:e.body,markdownOpts:E})))}))),W.length>0&&W.reverse().map((function(e,t){return Object(c.h)(S.a,{position:[e.lat,e.lng],draggable:!1,icon:z.a.getSmallMarker({icon:e.icon||"marker",bib:e.bib,flag:e.flag,title:e.title,body:e.body,color:e.color,textColor:e.textColor,mapChecked:u}),zIndexOffset:100+t})})),ze?Object(c.h)(e,null,Object(c.h)(P.a,{maxClusterRadius:10,iconCreateFunction:_,animate:!0,fitBoundsOnLoad:me},K.length>0&&K.reverse().map((function(e,t){return Object(c.h)(S.a,{position:[e.lat,e.lng],draggable:!1,icon:z.a.getMarker({icon:e.icon||"marker",bib:e.bib,flag:e.flag,title:e.title,body:e.body,color:e.color,textColor:e.textColor,mapChecked:u}),zIndexOffset:200+t})}))),Object(c.h)(P.a,{maxClusterRadius:10,iconCreateFunction:_,animate:!0,fitBoundsOnLoad:me},V.length>0&&V.reverse().map((function(e,t){return Object(c.h)(S.a,{position:[e.lat,e.lng],draggable:!1,icon:z.a.getRaceMarker({icon:e.icon||"marker",bib:e.bib,rank:e.rank,speed:e.speed,bearing:e.bearing,email:e.email,image:e.image,flag:e.flag,title:e.title,body:e.body,color:e.color,textColor:e.textColor,iconWidth:180,iconAnchorX:t%2==0?7:187,mapChecked:u}),onClick:function(t){return n.handleMarkerClick(a(a({},e),{},{e:t}))},zIndexOffset:300+t})})))):Object(c.h)(e,null,K.length>0&&K.reverse().map((function(e,t){return Object(c.h)(S.a,{position:[e.lat,e.lng],draggable:!1,icon:z.a.getMarker({icon:e.icon||"marker",bib:e.bib,flag:e.flag,title:e.title,body:e.body,color:e.color,textColor:e.textColor,iconHeight:20,iconAnchorX:7,iconAnchorY:7,dotWidth:14,dotHeight:14,mapChecked:u}),zIndexOffset:200+t})})),V.length>0&&V.reverse().map((function(e,t){return Object(c.h)(S.a,{position:[e.lat,e.lng],draggable:!1,icon:z.a.getRaceMarker({icon:e.icon||"marker",bib:e.bib,speed:e.speed,bearing:e.bearing,rank:e.rank,email:e.email,image:e.image,flag:e.flag,title:e.title,body:e.body,color:e.color,textColor:e.textColor,iconWidth:200,iconAnchorX:t%2==0?7:193,mapChecked:u}),onClick:function(t){return n.handleMarkerClick(a(a({},e),{},{e:t}))},zIndexOffset:300+t})}))))),Se&&Ue&&Ue.length>0&&Object(c.h)(e,null,Object(c.h)("div",{class:"mb-4"},Object(c.h)("div",{class:"float-right mt-1"},Object(c.h)("div",{class:"px-1 py-0 float-left",style:"line-height: 0.8em;"},Object(c.h)("small",null,Object(c.h)("small",null,l.a.format(_e,0),Object(c.h)("span",{class:"text-muted"},"speed"===Ee?"km/t":"%")))),Ue&&Ue.length>0&&Ue.map((function(e,t){return Object(c.h)("div",{class:"float-left"},Object(c.h)("div",{style:"background-color: "+Me[t].color+"; height: 13px; width: 10px;"}))})),Object(c.h)("div",{class:"px-1 py-0 float-left",style:"line-height: 0.8em;"},Object(c.h)("small",null,Object(c.h)("small",null,l.a.format(Ne,0),Object(c.h)("span",{class:"text-muted"},"speed"===Ee?"km/t":"%"))))))))},s}(c.Component))||r;t.a=N}).call(this,s("hosL").Fragment)},J9nn:function(e,t,s){"use strict";(function(e){var n,a=s("hosL"),o=(s("Utv1"),s("/eY4")),i=s("OhSV"),r=(s("Y3FI"),s("fh8t"),s("go65"),s("ZOvn"),Object(o.a)(n=function(t){function s(e){var s;return(s=t.call(this,e)||this).subscribeNotificationTopic=function(e){return new Promise((function(t,n){var a,o;return void 0===(o=(a=s.props.stores.userStore).user.notificationTopics)?{}:o,1,Promise.resolve(a.setNotificationTopic({field:"notificationTopics."+e,value:1})).then((function(){try{return t()}catch(e){return n(e)}}),n)}))},s.state={},s.inputRef={},s.updateTimer={},s}var n,o;return o=t,(n=s).prototype=Object.create(o.prototype),n.prototype.constructor=n,n.__proto__=o,s.prototype.render=function(){var t=this,s=this.props.stores,n=s.userStore,o=n.user,r=void 0===o?{}:o,c=r.notificationTopics,l=void 0===c?{}:c,d=this.props.race,h="race-"+(void 0===d?{}:d).id;return l&&l[h]?"":Object(a.h)(e,null,Object(a.h)("div",{class:"row"},Object(a.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-0 mb-2"},Object(a.h)("button",{class:"btn btn-block btn-info btn-lg",onClick:function(){return t.subscribeNotificationTopic(h)}},Object(a.h)("i",{class:"fas fa-bell"})," ",Object(a.h)(i.c,{id:"race.notifications"},"Subscribe to race notifications")))))},s}(a.Component))||n);t.a=r}).call(this,s("hosL").Fragment)},KOz6:function(e,t,s){"use strict";(function(e){function n(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function a(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?n(Object(s),!0).forEach((function(t){o(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):n(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function o(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}var i,r=s("hosL"),c=s("/eY4"),l=(s("cneo"),s("Utv1")),d=s("OhSV"),h=s("go65"),u=Object(c.a)(i=function(t){function s(e){var s;return(s=t.call(this,e)||this).handleAdd=function(){var e=s.props;(0,e.updateField)({id:e.object.id,field:e.field,value:a({},s.state.data)}),s.setState({data:{name:"",description:"",url:""}})},s.removeAchievement=function(e){return new Promise((function(t){var n=s.props.stores.dogStore,a=s.props.object,o=e.target.closest("button").dataset;return n.removeAchievement({id:a.id,name:o.name,achievementId:o.id}),t()}))},s.state={data:{}},s}var n,o;return o=t,(n=s).prototype=Object.create(o.prototype),n.prototype.constructor=n,n.__proto__=o,s.prototype.render=function(){var t=this,s=this.state.data,n=this.props,a=n.showFiles,o=void 0===a||a,i=n.object,c=void 0===i?{}:i;return Object(r.h)("div",{class:"row"},Object(r.h)("div",{class:"col-12 mt-3"},o&&Object(r.h)(e,null,Object(r.h)("div",{class:"container-fluid"},Object(r.h)("div",{class:"row"},(!c.achievements||0===c.achievements.length)&&Object(r.h)(e,null,Object(r.h)("div",{class:"text-center text-muted"},Object(r.h)("div",{class:"display-1"},Object(r.h)("i",{class:"fas fa-trophy"})),Object(r.h)("h3",null,Object(r.h)(d.c,{id:"dogs.no-achievements-title"},"No achievements for this dog!")),Object(r.h)(d.c,{id:"dogs.no-achievements-text"},"You can add achievements to this dog. Ie. Memories, trips, tests, prices, races, etc."))),c.achievements&&c.achievements.map((function(e){return Object(r.h)("div",{class:"col-12 p-1"},Object(r.h)("span",{class:"font-weight-lighter mr-2"},l.a.isoDate(e.date,!1,!1,!0)),Object(r.h)("span",{class:"mr-2"},e.name),Object(r.h)("span",{class:"mr-2"},e.url),Object(r.h)("button",{class:"btn btn-sm btn-link float-right p-0",onClick:t.removeAchievement,"data-name":e.name,"data-id":e.id},Object(r.h)("i",{class:"fas fa-trash-alt"})," Del"))})))))),Object(r.h)("div",{class:"col-12 mt-3"},Object(r.h)("details",null,Object(r.h)("summary",null,Object(r.h)(d.c,{id:"dogs.achievement-add"},"Add new achievement")),Object(r.h)("div",{class:"form-group"},Object(r.h)("label",{for:"name"},Object(r.h)(d.c,{id:"dogs.achievement-name"},"Name")),Object(r.h)("input",{type:"text",class:"form-control",id:"name","aria-describedby":"nameHelp",onInput:Object(h.a)(this,"data.name"),value:s.name}),Object(r.h)("small",{id:"nameHelp",class:"form-text text-muted"},Object(r.h)(d.c,{id:"dogs.achievement-name-help"},"Name of achievement"))),Object(r.h)("div",{class:"form-group"},Object(r.h)("label",{for:"date"},Object(r.h)(d.c,{id:"dogs.achievement-date"},"Date")),Object(r.h)("input",{type:"date",class:"form-control",id:"date","aria-describedby":"dateHelp",onInput:Object(h.a)(this,"data.date"),value:s.date}),Object(r.h)("small",{id:"dateHelp",class:"form-text text-muted"},Object(r.h)(d.c,{id:"dogs.achievement-date-help"},"Date of achievement"))),Object(r.h)("div",{class:"form-group"},Object(r.h)("label",{for:"description"},Object(r.h)(d.c,{id:"dogs.achievement-description"},"Description")),Object(r.h)("input",{type:"text",class:"form-control",id:"description","aria-describedby":"descriptionHelp",onInput:Object(h.a)(this,"data.description"),value:s.description}),Object(r.h)("small",{id:"descriptionHelp",class:"form-text text-muted"},Object(r.h)(d.c,{id:"dogs.achievement-description-help"},"Description of achievement"))),Object(r.h)("div",{class:"form-group"},Object(r.h)("label",{for:"url"},Object(r.h)(d.c,{id:"dogs.achievement-url"},"Url")),Object(r.h)("input",{type:"text",class:"form-control",id:"url","aria-describedby":"urlHelp",onInput:Object(h.a)(this,"data.url"),value:s.url}),Object(r.h)("small",{id:"urlHelp",class:"form-text text-muted"},Object(r.h)(d.c,{id:"dogs.achievement-url-help"},"URL of achievement"))),Object(r.h)("button",{class:"btn btn-success",onClick:this.handleAdd},Object(r.h)(d.c,{id:"dogs.achievement-add"},"Add achievement")))))},s}(r.Component))||i;t.a=u}).call(this,s("hosL").Fragment)},LbFk:function(e,t,s){"use strict";(function(e){function n(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function a(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?n(Object(s),!0).forEach((function(t){o(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):n(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function o(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}var i,r=s("hosL"),c=s("Utv1"),l=s("/eY4"),d=(s("OhSV"),s("fh8t"),s("go65")),h=(s("ZOvn"),function(e){return function(t,s){return e.map((function(e){var n=1;return"-"===e[0]&&(n=-1,e=e.substring(1)),t[e]>s[e]?n:t[e]<s[e]?-n:0})).reduce((function(e,t){return e||t}),0)}}),u=Object(l.a)(i=function(t){function s(e){var s;return(s=t.call(this,e)||this).addResult=function(e){return new Promise((function(t,n){var o,i,r,c,l,d,h,u,b,p,m,f,g,O;return i=(o=s.props.stores).raceStore,r=o.appState,c=e.target.closest("button").dataset,l=c.direction,d=c.classid,h=r.checkpointId,b=i.getClassById((void 0===(u=r.selectedClassIds)?[]:u)[0]),p=b.checkpoints?b.checkpoints.find((function(e){return e.id===h})):null,m=s.state.result,Promise.resolve(i.addResult({id:i.race.id,classId:d,newResult:a({direction:l,checkpoint:h,timestamp:new Date},m)})).then((function(){try{return i.sortContestantsByResult({contestants:void 0===(g=b.contestants)?[]:g,results:void 0===(O=b.results)?[]:O,checkpoints:void 0===(f=b.checkpoints)?[]:f}),s.setState({result:{bib:"",dogs:"",timestamp:""},message:"Added "+m.bib+" with "+m.dogs+" dogs "+l+" "+("in"===l?"to":"of")+" checkpoint "+p.name+"."}),clearTimeout(s.updateTimer.message),s.updateTimer.message=setTimeout((function(){return new Promise((function(e){return s.setState({message:""}),e()}))}),3e3),t()}catch(e){return n(e)}}),n)}))},s.editResult=function(e){var t,n=s.props.stores,a=n.raceStore,o=a.race.id,i=e.target.id,r=e.target.value,l=e.target.dataset,d=l.classid,h=l.resultid,u=n.appState.selectedClassIds,b=a.getClassById((void 0===u?[]:u)[0]),p=((t={raceClassId:d,resultId:h})["raceClassResult"+c.a.ucfirst(i)]=r,t);clearTimeout(s.updateTimer[i]),s.updateTimer[i]=setTimeout((function(){return new Promise((function(e,t){var s,n,c;return Promise.resolve(a.editClass({id:o,data:p})).then((function(){try{return a.localUpdateSignup(i,r),a.sortContestantsByResult({contestants:void 0===(n=b.contestants)?[]:n,results:void 0===(c=b.results)?[]:c,checkpoints:void 0===(s=b.checkpoints)?[]:s}),e()}catch(e){return t(e)}}),t)}))}),500)},s.deleteResult=function(){return new Promise((function(e,t){var n,a,o,i,r,c,l,d,h;return n=s.state.selectedResult,i=(o=(a=s.props.stores).raceStore).race.id,c=o.getClassById((void 0===(r=a.appState.selectedClassIds)?[]:r)[0]),Promise.resolve(o.editClass({id:i,data:{raceClassId:c.id,resultId:n,raceClassResultDelete:1}})).then((function(){try{return o.sortContestantsByResult({contestants:void 0===(d=c.contestants)?[]:d,results:void 0===(h=c.results)?[]:h,checkpoints:void 0===(l=c.checkpoints)?[]:l}),s.doneEditResult(),e()}catch(e){return t(e)}}),t)}))},s.selectCheckpoint=function(e){var t=e.target.closest("button").dataset.id;s.props.stores.appState.selectCheckpoint(t)},s.toggleTimestamp=function(){var e=s.state,t=e.showTimestamp,n=e.result,a=s.props.stores,o=a.appState.selectedClassIds,i=a.raceStore.getClassById((void 0===o?[]:o)[0]),r=i.contestants?i.contestants.find((function(e){return e.bib===parseInt(n.bib,10)})):null,l=i.results?i.results.slice().sort(h(["-timestamp"])).reverse().filter((function(e){return parseInt(e.bib,10)===parseInt(n.bib,10)})):null;n.timestamp=c.a.isoDate(l&&l[0]?l[0].timestamp:r&&r.startTime?r.startTime:i.startDate,!1,!1,!1),s.setState({showTimestamp:!t,result:n})},s.doneEditResult=function(){s.setState({selectedResult:"",result:{bib:"",dogs:"",timestamp:""}})},s.selectResult=function(e){var t=e.target.closest(".resultLine").dataset.resultid;s.setState({selectedResult:t})},s.state={result:{},message:""},s.updateTimer={},s}var n,o;o=t,(n=s).prototype=Object.create(o.prototype),n.prototype.constructor=n,n.__proto__=o;var i=s.prototype;return i.componentWillReceiveProps=function(){},i.componentDidMount=function(){this.doneEditResult()},i.render=function(){var t=this,s=this.state,n=s.result,a=s.showTimestamp,o=s.message,i=s.selectedResult,l=this.props.stores,u=l.appState,b=l.raceStore,p=l.userStore,m=u.checkpointId,f=b.sortedContestants,g=void 0===f?[]:f,O=u.selectedClassIds,j=b.getClassById((void 0===O?[]:O)[0]),v=j.checkpoints?j.checkpoints.find((function(e){return e.id===m})):null,y=g?g.find((function(e){return e.bib===parseInt(n.bib,10)})):null,w=j.results?j.results.slice().sort(h(["-timestamp","-direction"])).filter((function(e){return parseInt(e.bib,10)===parseInt(n.bib,10)})):null,x=w.find((function(e){return e.checkpoint===m&&"in"===e.direction})),k=w.find((function(e){return e.checkpoint===m&&"out"===e.direction})),S=w.find((function(e){return e.checkpoint===m&&"scratched"===e.direction})),I=j.results?j.results.find((function(e){return e.id===i})):{},C=p.user,T=(void 0===C?{}:C).language,D=void 0===T?"en":T;return Object(r.h)(e,null,Object(r.h)("div",{class:"mt-5",style:"height: 70vh;"},Object(r.h)("h1",null,"Admin timing - ",j.title),Object(r.h)("div",{class:"w-100 overflow-hidden"},Object(r.h)("div",{class:"d-flex flex-row flex-nowrap pb-2 px-1",style:"overflow: auto; scroll-snap-type: x mandatory;"},j.checkpoints&&j.checkpoints.slice().sort(h(["sortOrder"])).map((function(s,n){return Object(r.h)(e,null,Object(r.h)("div",{class:"col px-0 pt-2"},Object(r.h)("button",{type:"button",class:"btn btn-block "+(0===n&&"rounded-pill-left")+" "+(n===j.checkpoints.length-1&&"rounded-pill-right")+" rounded-none "+(m===s.id?"btn-primary":"btn-outline-primary")+" text-nowrap",style:"text-overflow: ellipsis; overflow: hidden;",onClick:t.selectCheckpoint,"data-id":s.id},s.name)))})))),Object(r.h)("div",{class:"w-100 overflow-hidden"},v&&Object(r.h)(e,null,Object(r.h)("h3",null,y&&Object(r.h)(e,null,Object(r.h)("i",{class:"fas fa-user text-muted"})," ",y.firstname," ",y.lastname)),I?Object(r.h)(e,null,["bib","dogs"].map((function(s){return Object(r.h)(e,null,Object(r.h)("div",{class:"form-group"},Object(r.h)("label",{for:s},s),Object(r.h)("input",{type:"text",class:"form-control",id:s,"aria-describedby":s+"Help","data-classid":j.id,"data-resultid":I.id,"data-field":s,value:I[s],onInput:t.editResult})))})),["timestamp"].map((function(s){return Object(r.h)(e,null,Object(r.h)("div",{class:"form-group"},Object(r.h)("label",{for:s},s),Object(r.h)("input",{type:"datetime-local",class:"form-control",id:s,"aria-describedby":s+"Help","data-classid":j.id,"data-resultid":I.id,"data-field":s,value:c.a.isoDate(I[s],!1,!1,!1),onInput:t.editResult}),Object(r.h)("button",{class:"btn btn-link",onClick:t.toggleTimestamp},"Hide timestamp")))})),Object(r.h)("button",{class:"btn btn-lg btn-danger float-left",onClick:this.deleteResult},"Delete"),Object(r.h)("button",{class:"btn btn-lg btn-info float-right",onClick:this.doneEditResult},"Done")):Object(r.h)(e,null,["bib"].map((function(s){return Object(r.h)(e,null,Object(r.h)("div",{class:"form-group"},Object(r.h)("label",{for:s},s),Object(r.h)("input",{type:"text",class:"form-control form-control-lg",id:s,"aria-describedby":s+"Help",onInput:Object(d.a)(t,"result."+s),value:n[s]})))})),["dogs"].map((function(s){return Object(r.h)(e,null,Object(r.h)("div",{class:"form-group"},Object(r.h)("label",{for:s},s),Object(r.h)("input",{type:"text",class:"form-control form-control-lg",id:s,"aria-describedby":s+"Help",onInput:Object(d.a)(t,"result."+s),value:n[s]})))})),a?Object(r.h)(e,null,["timestamp"].map((function(s){return Object(r.h)(e,null,Object(r.h)("div",{class:"form-group"},Object(r.h)("label",{for:s},s),Object(r.h)("input",{type:"datetime-local",class:"form-control",id:s,"aria-describedby":s+"Help",onInput:Object(d.a)(t,"result."+s),value:n[s]}),Object(r.h)("button",{class:"btn btn-link",onClick:t.toggleTimestamp},"Hide timestamp")))}))):Object(r.h)(e,null,Object(r.h)("div",{class:"form-group"},Object(r.h)("button",{class:"btn btn-link",onClick:this.toggleTimestamp},"Show timestamp"))),x&&k&&Object(r.h)(e,null,Object(r.h)("div",{class:"alert alert-warning my-2",role:"alert"},Object(r.h)("i",{class:"fas fa-exclamation-triangle"}),y&&Object(r.h)(e,null,y.firstname," ",y.lastname)," Has checked in and out of this checkpoint!")),Object(r.h)("div",{class:"d-flex justify-content-between"},Object(r.h)("button",{class:"btn btn-lg btn-success float-left",onClick:this.addResult,"data-direction":"in","data-classid":j.id,disabled:x?"disabled":""},"CP In ",Object(r.h)("i",{class:"fas fa-sign-in-alt ml-2"})),Object(r.h)("div",{class:"text-center"},Object(r.h)("h3",null,Object(r.h)("i",{class:"fas fa-campground text-muted"})," ",v.name)),Object(r.h)("button",{class:"btn btn-lg btn-info float-right",onClick:this.addResult,"data-direction":"out","data-classid":j.id,disabled:k?"disabled":""},Object(r.h)("i",{class:"fas fa-sign-out-alt mr-2"})," CP Out"))))),o&&Object(r.h)("div",{class:"alert alert-success mt-3",role:"alert"},o),Object(r.h)("div",{class:"overflow-hidden mb-5 mt-3"},w&&w.map((function(s){var n=j.checkpoints?j.checkpoints.find((function(e){return e.id===s.checkpoint})):null,a="in"===s.direction&&n.requiredRestMinutes?n.timeEqualization?y.timeEqualization+n.requiredRestMinutes:n.requiredRestMinutes:null,o=new Date(new Date(s.timestamp).getTime()+6e4*a);return Object(r.h)(e,null,Object(r.h)("div",{class:"d-flex justify-content-between resultLine","data-resultid":s.id,onClick:t.selectResult},Object(r.h)("div",{class:""},Object(r.h)("nobr",null,Object(r.h)("span",{class:"text-muted"},Object(r.h)("i",{class:"fas fa-clock"}))," ",c.a.formatDate(s.timestamp,{locale:D,year:"2-digit",month:"short",hour12:!1,hour:"2-digit",minute:"2-digit"}))),Object(r.h)("div",{class:"flex-grow-1"},Object(r.h)("span",{class:"text-muted ml-3"},"in"===s.direction&&Object(r.h)(e,null,Object(r.h)("i",{class:"fas fa-sign-in-alt mr-2 text-success"})),"out"===s.direction&&Object(r.h)(e,null,Object(r.h)("i",{class:"fas fa-sign-out-alt mr-2 text-primary"})),"scratched"===s.direction&&Object(r.h)(e,null,Object(r.h)("i",{class:"fas fa-times mr-2 text-danger"}))),n.name,a&&Object(r.h)(e,null,Object(r.h)("div",null,y.timeEqualization?Object(r.h)(e,null,Object(r.h)("span",{class:"text-muted ml-2"},"Req rest:")," ",n.requiredRestMinutes," + ",y.timeEqualization," min",Object(r.h)("br",null),Object(r.h)("span",{class:"text-muted ml-2"},"First out:")," ",c.a.formatDate(o,{locale:D,year:"2-digit",month:"short",hour12:!1,hour:"2-digit",minute:"2-digit"}),Object(r.h)("br",null)):Object(r.h)(e,null,Object(r.h)("span",{class:"text-muted ml-2"},"Req rest:")," ",n.requiredRestMinutes," min",Object(r.h)("br",null),Object(r.h)("span",{class:"text-muted ml-2"},"First out:")," ",c.a.formatDate(o,{locale:D,year:"2-digit",month:"short",hour12:!1,hour:"2-digit",minute:"2-digit"}),Object(r.h)("br",null))))),Object(r.h)("div",{class:"px-0"},Object(r.h)("nobr",null,Object(r.h)("span",{class:"text-muted"},Object(r.h)("i",{class:"fas fa-dog ml-3"}))," ",s.dogs,Object(r.h)("br",null)))))}))),Object(r.h)("div",{class:"d-flex justify-content-center mt-3 mb-5"},Object(r.h)("button",{class:"btn btn-sm btn-block btn-danger",onClick:this.addResult,"data-direction":"scratched","data-classid":j.id,disabled:S?"disabled":""},"Scratch ",Object(r.h)("i",{class:"fas fa-times ml-2"})))))},s}(r.Component))||i;t.a=u}).call(this,s("hosL").Fragment)},NDEG:function(e,t,s){"use strict";(function(e){var n,a=s("hosL"),o=s("Utv1"),i=s("/eY4"),r=s("ZOvn"),c=Object(i.a)(n=function(t){function s(){return t.apply(this,arguments)||this}var n,i;return i=t,(n=s).prototype=Object.create(i.prototype),n.prototype.constructor=n,n.__proto__=i,s.prototype.render=function(){var t=this.props,s=t.dog,n=void 0===s?{}:s,i=t.dogs,c=void 0===i?[]:i,l=t.showTeam,d=t.showInfo,h=t.showName,u=void 0===h||h,b=t.showPosition,p=void 0===b||b,m=t.showAge,f=void 0!==m&&m,g=t.className,O=t.size,j=t.onDogClick,v=void 0===j?function(){}:j,y=this.props.stores.userStore,w=y.user.language,x=y.findDogposition({position:n.position,language:void 0===w?"en":w}),k=r.a.hasBirthday(n.birth),S=(Math.ceil(r.a.daysUntilNextBirthday(n.birth)),"92px"),I="",C="35px";return"small"===O?(S="50px",I="imageRoundedSmall",C="20px"):"medium"===O&&(S="60px",I="imageRoundedMedium",C="25px"),Object(a.h)("div",{class:"mb-2 position-relative "+g+" clearfix",style:"width: "+S,onTouchstart:function(e){e.stopPropagation()},onTouchend:function(e){e.stopPropagation()},onTouchmove:function(e){e.stopPropagation()}},p&&x&&Object(a.h)("small",{class:"position-absolute",style:"left:0px; top: 50px;"},Object(a.h)("span",{class:"badge badge-"+(x.class||"primary")+" mr-3"},x.icon&&Object(a.h)("i",{class:x.icon})," ",x.name)),Object(a.h)("div",{class:"text-center border rounded-circle imageRounded "+I+" mx-auto text-muted pt-2",style:(n.image?'background-image: url("'+n.image.s3SmallLink+'"); background-size: cover;':"")+" border-width: 2px !important;"},!n.image&&Object(a.h)("span",{class:"font-weight-lighter",style:"font-size: "+C+";"},o.a.ucfirst(n.name,!0))),Object(a.h)("div",{class:"text-center text-overflow",style:"line-height: 1.0em;"},Object(a.h)("small",null,Object(a.h)("a",{href:"/dogs/public/"+n.uuidv4,onClick:function(e){return v(e,n.uuidv4,c)},class:"stretched-link"},u&&Object(a.h)(e,null,Object(a.h)("span",{class:"mb-1 font-weight-light"},Object(a.h)("nobr",null,n.shortname||n.name,k&&Object(a.h)(e,null,Object(a.h)("i",{class:"fas fa-birthday-cake ml-3"})))))))),Object(a.h)("div",{class:"text-center text-overflow",style:"line-height: 1.0em;"},Object(a.h)("small",null,n.birth&&f&&Object(a.h)(e,null,Object(a.h)("span",{class:"float-right"},n.birth&&Object(a.h)("span",{class:"mr-2"},o.a.age(n.birth,n.deceased)),"female"===n.gender?Object(a.h)("i",{class:"fas fa-venus"}):Object(a.h)("i",{class:"fas fa-mars"}))),l&&Object(a.h)(e,null,Object(a.h)("span",{class:"font-weight-light"},y.findTeam(n.team)),Object(a.h)("br",null)),d&&Object(a.h)("small",{class:"text-muted"},n.weight&&Object(a.h)(e,null,Object(a.h)("i",{class:"fas fa-balance-scale ml-2"})," ",o.a.format(n.weight,1)," kg"),n.bodyScore&&Object(a.h)(e,null,Object(a.h)("i",{class:"fas fa-dog ml-2"})," ",o.a.format(n.bodyScore,1))))))},s}(a.Component))||n;t.a=c}).call(this,s("hosL").Fragment)},NMoA:function(e,t,s){"use strict";(function(e){function n(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function a(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function o(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}var i,r,c,l,d,h=s("hosL"),u=s("Utv1"),b=s("/eY4"),p=s("cneo"),m=s("OhSV"),f=s("fh8t"),g=s.n(f),O=s("go65"),j=s("Y3FI"),v=(s("X9Km"),s("1OK2"),s("B95u")),y=s("4QWe"),w=(s("NMoA"),s("s4FZ")),x=s("+JSK"),k=s("vY+r"),S=s("eQ6k"),I=s("ZOvn"),C={showAddComment:{},showTeamSetting:{},viewImageIdx:{},likeStory:{}},T=Object(b.a)(i=function(t){function s(e){var s;return(s=t.call(this,e)||this).saveStory=function(e){return new Promise((function(t,n){var a,o,i,r,c;return a=e.target.closest("button").dataset.id,o=s.state.storyBody,i=s.props.stores.storyStore,c=void 0===(r=s.props.callback)?function(){return!0}:r,Promise.resolve(i.saveField(parseInt(a,10),"body",o,!0)).then((function(){try{return i.publicFeedUpdate(parseInt(a,10),"body",o),s.setState({storyBody:"",storyType:0}),c(),t()}catch(e){return n(e)}}),n)}))},s.saveStoryField=function(e){return new Promise((function(t){var n=s.props.story.id,a=e.target,o=a.value,i=a.name;return clearTimeout(s.updateTimer[i]),s.updateTimer[i]=setTimeout((function(){return new Promise((function(e){return s.doUpdateField(n,i,o),e()}))}),1e3),t()}))},s.updateTimer={},s}o(s,t);var n=s.prototype;return n.doUpdateField=function(e,t,s){return new Promise(function(n,a){var o;return o=this.props.stores.storyStore,Promise.resolve(o.saveField(parseInt(e,10),t,s,!0)).then((function(){try{return o.publicFeedUpdate(parseInt(e,10),t,s),n()}catch(e){return a(e)}}),a)}.bind(this))},n.render=function(){var t=this.state,s=t.storyBody,n=t.storyType,a=this.props.stores.userStore.isAdmin,o=this.props.story;return Object(h.h)(e,null,Object(h.h)("div",{class:"d-flex bd-highlight"},Object(h.h)("div",{class:"p-0 w-100 bd-highlight"},Object(h.h)("label",{class:"sr-only",for:"inlineFormInput"},Object(h.h)(m.c,{id:"comments.comment"},"Kommentar")),Object(h.h)("div",{class:"border rounded rounded-lg position-relative"},Object(h.h)(m.b,null,Object(h.h)("textarea",{class:"form-control-plaintext px-2",type:"text",placeholder:Object(h.h)(m.c,{id:"comments.write-comment"},"Skriv en kommentar..."),onInput:Object(O.a)(this,"storyBody"),onFocus:I.a.resizeTextarea,style:"height: 2.3em;",value:s||o.body}))),Object(h.h)("div",{class:"position-relative mt-3"},a&&Object(h.h)(e,null,Object(h.h)("div",{class:"col-12 text-center mt-2"},Object(h.h)("div",{class:"form-group"},Object(h.h)("small",null,Object(h.h)("label",null,"Pinned to top:"),Object(h.h)("input",{type:"checkbox",id:o.id,name:"pinned",onInput:this.saveStoryField,value:o.pinned?0:1,checked:o.pinned?1:0}))))),a&&Object(h.h)(e,null,Object(h.h)("label",null,Object(h.h)(m.c,{id:"story.type"},"Type")),Object(h.h)("div",{class:"form-group"},Object(h.h)("small",null,Object(h.h)("select",{class:"custom-select custom-select-sm",id:o.id,name:"type",onInput:this.saveStoryField,value:n||o.type},Object(h.h)("option",{value:""},"-- ",Object(h.h)(m.c,{id:"story.type-choose"},"Velg type")," --"),Object(h.h)("option",{value:1,selected:1==o.type?"selected":""},"✍️ ",Object(h.h)(m.c,{id:"story.type-regular"},"Vanlig")),Object(h.h)("option",{value:2,selected:2==o.type?"selected":""},"🚀 ",Object(h.h)(m.c,{id:"story.type-ad"},"Annonse")),Object(h.h)("option",{value:3,selected:3==o.type?"selected":""},"📄 ",Object(h.h)(m.c,{id:"story.type-article"},"Artikkel")))))),o.type>=2&&Object(h.h)(e,null,Object(h.h)("label",null,Object(h.h)(m.c,{id:"story.url-text"},"URL text")),Object(h.h)("div",{class:"form-group"},Object(h.h)("small",null,Object(h.h)("input",{class:"form-control",type:"text",name:"urlText",onInput:this.saveStoryField,value:o.urlText}))),Object(h.h)("label",null,Object(h.h)(m.c,{id:"story.url"},"URL")),Object(h.h)("div",{class:"form-group"},Object(h.h)("small",null,Object(h.h)("input",{class:"form-control",type:"text",name:"url",onInput:this.saveStoryField,value:o.url})))),2===o.type&&Object(h.h)(e,null,Object(h.h)("label",null,Object(h.h)(m.c,{id:"story.code"},"Code")),Object(h.h)("div",{class:"form-group"},Object(h.h)("small",null,Object(h.h)("input",{class:"form-control",type:"text",name:"code",onInput:this.saveStoryField,value:o.code}))),Object(h.h)("label",null,Object(h.h)(m.c,{id:"story.country"},"Country")),Object(h.h)("div",{class:"form-group"},Object(h.h)("small",null,Object(h.h)("input",{class:"form-control",type:"text",name:"country",onInput:this.saveStoryField,value:o.country}))),Object(h.h)("label",null,Object(h.h)(m.c,{id:"story.region"},"Region")),Object(h.h)("div",{class:"form-group"},Object(h.h)("small",null,Object(h.h)("input",{class:"form-control",type:"text",name:"region",onInput:this.saveStoryField,value:o.region}))),Object(h.h)("label",null,Object(h.h)(m.c,{id:"story.currency"},"Currency")),Object(h.h)("div",{class:"form-group"},Object(h.h)("small",null,Object(h.h)("input",{class:"form-control",type:"text",name:"currency",onInput:this.saveStoryField,value:o.currency}))),Object(h.h)("label",null,Object(h.h)(m.c,{id:"story.price"},"Price")),Object(h.h)("div",{class:"form-group"},Object(h.h)("small",null,Object(h.h)("input",{class:"form-control",type:"text",name:"price",onInput:this.saveStoryField,value:o.price})))))),Object(h.h)("div",{class:"p-0 pl-2 flex-shrink-1 bd-highlight"},Object(h.h)("button",{type:"button",class:"btn btn-primary mb-2",onClick:this.saveStory,"data-id":o.id},Object(h.h)("i",{class:"fas fa-paper-plane"})))))},s}(h.Component))||i,D=Object(b.a)(r=function(t){function s(e){var s;return(s=t.call(this,e)||this).viewImage=function(e){var t=e.target.closest("img").dataset,n=s.state.viewImageIdx;n[t.id]=t.idx,s.setState({viewImageIdx:n})},s.showStoryDetail=function(e){if("a"===e.target.localName)return!1;var t=e.target.closest("#storyDetail").dataset.id;t&&Object(j.route)("/stories/"+t)},s.translate=function(e){return new Promise((function(t,n){var a;return e.preventDefault(),e.stopPropagation(),a=s.props.stores,Promise.resolve(a.storyStore.translate({story:s.props.story,user:a.userStore.user})).then((function(e){try{return s.setState({showOriginal:0,translatedText:e}),t()}catch(e){return n(e)}}),n)}))},s.showOriginal=function(e){e.preventDefault(),e.stopPropagation(),s.setState({showOriginal:1})},s.state={viewImageIdx:{}},s}return o(s,t),s.prototype.render=function(){var t=this.state,s=t.showOriginal,n=t.translatedText,a=this.props.stores,o=this.props,i=o.story,r=o.likeStory,c=o.likeRef,l=a.userStore.user.language,d=void 0===l?"en":l,u=[];if(i.images){var b=Object(p.i)(i.images);u.push.apply(u,b)}var f=I.a.getTranslation({object:i,targetLang:d,field:"body"})||n,O=f||i.body;return s&&(O=i.body),Object(h.h)(e,null,Object(h.h)("div",{class:"container-fluid px-0 mt-1"},Object(h.h)("div",{class:"row"},Object(h.h)(w.a,{stores:this.props.stores,images:u,id:i.id,dblClick:r,likeRef:c}))),Object(h.h)("div",{class:"row mt-2"},Object(h.h)("div",{class:"clearfix col-12",style:i.offline?"text-decoration: line-through;":""},Object(h.h)("div",{id:"storyDetail",onClick:this.showStoryDetail,"data-id":i.id},Object(h.h)(g.a,{markdown:I.a.replaceImages(O,i.images,d),markdownOpts:I.a.getMarkdownOptions()}),i.language!==d&&Object(h.h)(e,null,!s&&f?Object(h.h)(e,null,Object(h.h)("button",{type:"button",class:"btn btn-sm btn-link text-muted",onClick:this.showOriginal},Object(h.h)("i",{class:"fas fa-cog"}),"  ",Object(h.h)(m.c,{id:"home.translate-show-original"},"Show original"))):Object(h.h)(e,null,Object(h.h)("button",{type:"button",class:"btn btn-sm btn-link text-muted",onClick:this.translate},Object(h.h)("i",{class:"fas fa-cog"})," ",Object(h.h)(m.c,{id:"home.translate-to"},"See translation"))))))))},s}(h.Component))||r,P=Object(b.a)(c=function(t){function s(e){var s;return(s=t.call(this,e)||this).viewImage=function(e){var t=e.target.closest("img").dataset,n=s.state.viewImageIdx;n[t.id]=t.idx,s.setState({viewImageIdx:n})},s.showStoryDetail=function(e){if("a"===e.target.localName)return!1;var t=e.target.closest("#storyDetail").dataset.id;t&&Object(j.route)("/stories/"+t)},s.translate=function(e){return new Promise((function(t,n){var a,o,i,r;return e.preventDefault(),e.stopPropagation(),a=s.props.story,i=(o=s.props.stores).storyStore,r=o.userStore.user,s.setState({showOriginal:0}),Promise.resolve(i.translate({story:a,user:r})).then((function(){try{return t()}catch(e){return n(e)}}),n)}))},s.showOriginal=function(e){e.preventDefault(),e.stopPropagation(),s.setState({showOriginal:1})},s.getTranslation=function(){var e=s.props.stores,t=e.userStore,n=t.user.language;I.a.getTranslation({object:s.props.story,targetLang:void 0===n?"en":n,field:"body"})&&s.setState({showOriginal:0})},s.state={viewImageIdx:{}},s}o(s,t);var n=s.prototype;return n.componentWillMount=function(){this.getTranslation()},n.render=function(){var t=this.state,s=t.showOriginal,n=this.props.stores,a=this.props,o=a.story,i=a.likeStory,r=a.likeRef,c=n.userStore.user.language,l=void 0===c?"en":c,d=[];if(o.images){var b=Object(p.i)(o.images);d.push.apply(d,b)}var f=I.a.getTranslation({object:o,targetLang:l,field:"body"}),O=f||o.body;return s&&(O=o.body),Object(h.h)(e,null,Object(h.h)("div",{class:"container-fluid px-0 mt-1"},Object(h.h)("div",{class:"row"},Object(h.h)(w.a,{stores:this.props.stores,images:d,id:o.id,dblClick:i,likeRef:r}))),Object(h.h)("div",{class:"row mt-2"},Object(h.h)("div",{class:"clearfix col-12",style:o.offline?"text-decoration: line-through;":""},Object(h.h)("div",{id:"storyDetail","data-id":o.id},Object(h.h)(g.a,{markdown:I.a.replaceImages(O,o.images,l),markdownOpts:I.a.getMarkdownOptions()}),o.language!==l&&Object(h.h)(e,null,!s&&f?Object(h.h)(e,null,Object(h.h)("button",{type:"button",class:"btn btn-sm btn-link",onClick:this.showOriginal},Object(h.h)("i",{class:"fas fa-cog"}),"  ",Object(h.h)(m.c,{id:"home.translate-show-original"},"Show original"))):Object(h.h)(e,null,Object(h.h)("button",{type:"button",class:"btn btn-sm btn-link",onClick:this.translate},Object(h.h)("i",{class:"fas fa-cog"})," ",Object(h.h)(m.c,{id:"home.translate-to"},"See translation")))))),!!(o.url||o.code||o.price>0)&&Object(h.h)(e,null,Object(h.h)("div",{class:"clearfix col-12  py-2",style:o.offline?"text-decoration: line-through;":""},Object(h.h)("div",{class:"row"},o.url&&Object(h.h)(e,null,Object(h.h)("div",{class:"col-12 text-left",style:"font-size: 1.0em;"},Object(h.h)("a",{href:I.a.asUrl(o.url),target:"_blank",rel:"noreferrer"},Object(h.h)("i",{class:"fas fa-link mr-2"}),o.urlText?Object(h.h)(e,null,o.urlText):Object(h.h)(e,null,Object(h.h)(m.c,{id:"story.ad-url-readmore"},"Les mer..."))))),o.code&&Object(h.h)(e,null,Object(h.h)("div",{class:"col text-left",style:"font-size: 1.2em;"},Object(h.h)("nobr",null,Object(h.h)("span",{class:"font-weight-lighter"},Object(h.h)(m.c,{id:"story.ad-campaign-code"},"Kampanjekode"),":")," ",o.code))),o.price>0&&Object(h.h)(e,null,Object(h.h)("div",{class:"col text-right",style:"font-size: 1.2em;"},Object(h.h)("nobr",null,o.currencty&&Object(h.h)("span",{class:"font-weight-lighter"},o.currency)," ",u.a.format(o.price,2)))))))))},s}(h.Component))||c,R=Object(b.a)(l=function(t){function s(e){var s;return(s=t.call(this,e)||this).viewImage=function(e){var t=e.target.closest("img").dataset,n=s.state.viewImageIdx;n[t.id]=t.idx,s.setState({viewImageIdx:n})},s.showStoryDetail=function(e){if("a"===e.target.localName)return!1;var t=e.target.closest("#storyDetail").dataset.id;t&&Object(j.route)("/stories/"+t)},s.translate=function(e){return new Promise((function(t,n){var a,o,i,r;return e.preventDefault(),e.stopPropagation(),a=s.props.story,i=(o=s.props.stores).storyStore,r=o.userStore.user,s.setState({showOriginal:0}),Promise.resolve(i.translate({story:a,user:r})).then((function(){try{return t()}catch(e){return n(e)}}),n)}))},s.showOriginal=function(e){e.preventDefault(),e.stopPropagation(),s.setState({showOriginal:1})},s.getTranslation=function(){var e=s.props.stores,t=e.userStore,n=t.user.language;I.a.getTranslation({object:s.props.story,targetLang:void 0===n?"en":n,field:"body"})&&s.setState({showOriginal:0})},s.state={viewImageIdx:{}},s}o(s,t);var n=s.prototype;return n.componentWillMount=function(){this.getTranslation()},n.render=function(){var t=this.state,s=t.showOriginal,n=this.props.stores,a=this.props,o=a.story,i=a.likeStory,r=a.likeRef,c=n.userStore.user.language,l=void 0===c?"en":c,d=[];if(o.images){var u=Object(p.i)(o.images);d.push.apply(d,u)}var b=I.a.getTranslation({object:o,targetLang:l,field:"body"}),f=b||o.body;return s&&(f=o.body),Object(h.h)(e,null,Object(h.h)("div",{class:"container-fluid px-0 mt-1"},Object(h.h)("div",{class:"row"},Object(h.h)(w.a,{stores:this.props.stores,images:d,id:o.id,dblClick:i,likeRef:r}))),Object(h.h)("div",{class:"row mt-2"},Object(h.h)("div",{class:"clearfix col-12",style:o.offline?"text-decoration: line-through;":""},Object(h.h)("div",{id:"storyDetail",onClick:this.showStoryDetail,"data-id":o.id},Object(h.h)(g.a,{markdown:I.a.replaceImages(f,o.images,l),markdownOpts:I.a.getMarkdownOptions()}),o.language!==l&&Object(h.h)(e,null,!s&&b?Object(h.h)(e,null,Object(h.h)("button",{type:"button",class:"btn btn-sm btn-link",onClick:this.showOriginal},Object(h.h)("i",{class:"fas fa-cog"}),"  ",Object(h.h)(m.c,{id:"home.translate-show-original"},"Show original"))):Object(h.h)(e,null,Object(h.h)("button",{type:"button",class:"btn btn-sm btn-link",onClick:this.translate},Object(h.h)("i",{class:"fas fa-cog"})," ",Object(h.h)(m.c,{id:"home.translate-to"},"See translation")))))),!!(o.url||o.code||o.price)&&Object(h.h)(e,null,Object(h.h)("div",{class:"clearfix col-12  py-2",style:o.offline?"text-decoration: line-through;":""},Object(h.h)("div",{class:"row"},o.url&&Object(h.h)(e,null,Object(h.h)("div",{class:"col-12 text-left",style:"font-size: 1.0em;"},Object(h.h)("a",{href:I.a.asUrl(o.url),target:"_blank",rel:"noreferrer"},Object(h.h)("i",{class:"fas fa-link mr-2"}),o.urlText?Object(h.h)(e,null,o.urlText):Object(h.h)(e,null,Object(h.h)(m.c,{id:"story.ad-url-readmore"},"Les mer..."))))))))))},s}(h.Component))||l,A=Object(b.a)(d=function(t){function s(e){var s;return(s=t.call(this,e)||this).toggleDate=function(e){e.stopPropagation(),e.preventDefault(),s.setState({showDate:!s.state.showDate})},s.likeStory=function(){return new Promise((function(e,t){var n,a,o,i;return a=s.props.stores.storyStore,(o=s.state.likeStory)[n=s.props.story.id]=!0,i=Object.keys(o),s.setState({likeStory:o,likeIds:i}),setTimeout((function(){var e=s.state.likeStory;delete e[n];var t=Object.keys(e);s.setState({likeStory:e,likeIds:t})}),1200),Promise.resolve(a.likeStory({id:n})).then((function(s){try{return s,e()}catch(e){return t(e)}}),t)}))},s.toggleAddComment=function(e){var t=e.target.closest("button").dataset.id,n=s.state.showAddComment;n[t]?delete n[t]:n[t]=!0,s.setState({showAddComment:n},(function(){s.inputRef[t]&&s.inputRef[t].focus()}))},s.closeAllAddComments=function(){s.setState({showAddComment:{}})},s.toggleShowTeamSetting=function(e){var t=e.target.closest("button").dataset.id,n=s.state.showTeamSetting;n[t]?delete n[t]:n[t]=!0,s.setState({showTeamSetting:n})},s.viewImage=function(e){var t=e.target.closest("img").dataset,n=s.state.viewImageIdx;n[t.id]=t.idx,s.setState({viewImageIdx:n})},s.toggleMenu=function(e){var t=e.target.closest("i").dataset.id,n=s.state.showMenu,a=void 0===n?{}:n;a[t]=!a[t],s.setState({showDeleteStory:{},showEdit:{},showMenu:a})},s.toggleEdit=function(e){var t=e.target.closest("button").dataset.id,n=s.state.showEdit,a=void 0===n?{}:n;a[t]=!a[t],s.setState({showDeleteStory:{},showEdit:a,showMenu:{}})},s.toggleDeleteStory=function(e){var t=e.target.closest("button").dataset.id,n=s.state.showDeleteStory,a=void 0===n?{}:n;a[t]=!a[t],s.setState({showDeleteStory:a,showEdit:{},showMenu:{}})},s.reportStory=function(e){return new Promise((function(t,n){var a;return a=e.target.closest("button").dataset.id,Promise.resolve(s.props.stores.storyStore.reportStory({id:a})).then((function(){try{return s.setState({showEdit:{},showMenu:{}}),t()}catch(e){return n(e)}}),n)}))},s.adminRemoveStory=function(e){return new Promise((function(t,n){var a;return a=e.target.closest("button").dataset.id,Promise.resolve(s.props.stores.storyStore.adminHideStory({id:a})).then((function(){try{return s.setState({showEdit:{},showMenu:{}}),t()}catch(e){return n(e)}}),n)}))},s.deleteStory=function(e){return new Promise((function(t,n){var a,o;return a=e.target.closest("button").dataset.id,o=s.props.stores.storyStore,Promise.resolve(o.saveField(parseInt(a,10),"offline",1,!0)).then((function(){try{return o.publicFeedUpdate(parseInt(a,10),"offline",1),s.setState({storyBody:"",showDeleteStory:{},showEdit:{},showMenu:{}}),t()}catch(e){return n(e)}}),n)}))},s.doneEdit=function(){s.setState({storyBody:"",showDeleteStory:{},showEdit:{},showMenu:{}})},s.showStoryDetail=function(e){if("a"===e.target.localName)return!1;var t=e.target.closest("#storyDetail").dataset.id;t&&Object(j.route)("/stories/"+t)},s.shareLink=function(e){var t=e.target.closest("button").dataset;s.props.stores.appState.shareUrl({url:t.url,title:t.title,text:t.text})},s.state=function(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?n(Object(s),!0).forEach((function(t){a(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):n(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}({},C),s.inputRef={},s}o(s,t);var i=s.prototype;return i.loadStoriesPublicFeed=function(e){return new Promise(function(t,s){return void 0===e&&(e=this.props),Promise.resolve(e.stores.storyStore.loadPublicFeed({hashtag:e.hashtag})).then((function(){try{return t()}catch(e){return s(e)}}),s)}.bind(this))},i.render=function(){var t,s,n,a,o=this,i=this.state,r=i.showAddComment,c=i.showDate,l=i.showMenu,d=void 0===l?{}:l,b=i.showEdit,p=void 0===b?{}:b,f=i.showDeleteStory,g=void 0===f?{}:f,O=i.showTeamSetting,j=i.likeStory,w=i.likeIds,C=this.props,A=C.story,z=C.showAllComments,F=C.onTeamClick,L=void 0===F?function(){}:F,E=C.onUserClick,U=void 0===E?function(){}:E,M=this.props.stores,_=M.userStore,N=M.storyStore,B=M.appState,H=_.user,V=void 0===H?{}:H,q=_.isAdmin,K=B.hasShareApi,Y=N.findPublicTeam(A.team)||{},W=N.findPublicUser(A.user)||{},Z=I.a.getImage({user:W,team:Y,priority:"user",object:A}),G=!(!Y||!Y.members)&&Y.members.some((function(e){return e===V.id}));Y&&Y.name?(t=I.a.displayNameShort(Y),s=I.a.displayName(Y),n=I.a.displayName(W),W.settings&&V.uuidv4!==W.uuidv4&&(a=W.settings.hideProfile?null:"/inbox/"+W.uuidv4)):W&&W.id&&(t=I.a.displayNameShort(W),s=I.a.displayName(W));var J=A.likes,X=A.comments,Q=A.reports,$=void 0===Q?[]:Q,ee=A.likes&&A.likes.findIndex((function(e){return e.user===V.id}))>-1,te=Y.followers?Y.followers.length:0,se=Y.members&&Y.members.indexOf(V.id)>-1,ne=Y.followers&&Y.followers.indexOf(V.id)>-1,ae=Y.followRequests&&Y.followRequests.findIndex((function(e){return e.id===V.id}))>-1,oe=A.currentLocationGeocode,ie=void 0===oe?{}:oe,re=I.a.getViews(A.statistics),ce=I.a.getAdminData(A.statistics);return Object(h.h)(e,null,q||V.id===W.id?Object(h.h)(e,null,Object(h.h)("span",{class:"float-right font-weight-lighter text-muted"},Object(h.h)("i",{class:"fas fa-ellipsis-h",onClick:this.toggleMenu,"data-id":A.id}))):Object(h.h)(e,null,!se&&!ne&&!ae&&Y.public>0&&Object(h.h)("span",{class:"float-right"},Object(h.h)(S.a,{stores:this.props.stores,team:Y,buttonOnly:!0,simple:!0,classNames:"btn btn-link text-primary"}))),d[A.id]&&Object(h.h)(e,null,Object(h.h)("div",{class:"position-absolute bg-light p-2 border rounded rounded-lg shadow-sm",style:"top: 30px; right: 10px; width: 60%; z-index: 999999;"},V.id===W.id?Object(h.h)(e,null,Object(h.h)("button",{class:"btn btn-link btn-block text-left",onClick:this.toggleEdit,"data-id":A.id},Object(h.h)("i",{class:"fas fa-edit"})," Edit"),Object(h.h)("hr",null),Object(h.h)("button",{class:"btn btn-link btn-block text-left text-danger",onClick:this.toggleDeleteStory,"data-id":A.id},Object(h.h)("i",{class:"fas fa-trash-alt"})," Delete")):Object(h.h)(e,null,Object(h.h)("button",{class:"btn btn-link btn-block text-left",onClick:this.reportStory,"data-id":A.id},Object(h.h)("i",{class:"fas fa-flag"})," Report"),q&&Object(h.h)(e,null,Object(h.h)("hr",null),Object(h.h)("button",{class:"btn btn-link btn-block text-left text-danger",onClick:this.adminRemoveStory,"data-id":A.id},Object(h.h)("i",{class:"fas fa-eraser"})," Remove from feed"))))),Object(h.h)("div",{class:"d-flex position-relative"},Object(h.h)("div",{class:"position-relative text-center border rounded-circle imageRounded imageRoundedMedium",style:Z?'background-image: url("'+Z+'"); background-size: cover;':""},!Z&&Object(h.h)("div",{class:"text-muted",style:"font-size: 20px; padding-top: 3px;"},t)),Object(h.h)("div",{class:"flex-grow-1 pl-3 text-overflow",style:"line-height: 1.2em;"},Object(h.h)("h5",{class:"mb-1 position-relative",style:"line-height: 1.0em; "+(A.offline?"text-decoration: line-through;":"")},Y.public?Object(h.h)(e,null,Object(h.h)("a",{href:"/teams/public/"+Y.uuidv4,onClick:function(e){return L(e,Y.uuidv4)},class:"stretched-link"},s)):Object(h.h)(e,null,s),se&&!Y.public&&Object(h.h)("button",{type:"button",class:"btn btn-sm btn-link text-muted","data-id":A.id,onClick:this.toggleShowTeamSetting},Object(h.h)("i",{class:"fas fa-exclamation-triangle"}))),Object(h.h)("div",{class:"mb-2",style:A.offline?"text-decoration: line-through;":""},A.pinned&&Object(h.h)(e,null,Object(h.h)("small",{class:"text-muted mr-2"},Object(h.h)("i",{class:"fas fa-thumbtack"}))),2===A.type?Object(h.h)(e,null,Object(h.h)("small",{class:"text-muted"},Object(h.h)(m.c,{id:"story.sponsored"},"Sponsored")," -")):Object(h.h)(e,null,A.date&&Object(h.h)("small",{class:"text-muted",onClick:this.toggleDate},c?u.a.formatDate(A.date,{locale:"no-NB",hour12:!1,hour:"2-digit",minute:"2-digit"}):u.a.formatDistance(A.date,new Date,{locale:"no-NB"}))),1===A.public?Object(h.h)(e,null,Object(h.h)("small",{class:"ml-2 text-muted"},Object(h.h)("i",{class:"fas fa-globe-europe"}))):Object(h.h)(e,null,Object(h.h)("small",{class:"ml-2 text-muted"},Object(h.h)("i",{class:"fas fa-users"})," (",u.a.format(te),")")),n&&Object(h.h)(e,null,Object(h.h)("small",{class:"ml-2 text-muted"},a?Object(h.h)(e,null,Object(h.h)("i",{class:"fas fa-user"})," ",Object(h.h)("a",{href:a},n)):Object(h.h)(e,null,Object(h.h)("i",{class:"fas fa-user"})," ",n))),ie&&ie.formattedCounty&&Object(h.h)(e,null,Object(h.h)("small",{class:"ml-2 text-muted"},Object(h.h)("i",{class:"fas fa-map-marker-alt"})," ",ie.formattedCounty))),q&&Object(h.h)("div",{class:"d-flex flex-row flex-nowrap bg-light border-top border-bottom py-2",style:"overflow: auto;"},Object(h.h)("small",{class:"text-muted mr-2"},"Adm:"),$&&$.length>0&&Object(h.h)(e,null,Object(h.h)("small",{class:"text-danger mr-2"},Object(h.h)("i",{class:"fas fa-flag"})," ",$.length)),ie&&ie.formatted_address&&Object(h.h)(e,null,Object(h.h)("small",{class:"text-muted"},Object(h.h)("i",{class:"fas fa-map-marker-alt"})," ",ie.formatted_address)),W.deviceInfo&&Object(h.h)(e,null,Object(h.h)("span",{class:"badge badge-secondary ml-2 float-right font-weight-light"},["platform","manufacturer","model"].map((function(t){return Object(h.h)(e,null,Object(h.h)("span",{class:"ml-2 text-white"},W.deviceInfo[t]))})))),ce&&Object(h.h)(e,null,Object(h.h)("small",{class:"ml-2 text-muted"},"V: ",ce.count),Object(h.h)("small",{class:"ml-2 text-muted"},"R: ",ce.ranking," ",u.a.isNumber(ce.rankingTrend)&&Object(h.h)(e,null,Object(h.h)("i",{class:I.a.getClassForTrend(ce.rankingTrend)}))),Object(h.h)("small",{class:"ml-2 text-muted"},"D: ",u.a.format(ce.durationAvg/1e3,1),"s ",u.a.isNumber(ce.durationAvgTrend)&&Object(h.h)(e,null,Object(h.h)("i",{class:I.a.getClassForTrend(ce.durationAvgTrend)}))),A.statisticsCurrent&&A.statisticsCurrent.totalInteractions>0&&Object(h.h)("small",{class:"ml-2 text-muted"},"S: ",u.a.format(A.statisticsCurrent.totalInteractions,0)),A.shadowTags&&A.shadowTags.map((function(t){return Object(h.h)(e,null,Object(h.h)("span",{class:"badge badge-secondary ml-2 float-right font-weight-light"},t))})))))),Object(h.h)("div",{class:"row mt-2"},Object(h.h)("div",{class:"clearfix col-12",style:A.offline?"text-decoration: line-through;":""},p[A.id]&&Object(h.h)(e,null,Object(h.h)(T,{stores:this.props.stores,story:A,key:"story-edit-"+A.id,callback:this.doneEdit})),g[A.id]&&Object(h.h)("div",{class:"clearfix mt-3 mb-3"},Object(h.h)("button",{class:"btn btn-danger float-left",onClick:this.deleteStory,"data-id":A.id},Object(h.h)("i",{class:"fas fa-trash-alt"})," Delete"),Object(h.h)("button",{class:"btn btn-secondary float-right",onClick:this.toggleDeleteStory,"data-id":A.id},Object(h.h)("i",{class:"fas fa-times-circle"})," Cancel")))),(!A.type||1==A.type)&&Object(h.h)(D,{stores:this.props.stores,story:A,key:"story-regular-view-"+A.id,likeStory:this.likeStory,likeRef:j,keys:w}),2==A.type&&Object(h.h)(P,{stores:this.props.stores,story:A,key:"story-ad-view-"+A.id,likeStory:this.likeStory,likeRef:j,keys:w}),3==A.type&&Object(h.h)(R,{stores:this.props.stores,story:A,key:"story-article-view-"+A.id,likeStory:this.likeStory,likeRef:j,keys:w}),Object(h.h)("div",{class:"d-flex justify-content-between mt-2"},Object(h.h)("div",{class:"mr-2"},Object(h.h)(x.a,{stores:this.props.stores,likes:J,comments:X,type:"story",onTeamClick:L,onUserClick:U})),re>0&&Object(h.h)(e,null,Object(h.h)("div",null,Object(h.h)(k.a,{stores:this.props.stores,views:re,object:A,type:"story",isTeamAdmin:G,isAdmin:q,onTeamClick:L,onUserClick:U})))),O[A.id]&&Object(h.h)(e,null,Object(h.h)("small",null,Object(h.h)("div",{class:"alert alert-info",role:"alert"},Object(h.h)("span",{class:"display-4 float-left"},Object(h.h)("i",{class:"fas fa-exclamation-triangle mr-3 mb-3"})),Object(h.h)("p",null,Object(h.h)(m.c,{id:"story.alert-text-1"},"Your team is not visible and it's not possible to request friendship with your team.")),Object(h.h)("p",null,Object(h.h)(m.c,{id:"story.alert-text-2"},"If you want to make your team visible so other can request to follow your team, you can find the setting here:")),Object(h.h)("p",null,Object(h.h)("a",{href:"/teams/edit/"+Y.id},Object(h.h)(m.c,{id:"story.alert-text-3"},"Edit team")))))),Object(h.h)("div",null,Object(h.h)("div",{class:"row"},Object(h.h)("div",{class:"col text-center"},Object(h.h)("button",{type:"button",class:"storyImage btn btn-sm btn-outline-"+(ee?"primary":"secondary")+" btn-lg btn-block "+(ee?"text-primary":"")+" text-overflow","data-id":A.id,onClick:this.likeStory},Object(h.h)("i",{class:(ee?"text-primary fas":"far")+" fa-thumbs-up"})," ",ee?Object(h.h)(m.c,{id:"comments.has-liked"},"Liked"):Object(h.h)(m.c,{id:"comments.like"},"Lik"))),Object(h.h)("div",{class:"col text-center"},Object(h.h)("button",{type:"button",class:"btn btn-sm btn-outline-secondary btn-lg btn-block text-overflow","data-id":A.id,onClick:this.toggleAddComment},Object(h.h)("i",{class:"fas fa-comment"})," ",Object(h.h)(m.c,{id:"comments.comment-add"},"Kommentar"))),K?Object(h.h)(e,null,Object(h.h)("div",{class:"col text-center"},Object(h.h)("button",{class:"btn btn-sm btn-outline-secondary btn-lg btn-block text-overflow",onClick:this.shareLink,"data-url":"https://themusher.app/share/story/"+A.uuidv4,"data-title":"title: "+A.title},Object(h.h)("i",{class:"fas fa-share"})," ",Object(h.h)(m.c,{id:"story.share"},"Del")))):Object(h.h)(e,null,Object(h.h)("div",{class:"col text-center"},Object(h.h)("a",{class:"btn btn-sm btn-outline-secondary btn-lg btn-block text-overflow",href:"https://themusher.app/share/story/"+A.uuidv4,target:"_blank",rel:"noreferrer","data-native":!0},Object(h.h)("i",{class:"fas fa-share"})," ",Object(h.h)(m.c,{id:"story.share"},"Del")))))),Object(h.h)("div",{class:"mt-2"},Object(h.h)(v.a,{stores:this.props.stores,story:A,col:"10",offset:"2",compact:!1,showAllComments:z,initCall:this.closeAllAddComments}),r[A.id]&&Object(h.h)(y.a,{stores:this.props.stores,story:A,inputRef:function(e){return o.inputRef[A.id]=e},inputRefObject:this.inputRef,col:"10",offset:"2",key:"story-comment-"+A.id})))},s}(h.Component))||d;t.a=A}).call(this,s("hosL").Fragment)},Pbyq:function(e,t,s){"use strict";(function(e){var n,a=s("hosL"),o=s("Utv1"),i=s("/eY4"),r=(s("OhSV"),s("Y3FI"),s("fh8t"),s("go65"),s("om2D"),s("AEg1")),c=s("gOLw"),l=(s("ZOvn"),Object(i.a)(n=function(t){function s(e){var s;return(s=t.call(this,e)||this).addRaceUserImage=function(){return new Promise((function(e,t){var n;return n=s.props.race,Promise.resolve(s.props.stores.raceStore.addUserImage({id:(void 0===n?{}:n).id,newUserImage:s.state.newRaceUserImage})).then((function(){try{return s.setState({newRaceUserImage:{}}),e()}catch(e){return t(e)}}),t)}))},s.updateUserImageUpload=function(e){var t=s.state.newRaceUserImage;t[e.field]=e.value,s.setState({newRaceUserImage:t})},s.removeRaceUserImage=function(e){return new Promise((function(t,n){var a;return a=s.props.race,Promise.resolve(s.props.stores.raceStore.removeUserImage({id:(void 0===a?{}:a).id,userImageId:e.target.parentElement.dataset.id||e.target.dataset.id})).then((function(){try{return t()}catch(e){return n(e)}}),n)}))},s.editRaceUserImage=function(e){return new Promise((function(t){var n,a=e.target.dataset,i=a.id,r=a.field,c=e.target.value,l=s.props.race,d=(void 0===l?{}:l).id,h=s.props.stores.raceStore,u=((n={raceUserImageId:i})["raceUserImage"+o.a.ucfirst(r)]=c,n);return clearTimeout(s.updateTimer[d+"-"+i+"-"+r]),s.updateTimer[d+"-"+i+"-"+r]=setTimeout((function(){return new Promise((function(e){return h.editUserImage({id:d,data:u}),e()}))}),1500),s.resizeTextarea(e.target),t()}))},s.resizeTextarea=function(e){var t=e;t.target&&(t=e.target),t.style.height=t.scrollHeight+"px"},s.handleImageErrored=function(e){var t=e.target;t.onerror=null,setTimeout((function(){t.src+="?"+new Date}),1e3)},s.state={newRaceUserImage:{}},s.inputRef={},s.updateTimer={},s}var n,i;return i=t,(n=s).prototype=Object.create(i.prototype),n.prototype.constructor=n,n.__proto__=i,s.prototype.render=function(){var t=this.props.stores,s=t.userStore,n=s.user,o=void 0===n?{}:n,i=this.props.race,l=void 0===i?{}:i,d=["photos"];return l.tag&&l.tag.split(",").forEach((function(e){d.push(e.trim())})),Object(a.h)(e,null,o.id&&Object(a.h)(r.a,{stores:this.props.stores,hashTags:d,postfix:"[🔗 "+l.title+": Images](/app-races/"+l.id+"/userImages)",topic:"race-"+l.id}),Object(a.h)(c.a,{stores:this.props.stores,hashtags:d}))},s}(a.Component))||n);t.a=l}).call(this,s("hosL").Fragment)},QuNB:function(e,t,s){"use strict";(function(e){var n,a=s("hosL"),o=s("Utv1"),i=s("/eY4"),r=(s("OhSV"),s("fh8t"),s("ZOvn")),c=s("gcyc"),l=function(e){return function(t,s){return e.map((function(e){var n=1;return"-"===e[0]&&(n=-1,e=e.substring(1)),t[e]>s[e]?n:t[e]<s[e]?-n:0})).reduce((function(e,t){return e||t}),0)}},d=Object(i.a)(n=function(t){function s(){return t.apply(this,arguments)||this}var n,i;return i=t,(n=s).prototype=Object.create(i.prototype),n.prototype.constructor=n,n.__proto__=i,s.prototype.render=function(){var t=this.props,s=t.bib,n=t.onClickNav,i=void 0===n?function(){}:n,d=this.props.stores,h=d.appState,u=d.raceStore,b=h.checkpointId,p=u.sortedContestants,m=void 0===p?[]:p,f=h.selectedClassIds,g=u.getClassById((void 0===f?[]:f)[0]),O=g.checkpoints,j=void 0===O?[]:O,v=g.results,y=void 0===v?[]:v,w=(g.checkpoints&&g.checkpoints.find((function(e){return e.id===b})),m?m.find((function(e){return e.bib===parseInt(s,10)})):null);w=w||{};var x,k=m?m.findIndex((function(e){return e.bib===parseInt(s,10)})):null,S=(g.results&&g.results.slice().sort(l(["-timestamp","-direction"])).filter((function(e){return parseInt(e.bib,10)===parseInt(s,10)})),u.getTeamById(w.team)),I=S.members?S.members.find((function(e){return e.email===w.email})):{},C=(r.a.getImage({user:I,team:S,priority:"user"}),r.a.displayNameShort(I)||r.a.displayNameShort(w),0),T=0,D=0,P=g.startDate,R=k>-1&&m[k+1]?m[k+1].bib:null,A=k>-1&&m[k-1]?m[k-1].bib:null;return Object(a.h)(e,null,R&&Object(a.h)("button",{class:"btn btn-link text-primary float-right mr-2 py-0",style:"font-size: 2.0em; line-height: 1.0em;",onClick:function(){return i(R)}},Object(a.h)("i",{class:"fas fa-angle-right"})),A&&Object(a.h)("button",{class:"btn btn-link text-primary float-right mr-2 py-0",style:"font-size: 2.0em; line-height: 1.0em;",onClick:function(){return i(A)}},Object(a.h)("i",{class:"fas fa-angle-left"})),Object(a.h)(c.a,{stores:this.props.stores,contestant:w,onTeamClick:this.onTeamClick,onUserClick:this.onUserClick,onDogClick:this.onDogClick,onClickNav:i,rank:k+1},Object(a.h)("div",{class:"table-responsive"},Object(a.h)("table",{class:"table table-striped table-sm"},Object(a.h)("thead",null,Object(a.h)("tr",null,Object(a.h)("th",null,"Checkpoint"),Object(a.h)("th",{class:"text-center"},"In"),Object(a.h)("th",{class:"text-center"},"Out"),Object(a.h)("th",{class:"text-center"},"Moving time"),Object(a.h)("th",{class:"text-center"},"Avg speed"),Object(a.h)("th",{class:"text-center"},"Total moving time"),Object(a.h)("th",{class:"text-center"},"Rest"),Object(a.h)("th",{class:"text-center"},"Total rest"),Object(a.h)("th",{class:"text-center"},"% rest"),Object(a.h)("th",{class:"text-center"},"Distance"),Object(a.h)("th",{class:"text-center"},"Total distance"))),Object(a.h)("tbody",null,j&&j.slice().sort(l(["sortOrder"])).map((function(t){var s=y.slice().find((function(e){return parseInt(e.bib,10)==w.bib&&e.checkpoint===t.id&&"in"===e.direction}))||{},n=y.slice().find((function(e){return parseInt(e.bib,10)==w.bib&&e.checkpoint===t.id&&"out"===e.direction}))||{},i=y.slice().find((function(e){return parseInt(e.bib,10)==w.bib&&e.checkpoint===t.id&&"scratched"===e.direction}))||{},c=0;s&&n&&s.timestamp&&n.timestamp&&(c=r.a.deltaSec(s.timestamp,n.timestamp));var l=0;x&&s&&x.timestamp&&s.timestamp&&(l=r.a.deltaSec(x.timestamp,s.timestamp));var d=!1,h=0;s&&s.timestamp&&(d=!0,h=t.distanceFromPrev/(l/3600)),C+=t.distanceFromPrev?parseInt(t.distanceFromPrev,10):0;var u,b=(D+=c||0)/(T+=l||0)*100;if(d){var p,m;n&&n.timestamp||(p=r.a.addDeltaSec(s.timestamp,m=t.isStartLine?0:t.requiredRestMinutes&&t.timeEqualization&&w.timeEqualization?60*t.requiredRestMinutes+60*w.timeEqualization:t.requiredRestMinutes>0?60*t.requiredRestMinutes:10800),P=p),u=Object(a.h)(e,null,Object(a.h)("tr",null,Object(a.h)("td",null,Object(a.h)("nobr",null,t.name)),Object(a.h)("td",{class:"text-center"},!t.isStartLine&&Object(a.h)("nobr",null,Object(a.h)("span",{class:"text-muted mr-1"},r.a.formatDate(s.timestamp,{locale:"en-GB",day:"numeric",month:"numeric"})),r.a.formatDate(s.timestamp,{locale:"en-GB",hour12:!1,hour:"2-digit",minute:"2-digit"}),Object(a.h)("i",{class:"fas fa-dog text-muted ml-2"})," ",s.dogs)),Object(a.h)("td",{class:"text-center"},n.timestamp&&Object(a.h)("nobr",null,Object(a.h)("span",{class:"text-muted mr-1"},r.a.formatDate(n.timestamp,{locale:"en-GB",day:"numeric",month:"numeric"})),r.a.formatDate(n.timestamp,{locale:"en-GB",hour12:!1,hour:"2-digit",minute:"2-digit"}),Object(a.h)("i",{class:"fas fa-dog text-muted ml-2"})," ",n.dogs),!i.timestamp&&p&&Object(a.h)("nobr",{class:"text-muted font-weight-lighter"},Object(a.h)("span",{class:"text-muted mr-1"},r.a.formatDate(p,{locale:"en-GB",day:"numeric",month:"numeric"})),r.a.formatDate(p,{locale:"en-GB",hour12:!1,hour:"2-digit",minute:"2-digit"})),i.timestamp&&Object(a.h)("nobr",{class:"text-danger"},Object(a.h)("i",{class:"fas fa-times"}),Object(a.h)("span",{class:"text-muted mr-1"},r.a.formatDate(i.timestamp,{locale:"en-GB",day:"numeric",month:"numeric"})),r.a.formatDate(i.timestamp,{locale:"en-GB",hour12:!1,hour:"2-digit",minute:"2-digit"}))),Object(a.h)("td",{class:"text-center"},!t.isStartLine&&Object(a.h)("nobr",null,o.a.secToHms(l,!0))),Object(a.h)("td",{class:"text-center"},!t.isStartLine&&Object(a.h)("nobr",null,o.a.format(h||0,1)," ",Object(a.h)("span",{class:"text-muted font-weight-lighter"},"km/t"))),Object(a.h)("td",{class:"text-center"},!t.isStartLine&&Object(a.h)("nobr",null,o.a.secToHms(T,!0))),Object(a.h)("td",{class:"text-center"},!t.isStartLine&&Object(a.h)(e,null,m>0?Object(a.h)(e,null,Object(a.h)("nobr",{class:"text-muted font-weight-lighter"},o.a.secToHms(m,!0))):Object(a.h)(e,null,Object(a.h)("nobr",null,o.a.secToHms(c,!0))))),Object(a.h)("td",{class:"text-center"},!t.isStartLine&&Object(a.h)(e,null,Object(a.h)("nobr",null,o.a.secToHms(D,!0)))),Object(a.h)("td",{class:"text-center"},Object(a.h)("nobr",null,o.a.format(b||0,0)," ",Object(a.h)("span",{class:"text-muted font-weight-lighter"},"%"))),Object(a.h)("td",{class:"text-center"},Object(a.h)("nobr",null,t.distanceFromPrev||0," ",Object(a.h)("span",{class:"text-muted font-weight-lighter"},"km"))),Object(a.h)("td",{class:"text-center"},Object(a.h)("nobr",null,C," ",Object(a.h)("span",{class:"text-muted font-weight-lighter"},"km"))))),n&&n.timestamp&&(P=n.timestamp)}else{var f,g,O,j=t.estTimeToCpMinutes||0;P&&(f=r.a.addDeltaSec(P,60*j),g=r.a.addDeltaSec(f,O=t.isStartLine?0:t.requiredRestMinutes&&t.timeEqualization&&w.timeEqualization?60*t.requiredRestMinutes+60*w.timeEqualization:t.requiredRestMinutes>0?60*t.requiredRestMinutes:60*(t.estRestMinutes||180)),P=g),h=t.distanceFromPrev/(60*j/3600),u=Object(a.h)("tr",null,Object(a.h)("td",null,t.name),Object(a.h)("td",{class:"text-center text-muted font-weight-lighter"},!t.isStartLine&&f&&Object(a.h)("nobr",null,Object(a.h)("span",{class:"text-muted mr-1"},r.a.formatDate(f,{locale:"en-GB",day:"numeric",month:"numeric"})),r.a.formatDate(f,{locale:"en-GB",hour12:!1,hour:"2-digit",minute:"2-digit"}))),Object(a.h)("td",{class:"text-center text-muted font-weight-lighter"},!t.isFinishLine&&g&&Object(a.h)("nobr",null,Object(a.h)("span",{class:"text-muted mr-1"},r.a.formatDate(g,{locale:"en-GB",day:"numeric",month:"numeric"})),r.a.formatDate(g,{locale:"en-GB",hour12:!1,hour:"2-digit",minute:"2-digit"}))),Object(a.h)("td",{class:"text-center text-muted font-weight-lighter"},!t.isStartLine&&Object(a.h)("nobr",null,o.a.secToHms(60*t.estTimeToCpMinutes,!0))),Object(a.h)("td",{class:"text-center text-muted font-weight-lighter"},!t.isStartLine&&Object(a.h)("nobr",null,o.a.format(h||0,1)," ",Object(a.h)("span",{class:"text-muted font-weight-lighter"},"km/t"))),Object(a.h)("td",{class:"text-center text-muted font-weight-lighter"}," "),Object(a.h)("td",{class:"text-center text-muted font-weight-lighter"},!t.isStartLine&&!t.isFinishLine&&Object(a.h)("nobr",null,o.a.secToHms(O,!0))),Object(a.h)("td",{class:"text-center text-muted font-weight-lighter"}," "),Object(a.h)("td",{class:"text-center text-muted font-weight-lighter"}," "),Object(a.h)("td",{class:"text-center"},Object(a.h)("nobr",null,t.distanceFromPrev||0," ",Object(a.h)("span",{class:"text-muted font-weight-lighter"},"km"))),Object(a.h)("td",{class:"text-center text-muted font-weight-lighter"}," "),Object(a.h)("td",{class:"text-center text-muted font-weight-lighter"}," "))}return x=n,s,u})))))))},s}(a.Component))||n;t.a=d}).call(this,s("hosL").Fragment)},TiXY:function(e,t,s){"use strict";var n,a=s("hosL"),o=s("/eY4"),i=(s("cneo"),s("Utv1"),s("OhSV")),r=s("u2zT"),c=Object(o.a)(n=function(e){function t(t){var s;return(s=e.call(this,t)||this).handleAddImage=function(e){var t=s.props;(0,t.updateField)({id:t.object.id,field:t.field,value:e})},s.state={files:[]},s}var s,n;return n=e,(s=t).prototype=Object.create(n.prototype),s.prototype.constructor=s,s.__proto__=n,t.prototype.render=function(){var e=this.props,t=e.uploadStatus,s=void 0===t?function(){}:t,n=e.before,o=void 0===n?function(){}:n,c=e.after,l=void 0===c?function(){}:c,d=e.autoOpen,h=void 0!==d&&d;return Object(a.h)("div",{class:"row"},Object(a.h)("div",{class:"col-12"},Object(a.h)(i.c,{id:"form.files.upload-file"},"Last opp fil"),":",Object(a.h)("br",null),Object(a.h)(r.a,{handleAddImage:this.handleAddImage,apiUrl:"/api/fileupload",uploadStatus:s,before:o,after:l,autoOpen:h},Object(a.h)("div",{style:{height:30,width:"100%"}}))))},t}(a.Component))||n;t.a=c},ULR1:function(e,t,s){"use strict";(function(e){var n,a=s("hosL"),o=s("Utv1"),i=s("/eY4"),r=(s("OhSV"),s("Y3FI"),s("fh8t"),s("go65"),s("om2D"),s("AEg1")),c=s("gOLw"),l=(s("ZOvn"),Object(i.a)(n=function(t){function s(e){var s;return(s=t.call(this,e)||this).addRaceArticle=function(){return new Promise((function(e,t){var n;return n=s.props.race,Promise.resolve(s.props.stores.raceStore.addArticle({id:(void 0===n?{}:n).id,newArticle:s.state.newRaceArticle})).then((function(){try{return s.setState({newRaceArticle:{}}),e()}catch(e){return t(e)}}),t)}))},s.editRaceArticle=function(e){return new Promise((function(t){var n,a=e.target.dataset,i=a.id,r=a.field,c=e.target.value,l=s.props.race,d=(void 0===l?{}:l).id,h=s.props.stores.raceStore,u=((n={raceArticleId:i})["raceArticle"+o.a.ucfirst(r)]=c,n);return clearTimeout(s.updateTimer[d+"-"+i+"-"+r]),s.updateTimer[d+"-"+i+"-"+r]=setTimeout((function(){return new Promise((function(e){return h.editArticle({id:d,data:u}),e()}))}),1500),s.resizeTextarea(e.target),t()}))},s.removeRaceArticle=function(e){return new Promise((function(t,n){var a;return a=s.props.race,Promise.resolve(s.props.stores.raceStore.removeArticle({id:(void 0===a?{}:a).id,articleId:e.target.parentElement.dataset.id||e.target.dataset.id})).then((function(){try{return t()}catch(e){return n(e)}}),n)}))},s.updateArticleUpload=function(e){var t=s.state.newRaceArticle;t[e.field]=e.value,s.setState({newRaceArticle:t})},s.resizeTextarea=function(e){var t=e;t.target&&(t=e.target),t.style.height=t.scrollHeight+"px"},s.handleImageErrored=function(e){var t=e.target;t.onerror=null,setTimeout((function(){t.src+="?"+new Date}),1e3)},s.state={newRaceArticle:{}},s.inputRef={},s.updateTimer={},s}var n,i;return i=t,(n=s).prototype=Object.create(i.prototype),n.prototype.constructor=n,n.__proto__=i,s.prototype.render=function(){var t=this.props.stores,s=t.userStore,n=s.user,o=void 0===n?{}:n,i=this.props.race,l=void 0===i?{}:i,d=["news"];return l.tag&&l.tag.split(",").forEach((function(e){d.push(e.trim())})),Object(a.h)(e,null,o.id&&Object(a.h)(r.a,{stores:this.props.stores,hashTags:d,postfix:"[🔗 "+l.title+": News](/app-races/"+l.id+"/news)",topic:"race-"+l.id}),Object(a.h)(c.a,{stores:this.props.stores,hashtags:d}))},s}(a.Component))||n);t.a=l}).call(this,s("hosL").Fragment)},UUHd:function(e,t,s){"use strict";var n,a=s("hosL"),o=(s("Utv1"),s("/eY4")),i=s("OhSV"),r=s("go65"),c=s("ZOvn"),l=Object(o.a)(n=function(e){function t(){for(var t,s=arguments.length,n=new Array(s),a=0;a<s;a++)n[a]=arguments[a];return(t=e.call.apply(e,[this].concat(n))||this).commentRace=function(){return new Promise((function(e,s){var n,a,o,i,r,c;return o=void 0===(a=(n=t.props).callback)?function(){}:a,i=t.props.race,r=t.state.comment,Promise.resolve(t.props.stores.raceStore.commentReplyRace({id:i.id,commentId:n.commentId,comment:void 0===r?"":r})).then((function(n){try{return(c=n)&&200===c.status&&(t.setState({comment:""}),o({race:i,response:c})),e()}catch(e){return s(e)}}),s)}))},t}var s,n;return n=e,(s=t).prototype=Object.create(n.prototype),s.prototype.constructor=s,s.__proto__=n,t.prototype.render=function(){var e=this.props.inputRef,t=this.state.comment,s=this.props.stores.userStore.user,n=void 0===s?{}:s,o=c.a.displayNameShort(n),l=(c.a.displayName(n),n.image||(n.images?n.images[0]:void 0));return Object(a.h)("div",{class:"w-100"},Object(a.h)("div",{class:"d-flex mb-0 position-relative w-100"},Object(a.h)("div",{class:"text-center border rounded-circle imageRounded imageRoundedThumb",style:(l?"background-image: url('"+l.s3SmallLink+"'); background-size: cover;":"")+" border-width: 3px !important;"},!l&&Object(a.h)("span",{class:"font-weight-lighter",style:"font-size: 15px;"},o)),Object(a.h)("div",{class:"col pl-3",style:"line-height: 1.2em;"},Object(a.h)("div",{class:"d-flex bd-highlight"},Object(a.h)("div",{class:"p-0 w-100 bd-highlight"},Object(a.h)("label",{class:"sr-only",for:"inlineFormInput"},Object(a.h)(i.c,{id:"comments.comment"},"Kommentar")),Object(a.h)(i.b,null,Object(a.h)("textarea",{class:"form-control rounded-lg",type:"text",placeholder:Object(a.h)(i.c,{id:"comments.write-reply"},"Write a reply..."),onInput:Object(r.a)(this,"comment"),onKeyUp:c.a.resizeTextarea,onFocus:c.a.resizeTextarea,style:"height: 2.3em;",value:t,ref:e}))),Object(a.h)("div",{class:"p-0 pl-2 flex-shrink-1 bd-highlight"},Object(a.h)("button",{type:"button",class:"btn btn-sm btn-primary mb-2",onClick:this.commentRace},Object(a.h)("i",{class:"fas fa-paper-plane"})))))))},t}(a.Component))||n;t.a=l},VKmm:function(e,t,s){"use strict";function n(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function a(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}var o,i=s("hosL"),r=s("Utv1"),c=s("/eY4"),l=s("OhSV"),d=(s("ZOvn"),s("eQ6k"),{requestSent:{}}),h=Object(c.a)(o=function(e){function t(t){var s;return(s=e.call(this,t)||this).requestFollowTeam=function(e){var t=s.props.stores,n=t.teamStore,a=t.userStore.user,o=e.target.closest("button").dataset.team;n.followRequest(parseInt(o,10),a);var i=s.state.requestSent;i[o]=!0,s.setState({requestSent:i})},s.getButton=function(e){var t=s.state.requestSent,n=s.props.stores.userStore.user,a=e.members&&e.members.findIndex((function(e){return e.id===n.id}))>-1,o=e.followers&&e.followers.indexOf(n.id)>-1,r=e.blockedFollowers&&e.blockedFollowers.indexOf(n.id)>-1,c=t[e.id]||e.followRequests&&e.followRequests.findIndex((function(e){return e.id===n.id}))>-1;return a?Object(i.h)("i",{class:"fas fa-home"}):o?Object(i.h)("button",{class:"btn btn-sm btn-block btn-outline-secondary float-right",onClick:s.unFollowTeam,disabled:"true","data-team":e.id},Object(i.h)("i",{class:"fas fa-link mr-2"}),Object(i.h)(l.c,{id:"teams.connect.is-following"},"Følger")):r?Object(i.h)("button",{class:"btn btn-sm btn-block btn-outline-secondary float-right",disabled:"true"},Object(i.h)("i",{class:"fas fa-hand-paper mr-2"}),Object(i.h)(l.c,{id:"teams.connect.is-blocked"},"Blokkert")):c?Object(i.h)("button",{class:"btn btn-sm btn-block btn-outline-secondary float-right",disabled:"true"},Object(i.h)("i",{class:"fas fa-hourglass-half mr-2"}),Object(i.h)(l.c,{id:"teams.connect.has-requested"},"Venter på godkjenning")):Object(i.h)("button",{class:"btn btn-sm btn-block btn-outline-success float-right",onClick:s.requestFollowTeam,"data-team":e.id},Object(i.h)("i",{class:"far fa-hand-point-right mr-2"}),Object(i.h)(l.c,{id:"teams.connect.follow"},"Følg"))},s.state=function(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?n(Object(s),!0).forEach((function(t){a(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):n(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}({},d),s}var s,o;o=e,(s=t).prototype=Object.create(o.prototype),s.prototype.constructor=s,s.__proto__=o;var c=t.prototype;return c.loadTeams=function(){return new Promise(function(e,t){return this.setState({isLoading:!0}),Promise.resolve(this.props.stores.teamStore.loadPublic({query:{notfollowing:1,array:1},limit:15})).then(function(){try{return this.setState({isLoading:!1}),e()}catch(e){return t(e)}}.bind(this),t)}.bind(this))},c.componentDidMount=function(){this.loadTeams()},c.render=function(){var e=this,t=this.props.stores,s=t.teamStore.publicTeamsToFollow,n=t.appState.darkmode;return s&&0!==s.length?Object(i.h)("div",{class:"row pb-1 bg-light"},Object(i.h)("div",{class:"col-12 col-sm-8 col-lg-6 offset-sm-2 offset-lg-3 mb-0 position-relative rounded rounded-lg py-3 bg-"+(n?"black":"white")+" shadow-sm"},Object(i.h)("div",{class:"container-fluid"},Object(i.h)("div",{class:"row"},Object(i.h)("div",{class:"col-12"},Object(i.h)("h5",null,Object(i.h)(l.c,{id:"teams.connect.teams-to-follow"},"Team du kan følge"),":"))),Object(i.h)("div",{class:"row"},Object(i.h)("div",{class:"d-flex flex-row flex-nowrap",style:"overflow: auto;"},r.a.isArray(s)&&s.map((function(t){var s=t.image&&t.image.s3SmallLink?t.image:null;return Object(i.h)("div",{class:"mr-2",style:"width: 110px;"},Object(i.h)("div",{class:"text-center border rounded-lg",style:s?'background-image: url("'+s.s3SmallLink+'"); background-size: cover; width: 110px; height: 100px;':"width: 110px; height: 100px;"},!s&&Object(i.h)("i",{class:"fas fa-users text-muted mt-3",style:"font-size: 40px;"})),Object(i.h)("small",null,Object(i.h)("div",{class:"text-overflow"},Object(i.h)("strong",null,t.name)),Object(i.h)("div",{class:"text-overflow"},t.place?t.place+", ":""," ",t.country,"  "),Object(i.h)("div",{class:"text-overflow"},Object(i.h)("small",{class:"text-muted"},t&&t.dogs&&Object(i.h)("span",{class:""},Object(i.h)("i",{class:"fas fa-dog"})," ",t.dogs.length),t&&t.followers&&Object(i.h)("span",{class:"ml-2"},Object(i.h)("i",{class:"fas fa-user"})," ",t.followers.length)))),Object(i.h)("div",null,e.getButton(t)))}))))))):""},t}(i.Component))||o;t.a=h},Ysxg:function(e,t,s){"use strict";(function(e){function n(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function a(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}var o,i=s("hosL"),r=s("Utv1"),c=s("/eY4"),l=s("cneo"),d=s("OhSV"),h=s("fh8t"),u=s.n(h),b=s("go65"),p=s("UUHd"),m=s("ZOvn"),f={showAddComment:{},showAllComments:!1,showAllReplies:{},viewImageIdx:{},likeComment:{},likeReply:{},showOriginal:{}},g=Object(c.a)(o=function(t){function s(e){var s;return(s=t.call(this,e)||this).addLikeComment=function(e){return new Promise((function(t,n){var a,o,i,r,c,l,d;return o=void 0===(a=s.props.callback)?function(){}:a,i=e.target.closest(".commentContainer").dataset.id,r=s.props.race,c=s.props.stores.raceStore,(l=s.state.likeComment)[i]=!0,s.setState({likeComment:l}),setTimeout((function(){var e=s.state.likeComment;delete e[i],s.setState({likeComment:e})}),1200),Promise.resolve(c.likeRaceComment({id:r.id,commentId:i})).then((function(e){try{return(d=e)&&200===d.status&&o({type:"likeComment",race:r,commentId:i,response:d}),t(!0)}catch(e){return n(e)}}),n)}))},s.likeReply=function(e){return new Promise((function(t,n){var a,o,i,r,c,l,d,h;return o=void 0===(a=s.props.callback)?function(){}:a,i=e.target.closest(".replyContainer").dataset.id,r=e.target.closest(".replyContainer").dataset.comment,c=s.props.race,l=s.props.stores.raceStore,(d=s.state.likeReply)[i]=!0,s.setState({likeReply:d}),setTimeout((function(){var e=s.state.likeReply;delete e[i],s.setState({likeReply:e})}),1200),Promise.resolve(l.likeRaceCommentReply({id:c.id,replyId:i,commentId:r})).then((function(e){try{return(h=e)&&200===h.status&&o({type:"likeReply",race:c,commentId:r,replyId:i,response:h}),t()}catch(e){return n(e)}}),n)}))},s.replyComment=function(e){return new Promise((function(t){var n=e.target.parentElement.dataset.id||e.target.dataset.id,a=s.state.showAddComment;return a[n]=!a[n],s.setState({showAddComment:a},(function(){s.inputRef[n]&&s.inputRef[n].focus()})),t()}))},s.toggleComments=function(){s.setState({showAllComments:!s.state.showAllComments})},s.toggleReplies=function(e){var t=e.target.parentElement.dataset.id||e.target.dataset.id,n=s.state.showAllReplies;n[t]=!n[t],s.setState({showAllReplies:n})},s.toggleMenu=function(e){var t=e.target.closest("i").dataset.id,n=s.state.showMenu,a=void 0===n?{}:n;a[t]=!a[t],s.setState({showDeleteComment:{},showEdit:{},showMenu:a})},s.toggleEdit=function(e){var t=e.target.closest("button").dataset,n=t.id,a=t.comment,o=s.state.showEdit,i=void 0===o?{}:o;i[n]=!i[n],s.setState({showDeleteComment:{},showEdit:i,showMenu:{},commentEditText:a})},s.toggleDeleteComment=function(e){var t=e.target.closest("button").dataset.id,n=s.state.showDeleteComment,a=void 0===n?{}:n;a[t]=!a[t],s.setState({showDeleteComment:a,showEdit:{},showMenu:{}})},s.deleteComment=function(e){return new Promise((function(t,n){var a;return a=e.target.closest("button").dataset.id,Promise.resolve(s.props.stores.raceStore.deleteCommentRace({id:s.props.race.id,commentId:a})).then((function(){try{return s.setState({commentEditText:"",showDeleteComment:{},showEdit:{},showMenu:{}}),t()}catch(e){return n(e)}}),n)}))},s.deleteCommentReply=function(e){return new Promise((function(t,n){var a;return a=e.target.closest("button").dataset,Promise.resolve(s.props.stores.raceStore.deleteCommentReplyRace({id:s.props.race.id,commentId:a.commentid,replyId:a.id})).then((function(){try{return s.setState({commentEditText:"",showDeleteComment:{},showEdit:{},showMenu:{}}),t()}catch(e){return n(e)}}),n)}))},s.saveComment=function(e){return new Promise((function(t,n){var a;return a=e.target.closest("button").dataset.id,Promise.resolve(s.props.stores.raceStore.editCommentRace({id:s.props.race.id,commentId:a,comment:s.state.commentEditText})).then((function(){try{return s.setState({commentEditText:"",showDeleteComment:{},showEdit:{},showMenu:{}}),t()}catch(e){return n(e)}}),n)}))},s.saveCommentReply=function(e){return new Promise((function(t,n){var a;return a=e.target.closest("button").dataset,Promise.resolve(s.props.stores.raceStore.editCommentReplyRace({id:s.props.race.id,commentId:a.commentid,replyId:a.id,comment:s.state.commentEditText})).then((function(){try{return s.setState({commentEditText:"",showDeleteComment:{},showEdit:{},showMenu:{}}),t()}catch(e){return n(e)}}),n)}))},s.viewImage=function(e){var t=e.target.closest("img").dataset,n=s.state.viewImageIdx;n[t.id]=t.idx,s.setState({viewImageIdx:n})},s.translate=function(e){return new Promise((function(t,n){function a(){return s.setState({showOriginal:p,translatedText:f}),t()}var o,i,r,c,l,d,h,u,b,p,m,f,g;return e.preventDefault(),e.stopPropagation(),o=e.target.closest("button").dataset,c=s.props.race,d=(l=s.props.stores).raceStore,h=l.userStore.user,f=void 0===(m=(u=s.state).translatedText)?{}:m,(p=void 0===(b=u.showOriginal)?{}:b)[g=(r=o.commentid)+((i=o.replyid)?"-"+i:"")]=0,i?Promise.resolve(d.translateCommentReply({commentid:r,replyid:i,race:c,user:h})).then(function(e){try{return f[g]=e,a.call(this)}catch(e){return n(e)}}.bind(this),n):Promise.resolve(d.translateComment({commentid:r,race:c,user:h})).then(function(e){try{return f[g]=e,a.call(this)}catch(e){return n(e)}}.bind(this),n)}))},s.showOriginal=function(e){var t=e.target.closest("button").dataset,n=t.replyid,a=t.commentid;e.preventDefault(),e.stopPropagation();var o=s.state.showOriginal,i=void 0===o?{}:o;i[a+(n?"-"+n:"")]=1,s.setState({showOriginal:i})},s.state=function(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?n(Object(s),!0).forEach((function(t){a(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):n(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}({},f),s.inputRef={},s}var o,c;return c=t,(o=s).prototype=Object.create(c.prototype),o.prototype.constructor=o,o.__proto__=c,s.prototype.render=function(){var t=this,s=this.state,n=s.showAddComment,a=s.showAllComments,o=s.showAllReplies,c=s.viewImageIdx,h=s.showMenu,f=void 0===h?{}:h,g=s.showEdit,O=void 0===g?{}:g,j=s.showDeleteComment,v=void 0===j?{}:j,y=s.commentEditText,w=s.likeComment,x=s.showOriginal,k=void 0===x?{}:x,S=s.translatedText,I=void 0===S?{}:S,C=this.props,T=C.race,D=C.callback,P=void 0===D?function(){}:D,R=C.initCall,A=void 0===R?function(){}:R,z=C.col,F=void 0===z?12:z,L=C.offset,E=void 0===L?0:L,U=C.compact,M=this.props.stores,_=M.raceStore,N=M.userStore.user,B=N.language,H=void 0===B?"en":B,V=[],q=0,K=0;if(T.comments){if(q=T.comments.length,a)V=T.comments;else V=T.comments.slice(Math.max(q-(void 0!==U&&U?0:2),0));K=V.length}return Object(i.h)("div",{class:"col-"+F+" offset-"+E+" col-sm-8 col-lg-6 offset-sm-2 offset-lg-3"},T&&r.a.isArray(V)&&V.reverse().map((function(s){var a=s.user,h=void 0===a?{}:a,g=_.findPublicTeamByMembers(h.id),j=m.a.displayNameShort(h),x=m.a.displayName(h),S=h.image||(h.images?h.images[0]:void 0),C=s.likes&&s.likes.findIndex((function(e){return e.user===N.id}))>-1,D=[],R=0,z=0;s.comments&&(R=s.comments.length,z=(D=o[s.id]?s.comments:s.comments.slice(0,void 0)).length);var F=[];if(s.images){var L=Object(l.i)(s.images);F.push.apply(F,L)}var E=c[s.id]?c[s.id]:0,U=F&&F[E]?F[E]:null,M=_.getCommentTranslations({race:T,commentid:s.id,targetLang:H})||I[s.id],B=M||s.comment;return k[s.id]&&(B=s.comment),Object(i.h)("div",{class:"row"},Object(i.h)("div",{class:"col-11 offset-1 d-flex mb-2 position-relative"},Object(i.h)("div",{class:"text-center border rounded-circle imageRounded imageRoundedSmall",style:(S?'background-image: url("'+S.s3SmallLink+'"); background-size: cover;':"")+" border-width: 3px !important;"},!h.image&&Object(i.h)("span",{class:"font-weight-lighter",style:"font-size: 15px;"},j)),Object(i.h)("div",{class:"flex-grow-1 pl-3 pt-0",style:"line-height: 1.2em;"},Object(i.h)("div",{class:"bg-light p-2 rounded rounded-lg position-relative"},N.id===h.id&&Object(i.h)(e,null,Object(i.h)("span",{class:"float-right font-weight-lighter text-muted"},Object(i.h)("i",{class:"fas fa-ellipsis-h",onClick:t.toggleMenu,"data-id":s.id}))),f[s.id]&&Object(i.h)(e,null,Object(i.h)("div",{class:"position-absolute bg-white p-2 border rounded rounded-lg shadow-sm",style:"top: 30px; right: 10px; width: 60%; z-index: 999999;"},Object(i.h)("button",{class:"btn btn-link btn-block text-left",onClick:t.toggleEdit,"data-id":s.id,"data-comment":s.comment},Object(i.h)("i",{class:"fas fa-edit"})," Edit"),Object(i.h)("hr",null),Object(i.h)("button",{class:"btn btn-link btn-block text-left",onClick:t.toggleDeleteComment,"data-id":s.id},Object(i.h)("i",{class:"fas fa-trash-alt"})," Delete"))),Object(i.h)("div",null,Object(i.h)("span",{style:"font-size: 0.95em;"},Object(i.h)("h5",{class:"font-weight-bold mb-2",style:"font-size: 1.0em;"},h.uuidv4&&h.uuidv4!==N.uuidv4?Object(i.h)(e,null,Object(i.h)("a",{href:"/inbox/"+h.uuidv4},x)):Object(i.h)(e,null,x),g&&g.length>0&&Object(i.h)(e,null,Object(i.h)("span",{class:"font-weight-lighter text-muted ml-1"},g.filter((function(e){return 1===e.public})).slice(0,1).map((function(t){return Object(i.h)(e,null,"- ",Object(i.h)("a",{href:"/teams/public/"+t.uuidv4},t.name))}))))),O[s.id]?Object(i.h)(e,null,Object(i.h)("div",{class:"d-flex bd-highlight"},Object(i.h)("div",{class:"p-0 w-100 bd-highlight"},Object(i.h)("label",{class:"sr-only",for:"inlineFormInput"},Object(i.h)(d.c,{id:"comments.comment"},"Kommentar")),Object(i.h)("div",{class:"border rounded rounded-lg position-relative"},Object(i.h)(d.b,null,Object(i.h)("textarea",{class:"form-control-plaintext px-2",type:"text",placeholder:Object(i.h)(d.c,{id:"comments.write-comment"},"Skriv en kommentar..."),onInput:Object(b.a)(t,"commentEditText"),onKeyUp:m.a.resizeTextarea,onFocus:m.a.resizeTextarea,style:"height: 2.3em;",value:y})))),Object(i.h)("div",{class:"p-0 pl-2 flex-shrink-1 bd-highlight"},Object(i.h)("button",{type:"button",class:"btn btn-primary mb-2",onClick:t.saveComment,"data-id":s.id},Object(i.h)("i",{class:"fas fa-paper-plane"}))))):Object(i.h)(e,null,Object(i.h)(u.a,{markdown:m.a.replaceImages(B,s.images,H),markdownOpts:m.a.getMarkdownOptions()})),v[s.id]&&Object(i.h)("div",{class:"clearfix mt-3 mb-3"},Object(i.h)("button",{class:"btn btn-danger float-left",onClick:t.deleteComment,"data-id":s.id},Object(i.h)("i",{class:"fas fa-trash-alt"})," Delete"),Object(i.h)("button",{class:"btn btn-secondary float-right",onClick:t.toggleDeleteComment,"data-id":s.id},Object(i.h)("i",{class:"fas fa-times-circle"})," Cancel")))),Object(i.h)("div",null,Object(i.h)("div",{class:"container-fluid px-3 mt-1"},U&&Object(i.h)("div",{class:"clearfix row position-relative"},Object(i.h)("div",{class:"commentContainer col-12 px-0 overflow-hidden",style:"max-height: 60vh;",onDblclick:t.addLikeComment,"data-id":s.id},Object(i.h)("img",{loading:"lazy",class:"img-fluid",style:"min-width: 100px;",src:U.s3LargeLink})),w[s.id]&&Object(i.h)("span",{class:"likeHeart position-absolute text-white display-1",style:"top: calc(50% - 50px); left: calc(50% - 50px); width: 100px; height: 100px;"},Object(i.h)("i",{class:"fas fa-heart likeStory"}))),F&&F.length>1&&Object(i.h)("div",{class:"clearfix d-flex flex-wrap row"},r.a.isArray(F)&&F.map((function(n,a){return Object(i.h)(e,null,Object(i.h)("div",{class:"col px-0 overflow-hidden",style:"max-height: 100px; min-width: 100px;"},Object(i.h)("img",{loading:"lazy",class:"img-fluid border",style:"min-width: 100px;",src:n.s3SmallLink,onClick:t.viewImage,"data-id":s.id,"data-idx":a})))})))))),Object(i.h)("small",null,Object(i.h)("button",{class:"commentContainer btn btn-sm btn-link py-0 "+(C?"text-primary":""),onClick:t.addLikeComment,"data-id":s.id,disabled:C},C?Object(i.h)(d.c,{id:"comments.has-liked"},"Liked"):Object(i.h)(d.c,{id:"comments.like"},"Lik")),"-",Object(i.h)("button",{class:"btn btn-sm btn-link py-0",onClick:t.replyComment,"data-id":s.id},Object(i.h)(d.c,{id:"comments.comment-add"},"Kommentar")),s.language!==H&&Object(i.h)(e,null,"-",!k[s.id]&&M?Object(i.h)(e,null,Object(i.h)("button",{type:"button",class:"btn btn-sm btn-link","data-commentid":s.id,onClick:t.showOriginal},Object(i.h)("i",{class:"fas fa-cog"}),"  ",Object(i.h)(d.c,{id:"home.translate-show-original"},"Show original"))):Object(i.h)(e,null,Object(i.h)("button",{type:"button",class:"btn btn-sm btn-link",onClick:t.translate,"data-commentid":s.id},Object(i.h)("i",{class:"fas fa-cog"})," ",Object(i.h)(d.c,{id:"home.translate-to"},"See translation")))),"-",Object(i.h)("button",{class:"btn btn-sm btn-link py-0 disabled"},r.a.formatDistance(s.createdDate,new Date,{locale:"no-NB"}),s.updatedDate&&Object(i.h)(e,null,Object(i.h)("span",{class:"font-weight-light ml-2"},"(Edited ",r.a.formatDistance(s.updatedDate,new Date,{locale:"no-NB"}),")"))))),s.likes&&s.likes.length>0&&Object(i.h)("small",{class:"position-absolute bg-light shadow-sm rounded-lg py-0 px-1",style:"bottom: 20px; right: 15px;"},Object(i.h)("i",{class:"fas fa-thumbs-up text-primary"})," ",s.likes.length)),Object(i.h)("div",{class:"col-10 offset-2 mb-2"},s&&r.a.isArray(D)&&D.map((function(n){var a=n.user,o=void 0===a?{}:a,c=_.findPublicTeamByMembers(o.id),l=m.a.displayNameShort(o),h=m.a.displayName(o),p=o.image||(o.images?o.images[0]:void 0),g=n.likes&&n.likes.findIndex((function(e){return e.user===N.id}))>-1,j=_.getCommentReplyTranslations({race:T,commentid:s.id,replyid:n.id,targetLang:H})||I[s.id+"-"+n.id],w=j||n.comment;return k[s.id+"-"+n.id]&&(w=n.comment),Object(i.h)("div",{class:"row"},Object(i.h)("div",{class:"col-12 d-flex mb-2 position-relative"},Object(i.h)("div",{class:"text-center border rounded-circle imageRounded imageRoundedSmall",style:(p?'background-image: url("'+p.s3SmallLink+'"); background-size: cover;':"")+" border-width: 3px !important;"},!o.image&&Object(i.h)("span",{class:"font-weight-lighter",style:"font-size: 15px;"},l)),Object(i.h)("div",{class:"flex-grow-1 pl-3 pt-0",style:"line-height: 1.2em;"},Object(i.h)("div",{class:"bg-light p-2 rounded-lg position-relative"},N.id===o.id&&Object(i.h)(e,null,Object(i.h)("span",{class:"float-right font-weight-lighter text-muted"},Object(i.h)("i",{class:"fas fa-ellipsis-h",onClick:t.toggleMenu,"data-id":n.id}))),f[n.id]&&Object(i.h)(e,null,Object(i.h)("div",{class:"position-absolute bg-white p-2 border rounded rounded-lg shadow-sm",style:"top: 30px; right: 10px; width: 60%; z-index: 999999;"},Object(i.h)("button",{class:"btn btn-link btn-block text-left",onClick:t.toggleEdit,"data-id":n.id,"data-comment":n.comment},Object(i.h)("i",{class:"fas fa-edit"})," Edit"),Object(i.h)("hr",null),Object(i.h)("button",{class:"btn btn-link btn-block text-left",onClick:t.toggleDeleteComment,"data-id":n.id},Object(i.h)("i",{class:"fas fa-trash-alt"})," Delete"))),Object(i.h)("span",{style:"font-size: 0.95em;"},Object(i.h)("h5",{class:"font-weight-bold mb-2",style:"font-size: 1.0em;"},h,c&&c.length>0&&Object(i.h)(e,null,Object(i.h)("span",{class:"font-weight-lighter text-muted ml-2"},c.filter((function(e){return 1===e.public})).slice(0,1).map((function(t){return Object(i.h)(e,null,"- ",Object(i.h)("a",{href:"/teams/public/"+t.uuidv4,class:"mr-2"}," ",t.name))}))))),O[n.id]?Object(i.h)(e,null,Object(i.h)("div",{class:"d-flex bd-highlight"},Object(i.h)("div",{class:"p-0 w-100 bd-highlight"},Object(i.h)("label",{class:"sr-only",for:"inlineFormInput"},Object(i.h)(d.c,{id:"comments.comment"},"Kommentar")),Object(i.h)("div",{class:"border rounded rounded-lg position-relative"},Object(i.h)(d.b,null,Object(i.h)("textarea",{class:"form-control-plaintext px-2",type:"text",placeholder:Object(i.h)(d.c,{id:"comments.write-comment"},"Skriv en kommentar..."),onInput:Object(b.a)(t,"commentEditText"),onKeyUp:m.a.resizeTextarea,onFocus:m.a.resizeTextarea,style:"height: 2.3em;",value:y})))),Object(i.h)("div",{class:"p-0 pl-2 flex-shrink-1 bd-highlight"},Object(i.h)("button",{type:"button",class:"btn btn-primary mb-2",onClick:t.saveCommentReply,"data-commentid":s.id,"data-id":n.id},Object(i.h)("i",{class:"fas fa-paper-plane"}))))):Object(i.h)(e,null,Object(i.h)(u.a,{markdown:m.a.replaceImages(w,n.images,H),markdownOpts:m.a.getMarkdownOptions()})),v[n.id]&&Object(i.h)("div",{class:"clearfix mt-3 mb-3"},Object(i.h)("button",{class:"btn btn-danger float-left",onClick:t.deleteCommentReply,"data-id":n.id,"data-commentid":s.id},Object(i.h)("i",{class:"fas fa-trash-alt"})," Delete"),Object(i.h)("button",{class:"btn btn-secondary float-right",onClick:t.toggleDeleteComment,"data-id":n.id},Object(i.h)("i",{class:"fas fa-times-circle"})," Cancel")))),Object(i.h)("small",null,Object(i.h)("button",{class:"replyContainer btn btn-sm btn-link py-0 "+(g?"text-primary":""),onClick:t.likeReply,"data-comment":s.id,"data-id":n.id,disabled:g},g?Object(i.h)(d.c,{id:"comments.has-liked"},"Liked"):Object(i.h)(d.c,{id:"comments.like"},"Lik")),"-",Object(i.h)("button",{class:"btn btn-sm btn-link py-0",onClick:t.replyComment,"data-id":s.id},Object(i.h)(d.c,{id:"comments.comment-add"},"Kommentar")),n.language!==H&&Object(i.h)(e,null,"-",!k[s.id+"-"+n.id]&&j?Object(i.h)(e,null,Object(i.h)("button",{type:"button",class:"btn btn-sm btn-link","data-commentid":s.id,"data-replyid":n.id,onClick:t.showOriginal},Object(i.h)("i",{class:"fas fa-cog"}),"  ",Object(i.h)(d.c,{id:"home.translate-show-original"},"Show original"))):Object(i.h)(e,null,Object(i.h)("button",{type:"button",class:"btn btn-sm btn-link",onClick:t.translate,"data-commentid":s.id,"data-replyid":n.id},Object(i.h)("i",{class:"fas fa-cog"})," ",Object(i.h)(d.c,{id:"home.translate-to"},"See translation")))),"-",Object(i.h)("button",{class:"btn btn-sm btn-link py-0 disabled"},r.a.formatDistance(n.createdDate,new Date,{locale:"no-NB"}),n.updatedDate&&Object(i.h)(e,null,Object(i.h)("span",{class:"font-weight-light ml-2"},"(Edited ",r.a.formatDistance(n.updatedDate,new Date,{locale:"no-NB"}),")"))))),n.likes&&Object(i.h)("small",{class:"position-absolute bg-light shadow-sm rounded-lg py-0 px-1",style:"bottom: 20px; right: 15px;"},Object(i.h)("i",{class:"fas fa-thumbs-up text-primary"})," ",n.likes.length)))})),R-z>0&&Object(i.h)("div",null,Object(i.h)("button",{class:"btn btn-sm btn-link py-0",onClick:t.toggleReplies,"data-id":s.id},Object(i.h)(d.c,{id:"comments.show-more",fields:{more:R-z}},"Vis ",R-z," flere kommentarer...")))),n[s.id]&&Object(i.h)("div",{class:"col-11 offset-1 d-flex mb-2 position-relative"},Object(i.h)(p.a,{stores:t.props.stores,race:T,initCall:A,callback:P,commentId:s.id,inputRef:function(e){return t.inputRef[s.id]=e},inputRefObject:t.inputRef,key:"race-commentreply-"+s.id})))})),q-K>0&&Object(i.h)("div",null,Object(i.h)("button",{class:"btn btn-sm btn-link py-0",onClick:this.toggleComments},Object(i.h)(d.c,{id:"comments.show-more",fields:{more:q-K}},"Vis ",q-K," flere kommentarer..."))),a&&Object(i.h)("div",null,Object(i.h)("button",{class:"btn btn-sm btn-link py-0",onClick:this.toggleComments},Object(i.h)(d.c,{id:"comments.hide-all-comments"},"Skjul alle kommentarene."))))},s}(i.Component))||o;t.a=g}).call(this,s("hosL").Fragment)},ZQlJ:function(e,t,s){"use strict";var n,a=s("hosL"),o=(s("Utv1"),s("/eY4")),i=(s("OhSV"),s("NDEG")),r=Object(o.a)(n=function(e){function t(t){var s;return(s=e.call(this,t)||this).scrollImages=function(e){var t=e.target,n=t.scrollLeft/t.clientWidth,a=Math.round(n),o=Math.abs(a-n);(Number.isInteger(n)||o<.1)&&s.setState({imageIdx:a})},s.sortByName=function(e,t){var n=s.props.allDogs,a=void 0===n?[]:n,o=a.find((function(t){return t.id===e})),i=a.find((function(e){return e.id===t}));return o&&i&&o.name>i.name?1:-1},s.state={imageIdx:0},s}var s,n;return n=e,(s=t).prototype=Object.create(n.prototype),s.prototype.constructor=s,s.__proto__=n,t.prototype.render=function(){var e=this,t=this.props,s=t.dogs,n=t.allDogs,o=void 0===n?[]:n,r=t.size,c=void 0===r?"medium":r,l=t.onDogClick,d=void 0===l?function(){}:l;return Object(a.h)("div",{class:"w-100"},Object(a.h)("div",{class:"d-flex flex-row flex-nowrap no-scrollbar",style:"overflow: auto; scroll-snap-type: x mandatory;",onScroll:this.scrollImages},s&&s.sort(this.sortByName).map((function(t){var n=o.find((function(e){return e.id===t}));return n?Object(a.h)("div",{class:"col clearfix position-relative p-0 mx-2"},Object(a.h)("div",{class:"w-100 h-100 text-center rounded-lg imageContainer d-flex justify-content-center align-items-center",style:"\n                                        flex-wrap: wrap;\n                                        overflow-y: hidden;\n                                    ",onTouchstart:function(e){e.stopPropagation()},onTouchend:function(e){e.stopPropagation()},onTouchmove:function(e){e.stopPropagation()}},Object(a.h)(i.a,{stores:e.props.stores,dog:n,dogs:o.filter((function(e){return s.indexOf(e.id)>-1})).sort((function(e,t){return e.name>t.name?1:-1})),className:"mx-auto",showName:!0,showPosition:!1,size:c,onDogClick:d}))):""}))))},t}(a.Component))||n;t.a=r},aGZh:function(e,t,s){"use strict";(function(e){function t(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function n(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}var a,o=s("hosL"),i=s("/eY4"),r={};Object(i.a)(a=function(s){function a(e){var a;return(a=s.call(this,e)||this).state=function(e){for(var s=1;s<arguments.length;s++){var a=null!=arguments[s]?arguments[s]:{};s%2?t(Object(a),!0).forEach((function(t){n(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):t(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},r),a}var i,c;return c=s,(i=a).prototype=Object.create(c.prototype),i.prototype.constructor=i,i.__proto__=c,a.prototype.render=function(){var t=this.props.stores.appState,s=this.props.text,n=t.language,a=void 0===n?"en":n,i=s,r=new RegExp("/<"+a+">(.*?)</"+a+">/");return s.replace(r,"$1")&&(i=s),Object(o.h)(e,null,i)},a}(o.Component))}).call(this,s("hosL").Fragment)},aMCh:function(e,t,s){"use strict";(function(e){var n,a=s("hosL"),o=s("Utv1"),i=s("/eY4"),r=(s("OhSV"),s("fh8t"),s("ZOvn")),c=function(e){return function(t,s){return e.map((function(e){var n=1;return"-"===e[0]&&(n=-1,e=e.substring(1)),t[e]>s[e]?n:t[e]<s[e]?-n:0})).reduce((function(e,t){return e||t}),0)}},l=Object(i.a)(n=function(t){function s(){return t.apply(this,arguments)||this}var n,i;i=t,(n=s).prototype=Object.create(i.prototype),n.prototype.constructor=n,n.__proto__=i;var l=s.prototype;return l.componentWillReceiveProps=function(e){if(this.props.currentClass.id!==e.currentClass.id||this.props.reloadLastEpoch!==e.reloadLastEpoch){var t=this.props.currentClass,s=t.checkpoints,n=t.contestants,a=t.results;this.props.stores.raceStore.sortContestantsByResult({contestants:void 0===n?[]:n,results:void 0===a?[]:a,checkpoints:void 0===s?[]:s})}},l.componentDidMount=function(){var e=this.props.currentClass,t=e.checkpoints,s=e.contestants,n=e.results;this.props.stores.raceStore.sortContestantsByResult({contestants:void 0===s?[]:s,results:void 0===n?[]:n,checkpoints:void 0===t?[]:t})},l.render=function(){var t=this.props,s=t.currentClass,n=t.onClickMusher,i=void 0===n?function(){}:n,l=t.onClickCheckpoint,d=void 0===l?function(){}:l,h=t.selectedCheckpointId,u=t.limit,b=void 0===u?100:u,p=t.tableClass,m=void 0===p?"table-striped table-sm":p,f=t.thClass,g=t.thStyle,O=t.tdClass,j=t.tdStyle,v=t.progressStyle,y=void 0===v?"height: 20px;":v,w=t.progressbarStyle,x=s.checkpoints,k=void 0===x?[]:x,S=s.results,I=void 0===S?[]:S,C=this.props.stores.raceStore.sortedContestants,T=void 0===C?[]:C;return Object(a.h)(e,null,Object(a.h)("div",{class:"table-responsive"},Object(a.h)("table",{class:"table "+m},Object(a.h)("thead",null,Object(a.h)("tr",null,Object(a.h)("th",{class:f,style:g},Object(a.h)("div",{class:"",style:"width: 40px;"},Object(a.h)("i",{class:"fas fa-flag"}))),k&&k.slice().sort(c(["sortOrder"])).map((function(t,s){return Object(a.h)(e,null,s>0&&Object(a.h)("th",{class:f,style:g},Object(a.h)("div",{class:"",style:"width: 40px;"}," ")),Object(a.h)("th",{class:f,style:g},Object(a.h)("div",{class:"checkpoint position-relative "+(h===t.id?"text-primary":""),style:"width: 20px; font-size: 1.1em;",onClick:d,"data-id":t.id},Object(a.h)("i",{class:"fas fa-campground"}),Object(a.h)("div",{class:"rounded-pill-both px-1 text-center position-absolute  font-weight-bold",style:"bottom: 0px; right: -20px; font-size: 0.6em; background-color: #808080;"},t.sortOrder&&"n/a"!==t.sortOrder&&Object(a.h)(e,null,t.sortOrder)))))})),Object(a.h)("th",{class:f,style:g},Object(a.h)("div",{class:"",style:"width: 20px;"},Object(a.h)("i",{class:"fas fa-flag-checkered"}))))),Object(a.h)("tbody",null,T&&T.slice(0,b).map((function(t,s){var n,l,d,h=0;return Object(a.h)(e,null,Object(a.h)("tr",{class:"musher",onClick:i,"data-bib":t.bib},Object(a.h)("td",{class:O,style:j},t.startTime?o.a.isoTime(t.startTime):""),k&&k.slice().sort(c(["sortOrder"])).map((function(s,o){var i=I.slice().sort(c(["timestamp"])).filter((function(e){return parseInt(e.bib,10)==t.bib&&e.checkpoint===s.id})),r=i.find((function(e){return"out"===e.direction})),u=i.find((function(e){return"in"===e.direction})),b=i.find((function(e){return"scratched"===e.direction})),p=I.slice().sort(c(["timestamp"])).filter((function(e){return"in"===e.direction&&e.checkpoint===s.id})).findIndex((function(e){return parseInt(e.bib,10)==t.bib})),m=I.slice().sort(c(["timestamp"])).filter((function(e){return"out"===e.direction&&e.checkpoint===s.id})).findIndex((function(e){return parseInt(e.bib,10)==t.bib}));if(-1===p){if(n){var f=Math.floor(new Date(n.timestamp).getTime()/1e3/60)/d*100;f=f>95?95:f;var g=Object(a.h)(e,null,Object(a.h)("td",{class:"text-center align-middle px-0 pr-1 "+O,style:j},Object(a.h)("div",{class:"progress",style:""+y},Object(a.h)("div",{class:"progress-bar progress-bar-striped progress-bar-animated",role:"progressbar",style:"width: "+f+"%; "+w,"aria-valuenow":f,"aria-valuemin":"0","aria-valuemax":"100"},l+1>0?l+1:"")),t.cpId&&i.length>0&&Object(a.h)(e,null)));return l=m,n=r,d=s.estTimeToCpMinutes,g}return""}return h=o,l=m,n=r,d=s.estTimeToCpMinutes,Object(a.h)(e,null,u&&o>0&&Object(a.h)(e,null,Object(a.h)("td",{class:"text-center align-middle px-0 pr-1 "+O,style:j},Object(a.h)("div",{class:"progress",style:""+y},Object(a.h)("div",{class:"progress-bar",role:"progressbar",style:"width: 100%; "+w,"aria-valuenow":"10","aria-valuemin":"0","aria-valuemax":"100"})),t.cpId&&i.length>0&&Object(a.h)(e,null))),Object(a.h)("td",{class:"text-center align-middle px-0 pr-1 "+O,style:j},Object(a.h)("div",{class:"progress",style:""+y},Object(a.h)("div",{class:"progress-bar "+(b?"bg-danger":"bg-success"),role:"progressbar",style:"width: 100%; "+w,"aria-valuenow":"10","aria-valuemin":"0","aria-valuemax":"100"},p+1>0?p+1:"")),t.cpId&&i.length>0&&Object(a.h)(e,null)))})),Object(a.h)("td",{colspan:2*k.length-h,class:O,style:j},Object(a.h)("div",{class:"d-flex flex-nowrap"},Object(a.h)("div",{class:"text-white font-weight-bolder pl-2 pr-1 py-0 rounded-pill-left rounded-none mr-2",style:"background-color: "+r.a.getRankingColor(s+1)+"; width: 45px;"},t.bib),Object(a.h)("div",null,Object(a.h)("nobr",null,t.flag," ",t.lastname))))))}))))))},s}(a.Component))||n;t.a=l}).call(this,s("hosL").Fragment)},cH0S:function(e,t,s){"use strict";var n,a=s("hosL"),o=(s("Utv1"),s("/eY4")),i=(s("OhSV"),s("ZOvn")),r=(i.a.marginTop(!1),i.a.marginBottom(),Object(o.a)(n=function(e){function t(){return e.apply(this,arguments)||this}var s,n;return n=e,(s=t).prototype=Object.create(n.prototype),s.prototype.constructor=s,s.__proto__=n,t.prototype.render=function(){var e=this.props.stores.appState.darkmode,t=this.props,s=t.children,n=t.onCloseClick,o=void 0===n?function(){}:n,r=t.classNames,c=void 0===r?"fixed-bottom":r,l=t.width,d=void 0===l?"100vw":l;return Object(a.h)("div",{class:c+" "+(e?"bg-darkmode":"bg-lightmode")+" border rounded rounded-lg pt-4 pb-3 px-4",style:"\n                    bottom: 0;\n                    left: 0;\n                    width: "+d+";\n                    max-height: 80vh;\n                    min-height: 10vh;\n                    overflow: auto;\n                    z-index: 999999;\n                    border-radius: 20px 20px 0 0 !important;\n                    border-top-width: 5px !important;\n                    box-shadow: 0px 0 5px rgba(0, 0, 0, 0.8);\n                ",onTouchmove:i.a.captureEvents,onScroll:i.a.captureEvents},Object(a.h)("button",{class:"btn btn-warning btn-sm float-right",onClick:o},Object(a.h)("i",{class:"fas fa-times"})),s)},t}(a.Component))||n);t.a=r},eK6s:function(e){e.exports={gaugeBackground:"gaugeBackground__1UGxt",gauge:"gauge__2ZDxd",success:"success__3UQxg",primary:"primary__3pPV6",secondary:"secondary__-Vrk_",info:"info__3t5zs",warning:"warning__1jHlR",danger:"danger__BLVC9",gaugeText:"gaugeText__1on-w"}},eQ6k:function(e,t,s){"use strict";(function(e){var n,a=s("hosL"),o=(s("Utv1"),s("/eY4")),i=s("OhSV"),r=Object(o.a)(n=function(t){function s(){for(var s,n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(s=t.call.apply(t,[this].concat(o))||this).requestFollowTeam=function(e){var t=s.props.stores,n=t.teamStore,a=t.userStore.user,o=parseInt(e.target.parentElement.dataset.team||e.target.dataset.team,10);n.followRequest(o,a),s.setState({requestSent:!0})},s.unFollowTeam=function(e){var t=s.props.stores,n=t.teamStore,a=parseInt(e.target.parentElement.dataset.team||e.target.dataset.team,10);n.unollowTeam(a),s.setState({unfollowed:!0})},s.getButton=function(t){void 0===t&&(t="");var n=s.state.requestSent,o=s.props.stores.userStore.user,r=s.props,c=r.team,l=r.skipHome,d=r.simple,h=r.classNames,u=c.members&&c.members.indexOf(o.id)>-1,b=c.followers&&c.followers.indexOf(o.id)>-1,p=c.blockedFollowers&&c.blockedFollowers.indexOf(o.id)>-1,m=n||c.followRequests&&c.followRequests.findIndex((function(e){return e.id===o.id}))>-1;return u?l?"":Object(a.h)("i",{class:"fas fa-home"}):b?Object(a.h)(e,null,Object(a.h)("button",{class:h||"btn btn-block btn-outline-secondary float-right",onClick:s.unFollowTeam,disabled:"true","data-team":c.id},Object(a.h)("i",{class:"fas fa-link mr-2"}),Object(a.h)(i.c,{id:"teams.connect.is-following"},"Følger")," ",!d&&Object(a.h)(e,null,t)),Object(a.h)("button",{class:h||"btn btn-sm btn-block btn-danger float-right",onClick:s.unFollowTeam,"data-team":c.id},Object(a.h)("i",{class:"fas fa-unlink mr-2"}),Object(a.h)(i.c,{id:"teams.connect.unfollow"},"Unfollow"))):p?"":m?Object(a.h)("button",{class:h||"btn btn-block btn-outline-secondary float-right",disabled:"true"},Object(a.h)("i",{class:"fas fa-hourglass-half mr-2"}),Object(a.h)(i.c,{id:"teams.connect.has-requested"},"Venter på godkjenning")," ",!d&&Object(a.h)(e,null,t)):c.public?Object(a.h)("button",{class:h||"btn btn-block btn-outline-success float-right",onClick:s.requestFollowTeam,"data-team":c.id},Object(a.h)("i",{class:"fas fa-plus mr-2"}),Object(a.h)(i.c,{id:"teams.connect.follow"},"Følg")," ",!d&&Object(a.h)(e,null,t)):void 0},s}var n,o;return o=t,(n=s).prototype=Object.create(o.prototype),n.prototype.constructor=n,n.__proto__=o,s.prototype.render=function(){var t=this.state.unfollowed,s=this.props,n=s.team,o=s.buttonOnly,i=this.props.stores.userStore,r=i.user.language,c=void 0===r?"en":r,l=i.findTeamAmbition({ambition:n.ambitions,language:c}),d=i.findTeamType({type:n.type,language:c}),h=n.image&&n.image.s3SmallLink?n.image:null;return o?Object(a.h)(e,null,this.getButton(""+n.name)):Object(a.h)("div",{class:"w-100 mb-3"},Object(a.h)("div",{class:"row"},Object(a.h)("div",{class:"col-12 col-sm-8 col-lg-6 offset-sm-2 offset-lg-3 d-flex mb-0 position-relative border-top pt-3",style:t?"text-decoration: line-through; opacity: 0.3;":""},Object(a.h)("a",{href:"/teams/public/"+n.uuidv4},Object(a.h)("div",{class:"text-center border rounded-circle imageRounded",style:h?'background-image: url("'+h.s3SmallLink+'");  background-size: cover;':""},!h&&Object(a.h)("i",{class:"fas fa-users text-muted mt-3",style:"font-size: 40px;"}))),Object(a.h)("div",{class:"flex-grow-1 pl-3",style:"line-height: 1.2em;"},Object(a.h)("h5",{class:"mb-1",style:"line-height: 1.0em;"},n.public?Object(a.h)(e,null,Object(a.h)("a",{href:"/teams/public/"+n.uuidv4},n.name)):Object(a.h)(e,null,n.name)),Object(a.h)("div",null,n.place," ",n.country),Object(a.h)("div",null,d&&Object(a.h)("span",{class:"badge badge-pill badge-secondary"},d),l&&Object(a.h)("span",{class:"badge badge-pill badge-secondary ml-2"},l)),Object(a.h)("small",{class:"text-muted"},n&&n.dogs&&Object(a.h)("span",{class:""},Object(a.h)("i",{class:"fas fa-dog"})," ",n.dogs.length),n&&n.followers&&Object(a.h)("span",{class:"ml-2"},Object(a.h)("i",{class:"fas fa-user"})," ",n.followers.length))),Object(a.h)("div",null,this.getButton()))))},s}(a.Component))||n;t.a=r}).call(this,s("hosL").Fragment)},epqT:function(e,t,s){"use strict";(function(e){function n(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function a(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}var o,i=s("hosL"),r=s("Utv1"),c=s("/eY4"),l=s("OhSV"),d=(s("ZOvn"),{showAddComment:!1}),h=Object(l.d)((function(){return{subject:Object(i.h)(l.c,{id:"ad.subject"},"Annonseforespørsel"),body:Object(i.h)(l.c,{id:"ad.body"},"Hei, Jeg ønsker å vite mer om annonsering i appen The Musher.")}}))(o=Object(c.a)(o=function(t){function s(e){var s;return(s=t.call(this,e)||this).logClick=function(){return new Promise((function(e,t){var n,a,o,i,r;return i=void 0===(o=(a=(n=s.props.stores).adStore).ads)?[]:o,r=n.userStore.user,Promise.resolve(a.logClick({id:i.length>0?i[0].id:null,user:(void 0===r?{}:r).id})).then((function(){try{return e()}catch(e){return t(e)}}),t)}))},s.state=function(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?n(Object(s),!0).forEach((function(t){a(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):n(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}({},d),s.updateTimer={},s.inputRef={},s.apiServer=r.a.getApiServer(),s}var o,c;c=t,(o=s).prototype=Object.create(c.prototype),o.prototype.constructor=o,o.__proto__=c;var h=s.prototype;return h.loadAd=function(e){return new Promise(function(t,s){var n,a,o,i,r,c,l,d,h,u,b;return void 0===e&&(e=this.props),this.setState({isLoading:!0}),a=(n=this.props.stores).adStore,i=this.props.section,c=void 0===(r=n.appState.path)?"":r,h=void 0===(d=(o=n.userStore).user.language)?"en":d,u={},(l=n.workoutStore.currentTeam)&&(u=o.findTeam(l,!0))&&u.id&&(o.findTeamAmbition({ambition:u.ambitions,language:h}),o.findTeamType({type:u.type,language:h}),u.postalcode,u.place,u.country),b=c.replace(/\d+$/,"detail"),Promise.resolve(a.load({query:{page:b,section:i}})).then(function(){try{return a.setTime(),this.setState({isLoading:!1}),t()}catch(e){return s(e)}}.bind(this),s)}.bind(this))},h.componentDidMount=function(){this.loadAd()},h.componentWillReceiveProps=function(e){e.path!==this.props.path&&this.loadAd(e)},h.render=function(){var t=this.props.stores,s=t.adStore,n=this.props,a=n.subject,o=n.body,r=n.section,c=t.appState.path,d=t.userStore.user,h=void 0===d?{}:d,u=s.ads,b=void 0===u?[]:u,p=s.time;if(!h||!h.id||!b||0===b.length)return c.match(/\/(home)/i)?Object(i.h)(e,null,Object(i.h)("div",{class:"w-100"},Object(i.h)("div",{class:"row"},Object(i.h)("div",{class:"col-12 col-sm-8 col-lg-6 offset-sm-2 offset-lg-3 mb-0 position-relative"},Object(i.h)("div",{class:"border rounded-lg p-4 my-3"},Object(i.h)("span",{class:"float-right display-4 text-warning"},Object(i.h)("i",{class:"far fa-smile-wink"})),Object(i.h)("h5",null,Object(i.h)(l.c,{id:"ad.heading"},"Vil du annonsere her?")),Object(i.h)("div",null,Object(i.h)(l.c,{id:"ad.teaser"},"Det er super enkelt :)")),Object(i.h)(l.b,null,Object(i.h)("a",{href:"mailto:post@themusher.no?subject="+a+": "+c+": "+r+"&body="+o,target:"_blank",rel:"noreferrer"},Object(i.h)("i",{class:"fas fa-paper-plane"})," ",Object(i.h)(l.c,{id:"ad.linktext"},"Ta kontakt med The Musher")))))))):Object(i.h)(e,null);var m=b[0];return Object(i.h)(e,null,Object(i.h)("div",{class:"w-100"},Object(i.h)("div",{class:"row"},Object(i.h)("div",{class:"col-12 col-sm-8 col-lg-6 offset-sm-2 offset-lg-3 mb-0 position-relative"},Object(i.h)("div",null,Object(i.h)("small",null,Object(i.h)("small",{class:"text-muted"},Object(i.h)(l.c,{id:"ad.ad"},"Annonse"),":",Object(i.h)("img",{src:this.apiServer+"/api/ads/"+m.id+"/view?user="+h.id+"&time="+p,style:"width: 1; height: 1; opacity: 0.1;"})))),m.target?Object(i.h)(e,null,Object(i.h)("a",{class:"stretched-link",href:""+m.url,target:m.target||"_blank",rel:"noopener noreferrer",onClick:this.logClick,native:!0},m.images&&m.images[0]&&Object(i.h)(e,null,Object(i.h)("img",{src:m.images[0].s3LargeLink,class:"img-fluid rounded-lg"})))):Object(i.h)(e,null,Object(i.h)("a",{class:"stretched-link",href:""+m.url,onClick:this.logClick},m.images&&m.images[0]&&Object(i.h)(e,null,Object(i.h)("img",{src:m.images[0].s3LargeLink,class:"img-fluid rounded-lg"}))))))))},s}(i.Component))||o)||o;t.a=h}).call(this,s("hosL").Fragment)},fVsX:function(e,t,s){"use strict";var n,a=s("hosL"),o=(s("Utv1"),s("/eY4")),i=(s("OhSV"),s("ZOvn")),r=(i.a.marginTop(!1),i.a.marginBottom(),Object(o.a)(n=function(e){function t(){return e.apply(this,arguments)||this}var s,n;return n=e,(s=t).prototype=Object.create(n.prototype),s.prototype.constructor=s,s.__proto__=n,t.prototype.render=function(){var e=this.props,t=e.children,s=e.height,n=void 0===s?"65px":s;return Object(a.h)("nav",{class:"navbar navbar-themed bg-light fixed-top py-0",style:"height: "+n+";"},t)},t}(a.Component))||n);t.a=r},gOLw:function(e,t,s){"use strict";(function(e){function n(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function a(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}var o,i=s("hosL"),r=s("Utv1"),c=s("/eY4"),l=(s("X9Km"),s("NMoA")),d=s("VKmm"),h=s("rWES"),u=s("epqT"),b=s("yHBq"),p=s("q/oJ"),m=s("gWxU"),f=s("ZOvn"),g=f.a.marginTop(!1),O={loading:!1,limit:10,offset:0,idxConfirm:0,idxSuggestion:1,idxAd:5,sessionid:(new Date).getTime()},j=["id","type","user","team","title"],v=Object(c.a)(o=function(t){function s(s){var o;return(o=t.call(this,s)||this).reloadStories=function(){return new Promise((function(e,t){var s,n,a;return s=o.props.stores.appState,a=(n=o.state).limit,n.offset,0,o.setState({offset:0}),Promise.resolve(o.loadStoriesPublicFeed({props:o.props,limit:a,offset:0})).then((function(){try{return s.appContainerScrollTop(),e()}catch(e){return t(e)}}),t)}))},o.setCheckForNewStories=function(e){void 0===e&&(e=o.props),o.checkForNewStoriesTimer=setInterval((function(){return o.checkForNewStories({props:e})}),6e4)},o.clearCheckForNewStories=function(){clearInterval(o.checkForNewStoriesTimer)},o.insertTopRanked=function(){var e=o.props.stores.storyStore,t=e.publicFeed,s=r.a.shuffleArray(e.topRankedStories),n=[].concat(t),a=0,i=new Date;n.forEach((function(e,t){var s=r.a.parseInputDate(e.date);Math.floor((i.getTime()-s.getTime())/1e3)<86400&&(a=t+1)}));var c=n.length;if(c>a+3){for(var l=0;l<3;l+=1){var d=f.a.randomInt(a,c);r.a.isObject(s[l])&&n.splice(d,0,s[l])}e.localUpdateField("publicFeed",n)}},o.insertAds=function(){var e=o.state.idxAd,t=o.props.stores.storyStore,s=[].concat(t.publicFeed);s.splice(e,0,{type:"ad",wrapperClassNames:"row",contentClassNames:"col-12"}),t.localUpdateField("publicFeed",s)},o.insertTeamConfirm=function(){var e=o.state.idxConfirm,t=o.props.stores.storyStore,s=[].concat(t.publicFeed);s.splice(e,0,{type:"teamConfirm",wrapperClassNames:"row",contentClassNames:"col-12"}),t.localUpdateField("publicFeed",s)},o.insertTeamSuggestions=function(){var e=o.state.idxSuggestion,t=o.props.stores.storyStore,s=[].concat(t.publicFeed);s.splice(e,0,{type:"teamSuggestions",wrapperClassNames:"row",contentClassNames:"col-12"}),t.localUpdateField("publicFeed",s)},o.setLoadMore=function(){o.props.stores.storyStore.setLoadMore((function(){var e=o.state,t=e.limit,s=e.offset;o.setState({offset:s+=t}),o.loadStoriesPublicFeed({limit:t,offset:s})}))},o.unsetLoadMore=function(){o.props.stores.storyStore.setLoadMore((function(){}))},o.onTeamClick=function(e,t){return e.preventDefault(),e.stopPropagation(),o.setState({showTeam:t}),!1},o.hideTeam=function(){o.setState({showTeam:null})},o.onUserClick=function(e){return e.preventDefault(),e.stopPropagation(),!1},o.setupIntersection=function(){o.setState({handleIntersection:f.a.intersectionObserverCallback});var e=o.props.stores.storyStore;o.scrollViewTimer=setInterval((function(){return e.postScrollview(f.a.getIntersectionObserverHistory())}),3e4)},o.renderContent=function(t){var s=t.obj,n=o.props.stores.appState.path,a=o.props.hashtag;return"ad"===s.type?Object(i.h)(e,null,Object(i.h)(u.a,{stores:o.props.stores,path:n})):"teamConfirm"===s.type?Object(i.h)(e,null,Object(i.h)(h.a,{stores:o.props.stores})):"teamSuggestions"===s.type?Object(i.h)(e,null,Object(i.h)(d.a,{stores:o.props.stores})):Object(i.h)(e,null,Object(i.h)(l.a,{stores:o.props.stores,story:s,hashtag:a,key:"story-detail-"+s.id,onTeamClick:o.onTeamClick,onUserClick:o.onUserClick}))},o.state=function(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?n(Object(s),!0).forEach((function(t){a(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):n(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}({},O),o.inputRef={},o.ref={},o}var o,c;c=t,(o=s).prototype=Object.create(c.prototype),o.prototype.constructor=o,o.__proto__=c;var v=s.prototype;return v.loadStoriesPublicFeed=function(e){return new Promise(function(t,s){var n,a,o;return o=e.offset,(a=void 0===(n=e.props)?this.props:n).path,Promise.resolve(a.stores.storyStore.loadPublicFeed({hashtag:a.hashtag,hashtags:a.hashtags,teamid:a.teamid,limit:e.limit,offset:o,sort:void 0})).then(function(){try{return o||(this.insertTopRanked(),this.insertTeamConfirm()),t()}catch(e){return s(e)}}.bind(this),s)}.bind(this))},v.checkForNewStories=function(e){return new Promise(function(t,s){var n,a;return e.limit,e.offset,(a=void 0===(n=e.props)?this.props:n).path,Promise.resolve(a.stores.storyStore.checkForNewStories({hashtag:a.hashtag,hashtags:a.hashtags,teamid:a.teamid})).then((function(){try{return t()}catch(e){return s(e)}}),s)}.bind(this))},v.componentWillMount=function(){this.setupIntersection()},v.componentDidMount=function(){this.loadStoriesPublicFeed({limit:this.state.limit,offset:0}),this.setLoadMore(),this.setCheckForNewStories()},v.componentWillUnmount=function(){this.unsetLoadMore(),this.props.stores.storyStore.postScrollview(f.a.getIntersectionObserverHistory()),clearInterval(this.scrollViewTimer),this.clearCheckForNewStories()},v.componentWillReceiveProps=function(e){e.hashtag===this.props.hashtag&&e.path===this.props.path||this.loadStoriesPublicFeed({props:e,limit:this.state.limit,offset:0})},v.render=function(){var t=this.state,s=t.loading,n=t.handleIntersection,a=t.sessionid,o=t.showTeam,r=this.props.stores,c=r.storyStore,l=c.publicFeed,d=c.hasNewStories,h=r.appState.darkmode;return Object(i.h)(e,null,o&&Object(i.h)(p.a,null,Object(i.h)(m.default,{stores:this.props.stores,teamid:o,marginTop:"0px;",marginBottom:"0px;",back:this.hideTeam})),Object(i.h)("div",{class:"w-100"},d&&Object(i.h)(e,null,Object(i.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 d-flex justify-content-center fixed-top",style:"margin-top: "+g+";"},Object(i.h)("button",{class:"btn btn-sm btn-primary rounded-pill",onClick:this.reloadStories},"New stories"))),Object(i.h)(b.a,{data:l,wrapperClassNames:"row pb-1",contentClassNames:"col-12 col-sm-8 col-lg-6 offset-sm-2 offset-lg-3 my-1 position-relative rounded rounded-lg py-3 bg-"+(h?"black":"white")+" shadow-sm",renderContent:this.renderContent,dataFields:j,handleIntersection:n,sessionid:a}),s&&Object(i.h)("div",{class:"d-flex justify-content-center"},Object(i.h)("div",{class:"spinner-border text-primary",role:"status"},Object(i.h)("span",{class:"sr-only"},"Loading...")))))},s}(i.Component))||o;t.a=v}).call(this,s("hosL").Fragment)},gWxU:function(e,t,s){"use strict";s.r(t),function(e){function n(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function a(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}var o,i=s("hosL"),r=s("Utv1"),c=s("/eY4"),l=(s("Y3FI"),s("OhSV")),d=s("fh8t"),h=s.n(d),u=(s("X9Km"),s("ZOvn")),b=s("NDEG"),p=s("s4FZ"),m=(s("jtG4"),s("eQ6k")),f=s("q/oJ"),g=s("Nanz"),O=s("1/9N"),j=u.a.marginTop(!1),v=u.a.marginTopBack(!1),y=u.a.marginBottom(),w={newTeam:{}},x=Object(c.a)(o=function(t){function s(e){var s;return(s=t.call(this,e)||this).onDogClick=function(e,t){return e.preventDefault(),e.stopPropagation(),s.setState({showDog:t}),!1},s.hideDog=function(){s.setState({showDog:null})},s.onUserClick=function(e){return e.preventDefault(),e.stopPropagation(),!1},s.subscribeNotificationTopic=function(e){return new Promise((function(t,n){var a,o;return void 0===(o=(a=s.props.stores.userStore).user.notificationTopics)?{}:o,1,Promise.resolve(a.setNotificationTopic({field:"notificationTopics."+e,value:1})).then((function(){try{return t()}catch(e){return n(e)}}),n)}))},s.back=function(){s.props.stores.history.goBack()},s.state=function(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?n(Object(s),!0).forEach((function(t){a(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):n(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}({},w),s.updateTimer={},s.time=(new Date).getTime(),s.apiServer=r.a.getApiServer(),s}var o,c;c=t,(o=s).prototype=Object.create(c.prototype),o.prototype.constructor=o,o.__proto__=c;var d=s.prototype;return d.loadPublicView=function(e){return new Promise(function(t,s){return this.setState({isLoading:!0}),Promise.resolve(this.props.stores.teamStore.getPublicViews(e.teamid)).then(function(){try{return this.setState({isLoading:!1}),t()}catch(e){return s(e)}}.bind(this),s)}.bind(this))},d.loadAll=function(e){return new Promise(function(t,s){return void 0===e&&(e=this.props),Promise.resolve(this.loadPublicTeam(e)).then(function(){try{return Promise.resolve(this.loadPublicView(e)).then((function(){try{return t()}catch(e){return s(e)}}),s)}catch(e){return s(e)}}.bind(this),s)}.bind(this))},d.loadPublicTeam=function(e){return new Promise(function(t,s){return void 0===e&&(e=this.props),Promise.resolve(e.stores.teamStore.loadPublicDetail({id:e.teamid})).then((function(){try{return t()}catch(e){return s(e)}}),s)}.bind(this))},d.componentDidMount=function(){var e=this.props.back,t=void 0===e?this.back:e,s=this.props.stores.appState;s.setSwipeRight((function(){s.setSwipeRight(),t()})),this.loadAll()},d.componentWillReceiveProps=function(e){e.teamid!==this.props.teamid&&this.loadAll(e)},d.render=function(){var t=this,s=this.state.showDog,n=this.props.stores,a=n.teamStore,o=n.userStore,c=o.user,d=o.isAdmin,w=c.language,x=void 0===w?"en":w,k=a.publicTeam,S=a.publicViewsGraphData,I=!(!k||!k.members)&&k.members.some((function(e){return e.id===c.id})),C=this.props,T=C.marginTop,D=C.marginBottom,P=C.back,R=void 0===P?this.back:P,A=C.hideTeam,z=void 0===A?function(){}:A,F=k.dogs,L=void 0===F?[]:F,E=k.image,U=k.imageHeader,M=k.publicTrophys,_=k.publicMemories,N=k.publicDogs,B=U&&U.s3XXLargeLink?U:{s3XXLargeLink:"./assets/homerun-race-logo.png"},H=E&&E.s3LargeLink?E:null,V=o.findTeamAmbition({ambition:k.ambitions,language:x}),q=o.findTeamType({type:k.type,language:x}),K=k.members&&k.members.findIndex((function(e){return e.id===c.id}))>-1,Y=k&&k.followers&&k.followers.indexOf(c.id)>-1,W=k.followRequests&&k.followRequests.findIndex((function(e){return e.id===c.id}))>-1,Z=c.notificationTopics,G=void 0===Z?{}:Z,J="team-"+k.id;return Object(i.h)(e,null,s&&Object(i.h)(f.a,null,Object(i.h)(g.default,{stores:this.props.stores,dogid:s,marginTop:"0px;",marginBottom:"0px;",back:this.hideDog,dogs:L})),Object(i.h)("div",{class:"container-fluid pb-5",style:"margin-bottom: "+(D||y)+"; margin-top: "+(T||j)+";"},Object(i.h)("button",{class:"btn btn-link pl-0 fixed-top text-primary",style:"top: "+v+"; left: 5px; font-size: 35px; width: 45px;",onClick:R},Object(i.h)("i",{class:"fas fa-arrow-circle-left"})),Object(i.h)("div",{class:"row mb-0"},Object(i.h)("div",{class:"w-100 position-relative",style:"height: 25vh; background-size: cover; background-repeat: no-repeat; background-position: 50% 50%; background-color: #a0a0a0; "+(B?'background-image: url("'+B.s3XXLargeLink+'");':"")},K&&Object(i.h)(e,null,Object(i.h)("a",{class:"btn btn-sm btn-primary position-absolute",style:"top: 5px; right: 10px;",href:"/teams/edit/"+k.id},Object(i.h)("i",{class:"fas fa-edit"})," ",Object(i.h)(l.c,{id:"teams.edit"},"Endre")))),Object(i.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-3"},Object(i.h)("div",{class:"row"},Object(i.h)("div",{class:"col-3 col-sm-4 col-md-3 col-lg-4 position-relative"},Object(i.h)("div",{class:"text-center border border-white rounded-circle position-absolute imageRounded imageRoundedResponsive imageRoundedResponsivePosition",style:"left: 20px; "+(H?'background-image: url("'+H.s3LargeLink+'"); background-size: cover; background-repeat: no-repeat; background-position: 50% 50%;':"")},!H&&Object(i.h)("i",{class:"fas fa-users text-muted mt-3",style:"font-size: 40px;"}))," "),Object(i.h)("div",{class:"col-9 col-sm-8 col-md-9 col-lg-8",style:"line-height: 1.2em;"},Object(i.h)("h5",{class:"my-0"},k.name),Object(i.h)("small",{class:"text-muted"},k.place?k.place+", ":"",k.country),Object(i.h)("br",null),q&&Object(i.h)("span",{class:"badge badge-pill badge-secondary mt-2"},q),V&&Object(i.h)("span",{class:"badge badge-pill badge-secondary mt-2 ml-2"},V),Object(i.h)("h6",{class:"mt-2"},Object(i.h)("span",{class:"mr-3"},Object(i.h)("span",{class:"font-weight-bolder"},k.followers?k.followers.length:0)," ",Object(i.h)(l.c,{id:"teams.followers"},"followers")),Object(i.h)("span",{class:"mr-3"},Object(i.h)("span",{class:"font-weight-bolder"},k.dogs?k.dogs.length:0)," ",Object(i.h)(l.c,{id:"teams.dogs-menu"},"dogs")))))),(!G||!G[J])&&Object(i.h)(e,null,Object(i.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-3"},Object(i.h)("button",{class:"btn btn-block btn-primary btn-sm",onClick:function(){return t.subscribeNotificationTopic(J)}},Object(i.h)(l.c,{id:"team.notifications"},"Subscribe to team notifications"))))),Object(i.h)("div",{class:"row mt-5"},Object(i.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3"},!K&&!Y&&!W&&k.public>0&&Object(i.h)("div",{class:"clearfix mb-2"},Object(i.h)(m.a,{stores:this.props.stores,team:k,buttonOnly:!0,skipHome:!0})))),Object(i.h)("div",{class:"row mt-5"},Object(i.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3"},Object(i.h)("h5",{class:"font-weight-lighter text-muted border-bottom"},Object(i.h)(l.c,{id:"teams.socialmedia"},"Sosialemedier"))),Object(i.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3"},Object(i.h)("div",{class:"d-flex justify-content-center"},K&&!k.facebook&&Object(i.h)(e,null,Object(i.h)("div",{class:"text-center text-muted"},Object(i.h)("div",{class:"display-1"},Object(i.h)("i",{class:"fab fa-facebook"})),Object(i.h)("h3",{class:"font-weight-lighter"},Object(i.h)(l.c,{id:"teams.add-sosialmedia"},"Gå inn på endring av teamet for å legge inn en sosialemedier.")))),k.url&&Object(i.h)("div",{class:"mx-2"},Object(i.h)("h3",null,Object(i.h)("a",{href:u.a.asUrl(k.url),target:"_blank",rel:"noreferrer"},Object(i.h)("i",{class:"fas fa-link"})))),k.facebook&&Object(i.h)("div",{class:"mx-2"},Object(i.h)("h3",null,Object(i.h)("a",{href:u.a.asFacebookLink(k.facebook),target:"_blank",rel:"noreferrer"},Object(i.h)("i",{class:"fab fa-facebook"})))),k.instagram&&Object(i.h)("div",{class:"mx-2"},Object(i.h)("h3",null,Object(i.h)("a",{href:u.a.asInstagramLink(k.instagram),target:"_blank",rel:"noreferrer"},Object(i.h)("i",{class:"fab fa-instagram"})))),k.snapchat&&Object(i.h)("div",{class:"mx-2"},Object(i.h)("h3",null,Object(i.h)("a",{href:u.a.asSnapchatLink(k.snapchat),target:"_blank",rel:"noreferrer"},Object(i.h)("i",{class:"fab fa-snapchat"}))))),Object(i.h)("div",{class:"d-flex justify-content-center mt-3"},Object(i.h)("div",{class:"mx-2"},Object(i.h)("h3",null,Object(i.h)("a",{class:"btn btn-outline-success",href:"/stories/team/"+k.uuidv4},Object(i.h)("i",{class:"fas fa-rss"})," ",Object(i.h)(l.c,{id:"story.all-stories"},"Stories")))),Object(i.h)("div",{class:"mx-2"},Object(i.h)("h3",null,Object(i.h)("a",{class:"btn btn-outline-primary",href:"/teams/workouts/team/"+k.uuidv4,onClick:z},Object(i.h)("i",{class:"fas fa-running"})," ",Object(i.h)(l.c,{id:"story.all-workouts"},"All workouts"))))))),k.imagesSponsor&&Object(i.h)("div",{class:"row mt-5"},Object(i.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3"},Object(i.h)("h5",{class:"font-weight-lighter text-muted border-bottom"},Object(i.h)(l.c,{id:"teams.public-sponsor-images",fields:{total:k.imagesSponsor.length}},"Sponsorer - ",k.imagesSponsor.length," stk"))),Object(i.h)("div",{class:"col-12 col-sm-8 col-lg-6 offset-sm-2 offset-lg-3 mb-0 position-relative px-0"},Object(i.h)(p.a,{stores:this.props.stores,images:k.imagesSponsor}))),k.sponsors&&Object(i.h)("div",{class:"row mt-5"},Object(i.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3"},Object(i.h)("h5",{class:"font-weight-lighter text-muted border-bottom"},Object(i.h)(l.c,{id:"teams.sponsors"},"Sponsors"))),Object(i.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3"},K&&!k.sponsors&&Object(i.h)(e,null,Object(i.h)("div",{class:"text-center text-muted"},Object(i.h)("div",{class:"display-1"},Object(i.h)("i",{class:"fas fa-pen-nib"})),Object(i.h)("h3",{class:"font-weight-lighter"},Object(i.h)(l.c,{id:"teams.add-sponsors"},"Gå inn på endring av teamet for å legge inn sponsorer.")))),Object(i.h)(h.a,{markdown:u.a.replaceImages(k.sponsors,k.imagesSponsor,x),markdownOpts:u.a.getMarkdownOptions()}))),Object(i.h)("div",{class:"row mt-5"},Object(i.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3"},Object(i.h)("h5",{class:"font-weight-lighter text-muted border-bottom"},Object(i.h)(l.c,{id:"teams.description"},"Beskrivelse"))),Object(i.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3"},K&&!k.description&&Object(i.h)(e,null,Object(i.h)("div",{class:"text-center text-muted"},Object(i.h)("div",{class:"display-1"},Object(i.h)("i",{class:"fas fa-pen-nib"})),Object(i.h)("h3",{class:"font-weight-lighter"},Object(i.h)(l.c,{id:"teams.add-description"},"Gå inn på endring av teamet for å legge inn en beskrivelse.")))),Object(i.h)(h.a,{markdown:u.a.replaceImages(k.description,k.images,x),markdownOpts:u.a.getMarkdownOptions()}))),k.descriptionWorkoutplan&&Object(i.h)("div",{class:"row mt-5"},Object(i.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3"},Object(i.h)("h5",{class:"font-weight-lighter text-muted border-bottom"},Object(i.h)(l.c,{id:"teams.description-workoutplan"},"Workoutplan"))),Object(i.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3"},K&&!k.descriptionWorkoutplan&&Object(i.h)(e,null,Object(i.h)("div",{class:"text-center text-muted"},Object(i.h)("div",{class:"display-1"},Object(i.h)("i",{class:"fas fa-pen-nib"})),Object(i.h)("h3",{class:"font-weight-lighter"},Object(i.h)(l.c,{id:"teams.add-description-workoutplan"},"Gå inn på endring av teamet for å legge inn en treningsplan.")))),Object(i.h)(h.a,{markdown:u.a.replaceImages(k.descriptionWorkoutplan,k.images,x),markdownOpts:u.a.getMarkdownOptions()}))),N&&Object(i.h)("div",{class:"row mt-5"},Object(i.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3"},Object(i.h)("h5",{class:"font-weight-lighter text-muted border-bottom"},Object(i.h)(l.c,{id:"teams.dogs",fields:{total:L.length}},"Hundene - ",L.length," stk"))),Object(i.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3"},Object(i.h)("div",{class:"row"},L&&L.map((function(e){return Object(i.h)(b.a,{stores:t.props.stores,dog:e,showAge:!0,className:"col",onDogClick:t.onDogClick})}))))),k.images&&Object(i.h)("div",{class:"row mt-5"},Object(i.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3"},Object(i.h)("h5",{class:"font-weight-lighter text-muted border-bottom"},Object(i.h)(l.c,{id:"teams.public-photos",fields:{total:k.images.length}},"Teambilder - ",k.images.length," stk"))),Object(i.h)("div",{class:"col-12 col-sm-8 col-lg-6 offset-sm-2 offset-lg-3 mb-0 position-relative px-0"},Object(i.h)(p.a,{stores:this.props.stores,images:k.images}))),_&&k.achievements&&Object(i.h)("div",{class:"row mt-5"},Object(i.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3"},Object(i.h)("h5",{class:"font-weight-lighter text-muted border-bottom"},Object(i.h)(l.c,{id:"teams.achievements"},"Achievements"))),Object(i.h)("div",{class:"col-12 col-sm-8 col-lg-6 offset-sm-2 offset-lg-3 mb-0 position-relative"},Object(i.h)("div",{class:"row"},k.achievements&&k.achievements.map((function(e){return Object(i.h)("div",{class:"col-12"},e.date&&Object(i.h)("span",{class:"font-weight-lighter mr-2"},r.a.isoDate(e.date,!1,!1,!0)),Object(i.h)("span",{class:"mr-2 font-weight-bold"},e.name),Object(i.h)("span",{class:"mr-2 font-weight-light"},e.description),e.url&&Object(i.h)("span",{class:"mr-2"},Object(i.h)("a",{href:u.a.asUrl(e.url),target:"_blank",rel:"noreferrer",native:!0},Object(i.h)("i",{class:"fas fa-link"}))))}))))),M&&k.trophys&&Object(i.h)("div",{class:"row mt-5"},Object(i.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3"},Object(i.h)("h5",{class:"font-weight-lighter text-muted border-bottom"},Object(i.h)(l.c,{id:"teams.trophy"},"Trophys"))),Object(i.h)("div",{class:"col-12 col-sm-8 col-lg-6 offset-sm-2 offset-lg-3 mb-0 position-relative"},Object(i.h)("div",{class:"row"},k.trophys&&k.trophys.reverse().map((function(e){var t=u.a.getTrophyImage(e.name);if(!t)return"";var s=e.descriptionHeader&&e.descriptionHeader[x]?e.descriptionHeader[x]:"",n=e.description&&e.description[x]?e.description[x]:"";return Object(i.h)("div",{class:"col-4 mt-3"},Object(i.h)("div",{class:"mb-2"},Object(i.h)("img",{src:t,class:"img-fluid"})),Object(i.h)("strong",null,s),Object(i.h)("small",null,Object(i.h)("details",null,Object(i.h)("summary",null,Object(i.h)(l.c,{id:"teams.trophy-details"},"Details")),Object(i.h)(h.a,{markdown:u.a.replaceImages(n,k.images,x),markdownOpts:u.a.getMarkdownOptions()}))))}))))),Object(i.h)("div",{class:"row mt-5 mb-5"},Object(i.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3"},Object(i.h)("div",{class:"text-center text-muted"},Object(i.h)("div",{class:"display-1"},Object(i.h)("i",{class:"fas fa-ellipsis-h"})),Object(i.h)("div",{style:"line-height: 0.9em;"},Object(i.h)("small",null,Object(i.h)(l.c,{id:"teams.something-missing"},"Er det noe du savner på denne siden? Send oss en melding på Facebook.")))))),(d||I)&&Object(i.h)(e,null,Object(i.h)("h5",{class:"font-weight-lighter text-muted border-bottom"},Object(i.h)(l.c,{id:"teams.visits"},"Team page visits")),Object(i.h)(O.a,{stores:this.props.stores,dataLeft:S,legendLeft:["team"],key:"minigraph-team-"+k.uuidv4})),k.uuidv4&&Object(i.h)("img",{src:this.apiServer+"/api/teams/"+k.uuidv4+"/view?user="+c.id+"&time="+this.time,style:"width: 1; height: 1; opacity: 0.1;"})))},s}(i.Component))||o;t.default=x}.call(this,s("hosL").Fragment)},gcyc:function(e,t,s){"use strict";(function(e){var n,a=s("hosL"),o=s("Utv1"),i=s("/eY4"),r=s("OhSV"),c=s("fh8t"),l=s.n(c),d=s("ZOvn"),h=s("ZQlJ"),u=s("s4FZ"),b=Object(i.a)(n=function(t){function s(e){var s;return(s=t.call(this,e)||this).toggleAdminInfo=function(e){e.stopPropagation(),s.setState({showAdminInfo:!s.state.showAdminInfo})},s.toggleInfo=function(e){e.stopPropagation(),s.setState({showInfo:!s.state.showInfo})},s.onDogClick=function(e,t,n){e.preventDefault(),e.stopPropagation();var a=n.find((function(e){return e.uuidv4===t}));return s.setState({currentDog:a,showDog:t,dogs:n}),!1},s.chooseSubmenu=function(e){var t=e.target.closest("button").dataset.submenu;s.setState({submenu:t})},s.state={},s}var n,i;return i=t,(n=s).prototype=Object.create(i.prototype),n.prototype.constructor=n,n.__proto__=i,s.prototype.render=function(){var t=this.props.stores,s=t.raceStore,n=t.userStore,i=this.state,c=i.showAdminInfo,b=i.submenu,p=void 0===b?"details":b,m=i.showDog,f=i.currentDog,g=void 0===f?{}:f,O=s.totalTrackLength,j=this.props,v=j.contestant,y=void 0===v?{}:v,w=j.onMarkerClick,x=void 0===w?function(){}:w,k=j.children,S=j.rank,I=s.findWaypointByBib(y.bib),C=n.isAdmin,T=y.bib?s.getMusherByBibId(y.bib):s.getMusherByBibEmail(y.email),D=s.getTeamById(T.team),P=D.members?D.members.find((function(e){return e.email===T.email})):{},R=(s.getClassByBib(y.bib),s.getTotalsByTeamId(T.team)),A=d.a.getImage({user:P,team:D,priority:"user"}),z=d.a.displayNameShort(P)||d.a.displayNameShort(T),F=y.color,L=d.a.hasBirthday(g.birth),E=g.birth?Math.ceil(d.a.daysUntilNextBirthday(g.birth)):365,U=(o.a.format(I.totalDistanceOnTrack/O*100,0),s.findNearestMushers(y.bib)),M=U.inFront,_=U.behind,N=D&&D.imageHeader&&D.imageHeader.s3XXLargeLink?D.imageHeader:{s3XXLargeLink:"./assets/homerun-race-logo.png"};return Object(a.h)(e,null,Object(a.h)("div",{class:"w-100 position-absolute",style:"z-index: -1; height: 18vh; top: 0px; left: 0px; background-size: cover; background-repeat: no-repeat; background-position: 50% 50%; background-color: #a0a0a0; "+(N?'background-image: url("'+N.s3XXLargeLink+'");':"")}),Object(a.h)("div",{class:"d-flex position-relative",style:"margin-top: 17vh;"},Object(a.h)("div",{class:"position-relative text-center border rounded-circle imageRounded",style:"margin-top: -50px; "+(A?'background-image: url("'+A+'"); background-size: cover;':"background-color: #c0c0c0;")},!A&&Object(a.h)("div",{class:"text-muted",style:"font-size: 35px; padding-top: 10px;"},z),Object(a.h)("div",{class:"rounded-pill-both px-2 text-center position-absolute "+(F?"":"bg-secondary")+" font-weight-bold",style:"bottom: -8px; right: 0; font-size: 1.2em; "+(F?"background-color: "+F+";":"")},S&&Object(a.h)(e,null,S))),Object(a.h)("div",{class:"flex-grow-1 pl-3 text-overflow mb-0",style:"line-height: 1.2em;"},Object(a.h)("h5",{class:"mb-0"},Object(a.h)("div",{class:"d-flex flex-nowrap"},Object(a.h)("div",{class:"text-white font-weight-bold pl-2 pr-1 py-0 rounded-pill-left rounded-none mr-2",style:"background-color: "+d.a.getRankingColor(S)+"; width: 55px;"},T.bib),Object(a.h)("div",null,Object(a.h)("nobr",null,T.flag," ",T.firstname," ",T.lastname)))),Object(a.h)("span",{class:"mb-0",style:"margin-left: 93px;"},T.sportsClub||D.name||Object(a.h)(e,null," ")))),Object(a.h)("div",{class:"d-flex justify-content-center mb-3"},Object(a.h)("div",{class:"col px-0 pt-2"},Object(a.h)("button",{type:"button",class:"btn btn-block rounded-pill-left rounded-none "+("details"===p?"btn-primary":"btn-outline-primary")+" text-nowrap",style:"text-overflow: ellipsis; overflow: hidden;",onClick:this.chooseSubmenu,"data-submenu":"details"},"Details")),Object(a.h)("div",{class:"col px-0 pt-2"},Object(a.h)("button",{type:"button",class:"btn btn-block rounded-none "+("team"===p?"btn-primary":"btn-outline-primary")+" text-nowrap",style:"text-overflow: ellipsis; overflow: hidden;",onClick:this.chooseSubmenu,"data-submenu":"team"},"Team")),Object(a.h)("div",{class:"col px-0 pt-2"},Object(a.h)("button",{type:"button",class:"btn btn-block rounded-pill-right rounded-none "+("dogs"===p?"btn-primary":"btn-outline-primary")+" text-nowrap",style:"text-overflow: ellipsis; overflow: hidden;",onClick:this.chooseSubmenu,"data-submenu":"dogs"},"Dogs"))),Object(a.h)("div",{class:"w-100 overflow-auto position-relative"},"details"===p&&Object(a.h)(e,null,k),"team"===p&&Object(a.h)(e,null,D.public>0?Object(a.h)(e,null,Object(a.h)("h3",null,D.name),Object(a.h)(l.a,{markdown:d.a.replaceImages(D.description,D.images),markdownOpts:d.a.getMarkdownOptions()}),Object(a.h)(u.a,{stores:this.props.stores,images:D.images})):Object(a.h)(e,null,Object(a.h)("div",{class:"text-center text-muted"},Object(a.h)("div",{class:"display-1"},Object(a.h)("i",{class:"fas fa-dog"})),Object(a.h)("h3",null,Object(a.h)(r.c,{id:"teams.no-public-team"},"No public team!")),Object(a.h)(r.c,{id:"teams.no-public-team"},"This team is not publicly visible.")))),"dogs"===p&&Object(a.h)(e,null,D.public>0?Object(a.h)(e,null,D.dogs&&Object(a.h)("div",{class:"w-100 container-fluid"},Object(a.h)("div",{class:"row pt-2"},Object(a.h)(h.a,{stores:this.props.stores,dogs:D.dogs.map((function(e){return e.id})),allDogs:D.dogs,onDogClick:this.onDogClick}))),m&&Object(a.h)(e,null,Object(a.h)("div",{class:"d-flex mb-0 mt-3 position-relative"},Object(a.h)("div",{class:"text-center border rounded-circle imageRounded imageRoundedLarge text-muted pt-2",style:g.image?'background-image: url("'+g.image.s3LargeLink+'"); background-size: cover;':""},!g.image&&Object(a.h)("span",{class:"font-weight-lighter",style:"font-size: 35px;"},o.a.ucfirst(g.name,!0))),Object(a.h)("div",{class:"flex-grow-1 pl-3 pr-2",style:"border-right: 4px solid "+n.findHarness(g.harness,"colorNonstop")+" !important; line-height: 1.2em;"},Object(a.h)("h5",{class:"mb-1"},g.shortname||g.name," ",g.shortname&&""!==g.shortname&&Object(a.h)(e,null," - ",Object(a.h)("span",{class:"font-weight-lighter"},g.name)),L&&Object(a.h)(e,null,Object(a.h)("i",{class:"fas fa-birthday-cake ml-3"}))),Object(a.h)("div",null,E<7&&Object(a.h)(e,null,Object(a.h)("span",{class:"text-muted mr-2"},Object(a.h)("i",{class:"fas fa-birthday-cake"})," in ",E," days")),g.birth&&Object(a.h)("span",{class:"mr-2"},o.a.age(g.birth,g.deceased)),"female"===g.gender?Object(a.h)("i",{class:"fas fa-venus"}):Object(a.h)("i",{class:"fas fa-mars"})))))):Object(a.h)(e,null,Object(a.h)("div",{class:"text-center text-muted"},Object(a.h)("div",{class:"display-1"},Object(a.h)("i",{class:"fas fa-dog"})),Object(a.h)("h3",null,Object(a.h)(r.c,{id:"teams.no-public-team"},"No public team!")),Object(a.h)(r.c,{id:"teams.no-public-team"},"This team is not publicly visible.")))),C&&Object(a.h)("div",{style:"max-height: 200px; max-width: 70vw; overflow: auto;"},Object(a.h)("button",{class:"btn btn-link btn-block",onClick:this.toggleAdminInfo},"Toggle admin info"),c&&Object(a.h)(e,null,Object(a.h)("small",null,Object(a.h)("xmp",null,"musher: ",JSON.stringify(T,null,4),Object(a.h)("br",null),"user: ",JSON.stringify(P,null,4),Object(a.h)("br",null),"team: ",JSON.stringify(D,null,4),Object(a.h)("br",null),"totals: ",JSON.stringify(R,null,4),Object(a.h)("br",null))))),Object(a.h)("div",{class:"d-flex position-absolute",style:"right: 10px; bottom: 10px;"},M.bib&&Object(a.h)("a",{class:"text-primary mx-2",onClick:function(){return x(M)},style:"line-height: 1.0em; font-size: 2.3em;"},Object(a.h)("i",{class:"fas fa-angle-left"})),_.bib&&Object(a.h)("a",{class:"text-primary mx-2",onClick:function(){return x(_)},style:"line-height: 1.0em; font-size: 2.3em;"},Object(a.h)("i",{class:"fas fa-angle-right"})))))},s}(a.Component))||n;t.a=b}).call(this,s("hosL").Fragment)},hwiY:function(e,t,s){"use strict";(function(e){function n(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function a(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?n(Object(s),!0).forEach((function(t){o(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):n(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function o(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function i(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}var r,c,l,d=s("hosL"),h=s("Utv1"),u=s("/eY4"),b=s("OhSV"),p=(s("Y3FI"),s("fh8t")),m=s.n(p),f=(s("go65"),s("ZOvn")),g=s("om2D"),O=s("TiXY"),j=s("cH0S"),v=s("9xg+"),y=Object(u.a)(r=function(e){function t(){for(var t,s=arguments.length,n=new Array(s),a=0;a<s;a++)n[a]=arguments[a];return(t=e.call.apply(e,[this].concat(n))||this).handleImageErrored=function(e){var t=e.target;t.onerror=null,setTimeout((function(){t.src+="?"+new Date}),1e3)},t.removeImage=function(e){return new Promise((function(s){return t.props.stores.userStore.removeImage({id:t.props.user.id,name:e.target.parentElement.dataset.name||e.target.dataset.name}),s()}))},t.removeMainImage=function(){var e=t.props;(0,e.updateField)({id:e.user.id,field:e.field,value:{}})},t}return i(t,e),t.prototype.render=function(){var e=this,t=this.props,s=t.saved,n=t.user,a=t.type,o=void 0===a?"text":a,i=t.field,r=t.title,c=t.icon,l=t.help,h=t.onInput,u=t.updateField,p=n[i];return"image"===o?Object(d.h)("div",{class:"form-group "+(s[i+"."+n.id]?"is-valid":"")},Object(d.h)("label",{for:i+"Input"},c&&Object(d.h)("i",{class:c+" text-muted"})," ",r),Object(d.h)("div",{class:"container-fluid"},Object(d.h)("div",{class:"row"},n.image&&n.image.s3SmallLink&&Object(d.h)("div",{class:"col-3 p-1"},Object(d.h)("img",{src:n.image.s3SmallLink,class:"img-fluid border rounded-lg",onError:this.handleImageErrored}),Object(d.h)("button",{class:"btn btn-sm btn-link",onClick:this.removeMainImage,"data-name":n.image.name},Object(d.h)("i",{class:"fas fa-trash"})," Del"),Object(d.h)("span",{class:"badge badge-success"},"Main")),n.images&&n.images.filter((function(e){return!n.image||e.md5!==n.image.md5})).map((function(t){return Object(d.h)("div",{class:"col-3 p-1"},Object(d.h)("img",{src:t.s3SmallLink,class:"img-fluid",onError:e.handleImageErrored}),Object(d.h)("button",{class:"btn btn-sm btn-link",onClick:e.removeImage,"data-name":t.name},Object(d.h)("i",{class:"fas fa-trash"})," Del"))})))),Object(d.h)(g.a,{saved:s,object:n,field:i,updateField:u,autoOpen:!1}),s[i+"."+n.id]?Object(d.h)("div",{class:"valid-feedback",style:"display: block;"},Object(d.h)(b.c,{id:"users.changes-saved"},"Endringene er lagret")):Object(d.h)("small",{id:i+"Help",class:"form-text text-muted"},l)):"file"===o?Object(d.h)("div",{class:"form-group "+(s[i+"."+n.id]?"is-valid":"")},Object(d.h)("label",{for:i+"Input"},c&&Object(d.h)("i",{class:c+" text-muted"})," ",r),Object(d.h)(O.a,{saved:s,object:n,field:i,updateField:u}),s[i+"."+n.id]?Object(d.h)("div",{class:"valid-feedback",style:"display: block;"},Object(d.h)(b.c,{id:"users.changes-saved"},"Endringene er lagret")):Object(d.h)("small",{id:i+"Help",class:"form-text text-muted"},l)):Object(d.h)("div",{class:"form-group "+(s[i+"."+n.id]?"is-valid":"")},Object(d.h)("label",{for:i+"Input"},c&&Object(d.h)("i",{class:c+" text-muted"})," ",r),Object(d.h)("input",{type:"text",class:"form-control "+(s[i+"."+n.id]?"is-valid":""),id:i+"Input","aria-describedby":i+"Help",value:p,"data-id":n.id,"data-field":i,onInput:h}),s[i+"."+n.id]?Object(d.h)("div",{class:"valid-feedback",style:"display: block;"},Object(d.h)(b.c,{id:"users.changes-saved"},"Endringene er lagret")):Object(d.h)("small",{id:i+"Help",class:"form-text text-muted"},l))},t}(d.Component))||r,w=Object(u.a)(c=function(t){function s(){return t.apply(this,arguments)||this}return i(s,t),s.prototype.render=function(){var t=this.props,s=t.dog,n=t.children,a=t.onDogClick,o=void 0===a?function(){}:a,i=this.props.stores,r=i.userStore.vaccineLogStatuses;return Object(d.h)("div",{class:"d-flex mb-0 position-relative mb-3 dogInfo","data-id":s.id},Object(d.h)("div",null,Object(d.h)("div",{class:"text-center border rounded-circle imageRounded imageRoundedMedium text-muted pt-2",style:s.image?'background-image: url("'+s.image.s3SmallLink+'"); background-size: cover;':""},!s.image&&Object(d.h)("span",{class:"font-weight-lighter",style:"font-size: 35px;"},h.a.ucfirst(s.name,!0)))),Object(d.h)("div",{class:"flex-grow-1 pl-3 pr-2",onClick:o},n,Object(d.h)("span",{class:"float-right"},s.birth&&Object(d.h)("span",{class:"mr-2"},h.a.age(s.birth,s.deceased)),"female"===s.gender?Object(d.h)("i",{class:"fas fa-venus"}):Object(d.h)("i",{class:"fas fa-mars"})),Object(d.h)("h6",{class:"mb-1",style:"line-height: 1.0em;"},s.shortname||s.name," ",s.shortname&&""!==s.shortname&&Object(d.h)(e,null," - ",Object(d.h)("span",{class:"font-weight-lighter"},s.name))),s.chipId?Object(d.h)(e,null,Object(d.h)("i",{class:"fas fa-microchip text-muted"})," ",s.chipId):Object(d.h)(e,null,Object(d.h)("div",{class:"alert alert-danger",role:"alert"},Object(d.h)(b.c,{id:"races.missing-chipid"},"Missing chid id"))),Object(d.h)("div",null,r&&r.filter((function(e){return e.chipId===s.chipId})).map((function(t){return Object(d.h)("span",{class:"badge badge-"+(t.inKarens?"warning":"success")+" mr-2 mb-1"},t.vaccineAgens.name,Object(d.h)("span",{class:"font-weight-lighter ml-2 d-none d-sm-block"},Object(d.h)("i",{class:"fas fa-calendar-check"})," ",h.a.isoDate(t.vaccineAgens.durationEnd,!1,!1,!0),t.inKarens&&Object(d.h)(e,null,Object(d.h)("br",null),"(karens: ",h.a.format(t.karensDaysLeft,0)," days left)")))})))))},s}(d.Component))||c,x=Object(u.a)(l=function(t){function s(e){var s;return(s=t.call(this,e)||this).updateField=function(e){var t=e.target.dataset,n=t.field,a=t.type,o=t.elementtype,i=e.target.value;s.updateFieldValue({id:parseInt(t.id,10),field:n,value:i,type:a,elementtype:o})},s.updateFieldValue=function(e){var t=e.id,n=e.field,a=e.value,o=e.datatype,i=e.elementtype,r=e.skipTimer,c=void 0!==r&&r,l=s.props.stores.userStore,d=a,h=a,u=l.user;"images"===n&&Array.isArray(u.images)&&Array.isArray(a)&&(h=[].concat(u.images,a)),"array"!==o||Array.isArray(a)||(d="number"===i?a.split(",").map((function(e){return parseFloat(e)||e})):a.split(",")),l.updateField(t,n,h),c?s.doUpdateField(t,n,d):(clearTimeout(s.updateTimer[n]),s.updateTimer[n]=setTimeout((function(){return new Promise((function(e){return s.doUpdateField(t,n,d),e()}))}),500))},s.signupToRace=function(){return new Promise((function(e,t){var n,o,i,r,c;return i=(n=s.props.stores).userStore.user,r=(o=n.raceStore).signup,c=s.props.race,Promise.resolve(o.addContestant({id:(void 0===c?{}:c).id,classId:r.class,newContestant:a({team:i.team,firstname:i.firstname,lastname:i.lastname,sportsClub:i.sportsClub,email:i.email,cellphone:i.cellphone,facebook:i.facebook,instagram:i.instagram},r)})).then((function(){try{return e()}catch(e){return t(e)}}),t)}))},s.updateSignup=function(e){s.props.stores.raceStore.updateObjectKeyValue("signup",e.target.id,e.target.value)},s.editSignup=function(e){var t,n=s.props.race,a=(void 0===n?{}:n).id,o=s.props.stores.raceStore,i=e.target.id,r=e.target.value,c=e.target.dataset,l=c.classid,d=c.contestantid;o.updateObjectKeyValue("signup",i,r);var u=((t={raceClassId:l,contestantId:d})["raceClassContestant"+h.a.ucfirst(i)]=r,t);clearTimeout(s.updateTimer[i]),s.updateTimer[i]=setTimeout((function(){return new Promise((function(e,t){function s(){return e()}return o.editClass({id:a,data:u}),o.localUpdateSignup(i,r),"team"===i?Promise.resolve(o.loadTeams(r,!0)).then(function(){try{return s.call(this)}catch(e){return t(e)}}.bind(this),t):s.call(this)}))}),500)},s.clearSignupValue=function(e){return new Promise((function(t,n){function a(){return t()}var o,i,r,c,l,d,u,b,p;return r=(void 0===(i=s.props.race)?{}:i).id,"null",u=(d=e.target.dataset).classid,b=d.contestantid,(c=s.props.stores.raceStore).updateObjectKeyValue("signup",l=e.target.id,"null"),(o={raceClassId:u,contestantId:b})["raceClassContestant"+h.a.ucfirst(l)]="null",p=o,clearTimeout(s.updateTimer[l]),c.editClass({id:r,data:p}),c.localUpdateSignup(l,"null"),"team"===l?Promise.resolve(c.loadTeams("null",!0)).then(function(){try{return a.call(this)}catch(e){return n(e)}}.bind(this),n):a.call(this)}))},s.toggleDrawer=function(){s.setState({showDrawer:!s.state.showDrawer})},s.onDogClick=function(e){var t=e.target.closest(".dogInfo").dataset.id;console.log("onDogClick",t);var n=s.props.stores,a=n.userStore.findDogsByTeam(parseInt(n.raceStore.signup.team,10)).find((function(e){return e.id==t}));s.setState({showDrawer:!0,currentDog:a})},s.chooseSubmenu=function(e){e.stopPropagation(),s.setState({submenu:e.target.parentElement.dataset.menu||e.target.dataset.menu})},s.state={submenu:"info",showDrawer:!1},s.inputRef={},s.updateTimer={},s}i(s,t);var n=s.prototype;return n.doUpdateField=function(e,t,s){return new Promise(function(n,a){return Promise.resolve(this.props.stores.userStore.saveField(e,t,s)).then((function(){try{return n()}catch(e){return a(e)}}),a)}.bind(this))},n.render=function(){var t=this,s=this.state,n=s.submenu,a=s.showDrawer,o=s.currentDog,i=this.props.stores,r=i.userStore,c=i.raceStore,l=r.user,u=void 0===l?{}:l,p=r.teams,g=void 0===p?[]:p,O=r.saved,x=u.language,k=void 0===x?"en":x,S=this.props.race,I=void 0===S?{}:S,C=c.signup,T={},D=[];C.class&&(T=c.getRaceClassById(C.class)),C.team&&(D=r.findDogsByTeam(parseInt(C.team,10)));var P=new Date,R=f.a.getAlphabet(T.dogs).filter((function(e){return C["dog"+e]})).map((function(e){return C["dog"+e]})),A=function(e){return-1===R.indexOf(e.chipId)};return Object(d.h)(e,null,Object(d.h)("div",{class:"row"},Object(d.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-0 mb-2"},Object(d.h)("h2",{class:"mb-0"},Object(d.h)(b.c,{id:"races.signup"},"Påmelding"))),Object(d.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-3 mb-2"},P>=new Date(I.signupStartDate)&&P<=new Date(I.signupEndDate)?Object(d.h)(e,null,Object(d.h)("span",{class:"font-weight-lighter"},Object(d.h)(b.c,{id:"races.signed-in-as"},"Logget inn som"),":")," ",u.email,Object(d.h)("br",null),Object(d.h)("br",null),C.id?Object(d.h)(e,null,Object(d.h)("div",{class:"font-weight-bold mb-4"},Object(d.h)("i",{class:"fas fa-check text-success"})," ",Object(d.h)(b.c,{id:"races.signed-up"},"Din bruker er påmeldt!"),Object(d.h)("br",null)),!I.liveRace&&I.signuppayment&&Object(d.h)(e,null,Object(d.h)("div",{class:"form-group row my-2"},Object(d.h)("label",{for:"cellphone",class:"col-2 col-form-label text-right font-weight-lighter"},Object(d.h)(b.c,{id:"races.signup"},"Påmelding")),Object(d.h)("div",{class:"col-10"},C.paidSignupfee?Object(d.h)("div",{class:"py-2"},Object(d.h)(b.c,{id:"races.paid"},"Betalt"),": ",h.a.formatDate(C.paidSignupfee),Object(d.h)("i",{class:"fas fa-check text-success ml-3"})):Object(d.h)(e,null,Object(d.h)("div",{class:"alert alert-danger mb-1",role:"alert"},Object(d.h)("h5",null,Object(d.h)("span",{class:"font-weight-lighter"},Object(d.h)(b.c,{id:"races.payment-info"},"Betaling påmelding"),":"),Object(d.h)("br",null),Object(d.h)(m.a,{markdown:f.a.replaceImages(I.signuppayment,I.images,k),markdownOpts:f.a.getMarkdownOptions()}),T.signupfee||I.signupfee," NOK")))))),Object(d.h)("div",{class:"w-100 overflow-hidden"},Object(d.h)("div",{class:"d-flex flex-row flex-nowrap pb-2 px-1",style:"overflow: auto; scroll-snap-type: x mandatory;"},Object(d.h)("div",{class:"col px-0 pt-2"},Object(d.h)("button",{class:"btn btn-block rounded-pill-left rounded-none "+("info"===n?"btn-primary":"btn-outline-primary")+" text-nowrap",style:"text-overflow: ellipsis; overflow: hidden;","data-menu":"info",onClick:this.chooseSubmenu},Object(d.h)("i",{class:"fas fa-info-circle"})," ",Object(d.h)(b.c,{id:"race.info"},"Info"))),Object(d.h)("div",{class:"col px-0 pt-2"},Object(d.h)("button",{class:"btn btn-block rounded-pill-right rounded-none "+("chiplist"===n?"btn-primary":"btn-outline-primary")+" text-nowrap",style:"text-overflow: ellipsis; overflow: hidden;","data-menu":"chiplist",onClick:this.chooseSubmenu},Object(d.h)("i",{class:"fas fa-list-ol"})," ",Object(d.h)(b.c,{id:"race.chiplist"},"Chiplist"))))),"info"===n&&Object(d.h)(e,null,Object(d.h)("div",{class:"form-group row my-5"},Object(d.h)("label",{for:"team",class:"col-3 col-form-label text-right font-weight-lighter"},Object(d.h)(b.c,{id:"races.team"},"Team")),Object(d.h)("div",{class:"col-9"},Object(d.h)("select",{class:"form-control form-control-lg",id:"team","aria-describedby":"teamHelp","data-classid":C.class,"data-contestantid":C.id,onInput:this.editSignup,value:C.team},Object(d.h)("option",{value:""},"-- ",Object(d.h)(b.c,{id:"races.choose-team"},"Velg team")," --"),g.map((function(e){return Object(d.h)("option",{value:e.id},e.name)}))),C.team?Object(d.h)(e,null):Object(d.h)(e,null,Object(d.h)("div",{class:"alert alert-danger clearfix",role:"alert"},Object(d.h)("span",{class:"display-4 float-left mr-3"},Object(d.h)("i",{class:"fas fa-exclamation-triangle"})),Object(d.h)(b.c,{id:"races.choose-race-team",fields:{title:I.title}},"Please choose race team for ",I.title))))),Object(d.h)("div",{class:"form-group row my-2"},Object(d.h)("label",{for:"cellphone",class:"col-3 col-form-label text-right font-weight-lighter"},Object(d.h)(b.c,{id:"races.cellphone"},"Mobil")),Object(d.h)("div",{class:"col-9"},Object(d.h)(b.b,null,Object(d.h)("input",{type:"text",class:"form-control",id:"cellphone","data-classid":C.class,"data-contestantid":C.id,onInput:this.editSignup,value:C.cellphone,placeholder:Object(d.h)(b.c,{id:"races.cellphone-help"},"Hva er mobilnummer ditt?")})))),C.name&&Object(d.h)("div",{class:"form-group row my-2"},Object(d.h)("label",{for:"name",class:"col-3 col-form-label text-right font-weight-lighter"},Object(d.h)(b.c,{id:"races.name"},"Navn")),Object(d.h)("div",{class:"col-9"},C.name)),Object(d.h)("div",{class:"form-group row my-2"},Object(d.h)("label",{for:"firstname",class:"col-3 col-form-label text-right font-weight-lighter"},Object(d.h)(b.c,{id:"races.firstname"},"Fornavn")),Object(d.h)("div",{class:"col-9"},Object(d.h)(b.b,null,Object(d.h)("input",{type:"text",class:"form-control",id:"firstname","data-classid":C.class,"data-contestantid":C.id,onInput:this.editSignup,value:C.firstname,placeholder:Object(d.h)(b.c,{id:"races.firstname-help"},"Hva er fornavnet ditt?")})))),Object(d.h)("div",{class:"form-group row my-2"},Object(d.h)("label",{for:"lastname",class:"col-3 col-form-label text-right font-weight-lighter"},Object(d.h)(b.c,{id:"races.lastname"},"Etternavn")),Object(d.h)("div",{class:"col-9"},Object(d.h)(b.b,null,Object(d.h)("input",{type:"text",class:"form-control",id:"lastname","data-classid":C.class,"data-contestantid":C.id,onInput:this.editSignup,value:C.lastname,placeholder:Object(d.h)(b.c,{id:"races.lastname-help"},"Hva er etternavnet ditt?")})))),Object(d.h)("div",{class:"form-group row my-2"},Object(d.h)("label",{for:"sportsClub",class:"col-3 col-form-label text-right font-weight-lighter"},Object(d.h)(b.c,{id:"races.sportsclub"},"Klubb")),Object(d.h)("div",{class:"col-9"},Object(d.h)(b.b,null,Object(d.h)("input",{type:"text",class:"form-control",id:"sportsClub","data-classid":C.class,"data-contestantid":C.id,onInput:this.editSignup,value:C.sportsClub,placeholder:Object(d.h)(b.c,{id:"races.sportsClub-help"},"Hvilken klubb tilhører du?")})))),Object(d.h)("div",{class:"form-group row my-2"},Object(d.h)("label",{for:"facebook",class:"col-3 col-form-label text-right font-weight-lighter"},Object(d.h)(b.c,{id:"races.facebook"},"Facebook")),Object(d.h)("div",{class:"col-9"},Object(d.h)(b.b,null,Object(d.h)("input",{type:"text",class:"form-control",id:"facebook","data-classid":C.class,"data-contestantid":C.id,onInput:this.editSignup,value:C.facebook,placeholder:Object(d.h)(b.c,{id:"races.facebook-help"},"Hva er Facebook brukernavnet ditt?")})))),Object(d.h)("div",{class:"form-group row my-2"},Object(d.h)("label",{for:"instagram",class:"col-3 col-form-label text-right font-weight-lighter"},Object(d.h)(b.c,{id:"races.instagram"},"Instagram")),Object(d.h)("div",{class:"col-9"},Object(d.h)(b.b,null,Object(d.h)("input",{type:"text",class:"form-control",id:"instagram","data-classid":C.class,"data-contestantid":C.id,onInput:this.editSignup,value:C.instagram,placeholder:Object(d.h)(b.c,{id:"races.instagram-help"},"Hva er Instagram brukernavnet ditt?")})))),Object(d.h)("div",{class:"form-group row my-2"},Object(d.h)("label",{for:"team",class:"col-3 col-form-label text-right font-weight-lighter"},Object(d.h)(b.c,{id:"races.class"},"Klasse")),Object(d.h)("div",{class:"col-9"},Object(d.h)("select",{class:"form-control",id:"class","aria-describedby":"classHelp","data-classid":C.class,"data-contestantid":C.id,onInput:this.editSignup,value:C.class,disabled:!0},Object(d.h)("option",{value:""},"-- ",Object(d.h)(b.c,{id:"races.choose-class"},"Velg klasse")," --"),I.classes&&I.classes.sort((function(e,t){return e.distance-t.distance})).map((function(t){return Object(d.h)(e,null,Object(d.h)("option",{value:t.id},t.title,!I.liveRace&&Object(d.h)(e,null,"- ",t.distance," km - Påmelding: ",t.signupfee||I.signupfee," NOK")))}))))),I.rules&&Object(d.h)("div",{class:"form-group row my-2"},Object(d.h)("label",{for:"team",class:"col-3 col-form-label text-right font-weight-lighter"}," "),Object(d.h)("div",{class:"col-9 pl-5"},Object(d.h)("input",{type:"checkbox",class:"form-check-input",id:"termsAndAgreement","data-classid":C.class,"data-contestantid":C.id,onInput:this.editSignup,checked:C.termsAndAgreement,value:1}),Object(d.h)("label",{class:"form-check-label",for:"termsAndAgreement"},Object(d.h)(b.c,{id:"races.agreement-accept"},"Jeg har lest og godtar reglene for løpet.")))),I.declaration&&Object(d.h)("div",{class:"form-group row my-4"},Object(d.h)("div",{class:"col-12 text-center border-top"},Object(d.h)("h5",null,Object(d.h)(b.c,{id:"races.declaration"},"Declaration"))),Object(d.h)("details",{class:"col-12"},C.declaration?Object(d.h)(e,null,Object(d.h)("summary",null,Object(d.h)(b.c,{id:"races.see-declaration"},"See declaration")," (",Object(d.h)("span",{class:"text-muted font-weight-light"},Object(d.h)(b.c,{id:"races.declaration-signed"},"Declaration signed"),": ",h.a.isoDate(C.declarationDate)),")")):Object(d.h)(e,null,Object(d.h)("summary",null,Object(d.h)("h5",{class:"btn btn-primary"},Object(d.h)(b.c,{id:"races.see-declaration"},"See declaration")))),Object(d.h)(m.a,{markdown:f.a.replaceImages(I.declaration,I.images,k),markdownOpts:f.a.getMarkdownOptions()}),C.declaration?Object(d.h)(e,null,Object(d.h)("i",null,Object(d.h)(b.c,{id:"races.declaration-signed"},"Declaration signed"),": ",h.a.isoDate(C.declarationDate))):Object(d.h)(e,null,Object(d.h)("div",{class:"pl-5"},Object(d.h)("input",{type:"checkbox",class:"form-check-input",id:"declaration","data-classid":C.class,"data-contestantid":C.id,onInput:this.editSignup,checked:C.declaration,value:1}),Object(d.h)("label",{class:"form-check-label",for:"declaration"},Object(d.h)(b.c,{id:"races.declaration-accept"},"I hereby sign the declaration for the race!")))))),Object(d.h)(y,{saved:O,user:u,field:"image",icon:"fas fa-camera",type:"image",stores:this.props.stores,title:Object(d.h)(b.c,{id:"users.photos"},"Bilder"),help:Object(d.h)(b.c,{id:"users.photos-help"},"Bilder av deg."),onInput:this.updateField,updateField:this.updateFieldValue})),"chiplist"===n&&Object(d.h)(e,null,Object(d.h)("div",{class:"form-group row my-4"},Object(d.h)("div",{class:"col-12 text-center border-top pt-3"},Object(d.h)("h5",null,Object(d.h)(b.c,{id:"races.chiplist"},"Chiplist"))),T&&T.dogs&&f.a.getAlphabet(T.dogs,["R1","R2"]).map((function(s){var n=D&&D.length>0?D.find((function(e){return e.chipId===C["dog"+s]})):null;return Object(d.h)(e,null,Object(d.h)("div",{class:"col-12 center border-top pt-3 d-flex"},Object(d.h)("div",{class:"display-4",style:"width: 50px;"},s),Object(d.h)("div",{class:"flex-grow-1 pl-3 pr-2"},n?Object(d.h)(e,null,Object(d.h)(w,{stores:t.props.stores,dog:n,onDogClick:t.onDogClick},Object(d.h)("button",{class:"btn btn-danger float-right ml-2",onClick:t.clearSignupValue,id:"dog"+s,"data-classid":C.class,"data-contestantid":C.id},Object(d.h)("i",{class:"fas fa-times"})))):Object(d.h)(e,null,Object(d.h)("select",{class:"form-control p-0",id:"dog"+s,"data-classid":C.class,"data-contestantid":C.id,onInput:t.editSignup},Object(d.h)("option",{value:""},"-- Choose dog for this position --"),D.filter(A).map((function(t){return Object(d.h)(e,null,Object(d.h)("option",{value:t.chipId,selected:t.chipId===C["dog"+s]?"selected":""},t.shortname||t.name," - ",t.birth&&Object(d.h)(e,null,h.a.age(t.birth,t.deceased))," ","female"===t.gender?"♀️":"♂️"))})))))))})))),"team"===n&&Object(d.h)(e,null,Object(d.h)("div",{class:"form-group row my-4"},Object(d.h)("div",{class:"col-12 border-top pt-3"},D&&D.length>0?Object(d.h)(e,null,D.map((function(s){return Object(d.h)(e,null,Object(d.h)(w,{stores:t.props.stores,dog:s}))}))):Object(d.h)(e,null,Object(d.h)("div",{class:"text-center text-muted"},Object(d.h)("div",{class:"display-1"},Object(d.h)("i",{class:"fas fa-dog"})),Object(d.h)("h3",{class:"font-weight-lighter"},Object(d.h)(b.c,{id:"race.add-dogs"},"Add a team to your race signup to see the dogs.")))))))):Object(d.h)(e,null,I.liveRace?Object(d.h)(e,null,"Signup is done at the race normal web pages."):Object(d.h)(e,null,Object(d.h)("div",{class:"form-group"},Object(d.h)("label",{for:"cellphone"},Object(d.h)(b.c,{id:"races.cellphone"},"Mobil")),Object(d.h)("input",{type:"text",class:"form-control",id:"cellphone","aria-describedby":"cellphoneHelp",placeholder:u.cellphone,onInput:this.updateSignup,value:C.cellphone}),Object(d.h)("small",{id:"cellphoneHelp",class:"form-text text-muted"},Object(d.h)(b.c,{id:"races.cellphone-help"},"'Hva er mobilnummer ditt?'"))),C.name&&Object(d.h)("div",{class:"row"},Object(d.h)("div",{class:"col"},Object(d.h)("div",{class:"form-group"},Object(d.h)("label",{for:"name"},Object(d.h)(b.c,{id:"races.name"},"Name")),Object(d.h)("input",{type:"text",class:"form-control",id:"name","aria-describedby":"nameHelp",placeholder:u.name,onInput:this.updateSignup,value:C.name}),Object(d.h)("small",{id:"nameHelp",class:"form-text text-muted"},Object(d.h)(b.c,{id:"races.name-help"},"Hva er navnet ditt?"))))),Object(d.h)("div",{class:"row"},Object(d.h)("div",{class:"col"},Object(d.h)("div",{class:"form-group"},Object(d.h)("label",{for:"firstname"},Object(d.h)(b.c,{id:"races.firstname"},"Fornavn")),Object(d.h)("input",{type:"text",class:"form-control",id:"firstname","aria-describedby":"firstnameHelp",placeholder:u.firstname,onInput:this.updateSignup,value:C.firstname}),Object(d.h)("small",{id:"firstnameHelp",class:"form-text text-muted"},Object(d.h)(b.c,{id:"races.firstname-help"},"Hva er fornavnet ditt?")))),Object(d.h)("div",{class:"col"},Object(d.h)("div",{class:"form-group"},Object(d.h)("label",{for:"lastname"},Object(d.h)(b.c,{id:"races.lastname"},"Etternavn")),Object(d.h)("input",{type:"text",class:"form-control",id:"lastname","aria-describedby":"lastnameHelp",placeholder:u.lastname,onInput:this.updateSignup,value:C.lastname}),Object(d.h)("small",{id:"lastnameHelp",class:"form-text text-muted"},Object(d.h)(b.c,{id:"races.lastname-help"},"Hva er etternavnet ditt?"))))),Object(d.h)("div",{class:"form-group"},Object(d.h)("label",{for:"sportsClub"},Object(d.h)(b.c,{id:"races.sportsclub"},"Klubb")),Object(d.h)("input",{type:"text",class:"form-control",id:"sportsClub","aria-describedby":"sportsClubHelp",placeholder:u.sportsClub,onInput:this.updateSignup,value:C.sportsClub}),Object(d.h)("small",{id:"sportsClubHelp",class:"form-text text-muted"},Object(d.h)(b.c,{id:"races.sportsClub-help"},"Hvilken klubb tilhører du?"))),Object(d.h)("div",{class:"row"},Object(d.h)("div",{class:"col"},Object(d.h)("div",{class:"form-group"},Object(d.h)("label",{for:"facebook"},Object(d.h)(b.c,{id:"races.facebook"},"Facebook")),Object(d.h)("input",{type:"text",class:"form-control",id:"facebook","aria-describedby":"facebookHelp",placeholder:u.facebook,onInput:this.updateSignup,value:C.facebook}),Object(d.h)("small",{id:"facebookHelp",class:"form-text text-muted"},Object(d.h)(b.c,{id:"races.facebook-help"},"Hva er Facebook brukernavnet ditt?")))),Object(d.h)("div",{class:"col"},Object(d.h)("div",{class:"form-group"},Object(d.h)("label",{for:"instagram"},Object(d.h)(b.c,{id:"races.instagram"},"Instagram")),Object(d.h)("input",{type:"text",class:"form-control",id:"instagram","aria-describedby":"instagramHelp",placeholder:u.instagram,onInput:this.updateSignup,value:C.instagram}),Object(d.h)("small",{id:"instagramHelp",class:"form-text text-muted"},Object(d.h)(b.c,{id:"races.instagram-help"},"Hva er Instagram brukernavnet ditt?"))))),Object(d.h)("div",{class:"form-group"},Object(d.h)("label",{for:"team"},Object(d.h)(b.c,{id:"races.team"},"Team")),Object(d.h)("select",{class:"form-control",id:"team","aria-describedby":"teamHelp",onInput:this.updateSignup,value:C.team},Object(d.h)("option",{value:""},"-- ",Object(d.h)(b.c,{id:"races.choose-team"},"Velg team")," --"),g.map((function(e){return Object(d.h)("option",{value:e.id},e.name)}))),Object(d.h)("small",{id:"teamHelp",class:"form-text text-muted"},Object(d.h)(b.c,{id:"races.choose-team-help"},"Velg fra dine team"))),Object(d.h)("div",{class:"form-group"},Object(d.h)("label",{for:"class"},Object(d.h)(b.c,{id:"races.class"},"Klasse")),Object(d.h)("select",{class:"form-control",id:"class","aria-describedby":"classHelp",onInput:this.updateSignup,value:C.class},Object(d.h)("option",{value:""},"-- ",Object(d.h)(b.c,{id:"races.choose-class"},"Velg klasse")," --"),I.classes&&I.classes.map((function(t){return Object(d.h)(e,null,Object(d.h)("option",{value:t.id},t.title," - ",t.distance," km - Påmelding: ",t.signupfee||I.signupfee," NOK"))}))),Object(d.h)("small",{id:"classHelp",class:"form-text text-muted"},Object(d.h)(b.c,{id:"races.choose-class-help"},"Velg ønsket klasse."))),Object(d.h)("div",{class:"form-group form-check"},Object(d.h)("input",{type:"checkbox",class:"form-check-input",id:"termsAndAgreement",onInput:this.updateSignup,checked:C.termsAndAgreement,value:!0}),Object(d.h)("label",{class:"form-check-label",for:"termsAndAgreement"},Object(d.h)(b.c,{id:"races.agreement-accept"},"Jeg har lest og godtar reglene for løpet."))),Object(d.h)("button",{type:"button",class:"btn btn-primary",onClick:this.signupToRace},Object(d.h)(b.c,{id:"races.do-signup"},"Meld meg på"))))):Object(d.h)(e,null,P<new Date(I.signupStartDate)?Object(d.h)(e,null,Object(d.h)("h5",{class:"mt-4"},Object(d.h)("i",{class:"fas fa-exclamation-circle"})," ",Object(d.h)(b.c,{id:"races.signup-not-open-yet"},"Påmeldingen har ikke åpnet ennå!")),Object(d.h)("p",{class:"mt-4"},Object(d.h)(b.c,{id:"races.signup-opening"},"Påmeldingen åpner"),":",Object(d.h)("br",null),Object(d.h)("span",{class:"display-4"},h.a.formatDate(I.signupStartDate,{locale:"no-NB",hour12:!1,hour:"2-digit",minute:"2-digit"})))):Object(d.h)(e,null,Object(d.h)("h5",{class:"mt-4 mb-4"},Object(d.h)("i",{class:"fas fa-exclamation-circle"})," ",Object(d.h)(b.c,{id:"races.signup-closed"},"Påmeldingen er stengt!")))))),a&&Object(d.h)(e,null,Object(d.h)(j.a,{stores:this.props.stores,onCloseClick:this.toggleDrawer},Object(d.h)(v.a,{stores:this.props.stores,id:o.id}))))},s}(d.Component))||l;t.a=x}).call(this,s("hosL").Fragment)},jtG4:function(e,t,s){"use strict";(function(e){function n(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function a(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}var o,i=s("hosL"),r=(s("Utv1"),s("/eY4")),c=(s("Y3FI"),s("OhSV")),l=s("ZOvn"),d={requestSent:{},confirmed:{},deleted:{},submenu:"notfollowing"},h=Object(r.a)(o=function(t){function s(s){var o;return(o=t.call(this,s)||this).requestFollowTeam=function(e){return new Promise((function(t){var s=o.props.stores,n=s.teamStore,a=s.userStore.user,i=parseInt(e.target.parentElement.dataset.team||e.target.dataset.team,10);n.followRequest(i,a);var r=o.state.requestSent;return r[i]=!0,o.setState({requestSent:r}),t()}))},o.confirmRequest=function(e){return new Promise((function(t,s){var n,a,i,r,c,l,d,h,u;return a=void 0===(n=o.props.callback)?function(){}:n,i=e.target.closest("button").dataset,l=o.props.stores.teamStore,u=(d=o.state).deleted,(h=d.confirmed)[(r=i.team)+"-"+(c=i.user)]=!0,delete u[r+"-"+c],o.setState({confirmed:h,deleted:u}),Promise.resolve(l.confirmFollowRequest({team:parseInt(r,10),user:parseInt(c,10)})).then((function(){try{return a(),t()}catch(e){return s(e)}}),s)}))},o.deleteRequest=function(e){return new Promise((function(t,s){var n,a,i,r,c,l,d,h,u;return a=void 0===(n=o.props.callback)?function(){}:n,i=e.target.closest("button").dataset,l=o.props.stores.teamStore,u=(d=o.state).confirmed,(h=d.deleted)[(r=i.team)+"-"+(c=i.user)]=!0,delete u[r+"-"+c],o.setState({deleted:h,confirmed:u}),Promise.resolve(l.deleteFollowRequest({team:parseInt(r,10),user:parseInt(c,10)})).then((function(){try{return a(),t()}catch(e){return s(e)}}),s)}))},o.unFollowTeam=function(e){var t=o.props.stores,s=t.teamStore,n=parseInt(e.target.parentElement.dataset.team||e.target.dataset.team,10);s.unollowTeam(n),o.setState({unfollowed:!0})},o.getUnblockButton=function(t,s){var n=o.state.confirmed[s+"-"+t];return Object(i.h)(e,null,n?Object(i.h)(e,null,Object(i.h)("small",{class:"text-success"},Object(i.h)("i",{class:"fas fa-check"})," ",Object(i.h)(c.c,{id:"teams.connect.confirmed"},"Confirmed"))):Object(i.h)(e,null,Object(i.h)("button",{class:"btn btn-sm btn-block btn-success text-overflow mt-1",onClick:o.confirmRequest,"data-team":s,"data-user":t},Object(i.h)(c.c,{id:"teams.connect.confirm"},"Confirm"))))},o.getButton=function(t){var s=o.state.requestSent,n=o.props.stores.userStore.user,a=t.members&&t.members.indexOf(n.id)>-1,r=t.followers&&t.followers.indexOf(n.id)>-1,l=t.blockedFollowers&&t.blockedFollowers.indexOf(n.id)>-1,d=s[t.id]||t.followRequests&&t.followRequests.findIndex((function(e){return e.id===n.id}))>-1;return a?Object(i.h)("i",{class:"fas fa-home"}):t.public?r?Object(i.h)(e,null,Object(i.h)("button",{class:"btn btn-sm btn-block btn-outline-secondary float-right",onClick:o.unFollowTeam,disabled:"true","data-team":t.id},Object(i.h)("i",{class:"fas fa-link mr-2"}),Object(i.h)(c.c,{id:"teams.connect.is-following"},"Følger")),Object(i.h)("button",{class:"btn btn-sm btn-block btn-outline-danger float-right",onClick:o.unFollowTeam,disabled:"true","data-team":t.id},Object(i.h)(c.c,{id:"teams.connect.unfollow"},"Unfollow"))):l?Object(i.h)(e,null):d?Object(i.h)("button",{class:"btn btn-sm btn-block btn-outline-secondary float-right",disabled:"true"},Object(i.h)("i",{class:"fas fa-hourglass-half mr-2"}),Object(i.h)(c.c,{id:"teams.connect.has-requested"},"Venter på godkjenning")):Object(i.h)("button",{class:"btn btn-sm btn-block btn-outline-success float-right",onClick:o.requestFollowTeam,"data-team":t.id},Object(i.h)("i",{class:"far fa-hand-point-right mr-2"}),Object(i.h)(c.c,{id:"teams.connect.follow"},"Følg")):Object(i.h)(e,null,Object(i.h)("small",{class:"text-muted"},Object(i.h)(c.c,{id:"teams.not-public"},"Ikke offentlig")))},o.state=function(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?n(Object(s),!0).forEach((function(t){a(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):n(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}({},d),o.updateTimer={},o}var o,r;return r=t,(o=s).prototype=Object.create(r.prototype),o.prototype.constructor=o,o.__proto__=r,s.prototype.render=function(){var t,s,n,a,o=this.state,r=o.deleted,d=void 0===r?{}:r,h=o.unfollowed,u=this.props,b=u.team,p=u.isBlocked,m=u.myTeamId,f=u.showBlockButton,g=this.props.stores.storyStore.findPublicUser(b.user)||b.user||{};b.image&&b.image.s3SmallLink?t=b.image:b.images&&b.images[0]&&b.images[0].s3SmallLink?t=b.images[0]:g.image&&g.image.s3SmallLink?t=g.image:g.images&&g.images[0]&&g.images[0].s3SmallLink&&(t=g.images[0]),b&&b.name?(s=l.a.displayNameShort(b),n=l.a.displayName(b),a=l.a.displayName(g)):g&&g.id&&(s=l.a.displayNameShort(g),n=l.a.displayName(g));var O=d[m+"-"+g.id];return Object(i.h)("div",{class:"col-12 mb-2 pb-2 border-bottom",style:h?"text-decoration: line-through; opacity: 0.3;":""},Object(i.h)("div",{class:"d-flex position-relative"},Object(i.h)("div",{class:"text-center border rounded-circle imageRounded imageRoundedMedium",style:t?'background-image: url("'+t.s3MediumLink+'"); background-size: cover;':""},!t&&Object(i.h)("div",{class:"text-muted",style:"font-size: 20px; padding-top: 3px;"},s)),Object(i.h)("div",{class:"flex-grow-1 pl-3 text-overflow",style:"line-height: 1.2em;"},Object(i.h)("h5",{class:"mb-0"},b.public?Object(i.h)(e,null,Object(i.h)("a",{href:"/teams/public/"+b.uuidv4},n)):Object(i.h)(e,null,n)),Object(i.h)("div",null,b.place?b.place+", ":""," ",b.country,"  "),Object(i.h)("div",null,Object(i.h)("small",{class:"text-muted"},b&&b.dogs&&Object(i.h)("span",{class:""},Object(i.h)("i",{class:"fas fa-dog"})," ",b.dogs.length),b&&b.followers&&Object(i.h)("span",{class:"ml-2"},Object(i.h)("i",{class:"fas fa-user"})," ",b.followers.length),a&&Object(i.h)(e,null,Object(i.h)("small",{class:"ml-2 text-muted"},a)),f&&Object(i.h)(e,null,O?Object(i.h)(e,null,Object(i.h)("small",{class:"text-danger ml-3"},Object(i.h)("i",{class:"fas fa-ban"})," ",Object(i.h)(c.c,{id:"teams.connect.deleted"},"Deleted"))):Object(i.h)(e,null,Object(i.h)("button",{class:"btn btn-sm btn-link text-overflow p-0 text-muted ml-3",style:"font-size: 0.8em;",onClick:this.deleteRequest,"data-team":m,"data-user":g.id},Object(i.h)("i",{class:"fas fa-ban"})," ",Object(i.h)(c.c,{id:"teams.connect.block"},"Blokkere"))))))),Object(i.h)("div",null,p?Object(i.h)(e,null,this.getUnblockButton(g.id,m)):Object(i.h)(e,null,this.getButton(b)))))},s}(i.Component))||o;t.a=h}).call(this,s("hosL").Fragment)},n7ns:function(e,t,s){"use strict";(function(e){function n(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function a(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?n(Object(s),!0).forEach((function(t){o(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):n(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function o(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function i(e,t){var s=void 0!==e.bib;return(void 0!==t.bib)-s||!0===s&&e.bib-t.bib||0}var r,c=s("hosL"),l=s("Utv1"),d=s("/eY4"),h=s("OhSV"),u=(s("Y3FI"),s("fh8t")),b=s.n(u),p=s("go65"),m=s("ZOvn"),f=s("/DnB"),g=(s("s4FZ"),Object(d.a)(r=function(t){function s(e){var s;return(s=t.call(this,e)||this).toggleDisplayDetails=function(e){var t=e.target.closest("tr").dataset.id,n=s.props.stores.appState;n.editUserDetails[t]||n.toggleDisplayDetails(t)},s.adminToggleEditUser=function(e){return new Promise((function(t,n){function a(){return r.toggleEditUserDetails(o),t()}var o,i,r,c,l,d;return e.stopPropagation(),o=e.target.closest("tr").dataset.id,c=(i=s.props.stores).raceStore,l=i.adminStore,(r=i.appState).editUserDetails[o]?a.call(this):(d=c.getMusherById(o),Promise.resolve(l.getUserByEmail(d.email)).then(function(){try{return a.call(this)}catch(e){return n(e)}}.bind(this),n))}))},s.veterinaryToggleEditUser=function(e){e.stopPropagation();var t=e.target.closest("tr").dataset.id;s.props.stores.appState.toggleVeterinaryUserDetails(t,!0)},s.toggleAdminSendMessage=function(e){var t=e.target.closest("button").dataset.class,n=s.state.showAdminSendMessage;n[t]=!n[t],s.setState({showAdminSendMessage:n})},s.toggleAdminSendInboxMessage=function(e){var t=e.target.closest("button").dataset.class,n=s.state.showAdminSendInboxMessage,a=void 0===n?{}:n;a[t]=!a[t],s.setState({showAdminSendInboxMessage:a})},s.toggleAdminImport=function(e){var t=e.target.closest("button").dataset.class,n=s.state.showAdminImport;n[t]=!n[t],s.setState({showAdminImport:n})},s.adminSignupEdit=function(e){var t,n=s.props.race,a=(void 0===n?{}:n).id,o=s.props.stores.raceStore,i=e.target.id,r=e.target.value,c=e.target.dataset,d=((t={raceClassId:c.classid,contestantId:c.contestantid})["raceClassContestant"+l.a.ucfirst(i)]=r,t);clearTimeout(s.updateTimer[i]),s.updateTimer[i]=setTimeout((function(){return new Promise((function(e){return o.editClass({id:a,data:d}),e()}))}),500)},s.adminSignupSetValue=function(e){var t,n=s.props.race,a=(void 0===n?{}:n).id,o=s.props.stores.raceStore,i=e.target.dataset,r=i.field,c=i.value,d=((t={raceClassId:i.classid,contestantId:i.contestantid})["raceClassContestant"+l.a.ucfirst(r)]=c,t);clearTimeout(s.updateTimer[r]),s.updateTimer[r]=setTimeout((function(){return new Promise((function(e){return o.editClass({id:a,data:d}),e()}))}),5)},s.sendEmail=function(e){return new Promise((function(t,n){var a,o,i,r,c;return o=(void 0===(a=s.props.race)?{}:a).id,i=e.target.closest("button").dataset.to,r=e.target.closest("button").dataset.raceclassid,c=s.state.message,Promise.resolve(s.props.stores.appState.sendEmail({to:i,subject:c.subject,body:c.body,raceId:o,raceClassId:r})).then((function(e){try{return s.setState({emailResponse:e}),t()}catch(e){return n(e)}}),n)}))},s.resetEmail=function(){s.setState({emailResponse:null,message:{subject:"",body:""}})},s.sendInboxMessage=function(e){return new Promise((function(t,n){var a,o,i,r;return a=s.props.stores.raceStore,i=(void 0===(o=s.props.race)?{}:o).id,r=e.target.closest("button").dataset.raceclassid,Promise.resolve(a.sendInboxMessage({body:s.state.inboxMessage.body,raceId:i,raceClassId:r})).then((function(e){try{return s.setState({inboxMessageResponse:e}),t()}catch(e){return n(e)}}),n)}))},s.resetInboxMessage=function(){s.setState({inboxMessage:{body:""}})},s.signupToRace=function(e){return new Promise((function(t,n){var o,i;return o=e.signup,i=s.props.race,Promise.resolve(s.props.stores.raceStore.addContestant({id:(void 0===i?{}:i).id,classId:o.class,newContestant:a({},o)})).then((function(){try{return t()}catch(e){return n(e)}}),n)}))},s.parseInput=function(e,t){return new Promise((function(n){return clearTimeout(s.parseInputTimer),s.parseInputTimer=setTimeout((function(){return s.doParseInput(e,t)}),500),n()}))},s.doParseInput=function(e,t){return new Promise((function(n){var a=String(e).split("\n"),o=[],i=[],r=a[0];o=r.match(/\t/)?r.split("\t"):r.match(/;/)?r.split(";"):r.split(",");for(var c=function(e){var t=a[e],s=void 0;s=t.match(/\t/)?t.split("\t"):t.match(/;/)?t.split(";"):t.split(",");var n={};s.forEach((function(e,t){var s=e;"email"===o[t]&&(s=e.toLowerCase()),n[o[t]]=s})),i.push(n)},l=1,d=a.length;l<d;l+=1)c(l);var h=s.props.race;return s.props.stores.raceStore.addMultipleContestants({id:(void 0===h?{}:h).id,classId:t,contestants:i}),n(!0)}))},s.chooseSubmenu=function(e){e.stopPropagation(),s.setState({submenu:e.target.parentElement.dataset.menu||e.target.dataset.menu})},s.filterByClass=function(e){var t=e.target.closest("button").dataset.id;s.props.stores.appState.toggleSelectedClassId(t,!0)},s.clearSearchForBib=function(){s.setState({searchForBib:""})},s.savePreCheck=function(e){return new Promise((function(t,n){var o,i,r,c,d,h,u,b,p,m,f,g,O,j;return o=e.target.closest("button").dataset,h=(c=s.state).dogJournals,b=(u=s.props.stores).dogJournalStore,f={id:(m=void 0===(p=u.userStore.user)?{}:p).id,firstname:m.firstname,lastname:m.lastname,email:m.email,image:m.image},g={id:i=o.id,chipId:r=o.chipid,name:o.name,shortname:o.shortname,team:o.team},O=a({checkType:"preCheck"},l.a.getNestedValue(d=c.preCheck,i)||{}),j=[{dog:a({},g),journal:a({},O),veterinary:a({},f)}],h[r]||(h[r]=[]),h[r].push(a(a(a({date:new Date},g),O),f)),Promise.resolve(b.insert({data:j})).then((function(){try{return delete d[i],s.setState({preCheck:d}),t()}catch(e){return n(e)}}),n)}))},s.state={displayDetails:{},editUserDetails:{},showAdminSendMessage:{},showAdminImport:{},message:{},inboxMessage:{},submenu:"chiplists",preCheck:{},raceCheck:{},dogJournals:{}},s.inputRef={},s.updateTimer={},s.parseInputTimer=null,s}var n,o;return o=t,(n=s).prototype=Object.create(o.prototype),n.prototype.constructor=n,n.__proto__=o,s.prototype.render=function(){var t=this,s=this.state,n=s.showAdminSendMessage,a=void 0===n?{}:n,o=s.showAdminSendInboxMessage,r=void 0===o?{}:o,d=s.showAdminImport,u=void 0===d?{}:d,g=s.message,O=void 0===g?{}:g,j=s.inboxMessage,v=void 0===j?{}:j,y=s.inboxMessageResponse,w=s.emailResponse,x=s.submenu,k=s.searchForBib,S=s.preCheck,I=void 0===S?{}:S,C=s.dogJournals,T=void 0===C?{}:C,D=this.props.stores,P=D.userStore,R=D.raceStore,A=D.appState,z=D.adminStore,F=P.user,L=P.isAdmin,E=P.isVeterinary,U=(void 0===F?{}:F).language,M=void 0===U?"en":U,_=A.displayDetails,N=A.editUserDetails,B=A.veterinaryUserDetails,H=A.selectedClassIds,V=void 0===H?[]:H,q=this.props.race,K=void 0===q?{}:q,Y=function(e){if(k){var t=new RegExp(""+k.replace(/[^a-zA-Z 0-9æøåÆØÅ]/,""),"i");return t.test(e.bib)||t.test(e.firstname)||t.test(e.lastname)}return!0},W=z.user,Z=z.teams;return Object(c.h)(e,null,Object(c.h)("div",{class:"row"},Object(c.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-0 mb-2"},Object(c.h)("h2",{class:"mb-0"},Object(c.h)(h.c,{id:"races.mushers"},"Deltakere"))),Object(c.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-3 mb-2"},Object(c.h)("div",{class:"w-100 overflow-hidden"},Object(c.h)("div",{class:"d-flex flex-row flex-nowrap pb-2 px-1",style:"overflow: auto; scroll-snap-type: x mandatory;"},K.classes&&K.classes.sort((function(e,t){return e.distance-t.distance})).map((function(s,n){return Object(c.h)(e,null,Object(c.h)("div",{class:"col px-0 pt-2"},Object(c.h)("button",{type:"button",class:"btn btn-block "+(0===n&&"rounded-pill-left")+" "+(n===K.classes.length-1&&"rounded-pill-right")+" rounded-none "+(V.indexOf(s.id)>-1?"btn-primary":"btn-outline-primary")+" text-nowrap",style:"text-overflow: ellipsis; overflow: hidden;",onClick:t.filterByClass,"data-id":s.id},s.title)))})))),Object(c.h)("div",{class:"row mb-3"},Object(c.h)("div",{class:"col-6 offset-3"},Object(c.h)("div",{class:"input-group"},Object(c.h)("input",{class:"form-control form-control-lg",type:"text",placeholder:"Search for bib",value:k,onInput:Object(p.a)(this,"searchForBib")}),k&&Object(c.h)("div",{class:"input-group-append"},Object(c.h)("div",{class:"input-group-text",onClick:this.clearSearchForBib},"x"))))),K.classes&&K.classes.filter((function(e){return!(V.length>0)||V.indexOf(e.id)>-1})).sort((function(e,t){return e.distance-t.distance})).map((function(s){return Object(c.h)(e,null,L&&Object(c.h)("span",{class:"float-right"},"Total app users: ",s.contestants&&s.contestants.filter((function(e){return e.user||e.team})).length),Object(c.h)("h5",null,s.title," ",s.startDate&&Object(c.h)(e,null,": ",Object(c.h)("span",{class:"font-weight-lighter"},l.a.formatDate(s.startDate,{locale:M,hour12:!1,hour:"2-digit",minute:"2-digit"})," - ",l.a.formatDate(s.endDate,{locale:M,hour12:!1,hour:"2-digit",minute:"2-digit"})))),L&&Object(c.h)(e,null,Object(c.h)("a",{class:"mx-2",href:"/tv/top10/"+K.id+"/"+s.id},"TV Top 10")," -",Object(c.h)("a",{class:"mx-2",href:"/tv/top5/"+K.id+"/"+s.id},"TV Top 5")," -",Object(c.h)("a",{class:"mx-2",href:"/tv/top3/"+K.id+"/"+s.id},"TV Top 3")," -",Object(c.h)("a",{class:"mx-2",href:"/tv/top10progress/"+K.id+"/"+s.id},"TV Top Progress 10")," -",Object(c.h)("a",{class:"mx-2",href:"/tv/top5progress/"+K.id+"/"+s.id},"TV Top Progress 5")," -",Object(c.h)("a",{class:"mx-2",href:"/tv/top3progress/"+K.id+"/"+s.id},"TV Top Progress 3")," -",Object(c.h)("a",{class:"mx-2",href:"/tv/team/"+K.id+"/1"},"TV One team")," -",Object(c.h)("a",{class:"mx-2",href:"/tv/tracking/"+K.id+"/"+s.id},"TV tracking")," -",Object(c.h)("a",{class:"mx-2",href:"/tv/freetext"},"TV free text")," -",Object(c.h)("a",{class:"mx-2",href:"/embed/top10/"+K.id+"/"+s.id},"Embed top10")," -",Object(c.h)("a",{class:"mx-2",href:"/embed/tracking/"+K.id+"/"+s.id},"Embed tracking")," -",Object(c.h)("a",{class:"mx-2",href:"/embed/chiplist/"+K.id+"/"+s.id},"Embed chiplist")," -",Object(c.h)("a",{class:"mx-2",href:"/embed/agreement/"+K.id+"/"+s.id},"Embed agreement")," -"),Object(c.h)("div",{class:"table-responsive"},Object(c.h)("table",{class:"table table-sm table-striped"},Object(c.h)("thead",null,Object(c.h)("tr",null,Object(c.h)("th",{scope:"col"},"#"),Object(c.h)("th",{scope:"col",style:"min-width: 90%;"},Object(c.h)(h.c,{id:"races.name"},"Navn")))),Object(c.h)("tbody",null,s.contestants&&s.contestants.filter(Y).sort(i).map((function(n,a){var o=R.getTeamById(n.team),i=R.hasVaccines(o),r=n.mandatoryCheck;return Object(c.h)(e,null,Object(c.h)("tr",{onClick:t.toggleDisplayDetails,"data-id":n.id},Object(c.h)("th",{scope:"row"},n.bib?Object(c.h)(e,null,n.bib):Object(c.h)(e,null,Object(c.h)("span",{class:"font-weight-lighter text-muted"},a+1))),Object(c.h)("td",{class:_[n.id]?"font-weight-bold":"",style:_[n.id]||B[n.id]?"":"line-height: 0.8em;"},E&&Object(c.h)(e,null,n.team?Object(c.h)(e,null,Object(c.h)("button",{class:"btn btn-primary btn-sm float-right ml-4",onClick:t.veterinaryToggleEditUser},Object(c.h)("i",{class:"fas fa-user-md"}))):Object(c.h)(e,null,Object(c.h)("button",{class:"btn btn-outline-secondary btn-sm float-right ml-4 disabled",onClick:function(e){return e.stopPropagation()}},Object(c.h)("i",{class:"fas fa-user-md"}))),i?Object(c.h)(e,null,Object(c.h)("button",{class:"btn btn-success btn-sm float-right ml-1",onClick:function(e){return e.stopPropagation()}},Object(c.h)("i",{class:"fas fa-syringe"}))):Object(c.h)(e,null,Object(c.h)("button",{class:"btn btn-outline-secondary btn-sm float-right ml-1",onClick:function(e){return e.stopPropagation()}},Object(c.h)("i",{class:"fas fa-syringe"}))),r?Object(c.h)(e,null,Object(c.h)("button",{class:"btn btn-success btn-sm float-right ml-1",onClick:function(e){return e.stopPropagation()}},Object(c.h)("i",{class:"fas fa-stethoscope"}))):Object(c.h)(e,null,Object(c.h)("button",{class:"btn btn-outline-secondary btn-sm float-right ml-1",onClick:function(e){return e.stopPropagation()}},Object(c.h)("i",{class:"fas fa-stethoscope"})))),L&&Object(c.h)(e,null,Object(c.h)("button",{class:"btn btn-outline-warning btn-sm float-right ml-1",onClick:t.adminToggleEditUser},Object(c.h)("i",{class:"fas fa-user-edit"})),n.paidSignupfee&&Object(c.h)(e,null,Object(c.h)("span",{class:"float-right"},Object(c.h)("i",{class:"fas fa-check text-success"}),Object(c.h)("br",null))),Object(c.h)("small",{class:"float-right"},n.raceStatus&&Object(c.h)(e,null,Object(c.h)("span",{class:"text-muted"},"raceStatus:"),Object(c.h)("br",null)," ",n.raceStatus,Object(c.h)("br",null)),n.raceComment&&Object(c.h)(e,null,Object(c.h)("span",{class:"text-muted"},"raceComment:"),Object(c.h)("br",null)," ",n.raceComment,Object(c.h)("br",null)),n.gpxResultsApproved&&Object(c.h)(e,null,Object(c.h)("span",{class:"text-muted"},"gpxResultsApproved:"),Object(c.h)("br",null)," ",n.gpxResultsApproved,Object(c.h)("br",null)))),(L||E)&&K.liveRace>0&&K.declaration&&Object(c.h)(e,null,Object(c.h)("span",{class:"float-right text-success mr-2",style:"font-size: 1.2em;"},(n.user||n.team)&&Object(c.h)("i",{class:"fas fa-mobile-alt ml-2"}),n.declaration&&Object(c.h)("i",{class:"fas fa-handshake ml-2",alt:l.a.isoDate(n.declarationDate)}))),_[n.id]?Object(c.h)(e,null,n.flag&&Object(c.h)("span",{class:"mr-2"},n.flag),n.firstname?Object(c.h)(e,null,n.firstname," ",n.lastname,Object(c.h)("br",null)):Object(c.h)(e,null,n.name),Object(c.h)("span",{class:"text-muted"},o.name),Object(c.h)("br",null),Object(c.h)("small",{class:"text-muted"},n.sportsClub),Object(c.h)("br",null),n.facebook&&Object(c.h)("a",{class:"mr-2",href:m.a.asFacebookLink(n.facebook),native:!0,target:"_blank",rel:"noreferrer"},Object(c.h)("i",{class:"fab fa-facebook"})),n.instagram&&Object(c.h)("a",{class:"mr-2",href:m.a.asInstagramLink(n.instagram),native:!0,target:"_blank",rel:"noreferrer"},Object(c.h)("i",{class:"fab fa-instagram"})),Object(c.h)("br",null),L&&Object(c.h)(e,null,n.bib&&Object(c.h)(e,null,Object(c.h)("i",{class:"fas fa-tshirt ml-2"})," ",n.bib),n.startTime&&Object(c.h)(e,null,Object(c.h)("i",{class:"fas fa-clock ml-2"})," ",l.a.isoDate(n.startTime))),n.price1&&Object(c.h)("div",{class:"font-weight-lighter"},Object(c.h)("i",{class:"fas fa-trophy text-warning"})," ",n.price1,n.priceSent&&Object(c.h)(e,null,Object(c.h)("i",{class:"fas fa-check text-success"}))),n.price2&&Object(c.h)("div",{class:"font-weight-lighter"},Object(c.h)("i",{class:"fas fa-trophy text-warning"})," ",n.price2),n.price3&&Object(c.h)("div",{class:"font-weight-lighter"},Object(c.h)("i",{class:"fas fa-trophy text-warning"})," ",n.price3)):Object(c.h)(e,null,n.price1&&Object(c.h)("span",{class:"float-right text-warning",style:"font-size: 1.2em;"},Object(c.h)("i",{class:"fas fa-trophy"}),n.priceSent&&Object(c.h)(e,null,Object(c.h)("i",{class:"fas fa-check text-success"}))),Object(c.h)("nobr",null,n.flag&&Object(c.h)("span",{class:"mr-2"},n.flag),n.firstname?Object(c.h)(e,null,n.firstname," ",n.lastname,Object(c.h)("br",null)):Object(c.h)(e,null,n.name),Object(c.h)("small",{class:"text-muted"},n.sportsClub),Object(c.h)("br",null))),E&&B[n.id]&&Object(c.h)(e,null,Object(c.h)(f.a,{horizontal:"end",vertical:"center"}),Object(c.h)("div",{class:"w-100 overflow-hidden",style:"max-width: 100%;"},Object(c.h)("div",{class:"d-flex flex-row flex-nowrap pb-2 px-1",style:"overflow: auto; scroll-snap-type: x mandatory;"},Object(c.h)("div",{class:"col px-0 pt-2"},Object(c.h)("button",{class:"btn btn-sm btn-block rounded-pill-left rounded-none "+("chiplists"===x?"btn-primary":"btn-outline-primary")+" text-nowrap",style:"text-overflow: ellipsis; overflow: hidden;","data-menu":"chiplists",onClick:t.chooseSubmenu},Object(c.h)("i",{class:"fas fa-user-md"})," ",Object(c.h)(h.c,{id:"racevet.chiplists"},"Vaccines"))),Object(c.h)("div",{class:"col px-0 pt-2"},Object(c.h)("button",{class:"btn btn-sm btn-block rounded-none "+("precheck"===x?"btn-primary":"btn-outline-primary")+" text-nowrap",style:"text-overflow: ellipsis; overflow: hidden;","data-menu":"precheck",onClick:t.chooseSubmenu},Object(c.h)("i",{class:"fas fa-stethoscope"})," ",Object(c.h)(h.c,{id:"racevet.precheck"},"PreCheck"))),Object(c.h)("div",{class:"col px-0 pt-2"},Object(c.h)("button",{class:"btn btn-sm btn-block rounded-pill-right rounded-none "+("racecheck"===x?"btn-primary":"btn-outline-primary")+" text-nowrap",style:"text-overflow: ellipsis; overflow: hidden;","data-menu":"racecheck",onClick:t.chooseSubmenu},Object(c.h)("i",{class:"fas fa-flag-checkered"})," ",Object(c.h)(h.c,{id:"racevet.racecheck"},"RaceCheck"))))),"chiplists"===x&&Object(c.h)(e,null,Object(c.h)("h5",{class:"mt-4 border-bottom"},"Chiplist & Vaccines"),Object(c.h)("div",{class:"container-fluid"},Object(c.h)("div",{class:"row"},o&&o.dogs?o.dogs.map((function(t){var s;return o&&o.vaccines&&(s=o.vaccines.filter((function(e){return e.chipId===t.chipId}))),Object(c.h)(e,null,Object(c.h)("div",{class:"col-12 d-flex my-3"},Object(c.h)("div",{class:"mx-0 mr-1 px-0 position-relative pt-1"},Object(c.h)("div",{class:"text-center border rounded-circle imageRounded imageRoundedMedium text-muted pt-2",style:(t.image?'background-image: url("'+t.image.s3SmallLink+'"); background-size: cover;':"")+" border-width: 2px !important;"},!t.image&&Object(c.h)("span",{class:"font-weight-lighter",style:"font-size: 35px;"},l.a.ucfirst(t.name,!0))),Object(c.h)("small",null,Object(c.h)("span",{class:"float-left text-overflow",style:"width: 70px;"},t.name),Object(c.h)("br",null)),(t.birth||t.gender)&&Object(c.h)("small",null,Object(c.h)("small",{class:"font-weight-normal float-right position-absolute text-white bg-info p-1 rounded",style:"top: 0px; right: 0px; line-height: 0.8em;"},t.birth&&Object(c.h)("span",{class:"mr-1 text-white"},l.a.age(t.birth,t.deceased)),t.gender&&Object(c.h)(e,null,"female"===t.gender?Object(c.h)("i",{class:"fas fa-venus"}):Object(c.h)("i",{class:"fas fa-mars"}))))),Object(c.h)("div",{class:"flex-grow-1 row"},Object(c.h)("div",{class:"col-12 font-weight-bold"},Object(c.h)("i",{class:"fas fa-microchip text-muted"})," ",t.chipId),s&&s.map((function(t){return Object(c.h)("div",{class:"col-4 px-1 overflow-hidden"},Object(c.h)("span",{class:"badge badge-"+(t.inKarens?"warning":"success")},Object(c.h)("span",{class:"font-weight-lighter"},Object(c.h)("i",{class:"fas fa-calendar-check"})," ",l.a.isoDate(t.vaccineAgens.durationEnd,!1,!1,!0),t.inKarens&&Object(c.h)(e,null,Object(c.h)("br",null),"(",Object(c.h)(h.c,{id:"dogs.vaccine-karens"},"karens"),": ",l.a.format(t.karensDaysLeft,0)," ",Object(c.h)(h.c,{id:"dogs.vaccine-karens-days-left"},"days left"),")"))),Object(c.h)("div",{class:"text-overflow"},Object(c.h)("small",{class:"font-weight-light"},t.vaccineAgens.name,Object(c.h)("br",null),Object(c.h)("nobr",null,t.vaccineName),Object(c.h)("br",null))))})))))})):Object(c.h)(e,null,Object(c.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 px-0"},Object(c.h)("div",{class:"text-center text-muted"},Object(c.h)("div",{class:"display-1"},Object(c.h)("i",{class:"fas fa-dog"})),Object(c.h)("h3",null,Object(c.h)(h.c,{id:"teams.no-dogs-title"},"No dogs for this team!")))))))),"precheck"===x&&Object(c.h)(e,null,Object(c.h)("h5",{class:"mt-4 border-bottom"},"Precheck"),Object(c.h)("div",{class:"row"},o&&o.dogs?o.dogs.map((function(s){var n;return o&&o.journal&&(n=o.journal.filter((function(e){return e.chipId===s.chipId}))),Object(c.h)(e,null,Object(c.h)("div",{class:"col-12 d-flex my-3"},Object(c.h)("div",{class:"mx-0 mr-1 px-0 position-relative pt-1"},Object(c.h)("div",{class:"text-center border rounded-circle imageRounded imageRoundedMedium text-muted pt-2",style:(s.image?'background-image: url("'+s.image.s3SmallLink+'"); background-size: cover;':"")+" border-width: 2px !important;"},!s.image&&Object(c.h)("span",{class:"font-weight-lighter",style:"font-size: 35px;"},l.a.ucfirst(s.name,!0))),Object(c.h)("small",null,Object(c.h)("span",{class:"float-left text-overflow",style:"width: 70px;"},s.name),Object(c.h)("br",null)),(s.birth||s.gender)&&Object(c.h)("small",null,Object(c.h)("small",{class:"font-weight-normal float-right position-absolute text-white bg-info p-1 rounded",style:"top: 0px; right: 0px; line-height: 0.8em;"},s.birth&&Object(c.h)("span",{class:"mr-1 text-white"},l.a.age(s.birth,s.deceased)),s.gender&&Object(c.h)(e,null,"female"===s.gender?Object(c.h)("i",{class:"fas fa-venus"}):Object(c.h)("i",{class:"fas fa-mars"}))))),Object(c.h)("div",{class:"flex-grow-1 row"},Object(c.h)("div",{class:"col-12 font-weight-bold"},Object(c.h)("i",{class:"fas fa-microchip text-muted"})," ",s.chipId.slice(-5)),Object(c.h)("div",{class:"col-12"},n&&n.length>0&&n.map((function(t){return Object(c.h)(e,null,Object(c.h)("div",{class:"row border-bottom"},Object(c.h)("div",{class:"col-12 text-muted"},Object(c.h)("small",null,Object(c.h)("span",{class:"float-right"},t.checkType&&Object(c.h)(e,null,t.checkType)),l.a.isoDate(t.date)," by ",t.veterinaryFirstname," ",t.veterinaryLastname)),Object(c.h)("div",{class:"col-12 d-flex justify-content-between"},t.diagnoseId>0&&Object(c.h)("span",{class:"mx-1"},Object(c.h)("span",{class:"text-muted"},"ID:")," ",t.diagnoseId),t.heartRate>0&&Object(c.h)("span",{class:"mx-1"},Object(c.h)("span",{class:"text-muted"},"HR:")," ",t.heartRate),t.weight>0&&Object(c.h)("span",{class:"mx-1"},Object(c.h)("i",{class:"fas fa-balance-scale text-muted"})," ",t.weight," ",Object(c.h)("span",{class:"text-muted"},"kg")),t.bodyConditionScore>0&&Object(c.h)("span",{class:"mx-1"},Object(c.h)("span",{class:"text-muted"},"BCS:")," ",t.bodyConditionScore)),Object(c.h)("div",{class:"col-12"},t.generalFindings&&Object(c.h)("span",{class:"mr-1"},Object(c.h)("span",{class:"text-muted"},"Other:")," ",t.generalFindings))))})),T[s.chipId]&&T[s.chipId].length>0&&T[s.chipId].map((function(t){return Object(c.h)(e,null,Object(c.h)("div",{class:"row border-bottom"},Object(c.h)("div",{class:"col-12 text-muted"},Object(c.h)("small",null,Object(c.h)("span",{class:"float-right"},t.checkType&&Object(c.h)(e,null,t.checkType)),l.a.isoDate(t.date)," by ",t.veterinaryFirstname," ",t.veterinaryLastname)),Object(c.h)("div",{class:"col-12 d-flex justify-content-between"},t.diagnoseId>0&&Object(c.h)("span",{class:"mx-1"},Object(c.h)("span",{class:"text-muted"},"ID:")," ",t.diagnoseId),t.heartRate>0&&Object(c.h)("span",{class:"mx-1"},Object(c.h)("span",{class:"text-muted"},"HR:")," ",t.heartRate),t.weight>0&&Object(c.h)("span",{class:"mx-1"},Object(c.h)("i",{class:"fas fa-balance-scale text-muted"})," ",t.weight," ",Object(c.h)("span",{class:"text-muted"},"kg")),t.bodyConditionScore>0&&Object(c.h)("span",{class:"mx-1"},Object(c.h)("span",{class:"text-muted"},"BCS:")," ",t.bodyConditionScore)),Object(c.h)("div",{class:"col-12"},t.generalFindings&&Object(c.h)("span",{class:"mr-1"},Object(c.h)("span",{class:"text-muted"},"Other:")," ",t.generalFindings))))}))),Object(c.h)("div",{class:"col-12 form-group"},Object(c.h)("small",null,Object(c.h)("label",{class:"text-overflow w-100 mb-0",for:"diagnoseId"},"Diagnostic"),Object(c.h)("select",{class:"form-control",id:"diagnoseId",onInput:Object(p.a)(t,"preCheck."+s.id+".diagnoseId"),value:l.a.getNestedValue(I,s.id+".diagnoseId")},Object(c.h)("option",{value:""},"-- Please choose --"),Object(c.h)("option",{value:"100"},"No findings")))),Object(c.h)("div",{class:"col-4 form-group"},Object(c.h)("small",null,Object(c.h)("label",{class:"text-overflow w-100 mb-0",for:"weight"},"Weight"),Object(c.h)("input",{type:"number",class:"form-control",id:"weight",onInput:Object(p.a)(t,"preCheck."+s.id+".weight"),value:l.a.getNestedValue(I,s.id+".weight")}))),Object(c.h)("div",{class:"col-4 form-group overflow-hidden"},Object(c.h)("small",null,Object(c.h)("label",{class:"text-overflow w-100 mb-0",for:"heartRate"},"Heart Rate"),Object(c.h)("input",{type:"text",class:"form-control",id:"heartRate",onInput:Object(p.a)(t,"preCheck."+s.id+".heartRate"),value:l.a.getNestedValue(I,s.id+".heartRate")}))),Object(c.h)("div",{class:"col-4 form-group"},Object(c.h)("small",null,Object(c.h)("label",{class:"text-overflow w-100 mb-0",for:"bodyConditionScore"},"BCS"),Object(c.h)("input",{type:"number",class:"form-control",id:"bodyConditionScore",onInput:Object(p.a)(t,"preCheck."+s.id+".bodyConditionScore"),value:l.a.getNestedValue(I,s.id+".bodyConditionScore")}))),Object(c.h)("div",{class:"col-12 form-group"},Object(c.h)("small",null,Object(c.h)("label",{class:"text-overflow w-100 mb-0",for:"generalFindings"},"General findings"),Object(c.h)("input",{type:"text",class:"form-control",id:"generalFindings",onInput:Object(p.a)(t,"preCheck."+s.id+".generalFindings"),value:l.a.getNestedValue(I,s.id+".generalFindings")})),Object(c.h)("small",{id:"generalFindingsHelp",class:"form-text text-muted"},"Teeth, mucus membranes, general condition, other findings.")),Object(c.h)("div",{class:"col-12 form-group"},Object(c.h)("button",{class:"btn btn-outline-success",onClick:t.savePreCheck,"data-id":s.id,"data-chipid":s.chipId,"data-team":o.id,"data-name":s.name,"data-shortname":s.shortName}," Save Pre Check")))))})):Object(c.h)(e,null,Object(c.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 px-0"},Object(c.h)("div",{class:"text-center text-muted"},Object(c.h)("div",{class:"display-1"},Object(c.h)("i",{class:"fas fa-dog"})),Object(c.h)("h3",null,Object(c.h)(h.c,{id:"teams.no-dogs-title"},"No dogs for this team!"))))))),"racecheck"===x&&Object(c.h)(e,null,Object(c.h)("h5",{class:"mt-4 border-bottom"},"Racecheck"),Object(c.h)("div",{class:"row"},o&&o.dogs?o.dogs.map((function(t){return Object(c.h)(e,null,Object(c.h)("div",{class:"col-12 d-flex my-3"},Object(c.h)("div",{class:"mx-0 mr-1 px-0 position-relative pt-1"},Object(c.h)("div",{class:"text-center border rounded-circle imageRounded imageRoundedMedium text-muted pt-2",style:(t.image?'background-image: url("'+t.image.s3SmallLink+'"); background-size: cover;':"")+" border-width: 2px !important;"},!t.image&&Object(c.h)("span",{class:"font-weight-lighter",style:"font-size: 35px;"},l.a.ucfirst(t.name,!0))),Object(c.h)("small",null,Object(c.h)("span",{class:"float-left text-overflow",style:"width: 70px;"},t.name),Object(c.h)("br",null)),(t.birth||t.gender)&&Object(c.h)("small",null,Object(c.h)("small",{class:"font-weight-normal float-right position-absolute text-white bg-info p-1 rounded",style:"top: 0px; right: 0px; line-height: 0.8em;"},t.birth&&Object(c.h)("span",{class:"mr-1 text-white"},l.a.age(t.birth,t.deceased)),t.gender&&Object(c.h)(e,null,"female"===t.gender?Object(c.h)("i",{class:"fas fa-venus"}):Object(c.h)("i",{class:"fas fa-mars"}))))),Object(c.h)("div",{class:"flex-grow-1 row"},Object(c.h)("div",{class:"col-12 font-weight-bold"},Object(c.h)("i",{class:"fas fa-microchip text-muted"})," ",t.chipId.slice(-5)),Object(c.h)("div",{class:"col-4 form-group"},Object(c.h)("small",null,Object(c.h)("label",{class:"text-overflow w-100",for:"weight"},"Weight"),Object(c.h)("input",{type:"number",class:"form-control",id:"weight"}))),Object(c.h)("div",{class:"col-4 form-group overflow-hidden"},Object(c.h)("small",null,Object(c.h)("label",{class:"text-overflow w-100",for:"hrHeartLungs"},"HR/Heart/Lungs"),Object(c.h)("input",{type:"text",class:"form-control",id:"hrHeartLungs"}))),Object(c.h)("div",{class:"col-4 form-group"},Object(c.h)("small",null,Object(c.h)("label",{class:"text-overflow w-100",for:"bcs"},"BCS"),Object(c.h)("input",{type:"number",class:"form-control",id:"bcs"}))),Object(c.h)("div",{class:"col-12 form-group"},Object(c.h)("small",null,Object(c.h)("label",{class:"text-overflow w-100",for:"general"},"General findings"),Object(c.h)("input",{type:"text",class:"form-control",id:"general"})),Object(c.h)("small",{id:"generalHelp",class:"form-text text-muted"},"Teeth, mucus membranes, general condition, other findings.")))))})):Object(c.h)(e,null,Object(c.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 px-0"},Object(c.h)("div",{class:"text-center text-muted"},Object(c.h)("div",{class:"display-1"},Object(c.h)("i",{class:"fas fa-dog"})),Object(c.h)("h3",null,Object(c.h)(h.c,{id:"teams.no-dogs-title"},"No dogs for this team!")))))))),L&&N[n.id]&&Object(c.h)(e,null,Object(c.h)("h5",null,"Admin edit:"),Object(c.h)("div",{class:"form-group row my-0"},Object(c.h)("label",{class:"col-4 col-form-label text-right"},"Email"),Object(c.h)("div",{class:"col-8"},n.email)),Object(c.h)("div",{class:"form-group row my-0"},Object(c.h)("label",{for:"bib",class:"col-4 col-form-label text-right"},"bib"),Object(c.h)("div",{class:"col-8"},Object(c.h)("input",{type:"number",class:"form-control",id:"bib","data-classid":s.id,"data-contestantid":n.id,onInput:t.adminSignupEdit,value:n.bib}))),Object(c.h)("div",{class:"form-group row my-0"},Object(c.h)("label",{for:"startTime",class:"col-4 col-form-label text-right"},"startTime"),Object(c.h)("div",{class:"col-8"},Object(c.h)("input",{type:"datetime-local",class:"form-control",id:"startTime","data-classid":s.id,"data-contestantid":n.id,onInput:t.adminSignupEdit,value:l.a.isoDate(n.startTime?n.startTime:s.startDate,!1,!1,!1)}))),Object(c.h)("div",{class:"form-group row my-0"},Object(c.h)("label",{for:"team",class:"col-4 col-form-label text-right"},"team"),Object(c.h)("div",{class:"col-8"},Z?Object(c.h)(e,null,Object(c.h)("select",{class:"form-control",id:"team","data-classid":s.id,"data-contestantid":n.id,onInput:t.adminSignupEdit,value:n.team},Object(c.h)("option",{value:""},"-- Choose race team --"),Z&&Z.map((function(t){return Object(c.h)(e,null,Object(c.h)("option",{value:t.id},t.name," ",t.dogs?"("+t.dogs.length+")":""))})))):Object(c.h)(e,null,Object(c.h)("input",{type:"number",class:"form-control",id:"team","data-classid":s.id,"data-contestantid":n.id,onInput:t.adminSignupEdit,value:n.team})))),Object(c.h)("div",{class:"form-group row my-0"},Object(c.h)("label",{for:"user",class:"col-4 col-form-label text-right"},"user"),Object(c.h)("div",{class:"col-8"},Object(c.h)("input",{type:"number",class:"form-control",id:"user","data-classid":s.id,"data-contestantid":n.id,onInput:t.adminSignupEdit,value:n.user}))),Object(c.h)("div",{class:"form-group row my-0"},Object(c.h)("label",{for:"team",class:"col-4 col-form-label text-right"},"Race status"),Object(c.h)("div",{class:"col-8"},Object(c.h)("select",{class:"form-control",id:"raceStatus","data-classid":s.id,"data-contestantid":n.id,onInput:t.adminSignupEdit,value:n.raceStatus},Object(c.h)("option",{value:""},"-- Choose race status --"),Object(c.h)("option",{value:"OK"},"OK - Everything ok"),Object(c.h)("option",{value:"DNS"},"DNS - Did Not Start"),Object(c.h)("option",{value:"DNF"},"DNF - Did Not Finish"),Object(c.h)("option",{value:"DNQ"},"DNQ - Did not qualify"),Object(c.h)("option",{value:"DQ"},"DQ - Disqualified")))),Object(c.h)("div",{class:"form-group row my-0"},Object(c.h)("label",{for:"raceComment",class:"col-4 col-form-label text-right"},"Race comment"),Object(c.h)("div",{class:"col-8"},Object(c.h)("input",{type:"text",class:"form-control",id:"raceComment","data-classid":s.id,"data-contestantid":n.id,onInput:t.adminSignupEdit,value:n.raceComment}))),Object(c.h)("div",{class:"form-group row my-0"},Object(c.h)("label",{for:"gpxResultsApproved",class:"col-4 col-form-label text-right"},"GPX Results approved (date)"),Object(c.h)("div",{class:"col-8"},Object(c.h)("input",{type:"date",class:"form-control",id:"gpxResultsApproved","data-classid":s.id,"data-contestantid":n.id,onInput:t.adminSignupEdit,value:n.gpxResultsApproved?l.a.isoDate(n.gpxResultsApproved,!1,!1,!0):null}))),Object(c.h)("div",{class:"form-group row my-0"},Object(c.h)("label",{for:"paidSignupfee",class:"col-4 col-form-label text-right"},"paidSignupfee (date)"),Object(c.h)("div",{class:"col-8"},Object(c.h)("input",{type:"date",class:"form-control",id:"paidSignupfee","data-classid":s.id,"data-contestantid":n.id,onInput:t.adminSignupEdit,value:n.paidSignupfee?l.a.isoDate(n.paidSignupfee,!1,!1,!0):null}))),Object(c.h)("div",{class:"form-group row my-0"},Object(c.h)("label",{for:"startOrder",class:"col-4 col-form-label text-right"},"startOrder"),Object(c.h)("div",{class:"col-8"},Object(c.h)("input",{type:"number",class:"form-control",id:"startOrder","data-classid":s.id,"data-contestantid":n.id,onInput:t.adminSignupEdit,value:n.startOrder}))),Object(c.h)("div",{class:"form-group row my-0"},Object(c.h)("label",{for:"cellphone",class:"col-4 col-form-label text-right"},"Mobil"),Object(c.h)("div",{class:"col-8"},Object(c.h)("input",{type:"text",class:"form-control",id:"cellphone","data-classid":s.id,"data-contestantid":n.id,onInput:t.adminSignupEdit,value:n.cellphone}),W.cellphone&&Object(c.h)("small",{id:"cellphoneHelp",class:"form-text text-muted","data-field":"cellphone","data-value":W.cellphone,"data-classid":s.id,"data-contestantid":n.id,onClick:t.adminSignupSetValue},W.cellphone||""))),Object(c.h)("div",{class:"form-group row my-0"},Object(c.h)("label",{for:"name",class:"col-4 col-form-label text-right"},"Navn"),Object(c.h)("div",{class:"col-8"},Object(c.h)("input",{type:"text",class:"form-control",id:"name","data-classid":s.id,"data-contestantid":n.id,onInput:t.adminSignupEdit,value:n.name}))),Object(c.h)("div",{class:"form-group row my-0"},Object(c.h)("label",{for:"firstname",class:"col-4 col-form-label text-right"},"Fornavn"),Object(c.h)("div",{class:"col-8"},Object(c.h)("input",{type:"text",class:"form-control",id:"firstname","data-classid":s.id,"data-contestantid":n.id,onInput:t.adminSignupEdit,value:n.firstname}),W.firstname&&Object(c.h)("small",{id:"firstnameHelp",class:"form-text text-muted","data-field":"firstname","data-value":W.firstname,"data-classid":s.id,"data-contestantid":n.id,onClick:t.adminSignupSetValue},W.firstname||""))),Object(c.h)("div",{class:"form-group row my-0"},Object(c.h)("label",{for:"lastname",class:"col-4 col-form-label text-right"},"Etternavn"),Object(c.h)("div",{class:"col-8"},Object(c.h)("input",{type:"text",class:"form-control",id:"lastname","data-classid":s.id,"data-contestantid":n.id,onInput:t.adminSignupEdit,value:n.lastname}),W.lastname&&Object(c.h)("small",{id:"lastnameHelp",class:"form-text text-muted","data-field":"lastname","data-value":W.lastname,"data-classid":s.id,"data-contestantid":n.id,onClick:t.adminSignupSetValue},W.lastname||""))),Object(c.h)("div",{class:"form-group row my-0"},Object(c.h)("label",{for:"address",class:"col-4 col-form-label text-right"},"Adresse"),Object(c.h)("div",{class:"col-8"},Object(c.h)("input",{type:"text",class:"form-control",id:"address","data-classid":s.id,"data-contestantid":n.id,onInput:t.adminSignupEdit,value:n.address}))),Object(c.h)("div",{class:"form-group row my-0"},Object(c.h)("label",{for:"postalcode",class:"col-4 col-form-label text-right"},"Postalcode"),Object(c.h)("div",{class:"col-8"},Object(c.h)("input",{type:"text",class:"form-control",id:"postalcode","data-classid":s.id,"data-contestantid":n.id,onInput:t.adminSignupEdit,value:n.postalcode}),W.postalcode&&Object(c.h)("small",{id:"postalcodeHelp",class:"form-text text-muted","data-field":"postalcode","data-value":W.postalcode,"data-classid":s.id,"data-contestantid":n.id,onClick:t.adminSignupSetValue},W.postalcode||""))),Object(c.h)("div",{class:"form-group row my-0"},Object(c.h)("label",{for:"postalplace",class:"col-4 col-form-label text-right"},"Postalplace"),Object(c.h)("div",{class:"col-8"},Object(c.h)("input",{type:"text",class:"form-control",id:"postalplace","data-classid":s.id,"data-contestantid":n.id,onInput:t.adminSignupEdit,value:n.postalplace}),W.postalplace&&Object(c.h)("small",{id:"postalplaceHelp",class:"form-text text-muted","data-field":"postalplace","data-value":W.postalplace,"data-classid":s.id,"data-contestantid":n.id,onClick:t.adminSignupSetValue},W.postalplace||""))),Object(c.h)("div",{class:"form-group row my-0"},Object(c.h)("label",{for:"flag",class:"col-4 col-form-label text-right"},"flag (emoji)"),Object(c.h)("div",{class:"col-8"},Object(c.h)("input",{type:"text",class:"form-control",id:"flag","data-classid":s.id,"data-contestantid":n.id,onInput:t.adminSignupEdit,value:n.flag}),W.flag&&Object(c.h)("small",{id:"flagHelp",class:"form-text text-muted","data-field":"flag","data-value":W.flag,"data-classid":s.id,"data-contestantid":n.id,onClick:t.adminSignupSetValue},W.flag||""))),Object(c.h)("div",{class:"form-group row my-0"},Object(c.h)("label",{for:"countryCode",class:"col-4 col-form-label text-right"},"countryCode (iso)"),Object(c.h)("div",{class:"col-8"},Object(c.h)("input",{type:"text",class:"form-control",id:"countryCode","data-classid":s.id,"data-contestantid":n.id,onInput:t.adminSignupEdit,value:n.countryCode}))),Object(c.h)("div",{class:"form-group row my-0"},Object(c.h)("label",{for:"birthdate",class:"col-4 col-form-label text-right"},"birthdate"),Object(c.h)("div",{class:"col-8"},Object(c.h)("input",{type:"date",class:"form-control",id:"birthdate","data-classid":s.id,"data-contestantid":n.id,onInput:t.adminSignupEdit,value:n.birthdate?l.a.isoDate(n.birthdate,!1,!1,!0):null}))),Object(c.h)("div",{class:"form-group row my-0"},Object(c.h)("label",{for:"sportsClub",class:"col-4 col-form-label text-right"},"Klubb"),Object(c.h)("div",{class:"col-8"},Object(c.h)("input",{type:"text",class:"form-control",id:"sportsClub","data-classid":s.id,"data-contestantid":n.id,onInput:t.adminSignupEdit,value:n.sportsClub}),W.sportsClub&&Object(c.h)("small",{id:"sportsClubHelp",class:"form-text text-muted","data-field":"sportsClub","data-value":W.sportsClub,"data-classid":s.id,"data-contestantid":n.id,onClick:t.adminSignupSetValue},W.sportsClub||""))),Object(c.h)("div",{class:"form-group row my-0"},Object(c.h)("label",{for:"status",class:"col-4 col-form-label text-right"},"Status"),Object(c.h)("div",{class:"col-8"},Object(c.h)("input",{type:"text",class:"form-control",id:"status","data-classid":s.id,"data-contestantid":n.id,onInput:t.adminSignupEdit,value:n.status}))),Object(c.h)("div",{class:"form-group row my-0"},Object(c.h)("label",{for:"facebook",class:"col-4 col-form-label text-right"},"Facebook"),Object(c.h)("div",{class:"col-8"},Object(c.h)("input",{type:"text",class:"form-control",id:"facebook","data-classid":s.id,"data-contestantid":n.id,onInput:t.adminSignupEdit,value:n.facebook}),W.facebook&&Object(c.h)("small",{id:"facebookHelp",class:"form-text text-muted","data-field":"facebook","data-value":W.facebook,"data-classid":s.id,"data-contestantid":n.id,onClick:t.adminSignupSetValue},W.facebook||""))),Object(c.h)("div",{class:"form-group row my-0"},Object(c.h)("label",{for:"instagram",class:"col-4 col-form-label text-right"},"Instagram"),Object(c.h)("div",{class:"col-8"},Object(c.h)("input",{type:"text",class:"form-control",id:"instagram","data-classid":s.id,"data-contestantid":n.id,onInput:t.adminSignupEdit,value:n.instagram}),W.instagram&&Object(c.h)("small",{id:"instagramHelp",class:"form-text text-muted","data-field":"instagram","data-value":W.instagram,"data-classid":s.id,"data-contestantid":n.id,onClick:t.adminSignupSetValue},W.instagram||""))),Object(c.h)("div",{class:"form-group row my-0"},Object(c.h)("label",{for:"team",class:"col-4 col-form-label text-right"},"Klasse"),Object(c.h)("div",{class:"col-8"},Object(c.h)("select",{class:"form-control",id:"class","aria-describedby":"classHelp","data-classid":s.id,"data-contestantid":n.id,onInput:t.adminSignupEdit,value:n.class},Object(c.h)("option",{value:""},"-- Choose race class --"),K.classes&&K.classes.sort((function(e,t){return e.distance-t.distance})).map((function(t){return Object(c.h)(e,null,Object(c.h)("option",{value:t.id},t.title," - ",t.distance," km - Påmelding: ",t.signupfee||K.signupfee," NOK"))}))))),Object(c.h)("div",{class:"form-group row my-0"},Object(c.h)("label",{for:"price1",class:"col-4 col-form-label text-right"},"Price 1"),Object(c.h)("div",{class:"col-8"},Object(c.h)("input",{type:"text",class:"form-control",id:"price1","data-classid":s.id,"data-contestantid":n.id,onInput:t.adminSignupEdit,value:n.price1}))),Object(c.h)("div",{class:"form-group row my-0"},Object(c.h)("label",{for:"price2",class:"col-4 col-form-label text-right"},"Price 2"),Object(c.h)("div",{class:"col-8"},Object(c.h)("input",{type:"text",class:"form-control",id:"price2","data-classid":s.id,"data-contestantid":n.id,onInput:t.adminSignupEdit,value:n.price2}))),Object(c.h)("div",{class:"form-group row my-0"},Object(c.h)("label",{for:"price3",class:"col-4 col-form-label text-right"},"Price 3"),Object(c.h)("div",{class:"col-8"},Object(c.h)("input",{type:"text",class:"form-control",id:"price3","data-classid":s.id,"data-contestantid":n.id,onInput:t.adminSignupEdit,value:n.price3}))),Object(c.h)("div",{class:"form-group row my-0"},Object(c.h)("label",{for:"priceSent",class:"col-4 col-form-label text-right"},"Price sent"),Object(c.h)("div",{class:"col-8"},Object(c.h)("input",{type:"date",class:"form-control",id:"priceSent","data-classid":s.id,"data-contestantid":n.id,onInput:t.adminSignupEdit,value:n.priceSent?l.a.isoDate(n.priceSent,!1,!1,!0):null}))),Object(c.h)("div",{class:"form-group row my-5"},Object(c.h)("div",{class:"col-8"},Object(c.h)("button",{type:"button",class:"btn btn-danger float-right",id:"deleteUser",value:"1",onClick:t.adminSignupEdit,"data-classid":s.id,"data-contestantid":n.id},"Delete user from this class")))))))}))))),L&&Object(c.h)(e,null,a[s.id]?Object(c.h)(e,null,Object(c.h)("div",{class:"container"},Object(c.h)("div",{class:"row"},Object(c.h)("div",{class:"col-12"},Object(c.h)("h5",null,"Email to all mushers in ",s.title),Object(c.h)("div",{class:"overflow-auto p-5",style:"max-height: 30vh;"},Object(c.h)("small",null,s.emails&&s.emails.map((function(e){return Object(c.h)("div",{class:"border rounded-lg p-3 mb-3"},Object(c.h)("div",{class:"row bg-light"},Object(c.h)("div",{class:"col-3 text-right"},"Date:"),Object(c.h)("div",{class:"col-9"},l.a.formatDate(e.date,{locale:M,hour12:!1,hour:"2-digit",minute:"2-digit"}))),Object(c.h)("div",{class:"row bg-light"},Object(c.h)("div",{class:"col-3 text-right"},"To:"),Object(c.h)("div",{class:"col-9"},e.to.map((function(e){return Object(c.h)("span",{class:"badge badge-info px-2 py-1 mr-2"},e)})))),Object(c.h)("div",{class:"row bg-light"},Object(c.h)("div",{class:"col-3 text-right"},"Subject:"),Object(c.h)("div",{class:"col-9"},e.subject)),Object(c.h)("div",{class:"row mt-2"},Object(c.h)("div",{class:"col-3 text-right"},"Body:"),Object(c.h)("div",{class:"col-9",dangerouslySetInnerHTML:{__html:(t=e.body,"string"==typeof t?t.replace(/[\n]/g,"<br>"):t)}})));var t})))),Object(c.h)("div",{class:"form-group row"},Object(c.h)("label",{for:"subject",class:"col-2 col-form-label text-right font-weight-lighter"},"To"),Object(c.h)("div",{class:"col-10"},s.contestants&&s.contestants.map((function(t){return Object(c.h)(e,null,Object(c.h)("span",{class:"badge badge-info px-2 py-1 mr-2"},t.firstname," ",t.lastname," (",t.email,")"))})))),Object(c.h)("div",{class:"form-group row"},Object(c.h)("label",{for:"subject",class:"col-2 col-form-label text-right font-weight-lighter"},"Subject"),Object(c.h)("div",{class:"col-10"},Object(c.h)("input",{type:"text",class:"form-control",id:"subject",onInput:Object(p.a)(t,"message.subject"),value:O.subject}))),Object(c.h)("div",{class:"form-group row"},Object(c.h)("label",{for:"body",class:"col-2 col-form-label text-right font-weight-lighter"},"Message"),Object(c.h)("div",{class:"col-10"},Object(c.h)("textarea",{type:"text",class:"form-control",id:"body",rows:"10",onInput:Object(p.a)(t,"message.body"),value:O.body})),Object(c.h)("div",{class:"col-5 contain-images"},O.body&&Object(c.h)(b.a,{markdown:O.body,markdownOpts:m.a.getMarkdownOptions()}))),w&&Object(c.h)(e,null,Object(c.h)("div",{class:"alert alert-"+(w&&w.status>=300?"danger":"success"),role:"alert"},Object(c.h)("small",null,Object(c.h)("xmp",null,JSON.stringify(w,null,4))))),Object(c.h)("button",{class:"btn btn-success float-right",type:"button","data-to":s.contestants&&s.contestants.map((function(e){return e.email})),"data-raceclassid":s.id,onClick:t.sendEmail},Object(c.h)("i",{class:"fas fa-paper-plane"})," Send email to all mushers"),Object(c.h)("button",{class:"btn btn-danger float-right mr-2",type:"button",onClick:t.resetEmail},Object(c.h)("i",{class:"fas fa-times"})," Reset email")),Object(c.h)("div",{class:"col-12 text-center"},Object(c.h)("button",{class:"btn btn-sm btn-link",type:"button",onClick:t.toggleAdminSendMessage,"data-class":s.id},"Hide email form"))))):Object(c.h)(e,null,Object(c.h)("div",{class:"col-12 text-center"},Object(c.h)("button",{class:"btn btn-sm btn-link",type:"button",onClick:t.toggleAdminSendMessage,"data-class":s.id},"Send email to all in this class")),Object(c.h)("div",{class:"col-12 text-center"},Object(c.h)("button",{class:"btn btn-sm btn-link",type:"button",onClick:t.toggleAdminSendInboxMessage,"data-class":s.id},"Send inbox message to all in this class")),Object(c.h)("div",{class:"col-12 text-center"},Object(c.h)("button",{class:"btn btn-sm btn-link",type:"button",onClick:t.toggleAdminImport,"data-class":s.id},"Toggle import form"))),r[s.id]?Object(c.h)(e,null,Object(c.h)("div",{class:"container"},Object(c.h)("div",{class:"row"},Object(c.h)("div",{class:"col-12"},Object(c.h)("h5",null,"Inbox Message to all mushers in ",s.title),Object(c.h)("div",{class:"form-group row"},Object(c.h)("label",{for:"body",class:"col-2 col-form-label text-right font-weight-lighter"},"Inbox message"),Object(c.h)("div",{class:"col-10"},Object(c.h)("textarea",{type:"text",class:"form-control",id:"body",rows:"10",onInput:Object(p.a)(t,"inboxMessage.body"),value:v.body})),Object(c.h)("div",{class:"col-5 contain-images"},v.body&&Object(c.h)(b.a,{markdown:v.body,markdownOpts:m.a.getMarkdownOptions()}))),Object(c.h)("div",{class:"clearfix"},Object(c.h)("button",{class:"btn btn-success float-right",type:"button","data-raceclassid":s.id,onClick:t.sendInboxMessage},Object(c.h)("i",{class:"fas fa-paper-plane"})," Send inbox message to all mushers"),Object(c.h)("button",{class:"btn btn-danger float-right mr-2",type:"button",onClick:t.resetInboxMessage},Object(c.h)("i",{class:"fas fa-times"})," Reset inbox message")),y&&Object(c.h)(e,null,Object(c.h)("div",{class:"alert alert-"+(y&&y.status>=300?"danger":"success"),role:"alert",style:"max-height: 20vh;"},Object(c.h)("small",null,Object(c.h)("xmp",null,JSON.stringify(y,null,4)))))),Object(c.h)("div",{class:"col-12 text-center"},Object(c.h)("button",{class:"btn btn-sm btn-link",type:"button",onClick:t.toggleAdminSendInboxMessage,"data-class":s.id},"Hide inboxmessage form"))))):Object(c.h)(e,null),L&&u[s.id]&&Object(c.h)(e,null,Object(c.h)("div",{class:"form-group"},Object(c.h)("label",{for:"importUsers"},Object(c.h)(h.c,{id:"races.paste-users"},"Paste your user data here to import users"),":"),Object(c.h)("textarea",{class:"form-control",id:"importUsers",rows:"20",oninput:function(e){return t.parseInput(e.target.value,s.id)}})))))})))))},s}(c.Component))||r);t.a=g}).call(this,s("hosL").Fragment)},om2D:function(e,t,s){"use strict";var n,a=s("hosL"),o=s("/eY4"),i=(s("cneo"),s("Utv1"),s("u2zT")),r=Object(o.a)(n=function(e){function t(t){var s;return(s=e.call(this,t)||this).handleAddImage=function(e){var t=s.props.addToImages,n=void 0===t||t,a=s.props,o=a.updateField,i=a.object,r=a.field;if(r&&o({id:i.id,field:r,value:e,skipTimer:!0}),n){var c=[];c.push(e),o({id:i.id,field:"images",value:c,skipTimer:!0})}},s.state={files:[]},s}var s,n;return n=e,(s=t).prototype=Object.create(n.prototype),s.prototype.constructor=s,s.__proto__=n,t.prototype.render=function(){var e=this.props,t=e.uploadStatus,s=void 0===t?function(){}:t,n=e.before,o=void 0===n?function(){}:n,r=e.after,c=void 0===r?function(){}:r,l=e.autoOpen,d=void 0===l||l;return Object(a.h)("div",{class:"row"},Object(a.h)("div",{class:"col-12"},Object(a.h)(i.a,{handleAddImage:this.handleAddImage,uploadStatus:s,apiUrl:"/api/fileupload",before:o,after:c,autoOpen:d},Object(a.h)("div",{style:{height:30,width:"100%"}}))))},t}(a.Component))||n;t.a=r},"q/oJ":function(e,t,s){"use strict";var n,a=s("hosL"),o=(s("Utv1"),s("/eY4")),i=(s("OhSV"),s("ZOvn")),r=i.a.marginTop(!1),c=i.a.marginBottom(),l=Object(o.a)(n=function(e){function t(){return e.apply(this,arguments)||this}var s,n;return n=e,(s=t).prototype=Object.create(n.prototype),s.prototype.constructor=s,s.__proto__=n,t.prototype.render=function(){var e=this.props.children;return Object(a.h)("div",{class:"w-100 h-100 fixed-top bg-light skipRefresh",style:"\n                    margin-bottom: "+c+";\n                    margin-top: "+r+";\n                    height: calc(100vh - "+r+") !important;\n                    top: 0;\n                    left: 0;\n                    overflow-x: auto;\n                    overflow-y: auto;\n                    transition: .3s;\n                    overscroll-behavior: contain;\n                    z-index: 10000;\n                "},e)},t}(a.Component))||n;t.a=l},rWES:function(e,t,s){"use strict";(function(e){function n(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function a(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}var o,i=s("hosL"),r=s("Utv1"),c=s("/eY4"),l=s("OhSV"),d=s("ZOvn"),h=(s("eQ6k"),{confirmed:{},deleted:{}}),u=Object(c.a)(o=function(t){function s(e){var s;return(s=t.call(this,e)||this).confirmRequest=function(e){var t=e.target.closest("button").dataset,n=t.team,a=t.user,o=t.follow,i=s.props.stores.teamStore;i.confirmFollowRequest({team:parseInt(n,10),user:parseInt(a,10)});var r=s.state.confirmed;r[n+"-"+a]=!0,s.setState({confirmed:r}),o&&i.followRequestUser(a)},s.deleteRequest=function(e){var t=e.target.closest("button").dataset,n=t.team,a=t.user;s.props.stores.teamStore.deleteFollowRequest({team:parseInt(n,10),user:parseInt(a,10)});var o=s.state.deleted;o[n+"-"+a]=!0,s.setState({deleted:o})},s.state=function(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?n(Object(s),!0).forEach((function(t){a(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):n(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}({},h),s}var o,c;c=t,(o=s).prototype=Object.create(c.prototype),o.prototype.constructor=o,o.__proto__=c;var u=s.prototype;return u.loadTeams=function(){return new Promise(function(e,t){return Promise.resolve(this.props.stores.teamStore.load({query:{},addData:["followRequests"]})).then((function(){try{return e()}catch(e){return t(e)}}),t)}.bind(this))},u.componentDidMount=function(){this.loadTeams()},u.render=function(){var t=this,s=this.state,n=s.deleted,a=void 0===n?{}:n,o=s.confirmed,c=void 0===o?{}:o,h=this.props.stores,u=h.teamStore,b=u.teams,p=u.followRequests,m=void 0===p?[]:p,f=h.appState.darkmode;return u.hasFollowRequests?Object(i.h)("div",{class:"row pb-1"},Object(i.h)("div",{class:"col-12 col-sm-8 col-lg-6 offset-sm-2 offset-lg-3 mb-0 position-relative rounded rounded-lg py-3 bg-"+(f?"black":"white")+" shadow-sm"},Object(i.h)("div",{class:"container-fluid"},Object(i.h)("div",{class:"row"},Object(i.h)("div",{class:"col-12"},Object(i.h)("h5",null,Object(i.h)(l.c,{id:"teams.connect.teams-follow-requests"},"Forespørsel om å følge"),":"))),Object(i.h)("div",{class:"row"},Object(i.h)("div",{class:"d-flex flex-row flex-nowrap",style:"overflow: auto;"},r.a.isArray(b)&&b.map((function(s){return Object(i.h)(e,null,s&&r.a.isArray(s.followRequests)&&s.followRequests.map((function(n){var o=n.image&&n.image.s3SmallLink?n.image:null,r=a[s.id+"-"+n.id],h=c[s.id+"-"+n.id],u=m.find((function(e){return e.user.id===n.id}));return Object(i.h)("div",{class:"mr-2 py-2 border rounded-lg",style:"width: 150px;"},Object(i.h)("div",{class:"text-center border rounded-circle imageRounded imageRoundedSmall mx-auto",style:o?'background-image: url("'+o.s3SmallLink+'");':""},!o&&Object(i.h)("div",{class:"text-muted font-weight-lighter",style:"font-size: 20px; padding-top: 5px;"},d.a.displayNameShort(n))),Object(i.h)("small",null,Object(i.h)("div",{class:"text-overflow text-center"},Object(i.h)("strong",null,d.a.displayName(n)),Object(i.h)("br",null)),Object(i.h)("div",{class:"text-overflow text-center"},Object(i.h)(l.c,{id:"teams.connect.wants-to-follow"},"wants to follow your team:")),Object(i.h)("div",{class:"text-overflow text-center"},Object(i.h)("strong",null,d.a.displayName(s)))),h||r?Object(i.h)(e,null,Object(i.h)("div",{class:"text-center"},h?Object(i.h)("div",{class:"text-success"},Object(i.h)(l.c,{id:"teams.connect.confirmed"},"Confirmed")," ",Object(i.h)("i",{class:"fas fa-check"})):Object(i.h)("div",{class:"text-danger"},Object(i.h)(l.c,{id:"teams.connect.deleted"},"Deleted")," ",Object(i.h)("i",{class:"fas fa-trash-alt"})))):Object(i.h)(e,null,Object(i.h)("div",null,Object(i.h)("button",{class:"btn btn-sm btn-block btn-success text-overflow mt-1",onClick:t.confirmRequest,"data-team":s.id,"data-user":n.id},Object(i.h)(l.c,{id:"teams.connect.confirm"},"Confirm")),u&&u.public>0&&Object(i.h)("button",{class:"btn btn-sm btn-block btn-outline-success text-overflow mt-1",onClick:t.confirmRequest,"data-team":s.id,"data-user":n.id,"data-follow":!0},Object(i.h)(l.c,{id:"teams.connect.confirm-and-follow"},"Confirm & follow back")),Object(i.h)("div",{class:"mt-3"},Object(i.h)("small",null,Object(i.h)("button",{class:"btn btn-sm btn-block btn-link text-overflow",style:"font-size: 1.0em;",onClick:t.deleteRequest,"data-team":s.id,"data-user":n.id},Object(i.h)(l.c,{id:"teams.connect.delete"},"Del")))))))})))})))),Object(i.h)("details",{class:"mt-3"},Object(i.h)("summary",null,Object(i.h)("small",null,Object(i.h)(l.c,{id:"teams.connect.how-summary"},"How does this work?"))),Object(i.h)("p",null,Object(i.h)(l.c,{id:"teams.connect.how-text"},"What can followers see when I grant them access to follow? The answer is very little. They can see main details of the workouts you share and name of the dogs. That's all. Try to follow a team and check out the workout tab.")))))):""},s}(i.Component))||o;t.a=u}).call(this,s("hosL").Fragment)},t1gC:function(e,t,s){"use strict";s.r(t),function(e){function n(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function a(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?n(Object(s),!0).forEach((function(t){o(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):n(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function o(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}var i,r=s("hosL"),c=s("Utv1"),l=s("/eY4"),d=s("OhSV"),h=s("Y3FI"),u=s("fh8t"),b=s.n(u),p=(s("go65"),s("Ysxg")),m=s("9lZG"),f=(s("aGZh"),s("om2D"),s("+JSK")),g=s("/DnB"),O=s("w5T0"),j=s("ULR1"),v=s("hwiY"),y=s("uAGO"),w=s("n7ns"),x=s("Pbyq"),k=s("HGwV"),S=s("J9nn"),I=s("ZOvn"),C=I.a.marginTop(!1),T=I.a.marginTopBack(!1),D=I.a.marginBottom(),P=(I.a.subMenuMarginTop(),{isLoading:!1,showAdminSendMessage:{},newRaceArticle:{},newRaceUserImage:{},message:{subject:"",body:""}}),R=Object(l.a)(i=function(t){function s(e){var s;return(s=t.call(this,e)||this).likeRace=function(){return new Promise((function(e,t){var n;return n=s.props.stores.raceStore,Promise.resolve(n.likeRace({id:n.race.id})).then((function(s){try{return s,e()}catch(e){return t(e)}}),t)}))},s.toggleAddComment=function(e){var t=e.target.parentElement.dataset.id||e.target.dataset.id;s.setState({showAddComment:!s.state.showAddComment},(function(){s.inputRef[t]&&s.inputRef[t].focus()}))},s.chooseSubmenu=function(e){var t=e.target.parentElement.dataset.menu||e.target.dataset.menu;s.setState({submenu:t});var n=s.props.raceid;Object(h.route)("/app-races/"+n+"/"+t)},s.resizeTextarea=function(e){var t=e;t.target&&(t=e.target),t.style.height=t.scrollHeight+"px"},s.resizeAllTextareas=function(){for(var e=document.getElementsByTagName("textarea"),t=0,n=e.length;t<n;t+=1){s.resizeTextarea(e[t])}},s.addNavigation=function(e){s.setState({submenu:e.submenu})},s.back=function(){Object(h.route)("/")},s.state=a(a({},P),{},{showAdminSendMessage:{},newRaceArticle:{},newRaceUserImage:{},message:{subject:"",body:""},submenu:e.submenu||"about"}),s.inputRef={},s.updateTimer={},s}var n,o;o=t,(n=s).prototype=Object.create(o.prototype),n.prototype.constructor=n,n.__proto__=o;var i=s.prototype;return i.loadRace=function(e){return new Promise(function(t,s){var n,o,i,r,c,l,d,h,u,b,p,m,f;return void 0===e&&(e=this.props),this.setState({isLoading:!0}),o=(n=e.stores).raceStore,c=void 0===(r=(i=n.userStore).user)?{}:r,l=e.raceid,Promise.resolve(o.load(l)).then(function(){try{if(this.setState({isLoading:!1}),d={},(h=o.race).classes&&c&&c.email)for(u=0,b=h.classes.length;u<b;u+=1)(p=h.classes[u]).contestants&&(m=p.contestants.findIndex((function(e){return e.email===c.email})))>-1&&(d=a(a({},p.contestants[m]),{},{class:p.id}));if(o.updateKeyValue("signup",d),d.user)return Promise.resolve(i.getDogs({id:d.user})).then(function(){try{return e.call(this)}catch(e){return s(e)}}.bind(this),s);function e(){function e(){return o.getAllClassesSortedBy(),Promise.resolve(o.loadPublicInteractions(l)).then((function(){try{return t()}catch(e){return s(e)}}),s)}return(f=h.classes.filter((function(e){return e.contestants&&e.contestants.length>0})).map((function(e){return e.contestants.filter((function(e){return e.team>0})).map((function(e){return e.team}))})).flat()).length>0&&l?Promise.resolve(o.loadTeams(f.join(","))).then(function(){try{return e.call(this)}catch(e){return s(e)}}.bind(this),s):e.call(this)}return e.call(this)}catch(e){return s(e)}}.bind(this),s)}.bind(this))},i.componentDidMount=function(){this.loadRace(),this.resizeAllTextareas()},i.componentWillReceiveProps=function(e){e.raceid!==this.props.raceid&&this.loadRace(e),e.submenu!==this.props.submenu&&this.addNavigation(e)},i.render=function(){var t=this,s=this.state.submenu,n=this.state,a=n.showAddComment,o=this.props.stores,i=o.userStore,l=o.raceStore,h=i.user,u=void 0===h?{}:h,P=i.isAdmin,R=i.isVeterinary,A=u.language,z=void 0===A?"en":A,F=this.props,L=F.raceid,E=l.race,U=l.signup,M=E.likes,_=void 0===M?[]:M,N=E.comments,B=void 0===N?[]:N,H=E.likes&&E.likes.findIndex((function(e){return e.user===u.id}))>-1,V=new Date,q="";V>=new Date(E.startDate)&&V<=new Date(E.endDate)?q="race":V>=new Date(E.signupStartDate)&&V<=new Date(E.signupEndDate)&&(q="signup");var K=1===E.liveRace,Y=!K||!!U.email;return"tracking"===s?Object(r.h)(k.a,{stores:this.props.stores,raceid:L}):"results"===s?Object(r.h)(O.a,{stores:this.props.stores,raceid:L}):Object(r.h)("div",{class:"container-fluid",style:"margin-bottom: "+D+"; margin-top: "+C+";"},Object(r.h)("button",{class:"btn btn-link pl-0 fixed-top text-primary",style:"top: "+T+"; left: 5px; font-size: 35px; width: 45px;",onClick:this.back},Object(r.h)("i",{class:"fas fa-arrow-circle-left"})),Object(r.h)("div",{class:"row m-0"},Object(r.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-1 mb-2 p-0"},Object(r.h)("div",{class:"row d-flex align-items-center position-relative"},Object(r.h)("h3",{class:"position-absolute",style:"top: 3px; right: 5px;"},"signup"===q&&!K&&Object(r.h)(e,null,Object(r.h)("span",{class:"badge badge-primary badge-lg border border-white ml-2","data-menu":"signup",onClick:this.chooseSubmenu},Object(r.h)(d.c,{id:"races.signup-open"},"Påmelding åpen"))),"race"===q&&Object(r.h)(e,null,Object(r.h)("span",{class:"badge badge-danger border border-white ml-2"},Object(r.h)(d.c,{id:"races.race-in-progress"},"Løp pågår"))),"done"===q&&Object(r.h)(e,null,Object(r.h)("span",{class:"badge badge-success border border-white ml-2"},Object(r.h)(d.c,{id:"races.race-finished"},"Løp avsluttet")))),E.images&&E.images[0]?Object(r.h)("img",{src:E.images[0].s3LargeLink,class:"img-fluid"}):""))),Object(r.h)("div",{class:"row"},Object(r.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3"},P&&Object(r.h)(e,null,Object(r.h)("a",{class:"btn btn-primary float-right",href:"https://homerunrace.no/index#/race/"+E.id+"/edit"},"Edit")),Object(r.h)("h3",null,E.title),Object(r.h)("div",null,E.startDate&&Object(r.h)(e,null,Object(r.h)(d.c,{id:"races.periode"},"Periode"),": ",c.a.formatDate(E.startDate,{locale:"no-NB",hour12:!1,hour:"2-digit",minute:"2-digit"})),E.endDate&&Object(r.h)(e,null," - ",c.a.formatDate(E.endDate,{locale:"no-NB",hour12:!1,hour:"2-digit",minute:"2-digit"}))))),Object(r.h)("div",{class:"row"},Object(r.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3"},Object(r.h)("div",{class:"row"},Object(r.h)("div",{class:"w-100 overflow-hidden"},Object(r.h)("div",{class:"d-flex flex-row flex-nowrap pb-2 px-1",style:"overflow: auto; scroll-snap-type: x mandatory;"},Object(r.h)("div",{class:"col px-0 pt-2"},Object(r.h)("button",{class:"btn btn-block rounded-pill-left rounded-none "+("about"===s?"btn-primary":"btn-outline-primary")+" text-nowrap",style:"text-overflow: ellipsis; overflow: hidden;","data-menu":"about",onClick:this.chooseSubmenu},Object(r.h)("i",{class:"fas fa-info-circle"})," ",Object(r.h)(d.c,{id:"race.about"},"About")),"about"===s&&Object(r.h)(g.a,{horizontal:"center",vertical:"end"})),Y&&Object(r.h)("div",{class:"col px-0 pt-2"},Object(r.h)("button",{class:"btn btn-block rounded-none "+("signup"===s?"btn-primary":"btn-outline-primary")+" text-nowrap",style:"text-overflow: ellipsis; overflow: hidden;","data-menu":"signup",onClick:this.chooseSubmenu},Object(r.h)("i",{class:"fas fa-user-edit"})," ",Object(r.h)(d.c,{id:"race.signup"},"Sign up")),"signup"===s&&Object(r.h)(g.a,{horizontal:"center",vertical:"end"})),Object(r.h)("div",{class:"col px-0 pt-2"},Object(r.h)("button",{class:"btn btn-block rounded-none "+("results"===s?"btn-primary":"btn-outline-primary")+" text-nowrap",style:"text-overflow: ellipsis; overflow: hidden;","data-menu":"results",onClick:this.chooseSubmenu},Object(r.h)("i",{class:"fas fa-list-ol"})," ",Object(r.h)(d.c,{id:"race.results"},"Results")),"results"===s&&Object(r.h)(g.a,{horizontal:"center",vertical:"end"})),Object(r.h)("div",{class:"col px-0 pt-2"},Object(r.h)("button",{class:"btn btn-block rounded-none "+("tracking"===s?"btn-primary":"btn-outline-primary")+" text-nowrap",style:"text-overflow: ellipsis; overflow: hidden;","data-menu":"tracking",onClick:this.chooseSubmenu},Object(r.h)("i",{class:"fas fa-map-marker-alt"})," ",Object(r.h)(d.c,{id:"race.tracking"},"Tracking")),"tracking"===s&&Object(r.h)(g.a,{horizontal:"center",vertical:"end"})),(P||R)&&Object(r.h)("div",{class:"col px-0 pt-2"},Object(r.h)("button",{class:"btn btn-block rounded-none "+("mushers"===s?"btn-primary":"btn-outline-primary")+" text-nowrap",style:"text-overflow: ellipsis; overflow: hidden;","data-menu":"mushers",onClick:this.chooseSubmenu},Object(r.h)("i",{class:"fas fa-users"})," ",Object(r.h)(d.c,{id:"races.mushers"},"Mushers")),"mushers"===s&&Object(r.h)(g.a,{horizontal:"center",vertical:"end"})),E.rules&&Object(r.h)("div",{class:"col px-0 pt-2"},Object(r.h)("button",{class:"btn btn-block rounded-none "+("rules"===s?"btn-primary":"btn-outline-primary")+" text-nowrap",style:"text-overflow: ellipsis; overflow: hidden;","data-menu":"rules",onClick:this.chooseSubmenu},Object(r.h)("i",{class:"fas fa-gavel"})," ",Object(r.h)(d.c,{id:"race.rules"},"Rules")),"rules"===s&&Object(r.h)(g.a,{horizontal:"center",vertical:"end"})),E.veterinaryInfo&&Object(r.h)("div",{class:"col px-0 pt-2"},Object(r.h)("button",{class:"btn btn-block rounded-none "+("veterinary"===s?"btn-primary":"btn-outline-primary")+" text-nowrap",style:"text-overflow: ellipsis; overflow: hidden;","data-menu":"veterinary",onClick:this.chooseSubmenu},Object(r.h)("i",{class:"fas fa-stethoscope"})," ",Object(r.h)(d.c,{id:"race.veterinary"},"Veterinary info")),"veterinary"===s&&Object(r.h)(g.a,{horizontal:"center",vertical:"end"})),E.checkpoints&&Object(r.h)("div",{class:"col px-0 pt-2"},Object(r.h)("button",{class:"btn btn-block rounded-none "+("checkpoints"===s?"btn-primary":"btn-outline-primary")+" text-nowrap",style:"text-overflow: ellipsis; overflow: hidden;","data-menu":"checkpoints",onClick:this.chooseSubmenu},Object(r.h)("i",{class:"fas fa-map-marker-alt"})," ",Object(r.h)(d.c,{id:"race.checkpoints"},"Checkpoints")),"checkpoints"===s&&Object(r.h)(g.a,{horizontal:"center",vertical:"end"})),E.trailDescription&&Object(r.h)("div",{class:"col px-0 pt-2"},Object(r.h)("button",{class:"btn btn-block rounded-none "+("track"===s?"btn-primary":"btn-outline-primary")+" text-nowrap",style:"text-overflow: ellipsis; overflow: hidden;","data-menu":"track",onClick:this.chooseSubmenu},Object(r.h)("i",{class:"fas fa-map-signs"})," ",Object(r.h)(d.c,{id:"race.track-description"},"Track description")),"track"===s&&Object(r.h)(g.a,{horizontal:"center",vertical:"end"})),E.program&&Object(r.h)("div",{class:"col px-0 pt-2"},Object(r.h)("button",{class:"btn btn-block rounded-none "+("program"===s?"btn-primary":"btn-outline-primary")+" text-nowrap",style:"text-overflow: ellipsis; overflow: hidden;","data-menu":"program",onClick:this.chooseSubmenu},Object(r.h)("i",{class:"fas fa-list-alt"})," ",Object(r.h)(d.c,{id:"race.program"},"Program")),"program"===s&&Object(r.h)(g.a,{horizontal:"center",vertical:"end"})),E.prices&&Object(r.h)("div",{class:"col px-0 pt-2"},Object(r.h)("button",{class:"btn btn-block rounded-none "+("prices"===s?"btn-primary":"btn-outline-primary")+" text-nowrap",style:"text-overflow: ellipsis; overflow: hidden;","data-menu":"prices",onClick:this.chooseSubmenu},Object(r.h)("i",{class:"fas fa-award"})," ",Object(r.h)(d.c,{id:"race.prices"},"Premier")),"prices"===s&&Object(r.h)(g.a,{horizontal:"center",vertical:"end"})),!K&&Object(r.h)("div",{class:"col px-0 pt-2"},Object(r.h)("button",{class:"btn btn-block rounded-none "+("classes"===s?"btn-primary":"btn-outline-primary")+" text-nowrap",style:"text-overflow: ellipsis; overflow: hidden;","data-menu":"classes",onClick:this.chooseSubmenu},Object(r.h)("i",{class:"fas fa-folder-open"})," ",Object(r.h)(d.c,{id:"race.classes"},"Classes")),"classes"===s&&Object(r.h)(g.a,{horizontal:"center",vertical:"end"})),Object(r.h)("div",{class:"col px-0 pt-2"},Object(r.h)("button",{class:"btn btn-block rounded-none "+("news"===s?"btn-primary":"btn-outline-primary")+" text-nowrap",style:"text-overflow: ellipsis; overflow: hidden;","data-menu":"news",onClick:this.chooseSubmenu},Object(r.h)("i",{class:"fas fa-rss"})," ",Object(r.h)(d.c,{id:"race.news"},"News")),"news"===s&&Object(r.h)(g.a,{horizontal:"center",vertical:"end"})),Object(r.h)("div",{class:"col px-0 pt-2"},Object(r.h)("button",{class:"btn btn-block rounded-pill-right rounded-none "+("userImages"===s?"btn-primary":"btn-outline-primary")+" text-nowrap",style:"text-overflow: ellipsis; overflow: hidden;","data-menu":"userImages",onClick:this.chooseSubmenu},Object(r.h)("i",{class:"fas fa-images"})," ",Object(r.h)(d.c,{id:"race.user-images"},"User images")),"userImages"===s&&Object(r.h)(g.a,{horizontal:"center",vertical:"end"}))))))),"about"===s&&Object(r.h)(e,null,Object(r.h)(S.a,{stores:this.props.stores,race:E}),Object(r.h)("div",{class:"row"},Object(r.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-0 mb-2"},Object(r.h)("h2",{class:"mb-0"},Object(r.h)(d.c,{id:"race.about"},"Om løpet"))),Object(r.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-3 mb-2"},Object(r.h)("p",{class:"clearfix"},Object(r.h)("strong",null,Object(r.h)(b.a,{markdown:I.a.replaceImages(E.ingress,E.images,z),markdownOpts:I.a.getMarkdownOptions()}))),"signup"===q&&Object(r.h)(e,null,K?Object(r.h)(e,null,Object(r.h)("button",{class:"btn btn-block btn-success mb-3","data-menu":"signup",onClick:this.chooseSubmenu},Object(r.h)("i",{class:"fas fa-user-edit"})," ",E.declaration&&Object(r.h)(e,null,Object(r.h)(d.c,{id:"race.declaration"},"Declaration")," &")," ",Object(r.h)(d.c,{id:"race.chiplist"},"Chiplist"))):Object(r.h)(e,null,Object(r.h)("button",{class:"btn btn-block btn-success mb-3","data-menu":"signup",onClick:this.chooseSubmenu},Object(r.h)("i",{class:"fas fa-user-edit"})," ",Object(r.h)(d.c,{id:"race.signup"},"Sign up")))),Object(r.h)(b.a,{markdown:I.a.replaceImages(E.body,E.images,z),markdownOpts:I.a.getMarkdownOptions()})),Object(r.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-3 mb-2"},E.tag&&E.tag.split(",").map((function(t){return Object(r.h)(e,null,Object(r.h)("span",{class:"badge badge-pill badge-primary py-1 ml-2"},Object(r.h)("a",{class:"text-white",href:"https://www.facebook.com/hashtag/"+t,target:"_blank",rel:"noreferrer",native:!0},Object(r.h)("i",{class:"fab fa-facebook"})," #",t)),Object(r.h)("span",{class:"badge badge-pill badge-primary py-1 ml-2"},Object(r.h)("a",{class:"text-white",href:"https://www.instagram.com/explore/tags/"+t,target:"_blank",rel:"noreferrer",native:!0},Object(r.h)("i",{class:"fab fa-instagram"})," #",t)))}))))),"results"===s&&Object(r.h)(e,null,Object(r.h)(S.a,{stores:this.props.stores,race:E}),Object(r.h)(O.a,{stores:this.props.stores,raceid:L})),"tracking"===s&&Object(r.h)(e,null,Object(r.h)(k.a,{stores:this.props.stores,raceid:L})),"news"===s&&Object(r.h)(e,null,Object(r.h)(j.a,{stores:this.props.stores,race:E})),"userImages"===s&&Object(r.h)(e,null,Object(r.h)(x.a,{stores:this.props.stores,race:E})),"rules"===s&&Object(r.h)(e,null,Object(r.h)("div",{class:"row"},Object(r.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-0 mb-2"},Object(r.h)("h2",{class:"mb-0"},Object(r.h)(d.c,{id:"race.rules"},"Regler"))),Object(r.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-3 mb-2"},Object(r.h)(b.a,{markdown:I.a.replaceImages(E.rules,E.images,z),markdownOpts:I.a.getMarkdownOptions()})))),"veterinary"===s&&Object(r.h)(e,null,Object(r.h)("div",{class:"row"},Object(r.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-0 mb-2"},Object(r.h)("h2",{class:"mb-0"},Object(r.h)(d.c,{id:"race.veterinary"},"Veterinærinfo"))),Object(r.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-3 mb-2"},Object(r.h)(b.a,{markdown:I.a.replaceImages(E.veterinaryInfo,E.images,z),markdownOpts:I.a.getMarkdownOptions()})))),"checkpoints"===s&&Object(r.h)(e,null,Object(r.h)("div",{class:"row"},Object(r.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-0 mb-2"},Object(r.h)("h2",{class:"mb-0"},Object(r.h)(d.c,{id:"race.checkpoints"},"Sjekkpunkter"))),Object(r.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-3 mb-2"},Object(r.h)(b.a,{markdown:I.a.replaceImages(E.checkpoints,E.images,z),markdownOpts:I.a.getMarkdownOptions()})))),"track"===s&&Object(r.h)(e,null,Object(r.h)("div",{class:"row"},Object(r.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-0 mb-2"},Object(r.h)("h2",{class:"mb-0"},Object(r.h)(d.c,{id:"race.track-description"},"Løypebeskrivelse"))),Object(r.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-3 mb-2"},Object(r.h)(b.a,{markdown:I.a.replaceImages(E.trailDescription,E.images,z),markdownOpts:I.a.getMarkdownOptions()})))),"program"===s&&Object(r.h)(e,null,Object(r.h)("div",{class:"row"},Object(r.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-0 mb-2"},Object(r.h)("h2",{class:"mb-0"},Object(r.h)(d.c,{id:"race.program"},"Program"))),Object(r.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-3 mb-2"},Object(r.h)(b.a,{markdown:I.a.replaceImages(E.program,E.images,z),markdownOpts:I.a.getMarkdownOptions()})))),"prices"===s&&Object(r.h)(e,null,Object(r.h)("div",{class:"row"},Object(r.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-0 mb-2"},Object(r.h)("h2",{class:"mb-0"},Object(r.h)(d.c,{id:"race.prices"},"Premier"))),Object(r.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-3 mb-2"},Object(r.h)(b.a,{markdown:I.a.replaceImages(E.prices,E.images,z),markdownOpts:I.a.getMarkdownOptions()})))),"mushers"===s&&Object(r.h)(e,null,Object(r.h)(w.a,{stores:this.props.stores,race:E})),"classes"===s&&Object(r.h)(e,null,Object(r.h)(y.a,{stores:this.props.stores,race:E})),"signup"===s&&Object(r.h)(e,null,Object(r.h)(v.a,{stores:this.props.stores,race:E})),["about"].indexOf(s)>-1&&Object(r.h)(e,null,Object(r.h)("div",{class:"row"},Object(r.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-0 mb-2"},Object(r.h)("div",{class:""},Object(r.h)(f.a,{stores:this.props.stores,likes:_,comments:B,type:"race"}))),Object(r.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-2 mb-3"},Object(r.h)("div",{class:"row"},Object(r.h)("div",{class:"col-6 text-center"},Object(r.h)("button",{type:"button",class:"btn btn-outline-"+(H?"primary":"secondary")+" btn-lg btn-block "+(H?"text-primary":""),onClick:this.likeRace},Object(r.h)("i",{class:(H?"text-primary fas":"far")+" fa-thumbs-up"})," ",H?Object(r.h)(d.c,{id:"comments.has-liked"},"Liked"):Object(r.h)(d.c,{id:"comments.like"},"Lik"))),Object(r.h)("div",{class:"col-6 text-center"},Object(r.h)("button",{type:"button",class:"btn btn-outline-secondary btn-lg btn-block","data-id":E.id,onClick:this.toggleAddComment},Object(r.h)("i",{class:"fas fa-comment"})," ",Object(r.h)(d.c,{id:"comments.comment-add"},"Comment"))))),Object(r.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-2 mb-3"},a&&u.email&&Object(r.h)(m.a,{stores:this.props.stores,race:E,inputRef:function(e){return t.inputRef[E.id]=e},inputRefObject:this.inputRef})),Object(r.h)("div",{class:"col-12 mt-2"},Object(r.h)(p.a,{stores:this.props.stores,race:E,cols:"12"})))))},s}(r.Component))||i;t.default=R}.call(this,s("hosL").Fragment)},u2zT:function(e,t,s){"use strict";var n,a=s("hosL"),o=s("/eY4"),i=s("Utv1"),r=s("OhSV"),c=Object(o.a)(n=function(e){function t(t){var s;return(s=e.call(this,t)||this).dropRef=Object(a.createRef)(),s.handleDrag=function(e){e.preventDefault(),e.stopPropagation()},s.handleDragIn=function(e){e.preventDefault(),e.stopPropagation(),s.dragCounter++,e.dataTransfer.items&&e.dataTransfer.items.length>0&&s.setState({drag:!0})},s.handleDragOut=function(e){e.preventDefault(),e.stopPropagation(),s.dragCounter--,0===s.dragCounter&&s.setState({drag:!1})},s.handleDrop=function(e){if(e.preventDefault(),e.stopPropagation(),s.setState({drag:!1}),e.dataTransfer.files&&e.dataTransfer.files.length>0){for(var t=0,n=e.dataTransfer.files.length;t<n;t+=1){s.readLocalFile(e.dataTransfer.files[t])}s.dragCounter=0}},s.handleAddFiles=function(e){e.preventDefault();var t=e.target;for(var n=0,a=t.files.length;n<a;n+=1){s.readLocalFile(t.files[n])}},s.handleEvent=function(){0},s.handleUpload=function(e){var t=s.props,n=t.uploadStatus,a=t.before,o=void 0===a?function(){}:a,r=t.after,c=void 0===r?function(){}:r;(void 0===n?function(){}:n)(!1),i.a.isFunction(o)&&o();var l=new FormData;l.append("files[]",e);var d={progress:1};d.xhr=new XMLHttpRequest,d.xhr.upload.addEventListener("progress",(function(t){s.updateProgress(t,e)})),d.xhr.addEventListener("loadstart",(function(t){s.handleEvent(t,e)})),d.xhr.addEventListener("load",(function(t){s.handleEvent(t,e)})),d.xhr.addEventListener("loadend",(function(t){var n=e;i.a.isFunction(c)&&c(),s.handleEvent(t,n)})),d.xhr.addEventListener("progress",(function(t){s.handleEvent(t,e)})),d.xhr.addEventListener("error",(function(t){s.handleEvent(t,e)})),d.xhr.addEventListener("abort",(function(t){s.handleEvent(t,e)})),d.xhr.addEventListener("readystatechange",(function(t){s.uploadDone(t,e)})),d.xhr.open("POST",""+i.a.getApiServer()+s.props.apiUrl),d.xhr.setRequestHeader("Authorization","Bearer "+i.a.getJwtToken()),d.xhr.send(l);var h=e.name,u=s.state.uploadedFilesData;u[h]||(u[h]={}),u[h].uploadMeta=d,u[h].imageNum=s.state.imageNum,s.setState({uploadedFilesData:u})},s.readLocalFile=function(e){return new Promise((function(t,n){var a=new FileReader;a.addEventListener("error",(function(e){n(e)})),a.addEventListener("load",(function(n){var a=e,o=a.name,i=s.state.uploadedFilesData;i[o]||(i[o]={}),i[o].event=n,s.setState({uploadedFilesData:i}),s.handleUpload(a),t(n)})),a.readAsDataURL(e)}))},s.updateProgress=function(e,t){if(e.lengthComputable){var n=t.name,a=s.state.uploadedFilesData,o=e.loaded/e.total*100;0,a[n].uploadMeta.progress=o,s.setState({uploadedFilesData:a})}},s.uploadDone=function(e,t){var n=t.name,a=s.state.uploadedFilesData,o=a[n].uploadMeta;if(o&&4===o.xhr.readyState&&201===o.xhr.status)for(var i=JSON.parse(o.xhr.responseText).data.files,r=0;r<i.length;r+=1){s.addFileToUpload(i[r]),s.fileInput.value=""}},s.state={drag:!1,loadingProgress:0,uploadedFiles:[],uploadedFilesData:{}},s}var s,n;n=e,(s=t).prototype=Object.create(n.prototype),s.prototype.constructor=s,s.__proto__=n;var o=t.prototype;return o.addFileToUpload=function(e){var t=this.state.uploadedFilesData,s=this.props,n=s.handleAddImage,a=s.uploadStatus,o=void 0===a?function(){}:a;delete t[e.name],this.setState({uploadedFilesData:t}),n(e),o(!0)},o.componentDidMount=function(){var e=this,t=this.dropRef.current;t.addEventListener("dragenter",this.handleDragIn),t.addEventListener("dragleave",this.handleDragOut),t.addEventListener("dragover",this.handleDrag),t.addEventListener("drop",this.handleDrop),this.props.autoOpen&&setTimeout((function(){e.fileInput.click()}),10)},o.componentWillUnmount=function(){var e=this.dropRef.current;e.removeEventListener("dragenter",this.handleDragIn),e.removeEventListener("dragleave",this.handleDragOut),e.removeEventListener("dragover",this.handleDrag),e.removeEventListener("drop",this.handleDrop)},o.render=function(){var e=this,t=this.state.uploadedFilesData;return Object(a.h)("div",{style:{position:"relative"},ref:this.dropRef},this.state.drag&&Object(a.h)("div",{style:{border:"dashed grey 4px",backgroundColor:"rgba(255,255,255,.8)",position:"absolute",top:0,bottom:0,left:0,right:0,zIndex:9999}},Object(a.h)("div",{style:{position:"absolute",top:"50%",right:0,left:0,textAlign:"center",color:"grey",fontSize:36}},Object(a.h)("div",null,Object(a.h)(r.c,{id:"imageupload.drag-files-here"},"drop your files here :)")))),Object(a.h)("div",null,Object(a.h)("input",{class:"btn btn-info col-sm-12",multiple:!0,type:"file",id:"image-file",onchange:this.handleAddFiles,ref:function(t){e.fileInput=t}})),Object(a.h)("div",null,Object.keys(t).length>0?Object(a.h)("h3",null,Object(a.h)(r.c,{id:"imageupload.upload-images"},"Uploaded images")):"",Object(a.h)("ul",{class:"list-group"},Object.keys(t).map((function(e){var s=t[e].uploadMeta,n=void 0===s?{}:s,o=e.match(/(jpg|jpeg|png|gif|heic|heif|svg|webp|tif)/i);return Object(a.h)("li",{class:"list-group-item list-group-item-action flex-column align-items-start"},Object(a.h)("div",{class:"d-flex w-100 justify-content-between"},o&&Object(a.h)("img",{class:"img-fluid mr-3",src:t[e].event.target.result,style:"max-height: 50px;"}),Object(a.h)("small",null,t[e].event.uploadDone),Object(a.h)(r.c,{id:"imageupload.uploading-image"},"Laster opp bilde..."),Object(a.h)("small",null,i.a.formatBytes(t[e].event.total,2))),Object(a.h)("div",{class:"progress mt-1",style:"height: 4px;"},Object(a.h)("div",{class:"progress-bar progress-bar-striped progress-bar-animated bg-success",role:"progressbar",style:"width: "+n.progress+"%; height: 4px;","aria-valuenow":n.progress,"aria-valuemin":"0","aria-valuemax":"100"})))})))),this.props.children)},t}(a.Component))||n;t.a=c},uAGO:function(e,t,s){"use strict";(function(e){var n,a=s("hosL"),o=s("Utv1"),i=s("/eY4"),r=s("OhSV"),c=(s("Y3FI"),s("fh8t")),l=s.n(c),d=(s("go65"),s("ZOvn")),h=Object(i.a)(n=function(t){function s(e){var s;return(s=t.call(this,e)||this).state={},s.inputRef={},s.updateTimer={},s}var n,i;return i=t,(n=s).prototype=Object.create(i.prototype),n.prototype.constructor=n,n.__proto__=i,s.prototype.render=function(){var t=this.props.stores,s=t.userStore,n=s.user,i=s.isAdmin,c=(void 0===n?{}:n).language,h=void 0===c?"en":c,u=this.props.race,b=void 0===u?{}:u;return Object(a.h)(e,null,Object(a.h)("div",{class:"row"},Object(a.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-0 mb-2"},Object(a.h)("h2",{class:"mb-0"},Object(a.h)(r.c,{id:"race.classes"},"Klasser"))),Object(a.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-3 mb-2"},Object(a.h)("div",{class:"row"},b.classes&&b.classes.sort((function(e,t){return e.distance-t.distance})).map((function(t){return Object(a.h)(e,null,Object(a.h)("div",{class:"col-12 col-sm-6 col-lg-4 mb-4"},Object(a.h)("div",{class:"border rounded rounded-lg p-3"},Object(a.h)("h5",null,t.title),i&&Object(a.h)(e,null,Object(a.h)("a",{href:"/tv/top10/"+b.id+"/"+t.id},"TV Top 10"),Object(a.h)("br",null),Object(a.h)("a",{href:"/tv/team/"+b.id+"/1"},"TV One team"),Object(a.h)("br",null)),Object(a.h)("small",null,t.startDate&&Object(a.h)("div",null,Object(a.h)("span",{class:"font-weight-lighter"},Object(a.h)(r.c,{id:"race.startdate"},"Start"),":")," ",o.a.formatDate(t.startDate,{locale:h,hour12:!1,hour:"2-digit",minute:"2-digit"})),t.endDate&&Object(a.h)("div",null,Object(a.h)("span",{class:"font-weight-lighter"},Object(a.h)(r.c,{id:"race.enddate"},"End"),":")," ",o.a.formatDate(t.endDate,{locale:h,hour12:!1,hour:"2-digit",minute:"2-digit"}))),Object(a.h)("div",null,Object(a.h)("span",{class:"font-weight-lighter"},Object(a.h)(r.c,{id:"race.distance"},"Distanse"),":")," ",t.distance," km"),Object(a.h)("div",null,Object(a.h)("span",{class:"font-weight-lighter"},Object(a.h)(r.c,{id:"race.signup"},"Påmelding"),":")," ",t.signupfee||b.signupfee," NOK"),Object(a.h)("p",{class:"clearfix"},Object(a.h)(l.a,{markdown:d.a.replaceImages(t.ingress,b.images,h),markdownOpts:d.a.getMarkdownOptions()})),Object(a.h)("small",null,Object(a.h)(l.a,{markdown:d.a.replaceImages(t.body,b.images,h),markdownOpts:d.a.getMarkdownOptions()})),t.rules&&Object(a.h)(e,null,Object(a.h)("h5",null,Object(a.h)(r.c,{id:"race.rules"},"Regler")),Object(a.h)(l.a,{markdown:d.a.replaceImages(t.rules,b.images,h),markdownOpts:d.a.getMarkdownOptions()})))))}))))))},s}(a.Component))||n;t.a=h}).call(this,s("hosL").Fragment)},"vY+r":function(e,t,s){"use strict";(function(e){function n(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function a(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}var o,i=s("hosL"),r=s("Utv1"),c=s("/eY4"),l=s("OhSV"),d=s("ZOvn"),h={},u=Object(c.a)(o=function(t){function s(e){var s;return(s=t.call(this,e)||this).toggleViews=function(){var e=s.props;(e.isTeamAdmin||e.isAdmin)&&s.setState({showViewList:!s.state.showViewList})},s.state=function(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?n(Object(s),!0).forEach((function(t){a(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):n(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}({},h),s}var o,c;return c=t,(o=s).prototype=Object.create(c.prototype),o.prototype.constructor=o,o.__proto__=c,s.prototype.render=function(){var t=this.state.showViewList,s=this.props.stores,n=s.storyStore,a=s.teamStore,o=s.workoutStore,c=this.props,h=c.views,u=c.type,b=void 0===u?"story":u,p=c.onTeamClick,m=void 0===p?function(){}:p,f=[];Object.entries(c.object.statistics).forEach((function(e){Object.entries(e[1]).forEach((function(e){var t=e[1];t.viewUsers&&f.push(t.viewUsers)}))}));var g=f.flat().slice(0,50);return Object(i.h)(e,null,Object(i.h)("div",{class:"d-flex justify-content-end mb-2"},Object(i.h)("span",{class:"ml-2 text-muted font-weight-lighter",onClick:this.toggleViews},h," ",Object(i.h)(l.c,{id:"story.views"},"views"))),t&&Object(i.h)("div",{class:"mt-3 mb-3"},g&&g.map((function(t){var s,c,l;if("story"===b?(s=n.findPublicUser(t),c=n.findPublicTeamByMembers(t)):"team"===b?(s=a.findPublicUser(t),c=a.findPublicTeamByMembers(t)):"workout"===b&&(s=o.findPublicUser(t),c=o.findPublicTeamByMembers(t)),!s)return"";r.a.isArray(c)&&(l=c.find((function(e){return 1===e.public})));var h=d.a.getImage({user:s,team:l,priority:"user"}),u=d.a.displayNameShort(s),p=d.a.displayName(s,!0);return Object(i.h)("div",{class:"d-flex flex-row position-relative font-weight-light mb-1"},l?Object(i.h)(e,null,Object(i.h)("a",{href:"/teams/public/"+l.uuidv4,title:l.name,onClick:function(e){return m(e,l.uuidv4)},class:"stretched-link"},Object(i.h)("div",{class:"text-center border rounded-circle imageRounded imageRoundedThumb",style:h?'background-image: url("'+h+'"); background-size: cover;':""},!h&&Object(i.h)("div",{class:"",style:"font-size: 12px; padding-top: 3px;"},u))),Object(i.h)("div",{class:"ml-2 "},p," ",Object(i.h)("span",{class:"font-weight-lighter"},"- ",l.name))):Object(i.h)(e,null,Object(i.h)("div",{class:"text-center border rounded-circle imageRounded imageRoundedThumb",style:(h?'background-image: url("'+h+'"); background-size: cover;':"")+" opacity: 0.5;"},!h&&Object(i.h)("div",{class:"text-muted",style:"font-size: 12px; padding-top: 3px;"},u)),Object(i.h)("div",{class:"ml-2"},p)))})),h>g.length&&Object(i.h)(e,null,Object(i.h)("small",{class:"text-muted"},Object(i.h)(l.c,{id:"story.limited-to"},"Limited to max 50 users.")))))},s}(i.Component))||o;t.a=u}).call(this,s("hosL").Fragment)},w5T0:function(e,t,s){"use strict";(function(e){function n(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function a(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function o(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}var i,r,c=s("hosL"),l=s("Utv1"),d=s("/eY4"),h=s("OhSV"),u=(s("Y3FI"),s("fh8t")),b=s.n(u),p=(s("go65"),s("/DnB"),s("cH0S")),m=(s("wanP"),s("ZQlJ"),s("fVsX")),f=s("aMCh"),g=(s("gcyc"),s("LbFk")),O=s("QuNB"),j=s("zUny"),v=s("ZOvn"),y={isLoading:!1,contentIsNotLoaded:!0,reloadInSec:null,reloadLastEpoch:null,reloadIsActive:!1},w=v.a.marginTop(!0,!1),x=Object(d.a)(i=function(t){function s(e){var s;return(s=t.call(this,e)||this).initComponent=function(){var e=Math.floor((new Date).getTime()/1e3);s.setState({reloadIsActive:!0,reloadLastEpoch:e},(function(){return s.tickReloadTimeer()}))},s.state=function(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?n(Object(s),!0).forEach((function(t){a(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):n(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}({},y),s.updateTimer={},s}o(s,t);var i=s.prototype;return i.tickReloadTimeer=function(){var e=this,t=this.state,s=t.reloadLastEpoch;if(t.reloadIsActive){var n=Math.floor((new Date).getTime()/1e3);this.setState({reloadInSec:60-(n-s)}),clearTimeout(this.updateTimer.tick),this.updateTimer.tick=setTimeout((function(){return e.tickReloadTimeer()}),1e3)}return!1},i.componentDidMount=function(){this.initComponent()},i.componentWillUnmount=function(){clearTimeout(this.updateTimer.tick)},i.render=function(){var t=Math.floor(l.a.normalizeBetween(this.state.reloadInSec,0,60,0,100));return Object(c.h)(e,null,Object(c.h)("div",{class:"progress fixed-top",style:"height: 2px; z-index: 999999;"},Object(c.h)("div",{class:"progress-bar",role:"progressbar",style:"width: "+t+"%;","aria-valuenow":t,"aria-valuemin":"0","aria-valuemax":"100"})))},s}(c.Component))||i,k=Object(d.a)(r=function(t){function s(e){var s;return(s=t.call(this,e)||this).toggleDisplayDetails=function(e){var t=e.target.closest("tr").dataset.email;s.props.stores.appState.toggleDisplayDetails(t)},s.adminToggleEditUser=function(e){e.stopPropagation();var t=e.target.closest("tr").dataset.email;s.props.stores.appState.toggleEditUserDetails(t)},s.adminSignupEdit=function(e){var t,n=s.props.raceid,a=s.props.stores.raceStore,o=e.target.id,i=e.target.value,r=e.target.dataset,c=((t={raceClassId:r.classid,contestantId:r.contestantid})["raceClassContestant"+l.a.ucfirst(o)]=i,t);clearTimeout(s.updateTimer[o]),s.updateTimer[o]=setTimeout((function(){return new Promise((function(e){return a.editClass({id:n,data:c}),e()}))}),500)},s.lockAllWorkoutsInRace=function(){return new Promise((function(e,t){return Promise.resolve(s.props.stores.raceStore.lockAllWorkoutsInRace({id:s.props.raceid})).then((function(n){try{return s.setState({lockMessage:n}),e()}catch(e){return t(e)}}),t)}))},s.filterByClass=function(e){var t=e.target.closest("button").dataset.id;s.props.stores.appState.toggleSelectedClassId(t,!0),s.closeDrawerMusher(),s.closeDrawerCheckpoint()},s.toggleDrawer=function(){s.setState({showDrawer:!s.state.showDrawer,showDrawerCheckpoint:!1,showDrawerMusher:!1})},s.toggleDrawerMusher=function(e){var t=e.target.closest(".musher").dataset.bib;s.selectMusher(t)},s.selectMusher=function(e){s.setState({selectedMusherBib:e,showDrawerMusher:!0,showDrawerCheckpoint:!1,showDrawer:!1})},s.closeDrawerMusher=function(){s.setState({selectedMusherBib:"",showDrawerMusher:!1})},s.toggleDrawerCheckpoint=function(e){var t=e.target.closest(".checkpoint").dataset.id;s.selectCheckpoint(t)},s.selectCheckpoint=function(e){s.setState({selectedCheckpointId:e,showDrawerCheckpoint:!0,showDrawerMusher:!1,showDrawer:!1})},s.closeDrawerCheckpoint=function(){s.setState({selectedCheckpointId:"",showDrawerCheckpoint:!1})},s.state={showDrawer:!1},s.inputRef={},s.updateTimer={},s}o(s,t);var n=s.prototype;return n.loadRace=function(e){return new Promise(function(t,s){var n,a,o,i;return n=this,void 0===e&&(e=this.props),this.setState({isLoading:!0}),a=e.stores.raceStore,o=e.raceid,Promise.resolve(a.load(o)).then(function(){try{if((i=a.race.classes.filter((function(e){return e.contestants&&e.contestants.length>0})).map((function(e){return e.contestants.filter((function(e){return e.team>0})).map((function(e){return e.team}))})).flat()).length>0&&o)return Promise.resolve(a.loadTeams(i.join(","))).then(function(){try{return Promise.resolve(a.loadWorkoutSummary(i.join(","),o)).then(function(){try{return a.getWorkoutSummaryActiveTeams(),e.call(this)}catch(e){return s(e)}}.bind(this),s)}catch(e){return s(e)}}.bind(this),s);function e(){return a.getAllClassesSortedBy(),clearTimeout(this.updateTimer.reload),this.updateTimer.reload=setTimeout((function(){return new Promise((function(e){var t=Math.floor((new Date).getTime()/1e3);return n.setState({reloadLastEpoch:t}),n.loadRace(),e()}))}),6e4),this.setState({isLoading:!1,contentIsNotLoaded:!1}),t()}return e.call(this)}catch(e){return s(e)}}.bind(this),s)}.bind(this))},n.componentWillUnmount=function(){clearTimeout(this.updateTimer.reload),clearTimeout(this.updateTimer.tick)},n.componentDidMount=function(){this.loadRace()},n.render=function(){var t=this,s=this.state,n=s.contentIsNotLoaded,a=s.lockMessage,o=s.showDrawer,i=s.reloadLastEpoch,r=s.selectedMusherBib,d=s.selectedCheckpointId,u=s.showDrawerCheckpoint,y=s.showDrawerMusher,k=this.props.stores,S=k.userStore,I=k.raceStore,C=k.appState,T=S.user,D=void 0===T?{}:T,P=S.isAdmin,R=D.language,A=void 0===R?"en":R,z=C.displayDetails,F=C.editUserDetails,L=C.selectedClassIds,E=void 0===L?[]:L,U=I.race,M=void 0===U?{}:U,_=I.classes,N=void 0===_?[]:_,B=new Date(M.endDate);B.setHours(B.getHours()+2);var H=1===M.liveRace;return Object(c.h)(e,null,Object(c.h)(m.a,{height:w},Object(c.h)("div",{class:"d-flex justify-content-between align-items-center w-100"},Object(c.h)("div",{class:"d-flex align-items-center"},Object(c.h)("span",{class:"",style:"font-size: 2.3em;"},Object(c.h)("a",{href:"/app-races/"+M.id},Object(c.h)("i",{class:"fas fa-angle-left"}))),Object(c.h)("span",{class:"ml-4 text-primary",style:"font-size: 1.4em;"},Object(c.h)("a",{href:"/app-races/"+M.id+"/tracking"},Object(c.h)("i",{class:"fas fa-map-marked"})))),Object(c.h)("div",null,Object(c.h)("a",{href:"/app-races/"+M.id},Object(c.h)("span",{class:"font-weight-normal text-white",style:"font-size: 1.2em;"},M.title))),Object(c.h)("div",{class:"d-flex align-items-center"},P&&Object(c.h)(e,null,Object(c.h)("button",{class:"btn btn-lg btn-block btn-success my-3",onClick:this.toggleDrawer},Object(c.h)("i",{class:"fas fa-clock"}))))),Object(c.h)("div",{class:"w-100 overflow-hidden"},Object(c.h)("div",{class:"d-flex flex-row flex-nowrap pb-2 px-1",style:"overflow: auto; scroll-snap-type: x mandatory;"},M.classes&&M.classes.sort((function(e,t){return e.distance-t.distance})).map((function(s,n){return Object(c.h)(e,null,Object(c.h)("div",{class:"col px-0 pt-0"},Object(c.h)("button",{type:"button",class:"btn btn-block "+v.a.getPillClass(M.classes.length,n)+" rounded-none "+(E.indexOf(s.id)>-1?"btn-primary":"btn-outline-primary")+" text-nowrap",style:"text-overflow: ellipsis; overflow: hidden;",onClick:t.filterByClass,"data-id":s.id},s.title)))}))))),Object(c.h)("div",{class:"container-fluid position-relative p-0 overflow-auto bg-light",style:"margin-top: "+w+"; height: calc(100vh - "+w+"); z-index: 9999;"},Object(c.h)("div",{class:"col-12"},Object(c.h)(x,{stores:this.props.stores}),H?Object(c.h)(e,null):Object(c.h)(e,null,D.email&&Object(c.h)("div",{class:"alert alert-primary",role:"alert"},"no"===A&&Object(c.h)(e,null,"Resultatene hentes direkte fra treningsøktene i QPaws appen.",Object(c.h)("br",null),Object(c.h)("strong",null,"For at treningsøktene skal bli registrert må øktene:"),Object(c.h)("ul",null,Object(c.h)("li",null,"Ha riktig dato som er innenfor løpsperioden."),Object(c.h)("li",null,"Være markert som 'Konkurranse'."),Object(c.h)("li",null,"Være registrert på teamet som er påmeldt."))),"en"===A&&Object(c.h)(e,null,"The results are imported directly from the workouts inside QPaws app.",Object(c.h)("br",null),Object(c.h)("strong",null,"To make sure your workouts are registered check the following:"),Object(c.h)("ul",null,Object(c.h)("li",null,"Use the correct date on your workout. Has to be inside the race period."),Object(c.h)("li",null,"Mark the workout as 'Race'."),Object(c.h)("li",null,"Workout has to be on the same team as you signed up with."))))),M.resultsUrl&&Object(c.h)("div",{class:"p-3 my-2 bg-light"},Object(c.h)("a",{href:M.resultsUrl,target:"_blank",rel:"noreferrer",native:!0},M.resultsText?M.resultsText:Object(c.h)(e,null,Object(c.h)(h.c,{id:"races.results-here"},"Se resultater her")," ")," ",Object(c.h)("i",{class:"fas fa-chevron-circle-right"}))),(n||!N||0===N.length)&&Object(c.h)("div",{class:"d-flex justify-content-center my-5 py-5"},Object(c.h)("div",{class:"spinner-border text-primary",role:"status"},Object(c.h)("span",{class:"sr-only"},"Loading...")))),Object(c.h)("div",{class:"col-12"},M.classes&&M.classes.filter((function(e){return!(E.length>0)||E.indexOf(e.id)>-1})).sort((function(e,t){return e.distance-t.distance})).map((function(s){return Object(c.h)(e,null,Object(c.h)("div",{class:"mt-2 mb-5"},M.resultDanger&&Object(c.h)("div",{class:"alert alert-danger",role:"alert"},Object(c.h)("div",{class:"spinner-grow text-danger float-left",role:"status"},Object(c.h)("span",{class:"sr-only"},"Loading...")),Object(c.h)("i",{class:"fas fa-exclamation-triangle float-left mr-4",style:"font-size: 2.0em;"}),Object(c.h)(b.a,{markdown:v.a.replaceImages(M.resultDanger,M.images,A),markdownOpts:v.a.getMarkdownOptions()})),M.resultWarning&&Object(c.h)("div",{class:"alert alert-warning",role:"alert"},Object(c.h)("i",{class:"fas fa-exclamation float-left mr-4",style:"font-size: 2.0em;"}),Object(c.h)(b.a,{markdown:v.a.replaceImages(M.resultWarning,M.images,A),markdownOpts:v.a.getMarkdownOptions()})),M.resultSuccess&&Object(c.h)("div",{class:"alert alert-success",role:"alert"},Object(c.h)("i",{class:"fas fa-check float-left mr-4",style:"font-size: 2.0em;"}),Object(c.h)(b.a,{markdown:v.a.replaceImages(M.resultSuccess,M.images,A),markdownOpts:v.a.getMarkdownOptions()})),M.liveRace?Object(c.h)(e,null,Object(c.h)(f.a,{stores:t.props.stores,race:M,currentClass:s,reloadLastEpoch:i,key:"raceclass-"+s.id,onClickMusher:t.toggleDrawerMusher,onClickCheckpoint:t.toggleDrawerCheckpoint,selectedCheckpointId:d})):Object(c.h)(e,null,Object(c.h)("span",{class:"float-right"},Object(c.h)("span",{class:"text-muted"},Object(c.h)(h.c,{id:"races.mushers"},"Mushers"),": ",s.totalMushers||0),Object(c.h)("span",{class:"text-muted ml-4"},Object(c.h)(h.c,{id:"races.finished-mushers"},"Finished mushers"),": ",s.totalFinished||0," ")),Object(c.h)("div",{class:"table-responsive-md"},Object(c.h)("table",{class:"table table-sm table-striped"},Object(c.h)("thead",null,Object(c.h)("tr",null,Object(c.h)("th",{scope:"col"},"#"),Object(c.h)("th",{scope:"col",style:"min-width: 200px;"},Object(c.h)(h.c,{id:"races.name"},"Navn")),P&&Object(c.h)(e,null,Object(c.h)("th",{class:"d-none d-lg-table-cell",scope:"col"},Object(c.h)("i",{class:"fas fa-user-shield"})," Cellphone"),Object(c.h)("th",{class:"d-none d-lg-table-cell",scope:"col"},Object(c.h)("i",{class:"fas fa-user-shield"})," Email")),P&&Object(c.h)("th",{scope:"col",class:"d-none d-lg-table-cell",style:"min-width: 400px;"},Object(c.h)(h.c,{id:"races.stages"},"Etapper")),Object(c.h)("th",{scope:"col"},Object(c.h)(h.c,{id:"races.result"},"Resultat")))),Object(c.h)("tbody",null,N[s.id]&&N[s.id].contestants&&N[s.id].contestants.map((function(n,a){var o=n.musher,i=n.currentTeam,r=n.currentStages,d=n.currentResults,h=n.completed,u=n.normalizedDuration,p=n.weightedNormalizedDuration,m=n.isDone,f=n.finishedDate,g=n.totalWorkoutTimeUsedSec,O=I.getTotalsByTeamId(i.id);return Object(c.h)(e,null,Object(c.h)("tr",{onClick:t.toggleDisplayDetails,"data-email":o.email},Object(c.h)("th",{scope:"row"},a+1,P&&d&&Object(c.h)(e,null,Object(c.h)("br",null),d.isLocked?Object(c.h)("i",{class:"fas fa-lock text-danger mr-2"}):Object(c.h)("i",{class:"fas fa-lock-open text-success mr-2"}))),Object(c.h)("td",{class:z[o.email]?"font-weight-bold":"",style:z[o.email]?"":"line-height: 0.8em;"},z[o.email]?Object(c.h)(e,null,o.firstname," ",o.lastname,Object(c.h)("br",null),Object(c.h)("span",{class:"text-muted"},i.name),Object(c.h)("br",null),Object(c.h)("small",{class:"text-muted"},o.sportsClub),Object(c.h)("br",null),o.facebook&&Object(c.h)("a",{class:"mr-2",href:v.a.asFacebookLink(o.facebook),native:!0,target:"_blank",rel:"noreferrer"},Object(c.h)("i",{class:"fab fa-facebook"})),o.instagram&&Object(c.h)("a",{class:"mr-2",href:v.a.asInstagramLink(o.instagram),native:!0,target:"_blank",rel:"noreferrer"},Object(c.h)("i",{class:"fab fa-instagram"})),o.price1&&Object(c.h)("div",{class:"font-weight-lighter"},Object(c.h)("i",{class:"fas fa-trophy text-warning"})," ",o.price1,o.priceSent&&Object(c.h)(e,null,Object(c.h)("i",{class:"fas fa-check text-success"}))),o.price2&&Object(c.h)("div",{class:"font-weight-lighter"},Object(c.h)("i",{class:"fas fa-trophy text-warning"})," ",o.price2),o.price3&&Object(c.h)("div",{class:"font-weight-lighter"},Object(c.h)("i",{class:"fas fa-trophy text-warning"})," ",o.price3)):Object(c.h)(e,null,o.price1&&Object(c.h)("span",{class:"float-right text-warning",style:"font-size: 1.2em;"},Object(c.h)("i",{class:"fas fa-trophy"}),o.priceSent&&Object(c.h)(e,null,Object(c.h)("i",{class:"fas fa-check text-success"}))),Object(c.h)("nobr",null,o.firstname," ",o.lastname,Object(c.h)("br",null),Object(c.h)("small",{class:"text-muted"},o.sportsClub),Object(c.h)("br",null)))),P&&Object(c.h)(e,null,Object(c.h)("td",{class:"d-none d-lg-table-cell"},o.cellphone),Object(c.h)("td",{class:"d-none d-lg-table-cell"},o.email)),P&&Object(c.h)("td",{class:"d-none d-lg-table-cell"},P&&Object(c.h)(e,null,Object(c.h)("button",{class:"btn btn-primary btn-sm float-right",onClick:t.adminToggleEditUser},Object(c.h)("i",{class:"fas fa-user-edit"}))),P&&F[o.email]&&Object(c.h)(e,null,Object(c.h)("h5",null,"Admin edit:"),Object(c.h)("div",{class:"form-group row my-0"},Object(c.h)("label",{class:"col-sm-2 col-form-label text-right"},"Email"),Object(c.h)("div",{class:"col-sm-10"},o.email)),Object(c.h)("div",{class:"form-group row my-0"},Object(c.h)("label",{class:"col-sm-2 col-form-label text-right"},"Cellphone"),Object(c.h)("div",{class:"col-sm-10"},o.cellphone)),Object(c.h)("div",{class:"form-group row my-0"},Object(c.h)("label",{for:"team",class:"col-sm-2 col-form-label text-right"},"Race status"),Object(c.h)("div",{class:"col-sm-10"},Object(c.h)("select",{class:"form-control-plaintext",id:"raceStatus","data-classid":o.class,"data-contestantid":o.id,onInput:t.adminSignupEdit,value:o.raceStatus},Object(c.h)("option",{value:""},"-- Choose race status --"),Object(c.h)("option",{value:"OK"},"OK - Everything ok"),Object(c.h)("option",{value:"DNS"},"DNS - Did Not Start"),Object(c.h)("option",{value:"DNF"},"DNF - Did Not Finish"),Object(c.h)("option",{value:"DNQ"},"DNQ - Did not qualify"),Object(c.h)("option",{value:"DQ"},"DQ - Disqualified"),Object(c.h)("option",{value:"DC"},"DC - Data changed by user")))),Object(c.h)("div",{class:"form-group row my-0"},Object(c.h)("label",{for:"raceComment",class:"col-sm-2 col-form-label text-right"},"Race comment"),Object(c.h)("div",{class:"col-sm-10"},Object(c.h)("input",{type:"text",class:"form-control-plaintext",id:"raceComment","data-classid":o.class,"data-contestantid":o.id,onInput:t.adminSignupEdit,value:o.raceComment}))),Object(c.h)("div",{class:"form-group row my-0"},Object(c.h)("label",{for:"gpxResultsApproved",class:"col-sm-2 col-form-label text-right"},"GPX Results approved (date)"),Object(c.h)("div",{class:"col-sm-10"},Object(c.h)("input",{type:"date",class:"form-control-plaintext",id:"gpxResultsApproved","data-classid":o.class,"data-contestantid":o.id,onInput:t.adminSignupEdit,value:o.gpxResultsApproved?l.a.isoDate(o.gpxResultsApproved,!1,!1,!0):null}))),Object(c.h)("div",{class:"form-group row my-0"},Object(c.h)("label",{for:"price1",class:"col-sm-2 col-form-label text-right"},"Price 1"),Object(c.h)("div",{class:"col-sm-10"},Object(c.h)("input",{type:"text",class:"form-control-plaintext",id:"price1","data-classid":o.class,"data-contestantid":o.id,onInput:t.adminSignupEdit,value:o.price1}))),Object(c.h)("div",{class:"form-group row my-0"},Object(c.h)("label",{for:"price2",class:"col-sm-2 col-form-label text-right"},"Price 2"),Object(c.h)("div",{class:"col-sm-10"},Object(c.h)("input",{type:"text",class:"form-control-plaintext",id:"price2","data-classid":o.class,"data-contestantid":o.id,onInput:t.adminSignupEdit,value:o.price2}))),Object(c.h)("div",{class:"form-group row my-0"},Object(c.h)("label",{for:"price3",class:"col-sm-2 col-form-label text-right"},"Price 3"),Object(c.h)("div",{class:"col-sm-10"},Object(c.h)("input",{type:"text",class:"form-control-plaintext",id:"price3","data-classid":o.class,"data-contestantid":o.id,onInput:t.adminSignupEdit,value:o.price3}))),Object(c.h)("div",{class:"form-group row my-0"},Object(c.h)("label",{for:"priceSent",class:"col-sm-2 col-form-label text-right"},"Price sent"),Object(c.h)("div",{class:"col-sm-10"},Object(c.h)("input",{type:"date",class:"form-control-plaintext",id:"priceSent","data-classid":o.class,"data-contestantid":o.id,onInput:t.adminSignupEdit,value:o.priceSent?l.a.isoDate(o.priceSent,!1,!1,!0):null})))),P&&Object(c.h)("div",{class:"d-flex flex-wrap"},r&&r.map((function(t,n){var a=t.distanceKm/s.distance*100,i=(a>100||parseInt(a,10),Math.floor(new Date(t.date).getTime()/1e3)),r=new Date(0);r.setUTCSeconds(i+parseInt(t.duration,10));t.images.flat();return z[o.email]?Object(c.h)(e,null,Object(c.h)("div",{class:"bg-light border rounded-lg  text-right position-relative mr-1 mb-1",style:"width: 350px; min-width: 320px;"},Object(c.h)("svg",{viewBox:"0 0 300 100",class:"position-absolute",style:"width: 100%; height: 95%; bottom: 0px; left: 0px; z-index: 0;"},Object(c.h)("path",{d:""+t.svgElevation,style:"fill: #0063FF; stroke: #0063FF; stroke-width: 2; opacity: 0.2;"})),Object(c.h)("div",{class:"position-relative px-3"},Object(c.h)("span",{class:"position-absolute",style:"top: 3px; left: 3px; font-size: 1.3em;"},n+1),Object(c.h)("small",null,P&&Object(c.h)("span",{class:"position-absolute",style:"top: 0px; right: -5px;"},t.isLocked?Object(c.h)("i",{class:"fas fa-lock text-danger"}):Object(c.h)("i",{class:"fas fa-lock-open text-success"})),Object(c.h)("span",{class:"float-left"},Object(c.h)("nobr",null,Object(c.h)("i",{style:"width: 20px;",class:"fas fa-sign-out-alt text-muted"})," ",l.a.formatDate(t.date,{locale:A,hour12:!1,hour:"2-digit",minute:"2-digit"})),Object(c.h)("nobr",null,Object(c.h)("i",{style:"width: 20px;",class:"fas fa-sign-in-alt text-muted"})," ",l.a.formatDate(r,{locale:A,hour12:!1,hour:"2-digit",minute:"2-digit"}))),Object(c.h)("span",{class:"float-right"},Object(c.h)("nobr",null,Object(c.h)("i",{style:"width: 20px;",class:"fas fa-road text-muted"})," ",l.a.format(t.distanceKm,1)||"n/a"," ",Object(c.h)("span",{class:"font-weight-lighter"},"km")),Object(c.h)("nobr",null,Object(c.h)("i",{style:"width: 20px;",class:"fas fa-mountain text-muted"})," ",l.a.format(t.elevation,0)||"n/a"," ",Object(c.h)("span",{class:"font-weight-lighter"},"m")),Object(c.h)("nobr",null,Object(c.h)("i",{style:"width: 20px;",class:"fas fa-tachometer-alt text-muted"})," ",l.a.format(t.speedAvg,1)||"n/a"," ",Object(c.h)("span",{class:"font-weight-lighter"},"km/t")),Object(c.h)("br",null),Object(c.h)("nobr",null,Object(c.h)("i",{style:"width: 20px;",class:"fas fa-clock text-muted"})," ",l.a.secToHms(t.duration)||"n/a"),Object(c.h)("nobr",null,Object(c.h)("i",{style:"width: 20px;",class:"fas fa-moon text-muted"})," ",l.a.secToHms(t.rest)||"n/a"),Object(c.h)("nobr",null,Object(c.h)("i",{style:"width: 20px;",class:"fas fa-running text-muted"})," ",l.a.secToHms(t.duration-t.rest)||"n/a"),Object(c.h)("br",null),Object(c.h)("nobr",null,Object(c.h)("i",{style:"width: 20px;",class:"fas fa-dog text-muted"})," ",l.a.format(t.avgDogs,0)||"n/a")))))):Object(c.h)(e,null,Object(c.h)("div",{class:"bg-light border rounded-lg text-right position-relative px-3 mr-1 mb-1",style:"width: 300px; min-width: 300px;"},Object(c.h)("small",null,P&&Object(c.h)("span",{class:"position-absolute",style:"top: 2px; right: -5px;"},t.isLocked?Object(c.h)("i",{class:"fas fa-lock text-danger"}):Object(c.h)("i",{class:"fas fa-lock-open text-sucess"})),Object(c.h)("span",{class:"float-left"},n+1),Object(c.h)("nobr",null,Object(c.h)("i",{style:"width: 20px;",class:"fas fa-road text-muted"})," ",l.a.format(t.distanceKm,1)||"n/a"," ",Object(c.h)("span",{class:"font-weight-lighter"},"km")),Object(c.h)("nobr",null,Object(c.h)("i",{style:"width: 20px;",class:"fas fa-tachometer-alt text-muted"})," ",l.a.format(t.speedAvg,1)||"n/a"," ",Object(c.h)("span",{class:"font-weight-lighter"},"km/t")),Object(c.h)("nobr",null,Object(c.h)("i",{style:"width: 20px;",class:"fas fa-clock text-muted"})," ",l.a.secToHms(t.duration)||"n/a"))))})))),Object(c.h)("td",{class:"text-right position-relative pl-4"},function(t){switch(t.raceStatus){case"OK":return Object(c.h)(e,null,Object(c.h)("span",{class:"position-absolute rounded-lg",style:"top: 10px; left: 0px;"},Object(c.h)("i",{class:"fas fa-check text-success"})));case"DNS":case"DNF":case"DNQ":case"DQ":return Object(c.h)(e,null,Object(c.h)("span",{class:"position-absolute bg-danger text-white text-center px-2 rounded-lg border",style:"top: 5px; left: -100px; width: 80px"},Object(c.h)("i",{class:"fas fa-info-circle"})," ",t.raceStatus));case"DC":return Object(c.h)(e,null,Object(c.h)("span",{class:"position-absolute bg-warning text-white text-center px-2 rounded-lg border",style:"top: 5px; left: -150px; width: 80px"},Object(c.h)("i",{class:"fas fa-info-circle"})," ",t.raceStatus));default:return""}}(o),o.raceComment&&Object(c.h)(e,null,Object(c.h)("div",{class:"alert alert-warning text-left",role:"alert"},Object(c.h)("i",{class:"fas fa-exclamation-triangle float-left mr-4",style:"font-size: 2.0em;"}),Object(c.h)(b.a,{markdown:v.a.replaceImages(o.raceComment,M.images,A),markdownOpts:v.a.getMarkdownOptions()}))),P&&d.lastUpdated>B&&Object(c.h)(e,null,Object(c.h)("div",{class:"alert alert-danger text-left d-none d-md-block",role:"alert"},Object(c.h)("i",{class:"fas fa-exclamation-triangle float-left mr-4",style:"font-size: 2.0em;"}),Object(c.h)("i",{class:"fas fa-user-shield"})," Last changed: ",l.a.formatDate(d.lastUpdated,{locale:A,hour12:!1,hour:"2-digit",minute:"2-digit"}))),h>=99?Object(c.h)("span",{class:"position-absolute",style:"top: 10px; left: 0px;"},Object(c.h)("i",{class:"fas fa-flag-checkered text-success"})):"",Object(c.h)("small",null,z[o.email]?Object(c.h)(e,null,Object(c.h)("nobr",null,Object(c.h)("i",{style:"width: 20px;",class:"fas fa-road text-muted"})," ",l.a.format(d.distanceKm,1)||"n/a"," ",Object(c.h)("span",{class:"font-weight-lighter"},"km")),Object(c.h)("nobr",null,Object(c.h)("i",{style:"width: 20px;",class:"fas fa-mountain text-muted"})," ",l.a.format(d.elevation,0)||"n/a"," ",Object(c.h)("span",{class:"font-weight-lighter"},"m")),Object(c.h)("div",{class:"progress mb-1",style:"height: 3px;"},Object(c.h)("div",{class:"progress-bar "+(h>=99?"bg-success":""),role:"progressbar",style:"width: "+h+"%","aria-valuenow":""+h,"aria-valuemin":"0","aria-valuemax":"100"})),M.nonstop?Object(c.h)(e,null,Object(c.h)("nobr",null,Object(c.h)("i",{style:"width: 20px;",class:"fas fa-clock text-muted"})," ",l.a.secToHms(g)||"n/a"),Object(c.h)("nobr",null,Object(c.h)("i",{style:"width: 20px;",class:"fas fa-moon text-muted"})," ",l.a.secToHms(O.totalRest)||"n/a"),Object(c.h)("br",null),Object(c.h)("nobr",null,Object(c.h)("i",{style:"width: 20px;",class:"fas fa-calendar text-muted"})," ",l.a.isoDate(O.firstEpoch)," - ",Object(c.h)("i",{style:"width: 20px;",class:"fas fa-calendar text-muted"})," ",l.a.isoDate(f)),P&&Object(c.h)(e,null,Object(c.h)("br",null),Object(c.h)("div",{class:"text-danger"},O.firstGpxStartEpoch&&Object(c.h)(e,null,Object(c.h)("nobr",null,"firstGpxStartEpoch: ",l.a.isoDate(O.firstGpxStartEpoch)),Object(c.h)("br",null)),O.lastGpxStartEpoch&&Object(c.h)(e,null,Object(c.h)("nobr",null,"lastGpxStartEpoch: ",l.a.isoDate(O.lastGpxStartEpoch)),Object(c.h)("br",null))))):Object(c.h)(e,null,Object(c.h)("nobr",null,Object(c.h)("i",{style:"width: 20px;",class:"fas fa-clock text-muted"})," ",l.a.secToHms(d.duration)||"n/a"),Object(c.h)("nobr",null,Object(c.h)("i",{style:"width: 20px;",class:"fas fa-moon text-muted"})," ",l.a.secToHms(d.rest)||"n/a"),Object(c.h)("nobr",null,Object(c.h)("i",{style:"width: 20px;",class:"fas fa-running text-muted"})," ",l.a.secToHms(d.duration-d.rest)||"n/a"),Object(c.h)("br",null),1===m&&Object(c.h)(e,null,Object(c.h)("nobr",{class:"font-weight-bold"},Object(c.h)("span",{class:"font-weight-lighter text-muted"},"Normalized to race distance:")," ",Object(c.h)("i",{style:"width: 20px;",class:"fas fa-clock text-muted"})," ",l.a.secToHms(u)||"n/a"),Object(c.h)("br",null)),1===m&&Object(c.h)(e,null,Object(c.h)("nobr",{class:"font-weight-bold"},Object(c.h)("span",{class:"font-weight-lighter text-muted"},"Normalized:")," ",Object(c.h)("i",{style:"width: 20px;",class:"fas fa-clock text-muted"})," ",l.a.secToHms(p)||"n/a"),Object(c.h)("br",null)))):Object(c.h)(e,null,Object(c.h)("nobr",null,Object(c.h)("i",{style:"width: 20px;",class:"fas fa-road text-muted"})," ",l.a.format(d.distanceKm,1)||"n/a"," ",Object(c.h)("span",{class:"font-weight-lighter"},"km")),Object(c.h)("nobr",null,Object(c.h)("i",{style:"width: 20px;",class:"fas fa-mountain text-muted"})," ",l.a.format(d.elevation,0)||"n/a"," ",Object(c.h)("span",{class:"font-weight-lighter"},"m")),Object(c.h)("div",{class:"progress mb-1",style:"height: 3px;"},Object(c.h)("div",{class:"progress-bar "+(h>=99?"bg-success":""),role:"progressbar",style:"width: "+h+"%","aria-valuenow":""+h,"aria-valuemin":"0","aria-valuemax":"100"})),M.nonstop?Object(c.h)(e,null,Object(c.h)("nobr",null,Object(c.h)("i",{style:"width: 20px;",class:"fas fa-clock text-muted"})," ",l.a.secToHms(g)||"n/a"),Object(c.h)("nobr",null,Object(c.h)("i",{style:"width: 20px;",class:"fas fa-moon text-muted"})," ",l.a.secToHms(O.totalRest)||"n/a")):Object(c.h)(e,null,1===m?Object(c.h)(e,null,Object(c.h)("nobr",{class:"font-weight-bold"},Object(c.h)("i",{style:"width: 20px;",class:"fas fa-clock text-muted"})," ",l.a.secToHms(p)||"n/a"),Object(c.h)("br",null)):Object(c.h)(e,null,Object(c.h)("nobr",null,Object(c.h)("i",{style:"width: 20px;",class:"fas fa-clock text-muted"})," ",l.a.secToHms(d.duration)||"n/a"),Object(c.h)("br",null))))))))}))))),Object(c.h)("div",{class:"text-center text-muted"},Object(c.h)("small",null,"no"===A&&Object(c.h)(e,null,"OBS! Ref reglene så er det ikke lov til å endre treningsøktene som er med i konkurransen etter at løpet er ferdig.",Object(c.h)("br",null),"Forsøk på dette vil resultere i automatisk deplassering på listene."),"en"===A&&Object(c.h)(e,null,"IMPORTANT! According to the rules: It is NOT allowed to try alter the workouts related to the competition after the race has ended.",Object(c.h)("br",null),"Attempts will result in automatic deplacement on the resultlists."))),P&&Object(c.h)(e,null,Object(c.h)("button",{class:"btn btn-danger btn-lg float-right m-4",onClick:t.lockAllWorkoutsInRace},"Lock all workouts in this race"),Object(c.h)("xmp",{class:"m-5"},JSON.stringify(a,null,4))),Object(c.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-3 mb-2"},Object(c.h)("a",{class:"btn btn-lg btn-block btn-primary",href:"https://homerunrace.no/index#/race/"+M.id+"/results"},"All results")))))})))),o&&Object(c.h)(e,null,Object(c.h)(p.a,{stores:this.props.stores,onCloseClick:this.toggleDrawer},Object(c.h)(g.a,{stores:this.props.stores}))),u&&Object(c.h)(e,null,Object(c.h)(p.a,{stores:this.props.stores,onCloseClick:this.closeDrawerCheckpoint},Object(c.h)(j.a,{stores:this.props.stores,id:d,onClickNav:this.selectCheckpoint}))),y&&Object(c.h)(e,null,Object(c.h)(p.a,{stores:this.props.stores,onCloseClick:this.closeDrawerMusher},Object(c.h)(O.a,{stores:this.props.stores,bib:r,onClickNav:this.selectMusher}))))},s}(c.Component))||r;t.a=k}).call(this,s("hosL").Fragment)},wanP:function(e,t,s){"use strict";(function(e){function n(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function a(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}var o,i=s("hosL"),r=(s("Utv1"),s("/eY4")),c=s("eK6s"),l=s.n(c),d={mouseData:{}},h=Object(r.a)(o=function(t){function s(e){var s;return(s=t.call(this,e)||this).state=function(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?n(Object(s),!0).forEach((function(t){a(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):n(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}({},d),s.svgRef=null,s}var o,r;return r=t,(o=s).prototype=Object.create(r.prototype),o.prototype.constructor=o,o.__proto__=r,s.prototype.render=function(){var t=this,s=this.props,n=s.radius,a=void 0===n?50:n,o=s.heightAdd,r=void 0===o?0:o,c=s.color,d=void 0===c?"success":c,h=s.showPercentText,u=void 0===h||h,b=s.percent,p=void 0===b?0:b,m=s.prefix,f=void 0===m?"":m,g=s.showCenterText,O=void 0!==g&&g,j=s.centerText,v=s.centerTextSize,y=s.centerTextX,w=s.centerTextY,x=s.total,k=void 0===x?"":x,S=s.totalY,I=void 0===S?"90%":S,C=s.totalX,T=void 0===C?"50%":C,D=s.totalTextAnchor,P=void 0===D?"middle":D,R=s.completed,A=void 0===R?"":R,z=s.completedY,F=void 0===z?"65%":z,L=s.completedX,E=void 0===L?"50%":L,U=s.completedTextAnchor,M=void 0===U?"middle":U,_=.3*a,N=a-_/2,B=.3*a,H=2*N*Math.PI,V=.75*H,q=V+" "+H,K="rotate(135, "+a+", "+a+")",Y=V-Math.min(Math.max(p,0),100)/100*V,W=v||a/2.5,Z=a/5;return Object(i.h)(e,null,Object(i.h)("svg",{xmlns:"http://www.w3.org/2000/svg",class:l.a.svg,width:2*a,height:2*a+r,preserveAspectRatio:"none",ref:function(e){return t.svgRef=e}},Object(i.h)("circle",{class:""+l.a.gaugeBackground,cx:a,cy:a,r:N,strokeWidth:_,strokeDasharray:q,strokeLinecap:"round",transform:K}),Object(i.h)("circle",{class:l.a[d]+" "+l.a.gauge,cx:a,cy:a,r:N,stroke:"url(#grad)",strokeDasharray:q,strokeDashoffset:Y,strokeLinecap:"round",strokeWidth:B,style:{transition:"stroke-dashoffset 0.3s"},transform:K}),u&&Object(i.h)("text",{class:l.a.gaugeText+" "+l.a[d],x:y||"50%",y:w||"50%","dominant-baseline":"middle","text-anchor":"middle","font-size":W},p," ",f),O&&Object(i.h)("text",{class:l.a.gaugeText+" "+l.a[d],x:y||"50%",y:w||"50%","dominant-baseline":"middle","text-anchor":"middle","font-size":W},j),A&&Object(i.h)("text",{class:l.a.gaugeText+" "+l.a[d],x:E,y:F,"dominant-baseline":"middle","text-anchor":M,"font-size":Z},A),Object(i.h)("text",{class:l.a.gaugeText+" "+l.a.secondary,x:T,y:I,"dominant-baseline":"middle","text-anchor":P,"font-size":Z},k)))},s}(i.Component))||o;t.a=h}).call(this,s("hosL").Fragment)},yHBq:function(e,t,s){"use strict";(function(e){function n(){return(n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}function a(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}var o,i,r=s("hosL"),c=s("/eY4"),l=s("Utv1"),d=Object(c.a)(o=function(e){function t(t){var s;return(s=e.call(this,t)||this).state={},s.containerRef=null,s}a(t,e);var s=t.prototype;return s.componentWillUnmount=function(){var e=this.props.removeIntersectionObserver;e&&e(this.containerRef)},s.componentDidMount=function(){var e=this.props.addIntersectionObserver;e&&e(this.containerRef)},s.render=function(){var e=this,t=this.props,s=t.wrapperClassNames,a=void 0===s?"":s,o=t.contentClassNames,i=void 0===o?"":o,c=t.renderContent,l=t.obj,d=void 0===l?{}:l,h=t.idx,u=t.dataFields,b=t.dataValues,p=t.sessionid,m={};return p&&(m.sessionid=p),u.forEach((function(e){return m["data-"+e]=encodeURI(b[e]||d[e])})),Object(r.h)("div",n({class:""+a,ref:function(t){return e.containerRef=t},"data-idx":h},m),Object(r.h)("div",{class:""+i,style:"display: block;"},c({obj:d,idx:h})))},t}(r.Component))||o,h=Object(c.a)(i=function(t){function s(e){var s;return(s=t.call(this,e)||this).deleteIntersectionObserver=function(){s.intersectionObserver=null},s.handleIntersection=function(e){var t=s.props.handleIntersection;"function"==typeof t&&t(e),e.forEach((function(e){var t=e.isIntersecting,s=e.target.dataset.height,n=void 0===s?0:s,a=Math.max(e.target.childNodes[0].offsetHeight,e.target.offsetHeight,e.target.scrollHeight);t?(e.target.childNodes[0].style.display="block",e.target.style.minHeight=(a>n?a:n)+"px"):e.target.style.minHeight&&(e.target.style.minHeight=(a>n?a:n)+"px",e.target.childNodes[0].style.display="none")}))},s.setupIntersectionObserver=function(){if(!("IntersectionObserver"in window)||!("IntersectionObserverEntry"in window)||!("intersectionRatio"in window.IntersectionObserverEntry.prototype))return!1;s.intersectionObserver=new IntersectionObserver(s.handleIntersection,{root:null,rootMargin:"100px",threshold:.1})},s.addIntersectionObserver=function(e){s.intersectionObserver&&e&&s.intersectionObserver.observe(e)},s.removeIntersectionObserver=function(e){s.intersectionObserver&&e&&s.intersectionObserver.unobserve(e)},s.state={},s}a(s,t);var n=s.prototype;return n.componentWillMount=function(){this.setupIntersectionObserver()},n.componentWillUnmount=function(){this.deleteIntersectionObserver()},n.render=function(){var t=this,s=this.props,n=s.data,a=void 0===n?[]:n,o=s.wrapperClassNames,i=void 0===o?"row pb-4 bg-light":o,c=s.contentClassNames,h=void 0===c?"col-12 col-sm-8 col-lg-6 offset-sm-2 offset-lg-3 mb-0 position-relative rounded rounded-lg py-3 shadow-sm":c,u=s.renderContent,b=void 0===u?function(){return Object(r.h)(e,null,"Missing render function!")}:u,p=s.dataFields,m=void 0===p?[]:p,f=s.dataValues,g=void 0===f?{}:f;return Object(r.h)("div",{class:"w-100"},a&&a.filter((function(e){return l.a.isObject(e)})).map((function(s,n){var a=s.hasOwnProperty("wrapperClassNames")?s.wrapperClassNames:i,o=s.hasOwnProperty("contentClassNames")?s.contentClassNames:h;return Object(r.h)(e,null,Object(r.h)(d,{key:"fastline-"+n+"-"+s.id,obj:s,idx:n,addIntersectionObserver:t.addIntersectionObserver,removeIntersectionObserver:t.removeIntersectionObserver,wrapperClassNames:a,contentClassNames:o,renderContent:b,dataFields:m,dataValues:g}))})))},s}(r.Component))||i;t.a=h}).call(this,s("hosL").Fragment)},zUny:function(e,t,s){"use strict";(function(e){var n,a=s("hosL"),o=s("Utv1"),i=s("/eY4"),r=(s("OhSV"),s("fh8t")),c=s.n(r),l=s("ZOvn"),d=function(e){return function(t,s){return e.map((function(e){var n=1;return"-"===e[0]&&(n=-1,e=e.substring(1)),t[e]>s[e]?n:t[e]<s[e]?-n:0})).reduce((function(e,t){return e||t}),0)}},h=Object(i.a)(n=function(t){function s(){for(var e,s=arguments.length,n=new Array(s),a=0;a<s;a++)n[a]=arguments[a];return(e=t.call.apply(t,[this].concat(n))||this).chooseSubmenu=function(t){var s=t.target.closest("button").dataset.submenu;e.setState({submenu:s})},e.toggleInfo=function(){e.setState({showInfo:!e.state.showInfo})},e}var n,i;return i=t,(n=s).prototype=Object.create(i.prototype),n.prototype.constructor=n,n.__proto__=i,s.prototype.render=function(){var t=this.props,s=t.id,n=t.onClickNav,i=void 0===n?function(){}:n,r=this.state,h=r.submenu,u=void 0===h?"detailsIn":h,b=r.showInfo,p=this.props.stores,m=p.raceStore,f=p.userStore,g=f.user,O=(void 0===g?{}:g).language,j=void 0===O?"en":O,v=p.appState.selectedClassIds,y=m.getClassById((void 0===v?[]:v)[0]),w=y.checkpoints?y.checkpoints.find((function(e){return e.id===s})):null;w=w||{};var x=m.sortedContestants,k=void 0===x?[]:x,S=y.results?y.results.slice().sort(d(["timestamp","-direction"])).filter((function(e){return e.checkpoint===s})):null,I=S?S.filter((function(e){return"in"===e.direction})):null,C=S?S.filter((function(e){return"out"===e.direction})):null,T=S?S.slice().sort(d(["legTime","timestamp"])).filter((function(e){return"in"===e.direction})):null,D=S?S.filter((function(e){return"scratched"===e.direction})):null,P=y.checkpoints?y.checkpoints.find((function(e){return e.sortOrder===w.sortOrder-1})):null,R=y.checkpoints?y.checkpoints.find((function(e){return e.sortOrder===w.sortOrder+1})):null,A=y.results&&P?y.results.slice().filter((function(e){return e.checkpoint===P.id&&"out"===e.direction})):null,z=y.results&&R?y.results.slice().filter((function(e){return e.checkpoint===R.id&&"in"===e.direction})):null,F=w.image,L=w.topImage,E=l.a.displayNameShort(w),U=L||{s3XXLargeLink:"./assets/checkpoint.png"};return Object(a.h)(e,null,Object(a.h)("div",{class:"w-100 position-absolute",style:"z-index: -1; height: 18vh; top: 0px; left: 0px; background-size: cover; background-repeat: no-repeat; background-position: 50% 50%; background-color: #a0a0a0; "+(U?'background-image: url("'+U+'");':"")}),R&&Object(a.h)("button",{class:"btn btn-link text-primary float-right mr-2 py-0",style:"font-size: 2.0em; line-height: 1.0em;",onClick:function(){return i(R.id)}},Object(a.h)("i",{class:"fas fa-angle-right"})),P&&Object(a.h)("button",{class:"btn btn-link text-primary float-right mr-2 py-0",style:"font-size: 2.0em; line-height: 1.0em;",onClick:function(){return i(P.id)}},Object(a.h)("i",{class:"fas fa-angle-left"})),Object(a.h)("div",{class:"d-flex position-relative",style:"margin-top: 16vh;"},Object(a.h)("div",{class:"position-relative text-center border rounded-circle imageRounded",style:"margin-top: -50px; "+(F?'background-image: url("'+F+'"); background-size: cover;':"background-color: #c0c0c0;")},!F&&Object(a.h)("div",{class:"text-muted",style:"font-size: 35px; padding-top: 10px;"},E),Object(a.h)("div",{class:"rounded-pill-both px-2 text-center position-absolute bg-secondary font-weight-bold",style:"bottom: -8px; right: 0; "},w.sortOrder&&"n/a"!==w.sortOrder&&Object(a.h)(e,null,w.sortOrder))),Object(a.h)("div",{class:"flex-grow-1 pl-3 text-overflow mb-3",style:"line-height: 1.2em;"},Object(a.h)("h3",{class:"mb-2"},w.name),Object(a.h)("div",null,w.cellphone&&Object(a.h)(e,null,Object(a.h)("span",{class:"text-muted"},Object(a.h)("i",{class:"fas fa-phone"}))," ",Object(a.h)("a",{href:"tel:"+w.cellphone},w.cellphone)),w.email&&Object(a.h)(e,null,Object(a.h)("a",{class:"ml-3",href:"mailto:"+w.email},Object(a.h)("i",{class:"fas fa-envelope"}))),w.facebook&&Object(a.h)(e,null,Object(a.h)("a",{class:"ml-3",href:""+l.a.asFacebookLink(w.facebook)},Object(a.h)("i",{class:"fab fa-facebook"}))),w.instagram&&Object(a.h)(e,null,Object(a.h)("a",{class:"ml-3",href:""+l.a.asInstagramLink(w.instagram)},Object(a.h)("i",{class:"fab fa-instagram"}))),w.description&&Object(a.h)(e,null,Object(a.h)("a",{class:"ml-3 text-primary",onCLick:this.toggleInfo},Object(a.h)("i",{class:"fas fa-info-circle"})))))),b&&w.description&&Object(a.h)("div",null,Object(a.h)(c.a,{markdown:l.a.replaceImages(w.description,w.images),markdownOpts:l.a.getMarkdownOptions()})),Object(a.h)("div",{class:""},Object(a.h)("div",{class:""},Object(a.h)("div",{class:"d-flex justify-content-between mt-2"},Object(a.h)("div",{class:"flex-fill bg-light rounded-lg p-3 align-middle"},Object(a.h)("div",null,Object(a.h)("small",{class:"text-muted"},Object(a.h)("i",{class:"fas fa-flag"})," Start")),Object(a.h)("div",{class:"text-center"},o.a.format(w.totalDistance||0,0)," ",Object(a.h)("span",{class:"text-muted"},"km"))),!w.isStartLine&&Object(a.h)("div",{class:"flex-fill bg-light rounded-lg p-3 align-middle"},Object(a.h)("div",null,Object(a.h)("small",{class:"text-muted"},Object(a.h)("i",{class:"fas fa-arrow-down"})," Prev")),Object(a.h)("div",{class:"text-center"},Object(a.h)("nobr",null,o.a.format(w.distanceFromPrev||0,0)," ",Object(a.h)("span",{class:"text-muted"},"km")))),Object(a.h)("div",{class:"flex-fill bg-light rounded-lg p-3 align-middle"},Object(a.h)("div",null,Object(a.h)("small",{class:"text-muted"},Object(a.h)("i",{class:"fas fa-arrow-up"})," Next")),Object(a.h)("div",{class:"text-center"},o.a.format(w.distanceToNext||0,0)," ",Object(a.h)("span",{class:"text-muted"},"km"))),Object(a.h)("div",{class:"flex-fill bg-light rounded-lg p-3 align-middle"},Object(a.h)("div",null,Object(a.h)("small",{class:"text-muted"},Object(a.h)("i",{class:"fas fa-flag-checkered"})," Finish")),Object(a.h)("div",{class:"text-center"},Object(a.h)("nobr",null,o.a.format(w.distanceToFinish||0,0)," ",Object(a.h)("span",{class:"text-muted"},"km"))))),Object(a.h)("div",{class:"d-flex justify-content-between mt-2"},w.requiredRestMinutes&&Object(a.h)("div",{class:"flex-fill bg-light rounded-lg p-3 align-middle"},Object(a.h)("div",null,Object(a.h)("small",{class:"text-muted"},Object(a.h)("i",{class:"fas fa-bed"})," Mandatory rest")),Object(a.h)("div",{class:"text-center"},Object(a.h)("nobr",null,o.a.secToHms(60*w.requiredRestMinutes,!0)),w.timeEqualization&&Object(a.h)(e,null,Object(a.h)("span",{class:"text-muted ml-2"},"+")," ",Object(a.h)("i",{class:"fas fa-user-clock"})," Time Equalization")))))),Object(a.h)("div",{class:"d-flex justify-content-center mb-3"},Object(a.h)("div",{class:"col px-0 pt-2"},Object(a.h)("button",{type:"button",class:"btn btn-block rounded-pill-left rounded-none "+("detailsIn"===u?"btn-primary":"btn-outline-primary")+" text-nowrap",style:"text-overflow: ellipsis; overflow: hidden;",onClick:this.chooseSubmenu,"data-submenu":"detailsIn"},"Details in")),Object(a.h)("div",{class:"col px-0 pt-2"},Object(a.h)("button",{type:"button",class:"btn btn-block rounded-none "+("detailsOut"===u?"btn-primary":"btn-outline-primary")+" text-nowrap",style:"text-overflow: ellipsis; overflow: hidden;",onClick:this.chooseSubmenu,"data-submenu":"detailsOut"},"Detail out")),Object(a.h)("div",{class:"col px-0 pt-2"},Object(a.h)("button",{type:"button",class:"btn btn-block rounded-pill-right rounded-none "+("legTimes"===u?"btn-primary":"btn-outline-primary")+" text-nowrap",style:"text-overflow: ellipsis; overflow: hidden;",onClick:this.chooseSubmenu,"data-submenu":"legTimes"},"Leg times"))),Object(a.h)("div",{class:"w-100 overflow-auto position-relative",style:"max-height: 60vh;"},Object(a.h)("div",{class:"table-responsive-lg"},Object(a.h)("table",{class:"table table-striped table-sm"},"detailsIn"===u&&Object(a.h)(e,null,Object(a.h)("thead",null,Object(a.h)("tr",null,Object(a.h)("th",null,"#"),Object(a.h)("th",null,"Musher"),Object(a.h)("th",null,"Time in"),Object(a.h)("th",null,"Time out"),Object(a.h)("th",null,"Time used"),Object(a.h)("th",null,"Avg speed"),Object(a.h)("th",null,"Dogs in"))),Object(a.h)("tbody",null,I&&I.map((function(t,s){var n,i=k?k.find((function(e){return e.bib===parseInt(t.bib,10)})):null,r=C.find((function(e){return e.bib===parseInt(t.bib,10)})),c=I.find((function(e){return e.bib===parseInt(t.bib,10)})),d=D.find((function(e){return e.bib===parseInt(t.bib,10)})),h=A&&A.find((function(e){return e.bib===parseInt(t.bib,10)})),u=0;return h&&t&&(n=l.a.deltaSec(h.timestamp,t.timestamp),u=w.distanceFromPrev/(n/3600)),c&&r&&c.timestamp&&r.timestamp&&l.a.deltaSec(c.timestamp,r.timestamp),Object(a.h)(e,null,Object(a.h)("tr",null,Object(a.h)("td",{class:"text-center"},s+1),Object(a.h)("td",null,Object(a.h)("div",{class:"d-flex flex-nowrap"},Object(a.h)("div",{class:"text-white font-weight-bolder pl-2 pr-1 py-0 rounded-pill-left rounded-none mr-2",style:"background-color: "+l.a.getRankingColor(s+1)+"; width: 45px;"},t.bib),Object(a.h)("div",null,Object(a.h)("nobr",null,i.flag," ",i.lastname)))),Object(a.h)("td",{class:"text-center"},!w.isStartLine&&Object(a.h)(e,null,Object(a.h)("nobr",null,l.a.formatDate(c.timestamp,{locale:j,day:"numeric",month:"numeric",hour12:!1,hour:"2-digit",minute:"2-digit"})))),Object(a.h)("td",{class:"text-center"},r&&Object(a.h)(e,null,Object(a.h)("nobr",null,l.a.formatDate(r.timestamp,{locale:j,day:"numeric",month:"numeric",hour12:!1,hour:"2-digit",minute:"2-digit"}))),d&&Object(a.h)(e,null,Object(a.h)("nobr",{class:"text-danger"},Object(a.h)("i",{class:"fas fa-times"}),l.a.formatDate(d.timestamp,{locale:j,day:"numeric",month:"numeric",hour12:!1,hour:"2-digit",minute:"2-digit"})))),Object(a.h)("td",{class:"text-center"},!w.isStartLine&&Object(a.h)(e,null,Object(a.h)("nobr",null,o.a.secToHms(n,!0)))),Object(a.h)("td",{class:"text-center"},!w.isStartLine&&Object(a.h)(e,null,Object(a.h)("nobr",null,o.a.format(u||0,1)," ",Object(a.h)("span",{class:"text-muted font-weight-lighter"},"km/t")))),Object(a.h)("td",{class:"text-center"},t.dogs)))})))),"detailsOut"===u&&Object(a.h)(e,null,Object(a.h)("thead",null,Object(a.h)("tr",null,Object(a.h)("th",null,"#"),Object(a.h)("th",null,"Musher"),Object(a.h)("th",null,"Time in"),Object(a.h)("th",null,"Time out"),Object(a.h)("th",null,"Time used"),Object(a.h)("th",null,"Rest in cp"),Object(a.h)("th",null,"Avg speed"),Object(a.h)("th",null,"Dogs out"),Object(a.h)("th",null,"Next CP"))),Object(a.h)("tbody",null,C&&C.map((function(t,s){var n=k?k.find((function(e){return e.bib===parseInt(t.bib,10)})):null;n=n||{};var i,r,c,d=I.find((function(e){return e.bib===parseInt(t.bib,10)})),h=C.find((function(e){return e.bib===parseInt(t.bib,10)})),u=D.find((function(e){return e.bib===parseInt(t.bib,10)})),b=A&&A.find((function(e){return e.bib===parseInt(t.bib,10)})),p=z&&z.find((function(e){return e.bib===parseInt(t.bib,10)})),m=0;b&&t&&(i=l.a.deltaSec(b.timestamp,t.timestamp),m=w.distanceFromPrev/(i/3600)),d&&h&&d.timestamp&&h.timestamp&&(r=l.a.deltaSec(d.timestamp,h.timestamp));var f=w.estTimeToCpMinutes||0;return f&&n.cpSortOrder===w.sortOrder&&(c=l.a.addDeltaSec(h.timestamp,60*f)),Object(a.h)(e,null,Object(a.h)("tr",null,Object(a.h)("td",{class:"text-center"},s+1),Object(a.h)("td",null,Object(a.h)("div",{class:"d-flex flex-nowrap"},Object(a.h)("div",{class:"text-white font-weight-bolder pl-2 pr-1 py-0 rounded-pill-left rounded-none mr-2",style:"background-color: "+l.a.getRankingColor(s+1)+"; width: 45px;"},t.bib),Object(a.h)("div",null,Object(a.h)("nobr",null,n.flag," ",n.lastname)))),Object(a.h)("td",{class:"text-center"},!w.isStartLine&&Object(a.h)(e,null,Object(a.h)("nobr",null,l.a.formatDate(d.timestamp,{locale:j,day:"numeric",month:"numeric",hour12:!1,hour:"2-digit",minute:"2-digit"})))),Object(a.h)("td",{class:"text-center"},h&&Object(a.h)(e,null,Object(a.h)("nobr",null,l.a.formatDate(h.timestamp,{locale:j,day:"numeric",month:"numeric",hour12:!1,hour:"2-digit",minute:"2-digit"}))),u&&Object(a.h)(e,null,Object(a.h)("nobr",{class:"text-danger"},Object(a.h)("i",{class:"fas fa-times"}),l.a.formatDate(u.timestamp,{locale:j,day:"numeric",month:"numeric",hour12:!1,hour:"2-digit",minute:"2-digit"})))),Object(a.h)("td",{class:"text-center"},!w.isStartLine&&Object(a.h)(e,null,Object(a.h)("nobr",null,o.a.secToHms(i,!0)))),Object(a.h)("td",{class:"text-center"},!w.isStartLine&&r&&Object(a.h)(e,null,Object(a.h)("nobr",null,o.a.secToHms(r,!0)))),Object(a.h)("td",{class:"text-center"},!w.isStartLine&&Object(a.h)(e,null,Object(a.h)("nobr",null,o.a.format(m||0,1)," ",Object(a.h)("span",{class:"text-muted font-weight-lighter"},"km/t")))),Object(a.h)("td",{class:"text-center"},h.dogs),Object(a.h)("td",{class:"text-center"},!w.isFinishLine&&p?Object(a.h)(e,null,Object(a.h)("nobr",null,l.a.formatDate(p.timestamp,{locale:j,day:"numeric",month:"numeric",hour12:!1,hour:"2-digit",minute:"2-digit"}))):Object(a.h)(e,null,c&&Object(a.h)(e,null,Object(a.h)("nobr",{class:"text-muted"},l.a.formatDate(c,{locale:j,day:"numeric",month:"numeric",hour12:!1,hour:"2-digit",minute:"2-digit"})))))))})))),"legTimes"===u&&Object(a.h)(e,null,Object(a.h)("thead",null,Object(a.h)("tr",null,Object(a.h)("th",null,"#"),Object(a.h)("th",null,"Musher"),Object(a.h)("th",null,"Time in"),Object(a.h)("th",null,"Time out"),Object(a.h)("th",null,"Time used"),Object(a.h)("th",null,"Avg speed"),Object(a.h)("th",null,"Dogs in"))),Object(a.h)("tbody",null,T&&T.map((function(t,s){var n,i=k?k.find((function(e){return e.bib===parseInt(t.bib,10)})):null,r=I.find((function(e){return e.bib===parseInt(t.bib,10)})),c=C.find((function(e){return e.bib===parseInt(t.bib,10)})),d=D.find((function(e){return e.bib===parseInt(t.bib,10)})),h=A&&A.find((function(e){return e.bib===parseInt(t.bib,10)})),u=0;return h&&t&&(n=l.a.deltaSec(h.timestamp,t.timestamp),u=w.distanceFromPrev/(n/3600)),Object(a.h)(e,null,Object(a.h)("tr",null,Object(a.h)("td",{class:"text-center"},s+1),Object(a.h)("td",null,Object(a.h)("div",{class:"d-flex flex-nowrap"},Object(a.h)("div",{class:"text-white font-weight-bolder pl-2 pr-1 py-0 rounded-pill-left rounded-none mr-2",style:"background-color: "+l.a.getRankingColor(s+1)+"; width: 45px;"},t.bib),Object(a.h)("div",null,Object(a.h)("nobr",null,i.flag," ",i.lastname)))),Object(a.h)("td",{class:"text-center"},!w.isStartLine&&Object(a.h)(e,null,Object(a.h)("nobr",null,l.a.formatDate(r.timestamp,{locale:j,day:"numeric",month:"numeric",hour12:!1,hour:"2-digit",minute:"2-digit"})))),Object(a.h)("td",{class:"text-center"},c&&Object(a.h)(e,null,Object(a.h)("nobr",null,l.a.formatDate(c.timestamp,{locale:j,day:"numeric",month:"numeric",hour12:!1,hour:"2-digit",minute:"2-digit"}))),d&&Object(a.h)(e,null,Object(a.h)("nobr",{class:"text-danger"},Object(a.h)("i",{class:"fas fa-times"}),l.a.formatDate(d.timestamp,{locale:j,day:"numeric",month:"numeric",hour12:!1,hour:"2-digit",minute:"2-digit"})))),Object(a.h)("td",{class:"text-center"},!w.isStartLine&&Object(a.h)(e,null,Object(a.h)("nobr",null,o.a.secToHms(n,!0)))),Object(a.h)("td",{class:"text-center"},!w.isStartLine&&Object(a.h)(e,null,Object(a.h)("nobr",null,o.a.format(u||0,1)," ",Object(a.h)("span",{class:"text-muted font-weight-lighter"},"km/t")))),Object(a.h)("td",{class:"text-center"},t.dogs)))}))))))))},s}(a.Component))||n;t.a=h}).call(this,s("hosL").Fragment)},zYNi:function(e,t,s){"use strict";(function(e){function n(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function a(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?n(Object(s),!0).forEach((function(t){o(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):n(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function o(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function i(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}var r,c,l,d,h=s("hosL"),u=(s("QRet"),s("Utv1")),b=s("/eY4"),p=s("OhSV"),m=(s("Y3FI"),s("fh8t")),f=s.n(m),g=(s("go65"),s("HQo+")),O=s("wanP"),j=s("ZQlJ"),v=s("q/oJ"),y=s("cH0S"),w=s("fVsX"),x=s("8n2v"),k=s("gWxU"),S=s("Nanz"),I=s("ZOvn"),C=I.a.marginTop(!0,!1),T=(I.a.marginTopBack(!1),I.a.marginBottom(),I.a.subMenuMarginTop(),{isLoading:!1,email:"",submenu:"ads",jwtToken:u.a.getJwtToken(),reloadInSec:null,reloadIsActive:!1,leaderboardMode:"mushers",filterByraceClass:"",showLeaderBoard:!0,showNews:!0}),D=Object(b.a)(r=function(t){function s(e){var s;return(s=t.call(this,e)||this).initComponent=function(){s.setState({reloadIsActive:!0},(function(){return s.tickReloadTimeer()}))},s.tickReloadTimeer=function(){var e=s.props.reloadLastEpoch;if(s.state.reloadIsActive){var t=Math.floor((new Date).getTime()/1e3);s.setState({reloadInSec:60-(t-e)}),clearTimeout(s.updateTimer.tick),s.updateTimer.tick=setTimeout((function(){return s.tickReloadTimeer()}),1e3)}return!1},s.state=a({},T),s.updateTimer={},s}i(s,t);var n=s.prototype;return n.componentDidMount=function(){this.initComponent()},n.componentWillUnmount=function(){clearTimeout(this.updateTimer.tick)},n.render=function(){var t=this.state.reloadInSec,s=this.props,n=s.radius,a=void 0===n?13:n,o=s.fontSize,i=void 0===o?11:o,r=s.classNames,c=void 0===r?"":r,l=Math.floor(u.a.normalizeBetween(t,0,60,0,100));return Object(h.h)(e,null,Object(h.h)("span",{class:c},Object(h.h)(O.a,{key:"gauge-reload-page",color:"primary",radius:a,showPercentText:!1,percent:l,showCenterText:!0,centerText:t,centerTextSize:i,centerTextY:"55%"})))},s}(h.Component))||r,P=Object(b.a)(c=function(t){function s(e){var s;return(s=t.call(this,e)||this).chooseSubmenu=function(e){var t=e.target.closest("button").dataset.submenu;s.setState({submenu:t})},s.state={},s}return i(s,t),s.prototype.render=function(){var t=this.props.stores,s=t.raceStore.waypoints,n=this.props,a=n.raceClass,o=void 0===a?{}:a,i=n.race,r=void 0===i?{}:i,c=n.onMarkerClick,l=void 0===c?function(){}:c;return Object(h.h)(e,null,Object(h.h)("div",{class:"d-flex justify-content-center align-items-center mb-2"},Object(h.h)("span",{style:"font-size: 1.3em;"},r.title," - ",o.title)),Object(h.h)("div",{class:"w-100 overflow-auto",style:"max-height: 60vh;"},!s||0===s.length&&Object(h.h)(e,null,Object(h.h)("div",{class:"text-center text-muted"},Object(h.h)("div",{class:"display-1"},Object(h.h)("i",{class:"fas fa-dog"})),Object(h.h)("div",{class:"w-100"},Object(h.h)("h3",null,Object(h.h)(p.c,{id:"races.no-teams-found"},"No teams found!")),Object(h.h)(p.c,{id:"races.loading-teams"},"Loading teams...")),Object(h.h)("div",{class:"spinner-border text-primary",style:"width: 3rem; height: 3rem;",role:"status"},Object(h.h)("span",{class:"sr-only"},"Loading...")))),Object(h.h)("table",{class:"table table-striped"},s&&s.map((function(t){return Object(h.h)(e,null,Object(h.h)("tr",{onClick:function(){return l(t)}},Object(h.h)("td",{style:"width: 15px;"},t.rank),Object(h.h)("td",null,Object(h.h)("div",{class:"d-flex justify-content-between align-items-start w-100"},Object(h.h)("div",{class:"rounded-circle imageRounded imageRoundedSmallIcon float-left",style:'background-image: url("'+t.image+'"); background-size: cover; border: 1px '+t.color+" solid; width: 30px !important; height: 30px;"}," "),Object(h.h)("div",{class:"flex-grow-1 ml-2"},Object(h.h)("span",{class:"text-white rounded-pill-both px-2 mr-2",style:"background-color: "+t.color+";"},t.bib),t.flag,"  ",t.title,Object(h.h)("div",null,t.finishTime<9999999999?Object(h.h)(e,null,t.diffToFirstFinishTime>0?Object(h.h)(e,null,u.a.secToHms(t.diffToFirstFinishTime)):Object(h.h)(e,null,u.a.formatDate(u.a.parseInputDate(t.finishTime),{locale:"no-NB",hour12:!1,hour:"2-digit",minute:"2-digit"}))):Object(h.h)(e,null,Object(h.h)("span",{class:"text-muted"},Object(h.h)("i",{class:"fas fa-compass"}))," ",I.a.windDirection(t.bearing),Object(h.h)("span",{class:"text-muted font-weight-light ml-3"},Object(h.h)("i",{class:"fas fa-tachometer-alt"}))," ",u.a.format(t.speed||0,1)," km/h",Object(h.h)("br",null),Object(h.h)("span",{class:"text-muted font-weight-light"},Object(h.h)("i",{class:"fas fa-flag-checkered"}))," ",u.a.format(t.distanceToFinish,1)," km",t.distanceToFinish!==t.distanceToFirst&&t.distanceToFirst>0&&Object(h.h)(e,null,Object(h.h)("span",{class:"text-muted font-weight-light ml-3"},"1st:")," ",u.a.format(t.distanceToFirst,1)," km"),t.distanceToFinish!==t.distanceToForward&&t.distanceToForward>0&&Object(h.h)(e,null,Object(h.h)("span",{class:"text-muted font-weight-light ml-3"},Object(h.h)("i",{class:"fas fa-arrow-up"}))," ",u.a.format(t.distanceToForward,1)," km"),t.distanceToBehind>0&&Object(h.h)(e,null,Object(h.h)("span",{class:"text-muted font-weight-light ml-3"},Object(h.h)("i",{class:"fas fa-arrow-down"}))," ",u.a.format(t.distanceToBehind,1)," km")))),Object(h.h)("div",null,t.finishTime<9999999999?Object(h.h)(e,null,Object(h.h)("i",{class:"fas fa-flag-checkered"})):Object(h.h)(e,null,Object(h.h)("i",{class:"fas fa-running"})))))))})))))},s}(h.Component))||c,R=Object(b.a)(l=function(t){function s(e){var s;return(s=t.call(this,e)||this).toggleAdminInfo=function(e){e.stopPropagation(),s.setState({showAdminInfo:!s.state.showAdminInfo})},s.toggleInfo=function(e){e.stopPropagation(),s.setState({showInfo:!s.state.showInfo})},s.onDogClick=function(e,t,n){e.preventDefault(),e.stopPropagation();var a=n.find((function(e){return e.uuidv4===t}));return s.setState({currentDog:a,showDog:t,dogs:n}),!1},s.chooseSubmenu=function(e){var t=e.target.closest("button").dataset.submenu;s.setState({submenu:t})},s.state={},s}return i(s,t),s.prototype.render=function(){var t=this.props.stores,s=t.raceStore,n=t.userStore,a=this.state,o=a.showAdminInfo,i=a.submenu,r=void 0===i?"details":i,c=a.showDog,l=a.currentDog,d=void 0===l?{}:l,b=s.totalTrackLength,m=this.props,g=m.wpData,v=void 0===g?{}:g,y=m.onMarkerClick,w=void 0===y?function(){}:y,x=s.findWaypointByBib(v.bib),k=n.isAdmin,S=v.bib?s.getMusherByBibId(v.bib):s.getMusherByBibEmail(v.email),C=s.getTeamById(S.team),T=C.members?C.members.find((function(e){return e.email===S.email})):{},D=(s.getClassByBib(v.bib),s.getTotalsByTeamId(S.team)),P=I.a.getImage({user:T,team:C,priority:"user"}),R=I.a.displayNameShort(T)||I.a.displayNameShort(S),A=v.color,z=I.a.hasBirthday(d.birth),F=d.birth?Math.ceil(I.a.daysUntilNextBirthday(d.birth)):365,L=u.a.format(x.totalDistanceOnTrack/b*100,0),E=s.findNearestMushers(v.bib),U=E.inFront,M=E.behind;return Object(h.h)(e,null,M.bib&&Object(h.h)("button",{class:"btn btn-link text-primary mx-2 py-0 float-right",onClick:function(){return w(M)},style:"line-height: 1.0em; font-size: 2.0em;"},Object(h.h)("i",{class:"fas fa-angle-right"})),U.bib&&Object(h.h)("button",{class:"btn btn-link text-primary mx-2 py-0 float-right",onClick:function(){return w(U)},style:"line-height: 1.0em; font-size: 2.0em;"},Object(h.h)("i",{class:"fas fa-angle-left"})),Object(h.h)("div",{class:"d-flex position-relative"},Object(h.h)("div",{class:"position-relative text-center border rounded-circle imageRounded imageRoundedMedium",style:P?'background-image: url("'+P+'"); background-size: cover;':""},!P&&Object(h.h)("div",{class:"text-muted",style:"font-size: 25px; padding-top: 5px;"},R),Object(h.h)("div",{class:"rounded-pill-both px-2 text-center position-absolute "+(A?"":"bg-secondary")+" font-weight-bold",style:"bottom: -20px; right: 0; "+(A?"background-color: "+A+";":"")},S.bib&&"n/a"!==S.bib&&Object(h.h)(e,null,S.bib))),Object(h.h)("div",{class:"flex-grow-1 pl-3 text-overflow mb-3",style:"line-height: 1.2em;"},Object(h.h)("h3",{class:"mb-0"},S.flag," ",S.firstname," ",S.lastname),Object(h.h)("h6",{class:"mb-0"},S.sportsClub||Object(h.h)(e,null," ")))),Object(h.h)("div",{class:"d-flex justify-content-center mb-3"},Object(h.h)("div",{class:"col px-0 pt-2"},Object(h.h)("button",{type:"button",class:"btn btn-block rounded-pill-left rounded-none "+("details"===r?"btn-primary":"btn-outline-primary")+" text-nowrap",style:"text-overflow: ellipsis; overflow: hidden;",onClick:this.chooseSubmenu,"data-submenu":"details"},"Details")),Object(h.h)("div",{class:"col px-0 pt-2"},Object(h.h)("button",{type:"button",class:"btn btn-block rounded-none "+("team"===r?"btn-primary":"btn-outline-primary")+" text-nowrap",style:"text-overflow: ellipsis; overflow: hidden;",onClick:this.chooseSubmenu,"data-submenu":"team"},"Team")),Object(h.h)("div",{class:"col px-0 pt-2"},Object(h.h)("button",{type:"button",class:"btn btn-block rounded-pill-right rounded-none "+("dogs"===r?"btn-primary":"btn-outline-primary")+" text-nowrap",style:"text-overflow: ellipsis; overflow: hidden;",onClick:this.chooseSubmenu,"data-submenu":"dogs"},"Dogs"))),Object(h.h)("div",{class:"w-100 overflow-auto position-relative",style:"max-height: 60vh;"},"details"===r&&Object(h.h)(e,null,Object(h.h)("div",{class:"d-flex justify-content-between"},Object(h.h)("div",{class:"flex-fill bg-light rounded-lg p-3 align-middle"},Object(h.h)("div",null,Object(h.h)("small",{class:"text-muted"},Object(h.h)("i",{class:"fas fa-list"})," Ranking")),Object(h.h)("div",{class:"text-center",style:"font-size: 2.0em;"},x.rank)),x.finishTime<9999999999?Object(h.h)(e,null,x.diffToFirstFinishTime>0?Object(h.h)(e,null,Object(h.h)("div",{class:"flex-fill bg-light rounded-lg p-3 align-middle ml-2"},Object(h.h)("div",null,Object(h.h)("small",{class:"text-muted"},Object(h.h)("i",{class:"fas fa-clock"})," Diff to 1st")),Object(h.h)("div",{class:"text-center",style:"font-size: 2.0em;"},u.a.secToHms(x.diffToFirstFinishTime)))):Object(h.h)(e,null,Object(h.h)("div",{class:"flex-fill bg-light rounded-lg p-3 align-middle ml-2"},Object(h.h)("div",null,Object(h.h)("small",{class:"text-muted"},Object(h.h)("i",{class:"fas fa-clock"})," Finish time")),Object(h.h)("div",{class:"text-center",style:"font-size: 1.5em;"},u.a.formatDate(u.a.parseInputDate(x.finishTime),{locale:"no-NB",hour12:!1,hour:"2-digit",minute:"2-digit"}))))):Object(h.h)(e,null,Object(h.h)("div",{class:"flex-fill bg-light rounded-lg p-3 align-middle ml-2"},Object(h.h)("div",null,Object(h.h)("small",{class:"text-muted"},Object(h.h)("i",{class:"fas fa-tachometer-alt"})," Current speed")),Object(h.h)("div",{class:"text-center",style:"font-size: 2.0em;"},u.a.format(x.speed||0,1)," ",Object(h.h)("span",{class:"text-muted",style:"font-size: 0.5em;"},"km/h"))),Object(h.h)("div",{class:"flex-fill bg-light rounded-lg p-3 align-middle ml-2"},Object(h.h)("div",null,Object(h.h)("small",{class:"text-muted"},Object(h.h)("i",{class:"fas fa-compass"})," Bearing")),Object(h.h)("div",{class:"text-center",style:"font-size: 2.0em;"},I.a.windDirection(x.bearing))))),Object(h.h)("div",{class:"d-flex justify-content-between mt-2"},Object(h.h)("div",{class:"flex-fill bg-light rounded-lg p-3 align-middle"},Object(h.h)("div",null,Object(h.h)("small",{class:"text-muted"},Object(h.h)("i",{class:"fas fa-road"})," Total distance")),Object(h.h)("div",{class:"text-center mt-2"},Object(h.h)(O.a,{key:"gauge-reload-page",color:"primary",radius:40,showPercentText:!1,percent:L,showCenterText:!0,centerText:L+"%",centerTextSize:18,centerTextY:"55%"})),Object(h.h)("div",{class:"text-center"},Object(h.h)("small",null,u.a.format(x.totalDistanceOnTrack,1)," / ",u.a.format(b,1)," ",Object(h.h)("span",{class:"text-muted"},"km"))))),Object(h.h)("div",{class:"d-flex justify-content-between mt-2"},x.finishTime<9999999999?Object(h.h)(e,null,x.diffToFirstFinishTime>0?Object(h.h)(e,null,Object(h.h)("div",{class:"flex-fill bg-light rounded-lg p-3 align-middle"},Object(h.h)("div",null,Object(h.h)("small",{class:"text-muted"},Object(h.h)("i",{class:"fas fa-clock"})," Finish time")),Object(h.h)("div",{class:"text-center",style:"font-size: 1.5em;"},u.a.formatDate(u.a.parseInputDate(x.finishTime),{locale:"no-NB",hour12:!1,hour:"2-digit",minute:"2-digit"})))):Object(h.h)(e,null)):Object(h.h)(e,null,Object(h.h)("div",{class:"flex-fill bg-light rounded-lg p-3 align-middle"},Object(h.h)("div",null,Object(h.h)("small",{class:"text-muted"},Object(h.h)("i",{class:"fas fa-arrow-down"})," Behind")),Object(h.h)("div",{class:"text-center"},u.a.format(x.distanceToBehind,1)," ",Object(h.h)("span",{class:"text-muted"},"km"))),Object(h.h)("div",{class:"flex-fill bg-light rounded-lg p-3 align-middle"},Object(h.h)("div",null,Object(h.h)("small",{class:"text-muted"},"Team")),Object(h.h)("div",{class:"text-center"},Object(h.h)("i",{class:"fas fa-dog"}))),Object(h.h)("div",{class:"flex-fill bg-light rounded-lg p-3 align-middle"},Object(h.h)("div",null,Object(h.h)("small",{class:"text-muted"},Object(h.h)("i",{class:"fas fa-arrow-up"})," In front")),Object(h.h)("div",{class:"text-center"},u.a.format(x.distanceToForward,1)," ",Object(h.h)("span",{class:"text-muted"},"km"))),Object(h.h)("div",{class:"flex-fill bg-light rounded-lg p-3 align-middle"},Object(h.h)("div",null,Object(h.h)("small",{class:"text-muted"},Object(h.h)("i",{class:"fas fa-flag-checkered"})," Finish")),Object(h.h)("div",{class:"text-center"},u.a.format(x.distanceToFinish,1)," ",Object(h.h)("span",{class:"text-muted"},"km"))))),D&&D.distanceKm&&Object(h.h)(e,null,Object(h.h)("div",{class:"table-responsive-lg"},Object(h.h)("table",{class:"table table-borderless"},Object(h.h)("tbody",null,Object(h.h)("tr",null,Object(h.h)("td",{style:"width: 5%;"},Object(h.h)("i",{class:"fas fa-dog"})),Object(h.h)("td",{style:"width: 60%"},Object(h.h)(p.c,{id:"races.dogs"},"Dogs")),Object(h.h)("td",{style:"width: 5%;"}," "),Object(h.h)("td",{class:"text-right",style:"width: 30%;"},C.dogs.length)),Object(h.h)("tr",null,Object(h.h)("td",null,Object(h.h)("i",{class:"fas fa-road"})),Object(h.h)("td",null,Object(h.h)(p.c,{id:"races.distance"},"Distance")),Object(h.h)("td",null," "),Object(h.h)("td",{class:"text-right"},Object(h.h)("nobr",null,D.distanceKm?u.a.format(D.distanceKm,1)+" km":"n/a"))),Object(h.h)("tr",null,Object(h.h)("td",null,Object(h.h)("i",{class:"fas fa-mountain"})),Object(h.h)("td",null,Object(h.h)(p.c,{id:"races.ascend"},"Ascending")),Object(h.h)("td",null," "),Object(h.h)("td",{class:"text-right"},Object(h.h)("nobr",null,D.elevation?u.a.format(D.elevation,0)+" m":"n/a"))),Object(h.h)("tr",null,Object(h.h)("td",null,Object(h.h)("i",{class:"fas fa-stopwatch"})),Object(h.h)("td",null,Object(h.h)(p.c,{id:"races.race-time"},"Racetime")),Object(h.h)("td",null,Object(h.h)("i",{class:"fas fa-clock"})),Object(h.h)("td",{class:"text-right"},Object(h.h)("nobr",null,u.a.secToHms(D.duration)||"n/a"))),Object(h.h)("tr",null,Object(h.h)("td",null,Object(h.h)("i",{class:"fas fa-bed"})),Object(h.h)("td",null,Object(h.h)(p.c,{id:"races.rest-time"},"Rest")),Object(h.h)("td",null,Object(h.h)("i",{class:"fas fa-clock"})),Object(h.h)("td",{class:"text-right"},Object(h.h)("nobr",null,u.a.secToHms(D.rest)||"n/a")))))))),"team"===r&&Object(h.h)(e,null,C.public>0?Object(h.h)(e,null,Object(h.h)("h3",null,C.name),Object(h.h)(f.a,{markdown:I.a.replaceImages(C.description,C.images),markdownOpts:I.a.getMarkdownOptions()})):Object(h.h)(e,null,Object(h.h)("div",{class:"text-center text-muted"},Object(h.h)("div",{class:"display-1"},Object(h.h)("i",{class:"fas fa-dog"})),Object(h.h)("h3",null,Object(h.h)(p.c,{id:"teams.no-public-team"},"No public team!")),Object(h.h)(p.c,{id:"teams.no-public-team"},"This team is not publicly visible.")))),"dogs"===r&&Object(h.h)(e,null,C.public>0?Object(h.h)(e,null,C.dogs&&Object(h.h)("div",{class:"w-100 container-fluid"},Object(h.h)("div",{class:"row pt-2"},Object(h.h)(j.a,{stores:this.props.stores,dogs:C.dogs.map((function(e){return e.id})),allDogs:C.dogs,onDogClick:this.onDogClick}))),c&&Object(h.h)(e,null,Object(h.h)("div",{class:"d-flex mb-0 mt-3 position-relative"},Object(h.h)("div",{class:"text-center border rounded-circle imageRounded imageRoundedLarge text-muted pt-2",style:d.image?'background-image: url("'+d.image.s3LargeLink+'"); background-size: cover;':""},!d.image&&Object(h.h)("span",{class:"font-weight-lighter",style:"font-size: 35px;"},u.a.ucfirst(d.name,!0))),Object(h.h)("div",{class:"flex-grow-1 pl-3 pr-2",style:"border-right: 4px solid "+n.findHarness(d.harness,"colorNonstop")+" !important; line-height: 1.2em;"},Object(h.h)("h5",{class:"mb-1"},d.shortname||d.name," ",d.shortname&&""!==d.shortname&&Object(h.h)(e,null," - ",Object(h.h)("span",{class:"font-weight-lighter"},d.name)),z&&Object(h.h)(e,null,Object(h.h)("i",{class:"fas fa-birthday-cake ml-3"}))),Object(h.h)("div",null,F<7&&Object(h.h)(e,null,Object(h.h)("span",{class:"text-muted mr-2"},Object(h.h)("i",{class:"fas fa-birthday-cake"})," in ",F," days")),d.birth&&Object(h.h)("span",{class:"mr-2"},u.a.age(d.birth,d.deceased)),"female"===d.gender?Object(h.h)("i",{class:"fas fa-venus"}):Object(h.h)("i",{class:"fas fa-mars"})))))):Object(h.h)(e,null,Object(h.h)("div",{class:"text-center text-muted"},Object(h.h)("div",{class:"display-1"},Object(h.h)("i",{class:"fas fa-dog"})),Object(h.h)("h3",null,Object(h.h)(p.c,{id:"teams.no-public-team"},"No public team!")),Object(h.h)(p.c,{id:"teams.no-public-team"},"This team is not publicly visible.")))),k&&Object(h.h)("div",{style:"max-height: 200px; max-width: 70vw; overflow: auto;"},Object(h.h)("button",{class:"btn btn-link btn-block",onClick:this.toggleAdminInfo},"Toggle admin info"),o&&Object(h.h)(e,null,Object(h.h)("small",null,Object(h.h)("xmp",null,"musher: ",JSON.stringify(S,null,4),Object(h.h)("br",null),"user: ",JSON.stringify(T,null,4),Object(h.h)("br",null),"team: ",JSON.stringify(C,null,4),Object(h.h)("br",null),"totals: ",JSON.stringify(D,null,4),Object(h.h)("br",null)))))))},s}(h.Component))||l,A=Object(b.a)(d=function(t){function s(e){var s;return(s=t.call(this,e)||this).handleHistoryPointIndex=function(e){var t=parseInt(e.target.value,10);clearTimeout(s.updateTimer.reload),s.setState({historyPointIndex:t,timerRunning:!1},(function(){s.props.stores.raceStore.updateWaypointPosition(Math.abs(s.state.historyPointIndex))}))},s.playHistory=function(){clearTimeout(s.updateTimer.reload);var e=s.state,t=e.historyPointIndex,n=e.replaySpeed,o=s.props.stores.raceStore,i=o.getRaceTrackerTimestamp(t+1),r={historyPointIndex:t+1,timerRunning:!1,playingHistory:!0};i&&(r.raceTrackerPointTimestamp=i),s.setState(a({},r),(function(){o.updateWaypointPosition(Math.abs(t+1))})),clearTimeout(s.updateTimer.history),s.updateTimer.history=setTimeout((function(){s.playHistory()}),1e3*n)},s.pauseHistory=function(){clearTimeout(s.updateTimer.history),s.setState({playingHistory:!1})},s.loadLiveRaceResults=function(e,t){return new Promise((function(n,a){var o,i,r,c,l,d,h,u,b,p,m,f,g,O;return void 0===e&&(e=s.props),o=t.teamIds,i=t.focusOnMushers,r=t.bibs,h=(l=e.stores).userStore,u=(d=l.raceStore).race,p=(b=s.state).historyPointIndex,m=b.replayHistory,f=b.timerRunning,g=s.props.showDrawerReplay,O=d.getClassById(c=t.classid)||{},Promise.resolve(d.getRaceTrackerData(u.raceTrackerRace,{history:m||g,bibs:r,classid:c,startDate:O.startDate,endDate:O.endDate,isAdmin:h.isAdmin})).then((function(){try{return d.getRaceTrackerActiveTeams(o,i,r,p),f&&(clearTimeout(s.updateTimer.reload),s.updateTimer.reload=setTimeout((function(){console.log("loadLiveRaceResults.reloading...");var e=Math.floor((new Date).getTime()/1e3);s.setState({reloadLastEpoch:e}),s.loadLiveRaceResults(s.props,{teamIds:o,focusOnMushers:i,bibs:r,classid:c})}),6e4)),n()}catch(e){return a(e)}}),a)}))},s.loadRaceResults=function(e,t,n){return new Promise((function(a,o){var i,r;return void 0===e&&(e=s.props),i=e.stores.raceStore,r=s.state.timerRunning,Promise.resolve(i.loadWorkoutSummary(t,e.raceid)).then((function(){try{return i.getWorkoutSummaryActiveTeams(t,n),r&&(clearTimeout(s.updateTimer.reload),s.updateTimer.reload=setTimeout((function(){var e=Math.floor((new Date).getTime()/1e3);s.setState({reloadLastEpoch:e}),s.loadRaceResults(s.props,t,n)}),6e4)),a()}catch(e){return o(e)}}),o)}))},s.loadRace=function(e){return new Promise((function(t,n){var a,o,i,r,c,l,d,h,u,b,p,m;void 0===e&&(e=s.props);var f=function(){try{return t()}catch(e){return n(e)}},g=function(e){try{return console.log(e),f()}catch(e){return n(e)}};try{return s.setState({isLoading:!0}),o=(a=e.stores).raceStore,i=a.appState,c=(r=e).classid,Promise.resolve(o.load(r.raceid)).then(function(){try{if(l=o.race,d=i.focusOnMushers,u=void 0===(h=i.selectedClassIds)?[]:h,b=c||u[0],c&&i.toggleSelectedClassId(c,!0),p=l.classes.filter((function(e){return e.id===b})).filter((function(e){return e.contestants&&e.contestants.length>0})).map((function(e){return e.contestants.filter((function(e){return e.team>0})).map((function(e){return e.team}))})).flat(),m=l.classes.filter((function(e){return e.id===b})).filter((function(e){return e.contestants&&e.contestants.length>0})).map((function(e){return e.contestants.filter((function(e){return e.bib>0})).map((function(e){return e.bib}))})).flat(),p.length>0)return Promise.resolve(o.loadTeams(p.join(","))).then(function(){try{return e.call(this)}catch(e){return g(e)}}.bind(this),g);function e(){function e(){return o.getAllClassesSortedBy(),s.setState({isLoading:!1}),f()}return l.liveRace>0?Promise.resolve(s.loadLiveRaceResults(s.props,{teamIds:p,focusOnMushers:d,bibs:m,classid:b})).then(function(){try{return e.call(this)}catch(e){return g(e)}}.bind(this),g):Promise.resolve(s.loadRaceResults(s.props,p,d)).then(function(){try{return e.call(this)}catch(e){return g(e)}}.bind(this),g)}return e.call(this)}catch(e){return g(e)}}.bind(this),g)}catch(e){g(e)}}))},s.setLeaderboardMode=function(e){s.setState({leaderboardMode:e.target.parentElement.dataset.mode||e.target.dataset.mode})},s.chooseRaceClass=function(e){s.setState({filterByraceClass:e.target.value})},s.toggleShowLeaderBoard=function(e){s.setState(!0===e?{showLeaderBoard:!1}:{showLeaderBoard:!s.state.showLeaderBoard})},s.toggleShowNews=function(e){s.setState(!0===e?{showNews:!1}:{showNews:!s.state.showNews})},s.onMarkerClick=function(e){s.setState({showResults:!1,showDrawer:!0,wpData:e})},s.toggleDrawer=function(){s.setState({showDrawer:!s.state.showDrawer})},s.toggleResults=function(){s.setState({showResults:!s.state.showResults})},s.onTeamClick=function(e,t){return e.preventDefault(),e.stopPropagation(),s.setState({showTeam:t}),!1},s.hideTeam=function(){s.setState({showTeam:null})},s.onUserClick=function(e){return e.preventDefault(),e.stopPropagation(),!1},s.onDogClick=function(e,t,n){return e.preventDefault(),e.stopPropagation(),s.setState({showDog:t,dogs:n}),!1},s.hideDog=function(){s.setState({showDog:null})},s.setReplaySpeed=function(e){var t=e.target.closest("button").dataset.speed;s.setState({replaySpeed:parseFloat(t)})},s.filterByClass=function(e){return new Promise((function(t,n){var a,o,i,r,c,l,d,h,u=function(){try{return t()}catch(e){return n(e)}},b=function(e){try{return console.log(e),u()}catch(e){return n(e)}};try{if(a=e.target.closest("button").dataset.id,(s.state.replayHistory||s.props.showDrawerReplay)&&s.toggleReplayHistory(),i=(o=s.props.stores).appState,(r=o.raceStore).cleanupMemoryClass(),i.toggleSelectedClassId(a,!0),l=i.focusOnMushers,d=(c=r.race).classes.filter((function(e){return e.id===a})).filter((function(e){return e.contestants&&e.contestants.length>0})).map((function(e){return e.contestants.filter((function(e){return e.team>0})).map((function(e){return e.team}))})).flat(),h=c.classes.filter((function(e){return e.id===a})).filter((function(e){return e.contestants&&e.contestants.length>0})).map((function(e){return e.contestants.filter((function(e){return e.bib>0})).map((function(e){return e.bib}))})).flat(),s.setState({allTeamIds:d,bibs:h}),d.length>0)return Promise.resolve(r.loadTeams(d.join(","))).then(function(){try{return p.call(this)}catch(e){return b(e)}}.bind(this),b);function p(){function e(){return u()}return c.liveRace>0?Promise.resolve(s.loadLiveRaceResults(s.props,{teamIds:d,focusOnMushers:l,bibs:h,classid:a})).then(function(){try{return e.call(this)}catch(e){return b(e)}}.bind(this),b):Promise.resolve(s.loadRaceResults(s.props,d,l)).then(function(){try{return e.call(this)}catch(e){return b(e)}}.bind(this),b)}return p.call(this)}catch(e){b(e)}}))},s.toggleFocusOnMusher=function(e){try{var t=s.props.stores,n=t.appState,a=t.raceStore;n.toggleFocusOnMusher(e.target.parentElement.dataset.musherid||e.target.dataset.musherid);var o=n.focusOnMushers,i=void 0===o?[]:o,r=n.selectedClassIds,c=(void 0===r?[]:r)[0],l=a.race,d=l.classes.filter((function(e){return e.id===c})).filter((function(e){return e.contestants&&e.contestants.length>0})).map((function(e){return e.contestants.filter((function(e){return e.bib>0})).map((function(e){return e.bib}))})).flat();l.liveRace>0?a.getRaceTrackerActiveTeams(null,i,d):a.getWorkoutSummaryActiveTeams(null,i,d)}catch(e){console.log(e)}},s.toggleBib=function(){try{var e=s.props.stores,t=e.appState,n=e.raceStore.getMusherByBibId(s.state.bib);t.toggleFocusOnMusher(n.id)}catch(e){console.log(e)}},s.checkForEnter=function(e){"Enter"===e.key&&s.toggleBib()},s.toggleReplayHistory=function(){var e=s.state.replayHistory;clearTimeout(s.updateTimer.reload),s.setState({showDrawer:!1,historyPointIndex:0,replayHistory:!e,timerRunning:e},(function(){return new Promise((function(e,t){return Promise.resolve(s.loadRace()).then((function(){try{return s.props.stores.raceStore.updateWaypointPosition(Math.abs(s.state.historyPointIndex)),e()}catch(e){return t(e)}}),t)}))}))},s.toggleLines=function(){s.setState({showLines:!s.state.showLines})},s.state=a(a({},T),{},{reloadLastEpoch:Math.floor((new Date).getTime()/1e3),historyPointIndex:0,timerRunning:!0,replayHistory:!1,replaySpeed:1}),s.updateTimer={},s}i(s,t);var n=s.prototype;return n.componentWillUnmount=function(){clearTimeout(this.updateTimer.reload),clearTimeout(this.updateTimer.history),clearTimeout(this.updateTimer.tick)},n.componentDidMount=function(){this.loadRace();try{var e={width:(t=window).innerWidth,height:t.innerHeight};e.width<800&&(this.toggleShowLeaderBoard(!0),this.toggleShowNews(!0))}catch(e){console.log(e)}var t},n.componentWillReceiveProps=function(e){this.props.classid===e.classid&&this.props.showDrawerReplay===e.showDrawerReplay||this.loadRace(e)},n.render=function(){var t=this,s=this.state,n=s.historyPointIndex,a=s.timerRunning,o=s.playingHistory,i=s.replaySpeed,r=s.raceTrackerPointTimestamp,c=s.showLines,l=s.allTeamIds,d=this.props.stores,b=d.userStore,p=d.raceStore,m=d.appState,f=b.isAdmin,O=this.props,j=O.raceid,T=O.showHeader,A=void 0===T||T,z=O.drawerClassNames,F=O.drawerWidth,L=O.showDrawerReplay,E=m.focusOnMushers,U=void 0===E?[]:E,M=m.selectedClassIds,_=void 0===M?[]:M,N=this.state,B=N.reloadLastEpoch,H=N.showDrawer,V=N.wpData,q=void 0===V?{}:V,K=N.showResults,Y=N.showTeam,W=N.showDog,Z=N.replayHistory,G=p.waypoints,J=p.geoJSONs,X=p.zoomToMarkers,Q=p.race,$=p.maxPoints,ee=q.bib?p.getMusherByBibId(q.bib):p.getMusherByBibEmail(q.email),te=p.getTeamById(ee.team),se=p.getClassById(_[0])||{};return Object(h.h)(e,null,Y&&Object(h.h)(v.a,null,Object(h.h)(k.default,{stores:this.props.stores,teamid:Y,marginTop:"0px;",marginBottom:"0px;",back:this.hideTeam,hideTeam:this.hideTeam})),W&&Object(h.h)(v.a,null,Object(h.h)(S.default,{stores:this.props.stores,dogid:W,marginTop:"0px;",marginBottom:"0px;",back:this.hideDog,dogs:te.dogs})),A&&Object(h.h)(w.a,{height:C},Object(h.h)("div",{class:"d-flex justify-content-between align-items-center w-100"},Object(h.h)("div",{class:"d-flex align-items-center"},Object(h.h)("span",{class:"",style:"font-size: 2.3em;"},Object(h.h)("a",{href:"/app-races/"+Q.id+"/results"},Object(h.h)("i",{class:"fas fa-angle-left"}))),Object(h.h)("span",{class:"ml-4 text-primary",style:"font-size: 1.4em;",onClick:this.toggleResults},Object(h.h)("i",{class:"fas fa-list-ol"})),Object(h.h)("span",{class:"ml-4 text-primary",style:"font-size: 1.4em;"},Object(h.h)("a",{href:"/app-races/"+Q.id+"/results"},Object(h.h)("i",{class:"fas fa-stopwatch"})))),Object(h.h)("div",null,Object(h.h)("a",{href:"/app-races/"+Q.id+"/results"},Object(h.h)("span",{class:"font-weight-normal text-white",style:"font-size: 1.2em;"},Q.title))),Q.liveRace>0?Object(h.h)(e,null,Object(h.h)("div",{class:"d-flex align-items-center text-primary",onClick:this.toggleReplayHistory},Object(h.h)("span",{class:""},"Replay"),Object(h.h)("span",{class:"ml-2",style:"font-size: 1.4em;"},Object(h.h)("i",{class:"fas fa-play"})))):Object(h.h)(e,null,Object(h.h)("div",{class:"d-flex align-items-center"}," "))),Object(h.h)("div",{class:"w-100 overflow-hidden"},Object(h.h)("div",{class:"d-flex flex-row flex-nowrap pb-2 px-1",style:"overflow: auto; scroll-snap-type: x mandatory;"},Q.classes&&Q.classes.sort((function(e,t){return e.distance-t.distance})).map((function(s,n){return Object(h.h)(e,null,Object(h.h)("div",{class:"col px-0 pt-0"},Object(h.h)("button",{type:"button",class:"btn btn-block "+I.a.getPillClass(Q.classes.length,n)+" rounded-none "+(_.indexOf(s.id)>-1?"btn-primary":"btn-outline-primary")+" text-nowrap",style:"text-overflow: ellipsis; overflow: hidden;",onClick:t.filterByClass,"data-id":s.id},s.title)))}))))),Object(h.h)("div",{class:"container-fluid position-relative p-0 w-100 h-100",style:"margin-top: "+(A?C:0)+";"},Q.id?Object(h.h)(e,null,Object(h.h)(g.a,{marginTop:C,stores:this.props.stores,raceid:j,waypoints:G,geoJSONs:c?J:null,waypoints2:se.waypoints,zoomToMarkers:X,fullscreenMap:!0,onMarkerClick:this.onMarkerClick,showHeatmap:Q.liveRace<1,allTeamIds:l,showTracks:Q.liveRace>=1,selectedClassIds:_,showDistanceMarkers:!1,groupWaypoints:!1,focusOnMushers:U})):Object(h.h)(e,null,Object(h.h)(x.a,{stores:this.props.stores})),a&&Object(h.h)("div",{class:"position-absolute",style:"top: 125px; left: 5px; z-index: 9999; width: 30px; height: 30px;"},Object(h.h)(D,{stores:this.props.stores,classNames:"float-right ml-2",reloadLastEpoch:B})),U&&U.length>0&&Object(h.h)(e,null,Object(h.h)("div",{class:"row mb-2",style:' background-color: #1C1F4C; background-image: url("https://themusher.app/assets/tv-single-background.jpg"); background-size: cover !important; background-position: 0 0; border-radius: 10px; '},Object(h.h)("div",{class:"col-12 text-white",style:"font-size: 1.3em;"},U&&U.map((function(s){var n=p.getMusherById(s);return Object(h.h)(e,null,Object(h.h)("div",null,Object(h.h)("nobr",null,Object(h.h)("span",{class:"mr-2",onClick:t.toggleFocusOnMusher,"data-musherid":n.id},U.indexOf(n.id)>-1?Object(h.h)("i",{class:"fas fa-times text-warning"}):Object(h.h)("i",{class:"far fa-star"})),Object(h.h)("span",{class:"text-right",style:"width: 50px; display: inline-block;"},n.bib)," ",n.flag," ",n.firstname," ",n.lastname,Object(h.h)("br",null))))}))))),(L||Z)&&Object(h.h)(e,null,Object(h.h)(y.a,{stores:this.props.stores,onCloseClick:this.toggleReplayHistory,classNames:z,width:F},$>0?Object(h.h)(e,null,Object(h.h)("div",{class:"d-flex justify-content-center mx-3"},o?Object(h.h)(e,null,Object(h.h)("div",{class:"pl-1"},Object(h.h)("button",{class:"btn btn-warning",onClick:this.pauseHistory},Object(h.h)("i",{class:"fas fa-pause"})))):Object(h.h)(e,null,Object(h.h)("div",{class:"pl-1"},Object(h.h)("button",{class:"btn btn-success",onClick:this.playHistory},Object(h.h)("i",{class:"fas fa-play"})))),Object(h.h)("div",{class:"pl-2 pt-2 flex-grow-1"},Object(h.h)("input",{type:"range",class:"custom-range w-100",min:0,max:$,value:n,onInput:this.handleHistoryPointIndex}))),Object(h.h)("div",{class:"d-flex justify-content-center"},Object(h.h)("div",{class:"col px-0 pt-2"},Object(h.h)("button",{type:"button",class:"btn btn-block rounded-pill-left rounded-none "+(1===i?"btn-secondary":"btn-outline-secondary")+" text-nowrap",style:"text-overflow: ellipsis; overflow: hidden;",onClick:this.setReplaySpeed,"data-speed":1},"60x")),Object(h.h)("div",{class:"col px-0 pt-2"},Object(h.h)("button",{type:"button",class:"btn btn-block rounded-none "+(.5===i?"btn-secondary":"btn-outline-secondary")+" text-nowrap",style:"text-overflow: ellipsis; overflow: hidden;",onClick:this.setReplaySpeed,"data-speed":.5},"120x")),Object(h.h)("div",{class:"col px-0 pt-2"},Object(h.h)("button",{type:"button",class:"btn btn-block rounded-none "+(.25===i?"btn-secondary":"btn-outline-secondary")+" text-nowrap",style:"text-overflow: ellipsis; overflow: hidden;",onClick:this.setReplaySpeed,"data-speed":.25},"240x")),Object(h.h)("div",{class:"col px-0 pt-2"},Object(h.h)("button",{type:"button",class:"btn btn-block rounded-pill-right rounded-none "+(.12===i?"btn-secondary":"btn-outline-secondary")+" text-nowrap",style:"text-overflow: ellipsis; overflow: hidden;",onClick:this.setReplaySpeed,"data-speed":.12},"480x"))),Object(h.h)("div",{class:"d-flex justify-content-center"},Object(h.h)("div",{class:"flex-grow-1 pt-0 font-weight-bolder text-white text-center",style:"font-size: 1.1em;"},r&&Object(h.h)(e,null,u.a.formatDate(u.a.parseInputDate(r),{locale:"no-NB",hour12:!1,hour:"2-digit",minute:"2-digit"})),f&&Object(h.h)(e,null,"/ ",n)),f&&Object(h.h)(e,null,Object(h.h)("button",{class:"btn btn-danger mt-2 mr-4 rounded-pill-both rounded-none",onClick:this.toggleLines},Object(h.h)("i",{class:"fas fa-wave-square"})," Show lines")))):Object(h.h)(e,null,Object(h.h)("div",{class:"spinner-border text-primary",role:"status"},Object(h.h)("span",{class:"sr-only"},"Loading..."))))),K?Object(h.h)(e,null,Object(h.h)(y.a,{stores:this.props.stores,onCloseClick:this.toggleResults,classNames:z,width:F},Object(h.h)(P,{stores:this.props.stores,raceClass:se,race:Q,onMarkerClick:this.onMarkerClick}))):Object(h.h)(e,null,H&&Object(h.h)(e,null,Object(h.h)(y.a,{stores:this.props.stores,onCloseClick:this.toggleDrawer,classNames:z,width:F},Object(h.h)(R,{stores:this.props.stores,wpData:q,onMarkerClick:this.onMarkerClick,onTeamClick:this.onTeamClick,onUserClick:this.onUserClick,onDogClick:this.onDogClick}))))))},s}(h.Component))||d;t.a=A}).call(this,s("hosL").Fragment)}}]);
//# sourceMappingURL=route-app-races.chunk.1def9.js.map