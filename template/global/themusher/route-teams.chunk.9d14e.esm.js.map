{"version":3,"sources":["webpack:///./routes/teams/index.js","webpack:///./components/team/index.js"],"names":["MARGIN_TOP","mu","marginTop","MARGIN_BOTTOM","marginTopBack","marginBottom","SUB_MENU_MARGIN_TOP","subMenuMarginTop","initialState","isLoading","Teams","observer","Component","constructor","props","super","this","state","setState","teamStore","userStore","stores","load","undefined","addData","getNotifications","componentDidMount","loadTeams","render","appState","teams","darkmode","class","style","href","id","fields","total","length","map","team","Team","currentMonth","Date","getMonth","currentYear","getFullYear","month","year","seasonStart","parseInt","workoutSummary","findWorkoutSummary","user","language","teamAmbition","findTeamAmbition","ambition","ambitions","teamType","findTeamType","type","image","s3SmallLink","url","name","dogs","members","distanceKm","util","format","elevation","duration","secToHms","speedAvg"],"mappings":"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","file":"route-teams.chunk.9d14e.esm.js","sourcesContent":["import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport { Text, Localizer } from 'preact-i18n';\n\nimport mu from '../../lib/musher-util';\nconst MARGIN_TOP = mu.marginTop(true);\nconst MARGIN_TOP_BACK = mu.marginTopBack(false);\nconst MARGIN_BOTTOM = mu.marginBottom();\nconst SUB_MENU_MARGIN_TOP = mu.subMenuMarginTop();\n\nimport Team from '../../components/team';\n\nconst initialState = {\n\tisLoading: false,\n};\n\n@observer\nclass Teams extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            ...initialState,\n        };\n    }\n\n\tasync loadTeams() {\n\t\tthis.setState({ isLoading: true });\n\t\tconst { teamStore, userStore } = this.props.stores;\n\t\tawait teamStore.load(undefined, false, { addData: ['workoutSummary', 'musherSummary'] });\n\t\tawait userStore.getNotifications();\n\t\tthis.setState({ isLoading: false });\n\t}\n\n\tcomponentDidMount() {\n\t\tthis.loadTeams();\n\t}\n\n\trender() {\n\t\tconst { isLoading } = this.state;\n\t\tconst { teamStore, userStore, appState } = this.props.stores;\n\t\tconst { teams } = teamStore;\n\t\tconst { user } = userStore;\n\t\tconst { darkmode } = appState;\n\n\t\treturn (\n\t\t\t<div class='container-fluid' style={`margin-bottom: ${MARGIN_BOTTOM}; margin-top: ${MARGIN_TOP};`}>\n\t\t\t\t<div class='row fixed-top' style={`margin-top: ${SUB_MENU_MARGIN_TOP}; background-color: ${darkmode ? '#191d21' : '#f8f9fa'};`}>\n\t\t\t\t\t<div class='col text-center border-bottom border-primary subtopmenu'>\n\t\t\t\t\t\t<a href='/teams/' class='text-primary stretched-link'><nobr><i class='fas fa-users' /> <Text id='teams.your-teams'>Your teams</Text></nobr></a>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class='col text-center subtopmenu'>\n\t\t\t\t\t\t<a href='/teams/connect' class='text-secondary stretched-link'><nobr><i class='fas fa-users' /> <Text id='teams.public-teams'>Public teams</Text></nobr></a>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class='row'>\n\t\t\t\t\t<div class='col-12'>\n\t\t\t\t\t\t<div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 px-0'>\n\t\t\t\t\t\t\t<h5><Text id='teams.all-teams' fields={{ total: teams.length }}>Teamene dine - {teams.length} stk</Text></h5>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 px-0 clearfix mb-2'>\n\t\t\t\t\t\t\t<a class='btn btn-sm btn-primary float-right'\n\t\t\t\t\t\t\t\thref='/teams/edit/new'\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<i class='fas fa-plus' /> <Text id='teams.add-new'>Legg til team</Text>\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t{teams && teams.map(team => (\n\t\t\t\t\t\t\t<Team stores={this.props.stores} team={team} />\n\t\t\t\t\t\t))}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nexport default Teams;\n","import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\n\n@observer\nclass Team extends Component {\n    render() {\n        const { team } = this.props;\n        const { teamStore, userStore } = this.props.stores;\n\n        const currentMonth = new Date().getMonth() + 1;\n        const currentYear = new Date().getFullYear();\n\t\tconst { month = currentMonth, year = currentYear } = this.props;\n\t\tconst seasonStart = parseInt(month < 8 ? year - 1 : year, 10);\n\n        const workoutSummary = teamStore.findWorkoutSummary(team.id, seasonStart) || {};\n        const { user } = userStore;\n        const { language = 'no' } = user;\n        const teamAmbition = userStore.findTeamAmbition({ ambition: team.ambitions, language });\n        const teamType = userStore.findTeamType({ type: team.type, language });\n        const image = team.image && team.image.s3SmallLink ? team.image : null;\n\n        const { url = `/teams/${team.id}` } = this.props;\n\n        return (\n            <div class='w-100 mb-3'>\n                <div class='row'>\n                    <div class='col-12 col-sm-8 col-lg-6 offset-sm-2 offset-lg-3 d-flex mb-0 position-relative'>\n                        {/* {JSON.stringify(team, null, 4)} */}\n                        <div class={`text-center border rounded-circle imageRounded`} style={image ? `background-image: url(\"${image.s3SmallLink}\");` : ''}>\n                            {!image && <i class='fas fa-users text-muted mt-3' style='font-size: 40px;' />}\n                        </div>\n                        <div class='flex-grow-1 pl-3' style='line-height: 1.2em;'>\n                            <a class='stretched-link' href={url}>\n                                <h5 class='mb-1' style='line-height: 1.0em;'>{team.name}</h5>\n                            </a>\n                            <div>\n                                {teamType && <span class='badge badge-pill badge-secondary'>{teamType}</span>}\n                                {teamAmbition && <span class='badge badge-pill badge-secondary ml-2'>{teamAmbition}</span>}\n                            </div>\n                            <small class='text-muted'>\n                                {team && team.dogs && <span class=''><i class='fas fa-dog' /> {team.dogs.length}</span>} \n                                {team && team.members && <span class='ml-2'><i class='fas fa-user' /> {team.members.length}</span>}\n\n                                {workoutSummary && workoutSummary.distanceKm > 0 && <span class='ml-2'><i class='fas fa-road' /> {util.format(workoutSummary.distanceKm, 0)}km</span>}\n                                {workoutSummary && workoutSummary.elevation > 0 && <span class='ml-2'><i class='fas fa-mountain' /> {util.format(workoutSummary.elevation, 0)}m</span>}\n                                {workoutSummary && workoutSummary.duration > 0 && <span class='ml-2'><i class='fas fa-clock' /> {util.secToHms(workoutSummary.duration)}</span>}\n                                {workoutSummary && workoutSummary.speedAvg > 0 && <span class='ml-2'><i class='fas fa-tachometer-alt' /> {util.format(workoutSummary.speedAvg, 1)}km/t</span>}\n                            </small>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        );\n    }\n}\n\nexport default Team;\n"],"sourceRoot":""}