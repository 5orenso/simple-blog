{"version":3,"sources":["webpack:///./components/workout/summary.js","webpack:///./components/garmin/index.js","webpack:///./routes/workouts/index.js","webpack:///./components/workout/index.js","webpack:///./components/workout/calendarPlan.js","webpack:///./components/dog/scroller.js","webpack:///./components/workout/table.js","webpack:///./components/strava/index.js","webpack:///./components/team/teams.js","webpack:///./components/team/fastList.js"],"names":["observer","Component","render","summary","this","props","class","style","week","year","count","util","format","distanceKm","elevation","secToHms","duration","speedAvg","Garmin","toggleDate","e","stopPropagation","preventDefault","showDate","state","setState","ignoreGarminWorkout","async","id","target","parentElement","dataset","garminActivityDetailsStore","stores","ignoreWorkout","loadGarminActivities","importGarminWorkout","asTrack","workoutStore","currentTeam","importTrack","importWorkout","loadWorkouts","load","query","team","toggleDetail","showDetail","hideImported","componentDidMount","activities","forceShowDate","userStore","selectedTeam","findTeam","length","type","onClick","map","activity","startDate","parseInputDate","startTimeInSeconds","deviceName","activityType","formatDate","locale","formatDistance","Date","value","distanceInMeters","totalElevationGainInMeters","averageSpeedInMetersPerSecond","durationInSeconds","data-id","kmToMiles","MARGIN_TOP","mu","marginTop","MARGIN_BOTTOM","marginBottom","SUB_MENU_MARGIN_TOP","subMenuMarginTop","initialState","loadedTime","isLoading","offset","limit","submenu","workoutFilter","sessionid","getTime","dataFields","Workouts","constructor","super","loadAll","messageStore","currentMonth","getMonth","currentYear","getFullYear","month","Promise","all","loadWorkoutSummary","loadWorkoutPlans","getNotifications","getUnReadMessages","loadStravaActivities","loadTeams","changeTeam","addData","setLoadMore","unsetLoadMore","seasonStart","workoutPlanStore","user","settings","imperial","seasonYear","workoutPlans","workoutPlanCurrent","prepareWeekGraphs","updateKeyValue","resetGraphPlanWeekDistanceCurrent","chooseSubmenu","menu","chooseDay","day","dd","mm","yyyy","w","date","d","getDate","m","y","parseInt","renderContent","obj","appState","workout","wrapperClasses","wrapperClassesRow","setupIntersection","handleIntersection","intersectionObserverCallback","scrollViewTimer","setInterval","postScrollview","getIntersectionObserverHistory","teamStore","skipMusherWorkoutSummary","stravaActivityStore","getWorkoutSummary","getWorkoutSummaryDay","daysBack","componentWillMount","componentWillUnmount","clearInterval","checkCordova","componentWillReceiveProps","nextProps","scrolledDown","workoutPlan","workoutSummaryWeekDay","language","MONTHS","getMonths","currentTeamObject","darkmode","workouts","cordovaActiveTrackingParams","isRunning","totalDistance","currentSpeed","totalTime","workoutsFiltered","filter","planMonth","sumWorkoutPlanMonth","summaryMonth","findWorkoutSummaryMonth","percentComplete","Math","floor","totalCountMonth","totalDistanceKmMonth","totalDurationMonth","totalSpeedavgMonth","stravaActivities","garminActivityDetails","href","role","callback","changeTeams","key","data-menu","horizontal","vertical","chooseDayFunction","hideTable","hideSummary","skipLoadSummary","radius","percent","prefix","total","completed","smallUnit","url","section","showExtra","basehref","showNavigation","showHeader","strava","garmin","name","data","wrapperClassNames","contentClassNames","dataValues","fields","getWorkoutColor","getWorkoutIcon","MAX_LOADINDEX","getMaxLoadIndex","showAddComment","viewImageIdx","likeWorkout","Workout","workoutId","setTimeout","toggleAddComment","inputRef","focus","viewImage","idx","closest","shareLink","title","text","shareUrl","onTeamClick","teamid","showTeam","hideTeam","onUserClick","onDogClick","dogid","dogs","showDog","hideDog","updateTimer","viewmode","hasShareApi","allDogs","intensity","findIntensity","code","teamName","teamNames","push","teams","forEach","likes","comments","hasLikedWorkout","findIndex","gpxInfo","mushers","loadIndex","workoutEquipment","findEquipment","equipment","workoutEquipmentIcon","field","musherImages","slice","musher","u","findPublicUser","images","publicUser","image","s3SmallLink","mapImage","imgs","toJS","batteryUsage","battegryLevelStart","battegryLevelEnd","views","getViews","statistics","back","img","temperature","isLocked","isInProgress","hour12","hour","minute","getLoadIndexColor","normalizeBetween","getLoadIndexText","garminId","stravaId","track","dogsLeft","dogsRight","sledWeight","indexOf","kcalBurnedTotal","kcalMeatGramsTotal","kcalSalmonGramsTotal","kcalFatGramsTotal","description","markdown","replaceImages","comment","markdownOpts","getMarkdownOptions","avgGpsMovingSpeed","dblClick","likeRef","data-url","uuidv4","data-title","rel","data-native","c","inputRefObject","col","compact","object","isTeamAdmin","isAdmin","RED_DAYS","Calendar","setFocus","editMonth","showInput","inputYear","inputMonth","inputDay","inputWeek","newDistance","distance","editWeek","editDay","saveDistance","getYear","response","insert","seasonMonth","newId","saveField","resetInput","nextDay","addDays","getWeek","checkKeydown","updateWorkoutPlanTips","hideWorkoutPlanTips","toggleTips","newValue","updateSetting","DAYS","getDays","currentDay","currentEpoch","dog","monthNum","yearNum","nextMonth","nextYear","getNextMonth","prevMonth","prevYear","getPrevMonth","daysOfMonth","getDaysInMonth","weeksInMonth","getWeeksInMonth","daysOfWeek","getDaysInWeek","totalDistanceKmMonthPlan","totalWorkoutDistanceKmMonth","isMonthInTheFuture","findWorkoutPlanSummaryMonth","tips","tipsMonth","padDate","hasTipsMonth","placeholder","ref","onInput","linkState","onKeydown","autocomplete","getDay","weekObj","summaryWeek","findWorkoutPlanSummaryWeek","asNumber","isWeekInTheFuture","totalWeek","totalWorkoutWeek","tipsWeek","hasTipsWeek","data-week","data-year","data-distance","isDayInTheFuture","summaryWorkout","findWorkoutSummaryWeekDay","findWorkoutPlanSummaryDay","isChosen","isToday","isDayOff","data-day","data-month","getPlanColor","colspan","time","totalWorkouts","avgSpeed","DogScroller","scrollImages","scrollLeft","clientWidth","imageIdx","nearestInt","round","diff","abs","Number","isInteger","sortByName","a","b","dogA","find","dogB","size","onScroll","sort","dogId","onTouchstart","onTouchend","onTouchmove","className","showName","showPosition","WorkoutTable","withText","ascend","plan","seasonMonths","monthRange","prevSeasonMonths","xTicksAll","weekRange","wo","partSize","xTicks","i","l","scope","Strava","ignoreStravaWorkout","importStravaWorkout","start_date","total_elevation_gain","average_speed","elapsed_time","Teams","toggleTeam","unsetTeamIfSelected","dogStore","setCurrentTeam","undefined","isDefined","showAllTeams","highlight","showAll","classNames","FastListLine","containerRef","removeIntersectionObserver","addIntersectionObserver","dataProperties","encodeURI","data-idx","FastList","deleteIntersectionObserver","intersectionObserver","entries","isIntersecting","height","currentHeight","max","childNodes","offsetHeight","scrollHeight","display","minHeight","setupIntersectionObserver","window","IntersectionObserverEntry","prototype","IntersectionObserver","root","rootMargin","threshold","observe","unobserve","isObject","hasOwnProperty","contentClasses"],"mappings":"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","file":"route-workouts.chunk.c1efb.esm.js","sourcesContent":["import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport { Text, Localizer, withText } from 'preact-i18n';\n\n@observer\nclass WorkoutSummary extends Component {\n    render() {\n        const { summary = {} } = this.props;\n\n        return (\n            <div class='w-100 mb-3'>\n                <div class='row'>\n                    <div class='col-12 col-sm-8 col-lg-6 offset-sm-2 offset-lg-3 d-flex mb-0 position-relative'>\n                        {/* {JSON.stringify(workout, null, 4)} */}\n                        <div class={`text-center border rounded-circle imageRounded`}>\n                            <div class={`text-muted mt-2`} style='font-size: 40px; line-height: 1;'>{summary.week}</div>\n                            <div class={`text-muted`} style='font-size: 10px; line-height: 0.8em;'>{summary.year}</div>\n                        </div>\n                        <div class='flex-grow-1 pl-3'>\n                            <h5 class='my-0'>{summary.week} - {summary.year}</h5>\n                            <small class='text-muted'>\n                                <i class='fas fa-wave-square' /> {summary.count}\n                                <i class='fas fa-road ml-2' /> {util.format(summary.distanceKm, 0)}km\n                                <i class='fas fa-mountain ml-2' /> {util.format(summary.elevation, 0)}m\n                                <i class='fas fa-stopwatch ml-2' /> {util.secToHms(summary.duration)}\n                                <i class='fas fa-tachometer-alt ml-2' /> {util.format(summary.speedAvg, 1)}km/t\n                            </small>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        );\n    }\n}\n\nexport default WorkoutSummary;\n","import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport { Text, Localizer, withText } from 'preact-i18n';\n\nimport Speed from '../../components/data/speed';\nimport Elevation from '../../components/data/elevation';\nimport Weight from '../../components/data/weight';\nimport Distance from '../../components/data/distance';\nimport Temperature from '../../components/data/temperature';\n\n@observer\nclass Garmin extends Component {\n    toggleDate = (e) => {\n        e.stopPropagation();\n        e.preventDefault();\n        const { showDate } = this.state;\n        this.setState({ showDate: !showDate });\n    }\n\n    ignoreGarminWorkout = async (e) => {\n        e.stopPropagation();\n        const id = e.target.parentElement.dataset.id || e.target.dataset.id;\n        const { garminActivityDetailsStore } = this.props.stores;\n\t\tawait garminActivityDetailsStore.ignoreWorkout(id);\n        this.loadGarminActivities();\n    }\n\n    importGarminWorkout = async (e) => {\n        e.stopPropagation();\n        const id = e.target.parentElement.dataset.id || e.target.dataset.id;\n        const { asTrack } = this.props;\n        const { garminActivityDetailsStore, workoutStore } = this.props.stores;\n\t\tconst { currentTeam } = workoutStore;\n        if (asTrack) {\n            await garminActivityDetailsStore.importTrack(id, currentTeam);\n        } else {\n            await garminActivityDetailsStore.importWorkout(id, currentTeam);\n        }\n        this.loadGarminActivities();\n        this.loadWorkouts();\n    }\n\n    async loadGarminActivities() {\n\t\tconst { garminActivityDetailsStore } = this.props.stores;\n\t\tgarminActivityDetailsStore.load({ query: { hideImported: 1 }});\n\t}\n\n    loadWorkouts = async () => {\n\t\tconst { workoutStore } = this.props.stores;\n\t\tconst { currentTeam } = workoutStore;\n\t\tawait workoutStore.load({ query: { team: currentTeam } });\n\t}\n\n    toggleDetail = () => {\n        const { showDetail = false } = this.state;\n        this.setState({\n            showDetail: !showDetail,\n        });\n    }\n\n    componentDidMount() {\n\t\tthis.loadGarminActivities();\n\t}\n\n    render() {\n        const { showDate, showDetail = false } = this.state;\n        const { activities = [], showDate: forceShowDate, asTrack = false } = this.props;\n\t\tconst { userStore, workoutStore } = this.props.stores;\n        const { currentTeam } = workoutStore;\n        const { team } = userStore;\n\n        const selectedTeam = userStore.findTeam(currentTeam || team.id);\n\n        if (!showDetail) {\n            if (activities && activities.length > 0) {\n                return (<>\n                    <div class='col-12 mb-3'>\n                        <button type='button' class='btn btn-block btn-outline-info' onClick={this.toggleDetail}>\n                            <div class={`float-right ml-2 text-center border rounded-circle imageRounded imageRoundedIcon`} style={`background-image: url('./assets/garmin-connect.png');`} />\n                            <Text id='workout.index.garmin-workouts'>Garmin workouts / not imported</Text> {activities.length}\n                        </button>\n                    </div>\n                </>);\n            }\n            return (<></>);\n        }\n\n        return (<>\n            <div class='col-12 mb-3'>\n                <div class='row'>\n                    {activities && activities.length > 0 && (\n                        <div\n                            class='col-12 border-top border-bottom pt-3 pb-3 my-2 bg-light'\n                        >\n                            <button type='button' class='float-right btn btn-sm btn-link' onClick={this.toggleDetail}>\n                                <i class='fas fa-caret-up' /> <Text id='garmin.hide-list'>Hide list</Text>\n                            </button>\n                            <h5><Text id='workout.index.garmin-workouts'>Garmin workouts / not imported</Text> {activities.length}</h5>\n                            {activities && activities.map(activity => {\n                                const { summary = {} } = activity;\n                                const startDate = util.parseInputDate(summary.startTimeInSeconds);\n\n                                return (<>\n                                    {/* <td>{util.secToHms(activity.moving_time)}</td> */}\n                                    {/* <td>{util.secToHms(activity.elapsed_time)}</td> */}\n\n                                    {/* {\n                                        \"durationInSeconds\": 616,\n                                        \"startTimeInSeconds\": 1602065947,\n                                        \"startTimeOffsetInSeconds\": 7200,\n                                        \"activityType\": \"ROAD_BIKING\",\n                                        \"averageSpeedInMetersPerSecond\": 0.152,\n                                        \"averagePaceInMinutesPerKilometer\": 109.649124, \n                                        \"activeKilocalories\": 1, \n                                        \"deviceName\": \"edge1000\", \n                                        \"distanceInMeters\": 94.02, \n                                        \"maxPaceInMinutesPerKilometer\": 14.6455765, \n                                        \"maxSpeedInMetersPerSecond\": 1.138, \n                                        \"startingLatitudeInDegree\": 61.00674974732101, \n                                        \"startingLongitudeInDegree\": 9.975536987185478, \n                                        \"totalElevationLossInMeters\": 2\n                                    } */}\n\n                                    <div class='col-12 d-flex mb-4 position-relative'>\n                                        <div class={`text-center border rounded-circle imageRounded`} style={`background-image: url(\"./assets/garmin-connect.png\"); border-width: 3px !important;`}>\n                                            &nbsp;\n                                        </div>\n                                        <div class='flex-grow-1 pl-3' style='line-height: 1.2em;'>\n                                            <h5 class='my-0 mb-1' style='line-height: 1.0em;'>{summary.deviceName}</h5>\n                                            {summary.activityType}<br />\n                                            <small class='text-muted'>\n                                                {startDate && <small onClick={this.toggleDate}>\n                                                    {forceShowDate || showDate ? util.formatDate(startDate, { locale: 'no-NB' }) : util.formatDistance(startDate, new Date(), { locale: 'no-NB' })}\n                                                </small>}\n                                                <span class='text-muted'>\n                                                    <i class='fas fa-road ml-2' /> <Distance stores={this.props.stores} value={summary.distanceInMeters / 1000} />\n                                                    <i class='fas fa-mountain ml-2' /> <Elevation stores={this.props.stores} value={summary.totalElevationGainInMeters} />\n                                                    <i class='fas fa-tachometer-alt ml-2' /> <Speed stores={this.props.stores} value={summary.averageSpeedInMetersPerSecond * 3.6} />\n                                                    <i class='fas fa-stopwatch ml-2' /> {util.secToHms(summary.durationInSeconds)}\n                                                </span>\n                                            </small>\n                                            <br />\n                                            <button class='btn btn-sm btn-block btn-primary' onClick={this.importGarminWorkout} data-id={activity.id}>\n                                                <i class='fas fa-file-import' /> {asTrack ? <Text id='garmin.import-track'>Import as track</Text> : <><Text id='garmin.import'>Import workout</Text> <i class='fas fa-arrow-right' /> {selectedTeam}</>} \n                                            </button>\n                                            <button class='btn btn-sm btn-link' onClick={this.ignoreGarminWorkout} data-id={activity.id}>\n                                                <i class='fas fa-trash-alt' /> <Text id='garmin.ignore'>Ignore workout</Text>\n                                            </button>\n                                        </div>\n                                    </div>\n                                </>);\n                            })}\n\n                            <button type='button' class='btn btn-block btn-primary mt-3' onClick={this.toggleDetail}>\n                                <i class='fas fa-caret-up' /> <Text id='garmin.hide-list'>Hide list</Text>\n                            </button>\n                        </div>\n                    )}\n\n                </div>\n            </div>\n        </>);\n    }\n}\n\nexport default Garmin;\n","import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport { Text, Localizer, withText } from 'preact-i18n';\n\nimport mu from '../../lib/musher-util';\nconst MARGIN_TOP = mu.marginTop(true);\nconst MARGIN_BOTTOM = mu.marginBottom();\nconst SUB_MENU_MARGIN_TOP = mu.subMenuMarginTop();\n\nimport Workout from '../../components/workout';\nimport WorkoutSummary from '../../components/workout/summary';\nimport WorkoutTotals from '../../components/workout/totals';\nimport WorkoutStatus from '../../components/workout/status';\nimport WorkoutGraph from '../../components/workout/graph';\nimport WorkoutTable from '../../components/workout/table';\nimport WorkoutCalendar from '../../components/workout/calendar';\nimport Teams from '../../components/team/teams';\nimport Gauge from '../../components/gauge';\nimport CalendarPlan from '../../components/workout/calendarPlan';\nimport Strava from '../../components/strava';\nimport Garmin from '../../components/garmin';\nimport Ad from '../../components/ad/';\n\nimport Speed from '../../components/data/speed';\nimport Elevation from '../../components/data/elevation';\nimport Weight from '../../components/data/weight';\nimport Distance from '../../components/data/distance';\nimport Temperature from '../../components/data/temperature';\n\nimport ScrollIntoView from '../../components/util/scrollIntoView';\n\nimport FastList from '../../components/team/fastList';\n\nfunction kmToMiles(value) {\n    return util.format(0.621371 * value, 1);\n}\n\nconst initialState = {\n\tloadedTime: 0,\n\tisLoading: false,\n\toffset: 0,\n\tlimit: 5,\n\tsubmenu: 'totals',\n\tworkoutFilter: () => true,\n\tsessionid: new Date().getTime(),\n};\n\nconst dataFields = ['id', 'type', 'user', 'team', 'title'];\n\n@observer\nclass Workouts extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            ...initialState,\n        };\n    }\n\n\tloadAll = async (props = this.props) => {\n\t\tconst { limit, offset } = this.state;\n\t\tthis.setState({ isLoading: true });\n\t\tconst { workoutStore, userStore, messageStore } = props.stores;\n\t\tconst { currentTeam } = workoutStore;\n\n\t\t// const currentMonth = new Date().getMonth() + 1;\n        // const { month = currentMonth, year = util.getYear(), team = currentTeam, dog = {} } = props;\n\n\t\t// const { year } = props;\n\t\tconst currentMonth = new Date().getMonth() + 1;\n        const currentYear = new Date().getFullYear();\n\t\tconst { month = currentMonth, year = currentYear } = props;\n\n        // await userStore.getInfo();\n\t\tawait Promise.all([\n\t\t\tthis.loadWorkouts({ team: currentTeam, year, month, limit, offset }),\n\t\t\tthis.loadWorkoutSummary(props),\n\t\t\tthis.loadWorkoutPlans(props),\n\t\t\tuserStore.getNotifications(),\n\t\t\tmessageStore.getUnReadMessages(),\n\t\t\tthis.loadStravaActivities(),\n\t\t\tthis.loadGarminActivities(),\n\t\t\tthis.loadTeams(props),\n\t\t]);\n\t\tthis.setState({\n\t\t\tloadedTime: new Date().getTime(),\n\t\t\tisLoading: false,\n\t\t});\n\t}\n\n\tchangeTeam = () => {\n        this.loadAll();\n\t}\n\n\tloadWorkouts = ({ team, year, month, limit, offset }) => {\n\t\tconst { workoutStore } = this.props.stores;\n\t\tconst append = offset > 0;\n\t\tworkoutStore.load({\n\t\t\tquery: {\n\t\t\t\tteam,\n\t\t\t\tyear,\n\t\t\t\tmonth,\n\t\t\t},\n\t\t\tlimit,\n\t\t\toffset,\n\t\t\taddData: ['publicTeams', 'publicUsers'],\n\t\t}, append);\n\t}\n\n    setLoadMore = () => {\n        const { workoutStore } = this.props.stores;\n\t\tconst { currentTeam } = workoutStore;\n\t\tconst currentMonth = new Date().getMonth() + 1;\n        const currentYear = new Date().getFullYear();\n\t\tconst { month = currentMonth, year = currentYear } = this.props;\n\n        workoutStore.setLoadMore(() => {\n            let { limit, offset } = this.state;\n            offset += limit;\n            this.setState({ offset });\n            this.loadWorkouts({ team: currentTeam, year, month, limit, offset });\n        });\n    }\n\n    unsetLoadMore = () => {\n        const { workoutStore } = this.props.stores;\n        workoutStore.setLoadMore(() => {});\n    }\n\n\tasync loadTeams(props = this.props) {\n\t\tconst { teamStore, workoutStore } = props.stores;\n\t\tconst { currentTeam } = workoutStore;\n\n\t\tconst currentMonth = new Date().getMonth() + 1;\n        const currentYear = new Date().getFullYear();\n\n\t\tconst { month = currentMonth, year = currentYear } = props;\n\t\tawait teamStore.load({ query: { team: currentTeam, skipMusherWorkoutSummary: true, year, month }, addData: ['workoutSummary'] });\n\t}\n\n\tasync loadStravaActivities() {\n\t\tconst { stravaActivityStore } = this.props.stores;\n\t\tstravaActivityStore.load({ query: { hideImported: 1 }});\n\t}\n\n\tasync loadGarminActivities() {\n\t\tconst { garminActivityDetailsStore } = this.props.stores;\n\t\tgarminActivityDetailsStore.load({ query: { hideImported: 1 }});\n\t}\n\n\tloadWorkoutPlans = async (props = this.props) => {\n\t\tthis.setState({ isLoading: true });\n\n\t\tconst currentMonth = new Date().getMonth() + 1;\n        const currentYear = new Date().getFullYear();\n\n\t\tconst { year = currentYear, month = currentMonth } = props;\n\t\tconst seasonStart = (month < 8 ? year - 1 : year);\n\n\t\tconst { workoutPlanStore, workoutStore, userStore } = props.stores;\n\t\tconst { currentTeam } = workoutStore;\n\n\t\tconst { user } = userStore;\n        const { settings = {} } = user;\n\t\tconst { imperial } = settings;\n\n\t\t// workoutPlanStore.updateItem('workoutPlans', []);\n\t\t// workoutPlanStore.updateItem('workoutPlan', {});\n\t\t// workoutPlanStore.resetGraphPlanWeekDistanceCurrent();\n\n\t\tif (currentTeam) {\n\t\t\tawait workoutPlanStore.load({\n\t\t\t\tquery: {\n\t\t\t\t\tteam: currentTeam,\n\t\t\t\t\tseasonYear: seasonStart,\n\t\t\t\t},\n\t\t\t\taddData: ['tips'],\n\t\t\t});\n\t\t\tconst { workoutPlans } = workoutPlanStore;\n\t\t\tconst workoutPlanCurrent = workoutPlans[0] || {};\n\t\t\tif (workoutPlanCurrent.id) {\n\t\t\t\tawait workoutPlanStore.load(workoutPlanCurrent.id);\n\t\t\t\tworkoutPlanStore.prepareWeekGraphs({ year, imperial });\n\t\t\t} else {\n\t\t\t\tworkoutPlanStore.updateKeyValue('workoutPlan', {});\n\t\t\t\tworkoutPlanStore.updateKeyValue('workoutPlans', []);\n\t\t\t\tworkoutPlanStore.resetGraphPlanWeekDistanceCurrent();\n\t\t\t}\n\t\t}\n\t\tthis.setState({ isLoading: false });\n\t}\n\n\tasync loadWorkoutSummary(props = this.props) {\n\t\tconst { userStore, workoutStore } = props.stores;\n\n\t\tconst currentMonth = new Date().getMonth() + 1;\n        const currentYear = new Date().getFullYear();\n\t\tconst { month = currentMonth, year = currentYear } = props;\n\n\t\tconst { currentTeam } = workoutStore;\n        await userStore.getWorkoutSummary({ team: currentTeam, year, month });\n\t\t// await userStore.getWorkoutSummaryDay({ month, year, team: currentTeam });\n\t\t// await userStore.getWorkoutSummaryDay({ month, year: year - 1, team: currentTeam });\n\t\tawait userStore.getWorkoutSummaryDay({ daysBack: 500, team: currentTeam });\n    }\n\n\tchooseSubmenu = (e) => {\n\t\tconst submenu = e.target.parentElement.dataset.menu || e.target.dataset.menu;\n\t\tthis.setState({ submenu });\n\t}\n\n\tchooseDay = ({ day, month, year }) => {\n\t\tconst { dd, mm, yyyy } = this.state;\n\t\tif (dd === day && mm === month && yyyy === year) {\n\t\t\treturn this.setState({\n\t\t\t\tworkoutFilter: () => true,\n\t\t\t\tdd: null,\n\t\t\t\tmm: null,\n\t\t\t\tyyyy: null,\n\t\t\t});\n\t\t}\n\t\tthis.setState({\n\t\t\tdd: day,\n\t\t\tmm: month,\n\t\t\tyyyy: year,\n\t\t\tworkoutFilter: (w) => {\n\t\t\t\tconst date = new Date(w.date);\n\t\t\t\tconst d = date.getDate();\n\t\t\t\tconst m = date.getMonth() + 1;\n\t\t\t\tconst y = date.getFullYear();\n\t\t\t\treturn d === parseInt(day, 10) && m === parseInt(month, 10) && y === parseInt(year, 10);\n\t\t\t},\n\t\t});\n\t}\n\n\trenderContent = ({ obj, idx }) => {\n        const { appState } = this.props.stores;\n        const { path } = appState;\n        const { hashtag } = this.props;\n\n        return (<>\n\t\t\t<Workout\n\t\t\t\tstores={this.props.stores}\n\t\t\t\tworkout={obj}\n\t\t\t\tshowDate={true}\n\t\t\t\twrapperClasses={'w-100'}\n\t\t\t\twrapperClassesRow={''}\n\t\t\t/>\n        </>);\n    }\n\n\t// Scroll views timer\n    setupIntersection = () => {\n        this.setState({\n            handleIntersection: mu.intersectionObserverCallback,\n        });\n        const { workoutStore } = this.props.stores;\n        this.scrollViewTimer = setInterval(() => workoutStore.postScrollview(mu.getIntersectionObserverHistory()), 30 * 1000);\n    }\n\n\tcomponentWillMount() {\n        this.setupIntersection();\n    }\n\n\tcomponentWillUnmount() {\n        const { workoutStore, stravaActivityStore, garminActivityDetailsStore } = this.props.stores;\n        workoutStore.postScrollview(mu.getIntersectionObserverHistory());\n        clearInterval(this.scrollViewTimer);\n        this.unsetLoadMore();\n\t\t// workoutStore.cleanupMemory();\n    }\n\t// /Scroll views timer\n\n\tcomponentDidMount() {\n\t\tconst { appState } = this.props.stores;\n\t\tthis.loadAll();\n\t\t// this.loadDogs();\n\t\t// this.loadTracks();\n\t\tappState.checkCordova();\n\t\tthis.setLoadMore();\n\t}\n\n\tcomponentWillReceiveProps(nextProps) {\n        // console.log('componentWillReceiveProps', nextProps);\n        if (nextProps.month !== this.props.month\n            || nextProps.year !== this.props.year\n            || nextProps.team !== this.props.team) {\n            this.loadAll(nextProps);\n        }\n    }\n\n\trender() {\n        const { scrolledDown } = this.props;\n\t\tconst { isLoading, submenu, handleIntersection, sessionid, loadedTime } = this.state;\n\t\tconst { userStore, appState, workoutStore, workoutPlanStore,\n\t\t\tstravaActivityStore, garminActivityDetailsStore } = this.props.stores;\n\t\tconst { workoutPlan, workoutPlans } = workoutPlanStore;\n\n\t\tconst { user, workoutSummaryWeekDay = [] } = userStore;\n        const { language = 'en', settings = {} } = user;\n        const MONTHS = mu.getMonths(language);\n\n\t\tconst currentMonth = new Date().getMonth() + 1;\n        const currentYear = new Date().getFullYear();\n\n\t\tconst { month = currentMonth, year = currentYear } = this.props;\n\t\tconst seasonStart = parseInt(month < 8 ? year - 1 : year, 10);\n\t\n\t\tconst { currentTeam } = workoutStore;\n\t\tconst currentTeamObject = userStore.findTeam(currentTeam, true);\n\n\t\tconst { darkmode } = appState;\n\t\tconst { workouts, cordovaActiveTrackingParams, isRunning, totalDistance, currentSpeed, totalTime } = workoutStore;\n\n\t\tconst { workoutFilter } = this.state;\n\t\tconst workoutsFiltered = workouts.filter(workoutFilter);\n\n\t\tconst planMonth = workoutPlanStore.sumWorkoutPlanMonth(parseInt(year, 10), parseInt(month, 10)) || 0;\n\t\tconst summaryMonth = userStore.findWorkoutSummaryMonth(parseInt(year, 10), parseInt(month, 10), 'distanceKm', true) || 0;\n\t\tlet percentComplete;\n\t\tif (planMonth) {\n\t\t\tpercentComplete = Math.floor(summaryMonth / planMonth * 100);\n\t\t}\n\t\tconst totalCountMonth = userStore.findWorkoutSummaryMonth(parseInt(year, 10), parseInt(month, 10), 'count', true) || 0;\n\t\tconst totalDistanceKmMonth = userStore.findWorkoutSummaryMonth(parseInt(year, 10), parseInt(month, 10), 'distanceKm', true) || 0;\n\t\tconst totalDurationMonth = userStore.findWorkoutSummaryMonth(parseInt(year, 10), parseInt(month, 10), 'duration', true) || 0;\n\t\tconst totalSpeedavgMonth = userStore.findWorkoutSummaryMonth(parseInt(year, 10), parseInt(month, 10), 'speedAvg', true) || 0;\n\t\tconst totalElevationMonth = userStore.findWorkoutSummaryMonth(parseInt(year, 10), parseInt(month, 10), 'elevation', true) || 0;\n\n\t\tconst { stravaActivities = [] } = stravaActivityStore;\n\t\tconst { garminActivityDetails = [] } = garminActivityDetailsStore;\n\n\t\treturn (\n\t\t\t<div class='container-fluid' style={`margin-bottom: ${MARGIN_BOTTOM}; margin-top: ${MARGIN_TOP};`}>\n\t\t\t\t<div class='row fixed-top pt-2' style={`margin-top: ${scrolledDown > 0 ? 0 : SUB_MENU_MARGIN_TOP}; background-color: ${darkmode ? '#191d21' : '#f8f9fa'}; transition: all 0.3s ease-in-out;`}>\n\t\t\t\t\t<div class='col text-center border-bottom border-primary subtopmenu'>\n\t\t\t\t\t\t<a href='/workouts/' class='text-primary stretched-link'><nobr><i class='fas fa-chart-line' /> <Text id='workout.index.dashboard'>Oversikt</Text></nobr></a>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class='col text-center subtopmenu'>\n\t\t\t\t\t\t<a href='/workouts/list' class='text-secondary stretched-link'><nobr><i class='fas fa-list' /> <Text id='workout.index.list'>Liste</Text></nobr></a>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class='col text-center subtopmenu'>\n\t\t\t\t\t\t<a href='/workouts/plan' class='text-secondary stretched-link'><nobr><i class='fas fa-calendar-alt' /> <Text id='workout.index.plan'>Plan</Text></nobr></a>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\n\t\t\t\t{/* <xmp>\n\t\t\t\ttotalTime: {totalTime}<br />\n\t\t\t\tcordovaActiveTrackingParams: {JSON.stringify(cordovaActiveTrackingParams)}<br />\n\t\t\t\t</xmp> */}\n\n\t\t\t\t{isRunning && cordovaActiveTrackingParams && <>\n\t\t\t\t\t<div class='row'>\n\t\t\t\t\t\t<div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 border-bottom bg-light py-4'>\n\t\t\t\t\t\t\t<h1 class='text-success font-weight-bold'>\n\t\t\t\t\t\t\t\tTracking\n\t\t\t\t\t\t\t\t<div class='spinner-grow ml-3' role='status' />\n\t\t\t\t\t\t\t</h1>\n\t\t\t\t\t\t\t<div class='row mb-3'>\n\t\t\t\t\t\t\t\t<div class='col-4 text-center font-weight-bold' style='font-size: 1.3em;'>{util.secToHms(totalTime)}</div>\n\t\t\t\t\t\t\t\t<div class='col-4 text-center font-weight-bold' style='font-size: 1.3em;'>\n\t\t\t\t\t\t\t\t\t<Speed stores={this.props.stores} value={currentSpeed * 3.6} />\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class='col-4 text-center font-weight-bold' style='font-size: 1.3em;'>\n\t\t\t\t\t\t\t\t\t<Distance stores={this.props.stores} value={totalDistance / 1000} />\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<a class='btn btn-block btn-danger' href='/workouts/tracking'><Text id='workouts.go-to-tracking'>Go to tracking</Text></a>\n\t\t\t\t\t\t\t{/* {JSON.stringify(cordovaActiveTrackingParams)}\n\t\t\t\t\t\t\t{JSON.stringify(isRunning)} */}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</>}\n\n\t\t\t\t<div class='row'>\n\t\t\t\t\t<div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 border-bottom'>\n\t\t\t\t\t\t<Teams stores={this.props.stores} callback={this.changeTeams} key={`teams-${currentTeam}`} />\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-2 mb-2'>\n\t\t\t\t\t\t<a class='btn btn-primary btn-sm float-right'\n\t\t\t\t\t\t\thref='/workouts/edit/new'\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<i class='fas fa-plus' /> <Text id='workout.index.add-workout'>Legg til treningstur</Text>\n\t\t\t\t\t\t</a>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 my-1'>\n\t\t\t\t\t\t<div class='row'>\n\t\t\t\t\t\t\t<div class='w-100 overflow-hidden'>\n                                <div\n                                    class='d-flex flex-row flex-nowrap pb-2 px-1'\n                                    style='overflow: auto; scroll-snap-type: x mandatory;'\n                                >\n\t\t\t\t\t\t\t\t\t<div class='col px-0 pt-2'>\n\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\tclass={`btn btn-block rounded-pill-left rounded-none ${submenu === 'totals' ? 'btn-primary' : 'btn-outline-primary'} text-nowrap`}\n\t\t\t\t\t\t\t\t\t\t\tstyle='text-overflow: ellipsis; overflow: hidden;'\n\t\t\t\t\t\t\t\t\t\t\tdata-menu='totals'\n\t\t\t\t\t\t\t\t\t\t\tonClick={this.chooseSubmenu}\n\t\t\t\t\t\t\t\t\t\t><i class='fas fa-tachometer-alt' /> <Text id='workouts.totals'>Totaler</Text></button>\n                                        {submenu === 'totals' && <ScrollIntoView horizontal={'center'} vertical={'end'} />}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div class='col px-0 pt-2'>\n\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\tclass={`btn btn-block rounded-none ${submenu === 'seasontotals' ? 'btn-primary' : 'btn-outline-primary'} text-nowrap`}\n\t\t\t\t\t\t\t\t\t\t\tstyle='text-overflow: ellipsis; overflow: hidden;'\n\t\t\t\t\t\t\t\t\t\t\tdata-menu='seasontotals'\n\t\t\t\t\t\t\t\t\t\t\tonClick={this.chooseSubmenu}\n\t\t\t\t\t\t\t\t\t\t><i class='fas fa-tachometer-alt' /> <Text id='workouts.seasontotals'>Season totals</Text></button>\n                                        {submenu === 'seasontotals' && <ScrollIntoView horizontal={'center'} vertical={'end'} />}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div class='col px-0 pt-2'>\n\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\tclass={`btn btn-block rounded-none ${submenu === 'analysis' ? 'btn-primary' : 'btn-outline-primary'} text-nowrap`}\n\t\t\t\t\t\t\t\t\t\t\tstyle='text-overflow: ellipsis; overflow: hidden;'\n\t\t\t\t\t\t\t\t\t\t\tdata-menu='analysis'\n\t\t\t\t\t\t\t\t\t\t\tonClick={this.chooseSubmenu}\n\t\t\t\t\t\t\t\t\t\t><i class='fas fa-chart-area' /> <Text id='workouts.analysis'>Analyser</Text></button>\n                                        {submenu === 'analysis' && <ScrollIntoView horizontal={'center'} vertical={'end'} />}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div class='col px-0 pt-2'>\n\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\tclass={`btn btn-block rounded-none ${submenu === 'table' ? 'btn-primary' : 'btn-outline-primary'} text-nowrap`}\n\t\t\t\t\t\t\t\t\t\t\tstyle='text-overflow: ellipsis; overflow: hidden;'\n\t\t\t\t\t\t\t\t\t\t\tdata-menu='table'\n\t\t\t\t\t\t\t\t\t\t\tonClick={this.chooseSubmenu}\n\t\t\t\t\t\t\t\t\t\t><i class='fas fa-table' /> <Text id='workouts.table'>Tabell</Text></button>\n                                        {submenu === 'table' && <ScrollIntoView horizontal={'center'} vertical={'end'} />}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div class='col px-0 pt-2'>\n\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\tclass={`btn btn-block rounded-none ${submenu === 'workoutplan' ? 'btn-primary' : 'btn-outline-primary'} text-nowrap`}\n\t\t\t\t\t\t\t\t\t\t\tstyle='text-overflow: ellipsis; overflow: hidden;'\n\t\t\t\t\t\t\t\t\t\t\tdata-menu='workoutplan'\n\t\t\t\t\t\t\t\t\t\t\tonClick={this.chooseSubmenu}\n\t\t\t\t\t\t\t\t\t\t><i class='fas fa-calendar-alt' /> <Text id='workouts.workoutplan'>Treningsplan</Text></button>\n                                        {submenu === 'workoutplan' && <ScrollIntoView horizontal={'center'} vertical={'end'} />}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div class='col px-0 pt-2'>\n\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\tclass={`btn btn-block rounded-pill-right rounded-none ${submenu === 'calendar' ? 'btn-primary' : 'btn-outline-primary'} text-nowrap`}\n\t\t\t\t\t\t\t\t\t\t\tstyle='text-overflow: ellipsis; overflow: hidden;'\n\t\t\t\t\t\t\t\t\t\t\tdata-menu='calendar'\n\t\t\t\t\t\t\t\t\t\t\tonClick={this.chooseSubmenu}\n\t\t\t\t\t\t\t\t\t\t><i class='fas fa-calendar-alt' /> <Text id='workouts.calendar'>Kalender</Text></button>\n                                        {submenu === 'calendar' && <ScrollIntoView horizontal={'center'} vertical={'end'} />}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t{submenu === 'totals' && <>\n\t\t\t\t\t\t<WorkoutCalendar stores={this.props.stores} isLoading={isLoading}\n\t\t\t\t\t\t\tyear={year}\n\t\t\t\t\t\t\tmonth={month}\n\t\t\t\t\t\t\tchooseDayFunction={this.chooseDay}\n\t\t\t\t\t\t\tkey={`calendar-header-${year}-${month}-${currentTeam}-${loadedTime}-${workoutSummaryWeekDay.length}`}\n\t\t\t\t\t\t\thideTable={submenu === 'calendar' ? 0 : 1}\n\t\t\t\t\t\t\thideSummary={submenu === 'calendar' ? 0 : 1}\n\t\t\t\t\t\t\tskipLoadSummary={submenu === 'calendar' ? 0 : 1}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-2 mb-2'>\n\t\t\t\t\t\t\t<div class='row'>\n\t\t\t\t\t\t\t\t<div class='col-4 text-center'>\n\t\t\t\t\t\t\t\t\t{planMonth >= 0 && (\n\t\t\t\t\t\t\t\t\t\t<Gauge \n\t\t\t\t\t\t\t\t\t\t\tkey={`gauge-${percentComplete}`}\n\t\t\t\t\t\t\t\t\t\t\tradius={55}\n\t\t\t\t\t\t\t\t\t\t\tpercent={percentComplete}\n\t\t\t\t\t\t\t\t\t\t\tprefix='%'\n\t\t\t\t\t\t\t\t\t\t\ttotal={settings.imperial ? `${kmToMiles(planMonth)} mi` : `${util.format(planMonth, 0)} km`}\n\t\t\t\t\t\t\t\t\t\t\tcompleted={settings.imperial ? `${kmToMiles(summaryMonth)} mi` : `${util.format(summaryMonth, 0)} km`}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t)}<br />\n\t\t\t\t\t\t\t\t\t<small class='text-muted'><Text id='workout.index.plan'>Treningsplan</Text></small>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class='col-4 text-center'>\n\t\t\t\t\t\t\t\t\t<h5><span class='text-muted font-weight-lighter'><i class='fas fa-road' /></span></h5>\n\t\t\t\t\t\t\t\t\t<h3>\n\t\t\t\t\t\t\t\t\t\t<Distance stores={this.props.stores} value={totalDistanceKmMonth} smallUnit={true} />\n\t\t\t\t\t\t\t\t\t</h3>\n\t\t\t\t\t\t\t\t\t<small class='text-muted'>\n\t\t\t\t\t\t\t\t\t\t<Text id='workout.calendar.distance'>Distanse</Text>\n\t\t\t\t\t\t\t\t\t</small>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class='col-4 text-center'>\n\t\t\t\t\t\t\t\t\t<h5><span class='text-muted font-weight-lighter'><i class='fas fa-tachometer-alt ml-3' /></span></h5>\n\t\t\t\t\t\t\t\t\t<h3>\n\t\t\t\t\t\t\t\t\t\t<Speed stores={this.props.stores} value={totalSpeedavgMonth} smallUnit={true} />\n\t\t\t\t\t\t\t\t\t</h3>\n\t\t\t\t\t\t\t\t\t<small class='text-muted'>\n\t\t\t\t\t\t\t\t\t\t<Text id='workout.calendar.avg-speed'>Gj.snittsfart</Text>\n\t\t\t\t\t\t\t\t\t</small>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class='col-12 text-center'>\n\t\t\t\t\t\t\t\t\t<span class='text-muted font-weight-lighter'><i class='fas fa-running' /> </span> {totalCountMonth}\n\t\t\t\t\t\t\t\t\t<span class='text-muted font-weight-lighter'><i class='fas fa-clock ml-3' /></span> {util.secToHms(totalDurationMonth)}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class='col-12'>\n\t\t\t\t\t\t\t<Ad stores={this.props.stores} url={this.props.url} section={submenu} />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</>}\n\n\t\t\t\t\t{submenu === 'seasontotals' && <>\n\t\t\t\t\t\t{/* <WorkoutCalendar stores={this.props.stores} isLoading={isLoading}\n\t\t\t\t\t\t\tyear={year}\n\t\t\t\t\t\t\tmonth={month}\n\t\t\t\t\t\t\tchooseDayFunction={this.chooseDay}\n\t\t\t\t\t\t\tkey={`calendar-header-${year}-${month}-${currentTeam}-${loadedTime}-${workoutSummaryWeekDay.length}`}\n\t\t\t\t\t\t\thideTable={submenu === 'calendar' ? 0 : 1}\n\t\t\t\t\t\t\thideSummary={submenu === 'calendar' ? 0 : 1}\n\t\t\t\t\t\t\tskipLoadSummary={submenu === 'calendar' ? 0 : 1}\n\t\t\t\t\t\t/> */}\n\t\t\t\t\t\t<div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 my-3 text-center'>\n\t\t\t\t\t\t\t<h3>\n\t\t\t\t\t\t\t\t<i class='fas fa-tachometer-alt' /> <Text id='workouts.seasontotals'>Season totals</Text>\n\t\t\t\t\t\t\t</h3>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3'>\n\t\t\t\t\t\t\t<WorkoutTotals\n\t\t\t\t\t\t\t\tstores={this.props.stores}\n\t\t\t\t\t\t\t\tcurrentTeam={currentTeam}\n\t\t\t\t\t\t\t\tyear={year}\n\t\t\t\t\t\t\t\tmonth={month}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<WorkoutStatus\n\t\t\t\t\t\t\t\tstores={this.props.stores}\n\t\t\t\t\t\t\t\tcurrentTeam={currentTeam}\n\t\t\t\t\t\t\t\tyear={year}\n\t\t\t\t\t\t\t\tmonth={month}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class='col-12'>\n\t\t\t\t\t\t\t<Ad stores={this.props.stores} url={this.props.url} section={submenu} />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</>}\n\n\t\t\t\t\t{submenu === 'analysis' && <>\n\t\t\t\t\t\t{/* <WorkoutCalendar stores={this.props.stores} isLoading={isLoading}\n\t\t\t\t\t\t\tyear={year}\n\t\t\t\t\t\t\tmonth={month}\n\t\t\t\t\t\t\tchooseDayFunction={this.chooseDay}\n\t\t\t\t\t\t\tkey={`calendar-header-${year}-${month}-${currentTeam}-${loadedTime}-${workoutSummaryWeekDay.length}`}\n\t\t\t\t\t\t\thideTable={submenu === 'calendar' ? 0 : 1}\n\t\t\t\t\t\t\thideSummary={submenu === 'calendar' ? 0 : 1}\n\t\t\t\t\t\t\tskipLoadSummary={submenu === 'calendar' ? 0 : 1}\n\t\t\t\t\t\t/> */}\n\t\t\t\t\t\t<div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 my-3 text-center'>\n\t\t\t\t\t\t\t<h3>\n\t\t\t\t\t\t\t\t<i class='fas fa-chart-area' /> <Text id='workouts.analysis'>Analyser</Text>\n\t\t\t\t\t\t\t</h3>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3'>\n\t\t\t\t\t\t\t<WorkoutGraph\n\t\t\t\t\t\t\t\tstores={this.props.stores}\n\t\t\t\t\t\t\t\tisLoading={isLoading}\n\t\t\t\t\t\t\t\tyear={year}\n\t\t\t\t\t\t\t\tmonth={month}\n\t\t\t\t\t\t\t\tkey={`graph-${workoutPlan.id}-${workoutPlans.length}-${settings.imperial}`}\n\t\t\t\t\t\t\t\tshowExtra={true}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class='col-12'>\n\t\t\t\t\t\t\t<Ad stores={this.props.stores} url={this.props.url} section={submenu} />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</>}\n\n\t\t\t\t\t{submenu === 'table' && <>\n\t\t\t\t\t\t{/* <WorkoutCalendar stores={this.props.stores} isLoading={isLoading}\n\t\t\t\t\t\t\tyear={year}\n\t\t\t\t\t\t\tmonth={month}\n\t\t\t\t\t\t\tchooseDayFunction={this.chooseDay}\n\t\t\t\t\t\t\tkey={`calendar-header-${year}-${month}-${currentTeam}-${loadedTime}-${workoutSummaryWeekDay.length}`}\n\t\t\t\t\t\t\thideTable={submenu === 'calendar' ? 0 : 1}\n\t\t\t\t\t\t\thideSummary={submenu === 'calendar' ? 0 : 1}\n\t\t\t\t\t\t\tskipLoadSummary={submenu === 'calendar' ? 0 : 1}\n\t\t\t\t\t\t/> */}\n\t\t\t\t\t\t<div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 my-3 text-center'>\n\t\t\t\t\t\t\t<h3>\n\t\t\t\t\t\t\t\t<i class='fas fa-table' /> <Text id='workouts.table'>Tabell</Text>\n\t\t\t\t\t\t\t</h3>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3'>\n\t\t\t\t\t\t\t<WorkoutTable\n\t\t\t\t\t\t\t\tstores={this.props.stores}\n\t\t\t\t\t\t\t\tisLoading={isLoading}\n\t\t\t\t\t\t\t\tyear={year}\n\t\t\t\t\t\t\t\tmonth={month}\n\t\t\t\t\t\t\t\tkey={`table-${workoutPlan.id}-${workoutPlans.length}`}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class='col-12'>\n\t\t\t\t\t\t\t<Ad stores={this.props.stores} url={this.props.url} section={submenu} />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</>}\n\n\t\t\t\t\t{submenu === 'calendar' && <>\n\t\t\t\t\t\t<WorkoutCalendar stores={this.props.stores} isLoading={isLoading}\n\t\t\t\t\t\t\tyear={year}\n\t\t\t\t\t\t\tmonth={month}\n\t\t\t\t\t\t\tchooseDayFunction={this.chooseDay}\n\t\t\t\t\t\t\tkey={`calendar-header-${year}-${month}-${currentTeam}-${loadedTime}-${workoutSummaryWeekDay.length}`}\n\t\t\t\t\t\t\thideTable={submenu === 'calendar' ? 0 : 1}\n\t\t\t\t\t\t\thideSummary={submenu === 'calendar' ? 0 : 1}\n\t\t\t\t\t\t\tskipLoadSummary={submenu === 'calendar' ? 0 : 1}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<div class='col-12'>\n\t\t\t\t\t\t\t<Ad stores={this.props.stores} url={this.props.url} section={submenu} />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</>}\n\n\t\t\t\t\t{submenu === 'workoutplan' && <>\n\t\t\t\t\t\t<CalendarPlan stores={this.props.stores}\n\t\t\t\t\t\t\tbasehref='/workouts/'\n\t\t\t\t\t\t\tmonth={month}\n\t\t\t\t\t\t\tyear={year}\n\t\t\t\t\t\t\tkey={`${workoutPlan.id || seasonStart}-${currentTeam}-${month}-${year}-${loadedTime}`}\n\t\t\t\t\t\t\tshowNavigation={true}\n\t\t\t\t\t\t\tshowHeader={true}\n\t\t\t\t\t\t\tcurrentTeam={currentTeam}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<div class='col-12'>\n\t\t\t\t\t\t\t<Ad stores={this.props.stores} url={this.props.url} section={submenu} />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</>}\n\n\t\t\t\t</div>\n\n\t\t\t\t{submenu === 'totals' && <>\n\t\t\t\t\t<div class='row mt-3'>\n\t\t\t\t\t\t<div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-4'>\t\t\n\t\t\t\t\t\t\t<div class='row'>\n\t\t\t\t\t\t\t\t{user && user.strava && <>\n\t\t\t\t\t\t\t\t\t<Strava stores={this.props.stores} activities={stravaActivities} key={`strava-${currentTeam}-${stravaActivities.length}`} />\n\t\t\t\t\t\t\t\t</>}\n\t\t\t\t\t\t\t\t{user && user.garmin && <>\n\t\t\t\t\t\t\t\t\t<Garmin stores={this.props.stores} activities={garminActivityDetails} key={`garmin-${currentTeam}-${garminActivityDetails.length}`} />\n\t\t\t\t\t\t\t\t</>}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class='row'>\n\t\t\t\t\t\t{workoutsFiltered && workoutsFiltered.length > 0 && <div class='col-12 mb-4'>\n\t\t\t\t\t\t\t<div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 px-0 mt-4'>\t\t\n\t\t\t\t\t\t\t\t<h5>\n\t\t\t\t\t\t\t\t\t{/* <Text id='workout.index.last-workouts' fields={{ total: workoutsFiltered.length, month: MONTHS[month - 1], year }}>\n\t\t\t\t\t\t\t\t\t\tTreningsturer {MONTHS[month - 1]} {year} - {workoutsFiltered.length} stk\n\t\t\t\t\t\t\t\t\t</Text> */}\n\t\t\t\t\t\t\t\t\t{currentTeamObject && currentTeamObject.name && <div>\n\t\t\t\t\t\t\t\t\t\t<small class='font-weight-lighter'>(<Text id='workout.index.filtered-by'>Filtered by</Text>: {currentTeamObject.name})</small>\n\t\t\t\t\t\t\t\t\t</div>}\n\t\t\t\t\t\t\t\t</h5>\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t<FastList\n\t\t\t\t\t\t\t\tdata={workoutsFiltered}\n\t\t\t\t\t\t\t\twrapperClassNames={'row pb-4'}\n\t\t\t\t\t\t\t\tcontentClassNames={`col-12 col-sm-8 col-lg-6 offset-sm-2 offset-lg-3 my-1 position-relative rounded rounded-lg py-3 bg-${darkmode ? 'black' : 'white'} shadow-sm`}\n\t\t\t\t\t\t\t\trenderContent={this.renderContent}\n\t\t\t\t\t\t\t\tdataFields={dataFields}\n\t\t\t\t\t\t\t\tdataValues={{ type: '11' }}\n\t\t\t\t\t\t\t\thandleIntersection={handleIntersection}\n\t\t\t\t\t\t\t\tsessionid={sessionid}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t{/* {workoutsFiltered && workoutsFiltered.map(workout => (\n\t\t\t\t\t\t\t\t<Workout stores={this.props.stores} workout={workout} />\n\t\t\t\t\t\t\t))} */}\n\t\t\t\t\t\t</div>}\n\n\t\t\t\t\t\t{!workouts || workouts.length === 0 && <div class='col-12 mb-4 text-center pt-5 pb-5'>\n\t\t\t\t\t\t\t<h1 class='text-muted'><i class='fas fa-running' /></h1>\n\t\t\t\t\t\t\t<h5 class='text-muted font-weight-lighter'>\n\t\t\t\t\t\t\t\t<Text id='workouts.no-workouts' fields={{ month: MONTHS[month - 1], year }}>Ingen treningsturer registrert...</Text>\n\t\t\t\t\t\t\t</h5>\n\t\t\t\t\t\t</div>}\n\t\t\t\t\t</div>\n\t\t\t\t</>}\t\t\t\n\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nexport default Workouts;\n","import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport { toJS } from 'mobx';\nimport { Text, Localizer, withText } from 'preact-i18n';\nimport Markdown from 'preact-markdown';\n\nimport Modal from '../modal';\nimport WorkoutComments from '../../components/workout/comments';\nimport WorkoutAddComment from '../../components/workout/commentAdd';\nimport ImageScroller from '../../components/imageScroller';\nimport DogScroller from '../../components/dog/scroller';\n\nimport Overlay from '../../components/overlay/';\nimport TeamsPublicDetail from '../../routes/teams/publicDetail';\nimport DogPublicDetail from '../../routes/dogs/publicDetail';\n\nimport LikesAndComments from '../../components/feedback/likesAndComments';\nimport Views from '../../components/feedback/views';\n\nimport Speed from '../../components/data/speed';\nimport Elevation from '../../components/data/elevation';\nimport Weight from '../../components/data/weight';\nimport Distance from '../../components/data/distance';\nimport Temperature from '../../components/data/temperature';\n\nimport mu from '../../lib/musher-util';\n\nconst MAX_LOADINDEX = mu.getMaxLoadIndex();\n\nfunction getWorkoutColor(workout) {\n\tswitch (workout.type) {\n\t\tcase 1:\n\t\t\treturn 'border-primary';\n\t\tcase 2:\n\t\t\treturn 'border-danger';\n\t\tcase 3:\n\t\t\treturn 'border-success';\n\t\tcase 4:\n\t\t\treturn 'border-info';\n\t\tdefault:\n\t\t\treturn 'border-warning';\n\t}\n}\n\nfunction getWorkoutIcon(workout) {\n\tswitch (workout.type) {\n\t\tcase 1:\n\t\t\treturn 'fas fa-running';\n\t\tcase 2:\n\t\t\treturn 'fas fa-flag-checkered';\n\t\tcase 3:\n\t\t\treturn 'fas fa-hiking';\n\t\tcase 4:\n\t\t\treturn 'fas fa-futbol';\n\t\tdefault:\n\t\t\treturn 'fas fa-hiking';\n\t}\n}\n\nfunction displayDistance(distanceKm) {\n\tif (distanceKm < 5) {\n\t\treturn util.format(distanceKm, 2);\n\t}\n\tif (distanceKm < 10) {\n\t\treturn util.format(distanceKm, 1);\n\t}\n\treturn util.format(distanceKm, 1);\n}\n\nconst initialState = {\n\tshowAddComment: false,\n    viewImageIdx: {},\n    likeWorkout: {},\n};\n\n@observer\nclass Workout extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            ...initialState,\n        };\n        this.updateTimer = {};\n\t\tthis.inputRef = {};\n    }\n\n    toggleDate = (e) => {\n        e.stopPropagation();\n        e.preventDefault();\n        const { showDate } = this.state;\n        this.setState({ showDate: !showDate });\n    }\n\n\n\tlikeWorkout = async () => {\n\t\tconst { workoutStore } = this.props.stores;\n        const { workout } = this.props;\n        const workoutId = workout.id;\n\n        const { likeWorkout } = this.state;\n        likeWorkout[workoutId] = true;\n        this.setState({ likeWorkout });\n        setTimeout(() => {\n            const { likeWorkout } = this.state;\n            delete likeWorkout[workoutId];\n            this.setState({ likeWorkout });\n        }, 1200);\n\n\t\tconst response = await workoutStore.likeWorkout({ id: workoutId });\n        if (response && response.status === 200) {\n\n\t\t}\n\t}\n\n\ttoggleAddComment = (e) => {\n\t\tconst workoutId = e.target.parentElement.dataset.id || e.target.dataset.id;\n\t\tconst { showAddComment } = this.state;\n\t\tthis.setState({\n\t\t\tshowAddComment: !showAddComment,\n\t\t}, () => {\n\t\t\tif (this.inputRef[workoutId]) {\n\t\t\t\tthis.inputRef[workoutId].focus();\n\t\t\t}\n\t\t});\n\t}\n\n    viewImage = (e) => {\n\t\tconst { id, idx } = e.target.closest('img').dataset;\n        const { viewImageIdx } = this.state;\n        viewImageIdx[id] = idx;\n        this.setState({ viewImageIdx });\n    }\n\n    shareLink = (e) => {\n        const { url, title, text } = e.target.closest('button').dataset;\n        const { appState } = this.props.stores;\n        appState.shareUrl({ url, title, text });\n    }\n\n        // Overlay functions\n    onTeamClick = (e, teamid) => {\n        e.preventDefault();\n        e.stopPropagation();\n        this.setState({\n            showTeam: teamid,\n        });\n        return false;\n    }\n\n    hideTeam = () => {\n        this.setState({\n            showTeam: null,\n        });\n    }\n\n    onUserClick = (e, userid) => {\n        e.preventDefault();\n        e.stopPropagation();\n        return false;\n    }\n\n    onDogClick = (e, dogid, dogs) => {\n        e.preventDefault();\n        e.stopPropagation();\n        this.setState({\n            showDog: dogid,\n            dogs,\n        });\n        return false;\n    }\n\n    hideDog = () => {\n        this.setState({\n            showDog: null,\n        });\n    }\n\n    render() {\n        const {\n            showDate,\n            showAddComment,\n            viewImageIdx = {},\n            likeWorkout,\n            dogs,\n            showTeam,\n            showDog,\n        } = this.state;\n        const {\n            workout,\n            showDate: forceShowDate,\n            wrapperClasses = 'col-12 col-sm-8 col-lg-6 offset-sm-2 offset-lg-3',\n            wrapperClassesRow = 'row',\n        } = this.props;\n\t\tconst { userStore, appState, workoutStore } = this.props.stores;\n        const { viewmode, hasShareApi } = appState;\n        const { user, dogs: allDogs } = userStore;\n        const { language = 'en' } = user;\n        const intensity = userStore.findIntensity({ code: workout.intensity, language }) || {};\n        // const teamName = userStore.findTeam(workout.team);\n        const team = userStore.findTeam(workout.team, true) || {};\n        const teamName = team.name;\n        // const teamNames = workout.teams ? workout.teams.map(e => userStore.findTeam(e)) : [];\n        const teamNames = [];\n        if (teamName) {\n            teamNames.push(teamName);\n        }\n        if (workout.teams) {\n            workout.teams.forEach((e) => {\n                if (userStore.findTeam(e)) {\n                    teamNames.push(userStore.findTeam(e));\n                }\n            });\n        }\n\n        const { likes = [], comments = [] } = workout;\n\t\tconst hasLikedWorkout = workout.likes && workout.likes.findIndex(e => e.user === user.id) > -1;\n        const { gpxInfo = {}, mushers = [] } = workout;\n\t\tconst { loadIndex = 0 } = gpxInfo;\n        const workoutEquipment = userStore.findEquipment({ equipment: workout.equipment, language });\n        const workoutEquipmentIcon = userStore.findEquipment({ equipment: workout.equipment, field: 'icon' });\n\n        const musherImages = [];\n        if (mushers.length > 1) {\n            mushers.slice(1, 10).map((musher) => {\n                const u = workoutStore.findPublicUser(musher) || {};\n                if (u.images && u.images[0]) {\n                    musherImages.push(u.images[0]);\n                }\n            });\n        }\n\n        const publicUser = workoutStore.findPublicUser(mushers[0]) || {};\n        let image;\n        if (publicUser && publicUser.images && publicUser.images[0]) {\n            image = publicUser.images[0];\n        } else if (team.image && team.image.s3SmallLink) {\n            image = team.image;\n        } else if (team.images && team.images[0] && team.images[0].s3SmallLink) {\n            image = team.images[0];\n        } else if (workout.image && workout.image.s3SmallLink) {\n            image = workout.image;\n        }\n\n        const images = [];\n        if (workout.mapImage) {\n            images.push({\n                ...workout.mapImage,\n                type: 'map',\n            });\n        }\n        if (workout.images) {\n            const imgs = toJS(workout.images);\n            images.push(...imgs);\n        }\n        const imageIdx = viewImageIdx[workout.id] ? viewImageIdx[workout.id] : 0;\n        const currentImage = images && images[imageIdx] ? images[imageIdx] : null;\n\n        let batteryUsage;\n        if (workout && workout.gpxInfo && workout.gpxInfo.battegryLevelStart) {\n            batteryUsage = (workout.gpxInfo.battegryLevelStart - workout.gpxInfo.battegryLevelEnd) * 100;\n        }\n\n        const views = mu.getViews(workout.statistics);\n\n        // let temperature;\n        // let windSpeed;\n        // if (util.checkNested(workout, 'temperature')) {\n        //     const yr = toJS(workout.yr[0].instant.details);\n        //     // displayValue = `Yr.no: 🌡️ ${yr.air_temperature}°C, 💨 ${yr.wind_speed}m/s 🧭 ${mu.windDirection(yr.wind_from_direction)}, ☁️ ${yr.cloud_area_fraction}%, ${yr.air_pressure_at_sea_level}mb, 💦 ${yr.relative_humidity}%`;\n        //     temperature = `${yr.air_temperature}°C`;\n        //     windSpeed = `${yr.wind_speed}m/s`;\n        // }\n\t\t// // const loadMultiplier = loadIndex / 100;\n\n        return (<>\n\n            {showTeam && <Overlay>\n                <TeamsPublicDetail stores={this.props.stores} teamid={showTeam} marginTop={'0px;'} marginBottom={'0px;'} back={this.hideTeam} hideTeam={this.hideTeam} />\n            </Overlay>}\n\n            {showDog && <Overlay>\n                <DogPublicDetail stores={this.props.stores} dogid={showDog} marginTop={'0px;'} marginBottom={'0px;'} back={this.hideDog} dogs={dogs} />\n            </Overlay>}\n\n            <div class='w-100 mb-2'>\n                <div class={wrapperClassesRow}>\n\n                    <div class={`${wrapperClasses} d-flex mb-0 position-relative`}>\n\n                        {/* {workout.gpxInfo && <svg viewBox='0 0 300 300' style='top: 80px; left: 10px; width: 90px; height: 90px;' class='position-absolute'>\n                            <path d={`${workout.gpxInfo.svgMap}`} style='fill: none; stroke: #0063FF; stroke-width: 5; opacity: 0.3;' />\n                        </svg>} */}\n\n                        {/* {JSON.stringify(workout, null, 4)} */}\n                        <div class='text-center'>\n                            <div\n                                class={`position-relative text-center border rounded-circle imageRounded ${getWorkoutColor(workout)}`}\n                                style={`${image ? `background-image: url(\"${image.s3SmallLink}\"); background-size: cover;` : ''} border-width: 3px !important;`}\n                            >\n                                {!image && <i class={`${getWorkoutIcon(workout)} text-${intensity.class ? intensity.class : 'muted'} mt-3`} style='font-size: 40px;' />}\n\n                                {musherImages && musherImages.map((img, idx) => <>\n                                    <div\n                                        class='position-absolute rounded-circle imageRounded border imageRoundedThumb border-white'\n                                        style={`\n                                            background-image: url(\"${img.s3SmallLink}\");\n                                            background-size: cover;\n                                            bottom: -3px;\n                                            left: ${-5 + (idx * 10)}px;\n                                        `}\n                                    />\n                                </>)}\n                            </div>\n                            {workout.temperature !== 0 && <>\n                                <span class='text-muted font-weight-light'>\n                                    <Temperature stores={this.props.stores} value={workout.temperature} />\n                                </span>\n                            </>}\n                        </div>\n                        <div class='flex-grow-1 pl-3' style='line-height: 1.2em;'>\n                            <span class='float-right'>\n                                {workout.isLocked === 1 && <i class='fas fa-lock text-danger ml-3' />}\n                                {workout.isInProgress === 1 && <div class='spinner-grow text-success ml-3' role='status' />}\n                                {workout.isInProgress === 2 && <i class='fas fa-pause-circle text-warning ml-3' />}\n                            </span>\n                            <a class='stretched-link' href={`/workouts/${workout.id}`}>\n                                <h5 class='my-0 mb-1' style='line-height: 1.0em;'>\n                                    {workout.name}\n                                </h5>\n                            </a>\n                            {teamNames && teamNames.length > 0 && <small class='font-weight-lighter'>\n                                {teamNames.map((name, idx) => <>{idx > 0 ? ', ' : ''}{name}</>)}\n                            </small>}\n                            <br />\n                            <small class='text-muted'>\n                                {workout.date && <small onClick={this.toggleDate}>\n                                    {forceShowDate || showDate ? util.formatDate(workout.date, { locale: 'no-NB', hour12: false, hour: '2-digit', minute: '2-digit' }) : util.formatDistance(workout.date, new Date(), { locale: 'no-NB' })}\n                                </small>}\n                                <span class={`badge badge-${intensity.class} ml-2`}>{intensity.name}</span>\n                                {loadIndex > 0 && <span class={`ml-2 text-${mu.getLoadIndexColor(util.normalizeBetween(loadIndex, 0, MAX_LOADINDEX, 0, 100))}`}>\n                                    <i class='fas fa-hand-rock mr-1' />\n                                    {Math.floor(util.normalizeBetween(loadIndex, 0, MAX_LOADINDEX, 0, 100))} -&nbsp;\n                                    {mu.getLoadIndexText(util.normalizeBetween(loadIndex, 0, MAX_LOADINDEX, 0, 100))}\n                                </span>}\n                                <br />\n                            </small>\n                            <small>\n                                <div class='text-muted'>\n                                    {workout.garminId > 0 && <div class={`float-left mr-2 text-center border rounded-circle imageRounded imageRoundedIcon`} style={`background-image: url(\"./assets/garmin-connect.png\");`} />}\n                                    {workout.stravaId > 0&& <div class={`float-left mr-2 text-center border rounded-circle imageRounded imageRoundedIcon`} style={`background-image: url(\"./assets/strava-icon.png\");`} />}\n\n                                    {workout.equipment > 0 && <><i class={`${workoutEquipmentIcon} ml-2`} /> {workoutEquipment}</>}\n                                    {/* {workout.distanceKm > 0 && <><i class='fas fa-road ml-2' /> {displayDistance(workout.distanceKm)}km</>}\n                                    {workout.elevation > 0 && <><i class='fas fa-mountain ml-2' /> {util.format(workout.elevation, 0)}m</>} */}\n                                    {/* {workout.speedAvg > 0 && <><i class='fas fa-tachometer-alt ml-2' /> {util.format(workout.speedAvg, 1)}km/t</>} */}\n                                    {workout.dogs > 0 && <><i class='fas fa-dog ml-2' /> {workout.dogs.length}</>}\n                                    {workout.track > 0 && <><i class={`fas fa-map-marked text-${workout.track > 0 ? 'success' : 'danger'} ml-2`} /></>}\n                                    {workout.dogsLeft > 0 && <><i class={`fas fa-crosshairs text-${workout.dogsLeft && workout.dogsRight ? 'success' : 'danger'} ml-2`} /></>}\n                                    {workout.sledWeight > 0 && <>\n                                        <i class='fas fa-sleigh ml-2' /> <Weight stores={this.props.stores} value={workout.sledWeight} />\n                                    </>}\n                                    {batteryUsage > 0 && <span class='text-muted ml-2'><i class='fas fa-battery-three-quarters' /> {util.format(batteryUsage, 1)}% <Text id='workout.battery-used'>used</Text></span>}\n                                </div>\n                                {['beta', 'advanced'].indexOf(viewmode) > -1 && (\n                                    <span class='text-muted'>\n                                        <i class='fas fa-balance-scale' /> {util.format(workout.kcalBurnedTotal)} <Text id='workout.kcal'>kcal</Text>\n                                        <i class='fas fa-drumstick-bite ml-2' /> <Weight stores={this.props.stores} value={workout.kcalMeatGramsTotal / 1000} />\n                                        <i class='fas fa-fish ml-2' /> <Weight stores={this.props.stores} value={workout.kcalSalmonGramsTotal / 1000} />\n                                        <i class='fas fa-piggy-bank ml-2' /> <Weight stores={this.props.stores} value={workout.kcalFatGramsTotal / 1000} />\n                                    </span>\n                                )}\n                            </small>\n                        </div>\n                    </div>\n                    <div class={`${wrapperClasses} position-relative mt-2`}>\n                        <strong>\n                            {workout.description}\n                        </strong>\n                    </div>\n                    <div class={`${wrapperClasses} position-relative`}>\n                        <Markdown markdown={mu.replaceImages(workout.comment, workout.images, language)} markdownOpts={mu.getMarkdownOptions()} />\n                    </div>\n                    <div class={`${wrapperClasses} d-flex mb-0 position-relative`}>\n                        <div class='container-fluid px-0'>\n                            <div class='row mt-1'>\n                                {workout.distanceKm > 0 && <div class='col-3'>\n                                    <div class='text-overflow'>\n                                        <small><i class='fas fa-road' /> <Text id='workout.calendar.distance'>Distanse</Text></small>\n                                    </div>\n                                    <div class='text-overflow font-weight-light' style='font-size: 1.2em;'>\n                                        <Distance stores={this.props.stores} value={workout.distanceKm} />\n                                    </div>\n                                </div>}\n                                {workout.elevation > 0 && <div class='col-3'>\n                                    <div class='text-overflow'>\n                                        <small><i class='fas fa-mountain' /> <Text id='workout.calendar.ascend'>Høydemeter</Text></small>\n                                    </div>\n                                    <div class='text-overflow font-weight-light' style='font-size: 1.2em;'>\n                                        <Elevation stores={this.props.stores} value={workout.elevation} />\n                                    </div>\n                                </div>}\n                                {workout.duration > 0 && <div class='col-3'>\n                                    <div class='text-overflow'>\n                                        <small><i class='fas fa-clock' /> <Text id='workout.calendar.duration'>Varighet</Text></small>\n                                    </div>\n                                    <div class='text-overflow font-weight-light' style='font-size: 1.2em;'>\n                                        {util.secToHms(workout.duration, true)}\n                                    </div>\n                                </div>}\n                                {workout.speedAvg > 0 && <div class='col-3'>\n                                    <div class='text-overflow'>\n                                        <small><i class='fas fa-tachometer-alt' /> <Text id='workout.calendar.avg-speed'>Snittfart</Text></small>\n                                    </div>\n                                    <div class='text-overflow font-weight-light' style='font-size: 1.2em;'>\n\t\t\t\t                        {workout.gpxInfo && workout.gpxInfo.avgGpsMovingSpeed > 0 ? <>\n                                            <Speed stores={this.props.stores} value={workout.gpxInfo.avgGpsMovingSpeed * 3.6} />\n                                        </> : <>\n                                            <Speed stores={this.props.stores} value={workout.speedAvg} />\n                                        </>}\n                                    </div>\n                                </div>}\n                            </div>\n                        </div>\n                    </div>\n\n                    {['beta', 'advanced', 'normal'].indexOf(viewmode) > -1 && (\n                        <div class={`${wrapperClasses}`}>\n                            <div class='container-fluid px-0 mt-1'>\n                                <div class='row'>\n                                    <ImageScroller stores={this.props.stores} images={images} id={workout.id} dblClick={this.likeWorkout} likeRef={likeWorkout} />\n                                </div>\n                            </div>\n                        </div>\n                    )}\n\n                    {['beta', 'advanced', 'normal'].indexOf(viewmode) > -1 && <>\n                        {workout.dogs && workout.dogs.length > 0 && <div class='container-fluid px-0 mt-1'>\n                            <div class='row pt-2'>\n                                <DogScroller stores={this.props.stores} dogs={workout.dogs} allDogs={allDogs} onDogClick={this.onDogClick} />\n                            </div>\n                        </div>}\n\n                        <div class='mt-2'>\n                            <LikesAndComments\n                                stores={this.props.stores}\n                                likes={likes}\n                                comments={comments}\n                                type='workout'\n                                onTeamClick={this.onTeamClick}\n                                onUserClick={this.onUserClick}\n                            />\n                        </div>\n\n                    </>}\n\n                    {['beta', 'advanced', 'normal'].indexOf(viewmode) > -1 && <>\n                        <div class={`${wrapperClasses} mb-0 position-relative mt-2`}>\n                            <div class='row'>\n                                <div class='col text-center'>\n                                    <button type='button' class={`btn btn-sm btn-outline-${hasLikedWorkout ? 'primary' : 'secondary'} btn-lg btn-block ${hasLikedWorkout ? 'text-primary' : ''}`}\n                                        onClick={this.likeWorkout}\n                                        // disabled={hasLikedWorkout}\n                                    >\n                                        <i class={`${hasLikedWorkout ? 'text-primary fas' : 'far'} fa-thumbs-up`} /> <Text id='comments.like'>Lik</Text>\n                                    </button>\n                                </div>\n                                <div class='col text-center'>\n                                    <button type='button' class='btn btn-sm btn-outline-secondary btn-lg btn-block'\n                                        data-id={workout.id}\n                                        onClick={this.toggleAddComment}\n                                    >\n                                        <i class='fas fa-comment' /> <Text id='comments.comment-add'>Kommentar</Text>\n                                    </button>\n                                </div>\n                                {hasShareApi ? <>\n                                    <div class='col text-center'>\n                                        <button class='btn btn-sm btn-outline-secondary btn-lg btn-block text-overflow'\n                                            onClick={this.shareLink}\n                                            data-url={`https://themusher.app/share/workout/${workout.uuidv4}`}\n                                            data-title={`title: ${workout.name}`}\n                                        >\n                                            <i class='fas fa-share' /> <Text id='workout.share'>Del</Text>\n                                        </button>\n                                    </div>\n                                </> : <>\n                                    <div class='col text-center'>\n                                        <a class='btn btn-sm btn-outline-secondary btn-lg btn-block text-overflow'\n                                            href={`https://themusher.app/share/workout/${workout.uuidv4}`}\n                                            target='_blank'\n                                            rel='noreferrer'\n                                            data-native\n                                        >\n                                            <i class='fas fa-share' /> <Text id='workout.share'>Del</Text>\n                                        </a>\n                                    </div>\n                                </>}\n                            </div>\n                        </div>\n\n                        <div class={`${wrapperClasses} mt-2 mb-3`}>\n                            {showAddComment && <WorkoutAddComment\n                                stores={this.props.stores}\n                                workout={workout}\n                                inputRef={c => this.inputRef[workout.id] = c}\n                                inputRefObject={this.inputRef}\n                                col='12'\n                                offset='0'\n                            />}\n                            <WorkoutComments stores={this.props.stores} workout={workout} col='10' offset='2' compact={true} />\n                        </div>\n\n                        {views > 0 && <>\n                            <div class='mt-2'>\n                                <Views\n                                    stores={this.props.stores}\n                                    views={views}\n                                    object={workout}\n                                    type='workout'\n                                    isTeamAdmin={true}\n                                    isAdmin={false}\n                                    onTeamClick={this.onTeamClick}\n                                    onUserClick={this.onUserClick}\n                                />\n                            </div>\n                        </>}\n\n                    </>}\n\n                </div>\n            </div>\n        </>);\n    }\n}\n\nexport default Workout;\n","import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport linkState from 'linkstate';\nimport { Text, Localizer, withText } from 'preact-i18n';\n\nimport Speed from '../../components/data/speed';\nimport Elevation from '../../components/data/elevation';\nimport Weight from '../../components/data/weight';\nimport Distance from '../../components/data/distance';\nimport Temperature from '../../components/data/temperature';\n\nimport mu from '../../lib/musher-util';\n\nconst RED_DAYS = [0, 6];\n\n@observer\nclass Calendar extends Component {\n\tsetFocus = () => {\n\t\tif (this.inputRef) {\n\t\t\tthis.inputRef.focus();\n\t\t}\n\t}\n\teditMonth = (e) => {\n\t\tconst month = e.target.parentElement.dataset.month || e.target.dataset.month;\n\t\tconst year = e.target.parentElement.dataset.year || e.target.dataset.year;\n\t\tconst distance = e.target.parentElement.dataset.distance || e.target.dataset.distance;\n\t\t// console.log({ month, year });\n\t\tthis.setState({\n\t\t\tshowInput: true,\n\t\t\tinputYear: year,\n\t\t\tinputMonth: month,\n\t\t\tinputDay: null,\n\t\t\tinputWeek: null,\n\t\t\tnewDistance: distance || null,\n\t\t}, () => this.setFocus());\n\t}\n\n\teditWeek = (e) => {\n\t\tconst week = e.target.parentElement.dataset.week || e.target.dataset.week;\n\t\tconst year = e.target.parentElement.dataset.year || e.target.dataset.year;\n\t\tconst distance = e.target.parentElement.dataset.distance || e.target.dataset.distance;\n\t\t// console.log({ week, year });\n\t\tthis.setState({\n\t\t\tshowInput: true,\n\t\t\tinputYear: year,\n\t\t\tinputWeek: week,\n\t\t\tinputMonth: null,\n\t\t\tinputDay: null,\n\t\t\tnewDistance: distance || null,\n\t\t}, () => this.setFocus());\n\t}\n\n\teditDay = (e) => {\n\t\tconst day = e.target.parentElement.dataset.day || e.target.dataset.day;\n\t\tconst month = e.target.parentElement.dataset.month || e.target.dataset.month;\n\t\tconst year = e.target.parentElement.dataset.year || e.target.dataset.year;\n\t\tconst week = e.target.parentElement.dataset.week || e.target.dataset.week;\n\t\tconst distance = e.target.parentElement.dataset.distance || e.target.dataset.distance;\n\t\t// console.log({ day, month, year });\n\t\tthis.setState({\n\t\t\tshowInput: true,\n\t\t\tinputYear: year,\n\t\t\tinputMonth: month,\n\t\t\tinputDay: day,\n\t\t\tinputWeek: week,\n\t\t\tnewDistance: distance || null,\n\t\t}, () => this.setFocus());\n\t}\n\n\tsaveDistance = async () => {\n\t\tconst { workoutPlanStore, workoutStore, userStore } = this.props.stores;\n\t\tconst { currentTeam } = workoutStore;\n\t\tconst teamName = userStore.findTeam(currentTeam) || '';\n\t\tconst { year, month } = this.props;\n\t\tconst { workoutPlans } = workoutPlanStore;\n\t\tconst workoutPlanCurrent = workoutPlans[0] || {};\n\t\tconst { inputYear, inputMonth, inputWeek, inputDay, newDistance } = this.state;\n\t\t// console.log({ showInput, inputYear, inputMonth, inputWeek, inputDay, newDistance });\n\n\t\tconst currentMonth = month || new Date().getMonth() + 1;\n\t\tconst currentYear = year || util.getYear();\n\t\tconst seasonStart = parseInt(currentMonth < 8 ? currentYear - 1 : currentYear, 10);\n\n\t\tif (!workoutPlanCurrent.id) {\n\t\t\tconst response = await workoutPlanStore.insert({\n\t\t\t\ttitle: `Workout plan for ${seasonStart} - ${seasonStart + 1}: ${teamName}`,\n\t\t\t\tteam: currentTeam,\n\t\t\t\tseasonYear: seasonStart,\n\t\t\t\tseasonMonth: 6,\n\t\t\t});\n\t\t\tconst { id: newId } = response.data;\n\t\t\tawait workoutPlanStore.load(newId);\n\t\t} else {\n\t\t\tawait workoutPlanStore.load(workoutPlanCurrent.id);\n\t\t}\n\t\tconst { workoutPlan } = workoutPlanStore;\n\t\tconst { id } = workoutPlan;\n\t\t// console.log({ id });\n\n\t\tlet field;\n\t\tif (inputYear) {\n\t\t\tif (inputDay) {\n\t\t\t\tfield = 'days';\n\t\t\t} else {\n\t\t\t\tfield = 'weeks';\n\t\t\t}\n\t\t}\n\t\tawait workoutPlanStore.saveField(id, field, {\n\t\t\tyear: inputYear,\n\t\t\tmonth: inputMonth,\n\t\t\tday: inputDay,\n\t\t\tweek: inputWeek,\n\t\t\tdistance: newDistance,\n\t\t});\n\t\tawait workoutPlanStore.load(id);\n\n\t\tthis.resetInput(true);\n\t}\n\n\tresetInput = (nextDay) => {\n\t\tif (nextDay) {\n\t\t\tconst { inputYear, inputMonth, inputDay } = this.state;\n\t\t\tconst nextDay = util.addDays(new Date(inputYear, inputMonth - 1, inputDay, 0, 0, 0, 0), 1);\n\t\t\tthis.setState({\n\t\t\t\tshowInput: true,\n\t\t\t\tinputYear: nextDay.getFullYear(),\n\t\t\t\tinputMonth: nextDay.getMonth() + 1,\n\t\t\t\tinputDay: nextDay.getDate(),\n\t\t\t\tinputWeek: util.getWeek(nextDay),\n\t\t\t\tnewDistance: null,\n\t\t\t});\n\t\t\tthis.setFocus();\n\t\t} else {\n\t\t\tthis.setState({\n\t\t\t\tshowInput: false,\n\t\t\t\tinputYear: null,\n\t\t\t\tinputMonth: null,\n\t\t\t\tinputDay: null,\n\t\t\t\tinputWeek: null,\n\t\t\t\tnewDistance: null,\n\t\t\t});\n\t\t}\n\t}\n\n\tcheckKeydown = (e) => {\n\t\tswitch (e.key) {\n\t\t\tcase 'Enter':\n\t\t\t\tthis.saveDistance();\n\t\t\t\tbreak;\n\n\t\t\tcase 'Escape':\n\t\t\t\tthis.resetInput();\n\t\t\t\tbreak;\n\t\t\n\t\t\tdefault:\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\tcomponentDidMount() {\n\t\tthis.updateWorkoutPlanTips();\n\t}\n\n\tupdateWorkoutPlanTips = () => {\n\t\t// console.log('updateWorkoutPlanTips');\n\t\tconst { userStore } = this.props.stores;\n\t\tconst { user = {} } = userStore;\n\t\tconst { settings = {} } = user;\n\t\tthis.setState({ hideWorkoutPlanTips: settings.hideWorkoutPlanTips });\n\t}\n\n\ttoggleTips = async () => {\n\t\tconst { hideWorkoutPlanTips } = this.state;\n\t\tconst { userStore } = this.props.stores;\n\t\tconst newValue = hideWorkoutPlanTips === 1 ? 0 : 1;\n\t\tthis.setState({ hideWorkoutPlanTips: newValue });\n\t\tawait userStore.updateSetting({ 'settings.hideWorkoutPlanTips': newValue }, { hideWorkoutPlanTips: newValue });\n\t}\n\n\trender() {\n\t\tconst { hideWorkoutPlanTips } = this.state;\n\t\tconst { appState, workoutPlanStore, userStore, workoutStore, teamStore } = this.props.stores;\n\t\tconst { user } = userStore;\n\t\tconst { language = 'en' } = user;\n\t\tconst { darkmode } = appState;\n\t\tconst DAYS = mu.getDays(language);\n\t\tconst MONTHS = mu.getMonths(language);\n\n\t\tconst { showInput, inputYear, inputMonth, inputWeek, inputDay, newDistance } = this.state;\n\n        const currentDay = new Date().getDate();\n        const currentMonth = new Date().getMonth() + 1;\n        const currentYear = new Date().getFullYear();\n\n\t\tconst currentEpoch = new Date().getTime();\n\t\tconst { month = currentMonth, year = currentYear, dog, basehref, showNavigation = true, showHeader = true, currentTeam } = this.props;\n\n\t\tconst seasonStart = parseInt(month < 8 ? year - 1 : year, 10);\n\n        const monthNum = parseInt(month, 10);\n        const yearNum = parseInt(year, 10);\n        const { month: nextMonth, year: nextYear } = mu.getNextMonth(monthNum, yearNum);\n        const { month: prevMonth, year: prevYear } = mu.getPrevMonth(monthNum, yearNum);\n\n        const daysOfMonth = util.getDaysInMonth(month, year);\n        const weeksInMonth = util.getWeeksInMonth(month, year);\n        const firstWeek = weeksInMonth[0].week;\n        const daysOfWeek = util.getDaysInWeek(firstWeek, year, month);\n        let totalDistanceKmMonth = 0;\n\t\tlet totalDistanceKmMonthPlan = 0;\n\t\tlet totalWorkoutDistanceKmMonth = 0;\n\n\t\tconst monthEpoch = daysOfMonth[daysOfMonth.length - 1].getTime();\n\t\tconst isMonthInTheFuture = monthEpoch > currentEpoch;\n\n\t\tconst summaryMonth = workoutPlanStore.findWorkoutPlanSummaryMonth(year, monthNum) || {};\n\t\tconst { workoutPlan, tips } = workoutPlanStore;\n\n\t\tconst tipsMonth = tips[`${year}-${util.padDate(month)}`];\n\t\tconst hasTipsMonth = tipsMonth && (tipsMonth.comments.length > 0 || tipsMonth.distance);\n\n\t\tconst team = teamStore.findTeam(currentTeam) || {};\n\n\t\treturn (\n\t\t\t<>\n                {showHeader && <>\n\t\t\t\t\t<div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-4 text-center'>\n\t\t\t\t\t\t{showNavigation && <a href={`${basehref || '/workouts/month/'}${nextMonth}/${nextYear}/skipScroll`} class='float-right btn btn-sm btn-outline-secondary ml-2'><i class='fas fa-arrow-right' /></a>}\n\t\t\t\t\t\t{showNavigation && <a href={`${basehref || '/workouts/month/'}${prevMonth}/${prevYear}/skipScroll`} class='float-left btn btn-sm btn-outline-secondary mr-2'><i class='fas fa-arrow-left' /></a>}\n\t\t\t\t\t\t<h3><Text id='workout.plan.month'>Måned</Text> - {MONTHS[month - 1]} {year} {summaryMonth.distance ? `- ${util.format(summaryMonth.distance, 0)} km` : ''}</h3>\n\t\t\t\t\t\t<h5 class='text-muted font-weight-light'><Text id='workout.plan.season'>Sesongen</Text> {seasonStart} - {seasonStart + 1}</h5>\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t{workoutPlan.id ? <>\n\t\t\t\t\t\t\t\t<small>{workoutPlan.title}</small>\n\t\t\t\t\t\t\t</> : <>\n\t\t\t\t\t\t\t\t<div class='display-4'>\n\t\t\t\t\t\t\t\t\t<i class='far fa-sad-tear text-muted' />\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<h5 class='font-weight-lighter text-muted'>\n\t\t\t\t\t\t\t\t\t<Text id='workout.plan.no-workout-plan-found' fields={{ name: team }}>Ingen plan</Text>\n\t\t\t\t\t\t\t\t</h5>\n\t\t\t\t\t\t\t\t<div class='text-muted'>\n\t\t\t\t\t\t\t\t\t<Text id='workout.plan.click-to-start'>Click on a date to get started.</Text>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</>}\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t{dog && <div>{dog.name}</div>}\n\t\t\t\t\t\t{/* <small>{util.isoDate(daysOfMonth[0], false, false, true)} - {util.isoDate(daysOfMonth[daysOfMonth.length - 1], false, false, true)}</small> */}\n\t\t\t\t\t</div>\n\t\t\t\t</>}\n\n                <div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3'>\n\t\t\t\t\t{!!(showInput && inputYear && inputWeek && !inputDay) && (\n\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t<div class='form-inline w-100'>\n\t\t\t\t\t\t\t\t<div class='form-group w-75 mr-3 mb-0'>\n\t\t\t\t\t\t\t\t\t<input class='form-control w-100 form-control' type='text' \n\t\t\t\t\t\t\t\t\t\tplaceholder={`Enter distance for ${inputYear} w${inputWeek}`}\n\t\t\t\t\t\t\t\t\t\tref={c => this.inputRef = c}\n\t\t\t\t\t\t\t\t\t\tonInput={linkState(this, 'newDistance')}\n\t\t\t\t\t\t\t\t\t\tonKeydown={this.checkKeydown}\n\t\t\t\t\t\t\t\t\t\tautocomplete='off'\n\t\t\t\t\t\t\t\t\t\tvalue={newDistance || ''}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<button type='button' class='btn btn-primary' onClick={this.saveDistance}><Text id='workout.plan.save'>Lagre</Text></button>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</>\n\t\t\t\t\t)}\n\t\t\t\t\t{!!(showInput && inputYear && inputMonth) && (\n\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t<div class='form-inline w-100'>\n\t\t\t\t\t\t\t\t<div class='form-group w-75 mr-3 mb-0'>\n\t\t\t\t\t\t\t\t\t<input class='form-control w-100 form-control' type='text'\n\t\t\t\t\t\t\t\t\t\tplaceholder={`Enter distance for ${inputYear}-${util.padDate(inputMonth)} ${inputDay ? `-${util.padDate(inputDay)}` : ''}`}\n\t\t\t\t\t\t\t\t\t\tref={c => this.inputRef = c}\n\t\t\t\t\t\t\t\t\t\tonInput={linkState(this, 'newDistance')}\n\t\t\t\t\t\t\t\t\t\tonKeydown={this.checkKeydown}\n\t\t\t\t\t\t\t\t\t\tautocomplete='off'\n\t\t\t\t\t\t\t\t\t\tvalue={newDistance || ''}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<button type='button' class='btn btn-primary' onClick={this.saveDistance}><Text id='workout.plan.save'>Lagre</Text></button>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</>\n\t\t\t\t\t)}\n\t\t\t\t</div>\n\n\t\t\t\t{language === 'no' && <>\n\t\t\t\t\t{hideWorkoutPlanTips ? <>\n\t\t\t\t\t\t<div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-4 d-flex justify-content-end'>\n\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\ttype='button'\n\t\t\t\t\t\t\t\tclass='btn btn-outline-primary btn-sm'\n\t\t\t\t\t\t\t\tonClick={this.toggleTips}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<i class='fas fa-eye' /> <Text id='workout.plan.show-tips'>Show tips</Text>\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</> : <>\n\t\t\t\t\t\t<div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-4 d-flex justify-content-end'>\n\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\ttype='button'\n\t\t\t\t\t\t\t\tclass='btn btn-primary btn-sm'\n\t\t\t\t\t\t\t\tonClick={this.toggleTips}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<i class='fas fa-eye-slash' /> <Text id='workout.plan.hide-tips'>Hide tips</Text>\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</>}\n\t\t\t\t</>}\n\n                <div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3'>\n\t\t\t\t\t<div class='table-responsive'>\n\t\t\t\t\t\t<table class='table table-striped table-sm'>\n\t\t\t\t\t\t\t<thead>\n\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t<th class='text-muted'><small><Text id='workout.plan.week'>Uke</Text></small></th>\n\t\t\t\t\t\t\t\t\t{daysOfWeek.map(day => <th><small>{DAYS[day.getDay()]}</small></th>)}\n\t\t\t\t\t\t\t\t\t<th class='text-muted'><small><Text id='workout.plan.sum'>Sum</Text></small></th>\n\t\t\t\t\t\t\t\t\t<th class='text-muted'><small><Text id='workout.plan.planned'>Plan</Text></small></th>\n\t\t\t\t\t\t\t\t\t{/* <th class='text-muted'>Totalt</th> */}\n\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t</thead>\n\t\t\t\t\t\t\t<tbody>\n\t\t\t\t\t\t\t\t{weeksInMonth && weeksInMonth.map(weekObj => {\n\t\t\t\t\t\t\t\t\tconst daysOfWeek = util.getDaysInWeek(weekObj.week, year, month);\n\t\t\t\t\t\t\t\t\tconst summaryWeek = workoutPlanStore.findWorkoutPlanSummaryWeek(util.asNumber(year), weekObj.week) || {};\n\t\t\t\t\t\t\t\t\tconst weekEpoch = daysOfWeek[6].getTime();\n\t\t\t\t\t\t\t\t\tconst isWeekInTheFuture = weekEpoch > currentEpoch;\n\t\t\t\t\t\t\t\t\tlet totalWeek = 0;\n\t\t\t\t\t\t\t\t\tlet totalWorkoutWeek = 0;\n\t\t\t\t\t\t\t\t\tif (summaryWeek.distance > 0) {\n\t\t\t\t\t\t\t\t\t\ttotalDistanceKmMonthPlan += summaryWeek.distance;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tconst tipsWeek = tips[`${year}-${util.padDate(month)}-w${util.padDate(weekObj.week)}`];\n\t\t\t\t\t\t\t\t\tconst hasTipsWeek = tipsWeek && (tipsWeek.comments.length > 0 || tipsWeek.distance);\n\n\t\t\t\t\t\t\t\t\treturn (<>\n\t\t\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t\t\t<td class={`text-right text-muted pt-3 border-right ${!inputDay && inputYear == year && inputWeek == weekObj.week ? 'border rounded border-primary' : ''}`}>\n\t\t\t\t\t\t\t\t\t\t\t\t<small onClick={this.editWeek} data-week={weekObj.week} data-year={year} data-distance={summaryWeek.distance}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t{weekObj.week}\n\t\t\t\t\t\t\t\t\t\t\t\t</small>\n\t\t\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t\t\t{daysOfWeek.map(day => {\n\t\t\t\t\t\t\t\t\t\t\t\tconst yyyy = day.getFullYear();\n\t\t\t\t\t\t\t\t\t\t\t\tconst mm = day.getMonth() + 1;\n\t\t\t\t\t\t\t\t\t\t\t\tconst dd = day.getDate();\n\t\t\t\t\t\t\t\t\t\t\t\tconst epoch = day.getTime();\n\t\t\t\t\t\t\t\t\t\t\t\tconst isDayInTheFuture = epoch > currentEpoch;\n\t\t\t\t\t\t\t\t\t\t\t\tconst summaryWorkout = userStore.findWorkoutSummaryWeekDay((isDayInTheFuture ? yyyy - 1 : yyyy), mm, dd, monthNum) || {};\n\t\t\t\t\t\t\t\t\t\t\t\tconst summary = workoutPlanStore.findWorkoutPlanSummaryDay(yyyy, mm, dd, monthNum) || {};\n\t\t\t\t\t\t\t\t\t\t\t\tif (summary && summary.distance) {\n\t\t\t\t\t\t\t\t\t\t\t\t\ttotalWeek += summary.distance;\n\t\t\t\t\t\t\t\t\t\t\t\t\ttotalDistanceKmMonth += summary.distance;\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\tif (summaryWorkout.distanceKm) {\n\t\t\t\t\t\t\t\t\t\t\t\t\ttotalWorkoutWeek += summaryWorkout.distanceKm;\n\t\t\t\t\t\t\t\t\t\t\t\t\ttotalWorkoutDistanceKmMonth += summaryWorkout.distanceKm;\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\t\t\tconst isChosen = (inputYear == yyyy && inputMonth == mm && inputDay == dd);\n\t\t\t\t\t\t\t\t\t\t\t\tconst isToday =  (currentYear == yyyy) && (currentMonth == mm) && (currentDay == dd);\n\t\t\t\t\t\t\t\t\t\t\t\tconst isDayOff = RED_DAYS.indexOf(day.getDay()) > -1;\n\n\t\t\t\t\t\t\t\t\t\t\t\t// console.log(summary);\n\t\t\t\t\t\t\t\t\t\t\t\t// count: 1, day: 5, distanceKm: 10, duration: 3600, elevation: 200, month: 9, speedAvg: 12, year: 2020\n\t\t\t\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t\t\t\t<td class={`text-center overflow-hidden font-weight-light position-relative pt-3 pb-3 border-right ${isChosen ? 'calendarIsChosen' : ''} ${isToday ? 'calendarIsToday' : ''} ${isDayOff ? 'calendarIsWeekend' : ''}`}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tstyle={`font-size: 0.8em; min-width: 3rem;`}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={this.editDay} data-day={day.getDate()} data-month={day.getMonth() + 1} data-year={year} data-week={weekObj.week} data-distance={summary.distance}\n\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div class='position-absolute text-muted' style='top: 0px; right: 2px; font-size: 0.7em;'>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{day.getDate()}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{summary && summary.distance ? \n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div class='rounded-pill w-100 px-1'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstyle={`background-color: ${mu.getPlanColor(summary, darkmode)};`}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Distance stores={this.props.stores} value={summary.distance} />\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{summary.count > 1 && <span class='position-absolute text-danger' style='bottom: 0; right: 0px; font-size: 0.6em;'>{summary.count}</span>}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div> : '-'}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{summaryWorkout.distanceKm > 0 && (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span class={`position-absolute font-weight-bold`}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstyle={`bottom: 0; left: 0px; font-size: 0.85em; color: ${isDayInTheFuture ? '#393DB1' : '#2BAAA9'};`}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Distance stores={this.props.stores} value={summaryWorkout.distanceKm} />\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t)}\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\t\t\t<td class='text-right pt-3 pb-3 position-relative border-right' style='font-size: 0.8em;'>\n\t\t\t\t\t\t\t\t\t\t\t\t<Distance stores={this.props.stores} value={totalWeek} />\n\t\t\t\t\t\t\t\t\t\t\t\t{totalWorkoutWeek > 0 && (\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span class={`position-absolute`}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tstyle={`bottom: 0; left: 0px; font-size: 0.85em; color: ${isWeekInTheFuture ? '#393DB1' : '#2BAAA9'};`}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Distance stores={this.props.stores} value={totalWorkoutWeek} />\n\t\t\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t\t\t<td class='text-right pt-3 pb-3 text-muted border-right' style='font-size: 0.8em;'\n\t\t\t\t\t\t\t\t\t\t\t\tonClick={this.editWeek} data-week={weekObj.week} data-year={year} data-distance={summaryWeek.distance}\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t{summaryWeek.distance > 0 && <>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div class='rounded-pill w-100 px-1 text-white text-center'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tstyle={`background-color: ${mu.getPlanColor(summaryWeek, darkmode)};`}\n\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Distance stores={this.props.stores} value={summaryWeek.distance} />\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t</>}\n\t\t\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t\t\t{/* <td class='text-right text-muted pt-3'>{totalDistanceKmMonth}</td> */}\n\t\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t\t{!hideWorkoutPlanTips && language === 'no' && tipsWeek && hasTipsWeek && <tr>\n\t\t\t\t\t\t\t\t\t\t\t<td colspan='10' class='pb-3'>\n\t\t\t\t\t\t\t\t\t\t\t\t<h5><span class='font-weight-lighter'>Uke {weekObj.week} {year}:</span>Tips fra Femundløpet</h5>\n\n\t\t\t\t\t\t\t\t\t\t\t\t{tipsWeek.totalDistance > 0 && <div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span class='text-muted'><i class='fas fa-road' /> Distanse</span>: {tipsWeek.totalDistance} km\n\t\t\t\t\t\t\t\t\t\t\t\t</div>}\n\t\t\t\t\t\t\t\t\t\t\t\t{tipsWeek.distance > 0 && <div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span class='text-muted'><i class='fas fa-road' /> Distanse pr økt</span>: {tipsWeek.distance}\n\t\t\t\t\t\t\t\t\t\t\t\t</div>}\n\t\t\t\t\t\t\t\t\t\t\t\t{tipsWeek.time && <div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span class='text-muted'><i class='fas fa-clock' /> Tid pr økt</span>: {tipsWeek.time}\n\t\t\t\t\t\t\t\t\t\t\t\t</div>}\n\t\t\t\t\t\t\t\t\t\t\t\t{tipsWeek.totalWorkouts > 0 && <div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span class='text-muted'><i class='fas fa-list-ol' /> Antall økter</span>: {tipsWeek.totalWorkouts}\n\t\t\t\t\t\t\t\t\t\t\t\t</div>}\n\t\t\t\t\t\t\t\t\t\t\t\t{tipsWeek.avgSpeed && <div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span class='text-muted'><i class='fas fa-tachometer-alt' /> Gjennomsnittsfart</span>: {tipsWeek.avgSpeed}\n\t\t\t\t\t\t\t\t\t\t\t\t</div>}\n\n\t\t\t\t\t\t\t\t\t\t\t\t{tipsWeek.comments && <div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t{tipsWeek.comments.map(c => <p>{c}</p>)}\n\t\t\t\t\t\t\t\t\t\t\t\t</div>}\n\t\t\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t\t</tr>}\n\n\t\t\t\t\t\t\t\t\t</>);\n\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t</tbody>\n\t\t\t\t\t\t\t<tfoot>\n\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t<td colspan='8' class='text-right pb-3'><Text id='workout.plan.totalkm'>Totalt km</Text></td>\n\t\t\t\t\t\t\t\t\t<td class='text-right position-relative pb-3'>\n\t\t\t\t\t\t\t\t\t\t<Distance stores={this.props.stores} value={totalDistanceKmMonth} />\n\t\t\t\t\t\t\t\t\t\t{totalWorkoutDistanceKmMonth > 0 && (\n\t\t\t\t\t\t\t\t\t\t\t<span class='position-absolute'\n\t\t\t\t\t\t\t\t\t\t\t\tstyle={`bottom: 0; left: 0px; font-size: 0.65em; color: ${isMonthInTheFuture ? '#393DB1' : '#2BAAA9'};`}\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t<Distance stores={this.props.stores} value={totalWorkoutDistanceKmMonth} />\n\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t<td class='text-right text-muted'>\n\t\t\t\t\t\t\t\t\t\t<Distance stores={this.props.stores} value={totalDistanceKmMonthPlan} />\n\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t{!hideWorkoutPlanTips && language === 'no' && tipsMonth && hasTipsMonth && <tr>\n\t\t\t\t\t\t\t\t\t<td colspan='10' class='pb-3'>\n\t\t\t\t\t\t\t\t\t\t<h5><span class='font-weight-lighter'>{MONTHS[month - 1]} {year}:</span> Tips fra Femundløpet</h5>\n\n\t\t\t\t\t\t\t\t\t\t{tipsMonth.totalDistance > 0 && <div>\n\t\t\t\t\t\t\t\t\t\t\t<span class='text-muted'><i class='fas fa-road' /> Distanse</span>: {tipsMonth.totalDistance} km\n\t\t\t\t\t\t\t\t\t\t</div>}\n\t\t\t\t\t\t\t\t\t\t{tipsMonth.distance > 0 && <div>\n\t\t\t\t\t\t\t\t\t\t\t<span class='text-muted'><i class='fas fa-road' /> Distanse pr økt</span>: {tipsMonth.distance}\n\t\t\t\t\t\t\t\t\t\t</div>}\n\t\t\t\t\t\t\t\t\t\t{tipsMonth.time && <div>\n\t\t\t\t\t\t\t\t\t\t\t<span class='text-muted'><i class='fas fa-clock' /> Tid pr økt</span>: {tipsMonth.time}\n\t\t\t\t\t\t\t\t\t\t</div>}\n\t\t\t\t\t\t\t\t\t\t{tipsMonth.totalWorkouts > 0 && <div>\n\t\t\t\t\t\t\t\t\t\t\t<span class='text-muted'><i class='fas fa-list-ol' /> Antall økter</span>: {tipsMonth.totalWorkouts}\n\t\t\t\t\t\t\t\t\t\t</div>}\n\t\t\t\t\t\t\t\t\t\t{tipsMonth.avgSpeed && <div>\n\t\t\t\t\t\t\t\t\t\t\t<span class='text-muted'><i class='fas fa-tachometer-alt' /> Gjennomsnittsfart</span>: {tipsMonth.avgSpeed}\n\t\t\t\t\t\t\t\t\t\t</div>}\n\n\t\t\t\t\t\t\t\t\t\t{tipsMonth.comments && <div>\n\t\t\t\t\t\t\t\t\t\t\t{tipsMonth.comments.map(c => <p>{c}</p>)}\n\t\t\t\t\t\t\t\t\t\t</div>}\n\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t</tr>}\n\t\t\t\t\t\t\t</tfoot>\n\t\t\t\t\t\t</table>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</>\n\t\t);\n\t}\n}\n\nexport default Calendar;\n","import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport { Text, Localizer } from 'preact-i18n';\n\nimport DogSimplePublic from './simplePublic';\n\n@observer\nclass DogScroller extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            imageIdx: 0,\n        };\n    }\n\n    scrollImages = (e) => {\n        const { dogs } = this.props;\n\n        const { scrollLeft, scrollWidth, clientWidth } = e.target;\n        const imageStep = clientWidth;\n        const imageIdx = scrollLeft / imageStep;\n        // console.log({ e, imageStep, imageIdx, scrollLeft, scrollWidth, clientWidth });\n\n        const nearestInt = Math.round(imageIdx);\n        const diff = Math.abs(nearestInt - imageIdx);\n        // console.log({ nearestInt, diff });\n        if (Number.isInteger(imageIdx) || diff < 0.1) {\n            this.setState({\n                imageIdx: nearestInt,\n            });\n        }\n    }\n\n    sortByName = (a, b) => {\n        const { allDogs = [] } = this.props;\n        const dogA = allDogs.find(e => e.id === a);\n        const dogB = allDogs.find(e => e.id === b);\n        if (dogA && dogB) {\n            if (dogA.name > dogB.name) {\n                return 1;\n            }\n        }\n        return -1;\n    }\n\n    render() {\n        const { imageIdx } = this.state;\n        const { dogs, allDogs = [], size = 'medium', onDogClick = () => {} } = this.props;\n\n        return (\n            <div class='w-100'>\n                <div\n                    class='d-flex flex-row flex-nowrap no-scrollbar'\n                    style='overflow: auto; scroll-snap-type: x mandatory;'\n                    onScroll={this.scrollImages}\n                >\n                    {dogs && dogs.sort(this.sortByName).map((dogId, idx) => {\n                        const dog = allDogs.find(e => e.id === dogId);\n                        if (!dog) {\n                            return '';\n                        }\n                        return (\n                            <div class='col clearfix position-relative p-0 mx-2'>\n                                <div\n                                    class={`w-100 h-100 text-center rounded-lg imageContainer d-flex justify-content-center align-items-center`}\n                                    style={`\n                                        flex-wrap: wrap;\n                                        overflow-y: hidden;\n                                    `}\n                                    onTouchstart={(e) => { e.stopPropagation(); }}\n                                    onTouchend={(e) => { e.stopPropagation(); }}\n                                    onTouchmove={(e) => { e.stopPropagation(); }}\n                                >\n                                    <DogSimplePublic\n                                        stores={this.props.stores}\n                                        dog={dog}\n                                        dogs={allDogs.filter(d => dogs.indexOf(d.id) > -1).sort((a, b) => a.name > b.name ? 1 : -1)}\n                                        className='mx-auto'\n                                        showName={true}\n                                        showPosition={false}\n                                        size={size}\n                                        onDogClick={onDogClick} \n                                    />\n                                    {/* <xmp>{JSON.stringify(img, null, 4)}</xmp> */}\n                                </div>\n                            </div>\n                        );\n                    })}\n                </div>\n            </div>\n        );\n    }\n}\n\nexport default DogScroller;\n","import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport { Text, Localizer, withText } from 'preact-i18n';\n\nimport Speed from '../../components/data/speed';\nimport Elevation from '../../components/data/elevation';\nimport Weight from '../../components/data/weight';\nimport Distance from '../../components/data/distance';\nimport Temperature from '../../components/data/temperature';\n\nimport mu from '../../lib/musher-util';\n\n@withText((props) => ({\n    week: <Text id='workout.graph.week' />,\n    distance: <Text id='workout.graph.distance' />,\n    ascend: <Text id='workout.graph.ascend' />,\n    plan: <Text id='workout.graph.plan' />,\n}))\n@observer\nclass WorkoutTable extends Component {\n    render() {\n        const { userStore } = this.props.stores;\n\n        const currentMonth = new Date().getMonth() + 1;\n        const currentYear = new Date().getFullYear();\n\n        const { isLoading, year = currentYear, month = currentMonth, showHeader = true } = this.props;\n\t\tconst seasonStart = parseInt(month < 8 ? year - 1 : year, 10);\n\n        const { user } = userStore;\n        const { language = 'en' } = user;\n\t\tconst MONTHS = mu.getMonths(language);\n\n\n        // const summaryMonth = workoutPlanStore.findWorkoutPlanSummaryMonth(year, monthNum) || {};\n        const seasonMonths = util.monthRange(`${seasonStart}-08-01`, `${seasonStart + 1}-07-31`);\n        const prevSeasonMonths = util.monthRange(`${seasonStart - 1}-08-01`, `${seasonStart}-07-31`);\n        const seasonWeeks = util.weekRange(`${seasonStart}-08-01`, `${seasonStart + 1}-07-31`);\n\n        const xTicksAll = seasonWeeks.map(wo => wo.week);\n        const parts = xTicksAll.length % 6;\n        const partSize = Math.floor(xTicksAll.length / parts);\n        const xTicks = [];\n        for (let i = 0, l = xTicksAll.length; i < l; i += partSize) {\n            xTicks.push(xTicksAll[i]);\n        }\n\n        return (\n            <>\n                {showHeader && <h5><Text id='workout.graph.title'>Treningsstatistikk</Text> {seasonStart} - {seasonStart + 1}</h5>}\n                <div class='w-100 mt-3 mb-4'>\n                    {/* <xmp>graphWorkoutSummaryWeekDistanceCurrent: {JSON.stringify(graphWorkoutSummaryWeekDistanceCurrent, null, 4)}</xmp>\n                    <xmp>graphWorkoutSummaryWeekDistancePrev: {JSON.stringify(graphWorkoutSummaryWeekDistancePrev, null, 4)}</xmp> */}\n                    <div class='table-responsive-lg'>\n                        <table class='table table-sm table-striped font-weigth-lighter border-bottom'>\n                            <thead>\n                                <tr>\n                                    <th class='text-center'><Text id='workout.graph.season'>Sesong</Text></th>\n                                    {seasonMonths.map(m => (\n                                        <th class='text-center'><a href={`/workouts/month/${m.month}/${m.year}`}>{MONTHS[m.month - 1]}</a></th>\n                                    ))}\n                                </tr>\n                            </thead>\n                            <tbody>\n                                <tr>\n                                    <th scope='row' style='padding: .15rem;'><nobr>{seasonStart - 1} - {seasonStart}</nobr></th>\n                                    {prevSeasonMonths.map(m => {\n                                        // const summaryMonth = workoutPlanStore.findWorkoutPlanSummaryMonth(m.year, m.month) || {};\n                                        return (\n                                            <>\n                                                <td class='text-right px-3'>\n                                                    {/* <nobr>{summaryMonth.distance}</nobr><br /> */}\n                                                    <nobr>\n                                                        <Distance stores={this.props.stores} value={userStore.findWorkoutSummaryMonth(m.year, m.month)} smallUnit={true} />\n                                                    </nobr><br />\n                                                    <nobr>\n                                                        <Elevation stores={this.props.stores} value={userStore.findWorkoutSummaryMonth(m.year, m.month, 'elevation')} smallUnit={true} />\n                                                    </nobr><br />\n                                                </td>\n                                            </>\n                                        );\n                                    })}\n                                </tr>\n                                <tr>\n                                    <th scope='row' style='padding: .15rem;'><nobr>{seasonStart} - {seasonStart + 1}</nobr></th>\n                                    {seasonMonths.map(m => {\n                                        // const summaryMonth = workoutPlanStore.findWorkoutPlanSummaryMonth(m.year, m.month) || {};\n                                        return (\n                                            <>\n                                                <td class='text-right px-3'>\n                                                    <nobr>\n                                                        <Distance stores={this.props.stores} value={userStore.findWorkoutSummaryMonth(m.year, m.month)} smallUnit={true} />\n                                                    </nobr><br />\n                                                    <nobr>\n                                                        <Elevation stores={this.props.stores} value={userStore.findWorkoutSummaryMonth(m.year, m.month, 'elevation')} smallUnit={true} />\n                                                    </nobr><br />\n                                                </td>\n                                            </>\n                                        );\n                                    })}\n                                </tr>\n                            </tbody>\n                        </table>\n                    </div>\n\n                </div>\n            </>\n        );\n    }\n}\n\nexport default WorkoutTable;\n","import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport { Text, Localizer, withText } from 'preact-i18n';\n\nimport Speed from '../../components/data/speed';\nimport Elevation from '../../components/data/elevation';\nimport Weight from '../../components/data/weight';\nimport Distance from '../../components/data/distance';\nimport Temperature from '../../components/data/temperature';\n\n@observer\nclass Strava extends Component {\n    toggleDate = (e) => {\n        e.stopPropagation();\n        e.preventDefault();\n        const { showDate } = this.state;\n        this.setState({ showDate: !showDate });\n    }\n\n    ignoreStravaWorkout = async (e) => {\n        e.stopPropagation();\n        const id = e.target.parentElement.dataset.id || e.target.dataset.id;\n        const { stravaActivityStore } = this.props.stores;\n\t\tawait stravaActivityStore.ignoreWorkout(id);\n        this.loadStravaActivities();\n    }\n\n    importStravaWorkout = async (e) => {\n        e.stopPropagation();\n        const id = e.target.parentElement.dataset.id || e.target.dataset.id;\n        const { stravaActivityStore, workoutStore } = this.props.stores;\n\t\tconst { currentTeam } = workoutStore;\n\t\tawait stravaActivityStore.importWorkout(id, currentTeam);\n        this.loadStravaActivities();\n        this.loadWorkouts();\n    }\n\n    async loadStravaActivities() {\n\t\tconst { stravaActivityStore } = this.props.stores;\n\t\tstravaActivityStore.load({ query: { hideImported: 1 }});\n\t}\n\n    loadWorkouts = async () => {\n\t\tconst { workoutStore } = this.props.stores;\n\t\tconst { currentTeam } = workoutStore;\n\t\tawait workoutStore.load({ query: { team: currentTeam } });\n\t}\n\n    toggleDetail = () => {\n        const { showDetail = false } = this.state;\n        this.setState({\n            showDetail: !showDetail,\n        });\n    }\n\n\tcomponentDidMount() {\n\t\tthis.loadStravaActivities();\n\t}\n\n    render() {\n        const { showDate, showDetail = false } = this.state;\n        const { activities, showDate: forceShowDate } = this.props;\n\t\tconst { userStore, workoutStore } = this.props.stores;\n        const { currentTeam } = workoutStore;\n        const { team } = userStore;\n\n        const selectedTeam = userStore.findTeam(currentTeam || team.id);\n\n         if (!showDetail) {\n            if (activities && activities.length > 0) {\n                return (<>\n                    <div class='col-12 mb-3'>\n                        <button type='button' class='btn btn-block btn-outline-info' onClick={this.toggleDetail}>\n                            <div class={`float-right ml-2 text-center border rounded-circle imageRounded imageRoundedIcon`} style={`background-image: url('./assets/strava-icon.png');`} />\n                            <Text id='workout.index.strava-workouts'>Strava workouts / not imported</Text> {activities.length}\n                        </button>\n                    </div>\n                </>);\n            }\n            return (<></>);\n        }\n\n        return (<>\n            <div class='col-12 mb-3'>\n                <div class='row'>\n                    {activities && activities.length > 0 && (\n                        <div\n                            class='col-12 border-top border-bottom pt-3 pb-3 my-2 bg-light'\n                        >\n                            <button type='button' class='float-right btn btn-sm btn-link' onClick={this.toggleDetail}>\n                                <i class='fas fa-caret-up' /> <Text id='strava.hide-list'>Hide list</Text>\n                            </button>\n                            <h5><Text id='workout.index.strava-workouts'>Strava workouts / not imported</Text> {activities.length}</h5>\n                            {activities && activities.map(activity => {\n                                const { summary = {} } = activity;\n                                const startDate = util.parseInputDate(summary.startTimeInSeconds);\n\n                                return (<>\n                                    {/* <td>{util.secToHms(activity.moving_time)}</td> */}\n                                    {/* <td>{util.secToHms(activity.elapsed_time)}</td> */}\n\n                                    <div class='col-12 d-flex mb-4 position-relative'>\n                                        <div class={`text-center border rounded-circle imageRounded`} style={`background-image: url(\"./assets/strava-icon.png\"); border-width: 3px !important;`}>\n                                            &nbsp;\n                                        </div>\n                                        <div class='flex-grow-1 pl-3' style='line-height: 1.2em;'>\n                                            <h5 class='my-0 mb-1' style='line-height: 1.0em;'>{activity.name}</h5>\n                                            {activity.type}<br />\n                                            <small class='text-muted'>\n                                                {activity.start_date && <small onClick={this.toggleDate}>\n                                                    {forceShowDate || showDate ? util.formatDate(activity.start_date, { locale: 'no-NB' }) : util.formatDistance(activity.start_date, new Date(), { locale: 'no-NB' })}\n                                                </small>}\n                                                <span class='text-muted'>\n                                                    <i class='fas fa-road ml-2' /> <Distance stores={this.props.stores} value={activity.distance / 1000} />\n                                                    <i class='fas fa-mountain ml-2' /> <Elevation stores={this.props.stores} value={activity.total_elevation_gain} />\n                                                    <i class='fas fa-tachometer-alt ml-2' /> <Speed stores={this.props.stores} value={activity.average_speed * 3.6} />\n                                                    <i class='fas fa-stopwatch ml-2' /> {util.secToHms(activity.elapsed_time)}\n                                                </span>\n                                            </small>\n                                            <br />\n                                            <button class='btn btn-sm btn-block btn-primary' onClick={this.importStravaWorkout} data-id={activity.id}>\n                                                <i class='fas fa-file-import' /> <Text id='strava.import'>Import workout</Text> <i class='fas fa-arrow-right' /> {selectedTeam}\n                                            </button>\n                                            <button class='btn btn-sm btn-link' onClick={this.ignoreStravaWorkout} data-id={activity.id}>\n                                                <i class='fas fa-trash-alt' /> <Text id='strava.ignore'>Ignore workout</Text>\n                                            </button>\n                                        </div>\n                                    </div>\n                                </>);\n                            })}\n\n                            <button type='button' class='btn btn-block btn-primary mt-3' onClick={this.toggleDetail}>\n                                <i class='fas fa-caret-up' /> <Text id='strava.hide-list'>Hide list</Text>\n                            </button>\n                        </div>\n                    )}\n                </div>\n            </div>\n        </>);\n    }\n}\n\nexport default Strava;\n","import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport { Text, Localizer } from 'preact-i18n';\n\nimport ScrollIntoView from '../../components/util/scrollIntoView';\n\n@observer\nclass Teams extends Component {\n    toggleTeam = (team) => {\n\t\tconst { callback, unsetTeamIfSelected = true } = this.props;\n        const { dogStore, workoutStore } = this.props.stores;\n\t\tconst { currentTeam } = dogStore;\n\t\tif (unsetTeamIfSelected && team === currentTeam) {\n\t\t\tdogStore.setCurrentTeam(undefined);\n\t\t\tworkoutStore.setCurrentTeam(undefined);\n\t\t} else {\n\t\t\tdogStore.setCurrentTeam(team);\n\t\t\tworkoutStore.setCurrentTeam(team);\n\t\t}\n\t\tif (util.isDefined(callback)) {\n\t\t\tcallback();\n\t\t}\n\t}\n\n    showAllTeams = () => {\n\t\tconst { callback } = this.props;\n        const { dogStore, workoutStore } = this.props.stores;\n\t\tdogStore.setCurrentTeam(undefined);\n\t\tworkoutStore.setCurrentTeam(undefined);\n\t\tif (util.isDefined(callback)) {\n\t\t\tcallback();\n\t\t}\n\t}\n\n\t// componentDidMount() {\n\t// \tif (this.container) {\n\t// \t\tthis.container.scrollIntoView({ behavior: 'smooth', block: 'end', inline: 'center' });\n\t// \t}\n\t// }\n\n    render() {\n        const { userStore, dogStore } = this.props.stores;\n        const { teams } = userStore;\n\t\tconst { currentTeam } = dogStore;\n\t\tconst { highlight, showAll = true } = this.props;\n        return (\n\t\t\t<div class='row mt-2'>\n\t\t\t\t<div class='w-100 overflow-hidden'>\n\t\t\t\t\t<div\n\t\t\t\t\t\tclass='d-flex flex-row flex-nowrap pb-2 px-1 no-scrollbar'\n\t\t\t\t\t\tstyle='overflow: auto; scroll-snap-type: x mandatory;'\n\t\t\t\t\t>\n\t\t\t\t\t\t{/* <xmp><br /><br /><br /><br />{JSON.stringify(teams, null, 4)}</xmp> */}\n\t\t\t\t\t\t{teams && teams.map((team, idx) => {\n\t\t\t\t\t\t\tlet classNames;\n\t\t\t\t\t\t\tif (teams.length === 1) {\n\t\t\t\t\t\t\t\tclassNames = 'rounded-pill-both';\n\t\t\t\t\t\t\t} else if (idx === 0) {\n\t\t\t\t\t\t\t\tclassNames = 'rounded-pill-left';\n\t\t\t\t\t\t\t} else if (idx + 1 === teams.length) {\n\t\t\t\t\t\t\t\tclassNames = 'rounded-pill-right';\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t<div class='col mb-0 px-0 clearfix' key={team.id}>\n\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\tclass={`btn btn-sm btn-block \n\t\t\t\t\t\t\t\t\t\t\trounded-none ${classNames}\n\t\t\t\t\t\t\t\t\t\t\t${currentTeam === team.id ? 'btn-success' : 'btn-outline-success'}\n\t\t\t\t\t\t\t\t\t\t\ttext-nowrap clearfix`}\n\t\t\t\t\t\t\t\t\t\tstyle='text-overflow: ellipsis; overflow: hidden;'\n\t\t\t\t\t\t\t\t\t\tonClick={() => this.toggleTeam(team.id)}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<i class='fas fa-users' /> {team.name}\n\n\t\t\t\t\t\t\t\t\t\t{highlight && highlight.indexOf(team.id) > -1 && <>\n\t\t\t\t\t\t\t\t\t\t\t{currentTeam === team.id ? <>\n\t\t\t\t\t\t\t\t\t\t\t\t<i class='fas fa-check float-right' />\n\t\t\t\t\t\t\t\t\t\t\t</> : <>\n\t\t\t\t\t\t\t\t\t\t\t\t<div class='spinner-grow text-warning float-right' role='status'>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span class='sr-only'>Loading...</span>\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t<i class='far fa-hand-point-left float-right' style='font-size: 2.0em;' />   \n\t\t\t\t\t\t\t\t\t\t\t</>}\n\t\t\t\t\t\t\t\t\t\t</>}\n\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t{/* {currentTeam === team.id && <ScrollIntoView horizontal={'center'} vertical={'end'} />} */}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t})}\n\t\t\t\t\t</div>\n\t\t\t\t\t{showAll && <div class='row'>\n\t\t\t\t\t\t<div class='col-12 mb-1 px-1 d-flex justify-content-center'>\n\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\tclass={`btn btn-sm rounded-lg btn-link text-nowrap clearfix`}\n\t\t\t\t\t\t\t\tstyle='text-overflow: ellipsis; overflow: hidden;'\n\t\t\t\t\t\t\t\tonClick={this.showAllTeams}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<i class='fas fa-users' /> <Text id='teams.show-all'>Show all</Text>\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>}\n\t\t\t\t</div>\n\t\t\t</div>\n        );\n    }\n}\n\nexport default Teams;\n","import { h, Component } from 'preact';\nimport { observer } from 'mobx-preact';\nimport util from 'preact-util';\n\n// TODO: Do we need mobx? What is mobx doing here?  \n\n@observer\nclass FastListLine extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {};\n        this.containerRef = null;\n    }\n\n    componentWillUnmount() {\n        const { removeIntersectionObserver } = this.props;\n        if (removeIntersectionObserver) {\n            removeIntersectionObserver(this.containerRef);\n        }\n    }\n\n    componentDidMount() {\n        const { addIntersectionObserver } = this.props;\n        if (addIntersectionObserver) {\n            addIntersectionObserver(this.containerRef);\n        }\n    }\n\n    render() {\n        const {\n            wrapperClassNames = '',\n            contentClassNames = '',\n            renderContent,\n            obj = {},\n            idx,\n            dataFields,\n            dataValues,\n            sessionid,\n        } = this.props;\n\n        const dataProperties = {};\n        if (sessionid) {\n            dataProperties.sessionid = sessionid;\n        }\n        dataFields.forEach(e => dataProperties[`data-${e}`] = encodeURI(dataValues[e] || obj[e]));\n\n        return (\n            <div\n                class={`${wrapperClassNames}`}\n                ref={c => this.containerRef = c}\n                data-idx={idx}\n                {...dataProperties}\n            >\n                <div\n                    class={`${contentClassNames}`}\n                    style={`display: block;`}\n                >\n                    {renderContent({\n                        obj,\n                        idx,\n                    })}\n                </div>\n            </div>\n        );\n    }\n}\n\n@observer\nclass FastList extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {};\n    }\n\n    // IntersectionObserver\n    deleteIntersectionObserver = () => {\n        this.intersectionObserver = null;\n    }\n\n    handleIntersection = (entries) => {\n        const { handleIntersection } = this.props;\n        if (typeof(handleIntersection) === 'function') {\n            // console.log('handleIntersection');\n            handleIntersection(entries);\n        }\n        // console.log({ entries });\n        // TODO: Make it possible to run defined functions for entries.\n        // mu.intersectionObserverCallback(entries);\n        entries.forEach((e) => {\n            const { isIntersecting } = e;\n            const { height = 0 } = e.target.dataset;\n            // const childHeight = e.target.childNodes[0].getBoundingClientRect().height;\n            // const targetHeight = e.target.getBoundingClientRect().height;\n            const childHeight = e.target.childNodes[0].offsetHeight;\n            const targetHeight = e.target.offsetHeight;\n            const scrollHeight = e.target.scrollHeight;\n            const currentHeight = Math.max(childHeight, targetHeight, scrollHeight);\n            // console.log({ isIntersecting, height, childHeight, targetHeight, scrollHeight, currentHeight }, e.target);\n\n            if (isIntersecting) {\n                e.target.childNodes[0].style.display=`block`;\n                // TODO: Should be set after image is loaded.\n                // const height = e.target.childNodes[0].clientHeight > e.target.clientHeight ? e.target.childNodes[0].clientHeight : e.target.clientHeight;\n                // console.log(e.target);\n                // console.log('e.target.childNodes[0].offsetHeight:', e.target.childNodes[0].offsetHeight);\n                // console.log('e.target.childNodes[0].scrollHeight:', e.target.childNodes[0].scrollHeight);\n                // console.log('e.target.childNodes[0].clientHeight:', e.target.childNodes[0].clientHeight);\n                // console.log('e.target.offsetHeight:', e.target.offsetHeight);\n                // console.log('e.target.scrollHeight:', e.target.scrollHeight);\n                // console.log('e.target.clientHeight:', e.target.clientHeight);\n                // console.log('height:', height);\n                // e.target.style.height=`${height}px`;\n                e.target.style.minHeight = `${currentHeight > height ? currentHeight : height}px`;\n            } else if (e.target.style.minHeight) {\n                // e.target.style.height = `${currentHeight > height ? currentHeight : height}px`;\n                e.target.style.minHeight = `${currentHeight > height ? currentHeight : height}px`;\n                e.target.childNodes[0].style.display=`none`;\n            }\n        });\n    }\n\n    setupIntersectionObserver = () => {\n        if (!('IntersectionObserver' in window) ||\n            !('IntersectionObserverEntry' in window) ||\n            !('intersectionRatio' in window.IntersectionObserverEntry.prototype)) {\n            return false;\n        }\n\n        const options = {\n            root: null,\n            rootMargin: '100px',\n            threshold: 0.1,\n        };\n        this.intersectionObserver = new IntersectionObserver(this.handleIntersection, options);\n    }\n\n    addIntersectionObserver = (ref) => {\n        if (this.intersectionObserver && ref) {\n            this.intersectionObserver.observe(ref);\n        }\n    }\n    removeIntersectionObserver = (ref) => {\n        if (this.intersectionObserver && ref) {\n            this.intersectionObserver.unobserve(ref);\n        }\n    }\n\n    componentWillMount() {\n        this.setupIntersectionObserver();\n    }\n\n    componentWillUnmount() {\n        this.deleteIntersectionObserver();\n    }\n\n    render() {\n        const {\n            data = [],\n            wrapperClassNames = 'row pb-4 bg-light',\n            contentClassNames = `col-12 col-sm-8 col-lg-6 offset-sm-2 offset-lg-3 mb-0 position-relative rounded rounded-lg py-3 shadow-sm`,\n            renderContent = (e) => <>Missing render function!</>,\n            dataFields = [],\n            dataValues = {},\n        } = this.props;\n        \n        return (\n            <div class='w-100'>\n                {data && data.filter(e => util.isObject(e)).map((obj, idx) => {\n                    const wrapperClasses = obj.hasOwnProperty('wrapperClassNames') ? obj.wrapperClassNames : wrapperClassNames;\n                    const contentClasses = obj.hasOwnProperty('contentClassNames') ? obj.contentClassNames : contentClassNames;\n                    return (<>\n                        <FastListLine\n                            key={`fastline-${idx}-${obj.id}`}\n                            obj={obj}\n                            idx={idx}\n                            addIntersectionObserver={this.addIntersectionObserver}\n                            removeIntersectionObserver={this.removeIntersectionObserver}\n                            wrapperClassNames={wrapperClasses}\n                            contentClassNames={contentClasses}\n                            renderContent={renderContent}\n                            dataFields={dataFields}\n                            dataValues={dataValues}\n                        />\n                    </>);\n                })}\n            </div>\n        );\n    };\n}\n\nexport default FastList;\n"],"sourceRoot":""}