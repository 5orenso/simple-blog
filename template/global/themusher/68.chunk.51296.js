(window.webpackJsonp=window.webpackJsonp||[]).push([[68],{"+JSK":function(t,e,s){"use strict";(function(t){function o(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,o)}return s}function r(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}var n,a=s("hosL"),i=s("Utv1"),c=s("/eY4"),l=s("OhSV"),d=s("ZOvn"),u={},h=Object(c.a)(n=function(e){function s(t){var s;return(s=e.call(this,t)||this).toggleLikes=function(){s.setState({showLikesList:!s.state.showLikesList})},s.state=function(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?o(Object(s),!0).forEach((function(e){r(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):o(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}({},u),s}var n,c;return c=e,(n=s).prototype=Object.create(c.prototype),n.prototype.constructor=n,n.__proto__=c,s.prototype.render=function(){var e=this.state.showLikesList,s=this.props.stores,o=s.storyStore,r=s.teamStore,n=s.workoutStore,c=s.raceStore,u=this.props,h=u.likes,b=u.comments,p=u.type,m=void 0===p?"story":p,f=u.onTeamClick,O=void 0===f?function(){}:f;return Object(a.h)(t,null,Object(a.h)("div",{class:"d-flex justify-content-between mb-2"},h&&h.length>0&&Object(a.h)(t,null,Object(a.h)("div",{class:"d-flex flex-row flex-nowrap position-relative mr-3",style:"overflow: auto;"},Object(a.h)("span",{class:"text-muted mr-2",onClick:this.toggleLikes},Object(a.h)("i",{class:"fas fa-thumbs-up text-primary"})," ",h.length),h.slice(0,1).map((function(e){var s,l,u;"story"===m?(s=o.findPublicUser(e.user),l=o.findPublicTeamByMembers(e.user)):"team"===m?(s=r.findPublicUser(e.user),l=r.findPublicTeamByMembers(e.user)):"workout"===m?(s=n.findPublicUser(e.user),l=n.findPublicTeamByMembers(e.user)):"race"===m&&(s=c.findPublicUser(e.user),l=c.findPublicTeamByMembers(e.user)),i.a.isArray(l)&&(u=l.find((function(t){return 1===t.public})));d.a.getImage({user:s,team:u,priority:"user"}),d.a.displayNameShort(s);var h=d.a.displayName(s);return Object(a.h)(t,null,Object(a.h)("span",{class:"font-weight-lighter"},u?Object(a.h)(t,null,Object(a.h)("a",{href:"/teams/public/"+u.uuidv4,title:u.name,onClick:function(t){return O(t,u.uuidv4)}},h)):Object(a.h)(t,null,h)))})),h.length>1&&Object(a.h)(t,null,Object(a.h)("span",{class:"text-muted font-weight-lighter ml-2",onClick:this.toggleLikes},Object(a.h)(l.c,{id:"likes-comments.and",fields:{total:h.length-1}},"and ",h.length-1," others."))))),b&&b.length>0&&Object(a.h)("span",{class:"float-right text-muted"},Object(a.h)("i",{class:"fas fa-comment text-primary"})," ",b.length)),e&&Object(a.h)("div",{class:"mt-3 mb-3"},h&&h.map((function(e){var s,l,u;"story"===m?(s=o.findPublicUser(e.user),l=o.findPublicTeamByMembers(e.user)):"team"===m?(s=r.findPublicUser(e.user),l=r.findPublicTeamByMembers(e.user)):"workout"===m?(s=n.findPublicUser(e.user),l=n.findPublicTeamByMembers(e.user)):"race"===m&&(s=c.findPublicUser(e.user),l=c.findPublicTeamByMembers(e.user)),i.a.isArray(l)&&(u=l.find((function(t){return 1===t.public})));var h=d.a.getImage({user:s,team:u,priority:"user"}),b=d.a.displayNameShort(s),p=d.a.displayName(s,!0);return Object(a.h)("div",{class:"d-flex flex-row position-relative font-weight-light mb-1"},u?Object(a.h)(t,null,Object(a.h)("a",{href:"/teams/public/"+u.uuidv4,title:u.name,onClick:function(t){return O(t,u.uuidv4)},class:"stretched-link"},Object(a.h)("div",{class:"text-center border rounded-circle imageRounded imageRoundedThumb",style:h?'background-image: url("'+h+'"); background-size: cover;':""},!h&&Object(a.h)("div",{class:"",style:"font-size: 12px; padding-top: 3px;"},b))),Object(a.h)("div",{class:"ml-2 "},p," ",Object(a.h)("span",{class:"font-weight-lighter"},"- ",u.name))):Object(a.h)(t,null,Object(a.h)("div",{class:"text-center border rounded-circle imageRounded imageRoundedThumb",style:(h?'background-image: url("'+h+'"); background-size: cover;':"")+" opacity: 0.5;"},!h&&Object(a.h)("div",{class:"text-muted",style:"font-size: 12px; padding-top: 3px;"},b)),Object(a.h)("div",{class:"ml-2"},p)))}))))},s}(a.Component))||n;e.a=h}).call(this,s("hosL").Fragment)},"1OK2":function(t,e,s){"use strict";var o,r=s("hosL"),n=(s("Utv1"),s("/eY4"));Object(n.a)(o=function(t){function e(e){var s;(s=t.call(this,e)||this).touchStart=function(t){t.stopPropagation(),s.setState({startX:t.touches[0].pageX})},s.touchEnd=function(t){t.stopPropagation(),s.setState({startX:void 0,sliding:!1})},s.touchMove=function(t){if(t.stopPropagation(),s.state.totalImages>1){var e=s.state,o=e.startX,r=t.touches[0].pageX;e.sliding||(r>o+50?(s.setState({sliding:!0}),s.prevImage()):r<o-50&&(s.setState({sliding:!0}),s.nextImage()))}};var o=e.images,r=void 0===o?[]:o;return s.state={imageContainer:1,currentImage1:r[0]||{},currentImage2:{},currentIdx:0,totalImages:r.length||0,imageDots:[].concat(Array(r.length||0).fill(1).map((function(t,e){return t+e})))},s}var s,o;o=t,(s=e).prototype=Object.create(o.prototype),s.prototype.constructor=s,s.__proto__=o;var n=e.prototype;return n.nextImage=function(){var t,e=this.state,s=1===e.imageContainer?2:1,o=e.currentIdx+1;o>e.totalImages-1&&(o=0),this.setState(((t={})["currentImage"+s]=this.props.images[o],t.currentIdx=o,t.imageContainer=s,t))},n.prevImage=function(){var t,e=this.state,s=e.imageContainer,o=e.currentIdx-1;o<0&&(o=e.totalImages-1),this.setState(((t={})["currentImage"+(1===s?2:1)]=this.props.images[o],t.currentIdx=o,t.imageContainer=1===s?2:1,t))},n.componentWillReceiveProps=function(t){if(t.images!==this.props.images){var e=t.images,s=void 0===e?[]:e;this.setState({imageContainer:1,currentImage1:s.length>0?s[0]:{},currentImage2:{},currentIdx:0,totalImages:s.length||0,imageDots:[].concat(Array(s.length||0).fill(1).map((function(t,e){return t+e})))})}},n.render=function(){var t,e,s=this,o=this.state,n=o.currentImage1,a=o.currentImage2,i=o.imageContainer,c=o.totalImages,l=o.imageDots,d=o.currentIdx,u=this["image"+i],h=1===i?n:a;if(h.dimensions){var b=h.dimensions,p=b.width,m=b.height,f=b.orientation;f>4&&f<9?(t=p,e=m):(t=m,e=p)}var O=h.dimensions?e/t:u&&u.height?u.width/u.height:4/3;return c<=0?"":Object(r.h)("div",{class:"w-100"},Object(r.h)("div",{class:"border rounded position-relative w-100",style:"height: calc(85vw / "+O+"); overflow: hidden; transition: all .3s ease-in-out;",onTouchstart:this.touchStart,onTouchend:this.touchEnd,onTouchmove:this.touchMove},c>1&&Object(r.h)("span",{class:"position-absolute",style:"top:0px; right: 5px; z-index: 2000;"},Object(r.h)("small",null,d+1,"/",c)),n&&Object(r.h)("div",{class:"position-absolute",style:(1===i?"opacity: 1;":"opacity: 0;")+" transition: all .3s ease-in-out; top: 0; left: 0;"},Object(r.h)("img",{loading:"lazy",src:n.s3LargeLink,class:"img-fluid align-middle",ref:function(t){return s.image1=t}})),a&&Object(r.h)("div",{class:"position-absolute",style:(2===i?"opacity: 1;":"opacity: 0;")+" transition: all .3s ease-in-out; top: 0; left: 0;"},Object(r.h)("img",{loading:"lazy",src:a.s3LargeLink,class:"img-fluid align-middle",ref:function(t){return s.image2=t}}))),l.length>1&&Object(r.h)("div",{class:"w-100 text-center"},l.map((function(t){return Object(r.h)("span",{style:"color: "+(t===d+1?"#ffffff":"#808080")+";"},"â€¢")}))))},e}(r.Component))},"4QWe":function(t,e,s){"use strict";(function(t){var o,r=s("hosL"),n=s("Utv1"),a=s("/eY4"),i=s("OhSV"),c=s("go65"),l=s("om2D"),d=s("ZOvn"),u=Object(a.a)(o=function(e){function s(t){var s;return(s=e.call(this,t)||this).beforeImagesUploaded=function(){s.setState({sendButtonEnabled:!1})},s.afterImagesUploaded=function(){s.setState({sendButtonEnabled:!0})},s.commentStory=function(){return new Promise((function(t,e){var o,r,n,a,i,c,l,u,h,b,p;return s.state.sendButtonEnabled?(n=void 0===(r=(o=s.props).callback)?function(){}:r,i=void 0===(a=o.inputRefObject)?{}:a,c=s.props.story,l=s.props.stores.storyStore,h=(u=s.state).comment,b=u.showAddImage,s.setState({sendButtonEnabled:!1}),Promise.resolve(l.commentStory({id:c.id,comment:h})).then((function(o){try{return(p=o)&&200===p.status&&(s.setState({comment:{body:"",images:[]}},(function(){d.a.resizeTextarea(i[c.id]),b&&s.addImage()})),n({story:c,response:p})),s.setState({sendButtonEnabled:!0}),t()}catch(t){return e(t)}}),e)):t(!1)}))},s.addImages=function(t){var e,o=s.state.comment;(e=o.images).push.apply(e,t.value),s.setState({comment:o})},s.addImage=function(){var t=s.state.showAddImage;s.setState({showAddImage:!(void 0!==t&&t)})},s.handleImageErrored=function(t){var e=t.target;e.onerror=null,setTimeout((function(){e.src+="?"+new Date}),1e3)},s.state={comment:{body:"",images:[]},showAddImage:!1,sendButtonEnabled:!0},s.inputRef={},s}var o,a;return a=e,(o=s).prototype=Object.create(a.prototype),o.prototype.constructor=o,o.__proto__=a,s.prototype.render=function(){var e=this,s=this.props,o=s.inputRef,a=s.story,u=this.state,h=u.comment,b=u.showAddImage,p=u.sendButtonEnabled,m=this.props.stores.userStore.user,f=void 0===m?{}:m,O=d.a.displayNameShort(f),g=(d.a.displayName(f),f.image||(f.images?f.images[0]:void 0));return Object(r.h)("div",null,Object(r.h)("div",{class:"d-flex mb-0 position-relative w-100"},Object(r.h)("div",{class:"text-center border rounded-circle imageRounded imageRoundedSmall",style:(g?"background-image: url('"+g.s3SmallLink+"'); background-size: cover;":"")+" border-width: 3px !important;"},!f.image&&Object(r.h)("span",{class:"font-weight-lighter",style:"font-size: 15px;"},O)),Object(r.h)("div",{class:"col pl-3",style:"line-height: 1.2em;"},Object(r.h)("div",{class:"d-flex bd-highlight"},Object(r.h)("div",{class:"p-0 w-100 bd-highlight"},Object(r.h)("label",{class:"sr-only",for:"inlineFormInput"},Object(r.h)(i.c,{id:"comments.comment"},"Kommentar")),Object(r.h)("div",{class:"border rounded rounded-lg position-relative"},Object(r.h)(i.b,null,Object(r.h)("textarea",{class:"form-control-plaintext px-2",type:"text",placeholder:Object(r.h)(i.c,{id:"comments.write-comment"},"Skriv en kommentar..."),onInput:Object(c.a)(this,"comment.body"),onKeyUp:d.a.resizeTextarea,onFocus:d.a.resizeTextarea,style:"height: 2.3em;",value:h.body,ref:o})),Object(r.h)("div",{class:"position-absolute",style:"top: 8px; right: 10px; font-size: 1.2em;"},Object(r.h)("i",{class:"fas fa-image pointerCursor","data-id":a.id,onClick:this.addImage})))),Object(r.h)("div",{class:"p-0 pl-2 flex-shrink-1 bd-highlight"},Object(r.h)("button",{type:"button",class:"btn btn-"+(p?"primary":"secondary")+" mb-2",disabled:!p,onClick:this.commentStory},Object(r.h)("i",{class:"fas fa-paper-plane"})))))),b&&Object(r.h)(t,null,Object(r.h)("div",{class:"col-12 text-center"},Object(r.h)("div",{class:"container-fluid"},Object(r.h)("div",{class:"row"},n.a.isArray(h.images)&&h.images.map((function(t){return Object(r.h)("div",{class:"col-3 p-1"},Object(r.h)("img",{src:t.s3SmallLink,class:"img-fluid",onError:e.handleImageErrored}),Object(r.h)("button",{class:"btn btn-sm btn-link",onClick:e.removeImage,"data-name":t.name},Object(r.h)("i",{class:"fas fa-trash"})," ",Object(r.h)(i.c,{id:"comments.remove-image"},"Remove")))})))),Object(r.h)(l.a,{object:h,updateField:this.addImages,before:this.beforeImagesUploaded,after:this.afterImagesUploaded,autoOpen:!0}))))},s}(r.Component))||o;e.a=u}).call(this,s("hosL").Fragment)},"5uob":function(t,e,s){"use strict";var o,r=s("hosL"),n=(s("Utv1"),s("/eY4")),a=s("OhSV"),i=s("go65"),c=(s("ETxl"),s("ZOvn")),l=Object(n.a)(o=function(t){function e(e){var s;return(s=t.call(this,e)||this).commentStory=function(){return new Promise((function(t,e){var o,r,n,a,i,l,d,u,h,b,p;return s.state.sendButtonEnabled?(n=void 0===(r=(o=s.props).callback)?function(){}:r,a=o.commentId,l=void 0===(i=o.inputRefObject)?{}:i,d=s.props.story,u=s.props.stores.storyStore,b=void 0===(h=s.state.comment)?"":h,s.setState({sendButtonEnabled:!1}),Promise.resolve(u.commentReplyStory({id:d.id,commentId:a,comment:b})).then((function(o){try{return(p=o)&&200===p.status&&(s.setState({comment:""},(function(){c.a.resizeTextarea(l[a])})),n({story:d,response:p,commentId:a})),s.setState({sendButtonEnabled:!0}),t()}catch(t){return e(t)}}),e)):t(!1)}))},s.state={sendButtonEnabled:!0},s.inputRef={},s}var s,o;o=t,(s=e).prototype=Object.create(o.prototype),s.prototype.constructor=s,s.__proto__=o;var n=e.prototype;return n.componentDidMount=function(){var t=this.props.initCall;(void 0===t?function(){}:t)()},n.render=function(){var t=this.props.inputRef,e=this.state,s=e.comment,o=e.sendButtonEnabled,n=this.props.stores.userStore.user,l=void 0===n?{}:n,d=c.a.displayNameShort(l),u=(c.a.displayName(l),l.image||(l.images?l.images[0]:void 0));return Object(r.h)("div",{class:"w-100"},Object(r.h)("div",{class:"d-flex mb-0 position-relative w-100"},Object(r.h)("div",{class:"text-center border rounded-circle imageRounded imageRoundedThumb",style:(u?"background-image: url('"+u.s3SmallLink+"'); background-size: cover;":"")+" border-width: 3px !important;"},!u&&Object(r.h)("span",{class:"font-weight-lighter",style:"font-size: 15px;"},d)),Object(r.h)("div",{class:"col pl-3",style:"line-height: 1.2em;"},Object(r.h)("div",{class:"d-flex bd-highlight"},Object(r.h)("div",{class:"p-0 w-100 bd-highlight"},Object(r.h)("label",{class:"sr-only",for:"inlineFormInput"},Object(r.h)(a.c,{id:"comments.comment"},"Kommentar")),Object(r.h)("div",{class:"border rounded rounded-lg position-relative"},Object(r.h)(a.b,null,Object(r.h)("textarea",{class:"form-control-plaintext px-2",type:"text",placeholder:Object(r.h)(a.c,{id:"comments.write-comment"},"Skriv en kommentar..."),onInput:Object(i.a)(this,"comment"),onKeyUp:c.a.resizeTextarea,style:"height: 2.3em;",value:s,ref:t})))),Object(r.h)("div",{class:"p-0 pl-2 flex-shrink-1 bd-highlight"},Object(r.h)("button",{type:"button",class:"btn btn-"+(o?"primary":"secondary")+" mb-2",disabled:!o,onClick:this.commentStory},Object(r.h)("i",{class:"fas fa-paper-plane"})))))))},e}(r.Component))||o;e.a=l},AEg1:function(t,e,s){"use strict";(function(t){function o(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,o)}return s}function r(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}var n,a=s("hosL"),i=s("Utv1"),c=s("/eY4"),l=s("OhSV"),d=s("go65"),u=s("om2D"),h=s("ZOvn"),b={showAddImage:!1,showTeamChange:!1,showChangeVisibility:!1,showChangeType:!1,sendButtonEnabled:!0},p=Object(c.a)(n=function(e){function s(t){var s;return(s=e.call(this,t)||this).beforeImagesUploaded=function(){s.setState({sendButtonEnabled:!1})},s.afterImagesUploaded=function(){s.setState({sendButtonEnabled:!0})},s.addStory=function(){return new Promise((function(t,e){var o,r,n,a,i,c,l,d,u,b,p,m,f,O,g;return n=void 0===(r=(o=s.state).story)?{}:r,a=o.showAddImage,l=void 0===(c=(i=s.props).callback)?function(){}:c,u=void 0===(d=i.hashTags)?[]:d,b=i.postfix,m=void 0===(p=i.topic)?"team-"+n.team:p,f=s.props.stores.storyStore,o.sendButtonEnabled&&n.body?(s.setState({sendButtonEnabled:!1}),O=n.body,b&&(O+="\n\n"+b),u&&u.length>0&&(O+="\n\n"+u.map((function(t){return"#"+t})).join(" ")),Promise.resolve(f.insert({type:n.type,title:n.title,body:O,pinned:n.pinned,images:n.images,public:n.public?1:0,team:n.team,urlText:n.urlText,url:n.url,currency:n.currency,price:n.price,code:n.code,country:n.country,region:n.region,startDate:n.startDate,endDate:n.endDate,topic:m})).then(function(o){try{if((g=o)&&201===g.status)return Promise.resolve(f.loadPublicFeed({hashtags:u})).then(function(){try{return s.setState({story:{type:1,title:"",body:"",pinned:null,images:[],public:1,urlText:"",url:"",currency:"",price:null,code:"",country:"",region:"",startDate:null,endDate:null}},(function(){h.a.resizeTextarea(s.inputRef.newStoryBody),a&&s.addImage()})),l(g.data),r.call(this)}catch(t){return e(t)}}.bind(this),e);function r(){return s.setState({sendButtonEnabled:!0}),t()}return r.call(this)}catch(t){return e(t)}}.bind(this),e)):t(!1)}))},s.addImages=function(t){var e,o=s.state.story;(e=o.images).push.apply(e,t.value),s.setState({story:o})},s.addImage=function(){s.setState({showAddImage:!s.state.showAddImage})},s.changeVisibility=function(){s.setState({showChangeVisibility:!s.state.showChangeVisibility})},s.changePinned=function(){s.setState({showChangeVisibility:!s.state.showChangeVisibility})},s.changeType=function(){s.setState({showChangeType:!s.state.showChangeType})},s.toggleTeamChange=function(){s.setState({showTeamChange:!s.state.showTeamChange})},s.handleImageErrored=function(t){var e=t.target;e.onerror=null,setTimeout((function(){e.src+="?"+new Date}),1e3)},s.setPublicTeam=function(){var t=s.props.stores.userStore.findPublicTeams();if(i.a.isArray(t)&&t.length>0){var e=s.state.story;e.team=t[0].id,s.setState({story:e})}},s.setFocus=function(t){s.setState({hasFocus:!0}),h.a.resizeTextarea(t.target)},s.removeFocus=function(){s.setState({hasFocus:!1})},s.state=function(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?o(Object(s),!0).forEach((function(e){r(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):o(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}({story:{type:1,title:"",body:"",images:[],public:1,urlText:"",url:"",currency:"",price:0,code:"",country:"",region:"",startDate:"",endDate:""}},b),s.inputRef={},s}var n,c;c=e,(n=s).prototype=Object.create(c.prototype),n.prototype.constructor=n,n.__proto__=c;var p=s.prototype;return p.componentDidMount=function(){this.setPublicTeam()},p.render=function(){var e=this,s=this.props,o=s.col,r=void 0===o?12:o,n=s.offset,c=void 0===n?0:n,b=s.hashTags,p=void 0===b?[]:b,m=this.state,f=m.story,O=void 0===f?{}:f,g=m.showAddImage,j=m.showTeamChange,v=m.showChangeVisibility,y=m.showChangeType,w=m.sendButtonEnabled,x=m.hasFocus,k=this.props.stores,S=k.userStore,C=k.appState,P=S.user,I=void 0===P?{}:P,T=S.isAdmin,D=I.firstname?""+i.a.ucfirst(I.firstname,!0)+i.a.ucfirst(I.lastname,!0):""+i.a.ucfirst(I.email||"",!0),_=I.image||(I.images?I.images[0]:void 0);if(O.team){var L=parseInt(O.team,10),F=S.findTeam(L,!0);_=F.image||(F.images?F.images[0]:void 0)}var E=C.darkmode;return Object(a.h)("div",{class:"w-100 px-0"},Object(a.h)("div",{class:"row"},Object(a.h)("div",{class:"col-"+r+" offset-"+c+" col-sm-8 col-lg-6 offset-sm-2 offset-lg-3 rounded rounded-lg pt-3 pb-1 bg-"+(E?"black":"white")+" shadow-sm mb-1"},Object(a.h)("div",{class:"d-flex mb-0 position-relative w-100"},Object(a.h)("div",{class:"position-relative"},Object(a.h)("div",{class:"text-center border rounded-circle imageRounded imageRoundedSmall pointerCursor",style:(_?"background-image: url('"+_.s3SmallLink+"'); background-size: cover;":"")+" border-width: 3px !important;",onClick:this.toggleTeamChange},!_&&Object(a.h)("span",{class:"font-weight-lighter",style:"font-size: 15px;"},D)),Object(a.h)("div",{class:"position-absolute",style:"top: 16px; right: 0px;"},Object(a.h)("small",{class:"text-white",style:"font-size: 1.5em;"},Object(a.h)("i",{class:"fas fa-caret-down pointerCursor",onClick:this.toggleTeamChange})))),Object(a.h)("div",{class:"col pl-3 pr-0",style:"line-height: 1.2em;"},Object(a.h)("div",{class:"d-flex bd-highlight"},Object(a.h)("div",{class:"p-0 w-100 bd-highlight"},Object(a.h)("label",{class:"sr-only",for:"inlineFormInput"},Object(a.h)(l.c,{id:"story.body"},"Story")),Object(a.h)("div",{class:"border rounded rounded-lg position-relative"},Object(a.h)(l.b,null,Object(a.h)("textarea",{class:"form-control-plaintext px-2",type:"text",placeholder:Object(a.h)(l.c,{id:"story.write-body"},"Hva tenker du pÃ¥?.."),onInput:Object(d.a)(this,"story.body"),onKeyUp:h.a.resizeTextarea,onFocus:this.setFocus,style:"height: 2.3em;",value:O.body,ref:function(t){return e.inputRef.newStoryBody=t}})),x&&Object(a.h)("div",{class:"position-absolute",style:"bottom: 8px; right: 10px; font-size: 1.2em;"},Object(a.h)("i",{class:"fas fa-image pointerCursor","data-id":O.id,onClick:this.addImage}),Object(a.h)("i",{class:"fas fa-"+(1===O.public?"globe-europe":"users")+" pointerCursor ml-2","data-id":O.id,onClick:this.changeVisibility}),T&&Object(a.h)("i",{class:"fas fa-cog pointerCursor ml-2","data-id":O.id,onClick:this.changeType}))),p&&p.length>0&&Object(a.h)(t,null,p.map((function(e){return Object(a.h)(t,null,Object(a.h)("span",{class:"badge badge-secondary mr-2 my-1"},Object(a.h)("a",{href:"/stories/tag/"+e,class:"text-white"},"#",e)))})))),Object(a.h)("div",{class:"p-0 pl-2 flex-shrink-1 bd-highlight pt-auto"},Object(a.h)("button",{type:"button",class:"btn btn-"+(w?"primary":"secondary")+" ml-1",disabled:!w,onClick:this.addStory},Object(a.h)("i",{class:"fas fa-paper-plane"})))))),Object(a.h)("div",null,Object(a.h)("div",{class:"row"},j&&Object(a.h)(t,null,Object(a.h)("div",{class:"col-12 text-center mt-2"},Object(a.h)("div",{class:"form-group"},Object(a.h)("small",null,Object(a.h)("select",{class:"custom-select custom-select-sm",id:"team",onInput:Object(d.a)(this,"story.team"),onChange:this.toggleTeamChange},Object(a.h)("option",{value:""},"-- ",Object(a.h)(l.c,{id:"story.team-choose"},"Velg team")," --"),i.a.isArray(I.teams)&&I.teams.map((function(t){var e=S.findTeam(t,!0);return e&&e.public?Object(a.h)("option",{value:e.id,selected:O.team==e.id?"selected":""},e.name):""})),!I.teams&&Object(a.h)(t,null,Object(a.h)("option",{value:""},"No public teams"))))))),v&&Object(a.h)(t,null,T&&Object(a.h)(t,null,Object(a.h)("div",{class:"col-12 text-center mt-2"},Object(a.h)("div",{class:"form-group"},Object(a.h)("small",null,Object(a.h)("label",{for:"pinned"},"Pinned to top:"),Object(a.h)("input",{id:"pinned",type:"checkbox",onInput:Object(d.a)(this,"story.pinned"),value:1,checked:O.pinned?1:0}))))),Object(a.h)("div",{class:"col-12 text-center mt-2"},Object(a.h)("div",{class:"form-group"},Object(a.h)("small",null,Object(a.h)("select",{class:"custom-select custom-select-sm",id:"team",onInput:Object(d.a)(this,"story.public"),value:O.public,onChange:this.changeVisibility},Object(a.h)("option",{value:0,selected:0==O.public?"selected":""},"ðŸ‘¥ ",Object(a.h)(l.c,{id:"story.visibility-followers"},"Kun synlig for de som fÃ¸lger deg.")),Object(a.h)("option",{value:1,selected:1==O.public?"selected":""},"ðŸŒ ",Object(a.h)(l.c,{id:"story.visibility-public"},"Synlig for alle som bruker appen."))))))),y&&Object(a.h)(t,null,Object(a.h)("div",{class:"col-12 text-center mt-2"},Object(a.h)("div",{class:"form-group"},Object(a.h)("small",null,Object(a.h)("select",{class:"custom-select custom-select-sm",id:"team",onInput:Object(d.a)(this,"story.type"),value:O.type,onChange:this.changeType},Object(a.h)("option",{value:""},"-- ",Object(a.h)(l.c,{id:"story.type-choose"},"Velg type")," --"),Object(a.h)("option",{value:1,selected:1==O.type?"selected":""},"âœï¸ ",Object(a.h)(l.c,{id:"story.type-regular"},"Vanlig")),Object(a.h)("option",{value:2,selected:2==O.type?"selected":""},"ðŸš€ ",Object(a.h)(l.c,{id:"story.type-ad"},"Annonse")),Object(a.h)("option",{value:3,selected:3==O.type?"selected":""},"ðŸ“„ ",Object(a.h)(l.c,{id:"story.type-article"},"Artikkel"))))))),g&&Object(a.h)(t,null,Object(a.h)("div",{class:"col-12 text-center mt-2"},Object(a.h)("div",{class:"container-fluid"},Object(a.h)("div",{class:"row"},i.a.isArray(O.images)&&O.images.map((function(t){return Object(a.h)("div",{class:"col-3 p-1"},Object(a.h)("img",{src:t.s3SmallLink,class:"img-fluid",onError:e.handleImageErrored}),Object(a.h)("button",{class:"btn btn-sm btn-link",onClick:e.removeImage,"data-name":t.name},Object(a.h)("i",{class:"fas fa-trash"})," Del"))})))),Object(a.h)(u.a,{object:O,updateField:this.addImages,before:this.beforeImagesUploaded,after:this.afterImagesUploaded,autoOpen:!0}))),O.type>1&&Object(a.h)(t,null,Object(a.h)("div",{class:"col-12 mt-3"},Object(a.h)("label",null,Object(a.h)(l.c,{id:"story.url-text"},"URL text")),Object(a.h)("div",{class:"form-group"},Object(a.h)("small",null,Object(a.h)("input",{class:"form-control",type:"text",name:"urlText",onInput:Object(d.a)(this,"story.urlText"),value:O.urlText})))),Object(a.h)("div",{class:"col-12 mt-3"},Object(a.h)("label",null,Object(a.h)(l.c,{id:"story.url"},"URL")),Object(a.h)("div",{class:"form-group"},Object(a.h)("small",null,Object(a.h)("input",{class:"form-control",type:"text",name:"url",onInput:Object(d.a)(this,"story.url"),value:O.url}))))),2==O.type&&Object(a.h)(t,null,Object(a.h)("div",{class:"col-12 mt-3"},Object(a.h)("label",null,Object(a.h)(l.c,{id:"story.code"},"Code")),Object(a.h)("div",{class:"form-group"},Object(a.h)("small",null,Object(a.h)("input",{class:"form-control",type:"text",name:"code",onInput:Object(d.a)(this,"story.code"),value:O.code})))),Object(a.h)("div",{class:"col-12"},Object(a.h)("label",null,Object(a.h)(l.c,{id:"story.region"},"Region")),Object(a.h)("div",{class:"form-group"},Object(a.h)("small",null,Object(a.h)("input",{class:"form-control",type:"text",name:"region",onInput:Object(d.a)(this,"story.region"),value:O.region})))),Object(a.h)("div",{class:"col-12"},Object(a.h)("label",null,Object(a.h)(l.c,{id:"story.country"},"Country")),Object(a.h)("div",{class:"form-group"},Object(a.h)("small",null,Object(a.h)("input",{class:"form-control",type:"text",name:"country",onInput:Object(d.a)(this,"story.country"),value:O.country})))),Object(a.h)("div",{class:"col-4"},Object(a.h)("label",null,Object(a.h)(l.c,{id:"story.currency"},"Currency")),Object(a.h)("div",{class:"form-group"},Object(a.h)("small",null,Object(a.h)("input",{class:"form-control",type:"text",name:"currency",onInput:Object(d.a)(this,"story.currency"),value:O.currency})))),Object(a.h)("div",{class:"col-8"},Object(a.h)("label",null,Object(a.h)(l.c,{id:"story.price"},"Price")),Object(a.h)("div",{class:"form-group"},Object(a.h)("small",null,Object(a.h)("input",{class:"form-control",type:"text",name:"price",onInput:Object(d.a)(this,"story.price"),value:O.price}))))))))))},s}(a.Component))||n;e.a=p}).call(this,s("hosL").Fragment)},AJN2:function(t,e,s){"use strict";(function(t){function o(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,o)}return s}function r(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}var n,a=s("hosL"),i=(s("Utv1"),s("/eY4")),c=s("NMoA"),l=(s("ZOvn"),{}),d=Object(i.a)(n=function(e){function s(t){var s;return(s=e.call(this,t)||this).state=function(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?o(Object(s),!0).forEach((function(e){r(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):o(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}({},l),s.inputRef={},s}var n,i;i=e,(n=s).prototype=Object.create(i.prototype),n.prototype.constructor=n,n.__proto__=i;var d=s.prototype;return d.loadStoriesPublicFeed=function(t){return new Promise(function(e,s){return void 0===t&&(t=this.props),Promise.resolve(t.stores.storyStore.loadPublicFeed({story:t.story})).then((function(){try{return e()}catch(t){return s(t)}}),s)}.bind(this))},d.componentDidMount=function(){this.loadStoriesPublicFeed()},d.componentWillReceiveProps=function(t){t.story!==this.props.story&&this.loadStoriesPublicFeed(t)},d.render=function(){var e=this,s=this.props.stores,o=s.storyStore.publicFeed,r=s.appState.darkmode;return Object(a.h)("div",{class:"w-100"},Object(a.h)("div",{class:"row pb-4 bg-light"},Object(a.h)("div",{class:"col-12 col-sm-8 col-lg-6 offset-sm-2 offset-lg-3 my-1 position-relative rounded rounded-lg py-3 bg-"+(r?"black":"white")+" shadow-sm"},!o||0===o.length&&Object(a.h)(t,null,Object(a.h)("div",{class:"text-center text-muted mt-5"},Object(a.h)("div",{class:"display-1 text-center mb-5"},Object(a.h)("i",{class:"fas fa-comment"})),Object(a.h)("h3",null,"No story found!"))),o&&o.map((function(s){return Object(a.h)(t,null,Object(a.h)(c.a,{stores:e.props.stores,story:s,showAllComments:!0}))})))))},s}(a.Component))||n;e.a=d}).call(this,s("hosL").Fragment)},B813:function(t,e,s){"use strict";s.r(e),function(t){function o(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,o)}return s}function r(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}var n,a=s("hosL"),i=(s("Utv1"),s("/eY4")),c=s("OhSV"),l=s("ZOvn"),d=s("AEg1"),u=(s("gOLw"),s("AJN2")),h=s("epqT"),b=s("w93r"),p=l.a.marginTop(!1),m=l.a.marginBottom(),f=l.a.marginTopBack(!1),O={isLoading:!1,submenu:"lastWorkouts",viewmenu:"wall"},g=Object(i.a)(n=function(e){function s(t){var s;return(s=e.call(this,t)||this).reloadFeeds=function(t){return new Promise((function(e,o){return t.preventDefault(),s.setState({isLoading:!0}),Promise.resolve(s.loadStoriesPublicFeed()).then((function(){try{return s.setState({isLoading:!1}),e()}catch(t){return o(t)}}),o)}))},s.back=function(){s.props.stores.history.goBack()},s.state=function(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?o(Object(s),!0).forEach((function(e){r(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):o(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}({},O),s}var n,i;i=e,(n=s).prototype=Object.create(i.prototype),n.prototype.constructor=n,n.__proto__=i;var l=s.prototype;return l.loadAll=function(){return new Promise(function(t,e){var s,o,r,n,a,i;return o=(s=this.props.stores).appState,r=s.userStore,n=s.messageStore,this.setState({isLoading:!0}),Promise.resolve(o.getFingerprint()).then(function(){try{return Promise.resolve(r.getInfo()).then(function(){try{return Promise.resolve(r.getNotifications()).then(function(){try{return Promise.resolve(n.getUnReadMessages()).then(function(){try{return(a=r.user).currentLocationInfo&&a.currentLocationInfo.coords&&r.getWeatherUser({lat:(i=a.currentLocationInfo.coords).latitude,lon:i.longitude,altitude:i.altitude}),this.setState({isLoading:!1}),t()}catch(t){return e(t)}}.bind(this),e)}catch(t){return e(t)}}.bind(this),e)}catch(t){return e(t)}}.bind(this),e)}catch(t){return e(t)}}.bind(this),e)}.bind(this))},l.loadStoriesPublicFeed=function(t){return new Promise(function(e,s){return void 0===t&&(t=this.props),Promise.resolve(t.stores.storyStore.loadPublicFeed({story:t.story})).then((function(){try{return e()}catch(t){return s(t)}}),s)}.bind(this))},l.componentDidMount=function(){this.loadAll()},l.render=function(){var e=this.state.isLoading,s=this.props.story,o=this.props.stores.userStore.user,r=o.yrWeather,n=o.currentLocationGeocode,i=(void 0===n?{}:n).formatted_address;return Object(a.h)("div",{class:"container-fluid",style:"margin-bottom: "+m+"; margin-top: "+p+";"},Object(a.h)("div",null,Object(a.h)("button",{class:"btn btn-link pl-0 fixed-top text-primary",style:"top: "+f+"; left: 5px; font-size: 35px; width: 45px;",onClick:this.back},Object(a.h)("i",{class:"fas fa-arrow-circle-left"}))),Object(a.h)(h.a,{stores:this.props.stores,url:this.props.url}),Object(a.h)("div",{class:"bg-light"},Object(a.h)(b.a,{stores:this.props.stores,data:r,place:i})),Object(a.h)(d.a,{stores:this.props.stores}),Object(a.h)("div",{class:"row bg-light"},Object(a.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 border-bottom"},Object(a.h)("small",null,Object(a.h)("small",null,Object(a.h)("div",{class:"float-right"},e?Object(a.h)(t,null,Object(a.h)("div",{class:"spinner-border text-primary",role:"status"},Object(a.h)("span",{class:"sr-only"},"Loading..."))):Object(a.h)(t,null,Object(a.h)("a",{href:"#",style:"font-size: 1.8em;",onClick:this.reloadFeeds},Object(a.h)("i",{class:"fas fa-sync-alt"}))))),Object(a.h)("span",{class:"text-muted"},Object(a.h)("i",{class:"fas fa-rss"})," ",Object(a.h)(c.c,{id:"home.wall"},"Veggen"))))),Object(a.h)(u.a,{stores:this.props.stores,story:s}))},s}(a.Component))||n;e.default=g}.call(this,s("hosL").Fragment)},B95u:function(t,e,s){"use strict";(function(t){function o(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,o)}return s}function r(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?o(Object(s),!0).forEach((function(e){n(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):o(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}function n(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}var a,i=s("hosL"),c=s("Utv1"),l=s("/eY4"),d=s("cneo"),u=s("OhSV"),h=s("fh8t"),b=s.n(h),p=s("go65"),m=s("5uob"),f=(s("ETxl"),s("ZOvn")),O={showAddComment:{},showAllComments:!1,showAllReplies:{},viewImageIdx:{},likeComment:{},likeReply:{},showOriginal:{}},g=Object(l.a)(a=function(e){function s(t){var s;return(s=e.call(this,t)||this).addLikeComment=function(t){return new Promise((function(e,o){var r,n,a,i,c,l,d;return n=void 0===(r=s.props.callback)?function(){}:r,a=t.target.closest(".commentContainer").dataset.id,i=s.props.story,c=s.props.stores.storyStore,(l=s.state.likeComment)[a]=!0,s.setState({likeComment:l}),setTimeout((function(){var t=s.state.likeComment;delete t[a],s.setState({likeComment:t})}),1200),Promise.resolve(c.likeStoryComment({id:i.id,commentId:a})).then((function(t){try{return(d=t)&&200===d.status&&n({type:"likeComment",story:i,commentId:a,response:d}),e(!0)}catch(t){return o(t)}}),o)}))},s.likeReply=function(t){return new Promise((function(e,o){var r,n,a,i,c,l,d,u;return n=void 0===(r=s.props.callback)?function(){}:r,a=t.target.closest(".replyContainer").dataset.id,i=t.target.closest(".replyContainer").dataset.comment,c=s.props.story,l=s.props.stores.storyStore,(d=s.state.likeReply)[a]=!0,s.setState({likeReply:d}),setTimeout((function(){var t=s.state.likeReply;delete t[a],s.setState({likeReply:t})}),1200),Promise.resolve(l.likeStoryCommentReply({id:c.id,replyId:a,commentId:i})).then((function(t){try{return(u=t)&&200===u.status&&n({type:"likeReply",story:c,commentId:i,replyId:a,response:u}),e()}catch(t){return o(t)}}),o)}))},s.replyComment=function(t){return new Promise((function(e){var o=t.target.parentElement.dataset.id||t.target.dataset.id,r=s.state.showAddComment;return r[o]=!r[o],s.setState({showAddComment:r},(function(){s.inputRef[o]&&s.inputRef[o].focus()})),e()}))},s.toggleComments=function(){s.setState({showAllComments:!s.state.showAllComments})},s.toggleReplies=function(t){var e=t.target.parentElement.dataset.id||t.target.dataset.id,o=s.state.showAllReplies;o[e]=!o[e],s.setState({showAllReplies:o})},s.toggleMenu=function(t){var e=t.target.closest("i").dataset.id,o=s.state.showMenu,r=void 0===o?{}:o;r[e]=!r[e],s.setState({showDeleteComment:{},showEdit:{},showMenu:r})},s.toggleEdit=function(t){var e=t.target.closest("button").dataset,o=e.id,r=e.comment,n=s.state.showEdit,a=void 0===n?{}:n;a[o]=!a[o],s.setState({showDeleteComment:{},showEdit:a,showMenu:{},commentEditText:r})},s.toggleDeleteComment=function(t){var e=t.target.closest("button").dataset.id,o=s.state.showDeleteComment,r=void 0===o?{}:o;r[e]=!r[e],s.setState({showDeleteComment:r,showEdit:{},showMenu:{}})},s.deleteComment=function(t){return new Promise((function(e,o){var r;return r=t.target.closest("button").dataset.id,Promise.resolve(s.props.stores.storyStore.deleteCommentStory({id:s.props.story.id,commentId:r})).then((function(){try{return s.setState({commentEditText:"",showDeleteComment:{},showEdit:{},showMenu:{}}),e()}catch(t){return o(t)}}),o)}))},s.deleteCommentReply=function(t){return new Promise((function(e,o){var r;return r=t.target.closest("button").dataset,Promise.resolve(s.props.stores.storyStore.deleteCommentReplyStory({id:s.props.story.id,commentId:r.commentid,replyId:r.id})).then((function(){try{return s.setState({commentEditText:"",showDeleteComment:{},showEdit:{},showMenu:{}}),e()}catch(t){return o(t)}}),o)}))},s.saveComment=function(t){return new Promise((function(e,o){var r;return r=t.target.closest("button").dataset.id,Promise.resolve(s.props.stores.storyStore.editCommentStory({id:s.props.story.id,commentId:r,comment:s.state.commentEditText})).then((function(){try{return s.setState({commentEditText:"",showDeleteComment:{},showEdit:{},showMenu:{}}),e()}catch(t){return o(t)}}),o)}))},s.saveCommentReply=function(t){return new Promise((function(e,o){var r;return r=t.target.closest("button").dataset,Promise.resolve(s.props.stores.storyStore.editCommentReplyStory({id:s.props.story.id,commentId:r.commentid,replyId:r.id,comment:s.state.commentEditText})).then((function(){try{return s.setState({commentEditText:"",showDeleteComment:{},showEdit:{},showMenu:{}}),e()}catch(t){return o(t)}}),o)}))},s.viewImage=function(t){var e=t.target.closest("img").dataset,o=s.state.viewImageIdx;o[e.id]=e.idx,s.setState({viewImageIdx:o})},s.translate=function(t){return new Promise((function(e,o){function r(){return s.setState({showOriginal:p,translatedText:f}),e()}var n,a,i,c,l,d,u,h,b,p,m,f,O;return t.preventDefault(),t.stopPropagation(),n=t.target.closest("button").dataset,c=s.props.story,d=(l=s.props.stores).storyStore,u=l.userStore.user,f=void 0===(m=(h=s.state).translatedText)?{}:m,(p=void 0===(b=h.showOriginal)?{}:b)[O=(i=n.commentid)+((a=n.replyid)?"-"+a:"")]=0,a?Promise.resolve(d.translateCommentReply({commentid:i,replyid:a,story:c,user:u})).then(function(t){try{return f[O]=t,r.call(this)}catch(t){return o(t)}}.bind(this),o):Promise.resolve(d.translateComment({commentid:i,story:c,user:u})).then(function(t){try{return f[O]=t,r.call(this)}catch(t){return o(t)}}.bind(this),o)}))},s.showOriginal=function(t){var e=t.target.closest("button").dataset,o=e.replyid,r=e.commentid;t.preventDefault(),t.stopPropagation();var n=s.state.showOriginal,a=void 0===n?{}:n;a[r+(o?"-"+o:"")]=1,s.setState({showOriginal:a})},s.state=r(r({},O),{},{showAllComments:t.showAllComments}),s.inputRef={},s}var o,n;return n=e,(o=s).prototype=Object.create(n.prototype),o.prototype.constructor=o,o.__proto__=n,s.prototype.render=function(){var e,s=this,o=this.state,r=o.showAddComment,n=o.showAllComments,a=o.showAllReplies,l=o.viewImageIdx,h=o.showMenu,O=void 0===h?{}:h,g=o.showEdit,j=void 0===g?{}:g,v=o.showDeleteComment,y=void 0===v?{}:v,w=o.commentEditText,x=o.likeComment,k=o.showOriginal,S=void 0===k?{}:k,C=o.translatedText,P=void 0===C?{}:C,I=this.props,T=I.story,D=I.callback,_=void 0===D?function(){}:D,L=I.initCall,F=void 0===L?function(){}:L,E=I.compact,R=this.props.stores,A=R.userStore,N=R.storyStore,U=A.user,M=U.language,V=void 0===M?"en":M,z=[],B=0,q=0;return T.comments&&(B=T.comments.length,n?z=T.comments:(e=void 0!==E&&E?0:2,z=T.comments.slice(Math.max(B-e,0))),q=z.length),Object(i.h)("div",null,T&&c.a.isArray(z)&&z.reverse().map((function(o){var n=o.user,h=void 0===n?{}:n,g=N.findPublicTeamByMembers(h.id),v=f.a.displayNameShort(h),k=f.a.displayName(h),C=h.image||(h.images?h.images[0]:void 0),I=o.likes&&o.likes.findIndex((function(t){return t.user===U.id}))>-1,D=[],L=0,E=0;o.comments&&(L=o.comments.length,E=(D=a[o.id]?o.comments:o.comments.slice(0,e)).length);var R=[];if(o.images){var A=Object(d.i)(o.images);R.push.apply(R,A)}var M=l[o.id]?l[o.id]:0,z=R&&R[M]?R[M]:null,B=N.getCommentTranslations({story:T,commentid:o.id,targetLang:V})||P[o.id],q=B||o.comment;return S[o.id]&&(q=o.comment),Object(i.h)("div",{class:"row"},Object(i.h)("div",{class:"col-11 offset-1 d-flex mb-2 position-relative"},Object(i.h)("div",{class:"text-center border rounded-circle imageRounded imageRoundedSmall",style:(C?'background-image: url("'+C.s3SmallLink+'"); background-size: cover;':"")+" border-width: 3px !important;"},!h.image&&Object(i.h)("span",{class:"font-weight-lighter",style:"font-size: 15px;"},v)),Object(i.h)("div",{class:"flex-grow-1 pl-3 pt-0",style:"line-height: 1.2em;"},Object(i.h)("div",{class:"bg-light p-2 rounded rounded-lg position-relative"},U.id===h.id&&Object(i.h)(t,null,Object(i.h)("span",{class:"float-right font-weight-lighter text-muted"},Object(i.h)("i",{class:"fas fa-ellipsis-h",onClick:s.toggleMenu,"data-id":o.id}))),O[o.id]&&Object(i.h)(t,null,Object(i.h)("div",{class:"position-absolute bg-white p-2 border rounded rounded-lg shadow-sm",style:"top: 30px; right: 10px; width: 60%; z-index: 999999;"},Object(i.h)("button",{class:"btn btn-link btn-block text-left",onClick:s.toggleEdit,"data-id":o.id,"data-comment":o.comment},Object(i.h)("i",{class:"fas fa-edit"})," Edit"),Object(i.h)("hr",null),Object(i.h)("button",{class:"btn btn-link btn-block text-left",onClick:s.toggleDeleteComment,"data-id":o.id},Object(i.h)("i",{class:"fas fa-trash-alt"})," Delete"))),Object(i.h)("div",null,Object(i.h)("span",{style:"font-size: 0.95em;"},Object(i.h)("h5",{class:"font-weight-bold mb-2",style:"font-size: 1.0em;"},h.uuidv4&&h.uuidv4!==U.uuidv4?Object(i.h)(t,null,Object(i.h)("a",{href:"/inbox/"+h.uuidv4},k)):Object(i.h)(t,null,k),g&&g.length>0&&Object(i.h)(t,null,Object(i.h)("span",{class:"font-weight-lighter text-muted ml-1"},g.filter((function(t){return 1===t.public})).slice(0,1).map((function(e){return Object(i.h)(t,null,"- ",Object(i.h)("a",{href:"/teams/public/"+e.uuidv4},e.name))}))))),j[o.id]?Object(i.h)(t,null,Object(i.h)("div",{class:"d-flex bd-highlight"},Object(i.h)("div",{class:"p-0 w-100 bd-highlight"},Object(i.h)("label",{class:"sr-only",for:"inlineFormInput"},Object(i.h)(u.c,{id:"comments.comment"},"Kommentar")),Object(i.h)("div",{class:"border rounded rounded-lg position-relative"},Object(i.h)(u.b,null,Object(i.h)("textarea",{class:"form-control-plaintext px-2",type:"text",placeholder:Object(i.h)(u.c,{id:"comments.write-comment"},"Skriv en kommentar..."),onInput:Object(p.a)(s,"commentEditText"),onKeyUp:f.a.resizeTextarea,onFocus:f.a.resizeTextarea,style:"height: 2.3em;",value:w})))),Object(i.h)("div",{class:"p-0 pl-2 flex-shrink-1 bd-highlight"},Object(i.h)("button",{type:"button",class:"btn btn-primary mb-2",onClick:s.saveComment,"data-id":o.id},Object(i.h)("i",{class:"fas fa-paper-plane"}))))):Object(i.h)(t,null,Object(i.h)(b.a,{markdown:f.a.replaceImages(q,o.images,V),markdownOpts:f.a.getMarkdownOptions()})),y[o.id]&&Object(i.h)("div",{class:"clearfix mt-3 mb-3"},Object(i.h)("button",{class:"btn btn-danger float-left",onClick:s.deleteComment,"data-id":o.id},Object(i.h)("i",{class:"fas fa-trash-alt"})," Delete"),Object(i.h)("button",{class:"btn btn-secondary float-right",onClick:s.toggleDeleteComment,"data-id":o.id},Object(i.h)("i",{class:"fas fa-times-circle"})," Cancel")))),Object(i.h)("div",null,Object(i.h)("div",{class:"container-fluid px-3 mt-1"},z&&Object(i.h)("div",{class:"clearfix row position-relative"},Object(i.h)("div",{class:"commentContainer col-12 px-0 overflow-hidden",style:"max-height: 60vh;",onDblclick:s.addLikeComment,"data-id":o.id},Object(i.h)("img",{loading:"lazy",class:"img-fluid",style:"min-width: 100px;",src:z.s3LargeLink})),x[o.id]&&Object(i.h)("span",{class:"likeHeart position-absolute text-white display-1",style:"top: calc(50% - 50px); left: calc(50% - 50px); width: 100px; height: 100px;"},Object(i.h)("i",{class:"fas fa-heart likeStory"}))),R&&R.length>1&&Object(i.h)("div",{class:"clearfix d-flex flex-wrap row"},c.a.isArray(R)&&R.map((function(e,r){return Object(i.h)(t,null,Object(i.h)("div",{class:"col px-0 overflow-hidden",style:"max-height: 100px; min-width: 100px;"},Object(i.h)("img",{loading:"lazy",class:"img-fluid border",style:"min-width: 100px;",src:e.s3SmallLink,onClick:s.viewImage,"data-id":o.id,"data-idx":r})))})))))),Object(i.h)("small",null,Object(i.h)("button",{class:"commentContainer btn btn-sm btn-link py-0 "+(I?"text-primary":""),onClick:s.addLikeComment,"data-id":o.id,disabled:I},I?Object(i.h)(u.c,{id:"comments.has-liked"},"Liked"):Object(i.h)(u.c,{id:"comments.like"},"Lik")),"-",Object(i.h)("button",{class:"btn btn-sm btn-link py-0",onClick:s.replyComment,"data-id":o.id},Object(i.h)(u.c,{id:"comments.comment-add"},"Kommentar")),o.language!==V&&Object(i.h)(t,null,"-",!S[o.id]&&B?Object(i.h)(t,null,Object(i.h)("button",{type:"button",class:"btn btn-sm btn-link","data-commentid":o.id,onClick:s.showOriginal},Object(i.h)("i",{class:"fas fa-cog"}),"  ",Object(i.h)(u.c,{id:"home.translate-show-original"},"Show original"))):Object(i.h)(t,null,Object(i.h)("button",{type:"button",class:"btn btn-sm btn-link",onClick:s.translate,"data-commentid":o.id},Object(i.h)("i",{class:"fas fa-cog"})," ",Object(i.h)(u.c,{id:"home.translate-to"},"See translation")))),"-",Object(i.h)("button",{class:"btn btn-sm btn-link py-0 disabled"},c.a.formatDistance(o.createdDate,new Date,{locale:"no-NB"}),o.updatedDate&&Object(i.h)(t,null,Object(i.h)("span",{class:"font-weight-light ml-2"},"(Edited ",c.a.formatDistance(o.updatedDate,new Date,{locale:"no-NB"}),")"))))),o.likes&&o.likes.length>0&&Object(i.h)("small",{class:"position-absolute bg-light shadow-sm rounded-lg py-0 px-1",style:"bottom: 20px; right: 15px;"},Object(i.h)("i",{class:"fas fa-thumbs-up text-primary"})," ",o.likes.length)),Object(i.h)("div",{class:"col-10 offset-2 mb-2"},o&&c.a.isArray(D)&&D.map((function(e){var r=e.user,n=void 0===r?{}:r,a=N.findPublicTeamByMembers(n.id),l=f.a.displayNameShort(n),d=f.a.displayName(n),h=n.image||(n.images?n.images[0]:void 0),m=e.likes&&e.likes.findIndex((function(t){return t.user===U.id}))>-1,g=N.getCommentReplyTranslations({story:T,commentid:o.id,replyid:e.id,targetLang:V})||P[o.id+"-"+e.id],v=g||e.comment;return S[o.id+"-"+e.id]&&(v=e.comment),Object(i.h)("div",{class:"row"},Object(i.h)("div",{class:"col-12 d-flex mb-2 position-relative"},Object(i.h)("div",{class:"text-center border rounded-circle imageRounded imageRoundedSmall",style:(h?'background-image: url("'+h.s3SmallLink+'"); background-size: cover;':"")+" border-width: 3px !important;"},!n.image&&Object(i.h)("span",{class:"font-weight-lighter",style:"font-size: 15px;"},l)),Object(i.h)("div",{class:"flex-grow-1 pl-3 pt-0",style:"line-height: 1.2em;"},Object(i.h)("div",{class:"bg-light p-2 rounded-lg position-relative"},U.id===n.id&&Object(i.h)(t,null,Object(i.h)("span",{class:"float-right font-weight-lighter text-muted"},Object(i.h)("i",{class:"fas fa-ellipsis-h",onClick:s.toggleMenu,"data-id":e.id}))),O[e.id]&&Object(i.h)(t,null,Object(i.h)("div",{class:"position-absolute bg-white p-2 border rounded rounded-lg shadow-sm",style:"top: 30px; right: 10px; width: 60%; z-index: 999999;"},Object(i.h)("button",{class:"btn btn-link btn-block text-left",onClick:s.toggleEdit,"data-id":e.id,"data-comment":e.comment},Object(i.h)("i",{class:"fas fa-edit"})," Edit"),Object(i.h)("hr",null),Object(i.h)("button",{class:"btn btn-link btn-block text-left",onClick:s.toggleDeleteComment,"data-id":e.id},Object(i.h)("i",{class:"fas fa-trash-alt"})," Delete"))),Object(i.h)("span",{style:"font-size: 0.95em;"},Object(i.h)("h5",{class:"font-weight-bold mb-2",style:"font-size: 1.0em;"},d,a&&a.length>0&&Object(i.h)(t,null,Object(i.h)("span",{class:"font-weight-lighter text-muted ml-2"},a.filter((function(t){return 1===t.public})).slice(0,1).map((function(e){return Object(i.h)(t,null,"- ",Object(i.h)("a",{href:"/teams/public/"+e.uuidv4,class:"mr-2"}," ",e.name))}))))),j[e.id]?Object(i.h)(t,null,Object(i.h)("div",{class:"d-flex bd-highlight"},Object(i.h)("div",{class:"p-0 w-100 bd-highlight"},Object(i.h)("label",{class:"sr-only",for:"inlineFormInput"},Object(i.h)(u.c,{id:"comments.comment"},"Kommentar")),Object(i.h)("div",{class:"border rounded rounded-lg position-relative"},Object(i.h)(u.b,null,Object(i.h)("textarea",{class:"form-control-plaintext px-2",type:"text",placeholder:Object(i.h)(u.c,{id:"comments.write-comment"},"Skriv en kommentar..."),onInput:Object(p.a)(s,"commentEditText"),onKeyUp:f.a.resizeTextarea,onFocus:f.a.resizeTextarea,style:"height: 2.3em;",value:w})))),Object(i.h)("div",{class:"p-0 pl-2 flex-shrink-1 bd-highlight"},Object(i.h)("button",{type:"button",class:"btn btn-primary mb-2",onClick:s.saveCommentReply,"data-commentid":o.id,"data-id":e.id},Object(i.h)("i",{class:"fas fa-paper-plane"}))))):Object(i.h)(t,null,Object(i.h)(b.a,{markdown:f.a.replaceImages(v,e.images,V),markdownOpts:f.a.getMarkdownOptions()})),y[e.id]&&Object(i.h)("div",{class:"clearfix mt-3 mb-3"},Object(i.h)("button",{class:"btn btn-danger float-left",onClick:s.deleteCommentReply,"data-id":e.id,"data-commentid":o.id},Object(i.h)("i",{class:"fas fa-trash-alt"})," Delete"),Object(i.h)("button",{class:"btn btn-secondary float-right",onClick:s.toggleDeleteComment,"data-id":e.id},Object(i.h)("i",{class:"fas fa-times-circle"})," Cancel")))),Object(i.h)("small",null,Object(i.h)("button",{class:"replyContainer btn btn-sm btn-link py-0 "+(m?"text-primary":""),onClick:s.likeReply,"data-comment":o.id,"data-id":e.id,disabled:m},m?Object(i.h)(u.c,{id:"comments.has-liked"},"Liked"):Object(i.h)(u.c,{id:"comments.like"},"Lik")),"-",Object(i.h)("button",{class:"btn btn-sm btn-link py-0",onClick:s.replyComment,"data-id":o.id},Object(i.h)(u.c,{id:"comments.comment-add"},"Kommentar")),e.language!==V&&Object(i.h)(t,null,"-",!S[o.id+"-"+e.id]&&g?Object(i.h)(t,null,Object(i.h)("button",{type:"button",class:"btn btn-sm btn-link","data-commentid":o.id,"data-replyid":e.id,onClick:s.showOriginal},Object(i.h)("i",{class:"fas fa-cog"}),"  ",Object(i.h)(u.c,{id:"home.translate-show-original"},"Show original"))):Object(i.h)(t,null,Object(i.h)("button",{type:"button",class:"btn btn-sm btn-link",onClick:s.translate,"data-commentid":o.id,"data-replyid":e.id},Object(i.h)("i",{class:"fas fa-cog"})," ",Object(i.h)(u.c,{id:"home.translate-to"},"See translation")))),"-",Object(i.h)("button",{class:"btn btn-sm btn-link py-0 disabled"},c.a.formatDistance(e.createdDate,new Date,{locale:"no-NB"}),e.updatedDate&&Object(i.h)(t,null,Object(i.h)("span",{class:"font-weight-light ml-2"},"(Edited ",c.a.formatDistance(e.updatedDate,new Date,{locale:"no-NB"}),")"))))),e.likes&&Object(i.h)("small",{class:"position-absolute bg-light shadow-sm rounded-lg py-0 px-1",style:"bottom: 20px; right: 15px;"},Object(i.h)("i",{class:"fas fa-thumbs-up text-primary"})," ",e.likes.length)))})),L-E>0&&Object(i.h)("div",null,Object(i.h)("button",{class:"btn btn-sm btn-link py-0",onClick:s.toggleReplies,"data-id":o.id},Object(i.h)(u.c,{id:"comments.show-more",fields:{more:L-E}},"Vis ",L-E," flere kommentarer...")))),r[o.id]&&Object(i.h)("div",{class:"col-11 offset-1 d-flex mb-2 position-relative"},Object(i.h)(m.a,{stores:s.props.stores,story:T,initCall:F,callback:_,commentId:o.id,inputRef:function(t){return s.inputRef[o.id]=t},inputRefObject:s.inputRef,key:"story-commentreply-"+o.id})))})),B-q>0&&Object(i.h)("div",null,Object(i.h)("button",{class:"btn btn-sm btn-link py-0",onClick:this.toggleComments},Object(i.h)(u.c,{id:"comments.show-more",fields:{more:B-q}},"Vis ",B-q," flere kommentarer..."))),n&&Object(i.h)("div",null,Object(i.h)("button",{class:"btn btn-sm btn-link py-0",onClick:this.toggleComments},Object(i.h)(u.c,{id:"comments.hide-all-comments"},"Skjul alle kommentarene."))))},s}(i.Component))||a;e.a=g}).call(this,s("hosL").Fragment)},ETxl:function(t){t.exports={hoverelementonly:"hoverelementonly__1mJGJ",hoverElement:"hoverElement__axh3O",hoverelementhide:"hoverelementhide__1k_qH","progress-bar-vertical":"progress-bar-vertical__1B2sC","progress-bar":"progress-bar__pnsVj",dragged:"dragged__QXO46",over:"over__1re3x",list:"list__q_emZ"}},NMoA:function(t,e,s){"use strict";(function(t){function o(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,o)}return s}function r(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}function n(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}var a,i,c,l,d,u=s("hosL"),h=s("Utv1"),b=s("/eY4"),p=s("cneo"),m=s("OhSV"),f=s("fh8t"),O=s.n(f),g=s("go65"),j=s("Y3FI"),v=(s("X9Km"),s("1OK2"),s("B95u")),y=s("4QWe"),w=(s("NMoA"),s("s4FZ")),x=s("+JSK"),k=s("vY+r"),S=s("eQ6k"),C=s("ZOvn"),P={showAddComment:{},showTeamSetting:{},viewImageIdx:{},likeStory:{}},I=Object(b.a)(a=function(e){function s(t){var s;return(s=e.call(this,t)||this).saveStory=function(t){return new Promise((function(e,o){var r,n,a,i,c;return r=t.target.closest("button").dataset.id,n=s.state.storyBody,a=s.props.stores.storyStore,c=void 0===(i=s.props.callback)?function(){return!0}:i,Promise.resolve(a.saveField(parseInt(r,10),"body",n,!0)).then((function(){try{return a.publicFeedUpdate(parseInt(r,10),"body",n),s.setState({storyBody:"",storyType:0}),c(),e()}catch(t){return o(t)}}),o)}))},s.saveStoryField=function(t){return new Promise((function(e){var o=s.props.story.id,r=t.target,n=r.value,a=r.name;return clearTimeout(s.updateTimer[a]),s.updateTimer[a]=setTimeout((function(){return new Promise((function(t){return s.doUpdateField(o,a,n),t()}))}),1e3),e()}))},s.updateTimer={},s}n(s,e);var o=s.prototype;return o.doUpdateField=function(t,e,s){return new Promise(function(o,r){var n;return n=this.props.stores.storyStore,Promise.resolve(n.saveField(parseInt(t,10),e,s,!0)).then((function(){try{return n.publicFeedUpdate(parseInt(t,10),e,s),o()}catch(t){return r(t)}}),r)}.bind(this))},o.render=function(){var e=this.state,s=e.storyBody,o=e.storyType,r=this.props.stores.userStore.isAdmin,n=this.props.story;return Object(u.h)(t,null,Object(u.h)("div",{class:"d-flex bd-highlight"},Object(u.h)("div",{class:"p-0 w-100 bd-highlight"},Object(u.h)("label",{class:"sr-only",for:"inlineFormInput"},Object(u.h)(m.c,{id:"comments.comment"},"Kommentar")),Object(u.h)("div",{class:"border rounded rounded-lg position-relative"},Object(u.h)(m.b,null,Object(u.h)("textarea",{class:"form-control-plaintext px-2",type:"text",placeholder:Object(u.h)(m.c,{id:"comments.write-comment"},"Skriv en kommentar..."),onInput:Object(g.a)(this,"storyBody"),onFocus:C.a.resizeTextarea,style:"height: 2.3em;",value:s||n.body}))),Object(u.h)("div",{class:"position-relative mt-3"},r&&Object(u.h)(t,null,Object(u.h)("div",{class:"col-12 text-center mt-2"},Object(u.h)("div",{class:"form-group"},Object(u.h)("small",null,Object(u.h)("label",null,"Pinned to top:"),Object(u.h)("input",{type:"checkbox",id:n.id,name:"pinned",onInput:this.saveStoryField,value:n.pinned?0:1,checked:n.pinned?1:0}))))),r&&Object(u.h)(t,null,Object(u.h)("label",null,Object(u.h)(m.c,{id:"story.type"},"Type")),Object(u.h)("div",{class:"form-group"},Object(u.h)("small",null,Object(u.h)("select",{class:"custom-select custom-select-sm",id:n.id,name:"type",onInput:this.saveStoryField,value:o||n.type},Object(u.h)("option",{value:""},"-- ",Object(u.h)(m.c,{id:"story.type-choose"},"Velg type")," --"),Object(u.h)("option",{value:1,selected:1==n.type?"selected":""},"âœï¸ ",Object(u.h)(m.c,{id:"story.type-regular"},"Vanlig")),Object(u.h)("option",{value:2,selected:2==n.type?"selected":""},"ðŸš€ ",Object(u.h)(m.c,{id:"story.type-ad"},"Annonse")),Object(u.h)("option",{value:3,selected:3==n.type?"selected":""},"ðŸ“„ ",Object(u.h)(m.c,{id:"story.type-article"},"Artikkel")))))),n.type>=2&&Object(u.h)(t,null,Object(u.h)("label",null,Object(u.h)(m.c,{id:"story.url-text"},"URL text")),Object(u.h)("div",{class:"form-group"},Object(u.h)("small",null,Object(u.h)("input",{class:"form-control",type:"text",name:"urlText",onInput:this.saveStoryField,value:n.urlText}))),Object(u.h)("label",null,Object(u.h)(m.c,{id:"story.url"},"URL")),Object(u.h)("div",{class:"form-group"},Object(u.h)("small",null,Object(u.h)("input",{class:"form-control",type:"text",name:"url",onInput:this.saveStoryField,value:n.url})))),2===n.type&&Object(u.h)(t,null,Object(u.h)("label",null,Object(u.h)(m.c,{id:"story.code"},"Code")),Object(u.h)("div",{class:"form-group"},Object(u.h)("small",null,Object(u.h)("input",{class:"form-control",type:"text",name:"code",onInput:this.saveStoryField,value:n.code}))),Object(u.h)("label",null,Object(u.h)(m.c,{id:"story.country"},"Country")),Object(u.h)("div",{class:"form-group"},Object(u.h)("small",null,Object(u.h)("input",{class:"form-control",type:"text",name:"country",onInput:this.saveStoryField,value:n.country}))),Object(u.h)("label",null,Object(u.h)(m.c,{id:"story.region"},"Region")),Object(u.h)("div",{class:"form-group"},Object(u.h)("small",null,Object(u.h)("input",{class:"form-control",type:"text",name:"region",onInput:this.saveStoryField,value:n.region}))),Object(u.h)("label",null,Object(u.h)(m.c,{id:"story.currency"},"Currency")),Object(u.h)("div",{class:"form-group"},Object(u.h)("small",null,Object(u.h)("input",{class:"form-control",type:"text",name:"currency",onInput:this.saveStoryField,value:n.currency}))),Object(u.h)("label",null,Object(u.h)(m.c,{id:"story.price"},"Price")),Object(u.h)("div",{class:"form-group"},Object(u.h)("small",null,Object(u.h)("input",{class:"form-control",type:"text",name:"price",onInput:this.saveStoryField,value:n.price})))))),Object(u.h)("div",{class:"p-0 pl-2 flex-shrink-1 bd-highlight"},Object(u.h)("button",{type:"button",class:"btn btn-primary mb-2",onClick:this.saveStory,"data-id":n.id},Object(u.h)("i",{class:"fas fa-paper-plane"})))))},s}(u.Component))||a,T=Object(b.a)(i=function(e){function s(t){var s;return(s=e.call(this,t)||this).viewImage=function(t){var e=t.target.closest("img").dataset,o=s.state.viewImageIdx;o[e.id]=e.idx,s.setState({viewImageIdx:o})},s.showStoryDetail=function(t){if("a"===t.target.localName)return!1;var e=t.target.closest("#storyDetail").dataset.id;e&&Object(j.route)("/stories/"+e)},s.translate=function(t){return new Promise((function(e,o){var r;return t.preventDefault(),t.stopPropagation(),r=s.props.stores,Promise.resolve(r.storyStore.translate({story:s.props.story,user:r.userStore.user})).then((function(t){try{return s.setState({showOriginal:0,translatedText:t}),e()}catch(t){return o(t)}}),o)}))},s.showOriginal=function(t){t.preventDefault(),t.stopPropagation(),s.setState({showOriginal:1})},s.state={viewImageIdx:{}},s}return n(s,e),s.prototype.render=function(){var e=this.state,s=e.showOriginal,o=e.translatedText,r=this.props.stores,n=this.props,a=n.story,i=n.likeStory,c=n.likeRef,l=r.userStore.user.language,d=void 0===l?"en":l,h=[];if(a.images){var b=Object(p.i)(a.images);h.push.apply(h,b)}var f=C.a.getTranslation({object:a,targetLang:d,field:"body"})||o,g=f||a.body;return s&&(g=a.body),Object(u.h)(t,null,Object(u.h)("div",{class:"container-fluid px-0 mt-1"},Object(u.h)("div",{class:"row"},Object(u.h)(w.a,{stores:this.props.stores,images:h,id:a.id,dblClick:i,likeRef:c}))),Object(u.h)("div",{class:"row mt-2"},Object(u.h)("div",{class:"clearfix col-12 overflow-hidden",style:a.offline?"text-decoration: line-through;":""},Object(u.h)("div",{id:"storyDetail",onClick:this.showStoryDetail,"data-id":a.id},Object(u.h)(O.a,{markdown:C.a.replaceImages(g,a.images,d),markdownOpts:C.a.getMarkdownOptions()}),a.language!==d&&Object(u.h)(t,null,!s&&f?Object(u.h)(t,null,Object(u.h)("button",{type:"button",class:"btn btn-sm btn-link text-muted",onClick:this.showOriginal},Object(u.h)("i",{class:"fas fa-cog"}),"  ",Object(u.h)(m.c,{id:"home.translate-show-original"},"Show original"))):Object(u.h)(t,null,Object(u.h)("button",{type:"button",class:"btn btn-sm btn-link text-muted",onClick:this.translate},Object(u.h)("i",{class:"fas fa-cog"})," ",Object(u.h)(m.c,{id:"home.translate-to"},"See translation"))))))))},s}(u.Component))||i,D=Object(b.a)(c=function(e){function s(t){var s;return(s=e.call(this,t)||this).viewImage=function(t){var e=t.target.closest("img").dataset,o=s.state.viewImageIdx;o[e.id]=e.idx,s.setState({viewImageIdx:o})},s.showStoryDetail=function(t){if("a"===t.target.localName)return!1;var e=t.target.closest("#storyDetail").dataset.id;e&&Object(j.route)("/stories/"+e)},s.translate=function(t){return new Promise((function(e,o){var r,n,a,i;return t.preventDefault(),t.stopPropagation(),r=s.props.story,a=(n=s.props.stores).storyStore,i=n.userStore.user,s.setState({showOriginal:0}),Promise.resolve(a.translate({story:r,user:i})).then((function(){try{return e()}catch(t){return o(t)}}),o)}))},s.showOriginal=function(t){t.preventDefault(),t.stopPropagation(),s.setState({showOriginal:1})},s.getTranslation=function(){var t=s.props.stores,e=t.userStore,o=e.user.language;C.a.getTranslation({object:s.props.story,targetLang:void 0===o?"en":o,field:"body"})&&s.setState({showOriginal:0})},s.state={viewImageIdx:{}},s}n(s,e);var o=s.prototype;return o.componentWillMount=function(){this.getTranslation()},o.render=function(){var e=this.state,s=e.showOriginal,o=this.props.stores,r=this.props,n=r.story,a=r.likeStory,i=r.likeRef,c=o.userStore.user.language,l=void 0===c?"en":c,d=[];if(n.images){var b=Object(p.i)(n.images);d.push.apply(d,b)}var f=C.a.getTranslation({object:n,targetLang:l,field:"body"}),g=f||n.body;return s&&(g=n.body),Object(u.h)(t,null,Object(u.h)("div",{class:"container-fluid px-0 mt-1"},Object(u.h)("div",{class:"row"},Object(u.h)(w.a,{stores:this.props.stores,images:d,id:n.id,dblClick:a,likeRef:i}))),Object(u.h)("div",{class:"row mt-2"},Object(u.h)("div",{class:"clearfix col-12 overflow-hidden",style:n.offline?"text-decoration: line-through;":""},Object(u.h)("div",{id:"storyDetail","data-id":n.id},Object(u.h)(O.a,{markdown:C.a.replaceImages(g,n.images,l),markdownOpts:C.a.getMarkdownOptions()}),n.language!==l&&Object(u.h)(t,null,!s&&f?Object(u.h)(t,null,Object(u.h)("button",{type:"button",class:"btn btn-sm btn-link",onClick:this.showOriginal},Object(u.h)("i",{class:"fas fa-cog"}),"  ",Object(u.h)(m.c,{id:"home.translate-show-original"},"Show original"))):Object(u.h)(t,null,Object(u.h)("button",{type:"button",class:"btn btn-sm btn-link",onClick:this.translate},Object(u.h)("i",{class:"fas fa-cog"})," ",Object(u.h)(m.c,{id:"home.translate-to"},"See translation")))))),!!(n.url||n.code||n.price>0)&&Object(u.h)(t,null,Object(u.h)("div",{class:"clearfix col-12  py-2",style:n.offline?"text-decoration: line-through;":""},Object(u.h)("div",{class:"row"},n.url&&Object(u.h)(t,null,Object(u.h)("div",{class:"col-12 text-left",style:"font-size: 1.0em;"},Object(u.h)("a",{href:C.a.asUrl(n.url),target:"_blank",rel:"noreferrer"},Object(u.h)("i",{class:"fas fa-link mr-2"}),n.urlText?Object(u.h)(t,null,n.urlText):Object(u.h)(t,null,Object(u.h)(m.c,{id:"story.ad-url-readmore"},"Les mer..."))))),n.code&&Object(u.h)(t,null,Object(u.h)("div",{class:"col text-left",style:"font-size: 1.2em;"},Object(u.h)("nobr",null,Object(u.h)("span",{class:"font-weight-lighter"},Object(u.h)(m.c,{id:"story.ad-campaign-code"},"Kampanjekode"),":")," ",n.code))),n.price>0&&Object(u.h)(t,null,Object(u.h)("div",{class:"col text-right",style:"font-size: 1.2em;"},Object(u.h)("nobr",null,n.currencty&&Object(u.h)("span",{class:"font-weight-lighter"},n.currency)," ",h.a.format(n.price,2)))))))))},s}(u.Component))||c,_=Object(b.a)(l=function(e){function s(t){var s;return(s=e.call(this,t)||this).viewImage=function(t){var e=t.target.closest("img").dataset,o=s.state.viewImageIdx;o[e.id]=e.idx,s.setState({viewImageIdx:o})},s.showStoryDetail=function(t){if("a"===t.target.localName)return!1;var e=t.target.closest("#storyDetail").dataset.id;e&&Object(j.route)("/stories/"+e)},s.translate=function(t){return new Promise((function(e,o){var r,n,a,i;return t.preventDefault(),t.stopPropagation(),r=s.props.story,a=(n=s.props.stores).storyStore,i=n.userStore.user,s.setState({showOriginal:0}),Promise.resolve(a.translate({story:r,user:i})).then((function(){try{return e()}catch(t){return o(t)}}),o)}))},s.showOriginal=function(t){t.preventDefault(),t.stopPropagation(),s.setState({showOriginal:1})},s.getTranslation=function(){var t=s.props.stores,e=t.userStore,o=e.user.language;C.a.getTranslation({object:s.props.story,targetLang:void 0===o?"en":o,field:"body"})&&s.setState({showOriginal:0})},s.state={viewImageIdx:{}},s}n(s,e);var o=s.prototype;return o.componentWillMount=function(){this.getTranslation()},o.render=function(){var e=this.state,s=e.showOriginal,o=this.props.stores,r=this.props,n=r.story,a=r.likeStory,i=r.likeRef,c=o.userStore.user.language,l=void 0===c?"en":c,d=[];if(n.images){var h=Object(p.i)(n.images);d.push.apply(d,h)}var b=C.a.getTranslation({object:n,targetLang:l,field:"body"}),f=b||n.body;return s&&(f=n.body),Object(u.h)(t,null,Object(u.h)("div",{class:"container-fluid px-0 mt-1"},Object(u.h)("div",{class:"row"},Object(u.h)(w.a,{stores:this.props.stores,images:d,id:n.id,dblClick:a,likeRef:i}))),Object(u.h)("div",{class:"row mt-2"},Object(u.h)("div",{class:"clearfix col-12 overflow-hidden",style:n.offline?"text-decoration: line-through;":""},Object(u.h)("div",{id:"storyDetail",onClick:this.showStoryDetail,"data-id":n.id},Object(u.h)(O.a,{markdown:C.a.replaceImages(f,n.images,l),markdownOpts:C.a.getMarkdownOptions()}),n.language!==l&&Object(u.h)(t,null,!s&&b?Object(u.h)(t,null,Object(u.h)("button",{type:"button",class:"btn btn-sm btn-link",onClick:this.showOriginal},Object(u.h)("i",{class:"fas fa-cog"}),"  ",Object(u.h)(m.c,{id:"home.translate-show-original"},"Show original"))):Object(u.h)(t,null,Object(u.h)("button",{type:"button",class:"btn btn-sm btn-link",onClick:this.translate},Object(u.h)("i",{class:"fas fa-cog"})," ",Object(u.h)(m.c,{id:"home.translate-to"},"See translation")))))),!!(n.url||n.code||n.price)&&Object(u.h)(t,null,Object(u.h)("div",{class:"clearfix col-12  py-2",style:n.offline?"text-decoration: line-through;":""},Object(u.h)("div",{class:"row"},n.url&&Object(u.h)(t,null,Object(u.h)("div",{class:"col-12 text-left",style:"font-size: 1.0em;"},Object(u.h)("a",{href:C.a.asUrl(n.url),target:"_blank",rel:"noreferrer"},Object(u.h)("i",{class:"fas fa-link mr-2"}),n.urlText?Object(u.h)(t,null,n.urlText):Object(u.h)(t,null,Object(u.h)(m.c,{id:"story.ad-url-readmore"},"Les mer..."))))))))))},s}(u.Component))||l,L=Object(b.a)(d=function(e){function s(t){var s;return(s=e.call(this,t)||this).toggleDate=function(t){t.stopPropagation(),t.preventDefault(),s.setState({showDate:!s.state.showDate})},s.likeStory=function(){return new Promise((function(t,e){var o,r,n,a;return r=s.props.stores.storyStore,(n=s.state.likeStory)[o=s.props.story.id]=!0,a=Object.keys(n),s.setState({likeStory:n,likeIds:a}),setTimeout((function(){var t=s.state.likeStory;delete t[o];var e=Object.keys(t);s.setState({likeStory:t,likeIds:e})}),1200),Promise.resolve(r.likeStory({id:o})).then((function(s){try{return s,t()}catch(t){return e(t)}}),e)}))},s.toggleAddComment=function(t){var e=t.target.closest("button").dataset.id,o=s.state.showAddComment;o[e]?delete o[e]:o[e]=!0,s.setState({showAddComment:o},(function(){s.inputRef[e]&&s.inputRef[e].focus()}))},s.closeAllAddComments=function(){s.setState({showAddComment:{}})},s.toggleShowTeamSetting=function(t){var e=t.target.closest("button").dataset.id,o=s.state.showTeamSetting;o[e]?delete o[e]:o[e]=!0,s.setState({showTeamSetting:o})},s.viewImage=function(t){var e=t.target.closest("img").dataset,o=s.state.viewImageIdx;o[e.id]=e.idx,s.setState({viewImageIdx:o})},s.toggleMenu=function(t){var e=t.target.closest("i").dataset.id,o=s.state.showMenu,r=void 0===o?{}:o;r[e]=!r[e],s.setState({showDeleteStory:{},showEdit:{},showMenu:r})},s.toggleEdit=function(t){var e=t.target.closest("button").dataset.id,o=s.state.showEdit,r=void 0===o?{}:o;r[e]=!r[e],s.setState({showDeleteStory:{},showEdit:r,showMenu:{}})},s.toggleDeleteStory=function(t){var e=t.target.closest("button").dataset.id,o=s.state.showDeleteStory,r=void 0===o?{}:o;r[e]=!r[e],s.setState({showDeleteStory:r,showEdit:{},showMenu:{}})},s.reportStory=function(t){return new Promise((function(e,o){var r;return r=t.target.closest("button").dataset.id,Promise.resolve(s.props.stores.storyStore.reportStory({id:r})).then((function(){try{return s.setState({showEdit:{},showMenu:{}}),e()}catch(t){return o(t)}}),o)}))},s.adminRemoveStory=function(t){return new Promise((function(e,o){var r;return r=t.target.closest("button").dataset.id,Promise.resolve(s.props.stores.storyStore.adminHideStory({id:r})).then((function(){try{return s.setState({showEdit:{},showMenu:{}}),e()}catch(t){return o(t)}}),o)}))},s.deleteStory=function(t){return new Promise((function(e,o){var r,n;return r=t.target.closest("button").dataset.id,n=s.props.stores.storyStore,Promise.resolve(n.saveField(parseInt(r,10),"offline",1,!0)).then((function(){try{return n.publicFeedUpdate(parseInt(r,10),"offline",1),s.setState({storyBody:"",showDeleteStory:{},showEdit:{},showMenu:{}}),e()}catch(t){return o(t)}}),o)}))},s.doneEdit=function(){s.setState({storyBody:"",showDeleteStory:{},showEdit:{},showMenu:{}})},s.showStoryDetail=function(t){if("a"===t.target.localName)return!1;var e=t.target.closest("#storyDetail").dataset.id;e&&Object(j.route)("/stories/"+e)},s.shareLink=function(t){var e=t.target.closest("button").dataset;s.props.stores.appState.shareUrl({url:e.url,title:e.title,text:e.text})},s.state=function(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?o(Object(s),!0).forEach((function(e){r(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):o(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}({},P),s.inputRef={},s}n(s,e);var a=s.prototype;return a.loadStoriesPublicFeed=function(t){return new Promise(function(e,s){return void 0===t&&(t=this.props),Promise.resolve(t.stores.storyStore.loadPublicFeed({hashtag:t.hashtag})).then((function(){try{return e()}catch(t){return s(t)}}),s)}.bind(this))},a.render=function(){var e,s,o,r,n=this,a=this.state,i=a.showAddComment,c=a.showDate,l=a.showMenu,d=void 0===l?{}:l,b=a.showEdit,p=void 0===b?{}:b,f=a.showDeleteStory,O=void 0===f?{}:f,g=a.showTeamSetting,j=a.likeStory,w=a.likeIds,P=this.props,L=P.story,F=P.showAllComments,E=P.onTeamClick,R=void 0===E?function(){}:E,A=P.onUserClick,N=void 0===A?function(){}:A,U=this.props.stores,M=U.userStore,V=U.storyStore,z=U.appState,B=M.user,q=void 0===B?{}:B,W=M.isAdmin,K=z.hasShareApi,Y=V.findPublicTeam(L.team)||{},H=V.findPublicUser(L.user)||{},Z=C.a.getImage({user:H,team:Y,priority:"user",object:L}),J=!(!Y||!Y.members)&&Y.members.some((function(t){return t===q.id}));Y&&Y.name?(e=C.a.displayNameShort(Y),s=C.a.displayName(Y),o=C.a.displayName(H),H.settings&&q.uuidv4!==H.uuidv4&&(r=H.settings.hideProfile?null:"/inbox/"+H.uuidv4)):H&&H.id&&(e=C.a.displayNameShort(H),s=C.a.displayName(H));var X=L.likes,Q=L.comments,G=L.reports,$=void 0===G?[]:G,tt=L.likes&&L.likes.findIndex((function(t){return t.user===q.id}))>-1,et=Y.followers?Y.followers.length:0,st=Y.members&&Y.members.indexOf(q.id)>-1,ot=Y.followers&&Y.followers.indexOf(q.id)>-1,rt=Y.followRequests&&Y.followRequests.findIndex((function(t){return t.id===q.id}))>-1,nt=L.currentLocationGeocode,at=void 0===nt?{}:nt,it=C.a.getViews(L.statistics),ct=C.a.getAdminData(L.statistics);return Object(u.h)(t,null,W||q.id===H.id?Object(u.h)(t,null,Object(u.h)("span",{class:"float-right font-weight-lighter text-muted"},Object(u.h)("i",{class:"fas fa-ellipsis-h",onClick:this.toggleMenu,"data-id":L.id}))):Object(u.h)(t,null,!st&&!ot&&!rt&&Y.public>0&&Object(u.h)("span",{class:"float-right"},Object(u.h)(S.a,{stores:this.props.stores,team:Y,buttonOnly:!0,simple:!0,classNames:"btn btn-link text-primary"}))),d[L.id]&&Object(u.h)(t,null,Object(u.h)("div",{class:"position-absolute bg-light p-2 border rounded rounded-lg shadow-sm",style:"top: 30px; right: 10px; width: 60%; z-index: 999999;"},q.id===H.id?Object(u.h)(t,null,Object(u.h)("button",{class:"btn btn-link btn-block text-left",onClick:this.toggleEdit,"data-id":L.id},Object(u.h)("i",{class:"fas fa-edit"})," Edit"),Object(u.h)("hr",null),Object(u.h)("button",{class:"btn btn-link btn-block text-left text-danger",onClick:this.toggleDeleteStory,"data-id":L.id},Object(u.h)("i",{class:"fas fa-trash-alt"})," Delete")):Object(u.h)(t,null,Object(u.h)("button",{class:"btn btn-link btn-block text-left",onClick:this.reportStory,"data-id":L.id},Object(u.h)("i",{class:"fas fa-flag"})," Report"),W&&Object(u.h)(t,null,Object(u.h)("hr",null),Object(u.h)("button",{class:"btn btn-link btn-block text-left text-danger",onClick:this.adminRemoveStory,"data-id":L.id},Object(u.h)("i",{class:"fas fa-eraser"})," Remove from feed"))))),Object(u.h)("div",{class:"d-flex position-relative"},Object(u.h)("div",{class:"position-relative text-center border rounded-circle imageRounded imageRoundedMedium",style:Z?'background-image: url("'+Z+'"); background-size: cover;':""},!Z&&Object(u.h)("div",{class:"text-muted",style:"font-size: 20px; padding-top: 3px;"},e)),Object(u.h)("div",{class:"flex-grow-1 pl-3 text-overflow",style:"line-height: 1.2em;"},Object(u.h)("h5",{class:"mb-1 position-relative",style:"line-height: 1.0em; "+(L.offline?"text-decoration: line-through;":"")},Y.public?Object(u.h)(t,null,Object(u.h)("a",{href:"/teams/public/"+Y.uuidv4,onClick:function(t){return R(t,Y.uuidv4)},class:"stretched-link"},s)):Object(u.h)(t,null,s),st&&!Y.public&&Object(u.h)("button",{type:"button",class:"btn btn-sm btn-link text-muted","data-id":L.id,onClick:this.toggleShowTeamSetting},Object(u.h)("i",{class:"fas fa-exclamation-triangle"}))),Object(u.h)("div",{class:"mb-2",style:L.offline?"text-decoration: line-through;":""},L.pinned&&Object(u.h)(t,null,Object(u.h)("small",{class:"text-muted mr-2"},Object(u.h)("i",{class:"fas fa-thumbtack"}))),2===L.type?Object(u.h)(t,null,Object(u.h)("small",{class:"text-muted"},Object(u.h)(m.c,{id:"story.sponsored"},"Sponsored")," -")):Object(u.h)(t,null,L.date&&Object(u.h)("small",{class:"text-muted",onClick:this.toggleDate},c?h.a.formatDate(L.date,{locale:"no-NB",hour12:!1,hour:"2-digit",minute:"2-digit"}):h.a.formatDistance(L.date,new Date,{locale:"no-NB"}))),1===L.public?Object(u.h)(t,null,Object(u.h)("small",{class:"ml-2 text-muted"},Object(u.h)("i",{class:"fas fa-globe-europe"}))):Object(u.h)(t,null,Object(u.h)("small",{class:"ml-2 text-muted"},Object(u.h)("i",{class:"fas fa-users"})," (",h.a.format(et),")")),o&&Object(u.h)(t,null,Object(u.h)("small",{class:"ml-2 text-muted"},r?Object(u.h)(t,null,Object(u.h)("i",{class:"fas fa-user"})," ",Object(u.h)("a",{href:r},o)):Object(u.h)(t,null,Object(u.h)("i",{class:"fas fa-user"})," ",o))),at&&at.formattedCounty&&Object(u.h)(t,null,Object(u.h)("small",{class:"ml-2 text-muted"},Object(u.h)("i",{class:"fas fa-map-marker-alt"})," ",at.formattedCounty))),W&&Object(u.h)("div",{class:"d-flex flex-row flex-nowrap bg-light border-top border-bottom py-2",style:"overflow: auto;"},Object(u.h)("small",{class:"text-muted mr-2"},"Adm:"),$&&$.length>0&&Object(u.h)(t,null,Object(u.h)("small",{class:"text-danger mr-2"},Object(u.h)("i",{class:"fas fa-flag"})," ",$.length)),at&&at.formatted_address&&Object(u.h)(t,null,Object(u.h)("small",{class:"text-muted"},Object(u.h)("i",{class:"fas fa-map-marker-alt"})," ",at.formatted_address)),H.deviceInfo&&Object(u.h)(t,null,Object(u.h)("span",{class:"badge badge-secondary ml-2 float-right font-weight-light"},["platform","manufacturer","model"].map((function(e){return Object(u.h)(t,null,Object(u.h)("span",{class:"ml-2 text-white"},H.deviceInfo[e]))})))),ct&&Object(u.h)(t,null,Object(u.h)("small",{class:"ml-2 text-muted"},"V: ",ct.count),Object(u.h)("small",{class:"ml-2 text-muted"},"R: ",ct.ranking," ",h.a.isNumber(ct.rankingTrend)&&Object(u.h)(t,null,Object(u.h)("i",{class:C.a.getClassForTrend(ct.rankingTrend)}))),Object(u.h)("small",{class:"ml-2 text-muted"},"D: ",h.a.format(ct.durationAvg/1e3,1),"s ",h.a.isNumber(ct.durationAvgTrend)&&Object(u.h)(t,null,Object(u.h)("i",{class:C.a.getClassForTrend(ct.durationAvgTrend)}))),L.statisticsCurrent&&L.statisticsCurrent.totalInteractions>0&&Object(u.h)("small",{class:"ml-2 text-muted"},"S: ",h.a.format(L.statisticsCurrent.totalInteractions,0)),L.shadowTags&&L.shadowTags.map((function(e){return Object(u.h)(t,null,Object(u.h)("span",{class:"badge badge-secondary ml-2 float-right font-weight-light"},e))})))))),Object(u.h)("div",{class:"row mt-2"},Object(u.h)("div",{class:"clearfix col-12",style:L.offline?"text-decoration: line-through;":""},p[L.id]&&Object(u.h)(t,null,Object(u.h)(I,{stores:this.props.stores,story:L,key:"story-edit-"+L.id,callback:this.doneEdit})),O[L.id]&&Object(u.h)("div",{class:"clearfix mt-3 mb-3"},Object(u.h)("button",{class:"btn btn-danger float-left",onClick:this.deleteStory,"data-id":L.id},Object(u.h)("i",{class:"fas fa-trash-alt"})," Delete"),Object(u.h)("button",{class:"btn btn-secondary float-right",onClick:this.toggleDeleteStory,"data-id":L.id},Object(u.h)("i",{class:"fas fa-times-circle"})," Cancel")))),(!L.type||1==L.type)&&Object(u.h)(T,{stores:this.props.stores,story:L,key:"story-regular-view-"+L.id,likeStory:this.likeStory,likeRef:j,keys:w}),2==L.type&&Object(u.h)(D,{stores:this.props.stores,story:L,key:"story-ad-view-"+L.id,likeStory:this.likeStory,likeRef:j,keys:w}),3==L.type&&Object(u.h)(_,{stores:this.props.stores,story:L,key:"story-article-view-"+L.id,likeStory:this.likeStory,likeRef:j,keys:w}),Object(u.h)("div",{class:"d-flex justify-content-between mt-2"},Object(u.h)("div",{class:"mr-2"},Object(u.h)(x.a,{stores:this.props.stores,likes:X,comments:Q,type:"story",onTeamClick:R,onUserClick:N})),it>0&&Object(u.h)(t,null,Object(u.h)("div",null,Object(u.h)(k.a,{stores:this.props.stores,views:it,object:L,type:"story",isTeamAdmin:J,isAdmin:W,onTeamClick:R,onUserClick:N})))),g[L.id]&&Object(u.h)(t,null,Object(u.h)("small",null,Object(u.h)("div",{class:"alert alert-info",role:"alert"},Object(u.h)("span",{class:"display-4 float-left"},Object(u.h)("i",{class:"fas fa-exclamation-triangle mr-3 mb-3"})),Object(u.h)("p",null,Object(u.h)(m.c,{id:"story.alert-text-1"},"Your team is not visible and it's not possible to request friendship with your team.")),Object(u.h)("p",null,Object(u.h)(m.c,{id:"story.alert-text-2"},"If you want to make your team visible so other can request to follow your team, you can find the setting here:")),Object(u.h)("p",null,Object(u.h)("a",{href:"/teams/edit/"+Y.id},Object(u.h)(m.c,{id:"story.alert-text-3"},"Edit team")))))),Object(u.h)("div",null,Object(u.h)("div",{class:"row"},Object(u.h)("div",{class:"col text-center"},Object(u.h)("button",{type:"button",class:"storyImage btn btn-sm btn-outline-"+(tt?"primary":"secondary")+" btn-lg btn-block "+(tt?"text-primary":"")+" text-overflow","data-id":L.id,onClick:this.likeStory},Object(u.h)("i",{class:(tt?"text-primary fas":"far")+" fa-thumbs-up"})," ",tt?Object(u.h)(m.c,{id:"comments.has-liked"},"Liked"):Object(u.h)(m.c,{id:"comments.like"},"Lik"))),Object(u.h)("div",{class:"col text-center"},Object(u.h)("button",{type:"button",class:"btn btn-sm btn-outline-secondary btn-lg btn-block text-overflow","data-id":L.id,onClick:this.toggleAddComment},Object(u.h)("i",{class:"fas fa-comment"})," ",Object(u.h)(m.c,{id:"comments.comment-add"},"Kommentar"))),K?Object(u.h)(t,null,Object(u.h)("div",{class:"col text-center"},Object(u.h)("button",{class:"btn btn-sm btn-outline-secondary btn-lg btn-block text-overflow",onClick:this.shareLink,"data-url":"https://themusher.app/share/story/"+L.uuidv4,"data-title":"title: "+L.title},Object(u.h)("i",{class:"fas fa-share"})," ",Object(u.h)(m.c,{id:"story.share"},"Del")))):Object(u.h)(t,null,Object(u.h)("div",{class:"col text-center"},Object(u.h)("a",{class:"btn btn-sm btn-outline-secondary btn-lg btn-block text-overflow",href:"https://themusher.app/share/story/"+L.uuidv4,target:"_blank",rel:"noreferrer","data-native":!0},Object(u.h)("i",{class:"fas fa-share"})," ",Object(u.h)(m.c,{id:"story.share"},"Del")))))),Object(u.h)("div",{class:"mt-2"},Object(u.h)(v.a,{stores:this.props.stores,story:L,col:"10",offset:"2",compact:!1,showAllComments:F,initCall:this.closeAllAddComments}),i[L.id]&&Object(u.h)(y.a,{stores:this.props.stores,story:L,inputRef:function(t){return n.inputRef[L.id]=t},inputRefObject:this.inputRef,col:"10",offset:"2",key:"story-comment-"+L.id})))},s}(u.Component))||d;e.a=L}).call(this,s("hosL").Fragment)},QkTp:function(t,e,s){"use strict";(function(t){var o,r=s("hosL"),n=s("Utv1"),a=s("/eY4"),i=(s("OhSV"),s("ZOvn"),Object(a.a)(o=function(e){function s(){return e.apply(this,arguments)||this}var o,a;return a=e,(o=s).prototype=Object.create(a.prototype),o.prototype.constructor=o,o.__proto__=a,s.prototype.render=function(){var e=this.props,s=e.value,o=void 0===s?0:s,a=this.props.stores.userStore.user.settings;return(void 0===a?{}:a).imperial?Object(r.h)(t,null,Object(r.h)("nobr",null,n.a.format(function(t){return 9*t/5+32}(o),0),"Â°F")):Object(r.h)(t,null,Object(r.h)("nobr",null,n.a.format(o,1),"Â°C"))},s}(r.Component))||o);e.a=i}).call(this,s("hosL").Fragment)},VKmm:function(t,e,s){"use strict";function o(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,o)}return s}function r(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}var n,a=s("hosL"),i=s("Utv1"),c=s("/eY4"),l=s("OhSV"),d=(s("ZOvn"),s("eQ6k"),{requestSent:{}}),u=Object(c.a)(n=function(t){function e(e){var s;return(s=t.call(this,e)||this).requestFollowTeam=function(t){var e=s.props.stores,o=e.teamStore,r=e.userStore.user,n=t.target.closest("button").dataset.team;o.followRequest(parseInt(n,10),r);var a=s.state.requestSent;a[n]=!0,s.setState({requestSent:a})},s.getButton=function(t){var e=s.state.requestSent,o=s.props.stores.userStore.user,r=t.members&&t.members.findIndex((function(t){return t.id===o.id}))>-1,n=t.followers&&t.followers.indexOf(o.id)>-1,i=t.blockedFollowers&&t.blockedFollowers.indexOf(o.id)>-1,c=e[t.id]||t.followRequests&&t.followRequests.findIndex((function(t){return t.id===o.id}))>-1;return r?Object(a.h)("i",{class:"fas fa-home"}):n?Object(a.h)("button",{class:"btn btn-sm btn-block btn-outline-secondary float-right",onClick:s.unFollowTeam,disabled:"true","data-team":t.id},Object(a.h)("i",{class:"fas fa-link mr-2"}),Object(a.h)(l.c,{id:"teams.connect.is-following"},"FÃ¸lger")):i?Object(a.h)("button",{class:"btn btn-sm btn-block btn-outline-secondary float-right",disabled:"true"},Object(a.h)("i",{class:"fas fa-hand-paper mr-2"}),Object(a.h)(l.c,{id:"teams.connect.is-blocked"},"Blokkert")):c?Object(a.h)("button",{class:"btn btn-sm btn-block btn-outline-secondary float-right",disabled:"true"},Object(a.h)("i",{class:"fas fa-hourglass-half mr-2"}),Object(a.h)(l.c,{id:"teams.connect.has-requested"},"Venter pÃ¥ godkjenning")):Object(a.h)("button",{class:"btn btn-sm btn-block btn-outline-success float-right",onClick:s.requestFollowTeam,"data-team":t.id},Object(a.h)("i",{class:"far fa-hand-point-right mr-2"}),Object(a.h)(l.c,{id:"teams.connect.follow"},"FÃ¸lg"))},s.state=function(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?o(Object(s),!0).forEach((function(e){r(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):o(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}({},d),s}var s,n;n=t,(s=e).prototype=Object.create(n.prototype),s.prototype.constructor=s,s.__proto__=n;var c=e.prototype;return c.loadTeams=function(){return new Promise(function(t,e){return this.setState({isLoading:!0}),Promise.resolve(this.props.stores.teamStore.loadPublic({query:{notfollowing:1,array:1},limit:15})).then(function(){try{return this.setState({isLoading:!1}),t()}catch(t){return e(t)}}.bind(this),e)}.bind(this))},c.componentDidMount=function(){this.loadTeams()},c.render=function(){var t=this,e=this.props.stores,s=e.teamStore.publicTeamsToFollow,o=e.appState.darkmode;return s&&0!==s.length?Object(a.h)("div",{class:"row pb-1 bg-light"},Object(a.h)("div",{class:"col-12 col-sm-8 col-lg-6 offset-sm-2 offset-lg-3 mb-0 position-relative rounded rounded-lg py-3 bg-"+(o?"black":"white")+" shadow-sm"},Object(a.h)("div",{class:"container-fluid"},Object(a.h)("div",{class:"row"},Object(a.h)("div",{class:"col-12"},Object(a.h)("h5",null,Object(a.h)(l.c,{id:"teams.connect.teams-to-follow"},"Team du kan fÃ¸lge"),":"))),Object(a.h)("div",{class:"row"},Object(a.h)("div",{class:"d-flex flex-row flex-nowrap",style:"overflow: auto;"},i.a.isArray(s)&&s.map((function(e){var s=e.image&&e.image.s3SmallLink?e.image:null;return Object(a.h)("div",{class:"mr-2",style:"width: 110px;"},Object(a.h)("div",{class:"text-center border rounded-lg",style:s?'background-image: url("'+s.s3SmallLink+'"); background-size: cover; width: 110px; height: 100px;':"width: 110px; height: 100px;"},!s&&Object(a.h)("i",{class:"fas fa-users text-muted mt-3",style:"font-size: 40px;"})),Object(a.h)("small",null,Object(a.h)("div",{class:"text-overflow"},Object(a.h)("strong",null,e.name)),Object(a.h)("div",{class:"text-overflow"},e.place?e.place+", ":""," ",e.country," Â "),Object(a.h)("div",{class:"text-overflow"},Object(a.h)("small",{class:"text-muted"},e&&e.dogs&&Object(a.h)("span",{class:""},Object(a.h)("i",{class:"fas fa-dog"})," ",e.dogs.length),e&&e.followers&&Object(a.h)("span",{class:"ml-2"},Object(a.h)("i",{class:"fas fa-user"})," ",e.followers.length)))),Object(a.h)("div",null,t.getButton(e)))}))))))):""},e}(a.Component))||n;e.a=u},epqT:function(t,e,s){"use strict";(function(t){function o(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,o)}return s}function r(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}var n,a=s("hosL"),i=s("Utv1"),c=s("/eY4"),l=s("OhSV"),d=(s("ZOvn"),{showAddComment:!1}),u=Object(l.d)((function(){return{subject:Object(a.h)(l.c,{id:"ad.subject"},"AnnonseforespÃ¸rsel"),body:Object(a.h)(l.c,{id:"ad.body"},"Hei, Jeg Ã¸nsker Ã¥ vite mer om annonsering i appen The Musher.")}}))(n=Object(c.a)(n=function(e){function s(t){var s;return(s=e.call(this,t)||this).logClick=function(){return new Promise((function(t,e){var o,r,n,a,i;return a=void 0===(n=(r=(o=s.props.stores).adStore).ads)?[]:n,i=o.userStore.user,Promise.resolve(r.logClick({id:a.length>0?a[0].id:null,user:(void 0===i?{}:i).id})).then((function(){try{return t()}catch(t){return e(t)}}),e)}))},s.state=function(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?o(Object(s),!0).forEach((function(e){r(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):o(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}({},d),s.updateTimer={},s.inputRef={},s.apiServer=i.a.getApiServer(),s}var n,c;c=e,(n=s).prototype=Object.create(c.prototype),n.prototype.constructor=n,n.__proto__=c;var u=s.prototype;return u.loadAd=function(t){return new Promise(function(e,s){var o,r,n,a,i,c,l,d,u,h,b;return void 0===t&&(t=this.props),this.setState({isLoading:!0}),r=(o=this.props.stores).adStore,a=this.props.section,c=void 0===(i=o.appState.path)?"":i,u=void 0===(d=(n=o.userStore).user.language)?"en":d,h={},(l=o.workoutStore.currentTeam)&&(h=n.findTeam(l,!0))&&h.id&&(n.findTeamAmbition({ambition:h.ambitions,language:u}),n.findTeamType({type:h.type,language:u}),h.postalcode,h.place,h.country),c.replace(/\d+$/,"detail"),b=c.replace(/\/\d+/,"/detail"),Promise.resolve(r.load({query:{page:b,section:a}})).then(function(){try{return r.setTime(),this.setState({isLoading:!1}),e()}catch(t){return s(t)}}.bind(this),s)}.bind(this))},u.componentDidMount=function(){this.loadAd()},u.componentWillReceiveProps=function(t){t.path!==this.props.path&&this.loadAd(t)},u.render=function(){var e=this.props.stores,s=e.adStore,o=this.props,r=o.subject,n=o.body,i=o.section,c=e.appState.path,d=e.userStore.user,u=void 0===d?{}:d,h=s.ads,b=void 0===h?[]:h,p=s.time;if(!u||!u.id||!b||0===b.length)return c.match(/\/(home)/i)?Object(a.h)(t,null,Object(a.h)("div",{class:"w-100"},Object(a.h)("div",{class:"row"},Object(a.h)("div",{class:"col-12 col-sm-8 col-lg-6 offset-sm-2 offset-lg-3 mb-0 position-relative"},Object(a.h)("div",{class:"border rounded-lg p-4 my-3"},Object(a.h)("span",{class:"float-right display-4 text-warning"},Object(a.h)("i",{class:"far fa-smile-wink"})),Object(a.h)("h5",null,Object(a.h)(l.c,{id:"ad.heading"},"Vil du annonsere her?")),Object(a.h)("div",null,Object(a.h)(l.c,{id:"ad.teaser"},"Det er super enkelt :)")),Object(a.h)(l.b,null,Object(a.h)("a",{href:"mailto:post@themusher.no?subject="+r+": "+c+": "+i+"&body="+n,target:"_blank",rel:"noreferrer"},Object(a.h)("i",{class:"fas fa-paper-plane"})," ",Object(a.h)(l.c,{id:"ad.linktext"},"Ta kontakt med The Musher")))))))):Object(a.h)(t,null);var m=b[0];return Object(a.h)(t,null,Object(a.h)("div",{class:"w-100"},Object(a.h)("div",{class:"row"},Object(a.h)("div",{class:"col-12 col-sm-8 col-lg-6 offset-sm-2 offset-lg-3 mb-0 position-relative"},Object(a.h)("div",null,Object(a.h)("small",null,Object(a.h)("small",{class:"text-muted"},Object(a.h)(l.c,{id:"ad.ad"},"Annonse"),":",Object(a.h)("img",{src:this.apiServer+"/api/ads/"+m.id+"/view?user="+u.id+"&time="+p,style:"width: 1; height: 1; opacity: 0.1;"})))),m.target?Object(a.h)(t,null,Object(a.h)("a",{class:"stretched-link",href:""+m.url,target:m.target||"_blank",rel:"noopener noreferrer",onClick:this.logClick,native:!0},m.images&&m.images[0]&&Object(a.h)(t,null,Object(a.h)("img",{src:m.images[0].s3LargeLink,class:"img-fluid rounded-lg"})))):Object(a.h)(t,null,Object(a.h)("a",{class:"stretched-link",href:""+m.url,onClick:this.logClick},m.images&&m.images[0]&&Object(a.h)(t,null,Object(a.h)("img",{src:m.images[0].s3LargeLink,class:"img-fluid rounded-lg"}))))))))},s}(a.Component))||n)||n;e.a=u}).call(this,s("hosL").Fragment)},gOLw:function(t,e,s){"use strict";(function(t){function o(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,o)}return s}function r(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}var n,a=s("hosL"),i=s("Utv1"),c=s("/eY4"),l=(s("X9Km"),s("NMoA")),d=s("VKmm"),u=s("rWES"),h=s("epqT"),b=s("yHBq"),p=s("q/oJ"),m=s("gWxU"),f=s("ZOvn"),O=f.a.marginTop(!1),g={loading:!1,limit:10,offset:0,idxConfirm:0,idxSuggestion:1,idxAd:5,sessionid:(new Date).getTime()},j=["id","type","user","team","title"],v=Object(c.a)(n=function(e){function s(s){var n;return(n=e.call(this,s)||this).reloadStories=function(){return new Promise((function(t,e){var s,o,r;return s=n.props.stores.appState,r=(o=n.state).limit,o.offset,0,n.setState({offset:0}),Promise.resolve(n.loadStoriesPublicFeed({props:n.props,limit:r,offset:0})).then((function(){try{return s.appContainerScrollTop(),t()}catch(t){return e(t)}}),e)}))},n.setCheckForNewStories=function(t){void 0===t&&(t=n.props),n.checkForNewStoriesTimer=setInterval((function(){return n.checkForNewStories({props:t})}),6e4)},n.clearCheckForNewStories=function(){clearInterval(n.checkForNewStoriesTimer)},n.insertTopRanked=function(){var t=n.props.stores.storyStore,e=t.publicFeed,s=i.a.shuffleArray(t.topRankedStories),o=[].concat(e),r=0,a=new Date;o.forEach((function(t,e){var s=i.a.parseInputDate(t.date);Math.floor((a.getTime()-s.getTime())/1e3)<86400&&(r=e+1)}));var c=o.length;if(c>r+3){for(var l=0;l<3;l+=1){var d=f.a.randomInt(r,c);i.a.isObject(s[l])&&o.splice(d,0,s[l])}t.localUpdateField("publicFeed",o)}},n.insertAds=function(){var t=n.state.idxAd,e=n.props.stores.storyStore,s=[].concat(e.publicFeed);s.splice(t,0,{type:"ad",wrapperClassNames:"row",contentClassNames:"col-12"}),e.localUpdateField("publicFeed",s)},n.insertTeamConfirm=function(){var t=n.state.idxConfirm,e=n.props.stores.storyStore,s=[].concat(e.publicFeed);s.splice(t,0,{type:"teamConfirm",wrapperClassNames:"row",contentClassNames:"col-12"}),e.localUpdateField("publicFeed",s)},n.insertTeamSuggestions=function(){var t=n.state.idxSuggestion,e=n.props.stores.storyStore,s=[].concat(e.publicFeed);s.splice(t,0,{type:"teamSuggestions",wrapperClassNames:"row",contentClassNames:"col-12"}),e.localUpdateField("publicFeed",s)},n.setLoadMore=function(){n.props.stores.storyStore.setLoadMore((function(){var t=n.state,e=t.limit,s=t.offset;n.setState({offset:s+=e}),n.loadStoriesPublicFeed({limit:e,offset:s})}))},n.unsetLoadMore=function(){n.props.stores.storyStore.setLoadMore((function(){}))},n.onTeamClick=function(t,e){return t.preventDefault(),t.stopPropagation(),n.setState({showTeam:e}),!1},n.hideTeam=function(){n.setState({showTeam:null})},n.onUserClick=function(t){return t.preventDefault(),t.stopPropagation(),!1},n.setupIntersection=function(){n.setState({handleIntersection:f.a.intersectionObserverCallback});var t=n.props.stores.storyStore;n.scrollViewTimer=setInterval((function(){return t.postScrollview(f.a.getIntersectionObserverHistory())}),3e4)},n.renderContent=function(e){var s=e.obj,o=n.props.stores.appState.path,r=n.props.hashtag;return"ad"===s.type?Object(a.h)(t,null,Object(a.h)(h.a,{stores:n.props.stores,path:o})):"teamConfirm"===s.type?Object(a.h)(t,null,Object(a.h)(u.a,{stores:n.props.stores})):"teamSuggestions"===s.type?Object(a.h)(t,null,Object(a.h)(d.a,{stores:n.props.stores})):Object(a.h)(t,null,Object(a.h)(l.a,{stores:n.props.stores,story:s,hashtag:r,key:"story-detail-"+s.id,onTeamClick:n.onTeamClick,onUserClick:n.onUserClick}))},n.state=function(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?o(Object(s),!0).forEach((function(e){r(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):o(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}({},g),n.inputRef={},n.ref={},n}var n,c;c=e,(n=s).prototype=Object.create(c.prototype),n.prototype.constructor=n,n.__proto__=c;var v=s.prototype;return v.loadStoriesPublicFeed=function(t){return new Promise(function(e,s){var o,r,n;return n=t.offset,(r=void 0===(o=t.props)?this.props:o).path,Promise.resolve(r.stores.storyStore.loadPublicFeed({hashtag:r.hashtag,hashtags:r.hashtags,teamid:r.teamid,limit:t.limit,offset:n,sort:void 0})).then(function(){try{return n||(this.insertTopRanked(),this.insertTeamConfirm()),e()}catch(t){return s(t)}}.bind(this),s)}.bind(this))},v.checkForNewStories=function(t){return new Promise(function(e,s){var o,r;return t.limit,t.offset,(r=void 0===(o=t.props)?this.props:o).path,Promise.resolve(r.stores.storyStore.checkForNewStories({hashtag:r.hashtag,hashtags:r.hashtags,teamid:r.teamid})).then((function(){try{return e()}catch(t){return s(t)}}),s)}.bind(this))},v.componentWillMount=function(){this.setupIntersection()},v.componentDidMount=function(){this.loadStoriesPublicFeed({limit:this.state.limit,offset:0}),this.setLoadMore(),this.setCheckForNewStories()},v.componentWillUnmount=function(){this.unsetLoadMore(),this.props.stores.storyStore.postScrollview(f.a.getIntersectionObserverHistory()),clearInterval(this.scrollViewTimer),this.clearCheckForNewStories()},v.componentWillReceiveProps=function(t){t.hashtag===this.props.hashtag&&t.path===this.props.path||this.loadStoriesPublicFeed({props:t,limit:this.state.limit,offset:0})},v.render=function(){var e=this.state,s=e.loading,o=e.handleIntersection,r=e.sessionid,n=e.showTeam,i=this.props.stores,c=i.storyStore,l=c.publicFeed,d=c.hasNewStories,u=i.appState.darkmode;return Object(a.h)(t,null,n&&Object(a.h)(p.a,null,Object(a.h)(m.default,{stores:this.props.stores,teamid:n,marginTop:"0px;",marginBottom:"0px;",back:this.hideTeam})),Object(a.h)("div",{class:"w-100"},d&&Object(a.h)(t,null,Object(a.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 d-flex justify-content-center fixed-top",style:"margin-top: "+O+";"},Object(a.h)("button",{class:"btn btn-sm btn-primary rounded-pill",onClick:this.reloadStories},"New stories"))),Object(a.h)(b.a,{data:l,wrapperClassNames:"row pb-1",contentClassNames:"col-12 col-sm-8 col-lg-6 offset-sm-2 offset-lg-3 my-1 position-relative rounded rounded-lg py-3 bg-"+(u?"black":"white")+" shadow-sm",renderContent:this.renderContent,dataFields:j,handleIntersection:o,sessionid:r}),s&&Object(a.h)("div",{class:"d-flex justify-content-center"},Object(a.h)("div",{class:"spinner-border text-primary",role:"status"},Object(a.h)("span",{class:"sr-only"},"Loading...")))))},s}(a.Component))||n;e.a=v}).call(this,s("hosL").Fragment)},om2D:function(t,e,s){"use strict";var o,r=s("hosL"),n=s("/eY4"),a=(s("cneo"),s("Utv1"),s("u2zT")),i=Object(n.a)(o=function(t){function e(e){var s;return(s=t.call(this,e)||this).handleAddImage=function(t){var e=s.props.addToImages,o=void 0===e||e,r=s.props,n=r.updateField,a=r.object,i=r.field;if(i&&n({id:a.id,field:i,value:t,skipTimer:!0}),o){var c=[];c.push(t),n({id:a.id,field:"images",value:c,skipTimer:!0})}},s.state={files:[]},s}var s,o;return o=t,(s=e).prototype=Object.create(o.prototype),s.prototype.constructor=s,s.__proto__=o,e.prototype.render=function(){var t=this.props,e=t.uploadStatus,s=void 0===e?function(){}:e,o=t.before,n=void 0===o?function(){}:o,i=t.after,c=void 0===i?function(){}:i,l=t.autoOpen,d=void 0===l||l;return Object(r.h)("div",{class:"row"},Object(r.h)("div",{class:"col-12"},Object(r.h)(a.a,{handleAddImage:this.handleAddImage,uploadStatus:s,apiUrl:"/api/fileupload",before:n,after:c,autoOpen:d},Object(r.h)("div",{style:{height:30,width:"100%"}}))))},e}(r.Component))||o;e.a=i},rWES:function(t,e,s){"use strict";(function(t){function o(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,o)}return s}function r(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}var n,a=s("hosL"),i=s("Utv1"),c=s("/eY4"),l=s("OhSV"),d=s("ZOvn"),u=(s("eQ6k"),{confirmed:{},deleted:{}}),h=Object(c.a)(n=function(e){function s(t){var s;return(s=e.call(this,t)||this).confirmRequest=function(t){var e=t.target.closest("button").dataset,o=e.team,r=e.user,n=e.follow,a=s.props.stores.teamStore;a.confirmFollowRequest({team:parseInt(o,10),user:parseInt(r,10)});var i=s.state.confirmed;i[o+"-"+r]=!0,s.setState({confirmed:i}),n&&a.followRequestUser(r)},s.deleteRequest=function(t){var e=t.target.closest("button").dataset,o=e.team,r=e.user;s.props.stores.teamStore.deleteFollowRequest({team:parseInt(o,10),user:parseInt(r,10)});var n=s.state.deleted;n[o+"-"+r]=!0,s.setState({deleted:n})},s.state=function(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?o(Object(s),!0).forEach((function(e){r(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):o(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}({},u),s}var n,c;c=e,(n=s).prototype=Object.create(c.prototype),n.prototype.constructor=n,n.__proto__=c;var h=s.prototype;return h.loadTeams=function(){return new Promise(function(t,e){return Promise.resolve(this.props.stores.teamStore.load({query:{},addData:["followRequests"]})).then((function(){try{return t()}catch(t){return e(t)}}),e)}.bind(this))},h.componentDidMount=function(){this.loadTeams()},h.render=function(){var e=this,s=this.state,o=s.deleted,r=void 0===o?{}:o,n=s.confirmed,c=void 0===n?{}:n,u=this.props.stores,h=u.teamStore,b=h.teams,p=h.followRequests,m=void 0===p?[]:p,f=u.appState.darkmode;return h.hasFollowRequests?Object(a.h)("div",{class:"row pb-1"},Object(a.h)("div",{class:"col-12 col-sm-8 col-lg-6 offset-sm-2 offset-lg-3 mb-0 position-relative rounded rounded-lg py-3 bg-"+(f?"black":"white")+" shadow-sm"},Object(a.h)("div",{class:"container-fluid"},Object(a.h)("div",{class:"row"},Object(a.h)("div",{class:"col-12"},Object(a.h)("h5",null,Object(a.h)(l.c,{id:"teams.connect.teams-follow-requests"},"ForespÃ¸rsel om Ã¥ fÃ¸lge"),":"))),Object(a.h)("div",{class:"row"},Object(a.h)("div",{class:"d-flex flex-row flex-nowrap",style:"overflow: auto;"},i.a.isArray(b)&&b.map((function(s){return Object(a.h)(t,null,s&&i.a.isArray(s.followRequests)&&s.followRequests.map((function(o){var n=o.image&&o.image.s3SmallLink?o.image:null,i=r[s.id+"-"+o.id],u=c[s.id+"-"+o.id],h=m.find((function(t){return t.user.id===o.id}));return Object(a.h)("div",{class:"mr-2 py-2 border rounded-lg",style:"width: 150px;"},Object(a.h)("div",{class:"text-center border rounded-circle imageRounded imageRoundedSmall mx-auto",style:n?'background-image: url("'+n.s3SmallLink+'");':""},!n&&Object(a.h)("div",{class:"text-muted font-weight-lighter",style:"font-size: 20px; padding-top: 5px;"},d.a.displayNameShort(o))),Object(a.h)("small",null,Object(a.h)("div",{class:"text-overflow text-center"},Object(a.h)("strong",null,d.a.displayName(o)),Object(a.h)("br",null)),Object(a.h)("div",{class:"text-overflow text-center"},Object(a.h)(l.c,{id:"teams.connect.wants-to-follow"},"wants to follow your team:")),Object(a.h)("div",{class:"text-overflow text-center"},Object(a.h)("strong",null,d.a.displayName(s)))),u||i?Object(a.h)(t,null,Object(a.h)("div",{class:"text-center"},u?Object(a.h)("div",{class:"text-success"},Object(a.h)(l.c,{id:"teams.connect.confirmed"},"Confirmed")," ",Object(a.h)("i",{class:"fas fa-check"})):Object(a.h)("div",{class:"text-danger"},Object(a.h)(l.c,{id:"teams.connect.deleted"},"Deleted")," ",Object(a.h)("i",{class:"fas fa-trash-alt"})))):Object(a.h)(t,null,Object(a.h)("div",null,Object(a.h)("button",{class:"btn btn-sm btn-block btn-success text-overflow mt-1",onClick:e.confirmRequest,"data-team":s.id,"data-user":o.id},Object(a.h)(l.c,{id:"teams.connect.confirm"},"Confirm")),h&&h.public>0&&Object(a.h)("button",{class:"btn btn-sm btn-block btn-outline-success text-overflow mt-1",onClick:e.confirmRequest,"data-team":s.id,"data-user":o.id,"data-follow":!0},Object(a.h)(l.c,{id:"teams.connect.confirm-and-follow"},"Confirm & follow back")),Object(a.h)("div",{class:"mt-3"},Object(a.h)("small",null,Object(a.h)("button",{class:"btn btn-sm btn-block btn-link text-overflow",style:"font-size: 1.0em;",onClick:e.deleteRequest,"data-team":s.id,"data-user":o.id},Object(a.h)(l.c,{id:"teams.connect.delete"},"Del")))))))})))})))),Object(a.h)("details",{class:"mt-3"},Object(a.h)("summary",null,Object(a.h)("small",null,Object(a.h)(l.c,{id:"teams.connect.how-summary"},"How does this work?"))),Object(a.h)("p",null,Object(a.h)(l.c,{id:"teams.connect.how-text"},"What can followers see when I grant them access to follow? The answer is very little. They can see main details of the workouts you share and name of the dogs. That's all. Try to follow a team and check out the workout tab.")))))):""},s}(a.Component))||n;e.a=h}).call(this,s("hosL").Fragment)},u2zT:function(t,e,s){"use strict";var o,r=s("hosL"),n=s("/eY4"),a=s("Utv1"),i=s("OhSV"),c=Object(n.a)(o=function(t){function e(e){var s;return(s=t.call(this,e)||this).dropRef=Object(r.createRef)(),s.handleDrag=function(t){t.preventDefault(),t.stopPropagation()},s.handleDragIn=function(t){t.preventDefault(),t.stopPropagation(),s.dragCounter++,t.dataTransfer.items&&t.dataTransfer.items.length>0&&s.setState({drag:!0})},s.handleDragOut=function(t){t.preventDefault(),t.stopPropagation(),s.dragCounter--,0===s.dragCounter&&s.setState({drag:!1})},s.handleDrop=function(t){if(t.preventDefault(),t.stopPropagation(),s.setState({drag:!1}),t.dataTransfer.files&&t.dataTransfer.files.length>0){for(var e=0,o=t.dataTransfer.files.length;e<o;e+=1){s.readLocalFile(t.dataTransfer.files[e])}s.dragCounter=0}},s.handleAddFiles=function(t){t.preventDefault();var e=t.target;for(var o=0,r=e.files.length;o<r;o+=1){s.readLocalFile(e.files[o])}},s.handleEvent=function(){0},s.handleUpload=function(t){var e=s.props,o=e.uploadStatus,r=e.before,n=void 0===r?function(){}:r,i=e.after,c=void 0===i?function(){}:i;(void 0===o?function(){}:o)(!1),a.a.isFunction(n)&&n();var l=new FormData;l.append("files[]",t);var d={progress:1};d.xhr=new XMLHttpRequest,d.xhr.upload.addEventListener("progress",(function(e){s.updateProgress(e,t)})),d.xhr.addEventListener("loadstart",(function(e){s.handleEvent(e,t)})),d.xhr.addEventListener("load",(function(e){s.handleEvent(e,t)})),d.xhr.addEventListener("loadend",(function(e){var o=t;a.a.isFunction(c)&&c(),s.handleEvent(e,o)})),d.xhr.addEventListener("progress",(function(e){s.handleEvent(e,t)})),d.xhr.addEventListener("error",(function(e){s.handleEvent(e,t)})),d.xhr.addEventListener("abort",(function(e){s.handleEvent(e,t)})),d.xhr.addEventListener("readystatechange",(function(e){s.uploadDone(e,t)})),d.xhr.open("POST",""+a.a.getApiServer()+s.props.apiUrl),d.xhr.setRequestHeader("Authorization","Bearer "+a.a.getJwtToken()),d.xhr.send(l);var u=t.name,h=s.state.uploadedFilesData;h[u]||(h[u]={}),h[u].uploadMeta=d,h[u].imageNum=s.state.imageNum,s.setState({uploadedFilesData:h})},s.readLocalFile=function(t){return new Promise((function(e,o){var r=new FileReader;r.addEventListener("error",(function(t){o(t)})),r.addEventListener("load",(function(o){var r=t,n=r.name,a=s.state.uploadedFilesData;a[n]||(a[n]={}),a[n].event=o,s.setState({uploadedFilesData:a}),s.handleUpload(r),e(o)})),r.readAsDataURL(t)}))},s.updateProgress=function(t,e){if(t.lengthComputable){var o=e.name,r=s.state.uploadedFilesData,n=t.loaded/t.total*100;0,r[o].uploadMeta.progress=n,s.setState({uploadedFilesData:r})}},s.uploadDone=function(t,e){var o=e.name,r=s.state.uploadedFilesData,n=r[o].uploadMeta;if(n&&4===n.xhr.readyState&&201===n.xhr.status)for(var a=JSON.parse(n.xhr.responseText).data.files,i=0;i<a.length;i+=1){s.addFileToUpload(a[i]),s.fileInput.value=""}},s.state={drag:!1,loadingProgress:0,uploadedFiles:[],uploadedFilesData:{}},s}var s,o;o=t,(s=e).prototype=Object.create(o.prototype),s.prototype.constructor=s,s.__proto__=o;var n=e.prototype;return n.addFileToUpload=function(t){var e=this.state.uploadedFilesData,s=this.props,o=s.handleAddImage,r=s.uploadStatus,n=void 0===r?function(){}:r;delete e[t.name],this.setState({uploadedFilesData:e}),o(t),n(!0)},n.componentDidMount=function(){var t=this,e=this.dropRef.current;e.addEventListener("dragenter",this.handleDragIn),e.addEventListener("dragleave",this.handleDragOut),e.addEventListener("dragover",this.handleDrag),e.addEventListener("drop",this.handleDrop),this.props.autoOpen&&setTimeout((function(){t.fileInput.click()}),10)},n.componentWillUnmount=function(){var t=this.dropRef.current;t.removeEventListener("dragenter",this.handleDragIn),t.removeEventListener("dragleave",this.handleDragOut),t.removeEventListener("dragover",this.handleDrag),t.removeEventListener("drop",this.handleDrop)},n.render=function(){var t=this,e=this.state.uploadedFilesData;return Object(r.h)("div",{style:{position:"relative"},ref:this.dropRef},this.state.drag&&Object(r.h)("div",{style:{border:"dashed grey 4px",backgroundColor:"rgba(255,255,255,.8)",position:"absolute",top:0,bottom:0,left:0,right:0,zIndex:9999}},Object(r.h)("div",{style:{position:"absolute",top:"50%",right:0,left:0,textAlign:"center",color:"grey",fontSize:36}},Object(r.h)("div",null,Object(r.h)(i.c,{id:"imageupload.drag-files-here"},"drop your files here :)")))),Object(r.h)("div",null,Object(r.h)("input",{class:"btn btn-info col-sm-12",multiple:!0,type:"file",id:"image-file",onchange:this.handleAddFiles,ref:function(e){t.fileInput=e}})),Object(r.h)("div",null,Object.keys(e).length>0?Object(r.h)("h3",null,Object(r.h)(i.c,{id:"imageupload.upload-images"},"Uploaded images")):"",Object(r.h)("ul",{class:"list-group"},Object.keys(e).map((function(t){var s=e[t].uploadMeta,o=void 0===s?{}:s,n=t.match(/(jpg|jpeg|png|gif|heic|heif|svg|webp|tif)/i);return Object(r.h)("li",{class:"list-group-item list-group-item-action flex-column align-items-start"},Object(r.h)("div",{class:"d-flex w-100 justify-content-between"},n&&Object(r.h)("img",{class:"img-fluid mr-3",src:e[t].event.target.result,style:"max-height: 50px;"}),Object(r.h)("small",null,e[t].event.uploadDone),Object(r.h)(i.c,{id:"imageupload.uploading-image"},"Laster opp bilde..."),Object(r.h)("small",null,a.a.formatBytes(e[t].event.total,2))),Object(r.h)("div",{class:"progress mt-1",style:"height: 4px;"},Object(r.h)("div",{class:"progress-bar progress-bar-striped progress-bar-animated bg-success",role:"progressbar",style:"width: "+o.progress+"%; height: 4px;","aria-valuenow":o.progress,"aria-valuemin":"0","aria-valuemax":"100"})))})))),this.props.children)},e}(r.Component))||o;e.a=c},"vY+r":function(t,e,s){"use strict";(function(t){function o(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,o)}return s}function r(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}var n,a=s("hosL"),i=s("Utv1"),c=s("/eY4"),l=s("OhSV"),d=s("ZOvn"),u={},h=Object(c.a)(n=function(e){function s(t){var s;return(s=e.call(this,t)||this).toggleViews=function(){var t=s.props;(t.isTeamAdmin||t.isAdmin)&&s.setState({showViewList:!s.state.showViewList})},s.state=function(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?o(Object(s),!0).forEach((function(e){r(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):o(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}({},u),s}var n,c;return c=e,(n=s).prototype=Object.create(c.prototype),n.prototype.constructor=n,n.__proto__=c,s.prototype.render=function(){var e=this.state.showViewList,s=this.props.stores,o=s.storyStore,r=s.teamStore,n=s.workoutStore,c=this.props,u=c.views,h=c.type,b=void 0===h?"story":h,p=c.onTeamClick,m=void 0===p?function(){}:p,f=[];Object.entries(c.object.statistics).forEach((function(t){Object.entries(t[1]).forEach((function(t){var e=t[1];e.viewUsers&&f.push(e.viewUsers)}))}));var O=f.flat().slice(0,50);return Object(a.h)(t,null,Object(a.h)("div",{class:"d-flex justify-content-end mb-2"},Object(a.h)("span",{class:"ml-2 text-muted font-weight-lighter",onClick:this.toggleViews},u," ",Object(a.h)(l.c,{id:"story.views"},"views"))),e&&Object(a.h)("div",{class:"mt-3 mb-3"},O&&O.map((function(e){var s,c,l;if("story"===b?(s=o.findPublicUser(e),c=o.findPublicTeamByMembers(e)):"team"===b?(s=r.findPublicUser(e),c=r.findPublicTeamByMembers(e)):"workout"===b&&(s=n.findPublicUser(e),c=n.findPublicTeamByMembers(e)),!s)return"";i.a.isArray(c)&&(l=c.find((function(t){return 1===t.public})));var u=d.a.getImage({user:s,team:l,priority:"user"}),h=d.a.displayNameShort(s),p=d.a.displayName(s,!0);return Object(a.h)("div",{class:"d-flex flex-row position-relative font-weight-light mb-1"},l?Object(a.h)(t,null,Object(a.h)("a",{href:"/teams/public/"+l.uuidv4,title:l.name,onClick:function(t){return m(t,l.uuidv4)},class:"stretched-link"},Object(a.h)("div",{class:"text-center border rounded-circle imageRounded imageRoundedThumb",style:u?'background-image: url("'+u+'"); background-size: cover;':""},!u&&Object(a.h)("div",{class:"",style:"font-size: 12px; padding-top: 3px;"},h))),Object(a.h)("div",{class:"ml-2 "},p," ",Object(a.h)("span",{class:"font-weight-lighter"},"- ",l.name))):Object(a.h)(t,null,Object(a.h)("div",{class:"text-center border rounded-circle imageRounded imageRoundedThumb",style:(u?'background-image: url("'+u+'"); background-size: cover;':"")+" opacity: 0.5;"},!u&&Object(a.h)("div",{class:"text-muted",style:"font-size: 12px; padding-top: 3px;"},h)),Object(a.h)("div",{class:"ml-2"},p)))})),u>O.length&&Object(a.h)(t,null,Object(a.h)("small",{class:"text-muted"},Object(a.h)(l.c,{id:"story.limited-to"},"Limited to max 50 users.")))))},s}(a.Component))||n;e.a=h}).call(this,s("hosL").Fragment)},w93r:function(t,e,s){"use strict";(function(t){var o,r=s("hosL"),n=s("/eY4"),a=s("Utv1"),i=s("OhSV"),c=(s("X9Km"),s("QkTp")),l=s("ZOvn"),d=Object(n.a)(o=function(e){function s(t){var s;return(s=e.call(this,t)||this).toggleyrWeather=function(){s.setState({showWeather:!s.state.showWeather})},s.state={},s.inputRef={},s}var o,n;n=e,(o=s).prototype=Object.create(n.prototype),o.prototype.constructor=o,o.__proto__=n;var d=s.prototype;return d.loadWeather=function(){return new Promise(function(t){var e=this.props.stores.userStore;this.setState({isLoading:!0});var s=e.user;if(s.currentLocationInfo&&s.currentLocationInfo.coords){var o=s.currentLocationInfo.coords;e.getWeatherUser({lat:o.latitude,lon:o.longitude,altitude:o.altitude}),e.formatWeather()}return t()}.bind(this))},d.componentDidMount=function(){this.loadWeather()},d.render=function(){var e=this,s=this.props.stores.userStore,o=s.yrWeather,n=s.yrWeatherKeys,d=s.yrWeatherFormatted,u=s.user.currentLocationGeocode;return o&&this.props.place?this.state.showWeather?Object(r.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 px-0 mb-4"},u&&u.formatted_address&&Object(r.h)("h5",null,u.formatted_address),Object(r.h)("div",{class:"table-responsive",onTouchstart:l.a.captureEvents,onTouchend:l.a.captureEvents,onTouchmove:l.a.captureEvents,onScroll:l.a.captureEvents},Object(r.h)("table",{class:"table table-striped table-sm"},Object(r.h)("thead",null,Object(r.h)("tr",null,Object(r.h)("th",{class:"text-center"},"Â "),Object(r.h)("th",{class:"text-center"},Object(r.h)(i.c,{id:"weather.night"},"Night")),Object(r.h)("th",{class:"text-center"},Object(r.h)(i.c,{id:"weather.morning"},"Morning")),Object(r.h)("th",{class:"text-center"},Object(r.h)(i.c,{id:"weather.afternoon"},"Afternoon")),Object(r.h)("th",{class:"text-center"},Object(r.h)(i.c,{id:"weather.evening"},"Evening")),Object(r.h)("th",{class:"text-center"},Object(r.h)(i.c,{id:"weather.temp"},"Temp")),Object(r.h)("th",{class:"text-center"},Object(r.h)(i.c,{id:"weather.rainfall"},"Rainfall")),Object(r.h)("th",{class:"text-center"},Object(r.h)(i.c,{id:"weather.wind"},"Wind")))),Object(r.h)("tbody",null,n&&n.map((function(s){return Object(r.h)(t,null,Object(r.h)("tr",null,Object(r.h)("td",{class:"text-center"},Object(r.h)("nobr",null,s)),Object(r.h)("td",{class:"text-center"},Object(r.h)("nobr",null,a.a.getNestedValue(d[s].night,"next_6_hours.summary.symbol_code")&&Object(r.h)("img",{style:"width: 40px;",src:"./assets/svg/"+a.a.getNestedValue(d[s].night,"next_6_hours.summary.symbol_code")+".svg"}))),Object(r.h)("td",{class:"text-center"},Object(r.h)("nobr",null,a.a.getNestedValue(d[s].morning,"next_6_hours.summary.symbol_code")&&Object(r.h)("img",{style:"width: 40px;",src:"./assets/svg/"+a.a.getNestedValue(d[s].morning,"next_6_hours.summary.symbol_code")+".svg"}))),Object(r.h)("td",{class:"text-center"},Object(r.h)("nobr",null,a.a.getNestedValue(d[s].day,"next_6_hours.summary.symbol_code")&&Object(r.h)("img",{style:"width: 40px;",src:"./assets/svg/"+a.a.getNestedValue(d[s].day,"next_6_hours.summary.symbol_code")+".svg"}))),Object(r.h)("td",{class:"text-center"},Object(r.h)("nobr",null,a.a.getNestedValue(d[s].evening,"next_6_hours.summary.symbol_code")&&Object(r.h)("img",{style:"width: 40px;",src:"./assets/svg/"+a.a.getNestedValue(d[s].evening,"next_6_hours.summary.symbol_code")+".svg"}))),Object(r.h)("td",{class:"text-center"},Object(r.h)("nobr",null,Object(r.h)("i",{class:"fas fa-temperature-low text-muted ml-1 mr-2"}),Object(r.h)("span",{class:l.a.getTemperatureColor(a.a.getNestedValue(d[s],"air_temperatures_min"))},Object(r.h)(c.a,{stores:e.props.stores,value:a.a.getNestedValue(d[s],"air_temperatures_min")})),Object(r.h)("span",{class:"text-muted font-weight-lighter mx-1"},"-"),Object(r.h)("span",{class:l.a.getTemperatureColor(a.a.getNestedValue(d[s],"air_temperatures_max"))},Object(r.h)(c.a,{stores:e.props.stores,value:a.a.getNestedValue(d[s],"air_temperatures_max")})))),Object(r.h)("td",{class:"text-center"},Object(r.h)("nobr",null,a.a.format(a.a.getNestedValue(d[s],"precipitation_amount"),1)," ",Object(r.h)("span",{class:"text-muted font-weight-lighter"},"mm"))),Object(r.h)("td",{class:"text-center"},Object(r.h)("nobr",null,Object(r.h)("i",{class:"fas fa-wind text-muted ml-1"})," ",Object(r.h)("span",{class:l.a.getWindSpeedColor(a.a.getNestedValue(d[s],"wind_speeds_min"))},a.a.format(a.a.getNestedValue(d[s],"wind_speeds_min"),1))," ",Object(r.h)("span",{class:"text-muted font-weight-lighter"},"-")," ",Object(r.h)("span",{class:l.a.getWindSpeedColor(a.a.getNestedValue(d[s],"wind_speeds_max"))},a.a.format(a.a.getNestedValue(d[s],"wind_speeds_max"),1))," ",Object(r.h)("span",{class:"text-muted font-weight-lighter"},"m/s")))))}))))),Object(r.h)("button",{type:"button",class:"btn btn-block btn-primary btn-sm",onClick:this.toggleyrWeather},Object(r.h)("i",{class:"fas fa-times-circle"})," ",Object(r.h)(i.c,{id:"weather.close"},"Close"))):Object(r.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 px-0"},o&&o.length>0&&Object(r.h)("div",{class:"container-fluid px-0"},Object(r.h)("div",{class:"row",onClick:this.toggleyrWeather},o&&o.length>0&&o.slice(0,1).map((function(t){return Object(r.h)("div",{class:"col-12 text-right"},Object(r.h)("nobr",null,Object(r.h)("small",{class:"font-weight-light text-muted"},a.a.isoTime(t.time)),":",Object(r.h)("img",{src:"./assets/svg/"+a.a.getNestedValue(t,"next_1_hours.summary.symbol_code")+".svg",class:"ml-2",style:"height: 20px;"}),a.a.getNestedValue(t,"next_1_hours.details.precipitation_amount")>0&&Object(r.h)("small",{class:"ml-2"},a.a.getNestedValue(t,"next_1_hours.details.precipitation_amount"),Object(r.h)("span",{class:"text-muted font-weight-lighter"},"mm")),Object(r.h)("small",{class:"ml-2"},Object(r.h)("i",{class:"fas fa-temperature-low text-muted"})," ",Object(r.h)(c.a,{stores:e.props.stores,value:a.a.getNestedValue(t,"instant.details.air_temperature")})),Object(r.h)("small",{class:"ml-2"},Object(r.h)("i",{class:"fas fa-wind text-muted"})," ",a.a.getNestedValue(t,"instant.details.wind_speed"),Object(r.h)("span",{class:"text-muted font-weight-lighter"},"m/s")," ",Object(r.h)("span",{class:"text-muted font-weight-lighter"},l.a.windDirection(a.a.getNestedValue(t,"instant.details.wind_from_direction"))))),Object(r.h)("br",null))}))))):""},s}(r.Component))||o;e.a=d}).call(this,s("hosL").Fragment)},yHBq:function(t,e,s){"use strict";(function(t){function o(){return(o=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var s=arguments[e];for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(t[o]=s[o])}return t}).apply(this,arguments)}function r(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}var n,a,i=s("hosL"),c=s("/eY4"),l=s("Utv1"),d=Object(c.a)(n=function(t){function e(e){var s;return(s=t.call(this,e)||this).state={},s.containerRef=null,s}r(e,t);var s=e.prototype;return s.componentWillUnmount=function(){var t=this.props.removeIntersectionObserver;t&&t(this.containerRef)},s.componentDidMount=function(){var t=this.props.addIntersectionObserver;t&&t(this.containerRef)},s.render=function(){var t=this,e=this.props,s=e.wrapperClassNames,r=void 0===s?"":s,n=e.contentClassNames,a=void 0===n?"":n,c=e.renderContent,l=e.obj,d=void 0===l?{}:l,u=e.idx,h=e.dataFields,b=e.dataValues,p=e.sessionid,m={};return p&&(m.sessionid=p),h.forEach((function(t){return m["data-"+t]=encodeURI(b[t]||d[t])})),Object(i.h)("div",o({class:""+r,ref:function(e){return t.containerRef=e},"data-idx":u},m),Object(i.h)("div",{class:""+a,style:"display: block;"},c({obj:d,idx:u})))},e}(i.Component))||n,u=Object(c.a)(a=function(e){function s(t){var s;return(s=e.call(this,t)||this).deleteIntersectionObserver=function(){s.intersectionObserver=null},s.handleIntersection=function(t){var e=s.props.handleIntersection;"function"==typeof e&&e(t),t.forEach((function(t){var e=t.isIntersecting,s=t.target.dataset.height,o=void 0===s?0:s,r=Math.max(t.target.childNodes[0].offsetHeight,t.target.offsetHeight,t.target.scrollHeight);e?(t.target.childNodes[0].style.display="block",t.target.style.minHeight=(r>o?r:o)+"px"):t.target.style.minHeight&&(t.target.style.minHeight=(r>o?r:o)+"px",t.target.childNodes[0].style.display="none")}))},s.setupIntersectionObserver=function(){if(!("IntersectionObserver"in window)||!("IntersectionObserverEntry"in window)||!("intersectionRatio"in window.IntersectionObserverEntry.prototype))return!1;s.intersectionObserver=new IntersectionObserver(s.handleIntersection,{root:null,rootMargin:"100px",threshold:.1})},s.addIntersectionObserver=function(t){s.intersectionObserver&&t&&s.intersectionObserver.observe(t)},s.removeIntersectionObserver=function(t){s.intersectionObserver&&t&&s.intersectionObserver.unobserve(t)},s.state={},s}r(s,e);var o=s.prototype;return o.componentWillMount=function(){this.setupIntersectionObserver()},o.componentWillUnmount=function(){this.deleteIntersectionObserver()},o.render=function(){var e=this,s=this.props,o=s.data,r=void 0===o?[]:o,n=s.wrapperClassNames,a=void 0===n?"row pb-4 bg-light":n,c=s.contentClassNames,u=void 0===c?"col-12 col-sm-8 col-lg-6 offset-sm-2 offset-lg-3 mb-0 position-relative rounded rounded-lg py-3 shadow-sm":c,h=s.renderContent,b=void 0===h?function(){return Object(i.h)(t,null,"Missing render function!")}:h,p=s.dataFields,m=void 0===p?[]:p,f=s.dataValues,O=void 0===f?{}:f;return Object(i.h)("div",{class:"w-100"},r&&r.filter((function(t){return l.a.isObject(t)})).map((function(s,o){var r=s.hasOwnProperty("wrapperClassNames")?s.wrapperClassNames:a,n=s.hasOwnProperty("contentClassNames")?s.contentClassNames:u;return Object(i.h)(t,null,Object(i.h)(d,{key:"fastline-"+o+"-"+s.id,obj:s,idx:o,addIntersectionObserver:e.addIntersectionObserver,removeIntersectionObserver:e.removeIntersectionObserver,wrapperClassNames:r,contentClassNames:n,renderContent:b,dataFields:m,dataValues:O}))})))},s}(i.Component))||a;e.a=u}).call(this,s("hosL").Fragment)}}]);
//# sourceMappingURL=68.chunk.51296.js.map