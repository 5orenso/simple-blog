{"version":3,"sources":["webpack:///./routes/app-races/tracking.js","webpack:///./components/public/trackmap.js","webpack:///./routes/app-races/notifications.js","webpack:///./routes/app-races/userImages.js","webpack:///./routes/app-races/news.js","webpack:///./routes/app-races/signup.js","webpack:///./routes/app-races/mushers.js","webpack:///./routes/app-races/index.js","webpack:///./routes/app-races/classes.js","webpack:///./routes/app-races/results.js"],"names":["MARGIN_TOP","mu","marginTop","MARGIN_TOP_BACK","marginTopBack","initialState","marginBottom","subMenuMarginTop","isLoading","email","submenu","jwtToken","util","getJwtToken","reloadInSec","reloadIsActive","leaderboardMode","filterByraceClass","showLeaderBoard","showNews","ReloadTimer","observer","Component","constructor","props","super","initComponent","this","setState","tickReloadTimeer","reloadLastEpoch","state","now","Math","floor","Date","getTime","clearTimeout","updateTimer","tick","setTimeout","componentDidMount","componentWillUnmount","render","radius","fontSize","classNames","reloadPercent","normalizeBetween","class","key","color","showPercentText","percent","showCenterText","centerText","centerTextSize","centerTextY","MusherInfo","toggleAdminInfo","e","stopPropagation","showAdminInfo","toggleInfo","showInfo","bib","onTeamClick","onDogClick","raceStore","userStore","stores","isAdmin","musher","getMusherByBibId","getMusherByBibEmail","team","getTeamById","user","members","find","m","raceClass","getClassByTeamId","totals","getTotalsByTeamId","image","getImage","priority","shortname","displayNameShort","dotColor","getRankingColor","style","title","flag","firstname","lastname","sportsClub","public","onClick","id","href","uuidv4","name","markdown","replaceImages","description","images","markdownOpts","getMarkdownOptions","dogs","map","d","allDogs","distanceKm","length","format","elevation","secToHms","duration","rest","JSON","stringify","AppRaceDetailTracking","loadLiveRaceResults","async","teamIds","race","getRaceTrackerData","raceTrackerRace","getRaceTrackerActiveTeams","loadRaceResults","focusOnMushers","raceid","loadWorkoutSummary","getWorkoutSummaryActiveTeams","loadRace","appState","load","selectedClassIds","selectedClassId","allTeamIds","classes","filter","currentClass","contestants","flat","loadTeams","join","liveRace","getAllClassesSortedBy","reload","RELOAD_INTERVAL_IN_SEC","setLeaderboardMode","target","parentElement","dataset","mode","chooseRaceClass","value","toggleShowLeaderBoard","hide","toggleShowNews","onMarkerClick","showModal","modalTitle","modalBib","modalEmail","toggleModal","teamid","preventDefault","showTeam","hideTeam","onUserClick","dogid","showDog","hideDog","filterByClass","closest","toggleSelectedClassId","back","history","goBack","width","innerWidth","innerHeight","height","window","getWindowDimensions","teams","language","infoOnMushers","waypoints","zoomToMarkers","fullscreenMap","showHeatmap","showTracks","src","sort","a","b","distance","idx","type","indexOf","data-id","showAddComment","Trackmap","inputRef","adminStore","trackStore","getPublicHeatmap","trackIds","getTrackIdsByClass","cleanupMemory","query","idin","loadTrack","waypoints2","waypoints3","mapid","publicHeatmap","heatmap","tracks","track","mapId","geojson","gpx","geoJSON","gpxInfo","minZoom","maxZoom","showTrackProfile","distanceMarkerSteps","getNestedValue","AppRaceDetailNotifications","subscribeNotificationTopic","field","notificationTopics","setNotificationTopic","topic","AppRaceDetailUserImages","addRaceUserImage","newRaceUserImage","addUserImage","newUserImage","updateUserImageUpload","removeRaceUserImage","removeUserImage","userImageId","editRaceUserImage","data","raceUserImageId","ucfirst","editUserImage","resizeTextarea","el","element","scrollHeight","handleImageErrored","onerror","tags","tag","split","forEach","push","trim","hashTags","postfix","hashtags","AppRaceDetailNews","addRaceArticle","newRaceArticle","addArticle","newArticle","editRaceArticle","raceArticleId","editArticle","removeRaceArticle","removeArticle","articleId","updateArticleUpload","AppRaceDetailSignup","signupToRace","signup","addContestant","classId","newContestant","cellphone","facebook","instagram","updateSignup","updateObjectKeyValue","editSignup","classid","contestantid","raceClassId","contestantId","editClass","localUpdateSignup","signupClass","getRaceClassById","findDogsByTeam","parseInt","vaccineLogStatuses","today","signupStartDate","signupEndDate","signuppayment","for","paidSignupfee","formatDate","role","signupfee","aria-describedby","data-classid","data-contestantid","onInput","fields","placeholder","disabled","rules","checked","termsAndAgreement","declaration","isoDate","declarationDate","dog","s3SmallLink","birth","age","deceased","gender","chipId","vac","inKarens","vaccineAgens","durationEnd","karensDaysLeft","locale","hour12","hour","minute","byBib","aHas","AppRaceDetailMushers","toggleDisplayDetails","editUserDetails","adminToggleEditUser","toggleEditUserDetails","veterinaryToggleEditUser","toggleVeterinaryUserDetails","toggleAdminSendMessage","showAdminSendMessage","toggleAdminSendInboxMessage","showAdminSendInboxMessage","toggleAdminImport","showAdminImport","adminSignupEdit","sendEmail","raceId","to","raceclassid","message","subject","body","emailResponse","resetEmail","sendInboxMessage","inboxMessage","inboxMessageResponse","resetInboxMessage","parseInput","parseInputTimer","doParseInput","lines","String","headers","jsonData","firstLine","match","i","l","line","values","jsonObject","v","val","toLowerCase","addMultipleContestants","chooseSubmenu","menu","clearSearchForBib","searchForBib","savePreCheck","chipid","preCheck","dogJournals","dogJournalStore","vetData","dogData","journalData","checkType","journal","veterinary","date","insert","displayDetails","raceCheck","isVeterinary","veterinaryUserDetails","filterByBib","c","regex","RegExp","replace","test","linkstate","startDate","startTime","endDate","endTime","scope","currentTeam","hasVaccines","hasMandatoryCheck","mandatoryCheck","raceStatus","raceComment","gpxResultsApproved","alt","asFacebookLink","native","rel","asInstagramLink","price1","priceSent","price2","price3","horizontal","vertical","data-menu","dogVaccines","vaccines","vaccineName","dogJournal","slice","veterinaryFirstname","veterinaryLastname","diagnoseId","heartRate","weight","bodyConditionScore","generalFindings","data-chipid","data-team","data-name","data-shortname","shortName","startOrder","address","postalcode","postalplace","countryCode","birthdate","emails","dangerouslySetInnerHTML","__html","$str","rows","status","data-to","data-raceclassid","data-class","oninput","MARGIN_BOTTOM","likeRace","toggleAddComment","focus","route","resizeAllTextareas","textareaList","document","getElementsByTagName","addNavigation","findIndex","updateKeyValue","getDogs","loadPublicInteractions","componentWillReceiveProps","nextProps","likes","comments","hasLikedRace","isLiveRace","showSignup","s3LargeLink","veterinaryInfo","checkpoints","trailDescription","program","prices","ingress","inputRefObject","cols","AppRaceDetailClasses","contentIsNotLoaded","aria-valuenow","aria-valuemin","aria-valuemax","AppRaceDetailResults","lockAllWorkoutsInRace","lockMessage","lastAllowedChangeDate","setHours","getHours","resultsUrl","resultsText","resultDanger","resultWarning","resultSuccess","totalMushers","totalFinished","contestant","currentStages","currentResults","completed","normalizedDuration","weightedNormalizedDuration","isDone","finishedDate","totalWorkoutTimeUsedSec","data-email","isLocked","stage","currentEpoch","inDate","setUTCSeconds","viewBox","svgElevation","speedAvg","avgDogs","lastUpdated","nonstop","totalRest","firstEpoch","firstGpxStartEpoch","lastGpxStartEpoch"],"mappings":"s+BAkBA,MAAMA,EAAaC,IAAGC,WAAU,GAC1BC,EAAkBF,IAAGG,eAAc,GAmBnCC,GAlBgBJ,IAAGK,eACGL,IAAGM,mBAiBV,CACjBC,WAAW,EACXC,MAAO,GACPC,QAAS,MACTC,SAAUC,IAAKC,cAEfC,YAAa,KACbC,gBAAgB,EAEhBC,gBAAiB,UACjBC,kBAAmB,GACnBC,iBAAiB,EACjBC,UAAU,I,IAMRC,EADLC,Y,EAAD,cAC0BC,YACtBC,YAAYC,GACRC,MAAMD,GADS,KAQnBE,cAAgB,KACZC,KAAKC,SAAS,CACVb,gBAAgB,GACjB,IAAMY,KAAKE,qBAXC,KAcnBA,iBAAmB,KACf,MAAM,gBAAEC,GAAoBH,KAAKH,OAC3B,eAAET,GAAmBY,KAAKI,MAChC,GAAIhB,EAAgB,CAChB,MAAMiB,EAAMC,KAAKC,OAAM,IAAIC,MAAOC,UAAY,KAE9CT,KAAKC,SAAS,CAAEd,YAxBG,IAuB2BkB,EAAMF,KAEpDO,aAAaV,KAAKW,YAAYC,MAC9BZ,KAAKW,YAAYC,KAAOC,WAAW,IAAMb,KAAKE,mBAAoB,KAEtE,OAAO,GAtBPF,KAAKI,MAAL,KACO1B,GAEPsB,KAAKW,YAAc,GAsBvBG,oBACId,KAAKD,gBAGTgB,uBACIL,aAAaV,KAAKW,YAAYC,MAGlCI,SACI,MAAM,YAAE7B,GAAgBa,KAAKI,OACvB,OAAEa,EAAS,GAAX,SAAeC,EAAW,GAA1B,WAA8BC,EAAa,IAAOnB,KAAKH,MACvDuB,EAAgBd,KAAKC,MAAMtB,IAAKoC,iBAAiBlC,EAAa,EA1C7C,GA0CwE,EAAG,MAElG,OAAQ,mBACJ,oBAAMmC,MAAOH,GACT,YAAC,IAAD,CAAOI,IAAM,oBACTC,MAAM,UACNP,OAAQA,EACRQ,iBAAiB,EACjBC,QAASN,EACTO,gBAAgB,EAChBC,WAAYzC,EACZ0C,eAAgBX,EAChBY,YAAa,c,EAQ3BC,EADLrC,Y,EAAD,cACyBC,YACrBC,YAAYC,GACRC,MAAMD,GADS,KAMnBmC,gBAAmBC,IACfA,EAAEC,kBACF,MAAM,cAAEC,GAAkBnC,KAAKI,MAC/BJ,KAAKC,SAAS,CACVkC,eAAgBA,KAVL,KAcnBC,WAAcH,IACVA,EAAEC,kBACF,MAAM,SAAEG,GAAarC,KAAKI,MAC1BJ,KAAKC,SAAS,CACVoC,UAAWA,KAhBfrC,KAAKI,MAAQ,GAoBjBY,SACI,MAAM,cAAEmB,EAAF,SAAiBE,GAAarC,KAAKI,OACnC,IAAEkC,EAAF,MAAOxD,EAAP,YAAcyD,EAAd,WAAwCC,GAAexC,KAAKH,OAE5D,UAAE4C,EAAF,UAAaC,GAAc1C,KAAKH,MAAM8C,QACtC,QAAEC,GAAYF,EACdG,EAASP,EAAMG,EAAUK,iBAAiBR,GAAOG,EAAUM,oBAAoBjE,GAC/EkE,EAAOP,EAAUQ,YAAYJ,EAAOG,MACpCE,EAAOF,EAAKG,QAAUH,EAAKG,QAAQC,KAAKC,GAAKA,EAAEvE,QAAU+D,EAAO/D,OAAS,GACzEwE,EAAYb,EAAUc,iBAAiBV,EAAOG,MAC9CQ,EAASf,EAAUgB,kBAAkBZ,EAAOG,MAC5CU,EAAQpF,IAAGqF,SAAS,CAAET,OAAMF,OAAMY,SAAU,SAC5CC,EAAYvF,IAAGwF,iBAAiBZ,IAAS5E,IAAGwF,iBAAiBjB,GAE7DkB,EAAWzF,IAAG0F,gBAAgBnB,EAAOP,KAE3C,OAAQ,mBACJ,mBAAKhB,MAAM,4BACP,mBACIA,MAAQ,sFACR2C,MAAOP,EAAS,0BAAyBA,+BAAqC,KAE5EA,GAAS,mBAAKpC,MAAM,aAAa2C,MAAM,sCAAsCJ,GAC/E,mBACIvC,MAAQ,wDAAuDyC,EAAW,GAAK,kCAC/EE,MAAQ,6BAA2BF,EAAY,qBAAoBA,KAAc,KAEhFlB,EAAOP,KAAsB,QAAfO,EAAOP,KAAiB,mBAAGO,EAAOP,OAGzD,mBAAKhB,MAAM,sCAAsC2C,MAAM,uBACnD,kBAAI3C,MAAM,0BAA0BgC,EAAUY,OAC9C,kBAAI5C,MAAM,QACLuB,EAAOsB,KADZ,IACmBtB,EAAOuB,UAD1B,IACsCvB,EAAOwB,UAE7C,kBAAI/C,MAAM,QAAQuB,EAAOyB,cAKhCtB,EAAKuB,OAAS,GAAK,mBACflC,EAAW,mBACR,sBAAQf,MAAM,2BAA2BkD,QAASxE,KAAKoC,YACnD,iBAAGd,MAAM,oBADb,IACkC,YAAC,IAAD,CAAMmD,GAAG,mBAAT,eAEhC,mBACF,sBAAQnD,MAAM,2BAA2BkD,QAASxE,KAAKoC,YACnD,iBAAGd,MAAM,sBADb,IACoC,YAAC,IAAD,CAAMmD,GAAG,mBAAT,eAIxC,sBACKzB,EAAKuB,OAAS,mBACX,iBAAGG,KAAO,iBAAgB1B,EAAK2B,OAAUH,QAAUvC,GAAMM,EAAYN,EAAGe,EAAK2B,SACxE3B,EAAK4B,OAER,mBACD5B,EAAK4B,OAGbvC,GAAY,mBACT,YAAC,IAAD,CAAUwC,SAAUvG,IAAGwG,cAAc9B,EAAK+B,YAAa/B,EAAKgC,QAASC,aAAc3G,IAAG4G,wBAEzFlC,EAAKmC,MAAQ,mBAAK7D,MAAM,yBACrB,mBAAKA,MAAM,YACP,YAAC,IAAD,CAAaqB,OAAQ3C,KAAKH,MAAM8C,OAAQwC,KAAMnC,EAAKmC,KAAKC,IAAIC,GAAKA,EAAEZ,IAAKa,QAAStC,EAAKmC,KAAM3C,WAAYA,OAKnHgB,GAAUA,EAAO+B,YAAc,mBAC5B,mBAAKjE,MAAM,uBACP,qBAAOA,MAAM,0BACT,yBACI,sBACI,kBAAI2C,MAAM,cAAa,iBAAG3C,MAAM,gBAChC,kBAAI2C,MAAM,cAAa,YAAC,IAAD,CAAMQ,GAAG,cAAT,SACvB,kBAAIR,MAAM,cAAV,KACA,kBAAI3C,MAAM,aAAa2C,MAAM,eAAejB,EAAKmC,KAAKK,SAE1D,sBACI,sBAAI,iBAAGlE,MAAM,iBACb,sBAAI,YAAC,IAAD,CAAMmD,GAAG,kBAAT,aACJ,2BACA,kBAAInD,MAAM,cAAa,wBAAOkC,EAAO+B,WAAgBtG,IAAKwG,OAAOjC,EAAO+B,WAAY,GAAjC,MAA2C,SAElG,sBACI,sBAAI,iBAAGjE,MAAM,qBACb,sBAAI,YAAC,IAAD,CAAMmD,GAAG,gBAAT,cACJ,2BACA,kBAAInD,MAAM,cAAa,wBAAOkC,EAAOkC,UAAezG,IAAKwG,OAAOjC,EAAOkC,UAAW,GAAhC,KAAyC,SAE/F,sBACI,sBAAI,iBAAGpE,MAAM,sBACb,sBAAI,YAAC,IAAD,CAAMmD,GAAG,mBAAT,aACJ,sBAAI,iBAAGnD,MAAM,kBACb,kBAAIA,MAAM,cAAa,wBAAOrC,IAAK0G,SAASnC,EAAOoC,WAAa,SAEpE,sBACI,sBAAI,iBAAGtE,MAAM,gBACb,sBAAI,YAAC,IAAD,CAAMmD,GAAG,mBAAT,SACJ,sBAAI,iBAAGnD,MAAM,kBACb,kBAAIA,MAAM,cAAa,wBAAOrC,IAAK0G,SAASnC,EAAOqC,OAAS,aAQ/EjD,GAAW,mBAAKqB,MAAM,uDACnB,sBAAQ3C,MAAM,yBAAyBkD,QAASxE,KAAKgC,iBAArD,qBAGCG,GAAiB,mBACd,yBACI,uBACK2D,KAAKC,UAAUlD,EAAQ,KAAM,GAC7BiD,KAAKC,UAAU7C,EAAM,KAAM,GAC3B4C,KAAKC,UAAU/C,EAAM,KAAM,GAC3B8C,KAAKC,UAAUvC,EAAQ,KAAM,Y,EAsCpDwC,EADLtG,Y,EAAD,cACoCC,YAChCC,YAAYC,GAAO,MACfC,MAAMD,GADS,YASnBoG,oBAAsBC,eAAOrG,EAAQ,EAAKA,MAAOsG,GAC7C,MAAM,UAAE1D,GAAc5C,EAAM8C,QACtB,KAAEyD,GAAS3D,QACXA,EAAU4D,mBAAmBD,EAAKE,iBACxC7D,EAAU8D,0BAA0BJ,IAbrB,KAgBnBK,gBAAkBN,eAAOrG,EAAQ,EAAKA,MAAOsG,EAASM,GAClD,MAAM,UAAEhE,GAAc5C,EAAM8C,QACtB,OAAE+D,GAAW7G,QAEb4C,EAAUkE,mBAAmBR,EAASO,GAC5CjE,EAAUmE,6BAA6BH,IArBxB,KAwBnBI,SAAWX,eAAOrG,EAAQ,EAAKA,OAC3B,EAAKI,SAAS,CAAEpB,WAAW,IAC3B,MAAM,UAAE4D,EAAF,SAAaqE,GAAajH,EAAM8C,QAChC,OAAE+D,GAAW7G,QACb4C,EAAUsE,KAAKL,GACrB,MAAM,KAAEN,GAAS3D,GACX,eAAEgE,GAAmBK,GAErB,iBAAEE,EAAmB,IAAOF,EAC5BG,EAAkBD,EAAiB,GACnCE,EAAad,EAAKe,QACnBC,OAAOC,GAAgBA,EAAa5C,KAAOwC,GAC3CG,OAAOC,GAAgBA,EAAaC,aAAeD,EAAaC,YAAY9B,OAAS,GACrFJ,IAAKiC,GACKA,EAAaC,YAAYF,OAAOvE,GAAUA,EAAOG,KAAO,GAAGoC,IAAIvC,GAAUA,EAAOG,OAE1FuE,OACDL,EAAW1B,OAAS,SACd/C,EAAU+E,UAAUN,EAAWO,KAAK,MAE1CrB,EAAKsB,SAAW,QACV,EAAKzB,oBAAoB,EAAKpG,MAAOqH,EAAYT,SAGjD,EAAKD,gBAAgB,EAAK3G,MAAOqH,EAAYT,GAgBvDhE,EAAUkF,wBAGVjH,aAAa,EAAKC,YAAYiH,QAC9B,EAAKjH,YAAYiH,OAAS/G,YAAWqF,iBACjC,MAAM/F,EAAkBG,KAAKC,OAAM,IAAIC,MAAOC,UAAY,KAC1D,EAAKR,SAAS,CAAEE,oBAChB,EAAK0G,SAAShH,KACfgI,KAEH,EAAK5H,SAAS,CAAEpB,WAAW,KA1EZ,KA6EnBiJ,mBAAsB7F,IAElBjC,KAAKC,SAAS,CAAEZ,gBADQ4C,EAAE8F,OAAOC,cAAcC,QAAQC,MAAQjG,EAAE8F,OAAOE,QAAQC,QA9EjE,KAkFnBC,gBAAmBlG,IAEfjC,KAAKC,SAAS,CAAEX,kBADU2C,EAAE8F,OAAOK,SAnFpB,KAuFnBC,sBAAyBC,IACrB,MAAM,gBAAE/I,GAAoBS,KAAKI,MAE7BJ,KAAKC,UADI,IAATqI,EACc,CAAE/I,iBAAiB,GAEnB,CAAEA,iBAAkBA,KA5FvB,KAgGnBgJ,eAAkBD,IACd,MAAM,SAAE9I,GAAaQ,KAAKI,MAEtBJ,KAAKC,UADI,IAATqI,EACc,CAAE9I,UAAU,GAEZ,CAAEA,UAAWA,KArGhB,KAuHnBgJ,cAAgB,EAAGtE,QAAO5B,MAAKxD,YAC3B,MAAM,UAAE2J,GAAczI,KAAKI,MAC3BJ,KAAKC,SAAS,CACVwI,WAAYA,EACZC,WAAYxE,EACZyE,SAAUrG,EACVsG,WAAY9J,KA7HD,KAiInB+J,YAAc,KACV,MAAM,UAAEJ,GAAczI,KAAKI,MAC3BJ,KAAKC,SAAS,CACVwI,WAAYA,KApID,KAyInBlG,YAAc,CAACN,EAAG6G,KACd7G,EAAE8G,iBACF9G,EAAEC,kBACFlC,KAAKC,SAAS,CACV+I,SAAUF,KAEP,GA/IQ,KAkJnBG,SAAW,KACPjJ,KAAKC,SAAS,CACV+I,SAAU,QApJC,KAwJnBE,YAAejH,IACXA,EAAE8G,iBACF9G,EAAEC,mBACK,GA3JQ,KA8JnBM,WAAa,CAACP,EAAGkH,EAAOhE,KACpBlD,EAAE8G,iBACF9G,EAAEC,kBACFlC,KAAKC,SAAS,CACVmJ,QAASD,EACThE,UAEG,GArKQ,KAwKnBkE,QAAU,KACNrJ,KAAKC,SAAS,CACVmJ,QAAS,QA1KE,KAgLtBE,cAAgBpD,eAAOjE,GACtB,MAAMgF,EAAkBhF,EAAE8F,OAAOwB,QAAQ,UAAUtB,QAAQxD,IACrD,SAAEqC,EAAF,UAAYrE,GAAc,EAAK5C,MAAM8C,OAC3CmE,EAAS0C,sBAAsBvC,GAAiB,GAE1C,MAAM,KAAEb,GAAS3D,GACX,eAAEgE,GAAmBK,EAErBI,EAAad,EAAKe,QACnBC,OAAOC,GAAgBA,EAAa5C,KAAOwC,GAC3CG,OAAOC,GAAgBA,EAAaC,aAAeD,EAAaC,YAAY9B,OAAS,GACrFJ,IAAKiC,GACKA,EAAaC,YAAYF,OAAOvE,GAAUA,EAAOG,KAAO,GAAGoC,IAAIvC,GAAUA,EAAOG,OAE1FuE,OACDL,EAAW1B,OAAS,SACd/C,EAAU+E,UAAUN,EAAWO,KAAK,MAE1CrB,EAAKsB,SAAW,QACV,EAAKzB,oBAAoB,EAAKpG,MAAOqH,EAAYT,SAGjD,EAAKD,gBAAgB,EAAK3G,MAAOqH,EAAYT,IAtMxC,KA0MnBgD,KAAO,KACH,MAAM,QAAEC,GAAY1J,KAAKH,MAAM8C,OAC/B+G,EAAQC,UA1MR3J,KAAKI,MAAL,OACO1B,GADP,IAEIyB,gBAAiBG,KAAKC,OAAM,IAAIC,MAAOC,UAAY,OAEvDT,KAAKW,YAAc,GAmGvBI,uBACIL,aAAaV,KAAKW,YAAYiH,QAC9BlH,aAAaV,KAAKW,YAAYC,MAGlCE,oBACId,KAAK6G,WACL,MAAM,MAAE+C,GA3XhB,WACI,MAAQC,WAAYD,EAAOE,YAAaC,GAAWC,OACnD,MAAO,CACHJ,QACAG,UAuX0BE,GACtBL,EAAQ,MACR5J,KAAKqI,uBAAsB,GAC3BrI,KAAKuI,gBAAe,IA4F5BvH,SACI,MAAM,UAAE0B,EAAF,UAAaD,EAAb,SAAwBqE,GAAa9G,KAAKH,MAAM8C,QAChD,KAAEO,EAAO,GAAT,MAAagH,EAAQ,IAAgBxH,GACrC,SAAEyH,EAAW,MAASjH,GAEtB,OAAEwD,GAAiB1G,KAAKH,OACxB,eAAE4G,EAAiB,GAAnB,cAAuB2D,EAAgB,GAAvC,iBAA2CpD,EAAmB,IAAOF,GASrE,gBAAiE3G,EAAjE,UACFsI,EADE,SACqBE,EADrB,WAC+BC,EAD/B,SAEFI,EAFE,QAEQI,GAEVpJ,KAAKI,OAEH,UAAyBiK,EAAzB,cAA4DC,EAA5D,KAAoFlE,GAA0B3D,EAE9GI,EAAS8F,EAAWlG,EAAUK,iBAAiB6F,GAAYlG,EAAUM,oBAAoB6F,GACzF5F,EAAOP,EAAUQ,YAAYJ,EAAOG,MAG1C,OAAQ,mBACHgG,GAAY,YAAC,IAAD,KACT,YAAC,IAAD,CAAmBrG,OAAQ3C,KAAKH,MAAM8C,OAAQmG,OAAQE,EAAUzK,UAAW,OAAQI,aAAc,OAAQ8K,KAAMzJ,KAAKiJ,SAAUA,SAAUjJ,KAAKiJ,YAEhJG,GAAW,YAAC,IAAD,KACR,YAAC,IAAD,CAAiBzG,OAAQ3C,KAAKH,MAAM8C,OAAQwG,MAAOC,EAAS7K,UAAW,OAAQI,aAAc,OAAQ8K,KAAMzJ,KAAKqJ,QAASlE,KAAMnC,EAAKmC,QAGxI,mBAAK7D,MAAM,wCAAwC2C,MAAQ,eAAc5F,mCACrE,YAAC,IAAD,CACIsE,OAAQ3C,KAAKH,MAAM8C,OACnB+D,OAAQA,EACR2D,UAAWA,EAGXC,cAAeA,EACfC,eAAe,EACf/B,cAAexI,KAAKwI,cACpBgC,YAAapE,EAAKsB,SAAW,EAC7B+C,WAAYrE,EAAKsB,UAAY,EAC7BnG,IAAM,YAAWyF,EAAiBS,KAAK,OAK3C,mBAAKnG,MAAM,oBAAoB2C,MAAM,yCACjC,sBAAQ3C,MAAM,2CACV2C,MAAQ,QAAOzF,8CACfgG,QAASxE,KAAKyJ,MACd,iBAAGnI,MAAM,8BAEb,mBAAKA,MAAM,iCACP,mBAAKoJ,IAAM,yCAAyCX,OAAO,KAAKzI,MAAM,eACtE,iBAAGoD,KAAO,cAAa0B,EAAK3B,cACxB,oBAAMnD,MAAM,6BAA6B2C,MAAM,qBAAqBmC,EAAKlC,UAKrF,mBAAK5C,MAAM,oBAAoB2C,MAAM,mEACjC,YAACxE,EAAD,CAAakD,OAAQ3C,KAAKH,MAAM8C,OAAQxB,WAAW,mBAAmBhB,gBAAiBA,KAE3F,mBACImB,MAAM,oBACN2C,MAAM,0HAUN,mBAAK3C,MAAM,yBACP,mBACIA,MAAM,wCACN2C,MAAM,kDAELmC,EAAKe,SAAWf,EAAKe,QAAQwD,KAAK,CAACC,EAAGC,IAAMD,EAAEE,SAAWD,EAAEC,UAAU1F,IAAI,CAACiC,EAAc0D,IAAQ,mBAC7F,mBAAKzJ,MAAM,iBACP,sBACI0J,KAAK,SACL1J,MAAQ,iBAAwB,IAARyJ,GAAa,uBAAuBA,IAAQ3E,EAAKe,QAAQ3B,OAAS,GAAK,qCAAqCwB,EAAiBiE,QAAQ5D,EAAa5C,KAAO,EAAI,cAAgB,oCACrMR,MAAM,6CACNO,QAASxE,KAAKsJ,cACd4B,UAAS7D,EAAa5C,IAErB4C,EAAanD,aAoBrCuE,GAAa,mBACV,mBACInH,MAAM,oBACN2C,MAAM,iGACNO,QAASxE,KAAK6I,aAEd,mBACIvH,MAAM,sEACN2C,MAAM,4HAEN,sBAAQ3C,MAAM,uDAAuD2C,MAAM,yBACvE,iBAAG3C,MAAM,kBAGb,YAACS,EAAD,CACIY,OAAQ3C,KAAKH,MAAM8C,OACnBL,IAAKqG,EACL7J,MAAO8J,EACPrG,YAAavC,KAAKuC,YAClB2G,YAAalJ,KAAKkJ,YAClB1G,WAAYxC,KAAKwC,sB,EAUlCwD,Q,4fC/nBf,MAAMtH,EAAe,CACpByM,gBAAgB,G,IAIXC,EADL1L,Y,EAAD,cACuBC,YACnBC,YAAYC,GACRC,MAAMD,GACNG,KAAKI,M,+VAAL,IACO1B,GAEPsB,KAAKW,YAAc,GACzBX,KAAKqL,SAAW,GAGjB,kBACO,MAAM,YAAEb,EAAF,OAAe9D,GAAW1G,KAAKH,OAC/B,WAAEyL,EAAF,WAAcC,EAAd,UAA0B9I,EAA1B,SAAqCqE,GAAa9G,KAAKH,MAAM8C,QAC7D,iBAAEqE,EAAmB,IAAOF,EAG9B0D,SACMc,EAAWE,iBAAiB9E,GAItC,MAAM+E,EAAWhJ,EAAUiJ,mBAAmB1E,EAAiB,IAE3DyE,GAAYA,EAASjG,OAAS,IAC9B+F,EAAWI,sBACLJ,EAAWxE,KAAK,CAAE6E,MAAO,CAAEC,KAAMJ,MAKlD3K,oBACCd,KAAK8L,YAOH9K,SACI,MAAM,WAAEuK,EAAF,UAAc9I,EAAd,SAAyBqE,GAAa9G,KAAKH,MAAM8C,QACjD,iBAAEqE,EAAmB,IAAOF,GAC5B,UAAEuD,EAAF,WAAa0B,EAAb,WAAyBC,EAAzB,cAAqC1B,EAArC,MAAoD2B,EAApD,cAA2D1B,EAA3D,cAA0E/B,EAA1E,YAAyFgC,EAAzF,WAAsGC,GAAezK,KAAKH,OACxHqM,cAAeC,EAAjB,OAA0BC,GAAWb,EACrCc,EAAQD,EAAO,GACJ3J,EAAUiJ,qBAK3B,OACI,mBAGI,YAAC,IAAD,CACI/I,OAAQ3C,KAAKH,MAAM8C,OACnB2J,MAAOL,EACPE,QAAS3B,EAAc2B,EAAU,KACjCI,QAAS9B,GAAc4B,EAAQA,EAAMG,IAAIC,QAAU,KACnDC,QAASjC,GAAc4B,EAASA,EAAMK,SAAWL,EAAMG,IAAIE,QAAW,KACtEC,QAAS,EACTC,QAAS,GACT7C,OAAQ,IACRM,UAAWA,EACX0B,WAAYA,EACZC,WAAYA,EACZ1B,cAAeA,EACfC,cAAeA,EACf/B,cAAeA,EACfqE,kBAAkB,EAClBC,oBAAqB,OAErBvL,IAAM,OAAMtC,IAAK8N,eAAeV,EAAO,a,EAO5CjB,Q,gLClFT4B,EADLtN,Y,EAAD,cACyCC,YACrCC,YAAYC,GAAO,MACfC,MAAMD,GADS,YAQnBoN,2BAA6B/G,eAAOgH,GACtC,MAAM,UAAExK,GAAc,EAAK7C,MAAM8C,QACrB,KAAEO,GAASR,GACX,mBAAEyK,EAAqB,IAAOjK,QAE9BR,EAAU0K,qBAAqB,CACjCF,MAAQ,sBAAqBA,EAC7B9E,MAHU,KAVdpI,KAAKI,MAAQ,GAEnBJ,KAAKqL,SAAW,GACVrL,KAAKW,YAAc,GAcvBK,SACF,MAAM,UAAE0B,GAAmC1C,KAAKH,MAAM8C,QAChD,KAAEO,EAAO,GAAT,MAAagH,EAAQ,IAAgBxH,GAC/B,SAAEyH,EAAW,MAASjH,GACtB,mBAAEiK,EAAqB,IAAOjK,GAEpC,KAAEkD,EAAO,IAAOpG,KAAKH,MAEfwN,EAAS,QAAOjH,EAAK3B,GAC3B,OAAI0I,GAAsBA,EAAmBE,GAClC,GAGH,mBACJ,mBAAK/L,MAAM,OACP,mBAAKA,MAAM,uEACP,sBAAQA,MAAM,gCAAgCkD,QAAS,IAAMxE,KAAKiN,2BAA2BI,IACzF,iBAAG/L,MAAM,gBADb,IAC8B,YAAC,IAAD,CAAMmD,GAAG,sBAAT,2C,EAQnCuI,Q,kNCxCTM,EADL5N,Y,EAAD,cACsCC,YAClCC,YAAYC,GAAO,MACfC,MAAMD,GADS,YAStB0N,iBAAmBrH,iBACZ,MAAM,KAAEE,EAAO,IAAO,EAAKvG,MACrB6G,EAASN,EAAK3B,IACd,UAAEhC,GAAc,EAAK5C,MAAM8C,QACjC,iBAAE6K,GAAqB,EAAKpN,YAC5BqC,EAAUgL,aAAa,CAAEhJ,GAAIiC,EAAQgH,aAAcF,IACzD,EAAKvN,SAAS,CACbuN,iBAAkB,MAhBE,KAoBtBG,sBAAwB,EAAGT,QAAO9E,YAEjC,MAAM,iBAAEoF,GAAqBxN,KAAKI,MAClCoN,EAAiBN,GAAS9E,EAC1BpI,KAAKC,SAAS,CAAEuN,sBAxBK,KA2BtBI,oBAAsB1H,eAAOjE,GAC5B,MAAMwC,EAAKxC,EAAE8F,OAAOC,cAAcC,QAAQxD,IAAMxC,EAAE8F,OAAOE,QAAQxD,IACrD,KAAE2B,EAAO,IAAO,EAAKvG,MACrB6G,EAASN,EAAK3B,IACd,UAAEhC,GAAc,EAAK5C,MAAM8C,aACjCF,EAAUoL,gBAAgB,CAC/BpJ,GAAIiC,EACJoH,YAAarJ,KAlCO,KAsCtBsJ,kBAAoB7H,eAAOjE,GAC1B,MAAM,GAAEwC,EAAF,MAAMyI,GAAUjL,EAAE8F,OAAOE,SACzB,MAAEG,GAAUnG,EAAE8F,QACR,KAAE3B,EAAO,IAAO,EAAKvG,MACrB6G,EAASN,EAAK3B,IACpB,UAAEhC,GAAc,EAAK5C,MAAM8C,OAC3BqL,EAAO,CACZC,gBAAiBxJ,EACjB,CAAE,gBAAexF,IAAKiP,QAAQhB,IAAW9E,GAE1C1H,aAAa,EAAKC,YAAa,GAAE+F,KAAUjC,KAAMyI,MACjD,EAAKvM,YAAa,GAAE+F,KAAUjC,KAAMyI,KAAWrM,YAAWqF,iBACzDzD,EAAU0L,cAAc,CACvB1J,GAAIiC,EACJsH,WAEC,MAEH,EAAKI,eAAenM,EAAE8F,SAxDD,KA2DnBqG,eAAkBC,IACpB,IAAIC,EAAUD,EACVC,EAAQvG,SACXuG,EAAUD,EAAGtG,QAEd,MAAM,aAAEwG,GAAiBD,EACzBA,EAAQrK,MAAM8F,OAAYwE,EAAF,MAjEH,KAoEnBC,mBAAsBvM,IAClB,MAAMyB,EAAQzB,EAAE8F,OAChBrE,EAAM+K,QAAU,KAChB5N,WAAW,KACP6C,EAAMgH,KAAQ,IAAG,IAAIlK,MACtB,MAvEHR,KAAKI,MAAQ,CACToN,iBAAkB,IAE5BxN,KAAKqL,SAAW,GACVrL,KAAKW,YAAc,GAsEvBK,SACI,MAAM,iBAAEwM,EAAmB,IAAOxN,KAAKI,OACvC,UAAEsC,GAAmC1C,KAAKH,MAAM8C,QAChD,KAAEO,EAAO,GAAT,MAAagH,EAAQ,IAAgBxH,GAC/B,SAAEyH,EAAW,MAASjH,GAE5B,KAAEkD,EAAO,IAAOpG,KAAKH,MACf6O,EAAO,CAAC,UAOd,OANItI,EAAKuI,KACLvI,EAAKuI,IAAIC,MAAM,KAAKC,QAAQF,IACxBD,EAAKI,KAAKH,EAAII,UAId,mBACH7L,EAAKuB,IAAM,YAAC,IAAD,CAAU9B,OAAQ3C,KAAKH,MAAM8C,OAAQqM,SAAUN,EAAMO,QAAU,OAAM7I,EAAKlC,6BAA6BkC,EAAK3B,iBAAkB4I,MAAQ,QAAOjH,EAAK3B,KAE9J,YAAC,IAAD,CAAiB9B,OAAQ3C,KAAKH,MAAM8C,OAAQuM,SAAUR,S,EAoGnDpB,Q,kNClMT6B,EADLzP,Y,EAAD,cACgCC,YAC5BC,YAAYC,GAAO,MACfC,MAAMD,GADS,YASnBuP,eAAiBlJ,iBACnB,MAAM,KAAEE,EAAO,IAAO,EAAKvG,MACf6G,EAASN,EAAK3B,IACd,UAAEhC,GAAc,EAAK5C,MAAM8C,QACjC,eAAE0M,GAAmB,EAAKjP,YAC1BqC,EAAU6M,WAAW,CAAE7K,GAAIiC,EAAQ6I,WAAYF,IACrD,EAAKpP,SAAS,CACboP,eAAgB,MAhBI,KAoBnBG,gBAAkBtJ,eAAOjE,GAC3B,MAAM,GAAEwC,EAAF,MAAMyI,GAAUjL,EAAE8F,OAAOE,SACzB,MAAEG,GAAUnG,EAAE8F,QACd,KAAE3B,EAAO,IAAO,EAAKvG,MACf6G,EAASN,EAAK3B,IACpB,UAAEhC,GAAc,EAAK5C,MAAM8C,OAC3BqL,EAAO,CACZyB,cAAehL,EACf,CAAE,cAAaxF,IAAKiP,QAAQhB,IAAW9E,GAExC1H,aAAa,EAAKC,YAAa,GAAE+F,KAAUjC,KAAMyI,MACjD,EAAKvM,YAAa,GAAE+F,KAAUjC,KAAMyI,KAAWrM,YAAWqF,iBACzDzD,EAAUiN,YAAY,CACrBjL,GAAIiC,EACJsH,WAEC,MAEH,EAAKI,eAAenM,EAAE8F,SAtCD,KAyCnB4H,kBAAoBzJ,eAAOjE,GAC7B,MAAMwC,EAAKxC,EAAE8F,OAAOC,cAAcC,QAAQxD,IAAMxC,EAAE8F,OAAOE,QAAQxD,IAC3D,KAAE2B,EAAO,IAAO,EAAKvG,MACf6G,EAASN,EAAK3B,IACd,UAAEhC,GAAc,EAAK5C,MAAM8C,aACjCF,EAAUmN,cAAc,CAC7BnL,GAAIiC,EACJmJ,UAAWpL,KAhDS,KAoDnBqL,oBAAsB,EAAG5C,QAAO9E,YAElC,MAAM,eAAEiH,GAAmBrP,KAAKI,MAChCiP,EAAenC,GAAS9E,EACxBpI,KAAKC,SAAS,CAAEoP,oBAxDK,KA2DnBjB,eAAkBC,IACpB,IAAIC,EAAUD,EACVC,EAAQvG,SACXuG,EAAUD,EAAGtG,QAEd,MAAM,aAAEwG,GAAiBD,EACzBA,EAAQrK,MAAM8F,OAAYwE,EAAF,MAjEH,KAoEnBC,mBAAsBvM,IAClB,MAAMyB,EAAQzB,EAAE8F,OAChBrE,EAAM+K,QAAU,KAChB5N,WAAW,KACP6C,EAAMgH,KAAQ,IAAG,IAAIlK,MACtB,MAvEHR,KAAKI,MAAQ,CACTiP,eAAgB,IAE1BrP,KAAKqL,SAAW,GACVrL,KAAKW,YAAc,GAsEvBK,SACI,MACA,UAAE0B,GAAmC1C,KAAKH,MAAM8C,QAChD,KAAEO,EAAO,GAAT,MAAagH,EAAQ,IAAgBxH,GAC/B,SAAEyH,EAAW,MAASjH,GAE5B,KAAEkD,EAAO,IAAOpG,KAAKH,MAEf6O,EAAO,CAAC,QAOd,OANItI,EAAKuI,KACLvI,EAAKuI,IAAIC,MAAM,KAAKC,QAAQF,IACxBD,EAAKI,KAAKH,EAAII,UAId,mBACH7L,EAAKuB,IAAM,YAAC,IAAD,CAAU9B,OAAQ3C,KAAKH,MAAM8C,OAAQqM,SAAUN,EAAMO,QAAU,OAAM7I,EAAKlC,2BAA2BkC,EAAK3B,WAAY4I,MAAQ,QAAOjH,EAAK3B,KAEtJ,YAAC,IAAD,CAAiB9B,OAAQ3C,KAAKH,MAAM8C,OAAQuM,SAAUR,S,EA0FnDS,Q,w3BC9LTY,EADLrQ,Y,EAAD,cACkCC,YAC9BC,YAAYC,GAAO,MACfC,MAAMD,GADS,YAQtBmQ,aAAe9J,iBACd,MAAM,UAAEzD,EAAF,UAAaC,GAAc,EAAK7C,MAAM8C,QACtC,KAAEO,GAASR,GACL,OAAEuN,GAAWxN,GACb,KAAE2D,EAAO,IAAO,EAAKvG,MACrB6G,EAASN,EAAK3B,SAEpBhC,EAAUyN,cAAc,CAC7BzL,GAAIiC,EACJyJ,QAASF,EAAO3O,MAChB8O,cAAe,EAAF,CACZpN,KAAME,EAAKF,KACXoB,UAAWlB,EAAKkB,UAChBC,SAAUnB,EAAKmB,SACfC,WAAYpB,EAAKoB,WACjBxF,MAAOoE,EAAKpE,MACZuR,UAAWnN,EAAKmN,UAChBC,SAAUpN,EAAKoN,SACfC,UAAWrN,EAAKqN,WACZN,MA3Be,KAgCnBO,aAAgBvO,IACZ,MAAMV,EAAMU,EAAE8F,OAAOtD,GACf2D,EAAQnG,EAAE8F,OAAOK,OACjB,UAAE3F,GAAczC,KAAKH,MAAM8C,OACjCF,EAAUgO,qBAAqB,SAAUlP,EAAK6G,IApC/B,KAuCnBsI,WAAczO,IACV,MAAM,KAAEmE,EAAO,IAAOpG,KAAKH,MACrB6G,EAASN,EAAK3B,IAEd,UAAEhC,GAAczC,KAAKH,MAAM8C,OAC3BuK,EAAQjL,EAAE8F,OAAOtD,GACjB2D,EAAQnG,EAAE8F,OAAOK,OACjB,QAAEuI,EAAF,aAAWC,GAAiB3O,EAAE8F,OAAOE,QAC3CxF,EAAUgO,qBAAqB,SAAUvD,EAAO9E,GAMhD,MAAM4F,EAAO,CAClB6C,YAAaF,EACJG,aAAcF,EACvB,CAAE,sBAAqB3R,IAAKiP,QAAQhB,IAAW9E,GAEhD1H,aAAaV,KAAKW,YAAYuM,IAC9BlN,KAAKW,YAAYuM,GAASrM,YAAWqF,iBACpCzD,EAAUsO,UAAU,CACnBtM,GAAIiC,EACJsH,SAEQvL,EAAUuO,kBAAkB9D,EAAO9E,GACrB,SAAV8E,SACMzK,EAAU+E,UAAUY,GAAO,KAE5C,MAlEGpI,KAAKI,MAAQ,GAEnBJ,KAAKqL,SAAW,GACVrL,KAAKW,YAAc,GAkEvBK,SACF,MAAM,UAAE0B,EAAF,UAAaD,GAAwBzC,KAAKH,MAAM8C,QAChD,KAAEO,EAAO,GAAT,MAAagH,EAAQ,IAAgBxH,GAC/B,SAAEyH,EAAW,MAASjH,GAE5B,KAAEkD,EAAO,IAAOpG,KAAKH,OACf,OAAEoQ,GAAWxN,EAEnB,IAAIwO,EAAc,GACd9L,EAAO,GACP8K,EAAO3O,QACP2P,EAAcxO,EAAUyO,iBAAiBjB,EAAO3O,QAEhD2O,EAAOjN,OACPmC,EAAOzC,EAAUyO,eAAeC,SAASnB,EAAOjN,KAAM,MAE1D,MAAM,mBAAEqO,GAAuB3O,EAC/B4O,EAAQ,IAAI9Q,KAEZ,OAAQ,mBACJ,mBAAKc,MAAM,OACP,mBAAKA,MAAM,uEACP,kBAAIA,MAAM,QAAO,YAAC,IAAD,CAAMmD,GAAG,gBAAT,eAErB,mBAAKnD,MAAM,uEACNgQ,GAAS,IAAI9Q,KAAK4F,EAAKmL,kBAAoBD,GAAS,IAAI9Q,KAAK4F,EAAKoL,eAAiB,mBAChF,oBAAMlQ,MAAM,uBAAsB,YAAC,IAAD,CAAMmD,GAAG,sBAAT,kBAAlC,KADgF,IACevB,EAAKpE,MAAM,uBAAM,uBAC/GmR,EAAOxL,GAAK,mBACT,mBAAKnD,MAAM,yBACP,iBAAGA,MAAM,8BADb,IAC4C,YAAC,IAAD,CAAMmD,GAAG,mBAAT,0BAAwD,yBAIlG2B,EAAKsB,UAAYtB,EAAKqL,eAAiB,mBACrC,mBAAKnQ,MAAM,uBACP,qBAAOoQ,IAAI,YAAYpQ,MAAM,uDAAsD,YAAC,IAAD,CAAMmD,GAAG,gBAAT,cACnF,mBAAKnD,MAAM,UACN2O,EAAO0B,cAAgB,mBAAKrQ,MAAM,QAC/B,YAAC,IAAD,CAAMmD,GAAG,cAAT,UADoB,KACkBxF,IAAK2S,WAAW3B,EAAO0B,eAC7D,iBAAGrQ,MAAM,oCACJ,mBACL,mBAAKA,MAAM,0BAA0BuQ,KAAK,SACtC,sBACI,oBAAMvQ,MAAM,uBAAsB,YAAC,IAAD,CAAMmD,GAAG,sBAAT,sBAAlC,KAAiG,uBACjG,YAAC,IAAD,CAAUI,SAAUvG,IAAGwG,cAAcsB,EAAKqL,cAAerL,EAAKpB,OAAQmF,GAAWlF,aAAc3G,IAAG4G,uBACjG+L,EAAYa,WAAa1L,EAAK0L,UAHnC,aAWpB,mBAAKxQ,MAAM,uBACP,qBAAOoQ,IAAI,OAAOpQ,MAAM,uDACpB,YAAC,IAAD,CAAMmD,GAAG,cAAT,SAEJ,mBAAKnD,MAAM,SACP,sBAAQA,MAAM,+BAA+BmD,GAAG,OAAOsN,mBAAiB,WACpEC,eAAc/B,EAAO3O,MACrB2Q,oBAAmBhC,EAAOxL,GAC1ByN,QAASlS,KAAK0Q,WACdtI,MAAO6H,EAAOjN,MAEd,sBAAQoF,MAAM,IAAd,MAAoB,YAAC,IAAD,CAAM3D,GAAG,qBAAT,aAApB,OACCyF,EAAM9E,IAAIpC,GACP,sBAAQoF,MAAOpF,EAAKyB,IAAKzB,EAAK4B,QAGrCqL,EAAOjN,KAAO,oBAIT,mBACF,mBAAK1B,MAAM,8BAA8BuQ,KAAK,SAC1C,oBAAMvQ,MAAM,6BACR,iBAAGA,MAAM,iCAEb,YAAC,IAAD,CAAMmD,GAAG,yBAAyB0N,OAAQ,CAAEjO,MAAOkC,EAAKlC,QAAxD,+BAA8FkC,EAAKlC,WAkBnH,mBAAK5C,MAAM,uBACP,qBAAOoQ,IAAI,YAAYpQ,MAAM,uDAAsD,YAAC,IAAD,CAAMmD,GAAG,mBAAT,UACnF,mBAAKnD,MAAM,SACP,YAAC,IAAD,KACI,qBAAO0J,KAAK,OAAO1J,MAAM,eAAemD,GAAG,YACvCuN,eAAc/B,EAAO3O,MACrB2Q,oBAAmBhC,EAAOxL,GAC1ByN,QAASlS,KAAK0Q,WACdtI,MAAO6H,EAAOI,UACd+B,YAAa,YAAC,IAAD,CAAM3N,GAAG,wBAAT,iCAK5BwL,EAAOrL,MAAQ,mBAAKtD,MAAM,uBACvB,qBAAOoQ,IAAI,OAAOpQ,MAAM,uDAAsD,YAAC,IAAD,CAAMmD,GAAG,cAAT,SAC9E,mBAAKnD,MAAM,SACN2O,EAAOrL,OAGhB,mBAAKtD,MAAM,uBACP,qBAAOoQ,IAAI,YAAYpQ,MAAM,uDAAsD,YAAC,IAAD,CAAMmD,GAAG,mBAAT,YACnF,mBAAKnD,MAAM,SACP,YAAC,IAAD,KACI,qBAAO0J,KAAK,OAAO1J,MAAM,eAAemD,GAAG,YACvCuN,eAAc/B,EAAO3O,MACrB2Q,oBAAmBhC,EAAOxL,GAC1ByN,QAASlS,KAAK0Q,WACdtI,MAAO6H,EAAO7L,UACdgO,YAAa,YAAC,IAAD,CAAM3N,GAAG,wBAAT,+BAK7B,mBAAKnD,MAAM,uBACP,qBAAOoQ,IAAI,WAAWpQ,MAAM,uDAAsD,YAAC,IAAD,CAAMmD,GAAG,kBAAT,cAClF,mBAAKnD,MAAM,SACP,YAAC,IAAD,KACI,qBAAO0J,KAAK,OAAO1J,MAAM,eAAemD,GAAG,WACvCuN,eAAc/B,EAAO3O,MACrB2Q,oBAAmBhC,EAAOxL,GAC1ByN,QAASlS,KAAK0Q,WACdtI,MAAO6H,EAAO5L,SACd+N,YAAa,YAAC,IAAD,CAAM3N,GAAG,uBAAT,iCAK7B,mBAAKnD,MAAM,uBACP,qBAAOoQ,IAAI,aAAapQ,MAAM,uDAAsD,YAAC,IAAD,CAAMmD,GAAG,oBAAT,UACpF,mBAAKnD,MAAM,SACP,YAAC,IAAD,KACI,qBAAO0J,KAAK,OAAO1J,MAAM,eAAemD,GAAG,aACvCuN,eAAc/B,EAAO3O,MACrB2Q,oBAAmBhC,EAAOxL,GAC1ByN,QAASlS,KAAK0Q,WACdtI,MAAO6H,EAAO3L,WACd8N,YAAa,YAAC,IAAD,CAAM3N,GAAG,yBAAT,mCAK7B,mBAAKnD,MAAM,uBACP,qBAAOoQ,IAAI,WAAWpQ,MAAM,uDAAsD,YAAC,IAAD,CAAMmD,GAAG,kBAAT,aAClF,mBAAKnD,MAAM,SACP,YAAC,IAAD,KACI,qBAAO0J,KAAK,OAAO1J,MAAM,eAAemD,GAAG,WACvCuN,eAAc/B,EAAO3O,MACrB2Q,oBAAmBhC,EAAOxL,GAC1ByN,QAASlS,KAAK0Q,WACdtI,MAAO6H,EAAOK,SACd8B,YAAa,YAAC,IAAD,CAAM3N,GAAG,uBAAT,2CAK7B,mBAAKnD,MAAM,uBACP,qBAAOoQ,IAAI,YAAYpQ,MAAM,uDAAsD,YAAC,IAAD,CAAMmD,GAAG,mBAAT,cACnF,mBAAKnD,MAAM,SACP,YAAC,IAAD,KACI,qBAAO0J,KAAK,OAAO1J,MAAM,eAAemD,GAAG,YACvCuN,eAAc/B,EAAO3O,MACrB2Q,oBAAmBhC,EAAOxL,GAC1ByN,QAASlS,KAAK0Q,WACdtI,MAAO6H,EAAOM,UACd6B,YAAa,YAAC,IAAD,CAAM3N,GAAG,wBAAT,4CAK7B,mBAAKnD,MAAM,uBACP,qBAAOoQ,IAAI,OAAOpQ,MAAM,uDAAsD,YAAC,IAAD,CAAMmD,GAAG,eAAT,WAC9E,mBAAKnD,MAAM,SACP,sBAAQA,MAAM,eAAemD,GAAG,QAAQsN,mBAAiB,YACrDC,eAAc/B,EAAO3O,MACrB2Q,oBAAmBhC,EAAOxL,GAC1ByN,QAASlS,KAAK0Q,WACdtI,MAAO6H,EAAO3O,MACd+Q,UAAQ,GAER,sBAAQjK,MAAM,IAAd,MAAoB,YAAC,IAAD,CAAM3D,GAAG,sBAAT,eAApB,OACC2B,EAAKe,SAAWf,EAAKe,QAAQwD,KAAK,CAACC,EAAGC,IAAMD,EAAEE,SAAWD,EAAEC,UAAU1F,IAAIiC,GAAgB,mBACtF,sBAAQe,MAAOf,EAAa5C,IACvB4C,EAAanD,OAAQkC,EAAKsB,UAAY,wBAChCL,EAAayD,SADmB,oBACQzD,EAAayK,WAAa1L,EAAK0L,UADvC,cAQ1D1L,EAAKkM,OAAS,mBAAKhR,MAAM,uBACtB,qBAAOoQ,IAAI,OAAOpQ,MAAM,uDAAxB,KACA,mBAAKA,MAAM,cACP,qBAAO0J,KAAK,WAAW1J,MAAM,mBAAmBmD,GAAG,oBAC/CuN,eAAc/B,EAAO3O,MACrB2Q,oBAAmBhC,EAAOxL,GAC1ByN,QAASlS,KAAK0Q,WACd6B,QAAStC,EAAOuC,kBAChBpK,MAAO,IAEX,qBAAO9G,MAAM,mBAAmBoQ,IAAI,qBAAoB,YAAC,IAAD,CAAMjN,GAAG,0BAAT,gDAG/D2B,EAAKqM,aAAe,mBAAKnR,MAAM,uBAC5B,mBAAKA,MAAM,iCACP,sBAAI,YAAC,IAAD,CAAMmD,GAAG,qBAAT,iBAER,uBAASnD,MAAM,UACV2O,EAAOwC,YAAc,mBAClB,2BACI,YAAC,IAAD,CAAMhO,GAAG,yBAAT,mBADJ,KAC6D,oBAAMnD,MAAM,gCAA+B,YAAC,IAAD,CAAMmD,GAAG,4BAAT,sBAA3C,KAA2GxF,IAAKyT,QAAQzC,EAAO0C,kBAD5L,MAGE,mBACF,2BACI,kBAAIrR,MAAM,mBAAkB,YAAC,IAAD,CAAMmD,GAAG,yBAAT,sBAIpC,YAAC,IAAD,CAAUI,SAAUvG,IAAGwG,cAAcsB,EAAKqM,YAAarM,EAAKpB,OAAQmF,GAAWlF,aAAc3G,IAAG4G,uBAE/F+K,EAAOwC,YAAc,mBAClB,qBACI,YAAC,IAAD,CAAMhO,GAAG,4BAAT,sBADJ,KACoExF,IAAKyT,QAAQzC,EAAO0C,mBAEtF,mBACF,mBAAKrR,MAAM,QACP,qBAAO0J,KAAK,WAAW1J,MAAM,mBAAmBmD,GAAG,cAC/CuN,eAAc/B,EAAO3O,MACrB2Q,oBAAmBhC,EAAOxL,GAC1ByN,QAASlS,KAAK0Q,WACd6B,QAAStC,EAAOwC,YAChBrK,MAAO,IAEX,qBAAO9G,MAAM,mBAAmBoQ,IAAI,eAAc,YAAC,IAAD,CAAMjN,GAAG,4BAAT,oDAMlE,mBAAKnD,MAAM,uBACP,mBAAKA,MAAM,iCACP,sBAAI,YAAC,IAAD,CAAMmD,GAAG,kBAAT,cAER,uBAASnD,MAAM,UACX,2BACI,YAAC,IAAD,CAAMmD,GAAG,kBAAT,wBAEJ,mBAAKnD,MAAM,QACN6D,GAAQA,EAAKK,OAAS,EAAI,mBACtBL,EAAKC,IAAIwN,GAAO,mBACb,mBAAKtR,MAAM,sCACP,mBAAKA,MAAQ,oFAAoF2C,MAAO2O,EAAIlP,MAAS,0BAAyBkP,EAAIlP,MAAMmP,yCAA2C,KAE7LD,EAAIlP,OAAS,oBAAMpC,MAAM,sBAAsB2C,MAAM,oBAAoBhF,IAAKiP,QAAQ0E,EAAIhO,MAAM,KAEtG,mBAAKtD,MAAM,yBACP,oBAAMA,MAAM,eACPsR,EAAIE,OAAS,oBAAMxR,MAAM,QAAQrC,IAAK8T,IAAIH,EAAIE,MAAOF,EAAII,WAC1C,WAAfJ,EAAIK,OAAsB,iBAAG3R,MAAM,iBAAoB,iBAAGA,MAAM,iBAErE,iBAAGoD,KAAO,cAAakO,EAAInO,IACvB,kBAAInD,MAAM,OAAO2C,MAAM,uBAClB2O,EAAI/O,WAAa+O,EAAIhO,KAD1B,IACiCgO,EAAI/O,WAA+B,KAAlB+O,EAAI/O,WAAoB,yBAAK,oBAAMvC,MAAM,uBAAuBsR,EAAIhO,SAGzHgO,EAAIM,OAAS,mBACV,iBAAG5R,MAAM,gCADC,IACiCsR,EAAIM,QAC7C,mBACF,mBAAK5R,MAAM,qBAAqBuQ,KAAK,SACjC,YAAC,IAAD,CAAMpN,GAAG,wBAAT,qBAIR,uBACK4M,GAAsBA,EAAmBjK,OAAOnF,GAAKA,EAAEiR,SAAWN,EAAIM,QAAQ9N,IAAK+N,GAE5E,oBAAM7R,MAAQ,eAAc6R,EAAIC,SAAW,UAAY,uBAClDD,EAAIE,aAAazO,KAClB,oBAAMtD,MAAM,4BACR,iBAAGA,MAAM,0BADb,IACyCrC,IAAKyT,QAAQS,EAAIE,aAAaC,aAAa,GAAO,GAAO,GAC7FH,EAAIC,UAAY,mBACb,uBADa,YAEHnU,IAAKwG,OAAO0N,EAAII,eAAgB,GAF7B,wBAY/C,mBACF,mBAAKjS,MAAM,0BACP,mBAAKA,MAAM,aACP,iBAAGA,MAAM,gBAEb,kBAAIA,MAAM,uBACN,YAAC,IAAD,CAAMmD,GAAG,iBAAT,0DAQtB,mBAED2B,EAAKsB,SAAW,mEAEX,mBACF,mBAAKpG,MAAM,cACP,qBAAOoQ,IAAI,aAAY,YAAC,IAAD,CAAMjN,GAAG,mBAAT,UACvB,qBAAOuG,KAAK,OAAO1J,MAAM,eAAemD,GAAG,YAAYsN,mBAAiB,gBACpEK,YAAalP,EAAKmN,UAClB6B,QAASlS,KAAKwQ,aACdpI,MAAO6H,EAAOI,YAElB,qBAAO5L,GAAG,gBAAgBnD,MAAM,wBAAuB,YAAC,IAAD,CAAMmD,GAAG,wBAAT,gCAG1DwL,EAAOrL,MAAQ,mBAAKtD,MAAM,OACvB,mBAAKA,MAAM,OACP,mBAAKA,MAAM,cACP,qBAAOoQ,IAAI,QAAO,YAAC,IAAD,CAAMjN,GAAG,cAAT,SAClB,qBAAOuG,KAAK,OAAO1J,MAAM,eAAemD,GAAG,OAAOsN,mBAAiB,WAC/DK,YAAalP,EAAK0B,KAClBsN,QAASlS,KAAKwQ,aACdpI,MAAO6H,EAAOrL,OAElB,qBAAOH,GAAG,WAAWnD,MAAM,wBAAuB,YAAC,IAAD,CAAMmD,GAAG,mBAAT,2BAI9D,mBAAKnD,MAAM,OACP,mBAAKA,MAAM,OACP,mBAAKA,MAAM,cACP,qBAAOoQ,IAAI,aAAY,YAAC,IAAD,CAAMjN,GAAG,mBAAT,YACvB,qBAAOuG,KAAK,OAAO1J,MAAM,eAAemD,GAAG,YAAYsN,mBAAiB,gBACpEK,YAAalP,EAAKkB,UAClB8N,QAASlS,KAAKwQ,aACdpI,MAAO6H,EAAO7L,YAElB,qBAAOK,GAAG,gBAAgBnD,MAAM,wBAAuB,YAAC,IAAD,CAAMmD,GAAG,wBAAT,6BAG/D,mBAAKnD,MAAM,OACP,mBAAKA,MAAM,cACP,qBAAOoQ,IAAI,YAAW,YAAC,IAAD,CAAMjN,GAAG,kBAAT,cACtB,qBAAOuG,KAAK,OAAO1J,MAAM,eAAemD,GAAG,WAAWsN,mBAAiB,eACnEK,YAAalP,EAAKmB,SAClB6N,QAASlS,KAAKwQ,aACdpI,MAAO6H,EAAO5L,WAElB,qBAAOI,GAAG,eAAenD,MAAM,wBAAuB,YAAC,IAAD,CAAMmD,GAAG,uBAAT,gCAKlE,mBAAKnD,MAAM,cACP,qBAAOoQ,IAAI,cAAa,YAAC,IAAD,CAAMjN,GAAG,oBAAT,UACxB,qBAAOuG,KAAK,OAAO1J,MAAM,eAAemD,GAAG,aAAasN,mBAAiB,iBACrEK,YAAalP,EAAKoB,WAClB4N,QAASlS,KAAKwQ,aACdpI,MAAO6H,EAAO3L,aAElB,qBAAOG,GAAG,iBAAiBnD,MAAM,wBAAuB,YAAC,IAAD,CAAMmD,GAAG,yBAAT,gCAG5D,mBAAKnD,MAAM,OACP,mBAAKA,MAAM,OACP,mBAAKA,MAAM,cACP,qBAAOoQ,IAAI,YAAW,YAAC,IAAD,CAAMjN,GAAG,kBAAT,aACtB,qBAAOuG,KAAK,OAAO1J,MAAM,eAAemD,GAAG,WAAWsN,mBAAiB,eACnEK,YAAalP,EAAKoN,SAClB4B,QAASlS,KAAKwQ,aACdpI,MAAO6H,EAAOK,WAElB,qBAAO7L,GAAG,eAAenD,MAAM,wBAAuB,YAAC,IAAD,CAAMmD,GAAG,uBAAT,yCAG9D,mBAAKnD,MAAM,OACP,mBAAKA,MAAM,cACP,qBAAOoQ,IAAI,aAAY,YAAC,IAAD,CAAMjN,GAAG,mBAAT,cACvB,qBAAOuG,KAAK,OAAO1J,MAAM,eAAemD,GAAG,YAAYsN,mBAAiB,gBACpEK,YAAalP,EAAKqN,UAClB2B,QAASlS,KAAKwQ,aACdpI,MAAO6H,EAAOM,YAElB,qBAAO9L,GAAG,gBAAgBnD,MAAM,wBAAuB,YAAC,IAAD,CAAMmD,GAAG,wBAAT,2CAKnE,mBAAKnD,MAAM,cACP,qBAAOoQ,IAAI,QAAO,YAAC,IAAD,CAAMjN,GAAG,cAAT,SAClB,sBAAQnD,MAAM,eAAemD,GAAG,OAAOsN,mBAAiB,WACpDG,QAASlS,KAAKwQ,aACdpI,MAAO6H,EAAOjN,MAEd,sBAAQoF,MAAM,IAAd,MAAoB,YAAC,IAAD,CAAM3D,GAAG,qBAAT,aAApB,OACCyF,EAAM9E,IAAIpC,GACP,sBAAQoF,MAAOpF,EAAKyB,IAAKzB,EAAK4B,QAGtC,qBAAOH,GAAG,WAAWnD,MAAM,wBAAuB,YAAC,IAAD,CAAMmD,GAAG,0BAAT,wBAGtD,mBAAKnD,MAAM,cACP,qBAAOoQ,IAAI,SAAQ,YAAC,IAAD,CAAMjN,GAAG,eAAT,WACnB,sBAAQnD,MAAM,eAAemD,GAAG,QAAQsN,mBAAiB,YACrDG,QAASlS,KAAKwQ,aACdpI,MAAO6H,EAAO3O,OAEd,sBAAQ8G,MAAM,IAAd,MAAoB,YAAC,IAAD,CAAM3D,GAAG,sBAAT,eAApB,OACC2B,EAAKe,SAAWf,EAAKe,QAAQ/B,IAAIiC,GAAgB,mBAC9C,sBAAQe,MAAOf,EAAa5C,IAAK4C,EAAanD,MAA9C,MAAwDmD,EAAayD,SAArE,oBAAgGzD,EAAayK,WAAa1L,EAAK0L,UAA/H,WAGR,qBAAOrN,GAAG,YAAYnD,MAAM,wBAAuB,YAAC,IAAD,CAAMmD,GAAG,2BAAT,yBAGvD,mBAAKnD,MAAM,yBACP,qBAAO0J,KAAK,WAAW1J,MAAM,mBAAmBmD,GAAG,oBAC/CyN,QAASlS,KAAKwQ,aACd+B,QAAStC,EAAOuC,kBAChBpK,OAAO,IAEX,qBAAO9G,MAAM,mBAAmBoQ,IAAI,qBAAoB,YAAC,IAAD,CAAMjN,GAAG,0BAAT,+CAE5D,sBAAQuG,KAAK,SAAS1J,MAAM,kBAAkBkD,QAASxE,KAAKgQ,cAAc,YAAC,IAAD,CAAMvL,GAAG,mBAAT,mBAKhF,mBACD6M,EAAQ,IAAI9Q,KAAK4F,EAAKmL,iBAAmB,mBACtC,kBAAIjQ,MAAM,QACN,iBAAGA,MAAM,8BADb,IAC4C,YAAC,IAAD,CAAMmD,GAAG,6BAAT,qCAE5C,iBAAGnD,MAAM,QACL,YAAC,IAAD,CAAMmD,GAAG,wBAAT,qBADJ,IAC6D,uBACzD,oBAAMnD,MAAM,aAAarC,IAAK2S,WAAWxL,EAAKmL,gBAAiB,CAAEiC,OAAQ,QAASC,QAAQ,EAAOC,KAAM,UAAWC,OAAQ,eAE5H,mBACF,kBAAIrS,MAAM,aACN,iBAAGA,MAAM,8BADb,IAC4C,YAAC,IAAD,CAAMmD,GAAG,uBAAT,oC,EAYzDsL,Q,qwBC1hBf,SAAS6D,EAAMhJ,EAAGC,GACd,MAAMgJ,OAAwB,IAAVjJ,EAAEtI,IAEtB,YAD8B,IAAVuI,EAAEvI,KACPuR,IAAmB,IAATA,GAAiBjJ,EAAEtI,IAAMuI,EAAEvI,KAAQ,E,yIAI1DwR,EADLpU,Y,EAAD,cACmCC,YAC/BC,YAAYC,GAAO,MACfC,MAAMD,GADS,YAmBnBkU,qBAAwB9R,IAC1B,MAAMwC,EAAKxC,EAAE8F,OAAOwB,QAAQ,MAAMtB,QAAQxD,IACpC,SAAEqC,GAAa9G,KAAKH,MAAM8C,QAC1B,gBAAEqR,GAAoBlN,EACvBkN,EAAgBvP,IACpBqC,EAASiN,qBAAqBtP,IAxBV,KA4BnBwP,oBAAuBhS,IACzBA,EAAEC,kBACF,MAAMuC,EAAKxC,EAAE8F,OAAOwB,QAAQ,MAAMtB,QAAQxD,IACpC,SAAEqC,GAAa9G,KAAKH,MAAM8C,OAChCmE,EAASoN,sBAAsBzP,IAhCV,KAmCnB0P,yBAA4BlS,IAC9BA,EAAEC,kBACF,MAAMuC,EAAKxC,EAAE8F,OAAOwB,QAAQ,MAAMtB,QAAQxD,IACpC,SAAEqC,GAAa9G,KAAKH,MAAM8C,OAChCmE,EAASsN,4BAA4B3P,GAAI,IAvCpB,KA0CnB4P,uBAA0BpS,IAC5B,MAAMkO,EAAUlO,EAAE8F,OAAOwB,QAAQ,UAAUtB,QAAQ3G,OAC7C,qBAAEgT,GAAyBtU,KAAKI,MACtCkU,EAAqBnE,IAAYmE,EAAqBnE,GACtDnQ,KAAKC,SAAS,CAAEqU,0BA9CK,KAiDnBC,4BAA+BtS,IACjC,MAAMkO,EAAUlO,EAAE8F,OAAOwB,QAAQ,UAAUtB,QAAQ3G,OAC7C,0BAAEkT,EAA4B,IAAOxU,KAAKI,MAChDoU,EAA0BrE,IAAYqE,EAA0BrE,GAChEnQ,KAAKC,SAAS,CAAEuU,+BArDK,KAwDnBC,kBAAqBxS,IACvB,MAAMkO,EAAUlO,EAAE8F,OAAOwB,QAAQ,UAAUtB,QAAQ3G,OAC7C,gBAAEoT,GAAoB1U,KAAKI,MACjCsU,EAAgBvE,IAAYuE,EAAgBvE,GAC5CnQ,KAAKC,SAAS,CAAEyU,qBA5DK,KA+DnBC,gBAAmB1S,IACf,MAAM,KAAEmE,EAAO,IAAOpG,KAAKH,MACrB6G,EAASN,EAAK3B,IACd,UAAEhC,GAAczC,KAAKH,MAAM8C,OAC3BuK,EAAQjL,EAAE8F,OAAOtD,GACjB2D,EAAQnG,EAAE8F,OAAOK,OACjB,QAAEuI,EAAF,aAAWC,GAAiB3O,EAAE8F,OAAOE,QAMrC+F,EAAO,CAClB6C,YAAaF,EACJG,aAAcF,EACvB,CAAE,sBAAqB3R,IAAKiP,QAAQhB,IAAW9E,GAEhD1H,aAAaV,KAAKW,YAAYuM,IAC9BlN,KAAKW,YAAYuM,GAASrM,YAAWqF,iBACpCzD,EAAUsO,UAAU,CACnBtM,GAAIiC,EACJsH,WAEC,MAtFkB,KAyFtB4G,UAAY1O,eAAOjE,GACZ,MAAM,KAAEmE,EAAO,IAAO,EAAKvG,MACrBgV,EAASzO,EAAK3B,GACpBqQ,EAAK7S,EAAE8F,OAAOwB,QAAQ,UAAUtB,QAAQ6M,GACxCjE,EAAc5O,EAAE8F,OAAOwB,QAAQ,UAAUtB,QAAQ8M,aACjD,SAAEjO,GAAa,EAAKjH,MAAM8C,QAC1B,QAAEqS,GAAY,EAAK5U,OACnB,QAAE6U,EAAF,KAAWC,GAASF,EACpBG,QAAsBrO,EAAS8N,UAAU,CAC9CE,KACAG,UACAC,OACAL,SACAhE,gBAED,EAAK5Q,SAAS,CAAEkV,mBAxGK,KA2GtBC,WAAa,KACZpV,KAAKC,SAAS,CACbkV,cAAe,KACfH,QAAS,CACRC,QAAS,GACTC,KAAM,OAhHa,KAqHnBG,iBAAmBnP,eAAOjE,GACtB,MAAM,UAAEQ,GAAc,EAAK5C,MAAM8C,QAC3B,KAAEyD,EAAO,IAAO,EAAKvG,MACrBgV,EAASzO,EAAK3B,GACpBoM,EAAc5O,EAAE8F,OAAOwB,QAAQ,UAAUtB,QAAQ8M,aACjD,aAAEO,GAAiB,EAAKlV,OACxB,KAAE8U,GAASI,EACXC,QAA6B9S,EAAU4S,iBAAiB,CAC7DH,OACAL,SACAhE,gBAED,EAAK5Q,SAAS,CAAEsV,0BAjIK,KAoInBC,kBAAoB,KACtBxV,KAAKC,SAAS,CACbqV,aAAc,CACbJ,KAAM,OAvIa,KA4InBlF,aAAe9J,gBAAO,OAAE+J,IAC1B,MAAM,UAAExN,GAAc,EAAK5C,MAAM8C,QACrB,KAAEyD,EAAO,IAAO,EAAKvG,MACrB6G,EAASN,EAAK3B,SAEpBhC,EAAUyN,cAAc,CAC7BzL,GAAIiC,EACJyJ,QAASF,EAAO3O,MAChB8O,cAAe,EAAF,GASRH,MA7Je,KAkKnBwF,WAAavP,eAAO8H,EAAMmC,GACtBzP,aAAa,EAAKgV,iBAClB,EAAKA,gBAAkB7U,WAAW,IAAM,EAAK8U,aAAa3H,EAAMmC,GAAU,MApK3D,KAuKnBwF,aAAezP,eAAO8H,EAAMmC,GACxB,MAAMyF,EAAQC,OAAO7H,GAAMY,MAAM,MACjC,IAAIkH,EAAU,GACd,MAAMC,EAAW,GAGXC,EAAYJ,EAAM,GAEpBE,EADAE,EAAUC,MAAM,MACND,EAAUpH,MAAM,MACnBoH,EAAUC,MAAM,KACbD,EAAUpH,MAAM,KAEhBoH,EAAUpH,MAAM,KAI9B,IAAK,IAAIsH,EAAI,EAAGC,EAAIP,EAAMpQ,OAAQ0Q,EAAIC,EAAGD,GAAK,EAAG,CAC7C,MAAME,EAAOR,EAAMM,GACnB,IAAIG,EAEAA,EADAD,EAAKH,MAAM,MACFG,EAAKxH,MAAM,MACbwH,EAAKH,MAAM,KACTG,EAAKxH,MAAM,KAEXwH,EAAKxH,MAAM,KAExB,MAAM0H,EAAa,GACnBD,EAAOxH,QAAQ,CAAC0H,EAAGxL,KACf,IAAIyL,EAAMD,EACW,UAAjBT,EAAQ/K,KACRyL,EAAMD,EAAEE,eAEZH,EAAWR,EAAQ/K,IAAQyL,IAE/BT,EAASjH,KAAKwH,GAGlB,MAAM,UAAE7T,GAAc,EAAK5C,MAAM8C,QAC3B,KAAEyD,EAAO,IAAO,EAAKvG,MAG3B,OADA4C,EAAUiU,uBAAuB,CAAEjS,GADpB2B,EAAK3B,GAC2B0L,UAAS7I,YAAayO,KAC9D,GAhNQ,KAmNnBY,cAAiB1U,IACbA,EAAEC,kBAERlC,KAAKC,SAAS,CAAElB,QADAkD,EAAE8F,OAAOC,cAAcC,QAAQ2O,MAAQ3U,EAAE8F,OAAOE,QAAQ2O,QArNnD,KA6NtBtN,cAAiBrH,IAChB,MAAMgF,EAAkBhF,EAAE8F,OAAOwB,QAAQ,UAAUtB,QAAQxD,IACrD,SAAEqC,GAAa9G,KAAKH,MAAM8C,OAChCmE,EAAS0C,sBAAsBvC,GAAiB,IAhO3B,KAmOnB4P,kBAAoB,KAChB7W,KAAKC,SAAS,CAAE6W,aAAc,MApOf,KAuOnBC,aAAe7Q,eAAOjE,GAClB,MAAM,GAAEwC,EAAF,OAAMuS,EAAN,KAAcpS,EAAd,UAAoBf,EAApB,KAA+Bb,GAASf,EAAE8F,OAAOwB,QAAQ,UAAUtB,SACnE,SAAEgP,EAAF,YAAYC,GAAgB,EAAK9W,OACjC,gBAAE+W,EAAF,UAAmBzU,GAAc,EAAK7C,MAAM8C,QAClD,KAAEO,EAAO,IAAOR,EAEV0U,EAAU,CACZ3S,GAAIvB,EAAKuB,GACTL,UAAWlB,EAAKkB,UAChBC,SAAUnB,EAAKmB,SACfvF,MAAOoE,EAAKpE,MACZ4E,MAAOR,EAAKQ,OAGV2T,EAAU,CACZ5S,KACAyO,OAAQ8D,EACRpS,OACAf,YACAb,QAIEsU,EAAc,EAAH,CACbC,UAAW,YAFOtY,IAAK8N,eAAekK,EAAUxS,IAAO,IAMrDuJ,EAAO,CAAC,CACV4E,IAAK,EAAF,GAAOyE,GACVG,QAAS,EAAF,GAAOF,GACdG,WAAY,EAAF,GAAOL,KAGhBF,EAAYF,KACbE,EAAYF,GAAU,IAE1BE,EAAYF,GAAQlI,KAApB,OACI4I,KAAM,IAAIlX,MACP6W,GACAC,GACAF,UAGDD,EAAgBQ,OAAO,CAAE3J,gBACxBiJ,EAASxS,GAChB,EAAKxE,SAAS,CAAEgX,cAnRhBjX,KAAKI,MAAQ,CACTwX,eAAgB,GAChB5D,gBAAiB,GACjBM,qBAAsB,GACtBI,gBAAiB,GACjBM,QAAS,GACTM,aAAc,GACdvW,QAAS,YACTkY,SAAU,GACVY,UAAW,GACXX,YAAa,IAEvBlX,KAAKqL,SAAW,GACVrL,KAAKW,YAAc,GACnBX,KAAK0V,gBAAkB,KAwQ3B1U,SACI,MAAM,qBACFsT,EAAuB,GADrB,0BACyBE,EAA4B,GADrD,gBACyDE,EAAkB,GAD3E,QAEFM,EAAU,GAFR,aAEYM,EAAe,GAF3B,qBAGFC,EAHE,cAGoBJ,EAHpB,QAGmCpW,EAHnC,aAG4C+X,EAH5C,SAIFG,EAAW,GAJT,UAKFY,EAAY,GALV,YAMFX,EAAc,IACdlX,KAAKI,OACT,UAAEsC,EAAF,UAAaD,EAAb,SAAwBqE,GAAa9G,KAAKH,MAAM8C,QAChD,KAAEO,EAAO,GAAT,MAAagH,EAAQ,GAArB,QAAyBtH,EAAzB,aAAkCkV,GAAiBpV,GAC7C,SAAEyH,EAAW,MAASjH,GACtB,eAAE0U,EAAF,gBAAkB5D,EAAlB,sBAAmC+D,EAAnC,iBAA0D/Q,EAAmB,IAAOF,GAE1F,KAAEV,EAAO,IAAOpG,KAAKH,MASfmY,EAAeC,IAC1B,GAAInB,EAAc,CACL,MAAMoB,EAAQ,IAAIC,OAAQ,GAAErB,EAAasB,QAAQ,sBAAuB,IAAO,KAC3F,OAAQF,EAAMG,KAAKJ,EAAE3V,MAAQ4V,EAAMG,KAAKJ,EAAE7T,YAAc8T,EAAMG,KAAKJ,EAAE5T,UAEtE,OAAO,GAGF,OAAQ,mBACJ,mBAAK/C,MAAM,OACP,mBAAKA,MAAM,uEACP,kBAAIA,MAAM,QAAO,YAAC,IAAD,CAAMmD,GAAG,iBAAT,eAErB,mBAAKnD,MAAM,uEAEP,mBAAKA,MAAM,yBACP,mBACIA,MAAM,wCACN2C,MAAM,kDAELmC,EAAKe,SAAWf,EAAKe,QAAQwD,KAAK,CAACC,EAAGC,IAAMD,EAAEE,SAAWD,EAAEC,UAAU1F,IAAI,CAACiC,EAAc0D,IAAQ,mBAC7F,mBAAKzJ,MAAM,iBACP,sBACI0J,KAAK,SACL1J,MAAQ,iBAAwB,IAARyJ,GAAa,uBAAuBA,IAAQ3E,EAAKe,QAAQ3B,OAAS,GAAK,qCAAqCwB,EAAiBiE,QAAQ5D,EAAa5C,KAAO,EAAI,cAAgB,oCACrMR,MAAM,6CACNO,QAASxE,KAAKsJ,cACd4B,UAAS7D,EAAa5C,IAErB4C,EAAanD,YAOlC,mBAAK5C,MAAM,YACP,mBAAKA,MAAM,kBACP,mBAAKA,MAAM,eACP,qBAAOA,MAAM,+BAA+B0J,KAAK,OAAOoH,YAAY,iBAAiBhK,MAAO0O,EAAc5E,QAASoG,YAAUtY,KAAM,kBAClI8W,GAAgB,mBAAKxV,MAAM,sBACxB,mBAAKA,MAAM,mBAAmBkD,QAASxE,KAAK6W,mBAA5C,SAMfzQ,EAAKe,SAAWf,EAAKe,QAAQC,OAtDjB6Q,KAC1BjR,EAAiBxB,OAAS,IACtBwB,EAAiBiE,QAAQgN,EAAExT,KAAO,GAoD6BkG,KAAK,CAACC,EAAGC,IAAMD,EAAEE,SAAWD,EAAEC,UAAU1F,IAAIiC,GAAgB,mBAC7GzE,GAAW,oBAAMtB,MAAM,eAAZ,oBACU+F,EAAaC,aAAeD,EAAaC,YAAYF,OAAOvE,GAAUA,EAAOK,MAAMsC,QAEzG,sBAAK6B,EAAanD,MAAlB,IAA0BmD,EAAakR,WAAa,wBAC9C,oBAAMjX,MAAM,uBACTrC,IAAK2S,WAAY,GAAEvK,EAAakR,aAAalR,EAAamR,WAAa,aAAc,CAAEhF,OAAQrJ,EAAUsJ,QAAQ,EAAOC,KAAM,UAAWC,OAAQ,YADpJ,MACqK1U,IAAK2S,WAAY,GAAEvK,EAAaoR,WAAWpR,EAAaqR,SAAW,aAAc,CAAElF,OAAQrJ,EAAUsJ,QAAQ,EAAOC,KAAM,UAAWC,OAAQ,eAIvT/Q,GAAW,mBACR,iBAAGtB,MAAM,OAAOoD,KAAO,aAAY0B,EAAK3B,MAAM4C,EAAa5C,MAA3D,aADQ,KAER,iBAAGnD,MAAM,OAAOoD,KAAO,YAAW0B,EAAK3B,QAAvC,eAFQ,MAKZ,mBAAKnD,MAAM,oBACP,qBAAOA,MAAM,gCACT,yBACI,sBACI,kBAAIqX,MAAM,OAAV,KACA,kBAAIA,MAAM,MAAM1U,MAAM,mBAAkB,YAAC,IAAD,CAAMQ,GAAG,cAAT,WAGhD,yBACK4C,EAAaC,aAAeD,EAAaC,YAAYF,OAAO4Q,GAAarN,KAAKiJ,GAAOxO,IAAI,CAACvC,EAAQkI,KAC/F,MAAM6N,EAAcnW,EAAUQ,YAAYJ,EAAOG,MAC3C6V,EAAcpW,EAAUoW,YAAYD,GACpCE,EAAoBjW,EAAOkW,eAEjC,OAAQ,mBACJ,kBAAIvU,QAASxE,KAAK+T,qBAAsB7I,UAASrI,EAAO4B,IACpD,kBAAIkU,MAAM,OACL9V,EAAOP,IAAM,mBACTO,EAAOP,KACN,mBACF,oBAAMhB,MAAM,kCAAkCyJ,EAAM,KAG5D,kBACIzJ,MAAQ,IAAEsW,EAAe/U,EAAO4B,IAAM,mBAAqB,IAC3DR,MAAQ,IAAE2T,EAAe/U,EAAO4B,KAAOsT,EAAsBlV,EAAO4B,IAAM,GAAK,wBAE9EqT,GAAgB,mBACZjV,EAAOG,KAAO,mBACX,sBAAQ1B,MAAM,0CAA0CkD,QAASxE,KAAKmU,0BAClE,iBAAG7S,MAAM,qBAEX,mBACF,sBAAQA,MAAM,6DAA6DkD,QAASvC,GAAKA,EAAEC,mBACvF,iBAAGZ,MAAM,qBAGhBuX,EAAc,mBACX,sBAAQvX,MAAM,0CAA0CkD,QAASvC,GAAKA,EAAEC,mBACpE,iBAAGZ,MAAM,qBAEX,mBACF,sBAAQA,MAAM,oDAAoDkD,QAASvC,GAAKA,EAAEC,mBAC9E,iBAAGZ,MAAM,qBAGhBwX,EAAoB,mBACjB,sBAAQxX,MAAM,0CAA0CkD,QAASvC,GAAKA,EAAEC,mBACpE,iBAAGZ,MAAM,yBAEX,mBACF,sBAAQA,MAAM,oDAAoDkD,QAASvC,GAAKA,EAAEC,mBAC9E,iBAAGZ,MAAM,0BAIpBsB,GAAW,mBACR,sBAAQtB,MAAM,kDAAkDkD,QAASxE,KAAKiU,qBAC1E,iBAAG3S,MAAM,sBAEZuB,EAAO8O,eAAiB,mBACrB,oBAAMrQ,MAAM,eACR,iBAAGA,MAAM,8BAA8B,yBAG/C,qBAAOA,MAAM,eACRuB,EAAOmW,YAAc,mBAAE,oBAAM1X,MAAM,cAAZ,eAA2C,uBAA7C,IAAqDuB,EAAOmW,WAAW,wBAC5FnW,EAAOoW,aAAe,mBAAE,oBAAM3X,MAAM,cAAZ,gBAA4C,uBAA9C,IAAsDuB,EAAOoW,YAAY,wBAC/FpW,EAAOqW,oBAAsB,mBAAE,oBAAM5X,MAAM,cAAZ,uBAAmD,uBAArD,IAA6DuB,EAAOqW,mBAAmB,0BAG5HtW,GAAWwD,EAAKsB,SAAW,GAAK,mBAC7B,oBAAMpG,MAAM,gCAAgC2C,MAAM,qBAC7CpB,EAAOK,MAAQ,iBAAG5B,MAAM,2BACxBuB,EAAO4P,aAAe,iBAAGnR,MAAM,wBAAwB6X,IAAKla,IAAKyT,QAAQ7P,EAAO8P,qBAIxFiF,EAAe/U,EAAO4B,IAAM,mBACxB5B,EAAOsB,MAAQ,oBAAM7C,MAAM,QAAQuB,EAAOsB,MAC1CtB,EAAOuB,UAAY,mBACfvB,EAAOuB,UADQ,IACIvB,EAAOwB,SAAS,wBAClC,mBACDxB,EAAO+B,MAEZ,oBAAMtD,MAAM,cAAcsX,EAAYhU,MAAY,uBAClD,qBAAOtD,MAAM,cAAcuB,EAAOyB,YAAmB,uBACpDzB,EAAOyN,UAAY,iBAAGhP,MAAM,OAAOoD,KAAMpG,IAAG8a,eAAevW,EAAOyN,UAAW+I,QAAM,EAACtR,OAAO,SAASuR,IAAI,cAAa,iBAAGhY,MAAM,qBAC9HuB,EAAO0N,WAAa,iBAAGjP,MAAM,OAAOoD,KAAMpG,IAAGib,gBAAgB1W,EAAO0N,WAAY8I,QAAM,EAACtR,OAAO,SAASuR,IAAI,cAAa,iBAAGhY,MAAM,sBAA0B,uBAE3JsB,GAAW,mBACPC,EAAOP,KAAO,mBAAE,iBAAGhB,MAAM,uBAAX,IAAoCuB,EAAOP,KACzDO,EAAO2V,WAAa,mBAAE,iBAAGlX,MAAM,sBAAX,IAAmCrC,IAAKyT,QAAQ7P,EAAO2V,aAG/E3V,EAAO2W,QAAU,mBAAKlY,MAAM,uBACzB,iBAAGA,MAAM,+BADK,IAC4BuB,EAAO2W,OAChD3W,EAAO4W,WAAa,mBACjB,iBAAGnY,MAAM,gCAGhBuB,EAAO6W,QAAU,mBAAKpY,MAAM,uBAAsB,iBAAGA,MAAM,+BAA1C,IAA2EuB,EAAO6W,QACnG7W,EAAO8W,QAAU,mBAAKrY,MAAM,uBAAsB,iBAAGA,MAAM,+BAA1C,IAA2EuB,EAAO8W,SAElG,mBACD9W,EAAO2W,QAAU,oBAAMlY,MAAM,2BAA2B2C,MAAM,qBAC3D,iBAAG3C,MAAM,kBACRuB,EAAO4W,WAAa,mBACjB,iBAAGnY,MAAM,gCAGjB,wBACKuB,EAAOsB,MAAQ,oBAAM7C,MAAM,QAAQuB,EAAOsB,MAC1CtB,EAAOuB,UAAY,mBACfvB,EAAOuB,UADQ,IACIvB,EAAOwB,SAAS,wBAClC,mBACDxB,EAAO+B,MAEZ,qBAAOtD,MAAM,cAAcuB,EAAOyB,YAAmB,yBAM5DwT,GAAgBC,EAAsBlV,EAAO4B,KAAO,mBACjD,YAAC,IAAD,CAAgBmV,WAAY,MAAOC,SAAU,WAC7C,mBAAKvY,MAAM,wBAAwB2C,MAAM,oBACrC,mBACI3C,MAAM,wCACN2C,MAAM,kDAEN,mBAAK3C,MAAM,iBACP,sBACIA,MAAQ,uDAAkE,cAAZvC,EAA0B,cAAgB,oCACxGkF,MAAM,6CACN6V,YAAU,YACVtV,QAASxE,KAAK2W,eACjB,iBAAGrV,MAAM,mBALV,IAK8B,YAAC,IAAD,CAAMmD,GAAG,qBAAT,cAElC,mBAAKnD,MAAM,iBACP,sBACIA,MAAQ,qCAAgD,aAAZvC,EAAyB,cAAgB,oCACrFkF,MAAM,6CACN6V,YAAU,WACVtV,QAASxE,KAAK2W,eACjB,iBAAGrV,MAAM,uBALV,IAKkC,YAAC,IAAD,CAAMmD,GAAG,oBAAT,cAEtC,mBAAKnD,MAAM,iBACP,sBACIA,MAAQ,wDAAmE,cAAZvC,EAA0B,cAAgB,oCACzGkF,MAAM,6CACN6V,YAAU,YACVtV,QAASxE,KAAK2W,eACjB,iBAAGrV,MAAM,0BALV,IAKqC,YAAC,IAAD,CAAMmD,GAAG,qBAAT,iBAKpC,cAAZ1F,GAA2B,mBACxB,kBAAIuC,MAAM,sBAAV,uBACA,mBAAKA,MAAM,mBACX,mBAAKA,MAAM,OACNsX,GAAeA,EAAYzT,KAAOyT,EAAYzT,KAAKC,IAAIwN,IACpD,IAAImH,EAIJ,OAHInB,GAAeA,EAAYoB,WAC3BD,EAAcnB,EAAYoB,SAAS5S,OAAOmP,GAAKA,EAAErD,SAAWN,EAAIM,SAE5D,mBACJ,mBAAK5R,MAAM,sBACP,mBAAKA,MAAM,yCACP,mBACIA,MAAQ,oFACR2C,OAAU2O,EAAIlP,MAAS,0BAAyBkP,EAAIlP,MAAMmP,yCAA2C,IAA7F,mCAEND,EAAIlP,OAAS,oBAAMpC,MAAM,sBAAsB2C,MAAM,oBAAoBhF,IAAKiP,QAAQ0E,EAAIhO,MAAM,KAEtG,yBACI,oBAAMtD,MAAM,2BAA2B2C,MAAQ,gBAAgB2O,EAAIhO,MAAY,yBAEjFgO,EAAIE,OAASF,EAAIK,SAAW,yBAC1B,qBAAO3R,MAAM,kFAAkF2C,MAAM,6CAChG2O,EAAIE,OAAS,oBAAMxR,MAAM,mBAAmBrC,IAAK8T,IAAIH,EAAIE,MAAOF,EAAII,WACpEJ,EAAIK,QAAU,mBAAkB,WAAfL,EAAIK,OAAsB,iBAAG3R,MAAM,iBAAoB,iBAAGA,MAAM,oBAI9F,mBAAKA,MAAM,mBACP,mBAAKA,MAAM,2BACP,iBAAGA,MAAM,gCADb,IAC+CsR,EAAIM,QAGlD6G,GAAeA,EAAY3U,IAAK+N,GAEzB,mBAAK7R,MAAM,8BACP,oBAAMA,MAAQ,gBAAc6R,EAAIC,SAAW,UAAY,YACnD,oBAAM9R,MAAM,uBACR,iBAAGA,MAAM,0BADb,IACyCrC,IAAKyT,QAAQS,EAAIE,aAAaC,aAAa,GAAO,GAAO,GAC7FH,EAAIC,UAAY,mBACb,uBADa,IAEZ,YAAC,IAAD,CAAM3O,GAAG,uBAAT,UAFY,KAEmCxF,IAAKwG,OAAO0N,EAAII,eAAgB,GAFnE,IAEuE,YAAC,IAAD,CAAM9O,GAAG,iCAAT,aAFvE,OAOzB,mBAAKnD,MAAM,iBACP,qBAAOA,MAAM,qBACR6R,EAAIE,aAAazO,KAAK,uBACvB,wBAAOuO,EAAI8G,aAAmB,gCAc7D,mBACD,mBAAK3Y,MAAM,kEACP,mBAAKA,MAAM,0BACP,mBAAKA,MAAM,aAAY,iBAAGA,MAAM,gBAChC,sBAAI,YAAC,IAAD,CAAMmD,GAAG,uBAAT,iCAQX,aAAZ1F,GAA0B,mBACvB,kBAAIuC,MAAM,sBAAV,YACA,mBAAKA,MAAM,OACNsX,GAAeA,EAAYzT,KAAOyT,EAAYzT,KAAKC,IAAIwN,IACpD,IAAIsH,EAIJ,OAHItB,GAAeA,EAAYpB,UAC3B0C,EAAatB,EAAYpB,QAAQpQ,OAAOmP,GAAKA,EAAErD,SAAWN,EAAIM,SAE1D,mBACJ,mBAAK5R,MAAM,sBACP,mBAAKA,MAAM,yCACP,mBACIA,MAAQ,oFACR2C,OAAU2O,EAAIlP,MAAS,0BAAyBkP,EAAIlP,MAAMmP,yCAA2C,IAA7F,mCAEND,EAAIlP,OAAS,oBAAMpC,MAAM,sBAAsB2C,MAAM,oBAAoBhF,IAAKiP,QAAQ0E,EAAIhO,MAAM,KAEtG,yBACI,oBAAMtD,MAAM,2BAA2B2C,MAAQ,gBAAgB2O,EAAIhO,MAAY,yBAEjFgO,EAAIE,OAASF,EAAIK,SAAW,yBAC1B,qBAAO3R,MAAM,kFAAkF2C,MAAM,6CAChG2O,EAAIE,OAAS,oBAAMxR,MAAM,mBAAmBrC,IAAK8T,IAAIH,EAAIE,MAAOF,EAAII,WACpEJ,EAAIK,QAAU,mBAAkB,WAAfL,EAAIK,OAAsB,iBAAG3R,MAAM,iBAAoB,iBAAGA,MAAM,oBAI9F,mBAAKA,MAAM,mBACP,mBAAKA,MAAM,2BACP,iBAAGA,MAAM,gCADb,IAC+CsR,EAAIM,OAAOiH,OAAO,IAEjE,mBAAK7Y,MAAM,UACN4Y,GAAcA,EAAW1U,OAAS,GAAK0U,EAAW9U,IAAIoS,GAAW,mBAC9D,mBAAKlW,MAAM,qBAEP,mBAAKA,MAAM,qBACP,yBACI,oBAAMA,MAAM,eAAekW,EAAQD,WAAa,mBAAGC,EAAQD,YAC1DtY,IAAKyT,QAAQ8E,EAAQE,MAF1B,OAEqCF,EAAQ4C,oBAF7C,IAEmE5C,EAAQ6C,qBAG/E,mBAAK/Y,MAAM,yCACNkW,EAAQ8C,WAAa,GAAK,oBAAMhZ,MAAM,QAAO,oBAAMA,MAAM,cAAZ,OAAnB,IAAwDkW,EAAQ8C,YAC1F9C,EAAQ+C,UAAY,GAAK,oBAAMjZ,MAAM,QAAO,oBAAMA,MAAM,cAAZ,OAAnB,IAAwDkW,EAAQ+C,WACzF/C,EAAQgD,OAAS,GAAI,oBAAMlZ,MAAM,QAAO,iBAAGA,MAAM,oCAA5B,IAAkEkW,EAAQgD,OAA1E,IAAkF,oBAAMlZ,MAAM,cAAZ,OACvGkW,EAAQiD,mBAAqB,GAAK,oBAAMnZ,MAAM,QAAO,oBAAMA,MAAM,cAAZ,QAAnB,IAAyDkW,EAAQiD,qBAExG,mBAAKnZ,MAAM,UACNkW,EAAQkD,iBAAmB,oBAAMpZ,MAAM,QAAO,oBAAMA,MAAM,cAAZ,UAAnB,IAA2DkW,EAAQkD,qBAI1GxD,EAAYtE,EAAIM,SAAWgE,EAAYtE,EAAIM,QAAQ1N,OAAS,GAAK0R,EAAYtE,EAAIM,QAAQ9N,IAAIoS,GAAW,mBACrG,mBAAKlW,MAAM,qBAEP,mBAAKA,MAAM,qBACP,yBACI,oBAAMA,MAAM,eAAekW,EAAQD,WAAa,mBAAGC,EAAQD,YAC1DtY,IAAKyT,QAAQ8E,EAAQE,MAF1B,OAEqCF,EAAQ4C,oBAF7C,IAEmE5C,EAAQ6C,qBAG/E,mBAAK/Y,MAAM,yCACNkW,EAAQ8C,WAAa,GAAK,oBAAMhZ,MAAM,QAAO,oBAAMA,MAAM,cAAZ,OAAnB,IAAwDkW,EAAQ8C,YAC1F9C,EAAQ+C,UAAY,GAAK,oBAAMjZ,MAAM,QAAO,oBAAMA,MAAM,cAAZ,OAAnB,IAAwDkW,EAAQ+C,WACzF/C,EAAQgD,OAAS,GAAI,oBAAMlZ,MAAM,QAAO,iBAAGA,MAAM,oCAA5B,IAAkEkW,EAAQgD,OAA1E,IAAkF,oBAAMlZ,MAAM,cAAZ,OACvGkW,EAAQiD,mBAAqB,GAAK,oBAAMnZ,MAAM,QAAO,oBAAMA,MAAM,cAAZ,QAAnB,IAAyDkW,EAAQiD,qBAExG,mBAAKnZ,MAAM,UACNkW,EAAQkD,iBAAmB,oBAAMpZ,MAAM,QAAO,oBAAMA,MAAM,cAAZ,UAAnB,IAA2DkW,EAAQkD,sBAK/G,mBAAKpZ,MAAM,qBACP,yBACI,qBAAOA,MAAM,2BAA2BoQ,IAAI,cAA5C,cACA,sBAAQpQ,MAAM,eAAemD,GAAG,aAAayN,QAASoG,YAAUtY,KAAO,YAAW4S,EAAInO,iBAAkB2D,MAAOnJ,IAAK8N,eAAekK,EAAarE,EAAInO,GAAN,gBAC1I,sBAAQ2D,MAAM,IAAd,uBACA,sBAAQA,MAAM,OAAd,kBAIZ,mBAAK9G,MAAM,oBACP,yBACI,qBAAOA,MAAM,2BAA2BoQ,IAAI,UAA5C,UACA,qBAAO1G,KAAK,SAAS1J,MAAM,eAAemD,GAAG,SAASyN,QAASoG,YAAUtY,KAAO,YAAW4S,EAAInO,aAAc2D,MAAOnJ,IAAK8N,eAAekK,EAAarE,EAAInO,GAAN,eAG3J,mBAAKnD,MAAM,oCACP,yBACI,qBAAOA,MAAM,2BAA2BoQ,IAAI,aAA5C,cACA,qBAAO1G,KAAK,OAAO1J,MAAM,eAAemD,GAAG,YAAYyN,QAASoG,YAAUtY,KAAO,YAAW4S,EAAInO,gBAAiB2D,MAAOnJ,IAAK8N,eAAekK,EAAarE,EAAInO,GAAN,kBAG/J,mBAAKnD,MAAM,oBACP,yBACI,qBAAOA,MAAM,2BAA2BoQ,IAAI,sBAA5C,OACA,qBAAO1G,KAAK,SAAS1J,MAAM,eAAemD,GAAG,qBAAqByN,QAASoG,YAAUtY,KAAO,YAAW4S,EAAInO,yBAA0B2D,MAAOnJ,IAAK8N,eAAekK,EAAarE,EAAInO,GAAN,2BAGnL,mBAAKnD,MAAM,qBACP,yBACI,qBAAOA,MAAM,2BAA2BoQ,IAAI,mBAA5C,oBACA,qBAAO1G,KAAK,OAAO1J,MAAM,eAAemD,GAAG,kBAAkByN,QAASoG,YAAUtY,KAAO,YAAW4S,EAAInO,sBAAuB2D,MAAOnJ,IAAK8N,eAAekK,EAAarE,EAAInO,GAAN,uBAEvK,qBAAOA,GAAG,sBAAsBnD,MAAM,wBAAtC,+DAEJ,mBAAKA,MAAM,qBACP,sBACIA,MAAM,0BACNkD,QAASxE,KAAK+W,aACd7L,UAAS0H,EAAInO,GACbkW,cAAa/H,EAAIM,OACjB0H,YAAWhC,EAAYnU,GACvBoW,YAAWjI,EAAIhO,KACfkW,iBAAgBlI,EAAImI,WAPxB,yBAaf,mBACD,mBAAKzZ,MAAM,kEACP,mBAAKA,MAAM,0BACP,mBAAKA,MAAM,aAAY,iBAAGA,MAAM,gBAChC,sBAAI,YAAC,IAAD,CAAMmD,GAAG,uBAAT,gCAOX,cAAZ1F,GAA2B,mBACxB,kBAAIuC,MAAM,sBAAV,aACA,mBAAKA,MAAM,OACNsX,GAAeA,EAAYzT,KAAOyT,EAAYzT,KAAKC,IAAIwN,GAC5C,mBACJ,mBAAKtR,MAAM,sBACP,mBAAKA,MAAM,yCACP,mBACIA,MAAQ,oFACR2C,OAAU2O,EAAIlP,MAAS,0BAAyBkP,EAAIlP,MAAMmP,yCAA2C,IAA7F,mCAEND,EAAIlP,OAAS,oBAAMpC,MAAM,sBAAsB2C,MAAM,oBAAoBhF,IAAKiP,QAAQ0E,EAAIhO,MAAM,KAEtG,yBACI,oBAAMtD,MAAM,2BAA2B2C,MAAQ,gBAAgB2O,EAAIhO,MAAY,yBAEjFgO,EAAIE,OAASF,EAAIK,SAAW,yBAC1B,qBAAO3R,MAAM,kFAAkF2C,MAAM,6CAChG2O,EAAIE,OAAS,oBAAMxR,MAAM,mBAAmBrC,IAAK8T,IAAIH,EAAIE,MAAOF,EAAII,WACpEJ,EAAIK,QAAU,mBAAkB,WAAfL,EAAIK,OAAsB,iBAAG3R,MAAM,iBAAoB,iBAAGA,MAAM,oBAI9F,mBAAKA,MAAM,mBACP,mBAAKA,MAAM,2BACP,iBAAGA,MAAM,gCADb,IAC+CsR,EAAIM,OAAOiH,OAAO,IAEjE,mBAAK7Y,MAAM,oBACP,yBACI,qBAAOA,MAAM,sBAAsBoQ,IAAI,UAAvC,UACA,qBAAO1G,KAAK,SAAS1J,MAAM,eAAemD,GAAG,aAGrD,mBAAKnD,MAAM,oCACP,yBACI,qBAAOA,MAAM,sBAAsBoQ,IAAI,gBAAvC,kBACA,qBAAO1G,KAAK,OAAO1J,MAAM,eAAemD,GAAG,mBAGnD,mBAAKnD,MAAM,oBACP,yBACI,qBAAOA,MAAM,sBAAsBoQ,IAAI,OAAvC,OACA,qBAAO1G,KAAK,SAAS1J,MAAM,eAAemD,GAAG,UAGrD,mBAAKnD,MAAM,qBACP,yBACI,qBAAOA,MAAM,sBAAsBoQ,IAAI,WAAvC,oBACA,qBAAO1G,KAAK,OAAO1J,MAAM,eAAemD,GAAG,aAE/C,qBAAOA,GAAG,cAAcnD,MAAM,wBAA9B,mEAKf,mBACD,mBAAKA,MAAM,kEACP,mBAAKA,MAAM,0BACP,mBAAKA,MAAM,aAAY,iBAAGA,MAAM,gBAChC,sBAAI,YAAC,IAAD,CAAMmD,GAAG,uBAAT,iCAQ1B7B,GAAWoR,EAAgBnR,EAAO4B,KAAQ,mBACxC,qCAEA,mBAAKnD,MAAM,uBACP,qBAAOA,MAAM,mCAAb,SACA,mBAAKA,MAAM,SACNuB,EAAO/D,QAIhB,mBAAKwC,MAAM,uBACP,qBAAOoQ,IAAI,MAAMpQ,MAAM,mCAAvB,OACA,mBAAKA,MAAM,SACP,qBAAO0J,KAAK,SAAS1J,MAAM,eAAemD,GAAG,MACzCuN,eAAc3K,EAAa5C,GAC3BwN,oBAAmBpP,EAAO4B,GAC1ByN,QAASlS,KAAK2U,gBACdvM,MAAOvF,EAAOP,QAI1B,mBAAKhB,MAAM,uBACP,qBAAOoQ,IAAI,YAAYpQ,MAAM,mCAA7B,aACA,mBAAKA,MAAM,SACP,qBAAO0J,KAAK,OAAO1J,MAAM,eAAemD,GAAG,YACvCuN,eAAc3K,EAAa5C,GAC3BwN,oBAAmBpP,EAAO4B,GAC1ByN,QAASlS,KAAK2U,gBACdvM,MAAOvF,EAAO2V,UAAYvZ,IAAKyT,QAAQ7P,EAAO2V,WAAW,GAAO,GAAO,GAAS,SAI5F,mBAAKlX,MAAM,uBACP,qBAAOoQ,IAAI,OAAOpQ,MAAM,mCAAxB,QACA,mBAAKA,MAAM,SACP,qBAAO0J,KAAK,SAAS1J,MAAM,eAAemD,GAAG,OACzCuN,eAAc3K,EAAa5C,GAC3BwN,oBAAmBpP,EAAO4B,GAC1ByN,QAASlS,KAAK2U,gBACdvM,MAAOvF,EAAOG,SAI1B,mBAAK1B,MAAM,uBACP,qBAAOoQ,IAAI,OAAOpQ,MAAM,mCAAxB,QACA,mBAAKA,MAAM,SACP,qBAAO0J,KAAK,SAAS1J,MAAM,eAAemD,GAAG,OACzCuN,eAAc3K,EAAa5C,GAC3BwN,oBAAmBpP,EAAO4B,GAC1ByN,QAASlS,KAAK2U,gBACdvM,MAAOvF,EAAOK,SAM1B,mBAAK5B,MAAM,uBACP,qBAAOoQ,IAAI,OAAOpQ,MAAM,mCAAxB,eACA,mBAAKA,MAAM,SACP,sBAAQA,MAAM,eAAemD,GAAG,aAC5BuN,eAAc3K,EAAa5C,GAC3BwN,oBAAmBpP,EAAO4B,GAC1ByN,QAASlS,KAAK2U,gBACdvM,MAAOvF,EAAOmW,YAEd,sBAAQ5Q,MAAM,IAAd,4BACA,sBAAQA,MAAM,MAAd,sBACA,sBAAQA,MAAM,OAAd,uBACA,sBAAQA,MAAM,OAAd,wBACA,sBAAQA,MAAM,OAAd,yBACA,sBAAQA,MAAM,MAAd,wBAIZ,mBAAK9G,MAAM,uBACP,qBAAOoQ,IAAI,cAAcpQ,MAAM,mCAA/B,gBACA,mBAAKA,MAAM,SACP,qBAAO0J,KAAK,OAAO1J,MAAM,eAAemD,GAAG,cACvCuN,eAAc3K,EAAa5C,GAC3BwN,oBAAmBpP,EAAO4B,GAC1ByN,QAASlS,KAAK2U,gBACdvM,MAAOvF,EAAOoW,gBAI1B,mBAAK3X,MAAM,uBACP,qBAAOoQ,IAAI,qBAAqBpQ,MAAM,mCAAtC,+BACA,mBAAKA,MAAM,SACP,qBAAO0J,KAAK,OAAO1J,MAAM,eAAemD,GAAG,qBACvCuN,eAAc3K,EAAa5C,GAC3BwN,oBAAmBpP,EAAO4B,GAC1ByN,QAASlS,KAAK2U,gBACdvM,MAAOvF,EAAOqW,mBAAqBja,IAAKyT,QAAQ7P,EAAOqW,oBAAoB,GAAO,GAAO,GAAQ,SAK7G,mBAAK5X,MAAM,uBACP,qBAAOoQ,IAAI,gBAAgBpQ,MAAM,mCAAjC,wBACA,mBAAKA,MAAM,SACP,qBAAO0J,KAAK,OAAO1J,MAAM,eAAemD,GAAG,gBACvCuN,eAAc3K,EAAa5C,GAC3BwN,oBAAmBpP,EAAO4B,GAC1ByN,QAASlS,KAAK2U,gBACdvM,MAAOvF,EAAO8O,cAAgB1S,IAAKyT,QAAQ7P,EAAO8O,eAAe,GAAO,GAAO,GAAQ,SAInG,mBAAKrQ,MAAM,uBACP,qBAAOoQ,IAAI,aAAapQ,MAAM,mCAA9B,cACA,mBAAKA,MAAM,SACP,qBAAO0J,KAAK,SAAS1J,MAAM,eAAemD,GAAG,aACzCuN,eAAc3K,EAAa5C,GAC3BwN,oBAAmBpP,EAAO4B,GAC1ByN,QAASlS,KAAK2U,gBACdvM,MAAOvF,EAAOmY,eAI1B,mBAAK1Z,MAAM,uBACP,qBAAOoQ,IAAI,YAAYpQ,MAAM,mCAA7B,SACA,mBAAKA,MAAM,SACP,qBAAO0J,KAAK,OAAO1J,MAAM,eAAemD,GAAG,YACvCuN,eAAc3K,EAAa5C,GAC3BwN,oBAAmBpP,EAAO4B,GAC1ByN,QAASlS,KAAK2U,gBACdvM,MAAOvF,EAAOwN,cAI1B,mBAAK/O,MAAM,uBACP,qBAAOoQ,IAAI,OAAOpQ,MAAM,mCAAxB,QACA,mBAAKA,MAAM,SACP,qBAAO0J,KAAK,OAAO1J,MAAM,eAAemD,GAAG,OACvCuN,eAAc3K,EAAa5C,GAC3BwN,oBAAmBpP,EAAO4B,GAC1ByN,QAASlS,KAAK2U,gBACdvM,MAAOvF,EAAO+B,SAI1B,mBAAKtD,MAAM,uBACP,qBAAOoQ,IAAI,YAAYpQ,MAAM,mCAA7B,WACA,mBAAKA,MAAM,SACP,qBAAO0J,KAAK,OAAO1J,MAAM,eAAemD,GAAG,YACvCuN,eAAc3K,EAAa5C,GAC3BwN,oBAAmBpP,EAAO4B,GAC1ByN,QAASlS,KAAK2U,gBACdvM,MAAOvF,EAAOuB,cAI1B,mBAAK9C,MAAM,uBACP,qBAAOoQ,IAAI,WAAWpQ,MAAM,mCAA5B,aACA,mBAAKA,MAAM,SACP,qBAAO0J,KAAK,OAAO1J,MAAM,eAAemD,GAAG,WACvCuN,eAAc3K,EAAa5C,GAC3BwN,oBAAmBpP,EAAO4B,GAC1ByN,QAASlS,KAAK2U,gBACdvM,MAAOvF,EAAOwB,aAI1B,mBAAK/C,MAAM,uBACP,qBAAOoQ,IAAI,UAAUpQ,MAAM,mCAA3B,WACA,mBAAKA,MAAM,SACP,qBAAO0J,KAAK,OAAO1J,MAAM,eAAemD,GAAG,UACvCuN,eAAc3K,EAAa5C,GAC3BwN,oBAAmBpP,EAAO4B,GAC1ByN,QAASlS,KAAK2U,gBACdvM,MAAOvF,EAAOoY,YAI1B,mBAAK3Z,MAAM,uBACP,qBAAOoQ,IAAI,aAAapQ,MAAM,mCAA9B,cACA,mBAAKA,MAAM,SACP,qBAAO0J,KAAK,OAAO1J,MAAM,eAAemD,GAAG,aACvCuN,eAAc3K,EAAa5C,GAC3BwN,oBAAmBpP,EAAO4B,GAC1ByN,QAASlS,KAAK2U,gBACdvM,MAAOvF,EAAOqY,eAI1B,mBAAK5Z,MAAM,uBACP,qBAAOoQ,IAAI,cAAcpQ,MAAM,mCAA/B,eACA,mBAAKA,MAAM,SACP,qBAAO0J,KAAK,OAAO1J,MAAM,eAAemD,GAAG,cACvCuN,eAAc3K,EAAa5C,GAC3BwN,oBAAmBpP,EAAO4B,GAC1ByN,QAASlS,KAAK2U,gBACdvM,MAAOvF,EAAOsY,gBAI1B,mBAAK7Z,MAAM,uBACP,qBAAOoQ,IAAI,OAAOpQ,MAAM,mCAAxB,gBACA,mBAAKA,MAAM,SACP,qBAAO0J,KAAK,OAAO1J,MAAM,eAAemD,GAAG,OACvCuN,eAAc3K,EAAa5C,GAC3BwN,oBAAmBpP,EAAO4B,GAC1ByN,QAASlS,KAAK2U,gBACdvM,MAAOvF,EAAOsB,SAI1B,mBAAK7C,MAAM,uBACP,qBAAOoQ,IAAI,cAAcpQ,MAAM,mCAA/B,qBACA,mBAAKA,MAAM,SACP,qBAAO0J,KAAK,OAAO1J,MAAM,eAAemD,GAAG,cACvCuN,eAAc3K,EAAa5C,GAC3BwN,oBAAmBpP,EAAO4B,GAC1ByN,QAASlS,KAAK2U,gBACdvM,MAAOvF,EAAOuY,gBAI1B,mBAAK9Z,MAAM,uBACP,qBAAOoQ,IAAI,YAAYpQ,MAAM,mCAA7B,aACA,mBAAKA,MAAM,SACP,qBAAO0J,KAAK,OAAO1J,MAAM,eAAemD,GAAG,YACvCuN,eAAc3K,EAAa5C,GAC3BwN,oBAAmBpP,EAAO4B,GAC1ByN,QAASlS,KAAK2U,gBACdvM,MAAOvF,EAAOwY,UAAYpc,IAAKyT,QAAQ7P,EAAOwY,WAAW,GAAO,GAAO,GAAQ,SAK3F,mBAAK/Z,MAAM,uBACP,qBAAOoQ,IAAI,aAAapQ,MAAM,mCAA9B,SACA,mBAAKA,MAAM,SACP,qBAAO0J,KAAK,OAAO1J,MAAM,eAAemD,GAAG,aACvCuN,eAAc3K,EAAa5C,GAC3BwN,oBAAmBpP,EAAO4B,GAC1ByN,QAASlS,KAAK2U,gBACdvM,MAAOvF,EAAOyB,eAI1B,mBAAKhD,MAAM,uBACP,qBAAOoQ,IAAI,WAAWpQ,MAAM,mCAA5B,YACA,mBAAKA,MAAM,SACP,qBAAO0J,KAAK,OAAO1J,MAAM,eAAemD,GAAG,WACvCuN,eAAc3K,EAAa5C,GAC3BwN,oBAAmBpP,EAAO4B,GAC1ByN,QAASlS,KAAK2U,gBACdvM,MAAOvF,EAAOyN,aAI1B,mBAAKhP,MAAM,uBACP,qBAAOoQ,IAAI,YAAYpQ,MAAM,mCAA7B,aACA,mBAAKA,MAAM,SACP,qBAAO0J,KAAK,OAAO1J,MAAM,eAAemD,GAAG,YACvCuN,eAAc3K,EAAa5C,GAC3BwN,oBAAmBpP,EAAO4B,GAC1ByN,QAASlS,KAAK2U,gBACdvM,MAAOvF,EAAO0N,cAoB1B,mBAAKjP,MAAM,uBACP,qBAAOoQ,IAAI,OAAOpQ,MAAM,mCAAxB,UACA,mBAAKA,MAAM,SACP,sBAAQA,MAAM,eAAemD,GAAG,QAAQsN,mBAAiB,YACrDC,eAAc3K,EAAa5C,GAC3BwN,oBAAmBpP,EAAO4B,GAC1ByN,QAASlS,KAAK2U,gBACdvM,MAAOvF,EAAOvB,OAEd,sBAAQ8G,MAAM,IAAd,2BACChC,EAAKe,SAAWf,EAAKe,QAAQwD,KAAK,CAACC,EAAGC,IAAMD,EAAEE,SAAWD,EAAEC,UAAU1F,IAAIiC,GAAgB,mBACtF,sBAAQe,MAAOf,EAAa5C,IAAK4C,EAAanD,MAA9C,MAAwDmD,EAAayD,SAArE,oBAAgGzD,EAAayK,WAAa1L,EAAK0L,UAA/H,aAMhB,mBAAKxQ,MAAM,uBACP,qBAAOoQ,IAAI,SAASpQ,MAAM,mCAA1B,WACA,mBAAKA,MAAM,SACP,qBAAO0J,KAAK,OAAO1J,MAAM,eAAemD,GAAG,SACvCuN,eAAc3K,EAAa5C,GAC3BwN,oBAAmBpP,EAAO4B,GAC1ByN,QAASlS,KAAK2U,gBACdvM,MAAOvF,EAAO2W,WAI1B,mBAAKlY,MAAM,uBACP,qBAAOoQ,IAAI,SAASpQ,MAAM,mCAA1B,WACA,mBAAKA,MAAM,SACP,qBAAO0J,KAAK,OAAO1J,MAAM,eAAemD,GAAG,SACvCuN,eAAc3K,EAAa5C,GAC3BwN,oBAAmBpP,EAAO4B,GAC1ByN,QAASlS,KAAK2U,gBACdvM,MAAOvF,EAAO6W,WAI1B,mBAAKpY,MAAM,uBACP,qBAAOoQ,IAAI,SAASpQ,MAAM,mCAA1B,WACA,mBAAKA,MAAM,SACP,qBAAO0J,KAAK,OAAO1J,MAAM,eAAemD,GAAG,SACvCuN,eAAc3K,EAAa5C,GAC3BwN,oBAAmBpP,EAAO4B,GAC1ByN,QAASlS,KAAK2U,gBACdvM,MAAOvF,EAAO8W,WAI1B,mBAAKrY,MAAM,uBACP,qBAAOoQ,IAAI,YAAYpQ,MAAM,mCAA7B,cACA,mBAAKA,MAAM,SACP,qBAAO0J,KAAK,OAAO1J,MAAM,eAAemD,GAAG,YACvCuN,eAAc3K,EAAa5C,GAC3BwN,oBAAmBpP,EAAO4B,GAC1ByN,QAASlS,KAAK2U,gBACdvM,MAAOvF,EAAO4W,UAAYxa,IAAKyT,QAAQ7P,EAAO4W,WAAW,GAAO,GAAO,GAAQ,SAK3F,mBAAKnY,MAAM,uBACP,mBAAKA,MAAM,SACP,sBAAQ0J,KAAK,SAAS1J,MAAM,6BACxBmD,GAAG,aACH2D,MAAM,IACN5D,QAASxE,KAAK2U,gBACd3C,eAAc3K,EAAa5C,GAC3BwN,oBAAmBpP,EAAO4B,IAL9B,0CAqBvC7B,GAAW,mBACP0R,EAAqBjN,EAAa5C,IAAM,mBACrC,mBAAKnD,MAAM,aACP,mBAAKA,MAAM,OACP,mBAAKA,MAAM,UACP,iDAA6B+F,EAAanD,OAC1C,mBAAK5C,MAAM,oBAAoB2C,MAAM,qBACjC,yBACKoD,EAAaiU,QAAUjU,EAAaiU,OAAOlW,IAAKtG,IAAU,0BAAKwC,MAAM,8BAClE,mBAAKA,MAAM,gBACP,mBAAKA,MAAM,oBAAX,SAGA,mBAAKA,MAAM,SACNrC,IAAK2S,WAAW9S,EAAM4Y,KAAM,CAAElE,OAAQrJ,EAAUsJ,QAAQ,EAAOC,KAAM,UAAWC,OAAQ,cAGjG,mBAAKrS,MAAM,gBACP,mBAAKA,MAAM,oBAAX,OAGA,mBAAKA,MAAM,SACNxC,EAAMgW,GAAG1P,IAAInD,GAAK,oBAAMX,MAAM,mCAAmCW,MAG1E,mBAAKX,MAAM,gBACP,mBAAKA,MAAM,oBAAX,YAGA,mBAAKA,MAAM,SACNxC,EAAMmW,UAGf,mBAAK3T,MAAM,YACP,mBAAKA,MAAM,oBAAX,SAGA,mBAAKA,MAAM,QACPia,wBAAyB,CAAEC,QA9rC5EC,EA8rC0F3c,EAAMoW,KA7rC1F,iBAATuG,EACHA,EAAKrD,QAAQ,QAAS,QAEvBqD,QAJR,IAAeA,MAqsC6B,mBAAKna,MAAM,kBACP,qBAAOoQ,IAAI,UAAUpQ,MAAM,uDAA3B,MACA,mBAAKA,MAAM,UACN+F,EAAaC,aAAeD,EAAaC,YAAYlC,IAAKvC,GAAW,mBAClE,oBAAMvB,MAAM,mCAAmCuB,EAAOuB,UAAtD,IAAkEvB,EAAOwB,SAAzE,KAAqFxB,EAAO/D,MAA5F,SAIZ,mBAAKwC,MAAM,kBACP,qBAAOoQ,IAAI,UAAUpQ,MAAM,uDAA3B,WACA,mBAAKA,MAAM,UACP,qBAAO0J,KAAK,OAAO1J,MAAM,eAAemD,GAAG,UACvCyN,QAASoG,YAAUtY,KAAM,mBACzBoI,MAAO4M,EAAQC,YAI3B,mBAAK3T,MAAM,kBACP,qBAAOoQ,IAAI,OAAOpQ,MAAM,uDAAxB,WACA,mBAAKA,MAAM,UACP,wBAAU0J,KAAK,OAAO1J,MAAM,eAAemD,GAAG,OAC1CiX,KAAK,KACLxJ,QAASoG,YAAUtY,KAAM,gBACzBoI,MAAO4M,EAAQE,QAGvB,mBAAK5T,MAAM,wBACN0T,EAAQE,MAAQ,YAAC,IAAD,CAAUrQ,SAAUmQ,EAAQE,KAAMjQ,aAAc3G,IAAG4G,yBAI3EiQ,GAAiB,mBACd,mBAAK7T,MAAQ,gBAAc6T,GAAiBA,EAAcwG,QAAU,IAAM,SAAW,WAAa9J,KAAK,SACnG,yBACI,uBAAM/L,KAAKC,UAAUoP,EAAe,KAAM,OAKtD,sBAAQ7T,MAAM,8BACV0J,KAAK,SACL4Q,UAASvU,EAAaC,aAAeD,EAAaC,YAAYlC,IAAIvC,GAAUA,EAAO/D,OACnF+c,mBAAkBxU,EAAa5C,GAC/BD,QAASxE,KAAK4U,WAEd,iBAAGtT,MAAM,uBANb,8BAQA,sBAAQA,MAAM,kCACV0J,KAAK,SACLxG,QAASxE,KAAKoV,YAEd,iBAAG9T,MAAM,iBAJb,iBAQJ,mBAAKA,MAAM,sBACP,sBAAQA,MAAM,sBAAsB0J,KAAK,SAASxG,QAASxE,KAAKqU,uBAAwByH,aAAYzU,EAAa5C,IAAjH,uBAIV,mBACF,mBAAKnD,MAAM,sBACP,sBAAQA,MAAM,sBAAsB0J,KAAK,SAASxG,QAASxE,KAAKqU,uBAAwByH,aAAYzU,EAAa5C,IAAjH,oCAEJ,mBAAKnD,MAAM,sBACP,sBAAQA,MAAM,sBAAsB0J,KAAK,SAASxG,QAASxE,KAAKuU,4BAA6BuH,aAAYzU,EAAa5C,IAAtH,4CAEJ,mBAAKnD,MAAM,sBACP,sBAAQA,MAAM,sBAAsB0J,KAAK,SAASxG,QAASxE,KAAKyU,kBAAmBqH,aAAYzU,EAAa5C,IAA5G,wBAIP+P,EAA0BnN,EAAa5C,IAAM,mBAC1C,mBAAKnD,MAAM,aACP,mBAAKA,MAAM,OACP,mBAAKA,MAAM,UACP,yDAAqC+F,EAAanD,OAClD,mBAAK5C,MAAM,kBACP,qBAAOoQ,IAAI,OAAOpQ,MAAM,uDAAxB,iBACA,mBAAKA,MAAM,UACP,wBAAU0J,KAAK,OAAO1J,MAAM,eAAemD,GAAG,OAC1CiX,KAAK,KACLxJ,QAASoG,YAAUtY,KAAM,qBACzBoI,MAAOkN,EAAaJ,QAG5B,mBAAK5T,MAAM,wBACNgU,EAAaJ,MAAQ,YAAC,IAAD,CAAUrQ,SAAUyQ,EAAaJ,KAAMjQ,aAAc3G,IAAG4G,yBAItF,mBAAK5D,MAAM,YACP,sBAAQA,MAAM,8BACV0J,KAAK,SACL6Q,mBAAkBxU,EAAa5C,GAC/BD,QAASxE,KAAKqV,kBAEd,iBAAG/T,MAAM,uBALb,sCAOA,sBAAQA,MAAM,kCACV0J,KAAK,SACLxG,QAASxE,KAAKwV,mBAEd,iBAAGlU,MAAM,iBAJb,yBAQHiU,GAAwB,mBACrB,mBAAKjU,MAAQ,gBAAciU,GAAwBA,EAAqBoG,QAAU,IAAM,SAAW,WAAa9J,KAAK,QAAQ5N,MAAM,qBAC/H,yBACI,uBAAM6B,KAAKC,UAAUwP,EAAsB,KAAM,QAMjE,mBAAKjU,MAAM,sBACP,sBAAQA,MAAM,sBAAsB0J,KAAK,SAASxG,QAASxE,KAAKuU,4BAA6BuH,aAAYzU,EAAa5C,IAAtH,8BAIV,oBAIL7B,GAAW8R,EAAgBrN,EAAa5C,KAAO,mBAC5C,mBAAKnD,MAAM,cACP,qBAAOoQ,IAAI,eAAc,YAAC,IAAD,CAAMjN,GAAG,qBAAT,6CAAzB,KACA,wBACInD,MAAM,eACNmD,GAAG,cACHiX,KAAK,KACLK,QAAS9Z,GAAKjC,KAAKyV,WAAWxT,EAAE8F,OAAOK,MAAOf,EAAa5C,kB,EAapFqP,Q,giCCz0Cf,MAAMzV,EAAaC,IAAGC,WAAU,GAC1BC,EAAkBF,IAAGG,eAAc,GACnCud,EAAgB1d,IAAGK,eAGnBD,GAFsBJ,IAAGM,mBAEV,CACpBC,WAAW,EACRyV,qBAAsB,GACzBjF,eAAgB,GAChB7B,iBAAkB,GAClBwH,QAAS,CACRC,QAAS,GACTC,KAAM,M,IAKFnF,EADLrQ,Y,EAAD,cACkCC,YAC9BC,YAAYC,GAAO,MACfC,MAAMD,GADS,YAsDnBoc,SAAW/V,iBACb,MAAM,UAAEzD,GAAc,EAAK5C,MAAM8C,QAC3B,KAAEyD,GAAS3D,QACMA,EAAUwZ,SAAS,CAAExX,GAAI2B,EAAK3B,MAzDhC,KAgEtByX,iBAAoBja,IACnB,MAAM4S,EAAS5S,EAAE8F,OAAOC,cAAcC,QAAQxD,IAAMxC,EAAE8F,OAAOE,QAAQxD,IAC/D,eAAE0G,GAAmBnL,KAAKI,MAChCJ,KAAKC,SAAS,CACbkL,gBAAiBA,GACf,KACEnL,KAAKqL,SAASwJ,IACjB7U,KAAKqL,SAASwJ,GAAQsH,WAvEH,KA4EtBxF,cAAiB1U,IAChB,MAAMlD,EAAUkD,EAAE8F,OAAOC,cAAcC,QAAQ2O,MAAQ3U,EAAE8F,OAAOE,QAAQ2O,KACxE5W,KAAKC,SAAS,CAAElB,YACV,MAAM,OAAE2H,GAAW1G,KAAKH,MACxBuc,gBAAO,cAAa1V,KAAU3H,MAhFf,KAmFnBqP,eAAkBC,IACpB,IAAIC,EAAUD,EACVC,EAAQvG,SACXuG,EAAUD,EAAGtG,QAEd,MAAM,aAAEwG,GAAiBD,EACzBA,EAAQrK,MAAM8F,OAAYwE,EAAF,MAzFH,KA4FtB8N,mBAAqB,KACpB,MAAMC,EAAeC,SAASC,qBAAqB,YACnD,IAAI,IAAItG,EAAI,EAAGC,EAAImG,EAAa9W,OAAQ0Q,EAAIC,EAAGD,GAAK,EAAE,CAErDlW,KAAKoO,eADYkO,EAAapG,MA/FV,KAoGnBuG,cAAiB5c,IAEbG,KAAKC,SAAS,CAAElB,QAASc,EAAMd,WAtGhB,KAwHnB0K,KAAO,KACH2S,gBAAO,MAvHPpc,KAAKI,MAAL,OACO1B,GADP,IAEI4V,qBAAsB,GACtBjF,eAAgB,GAChB7B,iBAAkB,GAClBwH,QAAS,CACLC,QAAS,GACTC,KAAM,IAEVnW,QAASc,EAAMd,SAAW,UAEpCiB,KAAKqL,SAAW,GACVrL,KAAKW,YAAc,GAG1B,eAAed,EAAQG,KAAKH,OAC3BG,KAAKC,SAAS,CAAEpB,WAAW,IAC3B,MAAM,UAAE4D,EAAF,UAAaC,GAAc7C,EAAM8C,QACjC,KAAEO,EAAO,IAAOR,GAChB,OAAEgE,GAAW7G,QACb4C,EAAUsE,KAAKL,GACrB1G,KAAKC,SAAS,CAAEpB,WAAW,IAE3B,IAAIoR,EAAS,GACb,MAAM,KAAE7J,GAAS3D,EACjB,GAAI2D,EAAKe,SAAWjE,GAAQA,EAAKpE,MAChC,IAAK,IAAIoX,EAAI,EAAGC,EAAI/P,EAAKe,QAAQ3B,OAAQ0Q,EAAIC,EAAGD,GAAK,EAAG,CACvD,MAAM7O,EAAejB,EAAKe,QAAQ+O,GAClC,GAAI7O,EAAaC,YAAa,CAC7B,MAAMyD,EAAM1D,EAAaC,YAAYoV,UAAUza,GAAKA,EAAEnD,QAAUoE,EAAKpE,OACjEiM,GAAO,IACVkF,EAAS,EAAH,KAAQ5I,EAAaC,YAAYyD,IAAjC,IAAuCzJ,MAAO+F,EAAa5C,OAKrEhC,EAAUka,eAAe,SAAU1M,GACzBA,EAAO/M,YACDR,EAAUka,QAAQ,CAAEnY,GAAIwL,EAAO/M,OAG/C,MAAMgE,EAAad,EAAKe,QAAQC,OAAOC,GAAgBA,EAAaC,aAAeD,EAAaC,YAAY9B,OAAS,GAAGJ,IAAKiC,GAC5GA,EAAaC,YAAYF,OAAOvE,GAAUA,EAAOG,KAAO,GAAGoC,IAAIvC,GAAUA,EAAOG,OAC9FuE,OACCL,EAAW1B,OAAS,GAAKkB,SACtBjE,EAAU+E,UAAUN,EAAWO,KAAK,MAE3ChF,EAAUkF,8BAEJlF,EAAUoa,uBAAuBnW,GAsDxC5F,oBACCd,KAAK6G,WACC7G,KAAKqc,qBAGTS,0BAA0BC,GAClBA,EAAUrW,SAAW1G,KAAKH,MAAM6G,QAChC1G,KAAK6G,SAASkW,GAGdA,EAAUhe,UAAYiB,KAAKH,MAAMd,SACjCiB,KAAKyc,cAAcM,GAQ9B/b,SACO,MAAM,QAAEjC,GAAYiB,KAAKI,OAEnB,eAAE+K,GAAqDnL,KAAKI,OAElE,UAAEsC,EAAF,UAAaD,EAAb,SAAwBqE,GAAa9G,KAAKH,MAAM8C,QAChD,KAAEO,EAAO,GAAT,MAAagH,EAAQ,GAArB,QAAyBtH,GAAYF,GAC/B,SAAEyH,EAAW,MAASjH,GAE5B,OAAEwD,GAAuB1G,KAAKH,OAC9B,KAAEuG,EAAF,OAAQ6J,GAA0BxN,GAGlC,MAAEua,EAAQ,GAAV,SAAcC,EAAW,IAAO7W,EAChC8W,EAAe9W,EAAK4W,OAAS5W,EAAK4W,MAAMN,UAAUza,GAAKA,EAAEiB,OAASA,EAAKuB,KAAO,EAExE6M,EAAQ,IAAI9Q,KAClB,IAAImb,EAAS,GACTrK,GAAS,IAAI9Q,KAAK4F,EAAKmS,YAAcjH,GAAS,IAAI9Q,KAAK4F,EAAKqS,SAC5DkD,EAAS,OACFrK,GAAS,IAAI9Q,KAAK4F,EAAKmL,kBAAoBD,GAAS,IAAI9Q,KAAK4F,EAAKoL,iBACzEmK,EAAS,UAEb,MAAMwB,EAA+B,IAAlB/W,EAAKsB,SAClB0V,GAAaD,KAAelN,EAAOnR,MAEzC,MAAgB,aAAZC,EAEI,YAAC,IAAD,CAAc4D,OAAQ3C,KAAKH,MAAM8C,OAAQ+D,OAAQA,IAK9D,mBAAKpF,MAAM,kBAAkB2C,MAAQ,kBAAiB+X,kBAA8B3d,MACvE,sBAAQiD,MAAM,2CACV2C,MAAQ,QAAOzF,8CACfgG,QAASxE,KAAKyJ,MACd,iBAAGnI,MAAM,8BAGb,mBAAKA,MAAM,WACtB,mBAAKA,MAAM,2EACQ,mBAAKA,MAAM,mDACP,kBAAIA,MAAM,oBAAoB2C,MAAM,yBACpB,WAAX0X,IAAwBwB,GAAc,mBACnC,oBACI7b,MAAM,wDACNwY,YAAU,SACVtV,QAASxE,KAAK2W,eAEd,YAAC,IAAD,CAAMlS,GAAG,qBAAT,oBAGI,SAAXkX,GAAqB,mBAClB,oBAAMra,MAAM,+CAA8C,YAAC,IAAD,CAAMmD,GAAG,0BAAT,eAElD,SAAXkX,GAAqB,mBAClB,oBAAMra,MAAM,gDAA+C,YAAC,IAAD,CAAMmD,GAAG,uBAAT,oBAGjE2B,EAAKpB,QAAUoB,EAAKpB,OAAO,GAAM,mBAAK0F,IAAKtE,EAAKpB,OAAO,GAAGqY,YAAa/b,MAAM,cAAiB,MAK5G,mBAAKA,MAAM,OACP,mBAAKA,MAAM,6DACNsB,GAAW,mBACR,iBAAGtB,MAAM,8BAA8BoD,KAAO,sCAAqC0B,EAAK3B,WAAxF,SAEJ,sBAAK2B,EAAKlC,OACV,uBACKkC,EAAKmS,WAAa,mBAAE,YAAC,IAAD,CAAM9T,GAAG,iBAAT,WAAF,KAA4CxF,IAAK2S,WAAWxL,EAAKmS,UAAW,CAAE/E,OAAQ,QAASC,QAAQ,EAAOC,KAAM,UAAWC,OAAQ,aACzJvN,EAAKqS,SAAW,yBAAMxZ,IAAK2S,WAAWxL,EAAKqS,QAAS,CAAEjF,OAAQ,QAASC,QAAQ,EAAOC,KAAM,UAAWC,OAAQ,gBAK5H,mBAAKrS,MAAM,OACP,mBAAKA,MAAM,6DACP,mBAAKA,MAAM,OACP,mBAAKA,MAAM,yBACP,mBACIA,MAAM,wCACN2C,MAAM,kDAEN,mBAAK3C,MAAM,iBACP,sBACIA,MAAQ,gDAA2D,UAAZvC,EAAsB,cAAgB,oCAC7FkF,MAAM,6CACN6V,YAAU,QACVtV,QAASxE,KAAK2W,eACjB,iBAAGrV,MAAM,uBALV,IAKkC,YAAC,IAAD,CAAMmD,GAAG,cAAT,UACrB,UAAZ1F,GAAuB,YAAC,IAAD,CAAgB6a,WAAY,SAAUC,SAAU,SAE5E,mBAAKvY,MAAM,iBACP,sBACIA,MAAQ,8BAAyC,YAAZvC,EAAwB,cAAgB,oCAC7EkF,MAAM,6CACN6V,YAAU,UACVtV,QAASxE,KAAK2W,eACjB,iBAAGrV,MAAM,mBALV,IAK8B,YAAC,IAAD,CAAMmD,GAAG,gBAAT,YACjB,YAAZ1F,GAAyB,YAAC,IAAD,CAAgB6a,WAAY,SAAUC,SAAU,SAE9E,mBAAKvY,MAAM,iBACP,sBACIA,MAAQ,8BAAyC,aAAZvC,EAAyB,cAAgB,oCAC9EkF,MAAM,6CACN6V,YAAU,WACVtV,QAASxE,KAAK2W,eACjB,iBAAGrV,MAAM,0BALV,IAKqC,YAAC,IAAD,CAAMmD,GAAG,iBAAT,aACxB,aAAZ1F,GAA0B,YAAC,IAAD,CAAgB6a,WAAY,SAAUC,SAAU,SAE/E,mBAAKvY,MAAM,iBACP,sBACIA,MAAQ,8BAAyC,SAAZvC,EAAqB,cAAgB,oCAC1EkF,MAAM,6CACN6V,YAAU,OACVtV,QAASxE,KAAK2W,eACjB,iBAAGrV,MAAM,eALV,IAK0B,YAAC,IAAD,CAAMmD,GAAG,aAAT,SACb,SAAZ1F,GAAsB,YAAC,IAAD,CAAgB6a,WAAY,SAAUC,SAAU,SAE3E,mBAAKvY,MAAM,iBACP,sBACIA,MAAQ,8BAAyC,eAAZvC,EAA2B,cAAgB,oCAChFkF,MAAM,6CACN6V,YAAU,aACVtV,QAASxE,KAAK2W,eACjB,iBAAGrV,MAAM,kBALV,IAK6B,YAAC,IAAD,CAAMmD,GAAG,oBAAT,gBAChB,eAAZ1F,GAA4B,YAAC,IAAD,CAAgB6a,WAAY,SAAUC,SAAU,SAEhFzT,EAAKkM,OAAS,mBAAKhR,MAAM,iBACtB,sBACIA,MAAQ,8BAAyC,UAAZvC,EAAsB,cAAgB,oCAC3EkF,MAAM,6CACN6V,YAAU,QACVtV,QAASxE,KAAK2W,eACjB,iBAAGrV,MAAM,iBALV,IAK4B,YAAC,IAAD,CAAMmD,GAAG,cAAT,UACf,UAAZ1F,GAAuB,YAAC,IAAD,CAAgB6a,WAAY,SAAUC,SAAU,SAE3EzT,EAAKkX,gBAAkB,mBAAKhc,MAAM,iBAC/B,sBACIA,MAAQ,8BAAyC,eAAZvC,EAA2B,cAAgB,oCAChFkF,MAAM,6CACN6V,YAAU,aACVtV,QAASxE,KAAK2W,eACjB,iBAAGrV,MAAM,uBALV,IAKkC,YAAC,IAAD,CAAMmD,GAAG,mBAAT,oBACrB,eAAZ1F,GAA4B,YAAC,IAAD,CAAgB6a,WAAY,SAAUC,SAAU,SAEhFzT,EAAKmX,aAAe,mBAAKjc,MAAM,iBAC5B,sBACIA,MAAQ,8BAAyC,gBAAZvC,EAA4B,cAAgB,oCACjFkF,MAAM,6CACN6V,YAAU,cACVtV,QAASxE,KAAK2W,eACjB,iBAAGrV,MAAM,0BALV,IAKqC,YAAC,IAAD,CAAMmD,GAAG,oBAAT,gBACxB,gBAAZ1F,GAA6B,YAAC,IAAD,CAAgB6a,WAAY,SAAUC,SAAU,SAEjFzT,EAAKoX,kBAAoB,mBAAKlc,MAAM,iBACjC,sBACIA,MAAQ,8BAAyC,UAAZvC,EAAsB,cAAgB,oCAC3EkF,MAAM,6CACN6V,YAAU,QACVtV,QAASxE,KAAK2W,eACjB,iBAAGrV,MAAM,qBALV,IAKgC,YAAC,IAAD,CAAMmD,GAAG,0BAAT,sBACnB,UAAZ1F,GAAuB,YAAC,IAAD,CAAgB6a,WAAY,SAAUC,SAAU,SAE3EzT,EAAKqX,SAAW,mBAAKnc,MAAM,iBACxB,sBACIA,MAAQ,8BAAyC,YAAZvC,EAAwB,cAAgB,oCAC7EkF,MAAM,6CACN6V,YAAU,UACVtV,QAASxE,KAAK2W,eACjB,iBAAGrV,MAAM,oBALV,IAK+B,YAAC,IAAD,CAAMmD,GAAG,gBAAT,YAClB,YAAZ1F,GAAyB,YAAC,IAAD,CAAgB6a,WAAY,SAAUC,SAAU,SAE7EzT,EAAKsX,QAAU,mBAAKpc,MAAM,iBACvB,sBACIA,MAAQ,8BAAyC,WAAZvC,EAAuB,cAAgB,oCAC5EkF,MAAM,6CACN6V,YAAU,SACVtV,QAASxE,KAAK2W,eACjB,iBAAGrV,MAAM,iBALV,IAK4B,YAAC,IAAD,CAAMmD,GAAG,eAAT,YACf,WAAZ1F,GAAwB,YAAC,IAAD,CAAgB6a,WAAY,SAAUC,SAAU,UAE3EsD,GAAc,mBAAK7b,MAAM,iBACvB,sBACIA,MAAQ,8BAAyC,YAAZvC,EAAwB,cAAgB,oCAC7EkF,MAAM,6CACN6V,YAAU,UACVtV,QAASxE,KAAK2W,eACjB,iBAAGrV,MAAM,uBALV,IAKkC,YAAC,IAAD,CAAMmD,GAAG,gBAAT,YACrB,YAAZ1F,GAAyB,YAAC,IAAD,CAAgB6a,WAAY,SAAUC,SAAU,SAE9E,mBAAKvY,MAAM,iBACP,sBACIA,MAAQ,8BAA6B8b,EAAa,GAAK,wBAAoC,YAAZre,EAAwB,cAAgB,oCACvHkF,MAAM,6CACN6V,YAAU,UACVtV,QAASxE,KAAK2W,eACjB,iBAAGrV,MAAM,iBALV,IAK4B,YAAC,IAAD,CAAMmD,GAAG,iBAAT,YACf,YAAZ1F,GAAyB,YAAC,IAAD,CAAgB6a,WAAY,SAAUC,SAAU,SAE7EuD,GAAc,mBAAK9b,MAAM,iBACtB,sBACIA,MAAQ,iDAA4D,WAAZvC,EAAuB,cAAgB,oCAC/FkF,MAAM,6CACN6V,YAAU,SACVtV,QAASxE,KAAK2W,eACjB,iBAAGrV,MAAM,qBALV,IAKgC,YAAC,IAAD,CAAMmD,GAAG,eAAT,YACnB,WAAZ1F,GAAwB,YAAC,IAAD,CAAgB6a,WAAY,SAAUC,SAAU,cAQpF,UAAZ9a,GAAuB,mBACpB,YAAC,IAAD,CAAmB4D,OAAQ3C,KAAKH,MAAM8C,OAAQyD,KAAMA,IACpD,mBAAK9E,MAAM,OACP,mBAAKA,MAAM,uEACP,kBAAIA,MAAM,QAAO,YAAC,IAAD,CAAMmD,GAAG,cAAT,cAErB,mBAAKnD,MAAM,uEACP,iBAAGA,MAAM,YACL,0BACI,YAAC,IAAD,CAAUuD,SAAUvG,IAAGwG,cAAcsB,EAAKuX,QAASvX,EAAKpB,OAAQmF,GAAWlF,aAAc3G,IAAG4G,yBAIxF,WAAXyW,GAAuB,mBACnBwB,EAAa,mBACV,sBACI7b,MAAM,iCACNwY,YAAU,SACVtV,QAASxE,KAAK2W,eAEd,iBAAGrV,MAAM,qBALb,IAKmC,YAAC,IAAD,CAAMmD,GAAG,oBAAT,eALnC,MAKoF,YAAC,IAAD,CAAMA,GAAG,iBAAT,cAElF,mBACF,sBACInD,MAAM,iCACNwY,YAAU,SACVtV,QAASxE,KAAK2W,eAEd,iBAAGrV,MAAM,qBALb,IAKmC,YAAC,IAAD,CAAMmD,GAAG,eAAT,cAK3C,YAAC,IAAD,CAAUI,SAAUvG,IAAGwG,cAAcsB,EAAK8O,KAAM9O,EAAKpB,OAAQmF,GAAWlF,aAAc3G,IAAG4G,wBAE7F,mBAAK5D,MAAM,uEACN8E,EAAKuI,KAAOvI,EAAKuI,IAAIC,MAAM,KAAKxJ,IAAIuJ,GAAO,mBACxC,oBAAMrN,MAAM,4CACR,iBAAGA,MAAM,aAAaoD,KAAO,oCAAmCiK,EAAO5G,OAAO,SAASuR,IAAI,aAAaD,QAAM,GAC1G,iBAAG/X,MAAM,oBADb,KACoCqN,IAGxC,oBAAMrN,MAAM,4CACR,iBAAGA,MAAM,aAAaoD,KAAO,0CAAyCiK,EAAO5G,OAAO,SAASuR,IAAI,aAAaD,QAAM,GAChH,iBAAG/X,MAAM,qBADb,KACqCqN,SAO5C,YAAZ5P,GAAyB,mBACtB,YAAC,IAAD,CAAmB4D,OAAQ3C,KAAKH,MAAM8C,OAAQyD,KAAMA,IACpD,YAAC,IAAD,CAAazD,OAAQ3C,KAAKH,MAAM8C,OAAQ+D,OAAQA,KAEvC,aAAZ3H,GAA0B,mBACvB,YAAC,IAAD,CAAc4D,OAAQ3C,KAAKH,MAAM8C,OAAQ+D,OAAQA,KAExC,SAAZ3H,GAAsB,mBACnB,YAAC,IAAD,CAAU4D,OAAQ3C,KAAKH,MAAM8C,OAAQyD,KAAMA,KAElC,eAAZrH,GAA4B,mBACzB,YAAC,IAAD,CAAgB4D,OAAQ3C,KAAKH,MAAM8C,OAAQyD,KAAMA,KAExC,UAAZrH,GAAuB,mBACpB,mBAAKuC,MAAM,OACP,mBAAKA,MAAM,uEACP,kBAAIA,MAAM,QAAO,YAAC,IAAD,CAAMmD,GAAG,cAAT,YAErB,mBAAKnD,MAAM,uEACP,YAAC,IAAD,CAAUuD,SAAUvG,IAAGwG,cAAcsB,EAAKkM,MAAOlM,EAAKpB,OAAQmF,GAAWlF,aAAc3G,IAAG4G,0BAIzF,eAAZnG,GAA4B,mBACzB,mBAAKuC,MAAM,OACP,mBAAKA,MAAM,uEACP,kBAAIA,MAAM,QAAO,YAAC,IAAD,CAAMmD,GAAG,mBAAT,mBAErB,mBAAKnD,MAAM,uEACP,YAAC,IAAD,CAAUuD,SAAUvG,IAAGwG,cAAcsB,EAAKkX,eAAgBlX,EAAKpB,OAAQmF,GAAWlF,aAAc3G,IAAG4G,0BAIlG,gBAAZnG,GAA6B,mBAC1B,mBAAKuC,MAAM,OACP,mBAAKA,MAAM,uEACP,kBAAIA,MAAM,QAAO,YAAC,IAAD,CAAMmD,GAAG,oBAAT,kBAErB,mBAAKnD,MAAM,uEACP,YAAC,IAAD,CAAUuD,SAAUvG,IAAGwG,cAAcsB,EAAKmX,YAAanX,EAAKpB,OAAQmF,GAAWlF,aAAc3G,IAAG4G,0BAI/F,UAAZnG,GAAuB,mBACpB,mBAAKuC,MAAM,OACP,mBAAKA,MAAM,uEACP,kBAAIA,MAAM,QAAO,YAAC,IAAD,CAAMmD,GAAG,0BAAT,sBAErB,mBAAKnD,MAAM,uEACP,YAAC,IAAD,CAAUuD,SAAUvG,IAAGwG,cAAcsB,EAAKoX,iBAAkBpX,EAAKpB,OAAQmF,GAAWlF,aAAc3G,IAAG4G,0BAIpG,YAAZnG,GAAyB,mBACtB,mBAAKuC,MAAM,OACP,mBAAKA,MAAM,uEACP,kBAAIA,MAAM,QAAO,YAAC,IAAD,CAAMmD,GAAG,gBAAT,aAErB,mBAAKnD,MAAM,uEACP,YAAC,IAAD,CAAUuD,SAAUvG,IAAGwG,cAAcsB,EAAKqX,QAASrX,EAAKpB,OAAQmF,GAAWlF,aAAc3G,IAAG4G,0BAI3F,WAAZnG,GAAwB,mBACrB,mBAAKuC,MAAM,OACP,mBAAKA,MAAM,uEACP,kBAAIA,MAAM,QAAO,YAAC,IAAD,CAAMmD,GAAG,eAAT,aAErB,mBAAKnD,MAAM,uEACP,YAAC,IAAD,CAAUuD,SAAUvG,IAAGwG,cAAcsB,EAAKsX,OAAQtX,EAAKpB,OAAQmF,GAAWlF,aAAc3G,IAAG4G,0BAI1F,YAAZnG,GAAyB,mBACtB,YAAC,IAAD,CAAa4D,OAAQ3C,KAAKH,MAAM8C,OAAQyD,KAAMA,KAErC,YAAZrH,GAAyB,mBACtB,YAAC,IAAD,CAAa4D,OAAQ3C,KAAKH,MAAM8C,OAAQyD,KAAMA,KAErC,WAAZrH,GAAwB,mBACrB,YAAC,IAAD,CAAY4D,OAAQ3C,KAAKH,MAAM8C,OAAQyD,KAAMA,KAGhD,CAAC,SAAS6E,QAAQlM,IAAY,GAAK,mBAChC,mBAAKuC,MAAM,OACP,mBAAKA,MAAM,uEACP,mBAAKA,MAAM,IACP,YAAC,IAAD,CACIqB,OAAQ3C,KAAKH,MAAM8C,OACnBqa,MAAOA,EACPC,SAAUA,EACVjS,KAAK,WAOjB,mBAAK1J,MAAM,uEACP,mBAAKA,MAAM,OACP,mBAAKA,MAAM,qBACP,sBAAQ0J,KAAK,SAAS1J,MAAQ,mBAAkB4b,EAAe,UAAY,gCAAgCA,EAAe,eAAiB,KACvI1Y,QAASxE,KAAKic,UAGd,iBAAG3a,OAAU4b,EAAe,mBAAqB,OAAtC,kBAJf,IAI+EA,EAAe,YAAC,IAAD,CAAMzY,GAAG,sBAAT,SAA6C,YAAC,IAAD,CAAMA,GAAG,iBAAT,SAG/I,mBAAKnD,MAAM,qBACP,sBAAQ0J,KAAK,SAAS1J,MAAM,6CACxB4J,UAAS9E,EAAK3B,GACdD,QAASxE,KAAKkc,kBAEd,iBAAG5a,MAAM,mBAJb,IAIiC,YAAC,IAAD,CAAMmD,GAAG,wBAAT,eAK7C,mBAAKnD,MAAM,uEACN6J,GAAkBjI,EAAKpE,OAAS,YAAC,IAAD,CAC7B6D,OAAQ3C,KAAKH,MAAM8C,OACnByD,KAAMA,EAENiF,SAAU4M,GAAKjY,KAAKqL,SAASjF,EAAK3B,IAAMwT,EACxC2F,eAAgB5d,KAAKqL,YAG7B,mBAAK/J,MAAM,eACP,YAAC,IAAD,CACIqB,OAAQ3C,KAAKH,MAAM8C,OACnByD,KAAMA,EACNyX,KAAK,e,EAWtB9N,a,iMCxjBT+N,EADLpe,Y,EAAD,cACmCC,YAC/BC,YAAYC,GACRC,MAAMD,GACNG,KAAKI,MAAQ,GAEnBJ,KAAKqL,SAAW,GACVrL,KAAKW,YAAc,GAGvBK,SACF,MAAM,UAAE0B,GAAmC1C,KAAKH,MAAM8C,QAChD,KAAEO,EAAO,GAAT,MAAagH,EAAQ,GAArB,QAAyBtH,GAAYF,GAC/B,SAAEyH,EAAW,MAASjH,GAE5B,KAAEkD,EAAO,IAAOpG,KAAKH,MAErB,OAAQ,mBACJ,mBAAKyB,MAAM,OACP,mBAAKA,MAAM,uEACP,kBAAIA,MAAM,QAAO,YAAC,IAAD,CAAMmD,GAAG,gBAAT,aAErB,mBAAKnD,MAAM,uEACP,mBAAKA,MAAM,OACN8E,EAAKe,SAAWf,EAAKe,QAAQwD,KAAK,CAACC,EAAGC,IAAMD,EAAEE,SAAWD,EAAEC,UAAU1F,IAAIiC,GAAgB,mBACtF,mBAAK/F,MAAM,iCACP,mBAAKA,MAAM,iCACP,sBAAK+F,EAAanD,OAEjBtB,GAAW,mBACR,iBAAG8B,KAAO,aAAY0B,EAAK3B,MAAM4C,EAAa5C,MAA9C,aAAiE,uBACjE,iBAAGC,KAAO,YAAW0B,EAAK3B,QAA1B,eAAiD,wBAGrD,yBACK4C,EAAakR,WAAa,uBACvB,oBAAMjX,MAAM,uBAAsB,YAAC,IAAD,CAAMmD,GAAG,kBAAT,SAAlC,KADuB,IAC2DxF,IAAK2S,WAAY,GAAEvK,EAAakR,aAAalR,EAAamR,WAAa,aAAc,CAAEhF,OAAQrJ,EAAUsJ,QAAQ,EAAOC,KAAM,UAAWC,OAAQ,aAEtOtM,EAAaoR,SAAW,uBACrB,oBAAMnX,MAAM,uBAAsB,YAAC,IAAD,CAAMmD,GAAG,gBAAT,OAAlC,KADqB,IACyDxF,IAAK2S,WAAY,GAAEvK,EAAaoR,WAAWpR,EAAaqR,SAAW,aAAc,CAAElF,OAAQrJ,EAAUsJ,QAAQ,EAAOC,KAAM,UAAWC,OAAQ,cAInO,uBAAK,oBAAMrS,MAAM,uBAAsB,YAAC,IAAD,CAAMmD,GAAG,iBAAT,YAAlC,KAAL,IAAyF4C,EAAayD,SAAtG,OACA,uBAAK,oBAAMxJ,MAAM,uBAAsB,YAAC,IAAD,CAAMmD,GAAG,eAAT,aAAlC,KAAL,IAAwF4C,EAAayK,WAAa1L,EAAK0L,UAAvH,QACA,iBAAGxQ,MAAM,YACL,YAAC,IAAD,CAAUuD,SAAUvG,IAAGwG,cAAcuC,EAAasW,QAASvX,EAAKpB,OAAQmF,GAAWlF,aAAc3G,IAAG4G,wBAExG,yBACI,YAAC,IAAD,CAAUL,SAAUvG,IAAGwG,cAAcuC,EAAa6N,KAAM9O,EAAKpB,OAAQmF,GAAWlF,aAAc3G,IAAG4G,wBAEpGmC,EAAaiL,OAAS,mBACnB,sBAAI,YAAC,IAAD,CAAM7N,GAAG,cAAT,WACJ,YAAC,IAAD,CAAUI,SAAUvG,IAAGwG,cAAcuC,EAAaiL,MAAOlM,EAAKpB,OAAQmF,GAAWlF,aAAc3G,IAAG4G,oC,EAY3H4Y,Q,+hBC/Df,MAAMpf,EAAe,CACpBG,WAAW,EACXkf,oBAAoB,EAEpB5e,YAAa,KACbgB,gBAAiB,KACjBf,gBAAgB,G,IAqCXK,EADLC,Y,EAAD,cAC0BC,YACtBC,YAAYC,GACRC,MAAMD,GADS,KAQtBE,cAAgB,KACf,MAAMI,EAAkBG,KAAKC,OAAM,IAAIC,MAAOC,UAAY,KAC1DT,KAAKC,SAAS,CACbb,gBAAgB,EAChBe,mBACE,IAAMH,KAAKE,qBAXRF,KAAKI,M,+VAAL,IACO1B,GAEbsB,KAAKW,YAAc,GAWpBT,mBACC,MAAM,eAAEd,EAAF,gBAAkBe,GAAoBH,KAAKI,MAC3C,GAAIhB,EAAgB,CACzB,MAAMiB,EAAMC,KAAKC,OAAM,IAAIC,MAAOC,UAAY,KAE9CT,KAAKC,SAAS,CAAEd,YAxDY,IAuDkBkB,EAAMF,KAEpDO,aAAaV,KAAKW,YAAYC,MAC9BZ,KAAKW,YAAYC,KAAOC,WAAW,IAAMb,KAAKE,mBAAoB,KAEnE,OAAO,EAGRY,oBACCd,KAAKD,gBAGNgB,uBACCL,aAAaV,KAAKW,YAAYC,MAG/BI,SACC,MAAM,YAAE7B,GAAgBa,KAAKI,MACvBgB,EAAgBd,KAAKC,MAAMtB,IAAKoC,iBAAiBlC,EAAa,EAzEvC,GAyEkE,EAAG,MAElG,OAAQ,mBACP,mBAAKmC,MAAM,qBAAqB2C,MAAM,iCACrC,mBAAK3C,MAAM,eAAeuQ,KAAK,cAAc5N,MAAQ,UAAS7C,MAAmB4c,gBAAe5c,EAAe6c,gBAAc,IAAIC,gBAAc,c,EAO7IC,EADLze,Y,EAAD,cACmCC,YAC/BC,YAAYC,GAAO,MACfC,MAAMD,GADS,YAwCtBkU,qBAAwB9R,IACvB,MAAMnD,EAAQmD,EAAE8F,OAAOwB,QAAQ,MAAMtB,QAAQnJ,OACvC,SAAEgI,GAAa9G,KAAKH,MAAM8C,OAChCmE,EAASiN,qBAAqBjV,IA3CT,KA8CtBmV,oBAAuBhS,IACtBA,EAAEC,kBACF,MAAMpD,EAAQmD,EAAE8F,OAAOwB,QAAQ,MAAMtB,QAAQnJ,OACvC,SAAEgI,GAAa9G,KAAKH,MAAM8C,OAChCmE,EAASoN,sBAAsBpV,IAlDV,KAqDtB6V,gBAAmB1S,IAClB,MAAM,OAAEyE,GAAW1G,KAAKH,OACZ,UAAE4C,GAAczC,KAAKH,MAAM8C,OAC3BuK,EAAQjL,EAAE8F,OAAOtD,GACjB2D,EAAQnG,EAAE8F,OAAOK,OACjB,QAAEuI,EAAF,aAAWC,GAAiB3O,EAAE8F,OAAOE,QAMrC+F,EAAO,CAClB6C,YAAaF,EACJG,aAAcF,EACvB,CAAE,sBAAqB3R,IAAKiP,QAAQhB,IAAW9E,GAEhD1H,aAAaV,KAAKW,YAAYuM,IAC9BlN,KAAKW,YAAYuM,GAASrM,YAAWqF,iBACpCzD,EAAUsO,UAAU,CACnBtM,GAAIiC,EACJsH,WAEC,MA3EkB,KA8EtBoQ,sBAAwBlY,iBACvB,MAAM,OAAEQ,GAAW,EAAK7G,OACZ,UAAE4C,GAAc,EAAK5C,MAAM8C,OACjC0b,QAAoB5b,EAAU2b,sBAAsB,CAAE3Z,GAAIiC,IAChE,EAAKzG,SAAS,CAAEoe,iBAlFK,KAqFtB/U,cAAiBrH,IAChB,MAAMgF,EAAkBhF,EAAE8F,OAAOwB,QAAQ,UAAUtB,QAAQxD,IACrD,SAAEqC,GAAa9G,KAAKH,MAAM8C,OAChCmE,EAAS0C,sBAAsBvC,GAAiB,IAtF1CjH,KAAKI,MAAQ,GAEnBJ,KAAKqL,SAAW,GACVrL,KAAKW,YAAc,GAG1B,eAAed,EAAQG,KAAKH,OAAO,WAClCG,KAAKC,SAAS,CAAEpB,WAAW,IAC3B,MAAM,UAAE4D,GAAc5C,EAAM8C,QACtB,OAAE+D,GAAW7G,QACP4C,EAAUsE,KAAKL,GACrB,MAAM,KAAEN,GAAS3D,EAEjByE,EAAad,EAAKe,QAAQC,OAAOC,GAAgBA,EAAaC,aAAeD,EAAaC,YAAY9B,OAAS,GAAGJ,IAAKiC,GAC5GA,EAAaC,YAAYF,OAAOvE,GAAUA,EAAOG,KAAO,GAAGoC,IAAIvC,GAAUA,EAAOG,OAC9FuE,OAEOL,EAAW1B,OAAS,GAAKkB,UAC5BjE,EAAU+E,UAAUN,EAAWO,KAAK,YACpChF,EAAUkE,mBAAmBO,EAAWO,KAAK,KAAMf,GACzDjE,EAAUmE,gCAEXnE,EAAUkF,wBAGVjH,aAAaV,KAAKW,YAAYiH,QAC9B5H,KAAKW,YAAYiH,OAAS/G,YAAWqF,iBACpC,MAAM/F,EAAkBG,KAAKC,OAAM,IAAIC,MAAOC,UAAY,KAC1D,EAAKR,SAAS,CAAEE,oBAChB,EAAK0G,aACHgB,KAEH7H,KAAKC,SAAS,CACbpB,WAAW,EACXkf,oBAAoB,IAuDtBhd,uBACCL,aAAaV,KAAKW,YAAYiH,QAC9BlH,aAAaV,KAAKW,YAAYC,MAG/BE,oBACCd,KAAK6G,WAGH7F,SACF,MAAM,mBAAE+c,EAAF,YAAsBM,GAAgBre,KAAKI,OAC3C,UAAEsC,EAAF,UAAaD,EAAb,SAAwBqE,GAAa9G,KAAKH,MAAM8C,QAChD,KAAEO,EAAO,GAAT,MAAagH,EAAQ,GAArB,QAAyBtH,GAAYF,GAC/B,SAAEyH,EAAW,MAASjH,GAEtB,eAAY0U,EAAZ,gBAA4B5D,EAA5B,iBAA6ChN,EAAmB,IAAOF,GAE7E,KAAEV,EAAO,GAAT,QAAuBe,EAAU,IAAO1E,EAGxC6b,EAAwB,IAAI9d,KAAK4F,EAAKqS,SAC5C6F,EAAsBC,SAASD,EAAsBE,WAAa,GAElE,MAOYrB,EAA+B,IAAlB/W,EAAKsB,SAExB,OAAQ,mBACJ,mBAAKpG,MAAM,OACP,mBAAKA,MAAM,uEACP,kBAAIA,MAAM,QAAO,YAAC,IAAD,CAAMmD,GAAG,gBAAT,aAErB,mBAAKnD,MAAM,uEACP,YAAC7B,EAAD,CAAakD,OAAQ3C,KAAKH,MAAM8C,SAC/Bwa,EAAa,oBAER,mBACDja,EAAKpE,OAAS,mBAAKwC,MAAM,sBAAsBuQ,KAAK,SACnC,OAAb1H,GAAqB,kFAC0C,uBAC5D,kFACA,sBACI,sEACA,yDACA,qEAGM,OAAbA,GAAqB,2FACmD,uBACrE,4FACA,sBACI,iGACA,qDACA,uFAMf/D,EAAKqY,WAAa,mBAAKnd,MAAM,qBAC1B,iBAAGoD,KAAM0B,EAAKqY,WAAY1W,OAAO,SAASuR,IAAI,aAAaD,QAAM,GAC5DjT,EAAKsY,YAActY,EAAKsY,YAAc,mBAAE,YAAC,IAAD,CAAMja,GAAG,sBAAT,qBAAF,KAD3C,IACyG,iBAAGnD,MAAM,kCAE7G,qBAIPyc,IAAuB5W,GAA8B,IAAnBA,EAAQ3B,SAAiB,mBAAKlE,MAAM,2CACpE,mBAAKA,MAAM,8BAA8BuQ,KAAK,UAC1C,oBAAMvQ,MAAM,WAAZ,iBAKZ,mBAAKA,MAAM,UACP,mBAAKA,MAAM,OACP,mBAAKA,MAAM,yBACP,mBACIA,MAAM,wCACN2C,MAAM,kDAGLmC,EAAKe,SAAWf,EAAKe,QAAQwD,KAAK,CAACC,EAAGC,IAAMD,EAAEE,SAAWD,EAAEC,UAAU1F,IAAI,CAACiC,EAAc0D,IAAQ,mBAC7F,mBAAKzJ,MAAM,iBACP,sBACI0J,KAAK,SACL1J,MAAQ,iBAAwB,IAARyJ,GAAa,uBAAuBA,IAAQ3E,EAAKe,QAAQ3B,OAAS,GAAK,qCAAqCwB,EAAiBiE,QAAQ5D,EAAa5C,KAAO,EAAI,cAAgB,oCACrMR,MAAM,6CACNO,QAASxE,KAAKsJ,cACd4B,UAAS7D,EAAa5C,IAErB4C,EAAanD,cAU1C,mBAAK5C,MAAM,UACN8E,EAAKe,SAAWf,EAAKe,QAAQC,OApFvB6Q,KACpBjR,EAAiBxB,OAAS,IACtBwB,EAAiBiE,QAAQgN,EAAExT,KAAO,GAkF6BkG,KAAK,CAACC,EAAGC,IAAMD,EAAEE,SAAWD,EAAEC,UAAU1F,IAAIiC,GAAgB,mBAAK/F,MAAM,aACxH8E,EAAKuY,cAAgB,mBAAKrd,MAAM,qBAAqBuQ,KAAK,SACvD,mBAAKvQ,MAAM,sCAAsCuQ,KAAK,UAClD,oBAAMvQ,MAAM,WAAZ,eAEJ,iBAAGA,MAAM,8CAA8C2C,MAAM,sBAC7D,YAAC,IAAD,CAAUY,SAAUvG,IAAGwG,cAAcsB,EAAKuY,aAAcvY,EAAKpB,OAAQmF,GAAWlF,aAAc3G,IAAG4G,wBAEpGkB,EAAKwY,eAAiB,mBAAKtd,MAAM,sBAAsBuQ,KAAK,SACzD,iBAAGvQ,MAAM,qCAAqC2C,MAAM,sBACpD,YAAC,IAAD,CAAUY,SAAUvG,IAAGwG,cAAcsB,EAAKwY,cAAexY,EAAKpB,OAAQmF,GAAWlF,aAAc3G,IAAG4G,wBAErGkB,EAAKyY,eAAiB,mBAAKvd,MAAM,sBAAsBuQ,KAAK,SACzD,iBAAGvQ,MAAM,+BAA+B2C,MAAM,sBAC9C,YAAC,IAAD,CAAUY,SAAUvG,IAAGwG,cAAcsB,EAAKyY,cAAezY,EAAKpB,OAAQmF,GAAWlF,aAAc3G,IAAG4G,wBAGtG,sBAAKmC,EAAanD,MAAlB,IAA0BmD,EAAakR,WAAa,wBAC1C,oBAAMjX,MAAM,uBACTrC,IAAK2S,WAAY,GAAEvK,EAAakR,aAAalR,EAAamR,WAAa,aAAc,CAAEhF,OAAQrJ,EAAUsJ,QAAQ,EAAOC,KAAM,UAAWC,OAAQ,YADpJ,MACqK1U,IAAK2S,WAAY,GAAEvK,EAAaoR,WAAWpR,EAAaqR,SAAW,aAAc,CAAElF,OAAQrJ,EAAUsJ,QAAQ,EAAOC,KAAM,UAAWC,OAAQ,eAI5T,oBAAMrS,MAAM,eACR,oBAAMA,MAAM,cAAa,YAAC,IAAD,CAAMmD,GAAG,iBAAT,WAAzB,KAAmE4C,EAAayX,cAAgB,GAChG,oBAAMxd,MAAM,mBAAkB,YAAC,IAAD,CAAMmD,GAAG,0BAAT,oBAA9B,KAA0F4C,EAAa0X,eAAiB,EAAxH,MAGJ,mBAAKzd,MAAM,uBACP,qBAAOA,MAAM,gCACT,yBACI,sBACI,kBAAIqX,MAAM,OAAV,KACA,kBAAIA,MAAM,MAAM1U,MAAM,qBAAoB,YAAC,IAAD,CAAMQ,GAAG,cAAT,SACzC7B,GAAW,mBACR,kBAAItB,MAAM,yBAAyBqX,MAAM,OAAM,iBAAGrX,MAAM,uBAAxD,cACA,kBAAIA,MAAM,yBAAyBqX,MAAM,OAAM,iBAAGrX,MAAM,uBAAxD,WAEHsB,GAAW,kBAAI+V,MAAM,MAAMrX,MAAM,yBAAyB2C,MAAM,qBAAoB,YAAC,IAAD,CAAMQ,GAAG,gBAAT,YACrF,kBAAIkU,MAAM,OAAM,YAAC,IAAD,CAAMlU,GAAG,gBAAT,eAGxB,yBACK0C,EAAQE,EAAa5C,KAAO0C,EAAQE,EAAa5C,IAAI6C,aAAeH,EAAQE,EAAa5C,IAAI6C,YAAYlC,IAAI,CAAC4Z,EAAYjU,KACvH,MAAM,OAAElI,EAAF,YAAU+V,EAAV,cAAuBqG,EAAvB,eAAsCC,EAAtC,UAAsDC,EAAtD,mBACFC,EADE,2BACkBC,EADlB,OAEqDC,EAFrD,aAGFC,EAHE,wBAGYC,GACdR,EAEExb,EAASf,EAAUgB,kBAAkBmV,EAAYnU,IAEvD,OAAQ,mBACJ,kBAAID,QAASxE,KAAK+T,qBAAsB0L,aAAY5c,EAAO/D,OACvD,kBAAI6Z,MAAM,OACL5N,EAAM,EACNnI,GAAWsc,GAAkB,mBAC1B,uBAAOA,EAAeQ,SAAW,iBAAGpe,MAAM,iCAAoC,iBAAGA,MAAM,yCAG/F,kBACIA,MAAQ,IAAEsW,EAAe/U,EAAO/D,OAAS,mBAAqB,IAC9DmF,MAAQ,IAAE2T,EAAe/U,EAAO/D,OAAS,GAAK,wBAE7C8Y,EAAe/U,EAAO/D,OAAS,mBAC3B+D,EAAOuB,UADoB,IACRvB,EAAOwB,SAAS,uBACpC,oBAAM/C,MAAM,cAAcsX,EAAYhU,MAAY,uBAClD,qBAAOtD,MAAM,cAAcuB,EAAOyB,YAAmB,uBACpDzB,EAAOyN,UAAY,iBAAGhP,MAAM,OAAOoD,KAAMpG,IAAG8a,eAAevW,EAAOyN,UAAW+I,QAAM,EAACtR,OAAO,SAASuR,IAAI,cAAa,iBAAGhY,MAAM,qBAC9HuB,EAAO0N,WAAa,iBAAGjP,MAAM,OAAOoD,KAAMpG,IAAGib,gBAAgB1W,EAAO0N,WAAY8I,QAAM,EAACtR,OAAO,SAASuR,IAAI,cAAa,iBAAGhY,MAAM,sBACjIuB,EAAO2W,QAAU,mBAAKlY,MAAM,uBACzB,iBAAGA,MAAM,+BADK,IAC4BuB,EAAO2W,OAChD3W,EAAO4W,WAAa,mBACjB,iBAAGnY,MAAM,gCAGhBuB,EAAO6W,QAAU,mBAAKpY,MAAM,uBAAsB,iBAAGA,MAAM,+BAA1C,IAA2EuB,EAAO6W,QACnG7W,EAAO8W,QAAU,mBAAKrY,MAAM,uBAAsB,iBAAGA,MAAM,+BAA1C,IAA2EuB,EAAO8W,SAElG,mBACD9W,EAAO2W,QAAU,oBAAMlY,MAAM,2BAA2B2C,MAAM,qBAC3D,iBAAG3C,MAAM,kBACRuB,EAAO4W,WAAa,mBACjB,iBAAGnY,MAAM,gCAGjB,wBACKuB,EAAOuB,UADZ,IACwBvB,EAAOwB,SAAS,uBACpC,qBAAO/C,MAAM,cAAcuB,EAAOyB,YAAmB,0BAMhE1B,GAAW,mBACR,kBAAItB,MAAM,0BAA0BuB,EAAOwN,WAC3C,kBAAI/O,MAAM,0BAA0BuB,EAAO/D,QAG9C8D,GAAW,kBAAItB,MAAM,0BACjBsB,GAAW,mBACR,sBAAQtB,MAAM,qCAAqCkD,QAASxE,KAAKiU,qBAAqB,iBAAG3S,MAAM,uBAGjGsB,GAAWoR,EAAgBnR,EAAO/D,QAAW,mBAC3C,qCAEA,mBAAKwC,MAAM,uBACP,qBAAOA,MAAM,sCAAb,SACA,mBAAKA,MAAM,aACNuB,EAAO/D,QAGhB,mBAAKwC,MAAM,uBACP,qBAAOA,MAAM,sCAAb,aACA,mBAAKA,MAAM,aACNuB,EAAOwN,YAIhB,mBAAK/O,MAAM,uBACP,qBAAOoQ,IAAI,OAAOpQ,MAAM,sCAAxB,eACA,mBAAKA,MAAM,aACP,sBAAQA,MAAM,yBAAyBmD,GAAG,aACtCuN,eAAcnP,EAAOvB,MACrB2Q,oBAAmBpP,EAAO4B,GAC1ByN,QAASlS,KAAK2U,gBACdvM,MAAOvF,EAAOmW,YAEd,sBAAQ5Q,MAAM,IAAd,4BACA,sBAAQA,MAAM,MAAd,sBACA,sBAAQA,MAAM,OAAd,uBACA,sBAAQA,MAAM,OAAd,wBACA,sBAAQA,MAAM,OAAd,yBACA,sBAAQA,MAAM,MAAd,qBACA,sBAAQA,MAAM,MAAd,gCAIZ,mBAAK9G,MAAM,uBACP,qBAAOoQ,IAAI,cAAcpQ,MAAM,sCAA/B,gBACA,mBAAKA,MAAM,aACP,qBAAO0J,KAAK,OAAO1J,MAAM,yBAAyBmD,GAAG,cACjDuN,eAAcnP,EAAOvB,MACrB2Q,oBAAmBpP,EAAO4B,GAC1ByN,QAASlS,KAAK2U,gBACdvM,MAAOvF,EAAOoW,gBAI1B,mBAAK3X,MAAM,uBACP,qBAAOoQ,IAAI,qBAAqBpQ,MAAM,sCAAtC,+BACA,mBAAKA,MAAM,aACP,qBAAO0J,KAAK,OAAO1J,MAAM,yBAAyBmD,GAAG,qBACjDuN,eAAcnP,EAAOvB,MACrB2Q,oBAAmBpP,EAAO4B,GAC1ByN,QAASlS,KAAK2U,gBACdvM,MAAOvF,EAAOqW,mBAAqBja,IAAKyT,QAAQ7P,EAAOqW,oBAAoB,GAAO,GAAO,GAAQ,SAK7G,mBAAK5X,MAAM,uBACP,qBAAOoQ,IAAI,SAASpQ,MAAM,sCAA1B,WACA,mBAAKA,MAAM,aACP,qBAAO0J,KAAK,OAAO1J,MAAM,yBAAyBmD,GAAG,SACjDuN,eAAcnP,EAAOvB,MACrB2Q,oBAAmBpP,EAAO4B,GAC1ByN,QAASlS,KAAK2U,gBACdvM,MAAOvF,EAAO2W,WAI1B,mBAAKlY,MAAM,uBACP,qBAAOoQ,IAAI,SAASpQ,MAAM,sCAA1B,WACA,mBAAKA,MAAM,aACP,qBAAO0J,KAAK,OAAO1J,MAAM,yBAAyBmD,GAAG,SACjDuN,eAAcnP,EAAOvB,MACrB2Q,oBAAmBpP,EAAO4B,GAC1ByN,QAASlS,KAAK2U,gBACdvM,MAAOvF,EAAO6W,WAI1B,mBAAKpY,MAAM,uBACP,qBAAOoQ,IAAI,SAASpQ,MAAM,sCAA1B,WACA,mBAAKA,MAAM,aACP,qBAAO0J,KAAK,OAAO1J,MAAM,yBAAyBmD,GAAG,SACjDuN,eAAcnP,EAAOvB,MACrB2Q,oBAAmBpP,EAAO4B,GAC1ByN,QAASlS,KAAK2U,gBACdvM,MAAOvF,EAAO8W,WAI1B,mBAAKrY,MAAM,uBACP,qBAAOoQ,IAAI,YAAYpQ,MAAM,sCAA7B,cACA,mBAAKA,MAAM,aACP,qBAAO0J,KAAK,OAAO1J,MAAM,yBAAyBmD,GAAG,YACjDuN,eAAcnP,EAAOvB,MACrB2Q,oBAAmBpP,EAAO4B,GAC1ByN,QAASlS,KAAK2U,gBACdvM,MAAOvF,EAAO4W,UAAYxa,IAAKyT,QAAQ7P,EAAO4W,WAAW,GAAO,GAAO,GAAQ,UAO9F7W,GAAW,mBAAKtB,MAAM,oBAClB2d,GAAiBA,EAAc7Z,IAAI,CAACua,EAAO5U,KACxC,MAAMrJ,EAAUie,EAAMpa,WAAa8B,EAAayD,SAAW,IAErD8U,GADQle,EAAU,KAAY0P,SAAS1P,EAAS,IACjCpB,KAAKC,MAAM,IAAIC,KAAKmf,EAAMjI,MAAMjX,UAAY,MAC3Dof,EAAS,IAAIrf,KAAK,GACxBqf,EAAOC,cAAcF,EAAexO,SAASuO,EAAM/Z,SAAU,KAC9C+Z,EAAM3a,OAAOuC,OAC5B,OAAIqQ,EAAe/U,EAAO/D,OACd,mBACJ,mBAAKwC,MAAM,qEAAqE2C,MAAQ,mCACpF,mBAAK8b,QAAQ,cAAcze,MAAM,oBAAoB2C,MAAM,iEACvD,oBAAMoB,EAAI,GAAEsa,EAAMK,aAAgB/b,MAAM,oEAE5C,mBAAK3C,MAAM,0BACP,oBAAMA,MAAM,oBAAoB2C,MAAM,0CACjC8G,EAAM,GAEX,yBACKnI,GAAW,oBAAMtB,MAAM,oBAAoB2C,MAAM,0BAC7C0b,EAAMD,SAAW,iBAAGpe,MAAM,4BAA+B,iBAAGA,MAAM,mCAEvE,oBAAMA,MAAM,cACR,wBAAM,iBAAG2C,MAAM,eAAe3C,MAAM,mCAApC,IAAyErC,IAAK2S,WAAW+N,EAAMjI,KAAM,CAAElE,OAAQrJ,EAAUsJ,QAAQ,EAAOC,KAAM,UAAWC,OAAQ,aACjK,wBAAM,iBAAG1P,MAAM,eAAe3C,MAAM,kCAApC,IAAwErC,IAAK2S,WAAWiO,EAAQ,CAAErM,OAAQrJ,EAAUsJ,QAAQ,EAAOC,KAAM,UAAWC,OAAQ,cAEhK,oBAAMrS,MAAM,eAGR,wBAAM,iBAAG2C,MAAM,eAAe3C,MAAM,2BAApC,IAAiErC,IAAKwG,OAAOka,EAAMpa,WAAY,IAAM,MAArG,IAA4G,oBAAMjE,MAAM,uBAAZ,OAC5G,wBAAM,iBAAG2C,MAAM,eAAe3C,MAAM,+BAApC,IAAqErC,IAAKwG,OAAOka,EAAMja,UAAW,IAAM,MAAxG,IAA+G,oBAAMpE,MAAM,uBAAZ,MAC/G,wBAAM,iBAAG2C,MAAM,eAAe3C,MAAM,qCAApC,IAA2ErC,IAAKwG,OAAOka,EAAMM,SAAU,IAAM,MAA7G,IAAoH,oBAAM3e,MAAM,uBAAZ,SAAoD,uBAExK,wBAAM,iBAAG2C,MAAM,eAAe3C,MAAM,4BAApC,IAAkErC,IAAK0G,SAASga,EAAM/Z,WAAa,OACnG,wBAAM,iBAAG3B,MAAM,eAAe3C,MAAM,2BAApC,IAAiErC,IAAK0G,SAASga,EAAM9Z,OAAS,OAC9F,wBAAM,iBAAG5B,MAAM,eAAe3C,MAAM,8BAApC,IAAoErC,IAAK0G,SAASga,EAAM/Z,SAAW+Z,EAAM9Z,OAAS,OAAa,uBAE/H,wBAAM,iBAAG5B,MAAM,eAAe3C,MAAM,0BAApC,IAAgErC,IAAKwG,OAAOka,EAAMO,QAAS,IAAM,YAOjH,mBACJ,mBAAK5e,MAAM,yEAAyE2C,MAAQ,mCACxF,yBACKrB,GAAW,oBAAMtB,MAAM,oBAAoB2C,MAAM,0BAC7C0b,EAAMD,SAAW,iBAAGpe,MAAM,4BAA+B,iBAAGA,MAAM,kCAGvE,oBAAMA,MAAM,cAAcyJ,EAAM,GAChC,wBAAM,iBAAG9G,MAAM,eAAe3C,MAAM,2BAApC,IAAiErC,IAAKwG,OAAOka,EAAMpa,WAAY,IAAM,MAArG,IAA4G,oBAAMjE,MAAM,uBAAZ,OAC5G,wBAAM,iBAAG2C,MAAM,eAAe3C,MAAM,qCAApC,IAA2ErC,IAAKwG,OAAOka,EAAMM,SAAU,IAAM,MAA7G,IAAoH,oBAAM3e,MAAM,uBAAZ,SACpH,wBAAM,iBAAG2C,MAAM,eAAe3C,MAAM,4BAApC,IAAkErC,IAAK0G,SAASga,EAAM/Z,WAAa,cAQ3H,kBAAItE,MAAM,qCAxiB1D,SAAoBuB,GACnB,OAAQA,EAAOmW,YACd,IAAK,KACJ,OAAQ,mBACP,oBAAM1X,MAAM,+BAA+B2C,MAAM,yBAAwB,iBAAG3C,MAAM,gCAEpF,IAAK,MAIL,IAAK,MAIL,IAAK,MAIL,IAAK,KACJ,OAAQ,mBACP,oBAAMA,MAAM,4EAA4E2C,MAAM,uCAAsC,iBAAG3C,MAAM,uBAA7I,IAAsKuB,EAAOmW,aAE/K,IAAK,KACJ,OAAQ,mBACP,oBAAM1X,MAAM,6EAA6E2C,MAAM,uCAAsC,iBAAG3C,MAAM,uBAA9I,IAAuKuB,EAAOmW,aAEhL,QACC,MAAO,IA8gB2CA,CAAWnW,GACXA,EAAOoW,aAAe,mBACnB,mBAAK3X,MAAM,gCAAgCuQ,KAAK,SAC5C,iBAAGvQ,MAAM,8CAA8C2C,MAAM,sBAC7D,YAAC,IAAD,CAAUY,SAAUvG,IAAGwG,cAAcjC,EAAOoW,YAAa7S,EAAKpB,OAAQmF,GAAWlF,aAAc3G,IAAG4G,yBAGxGtC,GAAWsc,EAAeiB,YAAc7B,GAA0B,mBAChE,mBAAKhd,MAAM,iDAAiDuQ,KAAK,SAC7D,iBAAGvQ,MAAM,8CAA8C2C,MAAM,sBAC7D,iBAAG3C,MAAM,uBAFb,kBAEoDrC,IAAK2S,WAAWsN,EAAeiB,YAAa,CAAE3M,OAAQrJ,EAAUsJ,QAAQ,EAAOC,KAAM,UAAWC,OAAQ,cAG/JwL,GAAa,GAAK,oBAAM7d,MAAM,oBAAoB2C,MAAM,yBAAwB,iBAAG3C,MAAM,wCAAiD,GAC3I,yBACKsW,EAAe/U,EAAO/D,OAAS,mBAC5B,wBAAM,iBAAGmF,MAAM,eAAe3C,MAAM,2BAApC,IAAiErC,IAAKwG,OAAOyZ,EAAe3Z,WAAY,IAAM,MAA9G,IAAqH,oBAAMjE,MAAM,uBAAZ,OAErH,wBAAM,iBAAG2C,MAAM,eAAe3C,MAAM,+BAApC,IAAqErC,IAAKwG,OAAOyZ,EAAexZ,UAAW,IAAM,MAAjH,IAAwH,oBAAMpE,MAAM,uBAAZ,MACxH,mBAAKA,MAAM,gBAAgB2C,MAAM,gBAC7B,mBAAK3C,MAAQ,iBAAe6d,GAAa,GAAK,aAAe,IACzDtN,KAAK,cACL5N,MAAQ,UAASkb,KACjBnB,gBAAgB,GAAEmB,EAClBlB,gBAAc,IACdC,gBAAc,SAIrB9X,EAAKga,QAAU,mBACZ,wBAAM,iBAAGnc,MAAM,eAAe3C,MAAM,4BAApC,IAAkErC,IAAK0G,SAAS6Z,IAA4B,OAC5G,wBAAM,iBAAGvb,MAAM,eAAe3C,MAAM,2BAApC,IAAiErC,IAAK0G,SAASnC,EAAO6c,YAAc,OAEpG,uBAAM,wBAAM,iBAAGpc,MAAM,eAAe3C,MAAM,+BAApC,IAAqErC,IAAKyT,QAAQlP,EAAO8c,YAAzF,MAAwG,iBAAGrc,MAAM,eAAe3C,MAAM,+BAAtI,IAAuKrC,IAAKyT,QAAQ6M,IACzL3c,GAAW,mBACR,uBACA,mBAAKtB,MAAM,eACNkC,EAAO+c,oBAAsB,mBAC1B,+CAA2BthB,IAAKyT,QAAQlP,EAAO+c,qBAA2B,wBAE7E/c,EAAOgd,mBAAqB,mBACzB,8CAA0BvhB,IAAKyT,QAAQlP,EAAOgd,oBAA0B,2BAIlF,mBACF,wBAAM,iBAAGvc,MAAM,eAAe3C,MAAM,4BAApC,IAAkErC,IAAK0G,SAASuZ,EAAetZ,WAAa,OAC5G,wBAAM,iBAAG3B,MAAM,eAAe3C,MAAM,2BAApC,IAAiErC,IAAK0G,SAASuZ,EAAerZ,OAAS,OACvG,wBAAM,iBAAG5B,MAAM,eAAe3C,MAAM,8BAApC,IAAoErC,IAAK0G,SAASuZ,EAAetZ,SAAWsZ,EAAerZ,OAAS,OAAa,uBACrI,IAAXyZ,GAAgB,mBAAE,oBAAMhe,MAAM,oBAAmB,oBAAMA,MAAM,kCAAZ,gCAA/B,IAAgH,iBAAG2C,MAAM,eAAe3C,MAAM,4BAA9I,IAA4KrC,IAAK0G,SAASyZ,IAAuB,OAAa,wBACrO,IAAXE,GAAgB,mBAAE,oBAAMhe,MAAM,oBAAmB,oBAAMA,MAAM,kCAAZ,eAA/B,IAA+F,iBAAG2C,MAAM,eAAe3C,MAAM,4BAA7H,IAA2JrC,IAAK0G,SAAS0Z,IAA+B,OAAa,0BAI1O,mBACF,wBAAM,iBAAGpb,MAAM,eAAe3C,MAAM,2BAApC,IAAiErC,IAAKwG,OAAOyZ,EAAe3Z,WAAY,IAAM,MAA9G,IAAqH,oBAAMjE,MAAM,uBAAZ,OAErH,wBAAM,iBAAG2C,MAAM,eAAe3C,MAAM,+BAApC,IAAqErC,IAAKwG,OAAOyZ,EAAexZ,UAAW,IAAM,MAAjH,IAAwH,oBAAMpE,MAAM,uBAAZ,MAExH,mBAAKA,MAAM,gBAAgB2C,MAAM,gBAC7B,mBAAK3C,MAAQ,iBAAe6d,GAAa,GAAK,aAAe,IACzDtN,KAAK,cACL5N,MAAQ,UAASkb,KACjBnB,gBAAgB,GAAEmB,EAClBlB,gBAAc,IACdC,gBAAc,SAIrB9X,EAAKga,QAAU,mBACZ,wBAAM,iBAAGnc,MAAM,eAAe3C,MAAM,4BAApC,IAAkErC,IAAK0G,SAAS6Z,IAA4B,OAC5G,wBAAM,iBAAGvb,MAAM,eAAe3C,MAAM,2BAApC,IAAiErC,IAAK0G,SAASnC,EAAO6c,YAAc,QAClG,mBACU,IAAXf,EAAe,mBACZ,oBAAMhe,MAAM,oBAAmB,iBAAG2C,MAAM,eAAe3C,MAAM,4BAA7D,IAA2FrC,IAAK0G,SAAS0Z,IAA+B,OAAa,wBACnJ,mBACF,wBAAM,iBAAGpb,MAAM,eAAe3C,MAAM,4BAApC,IAAkErC,IAAK0G,SAASuZ,EAAetZ,WAAa,OAAa,mCA0BrK,mBAAKtE,MAAM,0BACP,yBACkB,OAAb6I,GAAqB,wIACgG,uBADhG,uEAIR,OAAbA,GAAqB,yJACiH,uBADjH,0EAYjDvH,GAAW,mBACX,sBACCtB,MAAM,wCACNkD,QAASxE,KAAKoe,uBAFf,kCAMA,mBAAK9c,MAAM,OAAOwE,KAAKC,UAAUsY,EAAa,KAAM,KAGzC,mBAAK/c,MAAM,uEACP,iBAAGA,MAAM,mCAAmCoD,KAAO,sCAAqC0B,EAAK3B,cAA7F,sB,EAOL0Z,Q","file":"route-app-races.chunk.59ac0.esm.js","sourcesContent":["import { h, Component } from 'preact';\nimport { useEffect } from 'preact/hooks';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport { Text, Localizer } from 'preact-i18n';\nimport { route } from 'preact-router';\nimport Markdown from 'preact-markdown';\nimport linkstate from 'linkstate';\n\nimport Trackmap from '../../components/public/trackmap';\nimport Gauge from '../../components/gauge';\n\nimport DogScroller from '../../components/dog/scroller';\nimport Overlay from '../../components/overlay/';\nimport TeamsPublicDetail from '../../routes/teams/publicDetail';\nimport DogPublicDetail from '../../routes/dogs/publicDetail';\n\nimport mu from '../../lib/musher-util';\nconst MARGIN_TOP = mu.marginTop(false);\nconst MARGIN_TOP_BACK = mu.marginTopBack(false);\nconst MARGIN_BOTTOM = mu.marginBottom();\nconst SUB_MENU_MARGIN_TOP = mu.subMenuMarginTop();\n\nfunction PageTitle(title, classes = '', style = '') {\n    useEffect(() => {\n        document.title = `Homerun Race: ${title}`;\n    }, [title]);\n    return <span class={classes} style={style}>{title}</span>;\n}\n\nfunction getWindowDimensions() {\n    const { innerWidth: width, innerHeight: height } = window;\n    return {\n        width,\n        height\n    };\n}\n\nconst initialState = {\n    isLoading: false,\n    email: '',\n    submenu: 'ads',\n    jwtToken: util.getJwtToken(),\n\n    reloadInSec: null,\n    reloadIsActive: false,\n\n    leaderboardMode: 'mushers',\n    filterByraceClass: '',\n    showLeaderBoard: true,\n    showNews: true,\n};\n\nconst RELOAD_INTERVAL_IN_SEC = 60;\n\n@observer\nclass ReloadTimer extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            ...initialState,\n        };\n        this.updateTimer = {};\n    }\n\n    initComponent = () => {\n        this.setState({\n            reloadIsActive: true,\n        }, () => this.tickReloadTimeer());\n    }\n\n    tickReloadTimeer = () => {\n        const { reloadLastEpoch } = this.props;\n        const { reloadIsActive } = this.state;\n        if (reloadIsActive) {\n            const now = Math.floor(new Date().getTime() / 1000);\n            const reloadInSec = RELOAD_INTERVAL_IN_SEC - (now - reloadLastEpoch);\n            this.setState({ reloadInSec });\n            clearTimeout(this.updateTimer.tick);\n            this.updateTimer.tick = setTimeout(() => this.tickReloadTimeer(), 1000);\n        }\n        return false;\n    }\n\n    componentDidMount() {\n        this.initComponent();\n    }\n\n    componentWillUnmount() {\n        clearTimeout(this.updateTimer.tick);\n    }\n\n    render() {\n        const { reloadInSec } = this.state;\n        const { radius = 13, fontSize = 11, classNames = '' } = this.props;\n        const reloadPercent = Math.floor(util.normalizeBetween(reloadInSec, 0, RELOAD_INTERVAL_IN_SEC, 0, 100))\n\n        return (<>\n            <span class={classNames}>\n                <Gauge key={`gauge-reload-page`}\n                    color='primary'\n                    radius={radius}\n                    showPercentText={false}\n                    percent={reloadPercent}\n                    showCenterText={true}\n                    centerText={reloadInSec}\n                    centerTextSize={fontSize}\n                    centerTextY={'55%'}\n                />\n            </span>\n        </>);\n    }\n}\n\n@observer\nclass MusherInfo extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n        };\n    }\n\n    toggleAdminInfo = (e) => {\n        e.stopPropagation();\n        const { showAdminInfo } = this.state;\n        this.setState({\n            showAdminInfo: !showAdminInfo,\n        });\n    }\n\n    toggleInfo = (e) => {\n        e.stopPropagation();\n        const { showInfo } = this.state;\n        this.setState({\n            showInfo: !showInfo,\n        });\n    }\n\n    render() {\n        const { showAdminInfo, showInfo } = this.state;\n        const { bib, email, onTeamClick, onUserClick, onDogClick } = this.props;\n\n        const { raceStore, userStore } = this.props.stores;\n        const { isAdmin } = userStore;\n        const musher = bib ? raceStore.getMusherByBibId(bib) : raceStore.getMusherByBibEmail(email);\n        const team = raceStore.getTeamById(musher.team);\n        const user = team.members ? team.members.find(m => m.email === musher.email) : {};\n        const raceClass = raceStore.getClassByTeamId(musher.team);\n        const totals = raceStore.getTotalsByTeamId(musher.team);\n        const image = mu.getImage({ user, team, priority: 'user' });\n        const shortname = mu.displayNameShort(user) || mu.displayNameShort(musher);\n\n        const dotColor = mu.getRankingColor(musher.bib);\n        \n        return (<>\n            <div class='d-flex position-relative'>\n                <div\n                    class={`position-relative text-center border rounded-circle imageRounded imageRoundedMedium`}\n                    style={image ? `background-image: url(\"${image}\"); background-size: cover;` : ''}\n                >\n                    {!image && <div class='text-muted' style='font-size: 25px; padding-top: 5px;'>{shortname}</div>}\n                    <div\n                        class={`rounded-pill-both px-2 text-center position-absolute ${dotColor ? '' : 'bg-secondary'} font-weight-bold`}\n                        style={`bottom: -20px; right: 0; ${dotColor ? `background-color: ${dotColor};` : ''}`}\n                    >\n                        {musher.bib && musher.bib !== 'n/a' && <>{musher.bib}</>}\n                    </div>\n                </div>\n                <div class='flex-grow-1 pl-3 text-overflow mb-3' style='line-height: 1.2em;'>\n                    <h6 class='font-weight-light mb-0'>{raceClass.title}</h6>\n                    <h3 class='mb-0'>\n                        {musher.flag} {musher.firstname} {musher.lastname}\n                    </h3>\n                    <h6 class='mb-0'>{musher.sportsClub}</h6>\n                </div>\n            </div>\n\n\n            {team.public > 0 && <>\n                {showInfo ? <>\n                    <button class='btn btn-link float-right' onClick={this.toggleInfo}>\n                        <i class='fas fa-angle-up' /> <Text id='races.hide-info'>Hide info</Text>\n                    </button>            \n                </> : <>\n                    <button class='btn btn-link float-right' onClick={this.toggleInfo}>\n                        <i class='fas fa-angle-down' /> <Text id='races.show-info'>Show info</Text>\n                    </button>            \n                </>}\n\n                <h3>\n                    {team.public ? <>\n                        <a href={`/teams/public/${team.uuidv4}`} onClick={(e) => onTeamClick(e, team.uuidv4)}>\n                            {team.name}\n                        </a>\n                    </> : <>\n                        {team.name}\n                    </>}\n                </h3>\n                {showInfo && <>\n                    <Markdown markdown={mu.replaceImages(team.description, team.images)} markdownOpts={mu.getMarkdownOptions()} />\n                </>}\n                {team.dogs && <div class='w-100 container-fluid'>\n                    <div class='row pt-2'>\n                        <DogScroller stores={this.props.stores} dogs={team.dogs.map(d => d.id)} allDogs={team.dogs} onDogClick={onDogClick} />\n                    </div>\n                </div>}\n            </>}\n\n            {totals && totals.distanceKm && <>\n                <div class='table-responsive-lg'>\n                    <table class='table table-borderless'>\n                        <tbody>\n                            <tr>\n                                <td style='width: 5%;'><i class='fas fa-dog' /></td>\n                                <td style='width: 60%'><Text id='races.dogs'>Dogs</Text></td>\n                                <td style='width: 5%;'>&nbsp;</td>\n                                <td class='text-right' style='width: 30%;'>{team.dogs.length}</td>\n                            </tr>\n                            <tr>\n                                <td><i class='fas fa-road' /></td>\n                                <td><Text id='races.distance'>Distance</Text></td>\n                                <td>&nbsp;</td>\n                                <td class='text-right'><nobr>{totals.distanceKm ? `${util.format(totals.distanceKm, 1)} km` : 'n/a'}</nobr></td>\n                            </tr>\n                            <tr>\n                                <td><i class='fas fa-mountain' /></td>\n                                <td><Text id='races.ascend'>Ascending</Text></td>\n                                <td>&nbsp;</td>\n                                <td class='text-right'><nobr>{totals.elevation ? `${util.format(totals.elevation, 0)} m` : 'n/a'}</nobr></td>\n                            </tr>\n                            <tr>\n                                <td><i class='fas fa-stopwatch' /></td>\n                                <td><Text id='races.race-time'>Racetime</Text></td>\n                                <td><i class='fas fa-clock' /></td>\n                                <td class='text-right'><nobr>{util.secToHms(totals.duration) || 'n/a'}</nobr></td>\n                            </tr>\n                            <tr>\n                                <td><i class='fas fa-bed' /></td>\n                                <td><Text id='races.rest-time'>Rest</Text></td>\n                                <td><i class='fas fa-clock' /></td>\n                                <td class='text-right'><nobr>{util.secToHms(totals.rest) || 'n/a'}</nobr></td>\n                            </tr>\n                        </tbody>\n                    </table>\n                </div>\n            </>}\n\n\n            {isAdmin && <div style='max-height: 200px; max-width: 70vw; overflow: auto;'>\n                <button class='btn btn-link btn-block' onClick={this.toggleAdminInfo}>\n                    Toggle admin info\n                </button>\n                {showAdminInfo && <>                \n                    <small>\n                        <xmp>\n                            {JSON.stringify(musher, null, 4)}\n                            {JSON.stringify(user, null, 4)}\n                            {JSON.stringify(team, null, 4)}\n                            {JSON.stringify(totals, null, 4)}\n\n                            {/* {\n                                \"firstDate\": \"2021-03-19 11:59\",\n                                \"lastDate\": \"2021-03-20 17:13\",\n                                \"firstEpoch\": 1616151540000,\n                                \"lastEpoch\": 1616256780000,\n                                \"now\": {\n                                    \"$numberDecimal\": \"1642675856939\"\n                                },\n                                \"totalTimeUsedSec\": 26524316,\n                                \"totalWorkoutTimeUsedSec\": 130895,\n                                \"lastDuration\": 25655,\n                                \"team\": 84,\n                                \"count\": 4,\n                                \"distanceKm\": 301.5906237951766,\n                                \"elevation\": 3610.019075719202,\n                                \"duration\": 77343,\n                                \"rest\": 1332,\n                                \"speedAvg\": 8.294634979660305,\n                                \"totalRest\": 54884,\n                                \"loadIndex\": 1080.75,\n                                \"totalKcalRelated\": 544.535560976128,\n                                \"weightedTotalKcal\": 12303.171406247127,\n                                \"flatTotalKcal\": 9424.70699359927,\n                                \"firstGpxStartEpoch\": null,\n                                \"lastGpxStartEpoch\": null\n                            } */}\n\n                        </xmp>\n                    </small>\n                </>}\n            </div>}\n        </>);\n    }\n}\n\n@observer\nclass AppRaceDetailTracking extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            ...initialState,\n            reloadLastEpoch: Math.floor(new Date().getTime() / 1000),\n        };\n        this.updateTimer = {};\n    }\n\n    loadLiveRaceResults = async (props = this.props, teamIds, focusOnMushers) => {\n        const { raceStore } = props.stores;\n        const { race } = raceStore;\n        await raceStore.getRaceTrackerData(race.raceTrackerRace);\n        raceStore.getRaceTrackerActiveTeams(teamIds);\n    }\n\n    loadRaceResults = async (props = this.props, teamIds, focusOnMushers) => {\n        const { raceStore } = props.stores;\n        const { raceid } = props;\n\n        await raceStore.loadWorkoutSummary(teamIds, raceid);\n        raceStore.getWorkoutSummaryActiveTeams(focusOnMushers);\n    }\n\n    loadRace = async (props = this.props) => {\n        this.setState({ isLoading: true });\n        const { raceStore, appState } = props.stores;\n        const { raceid } = props;\n        await raceStore.load(raceid);\n        const { race } = raceStore;\n        const { focusOnMushers } = appState;\n\n        const { selectedClassIds = [] } = appState;\n        const selectedClassId = selectedClassIds[0];\n        const allTeamIds = race.classes\n            .filter(currentClass => currentClass.id === selectedClassId)\n            .filter(currentClass => currentClass.contestants && currentClass.contestants.length > 0)\n            .map((currentClass) => {\n                return currentClass.contestants.filter(musher => musher.team > 0).map(musher => musher.team);\n            })\n            .flat();\n        if (allTeamIds.length > 0) {\n            await raceStore.loadTeams(allTeamIds.join(','));\n        }\n        if (race.liveRace > 0) {\n            await this.loadLiveRaceResults(this.props, allTeamIds, focusOnMushers);\n\n        } else {\n            await this.loadRaceResults(this.props, allTeamIds, focusOnMushers);\n        }\n\n        // const allTeamIds = race.classes.filter(currentClass => currentClass.contestants && currentClass.contestants.length > 0).map((currentClass) => {\n        //     return currentClass.contestants.filter(musher => musher.team > 0).map(musher => musher.team);\n        // }).flat();\n\n        // if (allTeamIds.length > 0) {\n        //     await raceStore.loadTeams(allTeamIds.join(','));\n        //     if (race.liveRace > 0) {\n        //         await this.loadLiveRaceResults(props, allTeamIds, focusOnMushers);\n\n        //     } else {\n        //         await this.loadRaceResults(props, allTeamIds, focusOnMushers);\n        //     }\n        // }\n        raceStore.getAllClassesSortedBy();\n\n        // Set reload timer\n        clearTimeout(this.updateTimer.reload);\n        this.updateTimer.reload = setTimeout(async () => {\n            const reloadLastEpoch = Math.floor(new Date().getTime() / 1000);\n            this.setState({ reloadLastEpoch });\n            this.loadRace(props);\n        }, RELOAD_INTERVAL_IN_SEC * 1000);\n\n        this.setState({ isLoading: false });\n    }\n\n    setLeaderboardMode = (e) => {\n        const leaderboardMode = e.target.parentElement.dataset.mode || e.target.dataset.mode;\n        this.setState({ leaderboardMode })\n    }\n\n    chooseRaceClass = (e) => {\n        const filterByraceClass = e.target.value;\n        this.setState({ filterByraceClass })\n    }\n\n    toggleShowLeaderBoard = (hide) => {\n        const { showLeaderBoard } = this.state;\n        if (hide === true) {\n            this.setState({ showLeaderBoard: false });\n        } else {\n            this.setState({ showLeaderBoard: !showLeaderBoard });\n        }\n    }\n\n    toggleShowNews = (hide) => {\n        const { showNews } = this.state;\n        if (hide === true) {\n            this.setState({ showNews: false });\n        } else {\n            this.setState({ showNews: !showNews });\n        }\n    }\n\n    componentWillUnmount() {\n        clearTimeout(this.updateTimer.reload);\n        clearTimeout(this.updateTimer.tick);\n    }\n\n    componentDidMount() {\n        this.loadRace();\n        const { width, height } = getWindowDimensions();\n        if (width < 800) {\n            this.toggleShowLeaderBoard(true);\n            this.toggleShowNews(true);\n        }\n    }\n\n    onMarkerClick = ({ title, bib, email, e }) => {\n        const { showModal } = this.state;\n        this.setState({\n            showModal: !showModal,\n            modalTitle: title,\n            modalBib: bib,\n            modalEmail: email,\n        });\n    }\n\n    toggleModal = () => {\n        const { showModal } = this.state;\n        this.setState({\n            showModal: !showModal,\n        });\n    }\n\n    // Overlay functions\n    onTeamClick = (e, teamid) => {\n        e.preventDefault();\n        e.stopPropagation();\n        this.setState({\n            showTeam: teamid,\n        });\n        return false;\n    }\n\n    hideTeam = () => {\n        this.setState({\n            showTeam: null,\n        });\n    }\n\n    onUserClick = (e, userid) => {\n        e.preventDefault();\n        e.stopPropagation();\n        return false;\n    }\n\n    onDogClick = (e, dogid, dogs) => {\n        e.preventDefault();\n        e.stopPropagation();\n        this.setState({\n            showDog: dogid,\n            dogs,\n        });\n        return false;\n    }\n\n    hideDog = () => {\n        this.setState({\n            showDog: null,\n        });\n    }\n\n    // /Overlay functions\n\n\tfilterByClass = async (e) => {\n\t\tconst selectedClassId = e.target.closest('button').dataset.id;\n\t\tconst { appState, raceStore } = this.props.stores;\n\t\tappState.toggleSelectedClassId(selectedClassId, true);\n\n        const { race } = raceStore;\n        const { focusOnMushers } = appState;\n\n        const allTeamIds = race.classes\n            .filter(currentClass => currentClass.id === selectedClassId)\n            .filter(currentClass => currentClass.contestants && currentClass.contestants.length > 0)\n            .map((currentClass) => {\n                return currentClass.contestants.filter(musher => musher.team > 0).map(musher => musher.team);\n            })\n            .flat();\n        if (allTeamIds.length > 0) {\n            await raceStore.loadTeams(allTeamIds.join(','));\n        }\n        if (race.liveRace > 0) {\n            await this.loadLiveRaceResults(this.props, allTeamIds, focusOnMushers);\n\n        } else {\n            await this.loadRaceResults(this.props, allTeamIds, focusOnMushers);\n        }\n\t}\n\n    back = () => {\n        const { history } = this.props.stores;\n        history.goBack();\n    }\n\n    render() {\n        const { userStore, raceStore, appState } = this.props.stores;\n        const { user = {}, teams = [], isAdmin } = userStore;\n        const { language = 'en' } = user;\n\n        const { raceid, path } = this.props;\n        const { focusOnMushers = [], infoOnMushers = [], selectedClassIds = [] } = appState;\n\n        const filterByClassId = (c) => {\n\t\t\tif (selectedClassIds.length > 0) {\n\t\t\t\treturn selectedClassIds.indexOf(c.id) > -1;\n\t\t\t}\n\t\t\treturn true;\n\t\t};\n\n        const { leaderboardMode, filterByraceClass, showLeaderBoard, showNews, reloadLastEpoch,\n            showModal, modalTitle, modalBib, modalEmail,\n            showTeam, showDog,\n            submenu,\n        } = this.state;\n\n        const { activeTeams, teamList, waypoints, waypoints2, waypoints3, zoomToMarkers, classes, race, racetrackerData } = raceStore;\n\n        const musher = modalBib ? raceStore.getMusherByBibId(modalBib) : raceStore.getMusherByBibEmail(modalEmail);\n        const team = raceStore.getTeamById(musher.team);\n\n\n        return (<>\n            {showTeam && <Overlay>\n                <TeamsPublicDetail stores={this.props.stores} teamid={showTeam} marginTop={'0px;'} marginBottom={'0px;'} back={this.hideTeam} hideTeam={this.hideTeam} />\n            </Overlay>}\n            {showDog && <Overlay>\n                <DogPublicDetail stores={this.props.stores} dogid={showDog} marginTop={'0px;'} marginBottom={'0px;'} back={this.hideDog} dogs={team.dogs} />\n            </Overlay>}\n        \n            <div class='container-fluid position-relative p-0' style={`margin-top: ${MARGIN_TOP}; height: calc(100vh - ${'130px'});`}>\n                <Trackmap\n                    stores={this.props.stores}\n                    raceid={raceid}\n                    waypoints={waypoints}\n                    // waypoints2={waypoints2}\n                    // waypoints3={waypoints3}\n                    zoomToMarkers={zoomToMarkers}\n                    fullscreenMap={true}\n                    onMarkerClick={this.onMarkerClick}\n                    showHeatmap={race.liveRace < 1}\n                    showTracks={race.liveRace >= 1}\n                    key={`trackmap-${selectedClassIds.join('-')}`}\n                    // key={`heatmap-${racetrackerData.map(e => e.bib).join('-')}`}\n                    // mapid={`heatmap-${racetrackerData.map(e => e.bib).join('-')}`}\n                />\n\n                <div class='position-absolute' style='top: 15px; left: 50px; z-index: 9999;'>\n                    <button class='btn btn-link pl-0 fixed-top text-primary'\n                        style={`top: ${MARGIN_TOP_BACK}; left: 5px; font-size: 35px; width: 45px;`}\n                        onClick={this.back}>\n                        <i class='fas fa-arrow-circle-left' />\n                    </button>\n                    <div class='logo ml-3 clearfix text-white'>\n                        <img src={`./assets/homerun-race-logo-2-small.png`} height='37' class='float-left' />\n                        <a href={`/app-races/${race.id}/results`}>\n                            <span class='font-weight-bold text-dark' style='font-size: 1.4em;'>{race.title}</span>\n                        </a>\n                    </div>\n                </div>\n\n                <div class='position-absolute' style='top: 55px; left: 5px; z-index: 9999; width: 30px; height: 30px;'>\n                    <ReloadTimer stores={this.props.stores} classNames='float-right ml-2' reloadLastEpoch={reloadLastEpoch} />\n                </div>\n                <div\n                    class='position-absolute'\n                    style='\n                        bottom: 55px;\n                        left: 0; \n                        right: 0; \n                        margin-left: auto; \n                        margin-right: auto; \n                        z-index: 9999;\n                        width: 80vw;\n                        height: 50px;'\n                >\n                    <div class='w-100 overflow-hidden'>\n                        <div\n                            class='d-flex flex-row flex-nowrap pb-2 px-1'\n                            style='overflow: auto; scroll-snap-type: x mandatory;'\n                        >\n                            {race.classes && race.classes.sort((a, b) => a.distance - b.distance).map((currentClass, idx) => <>\n                                <div class='col px-0 pt-2'>\n                                    <button\n                                        type='button'\n                                        class={`btn btn-block ${idx === 0 && 'rounded-pill-left'} ${idx === race.classes.length - 1 && 'rounded-pill-right'} rounded-none ${selectedClassIds.indexOf(currentClass.id) > -1 ? 'btn-primary' : 'btn-outline-primary'} text-nowrap`}\n                                        style='text-overflow: ellipsis; overflow: hidden;'\n                                        onClick={this.filterByClass}\n                                        data-id={currentClass.id}\n                                    >\n                                        {currentClass.title}\n                                    </button>\n                                </div>\n                            </>)}\n                        </div>\n                    </div>\n\n                    {/* <div class='row mb-3'>\n                        <div class='col-6 offset-3'>\n                            <div class='input-group'>\n                                <input class='form-control form-control-lg' type='text' placeholder='Search for bib' value={searchForBib} onInput={linkstate(this, 'searchForBib')} />\n                                {searchForBib && <div class='input-group-append'>\n                                    <div class='input-group-text' onClick={this.clearSearchForBib}>x</div>\n                                </div>}\n                            </div>\n                        </div>\n                    </div> */}\n\n                </div>\n\n                {showModal && <>\n                    <div\n                        class='position-absolute'\n                        style='top: 0px; left: 0px; z-index: 9999; width: 100%; height: 100%; background: rgba(0, 0, 0, 0.3);'\n                        onClick={this.toggleModal}\n                    >\n                        <div\n                            class='position-absolute bg-light border rounded rounded-lg pt-3 pb-3 px-2'\n                            style='top: 50%; left: 50%; transform: translate(-50%, -50%); width: 80vw; max-width: 800px; max-height: 600px; overflow: auto;'\n                        >\n                            <button class='btn btn-warning btn-sm float-right position-absolute' style='top: 5px; right: 5px;'>\n                                <i class='fas fa-times' />\n                            </button>\n\n                            <MusherInfo\n                                stores={this.props.stores}\n                                bib={modalBib}\n                                email={modalEmail}\n                                onTeamClick={this.onTeamClick}\n                                onUserClick={this.onUserClick}\n                                onDogClick={this.onDogClick}\n                            />\n                        </div>\n                    </div>\n                </>}\n            </div>\n        </>);\n    }\n}\n\nexport default AppRaceDetailTracking;\n","import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport { Text, Localizer } from 'preact-i18n';\nimport { toJS } from 'mobx'\n\nimport Map from '../../components/map';\n\nimport mu from '../../lib/musher-util';\n\nconst initialState = {\n\tshowAddComment: false,\n};\n\n@observer\nclass Trackmap extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            ...initialState,\n        };\n        this.updateTimer = {};\n\t\tthis.inputRef = {};\n    }\n\n\tasync loadTrack() {\n        const { showHeatmap, raceid } = this.props;\n        const { adminStore, trackStore, raceStore, appState } = this.props.stores;\n        const { selectedClassIds = [] } = appState;\n\n\t\t// this.setState({ isLoading: true });\n        if (showHeatmap) {\n            await adminStore.getPublicHeatmap(raceid);\n        }\n\n        // const classId = \n        const trackIds = raceStore.getTrackIdsByClass(selectedClassIds[0]);\n\n        if (trackIds && trackIds.length > 0) {\n            trackStore.cleanupMemory();\n            await trackStore.load({ query: { idin: trackIds } });\n        }\n\t\t// this.setState({ isLoading: false });\n\t}\n\n\tcomponentDidMount() {\n\t\tthis.loadTrack();\n\t}\n\n    // componentWillReceiveProps() {\n\t// \tthis.loadHeatmap();\n\t// }\n\n    render() {\n        const { trackStore, raceStore, appState } = this.props.stores;\n        const { selectedClassIds = [] } = appState;\n        const { waypoints, waypoints2, waypoints3, zoomToMarkers, mapid, fullscreenMap, onMarkerClick, showHeatmap, showTracks } = this.props;\n        const { publicHeatmap: heatmap, tracks } = trackStore;\n        const track = tracks[0];\n        const trackIds = raceStore.getTrackIdsByClass();\n\n        // const heatmap = publicHeatmap.slice(0, 10);\n        // const heatmap = [[60.4433,8.8996,14],[61.384,9.1152,14],[60.42,8.9422,15]];\n\n        return (\n            <>\n                {/* heatmap: {`map-${mapid}`}<br /> */}\n                {/* {JSON.stringify(heatmap)} */}\n                <Map\n                    stores={this.props.stores}\n                    mapId={mapid}\n                    heatmap={showHeatmap ? heatmap : null}\n                    geojson={showTracks && track ? track.gpx.geoJSON : null}\n                    gpxInfo={showTracks && track ? (track.gpxInfo || track.gpx.gpxInfo) : null}\n                    minZoom={2}\n                    maxZoom={18}\n                    height={600}\n                    waypoints={waypoints}\n                    waypoints2={waypoints2}\n                    waypoints3={waypoints3}\n                    zoomToMarkers={zoomToMarkers}\n                    fullscreenMap={fullscreenMap}\n                    onMarkerClick={onMarkerClick}\n                    showTrackProfile={false}\n                    distanceMarkerSteps={'long'}\n                    // key={`map-${mapid}-${util.getNestedValue(track, 'id')}-${trackIds.join('-')}-${selectedClassIds.join('-')}`}\n                    key={`map-${util.getNestedValue(track, 'id')}`}\n                />\n            </>\n        );\n    }\n}\n\nexport default Trackmap;\n","import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport { Text, Localizer } from 'preact-i18n';\nimport { route } from 'preact-router';\nimport Markdown from 'preact-markdown';\nimport linkstate from 'linkstate';\n\nimport mu from '../../lib/musher-util';\n\n@observer\nclass AppRaceDetailNotifications extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n        };\n\t\tthis.inputRef = {};\n        this.updateTimer = {};\n    }\n\n    subscribeNotificationTopic = async (field) => {\n\t\tconst { userStore } = this.props.stores;\n        const { user } = userStore;\n        const { notificationTopics = {} } = user;\n        const value = 1;\n        await userStore.setNotificationTopic({\n            field: `notificationTopics.${field}`,\n            value,\n        });\n    }\n\n    render() {\n\t\tconst { userStore, raceStore, appState } = this.props.stores;\n\t\tconst { user = {}, teams = [], isAdmin } = userStore;\n        const { language = 'en' } = user;\n        const { notificationTopics = {} } = user;\n\n\t\tconst { race = {} } = this.props;\n\n        const topic = `race-${race.id}`;\n        if (notificationTopics && notificationTopics[topic]) {\n            return '';\n        }\n\n        return (<>\n            <div class='row'>\n                <div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-0 mb-2'>\n                    <button class='btn btn-block btn-info btn-lg' onClick={() => this.subscribeNotificationTopic(topic)}>\n                        <i class='fas fa-bell' /> <Text id='race.notifications'>Subscribe to race notifications</Text>\n                    </button>\n                </div>\n            </div>\n        </>);\n    }\n}\n\nexport default AppRaceDetailNotifications;\n","import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport { Text, Localizer } from 'preact-i18n';\nimport { route } from 'preact-router';\nimport Markdown from 'preact-markdown';\nimport linkstate from 'linkstate';\n\nimport Images from '../../components/form/images';\n\nimport StoryAdd from '../../components/story/add';\nimport StoryPublicFeed from '../../components/story/publicFeed';\n\nimport mu from '../../lib/musher-util';\n\n@observer\nclass AppRaceDetailUserImages extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            newRaceUserImage: {},\n        };\n\t\tthis.inputRef = {};\n        this.updateTimer = {};\n    }\n\n\taddRaceUserImage = async () => {\n        const { race = {} } = this.props;\n        const raceid = race.id;\n        const { raceStore } = this.props.stores;\n\t\tconst { newRaceUserImage } = this.state;\n\t\tawait raceStore.addUserImage({ id: raceid, newUserImage: newRaceUserImage });\n\t\tthis.setState({\n\t\t\tnewRaceUserImage: {},\n\t\t});\n\t}\n\n\tupdateUserImageUpload = ({ field, value }) => {\n\t\t// updateField({ id: object.id, field: 'images', value: images, skipTimer: true });\n\t\tconst { newRaceUserImage } = this.state;\n\t\tnewRaceUserImage[field] = value;\n\t\tthis.setState({ newRaceUserImage });\n\t}\n\n\tremoveRaceUserImage = async (e) => {\n\t\tconst id = e.target.parentElement.dataset.id || e.target.dataset.id;\n        const { race = {} } = this.props;\n        const raceid = race.id;\n        const { raceStore } = this.props.stores;\n\t\tawait raceStore.removeUserImage({\n\t\t\tid: raceid,\n\t\t\tuserImageId: id,\n\t\t});\n\t}\n\n\teditRaceUserImage = async (e) => {\n\t\tconst { id, field } = e.target.dataset;\n\t\tconst { value } = e.target;\n        const { race = {} } = this.props;\n        const raceid = race.id;\n\t\tconst { raceStore } = this.props.stores;\n\t\tconst data = {\n\t\t\traceUserImageId: id,\n\t\t\t[`raceUserImage${util.ucfirst(field)}`]: value,\n\t\t};\n\t\tclearTimeout(this.updateTimer[`${raceid}-${id}-${field}`]);\n\t\tthis.updateTimer[`${raceid}-${id}-${field}`] = setTimeout(async () => {\n\t\t\traceStore.editUserImage({\n\t\t\t\tid: raceid,\n\t\t\t\tdata,\n\t\t\t});\n\t\t}, 1500);\n\n\t\tthis.resizeTextarea(e.target);\n\t}\n\n    resizeTextarea = (el) => {\n\t\tlet element = el;\n\t\tif (element.target) {\n\t\t\telement = el.target;\n\t\t}\n\t\tconst { scrollHeight } = element;\n\t\telement.style.height = `${scrollHeight}px`;\n\t}\n\n    handleImageErrored = (e) => {\n        const image = e.target;\n        image.onerror = null;\n        setTimeout(() => {\n            image.src += `?${new Date()}`;\n        }, 1000);\n    }\n\n    render() {\n        const { newRaceUserImage = {} } = this.state;\n\t\tconst { userStore, raceStore, appState } = this.props.stores;\n\t\tconst { user = {}, teams = [], isAdmin } = userStore;\n        const { language = 'en' } = user;\n\n\t\tconst { race = {} } = this.props;\n        const tags = ['photos'];\n        if (race.tag) {\n            race.tag.split(',').forEach(tag => {\n                tags.push(tag.trim());\n            })\n        }\n\n        return (<>\n            {user.id && <StoryAdd stores={this.props.stores} hashTags={tags} postfix={`[🔗 ${race.title}: Images](/app-races/${race.id}/userImages)`} topic={`race-${race.id}`} />}\n\n            <StoryPublicFeed stores={this.props.stores} hashtags={tags} />\n\n            {/* <div class='row'>\n                <div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-0 mb-2'>\n                    <h2 class='mb-0'><Text id='race.user-images'>User images</Text></h2>\n                </div>\n                <div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-3 mb-2'>\n                    <div class='row'>\n                        {race.userImages && race.userImages.reverse().map(currentUserImage => <>\n                            <div class='col-12 col-sm-12 col-md-6 col-lg-6 col-xl-4 p-3 position-relative mb-3'>\n                                {isAdmin && <>\n                                    <button class='btn btn-danger position-absolute' style='top:5px; right: 5px;' data-id={currentUserImage.id} onClick={this.removeRaceUserImage}>\n                                        <i class='fas fa-times' />\n                                    </button>\n                                </>}\n\n                                <div class='clearfix'>\n                                    <img src={currentUserImage.image.s3LargeLink} class='img-fluid rounded-lg mb-2' />\n                                </div>\n                                <div class='clearfix'>\n                                    <h5 class='mb-0'>{currentUserImage.title}</h5>\n                                    <small class='text-muted'> {util.formatDate(currentUserImage.date, { locale: language, hour12: false, hour: '2-digit', minute: '2-digit' })}</small><br />\n                                </div>\n                                <div class='clearfix'>\n                                    <Markdown markdown={mu.replaceImages(currentUserImage.body, currentUserImage.images, language)} markdownOpts={mu.getMarkdownOptions()} />\n                                </div>\n\n                                {isAdmin && <>\n                                    <div class='border-top border-bottom mb-5'>\n                                        <details>\n                                            <summary>Admin edit</summary>\n                                            <h5 class='border-bottom'>Admin UserImage Edit</h5>\n                                            {['title'].map(field => <>\n                                                <div class='form-group '>\n                                                    <label for={field}>{field}</label>\n                                                    <input type='text' class='form-control font-weight-bold' id={field} aria-describedby={`${field}Help`}\n                                                        style='font-size: 1.5em;'\n                                                        data-id={currentUserImage.id}\n                                                        data-field={field}\n                                                        value={currentUserImage[field]}\n                                                        onInput={this.editRaceUserImage}\n                                                    />\n                                                </div>\n                                            </>)}\n                                            {['body'].map(field => <>\n                                                <div class='form-group'>\n                                                    <label for={field}>{field}</label>\n                                                    <textarea type='textarea' class='form-control' id={field} aria-describedby={`${field}Help`}\n                                                        data-id={currentUserImage.id}\n                                                        data-field={field}\n                                                        value={currentUserImage[field]}\n                                                        onInput={this.editRaceUserImage}\n                                                        style='height: 3em;'\n                                                    />\n                                                </div>\n                                            </>)}\n                                        </details>\n                                    </div>\n                                </>}\n                            </div>\n                        </>)}\n                        {isAdmin && <>\n                            <div class='col-12 border rounded-lg m-2 p-3 bg-light'>\n                                <h5>Add new user image</h5>\n                                <div class='row'>\n                                    <div class='col'>\n                                        {newRaceUserImage && newRaceUserImage.image && <img src={newRaceUserImage.image.s3LargeLink} class='float-right w-50'  onError={this.handleImageErrored} />}\n                                        {['title'].map(field => <>\n                                            <div class='form-group'>\n                                                <label for={field}>{field}</label>\n                                                <input type='text' class='form-control' id={field} aria-describedby={`${field}Help`}\n                                                    onInput={linkstate(this, `newRaceUserImage.${field}`)}\n                                                    value={newRaceUserImage[field]}\n                                                />\n                                            </div>\t\t\t\t\t\t\t\t\t\t\n                                        </>)}\n                                        {['body'].map(field => <>\n                                            <div class='form-group'>\n                                                <label for={field}>{field}</label>\n                                                <textarea type='text' class='form-control' id={field} aria-describedby={`${field}Help`}\n                                                    onInput={linkstate(this, `newRaceUserImage.${field}`)}\n                                                    onKeyUp={this.resizeTextarea}\n                                                    style='height: 3em;'\n                                                    value={newRaceUserImage[field]}\n                                                />\n                                            </div>\t\t\t\t\t\t\t\t\t\t\n                                        </>)}\n                                    </div>\n                                </div>\n                                <Images saved={{}} object={{}} field={'image'} updateField={this.updateUserImageUpload} autoOpen={false} />\n                                <button class='btn btn-info' onClick={this.addRaceUserImage}>Add race user image</button>\n                            </div>\n                        </>}\n                    </div>\n                </div>\n            </div> */}\n        </>);\n    }\n}\n\nexport default AppRaceDetailUserImages;\n","import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport { Text, Localizer } from 'preact-i18n';\nimport { route } from 'preact-router';\nimport Markdown from 'preact-markdown';\nimport linkstate from 'linkstate';\n\nimport Images from '../../components/form/images';\n\nimport StoryAdd from '../../components/story/add';\nimport StoryPublicFeed from '../../components/story/publicFeed';\n\nimport mu from '../../lib/musher-util';\n\n@observer\nclass AppRaceDetailNews extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            newRaceArticle: {},\n        };\n\t\tthis.inputRef = {};\n        this.updateTimer = {};\n    }\n\n    addRaceArticle = async () => {\n\t\tconst { race = {} } = this.props;\n        const raceid = race.id;\n        const { raceStore } = this.props.stores;\n\t\tconst { newRaceArticle } = this.state;\n\t\tawait raceStore.addArticle({ id: raceid, newArticle: newRaceArticle });\n\t\tthis.setState({\n\t\t\tnewRaceArticle: {},\n\t\t});\n\t}\n\n    editRaceArticle = async (e) => {\n\t\tconst { id, field } = e.target.dataset;\n\t\tconst { value } = e.target;\n\t\tconst { race = {} } = this.props;\n        const raceid = race.id;\n\t\tconst { raceStore } = this.props.stores;\n\t\tconst data = {\n\t\t\traceArticleId: id,\n\t\t\t[`raceArticle${util.ucfirst(field)}`]: value,\n\t\t};\n\t\tclearTimeout(this.updateTimer[`${raceid}-${id}-${field}`]);\n\t\tthis.updateTimer[`${raceid}-${id}-${field}`] = setTimeout(async () => {\n\t\t\traceStore.editArticle({\n\t\t\t\tid: raceid,\n\t\t\t\tdata,\n\t\t\t});\n\t\t}, 1500);\n\n\t\tthis.resizeTextarea(e.target);\n\t}\n\n    removeRaceArticle = async (e) => {\n\t\tconst id = e.target.parentElement.dataset.id || e.target.dataset.id;\n\t\tconst { race = {} } = this.props;\n        const raceid = race.id;\n        const { raceStore } = this.props.stores;\n\t\tawait raceStore.removeArticle({\n\t\t\tid: raceid,\n\t\t\tarticleId: id,\n\t\t});\n\t}\n\n    updateArticleUpload = ({ field, value }) => {\n\t\t// updateField({ id: object.id, field: 'images', value: images, skipTimer: true });\n\t\tconst { newRaceArticle } = this.state;\n\t\tnewRaceArticle[field] = value;\n\t\tthis.setState({ newRaceArticle });\n\t}\n\n    resizeTextarea = (el) => {\n\t\tlet element = el;\n\t\tif (element.target) {\n\t\t\telement = el.target;\n\t\t}\n\t\tconst { scrollHeight } = element;\n\t\telement.style.height = `${scrollHeight}px`;\n\t}\n\n    handleImageErrored = (e) => {\n        const image = e.target;\n        image.onerror = null;\n        setTimeout(() => {\n            image.src += `?${new Date()}`;\n        }, 1000);\n    }\n\n    render() {\n        const { newRaceArticle } = this.state;\n\t\tconst { userStore, raceStore, appState } = this.props.stores;\n\t\tconst { user = {}, teams = [], isAdmin } = userStore;\n        const { language = 'en' } = user;\n\n\t\tconst { race = {} } = this.props;\n\n        const tags = ['news'];\n        if (race.tag) {\n            race.tag.split(',').forEach(tag => {\n                tags.push(tag.trim());\n            })\n        }\n\n        return (<>\n            {user.id && <StoryAdd stores={this.props.stores} hashTags={tags} postfix={`[🔗 ${race.title}: News](/app-races/${race.id}/news)`} topic={`race-${race.id}`} />}\n\n            <StoryPublicFeed stores={this.props.stores} hashtags={tags} />\n\n            {/* <div class='row'>\n                <div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-0 mb-2'>\n                    <h2 class='mb-0'><Text id='race.news'>Nyheter</Text></h2>\n                </div>\n                <div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-3 mb-2'>\n                    <div class='row'>\n                        {race.articles && race.articles.reverse().map(currentArticle => <>\n                            <div class='col-12 col-sm-12 col-md-6 col-lg-6 col-xl-4 p-3 position-relative mb-3'>\n                                <h5 class='mb-0'>{mu.replaceImages(currentArticle.title, race.images, language, false)}</h5>\n                                <small class='text-muted'> {util.formatDate(currentArticle.date, { locale: language, hour12: false, hour: '2-digit', minute: '2-digit' })}</small><br />\n                                {currentArticle.image && <img src={currentArticle.image.s3LargeLink} class='float-right w-50 rounded-lg ml-2' />}\n                                <div class='font-weight-bold'>\n                                    <Markdown markdown={mu.replaceImages(currentArticle.ingress, race.images, language)} markdownOpts={mu.getMarkdownOptions()} />\n                                </div>\n                                <div class='clearfix'>\n                                    <Markdown markdown={mu.replaceImages(currentArticle.body, race.images, language)} markdownOpts={mu.getMarkdownOptions()} />\n                                </div>\n\n                                {isAdmin && <>\n                                    <div class='border-top border-bottom mb-5'>\n                                        <details>\n                                            <summary>Admin edit</summary>\n                                            <h5 class='border-bottom'>Admin News Edit</h5>\n                                            {['title'].map(field => <>\n                                                <div class='form-group'>\n                                                    <label for={field}>{field}</label>\n                                                    <input type='text' class='form-control font-weight-bold' id={field} aria-describedby={`${field}Help`}\n                                                        style='font-size: 1.5em;'\n                                                        data-id={currentArticle.id}\n                                                        data-field={field}\n                                                        value={currentArticle[field]}\n                                                        onInput={this.editRaceArticle}\n                                                    />\n                                                </div>\n                                            </>)}\n                                            {['ingress', 'body'].map(field => <>\n                                                <div class='form-group'>\n                                                    <label for={field}>{field}</label>\n                                                    <textarea type='textarea' class='form-control' id={field} aria-describedby={`${field}Help`}\n                                                        data-id={currentArticle.id}\n                                                        data-field={field}\n                                                        value={currentArticle[field]}\n                                                        onInput={this.editRaceArticle}\n                                                        style='height: 3em;'\n                                                    />\n                                                </div>\n                                            </>)}\n                                        </details>\n                                    </div>\n                                </>}\n                            </div>\n                        </>)}\n                    </div>\n                </div>\n                {isAdmin && <>\n                    <div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-3 mb-2'>\n                        <h5>Add new article</h5>\n                        {newRaceArticle && newRaceArticle.image && <img src={newRaceArticle.image.s3LargeLink} class='float-right w-50'  onError={this.handleImageErrored} />}\n\n                        {['title'].map(field => <>\n                            <div class='form-group'>\n                                <label for={field}>{field}</label>\n                                <input type='text' class='form-control' id={field} aria-describedby={`${field}Help`}\n                                    onInput={linkstate(this, `newRaceArticle.${field}`)}\n                                    value={newRaceArticle[field]}\n                                />\n                            </div>\t\t\t\t\t\t\t\t\t\t\n                        </>)}\n                        {['ingress', 'body'].map(field => <>\n                            <div class='form-group'>\n                                <label for={field}>{field}</label>\n                                <textarea type='text' class='form-control' id={field} aria-describedby={`${field}Help`}\n                                    onInput={linkstate(this, `newRaceArticle.${field}`)}\n                                    onKeyUp={this.resizeTextarea}\n                                    style='height: 3em;'\n                                    value={newRaceArticle[field]}\n                                />\n                            </div>\t\t\t\t\t\t\t\t\t\t\n                        </>)}\n                        <Images saved={{}} object={{}} field={'image'} updateField={this.updateArticleUpload} autoOpen={false} />\n                        <button class='btn btn-info' onClick={this.addRaceArticle}>Add race article</button>\n                    </div>\n                </>}\n            </div> */}\n        </>);\n    }\n}\n\nexport default AppRaceDetailNews;\n","import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport { Text, Localizer } from 'preact-i18n';\nimport { route } from 'preact-router';\nimport Markdown from 'preact-markdown';\nimport linkstate from 'linkstate';\n\nimport mu from '../../lib/musher-util';\n\n@observer\nclass AppRaceDetailSignup extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n        };\n\t\tthis.inputRef = {};\n        this.updateTimer = {};\n    }\n\n\tsignupToRace = async () => {\n\t\tconst { raceStore, userStore } = this.props.stores;\n\t\tconst { user } = userStore;\n        const { signup } = raceStore;\n        const { race = {} } = this.props;\n        const raceid = race.id;\n\n\t\tawait raceStore.addContestant({\n\t\t\tid: raceid,\n\t\t\tclassId: signup.class,\n\t\t\tnewContestant: {\n\t\t\t\tteam: user.team,\n\t\t\t\tfirstname: user.firstname,\n\t\t\t\tlastname: user.lastname,\n\t\t\t\tsportsClub: user.sportsClub,\n\t\t\t\temail: user.email,\n\t\t\t\tcellphone: user.cellphone,\n\t\t\t\tfacebook: user.facebook,\n\t\t\t\tinstagram: user.instagram,\n\t\t\t\t ...signup\n\t\t\t}\n        });\n\t}\n\n    updateSignup = (e) => {\n        const key = e.target.id;\n        const value = e.target.value;\n        const { raceStore } = this.props.stores;\n        raceStore.updateObjectKeyValue('signup', key, value);\n    }\n\n    editSignup = (e) => {\n        const { race = {} } = this.props;\n        const raceid = race.id;\n\n        const { raceStore } = this.props.stores;\n        const field = e.target.id;\n        const value = e.target.value;\n        const { classid, contestantid } = e.target.dataset;\n        raceStore.updateObjectKeyValue('signup', field, value);\n\n        // console.log({ raceid, field, value, classid });\n        // const { raceStore } = this.props.stores;\n        // raceStore.updateObjectKeyValue('signup', key, value);\n\n        const data = {\n\t\t\traceClassId: classid,\n            contestantId: contestantid,\n\t\t\t[`raceClassContestant${util.ucfirst(field)}`]: value,\n\t\t};\n\t\tclearTimeout(this.updateTimer[field]);\n\t\tthis.updateTimer[field] = setTimeout(async () => {\n\t\t\traceStore.editClass({\n\t\t\t\tid: raceid,\n\t\t\t\tdata,\n\t\t\t});\n            raceStore.localUpdateSignup(field, value);\n            if (field === 'team') {\n                await raceStore.loadTeams(value, true);\n            }\n\t\t}, 500);\n    }\n\n    render() {\n\t\tconst { userStore, raceStore, appState } = this.props.stores;\n\t\tconst { user = {}, teams = [], isAdmin } = userStore;\n        const { language = 'en' } = user;\n\n\t\tconst { race = {} } = this.props;\n        const { signup } = raceStore;\n\n        let signupClass = {};\n        let dogs = [];\n        if (signup.class) {\n            signupClass = raceStore.getRaceClassById(signup.class);\n        }\n        if (signup.team) {\n            dogs = userStore.findDogsByTeam(parseInt(signup.team, 10));\n        }\n        const { vaccineLogStatuses } = userStore;\n\t\tconst today = new Date();\n\n        return (<>\n            <div class='row'>\n                <div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-0 mb-2'>\n                    <h2 class='mb-0'><Text id='races.signup'>Påmelding</Text></h2>\n                </div>\n                <div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-3 mb-2'>\n                    {today >= new Date(race.signupStartDate) && today <= new Date(race.signupEndDate) ? <>\n                        <span class='font-weight-lighter'><Text id='races.signed-in-as'>Logget inn som</Text>:</span> {user.email}<br /><br />\n                        {signup.id ? <>\n                            <div class='font-weight-bold mb-4'>\n                                <i class='fas fa-check text-success' /> <Text id='races.signed-up'>Din bruker er påmeldt!</Text><br />\n                                {/* <xmp>{JSON.stringify(signup, null, 4)}</xmp> */}\n                            </div>\n\n                            {!race.liveRace && race.signuppayment && <>\n                                <div class='form-group row my-2'>\n                                    <label for='cellphone' class='col-2 col-form-label text-right font-weight-lighter'><Text id='races.signup'>Påmelding</Text></label>\n                                    <div class='col-10'>\n                                        {signup.paidSignupfee ? <div class='py-2'>\n                                            <Text id='races.paid'>Betalt</Text>: {util.formatDate(signup.paidSignupfee)}\n                                            <i class='fas fa-check text-success ml-3' />\n                                        </div> : <>\n                                            <div class='alert alert-danger mb-1' role='alert'>\n                                                <h5>\n                                                    <span class='font-weight-lighter'><Text id='races.payment-info'>Betaling påmelding</Text>:</span><br />\n                                                    <Markdown markdown={mu.replaceImages(race.signuppayment, race.images, language)} markdownOpts={mu.getMarkdownOptions()} />\n                                                    {signupClass.signupfee || race.signupfee} NOK\n                                                </h5>\n                                            </div>\n                                        </>}\n                                    </div>\n                                </div>\n                            </>}\n\n                            <div class='form-group row my-5'>\n                                <label for='team' class='col-3 col-form-label text-right font-weight-lighter'>\n                                    <Text id='races.team'>Team</Text>\n                                </label>\n                                <div class='col-9'>\n                                    <select class='form-control form-control-lg' id='team' aria-describedby='teamHelp'\n                                        data-classid={signup.class}\n                                        data-contestantid={signup.id}\n                                        onInput={this.editSignup}\n                                        value={signup.team}\n                                    >\n                                        <option value=''>-- <Text id='races.choose-team'>Velg team</Text> --</option>\n                                        {teams.map(team =>\n                                            <option value={team.id}>{team.name}</option>\n                                        )}\n                                    </select>\n                                    {signup.team ? <>\n                                        {/* <div class='alert alert-success' role='alert'>\n                                            A simple success alert—check it out!\n                                        </div> */}\n                                    </> : <>\n                                        <div class='alert alert-danger clearfix' role='alert'>\n                                            <span class='display-4 float-left mr-3'>\n                                                <i class='fas fa-exclamation-triangle' />\n                                            </span>\n                                            <Text id='races.choose-race-team' fields={{ title: race.title }}>Please choose race team for {race.title}</Text>\n                                        </div>\n                                    </>}\n                                    {/* <details>\n                                        <summary>\n                                            <i class='fas fa-info-circle' /> <Text id='races.team-about'>About teams</Text>\n                                        </summary>\n                                        <Text id='races.team-help'>\n                                            <ol>\n                                                <li>Create a team for your race dogs.</li>\n                                                <li>Add the dogs you want to use for this race.</li>\n                                                <li>Choose the team for this race.</li>\n                                            </ol>\n                                        </Text>\n                                    </details> */}\n                                </div>\n                            </div>\n\n                            <div class='form-group row my-2'>\n                                <label for='cellphone' class='col-3 col-form-label text-right font-weight-lighter'><Text id='races.cellphone'>Mobil</Text></label>\n                                <div class='col-9'>\n                                    <Localizer>\n                                        <input type='text' class='form-control' id='cellphone'\n                                            data-classid={signup.class}\n                                            data-contestantid={signup.id}\n                                            onInput={this.editSignup}\n                                            value={signup.cellphone}\n                                            placeholder={<Text id='races.cellphone-help'>Hva er mobilnummer ditt?</Text>}\n                                        />\n                                    </Localizer>\n                                </div>\n                            </div>\n                            {signup.name && <div class='form-group row my-2'>\n                                <label for='name' class='col-3 col-form-label text-right font-weight-lighter'><Text id='races.name'>Navn</Text></label>\n                                <div class='col-9'>\n                                    {signup.name}\n                                </div>\n                            </div>}\n                            <div class='form-group row my-2'>\n                                <label for='firstname' class='col-3 col-form-label text-right font-weight-lighter'><Text id='races.firstname'>Fornavn</Text></label>\n                                <div class='col-9'>\n                                    <Localizer>\n                                        <input type='text' class='form-control' id='firstname'\n                                            data-classid={signup.class}\n                                            data-contestantid={signup.id}\n                                            onInput={this.editSignup}\n                                            value={signup.firstname}\n                                            placeholder={<Text id='races.firstname-help'>Hva er fornavnet ditt?</Text>}\n                                        />\n                                    </Localizer>\n                                </div>\n                            </div>\n                            <div class='form-group row my-2'>\n                                <label for='lastname' class='col-3 col-form-label text-right font-weight-lighter'><Text id='races.lastname'>Etternavn</Text></label>\n                                <div class='col-9'>\n                                    <Localizer>\n                                        <input type='text' class='form-control' id='lastname'\n                                            data-classid={signup.class}\n                                            data-contestantid={signup.id}\n                                            onInput={this.editSignup}\n                                            value={signup.lastname}\n                                            placeholder={<Text id='races.lastname-help'>Hva er etternavnet ditt?</Text>}\n                                        />\n                                    </Localizer>\n                                </div>\n                            </div>\n                            <div class='form-group row my-2'>\n                                <label for='sportsClub' class='col-3 col-form-label text-right font-weight-lighter'><Text id='races.sportsclub'>Klubb</Text></label>\n                                <div class='col-9'>\n                                    <Localizer>\n                                        <input type='text' class='form-control' id='sportsClub'\n                                            data-classid={signup.class}\n                                            data-contestantid={signup.id}\n                                            onInput={this.editSignup}\n                                            value={signup.sportsClub}\n                                            placeholder={<Text id='races.sportsClub-help'>Hvilken klubb tilhører du?</Text>}\n                                        />\n                                    </Localizer>\n                                </div>\n                            </div>\n                            <div class='form-group row my-2'>\n                                <label for='facebook' class='col-3 col-form-label text-right font-weight-lighter'><Text id='races.facebook'>Facebook</Text></label>\n                                <div class='col-9'>\n                                    <Localizer>\n                                        <input type='text' class='form-control' id='facebook'\n                                            data-classid={signup.class}\n                                            data-contestantid={signup.id}\n                                            onInput={this.editSignup}\n                                            value={signup.facebook}\n                                            placeholder={<Text id='races.facebook-help'>Hva er Facebook brukernavnet ditt?</Text>}\n                                        />\n                                    </Localizer>\n                                </div>\n                            </div>\n                            <div class='form-group row my-2'>\n                                <label for='instagram' class='col-3 col-form-label text-right font-weight-lighter'><Text id='races.instagram'>Instagram</Text></label>\n                                <div class='col-9'>\n                                    <Localizer>\n                                        <input type='text' class='form-control' id='instagram'\n                                            data-classid={signup.class}\n                                            data-contestantid={signup.id}\n                                            onInput={this.editSignup}\n                                            value={signup.instagram}\n                                            placeholder={<Text id='races.instagram-help'>Hva er Instagram brukernavnet ditt?</Text>}\n                                        />\n                                    </Localizer>\n                                </div>\n                            </div>\n                            <div class='form-group row my-2'>\n                                <label for='team' class='col-3 col-form-label text-right font-weight-lighter'><Text id='races.class'>Klasse</Text></label>\n                                <div class='col-9'>\n                                    <select class='form-control' id='class' aria-describedby='classHelp'\n                                        data-classid={signup.class}\n                                        data-contestantid={signup.id}\n                                        onInput={this.editSignup}\n                                        value={signup.class}\n                                        disabled\n                                    >\n                                        <option value=''>-- <Text id='races.choose-class'>Velg klasse</Text> --</option>\n                                        {race.classes && race.classes.sort((a, b) => a.distance - b.distance).map(currentClass => <>\n                                            <option value={currentClass.id}>\n                                                {currentClass.title}{!race.liveRace && <>\n                                                    - {currentClass.distance} km - Påmelding: {currentClass.signupfee || race.signupfee} NOK\n                                                </>}\n                                            </option>\n                                        </>)}\n                                    </select>\n                                </div>\n                            </div>\n                            {race.rules && <div class='form-group row my-2'>\n                                <label for='team' class='col-3 col-form-label text-right font-weight-lighter'>&nbsp;</label>\n                                <div class='col-9 pl-5'>\n                                    <input type='checkbox' class='form-check-input' id='termsAndAgreement'\n                                        data-classid={signup.class}\n                                        data-contestantid={signup.id}\n                                        onInput={this.editSignup}\n                                        checked={signup.termsAndAgreement}\n                                        value={1}\n                                    />\n                                    <label class='form-check-label' for='termsAndAgreement'><Text id='races.agreement-accept'>Jeg har lest og godtar reglene for løpet.</Text></label>\n                                </div>\n                            </div>}\n                            {race.declaration && <div class='form-group row my-4'>\n                                <div class='col-12 text-center border-top'>\n                                    <h5><Text id='races.declaration'>Declaration</Text></h5>\n                                </div>\n                                <details class='col-12'>\n                                    {signup.declaration ? <>\n                                        <summary>\n                                            <Text id='races.see-declaration'>See declaration</Text> (<span class='text-muted font-weight-light'><Text id='races.declaration-signed'>Declaration signed</Text>: {util.isoDate(signup.declarationDate)}</span>)\n                                        </summary>\n                                    </> : <>\n                                        <summary>\n                                            <h5 class='btn btn-primary'><Text id='races.see-declaration'>See declaration</Text></h5>\n                                        </summary>\n                                    </>}\n\n                                    <Markdown markdown={mu.replaceImages(race.declaration, race.images, language)} markdownOpts={mu.getMarkdownOptions()} />\n\n                                    {signup.declaration ? <>\n                                        <i>\n                                            <Text id='races.declaration-signed'>Declaration signed</Text>: {util.isoDate(signup.declarationDate)}\n                                        </i>\n                                    </> : <>\n                                        <div class='pl-5'>\n                                            <input type='checkbox' class='form-check-input' id='declaration'\n                                                data-classid={signup.class}\n                                                data-contestantid={signup.id}\n                                                onInput={this.editSignup}\n                                                checked={signup.declaration}\n                                                value={1}\n                                            />\n                                            <label class='form-check-label' for='declaration'><Text id='races.declaration-accept'>I hereby sign the declaration for the race!</Text></label>\n                                        </div>\n                                    </>}\n                                </details>\n                            </div>}\n\n                            <div class='form-group row my-4'>\n                                <div class='col-12 text-center border-top'>\n                                    <h5><Text id='races.chiplist'>Chiplist</Text></h5>\n                                </div>\n                                <details class='col-12'>\n                                    <summary>\n                                        <Text id='races.see-dogs'>See dogs & chiplist</Text>\n                                    </summary>\n                                    <div class='pt-3'>\n                                        {dogs && dogs.length > 0 ? <>\n                                            {dogs.map(dog => <>\n                                                <div class='d-flex mb-0 position-relative mb-3'>\n                                                    <div class={`text-center border rounded-circle imageRounded imageRoundedMedium text-muted pt-2`} style={dog.image ? `background-image: url(\"${dog.image.s3SmallLink}\"); background-size: cover;` : ''}>\n                                                        {/* {!dog.image && <i class='fas fa-dog mt-3' style='font-size: 40px;' />} */}\n                                                        {!dog.image && <span class='font-weight-lighter' style='font-size: 35px;'>{util.ucfirst(dog.name, true)}</span>}\n                                                    </div>\n                                                    <div class='flex-grow-1 pl-3 pr-2'>\n                                                        <span class='float-right'>\n                                                            {dog.birth && <span class='mr-2'>{util.age(dog.birth, dog.deceased)}</span>}\n                                                            {dog.gender === 'female' ? <i class='fas fa-venus' /> : <i class='fas fa-mars' />}\n                                                        </span>\n                                                        <a href={`/dogs/edit/${dog.id}`}>\n                                                            <h6 class='mb-1' style='line-height: 1.0em;'>\n                                                                {dog.shortname || dog.name} {dog.shortname && dog.shortname !== '' && <> - <span class='font-weight-lighter'>{dog.name}</span></>}\n                                                            </h6>\n                                                        </a>\n                                                        {dog.chipId ? <>\n                                                            <i class='fas fa-microchip text-muted' /> {dog.chipId}\n                                                        </> : <>\n                                                            <div class='alert alert-danger' role='alert'>\n                                                                <Text id='races.missing-chipid'>Missing chid id</Text>\n                                                            </div>\n                                                        </>}\n\n                                                        <div>\n                                                            {vaccineLogStatuses && vaccineLogStatuses.filter(e => e.chipId === dog.chipId).map((vac) => {\n                                                                return (\n                                                                    <span class={`badge badge-${vac.inKarens ? 'warning' : 'success'} mr-2 mb-1`}>\n                                                                        {vac.vaccineAgens.name}\n                                                                        <span class='font-weight-lighter ml-2'>\n                                                                            <i class='fas fa-calendar-check' /> {util.isoDate(vac.vaccineAgens.durationEnd, false, false, true)}\n                                                                            {vac.inKarens && <>\n                                                                                <br />\n                                                                                (karens: {util.format(vac.karensDaysLeft, 0)} days left)\n                                                                            </>}\n                                                                        </span>\n                                                                    </span>\n                                                                );\n                                                            })}\n                                                        </div>\n                                                    </div>\n                                                </div>\n                                            </>)}\n                                        </> : <>\n                                            <div class='text-center text-muted'>\n                                                <div class='display-1'>\n                                                    <i class='fas fa-dog' />\n                                                </div>\n                                                <h3 class='font-weight-lighter'>\n                                                    <Text id='race.add-dogs'>Add a team to your race signup to see the dogs.</Text>\n                                                </h3>\n                                            </div>\n                                        </>}\n                                    </div>\n                                </details>\n                            </div>\n\n                        </> : <>\n\n                            {race.liveRace ? <>\n                                Signup is done at the race normal web pages.\n                            </> : <>\n                                <div class='form-group'>\n                                    <label for='cellphone'><Text id='races.cellphone'>Mobil</Text></label>\n                                    <input type='text' class='form-control' id='cellphone' aria-describedby='cellphoneHelp'\n                                        placeholder={user.cellphone}\n                                        onInput={this.updateSignup}\n                                        value={signup.cellphone}\n                                    />\n                                    <small id='cellphoneHelp' class='form-text text-muted'><Text id='races.cellphone-help'>'Hva er mobilnummer ditt?'</Text></small>\n                                </div>\n\n                                {signup.name && <div class='row'>\n                                    <div class='col'>\n                                        <div class='form-group'>\n                                            <label for='name'><Text id='races.name'>Name</Text></label>\n                                            <input type='text' class='form-control' id='name' aria-describedby='nameHelp'\n                                                placeholder={user.name}\n                                                onInput={this.updateSignup}\n                                                value={signup.name}\n                                            />\n                                            <small id='nameHelp' class='form-text text-muted'><Text id='races.name-help'>Hva er navnet ditt?</Text></small>\n                                        </div>\n                                    </div>\n                                </div>}\n                                <div class='row'>\n                                    <div class='col'>\n                                        <div class='form-group'>\n                                            <label for='firstname'><Text id='races.firstname'>Fornavn</Text></label>\n                                            <input type='text' class='form-control' id='firstname' aria-describedby='firstnameHelp'\n                                                placeholder={user.firstname}\n                                                onInput={this.updateSignup}\n                                                value={signup.firstname}\n                                            />\n                                            <small id='firstnameHelp' class='form-text text-muted'><Text id='races.firstname-help'>Hva er fornavnet ditt?</Text></small>\n                                        </div>\n                                    </div>\n                                    <div class='col'>\n                                        <div class='form-group'>\n                                            <label for='lastname'><Text id='races.lastname'>Etternavn</Text></label>\n                                            <input type='text' class='form-control' id='lastname' aria-describedby='lastnameHelp'\n                                                placeholder={user.lastname}\n                                                onInput={this.updateSignup}\n                                                value={signup.lastname}\n                                            />\n                                            <small id='lastnameHelp' class='form-text text-muted'><Text id='races.lastname-help'>Hva er etternavnet ditt?</Text></small>\n                                        </div>\n                                    </div>\n                                </div>\n\n                                <div class='form-group'>\n                                    <label for='sportsClub'><Text id='races.sportsclub'>Klubb</Text></label>\n                                    <input type='text' class='form-control' id='sportsClub' aria-describedby='sportsClubHelp'\n                                        placeholder={user.sportsClub}\n                                        onInput={this.updateSignup}\n                                        value={signup.sportsClub}\n                                    />\n                                    <small id='sportsClubHelp' class='form-text text-muted'><Text id='races.sportsClub-help'>Hvilken klubb tilhører du?</Text></small>\n                                </div>\n\n                                <div class='row'>\n                                    <div class='col'>\n                                        <div class='form-group'>\n                                            <label for='facebook'><Text id='races.facebook'>Facebook</Text></label>\n                                            <input type='text' class='form-control' id='facebook' aria-describedby='facebookHelp'\n                                                placeholder={user.facebook}\n                                                onInput={this.updateSignup}\n                                                value={signup.facebook}\n                                            />\n                                            <small id='facebookHelp' class='form-text text-muted'><Text id='races.facebook-help'>Hva er Facebook brukernavnet ditt?</Text></small>\n                                        </div>\n                                    </div>\n                                    <div class='col'>\n                                        <div class='form-group'>\n                                            <label for='instagram'><Text id='races.instagram'>Instagram</Text></label>\n                                            <input type='text' class='form-control' id='instagram' aria-describedby='instagramHelp'\n                                                placeholder={user.instagram}\n                                                onInput={this.updateSignup}\n                                                value={signup.instagram}\n                                            />\n                                            <small id='instagramHelp' class='form-text text-muted'><Text id='races.instagram-help'>Hva er Instagram brukernavnet ditt?</Text></small>\n                                        </div>\n                                    </div>\n                                </div>\n\n                                <div class='form-group'>\n                                    <label for='team'><Text id='races.team'>Team</Text></label>\n                                    <select class='form-control' id='team' aria-describedby='teamHelp'\n                                        onInput={this.updateSignup}\n                                        value={signup.team}\n                                    >\n                                        <option value=''>-- <Text id='races.choose-team'>Velg team</Text> --</option>\n                                        {teams.map(team =>\n                                            <option value={team.id}>{team.name}</option>\n                                        )}\n                                    </select>\n                                    <small id='teamHelp' class='form-text text-muted'><Text id='races.choose-team-help'>Velg fra dine team</Text></small>\n                                </div>\n\n                                <div class='form-group'>\n                                    <label for='class'><Text id='races.class'>Klasse</Text></label>\n                                    <select class='form-control' id='class' aria-describedby='classHelp'\n                                        onInput={this.updateSignup}\n                                        value={signup.class}\n                                    >\n                                        <option value=''>-- <Text id='races.choose-class'>Velg klasse</Text> --</option>\n                                        {race.classes && race.classes.map(currentClass => <>\n                                            <option value={currentClass.id}>{currentClass.title} - {currentClass.distance} km - Påmelding: {currentClass.signupfee || race.signupfee} NOK</option>\n                                        </>)}\n                                    </select>\n                                    <small id='classHelp' class='form-text text-muted'><Text id='races.choose-class-help'>Velg ønsket klasse.</Text></small>\n                                </div>\n\n                                <div class='form-group form-check'>\n                                    <input type='checkbox' class='form-check-input' id='termsAndAgreement'\n                                        onInput={this.updateSignup}\n                                        checked={signup.termsAndAgreement}\n                                        value={true}\n                                    />\n                                    <label class='form-check-label' for='termsAndAgreement'><Text id='races.agreement-accept'>Jeg har lest og godtar reglene for løpet.</Text></label>\n                                </div>\n                                <button type='button' class='btn btn-primary' onClick={this.signupToRace}><Text id='races.do-signup'>Meld meg på</Text></button>\n                            </>}\n\n                        </>}\n\n                    </> : <>\n                        {today < new Date(race.signupStartDate) ? <>\n                            <h5 class='mt-4'>\n                                <i class='fas fa-exclamation-circle' /> <Text id='races.signup-not-open-yet'>Påmeldingen har ikke åpnet ennå!</Text>\n                            </h5>\n                            <p class='mt-4'>\n                                <Text id='races.signup-opening'>Påmeldingen åpner</Text>:<br />\n                                <span class='display-4'>{util.formatDate(race.signupStartDate, { locale: 'no-NB', hour12: false, hour: '2-digit', minute: '2-digit' })}</span>\n                            </p>\n                        </> : <>\n                            <h5 class='mt-4 mb-4'>\n                                <i class='fas fa-exclamation-circle' /> <Text id='races.signup-closed'>Påmeldingen er stengt!</Text>\n\n                                {/* {JSON.stringify(signup, null, 4)} */}\n                            </h5>\n                        </>}\n                    </>}\n                </div>\n            </div>\n        </>);\n    }\n}\n\nexport default AppRaceDetailSignup;\n","import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport { Text, Localizer } from 'preact-i18n';\nimport { route } from 'preact-router';\nimport Markdown from 'preact-markdown';\nimport linkstate from 'linkstate';\n\nimport mu from '../../lib/musher-util';\n\nimport ScrollIntoView from '../../components/util/scrollIntoView';\nimport ImageScroller from '../../components/imageScroller';\n\nfunction nl2br($str) {\n\tif (typeof $str === 'string') {\n\t\treturn $str.replace(/[\\n]/g, '<br>');\n\t}\n\treturn $str;\n}\n\nfunction byBib(a, b) {\n    const aHas = typeof a.bib !== 'undefined';\n    const bHas = typeof b.bib !== 'undefined';\n    return (bHas - aHas) || (aHas === true && a.bib - b.bib) || 0;\n}\n\n@observer\nclass AppRaceDetailMushers extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            displayDetails: {},\n            editUserDetails: {},\n            showAdminSendMessage: {},\n            showAdminImport: {},\n            message: {},\n            inboxMessage: {},\n            submenu: 'chiplists',\n            preCheck: {},\n            raceCheck: {},\n            dogJournals: {},\n        };\n\t\tthis.inputRef = {};\n        this.updateTimer = {};\n        this.parseInputTimer = null;\n    }\n\n    toggleDisplayDetails = (e) => {\n\t\tconst id = e.target.closest('tr').dataset.id;\n\t\tconst { appState } = this.props.stores;\n\t\tconst { editUserDetails } = appState;\n\t\tif (!editUserDetails[id]) {\n\t\t\tappState.toggleDisplayDetails(id)\n\t\t}\n\t}\n\n    adminToggleEditUser = (e) => {\n\t\te.stopPropagation();\n\t\tconst id = e.target.closest('tr').dataset.id;\n\t\tconst { appState } = this.props.stores;\n\t\tappState.toggleEditUserDetails(id)\n\t}\n\n    veterinaryToggleEditUser = (e) => {\n\t\te.stopPropagation();\n\t\tconst id = e.target.closest('tr').dataset.id;\n\t\tconst { appState } = this.props.stores;\n\t\tappState.toggleVeterinaryUserDetails(id, true)\n\t}\n\n    toggleAdminSendMessage = (e) => {\n\t\tconst classId = e.target.closest('button').dataset.class;\n\t\tconst { showAdminSendMessage } = this.state;\n\t\tshowAdminSendMessage[classId] = !showAdminSendMessage[classId];\n\t\tthis.setState({ showAdminSendMessage });\n\t}\n\n    toggleAdminSendInboxMessage = (e) => {\n\t\tconst classId = e.target.closest('button').dataset.class;\n\t\tconst { showAdminSendInboxMessage = {} } = this.state;\n\t\tshowAdminSendInboxMessage[classId] = !showAdminSendInboxMessage[classId];\n\t\tthis.setState({ showAdminSendInboxMessage });\n\t}\n\n    toggleAdminImport = (e) => {\n\t\tconst classId = e.target.closest('button').dataset.class;\n\t\tconst { showAdminImport } = this.state;\n\t\tshowAdminImport[classId] = !showAdminImport[classId];\n\t\tthis.setState({ showAdminImport });\n\t}\n\n    adminSignupEdit = (e) => {\n        const { race = {} } = this.props;\n        const raceid = race.id;\n        const { raceStore } = this.props.stores;\n        const field = e.target.id;\n        const value = e.target.value;\n        const { classid, contestantid } = e.target.dataset;\n\n        // console.log({ raceid, field, value, classid });\n        // const { raceStore } = this.props.stores;\n        // raceStore.updateObjectKeyValue('signup', key, value);\n\n        const data = {\n\t\t\traceClassId: classid,\n            contestantId: contestantid,\n\t\t\t[`raceClassContestant${util.ucfirst(field)}`]: value,\n\t\t};\n\t\tclearTimeout(this.updateTimer[field]);\n\t\tthis.updateTimer[field] = setTimeout(async () => {\n\t\t\traceStore.editClass({\n\t\t\t\tid: raceid,\n\t\t\t\tdata,\n\t\t\t});\n\t\t}, 500);\n\t}\n\n\tsendEmail = async (e) => {\n        const { race = {} } = this.props;\n        const raceId = race.id;\n\t\tconst to = e.target.closest('button').dataset.to;\n\t\tconst raceClassId = e.target.closest('button').dataset.raceclassid;\n\t\tconst { appState } = this.props.stores;\n\t\tconst { message } = this.state;\n\t\tconst { subject, body } = message;\n\t\tconst emailResponse = await appState.sendEmail({\n\t\t\tto,\n\t\t\tsubject,\n\t\t\tbody,\n\t\t\traceId,\n\t\t\traceClassId,\n\t\t});\n\t\tthis.setState({ emailResponse });\n\t}\n\n\tresetEmail = () => {\n\t\tthis.setState({\n\t\t\temailResponse: null,\n\t\t\tmessage: {\n\t\t\t\tsubject: '',\n\t\t\t\tbody: '',\n\t\t\t},\n\t\t});\n\t}\n\n    sendInboxMessage = async (e) => {\n        const { raceStore } = this.props.stores;\n        const { race = {} } = this.props;\n        const raceId = race.id;\n\t\tconst raceClassId = e.target.closest('button').dataset.raceclassid;\n\t\tconst { inboxMessage } = this.state;\n\t\tconst { body } = inboxMessage;\n\t\tconst inboxMessageResponse = await raceStore.sendInboxMessage({\n\t\t\tbody,\n\t\t\traceId,\n\t\t\traceClassId,\n\t\t});\n\t\tthis.setState({ inboxMessageResponse });\n\t}\n\n    resetInboxMessage = () => {\n\t\tthis.setState({\n\t\t\tinboxMessage: {\n\t\t\t\tbody: '',\n\t\t\t},\n\t\t});\n\t}\n\n    signupToRace = async ({ signup }) => {\n\t\tconst { raceStore } = this.props.stores;\n        const { race = {} } = this.props;\n        const raceid = race.id;\n\n\t\tawait raceStore.addContestant({\n\t\t\tid: raceid,\n\t\t\tclassId: signup.class,\n\t\t\tnewContestant: {\n\t\t\t\t// team: user.team,\n\t\t\t\t// firstname: user.firstname,\n\t\t\t\t// lastname: user.lastname,\n\t\t\t\t// sportsClub: user.sportsClub,\n\t\t\t\t// email: user.email,\n\t\t\t\t// cellphone: user.cellphone,\n\t\t\t\t// facebook: user.facebook,\n\t\t\t\t// instagram: user.instagram,\n\t\t\t\t ...signup\n\t\t\t}\n        });\n\t}\n\n    parseInput = async (data, classId) => {\n        clearTimeout(this.parseInputTimer);\n        this.parseInputTimer = setTimeout(() => this.doParseInput(data, classId), 500);\n    }\n\n    doParseInput = async (data, classId) => {\n        const lines = String(data).split('\\n');\n        let headers = [];\n        const jsonData = [];\n\n        // Get headers\n        const firstLine = lines[0];\n        if (firstLine.match(/\\t/)) {\n            headers = firstLine.split('\\t');\n        } else if (firstLine.match(/;/)) {\n            headers = firstLine.split(';');\n        } else {\n            headers = firstLine.split(',');\n        }\n\n        // Map data to headernames\n        for (let i = 1, l = lines.length; i < l; i += 1) {\n            const line = lines[i];\n            let values;\n            if (line.match(/\\t/)) {\n                values = line.split('\\t');\n            } else if (line.match(/;/)) {\n                values = line.split(';');\n            } else {\n                values = line.split(',');\n            }\n            const jsonObject = {};\n            values.forEach((v, idx) => {\n                let val = v;\n                if (headers[idx] === 'email') {\n                    val = v.toLowerCase();\n                }\n                jsonObject[headers[idx]] = val;\n            });\n            jsonData.push(jsonObject);\n        }\n\n        const { raceStore } = this.props.stores;\n        const { race = {} } = this.props;\n        const raceid = race.id;\n        raceStore.addMultipleContestants({ id: raceid, classId, contestants: jsonData });\n        return true;\n    }\n\n    chooseSubmenu = (e) => {\n        e.stopPropagation();\n\t\tconst submenu = e.target.parentElement.dataset.menu || e.target.dataset.menu;\n\t\tthis.setState({ submenu });\n\n        // const { dogStore } = this.props.stores;\n        // const { dog } = dogStore;\n        // route(`/dogs/${dog.id}/${submenu}`);\n\t}\n\n\tfilterByClass = (e) => {\n\t\tconst selectedClassId = e.target.closest('button').dataset.id;\n\t\tconst { appState } = this.props.stores;\n\t\tappState.toggleSelectedClassId(selectedClassId, true);\n\t}\n\n    clearSearchForBib = () => {\n        this.setState({ searchForBib: '' });\n    }\n\n    savePreCheck = async (e) => {\n        const { id, chipid, name, shortname, team } = e.target.closest('button').dataset;\n        const { preCheck, dogJournals } = this.state;\n        const { dogJournalStore, userStore } = this.props.stores;\n\t\tconst { user = {} } = userStore;\n\n        const vetData = {\n            id: user.id,\n            firstname: user.firstname,\n            lastname: user.lastname,\n            email: user.email,\n            image: user.image,\n        };\n\n        const dogData = {\n            id,\n            chipId: chipid,\n            name,\n            shortname,\n            team,\n        };\n\n        const preCheckOject = util.getNestedValue(preCheck, id) || {};\n        const journalData = {\n            checkType: 'preCheck',\n            ...preCheckOject,\n        };\n\n        const data = [{\n            dog: { ...dogData },\n            journal: { ...journalData },\n            veterinary: { ...vetData },\n        }];\n\n        if (!dogJournals[chipid]){\n            dogJournals[chipid] = [];\n        }\n        dogJournals[chipid].push({\n            date: new Date(),\n            ...dogData,\n            ...journalData,\n            ...vetData,\n        });\n\n        await dogJournalStore.insert({ data });\n        delete preCheck[id];\n        this.setState({ preCheck });\n    }\n\n    render() {\n        const {\n            showAdminSendMessage = {}, showAdminSendInboxMessage = {}, showAdminImport = {},\n            message = {}, inboxMessage = {},\n            inboxMessageResponse, emailResponse, submenu, searchForBib,\n            preCheck = {},\n            raceCheck = {},\n            dogJournals = {},\n        } = this.state;\n\t\tconst { userStore, raceStore, appState } = this.props.stores;\n\t\tconst { user = {}, teams = [], isAdmin, isVeterinary } = userStore;\n        const { language = 'en' } = user;\n        const { displayDetails, editUserDetails, veterinaryUserDetails, selectedClassIds = [] } = appState;\n\n\t\tconst { race = {} } = this.props;\n\n        const filterByClassId = (c) => {\n\t\t\tif (selectedClassIds.length > 0) {\n\t\t\t\treturn selectedClassIds.indexOf(c.id) > -1;\n\t\t\t}\n\t\t\treturn true;\n\t\t};\n\n        const filterByBib = (c) => {\n\t\t\tif (searchForBib) {\n                const regex = new RegExp(`${searchForBib.replace(/[^a-zA-Z 0-9æøåÆØÅ]/, '')}`, 'i');\n\t\t\t\treturn (regex.test(c.bib) || regex.test(c.firstname) || regex.test(c.lastname));\n\t\t\t}\n\t\t\treturn true;\n\t\t};\n\n        return (<>\n            <div class='row'>\n                <div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-0 mb-2'>\n                    <h2 class='mb-0'><Text id='races.mushers'>Deltakere</Text></h2>\n                </div>\n                <div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-3 mb-2'>\n\n                    <div class='w-100 overflow-hidden'>\n                        <div\n                            class='d-flex flex-row flex-nowrap pb-2 px-1'\n                            style='overflow: auto; scroll-snap-type: x mandatory;'\n                        >\n                            {race.classes && race.classes.sort((a, b) => a.distance - b.distance).map((currentClass, idx) => <>\n                                <div class='col px-0 pt-2'>\n                                    <button\n                                        type='button'\n                                        class={`btn btn-block ${idx === 0 && 'rounded-pill-left'} ${idx === race.classes.length - 1 && 'rounded-pill-right'} rounded-none ${selectedClassIds.indexOf(currentClass.id) > -1 ? 'btn-primary' : 'btn-outline-primary'} text-nowrap`}\n                                        style='text-overflow: ellipsis; overflow: hidden;'\n                                        onClick={this.filterByClass}\n                                        data-id={currentClass.id}\n                                    >\n                                        {currentClass.title}\n                                    </button>\n                                </div>\n                            </>)}\n                        </div>\n                    </div>\n\n                    <div class='row mb-3'>\n                        <div class='col-6 offset-3'>\n                            <div class='input-group'>\n                                <input class='form-control form-control-lg' type='text' placeholder='Search for bib' value={searchForBib} onInput={linkstate(this, 'searchForBib')} />\n                                {searchForBib && <div class='input-group-append'>\n                                    <div class='input-group-text' onClick={this.clearSearchForBib}>x</div>\n                                </div>}\n                            </div>\n                        </div>\n                    </div>\n\n                    {race.classes && race.classes.filter(filterByClassId).sort((a, b) => a.distance - b.distance).map(currentClass => <>\n                        {isAdmin && <span class='float-right'>\n                            Total app users: {currentClass.contestants && currentClass.contestants.filter(musher => musher.user).length}\n                        </span>}\n                        <h5>{currentClass.title} {currentClass.startDate && <>\n                            : <span class='font-weight-lighter'>\n                                {util.formatDate(`${currentClass.startDate} ${currentClass.startTime || '00:00:00'}`, { locale: language, hour12: false, hour: '2-digit', minute: '2-digit' })} - {util.formatDate(`${currentClass.endDate} ${currentClass.endTime || '00:00:00'}`, { locale: language, hour12: false, hour: '2-digit', minute: '2-digit' })}\n                            </span>\n                        </>}</h5>\n\n                        {isAdmin && <>\n                            <a class='mx-2' href={`/tv/top10/${race.id}/${currentClass.id}`}>TV Top 10</a> -\n                            <a class='mx-2' href={`/tv/team/${race.id}/1`}>TV One team</a> -\n                        </>}\n\n                        <div class='table-responsive'>\n                            <table class='table table-sm table-striped'>\n                                <thead>\n                                    <tr>\n                                        <th scope='col'>#</th>\n                                        <th scope='col' style='min-width: 90%;'><Text id='races.name'>Navn</Text></th>\n                                    </tr>\n                                </thead>\n                                <tbody>\n                                    {currentClass.contestants && currentClass.contestants.filter(filterByBib).sort(byBib).map((musher, idx) => {\n                                        const currentTeam = raceStore.getTeamById(musher.team);\n                                        const hasVaccines = raceStore.hasVaccines(currentTeam);\n                                        const hasMandatoryCheck = musher.mandatoryCheck;\n\n                                        return (<>\n                                            <tr onClick={this.toggleDisplayDetails} data-id={musher.id}>\n                                                <th scope='row'>\n                                                    {musher.bib ? <>\n                                                        {musher.bib}\n                                                    </> : <>\n                                                        <span class='font-weight-lighter text-muted'>{idx + 1}</span>\n                                                    </>}\n                                                </th>\n                                                <td\n                                                    class={`${displayDetails[musher.id] ? 'font-weight-bold' : ''}`}\n                                                    style={`${displayDetails[musher.id] || veterinaryUserDetails[musher.id] ? '' : 'line-height: 0.8em;'}`}\n                                                >\n                                                    {isVeterinary && <>\n                                                        {musher.team ? <>\n                                                            <button class='btn btn-primary btn-sm float-right ml-4' onClick={this.veterinaryToggleEditUser}>\n                                                                <i class='fas fa-user-md' />\n                                                            </button>\n                                                        </> : <>\n                                                            <button class='btn btn-outline-secondary btn-sm float-right ml-4 disabled' onClick={e => e.stopPropagation()}>\n                                                                <i class='fas fa-user-md' />\n                                                            </button>\n                                                        </>}\n                                                        {hasVaccines ? <>\n                                                            <button class='btn btn-success btn-sm float-right ml-1' onClick={e => e.stopPropagation()}>\n                                                                <i class='fas fa-syringe' />\n                                                            </button>\n                                                        </> : <>\n                                                            <button class='btn btn-outline-secondary btn-sm float-right ml-1' onClick={e => e.stopPropagation()}>\n                                                                <i class='fas fa-syringe' />\n                                                            </button>\n                                                        </>}\n                                                        {hasMandatoryCheck ? <>\n                                                            <button class='btn btn-success btn-sm float-right ml-1' onClick={e => e.stopPropagation()}>\n                                                                <i class='fas fa-stethoscope' />\n                                                            </button>\n                                                        </> : <>\n                                                            <button class='btn btn-outline-secondary btn-sm float-right ml-1' onClick={e => e.stopPropagation()}>\n                                                                <i class='fas fa-stethoscope' />\n                                                            </button>\n                                                        </>}\n                                                    </>}\n                                                    {isAdmin && <>\n                                                        <button class='btn btn-outline-warning btn-sm float-right ml-1' onClick={this.adminToggleEditUser}>\n                                                            <i class='fas fa-user-edit' />\n                                                        </button>\n                                                        {musher.paidSignupfee && <>\n                                                            <span class='float-right'>\n                                                                <i class='fas fa-check text-success' /><br />\n                                                            </span>\n                                                        </>}\n                                                        <small class='float-right'>\n                                                            {musher.raceStatus && <><span class='text-muted'>raceStatus:</span><br /> {musher.raceStatus}<br /></>}\n                                                            {musher.raceComment && <><span class='text-muted'>raceComment:</span><br /> {musher.raceComment}<br /></>}\n                                                            {musher.gpxResultsApproved && <><span class='text-muted'>gpxResultsApproved:</span><br /> {musher.gpxResultsApproved}<br /></>}\n                                                        </small>\n                                                    </>}\n                                                    {isAdmin && race.liveRace > 0 && <>\n                                                        <span class='float-right text-success mr-2' style='font-size: 1.2em;'>\n                                                            {musher.user && <i class='fas fa-mobile-alt ml-2' />}\n                                                            {musher.declaration && <i class='fas fa-handshake ml-2' alt={util.isoDate(musher.declarationDate)} />}\n\n                                                        </span>\n                                                    </>}\n                                                    {displayDetails[musher.id] ? <>\n                                                        {musher.flag && <span class='mr-2'>{musher.flag}</span>}\n                                                        {musher.firstname ? <>\n                                                            {musher.firstname} {musher.lastname}<br />\n                                                        </> : <>\n                                                            {musher.name}\n                                                        </>}\n                                                        <span class='text-muted'>{currentTeam.name}</span><br />\n                                                        <small class='text-muted'>{musher.sportsClub}</small><br />\n                                                        {musher.facebook && <a class='mr-2' href={mu.asFacebookLink(musher.facebook)} native target='_blank' rel='noreferrer'><i class='fab fa-facebook' /></a>}\n                                                        {musher.instagram && <a class='mr-2' href={mu.asInstagramLink(musher.instagram)} native target='_blank' rel='noreferrer'><i class='fab fa-instagram' /></a>}<br />\n\n                                                        {isAdmin && <>\n                                                            {musher.bib && <><i class='fas fa-tshirt ml-2' /> {musher.bib}</>}\n                                                            {musher.startTime && <><i class='fas fa-clock ml-2' /> {util.isoDate(musher.startTime)}</>}\n                                                        </>}\n\n                                                        {musher.price1 && <div class='font-weight-lighter'>\n                                                            <i class='fas fa-trophy text-warning' /> {musher.price1}\n                                                            {musher.priceSent && <>\n                                                                <i class='fas fa-check text-success' />\n                                                            </>}\n                                                        </div>}\n                                                        {musher.price2 && <div class='font-weight-lighter'><i class='fas fa-trophy text-warning' /> {musher.price2}</div>}\n                                                        {musher.price3 && <div class='font-weight-lighter'><i class='fas fa-trophy text-warning' /> {musher.price3}</div>}\n\n                                                    </> : <>\n                                                        {musher.price1 && <span class='float-right text-warning' style='font-size: 1.2em;'>\n                                                            <i class='fas fa-trophy' />\n                                                            {musher.priceSent && <>\n                                                                <i class='fas fa-check text-success' />\n                                                            </>}\n                                                        </span>}\n                                                        <nobr>\n                                                            {musher.flag && <span class='mr-2'>{musher.flag}</span>}\n                                                            {musher.firstname ? <>\n                                                                {musher.firstname} {musher.lastname}<br />\n                                                            </> : <>\n                                                                {musher.name}\n                                                            </>}\n                                                            <small class='text-muted'>{musher.sportsClub}</small><br />\n                                                        </nobr>\n                                                    </>}\n\n\n                                                    {/* <xmp>{JSON.stringify(currentTeam, null, 4)}</xmp> */}\n                                                    {isVeterinary && veterinaryUserDetails[musher.id] && <>\n                                                        <ScrollIntoView horizontal={'end'} vertical={'center'} />\n                                                        <div class='w-100 overflow-hidden' style='max-width: 100%;'>\n                                                            <div\n                                                                class='d-flex flex-row flex-nowrap pb-2 px-1'\n                                                                style='overflow: auto; scroll-snap-type: x mandatory;'\n                                                            >\n                                                                <div class='col px-0 pt-2'>\n                                                                    <button\n                                                                        class={`btn btn-sm btn-block rounded-pill-left rounded-none ${submenu === 'chiplists' ? 'btn-primary' : 'btn-outline-primary'} text-nowrap`}\n                                                                        style='text-overflow: ellipsis; overflow: hidden;'\n                                                                        data-menu='chiplists'\n                                                                        onClick={this.chooseSubmenu}\n                                                                    ><i class='fas fa-user-md' /> <Text id='racevet.chiplists'>Vaccines</Text></button>\n                                                                </div>\n                                                                <div class='col px-0 pt-2'>\n                                                                    <button\n                                                                        class={`btn btn-sm btn-block rounded-none ${submenu === 'precheck' ? 'btn-primary' : 'btn-outline-primary'} text-nowrap`}\n                                                                        style='text-overflow: ellipsis; overflow: hidden;'\n                                                                        data-menu='precheck'\n                                                                        onClick={this.chooseSubmenu}\n                                                                    ><i class='fas fa-stethoscope' /> <Text id='racevet.precheck'>PreCheck</Text></button>\n                                                                </div>\n                                                                <div class='col px-0 pt-2'>\n                                                                    <button\n                                                                        class={`btn btn-sm btn-block rounded-pill-right rounded-none ${submenu === 'racecheck' ? 'btn-primary' : 'btn-outline-primary'} text-nowrap`}\n                                                                        style='text-overflow: ellipsis; overflow: hidden;'\n                                                                        data-menu='racecheck'\n                                                                        onClick={this.chooseSubmenu}\n                                                                    ><i class='fas fa-flag-checkered' /> <Text id='racevet.racecheck'>RaceCheck</Text></button>\n                                                                </div>\n                                                            </div>\n                                                        </div>\n\n                                                        {submenu === 'chiplists' && <>\n                                                            <h5 class='mt-4 border-bottom'>Chiplist & Vaccines</h5>\n                                                            <div class='container-fluid'>\n                                                            <div class='row'>\n                                                                {currentTeam && currentTeam.dogs ? currentTeam.dogs.map(dog => {\n                                                                    let dogVaccines;\n                                                                    if (currentTeam && currentTeam.vaccines) {\n                                                                        dogVaccines = currentTeam.vaccines.filter(v => v.chipId === dog.chipId);\n                                                                    }\n                                                                    return (<>\n                                                                        <div class='col-12 d-flex my-3'>\n                                                                            <div class='mx-0 mr-1 px-0 position-relative pt-1'>\n                                                                                <div\n                                                                                    class={`text-center border rounded-circle imageRounded imageRoundedMedium text-muted pt-2`}\n                                                                                    style={`${dog.image ? `background-image: url(\"${dog.image.s3SmallLink}\"); background-size: cover;` : ''} border-width: 2px !important;`}\n                                                                                >\n                                                                                    {!dog.image && <span class='font-weight-lighter' style='font-size: 35px;'>{util.ucfirst(dog.name, true)}</span>}\n                                                                                </div>\n                                                                                <small>\n                                                                                    <span class='float-left text-overflow' style={`width: 70px;`}>{dog.name}</span><br />\n                                                                                </small>\n                                                                                {(dog.birth || dog.gender) && <small>\n                                                                                    <small class='font-weight-normal float-right position-absolute text-white bg-info p-1 rounded' style='top: 0px; right: 0px; line-height: 0.8em;'>\n                                                                                        {dog.birth && <span class='mr-1 text-white'>{util.age(dog.birth, dog.deceased)}</span>}\n                                                                                        {dog.gender && <>{dog.gender === 'female' ? <i class='fas fa-venus' /> : <i class='fas fa-mars' />}</>}\n                                                                                    </small>\n                                                                                </small>}\n                                                                            </div>\n                                                                            <div class='flex-grow-1 row'>\n                                                                                <div class='col-12 font-weight-bold'>\n                                                                                    <i class='fas fa-microchip text-muted' /> {dog.chipId}\n                                                                                </div>\n                                                                            {/* <xmp>{JSON.stringify(dogVaccines, null, 4)}</xmp> */}\n                                                                                {dogVaccines && dogVaccines.map((vac) => {\n                                                                                    return (\n                                                                                        <div class='col-4 px-1 overflow-hidden'>\n                                                                                            <span class={`badge badge-${vac.inKarens ? 'warning' : 'success'}`}>\n                                                                                                <span class='font-weight-lighter'>\n                                                                                                    <i class='fas fa-calendar-check' /> {util.isoDate(vac.vaccineAgens.durationEnd, false, false, true)}\n                                                                                                    {vac.inKarens && <>\n                                                                                                        <br />\n                                                                                                        (<Text id='dogs.vaccine-karens'>karens</Text>: {util.format(vac.karensDaysLeft, 0)} <Text id='dogs.vaccine-karens-days-left'>days left</Text>)\n                                                                                                    </>}\n                                                                                                </span>\n                                                                                            </span>\n\n                                                                                            <div class='text-overflow'>\n                                                                                                <small class='font-weight-light'>\n                                                                                                    {vac.vaccineAgens.name}<br />\n                                                                                                    <nobr>{vac.vaccineName}</nobr><br />\n                                                                                                    {/* {util.isoDate(vac.date, false, false, true)}<br /> */}\n                                                                                                    {/* <span class='font-weight-lighter'>\n                                                                                                        <Text id='dogs.vaccine-veterinary'>Veterinær</Text>:\n                                                                                                    </span> {vac.veterinaryFirstname} {vac.veterinaryLastname} &lt;{vac.veterinaryEmail}&gt;<br /> */}\n                                                                                                </small>\n                                                                                            </div>\n                                                                                        </div>\n                                                                                    );\n                                                                                })}\n\n                                                                            </div>\n                                                                        </div>\n                                                                    </>);\n                                                                }) : <>\n                                                                    <div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 px-0'>\n                                                                        <div class='text-center text-muted'>\n                                                                            <div class='display-1'><i class='fas fa-dog' /></div>\n                                                                            <h3><Text id='teams.no-dogs-title'>No dogs for this team!</Text></h3>\n                                                                        </div>\n                                                                    </div>\n                                                                </>}\n                                                            </div>\n                                                            </div>\n                                                        </>}\n\n                                                        {submenu === 'precheck' && <>\n                                                            <h5 class='mt-4 border-bottom'>Precheck</h5>\n                                                            <div class='row'>\n                                                                {currentTeam && currentTeam.dogs ? currentTeam.dogs.map(dog => {\n                                                                    let dogJournal;\n                                                                    if (currentTeam && currentTeam.journal) {\n                                                                        dogJournal = currentTeam.journal.filter(v => v.chipId === dog.chipId);\n                                                                    }\n                                                                    return (<>\n                                                                        <div class='col-12 d-flex my-3'>\n                                                                            <div class='mx-0 mr-1 px-0 position-relative pt-1'>\n                                                                                <div\n                                                                                    class={`text-center border rounded-circle imageRounded imageRoundedMedium text-muted pt-2`}\n                                                                                    style={`${dog.image ? `background-image: url(\"${dog.image.s3SmallLink}\"); background-size: cover;` : ''} border-width: 2px !important;`}\n                                                                                >\n                                                                                    {!dog.image && <span class='font-weight-lighter' style='font-size: 35px;'>{util.ucfirst(dog.name, true)}</span>}\n                                                                                </div>\n                                                                                <small>\n                                                                                    <span class='float-left text-overflow' style={`width: 70px;`}>{dog.name}</span><br />\n                                                                                </small>\n                                                                                {(dog.birth || dog.gender) && <small>\n                                                                                    <small class='font-weight-normal float-right position-absolute text-white bg-info p-1 rounded' style='top: 0px; right: 0px; line-height: 0.8em;'>\n                                                                                        {dog.birth && <span class='mr-1 text-white'>{util.age(dog.birth, dog.deceased)}</span>}\n                                                                                        {dog.gender && <>{dog.gender === 'female' ? <i class='fas fa-venus' /> : <i class='fas fa-mars' />}</>}\n                                                                                    </small>\n                                                                                </small>}\n                                                                            </div>\n                                                                            <div class='flex-grow-1 row'>\n                                                                                <div class='col-12 font-weight-bold'>\n                                                                                    <i class='fas fa-microchip text-muted' /> {dog.chipId.slice(-5)}\n                                                                                </div>\n                                                                                <div class='col-12'>\n                                                                                    {dogJournal && dogJournal.length > 0 && dogJournal.map(journal => <>\n                                                                                        <div class='row border-bottom'>\n                                                                                            {/* {JSON.stringify(journal, null, 4)} */}\n                                                                                            <div class='col-12 text-muted'>\n                                                                                                <small>\n                                                                                                    <span class='float-right'>{journal.checkType && <>{journal.checkType}</>}</span>\n                                                                                                    {util.isoDate(journal.date)} by {journal.veterinaryFirstname} {journal.veterinaryLastname}\n                                                                                                </small>\n                                                                                            </div>\n                                                                                            <div class='col-12 d-flex justify-content-between'>\n                                                                                                {journal.diagnoseId > 0 && <span class='mx-1'><span class='text-muted'>ID:</span> {journal.diagnoseId}</span>}\n                                                                                                {journal.heartRate > 0 && <span class='mx-1'><span class='text-muted'>HR:</span> {journal.heartRate}</span>}\n                                                                                                {journal.weight > 0&& <span class='mx-1'><i class='fas fa-balance-scale text-muted' /> {journal.weight} <span class='text-muted'>kg</span></span>}\n                                                                                                {journal.bodyConditionScore > 0 && <span class='mx-1'><span class='text-muted'>BCS:</span> {journal.bodyConditionScore}</span>}\n                                                                                            </div>\n                                                                                            <div class='col-12'>\n                                                                                                {journal.generalFindings && <span class='mr-1'><span class='text-muted'>Other:</span> {journal.generalFindings}</span>}\n                                                                                            </div>\n                                                                                        </div>\n                                                                                    </>)}\n                                                                                    {dogJournals[dog.chipId] && dogJournals[dog.chipId].length > 0 && dogJournals[dog.chipId].map(journal => <>\n                                                                                        <div class='row border-bottom'>\n                                                                                            {/* {JSON.stringify(journal, null, 4)} */}\n                                                                                            <div class='col-12 text-muted'>\n                                                                                                <small>\n                                                                                                    <span class='float-right'>{journal.checkType && <>{journal.checkType}</>}</span>\n                                                                                                    {util.isoDate(journal.date)} by {journal.veterinaryFirstname} {journal.veterinaryLastname}\n                                                                                                </small>\n                                                                                            </div>\n                                                                                            <div class='col-12 d-flex justify-content-between'>\n                                                                                                {journal.diagnoseId > 0 && <span class='mx-1'><span class='text-muted'>ID:</span> {journal.diagnoseId}</span>}\n                                                                                                {journal.heartRate > 0 && <span class='mx-1'><span class='text-muted'>HR:</span> {journal.heartRate}</span>}\n                                                                                                {journal.weight > 0&& <span class='mx-1'><i class='fas fa-balance-scale text-muted' /> {journal.weight} <span class='text-muted'>kg</span></span>}\n                                                                                                {journal.bodyConditionScore > 0 && <span class='mx-1'><span class='text-muted'>BCS:</span> {journal.bodyConditionScore}</span>}\n                                                                                            </div>\n                                                                                            <div class='col-12'>\n                                                                                                {journal.generalFindings && <span class='mr-1'><span class='text-muted'>Other:</span> {journal.generalFindings}</span>}\n                                                                                            </div>\n                                                                                        </div>\n                                                                                    </>)}\n                                                                                </div>\n                                                                                <div class='col-12 form-group'>\n                                                                                    <small>\n                                                                                        <label class='text-overflow w-100 mb-0' for='diagnoseId'>Diagnostic</label>\n                                                                                        <select class=\"form-control\" id=\"diagnoseId\" onInput={linkstate(this, `preCheck.${dog.id}.diagnoseId`)} value={util.getNestedValue(preCheck, `${dog.id}.diagnoseId`)}>\n                                                                                            <option value=''>-- Please choose --</option>\n                                                                                            <option value='100'>No findings</option>\n                                                                                        </select>\n                                                                                    </small>\n                                                                                </div>\n                                                                                <div class='col-4 form-group'>\n                                                                                    <small>\n                                                                                        <label class='text-overflow w-100 mb-0' for='weight'>Weight</label>\n                                                                                        <input type='number' class='form-control' id='weight' onInput={linkstate(this, `preCheck.${dog.id}.weight`)} value={util.getNestedValue(preCheck, `${dog.id}.weight`)} />\n                                                                                    </small>\n                                                                                </div>\n                                                                                <div class='col-4 form-group overflow-hidden'>\n                                                                                    <small>\n                                                                                        <label class='text-overflow w-100 mb-0' for='heartRate'>Heart Rate</label>\n                                                                                        <input type='text' class='form-control' id='heartRate' onInput={linkstate(this, `preCheck.${dog.id}.heartRate`)} value={util.getNestedValue(preCheck, `${dog.id}.heartRate`)} />\n                                                                                    </small>\n                                                                                </div>\n                                                                                <div class='col-4 form-group'>\n                                                                                    <small>\n                                                                                        <label class='text-overflow w-100 mb-0' for='bodyConditionScore'>BCS</label>\n                                                                                        <input type='number' class='form-control' id='bodyConditionScore' onInput={linkstate(this, `preCheck.${dog.id}.bodyConditionScore`)} value={util.getNestedValue(preCheck, `${dog.id}.bodyConditionScore`)} />\n                                                                                    </small>\n                                                                                </div>\n                                                                                <div class='col-12 form-group'>\n                                                                                    <small>\n                                                                                        <label class='text-overflow w-100 mb-0' for='generalFindings'>General findings</label>\n                                                                                        <input type='text' class='form-control' id='generalFindings' onInput={linkstate(this, `preCheck.${dog.id}.generalFindings`)} value={util.getNestedValue(preCheck, `${dog.id}.generalFindings`)} />\n                                                                                    </small>\n                                                                                    <small id='generalFindingsHelp' class='form-text text-muted'>Teeth, mucus membranes, general condition, other findings.</small>\n                                                                                </div>\n                                                                                <div class='col-12 form-group'>\n                                                                                    <button\n                                                                                        class='btn btn-outline-success'\n                                                                                        onClick={this.savePreCheck}\n                                                                                        data-id={dog.id}\n                                                                                        data-chipid={dog.chipId}\n                                                                                        data-team={currentTeam.id}\n                                                                                        data-name={dog.name}\n                                                                                        data-shortname={dog.shortName}\n                                                                                    > Save Pre Check</button>\n                                                                                </div>\n                                                                            </div>\n                                                                        </div>\n                                                                    </>);\n                                                                }) : <>\n                                                                    <div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 px-0'>\n                                                                        <div class='text-center text-muted'>\n                                                                            <div class='display-1'><i class='fas fa-dog' /></div>\n                                                                            <h3><Text id='teams.no-dogs-title'>No dogs for this team!</Text></h3>\n                                                                        </div>\n                                                                    </div>\n                                                                </>}\n                                                            </div>\n                                                        </>}\n\n                                                        {submenu === 'racecheck' && <>\n                                                            <h5 class='mt-4 border-bottom'>Racecheck</h5>\n                                                            <div class='row'>\n                                                                {currentTeam && currentTeam.dogs ? currentTeam.dogs.map(dog => {\n                                                                    return (<>\n                                                                        <div class='col-12 d-flex my-3'>\n                                                                            <div class='mx-0 mr-1 px-0 position-relative pt-1'>\n                                                                                <div\n                                                                                    class={`text-center border rounded-circle imageRounded imageRoundedMedium text-muted pt-2`}\n                                                                                    style={`${dog.image ? `background-image: url(\"${dog.image.s3SmallLink}\"); background-size: cover;` : ''} border-width: 2px !important;`}\n                                                                                >\n                                                                                    {!dog.image && <span class='font-weight-lighter' style='font-size: 35px;'>{util.ucfirst(dog.name, true)}</span>}\n                                                                                </div>\n                                                                                <small>\n                                                                                    <span class='float-left text-overflow' style={`width: 70px;`}>{dog.name}</span><br />\n                                                                                </small>\n                                                                                {(dog.birth || dog.gender) && <small>\n                                                                                    <small class='font-weight-normal float-right position-absolute text-white bg-info p-1 rounded' style='top: 0px; right: 0px; line-height: 0.8em;'>\n                                                                                        {dog.birth && <span class='mr-1 text-white'>{util.age(dog.birth, dog.deceased)}</span>}\n                                                                                        {dog.gender && <>{dog.gender === 'female' ? <i class='fas fa-venus' /> : <i class='fas fa-mars' />}</>}\n                                                                                    </small>\n                                                                                </small>}\n                                                                            </div>\n                                                                            <div class='flex-grow-1 row'>\n                                                                                <div class='col-12 font-weight-bold'>\n                                                                                    <i class='fas fa-microchip text-muted' /> {dog.chipId.slice(-5)}\n                                                                                </div>\n                                                                                <div class='col-4 form-group'>\n                                                                                    <small>\n                                                                                        <label class='text-overflow w-100' for='weight'>Weight</label>\n                                                                                        <input type='number' class='form-control' id='weight' />\n                                                                                    </small>\n                                                                                </div>\n                                                                                <div class='col-4 form-group overflow-hidden'>\n                                                                                    <small>\n                                                                                        <label class='text-overflow w-100' for='hrHeartLungs'>HR/Heart/Lungs</label>\n                                                                                        <input type='text' class='form-control' id='hrHeartLungs' />\n                                                                                    </small>\n                                                                                </div>\n                                                                                <div class='col-4 form-group'>\n                                                                                    <small>\n                                                                                        <label class='text-overflow w-100' for='bcs'>BCS</label>\n                                                                                        <input type='number' class='form-control' id='bcs' />\n                                                                                    </small>\n                                                                                </div>\n                                                                                <div class='col-12 form-group'>\n                                                                                    <small>\n                                                                                        <label class='text-overflow w-100' for='general'>General findings</label>\n                                                                                        <input type='text' class='form-control' id='general' />\n                                                                                    </small>\n                                                                                    <small id='generalHelp' class='form-text text-muted'>Teeth, mucus membranes, general condition, other findings.</small>\n                                                                                </div>\n                                                                            </div>\n                                                                        </div>\n                                                                    </>);\n                                                                }) : <>\n                                                                    <div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 px-0'>\n                                                                        <div class='text-center text-muted'>\n                                                                            <div class='display-1'><i class='fas fa-dog' /></div>\n                                                                            <h3><Text id='teams.no-dogs-title'>No dogs for this team!</Text></h3>\n                                                                        </div>\n                                                                    </div>\n                                                                </>}\n                                                            </div>\n                                                        </>}\n                                                    </>}\n\n                                                    {(isAdmin && editUserDetails[musher.id]) && <>\n                                                        <h5>Admin edit:</h5>\n\n                                                        <div class='form-group row my-0'>\n                                                            <label class='col-4 col-form-label text-right'>Email</label>\n                                                            <div class='col-8'>\n                                                                {musher.email}\n                                                            </div>\n                                                        </div>\n\n                                                        <div class='form-group row my-0'>\n                                                            <label for='bib' class='col-4 col-form-label text-right'>bib</label>\n                                                            <div class='col-8'>\n                                                                <input type='number' class='form-control' id='bib'\n                                                                    data-classid={currentClass.id}\n                                                                    data-contestantid={musher.id}\n                                                                    onInput={this.adminSignupEdit}\n                                                                    value={musher.bib}\n                                                                />\n                                                            </div>\n                                                        </div>\n                                                        <div class='form-group row my-0'>\n                                                            <label for='startTime' class='col-4 col-form-label text-right'>startTime</label>\n                                                            <div class='col-8'>\n                                                                <input type='date' class='form-control' id='startTime'\n                                                                    data-classid={currentClass.id}\n                                                                    data-contestantid={musher.id}\n                                                                    onInput={this.adminSignupEdit}\n                                                                    value={musher.startTime ? util.isoDate(musher.startTime, false, false, false) : null}\n                                                                />\n                                                            </div>\n                                                        </div>\n                                                        <div class='form-group row my-0'>\n                                                            <label for='team' class='col-4 col-form-label text-right'>team</label>\n                                                            <div class='col-8'>\n                                                                <input type='number' class='form-control' id='team'\n                                                                    data-classid={currentClass.id}\n                                                                    data-contestantid={musher.id}\n                                                                    onInput={this.adminSignupEdit}\n                                                                    value={musher.team}\n                                                                />\n                                                            </div>\n                                                        </div>\n                                                        <div class='form-group row my-0'>\n                                                            <label for='user' class='col-4 col-form-label text-right'>user</label>\n                                                            <div class='col-8'>\n                                                                <input type='number' class='form-control' id='user'\n                                                                    data-classid={currentClass.id}\n                                                                    data-contestantid={musher.id}\n                                                                    onInput={this.adminSignupEdit}\n                                                                    value={musher.user}\n                                                                />\n                                                            </div>\n                                                        </div>\n\n\n                                                        <div class='form-group row my-0'>\n                                                            <label for='team' class='col-4 col-form-label text-right'>Race status</label>\n                                                            <div class='col-8'>\n                                                                <select class='form-control' id='raceStatus'\n                                                                    data-classid={currentClass.id}\n                                                                    data-contestantid={musher.id}\n                                                                    onInput={this.adminSignupEdit}\n                                                                    value={musher.raceStatus}\n                                                                >\n                                                                    <option value=''>-- Choose race status --</option>\n                                                                    <option value='OK'>OK - Everything ok</option>\n                                                                    <option value='DNS'>DNS - Did Not Start</option>\n                                                                    <option value='DNF'>DNF - Did Not Finish</option>\n                                                                    <option value='DNQ'>DNQ - Did not qualify</option>\n                                                                    <option value='DQ'>DQ - Disqualified</option>\n                                                                </select>\n                                                            </div>\n                                                        </div>\n                                                        <div class='form-group row my-0'>\n                                                            <label for='raceComment' class='col-4 col-form-label text-right'>Race comment</label>\n                                                            <div class='col-8'>\n                                                                <input type='text' class='form-control' id='raceComment'\n                                                                    data-classid={currentClass.id}\n                                                                    data-contestantid={musher.id}\n                                                                    onInput={this.adminSignupEdit}\n                                                                    value={musher.raceComment}\n                                                                />\n                                                            </div>\n                                                        </div>\n                                                        <div class='form-group row my-0'>\n                                                            <label for='gpxResultsApproved' class='col-4 col-form-label text-right'>GPX Results approved (date)</label>\n                                                            <div class='col-8'>\n                                                                <input type='date' class='form-control' id='gpxResultsApproved'\n                                                                    data-classid={currentClass.id}\n                                                                    data-contestantid={musher.id}\n                                                                    onInput={this.adminSignupEdit}\n                                                                    value={musher.gpxResultsApproved ? util.isoDate(musher.gpxResultsApproved, false, false, true) : null}\n                                                                />\n                                                            </div>\n                                                        </div>\n\n                                                        <div class='form-group row my-0'>\n                                                            <label for='paidSignupfee' class='col-4 col-form-label text-right'>paidSignupfee (date)</label>\n                                                            <div class='col-8'>\n                                                                <input type='date' class='form-control' id='paidSignupfee'\n                                                                    data-classid={currentClass.id}\n                                                                    data-contestantid={musher.id}\n                                                                    onInput={this.adminSignupEdit}\n                                                                    value={musher.paidSignupfee ? util.isoDate(musher.paidSignupfee, false, false, true) : null}\n                                                                />\n                                                            </div>\n                                                        </div>\n                                                        <div class='form-group row my-0'>\n                                                            <label for='startOrder' class='col-4 col-form-label text-right'>startOrder</label>\n                                                            <div class='col-8'>\n                                                                <input type='number' class='form-control' id='startOrder'\n                                                                    data-classid={currentClass.id}\n                                                                    data-contestantid={musher.id}\n                                                                    onInput={this.adminSignupEdit}\n                                                                    value={musher.startOrder}\n                                                                />\n                                                            </div>\n                                                        </div>\n                                                        <div class='form-group row my-0'>\n                                                            <label for='cellphone' class='col-4 col-form-label text-right'>Mobil</label>\n                                                            <div class='col-8'>\n                                                                <input type='text' class='form-control' id='cellphone'\n                                                                    data-classid={currentClass.id}\n                                                                    data-contestantid={musher.id}\n                                                                    onInput={this.adminSignupEdit}\n                                                                    value={musher.cellphone}\n                                                                />\n                                                            </div>\n                                                        </div>\n                                                        <div class='form-group row my-0'>\n                                                            <label for='name' class='col-4 col-form-label text-right'>Navn</label>\n                                                            <div class='col-8'>\n                                                                <input type='text' class='form-control' id='name'\n                                                                    data-classid={currentClass.id}\n                                                                    data-contestantid={musher.id}\n                                                                    onInput={this.adminSignupEdit}\n                                                                    value={musher.name}\n                                                                />\n                                                            </div>\n                                                        </div>\n                                                        <div class='form-group row my-0'>\n                                                            <label for='firstname' class='col-4 col-form-label text-right'>Fornavn</label>\n                                                            <div class='col-8'>\n                                                                <input type='text' class='form-control' id='firstname'\n                                                                    data-classid={currentClass.id}\n                                                                    data-contestantid={musher.id}\n                                                                    onInput={this.adminSignupEdit}\n                                                                    value={musher.firstname}\n                                                                />\n                                                            </div>\n                                                        </div>\n                                                        <div class='form-group row my-0'>\n                                                            <label for='lastname' class='col-4 col-form-label text-right'>Etternavn</label>\n                                                            <div class='col-8'>\n                                                                <input type='text' class='form-control' id='lastname'\n                                                                    data-classid={currentClass.id}\n                                                                    data-contestantid={musher.id}\n                                                                    onInput={this.adminSignupEdit}\n                                                                    value={musher.lastname}\n                                                                />\n                                                            </div>\n                                                        </div>\n                                                        <div class='form-group row my-0'>\n                                                            <label for='address' class='col-4 col-form-label text-right'>Adresse</label>\n                                                            <div class='col-8'>\n                                                                <input type='text' class='form-control' id='address'\n                                                                    data-classid={currentClass.id}\n                                                                    data-contestantid={musher.id}\n                                                                    onInput={this.adminSignupEdit}\n                                                                    value={musher.address}\n                                                                />\n                                                            </div>\n                                                        </div>\n                                                        <div class='form-group row my-0'>\n                                                            <label for='postalcode' class='col-4 col-form-label text-right'>Postalcode</label>\n                                                            <div class='col-8'>\n                                                                <input type='text' class='form-control' id='postalcode'\n                                                                    data-classid={currentClass.id}\n                                                                    data-contestantid={musher.id}\n                                                                    onInput={this.adminSignupEdit}\n                                                                    value={musher.postalcode}\n                                                                />\n                                                            </div>\n                                                        </div>\n                                                        <div class='form-group row my-0'>\n                                                            <label for='postalplace' class='col-4 col-form-label text-right'>Postalplace</label>\n                                                            <div class='col-8'>\n                                                                <input type='text' class='form-control' id='postalplace'\n                                                                    data-classid={currentClass.id}\n                                                                    data-contestantid={musher.id}\n                                                                    onInput={this.adminSignupEdit}\n                                                                    value={musher.postalplace}\n                                                                />\n                                                            </div>\n                                                        </div>\n                                                        <div class='form-group row my-0'>\n                                                            <label for='flag' class='col-4 col-form-label text-right'>flag (emoji)</label>\n                                                            <div class='col-8'>\n                                                                <input type='text' class='form-control' id='flag'\n                                                                    data-classid={currentClass.id}\n                                                                    data-contestantid={musher.id}\n                                                                    onInput={this.adminSignupEdit}\n                                                                    value={musher.flag}\n                                                                />\n                                                            </div>\n                                                        </div>\n                                                        <div class='form-group row my-0'>\n                                                            <label for='countryCode' class='col-4 col-form-label text-right'>countryCode (iso)</label>\n                                                            <div class='col-8'>\n                                                                <input type='text' class='form-control' id='countryCode'\n                                                                    data-classid={currentClass.id}\n                                                                    data-contestantid={musher.id}\n                                                                    onInput={this.adminSignupEdit}\n                                                                    value={musher.countryCode}\n                                                                />\n                                                            </div>\n                                                        </div>\n                                                        <div class='form-group row my-0'>\n                                                            <label for='birthdate' class='col-4 col-form-label text-right'>birthdate</label>\n                                                            <div class='col-8'>\n                                                                <input type='date' class='form-control' id='birthdate'\n                                                                    data-classid={currentClass.id}\n                                                                    data-contestantid={musher.id}\n                                                                    onInput={this.adminSignupEdit}\n                                                                    value={musher.birthdate ? util.isoDate(musher.birthdate, false, false, true) : null}\n                                                                />\n                                                            </div>\n                                                        </div>\n\n                                                        <div class='form-group row my-0'>\n                                                            <label for='sportsClub' class='col-4 col-form-label text-right'>Klubb</label>\n                                                            <div class='col-8'>\n                                                                <input type='text' class='form-control' id='sportsClub'\n                                                                    data-classid={currentClass.id}\n                                                                    data-contestantid={musher.id}\n                                                                    onInput={this.adminSignupEdit}\n                                                                    value={musher.sportsClub}\n                                                                />\n                                                            </div>\n                                                        </div>\n                                                        <div class='form-group row my-0'>\n                                                            <label for='facebook' class='col-4 col-form-label text-right'>Facebook</label>\n                                                            <div class='col-8'>\n                                                                <input type='text' class='form-control' id='facebook'\n                                                                    data-classid={currentClass.id}\n                                                                    data-contestantid={musher.id}\n                                                                    onInput={this.adminSignupEdit}\n                                                                    value={musher.facebook}\n                                                                />\n                                                            </div>\n                                                        </div>\n                                                        <div class='form-group row my-0'>\n                                                            <label for='instagram' class='col-4 col-form-label text-right'>Instagram</label>\n                                                            <div class='col-8'>\n                                                                <input type='text' class='form-control' id='instagram'\n                                                                    data-classid={currentClass.id}\n                                                                    data-contestantid={musher.id}\n                                                                    onInput={this.adminSignupEdit}\n                                                                    value={musher.instagram}\n                                                                />\n                                                            </div>\n                                                        </div>\n                                                        {/* <div class='form-group row my-0'>\n                                                            <label for='team' class='col-4 col-form-label text-right'>Team</label>\n                                                            <div class='col-8'>\n                                                                <select class='form-control' id='team' aria-describedby='teamHelp'\n                                                                    data-classid={currentClass.id}\n                                                                    data-contestantid={musher.id}\n                                                                    onInput={this.adminSignupEdit}\n                                                                    value={musher.team}\n                                                                >\n                                                                    <option value=''>-- Velg team --</option>\n                                                                    {teams.map(team =>\n                                                                        <option value={team.id}>{team.name}</option>\n                                                                    )}\n                                                                </select>\n                                                            </div>\n                                                        </div> */}\n                                                        <div class='form-group row my-0'>\n                                                            <label for='team' class='col-4 col-form-label text-right'>Klasse</label>\n                                                            <div class='col-8'>\n                                                                <select class='form-control' id='class' aria-describedby='classHelp'\n                                                                    data-classid={currentClass.id}\n                                                                    data-contestantid={musher.id}\n                                                                    onInput={this.adminSignupEdit}\n                                                                    value={musher.class}\n                                                                >\n                                                                    <option value=''>-- Choose race class --</option>\n                                                                    {race.classes && race.classes.sort((a, b) => a.distance - b.distance).map(currentClass => <>\n                                                                        <option value={currentClass.id}>{currentClass.title} - {currentClass.distance} km - Påmelding: {currentClass.signupfee || race.signupfee} NOK</option>\n                                                                    </>)}\n                                                                </select>\n                                                            </div>\n                                                        </div>\n\n                                                        <div class='form-group row my-0'>\n                                                            <label for='price1' class='col-4 col-form-label text-right'>Price 1</label>\n                                                            <div class='col-8'>\n                                                                <input type='text' class='form-control' id='price1'\n                                                                    data-classid={currentClass.id}\n                                                                    data-contestantid={musher.id}\n                                                                    onInput={this.adminSignupEdit}\n                                                                    value={musher.price1}\n                                                                />\n                                                            </div>\n                                                        </div>\n                                                        <div class='form-group row my-0'>\n                                                            <label for='price2' class='col-4 col-form-label text-right'>Price 2</label>\n                                                            <div class='col-8'>\n                                                                <input type='text' class='form-control' id='price2'\n                                                                    data-classid={currentClass.id}\n                                                                    data-contestantid={musher.id}\n                                                                    onInput={this.adminSignupEdit}\n                                                                    value={musher.price2}\n                                                                />\n                                                            </div>\n                                                        </div>\n                                                        <div class='form-group row my-0'>\n                                                            <label for='price3' class='col-4 col-form-label text-right'>Price 3</label>\n                                                            <div class='col-8'>\n                                                                <input type='text' class='form-control' id='price3'\n                                                                    data-classid={currentClass.id}\n                                                                    data-contestantid={musher.id}\n                                                                    onInput={this.adminSignupEdit}\n                                                                    value={musher.price3}\n                                                                />\n                                                            </div>\n                                                        </div>\n                                                        <div class='form-group row my-0'>\n                                                            <label for='priceSent' class='col-4 col-form-label text-right'>Price sent</label>\n                                                            <div class='col-8'>\n                                                                <input type='date' class='form-control' id='priceSent'\n                                                                    data-classid={currentClass.id}\n                                                                    data-contestantid={musher.id}\n                                                                    onInput={this.adminSignupEdit}\n                                                                    value={musher.priceSent ? util.isoDate(musher.priceSent, false, false, true) : null}\n                                                                />\n                                                            </div>\n                                                        </div>\n\n                                                        <div class='form-group row my-5'>\n                                                            <div class='col-8'>\n                                                                <button type='button' class='btn btn-danger float-right'\n                                                                    id='deleteUser'\n                                                                    value='1'\n                                                                    onClick={this.adminSignupEdit}\n                                                                    data-classid={currentClass.id}\n                                                                    data-contestantid={musher.id}\n                                                                >\n                                                                    Delete user from this class\n                                                                </button>\n                                                            </div>\n                                                        </div>\n\n                                                    </>}\n                                                </td>\n                                            </tr>\n                                        </>);\n                                    })}\n                                </tbody>\n                            </table>\n                        </div>\n\n                        {isAdmin && <>\n                            {showAdminSendMessage[currentClass.id] ? <>\n                                <div class='container'>\n                                    <div class='row'>\n                                        <div class='col-12'>\n                                            <h5>Email to all mushers in {currentClass.title}</h5>\n                                            <div class='overflow-auto p-5' style='max-height: 30vh;'>\n                                                <small>\n                                                    {currentClass.emails && currentClass.emails.map((email) => <div class='border rounded-lg p-3 mb-3'>\n                                                        <div class='row bg-light'>\n                                                            <div class='col-3 text-right'>\n                                                                Date:\n                                                            </div>\n                                                            <div class='col-9'>\n                                                                {util.formatDate(email.date, { locale: language, hour12: false, hour: '2-digit', minute: '2-digit' })}\n                                                            </div>\n                                                        </div>\n                                                        <div class='row bg-light'>\n                                                            <div class='col-3 text-right'>\n                                                                To:\n                                                            </div>\n                                                            <div class='col-9'>\n                                                                {email.to.map(e => <span class='badge badge-info px-2 py-1 mr-2'>{e}</span>)}\n                                                            </div>\n                                                        </div>\n                                                        <div class='row bg-light'>\n                                                            <div class='col-3 text-right'>\n                                                                Subject:\n                                                            </div>\n                                                            <div class='col-9'>\n                                                                {email.subject}\n                                                            </div>\n                                                        </div>\n                                                        <div class='row mt-2'>\n                                                            <div class='col-3 text-right'>\n                                                                Body:\n                                                            </div>\n                                                            <div class='col-9'\n                                                                dangerouslySetInnerHTML={{ __html: nl2br(email.body) }}\n                                                            />\n                                                        </div>\n                                                    </div>)}\n                                                </small>\n                                            </div>\n\n                                            <div class='form-group row'>\n                                                <label for='subject' class='col-2 col-form-label text-right font-weight-lighter'>To</label>\n                                                <div class='col-10'>\n                                                    {currentClass.contestants && currentClass.contestants.map((musher) => <>\n                                                        <span class='badge badge-info px-2 py-1 mr-2'>{musher.firstname} {musher.lastname} ({musher.email})</span>\n                                                    </>)}\n                                                </div>\n                                            </div>\n                                            <div class='form-group row'>\n                                                <label for='subject' class='col-2 col-form-label text-right font-weight-lighter'>Subject</label>\n                                                <div class='col-10'>\n                                                    <input type='text' class='form-control' id='subject'\n                                                        onInput={linkstate(this, 'message.subject')}\n                                                        value={message.subject}\n                                                    />\n                                                </div>\n                                            </div>\n                                            <div class='form-group row'>\n                                                <label for='body' class='col-2 col-form-label text-right font-weight-lighter'>Message</label>\n                                                <div class='col-10'>\n                                                    <textarea type='text' class='form-control' id='body'\n                                                        rows='10'\n                                                        onInput={linkstate(this, 'message.body')}\n                                                        value={message.body}\n                                                    />\n                                                </div>\n                                                <div class='col-5 contain-images'>\n                                                    {message.body && <Markdown markdown={message.body} markdownOpts={mu.getMarkdownOptions()} />}\n                                                </div>\n                                            </div>\n\n                                            {emailResponse && <>\n                                                <div class={`alert alert-${emailResponse && emailResponse.status >= 300 ? 'danger' : 'success'}`} role='alert'>\n                                                    <small>\n                                                        <xmp>{JSON.stringify(emailResponse, null, 4)}</xmp>\n                                                    </small>\n                                                </div>\n                                            </>}\n\n                                            <button class='btn btn-success float-right'\n                                                type='button'\n                                                data-to={currentClass.contestants && currentClass.contestants.map(musher => musher.email)}\n                                                data-raceclassid={currentClass.id}\n                                                onClick={this.sendEmail}\n                                            >\n                                                <i class='fas fa-paper-plane' /> Send email to all mushers\n                                            </button>\n                                            <button class='btn btn-danger float-right mr-2'\n                                                type='button'\n                                                onClick={this.resetEmail}\n                                            >\n                                                <i class='fas fa-times' /> Reset email\n                                            </button>\n\n                                        </div>\n                                        <div class='col-12 text-center'>\n                                            <button class='btn btn-sm btn-link' type='button' onClick={this.toggleAdminSendMessage} data-class={currentClass.id}>Hide email form</button>\n                                        </div>\n                                    </div>\n                                </div>\n                            </> : <>\n                                <div class='col-12 text-center'>\n                                    <button class='btn btn-sm btn-link' type='button' onClick={this.toggleAdminSendMessage} data-class={currentClass.id}>Send email to all in this class</button>\n                                </div>\n                                <div class='col-12 text-center'>\n                                    <button class='btn btn-sm btn-link' type='button' onClick={this.toggleAdminSendInboxMessage} data-class={currentClass.id}>Send inbox message to all in this class</button>\n                                </div>\n                                <div class='col-12 text-center'>\n                                    <button class='btn btn-sm btn-link' type='button' onClick={this.toggleAdminImport} data-class={currentClass.id}>Toggle import form</button>\n                                </div>\n                            </>}\n\n                            {showAdminSendInboxMessage[currentClass.id] ? <>\n                                <div class='container'>\n                                    <div class='row'>\n                                        <div class='col-12'>\n                                            <h5>Inbox Message to all mushers in {currentClass.title}</h5>\n                                            <div class='form-group row'>\n                                                <label for='body' class='col-2 col-form-label text-right font-weight-lighter'>Inbox message</label>\n                                                <div class='col-10'>\n                                                    <textarea type='text' class='form-control' id='body'\n                                                        rows='10'\n                                                        onInput={linkstate(this, 'inboxMessage.body')}\n                                                        value={inboxMessage.body}\n                                                    />\n                                                </div>\n                                                <div class='col-5 contain-images'>\n                                                    {inboxMessage.body && <Markdown markdown={inboxMessage.body} markdownOpts={mu.getMarkdownOptions()} />}\n                                                </div>\n                                            </div>\n\n                                            <div class='clearfix'>\n                                                <button class='btn btn-success float-right'\n                                                    type='button'\n                                                    data-raceclassid={currentClass.id}\n                                                    onClick={this.sendInboxMessage}\n                                                >\n                                                    <i class='fas fa-paper-plane' /> Send inbox message to all mushers\n                                                </button>\n                                                <button class='btn btn-danger float-right mr-2'\n                                                    type='button'\n                                                    onClick={this.resetInboxMessage}\n                                                >\n                                                    <i class='fas fa-times' /> Reset inbox message\n                                                </button>\n                                            </div>\n\n                                            {inboxMessageResponse && <>\n                                                <div class={`alert alert-${inboxMessageResponse && inboxMessageResponse.status >= 300 ? 'danger' : 'success'}`} role='alert' style='max-height: 20vh;'>\n                                                    <small>\n                                                        <xmp>{JSON.stringify(inboxMessageResponse, null, 4)}</xmp>\n                                                    </small>\n                                                </div>\n                                            </>}\n\n                                        </div>\n                                        <div class='col-12 text-center'>\n                                            <button class='btn btn-sm btn-link' type='button' onClick={this.toggleAdminSendInboxMessage} data-class={currentClass.id}>Hide inboxmessage form</button>\n                                        </div>\n                                    </div>\n                                </div>\n                            </> : <>\n\n                            </>}\n\n                            {isAdmin && showAdminImport[currentClass.id] && <>\n                                <div class='form-group'>\n                                    <label for='importUsers'><Text id='races.paste-users'>Paste your user data here to import users</Text>:</label>\n                                    <textarea\n                                        class='form-control'\n                                        id='importUsers'\n                                        rows='20'\n                                        oninput={e => this.parseInput(e.target.value, currentClass.id)}\n                                    />\n                                </div>\n                            </>}\n\n                        </>}\n                    </>)}\n                </div>\n            </div>\n        </>);\n    }\n}\n\nexport default AppRaceDetailMushers;\n","import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport { Text, Localizer } from 'preact-i18n';\nimport { route } from 'preact-router';\nimport Markdown from 'preact-markdown';\nimport linkstate from 'linkstate';\n\nimport RaceComments from '../public/race/comments';\nimport RaceAddComment from '../public/race/commentAdd';\nimport RaceText from '../public/race/raceText';\nimport Images from '../../components/form/images';\nimport LikesAndComments from '../../components/feedback/likesAndComments';\n\nimport ScrollIntoView from '../../components/util/scrollIntoView';\n\nimport RaceResults from './results';\nimport RaceNews from './news';\nimport RaceSignup from './signup';\nimport RaceClasses from './classes';\nimport RaceMushers from './mushers';\nimport RaceUserImages from './userImages';\nimport RaceTracking from './tracking';\nimport RaceNotifications from './notifications';\n\nimport mu from '../../lib/musher-util';\nconst MARGIN_TOP = mu.marginTop(false);\nconst MARGIN_TOP_BACK = mu.marginTopBack(false);\nconst MARGIN_BOTTOM = mu.marginBottom();\nconst SUB_MENU_MARGIN_TOP = mu.subMenuMarginTop();\n\nconst initialState = {\n\tisLoading: false,\n    showAdminSendMessage: {},\n\tnewRaceArticle: {},\n\tnewRaceUserImage: {},\n\tmessage: {\n\t\tsubject: '',\n\t\tbody: '',\n\t},\n};\n\n@observer\nclass AppRaceDetailSignup extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            ...initialState,\n            showAdminSendMessage: {},\n            newRaceArticle: {},\n            newRaceUserImage: {},\n            message: {\n                subject: '',\n                body: '',\n            },\n            submenu: props.submenu || 'about',\n        };\n\t\tthis.inputRef = {};\n        this.updateTimer = {};\n    }\n\n\tasync loadRace(props = this.props) {\n\t\tthis.setState({ isLoading: true });\n\t\tconst { raceStore, userStore } = props.stores;\n\t\tconst { user = {} } = userStore;\n\t\tconst { raceid } = props;\n\t\tawait raceStore.load(raceid);\n\t\tthis.setState({ isLoading: false });\n\n\t\tlet signup = {};\n\t\tconst { race } = raceStore;\n\t\tif (race.classes && user && user.email) {\n\t\t\tfor (let i = 0, l = race.classes.length; i < l; i += 1) {\n\t\t\t\tconst currentClass = race.classes[i];\n\t\t\t\tif (currentClass.contestants) {\n\t\t\t\t\tconst idx = currentClass.contestants.findIndex(e => e.email === user.email);\n\t\t\t\t\tif (idx > -1) {\n\t\t\t\t\t\tsignup = { ...currentClass.contestants[idx], class: currentClass.id };\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\traceStore.updateKeyValue('signup', signup);\n        if (signup.user) {\n            await userStore.getDogs({ id: signup.user });\n        }\n\n\t\tconst allTeamIds = race.classes.filter(currentClass => currentClass.contestants && currentClass.contestants.length > 0).map((currentClass) => {\n            return currentClass.contestants.filter(musher => musher.team > 0).map(musher => musher.team);\n\t\t}).flat();\n\t\tif (allTeamIds.length > 0 && raceid) {\n\t\t\tawait raceStore.loadTeams(allTeamIds.join(','));\n\t\t}\n\t\traceStore.getAllClassesSortedBy();\n\n\t\tawait raceStore.loadPublicInteractions(raceid);\n\t}\n\n    likeRace = async () => {\n\t\tconst { raceStore } = this.props.stores;\n\t\tconst { race } = raceStore;\n\t\tconst response = await raceStore.likeRace({ id: race.id });\n\n        if (response && response.status === 200) {\n\t\t\t// this.loadRaceDetail({ race });\n\t\t}\n\t}\n\n\ttoggleAddComment = (e) => {\n\t\tconst raceId = e.target.parentElement.dataset.id || e.target.dataset.id;\n\t\tconst { showAddComment } = this.state;\n\t\tthis.setState({\n\t\t\tshowAddComment: !showAddComment,\n\t\t}, () => {\n\t\t\tif (this.inputRef[raceId]) {\n\t\t\t\tthis.inputRef[raceId].focus();\n\t\t\t}\n\t\t});\n\t}\n\n\tchooseSubmenu = (e) => {\n\t\tconst submenu = e.target.parentElement.dataset.menu || e.target.dataset.menu;\n\t\tthis.setState({ submenu });\n        const { raceid } = this.props;\n        route(`/app-races/${raceid}/${submenu}`);\n\t}\n\n    resizeTextarea = (el) => {\n\t\tlet element = el;\n\t\tif (element.target) {\n\t\t\telement = el.target;\n\t\t}\n\t\tconst { scrollHeight } = element;\n\t\telement.style.height = `${scrollHeight}px`;\n\t}\n\n\tresizeAllTextareas = () => {\n\t\tconst textareaList = document.getElementsByTagName('textarea');\n\t\tfor(let i = 0, l = textareaList.length; i < l; i += 1){\n\t\t\tconst textarea = textareaList[i];\n\t\t\tthis.resizeTextarea(textarea);\n\t\t}\n\t}\n\n    addNavigation = (props) => {\n        // console.log({ props });\n        this.setState({ submenu: props.submenu });\n    }\n\n\tcomponentDidMount() {\n\t\tthis.loadRace();\n        this.resizeAllTextareas();\n\t}\n\n    componentWillReceiveProps(nextProps) {\n        if (nextProps.raceid !== this.props.raceid) {\n            this.loadRace(nextProps);\n        }\n        // console.log('componentWillReceiveProps', nextProps.submenu, this.props.submenu);\n        if (nextProps.submenu !== this.props.submenu) {\n            this.addNavigation(nextProps);\n        }\n\t}\n\n    back = () => {\n        route(`/`);\n    }\n\n\trender() {\n        const { submenu } = this.state;\n        const { showAdminSendMessage, message, emailResponse } = this.state;\n        const { showAddComment, newRaceArticle, newRaceUserImage } = this.state;\n\n\t\tconst { userStore, raceStore, appState } = this.props.stores;\n\t\tconst { user = {}, teams = [], isAdmin } = userStore;\n        const { language = 'en' } = user;\n\n\t\tconst { raceid, subsection } = this.props;\n\t\tconst { race, signup, zoomToMarkers } = raceStore;\n        const { darkmode, displayDetails, editUserDetails } = appState;\n\n\t\tconst { likes = [], comments = [] } = race;\n\t\tconst hasLikedRace = race.likes && race.likes.findIndex(e => e.user === user.id) > -1;\n\n        const today = new Date();\n        let status = '';\n        if (today >= new Date(race.startDate) && today <= new Date(race.endDate)) {\n            status = 'race';\n        } else if (today >= new Date(race.signupStartDate) && today <= new Date(race.signupEndDate)) {\n            status = 'signup';\n        }\n        const isLiveRace = race.liveRace === 1;\n        const showSignup = isLiveRace ? !!signup.email : true;\n\n        if (submenu === 'tracking') {\n            return (\n                <RaceTracking stores={this.props.stores} raceid={raceid} />\n            );\n        }\n\n\t\treturn (\n\t\t\t<div class='container-fluid' style={`margin-bottom: ${MARGIN_BOTTOM}; margin-top: ${MARGIN_TOP};`}>\n                <button class='btn btn-link pl-0 fixed-top text-primary'\n                    style={`top: ${MARGIN_TOP_BACK}; left: 5px; font-size: 35px; width: 45px;`}\n                    onClick={this.back}>\n                    <i class='fas fa-arrow-circle-left' />\n                </button>\n\n                <div class='row m-0'>\n\t\t\t\t\t<div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-1 mb-2 p-0'>\n                        <div class='row d-flex align-items-center position-relative'>\n                            <h3 class='position-absolute' style='top: 3px; right: 5px;'>\n                                {status === 'signup' && !isLiveRace && <>\n                                    <span\n                                        class='badge badge-primary badge-lg border border-white ml-2'\n                                        data-menu='signup'\n                                        onClick={this.chooseSubmenu}\n                                    >\n                                        <Text id='races.signup-open'>Påmelding åpen</Text>\n                                    </span>\n                                </>}\n                                {status === 'race' && <>\n                                    <span class='badge badge-danger border border-white ml-2'><Text id='races.race-in-progress'>Løp pågår</Text></span>\n                                </>}\n                                {status === 'done' && <>\n                                    <span class='badge badge-success border border-white ml-2'><Text id='races.race-finished'>Løp avsluttet</Text></span>\n                                </>}\n                            </h3>\n                            {(race.images && race.images[0]) ? <img src={race.images[0].s3LargeLink} class='img-fluid' /> : ''}\n                        </div>\n                    </div>\n                </div>\n\n                <div class='row'>\n                    <div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3'>\n                        {isAdmin && <>\n                            <a class='btn btn-primary float-right' href={`https://homerunrace.no/index#/race/${race.id}/edit`}>Edit</a>\n                        </>}\n                        <h3>{race.title}</h3>\n                        <div>\n                            {race.startDate && <><Text id='races.periode'>Periode</Text>: {util.formatDate(race.startDate, { locale: 'no-NB', hour12: false, hour: '2-digit', minute: '2-digit' })}</>}\n                            {race.endDate && <> - {util.formatDate(race.endDate, { locale: 'no-NB', hour12: false, hour: '2-digit', minute: '2-digit' })}</>}\n                        </div>\n                    </div>\n                </div>\n\n                <div class='row'>\n                    <div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3'>\n                        <div class='row'>\n                            <div class='w-100 overflow-hidden'>\n                                <div\n                                    class='d-flex flex-row flex-nowrap pb-2 px-1'\n                                    style='overflow: auto; scroll-snap-type: x mandatory;'\n                                >\n                                    <div class='col px-0 pt-2'>\n                                        <button\n                                            class={`btn btn-block rounded-pill-left rounded-none ${submenu === 'about' ? 'btn-primary' : 'btn-outline-primary'} text-nowrap`}\n                                            style='text-overflow: ellipsis; overflow: hidden;'\n                                            data-menu='about'\n                                            onClick={this.chooseSubmenu}\n                                        ><i class='fas fa-info-circle' /> <Text id='race.about'>About</Text></button>\n                                        {submenu === 'about' && <ScrollIntoView horizontal={'center'} vertical={'end'} />}\n                                    </div>\n                                    <div class='col px-0 pt-2'>\n                                        <button\n                                            class={`btn btn-block rounded-none ${submenu === 'results' ? 'btn-primary' : 'btn-outline-primary'} text-nowrap`}\n                                            style='text-overflow: ellipsis; overflow: hidden;'\n                                            data-menu='results'\n                                            onClick={this.chooseSubmenu}\n                                        ><i class='fas fa-list-ol' /> <Text id='race.results'>Results</Text></button>\n                                        {submenu === 'results' && <ScrollIntoView horizontal={'center'} vertical={'end'} />}\n                                    </div>\n                                    <div class='col px-0 pt-2'>\n                                        <button\n                                            class={`btn btn-block rounded-none ${submenu === 'tracking' ? 'btn-primary' : 'btn-outline-primary'} text-nowrap`}\n                                            style='text-overflow: ellipsis; overflow: hidden;'\n                                            data-menu='tracking'\n                                            onClick={this.chooseSubmenu}\n                                        ><i class='fas fa-map-marker-alt' /> <Text id='race.tracking'>Tracking</Text></button>\n                                        {submenu === 'tracking' && <ScrollIntoView horizontal={'center'} vertical={'end'} />}\n                                    </div>\n                                    <div class='col px-0 pt-2'>\n                                        <button\n                                            class={`btn btn-block rounded-none ${submenu === 'news' ? 'btn-primary' : 'btn-outline-primary'} text-nowrap`}\n                                            style='text-overflow: ellipsis; overflow: hidden;'\n                                            data-menu='news'\n                                            onClick={this.chooseSubmenu}\n                                        ><i class='fas fa-rss' /> <Text id='race.news'>News</Text></button>\n                                        {submenu === 'news' && <ScrollIntoView horizontal={'center'} vertical={'end'} />}\n                                    </div>\n                                    <div class='col px-0 pt-2'>\n                                        <button\n                                            class={`btn btn-block rounded-none ${submenu === 'userImages' ? 'btn-primary' : 'btn-outline-primary'} text-nowrap`}\n                                            style='text-overflow: ellipsis; overflow: hidden;'\n                                            data-menu='userImages'\n                                            onClick={this.chooseSubmenu}\n                                        ><i class='fas fa-images' /> <Text id='race.user-images'>User images</Text></button>\n                                        {submenu === 'userImages' && <ScrollIntoView horizontal={'center'} vertical={'end'} />}\n                                    </div>\n                                    {race.rules && <div class='col px-0 pt-2'>\n                                        <button\n                                            class={`btn btn-block rounded-none ${submenu === 'rules' ? 'btn-primary' : 'btn-outline-primary'} text-nowrap`}\n                                            style='text-overflow: ellipsis; overflow: hidden;'\n                                            data-menu='rules'\n                                            onClick={this.chooseSubmenu}\n                                        ><i class='fas fa-gavel' /> <Text id='race.rules'>Rules</Text></button>\n                                        {submenu === 'rules' && <ScrollIntoView horizontal={'center'} vertical={'end'} />}\n                                    </div>}\n                                    {race.veterinaryInfo && <div class='col px-0 pt-2'>\n                                        <button\n                                            class={`btn btn-block rounded-none ${submenu === 'veterinary' ? 'btn-primary' : 'btn-outline-primary'} text-nowrap`}\n                                            style='text-overflow: ellipsis; overflow: hidden;'\n                                            data-menu='veterinary'\n                                            onClick={this.chooseSubmenu}\n                                        ><i class='fas fa-stethoscope' /> <Text id='race.veterinary'>Veterinary info</Text></button>\n                                        {submenu === 'veterinary' && <ScrollIntoView horizontal={'center'} vertical={'end'} />}\n                                    </div>}\n                                    {race.checkpoints && <div class='col px-0 pt-2'>\n                                        <button\n                                            class={`btn btn-block rounded-none ${submenu === 'checkpoints' ? 'btn-primary' : 'btn-outline-primary'} text-nowrap`}\n                                            style='text-overflow: ellipsis; overflow: hidden;'\n                                            data-menu='checkpoints'\n                                            onClick={this.chooseSubmenu}\n                                        ><i class='fas fa-map-marker-alt' /> <Text id='race.checkpoints'>Checkpoints</Text></button>\n                                        {submenu === 'checkpoints' && <ScrollIntoView horizontal={'center'} vertical={'end'} />}\n                                    </div>}\n                                    {race.trailDescription && <div class='col px-0 pt-2'>\n                                        <button\n                                            class={`btn btn-block rounded-none ${submenu === 'track' ? 'btn-primary' : 'btn-outline-primary'} text-nowrap`}\n                                            style='text-overflow: ellipsis; overflow: hidden;'\n                                            data-menu='track'\n                                            onClick={this.chooseSubmenu}\n                                        ><i class='fas fa-map-signs' /> <Text id='race.track-description'>Track description</Text></button>\n                                        {submenu === 'track' && <ScrollIntoView horizontal={'center'} vertical={'end'} />}\n                                    </div>}\n                                    {race.program && <div class='col px-0 pt-2'>\n                                        <button\n                                            class={`btn btn-block rounded-none ${submenu === 'program' ? 'btn-primary' : 'btn-outline-primary'} text-nowrap`}\n                                            style='text-overflow: ellipsis; overflow: hidden;'\n                                            data-menu='program'\n                                            onClick={this.chooseSubmenu}\n                                        ><i class='fas fa-list-alt' /> <Text id='race.program'>Program</Text></button>\n                                        {submenu === 'program' && <ScrollIntoView horizontal={'center'} vertical={'end'} />}\n                                    </div>}\n                                    {race.prices && <div class='col px-0 pt-2'>\n                                        <button\n                                            class={`btn btn-block rounded-none ${submenu === 'prices' ? 'btn-primary' : 'btn-outline-primary'} text-nowrap`}\n                                            style='text-overflow: ellipsis; overflow: hidden;'\n                                            data-menu='prices'\n                                            onClick={this.chooseSubmenu}\n                                        ><i class='fas fa-award' /> <Text id='race.prices'>Premier</Text></button>\n                                        {submenu === 'prices' && <ScrollIntoView horizontal={'center'} vertical={'end'} />}\n                                    </div>}\n                                    {!isLiveRace && <div class='col px-0 pt-2'>\n                                        <button\n                                            class={`btn btn-block rounded-none ${submenu === 'classes' ? 'btn-primary' : 'btn-outline-primary'} text-nowrap`}\n                                            style='text-overflow: ellipsis; overflow: hidden;'\n                                            data-menu='classes'\n                                            onClick={this.chooseSubmenu}\n                                        ><i class='fas fa-folder-open' /> <Text id='race.classes'>Classes</Text></button>\n                                        {submenu === 'classes' && <ScrollIntoView horizontal={'center'} vertical={'end'} />}\n                                    </div>}\n                                    <div class='col px-0 pt-2'>\n                                        <button\n                                            class={`btn btn-block rounded-none ${showSignup ? '' : 'rounded-pill-right'} ${submenu === 'mushers' ? 'btn-primary' : 'btn-outline-primary'} text-nowrap`}\n                                            style='text-overflow: ellipsis; overflow: hidden;'\n                                            data-menu='mushers'\n                                            onClick={this.chooseSubmenu}\n                                        ><i class='fas fa-users' /> <Text id='races.mushers'>Mushers</Text></button>\n                                        {submenu === 'mushers' && <ScrollIntoView horizontal={'center'} vertical={'end'} />}\n                                    </div>\n                                    {showSignup && <div class='col px-0 pt-2'>\n                                        <button\n                                            class={`btn btn-block rounded-pill-right rounded-none ${submenu === 'signup' ? 'btn-primary' : 'btn-outline-primary'} text-nowrap`}\n                                            style='text-overflow: ellipsis; overflow: hidden;'\n                                            data-menu='signup'\n                                            onClick={this.chooseSubmenu}\n                                        ><i class='fas fa-user-edit' /> <Text id='race.signup'>Sign up</Text></button>\n                                        {submenu === 'signup' && <ScrollIntoView horizontal={'center'} vertical={'end'} />}\n                                    </div>}\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n\n                {submenu === 'about' && <>\n                    <RaceNotifications stores={this.props.stores} race={race} />\n                    <div class='row'>\n                        <div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-0 mb-2'>\n                            <h2 class='mb-0'><Text id='race.about'>Om løpet</Text></h2>\n                        </div>\n                        <div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-3 mb-2'>\n                            <p class='clearfix'>\n                                <strong>\n                                    <Markdown markdown={mu.replaceImages(race.ingress, race.images, language)} markdownOpts={mu.getMarkdownOptions()} />\n                                </strong>\n                            </p>\n\n                            {status === 'signup' && <>\n                                {isLiveRace ? <>                                \n                                    <button\n                                        class='btn btn-block btn-success mb-3'\n                                        data-menu='signup'\n                                        onClick={this.chooseSubmenu}\n                                    >\n                                        <i class='fas fa-user-edit' /> <Text id='race.declaration'>Declaration</Text> & <Text id='race.chiplist'>Chiplist</Text>\n                                    </button>\n                                </> : <>                                \n                                    <button\n                                        class='btn btn-block btn-success mb-3'\n                                        data-menu='signup'\n                                        onClick={this.chooseSubmenu}\n                                    >\n                                        <i class='fas fa-user-edit' /> <Text id='race.signup'>Sign up</Text>\n                                    </button>\n                                </>}\n                            </>}\n\n                            <Markdown markdown={mu.replaceImages(race.body, race.images, language)} markdownOpts={mu.getMarkdownOptions()} />\n                        </div>\n                        <div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-3 mb-2'>\n                            {race.tag && race.tag.split(',').map(tag => <>\n                                <span class='badge badge-pill badge-primary py-1 ml-2'>\n                                    <a class='text-white' href={`https://www.facebook.com/hashtag/${tag}`} target='_blank' rel='noreferrer' native>\n                                        <i class='fab fa-facebook' /> #{tag}\n                                    </a>\n                                </span>\n                                <span class='badge badge-pill badge-primary py-1 ml-2'>\n                                    <a class='text-white' href={`https://www.instagram.com/explore/tags/${tag}`} target='_blank' rel='noreferrer' native>\n                                        <i class='fab fa-instagram' /> #{tag}\n                                    </a>\n                                </span>\n                            </>)}\n                        </div>\n                    </div>\n                </>}\n                {submenu === 'results' && <>\n                    <RaceNotifications stores={this.props.stores} race={race} />\n                    <RaceResults stores={this.props.stores} raceid={raceid} />\n                </>}\n                {submenu === 'tracking' && <>\n                    <RaceTracking stores={this.props.stores} raceid={raceid} />\n                </>}\n                {submenu === 'news' && <>\n                    <RaceNews stores={this.props.stores} race={race} />\n                </>}\n                {submenu === 'userImages' && <>\n                    <RaceUserImages stores={this.props.stores} race={race} />\n                </>}\n                {submenu === 'rules' && <>\n                    <div class='row'>\n                        <div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-0 mb-2'>\n                            <h2 class='mb-0'><Text id='race.rules'>Regler</Text></h2>\n                        </div>\n                        <div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-3 mb-2'>\n                            <Markdown markdown={mu.replaceImages(race.rules, race.images, language)} markdownOpts={mu.getMarkdownOptions()} />\n                        </div>\n                    </div>\n                </>}\n                {submenu === 'veterinary' && <>\n                    <div class='row'>\n                        <div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-0 mb-2'>\n                            <h2 class='mb-0'><Text id='race.veterinary'>Veterinærinfo</Text></h2>\n                        </div>\n                        <div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-3 mb-2'>\n                            <Markdown markdown={mu.replaceImages(race.veterinaryInfo, race.images, language)} markdownOpts={mu.getMarkdownOptions()} />\n                        </div>\n                    </div>\n                </>}\n                {submenu === 'checkpoints' && <>\n                    <div class='row'>\n                        <div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-0 mb-2'>\n                            <h2 class='mb-0'><Text id='race.checkpoints'>Sjekkpunkter</Text></h2>\n                        </div>\n                        <div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-3 mb-2'>\n                            <Markdown markdown={mu.replaceImages(race.checkpoints, race.images, language)} markdownOpts={mu.getMarkdownOptions()} />\n                        </div>\n                    </div>\n                </>}\n                {submenu === 'track' && <>\n                    <div class='row'>\n                        <div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-0 mb-2'>\n                            <h2 class='mb-0'><Text id='race.track-description'>Løypebeskrivelse</Text></h2>\n                        </div>\n                        <div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-3 mb-2'>\n                            <Markdown markdown={mu.replaceImages(race.trailDescription, race.images, language)} markdownOpts={mu.getMarkdownOptions()} />\n                        </div>\n                    </div>\n                </>}\n                {submenu === 'program' && <>\n                    <div class='row'>\n                        <div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-0 mb-2'>\n                            <h2 class='mb-0'><Text id='race.program'>Program</Text></h2>\n                        </div>\n                        <div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-3 mb-2'>\n                            <Markdown markdown={mu.replaceImages(race.program, race.images, language)} markdownOpts={mu.getMarkdownOptions()} />\n                        </div>\n                    </div>\n                </>}\n                {submenu === 'prices' && <>\n                    <div class='row'>\n                        <div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-0 mb-2'>\n                            <h2 class='mb-0'><Text id='race.prices'>Premier</Text></h2>\n                        </div>\n                        <div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-3 mb-2'>\n                            <Markdown markdown={mu.replaceImages(race.prices, race.images, language)} markdownOpts={mu.getMarkdownOptions()} />\n                        </div>\n                    </div>\n                </>}\n                {submenu === 'mushers' && <>\n                    <RaceMushers stores={this.props.stores} race={race} />\n                </>}\n                {submenu === 'classes' && <>\n                    <RaceClasses stores={this.props.stores} race={race} />\n                </>}\n                {submenu === 'signup' && <>\n                    <RaceSignup stores={this.props.stores} race={race} />\n                </>}\n\n                {['about'].indexOf(submenu) > -1 && <>\n                    <div class='row'>\n                        <div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-0 mb-2'>\n                            <div class=''>\n                                <LikesAndComments\n                                    stores={this.props.stores}\n                                    likes={likes}\n                                    comments={comments}\n                                    type='race'\n                                    // onTeamClick={onTeamClick}\n                                    // onUserClick={onUserClick}\n                                />\n                            </div>\n                        </div>\n\n                        <div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-2 mb-3'>\n                            <div class='row'>\n                                <div class='col-6 text-center'>\n                                    <button type='button' class={`btn btn-outline-${hasLikedRace ? 'primary' : 'secondary'} btn-lg btn-block ${hasLikedRace ? 'text-primary' : ''}`}\n                                        onClick={this.likeRace}\n                                        // disabled={hasLikedRace}\n                                    >\n                                        <i class={`${hasLikedRace ? 'text-primary fas' : 'far'} fa-thumbs-up`} /> {hasLikedRace ? <Text id='comments.has-liked'>Liked</Text> : <Text id='comments.like'>Lik</Text>}\n                                    </button>\n                                </div>\n                                <div class='col-6 text-center'>\n                                    <button type='button' class='btn btn-outline-secondary btn-lg btn-block'\n                                        data-id={race.id}\n                                        onClick={this.toggleAddComment}\n                                    >\n                                        <i class='fas fa-comment' /> <Text id='comments.comment-add'>Comment</Text>\n                                    </button>\n                                </div>\n                            </div>\n                        </div>\n                        <div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-2 mb-3'>\n                            {showAddComment && user.email && <RaceAddComment\n                                stores={this.props.stores}\n                                race={race}\n                                // callback={this.loadRaceDetail}\n                                inputRef={c => this.inputRef[race.id] = c}\n                                inputRefObject={this.inputRef}\n                            />}\n                        </div>\n                        <div class='col-12 mt-2'>\n                            <RaceComments\n                                stores={this.props.stores}\n                                race={race}\n                                cols='12'\n                                // callback={this.loadRaceDetail}\n                            />\n                        </div>\n                    </div>\n                </>}\n            </div>\n\t\t);\n\t}\n}\n\nexport default AppRaceDetailSignup;\n","import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport { Text, Localizer } from 'preact-i18n';\nimport { route } from 'preact-router';\nimport Markdown from 'preact-markdown';\nimport linkstate from 'linkstate';\n\nimport mu from '../../lib/musher-util';\n\n@observer\nclass AppRaceDetailClasses extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n        };\n\t\tthis.inputRef = {};\n        this.updateTimer = {};\n    }\n\n    render() {\n\t\tconst { userStore, raceStore, appState } = this.props.stores;\n\t\tconst { user = {}, teams = [], isAdmin } = userStore;\n        const { language = 'en' } = user;\n\n\t\tconst { race = {} } = this.props;\n\n        return (<>\n            <div class='row'>\n                <div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-0 mb-2'>\n                    <h2 class='mb-0'><Text id='race.classes'>Klasser</Text></h2>\n                </div>\n                <div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-3 mb-2'>\n                    <div class='row'>\n                        {race.classes && race.classes.sort((a, b) => a.distance - b.distance).map(currentClass => <>\n                            <div class='col-12 col-sm-6 col-lg-4 mb-4'>\n                                <div class='border rounded rounded-lg p-3'>\n                                    <h5>{currentClass.title}</h5>\n\n                                    {isAdmin && <>\n                                        <a href={`/tv/top10/${race.id}/${currentClass.id}`}>TV Top 10</a><br />\n                                        <a href={`/tv/team/${race.id}/1`}>TV One team</a><br />\n                                    </>}\n\n                                    <small>\n                                        {currentClass.startDate && <div>\n                                            <span class='font-weight-lighter'><Text id='race.startdate'>Start</Text>:</span> {util.formatDate(`${currentClass.startDate} ${currentClass.startTime || '00:00:00'}`, { locale: language, hour12: false, hour: '2-digit', minute: '2-digit' })}\n                                        </div>}\n                                        {currentClass.endDate && <div>\n                                            <span class='font-weight-lighter'><Text id='race.enddate'>End</Text>:</span> {util.formatDate(`${currentClass.endDate} ${currentClass.endTime || '00:00:00'}`, { locale: language, hour12: false, hour: '2-digit', minute: '2-digit' })}\n                                        </div>}\n                                    </small>\n\n                                    <div><span class='font-weight-lighter'><Text id='race.distance'>Distanse</Text>:</span> {currentClass.distance} km</div>\n                                    <div><span class='font-weight-lighter'><Text id='race.signup'>Påmelding</Text>:</span> {currentClass.signupfee || race.signupfee} NOK</div>\n                                    <p class='clearfix'>\n                                        <Markdown markdown={mu.replaceImages(currentClass.ingress, race.images, language)} markdownOpts={mu.getMarkdownOptions()} />\n                                    </p>\n                                    <small>\n                                        <Markdown markdown={mu.replaceImages(currentClass.body, race.images, language)} markdownOpts={mu.getMarkdownOptions()} />\n                                    </small>\n                                    {currentClass.rules && <>\n                                        <h5><Text id='race.rules'>Regler</Text></h5>\n                                        <Markdown markdown={mu.replaceImages(currentClass.rules, race.images, language)} markdownOpts={mu.getMarkdownOptions()} />\n                                    </>}\n                                </div>\n                            </div>\n                        </>)}\n                    </div>\n                </div>\n            </div>\n        </>);\n    }\n}\n\nexport default AppRaceDetailClasses;\n","import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport { Text, Localizer } from 'preact-i18n';\nimport { route } from 'preact-router';\nimport Markdown from 'preact-markdown';\nimport linkstate from 'linkstate';\n\nimport ScrollIntoView from '../../components/util/scrollIntoView';\n\nimport mu from '../../lib/musher-util';\n\nconst initialState = {\n\tisLoading: false,\n\tcontentIsNotLoaded: true,\n\n\treloadInSec: null,\n\treloadLastEpoch: null,\n\treloadIsActive: false,\n};\n\nconst RELOAD_INTERVAL_IN_SEC = 60;\n\nfunction raceStatus(musher) {\n\tswitch (musher.raceStatus) {\n\t\tcase 'OK':\n\t\t\treturn (<>\n\t\t\t\t<span class='position-absolute rounded-lg' style='top: 10px; left: 0px;'><i class='fas fa-check text-success' /></span>\n\t\t\t</>);\n\t\tcase 'DNS':\n\t\t\treturn (<>\n\t\t\t\t<span class='position-absolute bg-danger text-white text-center px-2 rounded-lg border' style='top: 5px; left: -100px; width: 80px'><i class='fas fa-info-circle' /> {musher.raceStatus}</span>\n\t\t\t</>);\n\t\tcase 'DNF':\n\t\t\treturn (<>\n\t\t\t\t<span class='position-absolute bg-danger text-white text-center px-2 rounded-lg border' style='top: 5px; left: -100px; width: 80px'><i class='fas fa-info-circle' /> {musher.raceStatus}</span>\n\t\t\t</>);\n\t\tcase 'DNQ':\n\t\t\treturn (<>\n\t\t\t\t<span class='position-absolute bg-danger text-white text-center px-2 rounded-lg border' style='top: 5px; left: -100px; width: 80px'><i class='fas fa-info-circle' /> {musher.raceStatus}</span>\n\t\t\t</>);\n\t\tcase 'DQ':\n\t\t\treturn (<>\n\t\t\t\t<span class='position-absolute bg-danger text-white text-center px-2 rounded-lg border' style='top: 5px; left: -100px; width: 80px'><i class='fas fa-info-circle' /> {musher.raceStatus}</span>\n\t\t\t</>);\n\t\tcase 'DC':\n\t\t\treturn (<>\n\t\t\t\t<span class='position-absolute bg-warning text-white text-center px-2 rounded-lg border' style='top: 5px; left: -150px; width: 80px'><i class='fas fa-info-circle' /> {musher.raceStatus}</span>\n\t\t\t</>);\n\t\tdefault:\n\t\t\treturn '';\n\t}\n}\n\n@observer\nclass ReloadTimer extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            ...initialState,\n        };\n\t\tthis.updateTimer = {};\n    }\n\n\tinitComponent = () => {\n\t\tconst reloadLastEpoch = Math.floor(new Date().getTime() / 1000);\n\t\tthis.setState({\n\t\t\treloadIsActive: true,\n\t\t\treloadLastEpoch,\n\t\t}, () => this.tickReloadTimeer());\n\t}\n\n\ttickReloadTimeer() {\n\t\tconst { reloadIsActive, reloadLastEpoch } = this.state;\n        if (reloadIsActive) {\n\t\t\tconst now = Math.floor(new Date().getTime() / 1000);\n\t\t\tconst reloadInSec = RELOAD_INTERVAL_IN_SEC - (now - reloadLastEpoch);\n\t\t\tthis.setState({ reloadInSec });\n\t\t\tclearTimeout(this.updateTimer.tick);\n\t\t\tthis.updateTimer.tick = setTimeout(() => this.tickReloadTimeer(), 1000);\n        }\n\t\treturn false;\n    }\n\n\tcomponentDidMount() {\n\t\tthis.initComponent();\n\t}\n\n\tcomponentWillUnmount() {\n\t\tclearTimeout(this.updateTimer.tick);\n\t}\n\n\trender() {\n\t\tconst { reloadInSec } = this.state;\n\t\tconst reloadPercent = Math.floor(util.normalizeBetween(reloadInSec, 0, RELOAD_INTERVAL_IN_SEC, 0, 100))\n\n\t\treturn (<>\n\t\t\t<div class='progress fixed-top' style='height: 2px; z-index: 999999;'>\n\t\t\t\t<div class='progress-bar' role='progressbar' style={`width: ${reloadPercent}%;`} aria-valuenow={reloadPercent} aria-valuemin='0' aria-valuemax='100' />\n\t\t\t</div>\n\t\t</>);\n\t}\n}\n\n@observer\nclass AppRaceDetailResults extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n        };\n\t\tthis.inputRef = {};\n        this.updateTimer = {};\n    }\n\n\tasync loadRace(props = this.props) {\n\t\tthis.setState({ isLoading: true });\n\t\tconst { raceStore } = props.stores;\n\t\tconst { raceid } = props;\n        await raceStore.load(raceid);\n        const { race } = raceStore;\n\n\t\tconst allTeamIds = race.classes.filter(currentClass => currentClass.contestants && currentClass.contestants.length > 0).map((currentClass) => {\n            return currentClass.contestants.filter(musher => musher.team > 0).map(musher => musher.team);\n\t\t}).flat();\n\t\t\n        if (allTeamIds.length > 0 && raceid) {\n\t\t\tawait raceStore.loadTeams(allTeamIds.join(','));\n\t\t\tawait raceStore.loadWorkoutSummary(allTeamIds.join(','), raceid);\n\t\t\traceStore.getWorkoutSummaryActiveTeams();\n\t\t}\n\t\traceStore.getAllClassesSortedBy();\n\n\t\t// Set reload timer\n\t\tclearTimeout(this.updateTimer.reload);\n\t\tthis.updateTimer.reload = setTimeout(async () => {\n\t\t\tconst reloadLastEpoch = Math.floor(new Date().getTime() / 1000);\n\t\t\tthis.setState({ reloadLastEpoch });\n\t\t\tthis.loadRace();\n\t\t}, RELOAD_INTERVAL_IN_SEC * 1000);\n\n\t\tthis.setState({\n\t\t\tisLoading: false,\n\t\t\tcontentIsNotLoaded: false,\n\t\t});\n\t}\n\n\ttoggleDisplayDetails = (e) => {\n\t\tconst email = e.target.closest('tr').dataset.email;\n\t\tconst { appState } = this.props.stores;\n\t\tappState.toggleDisplayDetails(email)\n\t}\n\n\tadminToggleEditUser = (e) => {\n\t\te.stopPropagation();\n\t\tconst email = e.target.closest('tr').dataset.email;\n\t\tconst { appState } = this.props.stores;\n\t\tappState.toggleEditUserDetails(email)\n\t}\n\n\tadminSignupEdit = (e) => {\n\t\tconst { raceid } = this.props;\n        const { raceStore } = this.props.stores;\n        const field = e.target.id;\n        const value = e.target.value;\n        const { classid, contestantid } = e.target.dataset;\n\n        // console.log({ raceid, field, value, classid });\n        // const { raceStore } = this.props.stores;\n        // raceStore.updateObjectKeyValue('signup', key, value);\n\n        const data = {\n\t\t\traceClassId: classid,\n            contestantId: contestantid,\n\t\t\t[`raceClassContestant${util.ucfirst(field)}`]: value,\n\t\t};\n\t\tclearTimeout(this.updateTimer[field]);\n\t\tthis.updateTimer[field] = setTimeout(async () => {\n\t\t\traceStore.editClass({\n\t\t\t\tid: raceid,\n\t\t\t\tdata,\n\t\t\t});\n\t\t}, 500);\n\t}\n\n\tlockAllWorkoutsInRace = async () => {\n\t\tconst { raceid } = this.props;\n        const { raceStore } = this.props.stores;\n\t\tconst lockMessage = await raceStore.lockAllWorkoutsInRace({ id: raceid });\n\t\tthis.setState({ lockMessage });\n\t}\n\n\tfilterByClass = (e) => {\n\t\tconst selectedClassId = e.target.closest('button').dataset.id;\n\t\tconst { appState } = this.props.stores;\n\t\tappState.toggleSelectedClassId(selectedClassId, true);\n\t}\n\n\tcomponentWillUnmount() {\n\t\tclearTimeout(this.updateTimer.reload);\n\t\tclearTimeout(this.updateTimer.tick);\n\t}\n\n\tcomponentDidMount() {\n\t\tthis.loadRace();\n\t}\n\n    render() {\n\t\tconst { contentIsNotLoaded, lockMessage } = this.state;\n\t\tconst { userStore, raceStore, appState } = this.props.stores;\n\t\tconst { user = {}, teams = [], isAdmin } = userStore;\n        const { language = 'en' } = user;\n\n        const { darkmode, displayDetails, editUserDetails, selectedClassIds = [] } = appState;\n\n\t\tconst { race = {}, teamList, classes = [] } = raceStore;\n\t\tconst { activeTeams, waypoints, zoomToMarkers } = raceStore;\n\n\t\tconst lastAllowedChangeDate = new Date(race.endDate);\n\t\tlastAllowedChangeDate.setHours(lastAllowedChangeDate.getHours() + 2);\n\n\t\tconst filterByClassId = (c) => {\n\t\t\tif (selectedClassIds.length > 0) {\n\t\t\t\treturn selectedClassIds.indexOf(c.id) > -1;\n\t\t\t}\n\t\t\treturn true;\n\t\t};\n\n        const isLiveRace = race.liveRace === 1;\n\n        return (<>\n            <div class='row'>\n                <div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-0 mb-2'>\n                    <h2 class='mb-0'><Text id='race.results'>Results</Text></h2>\n                </div>\n                <div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-3 mb-2'>\n                    <ReloadTimer stores={this.props.stores} />\n                    {isLiveRace ? <>\n                    \n                    </> : <>                    \n                        {user.email && <div class='alert alert-primary' role='alert'>\n                            {language === 'no' && <>\n                                Resultatene hentes direkte fra treningsøktene i QPaws appen.<br />\n                                <strong>For at treningsøktene skal bli registrert må øktene:</strong>\n                                <ul>\n                                    <li>Ha riktig dato som er innenfor løpsperioden.</li>\n                                    <li>Være markert som 'Konkurranse'.</li>\n                                    <li>Være registrert på teamet som er påmeldt.</li>\n                                </ul>\n                            </>}\n                            {language === 'en' && <>\n                                The results are imported directly from the workouts inside QPaws app.<br />\n                                <strong>To make sure your workouts are registered check the following:</strong>\n                                <ul>\n                                    <li>Use the correct date on your workout. Has to be inside the race period.</li>\n                                    <li>Mark the workout as 'Race'.</li>\n                                    <li>Workout has to be on the same team as you signed up with.</li>\n                                </ul>\n                            </>}\n                        </div>}\n                    </>}\n\n                    {race.resultsUrl ? <div class='p-3 my-4 bg-light'>\n                        <a href={race.resultsUrl} target='_blank' rel='noreferrer' native>\n                            {race.resultsText ? race.resultsText : <><Text id='races.results-here'>Se resultater her</Text> </>} <i class='fas fa-chevron-circle-right' />\n                        </a>\n                    </div> : <>\n\n                    </>}\n\n                    {(contentIsNotLoaded || !classes || classes.length === 0) && <div class='d-flex justify-content-center my-5 py-5'>\n                        <div class='spinner-border text-primary' role='status'>\n                            <span class='sr-only'>Loading...</span>\n                        </div>\n                    </div>}\n                </div>\n\n                <div class='col-12'>\n                    <div class='row'>\n                        <div class='w-100 overflow-hidden'>\n                            <div\n                                class='d-flex flex-row flex-nowrap pb-2 px-1'\n                                style='overflow: auto; scroll-snap-type: x mandatory;'\n                            >\n\n                                {race.classes && race.classes.sort((a, b) => a.distance - b.distance).map((currentClass, idx) => <>\n                                    <div class='col px-0 pt-2'>\n                                        <button\n                                            type='button'\n                                            class={`btn btn-block ${idx === 0 && 'rounded-pill-left'} ${idx === race.classes.length - 1 && 'rounded-pill-right'} rounded-none ${selectedClassIds.indexOf(currentClass.id) > -1 ? 'btn-primary' : 'btn-outline-primary'} text-nowrap`}\n                                            style='text-overflow: ellipsis; overflow: hidden;'\n                                            onClick={this.filterByClass}\n                                            data-id={currentClass.id}\n                                        >\n                                            {currentClass.title}\n                                        </button>\n                                    </div>\n                                </>)}\n\n                            </div>\n                        </div>\n                    </div>\n                </div>\n\n                <div class='col-12'>\n                    {race.classes && race.classes.filter(filterByClassId).sort((a, b) => a.distance - b.distance).map(currentClass => <div class='mt-5 mb-5'>\n                        {race.resultDanger && <div class='alert alert-danger' role='alert'>\n                            <div class='spinner-grow text-danger float-left' role='status'>\n                                <span class='sr-only'>Loading...</span>\n                            </div>\n                            <i class='fas fa-exclamation-triangle float-left mr-4' style='font-size: 2.0em;' />\n                            <Markdown markdown={mu.replaceImages(race.resultDanger, race.images, language)} markdownOpts={mu.getMarkdownOptions()} />\n                        </div>}\n                        {race.resultWarning && <div class='alert alert-warning' role='alert'>\n                            <i class='fas fa-exclamation float-left mr-4' style='font-size: 2.0em;' />\n                            <Markdown markdown={mu.replaceImages(race.resultWarning, race.images, language)} markdownOpts={mu.getMarkdownOptions()} />\n                        </div>}\n                        {race.resultSuccess && <div class='alert alert-success' role='alert'>\n                            <i class='fas fa-check float-left mr-4' style='font-size: 2.0em;' />\n                            <Markdown markdown={mu.replaceImages(race.resultSuccess, race.images, language)} markdownOpts={mu.getMarkdownOptions()} />\n                        </div>}\n\n                        <h3>{currentClass.title} {currentClass.startDate && <>\n                                : <span class='font-weight-lighter'>\n                                    {util.formatDate(`${currentClass.startDate} ${currentClass.startTime || '00:00:00'}`, { locale: language, hour12: false, hour: '2-digit', minute: '2-digit' })} - {util.formatDate(`${currentClass.endDate} ${currentClass.endTime || '00:00:00'}`, { locale: language, hour12: false, hour: '2-digit', minute: '2-digit' })}\n                                </span>\n                            </>}\n                        </h3>\n                        <span class='float-right'>\n                            <span class='text-muted'><Text id='races.mushers'>Mushers</Text>: {currentClass.totalMushers || 0}</span>\n                            <span class='text-muted ml-4'><Text id='races.finished-mushers'>Finished mushers</Text>: {currentClass.totalFinished || 0} </span>\n                        </span>\n\n                        <div class='table-responsive-md'>\n                            <table class='table table-sm table-striped'>\n                                <thead>\n                                    <tr>\n                                        <th scope='col'>#</th>\n                                        <th scope='col' style='min-width: 200px;'><Text id='races.name'>Navn</Text></th>\n                                        {isAdmin && <>\n                                            <th class='d-none d-lg-table-cell' scope='col'><i class='fas fa-user-shield' /> Cellphone</th>\n                                            <th class='d-none d-lg-table-cell' scope='col'><i class='fas fa-user-shield' /> Email</th>\n                                        </>}\n                                        {isAdmin && <th scope='col' class='d-none d-lg-table-cell' style='min-width: 400px;'><Text id='races.stages'>Etapper</Text></th>}\n                                        <th scope='col'><Text id='races.result'>Resultat</Text></th>\n                                    </tr>\n                                </thead>\n                                <tbody>\n                                    {classes[currentClass.id] && classes[currentClass.id].contestants && classes[currentClass.id].contestants.map((contestant, idx) => {\n                                        const { musher, currentTeam, currentStages, currentResults, completed, duration,\n                                            normalizedDuration, weightedNormalizedDuration, totalKcalRelated, weightedTotalKcal,\n                                            flatTotalKcal, percentHarder, loadIndex, raceDistance, isDone, normalizedKcal, normalizedFlatKcal,\n                                            finishedDate, totalWorkoutTimeUsedSec,\n                                        } = contestant;\n\n                                        const totals = raceStore.getTotalsByTeamId(currentTeam.id);\n\n                                        return (<>\n                                            <tr onClick={this.toggleDisplayDetails} data-email={musher.email}>\n                                                <th scope='row'>\n                                                    {idx + 1}\n                                                    {isAdmin && currentResults && <>\n                                                        <br />{currentResults.isLocked ? <i class='fas fa-lock text-danger mr-2' /> : <i class='fas fa-lock-open text-success mr-2' />}\n                                                    </>}\n                                                </th>\n                                                <td\n                                                    class={`${displayDetails[musher.email] ? 'font-weight-bold' : ''}`}\n                                                    style={`${displayDetails[musher.email] ? '' : 'line-height: 0.8em;'}`}\n                                                >\n                                                    {displayDetails[musher.email] ? <>\n                                                        {musher.firstname} {musher.lastname}<br />\n                                                        <span class='text-muted'>{currentTeam.name}</span><br />\n                                                        <small class='text-muted'>{musher.sportsClub}</small><br />\n                                                        {musher.facebook && <a class='mr-2' href={mu.asFacebookLink(musher.facebook)} native target='_blank' rel='noreferrer'><i class='fab fa-facebook' /></a>}\n                                                        {musher.instagram && <a class='mr-2' href={mu.asInstagramLink(musher.instagram)} native target='_blank' rel='noreferrer'><i class='fab fa-instagram' /></a>}\n                                                        {musher.price1 && <div class='font-weight-lighter'>\n                                                            <i class='fas fa-trophy text-warning' /> {musher.price1}\n                                                            {musher.priceSent && <>\n                                                                <i class='fas fa-check text-success' />\n                                                            </>}\n                                                        </div>}\n                                                        {musher.price2 && <div class='font-weight-lighter'><i class='fas fa-trophy text-warning' /> {musher.price2}</div>}\n                                                        {musher.price3 && <div class='font-weight-lighter'><i class='fas fa-trophy text-warning' /> {musher.price3}</div>}\n\n                                                    </> : <>\n                                                        {musher.price1 && <span class='float-right text-warning' style='font-size: 1.2em;'>\n                                                            <i class='fas fa-trophy' />\n                                                            {musher.priceSent && <>\n                                                                <i class='fas fa-check text-success' />\n                                                            </>}\n                                                        </span>}\n                                                        <nobr>\n                                                            {musher.firstname} {musher.lastname}<br />\n                                                            <small class='text-muted'>{musher.sportsClub}</small><br />\n                                                        </nobr>\n                                                    </>}\n\n                                                </td>\n\n                                                {isAdmin && <>\n                                                    <td class='d-none d-lg-table-cell'>{musher.cellphone}</td>\n                                                    <td class='d-none d-lg-table-cell'>{musher.email}</td>\n                                                </>}\n\n                                                {isAdmin && <td class='d-none d-lg-table-cell'>\n                                                    {isAdmin && <>\n                                                        <button class='btn btn-primary btn-sm float-right' onClick={this.adminToggleEditUser}><i class='fas fa-user-edit' /></button>\n                                                    </>}\n\n                                                    {(isAdmin && editUserDetails[musher.email]) && <>\n                                                        <h5>Admin edit:</h5>\n\n                                                        <div class='form-group row my-0'>\n                                                            <label class='col-sm-2 col-form-label text-right'>Email</label>\n                                                            <div class='col-sm-10'>\n                                                                {musher.email}\n                                                            </div>\n                                                        </div>\n                                                        <div class='form-group row my-0'>\n                                                            <label class='col-sm-2 col-form-label text-right'>Cellphone</label>\n                                                            <div class='col-sm-10'>\n                                                                {musher.cellphone}\n                                                            </div>\n                                                        </div>\n\n                                                        <div class='form-group row my-0'>\n                                                            <label for='team' class='col-sm-2 col-form-label text-right'>Race status</label>\n                                                            <div class='col-sm-10'>\n                                                                <select class='form-control-plaintext' id='raceStatus'\n                                                                    data-classid={musher.class}\n                                                                    data-contestantid={musher.id}\n                                                                    onInput={this.adminSignupEdit}\n                                                                    value={musher.raceStatus}\n                                                                >\n                                                                    <option value=''>-- Choose race status --</option>\n                                                                    <option value='OK'>OK - Everything ok</option>\n                                                                    <option value='DNS'>DNS - Did Not Start</option>\n                                                                    <option value='DNF'>DNF - Did Not Finish</option>\n                                                                    <option value='DNQ'>DNQ - Did not qualify</option>\n                                                                    <option value='DQ'>DQ - Disqualified</option>\n                                                                    <option value='DC'>DC - Data changed by user</option>\n                                                                </select>\n                                                            </div>\n                                                        </div>\n                                                        <div class='form-group row my-0'>\n                                                            <label for='raceComment' class='col-sm-2 col-form-label text-right'>Race comment</label>\n                                                            <div class='col-sm-10'>\n                                                                <input type='text' class='form-control-plaintext' id='raceComment'\n                                                                    data-classid={musher.class}\n                                                                    data-contestantid={musher.id}\n                                                                    onInput={this.adminSignupEdit}\n                                                                    value={musher.raceComment}\n                                                                />\n                                                            </div>\n                                                        </div>\n                                                        <div class='form-group row my-0'>\n                                                            <label for='gpxResultsApproved' class='col-sm-2 col-form-label text-right'>GPX Results approved (date)</label>\n                                                            <div class='col-sm-10'>\n                                                                <input type='date' class='form-control-plaintext' id='gpxResultsApproved'\n                                                                    data-classid={musher.class}\n                                                                    data-contestantid={musher.id}\n                                                                    onInput={this.adminSignupEdit}\n                                                                    value={musher.gpxResultsApproved ? util.isoDate(musher.gpxResultsApproved, false, false, true) : null}\n                                                                />\n                                                            </div>\n                                                        </div>\n\n                                                        <div class='form-group row my-0'>\n                                                            <label for='price1' class='col-sm-2 col-form-label text-right'>Price 1</label>\n                                                            <div class='col-sm-10'>\n                                                                <input type='text' class='form-control-plaintext' id='price1'\n                                                                    data-classid={musher.class}\n                                                                    data-contestantid={musher.id}\n                                                                    onInput={this.adminSignupEdit}\n                                                                    value={musher.price1}\n                                                                />\n                                                            </div>\n                                                        </div>\n                                                        <div class='form-group row my-0'>\n                                                            <label for='price2' class='col-sm-2 col-form-label text-right'>Price 2</label>\n                                                            <div class='col-sm-10'>\n                                                                <input type='text' class='form-control-plaintext' id='price2'\n                                                                    data-classid={musher.class}\n                                                                    data-contestantid={musher.id}\n                                                                    onInput={this.adminSignupEdit}\n                                                                    value={musher.price2}\n                                                                />\n                                                            </div>\n                                                        </div>\n                                                        <div class='form-group row my-0'>\n                                                            <label for='price3' class='col-sm-2 col-form-label text-right'>Price 3</label>\n                                                            <div class='col-sm-10'>\n                                                                <input type='text' class='form-control-plaintext' id='price3'\n                                                                    data-classid={musher.class}\n                                                                    data-contestantid={musher.id}\n                                                                    onInput={this.adminSignupEdit}\n                                                                    value={musher.price3}\n                                                                />\n                                                            </div>\n                                                        </div>\n                                                        <div class='form-group row my-0'>\n                                                            <label for='priceSent' class='col-sm-2 col-form-label text-right'>Price sent</label>\n                                                            <div class='col-sm-10'>\n                                                                <input type='date' class='form-control-plaintext' id='priceSent'\n                                                                    data-classid={musher.class}\n                                                                    data-contestantid={musher.id}\n                                                                    onInput={this.adminSignupEdit}\n                                                                    value={musher.priceSent ? util.isoDate(musher.priceSent, false, false, true) : null}\n                                                                />\n                                                            </div>\n                                                        </div>\n\n                                                    </>}\n\n                                                    {isAdmin && <div class='d-flex flex-wrap'>\n                                                        {currentStages && currentStages.map((stage, idx) => {\n                                                            const percent = stage.distanceKm / currentClass.distance * 100;\n                                                            const width = percent > 100 ? 100 : parseInt(percent, 10);\n                                                            const currentEpoch = Math.floor(new Date(stage.date).getTime() / 1000);\n                                                            const inDate = new Date(0); // The 0 there is the key, which sets the date to the epoch\n                                                            inDate.setUTCSeconds(currentEpoch + parseInt(stage.duration, 10));\n                                                            const images = stage.images.flat();\n                                                            if (displayDetails[musher.email]) {\n                                                                return (<>\n                                                                    <div class='bg-light border rounded-lg  text-right position-relative mr-1 mb-1' style={`width: 350px; min-width: 320px;`}>\n                                                                        <svg viewBox='0 0 300 100' class='position-absolute' style='width: 100%; height: 95%; bottom: 0px; left: 0px; z-index: 0;'>\n                                                                            <path d={`${stage.svgElevation}`} style='fill: #0063FF; stroke: #0063FF; stroke-width: 2; opacity: 0.2;' />\n                                                                        </svg>\n                                                                        <div class='position-relative px-3'>\n                                                                            <span class='position-absolute' style='top: 3px; left: 3px; font-size: 1.3em;'>\n                                                                                {idx + 1}\n                                                                            </span>\n                                                                            <small>\n                                                                                {isAdmin && <span class='position-absolute' style='top: 0px; right: -5px;'>\n                                                                                    {stage.isLocked ? <i class='fas fa-lock text-danger' /> : <i class='fas fa-lock-open text-success' />}\n                                                                                </span>}\n                                                                                <span class='float-left'>\n                                                                                    <nobr><i style='width: 20px;' class='fas fa-sign-out-alt text-muted' /> {util.formatDate(stage.date, { locale: language, hour12: false, hour: '2-digit', minute: '2-digit' })}</nobr>\n                                                                                    <nobr><i style='width: 20px;' class='fas fa-sign-in-alt text-muted' /> {util.formatDate(inDate, { locale: language, hour12: false, hour: '2-digit', minute: '2-digit' })}</nobr>\n                                                                                </span>\n                                                                                <span class='float-right'>\n                                                                                    {/* {restTimeText}\n                                                                                    {restTimeTrackText} */}\n                                                                                    <nobr><i style='width: 20px;' class='fas fa-road text-muted' /> {util.format(stage.distanceKm, 1) || 'n/a'} <span class='font-weight-lighter'>km</span></nobr>\n                                                                                    <nobr><i style='width: 20px;' class='fas fa-mountain text-muted' /> {util.format(stage.elevation, 0) || 'n/a'} <span class='font-weight-lighter'>m</span></nobr>\n                                                                                    <nobr><i style='width: 20px;' class='fas fa-tachometer-alt text-muted' /> {util.format(stage.speedAvg, 1) || 'n/a'} <span class='font-weight-lighter'>km/t</span></nobr><br />\n\n                                                                                    <nobr><i style='width: 20px;' class='fas fa-clock text-muted' /> {util.secToHms(stage.duration) || 'n/a'}</nobr>\n                                                                                    <nobr><i style='width: 20px;' class='fas fa-moon text-muted' /> {util.secToHms(stage.rest) || 'n/a'}</nobr>\n                                                                                    <nobr><i style='width: 20px;' class='fas fa-running text-muted' /> {util.secToHms(stage.duration - stage.rest) || 'n/a'}</nobr><br />\n\n                                                                                    <nobr><i style='width: 20px;' class='fas fa-dog text-muted' /> {util.format(stage.avgDogs, 0) || 'n/a'}</nobr>\n                                                                                </span>\n                                                                            </small>\n                                                                        </div>\n                                                                    </div>\n                                                                </>);\n                                                            }\n                                                            return (<>\n                                                                <div class='bg-light border rounded-lg text-right position-relative px-3 mr-1 mb-1' style={`width: 300px; min-width: 300px;`}>\n                                                                    <small>\n                                                                        {isAdmin && <span class='position-absolute' style='top: 2px; right: -5px;'>\n                                                                            {stage.isLocked ? <i class='fas fa-lock text-danger' /> : <i class='fas fa-lock-open text-sucess' />}\n                                                                        </span>}\n\n                                                                        <span class='float-left'>{idx + 1}</span>\n                                                                        <nobr><i style='width: 20px;' class='fas fa-road text-muted' /> {util.format(stage.distanceKm, 1) || 'n/a'} <span class='font-weight-lighter'>km</span></nobr>\n                                                                        <nobr><i style='width: 20px;' class='fas fa-tachometer-alt text-muted' /> {util.format(stage.speedAvg, 1) || 'n/a'} <span class='font-weight-lighter'>km/t</span></nobr>\n                                                                        <nobr><i style='width: 20px;' class='fas fa-clock text-muted' /> {util.secToHms(stage.duration) || 'n/a'}</nobr>\n                                                                    </small>\n                                                                </div>\n                                                            </>);\n                                                        })}\n                                                    </div>}\n\n                                                </td>}\n                                                <td class='text-right position-relative pl-4'>\n                                                    {raceStatus(musher)}\n                                                    {musher.raceComment && <>\n                                                        <div class='alert alert-warning text-left' role='alert'>\n                                                            <i class='fas fa-exclamation-triangle float-left mr-4' style='font-size: 2.0em;' />\n                                                            <Markdown markdown={mu.replaceImages(musher.raceComment, race.images, language)} markdownOpts={mu.getMarkdownOptions()} />\n                                                        </div>\n                                                    </>}\n                                                    {(isAdmin && currentResults.lastUpdated > lastAllowedChangeDate) && <>\n                                                        <div class='alert alert-danger text-left d-none d-md-block' role='alert'>\n                                                            <i class='fas fa-exclamation-triangle float-left mr-4' style='font-size: 2.0em;' />\n                                                            <i class='fas fa-user-shield' /> Last changed: {util.formatDate(currentResults.lastUpdated, { locale: language, hour12: false, hour: '2-digit', minute: '2-digit' })}\n                                                        </div>\n                                                    </>}\n                                                    {completed >= 99 ? <span class='position-absolute' style='top: 10px; left: 0px;'><i class='fas fa-flag-checkered text-success' /></span> : ''}\n                                                    <small>\n                                                        {displayDetails[musher.email] ? <>\n                                                            <nobr><i style='width: 20px;' class='fas fa-road text-muted' /> {util.format(currentResults.distanceKm, 1) || 'n/a'} <span class='font-weight-lighter'>km</span></nobr>\n                                                            {/* <nobr><i style='width: 20px;' class='fas fa-tachometer-alt text-muted' /> {util.format(currentResults.speedAvg, 1) || 'n/a'} <span class='font-weight-lighter'>km/t</span></nobr> */}\n                                                            <nobr><i style='width: 20px;' class='fas fa-mountain text-muted' /> {util.format(currentResults.elevation, 0) || 'n/a'} <span class='font-weight-lighter'>m</span></nobr>\n                                                            <div class='progress mb-1' style='height: 3px;'>\n                                                                <div class={`progress-bar ${completed >= 99 ? 'bg-success' : ''}`}\n                                                                    role='progressbar'\n                                                                    style={`width: ${completed}%`}\n                                                                    aria-valuenow={`${completed}`}\n                                                                    aria-valuemin='0'\n                                                                    aria-valuemax='100'\n                                                                />\n                                                            </div>\n\n                                                            {race.nonstop ? <>\n                                                                <nobr><i style='width: 20px;' class='fas fa-clock text-muted' /> {util.secToHms(totalWorkoutTimeUsedSec) || 'n/a'}</nobr>\n                                                                <nobr><i style='width: 20px;' class='fas fa-moon text-muted' /> {util.secToHms(totals.totalRest) || 'n/a'}</nobr>\n\n                                                                <br /><nobr><i style='width: 20px;' class='fas fa-calendar text-muted' /> {util.isoDate(totals.firstEpoch)} - <i style='width: 20px;' class='fas fa-calendar text-muted' /> {util.isoDate(finishedDate)}</nobr>\n                                                                {isAdmin && <>\n                                                                    <br />\n                                                                    <div class='text-danger'>\n                                                                        {totals.firstGpxStartEpoch && <>\n                                                                            <nobr>firstGpxStartEpoch: {util.isoDate(totals.firstGpxStartEpoch)}</nobr><br />\n                                                                        </>}\n                                                                        {totals.lastGpxStartEpoch && <>\n                                                                            <nobr>lastGpxStartEpoch: {util.isoDate(totals.lastGpxStartEpoch)}</nobr><br />\n                                                                        </>}\n                                                                    </div>\n                                                                </>}\n                                                            </> : <>\n                                                                <nobr><i style='width: 20px;' class='fas fa-clock text-muted' /> {util.secToHms(currentResults.duration) || 'n/a'}</nobr>\n                                                                <nobr><i style='width: 20px;' class='fas fa-moon text-muted' /> {util.secToHms(currentResults.rest) || 'n/a'}</nobr>\n                                                                <nobr><i style='width: 20px;' class='fas fa-running text-muted' /> {util.secToHms(currentResults.duration - currentResults.rest) || 'n/a'}</nobr><br />\n                                                                {isDone === 1 && <><nobr class='font-weight-bold'><span class='font-weight-lighter text-muted'>Normalized to race distance:</span> <i style='width: 20px;' class='fas fa-clock text-muted' /> {util.secToHms(normalizedDuration) || 'n/a'}</nobr><br /></>}\n                                                                {isDone === 1 && <><nobr class='font-weight-bold'><span class='font-weight-lighter text-muted'>Normalized:</span> <i style='width: 20px;' class='fas fa-clock text-muted' /> {util.secToHms(weightedNormalizedDuration) || 'n/a'}</nobr><br /></>}\n                                                            </>}\n\n                                                            {/* <nobr><i style='width: 20px;' class='fas fa-dog text-muted' /> {util.format(currentResults.avgDogs, 0) || 'n/a'}</nobr> */}\n                                                        </> : <>\n                                                            <nobr><i style='width: 20px;' class='fas fa-road text-muted' /> {util.format(currentResults.distanceKm, 1) || 'n/a'} <span class='font-weight-lighter'>km</span></nobr>\n                                                            {/* <nobr><i style='width: 20px;' class='fas fa-tachometer-alt text-muted' /> {util.format(currentResults.speedAvg, 1) || 'n/a'} <span class='font-weight-lighter'>km/t</span></nobr> */}\n                                                            <nobr><i style='width: 20px;' class='fas fa-mountain text-muted' /> {util.format(currentResults.elevation, 0) || 'n/a'} <span class='font-weight-lighter'>m</span></nobr>\n\n                                                            <div class='progress mb-1' style='height: 3px;'>\n                                                                <div class={`progress-bar ${completed >= 99 ? 'bg-success' : ''}`}\n                                                                    role='progressbar'\n                                                                    style={`width: ${completed}%`}\n                                                                    aria-valuenow={`${completed}`}\n                                                                    aria-valuemin='0'\n                                                                    aria-valuemax='100'\n                                                                />\n                                                            </div>\n\n                                                            {race.nonstop ? <>\n                                                                <nobr><i style='width: 20px;' class='fas fa-clock text-muted' /> {util.secToHms(totalWorkoutTimeUsedSec) || 'n/a'}</nobr>\n                                                                <nobr><i style='width: 20px;' class='fas fa-moon text-muted' /> {util.secToHms(totals.totalRest) || 'n/a'}</nobr>\n                                                            </> : <>\n                                                                {isDone === 1 ? <>\n                                                                    <nobr class='font-weight-bold'><i style='width: 20px;' class='fas fa-clock text-muted' /> {util.secToHms(weightedNormalizedDuration) || 'n/a'}</nobr><br />\n                                                                </> : <>\n                                                                    <nobr><i style='width: 20px;' class='fas fa-clock text-muted' /> {util.secToHms(currentResults.duration) || 'n/a'}</nobr><br />\n                                                                </>}\n                                                            </>}\n                                                        </>}\n\n                                                        {/* raceDistance: {raceDistance}<br /> */}\n\n                                                        {/* duration: {util.secToHms(duration)}<br />\n                                                        normalizedDuration: {util.secToHms(normalizedDuration)}<br />\n                                                        weightedNormalizedDuration: {util.secToHms(weightedNormalizedDuration)}<br /> */}\n\n                                                        {/* totalKcalRelated: {totalKcalRelated}<br />\n                                                        weightedTotalKcal: {weightedTotalKcal}<br />\n                                                        flatTotalKcal: {flatTotalKcal}<br />\n                                                        percentHarder: {percentHarder}<br /> */}\n\n                                                        {/* loadIndex: {loadIndex}<br /> */}\n                                                    </small>\n                                                </td>\n                                            </tr>\n                                        </>);\n                                    })}\n                                </tbody>\n                            </table>\n                        </div>\n\n                        <div class='text-center text-muted'>\n                            <small>\n                                {language === 'no' && <>\n                                    OBS! Ref reglene så er det ikke lov til å endre treningsøktene som er med i konkurransen etter at løpet er ferdig.<br />\n                                    Forsøk på dette vil resultere i automatisk deplassering på listene.\n                                </>}\n                                {language === 'en' && <>\n                                    IMPORTANT! According to the rules: It is NOT allowed to try alter the workouts related to the competition after the race has ended.<br />\n                                    Attempts will result in automatic deplacement on the resultlists.\n                                </>}\n                            </small>\n                        </div>\n\n                    </div>)}\n\n\n                </div>\n\n\t\t\t\t{isAdmin && <>\n\t\t\t\t\t<button\n\t\t\t\t\t\tclass='btn btn-danger btn-lg float-right m-4'\n\t\t\t\t\t\tonClick={this.lockAllWorkoutsInRace}\n\t\t\t\t\t>\n\t\t\t\t\t\tLock all workouts in this race\n\t\t\t\t\t</button>\n\t\t\t\t\t<xmp class='m-5'>{JSON.stringify(lockMessage, null, 4)}</xmp>\n\t\t\t\t</>}\n\n                <div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-3 mb-2'>\n                    <a class='btn btn-lg btn-block btn-primary' href={`https://homerunrace.no/index#/race/${race.id}/results`}>All results</a>\n                </div>\n            </div>\n        </>);\n    }\n}\n\nexport default AppRaceDetailResults;\n"],"sourceRoot":""}