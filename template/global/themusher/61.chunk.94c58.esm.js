(window.webpackJsonp=window.webpackJsonp||[]).push([[61,5],{"+JSK":function(e,t,s){"use strict";(function(e){function a(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,a)}return s}function i(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}var o,c=s("hosL"),n=s("Utv1"),l=s("/eY4"),r=s("OhSV"),d=s("ZOvn");const h={};let b=Object(l.a)(o=class extends c.Component{constructor(e){super(e),this.toggleLikes=()=>{const{showLikesList:e}=this.state;this.setState({showLikesList:!e})},this.state=function(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?a(Object(s),!0).forEach((function(t){i(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):a(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}({},h)}render(){const{showLikesList:t}=this.state,{storyStore:s,teamStore:a,workoutStore:i,raceStore:o}=this.props.stores,{likes:l,comments:h,type:b="story",onTeamClick:p=(()=>{}),onUserClick:m=(()=>{})}=this.props;return Object(c.h)(e,null,Object(c.h)("div",{class:"d-flex justify-content-between mb-2"},l&&l.length>0&&Object(c.h)(e,null,Object(c.h)("div",{class:"d-flex flex-row flex-nowrap position-relative mr-3",style:"overflow: auto;"},Object(c.h)("span",{class:"text-muted mr-2",onClick:this.toggleLikes},Object(c.h)("i",{class:"fas fa-thumbs-up text-primary"})," ",l.length),l.slice(0,1).map(t=>{let l,r,h;"story"===b?(l=s.findPublicUser(t.user),r=s.findPublicTeamByMembers(t.user)):"team"===b?(l=a.findPublicUser(t.user),r=a.findPublicTeamByMembers(t.user)):"workout"===b?(l=i.findPublicUser(t.user),r=i.findPublicTeamByMembers(t.user)):"race"===b&&(l=o.findPublicUser(t.user),r=o.findPublicTeamByMembers(t.user)),n.a.isArray(r)&&(h=r.find(e=>1===e.public));d.a.getImage({user:l,team:h,priority:"user"}),d.a.displayNameShort(l);const m=d.a.displayName(l);return Object(c.h)(e,null,Object(c.h)("span",{class:"font-weight-lighter"},h?Object(c.h)(e,null,Object(c.h)("a",{href:"/teams/public/"+h.uuidv4,title:h.name,onClick:e=>p(e,h.uuidv4)},m)):Object(c.h)(e,null,m)))}),l.length>1&&Object(c.h)(e,null,Object(c.h)("span",{class:"text-muted font-weight-lighter ml-2",onClick:this.toggleLikes},Object(c.h)(r.c,{id:"likes-comments.and",fields:{total:l.length-1}},"and ",l.length-1," others."))))),h&&h.length>0&&Object(c.h)("span",{class:"float-right text-muted"},Object(c.h)("i",{class:"fas fa-comment text-primary"})," ",h.length)),t&&Object(c.h)("div",{class:"mt-3 mb-3"},l&&l.map(t=>{let l,r,h;"story"===b?(l=s.findPublicUser(t.user),r=s.findPublicTeamByMembers(t.user)):"team"===b?(l=a.findPublicUser(t.user),r=a.findPublicTeamByMembers(t.user)):"workout"===b?(l=i.findPublicUser(t.user),r=i.findPublicTeamByMembers(t.user)):"race"===b&&(l=o.findPublicUser(t.user),r=o.findPublicTeamByMembers(t.user)),n.a.isArray(r)&&(h=r.find(e=>1===e.public));const m=d.a.getImage({user:l,team:h,priority:"user"}),u=d.a.displayNameShort(l),g=d.a.displayName(l,!0);return Object(c.h)("div",{class:"d-flex flex-row position-relative font-weight-light mb-1"},h?Object(c.h)(e,null,Object(c.h)("a",{href:"/teams/public/"+h.uuidv4,title:h.name,onClick:e=>p(e,h.uuidv4),class:"stretched-link"},Object(c.h)("div",{class:"text-center border rounded-circle imageRounded imageRoundedThumb",style:""+(m?`background-image: url("${m}"); background-size: cover;`:"")},!m&&Object(c.h)("div",{class:"",style:"font-size: 12px; padding-top: 3px;"},u))),Object(c.h)("div",{class:"ml-2 "},g," ",Object(c.h)("span",{class:"font-weight-lighter"},"- ",h.name))):Object(c.h)(e,null,Object(c.h)("div",{class:"text-center border rounded-circle imageRounded imageRoundedThumb",style:(m?`background-image: url("${m}"); background-size: cover;`:"")+" opacity: 0.5;"},!m&&Object(c.h)("div",{class:"text-muted",style:"font-size: 12px; padding-top: 3px;"},u)),Object(c.h)("div",{class:"ml-2"},g)))})))}})||o;t.a=b}).call(this,s("hosL").Fragment)},"/DnB":function(e,t,s){"use strict";function a(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,a)}return s}function i(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}var o,c=s("hosL"),n=(s("Utv1"),s("/eY4"));const l={};let r=Object(n.a)(o=class extends c.Component{constructor(e){super(e),this.state=function(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?a(Object(s),!0).forEach((function(t){i(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):a(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}({},l),this.container=null}componentDidMount(){const{horizontal:e,vertical:t=""}=this.props,s={behavior:"smooth"};e&&(s.inline=e),t&&(s.block=t),this.container.scrollIntoView(s)}render(){return Object(c.h)("div",{ref:e=>this.container=e}," ")}})||o;t.a=r},"1OK2":function(e,t,s){"use strict";var a,i=s("hosL"),o=(s("Utv1"),s("/eY4"));Object(o.a)(a=class extends i.Component{constructor(e){super(e),this.touchStart=e=>{e.stopPropagation(),this.setState({startX:e.touches[0].pageX})},this.touchEnd=e=>{e.stopPropagation(),this.setState({startX:void 0,sliding:!1})},this.touchMove=e=>{e.stopPropagation();const{totalImages:t}=this.state;if(t>1){const{startX:t,sliding:s}=this.state,a=50,i=e.touches[0].pageX;s||(i>t+a?(this.setState({sliding:!0}),this.prevImage()):i<t-a&&(this.setState({sliding:!0}),this.nextImage()))}};const{images:t=[]}=e;this.state={imageContainer:1,currentImage1:t[0]||{},currentImage2:{},currentIdx:0,totalImages:t.length||0,imageDots:[...Array(t.length||0).fill(1).map((e,t)=>e+t)]}}nextImage(){const{images:e}=this.props,{totalImages:t,currentIdx:s,imageContainer:a}=this.state,i=1===a?2:1;let o=s+1;o>t-1&&(o=0),this.setState({["currentImage"+i]:e[o],currentIdx:o,imageContainer:i})}prevImage(){const{images:e}=this.props,{totalImages:t,currentIdx:s,imageContainer:a}=this.state;let i=s-1;i<0&&(i=t-1),this.setState({["currentImage"+(1===a?2:1)]:e[i],currentIdx:i,imageContainer:1===a?2:1})}componentWillReceiveProps(e){if(e.images!==this.props.images){const{images:t=[]}=e;this.setState({imageContainer:1,currentImage1:t.length>0?t[0]:{},currentImage2:{},currentIdx:0,totalImages:t.length||0,imageDots:[...Array(t.length||0).fill(1).map((e,t)=>e+t)]})}}render(){const{currentImage1:e,currentImage2:t,imageContainer:s,totalImages:a,imageDots:o,currentIdx:c}=this.state,n=this["image"+s],l=1===s?e:t,r=n&&n.height?n.width/n.height:4/3;let d,h;if(l.dimensions){const{width:e,height:t,orientation:s}=l.dimensions;s>4&&s<9?(d=e,h=t):(d=t,h=e)}const b=l.dimensions?h/d:r;return a<=0?"":Object(i.h)("div",{class:"w-100"},Object(i.h)("div",{class:"border rounded position-relative w-100",style:`height: calc(85vw / ${b}); overflow: hidden; transition: all .3s ease-in-out;`,onTouchstart:this.touchStart,onTouchend:this.touchEnd,onTouchmove:this.touchMove},a>1&&Object(i.h)("span",{class:"position-absolute",style:"top:0px; right: 5px; z-index: 2000;"},Object(i.h)("small",null,c+1,"/",a)),e&&Object(i.h)("div",{class:"position-absolute",style:(1===s?"opacity: 1;":"opacity: 0;")+" transition: all .3s ease-in-out; top: 0; left: 0;"},Object(i.h)("img",{loading:"lazy",src:e.s3LargeLink,class:"img-fluid align-middle",ref:e=>this.image1=e})),t&&Object(i.h)("div",{class:"position-absolute",style:(2===s?"opacity: 1;":"opacity: 0;")+" transition: all .3s ease-in-out; top: 0; left: 0;"},Object(i.h)("img",{loading:"lazy",src:t.s3LargeLink,class:"img-fluid align-middle",ref:e=>this.image2=e}))),o.length>1&&Object(i.h)("div",{class:"w-100 text-center"},o.map(e=>Object(i.h)("span",{style:`color: ${e===c+1?"#ffffff":"#808080"};`},"•"))))}})},"4QWe":function(e,t,s){"use strict";(function(e){var a,i=s("hosL"),o=s("Utv1"),c=s("/eY4"),n=s("OhSV"),l=s("go65"),r=s("om2D"),d=s("ZOvn");let h=Object(c.a)(a=class extends i.Component{constructor(e){var t;super(e),t=this,this.beforeImagesUploaded=()=>{this.setState({sendButtonEnabled:!1})},this.afterImagesUploaded=()=>{this.setState({sendButtonEnabled:!0})},this.commentStory=async function(){const{sendButtonEnabled:e}=t.state;if(!e)return!1;const{callback:s=(()=>{}),inputRefObject:a={}}=t.props,{story:i}=t.props,{storyStore:o}=t.props.stores,{comment:c,showAddImage:n}=t.state;t.setState({sendButtonEnabled:!1});const l=await o.commentStory({id:i.id,comment:c});l&&200===l.status&&(t.setState({comment:{body:"",images:[]}},()=>{d.a.resizeTextarea(a[i.id]),n&&t.addImage()}),s({story:i,response:l})),t.setState({sendButtonEnabled:!0})},this.addImages=({value:e})=>{const{comment:t}=this.state;t.images.push(...e),this.setState({comment:t})},this.addImage=()=>{const{showAddImage:e=!1}=this.state;this.setState({showAddImage:!e})},this.handleImageErrored=e=>{const t=e.target;t.onerror=null,setTimeout(()=>{t.src+="?"+new Date},1e3)},this.state={comment:{body:"",images:[]},showAddImage:!1,sendButtonEnabled:!0},this.inputRef={}}render(){const{inputRef:t,story:s}=this.props,{comment:a,showAddImage:c,sendButtonEnabled:h}=this.state,{userStore:b}=this.props.stores,{user:p={}}=b,m=d.a.displayNameShort(p),u=(d.a.displayName(p),p.image||(p.images?p.images[0]:void 0));return Object(i.h)("div",null,Object(i.h)("div",{class:"d-flex mb-0 position-relative w-100"},Object(i.h)("div",{class:"text-center border rounded-circle imageRounded imageRoundedSmall",style:(u?`background-image: url('${u.s3SmallLink}'); background-size: cover;`:"")+" border-width: 3px !important;"},!p.image&&Object(i.h)("span",{class:"font-weight-lighter",style:"font-size: 15px;"},m)),Object(i.h)("div",{class:"col pl-3",style:"line-height: 1.2em;"},Object(i.h)("div",{class:"d-flex bd-highlight"},Object(i.h)("div",{class:"p-0 w-100 bd-highlight"},Object(i.h)("label",{class:"sr-only",for:"inlineFormInput"},Object(i.h)(n.c,{id:"comments.comment"},"Kommentar")),Object(i.h)("div",{class:"border rounded rounded-lg position-relative"},Object(i.h)(n.b,null,Object(i.h)("textarea",{class:"form-control-plaintext px-2",type:"text",placeholder:Object(i.h)(n.c,{id:"comments.write-comment"},"Skriv en kommentar..."),onInput:Object(l.a)(this,"comment.body"),onKeyUp:d.a.resizeTextarea,onFocus:d.a.resizeTextarea,style:"height: 2.3em;",value:a.body,ref:t})),Object(i.h)("div",{class:"position-absolute",style:"top: 8px; right: 10px; font-size: 1.2em;"},Object(i.h)("i",{class:"fas fa-image pointerCursor","data-id":s.id,onClick:this.addImage})))),Object(i.h)("div",{class:"p-0 pl-2 flex-shrink-1 bd-highlight"},Object(i.h)("button",{type:"button",class:`btn btn-${h?"primary":"secondary"} mb-2`,disabled:!h,onClick:this.commentStory},Object(i.h)("i",{class:"fas fa-paper-plane"})))))),c&&Object(i.h)(e,null,Object(i.h)("div",{class:"col-12 text-center"},Object(i.h)("div",{class:"container-fluid"},Object(i.h)("div",{class:"row"},o.a.isArray(a.images)&&a.images.map(e=>Object(i.h)("div",{class:"col-3 p-1"},Object(i.h)("img",{src:e.s3SmallLink,class:"img-fluid",onError:this.handleImageErrored}),Object(i.h)("button",{class:"btn btn-sm btn-link",onClick:this.removeImage,"data-name":e.name},Object(i.h)("i",{class:"fas fa-trash"})," ",Object(i.h)(n.c,{id:"comments.remove-image"},"Remove")))))),Object(i.h)(r.a,{object:a,updateField:this.addImages,before:this.beforeImagesUploaded,after:this.afterImagesUploaded,autoOpen:!0}))))}})||a;t.a=h}).call(this,s("hosL").Fragment)},"5uob":function(e,t,s){"use strict";var a,i=s("hosL"),o=(s("Utv1"),s("/eY4")),c=s("OhSV"),n=s("go65"),l=(s("ETxl"),s("ZOvn"));let r=Object(o.a)(a=class extends i.Component{constructor(e){var t;super(e),t=this,this.commentStory=async function(){const{sendButtonEnabled:e}=t.state;if(!e)return!1;const{callback:s=(()=>{}),commentId:a,inputRefObject:i={}}=t.props,{story:o}=t.props,{storyStore:c}=t.props.stores,{comment:n=""}=t.state;t.setState({sendButtonEnabled:!1});const r=await c.commentReplyStory({id:o.id,commentId:a,comment:n});r&&200===r.status&&(t.setState({comment:""},()=>{l.a.resizeTextarea(i[a])}),s({story:o,response:r,commentId:a})),t.setState({sendButtonEnabled:!0})},this.state={sendButtonEnabled:!0},this.inputRef={}}componentDidMount(){const{initCall:e=(()=>{})}=this.props;e()}render(){const{inputRef:e}=this.props,{comment:t,sendButtonEnabled:s}=this.state,{userStore:a}=this.props.stores,{user:o={}}=a,r=l.a.displayNameShort(o),d=(l.a.displayName(o),o.image||(o.images?o.images[0]:void 0));return Object(i.h)("div",{class:"w-100"},Object(i.h)("div",{class:"d-flex mb-0 position-relative w-100"},Object(i.h)("div",{class:"text-center border rounded-circle imageRounded imageRoundedThumb",style:(d?`background-image: url('${d.s3SmallLink}'); background-size: cover;`:"")+" border-width: 3px !important;"},!d&&Object(i.h)("span",{class:"font-weight-lighter",style:"font-size: 15px;"},r)),Object(i.h)("div",{class:"col pl-3",style:"line-height: 1.2em;"},Object(i.h)("div",{class:"d-flex bd-highlight"},Object(i.h)("div",{class:"p-0 w-100 bd-highlight"},Object(i.h)("label",{class:"sr-only",for:"inlineFormInput"},Object(i.h)(c.c,{id:"comments.comment"},"Kommentar")),Object(i.h)("div",{class:"border rounded rounded-lg position-relative"},Object(i.h)(c.b,null,Object(i.h)("textarea",{class:"form-control-plaintext px-2",type:"text",placeholder:Object(i.h)(c.c,{id:"comments.write-comment"},"Skriv en kommentar..."),onInput:Object(n.a)(this,"comment"),onKeyUp:l.a.resizeTextarea,style:"height: 2.3em;",value:t,ref:e})))),Object(i.h)("div",{class:"p-0 pl-2 flex-shrink-1 bd-highlight"},Object(i.h)("button",{type:"button",class:`btn btn-${s?"primary":"secondary"} mb-2`,disabled:!s,onClick:this.commentStory},Object(i.h)("i",{class:"fas fa-paper-plane"})))))))}})||a;t.a=r},"68RK":function(e,t,s){"use strict";var a=s("ivZ3"),i=s("Utv1"),o=s("ZOvn");const c={adit:new a.Icon({iconUrl:"./assets/svg/adit.svg",iconSize:[30,30],iconAnchor:[10,30]}),airport:new a.Icon({iconUrl:"./assets/svg/airport.svg",iconSize:[30,30],iconAnchor:[10,30]}),analyse:new a.Icon({iconUrl:"./assets/svg/analyse.svg",iconSize:[30,30],iconAnchor:[10,30]}),archaeological:new a.Icon({iconUrl:"./assets/svg/archaeological.svg",iconSize:[30,30],iconAnchor:[10,30]}),architecture:new a.Icon({iconUrl:"./assets/svg/architecture.svg",iconSize:[30,30],iconAnchor:[10,30]}),arrow_up:new a.Icon({iconUrl:"./assets/svg/arrow_up.svg",iconSize:[30,30],iconAnchor:[10,30]}),arrow_up_double:new a.Icon({iconUrl:"./assets/svg/arrow_up_double.svg",iconSize:[30,30],iconAnchor:[10,30]}),atm:new a.Icon({iconUrl:"./assets/svg/atm.svg",iconSize:[30,30],iconAnchor:[10,30]}),avatar:new a.Icon({iconUrl:"./assets/svg/avatar.svg",iconSize:[30,30],iconAnchor:[10,30]}),bag:new a.Icon({iconUrl:"./assets/svg/bag.svg",iconSize:[30,30],iconAnchor:[10,30]}),bar:new a.Icon({iconUrl:"./assets/svg/bar.svg",iconSize:[30,30],iconAnchor:[10,30]}),barracks:new a.Icon({iconUrl:"./assets/svg/barracks.svg",iconSize:[30,30],iconAnchor:[10,30]}),battlefield:new a.Icon({iconUrl:"./assets/svg/battlefield.svg",iconSize:[30,30],iconAnchor:[10,30]}),beach:new a.Icon({iconUrl:"./assets/svg/beach.svg",iconSize:[30,30],iconAnchor:[10,30]}),bicycle:new a.Icon({iconUrl:"./assets/svg/bicycle.svg",iconSize:[30,30],iconAnchor:[10,30]}),boundary_stone:new a.Icon({iconUrl:"./assets/svg/boundary_stone.svg",iconSize:[30,30],iconAnchor:[10,30]}),buddhism:new a.Icon({iconUrl:"./assets/svg/buddhism.svg",iconSize:[30,30],iconAnchor:[10,30]}),building:new a.Icon({iconUrl:"./assets/svg/building.svg",iconSize:[30,30],iconAnchor:[10,30]}),burger:new a.Icon({iconUrl:"./assets/svg/burger.svg",iconSize:[30,30],iconAnchor:[10,30]}),bus:new a.Icon({iconUrl:"./assets/svg/bus.svg",iconSize:[30,30],iconAnchor:[10,30]}),bus_stop:new a.Icon({iconUrl:"./assets/svg/bus_stop.svg",iconSize:[30,30],iconAnchor:[10,30]}),cable_car:new a.Icon({iconUrl:"./assets/svg/cable_car.svg",iconSize:[30,30],iconAnchor:[10,30]}),camera:new a.Icon({iconUrl:"./assets/svg/camera.svg",iconSize:[30,30],iconAnchor:[10,30]}),camp_site:new a.Icon({iconUrl:"./assets/svg/camp_site.svg",iconSize:[30,30],iconAnchor:[10,30]}),car:new a.Icon({iconUrl:"./assets/svg/car.svg",iconSize:[30,30],iconAnchor:[10,30]}),caravan_site:new a.Icon({iconUrl:"./assets/svg/caravan_site.svg",iconSize:[30,30],iconAnchor:[10,30]}),cartography:new a.Icon({iconUrl:"./assets/svg/cartography.svg",iconSize:[30,30],iconAnchor:[10,30]}),cash:new a.Icon({iconUrl:"./assets/svg/cash.svg",iconSize:[30,30],iconAnchor:[10,30]}),castle:new a.Icon({iconUrl:"./assets/svg/castle.svg",iconSize:[30,30],iconAnchor:[10,30]}),castle_defensive:new a.Icon({iconUrl:"./assets/svg/castle_defensive.svg",iconSize:[30,30],iconAnchor:[10,30]}),cave_entrance:new a.Icon({iconUrl:"./assets/svg/cave_entrance.svg",iconSize:[30,30],iconAnchor:[10,30]}),cemetery:new a.Icon({iconUrl:"./assets/svg/cemetery.svg",iconSize:[30,30],iconAnchor:[10,30]}),chapel:new a.Icon({iconUrl:"./assets/svg/chapel.svg",iconSize:[30,30],iconAnchor:[10,30]}),christianism:new a.Icon({iconUrl:"./assets/svg/christianism.svg",iconSize:[30,30],iconAnchor:[10,30]}),cinema:new a.Icon({iconUrl:"./assets/svg/cinema.svg",iconSize:[30,30],iconAnchor:[10,30]}),cinema_alt:new a.Icon({iconUrl:"./assets/svg/cinema_alt.svg",iconSize:[30,30],iconAnchor:[10,30]}),city:new a.Icon({iconUrl:"./assets/svg/city.svg",iconSize:[30,30],iconAnchor:[10,30]}),cityhall:new a.Icon({iconUrl:"./assets/svg/cityhall.svg",iconSize:[30,30],iconAnchor:[10,30]}),clean:new a.Icon({iconUrl:"./assets/svg/clean.svg",iconSize:[30,30],iconAnchor:[10,30]}),compass:new a.Icon({iconUrl:"./assets/svg/compass.svg",iconSize:[30,30],iconAnchor:[10,30]}),compass_alt:new a.Icon({iconUrl:"./assets/svg/compass_alt.svg",iconSize:[30,30],iconAnchor:[10,30]}),construction:new a.Icon({iconUrl:"./assets/svg/construction.svg",iconSize:[30,30],iconAnchor:[10,30]}),contour:new a.Icon({iconUrl:"./assets/svg/contour.svg",iconSize:[30,30],iconAnchor:[10,30]}),court_house:new a.Icon({iconUrl:"./assets/svg/court_house.svg",iconSize:[30,30],iconAnchor:[10,30]}),crown:new a.Icon({iconUrl:"./assets/svg/crown.svg",iconSize:[30,30],iconAnchor:[10,30]}),crucifix:new a.Icon({iconUrl:"./assets/svg/crucifix.svg",iconSize:[30,30],iconAnchor:[10,30]}),data:new a.Icon({iconUrl:"./assets/svg/data.svg",iconSize:[30,30],iconAnchor:[10,30]}),database:new a.Icon({iconUrl:"./assets/svg/database.svg",iconSize:[30,30],iconAnchor:[10,30]}),dentist:new a.Icon({iconUrl:"./assets/svg/dentist.svg",iconSize:[30,30],iconAnchor:[10,30]}),disabled:new a.Icon({iconUrl:"./assets/svg/disabled.svg",iconSize:[30,30],iconAnchor:[10,30]}),dislike:new a.Icon({iconUrl:"./assets/svg/dislike.svg",iconSize:[30,30],iconAnchor:[10,30]}),download:new a.Icon({iconUrl:"./assets/svg/download.svg",iconSize:[30,30],iconAnchor:[10,30]}),drag_lift:new a.Icon({iconUrl:"./assets/svg/drag_lift.svg",iconSize:[30,30],iconAnchor:[10,30]}),drop:new a.Icon({iconUrl:"./assets/svg/drop.svg",iconSize:[30,30],iconAnchor:[10,30]}),eye:new a.Icon({iconUrl:"./assets/svg/eye.svg",iconSize:[30,30],iconAnchor:[10,30]}),facebook:new a.Icon({iconUrl:"./assets/svg/facebook.svg",iconSize:[30,30],iconAnchor:[10,30]}),fire:new a.Icon({iconUrl:"./assets/svg/fire.svg",iconSize:[30,30],iconAnchor:[10,30]}),fishing:new a.Icon({iconUrl:"./assets/svg/fishing.svg",iconSize:[30,30],iconAnchor:[10,30]}),flag:new a.Icon({iconUrl:"./assets/svg/flag.svg",iconSize:[30,30],iconAnchor:[10,30]}),forbidden:new a.Icon({iconUrl:"./assets/svg/forbidden.svg",iconSize:[30,30],iconAnchor:[10,30]}),fort:new a.Icon({iconUrl:"./assets/svg/fort.svg",iconSize:[30,30],iconAnchor:[10,30]}),fountain:new a.Icon({iconUrl:"./assets/svg/fountain.svg",iconSize:[30,30],iconAnchor:[10,30]}),fuel:new a.Icon({iconUrl:"./assets/svg/fuel.svg",iconSize:[30,30],iconAnchor:[10,30]}),fuel_alt:new a.Icon({iconUrl:"./assets/svg/fuel_alt.svg",iconSize:[30,30],iconAnchor:[10,30]}),gallery:new a.Icon({iconUrl:"./assets/svg/gallery.svg",iconSize:[30,30],iconAnchor:[10,30]}),gear:new a.Icon({iconUrl:"./assets/svg/gear.svg",iconSize:[30,30],iconAnchor:[10,30]}),github:new a.Icon({iconUrl:"./assets/svg/github.svg",iconSize:[30,30],iconAnchor:[10,30]}),go:new a.Icon({iconUrl:"./assets/svg/go.svg",iconSize:[30,30],iconAnchor:[10,30]}),golf:new a.Icon({iconUrl:"./assets/svg/golf.svg",iconSize:[30,30],iconAnchor:[10,30]}),heart:new a.Icon({iconUrl:"./assets/svg/heart.svg",iconSize:[30,30],iconAnchor:[10,30]}),helicopter:new a.Icon({iconUrl:"./assets/svg/helicopter.svg",iconSize:[30,30],iconAnchor:[10,30]}),home:new a.Icon({iconUrl:"./assets/svg/home.svg",iconSize:[30,30],iconAnchor:[10,30]}),hospital:new a.Icon({iconUrl:"./assets/svg/hospital.svg",iconSize:[30,30],iconAnchor:[10,30]}),hostel:new a.Icon({iconUrl:"./assets/svg/hostel.svg",iconSize:[30,30],iconAnchor:[10,30]}),hotel:new a.Icon({iconUrl:"./assets/svg/hotel.svg",iconSize:[30,30],iconAnchor:[10,30]}),hotel_alt:new a.Icon({iconUrl:"./assets/svg/hotel_alt.svg",iconSize:[30,30],iconAnchor:[10,30]}),ice_ring:new a.Icon({iconUrl:"./assets/svg/ice_ring.svg",iconSize:[30,30],iconAnchor:[10,30]}),information:new a.Icon({iconUrl:"./assets/svg/information.svg",iconSize:[30,30],iconAnchor:[10,30]}),internet:new a.Icon({iconUrl:"./assets/svg/internet.svg",iconSize:[30,30],iconAnchor:[10,30]}),invisible:new a.Icon({iconUrl:"./assets/svg/invisible.svg",iconSize:[30,30],iconAnchor:[10,30]}),islamism:new a.Icon({iconUrl:"./assets/svg/islamism.svg",iconSize:[30,30],iconAnchor:[10,30]}),island:new a.Icon({iconUrl:"./assets/svg/island.svg",iconSize:[30,30],iconAnchor:[10,30]}),judaism:new a.Icon({iconUrl:"./assets/svg/judaism.svg",iconSize:[30,30],iconAnchor:[10,30]}),laptop:new a.Icon({iconUrl:"./assets/svg/laptop.svg",iconSize:[30,30],iconAnchor:[10,30]}),library:new a.Icon({iconUrl:"./assets/svg/library.svg",iconSize:[30,30],iconAnchor:[10,30]}),lighthouse:new a.Icon({iconUrl:"./assets/svg/lighthouse.svg",iconSize:[30,30],iconAnchor:[10,30]}),like:new a.Icon({iconUrl:"./assets/svg/like.svg",iconSize:[30,30],iconAnchor:[10,30]}),linkedin:new a.Icon({iconUrl:"./assets/svg/linkedin.svg",iconSize:[30,30],iconAnchor:[10,30]}),lion:new a.Icon({iconUrl:"./assets/svg/lion.svg",iconSize:[30,30],iconAnchor:[10,30]}),lock:new a.Icon({iconUrl:"./assets/svg/lock.svg",iconSize:[30,30],iconAnchor:[10,30]}),magnifier:new a.Icon({iconUrl:"./assets/svg/magnifier.svg",iconSize:[30,30],iconAnchor:[10,30]}),mall:new a.Icon({iconUrl:"./assets/svg/mall.svg",iconSize:[30,30],iconAnchor:[10,30]}),map:new a.Icon({iconUrl:"./assets/svg/map.svg",iconSize:[30,30],iconAnchor:[10,30]}),mapkey:new a.Icon({iconUrl:"./assets/svg/mapkey.svg",iconSize:[30,30],iconAnchor:[10,30]}),mapshakers:new a.Icon({iconUrl:"./assets/svg/mapshakers.svg",iconSize:[30,30],iconAnchor:[10,30]}),marina:new a.Icon({iconUrl:"./assets/svg/marina.svg",iconSize:[30,30],iconAnchor:[10,30]}),marker:new a.Icon({iconUrl:"./assets/svg/marker.svg",iconSize:[30,30],iconAnchor:[10,30]}),market_place:new a.Icon({iconUrl:"./assets/svg/market_place.svg",iconSize:[30,30],iconAnchor:[10,30]}),mine:new a.Icon({iconUrl:"./assets/svg/mine.svg",iconSize:[30,30],iconAnchor:[10,30]}),monument:new a.Icon({iconUrl:"./assets/svg/monument.svg",iconSize:[30,30],iconAnchor:[10,30]}),mountain:new a.Icon({iconUrl:"./assets/svg/mountain.svg",iconSize:[30,30],iconAnchor:[10,30]}),museum:new a.Icon({iconUrl:"./assets/svg/museum.svg",iconSize:[30,30],iconAnchor:[10,30]}),music:new a.Icon({iconUrl:"./assets/svg/music.svg",iconSize:[30,30],iconAnchor:[10,30]}),nature:new a.Icon({iconUrl:"./assets/svg/nature.svg",iconSize:[30,30],iconAnchor:[10,30]}),nocamera:new a.Icon({iconUrl:"./assets/svg/nocamera.svg",iconSize:[30,30],iconAnchor:[10,30]}),nonsmoking:new a.Icon({iconUrl:"./assets/svg/nonsmoking.svg",iconSize:[30,30],iconAnchor:[10,30]}),north:new a.Icon({iconUrl:"./assets/svg/north.svg",iconSize:[30,30],iconAnchor:[10,30]}),north_alt:new a.Icon({iconUrl:"./assets/svg/north_alt.svg",iconSize:[30,30],iconAnchor:[10,30]}),north_alt_II:new a.Icon({iconUrl:"./assets/svg/north_alt_II.svg",iconSize:[30,30],iconAnchor:[10,30]}),north_alt_III:new a.Icon({iconUrl:"./assets/svg/north_alt_III.svg",iconSize:[30,30],iconAnchor:[10,30]}),oppositeway:new a.Icon({iconUrl:"./assets/svg/oppositeway.svg",iconSize:[30,30],iconAnchor:[10,30]}),parking:new a.Icon({iconUrl:"./assets/svg/parking.svg",iconSize:[30,30],iconAnchor:[10,30]}),pharmacy:new a.Icon({iconUrl:"./assets/svg/pharmacy.svg",iconSize:[30,30],iconAnchor:[10,30]}),picnic_site:new a.Icon({iconUrl:"./assets/svg/picnic_site.svg",iconSize:[30,30],iconAnchor:[10,30]}),pitch:new a.Icon({iconUrl:"./assets/svg/pitch.svg",iconSize:[30,30],iconAnchor:[10,30]}),playground:new a.Icon({iconUrl:"./assets/svg/playground.svg",iconSize:[30,30],iconAnchor:[10,30]}),playground_alt:new a.Icon({iconUrl:"./assets/svg/playground_alt.svg",iconSize:[30,30],iconAnchor:[10,30]}),police:new a.Icon({iconUrl:"./assets/svg/police.svg",iconSize:[30,30],iconAnchor:[10,30]}),post_office:new a.Icon({iconUrl:"./assets/svg/post_office.svg",iconSize:[30,30],iconAnchor:[10,30]}),pub:new a.Icon({iconUrl:"./assets/svg/pub.svg",iconSize:[30,30],iconAnchor:[10,30]}),restaurant:new a.Icon({iconUrl:"./assets/svg/restaurant.svg",iconSize:[30,30],iconAnchor:[10,30]}),rocks:new a.Icon({iconUrl:"./assets/svg/rocks.svg",iconSize:[30,30],iconAnchor:[10,30]}),ruins:new a.Icon({iconUrl:"./assets/svg/ruins.svg",iconSize:[30,30],iconAnchor:[10,30]}),saddle:new a.Icon({iconUrl:"./assets/svg/saddle.svg",iconSize:[30,30],iconAnchor:[10,30]}),sailboat:new a.Icon({iconUrl:"./assets/svg/sailboat.svg",iconSize:[30,30],iconAnchor:[10,30]}),school:new a.Icon({iconUrl:"./assets/svg/school.svg",iconSize:[30,30],iconAnchor:[10,30]}),seal:new a.Icon({iconUrl:"./assets/svg/seal.svg",iconSize:[30,30],iconAnchor:[10,30]}),shelter:new a.Icon({iconUrl:"./assets/svg/shelter.svg",iconSize:[30,30],iconAnchor:[10,30]}),sinkhole:new a.Icon({iconUrl:"./assets/svg/sinkhole.svg",iconSize:[30,30],iconAnchor:[10,30]}),skype:new a.Icon({iconUrl:"./assets/svg/skype.svg",iconSize:[30,30],iconAnchor:[10,30]}),smartphone:new a.Icon({iconUrl:"./assets/svg/smartphone.svg",iconSize:[30,30],iconAnchor:[10,30]}),smoking:new a.Icon({iconUrl:"./assets/svg/smoking.svg",iconSize:[30,30],iconAnchor:[10,30]}),sport_centre:new a.Icon({iconUrl:"./assets/svg/sport_centre.svg",iconSize:[30,30],iconAnchor:[10,30]}),spring:new a.Icon({iconUrl:"./assets/svg/spring.svg",iconSize:[30,30],iconAnchor:[10,30]}),square:new a.Icon({iconUrl:"./assets/svg/square.svg",iconSize:[30,30],iconAnchor:[10,30]}),stadium:new a.Icon({iconUrl:"./assets/svg/stadium.svg",iconSize:[30,30],iconAnchor:[10,30]}),star:new a.Icon({iconUrl:"./assets/svg/star.svg",iconSize:[30,30],iconAnchor:[10,30]}),stop:new a.Icon({iconUrl:"./assets/svg/stop.svg",iconSize:[30,30],iconAnchor:[10,30]}),stupa:new a.Icon({iconUrl:"./assets/svg/stupa.svg",iconSize:[30,30],iconAnchor:[10,30]}),supermarket:new a.Icon({iconUrl:"./assets/svg/supermarket.svg",iconSize:[30,30],iconAnchor:[10,30]}),swimming_pool:new a.Icon({iconUrl:"./assets/svg/swimming_pool.svg",iconSize:[30,30],iconAnchor:[10,30]}),telephone:new a.Icon({iconUrl:"./assets/svg/telephone.svg",iconSize:[30,30],iconAnchor:[10,30]}),theatre:new a.Icon({iconUrl:"./assets/svg/theatre.svg",iconSize:[30,30],iconAnchor:[10,30]}),ticket:new a.Icon({iconUrl:"./assets/svg/ticket.svg",iconSize:[30,30],iconAnchor:[10,30]}),toilet:new a.Icon({iconUrl:"./assets/svg/toilet.svg",iconSize:[30,30],iconAnchor:[10,30]}),tower:new a.Icon({iconUrl:"./assets/svg/tower.svg",iconSize:[30,30],iconAnchor:[10,30]}),town:new a.Icon({iconUrl:"./assets/svg/town.svg",iconSize:[30,30],iconAnchor:[10,30]}),traffic_signal:new a.Icon({iconUrl:"./assets/svg/traffic_signal.svg",iconSize:[30,30],iconAnchor:[10,30]}),train:new a.Icon({iconUrl:"./assets/svg/train.svg",iconSize:[30,30],iconAnchor:[10,30]}),tram:new a.Icon({iconUrl:"./assets/svg/tram.svg",iconSize:[30,30],iconAnchor:[10,30]}),tram_stop:new a.Icon({iconUrl:"./assets/svg/tram_stop.svg",iconSize:[30,30],iconAnchor:[10,30]}),tree_cinofer:new a.Icon({iconUrl:"./assets/svg/tree_cinofer.svg",iconSize:[30,30],iconAnchor:[10,30]}),tree_leaf:new a.Icon({iconUrl:"./assets/svg/tree_leaf.svg",iconSize:[30,30],iconAnchor:[10,30]}),triangle:new a.Icon({iconUrl:"./assets/svg/triangle.svg",iconSize:[30,30],iconAnchor:[10,30]}),underground:new a.Icon({iconUrl:"./assets/svg/underground.svg",iconSize:[30,30],iconAnchor:[10,30]}),unesco:new a.Icon({iconUrl:"./assets/svg/unesco.svg",iconSize:[30,30],iconAnchor:[10,30]}),university:new a.Icon({iconUrl:"./assets/svg/university.svg",iconSize:[30,30],iconAnchor:[10,30]}),upload:new a.Icon({iconUrl:"./assets/svg/upload.svg",iconSize:[30,30],iconAnchor:[10,30]}),viewpoint:new a.Icon({iconUrl:"./assets/svg/viewpoint.svg",iconSize:[30,30],iconAnchor:[10,30]}),viewtower:new a.Icon({iconUrl:"./assets/svg/viewtower.svg",iconSize:[30,30],iconAnchor:[10,30]}),village:new a.Icon({iconUrl:"./assets/svg/village.svg",iconSize:[30,30],iconAnchor:[10,30]}),vineyard:new a.Icon({iconUrl:"./assets/svg/vineyard.svg",iconSize:[30,30],iconAnchor:[10,30]}),volcano:new a.Icon({iconUrl:"./assets/svg/volcano.svg",iconSize:[30,30],iconAnchor:[10,30]}),water_tower:new a.Icon({iconUrl:"./assets/svg/water_tower.svg",iconSize:[30,30],iconAnchor:[10,30]}),water_well:new a.Icon({iconUrl:"./assets/svg/water_well.svg",iconSize:[30,30],iconAnchor:[10,30]}),watermill:new a.Icon({iconUrl:"./assets/svg/watermill.svg",iconSize:[30,30],iconAnchor:[10,30]}),waterpark:new a.Icon({iconUrl:"./assets/svg/waterpark.svg",iconSize:[30,30],iconAnchor:[10,30]}),waterwork:new a.Icon({iconUrl:"./assets/svg/waterwork.svg",iconSize:[30,30],iconAnchor:[10,30]}),wayside_cross:new a.Icon({iconUrl:"./assets/svg/wayside_cross.svg",iconSize:[30,30],iconAnchor:[10,30]}),wind_generator:new a.Icon({iconUrl:"./assets/svg/wind_generator.svg",iconSize:[30,30],iconAnchor:[10,30]}),windmill:new a.Icon({iconUrl:"./assets/svg/windmill.svg",iconSize:[30,30],iconAnchor:[10,30]}),zoo:new a.Icon({iconUrl:"./assets/svg/zoo.svg",iconSize:[30,30],iconAnchor:[10,30]})};t.a=class{static get(e){return c[e]}static list(){return Object.keys(c)}static getDiv({title:e,body:t,color:s,textColor:o="#333333",borderColor:c=0,iconWidth:n=150,iconHeight:l=70}){const r="img-"+i.a.randomPassword();i.a.hsl2Rgb(s,100,60),i.a.hsl2Rgb(100-c,100,50);return new a.DivIcon({iconSize:[n,l+30],iconAnchor:[15,l+30],className:"my-div-icon",html:`<div id='${r}' style='width: ${n}px; height: ${l+30}px; line-height: 1.1em;'>\n\t\t\t\t<style>\n\t\t\t\t\t#${r} .map-marker:after {\n\t\t\t\t\t\tborder-top-color: ${s};\n\t\t\t\t\t}\n\t\t\t\t</style>\n\t\t\t\t<div class='map-marker text-white p-1' style='color: ${o}; background-color: ${s}; height: ${l}px;'>\n\t\t\t\t\t<nobr><strong>${e}</strong></nobr><br />\n\t\t\t\t\t<span class='font-weight-light'><nobr>${t}</nobr></span>\n\t\t\t\t</div>\n\t\t\t</div>`})}static getRaceMarker({bib:e,speed:t="",bearing:s="",rank:c,flag:n="",image:l,title:r,color:d,textColor:h="#333333",borderColor:b=0,iconWidth:p=180,iconHeight:m=20,iconAnchorX:u=7,iconAnchorY:g=7,mapChecked:O}){const j="img-"+i.a.randomPassword(),f=(i.a.hsl2Rgb(d,100,60),i.a.hsl2Rgb(100-b,100,50),o.a.getRankingColor(e||c)),v=/dark/i.test(O);let y=l?`\n\t\t\t<div\n\t\t\t\tclass='rounded-circle imageRounded imageRoundedSmallIcon'\n\t\t\t\tstyle='background-image: url("${l}"); background-size: cover; border: 1px ${f} solid;'\n\t\t\t>\n\t\t\t\t&nbsp;\n\t\t\t</div>\n\t\t`:"";return y=e||c?`\n\t\t\t<div\n\t\t\t\tclass='px-0 text-center' style='background-color: ${f||""}'\n\t\t\t>\n\t\t\t\t${e||c}\n\t\t\t</div>\n\t\t`:y,new a.DivIcon({iconSize:[p,m],iconAnchor:[u,g],className:"my-div-icon",html:u>100?`\n\t\t\t\t<div class='d-flex flex-nowrap overflow-hidden justify-content-end' id='${j}' style='width: ${p}px; height: ${m}px; line-height: 1.1em;'>\n\t\t\t\t\t<div\n\t\t\t\t\t\tclass='${v?"text-white":"text-dark"} p-1 pl-3 rounded-pill-left rounded-none ${v?"bg-dark":"bg-white"} overflow-hidden'\n\t\t\t\t\t>\n\t\t\t\t\t\t<nobr>\n\t\t\t\t\t\t\t<strong>${r}</strong> ${n}\n\t\t\t\t\t\t</nobr>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div\n\t\t\t\t\t\tclass='text-white font-weight-bolder pr-2 pl-1 py-1 rounded-pill-right rounded-none'\n\t\t\t\t\t\tstyle='background-color: ${d||""}'\n\t\t\t\t\t>\n\t\t\t\t\t\t${y}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class='rounded rounded-circle ml-2 mt-1' style='width: 14px; height: 14px; background-color: ${d};'>\n\t\t\t\t\t\t&nbsp;\n\t\t\t\t\t</div>\n\t\t\t\t</div>\t\t\t\n\t\t\t`:`\n\t\t\t\t<div class='d-flex flex-nowrap overflow-hidden' id='${j}' style='width: ${p}px; height: ${m}px; line-height: 1.1em;'>\n\t\t\t\t\t<div class='rounded rounded-circle mr-2 mt-1' style='width: 14px; height: 14px; background-color: ${d};'>\n\t\t\t\t\t\t&nbsp;\n\t\t\t\t\t</div>\n\t\t\t\t\t<div\n\t\t\t\t\t\tclass='text-white font-weight-bolder pl-2 pr-1 py-1 rounded-pill-left rounded-none'\n\t\t\t\t\t\tstyle='background-color: ${d||""}'\n\t\t\t\t\t>\n\t\t\t\t\t\t${y}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div\n\t\t\t\t\t\tclass='${v?"text-white":"text-dark"} p-1 pr-3 rounded-pill-right rounded-none ${v?"bg-dark":"bg-white"} overflow-hidden'\n\t\t\t\t\t>\n\t\t\t\t\t\t<nobr>\n\t\t\t\t\t\t\t${n} <strong>${r}</strong>\n\t\t\t\t\t\t</nobr>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t`})}static getDistanceMarker({title:e="",body:t="",textColor:s="#888",borderColor:o=0}){const c="img-"+i.a.randomPassword();return new a.DivIcon({iconSize:[20,20],iconAnchor:[10,10],className:"my-div-icon",html:`<div id='${c}' class='rounded-circle bg-primary text-white text-center' style='width: 20px; height: 20px;'>\n\t\t\t\t<strong>${e}</strong><br />\n\t\t\t\t<span class='font-weight-light'>${t}</span>\n\t\t\t</div>`})}static getMarker({bib:e,rank:t,flag:s="",image:c,title:n,color:l="#a0a0a0",textColor:r="#333333",borderColor:d=0,iconWidth:h=250,iconHeight:b=20,iconAnchorX:p=7,iconAnchorY:m=7,dotWidth:u=14,dotHeight:g=14,mapChecked:O}){const j="img-"+i.a.randomPassword(),f=(i.a.hsl2Rgb(l,100,60),i.a.hsl2Rgb(100-d,100,50),o.a.getRankingColor(e||t));/dark/i.test(O);let v=c?`\n\t\t\t<div\n\t\t\t\tclass='rounded-circle imageRounded imageRoundedSmallIcon'\n\t\t\t\tstyle='background-image: url("${c}"); background-size: cover; border: 1px ${f} solid;'\n\t\t\t>\n\t\t\t\t&nbsp;\n\t\t\t</div>\n\t\t`:"";return v=e||t?`\n\t\t\t<div\n\t\t\t\tclass='rounded-pill-both px-1 text-center ${f?"":"bg-primary"}' style='background-color: ${f||""}'\n\t\t\t>\n\t\t\t\t${e||t}\n\t\t\t</div>\n\t\t`:v,new a.DivIcon({iconSize:[h,b],iconAnchor:[p,m],className:"my-div-icon",html:`\n\t\t\t\t<div class='d-flex flex-nowrap' id='${j}' style='width: ${h}px; height: ${b}px; line-height: 1.1em;'>\n\t\t\t\t\t<div class='rounded rounded-circle mr-2 mt-1' style='width: ${u}px; height: ${g}px; background-color: ${l};'>\n\t\t\t\t\t\t&nbsp;\n\t\t\t\t\t</div>\n\t\t\t\t\t<div\n\t\t\t\t\t\tclass='text-dark font-weight-bolder pl-2 pr-1 py-1 rounded-pill-left rounded-none bg-info'\n\t\t\t\t\t>\n\t\t\t\t\t\t${v}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div\n\t\t\t\t\t\tclass='text-dark p-1 pr-3 rounded-pill-right rounded-none bg-info overflow-hidden'\n\t\t\t\t\t>\n\t\t\t\t\t\t<nobr>${s} <strong>${n}</strong></nobr>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t`})}static getSmallMarker({title:e="",body:t="",textColor:s="#888",borderColor:o=0}){const c="img-"+i.a.randomPassword();return new a.DivIcon({iconSize:[6,6],iconAnchor:[3,3],className:"my-div-icon",html:`<div id='${c}' class='rounded-circle bg-success text-white text-center' style='width: 5px; height: 5px;'>\n\t\t\t\t<strong>${e}</strong><br />\n\t\t\t\t<span class='font-weight-light'>${t}</span>\n\t\t\t</div>`})}}},"6GRK":function(e,t,s){"use strict";(function(e){function a(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,a)}return s}function i(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?a(Object(s),!0).forEach((function(t){o(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):a(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function o(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}var c,n=s("hosL"),l=s("/eY4"),r=(s("cneo"),s("Utv1")),d=s("OhSV"),h=s("go65");let b=Object(l.a)(c=class extends n.Component{constructor(e){var t;super(e),t=this,this.handleAdd=()=>{const{data:e}=this.state,{updateField:t,object:s,field:a}=this.props;t({id:s.id,field:a,value:i({},e)}),this.setState({data:{name:"",url:""}})},this.removeLink=async function(e){const{dogStore:s}=t.props.stores,{object:a}=t.props,{name:i,id:o}=e.target.closest("button").dataset;s.removeLink({id:a.id,name:i,linkId:o})},this.state={data:{}}}render(){const{showFiles:t=!0,object:s={}}=this.props;return Object(n.h)("div",{class:"row"},Object(n.h)("div",{class:"col-12 mt-3"},t&&Object(n.h)(e,null,Object(n.h)("div",{class:"container-fluid"},Object(n.h)("div",{class:"row"},(!s.links||0===s.links.length)&&Object(n.h)(e,null,Object(n.h)("div",{class:"text-center text-muted"},Object(n.h)("div",{class:"display-1"},Object(n.h)("i",{class:"fas fa-link"})),Object(n.h)("h3",null,Object(n.h)(d.c,{id:"dogs.no-links-title"},"No links for this dog!")),Object(n.h)(d.c,{id:"dogs.no-links-text"},"You can add links to this dog. Ie. Links to Facebook page, Instagram page, blogg, etc."))),s.links&&s.links.map(e=>Object(n.h)("div",{class:"col-12 p-1"},Object(n.h)("span",{class:"font-weight-lighter mr-2"},r.a.isoDate(e.createdDate,!1,!1,!0)),Object(n.h)("span",{class:"mr-2"},e.name),Object(n.h)("span",{class:"mr-2"},e.url),Object(n.h)("button",{class:"btn btn-sm btn-link float-right p-0",onClick:this.removeLink,"data-name":e.name,"data-id":e.id},Object(n.h)("i",{class:"fas fa-trash-alt"})," Del"))))))),Object(n.h)("div",{class:"col-12 mt-3"},Object(n.h)("details",null,Object(n.h)("summary",null,Object(n.h)(d.c,{id:"dogs.link-add"},"Add new link")),Object(n.h)("div",{class:"form-group"},Object(n.h)("label",{for:"name"},Object(n.h)(d.c,{id:"dogs.link-name"},"Name")),Object(n.h)("input",{type:"text",class:"form-control",id:"name","aria-describedby":"nameHelp",onInput:Object(h.a)(this,"data.name")}),Object(n.h)("small",{id:"nameHelp",class:"form-text text-muted"},Object(n.h)(d.c,{id:"dogs.link-name-help"},"Name of link"))),Object(n.h)("div",{class:"form-group"},Object(n.h)("label",{for:"url"},Object(n.h)(d.c,{id:"dogs.link-url"},"Url")),Object(n.h)("input",{type:"text",class:"form-control",id:"url","aria-describedby":"urlHelp",onInput:Object(h.a)(this,"data.url")}),Object(n.h)("small",{id:"urlHelp",class:"form-text text-muted"},Object(n.h)(d.c,{id:"dogs.link-url-help"},"URL of link"))),Object(n.h)("button",{class:"btn btn-success",onClick:this.handleAdd},Object(n.h)(d.c,{id:"dogs.link-add"},"Add link")))))}})||c;t.a=b}).call(this,s("hosL").Fragment)},"8n2v":function(e,t,s){"use strict";(function(e){function a(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,a)}return s}function i(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}var o,c=s("hosL"),n=(s("Utv1"),s("/eY4")),l=s("OhSV"),r=s("ZOvn");r.a.marginTop(!1),r.a.marginBottom();const d={};let h=Object(n.a)(o=class extends c.Component{constructor(e){super(e),this.state=function(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?a(Object(s),!0).forEach((function(t){i(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):a(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}({},d)}render(){const{goto:t,gotoTitle:s,routerName:a}=this.props;return Object(c.h)("div",{class:"row h-100"},Object(c.h)("div",{class:"col-12 text-center my-auto"},Object(c.h)("div",{class:"spinner-border text-primary",style:"width: 8rem; height: 8rem;",role:"status"},Object(c.h)("span",{class:"sr-only"},Object(c.h)(l.c,{id:"home.loading"},"Loading..."))),Object(c.h)("h3",{class:"mt-4"},Object(c.h)(l.c,{id:"home.loading"},"Loading...")),t&&Object(c.h)(e,null,Object(c.h)("a",{class:"my-4 btn btn-primary btn-lg btn-block",native:!0,href:t},s," ",Object(c.h)("i",{class:"fas fa-angle-double-right ml-2"})),Object(c.h)("small",{class:"text-muted"},a))))}})||o;t.a=h}).call(this,s("hosL").Fragment)},"9lZG":function(e,t,s){"use strict";(function(e){var a,i=s("hosL"),o=s("Utv1"),c=s("/eY4"),n=s("OhSV"),l=s("go65"),r=s("om2D"),d=s("ZOvn");let h=Object(c.a)(a=class extends i.Component{constructor(e){var t;super(e),t=this,this.beforeImagesUploaded=()=>{this.setState({sendButtonEnabled:!1})},this.afterImagesUploaded=()=>{this.setState({sendButtonEnabled:!0})},this.commentRace=async function(){const{sendButtonEnabled:e}=t.state;if(!e)return!1;const{callback:s=(()=>{}),inputRefObject:a={}}=t.props,{race:i}=t.props,{raceStore:o}=t.props.stores,{comment:c,showAddImage:n}=t.state;t.setState({sendButtonEnabled:!1});const l=await o.commentRace({id:i.id,comment:c});l&&200===l.status&&(t.setState({comment:{body:"",images:[]}},()=>{d.a.resizeTextarea(a[i.id]),n&&t.addImage()}),s({race:i,response:l})),t.setState({sendButtonEnabled:!0})},this.addImages=({value:e})=>{const{comment:t}=this.state;t.images.push(...e),this.setState({comment:t})},this.addImage=()=>{const{showAddImage:e=!1}=this.state;this.setState({showAddImage:!e})},this.handleImageErrored=e=>{const t=e.target;t.onerror=null,setTimeout(()=>{t.src+="?"+new Date},1e3)},this.state={comment:{body:"",images:[]},showAddImage:!1,sendButtonEnabled:!0},this.inputRef={}}render(){const{inputRef:t,race:s}=this.props,{comment:a,showAddImage:c,sendButtonEnabled:h}=this.state,{userStore:b}=this.props.stores,{user:p={}}=b,m=d.a.displayNameShort(p),u=(d.a.displayName(p),p.image||(p.images?p.images[0]:void 0));return Object(i.h)(e,null,Object(i.h)("div",null,Object(i.h)("div",{class:"d-flex mb-0 position-relative w-100"},Object(i.h)("div",{class:"text-center border rounded-circle imageRounded imageRoundedSmall",style:(u?`background-image: url('${u.s3SmallLink}'); background-size: cover;`:"")+" border-width: 3px !important;"},!u&&Object(i.h)("span",{class:"font-weight-lighter",style:"font-size: 15px;"},m)),Object(i.h)("div",{class:"col pl-3",style:"line-height: 1.2em;"},Object(i.h)("div",{class:"d-flex bd-highlight"},Object(i.h)("div",{class:"p-0 w-100 bd-highlight"},Object(i.h)("label",{class:"sr-only",for:"inlineFormInput"},Object(i.h)(n.c,{id:"comments.comment"},"Kommentar")),Object(i.h)("div",{class:"border rounded rounded-lg position-relative"},Object(i.h)(n.b,null,Object(i.h)("textarea",{class:"form-control-plaintext px-2",type:"text",placeholder:Object(i.h)(n.c,{id:"comments.write-comment"},"Skriv en kommentar..."),onInput:Object(l.a)(this,"comment.body"),onKeyUp:d.a.resizeTextarea,onFocus:d.a.resizeTextarea,style:"height: 2.3em;",value:a.body,ref:t})),Object(i.h)("div",{class:"position-absolute",style:"top: 8px; right: 10px; font-size: 1.2em;"},Object(i.h)("i",{class:"fas fa-image pointerCursor","data-id":s.id,onClick:this.addImage})))),Object(i.h)("div",{class:"p-0 pl-2 flex-shrink-1 bd-highlight"},Object(i.h)("button",{type:"button",class:`btn btn-${h?"primary":"secondary"} mb-2`,disabled:!h,onClick:this.commentRace},Object(i.h)("i",{class:"fas fa-paper-plane"})))))),c&&Object(i.h)(e,null,Object(i.h)("div",{class:"col-12 text-center"},Object(i.h)("div",{class:"container-fluid"},Object(i.h)("div",{class:"row"},o.a.isArray(a.images)&&a.images.map(e=>Object(i.h)("div",{class:"col-3 p-1"},Object(i.h)("img",{src:e.s3SmallLink,class:"img-fluid",onError:this.handleImageErrored}),Object(i.h)("button",{class:"btn btn-sm btn-link",onClick:this.removeImage,"data-name":e.name},Object(i.h)("i",{class:"fas fa-trash"})," ",Object(i.h)(n.c,{id:"comments.remove-image"},"Remove")))))),Object(i.h)(r.a,{object:a,updateField:this.addImages,before:this.beforeImagesUploaded,after:this.afterImagesUploaded,autoOpen:!0})))))}})||a;t.a=h}).call(this,s("hosL").Fragment)},"9xg+":function(e,t,s){"use strict";(function(e){function a(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,a)}return s}function i(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}var o,c,n,l,r,d,h=s("hosL"),b=s("Utv1"),p=s("/eY4"),m=s("cneo"),u=(s("go65"),s("Y3FI")),g=s("OhSV"),O=(s("fh8t"),s("ZOvn")),j=s("om2D"),f=s("TiXY"),v=s("KOz6"),y=s("6GRK"),w=s("/DnB");O.a.marginTop(!1),O.a.marginTopBack(!1),O.a.marginBottom(!1);let x=Object(p.a)(o=class extends h.Component{constructor(...e){var t;super(...e),t=this,this.handleImageErrored=e=>{const t=e.target;if(t.dataset.retry||(t.dataset.retry=0),t.dataset.retry=parseInt(t.dataset.retry,10)+1,t.dataset.retry>5)return!1;t.onerror=null,setTimeout(()=>{t.src+="?"+new Date},1e3)},this.removeImage=async function(e){const{dogStore:s}=t.props.stores,{dog:a}=t.props;s.removeImage({id:a.id,name:e.target.parentElement.dataset.name||e.target.dataset.name})},this.removeFile=async function(e){const{dogStore:s}=t.props.stores,{dog:a}=t.props;s.removeFile({id:a.id,name:e.target.parentElement.dataset.name||e.target.dataset.name})}}render(){const{saved:t,dog:s,type:a="text",datalist:i=[],min:o,max:c,step:n,field:l,title:r,icon:d,help:p,onInput:m,updateField:u,refName:O,showImages:w=!1,showFiles:x=!0}=this.props;let k=s[l]||"",S=c;return"date"===a&&(k&&(k=b.a.isoDate(s[l],!1,!1,!0)),"today"===c&&(S=b.a.isoDate(void 0,!1,!1,!0))),"file"===a?Object(h.h)("div",{class:"form-group "+(t[`${l}.${s.id}`]?"is-valid":"")},Object(h.h)("label",{for:l+"Input"},d&&Object(h.h)("i",{class:d+" text-muted"})," ",r),x&&Object(h.h)(e,null,Object(h.h)("div",{class:"container-fluid"},Object(h.h)("div",{class:"row"},(!s.files||0===s.files.length)&&Object(h.h)(e,null,Object(h.h)("div",{class:"text-center text-muted"},Object(h.h)("div",{class:"display-1"},Object(h.h)("i",{class:"fas fa-file"})),Object(h.h)("h3",null,Object(h.h)(g.c,{id:"dogs.no-files-title"},"No files attached to this dog!")),Object(h.h)(g.c,{id:"dogs.no-files-text"},"You can upload files to this dog inside edit. These files can be of any type. Ie: Certificates, test, etc."))),s.files&&s.files.map(e=>Object(h.h)("div",{class:"col-12 p-1"},Object(h.h)("span",{class:"font-weight-lighter mr-2"},b.a.isoDate(e.createdDate,!1,!1,!0)),Object(h.h)("span",{class:"mr-2"},e.name),Object(h.h)("span",{class:"font-weight-lighter mr-2"},b.a.formatBytes(e.size,1)),Object(h.h)("button",{class:"btn btn-sm btn-link float-right p-0",onClick:this.removeFile,"data-name":e.name},Object(h.h)("i",{class:"fas fa-trash-alt"})," Del")))))),Object(h.h)(f.a,{saved:t,object:s,field:l,updateField:u}),t[`${l}.${s.id}`]?Object(h.h)("div",{class:"valid-feedback",style:"display: block;"},Object(h.h)(g.c,{id:"dogs.changes-saved"},"Endringene er lagret")):Object(h.h)("small",{id:l+"Help",class:"form-text text-muted"},p)):"textarea"===a?Object(h.h)("div",{class:"form-group "+(t[`${l}.${s.id}`]?"is-valid":"")},Object(h.h)("label",{for:l+"Input"},d&&Object(h.h)("i",{class:d+" text-muted"})," ",r),Object(h.h)("textarea",{type:"text",class:"form-control "+(t[`${l}.${s.id}`]?"is-valid":""),id:l+"Input","aria-describedby":l+"Help",value:k,"data-id":s.id,"data-field":l,onInput:m,rows:10}),t[`${l}.${s.id}`]?Object(h.h)("div",{class:"valid-feedback",style:"display: block;"},Object(h.h)(g.c,{id:"dogs.changes-saved"},"Endringene er lagret")):Object(h.h)("small",{id:l+"Help",class:"form-text text-muted"},p)):"links"===l?Object(h.h)("div",{class:"form-group "+(t[`${l}.${s.id}`]?"is-valid":"")},Object(h.h)("label",{for:l+"Input"},d&&Object(h.h)("i",{class:d+" text-muted"})," ",r),Object(h.h)(y.a,{saved:t,stores:this.props.stores,object:s,field:l,updateField:u}),t[`${l}.${s.id}`]?Object(h.h)("div",{class:"valid-feedback",style:"display: block;"},Object(h.h)(g.c,{id:"dogs.changes-saved"},"Endringene er lagret")):Object(h.h)("small",{id:l+"Help",class:"form-text text-muted"},p)):"achievements"===l?Object(h.h)("div",{class:"form-group "+(t[`${l}.${s.id}`]?"is-valid":"")},Object(h.h)("label",{for:l+"Input"},d&&Object(h.h)("i",{class:d+" text-muted"})," ",r),Object(h.h)(v.a,{saved:t,stores:this.props.stores,object:s,field:l,updateField:u}),t[`${l}.${s.id}`]?Object(h.h)("div",{class:"valid-feedback",style:"display: block;"},Object(h.h)(g.c,{id:"dogs.changes-saved"},"Endringene er lagret")):Object(h.h)("small",{id:l+"Help",class:"form-text text-muted"},p)):"image"===a?Object(h.h)("div",{class:"form-group "+(t[`${l}.${s.id}`]?"is-valid":"")},Object(h.h)("label",{for:l+"Input"},d&&Object(h.h)("i",{class:d})," ",r),w&&Object(h.h)(e,null,Object(h.h)("div",{class:"container-fluid"},Object(h.h)("div",{class:"row"},(!s.images||0===s.images.length)&&Object(h.h)(e,null,Object(h.h)("div",{class:"text-center text-muted mb-3"},Object(h.h)("div",{class:"display-1"},Object(h.h)("i",{class:"fas fa-images"})),Object(h.h)("h3",null,Object(h.h)(g.c,{id:"dogs.no-images-title"},"No images for this dog!")),Object(h.h)(g.c,{id:"dogs.no-images-text"},"You can add more images to this dog. Puppy pictures, workout pictures, lazy summer pictures, etc. All is a nice way to create a better profile for this dog."))),"image"===l?Object(h.h)(e,null,s.image&&s.image.s3SmallLink&&Object(h.h)("div",{class:"col-3 p-1"},Object(h.h)("img",{src:s.image.s3SmallLink,class:"img-fluid border rounded-lg",onError:this.handleImageErrored}),Object(h.h)("button",{class:"btn btn-sm btn-link",onClick:this.removeImage,"data-name":s.image.name},Object(h.h)("i",{class:"fas fa-trash"})," Remove"),Object(h.h)("span",{class:"badge badge-success"},"Main"))):Object(h.h)(e,null,s.images&&s.images.map(e=>Object(h.h)("div",{class:"col-3 p-1"},Object(h.h)("img",{src:e.s3SmallLink,class:"img-fluid",onError:this.handleImageErrored}),Object(h.h)("button",{class:"btn btn-sm btn-link",onClick:this.removeImage,"data-name":e.name},Object(h.h)("i",{class:"fas fa-trash"})," Remove"))))))),"image"===l?Object(h.h)(e,null,Object(h.h)(j.a,{saved:t,object:s,field:l,updateField:u,autoOpen:!1,addToImages:!1})):Object(h.h)(e,null,Object(h.h)(j.a,{saved:t,object:s,field:l,updateField:u,autoOpen:!1})),t[`${l}.${s.id}`]?Object(h.h)("div",{class:"valid-feedback",style:"display: block;"},Object(h.h)(g.c,{id:"dogs.changes-saved"},"Endringene er lagret")):Object(h.h)("small",{id:l+"Help",class:"form-text text-muted"},p)):"datalist"===a?Object(h.h)("div",{class:"form-group "+(t[`${l}.${s.id}`]?"is-valid":"")},Object(h.h)("label",{for:l+"Input"},d&&Object(h.h)("i",{class:d})," ",r),Object(h.h)("input",{list:"list-"+l,class:"form-control "+(t[`${l}.${s.id}`]?"is-valid":""),id:l+"Input","aria-describedby":l+"Help",value:k,"data-id":s.id,"data-field":l,onInput:m}),Object(h.h)("datalist",{id:"list-"+l},i.map(e=>Object(h.h)("option",{value:e[0]},e[1]))),t[`${l}.${s.id}`]?Object(h.h)("div",{class:"valid-feedback",style:"display: block;"},Object(h.h)(g.c,{id:"dogs.changes-saved"},"Endringene er lagret")):Object(h.h)("small",{id:l+"Help",class:"form-text text-muted"},p)):"select"===a?Object(h.h)("div",{class:"form-group "+(t[`${l}.${s.id}`]?"is-valid":"")},Object(h.h)("label",{for:l+"Input"},d&&Object(h.h)("i",{class:d})," ",r),Object(h.h)("select",{type:a,class:"form-control "+(t[`${l}.${s.id}`]?"is-valid":""),id:l+"Input","aria-describedby":l+"Help",value:k,"data-id":s.id,"data-field":l,onInput:m},Object(h.h)("option",{value:""},"-- Velg kjønn --"),i.map(e=>Object(h.h)("option",{value:e[0]},e[1]))),t[`${l}.${s.id}`]?Object(h.h)("div",{class:"valid-feedback",style:"display: block;"},Object(h.h)(g.c,{id:"dogs.changes-saved"},"Endringene er lagret")):Object(h.h)("small",{id:l+"Help",class:"form-text text-muted"},p)):Object(h.h)("div",{class:"form-group "+(t[`${l}.${s.id}`]?"is-valid":"")},Object(h.h)("label",{for:l+"Input"},d&&Object(h.h)("i",{class:d})," ",r)," ",O,Object(h.h)("input",{type:a,class:"form-control "+(t[`${l}.${s.id}`]?"is-valid":""),id:l+"Input","aria-describedby":l+"Help",min:o,max:S,step:n,value:k,"data-id":s.id,"data-field":l,onInput:m}),t[`${l}.${s.id}`]?Object(h.h)("div",{class:"valid-feedback",style:"display: block;"},Object(h.h)(g.c,{id:"dogs.changes-saved"},"Endringene er lagret")):Object(h.h)("small",{id:l+"Help",class:"form-text text-muted"},p))}})||o,k=Object(p.a)(c=class extends h.Component{toggleType(e){const{dogStore:t}=this.props.stores,{object:s,type:a,field:i,updateField:o,isNew:c}=this.props;let n=Object(m.i)(s[i]);n=n===e?null:e,null===n?o({id:s.id,field:i,value:n,type:a,isNew:c}):s.teams.indexOf(n)>-1?t.removeTeam({id:s.id,team:n}):s.team?t.addTeam({id:s.id,team:n}):o({id:s.id,field:i,value:n,type:a,isNew:c})}componentDidMount(){this.container&&this.container.scrollIntoView({behavior:"smooth",block:"center"})}render(){const{userStore:t}=this.props.stores,{teams:s}=t,{saved:a,object:i,field:o,title:c,icon:n,help:l}=this.props,r=Object(m.i)(i[o]),{highlight:d}=this.props;return Object(h.h)("div",{class:"form-group mb-4 pb-1 border-bottom "+(a[`${o}.${i.id}`]?"is-valid":"")},Object(h.h)("label",{for:o+"Input"},n&&Object(h.h)("i",{class:n+" text-muted"})," ",c),Object(h.h)("div",{class:"container-fluid px-0"},Object(h.h)("div",{class:"row"},Object(h.h)("div",{class:"w-100 overflow-hidden"},Object(h.h)("div",{class:"d-flex flex-row flex-nowrap pb-2 px-1",style:"overflow: auto; scroll-snap-type: x mandatory;"},s&&s.map((t,a)=>{const o=r===t.id,c=i&&b.a.isArray(i.teams)&&i.teams.indexOf(t.id)>-1;return Object(h.h)("div",{class:"col mb-0 px-0",ref:o||c?e=>this.container=e:null},Object(h.h)("button",{class:`btn btn-block\n            \t\t\t\t\t\t\t\t\t\trounded-none ${0===a?"rounded-pill-left":a+1===s.length?"rounded-pill-right":""}\n                                                    btn${o||c?"":"-outline"}-${c?"info":"success"}\n                                                    text-nowrap overflow-hidden`,style:"text-overflow: ellipsis;",onClick:()=>this.toggleType(t.id)},i.hintTeam===t.id&&Object(h.h)("span",{class:"float-right text-primary"},Object(h.h)("i",{class:"fas fa-circle"})),Object(h.h)("i",{class:"fas fa-users mr-2"}),t.name,d&&d.indexOf(t.id)>-1&&Object(h.h)(e,null,r===t.id?Object(h.h)(e,null,Object(h.h)("i",{class:"fas fa-check float-right"})):Object(h.h)(e,null,Object(h.h)("div",{class:"spinner-grow text-warning float-right",role:"status"},Object(h.h)("span",{class:"sr-only"},"Loading...")),Object(h.h)("i",{class:"far fa-hand-point-left float-right",style:"font-size: 2.0em;"}))),Object(h.h)("small",null,o&&Object(h.h)("span",{class:"badge badge-pill badge-primary"},"Primary"),c&&Object(h.h)("span",{class:"badge badge-pill badge-secondary"},"Secondary"))))}))))),a[`${o}.${i.id}`]?Object(h.h)("div",{class:"valid-feedback",style:"display: block;"},Object(h.h)(g.c,{id:"workouts.changes-saved"},"Endringene er lagret")):Object(h.h)("small",{id:o+"Help",class:"form-text text-muted"},l))}})||c,S=Object(p.a)(n=class extends h.Component{toggleType(e){const{object:t,type:s,field:a,updateField:i,isNew:o}=this.props;let c=Object(m.i)(t[a]);c=c===e?null:e,i({id:t.id,field:a,value:c,type:s,isNew:o})}render(){const{userStore:e}=this.props.stores,{harnesses:t,user:s}=e,{language:a="en"}=s,{saved:i,object:o,field:c,title:n,icon:l,help:r}=this.props,d=Object(m.i)(o[c]);return Object(h.h)("div",{class:"form-group "+(i[`${c}.${o.id}`]?"is-valid":"")},Object(h.h)("label",{for:c+"Input"},l&&Object(h.h)("i",{class:l})," ",n),Object(h.h)("div",{class:"container-fluid px-0"},Object(h.h)("div",{class:"row"},Object(h.h)("div",{class:"w-100 overflow-hidden"},Object(h.h)("div",{class:"d-flex flex-row flex-nowrap pb-2 px-1",style:"overflow: auto; scroll-snap-type: x mandatory;"},t&&t.map((e,s)=>Object(h.h)("div",{class:"col px-0 mb-2",ref:d===e.id?e=>this.container=e:null},Object(h.h)("div",{class:`border\n                                            rounded-none ${0===s?"rounded-pill-left":s+1===t.length?"rounded-pill-right":""}\n                                            p-2 ${d===e.id?"bg-success":""}`,style:`border-bottom: 3px solid ${e.colorNonstop} !important;`,onClick:()=>this.toggleType(e.id)},e.lang&&e.lang[a]?e.lang[a]:e.name))))))),i[`${c}.${o.id}`]?Object(h.h)("div",{class:"valid-feedback",style:"display: block;"},Object(h.h)(g.c,{id:"dogs.changes-saved"},"Endringene er lagret")):Object(h.h)("small",{id:c+"Help",class:"form-text text-muted"},r))}})||n,I=Object(p.a)(l=class extends h.Component{toggleStatus(e){const{dogStore:t}=this.props.stores,{object:s,type:a,field:i,updateField:o,isNew:c}=this.props;let n=Object(m.i)(s[i]);n=n===e?0:e,0===n?o({id:s.id,field:i,value:n,type:a,isNew:c}):s.statuses.indexOf(n)>-1?t.removeStatus({id:s.id,status:n}):s.status?t.addStatus({id:s.id,status:n}):o({id:s.id,field:i,value:n,type:a,isNew:c})}componentDidMount(){this.container&&this.container.scrollIntoView({behavior:"smooth",block:"center"})}render(){const{userStore:e}=this.props.stores,{dogstatuses:t,user:s}=e,{language:a}=s,{saved:i,object:o,field:c,title:n,icon:l,help:r}=this.props,d=Object(m.i)(o[c]);return Object(h.h)("div",{class:"form-group  mb-4 pb-1 border-bottom "+(i[`${c}.${o.id}`]?"is-valid":"")},Object(h.h)("label",{for:c+"Input"},l&&Object(h.h)("i",{class:l+" text-muted"})," ",n),Object(h.h)("div",{class:"container-fluid px-0"},Object(h.h)("div",{class:"row"},Object(h.h)("div",{class:"w-100 overflow-hidden"},Object(h.h)("div",{class:"d-flex flex-row flex-nowrap pb-2 px-1",style:"overflow: auto; scroll-snap-type: x mandatory;"},t&&t.map((e,s)=>{const i=d===e.id,c=o&&b.a.isArray(o.statuses)&&o.statuses.indexOf(e.id)>-1;return Object(h.h)("div",{class:"col mb-2 px-0",ref:i||c?e=>this.container=e:null},Object(h.h)("button",{class:`btn btn-block\n            \t\t\t\t\t\t\t\t\t\trounded-none ${0===s?"rounded-pill-left":s+1===t.length?"rounded-pill-right":""}\n                                                    btn${i||c?"":"-outline"}-${c?"info":"success"}\n                                                    text-nowrap overflow-hidden`,style:"text-overflow: ellipsis;",onClick:()=>this.toggleStatus(e.id)},a&&e.lang&&e.lang[a]?e.lang[a]:e.name))}))))),i[`${c}.${o.id}`]?Object(h.h)("div",{class:"valid-feedback",style:"display: block;"},Object(h.h)(g.c,{id:"dogs.changes-saved"},"Endringene er lagret")):Object(h.h)("small",{id:c+"Help",class:"form-text text-muted"},r))}})||l,C=Object(p.a)(r=class extends h.Component{toggleStatus(e){const{object:t,type:s,field:a,updateField:i,isNew:o}=this.props;let c=Object(m.i)(t[a]);c=c===e?null:e,i({id:t.id,field:a,value:c,type:s,isNew:o})}render(){const{userStore:e}=this.props.stores,{dogPositions:t}=e,{saved:s,object:a,field:i,title:o,icon:c,help:n}=this.props,l=Object(m.i)(a[i]);return Object(h.h)("div",{class:"form-group  mb-4 pb-1 border-bottom "+(s[`${i}.${a.id}`]?"is-valid":"")},Object(h.h)("label",{for:i+"Input"},c&&Object(h.h)("i",{class:c+" text-muted"})," ",o),Object(h.h)("div",{class:"container-fluid px-0"},Object(h.h)("div",{class:"row"},t&&t.map(e=>Object(h.h)("div",{class:"offset-2 col-8 mb-2"},Object(h.h)("div",{class:"border rounded rounded-pill px-3 py-1 bg-"+(l===e.id?e.class||"success":""),onClick:()=>this.toggleStatus(e.id),style:"line-height: 1.1em; cursor: pointer; pointer-events: inherit;"},Object(h.h)("small",null,e.name)))))),s[`${i}.${a.id}`]?Object(h.h)("div",{class:"valid-feedback",style:"display: block;"},Object(h.h)(g.c,{id:"dogs.changes-saved"},"Endringene er lagret")):Object(h.h)("small",{id:i+"Help",class:"form-text text-muted"},n))}})||r,T=Object(p.a)(d=class extends h.Component{constructor(e){var t;super(e),t=this,this.insertDog=async function(){const{newDog:e}=t.state,{dogStore:s}=t.props.stores;await s.insert(function(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?a(Object(s),!0).forEach((function(t){i(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):a(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}({},e)),t.resetDog(),Object(u.route)("/dogs/")},this.updateField=e=>{const{id:t,field:s,type:a,elementtype:i,isNew:o}=e.target.dataset,{value:c,type:n,min:l,max:r}=e.target;"date"===n&&l&&r?c>=l&&c<=r&&this.updateFieldValue({id:parseInt(t,10),field:s,value:c,type:a,elementtype:i,isNew:o}):this.updateFieldValue({id:parseInt(t,10),field:s,value:c,type:a,elementtype:i,isNew:o})},this.updateFieldValue=({id:e,field:s,value:a,datatype:i,elementtype:o,isNew:c=!1,skipTimer:n=!1})=>{const{dogStore:l}=this.props.stores;let r=a,d=a;const{dog:h}=l;"images"===s&&Array.isArray(h.images)&&Array.isArray(a)&&(d=[...h.images,...a]),"files"===s&&Array.isArray(h.files)&&(d=Array.isArray(a)?[...h.files,...a]:[...h.files,a]),"achievements"===s&&Array.isArray(h.achievements)&&(d=Array.isArray(a)?[...h.achievements,...a]:[...h.achievements,a]),"links"===s&&Array.isArray(h.links)&&(d=Array.isArray(a)?[...h.links,...a]:[...h.links,a]),"array"!==i||Array.isArray(a)||(r="number"===o?a.split(",").map(e=>parseFloat(e)||e):a.split(",")),c?l.updateObjectKeyValue("newDog",s,a):(l.updateField(e,s,d),n?this.doUpdateField(e,s,r):(clearTimeout(this.updateTimer[s]),this.updateTimer[s]=setTimeout((async function(){t.doUpdateField(e,s,r)}),500)))},this.chooseMother=e=>{const{dogStore:t}=this.props.stores,{dog:s}=t,a=parseInt(e.target.value,10),i=t.findDog(a);i?(this.updateFieldValue({id:s.id,field:"mother",value:i.id,skipTimer:!0}),this.updateFieldValue({id:s.id,field:"motherName",value:i.name,skipTimer:!0}),this.updateFieldValue({id:s.id,field:"motherChipId",value:i.chipId,skipTimer:!0})):this.updateFieldValue({id:s.id,field:"mother",value:null,skipTimer:!0})},this.chooseFather=e=>{const{dogStore:t}=this.props.stores,{dog:s}=t,a=parseInt(e.target.value,10),i=t.findDog(a);i?(this.updateFieldValue({id:s.id,field:"father",value:i.id,skipTimer:!0}),this.updateFieldValue({id:s.id,field:"fatherName",value:i.name,skipTimer:!0}),this.updateFieldValue({id:s.id,field:"fatherChipId",value:i.chipId,skipTimer:!0})):this.updateFieldValue({id:s.id,field:"father",value:null,skipTimer:!0})},this.chooseSubmenu=e=>{this.setState({submenu:e.target.parentElement.dataset.menu||e.target.dataset.menu})},this.back=()=>{const{history:e}=this.props.stores;e.goBack()},this.state={newDog:{},submenu:e.submenu||"info"},this.updateTimer={}}async loadDog(e=this.props){const{id:t}=e,{dogStore:s}=this.props.stores;s.cleanupMemoryDetail(),await s.load(t,!1,{addData:["team","user","workoutSummary","vaccineStatuses","historyStatuses","vaccineLogStatuses","allDogs"]})}resetDog(){this.setState({newDog:{},createNew:!1})}async doUpdateField(e,t,s){const{dogStore:a}=this.props.stores;await a.saveField(e,t,s)}componentDidMount(){this.loadDog()}componentWillReceiveProps(e){e.id!==this.props.id&&this.loadDog(e)}render(){const{submenu:t}=this.state,{dogStore:s,userStore:a}=this.props.stores,{saved:i,dog:o}=s,c=s.findDogsByGender("female"),n=s.findDogsByGender("male"),l=O.a.hasBirthday(o.birth),r=o.birth?Math.ceil(O.a.daysUntilNextBirthday(o.birth)):365,{name:d}=o;return Object(h.h)(e,null,Object(h.h)("div",{class:"d-flex position-relative"},Object(h.h)("div",{class:"text-center border rounded-circle imageRounded float-right",style:o.image?`background-image: url("${o.image.s3SmallLink}");`:""},!o.image&&Object(h.h)("i",{class:"fas fa-dog text-muted mt-3",style:"font-size: 40px;"})),Object(h.h)("div",{class:"flex-grow-1 pl-3"},Object(h.h)("h5",null,d,l&&Object(h.h)(e,null,Object(h.h)("i",{class:"fas fa-birthday-cake ml-3"}))),Object(h.h)("span",null,r<7&&Object(h.h)(e,null,Object(h.h)("span",{class:"text-muted mr-2"},Object(h.h)("i",{class:"fas fa-birthday-cake"})," in ",r," days")),o.birth&&Object(h.h)("span",{class:"mr-2"},b.a.age(o.birth,o.deceased)),"female"===o.gender?Object(h.h)("i",{class:"fas fa-venus"}):Object(h.h)("i",{class:"fas fa-mars"})))),Object(h.h)("div",{class:"d-flex flex-row flex-nowrap pb-2 px-1",style:"overflow: auto; scroll-snap-type: x mandatory;"},Object(h.h)("div",{class:"col px-0 pt-2"},Object(h.h)("button",{class:`btn btn-block rounded-pill-left rounded-none ${"info"===t?"btn-primary":"btn-outline-primary"} text-nowrap`,style:"text-overflow: ellipsis; overflow: hidden;","data-menu":"info",onClick:this.chooseSubmenu},Object(h.h)("i",{class:"fas fa-info-circle"})," ",Object(h.h)(g.c,{id:"dogs.info"},"Info")),"info"===t&&Object(h.h)(w.a,{horizontal:"center",vertical:"end"})),Object(h.h)("div",{class:"col px-0 pt-2"},Object(h.h)("button",{class:`btn btn-block rounded-none ${"pictures"===t?"btn-primary":"btn-outline-primary"} text-nowrap`,style:"text-overflow: ellipsis; overflow: hidden;","data-menu":"pictures",onClick:this.chooseSubmenu},Object(h.h)("i",{class:"fas fa-images"})," ",Object(h.h)(g.c,{id:"dogs.pictures"},"Pictures")),"pictures"===t&&Object(h.h)(w.a,{horizontal:"center",vertical:"end"})),Object(h.h)("div",{class:"col px-0 pt-2"},Object(h.h)("button",{class:`btn btn-block rounded-none ${"team"===t?"btn-primary":"btn-outline-primary"} text-nowrap`,style:"text-overflow: ellipsis; overflow: hidden;","data-menu":"team",onClick:this.chooseSubmenu},Object(h.h)("i",{class:"fas fa-users"})," ",Object(h.h)(g.c,{id:"dogs.team"},"Team")),"team"===t&&Object(h.h)(w.a,{horizontal:"center",vertical:"end"})),Object(h.h)("div",{class:"col px-0 pt-2"},Object(h.h)("button",{class:`btn btn-block rounded-pill-right rounded-none ${"advanced"===t?"btn-primary":"btn-outline-primary"} text-nowrap`,style:"text-overflow: ellipsis; overflow: hidden;","data-menu":"advanced",onClick:this.chooseSubmenu},Object(h.h)("i",{class:"fas fa-cogs"})," ",Object(h.h)(g.c,{id:"dogs.advanced"},"Advanced")),"advanced"===t&&Object(h.h)(w.a,{horizontal:"center",vertical:"end"}))),Object(h.h)("div",{class:"w-100 overflow-auto position-relative",style:"max-height: 50vh;"},Object(h.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3"},"info"===t&&Object(h.h)(e,null,Object(h.h)(g.b,null,Object(h.h)(x,{saved:i,dog:o,field:"name",title:Object(h.h)(g.c,{id:"dogs.full-name"},"Fullt navn"),help:Object(h.h)(g.c,{id:"dogs.full-name-help"},"Fullt navn på hunden."),onInput:this.updateField}),Object(h.h)(x,{saved:i,dog:o,field:"shortname",title:Object(h.h)(g.c,{id:"dogs.short-name"},"Kallenavn"),help:Object(h.h)(g.c,{id:"dogs.short-name-help"},"Kallenavnet på hunden. Hva roper du på innkalling?"),onInput:this.updateField}),Object(h.h)(x,{saved:i,dog:o,field:"gender",type:"select",datalist:[["male",Object(h.h)(g.c,{id:"dogs.gender-male"},"Male")],["female",Object(h.h)(g.c,{id:"dogs.gender-female"},"Female")]],title:Object(h.h)(g.c,{id:"dogs.gender"},"Kjønn"),help:Object(h.h)(g.c,{id:"dogs.gender-help"},"Kjønn på hunden."),onInput:this.updateField}),Object(h.h)(x,{saved:i,dog:o,field:"chipId",title:Object(h.h)(g.c,{id:"dogs.chip-id"},"Chip ID"),help:Object(h.h)(g.c,{id:"dogs.chip-id-help"},"Chip ID på hunden. Står ofte i vetrinærhåndbok eller passet."),onInput:this.updateField}),Object(h.h)(x,{saved:i,dog:o,field:"birth",type:"date",min:"2000-01-01",max:"today",title:Object(h.h)(g.c,{id:"dogs.birth"},"Fødselsdato"),help:Object(h.h)(g.c,{id:"dogs.birth-help"},"Fødselsdato på hunden."),onInput:this.updateField}),Object(h.h)(S,{stores:this.props.stores,saved:i,object:o,type:"number",field:"harness",title:Object(h.h)(g.c,{id:"dogs.harness-size"},"Selestørrelse"),help:Object(h.h)(g.c,{id:"dogs.harness-size-help"},"Sele til hunden"),updateField:this.updateFieldValue}),Object(h.h)(x,{saved:i,dog:o,field:"description",icon:"fas fa-paragraph",type:"textarea",title:Object(h.h)(g.c,{id:"dogs.description"},"Beskrivelse"),help:Object(h.h)(g.c,{id:"dogs.description-help"},"Beskrivelse av hunden."),onInput:this.updateField}))),"status"===t&&Object(h.h)(e,null,Object(h.h)(g.b,null,Object(h.h)(I,{stores:this.props.stores,saved:i,object:o,type:"number",field:"status",title:Object(h.h)(g.c,{id:"dogs.status"},"Status"),help:Object(h.h)(g.c,{id:"dogs.status-help"},"Status til hunden"),updateField:this.updateFieldValue}),Object(h.h)(x,{saved:i,dog:o,field:"specialNeeds",title:Object(h.h)(g.c,{id:"dogs.special-needs"},"Spesielle behov"),help:Object(h.h)(g.c,{id:"dogs.special-needs-help"},'Har hunden spesielle behov? Trenger ekstra mat, utstyr eller annet? Eks: "Ekstra fett", "Husk ulveklobandasje", etc.'),onInput:this.updateField}))),"pictures"===t&&Object(h.h)(e,null,Object(h.h)(g.b,null,Object(h.h)(x,{saved:i,dog:o,field:"image",type:"image",icon:"fas fa-portrait",stores:this.props.stores,title:Object(h.h)(g.c,{id:"dogs.profile-photo"},"Profilbilde"),help:Object(h.h)(g.c,{id:"dogs.profile-photo-help"},"Profilbilde av hunden."),onInput:this.updateField,updateField:this.updateFieldValue,showImages:!0}))),"team"===t&&Object(h.h)(e,null,Object(h.h)(g.b,null,Object(h.h)(k,{stores:this.props.stores,saved:i,object:o,type:"number",field:"team",title:Object(h.h)(g.c,{id:"dogs.team"},"Team"),help:Object(h.h)(g.c,{id:"dogs.team-help"},"Team som hunden er på."),updateField:this.updateFieldValue}),Object(h.h)(C,{stores:this.props.stores,saved:i,object:o,type:"number",field:"position",title:Object(h.h)(g.c,{id:"dogs.position"},"Plass i spannet"),help:Object(h.h)(g.c,{id:"dogs.position-help"},"Foretrukket plass i spannet."),updateField:this.updateFieldValue}))),"relations"===t&&Object(h.h)(e,null,Object(h.h)("h5",{class:"mt-5"},Object(h.h)(g.c,{id:"dogs.mother"},"Mor")),Object(h.h)("select",{class:"form-control","aria-describedby":"fatherHelp",value:o.mother,onInput:this.chooseMother},Object(h.h)("option",{value:""},"-- ",Object(h.h)(g.c,{id:"dogs.choose-mother"},"Velg blant dine hunder")," --"),c&&c.map(e=>Object(h.h)("option",{value:e.id},e.name," - ",b.a.age(e.birth,e.deceased)))),Object(h.h)(g.b,null,Object(h.h)(x,{saved:i,dog:o,field:"motherName",type:"text",title:Object(h.h)(g.c,{id:"dogs.mother-name"},"Navn på mor"),help:Object(h.h)(g.c,{id:"dogs.mother-name-help"},"Navn på moren til denne hunden."),onInput:this.updateField}),Object(h.h)(x,{saved:i,dog:o,field:"motherChipId",type:"text",title:Object(h.h)(g.c,{id:"dogs.mother-chipid"},"Chip ID på mor"),help:Object(h.h)(g.c,{id:"dogs.mother-chipid-help"},"Chip ID til moren til denne hunden. Dersom hunden finnes blant dine hunder, så vil den bli koblet sammen."),onInput:this.updateField}),Object(h.h)(x,{saved:i,dog:o,field:"motherComment",title:Object(h.h)(g.c,{id:"dogs.mother-comment"},"Kommentar til mor"),help:Object(h.h)(g.c,{id:"dogs.mother-comment-help"},"Kommentar til moren til denne hunden."),onInput:this.updateField})),Object(h.h)("h5",{class:"mt-5"},Object(h.h)(g.c,{id:"dogs.father"},"Far")),Object(h.h)("select",{class:"form-control","aria-describedby":"fatherHelp",value:o.father,onInput:this.chooseFather},Object(h.h)("option",{value:""},"-- ",Object(h.h)(g.c,{id:"dogs.choose-father"},"Velg blant dine hunder")," --"),n&&n.map(e=>Object(h.h)("option",{value:e.id},e.name," - ",b.a.age(e.birth,e.deceased)))),Object(h.h)(g.b,null,Object(h.h)(x,{saved:i,dog:o,field:"fatherName",type:"text",title:Object(h.h)(g.c,{id:"dogs.father-name"},"Navn på far"),help:Object(h.h)(g.c,{id:"dogs.father-name-help"},"Navn på faren til denne hunden."),onInput:this.updateField}),Object(h.h)(x,{saved:i,dog:o,field:"fatherChipId",type:"text",title:Object(h.h)(g.c,{id:"dogs.father-chipid"},"Chip ID på far"),help:Object(h.h)(g.c,{id:"dogs.father-chipid-help"},"Chip ID til faren til denne hunden. Dersom hunden finnes blant dine hunder, så vil den bli koblet sammen."),onInput:this.updateField}),Object(h.h)(x,{saved:i,dog:o,field:"fatherComment",title:Object(h.h)(g.c,{id:"dogs.father-comment"},"Kommentar til far"),help:Object(h.h)(g.c,{id:"dogs.father-comment-help"},"Kommentar til faren til denne hunden."),onInput:this.updateField}))),"links"===t&&Object(h.h)(e,null,Object(h.h)(g.b,null,Object(h.h)(x,{saved:i,dog:o,field:"links",type:"text",icon:"fas fa-link",stores:this.props.stores,title:Object(h.h)(g.c,{id:"dogs.links"},"Linker"),help:Object(h.h)(g.c,{id:"dogs.links-help"},"Linker til denne hunden."),onInput:this.updateField,updateField:this.updateFieldValue}))),"achievements"===t&&Object(h.h)(e,null,Object(h.h)(g.b,null,Object(h.h)(x,{saved:i,dog:o,field:"achievements",type:"text",icon:"fas fa-clock",stores:this.props.stores,title:Object(h.h)(g.c,{id:"dogs.achievements"},"Bragder"),help:Object(h.h)(g.c,{id:"dogs.achievements-help"},"Bragder til denne hunden."),onInput:this.updateField,updateField:this.updateFieldValue}))),"advanced"===t&&Object(h.h)(e,null,Object(h.h)(g.b,null,Object(h.h)(x,{saved:i,dog:o,field:"files",type:"file",icon:"fas fa-file",stores:this.props.stores,title:Object(h.h)(g.c,{id:"dogs.files"},"Files"),help:Object(h.h)(g.c,{id:"dogs.files-help"},"Filer til denne hunden."),onInput:this.updateField,updateField:this.updateFieldValue}))))))}})||d;t.a=T}).call(this,s("hosL").Fragment)},ABWa:function(e){e.exports={pointerCursor:"pointerCursor__2Gpay","marker-cluster-custom":"marker-cluster-custom__1z-5y"}},AEg1:function(e,t,s){"use strict";(function(e){function a(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,a)}return s}function i(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}var o,c=s("hosL"),n=s("Utv1"),l=s("/eY4"),r=s("OhSV"),d=s("go65"),h=s("om2D"),b=s("ZOvn");const p={showAddImage:!1,showTeamChange:!1,showChangeVisibility:!1,showChangeType:!1,sendButtonEnabled:!0};let m=Object(l.a)(o=class extends c.Component{constructor(e){var t;super(e),t=this,this.beforeImagesUploaded=()=>{this.setState({sendButtonEnabled:!1})},this.afterImagesUploaded=()=>{this.setState({sendButtonEnabled:!0})},this.addStory=async function(){const{story:e={},showAddImage:s,sendButtonEnabled:a}=t.state,{callback:i=(()=>{}),hashTags:o=[],postfix:c,topic:n="team-"+e.team}=t.props,{storyStore:l}=t.props.stores;if(!a)return!1;if(!e.body)return!1;t.setState({sendButtonEnabled:!1});let r=e.body;c&&(r+="\n\n"+c),o&&o.length>0&&(r+="\n\n"+o.map(e=>"#"+e).join(" "));const d=await l.insert({type:e.type,title:e.title,body:r,pinned:e.pinned,images:e.images,public:e.public?1:0,team:e.team,urlText:e.urlText,url:e.url,currency:e.currency,price:e.price,code:e.code,country:e.country,region:e.region,startDate:e.startDate,endDate:e.endDate,topic:n});d&&201===d.status&&(await l.loadPublicFeed({hashtags:o}),t.setState({story:{type:1,title:"",body:"",pinned:null,images:[],public:1,urlText:"",url:"",currency:"",price:null,code:"",country:"",region:"",startDate:null,endDate:null}},()=>{b.a.resizeTextarea(t.inputRef.newStoryBody),s&&t.addImage()}),i(d.data)),t.setState({sendButtonEnabled:!0})},this.addImages=({value:e})=>{const{story:t}=this.state;t.images.push(...e),this.setState({story:t})},this.addImage=()=>{const{showAddImage:e}=this.state;this.setState({showAddImage:!e})},this.changeVisibility=()=>{const{showChangeVisibility:e}=this.state;this.setState({showChangeVisibility:!e})},this.changePinned=()=>{const{showChangeVisibility:e}=this.state;this.setState({showChangeVisibility:!e})},this.changeType=()=>{const{showChangeType:e}=this.state;this.setState({showChangeType:!e})},this.toggleTeamChange=()=>{const{showTeamChange:e}=this.state;this.setState({showTeamChange:!e})},this.handleImageErrored=e=>{const t=e.target;t.onerror=null,setTimeout(()=>{t.src+="?"+new Date},1e3)},this.setPublicTeam=()=>{const{userStore:e}=this.props.stores,t=e.findPublicTeams();if(n.a.isArray(t)&&t.length>0){const{story:e}=this.state;e.team=t[0].id,this.setState({story:e})}},this.setFocus=e=>{this.setState({hasFocus:!0}),b.a.resizeTextarea(e.target)},this.removeFocus=()=>{this.setState({hasFocus:!1})},this.state=function(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?a(Object(s),!0).forEach((function(t){i(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):a(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}({story:{type:1,title:"",body:"",images:[],public:1,urlText:"",url:"",currency:"",price:0,code:"",country:"",region:"",startDate:"",endDate:""}},p),this.inputRef={}}componentDidMount(){this.setPublicTeam()}render(){const{col:t=12,offset:s=0,hashTags:a=[]}=this.props,{story:i={},showAddImage:o,showTeamChange:l,showChangeVisibility:p,showChangeType:m,sendButtonEnabled:u,hasFocus:g}=this.state,{userStore:O,appState:j}=this.props.stores,{user:f={},isAdmin:v}=O,y=f.firstname?`${n.a.ucfirst(f.firstname,!0)}${n.a.ucfirst(f.lastname,!0)}`:""+n.a.ucfirst(f.email||"",!0);let w=f.image||(f.images?f.images[0]:void 0);if(i.team){const e=parseInt(i.team,10),t=O.findTeam(e,!0);w=t.image||(t.images?t.images[0]:void 0)}const{darkmode:x}=j;return Object(c.h)("div",{class:"w-100 px-0"},Object(c.h)("div",{class:"row"},Object(c.h)("div",{class:`col-${t} offset-${s} col-sm-8 col-lg-6 offset-sm-2 offset-lg-3 rounded rounded-lg pt-3 pb-1 bg-${x?"black":"white"} shadow-sm mb-1`},Object(c.h)("div",{class:"d-flex mb-0 position-relative w-100"},Object(c.h)("div",{class:"position-relative"},Object(c.h)("div",{class:"text-center border rounded-circle imageRounded imageRoundedSmall pointerCursor",style:(w?`background-image: url('${w.s3SmallLink}'); background-size: cover;`:"")+" border-width: 3px !important;",onClick:this.toggleTeamChange},!w&&Object(c.h)("span",{class:"font-weight-lighter",style:"font-size: 15px;"},y)),Object(c.h)("div",{class:"position-absolute",style:"top: 16px; right: 0px;"},Object(c.h)("small",{class:"text-white",style:"font-size: 1.5em;"},Object(c.h)("i",{class:"fas fa-caret-down pointerCursor",onClick:this.toggleTeamChange})))),Object(c.h)("div",{class:"col pl-3 pr-0",style:"line-height: 1.2em;"},Object(c.h)("div",{class:"d-flex bd-highlight"},Object(c.h)("div",{class:"p-0 w-100 bd-highlight"},Object(c.h)("label",{class:"sr-only",for:"inlineFormInput"},Object(c.h)(r.c,{id:"story.body"},"Story")),Object(c.h)("div",{class:"border rounded rounded-lg position-relative"},Object(c.h)(r.b,null,Object(c.h)("textarea",{class:"form-control-plaintext px-2",type:"text",placeholder:Object(c.h)(r.c,{id:"story.write-body"},"Hva tenker du på?.."),onInput:Object(d.a)(this,"story.body"),onKeyUp:b.a.resizeTextarea,onFocus:this.setFocus,style:"height: 2.3em;",value:i.body,ref:e=>this.inputRef.newStoryBody=e})),g&&Object(c.h)("div",{class:"position-absolute",style:"bottom: 8px; right: 10px; font-size: 1.2em;"},Object(c.h)("i",{class:"fas fa-image pointerCursor","data-id":i.id,onClick:this.addImage}),Object(c.h)("i",{class:`fas fa-${1===i.public?"globe-europe":"users"} pointerCursor ml-2`,"data-id":i.id,onClick:this.changeVisibility}),v&&Object(c.h)("i",{class:"fas fa-cog pointerCursor ml-2","data-id":i.id,onClick:this.changeType}))),a&&a.length>0&&Object(c.h)(e,null,a.map(t=>Object(c.h)(e,null,Object(c.h)("span",{class:"badge badge-secondary mr-2 my-1"},Object(c.h)("a",{href:"/stories/tag/"+t,class:"text-white"},"#",t)))))),Object(c.h)("div",{class:"p-0 pl-2 flex-shrink-1 bd-highlight pt-auto"},Object(c.h)("button",{type:"button",class:`btn btn-${u?"primary":"secondary"} ml-1`,disabled:!u,onClick:this.addStory},Object(c.h)("i",{class:"fas fa-paper-plane"})))))),Object(c.h)("div",null,Object(c.h)("div",{class:"row"},l&&Object(c.h)(e,null,Object(c.h)("div",{class:"col-12 text-center mt-2"},Object(c.h)("div",{class:"form-group"},Object(c.h)("small",null,Object(c.h)("select",{class:"custom-select custom-select-sm",id:"team",onInput:Object(d.a)(this,"story.team"),onChange:this.toggleTeamChange},Object(c.h)("option",{value:""},"-- ",Object(c.h)(r.c,{id:"story.team-choose"},"Velg team")," --"),n.a.isArray(f.teams)&&f.teams.map(e=>{const t=O.findTeam(e,!0);return t&&t.public?Object(c.h)("option",{value:t.id,selected:i.team==t.id?"selected":""},t.name):""}),!f.teams&&Object(c.h)(e,null,Object(c.h)("option",{value:""},"No public teams"))))))),p&&Object(c.h)(e,null,v&&Object(c.h)(e,null,Object(c.h)("div",{class:"col-12 text-center mt-2"},Object(c.h)("div",{class:"form-group"},Object(c.h)("small",null,Object(c.h)("label",{for:"pinned"},"Pinned to top:"),Object(c.h)("input",{id:"pinned",type:"checkbox",onInput:Object(d.a)(this,"story.pinned"),value:1,checked:i.pinned?1:0}))))),Object(c.h)("div",{class:"col-12 text-center mt-2"},Object(c.h)("div",{class:"form-group"},Object(c.h)("small",null,Object(c.h)("select",{class:"custom-select custom-select-sm",id:"team",onInput:Object(d.a)(this,"story.public"),value:i.public,onChange:this.changeVisibility},Object(c.h)("option",{value:0,selected:0==i.public?"selected":""},"👥 ",Object(c.h)(r.c,{id:"story.visibility-followers"},"Kun synlig for de som følger deg.")),Object(c.h)("option",{value:1,selected:1==i.public?"selected":""},"🌍 ",Object(c.h)(r.c,{id:"story.visibility-public"},"Synlig for alle som bruker appen."))))))),m&&Object(c.h)(e,null,Object(c.h)("div",{class:"col-12 text-center mt-2"},Object(c.h)("div",{class:"form-group"},Object(c.h)("small",null,Object(c.h)("select",{class:"custom-select custom-select-sm",id:"team",onInput:Object(d.a)(this,"story.type"),value:i.type,onChange:this.changeType},Object(c.h)("option",{value:""},"-- ",Object(c.h)(r.c,{id:"story.type-choose"},"Velg type")," --"),Object(c.h)("option",{value:1,selected:1==i.type?"selected":""},"✍️ ",Object(c.h)(r.c,{id:"story.type-regular"},"Vanlig")),Object(c.h)("option",{value:2,selected:2==i.type?"selected":""},"🚀 ",Object(c.h)(r.c,{id:"story.type-ad"},"Annonse")),Object(c.h)("option",{value:3,selected:3==i.type?"selected":""},"📄 ",Object(c.h)(r.c,{id:"story.type-article"},"Artikkel"))))))),o&&Object(c.h)(e,null,Object(c.h)("div",{class:"col-12 text-center mt-2"},Object(c.h)("div",{class:"container-fluid"},Object(c.h)("div",{class:"row"},n.a.isArray(i.images)&&i.images.map(e=>Object(c.h)("div",{class:"col-3 p-1"},Object(c.h)("img",{src:e.s3SmallLink,class:"img-fluid",onError:this.handleImageErrored}),Object(c.h)("button",{class:"btn btn-sm btn-link",onClick:this.removeImage,"data-name":e.name},Object(c.h)("i",{class:"fas fa-trash"})," Del"))))),Object(c.h)(h.a,{object:i,updateField:this.addImages,before:this.beforeImagesUploaded,after:this.afterImagesUploaded,autoOpen:!0}))),i.type>1&&Object(c.h)(e,null,Object(c.h)("div",{class:"col-12 mt-3"},Object(c.h)("label",null,Object(c.h)(r.c,{id:"story.url-text"},"URL text")),Object(c.h)("div",{class:"form-group"},Object(c.h)("small",null,Object(c.h)("input",{class:"form-control",type:"text",name:"urlText",onInput:Object(d.a)(this,"story.urlText"),value:i.urlText})))),Object(c.h)("div",{class:"col-12 mt-3"},Object(c.h)("label",null,Object(c.h)(r.c,{id:"story.url"},"URL")),Object(c.h)("div",{class:"form-group"},Object(c.h)("small",null,Object(c.h)("input",{class:"form-control",type:"text",name:"url",onInput:Object(d.a)(this,"story.url"),value:i.url}))))),2==i.type&&Object(c.h)(e,null,Object(c.h)("div",{class:"col-12 mt-3"},Object(c.h)("label",null,Object(c.h)(r.c,{id:"story.code"},"Code")),Object(c.h)("div",{class:"form-group"},Object(c.h)("small",null,Object(c.h)("input",{class:"form-control",type:"text",name:"code",onInput:Object(d.a)(this,"story.code"),value:i.code})))),Object(c.h)("div",{class:"col-12"},Object(c.h)("label",null,Object(c.h)(r.c,{id:"story.region"},"Region")),Object(c.h)("div",{class:"form-group"},Object(c.h)("small",null,Object(c.h)("input",{class:"form-control",type:"text",name:"region",onInput:Object(d.a)(this,"story.region"),value:i.region})))),Object(c.h)("div",{class:"col-12"},Object(c.h)("label",null,Object(c.h)(r.c,{id:"story.country"},"Country")),Object(c.h)("div",{class:"form-group"},Object(c.h)("small",null,Object(c.h)("input",{class:"form-control",type:"text",name:"country",onInput:Object(d.a)(this,"story.country"),value:i.country})))),Object(c.h)("div",{class:"col-4"},Object(c.h)("label",null,Object(c.h)(r.c,{id:"story.currency"},"Currency")),Object(c.h)("div",{class:"form-group"},Object(c.h)("small",null,Object(c.h)("input",{class:"form-control",type:"text",name:"currency",onInput:Object(d.a)(this,"story.currency"),value:i.currency})))),Object(c.h)("div",{class:"col-8"},Object(c.h)("label",null,Object(c.h)(r.c,{id:"story.price"},"Price")),Object(c.h)("div",{class:"form-group"},Object(c.h)("small",null,Object(c.h)("input",{class:"form-control",type:"text",name:"price",onInput:Object(d.a)(this,"story.price"),value:i.price}))))))))))}})||o;t.a=m}).call(this,s("hosL").Fragment)},B95u:function(e,t,s){"use strict";(function(e){function a(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,a)}return s}function i(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?a(Object(s),!0).forEach((function(t){o(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):a(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function o(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}var c,n=s("hosL"),l=s("Utv1"),r=s("/eY4"),d=s("cneo"),h=s("OhSV"),b=s("fh8t"),p=s.n(b),m=s("go65"),u=s("5uob"),g=(s("ETxl"),s("ZOvn"));const O={showAddComment:{},showAllComments:!1,showAllReplies:{},viewImageIdx:{},likeComment:{},likeReply:{},showOriginal:{}};let j=Object(r.a)(c=class extends n.Component{constructor(e){var t;super(e),t=this,this.addLikeComment=async function(e){const{callback:s=(()=>{})}=t.props,a=e.target.closest(".commentContainer").dataset.id,{story:i}=t.props,{storyStore:o}=t.props.stores,{likeComment:c}=t.state;c[a]=!0,t.setState({likeComment:c}),setTimeout(()=>{const{likeComment:e}=t.state;delete e[a],t.setState({likeComment:e})},1200);const n=await o.likeStoryComment({id:i.id,commentId:a});return n&&200===n.status&&s({type:"likeComment",story:i,commentId:a,response:n}),!0},this.likeReply=async function(e){const{callback:s=(()=>{})}=t.props,a=e.target.closest(".replyContainer").dataset.id,i=e.target.closest(".replyContainer").dataset.comment,{story:o}=t.props,{storyStore:c}=t.props.stores,{likeReply:n}=t.state;n[a]=!0,t.setState({likeReply:n}),setTimeout(()=>{const{likeReply:e}=t.state;delete e[a],t.setState({likeReply:e})},1200);const l=await c.likeStoryCommentReply({id:o.id,replyId:a,commentId:i});l&&200===l.status&&s({type:"likeReply",story:o,commentId:i,replyId:a,response:l})},this.replyComment=async function(e){const s=e.target.parentElement.dataset.id||e.target.dataset.id,{showAddComment:a}=t.state;a[s]=!a[s],t.setState({showAddComment:a},()=>{t.inputRef[s]&&t.inputRef[s].focus()})},this.toggleComments=()=>{const{showAllComments:e}=this.state;this.setState({showAllComments:!e})},this.toggleReplies=e=>{const t=e.target.parentElement.dataset.id||e.target.dataset.id,{showAllReplies:s}=this.state;s[t]=!s[t],this.setState({showAllReplies:s})},this.toggleMenu=e=>{const{id:t}=e.target.closest("i").dataset,{showMenu:s={}}=this.state;s[t]=!s[t],this.setState({showDeleteComment:{},showEdit:{},showMenu:s})},this.toggleEdit=e=>{const{id:t,comment:s}=e.target.closest("button").dataset,{showEdit:a={}}=this.state;a[t]=!a[t],this.setState({showDeleteComment:{},showEdit:a,showMenu:{},commentEditText:s})},this.toggleDeleteComment=e=>{const{id:t}=e.target.closest("button").dataset,{showDeleteComment:s={}}=this.state;s[t]=!s[t],this.setState({showDeleteComment:s,showEdit:{},showMenu:{}})},this.deleteComment=async function(e){const{id:s}=e.target.closest("button").dataset,{story:a}=t.props,{storyStore:i}=t.props.stores;await i.deleteCommentStory({id:a.id,commentId:s}),t.setState({commentEditText:"",showDeleteComment:{},showEdit:{},showMenu:{}})},this.deleteCommentReply=async function(e){const{id:s,commentid:a}=e.target.closest("button").dataset,{story:i}=t.props,{storyStore:o}=t.props.stores;await o.deleteCommentReplyStory({id:i.id,commentId:a,replyId:s}),t.setState({commentEditText:"",showDeleteComment:{},showEdit:{},showMenu:{}})},this.saveComment=async function(e){const{id:s}=e.target.closest("button").dataset,{commentEditText:a}=t.state,{story:i}=t.props,{storyStore:o}=t.props.stores;await o.editCommentStory({id:i.id,commentId:s,comment:a}),t.setState({commentEditText:"",showDeleteComment:{},showEdit:{},showMenu:{}})},this.saveCommentReply=async function(e){const{id:s,commentid:a}=e.target.closest("button").dataset,{commentEditText:i}=t.state,{story:o}=t.props,{storyStore:c}=t.props.stores;await c.editCommentReplyStory({id:o.id,commentId:a,replyId:s,comment:i}),t.setState({commentEditText:"",showDeleteComment:{},showEdit:{},showMenu:{}})},this.viewImage=e=>{const{id:t,idx:s}=e.target.closest("img").dataset,{viewImageIdx:a}=this.state;a[t]=s,this.setState({viewImageIdx:a})},this.translate=async function(e){e.preventDefault(),e.stopPropagation();const{replyid:s,commentid:a}=e.target.closest("button").dataset,{story:i}=t.props,{userStore:o,storyStore:c}=t.props.stores,{user:n}=o,{showOriginal:l={},translatedText:r={}}=t.state,d=`${a}${s?"-"+s:""}`;l[d]=0,r[d]=s?await c.translateCommentReply({commentid:a,replyid:s,story:i,user:n}):await c.translateComment({commentid:a,story:i,user:n}),t.setState({showOriginal:l,translatedText:r})},this.showOriginal=e=>{const{replyid:t,commentid:s}=e.target.closest("button").dataset;e.preventDefault(),e.stopPropagation();const{showOriginal:a={}}=this.state;a[`${s}${t?"-"+t:""}`]=1,this.setState({showOriginal:a})},this.state=i(i({},O),{},{showAllComments:e.showAllComments}),this.inputRef={}}render(){const{showAddComment:t,showAllComments:s,showAllReplies:a,viewImageIdx:i,showMenu:o={},showEdit:c={},showDeleteComment:r={},commentEditText:b,likeComment:O,showOriginal:j={},translatedText:f={}}=this.state,{story:v,callback:y=(()=>{}),initCall:w=(()=>{}),compact:x=!1}=this.props,{userStore:k,storyStore:S}=this.props.stores,{user:I}=k,{language:C="en"}=I;let T,D=[],A=0,R=0;return v.comments&&(A=v.comments.length,s?D=v.comments:(T=x?0:2,D=v.comments.slice(Math.max(A-T,0))),R=D.length),Object(n.h)("div",null,v&&l.a.isArray(D)&&D.reverse().map(s=>{const{user:x={}}=s,k=S.findPublicTeamByMembers(x.id),D=g.a.displayNameShort(x),A=g.a.displayName(x),R=x.image||(x.images?x.images[0]:void 0),P=s.likes&&s.likes.findIndex(e=>e.user===I.id)>-1;let z=[],F=0,U=0;s.comments&&(F=s.comments.length,z=a[s.id]?s.comments:s.comments.slice(0,T),U=z.length);const E=[];if(s.images){const e=Object(d.i)(s.images);E.push(...e)}const $=i[s.id]?i[s.id]:0,L=E&&E[$]?E[$]:null,{currentLocationGeocode:M={}}=s,N=S.getCommentTranslations({story:v,commentid:s.id,targetLang:C})||f[s.id];let B=N||s.comment;return j[s.id]&&(B=s.comment),Object(n.h)("div",{class:"row"},Object(n.h)("div",{class:"col-11 offset-1 d-flex mb-2 position-relative"},Object(n.h)("div",{class:"text-center border rounded-circle imageRounded imageRoundedSmall",style:(R?`background-image: url("${R.s3SmallLink}"); background-size: cover;`:"")+" border-width: 3px !important;"},!x.image&&Object(n.h)("span",{class:"font-weight-lighter",style:"font-size: 15px;"},D)),Object(n.h)("div",{class:"flex-grow-1 pl-3 pt-0",style:"line-height: 1.2em;"},Object(n.h)("div",{class:"bg-light p-2 rounded rounded-lg position-relative"},I.id===x.id&&Object(n.h)(e,null,Object(n.h)("span",{class:"float-right font-weight-lighter text-muted"},Object(n.h)("i",{class:"fas fa-ellipsis-h",onClick:this.toggleMenu,"data-id":s.id}))),o[s.id]&&Object(n.h)(e,null,Object(n.h)("div",{class:"position-absolute bg-white p-2 border rounded rounded-lg shadow-sm",style:"top: 30px; right: 10px; width: 60%; z-index: 999999;"},Object(n.h)("button",{class:"btn btn-link btn-block text-left",onClick:this.toggleEdit,"data-id":s.id,"data-comment":s.comment},Object(n.h)("i",{class:"fas fa-edit"})," Edit"),Object(n.h)("hr",null),Object(n.h)("button",{class:"btn btn-link btn-block text-left",onClick:this.toggleDeleteComment,"data-id":s.id},Object(n.h)("i",{class:"fas fa-trash-alt"})," Delete"))),Object(n.h)("div",null,Object(n.h)("span",{style:"font-size: 0.95em;"},Object(n.h)("h5",{class:"font-weight-bold mb-2",style:"font-size: 1.0em;"},x.uuidv4&&x.uuidv4!==I.uuidv4?Object(n.h)(e,null,Object(n.h)("a",{href:"/inbox/"+x.uuidv4},A)):Object(n.h)(e,null,A),k&&k.length>0&&Object(n.h)(e,null,Object(n.h)("span",{class:"font-weight-lighter text-muted ml-1"},k.filter(e=>1===e.public).slice(0,1).map(t=>Object(n.h)(e,null,"- ",Object(n.h)("a",{href:"/teams/public/"+t.uuidv4},t.name)))))),c[s.id]?Object(n.h)(e,null,Object(n.h)("div",{class:"d-flex bd-highlight"},Object(n.h)("div",{class:"p-0 w-100 bd-highlight"},Object(n.h)("label",{class:"sr-only",for:"inlineFormInput"},Object(n.h)(h.c,{id:"comments.comment"},"Kommentar")),Object(n.h)("div",{class:"border rounded rounded-lg position-relative"},Object(n.h)(h.b,null,Object(n.h)("textarea",{class:"form-control-plaintext px-2",type:"text",placeholder:Object(n.h)(h.c,{id:"comments.write-comment"},"Skriv en kommentar..."),onInput:Object(m.a)(this,"commentEditText"),onKeyUp:g.a.resizeTextarea,onFocus:g.a.resizeTextarea,style:"height: 2.3em;",value:b})))),Object(n.h)("div",{class:"p-0 pl-2 flex-shrink-1 bd-highlight"},Object(n.h)("button",{type:"button",class:"btn btn-primary mb-2",onClick:this.saveComment,"data-id":s.id},Object(n.h)("i",{class:"fas fa-paper-plane"}))))):Object(n.h)(e,null,Object(n.h)(p.a,{markdown:g.a.replaceImages(B,s.images,C),markdownOpts:g.a.getMarkdownOptions()})),r[s.id]&&Object(n.h)("div",{class:"clearfix mt-3 mb-3"},Object(n.h)("button",{class:"btn btn-danger float-left",onClick:this.deleteComment,"data-id":s.id},Object(n.h)("i",{class:"fas fa-trash-alt"})," Delete"),Object(n.h)("button",{class:"btn btn-secondary float-right",onClick:this.toggleDeleteComment,"data-id":s.id},Object(n.h)("i",{class:"fas fa-times-circle"})," Cancel")))),Object(n.h)("div",null,Object(n.h)("div",{class:"container-fluid px-3 mt-1"},L&&Object(n.h)("div",{class:"clearfix row position-relative"},Object(n.h)("div",{class:"commentContainer col-12 px-0 overflow-hidden",style:"max-height: 60vh;",onDblclick:this.addLikeComment,"data-id":s.id},Object(n.h)("img",{loading:"lazy",class:"img-fluid",style:"min-width: 100px;",src:L.s3LargeLink})),O[s.id]&&Object(n.h)("span",{class:"likeHeart position-absolute text-white display-1",style:"top: calc(50% - 50px); left: calc(50% - 50px); width: 100px; height: 100px;"},Object(n.h)("i",{class:"fas fa-heart likeStory"}))),E&&E.length>1&&Object(n.h)("div",{class:"clearfix d-flex flex-wrap row"},l.a.isArray(E)&&E.map((t,a)=>Object(n.h)(e,null,Object(n.h)("div",{class:"col px-0 overflow-hidden",style:"max-height: 100px; min-width: 100px;"},Object(n.h)("img",{loading:"lazy",class:"img-fluid border",style:"min-width: 100px;",src:t.s3SmallLink,onClick:this.viewImage,"data-id":s.id,"data-idx":a})))))))),Object(n.h)("small",null,Object(n.h)("button",{class:"commentContainer btn btn-sm btn-link py-0 "+(P?"text-primary":""),onClick:this.addLikeComment,"data-id":s.id,disabled:P},P?Object(n.h)(h.c,{id:"comments.has-liked"},"Liked"):Object(n.h)(h.c,{id:"comments.like"},"Lik")),"-",Object(n.h)("button",{class:"btn btn-sm btn-link py-0",onClick:this.replyComment,"data-id":s.id},Object(n.h)(h.c,{id:"comments.comment-add"},"Kommentar")),s.language!==C&&Object(n.h)(e,null,"-",!j[s.id]&&N?Object(n.h)(e,null,Object(n.h)("button",{type:"button",class:"btn btn-sm btn-link","data-commentid":s.id,onClick:this.showOriginal},Object(n.h)("i",{class:"fas fa-cog"}),"  ",Object(n.h)(h.c,{id:"home.translate-show-original"},"Show original"))):Object(n.h)(e,null,Object(n.h)("button",{type:"button",class:"btn btn-sm btn-link",onClick:this.translate,"data-commentid":s.id},Object(n.h)("i",{class:"fas fa-cog"})," ",Object(n.h)(h.c,{id:"home.translate-to"},"See translation")))),"-",Object(n.h)("button",{class:"btn btn-sm btn-link py-0 disabled"},l.a.formatDistance(s.createdDate,new Date,{locale:"no-NB"}),s.updatedDate&&Object(n.h)(e,null,Object(n.h)("span",{class:"font-weight-light ml-2"},"(Edited ",l.a.formatDistance(s.updatedDate,new Date,{locale:"no-NB"}),")"))))),s.likes&&s.likes.length>0&&Object(n.h)("small",{class:"position-absolute bg-light shadow-sm rounded-lg py-0 px-1",style:"bottom: 20px; right: 15px;"},Object(n.h)("i",{class:"fas fa-thumbs-up text-primary"})," ",s.likes.length)),Object(n.h)("div",{class:"col-10 offset-2 mb-2"},s&&l.a.isArray(z)&&z.map(t=>{const{user:a={}}=t,i=S.findPublicTeamByMembers(a.id),d=g.a.displayNameShort(a),u=g.a.displayName(a),O=a.image||(a.images?a.images[0]:void 0),y=t.likes&&t.likes.findIndex(e=>e.user===I.id)>-1,{currentLocationGeocode:w={}}=t,x=S.getCommentReplyTranslations({story:v,commentid:s.id,replyid:t.id,targetLang:C})||f[`${s.id}-${t.id}`];let k=x||t.comment;return j[`${s.id}-${t.id}`]&&(k=t.comment),Object(n.h)("div",{class:"row"},Object(n.h)("div",{class:"col-12 d-flex mb-2 position-relative"},Object(n.h)("div",{class:"text-center border rounded-circle imageRounded imageRoundedSmall",style:(O?`background-image: url("${O.s3SmallLink}"); background-size: cover;`:"")+" border-width: 3px !important;"},!a.image&&Object(n.h)("span",{class:"font-weight-lighter",style:"font-size: 15px;"},d)),Object(n.h)("div",{class:"flex-grow-1 pl-3 pt-0",style:"line-height: 1.2em;"},Object(n.h)("div",{class:"bg-light p-2 rounded-lg position-relative"},I.id===a.id&&Object(n.h)(e,null,Object(n.h)("span",{class:"float-right font-weight-lighter text-muted"},Object(n.h)("i",{class:"fas fa-ellipsis-h",onClick:this.toggleMenu,"data-id":t.id}))),o[t.id]&&Object(n.h)(e,null,Object(n.h)("div",{class:"position-absolute bg-white p-2 border rounded rounded-lg shadow-sm",style:"top: 30px; right: 10px; width: 60%; z-index: 999999;"},Object(n.h)("button",{class:"btn btn-link btn-block text-left",onClick:this.toggleEdit,"data-id":t.id,"data-comment":t.comment},Object(n.h)("i",{class:"fas fa-edit"})," Edit"),Object(n.h)("hr",null),Object(n.h)("button",{class:"btn btn-link btn-block text-left",onClick:this.toggleDeleteComment,"data-id":t.id},Object(n.h)("i",{class:"fas fa-trash-alt"})," Delete"))),Object(n.h)("span",{style:"font-size: 0.95em;"},Object(n.h)("h5",{class:"font-weight-bold mb-2",style:"font-size: 1.0em;"},u,i&&i.length>0&&Object(n.h)(e,null,Object(n.h)("span",{class:"font-weight-lighter text-muted ml-2"},i.filter(e=>1===e.public).slice(0,1).map(t=>Object(n.h)(e,null,"- ",Object(n.h)("a",{href:"/teams/public/"+t.uuidv4,class:"mr-2"}," ",t.name)))))),c[t.id]?Object(n.h)(e,null,Object(n.h)("div",{class:"d-flex bd-highlight"},Object(n.h)("div",{class:"p-0 w-100 bd-highlight"},Object(n.h)("label",{class:"sr-only",for:"inlineFormInput"},Object(n.h)(h.c,{id:"comments.comment"},"Kommentar")),Object(n.h)("div",{class:"border rounded rounded-lg position-relative"},Object(n.h)(h.b,null,Object(n.h)("textarea",{class:"form-control-plaintext px-2",type:"text",placeholder:Object(n.h)(h.c,{id:"comments.write-comment"},"Skriv en kommentar..."),onInput:Object(m.a)(this,"commentEditText"),onKeyUp:g.a.resizeTextarea,onFocus:g.a.resizeTextarea,style:"height: 2.3em;",value:b})))),Object(n.h)("div",{class:"p-0 pl-2 flex-shrink-1 bd-highlight"},Object(n.h)("button",{type:"button",class:"btn btn-primary mb-2",onClick:this.saveCommentReply,"data-commentid":s.id,"data-id":t.id},Object(n.h)("i",{class:"fas fa-paper-plane"}))))):Object(n.h)(e,null,Object(n.h)(p.a,{markdown:g.a.replaceImages(k,t.images,C),markdownOpts:g.a.getMarkdownOptions()})),r[t.id]&&Object(n.h)("div",{class:"clearfix mt-3 mb-3"},Object(n.h)("button",{class:"btn btn-danger float-left",onClick:this.deleteCommentReply,"data-id":t.id,"data-commentid":s.id},Object(n.h)("i",{class:"fas fa-trash-alt"})," Delete"),Object(n.h)("button",{class:"btn btn-secondary float-right",onClick:this.toggleDeleteComment,"data-id":t.id},Object(n.h)("i",{class:"fas fa-times-circle"})," Cancel")))),Object(n.h)("small",null,Object(n.h)("button",{class:"replyContainer btn btn-sm btn-link py-0 "+(y?"text-primary":""),onClick:this.likeReply,"data-comment":s.id,"data-id":t.id,disabled:y},y?Object(n.h)(h.c,{id:"comments.has-liked"},"Liked"):Object(n.h)(h.c,{id:"comments.like"},"Lik")),"-",Object(n.h)("button",{class:"btn btn-sm btn-link py-0",onClick:this.replyComment,"data-id":s.id},Object(n.h)(h.c,{id:"comments.comment-add"},"Kommentar")),t.language!==C&&Object(n.h)(e,null,"-",!j[`${s.id}-${t.id}`]&&x?Object(n.h)(e,null,Object(n.h)("button",{type:"button",class:"btn btn-sm btn-link","data-commentid":s.id,"data-replyid":t.id,onClick:this.showOriginal},Object(n.h)("i",{class:"fas fa-cog"}),"  ",Object(n.h)(h.c,{id:"home.translate-show-original"},"Show original"))):Object(n.h)(e,null,Object(n.h)("button",{type:"button",class:"btn btn-sm btn-link",onClick:this.translate,"data-commentid":s.id,"data-replyid":t.id},Object(n.h)("i",{class:"fas fa-cog"})," ",Object(n.h)(h.c,{id:"home.translate-to"},"See translation")))),"-",Object(n.h)("button",{class:"btn btn-sm btn-link py-0 disabled"},l.a.formatDistance(t.createdDate,new Date,{locale:"no-NB"}),t.updatedDate&&Object(n.h)(e,null,Object(n.h)("span",{class:"font-weight-light ml-2"},"(Edited ",l.a.formatDistance(t.updatedDate,new Date,{locale:"no-NB"}),")"))))),t.likes&&Object(n.h)("small",{class:"position-absolute bg-light shadow-sm rounded-lg py-0 px-1",style:"bottom: 20px; right: 15px;"},Object(n.h)("i",{class:"fas fa-thumbs-up text-primary"})," ",t.likes.length)))}),F-U>0&&Object(n.h)("div",null,Object(n.h)("button",{class:"btn btn-sm btn-link py-0",onClick:this.toggleReplies,"data-id":s.id},Object(n.h)(h.c,{id:"comments.show-more",fields:{more:F-U}},"Vis ",F-U," flere kommentarer...")))),t[s.id]&&Object(n.h)("div",{class:"col-11 offset-1 d-flex mb-2 position-relative"},Object(n.h)(u.a,{stores:this.props.stores,story:v,initCall:w,callback:y,commentId:s.id,inputRef:e=>this.inputRef[s.id]=e,inputRefObject:this.inputRef,key:"story-commentreply-"+s.id})))}),A-R>0&&Object(n.h)("div",null,Object(n.h)("button",{class:"btn btn-sm btn-link py-0",onClick:this.toggleComments},Object(n.h)(h.c,{id:"comments.show-more",fields:{more:A-R}},"Vis ",A-R," flere kommentarer..."))),s&&Object(n.h)("div",null,Object(n.h)("button",{class:"btn btn-sm btn-link py-0",onClick:this.toggleComments},Object(n.h)(h.c,{id:"comments.hide-all-comments"},"Skjul alle kommentarene."))))}})||c;t.a=j}).call(this,s("hosL").Fragment)},ETxl:function(e){e.exports={hoverelementonly:"hoverelementonly__1mJGJ",hoverElement:"hoverElement__axh3O",hoverelementhide:"hoverelementhide__1k_qH","progress-bar-vertical":"progress-bar-vertical__1B2sC","progress-bar":"progress-bar__pnsVj",dragged:"dragged__QXO46",over:"over__1re3x",list:"list__q_emZ"}},HGwV:function(e,t,s){"use strict";(function(e){function a(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,a)}return s}function i(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}var o,c=s("hosL"),n=(s("QRet"),s("Utv1"),s("/eY4")),l=(s("OhSV"),s("Y3FI")),r=s("zYNi"),d=s("ZOvn");const h=d.a.marginTop(!0,!1),b=(d.a.marginTopBack(!1),d.a.marginBottom(),d.a.subMenuMarginTop(),{isLoading:!1});let p=Object(n.a)(o=class extends c.Component{constructor(e){super(e),this.back=()=>{const{raceid:e}=this.props;Object(l.route)(`/app-races/${e}/about`)},this.state=function(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?a(Object(s),!0).forEach((function(t){i(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):a(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}({},b),this.updateTimer={}}render(){const{userStore:t}=this.props.stores,{user:s={},teams:a=[]}=t,{raceid:i}=this.props;return Object(c.h)(e,null,Object(c.h)("div",{class:"container-fluid position-relative p-0",style:`margin-top: 0; height: calc(100vh - ${h}); z-index: 9999;`},Object(c.h)(r.a,{stores:this.props.stores,raceid:i})))}})||o;t.a=p}).call(this,s("hosL").Fragment)},"HQo+":function(e,t,s){"use strict";(function(e){function a(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,a)}return s}function i(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}var o,c=s("hosL"),n=(s("Utv1"),s("/eY4")),l=(s("OhSV"),s("cneo"),s("HqZR"));s("ZOvn");const r={showAddComment:!1};let d=Object(n.a)(o=class extends c.Component{constructor(e){super(e),this.state=function(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?a(Object(s),!0).forEach((function(t){i(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):a(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}({},r),this.updateTimer={},this.inputRef={}}async loadTrack(e=this.props){const{showHeatmap:t,raceid:s,allTeamIds:a}=e,{adminStore:i,trackStore:o,raceStore:c,appState:n}=e.stores,{selectedClassIds:l=[]}=n;t&&await i.getPublicHeatmap(s,a);const r=c.getTrackIdsByClass(l[0]);r&&r.length>0&&(o.cleanupMemory(),await o.loadPublic({query:{idin:r}}))}componentDidMount(){this.loadTrack()}componentWillReceiveProps(e){this.props.selectedClassIds!==e.selectedClassIds&&this.loadTrack(e)}render(){const{trackStore:t,raceStore:s,appState:a,adminStore:i}=this.props.stores,{selectedClassIds:o=[]}=a,{waypoints:n,waypoints2:r,waypoints3:d,zoomToMarkers:h,fullscreenMap:b,onMarkerClick:p,showHeatmap:m,showTracks:u,showDistanceMarkers:g,groupWaypoints:O,focusOnMushers:j,geoJSONs:f}=this.props,{tracks:v}=t,{publicHeatmap:y}=i,w=v[0];s.getTrackIdsByClass();return Object(c.h)(e,null,Object(c.h)(l.a,{stores:this.props.stores,heatmap:m?y:null,track:w,geojson:u&&w&&w.gpx?w.gpx.geoJSON:null,gpxInfo:u&&w&&(w.gpx||w.gpxInfo)?w.gpxInfo||w.gpx.gpxInfo:null,minZoom:2,maxZoom:18,height:600,waypoints:n,waypoints2:r,waypoints3:d,geoJSONs:f,zoomToMarkers:h,fullscreenMap:b,onMarkerClick:p,showTrackProfile:!1,distanceMarkerSteps:"long",showDistanceMarkers:g,groupWaypoints:O,focusOnMushers:j,showFullscreenControl:!1}))}})||o;t.a=d}).call(this,s("hosL").Fragment)},HqZR:function(e,t,s){"use strict";(function(e){function a(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,a)}return s}function i(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?a(Object(s),!0).forEach((function(t){o(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):a(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function o(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function c(e){return.621371*e}var n,l=s("hosL"),r=s("Utv1"),d=s("/eY4"),h=s("cneo"),b=s("fh8t"),p=s.n(b),m=s("6FDT"),u=s.n(m),g=s("ABWa"),O=s.n(g),j=s("ZOvn"),f=s("5eBG"),v=s("/mwY"),y=s("8bLb"),w=s("P2xA"),x=s("FTgN"),k=s("/kKD"),S=s("+5/p"),I=s("9rGW"),C=s("zHmd"),T=s.n(C),D=s("Dq2H"),A=s.n(D),R=(s("yDvG"),s("G5DU")),P=s.n(R),z=s("68RK"),F=(s("A1fj"),s("ivZ3")),U=s.n(F);const E={pedantic:!1,gfm:!0,breaks:!0,sanitize:!1,smartLists:!0,smartypants:!0,xhtml:!0},{BaseLayer:$,Overlay:L}=f.b;delete U.a.Icon.Default.prototype._getIconUrl,U.a.Icon.Default.mergeOptions({iconRetinaUrl:s("sqja"),iconUrl:s("Drvj"),shadowUrl:s("K5o1")});const M=function(e){return U.a.divIcon({html:`<span>${e.getChildCount()}</span>`,className:O.a["marker-cluster-custom"],iconSize:U.a.point(40,40,!0)})};let N=Object(d.a)(n=class extends l.Component{constructor(e){super(e),this.mapRef=Object(l.createRef)(),this.polyRef=Object(l.createRef)(),this.handleViewportChanged=e=>{this.setState({mapCenter:e.center,mapZoom:e.zoom})},this.handleLocationFound=e=>{e.latlng&&this.setState({hasLocation:!0,latlng:e.latlng})},this.onEachFeature=(e,t)=>{const{gpxInfo:s={}}=this.props,a=`<Popup>\n\t\t\t<h5>Details</h5>\n\t\t\t<ul>\n\t\t\t\t<li>Total distance: ${r.a.format(s.totalDistance,2)} km</li>\n\t\t\t\t<li>Max speed: ${r.a.format(s.maxSpeed,1)} km/t</li>\n\t\t\t\t<li>Avg speed: ${r.a.format(s.avgSpeed,1)} km/t</li>\n\t\t\t\t<li>Ascent: ${r.a.format(s.ascent||s.calculatedAscend,0)} m</li>\n\t\t\t\t<li>Descent: ${r.a.format(s.decent||s.calculatedDescend,0)} m</li>\n\t\t\t\t<li>Duration: ${r.a.secToHms(s.duration)}</li>\n\t\t\t</ul>\n\t\t</Popup>`;t.bindPopup(a)},this.handleClick=e=>{const{appState:t}=this.props.stores;t.setLatlng(e.latlng)},this.zoomToGeoJSON=e=>{try{if(e.target){let t=e.target.getBounds();t&&t._northEast&&this.setState({bounds:t})}}catch(e){console.log(e)}},this.zoomToMarkers=(e=[],t=!1)=>{const{hasZoomedToMarkers:s}=this.state;try{if((t||!s)&&e.length&&e.length>0){const t=this.mapRef.current.leafletElement,s=U.a.latLngBounds([]);e.forEach(e=>{s.extend([e.lat,e.lng])}),t.fitBounds(s),this.setState({hasZoomedToMarkers:!0})}}catch(e){console.log(e)}},this.zoomToAllMarkers=()=>{const{waypoints:e=[]}=this.props;this.zoomToMarkers(e,!0)},this.zoomToFavoriteMarkers=()=>{const{zoomToMarkers:e=[],waypoints:t=[]}=this.props;this.zoomToMarkers(e.length>0?e:t,!0)},this.overlayAdd=e=>{const{name:t}=e,{visibleLayers:s}=this.state;s[t]=!0,this.setState({visibleLayers:s})},this.overlayRemove=e=>{const{name:t}=e,{visibleLayers:s}=this.state;s[t]=!1,this.setState({visibleLayers:s})},this.polylineOptions=()=>{const{gpxInfo:e}=this.props,{rangeSteps:t}=this.state;let{maxHslColor:s}=this.state;const{appState:a}=this.props.stores,{mapColorMode:i,mapRangeMin:o,mapRangeMax:c}=a;let n=o,l=c;"speed"===i&&e&&e.speeds&&e.speeds.length>0&&(n=Math.floor(Math.min(...e.speeds.map(e=>3.6*e))),l=Math.ceil(Math.max(...e.speeds.map(e=>3.6*e))));const d=r.a.range(n,l,t),h=d.map(e=>{const t=function(e,t,s,a,i){return a+(e-t)*(i-a)/(s-t)}(e,n,l,0,s);let a;a=s-t;const{r:i,g:o,b:c}=r.a.hsl2Rgb(a,100,45);return{color:`rgb(${i}, ${o}, ${c})`}});return a.setMapRange(d,n,l),a.setMapColors(h),h},this.polylineOptionIdxFn=e=>{const{appState:t}=this.props.stores,{mapRange:s}=t;for(let t=0;t<s.length;++t)if(e.meta<=s[t])return t;return s.length},this.polylinetrackPointFactory=e=>{const{gpxInfo:t}=this.props,{appState:s}=this.props.stores,{mapColorMode:a,mapRangeMin:i,mapRangeMax:o}=s;let c=[];"speed"===a&&t.speeds&&t.speeds.length>0?c=t.speeds.map(e=>3.6*e):t&&t.climbs&&(c=t.climbs);return e.filter(e=>e[0]&&e[1]&&e[2]).map((e,t)=>{const s=U.a.latLng(e[1],e[0],e[2]);return c&&c.length>0?(s.meta=c[t]||0,s.meta>o&&(s.meta=o),s.meta<i&&(s.meta=i)):s.meta=0,s})},this.showSpeed=()=>{const{appState:e}=this.props.stores;e.setMapColorMode("speed")},this.handleMarkerClick=(e={})=>{const{onMarkerClick:t=(({title:e,bib:t})=>console.log({title:e,bib:t}))}=this.props;try{t(i({},e))}catch(e){console.log(e)}},this.baseLayerChange=e=>{const{name:t}=e;console.log("baseLayerChange event",e),console.log({name:t});const{appState:s}=this.props.stores;s.setMapChecked(t)},this.whenReadyHandler=e=>{const{target:t}=e;t.on("baselayerchange",this.baseLayerChange)},this.state={hasLocation:!1,visibleLayers:{Windspeed:!1},mapCenter:[],mapZoom:10,rangeSteps:1,maxHslColor:230,hasZoomedToMarkers:!1}}geoJSONStyle(){return{color:"#0347A2",weight:5,fillOpacity:.5,fillColor:"#0347A2"}}geoJSONStyleList(e){const t=j.a.getRankingColor(e+1);return{color:t,weight:3,fillOpacity:.5,fillColor:t}}componentWillReceiveProps(e){this.props.zoomToMarkers!==e.zoomToMarkers?this.zoomToMarkers(e.zoomToMarkers,!0):this.props.waypoints!==e.waypoints&&this.zoomToMarkers(e.waypoints)}componentWillUnmount(){}render(){const{userStore:t,appState:s}=this.props.stores,{mapChecked:a}=s,{user:o}=t,{settings:n={}}=o,{visibleLayers:d,mapZoom:b,bounds:m=null}=this.state,{waypoints:g=[],waypoints2:C=[],waypoints3:D=[],geoJSONs:R=[],zoomToMarkers:F=[],geojson:N,gpxInfo:B,mapId:H=1,center:V=[61.0779066,9.800984],zoom:_=5,minZoom:K=4,maxZoom:Y=18,darkmode:W,height:Z=500,heatmap:q=[],skipGeojson:J=!1,zoomToWaypoints:G=!1,fullscreenMap:Q=!1,showSearch:X=!0,showZoomControl:ee=!0,showLayersControl:te=!0,showFullscreenControl:se=!0,showScaleControl:ae=!0,showRange:ie=!0,showTrackProfile:oe=!0,distanceMarkerSteps:ce="normal",showDistanceMarkers:ne=!0,groupWaypoints:le=!0,layersControlPosition:re="topright"}=this.props,{mapColorMode:de,mapRange:he,mapColors:be,mapRangeMin:pe,mapRangeMax:me}=s,ue=Object(h.i)(N),ge=r.a.asObject(ue,"features",0,"geometry","coordinates"),Oe=F.length>0||g.length>0;let je,fe;const ve=[];if(ge&&ge[0]&&ge[0][0]&&(je=ge[0][0]&&ge[0][0][0]?[ge[0][0][1],ge[0][0][0]]:[ge[0][1],ge[0][0]],fe=ge[ge.length-1][0]&&ge[ge.length-1][0][0]?[ge[ge.length-1][0][1],ge[ge.length-1][0][0]]:[ge[ge.length-1][1],ge[ge.length-1][0]],B&&B.distances)){let e=0,t=0,s=10;switch(b){case 15:s="long"===ce?3:1;break;case 14:s="long"===ce?5:2;break;case 13:s="long"===ce?7:3;break;case 12:s="long"===ce?10:5;break;case 11:case 10:s="long"===ce?15:10;break;case 9:s="long"===ce?20:15;break;case 8:s="long"===ce?30:20;break;case 7:s="long"===ce?40:30;break;case 6:s="long"===ce?70:50;break;case 5:s="long"===ce?150:100;break;default:s="long"===ce?200:150}B.distances.forEach((a,i)=>{e+=n.imperial?c(a):a,t+=n.imperial?c(a):a,t>=s&&(t=0,ge[i]&&Array.isArray(ge[i])&&ve.push({lat:ge[i][1],lng:ge[i][0],title:Math.floor(e),body:""}))})}const{isAdmin:ye}=t;return Object(l.h)(e,null,Object(l.h)("div",{class:O.a.home+" w-100 h-100 overflow-hidden position-relative",onTouchmove:j.a.captureAllEvents,onScroll:j.a.captureAllEvents},Object(l.h)(v.a,{bounds:m,ref:this.mapRef,onViewportChanged:this.handleViewportChanged,minZoom:K,maxZoom:Y,center:V,onLocationfound:this.handleLocationFound,zoom:_,zoomControl:ee,doubleClickZoom:!0,scrollWheelZoom:!0,dragging:Q||!U.a.Browser.mobile,tap:!U.a.Browser.mobile,touchZoom:!!U.a.Browser.mobile&&"center",animate:!0,easeLinearity:.35,style:`width: 100%; min-height: ${Z}px; height: 100%;`,className:"h-100",onOverlayadd:this.overlayAdd,onOverlayremove:this.overlayRemove,whenReady:this.whenReadyHandler},te&&Object(l.h)(f.b,{position:re},Object(l.h)($,{checked:"OpenStreetMap.Mapnik"===a,name:"OpenStreetMap.Mapnik"},Object(l.h)(y.a,{attribution:'&copy <a href="http://osm.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"})),Object(l.h)($,{checked:"OpenStreetMap.Dark"===a,name:"OpenStreetMap.Dark"},Object(l.h)(y.a,{attribution:'© <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors, © Map tiles by Carto, under CC BY 3.0. Data by OpenStreetMap, under ODbL.',url:"https://cartodb-basemaps-{s}.global.ssl.fastly.net/dark_all/{z}/{x}/{y}.png"})),Object(l.h)($,{checked:"Norway Kartverket topo4"===a,name:"Norway Kartverket topo4"},Object(l.h)(y.a,{subdomains:["opencache","opencache2","opencache3"],attribution:'&copy <a href="http://kartverket.no">Kartverket</a>',url:"https://{s}.statkart.no/gatekeeper/gk/gk.open_gmaps?layers=topo4&zoom={z}&x={x}&y={y}"})),Object(l.h)($,{checked:"Norway Kartverket topo4graatone"===a,name:"Norway Kartverket topo4graatone"},Object(l.h)(y.a,{subdomains:["opencache","opencache2","opencache3"],attribution:'&copy <a href="http://kartverket.no">Kartverket</a>',url:"https://{s}.statkart.no/gatekeeper/gk/gk.open_gmaps?layers=topo4graatone&zoom={z}&x={x}&y={y}"})),Object(l.h)($,{checked:"Google Satellite Text"===a,name:"Google Satellite Text"},Object(l.h)(y.a,{subdomains:["mt0","mt1","mt2","mt3"],attribution:'&copy <a href="http://google.com">Google</a>',url:"https://{s}.google.com/vt/lyrs=s,h&x={x}&y={y}&z={z}"})),ye&&Object(l.h)(L,{name:"Windspeed"},Object(l.h)(w.a,{url:"https://maps.openweathermap.org/maps/2.0/weather/WND/{z}/{x}/{y}?use_norm=false&opacity=0.25&palette=0:0073FF; 2:00AAFF; 3:4BD0D6; 6:8DE7C7; 12:B0F720; 25:F3363B; 50:C60000&arrow_step=64&appid=7faae595b3c104f7211880c26bef9778",attribution:"Open weather maps"})),ye&&Object(l.h)(L,{name:"Temperature"},Object(l.h)(w.a,{url:"https://maps.openweathermap.org/maps/2.0/weather/TA2/{z}/{x}/{y}?fill_bound=true&opacity=0.35&appid=7faae595b3c104f7211880c26bef9778",attribution:"Open weather maps"})),ye&&Object(l.h)(L,{name:"Precipitation"},Object(l.h)(w.a,{url:"https://maps.openweathermap.org/maps/2.0/weather/PA0/{z}/{x}/{y}?fill_bound=true&opacity=0.35&appid=7faae595b3c104f7211880c26bef9778",attribution:"Open weather maps"})),ye&&Object(l.h)(L,{name:"Atmospheric pressure"},Object(l.h)(w.a,{url:"https://maps.openweathermap.org/maps/2.0/weather/APM/{z}/{x}/{y}?fill_bound=true&opacity=0.35&appid=7faae595b3c104f7211880c26bef9778",attribution:"Open weather maps"})),ye&&Object(l.h)(L,{name:"Snow depth"},Object(l.h)(w.a,{url:"https://maps.openweathermap.org/maps/2.0/weather/SD0/{z}/{x}/{y}?fill_bound=true&opacity=0.35&appid=7faae595b3c104f7211880c26bef9778",attribution:"Open weather maps"}))),ae&&Object(l.h)(x.a,{metric:!0,imperial:!1}),d.Windspeed&&Object(l.h)(P.a,{position:"bottomright"},Object(l.h)("div",{style:" color: #48484a; display: flex; align-items: center; padding: 2pt 4pt; background-color: #fff; border-radius: 4pt; box-shadow: 0 1px 3px rgba(0,0,0,.12),0 1px 2px rgba(0,0,0,.24); transition: box-shadow .1s ease-out; transition: box-shadow .1s ease-out,-webkit-box-shadow .1s ease-out; margin-bottom: 10px; justify-content: space-between; font-size: 10px; "},Object(l.h)("div",null,"Wind speed, m/s"),Object(l.h)("div",{style:" margin-left: 10px; display: flex; flex-direction: column; "},Object(l.h)("div",{style:"width: 260px; display: flex; justify-content: space-between;",class:"scale-dividers"},Object(l.h)("div",null,"0"),Object(l.h)("div",null,"2"),Object(l.h)("div",null,"3"),Object(l.h)("div",null,"6"),Object(l.h)("div",null,"12"),Object(l.h)("div",null,"25"),Object(l.h)("div",null,"50")),Object(l.h)("div",{style:" width: 260px; height: 5px; // background: rgba(0, 0, 0, 0) linear-gradient(to left, rgb(158, 128, 177), rgba(116, 76, 172, 0.9), rgb(164, 123, 170), rgba(170, 128, 177, 0.84), rgba(176, 128, 177, 0.71), rgba(170, 128, 177, 0.54), rgba(170, 128, 177, 0.44), rgba(255, 255, 0, 0)) repeat scroll 0% 0%; background: linear-gradient(to right, #0073FF,#00AAFF,#4BD0D6,#8DE7C7,#B0F720,#F0B800,#FB5515,#F3363B,#C60000) repeat scroll 0% 0%; "})))),d.Temperature&&Object(l.h)(P.a,{position:"bottomright"},Object(l.h)("div",{style:" color: #48484a; display: flex; align-items: center; padding: 2pt 4pt; background-color: #fff; border-radius: 4pt; box-shadow: 0 1px 3px rgba(0,0,0,.12),0 1px 2px rgba(0,0,0,.24); transition: box-shadow .1s ease-out; transition: box-shadow .1s ease-out,-webkit-box-shadow .1s ease-out; margin-bottom: 10px; justify-content: space-between; font-size: 10px; "},Object(l.h)("div",null,"Temperature, °C"),Object(l.h)("div",{style:" margin-left: 10px; display: flex; flex-direction: column; "},Object(l.h)("div",{style:"width: 260px; display: flex; justify-content: space-between;",class:"scale-dividers"},Object(l.h)("div",null,"-40"),Object(l.h)("div",null,"-20"),Object(l.h)("div",null,"0"),Object(l.h)("div",null,"20"),Object(l.h)("div",null,"40")),Object(l.h)("div",{style:" width: 260px; height: 5px; background-image: linear-gradient(to right, rgb(159, 85, 181) 0%, rgb(44, 106, 187) 8.75%, rgb(82, 139, 213) 12.5%, rgb(103, 163, 222) 18.75%, rgb(142, 202, 240) 25%, rgb(155, 213, 244) 31.25%, rgb(172, 225, 253) 37.5%, rgb(194, 234, 255) 43.75%, rgb(255, 255, 208) 50%, rgb(254, 248, 174) 56.25%, rgb(254, 232, 146) 62.5%, rgb(254, 226, 112) 68.75%, rgb(253, 212, 97) 75%, rgb(244, 168, 94) 82.5%, rgb(244, 129, 89) 87.5%, rgb(244, 104, 89) 93.75%, rgb(244, 76, 73) 100%); "})))),d.Precipitation&&Object(l.h)(P.a,{position:"bottomright"},Object(l.h)("div",{style:" color: #48484a; display: flex; align-items: center; padding: 2pt 4pt; background-color: #fff; border-radius: 4pt; box-shadow: 0 1px 3px rgba(0,0,0,.12),0 1px 2px rgba(0,0,0,.24); transition: box-shadow .1s ease-out; transition: box-shadow .1s ease-out,-webkit-box-shadow .1s ease-out; margin-bottom: 10px; justify-content: space-between; font-size: 10px; "},Object(l.h)("div",null,"Precipitation, mm/h"),Object(l.h)("div",{style:" margin-left: 10px; display: flex; flex-direction: column; "},Object(l.h)("div",{style:"width: 260px; display: flex; justify-content: space-between;",class:"scale-dividers"},Object(l.h)("div",null,"0"),Object(l.h)("div",null,"0.5"),Object(l.h)("div",null,"1"),Object(l.h)("div",null,"2"),Object(l.h)("div",null,"4"),Object(l.h)("div",null,"6"),Object(l.h)("div",null,"7"),Object(l.h)("div",null,"10"),Object(l.h)("div",null,"12"),Object(l.h)("div",null,"14"),Object(l.h)("div",null,"16"),Object(l.h)("div",null,"24"),Object(l.h)("div",null,"32"),Object(l.h)("div",null,"60")),Object(l.h)("div",{style:" width: 260px; height: 5px; background: rgba(0, 0, 0, 0) linear-gradient(to left, rgb(170, 43, 195), rgb(255, 0, 146), rgb(255, 0, 100), rgb(255, 0, 0), rgb(255, 91, 0), rgb(255, 150, 0), rgb(255, 205, 0), rgb(239, 248, 0), rgb(0, 70, 0), rgb(0, 90, 0), rgb(0, 160, 0), rgb(0, 211, 0), rgb(0, 250, 100), rgba(0, 0, 0, 0)) repeat scroll 0% 0%; "})))),d["Snow depth"]&&Object(l.h)(P.a,{position:"bottomright"},Object(l.h)("div",{style:" color: #48484a; display: flex; align-items: center; padding: 2pt 4pt; background-color: #fff; border-radius: 4pt; box-shadow: 0 1px 3px rgba(0,0,0,.12),0 1px 2px rgba(0,0,0,.24); transition: box-shadow .1s ease-out; transition: box-shadow .1s ease-out,-webkit-box-shadow .1s ease-out; margin-bottom: 10px; justify-content: space-between; font-size: 10px; "},Object(l.h)("div",null,"Snow depth (m)"),Object(l.h)("div",{style:" margin-left: 10px; display: flex; flex-direction: column; "},Object(l.h)("div",{style:"width: 260px; display: flex; justify-content: space-between;",class:"scale-dividers"},Object(l.h)("div",null,"0.05"),Object(l.h)("div",null,"0.4"),Object(l.h)("div",null,"0.8"),Object(l.h)("div",null,"1.8"),Object(l.h)("div",null,"15")),Object(l.h)("div",{style:" width: 260px; height: 5px; background: linear-gradient(to right, #EDEDED, #D9F0F4, #A5E5EF, #7DDEED, #35D2EA, #00CCE8, #706DCE, #514FCC, #3333CC, #1818CC, #C454B7, #C12CB0, #BF00A8, #85408C, #7F2389, #790087, #E80068) repeat scroll 0% 0%; "})))),d["Atmospheric pressure"]&&Object(l.h)(P.a,{position:"bottomright"},Object(l.h)("div",{style:" color: #48484a; display: flex; align-items: center; padding: 2pt 4pt; background-color: #fff; border-radius: 4pt; box-shadow: 0 1px 3px rgba(0,0,0,.12),0 1px 2px rgba(0,0,0,.24); transition: box-shadow .1s ease-out; transition: box-shadow .1s ease-out,-webkit-box-shadow .1s ease-out; margin-bottom: 10px; justify-content: space-between; font-size: 10px; "},Object(l.h)("div",null,"Atmospheric pressure (hPa)"),Object(l.h)("div",{style:" margin-left: 10px; display: flex; flex-direction: column; "},Object(l.h)("div",{style:"width: 260px; display: flex; justify-content: space-between;",class:"scale-dividers"},Object(l.h)("div",null,"940"),Object(l.h)("div",null,"980"),Object(l.h)("div",null,"1010"),Object(l.h)("div",null,"1040"),Object(l.h)("div",null,"1080")),Object(l.h)("div",{style:" width: 260px; height: 5px; background: linear-gradient(to right, #0073FF,#00AAFF,#4BD0D6,#8DE7C7,#B0F720,#F0B800,#FB5515,#F3363B,#C60000) repeat scroll 0% 0%; "})))),q&&q.length>0&&Object(l.h)(T.a,{fitBoundsOnLoad:!Oe,fitBoundsOnUpdate:!1,points:q,longitudeExtractor:e=>e[1],latitudeExtractor:e=>e[0],intensityExtractor:e=>parseFloat(e[2])}),oe&&Object(l.h)(e,null,ge&&ge.length>0&&Object(l.h)(u.a,{ref:this.polyRef,positions:this.polylinetrackPointFactory(ge),optionIdxFn:this.polylineOptionIdxFn,options:this.polylineOptions(),weight:7,lineCap:"butt",opacity:.75,smoothFactor:1,zoomAnimation:!0,key:""+de})),R&&R.length>0&&R.map((e,t)=>Object(l.h)(k.a,{data:e,style:()=>this.geoJSONStyleList(t)})),!J&&N&&je&&Object(l.h)(k.a,{data:N,style:this.geoJSONStyle,onEachFeature:this.onEachFeature,onAdd:F&&F.length>0?null:this.zoomToGeoJSON}),je&&Object(l.h)(S.a,{position:je,icon:z.a.get("marker")},Object(l.h)(I.a,null,"Start position: ",r.a.format(je[0],4),", ",r.a.format(je[1],4))),fe&&Object(l.h)(S.a,{position:fe,icon:z.a.get("flag")},Object(l.h)(I.a,null,"End position: ",r.a.format(fe[0],4),", ",r.a.format(fe[1],4))),ne&&ve&&ve.length>0&&Object(l.h)(e,null,ve.length>0&&ve.map(e=>Object(l.h)(S.a,{position:[e.lat,e.lng],draggable:!1,icon:z.a.getDistanceMarker({title:e.title,body:e.body,color:e.color,textColor:"#333"})},Object(l.h)(I.a,{position:[e.lat,e.lng]},Object(l.h)("h5",null,e.title),Object(l.h)(p.a,{markdown:e.body,markdownOpts:E}))))),D.length>0&&D.reverse().map((e,t)=>Object(l.h)(S.a,{position:[e.lat,e.lng],draggable:!1,icon:z.a.getSmallMarker({icon:e.icon||"marker",bib:e.bib,flag:e.flag,title:e.title,body:e.body,color:e.color,textColor:e.textColor,mapChecked:a}),zIndexOffset:100+t})),le?Object(l.h)(e,null,Object(l.h)(A.a,{maxClusterRadius:10,iconCreateFunction:M,animate:!0,fitBoundsOnLoad:G},C.length>0&&C.reverse().map((e,t)=>Object(l.h)(S.a,{position:[e.lat,e.lng],draggable:!1,icon:z.a.getMarker({icon:e.icon||"marker",bib:e.bib,flag:e.flag,title:e.title,body:e.body,color:e.color,textColor:e.textColor,mapChecked:a}),zIndexOffset:200+t}))),Object(l.h)(A.a,{maxClusterRadius:10,iconCreateFunction:M,animate:!0,fitBoundsOnLoad:G},g.length>0&&g.reverse().map((e,t)=>Object(l.h)(S.a,{position:[e.lat,e.lng],draggable:!1,icon:z.a.getRaceMarker({icon:e.icon||"marker",bib:e.bib,rank:e.rank,speed:e.speed,bearing:e.bearing,email:e.email,image:e.image,flag:e.flag,title:e.title,body:e.body,color:e.color,textColor:e.textColor,iconWidth:180,iconAnchorX:t%2==0?7:187,mapChecked:a}),onClick:t=>this.handleMarkerClick(i(i({},e),{},{e:t})),zIndexOffset:300+t})))):Object(l.h)(e,null,C.length>0&&C.reverse().map((e,t)=>Object(l.h)(S.a,{position:[e.lat,e.lng],draggable:!1,icon:z.a.getMarker({icon:e.icon||"marker",bib:e.bib,flag:e.flag,title:e.title,body:e.body,color:e.color,textColor:e.textColor,iconHeight:20,iconAnchorX:7,iconAnchorY:7,dotWidth:14,dotHeight:14,mapChecked:a}),zIndexOffset:200+t})),g.length>0&&g.reverse().map((e,t)=>Object(l.h)(S.a,{position:[e.lat,e.lng],draggable:!1,icon:z.a.getRaceMarker({icon:e.icon||"marker",bib:e.bib,speed:e.speed,bearing:e.bearing,rank:e.rank,email:e.email,image:e.image,flag:e.flag,title:e.title,body:e.body,color:e.color,textColor:e.textColor,iconWidth:200,iconAnchorX:t%2==0?7:193,mapChecked:a}),onClick:t=>this.handleMarkerClick(i(i({},e),{},{e:t})),zIndexOffset:300+t}))))),ie&&he&&he.length>0&&Object(l.h)(e,null,Object(l.h)("div",{class:"mb-4"},Object(l.h)("div",{class:"float-right mt-1"},Object(l.h)("div",{class:"px-1 py-0 float-left",style:"line-height: 0.8em;"},Object(l.h)("small",null,Object(l.h)("small",null,r.a.format(pe,0),Object(l.h)("span",{class:"text-muted"},"speed"===de?"km/t":"%")))),he&&he.length>0&&he.map((e,t)=>Object(l.h)("div",{class:"float-left"},Object(l.h)("div",{style:`background-color: ${be[t].color}; height: 13px; width: 10px;`}))),Object(l.h)("div",{class:"px-1 py-0 float-left",style:"line-height: 0.8em;"},Object(l.h)("small",null,Object(l.h)("small",null,r.a.format(me,0),Object(l.h)("span",{class:"text-muted"},"speed"===de?"km/t":"%"))))))))}})||n;t.a=N}).call(this,s("hosL").Fragment)},J9nn:function(e,t,s){"use strict";(function(e){var a,i=s("hosL"),o=(s("Utv1"),s("/eY4")),c=s("OhSV");s("Y3FI"),s("fh8t"),s("go65"),s("ZOvn");let n=Object(o.a)(a=class extends i.Component{constructor(e){var t;super(e),t=this,this.subscribeNotificationTopic=async function(e){const{userStore:s}=t.props.stores,{user:a}=s,{notificationTopics:i={}}=a;await s.setNotificationTopic({field:"notificationTopics."+e,value:1})},this.state={},this.inputRef={},this.updateTimer={}}render(){const{userStore:t}=this.props.stores,{user:s={},teams:a=[]}=t,{language:o="en"}=s,{notificationTopics:n={}}=s,{race:l={}}=this.props,r="race-"+l.id;return n&&n[r]?"":Object(i.h)(e,null,Object(i.h)("div",{class:"row"},Object(i.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-0 mb-2"},Object(i.h)("button",{class:"btn btn-block btn-info btn-lg",onClick:()=>this.subscribeNotificationTopic(r)},Object(i.h)("i",{class:"fas fa-bell"})," ",Object(i.h)(c.c,{id:"race.notifications"},"Subscribe to race notifications")))))}})||a;t.a=n}).call(this,s("hosL").Fragment)},KOz6:function(e,t,s){"use strict";(function(e){function a(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,a)}return s}function i(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?a(Object(s),!0).forEach((function(t){o(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):a(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function o(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}var c,n=s("hosL"),l=s("/eY4"),r=(s("cneo"),s("Utv1")),d=s("OhSV"),h=s("go65");let b=Object(l.a)(c=class extends n.Component{constructor(e){var t;super(e),t=this,this.handleAdd=()=>{const{data:e}=this.state,{updateField:t,object:s,field:a}=this.props;t({id:s.id,field:a,value:i({},e)}),this.setState({data:{name:"",description:"",url:""}})},this.removeAchievement=async function(e){const{dogStore:s}=t.props.stores,{object:a}=t.props,{name:i,id:o}=e.target.closest("button").dataset;s.removeAchievement({id:a.id,name:i,achievementId:o})},this.state={data:{}}}render(){const{data:t}=this.state,{showFiles:s=!0,object:a={}}=this.props;return Object(n.h)("div",{class:"row"},Object(n.h)("div",{class:"col-12 mt-3"},s&&Object(n.h)(e,null,Object(n.h)("div",{class:"container-fluid"},Object(n.h)("div",{class:"row"},(!a.achievements||0===a.achievements.length)&&Object(n.h)(e,null,Object(n.h)("div",{class:"text-center text-muted"},Object(n.h)("div",{class:"display-1"},Object(n.h)("i",{class:"fas fa-trophy"})),Object(n.h)("h3",null,Object(n.h)(d.c,{id:"dogs.no-achievements-title"},"No achievements for this dog!")),Object(n.h)(d.c,{id:"dogs.no-achievements-text"},"You can add achievements to this dog. Ie. Memories, trips, tests, prices, races, etc."))),a.achievements&&a.achievements.map(e=>Object(n.h)("div",{class:"col-12 p-1"},Object(n.h)("span",{class:"font-weight-lighter mr-2"},r.a.isoDate(e.date,!1,!1,!0)),Object(n.h)("span",{class:"mr-2"},e.name),Object(n.h)("span",{class:"mr-2"},e.url),Object(n.h)("button",{class:"btn btn-sm btn-link float-right p-0",onClick:this.removeAchievement,"data-name":e.name,"data-id":e.id},Object(n.h)("i",{class:"fas fa-trash-alt"})," Del"))))))),Object(n.h)("div",{class:"col-12 mt-3"},Object(n.h)("details",null,Object(n.h)("summary",null,Object(n.h)(d.c,{id:"dogs.achievement-add"},"Add new achievement")),Object(n.h)("div",{class:"form-group"},Object(n.h)("label",{for:"name"},Object(n.h)(d.c,{id:"dogs.achievement-name"},"Name")),Object(n.h)("input",{type:"text",class:"form-control",id:"name","aria-describedby":"nameHelp",onInput:Object(h.a)(this,"data.name"),value:t.name}),Object(n.h)("small",{id:"nameHelp",class:"form-text text-muted"},Object(n.h)(d.c,{id:"dogs.achievement-name-help"},"Name of achievement"))),Object(n.h)("div",{class:"form-group"},Object(n.h)("label",{for:"date"},Object(n.h)(d.c,{id:"dogs.achievement-date"},"Date")),Object(n.h)("input",{type:"date",class:"form-control",id:"date","aria-describedby":"dateHelp",onInput:Object(h.a)(this,"data.date"),value:t.date}),Object(n.h)("small",{id:"dateHelp",class:"form-text text-muted"},Object(n.h)(d.c,{id:"dogs.achievement-date-help"},"Date of achievement"))),Object(n.h)("div",{class:"form-group"},Object(n.h)("label",{for:"description"},Object(n.h)(d.c,{id:"dogs.achievement-description"},"Description")),Object(n.h)("input",{type:"text",class:"form-control",id:"description","aria-describedby":"descriptionHelp",onInput:Object(h.a)(this,"data.description"),value:t.description}),Object(n.h)("small",{id:"descriptionHelp",class:"form-text text-muted"},Object(n.h)(d.c,{id:"dogs.achievement-description-help"},"Description of achievement"))),Object(n.h)("div",{class:"form-group"},Object(n.h)("label",{for:"url"},Object(n.h)(d.c,{id:"dogs.achievement-url"},"Url")),Object(n.h)("input",{type:"text",class:"form-control",id:"url","aria-describedby":"urlHelp",onInput:Object(h.a)(this,"data.url"),value:t.url}),Object(n.h)("small",{id:"urlHelp",class:"form-text text-muted"},Object(n.h)(d.c,{id:"dogs.achievement-url-help"},"URL of achievement"))),Object(n.h)("button",{class:"btn btn-success",onClick:this.handleAdd},Object(n.h)(d.c,{id:"dogs.achievement-add"},"Add achievement")))))}})||c;t.a=b}).call(this,s("hosL").Fragment)},NMoA:function(e,t,s){"use strict";(function(e){function a(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,a)}return s}function i(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}var o,c,n,l,r,d=s("hosL"),h=s("Utv1"),b=s("/eY4"),p=s("cneo"),m=s("OhSV"),u=s("fh8t"),g=s.n(u),O=s("go65"),j=s("Y3FI"),f=(s("X9Km"),s("1OK2"),s("B95u")),v=s("4QWe"),y=(s("NMoA"),s("s4FZ")),w=s("+JSK"),x=s("vY+r"),k=s("eQ6k"),S=s("ZOvn");const I={showAddComment:{},showTeamSetting:{},viewImageIdx:{},likeStory:{}};let C=Object(b.a)(o=class extends d.Component{constructor(e){var t;super(e),t=this,this.saveStory=async function(e){const{id:s}=e.target.closest("button").dataset,{storyBody:a}=t.state,{storyStore:i}=t.props.stores,{callback:o=(()=>!0)}=t.props;await i.saveField(parseInt(s,10),"body",a,!0),i.publicFeedUpdate(parseInt(s,10),"body",a),t.setState({storyBody:"",storyType:0}),o()},this.saveStoryField=async function(e){const{story:s}=t.props,{id:a}=s,{value:i,name:o}=e.target;clearTimeout(t.updateTimer[o]),t.updateTimer[o]=setTimeout((async function(){t.doUpdateField(a,o,i)}),1e3)},this.updateTimer={}}async doUpdateField(e,t,s){const{storyStore:a}=this.props.stores;await a.saveField(parseInt(e,10),t,s,!0),a.publicFeedUpdate(parseInt(e,10),t,s)}render(){const{storyBody:t,storyType:s}=this.state,{userStore:a}=this.props.stores,{isAdmin:i}=a,{story:o}=this.props;return Object(d.h)(e,null,Object(d.h)("div",{class:"d-flex bd-highlight"},Object(d.h)("div",{class:"p-0 w-100 bd-highlight"},Object(d.h)("label",{class:"sr-only",for:"inlineFormInput"},Object(d.h)(m.c,{id:"comments.comment"},"Kommentar")),Object(d.h)("div",{class:"border rounded rounded-lg position-relative"},Object(d.h)(m.b,null,Object(d.h)("textarea",{class:"form-control-plaintext px-2",type:"text",placeholder:Object(d.h)(m.c,{id:"comments.write-comment"},"Skriv en kommentar..."),onInput:Object(O.a)(this,"storyBody"),onFocus:S.a.resizeTextarea,style:"height: 2.3em;",value:t||o.body}))),Object(d.h)("div",{class:"position-relative mt-3"},i&&Object(d.h)(e,null,Object(d.h)("div",{class:"col-12 text-center mt-2"},Object(d.h)("div",{class:"form-group"},Object(d.h)("small",null,Object(d.h)("label",null,"Pinned to top:"),Object(d.h)("input",{type:"checkbox",id:o.id,name:"pinned",onInput:this.saveStoryField,value:o.pinned?0:1,checked:o.pinned?1:0}))))),i&&Object(d.h)(e,null,Object(d.h)("label",null,Object(d.h)(m.c,{id:"story.type"},"Type")),Object(d.h)("div",{class:"form-group"},Object(d.h)("small",null,Object(d.h)("select",{class:"custom-select custom-select-sm",id:o.id,name:"type",onInput:this.saveStoryField,value:s||o.type},Object(d.h)("option",{value:""},"-- ",Object(d.h)(m.c,{id:"story.type-choose"},"Velg type")," --"),Object(d.h)("option",{value:1,selected:1==o.type?"selected":""},"✍️ ",Object(d.h)(m.c,{id:"story.type-regular"},"Vanlig")),Object(d.h)("option",{value:2,selected:2==o.type?"selected":""},"🚀 ",Object(d.h)(m.c,{id:"story.type-ad"},"Annonse")),Object(d.h)("option",{value:3,selected:3==o.type?"selected":""},"📄 ",Object(d.h)(m.c,{id:"story.type-article"},"Artikkel")))))),o.type>=2&&Object(d.h)(e,null,Object(d.h)("label",null,Object(d.h)(m.c,{id:"story.url-text"},"URL text")),Object(d.h)("div",{class:"form-group"},Object(d.h)("small",null,Object(d.h)("input",{class:"form-control",type:"text",name:"urlText",onInput:this.saveStoryField,value:o.urlText}))),Object(d.h)("label",null,Object(d.h)(m.c,{id:"story.url"},"URL")),Object(d.h)("div",{class:"form-group"},Object(d.h)("small",null,Object(d.h)("input",{class:"form-control",type:"text",name:"url",onInput:this.saveStoryField,value:o.url})))),2===o.type&&Object(d.h)(e,null,Object(d.h)("label",null,Object(d.h)(m.c,{id:"story.code"},"Code")),Object(d.h)("div",{class:"form-group"},Object(d.h)("small",null,Object(d.h)("input",{class:"form-control",type:"text",name:"code",onInput:this.saveStoryField,value:o.code}))),Object(d.h)("label",null,Object(d.h)(m.c,{id:"story.country"},"Country")),Object(d.h)("div",{class:"form-group"},Object(d.h)("small",null,Object(d.h)("input",{class:"form-control",type:"text",name:"country",onInput:this.saveStoryField,value:o.country}))),Object(d.h)("label",null,Object(d.h)(m.c,{id:"story.region"},"Region")),Object(d.h)("div",{class:"form-group"},Object(d.h)("small",null,Object(d.h)("input",{class:"form-control",type:"text",name:"region",onInput:this.saveStoryField,value:o.region}))),Object(d.h)("label",null,Object(d.h)(m.c,{id:"story.currency"},"Currency")),Object(d.h)("div",{class:"form-group"},Object(d.h)("small",null,Object(d.h)("input",{class:"form-control",type:"text",name:"currency",onInput:this.saveStoryField,value:o.currency}))),Object(d.h)("label",null,Object(d.h)(m.c,{id:"story.price"},"Price")),Object(d.h)("div",{class:"form-group"},Object(d.h)("small",null,Object(d.h)("input",{class:"form-control",type:"text",name:"price",onInput:this.saveStoryField,value:o.price})))))),Object(d.h)("div",{class:"p-0 pl-2 flex-shrink-1 bd-highlight"},Object(d.h)("button",{type:"button",class:"btn btn-primary mb-2",onClick:this.saveStory,"data-id":o.id},Object(d.h)("i",{class:"fas fa-paper-plane"})))))}})||o,T=Object(b.a)(c=class extends d.Component{constructor(e){var t;super(e),t=this,this.viewImage=e=>{const{id:t,idx:s}=e.target.closest("img").dataset,{viewImageIdx:a}=this.state;a[t]=s,this.setState({viewImageIdx:a})},this.showStoryDetail=e=>{if("a"===e.target.localName)return!1;const{id:t}=e.target.closest("#storyDetail").dataset;t&&Object(j.route)("/stories/"+t)},this.translate=async function(e){e.preventDefault(),e.stopPropagation();const{story:s}=t.props,{userStore:a,storyStore:i}=t.props.stores,{user:o}=a,c=await i.translate({story:s,user:o});t.setState({showOriginal:0,translatedText:c})},this.showOriginal=e=>{e.preventDefault(),e.stopPropagation(),this.setState({showOriginal:1})},this.state={viewImageIdx:{}}}render(){const{viewImageIdx:t,showOriginal:s,translatedText:a}=this.state,{userStore:i}=this.props.stores,{story:o,likeStory:c,likeRef:n}=this.props,{user:l}=i,{language:r="en"}=l,h=[];if(o.images){const e=Object(p.i)(o.images);h.push(...e)}const b=S.a.getTranslation({object:o,targetLang:r,field:"body"})||a;let u=b||o.body;return s&&(u=o.body),Object(d.h)(e,null,Object(d.h)("div",{class:"container-fluid px-0 mt-1"},Object(d.h)("div",{class:"row"},Object(d.h)(y.a,{stores:this.props.stores,images:h,id:o.id,dblClick:c,likeRef:n}))),Object(d.h)("div",{class:"row mt-2"},Object(d.h)("div",{class:"clearfix col-12",style:""+(o.offline?"text-decoration: line-through;":"")},Object(d.h)("div",{id:"storyDetail",onClick:this.showStoryDetail,"data-id":o.id},Object(d.h)(g.a,{markdown:S.a.replaceImages(u,o.images,r),markdownOpts:S.a.getMarkdownOptions()}),o.language!==r&&Object(d.h)(e,null,!s&&b?Object(d.h)(e,null,Object(d.h)("button",{type:"button",class:"btn btn-sm btn-link text-muted",onClick:this.showOriginal},Object(d.h)("i",{class:"fas fa-cog"}),"  ",Object(d.h)(m.c,{id:"home.translate-show-original"},"Show original"))):Object(d.h)(e,null,Object(d.h)("button",{type:"button",class:"btn btn-sm btn-link text-muted",onClick:this.translate},Object(d.h)("i",{class:"fas fa-cog"})," ",Object(d.h)(m.c,{id:"home.translate-to"},"See translation"))))))))}})||c,D=Object(b.a)(n=class extends d.Component{constructor(e){var t;super(e),t=this,this.viewImage=e=>{const{id:t,idx:s}=e.target.closest("img").dataset,{viewImageIdx:a}=this.state;a[t]=s,this.setState({viewImageIdx:a})},this.showStoryDetail=e=>{if("a"===e.target.localName)return!1;const{id:t}=e.target.closest("#storyDetail").dataset;t&&Object(j.route)("/stories/"+t)},this.translate=async function(e){e.preventDefault(),e.stopPropagation();const{story:s}=t.props,{userStore:a,storyStore:i}=t.props.stores,{user:o}=a;t.setState({showOriginal:0}),await i.translate({story:s,user:o})},this.showOriginal=e=>{e.preventDefault(),e.stopPropagation(),this.setState({showOriginal:1})},this.getTranslation=()=>{const{story:e}=this.props,{userStore:t}=this.props.stores,{user:s}=t,{language:a="en"}=s;S.a.getTranslation({object:e,targetLang:a,field:"body"})&&this.setState({showOriginal:0})},this.state={viewImageIdx:{}}}componentWillMount(){this.getTranslation()}render(){const{viewImageIdx:t,showOriginal:s}=this.state,{userStore:a}=this.props.stores,{story:i,likeStory:o,likeRef:c}=this.props,{user:n}=a,{language:l="en"}=n,r=[];if(i.images){const e=Object(p.i)(i.images);r.push(...e)}const b=S.a.getTranslation({object:i,targetLang:l,field:"body"});let u=b||i.body;return s&&(u=i.body),Object(d.h)(e,null,Object(d.h)("div",{class:"container-fluid px-0 mt-1"},Object(d.h)("div",{class:"row"},Object(d.h)(y.a,{stores:this.props.stores,images:r,id:i.id,dblClick:o,likeRef:c}))),Object(d.h)("div",{class:"row mt-2"},Object(d.h)("div",{class:"clearfix col-12",style:""+(i.offline?"text-decoration: line-through;":"")},Object(d.h)("div",{id:"storyDetail","data-id":i.id},Object(d.h)(g.a,{markdown:S.a.replaceImages(u,i.images,l),markdownOpts:S.a.getMarkdownOptions()}),i.language!==l&&Object(d.h)(e,null,!s&&b?Object(d.h)(e,null,Object(d.h)("button",{type:"button",class:"btn btn-sm btn-link",onClick:this.showOriginal},Object(d.h)("i",{class:"fas fa-cog"}),"  ",Object(d.h)(m.c,{id:"home.translate-show-original"},"Show original"))):Object(d.h)(e,null,Object(d.h)("button",{type:"button",class:"btn btn-sm btn-link",onClick:this.translate},Object(d.h)("i",{class:"fas fa-cog"})," ",Object(d.h)(m.c,{id:"home.translate-to"},"See translation")))))),!!(i.url||i.code||i.price>0)&&Object(d.h)(e,null,Object(d.h)("div",{class:"clearfix col-12  py-2",style:""+(i.offline?"text-decoration: line-through;":"")},Object(d.h)("div",{class:"row"},i.url&&Object(d.h)(e,null,Object(d.h)("div",{class:"col-12 text-left",style:"font-size: 1.0em;"},Object(d.h)("a",{href:S.a.asUrl(i.url),target:"_blank",rel:"noreferrer"},Object(d.h)("i",{class:"fas fa-link mr-2"}),i.urlText?Object(d.h)(e,null,i.urlText):Object(d.h)(e,null,Object(d.h)(m.c,{id:"story.ad-url-readmore"},"Les mer..."))))),i.code&&Object(d.h)(e,null,Object(d.h)("div",{class:"col text-left",style:"font-size: 1.2em;"},Object(d.h)("nobr",null,Object(d.h)("span",{class:"font-weight-lighter"},Object(d.h)(m.c,{id:"story.ad-campaign-code"},"Kampanjekode"),":")," ",i.code))),i.price>0&&Object(d.h)(e,null,Object(d.h)("div",{class:"col text-right",style:"font-size: 1.2em;"},Object(d.h)("nobr",null,i.currencty&&Object(d.h)("span",{class:"font-weight-lighter"},i.currency)," ",h.a.format(i.price,2)))))))))}})||n,A=Object(b.a)(l=class extends d.Component{constructor(e){var t;super(e),t=this,this.viewImage=e=>{const{id:t,idx:s}=e.target.closest("img").dataset,{viewImageIdx:a}=this.state;a[t]=s,this.setState({viewImageIdx:a})},this.showStoryDetail=e=>{if("a"===e.target.localName)return!1;const{id:t}=e.target.closest("#storyDetail").dataset;t&&Object(j.route)("/stories/"+t)},this.translate=async function(e){e.preventDefault(),e.stopPropagation();const{story:s}=t.props,{userStore:a,storyStore:i}=t.props.stores,{user:o}=a;t.setState({showOriginal:0}),await i.translate({story:s,user:o})},this.showOriginal=e=>{e.preventDefault(),e.stopPropagation(),this.setState({showOriginal:1})},this.getTranslation=()=>{const{story:e}=this.props,{userStore:t}=this.props.stores,{user:s}=t,{language:a="en"}=s;S.a.getTranslation({object:e,targetLang:a,field:"body"})&&this.setState({showOriginal:0})},this.state={viewImageIdx:{}}}componentWillMount(){this.getTranslation()}render(){const{viewImageIdx:t,showOriginal:s}=this.state,{userStore:a}=this.props.stores,{story:i,likeStory:o,likeRef:c}=this.props,{user:n}=a,{language:l="en"}=n,r=[];if(i.images){const e=Object(p.i)(i.images);r.push(...e)}const h=S.a.getTranslation({object:i,targetLang:l,field:"body"});let b=h||i.body;return s&&(b=i.body),Object(d.h)(e,null,Object(d.h)("div",{class:"container-fluid px-0 mt-1"},Object(d.h)("div",{class:"row"},Object(d.h)(y.a,{stores:this.props.stores,images:r,id:i.id,dblClick:o,likeRef:c}))),Object(d.h)("div",{class:"row mt-2"},Object(d.h)("div",{class:"clearfix col-12",style:""+(i.offline?"text-decoration: line-through;":"")},Object(d.h)("div",{id:"storyDetail",onClick:this.showStoryDetail,"data-id":i.id},Object(d.h)(g.a,{markdown:S.a.replaceImages(b,i.images,l),markdownOpts:S.a.getMarkdownOptions()}),i.language!==l&&Object(d.h)(e,null,!s&&h?Object(d.h)(e,null,Object(d.h)("button",{type:"button",class:"btn btn-sm btn-link",onClick:this.showOriginal},Object(d.h)("i",{class:"fas fa-cog"}),"  ",Object(d.h)(m.c,{id:"home.translate-show-original"},"Show original"))):Object(d.h)(e,null,Object(d.h)("button",{type:"button",class:"btn btn-sm btn-link",onClick:this.translate},Object(d.h)("i",{class:"fas fa-cog"})," ",Object(d.h)(m.c,{id:"home.translate-to"},"See translation")))))),!!(i.url||i.code||i.price)&&Object(d.h)(e,null,Object(d.h)("div",{class:"clearfix col-12  py-2",style:""+(i.offline?"text-decoration: line-through;":"")},Object(d.h)("div",{class:"row"},i.url&&Object(d.h)(e,null,Object(d.h)("div",{class:"col-12 text-left",style:"font-size: 1.0em;"},Object(d.h)("a",{href:S.a.asUrl(i.url),target:"_blank",rel:"noreferrer"},Object(d.h)("i",{class:"fas fa-link mr-2"}),i.urlText?Object(d.h)(e,null,i.urlText):Object(d.h)(e,null,Object(d.h)(m.c,{id:"story.ad-url-readmore"},"Les mer..."))))))))))}})||l,R=Object(b.a)(r=class extends d.Component{constructor(e){var t;super(e),t=this,this.toggleDate=e=>{e.stopPropagation(),e.preventDefault();const{showDate:t}=this.state;this.setState({showDate:!t})},this.likeStory=async function(){const{story:e}=t.props,{id:s}=e,a=s,{storyStore:i}=t.props.stores,{likeStory:o}=t.state;o[a]=!0;const c=Object.keys(o);t.setState({likeStory:o,likeIds:c}),setTimeout(()=>{const{likeStory:e}=t.state;delete e[a];const s=Object.keys(e);t.setState({likeStory:e,likeIds:s})},1200);await i.likeStory({id:a})},this.toggleAddComment=e=>{const t=e.target.closest("button").dataset.id,{showAddComment:s}=this.state;s[t]?delete s[t]:s[t]=!0,this.setState({showAddComment:s},()=>{this.inputRef[t]&&this.inputRef[t].focus()})},this.closeAllAddComments=()=>{this.setState({showAddComment:{}})},this.toggleShowTeamSetting=e=>{const t=e.target.closest("button").dataset.id,{showTeamSetting:s}=this.state;s[t]?delete s[t]:s[t]=!0,this.setState({showTeamSetting:s})},this.viewImage=e=>{const{id:t,idx:s}=e.target.closest("img").dataset,{viewImageIdx:a}=this.state;a[t]=s,this.setState({viewImageIdx:a})},this.toggleMenu=e=>{const{id:t}=e.target.closest("i").dataset,{showMenu:s={}}=this.state;s[t]=!s[t],this.setState({showDeleteStory:{},showEdit:{},showMenu:s})},this.toggleEdit=e=>{const{id:t}=e.target.closest("button").dataset,{showEdit:s={}}=this.state;s[t]=!s[t],this.setState({showDeleteStory:{},showEdit:s,showMenu:{}})},this.toggleDeleteStory=e=>{const{id:t}=e.target.closest("button").dataset,{showDeleteStory:s={}}=this.state;s[t]=!s[t],this.setState({showDeleteStory:s,showEdit:{},showMenu:{}})},this.reportStory=async function(e){const{id:s}=e.target.closest("button").dataset,{storyStore:a}=t.props.stores;await a.reportStory({id:s}),t.setState({showEdit:{},showMenu:{}})},this.adminRemoveStory=async function(e){const{id:s}=e.target.closest("button").dataset,{storyStore:a}=t.props.stores;await a.adminHideStory({id:s}),t.setState({showEdit:{},showMenu:{}})},this.deleteStory=async function(e){const{id:s}=e.target.closest("button").dataset,{storyStore:a}=t.props.stores;await a.saveField(parseInt(s,10),"offline",1,!0),a.publicFeedUpdate(parseInt(s,10),"offline",1),t.setState({storyBody:"",showDeleteStory:{},showEdit:{},showMenu:{}})},this.doneEdit=()=>{this.setState({storyBody:"",showDeleteStory:{},showEdit:{},showMenu:{}})},this.showStoryDetail=e=>{if("a"===e.target.localName)return!1;const{id:t}=e.target.closest("#storyDetail").dataset;t&&Object(j.route)("/stories/"+t)},this.shareLink=e=>{const{url:t,title:s,text:a}=e.target.closest("button").dataset,{appState:i}=this.props.stores;i.shareUrl({url:t,title:s,text:a})},this.state=function(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?a(Object(s),!0).forEach((function(t){i(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):a(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}({},I),this.inputRef={}}async loadStoriesPublicFeed(e=this.props){const{hashtag:t}=e,{storyStore:s}=e.stores;await s.loadPublicFeed({hashtag:t})}render(){const{showAddComment:t,showDate:s,showMenu:a={},showEdit:i={},showDeleteStory:o={},showTeamSetting:c,likeStory:n,likeIds:l}=this.state,{story:r,showAllComments:b,onTeamClick:p=(()=>{}),onUserClick:u=(()=>{})}=this.props,{userStore:g,storyStore:O,appState:j}=this.props.stores,{user:y={},isAdmin:I}=g,{hasShareApi:R}=j,P=O.findPublicTeam(r.team)||{},z=O.findPublicUser(r.user)||{},F=S.a.getImage({user:z,team:P,priority:"user",object:r}),U=!(!P||!P.members)&&P.members.some(e=>e===y.id);let E,$,L,M;P&&P.name?(E=S.a.displayNameShort(P),$=S.a.displayName(P),L=S.a.displayName(z),z.settings&&y.uuidv4!==z.uuidv4&&(M=z.settings.hideProfile?null:"/inbox/"+z.uuidv4)):z&&z.id&&(E=S.a.displayNameShort(z),$=S.a.displayName(z));const{likes:N,comments:B,reports:H=[]}=r,V=r.likes&&r.likes.findIndex(e=>e.user===y.id)>-1,_=P.followers?P.followers.length:0,K=P.members&&P.members.indexOf(y.id)>-1,Y=P.followers&&P.followers.indexOf(y.id)>-1,W=P.followRequests&&P.followRequests.findIndex(e=>e.id===y.id)>-1,{currentLocationGeocode:Z={},yrWeather:q=[]}=r,J=S.a.getViews(r.statistics),G=S.a.getAdminData(r.statistics);return Object(d.h)(e,null,I||y.id===z.id?Object(d.h)(e,null,Object(d.h)("span",{class:"float-right font-weight-lighter text-muted"},Object(d.h)("i",{class:"fas fa-ellipsis-h",onClick:this.toggleMenu,"data-id":r.id}))):Object(d.h)(e,null,!K&&!Y&&!W&&P.public>0&&Object(d.h)("span",{class:"float-right"},Object(d.h)(k.a,{stores:this.props.stores,team:P,buttonOnly:!0,simple:!0,classNames:"btn btn-link text-primary"}))),a[r.id]&&Object(d.h)(e,null,Object(d.h)("div",{class:"position-absolute bg-light p-2 border rounded rounded-lg shadow-sm",style:"top: 30px; right: 10px; width: 60%; z-index: 999999;"},y.id===z.id?Object(d.h)(e,null,Object(d.h)("button",{class:"btn btn-link btn-block text-left",onClick:this.toggleEdit,"data-id":r.id},Object(d.h)("i",{class:"fas fa-edit"})," Edit"),Object(d.h)("hr",null),Object(d.h)("button",{class:"btn btn-link btn-block text-left text-danger",onClick:this.toggleDeleteStory,"data-id":r.id},Object(d.h)("i",{class:"fas fa-trash-alt"})," Delete")):Object(d.h)(e,null,Object(d.h)("button",{class:"btn btn-link btn-block text-left",onClick:this.reportStory,"data-id":r.id},Object(d.h)("i",{class:"fas fa-flag"})," Report"),I&&Object(d.h)(e,null,Object(d.h)("hr",null),Object(d.h)("button",{class:"btn btn-link btn-block text-left text-danger",onClick:this.adminRemoveStory,"data-id":r.id},Object(d.h)("i",{class:"fas fa-eraser"})," Remove from feed"))))),Object(d.h)("div",{class:"d-flex position-relative"},Object(d.h)("div",{class:"position-relative text-center border rounded-circle imageRounded imageRoundedMedium",style:F?`background-image: url("${F}"); background-size: cover;`:""},!F&&Object(d.h)("div",{class:"text-muted",style:"font-size: 20px; padding-top: 3px;"},E)),Object(d.h)("div",{class:"flex-grow-1 pl-3 text-overflow",style:"line-height: 1.2em;"},Object(d.h)("h5",{class:"mb-1 position-relative",style:"line-height: 1.0em; "+(r.offline?"text-decoration: line-through;":"")},P.public?Object(d.h)(e,null,Object(d.h)("a",{href:"/teams/public/"+P.uuidv4,onClick:e=>p(e,P.uuidv4),class:"stretched-link"},$)):Object(d.h)(e,null,$),K&&!P.public&&Object(d.h)("button",{type:"button",class:"btn btn-sm btn-link text-muted","data-id":r.id,onClick:this.toggleShowTeamSetting},Object(d.h)("i",{class:"fas fa-exclamation-triangle"}))),Object(d.h)("div",{class:"mb-2",style:""+(r.offline?"text-decoration: line-through;":"")},r.pinned&&Object(d.h)(e,null,Object(d.h)("small",{class:"text-muted mr-2"},Object(d.h)("i",{class:"fas fa-thumbtack"}))),2===r.type?Object(d.h)(e,null,Object(d.h)("small",{class:"text-muted"},Object(d.h)(m.c,{id:"story.sponsored"},"Sponsored")," -")):Object(d.h)(e,null,r.date&&Object(d.h)("small",{class:"text-muted",onClick:this.toggleDate},s?h.a.formatDate(r.date,{locale:"no-NB",hour12:!1,hour:"2-digit",minute:"2-digit"}):h.a.formatDistance(r.date,new Date,{locale:"no-NB"}))),1===r.public?Object(d.h)(e,null,Object(d.h)("small",{class:"ml-2 text-muted"},Object(d.h)("i",{class:"fas fa-globe-europe"}))):Object(d.h)(e,null,Object(d.h)("small",{class:"ml-2 text-muted"},Object(d.h)("i",{class:"fas fa-users"})," (",h.a.format(_),")")),L&&Object(d.h)(e,null,Object(d.h)("small",{class:"ml-2 text-muted"},M?Object(d.h)(e,null,Object(d.h)("i",{class:"fas fa-user"})," ",Object(d.h)("a",{href:M},L)):Object(d.h)(e,null,Object(d.h)("i",{class:"fas fa-user"})," ",L))),Z&&Z.formattedCounty&&Object(d.h)(e,null,Object(d.h)("small",{class:"ml-2 text-muted"},Object(d.h)("i",{class:"fas fa-map-marker-alt"})," ",Z.formattedCounty))),I&&Object(d.h)("div",{class:"d-flex flex-row flex-nowrap bg-light border-top border-bottom py-2",style:"overflow: auto;"},Object(d.h)("small",{class:"text-muted mr-2"},"Adm:"),H&&H.length>0&&Object(d.h)(e,null,Object(d.h)("small",{class:"text-danger mr-2"},Object(d.h)("i",{class:"fas fa-flag"})," ",H.length)),Z&&Z.formatted_address&&Object(d.h)(e,null,Object(d.h)("small",{class:"text-muted"},Object(d.h)("i",{class:"fas fa-map-marker-alt"})," ",Z.formatted_address)),z.deviceInfo&&Object(d.h)(e,null,Object(d.h)("span",{class:"badge badge-secondary ml-2 float-right font-weight-light"},["platform","manufacturer","model"].map(t=>Object(d.h)(e,null,Object(d.h)("span",{class:"ml-2 text-white"},z.deviceInfo[t]))))),G&&Object(d.h)(e,null,Object(d.h)("small",{class:"ml-2 text-muted"},"V: ",G.count),Object(d.h)("small",{class:"ml-2 text-muted"},"R: ",G.ranking," ",h.a.isNumber(G.rankingTrend)&&Object(d.h)(e,null,Object(d.h)("i",{class:S.a.getClassForTrend(G.rankingTrend)}))),Object(d.h)("small",{class:"ml-2 text-muted"},"D: ",h.a.format(G.durationAvg/1e3,1),"s ",h.a.isNumber(G.durationAvgTrend)&&Object(d.h)(e,null,Object(d.h)("i",{class:S.a.getClassForTrend(G.durationAvgTrend)}))),r.statisticsCurrent&&r.statisticsCurrent.totalInteractions>0&&Object(d.h)("small",{class:"ml-2 text-muted"},"S: ",h.a.format(r.statisticsCurrent.totalInteractions,0)),r.shadowTags&&r.shadowTags.map(t=>Object(d.h)(e,null,Object(d.h)("span",{class:"badge badge-secondary ml-2 float-right font-weight-light"},t))))))),Object(d.h)("div",{class:"row mt-2"},Object(d.h)("div",{class:"clearfix col-12",style:""+(r.offline?"text-decoration: line-through;":"")},i[r.id]&&Object(d.h)(e,null,Object(d.h)(C,{stores:this.props.stores,story:r,key:"story-edit-"+r.id,callback:this.doneEdit})),o[r.id]&&Object(d.h)("div",{class:"clearfix mt-3 mb-3"},Object(d.h)("button",{class:"btn btn-danger float-left",onClick:this.deleteStory,"data-id":r.id},Object(d.h)("i",{class:"fas fa-trash-alt"})," Delete"),Object(d.h)("button",{class:"btn btn-secondary float-right",onClick:this.toggleDeleteStory,"data-id":r.id},Object(d.h)("i",{class:"fas fa-times-circle"})," Cancel")))),(!r.type||1==r.type)&&Object(d.h)(T,{stores:this.props.stores,story:r,key:"story-regular-view-"+r.id,likeStory:this.likeStory,likeRef:n,keys:l}),2==r.type&&Object(d.h)(D,{stores:this.props.stores,story:r,key:"story-ad-view-"+r.id,likeStory:this.likeStory,likeRef:n,keys:l}),3==r.type&&Object(d.h)(A,{stores:this.props.stores,story:r,key:"story-article-view-"+r.id,likeStory:this.likeStory,likeRef:n,keys:l}),Object(d.h)("div",{class:"d-flex justify-content-between mt-2"},Object(d.h)("div",{class:"mr-2"},Object(d.h)(w.a,{stores:this.props.stores,likes:N,comments:B,type:"story",onTeamClick:p,onUserClick:u})),J>0&&Object(d.h)(e,null,Object(d.h)("div",null,Object(d.h)(x.a,{stores:this.props.stores,views:J,object:r,type:"story",isTeamAdmin:U,isAdmin:I,onTeamClick:p,onUserClick:u})))),c[r.id]&&Object(d.h)(e,null,Object(d.h)("small",null,Object(d.h)("div",{class:"alert alert-info",role:"alert"},Object(d.h)("span",{class:"display-4 float-left"},Object(d.h)("i",{class:"fas fa-exclamation-triangle mr-3 mb-3"})),Object(d.h)("p",null,Object(d.h)(m.c,{id:"story.alert-text-1"},"Your team is not visible and it's not possible to request friendship with your team.")),Object(d.h)("p",null,Object(d.h)(m.c,{id:"story.alert-text-2"},"If you want to make your team visible so other can request to follow your team, you can find the setting here:")),Object(d.h)("p",null,Object(d.h)("a",{href:"/teams/edit/"+P.id},Object(d.h)(m.c,{id:"story.alert-text-3"},"Edit team")))))),Object(d.h)("div",null,Object(d.h)("div",{class:"row"},Object(d.h)("div",{class:"col text-center"},Object(d.h)("button",{type:"button",class:`storyImage btn btn-sm btn-outline-${V?"primary":"secondary"} btn-lg btn-block ${V?"text-primary":""} text-overflow`,"data-id":r.id,onClick:this.likeStory},Object(d.h)("i",{class:(V?"text-primary fas":"far")+" fa-thumbs-up"})," ",V?Object(d.h)(m.c,{id:"comments.has-liked"},"Liked"):Object(d.h)(m.c,{id:"comments.like"},"Lik"))),Object(d.h)("div",{class:"col text-center"},Object(d.h)("button",{type:"button",class:"btn btn-sm btn-outline-secondary btn-lg btn-block text-overflow","data-id":r.id,onClick:this.toggleAddComment},Object(d.h)("i",{class:"fas fa-comment"})," ",Object(d.h)(m.c,{id:"comments.comment-add"},"Kommentar"))),R?Object(d.h)(e,null,Object(d.h)("div",{class:"col text-center"},Object(d.h)("button",{class:"btn btn-sm btn-outline-secondary btn-lg btn-block text-overflow",onClick:this.shareLink,"data-url":"https://themusher.app/share/story/"+r.uuidv4,"data-title":"title: "+r.title},Object(d.h)("i",{class:"fas fa-share"})," ",Object(d.h)(m.c,{id:"story.share"},"Del")))):Object(d.h)(e,null,Object(d.h)("div",{class:"col text-center"},Object(d.h)("a",{class:"btn btn-sm btn-outline-secondary btn-lg btn-block text-overflow",href:"https://themusher.app/share/story/"+r.uuidv4,target:"_blank",rel:"noreferrer","data-native":!0},Object(d.h)("i",{class:"fas fa-share"})," ",Object(d.h)(m.c,{id:"story.share"},"Del")))))),Object(d.h)("div",{class:"mt-2"},Object(d.h)(f.a,{stores:this.props.stores,story:r,col:"10",offset:"2",compact:!1,showAllComments:b,initCall:this.closeAllAddComments}),t[r.id]&&Object(d.h)(v.a,{stores:this.props.stores,story:r,inputRef:e=>this.inputRef[r.id]=e,inputRefObject:this.inputRef,col:"10",offset:"2",key:"story-comment-"+r.id})))}})||r;t.a=R}).call(this,s("hosL").Fragment)},Pbyq:function(e,t,s){"use strict";(function(e){var a,i=s("hosL"),o=s("Utv1"),c=s("/eY4"),n=(s("OhSV"),s("Y3FI"),s("fh8t"),s("go65"),s("om2D"),s("AEg1")),l=s("gOLw");s("ZOvn");let r=Object(c.a)(a=class extends i.Component{constructor(e){var t;super(e),t=this,this.addRaceUserImage=async function(){const{race:e={}}=t.props,s=e.id,{raceStore:a}=t.props.stores,{newRaceUserImage:i}=t.state;await a.addUserImage({id:s,newUserImage:i}),t.setState({newRaceUserImage:{}})},this.updateUserImageUpload=({field:e,value:t})=>{const{newRaceUserImage:s}=this.state;s[e]=t,this.setState({newRaceUserImage:s})},this.removeRaceUserImage=async function(e){const s=e.target.parentElement.dataset.id||e.target.dataset.id,{race:a={}}=t.props,i=a.id,{raceStore:o}=t.props.stores;await o.removeUserImage({id:i,userImageId:s})},this.editRaceUserImage=async function(e){const{id:s,field:a}=e.target.dataset,{value:i}=e.target,{race:c={}}=t.props,n=c.id,{raceStore:l}=t.props.stores,r={raceUserImageId:s,["raceUserImage"+o.a.ucfirst(a)]:i};clearTimeout(t.updateTimer[`${n}-${s}-${a}`]),t.updateTimer[`${n}-${s}-${a}`]=setTimeout((async function(){l.editUserImage({id:n,data:r})}),1500),t.resizeTextarea(e.target)},this.resizeTextarea=e=>{let t=e;t.target&&(t=e.target);const{scrollHeight:s}=t;t.style.height=s+"px"},this.handleImageErrored=e=>{const t=e.target;t.onerror=null,setTimeout(()=>{t.src+="?"+new Date},1e3)},this.state={newRaceUserImage:{}},this.inputRef={},this.updateTimer={}}render(){const{newRaceUserImage:t={}}=this.state,{userStore:s}=this.props.stores,{user:a={},teams:o=[]}=s,{language:c="en"}=a,{race:r={}}=this.props,d=["photos"];return r.tag&&r.tag.split(",").forEach(e=>{d.push(e.trim())}),Object(i.h)(e,null,a.id&&Object(i.h)(n.a,{stores:this.props.stores,hashTags:d,postfix:`[🔗 ${r.title}: Images](/app-races/${r.id}/userImages)`,topic:"race-"+r.id}),Object(i.h)(l.a,{stores:this.props.stores,hashtags:d}))}})||a;t.a=r}).call(this,s("hosL").Fragment)},TiXY:function(e,t,s){"use strict";var a,i=s("hosL"),o=s("/eY4"),c=(s("cneo"),s("Utv1"),s("OhSV")),n=s("u2zT");let l=Object(o.a)(a=class extends i.Component{constructor(e){super(e),this.handleAddImage=e=>{const{updateField:t,object:s,field:a}=this.props;t({id:s.id,field:a,value:e})},this.state={files:[]}}render(){const{uploadStatus:e=(()=>{}),before:t=(()=>{}),after:s=(()=>{}),autoOpen:a=!1}=this.props;return Object(i.h)("div",{class:"row"},Object(i.h)("div",{class:"col-12"},Object(i.h)(c.c,{id:"form.files.upload-file"},"Last opp fil"),":",Object(i.h)("br",null),Object(i.h)(n.a,{handleAddImage:this.handleAddImage,apiUrl:"/api/fileupload",uploadStatus:e,before:t,after:s,autoOpen:a},Object(i.h)("div",{style:{height:30,width:"100%"}}))))}})||a;t.a=l},ULR1:function(e,t,s){"use strict";(function(e){var a,i=s("hosL"),o=s("Utv1"),c=s("/eY4"),n=(s("OhSV"),s("Y3FI"),s("fh8t"),s("go65"),s("om2D"),s("AEg1")),l=s("gOLw");s("ZOvn");let r=Object(c.a)(a=class extends i.Component{constructor(e){var t;super(e),t=this,this.addRaceArticle=async function(){const{race:e={}}=t.props,s=e.id,{raceStore:a}=t.props.stores,{newRaceArticle:i}=t.state;await a.addArticle({id:s,newArticle:i}),t.setState({newRaceArticle:{}})},this.editRaceArticle=async function(e){const{id:s,field:a}=e.target.dataset,{value:i}=e.target,{race:c={}}=t.props,n=c.id,{raceStore:l}=t.props.stores,r={raceArticleId:s,["raceArticle"+o.a.ucfirst(a)]:i};clearTimeout(t.updateTimer[`${n}-${s}-${a}`]),t.updateTimer[`${n}-${s}-${a}`]=setTimeout((async function(){l.editArticle({id:n,data:r})}),1500),t.resizeTextarea(e.target)},this.removeRaceArticle=async function(e){const s=e.target.parentElement.dataset.id||e.target.dataset.id,{race:a={}}=t.props,i=a.id,{raceStore:o}=t.props.stores;await o.removeArticle({id:i,articleId:s})},this.updateArticleUpload=({field:e,value:t})=>{const{newRaceArticle:s}=this.state;s[e]=t,this.setState({newRaceArticle:s})},this.resizeTextarea=e=>{let t=e;t.target&&(t=e.target);const{scrollHeight:s}=t;t.style.height=s+"px"},this.handleImageErrored=e=>{const t=e.target;t.onerror=null,setTimeout(()=>{t.src+="?"+new Date},1e3)},this.state={newRaceArticle:{}},this.inputRef={},this.updateTimer={}}render(){const{userStore:t}=this.props.stores,{user:s={},teams:a=[]}=t,{language:o="en"}=s,{race:c={}}=this.props,r=["news"];return c.tag&&c.tag.split(",").forEach(e=>{r.push(e.trim())}),Object(i.h)(e,null,s.id&&Object(i.h)(n.a,{stores:this.props.stores,hashTags:r,postfix:`[🔗 ${c.title}: News](/app-races/${c.id}/news)`,topic:"race-"+c.id}),Object(i.h)(l.a,{stores:this.props.stores,hashtags:r}))}})||a;t.a=r}).call(this,s("hosL").Fragment)},UUHd:function(e,t,s){"use strict";var a,i=s("hosL"),o=(s("Utv1"),s("/eY4")),c=s("OhSV"),n=s("go65"),l=s("ZOvn");let r=Object(o.a)(a=class extends i.Component{constructor(...e){var t;super(...e),t=this,this.commentRace=async function(){const{callback:e=(()=>{}),commentId:s}=t.props,{race:a}=t.props,{raceStore:i}=t.props.stores,{comment:o=""}=t.state,c=await i.commentReplyRace({id:a.id,commentId:s,comment:o});c&&200===c.status&&(t.setState({comment:""}),e({race:a,response:c}))}}render(){const{inputRef:e}=this.props,{comment:t}=this.state,{userStore:s}=this.props.stores,{user:a={}}=s,o=l.a.displayNameShort(a),r=(l.a.displayName(a),a.image||(a.images?a.images[0]:void 0));return Object(i.h)("div",{class:"w-100"},Object(i.h)("div",{class:"d-flex mb-0 position-relative w-100"},Object(i.h)("div",{class:"text-center border rounded-circle imageRounded imageRoundedThumb",style:(r?`background-image: url('${r.s3SmallLink}'); background-size: cover;`:"")+" border-width: 3px !important;"},!r&&Object(i.h)("span",{class:"font-weight-lighter",style:"font-size: 15px;"},o)),Object(i.h)("div",{class:"col pl-3",style:"line-height: 1.2em;"},Object(i.h)("div",{class:"d-flex bd-highlight"},Object(i.h)("div",{class:"p-0 w-100 bd-highlight"},Object(i.h)("label",{class:"sr-only",for:"inlineFormInput"},Object(i.h)(c.c,{id:"comments.comment"},"Kommentar")),Object(i.h)(c.b,null,Object(i.h)("textarea",{class:"form-control rounded-lg",type:"text",placeholder:Object(i.h)(c.c,{id:"comments.write-reply"},"Write a reply..."),onInput:Object(n.a)(this,"comment"),onKeyUp:l.a.resizeTextarea,onFocus:l.a.resizeTextarea,style:"height: 2.3em;",value:t,ref:e}))),Object(i.h)("div",{class:"p-0 pl-2 flex-shrink-1 bd-highlight"},Object(i.h)("button",{type:"button",class:"btn btn-sm btn-primary mb-2",onClick:this.commentRace},Object(i.h)("i",{class:"fas fa-paper-plane"})))))))}})||a;t.a=r},UgnJ:function(e,t,s){"use strict";s.r(t),function(e){function a(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,a)}return s}function i(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}var o,c=s("hosL"),n=s("Utv1"),l=s("/eY4"),r=s("OhSV"),d=s("Y3FI"),h=s("fh8t"),b=s.n(h),p=(s("go65"),s("Ysxg"),s("9lZG"),s("aGZh"),s("om2D"),s("+JSK"),s("/DnB"),s("w5T0"),s("ULR1"),s("hwiY"),s("uAGO"),s("n7ns"),s("Pbyq"),s("HGwV"),s("J9nn"),s("ZOvn"));const m=p.a.marginTop(!1),u=p.a.marginTopBack(!1),g=p.a.marginBottom(),O=(p.a.subMenuMarginTop(),{pedantic:!1,gfm:!0,breaks:!0,sanitize:!1,smartLists:!0,smartypants:!0,xhtml:!0}),j={isLoading:!1,showAdminSendMessage:{},newRaceArticle:{},newRaceUserImage:{},message:{subject:"",body:""}};let f=Object(l.a)(o=class extends c.Component{constructor(e){super(e),this.scrollRaces=e=>{const{scrollLeft:t,clientWidth:s}=e.target,a=t/s,i=Math.round(a),o=Math.abs(i-a);(Number.isInteger(a)||o<.5)&&this.setState({raceIdx:i})},this.back=()=>{Object(d.route)("/")},this.state=function(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?a(Object(s),!0).forEach((function(t){i(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):a(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}({},j)}async loadRace(e=this.props){this.setState({isLoading:!0});const{raceStore:t}=e.stores;await t.load({query:{}}),this.setState({isLoading:!1})}componentDidMount(){this.loadRace()}render(){const{userStore:t,raceStore:s,newsStore:a,appState:i}=this.props.stores,{user:o={},teams:l=[],isAdmin:d}=t,{language:h="en"}=o,{races:j=[]}=s,{newsList:f}=a,{darkmode:v}=i,y=new Date;return Object(c.h)("div",{class:"container-fluid",style:`margin-bottom: ${g}; margin-top: ${m};`},Object(c.h)("button",{class:"btn btn-link pl-0 fixed-top text-primary",style:`top: ${u}; left: 5px; font-size: 35px; width: 45px;`,onClick:this.back},Object(c.h)("i",{class:"fas fa-arrow-circle-left"})),Object(c.h)("div",{class:"row m-0"},Object(c.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-1 mb-2 p-0 text-center"},Object(c.h)("h5",null,Object(c.h)(r.c,{id:"races.all-races"},"All Races"))),Object(c.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-1 mb-2 p-0"},Object(c.h)("div",{class:"row"},j&&j.reverse().map(t=>{let s="";return y>=new Date(t.startDate)&&y<=new Date(t.endDate)?s="race":y>=new Date(t.signupStartDate)&&y<=new Date(t.signupEndDate)?s="signup":y>new Date(t.endDate)&&(s="done"),Object(c.h)(e,null,Object(c.h)("div",{class:`col-12 mb-5 bg-${v?"black":"white"} rounded-lg position-relative`,style:"\n                                            scroll-snap-align: center;\n                                            flex-wrap: wrap;\n                                            overflow-y: hidden;\n                                        ",onTouchstart:e=>{e.stopPropagation()},onTouchend:e=>{e.stopPropagation()},onTouchmove:e=>{e.stopPropagation()}},Object(c.h)("div",{class:"row d-flex align-items-center position-relative"},Object(c.h)("h5",{class:"position-absolute",style:"top: 3px; right: 5px;"},"signup"===s&&!t.liveRace&&Object(c.h)(e,null,Object(c.h)("span",{class:"badge badge-primary border border-white ml-2"},Object(c.h)(r.c,{id:"races.signup-open"},"Påmelding åpen"))),"race"===s&&Object(c.h)(e,null,Object(c.h)("span",{class:"badge badge-danger border border-white ml-2"},Object(c.h)(r.c,{id:"races.race-in-progress"},"Løp pågår"))),"done"===s&&Object(c.h)(e,null,Object(c.h)("span",{class:"badge badge-success border border-white ml-2"},Object(c.h)(r.c,{id:"races.race-finished"},"Løp avsluttet")))),t.images&&t.images[0]&&Object(c.h)("div",{class:"w-100",style:`background-image: url("${t.images[0].s3LargeLink}"); background-size: cover; height: 200px; background-repeat: no-repeat; background-position: 50% 50%;`})),Object(c.h)("div",{class:"position-relative"},Object(c.h)("h5",{class:"position-absolute",style:"top: 10px; right: 10px;"},"signup"===s&&Object(c.h)(e,null,Object(c.h)("div",{class:"spinner-grow text-primary",role:"status"})),"race"===s&&Object(c.h)(e,null,Object(c.h)("div",{class:"spinner-grow text-danger",role:"status"})),"done"===s&&Object(c.h)(e,null,Object(c.h)("span",null,Object(c.h)("i",{class:"fas fa-check text-success"})))),Object(c.h)("h5",{class:"pt-2"},d&&Object(c.h)("i",{class:`fas fa-eye${t.active?" text-success":"-slash text-danger"} float-right`}),t.title)),Object(c.h)("div",{class:"w-100"},Object(c.h)(b.a,{markdown:p.a.replaceImages(t.ingress,t.images,h),markdownOpts:O})),Object(c.h)("div",{class:"w-100"},t.classes&&Object(c.h)(e,null,Object(c.h)("div",{class:"mb-3"},Object(c.h)("small",{class:"font-weight-lighter mr-2"},Object(c.h)(r.c,{id:"races.classes"},"Klasser"),": "),Object(c.h)("br",null),Object(c.h)("div",{class:"w-100 position-relative"},Object(c.h)("div",{class:"d-flex flex-row flex-nowrap",style:"overflow: auto; scroll-snap-type: x mandatory;"},t.classes.sort((e,t)=>e.distance-t.distance).map(t=>Object(c.h)(e,null,Object(c.h)("span",{class:"badge badge-pill badge-light mr-2 font-weight-light"},t.title)))))))),Object(c.h)("div",{class:"w-100 d-flex justify-content-end"},Object(c.h)("a",{href:"/app-races/"+t.id,class:"btn btn-primary stretched-link"},Object(c.h)(r.c,{id:"races.read-more"},"Les mer"),Object(c.h)("i",{class:"fas fa-angle-double-right ml-2"}))),Object(c.h)("div",{class:"w-100 d-flex justify-content-center"},Object(c.h)("small",{class:"text-muted"},Object(c.h)(r.c,{id:"races.race-days"},"Løpsdager"),": ",t.startDate&&Object(c.h)(e,null,n.a.formatDate(t.startDate,{locale:h})),t.endDate&&Object(c.h)(e,null," - ",n.a.formatDate(t.endDate,{locale:h}))))))})))))}})||o;t.default=f}.call(this,s("hosL").Fragment)},VKmm:function(e,t,s){"use strict";function a(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,a)}return s}function i(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}var o,c=s("hosL"),n=s("Utv1"),l=s("/eY4"),r=s("OhSV");s("ZOvn"),s("eQ6k");const d={requestSent:{}};let h=Object(l.a)(o=class extends c.Component{constructor(e){super(e),this.requestFollowTeam=e=>{const{teamStore:t,userStore:s}=this.props.stores,{user:a}=s,{team:i}=e.target.closest("button").dataset;t.followRequest(parseInt(i,10),a);const{requestSent:o}=this.state;o[i]=!0,this.setState({requestSent:o})},this.getButton=e=>{const{requestSent:t}=this.state,{userStore:s}=this.props.stores,{user:a}=s,i=e.members&&e.members.findIndex(e=>e.id===a.id)>-1,o=e.followers&&e.followers.indexOf(a.id)>-1,n=e.blockedFollowers&&e.blockedFollowers.indexOf(a.id)>-1,l=t[e.id]||e.followRequests&&e.followRequests.findIndex(e=>e.id===a.id)>-1;return i?Object(c.h)("i",{class:"fas fa-home"}):o?Object(c.h)("button",{class:"btn btn-sm btn-block btn-outline-secondary float-right",onClick:this.unFollowTeam,disabled:"true","data-team":e.id},Object(c.h)("i",{class:"fas fa-link mr-2"}),Object(c.h)(r.c,{id:"teams.connect.is-following"},"Følger")):n?Object(c.h)("button",{class:"btn btn-sm btn-block btn-outline-secondary float-right",disabled:"true"},Object(c.h)("i",{class:"fas fa-hand-paper mr-2"}),Object(c.h)(r.c,{id:"teams.connect.is-blocked"},"Blokkert")):l?Object(c.h)("button",{class:"btn btn-sm btn-block btn-outline-secondary float-right",disabled:"true"},Object(c.h)("i",{class:"fas fa-hourglass-half mr-2"}),Object(c.h)(r.c,{id:"teams.connect.has-requested"},"Venter på godkjenning")):Object(c.h)("button",{class:"btn btn-sm btn-block btn-outline-success float-right",onClick:this.requestFollowTeam,"data-team":e.id},Object(c.h)("i",{class:"far fa-hand-point-right mr-2"}),Object(c.h)(r.c,{id:"teams.connect.follow"},"Følg"))},this.state=function(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?a(Object(s),!0).forEach((function(t){i(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):a(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}({},d)}async loadTeams(){this.setState({isLoading:!0});const{teamStore:e}=this.props.stores;await e.loadPublic({query:{notfollowing:1,array:1},limit:15}),this.setState({isLoading:!1})}componentDidMount(){this.loadTeams()}render(){const{teamStore:e,appState:t}=this.props.stores,{publicTeamsToFollow:s}=e,{darkmode:a}=t;return s&&0!==s.length?Object(c.h)("div",{class:"row pb-1 bg-light"},Object(c.h)("div",{class:`col-12 col-sm-8 col-lg-6 offset-sm-2 offset-lg-3 mb-0 position-relative rounded rounded-lg py-3 bg-${a?"black":"white"} shadow-sm`},Object(c.h)("div",{class:"container-fluid"},Object(c.h)("div",{class:"row"},Object(c.h)("div",{class:"col-12"},Object(c.h)("h5",null,Object(c.h)(r.c,{id:"teams.connect.teams-to-follow"},"Team du kan følge"),":"))),Object(c.h)("div",{class:"row"},Object(c.h)("div",{class:"d-flex flex-row flex-nowrap",style:"overflow: auto;"},n.a.isArray(s)&&s.map(e=>{const t=e.image&&e.image.s3SmallLink?e.image:null;return Object(c.h)("div",{class:"mr-2",style:"width: 110px;"},Object(c.h)("div",{class:"text-center border rounded-lg",style:t?`background-image: url("${t.s3SmallLink}"); background-size: cover; width: 110px; height: 100px;`:"width: 110px; height: 100px;"},!t&&Object(c.h)("i",{class:"fas fa-users text-muted mt-3",style:"font-size: 40px;"})),Object(c.h)("small",null,Object(c.h)("div",{class:"text-overflow"},Object(c.h)("strong",null,e.name)),Object(c.h)("div",{class:"text-overflow"},e.place?e.place+", ":""," ",e.country,"  "),Object(c.h)("div",{class:"text-overflow"},Object(c.h)("small",{class:"text-muted"},e&&e.dogs&&Object(c.h)("span",{class:""},Object(c.h)("i",{class:"fas fa-dog"})," ",e.dogs.length),e&&e.followers&&Object(c.h)("span",{class:"ml-2"},Object(c.h)("i",{class:"fas fa-user"})," ",e.followers.length)))),Object(c.h)("div",null,this.getButton(e)))})))))):""}})||o;t.a=h},Ysxg:function(e,t,s){"use strict";(function(e){function a(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,a)}return s}function i(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}var o,c=s("hosL"),n=s("Utv1"),l=s("/eY4"),r=s("cneo"),d=s("OhSV"),h=s("fh8t"),b=s.n(h),p=s("go65"),m=s("UUHd"),u=s("ZOvn");const g={showAddComment:{},showAllComments:!1,showAllReplies:{},viewImageIdx:{},likeComment:{},likeReply:{},showOriginal:{}};let O=Object(l.a)(o=class extends c.Component{constructor(e){var t;super(e),t=this,this.addLikeComment=async function(e){const{callback:s=(()=>{})}=t.props,a=e.target.closest(".commentContainer").dataset.id,{race:i}=t.props,{raceStore:o}=t.props.stores,{likeComment:c}=t.state;c[a]=!0,t.setState({likeComment:c}),setTimeout(()=>{const{likeComment:e}=t.state;delete e[a],t.setState({likeComment:e})},1200);const n=await o.likeRaceComment({id:i.id,commentId:a});return n&&200===n.status&&s({type:"likeComment",race:i,commentId:a,response:n}),!0},this.likeReply=async function(e){const{callback:s=(()=>{})}=t.props,a=e.target.closest(".replyContainer").dataset.id,i=e.target.closest(".replyContainer").dataset.comment,{race:o}=t.props,{raceStore:c}=t.props.stores,{likeReply:n}=t.state;n[a]=!0,t.setState({likeReply:n}),setTimeout(()=>{const{likeReply:e}=t.state;delete e[a],t.setState({likeReply:e})},1200);const l=await c.likeRaceCommentReply({id:o.id,replyId:a,commentId:i});l&&200===l.status&&s({type:"likeReply",race:o,commentId:i,replyId:a,response:l})},this.replyComment=async function(e){const s=e.target.parentElement.dataset.id||e.target.dataset.id,{showAddComment:a}=t.state;a[s]=!a[s],t.setState({showAddComment:a},()=>{t.inputRef[s]&&t.inputRef[s].focus()})},this.toggleComments=()=>{const{showAllComments:e}=this.state;this.setState({showAllComments:!e})},this.toggleReplies=e=>{const t=e.target.parentElement.dataset.id||e.target.dataset.id,{showAllReplies:s}=this.state;s[t]=!s[t],this.setState({showAllReplies:s})},this.toggleMenu=e=>{const{id:t}=e.target.closest("i").dataset,{showMenu:s={}}=this.state;s[t]=!s[t],this.setState({showDeleteComment:{},showEdit:{},showMenu:s})},this.toggleEdit=e=>{const{id:t,comment:s}=e.target.closest("button").dataset,{showEdit:a={}}=this.state;a[t]=!a[t],this.setState({showDeleteComment:{},showEdit:a,showMenu:{},commentEditText:s})},this.toggleDeleteComment=e=>{const{id:t}=e.target.closest("button").dataset,{showDeleteComment:s={}}=this.state;s[t]=!s[t],this.setState({showDeleteComment:s,showEdit:{},showMenu:{}})},this.deleteComment=async function(e){const{id:s}=e.target.closest("button").dataset,{race:a}=t.props,{raceStore:i}=t.props.stores;await i.deleteCommentRace({id:a.id,commentId:s}),t.setState({commentEditText:"",showDeleteComment:{},showEdit:{},showMenu:{}})},this.deleteCommentReply=async function(e){const{id:s,commentid:a}=e.target.closest("button").dataset,{race:i}=t.props,{raceStore:o}=t.props.stores;await o.deleteCommentReplyRace({id:i.id,commentId:a,replyId:s}),t.setState({commentEditText:"",showDeleteComment:{},showEdit:{},showMenu:{}})},this.saveComment=async function(e){const{id:s}=e.target.closest("button").dataset,{commentEditText:a}=t.state,{race:i}=t.props,{raceStore:o}=t.props.stores;await o.editCommentRace({id:i.id,commentId:s,comment:a}),t.setState({commentEditText:"",showDeleteComment:{},showEdit:{},showMenu:{}})},this.saveCommentReply=async function(e){const{id:s,commentid:a}=e.target.closest("button").dataset,{commentEditText:i}=t.state,{race:o}=t.props,{raceStore:c}=t.props.stores;await c.editCommentReplyRace({id:o.id,commentId:a,replyId:s,comment:i}),t.setState({commentEditText:"",showDeleteComment:{},showEdit:{},showMenu:{}})},this.viewImage=e=>{const{id:t,idx:s}=e.target.closest("img").dataset,{viewImageIdx:a}=this.state;a[t]=s,this.setState({viewImageIdx:a})},this.translate=async function(e){e.preventDefault(),e.stopPropagation();const{replyid:s,commentid:a}=e.target.closest("button").dataset,{race:i}=t.props,{userStore:o,raceStore:c}=t.props.stores,{user:n}=o,{showOriginal:l={},translatedText:r={}}=t.state,d=`${a}${s?"-"+s:""}`;l[d]=0,r[d]=s?await c.translateCommentReply({commentid:a,replyid:s,race:i,user:n}):await c.translateComment({commentid:a,race:i,user:n}),t.setState({showOriginal:l,translatedText:r})},this.showOriginal=e=>{const{replyid:t,commentid:s}=e.target.closest("button").dataset;e.preventDefault(),e.stopPropagation();const{showOriginal:a={}}=this.state;a[`${s}${t?"-"+t:""}`]=1,this.setState({showOriginal:a})},this.state=function(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?a(Object(s),!0).forEach((function(t){i(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):a(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}({},g),this.inputRef={}}render(){const{showAddComment:t,showAllComments:s,showAllReplies:a,viewImageIdx:i,showMenu:o={},showEdit:l={},showDeleteComment:h={},commentEditText:g,likeComment:O,showOriginal:j={},translatedText:f={}}=this.state,{race:v,callback:y=(()=>{}),initCall:w=(()=>{}),col:x=12,offset:k=0,compact:S=!1}=this.props,{userStore:I,raceStore:C}=this.props.stores,{user:T}=I,{language:D="en"}=T;let A=[],R=0,P=0;if(v.comments){if(R=v.comments.length,s)A=v.comments;else{A=v.comments.slice(Math.max(R-(S?0:2),0))}P=A.length}return Object(c.h)("div",{class:`col-${x} offset-${k} col-sm-8 col-lg-6 offset-sm-2 offset-lg-3`},v&&n.a.isArray(A)&&A.reverse().map(s=>{const{user:x={}}=s,k=C.findPublicTeamByMembers(x.id),S=u.a.displayNameShort(x),I=u.a.displayName(x),A=x.image||(x.images?x.images[0]:void 0),R=s.likes&&s.likes.findIndex(e=>e.user===T.id)>-1;let P=[],z=0,F=0;s.comments&&(z=s.comments.length,P=a[s.id]?s.comments:s.comments.slice(0,void 0),F=P.length);const U=[];if(s.images){const e=Object(r.i)(s.images);U.push(...e)}const E=i[s.id]?i[s.id]:0,$=U&&U[E]?U[E]:null,{currentLocationGeocode:L={}}=s,M=C.getCommentTranslations({race:v,commentid:s.id,targetLang:D})||f[s.id];let N=M||s.comment;return j[s.id]&&(N=s.comment),Object(c.h)("div",{class:"row"},Object(c.h)("div",{class:"col-11 offset-1 d-flex mb-2 position-relative"},Object(c.h)("div",{class:"text-center border rounded-circle imageRounded imageRoundedSmall",style:(A?`background-image: url("${A.s3SmallLink}"); background-size: cover;`:"")+" border-width: 3px !important;"},!x.image&&Object(c.h)("span",{class:"font-weight-lighter",style:"font-size: 15px;"},S)),Object(c.h)("div",{class:"flex-grow-1 pl-3 pt-0",style:"line-height: 1.2em;"},Object(c.h)("div",{class:"bg-light p-2 rounded rounded-lg position-relative"},T.id===x.id&&Object(c.h)(e,null,Object(c.h)("span",{class:"float-right font-weight-lighter text-muted"},Object(c.h)("i",{class:"fas fa-ellipsis-h",onClick:this.toggleMenu,"data-id":s.id}))),o[s.id]&&Object(c.h)(e,null,Object(c.h)("div",{class:"position-absolute bg-white p-2 border rounded rounded-lg shadow-sm",style:"top: 30px; right: 10px; width: 60%; z-index: 999999;"},Object(c.h)("button",{class:"btn btn-link btn-block text-left",onClick:this.toggleEdit,"data-id":s.id,"data-comment":s.comment},Object(c.h)("i",{class:"fas fa-edit"})," Edit"),Object(c.h)("hr",null),Object(c.h)("button",{class:"btn btn-link btn-block text-left",onClick:this.toggleDeleteComment,"data-id":s.id},Object(c.h)("i",{class:"fas fa-trash-alt"})," Delete"))),Object(c.h)("div",null,Object(c.h)("span",{style:"font-size: 0.95em;"},Object(c.h)("h5",{class:"font-weight-bold mb-2",style:"font-size: 1.0em;"},x.uuidv4&&x.uuidv4!==T.uuidv4?Object(c.h)(e,null,Object(c.h)("a",{href:"/inbox/"+x.uuidv4},I)):Object(c.h)(e,null,I),k&&k.length>0&&Object(c.h)(e,null,Object(c.h)("span",{class:"font-weight-lighter text-muted ml-1"},k.filter(e=>1===e.public).slice(0,1).map(t=>Object(c.h)(e,null,"- ",Object(c.h)("a",{href:"/teams/public/"+t.uuidv4},t.name)))))),l[s.id]?Object(c.h)(e,null,Object(c.h)("div",{class:"d-flex bd-highlight"},Object(c.h)("div",{class:"p-0 w-100 bd-highlight"},Object(c.h)("label",{class:"sr-only",for:"inlineFormInput"},Object(c.h)(d.c,{id:"comments.comment"},"Kommentar")),Object(c.h)("div",{class:"border rounded rounded-lg position-relative"},Object(c.h)(d.b,null,Object(c.h)("textarea",{class:"form-control-plaintext px-2",type:"text",placeholder:Object(c.h)(d.c,{id:"comments.write-comment"},"Skriv en kommentar..."),onInput:Object(p.a)(this,"commentEditText"),onKeyUp:u.a.resizeTextarea,onFocus:u.a.resizeTextarea,style:"height: 2.3em;",value:g})))),Object(c.h)("div",{class:"p-0 pl-2 flex-shrink-1 bd-highlight"},Object(c.h)("button",{type:"button",class:"btn btn-primary mb-2",onClick:this.saveComment,"data-id":s.id},Object(c.h)("i",{class:"fas fa-paper-plane"}))))):Object(c.h)(e,null,Object(c.h)(b.a,{markdown:u.a.replaceImages(N,s.images,D),markdownOpts:u.a.getMarkdownOptions()})),h[s.id]&&Object(c.h)("div",{class:"clearfix mt-3 mb-3"},Object(c.h)("button",{class:"btn btn-danger float-left",onClick:this.deleteComment,"data-id":s.id},Object(c.h)("i",{class:"fas fa-trash-alt"})," Delete"),Object(c.h)("button",{class:"btn btn-secondary float-right",onClick:this.toggleDeleteComment,"data-id":s.id},Object(c.h)("i",{class:"fas fa-times-circle"})," Cancel")))),Object(c.h)("div",null,Object(c.h)("div",{class:"container-fluid px-3 mt-1"},$&&Object(c.h)("div",{class:"clearfix row position-relative"},Object(c.h)("div",{class:"commentContainer col-12 px-0 overflow-hidden",style:"max-height: 60vh;",onDblclick:this.addLikeComment,"data-id":s.id},Object(c.h)("img",{loading:"lazy",class:"img-fluid",style:"min-width: 100px;",src:$.s3LargeLink})),O[s.id]&&Object(c.h)("span",{class:"likeHeart position-absolute text-white display-1",style:"top: calc(50% - 50px); left: calc(50% - 50px); width: 100px; height: 100px;"},Object(c.h)("i",{class:"fas fa-heart likeStory"}))),U&&U.length>1&&Object(c.h)("div",{class:"clearfix d-flex flex-wrap row"},n.a.isArray(U)&&U.map((t,a)=>Object(c.h)(e,null,Object(c.h)("div",{class:"col px-0 overflow-hidden",style:"max-height: 100px; min-width: 100px;"},Object(c.h)("img",{loading:"lazy",class:"img-fluid border",style:"min-width: 100px;",src:t.s3SmallLink,onClick:this.viewImage,"data-id":s.id,"data-idx":a})))))))),Object(c.h)("small",null,Object(c.h)("button",{class:"commentContainer btn btn-sm btn-link py-0 "+(R?"text-primary":""),onClick:this.addLikeComment,"data-id":s.id,disabled:R},R?Object(c.h)(d.c,{id:"comments.has-liked"},"Liked"):Object(c.h)(d.c,{id:"comments.like"},"Lik")),"-",Object(c.h)("button",{class:"btn btn-sm btn-link py-0",onClick:this.replyComment,"data-id":s.id},Object(c.h)(d.c,{id:"comments.comment-add"},"Kommentar")),s.language!==D&&Object(c.h)(e,null,"-",!j[s.id]&&M?Object(c.h)(e,null,Object(c.h)("button",{type:"button",class:"btn btn-sm btn-link","data-commentid":s.id,onClick:this.showOriginal},Object(c.h)("i",{class:"fas fa-cog"}),"  ",Object(c.h)(d.c,{id:"home.translate-show-original"},"Show original"))):Object(c.h)(e,null,Object(c.h)("button",{type:"button",class:"btn btn-sm btn-link",onClick:this.translate,"data-commentid":s.id},Object(c.h)("i",{class:"fas fa-cog"})," ",Object(c.h)(d.c,{id:"home.translate-to"},"See translation")))),"-",Object(c.h)("button",{class:"btn btn-sm btn-link py-0 disabled"},n.a.formatDistance(s.createdDate,new Date,{locale:"no-NB"}),s.updatedDate&&Object(c.h)(e,null,Object(c.h)("span",{class:"font-weight-light ml-2"},"(Edited ",n.a.formatDistance(s.updatedDate,new Date,{locale:"no-NB"}),")"))))),s.likes&&s.likes.length>0&&Object(c.h)("small",{class:"position-absolute bg-light shadow-sm rounded-lg py-0 px-1",style:"bottom: 20px; right: 15px;"},Object(c.h)("i",{class:"fas fa-thumbs-up text-primary"})," ",s.likes.length)),Object(c.h)("div",{class:"col-10 offset-2 mb-2"},s&&n.a.isArray(P)&&P.map(t=>{const{user:a={}}=t,i=C.findPublicTeamByMembers(a.id),r=u.a.displayNameShort(a),m=u.a.displayName(a),O=a.image||(a.images?a.images[0]:void 0),y=t.likes&&t.likes.findIndex(e=>e.user===T.id)>-1,{currentLocationGeocode:w={}}=t,x=C.getCommentReplyTranslations({race:v,commentid:s.id,replyid:t.id,targetLang:D})||f[`${s.id}-${t.id}`];let k=x||t.comment;return j[`${s.id}-${t.id}`]&&(k=t.comment),Object(c.h)("div",{class:"row"},Object(c.h)("div",{class:"col-12 d-flex mb-2 position-relative"},Object(c.h)("div",{class:"text-center border rounded-circle imageRounded imageRoundedSmall",style:(O?`background-image: url("${O.s3SmallLink}"); background-size: cover;`:"")+" border-width: 3px !important;"},!a.image&&Object(c.h)("span",{class:"font-weight-lighter",style:"font-size: 15px;"},r)),Object(c.h)("div",{class:"flex-grow-1 pl-3 pt-0",style:"line-height: 1.2em;"},Object(c.h)("div",{class:"bg-light p-2 rounded-lg position-relative"},T.id===a.id&&Object(c.h)(e,null,Object(c.h)("span",{class:"float-right font-weight-lighter text-muted"},Object(c.h)("i",{class:"fas fa-ellipsis-h",onClick:this.toggleMenu,"data-id":t.id}))),o[t.id]&&Object(c.h)(e,null,Object(c.h)("div",{class:"position-absolute bg-white p-2 border rounded rounded-lg shadow-sm",style:"top: 30px; right: 10px; width: 60%; z-index: 999999;"},Object(c.h)("button",{class:"btn btn-link btn-block text-left",onClick:this.toggleEdit,"data-id":t.id,"data-comment":t.comment},Object(c.h)("i",{class:"fas fa-edit"})," Edit"),Object(c.h)("hr",null),Object(c.h)("button",{class:"btn btn-link btn-block text-left",onClick:this.toggleDeleteComment,"data-id":t.id},Object(c.h)("i",{class:"fas fa-trash-alt"})," Delete"))),Object(c.h)("span",{style:"font-size: 0.95em;"},Object(c.h)("h5",{class:"font-weight-bold mb-2",style:"font-size: 1.0em;"},m,i&&i.length>0&&Object(c.h)(e,null,Object(c.h)("span",{class:"font-weight-lighter text-muted ml-2"},i.filter(e=>1===e.public).slice(0,1).map(t=>Object(c.h)(e,null,"- ",Object(c.h)("a",{href:"/teams/public/"+t.uuidv4,class:"mr-2"}," ",t.name)))))),l[t.id]?Object(c.h)(e,null,Object(c.h)("div",{class:"d-flex bd-highlight"},Object(c.h)("div",{class:"p-0 w-100 bd-highlight"},Object(c.h)("label",{class:"sr-only",for:"inlineFormInput"},Object(c.h)(d.c,{id:"comments.comment"},"Kommentar")),Object(c.h)("div",{class:"border rounded rounded-lg position-relative"},Object(c.h)(d.b,null,Object(c.h)("textarea",{class:"form-control-plaintext px-2",type:"text",placeholder:Object(c.h)(d.c,{id:"comments.write-comment"},"Skriv en kommentar..."),onInput:Object(p.a)(this,"commentEditText"),onKeyUp:u.a.resizeTextarea,onFocus:u.a.resizeTextarea,style:"height: 2.3em;",value:g})))),Object(c.h)("div",{class:"p-0 pl-2 flex-shrink-1 bd-highlight"},Object(c.h)("button",{type:"button",class:"btn btn-primary mb-2",onClick:this.saveCommentReply,"data-commentid":s.id,"data-id":t.id},Object(c.h)("i",{class:"fas fa-paper-plane"}))))):Object(c.h)(e,null,Object(c.h)(b.a,{markdown:u.a.replaceImages(k,t.images,D),markdownOpts:u.a.getMarkdownOptions()})),h[t.id]&&Object(c.h)("div",{class:"clearfix mt-3 mb-3"},Object(c.h)("button",{class:"btn btn-danger float-left",onClick:this.deleteCommentReply,"data-id":t.id,"data-commentid":s.id},Object(c.h)("i",{class:"fas fa-trash-alt"})," Delete"),Object(c.h)("button",{class:"btn btn-secondary float-right",onClick:this.toggleDeleteComment,"data-id":t.id},Object(c.h)("i",{class:"fas fa-times-circle"})," Cancel")))),Object(c.h)("small",null,Object(c.h)("button",{class:"replyContainer btn btn-sm btn-link py-0 "+(y?"text-primary":""),onClick:this.likeReply,"data-comment":s.id,"data-id":t.id,disabled:y},y?Object(c.h)(d.c,{id:"comments.has-liked"},"Liked"):Object(c.h)(d.c,{id:"comments.like"},"Lik")),"-",Object(c.h)("button",{class:"btn btn-sm btn-link py-0",onClick:this.replyComment,"data-id":s.id},Object(c.h)(d.c,{id:"comments.comment-add"},"Kommentar")),t.language!==D&&Object(c.h)(e,null,"-",!j[`${s.id}-${t.id}`]&&x?Object(c.h)(e,null,Object(c.h)("button",{type:"button",class:"btn btn-sm btn-link","data-commentid":s.id,"data-replyid":t.id,onClick:this.showOriginal},Object(c.h)("i",{class:"fas fa-cog"}),"  ",Object(c.h)(d.c,{id:"home.translate-show-original"},"Show original"))):Object(c.h)(e,null,Object(c.h)("button",{type:"button",class:"btn btn-sm btn-link",onClick:this.translate,"data-commentid":s.id,"data-replyid":t.id},Object(c.h)("i",{class:"fas fa-cog"})," ",Object(c.h)(d.c,{id:"home.translate-to"},"See translation")))),"-",Object(c.h)("button",{class:"btn btn-sm btn-link py-0 disabled"},n.a.formatDistance(t.createdDate,new Date,{locale:"no-NB"}),t.updatedDate&&Object(c.h)(e,null,Object(c.h)("span",{class:"font-weight-light ml-2"},"(Edited ",n.a.formatDistance(t.updatedDate,new Date,{locale:"no-NB"}),")"))))),t.likes&&Object(c.h)("small",{class:"position-absolute bg-light shadow-sm rounded-lg py-0 px-1",style:"bottom: 20px; right: 15px;"},Object(c.h)("i",{class:"fas fa-thumbs-up text-primary"})," ",t.likes.length)))}),z-F>0&&Object(c.h)("div",null,Object(c.h)("button",{class:"btn btn-sm btn-link py-0",onClick:this.toggleReplies,"data-id":s.id},Object(c.h)(d.c,{id:"comments.show-more",fields:{more:z-F}},"Vis ",z-F," flere kommentarer...")))),t[s.id]&&Object(c.h)("div",{class:"col-11 offset-1 d-flex mb-2 position-relative"},Object(c.h)(m.a,{stores:this.props.stores,race:v,initCall:w,callback:y,commentId:s.id,inputRef:e=>this.inputRef[s.id]=e,inputRefObject:this.inputRef,key:"race-commentreply-"+s.id})))}),R-P>0&&Object(c.h)("div",null,Object(c.h)("button",{class:"btn btn-sm btn-link py-0",onClick:this.toggleComments},Object(c.h)(d.c,{id:"comments.show-more",fields:{more:R-P}},"Vis ",R-P," flere kommentarer..."))),s&&Object(c.h)("div",null,Object(c.h)("button",{class:"btn btn-sm btn-link py-0",onClick:this.toggleComments},Object(c.h)(d.c,{id:"comments.hide-all-comments"},"Skjul alle kommentarene."))))}})||o;t.a=O}).call(this,s("hosL").Fragment)},ZQlJ:function(e,t,s){"use strict";var a,i=s("hosL"),o=(s("Utv1"),s("/eY4")),c=(s("OhSV"),s("NDEG"));let n=Object(o.a)(a=class extends i.Component{constructor(e){super(e),this.scrollImages=e=>{const{scrollLeft:t,clientWidth:s}=e.target,a=t/s,i=Math.round(a),o=Math.abs(i-a);(Number.isInteger(a)||o<.1)&&this.setState({imageIdx:i})},this.sortByName=(e,t)=>{const{allDogs:s=[]}=this.props,a=s.find(t=>t.id===e),i=s.find(e=>e.id===t);return a&&i&&a.name>i.name?1:-1},this.state={imageIdx:0}}render(){const{dogs:e,allDogs:t=[],size:s="medium",onDogClick:a=(()=>{})}=this.props;return Object(i.h)("div",{class:"w-100"},Object(i.h)("div",{class:"d-flex flex-row flex-nowrap no-scrollbar",style:"overflow: auto; scroll-snap-type: x mandatory;",onScroll:this.scrollImages},e&&e.sort(this.sortByName).map(o=>{const n=t.find(e=>e.id===o);return n?Object(i.h)("div",{class:"col clearfix position-relative p-0 mx-2"},Object(i.h)("div",{class:"w-100 h-100 text-center rounded-lg imageContainer d-flex justify-content-center align-items-center",style:"\n                                        flex-wrap: wrap;\n                                        overflow-y: hidden;\n                                    ",onTouchstart:e=>{e.stopPropagation()},onTouchend:e=>{e.stopPropagation()},onTouchmove:e=>{e.stopPropagation()}},Object(i.h)(c.a,{stores:this.props.stores,dog:n,dogs:t.filter(t=>e.indexOf(t.id)>-1).sort((e,t)=>e.name>t.name?1:-1),className:"mx-auto",showName:!0,showPosition:!1,size:s,onDogClick:a}))):""})))}})||a;t.a=n},aGZh:function(e,t,s){"use strict";(function(e){function t(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,a)}return s}function a(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}var i,o=s("hosL"),c=s("/eY4");const n={};Object(c.a)(i=class extends o.Component{constructor(e){super(e),this.state=function(e){for(var s=1;s<arguments.length;s++){var i=null!=arguments[s]?arguments[s]:{};s%2?t(Object(i),!0).forEach((function(t){a(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):t(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}({},n)}render(){const{appState:t}=this.props.stores,{text:s}=this.props,{language:a="en"}=t;let i=s;const c=new RegExp(`/<${a}>(.*?)</${a}>/`);return s.replace(c,"$1")&&(i=s),Object(o.h)(e,null,i)}})}).call(this,s("hosL").Fragment)},cH0S:function(e,t,s){"use strict";var a,i=s("hosL"),o=(s("Utv1"),s("/eY4")),c=(s("OhSV"),s("ZOvn"));c.a.marginTop(!1),c.a.marginBottom();let n=Object(o.a)(a=class extends i.Component{render(){const{appState:e}=this.props.stores,{darkmode:t}=e,{children:s,onCloseClick:a=(()=>{})}=this.props;return Object(i.h)("div",{class:`fixed-bottom ${t?"bg-darkmode":"bg-lightmode"} border rounded rounded-lg pt-4 pb-3 px-4`,style:" bottom: 0; left: 0; width: 100vw; max-height: 80vh; min-height: 10vh; overflow: auto; z-index: 999999; border-radius: 20px 20px 0 0 !important; border-top-width: 5px !important; box-shadow: 0px 0 5px rgba(0, 0, 0, 0.8); ",onTouchmove:c.a.captureEvents,onScroll:c.a.captureEvents},Object(i.h)("button",{class:"btn btn-warning btn-sm float-right",onClick:a},Object(i.h)("i",{class:"fas fa-times"})),s)}})||a;t.a=n},eK6s:function(e){e.exports={gaugeBackground:"gaugeBackground__1UGxt",gauge:"gauge__2ZDxd",success:"success__3UQxg",primary:"primary__3pPV6",secondary:"secondary__-Vrk_",info:"info__3t5zs",warning:"warning__1jHlR",danger:"danger__BLVC9",gaugeText:"gaugeText__1on-w"}},epqT:function(e,t,s){"use strict";(function(e){function a(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,a)}return s}function i(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}var o,c=s("hosL"),n=s("Utv1"),l=s("/eY4"),r=s("OhSV");s("ZOvn");const d={showAddComment:!1};let h=Object(r.d)(()=>({subject:Object(c.h)(r.c,{id:"ad.subject"},"Annonseforespørsel"),body:Object(c.h)(r.c,{id:"ad.body"},"Hei, Jeg ønsker å vite mer om annonsering i appen The Musher.")}))(o=Object(l.a)(o=class extends c.Component{constructor(e){var t;super(e),t=this,this.logClick=async function(){const{adStore:e,userStore:s}=t.props.stores,{ads:a=[]}=e;let i=a.length>0?a[0].id:null;const{user:o={}}=s;await e.logClick({id:i,user:o.id})},this.state=function(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?a(Object(s),!0).forEach((function(t){i(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):a(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}({},d),this.updateTimer={},this.inputRef={},this.apiServer=n.a.getApiServer()}async loadAd(e=this.props){this.setState({isLoading:!0});const{adStore:t,workoutStore:s,userStore:a,appState:i}=this.props.stores,{section:o}=this.props,{path:c=""}=i,{currentTeam:n}=s,{user:l}=a,{language:r="en"}=l;let d,h,b,p,m,u={};n&&(u=a.findTeam(n,!0),u&&u.id&&(d=a.findTeamAmbition({ambition:u.ambitions,language:r}),h=a.findTeamType({type:u.type,language:r}),b=u.postalcode,p=u.place,m=u.country));const g=c.replace(/\d+$/,"detail");await t.load({query:{page:g,section:o}}),t.setTime(),this.setState({isLoading:!1})}componentDidMount(){this.loadAd()}componentWillReceiveProps(e){e.path!==this.props.path&&this.loadAd(e)}render(){const{adStore:t,userStore:s,appState:a}=this.props.stores,{subject:i,body:o,section:n}=this.props,{path:l}=a,{user:d={}}=s,{ads:h=[],time:b}=t;if(!d||!d.id||!h||0===h.length)return l.match(/\/(home)/i)?Object(c.h)(e,null,Object(c.h)("div",{class:"w-100"},Object(c.h)("div",{class:"row"},Object(c.h)("div",{class:"col-12 col-sm-8 col-lg-6 offset-sm-2 offset-lg-3 mb-0 position-relative"},Object(c.h)("div",{class:"border rounded-lg p-4 my-3"},Object(c.h)("span",{class:"float-right display-4 text-warning"},Object(c.h)("i",{class:"far fa-smile-wink"})),Object(c.h)("h5",null,Object(c.h)(r.c,{id:"ad.heading"},"Vil du annonsere her?")),Object(c.h)("div",null,Object(c.h)(r.c,{id:"ad.teaser"},"Det er super enkelt :)")),Object(c.h)(r.b,null,Object(c.h)("a",{href:`mailto:post@themusher.no?subject=${i}: ${l}: ${n}&body=${o}`,target:"_blank",rel:"noreferrer"},Object(c.h)("i",{class:"fas fa-paper-plane"})," ",Object(c.h)(r.c,{id:"ad.linktext"},"Ta kontakt med The Musher")))))))):Object(c.h)(e,null);const p=h[0];return Object(c.h)(e,null,Object(c.h)("div",{class:"w-100"},Object(c.h)("div",{class:"row"},Object(c.h)("div",{class:"col-12 col-sm-8 col-lg-6 offset-sm-2 offset-lg-3 mb-0 position-relative"},Object(c.h)("div",null,Object(c.h)("small",null,Object(c.h)("small",{class:"text-muted"},Object(c.h)(r.c,{id:"ad.ad"},"Annonse"),":",Object(c.h)("img",{src:`${this.apiServer}/api/ads/${p.id}/view?user=${d.id}&time=${b}`,style:"width: 1; height: 1; opacity: 0.1;"})))),p.target?Object(c.h)(e,null,Object(c.h)("a",{class:"stretched-link",href:""+p.url,target:p.target||"_blank",rel:"noopener noreferrer",onClick:this.logClick,native:!0},p.images&&p.images[0]&&Object(c.h)(e,null,Object(c.h)("img",{src:p.images[0].s3LargeLink,class:"img-fluid rounded-lg"})))):Object(c.h)(e,null,Object(c.h)("a",{class:"stretched-link",href:""+p.url,onClick:this.logClick},p.images&&p.images[0]&&Object(c.h)(e,null,Object(c.h)("img",{src:p.images[0].s3LargeLink,class:"img-fluid rounded-lg"}))))))))}})||o)||o;t.a=h}).call(this,s("hosL").Fragment)},fVsX:function(e,t,s){"use strict";var a,i=s("hosL"),o=(s("Utv1"),s("/eY4")),c=(s("OhSV"),s("ZOvn"));c.a.marginTop(!1),c.a.marginBottom();let n=Object(o.a)(a=class extends i.Component{render(){const{children:e,height:t="65px"}=this.props;return Object(i.h)("nav",{class:"navbar navbar-themed bg-light fixed-top py-0",style:`height: ${t};`},e)}})||a;t.a=n},gOLw:function(e,t,s){"use strict";(function(e){function a(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,a)}return s}function i(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}var o,c=s("hosL"),n=s("Utv1"),l=s("/eY4"),r=(s("X9Km"),s("NMoA")),d=s("VKmm"),h=s("rWES"),b=s("epqT"),p=s("yHBq"),m=s("q/oJ"),u=s("gWxU"),g=s("ZOvn");const O=g.a.marginTop(!1),j={loading:!1,limit:10,offset:0,idxConfirm:0,idxSuggestion:1,idxAd:5,sessionid:(new Date).getTime()},f=["id","type","user","team","title"];let v=Object(l.a)(o=class extends c.Component{constructor(t){var s;super(t),s=this,this.reloadStories=async function(){const{appState:e}=s.props.stores;let{limit:t,offset:a}=s.state;a=0,s.setState({offset:a}),await s.loadStoriesPublicFeed({props:s.props,limit:t,offset:a}),e.appContainerScrollTop()},this.setCheckForNewStories=(e=this.props)=>{this.checkForNewStoriesTimer=setInterval(()=>this.checkForNewStories({props:e}),6e4)},this.clearCheckForNewStories=()=>{clearInterval(this.checkForNewStoriesTimer)},this.insertTopRanked=()=>{const{storyStore:e}=this.props.stores,{publicFeed:t,topRankedStories:s}=e,a=n.a.shuffleArray(s),i=[...t];let o=0;const c=new Date;i.forEach((e,t)=>{const s=n.a.parseInputDate(e.date);Math.floor((c.getTime()-s.getTime())/1e3)<86400&&(o=t+1)});const l=i.length;if(l>o+3){for(let e=0,t=3;e<t;e+=1){const t=g.a.randomInt(o,l);n.a.isObject(a[e])&&i.splice(t,0,a[e])}e.localUpdateField("publicFeed",i)}},this.insertAds=()=>{const{idxAd:e}=this.state,{storyStore:t}=this.props.stores,{publicFeed:s}=t,a=[...s];a.splice(e,0,{type:"ad",wrapperClassNames:"row",contentClassNames:"col-12"}),t.localUpdateField("publicFeed",a)},this.insertTeamConfirm=()=>{const{idxConfirm:e}=this.state,{storyStore:t}=this.props.stores,{publicFeed:s}=t,a=[...s];a.splice(e,0,{type:"teamConfirm",wrapperClassNames:"row",contentClassNames:"col-12"}),t.localUpdateField("publicFeed",a)},this.insertTeamSuggestions=()=>{const{idxSuggestion:e}=this.state,{storyStore:t}=this.props.stores,{publicFeed:s}=t,a=[...s];a.splice(e,0,{type:"teamSuggestions",wrapperClassNames:"row",contentClassNames:"col-12"}),t.localUpdateField("publicFeed",a)},this.setLoadMore=()=>{const{storyStore:e}=this.props.stores;e.setLoadMore(()=>{let{limit:e,offset:t}=this.state;t+=e,this.setState({offset:t}),this.loadStoriesPublicFeed({limit:e,offset:t})})},this.unsetLoadMore=()=>{const{storyStore:e}=this.props.stores;e.setLoadMore(()=>{})},this.onTeamClick=(e,t)=>(e.preventDefault(),e.stopPropagation(),this.setState({showTeam:t}),!1),this.hideTeam=()=>{this.setState({showTeam:null})},this.onUserClick=e=>(e.preventDefault(),e.stopPropagation(),!1),this.setupIntersection=()=>{this.setState({handleIntersection:g.a.intersectionObserverCallback});const{storyStore:e}=this.props.stores;this.scrollViewTimer=setInterval(()=>e.postScrollview(g.a.getIntersectionObserverHistory()),3e4)},this.renderContent=({obj:t})=>{const{appState:s}=this.props.stores,{path:a}=s,{hashtag:i}=this.props;return"ad"===t.type?Object(c.h)(e,null,Object(c.h)(b.a,{stores:this.props.stores,path:a})):"teamConfirm"===t.type?Object(c.h)(e,null,Object(c.h)(h.a,{stores:this.props.stores})):"teamSuggestions"===t.type?Object(c.h)(e,null,Object(c.h)(d.a,{stores:this.props.stores})):Object(c.h)(e,null,Object(c.h)(r.a,{stores:this.props.stores,story:t,hashtag:i,key:"story-detail-"+t.id,onTeamClick:this.onTeamClick,onUserClick:this.onUserClick}))},this.state=function(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?a(Object(s),!0).forEach((function(t){i(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):a(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}({},j),this.inputRef={},this.ref={}}async loadStoriesPublicFeed({props:e=this.props,limit:t,offset:s}){const{hashtag:a,hashtags:i,teamid:o}=e,{storyStore:c}=e.stores;await c.loadPublicFeed({hashtag:a,hashtags:i,teamid:o,limit:t,offset:s,sort:void 0}),s||(this.insertTopRanked(),this.insertTeamConfirm())}async checkForNewStories({props:e=this.props}){const{hashtag:t,hashtags:s,teamid:a}=e,{storyStore:i}=e.stores;await i.checkForNewStories({hashtag:t,hashtags:s,teamid:a})}componentWillMount(){this.setupIntersection()}componentDidMount(){const{limit:e}=this.state;this.loadStoriesPublicFeed({limit:e,offset:0}),this.setLoadMore(),this.setCheckForNewStories()}componentWillUnmount(){this.unsetLoadMore();const{storyStore:e}=this.props.stores;e.postScrollview(g.a.getIntersectionObserverHistory()),clearInterval(this.scrollViewTimer),this.clearCheckForNewStories()}componentWillReceiveProps(e){if(e.hashtag!==this.props.hashtag||e.path!==this.props.path){const{limit:t}=this.state;this.loadStoriesPublicFeed({props:e,limit:t,offset:0})}}render(){const{loading:t,handleIntersection:s,sessionid:a,showTeam:i}=this.state,{storyStore:o,appState:n}=this.props.stores,{publicFeed:l,hasNewStories:r}=o,{darkmode:d}=n;return Object(c.h)(e,null,i&&Object(c.h)(m.a,null,Object(c.h)(u.default,{stores:this.props.stores,teamid:i,marginTop:"0px;",marginBottom:"0px;",back:this.hideTeam})),Object(c.h)("div",{class:"w-100"},r&&Object(c.h)(e,null,Object(c.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 d-flex justify-content-center fixed-top",style:`margin-top: ${O};`},Object(c.h)("button",{class:"btn btn-sm btn-primary rounded-pill",onClick:this.reloadStories},"New stories"))),Object(c.h)(p.a,{data:l,wrapperClassNames:"row pb-1",contentClassNames:`col-12 col-sm-8 col-lg-6 offset-sm-2 offset-lg-3 my-1 position-relative rounded rounded-lg py-3 bg-${d?"black":"white"} shadow-sm`,renderContent:this.renderContent,dataFields:f,handleIntersection:s,sessionid:a}),t&&Object(c.h)("div",{class:"d-flex justify-content-center"},Object(c.h)("div",{class:"spinner-border text-primary",role:"status"},Object(c.h)("span",{class:"sr-only"},"Loading...")))))}})||o;t.a=v}).call(this,s("hosL").Fragment)},hwiY:function(e,t,s){"use strict";(function(e){function a(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,a)}return s}function i(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?a(Object(s),!0).forEach((function(t){o(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):a(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function o(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}var c,n,l,r=s("hosL"),d=s("Utv1"),h=s("/eY4"),b=s("OhSV"),p=(s("Y3FI"),s("fh8t")),m=s.n(p),u=(s("go65"),s("ZOvn")),g=s("om2D"),O=s("TiXY"),j=s("cH0S"),f=s("9xg+");let v=Object(h.a)(c=class extends r.Component{constructor(...e){var t;super(...e),t=this,this.handleImageErrored=e=>{const t=e.target;t.onerror=null,setTimeout(()=>{t.src+="?"+new Date},1e3)},this.removeImage=async function(e){const{userStore:s}=t.props.stores,{user:a}=t.props;s.removeImage({id:a.id,name:e.target.parentElement.dataset.name||e.target.dataset.name})},this.removeMainImage=()=>{const{user:e,field:t,updateField:s}=this.props;s({id:e.id,field:t,value:{}})}}render(){const{saved:e,user:t,type:s="text",field:a,title:i,icon:o,help:c,onInput:n,updateField:l}=this.props,d=t[a],h=e=>!t.image||e.md5!==t.image.md5;return"image"===s?Object(r.h)("div",{class:"form-group "+(e[`${a}.${t.id}`]?"is-valid":"")},Object(r.h)("label",{for:a+"Input"},o&&Object(r.h)("i",{class:o+" text-muted"})," ",i),Object(r.h)("div",{class:"container-fluid"},Object(r.h)("div",{class:"row"},t.image&&t.image.s3SmallLink&&Object(r.h)("div",{class:"col-3 p-1"},Object(r.h)("img",{src:t.image.s3SmallLink,class:"img-fluid border rounded-lg",onError:this.handleImageErrored}),Object(r.h)("button",{class:"btn btn-sm btn-link",onClick:this.removeMainImage,"data-name":t.image.name},Object(r.h)("i",{class:"fas fa-trash"})," Del"),Object(r.h)("span",{class:"badge badge-success"},"Main")),t.images&&t.images.filter(h).map(e=>Object(r.h)("div",{class:"col-3 p-1"},Object(r.h)("img",{src:e.s3SmallLink,class:"img-fluid",onError:this.handleImageErrored}),Object(r.h)("button",{class:"btn btn-sm btn-link",onClick:this.removeImage,"data-name":e.name},Object(r.h)("i",{class:"fas fa-trash"})," Del"))))),Object(r.h)(g.a,{saved:e,object:t,field:a,updateField:l,autoOpen:!1}),e[`${a}.${t.id}`]?Object(r.h)("div",{class:"valid-feedback",style:"display: block;"},Object(r.h)(b.c,{id:"users.changes-saved"},"Endringene er lagret")):Object(r.h)("small",{id:a+"Help",class:"form-text text-muted"},c)):"file"===s?Object(r.h)("div",{class:"form-group "+(e[`${a}.${t.id}`]?"is-valid":"")},Object(r.h)("label",{for:a+"Input"},o&&Object(r.h)("i",{class:o+" text-muted"})," ",i),Object(r.h)(O.a,{saved:e,object:t,field:a,updateField:l}),e[`${a}.${t.id}`]?Object(r.h)("div",{class:"valid-feedback",style:"display: block;"},Object(r.h)(b.c,{id:"users.changes-saved"},"Endringene er lagret")):Object(r.h)("small",{id:a+"Help",class:"form-text text-muted"},c)):Object(r.h)("div",{class:"form-group "+(e[`${a}.${t.id}`]?"is-valid":"")},Object(r.h)("label",{for:a+"Input"},o&&Object(r.h)("i",{class:o+" text-muted"})," ",i),Object(r.h)("input",{type:"text",class:"form-control "+(e[`${a}.${t.id}`]?"is-valid":""),id:a+"Input","aria-describedby":a+"Help",value:d,"data-id":t.id,"data-field":a,onInput:n}),e[`${a}.${t.id}`]?Object(r.h)("div",{class:"valid-feedback",style:"display: block;"},Object(r.h)(b.c,{id:"users.changes-saved"},"Endringene er lagret")):Object(r.h)("small",{id:a+"Help",class:"form-text text-muted"},c))}})||c,y=Object(h.a)(n=class extends r.Component{render(){const{dog:t,children:s,onDogClick:a=(()=>{})}=this.props,{userStore:i}=this.props.stores,{vaccineLogStatuses:o}=i;return Object(r.h)("div",{class:"d-flex mb-0 position-relative mb-3 dogInfo","data-id":t.id},Object(r.h)("div",null,Object(r.h)("div",{class:"text-center border rounded-circle imageRounded imageRoundedMedium text-muted pt-2",style:t.image?`background-image: url("${t.image.s3SmallLink}"); background-size: cover;`:""},!t.image&&Object(r.h)("span",{class:"font-weight-lighter",style:"font-size: 35px;"},d.a.ucfirst(t.name,!0)))),Object(r.h)("div",{class:"flex-grow-1 pl-3 pr-2",onClick:a},s,Object(r.h)("span",{class:"float-right"},t.birth&&Object(r.h)("span",{class:"mr-2"},d.a.age(t.birth,t.deceased)),"female"===t.gender?Object(r.h)("i",{class:"fas fa-venus"}):Object(r.h)("i",{class:"fas fa-mars"})),Object(r.h)("h6",{class:"mb-1",style:"line-height: 1.0em;"},t.shortname||t.name," ",t.shortname&&""!==t.shortname&&Object(r.h)(e,null," - ",Object(r.h)("span",{class:"font-weight-lighter"},t.name))),t.chipId?Object(r.h)(e,null,Object(r.h)("i",{class:"fas fa-microchip text-muted"})," ",t.chipId):Object(r.h)(e,null,Object(r.h)("div",{class:"alert alert-danger",role:"alert"},Object(r.h)(b.c,{id:"races.missing-chipid"},"Missing chid id"))),Object(r.h)("div",null,o&&o.filter(e=>e.chipId===t.chipId).map(t=>Object(r.h)("span",{class:`badge badge-${t.inKarens?"warning":"success"} mr-2 mb-1`},t.vaccineAgens.name,Object(r.h)("span",{class:"font-weight-lighter ml-2 d-none d-sm-block"},Object(r.h)("i",{class:"fas fa-calendar-check"})," ",d.a.isoDate(t.vaccineAgens.durationEnd,!1,!1,!0),t.inKarens&&Object(r.h)(e,null,Object(r.h)("br",null),"(karens: ",d.a.format(t.karensDaysLeft,0)," days left)")))))))}})||n,w=Object(h.a)(l=class extends r.Component{constructor(e){var t;super(e),t=this,this.updateField=e=>{const{id:t,field:s,type:a,elementtype:i}=e.target.dataset,o=e.target.value;this.updateFieldValue({id:parseInt(t,10),field:s,value:o,type:a,elementtype:i})},this.updateFieldValue=({id:e,field:s,value:a,datatype:i,elementtype:o,skipTimer:c=!1})=>{const{userStore:n}=this.props.stores;let l=a,r=a;const{user:d}=n;"images"===s&&Array.isArray(d.images)&&Array.isArray(a)&&(r=[...d.images,...a]),"array"!==i||Array.isArray(a)||(l="number"===o?a.split(",").map(e=>parseFloat(e)||e):a.split(",")),n.updateField(e,s,r),c?this.doUpdateField(e,s,l):(clearTimeout(this.updateTimer[s]),this.updateTimer[s]=setTimeout((async function(){t.doUpdateField(e,s,l)}),500))},this.signupToRace=async function(){const{raceStore:e,userStore:s}=t.props.stores,{user:a}=s,{signup:o}=e,{race:c={}}=t.props,n=c.id;await e.addContestant({id:n,classId:o.class,newContestant:i({team:a.team,firstname:a.firstname,lastname:a.lastname,sportsClub:a.sportsClub,email:a.email,cellphone:a.cellphone,facebook:a.facebook,instagram:a.instagram},o)})},this.updateSignup=e=>{const t=e.target.id,s=e.target.value,{raceStore:a}=this.props.stores;a.updateObjectKeyValue("signup",t,s)},this.editSignup=e=>{const{race:t={}}=this.props,s=t.id,{raceStore:a}=this.props.stores,i=e.target.id,o=e.target.value,{classid:c,contestantid:n}=e.target.dataset;a.updateObjectKeyValue("signup",i,o);const l={raceClassId:c,contestantId:n,["raceClassContestant"+d.a.ucfirst(i)]:o};clearTimeout(this.updateTimer[i]),this.updateTimer[i]=setTimeout((async function(){a.editClass({id:s,data:l}),a.localUpdateSignup(i,o),"team"===i&&await a.loadTeams(o,!0)}),500)},this.clearSignupValue=async function(e){const{race:s={}}=t.props,a=s.id,{raceStore:i}=t.props.stores,o=e.target.id,{classid:c,contestantid:n}=e.target.dataset;i.updateObjectKeyValue("signup",o,"null");const l={raceClassId:c,contestantId:n,["raceClassContestant"+d.a.ucfirst(o)]:"null"};clearTimeout(t.updateTimer[o]),i.editClass({id:a,data:l}),i.localUpdateSignup(o,"null"),"team"===o&&await i.loadTeams("null",!0)},this.toggleDrawer=()=>{const{showDrawer:e}=this.state;this.setState({showDrawer:!e})},this.onDogClick=e=>{const{id:t}=e.target.closest(".dogInfo").dataset;console.log("onDogClick",t);const{userStore:s,raceStore:a}=this.props.stores,{signup:i}=a,o=s.findDogsByTeam(parseInt(i.team,10)).find(e=>e.id==t);this.setState({showDrawer:!0,currentDog:o})},this.chooseSubmenu=e=>{e.stopPropagation();this.setState({submenu:e.target.parentElement.dataset.menu||e.target.dataset.menu})},this.state={submenu:"info",showDrawer:!1},this.inputRef={},this.updateTimer={}}async doUpdateField(e,t,s){const{userStore:a}=this.props.stores;await a.saveField(e,t,s)}render(){const{submenu:t,showDrawer:s,currentDog:a}=this.state,{userStore:i,raceStore:o}=this.props.stores,{user:c={},teams:n=[],saved:l}=i,{language:h="en"}=c,{race:p={}}=this.props,{signup:g}=o;let O={},w=[];g.class&&(O=o.getRaceClassById(g.class)),g.team&&(w=i.findDogsByTeam(parseInt(g.team,10)));const x=new Date,k=u.a.getAlphabet(O.dogs).filter(e=>g["dog"+e]).map(e=>g["dog"+e]),S=e=>-1===k.indexOf(e.chipId);return Object(r.h)(e,null,Object(r.h)("div",{class:"row"},Object(r.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-0 mb-2"},Object(r.h)("h2",{class:"mb-0"},Object(r.h)(b.c,{id:"races.signup"},"Påmelding"))),Object(r.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-3 mb-2"},x>=new Date(p.signupStartDate)&&x<=new Date(p.signupEndDate)?Object(r.h)(e,null,Object(r.h)("span",{class:"font-weight-lighter"},Object(r.h)(b.c,{id:"races.signed-in-as"},"Logget inn som"),":")," ",c.email,Object(r.h)("br",null),Object(r.h)("br",null),g.id?Object(r.h)(e,null,Object(r.h)("div",{class:"font-weight-bold mb-4"},Object(r.h)("i",{class:"fas fa-check text-success"})," ",Object(r.h)(b.c,{id:"races.signed-up"},"Din bruker er påmeldt!"),Object(r.h)("br",null)),!p.liveRace&&p.signuppayment&&Object(r.h)(e,null,Object(r.h)("div",{class:"form-group row my-2"},Object(r.h)("label",{for:"cellphone",class:"col-2 col-form-label text-right font-weight-lighter"},Object(r.h)(b.c,{id:"races.signup"},"Påmelding")),Object(r.h)("div",{class:"col-10"},g.paidSignupfee?Object(r.h)("div",{class:"py-2"},Object(r.h)(b.c,{id:"races.paid"},"Betalt"),": ",d.a.formatDate(g.paidSignupfee),Object(r.h)("i",{class:"fas fa-check text-success ml-3"})):Object(r.h)(e,null,Object(r.h)("div",{class:"alert alert-danger mb-1",role:"alert"},Object(r.h)("h5",null,Object(r.h)("span",{class:"font-weight-lighter"},Object(r.h)(b.c,{id:"races.payment-info"},"Betaling påmelding"),":"),Object(r.h)("br",null),Object(r.h)(m.a,{markdown:u.a.replaceImages(p.signuppayment,p.images,h),markdownOpts:u.a.getMarkdownOptions()}),O.signupfee||p.signupfee," NOK")))))),Object(r.h)("div",{class:"w-100 overflow-hidden"},Object(r.h)("div",{class:"d-flex flex-row flex-nowrap pb-2 px-1",style:"overflow: auto; scroll-snap-type: x mandatory;"},Object(r.h)("div",{class:"col px-0 pt-2"},Object(r.h)("button",{class:`btn btn-block rounded-pill-left rounded-none ${"info"===t?"btn-primary":"btn-outline-primary"} text-nowrap`,style:"text-overflow: ellipsis; overflow: hidden;","data-menu":"info",onClick:this.chooseSubmenu},Object(r.h)("i",{class:"fas fa-info-circle"})," ",Object(r.h)(b.c,{id:"race.info"},"Info"))),Object(r.h)("div",{class:"col px-0 pt-2"},Object(r.h)("button",{class:`btn btn-block rounded-pill-right rounded-none ${"chiplist"===t?"btn-primary":"btn-outline-primary"} text-nowrap`,style:"text-overflow: ellipsis; overflow: hidden;","data-menu":"chiplist",onClick:this.chooseSubmenu},Object(r.h)("i",{class:"fas fa-list-ol"})," ",Object(r.h)(b.c,{id:"race.chiplist"},"Chiplist"))))),"info"===t&&Object(r.h)(e,null,Object(r.h)("div",{class:"form-group row my-5"},Object(r.h)("label",{for:"team",class:"col-3 col-form-label text-right font-weight-lighter"},Object(r.h)(b.c,{id:"races.team"},"Team")),Object(r.h)("div",{class:"col-9"},Object(r.h)("select",{class:"form-control form-control-lg",id:"team","aria-describedby":"teamHelp","data-classid":g.class,"data-contestantid":g.id,onInput:this.editSignup,value:g.team},Object(r.h)("option",{value:""},"-- ",Object(r.h)(b.c,{id:"races.choose-team"},"Velg team")," --"),n.map(e=>Object(r.h)("option",{value:e.id},e.name))),g.team?Object(r.h)(e,null):Object(r.h)(e,null,Object(r.h)("div",{class:"alert alert-danger clearfix",role:"alert"},Object(r.h)("span",{class:"display-4 float-left mr-3"},Object(r.h)("i",{class:"fas fa-exclamation-triangle"})),Object(r.h)(b.c,{id:"races.choose-race-team",fields:{title:p.title}},"Please choose race team for ",p.title))))),Object(r.h)("div",{class:"form-group row my-2"},Object(r.h)("label",{for:"cellphone",class:"col-3 col-form-label text-right font-weight-lighter"},Object(r.h)(b.c,{id:"races.cellphone"},"Mobil")),Object(r.h)("div",{class:"col-9"},Object(r.h)(b.b,null,Object(r.h)("input",{type:"text",class:"form-control",id:"cellphone","data-classid":g.class,"data-contestantid":g.id,onInput:this.editSignup,value:g.cellphone,placeholder:Object(r.h)(b.c,{id:"races.cellphone-help"},"Hva er mobilnummer ditt?")})))),g.name&&Object(r.h)("div",{class:"form-group row my-2"},Object(r.h)("label",{for:"name",class:"col-3 col-form-label text-right font-weight-lighter"},Object(r.h)(b.c,{id:"races.name"},"Navn")),Object(r.h)("div",{class:"col-9"},g.name)),Object(r.h)("div",{class:"form-group row my-2"},Object(r.h)("label",{for:"firstname",class:"col-3 col-form-label text-right font-weight-lighter"},Object(r.h)(b.c,{id:"races.firstname"},"Fornavn")),Object(r.h)("div",{class:"col-9"},Object(r.h)(b.b,null,Object(r.h)("input",{type:"text",class:"form-control",id:"firstname","data-classid":g.class,"data-contestantid":g.id,onInput:this.editSignup,value:g.firstname,placeholder:Object(r.h)(b.c,{id:"races.firstname-help"},"Hva er fornavnet ditt?")})))),Object(r.h)("div",{class:"form-group row my-2"},Object(r.h)("label",{for:"lastname",class:"col-3 col-form-label text-right font-weight-lighter"},Object(r.h)(b.c,{id:"races.lastname"},"Etternavn")),Object(r.h)("div",{class:"col-9"},Object(r.h)(b.b,null,Object(r.h)("input",{type:"text",class:"form-control",id:"lastname","data-classid":g.class,"data-contestantid":g.id,onInput:this.editSignup,value:g.lastname,placeholder:Object(r.h)(b.c,{id:"races.lastname-help"},"Hva er etternavnet ditt?")})))),Object(r.h)("div",{class:"form-group row my-2"},Object(r.h)("label",{for:"sportsClub",class:"col-3 col-form-label text-right font-weight-lighter"},Object(r.h)(b.c,{id:"races.sportsclub"},"Klubb")),Object(r.h)("div",{class:"col-9"},Object(r.h)(b.b,null,Object(r.h)("input",{type:"text",class:"form-control",id:"sportsClub","data-classid":g.class,"data-contestantid":g.id,onInput:this.editSignup,value:g.sportsClub,placeholder:Object(r.h)(b.c,{id:"races.sportsClub-help"},"Hvilken klubb tilhører du?")})))),Object(r.h)("div",{class:"form-group row my-2"},Object(r.h)("label",{for:"facebook",class:"col-3 col-form-label text-right font-weight-lighter"},Object(r.h)(b.c,{id:"races.facebook"},"Facebook")),Object(r.h)("div",{class:"col-9"},Object(r.h)(b.b,null,Object(r.h)("input",{type:"text",class:"form-control",id:"facebook","data-classid":g.class,"data-contestantid":g.id,onInput:this.editSignup,value:g.facebook,placeholder:Object(r.h)(b.c,{id:"races.facebook-help"},"Hva er Facebook brukernavnet ditt?")})))),Object(r.h)("div",{class:"form-group row my-2"},Object(r.h)("label",{for:"instagram",class:"col-3 col-form-label text-right font-weight-lighter"},Object(r.h)(b.c,{id:"races.instagram"},"Instagram")),Object(r.h)("div",{class:"col-9"},Object(r.h)(b.b,null,Object(r.h)("input",{type:"text",class:"form-control",id:"instagram","data-classid":g.class,"data-contestantid":g.id,onInput:this.editSignup,value:g.instagram,placeholder:Object(r.h)(b.c,{id:"races.instagram-help"},"Hva er Instagram brukernavnet ditt?")})))),Object(r.h)("div",{class:"form-group row my-2"},Object(r.h)("label",{for:"team",class:"col-3 col-form-label text-right font-weight-lighter"},Object(r.h)(b.c,{id:"races.class"},"Klasse")),Object(r.h)("div",{class:"col-9"},Object(r.h)("select",{class:"form-control",id:"class","aria-describedby":"classHelp","data-classid":g.class,"data-contestantid":g.id,onInput:this.editSignup,value:g.class,disabled:!0},Object(r.h)("option",{value:""},"-- ",Object(r.h)(b.c,{id:"races.choose-class"},"Velg klasse")," --"),p.classes&&p.classes.sort((e,t)=>e.distance-t.distance).map(t=>Object(r.h)(e,null,Object(r.h)("option",{value:t.id},t.title,!p.liveRace&&Object(r.h)(e,null,"- ",t.distance," km - Påmelding: ",t.signupfee||p.signupfee," NOK"))))))),p.rules&&Object(r.h)("div",{class:"form-group row my-2"},Object(r.h)("label",{for:"team",class:"col-3 col-form-label text-right font-weight-lighter"}," "),Object(r.h)("div",{class:"col-9 pl-5"},Object(r.h)("input",{type:"checkbox",class:"form-check-input",id:"termsAndAgreement","data-classid":g.class,"data-contestantid":g.id,onInput:this.editSignup,checked:g.termsAndAgreement,value:1}),Object(r.h)("label",{class:"form-check-label",for:"termsAndAgreement"},Object(r.h)(b.c,{id:"races.agreement-accept"},"Jeg har lest og godtar reglene for løpet.")))),p.declaration&&Object(r.h)("div",{class:"form-group row my-4"},Object(r.h)("div",{class:"col-12 text-center border-top"},Object(r.h)("h5",null,Object(r.h)(b.c,{id:"races.declaration"},"Declaration"))),Object(r.h)("details",{class:"col-12"},g.declaration?Object(r.h)(e,null,Object(r.h)("summary",null,Object(r.h)(b.c,{id:"races.see-declaration"},"See declaration")," (",Object(r.h)("span",{class:"text-muted font-weight-light"},Object(r.h)(b.c,{id:"races.declaration-signed"},"Declaration signed"),": ",d.a.isoDate(g.declarationDate)),")")):Object(r.h)(e,null,Object(r.h)("summary",null,Object(r.h)("h5",{class:"btn btn-primary"},Object(r.h)(b.c,{id:"races.see-declaration"},"See declaration")))),Object(r.h)(m.a,{markdown:u.a.replaceImages(p.declaration,p.images,h),markdownOpts:u.a.getMarkdownOptions()}),g.declaration?Object(r.h)(e,null,Object(r.h)("i",null,Object(r.h)(b.c,{id:"races.declaration-signed"},"Declaration signed"),": ",d.a.isoDate(g.declarationDate))):Object(r.h)(e,null,Object(r.h)("div",{class:"pl-5"},Object(r.h)("input",{type:"checkbox",class:"form-check-input",id:"declaration","data-classid":g.class,"data-contestantid":g.id,onInput:this.editSignup,checked:g.declaration,value:1}),Object(r.h)("label",{class:"form-check-label",for:"declaration"},Object(r.h)(b.c,{id:"races.declaration-accept"},"I hereby sign the declaration for the race!")))))),Object(r.h)(v,{saved:l,user:c,field:"image",icon:"fas fa-camera",type:"image",stores:this.props.stores,title:Object(r.h)(b.c,{id:"users.photos"},"Bilder"),help:Object(r.h)(b.c,{id:"users.photos-help"},"Bilder av deg."),onInput:this.updateField,updateField:this.updateFieldValue})),"chiplist"===t&&Object(r.h)(e,null,Object(r.h)("div",{class:"form-group row my-4"},Object(r.h)("div",{class:"col-12 text-center border-top pt-3"},Object(r.h)("h5",null,Object(r.h)(b.c,{id:"races.chiplist"},"Chiplist"))),O&&O.dogs&&u.a.getAlphabet(O.dogs,["R1","R2"]).map(t=>{const s=w&&w.length>0?w.find(e=>e.chipId===g["dog"+t]):null;return Object(r.h)(e,null,Object(r.h)("div",{class:"col-12 center border-top pt-3 d-flex"},Object(r.h)("div",{class:"display-4",style:"width: 50px;"},t),Object(r.h)("div",{class:"flex-grow-1 pl-3 pr-2"},s?Object(r.h)(e,null,Object(r.h)(y,{stores:this.props.stores,dog:s,onDogClick:this.onDogClick},Object(r.h)("button",{class:"btn btn-danger float-right ml-2",onClick:this.clearSignupValue,id:"dog"+t,"data-classid":g.class,"data-contestantid":g.id},Object(r.h)("i",{class:"fas fa-times"})))):Object(r.h)(e,null,Object(r.h)("select",{class:"form-control p-0",id:"dog"+t,"data-classid":g.class,"data-contestantid":g.id,onInput:this.editSignup},Object(r.h)("option",{value:""},"-- Choose dog for this position --"),w.filter(S).map(s=>Object(r.h)(e,null,Object(r.h)("option",{value:s.chipId,selected:s.chipId===g["dog"+t]?"selected":""},s.shortname||s.name," - ",s.birth&&Object(r.h)(e,null,d.a.age(s.birth,s.deceased))," ","female"===s.gender?"♀️":"♂️"))))))))}))),"team"===t&&Object(r.h)(e,null,Object(r.h)("div",{class:"form-group row my-4"},Object(r.h)("div",{class:"col-12 border-top pt-3"},w&&w.length>0?Object(r.h)(e,null,w.map(t=>Object(r.h)(e,null,Object(r.h)(y,{stores:this.props.stores,dog:t})))):Object(r.h)(e,null,Object(r.h)("div",{class:"text-center text-muted"},Object(r.h)("div",{class:"display-1"},Object(r.h)("i",{class:"fas fa-dog"})),Object(r.h)("h3",{class:"font-weight-lighter"},Object(r.h)(b.c,{id:"race.add-dogs"},"Add a team to your race signup to see the dogs.")))))))):Object(r.h)(e,null,p.liveRace?Object(r.h)(e,null,"Signup is done at the race normal web pages."):Object(r.h)(e,null,Object(r.h)("div",{class:"form-group"},Object(r.h)("label",{for:"cellphone"},Object(r.h)(b.c,{id:"races.cellphone"},"Mobil")),Object(r.h)("input",{type:"text",class:"form-control",id:"cellphone","aria-describedby":"cellphoneHelp",placeholder:c.cellphone,onInput:this.updateSignup,value:g.cellphone}),Object(r.h)("small",{id:"cellphoneHelp",class:"form-text text-muted"},Object(r.h)(b.c,{id:"races.cellphone-help"},"'Hva er mobilnummer ditt?'"))),g.name&&Object(r.h)("div",{class:"row"},Object(r.h)("div",{class:"col"},Object(r.h)("div",{class:"form-group"},Object(r.h)("label",{for:"name"},Object(r.h)(b.c,{id:"races.name"},"Name")),Object(r.h)("input",{type:"text",class:"form-control",id:"name","aria-describedby":"nameHelp",placeholder:c.name,onInput:this.updateSignup,value:g.name}),Object(r.h)("small",{id:"nameHelp",class:"form-text text-muted"},Object(r.h)(b.c,{id:"races.name-help"},"Hva er navnet ditt?"))))),Object(r.h)("div",{class:"row"},Object(r.h)("div",{class:"col"},Object(r.h)("div",{class:"form-group"},Object(r.h)("label",{for:"firstname"},Object(r.h)(b.c,{id:"races.firstname"},"Fornavn")),Object(r.h)("input",{type:"text",class:"form-control",id:"firstname","aria-describedby":"firstnameHelp",placeholder:c.firstname,onInput:this.updateSignup,value:g.firstname}),Object(r.h)("small",{id:"firstnameHelp",class:"form-text text-muted"},Object(r.h)(b.c,{id:"races.firstname-help"},"Hva er fornavnet ditt?")))),Object(r.h)("div",{class:"col"},Object(r.h)("div",{class:"form-group"},Object(r.h)("label",{for:"lastname"},Object(r.h)(b.c,{id:"races.lastname"},"Etternavn")),Object(r.h)("input",{type:"text",class:"form-control",id:"lastname","aria-describedby":"lastnameHelp",placeholder:c.lastname,onInput:this.updateSignup,value:g.lastname}),Object(r.h)("small",{id:"lastnameHelp",class:"form-text text-muted"},Object(r.h)(b.c,{id:"races.lastname-help"},"Hva er etternavnet ditt?"))))),Object(r.h)("div",{class:"form-group"},Object(r.h)("label",{for:"sportsClub"},Object(r.h)(b.c,{id:"races.sportsclub"},"Klubb")),Object(r.h)("input",{type:"text",class:"form-control",id:"sportsClub","aria-describedby":"sportsClubHelp",placeholder:c.sportsClub,onInput:this.updateSignup,value:g.sportsClub}),Object(r.h)("small",{id:"sportsClubHelp",class:"form-text text-muted"},Object(r.h)(b.c,{id:"races.sportsClub-help"},"Hvilken klubb tilhører du?"))),Object(r.h)("div",{class:"row"},Object(r.h)("div",{class:"col"},Object(r.h)("div",{class:"form-group"},Object(r.h)("label",{for:"facebook"},Object(r.h)(b.c,{id:"races.facebook"},"Facebook")),Object(r.h)("input",{type:"text",class:"form-control",id:"facebook","aria-describedby":"facebookHelp",placeholder:c.facebook,onInput:this.updateSignup,value:g.facebook}),Object(r.h)("small",{id:"facebookHelp",class:"form-text text-muted"},Object(r.h)(b.c,{id:"races.facebook-help"},"Hva er Facebook brukernavnet ditt?")))),Object(r.h)("div",{class:"col"},Object(r.h)("div",{class:"form-group"},Object(r.h)("label",{for:"instagram"},Object(r.h)(b.c,{id:"races.instagram"},"Instagram")),Object(r.h)("input",{type:"text",class:"form-control",id:"instagram","aria-describedby":"instagramHelp",placeholder:c.instagram,onInput:this.updateSignup,value:g.instagram}),Object(r.h)("small",{id:"instagramHelp",class:"form-text text-muted"},Object(r.h)(b.c,{id:"races.instagram-help"},"Hva er Instagram brukernavnet ditt?"))))),Object(r.h)("div",{class:"form-group"},Object(r.h)("label",{for:"team"},Object(r.h)(b.c,{id:"races.team"},"Team")),Object(r.h)("select",{class:"form-control",id:"team","aria-describedby":"teamHelp",onInput:this.updateSignup,value:g.team},Object(r.h)("option",{value:""},"-- ",Object(r.h)(b.c,{id:"races.choose-team"},"Velg team")," --"),n.map(e=>Object(r.h)("option",{value:e.id},e.name))),Object(r.h)("small",{id:"teamHelp",class:"form-text text-muted"},Object(r.h)(b.c,{id:"races.choose-team-help"},"Velg fra dine team"))),Object(r.h)("div",{class:"form-group"},Object(r.h)("label",{for:"class"},Object(r.h)(b.c,{id:"races.class"},"Klasse")),Object(r.h)("select",{class:"form-control",id:"class","aria-describedby":"classHelp",onInput:this.updateSignup,value:g.class},Object(r.h)("option",{value:""},"-- ",Object(r.h)(b.c,{id:"races.choose-class"},"Velg klasse")," --"),p.classes&&p.classes.map(t=>Object(r.h)(e,null,Object(r.h)("option",{value:t.id},t.title," - ",t.distance," km - Påmelding: ",t.signupfee||p.signupfee," NOK")))),Object(r.h)("small",{id:"classHelp",class:"form-text text-muted"},Object(r.h)(b.c,{id:"races.choose-class-help"},"Velg ønsket klasse."))),Object(r.h)("div",{class:"form-group form-check"},Object(r.h)("input",{type:"checkbox",class:"form-check-input",id:"termsAndAgreement",onInput:this.updateSignup,checked:g.termsAndAgreement,value:!0}),Object(r.h)("label",{class:"form-check-label",for:"termsAndAgreement"},Object(r.h)(b.c,{id:"races.agreement-accept"},"Jeg har lest og godtar reglene for løpet."))),Object(r.h)("button",{type:"button",class:"btn btn-primary",onClick:this.signupToRace},Object(r.h)(b.c,{id:"races.do-signup"},"Meld meg på"))))):Object(r.h)(e,null,x<new Date(p.signupStartDate)?Object(r.h)(e,null,Object(r.h)("h5",{class:"mt-4"},Object(r.h)("i",{class:"fas fa-exclamation-circle"})," ",Object(r.h)(b.c,{id:"races.signup-not-open-yet"},"Påmeldingen har ikke åpnet ennå!")),Object(r.h)("p",{class:"mt-4"},Object(r.h)(b.c,{id:"races.signup-opening"},"Påmeldingen åpner"),":",Object(r.h)("br",null),Object(r.h)("span",{class:"display-4"},d.a.formatDate(p.signupStartDate,{locale:"no-NB",hour12:!1,hour:"2-digit",minute:"2-digit"})))):Object(r.h)(e,null,Object(r.h)("h5",{class:"mt-4 mb-4"},Object(r.h)("i",{class:"fas fa-exclamation-circle"})," ",Object(r.h)(b.c,{id:"races.signup-closed"},"Påmeldingen er stengt!")))))),s&&Object(r.h)(e,null,Object(r.h)(j.a,{stores:this.props.stores,onCloseClick:this.toggleDrawer},Object(r.h)(f.a,{stores:this.props.stores,id:a.id}))))}})||l;t.a=w}).call(this,s("hosL").Fragment)},n7ns:function(e,t,s){"use strict";(function(e){function a(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,a)}return s}function i(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?a(Object(s),!0).forEach((function(t){o(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):a(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function o(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function c(e,t){const s=void 0!==e.bib;return(void 0!==t.bib)-s||!0===s&&e.bib-t.bib||0}var n,l=s("hosL"),r=s("Utv1"),d=s("/eY4"),h=s("OhSV"),b=(s("Y3FI"),s("fh8t")),p=s.n(b),m=s("go65"),u=s("ZOvn"),g=s("/DnB");s("s4FZ");let O=Object(d.a)(n=class extends l.Component{constructor(e){var t;super(e),t=this,this.toggleDisplayDetails=e=>{const t=e.target.closest("tr").dataset.id,{appState:s}=this.props.stores,{editUserDetails:a}=s;a[t]||s.toggleDisplayDetails(t)},this.adminToggleEditUser=e=>{e.stopPropagation();const t=e.target.closest("tr").dataset.id,{appState:s}=this.props.stores;s.toggleEditUserDetails(t)},this.veterinaryToggleEditUser=e=>{e.stopPropagation();const t=e.target.closest("tr").dataset.id,{appState:s}=this.props.stores;s.toggleVeterinaryUserDetails(t,!0)},this.toggleAdminSendMessage=e=>{const t=e.target.closest("button").dataset.class,{showAdminSendMessage:s}=this.state;s[t]=!s[t],this.setState({showAdminSendMessage:s})},this.toggleAdminSendInboxMessage=e=>{const t=e.target.closest("button").dataset.class,{showAdminSendInboxMessage:s={}}=this.state;s[t]=!s[t],this.setState({showAdminSendInboxMessage:s})},this.toggleAdminImport=e=>{const t=e.target.closest("button").dataset.class,{showAdminImport:s}=this.state;s[t]=!s[t],this.setState({showAdminImport:s})},this.adminSignupEdit=e=>{const{race:t={}}=this.props,s=t.id,{raceStore:a}=this.props.stores,i=e.target.id,o=e.target.value,{classid:c,contestantid:n}=e.target.dataset,l={raceClassId:c,contestantId:n,["raceClassContestant"+r.a.ucfirst(i)]:o};clearTimeout(this.updateTimer[i]),this.updateTimer[i]=setTimeout((async function(){a.editClass({id:s,data:l})}),500)},this.sendEmail=async function(e){const{race:s={}}=t.props,a=s.id,i=e.target.closest("button").dataset.to,o=e.target.closest("button").dataset.raceclassid,{appState:c}=t.props.stores,{message:n}=t.state,{subject:l,body:r}=n,d=await c.sendEmail({to:i,subject:l,body:r,raceId:a,raceClassId:o});t.setState({emailResponse:d})},this.resetEmail=()=>{this.setState({emailResponse:null,message:{subject:"",body:""}})},this.sendInboxMessage=async function(e){const{raceStore:s}=t.props.stores,{race:a={}}=t.props,i=a.id,o=e.target.closest("button").dataset.raceclassid,{inboxMessage:c}=t.state,{body:n}=c,l=await s.sendInboxMessage({body:n,raceId:i,raceClassId:o});t.setState({inboxMessageResponse:l})},this.resetInboxMessage=()=>{this.setState({inboxMessage:{body:""}})},this.signupToRace=async function({signup:e}){const{raceStore:s}=t.props.stores,{race:a={}}=t.props,o=a.id;await s.addContestant({id:o,classId:e.class,newContestant:i({},e)})},this.parseInput=async function(e,s){clearTimeout(t.parseInputTimer),t.parseInputTimer=setTimeout(()=>t.doParseInput(e,s),500)},this.doParseInput=async function(e,s){const a=String(e).split("\n");let i=[];const o=[],c=a[0];i=c.match(/\t/)?c.split("\t"):c.match(/;/)?c.split(";"):c.split(",");for(let e=1,t=a.length;e<t;e+=1){const t=a[e];let s;s=t.match(/\t/)?t.split("\t"):t.match(/;/)?t.split(";"):t.split(",");const c={};s.forEach((e,t)=>{let s=e;"email"===i[t]&&(s=e.toLowerCase()),c[i[t]]=s}),o.push(c)}const{raceStore:n}=t.props.stores,{race:l={}}=t.props;return n.addMultipleContestants({id:l.id,classId:s,contestants:o}),!0},this.chooseSubmenu=e=>{e.stopPropagation();this.setState({submenu:e.target.parentElement.dataset.menu||e.target.dataset.menu})},this.filterByClass=e=>{const t=e.target.closest("button").dataset.id,{appState:s}=this.props.stores;s.toggleSelectedClassId(t,!0)},this.clearSearchForBib=()=>{this.setState({searchForBib:""})},this.savePreCheck=async function(e){const{id:s,chipid:a,name:o,shortname:c,team:n}=e.target.closest("button").dataset,{preCheck:l,dogJournals:d}=t.state,{dogJournalStore:h,userStore:b}=t.props.stores,{user:p={}}=b,m={id:p.id,firstname:p.firstname,lastname:p.lastname,email:p.email,image:p.image},u={id:s,chipId:a,name:o,shortname:c,team:n},g=i({checkType:"preCheck"},r.a.getNestedValue(l,s)||{}),O=[{dog:i({},u),journal:i({},g),veterinary:i({},m)}];d[a]||(d[a]=[]),d[a].push(i(i(i({date:new Date},u),g),m)),await h.insert({data:O}),delete l[s],t.setState({preCheck:l})},this.state={displayDetails:{},editUserDetails:{},showAdminSendMessage:{},showAdminImport:{},message:{},inboxMessage:{},submenu:"chiplists",preCheck:{},raceCheck:{},dogJournals:{}},this.inputRef={},this.updateTimer={},this.parseInputTimer=null}render(){const{showAdminSendMessage:t={},showAdminSendInboxMessage:s={},showAdminImport:a={},message:i={},inboxMessage:o={},inboxMessageResponse:n,emailResponse:d,submenu:b,searchForBib:O,preCheck:j={},raceCheck:f={},dogJournals:v={}}=this.state,{userStore:y,raceStore:w,appState:x}=this.props.stores,{user:k={},teams:S=[],isAdmin:I,isVeterinary:C}=y,{language:T="en"}=k,{displayDetails:D,editUserDetails:A,veterinaryUserDetails:R,selectedClassIds:P=[]}=x,{race:z={}}=this.props,F=e=>{if(O){const t=new RegExp(""+O.replace(/[^a-zA-Z 0-9æøåÆØÅ]/,""),"i");return t.test(e.bib)||t.test(e.firstname)||t.test(e.lastname)}return!0};return Object(l.h)(e,null,Object(l.h)("div",{class:"row"},Object(l.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-0 mb-2"},Object(l.h)("h2",{class:"mb-0"},Object(l.h)(h.c,{id:"races.mushers"},"Deltakere"))),Object(l.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-3 mb-2"},Object(l.h)("div",{class:"w-100 overflow-hidden"},Object(l.h)("div",{class:"d-flex flex-row flex-nowrap pb-2 px-1",style:"overflow: auto; scroll-snap-type: x mandatory;"},z.classes&&z.classes.sort((e,t)=>e.distance-t.distance).map((t,s)=>Object(l.h)(e,null,Object(l.h)("div",{class:"col px-0 pt-2"},Object(l.h)("button",{type:"button",class:`btn btn-block ${0===s&&"rounded-pill-left"} ${s===z.classes.length-1&&"rounded-pill-right"} rounded-none ${P.indexOf(t.id)>-1?"btn-primary":"btn-outline-primary"} text-nowrap`,style:"text-overflow: ellipsis; overflow: hidden;",onClick:this.filterByClass,"data-id":t.id},t.title)))))),Object(l.h)("div",{class:"row mb-3"},Object(l.h)("div",{class:"col-6 offset-3"},Object(l.h)("div",{class:"input-group"},Object(l.h)("input",{class:"form-control form-control-lg",type:"text",placeholder:"Search for bib",value:O,onInput:Object(m.a)(this,"searchForBib")}),O&&Object(l.h)("div",{class:"input-group-append"},Object(l.h)("div",{class:"input-group-text",onClick:this.clearSearchForBib},"x"))))),z.classes&&z.classes.filter(e=>!(P.length>0)||P.indexOf(e.id)>-1).sort((e,t)=>e.distance-t.distance).map(O=>Object(l.h)(e,null,I&&Object(l.h)("span",{class:"float-right"},"Total app users: ",O.contestants&&O.contestants.filter(e=>e.user||e.team).length),Object(l.h)("h5",null,O.title," ",O.startDate&&Object(l.h)(e,null,": ",Object(l.h)("span",{class:"font-weight-lighter"},r.a.formatDate(`${O.startDate} ${O.startTime||"00:00:00"}`,{locale:T,hour12:!1,hour:"2-digit",minute:"2-digit"})," - ",r.a.formatDate(`${O.endDate} ${O.endTime||"00:00:00"}`,{locale:T,hour12:!1,hour:"2-digit",minute:"2-digit"})))),I&&Object(l.h)(e,null,Object(l.h)("a",{class:"mx-2",href:`/tv/top10/${z.id}/${O.id}`},"TV Top 10")," -",Object(l.h)("a",{class:"mx-2",href:`/tv/top5/${z.id}/${O.id}`},"TV Top 5")," -",Object(l.h)("a",{class:"mx-2",href:`/tv/top3/${z.id}/${O.id}`},"TV Top 3")," -",Object(l.h)("a",{class:"mx-2",href:`/tv/team/${z.id}/1`},"TV One team")," -",Object(l.h)("a",{class:"mx-2",href:`/tv/tracking/${z.id}/${O.id}`},"TV tracking")," -",Object(l.h)("a",{class:"mx-2",href:"/tv/freetext"},"TV free text")," -",Object(l.h)("a",{class:"mx-2",href:`/embed/top10/${z.id}/${O.id}`},"Embed top10")," -",Object(l.h)("a",{class:"mx-2",href:`/embed/tracking/${z.id}/${O.id}`},"Embed tracking")," -",Object(l.h)("a",{class:"mx-2",href:`/embed/chiplist/${z.id}/${O.id}`},"Embed chiplist")," -",Object(l.h)("a",{class:"mx-2",href:`/embed/agreement/${z.id}/${O.id}`},"Embed agreement")," -"),Object(l.h)("div",{class:"table-responsive"},Object(l.h)("table",{class:"table table-sm table-striped"},Object(l.h)("thead",null,Object(l.h)("tr",null,Object(l.h)("th",{scope:"col"},"#"),Object(l.h)("th",{scope:"col",style:"min-width: 90%;"},Object(l.h)(h.c,{id:"races.name"},"Navn")))),Object(l.h)("tbody",null,O.contestants&&O.contestants.filter(F).sort(c).map((t,s)=>{const a=w.getTeamById(t.team),i=w.hasVaccines(a),o=t.mandatoryCheck;return Object(l.h)(e,null,Object(l.h)("tr",{onClick:this.toggleDisplayDetails,"data-id":t.id},Object(l.h)("th",{scope:"row"},t.bib?Object(l.h)(e,null,t.bib):Object(l.h)(e,null,Object(l.h)("span",{class:"font-weight-lighter text-muted"},s+1))),Object(l.h)("td",{class:""+(D[t.id]?"font-weight-bold":""),style:""+(D[t.id]||R[t.id]?"":"line-height: 0.8em;")},C&&Object(l.h)(e,null,t.team?Object(l.h)(e,null,Object(l.h)("button",{class:"btn btn-primary btn-sm float-right ml-4",onClick:this.veterinaryToggleEditUser},Object(l.h)("i",{class:"fas fa-user-md"}))):Object(l.h)(e,null,Object(l.h)("button",{class:"btn btn-outline-secondary btn-sm float-right ml-4 disabled",onClick:e=>e.stopPropagation()},Object(l.h)("i",{class:"fas fa-user-md"}))),i?Object(l.h)(e,null,Object(l.h)("button",{class:"btn btn-success btn-sm float-right ml-1",onClick:e=>e.stopPropagation()},Object(l.h)("i",{class:"fas fa-syringe"}))):Object(l.h)(e,null,Object(l.h)("button",{class:"btn btn-outline-secondary btn-sm float-right ml-1",onClick:e=>e.stopPropagation()},Object(l.h)("i",{class:"fas fa-syringe"}))),o?Object(l.h)(e,null,Object(l.h)("button",{class:"btn btn-success btn-sm float-right ml-1",onClick:e=>e.stopPropagation()},Object(l.h)("i",{class:"fas fa-stethoscope"}))):Object(l.h)(e,null,Object(l.h)("button",{class:"btn btn-outline-secondary btn-sm float-right ml-1",onClick:e=>e.stopPropagation()},Object(l.h)("i",{class:"fas fa-stethoscope"})))),I&&Object(l.h)(e,null,Object(l.h)("button",{class:"btn btn-outline-warning btn-sm float-right ml-1",onClick:this.adminToggleEditUser},Object(l.h)("i",{class:"fas fa-user-edit"})),t.paidSignupfee&&Object(l.h)(e,null,Object(l.h)("span",{class:"float-right"},Object(l.h)("i",{class:"fas fa-check text-success"}),Object(l.h)("br",null))),Object(l.h)("small",{class:"float-right"},t.raceStatus&&Object(l.h)(e,null,Object(l.h)("span",{class:"text-muted"},"raceStatus:"),Object(l.h)("br",null)," ",t.raceStatus,Object(l.h)("br",null)),t.raceComment&&Object(l.h)(e,null,Object(l.h)("span",{class:"text-muted"},"raceComment:"),Object(l.h)("br",null)," ",t.raceComment,Object(l.h)("br",null)),t.gpxResultsApproved&&Object(l.h)(e,null,Object(l.h)("span",{class:"text-muted"},"gpxResultsApproved:"),Object(l.h)("br",null)," ",t.gpxResultsApproved,Object(l.h)("br",null)))),(I||C)&&z.liveRace>0&&z.declaration&&Object(l.h)(e,null,Object(l.h)("span",{class:"float-right text-success mr-2",style:"font-size: 1.2em;"},(t.user||t.team)&&Object(l.h)("i",{class:"fas fa-mobile-alt ml-2"}),t.declaration&&Object(l.h)("i",{class:"fas fa-handshake ml-2",alt:r.a.isoDate(t.declarationDate)}))),D[t.id]?Object(l.h)(e,null,t.flag&&Object(l.h)("span",{class:"mr-2"},t.flag),t.firstname?Object(l.h)(e,null,t.firstname," ",t.lastname,Object(l.h)("br",null)):Object(l.h)(e,null,t.name),Object(l.h)("span",{class:"text-muted"},a.name),Object(l.h)("br",null),Object(l.h)("small",{class:"text-muted"},t.sportsClub),Object(l.h)("br",null),t.facebook&&Object(l.h)("a",{class:"mr-2",href:u.a.asFacebookLink(t.facebook),native:!0,target:"_blank",rel:"noreferrer"},Object(l.h)("i",{class:"fab fa-facebook"})),t.instagram&&Object(l.h)("a",{class:"mr-2",href:u.a.asInstagramLink(t.instagram),native:!0,target:"_blank",rel:"noreferrer"},Object(l.h)("i",{class:"fab fa-instagram"})),Object(l.h)("br",null),I&&Object(l.h)(e,null,t.bib&&Object(l.h)(e,null,Object(l.h)("i",{class:"fas fa-tshirt ml-2"})," ",t.bib),t.startTime&&Object(l.h)(e,null,Object(l.h)("i",{class:"fas fa-clock ml-2"})," ",r.a.isoDate(t.startTime))),t.price1&&Object(l.h)("div",{class:"font-weight-lighter"},Object(l.h)("i",{class:"fas fa-trophy text-warning"})," ",t.price1,t.priceSent&&Object(l.h)(e,null,Object(l.h)("i",{class:"fas fa-check text-success"}))),t.price2&&Object(l.h)("div",{class:"font-weight-lighter"},Object(l.h)("i",{class:"fas fa-trophy text-warning"})," ",t.price2),t.price3&&Object(l.h)("div",{class:"font-weight-lighter"},Object(l.h)("i",{class:"fas fa-trophy text-warning"})," ",t.price3)):Object(l.h)(e,null,t.price1&&Object(l.h)("span",{class:"float-right text-warning",style:"font-size: 1.2em;"},Object(l.h)("i",{class:"fas fa-trophy"}),t.priceSent&&Object(l.h)(e,null,Object(l.h)("i",{class:"fas fa-check text-success"}))),Object(l.h)("nobr",null,t.flag&&Object(l.h)("span",{class:"mr-2"},t.flag),t.firstname?Object(l.h)(e,null,t.firstname," ",t.lastname,Object(l.h)("br",null)):Object(l.h)(e,null,t.name),Object(l.h)("small",{class:"text-muted"},t.sportsClub),Object(l.h)("br",null))),C&&R[t.id]&&Object(l.h)(e,null,Object(l.h)(g.a,{horizontal:"end",vertical:"center"}),Object(l.h)("div",{class:"w-100 overflow-hidden",style:"max-width: 100%;"},Object(l.h)("div",{class:"d-flex flex-row flex-nowrap pb-2 px-1",style:"overflow: auto; scroll-snap-type: x mandatory;"},Object(l.h)("div",{class:"col px-0 pt-2"},Object(l.h)("button",{class:`btn btn-sm btn-block rounded-pill-left rounded-none ${"chiplists"===b?"btn-primary":"btn-outline-primary"} text-nowrap`,style:"text-overflow: ellipsis; overflow: hidden;","data-menu":"chiplists",onClick:this.chooseSubmenu},Object(l.h)("i",{class:"fas fa-user-md"})," ",Object(l.h)(h.c,{id:"racevet.chiplists"},"Vaccines"))),Object(l.h)("div",{class:"col px-0 pt-2"},Object(l.h)("button",{class:`btn btn-sm btn-block rounded-none ${"precheck"===b?"btn-primary":"btn-outline-primary"} text-nowrap`,style:"text-overflow: ellipsis; overflow: hidden;","data-menu":"precheck",onClick:this.chooseSubmenu},Object(l.h)("i",{class:"fas fa-stethoscope"})," ",Object(l.h)(h.c,{id:"racevet.precheck"},"PreCheck"))),Object(l.h)("div",{class:"col px-0 pt-2"},Object(l.h)("button",{class:`btn btn-sm btn-block rounded-pill-right rounded-none ${"racecheck"===b?"btn-primary":"btn-outline-primary"} text-nowrap`,style:"text-overflow: ellipsis; overflow: hidden;","data-menu":"racecheck",onClick:this.chooseSubmenu},Object(l.h)("i",{class:"fas fa-flag-checkered"})," ",Object(l.h)(h.c,{id:"racevet.racecheck"},"RaceCheck"))))),"chiplists"===b&&Object(l.h)(e,null,Object(l.h)("h5",{class:"mt-4 border-bottom"},"Chiplist & Vaccines"),Object(l.h)("div",{class:"container-fluid"},Object(l.h)("div",{class:"row"},a&&a.dogs?a.dogs.map(t=>{let s;return a&&a.vaccines&&(s=a.vaccines.filter(e=>e.chipId===t.chipId)),Object(l.h)(e,null,Object(l.h)("div",{class:"col-12 d-flex my-3"},Object(l.h)("div",{class:"mx-0 mr-1 px-0 position-relative pt-1"},Object(l.h)("div",{class:"text-center border rounded-circle imageRounded imageRoundedMedium text-muted pt-2",style:(t.image?`background-image: url("${t.image.s3SmallLink}"); background-size: cover;`:"")+" border-width: 2px !important;"},!t.image&&Object(l.h)("span",{class:"font-weight-lighter",style:"font-size: 35px;"},r.a.ucfirst(t.name,!0))),Object(l.h)("small",null,Object(l.h)("span",{class:"float-left text-overflow",style:"width: 70px;"},t.name),Object(l.h)("br",null)),(t.birth||t.gender)&&Object(l.h)("small",null,Object(l.h)("small",{class:"font-weight-normal float-right position-absolute text-white bg-info p-1 rounded",style:"top: 0px; right: 0px; line-height: 0.8em;"},t.birth&&Object(l.h)("span",{class:"mr-1 text-white"},r.a.age(t.birth,t.deceased)),t.gender&&Object(l.h)(e,null,"female"===t.gender?Object(l.h)("i",{class:"fas fa-venus"}):Object(l.h)("i",{class:"fas fa-mars"}))))),Object(l.h)("div",{class:"flex-grow-1 row"},Object(l.h)("div",{class:"col-12 font-weight-bold"},Object(l.h)("i",{class:"fas fa-microchip text-muted"})," ",t.chipId),s&&s.map(t=>Object(l.h)("div",{class:"col-4 px-1 overflow-hidden"},Object(l.h)("span",{class:"badge badge-"+(t.inKarens?"warning":"success")},Object(l.h)("span",{class:"font-weight-lighter"},Object(l.h)("i",{class:"fas fa-calendar-check"})," ",r.a.isoDate(t.vaccineAgens.durationEnd,!1,!1,!0),t.inKarens&&Object(l.h)(e,null,Object(l.h)("br",null),"(",Object(l.h)(h.c,{id:"dogs.vaccine-karens"},"karens"),": ",r.a.format(t.karensDaysLeft,0)," ",Object(l.h)(h.c,{id:"dogs.vaccine-karens-days-left"},"days left"),")"))),Object(l.h)("div",{class:"text-overflow"},Object(l.h)("small",{class:"font-weight-light"},t.vaccineAgens.name,Object(l.h)("br",null),Object(l.h)("nobr",null,t.vaccineName),Object(l.h)("br",null))))))))}):Object(l.h)(e,null,Object(l.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 px-0"},Object(l.h)("div",{class:"text-center text-muted"},Object(l.h)("div",{class:"display-1"},Object(l.h)("i",{class:"fas fa-dog"})),Object(l.h)("h3",null,Object(l.h)(h.c,{id:"teams.no-dogs-title"},"No dogs for this team!")))))))),"precheck"===b&&Object(l.h)(e,null,Object(l.h)("h5",{class:"mt-4 border-bottom"},"Precheck"),Object(l.h)("div",{class:"row"},a&&a.dogs?a.dogs.map(t=>{let s;return a&&a.journal&&(s=a.journal.filter(e=>e.chipId===t.chipId)),Object(l.h)(e,null,Object(l.h)("div",{class:"col-12 d-flex my-3"},Object(l.h)("div",{class:"mx-0 mr-1 px-0 position-relative pt-1"},Object(l.h)("div",{class:"text-center border rounded-circle imageRounded imageRoundedMedium text-muted pt-2",style:(t.image?`background-image: url("${t.image.s3SmallLink}"); background-size: cover;`:"")+" border-width: 2px !important;"},!t.image&&Object(l.h)("span",{class:"font-weight-lighter",style:"font-size: 35px;"},r.a.ucfirst(t.name,!0))),Object(l.h)("small",null,Object(l.h)("span",{class:"float-left text-overflow",style:"width: 70px;"},t.name),Object(l.h)("br",null)),(t.birth||t.gender)&&Object(l.h)("small",null,Object(l.h)("small",{class:"font-weight-normal float-right position-absolute text-white bg-info p-1 rounded",style:"top: 0px; right: 0px; line-height: 0.8em;"},t.birth&&Object(l.h)("span",{class:"mr-1 text-white"},r.a.age(t.birth,t.deceased)),t.gender&&Object(l.h)(e,null,"female"===t.gender?Object(l.h)("i",{class:"fas fa-venus"}):Object(l.h)("i",{class:"fas fa-mars"}))))),Object(l.h)("div",{class:"flex-grow-1 row"},Object(l.h)("div",{class:"col-12 font-weight-bold"},Object(l.h)("i",{class:"fas fa-microchip text-muted"})," ",t.chipId.slice(-5)),Object(l.h)("div",{class:"col-12"},s&&s.length>0&&s.map(t=>Object(l.h)(e,null,Object(l.h)("div",{class:"row border-bottom"},Object(l.h)("div",{class:"col-12 text-muted"},Object(l.h)("small",null,Object(l.h)("span",{class:"float-right"},t.checkType&&Object(l.h)(e,null,t.checkType)),r.a.isoDate(t.date)," by ",t.veterinaryFirstname," ",t.veterinaryLastname)),Object(l.h)("div",{class:"col-12 d-flex justify-content-between"},t.diagnoseId>0&&Object(l.h)("span",{class:"mx-1"},Object(l.h)("span",{class:"text-muted"},"ID:")," ",t.diagnoseId),t.heartRate>0&&Object(l.h)("span",{class:"mx-1"},Object(l.h)("span",{class:"text-muted"},"HR:")," ",t.heartRate),t.weight>0&&Object(l.h)("span",{class:"mx-1"},Object(l.h)("i",{class:"fas fa-balance-scale text-muted"})," ",t.weight," ",Object(l.h)("span",{class:"text-muted"},"kg")),t.bodyConditionScore>0&&Object(l.h)("span",{class:"mx-1"},Object(l.h)("span",{class:"text-muted"},"BCS:")," ",t.bodyConditionScore)),Object(l.h)("div",{class:"col-12"},t.generalFindings&&Object(l.h)("span",{class:"mr-1"},Object(l.h)("span",{class:"text-muted"},"Other:")," ",t.generalFindings))))),v[t.chipId]&&v[t.chipId].length>0&&v[t.chipId].map(t=>Object(l.h)(e,null,Object(l.h)("div",{class:"row border-bottom"},Object(l.h)("div",{class:"col-12 text-muted"},Object(l.h)("small",null,Object(l.h)("span",{class:"float-right"},t.checkType&&Object(l.h)(e,null,t.checkType)),r.a.isoDate(t.date)," by ",t.veterinaryFirstname," ",t.veterinaryLastname)),Object(l.h)("div",{class:"col-12 d-flex justify-content-between"},t.diagnoseId>0&&Object(l.h)("span",{class:"mx-1"},Object(l.h)("span",{class:"text-muted"},"ID:")," ",t.diagnoseId),t.heartRate>0&&Object(l.h)("span",{class:"mx-1"},Object(l.h)("span",{class:"text-muted"},"HR:")," ",t.heartRate),t.weight>0&&Object(l.h)("span",{class:"mx-1"},Object(l.h)("i",{class:"fas fa-balance-scale text-muted"})," ",t.weight," ",Object(l.h)("span",{class:"text-muted"},"kg")),t.bodyConditionScore>0&&Object(l.h)("span",{class:"mx-1"},Object(l.h)("span",{class:"text-muted"},"BCS:")," ",t.bodyConditionScore)),Object(l.h)("div",{class:"col-12"},t.generalFindings&&Object(l.h)("span",{class:"mr-1"},Object(l.h)("span",{class:"text-muted"},"Other:")," ",t.generalFindings)))))),Object(l.h)("div",{class:"col-12 form-group"},Object(l.h)("small",null,Object(l.h)("label",{class:"text-overflow w-100 mb-0",for:"diagnoseId"},"Diagnostic"),Object(l.h)("select",{class:"form-control",id:"diagnoseId",onInput:Object(m.a)(this,`preCheck.${t.id}.diagnoseId`),value:r.a.getNestedValue(j,t.id+".diagnoseId")},Object(l.h)("option",{value:""},"-- Please choose --"),Object(l.h)("option",{value:"100"},"No findings")))),Object(l.h)("div",{class:"col-4 form-group"},Object(l.h)("small",null,Object(l.h)("label",{class:"text-overflow w-100 mb-0",for:"weight"},"Weight"),Object(l.h)("input",{type:"number",class:"form-control",id:"weight",onInput:Object(m.a)(this,`preCheck.${t.id}.weight`),value:r.a.getNestedValue(j,t.id+".weight")}))),Object(l.h)("div",{class:"col-4 form-group overflow-hidden"},Object(l.h)("small",null,Object(l.h)("label",{class:"text-overflow w-100 mb-0",for:"heartRate"},"Heart Rate"),Object(l.h)("input",{type:"text",class:"form-control",id:"heartRate",onInput:Object(m.a)(this,`preCheck.${t.id}.heartRate`),value:r.a.getNestedValue(j,t.id+".heartRate")}))),Object(l.h)("div",{class:"col-4 form-group"},Object(l.h)("small",null,Object(l.h)("label",{class:"text-overflow w-100 mb-0",for:"bodyConditionScore"},"BCS"),Object(l.h)("input",{type:"number",class:"form-control",id:"bodyConditionScore",onInput:Object(m.a)(this,`preCheck.${t.id}.bodyConditionScore`),value:r.a.getNestedValue(j,t.id+".bodyConditionScore")}))),Object(l.h)("div",{class:"col-12 form-group"},Object(l.h)("small",null,Object(l.h)("label",{class:"text-overflow w-100 mb-0",for:"generalFindings"},"General findings"),Object(l.h)("input",{type:"text",class:"form-control",id:"generalFindings",onInput:Object(m.a)(this,`preCheck.${t.id}.generalFindings`),value:r.a.getNestedValue(j,t.id+".generalFindings")})),Object(l.h)("small",{id:"generalFindingsHelp",class:"form-text text-muted"},"Teeth, mucus membranes, general condition, other findings.")),Object(l.h)("div",{class:"col-12 form-group"},Object(l.h)("button",{class:"btn btn-outline-success",onClick:this.savePreCheck,"data-id":t.id,"data-chipid":t.chipId,"data-team":a.id,"data-name":t.name,"data-shortname":t.shortName}," Save Pre Check")))))}):Object(l.h)(e,null,Object(l.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 px-0"},Object(l.h)("div",{class:"text-center text-muted"},Object(l.h)("div",{class:"display-1"},Object(l.h)("i",{class:"fas fa-dog"})),Object(l.h)("h3",null,Object(l.h)(h.c,{id:"teams.no-dogs-title"},"No dogs for this team!"))))))),"racecheck"===b&&Object(l.h)(e,null,Object(l.h)("h5",{class:"mt-4 border-bottom"},"Racecheck"),Object(l.h)("div",{class:"row"},a&&a.dogs?a.dogs.map(t=>Object(l.h)(e,null,Object(l.h)("div",{class:"col-12 d-flex my-3"},Object(l.h)("div",{class:"mx-0 mr-1 px-0 position-relative pt-1"},Object(l.h)("div",{class:"text-center border rounded-circle imageRounded imageRoundedMedium text-muted pt-2",style:(t.image?`background-image: url("${t.image.s3SmallLink}"); background-size: cover;`:"")+" border-width: 2px !important;"},!t.image&&Object(l.h)("span",{class:"font-weight-lighter",style:"font-size: 35px;"},r.a.ucfirst(t.name,!0))),Object(l.h)("small",null,Object(l.h)("span",{class:"float-left text-overflow",style:"width: 70px;"},t.name),Object(l.h)("br",null)),(t.birth||t.gender)&&Object(l.h)("small",null,Object(l.h)("small",{class:"font-weight-normal float-right position-absolute text-white bg-info p-1 rounded",style:"top: 0px; right: 0px; line-height: 0.8em;"},t.birth&&Object(l.h)("span",{class:"mr-1 text-white"},r.a.age(t.birth,t.deceased)),t.gender&&Object(l.h)(e,null,"female"===t.gender?Object(l.h)("i",{class:"fas fa-venus"}):Object(l.h)("i",{class:"fas fa-mars"}))))),Object(l.h)("div",{class:"flex-grow-1 row"},Object(l.h)("div",{class:"col-12 font-weight-bold"},Object(l.h)("i",{class:"fas fa-microchip text-muted"})," ",t.chipId.slice(-5)),Object(l.h)("div",{class:"col-4 form-group"},Object(l.h)("small",null,Object(l.h)("label",{class:"text-overflow w-100",for:"weight"},"Weight"),Object(l.h)("input",{type:"number",class:"form-control",id:"weight"}))),Object(l.h)("div",{class:"col-4 form-group overflow-hidden"},Object(l.h)("small",null,Object(l.h)("label",{class:"text-overflow w-100",for:"hrHeartLungs"},"HR/Heart/Lungs"),Object(l.h)("input",{type:"text",class:"form-control",id:"hrHeartLungs"}))),Object(l.h)("div",{class:"col-4 form-group"},Object(l.h)("small",null,Object(l.h)("label",{class:"text-overflow w-100",for:"bcs"},"BCS"),Object(l.h)("input",{type:"number",class:"form-control",id:"bcs"}))),Object(l.h)("div",{class:"col-12 form-group"},Object(l.h)("small",null,Object(l.h)("label",{class:"text-overflow w-100",for:"general"},"General findings"),Object(l.h)("input",{type:"text",class:"form-control",id:"general"})),Object(l.h)("small",{id:"generalHelp",class:"form-text text-muted"},"Teeth, mucus membranes, general condition, other findings.")))))):Object(l.h)(e,null,Object(l.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 px-0"},Object(l.h)("div",{class:"text-center text-muted"},Object(l.h)("div",{class:"display-1"},Object(l.h)("i",{class:"fas fa-dog"})),Object(l.h)("h3",null,Object(l.h)(h.c,{id:"teams.no-dogs-title"},"No dogs for this team!")))))))),I&&A[t.id]&&Object(l.h)(e,null,Object(l.h)("h5",null,"Admin edit:"),Object(l.h)("div",{class:"form-group row my-0"},Object(l.h)("label",{class:"col-4 col-form-label text-right"},"Email"),Object(l.h)("div",{class:"col-8"},t.email)),Object(l.h)("div",{class:"form-group row my-0"},Object(l.h)("label",{for:"bib",class:"col-4 col-form-label text-right"},"bib"),Object(l.h)("div",{class:"col-8"},Object(l.h)("input",{type:"number",class:"form-control",id:"bib","data-classid":O.id,"data-contestantid":t.id,onInput:this.adminSignupEdit,value:t.bib}))),Object(l.h)("div",{class:"form-group row my-0"},Object(l.h)("label",{for:"startTime",class:"col-4 col-form-label text-right"},"startTime"),Object(l.h)("div",{class:"col-8"},Object(l.h)("input",{type:"date",class:"form-control",id:"startTime","data-classid":O.id,"data-contestantid":t.id,onInput:this.adminSignupEdit,value:t.startTime?r.a.isoDate(t.startTime,!1,!1,!1):null}))),Object(l.h)("div",{class:"form-group row my-0"},Object(l.h)("label",{for:"team",class:"col-4 col-form-label text-right"},"team"),Object(l.h)("div",{class:"col-8"},Object(l.h)("input",{type:"number",class:"form-control",id:"team","data-classid":O.id,"data-contestantid":t.id,onInput:this.adminSignupEdit,value:t.team}))),Object(l.h)("div",{class:"form-group row my-0"},Object(l.h)("label",{for:"user",class:"col-4 col-form-label text-right"},"user"),Object(l.h)("div",{class:"col-8"},Object(l.h)("input",{type:"number",class:"form-control",id:"user","data-classid":O.id,"data-contestantid":t.id,onInput:this.adminSignupEdit,value:t.user}))),Object(l.h)("div",{class:"form-group row my-0"},Object(l.h)("label",{for:"team",class:"col-4 col-form-label text-right"},"Race status"),Object(l.h)("div",{class:"col-8"},Object(l.h)("select",{class:"form-control",id:"raceStatus","data-classid":O.id,"data-contestantid":t.id,onInput:this.adminSignupEdit,value:t.raceStatus},Object(l.h)("option",{value:""},"-- Choose race status --"),Object(l.h)("option",{value:"OK"},"OK - Everything ok"),Object(l.h)("option",{value:"DNS"},"DNS - Did Not Start"),Object(l.h)("option",{value:"DNF"},"DNF - Did Not Finish"),Object(l.h)("option",{value:"DNQ"},"DNQ - Did not qualify"),Object(l.h)("option",{value:"DQ"},"DQ - Disqualified")))),Object(l.h)("div",{class:"form-group row my-0"},Object(l.h)("label",{for:"raceComment",class:"col-4 col-form-label text-right"},"Race comment"),Object(l.h)("div",{class:"col-8"},Object(l.h)("input",{type:"text",class:"form-control",id:"raceComment","data-classid":O.id,"data-contestantid":t.id,onInput:this.adminSignupEdit,value:t.raceComment}))),Object(l.h)("div",{class:"form-group row my-0"},Object(l.h)("label",{for:"gpxResultsApproved",class:"col-4 col-form-label text-right"},"GPX Results approved (date)"),Object(l.h)("div",{class:"col-8"},Object(l.h)("input",{type:"date",class:"form-control",id:"gpxResultsApproved","data-classid":O.id,"data-contestantid":t.id,onInput:this.adminSignupEdit,value:t.gpxResultsApproved?r.a.isoDate(t.gpxResultsApproved,!1,!1,!0):null}))),Object(l.h)("div",{class:"form-group row my-0"},Object(l.h)("label",{for:"paidSignupfee",class:"col-4 col-form-label text-right"},"paidSignupfee (date)"),Object(l.h)("div",{class:"col-8"},Object(l.h)("input",{type:"date",class:"form-control",id:"paidSignupfee","data-classid":O.id,"data-contestantid":t.id,onInput:this.adminSignupEdit,value:t.paidSignupfee?r.a.isoDate(t.paidSignupfee,!1,!1,!0):null}))),Object(l.h)("div",{class:"form-group row my-0"},Object(l.h)("label",{for:"startOrder",class:"col-4 col-form-label text-right"},"startOrder"),Object(l.h)("div",{class:"col-8"},Object(l.h)("input",{type:"number",class:"form-control",id:"startOrder","data-classid":O.id,"data-contestantid":t.id,onInput:this.adminSignupEdit,value:t.startOrder}))),Object(l.h)("div",{class:"form-group row my-0"},Object(l.h)("label",{for:"cellphone",class:"col-4 col-form-label text-right"},"Mobil"),Object(l.h)("div",{class:"col-8"},Object(l.h)("input",{type:"text",class:"form-control",id:"cellphone","data-classid":O.id,"data-contestantid":t.id,onInput:this.adminSignupEdit,value:t.cellphone}))),Object(l.h)("div",{class:"form-group row my-0"},Object(l.h)("label",{for:"name",class:"col-4 col-form-label text-right"},"Navn"),Object(l.h)("div",{class:"col-8"},Object(l.h)("input",{type:"text",class:"form-control",id:"name","data-classid":O.id,"data-contestantid":t.id,onInput:this.adminSignupEdit,value:t.name}))),Object(l.h)("div",{class:"form-group row my-0"},Object(l.h)("label",{for:"firstname",class:"col-4 col-form-label text-right"},"Fornavn"),Object(l.h)("div",{class:"col-8"},Object(l.h)("input",{type:"text",class:"form-control",id:"firstname","data-classid":O.id,"data-contestantid":t.id,onInput:this.adminSignupEdit,value:t.firstname}))),Object(l.h)("div",{class:"form-group row my-0"},Object(l.h)("label",{for:"lastname",class:"col-4 col-form-label text-right"},"Etternavn"),Object(l.h)("div",{class:"col-8"},Object(l.h)("input",{type:"text",class:"form-control",id:"lastname","data-classid":O.id,"data-contestantid":t.id,onInput:this.adminSignupEdit,value:t.lastname}))),Object(l.h)("div",{class:"form-group row my-0"},Object(l.h)("label",{for:"address",class:"col-4 col-form-label text-right"},"Adresse"),Object(l.h)("div",{class:"col-8"},Object(l.h)("input",{type:"text",class:"form-control",id:"address","data-classid":O.id,"data-contestantid":t.id,onInput:this.adminSignupEdit,value:t.address}))),Object(l.h)("div",{class:"form-group row my-0"},Object(l.h)("label",{for:"postalcode",class:"col-4 col-form-label text-right"},"Postalcode"),Object(l.h)("div",{class:"col-8"},Object(l.h)("input",{type:"text",class:"form-control",id:"postalcode","data-classid":O.id,"data-contestantid":t.id,onInput:this.adminSignupEdit,value:t.postalcode}))),Object(l.h)("div",{class:"form-group row my-0"},Object(l.h)("label",{for:"postalplace",class:"col-4 col-form-label text-right"},"Postalplace"),Object(l.h)("div",{class:"col-8"},Object(l.h)("input",{type:"text",class:"form-control",id:"postalplace","data-classid":O.id,"data-contestantid":t.id,onInput:this.adminSignupEdit,value:t.postalplace}))),Object(l.h)("div",{class:"form-group row my-0"},Object(l.h)("label",{for:"flag",class:"col-4 col-form-label text-right"},"flag (emoji)"),Object(l.h)("div",{class:"col-8"},Object(l.h)("input",{type:"text",class:"form-control",id:"flag","data-classid":O.id,"data-contestantid":t.id,onInput:this.adminSignupEdit,value:t.flag}))),Object(l.h)("div",{class:"form-group row my-0"},Object(l.h)("label",{for:"countryCode",class:"col-4 col-form-label text-right"},"countryCode (iso)"),Object(l.h)("div",{class:"col-8"},Object(l.h)("input",{type:"text",class:"form-control",id:"countryCode","data-classid":O.id,"data-contestantid":t.id,onInput:this.adminSignupEdit,value:t.countryCode}))),Object(l.h)("div",{class:"form-group row my-0"},Object(l.h)("label",{for:"birthdate",class:"col-4 col-form-label text-right"},"birthdate"),Object(l.h)("div",{class:"col-8"},Object(l.h)("input",{type:"date",class:"form-control",id:"birthdate","data-classid":O.id,"data-contestantid":t.id,onInput:this.adminSignupEdit,value:t.birthdate?r.a.isoDate(t.birthdate,!1,!1,!0):null}))),Object(l.h)("div",{class:"form-group row my-0"},Object(l.h)("label",{for:"sportsClub",class:"col-4 col-form-label text-right"},"Klubb"),Object(l.h)("div",{class:"col-8"},Object(l.h)("input",{type:"text",class:"form-control",id:"sportsClub","data-classid":O.id,"data-contestantid":t.id,onInput:this.adminSignupEdit,value:t.sportsClub}))),Object(l.h)("div",{class:"form-group row my-0"},Object(l.h)("label",{for:"facebook",class:"col-4 col-form-label text-right"},"Facebook"),Object(l.h)("div",{class:"col-8"},Object(l.h)("input",{type:"text",class:"form-control",id:"facebook","data-classid":O.id,"data-contestantid":t.id,onInput:this.adminSignupEdit,value:t.facebook}))),Object(l.h)("div",{class:"form-group row my-0"},Object(l.h)("label",{for:"instagram",class:"col-4 col-form-label text-right"},"Instagram"),Object(l.h)("div",{class:"col-8"},Object(l.h)("input",{type:"text",class:"form-control",id:"instagram","data-classid":O.id,"data-contestantid":t.id,onInput:this.adminSignupEdit,value:t.instagram}))),Object(l.h)("div",{class:"form-group row my-0"},Object(l.h)("label",{for:"team",class:"col-4 col-form-label text-right"},"Klasse"),Object(l.h)("div",{class:"col-8"},Object(l.h)("select",{class:"form-control",id:"class","aria-describedby":"classHelp","data-classid":O.id,"data-contestantid":t.id,onInput:this.adminSignupEdit,value:t.class},Object(l.h)("option",{value:""},"-- Choose race class --"),z.classes&&z.classes.sort((e,t)=>e.distance-t.distance).map(t=>Object(l.h)(e,null,Object(l.h)("option",{value:t.id},t.title," - ",t.distance," km - Påmelding: ",t.signupfee||z.signupfee," NOK")))))),Object(l.h)("div",{class:"form-group row my-0"},Object(l.h)("label",{for:"price1",class:"col-4 col-form-label text-right"},"Price 1"),Object(l.h)("div",{class:"col-8"},Object(l.h)("input",{type:"text",class:"form-control",id:"price1","data-classid":O.id,"data-contestantid":t.id,onInput:this.adminSignupEdit,value:t.price1}))),Object(l.h)("div",{class:"form-group row my-0"},Object(l.h)("label",{for:"price2",class:"col-4 col-form-label text-right"},"Price 2"),Object(l.h)("div",{class:"col-8"},Object(l.h)("input",{type:"text",class:"form-control",id:"price2","data-classid":O.id,"data-contestantid":t.id,onInput:this.adminSignupEdit,value:t.price2}))),Object(l.h)("div",{class:"form-group row my-0"},Object(l.h)("label",{for:"price3",class:"col-4 col-form-label text-right"},"Price 3"),Object(l.h)("div",{class:"col-8"},Object(l.h)("input",{type:"text",class:"form-control",id:"price3","data-classid":O.id,"data-contestantid":t.id,onInput:this.adminSignupEdit,value:t.price3}))),Object(l.h)("div",{class:"form-group row my-0"},Object(l.h)("label",{for:"priceSent",class:"col-4 col-form-label text-right"},"Price sent"),Object(l.h)("div",{class:"col-8"},Object(l.h)("input",{type:"date",class:"form-control",id:"priceSent","data-classid":O.id,"data-contestantid":t.id,onInput:this.adminSignupEdit,value:t.priceSent?r.a.isoDate(t.priceSent,!1,!1,!0):null}))),Object(l.h)("div",{class:"form-group row my-5"},Object(l.h)("div",{class:"col-8"},Object(l.h)("button",{type:"button",class:"btn btn-danger float-right",id:"deleteUser",value:"1",onClick:this.adminSignupEdit,"data-classid":O.id,"data-contestantid":t.id},"Delete user from this class")))))))})))),I&&Object(l.h)(e,null,t[O.id]?Object(l.h)(e,null,Object(l.h)("div",{class:"container"},Object(l.h)("div",{class:"row"},Object(l.h)("div",{class:"col-12"},Object(l.h)("h5",null,"Email to all mushers in ",O.title),Object(l.h)("div",{class:"overflow-auto p-5",style:"max-height: 30vh;"},Object(l.h)("small",null,O.emails&&O.emails.map(e=>{return Object(l.h)("div",{class:"border rounded-lg p-3 mb-3"},Object(l.h)("div",{class:"row bg-light"},Object(l.h)("div",{class:"col-3 text-right"},"Date:"),Object(l.h)("div",{class:"col-9"},r.a.formatDate(e.date,{locale:T,hour12:!1,hour:"2-digit",minute:"2-digit"}))),Object(l.h)("div",{class:"row bg-light"},Object(l.h)("div",{class:"col-3 text-right"},"To:"),Object(l.h)("div",{class:"col-9"},e.to.map(e=>Object(l.h)("span",{class:"badge badge-info px-2 py-1 mr-2"},e)))),Object(l.h)("div",{class:"row bg-light"},Object(l.h)("div",{class:"col-3 text-right"},"Subject:"),Object(l.h)("div",{class:"col-9"},e.subject)),Object(l.h)("div",{class:"row mt-2"},Object(l.h)("div",{class:"col-3 text-right"},"Body:"),Object(l.h)("div",{class:"col-9",dangerouslySetInnerHTML:{__html:(t=e.body,"string"==typeof t?t.replace(/[\n]/g,"<br>"):t)}})));var t}))),Object(l.h)("div",{class:"form-group row"},Object(l.h)("label",{for:"subject",class:"col-2 col-form-label text-right font-weight-lighter"},"To"),Object(l.h)("div",{class:"col-10"},O.contestants&&O.contestants.map(t=>Object(l.h)(e,null,Object(l.h)("span",{class:"badge badge-info px-2 py-1 mr-2"},t.firstname," ",t.lastname," (",t.email,")"))))),Object(l.h)("div",{class:"form-group row"},Object(l.h)("label",{for:"subject",class:"col-2 col-form-label text-right font-weight-lighter"},"Subject"),Object(l.h)("div",{class:"col-10"},Object(l.h)("input",{type:"text",class:"form-control",id:"subject",onInput:Object(m.a)(this,"message.subject"),value:i.subject}))),Object(l.h)("div",{class:"form-group row"},Object(l.h)("label",{for:"body",class:"col-2 col-form-label text-right font-weight-lighter"},"Message"),Object(l.h)("div",{class:"col-10"},Object(l.h)("textarea",{type:"text",class:"form-control",id:"body",rows:"10",onInput:Object(m.a)(this,"message.body"),value:i.body})),Object(l.h)("div",{class:"col-5 contain-images"},i.body&&Object(l.h)(p.a,{markdown:i.body,markdownOpts:u.a.getMarkdownOptions()}))),d&&Object(l.h)(e,null,Object(l.h)("div",{class:"alert alert-"+(d&&d.status>=300?"danger":"success"),role:"alert"},Object(l.h)("small",null,Object(l.h)("xmp",null,JSON.stringify(d,null,4))))),Object(l.h)("button",{class:"btn btn-success float-right",type:"button","data-to":O.contestants&&O.contestants.map(e=>e.email),"data-raceclassid":O.id,onClick:this.sendEmail},Object(l.h)("i",{class:"fas fa-paper-plane"})," Send email to all mushers"),Object(l.h)("button",{class:"btn btn-danger float-right mr-2",type:"button",onClick:this.resetEmail},Object(l.h)("i",{class:"fas fa-times"})," Reset email")),Object(l.h)("div",{class:"col-12 text-center"},Object(l.h)("button",{class:"btn btn-sm btn-link",type:"button",onClick:this.toggleAdminSendMessage,"data-class":O.id},"Hide email form"))))):Object(l.h)(e,null,Object(l.h)("div",{class:"col-12 text-center"},Object(l.h)("button",{class:"btn btn-sm btn-link",type:"button",onClick:this.toggleAdminSendMessage,"data-class":O.id},"Send email to all in this class")),Object(l.h)("div",{class:"col-12 text-center"},Object(l.h)("button",{class:"btn btn-sm btn-link",type:"button",onClick:this.toggleAdminSendInboxMessage,"data-class":O.id},"Send inbox message to all in this class")),Object(l.h)("div",{class:"col-12 text-center"},Object(l.h)("button",{class:"btn btn-sm btn-link",type:"button",onClick:this.toggleAdminImport,"data-class":O.id},"Toggle import form"))),s[O.id]?Object(l.h)(e,null,Object(l.h)("div",{class:"container"},Object(l.h)("div",{class:"row"},Object(l.h)("div",{class:"col-12"},Object(l.h)("h5",null,"Inbox Message to all mushers in ",O.title),Object(l.h)("div",{class:"form-group row"},Object(l.h)("label",{for:"body",class:"col-2 col-form-label text-right font-weight-lighter"},"Inbox message"),Object(l.h)("div",{class:"col-10"},Object(l.h)("textarea",{type:"text",class:"form-control",id:"body",rows:"10",onInput:Object(m.a)(this,"inboxMessage.body"),value:o.body})),Object(l.h)("div",{class:"col-5 contain-images"},o.body&&Object(l.h)(p.a,{markdown:o.body,markdownOpts:u.a.getMarkdownOptions()}))),Object(l.h)("div",{class:"clearfix"},Object(l.h)("button",{class:"btn btn-success float-right",type:"button","data-raceclassid":O.id,onClick:this.sendInboxMessage},Object(l.h)("i",{class:"fas fa-paper-plane"})," Send inbox message to all mushers"),Object(l.h)("button",{class:"btn btn-danger float-right mr-2",type:"button",onClick:this.resetInboxMessage},Object(l.h)("i",{class:"fas fa-times"})," Reset inbox message")),n&&Object(l.h)(e,null,Object(l.h)("div",{class:"alert alert-"+(n&&n.status>=300?"danger":"success"),role:"alert",style:"max-height: 20vh;"},Object(l.h)("small",null,Object(l.h)("xmp",null,JSON.stringify(n,null,4)))))),Object(l.h)("div",{class:"col-12 text-center"},Object(l.h)("button",{class:"btn btn-sm btn-link",type:"button",onClick:this.toggleAdminSendInboxMessage,"data-class":O.id},"Hide inboxmessage form"))))):Object(l.h)(e,null),I&&a[O.id]&&Object(l.h)(e,null,Object(l.h)("div",{class:"form-group"},Object(l.h)("label",{for:"importUsers"},Object(l.h)(h.c,{id:"races.paste-users"},"Paste your user data here to import users"),":"),Object(l.h)("textarea",{class:"form-control",id:"importUsers",rows:"20",oninput:e=>this.parseInput(e.target.value,O.id)})))))))))}})||n;t.a=O}).call(this,s("hosL").Fragment)},om2D:function(e,t,s){"use strict";var a,i=s("hosL"),o=s("/eY4"),c=(s("cneo"),s("Utv1"),s("u2zT"));let n=Object(o.a)(a=class extends i.Component{constructor(e){super(e),this.handleAddImage=e=>{const{addToImages:t=!0}=this.props,{updateField:s,object:a,field:i}=this.props;if(i&&s({id:a.id,field:i,value:e,skipTimer:!0}),t){const t=[];t.push(e),s({id:a.id,field:"images",value:t,skipTimer:!0})}},this.state={files:[]}}render(){const{uploadStatus:e=(()=>{}),before:t=(()=>{}),after:s=(()=>{}),autoOpen:a=!0}=this.props;return Object(i.h)("div",{class:"row"},Object(i.h)("div",{class:"col-12"},Object(i.h)(c.a,{handleAddImage:this.handleAddImage,uploadStatus:e,apiUrl:"/api/fileupload",before:t,after:s,autoOpen:a},Object(i.h)("div",{style:{height:30,width:"100%"}}))))}})||a;t.a=n},rWES:function(e,t,s){"use strict";(function(e){function a(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,a)}return s}function i(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}var o,c=s("hosL"),n=s("Utv1"),l=s("/eY4"),r=s("OhSV"),d=s("ZOvn");s("eQ6k");const h={confirmed:{},deleted:{}};let b=Object(l.a)(o=class extends c.Component{constructor(e){super(e),this.confirmRequest=e=>{const{team:t,user:s,follow:a}=e.target.closest("button").dataset,{teamStore:i}=this.props.stores;i.confirmFollowRequest({team:parseInt(t,10),user:parseInt(s,10)});const{confirmed:o}=this.state;o[`${t}-${s}`]=!0,this.setState({confirmed:o}),a&&i.followRequestUser(s)},this.deleteRequest=e=>{const{team:t,user:s}=e.target.closest("button").dataset,{teamStore:a}=this.props.stores;a.deleteFollowRequest({team:parseInt(t,10),user:parseInt(s,10)});const{deleted:i}=this.state;i[`${t}-${s}`]=!0,this.setState({deleted:i})},this.state=function(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?a(Object(s),!0).forEach((function(t){i(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):a(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}({},h)}async loadTeams(){const{teamStore:e}=this.props.stores;await e.load({query:{},addData:["followRequests"]})}componentDidMount(){this.loadTeams()}render(){const{deleted:t={},confirmed:s={}}=this.state,{teamStore:a,appState:i}=this.props.stores,{teams:o,hasFollowRequests:l,followRequests:h=[]}=a,{darkmode:b}=i;return l?Object(c.h)("div",{class:"row pb-1"},Object(c.h)("div",{class:`col-12 col-sm-8 col-lg-6 offset-sm-2 offset-lg-3 mb-0 position-relative rounded rounded-lg py-3 bg-${b?"black":"white"} shadow-sm`},Object(c.h)("div",{class:"container-fluid"},Object(c.h)("div",{class:"row"},Object(c.h)("div",{class:"col-12"},Object(c.h)("h5",null,Object(c.h)(r.c,{id:"teams.connect.teams-follow-requests"},"Forespørsel om å følge"),":"))),Object(c.h)("div",{class:"row"},Object(c.h)("div",{class:"d-flex flex-row flex-nowrap",style:"overflow: auto;"},n.a.isArray(o)&&o.map(a=>Object(c.h)(e,null,a&&n.a.isArray(a.followRequests)&&a.followRequests.map(i=>{const o=i.image&&i.image.s3SmallLink?i.image:null,n=t[`${a.id}-${i.id}`],l=s[`${a.id}-${i.id}`],b=h.find(e=>e.user.id===i.id);return Object(c.h)("div",{class:"mr-2 py-2 border rounded-lg",style:"width: 150px;"},Object(c.h)("div",{class:"text-center border rounded-circle imageRounded imageRoundedSmall mx-auto",style:o?`background-image: url("${o.s3SmallLink}");`:""},!o&&Object(c.h)("div",{class:"text-muted font-weight-lighter",style:"font-size: 20px; padding-top: 5px;"},d.a.displayNameShort(i))),Object(c.h)("small",null,Object(c.h)("div",{class:"text-overflow text-center"},Object(c.h)("strong",null,d.a.displayName(i)),Object(c.h)("br",null)),Object(c.h)("div",{class:"text-overflow text-center"},Object(c.h)(r.c,{id:"teams.connect.wants-to-follow"},"wants to follow your team:")),Object(c.h)("div",{class:"text-overflow text-center"},Object(c.h)("strong",null,d.a.displayName(a)))),l||n?Object(c.h)(e,null,Object(c.h)("div",{class:"text-center"},l?Object(c.h)("div",{class:"text-success"},Object(c.h)(r.c,{id:"teams.connect.confirmed"},"Confirmed")," ",Object(c.h)("i",{class:"fas fa-check"})):Object(c.h)("div",{class:"text-danger"},Object(c.h)(r.c,{id:"teams.connect.deleted"},"Deleted")," ",Object(c.h)("i",{class:"fas fa-trash-alt"})))):Object(c.h)(e,null,Object(c.h)("div",null,Object(c.h)("button",{class:"btn btn-sm btn-block btn-success text-overflow mt-1",onClick:this.confirmRequest,"data-team":a.id,"data-user":i.id},Object(c.h)(r.c,{id:"teams.connect.confirm"},"Confirm")),b&&b.public>0&&Object(c.h)("button",{class:"btn btn-sm btn-block btn-outline-success text-overflow mt-1",onClick:this.confirmRequest,"data-team":a.id,"data-user":i.id,"data-follow":!0},Object(c.h)(r.c,{id:"teams.connect.confirm-and-follow"},"Confirm & follow back")),Object(c.h)("div",{class:"mt-3"},Object(c.h)("small",null,Object(c.h)("button",{class:"btn btn-sm btn-block btn-link text-overflow",style:"font-size: 1.0em;",onClick:this.deleteRequest,"data-team":a.id,"data-user":i.id},Object(c.h)(r.c,{id:"teams.connect.delete"},"Del")))))))}))))),Object(c.h)("details",{class:"mt-3"},Object(c.h)("summary",null,Object(c.h)("small",null,Object(c.h)(r.c,{id:"teams.connect.how-summary"},"How does this work?"))),Object(c.h)("p",null,Object(c.h)(r.c,{id:"teams.connect.how-text"},"What can followers see when I grant them access to follow? The answer is very little. They can see main details of the workouts you share and name of the dogs. That's all. Try to follow a team and check out the workout tab.")))))):""}})||o;t.a=b}).call(this,s("hosL").Fragment)},u2zT:function(e,t,s){"use strict";var a,i=s("hosL"),o=s("/eY4"),c=s("Utv1"),n=s("OhSV");let l=Object(o.a)(a=class extends i.Component{constructor(e){super(e),this.dropRef=Object(i.createRef)(),this.handleDrag=e=>{e.preventDefault(),e.stopPropagation()},this.handleDragIn=e=>{e.preventDefault(),e.stopPropagation(),this.dragCounter++,e.dataTransfer.items&&e.dataTransfer.items.length>0&&this.setState({drag:!0})},this.handleDragOut=e=>{e.preventDefault(),e.stopPropagation(),this.dragCounter--,0===this.dragCounter&&this.setState({drag:!1})},this.handleDrop=e=>{if(e.preventDefault(),e.stopPropagation(),this.setState({drag:!1}),e.dataTransfer.files&&e.dataTransfer.files.length>0){for(let t=0,s=e.dataTransfer.files.length;t<s;t+=1){this.readLocalFile(e.dataTransfer.files[t])}this.dragCounter=0}},this.handleAddFiles=e=>{e.preventDefault();const t=e.target;for(let e=0,s=t.files.length;e<s;e+=1){this.readLocalFile(t.files[e])}},this.handleEvent=()=>{0},this.handleUpload=e=>{const{uploadStatus:t=(()=>{}),before:s=(()=>{}),after:a=(()=>{})}=this.props;t(!1),c.a.isFunction(s)&&s();const i=new FormData;i.append("files[]",e);const o={progress:1};o.xhr=new XMLHttpRequest,o.xhr.upload.addEventListener("progress",t=>{this.updateProgress(t,e)}),o.xhr.addEventListener("loadstart",t=>{this.handleEvent(t,e)}),o.xhr.addEventListener("load",t=>{this.handleEvent(t,e)}),o.xhr.addEventListener("loadend",t=>{const s=e;c.a.isFunction(a)&&a(),this.handleEvent(t,s)}),o.xhr.addEventListener("progress",t=>{this.handleEvent(t,e)}),o.xhr.addEventListener("error",t=>{this.handleEvent(t,e)}),o.xhr.addEventListener("abort",t=>{this.handleEvent(t,e)}),o.xhr.addEventListener("readystatechange",t=>{this.uploadDone(t,e)}),o.xhr.open("POST",`${c.a.getApiServer()}${this.props.apiUrl}`),o.xhr.setRequestHeader("Authorization","Bearer "+c.a.getJwtToken()),o.xhr.send(i);const n=e.name,l=this.state.uploadedFilesData;l[n]||(l[n]={}),l[n].uploadMeta=o,l[n].imageNum=this.state.imageNum,this.setState({uploadedFilesData:l})},this.readLocalFile=e=>new Promise((t,s)=>{const a=new FileReader;a.addEventListener("error",e=>{s(e)}),a.addEventListener("load",s=>{const a=e,i=a.name,o=this.state.uploadedFilesData;o[i]||(o[i]={}),o[i].event=s,this.setState({uploadedFilesData:o}),this.handleUpload(a),t(s)}),a.readAsDataURL(e)}),this.updateProgress=(e,t)=>{if(e.lengthComputable){const s=t.name,a=this.state.uploadedFilesData,i=e.loaded/e.total*100;0,a[s].uploadMeta.progress=i,this.setState({uploadedFilesData:a})}},this.uploadDone=(e,t)=>{const s=t.name,a=this.state.uploadedFilesData,i=a[s].uploadMeta;if(i&&4===i.xhr.readyState&&201===i.xhr.status){const e=JSON.parse(i.xhr.responseText).data.files;for(let t=0;t<e.length;t+=1){this.addFileToUpload(e[t]),this.fileInput.value=""}}},this.state={drag:!1,loadingProgress:0,uploadedFiles:[],uploadedFilesData:{}}}addFileToUpload(e){const{uploadedFilesData:t}=this.state,{handleAddImage:s,uploadStatus:a=(()=>{})}=this.props;delete t[e.name],this.setState({uploadedFilesData:t}),s(e),a(!0)}componentDidMount(){const e=this.dropRef.current;e.addEventListener("dragenter",this.handleDragIn),e.addEventListener("dragleave",this.handleDragOut),e.addEventListener("dragover",this.handleDrag),e.addEventListener("drop",this.handleDrop);const{autoOpen:t}=this.props;t&&setTimeout(()=>{this.fileInput.click()},10)}componentWillUnmount(){const e=this.dropRef.current;e.removeEventListener("dragenter",this.handleDragIn),e.removeEventListener("dragleave",this.handleDragOut),e.removeEventListener("dragover",this.handleDrag),e.removeEventListener("drop",this.handleDrop)}render(){const{uploadedFilesData:e}=this.state;return Object(i.h)("div",{style:{position:"relative"},ref:this.dropRef},this.state.drag&&Object(i.h)("div",{style:{border:"dashed grey 4px",backgroundColor:"rgba(255,255,255,.8)",position:"absolute",top:0,bottom:0,left:0,right:0,zIndex:9999}},Object(i.h)("div",{style:{position:"absolute",top:"50%",right:0,left:0,textAlign:"center",color:"grey",fontSize:36}},Object(i.h)("div",null,Object(i.h)(n.c,{id:"imageupload.drag-files-here"},"drop your files here :)")))),Object(i.h)("div",null,Object(i.h)("input",{class:"btn btn-info col-sm-12",multiple:!0,type:"file",id:"image-file",onchange:this.handleAddFiles,ref:e=>{this.fileInput=e}})),Object(i.h)("div",null,Object.keys(e).length>0?Object(i.h)("h3",null,Object(i.h)(n.c,{id:"imageupload.upload-images"},"Uploaded images")):"",Object(i.h)("ul",{class:"list-group"},Object.keys(e).map(t=>{const{uploadMeta:s={}}=e[t],a=t.match(/(jpg|jpeg|png|gif|heic|heif|svg|webp|tif)/i);return Object(i.h)("li",{class:"list-group-item list-group-item-action flex-column align-items-start"},Object(i.h)("div",{class:"d-flex w-100 justify-content-between"},a&&Object(i.h)("img",{class:"img-fluid mr-3",src:e[t].event.target.result,style:"max-height: 50px;"}),Object(i.h)("small",null,e[t].event.uploadDone),Object(i.h)(n.c,{id:"imageupload.uploading-image"},"Laster opp bilde..."),Object(i.h)("small",null,c.a.formatBytes(e[t].event.total,2))),Object(i.h)("div",{class:"progress mt-1",style:"height: 4px;"},Object(i.h)("div",{class:"progress-bar progress-bar-striped progress-bar-animated bg-success",role:"progressbar",style:`width: ${s.progress}%; height: 4px;`,"aria-valuenow":s.progress,"aria-valuemin":"0","aria-valuemax":"100"})))}))),this.props.children)}})||a;t.a=l},uAGO:function(e,t,s){"use strict";(function(e){var a,i=s("hosL"),o=s("Utv1"),c=s("/eY4"),n=s("OhSV"),l=(s("Y3FI"),s("fh8t")),r=s.n(l),d=(s("go65"),s("ZOvn"));let h=Object(c.a)(a=class extends i.Component{constructor(e){super(e),this.state={},this.inputRef={},this.updateTimer={}}render(){const{userStore:t}=this.props.stores,{user:s={},teams:a=[],isAdmin:c}=t,{language:l="en"}=s,{race:h={}}=this.props;return Object(i.h)(e,null,Object(i.h)("div",{class:"row"},Object(i.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-0 mb-2"},Object(i.h)("h2",{class:"mb-0"},Object(i.h)(n.c,{id:"race.classes"},"Klasser"))),Object(i.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-3 mb-2"},Object(i.h)("div",{class:"row"},h.classes&&h.classes.sort((e,t)=>e.distance-t.distance).map(t=>Object(i.h)(e,null,Object(i.h)("div",{class:"col-12 col-sm-6 col-lg-4 mb-4"},Object(i.h)("div",{class:"border rounded rounded-lg p-3"},Object(i.h)("h5",null,t.title),c&&Object(i.h)(e,null,Object(i.h)("a",{href:`/tv/top10/${h.id}/${t.id}`},"TV Top 10"),Object(i.h)("br",null),Object(i.h)("a",{href:`/tv/team/${h.id}/1`},"TV One team"),Object(i.h)("br",null)),Object(i.h)("small",null,t.startDate&&Object(i.h)("div",null,Object(i.h)("span",{class:"font-weight-lighter"},Object(i.h)(n.c,{id:"race.startdate"},"Start"),":")," ",o.a.formatDate(`${t.startDate} ${t.startTime||"00:00:00"}`,{locale:l,hour12:!1,hour:"2-digit",minute:"2-digit"})),t.endDate&&Object(i.h)("div",null,Object(i.h)("span",{class:"font-weight-lighter"},Object(i.h)(n.c,{id:"race.enddate"},"End"),":")," ",o.a.formatDate(`${t.endDate} ${t.endTime||"00:00:00"}`,{locale:l,hour12:!1,hour:"2-digit",minute:"2-digit"}))),Object(i.h)("div",null,Object(i.h)("span",{class:"font-weight-lighter"},Object(i.h)(n.c,{id:"race.distance"},"Distanse"),":")," ",t.distance," km"),Object(i.h)("div",null,Object(i.h)("span",{class:"font-weight-lighter"},Object(i.h)(n.c,{id:"race.signup"},"Påmelding"),":")," ",t.signupfee||h.signupfee," NOK"),Object(i.h)("p",{class:"clearfix"},Object(i.h)(r.a,{markdown:d.a.replaceImages(t.ingress,h.images,l),markdownOpts:d.a.getMarkdownOptions()})),Object(i.h)("small",null,Object(i.h)(r.a,{markdown:d.a.replaceImages(t.body,h.images,l),markdownOpts:d.a.getMarkdownOptions()})),t.rules&&Object(i.h)(e,null,Object(i.h)("h5",null,Object(i.h)(n.c,{id:"race.rules"},"Regler")),Object(i.h)(r.a,{markdown:d.a.replaceImages(t.rules,h.images,l),markdownOpts:d.a.getMarkdownOptions()}))))))))))}})||a;t.a=h}).call(this,s("hosL").Fragment)},"vY+r":function(e,t,s){"use strict";(function(e){function a(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,a)}return s}function i(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}var o,c=s("hosL"),n=s("Utv1"),l=s("/eY4"),r=s("OhSV"),d=s("ZOvn");const h={};let b=Object(l.a)(o=class extends c.Component{constructor(e){super(e),this.toggleViews=()=>{const{showViewList:e}=this.state,{isTeamAdmin:t,isAdmin:s}=this.props;(t||s)&&this.setState({showViewList:!e})},this.state=function(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?a(Object(s),!0).forEach((function(t){i(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):a(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}({},h)}render(){const{showViewList:t}=this.state,{storyStore:s,teamStore:a,workoutStore:i}=this.props.stores,{views:o,object:l,type:h="story",onTeamClick:b=(()=>{}),onUserClick:p=(()=>{})}=this.props,m=[];Object.entries(l.statistics).forEach(([e,t])=>{Object.entries(t).forEach(([e,t])=>{t.viewUsers&&m.push(t.viewUsers)})});const u=m.flat().slice(0,50);return Object(c.h)(e,null,Object(c.h)("div",{class:"d-flex justify-content-end mb-2"},Object(c.h)("span",{class:"ml-2 text-muted font-weight-lighter",onClick:this.toggleViews},o," ",Object(c.h)(r.c,{id:"story.views"},"views"))),t&&Object(c.h)("div",{class:"mt-3 mb-3"},u&&u.map(t=>{let o,l,r;if("story"===h?(o=s.findPublicUser(t),l=s.findPublicTeamByMembers(t)):"team"===h?(o=a.findPublicUser(t),l=a.findPublicTeamByMembers(t)):"workout"===h&&(o=i.findPublicUser(t),l=i.findPublicTeamByMembers(t)),!o)return"";n.a.isArray(l)&&(r=l.find(e=>1===e.public));const p=d.a.getImage({user:o,team:r,priority:"user"}),m=d.a.displayNameShort(o),u=d.a.displayName(o,!0);return Object(c.h)("div",{class:"d-flex flex-row position-relative font-weight-light mb-1"},r?Object(c.h)(e,null,Object(c.h)("a",{href:"/teams/public/"+r.uuidv4,title:r.name,onClick:e=>b(e,r.uuidv4),class:"stretched-link"},Object(c.h)("div",{class:"text-center border rounded-circle imageRounded imageRoundedThumb",style:""+(p?`background-image: url("${p}"); background-size: cover;`:"")},!p&&Object(c.h)("div",{class:"",style:"font-size: 12px; padding-top: 3px;"},m))),Object(c.h)("div",{class:"ml-2 "},u," ",Object(c.h)("span",{class:"font-weight-lighter"},"- ",r.name))):Object(c.h)(e,null,Object(c.h)("div",{class:"text-center border rounded-circle imageRounded imageRoundedThumb",style:(p?`background-image: url("${p}"); background-size: cover;`:"")+" opacity: 0.5;"},!p&&Object(c.h)("div",{class:"text-muted",style:"font-size: 12px; padding-top: 3px;"},m)),Object(c.h)("div",{class:"ml-2"},u)))}),o>u.length&&Object(c.h)(e,null,Object(c.h)("small",{class:"text-muted"},Object(c.h)(r.c,{id:"story.limited-to"},"Limited to max 50 users.")))))}})||o;t.a=b}).call(this,s("hosL").Fragment)},w5T0:function(e,t,s){"use strict";(function(e){function a(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,a)}return s}function i(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}var o,c,n=s("hosL"),l=s("Utv1"),r=s("/eY4"),d=s("OhSV"),h=(s("Y3FI"),s("fh8t")),b=s.n(h),p=(s("go65"),s("/DnB"),s("ZOvn"));const m={isLoading:!1,contentIsNotLoaded:!0,reloadInSec:null,reloadLastEpoch:null,reloadIsActive:!1};let u=Object(r.a)(o=class extends n.Component{constructor(e){super(e),this.initComponent=()=>{const e=Math.floor((new Date).getTime()/1e3);this.setState({reloadIsActive:!0,reloadLastEpoch:e},()=>this.tickReloadTimeer())},this.state=function(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?a(Object(s),!0).forEach((function(t){i(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):a(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}({},m),this.updateTimer={}}tickReloadTimeer(){const{reloadIsActive:e,reloadLastEpoch:t}=this.state;if(e){const e=Math.floor((new Date).getTime()/1e3);this.setState({reloadInSec:60-(e-t)}),clearTimeout(this.updateTimer.tick),this.updateTimer.tick=setTimeout(()=>this.tickReloadTimeer(),1e3)}return!1}componentDidMount(){this.initComponent()}componentWillUnmount(){clearTimeout(this.updateTimer.tick)}render(){const{reloadInSec:t}=this.state,s=Math.floor(l.a.normalizeBetween(t,0,60,0,100));return Object(n.h)(e,null,Object(n.h)("div",{class:"progress fixed-top",style:"height: 2px; z-index: 999999;"},Object(n.h)("div",{class:"progress-bar",role:"progressbar",style:`width: ${s}%;`,"aria-valuenow":s,"aria-valuemin":"0","aria-valuemax":"100"})))}})||o,g=Object(r.a)(c=class extends n.Component{constructor(e){var t;super(e),t=this,this.toggleDisplayDetails=e=>{const t=e.target.closest("tr").dataset.email,{appState:s}=this.props.stores;s.toggleDisplayDetails(t)},this.adminToggleEditUser=e=>{e.stopPropagation();const t=e.target.closest("tr").dataset.email,{appState:s}=this.props.stores;s.toggleEditUserDetails(t)},this.adminSignupEdit=e=>{const{raceid:t}=this.props,{raceStore:s}=this.props.stores,a=e.target.id,i=e.target.value,{classid:o,contestantid:c}=e.target.dataset,n={raceClassId:o,contestantId:c,["raceClassContestant"+l.a.ucfirst(a)]:i};clearTimeout(this.updateTimer[a]),this.updateTimer[a]=setTimeout((async function(){s.editClass({id:t,data:n})}),500)},this.lockAllWorkoutsInRace=async function(){const{raceid:e}=t.props,{raceStore:s}=t.props.stores,a=await s.lockAllWorkoutsInRace({id:e});t.setState({lockMessage:a})},this.filterByClass=e=>{const t=e.target.closest("button").dataset.id,{appState:s}=this.props.stores;s.toggleSelectedClassId(t,!0)},this.state={},this.inputRef={},this.updateTimer={}}async loadRace(e=this.props){var t=this;this.setState({isLoading:!0});const{raceStore:s}=e.stores,{raceid:a}=e;await s.load(a);const{race:i}=s,o=i.classes.filter(e=>e.contestants&&e.contestants.length>0).map(e=>e.contestants.filter(e=>e.team>0).map(e=>e.team)).flat();o.length>0&&a&&(await s.loadTeams(o.join(",")),await s.loadWorkoutSummary(o.join(","),a),s.getWorkoutSummaryActiveTeams()),s.getAllClassesSortedBy(),clearTimeout(this.updateTimer.reload),this.updateTimer.reload=setTimeout((async function(){const e=Math.floor((new Date).getTime()/1e3);t.setState({reloadLastEpoch:e}),t.loadRace()}),6e4),this.setState({isLoading:!1,contentIsNotLoaded:!1})}componentWillUnmount(){clearTimeout(this.updateTimer.reload),clearTimeout(this.updateTimer.tick)}componentDidMount(){this.loadRace()}render(){const{contentIsNotLoaded:t,lockMessage:s}=this.state,{userStore:a,raceStore:i,appState:o}=this.props.stores,{user:c={},teams:r=[],isAdmin:h}=a,{language:m="en"}=c,{displayDetails:g,editUserDetails:O,selectedClassIds:j=[]}=o,{race:f={},classes:v=[]}=i,y=new Date(f.endDate);y.setHours(y.getHours()+2);const w=1===f.liveRace;return Object(n.h)(e,null,Object(n.h)("div",{class:"row"},Object(n.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-0 mb-2"},Object(n.h)("h2",{class:"mb-0"},Object(n.h)(d.c,{id:"race.results"},"Results"))),Object(n.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-3 mb-2"},Object(n.h)(u,{stores:this.props.stores}),w?Object(n.h)(e,null):Object(n.h)(e,null,c.email&&Object(n.h)("div",{class:"alert alert-primary",role:"alert"},"no"===m&&Object(n.h)(e,null,"Resultatene hentes direkte fra treningsøktene i QPaws appen.",Object(n.h)("br",null),Object(n.h)("strong",null,"For at treningsøktene skal bli registrert må øktene:"),Object(n.h)("ul",null,Object(n.h)("li",null,"Ha riktig dato som er innenfor løpsperioden."),Object(n.h)("li",null,"Være markert som 'Konkurranse'."),Object(n.h)("li",null,"Være registrert på teamet som er påmeldt."))),"en"===m&&Object(n.h)(e,null,"The results are imported directly from the workouts inside QPaws app.",Object(n.h)("br",null),Object(n.h)("strong",null,"To make sure your workouts are registered check the following:"),Object(n.h)("ul",null,Object(n.h)("li",null,"Use the correct date on your workout. Has to be inside the race period."),Object(n.h)("li",null,"Mark the workout as 'Race'."),Object(n.h)("li",null,"Workout has to be on the same team as you signed up with."))))),f.resultsUrl?Object(n.h)("div",{class:"p-3 my-4 bg-light"},Object(n.h)("a",{href:f.resultsUrl,target:"_blank",rel:"noreferrer",native:!0},f.resultsText?f.resultsText:Object(n.h)(e,null,Object(n.h)(d.c,{id:"races.results-here"},"Se resultater her")," ")," ",Object(n.h)("i",{class:"fas fa-chevron-circle-right"}))):Object(n.h)(e,null),(t||!v||0===v.length)&&Object(n.h)("div",{class:"d-flex justify-content-center my-5 py-5"},Object(n.h)("div",{class:"spinner-border text-primary",role:"status"},Object(n.h)("span",{class:"sr-only"},"Loading...")))),f.resultsUrl?Object(n.h)(e,null):Object(n.h)(e,null,Object(n.h)("div",{class:"col-12"},Object(n.h)("div",{class:"row"},Object(n.h)("div",{class:"w-100 overflow-hidden"},Object(n.h)("div",{class:"d-flex flex-row flex-nowrap pb-2 px-1",style:"overflow: auto; scroll-snap-type: x mandatory;"},f.classes&&f.classes.sort((e,t)=>e.distance-t.distance).map((t,s)=>Object(n.h)(e,null,Object(n.h)("div",{class:"col px-0 pt-2"},Object(n.h)("button",{type:"button",class:`btn btn-block ${0===s&&"rounded-pill-left"} ${s===f.classes.length-1&&"rounded-pill-right"} rounded-none ${j.indexOf(t.id)>-1?"btn-primary":"btn-outline-primary"} text-nowrap`,style:"text-overflow: ellipsis; overflow: hidden;",onClick:this.filterByClass,"data-id":t.id},t.title)))))))),Object(n.h)("div",{class:"col-12"},f.classes&&f.classes.filter(e=>!(j.length>0)||j.indexOf(e.id)>-1).sort((e,t)=>e.distance-t.distance).map(t=>Object(n.h)("div",{class:"mt-5 mb-5"},f.resultDanger&&Object(n.h)("div",{class:"alert alert-danger",role:"alert"},Object(n.h)("div",{class:"spinner-grow text-danger float-left",role:"status"},Object(n.h)("span",{class:"sr-only"},"Loading...")),Object(n.h)("i",{class:"fas fa-exclamation-triangle float-left mr-4",style:"font-size: 2.0em;"}),Object(n.h)(b.a,{markdown:p.a.replaceImages(f.resultDanger,f.images,m),markdownOpts:p.a.getMarkdownOptions()})),f.resultWarning&&Object(n.h)("div",{class:"alert alert-warning",role:"alert"},Object(n.h)("i",{class:"fas fa-exclamation float-left mr-4",style:"font-size: 2.0em;"}),Object(n.h)(b.a,{markdown:p.a.replaceImages(f.resultWarning,f.images,m),markdownOpts:p.a.getMarkdownOptions()})),f.resultSuccess&&Object(n.h)("div",{class:"alert alert-success",role:"alert"},Object(n.h)("i",{class:"fas fa-check float-left mr-4",style:"font-size: 2.0em;"}),Object(n.h)(b.a,{markdown:p.a.replaceImages(f.resultSuccess,f.images,m),markdownOpts:p.a.getMarkdownOptions()})),Object(n.h)("h3",null,t.title," ",t.startDate&&Object(n.h)(e,null,": ",Object(n.h)("span",{class:"font-weight-lighter"},l.a.formatDate(`${t.startDate} ${t.startTime||"00:00:00"}`,{locale:m,hour12:!1,hour:"2-digit",minute:"2-digit"})," - ",l.a.formatDate(`${t.endDate} ${t.endTime||"00:00:00"}`,{locale:m,hour12:!1,hour:"2-digit",minute:"2-digit"})))),Object(n.h)("span",{class:"float-right"},Object(n.h)("span",{class:"text-muted"},Object(n.h)(d.c,{id:"races.mushers"},"Mushers"),": ",t.totalMushers||0),Object(n.h)("span",{class:"text-muted ml-4"},Object(n.h)(d.c,{id:"races.finished-mushers"},"Finished mushers"),": ",t.totalFinished||0," ")),Object(n.h)("div",{class:"table-responsive-md"},Object(n.h)("table",{class:"table table-sm table-striped"},Object(n.h)("thead",null,Object(n.h)("tr",null,Object(n.h)("th",{scope:"col"},"#"),Object(n.h)("th",{scope:"col",style:"min-width: 200px;"},Object(n.h)(d.c,{id:"races.name"},"Navn")),h&&Object(n.h)(e,null,Object(n.h)("th",{class:"d-none d-lg-table-cell",scope:"col"},Object(n.h)("i",{class:"fas fa-user-shield"})," Cellphone"),Object(n.h)("th",{class:"d-none d-lg-table-cell",scope:"col"},Object(n.h)("i",{class:"fas fa-user-shield"})," Email")),h&&Object(n.h)("th",{scope:"col",class:"d-none d-lg-table-cell",style:"min-width: 400px;"},Object(n.h)(d.c,{id:"races.stages"},"Etapper")),Object(n.h)("th",{scope:"col"},Object(n.h)(d.c,{id:"races.result"},"Resultat")))),Object(n.h)("tbody",null,v[t.id]&&v[t.id].contestants&&v[t.id].contestants.map((s,a)=>{const{musher:o,currentTeam:c,currentStages:r,currentResults:d,completed:u,normalizedDuration:j,weightedNormalizedDuration:v,isDone:w,finishedDate:x,totalWorkoutTimeUsedSec:k}=s,S=i.getTotalsByTeamId(c.id);return Object(n.h)(e,null,Object(n.h)("tr",{onClick:this.toggleDisplayDetails,"data-email":o.email},Object(n.h)("th",{scope:"row"},a+1,h&&d&&Object(n.h)(e,null,Object(n.h)("br",null),d.isLocked?Object(n.h)("i",{class:"fas fa-lock text-danger mr-2"}):Object(n.h)("i",{class:"fas fa-lock-open text-success mr-2"}))),Object(n.h)("td",{class:""+(g[o.email]?"font-weight-bold":""),style:""+(g[o.email]?"":"line-height: 0.8em;")},g[o.email]?Object(n.h)(e,null,o.firstname," ",o.lastname,Object(n.h)("br",null),Object(n.h)("span",{class:"text-muted"},c.name),Object(n.h)("br",null),Object(n.h)("small",{class:"text-muted"},o.sportsClub),Object(n.h)("br",null),o.facebook&&Object(n.h)("a",{class:"mr-2",href:p.a.asFacebookLink(o.facebook),native:!0,target:"_blank",rel:"noreferrer"},Object(n.h)("i",{class:"fab fa-facebook"})),o.instagram&&Object(n.h)("a",{class:"mr-2",href:p.a.asInstagramLink(o.instagram),native:!0,target:"_blank",rel:"noreferrer"},Object(n.h)("i",{class:"fab fa-instagram"})),o.price1&&Object(n.h)("div",{class:"font-weight-lighter"},Object(n.h)("i",{class:"fas fa-trophy text-warning"})," ",o.price1,o.priceSent&&Object(n.h)(e,null,Object(n.h)("i",{class:"fas fa-check text-success"}))),o.price2&&Object(n.h)("div",{class:"font-weight-lighter"},Object(n.h)("i",{class:"fas fa-trophy text-warning"})," ",o.price2),o.price3&&Object(n.h)("div",{class:"font-weight-lighter"},Object(n.h)("i",{class:"fas fa-trophy text-warning"})," ",o.price3)):Object(n.h)(e,null,o.price1&&Object(n.h)("span",{class:"float-right text-warning",style:"font-size: 1.2em;"},Object(n.h)("i",{class:"fas fa-trophy"}),o.priceSent&&Object(n.h)(e,null,Object(n.h)("i",{class:"fas fa-check text-success"}))),Object(n.h)("nobr",null,o.firstname," ",o.lastname,Object(n.h)("br",null),Object(n.h)("small",{class:"text-muted"},o.sportsClub),Object(n.h)("br",null)))),h&&Object(n.h)(e,null,Object(n.h)("td",{class:"d-none d-lg-table-cell"},o.cellphone),Object(n.h)("td",{class:"d-none d-lg-table-cell"},o.email)),h&&Object(n.h)("td",{class:"d-none d-lg-table-cell"},h&&Object(n.h)(e,null,Object(n.h)("button",{class:"btn btn-primary btn-sm float-right",onClick:this.adminToggleEditUser},Object(n.h)("i",{class:"fas fa-user-edit"}))),h&&O[o.email]&&Object(n.h)(e,null,Object(n.h)("h5",null,"Admin edit:"),Object(n.h)("div",{class:"form-group row my-0"},Object(n.h)("label",{class:"col-sm-2 col-form-label text-right"},"Email"),Object(n.h)("div",{class:"col-sm-10"},o.email)),Object(n.h)("div",{class:"form-group row my-0"},Object(n.h)("label",{class:"col-sm-2 col-form-label text-right"},"Cellphone"),Object(n.h)("div",{class:"col-sm-10"},o.cellphone)),Object(n.h)("div",{class:"form-group row my-0"},Object(n.h)("label",{for:"team",class:"col-sm-2 col-form-label text-right"},"Race status"),Object(n.h)("div",{class:"col-sm-10"},Object(n.h)("select",{class:"form-control-plaintext",id:"raceStatus","data-classid":o.class,"data-contestantid":o.id,onInput:this.adminSignupEdit,value:o.raceStatus},Object(n.h)("option",{value:""},"-- Choose race status --"),Object(n.h)("option",{value:"OK"},"OK - Everything ok"),Object(n.h)("option",{value:"DNS"},"DNS - Did Not Start"),Object(n.h)("option",{value:"DNF"},"DNF - Did Not Finish"),Object(n.h)("option",{value:"DNQ"},"DNQ - Did not qualify"),Object(n.h)("option",{value:"DQ"},"DQ - Disqualified"),Object(n.h)("option",{value:"DC"},"DC - Data changed by user")))),Object(n.h)("div",{class:"form-group row my-0"},Object(n.h)("label",{for:"raceComment",class:"col-sm-2 col-form-label text-right"},"Race comment"),Object(n.h)("div",{class:"col-sm-10"},Object(n.h)("input",{type:"text",class:"form-control-plaintext",id:"raceComment","data-classid":o.class,"data-contestantid":o.id,onInput:this.adminSignupEdit,value:o.raceComment}))),Object(n.h)("div",{class:"form-group row my-0"},Object(n.h)("label",{for:"gpxResultsApproved",class:"col-sm-2 col-form-label text-right"},"GPX Results approved (date)"),Object(n.h)("div",{class:"col-sm-10"},Object(n.h)("input",{type:"date",class:"form-control-plaintext",id:"gpxResultsApproved","data-classid":o.class,"data-contestantid":o.id,onInput:this.adminSignupEdit,value:o.gpxResultsApproved?l.a.isoDate(o.gpxResultsApproved,!1,!1,!0):null}))),Object(n.h)("div",{class:"form-group row my-0"},Object(n.h)("label",{for:"price1",class:"col-sm-2 col-form-label text-right"},"Price 1"),Object(n.h)("div",{class:"col-sm-10"},Object(n.h)("input",{type:"text",class:"form-control-plaintext",id:"price1","data-classid":o.class,"data-contestantid":o.id,onInput:this.adminSignupEdit,value:o.price1}))),Object(n.h)("div",{class:"form-group row my-0"},Object(n.h)("label",{for:"price2",class:"col-sm-2 col-form-label text-right"},"Price 2"),Object(n.h)("div",{class:"col-sm-10"},Object(n.h)("input",{type:"text",class:"form-control-plaintext",id:"price2","data-classid":o.class,"data-contestantid":o.id,onInput:this.adminSignupEdit,value:o.price2}))),Object(n.h)("div",{class:"form-group row my-0"},Object(n.h)("label",{for:"price3",class:"col-sm-2 col-form-label text-right"},"Price 3"),Object(n.h)("div",{class:"col-sm-10"},Object(n.h)("input",{type:"text",class:"form-control-plaintext",id:"price3","data-classid":o.class,"data-contestantid":o.id,onInput:this.adminSignupEdit,value:o.price3}))),Object(n.h)("div",{class:"form-group row my-0"},Object(n.h)("label",{for:"priceSent",class:"col-sm-2 col-form-label text-right"},"Price sent"),Object(n.h)("div",{class:"col-sm-10"},Object(n.h)("input",{type:"date",class:"form-control-plaintext",id:"priceSent","data-classid":o.class,"data-contestantid":o.id,onInput:this.adminSignupEdit,value:o.priceSent?l.a.isoDate(o.priceSent,!1,!1,!0):null})))),h&&Object(n.h)("div",{class:"d-flex flex-wrap"},r&&r.map((s,a)=>{const i=s.distanceKm/t.distance*100,c=(i>100||parseInt(i,10),Math.floor(new Date(s.date).getTime()/1e3)),r=new Date(0);r.setUTCSeconds(c+parseInt(s.duration,10));s.images.flat();return g[o.email]?Object(n.h)(e,null,Object(n.h)("div",{class:"bg-light border rounded-lg  text-right position-relative mr-1 mb-1",style:"width: 350px; min-width: 320px;"},Object(n.h)("svg",{viewBox:"0 0 300 100",class:"position-absolute",style:"width: 100%; height: 95%; bottom: 0px; left: 0px; z-index: 0;"},Object(n.h)("path",{d:""+s.svgElevation,style:"fill: #0063FF; stroke: #0063FF; stroke-width: 2; opacity: 0.2;"})),Object(n.h)("div",{class:"position-relative px-3"},Object(n.h)("span",{class:"position-absolute",style:"top: 3px; left: 3px; font-size: 1.3em;"},a+1),Object(n.h)("small",null,h&&Object(n.h)("span",{class:"position-absolute",style:"top: 0px; right: -5px;"},s.isLocked?Object(n.h)("i",{class:"fas fa-lock text-danger"}):Object(n.h)("i",{class:"fas fa-lock-open text-success"})),Object(n.h)("span",{class:"float-left"},Object(n.h)("nobr",null,Object(n.h)("i",{style:"width: 20px;",class:"fas fa-sign-out-alt text-muted"})," ",l.a.formatDate(s.date,{locale:m,hour12:!1,hour:"2-digit",minute:"2-digit"})),Object(n.h)("nobr",null,Object(n.h)("i",{style:"width: 20px;",class:"fas fa-sign-in-alt text-muted"})," ",l.a.formatDate(r,{locale:m,hour12:!1,hour:"2-digit",minute:"2-digit"}))),Object(n.h)("span",{class:"float-right"},Object(n.h)("nobr",null,Object(n.h)("i",{style:"width: 20px;",class:"fas fa-road text-muted"})," ",l.a.format(s.distanceKm,1)||"n/a"," ",Object(n.h)("span",{class:"font-weight-lighter"},"km")),Object(n.h)("nobr",null,Object(n.h)("i",{style:"width: 20px;",class:"fas fa-mountain text-muted"})," ",l.a.format(s.elevation,0)||"n/a"," ",Object(n.h)("span",{class:"font-weight-lighter"},"m")),Object(n.h)("nobr",null,Object(n.h)("i",{style:"width: 20px;",class:"fas fa-tachometer-alt text-muted"})," ",l.a.format(s.speedAvg,1)||"n/a"," ",Object(n.h)("span",{class:"font-weight-lighter"},"km/t")),Object(n.h)("br",null),Object(n.h)("nobr",null,Object(n.h)("i",{style:"width: 20px;",class:"fas fa-clock text-muted"})," ",l.a.secToHms(s.duration)||"n/a"),Object(n.h)("nobr",null,Object(n.h)("i",{style:"width: 20px;",class:"fas fa-moon text-muted"})," ",l.a.secToHms(s.rest)||"n/a"),Object(n.h)("nobr",null,Object(n.h)("i",{style:"width: 20px;",class:"fas fa-running text-muted"})," ",l.a.secToHms(s.duration-s.rest)||"n/a"),Object(n.h)("br",null),Object(n.h)("nobr",null,Object(n.h)("i",{style:"width: 20px;",class:"fas fa-dog text-muted"})," ",l.a.format(s.avgDogs,0)||"n/a")))))):Object(n.h)(e,null,Object(n.h)("div",{class:"bg-light border rounded-lg text-right position-relative px-3 mr-1 mb-1",style:"width: 300px; min-width: 300px;"},Object(n.h)("small",null,h&&Object(n.h)("span",{class:"position-absolute",style:"top: 2px; right: -5px;"},s.isLocked?Object(n.h)("i",{class:"fas fa-lock text-danger"}):Object(n.h)("i",{class:"fas fa-lock-open text-sucess"})),Object(n.h)("span",{class:"float-left"},a+1),Object(n.h)("nobr",null,Object(n.h)("i",{style:"width: 20px;",class:"fas fa-road text-muted"})," ",l.a.format(s.distanceKm,1)||"n/a"," ",Object(n.h)("span",{class:"font-weight-lighter"},"km")),Object(n.h)("nobr",null,Object(n.h)("i",{style:"width: 20px;",class:"fas fa-tachometer-alt text-muted"})," ",l.a.format(s.speedAvg,1)||"n/a"," ",Object(n.h)("span",{class:"font-weight-lighter"},"km/t")),Object(n.h)("nobr",null,Object(n.h)("i",{style:"width: 20px;",class:"fas fa-clock text-muted"})," ",l.a.secToHms(s.duration)||"n/a"))))}))),Object(n.h)("td",{class:"text-right position-relative pl-4"},function(t){switch(t.raceStatus){case"OK":return Object(n.h)(e,null,Object(n.h)("span",{class:"position-absolute rounded-lg",style:"top: 10px; left: 0px;"},Object(n.h)("i",{class:"fas fa-check text-success"})));case"DNS":case"DNF":case"DNQ":case"DQ":return Object(n.h)(e,null,Object(n.h)("span",{class:"position-absolute bg-danger text-white text-center px-2 rounded-lg border",style:"top: 5px; left: -100px; width: 80px"},Object(n.h)("i",{class:"fas fa-info-circle"})," ",t.raceStatus));case"DC":return Object(n.h)(e,null,Object(n.h)("span",{class:"position-absolute bg-warning text-white text-center px-2 rounded-lg border",style:"top: 5px; left: -150px; width: 80px"},Object(n.h)("i",{class:"fas fa-info-circle"})," ",t.raceStatus));default:return""}}(o),o.raceComment&&Object(n.h)(e,null,Object(n.h)("div",{class:"alert alert-warning text-left",role:"alert"},Object(n.h)("i",{class:"fas fa-exclamation-triangle float-left mr-4",style:"font-size: 2.0em;"}),Object(n.h)(b.a,{markdown:p.a.replaceImages(o.raceComment,f.images,m),markdownOpts:p.a.getMarkdownOptions()}))),h&&d.lastUpdated>y&&Object(n.h)(e,null,Object(n.h)("div",{class:"alert alert-danger text-left d-none d-md-block",role:"alert"},Object(n.h)("i",{class:"fas fa-exclamation-triangle float-left mr-4",style:"font-size: 2.0em;"}),Object(n.h)("i",{class:"fas fa-user-shield"})," Last changed: ",l.a.formatDate(d.lastUpdated,{locale:m,hour12:!1,hour:"2-digit",minute:"2-digit"}))),u>=99?Object(n.h)("span",{class:"position-absolute",style:"top: 10px; left: 0px;"},Object(n.h)("i",{class:"fas fa-flag-checkered text-success"})):"",Object(n.h)("small",null,g[o.email]?Object(n.h)(e,null,Object(n.h)("nobr",null,Object(n.h)("i",{style:"width: 20px;",class:"fas fa-road text-muted"})," ",l.a.format(d.distanceKm,1)||"n/a"," ",Object(n.h)("span",{class:"font-weight-lighter"},"km")),Object(n.h)("nobr",null,Object(n.h)("i",{style:"width: 20px;",class:"fas fa-mountain text-muted"})," ",l.a.format(d.elevation,0)||"n/a"," ",Object(n.h)("span",{class:"font-weight-lighter"},"m")),Object(n.h)("div",{class:"progress mb-1",style:"height: 3px;"},Object(n.h)("div",{class:"progress-bar "+(u>=99?"bg-success":""),role:"progressbar",style:`width: ${u}%`,"aria-valuenow":""+u,"aria-valuemin":"0","aria-valuemax":"100"})),f.nonstop?Object(n.h)(e,null,Object(n.h)("nobr",null,Object(n.h)("i",{style:"width: 20px;",class:"fas fa-clock text-muted"})," ",l.a.secToHms(k)||"n/a"),Object(n.h)("nobr",null,Object(n.h)("i",{style:"width: 20px;",class:"fas fa-moon text-muted"})," ",l.a.secToHms(S.totalRest)||"n/a"),Object(n.h)("br",null),Object(n.h)("nobr",null,Object(n.h)("i",{style:"width: 20px;",class:"fas fa-calendar text-muted"})," ",l.a.isoDate(S.firstEpoch)," - ",Object(n.h)("i",{style:"width: 20px;",class:"fas fa-calendar text-muted"})," ",l.a.isoDate(x)),h&&Object(n.h)(e,null,Object(n.h)("br",null),Object(n.h)("div",{class:"text-danger"},S.firstGpxStartEpoch&&Object(n.h)(e,null,Object(n.h)("nobr",null,"firstGpxStartEpoch: ",l.a.isoDate(S.firstGpxStartEpoch)),Object(n.h)("br",null)),S.lastGpxStartEpoch&&Object(n.h)(e,null,Object(n.h)("nobr",null,"lastGpxStartEpoch: ",l.a.isoDate(S.lastGpxStartEpoch)),Object(n.h)("br",null))))):Object(n.h)(e,null,Object(n.h)("nobr",null,Object(n.h)("i",{style:"width: 20px;",class:"fas fa-clock text-muted"})," ",l.a.secToHms(d.duration)||"n/a"),Object(n.h)("nobr",null,Object(n.h)("i",{style:"width: 20px;",class:"fas fa-moon text-muted"})," ",l.a.secToHms(d.rest)||"n/a"),Object(n.h)("nobr",null,Object(n.h)("i",{style:"width: 20px;",class:"fas fa-running text-muted"})," ",l.a.secToHms(d.duration-d.rest)||"n/a"),Object(n.h)("br",null),1===w&&Object(n.h)(e,null,Object(n.h)("nobr",{class:"font-weight-bold"},Object(n.h)("span",{class:"font-weight-lighter text-muted"},"Normalized to race distance:")," ",Object(n.h)("i",{style:"width: 20px;",class:"fas fa-clock text-muted"})," ",l.a.secToHms(j)||"n/a"),Object(n.h)("br",null)),1===w&&Object(n.h)(e,null,Object(n.h)("nobr",{class:"font-weight-bold"},Object(n.h)("span",{class:"font-weight-lighter text-muted"},"Normalized:")," ",Object(n.h)("i",{style:"width: 20px;",class:"fas fa-clock text-muted"})," ",l.a.secToHms(v)||"n/a"),Object(n.h)("br",null)))):Object(n.h)(e,null,Object(n.h)("nobr",null,Object(n.h)("i",{style:"width: 20px;",class:"fas fa-road text-muted"})," ",l.a.format(d.distanceKm,1)||"n/a"," ",Object(n.h)("span",{class:"font-weight-lighter"},"km")),Object(n.h)("nobr",null,Object(n.h)("i",{style:"width: 20px;",class:"fas fa-mountain text-muted"})," ",l.a.format(d.elevation,0)||"n/a"," ",Object(n.h)("span",{class:"font-weight-lighter"},"m")),Object(n.h)("div",{class:"progress mb-1",style:"height: 3px;"},Object(n.h)("div",{class:"progress-bar "+(u>=99?"bg-success":""),role:"progressbar",style:`width: ${u}%`,"aria-valuenow":""+u,"aria-valuemin":"0","aria-valuemax":"100"})),f.nonstop?Object(n.h)(e,null,Object(n.h)("nobr",null,Object(n.h)("i",{style:"width: 20px;",class:"fas fa-clock text-muted"})," ",l.a.secToHms(k)||"n/a"),Object(n.h)("nobr",null,Object(n.h)("i",{style:"width: 20px;",class:"fas fa-moon text-muted"})," ",l.a.secToHms(S.totalRest)||"n/a")):Object(n.h)(e,null,1===w?Object(n.h)(e,null,Object(n.h)("nobr",{class:"font-weight-bold"},Object(n.h)("i",{style:"width: 20px;",class:"fas fa-clock text-muted"})," ",l.a.secToHms(v)||"n/a"),Object(n.h)("br",null)):Object(n.h)(e,null,Object(n.h)("nobr",null,Object(n.h)("i",{style:"width: 20px;",class:"fas fa-clock text-muted"})," ",l.a.secToHms(d.duration)||"n/a"),Object(n.h)("br",null))))))))})))),Object(n.h)("div",{class:"text-center text-muted"},Object(n.h)("small",null,"no"===m&&Object(n.h)(e,null,"OBS! Ref reglene så er det ikke lov til å endre treningsøktene som er med i konkurransen etter at løpet er ferdig.",Object(n.h)("br",null),"Forsøk på dette vil resultere i automatisk deplassering på listene."),"en"===m&&Object(n.h)(e,null,"IMPORTANT! According to the rules: It is NOT allowed to try alter the workouts related to the competition after the race has ended.",Object(n.h)("br",null),"Attempts will result in automatic deplacement on the resultlists.")))))),h&&Object(n.h)(e,null,Object(n.h)("button",{class:"btn btn-danger btn-lg float-right m-4",onClick:this.lockAllWorkoutsInRace},"Lock all workouts in this race"),Object(n.h)("xmp",{class:"m-5"},JSON.stringify(s,null,4))),Object(n.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-3 mb-2"},Object(n.h)("a",{class:"btn btn-lg btn-block btn-primary",href:`https://homerunrace.no/index#/race/${f.id}/results`},"All results")))))}})||c;t.a=g}).call(this,s("hosL").Fragment)},wanP:function(e,t,s){"use strict";(function(e){function a(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,a)}return s}function i(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}var o,c=s("hosL"),n=(s("Utv1"),s("/eY4")),l=s("eK6s"),r=s.n(l);const d={mouseData:{}};let h=Object(n.a)(o=class extends c.Component{constructor(e){super(e),this.state=function(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?a(Object(s),!0).forEach((function(t){i(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):a(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}({},d),this.svgRef=null}render(){const{radius:t=50,heightAdd:s=0,color:a="success",showPercentText:i=!0,percent:o=0,prefix:n="",showCenterText:l=!1,centerText:d,centerTextSize:h,centerTextX:b,centerTextY:p,total:m="",totalY:u="90%",totalX:g="50%",totalTextAnchor:O="middle",completed:j="",completedY:f="65%",completedX:v="50%",completedTextAnchor:y="middle"}=this.props,w=.3*t,x=t-w/2,k=.3*t,S=2*x*Math.PI,I=.75*S,C=`${I} ${S}`,T=`rotate(135, ${t}, ${t})`,D=I-Math.min(Math.max(o,0),100)/100*I,A=h||t/2.5,R=t/5;return Object(c.h)(e,null,Object(c.h)("svg",{xmlns:"http://www.w3.org/2000/svg",class:r.a.svg,width:2*t,height:2*t+s,preserveAspectRatio:"none",ref:e=>this.svgRef=e},Object(c.h)("circle",{class:""+r.a.gaugeBackground,cx:t,cy:t,r:x,strokeWidth:w,strokeDasharray:C,strokeLinecap:"round",transform:T}),Object(c.h)("circle",{class:`${r.a[a]} ${r.a.gauge}`,cx:t,cy:t,r:x,stroke:"url(#grad)",strokeDasharray:C,strokeDashoffset:D,strokeLinecap:"round",strokeWidth:k,style:{transition:"stroke-dashoffset 0.3s"},transform:T}),i&&Object(c.h)("text",{class:`${r.a.gaugeText} ${r.a[a]}`,x:b||"50%",y:p||"50%","dominant-baseline":"middle","text-anchor":"middle","font-size":A},o," ",n),l&&Object(c.h)("text",{class:`${r.a.gaugeText} ${r.a[a]}`,x:b||"50%",y:p||"50%","dominant-baseline":"middle","text-anchor":"middle","font-size":A},d),j&&Object(c.h)("text",{class:`${r.a.gaugeText} ${r.a[a]}`,x:v,y:f,"dominant-baseline":"middle","text-anchor":y,"font-size":R},j),Object(c.h)("text",{class:`${r.a.gaugeText} ${r.a.secondary}`,x:g,y:u,"dominant-baseline":"middle","text-anchor":O,"font-size":R},m)))}})||o;t.a=h}).call(this,s("hosL").Fragment)},yHBq:function(e,t,s){"use strict";(function(e){function a(){return(a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e}).apply(this,arguments)}var i,o,c=s("hosL"),n=s("/eY4"),l=s("Utv1");let r=Object(n.a)(i=class extends c.Component{constructor(e){super(e),this.state={},this.containerRef=null}componentWillUnmount(){const{removeIntersectionObserver:e}=this.props;e&&e(this.containerRef)}componentDidMount(){const{addIntersectionObserver:e}=this.props;e&&e(this.containerRef)}render(){const{wrapperClassNames:e="",contentClassNames:t="",renderContent:s,obj:i={},idx:o,dataFields:n,dataValues:l,sessionid:r}=this.props,d={};return r&&(d.sessionid=r),n.forEach(e=>d["data-"+e]=encodeURI(l[e]||i[e])),Object(c.h)("div",a({class:""+e,ref:e=>this.containerRef=e,"data-idx":o},d),Object(c.h)("div",{class:""+t,style:"display: block;"},s({obj:i,idx:o})))}})||i,d=Object(n.a)(o=class extends c.Component{constructor(e){super(e),this.deleteIntersectionObserver=()=>{this.intersectionObserver=null},this.handleIntersection=e=>{const{handleIntersection:t}=this.props;"function"==typeof t&&t(e),e.forEach(e=>{const{isIntersecting:t}=e,{height:s=0}=e.target.dataset,a=Math.max(e.target.childNodes[0].offsetHeight,e.target.offsetHeight,e.target.scrollHeight);t?(e.target.childNodes[0].style.display="block",e.target.style.minHeight=(a>s?a:s)+"px"):e.target.style.minHeight&&(e.target.style.minHeight=(a>s?a:s)+"px",e.target.childNodes[0].style.display="none")})},this.setupIntersectionObserver=()=>{if(!("IntersectionObserver"in window)||!("IntersectionObserverEntry"in window)||!("intersectionRatio"in window.IntersectionObserverEntry.prototype))return!1;this.intersectionObserver=new IntersectionObserver(this.handleIntersection,{root:null,rootMargin:"100px",threshold:.1})},this.addIntersectionObserver=e=>{this.intersectionObserver&&e&&this.intersectionObserver.observe(e)},this.removeIntersectionObserver=e=>{this.intersectionObserver&&e&&this.intersectionObserver.unobserve(e)},this.state={}}componentWillMount(){this.setupIntersectionObserver()}componentWillUnmount(){this.deleteIntersectionObserver()}render(){const{data:t=[],wrapperClassNames:s="row pb-4 bg-light",contentClassNames:a="col-12 col-sm-8 col-lg-6 offset-sm-2 offset-lg-3 mb-0 position-relative rounded rounded-lg py-3 shadow-sm",renderContent:i=(()=>Object(c.h)(e,null,"Missing render function!")),dataFields:o=[],dataValues:n={}}=this.props;return Object(c.h)("div",{class:"w-100"},t&&t.filter(e=>l.a.isObject(e)).map((t,l)=>{const d=t.hasOwnProperty("wrapperClassNames")?t.wrapperClassNames:s,h=t.hasOwnProperty("contentClassNames")?t.contentClassNames:a;return Object(c.h)(e,null,Object(c.h)(r,{key:`fastline-${l}-${t.id}`,obj:t,idx:l,addIntersectionObserver:this.addIntersectionObserver,removeIntersectionObserver:this.removeIntersectionObserver,wrapperClassNames:d,contentClassNames:h,renderContent:i,dataFields:o,dataValues:n}))}))}})||o;t.a=d}).call(this,s("hosL").Fragment)},zYNi:function(e,t,s){"use strict";(function(e){function a(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,a)}return s}function i(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?a(Object(s),!0).forEach((function(t){o(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):a(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function o(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}var c,n,l,r,d=s("hosL"),h=(s("QRet"),s("Utv1")),b=s("/eY4"),p=s("OhSV"),m=(s("Y3FI"),s("fh8t")),u=s.n(m),g=(s("go65"),s("HQo+")),O=s("wanP"),j=s("ZQlJ"),f=s("q/oJ"),v=s("cH0S"),y=s("fVsX"),w=s("8n2v"),x=s("gWxU"),k=s("Nanz"),S=s("ZOvn");const I=S.a.marginTop(!0,!1),C=(S.a.marginTopBack(!1),S.a.marginBottom(),S.a.subMenuMarginTop(),{isLoading:!1,email:"",submenu:"ads",jwtToken:h.a.getJwtToken(),reloadInSec:null,reloadIsActive:!1,leaderboardMode:"mushers",filterByraceClass:"",showLeaderBoard:!0,showNews:!0});let T=Object(b.a)(c=class extends d.Component{constructor(e){super(e),this.initComponent=()=>{this.setState({reloadIsActive:!0},()=>this.tickReloadTimeer())},this.tickReloadTimeer=()=>{const{reloadLastEpoch:e}=this.props,{reloadIsActive:t}=this.state;if(t){const t=Math.floor((new Date).getTime()/1e3);this.setState({reloadInSec:60-(t-e)}),clearTimeout(this.updateTimer.tick),this.updateTimer.tick=setTimeout(()=>this.tickReloadTimeer(),1e3)}return!1},this.state=i({},C),this.updateTimer={}}componentDidMount(){this.initComponent()}componentWillUnmount(){clearTimeout(this.updateTimer.tick)}render(){const{reloadInSec:t}=this.state,{radius:s=13,fontSize:a=11,classNames:i=""}=this.props,o=Math.floor(h.a.normalizeBetween(t,0,60,0,100));return Object(d.h)(e,null,Object(d.h)("span",{class:i},Object(d.h)(O.a,{key:"gauge-reload-page",color:"primary",radius:s,showPercentText:!1,percent:o,showCenterText:!0,centerText:t,centerTextSize:a,centerTextY:"55%"})))}})||c,D=Object(b.a)(n=class extends d.Component{constructor(e){super(e),this.chooseSubmenu=e=>{const t=e.target.closest("button").dataset.submenu;this.setState({submenu:t})},this.state={}}render(){const{raceStore:t,userStore:s}=this.props.stores,{submenu:a="details"}=this.state,{waypoints:i}=t,{raceClass:o={},race:c={},onMarkerClick:n=(()=>{})}=this.props;return Object(d.h)(e,null,Object(d.h)("div",{class:"d-flex justify-content-center align-items-center mb-2"},Object(d.h)("span",{style:"font-size: 1.3em;"},c.title," - ",o.title)),Object(d.h)("div",{class:"w-100 overflow-auto",style:"max-height: 60vh;"},!i||0===i.length&&Object(d.h)(e,null,Object(d.h)("div",{class:"text-center text-muted"},Object(d.h)("div",{class:"display-1"},Object(d.h)("i",{class:"fas fa-dog"})),Object(d.h)("div",{class:"w-100"},Object(d.h)("h3",null,Object(d.h)(p.c,{id:"races.no-teams-found"},"No teams found!")),Object(d.h)(p.c,{id:"races.loading-teams"},"Loading teams...")),Object(d.h)("div",{class:"spinner-border text-primary",style:"width: 3rem; height: 3rem;",role:"status"},Object(d.h)("span",{class:"sr-only"},"Loading...")))),Object(d.h)("table",{class:"table table-striped"},i&&i.map(t=>Object(d.h)(e,null,Object(d.h)("tr",{onClick:()=>n(t)},Object(d.h)("td",{style:"width: 15px;"},t.rank),Object(d.h)("td",null,Object(d.h)("div",{class:"d-flex justify-content-between align-items-start w-100"},Object(d.h)("div",{class:"rounded-circle imageRounded imageRoundedSmallIcon float-left",style:`background-image: url("${t.image}"); background-size: cover; border: 1px ${t.color} solid; width: 30px !important; height: 30px;`}," "),Object(d.h)("div",{class:"flex-grow-1 ml-2"},Object(d.h)("span",{class:"text-white rounded-pill-both px-2 mr-2",style:`background-color: ${t.color};`},t.bib),t.flag,"  ",t.title,Object(d.h)("div",null,t.finishTime<9999999999?Object(d.h)(e,null,t.diffToFirstFinishTime>0?Object(d.h)(e,null,h.a.secToHms(t.diffToFirstFinishTime)):Object(d.h)(e,null,h.a.formatDate(h.a.parseInputDate(t.finishTime),{locale:"no-NB",hour12:!1,hour:"2-digit",minute:"2-digit"}))):Object(d.h)(e,null,Object(d.h)("span",{class:"text-muted"},Object(d.h)("i",{class:"fas fa-compass"}))," ",S.a.windDirection(t.bearing),Object(d.h)("span",{class:"text-muted font-weight-light ml-3"},Object(d.h)("i",{class:"fas fa-tachometer-alt"}))," ",h.a.format(t.speed||0,1)," km/h",Object(d.h)("br",null),Object(d.h)("span",{class:"text-muted font-weight-light"},Object(d.h)("i",{class:"fas fa-flag-checkered"}))," ",h.a.format(t.distanceToFinish,1)," km",t.distanceToFinish!==t.distanceToFirst&&t.distanceToFirst>0&&Object(d.h)(e,null,Object(d.h)("span",{class:"text-muted font-weight-light ml-3"},"1st:")," ",h.a.format(t.distanceToFirst,1)," km"),t.distanceToFinish!==t.distanceToForward&&t.distanceToForward>0&&Object(d.h)(e,null,Object(d.h)("span",{class:"text-muted font-weight-light ml-3"},Object(d.h)("i",{class:"fas fa-arrow-up"}))," ",h.a.format(t.distanceToForward,1)," km"),t.distanceToBehind>0&&Object(d.h)(e,null,Object(d.h)("span",{class:"text-muted font-weight-light ml-3"},Object(d.h)("i",{class:"fas fa-arrow-down"}))," ",h.a.format(t.distanceToBehind,1)," km")))),Object(d.h)("div",null,t.finishTime<9999999999?Object(d.h)(e,null,Object(d.h)("i",{class:"fas fa-flag-checkered"})):Object(d.h)(e,null,Object(d.h)("i",{class:"fas fa-running"})))))))))))}})||n,A=Object(b.a)(l=class extends d.Component{constructor(e){super(e),this.toggleAdminInfo=e=>{e.stopPropagation();const{showAdminInfo:t}=this.state;this.setState({showAdminInfo:!t})},this.toggleInfo=e=>{e.stopPropagation();const{showInfo:t}=this.state;this.setState({showInfo:!t})},this.onDogClick=(e,t,s)=>{e.preventDefault(),e.stopPropagation();const a=s.find(e=>e.uuidv4===t);return this.setState({currentDog:a,showDog:t,dogs:s}),!1},this.chooseSubmenu=e=>{const t=e.target.closest("button").dataset.submenu;this.setState({submenu:t})},this.state={}}render(){const{raceStore:t,userStore:s}=this.props.stores,{showAdminInfo:a,submenu:i="details",showDog:o,currentDog:c={}}=this.state,{totalTrackLength:n}=t,{wpData:l={},onMarkerClick:r=(()=>{})}=this.props,b=t.findWaypointByBib(l.bib),{isAdmin:m}=s,g=l.bib?t.getMusherByBibId(l.bib):t.getMusherByBibEmail(l.email),f=t.getTeamById(g.team),v=f.members?f.members.find(e=>e.email===g.email):{},y=(t.getClassByBib(l.bib),t.getTotalsByTeamId(g.team)),w=S.a.getImage({user:v,team:f,priority:"user"}),x=S.a.displayNameShort(v)||S.a.displayNameShort(g),k=l.color,I=S.a.hasBirthday(c.birth),C=c.birth?Math.ceil(S.a.daysUntilNextBirthday(c.birth)):365,T=h.a.format(b.totalDistanceOnTrack/n*100,0),{inFront:D,behind:A}=t.findNearestMushers(l.bib);return Object(d.h)(e,null,Object(d.h)("div",{class:"d-flex position-relative"},Object(d.h)("div",{class:"position-relative text-center border rounded-circle imageRounded imageRoundedMedium",style:w?`background-image: url("${w}"); background-size: cover;`:""},!w&&Object(d.h)("div",{class:"text-muted",style:"font-size: 25px; padding-top: 5px;"},x),Object(d.h)("div",{class:`rounded-pill-both px-2 text-center position-absolute ${k?"":"bg-secondary"} font-weight-bold`,style:"bottom: -20px; right: 0; "+(k?`background-color: ${k};`:"")},g.bib&&"n/a"!==g.bib&&Object(d.h)(e,null,g.bib))),Object(d.h)("div",{class:"flex-grow-1 pl-3 text-overflow mb-3",style:"line-height: 1.2em;"},Object(d.h)("h3",{class:"mb-0"},g.flag," ",g.firstname," ",g.lastname),Object(d.h)("h6",{class:"mb-0"},g.sportsClub))),Object(d.h)("div",{class:"d-flex justify-content-center mb-3"},Object(d.h)("div",{class:"col px-0 pt-2"},Object(d.h)("button",{type:"button",class:`btn btn-block rounded-pill-left rounded-none ${"details"===i?"btn-primary":"btn-outline-primary"} text-nowrap`,style:"text-overflow: ellipsis; overflow: hidden;",onClick:this.chooseSubmenu,"data-submenu":"details"},"Details")),Object(d.h)("div",{class:"col px-0 pt-2"},Object(d.h)("button",{type:"button",class:`btn btn-block rounded-none ${"team"===i?"btn-primary":"btn-outline-primary"} text-nowrap`,style:"text-overflow: ellipsis; overflow: hidden;",onClick:this.chooseSubmenu,"data-submenu":"team"},"Team")),Object(d.h)("div",{class:"col px-0 pt-2"},Object(d.h)("button",{type:"button",class:`btn btn-block rounded-pill-right rounded-none ${"dogs"===i?"btn-primary":"btn-outline-primary"} text-nowrap`,style:"text-overflow: ellipsis; overflow: hidden;",onClick:this.chooseSubmenu,"data-submenu":"dogs"},"Dogs"))),Object(d.h)("div",{class:"w-100 overflow-auto position-relative",style:"max-height: 60vh;"},"details"===i&&Object(d.h)(e,null,Object(d.h)("div",{class:"d-flex justify-content-between"},Object(d.h)("div",{class:"flex-fill bg-light rounded-lg p-3 align-middle"},Object(d.h)("div",null,Object(d.h)("small",{class:"text-muted"},Object(d.h)("i",{class:"fas fa-list"})," Ranking")),Object(d.h)("div",{class:"text-center",style:"font-size: 2.0em;"},b.rank)),b.finishTime<9999999999?Object(d.h)(e,null,b.diffToFirstFinishTime>0?Object(d.h)(e,null,Object(d.h)("div",{class:"flex-fill bg-light rounded-lg p-3 align-middle ml-2"},Object(d.h)("div",null,Object(d.h)("small",{class:"text-muted"},Object(d.h)("i",{class:"fas fa-clock"})," Diff to 1st")),Object(d.h)("div",{class:"text-center",style:"font-size: 2.0em;"},h.a.secToHms(b.diffToFirstFinishTime)))):Object(d.h)(e,null,Object(d.h)("div",{class:"flex-fill bg-light rounded-lg p-3 align-middle ml-2"},Object(d.h)("div",null,Object(d.h)("small",{class:"text-muted"},Object(d.h)("i",{class:"fas fa-clock"})," Finish time")),Object(d.h)("div",{class:"text-center",style:"font-size: 1.5em;"},h.a.formatDate(h.a.parseInputDate(b.finishTime),{locale:"no-NB",hour12:!1,hour:"2-digit",minute:"2-digit"}))))):Object(d.h)(e,null,Object(d.h)("div",{class:"flex-fill bg-light rounded-lg p-3 align-middle ml-2"},Object(d.h)("div",null,Object(d.h)("small",{class:"text-muted"},Object(d.h)("i",{class:"fas fa-tachometer-alt"})," Current speed")),Object(d.h)("div",{class:"text-center",style:"font-size: 2.0em;"},h.a.format(b.speed||0,1)," ",Object(d.h)("span",{class:"text-muted",style:"font-size: 0.5em;"},"km/h"))),Object(d.h)("div",{class:"flex-fill bg-light rounded-lg p-3 align-middle ml-2"},Object(d.h)("div",null,Object(d.h)("small",{class:"text-muted"},Object(d.h)("i",{class:"fas fa-compass"})," Bearing")),Object(d.h)("div",{class:"text-center",style:"font-size: 2.0em;"},S.a.windDirection(b.bearing))))),Object(d.h)("div",{class:"d-flex justify-content-between mt-2"},Object(d.h)("div",{class:"flex-fill bg-light rounded-lg p-3 align-middle"},Object(d.h)("div",null,Object(d.h)("small",{class:"text-muted"},Object(d.h)("i",{class:"fas fa-road"})," Total distance")),Object(d.h)("div",{class:"text-center mt-2"},Object(d.h)(O.a,{key:"gauge-reload-page",color:"primary",radius:40,showPercentText:!1,percent:T,showCenterText:!0,centerText:T+"%",centerTextSize:18,centerTextY:"55%"})),Object(d.h)("div",{class:"text-center"},Object(d.h)("small",null,h.a.format(b.totalDistanceOnTrack,1)," / ",h.a.format(n,1)," ",Object(d.h)("span",{class:"text-muted"},"km"))))),Object(d.h)("div",{class:"d-flex justify-content-between mt-2"},b.finishTime<9999999999?Object(d.h)(e,null,b.diffToFirstFinishTime>0?Object(d.h)(e,null,Object(d.h)("div",{class:"flex-fill bg-light rounded-lg p-3 align-middle"},Object(d.h)("div",null,Object(d.h)("small",{class:"text-muted"},Object(d.h)("i",{class:"fas fa-clock"})," Finish time")),Object(d.h)("div",{class:"text-center",style:"font-size: 1.5em;"},h.a.formatDate(h.a.parseInputDate(b.finishTime),{locale:"no-NB",hour12:!1,hour:"2-digit",minute:"2-digit"})))):Object(d.h)(e,null)):Object(d.h)(e,null,Object(d.h)("div",{class:"flex-fill bg-light rounded-lg p-3 align-middle"},Object(d.h)("div",null,Object(d.h)("small",{class:"text-muted"},Object(d.h)("i",{class:"fas fa-arrow-down"})," Behind")),Object(d.h)("div",{class:"text-center"},h.a.format(b.distanceToBehind,1)," ",Object(d.h)("span",{class:"text-muted"},"km"))),Object(d.h)("div",{class:"flex-fill bg-light rounded-lg p-3 align-middle"},Object(d.h)("div",null,Object(d.h)("small",{class:"text-muted"},"Team")),Object(d.h)("div",{class:"text-center"},Object(d.h)("i",{class:"fas fa-dog"}))),Object(d.h)("div",{class:"flex-fill bg-light rounded-lg p-3 align-middle"},Object(d.h)("div",null,Object(d.h)("small",{class:"text-muted"},Object(d.h)("i",{class:"fas fa-arrow-up"})," In front")),Object(d.h)("div",{class:"text-center"},h.a.format(b.distanceToForward,1)," ",Object(d.h)("span",{class:"text-muted"},"km"))),Object(d.h)("div",{class:"flex-fill bg-light rounded-lg p-3 align-middle"},Object(d.h)("div",null,Object(d.h)("small",{class:"text-muted"},Object(d.h)("i",{class:"fas fa-flag-checkered"})," Finish")),Object(d.h)("div",{class:"text-center"},h.a.format(b.distanceToFinish,1)," ",Object(d.h)("span",{class:"text-muted"},"km"))))),y&&y.distanceKm&&Object(d.h)(e,null,Object(d.h)("div",{class:"table-responsive-lg"},Object(d.h)("table",{class:"table table-borderless"},Object(d.h)("tbody",null,Object(d.h)("tr",null,Object(d.h)("td",{style:"width: 5%;"},Object(d.h)("i",{class:"fas fa-dog"})),Object(d.h)("td",{style:"width: 60%"},Object(d.h)(p.c,{id:"races.dogs"},"Dogs")),Object(d.h)("td",{style:"width: 5%;"}," "),Object(d.h)("td",{class:"text-right",style:"width: 30%;"},f.dogs.length)),Object(d.h)("tr",null,Object(d.h)("td",null,Object(d.h)("i",{class:"fas fa-road"})),Object(d.h)("td",null,Object(d.h)(p.c,{id:"races.distance"},"Distance")),Object(d.h)("td",null," "),Object(d.h)("td",{class:"text-right"},Object(d.h)("nobr",null,y.distanceKm?h.a.format(y.distanceKm,1)+" km":"n/a"))),Object(d.h)("tr",null,Object(d.h)("td",null,Object(d.h)("i",{class:"fas fa-mountain"})),Object(d.h)("td",null,Object(d.h)(p.c,{id:"races.ascend"},"Ascending")),Object(d.h)("td",null," "),Object(d.h)("td",{class:"text-right"},Object(d.h)("nobr",null,y.elevation?h.a.format(y.elevation,0)+" m":"n/a"))),Object(d.h)("tr",null,Object(d.h)("td",null,Object(d.h)("i",{class:"fas fa-stopwatch"})),Object(d.h)("td",null,Object(d.h)(p.c,{id:"races.race-time"},"Racetime")),Object(d.h)("td",null,Object(d.h)("i",{class:"fas fa-clock"})),Object(d.h)("td",{class:"text-right"},Object(d.h)("nobr",null,h.a.secToHms(y.duration)||"n/a"))),Object(d.h)("tr",null,Object(d.h)("td",null,Object(d.h)("i",{class:"fas fa-bed"})),Object(d.h)("td",null,Object(d.h)(p.c,{id:"races.rest-time"},"Rest")),Object(d.h)("td",null,Object(d.h)("i",{class:"fas fa-clock"})),Object(d.h)("td",{class:"text-right"},Object(d.h)("nobr",null,h.a.secToHms(y.rest)||"n/a")))))))),"team"===i&&Object(d.h)(e,null,f.public>0?Object(d.h)(e,null,Object(d.h)("h3",null,f.name),Object(d.h)(u.a,{markdown:S.a.replaceImages(f.description,f.images),markdownOpts:S.a.getMarkdownOptions()})):Object(d.h)(e,null,Object(d.h)("div",{class:"text-center text-muted"},Object(d.h)("div",{class:"display-1"},Object(d.h)("i",{class:"fas fa-dog"})),Object(d.h)("h3",null,Object(d.h)(p.c,{id:"teams.no-public-team"},"No public team!")),Object(d.h)(p.c,{id:"teams.no-public-team"},"This team is not publicly visible.")))),"dogs"===i&&Object(d.h)(e,null,f.public>0?Object(d.h)(e,null,f.dogs&&Object(d.h)("div",{class:"w-100 container-fluid"},Object(d.h)("div",{class:"row pt-2"},Object(d.h)(j.a,{stores:this.props.stores,dogs:f.dogs.map(e=>e.id),allDogs:f.dogs,onDogClick:this.onDogClick}))),o&&Object(d.h)(e,null,Object(d.h)("div",{class:"d-flex mb-0 mt-3 position-relative"},Object(d.h)("div",{class:"text-center border rounded-circle imageRounded imageRoundedLarge text-muted pt-2",style:c.image?`background-image: url("${c.image.s3LargeLink}"); background-size: cover;`:""},!c.image&&Object(d.h)("span",{class:"font-weight-lighter",style:"font-size: 35px;"},h.a.ucfirst(c.name,!0))),Object(d.h)("div",{class:"flex-grow-1 pl-3 pr-2",style:`border-right: 4px solid ${s.findHarness(c.harness,"colorNonstop")} !important; line-height: 1.2em;`},Object(d.h)("h5",{class:"mb-1"},c.shortname||c.name," ",c.shortname&&""!==c.shortname&&Object(d.h)(e,null," - ",Object(d.h)("span",{class:"font-weight-lighter"},c.name)),I&&Object(d.h)(e,null,Object(d.h)("i",{class:"fas fa-birthday-cake ml-3"}))),Object(d.h)("div",null,C<7&&Object(d.h)(e,null,Object(d.h)("span",{class:"text-muted mr-2"},Object(d.h)("i",{class:"fas fa-birthday-cake"})," in ",C," days")),c.birth&&Object(d.h)("span",{class:"mr-2"},h.a.age(c.birth,c.deceased)),"female"===c.gender?Object(d.h)("i",{class:"fas fa-venus"}):Object(d.h)("i",{class:"fas fa-mars"})))))):Object(d.h)(e,null,Object(d.h)("div",{class:"text-center text-muted"},Object(d.h)("div",{class:"display-1"},Object(d.h)("i",{class:"fas fa-dog"})),Object(d.h)("h3",null,Object(d.h)(p.c,{id:"teams.no-public-team"},"No public team!")),Object(d.h)(p.c,{id:"teams.no-public-team"},"This team is not publicly visible.")))),m&&Object(d.h)("div",{style:"max-height: 200px; max-width: 70vw; overflow: auto;"},Object(d.h)("button",{class:"btn btn-link btn-block",onClick:this.toggleAdminInfo},"Toggle admin info"),a&&Object(d.h)(e,null,Object(d.h)("small",null,Object(d.h)("xmp",null,"musher: ",JSON.stringify(g,null,4),Object(d.h)("br",null),"user: ",JSON.stringify(v,null,4),Object(d.h)("br",null),"team: ",JSON.stringify(f,null,4),Object(d.h)("br",null),"totals: ",JSON.stringify(y,null,4),Object(d.h)("br",null))))),Object(d.h)("div",{class:"d-flex position-absolute",style:"right: 10px; bottom: 10px;"},D.bib&&Object(d.h)("a",{class:"text-primary mx-2",onClick:()=>r(D),style:"line-height: 1.0em; font-size: 2.3em;"},Object(d.h)("i",{class:"fas fa-angle-left"})),A.bib&&Object(d.h)("a",{class:"text-primary mx-2",onClick:()=>r(A),style:"line-height: 1.0em; font-size: 2.3em;"},Object(d.h)("i",{class:"fas fa-angle-right"})))))}})||l,R=Object(b.a)(r=class extends d.Component{constructor(e){var t;super(e),t=this,this.handleHistoryPointIndex=e=>{const t=parseInt(e.target.value,10);clearTimeout(this.updateTimer.reload),this.setState({historyPointIndex:t,timerRunning:!1},()=>{const{historyPointIndex:e}=this.state,{raceStore:t}=this.props.stores;t.updateWaypointPosition(Math.abs(e))})},this.playHistory=()=>{clearTimeout(this.updateTimer.reload);const{historyPointIndex:e,replaySpeed:t}=this.state,{raceStore:s}=this.props.stores,a=s.getRaceTrackerTimestamp(e+1),o={historyPointIndex:e+1,timerRunning:!1,playingHistory:!0};a&&(o.raceTrackerPointTimestamp=a),this.setState(i({},o),()=>{s.updateWaypointPosition(Math.abs(e+1))}),clearTimeout(this.updateTimer.history),this.updateTimer.history=setTimeout(()=>{this.playHistory()},1e3*t)},this.pauseHistory=()=>{clearTimeout(this.updateTimer.history),this.setState({playingHistory:!1})},this.loadLiveRaceResults=async function(e=t.props,{teamIds:s,focusOnMushers:a,bibs:i,classid:o}){const{raceStore:c,userStore:n}=e.stores,{race:l}=c,{historyPointIndex:r,replayHistory:d,timerRunning:h}=t.state,b=c.getClassById(o)||{},{isAdmin:p}=n;await c.getRaceTrackerData(l.raceTrackerRace,{history:d,bibs:i,classid:o,startDate:b.startDate,endDate:b.endDate,isAdmin:p}),c.getRaceTrackerActiveTeams(s,a,i,r),h&&(clearTimeout(t.updateTimer.reload),t.updateTimer.reload=setTimeout(()=>{console.log("loadLiveRaceResults.reloading...");const e=Math.floor((new Date).getTime()/1e3);t.setState({reloadLastEpoch:e}),t.loadLiveRaceResults(t.props,{teamIds:s,focusOnMushers:a,bibs:i,classid:o})},6e4))},this.loadRaceResults=async function(e=t.props,s,a){const{raceStore:i}=e.stores,{raceid:o}=e,{timerRunning:c}=t.state;await i.loadWorkoutSummary(s,o),i.getWorkoutSummaryActiveTeams(s,a),c&&(clearTimeout(t.updateTimer.reload),t.updateTimer.reload=setTimeout(()=>{const e=Math.floor((new Date).getTime()/1e3);t.setState({reloadLastEpoch:e}),t.loadRaceResults(t.props,s,a)},6e4))},this.loadRace=async function(e=t.props){try{t.setState({isLoading:!0});const{raceStore:s,appState:a}=e.stores,{raceid:i,classid:o}=e;await s.load(i);const{race:c}=s,{focusOnMushers:n}=a,{selectedClassIds:l=[]}=a,r=o||l[0];o&&a.toggleSelectedClassId(o,!0);const d=c.classes.filter(e=>e.id===r).filter(e=>e.contestants&&e.contestants.length>0).map(e=>e.contestants.filter(e=>e.team>0).map(e=>e.team)).flat(),h=c.classes.filter(e=>e.id===r).filter(e=>e.contestants&&e.contestants.length>0).map(e=>e.contestants.filter(e=>e.bib>0).map(e=>e.bib)).flat();d.length>0&&await s.loadTeams(d.join(",")),c.liveRace>0?await t.loadLiveRaceResults(t.props,{teamIds:d,focusOnMushers:n,bibs:h,classid:r}):await t.loadRaceResults(t.props,d,n),s.getAllClassesSortedBy(),t.setState({isLoading:!1})}catch(e){console.log(e)}},this.setLeaderboardMode=e=>{this.setState({leaderboardMode:e.target.parentElement.dataset.mode||e.target.dataset.mode})},this.chooseRaceClass=e=>{this.setState({filterByraceClass:e.target.value})},this.toggleShowLeaderBoard=e=>{const{showLeaderBoard:t}=this.state;this.setState(!0===e?{showLeaderBoard:!1}:{showLeaderBoard:!t})},this.toggleShowNews=e=>{const{showNews:t}=this.state;this.setState(!0===e?{showNews:!1}:{showNews:!t})},this.onMarkerClick=e=>{this.setState({showResults:!1,showDrawer:!0,wpData:e})},this.toggleDrawer=()=>{const{showDrawer:e}=this.state;this.setState({showDrawer:!e})},this.toggleResults=()=>{const{showResults:e}=this.state;this.setState({showResults:!e})},this.onTeamClick=(e,t)=>(e.preventDefault(),e.stopPropagation(),this.setState({showTeam:t}),!1),this.hideTeam=()=>{this.setState({showTeam:null})},this.onUserClick=e=>(e.preventDefault(),e.stopPropagation(),!1),this.onDogClick=(e,t,s)=>(e.preventDefault(),e.stopPropagation(),this.setState({showDog:t,dogs:s}),!1),this.hideDog=()=>{this.setState({showDog:null})},this.setReplaySpeed=e=>{const t=e.target.closest("button").dataset.speed;this.setState({replaySpeed:parseFloat(t)})},this.filterByClass=async function(e){try{const s=e.target.closest("button").dataset.id,{replayHistory:a}=t.state;a&&t.toggleReplayHistory();const{appState:i,raceStore:o}=t.props.stores;o.cleanupMemoryClass(),i.toggleSelectedClassId(s,!0);const{race:c}=o,{focusOnMushers:n}=i,l=c.classes.filter(e=>e.id===s).filter(e=>e.contestants&&e.contestants.length>0).map(e=>e.contestants.filter(e=>e.team>0).map(e=>e.team)).flat(),r=c.classes.filter(e=>e.id===s).filter(e=>e.contestants&&e.contestants.length>0).map(e=>e.contestants.filter(e=>e.bib>0).map(e=>e.bib)).flat();t.setState({allTeamIds:l,bibs:r}),l.length>0&&await o.loadTeams(l.join(",")),c.liveRace>0?await t.loadLiveRaceResults(t.props,{teamIds:l,focusOnMushers:n,bibs:r,classid:s}):await t.loadRaceResults(t.props,l,n)}catch(e){console.log(e)}},this.toggleFocusOnMusher=e=>{try{const t=e.target.parentElement.dataset.musherid||e.target.dataset.musherid,{appState:s,raceStore:a}=this.props.stores;s.toggleFocusOnMusher(t);const{focusOnMushers:i=[],selectedClassIds:o=[]}=s,c=o[0],{race:n}=a,l=n.classes.filter(e=>e.id===c).filter(e=>e.contestants&&e.contestants.length>0).map(e=>e.contestants.filter(e=>e.bib>0).map(e=>e.bib)).flat();n.liveRace>0?a.getRaceTrackerActiveTeams(null,i,l):a.getWorkoutSummaryActiveTeams(null,i,l)}catch(e){console.log(e)}},this.toggleBib=()=>{try{const{bib:e}=this.state,{appState:t,raceStore:s}=this.props.stores,a=s.getMusherByBibId(e);t.toggleFocusOnMusher(a.id)}catch(e){console.log(e)}},this.checkForEnter=e=>{"Enter"===e.key&&this.toggleBib()},this.toggleReplayHistory=()=>{const{replayHistory:e}=this.state;clearTimeout(this.updateTimer.reload),this.setState({showDrawer:!1,historyPointIndex:0,replayHistory:!e,timerRunning:e},(async function(){await t.loadRace();const{historyPointIndex:e}=t.state,{raceStore:s}=t.props.stores;s.updateWaypointPosition(Math.abs(e))}))},this.toggleLines=()=>{const{showLines:e}=this.state;this.setState({showLines:!e})},this.state=i(i({},C),{},{reloadLastEpoch:Math.floor((new Date).getTime()/1e3),historyPointIndex:0,timerRunning:!0,replayHistory:!1,replaySpeed:1}),this.updateTimer={}}componentWillUnmount(){clearTimeout(this.updateTimer.reload),clearTimeout(this.updateTimer.history),clearTimeout(this.updateTimer.tick)}componentDidMount(){this.loadRace();try{const{width:e}=function(){const{innerWidth:e,innerHeight:t}=window;return{width:e,height:t}}();e<800&&(this.toggleShowLeaderBoard(!0),this.toggleShowNews(!0))}catch(e){console.log(e)}}componentWillReceiveProps(e){this.props.classid!==e.classid&&this.loadRace(e)}render(){const{historyPointIndex:t,timerRunning:s,playingHistory:a,replaySpeed:i,raceTrackerPointTimestamp:o,showLines:c,allTeamIds:n}=this.state,{userStore:l,raceStore:r,appState:b}=this.props.stores,{user:p={},teams:m=[],isAdmin:u}=l,{language:O="en"}=p,{raceid:j}=this.props,{focusOnMushers:S=[],infoOnMushers:C=[],selectedClassIds:R=[]}=b,{reloadLastEpoch:P,showDrawer:z,wpData:F={},showResults:U,showTeam:E,showDog:$,replayHistory:L}=this.state,{waypoints:M,geoJSONs:N,zoomToMarkers:B,race:H,maxPoints:V}=r,_=F.bib?r.getMusherByBibId(F.bib):r.getMusherByBibEmail(F.email),K=r.getTeamById(_.team),Y=r.getClassById(R[0])||{};return Object(d.h)(e,null,E&&Object(d.h)(f.a,null,Object(d.h)(x.default,{stores:this.props.stores,teamid:E,marginTop:"0px;",marginBottom:"0px;",back:this.hideTeam,hideTeam:this.hideTeam})),$&&Object(d.h)(f.a,null,Object(d.h)(k.default,{stores:this.props.stores,dogid:$,marginTop:"0px;",marginBottom:"0px;",back:this.hideDog,dogs:K.dogs})),Object(d.h)(y.a,{height:I},Object(d.h)("div",{class:"d-flex justify-content-between align-items-center w-100"},Object(d.h)("div",{class:"d-flex align-items-center"},Object(d.h)("span",{class:"",style:"font-size: 2.3em;"},Object(d.h)("a",{href:`/app-races/${H.id}/results`},Object(d.h)("i",{class:"fas fa-angle-left"}))),Object(d.h)("span",{class:"ml-4 text-primary",style:"font-size: 1.4em;",onClick:this.toggleResults},Object(d.h)("i",{class:"fas fa-list-ol"}))),Object(d.h)("div",null,Object(d.h)("a",{href:`/app-races/${H.id}/results`},Object(d.h)("span",{class:"font-weight-normal text-white",style:"font-size: 1.2em;"},H.title))),H.liveRace>0?Object(d.h)(e,null,Object(d.h)("div",{class:"d-flex align-items-center text-primary",onClick:this.toggleReplayHistory},Object(d.h)("span",{class:""},"Replay"),Object(d.h)("span",{class:"ml-2",style:"font-size: 1.4em;"},Object(d.h)("i",{class:"fas fa-play"})))):Object(d.h)(e,null,Object(d.h)("div",{class:"d-flex align-items-center"}," "))),Object(d.h)("div",{class:"w-100 overflow-hidden"},Object(d.h)("div",{class:"d-flex flex-row flex-nowrap pb-2 px-1",style:"overflow: auto; scroll-snap-type: x mandatory;"},H.classes&&H.classes.sort((e,t)=>e.distance-t.distance).map((t,s)=>Object(d.h)(e,null,Object(d.h)("div",{class:"col px-0 pt-0"},Object(d.h)("button",{type:"button",class:`btn btn-block ${0===s&&"rounded-pill-left"} ${s===H.classes.length-1&&"rounded-pill-right"} rounded-none ${R.indexOf(t.id)>-1?"btn-primary":"btn-outline-primary"} text-nowrap`,style:"text-overflow: ellipsis; overflow: hidden;",onClick:this.filterByClass,"data-id":t.id},t.title))))))),Object(d.h)("div",{class:"container-fluid position-relative p-0 w-100 h-100",style:`margin-top: ${I};`},H.id?Object(d.h)(e,null,Object(d.h)(g.a,{marginTop:I,stores:this.props.stores,raceid:j,waypoints:M,geoJSONs:c?N:null,waypoints2:Y.waypoints,zoomToMarkers:B,fullscreenMap:!0,onMarkerClick:this.onMarkerClick,showHeatmap:H.liveRace<1,allTeamIds:n,showTracks:H.liveRace>=1,selectedClassIds:R,showDistanceMarkers:!1,groupWaypoints:!1,focusOnMushers:S})):Object(d.h)(e,null,Object(d.h)(w.a,{stores:this.props.stores})),s&&Object(d.h)("div",{class:"position-absolute",style:"top: 125px; left: 5px; z-index: 9999; width: 30px; height: 30px;"},Object(d.h)(T,{stores:this.props.stores,classNames:"float-right ml-2",reloadLastEpoch:P})),S&&S.length>0&&Object(d.h)(e,null,Object(d.h)("div",{class:"row mb-2",style:' background-color: #1C1F4C; background-image: url("https://themusher.app/assets/tv-single-background.jpg"); background-size: cover !important; background-position: 0 0; border-radius: 10px; '},Object(d.h)("div",{class:"col-12 text-white",style:"font-size: 1.3em;"},S&&S.map(t=>{const s=r.getMusherById(t);return Object(d.h)(e,null,Object(d.h)("div",null,Object(d.h)("nobr",null,Object(d.h)("span",{class:"mr-2",onClick:this.toggleFocusOnMusher,"data-musherid":s.id},S.indexOf(s.id)>-1?Object(d.h)("i",{class:"fas fa-times text-warning"}):Object(d.h)("i",{class:"far fa-star"})),Object(d.h)("span",{class:"text-right",style:"width: 50px; display: inline-block;"},s.bib)," ",s.flag," ",s.firstname," ",s.lastname,Object(d.h)("br",null))))})))),L&&Object(d.h)(e,null,Object(d.h)(v.a,{stores:this.props.stores,onCloseClick:this.toggleReplayHistory},V>0?Object(d.h)(e,null,Object(d.h)("div",{class:"d-flex justify-content-center mx-3"},a?Object(d.h)(e,null,Object(d.h)("div",{class:"pl-1"},Object(d.h)("button",{class:"btn btn-warning",onClick:this.pauseHistory},Object(d.h)("i",{class:"fas fa-pause"})))):Object(d.h)(e,null,Object(d.h)("div",{class:"pl-1"},Object(d.h)("button",{class:"btn btn-success",onClick:this.playHistory},Object(d.h)("i",{class:"fas fa-play"})))),Object(d.h)("div",{class:"pl-2 pt-2 flex-grow-1"},Object(d.h)("input",{type:"range",class:"custom-range w-100",min:0,max:V,value:t,onInput:this.handleHistoryPointIndex}))),Object(d.h)("div",{class:"d-flex justify-content-center"},Object(d.h)("div",{class:"col px-0 pt-2"},Object(d.h)("button",{type:"button",class:`btn btn-block rounded-pill-left rounded-none ${1===i?"btn-secondary":"btn-outline-secondary"} text-nowrap`,style:"text-overflow: ellipsis; overflow: hidden;",onClick:this.setReplaySpeed,"data-speed":1},"60x")),Object(d.h)("div",{class:"col px-0 pt-2"},Object(d.h)("button",{type:"button",class:`btn btn-block rounded-none ${.5===i?"btn-secondary":"btn-outline-secondary"} text-nowrap`,style:"text-overflow: ellipsis; overflow: hidden;",onClick:this.setReplaySpeed,"data-speed":.5},"120x")),Object(d.h)("div",{class:"col px-0 pt-2"},Object(d.h)("button",{type:"button",class:`btn btn-block rounded-none ${.25===i?"btn-secondary":"btn-outline-secondary"} text-nowrap`,style:"text-overflow: ellipsis; overflow: hidden;",onClick:this.setReplaySpeed,"data-speed":.25},"240x")),Object(d.h)("div",{class:"col px-0 pt-2"},Object(d.h)("button",{type:"button",class:`btn btn-block rounded-pill-right rounded-none ${.12===i?"btn-secondary":"btn-outline-secondary"} text-nowrap`,style:"text-overflow: ellipsis; overflow: hidden;",onClick:this.setReplaySpeed,"data-speed":.12},"480x"))),Object(d.h)("div",{class:"d-flex justify-content-center"},Object(d.h)("div",{class:"flex-grow-1 pt-0 font-weight-bolder text-white text-center",style:"font-size: 1.1em;"},o&&Object(d.h)(e,null,h.a.formatDate(h.a.parseInputDate(o),{locale:"no-NB",hour12:!1,hour:"2-digit",minute:"2-digit"})),u&&Object(d.h)(e,null,"/ ",t)),u&&Object(d.h)(e,null,Object(d.h)("button",{class:"btn btn-danger mt-2 mr-4 rounded-pill-both rounded-none",onClick:this.toggleLines},Object(d.h)("i",{class:"fas fa-wave-square"})," Show lines")))):Object(d.h)(e,null,Object(d.h)("div",{class:"spinner-border text-primary",role:"status"},Object(d.h)("span",{class:"sr-only"},"Loading..."))))),U?Object(d.h)(e,null,Object(d.h)(v.a,{stores:this.props.stores,onCloseClick:this.toggleResults},Object(d.h)(D,{stores:this.props.stores,raceClass:Y,race:H,onMarkerClick:this.onMarkerClick}))):Object(d.h)(e,null,z&&Object(d.h)(e,null,Object(d.h)(v.a,{stores:this.props.stores,onCloseClick:this.toggleDrawer},Object(d.h)(A,{stores:this.props.stores,wpData:F,onMarkerClick:this.onMarkerClick,onTeamClick:this.onTeamClick,onUserClick:this.onUserClick,onDogClick:this.onDogClick}))))))}})||r;t.a=R}).call(this,s("hosL").Fragment)}}]);
//# sourceMappingURL=61.chunk.94c58.esm.js.map