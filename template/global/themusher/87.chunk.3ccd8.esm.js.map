{"version":3,"sources":["webpack:///./routes/public/race/style.css","webpack:///./routes/public/race/header.js","webpack:///./routes/public/race/support.js"],"names":["module","exports","initialState","menu","profile","main","searchText","Navigation","observer","Component","constructor","props","super","toggleDropdown","e","this","state","menuName","target","dataset","name","parentNode","setState","toggleDarkmode","appState","stores","toggleViewmode","mode","reloadApp","window","location","reload","adminLoadAll","async","userStore","getInfo","changeLanguage","lang","value","console","log","user","email","setLanguage","language","search","route","render","darkmode","notifications","filter","read","class","style","href","src","height","type","data-name","onClick","id","className","activeClassName","onInput","selected","MARGIN_TOP","mu","marginTop","MARGIN_BOTTOM","marginBottom","isLoading","submenu","jwtToken","util","getJwtToken","newRaceArticle","newRaceUserImage","PublicRaceDetail","toggleShowNews","showNews","jumpTo","preventDefault","document","getElementById","parentElement","scrollIntoView","behavior","block","inputRef","updateTimer","raceStore","load","query","newsStore","isAdmin","tag","showall","componentDidMount","loadRace","loadNews","componentWillReceiveProps","nextProps","teams","col","offset","newsList","artList","reverse","news","role","images","s3XXLargeLink","active","title","useEffect","markdown","replaceImages","ingress","markdownOpts","getMarkdownOptions","map","art","data-id","idx","body"],"mappings":"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","file":"87.chunk.3ccd8.esm.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"pointerCursor\":\"pointerCursor__1W6mM\"};","import { h, Component } from 'preact';\nimport { Link } from 'preact-router/match';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport linkState from 'linkstate';\nimport { route } from 'preact-router';\nimport { Text, Localizer } from 'preact-i18n';\n\nimport style from './style.css';\n\n\nconst initialState = {\n    menu: {\n\t\tprofile: false,\n\t\tmain: false,\n\t},\n\tsearchText: '',\n};\n\n@observer\nclass Navigation extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            ...initialState,\n        };\n    }\n\n\ttoggleDropdown = (e) => {\n\t\tconst { menu } = this.state;\n\t\tlet menuName = e.target.dataset.name;\n\t\tif (!menuName && e.target.parentNode) {\n\t\t\tmenuName = e.target.parentNode.dataset.name;\n\t\t}\n\t\tif (menuName) {\n\t\t\tmenu[menuName] = !menu[menuName];\n\t\t}\n\t\tthis.setState({ menu });\n\t}\n\n\ttoggleDarkmode = (e) => {\n        const { appState } = this.props.stores;\n\t\tappState.toggleDarkmode();\n\t\tthis.toggleDropdown(e);\n\t}\n\n\ttoggleViewmode = (e) => {\n        const { appState } = this.props.stores;\n\t\tlet mode = e.target.dataset.mode;\n\t\tif (!mode && e.target.parentNode) {\n\t\t\tmode = e.target.parentNode.dataset.mode;\n\t\t}\n\t\tappState.toggleViewmode(mode);\n\t\tthis.toggleDropdown(e);\n\t}\n\n\treloadApp = () => {\n\t\twindow.location.reload(true);\n\t}\n\n\tadminLoadAll = async (e) => {\n        const { userStore } = this.props.stores;\n        await userStore.getInfo(true);\n\t}\n\n\tchangeLanguage = (e) => {\n\t\tconst lang = e.target.value;\n\t\tconsole.log('changeLanguage', lang);\n\t\tconst { appState, userStore } = this.props.stores;\n\t\tconst { user = {} } = userStore;\n\t\tif (user.email) {\n\t\t\tuserStore.setLanguage({ email: user.email, language: lang });\n\t\t}\n\t\tappState.setLanguage(lang);\n\t}\n\n\tsearch = () => {\n\t\tconst { searchText } = this.state;\n\t\troute(`/search/${searchText}`);\n\t}\n\n    render() {\n\t\tconst { menu, searchText } = this.state;\n        const { appState, userStore } = this.props.stores;\n        const { darkmode, viewmode, isCordova } = appState;\n\t\tconst { allUsers, isAdmin, user, notifications = [] } = userStore;\n\t\tconst unreadNotificatins = notifications.filter(e => !e.read);\n\t\tconst unread = unreadNotificatins.length || 0;\n\t\tconst { language = 'en' } = user;\n\n\t\treturn (\n\t\t\t<nav class='navbar navbar-expand-lg navbar-themed fixed-top py-1' style='z-index: 99999;'>\n\t\t\t\t<a class='navbar-brand' href='/race/'>\n\t\t\t\t\t{/* <img src={`./assets/logo-jul-2020-v2-${darkmode ? 'black' : 'white'}.png`} height='30' class='position-absolute' style='top: 8px; left: 6px' /> */}\n\t\t\t\t\t<img src={`./assets/homerun-race-logo-2-${darkmode ? 'white-' : ''}small.png`} height='37' class='position-absolute' style='top: 5px; left: 6px' />\n\t\t\t\t\t<span class='font-weight-normal' style='margin-left: 30px; font-size: 20px;'>Homerun Race</span>\n\t\t\t\t</a>\n\n\t\t\t\t<button class='navbar-toggler' type='button'\n\t\t\t\t\tdata-name='main'\n\t\t\t\t\tonClick={this.toggleDropdown}\n\t\t\t\t>\n\t\t\t\t\t<span class='navbar-toggler-icon' />\n\t\t\t\t</button>\n\n\t\t\t\t<div class={`collapse navbar-collapse ${menu.main ? 'show' : ''}`} id='navbarSupportedContent'>\n\t\t\t\t\t<ul class='navbar-nav mr-auto ml-5'>\n\t\t\t\t\t\t<li class='nav-item'>\n\t\t\t\t\t\t\t<Link className='nav-link' activeClassName={'active'} href='/race'\n\t\t\t\t\t\t\t\tdata-name='main'\n\t\t\t\t\t\t\t\tstyle='font-size: 1.0em !important;'\n\t\t\t\t\t\t\t\tonClick={this.toggleDropdown}\n\t\t\t\t\t\t\t><i class='fas fa-flag-checkered' /> <Text id='header.races'>LÃ¸pene</Text></Link>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t\t<li class='nav-item'>\n\t\t\t\t\t\t\t<Link className='nav-link' activeClassName={'active'} href='/race/support'\n\t\t\t\t\t\t\t\tdata-name='main'\n\t\t\t\t\t\t\t\tstyle='font-size: 1.0em !important;'\n\t\t\t\t\t\t\t\tonClick={this.toggleDropdown}\n\t\t\t\t\t\t\t><i class='far fa-question-circle' /> <Text id='header.support'>Support</Text></Link>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t\t<li class='nav-item'>\n\t\t\t\t\t\t\t<Link className='nav-link' activeClassName={'active'} href='/race/news'\n\t\t\t\t\t\t\t\tdata-name='main'\n\t\t\t\t\t\t\t\tstyle='font-size: 1.0em !important;'\n\t\t\t\t\t\t\t\tonClick={this.toggleDropdown}\n\t\t\t\t\t\t\t><i class='fas fa-quote-right' /> <Text id='header.news'>Nyheter</Text></Link>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t\t{/* <li class='nav-item'>\n\t\t\t\t\t\t\t<Link className='nav-link' activeClassName={'active'} href='/'\n\t\t\t\t\t\t\t\tdata-name='main'\n\t\t\t\t\t\t\t\tonClick={this.toggleDropdown}\n\t\t\t\t\t\t\t><i class='fas fa-dog' /> <Text id='header.backtoapp'>The Musher</Text></Link>\n\t\t\t\t\t\t</li> */}\n\t\t\t\t\t\t{/* <li class='nav-item'>\n\t\t\t\t\t\t\t<Link className='nav-link' activeClassName={'active'} href='/news'\n\t\t\t\t\t\t\t\tdata-name='main'\n\t\t\t\t\t\t\t\tonClick={this.toggleDropdown}\n\t\t\t\t\t\t\t><i class='fas fa-quote-right' /> <Text id='header.news'>Nyheter</Text></Link>\n\t\t\t\t\t\t</li> */}\n\t\t\t\t\t\t{/* <li class='nav-item d-block d-lg-none'>\n\t\t\t\t\t\t\t<Link className='nav-link' activeClassName={'active'} href='/howto'\n\t\t\t\t\t\t\t\tdata-name='main'\n\t\t\t\t\t\t\t\tonClick={this.toggleDropdown}\n\t\t\t\t\t\t\t><i class='fas fa-quote-right' /> <Text id='header.howto'>Hvordan gjÃ¸r man det?</Text></Link>\n\t\t\t\t\t\t</li> */}\n\t\t\t\t\t</ul>\n\n\t\t\t\t\t<ul class='navbar-nav ml-auto '>\n\t\t\t\t\t\t{/* <li class='nav-item mr-2'>\n\t\t\t\t\t\t\t<Link className='nav-link' activeClassName={'active'}\n\t\t\t\t\t\t\t\thref='/users/notifications'\n\t\t\t\t\t\t\t\tdata-name='main'\n\t\t\t\t\t\t\t\tonClick={this.toggleDropdown}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<i class='fas fa-bell mr-1' />\n\t\t\t\t\t\t\t\t{unread > 0 && <>\n\t\t\t\t\t\t\t\t\t<span class='badge badge-pill badge-danger'>{unread > 9 ? '9+' : unread}</span>\n\t\t\t\t\t\t\t\t</>}\n\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t</li> */}\n\t\t\t\t\t\t<li class='nav-item mr-2'>\n\t\t\t\t\t\t\t<div class='form-row align-items-center'>\n\t\t\t\t\t\t\t\t<div class='col-auto my-1' style='width: 80px;'>\n\t\t\t\t\t\t\t\t\t<select class='custom-select'\n\t\t\t\t\t\t\t\t\t\tstyle='background-color: inherit; border: none; padding: 0; height: 1.1em; font-size: 0.9em;'\n\t\t\t\t\t\t\t\t\t\tonInput={this.changeLanguage}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<option value='no' selected={language === 'no'}>ðŸ‡³ðŸ‡´ NO</option>\n\t\t\t\t\t\t\t\t\t\t<option value='en' selected={language === 'en'}>ðŸ‡¬ðŸ‡§ EN</option>\n\t\t\t\t\t\t\t\t\t\t<option value='es' selected={language === 'es'}>ðŸ‡ªðŸ‡¸ ES</option>\n\t\t\t\t\t\t\t\t\t\t<option value='de' selected={language === 'de'}>ðŸ‡©ðŸ‡ª DE</option>\n\t                                    <option value='fr' selected={language === 'fr'}>ðŸ‡«ðŸ‡· FR</option>\n\t                                    <option value='ru' selected={language === 'ru'}>ðŸ‡·ðŸ‡º RU</option>\n\t                                    <option value='se' selected={language === 'se'}>ðŸ‡¸ðŸ‡ª SE</option>\n\t\t\t\t\t\t\t\t\t</select>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t\t<li class='nav-item d-block d-lg-none'>\n\t\t\t\t\t\t\t<Link className='nav-link' activeClassName={'active'}\n\t\t\t\t\t\t\t\tdata-name='main'\n\t\t\t\t\t\t\t\tonClick={this.toggleDarkmode}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<i class={`${darkmode ? 'fas text-warning' : 'far'} fa-moon`} /> <Text id='header.darkmode'>Nattmodus</Text>\n\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t\t<li class='nav-item mr-2 d-none d-lg-block'>\n\t\t\t\t\t\t\t<button class='btn btn-link'\n\t\t\t\t\t\t\t\tdata-name='profile'\n\t\t\t\t\t\t\t\tonClick={this.toggleDarkmode}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<i class={`${darkmode ? 'fas text-warning' : 'far'} fa-moon`} />\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t\t{/* <li class='nav-item ml-auto d-none d-lg-block'>\n\t\t\t\t\t\t\t<form class='form-inline my-2 my-lg-0'>\n\t\t\t\t\t\t\t\t<Localizer>\n\t\t\t\t\t\t\t\t\t<input class='form-control form-control-sm mr-sm-2' type='search' placeholder={<Text id='header.search-placeholder'>SÃ¸k etter det meste...</Text>}\n\t\t\t\t\t\t\t\t\t\tvalue={searchText}\n\t\t\t\t\t\t\t\t\t\tonInput={linkState(this, 'searchText')}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</Localizer>\n\t\t\t\t\t\t\t\t<button class='btn btn-sm btn-outline-success my-2 my-sm-0' type='button'\t\n\t\t\t\t\t\t\t\t\tonClick={this.search}\n\t\t\t\t\t\t\t\t><Text id='header.search'>SÃ¸k</Text></button>\n\t\t\t\t\t\t\t</form>\n\t\t\t\t\t\t</li> */}\n\t\t\t\t\t</ul>\n\n\t\t\t\t    \n\n\t\t\t\t</div>\n\t\t\t</nav>\n\t\t);\n\t}\n}\n\nexport default Navigation;\n","import { h, Component } from 'preact';\nimport { useEffect } from \"preact/hooks\";\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport { Text, Localizer } from 'preact-i18n';\nimport Markdown from 'preact-markdown';\n\nimport Header from './header';\n\nimport mu from '../../../lib/musher-util';\nconst MARGIN_TOP = mu.marginTop(false, false);\nconst MARGIN_BOTTOM = mu.marginBottom();\n\nfunction PageTitle(title) {\n  useEffect(() => {\n    document.title = `Homerun Race: ${title}`;\n  }, [title]);\n  return <h1>{title}</h1>;\n}\n\nconst initialState = {\n\tisLoading: false,\n\temail: '',\n\tsubmenu: 'ads',\n\tjwtToken: util.getJwtToken(),\n\tnewRaceArticle: {},\n\tnewRaceUserImage: {},\n};\n\n@observer\nclass PublicRaceDetail extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            ...initialState,\n        };\n\t\tthis.inputRef = {};\n\t\tthis.updateTimer = {};\n    }\n\n\tasync loadRace(props = this.props) {\n\t\tthis.setState({ isLoading: true });\n\t\tconst { raceStore } = props.stores;\n\t\tconst query = {};\n\t\tawait raceStore.load({ query });\n\t\tthis.setState({ isLoading: false });\n\t}\n\n\tasync loadNews(props = this.props) {\n\t\tthis.setState({ isLoading: true });\n\t\tconst { newsStore, userStore } = props.stores;\n\t\tconst { isAdmin } = userStore;\n\t\tconst query = {\n\t\t\ttag: props.tag,\n\t\t};\n\t\tif (isAdmin) {\n\t\t\tquery.showall = 1;\n\t\t}\n\t\tawait newsStore.load({ query });\n\t\tthis.setState({ isLoading: false });\n\t}\n\n\ttoggleShowNews = () => {\n\t\tconst { showNews } = this.state;\n\t\tthis.setState({\n\t\t\tshowNews: !showNews,\n\t\t});\n\t}\n\n    jumpTo = (e) => {\n        e.preventDefault();\n        const divId = e.target.parentElement.dataset.id || e.target.dataset.id;\n        document.getElementById(divId).scrollIntoView({ behavior: 'smooth', block: 'start' });\n    }\n\n\tcomponentDidMount() {\n\t\tthis.loadRace();\n\t\tthis.loadNews();\n\t}\n\n\tcomponentWillReceiveProps(nextProps) {\n\t\tthis.loadRace(nextProps);\n\t\tthis.loadNews(nextProps);\n\t}\n\n\trender() {\n\t\tconst { appState, userStore, raceStore, newsStore } = this.props.stores;\n\t\tconst { allUsers, isAdmin, user = {}, notifications = [], teams = [] } = userStore;\n\t\tconst { col = 12, offset = 0 } = this.props;\n\t\tconst { language = 'en' } = appState;\n\n        const { newsList } = newsStore;\n        const artList = newsList.reverse();\n\t\tconst news = artList && artList[0] ? artList[0] : null;\n\n\t\treturn (\n\t\t\t<>\n\t\t\t\t<Header stores={this.props.stores} />\n\n\t\t\t\t<div class='container-fluid position-relative' style={`margin-bottom: ${MARGIN_BOTTOM}; margin-top: ${MARGIN_TOP};`}>\n\n                    {!news && <div class='d-flex justify-content-center my-5 py-5'>\n                        <div class='spinner-border text-primary' role='status'>\n                            <span class='sr-only'>Loading...</span>\n                        </div>\n                    </div>}\n\n\t\t\t\t\t{news && <div class='row'>\n                        <div class='col-12' id='newslist'>\n                            <div class='jumbotron-thumb d-flex align-items-center'>\n                                {(news.images && news.images[0]) ? <img src={news.images[0].s3XXLargeLink} class='img-fluid border rounded-lg' style='min-width: 100%' /> : ''}\n                            </div>\n\n                            <div class='jumbotron py-2'>\n                                <h1 class='display-4'>{isAdmin && <i class={`fas fa-eye${news.active ? ' text-success' : '-slash text-danger'} float-right`} />} {PageTitle(news.title)}</h1>\n\n                                <p class='lead'>\n                                    <Markdown markdown={mu.replaceImages(news.ingress, news.images, language)} markdownOpts={mu.getMarkdownOptions()} />\t\t\t\t\t\t\t\t\n                                </p>\n                                <p>\n                                    <ul>\n                                        {artList && artList.map((art) => <li>\n                                            <a href='#' onClick={this.jumpTo} data-id={`news-${art.id}`}>{mu.replaceImages(art.title, art.images, language, false)}</a>\n                                        </li>)}\n                                    </ul>\n                                </p>\n                            </div>\n                        </div>\n\t\t\t\t\t\t<div class={`col-${col} offset-${offset} col-sm-8 col-lg-8 offset-sm-2 offset-lg-2`}>\n\n                            {artList && artList.map((art, idx) => <div class='row' id={`news-${art.id}`}>\n                                {idx > 0 && <div class='col-12 mt-5'>\n                                    <small class='float-right font-weight-light'>\n                                        <a href='#' onClick={this.jumpTo} data-id={`newslist`} class='text-muted'><Text id='race.to-top'>Til toppen</Text> <i class='far fa-arrow-alt-circle-up' /></a>\n                                    </small>\n                                    <h2>{isAdmin && <i class={`fas fa-eye${art.active ? ' text-success' : '-slash text-danger'} float-right`} />} {mu.replaceImages(art.title, art.images, language, false)}</h2>\n                                </div>}\n                                <div class='col-12 pb-5 mb-5 border-bottom'>\n                                    <Markdown markdown={mu.replaceImages(art.body, art.images, language)} markdownOpts={mu.getMarkdownOptions()} />\n                                </div>\n                            </div>)}\n\n    \t\t\t\t\t</div>\n\t\t\t\t\t</div>}\n\n\t\t\t\t</div>\n\t\t\t</>\n\t\t);\n\t}\n}\n\nexport default PublicRaceDetail;\n"],"sourceRoot":""}