(window.webpackJsonp=window.webpackJsonp||[]).push([[86],{"3CQZ":function(t,e,o){"use strict";o.r(e),function(t){function n(t,e){var o=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),o.push.apply(o,n)}return o}function s(t){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?n(Object(o),!0).forEach((function(e){r(t,e,o[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):n(Object(o)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(o,e))}))}return t}function r(t,e,o){return e in t?Object.defineProperty(t,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[e]=o,t}function a(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}function i(t,e){var o=void 0!==t.musher;return(void 0!==e.musher)-o||!0===o&&t.musher.bib-e.musher.bib||0}var l,c,u,d=o("hosL"),h=o("Utv1"),b=o("/eY4"),p=o("OhSV"),f=o("fh8t"),m=o.n(f),g=o("ZOvn"),O=o("ZQlJ"),j=o("q/oJ"),v=o("gWxU"),y=o("Nanz"),w=(o("5OWT"),g.a.marginTop(!0)),x=g.a.marginBottom(),k={isLoading:!1,contentIsNotLoaded:!0,reloadInSec:null,reloadLastEpoch:null,reloadIsActive:!1},T=(Object(b.a)(l=function(e){function o(t){var o;return(o=e.call(this,t)||this).initComponent=function(){var t=Math.floor((new Date).getTime()/1e3);o.setState({reloadIsActive:!0,reloadLastEpoch:t},(function(){return o.tickReloadTimeer()}))},o.state=s({},k),o.updateTimer={},o}a(o,e);var n=o.prototype;return n.tickReloadTimeer=function(){var t=this,e=this.state,o=e.reloadLastEpoch;if(e.reloadIsActive){var n=Math.floor((new Date).getTime()/1e3);this.setState({reloadInSec:60-(n-o)}),clearTimeout(this.updateTimer.tick),this.updateTimer.tick=setTimeout((function(){return t.tickReloadTimeer()}),1e3)}return!1},n.componentDidMount=function(){this.initComponent()},n.componentWillUnmount=function(){clearTimeout(this.updateTimer.tick)},n.render=function(){var e=Math.floor(h.a.normalizeBetween(this.state.reloadInSec,0,60,0,100));return Object(d.h)(t,null,Object(d.h)("div",{class:"progress fixed-top",style:"height: 2px; z-index: 999999;"},Object(d.h)("div",{class:"progress-bar",role:"progressbar",style:"width: "+e+"%;","aria-valuenow":e,"aria-valuemin":"0","aria-valuemax":"100"})))},o}(d.Component)),Object(b.a)(c=function(e){function o(t){var o;return(o=e.call(this,t)||this).toggleAdminInfo=function(t){t.stopPropagation(),o.setState({showAdminInfo:!o.state.showAdminInfo})},o.toggleInfo=function(t){t.stopPropagation(),o.setState({showInfo:!o.state.showInfo})},o.state={},o}return a(o,e),o.prototype.render=function(){var e=this.state,o=e.showAdminInfo,n=e.showInfo,s=this.props,r=s.classid,a=s.bib,i=s.email,l=s.onTeamClick,c=s.onDogClick,u=this.props.stores,b=u.raceStore,f=u.userStore.isAdmin,j=a?b.getMusherByBibId(a):b.getMusherByBibEmail(i),v=b.getTeamById(j.team),y=v.members?v.members.find((function(t){return t.email===j.email})):{},w=b.getClassById(r),x=b.getTotalsByTeamId(j.team),k=g.a.getImage({user:y,team:v,priority:"user"}),T=g.a.displayNameShort(y)||g.a.displayNameShort(j),S=g.a.getRankingColor(j.bib);return Object(d.h)(t,null,Object(d.h)("div",{class:"d-flex position-relative"},Object(d.h)("div",{class:"position-relative text-center border rounded-circle imageRounded imageRoundedMedium",style:k?'background-image: url("'+k+'"); background-size: cover;':""},!k&&Object(d.h)("div",{class:"text-muted",style:"font-size: 25px; padding-top: 5px;"},T),Object(d.h)("div",{class:"rounded-pill-both px-2 text-center position-absolute "+(S?"":"bg-secondary")+" font-weight-bold",style:"bottom: -20px; right: 0; "+(S?"background-color: "+S+";":"")},j.bib&&"n/a"!==j.bib&&Object(d.h)(t,null,j.bib))),Object(d.h)("div",{class:"flex-grow-1 pl-3 text-overflow mb-3",style:"line-height: 1.2em;"},Object(d.h)("h6",{class:"font-weight-light mb-0"},w.title),Object(d.h)("h3",{class:"mb-0"},j.flag," ",j.firstname," ",j.lastname),Object(d.h)("h6",{class:"mb-0"},j.sportsClub))),v.public>0&&Object(d.h)(t,null,n?Object(d.h)(t,null,Object(d.h)("button",{class:"btn btn-link float-right",onClick:this.toggleInfo},Object(d.h)("i",{class:"fas fa-angle-up"})," ",Object(d.h)(p.c,{id:"races.hide-info"},"Hide info"))):Object(d.h)(t,null,Object(d.h)("button",{class:"btn btn-link float-right",onClick:this.toggleInfo},Object(d.h)("i",{class:"fas fa-angle-down"})," ",Object(d.h)(p.c,{id:"races.show-info"},"Show info"))),Object(d.h)("h3",null,v.public?Object(d.h)(t,null,Object(d.h)("a",{href:"/teams/public/"+v.uuidv4,onClick:function(t){return l(t,v.uuidv4)}},v.name)):Object(d.h)(t,null,v.name)),n&&Object(d.h)(t,null,Object(d.h)(m.a,{markdown:g.a.replaceImages(v.description,v.images),markdownOpts:g.a.getMarkdownOptions()})),v.dogs&&Object(d.h)("div",{class:"w-100 container-fluid"},Object(d.h)("div",{class:"row pt-2"},Object(d.h)(O.a,{stores:this.props.stores,dogs:v.dogs.map((function(t){return t.id})),allDogs:v.dogs,onDogClick:c})))),x&&x.distanceKm&&Object(d.h)(t,null,Object(d.h)("div",{class:"table-responsive-lg"},Object(d.h)("table",{class:"table table-borderless"},Object(d.h)("tbody",null,Object(d.h)("tr",null,Object(d.h)("td",{style:"width: 5%;"},Object(d.h)("i",{class:"fas fa-dog"})),Object(d.h)("td",{style:"width: 60%"},Object(d.h)(p.c,{id:"races.dogs"},"Dogs")),Object(d.h)("td",{style:"width: 5%;"}," "),Object(d.h)("td",{class:"text-right",style:"width: 30%;"},v.dogs.length)),Object(d.h)("tr",null,Object(d.h)("td",null,Object(d.h)("i",{class:"fas fa-road"})),Object(d.h)("td",null,Object(d.h)(p.c,{id:"races.distance"},"Distance")),Object(d.h)("td",null," "),Object(d.h)("td",{class:"text-right"},Object(d.h)("nobr",null,x.distanceKm?h.a.format(x.distanceKm,1)+" km":"n/a"))),Object(d.h)("tr",null,Object(d.h)("td",null,Object(d.h)("i",{class:"fas fa-mountain"})),Object(d.h)("td",null,Object(d.h)(p.c,{id:"races.ascend"},"Ascending")),Object(d.h)("td",null," "),Object(d.h)("td",{class:"text-right"},Object(d.h)("nobr",null,x.elevation?h.a.format(x.elevation,0)+" m":"n/a"))),Object(d.h)("tr",null,Object(d.h)("td",null,Object(d.h)("i",{class:"fas fa-stopwatch"})),Object(d.h)("td",null,Object(d.h)(p.c,{id:"races.race-time"},"Racetime")),Object(d.h)("td",null,Object(d.h)("i",{class:"fas fa-clock"})),Object(d.h)("td",{class:"text-right"},Object(d.h)("nobr",null,h.a.secToHms(x.duration)||"n/a"))),Object(d.h)("tr",null,Object(d.h)("td",null,Object(d.h)("i",{class:"fas fa-bed"})),Object(d.h)("td",null,Object(d.h)(p.c,{id:"races.rest-time"},"Rest")),Object(d.h)("td",null,Object(d.h)("i",{class:"fas fa-clock"})),Object(d.h)("td",{class:"text-right"},Object(d.h)("nobr",null,h.a.secToHms(x.rest)||"n/a"))))))),f&&Object(d.h)("div",{style:"max-height: 200px; max-width: 70vw; overflow: auto;"},Object(d.h)("button",{class:"btn btn-link btn-block",onClick:this.toggleAdminInfo},"Toggle admin info"),o&&Object(d.h)(t,null,Object(d.h)("small",null,Object(d.h)("xmp",null,JSON.stringify(j,null,4),JSON.stringify(y,null,4),JSON.stringify(v,null,4),JSON.stringify(x,null,4))))))},o}(d.Component))||c),S=Object(b.a)(u=function(e){function o(t){var o;return(o=e.call(this,t)||this).loadLiveRaceResults=function(t,e,n){return new Promise((function(s,r){var a;return void 0===t&&(t=o.props),a=t.stores.raceStore,Promise.resolve(a.getRaceTrackerData(a.race.raceTrackerRace)).then((function(){try{return a.getRaceTrackerActiveTeams(e,n),s()}catch(t){return r(t)}}),r)}))},o.loadRaceResults=function(t,e,n){return new Promise((function(s,r){var a;return void 0===t&&(t=o.props),a=t.stores.raceStore,Promise.resolve(a.loadWorkoutSummary(e,t.raceid)).then((function(){try{return a.getWorkoutSummaryActiveTeams(e,n),s()}catch(t){return r(t)}}),r)}))},o.loadRace=function(t){return new Promise((function(e,n){var s,r,a,i,l,c,u,d,h,b,p,f;return void 0===t&&(t=o.props),o.setState({isLoading:!0}),r=(s=t.stores).raceStore,a=s.appState,l=(i=t).classid,Promise.resolve(r.load(i.raceid)).then(function(){try{if(c=r.race,u=a.focusOnMushers,h=void 0===(d=a.selectedClassIds)?[]:d,b=l||h[0],l&&a.toggleSelectedClassId(l,!0),(p=c.classes.filter((function(t){return t.id===b})).filter((function(t){return t.contestants&&t.contestants.length>0})).map((function(t){return t.contestants.filter((function(t){return t.team>0})).map((function(t){return t.team}))})).flat()).length>0)return Promise.resolve(r.loadTeams(p.join(","))).then(function(){try{return s.call(this)}catch(t){return n(t)}}.bind(this),n);function s(){function s(){return r.getAllClassesSortedBy(),(f=r.getClassById(b))&&f.raceTrackerResults&&r.getRacetrackerResults(f.raceTrackerResults),clearTimeout(o.updateTimer.reload),o.updateTimer.reload=setTimeout((function(){return new Promise((function(e){var n=Math.floor((new Date).getTime()/1e3);return o.setState({reloadLastEpoch:n}),o.loadRace(t),e()}))}),6e4),o.setState({isLoading:!1}),e()}return c.liveRace>0?Promise.resolve(o.loadLiveRaceResults(o.props,p,u)).then(function(){try{return s.call(this)}catch(t){return n(t)}}.bind(this),n):Promise.resolve(o.loadRaceResults(o.props,p,u)).then(function(){try{return s.call(this)}catch(t){return n(t)}}.bind(this),n)}return s.call(this)}catch(t){return n(t)}}.bind(this),n)}))},o.toggleFocusOnMusher=function(t){var e=o.props.stores,n=e.appState,s=e.raceStore;n.toggleFocusOnMusher(t.target.parentElement.dataset.musherid||t.target.dataset.musherid);var r=n.focusOnMushers;s.race.liveRace>0?s.getRaceTrackerActiveTeams(null,r):s.getWorkoutSummaryActiveTeams(null,r)},o.handleMusherClick=function(t){var e=t.target.closest("tr").dataset.bib;o.setState({showModal:!o.state.showModal,modalBib:e})},o.toggleModal=function(){o.setState({showModal:!o.state.showModal})},o.state=s({},k),o.inputRef={},o.updateTimer={},o}a(o,e);var n=o.prototype;return n.componentWillUnmount=function(){clearTimeout(this.updateTimer.reload),clearTimeout(this.updateTimer.tick)},n.componentDidMount=function(){this.loadRace()},n.componentWillReceiveProps=function(t){this.props.classid!==t.classid&&this.loadRace(t)},n.render=function(){var e=this,o=this.state,n=o.showTeam,s=o.showDog,r=o.showModal,a=o.modalBib,l=o.modalEmail,c=this.props.stores,u=c.raceStore,b=c.appState,p=this.props,f=p.classid,m=p.limit,O=void 0===m?100:m,k=b.focusOnMushers,S=void 0===k?[]:k,C=u.race,I=void 0===C?{}:C,R=u.classes,M=void 0===R?[]:R,B=u.raceTrackerResults,D=new Date(I.endDate);D.setHours(D.getHours()+2);var P=I.classes&&I.classes.find((function(t){return t.id===f}))||{},z=a?u.getMusherByBibId(a):u.getMusherByBibEmail(l),A=u.getTeamById(z.team),L=[];return B&&B.data?L=B.data.map((function(t){var e=u.raceTrackerMapLine(t),o=parseInt(e.Bib,10),n={};return M&&M[P.id].contestants&&(n=M[P.id].contestants.find((function(t){return t.musher.bib===o}))||{}),n})):M[P.id]&&M[P.id].contestants&&(L=M[P.id].contestants.sort(i).slice(0,O).map((function(t){return t}))),Object(d.h)(t,null,n&&Object(d.h)(j.a,null,Object(d.h)(v.default,{stores:this.props.stores,teamid:n,marginTop:"0px;",marginBottom:"0px;",back:this.hideTeam,hideTeam:this.hideTeam})),s&&Object(d.h)(j.a,null,Object(d.h)(y.default,{stores:this.props.stores,dogid:s,marginTop:"0px;",marginBottom:"0px;",back:this.hideDog,dogs:A.dogs})),Object(d.h)("div",{class:"container-fluid",style:"margin-bottom: "+x+"; height: calc(100% - "+x+" - "+w+");"},Object(d.h)("div",{class:"row"},Object(d.h)("div",{class:"col-12 px-0 position-relative",style:"font-size: 1.5em; line-height: 1.0em;"},Object(d.h)("div",{class:"w-100 overflow-hidden"},Object(d.h)("div",{class:"d-flex flex-row flex-nowrap pb-2 px-1",style:"overflow: auto; scroll-snap-type: x mandatory;"},I.classes&&I.classes.sort((function(t,e){return t.distance-e.distance})).map((function(e,o){return Object(d.h)(t,null,Object(d.h)("div",{class:"col px-0 pt-2"},Object(d.h)("a",{type:"button",class:"btn btn-block "+(0===o&&"rounded-pill-left")+" "+(o===I.classes.length-1&&"rounded-pill-right")+" rounded-none "+(e.id===f?"btn-primary":"btn-outline-primary")+" text-nowrap",style:"text-overflow: ellipsis; overflow: hidden;","data-id":e.id,href:"/embed/top10/"+I.id+"/"+e.id},e.title)))})))),Object(d.h)("table",{class:"table table-sm table-borderless rounded-lg mb-0"},Object(d.h)("thead",null,Object(d.h)("tr",null,Object(d.h)("td",{colspan:"2",class:"px-4 py-4 overflow-hidden",style:"background-color: #FB4114; color: #ffffff; border-radius: 10px 0 0 0; font-size: 1.4em;"},Object(d.h)("nobr",null,P.title)),Object(d.h)("td",{class:"px-3 text-center py-4 overflow-hidden",style:"background-color: #FB4114; color: #ffffff; border-radius: 0 10px 0 0 ; font-size: 1.1em;"},"Time"))),Object(d.h)("tbody",{style:' background-color: #1C1F4C; background-image: url("https://themusher.app/assets/tv-single-background.jpg"); background-size: cover !important; background-position: 0 0; '},L&&L.map((function(o,n){var s=o.musher,r=void 0===s?{}:s,a=o.currentTeam,i=o.currentResults,l=void 0===i?{}:i,c=o.normalizedDuration,b=o.isDone,p=o.totalWorkoutTimeUsedSec;u.getTotalsByTeamId((void 0===a?{}:a).id);return Object(d.h)(t,null,Object(d.h)("tr",{style:"border-bottom: 1px solid #7B312F;","data-bib":r.bib,onClick:e.handleMusherClick},Object(d.h)("td",{class:"text-center align-middle ml-0 pl-0",style:"width: 50px; color: #ffffff; font-size: 1.2em; line-height: 1.2em;"},Object(d.h)("div",{class:"d-flex justify-content-start"},Object(d.h)("div",{class:"pl-3 pr-2 w-100 clearfix rounded-pill-right",style:"background-color: "+g.a.getRankingColor(n+1)},r.bib||n+1))),Object(d.h)("td",{class:"px-3 py-3",style:"color: #ffffff; font-size: 1.2em;"},Object(d.h)("div",{class:"text-overflow",style:"line-height: 1.1em;"},Object(d.h)("span",{class:"float-right",onClick:e.toggleFocusOnMusher,"data-musherid":r.id},S.indexOf(r.id)>-1?Object(d.h)("i",{class:"fas fa-star text-warning"}):Object(d.h)("i",{class:"far fa-star"})),Object(d.h)("nobr",null,r.flag," ",r.firstname," ",r.lastname,Object(d.h)("br",null)))),Object(d.h)("td",{class:"text-center align-middle",style:"width: 150px; color: #ffffff; font-size: 1.2em;"},I.nonstop?Object(d.h)(t,null,Object(d.h)("nobr",null,h.a.secToHms(p)||"n/a")):Object(d.h)(t,null,1===b?Object(d.h)(t,null,Object(d.h)("nobr",null,h.a.secToHms(c)||"n/a")):Object(d.h)(t,null,Object(d.h)("nobr",null,h.a.secToHms(l.duration-l.rest)||"n/a"))))))}))),Object(d.h)("tfoot",null,Object(d.h)("tr",null,Object(d.h)("td",{colspan:"3",class:"px-5 py-4 text-center overflow-hidden",style:"background-color: #FB4114; color: #ffffff; border-radius: 0 0 10px 10px; font-size: 1.1em;"},Object(d.h)("nobr",{class:"mr-4"},"QPaws app"),Object(d.h)("img",{src:"https://themusher.app/assets/appstore-download.png",height:"40",class:"ml-5 mr-1"}),Object(d.h)("img",{src:"https://themusher.app/assets/playstore-download.png",height:"40",class:"mx-1"})))))),r&&Object(d.h)(t,null,Object(d.h)("div",{class:"position-absolute",style:" top: 0px; left: 0px; z-index: 9999; width: 100%; height: 100%; background-color: rgba(0,0,0,0.6); ",onClick:this.toggleModal},Object(d.h)("div",{class:"position-absolute rounded rounded-lg pt-3 pb-3 px-2 text-white",style:' top: 50%; left: 50%; transform: translate(-50%, -50%); width: 90%; max-width: 800px; max-height: 600px; overflow: auto; background-color: #1C1F4C; background-image: url("https://themusher.app/assets/tv-single-background.jpg"); background-size: cover !important; background-position: 0 0; box-shadow: rgba(0, 0, 0, 0.35) 0px 5px 15px; '},Object(d.h)("button",{class:"btn btn-primary btn-sm float-right position-absolute",style:"top: 5px; right: 5px;"},Object(d.h)("i",{class:"fas fa-times"})),Object(d.h)(T,{stores:this.props.stores,bib:a,classid:f,onTeamClick:this.onTeamClick,onUserClick:this.onUserClick,onDogClick:this.onDogClick})))))))},o}(d.Component))||u;e.default=S}.call(this,o("hosL").Fragment)},"5OWT":function(t){t.exports={hoverelementonly:"hoverelementonly__4nHll",hoverElement:"hoverElement__rkj2s",hoverelementhide:"hoverelementhide__10QkM"}},ZQlJ:function(t,e,o){"use strict";var n,s=o("hosL"),r=(o("Utv1"),o("/eY4")),a=(o("OhSV"),o("NDEG")),i=Object(r.a)(n=function(t){function e(e){var o;return(o=t.call(this,e)||this).scrollImages=function(t){var e=t.target,n=e.scrollLeft/e.clientWidth,s=Math.round(n),r=Math.abs(s-n);(Number.isInteger(n)||r<.1)&&o.setState({imageIdx:s})},o.sortByName=function(t,e){var n=o.props.allDogs,s=void 0===n?[]:n,r=s.find((function(e){return e.id===t})),a=s.find((function(t){return t.id===e}));return r&&a&&r.name>a.name?1:-1},o.state={imageIdx:0},o}var o,n;return n=t,(o=e).prototype=Object.create(n.prototype),o.prototype.constructor=o,o.__proto__=n,e.prototype.render=function(){var t=this,e=this.props,o=e.dogs,n=e.allDogs,r=void 0===n?[]:n,i=e.size,l=void 0===i?"medium":i,c=e.onDogClick,u=void 0===c?function(){}:c;return Object(s.h)("div",{class:"w-100"},Object(s.h)("div",{class:"d-flex flex-row flex-nowrap no-scrollbar",style:"overflow: auto; scroll-snap-type: x mandatory;",onScroll:this.scrollImages},o&&o.sort(this.sortByName).map((function(e){var n=r.find((function(t){return t.id===e}));return n?Object(s.h)("div",{class:"col clearfix position-relative p-0 mx-2"},Object(s.h)("div",{class:"w-100 h-100 text-center rounded-lg imageContainer d-flex justify-content-center align-items-center",style:"\n                                        flex-wrap: wrap;\n                                        overflow-y: hidden;\n                                    ",onTouchstart:function(t){t.stopPropagation()},onTouchend:function(t){t.stopPropagation()},onTouchmove:function(t){t.stopPropagation()}},Object(s.h)(a.a,{stores:t.props.stores,dog:n,dogs:r.filter((function(t){return o.indexOf(t.id)>-1})).sort((function(t,e){return t.name>e.name?1:-1})),className:"mx-auto",showName:!0,showPosition:!1,size:l,onDogClick:u}))):""}))))},e}(s.Component))||n;e.a=i}}]);
//# sourceMappingURL=86.chunk.5db45.js.map