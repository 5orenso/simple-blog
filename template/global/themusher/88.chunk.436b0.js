(window.webpackJsonp=window.webpackJsonp||[]).push([[88],{"3CQZ":function(t,e,o){"use strict";o.r(e),function(t){function s(t,e){var o=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),o.push.apply(o,s)}return o}function n(t){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?s(Object(o),!0).forEach((function(e){r(t,e,o[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):s(Object(o)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(o,e))}))}return t}function r(t,e,o){return e in t?Object.defineProperty(t,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[e]=o,t}function a(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}function i(t,e){var o=void 0!==t.musher;return(void 0!==e.musher)-o||!0===o&&t.musher.bib-e.musher.bib||0}var l,c,h,d=o("hosL"),u=o("Utv1"),b=o("/eY4"),p=o("OhSV"),f=o("fh8t"),m=o.n(f),g=o("ZOvn"),O=o("ZQlJ"),j=o("q/oJ"),v=o("gWxU"),y=o("Nanz"),w=(o("5OWT"),g.a.marginTop(!0)),k=g.a.marginBottom(),x={isLoading:!1,contentIsNotLoaded:!0,reloadInSec:null,reloadLastEpoch:null,reloadIsActive:!1},T=(Object(b.a)(l=function(e){function o(t){var o;return(o=e.call(this,t)||this).initComponent=function(){var t=Math.floor((new Date).getTime()/1e3);o.setState({reloadIsActive:!0,reloadLastEpoch:t},(function(){return o.tickReloadTimeer()}))},o.state=n({},x),o.updateTimer={},o}a(o,e);var s=o.prototype;return s.tickReloadTimeer=function(){var t=this,e=this.state,o=e.reloadLastEpoch;if(e.reloadIsActive){var s=Math.floor((new Date).getTime()/1e3);this.setState({reloadInSec:60-(s-o)}),clearTimeout(this.updateTimer.tick),this.updateTimer.tick=setTimeout((function(){return t.tickReloadTimeer()}),1e3)}return!1},s.componentDidMount=function(){this.initComponent()},s.componentWillUnmount=function(){clearTimeout(this.updateTimer.tick)},s.render=function(){var e=Math.floor(u.a.normalizeBetween(this.state.reloadInSec,0,60,0,100));return Object(d.h)(t,null,Object(d.h)("div",{class:"progress fixed-top",style:"height: 2px; z-index: 999999;"},Object(d.h)("div",{class:"progress-bar",role:"progressbar",style:"width: "+e+"%;","aria-valuenow":e,"aria-valuemin":"0","aria-valuemax":"100"})))},o}(d.Component)),Object(b.a)(c=function(e){function o(t){var o;return(o=e.call(this,t)||this).toggleAdminInfo=function(t){t.stopPropagation(),o.setState({showAdminInfo:!o.state.showAdminInfo})},o.toggleInfo=function(t){t.stopPropagation(),o.setState({showInfo:!o.state.showInfo})},o.state={},o}return a(o,e),o.prototype.render=function(){var e=this.state,o=e.showAdminInfo,s=e.showInfo,n=this.props,r=n.classid,a=n.bib,i=n.email,l=n.onTeamClick,c=n.onDogClick,h=this.props.stores,b=h.raceStore,f=h.userStore.isAdmin,j=a?b.getMusherByBibId(a):b.getMusherByBibEmail(i),v=b.getTeamById(j.team),y=v.members?v.members.find((function(t){return t.email===j.email})):{},w=b.getClassById(r),k=b.getTotalsByTeamId(j.team),x=g.a.getImage({user:y,team:v,priority:"user"}),T=g.a.displayNameShort(y)||g.a.displayNameShort(j),S=g.a.getRankingColor(j.bib);return Object(d.h)(t,null,Object(d.h)("div",{class:"d-flex position-relative"},Object(d.h)("div",{class:"position-relative text-center border rounded-circle imageRounded imageRoundedMedium",style:x?'background-image: url("'+x+'"); background-size: cover;':""},!x&&Object(d.h)("div",{class:"text-muted",style:"font-size: 25px; padding-top: 5px;"},T),Object(d.h)("div",{class:"rounded-pill-both px-2 text-center position-absolute "+(S?"":"bg-secondary")+" font-weight-bold",style:"bottom: -20px; right: 0; "+(S?"background-color: "+S+";":"")},j.bib&&"n/a"!==j.bib&&Object(d.h)(t,null,j.bib))),Object(d.h)("div",{class:"flex-grow-1 pl-3 text-overflow mb-3",style:"line-height: 1.2em;"},Object(d.h)("h6",{class:"font-weight-light mb-0"},w.title),Object(d.h)("h3",{class:"mb-0"},j.flag," ",j.firstname," ",j.lastname),Object(d.h)("h6",{class:"mb-0"},j.sportsClub))),v.public>0&&Object(d.h)(t,null,s?Object(d.h)(t,null,Object(d.h)("button",{class:"btn btn-link float-right",onClick:this.toggleInfo},Object(d.h)("i",{class:"fas fa-angle-up"})," ",Object(d.h)(p.c,{id:"races.hide-info"},"Hide info"))):Object(d.h)(t,null,Object(d.h)("button",{class:"btn btn-link float-right",onClick:this.toggleInfo},Object(d.h)("i",{class:"fas fa-angle-down"})," ",Object(d.h)(p.c,{id:"races.show-info"},"Show info"))),Object(d.h)("h3",null,v.public?Object(d.h)(t,null,Object(d.h)("a",{href:"/teams/public/"+v.uuidv4,onClick:function(t){return l(t,v.uuidv4)}},v.name)):Object(d.h)(t,null,v.name)),s&&Object(d.h)(t,null,Object(d.h)(m.a,{markdown:g.a.replaceImages(v.description,v.images),markdownOpts:g.a.getMarkdownOptions()})),v.dogs&&Object(d.h)("div",{class:"w-100 container-fluid"},Object(d.h)("div",{class:"row pt-2"},Object(d.h)(O.a,{stores:this.props.stores,dogs:v.dogs.map((function(t){return t.id})),allDogs:v.dogs,onDogClick:c})))),k&&k.distanceKm&&Object(d.h)(t,null,Object(d.h)("div",{class:"table-responsive-lg"},Object(d.h)("table",{class:"table table-borderless"},Object(d.h)("tbody",null,Object(d.h)("tr",null,Object(d.h)("td",{style:"width: 5%;"},Object(d.h)("i",{class:"fas fa-dog"})),Object(d.h)("td",{style:"width: 60%"},Object(d.h)(p.c,{id:"races.dogs"},"Dogs")),Object(d.h)("td",{style:"width: 5%;"}," "),Object(d.h)("td",{class:"text-right",style:"width: 30%;"},v.dogs.length)),Object(d.h)("tr",null,Object(d.h)("td",null,Object(d.h)("i",{class:"fas fa-road"})),Object(d.h)("td",null,Object(d.h)(p.c,{id:"races.distance"},"Distance")),Object(d.h)("td",null," "),Object(d.h)("td",{class:"text-right"},Object(d.h)("nobr",null,k.distanceKm?u.a.format(k.distanceKm,1)+" km":"n/a"))),Object(d.h)("tr",null,Object(d.h)("td",null,Object(d.h)("i",{class:"fas fa-mountain"})),Object(d.h)("td",null,Object(d.h)(p.c,{id:"races.ascend"},"Ascending")),Object(d.h)("td",null," "),Object(d.h)("td",{class:"text-right"},Object(d.h)("nobr",null,k.elevation?u.a.format(k.elevation,0)+" m":"n/a"))),Object(d.h)("tr",null,Object(d.h)("td",null,Object(d.h)("i",{class:"fas fa-stopwatch"})),Object(d.h)("td",null,Object(d.h)(p.c,{id:"races.race-time"},"Racetime")),Object(d.h)("td",null,Object(d.h)("i",{class:"fas fa-clock"})),Object(d.h)("td",{class:"text-right"},Object(d.h)("nobr",null,u.a.secToHms(k.duration)||"n/a"))),Object(d.h)("tr",null,Object(d.h)("td",null,Object(d.h)("i",{class:"fas fa-bed"})),Object(d.h)("td",null,Object(d.h)(p.c,{id:"races.rest-time"},"Rest")),Object(d.h)("td",null,Object(d.h)("i",{class:"fas fa-clock"})),Object(d.h)("td",{class:"text-right"},Object(d.h)("nobr",null,u.a.secToHms(k.rest)||"n/a"))))))),f&&Object(d.h)("div",{style:"max-height: 200px; max-width: 70vw; overflow: auto;"},Object(d.h)("button",{class:"btn btn-link btn-block",onClick:this.toggleAdminInfo},"Toggle admin info"),o&&Object(d.h)(t,null,Object(d.h)("small",null,Object(d.h)("xmp",null,JSON.stringify(j,null,4),JSON.stringify(y,null,4),JSON.stringify(v,null,4),JSON.stringify(k,null,4))))))},o}(d.Component))||c),S=Object(b.a)(h=function(e){function o(t){var o;return(o=e.call(this,t)||this).loadLiveRaceResults=function(t,e,s){return new Promise((function(n,r){var a;return void 0===t&&(t=o.props),a=t.stores.raceStore,Promise.resolve(a.getRaceTrackerData(a.race.raceTrackerRace)).then((function(){try{return a.getRaceTrackerActiveTeams(e,s),n()}catch(t){return r(t)}}),r)}))},o.loadRaceResults=function(t,e,s){return new Promise((function(n,r){var a;return void 0===t&&(t=o.props),a=t.stores.raceStore,Promise.resolve(a.loadWorkoutSummary(e,t.raceid)).then((function(){try{return a.getWorkoutSummaryActiveTeams(e,s),n()}catch(t){return r(t)}}),r)}))},o.loadRace=function(t){return new Promise((function(e,s){var n,r,a,i,l,c,h,d,u,b,p,f;return void 0===t&&(t=o.props),o.setState({isLoading:!0}),r=(n=t.stores).raceStore,a=n.appState,l=(i=t).classid,Promise.resolve(r.load(i.raceid)).then(function(){try{if(c=r.race,h=a.focusOnMushers,u=void 0===(d=a.selectedClassIds)?[]:d,b=l||u[0],l&&a.toggleSelectedClassId(l,!0),(p=c.classes.filter((function(t){return t.id===b})).filter((function(t){return t.contestants&&t.contestants.length>0})).map((function(t){return t.contestants.filter((function(t){return t.team>0})).map((function(t){return t.team}))})).flat()).length>0)return Promise.resolve(r.loadTeams(p.join(","))).then(function(){try{return n.call(this)}catch(t){return s(t)}}.bind(this),s);function n(){function n(){return r.getAllClassesSortedBy(),(f=r.getClassById(b))&&f.raceTrackerResults&&r.getRacetrackerResults(f.raceTrackerResults),clearTimeout(o.updateTimer.reload),o.updateTimer.reload=setTimeout((function(){return new Promise((function(e){var s=Math.floor((new Date).getTime()/1e3);return o.setState({reloadLastEpoch:s}),o.loadRace(t),e()}))}),6e4),o.setState({isLoading:!1}),e()}return c.liveRace>0?Promise.resolve(o.loadLiveRaceResults(o.props,p,h)).then(function(){try{return n.call(this)}catch(t){return s(t)}}.bind(this),s):Promise.resolve(o.loadRaceResults(o.props,p,h)).then(function(){try{return n.call(this)}catch(t){return s(t)}}.bind(this),s)}return n.call(this)}catch(t){return s(t)}}.bind(this),s)}))},o.toggleFocusOnMusher=function(t){var e=o.props.stores,s=e.appState,n=e.raceStore;s.toggleFocusOnMusher(t.target.parentElement.dataset.musherid||t.target.dataset.musherid);var r=s.focusOnMushers;n.race.liveRace>0?n.getRaceTrackerActiveTeams(null,r):n.getWorkoutSummaryActiveTeams(null,r)},o.handleMusherClick=function(t){var e=t.target.closest("tr").dataset.bib;o.setState({showModal:!o.state.showModal,modalBib:e})},o.toggleModal=function(){o.setState({showModal:!o.state.showModal})},o.state=n({},x),o.inputRef={},o.updateTimer={},o}a(o,e);var s=o.prototype;return s.componentWillUnmount=function(){clearTimeout(this.updateTimer.reload),clearTimeout(this.updateTimer.tick)},s.componentDidMount=function(){this.loadRace()},s.componentWillReceiveProps=function(t){this.props.classid!==t.classid&&this.loadRace(t)},s.render=function(){var e=this,o=this.state,s=o.showTeam,n=o.showDog,r=o.showModal,a=o.modalBib,l=o.modalEmail,c=this.props.stores,h=c.raceStore,b=c.appState,p=this.props,f=p.classid,m=p.limit,O=void 0===m?100:m,x=b.focusOnMushers,S=void 0===x?[]:x,C=h.race,R=void 0===C?{}:C,I=h.classes,M=void 0===I?[]:I,B=h.raceTrackerResults,D=new Date(R.endDate);D.setHours(D.getHours()+2);var P=R.classes&&R.classes.find((function(t){return t.id===f}))||{},z=a?h.getMusherByBibId(a):h.getMusherByBibEmail(l),A=h.getTeamById(z.team),L=[];return B&&B.data?L=B.data.map((function(t){var e=h.raceTrackerMapLine(t),o=parseInt(e.Bib,10),s={};return M&&M[P.id].contestants&&(s=M[P.id].contestants.find((function(t){return t.musher.bib===o}))||{}),s})):M[P.id]&&M[P.id].contestants&&(L=M[P.id].contestants.sort(i).slice(0,O).map((function(t){return t}))),Object(d.h)(t,null,s&&Object(d.h)(j.a,null,Object(d.h)(v.default,{stores:this.props.stores,teamid:s,marginTop:"0px;",marginBottom:"0px;",back:this.hideTeam,hideTeam:this.hideTeam})),n&&Object(d.h)(j.a,null,Object(d.h)(y.default,{stores:this.props.stores,dogid:n,marginTop:"0px;",marginBottom:"0px;",back:this.hideDog,dogs:A.dogs})),Object(d.h)("div",{class:"container-fluid",style:"margin-bottom: "+k+"; height: calc(100% - "+k+" - "+w+");"},Object(d.h)("div",{class:"row"},Object(d.h)("div",{class:"col-12 px-0 position-relative",style:"font-size: 1.5em; line-height: 1.0em;"},Object(d.h)("div",{class:"w-100 overflow-hidden"},Object(d.h)("div",{class:"d-flex flex-row flex-nowrap pb-2 px-1",style:"overflow: auto; scroll-snap-type: x mandatory;"},R.classes&&R.classes.sort((function(t,e){return t.distance-e.distance})).map((function(e,o){return Object(d.h)(t,null,Object(d.h)("div",{class:"col px-0 pt-2"},Object(d.h)("a",{type:"button",class:"btn btn-block "+(0===o&&"rounded-pill-left")+" "+(o===R.classes.length-1&&"rounded-pill-right")+" rounded-none "+(e.id===f?"btn-primary":"btn-outline-primary")+" text-nowrap",style:"text-overflow: ellipsis; overflow: hidden;","data-id":e.id,href:"/embed/top10/"+R.id+"/"+e.id},e.title)))})))),Object(d.h)("table",{class:"table table-sm table-borderless rounded-lg mb-0"},Object(d.h)("thead",null,Object(d.h)("tr",null,Object(d.h)("td",{colspan:"2",class:"px-4 py-4 overflow-hidden",style:"background-color: #FB4114; color: #ffffff; border-radius: 10px 0 0 0; font-size: 1.4em;"},Object(d.h)("nobr",null,P.title)),Object(d.h)("td",{class:"px-3 text-center py-4 overflow-hidden",style:"background-color: #FB4114; color: #ffffff; border-radius: 0 10px 0 0 ; font-size: 1.1em;"},"Time"))),Object(d.h)("tbody",{style:' background-color: #1C1F4C; background-image: url("https://themusher.app/assets/tv-single-background.jpg"); background-size: cover !important; background-position: 0 0; '},L&&L.map((function(o,s){var n=o.musher,r=void 0===n?{}:n,a=o.currentTeam,i=o.currentResults,l=void 0===i?{}:i,c=o.normalizedDuration,b=o.isDone,p=o.totalWorkoutTimeUsedSec;h.getTotalsByTeamId((void 0===a?{}:a).id);return Object(d.h)(t,null,Object(d.h)("tr",{style:"border-bottom: 1px solid #7B312F;","data-bib":r.bib,onClick:e.handleMusherClick},Object(d.h)("td",{class:"text-center align-middle ml-0 pl-0",style:"width: 50px; color: #ffffff; font-size: 1.2em; line-height: 1.2em;"},Object(d.h)("div",{class:"d-flex justify-content-start"},Object(d.h)("div",{class:"pl-3 pr-2 w-100 clearfix rounded-pill-right",style:"background-color: "+g.a.getRankingColor(s+1)},r.bib||s+1))),Object(d.h)("td",{class:"px-3 py-3",style:"color: #ffffff; font-size: 1.2em;"},Object(d.h)("div",{class:"text-overflow",style:"line-height: 1.1em;"},Object(d.h)("span",{class:"float-right",onClick:e.toggleFocusOnMusher,"data-musherid":r.id},S.indexOf(r.id)>-1?Object(d.h)("i",{class:"fas fa-star text-warning"}):Object(d.h)("i",{class:"far fa-star"})),Object(d.h)("nobr",null,r.flag," ",r.firstname," ",r.lastname,Object(d.h)("br",null)))),Object(d.h)("td",{class:"text-center align-middle",style:"width: 150px; color: #ffffff; font-size: 1.2em;"},R.nonstop?Object(d.h)(t,null,Object(d.h)("nobr",null,u.a.secToHms(p)||"n/a")):Object(d.h)(t,null,1===b?Object(d.h)(t,null,Object(d.h)("nobr",null,u.a.secToHms(c)||"n/a")):Object(d.h)(t,null,Object(d.h)("nobr",null,u.a.secToHms(l.duration-l.rest)||"n/a"))))))}))),Object(d.h)("tfoot",null,Object(d.h)("tr",null,Object(d.h)("td",{colspan:"3",class:"px-5 py-4 text-center overflow-hidden",style:"background-color: #FB4114; color: #ffffff; border-radius: 0 0 10px 10px; font-size: 1.1em;"},Object(d.h)("nobr",{class:"mr-4"},"QPaws app"),Object(d.h)("img",{src:"https://themusher.app/assets/appstore-download.png",height:"40",class:"ml-5 mr-1"}),Object(d.h)("img",{src:"https://themusher.app/assets/playstore-download.png",height:"40",class:"mx-1"})))))),r&&Object(d.h)(t,null,Object(d.h)("div",{class:"position-absolute",style:" top: 0px; left: 0px; z-index: 9999; width: 100%; height: 100%; background-color: rgba(0,0,0,0.6); ",onClick:this.toggleModal},Object(d.h)("div",{class:"position-absolute rounded rounded-lg pt-3 pb-3 px-2 text-white",style:' top: 50%; left: 50%; transform: translate(-50%, -50%); width: 90%; max-width: 800px; max-height: 600px; overflow: auto; background-color: #1C1F4C; background-image: url("https://themusher.app/assets/tv-single-background.jpg"); background-size: cover !important; background-position: 0 0; box-shadow: rgba(0, 0, 0, 0.35) 0px 5px 15px; '},Object(d.h)("button",{class:"btn btn-primary btn-sm float-right position-absolute",style:"top: 5px; right: 5px;"},Object(d.h)("i",{class:"fas fa-times"})),Object(d.h)(T,{stores:this.props.stores,bib:a,classid:f,onTeamClick:this.onTeamClick,onUserClick:this.onUserClick,onDogClick:this.onDogClick})))))))},o}(d.Component))||h;e.default=S}.call(this,o("hosL").Fragment)},"5OWT":function(t){t.exports={hoverelementonly:"hoverelementonly__4nHll",hoverElement:"hoverElement__rkj2s",hoverelementhide:"hoverelementhide__10QkM"}}}]);
//# sourceMappingURL=88.chunk.436b0.js.map