{"version":3,"sources":["webpack:///./components/util/scrollIntoView.js","webpack:///./components/garmin/index.js","webpack:///./components/workout/index.js","webpack:///./components/modal/index.js","webpack:///./components/dog/scroller.js","webpack:///./components/strava/index.js","webpack:///./routes/workouts/list.js","webpack:///./components/team/teams.js","webpack:///./components/team/fastList.js"],"names":["initialState","ScrollIntoView","observer","Component","constructor","props","super","this","state","container","componentDidMount","horizontal","vertical","behavior","inline","block","scrollIntoView","render","ref","c","Garmin","toggleDate","e","stopPropagation","preventDefault","showDate","setState","ignoreGarminWorkout","async","id","target","parentElement","dataset","garminActivityDetailsStore","stores","ignoreWorkout","loadGarminActivities","importGarminWorkout","asTrack","workoutStore","currentTeam","importTrack","importWorkout","loadWorkouts","load","query","team","toggleDetail","showDetail","hideImported","activities","forceShowDate","userStore","selectedTeam","findTeam","class","length","type","onClick","map","activity","summary","startDate","util","parseInputDate","startTimeInSeconds","style","deviceName","activityType","formatDate","locale","formatDistance","Date","value","distanceInMeters","totalElevationGainInMeters","averageSpeedInMetersPerSecond","secToHms","durationInSeconds","data-id","getWorkoutColor","workout","getWorkoutIcon","MAX_LOADINDEX","mu","getMaxLoadIndex","showAddComment","viewImageIdx","likeWorkout","Workout","workoutId","setTimeout","toggleAddComment","inputRef","focus","viewImage","idx","closest","shareLink","url","title","text","appState","shareUrl","onTeamClick","teamid","showTeam","hideTeam","onUserClick","onDogClick","dogid","dogs","showDog","hideDog","updateTimer","wrapperClasses","wrapperClassesRow","viewmode","hasShareApi","user","allDogs","language","intensity","findIntensity","code","teamName","name","teamNames","push","teams","forEach","likes","comments","hasLikedWorkout","findIndex","gpxInfo","mushers","loadIndex","workoutEquipment","findEquipment","equipment","workoutEquipmentIcon","field","musherImages","slice","musher","u","findPublicUser","images","publicUser","image","s3SmallLink","mapImage","imgs","toJS","batteryUsage","battegryLevelStart","battegryLevelEnd","views","getViews","statistics","marginTop","marginBottom","back","img","temperature","isLocked","isInProgress","role","href","date","hour12","hour","minute","getLoadIndexColor","normalizeBetween","Math","floor","getLoadIndexText","garminId","stravaId","track","dogsLeft","dogsRight","sledWeight","format","indexOf","kcalBurnedTotal","kcalMeatGramsTotal","kcalSalmonGramsTotal","kcalFatGramsTotal","description","markdown","replaceImages","comment","markdownOpts","getMarkdownOptions","distanceKm","elevation","duration","speedAvg","avgGpsMovingSpeed","dblClick","likeRef","data-url","uuidv4","data-title","rel","data-native","inputRefObject","col","offset","compact","object","isTeamAdmin","isAdmin","Modal","touchStart","startY","touches","pageY","touchEnd","undefined","readyToRefresh","touchMove","close","refreshing","y","appContainer","scrollTop","imagexxl","thumb","src","onTouchstart","onTouchend","onTouchmove","download","DogScroller","scrollImages","scrollLeft","clientWidth","imageIdx","nearestInt","round","diff","abs","Number","isInteger","sortByName","a","b","dogA","find","dogB","size","onScroll","sort","dogId","dog","filter","d","className","showName","showPosition","Strava","ignoreStravaWorkout","stravaActivityStore","loadStravaActivities","importStravaWorkout","start_date","distance","total_elevation_gain","average_speed","elapsed_time","MARGIN_TOP","MARGIN_BOTTOM","SUB_MENU_MARGIN_TOP","subMenuMarginTop","isLoading","limit","sessionid","getTime","dataFields","Workouts","append","addData","changeTeam","setLoadMore","unsetLoadMore","loadDogs","dogStore","removeFilterText","filterText","renderContent","obj","setupIntersection","handleIntersection","intersectionObserverCallback","scrollViewTimer","setInterval","postScrollview","getIntersectionObserverHistory","trackStore","getWorkoutSummary","componentWillMount","componentWillUnmount","clearInterval","scrolledDown","darkmode","message","workouts","currentTeamObject","workoutFilter","match","RegExp","workoutsFiltered","tracks","stravaActivities","garminActivityDetails","callback","key","strava","garmin","data","wrapperClassNames","contentClassNames","dataValues","Teams","toggleTeam","unsetTeamIfSelected","setCurrentTeam","isDefined","showAllTeams","highlight","showAll","classNames","FastListLine","containerRef","removeIntersectionObserver","addIntersectionObserver","dataProperties","encodeURI","data-idx","FastList","deleteIntersectionObserver","intersectionObserver","entries","isIntersecting","height","currentHeight","max","childNodes","offsetHeight","scrollHeight","display","minHeight","setupIntersectionObserver","window","IntersectionObserverEntry","prototype","IntersectionObserver","root","rootMargin","threshold","observe","unobserve","isObject","hasOwnProperty","contentClasses"],"mappings":"8dAIA,MAAMA,EAAe,G,IAGfC,EADLC,Y,EAAD,cAC6BC,YACzBC,YAAYC,GACRC,MAAMD,GACNE,KAAKC,M,+VAAL,IACOR,GAEPO,KAAKE,UAAY,KAGrBC,oBACI,MAAM,WAAEC,EAAF,SAAcC,EAAW,IAAOL,KAAKF,MACrCA,EAAQ,CACVQ,SAAU,UAEVF,IACAN,EAAMS,OAASH,GAEfC,IACAP,EAAMU,MAAQH,GAExBL,KAAKE,UAAUO,eAAeX,GAG5BY,SACI,OACI,mBAAKC,IAAKC,GAAKZ,KAAKE,UAAYU,GAAhC,S,EAKGlB,O,qKCzBTmB,EADLlB,Y,EAAD,cACqBC,YAAU,gDAC3BkB,WAAcC,IACVA,EAAEC,kBACFD,EAAEE,iBACF,MAAM,SAAEC,GAAalB,KAAKC,MAC1BD,KAAKmB,SAAS,CAAED,UAAWA,KALJ,KAQ3BE,oBAAsBC,eAAON,GACzBA,EAAEC,kBACF,MAAMM,EAAKP,EAAEQ,OAAOC,cAAcC,QAAQH,IAAMP,EAAEQ,OAAOE,QAAQH,IAC3D,2BAAEI,GAA+B,EAAK5B,MAAM6B,aAClDD,EAA2BE,cAAcN,GACzC,EAAKO,wBAbkB,KAgB3BC,oBAAsBT,eAAON,GACzBA,EAAEC,kBACF,MAAMM,EAAKP,EAAEQ,OAAOC,cAAcC,QAAQH,IAAMP,EAAEQ,OAAOE,QAAQH,IAC3D,QAAES,GAAY,EAAKjC,OACnB,2BAAE4B,EAAF,aAA8BM,GAAiB,EAAKlC,MAAM6B,QAChE,YAAEM,GAAgBD,EACdD,QACML,EAA2BQ,YAAYZ,EAAIW,SAE3CP,EAA2BS,cAAcb,EAAIW,GAEvD,EAAKJ,uBACL,EAAKO,gBA5BkB,KAoC3BA,aAAef,iBACjB,MAAM,aAAEW,GAAiB,EAAKlC,MAAM6B,QAC9B,YAAEM,GAAgBD,QAClBA,EAAaK,KAAK,CAAEC,MAAO,CAAEC,KAAMN,MAvCZ,KA0C3BO,aAAe,KACX,MAAM,WAAEC,GAAa,GAAUzC,KAAKC,MACpCD,KAAKmB,SAAS,CACVsB,YAAaA,KAdrB,6BACF,MAAM,2BAAEf,GAA+B1B,KAAKF,MAAM6B,OAClDD,EAA2BW,KAAK,CAAEC,MAAO,CAAEI,aAAc,KAgBvDvC,oBACFH,KAAK6B,uBAGHnB,SACI,MAAM,SAAEQ,EAAF,WAAYuB,GAAa,GAAUzC,KAAKC,OACxC,WAAE0C,EAAa,GAAIzB,SAAU0B,EAA7B,QAA4Cb,GAAU,GAAU/B,KAAKF,OAC3E,UAAE+C,EAAF,aAAab,GAAiBhC,KAAKF,MAAM6B,QACnC,YAAEM,GAAgBD,GAClB,KAAEO,GAASM,EAEXC,EAAeD,EAAUE,SAASd,GAAeM,EAAKjB,IAE5D,OAAKmB,EAcG,mBACJ,mBAAKO,MAAM,eACP,mBAAKA,MAAM,OACNL,GAAcA,EAAWM,OAAS,GAC/B,mBACID,MAAM,2DAEN,sBAAQE,KAAK,SAASF,MAAM,kCAAkCG,QAASnD,KAAKwC,cACxE,iBAAGQ,MAAM,oBADb,IACkC,YAAC,IAAD,CAAM1B,GAAG,oBAAT,cAElC,sBAAI,YAAC,IAAD,CAAMA,GAAG,iCAAT,kCAAJ,IAAoFqB,EAAWM,QAC9FN,GAAcA,EAAWS,IAAIC,IAC1B,MAAM,QAAEC,EAAU,IAAOD,EACnBE,EAAYC,IAAKC,eAAeH,EAAQI,oBAE9C,OAAQ,mBAqBJ,mBAAKV,MAAM,wCACP,mBAAKA,MAAQ,iDAAiDW,MAAQ,uFAAtE,KAGA,mBAAKX,MAAM,mBAAmBW,MAAM,uBAChC,kBAAIX,MAAM,YAAYW,MAAM,uBAAuBL,EAAQM,YAC1DN,EAAQO,aAAa,uBACtB,qBAAOb,MAAM,cACRO,GAAa,qBAAOJ,QAASnD,KAAKc,YAC9B8B,GAAiB1B,EAAWsC,IAAKM,WAAWP,EAAW,CAAEQ,OAAQ,UAAaP,IAAKQ,eAAeT,EAAW,IAAIU,KAAQ,CAAEF,OAAQ,WAExI,oBAAMf,MAAM,cACR,iBAAGA,MAAM,qBADb,IACmC,YAAC,IAAD,CAAUrB,OAAQ3B,KAAKF,MAAM6B,OAAQuC,MAAOZ,EAAQa,iBAAmB,MACtG,iBAAGnB,MAAM,yBAFb,IAEuC,YAAC,IAAD,CAAWrB,OAAQ3B,KAAKF,MAAM6B,OAAQuC,MAAOZ,EAAQc,6BACxF,iBAAGpB,MAAM,+BAHb,IAG6C,YAAC,IAAD,CAAOrB,OAAQ3B,KAAKF,MAAM6B,OAAQuC,MAA+C,IAAxCZ,EAAQe,gCAC1F,iBAAGrB,MAAM,0BAJb,IAIyCQ,IAAKc,SAAShB,EAAQiB,qBAGnE,uBACA,sBAAQvB,MAAM,mCAAmCG,QAASnD,KAAK8B,oBAAqB0C,UAASnB,EAAS/B,IAClG,iBAAG0B,MAAM,uBADb,IACsCjB,EAAU,YAAC,IAAD,CAAMT,GAAG,uBAAT,mBAAwD,mBAAE,YAAC,IAAD,CAAMA,GAAG,iBAAT,kBAAF,IAAiD,iBAAG0B,MAAM,uBAA1D,IAAmFF,IAE3L,sBAAQE,MAAM,sBAAsBG,QAASnD,KAAKoB,oBAAqBoD,UAASnB,EAAS/B,IACrF,iBAAG0B,MAAM,qBADb,IACmC,YAAC,IAAD,CAAM1B,GAAG,iBAAT,wBAOnD,sBAAQ4B,KAAK,SAASF,MAAM,iCAAiCG,QAASnD,KAAKwC,cACvE,iBAAGQ,MAAM,oBADb,IACkC,YAAC,IAAD,CAAM1B,GAAG,oBAAT,kBAhF9CqB,GAAcA,EAAWM,OAAS,EAC1B,mBACJ,mBAAKD,MAAM,eACP,sBAAQE,KAAK,SAASF,MAAM,iCAAiCG,QAASnD,KAAKwC,cACvE,mBAAKQ,MAAQ,mFAAmFW,MAAQ,0DACxG,YAAC,IAAD,CAAMrC,GAAG,iCAAT,kCAFJ,IAEoFqB,EAAWM,UAKnG,wB,EAiFLpC,Q,uwBCxIf,SAAS4D,EAAgBC,GACxB,OAAQA,EAAQxB,MACf,KAAK,EACJ,MAAO,iBACR,KAAK,EACJ,MAAO,gBACR,KAAK,EACJ,MAAO,iBACR,KAAK,EACJ,MAAO,cACR,QACC,MAAO,kBAIV,SAASyB,EAAeD,GACvB,OAAQA,EAAQxB,MACf,KAAK,EACJ,MAAO,iBACR,KAAK,EACJ,MAAO,wBACR,KAAK,EACJ,MAAO,gBACR,KAAK,EACJ,MAAO,gBACR,QACC,MAAO,iB,uRA5BV,MAAM0B,EAAgBC,IAAGC,kBA0CnBrF,EAAe,CACpBsF,gBAAgB,EACbC,aAAc,GACdC,YAAa,I,IAIXC,EADLvF,Y,EAAD,cACsBC,YAClBC,YAAYC,GAAO,MACfC,MAAMD,GADS,YASnBgB,WAAcC,IACVA,EAAEC,kBACFD,EAAEE,iBACF,MAAM,SAAEC,GAAalB,KAAKC,MAC1BD,KAAKmB,SAAS,CAAED,UAAWA,KAbZ,KAiBtB+D,YAAc5D,iBACb,MAAM,aAAEW,GAAiB,EAAKlC,MAAM6B,QACxB,QAAE+C,GAAY,EAAK5E,MACnBqF,EAAYT,EAAQpD,IAEpB,YAAE2D,GAAgB,EAAKhF,MAC7BgF,EAAYE,IAAa,EACzB,EAAKhE,SAAS,CAAE8D,gBAChBG,WAAW,KACP,MAAM,YAAEH,GAAgB,EAAKhF,aACtBgF,EAAYE,GACnB,EAAKhE,SAAS,CAAE8D,iBACjB,YAEcjD,EAAaiD,YAAY,CAAE3D,GAAI6D,KA/BjC,KAqCtBE,iBAAoBtE,IACnB,MAAMoE,EAAYpE,EAAEQ,OAAOC,cAAcC,QAAQH,IAAMP,EAAEQ,OAAOE,QAAQH,IAClE,eAAEyD,GAAmB/E,KAAKC,MAChCD,KAAKmB,SAAS,CACb4D,gBAAiBA,GACf,KACE/E,KAAKsF,SAASH,IACjBnF,KAAKsF,SAASH,GAAWI,WA5CN,KAiDnBC,UAAazE,IACf,MAAM,GAAEO,EAAF,IAAMmE,GAAQ1E,EAAEQ,OAAOmE,QAAQ,OAAOjE,SAChC,aAAEuD,GAAiBhF,KAAKC,MAC9B+E,EAAa1D,GAAMmE,EACnBzF,KAAKmB,SAAS,CAAE6D,kBArDD,KAwDnBW,UAAa5E,IACT,MAAM,IAAE6E,EAAF,MAAOC,EAAP,KAAcC,GAAS/E,EAAEQ,OAAOmE,QAAQ,UAAUjE,SAClD,SAAEsE,GAAa/F,KAAKF,MAAM6B,OAChCoE,EAASC,SAAS,CAAEJ,MAAKC,QAAOC,UA3DjB,KA+DnBG,YAAc,CAAClF,EAAGmF,KACdnF,EAAEE,iBACFF,EAAEC,kBACFhB,KAAKmB,SAAS,CACVgF,SAAUD,KAEP,GArEQ,KAwEnBE,SAAW,KACPpG,KAAKmB,SAAS,CACVgF,SAAU,QA1EC,KA8EnBE,YAAetF,IACXA,EAAEE,iBACFF,EAAEC,mBACK,GAjFQ,KAoFnBsF,WAAa,CAACvF,EAAGwF,EAAOC,KACpBzF,EAAEE,iBACFF,EAAEC,kBACFhB,KAAKmB,SAAS,CACVsF,QAASF,EACTC,UAEG,GA3FQ,KA8FnBE,QAAU,KACN1G,KAAKmB,SAAS,CACVsF,QAAS,QA9FbzG,KAAKC,MAAL,KACOR,GAEPO,KAAK2G,YAAc,GACzB3G,KAAKsF,SAAW,GA8Fd5E,SACI,MAAM,SACFQ,EADE,eAEF6D,EAFE,aAGFC,EAAe,GAHb,YAIFC,EAJE,KAKFuB,EALE,SAMFL,EANE,QAOFM,GACAzG,KAAKC,OACH,QACFyE,EACAxD,SAAU0B,EAFR,eAGFgE,EAAiB,mDAHf,kBAIFC,EAAoB,OACpB7G,KAAKF,OACT,UAAE+C,EAAF,SAAakD,EAAb,aAAuB/D,GAAiBhC,KAAKF,MAAM6B,QAC7C,SAAEmF,EAAF,YAAYC,GAAgBhB,GAC5B,KAAEiB,EAAMR,KAAMS,GAAYpE,GAC1B,SAAEqE,EAAW,MAASF,EACtBG,EAAYtE,EAAUuE,cAAc,CAAEC,KAAM3C,EAAQyC,UAAWD,cAAe,GAE9E3E,EAAOM,EAAUE,SAAS2B,EAAQnC,MAAM,IAAS,GACjD+E,EAAW/E,EAAKgF,KAEhBC,EAAY,GACdF,GACAE,EAAUC,KAAKH,GAEf5C,EAAQgD,OACRhD,EAAQgD,MAAMC,QAAS5G,IACf8B,EAAUE,SAAShC,IACnByG,EAAUC,KAAK5E,EAAUE,SAAShC,MAK9C,MAAM,MAAE6G,EAAQ,GAAV,SAAcC,EAAW,IAAOnD,EACtCoD,EAAkBpD,EAAQkD,OAASlD,EAAQkD,MAAMG,UAAUhH,GAAKA,EAAEiG,OAASA,EAAK1F,KAAO,GACjF,QAAE0G,EAAU,GAAZ,QAAgBC,EAAU,IAAOvD,GACvC,UAAEwD,EAAY,GAAMF,EACdG,GAAmBtF,EAAUuF,cAAc,CAAEC,UAAW3D,EAAQ2D,UAAWnB,aAC3EoB,GAAuBzF,EAAUuF,cAAc,CAAEC,UAAW3D,EAAQ2D,UAAWE,MAAO,SAEtFC,GAAe,GACjBP,EAAQhF,OAAS,GACjBgF,EAAQQ,MAAM,EAAG,IAAIrF,IAAKsF,IACtB,MAAMC,EAAI3G,EAAa4G,eAAeF,IAAW,GAC7CC,EAAEE,QAAUF,EAAEE,OAAO,IACrBL,GAAaf,KAAKkB,EAAEE,OAAO,MAKvC,MAAMC,GAAa9G,EAAa4G,eAAeX,EAAQ,KAAO,GAC9D,IAAIc,GACAD,IAAcA,GAAWD,QAAUC,GAAWD,OAAO,GACrDE,GAAQD,GAAWD,OAAO,GACnBtG,EAAKwG,OAASxG,EAAKwG,MAAMC,YAChCD,GAAQxG,EAAKwG,MACNxG,EAAKsG,QAAUtG,EAAKsG,OAAO,IAAMtG,EAAKsG,OAAO,GAAGG,YACvDD,GAAQxG,EAAKsG,OAAO,GACbnE,EAAQqE,OAASrE,EAAQqE,MAAMC,cACtCD,GAAQrE,EAAQqE,OAGpB,MAAMF,GAAS,GAOf,GANInE,EAAQuE,UACRJ,GAAOpB,KAAP,OACO/C,EAAQuE,UADf,IAEI/F,KAAM,SAGVwB,EAAQmE,OAAQ,CAChB,MAAMK,EAAOC,YAAKzE,EAAQmE,QAC1BA,GAAOpB,QAAQyB,GAKnB,IAAIE,GACA1E,GAAWA,EAAQsD,SAAWtD,EAAQsD,QAAQqB,qBAC9CD,GAAyF,KAAzE1E,EAAQsD,QAAQqB,mBAAqB3E,EAAQsD,QAAQsB,mBAGzE,MAAMC,GAAQ1E,IAAG2E,SAAS9E,EAAQ+E,YAYlC,OAAQ,mBAEHtD,GAAY,YAAC,IAAD,KACT,YAAC,UAAD,CAAmBxE,OAAQ3B,KAAKF,MAAM6B,OAAQuE,OAAQC,EAAUuD,UAAW,OAAQC,aAAc,OAAQC,KAAM5J,KAAKoG,SAAUA,SAAUpG,KAAKoG,YAGhJK,GAAW,YAAC,IAAD,KACR,YAAC,UAAD,CAAiB9E,OAAQ3B,KAAKF,MAAM6B,OAAQ4E,MAAOE,EAASiD,UAAW,OAAQC,aAAc,OAAQC,KAAM5J,KAAK0G,QAASF,KAAMA,KAGnI,mBAAKxD,MAAM,cACP,mBAAKA,MAAO6D,GAER,mBAAK7D,MAAU4D,EAAF,kCAOT,mBAAK5D,MAAM,eACP,mBACIA,MAAQ,oEAAmEyB,EAAgBC,GAC3Ff,OAAUoF,GAAS,0BAAyBA,GAAMC,yCAA2C,IAArF,mCAEND,IAAS,iBAAG/F,MAAQ,GAAE2B,EAAeD,WAAiByC,EAAUnE,MAAQmE,EAAUnE,MAAQ,eAAgBW,MAAM,qBAEjH6E,IAAgBA,GAAapF,IAAI,CAACyG,EAAKpE,IAAQ,mBAC5C,mBACIzC,MAAM,sFACNW,MAAQ,wEACqBkG,EAAIb,qMAGT,GAANvD,EAAL,sDAKA,IAAxBf,EAAQoF,aAAqB,mBAC1B,oBAAM9G,MAAM,gCACR,YAAC,IAAD,CAAarB,OAAQ3B,KAAKF,MAAM6B,OAAQuC,MAAOQ,EAAQoF,iBAInE,mBAAK9G,MAAM,mBAAmBW,MAAM,uBAChC,oBAAMX,MAAM,eACc,IAArB0B,EAAQqF,UAAkB,iBAAG/G,MAAM,iCACV,IAAzB0B,EAAQsF,cAAsB,mBAAKhH,MAAM,iCAAiCiH,KAAK,WACtD,IAAzBvF,EAAQsF,cAAsB,iBAAGhH,MAAM,2CAE5C,iBAAGA,MAAM,iBAAiBkH,KAAO,aAAYxF,EAAQpD,IACjD,kBAAI0B,MAAM,YAAYW,MAAM,uBACvBe,EAAQ6C,OAGhBC,GAAaA,EAAUvE,OAAS,GAAK,qBAAOD,MAAM,uBAC9CwE,EAAUpE,IAAI,CAACmE,EAAM9B,IAAQ,mBAAGA,EAAM,EAAI,KAAO,GAAI8B,KAE1D,uBACA,qBAAOvE,MAAM,cACR0B,EAAQyF,MAAQ,qBAAOhH,QAASnD,KAAKc,YACjC8B,GAAiB1B,EAAWsC,IAAKM,WAAWY,EAAQyF,KAAM,CAAEpG,OAAQ,QAASqG,QAAQ,EAAOC,KAAM,UAAWC,OAAQ,YAAe9G,IAAKQ,eAAeU,EAAQyF,KAAM,IAAIlG,KAAQ,CAAEF,OAAQ,WAEjM,oBAAMf,MAAQ,eAAcmE,EAAUnE,cAAemE,EAAUI,MAC9DW,EAAY,GAAK,oBAAMlF,MAAQ,aAAY6B,IAAG0F,kBAAkB/G,IAAKgH,iBAAiBtC,EAAW,EAAGtD,EAAe,EAAG,OACnH,iBAAG5B,MAAM,0BACRyH,KAAKC,MAAMlH,IAAKgH,iBAAiBtC,EAAW,EAAGtD,EAAe,EAAG,MAFpD,MAGbC,IAAG8F,iBAAiBnH,IAAKgH,iBAAiBtC,EAAW,EAAGtD,EAAe,EAAG,OAE/E,wBAEJ,yBACI,mBAAK5B,MAAM,cACN0B,EAAQkG,SAAW,GAAK,mBAAK5H,MAAQ,kFAAkFW,MAAQ,0DAC/He,EAAQmG,SAAW,GAAI,mBAAK7H,MAAQ,kFAAkFW,MAAQ,uDAE9He,EAAQ2D,UAAY,GAAK,mBAAE,iBAAGrF,MAAUsF,GAAF,UAAb,IAAgDH,IAIzEzD,EAAQ8B,KAAO,GAAK,mBAAE,iBAAGxD,MAAM,oBAAX,IAAiC0B,EAAQ8B,KAAKvD,QAClEyB,EAAQoG,MAAQ,GAAK,mBAAE,iBAAG9H,MAAQ,0BAAyB0B,EAAQoG,MAAQ,EAAI,UAAY,mBAC3FpG,EAAQqG,SAAW,GAAK,mBAAE,iBAAG/H,MAAQ,0BAAyB0B,EAAQqG,UAAYrG,EAAQsG,UAAY,UAAY,mBAClHtG,EAAQuG,WAAa,GAAK,mBACvB,iBAAGjI,MAAM,uBADc,IACU,YAAC,IAAD,CAAQrB,OAAQ3B,KAAKF,MAAM6B,OAAQuC,MAAOQ,EAAQuG,cAEtF7B,GAAe,GAAK,oBAAMpG,MAAM,mBAAkB,iBAAGA,MAAM,kCAAvC,IAA2EQ,IAAK0H,OAAO9B,GAAc,GAArG,KAA0G,YAAC,IAAD,CAAM9H,GAAG,wBAAT,UAElI,CAAC,OAAQ,YAAY6J,QAAQrE,IAAa,GACvC,oBAAM9D,MAAM,cACR,iBAAGA,MAAM,yBADb,IACwCQ,IAAK0H,OAAOxG,EAAQ0G,iBAD5D,IAC8E,YAAC,IAAD,CAAM9J,GAAG,gBAAT,QAC1E,iBAAG0B,MAAM,+BAFb,IAE6C,YAAC,IAAD,CAAQrB,OAAQ3B,KAAKF,MAAM6B,OAAQuC,MAAOQ,EAAQ2G,mBAAqB,MAChH,iBAAGrI,MAAM,qBAHb,IAGmC,YAAC,IAAD,CAAQrB,OAAQ3B,KAAKF,MAAM6B,OAAQuC,MAAOQ,EAAQ4G,qBAAuB,MACxG,iBAAGtI,MAAM,2BAJb,IAIyC,YAAC,IAAD,CAAQrB,OAAQ3B,KAAKF,MAAM6B,OAAQuC,MAAOQ,EAAQ6G,kBAAoB,UAM/H,mBAAKvI,MAAU4D,EAAF,2BACT,0BACKlC,EAAQ8G,cAGjB,mBAAKxI,MAAU4D,EAAF,sBACT,YAAC,IAAD,CAAU6E,SAAU5G,IAAG6G,cAAchH,EAAQiH,QAASjH,EAAQmE,OAAQ3B,GAAW0E,aAAc/G,IAAGgH,wBAEtG,mBAAK7I,MAAU4D,EAAF,kCACT,mBAAK5D,MAAM,wBACP,mBAAKA,MAAM,YACN0B,EAAQoH,WAAa,GAAK,mBAAK9I,MAAM,SAClC,mBAAKA,MAAM,iBACP,yBAAO,iBAAGA,MAAM,gBAAhB,IAAiC,YAAC,IAAD,CAAM1B,GAAG,6BAAT,cAErC,mBAAK0B,MAAM,kCAAkCW,MAAM,qBAC/C,YAAC,IAAD,CAAUhC,OAAQ3B,KAAKF,MAAM6B,OAAQuC,MAAOQ,EAAQoH,eAG3DpH,EAAQqH,UAAY,GAAK,mBAAK/I,MAAM,SACjC,mBAAKA,MAAM,iBACP,yBAAO,iBAAGA,MAAM,oBAAhB,IAAqC,YAAC,IAAD,CAAM1B,GAAG,2BAAT,gBAEzC,mBAAK0B,MAAM,kCAAkCW,MAAM,qBAC/C,YAAC,IAAD,CAAWhC,OAAQ3B,KAAKF,MAAM6B,OAAQuC,MAAOQ,EAAQqH,cAG5DrH,EAAQsH,SAAW,GAAK,mBAAKhJ,MAAM,SAChC,mBAAKA,MAAM,iBACP,yBAAO,iBAAGA,MAAM,iBAAhB,IAAkC,YAAC,IAAD,CAAM1B,GAAG,6BAAT,cAEtC,mBAAK0B,MAAM,kCAAkCW,MAAM,qBAC9CH,IAAKc,SAASI,EAAQsH,UAAU,KAGxCtH,EAAQuH,SAAW,GAAK,mBAAKjJ,MAAM,SAChC,mBAAKA,MAAM,iBACP,yBAAO,iBAAGA,MAAM,0BAAhB,IAA2C,YAAC,IAAD,CAAM1B,GAAG,8BAAT,eAE/C,mBAAK0B,MAAM,kCAAkCW,MAAM,qBAC1De,EAAQsD,SAAWtD,EAAQsD,QAAQkE,kBAAoB,EAAI,mBAC5C,YAAC,IAAD,CAAOvK,OAAQ3B,KAAKF,MAAM6B,OAAQuC,MAA2C,IAApCQ,EAAQsD,QAAQkE,qBACvD,mBACF,YAAC,IAAD,CAAOvK,OAAQ3B,KAAKF,MAAM6B,OAAQuC,MAAOQ,EAAQuH,iBAQxE,CAAC,OAAQ,WAAY,UAAUd,QAAQrE,IAAa,GACjD,mBAAK9D,MAAQ,GAAE4D,GACX,mBAAK5D,MAAM,6BACP,mBAAKA,MAAM,OACP,YAAC,IAAD,CAAerB,OAAQ3B,KAAKF,MAAM6B,OAAQkH,OAAQA,GAAQvH,GAAIoD,EAAQpD,GAAI6K,SAAUnM,KAAKiF,YAAamH,QAASnH,OAM9H,CAAC,OAAQ,WAAY,UAAUkG,QAAQrE,IAAa,GAAK,mBACrDpC,EAAQ8B,MAAQ9B,EAAQ8B,KAAKvD,OAAS,GAAK,mBAAKD,MAAM,6BACnD,mBAAKA,MAAM,YACP,YAAC,IAAD,CAAarB,OAAQ3B,KAAKF,MAAM6B,OAAQ6E,KAAM9B,EAAQ8B,KAAMS,QAASA,EAASX,WAAYtG,KAAKsG,eAIvG,mBAAKtD,MAAM,QACP,YAAC,IAAD,CACIrB,OAAQ3B,KAAKF,MAAM6B,OACnBiG,MAAOA,EACPC,SAAUA,EACV3E,KAAK,UACL+C,YAAajG,KAAKiG,YAClBI,YAAarG,KAAKqG,gBAM7B,CAAC,OAAQ,WAAY,UAAU8E,QAAQrE,IAAa,GAAK,mBACtD,mBAAK9D,MAAU4D,EAAF,gCACT,mBAAK5D,MAAM,OACP,mBAAKA,MAAM,mBACP,sBAAQE,KAAK,SAASF,MAAQ,0BAAyB8E,EAAkB,UAAY,gCAAgCA,EAAkB,eAAiB,KACpJ3E,QAASnD,KAAKiF,aAGd,iBAAGjC,OAAU8E,EAAkB,mBAAqB,OAAzC,kBAJf,IAIiF,YAAC,IAAD,CAAMxG,GAAG,iBAAT,SAGrF,mBAAK0B,MAAM,mBACP,sBAAQE,KAAK,SAASF,MAAM,oDACxBwB,UAASE,EAAQpD,GACjB6B,QAASnD,KAAKqF,kBAEd,iBAAGrC,MAAM,mBAJb,IAIiC,YAAC,IAAD,CAAM1B,GAAG,wBAAT,eAGpCyF,EAAc,mBACX,mBAAK/D,MAAM,mBACP,sBAAQA,MAAM,kEACVG,QAASnD,KAAK2F,UACd0G,WAAW,uCAAsC3H,EAAQ4H,OACzDC,aAAa,UAAS7H,EAAQ6C,MAE9B,iBAAGvE,MAAM,iBALb,IAK+B,YAAC,IAAD,CAAM1B,GAAG,iBAAT,UAGjC,mBACF,mBAAK0B,MAAM,mBACP,iBAAGA,MAAM,kEACLkH,KAAO,uCAAsCxF,EAAQ4H,OACrD/K,OAAO,SACPiL,IAAI,aACJC,eAAA,GAEA,iBAAGzJ,MAAM,iBANb,IAM+B,YAAC,IAAD,CAAM1B,GAAG,iBAAT,YAO/C,mBAAK0B,MAAU4D,EAAF,cACR7B,GAAkB,YAAC,IAAD,CACfpD,OAAQ3B,KAAKF,MAAM6B,OACnB+C,QAASA,EACTY,SAAU1E,GAAKZ,KAAKsF,SAASZ,EAAQpD,IAAMV,EAC3C8L,eAAgB1M,KAAKsF,SACrBqH,IAAI,KACJC,OAAO,MAEX,YAAC,IAAD,CAAiBjL,OAAQ3B,KAAKF,MAAM6B,OAAQ+C,QAASA,EAASiI,IAAI,KAAKC,OAAO,IAAIC,SAAS,KAG9FtD,GAAQ,GAAK,mBACV,mBAAKvG,MAAM,QACP,YAAC,IAAD,CACIrB,OAAQ3B,KAAKF,MAAM6B,OACnB4H,MAAOA,GACPuD,OAAQpI,EACRxB,KAAK,UACL6J,aAAa,EACbC,SAAS,EACT/G,YAAajG,KAAKiG,YAClBI,YAAarG,KAAKqG,wB,EAavCnB,Q,2HCjhBT+H,EADLtN,Y,EAAD,cACoBC,YAAU,mCAC1BkB,WAAa,KACT,MAAM,SAAEI,GAAalB,KAAKC,MAC1BD,KAAKmB,SAAS,CAAED,UAAWA,KAHL,KAM1BgM,WAAcnM,IACVA,EAAEC,kBACFhB,KAAKmB,SAAS,CACVgM,OAAQpM,EAAEqM,QAAQ,GAAGC,SATH,KAa1BC,SAAYvM,IACRA,EAAEC,kBACFhB,KAAKmB,SAAS,CACVgM,YAAQI,EACRC,gBAAgB,KAjBE,KAqB1BC,UAAa1M,IACTA,EAAEC,kBACF,MAAM,MAAE0M,GAAU1N,KAAKF,OACjB,OAAEqN,EAAF,WAAUQ,GAAe3N,KAAKC,MAE9B2N,EAAI7M,EAAEqM,QAAQ,GAAGC,MACvB,GAAIrN,KAAK6N,aAAc,CACnB,MAAM,UAAEC,GAAc9N,KAAK6N,aACT,IAAdC,GAAmBF,EAAIT,EAJR,KAIoCQ,GACnDD,MAKZhN,SACI,MAAM,SAAEQ,GAAalB,KAAKC,OACpB,MAAE8I,EAAF,SAASgF,EAAT,MAAmBL,EAAnB,MAA0BM,EAA1B,KAAiCzG,EAAjC,MAAuC1B,EAAvC,KAA8CsE,GAASnK,KAAKF,MAClE,OACI,mBAAKkD,MAAM,qCAAqCW,MAAM,gCAClD,sBAAQX,MAAM,qCAAqCG,QAASuK,GAA5D,KAEI,mBAAK1K,MAAM,oBAENgL,GAAS,mBAAKhL,MAAQ,mEAAmEW,MAAOqK,EAAS,0BAAyBA,OAAa,IAAtI,KAGV,mBAAKhL,MAAM,kCAAkCW,MAAM,uBAC9C4D,GAAQ,sBAAQvE,MAAM,QAAQuE,EAAtB,KACR1B,EAAM,uBACP,qBAAO7C,MAAM,cACRmH,GAAQ,qBAAOhH,QAASnD,KAAKc,YACzBI,EAAWsC,IAAKM,WAAWqG,EAAM,CAAEpG,OAAQ,UAAaP,IAAKQ,eAAemG,EAAM,IAAIlG,KAAQ,CAAEF,OAAQ,cAO7H,mBAAKkK,IAAKlF,EACN/F,MAAM,mCACNG,QAASuK,EACTQ,aAAclO,KAAKkN,WACnBiB,WAAYnO,KAAKsN,SACjBc,YAAapO,KAAKyN,UAClB9M,IAAKC,GAAKZ,KAAK6N,aAAejN,IAGlC,iBAAGW,OAAO,SAASiL,IAAI,sBAAsBtC,KAAM6D,GAAYhF,EAAOsF,SAAUN,GAAYhF,GACxF,iBAAG/F,MAAM,oBADb,IACkC,YAAC,IAAD,CAAM1B,GAAG,kBAAT,yB,EAOnC2L,O,wGC1ETqB,EADL3O,Y,EAAD,cAC0BC,YACtBC,YAAYC,GACRC,MAAMD,GADS,KAOnByO,aAAgBxN,IACZ,MAEM,WAAEyN,EAAF,YAA2BC,GAAgB1N,EAAEQ,OAE7CmN,EAAWF,EADCC,EAIZE,EAAalE,KAAKmE,MAAMF,GACxBG,EAAOpE,KAAKqE,IAAIH,EAAaD,IAE/BK,OAAOC,UAAUN,IAAaG,EAAO,KACrC7O,KAAKmB,SAAS,CACVuN,SAAUC,KApBH,KAyBnBM,WAAa,CAACC,EAAGC,KACb,MAAM,QAAElI,EAAU,IAAOjH,KAAKF,MACxBsP,EAAOnI,EAAQoI,KAAKtO,GAAKA,EAAEO,KAAO4N,GAClCI,EAAOrI,EAAQoI,KAAKtO,GAAKA,EAAEO,KAAO6N,GACxC,OAAIC,GAAQE,GACJF,EAAK7H,KAAO+H,EAAK/H,KACV,GAGP,GAhCRvH,KAAKC,MAAQ,CACTyO,SAAU,GAkClBhO,SACI,MACM,KAAE8F,EAAF,QAAQS,EAAU,GAAlB,KAAsBsI,EAAO,SAA7B,WAAuCjJ,EAAa,UAAatG,KAAKF,MAE5E,OACI,mBAAKkD,MAAM,SACP,mBACIA,MAAM,2CACNW,MAAM,iDACN6L,SAAUxP,KAAKuO,cAEd/H,GAAQA,EAAKiJ,KAAKzP,KAAKiP,YAAY7L,IAAKsM,IACrC,MAAMC,EAAM1I,EAAQoI,KAAKtO,GAAKA,EAAEO,KAAOoO,GACvC,OAAKC,EAID,mBAAK3M,MAAM,2CACP,mBACIA,MAAQ,qGACRW,MAAQ,gKAIRuK,aAAenN,IAAQA,EAAEC,mBACzBmN,WAAapN,IAAQA,EAAEC,mBACvBoN,YAAcrN,IAAQA,EAAEC,oBAExB,YAAC,IAAD,CACIW,OAAQ3B,KAAKF,MAAM6B,OACnBgO,IAAKA,EACLnJ,KAAMS,EAAQ2I,OAAOC,GAAKrJ,EAAK2E,QAAQ0E,EAAEvO,KAAO,GAAGmO,KAAK,CAACP,EAAGC,IAAMD,EAAE3H,KAAO4H,EAAE5H,KAAO,GAAK,GACzFuI,UAAU,UACVC,UAAU,EACVC,cAAc,EACdT,KAAMA,EACNjJ,WAAYA,MAtBjB,W,EAmCpBgI,O,mKCnFT2B,EADLtQ,Y,EAAD,cACqBC,YAAU,gDAC3BkB,WAAcC,IACVA,EAAEC,kBACFD,EAAEE,iBACF,MAAM,SAAEC,GAAalB,KAAKC,MAC1BD,KAAKmB,SAAS,CAAED,UAAWA,KALJ,KAQ3BgP,oBAAsB7O,eAAON,GACzBA,EAAEC,kBACF,MAAMM,EAAKP,EAAEQ,OAAOC,cAAcC,QAAQH,IAAMP,EAAEQ,OAAOE,QAAQH,IAC3D,oBAAE6O,GAAwB,EAAKrQ,MAAM6B,aAC3CwO,EAAoBvO,cAAcN,GAClC,EAAK8O,wBAbkB,KAgB3BC,oBAAsBhP,eAAON,GACzBA,EAAEC,kBACF,MAAMM,EAAKP,EAAEQ,OAAOC,cAAcC,QAAQH,IAAMP,EAAEQ,OAAOE,QAAQH,IAC3D,oBAAE6O,EAAF,aAAuBnO,GAAiB,EAAKlC,MAAM6B,QACzD,YAAEM,GAAgBD,QAClBmO,EAAoBhO,cAAcb,EAAIW,GACtC,EAAKmO,uBACL,EAAKhO,gBAvBkB,KA+B3BA,aAAef,iBACjB,MAAM,aAAEW,GAAiB,EAAKlC,MAAM6B,QAC9B,YAAEM,GAAgBD,QAClBA,EAAaK,KAAK,CAAEC,MAAO,CAAEC,KAAMN,MAlCZ,KAqC3BO,aAAe,KACX,MAAM,WAAEC,GAAa,GAAUzC,KAAKC,MACpCD,KAAKmB,SAAS,CACVsB,YAAaA,KAdrB,6BACF,MAAM,oBAAE0N,GAAwBnQ,KAAKF,MAAM6B,OAC3CwO,EAAoB9N,KAAK,CAAEC,MAAO,CAAEI,aAAc,KAgBnDvC,oBACCH,KAAKoQ,uBAGH1P,SACI,MAAM,SAAEQ,EAAF,WAAYuB,GAAa,GAAUzC,KAAKC,OACxC,WAAE0C,EAAYzB,SAAU0B,GAAkB5C,KAAKF,OACrD,UAAE+C,EAAF,aAAab,GAAiBhC,KAAKF,MAAM6B,QACnC,YAAEM,GAAgBD,GAClB,KAAEO,GAASM,EAEXC,EAAeD,EAAUE,SAASd,GAAeM,EAAKjB,IAE3D,OAAKmB,EAcE,mBACJ,mBAAKO,MAAM,eACP,mBAAKA,MAAM,OACNL,GAAcA,EAAWM,OAAS,GAC/B,mBACID,MAAM,2DAEN,sBAAQE,KAAK,SAASF,MAAM,kCAAkCG,QAASnD,KAAKwC,cACxE,iBAAGQ,MAAM,oBADb,IACkC,YAAC,IAAD,CAAM1B,GAAG,oBAAT,cAElC,sBAAI,YAAC,IAAD,CAAMA,GAAG,iCAAT,kCAAJ,IAAoFqB,EAAWM,QAC9FN,GAAcA,EAAWS,IAAIC,IAC1B,MAAM,QAAEC,EAAU,IAAOD,EACPG,IAAKC,eAAeH,EAAQI,oBAE9C,OAAQ,mBAIJ,mBAAKV,MAAM,wCACP,mBAAKA,MAAQ,iDAAiDW,MAAQ,oFAAtE,KAGA,mBAAKX,MAAM,mBAAmBW,MAAM,uBAChC,kBAAIX,MAAM,YAAYW,MAAM,uBAAuBN,EAASkE,MAC3DlE,EAASH,KAAK,uBACf,qBAAOF,MAAM,cACRK,EAASiN,YAAc,qBAAOnN,QAASnD,KAAKc,YACxC8B,GAAiB1B,EAAWsC,IAAKM,WAAWT,EAASiN,WAAY,CAAEvM,OAAQ,UAAaP,IAAKQ,eAAeX,EAASiN,WAAY,IAAIrM,KAAQ,CAAEF,OAAQ,WAE5J,oBAAMf,MAAM,cACR,iBAAGA,MAAM,qBADb,IACmC,YAAC,IAAD,CAAUrB,OAAQ3B,KAAKF,MAAM6B,OAAQuC,MAAOb,EAASkN,SAAW,MAC/F,iBAAGvN,MAAM,yBAFb,IAEuC,YAAC,IAAD,CAAWrB,OAAQ3B,KAAKF,MAAM6B,OAAQuC,MAAOb,EAASmN,uBACzF,iBAAGxN,MAAM,+BAHb,IAG6C,YAAC,IAAD,CAAOrB,OAAQ3B,KAAKF,MAAM6B,OAAQuC,MAAgC,IAAzBb,EAASoN,gBAC3F,iBAAGzN,MAAM,0BAJb,IAIyCQ,IAAKc,SAASjB,EAASqN,gBAGpE,uBACA,sBAAQ1N,MAAM,mCAAmCG,QAASnD,KAAKqQ,oBAAqB7L,UAASnB,EAAS/B,IAClG,iBAAG0B,MAAM,uBADb,IACqC,YAAC,IAAD,CAAM1B,GAAG,iBAAT,kBADrC,IACoF,iBAAG0B,MAAM,uBAD7F,IACsHF,GAEtH,sBAAQE,MAAM,sBAAsBG,QAASnD,KAAKkQ,oBAAqB1L,UAASnB,EAAS/B,IACrF,iBAAG0B,MAAM,qBADb,IACmC,YAAC,IAAD,CAAM1B,GAAG,iBAAT,wBAOnD,sBAAQ4B,KAAK,SAASF,MAAM,iCAAiCG,QAASnD,KAAKwC,cACvE,iBAAGQ,MAAM,oBADb,IACkC,YAAC,IAAD,CAAM1B,GAAG,oBAAT,kBA/D9CqB,GAAcA,EAAWM,OAAS,EAC1B,mBACJ,mBAAKD,MAAM,eACP,sBAAQE,KAAK,SAASF,MAAM,iCAAiCG,QAASnD,KAAKwC,cACvE,mBAAKQ,MAAQ,mFAAmFW,MAAQ,uDACxG,YAAC,IAAD,CAAMrC,GAAG,iCAAT,kCAFJ,IAEoFqB,EAAWM,UAKnG,wB,EA+DLgN,Q,ojBCxIf,MAAMU,EAAa9L,IAAG6E,WAAU,GAC1BkH,EAAgB/L,IAAG8E,eACnBkH,EAAsBhM,IAAGiM,mBASzBrR,EAAe,CACpBsR,WAAW,EACXnE,OAAQ,EACRoE,MAAO,EACPC,WAAW,IAAIhN,MAAOiN,WAGjBC,EAAa,CAAC,KAAM,OAAQ,OAAQ,OAAQ,S,IAG5CC,EADLzR,Y,EAAD,cACuBC,YACnBC,YAAYC,GAAO,MACfC,MAAMD,GADS,YActBsC,aAAef,gBAAO,MAAE2P,EAAF,OAASpE,IAC9B,EAAKzL,SAAS,CAAE4P,WAAW,IAC3B,MAAM,aAAE/O,GAAiB,EAAKlC,MAAM6B,QAC9B,YAAEM,GAAgBD,EAClBqP,EAASzE,EAAS,QAClB5K,EAAaK,KAAK,CACvBC,MAAO,CAAEC,KAAMN,GACf+O,QACApE,SACA0E,QAAS,CAAC,cAAe,gBACvBD,GACH,EAAKlQ,SAAS,CAAE4P,WAAW,KAzBN,KA4BtBQ,WAAa,KACZ,MAAM,MAAEP,GAAUhR,KAAKC,MACjBD,KAAKoC,aAAa,CAAE4O,QAAOpE,OAAQ,KA9BpB,KAiCnB4E,YAAc,KACV,MAAM,aAAExP,GAAiBhC,KAAKF,MAAM6B,OACpCK,EAAawP,YAAY,KACrB,IAAI,MAAER,EAAF,OAASpE,GAAW5M,KAAKC,MAC7B2M,GAAUoE,EACVhR,KAAKmB,SAAS,CAAEyL,WAChB5M,KAAKoC,aAAa,CAAE4O,QAAOpE,cAvChB,KA2CnB6E,cAAgB,KACZ,MAAM,aAAEzP,GAAiBhC,KAAKF,MAAM6B,OACpCK,EAAawP,YAAY,SA7CV,KAgDtBE,SAAWrQ,iBACV,MAAM,SAAEsQ,GAAa,EAAK7R,MAAM6B,QAC1B,YAAEM,GAAgB0P,QAElBA,EAAStP,KAAK,CAAEC,MAAO,CAAEC,KAAMN,GAAeqP,QAAS,CAAC,qBApDzC,KA4EtBM,iBAAmB,KAClB5R,KAAKmB,SAAS,CAAE0Q,WAAY,MA7EP,KAgFnBC,cAAgB,EAAGC,UACf,MAAM,SAAEhM,GAAa/F,KAAKF,MAAM6B,OAIhC,OAAQ,mBACb,YAAC,IAAD,CACCA,OAAQ3B,KAAKF,MAAM6B,OACnB+C,QAASqN,EACT7Q,UAAU,EACV0F,eAAgB,QAChBC,kBAAmB,OA3FA,KAiGnBmL,kBAAoB,KAChBhS,KAAKmB,SAAS,CACV8Q,mBAAoBpN,IAAGqN,+BAE3B,MAAM,aAAElQ,GAAiBhC,KAAKF,MAAM6B,OACpC3B,KAAKmS,gBAAkBC,YAAY,IAAMpQ,EAAaqQ,eAAexN,IAAGyN,kCAAmC,MApG3GtS,KAAKC,M,+VAAL,IACOR,GAoDd,mBACC,MAAM,WAAE8S,GAAevS,KAAKF,MAAM6B,aAC5B4Q,EAAWlQ,OAGlB,2BACC,MAAM,UAAEQ,EAAF,aAAab,GAAiBhC,KAAKF,MAAM6B,QACzC,YAAEM,GAAgBD,QACZa,EAAU2P,kBAAkB,CAAEjQ,KAAMN,IAGjD,6BACC,MAAM,oBAAEkO,GAAwBnQ,KAAKF,MAAM6B,OAC3CwO,EAAoB9N,KAAK,CAAEC,MAAO,CAAEI,aAAc,KAGnD,6BACC,MAAM,2BAAEhB,GAA+B1B,KAAKF,MAAM6B,OAClDD,EAA2BW,KAAK,CAAEC,MAAO,CAAEI,aAAc,KAgC1D+P,qBACOzS,KAAKgS,oBAGZU,uBACO,MAAM,aAAE1Q,GAAkEhC,KAAKF,MAAM6B,OACrFK,EAAaqQ,eAAexN,IAAGyN,kCAC/BK,cAAc3S,KAAKmS,iBACnBnS,KAAKyR,gBAMTtR,oBACF,MAAM,MAAE6Q,GAAUhR,KAAKC,MACjBD,KAAKoC,aAAa,CAAE4O,QAAOpE,OAAQ,IACzC5M,KAAK0R,WAEL1R,KAAKoQ,uBACLpQ,KAAK6B,uBACL7B,KAAKwR,cAGN9Q,SACO,MAAM,aAAEkS,GAAiB5S,KAAKF,OAC9B,UAAEiR,EAAF,WAAac,EAAb,mBAAyBI,EAAzB,UAA6ChB,GAAcjR,KAAKC,OAChE,WAAEsS,EAAF,aAAcvQ,EAAd,SAA4B2P,EAA5B,SAAsC5L,EAAtC,oBAAgDoK,EAAhD,2BAAqEzO,EAArE,UAAiGmB,GAAc7C,KAAKF,MAAM6B,QAC1H,SAAEkR,GAAa9M,GACf,QAAE+M,GAAY9S,KAAKF,OACnB,SAAEiT,EAAF,YAAY9Q,GAAgBD,EAC5BgR,EAAoBnQ,EAAUE,SAASd,GAAa,GAE1D,IAAIgR,EAAgB,KAAM,EACtBpB,IACHoB,EAAiBlS,GAAMA,EAAEwG,KAAK2L,MAAM,IAAIC,OAAOtB,EAAY,OAE5D,MAAMuB,EAAmBL,EAASnD,OAAOqD,IAEnC,OAAEI,GAAWd,GACb,KAAE/L,GAASmL,GACX,KAAE3K,GAASnE,GACX,iBAAEyQ,EAAmB,IAAOnD,GAC5B,sBAAEoD,EAAwB,IAAO7R,EACvC,OACC,mBAAKsB,MAAM,kBAAkBW,MAAQ,kBAAiBiN,kBAA8BD,MACnF,mBAAK3N,MAAM,qBAAqBW,MAAQ,eAAciP,EAAe,EAAI,EAAI/B,wBAA0CgC,EAAW,UAAY,gDAC7I,mBAAK7P,MAAM,8BACV,iBAAGkH,KAAK,aAAalH,MAAM,iCAAgC,wBAAM,iBAAGA,MAAM,sBAAf,IAAsC,YAAC,IAAD,CAAM1B,GAAG,2BAAT,eAElG,mBAAK0B,MAAM,2DACV,iBAAGkH,KAAK,iBAAiBlH,MAAM,+BAA8B,wBAAM,iBAAGA,MAAM,gBAAf,IAAgC,YAAC,IAAD,CAAM1B,GAAG,sBAAT,YAE9F,mBAAK0B,MAAM,8BACV,iBAAGkH,KAAK,iBAAiBlH,MAAM,iCAAgC,wBAAM,iBAAGA,MAAM,wBAAf,IAAwC,YAAC,IAAD,CAAM1B,GAAG,sBAAT,YAIxGwR,GACA,mBAAK9P,MAAM,2BAA2BiH,KAAK,SAC1C,iBAAGjH,MAAM,iBADV,IAC6B8P,GAI9B,mBAAK9P,MAAM,OACV,mBAAKA,MAAM,2EACV,YAAC,IAAD,CAAOrB,OAAQ3B,KAAKF,MAAM6B,OAAQ6R,SAAUxT,KAAKuR,WAAYkC,IAAM,SAAQxR,KAE5E,mBAAKe,MAAM,uEACV,iBAAGA,MAAM,qCACRkH,KAAK,sBAEL,iBAAGlH,MAAM,gBAHV,IAG2B,YAAC,IAAD,CAAM1B,GAAG,6BAAT,0BAI5B,mBAAK0B,MAAM,kEACV,mBAAKA,MAAM,YACTgE,GAAQA,EAAK0M,QAAU,mBACvB,YAAC,IAAD,CAAQ/R,OAAQ3B,KAAKF,MAAM6B,OAAQgB,WAAY2Q,EAAkBG,IAAM,UAASxR,KAAeqR,EAAiBrQ,YAEhH+D,GAAQA,EAAK2M,QAAU,mBACvB,YAAC,IAAD,CAAQhS,OAAQ3B,KAAKF,MAAM6B,OAAQgB,WAAY4Q,EAAuBE,IAAM,UAASxR,KAAesR,EAAsBtQ,cAK7H,mBAAKD,MAAM,UAsBV,mBAAKA,MAAM,kEACV,sBAEEgQ,GAAqBA,EAAkBzL,MAAQ,uBAC/C,qBAAOvE,MAAM,uBAAb,IAAoC,YAAC,IAAD,CAAM1B,GAAG,6BAAT,eAApC,KAA8F0R,EAAkBzL,KAAhH,SAKDwJ,GAAagC,GAAgC,IAApBA,EAAS9P,QACnC,mBAAKD,MAAM,wEACTwD,GAAwB,IAAhBA,EAAKvD,QACb,mBAAKD,MAAM,kDACV,mBAAKA,MAAM,aACV,iBAAGA,MAAM,gBAEV,sBACC,YAAC,IAAD,CAAM1B,GAAG,oBAAT,+BAED,YAAC,IAAD,CAAMA,GAAG,wBAAT,qEAAwG,uBACxG,iBAAG0B,MAAM,oBAAoBkH,KAAK,kBACjC,iBAAGlH,MAAM,eADV,IAC0B,YAAC,IAAD,CAAM1B,GAAG,oBAAT,mBAK3B+R,GAA4B,IAAlBA,EAAOpQ,QACjB,mBAAKD,MAAM,kDACV,mBAAKA,MAAM,aACV,iBAAGA,MAAM,uBAEV,sBACC,YAAC,IAAD,CAAM1B,GAAG,sBAAT,+BAED,YAAC,IAAD,CAAMA,GAAG,4BAAT,0HAAiK,uBACjK,YAAC,IAAD,CAAMA,GAAG,4BAAT,0FAAiI,uBAEjI,iBAAG0B,MAAM,oBAAoBkH,KAAK,oBACjC,iBAAGlH,MAAM,sBADV,IACiC,YAAC,IAAD,CAAM1B,GAAG,sBAAT,oBAKnC,mBAAK0B,MAAM,oBACV,mBAAKA,MAAM,aACV,iBAAGA,MAAM,oBAEV,sBACC,YAAC,IAAD,CAAM1B,GAAG,wBAAT,6CAGF,iBAAG0B,MAAM,eACR,qBACC,YAAC,IAAD,CAAM1B,GAAG,0BAAT,0FAED,qBACC,YAAC,IAAD,CAAMA,GAAG,0BAAT,6GAGF,iBAAG0B,MAAM,eACR,YAAC,IAAD,CAAM1B,GAAG,0BAAT,kEAED,YAAC,IAAD,CAAMA,GAAG,8BAAT,yBApDD,IAqDC,sBACC,sBAAI,YAAC,IAAD,CAAMA,GAAG,gCAAT,8DAKP,YAAC,IAAD,CACCsS,KAAMR,EACNS,kBAAmB,WACnBC,kBAAoB,sGAAqGjB,EAAW,QAAU,oBAC9If,cAAe9R,KAAK8R,cACpBX,WAAYA,EACZ4C,WAAY,CAAE7Q,KAAM,MACpB+O,mBAAoBA,EACpBhB,UAAWA,W,EAuBHG,a,kJC/UT4C,EADLrU,Y,EAAD,cACoBC,YAAU,mCAC1BqU,WAAc1R,IAChB,MAAM,SAAEiR,EAAF,oBAAYU,GAAsB,GAASlU,KAAKF,OAC1C,SAAE6R,EAAF,aAAY3P,GAAiBhC,KAAKF,MAAM6B,QAC9C,YAAEM,GAAgB0P,EACpBuC,GAAuB3R,IAASN,GACnC0P,EAASwC,oBAAe5G,GACxBvL,EAAamS,oBAAe5G,KAE5BoE,EAASwC,eAAe5R,GACxBP,EAAamS,eAAe5R,IAEzBiB,IAAK4Q,UAAUZ,IAClBA,KAb2B,KAiB1Ba,aAAe,KACjB,MAAM,SAAEb,GAAaxT,KAAKF,OACd,SAAE6R,EAAF,aAAY3P,GAAiBhC,KAAKF,MAAM6B,OACpDgQ,EAASwC,oBAAe5G,GACxBvL,EAAamS,oBAAe5G,GACxB/J,IAAK4Q,UAAUZ,IAClBA,KAUC9S,SACI,MAAM,UAAEmC,EAAF,SAAa8O,GAAa3R,KAAKF,MAAM6B,QACrC,MAAE+F,GAAU7E,GAClB,YAAEZ,GAAgB0P,GAClB,UAAE2C,EAAF,QAAaC,GAAU,GAASvU,KAAKF,MACrC,OACL,mBAAKkD,MAAM,YACV,mBAAKA,MAAM,yBACV,mBACCA,MAAM,qDACNW,MAAM,kDAGL+D,GAASA,EAAMtE,IAAI,CAACb,EAAMkD,KAC1B,IAAI+O,EAQJ,OAPqB,IAAjB9M,EAAMzE,OACTuR,EAAa,oBACK,IAAR/O,EACV+O,EAAa,oBACH/O,EAAM,IAAMiC,EAAMzE,SAC5BuR,EAAa,sBAGb,mBAAKxR,MAAM,yBAAyByQ,IAAKlR,EAAKjB,IAC7C,sBACC0B,MAAQ,6DACQwR,4BACbvS,IAAgBM,EAAKjB,GAAK,cAAgB,oEAE7CqC,MAAM,6CACNR,QAAS,IAAMnD,KAAKiU,WAAW1R,EAAKjB,KAEpC,iBAAG0B,MAAM,iBARV,IAQ6BT,EAAKgF,KAEhC+M,GAAaA,EAAUnJ,QAAQ5I,EAAKjB,KAAO,GAAK,mBAC/CW,IAAgBM,EAAKjB,GAAK,mBAC1B,iBAAG0B,MAAM,8BACJ,mBACL,mBAAKA,MAAM,wCAAwCiH,KAAK,UACvD,oBAAMjH,MAAM,WAAZ,eAED,iBAAGA,MAAM,qCAAqCW,MAAM,6BAU1D4Q,GAAW,mBAAKvR,MAAM,OACtB,mBAAKA,MAAM,kDACV,sBACCA,MAAQ,sDACRW,MAAM,6CACNR,QAASnD,KAAKqU,cAEd,iBAAGrR,MAAM,iBALV,IAK4B,YAAC,IAAD,CAAM1B,GAAG,kBAAT,qB,EAUpB0S,Q,6UCtGTS,EADL9U,Y,EAAD,cAC2BC,YACvBC,YAAYC,GACRC,MAAMD,GACNE,KAAKC,MAAQ,GACbD,KAAK0U,aAAe,KAGxBhC,uBACI,MAAM,2BAAEiC,GAA+B3U,KAAKF,MACxC6U,GACAA,EAA2B3U,KAAK0U,cAIxCvU,oBACI,MAAM,wBAAEyU,GAA4B5U,KAAKF,MACrC8U,GACAA,EAAwB5U,KAAK0U,cAIrChU,SACI,MAAM,kBACFmT,EAAoB,GADlB,kBAEFC,EAAoB,GAFlB,cAGFhC,EAHE,IAIFC,EAAM,GAJJ,IAKFtM,EALE,WAMF0L,EANE,WAOF4C,EAPE,UAQF9C,GACAjR,KAAKF,MAEH+U,EAAiB,GAMvB,OALI5D,IACA4D,EAAe5D,UAAYA,GAE/BE,EAAWxJ,QAAQ5G,GAAK8T,EAAgB,QAAO9T,GAAO+T,UAAUf,EAAWhT,IAAMgR,EAAIhR,KAGjF,qBACIiC,MAAQ,GAAE6Q,EACVlT,IAAKC,GAAKZ,KAAK0U,aAAe9T,EAC9BmU,WAAUtP,GACNoP,GAEJ,mBACI7R,MAAQ,GAAE8Q,EACVnQ,MAAQ,mBAEPmO,EAAc,CACXC,MACAtM,c,EASlBuP,EADLrV,Y,EAAD,cACuBC,YACnBC,YAAYC,GACRC,MAAMD,GADS,KAMnBmV,2BAA6B,KACzBjV,KAAKkV,qBAAuB,MAPb,KAUnBjD,mBAAsBkD,IAClB,MAAM,mBAAElD,GAAuBjS,KAAKF,MACD,mBAAxBmS,GAEPA,EAAmBkD,GAKvBA,EAAQxN,QAAS5G,IACb,MAAM,eAAEqU,GAAmBrU,GACrB,OAAEsU,EAAS,GAAMtU,EAAEQ,OAAOE,QAM1B6T,EAAgB7K,KAAK8K,IAHPxU,EAAEQ,OAAOiU,WAAW,GAAGC,aACtB1U,EAAEQ,OAAOkU,aACT1U,EAAEQ,OAAOmU,cAI1BN,GACArU,EAAEQ,OAAOiU,WAAW,GAAG7R,MAAMgS,QAAS,QAYtC5U,EAAEQ,OAAOoC,MAAMiS,WAAeN,EAAgBD,EAASC,EAAgBD,GAA3C,MACrBtU,EAAEQ,OAAOoC,MAAMiS,YAEtB7U,EAAEQ,OAAOoC,MAAMiS,WAAeN,EAAgBD,EAASC,EAAgBD,GAA3C,KAC5BtU,EAAEQ,OAAOiU,WAAW,GAAG7R,MAAMgS,QAAS,WA/C/B,KAoDnBE,0BAA4B,KACxB,KAAM,yBAA0BC,WAC1B,8BAA+BA,WAC/B,sBAAuBA,OAAOC,0BAA0BC,WAC1D,OAAO,EAQXhW,KAAKkV,qBAAuB,IAAIe,qBAAqBjW,KAAKiS,mBAL1C,CACZiE,KAAM,KACNC,WAAY,QACZC,UAAW,MA9DA,KAmEnBxB,wBAA2BjU,IACnBX,KAAKkV,sBAAwBvU,GAC7BX,KAAKkV,qBAAqBmB,QAAQ1V,IArEvB,KAwEnBgU,2BAA8BhU,IACtBX,KAAKkV,sBAAwBvU,GAC7BX,KAAKkV,qBAAqBoB,UAAU3V,IAxExCX,KAAKC,MAAQ,GA4EjBwS,qBACIzS,KAAK6V,4BAGTnD,uBACI1S,KAAKiV,6BAGTvU,SACI,MAAM,KACFkT,EAAO,GADL,kBAEFC,EAAoB,oBAFlB,kBAGFC,EAAqB,4GAHnB,cAIFhC,EAAiB/Q,KAAM,gDAJrB,WAKFoQ,EAAa,GALX,WAMF4C,EAAa,IACb/T,KAAKF,MAET,OACI,mBAAKkD,MAAM,SACN4Q,GAAQA,EAAKhE,OAAO7O,GAAKyC,IAAK+S,SAASxV,IAAIqC,IAAI,CAAC2O,EAAKtM,KAClD,MAAMmB,EAAiBmL,EAAIyE,eAAe,qBAAuBzE,EAAI8B,kBAAoBA,EACnF4C,EAAiB1E,EAAIyE,eAAe,qBAAuBzE,EAAI+B,kBAAoBA,EACzF,OAAQ,mBACJ,YAACW,EAAD,CACIhB,IAAM,YAAWhO,KAAOsM,EAAIzQ,KAC5ByQ,IAAKA,EACLtM,IAAKA,EACLmP,wBAAyB5U,KAAK4U,wBAC9BD,2BAA4B3U,KAAK2U,2BACjCd,kBAAmBjN,EACnBkN,kBAAmB2C,EACnB3E,cAAeA,EACfX,WAAYA,EACZ4C,WAAYA,Y,EASzBiB,Q","file":"70.chunk.d11d0.esm.js","sourcesContent":["import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\n\nconst initialState = {};\n\n@observer\nclass ScrollIntoView extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            ...initialState,\n        };\n        this.container = null;\n    }\n\n    componentDidMount() {\n        const { horizontal, vertical = '' } = this.props;\n        const props = {\n            behavior: 'smooth',\n        };\n        if (horizontal) {\n            props.inline = horizontal;\n        }\n        if (vertical) {\n            props.block = vertical;\n        }\n\t\tthis.container.scrollIntoView(props);\n\t}\n\n    render() {\n        return (\n            <div ref={c => this.container = c}>&nbsp;</div>\n        );\n    }\n}\n\nexport default ScrollIntoView;\n","import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport { Text, Localizer, withText } from 'preact-i18n';\n\nimport Speed from '../../components/data/speed';\nimport Elevation from '../../components/data/elevation';\nimport Weight from '../../components/data/weight';\nimport Distance from '../../components/data/distance';\nimport Temperature from '../../components/data/temperature';\n\n@observer\nclass Garmin extends Component {\n    toggleDate = (e) => {\n        e.stopPropagation();\n        e.preventDefault();\n        const { showDate } = this.state;\n        this.setState({ showDate: !showDate });\n    }\n\n    ignoreGarminWorkout = async (e) => {\n        e.stopPropagation();\n        const id = e.target.parentElement.dataset.id || e.target.dataset.id;\n        const { garminActivityDetailsStore } = this.props.stores;\n\t\tawait garminActivityDetailsStore.ignoreWorkout(id);\n        this.loadGarminActivities();\n    }\n\n    importGarminWorkout = async (e) => {\n        e.stopPropagation();\n        const id = e.target.parentElement.dataset.id || e.target.dataset.id;\n        const { asTrack } = this.props;\n        const { garminActivityDetailsStore, workoutStore } = this.props.stores;\n\t\tconst { currentTeam } = workoutStore;\n        if (asTrack) {\n            await garminActivityDetailsStore.importTrack(id, currentTeam);\n        } else {\n            await garminActivityDetailsStore.importWorkout(id, currentTeam);\n        }\n        this.loadGarminActivities();\n        this.loadWorkouts();\n    }\n\n    async loadGarminActivities() {\n\t\tconst { garminActivityDetailsStore } = this.props.stores;\n\t\tgarminActivityDetailsStore.load({ query: { hideImported: 1 }});\n\t}\n\n    loadWorkouts = async () => {\n\t\tconst { workoutStore } = this.props.stores;\n\t\tconst { currentTeam } = workoutStore;\n\t\tawait workoutStore.load({ query: { team: currentTeam } });\n\t}\n\n    toggleDetail = () => {\n        const { showDetail = false } = this.state;\n        this.setState({\n            showDetail: !showDetail,\n        });\n    }\n\n    componentDidMount() {\n\t\tthis.loadGarminActivities();\n\t}\n\n    render() {\n        const { showDate, showDetail = false } = this.state;\n        const { activities = [], showDate: forceShowDate, asTrack = false } = this.props;\n\t\tconst { userStore, workoutStore } = this.props.stores;\n        const { currentTeam } = workoutStore;\n        const { team } = userStore;\n\n        const selectedTeam = userStore.findTeam(currentTeam || team.id);\n\n        if (!showDetail) {\n            if (activities && activities.length > 0) {\n                return (<>\n                    <div class='col-12 mb-3'>\n                        <button type='button' class='btn btn-block btn-outline-info' onClick={this.toggleDetail}>\n                            <div class={`float-right ml-2 text-center border rounded-circle imageRounded imageRoundedIcon`} style={`background-image: url('./assets/garmin-connect.png');`} />\n                            <Text id='workout.index.garmin-workouts'>Garmin workouts / not imported</Text> {activities.length}\n                        </button>\n                    </div>\n                </>);\n            }\n            return (<></>);\n        }\n\n        return (<>\n            <div class='col-12 mb-3'>\n                <div class='row'>\n                    {activities && activities.length > 0 && (\n                        <div\n                            class='col-12 border-top border-bottom pt-3 pb-3 my-2 bg-light'\n                        >\n                            <button type='button' class='float-right btn btn-sm btn-link' onClick={this.toggleDetail}>\n                                <i class='fas fa-caret-up' /> <Text id='garmin.hide-list'>Hide list</Text>\n                            </button>\n                            <h5><Text id='workout.index.garmin-workouts'>Garmin workouts / not imported</Text> {activities.length}</h5>\n                            {activities && activities.map(activity => {\n                                const { summary = {} } = activity;\n                                const startDate = util.parseInputDate(summary.startTimeInSeconds);\n\n                                return (<>\n                                    {/* <td>{util.secToHms(activity.moving_time)}</td> */}\n                                    {/* <td>{util.secToHms(activity.elapsed_time)}</td> */}\n\n                                    {/* {\n                                        \"durationInSeconds\": 616,\n                                        \"startTimeInSeconds\": 1602065947,\n                                        \"startTimeOffsetInSeconds\": 7200,\n                                        \"activityType\": \"ROAD_BIKING\",\n                                        \"averageSpeedInMetersPerSecond\": 0.152,\n                                        \"averagePaceInMinutesPerKilometer\": 109.649124, \n                                        \"activeKilocalories\": 1, \n                                        \"deviceName\": \"edge1000\", \n                                        \"distanceInMeters\": 94.02, \n                                        \"maxPaceInMinutesPerKilometer\": 14.6455765, \n                                        \"maxSpeedInMetersPerSecond\": 1.138, \n                                        \"startingLatitudeInDegree\": 61.00674974732101, \n                                        \"startingLongitudeInDegree\": 9.975536987185478, \n                                        \"totalElevationLossInMeters\": 2\n                                    } */}\n\n                                    <div class='col-12 d-flex mb-4 position-relative'>\n                                        <div class={`text-center border rounded-circle imageRounded`} style={`background-image: url(\"./assets/garmin-connect.png\"); border-width: 3px !important;`}>\n                                            &nbsp;\n                                        </div>\n                                        <div class='flex-grow-1 pl-3' style='line-height: 1.2em;'>\n                                            <h5 class='my-0 mb-1' style='line-height: 1.0em;'>{summary.deviceName}</h5>\n                                            {summary.activityType}<br />\n                                            <small class='text-muted'>\n                                                {startDate && <small onClick={this.toggleDate}>\n                                                    {forceShowDate || showDate ? util.formatDate(startDate, { locale: 'no-NB' }) : util.formatDistance(startDate, new Date(), { locale: 'no-NB' })}\n                                                </small>}\n                                                <span class='text-muted'>\n                                                    <i class='fas fa-road ml-2' /> <Distance stores={this.props.stores} value={summary.distanceInMeters / 1000} />\n                                                    <i class='fas fa-mountain ml-2' /> <Elevation stores={this.props.stores} value={summary.totalElevationGainInMeters} />\n                                                    <i class='fas fa-tachometer-alt ml-2' /> <Speed stores={this.props.stores} value={summary.averageSpeedInMetersPerSecond * 3.6} />\n                                                    <i class='fas fa-stopwatch ml-2' /> {util.secToHms(summary.durationInSeconds)}\n                                                </span>\n                                            </small>\n                                            <br />\n                                            <button class='btn btn-sm btn-block btn-primary' onClick={this.importGarminWorkout} data-id={activity.id}>\n                                                <i class='fas fa-file-import' /> {asTrack ? <Text id='garmin.import-track'>Import as track</Text> : <><Text id='garmin.import'>Import workout</Text> <i class='fas fa-arrow-right' /> {selectedTeam}</>} \n                                            </button>\n                                            <button class='btn btn-sm btn-link' onClick={this.ignoreGarminWorkout} data-id={activity.id}>\n                                                <i class='fas fa-trash-alt' /> <Text id='garmin.ignore'>Ignore workout</Text>\n                                            </button>\n                                        </div>\n                                    </div>\n                                </>);\n                            })}\n\n                            <button type='button' class='btn btn-block btn-primary mt-3' onClick={this.toggleDetail}>\n                                <i class='fas fa-caret-up' /> <Text id='garmin.hide-list'>Hide list</Text>\n                            </button>\n                        </div>\n                    )}\n\n                </div>\n            </div>\n        </>);\n    }\n}\n\nexport default Garmin;\n","import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport { toJS } from 'mobx';\nimport { Text, Localizer, withText } from 'preact-i18n';\nimport Markdown from 'preact-markdown';\n\nimport Modal from '../modal';\nimport WorkoutComments from '../../components/workout/comments';\nimport WorkoutAddComment from '../../components/workout/commentAdd';\nimport ImageScroller from '../../components/imageScroller';\nimport DogScroller from '../../components/dog/scroller';\n\nimport Overlay from '../../components/overlay/';\nimport TeamsPublicDetail from '../../routes/teams/publicDetail';\nimport DogPublicDetail from '../../routes/dogs/publicDetail';\n\nimport LikesAndComments from '../../components/feedback/likesAndComments';\nimport Views from '../../components/feedback/views';\n\nimport Speed from '../../components/data/speed';\nimport Elevation from '../../components/data/elevation';\nimport Weight from '../../components/data/weight';\nimport Distance from '../../components/data/distance';\nimport Temperature from '../../components/data/temperature';\n\nimport mu from '../../lib/musher-util';\n\nconst MAX_LOADINDEX = mu.getMaxLoadIndex();\n\nfunction getWorkoutColor(workout) {\n\tswitch (workout.type) {\n\t\tcase 1:\n\t\t\treturn 'border-primary';\n\t\tcase 2:\n\t\t\treturn 'border-danger';\n\t\tcase 3:\n\t\t\treturn 'border-success';\n\t\tcase 4:\n\t\t\treturn 'border-info';\n\t\tdefault:\n\t\t\treturn 'border-warning';\n\t}\n}\n\nfunction getWorkoutIcon(workout) {\n\tswitch (workout.type) {\n\t\tcase 1:\n\t\t\treturn 'fas fa-running';\n\t\tcase 2:\n\t\t\treturn 'fas fa-flag-checkered';\n\t\tcase 3:\n\t\t\treturn 'fas fa-hiking';\n\t\tcase 4:\n\t\t\treturn 'fas fa-futbol';\n\t\tdefault:\n\t\t\treturn 'fas fa-hiking';\n\t}\n}\n\nfunction displayDistance(distanceKm) {\n\tif (distanceKm < 5) {\n\t\treturn util.format(distanceKm, 2);\n\t}\n\tif (distanceKm < 10) {\n\t\treturn util.format(distanceKm, 1);\n\t}\n\treturn util.format(distanceKm, 1);\n}\n\nconst initialState = {\n\tshowAddComment: false,\n    viewImageIdx: {},\n    likeWorkout: {},\n};\n\n@observer\nclass Workout extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            ...initialState,\n        };\n        this.updateTimer = {};\n\t\tthis.inputRef = {};\n    }\n\n    toggleDate = (e) => {\n        e.stopPropagation();\n        e.preventDefault();\n        const { showDate } = this.state;\n        this.setState({ showDate: !showDate });\n    }\n\n\n\tlikeWorkout = async () => {\n\t\tconst { workoutStore } = this.props.stores;\n        const { workout } = this.props;\n        const workoutId = workout.id;\n\n        const { likeWorkout } = this.state;\n        likeWorkout[workoutId] = true;\n        this.setState({ likeWorkout });\n        setTimeout(() => {\n            const { likeWorkout } = this.state;\n            delete likeWorkout[workoutId];\n            this.setState({ likeWorkout });\n        }, 1200);\n\n\t\tconst response = await workoutStore.likeWorkout({ id: workoutId });\n        if (response && response.status === 200) {\n\n\t\t}\n\t}\n\n\ttoggleAddComment = (e) => {\n\t\tconst workoutId = e.target.parentElement.dataset.id || e.target.dataset.id;\n\t\tconst { showAddComment } = this.state;\n\t\tthis.setState({\n\t\t\tshowAddComment: !showAddComment,\n\t\t}, () => {\n\t\t\tif (this.inputRef[workoutId]) {\n\t\t\t\tthis.inputRef[workoutId].focus();\n\t\t\t}\n\t\t});\n\t}\n\n    viewImage = (e) => {\n\t\tconst { id, idx } = e.target.closest('img').dataset;\n        const { viewImageIdx } = this.state;\n        viewImageIdx[id] = idx;\n        this.setState({ viewImageIdx });\n    }\n\n    shareLink = (e) => {\n        const { url, title, text } = e.target.closest('button').dataset;\n        const { appState } = this.props.stores;\n        appState.shareUrl({ url, title, text });\n    }\n\n        // Overlay functions\n    onTeamClick = (e, teamid) => {\n        e.preventDefault();\n        e.stopPropagation();\n        this.setState({\n            showTeam: teamid,\n        });\n        return false;\n    }\n\n    hideTeam = () => {\n        this.setState({\n            showTeam: null,\n        });\n    }\n\n    onUserClick = (e, userid) => {\n        e.preventDefault();\n        e.stopPropagation();\n        return false;\n    }\n\n    onDogClick = (e, dogid, dogs) => {\n        e.preventDefault();\n        e.stopPropagation();\n        this.setState({\n            showDog: dogid,\n            dogs,\n        });\n        return false;\n    }\n\n    hideDog = () => {\n        this.setState({\n            showDog: null,\n        });\n    }\n\n    render() {\n        const {\n            showDate,\n            showAddComment,\n            viewImageIdx = {},\n            likeWorkout,\n            dogs,\n            showTeam,\n            showDog,\n        } = this.state;\n        const {\n            workout,\n            showDate: forceShowDate,\n            wrapperClasses = 'col-12 col-sm-8 col-lg-6 offset-sm-2 offset-lg-3',\n            wrapperClassesRow = 'row',\n        } = this.props;\n\t\tconst { userStore, appState, workoutStore } = this.props.stores;\n        const { viewmode, hasShareApi } = appState;\n        const { user, dogs: allDogs } = userStore;\n        const { language = 'en' } = user;\n        const intensity = userStore.findIntensity({ code: workout.intensity, language }) || {};\n        // const teamName = userStore.findTeam(workout.team);\n        const team = userStore.findTeam(workout.team, true) || {};\n        const teamName = team.name;\n        // const teamNames = workout.teams ? workout.teams.map(e => userStore.findTeam(e)) : [];\n        const teamNames = [];\n        if (teamName) {\n            teamNames.push(teamName);\n        }\n        if (workout.teams) {\n            workout.teams.forEach((e) => {\n                if (userStore.findTeam(e)) {\n                    teamNames.push(userStore.findTeam(e));\n                }\n            });\n        }\n\n        const { likes = [], comments = [] } = workout;\n\t\tconst hasLikedWorkout = workout.likes && workout.likes.findIndex(e => e.user === user.id) > -1;\n        const { gpxInfo = {}, mushers = [] } = workout;\n\t\tconst { loadIndex = 0 } = gpxInfo;\n        const workoutEquipment = userStore.findEquipment({ equipment: workout.equipment, language });\n        const workoutEquipmentIcon = userStore.findEquipment({ equipment: workout.equipment, field: 'icon' });\n\n        const musherImages = [];\n        if (mushers.length > 1) {\n            mushers.slice(1, 10).map((musher) => {\n                const u = workoutStore.findPublicUser(musher) || {};\n                if (u.images && u.images[0]) {\n                    musherImages.push(u.images[0]);\n                }\n            });\n        }\n\n        const publicUser = workoutStore.findPublicUser(mushers[0]) || {};\n        let image;\n        if (publicUser && publicUser.images && publicUser.images[0]) {\n            image = publicUser.images[0];\n        } else if (team.image && team.image.s3SmallLink) {\n            image = team.image;\n        } else if (team.images && team.images[0] && team.images[0].s3SmallLink) {\n            image = team.images[0];\n        } else if (workout.image && workout.image.s3SmallLink) {\n            image = workout.image;\n        }\n\n        const images = [];\n        if (workout.mapImage) {\n            images.push({\n                ...workout.mapImage,\n                type: 'map',\n            });\n        }\n        if (workout.images) {\n            const imgs = toJS(workout.images);\n            images.push(...imgs);\n        }\n        const imageIdx = viewImageIdx[workout.id] ? viewImageIdx[workout.id] : 0;\n        const currentImage = images && images[imageIdx] ? images[imageIdx] : null;\n\n        let batteryUsage;\n        if (workout && workout.gpxInfo && workout.gpxInfo.battegryLevelStart) {\n            batteryUsage = (workout.gpxInfo.battegryLevelStart - workout.gpxInfo.battegryLevelEnd) * 100;\n        }\n\n        const views = mu.getViews(workout.statistics);\n\n        // let temperature;\n        // let windSpeed;\n        // if (util.checkNested(workout, 'temperature')) {\n        //     const yr = toJS(workout.yr[0].instant.details);\n        //     // displayValue = `Yr.no: üå°Ô∏è ${yr.air_temperature}¬∞C, üí® ${yr.wind_speed}m/s üß≠ ${mu.windDirection(yr.wind_from_direction)}, ‚òÅÔ∏è ${yr.cloud_area_fraction}%, ${yr.air_pressure_at_sea_level}mb, üí¶ ${yr.relative_humidity}%`;\n        //     temperature = `${yr.air_temperature}¬∞C`;\n        //     windSpeed = `${yr.wind_speed}m/s`;\n        // }\n\t\t// // const loadMultiplier = loadIndex / 100;\n\n        return (<>\n\n            {showTeam && <Overlay>\n                <TeamsPublicDetail stores={this.props.stores} teamid={showTeam} marginTop={'0px;'} marginBottom={'0px;'} back={this.hideTeam} hideTeam={this.hideTeam} />\n            </Overlay>}\n\n            {showDog && <Overlay>\n                <DogPublicDetail stores={this.props.stores} dogid={showDog} marginTop={'0px;'} marginBottom={'0px;'} back={this.hideDog} dogs={dogs} />\n            </Overlay>}\n\n            <div class='w-100 mb-2'>\n                <div class={wrapperClassesRow}>\n\n                    <div class={`${wrapperClasses} d-flex mb-0 position-relative`}>\n\n                        {/* {workout.gpxInfo && <svg viewBox='0 0 300 300' style='top: 80px; left: 10px; width: 90px; height: 90px;' class='position-absolute'>\n                            <path d={`${workout.gpxInfo.svgMap}`} style='fill: none; stroke: #0063FF; stroke-width: 5; opacity: 0.3;' />\n                        </svg>} */}\n\n                        {/* {JSON.stringify(workout, null, 4)} */}\n                        <div class='text-center'>\n                            <div\n                                class={`position-relative text-center border rounded-circle imageRounded ${getWorkoutColor(workout)}`}\n                                style={`${image ? `background-image: url(\"${image.s3SmallLink}\"); background-size: cover;` : ''} border-width: 3px !important;`}\n                            >\n                                {!image && <i class={`${getWorkoutIcon(workout)} text-${intensity.class ? intensity.class : 'muted'} mt-3`} style='font-size: 40px;' />}\n\n                                {musherImages && musherImages.map((img, idx) => <>\n                                    <div\n                                        class='position-absolute rounded-circle imageRounded border imageRoundedThumb border-white'\n                                        style={`\n                                            background-image: url(\"${img.s3SmallLink}\");\n                                            background-size: cover;\n                                            bottom: -3px;\n                                            left: ${-5 + (idx * 10)}px;\n                                        `}\n                                    />\n                                </>)}\n                            </div>\n                            {workout.temperature !== 0 && <>\n                                <span class='text-muted font-weight-light'>\n                                    <Temperature stores={this.props.stores} value={workout.temperature} />\n                                </span>\n                            </>}\n                        </div>\n                        <div class='flex-grow-1 pl-3' style='line-height: 1.2em;'>\n                            <span class='float-right'>\n                                {workout.isLocked === 1 && <i class='fas fa-lock text-danger ml-3' />}\n                                {workout.isInProgress === 1 && <div class='spinner-grow text-success ml-3' role='status' />}\n                                {workout.isInProgress === 2 && <i class='fas fa-pause-circle text-warning ml-3' />}\n                            </span>\n                            <a class='stretched-link' href={`/workouts/${workout.id}`}>\n                                <h5 class='my-0 mb-1' style='line-height: 1.0em;'>\n                                    {workout.name}\n                                </h5>\n                            </a>\n                            {teamNames && teamNames.length > 0 && <small class='font-weight-lighter'>\n                                {teamNames.map((name, idx) => <>{idx > 0 ? ', ' : ''}{name}</>)}\n                            </small>}\n                            <br />\n                            <small class='text-muted'>\n                                {workout.date && <small onClick={this.toggleDate}>\n                                    {forceShowDate || showDate ? util.formatDate(workout.date, { locale: 'no-NB', hour12: false, hour: '2-digit', minute: '2-digit' }) : util.formatDistance(workout.date, new Date(), { locale: 'no-NB' })}\n                                </small>}\n                                <span class={`badge badge-${intensity.class} ml-2`}>{intensity.name}</span>\n                                {loadIndex > 0 && <span class={`ml-2 text-${mu.getLoadIndexColor(util.normalizeBetween(loadIndex, 0, MAX_LOADINDEX, 0, 100))}`}>\n                                    <i class='fas fa-hand-rock mr-1' />\n                                    {Math.floor(util.normalizeBetween(loadIndex, 0, MAX_LOADINDEX, 0, 100))} -&nbsp;\n                                    {mu.getLoadIndexText(util.normalizeBetween(loadIndex, 0, MAX_LOADINDEX, 0, 100))}\n                                </span>}\n                                <br />\n                            </small>\n                            <small>\n                                <div class='text-muted'>\n                                    {workout.garminId > 0 && <div class={`float-left mr-2 text-center border rounded-circle imageRounded imageRoundedIcon`} style={`background-image: url(\"./assets/garmin-connect.png\");`} />}\n                                    {workout.stravaId > 0&& <div class={`float-left mr-2 text-center border rounded-circle imageRounded imageRoundedIcon`} style={`background-image: url(\"./assets/strava-icon.png\");`} />}\n\n                                    {workout.equipment > 0 && <><i class={`${workoutEquipmentIcon} ml-2`} /> {workoutEquipment}</>}\n                                    {/* {workout.distanceKm > 0 && <><i class='fas fa-road ml-2' /> {displayDistance(workout.distanceKm)}km</>}\n                                    {workout.elevation > 0 && <><i class='fas fa-mountain ml-2' /> {util.format(workout.elevation, 0)}m</>} */}\n                                    {/* {workout.speedAvg > 0 && <><i class='fas fa-tachometer-alt ml-2' /> {util.format(workout.speedAvg, 1)}km/t</>} */}\n                                    {workout.dogs > 0 && <><i class='fas fa-dog ml-2' /> {workout.dogs.length}</>}\n                                    {workout.track > 0 && <><i class={`fas fa-map-marked text-${workout.track > 0 ? 'success' : 'danger'} ml-2`} /></>}\n                                    {workout.dogsLeft > 0 && <><i class={`fas fa-crosshairs text-${workout.dogsLeft && workout.dogsRight ? 'success' : 'danger'} ml-2`} /></>}\n                                    {workout.sledWeight > 0 && <>\n                                        <i class='fas fa-sleigh ml-2' /> <Weight stores={this.props.stores} value={workout.sledWeight} />\n                                    </>}\n                                    {batteryUsage > 0 && <span class='text-muted ml-2'><i class='fas fa-battery-three-quarters' /> {util.format(batteryUsage, 1)}% <Text id='workout.battery-used'>used</Text></span>}\n                                </div>\n                                {['beta', 'advanced'].indexOf(viewmode) > -1 && (\n                                    <span class='text-muted'>\n                                        <i class='fas fa-balance-scale' /> {util.format(workout.kcalBurnedTotal)} <Text id='workout.kcal'>kcal</Text>\n                                        <i class='fas fa-drumstick-bite ml-2' /> <Weight stores={this.props.stores} value={workout.kcalMeatGramsTotal / 1000} />\n                                        <i class='fas fa-fish ml-2' /> <Weight stores={this.props.stores} value={workout.kcalSalmonGramsTotal / 1000} />\n                                        <i class='fas fa-piggy-bank ml-2' /> <Weight stores={this.props.stores} value={workout.kcalFatGramsTotal / 1000} />\n                                    </span>\n                                )}\n                            </small>\n                        </div>\n                    </div>\n                    <div class={`${wrapperClasses} position-relative mt-2`}>\n                        <strong>\n                            {workout.description}\n                        </strong>\n                    </div>\n                    <div class={`${wrapperClasses} position-relative`}>\n                        <Markdown markdown={mu.replaceImages(workout.comment, workout.images, language)} markdownOpts={mu.getMarkdownOptions()} />\n                    </div>\n                    <div class={`${wrapperClasses} d-flex mb-0 position-relative`}>\n                        <div class='container-fluid px-0'>\n                            <div class='row mt-1'>\n                                {workout.distanceKm > 0 && <div class='col-3'>\n                                    <div class='text-overflow'>\n                                        <small><i class='fas fa-road' /> <Text id='workout.calendar.distance'>Distanse</Text></small>\n                                    </div>\n                                    <div class='text-overflow font-weight-light' style='font-size: 1.2em;'>\n                                        <Distance stores={this.props.stores} value={workout.distanceKm} />\n                                    </div>\n                                </div>}\n                                {workout.elevation > 0 && <div class='col-3'>\n                                    <div class='text-overflow'>\n                                        <small><i class='fas fa-mountain' /> <Text id='workout.calendar.ascend'>H√∏ydemeter</Text></small>\n                                    </div>\n                                    <div class='text-overflow font-weight-light' style='font-size: 1.2em;'>\n                                        <Elevation stores={this.props.stores} value={workout.elevation} />\n                                    </div>\n                                </div>}\n                                {workout.duration > 0 && <div class='col-3'>\n                                    <div class='text-overflow'>\n                                        <small><i class='fas fa-clock' /> <Text id='workout.calendar.duration'>Varighet</Text></small>\n                                    </div>\n                                    <div class='text-overflow font-weight-light' style='font-size: 1.2em;'>\n                                        {util.secToHms(workout.duration, true)}\n                                    </div>\n                                </div>}\n                                {workout.speedAvg > 0 && <div class='col-3'>\n                                    <div class='text-overflow'>\n                                        <small><i class='fas fa-tachometer-alt' /> <Text id='workout.calendar.avg-speed'>Snittfart</Text></small>\n                                    </div>\n                                    <div class='text-overflow font-weight-light' style='font-size: 1.2em;'>\n\t\t\t\t                        {workout.gpxInfo && workout.gpxInfo.avgGpsMovingSpeed > 0 ? <>\n                                            <Speed stores={this.props.stores} value={workout.gpxInfo.avgGpsMovingSpeed * 3.6} />\n                                        </> : <>\n                                            <Speed stores={this.props.stores} value={workout.speedAvg} />\n                                        </>}\n                                    </div>\n                                </div>}\n                            </div>\n                        </div>\n                    </div>\n\n                    {['beta', 'advanced', 'normal'].indexOf(viewmode) > -1 && (\n                        <div class={`${wrapperClasses}`}>\n                            <div class='container-fluid px-0 mt-1'>\n                                <div class='row'>\n                                    <ImageScroller stores={this.props.stores} images={images} id={workout.id} dblClick={this.likeWorkout} likeRef={likeWorkout} />\n                                </div>\n                            </div>\n                        </div>\n                    )}\n\n                    {['beta', 'advanced', 'normal'].indexOf(viewmode) > -1 && <>\n                        {workout.dogs && workout.dogs.length > 0 && <div class='container-fluid px-0 mt-1'>\n                            <div class='row pt-2'>\n                                <DogScroller stores={this.props.stores} dogs={workout.dogs} allDogs={allDogs} onDogClick={this.onDogClick} />\n                            </div>\n                        </div>}\n\n                        <div class='mt-2'>\n                            <LikesAndComments\n                                stores={this.props.stores}\n                                likes={likes}\n                                comments={comments}\n                                type='workout'\n                                onTeamClick={this.onTeamClick}\n                                onUserClick={this.onUserClick}\n                            />\n                        </div>\n\n                    </>}\n\n                    {['beta', 'advanced', 'normal'].indexOf(viewmode) > -1 && <>\n                        <div class={`${wrapperClasses} mb-0 position-relative mt-2`}>\n                            <div class='row'>\n                                <div class='col text-center'>\n                                    <button type='button' class={`btn btn-sm btn-outline-${hasLikedWorkout ? 'primary' : 'secondary'} btn-lg btn-block ${hasLikedWorkout ? 'text-primary' : ''}`}\n                                        onClick={this.likeWorkout}\n                                        // disabled={hasLikedWorkout}\n                                    >\n                                        <i class={`${hasLikedWorkout ? 'text-primary fas' : 'far'} fa-thumbs-up`} /> <Text id='comments.like'>Lik</Text>\n                                    </button>\n                                </div>\n                                <div class='col text-center'>\n                                    <button type='button' class='btn btn-sm btn-outline-secondary btn-lg btn-block'\n                                        data-id={workout.id}\n                                        onClick={this.toggleAddComment}\n                                    >\n                                        <i class='fas fa-comment' /> <Text id='comments.comment-add'>Kommentar</Text>\n                                    </button>\n                                </div>\n                                {hasShareApi ? <>\n                                    <div class='col text-center'>\n                                        <button class='btn btn-sm btn-outline-secondary btn-lg btn-block text-overflow'\n                                            onClick={this.shareLink}\n                                            data-url={`https://themusher.app/share/workout/${workout.uuidv4}`}\n                                            data-title={`title: ${workout.name}`}\n                                        >\n                                            <i class='fas fa-share' /> <Text id='workout.share'>Del</Text>\n                                        </button>\n                                    </div>\n                                </> : <>\n                                    <div class='col text-center'>\n                                        <a class='btn btn-sm btn-outline-secondary btn-lg btn-block text-overflow'\n                                            href={`https://themusher.app/share/workout/${workout.uuidv4}`}\n                                            target='_blank'\n                                            rel='noreferrer'\n                                            data-native\n                                        >\n                                            <i class='fas fa-share' /> <Text id='workout.share'>Del</Text>\n                                        </a>\n                                    </div>\n                                </>}\n                            </div>\n                        </div>\n\n                        <div class={`${wrapperClasses} mt-2 mb-3`}>\n                            {showAddComment && <WorkoutAddComment\n                                stores={this.props.stores}\n                                workout={workout}\n                                inputRef={c => this.inputRef[workout.id] = c}\n                                inputRefObject={this.inputRef}\n                                col='12'\n                                offset='0'\n                            />}\n                            <WorkoutComments stores={this.props.stores} workout={workout} col='10' offset='2' compact={true} />\n                        </div>\n\n                        {views > 0 && <>\n                            <div class='mt-2'>\n                                <Views\n                                    stores={this.props.stores}\n                                    views={views}\n                                    object={workout}\n                                    type='workout'\n                                    isTeamAdmin={true}\n                                    isAdmin={false}\n                                    onTeamClick={this.onTeamClick}\n                                    onUserClick={this.onUserClick}\n                                />\n                            </div>\n                        </>}\n\n                    </>}\n\n                </div>\n            </div>\n        </>);\n    }\n}\n\nexport default Workout;\n","import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport { Text, Localizer, withText } from 'preact-i18n';\n\n@observer\nclass Modal extends Component {\n    toggleDate = () => {\n        const { showDate } = this.state;\n        this.setState({ showDate: !showDate });\n    }\n\n    touchStart = (e) => {\n        e.stopPropagation();\n        this.setState({\n            startY: e.touches[0].pageY,\n        })\n    }\n\n    touchEnd = (e) => {\n        e.stopPropagation();\n        this.setState({\n            startY: undefined,\n            readyToRefresh: false,\n        })\n    }\n\n    touchMove = (e) => {\n        e.stopPropagation();\n        const { close } = this.props;\n        const { startY, refreshing } = this.state;\n        const scrollDistance = 30;\n        const y = e.touches[0].pageY;\n        if (this.appContainer) {\n            const { scrollTop } = this.appContainer;\n            if (scrollTop === 0 && y > startY + scrollDistance && !refreshing) {\n                close();\n            }\n        }\n    }\n\n    render() {\n        const { showDate } = this.state;\n        const { image, imagexxl, close, thumb, name, title, date } = this.props;\n        return (\n            <div class='fixed-top bg-dark text-center pt-2' style='width: 100vw; height: 100vh;'>\n                <button class='btn btn-secondary float-right mr-2' onClick={close}>X</button>\n\n                    <div class='d-flex mb-2 px-2'>\n                        {/* {JSON.stringify(dog, null, 4)} */}\n                        {thumb && <div class={`text-center border rounded-circle imageRounded imageRoundedSmall`} style={thumb ? `background-image: url(\"${thumb}\");` : ''}>\n                            &nbsp;\n                        </div>}\n                        <div class='flex-grow-1 pl-3 pr-2 text-left' style='line-height: 1.3em;'>\n                            {name && <strong class='mr-2'>{name}:</strong>}\n                            {title}<br />\n                            <small class='text-muted'>\n                                {date && <small onClick={this.toggleDate}>\n                                    {showDate ? util.formatDate(date, { locale: 'no-NB' }) : util.formatDistance(date, new Date(), { locale: 'no-NB' })}\n                                </small>}\n                            </small>\n                        </div>\n                    </div>\n\n\n                <img src={image}\n                    class='img-fluid align-middle mt-2 mb-2'\n                    onClick={close}\n                    onTouchstart={this.touchStart}\n                    onTouchend={this.touchEnd}\n                    onTouchmove={this.touchMove}\n                    ref={c => this.appContainer = c}\n                />\n\n                <a target='_blank' rel='noopener noreferrer' href={imagexxl || image} download={imagexxl || image}>\n                    <i class='fas fa-download' /> <Text id='modal.download'>Last ned bildet</Text>\n                </a>\n            </div>\n        );\n    }\n}\n\nexport default Modal;\n","import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport { Text, Localizer } from 'preact-i18n';\n\nimport DogSimplePublic from './simplePublic';\n\n@observer\nclass DogScroller extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            imageIdx: 0,\n        };\n    }\n\n    scrollImages = (e) => {\n        const { dogs } = this.props;\n\n        const { scrollLeft, scrollWidth, clientWidth } = e.target;\n        const imageStep = clientWidth;\n        const imageIdx = scrollLeft / imageStep;\n        // console.log({ e, imageStep, imageIdx, scrollLeft, scrollWidth, clientWidth });\n\n        const nearestInt = Math.round(imageIdx);\n        const diff = Math.abs(nearestInt - imageIdx);\n        // console.log({ nearestInt, diff });\n        if (Number.isInteger(imageIdx) || diff < 0.1) {\n            this.setState({\n                imageIdx: nearestInt,\n            });\n        }\n    }\n\n    sortByName = (a, b) => {\n        const { allDogs = [] } = this.props;\n        const dogA = allDogs.find(e => e.id === a);\n        const dogB = allDogs.find(e => e.id === b);\n        if (dogA && dogB) {\n            if (dogA.name > dogB.name) {\n                return 1;\n            }\n        }\n        return -1;\n    }\n\n    render() {\n        const { imageIdx } = this.state;\n        const { dogs, allDogs = [], size = 'medium', onDogClick = () => {} } = this.props;\n\n        return (\n            <div class='w-100'>\n                <div\n                    class='d-flex flex-row flex-nowrap no-scrollbar'\n                    style='overflow: auto; scroll-snap-type: x mandatory;'\n                    onScroll={this.scrollImages}\n                >\n                    {dogs && dogs.sort(this.sortByName).map((dogId, idx) => {\n                        const dog = allDogs.find(e => e.id === dogId);\n                        if (!dog) {\n                            return '';\n                        }\n                        return (\n                            <div class='col clearfix position-relative p-0 mx-2'>\n                                <div\n                                    class={`w-100 h-100 text-center rounded-lg imageContainer d-flex justify-content-center align-items-center`}\n                                    style={`\n                                        flex-wrap: wrap;\n                                        overflow-y: hidden;\n                                    `}\n                                    onTouchstart={(e) => { e.stopPropagation(); }}\n                                    onTouchend={(e) => { e.stopPropagation(); }}\n                                    onTouchmove={(e) => { e.stopPropagation(); }}\n                                >\n                                    <DogSimplePublic\n                                        stores={this.props.stores}\n                                        dog={dog}\n                                        dogs={allDogs.filter(d => dogs.indexOf(d.id) > -1).sort((a, b) => a.name > b.name ? 1 : -1)}\n                                        className='mx-auto'\n                                        showName={true}\n                                        showPosition={false}\n                                        size={size}\n                                        onDogClick={onDogClick} \n                                    />\n                                    {/* <xmp>{JSON.stringify(img, null, 4)}</xmp> */}\n                                </div>\n                            </div>\n                        );\n                    })}\n                </div>\n            </div>\n        );\n    }\n}\n\nexport default DogScroller;\n","import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport { Text, Localizer, withText } from 'preact-i18n';\n\nimport Speed from '../../components/data/speed';\nimport Elevation from '../../components/data/elevation';\nimport Weight from '../../components/data/weight';\nimport Distance from '../../components/data/distance';\nimport Temperature from '../../components/data/temperature';\n\n@observer\nclass Strava extends Component {\n    toggleDate = (e) => {\n        e.stopPropagation();\n        e.preventDefault();\n        const { showDate } = this.state;\n        this.setState({ showDate: !showDate });\n    }\n\n    ignoreStravaWorkout = async (e) => {\n        e.stopPropagation();\n        const id = e.target.parentElement.dataset.id || e.target.dataset.id;\n        const { stravaActivityStore } = this.props.stores;\n\t\tawait stravaActivityStore.ignoreWorkout(id);\n        this.loadStravaActivities();\n    }\n\n    importStravaWorkout = async (e) => {\n        e.stopPropagation();\n        const id = e.target.parentElement.dataset.id || e.target.dataset.id;\n        const { stravaActivityStore, workoutStore } = this.props.stores;\n\t\tconst { currentTeam } = workoutStore;\n\t\tawait stravaActivityStore.importWorkout(id, currentTeam);\n        this.loadStravaActivities();\n        this.loadWorkouts();\n    }\n\n    async loadStravaActivities() {\n\t\tconst { stravaActivityStore } = this.props.stores;\n\t\tstravaActivityStore.load({ query: { hideImported: 1 }});\n\t}\n\n    loadWorkouts = async () => {\n\t\tconst { workoutStore } = this.props.stores;\n\t\tconst { currentTeam } = workoutStore;\n\t\tawait workoutStore.load({ query: { team: currentTeam } });\n\t}\n\n    toggleDetail = () => {\n        const { showDetail = false } = this.state;\n        this.setState({\n            showDetail: !showDetail,\n        });\n    }\n\n\tcomponentDidMount() {\n\t\tthis.loadStravaActivities();\n\t}\n\n    render() {\n        const { showDate, showDetail = false } = this.state;\n        const { activities, showDate: forceShowDate } = this.props;\n\t\tconst { userStore, workoutStore } = this.props.stores;\n        const { currentTeam } = workoutStore;\n        const { team } = userStore;\n\n        const selectedTeam = userStore.findTeam(currentTeam || team.id);\n\n         if (!showDetail) {\n            if (activities && activities.length > 0) {\n                return (<>\n                    <div class='col-12 mb-3'>\n                        <button type='button' class='btn btn-block btn-outline-info' onClick={this.toggleDetail}>\n                            <div class={`float-right ml-2 text-center border rounded-circle imageRounded imageRoundedIcon`} style={`background-image: url('./assets/strava-icon.png');`} />\n                            <Text id='workout.index.strava-workouts'>Strava workouts / not imported</Text> {activities.length}\n                        </button>\n                    </div>\n                </>);\n            }\n            return (<></>);\n        }\n\n        return (<>\n            <div class='col-12 mb-3'>\n                <div class='row'>\n                    {activities && activities.length > 0 && (\n                        <div\n                            class='col-12 border-top border-bottom pt-3 pb-3 my-2 bg-light'\n                        >\n                            <button type='button' class='float-right btn btn-sm btn-link' onClick={this.toggleDetail}>\n                                <i class='fas fa-caret-up' /> <Text id='strava.hide-list'>Hide list</Text>\n                            </button>\n                            <h5><Text id='workout.index.strava-workouts'>Strava workouts / not imported</Text> {activities.length}</h5>\n                            {activities && activities.map(activity => {\n                                const { summary = {} } = activity;\n                                const startDate = util.parseInputDate(summary.startTimeInSeconds);\n\n                                return (<>\n                                    {/* <td>{util.secToHms(activity.moving_time)}</td> */}\n                                    {/* <td>{util.secToHms(activity.elapsed_time)}</td> */}\n\n                                    <div class='col-12 d-flex mb-4 position-relative'>\n                                        <div class={`text-center border rounded-circle imageRounded`} style={`background-image: url(\"./assets/strava-icon.png\"); border-width: 3px !important;`}>\n                                            &nbsp;\n                                        </div>\n                                        <div class='flex-grow-1 pl-3' style='line-height: 1.2em;'>\n                                            <h5 class='my-0 mb-1' style='line-height: 1.0em;'>{activity.name}</h5>\n                                            {activity.type}<br />\n                                            <small class='text-muted'>\n                                                {activity.start_date && <small onClick={this.toggleDate}>\n                                                    {forceShowDate || showDate ? util.formatDate(activity.start_date, { locale: 'no-NB' }) : util.formatDistance(activity.start_date, new Date(), { locale: 'no-NB' })}\n                                                </small>}\n                                                <span class='text-muted'>\n                                                    <i class='fas fa-road ml-2' /> <Distance stores={this.props.stores} value={activity.distance / 1000} />\n                                                    <i class='fas fa-mountain ml-2' /> <Elevation stores={this.props.stores} value={activity.total_elevation_gain} />\n                                                    <i class='fas fa-tachometer-alt ml-2' /> <Speed stores={this.props.stores} value={activity.average_speed * 3.6} />\n                                                    <i class='fas fa-stopwatch ml-2' /> {util.secToHms(activity.elapsed_time)}\n                                                </span>\n                                            </small>\n                                            <br />\n                                            <button class='btn btn-sm btn-block btn-primary' onClick={this.importStravaWorkout} data-id={activity.id}>\n                                                <i class='fas fa-file-import' /> <Text id='strava.import'>Import workout</Text> <i class='fas fa-arrow-right' /> {selectedTeam}\n                                            </button>\n                                            <button class='btn btn-sm btn-link' onClick={this.ignoreStravaWorkout} data-id={activity.id}>\n                                                <i class='fas fa-trash-alt' /> <Text id='strava.ignore'>Ignore workout</Text>\n                                            </button>\n                                        </div>\n                                    </div>\n                                </>);\n                            })}\n\n                            <button type='button' class='btn btn-block btn-primary mt-3' onClick={this.toggleDetail}>\n                                <i class='fas fa-caret-up' /> <Text id='strava.hide-list'>Hide list</Text>\n                            </button>\n                        </div>\n                    )}\n                </div>\n            </div>\n        </>);\n    }\n}\n\nexport default Strava;\n","import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport { Text, Localizer, withText } from 'preact-i18n';\nimport linkState from 'linkstate';\n\nimport mu from '../../lib/musher-util';\nconst MARGIN_TOP = mu.marginTop(true);\nconst MARGIN_BOTTOM = mu.marginBottom();\nconst SUB_MENU_MARGIN_TOP = mu.subMenuMarginTop();\n\nimport Workout from '../../components/workout';\nimport Strava from '../../components/strava';\nimport Garmin from '../../components/garmin';\nimport Teams from '../../components/team/teams';\n\nimport FastList from '../../components/team/fastList';\n\nconst initialState = {\n\tisLoading: false,\n\toffset: 0,\n\tlimit: 5,\n\tsessionid: new Date().getTime(),\n};\n\nconst dataFields = ['id', 'type', 'user', 'team', 'title'];\n\n@observer\nclass Workouts extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            ...initialState,\n        };\n    }\n\n\t// loadMore = () => {\n\t// \tconst { offset } = this.state;\n\t// \tthis.setState({ offset: offset + LIMIT }, () => {\n\t// \t\tthis.loadWorkouts(true);\n\t// \t});\n\t// }\n\n\tloadWorkouts = async ({ limit, offset }) => {\n\t\tthis.setState({ isLoading: true });\n\t\tconst { workoutStore } = this.props.stores;\n\t\tconst { currentTeam } = workoutStore;\n\t\tconst append = offset > 0;\n\t\tawait workoutStore.load({\n\t\t\tquery: { team: currentTeam },\n\t\t\tlimit,\n\t\t\toffset,\n\t\t\taddData: ['publicTeams', 'publicUsers'],\n\t\t}, append);\n\t\tthis.setState({ isLoading: false });\n\t}\n\n\tchangeTeam = () => {\n\t\tconst { limit } = this.state;\n        this.loadWorkouts({ limit, offset: 0 });\n\t}\n\n    setLoadMore = () => {\n        const { workoutStore } = this.props.stores;\n        workoutStore.setLoadMore(() => {\n            let { limit, offset } = this.state;\n            offset += limit;\n            this.setState({ offset });\n            this.loadWorkouts({ limit, offset });\n        });\n    }\n\n    unsetLoadMore = () => {\n        const { workoutStore } = this.props.stores;\n        workoutStore.setLoadMore(() => {});\n    }\n\n\tloadDogs = async () => {\n\t\tconst { dogStore } = this.props.stores;\n\t\tconst { currentTeam } = dogStore;\n\n\t\tawait dogStore.load({ query: { team: currentTeam }, addData: ['workoutSummary'] });\n\t}\n\n\tasync loadTracks() {\n\t\tconst { trackStore } = this.props.stores;\n\t\tawait trackStore.load();\n\t}\n\n\tasync loadWorkoutSummary() {\n\t\tconst { userStore, workoutStore } = this.props.stores;\n\t\tconst { currentTeam } = workoutStore;\n        await userStore.getWorkoutSummary({ team: currentTeam });\n    }\n\n\tasync loadStravaActivities() {\n\t\tconst { stravaActivityStore } = this.props.stores;\n\t\tstravaActivityStore.load({ query: { hideImported: 1 }});\n\t}\n\n\tasync loadGarminActivities() {\n\t\tconst { garminActivityDetailsStore } = this.props.stores;\n\t\tgarminActivityDetailsStore.load({ query: { hideImported: 1 }});\n\t}\n\n\tremoveFilterText = () => {\n\t\tthis.setState({ filterText: '' });\n\t}\n\n    renderContent = ({ obj, idx }) => {\n        const { appState } = this.props.stores;\n        const { path } = appState;\n        const { hashtag } = this.props;\n\n        return (<>\n\t\t\t<Workout\n\t\t\t\tstores={this.props.stores}\n\t\t\t\tworkout={obj}\n\t\t\t\tshowDate={true}\n\t\t\t\twrapperClasses={'w-100'}\n\t\t\t\twrapperClassesRow={''}\n\t\t\t/>\n        </>);\n    }\n\n\t// Scroll views timer\n    setupIntersection = () => {\n        this.setState({\n            handleIntersection: mu.intersectionObserverCallback,\n        });\n        const { workoutStore } = this.props.stores;\n        this.scrollViewTimer = setInterval(() => workoutStore.postScrollview(mu.getIntersectionObserverHistory()), 30 * 1000);\n    }\n\n\tcomponentWillMount() {\n        this.setupIntersection();\n    }\n\n\tcomponentWillUnmount() {\n        const { workoutStore, garminActivityDetailsStore, stravaActivityStore } = this.props.stores;\n        workoutStore.postScrollview(mu.getIntersectionObserverHistory());\n        clearInterval(this.scrollViewTimer);\n        this.unsetLoadMore();\n\t\t// workoutStore.cleanupMemory();\n    }\n\t// /Scroll views timer\n\n\n    componentDidMount() {\n\t\tconst { limit } = this.state;\n        this.loadWorkouts({ limit, offset: 0 });\n\t\tthis.loadDogs();\n\t\t// this.loadTracks();\n\t\tthis.loadStravaActivities();\n\t\tthis.loadGarminActivities();\n\t\tthis.setLoadMore();\n    }\n\n\trender() {\n        const { scrolledDown } = this.props;\n\t\tconst { isLoading, filterText, handleIntersection, sessionid } = this.state;\n\t\tconst { trackStore, workoutStore, dogStore, appState, stravaActivityStore, garminActivityDetailsStore, userStore } = this.props.stores;\n\t\tconst { darkmode } = appState;\n\t\tconst { message } = this.props;\n\t\tconst { workouts, currentTeam } = workoutStore;\n\t\tconst currentTeamObject = userStore.findTeam(currentTeam, true);\n\n\t\tlet workoutFilter = () => true;\n\t\tif (filterText) {\n\t\t\tworkoutFilter = (e) => e.name.match(new RegExp(filterText, 'i'));\n\t\t}\n\t\tconst workoutsFiltered = workouts.filter(workoutFilter);\n\n\t\tconst { tracks } = trackStore;\n\t\tconst { dogs } = dogStore;\n\t\tconst { user } = userStore;\n\t\tconst { stravaActivities = [] } = stravaActivityStore;\n\t\tconst { garminActivityDetails = [] } = garminActivityDetailsStore;\n\t\treturn (\n\t\t\t<div class='container-fluid' style={`margin-bottom: ${MARGIN_BOTTOM}; margin-top: ${MARGIN_TOP};`}>\n\t\t\t\t<div class='row fixed-top pt-2' style={`margin-top: ${scrolledDown > 0 ? 0 : SUB_MENU_MARGIN_TOP}; background-color: ${darkmode ? '#191d21' : '#f8f9fa'}; transition: all 0.3s ease-in-out;`}>\n\t\t\t\t\t<div class='col text-center subtopmenu'>\n\t\t\t\t\t\t<a href='/workouts/' class='text-secondary stretched-link'><nobr><i class='fas fa-chart-line' /> <Text id='workout.index.dashboard'>Oversikt</Text></nobr></a>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class='col text-center border-bottom border-primary subtopmenu'>\n\t\t\t\t\t\t<a href='/workouts/list' class='text-primary stretched-link'><nobr><i class='fas fa-list' /> <Text id='workout.index.list'>Liste</Text></nobr></a>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class='col text-center subtopmenu'>\n\t\t\t\t\t\t<a href='/workouts/plan' class='text-secondary stretched-link'><nobr><i class='fas fa-calendar-alt' /> <Text id='workout.index.plan'>Plan</Text></nobr></a>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\n\t\t\t\t{message && (\n\t\t\t\t\t<div class='alert alert-success mb-3' role='alert'>\n\t\t\t\t\t\t<i class='fas fa-check' /> {message}\n\t\t\t\t\t</div>\n\t\t\t\t)}\n\n\t\t\t\t<div class='row'>\n\t\t\t\t\t<div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 border-bottom'>\n\t\t\t\t\t\t<Teams stores={this.props.stores} callback={this.changeTeam} key={`teams-${currentTeam}`} />\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-2 mb-2'>\n\t\t\t\t\t\t<a class='btn btn-primary btn-sm float-right'\n\t\t\t\t\t\t\thref='/workouts/edit/new'\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<i class='fas fa-plus' /> <Text id='workout.index.add-workout'>Legg til treningstur</Text>\n\t\t\t\t\t\t</a>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mb-3'>\n\t\t\t\t\t\t<div class='row mt-3'>\n\t\t\t\t\t\t\t{user && user.strava && <>\n\t\t\t\t\t\t\t\t<Strava stores={this.props.stores} activities={stravaActivities} key={`strava-${currentTeam}-${stravaActivities.length}`} />\n\t\t\t\t\t\t\t</>}\n\t\t\t\t\t\t\t{user && user.garmin && <>\n\t\t\t\t\t\t\t\t<Garmin stores={this.props.stores} activities={garminActivityDetails} key={`garmin-${currentTeam}-${garminActivityDetails.length}`} />\n\t\t\t\t\t\t\t</>}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div class='col-12'>\n\n\t\t\t\t\t\t{/* <div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 px-0 mb-3'>\n\n\t\t\t\t\t\t\t<div class='input-group mb-3'>\n\t\t\t\t\t\t\t\t<Localizer>\n\t                                <input\n\t\t\t\t\t\t\t\t\t\tclass='form-control form-control'\n\t\t\t\t\t\t\t\t\t\ttype='text'\n\t\t\t\t\t\t\t\t\t\tautocomplete='off'\n\t\t\t\t\t\t\t\t\t\tvalue={filterText}\n\t\t\t\t\t\t\t\t\t\tplaceholder={<Text id='workouts.search-for'>S√∏k etter trening</Text>}\n\t\t\t\t\t\t\t\t\t\tonInput={linkState(this, 'filterText')}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</Localizer>\n\t\t\t\t\t\t\t\t{filterText && <div class='input-group-append'>\n\t\t\t\t\t\t\t\t\t<button class='btn btn-sm btn-outline-danger' type='button' onClick={this.removeFilterText}><i class='fas fa-times' /></button>\n\t\t\t\t\t\t\t\t</div>}\n\t\t\t\t\t\t\t</div>\n\n                        </div>\n */}\n\t\t\t\t\t\t<div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 px-0'>\n\t\t\t\t\t\t\t<h5>\n\t\t\t\t\t\t\t\t{/* <Text id='workouts.all-workouts' fields={{ total: workoutsFiltered.length }}>Treningsturene - {workoutsFiltered.length} stk</Text> */}\n\t\t\t\t\t\t\t\t{currentTeamObject && currentTeamObject.name && <div>\n\t\t\t\t\t\t\t\t\t<small class='font-weight-lighter'>(<Text id='workout.index.filtered-by'>Filtered by</Text>: {currentTeamObject.name})</small>\n\t\t\t\t\t\t\t\t</div>}\n\t\t\t\t\t\t\t</h5>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t{!isLoading && workouts && workouts.length === 0 && (\n\t\t\t\t\t\t\t<div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 text-muted'>\n\t\t\t\t\t\t\t\t{dogs && dogs.length === 0 && (\n\t\t\t\t\t\t\t\t\t<div class='mb-5 py-3 text-center border-top border-bottom'>\n\t\t\t\t\t\t\t\t\t\t<div class='display-4'>\n\t\t\t\t\t\t\t\t\t\t\t<i class='fas fa-dog' />\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<h5>\n\t\t\t\t\t\t\t\t\t\t\t<Text id='workouts.no-dogs'>Ingen hunder er registert.</Text>\n\t\t\t\t\t\t\t\t\t\t</h5>\n\t\t\t\t\t\t\t\t\t\t<Text id='workouts.no-dogs-tip'>Det er lurt √• legge inn hunder f√∏r du registrerer en treningstur.</Text><br />\n\t\t\t\t\t\t\t\t\t\t<a class='btn btn-info mt-3' href='/dogs/edit/new'>\n\t\t\t\t\t\t\t\t\t\t\t<i class='fas fa-dog' /> <Text id='workouts.add-dog'>Legg til hund</Text>\n\t\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t)}\n\n\t\t\t\t\t\t\t\t{tracks && tracks.length === 0 && (\n\t\t\t\t\t\t\t\t\t<div class='mb-5 py-3 text-center border-top border-bottom'>\n\t\t\t\t\t\t\t\t\t\t<div class='display-4'>\n\t\t\t\t\t\t\t\t\t\t\t<i class='fas fa-map-marked' />\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<h5>\n\t\t\t\t\t\t\t\t\t\t\t<Text id='workouts.no-tracks'>Ingen runder er registert.</Text>\n\t\t\t\t\t\t\t\t\t\t</h5>\n\t\t\t\t\t\t\t\t\t\t<Text id='workouts.no-tracks-tip-1'>Det er lurt √• legge inn runden f√∏r du registrerer en treningstur. Da f√•r du automatisk fylt ut distanse og h√∏ydemeter.</Text><br />\n\t\t\t\t\t\t\t\t\t\t<Text id='workouts.no-tracks-tip-2'>Dersom du ikke har GPX-filen fra denne runden, s√• kan du likevel registrere treningen.</Text><br />\n\n\t\t\t\t\t\t\t\t\t\t<a class='btn btn-info mt-3' href='/tracks/edit/new'>\n\t\t\t\t\t\t\t\t\t\t\t<i class='fas fa-map-marked' /> <Text id='workouts.add-track'>Legg til runde</Text>\n\t\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t)}\n\n\t\t\t\t\t\t\t\t<div class='text-center mb-5'>\n\t\t\t\t\t\t\t\t\t<div class='display-1'>\n\t\t\t\t\t\t\t\t\t\t<i class='fas fa-running' />\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<h5>\n\t\t\t\t\t\t\t\t\t\t<Text id='workouts.no-workouts'>Ingen treningsturer er registrert enn√•.</Text>\n\t\t\t\t\t\t\t\t\t</h5>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<p class='text-center'>\n\t\t\t\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t\t\t\t<Text id='workouts.no-workouts-1'>Tracking i appen er ikke helt klart enn√• pga noen tekniske begrensninger i Apple iOS.</Text>\n\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t\t\t\t<Text id='workouts.no-workouts-2'>N√•r jeg f√•r tak i en Android telefon skal jeg f√•r satt opp denne funksjonen slik at den kan brukes der.</Text>\n\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t<p class='text-center'>\n\t\t\t\t\t\t\t\t\t<Text id='workouts.no-workouts-3'>Kart over ruten du har kj√∏rt legges inn som GPX under runder.</Text>\n\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t<Text id='workouts.no-workouts-howto'>Slik kommer du i gang</Text>:\n\t\t\t\t\t\t\t\t<ol>\n\t\t\t\t\t\t\t\t\t<li><Text id='workouts.no-workouts-howto-1'>Trykk p√• knappen \"Legg til treningstur\" oppe til h√∏yre.</Text></li>\n\t\t\t\t\t\t\t\t</ol>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t)}\n\n\t\t\t\t\t\t<FastList\n\t\t\t\t\t\t\tdata={workoutsFiltered}\n\t\t\t\t\t\t\twrapperClassNames={'row pb-4'}\n\t\t\t\t\t\t\tcontentClassNames={`col-12 col-sm-8 col-lg-6 offset-sm-2 offset-lg-3 my-1 position-relative rounded rounded-lg py-3 bg-${darkmode ? 'black' : 'white'} shadow-sm`}\n\t\t\t\t\t\t\trenderContent={this.renderContent}\n\t\t\t\t\t\t\tdataFields={dataFields}\n\t\t\t\t\t\t\tdataValues={{ type: '11' }}\n\t\t\t\t\t\t\thandleIntersection={handleIntersection}\n\t\t\t\t\t\t\tsessionid={sessionid}\n\t\t\t\t\t\t/>\n\n\t\t\t\t\t\t{/* {workoutsFiltered && workoutsFiltered.map(workout => (\n\t\t\t\t\t\t\t<Workout stores={this.props.stores} workout={workout} showDate={true} />\n\t\t\t\t\t\t))} */}\n\t\t\t\t\t</div>\n\n\t\t\t\t\t{/* <div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 text-center'>\n\t\t\t\t\t\t<button class='btn btn-sm btn-link text-muted'\n\t\t\t\t\t\t\tstyle='font-size: 1.5em;'\n\t\t\t\t\t\t\tonClick={this.loadMore}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<i class='fas fa-download' /> Load {LIMIT} more...\n\t\t\t\t\t\t</button>\n\t\t\t\t\t</div> */}\n\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nexport default Workouts;\n","import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport { Text, Localizer } from 'preact-i18n';\n\nimport ScrollIntoView from '../../components/util/scrollIntoView';\n\n@observer\nclass Teams extends Component {\n    toggleTeam = (team) => {\n\t\tconst { callback, unsetTeamIfSelected = true } = this.props;\n        const { dogStore, workoutStore } = this.props.stores;\n\t\tconst { currentTeam } = dogStore;\n\t\tif (unsetTeamIfSelected && team === currentTeam) {\n\t\t\tdogStore.setCurrentTeam(undefined);\n\t\t\tworkoutStore.setCurrentTeam(undefined);\n\t\t} else {\n\t\t\tdogStore.setCurrentTeam(team);\n\t\t\tworkoutStore.setCurrentTeam(team);\n\t\t}\n\t\tif (util.isDefined(callback)) {\n\t\t\tcallback();\n\t\t}\n\t}\n\n    showAllTeams = () => {\n\t\tconst { callback } = this.props;\n        const { dogStore, workoutStore } = this.props.stores;\n\t\tdogStore.setCurrentTeam(undefined);\n\t\tworkoutStore.setCurrentTeam(undefined);\n\t\tif (util.isDefined(callback)) {\n\t\t\tcallback();\n\t\t}\n\t}\n\n\t// componentDidMount() {\n\t// \tif (this.container) {\n\t// \t\tthis.container.scrollIntoView({ behavior: 'smooth', block: 'end', inline: 'center' });\n\t// \t}\n\t// }\n\n    render() {\n        const { userStore, dogStore } = this.props.stores;\n        const { teams } = userStore;\n\t\tconst { currentTeam } = dogStore;\n\t\tconst { highlight, showAll = true } = this.props;\n        return (\n\t\t\t<div class='row mt-2'>\n\t\t\t\t<div class='w-100 overflow-hidden'>\n\t\t\t\t\t<div\n\t\t\t\t\t\tclass='d-flex flex-row flex-nowrap pb-2 px-1 no-scrollbar'\n\t\t\t\t\t\tstyle='overflow: auto; scroll-snap-type: x mandatory;'\n\t\t\t\t\t>\n\t\t\t\t\t\t{/* <xmp><br /><br /><br /><br />{JSON.stringify(teams, null, 4)}</xmp> */}\n\t\t\t\t\t\t{teams && teams.map((team, idx) => {\n\t\t\t\t\t\t\tlet classNames;\n\t\t\t\t\t\t\tif (teams.length === 1) {\n\t\t\t\t\t\t\t\tclassNames = 'rounded-pill-both';\n\t\t\t\t\t\t\t} else if (idx === 0) {\n\t\t\t\t\t\t\t\tclassNames = 'rounded-pill-left';\n\t\t\t\t\t\t\t} else if (idx + 1 === teams.length) {\n\t\t\t\t\t\t\t\tclassNames = 'rounded-pill-right';\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t<div class='col mb-0 px-0 clearfix' key={team.id}>\n\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\tclass={`btn btn-sm btn-block \n\t\t\t\t\t\t\t\t\t\t\trounded-none ${classNames}\n\t\t\t\t\t\t\t\t\t\t\t${currentTeam === team.id ? 'btn-success' : 'btn-outline-success'}\n\t\t\t\t\t\t\t\t\t\t\ttext-nowrap clearfix`}\n\t\t\t\t\t\t\t\t\t\tstyle='text-overflow: ellipsis; overflow: hidden;'\n\t\t\t\t\t\t\t\t\t\tonClick={() => this.toggleTeam(team.id)}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<i class='fas fa-users' /> {team.name}\n\n\t\t\t\t\t\t\t\t\t\t{highlight && highlight.indexOf(team.id) > -1 && <>\n\t\t\t\t\t\t\t\t\t\t\t{currentTeam === team.id ? <>\n\t\t\t\t\t\t\t\t\t\t\t\t<i class='fas fa-check float-right' />\n\t\t\t\t\t\t\t\t\t\t\t</> : <>\n\t\t\t\t\t\t\t\t\t\t\t\t<div class='spinner-grow text-warning float-right' role='status'>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span class='sr-only'>Loading...</span>\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t<i class='far fa-hand-point-left float-right' style='font-size: 2.0em;' />   \n\t\t\t\t\t\t\t\t\t\t\t</>}\n\t\t\t\t\t\t\t\t\t\t</>}\n\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t{/* {currentTeam === team.id && <ScrollIntoView horizontal={'center'} vertical={'end'} />} */}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t})}\n\t\t\t\t\t</div>\n\t\t\t\t\t{showAll && <div class='row'>\n\t\t\t\t\t\t<div class='col-12 mb-1 px-1 d-flex justify-content-center'>\n\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\tclass={`btn btn-sm rounded-lg btn-link text-nowrap clearfix`}\n\t\t\t\t\t\t\t\tstyle='text-overflow: ellipsis; overflow: hidden;'\n\t\t\t\t\t\t\t\tonClick={this.showAllTeams}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<i class='fas fa-users' /> <Text id='teams.show-all'>Show all</Text>\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>}\n\t\t\t\t</div>\n\t\t\t</div>\n        );\n    }\n}\n\nexport default Teams;\n","import { h, Component } from 'preact';\nimport { observer } from 'mobx-preact';\nimport util from 'preact-util';\n\n// TODO: Do we need mobx? What is mobx doing here?  \n\n@observer\nclass FastListLine extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {};\n        this.containerRef = null;\n    }\n\n    componentWillUnmount() {\n        const { removeIntersectionObserver } = this.props;\n        if (removeIntersectionObserver) {\n            removeIntersectionObserver(this.containerRef);\n        }\n    }\n\n    componentDidMount() {\n        const { addIntersectionObserver } = this.props;\n        if (addIntersectionObserver) {\n            addIntersectionObserver(this.containerRef);\n        }\n    }\n\n    render() {\n        const {\n            wrapperClassNames = '',\n            contentClassNames = '',\n            renderContent,\n            obj = {},\n            idx,\n            dataFields,\n            dataValues,\n            sessionid,\n        } = this.props;\n\n        const dataProperties = {};\n        if (sessionid) {\n            dataProperties.sessionid = sessionid;\n        }\n        dataFields.forEach(e => dataProperties[`data-${e}`] = encodeURI(dataValues[e] || obj[e]));\n\n        return (\n            <div\n                class={`${wrapperClassNames}`}\n                ref={c => this.containerRef = c}\n                data-idx={idx}\n                {...dataProperties}\n            >\n                <div\n                    class={`${contentClassNames}`}\n                    style={`display: block;`}\n                >\n                    {renderContent({\n                        obj,\n                        idx,\n                    })}\n                </div>\n            </div>\n        );\n    }\n}\n\n@observer\nclass FastList extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {};\n    }\n\n    // IntersectionObserver\n    deleteIntersectionObserver = () => {\n        this.intersectionObserver = null;\n    }\n\n    handleIntersection = (entries) => {\n        const { handleIntersection } = this.props;\n        if (typeof(handleIntersection) === 'function') {\n            // console.log('handleIntersection');\n            handleIntersection(entries);\n        }\n        // console.log({ entries });\n        // TODO: Make it possible to run defined functions for entries.\n        // mu.intersectionObserverCallback(entries);\n        entries.forEach((e) => {\n            const { isIntersecting } = e;\n            const { height = 0 } = e.target.dataset;\n            // const childHeight = e.target.childNodes[0].getBoundingClientRect().height;\n            // const targetHeight = e.target.getBoundingClientRect().height;\n            const childHeight = e.target.childNodes[0].offsetHeight;\n            const targetHeight = e.target.offsetHeight;\n            const scrollHeight = e.target.scrollHeight;\n            const currentHeight = Math.max(childHeight, targetHeight, scrollHeight);\n            // console.log({ isIntersecting, height, childHeight, targetHeight, scrollHeight, currentHeight }, e.target);\n\n            if (isIntersecting) {\n                e.target.childNodes[0].style.display=`block`;\n                // TODO: Should be set after image is loaded.\n                // const height = e.target.childNodes[0].clientHeight > e.target.clientHeight ? e.target.childNodes[0].clientHeight : e.target.clientHeight;\n                // console.log(e.target);\n                // console.log('e.target.childNodes[0].offsetHeight:', e.target.childNodes[0].offsetHeight);\n                // console.log('e.target.childNodes[0].scrollHeight:', e.target.childNodes[0].scrollHeight);\n                // console.log('e.target.childNodes[0].clientHeight:', e.target.childNodes[0].clientHeight);\n                // console.log('e.target.offsetHeight:', e.target.offsetHeight);\n                // console.log('e.target.scrollHeight:', e.target.scrollHeight);\n                // console.log('e.target.clientHeight:', e.target.clientHeight);\n                // console.log('height:', height);\n                // e.target.style.height=`${height}px`;\n                e.target.style.minHeight = `${currentHeight > height ? currentHeight : height}px`;\n            } else if (e.target.style.minHeight) {\n                // e.target.style.height = `${currentHeight > height ? currentHeight : height}px`;\n                e.target.style.minHeight = `${currentHeight > height ? currentHeight : height}px`;\n                e.target.childNodes[0].style.display=`none`;\n            }\n        });\n    }\n\n    setupIntersectionObserver = () => {\n        if (!('IntersectionObserver' in window) ||\n            !('IntersectionObserverEntry' in window) ||\n            !('intersectionRatio' in window.IntersectionObserverEntry.prototype)) {\n            return false;\n        }\n\n        const options = {\n            root: null,\n            rootMargin: '100px',\n            threshold: 0.1,\n        };\n        this.intersectionObserver = new IntersectionObserver(this.handleIntersection, options);\n    }\n\n    addIntersectionObserver = (ref) => {\n        if (this.intersectionObserver && ref) {\n            this.intersectionObserver.observe(ref);\n        }\n    }\n    removeIntersectionObserver = (ref) => {\n        if (this.intersectionObserver && ref) {\n            this.intersectionObserver.unobserve(ref);\n        }\n    }\n\n    componentWillMount() {\n        this.setupIntersectionObserver();\n    }\n\n    componentWillUnmount() {\n        this.deleteIntersectionObserver();\n    }\n\n    render() {\n        const {\n            data = [],\n            wrapperClassNames = 'row pb-4 bg-light',\n            contentClassNames = `col-12 col-sm-8 col-lg-6 offset-sm-2 offset-lg-3 mb-0 position-relative rounded rounded-lg py-3 shadow-sm`,\n            renderContent = (e) => <>Missing render function!</>,\n            dataFields = [],\n            dataValues = {},\n        } = this.props;\n        \n        return (\n            <div class='w-100'>\n                {data && data.filter(e => util.isObject(e)).map((obj, idx) => {\n                    const wrapperClasses = obj.hasOwnProperty('wrapperClassNames') ? obj.wrapperClassNames : wrapperClassNames;\n                    const contentClasses = obj.hasOwnProperty('contentClassNames') ? obj.contentClassNames : contentClassNames;\n                    return (<>\n                        <FastListLine\n                            key={`fastline-${idx}-${obj.id}`}\n                            obj={obj}\n                            idx={idx}\n                            addIntersectionObserver={this.addIntersectionObserver}\n                            removeIntersectionObserver={this.removeIntersectionObserver}\n                            wrapperClassNames={wrapperClasses}\n                            contentClassNames={contentClasses}\n                            renderContent={renderContent}\n                            dataFields={dataFields}\n                            dataValues={dataValues}\n                        />\n                    </>);\n                })}\n            </div>\n        );\n    };\n}\n\nexport default FastList;\n"],"sourceRoot":""}