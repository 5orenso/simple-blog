{"version":3,"sources":["webpack:///./routes/users/subscriptions.js","webpack:///./components/error/index.js"],"names":["MARGIN_TOP","mu","marginTop","MARGIN_BOTTOM","marginBottom","SUB_MENU_MARGIN_TOP","subMenuMarginTop","Profile","observer","Component","constructor","props","super","resetEmailMessage","userStore","this","stores","updateField","resetEmailError","toggleSetting","async","field","user","settings","updateSetting","subscriptionCreate","paypalStore","setState","paypalLoading","getInfo","subscriptionCancel","e","id","target","closest","dataset","planId","subscriptionDetail","subscription","payPalSubscriptionId","response","setSubscriptionPaypal","data","toggleCancel","showCancel","state","toggleDetails","showDetails","time","Date","now","count","getPaypalButton","subscriptionPaypal","isActive","subscriber","billing_info","name","last_payment","class","email_address","given_name","surname","util","isoDate","next_billing_time","amount","currency_code","value","type","onClick","disabled","data-id","role","aria-hidden","startDate","approveLinkObject","href","rel","abortSubscriptionApprove","componentDidMount","verifyEmailToken","verifyEmail","token","render","scrolledDown","appState","darkmode","isAdmin","teams","findTeams","getApiServer","getJwtToken","style","Error","componentDidUpdate","remove","clearTimeout","removeTimer","setTimeout","componentWillUnmount","message","icon","onclick","className"],"mappings":"qMAMA,MAAMA,EAAaC,IAAGC,WAAU,GAC1BC,EAAgBF,IAAGG,eACnBC,EAAsBJ,IAAGK,mB,IAMzBC,EADLC,Y,EAAD,cACsBC,YACrBC,YAAYC,GAAO,MACZC,MAAMD,GADM,YAQnBE,kBAAoB,KACnB,MAAM,UAAEC,GAAcC,KAAKJ,MAAMK,OACjCF,EAAUG,YAAY,eAAgB,IACtCH,EAAUG,YAAY,mBAAoB,KAXxB,KAcnBC,gBAAkB,KACjB,MAAM,UAAEJ,GAAcC,KAAKJ,MAAMK,OACjCF,EAAUG,YAAY,aAAc,IACpCH,EAAUG,YAAY,iBAAkB,KAjBtB,KAoBnBE,cAAeC,eAAOC,GACf,MAAM,UAAEP,GAAc,EAAKH,MAAMK,QACjC,KAAEM,GAASR,GACX,SAAES,EAAW,IAAOD,QACdR,EAAUU,cAAc,CAAE,CAAE,YAAWH,GAA8B,IAApBE,EAASF,GAAe,EAAI,KAxBvE,KA2BnBI,mBAAqBL,iBACpB,MAAM,YAAEM,EAAF,UAAeZ,GAAc,EAAKH,MAAMK,OAC9C,EAAKW,SAAS,CAAEC,eAAe,UACzBF,EAAYD,mBAAmB,UAC/BX,EAAUe,UAChB,EAAKF,SAAS,CAAEC,eAAe,KAhCb,KAmCnBE,mBAAqBV,eAAOW,GAC3B,MAAM,GAAEC,GAAOD,EAAEE,OAAOC,QAAQ,UAAUC,SACpC,YAAET,EAAF,UAAeZ,GAAc,EAAKH,MAAMK,aACxCU,EAAYI,mBAAmB,CAAEM,OAAQJ,UACzClB,EAAUe,WAvCE,KA0CnBQ,mBAAqBjB,iBACpB,MAAM,YAAEM,EAAF,UAAeZ,GAAc,EAAKH,MAAMK,QACxC,KAAEM,EAAO,IAAOR,GAChB,aAAEwB,GAAiBhB,EAEzB,GAAIgB,EAAaC,qBAAsB,CACtC,MAAMC,QAAiBd,EAAYW,mBAAmB,CAAEL,GAAIM,EAAaC,uBACzEzB,EAAU2B,sBAAsBD,EAASE,YACnC5B,EAAUe,YAlDC,KAsDnBc,aAAe,KACd,MAAM,WAAEC,GAAe7B,KAAK8B,MAC5B9B,KAAKY,SAAS,CACbiB,YAAaA,KAzDI,KA4DnBE,cAAgB,KACf,MAAM,YAAEC,GAAgBhC,KAAK8B,MACxBE,GACJhC,KAAKsB,qBAENtB,KAAKY,SAAS,CACboB,aAAcA,KAhEThC,KAAK8B,MAAQ,CACTG,KAAMC,KAAKC,MACpBC,MAAO,IAkETC,kBACC,MAAM,cAAExB,EAAF,WAAiBgB,EAAjB,YAA6BG,GAAgBhC,KAAK8B,OAClD,UAAE/B,GAAcC,KAAKJ,MAAMK,QAC3B,KAAEM,EAAO,GAAT,mBAAa+B,EAAqB,IAAOvC,GACzC,aAAEwB,EAAe,IAAOhB,EAE9B,GAAIgB,GAAgBA,EAAagB,SAAU,CAC1C,GAAIP,EAAa,CAChB,MAAM,WAAEQ,EAAa,GAAf,aAAmBC,EAAe,IAAOH,GACzC,KAAEI,EAAO,IAAOF,GAChB,aAAEG,EAAe,IAAOF,EAC9B,OAAQ,mBACP,8CACA,qBAAOG,MAAM,gCACZ,yBACC,sBAAI,+BAAc,sBAAKJ,EAAWK,gBAClC,sBAAI,8BAAa,sBAAKH,EAAKI,WAAV,IAAuBJ,EAAKK,UAC7C,sBAAI,sCAAqB,sBAAKC,IAAKC,QAAQR,EAAaS,qBACxD,sBAAI,sCAAqB,sBACvBF,IAAKC,QAAQN,EAAaV,MADH,IACWU,EAAaQ,QAAU,mBACxDR,EAAaQ,OAAOC,cADoC,IACpBT,EAAaQ,OAAOE,WAM5DxB,EAAa,mBACb,mBAAKe,MAAM,QAAX,sDAGA,sBAAQU,KAAK,SAASV,MAAM,yBAAyBW,QAASvD,KAAK4B,aAAc4B,SAAU3C,GAA3F,iDAGA,sBAAQyC,KAAK,SAASV,MAAM,6BAA6BW,QAASvD,KAAKe,mBAAoByC,SAAU3C,EAAe4C,UAASlC,EAAaC,sBAA1I,uBACsBX,GAAiB,mBACrC,oBAAM+B,MAAM,mCAAmCc,KAAK,SAASC,cAAY,SACzE,oBAAMf,MAAM,WAAZ,iBAGG,mBACL,mBAAKA,MAAM,QACV,sBAAQU,KAAK,SAASV,MAAM,mCAAmCW,QAASvD,KAAK+B,cAAeyB,SAAU3C,GAAtG,yBAID,mBAAK+B,MAAM,wBACV,qBAAOA,MAAM,sBAAsBW,QAASvD,KAAK4B,cAAjD,0BAOJ,OAAQ,mBACP,8CAEA,mBAAKgB,MAAM,sCACV,iBAAGA,MAAM,sBAEV,mBAAKA,MAAM,UACV,mBAAKA,MAAM,qCACV,iBAAGA,MAAM,kBAEV,mBAAKA,MAAM,gCAAX,qCACoCI,IAAKC,QAAQ1B,EAAaqC,WAAW,uBACxE,qBAAOhB,MAAM,sBAAsBW,QAASvD,KAAK+B,eAAjD,0BAKF,mBAAKa,MAAM,QACV,kGAGA,0FAOH,GAAIrB,GAAgBA,EAAasC,kBAAmB,CACnD,MAAM,KAAEC,GAASvC,EAAasC,kBAC9B,OAAQ,mBACP,oEAEA,mBAAKjB,MAAM,wBACV,mBAAKA,MAAM,OACV,mBAAKA,MAAM,cACV,mBAAKA,MAAM,mDAAX,0BACwB,iBAAGA,MAAM,gCAGlC,mBAAKA,MAAM,cACV,mBAAKA,MAAM,qDAAX,uBAID,mBAAKA,MAAM,cACV,mBAAKA,MAAM,+CAAX,cAOH,mBAAKA,MAAM,QACV,+FAGA,sFAC+D,uBAD/D,8DAKD,iBAAGA,MAAM,mCAAmCkB,KAAMA,EAAM5C,OAAO,SAAS6C,IAAI,cAA5E,iCAGA,sBAAQnB,MAAM,gCAAgCW,QAASvD,KAAKgE,0BAA5D,yBAMF,OAAQ,mBACP,mBAAKpB,MAAM,QACV,oEACA,uBACC,mBAAKA,MAAM,sCACV,iBAAGA,MAAM,sBAEV,gPAIA,6IAGA,6JAGA,2EAKD,8CACA,qBAAOA,MAAM,kBACZ,yBACC,sBACC,iCACA,kBAAIA,MAAM,eAAV,SACA,kBAAIA,MAAM,eAAV,aAGF,yBACC,sBACC,4CACA,kBAAIA,MAAM,eAAc,iBAAGA,MAAM,+BACjC,kBAAIA,MAAM,eAAc,iBAAGA,MAAM,gCAElC,sBACC,+CACA,kBAAIA,MAAM,eAAc,iBAAGA,MAAM,+BACjC,kBAAIA,MAAM,eAAc,iBAAGA,MAAM,gCAElC,sBACC,qCACA,kBAAIA,MAAM,eAAc,iBAAGA,MAAM,+BACjC,kBAAIA,MAAM,eAAc,iBAAGA,MAAM,gCAElC,sBACC,sCACA,kBAAIA,MAAM,eAAc,iBAAGA,MAAM,+BACjC,kBAAIA,MAAM,eAAc,iBAAGA,MAAM,gCAElC,sBACC,uCACA,kBAAIA,MAAM,eAAc,iBAAGA,MAAM,+BACjC,kBAAIA,MAAM,eAAc,iBAAGA,MAAM,gCAElC,sBACC,0CACA,kBAAIA,MAAM,eAAc,iBAAGA,MAAM,+BACjC,kBAAIA,MAAM,eAAc,iBAAGA,MAAM,gCAElC,sBACC,+DACA,kBAAIA,MAAM,eAAc,iBAAGA,MAAM,+BACjC,kBAAIA,MAAM,eAAc,iBAAGA,MAAM,gCAElC,sBACC,gDACA,kBAAIA,MAAM,eAAc,iBAAGA,MAAM,+BACjC,kBAAIA,MAAM,eAAc,iBAAGA,MAAM,gCAElC,sBACC,mDACA,kBAAIA,MAAM,eAAc,iBAAGA,MAAM,8BACjC,kBAAIA,MAAM,eAAc,iBAAGA,MAAM,gCAElC,sBACC,wCACA,kBAAIA,MAAM,eAAc,iBAAGA,MAAM,8BACjC,kBAAIA,MAAM,eAAc,iBAAGA,MAAM,gCAElC,sBACC,uCACA,kBAAIA,MAAM,eAAc,iBAAGA,MAAM,8BACjC,kBAAIA,MAAM,eAAc,iBAAGA,MAAM,gCAElC,sBACC,sCACA,kBAAIA,MAAM,eAAc,iBAAGA,MAAM,8BACjC,kBAAIA,MAAM,eAAc,iBAAGA,MAAM,gCAElC,sBACC,uDACA,kBAAIA,MAAM,eAAc,iBAAGA,MAAM,8BACjC,kBAAIA,MAAM,eAAc,iBAAGA,MAAM,gCAElC,sBACC,sCACA,kBAAIA,MAAM,eAAc,iBAAGA,MAAM,8BACjC,kBAAIA,MAAM,eAAc,iBAAGA,MAAM,gCAElC,sBACC,8CACA,kBAAIA,MAAM,eAAc,iBAAGA,MAAM,8BACjC,kBAAIA,MAAM,eAAc,iBAAGA,MAAM,gCAElC,sBACC,4CACA,kBAAIA,MAAM,eAAc,iBAAGA,MAAM,8BACjC,kBAAIA,MAAM,eAAc,iBAAGA,MAAM,gCAElC,sBACC,sDACA,kBAAIA,MAAM,eAAc,iBAAGA,MAAM,8BACjC,kBAAIA,MAAM,eAAc,iBAAGA,MAAM,mCAOrC,mBAAKA,MAAM,wBACV,mBAAKA,MAAM,OACV,mBAAKA,MAAM,cACV,mBAAKA,MAAM,qDAAX,2BAID,mBAAKA,MAAM,cACV,mBAAKA,MAAM,+CAAX,uBAID,mBAAKA,MAAM,cACV,mBAAKA,MAAM,+CAAX,cAOH,sBAAQU,KAAK,SAASV,MAAM,wCAAwCW,QAASvD,KAAKU,mBAAoB8C,SAAU3C,GAAhH,qCACoCA,GAAiB,mBACnD,oBAAM+B,MAAM,mCAAmCc,KAAK,SAASC,cAAY,SACzE,oBAAMf,MAAM,WAAZ,iBAMJqB,oBACC,MAAM,UAAElE,GAAcC,KAAKJ,MAAMK,OAE7BD,KAAKJ,MAAMsE,kBACdnE,EAAUoE,YAAY,CAAEC,MAAOpE,KAAKJ,MAAMsE,mBAI5CG,SACC,MAAM,aAAEC,GAAiBtE,KAAKJ,OACxB,UAAEG,EAAF,SAAawE,GAAavE,KAAKJ,MAAMK,QACrC,SAAEuE,GAAaD,GACf,KAAEhE,EAAF,QAAoEkE,GAAY1E,GAChF,MAAE2E,EAAF,SAASlE,EAAW,IAAOD,EAChBR,EAAU4E,UAAUD,GACnB1B,IAAK4B,eACN5B,IAAK6B,cACtB,OACC,mBAAKjC,MAAM,kBAAkBkC,MAAQ,kBAAiB1F,kBAA8BH,MACnF,mBAAK2D,MAAM,gBAAgBkC,MAAQ,eAAcR,EAAe,EAAI,EAAIhF,wBAA0CkF,EAAW,UAAY,gDACxI,mBAAK5B,MAAM,4CACV,wBAAM,iBAAGkB,KAAK,SAASlB,MAAM,iCAAgC,iBAAGA,MAAM,gBAAhE,IAAiF,YAAC,IAAD,CAAM3B,GAAG,eAAT,iBAExF,mBAAK2B,MAAM,4CACV,wBAAM,iBAAGkB,KAAK,kBAAkBlB,MAAM,iCAAgC,iBAAGA,MAAM,qBAAzE,IAA+F,YAAC,IAAD,CAAM3B,GAAG,kBAAT,oBAEtG,mBAAK2B,MAAM,yEACV,wBAAM,iBAAGkB,KAAK,sBAAsBlB,MAAM,+BAA8B,iBAAGA,MAAM,qBAA3E,IAAiG,YAAC,IAAD,CAAM3B,GAAG,uBAAT,iBAExG,mBAAK2B,MAAM,4CACV,wBAAM,iBAAGkB,KAAK,sBAAsBlB,MAAM,iCAAgC,iBAAGA,MAAM,gBAA7E,IAA8F,YAAC,IAAD,CAAM3B,GAAG,sBAAT,qBAIrGwD,GAAW,mBAAK7B,MAAM,uBACtB,mBAAKA,MAAM,UACT5C,KAAKqC,yB,EASG7C,a,mGC/YTuF,EADLtF,Y,EAAD,cACoBC,YAChBsF,qBACI,MAAM,OAAEC,EAAS,UAAajF,KAAKJ,MACnCsF,aAAalF,KAAKmF,aAClBnF,KAAKmF,YAAcC,WAAW,IAAMH,IAPnB,KAUrBI,uBACIH,aAAalF,KAAKmF,aAGtBd,SACI,MAAM,QAAEiB,EAAF,KAAWC,EAAX,OAAiBN,EAAS,UAAajF,KAAKJ,MAElD,OAAK0F,EAID,mBAAK1C,MAAM,aACP,mBAAKA,MAAM,0BACP,mBAAKA,MAAQ,UACT,iBAAGkB,KAAK,IAAI0B,QAASP,EAAQrC,MAAM,eAC/B,iBAAG6C,UAAU,kBAEhBF,GAAQ,kBAAI3C,MAAM,mBAAkB,iBAAGA,MAAO2C,KAC9CD,GAAW,wBAAOA,MAVxB,O,EAkBJP","file":"93.chunk.e5a70.esm.js","sourcesContent":["import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport { Text, Localizer } from 'preact-i18n';\n\nimport mu from '../../lib/musher-util';\nconst MARGIN_TOP = mu.marginTop(true);\nconst MARGIN_BOTTOM = mu.marginBottom();\nconst SUB_MENU_MARGIN_TOP = mu.subMenuMarginTop();\n\nimport Error from '../../components/error';\nimport Message from '../../components/message';\n\n@observer\nclass Profile extends Component {\n\tconstructor(props) {\n        super(props);\n        this.state = {\n            time: Date.now(),\n\t\t\tcount: 10\n        };\n    }\n\n\tresetEmailMessage = () => {\n\t\tconst { userStore } = this.props.stores;\n\t\tuserStore.updateField('emailMessage', '');\n\t\tuserStore.updateField('emailMessageIcon', '');\n\t}\n\n\tresetEmailError = () => {\n\t\tconst { userStore } = this.props.stores;\n\t\tuserStore.updateField('emailError', '');\n\t\tuserStore.updateField('emailErrorIcon', '');\n\t}\n\n\ttoggleSetting= async (field) => {\n        const { userStore } = this.props.stores;\n\t\tconst { user } = userStore;\n\t\tconst { settings = {} } = user;\n        await userStore.updateSetting({ [`settings.${field}`]: settings[field] === 1 ? 0 : 1 });\n    }\n\n\tsubscriptionCreate = async () => {\n\t\tconst { paypalStore, userStore } = this.props.stores;\n\t\tthis.setState({ paypalLoading: true });\n\t\tawait paypalStore.subscriptionCreate({});\n\t\tawait userStore.getInfo();\n\t\tthis.setState({ paypalLoading: false });\n\t}\n\n\tsubscriptionCancel = async (e) => {\n\t\tconst { id } = e.target.closest('button').dataset;\n\t\tconst { paypalStore, userStore } = this.props.stores;\n\t\tawait paypalStore.subscriptionCancel({ planId: id });\n\t\tawait userStore.getInfo();\n\t}\n\n\tsubscriptionDetail = async () => {\n\t\tconst { paypalStore, userStore } = this.props.stores;\n\t\tconst { user = {} } = userStore;\n\t\tconst { subscription } = user;\n\n\t\tif (subscription.payPalSubscriptionId) {\n\t\t\tconst response = await paypalStore.subscriptionDetail({ id: subscription.payPalSubscriptionId });\n\t\t\tuserStore.setSubscriptionPaypal(response.data);\n\t\t\tawait userStore.getInfo();\n\t\t}\n\t}\n\n\ttoggleCancel = () => {\n\t\tconst { showCancel } = this.state;\n\t\tthis.setState({\n\t\t\tshowCancel: !showCancel,\n\t\t});\n\t}\n\ttoggleDetails = () => {\n\t\tconst { showDetails } = this.state;\n\t\tif (!showDetails) {\n\t\t\tthis.subscriptionDetail();\n\t\t}\n\t\tthis.setState({\n\t\t\tshowDetails: !showDetails,\n\t\t});\n\t}\n\n\tgetPaypalButton() {\n\t\tconst { paypalLoading, showCancel, showDetails } = this.state;\n\t\tconst { userStore } = this.props.stores;\n\t\tconst { user = {}, subscriptionPaypal = {} } = userStore;\n\t\tconst { subscription = {} } = user;\n\n\t\tif (subscription && subscription.isActive) {\n\t\t\tif (showDetails) {\n\t\t\t\tconst { subscriber = {}, billing_info = {} } = subscriptionPaypal;\n\t\t\t\tconst { name = {} } = subscriber;\n\t\t\t\tconst { last_payment = {} } = billing_info;\n\t\t\t\treturn (<>\n\t\t\t\t\t<h5>Premium subscription</h5>\n\t\t\t\t\t<table class='table table-sm table-striped'>\n\t\t\t\t\t\t<tbody>\n\t\t\t\t\t\t\t<tr><th>Email</th><td>{subscriber.email_address}</td></tr>\n\t\t\t\t\t\t\t<tr><th>Name</th><td>{name.given_name} {name.surname}</td></tr>\n\t\t\t\t\t\t\t<tr><th>Next billing</th><td>{util.isoDate(billing_info.next_billing_time)}</td></tr>\n\t\t\t\t\t\t\t<tr><th>Last payment</th><td>\n\t\t\t\t\t\t\t\t{util.isoDate(last_payment.time)} {last_payment.amount && <>\n\t\t\t\t\t\t\t\t\t{last_payment.amount.currency_code} {last_payment.amount.value}\n\t\t\t\t\t\t\t\t</>}\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t</td></tr>\n\t\t\t\t\t\t</tbody>\n\t\t\t\t\t</table>\n\t\t\t\t\t{showCancel ? <>\n\t\t\t\t\t\t<div class='mb-4'>\n\t\t\t\t\t\t\tAre you sure you want to cancel your subscription?\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<button type='button' class='btn btn-success btn-sm' onClick={this.toggleCancel} disabled={paypalLoading}>\n\t\t\t\t\t\t\tNo, I want to continue as a Premium member :)\n\t\t\t\t\t\t</button>\n\t\t\t\t\t\t<button type='button' class='btn btn-danger btn-sm ml-5' onClick={this.subscriptionCancel} disabled={paypalLoading} data-id={subscription.payPalSubscriptionId}>\n\t\t\t\t\t\t\tCancel subscription {paypalLoading && <>\n\t\t\t\t\t\t\t\t<span class='spinner-border spinner-border-sm' role='status' aria-hidden='true' />\n\t\t\t\t\t\t\t\t<span class='sr-only'>Loading...</span>\n  \t\t\t\t\t\t\t</>}\n\t\t\t\t\t\t</button>\n\t\t\t\t\t</> : <>\n\t\t\t\t\t\t<div class='mb-4'>\n\t\t\t\t\t\t\t<button type='button' class='btn btn-primary btn-block btn-lg' onClick={this.toggleDetails} disabled={paypalLoading}>\n\t\t\t\t\t\t\t\tBack to subscription\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class='mt-4 pt-5 text-right'>\n\t\t\t\t\t\t\t<small class='font-weight-lighter' onClick={this.toggleCancel}>\n\t\t\t\t\t\t\t\tCancel subscription\n\t\t\t\t\t\t\t</small>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</>}\n\t\t\t\t</>);\n\t\t\t}\n\t\t\treturn (<>\n\t\t\t\t<h5>Premium subscription</h5>\n\n\t\t\t\t<div class='display-1 text-center text-success'>\n\t\t\t\t\t<i class='fas fa-user-plus' />\n\t\t\t\t</div>\n\t\t\t\t<div class='d-flex'>\n\t\t\t\t\t<div class='display-4 text-success float-left'>\n\t\t\t\t\t\t<i class='fas fa-check' />\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class='align-self-stretch ml-3 pt-3'>\n\t\t\t\t\t\tActive premium subscription since {util.isoDate(subscription.startDate)}<br />\n\t\t\t\t\t\t<small class='font-weight-lighter' onClick={this.toggleDetails}>\n\t\t\t\t\t\t\tSubscription details \n\t\t\t\t\t\t</small>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class='mt-4'>\n\t\t\t\t\t<p>\n\t\t\t\t\t\tThank you so much for beeing a Premium member and supporting this app 😍.\n\t\t\t\t\t</p>\n\t\t\t\t\t<p>\n\t\t\t\t\t\tIf you have any questions, feel free to contact us at Facebook.\n\t\t\t\t\t</p>\n\t\t\t\t</div>\n\t\t\t</>);\n\t\t}\n\n\t\tif (subscription && subscription.approveLinkObject) {\n\t\t\tconst { href } = subscription.approveLinkObject;\n\t\t\treturn (<>\n\t\t\t\t<h5>Become a Premium member of The Musher app.</h5>\n\n\t\t\t\t<div class='container-fluid mt-4'>\n\t\t\t\t\t<div class='row'>\n\t\t\t\t\t\t<div class='col-4 px-0'>\n\t\t\t\t\t\t\t<div class='border h-100 rounded-lg p-3 mr-2 border-success'>\n\t\t\t\t\t\t\t\t1. Create subscription <i class='fas fa-check text-success' />\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class='col-4 px-0'>\n\t\t\t\t\t\t\t<div class='border h-100 rounded-lg p-3 mr-2 font-weight-bold'>\n\t\t\t\t\t\t\t\t2. Approve payment\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class='col-4 px-0'>\n\t\t\t\t\t\t\t<div class='border h-100 rounded-lg p-3 mr-2 text-muted'>\n\t\t\t\t\t\t\t\t3. Done\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\n\t\t\t\t<div class='mt-4'>\n\t\t\t\t\t<p>\n\t\t\t\t\t\tYou are just one step away from a super-duper Premium subscription 😍.\n\t\t\t\t\t</p>\n\t\t\t\t\t<p>\n\t\t\t\t\t\tThe final step is too approve your subscription at Paypal.com.<br />\n\t\t\t\t\t\tClick this button to open PayPal in a new browser window.\n\t\t\t\t\t</p>\n\t\t\t\t</div>\n\t\t\t\t<a class='btn btn-primary btn-lg btn-block' href={href} target='_blank' rel='noreferrer'>\n\t\t\t\t\tApprove payment at PayPal.com\n\t\t\t\t</a>\n\t\t\t\t<button class='btn btn-link btn-sm btn-block' onClick={this.abortSubscriptionApprove}>\n\t\t\t\t\tCancel and try again\n\t\t\t\t</button>\n\t\t\t</>);\n\t\t}\n\n\t\treturn (<>\n\t\t\t<div class='mb-4'>\n\t\t\t\t<h5>Become a Premium member of The Musher app.</h5>\n\t\t\t\t<div>\n\t\t\t\t\t<div class='display-1 text-center text-success'>\n\t\t\t\t\t\t<i class='fas fa-user-plus' />\n\t\t\t\t\t</div>\n\t\t\t\t\t<p>\n\t\t\t\t\t\tBy becoming a Premium member of The Musher app you support the development and operations of this app.\n\t\t\t\t\t\tIt's a lot of work maintaining the source code, servers and databases, so we are very grateful for your support.\n\t\t\t\t\t</p>\n\t\t\t\t\t<p>\n\t\t\t\t\t\tIn addition to supporting us you also get access to premium features which is very useful for dog training and care.\n\t\t\t\t\t</p>\n\t\t\t\t\t<p>\n\t\t\t\t\t\tNew features will be added continously and you as a Premium member can be a part of the decisions on which features should be added.\n\t\t\t\t\t</p>\n\t\t\t\t\t<p>\n\t\t\t\t\t\tSubscription payment is supported via Paypal.com.\n\t\t\t\t\t</p>\n\t\t\t\t</div>\n\n\t\t\t\t<h5>Some of the features</h5>\n\t\t\t\t<table class='table table-sm'>\n\t\t\t\t\t<thead>\n\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t<th>Feature</th>\n\t\t\t\t\t\t\t<th class='text-center'>Basic</th>\n\t\t\t\t\t\t\t<th class='text-center'>Premium</th>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t</thead>\n\t\t\t\t\t<tbody>\n\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t<td>Social interaction</td>\n\t\t\t\t\t\t\t<td class='text-center'><i class='fas fa-check text-success' /></td>\n\t\t\t\t\t\t\t<td class='text-center'><i class='fas fa-check text-success' /></td>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t<td>Multiple team members</td>\n\t\t\t\t\t\t\t<td class='text-center'><i class='fas fa-check text-success' /></td>\n\t\t\t\t\t\t\t<td class='text-center'><i class='fas fa-check text-success' /></td>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t<td>Dog history</td>\n\t\t\t\t\t\t\t<td class='text-center'><i class='fas fa-check text-success' /></td>\n\t\t\t\t\t\t\t<td class='text-center'><i class='fas fa-check text-success' /></td>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t<td>Dog todolist</td>\n\t\t\t\t\t\t\t<td class='text-center'><i class='fas fa-check text-success' /></td>\n\t\t\t\t\t\t\t<td class='text-center'><i class='fas fa-check text-success' /></td>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t<td>Public tracks</td>\n\t\t\t\t\t\t\t<td class='text-center'><i class='fas fa-check text-success' /></td>\n\t\t\t\t\t\t\t<td class='text-center'><i class='fas fa-check text-success' /></td>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t<td>Workout tracking</td>\n\t\t\t\t\t\t\t<td class='text-center'><i class='fas fa-check text-success' /></td>\n\t\t\t\t\t\t\t<td class='text-center'><i class='fas fa-check text-success' /></td>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t<td>Workout integrations (Garmin, Strava)</td>\n\t\t\t\t\t\t\t<td class='text-center'><i class='fas fa-check text-success' /></td>\n\t\t\t\t\t\t\t<td class='text-center'><i class='fas fa-check text-success' /></td>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t<td>Basic workout analysis</td>\n\t\t\t\t\t\t\t<td class='text-center'><i class='fas fa-check text-success' /></td>\n\t\t\t\t\t\t\t<td class='text-center'><i class='fas fa-check text-success' /></td>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t<td>Advanced workout analysis</td>\n\t\t\t\t\t\t\t<td class='text-center'><i class='fas fa-times text-danger' /></td>\n\t\t\t\t\t\t\t<td class='text-center'><i class='fas fa-check text-success' /></td>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t<td>Workout trends</td>\n\t\t\t\t\t\t\t<td class='text-center'><i class='fas fa-times text-danger' /></td>\n\t\t\t\t\t\t\t<td class='text-center'><i class='fas fa-check text-success' /></td>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t<td>Workout plans</td>\n\t\t\t\t\t\t\t<td class='text-center'><i class='fas fa-times text-danger' /></td>\n\t\t\t\t\t\t\t<td class='text-center'><i class='fas fa-check text-success' /></td>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t<td>Team fitness</td>\n\t\t\t\t\t\t\t<td class='text-center'><i class='fas fa-times text-danger' /></td>\n\t\t\t\t\t\t\t<td class='text-center'><i class='fas fa-check text-success' /></td>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t<td>Compare your team with others</td>\n\t\t\t\t\t\t\t<td class='text-center'><i class='fas fa-times text-danger' /></td>\n\t\t\t\t\t\t\t<td class='text-center'><i class='fas fa-check text-success' /></td>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t<td>Race planner</td>\n\t\t\t\t\t\t\t<td class='text-center'><i class='fas fa-times text-danger' /></td>\n\t\t\t\t\t\t\t<td class='text-center'><i class='fas fa-check text-success' /></td>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t<td>Race ready indicator</td>\n\t\t\t\t\t\t\t<td class='text-center'><i class='fas fa-times text-danger' /></td>\n\t\t\t\t\t\t\t<td class='text-center'><i class='fas fa-check text-success' /></td>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t<td>Weather from yr.no</td>\n\t\t\t\t\t\t\t<td class='text-center'><i class='fas fa-times text-danger' /></td>\n\t\t\t\t\t\t\t<td class='text-center'><i class='fas fa-check text-success' /></td>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t<td>Premium badge inside the app</td>\n\t\t\t\t\t\t\t<td class='text-center'><i class='fas fa-times text-danger' /></td>\n\t\t\t\t\t\t\t<td class='text-center'><i class='fas fa-check text-success' /></td>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t</tbody>\n\t\t\t\t</table>\n\t\t\t</div>\n\n\n\t\t\t<div class='container-fluid mt-4'>\n\t\t\t\t<div class='row'>\n\t\t\t\t\t<div class='col-4 px-0'>\n\t\t\t\t\t\t<div class='border h-100 rounded-lg p-3 mr-2 font-weight-bold'>\n\t\t\t\t\t\t\t1. Create subscription\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class='col-4 px-0'>\n\t\t\t\t\t\t<div class='border h-100 rounded-lg p-3 mr-2 text-muted'>\n\t\t\t\t\t\t\t2. Approve payment\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class='col-4 px-0'>\n\t\t\t\t\t\t<div class='border h-100 rounded-lg p-3 mr-2 text-muted'>\n\t\t\t\t\t\t\t3. Done\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<button type='button' class='btn btn-success btn-lg btn-block mt-4' onClick={this.subscriptionCreate} disabled={paypalLoading}>\n\t\t\t\tSubscripe to Premium / Monthly $5 {paypalLoading && <>\n\t\t\t\t\t<span class='spinner-border spinner-border-sm' role='status' aria-hidden='true' />\n\t\t\t\t\t<span class='sr-only'>Loading...</span>\n\t\t\t\t</>}\n\t\t\t</button>\t\t\t\t\t\t\t\t\n\t\t</>);\n\t}\n\n\tcomponentDidMount() {\n\t\tconst { userStore } = this.props.stores;\n\n\t\tif (this.props.verifyEmailToken) {\n\t\t\tuserStore.verifyEmail({ token: this.props.verifyEmailToken });\n\t\t}\n\t}\n\n\trender() {\n\t\tconst { scrolledDown } = this.props;\n\t\tconst { userStore, appState } = this.props.stores;\n\t\tconst { darkmode } = appState;\n\t\tconst { user, emailMessage, emailError, emailMessageIcon, emailErrorIcon, isAdmin } = userStore;\n\t\tconst { teams, settings = {} } = user;\n\t\tconst allTeams = userStore.findTeams(teams);\n\t\tconst apiServer = util.getApiServer();\n\t\tconst jwtToken = util.getJwtToken();\n\t\treturn (\n\t\t\t<div class='container-fluid' style={`margin-bottom: ${MARGIN_BOTTOM}; margin-top: ${MARGIN_TOP};`}>\n\t\t\t\t<div class='row fixed-top' style={`margin-top: ${scrolledDown > 0 ? 0 : SUB_MENU_MARGIN_TOP}; background-color: ${darkmode ? '#191d21' : '#f8f9fa'}; transition: all 0.3s ease-in-out;`}>\n\t\t\t\t\t<div class='col text-center subtopmenu text-overflow'>\n\t\t\t\t\t\t<nobr><a href='/users' class='text-secondary stretched-link'><i class='fas fa-user' /> <Text id='users.title'>Din profil</Text></a></nobr>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class='col text-center subtopmenu text-overflow'>\n\t\t\t\t\t\t<nobr><a href='/users/settings' class='text-secondary stretched-link'><i class='fas fa-sliders-h' /> <Text id='users.settings'>Innstillinger</Text></a></nobr>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class='col text-center subtopmenu text-overflow border-bottom border-primary'>\n\t\t\t\t\t\t<nobr><a href='/users/subscription' class='text-primary stretched-link'><i class='fas fa-signature' /> <Text id='users.subscriptions'>Abonnement</Text></a></nobr>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class='col text-center subtopmenu text-overflow'>\n\t\t\t\t\t\t<nobr><a href='/users/integrations' class='text-secondary stretched-link'><i class='fas fa-plug' /> <Text id='users.integrations'>Integrasjoner</Text></a></nobr>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\n\t\t\t\t{isAdmin && <div class='row border-top mt-5'>\n\t\t\t\t\t<div class='col-12'>\n\t\t\t\t\t\t{this.getPaypalButton()}\n\t\t\t\t\t</div>\n\t\t\t\t</div>}\n\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nexport default Profile;\n","import { h, Component } from 'preact';\nimport { observer } from 'mobx-preact';\n\nconst ERROR_DISPLAY_MS = 10000;\n\n@observer\nclass Error extends Component {\n    componentDidUpdate() {\n        const { remove = () => {} } = this.props;\n        clearTimeout(this.removeTimer);\n        this.removeTimer = setTimeout(() => remove(), ERROR_DISPLAY_MS);\n    }\n\n    componentWillUnmount() {\n        clearTimeout(this.removeTimer);\n    }\n\n    render() {\n        const { message, icon, remove = () => {} } = this.props;\n\n        if (!message) {\n            return '';\n        }\n        return (\n            <div class='container'>\n                <div class='alert alert-danger row'>\n                    <div class={`col-12`}>\n                        <a href='#' onclick={remove} class='float-right'>\n                            <i className='fas fa-times' />\n                        </a>\n                        {icon && <h1 class='float-left mr-3'><i class={icon} /></h1>}\n                        {message && <span>{message}</span>}\n                    </div>\n                </div>\n            </div>\n        );\n    }\n}\n\nexport default Error;\n"],"sourceRoot":""}