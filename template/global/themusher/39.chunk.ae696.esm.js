(window.webpackJsonp=window.webpackJsonp||[]).push([[39],{"B+py":function(e,t,s){"use strict";s.r(t),function(e){var o,i=s("hosL"),n=s("Utv1"),a=s("/eY4"),c=s("Y3FI"),l=s("go65"),r=s("OhSV"),h=s("tJLP"),d=s("Cjoz");let m=Object(a.a)(o=class extends i.Component{constructor(e){var t;super(e),t=this,this.handleEmailInput=async function(e){const{userStore:s}=t.props.stores,o=e.target.value;t.setState({email:o}),clearTimeout(t.checkEmailTimer),t.checkEmailTimer=setTimeout(()=>s.checkEmail(o),1e3)},this.updateCapsLockStatus=e=>{this.setState({isCapsLock:e})},this.sendLoginLink=()=>{const{email:e=""}=this.state,{userStore:t}=this.props.stores;t.sendLoginLink(e)},this.validateCode=()=>{const{email:e,code:t}=this.state,{userStore:s}=this.props.stores;s.validateLoginCode(e,t)},this.resetLoginLinkMessages=()=>{const{userStore:e}=this.props.stores;e.resetLoginLinkMessages()},this.resetLoginMessages=()=>{const{userStore:e}=this.props.stores;e.resetLoginMessages()},this.resetEmailSent=()=>{const{userStore:e}=this.props.stores;e.updateObjectField("loginLink","emailSent",!1)},this.newUser=()=>{const{email:e=""}=this.state,{routeLoginNew:t="/register/"+e}=this.props;Object(c.route)(t)},this.login=()=>{const{email:e=""}=this.state,{routeLogin:t="/"+e}=this.props;Object(c.route)(t)},this.changeLanguage=e=>{const t=e.target.value,{appState:s}=this.props.stores;s.setLanguage(t)},this.state={showToken:!1,isCapsLock:!1,email:this.props.email,code:""}}componentDidMount(){const{userStore:e,appState:t}=this.props.stores,{language:s="en"}=t;this.props.email&&(clearTimeout(this.checkEmailTimer),this.checkEmailTimer=setTimeout(()=>e.checkEmail(this.props.email,s),1e3))}render(){const{isCapsLock:t,email:s,code:o}=this.state,{appState:a,userStore:c}=this.props.stores,{showLogo:m=!0}=this.props,{language:g="en"}=a,{emailIsAvailable:p,loginLink:b,login:u}=c,{emailSent:j,message:O,messageIcon:f,error:k,errorIcon:v}=b,{message:L,messageIcon:w,error:x,errorIcon:y}=u,S=n.a.validateEmail(s),C=S&&!p,E=n.a.validateCode(o,1e5,999999);return j?Object(i.h)("div",{class:"container-fluid"},Object(i.h)("div",{class:"row"},Object(i.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-md-6 offset-md-3 col-lg-4 offset-lg-4 pt-5"},m&&Object(i.h)(e,null,Object(i.h)("div",{class:"d-flex justify-content-center mb-5 mt-5"},Object(i.h)(e,null,Object(i.h)("img",{src:"https://themusher.app/assets/logo-qpaws-dark.png",height:"100"})))),Object(i.h)(h.a,{message:k,icon:v,remove:this.resetLoginLinkMessages}),Object(i.h)(h.a,{message:x,icon:y,remove:this.resetLoginMessages}),Object(i.h)(d.a,{message:O,icon:f,remove:this.resetLoginLinkMessages}),Object(i.h)(d.a,{message:L,icon:w,remove:this.resetLoginMessages}),Object(i.h)("div",{class:"form-group"},Object(i.h)(r.b,null,Object(i.h)("input",{type:"text",class:"form-control form-control-lg "+(o?E?"is-valid":"is-invalid":""),style:"font-size: 40px; letter-spacing: 5px",id:"codeInput",onInput:Object(l.a)(this,"code"),value:o,placeholder:Object(i.h)(r.c,{id:"forgotten.one-time-code"},"Engangskode")})),o&&!E&&Object(i.h)("div",{class:"invalid-feedback text-white",style:"display: block;"},Object(i.h)(r.c,{id:"forgotten.otp-not-valid"},"Hmm, koden ser ikke helt riktig ut. Kan det vÃ¦re en skrivefeil?")),o&&E&&!p&&Object(i.h)("div",{class:"invalid-feedback text-white",style:"display: block;"},Object(i.h)(r.c,{id:"forgotten.otp-valid"},"Koden ser bra ut."))),Object(i.h)("button",{class:"btn btn-block btn-lg btn-primary",type:"button",onClick:this.validateCode,disabled:!E},Object(i.h)("i",{class:"far fa-paper-plane mr-2"}),Object(i.h)(r.c,{id:"forgotten.login-with-otp"},"Logg meg inn med koden")),Object(i.h)("small",{class:"form-text text-muted mt-5 text-center"},Object(i.h)("button",{class:"btn btn-small btn-link text-white",onClick:this.login},Object(i.h)(r.c,{id:"forgotten.goto-login"},"Jeg husker passordet. GÃ¥ til logg inn."))),Object(i.h)("small",{class:"form-text text-muted mt-2 text-center"},Object(i.h)("button",{class:"btn btn-small btn-link text-white",onClick:this.resetEmailSent},Object(i.h)(r.c,{id:"forgotten.send-new-otp"},"Jeg trenger en ny kode.")))))):Object(i.h)("div",{class:"container-fluid"},Object(i.h)("div",{class:"row"},Object(i.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-md-6 offset-md-3 col-lg-4 offset-lg-4 pt-5"},m&&Object(i.h)(e,null,Object(i.h)("div",{class:"d-flex justify-content-center mb-5 mt-5"},Object(i.h)(e,null,Object(i.h)("img",{src:"https://themusher.app/assets/logo-qpaws-dark.png",height:"100"})))),Object(i.h)(h.a,{message:k,icon:v,remove:this.resetLoginLinkMessages}),Object(i.h)(d.a,{message:O,icon:f,remove:this.resetLoginLinkMessages}),Object(i.h)("div",{class:"form-group"},Object(i.h)(r.b,null,Object(i.h)("input",{type:"email",class:"form-control form-control-lg "+(s?S&&!p?"is-valid":"is-invalid":""),id:"emailInput",onInput:this.handleEmailInput,value:s,onKeypress:e=>{n.a.isCapsLock(e,this.updateCapsLockStatus)},placeholder:Object(i.h)(r.c,{id:"forgotten.email"},"E-post")})),s&&S&&p&&Object(i.h)("div",{class:"invalid-feedback text-white",style:"display: block;"},Object(i.h)(r.c,{id:"forgotten.email-not-found"},"E-posten finnes ikke.")," ",Object(i.h)("a",{href:"/register/"+s},Object(i.h)(r.c,{id:"forgotten.register"},"registrere deg"))," ðŸ˜ƒ"),s&&!S&&Object(i.h)("div",{class:"invalid-feedback text-white",style:"display: block;"},Object(i.h)(r.c,{id:"forgotten.email-not-valid"},"Hmm, e-posten ser ikke helt riktig ut. Kan det vÃ¦re en skrivefeil?")),s&&S&&!p&&Object(i.h)("div",{class:"invalid-feedback text-white",style:"display: block;"},Object(i.h)(r.c,{id:"forgotten.email-looks-good"},"E-post ser bra ut."))),t&&Object(i.h)("div",{class:"alert alert-danger",role:"alert"},Object(i.h)(r.c,{id:"forgotten.caps-lock-is-on"},"CAPS LOCK er pÃ¥!")),Object(i.h)("button",{class:"btn btn-block btn-lg btn-primary",type:"button",onClick:this.sendLoginLink,disabled:!C},Object(i.h)("i",{class:"far fa-paper-plane mr-2"}),Object(i.h)(r.c,{id:"forgotten.send-reset-link"},"Send meg en reset link")),Object(i.h)("small",{class:"form-text text-muted mt-5 text-center"},Object(i.h)("button",{class:"btn btn-small btn-link text-white",onClick:this.login},Object(i.h)(r.c,{id:"forgotten.goto-login"},"Jeg husker passordet. GÃ¥ til logg inn."))))))}})||o;t.default=m}.call(this,s("hosL").Fragment)},tJLP:function(e,t,s){"use strict";var o,i=s("hosL"),n=s("/eY4");let a=Object(n.a)(o=class extends i.Component{componentDidUpdate(){const{remove:e=(()=>{})}=this.props;clearTimeout(this.removeTimer),this.removeTimer=setTimeout(()=>e(),1e4)}componentWillUnmount(){clearTimeout(this.removeTimer)}render(){const{message:e,icon:t,remove:s=(()=>{})}=this.props;return e?Object(i.h)("div",{class:"container"},Object(i.h)("div",{class:"alert alert-danger row"},Object(i.h)("div",{class:"col-12"},Object(i.h)("a",{href:"#",onclick:s,class:"float-right"},Object(i.h)("i",{className:"fas fa-times"})),t&&Object(i.h)("h1",{class:"float-left mr-3"},Object(i.h)("i",{class:t})),e&&Object(i.h)("span",null,e)))):""}})||o;t.a=a}}]);
//# sourceMappingURL=39.chunk.ae696.esm.js.map