(window.webpackJsonp=window.webpackJsonp||[]).push([[34],{Dv8B:function(e,t,a){"use strict";a.r(t),function(e){function i(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,i)}return a}function r(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?i(Object(a),!0).forEach((function(t){c(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):i(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function c(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function n(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}var s,o,l,d=a("hosL"),p=a("Utv1"),u=a("/eY4"),h=a("cneo"),b=a("OhSV"),f=a("Y3FI"),O=a("go65"),g=a("RMlE"),m=a("ZOvn"),j=a("om2D"),v=a("TiXY"),y=m.a.marginTop(!0,!0),w=m.a.marginTopBack(!1),I=m.a.marginBottom(),x={isLoading:!1},k=function(e){return function(t,a){return e.map((function(e){var i=1;return"-"===e[0]&&(i=-1,e=e.substring(1)),t[e]>a[e]?i:t[e]<a[e]?-i:0})).reduce((function(e,t){return e||t}),0)}},F=Object(u.a)(s=function(e){function t(){for(var t,a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return(t=e.call.apply(e,[this].concat(i))||this).handleImageErrored=function(e){var t=e.target;t.onerror=null,setTimeout((function(){t.src+="?"+new Date}),1e3)},t.removeImage=function(e){return new Promise((function(a){return t.props.stores.raceStore.removeImage({id:t.props.race.id,name:e.target.parentElement.dataset.name||e.target.dataset.name}),a()}))},t.removeMainImage=function(){var e=t.props;(0,e.updateField)({id:e.race.id,field:e.field,value:{}})},t.setDateToNow=function(){var e=t.props,a=e.field,i=e.updateField,r=e.race,c=p.a.isoDate(void 0,!1,!1,!0);i({id:r.id,field:a,value:c})},t.setTimeToNow=function(){var e=t.props,a=e.field,i=e.updateField,r=e.race,c=p.a.isoTime();i({id:r.id,field:a,value:c,type:"time"})},t.setValue=function(e){var a=e.target.parentElement.dataset.value||e.target.dataset.value;if(a){var i=t.props;(0,i.updateField)({id:i.race.id,field:i.field,value:a})}},t.setRightValue=function(){var e=t.props;(0,e.updateField)({id:e.race.id,field:e.field,value:e.rightValueReal})},t}return n(t,e),t.prototype.render=function(){var e,t=this,a=this.props,i=a.saved,r=a.race,c=a.type,n=void 0===c?"text":c,s=a.rows,o=a.field,l=a.min,u=a.max,f=a.step,O=a.title,g=a.icon,m=a.help,y=a.onInput,w=a.updateField,I=a.rightValue,x=a.required,k=Object(h.i)(r[o]),F=u;return"date"===n&&(k&&(k=p.a.isoDate(r[o],!1,!1,!0)),"today"===u&&(F=p.a.isoDate(void 0,!1,!1,!0))),"time"===n&&k&&(k=p.a.isoTime(r[o])),"duration"!==o&&"rest"!==o||(e=p.a.secToHms(k,!0)),"image"===n?Object(d.h)("div",{class:"form-group "+(i[o+"."+r.id]?"is-valid":"")},Object(d.h)("label",{for:o+"Input"},g&&Object(d.h)("i",{class:g+" text-muted"})," ",O),Object(d.h)("div",{class:"container-fluid"},Object(d.h)("div",{class:"row"},r.images&&r.images.map((function(e){return Object(d.h)("div",{class:"col-3 p-1"},Object(d.h)("img",{src:e.s3SmallLink,class:"img-fluid",onError:t.handleImageErrored}),Object(d.h)("button",{class:"btn btn-sm btn-link",onClick:t.removeImage,"data-name":e.name},Object(d.h)("i",{class:"fas fa-trash"})," Del"))})))),Object(d.h)(j.a,{saved:i,object:r,field:o,updateField:w,autoOpen:!1}),i[o+"."+r.id]?Object(d.h)("div",{class:"valid-feedback",style:"display: block;"},Object(d.h)(b.c,{id:"race.changes-saved"},"Endringene er lagret")):Object(d.h)("small",{id:o+"Help",class:"form-text text-muted"},m)):"file"===n?Object(d.h)("div",{class:"form-group "+(i[o+"."+r.id]?"is-valid":"")},Object(d.h)("label",{for:o+"Input"},g&&Object(d.h)("i",{class:g+" text-muted"})," ",O),Object(d.h)(v.a,{saved:i,object:r,field:o,updateField:w}),i[o+"."+r.id]?Object(d.h)("div",{class:"valid-feedback",style:"display: block;"},Object(d.h)(b.c,{id:"race.changes-saved"},"Endringene er lagret")):Object(d.h)("small",{id:o+"Help",class:"form-text text-muted"},m)):"textarea"===n?Object(d.h)("div",{class:"form-group "+(i[o+"."+r.id]?"is-valid":"")},Object(d.h)("label",{for:o+"Input"},g&&Object(d.h)("i",{class:g+" text-muted"})," ",O),Object(d.h)("textarea",{type:n,class:"form-control "+(i[o+"."+r.id]?"is-valid":""),id:o+"Input","aria-describedby":o+"Help",value:k,rows:s,"data-id":r.id,"data-field":o,onInput:y}),i[o+"."+r.id]?Object(d.h)("div",{class:"valid-feedback",style:"display: block;"},Object(d.h)(b.c,{id:"race.changes-saved"},"Endringene er lagret")):Object(d.h)("small",{id:o+"Help",class:"form-text text-muted"},m)):"toggle"===n?Object(d.h)("div",{class:"form-group "+(i[o+"."+r.id]?"is-valid":"")},Object(d.h)("label",{for:o+"Input"},g&&Object(d.h)("i",{class:g+" text-muted"})," ",O),Object(d.h)("div",{class:"custom-control custom-switch"},Object(d.h)("input",{type:"checkbox",class:"custom-control-input",id:o+"Input",value:1===k?0:1,"data-id":r.id,"data-field":o,onInput:y,checked:1==k?"checked":""}),Object(d.h)("label",{class:"custom-control-label",for:o+"Input"})),i[o+"."+r.id]?Object(d.h)("div",{class:"valid-feedback",style:"display: block;"},Object(d.h)(b.c,{id:"races.changes-saved"},"Endringene er lagret")):Object(d.h)("small",{id:o+"Help",class:"form-text text-muted"},m)):Object(d.h)("div",{class:"form-group "+(i[o+"."+r.id]?"is-valid":"")},"date"===n&&Object(d.h)("span",{class:"float-right text-muted font-weight-lighter",onClick:this.setDateToNow},"I dag ",Object(d.h)("i",{class:"far fa-check-circle"})),"time"===n&&Object(d.h)("span",{class:"float-right text-muted font-weight-lighter",onClick:this.setTimeToNow},"NÃ¥ ",Object(d.h)("i",{class:"far fa-check-circle"})),I&&Object(d.h)("span",{class:"float-right text-muted font-weight-lighter",onClick:this.setRightValue},I),Object(d.h)("label",{for:o+"Input"},g&&Object(d.h)("i",{class:g+" text-muted"})," ",O),e&&Object(d.h)("span",{class:"float-right"},Object(d.h)("strong",{onClick:this.setValue,"data-value":void 0},e)),Object(d.h)("input",{type:n,class:"form-control "+(i[o+"."+r.id]?"is-valid":"")+" "+(x?k?"border-success":"border-danger":""),id:o+"Input","aria-describedby":o+"Help",value:k,min:l,max:F,step:f,"data-id":r.id,"data-field":o,"data-type":n,onInput:y}),i[o+"."+r.id]?Object(d.h)("div",{class:"valid-feedback",style:"display: block;"},Object(d.h)(b.c,{id:"race.changes-saved"},"Endringene er lagret")):Object(d.h)("small",{id:o+"Help",class:"form-text text-muted"},m))},t}(d.Component))||s,S=Object(u.a)(o=function(e){function t(){for(var t,a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return(t=e.call.apply(e,[this].concat(i))||this).onInput=function(e){t.props.stores.raceStore.updateObjectKeyValue("newRace",t.props.field,e.target.value)},t}return n(t,e),t.prototype.render=function(){var e=this.props,t=e.field,a=e.icon,i=e.title,r=e.help,c=this.props.stores.raceStore.newRace;return Object(d.h)("div",{class:"form-group"},Object(d.h)("label",{for:t+"Input"},a&&Object(d.h)("i",{class:a+" text-muted"})," ",i),Object(d.h)("input",{type:"text",class:"form-control",id:t+"Input","aria-describedby":t+"Help",onInput:this.onInput,value:c[t]}),Object(d.h)("small",{id:t+"Help",class:"form-text text-muted"},r))},t}(d.Component))||o,D=Object(u.a)(l=function(t){function a(e){var a;return(a=t.call(this,e)||this).updateField=function(e){var t=e.target.dataset,i=t.field,r=t.type,c=t.elementtype,n=e.target.value;a.updateFieldValue({id:parseInt(t.id,10),field:i,value:n,type:r,elementtype:c})},a.updateFieldValue=function(e){var t=e.id,i=e.field,r=e.value,c=e.datatype,n=e.elementtype,s=e.skipTimer,o=void 0!==s&&s,l=a.props.stores.raceStore,d=l.race,u=r,h=r;"time"===e.type&&(h=u=p.a.isoDate(d[i],!1,!1,!0)+" "+r),"images"===i&&Array.isArray(d.images)&&Array.isArray(r)&&(h=[].concat(d.images,r)),"array"!==c||Array.isArray(r)||(u="number"===n?r.split(",").map((function(e){return parseFloat(e)||e})):r.split(",")),l.updateField(t,i,h),o?a.doUpdateField(t,i,u):(clearTimeout(a.updateTimer[i]),a.updateTimer[i]=setTimeout((function(){return new Promise((function(e){return a.doUpdateField(t,i,u),e()}))}),1500))},a.insertNewRace=function(){return new Promise((function(e,t){var i,c;return i=a.props.stores.raceStore,Promise.resolve(i.insert(r({},i.newRace))).then((function(a){try{return c=a.data.id,Object(f.route)("/race/"+c),e()}catch(e){return t(e)}}),t)}))},a.addRaceClass=function(){return new Promise((function(e,t){return Promise.resolve(a.props.stores.raceStore.addClass({id:a.props.raceid,newClass:a.state.newRaceClass})).then((function(){try{return a.setState({newRaceClass:{}}),e()}catch(e){return t(e)}}),t)}))},a.handleImageErrored=function(e){var t=e.target;t.onerror=null,setTimeout((function(){t.src+="?"+new Date}),1e3)},a.addRaceArticle=function(){return new Promise((function(e,t){return Promise.resolve(a.props.stores.raceStore.addArticle({id:a.props.raceid,newArticle:a.state.newRaceArticle})).then((function(){try{return a.setState({newRaceArticle:{}}),e()}catch(e){return t(e)}}),t)}))},a.addRaceUserImage=function(){return new Promise((function(e,t){return Promise.resolve(a.props.stores.raceStore.addUserImage({id:a.props.raceid,newUserImage:a.state.newRaceUserImage})).then((function(){try{return a.setState({newRaceUserImage:{}}),e()}catch(e){return t(e)}}),t)}))},a.updateUserImageUpload=function(e){var t=a.state.newRaceUserImage;t[e.field]=e.value,a.setState({newRaceUserImage:t})},a.removeRaceClass=function(e){return new Promise((function(t,i){return Promise.resolve(a.props.stores.raceStore.removeClass({id:a.props.raceid,classId:e.target.parentElement.dataset.id||e.target.dataset.id})).then((function(){try{return t()}catch(e){return i(e)}}),i)}))},a.removeRaceArticle=function(e){return new Promise((function(t,i){return Promise.resolve(a.props.stores.raceStore.removeArticle({id:a.props.raceid,articleId:e.target.parentElement.dataset.id||e.target.dataset.id})).then((function(){try{return t()}catch(e){return i(e)}}),i)}))},a.removeRaceUserImage=function(e){return new Promise((function(t,i){return Promise.resolve(a.props.stores.raceStore.removeUserImage({id:a.props.raceid,userImageId:e.target.parentElement.dataset.id||e.target.dataset.id})).then((function(){try{return t()}catch(e){return i(e)}}),i)}))},a.editRaceClass=function(e){return new Promise((function(t){var i,r=e.target.dataset,c=r.id,n=r.field,s=e.target.value,o=a.props.raceid,l=a.props.stores.raceStore,d=((i={raceClassId:c})["raceClass"+p.a.ucfirst(n)]=s,i);return clearTimeout(a.updateTimer[o+"-"+c+"-"+n]),a.updateTimer[o+"-"+c+"-"+n]=setTimeout((function(){return new Promise((function(e){return l.editClass({id:o,data:d}),e()}))}),1500),t()}))},a.editRaceArticle=function(e){return new Promise((function(t){var i,r=e.target.dataset,c=r.id,n=r.field,s=e.target.value,o=a.props.raceid,l=a.props.stores.raceStore,d=((i={raceArticleId:c})["raceArticle"+p.a.ucfirst(n)]=s,i);return clearTimeout(a.updateTimer[o+"-"+c+"-"+n]),a.updateTimer[o+"-"+c+"-"+n]=setTimeout((function(){return new Promise((function(e){return l.editArticle({id:o,data:d}),e()}))}),1500),t()}))},a.editRaceUserImage=function(e){return new Promise((function(t){var i,r=e.target.dataset,c=r.id,n=r.field,s=e.target.value,o=a.props.raceid,l=a.props.stores.raceStore,d=((i={raceUserImageId:c})["raceUserImage"+p.a.ucfirst(n)]=s,i);return clearTimeout(a.updateTimer[o+"-"+c+"-"+n]),a.updateTimer[o+"-"+c+"-"+n]=setTimeout((function(){return new Promise((function(e){return l.editUserImage({id:o,data:d}),e()}))}),1500),t()}))},a.addCheckpoint=function(e){return new Promise((function(t,i){var c;return c=a.props.stores.raceStore,Promise.resolve(c.addCheckpoint({id:c.race.id,classId:e.target.dataset.classid,newCheckpoint:r({},a.state.checkpoint)})).then((function(){try{return t()}catch(e){return i(e)}}),i)}))},a.editCheckpoint=function(e){var t,i=a.props.stores.raceStore,r=i.race.id,c=e.target.id,n=e.target.value,s=e.target.dataset,o=((t={raceClassId:s.classid,checkpointId:s.checkpointid})["raceClassCheckpoint"+p.a.ucfirst(c)]=n,t);clearTimeout(a.updateTimer[c]),a.updateTimer[c]=setTimeout((function(){return new Promise((function(e){return i.editClass({id:r,data:o}),i.localUpdateSignup(c,n),e()}))}),1500)},a.deleteCheckpoint=function(e){var t=a.props.stores.raceStore,i=t.race.id,r=e.target.id,c=e.target.value,n=e.target.dataset,s={raceClassId:n.classid,checkpointId:n.checkpointid,raceClassCheckpointDelete:1};clearTimeout(a.updateTimer[r]),a.updateTimer[r]=setTimeout((function(){return new Promise((function(e){return t.editClass({id:i,data:s}),t.localUpdateSignup(r,c),e()}))}),1500)},a.back=function(){var e=a.props.stores.raceStore.race;a.props.createNew?Object(f.route)("/race/"):Object(f.route)("/race/"+e.id)},a.state=r(r({},x),{},{newRaceClass:{},newRaceArticle:{},newRaceUserImage:{},checkpoint:{}}),a.updateTimer={},a}n(a,t);var i=a.prototype;return i.loadRace=function(e){return new Promise(function(t,a){return void 0===e&&(e=this.props),this.setState({isLoading:!0}),Promise.resolve(this.props.stores.raceStore.load(e.raceid)).then((function(){try{return t()}catch(e){return a(e)}}),a)}.bind(this))},i.doUpdateField=function(e,t,a){return new Promise(function(i,r){return Promise.resolve(this.props.stores.raceStore.saveField(e,t,a)).then((function(){try{return i()}catch(e){return r(e)}}),r)}.bind(this))},i.componentDidMount=function(){this.loadRace()},i.render=function(){var t=this,a=this.props,i=a.createNew,r=this.props.stores,c=r.raceStore;if(!r.userStore.isAdmin)return"";var n=c.race,s=c.saved,o=["name","sortOrder","distanceFromPrev","estTimeToCpMinutes","estRestMinutes"];return Object(d.h)(e,null,Object(d.h)(g.a,{stores:this.props.stores}),Object(d.h)("div",{class:"container-fluid",style:"margin-bottom: "+I+"; margin-top: "+y+";"},Object(d.h)("button",{class:"btn btn-link float-left pl-0 fixed-top text-primary",style:"top: "+w+"; left: 5px; font-size: 35px; width: 45px;",onClick:this.back},Object(d.h)("i",{class:"fas fa-arrow-circle-left"})),i?Object(d.h)("div",{class:"row"},Object(d.h)("div",{class:"col-12"},Object(d.h)("h5",null,Object(d.h)(b.c,{id:"race.add-new"},"Lag nytt innhold")),Object(d.h)(S,{stores:this.props.stores,field:"title",icon:"fas fa-heading",title:Object(d.h)(b.c,{id:"race.title"},"Tittel"),help:Object(d.h)(b.c,{id:"race.title-help"},"Title of this race story")}),Object(d.h)(S,{stores:this.props.stores,field:"tag",icon:"fas fa-eye",title:Object(d.h)(b.c,{id:"race.tag"},"Tag"),help:Object(d.h)(b.c,{id:"race.tag-help"},"Tag of this race story"),onInput:this.updateField}),Object(d.h)("button",{type:"button",class:"btn btn-primary mb-2",onclick:this.insertNewRace},"Save race"))):Object(d.h)("div",{class:"row"},Object(d.h)("div",{class:"col-12"},Object(d.h)(F,{saved:s,race:n,field:"title",icon:"fas fa-heading",required:!0,title:Object(d.h)(b.c,{id:"race.title"},"Title"),help:Object(d.h)(b.c,{id:"race.title-help"},"Title of this race"),onInput:this.updateField}),Object(d.h)("div",{class:"row"},Object(d.h)("div",{class:"col"},Object(d.h)(F,{saved:s,race:n,field:"active",icon:"fas fa-heading",title:Object(d.h)(b.c,{id:"race.active"},"Active"),help:Object(d.h)(b.c,{id:"race.active-help"},"Is this active yet?"),onInput:this.updateField})),Object(d.h)("div",{class:"col"},Object(d.h)(F,{saved:s,race:n,field:"nonstop",icon:"fas fa-heading",title:Object(d.h)(b.c,{id:"race.nonstop"},"Nonstop"),help:Object(d.h)(b.c,{id:"race.nonstop-help"},"Nonstop race."),onInput:this.updateField})),Object(d.h)("div",{class:"col"},Object(d.h)(F,{saved:s,race:n,field:"liveRace",icon:"fas fa-heading",title:Object(d.h)(b.c,{id:"race.live-race"},"Live race"),help:Object(d.h)(b.c,{id:"race.live-race-help"},"Live race."),onInput:this.updateField}))),Object(d.h)("div",{class:"row"},Object(d.h)("div",{class:"col"},Object(d.h)(F,{saved:s,race:n,field:"signupfee",icon:"fas fa-heading",title:Object(d.h)(b.c,{id:"race.signupfee"},"Signup fee"),help:Object(d.h)(b.c,{id:"race.signupfee-help"},"Signup fee for this race."),onInput:this.updateField})),Object(d.h)("div",{class:"col"},Object(d.h)(F,{saved:s,race:n,field:"signuppayment",icon:"fas fa-heading",title:Object(d.h)(b.c,{id:"race.signuppayment"},"Signup payment"),help:Object(d.h)(b.c,{id:"race.signuppayment-help"},"Signup payment for this race."),onInput:this.updateField}))),Object(d.h)("div",{class:"row"},Object(d.h)("div",{class:"col"},Object(d.h)(F,{saved:s,race:n,field:"signupStartDate",icon:"fas fa-heading",required:!0,title:Object(d.h)(b.c,{id:"race.signupStartDate"},"Signup start date"),type:"date",help:Object(d.h)(b.c,{id:"race.signupStartDate-help"},"Signup start date"),onInput:this.updateField,updateField:this.updateFieldValue})),Object(d.h)("div",{class:"col"},Object(d.h)(F,{saved:s,race:n,field:"signupStartDate",icon:"fas fa-heading",required:!0,title:Object(d.h)(b.c,{id:"race.signupStartDate"},"Signup start time"),type:"time",help:Object(d.h)(b.c,{id:"race.signupStartDate-help"},"Signup start time"),onInput:this.updateField,updateField:this.updateFieldValue})),Object(d.h)("div",{class:"col"},Object(d.h)(F,{saved:s,race:n,field:"signupEndDate",icon:"fas fa-heading",required:!0,title:Object(d.h)(b.c,{id:"race.signupEndDate"},"Signup end date"),type:"date",help:Object(d.h)(b.c,{id:"race.signupEndDate-help"},"Signup end date"),onInput:this.updateField,updateField:this.updateFieldValue})),Object(d.h)("div",{class:"col"},Object(d.h)(F,{saved:s,race:n,field:"signupEndDate",icon:"fas fa-heading",required:!0,title:Object(d.h)(b.c,{id:"race.signupEndDate"},"Signup end time"),type:"time",help:Object(d.h)(b.c,{id:"race.signupEndDate-help"},"Signup end time"),onInput:this.updateField,updateField:this.updateFieldValue}))),Object(d.h)("div",{class:"row"},Object(d.h)("div",{class:"col"},Object(d.h)(F,{saved:s,race:n,field:"startDate",icon:"fas fa-heading",required:!0,title:Object(d.h)(b.c,{id:"race.startDate"},"Race start date"),type:"date",help:Object(d.h)(b.c,{id:"race.startDate-help"},"Race start date"),onInput:this.updateField,updateField:this.updateFieldValue})),Object(d.h)("div",{class:"col"},Object(d.h)(F,{saved:s,race:n,field:"startDate",icon:"fas fa-heading",required:!0,title:Object(d.h)(b.c,{id:"race.startDate"},"Race start time"),type:"time",help:Object(d.h)(b.c,{id:"race.startDate-help"},"Race start time"),onInput:this.updateField,updateField:this.updateFieldValue})),Object(d.h)("div",{class:"col"},Object(d.h)(F,{saved:s,race:n,field:"endDate",icon:"fas fa-heading",required:!0,title:Object(d.h)(b.c,{id:"race.endDate"},"Race end date"),type:"date",help:Object(d.h)(b.c,{id:"race.endDate-help"},"Race end date"),onInput:this.updateField,updateField:this.updateFieldValue})),Object(d.h)("div",{class:"col"},Object(d.h)(F,{saved:s,race:n,field:"endDate",icon:"fas fa-heading",required:!0,title:Object(d.h)(b.c,{id:"race.endDate"},"Race end time"),type:"time",help:Object(d.h)(b.c,{id:"race.endDate-help"},"Race end time"),onInput:this.updateField,updateField:this.updateFieldValue}))),Object(d.h)("div",{class:"row"},Object(d.h)("div",{class:"col"},Object(d.h)(F,{saved:s,race:n,field:"tag",icon:"fas fa-heading",required:!0,title:Object(d.h)(b.c,{id:"race.tag"},"Tag"),help:Object(d.h)(b.c,{id:"race.tag-help"},"Sosial media tags of this race. Comma sep."),onInput:this.updateField})),Object(d.h)("div",{class:"col"},Object(d.h)(F,{saved:s,race:n,field:"tagFacebookUsers",icon:"fas fa-heading",title:Object(d.h)(b.c,{id:"race.tag-facebook-user"},"Facebook users to tag"),help:Object(d.h)(b.c,{id:"race.tag-facebook-user-help"},"Facebook users to tag in this race. Comma sep."),onInput:this.updateField})),Object(d.h)("div",{class:"col"},Object(d.h)(F,{saved:s,race:n,field:"tagInstagramUsers",icon:"fas fa-heading",title:Object(d.h)(b.c,{id:"race.tag-instagram-user"},"Intagram users to tag"),help:Object(d.h)(b.c,{id:"race.tag-instagram-user-help"},"Instagram users to tag in this race. Comma sep."),onInput:this.updateField}))),Object(d.h)(F,{saved:s,race:n,field:"raceTrackerRace",icon:"fas fa-heading",title:Object(d.h)(b.c,{id:"race.race-tracker-name"},"RaceTracker name"),help:Object(d.h)(b.c,{id:"race.race-tracker-name-help"},"Check database for RaceTracker name"),onInput:this.updateField}),Object(d.h)("div",{class:"row"},Object(d.h)("div",{class:"col"},Object(d.h)(F,{saved:s,race:n,field:"resultsText",icon:"fas fa-heading",title:Object(d.h)(b.c,{id:"race.resultsText"},"Results URL Text"),help:Object(d.h)(b.c,{id:"race.resultsText-help"},"Text to results URL"),onInput:this.updateField})),Object(d.h)("div",{class:"col"},Object(d.h)(F,{saved:s,race:n,field:"resultsUrl",icon:"fas fa-heading",title:Object(d.h)(b.c,{id:"race.resultsUrl"},"Results URL"),help:Object(d.h)(b.c,{id:"race.resultsUrl-help"},"URL to results"),onInput:this.updateField}))),Object(d.h)("div",{class:"row"},Object(d.h)("div",{class:"col"},Object(d.h)(F,{saved:s,race:n,field:"contestantsText",icon:"fas fa-heading",title:Object(d.h)(b.c,{id:"race.contestantsText"},"Contestants URL text"),help:Object(d.h)(b.c,{id:"race.contestantsText-help"},"Text to Contestants URL"),onInput:this.updateField})),Object(d.h)("div",{class:"col"},Object(d.h)(F,{saved:s,race:n,field:"contestantsUrl",icon:"fas fa-heading",title:Object(d.h)(b.c,{id:"race.contestantsUrl"},"Contestants URL"),help:Object(d.h)(b.c,{id:"race.contestantsUrl-help"},"URL to Contestants"),onInput:this.updateField}))),[1,2,3,4].map((function(a){return Object(d.h)(e,null,Object(d.h)("div",{class:"row"},Object(d.h)("div",{class:"col"},Object(d.h)(F,{saved:s,race:n,field:"mediaText"+a,icon:"fas fa-heading",title:Object(d.h)(b.c,{id:"race.mediaText"},"Media URL text ",a),help:Object(d.h)(b.c,{id:"race.mediaText1-help"},"Text to Media URL ",a),onInput:t.updateField})),Object(d.h)("div",{class:"col"},Object(d.h)(F,{saved:s,race:n,field:"mediaURL"+a,icon:"fas fa-heading",title:Object(d.h)(b.c,{id:"race.contestantsUrl"},"Media URL ",a),help:Object(d.h)(b.c,{id:"race.contestantsUrl-help"},"URL to Media ",a),onInput:t.updateField}))))})),Object(d.h)("div",{class:"row"},Object(d.h)("div",{class:"col"},Object(d.h)(F,{saved:s,race:n,field:"contactEmail",icon:"fas fa-heading",title:Object(d.h)(b.c,{id:"race.contactEmail"},"Contact Email"),help:Object(d.h)(b.c,{id:"race.contactEmail-help"},"Contact Email of this race"),onInput:this.updateField})),Object(d.h)("div",{class:"col"},Object(d.h)(F,{saved:s,race:n,field:"contactCellphone",icon:"fas fa-heading",title:Object(d.h)(b.c,{id:"race.contactCellphone"},"Contact Cellphone"),help:Object(d.h)(b.c,{id:"race.contactCellphone-help"},"Contact Cellphone of this race"),onInput:this.updateField})),Object(d.h)("div",{class:"col"},Object(d.h)(F,{saved:s,race:n,field:"facebook",icon:"fas fa-heading",title:Object(d.h)(b.c,{id:"race.facebook"},"Facebook"),help:Object(d.h)(b.c,{id:"race.facebook-help"},"Facebook Event or page"),onInput:this.updateField})),Object(d.h)("div",{class:"col"},Object(d.h)(F,{saved:s,race:n,field:"instagram",icon:"fas fa-heading",title:Object(d.h)(b.c,{id:"race.instagram"},"Instagram"),help:Object(d.h)(b.c,{id:"race.instagram-help"},"Instagram account or tag"),onInput:this.updateField}))),Object(d.h)("div",{class:"row"},Object(d.h)("div",{class:"col"},Object(d.h)(F,{saved:s,race:n,field:"locationCity",icon:"fas fa-heading",title:Object(d.h)(b.c,{id:"race.locationCity"},"Location City"),help:Object(d.h)(b.c,{id:"race.locationCity-help"},"Location City of this race"),onInput:this.updateField})),Object(d.h)("div",{class:"col"},Object(d.h)(F,{saved:s,race:n,field:"locationState",icon:"fas fa-heading",title:Object(d.h)(b.c,{id:"race.locationState"},"Location State"),help:Object(d.h)(b.c,{id:"race.locationState-help"},"Location State of this race"),onInput:this.updateField})),Object(d.h)("div",{class:"col"},Object(d.h)(F,{saved:s,race:n,field:"locationCountry",icon:"fas fa-heading",title:Object(d.h)(b.c,{id:"race.locationCountry"},"Location Country"),help:Object(d.h)(b.c,{id:"race.locationCountry-help"},"Location Country of this race"),onInput:this.updateField}))),Object(d.h)(F,{saved:s,race:n,field:"ingress",icon:"fas fa-quote-right",type:"textarea",title:Object(d.h)(b.c,{id:"race.ingress"},"Ingress"),help:Object(d.h)(b.c,{id:"race.ingress-help"},"Ingress of this race"),onInput:this.updateField}),Object(d.h)(F,{saved:s,race:n,field:"body",icon:"fas fa-quote-right",type:"textarea",rows:10,title:Object(d.h)(b.c,{id:"race.body"},"Body"),help:Object(d.h)(b.c,{id:"race.body-help"},"Body of this race"),onInput:this.updateField}),Object(d.h)("div",{class:"row"},Object(d.h)("div",{class:"col"},Object(d.h)(F,{saved:s,race:n,field:"rules",icon:"fas fa-quote-right",type:"textarea",rows:10,title:Object(d.h)(b.c,{id:"race.rules"},"Rules"),help:Object(d.h)(b.c,{id:"race.rules-help"},"Rules of this race"),onInput:this.updateField})),Object(d.h)("div",{class:"col"},Object(d.h)(F,{saved:s,race:n,field:"declaration",icon:"fas fa-quote-right",type:"textarea",rows:10,title:Object(d.h)(b.c,{id:"race.declaration"},"Declaration"),help:Object(d.h)(b.c,{id:"race.declaration-help"},"Self declaration for the race"),onInput:this.updateField}))),Object(d.h)("div",{class:"row"},Object(d.h)("div",{class:"col"},Object(d.h)(F,{saved:s,race:n,field:"veterinaryInfo",icon:"fas fa-quote-right",type:"textarea",rows:10,title:Object(d.h)(b.c,{id:"race.veterinaryInfo"},"VeterinÃ¦rinfo"),help:Object(d.h)(b.c,{id:"race.veterinaryInfo-help"},"VeterinÃ¦rinfo"),onInput:this.updateField})),Object(d.h)("div",{class:"col"},Object(d.h)(F,{saved:s,race:n,field:"checkpoints",icon:"fas fa-quote-right",type:"textarea",rows:10,title:Object(d.h)(b.c,{id:"race.checkpoints"},"Sjekkpunkter"),help:Object(d.h)(b.c,{id:"race.checkpoints-help"},"Sjekkpunkter"),onInput:this.updateField}))),Object(d.h)("div",{class:"row"},Object(d.h)("div",{class:"col"},Object(d.h)(F,{saved:s,race:n,field:"trailDescription",icon:"fas fa-quote-right",type:"textarea",rows:10,title:Object(d.h)(b.c,{id:"race.trailDescription"},"LÃ¸ypebeskrivelse"),help:Object(d.h)(b.c,{id:"race.trailDescription-help"},"LÃ¸ypebeskrivelse"),onInput:this.updateField})),Object(d.h)("div",{class:"col"},Object(d.h)(F,{saved:s,race:n,field:"program",icon:"fas fa-quote-right",type:"textarea",rows:10,title:Object(d.h)(b.c,{id:"race.program"},"Program"),help:Object(d.h)(b.c,{id:"race.program-help"},"Program"),onInput:this.updateField})),Object(d.h)("div",{class:"col"},Object(d.h)(F,{saved:s,race:n,field:"prices",icon:"fas fa-quote-right",type:"textarea",rows:10,title:Object(d.h)(b.c,{id:"race.prices"},"Prices"),help:Object(d.h)(b.c,{id:"race.prices-help"},"Prices for this race"),onInput:this.updateField}))),Object(d.h)("div",{class:"row"},Object(d.h)("div",{class:"col"},Object(d.h)(F,{saved:s,race:n,field:"resultDanger",icon:"fas fa-quote-right",type:"textarea",rows:10,title:Object(d.h)(b.c,{id:"race.resultDanger"},"resultDanger"),help:Object(d.h)(b.c,{id:"race.resultDanger-help"},"resultDanger for this race"),onInput:this.updateField})),Object(d.h)("div",{class:"col"},Object(d.h)(F,{saved:s,race:n,field:"resultWarning",icon:"fas fa-quote-right",type:"textarea",rows:10,title:Object(d.h)(b.c,{id:"race.resultWarning"},"resultWarning"),help:Object(d.h)(b.c,{id:"race.resultWarning-help"},"resultWarning for this race"),onInput:this.updateField})),Object(d.h)("div",{class:"col"},Object(d.h)(F,{saved:s,race:n,field:"resultSuccess",icon:"fas fa-quote-right",type:"textarea",rows:10,title:Object(d.h)(b.c,{id:"race.resultSuccess"},"resultSuccess"),help:Object(d.h)(b.c,{id:"race.resultSuccess-help"},"resultSuccess for this race"),onInput:this.updateField}))),Object(d.h)(F,{saved:s,race:n,field:"image",type:"image",icon:"fas fa-camera",stores:this.props.stores,title:Object(d.h)(b.c,{id:"race.photo"},"Bilder"),help:Object(d.h)(b.c,{id:"race.photo-help"},"Images for this race."),onInput:this.updateField,updateField:this.updateFieldValue}),Object(d.h)("div",{class:"row"},n.classes&&n.classes.map((function(a){return Object(d.h)(e,null,Object(d.h)("div",{class:"col-12 border rounded-lg m-2 p-3"},Object(d.h)("button",{class:"btn btn-danger float-right","data-id":a.id,onClick:t.removeRaceClass},Object(d.h)("i",{class:"fas fa-times"})),Object(d.h)("h5",null,a.title),Object(d.h)("div",{class:"row"},["title","distance","minDistance","signupfee","track","raceTrackerResults","dogs"].map((function(i){return Object(d.h)(e,null,Object(d.h)("div",{class:"col form-group"},Object(d.h)("label",{for:i},i),Object(d.h)("input",{type:"text",class:"form-control",id:i,"aria-describedby":i+"Help","data-id":a.id,"data-field":i,value:a[i],onInput:t.editRaceClass})))}))),Object(d.h)("div",{class:"row"},["startDate","endDate"].map((function(i){return Object(d.h)(e,null,Object(d.h)("div",{class:"col form-group"},Object(d.h)("label",{for:i},i),Object(d.h)("input",{type:"datetime-local",class:"form-control",id:i,"aria-describedby":i+"Help","data-id":a.id,"data-field":i,value:p.a.isoDate(a[i]),onInput:t.editRaceClass})))}))),Object(d.h)("div",{class:"row"},["ingress","body","rules"].map((function(i){return Object(d.h)(e,null,Object(d.h)("div",{class:"col form-group"},Object(d.h)("label",{for:i},i),Object(d.h)("textarea",{type:"textarea",class:"form-control",id:i,"aria-describedby":i+"Help","data-id":a.id,"data-field":i,value:a[i],onInput:t.editRaceClass})))}))),["waypoints"].map((function(i){return Object(d.h)(e,null,Object(d.h)("div",{class:"form-group"},Object(d.h)("label",{for:i},i),Object(d.h)("textarea",{type:"textarea",class:"form-control",id:i,"aria-describedby":i+"Help","data-id":a.id,"data-field":i,value:JSON.stringify(a[i],null,4),onInput:t.editRaceClass})))})),Object(d.h)("div",{class:"overflow-auto"},Object(d.h)("div",{class:"d-flex flex-nowrap"},a.checkpoints&&a.checkpoints.slice().sort(k(["sortOrder"])).map((function(i){return Object(d.h)(e,null,Object(d.h)("div",{class:"border rounded-lg m-2 p-3 bg-light"},Object(d.h)("h5",null,i.name),["name","sortOrder","distanceFromStart","distanceFromPrev","estSpeed","requiredRestMinutes","timeEqualization","isStartLine","isFinishLine","estTimeToCpMinutes","estRestMinutes","email","cellphone","facebook","instagram","image","topImage"].map((function(r){return Object(d.h)(e,null,Object(d.h)("div",{class:"form-group"},Object(d.h)("label",{for:r},o.indexOf(r)>-1&&Object(d.h)(e,null,"*")," ",r),Object(d.h)("input",{type:"text",class:"form-control "+(o.indexOf(r)>-1?i[r]?"border-success":"border-danger":""),id:r,"aria-describedby":r+"Help","data-classid":a.id,"data-checkpointid":i.id,"data-field":r,value:i[r],onInput:t.editCheckpoint,placeholder:"estSpeed"===r?12.5:""}),Object(d.h)("small",{id:r+"Help",class:"form-text text-muted"},"estTimeToCpMinutes"===r&&Object(d.h)(e,null,1e3*i.distanceFromPrev/((i.estSpeed||12.5)/3.6)/60,Object(d.h)("span",{class:"text-muted px-2"},"-"),p.a.secToHms(1e3*i.distanceFromPrev/((i.estSpeed||12.5)/3.6),!0),Object(d.h)("span",{class:"text-muted px-2"},"-"),i.estSpeed||12.5," km/t"),["requiredRestMinutes","estRestMinutes"].indexOf(r)>-1&&Object(d.h)(e,null,p.a.secToHms(60*i[r],!0)))))})),["description"].map((function(r){return Object(d.h)(e,null,Object(d.h)("div",{class:"form-group"},Object(d.h)("label",{for:r},r),Object(d.h)("textarea",{type:"text",class:"form-control",id:r,"aria-describedby":r+"Help","data-classid":a.id,"data-checkpointid":i.id,"data-field":r,value:i[r],onInput:t.editCheckpoint})))})),["position","polygon"].map((function(r){return Object(d.h)(e,null,Object(d.h)("div",{class:"form-group"},Object(d.h)("label",{for:r},r),Object(d.h)("textarea",{type:"textarea",class:"form-control",id:r,"aria-describedby":r+"Help","data-classid":a.id,"data-checkpointid":i.id,"data-field":r,value:JSON.stringify(i[r],null,4),onInput:t.editCheckpoint})))})),Object(d.h)("button",{class:"btn btn-link",onClick:t.deleteCheckpoint,"data-classid":a.id,"data-checkpointid":i.id},"Delete")))})))),a.checkpoints?Object(d.h)(e,null,Object(d.h)("div",{class:"overflow-auto"},Object(d.h)("div",{class:"d-flex flex-nowrap"},Object(d.h)("div",{class:"form-group"},Object(d.h)("label",null,"Waypoint data for class (copy & paste to field above)"),Object(d.h)("textarea",{type:"textarea",class:"form-control",value:JSON.stringify(a.checkpoints.slice().sort(k(["sortOrder"])).filter((function(e){return e.position&&e.position[0]})).map((function(e){return{title:e.name,lat:e.position[0],lng:e.position[1]}}),null,4))}))))):Object(d.h)(e,null),Object(d.h)("div",{class:"d-flex flex-nowrap"},Object(d.h)("div",{class:"border rounded-lg m-2 p-3 bg-light"},Object(d.h)("h5",null,"Add new checkpoint"),["name","distanceFromStart","requiredRestMinutes","email","cellphone"].map((function(a){return Object(d.h)(e,null,Object(d.h)("div",{class:"form-group"},Object(d.h)("label",{for:a},a),Object(d.h)("input",{type:"text",class:"form-control",id:a,"aria-describedby":a+"Help",onInput:Object(O.a)(t,"checkpoint."+a)})))})),["position","polygon"].map((function(a){return Object(d.h)(e,null,Object(d.h)("div",{class:"form-group"},Object(d.h)("label",{for:a},a),Object(d.h)("textarea",{type:"text",class:"form-control",id:a,"aria-describedby":a+"Help",onInput:Object(O.a)(t,"checkpoint."+a)})))})),Object(d.h)("button",{class:"btn btn-info","data-classid":a.id,onClick:t.addCheckpoint},"Add checkpoint")))))}))),Object(d.h)("div",{class:"row"},Object(d.h)("div",{class:"col border rounded-lg m-2 p-3 bg-light"},Object(d.h)("h5",null,"Add new class"),["title","distance","minDistance","signupfee"].map((function(a){return Object(d.h)(e,null,Object(d.h)("div",{class:"form-group"},Object(d.h)("label",{for:a},a),Object(d.h)("input",{type:"text",class:"form-control",id:a,"aria-describedby":a+"Help",onInput:Object(O.a)(t,"newRaceClass."+a)})))})),["ingress","body","rules"].map((function(a){return Object(d.h)(e,null,Object(d.h)("div",{class:"form-group"},Object(d.h)("label",{for:a},a),Object(d.h)("textarea",{type:"text",class:"form-control",id:a,"aria-describedby":a+"Help",onInput:Object(O.a)(t,"newRaceClass."+a)})))})),Object(d.h)("button",{class:"btn btn-info",onClick:this.addRaceClass},"Add race class")))))))},a}(d.Component))||l;t.default=D}.call(this,a("hosL").Fragment)},LMwI:function(e){e.exports={pointerCursor:"pointerCursor__1W6mM"}},RMlE:function(e,t,a){"use strict";function i(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,i)}return a}function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var c,n=a("hosL"),s=a("ox/y"),o=(a("Utv1"),a("/eY4")),l=(a("go65"),a("Y3FI")),d=a("OhSV"),p=(a("LMwI"),{menu:{profile:!1,main:!1},searchText:""}),u=Object(o.a)(c=function(e){function t(t){var a;return(a=e.call(this,t)||this).toggleDropdown=function(e){var t=a.state.menu,i=e.target.dataset.name;!i&&e.target.parentNode&&(i=e.target.parentNode.dataset.name),i&&(t[i]=!t[i]),a.setState({menu:t})},a.toggleDarkmode=function(e){a.props.stores.appState.toggleDarkmode(),a.toggleDropdown(e)},a.toggleViewmode=function(e){var t=e.target.dataset.mode;!t&&e.target.parentNode&&(t=e.target.parentNode.dataset.mode),a.props.stores.appState.toggleViewmode(t),a.toggleDropdown(e)},a.reloadApp=function(){window.location.reload(!0)},a.adminLoadAll=function(){return new Promise((function(e,t){return Promise.resolve(a.props.stores.userStore.getInfo(!0)).then((function(){try{return e()}catch(e){return t(e)}}),t)}))},a.changeLanguage=function(e){var t=e.target.value;console.log("changeLanguage",t);var i=a.props.stores,r=i.appState,c=i.userStore,n=c.user,s=void 0===n?{}:n;s.email&&c.setLanguage({email:s.email,language:t}),r.setLanguage(t)},a.search=function(){var e=a.state.searchText;Object(l.route)("/search/"+e)},a.state=function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?i(Object(a),!0).forEach((function(t){r(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):i(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},p),a}var a,c;return c=e,(a=t).prototype=Object.create(c.prototype),a.prototype.constructor=a,a.__proto__=c,t.prototype.render=function(){var e=this.state,t=e.menu,a=this.props.stores,i=a.appState,r=a.userStore,c=i.darkmode,o=r.user,l=r.notifications,p=((void 0===l?[]:l).filter((function(e){return!e.read})),o.language),u=void 0===p?"en":p;return Object(n.h)("nav",{class:"navbar navbar-expand-lg navbar-themed fixed-top py-1",style:"z-index: 99999;"},Object(n.h)("a",{class:"navbar-brand",href:"/race/"},Object(n.h)("img",{src:"./assets/homerun-race-logo-2-"+(c?"white-":"")+"small.png",height:"37",class:"position-absolute",style:"top: 5px; left: 6px"}),Object(n.h)("span",{class:"font-weight-normal",style:"margin-left: 30px; font-size: 20px;"},"Homerun Race")),Object(n.h)("button",{class:"navbar-toggler",type:"button","data-name":"main",onClick:this.toggleDropdown},Object(n.h)("span",{class:"navbar-toggler-icon"})),Object(n.h)("div",{class:"collapse navbar-collapse "+(t.main?"show":""),id:"navbarSupportedContent"},Object(n.h)("ul",{class:"navbar-nav mr-auto ml-5"},Object(n.h)("li",{class:"nav-item"},Object(n.h)(s.Link,{className:"nav-link",activeClassName:"active",href:"/race","data-name":"main",style:"font-size: 1.0em !important;",onClick:this.toggleDropdown},Object(n.h)("i",{class:"fas fa-flag-checkered"})," ",Object(n.h)(d.c,{id:"header.races"},"LÃ¸pene"))),Object(n.h)("li",{class:"nav-item"},Object(n.h)(s.Link,{className:"nav-link",activeClassName:"active",href:"/race/support","data-name":"main",style:"font-size: 1.0em !important;",onClick:this.toggleDropdown},Object(n.h)("i",{class:"far fa-question-circle"})," ",Object(n.h)(d.c,{id:"header.support"},"Support"))),Object(n.h)("li",{class:"nav-item"},Object(n.h)(s.Link,{className:"nav-link",activeClassName:"active",href:"/race/news","data-name":"main",style:"font-size: 1.0em !important;",onClick:this.toggleDropdown},Object(n.h)("i",{class:"fas fa-quote-right"})," ",Object(n.h)(d.c,{id:"header.news"},"Nyheter")))),Object(n.h)("ul",{class:"navbar-nav ml-auto "},Object(n.h)("li",{class:"nav-item mr-2"},Object(n.h)("div",{class:"form-row align-items-center"},Object(n.h)("div",{class:"col-auto my-1",style:"width: 80px;"},Object(n.h)("select",{class:"custom-select",style:"background-color: inherit; border: none; padding: 0; height: 1.1em; font-size: 0.9em;",onInput:this.changeLanguage},Object(n.h)("option",{value:"no",selected:"no"===u},"ð³ð´ NO"),Object(n.h)("option",{value:"en",selected:"en"===u},"ð¬ð§ EN"),Object(n.h)("option",{value:"es",selected:"es"===u},"ðªð¸ ES"),Object(n.h)("option",{value:"de",selected:"de"===u},"ð©ðª DE"),Object(n.h)("option",{value:"fr",selected:"fr"===u},"ð«ð· FR"),Object(n.h)("option",{value:"ru",selected:"ru"===u},"ð·ðº RU"),Object(n.h)("option",{value:"se",selected:"se"===u},"ð¸ðª SE"))))),Object(n.h)("li",{class:"nav-item d-block d-lg-none"},Object(n.h)(s.Link,{className:"nav-link",activeClassName:"active","data-name":"main",onClick:this.toggleDarkmode},Object(n.h)("i",{class:(c?"fas text-warning":"far")+" fa-moon"})," ",Object(n.h)(d.c,{id:"header.darkmode"},"Nattmodus"))),Object(n.h)("li",{class:"nav-item mr-2 d-none d-lg-block"},Object(n.h)("button",{class:"btn btn-link","data-name":"profile",onClick:this.toggleDarkmode},Object(n.h)("i",{class:(c?"fas text-warning":"far")+" fa-moon"}))))))},t}(n.Component))||c;t.a=u},TiXY:function(e,t,a){"use strict";var i,r=a("hosL"),c=a("/eY4"),n=(a("cneo"),a("Utv1"),a("OhSV")),s=a("u2zT"),o=Object(c.a)(i=function(e){function t(t){var a;return(a=e.call(this,t)||this).handleAddImage=function(e){var t=a.props;(0,t.updateField)({id:t.object.id,field:t.field,value:e})},a.state={files:[]},a}var a,i;return i=e,(a=t).prototype=Object.create(i.prototype),a.prototype.constructor=a,a.__proto__=i,t.prototype.render=function(){var e=this.props,t=e.uploadStatus,a=void 0===t?function(){}:t,i=e.before,c=void 0===i?function(){}:i,o=e.after,l=void 0===o?function(){}:o,d=e.autoOpen,p=void 0!==d&&d;return Object(r.h)("div",{class:"row"},Object(r.h)("div",{class:"col-12"},Object(r.h)(n.c,{id:"form.files.upload-file"},"Last opp fil"),":",Object(r.h)("br",null),Object(r.h)(s.a,{handleAddImage:this.handleAddImage,apiUrl:"/api/fileupload",uploadStatus:a,before:c,after:l,autoOpen:p},Object(r.h)("div",{style:{height:30,width:"100%"}}))))},t}(r.Component))||i;t.a=o},om2D:function(e,t,a){"use strict";var i,r=a("hosL"),c=a("/eY4"),n=(a("cneo"),a("Utv1"),a("u2zT")),s=Object(c.a)(i=function(e){function t(t){var a;return(a=e.call(this,t)||this).handleAddImage=function(e){var t=a.props.addToImages,i=void 0===t||t,r=a.props,c=r.updateField,n=r.object,s=r.field;if(s&&c({id:n.id,field:s,value:e,skipTimer:!0}),i){var o=[];o.push(e),c({id:n.id,field:"images",value:o,skipTimer:!0})}},a.state={files:[]},a}var a,i;return i=e,(a=t).prototype=Object.create(i.prototype),a.prototype.constructor=a,a.__proto__=i,t.prototype.render=function(){var e=this.props,t=e.uploadStatus,a=void 0===t?function(){}:t,i=e.before,c=void 0===i?function(){}:i,s=e.after,o=void 0===s?function(){}:s,l=e.autoOpen,d=void 0===l||l;return Object(r.h)("div",{class:"row"},Object(r.h)("div",{class:"col-12"},Object(r.h)(n.a,{handleAddImage:this.handleAddImage,uploadStatus:a,apiUrl:"/api/fileupload",before:c,after:o,autoOpen:d},Object(r.h)("div",{style:{height:30,width:"100%"}}))))},t}(r.Component))||i;t.a=s},u2zT:function(e,t,a){"use strict";var i,r=a("hosL"),c=a("/eY4"),n=a("Utv1"),s=a("OhSV"),o=Object(c.a)(i=function(e){function t(t){var a;return(a=e.call(this,t)||this).dropRef=Object(r.createRef)(),a.handleDrag=function(e){e.preventDefault(),e.stopPropagation()},a.handleDragIn=function(e){e.preventDefault(),e.stopPropagation(),a.dragCounter++,e.dataTransfer.items&&e.dataTransfer.items.length>0&&a.setState({drag:!0})},a.handleDragOut=function(e){e.preventDefault(),e.stopPropagation(),a.dragCounter--,0===a.dragCounter&&a.setState({drag:!1})},a.handleDrop=function(e){if(e.preventDefault(),e.stopPropagation(),a.setState({drag:!1}),e.dataTransfer.files&&e.dataTransfer.files.length>0){for(var t=0,i=e.dataTransfer.files.length;t<i;t+=1){a.readLocalFile(e.dataTransfer.files[t])}a.dragCounter=0}},a.handleAddFiles=function(e){e.preventDefault();var t=e.target;for(var i=0,r=t.files.length;i<r;i+=1){a.readLocalFile(t.files[i])}},a.handleEvent=function(){0},a.handleUpload=function(e){var t=a.props,i=t.uploadStatus,r=t.before,c=void 0===r?function(){}:r,s=t.after,o=void 0===s?function(){}:s;(void 0===i?function(){}:i)(!1),n.a.isFunction(c)&&c();var l=new FormData;l.append("files[]",e);var d={progress:1};d.xhr=new XMLHttpRequest,d.xhr.upload.addEventListener("progress",(function(t){a.updateProgress(t,e)})),d.xhr.addEventListener("loadstart",(function(t){a.handleEvent(t,e)})),d.xhr.addEventListener("load",(function(t){a.handleEvent(t,e)})),d.xhr.addEventListener("loadend",(function(t){var i=e;n.a.isFunction(o)&&o(),a.handleEvent(t,i)})),d.xhr.addEventListener("progress",(function(t){a.handleEvent(t,e)})),d.xhr.addEventListener("error",(function(t){a.handleEvent(t,e)})),d.xhr.addEventListener("abort",(function(t){a.handleEvent(t,e)})),d.xhr.addEventListener("readystatechange",(function(t){a.uploadDone(t,e)})),d.xhr.open("POST",""+n.a.getApiServer()+a.props.apiUrl),d.xhr.setRequestHeader("Authorization","Bearer "+n.a.getJwtToken()),d.xhr.send(l);var p=e.name,u=a.state.uploadedFilesData;u[p]||(u[p]={}),u[p].uploadMeta=d,u[p].imageNum=a.state.imageNum,a.setState({uploadedFilesData:u})},a.readLocalFile=function(e){return new Promise((function(t,i){var r=new FileReader;r.addEventListener("error",(function(e){i(e)})),r.addEventListener("load",(function(i){var r=e,c=r.name,n=a.state.uploadedFilesData;n[c]||(n[c]={}),n[c].event=i,a.setState({uploadedFilesData:n}),a.handleUpload(r),t(i)})),r.readAsDataURL(e)}))},a.updateProgress=function(e,t){if(e.lengthComputable){var i=t.name,r=a.state.uploadedFilesData,c=e.loaded/e.total*100;0,r[i].uploadMeta.progress=c,a.setState({uploadedFilesData:r})}},a.uploadDone=function(e,t){var i=t.name,r=a.state.uploadedFilesData,c=r[i].uploadMeta;if(c&&4===c.xhr.readyState&&201===c.xhr.status)for(var n=JSON.parse(c.xhr.responseText).data.files,s=0;s<n.length;s+=1){a.addFileToUpload(n[s]),a.fileInput.value=""}},a.state={drag:!1,loadingProgress:0,uploadedFiles:[],uploadedFilesData:{}},a}var a,i;i=e,(a=t).prototype=Object.create(i.prototype),a.prototype.constructor=a,a.__proto__=i;var c=t.prototype;return c.addFileToUpload=function(e){var t=this.state.uploadedFilesData,a=this.props,i=a.handleAddImage,r=a.uploadStatus,c=void 0===r?function(){}:r;delete t[e.name],this.setState({uploadedFilesData:t}),i(e),c(!0)},c.componentDidMount=function(){var e=this,t=this.dropRef.current;t.addEventListener("dragenter",this.handleDragIn),t.addEventListener("dragleave",this.handleDragOut),t.addEventListener("dragover",this.handleDrag),t.addEventListener("drop",this.handleDrop),this.props.autoOpen&&setTimeout((function(){e.fileInput.click()}),10)},c.componentWillUnmount=function(){var e=this.dropRef.current;e.removeEventListener("dragenter",this.handleDragIn),e.removeEventListener("dragleave",this.handleDragOut),e.removeEventListener("dragover",this.handleDrag),e.removeEventListener("drop",this.handleDrop)},c.render=function(){var e=this,t=this.state.uploadedFilesData;return Object(r.h)("div",{style:{position:"relative"},ref:this.dropRef},this.state.drag&&Object(r.h)("div",{style:{border:"dashed grey 4px",backgroundColor:"rgba(255,255,255,.8)",position:"absolute",top:0,bottom:0,left:0,right:0,zIndex:9999}},Object(r.h)("div",{style:{position:"absolute",top:"50%",right:0,left:0,textAlign:"center",color:"grey",fontSize:36}},Object(r.h)("div",null,Object(r.h)(s.c,{id:"imageupload.drag-files-here"},"drop your files here :)")))),Object(r.h)("div",null,Object(r.h)("input",{class:"btn btn-info col-sm-12",multiple:!0,type:"file",id:"image-file",onchange:this.handleAddFiles,ref:function(t){e.fileInput=t}})),Object(r.h)("div",null,Object.keys(t).length>0?Object(r.h)("h3",null,Object(r.h)(s.c,{id:"imageupload.upload-images"},"Uploaded images")):"",Object(r.h)("ul",{class:"list-group"},Object.keys(t).map((function(e){var a=t[e].uploadMeta,i=void 0===a?{}:a,c=e.match(/(jpg|jpeg|png|gif|heic|heif|svg|webp|tif)/i);return Object(r.h)("li",{class:"list-group-item list-group-item-action flex-column align-items-start"},Object(r.h)("div",{class:"d-flex w-100 justify-content-between"},c&&Object(r.h)("img",{class:"img-fluid mr-3",src:t[e].event.target.result,style:"max-height: 50px;"}),Object(r.h)("small",null,t[e].event.uploadDone),Object(r.h)(s.c,{id:"imageupload.uploading-image"},"Laster opp bilde..."),Object(r.h)("small",null,n.a.formatBytes(t[e].event.total,2))),Object(r.h)("div",{class:"progress mt-1",style:"height: 4px;"},Object(r.h)("div",{class:"progress-bar progress-bar-striped progress-bar-animated bg-success",role:"progressbar",style:"width: "+i.progress+"%; height: 4px;","aria-valuenow":i.progress,"aria-valuemin":"0","aria-valuemax":"100"})))})))),this.props.children)},t}(r.Component))||i;t.a=o}}]);
//# sourceMappingURL=34.chunk.8bd2d.js.map