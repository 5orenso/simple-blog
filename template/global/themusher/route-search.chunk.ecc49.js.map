{"version":3,"sources":["webpack:///./components/team/index.js","webpack:///./routes/search/index.js"],"names":["Team","observer","requestFollowTeam","e","preventDefault","stopPropagation","props","stores","teamStore","user","userStore","teamId","parseInt","target","parentElement","dataset","team","followRequest","setState","requestSent","getButton","text","state","skipHome","isYourTeam","members","indexOf","id","isFollowing","followers","isBlocked","blockedFollowers","hasRequestedFollow","followRequests","findIndex","class","type","onClick","unFollowTeam","disabled","data-team","public","render","this","showButton","currentMonth","Date","getMonth","currentYear","getFullYear","month","year","seasonStart","workoutSummary","findWorkoutSummary","language","teamAmbition","findTeamAmbition","ambition","ambitions","teamType","findTeamType","image","s3SmallLink","url","style","href","name","dogs","length","distanceKm","value","elevation","duration","util","secToHms","speedAvg","Component","initialState","submenu","hits","searchText","Search","loadAll","allData","names","idx","appState","storyStore","search","getSearch","publicUsers","localUpdateField","publicTeams","searchResultStories","searchResultDogs","searchResultWorkouts","searchResultTeams","searchResultTracks","map","a","Math","max","reduce","partialSum","route","chooseSubmenu","menu","componentDidMount","componentWillReceiveProps","nextProps","fields","placeholder","onInput","linkState","data-menu","dog","uuidv4","workout","feed","track","story","key"],"mappings":"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","file":"route-search.chunk.ecc49.js","sourcesContent":["import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport { Text, Localizer } from 'preact-i18n';\n\nimport Speed from '../../components/data/speed';\nimport Elevation from '../../components/data/elevation';\nimport Weight from '../../components/data/weight';\nimport Distance from '../../components/data/distance';\nimport Temperature from '../../components/data/temperature';\n\n@observer\nclass Team extends Component {\n    requestFollowTeam = (e) => {\n        e.preventDefault();\n        e.stopPropagation();\n        const { teamStore, userStore } = this.props.stores;\n        const { user } = userStore;\n        const teamId = parseInt(e.target.parentElement.dataset.team || e.target.dataset.team, 10);\n        teamStore.followRequest(teamId, user);\n        this.setState({ requestSent: true });\n    }\n\n    getButton = (text = '') => {\n        const { requestSent } = this.state;\n        const { userStore } = this.props.stores;\n        const { user } = userStore;\n        const { team, skipHome } = this.props;\n        const isYourTeam = team.members && team.members.indexOf(user.id) > -1;\n        const isFollowing = team.followers && team.followers.indexOf(user.id) > -1;\n        const isBlocked = team.blockedFollowers && team.blockedFollowers.indexOf(user.id) > -1;\n        const hasRequestedFollow = requestSent || team.followRequests && team.followRequests.findIndex(e => e.id === user.id) > -1;\n\n        if (isYourTeam) {\n            if (skipHome) {\n                return '';\n            }\n            return (\n                <i class='fas fa-home' />\n            );\n        }\n        if (isFollowing) {\n            return (\n                <button\n                    type='button'\n                    class={`btn btn-sm btn-outline-secondary float-right`}\n                    onClick={this.unFollowTeam}\n                    disabled='true'\n                    data-team={team.id}\n                >\n                    <i class='fas fa-link mr-2' />\n                    <Text id='teams.connect.is-following'>Følger</Text> {text}\n                </button>\n            );\n        }\n        if (isBlocked) {\n            return '';\n            // return (\n            //     <button\n            //         class={`btn btn-block btn-outline-secondary float-right`}\n            //         disabled='true'\n            //     >\n            //         <i class='fas fa-hand-paper mr-2' />\n            //         <Text id='teams.connect.is-blocked'>Blokkert</Text> {text}\n            //     </button>\n            // );\n        }\n        if (hasRequestedFollow) {\n            return (\n                <button\n                    type='button'\n                    class={`btn btn-sm btn-outline-secondary float-right`}\n                    disabled='true'\n                >\n                    <i class='fas fa-hourglass-half mr-2' />\n                    <Text id='teams.connect.has-requested'>Venter på godkjenning</Text> {text}\n                </button>\n            );\n        }\n        if (team.public) {\n            return (\n                <button\n                    type='button'\n                    class={`btn btn-sm btn-outline-success float-right`}\n                    onClick={this.requestFollowTeam}\n                    data-team={team.id}\n                >\n                    <i class='far fa-hand-point-right mr-2' />\n                    <Text id='teams.connect.follow'>Følg</Text> {text}\n                </button>\n            );\n        }\n    }\n\n    render() {\n        const { team, showButton } = this.props;\n        const { teamStore, userStore } = this.props.stores;\n\n        const currentMonth = new Date().getMonth() + 1;\n        const currentYear = new Date().getFullYear();\n\t\tconst { month = currentMonth, year = currentYear } = this.props;\n\t\tconst seasonStart = parseInt(month < 8 ? year - 1 : year, 10);\n\n        const workoutSummary = teamStore.findWorkoutSummary(team.id, seasonStart) || {};\n        const { user } = userStore;\n        const { language = 'en' } = user;\n        const teamAmbition = userStore.findTeamAmbition({ ambition: team.ambitions, language });\n        const teamType = userStore.findTeamType({ type: team.type, language });\n        const image = team.image && team.image.s3SmallLink ? team.image : null;\n\n        const { url = `/teams/${team.id}` } = this.props;\n\n        return (\n            <div class='w-100 mb-3'>\n                <div class='row'>\n                    <div class='col-12 col-sm-8 col-lg-6 offset-sm-2 offset-lg-3 d-flex mb-0 position-relative'>\n                        <div class='position-relative d-flex flex-grow-1'>\n                            {/* {JSON.stringify(team, null, 4)} */}\n                            <div class={`text-center border rounded-circle imageRounded`} style={image ? `background-image: url(\"${image.s3SmallLink}\"); background-size: cover;` : ''}>\n                                {!image && <i class='fas fa-users text-muted mt-3' style='font-size: 40px;' />}\n                            </div>\n                            <div class='flex-grow-1 pl-3' style='line-height: 1.2em;'>\n                                <a class='stretched-link' href={url}>\n                                    <h5 class='mb-1' style='line-height: 1.0em;'>{team.name}</h5>\n                                </a>\n                                <div>\n                                    {teamType && <span class='badge badge-pill badge-secondary'>{teamType}</span>}\n                                    {teamAmbition && <span class='badge badge-pill badge-secondary ml-2'>{teamAmbition}</span>}\n                                </div>\n                                <small class='text-muted'>\n                                    {team && team.dogs && <span class=''><i class='fas fa-dog' /> {team.dogs.length}</span>} \n                                    {team && team.members && <span class='ml-2'><i class='fas fa-user' /> {team.members.length}</span>}\n\n                                    {workoutSummary && workoutSummary.distanceKm > 0 && <span class='ml-2'><i class='fas fa-road' /> <Distance stores={this.props.stores} value={workoutSummary.distanceKm} /></span>}\n                                    {workoutSummary && workoutSummary.elevation > 0 && <span class='ml-2'><i class='fas fa-mountain' /> <Elevation stores={this.props.stores} value={workoutSummary.elevation} /></span>}\n                                    {workoutSummary && workoutSummary.duration > 0 && <span class='ml-2'><i class='fas fa-clock' /> {util.secToHms(workoutSummary.duration)}</span>}\n                                    {workoutSummary && workoutSummary.speedAvg > 0 && <span class='ml-2'><i class='fas fa-tachometer-alt' /> <Speed stores={this.props.stores} value={workoutSummary.speedAvg} /></span>}\n                                </small>\n                            </div>\n                        </div>\n                        {showButton && <div>\n                            {this.getButton()}\n                        </div>}\n                    </div>\n                </div>\n            </div>\n        );\n    }\n}\n\nexport default Team;\n","import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport { Text, Localizer } from 'preact-i18n';\nimport linkState from 'linkstate';\n\nimport { route } from 'preact-router';\n\nimport Dog from '../../components/dog';\nimport Workout from '../../components/workout';\nimport Team from '../../components/team';\nimport Track from '../../components/track';\nimport User from '../../components/user';\nimport Story from '../../components/story/publicStory';\n\nimport TeamPublicFeedLine from '../../components/team/publicFeedLine';\n\nconst initialState = {\n\tsubmenu: 'dogs',\n\thits: 0,\n\tsearchText: '',\n};\n\n@observer\nclass Search extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            ...initialState,\n        };\n    }\n\n\tloadAll = async (props = this.props) => {\n\t\tconst { appState, storyStore, teamStore } = this.props.stores;\n\t\tconst { search } = props;\n\t    await appState.getSearch(search);\n\t\tconst { publicTeams, publicUsers } = appState;\n\t\tstoryStore.localUpdateField('publicTeams', publicTeams);\n\t\tstoryStore.localUpdateField('publicUsers', publicUsers);\n\t\tteamStore.localUpdateField('publicTeams', publicTeams);\n\t\tteamStore.localUpdateField('publicUsers', publicUsers);\n\n\t\tconst { searchResultStories, searchResultDogs, searchResultWorkouts, searchResultTeams, searchResultTracks } = appState;\n\t\tconst allData = [searchResultStories, searchResultDogs, searchResultWorkouts, searchResultTeams, searchResultTracks];\n\t\tconst names = ['stories', 'dogs', 'workouts', 'teams', 'tracks', 'users'];\n\t\tconst idx = allData\n\t\t\t.map(a => a.length)\n\t\t\t.indexOf(Math.max(...allData.map(a => a.length)));\n\t\tconst hits = allData.map(a => a.length).reduce((partialSum, a) => partialSum + a, 0);\n\t\tthis.setState({\n\t\t\tsearchText: search,\n\t\t\tsubmenu: names[idx],\n\t\t\thits,\n\t\t});\n\t}\n\n\tsearch = () => {\n\t\tconst { searchText } = this.state;\n\t\troute(`/search/${searchText}`, true);\n\t}\n\n\tchooseSubmenu = (e) => {\n\t\tconst submenu = e.target.parentElement.dataset.menu || e.target.dataset.menu;\n\t\tthis.setState({ submenu });\n\t}\n\n\tcomponentDidMount() {\n\t\tthis.loadAll();\n\t}\n\n\tcomponentWillReceiveProps(nextProps) {\n        // console.log('componentWillReceiveProps', nextProps);\n        if (nextProps.search !== this.props.search) {\n            this.loadAll(nextProps);\n        }\n    }\n\n\trender() {\n\t\tconst { appState, userStore } = this.props.stores;\n\t\tconst { search } = this.props;\n\n\t\tconst { isAdmin } = userStore;\n\t\tconst { searchResultStories, searchResultDogs, searchResultWorkouts, searchResultTeams, searchResultTracks } = appState;\n\t\tconst { submenu, hits, searchText } = this.state;\n\t\treturn (\n\t\t\t<div class='container-fluid' style='margin-bottom: 200px; margin-top: 60px;'>\n\t\t\t\t<div class='row'>\n\t\t\t\t\t<div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-0 mb-2'>\n\t\t\t\t\t\t<h1><Text id='search.title'>Search</Text></h1>\n\t\t\t\t\t\t<h5 class='my-3'><Text id='search.search-for' fields={{ search, hits }}>{hits} in your search for \"{search}\"</Text></h5>\n\n\t\t\t\t\t\t<div class='d-flex justify-content-center py-3'>\n\t\t\t\t\t\t\t<Localizer>\n\t\t\t\t\t\t\t\t<input class='form-control form-control mr-2' type='search' placeholder={<Text id='header.search-placeholder'>Søk etter det meste...</Text>}\n\t\t\t\t\t\t\t\t\tvalue={searchText}\n\t\t\t\t\t\t\t\t\tonInput={linkState(this, 'searchText')}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</Localizer>\n\t\t\t\t\t\t\t<button class='btn btn-outline-success' type='button'\n\t\t\t\t\t\t\t\tonClick={this.search}\n\t\t\t\t\t\t\t><Text id='header.search'>Søk</Text></button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 my-3'>\n\t\t\t\t\t\t<div class='row'>\n\t\t\t\t\t\t\t<div class='w-100 overflow-hidden'>\n                                <div\n                                    class='d-flex flex-row flex-nowrap pb-2 px-1'\n                                    style='overflow: auto; scroll-snap-type: x mandatory;'\n                                >\n\t\t\t\t\t\t\t\t\t<div class='col px-0 pt-2'>\n\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\tclass={`btn btn-block rounded-pill-left rounded-none ${submenu === 'dogs' ? 'btn-primary' : 'btn-outline-primary'} text-nowrap`}\n\t\t\t\t\t\t\t\t\t\t\tstyle='text-overflow: ellipsis; overflow: hidden;'\n\t\t\t\t\t\t\t\t\t\t\tdata-menu='dogs'\n\t\t\t\t\t\t\t\t\t\t\tonClick={this.chooseSubmenu}\n\t\t\t\t\t\t\t\t\t\t><i class='fas fa-dog' /> <Text id='search.dogs'>Dogs</Text> ({searchResultDogs.length || 0})</button>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div class='col px-0 pt-2'>\n\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\tclass={`btn btn-block rounded-none ${submenu === 'workouts' ? 'btn-primary' : 'btn-outline-primary'} text-nowrap`}\n\t\t\t\t\t\t\t\t\t\t\tstyle='text-overflow: ellipsis; overflow: hidden;'\n\t\t\t\t\t\t\t\t\t\t\tdata-menu='workouts'\n\t\t\t\t\t\t\t\t\t\t\tonClick={this.chooseSubmenu}\n\t\t\t\t\t\t\t\t\t\t><i class='fas fa-running' /> <Text id='search.workouts'>Workouts</Text> ({searchResultWorkouts.length || 0})</button>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div class='col px-0 pt-2'>\n\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\tclass={`btn btn-block rounded-none ${submenu === 'teams' ? 'btn-primary' : 'btn-outline-primary'} text-nowrap`}\n\t\t\t\t\t\t\t\t\t\t\tstyle='text-overflow: ellipsis; overflow: hidden;'\n\t\t\t\t\t\t\t\t\t\t\tdata-menu='teams'\n\t\t\t\t\t\t\t\t\t\t\tonClick={this.chooseSubmenu}\n\t\t\t\t\t\t\t\t\t\t><i class='fas fa-users' /> <Text id='search.teams'>Teams</Text> ({searchResultTeams.length || 0})</button>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div class='col px-0 pt-2'>\n\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\tclass={`btn btn-block rounded-none ${submenu === 'tracks' ? 'btn-primary' : 'btn-outline-primary'} text-nowrap`}\n\t\t\t\t\t\t\t\t\t\t\tstyle='text-overflow: ellipsis; overflow: hidden;'\n\t\t\t\t\t\t\t\t\t\t\tdata-menu='tracks'\n\t\t\t\t\t\t\t\t\t\t\tonClick={this.chooseSubmenu}\n\t\t\t\t\t\t\t\t\t\t><i class='fas fa-map-marked-alt' /> <Text id='search.tracks'>Tracks</Text> ({searchResultTracks.length || 0})</button>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div class='col px-0 pt-2'>\n\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\tclass={`btn btn-block rounded-pill-right rounded-none ${submenu === 'stories' ? 'btn-primary' : 'btn-outline-primary'} text-nowrap`}\n\t\t\t\t\t\t\t\t\t\t\tstyle='text-overflow: ellipsis; overflow: hidden;'\n\t\t\t\t\t\t\t\t\t\t\tdata-menu='stories'\n\t\t\t\t\t\t\t\t\t\t\tonClick={this.chooseSubmenu}\n\t\t\t\t\t\t\t\t\t\t><i class='fas fa-comments' /> <Text id='search.stories'>Stories</Text> ({searchResultStories.length || 0})</button>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t{submenu === 'dogs' && <>\n\t\t\t\t\t\t<div class='col-12'>\n\t\t\t\t\t\t\t{(!searchResultDogs || searchResultDogs.length === 0) && <>\n\t\t\t\t\t\t\t\t<div class='text-center text-muted'>\n\t\t\t\t\t\t\t\t\t<div class='display-1'>\n\t\t\t\t\t\t\t\t\t\t<i class='fas fa-dog' />\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<h3 class='font-weight-lighter'>\n\t\t\t\t\t\t\t\t\t\t<Text id='search.no-dogs-found'>No dogs found.</Text>\n\t\t\t\t\t\t\t\t\t</h3>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</>}\n\t\t\t\t\t\t\t{searchResultDogs && searchResultDogs.map(dog => (\n\t\t\t\t\t\t\t\t<Dog stores={this.props.stores} dog={dog} url={`/dogs/public/${dog.uuidv4}`} />\n\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</>}\n\t\t\t\t\t{submenu === 'workouts' && <>\n\t\t\t\t\t\t<div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-0 mb-2'>\n\t\t\t\t\t\t\t{(!searchResultWorkouts || searchResultWorkouts.length === 0) && <>\n\t\t\t\t\t\t\t\t<div class='text-center text-muted'>\n\t\t\t\t\t\t\t\t\t<div class='display-1'>\n\t\t\t\t\t\t\t\t\t\t<i class='fas fa-running' />\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<h3 class='font-weight-lighter'>\n\t\t\t\t\t\t\t\t\t\t<Text id='search.no-workouts-found'>No workouts found.</Text>\n\t\t\t\t\t\t\t\t\t</h3>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</>}\n\t\t\t\t\t\t\t{searchResultWorkouts && searchResultWorkouts.map((workout, idx) => (\n\t\t\t\t\t\t\t\t<div class='row mb-4'>\n\t\t\t\t\t\t\t\t\t<div class='col-12 py-3'>\n\t\t\t\t\t\t\t\t\t\t<TeamPublicFeedLine\n\t\t\t\t\t\t\t\t\t\t\tstores={this.props.stores}\n\t\t\t\t\t\t\t\t\t\t\tfeed={workout}\n\t\t\t\t\t\t\t\t\t\t\tidx={idx}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</>}\n\t\t\t\t\t{submenu === 'teams' && <>\n\t\t\t\t\t\t<div class='col-12'>\n\t\t\t\t\t\t\t{(!searchResultTeams || searchResultTeams.length === 0) && <>\n\t\t\t\t\t\t\t\t<div class='text-center text-muted'>\n\t\t\t\t\t\t\t\t\t<div class='display-1'>\n\t\t\t\t\t\t\t\t\t\t<i class='fas fa-users' />\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<h3 class='font-weight-lighter'>\n\t\t\t\t\t\t\t\t\t\t<Text id='search.no-teams-found'>No teams found.</Text>\n\t\t\t\t\t\t\t\t\t</h3>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</>}\n\t\t\t\t\t\t\t{searchResultTeams && searchResultTeams.map(team => <>\n\t\t\t\t\t\t\t\t<Team stores={this.props.stores} team={team} url={`/teams/public/${team.uuidv4}`} showButton={true} />\n\t\t\t\t\t\t\t</>)}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</>}\n\t\t\t\t\t{submenu === 'tracks' && <>\n\t\t\t\t\t\t<div class='col-12'>\n\t\t\t\t\t\t\t{(!searchResultTracks || searchResultTracks.length === 0) && <>\n\t\t\t\t\t\t\t\t<div class='text-center text-muted'>\n\t\t\t\t\t\t\t\t\t<div class='display-1'>\n\t\t\t\t\t\t\t\t\t\t<i class='fas fa-map-marked-alt' />\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<h3 class='font-weight-lighter'>\n\t\t\t\t\t\t\t\t\t\t<Text id='search.no-tracks-found'>No tracks found.</Text>\n\t\t\t\t\t\t\t\t\t</h3>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</>}\n\t\t\t\t\t\t\t{searchResultTracks && searchResultTracks.map(track => (\n\t\t\t\t\t\t\t\t<Track stores={this.props.stores} track={track} />\n\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</>}\n\t\t\t\t\t{submenu === 'stories' && <>\n\t\t\t\t\t\t<div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-0 mb-2'>\n\t\t\t\t\t\t\t{(!searchResultStories || searchResultStories.length === 0) && <>\n\t\t\t\t\t\t\t\t<div class='text-center text-muted'>\n\t\t\t\t\t\t\t\t\t<div class='display-1'>\n\t\t\t\t\t\t\t\t\t\t<i class='fas fa-comments' />\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<h3 class='font-weight-lighter'>\n\t\t\t\t\t\t\t\t\t\t<Text id='search.no-stories-found'>No stories found.</Text>\n\t\t\t\t\t\t\t\t\t</h3>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</>}\n\t\t\t\t\t\t\t{searchResultStories && searchResultStories.map(story => (\n\t\t\t\t\t\t\t\t<div class='row mb-4'>\n\t\t\t\t\t\t\t\t\t<div class='col-12 py-3'>\n\t\t\t\t\t\t\t\t\t\t<Story\n\t\t\t\t\t\t\t\t\t\t\tstores={this.props.stores}\n\t\t\t\t\t\t\t\t\t\t\tstory={story}\n\t\t\t\t\t\t\t\t\t\t\tkey={`story-detail-${story.id}`}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</>}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nexport default Search;\n"],"sourceRoot":""}