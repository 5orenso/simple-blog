{"version":3,"sources":["webpack:///./components/feedback/likesAndComments.js","webpack:///./components/workout/commentAdd.js","webpack:///./components/util/scrollIntoView.js","webpack:///./components/workout/commentReply.js","webpack:///./components/garmin/index.js","webpack:///./components/data/distance.js","webpack:///./components/style.css","webpack:///./components/workout/index.js","webpack:///./components/data/temperature.js","webpack:///./components/modal/index.js","webpack:///./components/data/weight.js","webpack:///./components/strava/index.js","webpack:///./routes/workouts/list.js","webpack:///./components/data/elevation.js","webpack:///./components/data/speed.js","webpack:///./components/form/images.js","webpack:///./components/team/teams.js","webpack:///./components/workout/comments.js","webpack:///./components/form/dragNdropFileupload.js","webpack:///./components/feedback/views.js","webpack:///./components/team/fastList.js"],"names":["initialState","DisplayLikesAndComments","observer","props","toggleLikes","setState","showLikesList","state","render","this","stores","storyStore","teamStore","workoutStore","raceStore","likes","comments","type","onTeamClick","class","length","style","onClick","slice","map","like","user","teams","publicTeam","findPublicUser","findPublicTeamByMembers","util","isArray","find","e","public","mu","getImage","team","priority","displayNameShort","name","displayName","href","uuidv4","title","id","fields","total","image","shortname","Component","WorkoutAdd","beforeImagesUploaded","sendButtonEnabled","afterImagesUploaded","commentWorkout","response","callback","inputRefObject","workout","comment","showAddImage","status","body","images","resizeTextarea","addImage","addImages","push","value","handleImageErrored","target","onerror","setTimeout","src","Date","inputRef","col","offset","showAvatar","extraClass","userStore","firstname","ucfirst","lastname","email","userImage","undefined","s3SmallLink","for","placeholder","onInput","linkState","onKeyUp","onFocus","ref","data-id","disabled","img","onError","removeImage","data-name","object","updateField","before","after","autoOpen","ScrollIntoView","container","componentDidMount","horizontal","vertical","behavior","inline","block","scrollIntoView","c","WorkoutCommentReply","commentId","commentReplyWorkout","Garmin","toggleDate","stopPropagation","preventDefault","showDate","ignoreGarminWorkout","garminActivityDetailsStore","ignoreWorkout","parentElement","dataset","loadGarminActivities","importGarminWorkout","loadWorkouts","currentTeam","asTrack","importTrack","importWorkout","load","query","toggleDetail","showDetail","hideImported","activities","forceShowDate","selectedTeam","findTeam","activity","summary","startDate","parseInputDate","startTimeInSeconds","deviceName","activityType","formatDate","locale","formatDistance","distanceInMeters","totalElevationGainInMeters","averageSpeedInMetersPerSecond","secToHms","durationInSeconds","displayDistance","distance","format","Distance","smallUnit","settings","imperial","kmToMiles","module","exports","getWorkoutColor","getWorkoutIcon","MAX_LOADINDEX","getMaxLoadIndex","showAddComment","viewImageIdx","likeWorkout","Workout","workoutId","toggleAddComment","focus","viewImage","closest","idx","shareLink","appState","shareUrl","url","text","teamid","showTeam","hideTeam","onUserClick","onDogClick","dogid","dogs","showDog","hideDog","updateTimer","wrapperClasses","wrapperClassesRow","viewmode","hasShareApi","allDogs","language","intensity","findIntensity","code","teamName","teamNames","forEach","hasLikedWorkout","findIndex","gpxInfo","mushers","loadIndex","workoutEquipment","findEquipment","equipment","workoutEquipmentIcon","field","musherImages","musher","u","publicUser","mapImage","imgs","toJS","batteryUsage","battegryLevelStart","battegryLevelEnd","views","getViews","statistics","marginTop","marginBottom","back","temperature","isLocked","isInProgress","role","date","hour12","hour","minute","getLoadIndexColor","normalizeBetween","Math","floor","getLoadIndexText","garminId","stravaId","track","dogsLeft","dogsRight","sledWeight","indexOf","kcalBurnedTotal","kcalMeatGramsTotal","kcalSalmonGramsTotal","kcalFatGramsTotal","description","markdown","replaceImages","markdownOpts","getMarkdownOptions","distanceKm","elevation","duration","speedAvg","avgGpsMovingSpeed","dblClick","likeRef","data-url","data-title","rel","data-native","compact","isTeamAdmin","isAdmin","Temperature","celciusToFahrenheit","Modal","touchStart","startY","touches","pageY","touchEnd","readyToRefresh","touchMove","appContainer","scrollTop","refreshing","close","imagexxl","thumb","onTouchstart","onTouchend","onTouchmove","download","Weight","kgToPounds","Strava","ignoreStravaWorkout","stravaActivityStore","loadStravaActivities","importStravaWorkout","start_date","total_elevation_gain","average_speed","elapsed_time","MARGIN_TOP","MARGIN_BOTTOM","SUB_MENU_MARGIN_TOP","subMenuMarginTop","isLoading","limit","sessionid","getTime","dataFields","Workouts","addData","changeTeam","setLoadMore","unsetLoadMore","loadDogs","dogStore","removeFilterText","filterText","renderContent","obj","setupIntersection","handleIntersection","intersectionObserverCallback","scrollViewTimer","setInterval","postScrollview","getIntersectionObserverHistory","loadTracks","trackStore","loadWorkoutSummary","getWorkoutSummary","componentWillMount","componentWillUnmount","clearInterval","scrolledDown","darkmode","message","workouts","currentTeamObject","workoutFilter","match","RegExp","workoutsFiltered","filter","tracks","stravaActivities","garminActivityDetails","key","strava","garmin","data","wrapperClassNames","contentClassNames","dataValues","Elevation","meterToFeet","Speed","kmtToMph","Images","handleAddImage","file","addToImages","skipTimer","files","uploadStatus","apiUrl","height","width","Teams","toggleTeam","unsetTeamIfSelected","setCurrentTeam","isDefined","showAllTeams","highlight","showAll","classNames","showAllComments","showAllReplies","WorkoutComments","likeComment","likeWorkoutComment","likeReply","replyId","likeWorkoutCommentReply","replyComment","toggleComments","toggleReplies","translate","showOriginal","translatedText","commentid","replyid","translateCommentReply","translateComment","max_comments","currentUser","filteredComments","totalComments","diplayedComments","max","reverse","hasLikedComment","filteredReplises","totalReplies","diplayedReplies","imageIdx","currentImage","currentLocationGeocode","translation","getCommentTranslations","targetLang","t","loading","s3LargeLink","data-idx","data-commentid","createdDate","updatedDate","formatted_address","reply","hasLikedReply","replyTranslation","getCommentReplyTranslations","replyBody","data-comment","data-replyid","more","DragNDropFileupload","dropRef","createRef","handleDrag","handleDragIn","dragCounter","dataTransfer","items","drag","handleDragOut","handleDrop","i","l","readLocalFile","handleAddFiles","event","el","handleEvent","handleUpload","fileObject","isFunction","formData","FormData","append","uploadMeta","progress","xhr","XMLHttpRequest","upload","addEventListener","updateProgress","fileObj","uploadDone","open","getApiServer","setRequestHeader","getJwtToken","send","filename","uploadedFilesData","imageNum","Promise","resolve","reject","reader","FileReader","error","photo","readAsDataURL","lengthComputable","percentComplete","loaded","readyState","JSON","parse","responseText","addFileToUpload","fileInput","loadingProgress","uploadedFiles","div","current","click","removeEventListener","position","border","backgroundColor","top","bottom","left","right","zIndex","textAlign","color","fontSize","multiple","onchange","Object","keys","isImage","result","formatBytes","aria-valuenow","aria-valuemin","aria-valuemax","children","toggleViews","showViewList","viewUsersArrays","entries","weekObject","viewUsers","flat","userId","FastListLine","containerRef","removeIntersectionObserver","addIntersectionObserver","dataProperties","encodeURI","FastList","deleteIntersectionObserver","intersectionObserver","isIntersecting","currentHeight","childNodes","offsetHeight","scrollHeight","display","minHeight","setupIntersectionObserver","window","IntersectionObserverEntry","prototype","IntersectionObserver","root","rootMargin","threshold","observe","unobserve","isObject","hasOwnProperty","contentClasses"],"mappings":"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","file":"70.chunk.6e7b1.js","sourcesContent":["import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport { Text, Localizer } from 'preact-i18n';\n\nimport mu from '../../lib/musher-util';\n\nconst initialState = {};\n\nconst MAX_USERS_TO_DISPLAY = 1;\n\n@observer\nclass DisplayLikesAndComments extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            ...initialState,\n        };\n    }\n\n    toggleLikes = () => {\n        const { showLikesList } = this.state;\n        this.setState({\n            showLikesList: !showLikesList,\n        });\n    }\n\n    render() {\n        const { showLikesList } = this.state;\n        const { storyStore, teamStore, workoutStore, raceStore } = this.props.stores;\n        const { likes, comments, type = 'story', onTeamClick = () => {}, onUserClick = () => {} } = this.props;\n\t\treturn (<>\n            <div class='d-flex justify-content-between mb-2'>\n                {likes && likes.length > 0 && <>\n                    <div class='d-flex flex-row flex-nowrap position-relative mr-3' style='overflow: auto;'>\n                        <span\n                            class='text-muted mr-2'\n                            onClick={this.toggleLikes}\n                        >\n                            <i class='fas fa-thumbs-up text-primary' /> {likes.length}\n                        </span>\n                        {likes.slice(0, MAX_USERS_TO_DISPLAY).map((like) => {\n                            let user;\n                            let teams;\n                            if (type === 'story') {\n                                user = storyStore.findPublicUser(like.user);\n                                teams = storyStore.findPublicTeamByMembers(like.user);\n                            } else if (type === 'team') {\n                                user = teamStore.findPublicUser(like.user);\n                                teams = teamStore.findPublicTeamByMembers(like.user);\n                            } else if (type === 'workout') {\n                                user = workoutStore.findPublicUser(like.user);\n                                teams = workoutStore.findPublicTeamByMembers(like.user);\n                            } else if (type === 'race') {\n                                user = raceStore.findPublicUser(like.user);\n                                teams = raceStore.findPublicTeamByMembers(like.user);\n                            }\n                            let publicTeam;\n                            if (util.isArray(teams)) {\n                                publicTeam = teams.find(e => e.public === 1);\n                            }\n                            const image = mu.getImage({ user, team: publicTeam, priority: 'user' });\n                            const shortname = mu.displayNameShort(user);\n                            const name = mu.displayName(user);\n                            return (<>\n                                <span class='font-weight-lighter'>\n                                    {publicTeam ? <>\n                                        <a href={`/teams/public/${publicTeam.uuidv4}`} title={publicTeam.name} onClick={(e) => onTeamClick(e, publicTeam.uuidv4)}>\n                                            {name}\n                                        </a>\n                                    </> : <>\n                                        {name}\n                                    </>}\n                                </span>\n                            </>);\n                            // return (<>\n                            //     {publicTeam ? <>\n                            //         <a href={`/teams/public/${publicTeam.uuidv4}`} title={publicTeam.name} onClick={(e) => onTeamClick(e, publicTeam.uuidv4)}>\n                            //             <div\n                            //                 class={`text-center border rounded-circle imageRounded imageRoundedThumb`}\n                            //                 style={`${image ? `background-image: url(\"${image}\"); background-size: cover;` : ''}`}\n                            //             >\n                            //                 {!image && <div class='' style='font-size: 12px; padding-top: 3px;'>{shortname}</div>}\n                            //             </div>\n                            //         </a>\n                            //     </> : <>\n                            //         <div\n                            //             class={`text-center border rounded-circle imageRounded imageRoundedThumb`}\n                            //             style={`${image ? `background-image: url(\"${image}\"); background-size: cover;` : ''} opacity: 0.5;`}\n                            //         >\n                            //             {!image && <div class='text-muted' style='font-size: 12px; padding-top: 3px;'>{shortname}</div>}\n                            //         </div>\n                            //     </>}\n                            // </>);\n                        })}\n                        {likes.length > MAX_USERS_TO_DISPLAY && <>\n                            <span class='text-muted font-weight-lighter ml-2' onClick={this.toggleLikes}>\n                                <Text id='likes-comments.and' fields={{ total: likes.length - MAX_USERS_TO_DISPLAY }}>and {likes.length - MAX_USERS_TO_DISPLAY} others.</Text>\n                            </span>\n                        </>}\n                    </div>\n                </>}\n\n                {comments && comments.length > 0 && <span class='float-right text-muted'>\n                    <i class='fas fa-comment text-primary' /> {comments.length}\n                </span>}\n            </div>\n            {showLikesList && <div class='mt-3 mb-3'>\n                {likes && likes.map((like) => {\n                    let user;\n                    let teams;\n                    if (type === 'story') {\n                        user = storyStore.findPublicUser(like.user);\n                        teams = storyStore.findPublicTeamByMembers(like.user);\n                    } else if (type === 'team') {\n                        user = teamStore.findPublicUser(like.user);\n                        teams = teamStore.findPublicTeamByMembers(like.user);\n                    } else if (type === 'workout') {\n                        user = workoutStore.findPublicUser(like.user);\n                        teams = workoutStore.findPublicTeamByMembers(like.user);\n                    } else if (type === 'race') {\n                        user = raceStore.findPublicUser(like.user);\n                        teams = raceStore.findPublicTeamByMembers(like.user);\n                    }\n                    let publicTeam;\n                    if (util.isArray(teams)) {\n                        publicTeam = teams.find(e => e.public === 1);\n                    }\n                    const image = mu.getImage({ user, team: publicTeam, priority: 'user' });\n                    const shortname = mu.displayNameShort(user);\n                    const name = mu.displayName(user, true);\n                    return (<div class='d-flex flex-row position-relative font-weight-light mb-1'>\n                        {publicTeam ? <>\n                            <a href={`/teams/public/${publicTeam.uuidv4}`} title={publicTeam.name} onClick={(e) => onTeamClick(e, publicTeam.uuidv4)} class='stretched-link'>\n                                <div\n                                    class={`text-center border rounded-circle imageRounded imageRoundedThumb`}\n                                    style={`${image ? `background-image: url(\"${image}\"); background-size: cover;` : ''}`}\n                                >\n                                    {!image && <div class='' style='font-size: 12px; padding-top: 3px;'>{shortname}</div>}\n                                </div>\n                            </a>\n                            <div class='ml-2 '>\n                                {name} <span class='font-weight-lighter'>- {publicTeam.name}</span>\n                            </div>\n                        </> : <>\n                            <div\n                                class={`text-center border rounded-circle imageRounded imageRoundedThumb`}\n                                style={`${image ? `background-image: url(\"${image}\"); background-size: cover;` : ''} opacity: 0.5;`}\n                            >\n                                {!image && <div class='text-muted' style='font-size: 12px; padding-top: 3px;'>{shortname}</div>}\n                            </div>\n                            <div class='ml-2'>\n                                {name}\n                            </div>\n                        </>}\n                    </div>);\n                })}\n            </div>}\n\t\t</>);\n\t}\n}\n\nexport default DisplayLikesAndComments;\n","import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport { Text, Localizer, withText } from 'preact-i18n';\nimport linkState from 'linkstate';\n\nimport Images from '../form/images';\n\nimport style from '../style.css';\nimport mu from '../../lib/musher-util';\n\n@observer\nclass WorkoutAdd extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            comment: {\n                body: '',\n                images: [],\n            },\n            showAddImage: false,\n            sendButtonEnabled: true,\n        };\n        this.inputRef = {};\n    }\n\n    beforeImagesUploaded = () => {\n        this.setState({ sendButtonEnabled: false });\n    }\n\n    afterImagesUploaded = () => {\n        this.setState({ sendButtonEnabled: true });\n    }\n    \n    commentWorkout = async () => {\n        const { sendButtonEnabled } = this.state;\n        if (!sendButtonEnabled) {\n            return false;\n        }\n        const { callback = () => {}, inputRefObject = {} } = this.props;\n        const { workout } = this.props;\n\t\tconst { workoutStore } = this.props.stores;\n        const { comment, showAddImage } = this.state;\n        this.setState({ sendButtonEnabled: false });\n\t\tconst response = await workoutStore.commentWorkout({ id: workout.id, comment });\n\t\tif (response && response.status === 200) {\n            this.setState({\n                comment: {\n                    body: '',\n                    images: [],\n                },\n            }, () => {\n                mu.resizeTextarea(inputRefObject[workout.id]);\n                if (showAddImage) {\n                    this.addImage();\n                }\n            });\n            callback({ workout, response });\n\t\t}\n        this.setState({ sendButtonEnabled: true });\n\t}\n\n    addImages = ({ value }) => {\n        // updateField({ id: object.id, field: 'images', value: images, skipTimer: true });\n        const { comment } = this.state;\n        comment.images.push(...value);\n        this.setState({ comment });\n    }\n\n    addImage = () => {\n        const { showAddImage = false } = this.state;\n        this.setState({\n            showAddImage: !showAddImage,\n        });\n    }\n\n    handleImageErrored = (e) => {\n        const image = e.target;\n        image.onerror = null;\n        setTimeout(() => {\n            image.src += `?${new Date()}`;\n        }, 1000);\n    }\n\n    render() {\n        const { inputRef, col = 12, offset = 0, showAvatar = true, extraClass = '', workout } = this.props;\n        const { comment, showAddImage, sendButtonEnabled } = this.state;\n        const { userStore } = this.props.stores;\n        const { user = {} } = userStore;\n        const displayNameShort = user.firstname ? `${util.ucfirst(user.firstname, true)}${util.ucfirst(user.lastname, true)}` : `${util.ucfirst(user.email || '', true)}`;\n        // const displayName = user.firstname ? `${user.firstname} ${user.lastname}` : `${user.email}`;\n        const userImage = user.image || (user.images ? user.images[0] : undefined);\n\n        return (\n            <div class={`col-${col} offset-${offset} ${extraClass}`}>\n                <div class='d-flex mb-0 position-relative w-100'>\n                    {showAvatar && <div \n                        class={`text-center border rounded-circle imageRounded imageRoundedSmall`}\n                        style={`${userImage ? `background-image: url('${userImage.s3SmallLink}'); background-size: cover;` : ''} border-width: 3px !important;`}\n                    >\n                        {!user.image && <span class='font-weight-lighter' style='font-size: 15px;'>{displayNameShort}</span>}\n                    </div>}\n                    <div class='col pl-3' style='line-height: 1.2em;'>\n\n                        <div class='d-flex bd-highlight'>\n                            <div class='p-0 w-100 bd-highlight'>\n                                <label class='sr-only' for='inlineFormInput'><Text id='comments.comment'>Kommentar</Text></label>\n                                <div class='border rounded rounded-lg position-relative'>\n                                    <Localizer>\n                                        <textarea\n                                            class='form-control-plaintext px-2'\n                                            type='text'\n                                            placeholder={<Text id='comments.write-comment'>Skriv en kommentar...</Text>}\n                                            onInput={linkState(this, 'comment.body')}\n                                            onKeyUp={mu.resizeTextarea}\n                                            onFocus={mu.resizeTextarea}\n                                            style='height: 2.3em;'\n                                            value={comment.body}\n                                            ref={inputRef}\n                                        />\n                                    </Localizer>\n                                    <div class='position-absolute' style='top: 8px; right: 10px; font-size: 1.2em;'>\n                                        <i class='fas fa-image pointerCursor'\n                                            data-id={workout.id}\n                                            onClick={this.addImage}\n                                        />\n                                    </div>\n                                </div>\n                            </div>\n                            <div class='p-0 pl-2 flex-shrink-1 bd-highlight'>\n                                <button type='button' class={`btn btn-${sendButtonEnabled ? 'primary' : 'secondary'} mb-2`} disabled={!sendButtonEnabled}\n                                    onClick={this.commentWorkout}\n                                ><i class='fas fa-paper-plane' /></button>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n                {showAddImage && <>\n                    <div class='col-12 text-center'>\n                        <div class='container-fluid'>\n                            <div class='row'>\n                                {comment.images && comment.images.map(img => (\n                                    <div class='col-3 p-1'>\n                                        <img src={img.s3SmallLink} class='img-fluid' onError={this.handleImageErrored} />\n                                        <button class='btn btn-sm btn-link'\n                                            onClick={this.removeImage}\n                                            data-name={img.name}\n                                        ><i class='fas fa-trash' />  <Text id='comments.remove-image'>Remove</Text></button>\n                                    </div>\n                                ))}\n                            </div>\n                        </div>\n                        <Images object={comment} updateField={this.addImages} before={this.beforeImagesUploaded} after={this.afterImagesUploaded} autoOpen={true} />\n                    </div>\n                </>}\n            </div>\n        );\n    }\n}\n\nexport default WorkoutAdd;\n","import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\n\nconst initialState = {};\n\n@observer\nclass ScrollIntoView extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            ...initialState,\n        };\n        this.container = null;\n    }\n\n    componentDidMount() {\n        const { horizontal, vertical = '' } = this.props;\n        const props = {\n            behavior: 'smooth',\n        };\n        if (horizontal) {\n            props.inline = horizontal;\n        }\n        if (vertical) {\n            props.block = vertical;\n        }\n\t\tthis.container.scrollIntoView(props);\n\t}\n\n    render() {\n        return (\n            <div ref={c => this.container = c}>&nbsp;</div>\n        );\n    }\n}\n\nexport default ScrollIntoView;\n","import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport { Text, Localizer, withText } from 'preact-i18n';\nimport linkState from 'linkstate';\n\nimport style from '../style.css';\nimport mu from '../../lib/musher-util';\n\n@observer\nclass WorkoutCommentReply extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            sendButtonEnabled: true,\n        };\n        this.inputRef = {};\n    }\n\n    commentWorkout = async () => {\n        const { sendButtonEnabled } = this.state;\n        if (!sendButtonEnabled) {\n            return false;\n        }\n        const { callback = () => {}, commentId, inputRefObject = {} } = this.props;\n        const { workout } = this.props;\n\t\tconst { workoutStore } = this.props.stores;\n        const { comment = '' } = this.state;\n        this.setState({ sendButtonEnabled: false });\n\t\tconst response = await workoutStore.commentReplyWorkout({ id: workout.id, commentId, comment });\n\t\tif (response && response.status === 200) {\n            this.setState({\n                comment: '',\n            }, () => {\n                mu.resizeTextarea(inputRefObject[commentId]);\n            });\n            callback({ workout, response, commentId });\n\t\t}\n        this.setState({ sendButtonEnabled: true });\n\t}\n\n    render() {\n        const { inputRef } = this.props;\n        const { comment, sendButtonEnabled } = this.state;\n        const { userStore } = this.props.stores;\n        const { user = {} } = userStore;\n        const displayNameShort = user.firstname ? `${util.ucfirst(user.firstname, true)}${util.ucfirst(user.lastname, true)}` : `${util.ucfirst(user.email || '', true)}`;\n        // const displayName = user.firstname ? `${user.firstname} ${user.lastname}` : `${user.email}`;\n        const userImage = user.image || (user.images ? user.images[0] : undefined);\n\n        return (\n            <div class='w-100'>\n                <div class='d-flex mb-0 position-relative w-100'>\n                    <div \n                        class={`text-center border rounded-circle imageRounded imageRoundedThumb`}\n                        style={`${userImage ? `background-image: url('${userImage.s3SmallLink}'); background-size: cover;` : ''} border-width: 3px !important;`}\n                    >\n                        {!userImage && <span class='font-weight-lighter' style='font-size: 15px;'>{displayNameShort}</span>}\n                    </div>\n                    <div class='col pl-3' style='line-height: 1.2em;'>\n\n                        <div class='d-flex bd-highlight'>\n                            <div class='p-0 w-100 bd-highlight'>\n                                <label class='sr-only' for='inlineFormInput'><Text id='comments.comment'>Kommentar</Text></label>\n                                <div class='border rounded rounded-lg position-relative'>\n                                    <Localizer>\n                                        <textarea\n                                            class='form-control-plaintext px-2'\n                                            type='text'\n                                            placeholder={<Text id='comments.write-comment'>Skriv en kommentar...</Text>}\n                                            onInput={linkState(this, 'comment')}\n                                            onKeyUp={mu.resizeTextarea}\n                                            style='height: 2.3em;'\n                                            value={comment}\n                                            ref={inputRef}\n                                        />\n                                    </Localizer>\n                                </div>\n                            </div>\n                            <div class='p-0 pl-2 flex-shrink-1 bd-highlight'>\n                                <button type='button' class={`btn btn-${sendButtonEnabled ? 'primary' : 'secondary'} mb-2`} disabled={!sendButtonEnabled}\n                                    onClick={this.commentWorkout}\n                                ><i class='fas fa-paper-plane' /></button>\n                            </div>\n                        </div>\n\n                    </div>\n                </div>\n            </div>\n        );\n    }\n}\n\nexport default WorkoutCommentReply;\n","import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport { Text, Localizer, withText } from 'preact-i18n';\n\nimport Speed from '../../components/data/speed';\nimport Elevation from '../../components/data/elevation';\nimport Weight from '../../components/data/weight';\nimport Distance from '../../components/data/distance';\nimport Temperature from '../../components/data/temperature';\n\n@observer\nclass Garmin extends Component {\n    toggleDate = (e) => {\n        e.stopPropagation();\n        e.preventDefault();\n        const { showDate } = this.state;\n        this.setState({ showDate: !showDate });\n    }\n\n    ignoreGarminWorkout = async (e) => {\n        e.stopPropagation();\n        const id = e.target.parentElement.dataset.id || e.target.dataset.id;\n        const { garminActivityDetailsStore } = this.props.stores;\n\t\tawait garminActivityDetailsStore.ignoreWorkout(id);\n        this.loadGarminActivities();\n    }\n\n    importGarminWorkout = async (e) => {\n        e.stopPropagation();\n        const id = e.target.parentElement.dataset.id || e.target.dataset.id;\n        const { asTrack } = this.props;\n        const { garminActivityDetailsStore, workoutStore } = this.props.stores;\n\t\tconst { currentTeam } = workoutStore;\n        if (asTrack) {\n            await garminActivityDetailsStore.importTrack(id, currentTeam);\n        } else {\n            await garminActivityDetailsStore.importWorkout(id, currentTeam);\n        }\n        this.loadGarminActivities();\n        this.loadWorkouts();\n    }\n\n    async loadGarminActivities() {\n\t\tconst { garminActivityDetailsStore } = this.props.stores;\n\t\tgarminActivityDetailsStore.load({ query: { hideImported: 1 }});\n\t}\n\n    loadWorkouts = async () => {\n\t\tconst { workoutStore } = this.props.stores;\n\t\tconst { currentTeam } = workoutStore;\n\t\tawait workoutStore.load({ query: { team: currentTeam } });\n\t}\n\n    toggleDetail = () => {\n        const { showDetail = false } = this.state;\n        this.setState({\n            showDetail: !showDetail,\n        });\n    }\n\n    componentDidMount() {\n\t\tthis.loadGarminActivities();\n\t}\n\n    render() {\n        const { showDate, showDetail = false } = this.state;\n        const { activities = [], showDate: forceShowDate, asTrack = false } = this.props;\n\t\tconst { userStore, workoutStore } = this.props.stores;\n        const { currentTeam } = workoutStore;\n        const { team } = userStore;\n\n        const selectedTeam = userStore.findTeam(currentTeam || team.id);\n\n        if (!showDetail) {\n            if (activities && activities.length > 0) {\n                return (<>\n                    <div class='col-12 mb-3'>\n                        <button type='button' class='btn btn-block btn-outline-info' onClick={this.toggleDetail}>\n                            <div class={`float-right ml-2 text-center border rounded-circle imageRounded imageRoundedIcon`} style={`background-image: url('./assets/garmin-connect.png');`} />\n                            <Text id='workout.index.garmin-workouts'>Garmin workouts / not imported</Text> {activities.length}\n                        </button>\n                    </div>\n                </>);\n            }\n            return (<></>);\n        }\n\n        return (<>\n            <div class='col-12 mb-3'>\n                <div class='row'>\n                    {activities && activities.length > 0 && (\n                        <div\n                            class='col-12 border-top border-bottom pt-3 pb-3 my-2 bg-light'\n                        >\n                            <button type='button' class='float-right btn btn-sm btn-link' onClick={this.toggleDetail}>\n                                <i class='fas fa-caret-up' /> <Text id='garmin.hide-list'>Hide list</Text>\n                            </button>\n                            <h5><Text id='workout.index.garmin-workouts'>Garmin workouts / not imported</Text> {activities.length}</h5>\n                            {activities && activities.map(activity => {\n                                const { summary = {} } = activity;\n                                const startDate = util.parseInputDate(summary.startTimeInSeconds);\n\n                                return (<>\n                                    {/* <td>{util.secToHms(activity.moving_time)}</td> */}\n                                    {/* <td>{util.secToHms(activity.elapsed_time)}</td> */}\n\n                                    {/* {\n                                        \"durationInSeconds\": 616,\n                                        \"startTimeInSeconds\": 1602065947,\n                                        \"startTimeOffsetInSeconds\": 7200,\n                                        \"activityType\": \"ROAD_BIKING\",\n                                        \"averageSpeedInMetersPerSecond\": 0.152,\n                                        \"averagePaceInMinutesPerKilometer\": 109.649124, \n                                        \"activeKilocalories\": 1, \n                                        \"deviceName\": \"edge1000\", \n                                        \"distanceInMeters\": 94.02, \n                                        \"maxPaceInMinutesPerKilometer\": 14.6455765, \n                                        \"maxSpeedInMetersPerSecond\": 1.138, \n                                        \"startingLatitudeInDegree\": 61.00674974732101, \n                                        \"startingLongitudeInDegree\": 9.975536987185478, \n                                        \"totalElevationLossInMeters\": 2\n                                    } */}\n\n                                    <div class='col-12 d-flex mb-4 position-relative'>\n                                        <div class={`text-center border rounded-circle imageRounded`} style={`background-image: url(\"./assets/garmin-connect.png\"); border-width: 3px !important;`}>\n                                            &nbsp;\n                                        </div>\n                                        <div class='flex-grow-1 pl-3' style='line-height: 1.2em;'>\n                                            <h5 class='my-0 mb-1' style='line-height: 1.0em;'>{summary.deviceName}</h5>\n                                            {summary.activityType}<br />\n                                            <small class='text-muted'>\n                                                {startDate && <small onClick={this.toggleDate}>\n                                                    {forceShowDate || showDate ? util.formatDate(startDate, { locale: 'no-NB' }) : util.formatDistance(startDate, new Date(), { locale: 'no-NB' })}\n                                                </small>}\n                                                <span class='text-muted'>\n                                                    <i class='fas fa-road ml-2' /> <Distance stores={this.props.stores} value={summary.distanceInMeters / 1000} />\n                                                    <i class='fas fa-mountain ml-2' /> <Elevation stores={this.props.stores} value={summary.totalElevationGainInMeters} />\n                                                    <i class='fas fa-tachometer-alt ml-2' /> <Speed stores={this.props.stores} value={summary.averageSpeedInMetersPerSecond * 3.6} />\n                                                    <i class='fas fa-stopwatch ml-2' /> {util.secToHms(summary.durationInSeconds)}\n                                                </span>\n                                            </small>\n                                            <br />\n                                            <button class='btn btn-sm btn-block btn-primary' onClick={this.importGarminWorkout} data-id={activity.id}>\n                                                <i class='fas fa-file-import' /> {asTrack ? <Text id='garmin.import-track'>Import as track</Text> : <><Text id='garmin.import'>Import workout</Text> <i class='fas fa-arrow-right' /> {selectedTeam}</>} \n                                            </button>\n                                            <button class='btn btn-sm btn-link' onClick={this.ignoreGarminWorkout} data-id={activity.id}>\n                                                <i class='fas fa-trash-alt' /> <Text id='garmin.ignore'>Ignore workout</Text>\n                                            </button>\n                                        </div>\n                                    </div>\n                                </>);\n                            })}\n\n                            <button type='button' class='btn btn-block btn-primary mt-3' onClick={this.toggleDetail}>\n                                <i class='fas fa-caret-up' /> <Text id='garmin.hide-list'>Hide list</Text>\n                            </button>\n                        </div>\n                    )}\n\n                </div>\n            </div>\n        </>);\n    }\n}\n\nexport default Garmin;\n","import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport { Text, Localizer } from 'preact-i18n';\n\nimport mu from '../../lib/musher-util';\n\nfunction displayDistance(distance) {\n\tif (distance < 5) {\n\t\treturn util.format(distance, 2);\n\t}\n\tif (distance < 10) {\n\t\treturn util.format(distance, 1);\n\t}\n\treturn util.format(distance, 1);\n}\n\nfunction kmToMiles(value) {\n    return 0.621371 * value;\n}\n\n@observer\nclass Distance extends Component {\n    render() {\n\t\tconst { value = 0, smallUnit } = this.props;\n\t\tconst { userStore } = this.props.stores;\n\t\tconst { user } = userStore;\n\t\tconst { settings = {} } = user;\n\n        if (settings.imperial) {\n            return (<>\n                <nobr>\n\t\t\t\t\t{displayDistance(kmToMiles(value))} {smallUnit ? <><small><small><small class='ml-0 text-muted'>mi</small></small></small></> : <>mi</>}\n\t\t\t\t</nobr>\n            </>);\n        }\n\n\t\treturn (<>\n\t\t\t<nobr>\n\t            {displayDistance(value)} {smallUnit ? <><small><small><small class='ml-0 text-muted'>km</small></small></small></> : <>km</>}\n\t\t\t</nobr>\n\t    </>);\n    }\n}\n\nexport default Distance;\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"hoverelementonly\":\"hoverelementonly__1mJGJ\",\"hoverElement\":\"hoverElement__axh3O\",\"hoverelementhide\":\"hoverelementhide__1k_qH\",\"progress-bar-vertical\":\"progress-bar-vertical__1B2sC\",\"progress-bar\":\"progress-bar__pnsVj\",\"dragged\":\"dragged__QXO46\",\"over\":\"over__1re3x\",\"list\":\"list__q_emZ\"};","import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport { toJS } from 'mobx';\nimport { Text, Localizer, withText } from 'preact-i18n';\nimport Markdown from 'preact-markdown';\n\nimport Modal from '../modal';\nimport WorkoutComments from '../../components/workout/comments';\nimport WorkoutAddComment from '../../components/workout/commentAdd';\nimport ImageScroller from '../../components/imageScroller';\nimport DogScroller from '../../components/dog/scroller';\n\nimport Overlay from '../../components/overlay/';\nimport TeamsPublicDetail from '../../routes/teams/publicDetail';\nimport DogPublicDetail from '../../routes/dogs/publicDetail';\n\nimport LikesAndComments from '../../components/feedback/likesAndComments';\nimport Views from '../../components/feedback/views';\n\nimport Speed from '../../components/data/speed';\nimport Elevation from '../../components/data/elevation';\nimport Weight from '../../components/data/weight';\nimport Distance from '../../components/data/distance';\nimport Temperature from '../../components/data/temperature';\n\nimport mu from '../../lib/musher-util';\n\nconst MAX_LOADINDEX = mu.getMaxLoadIndex();\n\nfunction getWorkoutColor(workout) {\n\tswitch (workout.type) {\n\t\tcase 1:\n\t\t\treturn 'border-primary';\n\t\tcase 2:\n\t\t\treturn 'border-danger';\n\t\tcase 3:\n\t\t\treturn 'border-success';\n\t\tcase 4:\n\t\t\treturn 'border-info';\n\t\tdefault:\n\t\t\treturn 'border-warning';\n\t}\n}\n\nfunction getWorkoutIcon(workout) {\n\tswitch (workout.type) {\n\t\tcase 1:\n\t\t\treturn 'fas fa-running';\n\t\tcase 2:\n\t\t\treturn 'fas fa-flag-checkered';\n\t\tcase 3:\n\t\t\treturn 'fas fa-hiking';\n\t\tcase 4:\n\t\t\treturn 'fas fa-futbol';\n\t\tdefault:\n\t\t\treturn 'fas fa-hiking';\n\t}\n}\n\nfunction displayDistance(distanceKm) {\n\tif (distanceKm < 5) {\n\t\treturn util.format(distanceKm, 2);\n\t}\n\tif (distanceKm < 10) {\n\t\treturn util.format(distanceKm, 1);\n\t}\n\treturn util.format(distanceKm, 1);\n}\n\nconst initialState = {\n\tshowAddComment: false,\n    viewImageIdx: {},\n    likeWorkout: {},\n};\n\n@observer\nclass Workout extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            ...initialState,\n        };\n        this.updateTimer = {};\n\t\tthis.inputRef = {};\n    }\n\n    toggleDate = (e) => {\n        e.stopPropagation();\n        e.preventDefault();\n        const { showDate } = this.state;\n        this.setState({ showDate: !showDate });\n    }\n\n\n\tlikeWorkout = async () => {\n\t\tconst { workoutStore } = this.props.stores;\n        const { workout } = this.props;\n        const workoutId = workout.id;\n\n        const { likeWorkout } = this.state;\n        likeWorkout[workoutId] = true;\n        this.setState({ likeWorkout });\n        setTimeout(() => {\n            const { likeWorkout } = this.state;\n            delete likeWorkout[workoutId];\n            this.setState({ likeWorkout });\n        }, 1200);\n\n\t\tconst response = await workoutStore.likeWorkout({ id: workoutId });\n        if (response && response.status === 200) {\n\n\t\t}\n\t}\n\n\ttoggleAddComment = (e) => {\n\t\tconst workoutId = e.target.parentElement.dataset.id || e.target.dataset.id;\n\t\tconst { showAddComment } = this.state;\n\t\tthis.setState({\n\t\t\tshowAddComment: !showAddComment,\n\t\t}, () => {\n\t\t\tif (this.inputRef[workoutId]) {\n\t\t\t\tthis.inputRef[workoutId].focus();\n\t\t\t}\n\t\t});\n\t}\n\n    viewImage = (e) => {\n\t\tconst { id, idx } = e.target.closest('img').dataset;\n        const { viewImageIdx } = this.state;\n        viewImageIdx[id] = idx;\n        this.setState({ viewImageIdx });\n    }\n\n    shareLink = (e) => {\n        const { url, title, text } = e.target.closest('button').dataset;\n        const { appState } = this.props.stores;\n        appState.shareUrl({ url, title, text });\n    }\n\n        // Overlay functions\n    onTeamClick = (e, teamid) => {\n        e.preventDefault();\n        e.stopPropagation();\n        this.setState({\n            showTeam: teamid,\n        });\n        return false;\n    }\n\n    hideTeam = () => {\n        this.setState({\n            showTeam: null,\n        });\n    }\n\n    onUserClick = (e, userid) => {\n        e.preventDefault();\n        e.stopPropagation();\n        return false;\n    }\n\n    onDogClick = (e, dogid, dogs) => {\n        e.preventDefault();\n        e.stopPropagation();\n        this.setState({\n            showDog: dogid,\n            dogs,\n        });\n        return false;\n    }\n\n    hideDog = () => {\n        this.setState({\n            showDog: null,\n        });\n    }\n\n    render() {\n        const {\n            showDate,\n            showAddComment,\n            viewImageIdx = {},\n            likeWorkout,\n            dogs,\n            showTeam,\n            showDog,\n        } = this.state;\n        const {\n            workout,\n            showDate: forceShowDate,\n            wrapperClasses = 'col-12 col-sm-8 col-lg-6 offset-sm-2 offset-lg-3',\n            wrapperClassesRow = 'row',\n        } = this.props;\n\t\tconst { userStore, appState, workoutStore } = this.props.stores;\n        const { viewmode, hasShareApi } = appState;\n        const { user, dogs: allDogs } = userStore;\n        const { language = 'en' } = user;\n        const intensity = userStore.findIntensity({ code: workout.intensity, language }) || {};\n        // const teamName = userStore.findTeam(workout.team);\n        const team = userStore.findTeam(workout.team, true) || {};\n        const teamName = team.name;\n        // const teamNames = workout.teams ? workout.teams.map(e => userStore.findTeam(e)) : [];\n        const teamNames = [];\n        if (teamName) {\n            teamNames.push(teamName);\n        }\n        if (workout.teams) {\n            workout.teams.forEach((e) => {\n                if (userStore.findTeam(e)) {\n                    teamNames.push(userStore.findTeam(e));\n                }\n            });\n        }\n\n        const { likes = [], comments = [] } = workout;\n\t\tconst hasLikedWorkout = workout.likes && workout.likes.findIndex(e => e.user === user.id) > -1;\n        const { gpxInfo = {}, mushers = [] } = workout;\n\t\tconst { loadIndex = 0 } = gpxInfo;\n        const workoutEquipment = userStore.findEquipment({ equipment: workout.equipment, language });\n        const workoutEquipmentIcon = userStore.findEquipment({ equipment: workout.equipment, field: 'icon' });\n\n        const musherImages = [];\n        if (mushers.length > 1) {\n            mushers.slice(1, 10).map((musher) => {\n                const u = workoutStore.findPublicUser(musher) || {};\n                if (u.images && u.images[0]) {\n                    musherImages.push(u.images[0]);\n                }\n            });\n        }\n\n        const publicUser = workoutStore.findPublicUser(mushers[0]) || {};\n        let image;\n        if (publicUser && publicUser.images && publicUser.images[0]) {\n            image = publicUser.images[0];\n        } else if (team.image && team.image.s3SmallLink) {\n            image = team.image;\n        } else if (team.images && team.images[0] && team.images[0].s3SmallLink) {\n            image = team.images[0];\n        } else if (workout.image && workout.image.s3SmallLink) {\n            image = workout.image;\n        }\n\n        const images = [];\n        if (workout.mapImage) {\n            images.push({\n                ...workout.mapImage,\n                type: 'map',\n            });\n        }\n        if (workout.images) {\n            const imgs = toJS(workout.images);\n            images.push(...imgs);\n        }\n        const imageIdx = viewImageIdx[workout.id] ? viewImageIdx[workout.id] : 0;\n        const currentImage = images && images[imageIdx] ? images[imageIdx] : null;\n\n        let batteryUsage;\n        if (workout && workout.gpxInfo && workout.gpxInfo.battegryLevelStart) {\n            batteryUsage = (workout.gpxInfo.battegryLevelStart - workout.gpxInfo.battegryLevelEnd) * 100;\n        }\n\n        const views = mu.getViews(workout.statistics);\n\n        // let temperature;\n        // let windSpeed;\n        // if (util.checkNested(workout, 'temperature')) {\n        //     const yr = toJS(workout.yr[0].instant.details);\n        //     // displayValue = `Yr.no: 🌡️ ${yr.air_temperature}°C, 💨 ${yr.wind_speed}m/s 🧭 ${mu.windDirection(yr.wind_from_direction)}, ☁️ ${yr.cloud_area_fraction}%, ${yr.air_pressure_at_sea_level}mb, 💦 ${yr.relative_humidity}%`;\n        //     temperature = `${yr.air_temperature}°C`;\n        //     windSpeed = `${yr.wind_speed}m/s`;\n        // }\n\t\t// // const loadMultiplier = loadIndex / 100;\n\n        return (<>\n\n            {showTeam && <Overlay>\n                <TeamsPublicDetail stores={this.props.stores} teamid={showTeam} marginTop={'0px;'} marginBottom={'0px;'} back={this.hideTeam} hideTeam={this.hideTeam} />\n            </Overlay>}\n\n            {showDog && <Overlay>\n                <DogPublicDetail stores={this.props.stores} dogid={showDog} marginTop={'0px;'} marginBottom={'0px;'} back={this.hideDog} dogs={dogs} />\n            </Overlay>}\n\n            <div class='w-100 mb-2'>\n                <div class={wrapperClassesRow}>\n\n                    <div class={`${wrapperClasses} d-flex mb-0 position-relative`}>\n\n                        {/* {workout.gpxInfo && <svg viewBox='0 0 300 300' style='top: 80px; left: 10px; width: 90px; height: 90px;' class='position-absolute'>\n                            <path d={`${workout.gpxInfo.svgMap}`} style='fill: none; stroke: #0063FF; stroke-width: 5; opacity: 0.3;' />\n                        </svg>} */}\n\n                        {/* {JSON.stringify(workout, null, 4)} */}\n                        <div class='text-center'>\n                            <div\n                                class={`position-relative text-center border rounded-circle imageRounded ${getWorkoutColor(workout)}`}\n                                style={`${image ? `background-image: url(\"${image.s3SmallLink}\"); background-size: cover;` : ''} border-width: 3px !important;`}\n                            >\n                                {!image && <i class={`${getWorkoutIcon(workout)} text-${intensity.class ? intensity.class : 'muted'} mt-3`} style='font-size: 40px;' />}\n\n                                {musherImages && musherImages.map((img, idx) => <>\n                                    <div\n                                        class='position-absolute rounded-circle imageRounded border imageRoundedThumb border-white'\n                                        style={`\n                                            background-image: url(\"${img.s3SmallLink}\");\n                                            background-size: cover;\n                                            bottom: -3px;\n                                            left: ${-5 + (idx * 10)}px;\n                                        `}\n                                    />\n                                </>)}\n                            </div>\n                            {workout.temperature !== 0 && <>\n                                <span class='text-muted font-weight-light'>\n                                    <Temperature stores={this.props.stores} value={workout.temperature} />\n                                </span>\n                            </>}\n                        </div>\n                        <div class='flex-grow-1 pl-3' style='line-height: 1.2em;'>\n                            <span class='float-right'>\n                                {workout.isLocked === 1 && <i class='fas fa-lock text-danger ml-3' />}\n                                {workout.isInProgress === 1 && <div class='spinner-grow text-success ml-3' role='status' />}\n                                {workout.isInProgress === 2 && <i class='fas fa-pause-circle text-warning ml-3' />}\n                            </span>\n                            <a class='stretched-link' href={`/workouts/${workout.id}`}>\n                                <h5 class='my-0 mb-1' style='line-height: 1.0em;'>\n                                    {workout.name}\n                                </h5>\n                            </a>\n                            {teamNames && teamNames.length > 0 && <small class='font-weight-lighter'>\n                                {teamNames.map((name, idx) => <>{idx > 0 ? ', ' : ''}{name}</>)}\n                            </small>}\n                            <br />\n                            <small class='text-muted'>\n                                {workout.date && <small onClick={this.toggleDate}>\n                                    {forceShowDate || showDate ? util.formatDate(workout.date, { locale: 'no-NB', hour12: false, hour: '2-digit', minute: '2-digit' }) : util.formatDistance(workout.date, new Date(), { locale: 'no-NB' })}\n                                </small>}\n                                <span class={`badge badge-${intensity.class} ml-2`}>{intensity.name}</span>\n                                {loadIndex > 0 && <span class={`ml-2 text-${mu.getLoadIndexColor(util.normalizeBetween(loadIndex, 0, MAX_LOADINDEX, 0, 100))}`}>\n                                    <i class='fas fa-hand-rock mr-1' />\n                                    {Math.floor(util.normalizeBetween(loadIndex, 0, MAX_LOADINDEX, 0, 100))} -&nbsp;\n                                    {mu.getLoadIndexText(util.normalizeBetween(loadIndex, 0, MAX_LOADINDEX, 0, 100))}\n                                </span>}\n                                <br />\n                            </small>\n                            <small>\n                                <div class='text-muted'>\n                                    {workout.garminId > 0 && <div class={`float-left mr-2 text-center border rounded-circle imageRounded imageRoundedIcon`} style={`background-image: url(\"./assets/garmin-connect.png\");`} />}\n                                    {workout.stravaId > 0&& <div class={`float-left mr-2 text-center border rounded-circle imageRounded imageRoundedIcon`} style={`background-image: url(\"./assets/strava-icon.png\");`} />}\n\n                                    {workout.equipment > 0 && <><i class={`${workoutEquipmentIcon} ml-2`} /> {workoutEquipment}</>}\n                                    {/* {workout.distanceKm > 0 && <><i class='fas fa-road ml-2' /> {displayDistance(workout.distanceKm)}km</>}\n                                    {workout.elevation > 0 && <><i class='fas fa-mountain ml-2' /> {util.format(workout.elevation, 0)}m</>} */}\n                                    {/* {workout.speedAvg > 0 && <><i class='fas fa-tachometer-alt ml-2' /> {util.format(workout.speedAvg, 1)}km/t</>} */}\n                                    {workout.dogs > 0 && <><i class='fas fa-dog ml-2' /> {workout.dogs.length}</>}\n                                    {workout.track > 0 && <><i class={`fas fa-map-marked text-${workout.track > 0 ? 'success' : 'danger'} ml-2`} /></>}\n                                    {workout.dogsLeft > 0 && <><i class={`fas fa-crosshairs text-${workout.dogsLeft && workout.dogsRight ? 'success' : 'danger'} ml-2`} /></>}\n                                    {workout.sledWeight > 0 && <>\n                                        <i class='fas fa-sleigh ml-2' /> <Weight stores={this.props.stores} value={workout.sledWeight} />\n                                    </>}\n                                    {batteryUsage > 0 && <span class='text-muted ml-2'><i class='fas fa-battery-three-quarters' /> {util.format(batteryUsage, 1)}% <Text id='workout.battery-used'>used</Text></span>}\n                                </div>\n                                {['beta', 'advanced'].indexOf(viewmode) > -1 && (\n                                    <span class='text-muted'>\n                                        <i class='fas fa-balance-scale' /> {util.format(workout.kcalBurnedTotal)} <Text id='workout.kcal'>kcal</Text>\n                                        <i class='fas fa-drumstick-bite ml-2' /> <Weight stores={this.props.stores} value={workout.kcalMeatGramsTotal / 1000} />\n                                        <i class='fas fa-fish ml-2' /> <Weight stores={this.props.stores} value={workout.kcalSalmonGramsTotal / 1000} />\n                                        <i class='fas fa-piggy-bank ml-2' /> <Weight stores={this.props.stores} value={workout.kcalFatGramsTotal / 1000} />\n                                    </span>\n                                )}\n                            </small>\n                        </div>\n                    </div>\n                    <div class={`${wrapperClasses} position-relative mt-2`}>\n                        <strong>\n                            {workout.description}\n                        </strong>\n                    </div>\n                    <div class={`${wrapperClasses} position-relative`}>\n                        <Markdown markdown={mu.replaceImages(workout.comment, workout.images, language)} markdownOpts={mu.getMarkdownOptions()} />\n                    </div>\n                    <div class={`${wrapperClasses} d-flex mb-0 position-relative`}>\n                        <div class='container-fluid px-0'>\n                            <div class='row mt-1'>\n                                {workout.distanceKm > 0 && <div class='col-3'>\n                                    <div class='text-overflow'>\n                                        <small><i class='fas fa-road' /> <Text id='workout.calendar.distance'>Distanse</Text></small>\n                                    </div>\n                                    <div class='text-overflow font-weight-light' style='font-size: 1.2em;'>\n                                        <Distance stores={this.props.stores} value={workout.distanceKm} />\n                                    </div>\n                                </div>}\n                                {workout.elevation > 0 && <div class='col-3'>\n                                    <div class='text-overflow'>\n                                        <small><i class='fas fa-mountain' /> <Text id='workout.calendar.ascend'>Høydemeter</Text></small>\n                                    </div>\n                                    <div class='text-overflow font-weight-light' style='font-size: 1.2em;'>\n                                        <Elevation stores={this.props.stores} value={workout.elevation} />\n                                    </div>\n                                </div>}\n                                {workout.duration > 0 && <div class='col-3'>\n                                    <div class='text-overflow'>\n                                        <small><i class='fas fa-clock' /> <Text id='workout.calendar.duration'>Varighet</Text></small>\n                                    </div>\n                                    <div class='text-overflow font-weight-light' style='font-size: 1.2em;'>\n                                        {util.secToHms(workout.duration, true)}\n                                    </div>\n                                </div>}\n                                {workout.speedAvg > 0 && <div class='col-3'>\n                                    <div class='text-overflow'>\n                                        <small><i class='fas fa-tachometer-alt' /> <Text id='workout.calendar.avg-speed'>Snittfart</Text></small>\n                                    </div>\n                                    <div class='text-overflow font-weight-light' style='font-size: 1.2em;'>\n\t\t\t\t                        {workout.gpxInfo && workout.gpxInfo.avgGpsMovingSpeed > 0 ? <>\n                                            <Speed stores={this.props.stores} value={workout.gpxInfo.avgGpsMovingSpeed * 3.6} />\n                                        </> : <>\n                                            <Speed stores={this.props.stores} value={workout.speedAvg} />\n                                        </>}\n                                    </div>\n                                </div>}\n                            </div>\n                        </div>\n                    </div>\n\n                    {['beta', 'advanced', 'normal'].indexOf(viewmode) > -1 && (\n                        <div class={`${wrapperClasses}`}>\n                            <div class='container-fluid px-0 mt-1'>\n                                <div class='row'>\n                                    <ImageScroller stores={this.props.stores} images={images} id={workout.id} dblClick={this.likeWorkout} likeRef={likeWorkout} />\n                                </div>\n                            </div>\n                        </div>\n                    )}\n\n                    {['beta', 'advanced', 'normal'].indexOf(viewmode) > -1 && <>\n                        {workout.dogs && workout.dogs.length > 0 && <div class='container-fluid px-0 mt-1'>\n                            <div class='row pt-2'>\n                                <DogScroller stores={this.props.stores} dogs={workout.dogs} allDogs={allDogs} onDogClick={this.onDogClick} />\n                            </div>\n                        </div>}\n\n                        <div class='mt-2'>\n                            <LikesAndComments\n                                stores={this.props.stores}\n                                likes={likes}\n                                comments={comments}\n                                type='workout'\n                                onTeamClick={this.onTeamClick}\n                                onUserClick={this.onUserClick}\n                            />\n                        </div>\n\n                    </>}\n\n                    {['beta', 'advanced', 'normal'].indexOf(viewmode) > -1 && <>\n                        <div class={`${wrapperClasses} mb-0 position-relative mt-2`}>\n                            <div class='row'>\n                                <div class='col text-center'>\n                                    <button type='button' class={`btn btn-sm btn-outline-${hasLikedWorkout ? 'primary' : 'secondary'} btn-lg btn-block ${hasLikedWorkout ? 'text-primary' : ''}`}\n                                        onClick={this.likeWorkout}\n                                        // disabled={hasLikedWorkout}\n                                    >\n                                        <i class={`${hasLikedWorkout ? 'text-primary fas' : 'far'} fa-thumbs-up`} /> <Text id='comments.like'>Lik</Text>\n                                    </button>\n                                </div>\n                                <div class='col text-center'>\n                                    <button type='button' class='btn btn-sm btn-outline-secondary btn-lg btn-block'\n                                        data-id={workout.id}\n                                        onClick={this.toggleAddComment}\n                                    >\n                                        <i class='fas fa-comment' /> <Text id='comments.comment-add'>Kommentar</Text>\n                                    </button>\n                                </div>\n                                {hasShareApi ? <>\n                                    <div class='col text-center'>\n                                        <button class='btn btn-sm btn-outline-secondary btn-lg btn-block text-overflow'\n                                            onClick={this.shareLink}\n                                            data-url={`https://themusher.app/share/workout/${workout.uuidv4}`}\n                                            data-title={`title: ${workout.name}`}\n                                        >\n                                            <i class='fas fa-share' /> <Text id='workout.share'>Del</Text>\n                                        </button>\n                                    </div>\n                                </> : <>\n                                    <div class='col text-center'>\n                                        <a class='btn btn-sm btn-outline-secondary btn-lg btn-block text-overflow'\n                                            href={`https://themusher.app/share/workout/${workout.uuidv4}`}\n                                            target='_blank'\n                                            rel='noreferrer'\n                                            data-native\n                                        >\n                                            <i class='fas fa-share' /> <Text id='workout.share'>Del</Text>\n                                        </a>\n                                    </div>\n                                </>}\n                            </div>\n                        </div>\n\n                        <div class={`${wrapperClasses} mt-2 mb-3`}>\n                            {showAddComment && <WorkoutAddComment\n                                stores={this.props.stores}\n                                workout={workout}\n                                inputRef={c => this.inputRef[workout.id] = c}\n                                inputRefObject={this.inputRef}\n                                col='12'\n                                offset='0'\n                            />}\n                            <WorkoutComments stores={this.props.stores} workout={workout} col='10' offset='2' compact={true} />\n                        </div>\n\n                        {views > 0 && <>\n                            <div class='mt-2'>\n                                <Views\n                                    stores={this.props.stores}\n                                    views={views}\n                                    object={workout}\n                                    type='workout'\n                                    isTeamAdmin={true}\n                                    isAdmin={false}\n                                    onTeamClick={this.onTeamClick}\n                                    onUserClick={this.onUserClick}\n                                />\n                            </div>\n                        </>}\n\n                    </>}\n\n                </div>\n            </div>\n        </>);\n    }\n}\n\nexport default Workout;\n","import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport { Text, Localizer } from 'preact-i18n';\n\nimport mu from '../../lib/musher-util';\n\nfunction celciusToFahrenheit(value) {\n    return ((value * 9/5) + 32);\n}\n\n@observer\nclass Temperature extends Component {\n    render() {\n\t\tconst { value = 0, smallUnit } = this.props;\n\t\tconst { userStore } = this.props.stores;\n\t\tconst { user } = userStore;\n\t\tconst { settings = {} } = user;\n\n        if (settings.imperial) {\n            return (<>\n                <nobr>\n                    {util.format(celciusToFahrenheit(value), 0)}°F\n                </nobr>\n            </>);\n        }\n\n\t\treturn (<>\n            <nobr>\n                {util.format(value, 1)}°C\n            </nobr>\n        </>);\n    }\n}\n\nexport default Temperature;\n","import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport { Text, Localizer, withText } from 'preact-i18n';\n\n@observer\nclass Modal extends Component {\n    toggleDate = () => {\n        const { showDate } = this.state;\n        this.setState({ showDate: !showDate });\n    }\n\n    touchStart = (e) => {\n        e.stopPropagation();\n        this.setState({\n            startY: e.touches[0].pageY,\n        })\n    }\n\n    touchEnd = (e) => {\n        e.stopPropagation();\n        this.setState({\n            startY: undefined,\n            readyToRefresh: false,\n        })\n    }\n\n    touchMove = (e) => {\n        e.stopPropagation();\n        const { close } = this.props;\n        const { startY, refreshing } = this.state;\n        const scrollDistance = 30;\n        const y = e.touches[0].pageY;\n        if (this.appContainer) {\n            const { scrollTop } = this.appContainer;\n            if (scrollTop === 0 && y > startY + scrollDistance && !refreshing) {\n                close();\n            }\n        }\n    }\n\n    render() {\n        const { showDate } = this.state;\n        const { image, imagexxl, close, thumb, name, title, date } = this.props;\n        return (\n            <div class='fixed-top bg-dark text-center pt-2' style='width: 100vw; height: 100vh;'>\n                <button class='btn btn-secondary float-right mr-2' onClick={close}>X</button>\n\n                    <div class='d-flex mb-2 px-2'>\n                        {/* {JSON.stringify(dog, null, 4)} */}\n                        {thumb && <div class={`text-center border rounded-circle imageRounded imageRoundedSmall`} style={thumb ? `background-image: url(\"${thumb}\");` : ''}>\n                            &nbsp;\n                        </div>}\n                        <div class='flex-grow-1 pl-3 pr-2 text-left' style='line-height: 1.3em;'>\n                            {name && <strong class='mr-2'>{name}:</strong>}\n                            {title}<br />\n                            <small class='text-muted'>\n                                {date && <small onClick={this.toggleDate}>\n                                    {showDate ? util.formatDate(date, { locale: 'no-NB' }) : util.formatDistance(date, new Date(), { locale: 'no-NB' })}\n                                </small>}\n                            </small>\n                        </div>\n                    </div>\n\n\n                <img src={image}\n                    class='img-fluid align-middle mt-2 mb-2'\n                    onClick={close}\n                    onTouchstart={this.touchStart}\n                    onTouchend={this.touchEnd}\n                    onTouchmove={this.touchMove}\n                    ref={c => this.appContainer = c}\n                />\n\n                <a target='_blank' rel='noopener noreferrer' href={imagexxl || image} download={imagexxl || image}>\n                    <i class='fas fa-download' /> <Text id='modal.download'>Last ned bildet</Text>\n                </a>\n            </div>\n        );\n    }\n}\n\nexport default Modal;\n","import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport { Text, Localizer } from 'preact-i18n';\n\nimport mu from '../../lib/musher-util';\n\nfunction kgToPounds(value) {\n    return 2.20462 * value;\n}\n\n@observer\nclass Weight extends Component {\n    render() {\n\t\tconst { value = 0, smallUnit } = this.props;\n\t\tconst { userStore } = this.props.stores;\n\t\tconst { user } = userStore;\n\t\tconst { settings = {} } = user;\n\n        if (settings.imperial) {\n            return (<>\n                <nobr>\n                    {util.format(kgToPounds(value), 0)} lb\n                </nobr>\n            </>);\n        }\n\n\t\treturn (<>\n            <nobr>\n                {util.format(value, 0)} kg\n            </nobr>\n        </>);\n    }\n}\n\nexport default Weight;\n","import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport { Text, Localizer, withText } from 'preact-i18n';\n\nimport Speed from '../../components/data/speed';\nimport Elevation from '../../components/data/elevation';\nimport Weight from '../../components/data/weight';\nimport Distance from '../../components/data/distance';\nimport Temperature from '../../components/data/temperature';\n\n@observer\nclass Strava extends Component {\n    toggleDate = (e) => {\n        e.stopPropagation();\n        e.preventDefault();\n        const { showDate } = this.state;\n        this.setState({ showDate: !showDate });\n    }\n\n    ignoreStravaWorkout = async (e) => {\n        e.stopPropagation();\n        const id = e.target.parentElement.dataset.id || e.target.dataset.id;\n        const { stravaActivityStore } = this.props.stores;\n\t\tawait stravaActivityStore.ignoreWorkout(id);\n        this.loadStravaActivities();\n    }\n\n    importStravaWorkout = async (e) => {\n        e.stopPropagation();\n        const id = e.target.parentElement.dataset.id || e.target.dataset.id;\n        const { stravaActivityStore, workoutStore } = this.props.stores;\n\t\tconst { currentTeam } = workoutStore;\n\t\tawait stravaActivityStore.importWorkout(id, currentTeam);\n        this.loadStravaActivities();\n        this.loadWorkouts();\n    }\n\n    async loadStravaActivities() {\n\t\tconst { stravaActivityStore } = this.props.stores;\n\t\tstravaActivityStore.load({ query: { hideImported: 1 }});\n\t}\n\n    loadWorkouts = async () => {\n\t\tconst { workoutStore } = this.props.stores;\n\t\tconst { currentTeam } = workoutStore;\n\t\tawait workoutStore.load({ query: { team: currentTeam } });\n\t}\n\n    toggleDetail = () => {\n        const { showDetail = false } = this.state;\n        this.setState({\n            showDetail: !showDetail,\n        });\n    }\n\n\tcomponentDidMount() {\n\t\tthis.loadStravaActivities();\n\t}\n\n    render() {\n        const { showDate, showDetail = false } = this.state;\n        const { activities, showDate: forceShowDate } = this.props;\n\t\tconst { userStore, workoutStore } = this.props.stores;\n        const { currentTeam } = workoutStore;\n        const { team } = userStore;\n\n        const selectedTeam = userStore.findTeam(currentTeam || team.id);\n\n         if (!showDetail) {\n            if (activities && activities.length > 0) {\n                return (<>\n                    <div class='col-12 mb-3'>\n                        <button type='button' class='btn btn-block btn-outline-info' onClick={this.toggleDetail}>\n                            <div class={`float-right ml-2 text-center border rounded-circle imageRounded imageRoundedIcon`} style={`background-image: url('./assets/strava-icon.png');`} />\n                            <Text id='workout.index.strava-workouts'>Strava workouts / not imported</Text> {activities.length}\n                        </button>\n                    </div>\n                </>);\n            }\n            return (<></>);\n        }\n\n        return (<>\n            <div class='col-12 mb-3'>\n                <div class='row'>\n                    {activities && activities.length > 0 && (\n                        <div\n                            class='col-12 border-top border-bottom pt-3 pb-3 my-2 bg-light'\n                        >\n                            <button type='button' class='float-right btn btn-sm btn-link' onClick={this.toggleDetail}>\n                                <i class='fas fa-caret-up' /> <Text id='strava.hide-list'>Hide list</Text>\n                            </button>\n                            <h5><Text id='workout.index.strava-workouts'>Strava workouts / not imported</Text> {activities.length}</h5>\n                            {activities && activities.map(activity => {\n                                const { summary = {} } = activity;\n                                const startDate = util.parseInputDate(summary.startTimeInSeconds);\n\n                                return (<>\n                                    {/* <td>{util.secToHms(activity.moving_time)}</td> */}\n                                    {/* <td>{util.secToHms(activity.elapsed_time)}</td> */}\n\n                                    <div class='col-12 d-flex mb-4 position-relative'>\n                                        <div class={`text-center border rounded-circle imageRounded`} style={`background-image: url(\"./assets/strava-icon.png\"); border-width: 3px !important;`}>\n                                            &nbsp;\n                                        </div>\n                                        <div class='flex-grow-1 pl-3' style='line-height: 1.2em;'>\n                                            <h5 class='my-0 mb-1' style='line-height: 1.0em;'>{activity.name}</h5>\n                                            {activity.type}<br />\n                                            <small class='text-muted'>\n                                                {activity.start_date && <small onClick={this.toggleDate}>\n                                                    {forceShowDate || showDate ? util.formatDate(activity.start_date, { locale: 'no-NB' }) : util.formatDistance(activity.start_date, new Date(), { locale: 'no-NB' })}\n                                                </small>}\n                                                <span class='text-muted'>\n                                                    <i class='fas fa-road ml-2' /> <Distance stores={this.props.stores} value={activity.distance / 1000} />\n                                                    <i class='fas fa-mountain ml-2' /> <Elevation stores={this.props.stores} value={activity.total_elevation_gain} />\n                                                    <i class='fas fa-tachometer-alt ml-2' /> <Speed stores={this.props.stores} value={activity.average_speed * 3.6} />\n                                                    <i class='fas fa-stopwatch ml-2' /> {util.secToHms(activity.elapsed_time)}\n                                                </span>\n                                            </small>\n                                            <br />\n                                            <button class='btn btn-sm btn-block btn-primary' onClick={this.importStravaWorkout} data-id={activity.id}>\n                                                <i class='fas fa-file-import' /> <Text id='strava.import'>Import workout</Text> <i class='fas fa-arrow-right' /> {selectedTeam}\n                                            </button>\n                                            <button class='btn btn-sm btn-link' onClick={this.ignoreStravaWorkout} data-id={activity.id}>\n                                                <i class='fas fa-trash-alt' /> <Text id='strava.ignore'>Ignore workout</Text>\n                                            </button>\n                                        </div>\n                                    </div>\n                                </>);\n                            })}\n\n                            <button type='button' class='btn btn-block btn-primary mt-3' onClick={this.toggleDetail}>\n                                <i class='fas fa-caret-up' /> <Text id='strava.hide-list'>Hide list</Text>\n                            </button>\n                        </div>\n                    )}\n                </div>\n            </div>\n        </>);\n    }\n}\n\nexport default Strava;\n","import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport { Text, Localizer, withText } from 'preact-i18n';\nimport linkState from 'linkstate';\n\nimport mu from '../../lib/musher-util';\nconst MARGIN_TOP = mu.marginTop(true);\nconst MARGIN_BOTTOM = mu.marginBottom();\nconst SUB_MENU_MARGIN_TOP = mu.subMenuMarginTop();\n\nimport Workout from '../../components/workout';\nimport Strava from '../../components/strava';\nimport Garmin from '../../components/garmin';\nimport Teams from '../../components/team/teams';\n\nimport FastList from '../../components/team/fastList';\n\nconst initialState = {\n\tisLoading: false,\n\toffset: 0,\n\tlimit: 5,\n\tsessionid: new Date().getTime(),\n};\n\nconst dataFields = ['id', 'type', 'user', 'team', 'title'];\n\n@observer\nclass Workouts extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            ...initialState,\n        };\n    }\n\n\t// loadMore = () => {\n\t// \tconst { offset } = this.state;\n\t// \tthis.setState({ offset: offset + LIMIT }, () => {\n\t// \t\tthis.loadWorkouts(true);\n\t// \t});\n\t// }\n\n\tloadWorkouts = async ({ limit, offset }) => {\n\t\tthis.setState({ isLoading: true });\n\t\tconst { workoutStore } = this.props.stores;\n\t\tconst { currentTeam } = workoutStore;\n\t\tconst append = offset > 0;\n\t\tawait workoutStore.load({\n\t\t\tquery: { team: currentTeam },\n\t\t\tlimit,\n\t\t\toffset,\n\t\t\taddData: ['publicTeams', 'publicUsers'],\n\t\t}, append);\n\t\tthis.setState({ isLoading: false });\n\t}\n\n\tchangeTeam = () => {\n\t\tconst { limit } = this.state;\n        this.loadWorkouts({ limit, offset: 0 });\n\t}\n\n    setLoadMore = () => {\n        const { workoutStore } = this.props.stores;\n        workoutStore.setLoadMore(() => {\n            let { limit, offset } = this.state;\n            offset += limit;\n            this.setState({ offset });\n            this.loadWorkouts({ limit, offset });\n        });\n    }\n\n    unsetLoadMore = () => {\n        const { workoutStore } = this.props.stores;\n        workoutStore.setLoadMore(() => {});\n    }\n\n\tloadDogs = async () => {\n\t\tconst { dogStore } = this.props.stores;\n\t\tconst { currentTeam } = dogStore;\n\n\t\tawait dogStore.load({ query: { team: currentTeam }, addData: ['workoutSummary'] });\n\t}\n\n\tasync loadTracks() {\n\t\tconst { trackStore } = this.props.stores;\n\t\tawait trackStore.load();\n\t}\n\n\tasync loadWorkoutSummary() {\n\t\tconst { userStore, workoutStore } = this.props.stores;\n\t\tconst { currentTeam } = workoutStore;\n        await userStore.getWorkoutSummary({ team: currentTeam });\n    }\n\n\tasync loadStravaActivities() {\n\t\tconst { stravaActivityStore } = this.props.stores;\n\t\tstravaActivityStore.load({ query: { hideImported: 1 }});\n\t}\n\n\tasync loadGarminActivities() {\n\t\tconst { garminActivityDetailsStore } = this.props.stores;\n\t\tgarminActivityDetailsStore.load({ query: { hideImported: 1 }});\n\t}\n\n\tremoveFilterText = () => {\n\t\tthis.setState({ filterText: '' });\n\t}\n\n    renderContent = ({ obj, idx }) => {\n        const { appState } = this.props.stores;\n        const { path } = appState;\n        const { hashtag } = this.props;\n\n        return (<>\n\t\t\t<Workout\n\t\t\t\tstores={this.props.stores}\n\t\t\t\tworkout={obj}\n\t\t\t\tshowDate={true}\n\t\t\t\twrapperClasses={'w-100'}\n\t\t\t\twrapperClassesRow={''}\n\t\t\t/>\n        </>);\n    }\n\n\t// Scroll views timer\n    setupIntersection = () => {\n        this.setState({\n            handleIntersection: mu.intersectionObserverCallback,\n        });\n        const { workoutStore } = this.props.stores;\n        this.scrollViewTimer = setInterval(() => workoutStore.postScrollview(mu.getIntersectionObserverHistory()), 30 * 1000);\n    }\n\n\tcomponentWillMount() {\n        this.setupIntersection();\n    }\n\n\tcomponentWillUnmount() {\n        const { workoutStore, garminActivityDetailsStore, stravaActivityStore } = this.props.stores;\n        workoutStore.postScrollview(mu.getIntersectionObserverHistory());\n        clearInterval(this.scrollViewTimer);\n        this.unsetLoadMore();\n\t\t// workoutStore.cleanupMemory();\n    }\n\t// /Scroll views timer\n\n\n    componentDidMount() {\n\t\tconst { limit } = this.state;\n        this.loadWorkouts({ limit, offset: 0 });\n\t\tthis.loadDogs();\n\t\t// this.loadTracks();\n\t\tthis.loadStravaActivities();\n\t\tthis.loadGarminActivities();\n\t\tthis.setLoadMore();\n    }\n\n\trender() {\n        const { scrolledDown } = this.props;\n\t\tconst { isLoading, filterText, handleIntersection, sessionid } = this.state;\n\t\tconst { trackStore, workoutStore, dogStore, appState, stravaActivityStore, garminActivityDetailsStore, userStore } = this.props.stores;\n\t\tconst { darkmode } = appState;\n\t\tconst { message } = this.props;\n\t\tconst { workouts, currentTeam } = workoutStore;\n\t\tconst currentTeamObject = userStore.findTeam(currentTeam, true);\n\n\t\tlet workoutFilter = () => true;\n\t\tif (filterText) {\n\t\t\tworkoutFilter = (e) => e.name.match(new RegExp(filterText, 'i'));\n\t\t}\n\t\tconst workoutsFiltered = workouts.filter(workoutFilter);\n\n\t\tconst { tracks } = trackStore;\n\t\tconst { dogs } = dogStore;\n\t\tconst { user } = userStore;\n\t\tconst { stravaActivities = [] } = stravaActivityStore;\n\t\tconst { garminActivityDetails = [] } = garminActivityDetailsStore;\n\t\treturn (\n\t\t\t<div class='container-fluid' style={`margin-bottom: ${MARGIN_BOTTOM}; margin-top: ${MARGIN_TOP};`}>\n\t\t\t\t<div class='row fixed-top pt-2' style={`margin-top: ${scrolledDown > 0 ? 0 : SUB_MENU_MARGIN_TOP}; background-color: ${darkmode ? '#191d21' : '#f8f9fa'}; transition: all 0.3s ease-in-out;`}>\n\t\t\t\t\t<div class='col text-center subtopmenu'>\n\t\t\t\t\t\t<a href='/workouts/' class='text-secondary stretched-link'><nobr><i class='fas fa-chart-line' /> <Text id='workout.index.dashboard'>Oversikt</Text></nobr></a>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class='col text-center border-bottom border-primary subtopmenu'>\n\t\t\t\t\t\t<a href='/workouts/list' class='text-primary stretched-link'><nobr><i class='fas fa-list' /> <Text id='workout.index.list'>Liste</Text></nobr></a>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class='col text-center subtopmenu'>\n\t\t\t\t\t\t<a href='/workouts/plan' class='text-secondary stretched-link'><nobr><i class='fas fa-calendar-alt' /> <Text id='workout.index.plan'>Plan</Text></nobr></a>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\n\t\t\t\t{message && (\n\t\t\t\t\t<div class='alert alert-success mb-3' role='alert'>\n\t\t\t\t\t\t<i class='fas fa-check' /> {message}\n\t\t\t\t\t</div>\n\t\t\t\t)}\n\n\t\t\t\t<div class='row'>\n\t\t\t\t\t<div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 border-bottom'>\n\t\t\t\t\t\t<Teams stores={this.props.stores} callback={this.changeTeam} key={`teams-${currentTeam}`} />\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-2 mb-2'>\n\t\t\t\t\t\t<a class='btn btn-primary btn-sm float-right'\n\t\t\t\t\t\t\thref='/workouts/edit/new'\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<i class='fas fa-plus' /> <Text id='workout.index.add-workout'>Legg til treningstur</Text>\n\t\t\t\t\t\t</a>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mb-3'>\n\t\t\t\t\t\t<div class='row mt-3'>\n\t\t\t\t\t\t\t{user && user.strava && <>\n\t\t\t\t\t\t\t\t<Strava stores={this.props.stores} activities={stravaActivities} key={`strava-${currentTeam}-${stravaActivities.length}`} />\n\t\t\t\t\t\t\t</>}\n\t\t\t\t\t\t\t{user && user.garmin && <>\n\t\t\t\t\t\t\t\t<Garmin stores={this.props.stores} activities={garminActivityDetails} key={`garmin-${currentTeam}-${garminActivityDetails.length}`} />\n\t\t\t\t\t\t\t</>}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div class='col-12'>\n\n\t\t\t\t\t\t{/* <div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 px-0 mb-3'>\n\n\t\t\t\t\t\t\t<div class='input-group mb-3'>\n\t\t\t\t\t\t\t\t<Localizer>\n\t                                <input\n\t\t\t\t\t\t\t\t\t\tclass='form-control form-control'\n\t\t\t\t\t\t\t\t\t\ttype='text'\n\t\t\t\t\t\t\t\t\t\tautocomplete='off'\n\t\t\t\t\t\t\t\t\t\tvalue={filterText}\n\t\t\t\t\t\t\t\t\t\tplaceholder={<Text id='workouts.search-for'>Søk etter trening</Text>}\n\t\t\t\t\t\t\t\t\t\tonInput={linkState(this, 'filterText')}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</Localizer>\n\t\t\t\t\t\t\t\t{filterText && <div class='input-group-append'>\n\t\t\t\t\t\t\t\t\t<button class='btn btn-sm btn-outline-danger' type='button' onClick={this.removeFilterText}><i class='fas fa-times' /></button>\n\t\t\t\t\t\t\t\t</div>}\n\t\t\t\t\t\t\t</div>\n\n                        </div>\n */}\n\t\t\t\t\t\t<div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 px-0'>\n\t\t\t\t\t\t\t<h5>\n\t\t\t\t\t\t\t\t{/* <Text id='workouts.all-workouts' fields={{ total: workoutsFiltered.length }}>Treningsturene - {workoutsFiltered.length} stk</Text> */}\n\t\t\t\t\t\t\t\t{currentTeamObject && currentTeamObject.name && <div>\n\t\t\t\t\t\t\t\t\t<small class='font-weight-lighter'>(<Text id='workout.index.filtered-by'>Filtered by</Text>: {currentTeamObject.name})</small>\n\t\t\t\t\t\t\t\t</div>}\n\t\t\t\t\t\t\t</h5>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t{!isLoading && workouts && workouts.length === 0 && (\n\t\t\t\t\t\t\t<div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 text-muted'>\n\t\t\t\t\t\t\t\t{dogs && dogs.length === 0 && (\n\t\t\t\t\t\t\t\t\t<div class='mb-5 py-3 text-center border-top border-bottom'>\n\t\t\t\t\t\t\t\t\t\t<div class='display-4'>\n\t\t\t\t\t\t\t\t\t\t\t<i class='fas fa-dog' />\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<h5>\n\t\t\t\t\t\t\t\t\t\t\t<Text id='workouts.no-dogs'>Ingen hunder er registert.</Text>\n\t\t\t\t\t\t\t\t\t\t</h5>\n\t\t\t\t\t\t\t\t\t\t<Text id='workouts.no-dogs-tip'>Det er lurt å legge inn hunder før du registrerer en treningstur.</Text><br />\n\t\t\t\t\t\t\t\t\t\t<a class='btn btn-info mt-3' href='/dogs/edit/new'>\n\t\t\t\t\t\t\t\t\t\t\t<i class='fas fa-dog' /> <Text id='workouts.add-dog'>Legg til hund</Text>\n\t\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t)}\n\n\t\t\t\t\t\t\t\t{tracks && tracks.length === 0 && (\n\t\t\t\t\t\t\t\t\t<div class='mb-5 py-3 text-center border-top border-bottom'>\n\t\t\t\t\t\t\t\t\t\t<div class='display-4'>\n\t\t\t\t\t\t\t\t\t\t\t<i class='fas fa-map-marked' />\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<h5>\n\t\t\t\t\t\t\t\t\t\t\t<Text id='workouts.no-tracks'>Ingen runder er registert.</Text>\n\t\t\t\t\t\t\t\t\t\t</h5>\n\t\t\t\t\t\t\t\t\t\t<Text id='workouts.no-tracks-tip-1'>Det er lurt å legge inn runden før du registrerer en treningstur. Da får du automatisk fylt ut distanse og høydemeter.</Text><br />\n\t\t\t\t\t\t\t\t\t\t<Text id='workouts.no-tracks-tip-2'>Dersom du ikke har GPX-filen fra denne runden, så kan du likevel registrere treningen.</Text><br />\n\n\t\t\t\t\t\t\t\t\t\t<a class='btn btn-info mt-3' href='/tracks/edit/new'>\n\t\t\t\t\t\t\t\t\t\t\t<i class='fas fa-map-marked' /> <Text id='workouts.add-track'>Legg til runde</Text>\n\t\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t)}\n\n\t\t\t\t\t\t\t\t<div class='text-center mb-5'>\n\t\t\t\t\t\t\t\t\t<div class='display-1'>\n\t\t\t\t\t\t\t\t\t\t<i class='fas fa-running' />\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<h5>\n\t\t\t\t\t\t\t\t\t\t<Text id='workouts.no-workouts'>Ingen treningsturer er registrert ennå.</Text>\n\t\t\t\t\t\t\t\t\t</h5>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<p class='text-center'>\n\t\t\t\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t\t\t\t<Text id='workouts.no-workouts-1'>Tracking i appen er ikke helt klart ennå pga noen tekniske begrensninger i Apple iOS.</Text>\n\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t\t\t\t<Text id='workouts.no-workouts-2'>Når jeg får tak i en Android telefon skal jeg får satt opp denne funksjonen slik at den kan brukes der.</Text>\n\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t<p class='text-center'>\n\t\t\t\t\t\t\t\t\t<Text id='workouts.no-workouts-3'>Kart over ruten du har kjørt legges inn som GPX under runder.</Text>\n\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t<Text id='workouts.no-workouts-howto'>Slik kommer du i gang</Text>:\n\t\t\t\t\t\t\t\t<ol>\n\t\t\t\t\t\t\t\t\t<li><Text id='workouts.no-workouts-howto-1'>Trykk på knappen \"Legg til treningstur\" oppe til høyre.</Text></li>\n\t\t\t\t\t\t\t\t</ol>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t)}\n\n\t\t\t\t\t\t<FastList\n\t\t\t\t\t\t\tdata={workoutsFiltered}\n\t\t\t\t\t\t\twrapperClassNames={'row pb-4'}\n\t\t\t\t\t\t\tcontentClassNames={`col-12 col-sm-8 col-lg-6 offset-sm-2 offset-lg-3 my-1 position-relative rounded rounded-lg py-3 bg-${darkmode ? 'black' : 'white'} shadow-sm`}\n\t\t\t\t\t\t\trenderContent={this.renderContent}\n\t\t\t\t\t\t\tdataFields={dataFields}\n\t\t\t\t\t\t\tdataValues={{ type: '11' }}\n\t\t\t\t\t\t\thandleIntersection={handleIntersection}\n\t\t\t\t\t\t\tsessionid={sessionid}\n\t\t\t\t\t\t/>\n\n\t\t\t\t\t\t{/* {workoutsFiltered && workoutsFiltered.map(workout => (\n\t\t\t\t\t\t\t<Workout stores={this.props.stores} workout={workout} showDate={true} />\n\t\t\t\t\t\t))} */}\n\t\t\t\t\t</div>\n\n\t\t\t\t\t{/* <div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 text-center'>\n\t\t\t\t\t\t<button class='btn btn-sm btn-link text-muted'\n\t\t\t\t\t\t\tstyle='font-size: 1.5em;'\n\t\t\t\t\t\t\tonClick={this.loadMore}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<i class='fas fa-download' /> Load {LIMIT} more...\n\t\t\t\t\t\t</button>\n\t\t\t\t\t</div> */}\n\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nexport default Workouts;\n","import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport { Text, Localizer } from 'preact-i18n';\n\nimport mu from '../../lib/musher-util';\n\nfunction meterToFeet(value) {\n    return 3.28084 * value;\n}\n\n@observer\nclass Elevation extends Component {\n    render() {\n\t\tconst { value = 0, smallUnit } = this.props;\n\t\tconst { userStore } = this.props.stores;\n\t\tconst { user } = userStore;\n\t\tconst { settings = {} } = user;\n\n        if (settings.imperial) {\n            return (<>\n                <nobr>\n                    {util.format(meterToFeet(value), 0)} {smallUnit ? <><small><small><small class='ml-0 text-muted'>ft</small></small></small></> : <>ft</>}\n                </nobr>\n            </>);\n        }\n\n\t\treturn (<>\n            <nobr>\n                {util.format(value, 0)} {smallUnit ? <><small><small><small class='ml-0 text-muted'>m</small></small></small></> : <>m</>}\n            </nobr>\n        </>);\n    }\n}\n\nexport default Elevation;\n","import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport { Text, Localizer } from 'preact-i18n';\n\nimport mu from '../../lib/musher-util';\n\nfunction kmtToMph(value) {\n    return 0.621371 * value;\n}\n\n@observer\nclass Speed extends Component {\n    render() {\n\t\tconst { value = 0, smallUnit } = this.props;\n\t\tconst { userStore } = this.props.stores;\n\t\tconst { user } = userStore;\n\t\tconst { settings = {} } = user;\n\n        if (settings.imperial) {\n            return (<>\n                <nobr>\n                    {util.format(kmtToMph(value), 1)} {smallUnit ? <><small><small><small class='ml-0 text-muted'><Text id='workouts.mph'>mph</Text></small></small></small></> : <><Text id='workouts.mph'>mph</Text></>}\n                </nobr>\n            </>);\n        }\n\n\t\treturn (<>\n            <nobr>\n                {util.format(value, 1)} {smallUnit ? <><small><small><small class='ml-0 text-muted'><Text id='workouts.kmt'>km/t</Text></small></small></small></> : <><Text id='workouts.kmt'>km/t</Text></>}\n            </nobr>\n        </>);\n    }\n}\n\nexport default Speed;\n","import { h, Component } from 'preact';\nimport { observer } from 'mobx-preact';\nimport { toJS } from 'mobx';\nimport util from 'preact-util';\n\nimport DragNDropFileupload from './dragNdropFileupload';\n\n@observer\nclass Images extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            files: [],\n        };\n    }\n    \n    handleAddImage = (file) => {\n        const { addToImages = true } = this.props;\n\n        // <Images saved={saved} object={dog} field={field} updateField={updateField} />\n        // updateFieldValue = ({ id, field, value, datatype, elementtype, isNew = false, skipTimer = false }) => {\n        const {\n            updateField,\n            object,\n            field,\n        } = this.props;\n\n        if (field) {\n            updateField({ id: object.id, field, value: file, skipTimer: true });\n        }\n\n        // let images = toJS(object.images);\n        // if (!util.isArray(images)) {\n        //     images = [];\n        // }\n        if (addToImages) {\n            const images = [];\n            images.push(file);\n            updateField({ id: object.id, field: 'images', value: images, skipTimer: true });\n        }\n        // const allImages = [];\n        // allImages.push(file);\n        // updateField({ id: object.id, field: 'allImages', value: allImages, skipTimer: true });\n    };\n\n    render() {\n        const { uploadStatus = () => {}, before = () => {}, after = () => {}, autoOpen = true } = this.props;\n        return (\n            <div class='row'>\n                <div class='col-12'>\n                    <DragNDropFileupload\n                        handleAddImage={this.handleAddImage}\n                        uploadStatus={uploadStatus}\n                        apiUrl={'/api/fileupload'}\n                        before={before}\n                        after={after}\n                        autoOpen={autoOpen}\n                    >\n                        <div style={{ height: 30, width: '100%' }}>\n                            {/* {files.map((file, idx) => (\n                                <div key={idx}>\n                                    {file.name}\n                                    Total: {util.asString(file, 'load', 'total')}\n                                    <img style='width: 48px;'\n                                        alt='Preview'\n                                        key={file.preview}\n                                        src={file.src}\n                                    />\n                                </div>\n                            ))} */}\n                        </div>\n                    </DragNDropFileupload>\n                </div>\n            </div>\n        );\n    }\n}\n\nexport default Images;\n","import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport { Text, Localizer } from 'preact-i18n';\n\nimport ScrollIntoView from '../../components/util/scrollIntoView';\n\n@observer\nclass Teams extends Component {\n    toggleTeam = (team) => {\n\t\tconst { callback, unsetTeamIfSelected = true } = this.props;\n        const { dogStore, workoutStore } = this.props.stores;\n\t\tconst { currentTeam } = dogStore;\n\t\tif (unsetTeamIfSelected && team === currentTeam) {\n\t\t\tdogStore.setCurrentTeam(undefined);\n\t\t\tworkoutStore.setCurrentTeam(undefined);\n\t\t} else {\n\t\t\tdogStore.setCurrentTeam(team);\n\t\t\tworkoutStore.setCurrentTeam(team);\n\t\t}\n\t\tif (util.isDefined(callback)) {\n\t\t\tcallback();\n\t\t}\n\t}\n\n    showAllTeams = () => {\n\t\tconst { callback } = this.props;\n        const { dogStore, workoutStore } = this.props.stores;\n\t\tdogStore.setCurrentTeam(undefined);\n\t\tworkoutStore.setCurrentTeam(undefined);\n\t\tif (util.isDefined(callback)) {\n\t\t\tcallback();\n\t\t}\n\t}\n\n\t// componentDidMount() {\n\t// \tif (this.container) {\n\t// \t\tthis.container.scrollIntoView({ behavior: 'smooth', block: 'end', inline: 'center' });\n\t// \t}\n\t// }\n\n    render() {\n        const { userStore, dogStore } = this.props.stores;\n        const { teams } = userStore;\n\t\tconst { currentTeam } = dogStore;\n\t\tconst { highlight, showAll = true } = this.props;\n        return (\n\t\t\t<div class='row mt-2'>\n\t\t\t\t<div class='w-100 overflow-hidden'>\n\t\t\t\t\t<div\n\t\t\t\t\t\tclass='d-flex flex-row flex-nowrap pb-2 px-1 no-scrollbar'\n\t\t\t\t\t\tstyle='overflow: auto; scroll-snap-type: x mandatory;'\n\t\t\t\t\t>\n\t\t\t\t\t\t{/* <xmp><br /><br /><br /><br />{JSON.stringify(teams, null, 4)}</xmp> */}\n\t\t\t\t\t\t{teams && teams.map((team, idx) => {\n\t\t\t\t\t\t\tlet classNames;\n\t\t\t\t\t\t\tif (teams.length === 1) {\n\t\t\t\t\t\t\t\tclassNames = 'rounded-pill-both';\n\t\t\t\t\t\t\t} else if (idx === 0) {\n\t\t\t\t\t\t\t\tclassNames = 'rounded-pill-left';\n\t\t\t\t\t\t\t} else if (idx + 1 === teams.length) {\n\t\t\t\t\t\t\t\tclassNames = 'rounded-pill-right';\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t<div class='col mb-0 px-0 clearfix' key={team.id}>\n\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\tclass={`btn btn-sm btn-block \n\t\t\t\t\t\t\t\t\t\t\trounded-none ${classNames}\n\t\t\t\t\t\t\t\t\t\t\t${currentTeam === team.id ? 'btn-success' : 'btn-outline-success'}\n\t\t\t\t\t\t\t\t\t\t\ttext-nowrap clearfix`}\n\t\t\t\t\t\t\t\t\t\tstyle='text-overflow: ellipsis; overflow: hidden;'\n\t\t\t\t\t\t\t\t\t\tonClick={() => this.toggleTeam(team.id)}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<i class='fas fa-users' /> {team.name}\n\n\t\t\t\t\t\t\t\t\t\t{highlight && highlight.indexOf(team.id) > -1 && <>\n\t\t\t\t\t\t\t\t\t\t\t{currentTeam === team.id ? <>\n\t\t\t\t\t\t\t\t\t\t\t\t<i class='fas fa-check float-right' />\n\t\t\t\t\t\t\t\t\t\t\t</> : <>\n\t\t\t\t\t\t\t\t\t\t\t\t<div class='spinner-grow text-warning float-right' role='status'>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span class='sr-only'>Loading...</span>\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t<i class='far fa-hand-point-left float-right' style='font-size: 2.0em;' />   \n\t\t\t\t\t\t\t\t\t\t\t</>}\n\t\t\t\t\t\t\t\t\t\t</>}\n\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t{/* {currentTeam === team.id && <ScrollIntoView horizontal={'center'} vertical={'end'} />} */}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t})}\n\t\t\t\t\t</div>\n\t\t\t\t\t{showAll && <div class='row'>\n\t\t\t\t\t\t<div class='col-12 mb-1 px-1 d-flex justify-content-center'>\n\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\tclass={`btn btn-sm rounded-lg btn-link text-nowrap clearfix`}\n\t\t\t\t\t\t\t\tstyle='text-overflow: ellipsis; overflow: hidden;'\n\t\t\t\t\t\t\t\tonClick={this.showAllTeams}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<i class='fas fa-users' /> <Text id='teams.show-all'>Show all</Text>\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>}\n\t\t\t\t</div>\n\t\t\t</div>\n        );\n    }\n}\n\nexport default Teams;\n","import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport { toJS } from 'mobx';\nimport { Text, Localizer, withText } from 'preact-i18n';\nimport Markdown from 'preact-markdown';\n\nimport WorkoutReplyComment from '../../components/workout/commentReply';\n\nimport style from '../style.css';\nimport mu from '../../lib/musher-util';\n\nconst initialState = {\n    showAddComment: {},\n    showAllComments: false,\n    showAllReplies: {},\n    viewImageIdx: {},\n};\n\nconst MAX_COMMENTS = 1;\n\n@observer\nclass WorkoutComments extends Component {\n     constructor(props) {\n        super(props);\n        this.state = {\n            ...initialState,\n        };\n        this.inputRef = {};\n    }\n\n    likeComment = async (e) => {\n        const { callback = () => {} } = this.props;\n        const commentId = e.target.parentElement.dataset.id || e.target.dataset.id;\n\n        const { workout } = this.props;\n\t\tconst { workoutStore } = this.props.stores;\n\t\tconst response = await workoutStore.likeWorkoutComment({ id: workout.id, commentId });\n\n\t\tif (response && response.status === 200) {\n            callback({ type: 'likeComment', workout, commentId, response });\n\t\t}\n        return true;\n    }\n\n    likeReply = async (e) => {\n        const { callback = () => {} } = this.props;\n\n        const replyId = e.target.parentElement.dataset.id || e.target.dataset.id;\n        const commentId = e.target.parentElement.dataset.comment || e.target.dataset.comment;\n\n        const { workout } = this.props;\n\t\tconst { workoutStore } = this.props.stores;\n\t\tconst response = await workoutStore.likeWorkoutCommentReply({ id: workout.id, replyId, commentId });\n\n        if (response && response.status === 200) {\n            callback({ type: 'likeReply', workout, commentId, replyId, response });\n\t\t}\n    }\n\n    replyComment = async (e) => {\n        const commentId = e.target.parentElement.dataset.id || e.target.dataset.id;\n\n        const { showAddComment } = this.state;\n        showAddComment[commentId] = !showAddComment[commentId];\n\t\tthis.setState({\n\t\t\tshowAddComment,\n\t\t}, () => {\n            if (this.inputRef[commentId]) {\n                this.inputRef[commentId].focus();\n            }\n\t\t});\n    }\n\n    toggleComments = () => {\n\t\tconst { showAllComments } = this.state;\n\t\tthis.setState({\n\t\t\tshowAllComments: !showAllComments,\n\t\t});\n\t}\n\n    toggleReplies = (e) => {\n        const commentId = e.target.parentElement.dataset.id || e.target.dataset.id;\n\t\tconst { showAllReplies } = this.state;\n        showAllReplies[commentId] = !showAllReplies[commentId];\n\t\tthis.setState({\n\t\t\tshowAllReplies,\n\t\t});\n\t}\n\n    viewImage = (e) => {\n\t\tconst { id, idx } = e.target.closest('img').dataset;\n        const { viewImageIdx } = this.state;\n        viewImageIdx[id] = idx;\n        this.setState({ viewImageIdx });\n    }\n\n    translate = async (e) => {\n        e.preventDefault();\n        e.stopPropagation();\n        const { replyid, commentid } = e.target.closest('button').dataset;\n        const { workout } = this.props;\n        const { userStore, teamStore } = this.props.stores;\n        const { user } = userStore;\n        const { showOriginal = {}, translatedText = {} } = this.state;\n        const key = `${commentid}${replyid ? `-${replyid}`: ''}`;\n        showOriginal[key] = 0;\n        if (replyid) {\n            translatedText[key] = await teamStore.translateCommentReply({ commentid, replyid, object: workout, user });\n        } else {\n            translatedText[key] = await teamStore.translateComment({ commentid, object: workout, user });\n        }\n        this.setState({ showOriginal, translatedText });\n    }\n\n    showOriginal = (e) => {\n        const { replyid, commentid } = e.target.closest('button').dataset;\n        e.preventDefault();\n        e.stopPropagation();\n        const { showOriginal = {} } = this.state;\n        showOriginal[`${commentid}${replyid ? `-${replyid}`: ''}`] = 1;\n        this.setState({ showOriginal });\n    }\n\n    render() {\n        const { showAddComment, showAllComments, showAllReplies, viewImageIdx, showOriginal = {}, translatedText = {} } = this.state;\n\t\tconst { workout, callback = () => {}, col = 12, offset = 0, compact = false } = this.props;\n        const { userStore, teamStore } = this.props.stores;\n        const { user: currentUser, isAdmin } = userStore;\n        const { language = 'en' } = currentUser;\n\n        let filteredComments = [];\n        let totalComments = 0;\n        let diplayedComments = 0;\n        let max_comments;\n        if (workout.comments) {\n            totalComments = workout.comments.length;\n            if (showAllComments) {\n                filteredComments = workout.comments;\n            } else {\n                // filteredComments = workout.comments.slice(0, MAX_COMMENTS);\n                max_comments = compact ? 0 : MAX_COMMENTS;\n                filteredComments = workout.comments.slice(Math.max(totalComments - max_comments, 0));\n            }\n            diplayedComments = filteredComments.length;\n        }\n\n        return (\n            <div>\n                {/* {showAllComments && <div>\n                    <button class='btn btn-sm btn-link py-0 mb-2'\n                        onClick={this.toggleComments}\n                    >\n                        <Text id='comments.hide-all-comments'>Skjul alle kommentarene.</Text>\n                    </button>\n                </div>} */}\n                {workout && filteredComments && filteredComments.reverse().map((comment) => {\n                    const { user = {} } = comment;\n                    const teams = teamStore.findPublicTeamByMembers(user.id);\n                    const displayNameShort = mu.displayNameShort(user);\n                    const displayName = mu.displayName(user);\n                    const userImage = user.image || (user.images ? user.images[0] : undefined);\n                    const hasLikedComment = comment.likes && comment.likes.findIndex(e => e.user === currentUser.id) > -1;\n\n                    let filteredReplises = [];\n                    let totalReplies = 0;\n                    let diplayedReplies = 0;\n                    if (comment.comments) {\n                        totalReplies = comment.comments.length;\n                        if (showAllReplies[comment.id]) {\n                            filteredReplises = comment.comments;\n                        } else {\n                            filteredReplises = comment.comments.slice(0, max_comments);\n                        }\n                        diplayedReplies = filteredReplises.length;\n                    }\n\n                    const images = [];\n                    if (comment.images) {\n                        const imgs = toJS(comment.images);\n                        images.push(...imgs);\n                    }\n                    const imageIdx = viewImageIdx[comment.id] ? viewImageIdx[comment.id] : 0;\n                    const currentImage = images && images[imageIdx] ? images[imageIdx] : null;\n\n                    const { currentLocationGeocode = {} } = comment;\n\n                   const translation = teamStore.getCommentTranslations({\n                        object: workout,\n                        commentid: comment.id,\n                        targetLang: language,\n                    }) || translatedText[comment.id];\n                    let body = translation || comment.comment;\n                    if (showOriginal[comment.id]) {\n                        body = comment.comment;\n                    }\n\n                    return (\n                        <div class='row'>\n                            <div class='col-12 d-flex mb-2 position-relative'>\n                                <div \n                                    class={`text-center border rounded-circle imageRounded imageRoundedSmall`}\n                                    style={`${userImage ? `background-image: url(\"${userImage.s3SmallLink}\"); background-size: cover;` : ''} border-width: 3px !important;`}\n                                >\n                                    {!user.image && <span class='font-weight-lighter' style='font-size: 15px;'>{displayNameShort}</span>}\n                                </div>\n                                <div class='flex-grow-1 pl-3 pt-0' style='line-height: 1.2em;'>\n                                    <div class='bg-light p-2 rounded rounded-lg'>\n                                        <div>\n                                            <span style='font-size: 0.95em;'>\n                                                <h5 class='font-weight-bold mb-0' style='font-size: 1.0em;'>\n                                                    {displayName}\n                                                </h5>\n\n                                                {teams && teams.length > 0 && <div class='mb-2'>\n                                                    <small class='font-weight-lighter text-muted'>\n                                                        {teams.filter(e => e.public === 1).slice(0, 2).map(t => <>\n                                                            <a href={`/teams/public/${t.uuidv4}`} class='mr-2'><i class='fas fa-users text-muted' /> {t.name}</a>\n                                                        </>)}\n                                                    </small>\n                                                </div>}\n\n                                                <Markdown markdown={mu.replaceImages(body, comment.images, language)} markdownOpts={mu.getMarkdownOptions()} />\n                                            </span>\n                                        </div>\n                                        <div class='container-fluid px-3 mt-1'>\n                                            {currentImage && <div class='clearfix row'>\n                                                <div\n                                                    class={`col-12 px-0 overflow-hidden`}\n                                                    style={`max-height: 30vh;`}                                                    \n                                                >\n                                                    <img loading='lazy' class={`img-fluid`} style='min-width: 100px;' src={currentImage.s3LargeLink} />\n                                                </div>\n                                            </div>}\n                                            {images && images.length > 1 && <div class='clearfix d-flex flex-wrap row'>\n                                                {images.map((img, idx) => {\n                                                    return (<>\n                                                        <div\n                                                            class={`col px-0 overflow-hidden`}\n                                                            style={`max-height: 100px; min-width: 100px;`}\n                                                        >\n                                                            <img loading='lazy' class={`img-fluid border`} style='min-width: 100px;' src={img.s3SmallLink} onClick={this.viewImage} data-id={comment.id} data-idx={idx} />\n                                                        </div>\n                                                    </>);\n                                                })}\n                                            </div>}\n                                        </div>\n                                    </div>\n                                    <small>\n                                        <button class={`btn btn-sm btn-link py-0 ${hasLikedComment ? 'text-primary' : ''}`}\n                                            onClick={this.likeComment}\n                                            data-id={comment.id}\n                                        >\n                                            <Text id='comments.like'>Lik</Text>\n                                        </button>\n                                        -\n                                        <button class='btn btn-sm btn-link py-0'\n                                            onClick={this.replyComment}\n                                            data-id={comment.id}\n                                        >\n                                            <Text id='comments.comment-add'>Kommentar</Text>\n                                        </button>\n                                        {comment.language !== language && <>\n                                            -\n                                            {!showOriginal[comment.id] && translation ? <>\n                                                <button\n                                                    type='button'\n                                                    class='btn btn-sm btn-link'\n                                                    data-commentid={comment.id}\n                                                    onClick={this.showOriginal}\n                                                >\n                                                    <i class='fas fa-cog' />  <Text id='home.translate-show-original'>Show original</Text>\n                                                </button>\n                                            </> : <>\n                                                <button\n                                                    type='button'\n                                                    class='btn btn-sm btn-link'\n                                                    onClick={this.translate}\n                                                    data-commentid={comment.id}\n                                                >\n                                                    <i class='fas fa-cog' /> <Text id='home.translate-to'>See translation</Text>\n                                                </button>\n                                            </>}\n                                        </>}\n                                        -\n                                        <button class='btn btn-sm btn-link py-0 disabled'>\n                                            {util.formatDistance(comment.createdDate, new Date(), { locale: 'no-NB' })}\n                                            {comment.updatedDate && <>\n                                                <span class='font-weight-light ml-2'>(Edited {util.formatDistance(comment.updatedDate, new Date(), { locale: 'no-NB' })})</span>\n                                            </>}\n                                        </button>\n                                        {isAdmin && currentLocationGeocode && currentLocationGeocode.formatted_address && <>\n                                            <span class='ml-2 text-muted'>\n                                                <i class='fas fa-map-marker-alt' /> {currentLocationGeocode.formatted_address}\n                                            </span>\n                                        </>}\n                                    </small>\n                                </div>\n                                {comment.likes && comment.likes.length > 0 && <small class='position-absolute bg-light shadow-sm rounded-lg py-0 px-1' style='bottom: 20px; right: 15px;'>\n                                    <i class='fas fa-thumbs-up text-primary' /> {comment.likes.length}\n                                </small>}\n                            </div>\n                            <div class='col-11 offset-1 mb-2'>\n\n                                {comment && filteredReplises && filteredReplises.map((reply) => {\n                                    const { user = {} } = reply;\n                                    const teams = teamStore.findPublicTeamByMembers(user.id);\n                                    const displayNameShort = user.firstname ? `${util.ucfirst(user.firstname, true)}${util.ucfirst(user.lastname, true)}` : `${util.ucfirst(user.email || '', true)}`;\n                                    const displayName = user.firstname ? `${user.firstname} ${user.lastname}` : `${user.email}`;\n                                    const userImage = user.image || (user.images ? user.images[0] : undefined);\n                                    const hasLikedReply = reply.likes && reply.likes.findIndex(e => e.user === currentUser.id) > -1;\n\n                                    const replyTranslation = teamStore.getCommentReplyTranslations({\n                                        object: workout,\n                                        commentid: comment.id,\n                                        replyid: reply.id,\n                                        targetLang: language,\n                                    }) || translatedText[`${comment.id}-${reply.id}`];\n                                    let replyBody = replyTranslation || reply.comment;\n                                    if (showOriginal[`${comment.id}-${reply.id}`]) {\n                                        replyBody = reply.comment;\n                                    }\n\n                                    return (\n                                        <div class='row'>\n                                            <div class='col-12 d-flex mb-2 position-relative'>\n                                                <div \n                                                    class={`text-center border rounded-circle imageRounded imageRoundedThumb`}\n                                                    style={`${userImage ? `background-image: url(\"${userImage.s3SmallLink}\"); background-size: cover;` : ''} border-width: 3px !important;`}\n                                                >\n                                                    {!user.image && <span class='font-weight-lighter' style='font-size: 15px;'>{displayNameShort}</span>}\n                                                </div>\n                                                <div class='flex-grow-1 pl-3 pt-0' style='line-height: 1.2em;'>\n                                                    <div class='bg-light p-2 rounded-lg'>\n                                                        <span style='font-size: 0.95em;'>\n                                                            <h5 class='font-weight-bold mb-0' style='font-size: 1.0em;'>\n                                                                {displayName}\n                                                            </h5>\n\n                                                            {teams && teams.length > 0 && <div class='mb-2'>\n                                                                <small class='font-weight-lighter text-muted'>\n                                                                    {teams.filter(e => e.public === 1).slice(0, 2).map(t => <>\n                                                                        <a href={`/teams/public/${t.uuidv4}`} class='mr-2'>\n                                                                            <i class='fas fa-users text-muted' /> {t.name}\n                                                                        </a>\n                                                                    </>)}\n                                                                </small>\n                                                            </div>}\n\n                                                            <Markdown markdown={mu.replaceImages(replyBody, reply.images, language)} markdownOpts={mu.getMarkdownOptions()} />\n                                                        </span>\n                                                    </div>\n                                                    <small>\n                                                        <button class={`btn btn-sm btn-link py-0 ${hasLikedReply ? 'text-primary' : ''}`}\n                                                            onClick={this.likeReply}\n                                                            data-comment={comment.id}\n                                                            data-id={reply.id}\n                                                        >\n                                                            <Text id='comments.like'>Lik</Text>\n                                                        </button>\n                                                        -\n                                                        <button class='btn btn-sm btn-link py-0'\n                                                            onClick={this.replyComment}\n                                                            data-id={comment.id}\n                                                        >\n                                                            <Text id='comments.comment-add'>Kommentar</Text>\n                                                        </button>\n                                                        {reply.language !== language && <>\n                                                            -\n                                                            {!showOriginal[`${comment.id}-${reply.id}`] && replyTranslation ? <>\n                                                                <button\n                                                                    type='button'\n                                                                    class='btn btn-sm btn-link'\n                                                                    data-commentid={comment.id}\n                                                                    data-replyid={reply.id}\n                                                                    onClick={this.showOriginal}\n                                                                >\n                                                                    <i class='fas fa-cog' />  <Text id='home.translate-show-original'>Show original</Text>\n                                                                </button>\n                                                            </> : <>\n                                                                <button\n                                                                    type='button'\n                                                                    class='btn btn-sm btn-link'\n                                                                    onClick={this.translate}\n                                                                    data-commentid={comment.id}\n                                                                    data-replyid={reply.id}\n                                                                >\n                                                                    <i class='fas fa-cog' /> <Text id='home.translate-to'>See translation</Text>\n                                                                </button>\n                                                            </>}\n                                                        </>}\n                                                        -\n                                                        <button class='btn btn-sm btn-link py-0 disabled'>\n                                                            {util.formatDistance(reply.createdDate, new Date(), { locale: 'no-NB' })}\n                                                        </button>\n                                                    </small>\n                                                </div>\n                                                {reply.likes && <small class='position-absolute bg-light shadow-sm rounded-lg py-0 px-1' style='bottom: 20px; right: 15px;'>\n                                                    <i class='fas fa-thumbs-up text-primary' /> {reply.likes.length}\n                                                </small>}\n                                            </div>\n                                        </div>\n                                    );\n                                })}\n                                {totalReplies - diplayedReplies > 0 && <div>\n                                    <button class='btn btn-sm btn-link py-0'\n                                        onClick={this.toggleReplies}\n                                        data-id={comment.id}\n                                    >\n                                        <Text id='comments.show-more' fields={{ more: totalReplies - diplayedReplies }}>\n                                            Vis {totalReplies - diplayedReplies} flere kommentarer...\n                                        </Text>\n                                    </button>\n                                </div>}\n\n                            </div>\n                            {showAddComment[comment.id] && <div class='col-11 offset-1 d-flex mb-2 position-relative'>\n                                <WorkoutReplyComment stores={this.props.stores} workout={workout}\n                                    callback={callback}\n                                    commentId={comment.id}\n                                    inputRef={c => this.inputRef[comment.id] = c}\n                                    inputRefObject={this.inputRef}\n                                />\n                            </div>}\n                        </div>\n                    );\n                })}\n                {totalComments - diplayedComments > 0 && <div>\n                    <button class='btn btn-sm btn-link py-0'\n                        onClick={this.toggleComments}\n                    >\n                        <Text id='comments.show-more' fields={{ more: totalComments - diplayedComments }}>\n                            Vis {totalComments - diplayedComments} flere kommentarer...\n                        </Text>\n                    </button>\n                </div>}\n                {showAllComments && <div>\n                    <button class='btn btn-sm btn-link py-0'\n                        onClick={this.toggleComments}\n                    >\n                        <Text id='comments.hide-all-comments'>Skjul alle kommentarene.</Text>\n                    </button>\n                </div>}\n            </div>\n        );\n    }\n}\n\nexport default WorkoutComments;\n","import { h, Component, createRef } from 'preact';\nimport { observer } from 'mobx-preact';\nimport util from 'preact-util';\nimport { Text, Localizer, withText } from 'preact-i18n';\n\nconst debug = false;\nconst debugName = 'Images';\n\n@observer\nclass DragNDropFileupload extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            drag: false,\n            loadingProgress: 0,\n            uploadedFiles: [],\n            uploadedFilesData: {},\n        };\n    }\n\n    dropRef = createRef();\n\n    handleDrag = (e) => {\n        e.preventDefault();\n        e.stopPropagation();\n    }\n\n    handleDragIn = (e) => {\n        e.preventDefault();\n        e.stopPropagation();\n        this.dragCounter++;\n        if (e.dataTransfer.items && e.dataTransfer.items.length > 0) {\n            this.setState({ drag: true });\n        }\n    }\n\n    handleDragOut = (e) => {\n        e.preventDefault();\n        e.stopPropagation();\n        this.dragCounter--;\n        if (this.dragCounter === 0) {\n            this.setState({ drag: false });\n        }\n    }\n\n    handleDrop = (e) => {\n        if (debug) {\n            console.log(`${debugName}.handleDrop: event`, e);\n        }\n        e.preventDefault();\n        e.stopPropagation();\n        this.setState({ drag: false });\n        if (e.dataTransfer.files && e.dataTransfer.files.length > 0) {\n            // this.props.handleDrop(e.dataTransfer.files);\n            // e.dataTransfer.clearData();\n            for (let i = 0, l = e.dataTransfer.files.length; i < l; i += 1) {\n                const photo = e.dataTransfer.files[i];\n                // if (photo.type.match('image.*')) {\n                this.readLocalFile(photo);\n                // }\n            }\n            this.dragCounter = 0;\n        }\n    }\n\n    // Upload\n    handleAddFiles = (event) => {\n        event.preventDefault();\n        const el = event.target;\n        if (debug) {\n            console.log(`${debugName}.handleAddFiles: event, el`, event, el);\n        }\n        for (let i = 0, l = el.files.length; i < l; i += 1) {\n            const photo = el.files[i];\n            // if (photo.type.match('image.*')) {\n            this.readLocalFile(photo);\n            // }\n        }\n    }\n\n    handleEvent = (e, fileObject) => {\n        if (debug) {\n            console.log(`${debugName}.handleEvent[${fileObject.name}]: ${e.type}: `\n                + `${e.loaded} bytes transferred of ${e.total}. Is lengthComputable: ${e.lengthComputable}: `\n                + `${JSON.stringify(e)}`);\n        }\n    }\n\n    handleUpload = (fileObject) => {\n        if (debug) {\n            console.log(`${debugName}.handleUpload[${fileObject.name}]`);\n        }\n\n        const { uploadStatus = () => {}, before = () => {}, after = () => {} } = this.props;\n        uploadStatus(false);\n\n        if (util.isFunction(before)) {\n            before();\n        }\n\n        const formData = new FormData();\n        formData.append('files[]', fileObject);\n        const uploadMeta = {\n            progress: 1,\n        };\n\n        uploadMeta.xhr = new XMLHttpRequest();\n\n        uploadMeta.xhr.upload.addEventListener('progress', (event) => {\n            const fileObj = fileObject;\n            this.updateProgress(event, fileObj);\n        });\n        uploadMeta.xhr.addEventListener('loadstart', (event) => {\n            const fileObj = fileObject;\n            this.handleEvent(event, fileObj);\n        });\n        uploadMeta.xhr.addEventListener('load', (event) => {\n            const fileObj = fileObject;\n            this.handleEvent(event, fileObj);\n        });\n        uploadMeta.xhr.addEventListener('loadend', (event) => {\n            const fileObj = fileObject;\n            if (util.isFunction(after)) {\n                after();\n            }\n            this.handleEvent(event, fileObj);\n        });\n        uploadMeta.xhr.addEventListener('progress', (event) => {\n            const fileObj = fileObject;\n            this.handleEvent(event, fileObj);\n        });\n        uploadMeta.xhr.addEventListener('error', (event) => {\n            const fileObj = fileObject;\n            this.handleEvent(event, fileObj);\n        });\n        uploadMeta.xhr.addEventListener('abort', (event) => {\n            const fileObj = fileObject;\n            this.handleEvent(event, fileObj);\n        });\n        uploadMeta.xhr.addEventListener('readystatechange', (event) => {\n            const fileObj = fileObject;\n            this.uploadDone(event, fileObj);\n        });\n\n        uploadMeta.xhr.open('POST', `${util.getApiServer()}${this.props.apiUrl}`);\n        uploadMeta.xhr.setRequestHeader('Authorization', `Bearer ${util.getJwtToken()}`);\n        uploadMeta.xhr.send(formData);\n\n        const filename = fileObject.name;\n        const uploadedFilesData = this.state.uploadedFilesData;\n        if (!uploadedFilesData[filename]) {\n            uploadedFilesData[filename] = {};\n        }\n        uploadedFilesData[filename].uploadMeta = uploadMeta;\n        uploadedFilesData[filename].imageNum = this.state.imageNum;\n        this.setState({ uploadedFilesData });\n    }\n\n    // eslint-disable-next-line\n    readLocalFile = (fileObject) => {\n        return new Promise((resolve, reject) => {\n            const reader = new FileReader();\n\n            reader.addEventListener('error', (error) => {\n                if (debug) {\n                    console.log(`${debugName}.FileReader: Error occurred reading file: ${fileObject.name}: ${error}`);\n                }\n                reject(error);\n            });\n\n            reader.addEventListener('load', (event) => {\n                if (debug) {\n                    console.log(`${debugName}.FileReader: File: ${fileObject.name} read successfully: `\n                        + `${JSON.stringify(event)}`);\n                }\n                const photo = fileObject;\n                const filename = photo.name;\n                const uploadedFilesData = this.state.uploadedFilesData;\n                if (!uploadedFilesData[filename]) {\n                    uploadedFilesData[filename] = {};\n                }\n                uploadedFilesData[filename].event = event;\n                this.setState({ uploadedFilesData });\n                this.handleUpload(photo);\n                resolve(event);\n            });\n\n            reader.readAsDataURL(fileObject);\n        });\n    }\n\n    updateProgress = (event, fileObject) => {\n        if (event.lengthComputable) {\n            const filename = fileObject.name;\n            const uploadedFilesData = this.state.uploadedFilesData;\n            const percentComplete = (event.loaded / event.total) * 100;\n            if (debug) {\n                console.log(`${debugName}.updateProgress[${filename}].progress`, percentComplete);\n            }\n            uploadedFilesData[filename].uploadMeta.progress = percentComplete;\n            this.setState({ uploadedFilesData });\n        }\n    }\n\n    uploadDone = (event, fileObject) => {\n        const filename = fileObject.name;\n        const uploadedFilesData = this.state.uploadedFilesData;\n        const uploadMeta = uploadedFilesData[filename].uploadMeta;\n        if (debug) {\n            console.log(`${debugName}.uploadDone[${filename}].uploadedFilesData`, uploadedFilesData);\n            console.log(`${debugName}.uploadDone[${filename}].uploadMeta`, uploadMeta);\n            console.log(`${debugName}.uploadDone.event`, event);\n        }\n\n        if (uploadMeta && uploadMeta.xhr.readyState === 4 && uploadMeta.xhr.status === 201) {\n            const response = JSON.parse(uploadMeta.xhr.responseText);\n            const files = response.data.files;\n            for (let i = 0; i < files.length; i += 1) {\n                const file = files[i];\n                this.addFileToUpload(file);\n                this.fileInput.value = '';\n            }\n        }\n    }\n\n    addFileToUpload(file) {\n        if (debug) {\n            console.log(`${debugName}.addFileToUpload[${file.name}]`);\n        }\n        const { uploadedFilesData } = this.state;\n        const { handleAddImage, uploadStatus = () => {} } = this.props;\n\n        delete uploadedFilesData[file.name];\n        this.setState({ uploadedFilesData });\n        handleAddImage(file);\n        uploadStatus(true);\n    }\n    // /Upload\n\n    componentDidMount() {\n        const div = this.dropRef.current;\n        div.addEventListener('dragenter', this.handleDragIn);\n        div.addEventListener('dragleave', this.handleDragOut);\n        div.addEventListener('dragover', this.handleDrag);\n        div.addEventListener('drop', this.handleDrop);\n\n        const { autoOpen } = this.props;\n\n        if (autoOpen) {\n            setTimeout(() => {\n                // console.log('[setTimeout]');\n                this.fileInput.click();\n            }, 10);\n        }\n    }\n\n    componentWillUnmount() {\n        const div = this.dropRef.current;\n        div.removeEventListener('dragenter', this.handleDragIn);\n        div.removeEventListener('dragleave', this.handleDragOut);\n        div.removeEventListener('dragover', this.handleDrag);\n        div.removeEventListener('drop', this.handleDrop);\n    }\n\n    render() {\n        const { uploadedFilesData } = this.state;\n\n        return (\n            <div style={{ position: 'relative' }} ref={this.dropRef}>\n                {this.state.drag &&\n                <div style={{\n                    border: 'dashed grey 4px',\n                    backgroundColor: 'rgba(255,255,255,.8)',\n                    position: 'absolute',\n                    top: 0,\n                    bottom: 0,\n                    left: 0,\n                    right: 0,\n                    zIndex: 9999,\n                }}>\n                    <div\n                        style={{\n                            position: 'absolute',\n                            top: '50%',\n                            right: 0,\n                            left: 0,\n                            textAlign: 'center',\n                            color: 'grey',\n                            fontSize: 36,\n                        }}\n                    >\n                        <div><Text id='imageupload.drag-files-here'>drop your files here :)</Text></div>\n                    </div>\n                </div>}\n\n                <div>\n                    <input class='btn btn-info col-sm-12' multiple\n                        type='file'\n                        id='image-file'\n                        onchange={this.handleAddFiles}\n                        ref={(c) => {\n                            this.fileInput = c;\n                        }}\n                    />\n                </div>\n                <div>\n                    {Object.keys(uploadedFilesData).length > 0 ? (<h3><Text id='imageupload.upload-images'>Uploaded images</Text></h3>) : ''}\n                    <ul class='list-group'>\n                        {Object.keys(uploadedFilesData).map((key) => {\n                            const { uploadMeta = {} } = uploadedFilesData[key];\n                            const isImage = key.match(/(jpg|jpeg|png|gif|heic|heif|svg|webp|tif)/i);\n                            return (\n                                <li class='list-group-item list-group-item-action flex-column align-items-start'>\n                                    <div class='d-flex w-100 justify-content-between'>\n                                        {isImage && <img class='img-fluid mr-3'\n                                            src={uploadedFilesData[key].event.target.result}\n                                            style='max-height: 50px;'\n                                        />}\n                                        <small>{uploadedFilesData[key].event.uploadDone}</small>\n                                        <Text id='imageupload.uploading-image'>Laster opp bilde...</Text>\n                                        <small>{util.formatBytes(uploadedFilesData[key].event.total, 2)}</small>\n                                    </div>\n                                    <div class='progress mt-1' style='height: 4px;'>\n                                        <div\n                                            class='progress-bar progress-bar-striped progress-bar-animated bg-success'\n                                            role='progressbar'\n                                            style={`width: ${uploadMeta.progress}%; height: 4px;`}\n                                            aria-valuenow={uploadMeta.progress}\n                                            aria-valuemin='0'\n                                            aria-valuemax='100'\n                                        />\n                                    </div>\n                                </li>\n                            );\n                        })}\n                    </ul>\n                </div>\n\n                {this.props.children}\n            </div>\n        );\n    }\n}\n\nexport default DragNDropFileupload;\n","import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport { Text, Localizer } from 'preact-i18n';\n\nimport mu from '../../lib/musher-util';\n\nconst initialState = {};\n\n@observer\nclass DisplayLikesAndComments extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            ...initialState,\n        };\n    }\n\n    toggleViews = () => {\n        const { showViewList } = this.state;\n        const { isTeamAdmin, isAdmin } = this.props;\n        if (isTeamAdmin || isAdmin) {\n            this.setState({\n                showViewList: !showViewList,\n            });\n        }\n    }\n\n    render() {\n        const { showViewList } = this.state;\n        const { storyStore, teamStore, workoutStore } = this.props.stores;\n        const { views, object, isTeamAdmin, isAdmin,\n            type = 'story', onTeamClick = () => {}, onUserClick = () => {} } = this.props;\n\n        const viewUsersArrays = [];\n        Object.entries(object.statistics).forEach(([year, yearObject]) => {\n            // console.log({ year, yearObject });\n            Object.entries(yearObject).forEach(([week, weekObject]) => {\n                // console.log({ week, weekObject });\n                if (weekObject.viewUsers) {\n                    viewUsersArrays.push(weekObject.viewUsers);\n                }\n            });\n        });\n        const viewUsers = viewUsersArrays.flat().slice(0, 50);\n\n\t\treturn (<>\n            <div class='d-flex justify-content-end mb-2'>\n                <span class='ml-2 text-muted font-weight-lighter'\n                    onClick={this.toggleViews}\n                >\n                    {views} <Text id='story.views'>views</Text>\n                </span>\n            </div>\n            {showViewList && <div class='mt-3 mb-3'>\n                {viewUsers && viewUsers.map((userId) => {\n                    let user;\n                    let teams;\n                    if (type === 'story') {\n                        user = storyStore.findPublicUser(userId);\n                        teams = storyStore.findPublicTeamByMembers(userId);\n                    } else if (type === 'team') {\n                        user = teamStore.findPublicUser(userId);\n                        teams = teamStore.findPublicTeamByMembers(userId);\n                    } else if (type === 'workout') {\n                        user = workoutStore.findPublicUser(userId);\n                        teams = workoutStore.findPublicTeamByMembers(userId);\n                    }\n                    if (!user) {\n                        return '';\n                    }\n                    let publicTeam;\n                    if (util.isArray(teams)) {\n                        publicTeam = teams.find(e => e.public === 1);\n                    }\n                    const image = mu.getImage({ user, team: publicTeam, priority: 'user' });\n                    const shortname = mu.displayNameShort(user);\n                    const name = mu.displayName(user, true);\n                    return (<div class='d-flex flex-row position-relative font-weight-light mb-1'>\n                        {publicTeam ? <>\n                            <a href={`/teams/public/${publicTeam.uuidv4}`} title={publicTeam.name} onClick={(e) => onTeamClick(e, publicTeam.uuidv4)} class='stretched-link'>\n                                <div\n                                    class={`text-center border rounded-circle imageRounded imageRoundedThumb`}\n                                    style={`${image ? `background-image: url(\"${image}\"); background-size: cover;` : ''}`}\n                                >\n                                    {!image && <div class='' style='font-size: 12px; padding-top: 3px;'>{shortname}</div>}\n                                </div>\n                            </a>\n                            <div class='ml-2 '>\n                                {name} <span class='font-weight-lighter'>- {publicTeam.name}</span>\n                            </div>\n                        </> : <>\n                            <div\n                                class={`text-center border rounded-circle imageRounded imageRoundedThumb`}\n                                style={`${image ? `background-image: url(\"${image}\"); background-size: cover;` : ''} opacity: 0.5;`}\n                            >\n                                {!image && <div class='text-muted' style='font-size: 12px; padding-top: 3px;'>{shortname}</div>}\n                            </div>\n                            <div class='ml-2'>\n                                {name}\n                            </div>\n                        </>}\n                    </div>);\n                })}\n                {views > viewUsers.length && <>\n                    <small class='text-muted'>\n                        <Text id='story.limited-to'>Limited to max 50 users.</Text>\n                    </small>\n                </>}\n            </div>}\n\t\t</>);\n\t}\n}\n\nexport default DisplayLikesAndComments;\n","import { h, Component } from 'preact';\nimport { observer } from 'mobx-preact';\nimport util from 'preact-util';\n\n// TODO: Do we need mobx? What is mobx doing here?  \n\n@observer\nclass FastListLine extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {};\n        this.containerRef = null;\n    }\n\n    componentWillUnmount() {\n        const { removeIntersectionObserver } = this.props;\n        if (removeIntersectionObserver) {\n            removeIntersectionObserver(this.containerRef);\n        }\n    }\n\n    componentDidMount() {\n        const { addIntersectionObserver } = this.props;\n        if (addIntersectionObserver) {\n            addIntersectionObserver(this.containerRef);\n        }\n    }\n\n    render() {\n        const {\n            wrapperClassNames = '',\n            contentClassNames = '',\n            renderContent,\n            obj = {},\n            idx,\n            dataFields,\n            dataValues,\n            sessionid,\n        } = this.props;\n\n        const dataProperties = {};\n        if (sessionid) {\n            dataProperties.sessionid = sessionid;\n        }\n        dataFields.forEach(e => dataProperties[`data-${e}`] = encodeURI(dataValues[e] || obj[e]));\n\n        return (\n            <div\n                class={`${wrapperClassNames}`}\n                ref={c => this.containerRef = c}\n                data-idx={idx}\n                {...dataProperties}\n            >\n                <div\n                    class={`${contentClassNames}`}\n                    style={`display: block;`}\n                >\n                    {renderContent({\n                        obj,\n                        idx,\n                    })}\n                </div>\n            </div>\n        );\n    }\n}\n\n@observer\nclass FastList extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {};\n    }\n\n    // IntersectionObserver\n    deleteIntersectionObserver = () => {\n        this.intersectionObserver = null;\n    }\n\n    handleIntersection = (entries) => {\n        const { handleIntersection } = this.props;\n        if (typeof(handleIntersection) === 'function') {\n            // console.log('handleIntersection');\n            handleIntersection(entries);\n        }\n        // console.log({ entries });\n        // TODO: Make it possible to run defined functions for entries.\n        // mu.intersectionObserverCallback(entries);\n        entries.forEach((e) => {\n            const { isIntersecting } = e;\n            const { height = 0 } = e.target.dataset;\n            // const childHeight = e.target.childNodes[0].getBoundingClientRect().height;\n            // const targetHeight = e.target.getBoundingClientRect().height;\n            const childHeight = e.target.childNodes[0].offsetHeight;\n            const targetHeight = e.target.offsetHeight;\n            const scrollHeight = e.target.scrollHeight;\n            const currentHeight = Math.max(childHeight, targetHeight, scrollHeight);\n            // console.log({ isIntersecting, height, childHeight, targetHeight, scrollHeight, currentHeight }, e.target);\n\n            if (isIntersecting) {\n                e.target.childNodes[0].style.display=`block`;\n                // TODO: Should be set after image is loaded.\n                // const height = e.target.childNodes[0].clientHeight > e.target.clientHeight ? e.target.childNodes[0].clientHeight : e.target.clientHeight;\n                // console.log(e.target);\n                // console.log('e.target.childNodes[0].offsetHeight:', e.target.childNodes[0].offsetHeight);\n                // console.log('e.target.childNodes[0].scrollHeight:', e.target.childNodes[0].scrollHeight);\n                // console.log('e.target.childNodes[0].clientHeight:', e.target.childNodes[0].clientHeight);\n                // console.log('e.target.offsetHeight:', e.target.offsetHeight);\n                // console.log('e.target.scrollHeight:', e.target.scrollHeight);\n                // console.log('e.target.clientHeight:', e.target.clientHeight);\n                // console.log('height:', height);\n                // e.target.style.height=`${height}px`;\n                e.target.style.minHeight = `${currentHeight > height ? currentHeight : height}px`;\n            } else if (e.target.style.minHeight) {\n                // e.target.style.height = `${currentHeight > height ? currentHeight : height}px`;\n                e.target.style.minHeight = `${currentHeight > height ? currentHeight : height}px`;\n                e.target.childNodes[0].style.display=`none`;\n            }\n        });\n    }\n\n    setupIntersectionObserver = () => {\n        if (!('IntersectionObserver' in window) ||\n            !('IntersectionObserverEntry' in window) ||\n            !('intersectionRatio' in window.IntersectionObserverEntry.prototype)) {\n            return false;\n        }\n\n        const options = {\n            root: null,\n            rootMargin: '100px',\n            threshold: 0.1,\n        };\n        this.intersectionObserver = new IntersectionObserver(this.handleIntersection, options);\n    }\n\n    addIntersectionObserver = (ref) => {\n        if (this.intersectionObserver && ref) {\n            this.intersectionObserver.observe(ref);\n        }\n    }\n    removeIntersectionObserver = (ref) => {\n        if (this.intersectionObserver && ref) {\n            this.intersectionObserver.unobserve(ref);\n        }\n    }\n\n    componentWillMount() {\n        this.setupIntersectionObserver();\n    }\n\n    componentWillUnmount() {\n        this.deleteIntersectionObserver();\n    }\n\n    render() {\n        const {\n            data = [],\n            wrapperClassNames = 'row pb-4 bg-light',\n            contentClassNames = `col-12 col-sm-8 col-lg-6 offset-sm-2 offset-lg-3 mb-0 position-relative rounded rounded-lg py-3 shadow-sm`,\n            renderContent = (e) => <>Missing render function!</>,\n            dataFields = [],\n            dataValues = {},\n        } = this.props;\n        \n        return (\n            <div class='w-100'>\n                {data && data.filter(e => util.isObject(e)).map((obj, idx) => {\n                    const wrapperClasses = obj.hasOwnProperty('wrapperClassNames') ? obj.wrapperClassNames : wrapperClassNames;\n                    const contentClasses = obj.hasOwnProperty('contentClassNames') ? obj.contentClassNames : contentClassNames;\n                    return (<>\n                        <FastListLine\n                            key={`fastline-${idx}-${obj.id}`}\n                            obj={obj}\n                            idx={idx}\n                            addIntersectionObserver={this.addIntersectionObserver}\n                            removeIntersectionObserver={this.removeIntersectionObserver}\n                            wrapperClassNames={wrapperClasses}\n                            contentClassNames={contentClasses}\n                            renderContent={renderContent}\n                            dataFields={dataFields}\n                            dataValues={dataValues}\n                        />\n                    </>);\n                })}\n            </div>\n        );\n    };\n}\n\nexport default FastList;\n"],"sourceRoot":""}