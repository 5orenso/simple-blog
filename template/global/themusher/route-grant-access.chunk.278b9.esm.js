(window.webpackJsonp=window.webpackJsonp||[]).push([[47],{"/DnB":function(t,e,s){"use strict";function o(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,o)}return s}function c(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}var a,l=s("hosL"),n=(s("Utv1"),s("/eY4"));const i={};let r=Object(n.a)(a=class extends l.Component{constructor(t){super(t),this.state=function(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?o(Object(s),!0).forEach((function(e){c(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):o(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}({},i),this.container=null}componentDidMount(){const{horizontal:t,vertical:e=""}=this.props,s={behavior:"smooth"};t&&(s.inline=t),e&&(s.block=e),this.container.scrollIntoView(s)}render(){return Object(l.h)("div",{ref:t=>this.container=t},"Â ")}})||a;e.a=r},pJjI:function(t,e,s){"use strict";(function(t){var o,c=s("hosL"),a=s("Utv1"),l=s("/eY4"),n=s("OhSV");s("/DnB");let i=Object(l.a)(o=class extends c.Component{constructor(...t){super(...t),this.toggleTeam=t=>{const{callback:e,unsetTeamIfSelected:s=!0}=this.props,{dogStore:o,workoutStore:c}=this.props.stores,{currentTeam:l}=o;s&&t===l?(o.setCurrentTeam(void 0),c.setCurrentTeam(void 0)):(o.setCurrentTeam(t),c.setCurrentTeam(t)),a.a.isDefined(e)&&e()},this.showAllTeams=()=>{const{callback:t}=this.props,{dogStore:e,workoutStore:s}=this.props.stores;e.setCurrentTeam(void 0),s.setCurrentTeam(void 0),a.a.isDefined(t)&&t()}}render(){const{userStore:e,dogStore:s}=this.props.stores,{teams:o}=e,{currentTeam:a}=s,{highlight:l,showAll:i=!0}=this.props;return Object(c.h)("div",{class:"row mt-2"},Object(c.h)("div",{class:"w-100 overflow-hidden"},Object(c.h)("div",{class:"d-flex flex-row flex-nowrap pb-2 px-1 no-scrollbar",style:"overflow: auto; scroll-snap-type: x mandatory;"},o&&o.map((e,s)=>{let n;return 1===o.length?n="rounded-pill-both":0===s?n="rounded-pill-left":s+1===o.length&&(n="rounded-pill-right"),Object(c.h)("div",{class:"col mb-0 px-0 clearfix",key:e.id},Object(c.h)("button",{class:`btn btn-sm btn-block \n\t\t\t\t\t\t\t\t\t\t\trounded-none ${n}\n\t\t\t\t\t\t\t\t\t\t\t${a===e.id?"btn-success":"btn-outline-success"}\n\t\t\t\t\t\t\t\t\t\t\ttext-nowrap clearfix`,style:"text-overflow: ellipsis; overflow: hidden;",onClick:()=>this.toggleTeam(e.id)},Object(c.h)("i",{class:"fas fa-users"})," ",e.name,l&&l.indexOf(e.id)>-1&&Object(c.h)(t,null,a===e.id?Object(c.h)(t,null,Object(c.h)("i",{class:"fas fa-check float-right"})):Object(c.h)(t,null,Object(c.h)("div",{class:"spinner-grow text-warning float-right",role:"status"},Object(c.h)("span",{class:"sr-only"},"Loading...")),Object(c.h)("i",{class:"far fa-hand-point-left float-right",style:"font-size: 2.0em;"})))))})),i&&Object(c.h)("div",{class:"row"},Object(c.h)("div",{class:"col-12 mb-1 px-1 d-flex justify-content-center"},Object(c.h)("button",{class:"btn btn-sm rounded-lg btn-link text-nowrap clearfix",style:"text-overflow: ellipsis; overflow: hidden;",onClick:this.showAllTeams},Object(c.h)("i",{class:"fas fa-users"})," ",Object(c.h)(n.c,{id:"teams.show-all"},"Show all"))))))}})||o;e.a=i}).call(this,s("hosL").Fragment)},qZTL:function(t,e,s){"use strict";s.r(e),function(t){var o,c=s("hosL"),a=s("Utv1"),l=s("/eY4"),n=s("Y3FI"),i=(s("go65"),s("OhSV")),r=s("fh8t"),h=s.n(r),d=s("ZOvn"),p=s("67HY"),b=s("gbHB"),u=s("B+py"),g=s("pJjI"),f=s("s4FZ");let m=Object(l.a)(o=class extends c.Component{constructor(t){var e;super(t),e=this,this.loadApplication=()=>{const{id:t}=this.state,{applicationStore:e}=this.props.stores;e.load(t)},this.loadTeam=async function(){e.setState({isLoading:!0});const{teamStore:t,workoutStore:s}=e.props.stores,{currentTeam:o}=s;await t.load(o),e.setState({isLoading:!1})},this.changeLanguage=t=>{const e=t.target.value,{appState:s}=this.props.stores;s.setLanguage(e)},this.grantAccess=async function(){const{userStore:t,teamStore:s,workoutStore:o}=e.props.stores,{currentTeam:c}=o,{user:a}=t,{returnUrl:l,id:n}=e.state,i={grantedDate:new Date,returnUrl:l,team:c,appId:n};t.findApplicationById(n)||(await t.saveField(a.id,"applications",i),await t.saveField(a.id,"settings.veterinaryAllowed",1),await s.saveField(c,"public",1)),e.setState({accessGranted:1})},this.denyAccess=()=>{Object(n.route)("/")},this.saveInputParams=()=>{let{returnUrl:t,id:e}=this.props;t?(a.a.set("returnUrl",t),a.a.set("id",e)):(t=a.a.get("returnUrl"),e=a.a.get("id")),this.setState({returnUrl:t,id:e})},this.state={returnUrl:"",id:0}}componentWillMount(){this.saveInputParams()}componentDidMount(){this.loadApplication(),this.loadTeam()}render(){const{appState:e,userStore:s,applicationStore:o,workoutStore:a,teamStore:l}=this.props.stores,{subsection:n}=this.props,{returnUrl:r,accessGranted:m}=this.state,{currentTeam:O}=a,{user:j}=s,{language:v="en",darkmode:w}=e,{application:y}=o,{team:x}=l;if(!y)return Object(c.h)("div",{class:"container-fluid"},Object(c.h)("div",{class:"row"},Object(c.h)("div",{class:"col-10 offset-1 col-sm-8 offset-sm-2 col-md-6 offset-md-3 col-lg-4 offset-lg-4 pt-5"},Object(c.h)("div",{class:"d-flex justify-content-center"},w?Object(c.h)(t,null,Object(c.h)("img",{src:"https://themusher.app/assets/logo-qpaws-dark.png",height:"100"})):Object(c.h)(t,null,Object(c.h)("img",{src:"https://themusher.app/assets/logo-qpaws-light.png",height:"100"}))),Object(c.h)("div",{class:"d-flex justify-content-center"},Object(c.h)("h5",{class:"mt-1 mb-3 font-weight-lighter"},Object(c.h)(i.c,{id:"grant-access.title"},"Grant access"))),Object(c.h)("div",{class:"alert alert-danger",role:"alert"},Object(c.h)("h5",null,"Error"),"Application not found!"))));const{title:k,body:S,images:L}=y;return Object(c.h)("div",{class:"container-fluid"},Object(c.h)("div",{class:"row"},Object(c.h)("div",{class:"col-10 offset-1 col-sm-8 offset-sm-2 col-md-6 offset-md-3 col-lg-4 offset-lg-4 pt-5"},Object(c.h)("div",{class:"d-flex justify-content-center"},w?Object(c.h)(t,null,Object(c.h)("img",{src:"https://themusher.app/assets/logo-qpaws-dark.png",height:"100"})):Object(c.h)(t,null,Object(c.h)("img",{src:"https://themusher.app/assets/logo-qpaws-light.png",height:"100"}))),Object(c.h)("div",{class:"d-flex justify-content-center"},Object(c.h)("h5",{class:"mt-1 mb-3 font-weight-lighter"},Object(c.h)(i.c,{id:"grant-access.title"},"Grant access"))),Object(c.h)(f.a,{stores:this.props.stores,images:L,minHeight:"50px"}),Object(c.h)("h5",{class:"mt-3"},k),Object(c.h)("p",{class:"mt-3"},Object(c.h)(h.a,{markdown:d.a.replaceImages(S,L,v),markdownOpts:d.a.getMarkdownOptions()})))),Object(c.h)("div",{class:"row"},j.email?Object(c.h)(t,null,m?Object(c.h)(t,null,Object(c.h)("div",{class:"col-10 offset-1 col-sm-8 offset-sm-2 col-md-6 offset-md-3 col-lg-4 offset-lg-4 mt-3 border-top pt-3"},Object(c.h)("div",{class:"display-1 text-success text-center"},Object(c.h)("i",{class:"fas fa-check"})),Object(c.h)("p",null,Object(c.h)(i.c,{id:"grant-access.access-granted"},"Access granted. Now please click the button below to go back to")," ",k,"."),Object(c.h)("a",{class:"btn btn-success btn-block",href:`${r}?userId=${j.uuidv4}&teamId=${x.uuidv4}`,native:!0},Object(c.h)(i.c,{id:"grant-access.back-to-application"},"Back to"),": ",k," ",Object(c.h)("i",{class:"fas fa-arrow-right"})))):Object(c.h)(t,null,Object(c.h)("div",{class:"col-10 offset-1 col-sm-8 offset-sm-2 col-md-6 offset-md-3 col-lg-4 offset-lg-4 mt-3 border-top pt-3"},Object(c.h)("h5",{class:"font-weight-light"},Object(c.h)(i.c,{id:"grant-access.data-shared"},"Data beeing shared"),":"),Object(c.h)("p",null,Object(c.h)("i",{class:"fas fa-user"}),": ",Object(c.h)(i.c,{id:"grant-access.fields-shared-person"},"Image, Name, email, cellphone, address")),Object(c.h)("p",null,Object(c.h)("i",{class:"fas fa-dog"}),": ",Object(c.h)(i.c,{id:"grant-access.fields-shared-dog"},"Image, Name, chipId, gender, birth, vaccines")),Object(c.h)("p",null,Object(c.h)("i",{class:"fas fa-users"}),": ",Object(c.h)(i.c,{id:"grant-access.fields-shared-team"},"Name, description, images"))),Object(c.h)("div",{class:"col-10 offset-1 col-sm-8 offset-sm-2 col-md-6 offset-md-3 col-lg-4 offset-lg-4 mt-3 border-top pt-3"},Object(c.h)("h5",{class:"font-weight-light"},Object(c.h)(i.c,{id:"grant-access.choose-team"},"Choose team")),Object(c.h)("div",{class:"col-12"},Object(c.h)(g.a,{stores:this.props.stores,callback:this.loadTeam,key:"teams-"+O,showAll:!1}))),O?Object(c.h)(t,null,Object(c.h)("div",{class:"col-10 offset-1 col-sm-8 offset-sm-2 col-md-6 offset-md-3 col-lg-4 offset-lg-4 mt-3"},Object(c.h)("button",{class:"btn btn-primary btn-block",onClick:this.grantAccess},Object(c.h)("i",{class:"fas fa-check"})," ",Object(c.h)(i.c,{id:"grant-access.grant"},"Grant access")),Object(c.h)("button",{class:"mt-4 btn btn-sm btn-link text-muted float-right",onClick:this.denyAccess},Object(c.h)(i.c,{id:"grant-access.deny"},"Deny access")))):Object(c.h)(t,null,Object(c.h)("div",{class:"col-10 offset-1 col-sm-8 offset-sm-2 col-md-6 offset-md-3 col-lg-4 offset-lg-4 mt-3"},Object(c.h)("span",{class:"display-4"},Object(c.h)("i",{class:"fas fa-hand-point-up"})," Choose team"))))):Object(c.h)(t,null,!n&&Object(c.h)(p.a,{stores:this.props.stores,showLogo:!1,routeLoginOk:"/grant-access",routeLoginNew:"/grant-access/newUser",routeLoginForgot:"/grant-access/forgotPassword"}),"newUser"===n&&Object(c.h)(b.default,{stores:this.props.stores,showLogo:!1,routeLogin:"/grant-access",routeLoginForgot:"/grant-access/forgotPassword",skipPubSub:!0}),"forgotPassword"===n&&Object(c.h)(u.default,{stores:this.props.stores,showLogo:!1,routeLogin:"/grant-access",routeLoginNew:"/grant-access/newUser"}))),Object(c.h)("div",{class:"col-10 offset-1 col-sm-8 offset-sm-2 col-md-6 offset-md-3 col-lg-4 offset-lg-4"},Object(c.h)("div",{class:"form-row align-items-center"},Object(c.h)("div",{class:"col-auto my-1 mx-auto",style:"width: 80px;"},Object(c.h)("select",{class:"custom-select",style:"background-color: inherit; border: none;",onInput:this.changeLanguage},Object(c.h)("option",{value:"no",selected:"no"===v},"ðŸ‡³ðŸ‡´ NO"),Object(c.h)("option",{value:"en",selected:"en"===v},"ðŸ‡¬ðŸ‡§ EN"),Object(c.h)("option",{value:"es",selected:"es"===v},"ðŸ‡ªðŸ‡¸ ES"),Object(c.h)("option",{value:"de",selected:"de"===v},"ðŸ‡©ðŸ‡ª DE"),Object(c.h)("option",{value:"fr",selected:"fr"===v},"ðŸ‡«ðŸ‡· FR"),Object(c.h)("option",{value:"ru",selected:"ru"===v},"ðŸ‡·ðŸ‡º RU"),Object(c.h)("option",{value:"se",selected:"se"===v},"ðŸ‡¸ðŸ‡ª SE"))))))}})||o;e.default=m}.call(this,s("hosL").Fragment)},s4FZ:function(t,e,s){"use strict";(function(t){function o(t){return l.a.isObject(t)&&t.s3LargeLink}var c,a=s("hosL"),l=s("Utv1"),n=s("/eY4");s("OhSV");let i=Object(n.a)(c=class extends a.Component{constructor(t){super(t),this.scrollImages=t=>{const{images:e}=this.props,{scrollLeft:s,clientWidth:o}=t.target,c=s/o,a=Math.round(c),l=Math.abs(a-c);(Number.isInteger(c)||l<.1)&&this.setState({imageIdx:a})},this.onClickScrollLeft=()=>{const t=this.imageScrollerRef;t.scrollBy({top:0,left:0-t.clientWidth,behavior:"smooth"})},this.onClickScrollRight=()=>{const t=this.imageScrollerRef;t.scrollBy({top:0,left:t.clientWidth,behavior:"smooth"})},this.distance=t=>Math.hypot(t.touches[0].pageX-t.touches[1].pageX,t.touches[0].pageY-t.touches[1].pageY),this.pinchZoomOnTouchStart=t=>{if(2===t.touches.length){t.preventDefault(),t.stopPropagation();const e={};e.x=(t.touches[0].pageX+t.touches[1].pageX)/2,e.y=(t.touches[0].pageY+t.touches[1].pageY)/2,e.distance=this.distance(t),this.setState({start:e})}},this.pinchZoomOnTouchMove=t=>{let{imageElementScale:e,imageElementMaxScale:s}=this.state;const{start:o}=this.state;if(2===t.touches.length){let c;if(t.preventDefault(),t.stopPropagation(),t.scale)c=t.scale;else{c=this.distance(t)/o.distance}e=Math.min(Math.max(1,c),s),this.setState({imageElementScale:e},()=>{const s=`translate3d(${2*((t.touches[0].pageX+t.touches[1].pageX)/2-o.x)}px, ${2*((t.touches[0].pageY+t.touches[1].pageY)/2-o.y)}px, 0) scale(${e})`;t.target.style.transition="",t.target.style.transform=s,t.target.style.WebkitTransform=s,t.target.style.zIndex="100000"})}},this.pinchZoomOnTouchEnd=t=>{this.setState({imageElementScale:1}),t.target.style.transition="transform 250ms",t.target.style.transform="",t.target.style.WebkitTransform="",t.target.style.zIndex=""},this.state={imageIdx:0,imageElementScale:1,imageElementMaxScale:5,start:{}}}render(){const{imageIdx:e,imageElementScale:s}=this.state,{images:c,id:l,dblClick:n=(()=>{}),likeRef:i={},noimagestext:r,minHeight:h="100px"}=this.props,{appState:d}=this.props.stores,{isCordova:p}=d,b=e>0,u=e<c.length-1;return c&&0!==c.length?Object(a.h)("div",{class:"w-100 position-relative"},Object(a.h)("div",{class:"d-flex flex-row flex-nowrap bg-light border-top border-bottom no-scrollbar",style:`\n                        overflow-x: ${s>1&&1===c.length?"visible !important":"auto"};\n                        overflow-y: ${s>1?"visible !important":"auto"};\n                        scroll-snap-type: x mandatory;\n                    `,onScroll:this.scrollImages,ref:t=>this.imageScrollerRef=t},c&&c.filter(o).map(e=>Object(a.h)("div",{class:"col-12 clearfix p-0"},Object(a.h)("div",{class:"w-100 h-100 text-center rounded-lg imageContainer d-flex justify-content-center align-items-center position-relative ",style:"\n                                    scroll-snap-align: start;\n                                    flex-wrap: wrap;\n                                ",onDblclick:n,"data-id":l,onTouchstart:t=>{t.stopPropagation()},onTouchend:t=>{t.stopPropagation()},onTouchmove:t=>{t.stopPropagation()}},Object(a.h)("div",{class:"position-absolute w-100 h-100",style:`\n                                        background-image: url('${e.s3SmallLink}'); background-size: cover;\n                                        filter: blur(10px);\n                                        opacity: 0.5;\n                                    `}),e.s3LargeLink?Object(a.h)("img",{class:"img-fluid position-relative",src:`${e.s3LargeLink}${e.updatedDate?"?updated="+(""+e.updatedDate):""}`,loading:"lazy",style:`max-height: 75vh; min-height: ${h}; `,onTouchstart:this.pinchZoomOnTouchStart,onTouchend:this.pinchZoomOnTouchEnd,onTouchmove:this.pinchZoomOnTouchMove}):Object(a.h)(t,null,Object(a.h)("span",{class:"display-1 text-muted"},Object(a.h)("i",{class:"fas fa-camera"})))),i[l]&&Object(a.h)("span",{class:"likeHeart position-absolute text-white display-1",style:"top: calc(50% - 50px); left: calc(50% - 50px); width: 100px; height: 100px;"},Object(a.h)("i",{class:"fas fa-heart likeStory"}))))),c&&c.length>1&&Object(a.h)(t,null,Object(a.h)("div",{class:"w-100 text-center"},Object(a.h)("small",null,Object(a.h)("small",null,c&&c.filter(o).map((s,o)=>Object(a.h)(t,null,Object(a.h)("i",{class:(o===e?"fas":"far")+" fa-circle mr-1"})))))),Object(a.h)("div",{class:"position-absolute text-white font-weight-lighter px-1 py-1 rounded-lg",style:"top: 10px; right: 10px; background-color: rgba(0, 0, 0, 0.3); line-height: 1.0em;"},Object(a.h)("small",null,e+1," / ",c.length))),p?Object(a.h)(t,null):Object(a.h)(t,null,b&&Object(a.h)("div",{class:"position-absolute d-none d-lg-block",style:"top: 50%; left: 5px;"},Object(a.h)("button",{type:"button",class:"btn btn-link text-secondary",style:"font-size: 3.0em; opacity: 0.7;",onClick:this.onClickScrollLeft},Object(a.h)("i",{class:"fas fa-arrow-circle-left"}))),u&&Object(a.h)("div",{class:"position-absolute d-none d-lg-block",style:"top: 50%; right: 5px;"},Object(a.h)("button",{type:"button",class:"btn btn-link text-secondary",style:"font-size: 3.0em; opacity: 0.7;",onClick:this.onClickScrollRight},Object(a.h)("i",{class:"fas fa-arrow-circle-right"}))))):r?Object(a.h)(t,null,Object(a.h)("div",{class:"col-12 text-center text-muted"},Object(a.h)("div",{class:"display-1"},Object(a.h)("i",{class:"fas fa-camera"})),Object(a.h)("h3",{class:"font-weight-lighter"},r))):Object(a.h)(t,null)}})||c;e.a=i}).call(this,s("hosL").Fragment)}}]);
//# sourceMappingURL=route-grant-access.chunk.278b9.esm.js.map