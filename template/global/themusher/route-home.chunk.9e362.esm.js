(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{"+1Jk":function(t,e,s){"use strict";s.r(e),function(t){function o(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,o)}return s}function a(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}var c,r=s("hosL"),n=s("Utv1"),l=s("/eY4"),i=s("OhSV"),h=s("ZOvn"),m=s("JWe/"),b=s("WAWY"),d=s("azdc"),u=s("XPU5"),p=(s("ZWUU"),s("CE5K")),O=s("qv+O"),g=s("sgpT"),f=s("0SNj"),j=s("9Bb9"),y=s("bUJL"),v=s("4imK"),k=s("pJjI"),w=s("L3gU"),x=s("AEg1"),S=s("gOLw"),P=s("epqT");const D=h.a.marginTop(!0),C=h.a.marginBottom(),I=h.a.subMenuMarginTop(),L={isLoading:!1,submenu:"lastWorkouts"};let T=Object(l.a)(c=class extends r.Component{constructor(t){var e;super(t),e=this,this.loadTeamInfo=async function(){await e.loadWorkoutSummary(),await e.loadWorkoutPlans()},this.loadWorkoutPlans=async function(t=e.props){const{year:s}=t,o=(new Date).getMonth()+1,a=n.a.getYear(),c=parseInt(s||(o<6?a-1:a),10),{workoutPlanStore:r,workoutStore:l,userStore:i}=t.stores,{team:h}=i,{currentTeam:m=h.id}=l;if(m){await r.load({query:{team:m,seasonYear:c,seasonMonth:6}});const{workoutPlans:t}=r,e=t[0]||{};e.id&&(await r.load(e.id),r.prepareWeekGraphs({year:s}))}else r.updateItem("workoutPlans",[]),r.updateItem("workoutPlan",{}),r.resetGraphPlanWeekDistanceCurrent()},this.loadDogs=async function(){const{dogStore:t}=e.props.stores,{currentTeam:s}=t;await t.load({query:{team:s},addData:["workoutSummary"]})},this.chooseSubmenu=t=>{this.setState({submenu:t.target.parentElement.dataset.menu||t.target.dataset.menu})},this.state=function(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?o(Object(s),!0).forEach((function(e){a(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):o(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}({},L)}async loadAll(){const{appState:t,userStore:e}=this.props.stores;this.setState({isLoading:!0}),await t.getFingerprint(),await e.getInfo(),await e.getNotifications(),await this.loadWorkoutSummary(),await Promise.all([this.loadWorkoutPlans(),this.loadTeams()]),this.setState({isLoading:!1})}async loadTeams(t=this.props){const{teamStore:e,workoutStore:s}=t.stores,{currentTeam:o}=s;await e.load({query:{team:o,skipMusherWorkoutSummary:!0},addData:["workoutSummary"]})}async loadFeed(){const{userStore:t}=this.props.stores;await t.getFeed({})}async loadWorkoutSummary(){const{userStore:t,workoutStore:e}=this.props.stores,{currentTeam:s}=e;await t.getWorkoutSummary({team:s})}componentDidMount(){this.loadAll()}render(){const{isLoading:e,submenu:s}=this.state,{userStore:o,appState:a,workoutPlanStore:c,teamStore:l,workoutStore:h,stravaActivityStore:L,garminActivityDetailsStore:T}=this.props.stores,{workoutPlan:R,workoutPlans:$}=c,{darkmode:E,viewmode:A}=a,{workouts:W,teams:F,tracks:M,isAdmin:z,dogs:U}=o,B=F.length,q=U.length,K=M.length,{currentTeam:Y,cordovaActiveTrackingParams:V,isRunning:G,totalDistance:N,currentSpeed:Z,totalTime:J}=h,H=o.findTeam(Y,!0),{workoutSummary:Q}=l,X=(Y?l.findWorkoutSummary(Y,2019):l.findWorkoutSummaryTotal(2019))||{},_=(Y?l.findWorkoutSummary(Y,2020):l.findWorkoutSummaryTotal(2020))||{},{user:tt}=o,{stravaActivities:et}=L,{garminActivityDetails:st}=T;return Object(r.h)("div",{class:"container-fluid",style:`margin-bottom: ${C}; margin-top: ${D};`},Object(r.h)("div",{class:"row mb-4 fixed-top",style:`margin-top: ${I}; background-color: ${E?"#191d21":"#f8f9fa"};`},z&&Object(r.h)("div",{class:"col text-center subtopmenu"},Object(r.h)("a",{href:"/admin",class:"text-secondary stretched-link"},Object(r.h)("nobr",null,Object(r.h)("i",{class:"fas fa-user-shield"})," ",Object(r.h)(i.c,{id:"home.admin"},"Admin")))),Object(r.h)("div",{class:"col text-center subtopmenu border-bottom border-primary"},Object(r.h)("a",{href:"/",class:"text-primary stretched-link"},Object(r.h)("nobr",null,Object(r.h)("i",{class:"fas fa-chart-line"})," ",Object(r.h)(i.c,{id:"home.dashboard"},"Dashboard")))),Object(r.h)("div",{class:"col text-center subtopmenu"},Object(r.h)("a",{href:"/feed",class:"text-secondary stretched-link"},Object(r.h)("nobr",null,Object(r.h)("i",{class:"fas fa-rss"})," ",Object(r.h)(i.c,{id:"home.feed"},"Feed")))),Object(r.h)("div",{class:"col text-center subtopmenu"},Object(r.h)("a",{href:"/todo",class:"text-secondary stretched-link"},Object(r.h)("nobr",null,Object(r.h)("i",{class:"fas fa-list"})," ",Object(r.h)(i.c,{id:"home.todo"},"Todo"))))),G&&V&&Object(r.h)(t,null,Object(r.h)("div",{class:"row"},Object(r.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 border-bottom bg-light py-4"},Object(r.h)("h1",{class:"text-success font-weight-bold"},"Tracking",Object(r.h)("div",{class:"spinner-grow ml-3",role:"status"})),Object(r.h)("div",{class:"row mb-3"},Object(r.h)("div",{class:"col-4 text-center font-weight-bold",style:"font-size: 1.3em;"},n.a.secToHms(J)),Object(r.h)("div",{class:"col-4 text-center font-weight-bold",style:"font-size: 1.3em;"},n.a.format(3.6*Z,1)," km/t"),Object(r.h)("div",{class:"col-4 text-center font-weight-bold",style:"font-size: 1.3em;"},n.a.format(N/1e3,2)," km")),Object(r.h)("a",{class:"btn btn-block btn-danger",href:"/workouts/tracking"},Object(r.h)(i.c,{id:"workouts.go-to-tracking"},"Go to tracking"))))),["beta"].indexOf(A)>-1?Object(r.h)(t,null,Object(r.h)(P.a,{stores:this.props.stores,url:this.props.url}),Object(r.h)(x.a,{stores:this.props.stores}),Object(r.h)(S.a,{stores:this.props.stores}),Object(r.h)(w.a,{stores:this.props.stores})):Object(r.h)(t,null,Object(r.h)("div",{class:"row"},Object(r.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 border-bottom"},Object(r.h)(k.a,{stores:this.props.stores,callback:this.loadTeamInfo,key:"teams-"+Y})),Object(r.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3"},!e&&Q&&0===Q.length&&Object(r.h)("div",{class:"mb-5 py-3 border-top border-bottom"},Object(r.h)("div",{class:"text-center"},Object(r.h)("div",{class:"display-4"},Object(r.h)("i",{class:"fas fa-paw"})),Object(r.h)("h5",null,Object(r.h)(i.c,{id:"home.welcome-title"},"Velkommen til The Musher.")),Object(r.h)("p",null,Object(r.h)(i.c,{id:"home.welcome-body-1"},"The Musher er en app som er kontinuerlig under utvikling. Alle ideer/innspill/kommentarer mottas med stor takk p친 Facebooksiden v친r 游땎")),Object(r.h)("p",null,Object(r.h)(i.c,{id:"home.welcome-body-2"},"Fokus til appen er enkel registrering av hunder, team, treninger og hendelser rundt hundene. N친r man har mange hunder s친 er det ofte vanskelig 친 holde styr p친 l칮petid, vaksiner, treninger, skader, vetrin칝rbes칮k, chiplister, osv.")),Object(r.h)("p",null,Object(r.h)(i.c,{id:"home.welcome-body-3"},"Alle data lagres sentralt i skyen hos AWS (Amazon Web Services) og det vil derfor v칝re mulig 친 bruke appen fra flere telefoner og datamaskiner samtidig. Dette kan v칝re fint dersom det er flere som trener og f칮lger opp hundene."))),Object(r.h)("h5",null,Object(r.h)(i.c,{id:"home.howto-title"},"Slik kommer du i gang:")),Object(r.h)("ol",null,B<1&&Object(r.h)("li",null,Object(r.h)("a",{class:"btn btn-info mt-3",href:"/teams/"},Object(r.h)(i.c,{id:"home.howto-step-1"},"Legg inn teamene dine."))),q<1&&Object(r.h)("li",null,Object(r.h)("a",{class:"btn btn-info mt-3",href:"/dogs/"},Object(r.h)(i.c,{id:"home.howto-step-2"},"Legg inn hundene dine."))),K<1&&Object(r.h)("li",null,Object(r.h)("a",{class:"btn btn-info mt-3",href:"/tracks/"},Object(r.h)(i.c,{id:"home.howto-step-3"},"Legg inn rundene dine."))),Object(r.h)("li",null,Object(r.h)("a",{class:"btn btn-info mt-3",href:"/workouts/"},Object(r.h)(i.c,{id:"home.howto-step-4"},"Begynn 친 registrere treningene."))))),Object(r.h)(b.a,{stores:this.props.stores,isLoading:e,key:`graph-${R.id}-${$.length}`}),["beta","advanced"].indexOf(A)>-1&&Object(r.h)(t,null,Object(r.h)(d.a,{stores:this.props.stores,isLoading:e,key:`workout-table-${R.id}-${$.length}`,showHeader:!1})))),Object(r.h)(P.a,{stores:this.props.stores,url:this.props.url}),Object(r.h)("div",{class:"row"},Object(r.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 my-3"},Object(r.h)("div",{class:"row"},Object(r.h)("div",{class:"col px-1 pt-2"},Object(r.h)("button",{class:`btn btn-block ${"races"===s?"btn-danger":"btn-outline-danger"} text-nowrap`,style:"text-overflow: ellipsis; overflow: hidden;","data-menu":"races",onClick:this.chooseSubmenu},Object(r.h)("i",{class:"fas fa-dog"})," ",Object(r.h)(i.c,{id:"home.races"},"L칮p"))),Object(r.h)("div",{class:"col px-1 pt-2"},Object(r.h)("button",{class:`btn btn-block ${"lastWorkouts"===s?"btn-primary":"btn-outline-primary"} text-nowrap`,style:"text-overflow: ellipsis; overflow: hidden;","data-menu":"lastWorkouts",onClick:this.chooseSubmenu},Object(r.h)("i",{class:"fas fa-running"})," ",Object(r.h)(i.c,{id:"home.workouts"},"Treninger"))),Object(r.h)("div",{class:"col px-1 pt-2"},Object(r.h)("button",{class:`btn btn-block ${"totals"===s?"btn-primary":"btn-outline-primary"} text-nowrap`,style:"text-overflow: ellipsis; overflow: hidden;","data-menu":"totals",onClick:this.chooseSubmenu},Object(r.h)("i",{class:"fas fa-equals"})," ",Object(r.h)(i.c,{id:"home.totals"},"Totaler"))),Object(r.h)("div",{class:"col px-1 pt-2"},Object(r.h)("button",{class:`btn btn-block ${"workoutplanStatus"===s?"btn-primary":"btn-outline-primary"} text-nowrap`,style:"text-overflow: ellipsis; overflow: hidden;","data-menu":"workoutplanStatus",onClick:this.chooseSubmenu},Object(r.h)("i",{class:"fas fa-chart-line"})," ",Object(r.h)(i.c,{id:"home.status"},"Status"))))),"races"===s&&Object(r.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3"},Object(r.h)(O.a,{stores:this.props.stores})),"lastWorkouts"===s&&Object(r.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3"},Object(r.h)(p.a,null),Object(r.h)(u.a,{stores:this.props.stores})),"totals"===s&&Object(r.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3"},Object(r.h)(f.a,{stores:this.props.stores,key:"totals-"+_.distancekm,currentSeason:_,prevSeason:X})),"workoutplanStatus"===s&&Object(r.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3"},Object(r.h)(j.a,{stores:this.props.stores,key:"status-"+_.distancekm,currentSeason:_,prevSeason:X}))),Object(r.h)(g.a,{stores:this.props.stores}),"lastWorkouts"===s&&Object(r.h)("div",{class:"row"},tt&&tt.strava&&et&&et.length>0&&Object(r.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 border-top border-bottom pt-3 pb-3 my-2 overflow-auto",style:"max-height: 30vh;"},Object(r.h)("h5",null,Object(r.h)(i.c,{id:"workout.index.strava-workouts"},"Strava workouts / not imported")),et&&et.map(t=>Object(r.h)(y.a,{stores:this.props.stores,activity:t,key:`strava-${Y}-${t.id}`}))),tt&&tt.garmin&&st&&st.length>0&&Object(r.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 border-top border-bottom pt-3 pb-3 my-2 overflow-auto",style:"max-height: 30vh;"},Object(r.h)("h5",null,Object(r.h)(i.c,{id:"workout.index.garmin-workouts"},"Garmin workouts / not imported")),st&&st.map(t=>Object(r.h)(v.a,{stores:this.props.stores,activity:t,key:`garmin-${Y}-${t.id}`}))),W&&W.length>0&&Object(r.h)("div",{class:"col-12 mb-4"},Object(r.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 px-0 mt-4"},Object(r.h)("h5",null,Object(r.h)(i.c,{id:"home.last-workouts",fields:{total:W.length}},"Siste treningsturer - ",W.length," stk"),H&&H.name&&Object(r.h)("div",null,Object(r.h)("small",{class:"font-weight-lighter"},"(",Object(r.h)(i.c,{id:"workout.index.filtered-by"},"Filtered by"),": ",H.name,")")))),W&&W.map(t=>Object(r.h)(m.a,{stores:this.props.stores,workout:t}))))))}})||c;e.default=T}.call(this,s("hosL").Fragment)},"4QWe":function(t,e,s){"use strict";var o,a=s("hosL"),c=s("Utv1"),r=s("/eY4"),n=s("OhSV"),l=s("go65"),i=(s("ETxl"),s("ZOvn"));let h=Object(r.a)(o=class extends a.Component{constructor(...t){var e;super(...t),e=this,this.commentStory=async function(){const{callback:t=(()=>{}),inputRefObject:s={}}=e.props,{story:o}=e.props,{storyStore:a}=e.props.stores,{comment:c=""}=e.state,r=await a.commentStory({id:o.id,comment:c});r&&200===r.status&&(e.setState({comment:""},()=>{i.a.resizeTextarea(s[o.id])}),t({story:o,response:r}))}}render(){const{inputRef:t}=this.props,{comment:e}=this.state,{userStore:s}=this.props.stores,{user:o={}}=s,r=o.firstname?`${c.a.ucfirst(o.firstname,!0)}${c.a.ucfirst(o.lastname,!0)}`:""+c.a.ucfirst(o.email||"",!0),h=o.image||(o.images?o.images[0]:void 0);return Object(a.h)("div",null,Object(a.h)("div",{class:"d-flex mb-0 position-relative w-100"},Object(a.h)("div",{class:"text-center border rounded-circle imageRounded imageRoundedSmall",style:(h?`background-image: url('${h.s3SmallLink}'); background-size: cover;`:"")+" border-width: 3px !important;"},!o.image&&Object(a.h)("span",{class:"font-weight-lighter",style:"font-size: 15px;"},r)),Object(a.h)("div",{class:"col pl-3",style:"line-height: 1.2em;"},Object(a.h)("div",{class:"d-flex bd-highlight"},Object(a.h)("div",{class:"p-0 w-100 bd-highlight"},Object(a.h)("label",{class:"sr-only",for:"inlineFormInput"},Object(a.h)(n.c,{id:"comments.comment"},"Kommentar")),Object(a.h)(n.b,null,Object(a.h)("textarea",{class:"form-control rounded rounded-lg",type:"text",placeholder:Object(a.h)(n.c,{id:"comments.write-comment"},"Skriv en kommentar..."),onInput:Object(l.a)(this,"comment"),onKeyUp:i.a.resizeTextarea,style:"height: 2.3em;",value:e,ref:t}))),Object(a.h)("div",{class:"p-0 pl-2 flex-shrink-1 bd-highlight"},Object(a.h)("button",{type:"button",class:"btn btn-primary mb-2",onClick:this.commentStory},Object(a.h)(n.c,{id:"comments.add-comment"},"Send")))))))}})||o;e.a=h},"9Bb9":function(t,e,s){"use strict";var o,a=s("hosL"),c=s("Utv1"),r=s("/eY4"),n=s("OhSV"),l=s("ETxl"),i=s.n(l),h=s("ZOvn");let m=Object(r.a)(o=class extends a.Component{render(){const{userStore:t,workoutPlanStore:e,teamStore:s}=this.props.stores,{user:o}=t,{language:r="no"}=o,l=h.a.getMonths(r),{team:m}=s,{year:b}=this.props,d=(new Date).getMonth()+1,u=b||c.a.getYear(),p=parseInt(d<6?u-1:u,10),O=c.a.monthRange(p+"-06-01",p+1+"-05-31");let g;return Object(a.h)("div",{class:"container-fluid mb-2"},Object(a.h)("div",{class:"row mt-2"},Object(a.h)("div",{class:"col-12"},Object(a.h)("h5",null,Object(a.h)(n.c,{id:"workout.totals.title"},"Treningsplanstatus")))),Object(a.h)("div",{class:"row mt-2 border-bottom pb-2"},O&&O.map(s=>{if(s.year>u||s.year===u&&s.month>=d)return"";const o=e.sumWorkoutPlanMonth(s.year,s.month+1);if(!o)return"";g=o;const r=t.findWorkoutSummaryMonth(s.year,s.month+1)/o*100,n=r>100?100:c.a.format(r,0);return Object(a.h)("div",{class:"col-3 text-center"},Object(a.h)("div",{class:"px-auto w-100 clearfix"},Object(a.h)("div",{class:"progress "+i.a["progress-bar-vertical"],style:" margin-left: calc(50% - 20px);"},Object(a.h)("div",{class:"progress-bar progress-bar-striped bg-success",role:"progressbar",style:`height: ${n}%; width: 40px;`,"aria-valuenow":n,"aria-valuemin":"0","aria-valuemax":"100"},c.a.format(r,0),"%"))),Object(a.h)("div",{class:"w-100 mt-1"},l[s.month]," ",s.year))}),!g&&Object(a.h)("div",{class:"col-12 text-center"},Object(a.h)("h3",null,Object(a.h)(n.c,{id:"workout.plan.no-workout-plan-found",fields:{name:m.name}},"Ingen treningsplaner funnet for team ",m.name,".")))))}})||o;e.a=m},AEg1:function(t,e,s){"use strict";(function(t){function o(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,o)}return s}function a(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}var c,r=s("hosL"),n=s("Utv1"),l=s("/eY4"),i=s("OhSV"),h=s("go65"),m=s("om2D"),b=(s("ETxl"),s("ZOvn"));const d={story:{title:"",body:"",images:[],public:!1},showAddImage:!1};let u=Object(l.a)(c=class extends r.Component{constructor(t){var e;super(t),e=this,this.addStory=async function(){const{callback:t=(()=>{})}=e.props,{story:s={}}=e.state,{storyStore:o}=e.props.stores,a=await o.insert({title:s.title,body:s.body,images:s.images,public:s.public?1:0,team:s.team});a&&201===a.status&&(await o.loadPublicFeed(),t(a.data),e.setState({story:{title:"",body:"",images:[]}},()=>{b.a.resizeTextarea(e.inputRef.newStoryBody)}))},this.addImages=({value:t})=>{const{story:e}=this.state;e.images.push(...t),this.setState({story:e})},this.addImage=()=>{const{showAddImage:t}=this.state;this.setState({showAddImage:!t})},this.handleImageErrored=t=>{const e=t.target;e.onerror=null,setTimeout(()=>{e.src+="?"+new Date},1e3)},this.state=function(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?o(Object(s),!0).forEach((function(e){a(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):o(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}({},d),this.inputRef={}}render(){const{col:e=12,offset:s=0}=this.props,{story:o,showAddImage:a}=this.state,{userStore:c,appState:l}=this.props.stores,{user:d={}}=c,u=d.firstname?`${n.a.ucfirst(d.firstname,!0)}${n.a.ucfirst(d.lastname,!0)}`:""+n.a.ucfirst(d.email||"",!0),p=d.image||(d.images?d.images[0]:void 0),{darkmode:O}=l;return Object(r.h)("div",{class:"w-100"},Object(r.h)("div",{class:"row bg-light"},Object(r.h)("div",{class:`col-${e} offset-${s} col-sm-8 col-lg-6 offset-sm-2 offset-lg-3 rounded rounded-lg py-3 bg-${O?"black":"white"} shadow-sm mb-3 mt-3`},Object(r.h)("div",{class:"d-flex mb-0 position-relative w-100"},Object(r.h)("div",{class:"text-center border rounded-circle imageRounded imageRoundedSmall",style:(p?`background-image: url('${p.s3SmallLink}'); background-size: cover;`:"")+" border-width: 3px !important;"},!d.image&&Object(r.h)("span",{class:"font-weight-lighter",style:"font-size: 15px;"},u)),Object(r.h)("div",{class:"col pl-3",style:"line-height: 1.2em;"},Object(r.h)("div",{class:"d-flex bd-highlight"},Object(r.h)("div",{class:"p-0 w-100 bd-highlight"},Object(r.h)("label",{class:"sr-only",for:"inlineFormInput"},Object(r.h)(i.c,{id:"story.body"},"Story")),Object(r.h)(i.b,null,Object(r.h)("textarea",{class:"form-control rounded",type:"text",placeholder:Object(r.h)(i.c,{id:"story.write-body"},"Hva tenker du p친?.."),onInput:Object(h.a)(this,"story.body"),onKeyUp:b.a.resizeTextarea,style:"height: 2.3em;",value:o.body,ref:t=>this.inputRef.newStoryBody=t}))),Object(r.h)("div",{class:"p-0 pl-2 flex-shrink-1 bd-highlight"},Object(r.h)("button",{type:"button",class:"btn btn-primary mb-2",onClick:this.addStory},Object(r.h)(i.c,{id:"comments.add-comment"},"Send")))))),Object(r.h)("div",null,Object(r.h)("div",{class:"row"},Object(r.h)("div",{class:"col-4 text-center"},Object(r.h)("div",{class:"form-group"},Object(r.h)("select",{class:"custom-select custom-select-sm",id:"team",onInput:Object(h.a)(this,"story.team")},d.teams&&d.teams.map(t=>{const e=c.findTeam(t,!0);return e.public?Object(r.h)("option",{value:e.id},e.name):""})))),Object(r.h)("div",{class:"col-4 text-center"},Object(r.h)("div",{class:"form-group"},Object(r.h)("div",{class:"custom-control custom-control-sm custom-switch"},Object(r.h)("input",{type:"checkbox",class:"custom-control-input",id:"public",onInput:Object(h.a)(this,"story.public"),checked:1==o.public}),Object(r.h)("label",{class:"custom-control-label",for:"public"},Object(r.h)(i.c,{id:"story.public"},"Is public"))))),Object(r.h)("div",{class:"col-4 text-center"},!a&&Object(r.h)("button",{type:"button",class:"btn btn-sm","data-id":o.id,onClick:this.addImage},Object(r.h)("i",{class:"text-success fas fa-image"})," ",Object(r.h)(i.c,{id:"store.add-image"},"Add image")),a&&Object(r.h)(t,null,Object(r.h)("div",{class:"container-fluid"},Object(r.h)("div",{class:"row"},o.images&&o.images.map(t=>Object(r.h)("div",{class:"col-3 p-1"},Object(r.h)("img",{src:t.s3SmallLink,class:"img-fluid",onError:this.handleImageErrored}),Object(r.h)("button",{class:"btn btn-sm btn-link",onClick:this.removeImage,"data-name":t.name},Object(r.h)("i",{class:"fas fa-trash"})," Del"))))),Object(r.h)(m.a,{object:o,updateField:this.addImages}))))))))}})||c;e.a=u}).call(this,s("hosL").Fragment)},B95u:function(t,e,s){"use strict";function o(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,o)}return s}function a(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}var c,r=s("hosL"),n=s("Utv1"),l=s("/eY4"),i=s("OhSV"),h=s("fh8t"),m=s.n(h),b=s("go65"),d=(s("ETxl"),s("ZOvn"));var u,p=Object(l.a)(c=class extends r.Component{constructor(...t){var e;super(...t),e=this,this.commentStory=async function(){const{callback:t=(()=>{}),commentId:s,inputRefObject:o={}}=e.props,{story:a}=e.props,{storyStore:c}=e.props.stores,{comment:r=""}=e.state,n=await c.commentReplyStory({id:a.id,commentId:s,comment:r});n&&200===n.status&&(e.setState({comment:""},()=>{d.a.resizeTextarea(o[s])}),t({story:a,response:n,commentId:s}))}}render(){const{inputRef:t}=this.props,{comment:e}=this.state,{userStore:s}=this.props.stores,{user:o={}}=s,a=o.firstname?`${n.a.ucfirst(o.firstname,!0)}${n.a.ucfirst(o.lastname,!0)}`:""+n.a.ucfirst(o.email||"",!0),c=o.image||(o.images?o.images[0]:void 0);return Object(r.h)("div",{class:"w-100"},Object(r.h)("div",{class:"d-flex mb-0 position-relative w-100"},Object(r.h)("div",{class:"text-center border rounded-circle imageRounded imageRoundedThumb",style:(c?`background-image: url('${c.s3SmallLink}'); background-size: cover;`:"")+" border-width: 3px !important;"},!c&&Object(r.h)("span",{class:"font-weight-lighter",style:"font-size: 15px;"},a)),Object(r.h)("div",{class:"col pl-3",style:"line-height: 1.2em;"},Object(r.h)("div",{class:"d-flex bd-highlight"},Object(r.h)("div",{class:"p-0 w-100 bd-highlight"},Object(r.h)("label",{class:"sr-only",for:"inlineFormInput"},Object(r.h)(i.c,{id:"comments.comment"},"Kommentar")),Object(r.h)(i.b,null,Object(r.h)("textarea",{class:"form-control form-control-sm rounded rounded-lg",type:"text",placeholder:Object(r.h)(i.c,{id:"comments.write-comment"},"Skriv en kommentar..."),onInput:Object(b.a)(this,"comment"),onKeyUp:d.a.resizeTextarea,style:"height: 2.3em;",value:e,ref:t}))),Object(r.h)("div",{class:"p-0 pl-2 flex-shrink-1 bd-highlight"},Object(r.h)("button",{type:"button",class:"btn btn-sm btn-primary mb-2",onClick:this.commentStory},Object(r.h)(i.c,{id:"comments.add-comment"},"Send")))))))}})||c;const O={showAddComment:{},showAllComments:!1,showAllReplies:{}};let g=Object(l.a)(u=class extends r.Component{constructor(t){var e;super(t),e=this,this.likeComment=async function(t){const{callback:s=(()=>{})}=e.props,o=t.target.parentElement.dataset.id||t.target.dataset.id,{story:a}=e.props,{storyStore:c}=e.props.stores,r=await c.likeStoryComment({id:a.id,commentId:o});return r&&200===r.status&&s({type:"likeComment",story:a,commentId:o,response:r}),!0},this.likeReply=async function(t){const{callback:s=(()=>{})}=e.props,o=t.target.parentElement.dataset.id||t.target.dataset.id,a=t.target.parentElement.dataset.comment||t.target.dataset.comment,{story:c}=e.props,{storyStore:r}=e.props.stores,n=await r.likeStoryCommentReply({id:c.id,replyId:o,commentId:a});n&&200===n.status&&s({type:"likeReply",story:c,commentId:a,replyId:o,response:n})},this.replyComment=async function(t){const s=t.target.parentElement.dataset.id||t.target.dataset.id,{showAddComment:o}=e.state;o[s]=!o[s],e.setState({showAddComment:o},()=>{e.inputRef[s]&&e.inputRef[s].focus()})},this.toggleComments=()=>{const{showAllComments:t}=this.state;this.setState({showAllComments:!t})},this.toggleReplies=t=>{const e=t.target.parentElement.dataset.id||t.target.dataset.id,{showAllReplies:s}=this.state;s[e]=!s[e],this.setState({showAllReplies:s})},this.state=function(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?o(Object(s),!0).forEach((function(e){a(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):o(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}({},O),this.inputRef={}}render(){const{showAddComment:t,showAllComments:e,showAllReplies:s}=this.state,{story:o,callback:a=(()=>{}),compact:c=!1}=this.props,{userStore:l}=this.props.stores,{user:h,language:b="no"}=l;let u,O=[],g=0,f=0;return o.comments&&(g=o.comments.length,e?O=o.comments:(u=c?0:2,O=o.comments.slice(Math.max(g-u,0))),f=O.length),Object(r.h)("div",null,o&&O&&O.reverse().map(e=>{const{user:c={}}=e,l=c.firstname?`${n.a.ucfirst(c.firstname,!0)}${n.a.ucfirst(c.lastname,!0)}`:""+n.a.ucfirst(c.email||"",!0),O=c.firstname?`${c.firstname} ${c.lastname}`:""+c.email,g=c.image||(c.images?c.images[0]:void 0),f=e.likes&&e.likes.findIndex(t=>t.user===h.id)>-1;let j=[],y=0,v=0;return e.comments&&(y=e.comments.length,j=s[e.id]?e.comments:e.comments.slice(0,u),v=j.length),Object(r.h)("div",{class:"row"},Object(r.h)("div",{class:"col-11 offset-1 d-flex mb-2 position-relative"},Object(r.h)("div",{class:"text-center border rounded-circle imageRounded imageRoundedSmall",style:(g?`background-image: url("${g.s3SmallLink}"); background-size: cover;`:"")+" border-width: 3px !important;"},!c.image&&Object(r.h)("span",{class:"font-weight-lighter",style:"font-size: 15px;"},l)),Object(r.h)("div",{class:"flex-grow-1 pl-3 pt-0",style:"line-height: 1.2em;"},Object(r.h)("div",{class:"bg-light p-2 rounded rounded-lg"},Object(r.h)("span",{style:"font-size: 0.95em;"},Object(r.h)("h5",{class:"font-weight-bold mb-0",style:"font-size: 1.0em;"},O),Object(r.h)(m.a,{markdown:d.a.replaceImages(e.comment,e.images,b),markdownOpts:d.a.getMarkdownOptions()}))),Object(r.h)("small",null,Object(r.h)("button",{class:"btn btn-sm btn-link py-0 "+(f?"text-primary":""),onClick:this.likeComment,"data-id":e.id},Object(r.h)(i.c,{id:"comments.like"},"Lik")),"-",Object(r.h)("button",{class:"btn btn-sm btn-link py-0",onClick:this.replyComment,"data-id":e.id},Object(r.h)(i.c,{id:"comments.comment-add"},"Kommentar")),"-",Object(r.h)("button",{class:"btn btn-sm btn-link py-0 disabled"},n.a.formatDistance(e.createdDate,new Date,{locale:"no-NB"})))),e.likes&&e.likes.length>0&&Object(r.h)("small",{class:"position-absolute bg-light shadow-sm rounded-lg py-0 px-1",style:"bottom: 20px; right: 15px;"},Object(r.h)("i",{class:"fas fa-thumbs-up text-primary"})," ",e.likes.length)),Object(r.h)("div",{class:"col-10 offset-2 mb-2"},e&&j&&j.map(t=>{const{user:s={}}=t,o=s.firstname?`${n.a.ucfirst(s.firstname,!0)}${n.a.ucfirst(s.lastname,!0)}`:""+n.a.ucfirst(s.email||"",!0),a=s.firstname?`${s.firstname} ${s.lastname}`:""+s.email,c=s.image||(s.images?s.images[0]:void 0),l=t.likes&&t.likes.findIndex(t=>t.user===h.id)>-1;return Object(r.h)("div",{class:"row"},Object(r.h)("div",{class:"col-12 d-flex mb-2 position-relative"},Object(r.h)("div",{class:"text-center border rounded-circle imageRounded imageRoundedThumb",style:(c?`background-image: url("${c.s3SmallLink}"); background-size: cover;`:"")+" border-width: 3px !important;"},!s.image&&Object(r.h)("span",{class:"font-weight-lighter",style:"font-size: 15px;"},o)),Object(r.h)("div",{class:"flex-grow-1 pl-3 pt-0",style:"line-height: 1.2em;"},Object(r.h)("div",{class:"bg-light p-2 rounded-lg"},Object(r.h)("span",{style:"font-size: 0.95em;"},Object(r.h)("h5",{class:"font-weight-bold mb-0",style:"font-size: 1.0em;"},a),Object(r.h)(m.a,{markdown:d.a.replaceImages(t.comment,t.images,b),markdownOpts:d.a.getMarkdownOptions()}))),Object(r.h)("small",null,Object(r.h)("button",{class:"btn btn-sm btn-link py-0 "+(l?"text-primary":""),onClick:this.likeReply,"data-comment":e.id,"data-id":t.id},Object(r.h)(i.c,{id:"comments.like"},"Lik")),"-",Object(r.h)("button",{class:"btn btn-sm btn-link py-0",onClick:this.replyComment,"data-id":e.id},Object(r.h)(i.c,{id:"comments.comment-add"},"Kommentar")),"-",Object(r.h)("button",{class:"btn btn-sm btn-link py-0 disabled"},n.a.formatDistance(t.createdDate,new Date,{locale:"no-NB"})))),t.likes&&Object(r.h)("small",{class:"position-absolute bg-light shadow-sm rounded-lg py-0 px-1",style:"bottom: 20px; right: 15px;"},Object(r.h)("i",{class:"fas fa-thumbs-up text-primary"})," ",t.likes.length)))}),y-v>0&&Object(r.h)("div",null,Object(r.h)("button",{class:"btn btn-sm btn-link py-0",onClick:this.toggleReplies,"data-id":e.id},Object(r.h)(i.c,{id:"comments.show-more",fields:{more:y-v}},"Vis ",y-v," flere kommentarer...")))),t[e.id]&&Object(r.h)("div",{class:"col-11 offset-1 d-flex mb-2 position-relative"},Object(r.h)(p,{stores:this.props.stores,story:o,callback:a,commentId:e.id,inputRef:t=>this.inputRef[e.id]=t,inputRefObject:this.inputRef})))}),g-f>0&&Object(r.h)("div",null,Object(r.h)("button",{class:"btn btn-sm btn-link py-0",onClick:this.toggleComments},Object(r.h)(i.c,{id:"comments.show-more",fields:{more:g-f}},"Vis ",g-f," flere kommentarer..."))),e&&Object(r.h)("div",null,Object(r.h)("button",{class:"btn btn-sm btn-link py-0",onClick:this.toggleComments},Object(r.h)(i.c,{id:"comments.hide-all-comments"},"Skjul alle kommentarene."))))}})||u;e.a=g},L3gU:function(t,e,s){"use strict";(function(t){function o(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,o)}return s}function a(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}var c,r=s("hosL"),n=s("Utv1"),l=s("/eY4"),i=s("OhSV"),h=s("1OK2"),m=s("sqi2"),b=s("/922"),d=s("eQ6k");const u={showAddComment:{}};let p=Object(l.a)(c=class extends r.Component{constructor(t){var e;super(t),e=this,this.toggleDate=t=>{t.stopPropagation(),t.preventDefault();const{showDate:e}=this.state;this.setState({showDate:!e})},this.likeWorkout=async function(t){const s=parseInt(t.target.closest("button").dataset.id,10),{workoutStore:o}=e.props.stores,a=await o.likeWorkout({id:s});200===a.status&&e.addLikeToFeed(s,a.data)},this.addCommentToFeed=({type:t,workout:e,response:s,commentId:o,replyId:a})=>{console.log("addCommentToFeed",{workout:e,response:s,commentId:o});const{teamStore:c}=this.props.stores;switch(t){case"likeComment":c.addLikeToComment({id:e.id,data:s.data,commentId:o});break;case"likeReply":c.addLikeToCommentReply({id:e.id,data:s.data,commentId:o,replyId:a});break;default:o?c.addCommentToWorkoutComment({id:e.id,data:s.data,commentId:o}):c.addCommentToWorkout({id:e.id,data:s.data})}},this.addLikeToFeed=(t,e)=>{const{teamStore:s}=this.props.stores;s.addLikeToWorkout({id:t,data:e})},this.toggleAddComment=t=>{const e=t.target.closest("button").dataset.id,{showAddComment:s}=this.state;s[e]?delete s[e]:s[e]=!0,this.setState({showAddComment:s},()=>{this.inputRef[e]&&this.inputRef[e].focus()})},this.state=function(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?o(Object(s),!0).forEach((function(e){a(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):o(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}({},u),this.inputRef={}}async loadTeamsPublicFeed(t=this.props){const{teamStore:e}=t.stores;await e.loadPublicFeed()}async loadAll(){await this.loadTeamsPublicFeed()}componentDidMount(){this.loadAll()}render(){const{showAddComment:e,showDate:s}=this.state,{teamStore:o,userStore:a,appState:c}=this.props.stores,{user:l}=a,{publicTeamsFeed:u}=o,{darkmode:p}=c;return Object(r.h)("div",{class:"w-100"},u&&u.map(c=>{const u=o.findPublicTeam(c.team)||{};let O;u.image&&u.image.s3SmallLink?O=u.image:u.images&&u.images[0]&&u.images[0].s3SmallLink&&(O=u.images[0]);const{likes:g,comments:f}=c,j=c.likes&&c.likes.findIndex(t=>t.user===l.id)>-1,y=u&&u.followers?u.followers.length:0,v=u.members&&u.members.indexOf(l.id)>-1,k=u&&u.followers&&u.followers.indexOf(l.id)>-1,w=u.followRequests&&u.followRequests.findIndex(t=>t.id===l.id)>-1;return Object(r.h)(t,null,Object(r.h)("div",{class:"row pb-4 bg-light"},Object(r.h)("div",{class:`col-12 col-sm-8 col-lg-6 offset-sm-2 offset-lg-3 mb-0 position-relative rounded rounded-lg py-3 bg-${p?"black":"white"} shadow-sm`},Object(r.h)("div",{class:"d-flex"},Object(r.h)("div",{class:"text-center border rounded-circle imageRounded",style:O?`background-image: url("${O.s3SmallLink}");`:""},!O&&Object(r.h)("i",{class:"fas fa-users text-muted mt-3",style:"font-size: 40px;"})),Object(r.h)("div",{class:"flex-grow-1 pl-3",style:"line-height: 1.2em;"},Object(r.h)("h5",{class:"mb-1",style:"line-height: 1.0em;"},u.name),Object(r.h)("div",null,c.date&&Object(r.h)("small",{class:"text-muted",onClick:this.toggleDate},s?n.a.formatDate(c.date,{locale:"no-NB",hour12:!1,hour:"2-digit",minute:"2-digit"}):n.a.formatDistance(c.date,new Date,{locale:"no-NB"})),1===c.public?Object(r.h)(t,null,Object(r.h)("small",{class:"ml-2 text-muted"},Object(r.h)("i",{class:"fas fa-globe-europe"}))):Object(r.h)(t,null,Object(r.h)("small",{class:"ml-2 text-muted"},Object(r.h)("i",{class:"fas fa-users"})," (",n.a.format(y),")")),Object(r.h)("small",{class:"text-muted"},c.equipment>0&&Object(r.h)(t,null,Object(r.h)("i",{class:"fas fa-tools"})," ",a.findEquipment(c.equipment)||c.equipment),c.distanceKm>0&&Object(r.h)(t,null,Object(r.h)("i",{class:"fas fa-road ml-2"})," ",n.a.format(x=c.distanceKm,x<5?2:1),"km"),c.elevation>0&&Object(r.h)(t,null,Object(r.h)("i",{class:"fas fa-mountain ml-2"})," ",n.a.format(c.elevation,0),"m"),c.speedAvg>0&&Object(r.h)(t,null,Object(r.h)("i",{class:"fas fa-tachometer-alt ml-2"})," ",n.a.format(c.speedAvg,1),"km/t"),c.dogs>0&&Object(r.h)(t,null,Object(r.h)("i",{class:"fas fa-dog ml-2"})," ",c.dogs.length),c.track>0&&Object(r.h)(t,null,Object(r.h)("i",{class:`fas fa-map-marked text-${c.track>0?"success":"danger"} ml-2`})),c.dogsLeft>0&&Object(r.h)(t,null,Object(r.h)("i",{class:`fas fa-crosshairs text-${c.dogsLeft&&c.dogsRight?"success":"danger"} ml-2`})),c.sledWeight>0&&Object(r.h)(t,null,Object(r.h)("i",{class:"fas fa-sleigh ml-2"})," ",n.a.format(c.sledWeight,0)," kg"),c.kcalBurnedTotal&&Object(r.h)(t,null,Object(r.h)("i",{class:"fas fa-balance-scale"})," ",n.a.format(c.kcalBurnedTotal)," kcal"),c.kcalMeatGramsTotal&&Object(r.h)(t,null,Object(r.h)("i",{class:"fas fa-drumstick-bite ml-2"})," ",n.a.format(c.kcalMeatGramsTotal/1e3,1)," kg"),c.kcalSalmonGramsTotal&&Object(r.h)(t,null,Object(r.h)("i",{class:"fas fa-fish ml-2"})," ",n.a.format(c.kcalSalmonGramsTotal/1e3,1)," kg"),c.kcalFatGramsTotal&&Object(r.h)(t,null,Object(r.h)("i",{class:"fas fa-piggy-bank ml-2"})," ",n.a.format(c.kcalFatGramsTotal/1e3,1)," kg"))),c.name,Object(r.h)("div",{class:"row mb-3"},c.gpxInfo&&c.gpxInfo.svgMap&&Object(r.h)(t,null,Object(r.h)("div",{class:"col-6 mt-auto text-center overflow-hidden"},Object(r.h)("svg",{viewBox:"0 0 300 300",style:"width: 150px; height: 150px;"},Object(r.h)("path",{d:""+c.gpxInfo.svgMap,style:"fill: none; stroke: #0275d8; stroke-width: 5; opacity: 0.5;"})),Object(r.h)("small",{class:"text-muted"},"Track"))),c.gpxInfo&&c.gpxInfo.svgElevation&&Object(r.h)(t,null,Object(r.h)("div",{class:"col-6 mt-auto text-center overflow-hidden"},Object(r.h)("svg",{viewBox:"0 0 300 200",style:"width: 150px; height: 100px;"},Object(r.h)("path",{d:""+c.gpxInfo.svgElevation,style:"fill: none; stroke: #5cb85c; stroke-width: 5; opacity: 0.5;"})),Object(r.h)("small",{class:"text-muted"},"Elevation")))))),Object(r.h)("div",{class:"d-flex mx-0"},c.images&&Object(r.h)(h.a,{images:c.images})),Object(r.h)("div",{class:"mt-2"},g&&g.length>0&&Object(r.h)("small",{class:"bg-light shadow-sm rounded-lg py-0 px-1",style:"bottom: 20px; right: 15px;"},Object(r.h)("i",{class:"fas fa-thumbs-up text-primary"})," ",g.length),f&&f.length>0&&Object(r.h)("small",{class:"float-right bg-light shadow-sm rounded-lg py-0 px-1",style:"bottom: 20px; right: 15px;"},Object(r.h)("i",{class:"fas fa-comment text-primary"})," ",f.length)),!v&&!k&&!w&&Object(r.h)("div",{class:"clearfix mb-2"},Object(r.h)(d.a,{stores:this.props.stores,team:u,buttonOnly:!0})),Object(r.h)("div",null,Object(r.h)("div",{class:"row"},Object(r.h)("div",{class:"col-6 text-center"},Object(r.h)("button",{type:"button",class:`btn btn-sm btn-outline-${j?"primary":"secondary"} btn-lg btn-block ${j?"text-primary":""}`,"data-id":c.id,onClick:this.likeWorkout},Object(r.h)("i",{class:(j?"text-primary fas":"far")+" fa-thumbs-up"})," ",Object(r.h)(i.c,{id:"comments.like"},"Lik"))),Object(r.h)("div",{class:"col-6 text-center"},Object(r.h)("button",{type:"button",class:"btn btn-sm btn-outline-secondary btn-lg btn-block","data-id":c.id,onClick:this.toggleAddComment},Object(r.h)("i",{class:"fas fa-comment"})," ",Object(r.h)(i.c,{id:"comments.comment-add"},"Kommentar"))))),Object(r.h)("div",{class:"mt-2"},e[c.id]&&Object(r.h)(b.a,{stores:this.props.stores,workout:c,inputRef:t=>this.inputRef[c.id]=t,col:"10",offset:"2",callback:this.addCommentToFeed}),Object(r.h)(m.a,{stores:this.props.stores,workout:c,col:"10",offset:"2",compact:!1,callback:this.addCommentToFeed})))));var x}))}})||c;e.a=p}).call(this,s("hosL").Fragment)},ZWUU:function(t,e,s){"use strict";var o,a=s("hosL"),c=(s("Utv1"),s("/eY4")),r=s("OhSV");s("go65");Object(c.a)(o=class extends a.Component{constructor(...t){var e;super(...t),e=this,this.toggleSetting=async function(t){const{userStore:s}=e.props.stores,{user:o}=s,{settings:a={}}=o;await s.updateSetting({["settings."+t]:1===a[t]?0:1})},this.hideSettings=async function(){const{userStore:t}=e.props.stores;await t.updateSetting({"settings.hideSettings":1}),e.setState({hideSettings:!0})}}render(){const{hideSettings:t}=this.state,{userStore:e}=this.props.stores,{forceShow:s}=this.props,{user:o}=e,{settings:c={}}=o;return t||c.hideSettings||!s&&c.summaryEmails&&c.infoEmails&&c.partnerEmails?"":Object(a.h)("div",{class:"col-12 col-sm-8 col-lg-6 offset-sm-2 offset-lg-3 mt-4 mb-4 pt-4 pb-4 border-bottom border-top"},Object(a.h)("h5",null,Object(a.h)(r.c,{id:"users.settings"},"Brukerinnstillinger")),!c.summaryEmails&&Object(a.h)("div",{class:"row mt-4"},Object(a.h)("div",{class:"col-4 text-muted text-right"},Object(a.h)(r.c,{id:"users.settings-summary-email"},"Oppsummeringer")),Object(a.h)("div",{class:"col-8"},Object(a.h)("div",{class:"custom-control custom-switch"},Object(a.h)("input",{type:"checkbox",class:"custom-control-input",id:"settingsSummaryEmails",onInput:()=>this.toggleSetting("summaryEmails"),checked:c.summaryEmails}),Object(a.h)("label",{class:"custom-control-label",for:"settingsSummaryEmails"})),Object(a.h)("small",{class:"text-muted"},Object(a.h)(r.c,{id:"users.settings-receive-summary-email"},"Motta oppsummeringer via e-post")))),!c.infoEmails&&Object(a.h)("div",{class:"row mt-4"},Object(a.h)("div",{class:"col-4 text-muted text-right"},Object(a.h)(r.c,{id:"users.settings-info-email"},"Info")),Object(a.h)("div",{class:"col-8"},Object(a.h)("div",{class:"custom-control custom-switch"},Object(a.h)("input",{type:"checkbox",class:"custom-control-input",id:"settingsInfoEmails",onInput:()=>this.toggleSetting("infoEmails"),checked:c.infoEmails}),Object(a.h)("label",{class:"custom-control-label",for:"settingsInfoEmails"})),Object(a.h)("small",{class:"text-muted"},Object(a.h)(r.c,{id:"users.settings-receive-info-email"},"Motta info via e-post")))),!c.partnerEmails&&Object(a.h)("div",{class:"row mt-4"},Object(a.h)("div",{class:"col-4 text-muted text-right"},Object(a.h)(r.c,{id:"users.settings-partner-email"},"Partners")),Object(a.h)("div",{class:"col-8"},Object(a.h)("div",{class:"custom-control custom-switch"},Object(a.h)("input",{type:"checkbox",class:"custom-control-input",id:"settingsPartnerEmails",onInput:()=>this.toggleSetting("partnerEmails"),checked:c.partnerEmails}),Object(a.h)("label",{class:"custom-control-label",for:"settingsPartnerEmails"})),Object(a.h)("small",{class:"text-muted"},Object(a.h)(r.c,{id:"users.settings-receive-partner-email"},"Motta tilbud fra v친re partnere via e-post")))),Object(a.h)("div",{class:"row mt-4"},Object(a.h)("div",{class:"col-12 text-muted"},Object(a.h)("small",null,Object(a.h)("a",{href:"/users"},Object(a.h)("i",{class:"fas fa-sliders-h"})," ",Object(a.h)(r.c,{id:"users.settings-text-info"},"Innstillingene finner du inne p친 profilen din."))))),Object(a.h)("div",{class:"row mt-4"},Object(a.h)("div",{class:"col-12 text-muted text-right"},Object(a.h)("small",null,Object(a.h)("button",{type:"button",class:"btn btn-sm btn-link mb-2",onClick:this.hideSettings},Object(a.h)("i",{class:"fas fa-eye-slash"})," ",Object(a.h)(r.c,{id:"users.hide-settings"},"Skjul innstillingene"))))))}})},azdc:function(t,e,s){"use strict";(function(t){var o,a=s("hosL"),c=s("Utv1"),r=s("/eY4"),n=s("OhSV"),l=s("ZOvn");let i=Object(n.d)(()=>({week:Object(a.h)(n.c,{id:"workout.graph.week"}),distance:Object(a.h)(n.c,{id:"workout.graph.distance"}),ascend:Object(a.h)(n.c,{id:"workout.graph.ascend"}),plan:Object(a.h)(n.c,{id:"workout.graph.plan"})}))(o=Object(r.a)(o=class extends a.Component{render(){const{userStore:e}=this.props.stores,{year:s,month:o,showHeader:r=!0}=this.props,{user:i}=e,{language:h="no"}=i,m=l.a.getMonths(h),b=o||(new Date).getMonth()+1,d=s||c.a.getYear(),u=parseInt(b<6?d-1:d,10),p=c.a.monthRange(u+"-06-01",u+1+"-05-31"),O=c.a.monthRange(u-1+"-06-01",u+"-05-31"),g=c.a.weekRange(u+"-06-01",u+1+"-05-31").map(t=>t.week),f=Math.floor(g.length/(g.length%6)),j=[];for(let t=0,e=g.length;t<e;t+=f)j.push(g[t]);return Object(a.h)(t,null,r&&Object(a.h)("h5",null,Object(a.h)(n.c,{id:"workout.graph.title"},"Treningsstatistikk")," ",u," - ",u+1),Object(a.h)("div",{class:"w-100 mt-3 mb-4"},Object(a.h)("small",{class:"mb-4"},Object(a.h)("small",null,Object(a.h)("table",{class:"table table-sm font-weigth-lighter border-bottom"},Object(a.h)("thead",null,Object(a.h)("tr",null,Object(a.h)("th",{style:"padding: .15rem;"},Object(a.h)(n.c,{id:"workout.graph.season"},"Sesong")),p.map(t=>Object(a.h)("th",{class:"text-right",style:"padding: .15rem;"},Object(a.h)("a",{href:`/workouts/month/${t.month}/${t.year}`},m[t.month-1]))))),Object(a.h)("tbody",null,Object(a.h)("tr",null,Object(a.h)("th",{scope:"row",style:"padding: .15rem;"},u-1," - ",u),O.map(s=>Object(a.h)(t,null,Object(a.h)("td",{class:"text-right",style:"padding: .15rem;"},Object(a.h)("nobr",null,e.findWorkoutSummaryMonth(s.year,s.month)),Object(a.h)("br",null),Object(a.h)("nobr",null,e.findWorkoutSummaryMonth(s.year,s.month,"elevation")),Object(a.h)("br",null)))),Object(a.h)("td",{class:"text-muted",style:"padding: .15rem;"},Object(a.h)("nobr",null,Object(a.h)("i",{class:"fas fa-road"})," km"),Object(a.h)("br",null),Object(a.h)("nobr",null,Object(a.h)("i",{class:"fas fa-mountain"})," m"),Object(a.h)("br",null))),Object(a.h)("tr",null,Object(a.h)("th",{scope:"row",style:"padding: .15rem;"},u," - ",u+1),p.map(s=>Object(a.h)(t,null,Object(a.h)("td",{class:"text-right",style:"padding: .15rem;"},Object(a.h)("nobr",null,e.findWorkoutSummaryMonth(s.year,s.month)),Object(a.h)("br",null),Object(a.h)("nobr",null,e.findWorkoutSummaryMonth(s.year,s.month,"elevation")),Object(a.h)("br",null)))),Object(a.h)("td",{class:"text-muted",style:"padding: .15rem;"},Object(a.h)("nobr",null,Object(a.h)("i",{class:"fas fa-road"})," km"),Object(a.h)("br",null),Object(a.h)("nobr",null,Object(a.h)("i",{class:"fas fa-mountain"})," m"),Object(a.h)("br",null)))))))))}})||o)||o;e.a=i}).call(this,s("hosL").Fragment)},gOLw:function(t,e,s){"use strict";(function(t){function o(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,o)}return s}function a(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}var c,r=s("hosL"),n=s("Utv1"),l=s("/eY4"),i=s("OhSV"),h=s("fh8t"),m=s.n(h),b=(s("1OK2"),s("B95u")),d=s("4QWe"),u=s("eQ6k"),p=s("ZOvn");const O={showAddComment:{}};let g=Object(l.a)(c=class extends r.Component{constructor(t){var e;super(t),e=this,this.toggleDate=t=>{t.stopPropagation(),t.preventDefault();const{showDate:e}=this.state;this.setState({showDate:!e})},this.likeStory=async function(t){const s=parseInt(t.target.closest("button").dataset.id,10),{storyStore:o}=e.props.stores;await o.likeStory({id:s})},this.toggleAddComment=t=>{const e=t.target.closest("button").dataset.id,{showAddComment:s}=this.state;s[e]?delete s[e]:s[e]=!0,this.setState({showAddComment:s},()=>{this.inputRef[e]&&this.inputRef[e].focus()})},this.state=function(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?o(Object(s),!0).forEach((function(e){a(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):o(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}({},O),this.inputRef={}}async loadStoriesPublicFeed(t=this.props){const{storyStore:e}=t.stores;await e.loadPublicFeed()}componentDidMount(){this.loadStoriesPublicFeed()}render(){const{showAddComment:e,showDate:s}=this.state,{userStore:o,storyStore:a,appState:c}=this.props.stores,{user:l}=o,{publicFeed:h}=a,{language:O="no"}=l,{darkmode:g}=c;return Object(r.h)("div",{class:"w-100"},h&&h.map(o=>{const c=a.findPublicTeam(o.team)||{};let h;c.image&&c.image.s3SmallLink?h=c.image:c.images&&c.images[0]&&c.images[0].s3SmallLink&&(h=c.images[0]);const{likes:f,comments:j}=o,y=o.likes&&o.likes.findIndex(t=>t.user===l.id)>-1,v=c&&c.followers?c.followers.length:0,k=c.members&&c.members.indexOf(l.id)>-1,w=c&&c.followers&&c.followers.indexOf(l.id)>-1,x=c.followRequests&&c.followRequests.findIndex(t=>t.id===l.id)>-1;return Object(r.h)(t,null,Object(r.h)("div",{class:"row pb-4 bg-light"},Object(r.h)("div",{class:`col-12 col-sm-8 col-lg-6 offset-sm-2 offset-lg-3 mb-0 position-relative rounded rounded-lg py-3 bg-${g?"black":"white"} shadow-sm`},Object(r.h)("div",{class:"d-flex"},Object(r.h)("div",{class:"text-center border rounded-circle imageRounded",style:h?`background-image: url("${h.s3SmallLink}");`:""},!h&&Object(r.h)("i",{class:"fas fa-users text-muted mt-3",style:"font-size: 40px;"})),Object(r.h)("div",{class:"flex-grow-1 pl-3",style:"line-height: 1.2em;"},Object(r.h)("h5",{class:"mb-1",style:"line-height: 1.0em;"},c.name),Object(r.h)("div",{class:"mb-2"},o.date&&Object(r.h)("small",{class:"text-muted",onClick:this.toggleDate},s?n.a.formatDate(o.date,{locale:"no-NB",hour12:!1,hour:"2-digit",minute:"2-digit"}):n.a.formatDistance(o.date,new Date,{locale:"no-NB"})),1===o.public?Object(r.h)(t,null,Object(r.h)("small",{class:"ml-2 text-muted"},Object(r.h)("i",{class:"fas fa-globe-europe"}))):Object(r.h)(t,null,Object(r.h)("small",{class:"ml-2 text-muted"},Object(r.h)("i",{class:"fas fa-users"})," (",n.a.format(v),")"))),Object(r.h)(m.a,{markdown:p.a.replaceImages(o.body,o.images,O),markdownOpts:p.a.getMarkdownOptions()}))),Object(r.h)("div",{class:"row"},Object(r.h)("div",{class:"mx-0 px-0 clearfix row"},o.images&&o.images.map((e,s)=>Object(r.h)(t,null,Object(r.h)("div",{class:"px-0 "+(0===s?"col-12":"col")},Object(r.h)("img",{class:"img-fluid "+(s>0?"border border-2":""),style:"min-width: 100px;",src:e.s3LargeLink})))))),Object(r.h)("div",{class:"mt-2"},f&&f.length>0&&Object(r.h)("small",{class:"bg-light shadow-sm rounded-lg py-0 px-1",style:"bottom: 20px; right: 15px;"},Object(r.h)("i",{class:"fas fa-thumbs-up text-primary"})," ",f.length),j&&j.length>0&&Object(r.h)("small",{class:"float-right bg-light shadow-sm rounded-lg py-0 px-1",style:"bottom: 20px; right: 15px;"},Object(r.h)("i",{class:"fas fa-comment text-primary"})," ",j.length)),!k&&!w&&!x&&Object(r.h)("div",{class:"clearfix mb-2"},Object(r.h)(u.a,{stores:this.props.stores,team:c,buttonOnly:!0})),Object(r.h)("div",null,Object(r.h)("div",{class:"row"},Object(r.h)("div",{class:"col-6 text-center"},Object(r.h)("button",{type:"button",class:`btn btn-sm btn-outline-${y?"primary":"secondary"} btn-lg btn-block ${y?"text-primary":""}`,"data-id":o.id,onClick:this.likeStory},Object(r.h)("i",{class:(y?"text-primary fas":"far")+" fa-thumbs-up"})," ",Object(r.h)(i.c,{id:"comments.like"},"Lik"))),Object(r.h)("div",{class:"col-6 text-center"},Object(r.h)("button",{type:"button",class:"btn btn-sm btn-outline-secondary btn-lg btn-block","data-id":o.id,onClick:this.toggleAddComment},Object(r.h)("i",{class:"fas fa-comment"})," ",Object(r.h)(i.c,{id:"comments.comment-add"},"Kommentar"))))),Object(r.h)("div",{class:"mt-2"},e[o.id]&&Object(r.h)(d.a,{stores:this.props.stores,story:o,inputRef:t=>this.inputRef[o.id]=t,inputRefObject:this.inputRef,col:"10",offset:"2"}),Object(r.h)(b.a,{stores:this.props.stores,story:o,col:"10",offset:"2",compact:!1})))))}))}})||c;e.a=g}).call(this,s("hosL").Fragment)},"qv+O":function(t,e,s){"use strict";(function(t){function o(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,o)}return s}function a(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}function c(t="",e,s="no"){if(l.a.isString(t)){let o=t;const a=new RegExp(`<${s}>(.*?)</${s}>`,"s").exec(o);if(a){const t=a[0];t&&(o=t)}return o.replace(/\{\{img\.(\d+)\s*(\d*)\}\}/g,(function(t,s,o){return l.a.isObject(e[s])?`<img src=${e[s].s3XXLargeLink} class='img-fluid float-right' style='width: ${o||40}%;' />`:""}))}return t}var r,n=s("hosL"),l=s("Utv1"),i=s("/eY4"),h=s("OhSV"),m=s("fh8t"),b=s.n(m);s("ZOvn");const d={pedantic:!1,gfm:!0,breaks:!0,sanitize:!1,smartLists:!0,smartypants:!0,xhtml:!0},u={isLoading:!1};let p=Object(i.a)(r=class extends n.Component{constructor(t){super(t),this.state=function(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?o(Object(s),!0).forEach((function(e){a(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):o(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}({},u)}async loadRace(t=this.props){this.setState({isLoading:!0});const{raceStore:e}=t.stores;await e.load({query:{}}),this.setState({isLoading:!1})}componentDidMount(){this.loadRace()}componentWillReceiveProps(t){this.loadRace(t)}render(){const{appState:e,userStore:s,raceStore:o,newsStore:a}=this.props.stores,{isAdmin:r,notifications:i=[]}=s,{races:m}=o,{newsList:u}=a,{language:p="no"}=e;return Object(n.h)("div",{class:"row"},Object(n.h)("div",{class:"col-12"},Object(n.h)("h5",null,Object(n.h)(h.c,{id:"races.homerun"},"Homerun races"))),(m||0===m.length)&&Object(n.h)("div",{class:"col-12 text-center py-5"},Object(n.h)("h5",null,"No upcoming races!"),"Take a look at the previous races:",Object(n.h)("br",null),Object(n.h)("a",{href:"https://homerunrace.no/"},"homerunrace.no")),m&&m.sort((t,e)=>t.startDate-e.startDate).reverse().map(e=>{const s=new Date;let o="";if(s>=new Date(e.startDate)&&s<=new Date(e.endDate))o="race";else if(s>=new Date(e.signupStartDate)&&s<=new Date(e.signupEndDate))o="signup";else if(s>new Date(e.endDate))return Object(n.h)(t,null);return Object(n.h)(t,null,Object(n.h)("div",{class:"col-12 col-sm-12 col-md-6 col-lg-6 mb-3"},Object(n.h)("div",{class:"card position-relative"},Object(n.h)("h5",{class:"position-absolute",style:"top: 10px; right: 10px;"},"signup"===o&&Object(n.h)(t,null,Object(n.h)("div",{class:"spinner-grow text-primary",role:"status"})),"race"===o&&Object(n.h)(t,null,Object(n.h)("div",{class:"spinner-grow text-danger",role:"status"})),"done"===o&&Object(n.h)(t,null,Object(n.h)("span",null,Object(n.h)("i",{class:"fas fa-check text-success"})))),Object(n.h)("h5",{class:"card-header"},r&&Object(n.h)("i",{class:`fas fa-eye${e.active?" text-success":"-slash text-danger"} float-right`}),e.title),Object(n.h)("div",{class:"list-thumb d-flex align-items-center position-relative"},Object(n.h)("h5",{class:"position-absolute",style:"top: 3px; right: 5px;"},"signup"===o&&Object(n.h)(t,null,Object(n.h)("span",{class:"badge badge-primary border border-white ml-2"},Object(n.h)(h.c,{id:"races.signup-open"},"P친melding 친pen"))),"race"===o&&Object(n.h)(t,null,Object(n.h)("span",{class:"badge badge-danger border border-white ml-2"},Object(n.h)(h.c,{id:"races.race-in-progress"},"L칮p p친g친r"))),"done"===o&&Object(n.h)(t,null,Object(n.h)("span",{class:"badge badge-success border border-white ml-2"},Object(n.h)(h.c,{id:"races.race-finished"},"L칮p avsluttet")))),e.images&&e.images[0]?Object(n.h)("img",{src:e.images[0].s3MediumLink,class:"card-img-top"}):""),Object(n.h)("div",{class:"card-body"},Object(n.h)("p",{class:"card-text"},Object(n.h)(b.a,{markdown:c(e.ingress,e.images,p),markdownOpts:d})),e.classes&&Object(n.h)(t,null,Object(n.h)("div",{class:"mb-3"},Object(n.h)("small",{class:"font-weight-lighter mr-2"},Object(n.h)(h.c,{id:"races.classes"},"Klasser"),": "),Object(n.h)("br",null),e.classes.sort((t,e)=>t.distance-e.distance).map(e=>Object(n.h)(t,null,Object(n.h)("span",{class:"badge badge-pill badge-light mr-2 font-weight-light"},e.title))))),Object(n.h)("a",{href:"/app-races/"+e.id,class:"btn btn-primary stretched-link"},Object(n.h)(h.c,{id:"races.read-more"},"Les mer"))),Object(n.h)("div",{class:"card-footer"},Object(n.h)("small",{class:"text-muted"},Object(n.h)(h.c,{id:"races.race-days"},"L칮psdager"),": ",e.startDate&&Object(n.h)(t,null,l.a.formatDate(e.startDate,{locale:p})),e.endDate&&Object(n.h)(t,null," - ",l.a.formatDate(e.endDate,{locale:p})))))))}))}})||r;e.a=p}).call(this,s("hosL").Fragment)},sgpT:function(t,e,s){"use strict";function o(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,o)}return s}function a(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}var c,r=s("hosL"),n=(s("ox/y"),s("Utv1"),s("/eY4")),l=(s("go65"),s("Y3FI"),s("OhSV"));const i={menu:{profile:!1,main:!1},searchText:""};let h=Object(n.a)(c=class extends r.Component{constructor(t){super(t),this.state=function(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?o(Object(s),!0).forEach((function(e){a(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):o(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}({},i)}render(){const{userStore:t}=this.props.stores,{notifications:e=[]}=t,s=e.filter(t=>!t.read).length||0;return s<3?"":Object(r.h)("div",{class:"col-12 col-sm-8 col-lg-6 offset-sm-2 offset-lg-3 mt-4 mb-4 clearfix px-0"},Object(r.h)("div",{class:"alert alert-danger",role:"alert"},Object(r.h)("a",{href:"/users/notifications",class:"text-dark"},Object(r.h)("i",{class:"fas fa-bell mr-2 text-dark"}),Object(r.h)("span",{class:"badge badge-pill badge-danger"},s)," ",Object(r.h)(l.c,{id:"notifications.unread"},"Uleste varslinger. Klikk her for 친 se alle..."))))}})||c;e.a=h}}]);
//# sourceMappingURL=route-home.chunk.9e362.esm.js.map