{"version":3,"sources":["webpack:///./components/imageSlider/index.js","webpack:///./components/workout/summary.js","webpack:///./components/workout/index.js","webpack:///./components/modal/index.js","webpack:///./components/dog/scroller.js","webpack:///./components/dog/calendar.js","webpack:///./components/dog/history.js","webpack:///./routes/dogs/feed.js"],"names":["observer","Component","constructor","props","super","touchStart","e","stopPropagation","this","setState","startX","touches","pageX","touchEnd","undefined","sliding","touchMove","totalImages","state","scrollDistance","x","prevImage","nextImage","images","imageContainer","currentImage1","currentImage2","currentIdx","length","imageDots","Array","fill","map","y","nextImageContainer","nextIdx","componentWillReceiveProps","nextProps","nextImages","render","img","curImage","htmlImageRatio","height","width","imgHeight","imgWidth","dimensions","orientation","imageRatio","class","style","onTouchstart","onTouchend","onTouchmove","loading","src","s3LargeLink","ref","c","image1","image2","i","summary","week","year","count","util","format","distanceKm","elevation","secToHms","duration","speedAvg","getWorkoutColor","workout","type","getWorkoutIcon","MAX_LOADINDEX","mu","getMaxLoadIndex","initialState","showAddComment","viewImageIdx","likeWorkout","Workout","toggleDate","preventDefault","showDate","async","workoutStore","stores","workoutId","id","setTimeout","toggleAddComment","target","parentElement","dataset","inputRef","focus","viewImage","idx","closest","shareLink","url","title","text","appState","shareUrl","onTeamClick","teamid","showTeam","hideTeam","onUserClick","onDogClick","dogid","dogs","showDog","hideDog","updateTimer","forceShowDate","wrapperClasses","wrapperClassesRow","userStore","viewmode","hasShareApi","user","allDogs","language","intensity","findIntensity","code","team","findTeam","teamName","name","teamNames","push","teams","forEach","likes","comments","hasLikedWorkout","findIndex","gpxInfo","mushers","loadIndex","workoutEquipment","findEquipment","equipment","workoutEquipmentIcon","field","musherImages","slice","musher","u","findPublicUser","publicUser","image","s3SmallLink","mapImage","imgs","toJS","batteryUsage","battegryLevelStart","battegryLevelEnd","views","getViews","statistics","marginTop","marginBottom","back","temperature","value","isLocked","isInProgress","role","href","date","onClick","formatDate","locale","hour12","hour","minute","formatDistance","Date","getLoadIndexColor","normalizeBetween","Math","floor","getLoadIndexText","garminId","stravaId","track","dogsLeft","dogsRight","sledWeight","indexOf","kcalBurnedTotal","kcalMeatGramsTotal","kcalSalmonGramsTotal","kcalFatGramsTotal","description","markdown","replaceImages","comment","markdownOpts","getMarkdownOptions","avgGpsMovingSpeed","dblClick","likeRef","data-id","data-url","uuidv4","data-title","rel","data-native","inputRefObject","col","offset","compact","object","isTeamAdmin","isAdmin","Modal","startY","pageY","readyToRefresh","close","refreshing","appContainer","scrollTop","imagexxl","thumb","download","DogScroller","scrollImages","scrollLeft","clientWidth","imageIdx","nearestInt","round","diff","abs","Number","isInteger","sortByName","a","b","dogA","find","dogB","size","onScroll","sort","dogId","dog","filter","d","className","showName","showPosition","RED_DAYS","HistoryCalendar","setHistoryType","callback","historyType","prevHistoryType","historytype","chooseDay","yyyy","month","mm","day","dd","setDay","parseInt","isLoading","currentTeam","currentMonth","getMonth","getYear","getFeed","componentDidMount","loadHistorySummary","chosenDD","chosenMM","chosenYYYY","filterHistories","HISTORY_TYPE_MAP","getHistoryMap","DAYS","getDays","MONTHS","getMonths","currentDay","getDate","currentYear","getFullYear","basehref","monthNum","yearNum","nextMonth","nextYear","getNextMonth","prevMonth","prevYear","getPrevMonth","daysOfMonth","getDaysInMonth","weeksInMonth","getWeeksInMonth","daysOfWeek","getDaysInWeek","isoDate","getDay","weekObj","histories","findHistory","endHistories","findEndHistory","isChosen","isToday","isDayOff","data-day","data-month","data-year","history","bgColor","getHistoryTypeColor","getHistoryPri","key","data-historytype","VACCINE_TYPES","getVaccineTypes","DogHistoryLine","showModal","displayModal","currentImage","currentImageXXL","closeModal","eventFired","diffY","diffX","deleteVerify","reset","deleted","deleteHistoryRequest","deleteHistory","dogStore","line","save","$pull","_id","swipeLeft","hasImage","isBeeingEdited","hoverElement","hoverelementonly","grouped","dogImage","dogShortname","dogName","el","ucfirst","endDate","vaccineType","weight","bodyScore","email","cost","MARGIN_TOP","MARGIN_BOTTOM","SUB_MENU_MARGIN_TOP","subMenuMarginTop","Home","resetDay","loadAll","loadFeed","scrolledDown","darkmode","historyFeed","padDate","isOk"],"mappings":"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","file":"26.chunk.fa534.esm.js","sourcesContent":["import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\n\n@observer\nclass ImageSlider extends Component {\n    constructor(props) {\n        super(props);\n        const { images = [] } = props;\n        this.state = {\n            imageContainer: 1,\n            currentImage1: images[0] || {},\n            currentImage2: {},\n            currentIdx: 0,\n            totalImages: images.length || 0,\n            imageDots: [...Array(images.length || 0).fill(1).map((x, y) => x + y)],\n        };\n    }\n\n    nextImage() {\n        // console.log('next');\n        const { images } = this.props;\n        const { totalImages, currentIdx, imageContainer } = this.state;\n        const nextImageContainer = imageContainer === 1 ? 2 : 1;\n        let nextIdx = currentIdx + 1;\n        if (nextIdx > totalImages -1) {\n            nextIdx = 0;\n        }\n        this.setState({\n            [`currentImage${nextImageContainer}`]: images[nextIdx],\n            currentIdx: nextIdx,\n            imageContainer: nextImageContainer,\n        });\n    }\n\n    prevImage() {\n        // console.log('prev');\n        const { images } = this.props;\n        const { totalImages, currentIdx, imageContainer } = this.state;\n        const nextImageContainer = imageContainer === 1 ? 2 : 1;\n        let nextIdx = currentIdx - 1;\n        if (nextIdx < 0) {\n            nextIdx = totalImages - 1;\n        }\n        this.setState({\n            [`currentImage${nextImageContainer}`]: images[nextIdx],\n            currentIdx: nextIdx,\n            imageContainer: imageContainer === 1 ? 2 : 1,\n        });\n    }\n\n    touchStart = (e) => {\n        e.stopPropagation();\n        this.setState({\n            startX: e.touches[0].pageX,\n        })\n    }\n\n    touchEnd = (e) => {\n        e.stopPropagation();\n        this.setState({\n            startX: undefined,\n            sliding: false,\n        })\n    }\n\n    touchMove = (e) => {\n        e.stopPropagation();\n        // e.preventDefault();\n        const { totalImages } = this.state;\n        if (totalImages > 1) {\n            const { startX, sliding } = this.state;\n            const scrollDistance = 50;\n            const x = e.touches[0].pageX;\n            if (!sliding) {\n                if (x > startX + scrollDistance) {\n                    this.setState({ sliding: true })\n                    this.prevImage();\n                } else if (x < startX - scrollDistance) {\n                    this.setState({ sliding: true })\n                    this.nextImage();\n                }\n            }\n        }\n    }\n\n    componentWillReceiveProps(nextProps) {\n        // console.log('componentWillReceiveProps', nextProps);\n        if (nextProps.images !== this.props.images) {\n            const { images: nextImages = [] } = nextProps;\n            this.setState({\n                imageContainer: 1,\n                currentImage1: nextImages.length > 0 ? nextImages[0] : {},\n                currentImage2: {},\n                currentIdx: 0,\n                totalImages: nextImages.length || 0,\n                imageDots: [...Array(nextImages.length || 0).fill(1).map((x, y) => x + y)],\n            });\n        }\n    }\n\n    render() {\n        const { currentImage1, currentImage2, imageContainer, totalImages, imageDots, currentIdx } = this.state;\n        const img = this[`image${imageContainer}`];\n        const curImage = imageContainer === 1 ? currentImage1 : currentImage2;\n        const htmlImageRatio = img && img.height ? img.width / img.height : 4 / 3;\n        let imgHeight;\n        let imgWidth;\n        if (curImage.dimensions) {\n            const { width, height, orientation } = curImage.dimensions;\n            if (orientation > 4 && orientation < 9) {\n                imgHeight = width;\n                imgWidth = height;\n            } else {\n                imgHeight = height;\n                imgWidth = width;\n            }\n        }\n        const imageRatio = curImage.dimensions ? imgWidth / imgHeight : htmlImageRatio;\n        if (totalImages <= 0) {\n            return '';\n        }\n\n        return (\n            <div class='w-100'>\n                <div class='border rounded position-relative w-100'\n                    style={`height: calc(85vw / ${imageRatio}); overflow: hidden; transition: all .3s ease-in-out;`}\n                    onTouchstart={this.touchStart}\n                    onTouchend={this.touchEnd}\n                    onTouchmove={this.touchMove}\n                >\n                    {totalImages > 1 && <span class='position-absolute' style='top:0px; right: 5px; z-index: 2000;'><small>{currentIdx + 1}/{totalImages}</small></span>}\n                    {currentImage1 && <div class='position-absolute' style={`${imageContainer === 1 ? 'opacity: 1;' :  'opacity: 0;'} transition: all .3s ease-in-out; top: 0; left: 0;`}>\n                        <img loading='lazy' src={currentImage1.s3LargeLink}\n                            class='img-fluid align-middle'\n                            ref={c => this.image1 = c}\n                        />\n                    </div>}\n                    {currentImage2 && <div class='position-absolute' style={`${imageContainer === 2 ? 'opacity: 1;' :  'opacity: 0;'} transition: all .3s ease-in-out; top: 0; left: 0;`}>\n                        <img loading='lazy' src={currentImage2.s3LargeLink}\n                            class='img-fluid align-middle'\n                            ref={c => this.image2 = c}\n                        />\n                    </div>}\n                </div>\n                {imageDots.length > 1 && <div class='w-100 text-center'>{imageDots.map(i => <span style={`color: ${i === currentIdx + 1 ? '#ffffff' : '#808080'};`}>&bull;</span>)}</div>}\n            </div>\n        );\n    }\n}\n\nexport default ImageSlider;\n","import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport { Text, Localizer, withText } from 'preact-i18n';\n\n@observer\nclass WorkoutSummary extends Component {\n    render() {\n        const { summary = {} } = this.props;\n\n        return (\n            <div class='w-100 mb-3'>\n                <div class='row'>\n                    <div class='col-12 col-sm-8 col-lg-6 offset-sm-2 offset-lg-3 d-flex mb-0 position-relative'>\n                        {/* {JSON.stringify(workout, null, 4)} */}\n                        <div class={`text-center border rounded-circle imageRounded`}>\n                            <div class={`text-muted mt-2`} style='font-size: 40px; line-height: 1;'>{summary.week}</div>\n                            <div class={`text-muted`} style='font-size: 10px; line-height: 0.8em;'>{summary.year}</div>\n                        </div>\n                        <div class='flex-grow-1 pl-3'>\n                            <h5 class='my-0'>{summary.week} - {summary.year}</h5>\n                            <small class='text-muted'>\n                                <i class='fas fa-wave-square' /> {summary.count}\n                                <i class='fas fa-road ml-2' /> {util.format(summary.distanceKm, 0)}km\n                                <i class='fas fa-mountain ml-2' /> {util.format(summary.elevation, 0)}m\n                                <i class='fas fa-stopwatch ml-2' /> {util.secToHms(summary.duration)}\n                                <i class='fas fa-tachometer-alt ml-2' /> {util.format(summary.speedAvg, 1)}km/t\n                            </small>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        );\n    }\n}\n\nexport default WorkoutSummary;\n","import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport { toJS } from 'mobx';\nimport { Text, Localizer, withText } from 'preact-i18n';\nimport Markdown from 'preact-markdown';\n\nimport Modal from '../modal';\nimport WorkoutComments from '../../components/workout/comments';\nimport WorkoutAddComment from '../../components/workout/commentAdd';\nimport ImageScroller from '../../components/imageScroller';\nimport DogScroller from '../../components/dog/scroller';\n\nimport Overlay from '../../components/overlay/';\nimport TeamsPublicDetail from '../../routes/teams/publicDetail';\nimport DogPublicDetail from '../../routes/dogs/publicDetail';\n\nimport LikesAndComments from '../../components/feedback/likesAndComments';\nimport Views from '../../components/feedback/views';\n\nimport Speed from '../../components/data/speed';\nimport Elevation from '../../components/data/elevation';\nimport Weight from '../../components/data/weight';\nimport Distance from '../../components/data/distance';\nimport Temperature from '../../components/data/temperature';\n\nimport mu from '../../lib/musher-util';\n\nconst MAX_LOADINDEX = mu.getMaxLoadIndex();\n\nfunction getWorkoutColor(workout) {\n\tswitch (workout.type) {\n\t\tcase 1:\n\t\t\treturn 'border-primary';\n\t\tcase 2:\n\t\t\treturn 'border-danger';\n\t\tcase 3:\n\t\t\treturn 'border-success';\n\t\tcase 4:\n\t\t\treturn 'border-info';\n\t\tdefault:\n\t\t\treturn 'border-warning';\n\t}\n}\n\nfunction getWorkoutIcon(workout) {\n\tswitch (workout.type) {\n\t\tcase 1:\n\t\t\treturn 'fas fa-running';\n\t\tcase 2:\n\t\t\treturn 'fas fa-flag-checkered';\n\t\tcase 3:\n\t\t\treturn 'fas fa-hiking';\n\t\tcase 4:\n\t\t\treturn 'fas fa-futbol';\n\t\tdefault:\n\t\t\treturn 'fas fa-hiking';\n\t}\n}\n\nfunction displayDistance(distanceKm) {\n\tif (distanceKm < 5) {\n\t\treturn util.format(distanceKm, 2);\n\t}\n\tif (distanceKm < 10) {\n\t\treturn util.format(distanceKm, 1);\n\t}\n\treturn util.format(distanceKm, 1);\n}\n\nconst initialState = {\n\tshowAddComment: false,\n    viewImageIdx: {},\n    likeWorkout: {},\n};\n\n@observer\nclass Workout extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            ...initialState,\n        };\n        this.updateTimer = {};\n\t\tthis.inputRef = {};\n    }\n\n    toggleDate = (e) => {\n        e.stopPropagation();\n        e.preventDefault();\n        const { showDate } = this.state;\n        this.setState({ showDate: !showDate });\n    }\n\n\n\tlikeWorkout = async () => {\n\t\tconst { workoutStore } = this.props.stores;\n        const { workout } = this.props;\n        const workoutId = workout.id;\n\n        const { likeWorkout } = this.state;\n        likeWorkout[workoutId] = true;\n        this.setState({ likeWorkout });\n        setTimeout(() => {\n            const { likeWorkout } = this.state;\n            delete likeWorkout[workoutId];\n            this.setState({ likeWorkout });\n        }, 1200);\n\n\t\tconst response = await workoutStore.likeWorkout({ id: workoutId });\n        if (response && response.status === 200) {\n\n\t\t}\n\t}\n\n\ttoggleAddComment = (e) => {\n\t\tconst workoutId = e.target.parentElement.dataset.id || e.target.dataset.id;\n\t\tconst { showAddComment } = this.state;\n\t\tthis.setState({\n\t\t\tshowAddComment: !showAddComment,\n\t\t}, () => {\n\t\t\tif (this.inputRef[workoutId]) {\n\t\t\t\tthis.inputRef[workoutId].focus();\n\t\t\t}\n\t\t});\n\t}\n\n    viewImage = (e) => {\n\t\tconst { id, idx } = e.target.closest('img').dataset;\n        const { viewImageIdx } = this.state;\n        viewImageIdx[id] = idx;\n        this.setState({ viewImageIdx });\n    }\n\n    shareLink = (e) => {\n        const { url, title, text } = e.target.closest('button').dataset;\n        const { appState } = this.props.stores;\n        appState.shareUrl({ url, title, text });\n    }\n\n        // Overlay functions\n    onTeamClick = (e, teamid) => {\n        e.preventDefault();\n        e.stopPropagation();\n        this.setState({\n            showTeam: teamid,\n        });\n        return false;\n    }\n\n    hideTeam = () => {\n        this.setState({\n            showTeam: null,\n        });\n    }\n\n    onUserClick = (e, userid) => {\n        e.preventDefault();\n        e.stopPropagation();\n        return false;\n    }\n\n    onDogClick = (e, dogid, dogs) => {\n        e.preventDefault();\n        e.stopPropagation();\n        this.setState({\n            showDog: dogid,\n            dogs,\n        });\n        return false;\n    }\n\n    hideDog = () => {\n        this.setState({\n            showDog: null,\n        });\n    }\n\n    render() {\n        const {\n            showDate,\n            showAddComment,\n            viewImageIdx = {},\n            likeWorkout,\n            dogs,\n            showTeam,\n            showDog,\n        } = this.state;\n        const {\n            workout,\n            showDate: forceShowDate,\n            wrapperClasses = 'col-12 col-sm-8 col-lg-6 offset-sm-2 offset-lg-3',\n            wrapperClassesRow = 'row',\n        } = this.props;\n\t\tconst { userStore, appState, workoutStore } = this.props.stores;\n        const { viewmode, hasShareApi } = appState;\n        const { user, dogs: allDogs } = userStore;\n        const { language = 'en' } = user;\n        const intensity = userStore.findIntensity({ code: workout.intensity, language }) || {};\n        // const teamName = userStore.findTeam(workout.team);\n        const team = userStore.findTeam(workout.team, true) || {};\n        const teamName = team.name;\n        // const teamNames = workout.teams ? workout.teams.map(e => userStore.findTeam(e)) : [];\n        const teamNames = [];\n        if (teamName) {\n            teamNames.push(teamName);\n        }\n        if (workout.teams) {\n            workout.teams.forEach((e) => {\n                if (userStore.findTeam(e)) {\n                    teamNames.push(userStore.findTeam(e));\n                }\n            });\n        }\n\n        const { likes = [], comments = [] } = workout;\n\t\tconst hasLikedWorkout = workout.likes && workout.likes.findIndex(e => e.user === user.id) > -1;\n        const { gpxInfo = {}, mushers = [] } = workout;\n\t\tconst { loadIndex = 0 } = gpxInfo;\n        const workoutEquipment = userStore.findEquipment({ equipment: workout.equipment, language });\n        const workoutEquipmentIcon = userStore.findEquipment({ equipment: workout.equipment, field: 'icon' });\n\n        const musherImages = [];\n        if (mushers.length > 1) {\n            mushers.slice(1, 10).map((musher) => {\n                const u = workoutStore.findPublicUser(musher) || {};\n                if (u.images && u.images[0]) {\n                    musherImages.push(u.images[0]);\n                }\n            });\n        }\n\n        const publicUser = workoutStore.findPublicUser(mushers[0]) || {};\n        let image;\n        if (publicUser && publicUser.images && publicUser.images[0]) {\n            image = publicUser.images[0];\n        } else if (team.image && team.image.s3SmallLink) {\n            image = team.image;\n        } else if (team.images && team.images[0] && team.images[0].s3SmallLink) {\n            image = team.images[0];\n        } else if (workout.image && workout.image.s3SmallLink) {\n            image = workout.image;\n        }\n\n        const images = [];\n        if (workout.mapImage) {\n            images.push({\n                ...workout.mapImage,\n                type: 'map',\n            });\n        }\n        if (workout.images) {\n            const imgs = toJS(workout.images);\n            images.push(...imgs);\n        }\n        const imageIdx = viewImageIdx[workout.id] ? viewImageIdx[workout.id] : 0;\n        const currentImage = images && images[imageIdx] ? images[imageIdx] : null;\n\n        let batteryUsage;\n        if (workout && workout.gpxInfo && workout.gpxInfo.battegryLevelStart) {\n            batteryUsage = (workout.gpxInfo.battegryLevelStart - workout.gpxInfo.battegryLevelEnd) * 100;\n        }\n\n        const views = mu.getViews(workout.statistics);\n\n        // let temperature;\n        // let windSpeed;\n        // if (util.checkNested(workout, 'temperature')) {\n        //     const yr = toJS(workout.yr[0].instant.details);\n        //     // displayValue = `Yr.no: 🌡️ ${yr.air_temperature}°C, 💨 ${yr.wind_speed}m/s 🧭 ${mu.windDirection(yr.wind_from_direction)}, ☁️ ${yr.cloud_area_fraction}%, ${yr.air_pressure_at_sea_level}mb, 💦 ${yr.relative_humidity}%`;\n        //     temperature = `${yr.air_temperature}°C`;\n        //     windSpeed = `${yr.wind_speed}m/s`;\n        // }\n\t\t// // const loadMultiplier = loadIndex / 100;\n\n        return (<>\n\n            {showTeam && <Overlay>\n                <TeamsPublicDetail stores={this.props.stores} teamid={showTeam} marginTop={'0px;'} marginBottom={'0px;'} back={this.hideTeam} hideTeam={this.hideTeam} />\n            </Overlay>}\n\n            {showDog && <Overlay>\n                <DogPublicDetail stores={this.props.stores} dogid={showDog} marginTop={'0px;'} marginBottom={'0px;'} back={this.hideDog} dogs={dogs} />\n            </Overlay>}\n\n            <div class='w-100 mb-2'>\n                <div class={wrapperClassesRow}>\n\n                    <div class={`${wrapperClasses} d-flex mb-0 position-relative`}>\n\n                        {/* {workout.gpxInfo && <svg viewBox='0 0 300 300' style='top: 80px; left: 10px; width: 90px; height: 90px;' class='position-absolute'>\n                            <path d={`${workout.gpxInfo.svgMap}`} style='fill: none; stroke: #0063FF; stroke-width: 5; opacity: 0.3;' />\n                        </svg>} */}\n\n                        {/* {JSON.stringify(workout, null, 4)} */}\n                        <div class='text-center'>\n                            <div\n                                class={`position-relative text-center border rounded-circle imageRounded ${getWorkoutColor(workout)}`}\n                                style={`${image ? `background-image: url(\"${image.s3SmallLink}\"); background-size: cover;` : ''} border-width: 3px !important;`}\n                            >\n                                {!image && <i class={`${getWorkoutIcon(workout)} text-${intensity.class ? intensity.class : 'muted'} mt-3`} style='font-size: 40px;' />}\n\n                                {musherImages && musherImages.map((img, idx) => <>\n                                    <div\n                                        class='position-absolute rounded-circle imageRounded border imageRoundedThumb border-white'\n                                        style={`\n                                            background-image: url(\"${img.s3SmallLink}\");\n                                            background-size: cover;\n                                            bottom: -3px;\n                                            left: ${-5 + (idx * 10)}px;\n                                        `}\n                                    />\n                                </>)}\n                            </div>\n                            {workout.temperature !== 0 && <>\n                                <span class='text-muted font-weight-light'>\n                                    <Temperature stores={this.props.stores} value={workout.temperature} />\n                                </span>\n                            </>}\n                        </div>\n                        <div class='flex-grow-1 pl-3' style='line-height: 1.2em;'>\n                            <span class='float-right'>\n                                {workout.isLocked === 1 && <i class='fas fa-lock text-danger ml-3' />}\n                                {workout.isInProgress === 1 && <div class='spinner-grow text-success ml-3' role='status' />}\n                                {workout.isInProgress === 2 && <i class='fas fa-pause-circle text-warning ml-3' />}\n                            </span>\n                            <a class='stretched-link' href={`/workouts/${workout.id}`}>\n                                <h5 class='my-0 mb-1' style='line-height: 1.0em;'>\n                                    {workout.name}\n                                </h5>\n                            </a>\n                            {teamNames && teamNames.length > 0 && <small class='font-weight-lighter'>\n                                {teamNames.map((name, idx) => <>{idx > 0 ? ', ' : ''}{name}</>)}\n                            </small>}\n                            <br />\n                            <small class='text-muted'>\n                                {workout.date && <small onClick={this.toggleDate}>\n                                    {forceShowDate || showDate ? util.formatDate(workout.date, { locale: 'no-NB', hour12: false, hour: '2-digit', minute: '2-digit' }) : util.formatDistance(workout.date, new Date(), { locale: 'no-NB' })}\n                                </small>}\n                                <span class={`badge badge-${intensity.class} ml-2`}>{intensity.name}</span>\n                                {loadIndex > 0 && <span class={`ml-2 text-${mu.getLoadIndexColor(util.normalizeBetween(loadIndex, 0, MAX_LOADINDEX, 0, 100))}`}>\n                                    <i class='fas fa-hand-rock mr-1' />\n                                    {Math.floor(util.normalizeBetween(loadIndex, 0, MAX_LOADINDEX, 0, 100))} -&nbsp;\n                                    {mu.getLoadIndexText(util.normalizeBetween(loadIndex, 0, MAX_LOADINDEX, 0, 100))}\n                                </span>}\n                                <br />\n                            </small>\n                            <small>\n                                <div class='text-muted'>\n                                    {workout.garminId > 0 && <div class={`float-left mr-2 text-center border rounded-circle imageRounded imageRoundedIcon`} style={`background-image: url(\"./assets/garmin-connect.png\");`} />}\n                                    {workout.stravaId > 0&& <div class={`float-left mr-2 text-center border rounded-circle imageRounded imageRoundedIcon`} style={`background-image: url(\"./assets/strava-icon.png\");`} />}\n\n                                    {workout.equipment > 0 && <><i class={`${workoutEquipmentIcon} ml-2`} /> {workoutEquipment}</>}\n                                    {/* {workout.distanceKm > 0 && <><i class='fas fa-road ml-2' /> {displayDistance(workout.distanceKm)}km</>}\n                                    {workout.elevation > 0 && <><i class='fas fa-mountain ml-2' /> {util.format(workout.elevation, 0)}m</>} */}\n                                    {/* {workout.speedAvg > 0 && <><i class='fas fa-tachometer-alt ml-2' /> {util.format(workout.speedAvg, 1)}km/t</>} */}\n                                    {workout.dogs > 0 && <><i class='fas fa-dog ml-2' /> {workout.dogs.length}</>}\n                                    {workout.track > 0 && <><i class={`fas fa-map-marked text-${workout.track > 0 ? 'success' : 'danger'} ml-2`} /></>}\n                                    {workout.dogsLeft > 0 && <><i class={`fas fa-crosshairs text-${workout.dogsLeft && workout.dogsRight ? 'success' : 'danger'} ml-2`} /></>}\n                                    {workout.sledWeight > 0 && <>\n                                        <i class='fas fa-sleigh ml-2' /> <Weight stores={this.props.stores} value={workout.sledWeight} />\n                                    </>}\n                                    {batteryUsage > 0 && <span class='text-muted ml-2'><i class='fas fa-battery-three-quarters' /> {util.format(batteryUsage, 1)}% <Text id='workout.battery-used'>used</Text></span>}\n                                </div>\n                                {['beta', 'advanced'].indexOf(viewmode) > -1 && (\n                                    <span class='text-muted'>\n                                        <i class='fas fa-balance-scale' /> {util.format(workout.kcalBurnedTotal)} <Text id='workout.kcal'>kcal</Text>\n                                        <i class='fas fa-drumstick-bite ml-2' /> <Weight stores={this.props.stores} value={workout.kcalMeatGramsTotal / 1000} />\n                                        <i class='fas fa-fish ml-2' /> <Weight stores={this.props.stores} value={workout.kcalSalmonGramsTotal / 1000} />\n                                        <i class='fas fa-piggy-bank ml-2' /> <Weight stores={this.props.stores} value={workout.kcalFatGramsTotal / 1000} />\n                                    </span>\n                                )}\n                            </small>\n                        </div>\n                    </div>\n                    <div class={`${wrapperClasses} position-relative mt-2`}>\n                        <strong>\n                            {workout.description}\n                        </strong>\n                    </div>\n                    <div class={`${wrapperClasses} position-relative`}>\n                        <Markdown markdown={mu.replaceImages(workout.comment, workout.images, language)} markdownOpts={mu.getMarkdownOptions()} />\n                    </div>\n                    <div class={`${wrapperClasses} d-flex mb-0 position-relative`}>\n                        <div class='container-fluid px-0'>\n                            <div class='row mt-1'>\n                                {workout.distanceKm > 0 && <div class='col-3'>\n                                    <div class='text-overflow'>\n                                        <small><i class='fas fa-road' /> <Text id='workout.calendar.distance'>Distanse</Text></small>\n                                    </div>\n                                    <div class='text-overflow font-weight-light' style='font-size: 1.2em;'>\n                                        <Distance stores={this.props.stores} value={workout.distanceKm} />\n                                    </div>\n                                </div>}\n                                {workout.elevation > 0 && <div class='col-3'>\n                                    <div class='text-overflow'>\n                                        <small><i class='fas fa-mountain' /> <Text id='workout.calendar.ascend'>Høydemeter</Text></small>\n                                    </div>\n                                    <div class='text-overflow font-weight-light' style='font-size: 1.2em;'>\n                                        <Elevation stores={this.props.stores} value={workout.elevation} />\n                                    </div>\n                                </div>}\n                                {workout.duration > 0 && <div class='col-3'>\n                                    <div class='text-overflow'>\n                                        <small><i class='fas fa-clock' /> <Text id='workout.calendar.duration'>Varighet</Text></small>\n                                    </div>\n                                    <div class='text-overflow font-weight-light' style='font-size: 1.2em;'>\n                                        {util.secToHms(workout.duration, true)}\n                                    </div>\n                                </div>}\n                                {workout.speedAvg > 0 && <div class='col-3'>\n                                    <div class='text-overflow'>\n                                        <small><i class='fas fa-tachometer-alt' /> <Text id='workout.calendar.avg-speed'>Snittfart</Text></small>\n                                    </div>\n                                    <div class='text-overflow font-weight-light' style='font-size: 1.2em;'>\n\t\t\t\t                        {workout.gpxInfo && workout.gpxInfo.avgGpsMovingSpeed > 0 ? <>\n                                            <Speed stores={this.props.stores} value={workout.gpxInfo.avgGpsMovingSpeed * 3.6} />\n                                        </> : <>\n                                            <Speed stores={this.props.stores} value={workout.speedAvg} />\n                                        </>}\n                                    </div>\n                                </div>}\n                            </div>\n                        </div>\n                    </div>\n\n                    {['beta', 'advanced', 'normal'].indexOf(viewmode) > -1 && (\n                        <div class={`${wrapperClasses}`}>\n                            <div class='container-fluid px-0 mt-1'>\n                                <div class='row'>\n                                    <ImageScroller stores={this.props.stores} images={images} id={workout.id} dblClick={this.likeWorkout} likeRef={likeWorkout} />\n                                </div>\n                            </div>\n                        </div>\n                    )}\n\n                    {['beta', 'advanced', 'normal'].indexOf(viewmode) > -1 && <>\n                        {workout.dogs && workout.dogs.length > 0 && <div class='container-fluid px-0 mt-1'>\n                            <div class='row pt-2'>\n                                <DogScroller stores={this.props.stores} dogs={workout.dogs} allDogs={allDogs} onDogClick={this.onDogClick} />\n                            </div>\n                        </div>}\n\n                        <div class='mt-2'>\n                            <LikesAndComments\n                                stores={this.props.stores}\n                                likes={likes}\n                                comments={comments}\n                                type='workout'\n                                onTeamClick={this.onTeamClick}\n                                onUserClick={this.onUserClick}\n                            />\n                        </div>\n\n                    </>}\n\n                    {['beta', 'advanced', 'normal'].indexOf(viewmode) > -1 && <>\n                        <div class={`${wrapperClasses} mb-0 position-relative mt-2`}>\n                            <div class='row'>\n                                <div class='col text-center'>\n                                    <button type='button' class={`btn btn-sm btn-outline-${hasLikedWorkout ? 'primary' : 'secondary'} btn-lg btn-block ${hasLikedWorkout ? 'text-primary' : ''}`}\n                                        onClick={this.likeWorkout}\n                                        // disabled={hasLikedWorkout}\n                                    >\n                                        <i class={`${hasLikedWorkout ? 'text-primary fas' : 'far'} fa-thumbs-up`} /> <Text id='comments.like'>Lik</Text>\n                                    </button>\n                                </div>\n                                <div class='col text-center'>\n                                    <button type='button' class='btn btn-sm btn-outline-secondary btn-lg btn-block'\n                                        data-id={workout.id}\n                                        onClick={this.toggleAddComment}\n                                    >\n                                        <i class='fas fa-comment' /> <Text id='comments.comment-add'>Kommentar</Text>\n                                    </button>\n                                </div>\n                                {hasShareApi ? <>\n                                    <div class='col text-center'>\n                                        <button class='btn btn-sm btn-outline-secondary btn-lg btn-block text-overflow'\n                                            onClick={this.shareLink}\n                                            data-url={`https://themusher.app/share/workout/${workout.uuidv4}`}\n                                            data-title={`title: ${workout.name}`}\n                                        >\n                                            <i class='fas fa-share' /> <Text id='workout.share'>Del</Text>\n                                        </button>\n                                    </div>\n                                </> : <>\n                                    <div class='col text-center'>\n                                        <a class='btn btn-sm btn-outline-secondary btn-lg btn-block text-overflow'\n                                            href={`https://themusher.app/share/workout/${workout.uuidv4}`}\n                                            target='_blank'\n                                            rel='noreferrer'\n                                            data-native\n                                        >\n                                            <i class='fas fa-share' /> <Text id='workout.share'>Del</Text>\n                                        </a>\n                                    </div>\n                                </>}\n                            </div>\n                        </div>\n\n                        <div class={`${wrapperClasses} mt-2 mb-3`}>\n                            {showAddComment && <WorkoutAddComment\n                                stores={this.props.stores}\n                                workout={workout}\n                                inputRef={c => this.inputRef[workout.id] = c}\n                                inputRefObject={this.inputRef}\n                                col='12'\n                                offset='0'\n                            />}\n                            <WorkoutComments stores={this.props.stores} workout={workout} col='10' offset='2' compact={true} />\n                        </div>\n\n                        {views > 0 && <>\n                            <div class='mt-2'>\n                                <Views\n                                    stores={this.props.stores}\n                                    views={views}\n                                    object={workout}\n                                    type='workout'\n                                    isTeamAdmin={true}\n                                    isAdmin={false}\n                                    onTeamClick={this.onTeamClick}\n                                    onUserClick={this.onUserClick}\n                                />\n                            </div>\n                        </>}\n\n                    </>}\n\n                </div>\n            </div>\n        </>);\n    }\n}\n\nexport default Workout;\n","import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport { Text, Localizer, withText } from 'preact-i18n';\n\n@observer\nclass Modal extends Component {\n    toggleDate = () => {\n        const { showDate } = this.state;\n        this.setState({ showDate: !showDate });\n    }\n\n    touchStart = (e) => {\n        e.stopPropagation();\n        this.setState({\n            startY: e.touches[0].pageY,\n        })\n    }\n\n    touchEnd = (e) => {\n        e.stopPropagation();\n        this.setState({\n            startY: undefined,\n            readyToRefresh: false,\n        })\n    }\n\n    touchMove = (e) => {\n        e.stopPropagation();\n        const { close } = this.props;\n        const { startY, refreshing } = this.state;\n        const scrollDistance = 30;\n        const y = e.touches[0].pageY;\n        if (this.appContainer) {\n            const { scrollTop } = this.appContainer;\n            if (scrollTop === 0 && y > startY + scrollDistance && !refreshing) {\n                close();\n            }\n        }\n    }\n\n    render() {\n        const { showDate } = this.state;\n        const { image, imagexxl, close, thumb, name, title, date } = this.props;\n        return (\n            <div class='fixed-top bg-dark text-center pt-2' style='width: 100vw; height: 100vh;'>\n                <button class='btn btn-secondary float-right mr-2' onClick={close}>X</button>\n\n                    <div class='d-flex mb-2 px-2'>\n                        {/* {JSON.stringify(dog, null, 4)} */}\n                        {thumb && <div class={`text-center border rounded-circle imageRounded imageRoundedSmall`} style={thumb ? `background-image: url(\"${thumb}\");` : ''}>\n                            &nbsp;\n                        </div>}\n                        <div class='flex-grow-1 pl-3 pr-2 text-left' style='line-height: 1.3em;'>\n                            {name && <strong class='mr-2'>{name}:</strong>}\n                            {title}<br />\n                            <small class='text-muted'>\n                                {date && <small onClick={this.toggleDate}>\n                                    {showDate ? util.formatDate(date, { locale: 'no-NB' }) : util.formatDistance(date, new Date(), { locale: 'no-NB' })}\n                                </small>}\n                            </small>\n                        </div>\n                    </div>\n\n\n                <img src={image}\n                    class='img-fluid align-middle mt-2 mb-2'\n                    onClick={close}\n                    onTouchstart={this.touchStart}\n                    onTouchend={this.touchEnd}\n                    onTouchmove={this.touchMove}\n                    ref={c => this.appContainer = c}\n                />\n\n                <a target='_blank' rel='noopener noreferrer' href={imagexxl || image} download={imagexxl || image}>\n                    <i class='fas fa-download' /> <Text id='modal.download'>Last ned bildet</Text>\n                </a>\n            </div>\n        );\n    }\n}\n\nexport default Modal;\n","import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport { Text, Localizer } from 'preact-i18n';\n\nimport DogSimplePublic from './simplePublic';\n\n@observer\nclass DogScroller extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            imageIdx: 0,\n        };\n    }\n\n    scrollImages = (e) => {\n        const { dogs } = this.props;\n\n        const { scrollLeft, scrollWidth, clientWidth } = e.target;\n        const imageStep = clientWidth;\n        const imageIdx = scrollLeft / imageStep;\n        // console.log({ e, imageStep, imageIdx, scrollLeft, scrollWidth, clientWidth });\n\n        const nearestInt = Math.round(imageIdx);\n        const diff = Math.abs(nearestInt - imageIdx);\n        // console.log({ nearestInt, diff });\n        if (Number.isInteger(imageIdx) || diff < 0.1) {\n            this.setState({\n                imageIdx: nearestInt,\n            });\n        }\n    }\n\n    sortByName = (a, b) => {\n        const { allDogs = [] } = this.props;\n        const dogA = allDogs.find(e => e.id === a);\n        const dogB = allDogs.find(e => e.id === b);\n        if (dogA && dogB) {\n            if (dogA.name > dogB.name) {\n                return 1;\n            }\n        }\n        return -1;\n    }\n\n    render() {\n        const { imageIdx } = this.state;\n        const { dogs, allDogs = [], size = 'medium', onDogClick = () => {} } = this.props;\n\n        return (\n            <div class='w-100'>\n                <div\n                    class='d-flex flex-row flex-nowrap no-scrollbar'\n                    style='overflow: auto; scroll-snap-type: x mandatory;'\n                    onScroll={this.scrollImages}\n                >\n                    {dogs && dogs.sort(this.sortByName).map((dogId, idx) => {\n                        const dog = allDogs.find(e => e.id === dogId);\n                        if (!dog) {\n                            return '';\n                        }\n                        return (\n                            <div class='col clearfix position-relative p-0 mx-2'>\n                                <div\n                                    class={`w-100 h-100 text-center rounded-lg imageContainer d-flex justify-content-center align-items-center`}\n                                    style={`\n                                        flex-wrap: wrap;\n                                        overflow-y: hidden;\n                                    `}\n                                    onTouchstart={(e) => { e.stopPropagation(); }}\n                                    onTouchend={(e) => { e.stopPropagation(); }}\n                                    onTouchmove={(e) => { e.stopPropagation(); }}\n                                >\n                                    <DogSimplePublic\n                                        stores={this.props.stores}\n                                        dog={dog}\n                                        dogs={allDogs.filter(d => dogs.indexOf(d.id) > -1).sort((a, b) => a.name > b.name ? 1 : -1)}\n                                        className='mx-auto'\n                                        showName={true}\n                                        showPosition={false}\n                                        size={size}\n                                        onDogClick={onDogClick} \n                                    />\n                                    {/* <xmp>{JSON.stringify(img, null, 4)}</xmp> */}\n                                </div>\n                            </div>\n                        );\n                    })}\n                </div>\n            </div>\n        );\n    }\n}\n\nexport default DogScroller;\n","import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport { Text, Localizer, withText } from 'preact-i18n';\n\nimport mu from '../../lib/musher-util';\n\nconst RED_DAYS = [0, 6];\n\n@observer\nclass HistoryCalendar extends Component {\n\n    async loadHistorySummary(props = this.props) {\n        this.setState({ isLoading: true });\n\t\tconst { userStore, workoutStore } = this.props.stores;\n\t\tconst { currentTeam } = workoutStore;\n\n        const currentMonth = new Date().getMonth() + 1;\n        const { month = currentMonth, year = util.getYear(), team = currentTeam, dog = {}, callback = () => {} } = props;\n        await userStore.getFeed({ month, year, team, dog: dog.id });\n\n        const { historyType } = this.state;\n        callback(historyType);\n\n        this.setState({ isLoading: false });\n    }\n\n    setHistoryType = (e) => {\n        const { callback = () => {} } = this.props;\n        const { historyType: prevHistoryType } = this.state;\n        let historyType = e.target.dataset.historytype || e.target.parentElement.dataset.historytype;\n\n        if (historyType === prevHistoryType) {\n            this.setState({ historyType: null })\n            callback(null);\n        } else {\n            this.setState({ historyType });\n            callback(historyType);\n        }\n    }\n\n    chooseDay = (e) => {\n        const { year: yyyy, month: mm, day: dd } = this.state;\n        const { setDay = () => {} } = this.props;\n\t\tconst day = parseInt(e.target.parentElement.dataset.day || e.target.dataset.day, 10);\n\t\tconst month = parseInt(e.target.parentElement.dataset.month || e.target.dataset.month, 10);\n\t\tconst year = parseInt(e.target.parentElement.dataset.year || e.target.dataset.year, 10);\n\t\t// console.log({ day, month, year });\n\n        if (year === yyyy && month === mm && day === dd) {\n            this.setState({\n                year: null,\n                month: null,\n                day: null,\n            });\n            setDay(null, null, null);\n        } else {\n            this.setState({\n                year,\n                month,\n                day,\n            });\n            setDay(year, month, day);\n        }\n    }\n\n    componentDidMount() {\n        this.loadHistorySummary();\n    }\n\n    componentWillReceiveProps(nextProps) {\n        // console.log('componentWillReceiveProps', nextProps);\n        if (nextProps.month !== this.props.month\n            || nextProps.year !== this.props.year\n            || nextProps.dog !== this.props.dog\n            || nextProps.team !== this.props.team) {\n            this.loadHistorySummary(nextProps);\n        }\n    }\n\n    render() {\n        const { historyType, day: chosenDD, month: chosenMM, year: chosenYYYY } = this.state;\n        const filterHistories = historyType ? (e) => e.historyType === historyType : () => true;\n\n        const { appState, userStore } = this.props.stores;\n        const { user } = userStore;\n        const { language = 'en' } = user;\n\n        const HISTORY_TYPE_MAP = mu.getHistoryMap(language);\n        const DAYS = mu.getDays(language);\n        const MONTHS = mu.getMonths(language);\n\n\t\tconst { darkmode } = appState;\n        const currentDay = new Date().getDate();\n        const currentMonth = new Date().getMonth() + 1;\n        const currentYear = new Date().getFullYear();\n\t\tconst { month = currentMonth, year = util.getYear(), dog, basehref } = this.props;\n\n        const monthNum = parseInt(month, 10);\n        const yearNum = parseInt(year, 10);\n        const { month: nextMonth, year: nextYear } = mu.getNextMonth(monthNum, yearNum);\n        const { month: prevMonth, year: prevYear } = mu.getPrevMonth(monthNum, yearNum);\n\n        const daysOfMonth = util.getDaysInMonth(month, year);\n        const weeksInMonth = util.getWeeksInMonth(month, year);\n        const firstWeek = weeksInMonth[0].week;\n        const daysOfWeek = util.getDaysInWeek(firstWeek, year);\n\n        return (\n            <>\n                <div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-4'>\n                    <a href={`${basehref || '/workouts/month/'}${nextMonth}/${nextYear}/skipScroll`} class='float-right btn btn-sm btn-link'><i class='fas fa-arrow-right' /></a>\n                    <a href={`${basehref || '/workouts/month/'}${prevMonth}/${prevYear}/skipScroll`} class='float-left btn btn-sm btn-link'><i class='fas fa-arrow-left' /></a>\n                    <h5><Text id='dog.calendar.month'>Måned</Text> - {MONTHS[month - 1]} {year}</h5>\n                    {dog && <div>{dog.name}</div>}\n                    <small>{util.isoDate(daysOfMonth[0], false, false, true)} - {util.isoDate(daysOfMonth[daysOfMonth.length - 1], false, false, true)}</small>\n                </div>\n\n                <div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-4 mb-4'>\n                    <table class='table table-striped table-sm'>\n                        <thead>\n                            <tr>\n                                <th class='text-muted'><small><Text id='dog.calendar.week'>Uke</Text></small></th>\n                                {daysOfWeek.map(day => <th><small>{DAYS[day.getDay()]}</small></th>)}\n                                {/* <th class='text-muted'>Totalt</th> */}\n                            </tr>\n                        </thead>\n                        <tbody>\n                            {weeksInMonth && weeksInMonth.map(weekObj => {\n                                const daysOfWeek = util.getDaysInWeek(weekObj.week, year, month);\n                                return (\n                                    <tr>\n                                        <td class='text-right text-muted pt-3'>\n                                            <small>\n                                                {weekObj.week}\n                                            </small>\n                                        </td>\n                                        {daysOfWeek.map(day => {\n                                            const yyyy = day.getFullYear();\n                                            const mm = day.getMonth() + 1;\n                                            const dd = day.getDate()\n                                            const histories = userStore.findHistory(yyyy, mm, dd);\n                                            const endHistories = userStore.findEndHistory(yyyy, mm, dd);\n                                            // { \"id\": \"5f59d861eaa7385aaef6b399\", \"date\": \"2020-09-09T19:00:00.000Z\", \"year\": 2020, \"month\": 9,\n                                            // \"day\": 9, \"createdDate\": \"2020-09-10T07:40:17.834Z\", \"title\": \"Spiste ikke opp alt\",\n                                            // \"historyType\": \"foodLeftover\", \"images\": [], \"dogId\": 4, \"dogName\": \"Glenn\", \"dogShortname\": \"\",\n  \t\t\t\t\t\t\t\t\t\t\tconst isChosen = (chosenYYYY == yyyy && chosenMM == mm && chosenDD == dd);\n\t\t\t\t\t\t\t\t\t\t\tconst isToday =  (currentYear == yyyy) && (currentMonth == mm) && (currentDay == dd);\n\t\t\t\t\t\t\t\t\t\t\tconst isDayOff = RED_DAYS.indexOf(day.getDay()) > -1;\n\n                                            return (\n                                                <td class={`text-center font-weight-light position-relative pt-3 ${isChosen ? 'calendarIsChosen' : ''} ${isToday ? 'calendarIsToday' : ''} ${isDayOff ? 'calendarIsWeekend' : ''}`}\n                                                    style={`font-size: 0.8em;`}\n                                                    onClick={this.chooseDay} data-day={dd} data-month={mm} data-year={yyyy}\n                                                >\n                                                    <div class='position-absolute text-muted' style='top: 0px; right: 2px; font-size: 0.7em;'>\n                                                        {day.getDate()}\n                                                    </div>\n\n                                                    {histories && histories.length > 0 ? <>\n                                                        {histories.filter(filterHistories).map((history, idx) => {\n                                                            if (!history.historyType) {\n                                                                return (\n                                                                    <div class='rounded-circle position-absolute border'\n                                                                        style={`background-color: #808080; top: 50%; left: ${idx * 5}px; width: 15px; height: 15px;`}\n                                                                    />\n                                                                );\n                                                            }\n                                                            const bgColor = mu.getHistoryTypeColor(history.historyType);\n                                                            return (\n                                                                <div class='rounded-circle position-absolute border'\n                                                                    style={`background-color: ${bgColor}; top: 50%; left: ${idx * 5}px; width: 15px; height: 15px;`}\n                                                                />\n                                                            );\n                                                        })}\n                                                        {histories.length > 1 && <span class='position-absolute text-danger'\n                                                            style='bottom: 0; right: 0px; font-size: 0.7em;'>{histories.length}</span>}\n                                                    </>: '-'}\n\n                                                    {endHistories && endHistories.length > 0 ? <>\n                                                        {endHistories.filter(filterHistories).map((history, idx) => {\n                                                            if (!history.historyType) {\n                                                                return (\n                                                                    <div class='rounded position-absolute border border-white'\n                                                                        style={`background-color: #808080; top: 50%; left: ${idx * 5}px; width: 15px; height: 15px;`}\n                                                                    />\n                                                                );\n                                                            }\n                                                            const bgColor = mu.getHistoryTypeColor(history.historyType);\n                                                            return (\n                                                                <div class='rounded position-absolute border border-white'\n                                                                    style={`background-color: ${bgColor}; top: 50%; left: ${idx * 5}px; width: 15px; height: 15px;`}\n                                                                />\n                                                            );\n                                                        })}\n                                                        {endHistories.length > 1 && <span class='position-absolute text-danger'\n                                                            style='bottom: 0; right: 0px; font-size: 0.7em;'>{endHistories.length}</span>}\n                                                    </>: '-'}\n\n                                                </td>\n                                            );\n                                        })}\n                                    </tr>\n                                );\n                            })}\n                        </tbody>\n                    </table>\n                </div>\n\n                <div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-4 mb-4'>\n                    <div class='clearfix'>\n                        <small>\n                            {mu.getHistoryPri().map(key => {\n                                const bgColor = mu.getHistoryTypeColor(key);\n                                return (\n                                    <span class={`float-left mr-2 ${historyType === key ? 'font-weight-bold' : 'font-weight-lighter'}`} onClick={this.setHistoryType} data-historytype={key}>\n                                        <div class='rounded-circle border float-left mr-1'\n                                            style={`background-color: ${bgColor}; width: 15px; height: 15px;`}\n                                        /> {HISTORY_TYPE_MAP[key]}\n                                    </span>\n                                );\n                            })}\n                        </small>\n                    </div>\n                    <div class='clearfix'>\n                        <small>\n                            {mu.getHistoryPri(2).map(key => {\n                                const bgColor = mu.getHistoryTypeColor(key);\n                                return (\n                                    <span class={`float-left mr-2 ${historyType === key ? 'font-weight-bold' : 'font-weight-lighter'}`} onClick={this.setHistoryType} data-historytype={key}>\n                                        <div class='rounded-circle border float-left mr-1'\n                                            style={`background-color: ${bgColor}; width: 15px; height: 15px;`}\n                                        /> {HISTORY_TYPE_MAP[key]}\n                                    </span>\n                                );\n                            })}\n                        </small>\n                    </div>\n                    <div class='clearfix'>\n                        <small>\n                            {mu.getHistoryPri(3).map(key => {\n                                const bgColor = mu.getHistoryTypeColor(key);\n                                return (\n                                    <span class={`float-left mr-2 ${historyType === key ? 'font-weight-bold' : 'font-weight-lighter'}`} onClick={this.setHistoryType} data-historytype={key}>\n                                        <div class='rounded-circle border float-left mr-1'\n                                            style={`background-color: ${bgColor}; width: 15px; height: 15px;`}\n                                        /> {HISTORY_TYPE_MAP[key]}\n                                    </span>\n                                );\n                            })}\n                        </small>\n                    </div>\n                </div>\n            </>\n        );\n    }\n}\n\nexport default HistoryCalendar;\n","import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport { Text, Localizer, withText } from 'preact-i18n';\n\nimport mu from '../../lib/musher-util';\n\nimport Modal from '../modal';\nimport ImageSlider from '../imageSlider';\nimport ImageScroller from '../imageScroller';\n\n\nimport style from '../style.css';\n\nconst VACCINE_TYPES = mu.getVaccineTypes();\n\n@observer\nclass DogHistoryLine extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            showDate: false,\n        };\n    }\n\n    showModal = (e) => {\n        e.stopPropagation();\n        e.preventDefault();\n        const img = e.target.dataset.image;\n        const imgXXL = e.target.dataset.imagexxl;\n        const thumb = e.target.dataset.thumb;\n        const name = e.target.dataset.name;\n        const title = e.target.dataset.title;\n        const date = e.target.dataset.date;\n        this.setState({\n            displayModal: true,\n            currentImage: img,\n            currentImageXXL: imgXXL,\n            thumb,\n            name,\n            title,\n            date,\n        });\n    }\n\n    closeModal = () => {\n        this.setState({\n            displayModal: false,\n        });\n    }\n\n    toggleDate = () => {\n        const { showDate } = this.state;\n        this.setState({ showDate: !showDate });\n    }\n\n    touchStart = (e) => {\n        const { eventFired } = this.state;\n        if (!eventFired)  {\n            this.setState({\n                startY: e.touches[0].pageY,\n                startX: e.touches[0].pageX,\n                eventFired: false,\n                diffY: undefined,\n                diffX: undefined,\n                deleteVerify: false,\n            });\n        }\n    }\n\n    touchEnd = () => {\n        const { eventFired } = this.state;\n        if (eventFired) {\n            this.setState({\n                startY: undefined,\n                startX: undefined,\n            });\n        } else {\n            this.setState({\n                startY: undefined,\n                startX: undefined,\n                eventFired: false,\n                diffY: undefined,\n                diffX: undefined,\n                deleteVerify: false,\n            });\n        }\n    }\n\n    touchMove = (e) => {\n        const { eventFired } = this.state;\n        if (eventFired) {\n            return false;\n        }\n        const { startY, startX } = this.state;\n        const scrollDistance = 130;\n        const y = e.touches[0].pageY;\n        const x = e.touches[0].pageX;\n        const diffY = y - startY;\n        const diffX = x - startX;\n        this.setState({\n            diffY,\n            diffX,\n        });\n        if (y > (startY + scrollDistance)) {\n            // console.log('swiping down', y, '>', startY + scrollDistance);\n        } else if (y < (startY - scrollDistance)) {\n            // console.log('swiping up', y, '<', startY + scrollDistance);\n        } else if (x > (startX + scrollDistance)) {\n            // console.log('swiping right', startX, x);\n        } else if (x < (startX - scrollDistance)) {\n            this.setState({\n                eventFired: true,\n            });\n        }\n    }\n\n    reset = (e) => {\n        if (e) {\n            e.stopPropagation();\n            e.preventDefault();\n        }\n        this.setState({\n            deleted: false,\n            startY: undefined,\n            startX: undefined,\n            eventFired: false,\n            diffY: undefined,\n            diffX: undefined,\n            deleteVerify: false,\n        });\n    }\n\n    deleteHistoryRequest = async (e) => {\n        e.stopPropagation();\n        this.setState({\n            deleteVerify: true,\n        });\n    }\n\n    deleteHistory = async (e) => {\n        e.stopPropagation();\n        const { dogStore } = this.props.stores;\n        const { line } = this.props;\n        await dogStore.save({\n\t\t\tid: line.dogId,\n\t\t\t$pull: {\n                history: { _id: line.id || line._id },\n\t\t\t},\n\t\t});\n        this.setState({\n            deleted: true,\n            startY: undefined,\n            startX: undefined,\n            eventFired: false,\n            diffY: undefined,\n            diffX: undefined,\n            deleteVerify: false,\n        });\n    }\n\n    swipeLeft = (e) => {\n        const { eventFired } = this.state;\n        e.stopPropagation();\n        if (eventFired) {\n            this.reset();\n        } else {\n            this.setState({\n                eventFired: true,\n                diffX: -130,\n            });\n        }\n    }\n\n    componentWillReceiveProps(nextProps) {\n        // console.log('componentWillReceiveProps', nextProps);\n        if (nextProps.line.id !== this.props.line.id) {\n            this.reset();\n        }\n    }\n\n    render() {\n        const { userStore } = this.props.stores;\n        const { user } = userStore;\n        const { language = 'en' } = user;\n        const HISTORY_TYPE_MAP = mu.getHistoryMap(language);\n\n        const { displayModal, currentImage, currentImageXXL, showDate, thumb, name, title, date } = this.state;\n        const { line } = this.props;\n        const { diffX, deleted, deleteVerify } = this.state;\n        const hasImage = line.images && line.images.length > 0;\n        const isBeeingEdited = diffX < 0;\n        return (\n            <div class={`w-100 mb-4 position-relative ${style.hoverElement}`}\n                onTouchstart={deleted ? () => {} : this.touchStart}\n                onTouchend={deleted ? () => {} : this.touchEnd}\n                onTouchmove={deleted ? () => {} : this.touchMove}\n                onClick={!deleted && isBeeingEdited ? this.reset : () => {}}\n                style={`opacity: ${deleted ? 0.3 : 1};`}\n            >\n                {!isBeeingEdited && !deleted && <div class={`position-absolute ${style.hoverelementonly}`} style='top: 0px; right: 0px; z-index: 1000;'>\n                    <button class='btn btn-sm btn-secondary' type='button'\n                        onClick={this.swipeLeft}\n                    >\n                        <i class='fas fa-ellipsis-h' />\n                    </button>\n                </div>}\n                {isBeeingEdited && !deleted && <div class='position-absolute' style={`right: 0px; top: 10%; overflow: hidden; width: ${Math.abs(diffX) || 0}px; line-height: 0.8em;`}>\n                    {!line.grouped && <>\n                        {deleteVerify ?\n                            <>\n                                <button class='btn btn-sm btn-secondary float-right ml-3 mb-3'\n                                    onClick={this.reset}\n                                >\n                                    <i class='fas fa-times' /> <Text id='dog.history.no'>Nei</Text>\n                                </button>\n                                <button class='btn btn-sm btn-success float-right'\n                                    onClick={this.deleteHistory}\n                                >\n                                    <i class='fas fa-check' /> <Text id='dog.history.yes'>Ja</Text>\n                                </button>\n                            </>:\n                            <button class='btn btn-sm btn-danger float-right'\n                                onClick={this.deleteHistoryRequest}\n                            >\n                                <i class='fas fa-trash' /> <Text id='dog.history.delete'>Slett</Text>\n                            </button>\n                        }\n                    </>}\n                    {line.grouped && <small>\n                        <Text id='dog.history.cant-delete-groups'>Kan ikke slette grupperinger. Gå inn på hundene og slett der.</Text><br />\n                        <button class='btn btn-sm btn-success float-right'\n                            onClick={this.reset}\n                        >\n                            <i class='fas fa-check' /> Ok\n                        </button>\n                    </small>}\n                </div>}\n                <div class='row position-relative' style={`left: ${isBeeingEdited ? diffX : 0}px;`}>\n                    <div class='col-12 col-sm-8 col-lg-6 offset-sm-2 offset-lg-3 d-flex mb-0 position-relative'>\n                        {/* {JSON.stringify(dog, null, 4)} */}\n                        {line.dogImage ? <div class={`text-center border rounded-circle imageRounded imageRoundedSmall`} style={line.dogImage ? `background-image: url(\"${line.dogImage.s3SmallLink}\"); background-size: cover;` : ''}>\n                            &nbsp;\n                        </div> : <div class={`text-center border rounded-circle imageRounded imageRoundedSmall`} style={line.images && line.images[0] ? `background-image: url(\"${line.images[0].s3SmallLink}\"); background-size: cover;` : ''}>\n                            {!hasImage && <i class='fas fa-rss text-muted mt-2' style='font-size: 20px;' />}\n                        </div>}                        \n                        <div class='flex-grow-1 pl-3 pr-2' style='line-height: 1.0em;'>\n                            {!line.grouped && line.dogId && <a class='stretched-link' href={`/dogs/${line.dogId}`}>\n                                <strong class='mr-2'>{line.dogShortname || line.dogName}: </strong>\n                            </a>}\n                            {line.title}<br />\n                            \n                            {line.grouped && (\n                                <>\n                                    <div class='w-100 clearfix mt-2'>\n                                        {line.grouped.map(el => (\n                                            <>\n                                                <a href={`/dogs/${el.dogId}`}>\n                                                    {el.dogImage ? (\n                                                        <div class={`text-center border rounded-circle imageRounded imageRoundedThumb float-left`}\n                                                            style={`margin-right: 2px; ${el.dogImage ? `background-image: url(\"${el.dogImage.s3SmallLink}\");` : ''}`}\n                                                        >\n                                                            &nbsp;\n                                                        </div>\n                                                    ) : (\n                                                        <div class={`text-center border rounded-circle imageRounded imageRoundedThumb float-left text-muted pt-1`} \n                                                            style={`margin-right: 2px; ${el.images && el.images[0] ? `background-image: url(\"${el.images[0].s3SmallLink}\");` : ''}`}\n                                                        >\n                                                            {/* {!hasImage && <i class='fas fa-dog text-muted' style='font-size: 10px;' />} */}\n                                                            {!hasImage && <span style='font-size: 15px;'>{util.ucfirst(el.dogName, true)}</span>}\n                                                        </div>\n                                                    )}\n                                                </a>\n                                            </>\n                                        ))}\n                                    </div>\n                                    <div class='w-100 clearfix mt-2'>\n                                        <small>\n                                            {line.grouped.map(el => (\n                                                <span class='float-left mr-2 text-muted'>\n                                                    <a href={`/dogs/${el.dogId}`}>\n                                                        {el.dogShortname || el.dogName}\n                                                    </a>\n                                                </span>\n                                            ))}\n                                        </small>\n                                    </div>\n                                </>\n                            )}\n\n                            <div class='w-100 clearfix'>\n                                <small class='text-muted'>\n                                    {line.date && <small onClick={this.toggleDate}>\n                                        {showDate ? util.formatDate(line.date, { locale: 'no-NB' }) : util.formatDistance(line.date, new Date(), { locale: 'no-NB' })}\n                                        {line.endDate && <span class='ml-3'><i class='fas fa-hourglass-end' /> {util.formatDate(line.endDate, { locale: 'no-NB' })}</span>}\n                                        {line.historyType && <span class='ml-3'>\n                                            <i class='fas fa-folder-open' /> {HISTORY_TYPE_MAP[line.historyType]} {line.vaccineType ? ` - ${VACCINE_TYPES[line.vaccineType].name}` : ''}\n                                        </span>}\n                                        {line.weight && <span class='ml-3'><i class='fas fa-balance-scale' /> {line.weight} kg</span>}\n                                        {line.bodyScore && <span class='ml-3'><i class='fas fa-dog' /> {line.bodyScore}</span>}\n                                        {line.user && line.user.email && <span class='ml-3'><i class='fas fa-user' /> {line.user.email}</span>}\n                                    </small>}\n                                </small>\n                            </div>\n\n                            <div class='row mt-2'>\n                                <div class='col-12'>\n                                    <span class='font-weight-normal'>{line.comment}</span>\n                                    <span class='float-right'>\n                                        {line.cost ? `Kr. ${util.format(line.cost, 2)}` : ''}\n                                    </span>\n                                </div>\n                            </div>\n\n                        </div>\n                    </div>\n\n                    <div class='col-12 col-sm-8 col-lg-6 offset-sm-2 offset-lg-3 mt-1'>\n                        <div class='row'>\n                            <ImageScroller stores={this.props.stores} images={line.images} />\n                        </div>\n                    </div>\n                </div>\n            </div>\n        );\n    }\n}\n\nexport default DogHistoryLine;\n","import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport { Text, Localizer } from 'preact-i18n';\n\nimport mu from '../../lib/musher-util';\nconst MARGIN_TOP = mu.marginTop(true);\nconst MARGIN_BOTTOM = mu.marginBottom();\nconst SUB_MENU_MARGIN_TOP = mu.subMenuMarginTop();\n\nimport Workout from '../../components/workout';\nimport WorkoutSummary from '../../components/workout/summary';\nimport DogHistory from '../../components/dog/history';\nimport DogAddLog from '../../components/dog/addlog';\nimport DogCalendar from '../../components/dog/calendar';\n\nconst initialState = {\n\tisLoading: false,\n};\n\n@observer\nclass Home extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            ...initialState,\n        };\n\t\tthis.loadAll();\n    }\n\n\tasync loadAll() {\n\t\tthis.setState({ isLoading: true });\n\t\tawait this.loadFeed();\n\t\tthis.setState({ isLoading: false });\n    }\n\n\tasync loadFeed(props = this.props) {\n\t\tconst { userStore, workoutStore } = this.props.stores;\n\t\tconst { currentTeam } = workoutStore;\n\n\t\tconst currentMonth = new Date().getMonth() + 1;\n        const { month = currentMonth, year = util.getYear(), team = currentTeam, dog = {} } = props;\n        await userStore.getFeed({ month, year, team, dog: dog.id });\n    }\n\n\tsetHistoryType = (historyType) => {\n\t\tthis.setState({ historyType });\n    }\n\n\tsetDay = (yyyy, mm, dd) => {\n\t\tthis.setState({ yyyy, mm, dd });\n\t}\n\n\tresetDay = () => {\n\t\tthis.setState({ yyyy: null, mm: null, dd: null });\n\t}\n\n\t// componentWillUnmount() {\n\t//     PubSub.unsubscribe(subscription);\n\t// }\n    componentDidMount() {\n        this.loadAll();\n    }\n\n\trender() {\n\t\tconst { scrolledDown } = this.props;\n\t\tconst { isLoading, historyType, yyyy, mm, dd } = this.state;\n        // const filterHistories = historyType ? (e) => e.historyType === historyType : () => true;\n\t\tconst filterHistories = (e) => {\n            let isOk = true;\n            if (historyType) {\n                isOk = e.historyType === historyType;\n            }\n            if (isOk && yyyy && mm && dd) {\n                isOk = e.year === yyyy && e.month === mm && e.day === dd;\n            }\n            return isOk;\n        }\n\n\t\tconst { userStore, appState } = this.props.stores;\n        const { darkmode } = appState;\n\t\tconst { month, year } = this.props;\n\t\tconst { historyFeed } = userStore;\n\t\treturn (\n\t\t\t<div class='container-fluid' style={`margin-bottom: ${MARGIN_BOTTOM}; margin-top: ${MARGIN_TOP};`}>\n\t\t\t\t<div class='row fixed-top pt-2' style={`margin-top: ${scrolledDown > 0 ? 0 : SUB_MENU_MARGIN_TOP}; background-color: ${darkmode ? '#191d21' : '#f8f9fa'}; transition: all 0.3s ease-in-out;`}>\n\t\t\t\t\t<div class='col text-center subtopmenu'>\n\t\t\t\t\t\t<nobr><a href='/dogs' class='text-secondary stretched-link'><i class='fas fa-chart-line' /> <Text id='dogs.dashboard'>Oversikt</Text></a></nobr>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class='col text-center subtopmenu'>\n\t\t\t\t\t\t<nobr><a href='/dogs/list' class='text-secondary stretched-link'><i class='fas fa-list' /> <Text id='dogs.list'>Liste</Text></a></nobr>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class='col text-center border-bottom border-primary subtopmenu'>\n\t\t\t\t\t\t<nobr><a href='/dogs/feed' class='text-primary stretched-link'><i class='fas fa-rss' /> <Text id='dogs.feed'>Feed</Text></a></nobr>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class='col text-center subtopmenu'>\n\t\t\t\t\t\t<nobr><a href='/dogs/todo' class='text-secondary stretched-link'><i class='fas fa-calendar-check' /> <Text id='dogs.todo'>Todo</Text></a></nobr>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t\t\n\t\t\t\t<div class='row'>\n\t\t\t\t\t<div class='col-12 mb-4'>\n\t\t\t\t\t\t<div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 px-0'>\n\t\t\t\t\t\t\t<span class='float-right'><DogAddLog stores={this.props.stores} dog={{}} /></span>\n\t\t\t\t\t\t\t<h5><Text id='feed.title'>Siste fra hundene</Text></h5>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t<DogCalendar stores={this.props.stores} basehref={`/dogs/feed/`} month={month} year={year} callback={this.setHistoryType} setDay={this.setDay} />\n\n\t\t\t\t\t\t{!isLoading && historyFeed && historyFeed.length === 0 && (\n\t\t\t\t\t\t\t<div class='mb-5 py-3 text-center border-top border-bottom text-muted'>\n\t\t\t\t\t\t\t\t<div class='display-4'>\n\t\t\t\t\t\t\t\t\t<i class='fas fa-dog' />\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<h5>\n\t\t\t\t\t\t\t\t\t<Text id='feed.no-log'>Ingen hendelser fra hundene.</Text>\n\t\t\t\t\t\t\t\t</h5>\n\t\t\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t\t\t<Text id='feed.tip-1'>Det er fint å legge inn hendelser (løpetid, skader, vaksinering, vetrinærbesøk, mm) og bilder av hundene i loggen.</Text>\n\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t\t\t<Text id='feed.tip-2'>På denne måten så vil hele teamet ditt se hva som skjer med hundene og hva som trengs å følges opp.\n\t\t\t\t\t\t\t\t\tDette er en slags <strike>Face</strike>Dogbook for hundene deres.</Text>\n\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t<br />\n\t\t\t\t\t\t\t\t<a class='btn btn-info mt-3' href='/dogs/'>\n\t\t\t\t\t\t\t\t\t<i class='fas fa-dog' /> <Text id='feed.add-log'>Legg til logg på hundene</Text>\n\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t)}\n\n\t\t\t\t\t\t{yyyy && mm && dd && (\n\t\t\t\t\t\t\t<div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 px-0 clearfix mb-3'>\n\t\t\t\t\t\t\t\t<button class='btn btn-sm btn-secondary float-right' onClick={this.resetDay}>\n\t\t\t\t\t\t\t\t\t<Text id='feed.show-all-days'>Vis alle</Text>\n\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t<h5>{yyyy}-{util.padDate(mm)}-{util.padDate(dd)}:</h5>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t)}\n\n\t\t\t\t\t\t{historyFeed && historyFeed.filter(filterHistories).map(line => (\n\t\t\t\t\t\t\t<DogHistory stores={this.props.stores} line={line} />\n\t\t\t\t\t\t))}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nexport default Home;\n"],"sourceRoot":""}