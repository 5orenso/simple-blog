{"version":3,"sources":["webpack:///./routes/public/race/raceheader.js","webpack:///./components/public/heatmap.js","webpack:///./routes/public/race/submenu.js","webpack:///./routes/public/race/style.css","webpack:///./routes/public/race/header.js","webpack:///./routes/public/race/raceText.js","webpack:///./routes/public/race/media.js"],"names":["initialState","RaceHeader","observer","Component","constructor","props","super","this","state","render","raceStore","appState","stores","title","language","race","today","Date","status","startDate","endDate","signupStartDate","signupEndDate","class","classes","useEffect","document","PageTitle","style","util","formatDate","locale","hour12","hour","minute","liveRace","role","id","showAddComment","Heatmap","updateTimer","inputRef","setState","isLoading","adminStore","raceid","getPublicHeatmap","componentDidMount","loadHeatmap","waypoints","zoomToMarkers","mapid","fullscreenMap","publicHeatmap","heatmap","mapId","length","minZoom","maxZoom","height","key","mu","marginTop","marginBottom","subMenuMarginTop","email","submenu","jwtToken","getJwtToken","PublicRaceDetail","path","darkmode","currentMenu","match","href","module","exports","menu","profile","main","searchText","Navigation","toggleDropdown","e","menuName","target","dataset","name","parentNode","toggleDarkmode","toggleViewmode","mode","reloadApp","window","location","reload","adminLoadAll","async","userStore","getInfo","changeLanguage","lang","value","console","log","user","setLanguage","search","route","notifications","filter","read","src","type","data-name","onClick","className","activeClassName","onInput","selected","text","finalText","regex","RegExp","replace","MARGIN_TOP","MARGIN_BOTTOM","reloadInSec","reloadLastEpoch","reloadIsActive","copyText","select","execCommand","load","allTeamIds","map","currentClass","contestants","musher","team","loadTeams","join","loadWorkoutSummary","getAllImages","Math","floor","getTime","tickReloadTimeer","clearTimeout","setTimeout","loadRace","RELOAD_INTERVAL_IN_SEC","now","tick","componentWillUnmount","componentWillReceiveProps","nextProps","isAdmin","images","reloadPercent","normalizeBetween","aria-valuenow","aria-valuemin","aria-valuemax","idx","rel","native","image","imageLink","s3LargeLink","s3MediumLink","photoByline","body","firstname","lastname","currentTeam","sportsClub","tagLine","tag","split","moreInfoFacebook","facebookText","tagFacebookUsers","usr","facebook","instagramText","tagInstagramUsers","instagram","createdDate","s3XXLargeLink"],"mappings":"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","file":"76.chunk.8d1f6.esm.js","sourcesContent":["import { h, Component } from 'preact';\nimport { useEffect } from \"preact/hooks\";\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport { Text, Localizer } from 'preact-i18n';\n\nfunction PageTitle(title, classes = '') {\n\tuseEffect(() => {\n\t\tdocument.title = `Homerun Race: ${title}`;\n\t}, [title]);\n\treturn <h1 class={classes}>{title}</h1>;\n}\n\nconst initialState = {\n};\n\n@observer\nclass RaceHeader extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            ...initialState,\n        };\n    }\n\n    render() {\n\t\tconst { raceStore, appState } = this.props.stores;\n\t\tconst { title } = this.props;\n\t\tconst { darkmode, language = 'en' } = appState;\n\t\tconst { race } = raceStore;\n\n\t\tconst today = new Date();\n\t\tlet status = '';\n\t\tif (today >= new Date(race.startDate) && today <= new Date(race.endDate)) {\n\t\t\tstatus = 'race';\n\t\t} else if (today >= new Date(race.signupStartDate) && today <= new Date(race.signupEndDate)) {\n\t\t\tstatus = 'signup';\n\t\t} else if (today > new Date(race.endDate)) {\n\t\t\tstatus = 'done';\n\t\t}\n\n\t\treturn (\n\t\t\t<>\n\t\t\t\t<div class='d-flex'>\n\t\t\t\t\t<div class='flex-fill'>\n\t\t\t\t\t\t{PageTitle(title, 'mb-0')}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class='flex-fill text-center d-none d-md-block'>\n\t\t\t\t\t\t<h1 class='mb-0' style='line-height: 0.8em;'><span class='font-weight-lighter' style='letter-spacing: -1px;'>{race.title}</span></h1>\n\t\t\t\t\t\t<small class=''>\n\t\t\t\t\t\t\t{race.startDate && <>{util.formatDate(race.startDate, { locale: language, hour12: false, hour: '2-digit', minute: '2-digit' })}</>}\n\t\t\t\t\t\t\t{race.endDate && <> - {util.formatDate(race.endDate, { locale: language, hour12: false, hour: '2-digit', minute: '2-digit' })}</>}\n\t\t\t\t\t\t</small>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class='flex-fill'>\n\t\t\t\t\t\t<h3 class='float-right'>\n\t\t\t\t\t\t\t{status === 'signup' && !race.liveRace && <>\n\t\t\t\t\t\t\t\t<div class='spinner-grow text-primary' role='status' />\n\t\t\t\t\t\t\t\t<span class='badge badge-primary ml-2'><Text id='races.signup-open'>Påmelding åpen</Text></span>\n\t\t\t\t\t\t\t</>}\n\t\t\t\t\t\t\t{status === 'race' && <>\n\t\t\t\t\t\t\t\t<div class='spinner-grow text-danger' role='status' />\n\t\t\t\t\t\t\t\t<span class='badge badge-danger ml-2'><Text id='races.race-in-progress'>Løp pågår</Text></span>\n\t\t\t\t\t\t\t</>}\n\t\t\t\t\t\t\t{status === 'done' && <>\n\t\t\t\t\t\t\t\t<i class='fas fa-check text-success' />\n\t\t\t\t\t\t\t\t<span class='badge badge-success ml-2'><Text id='races.race-finished'>Løp avsluttet</Text></span>\n\t\t\t\t\t\t\t</>}\n\t\t\t\t\t\t</h3>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class='d-block d-md-none'>\n\t\t\t\t\t<h4 class='mb-0' style='line-height: 0.8em;'><span class='font-weight-light' style='letter-spacing: -1px;'>{race.title}</span></h4>\n\t\t\t\t\t<small>\n\t\t\t\t\t\t{race.startDate && <>{util.formatDate(race.startDate, { locale: language, hour12: false, hour: '2-digit', minute: '2-digit' })}</>}\n\t\t\t\t\t\t{race.endDate && <> - {util.formatDate(race.endDate, { locale: language, hour12: false, hour: '2-digit', minute: '2-digit' })}</>}\n\t\t\t\t\t</small>\t\t\t\t\n\t\t\t\t</div>\n\t\t\t</>\n\t\t);\n\t}\n}\n\nexport default RaceHeader;\n","import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport { Text, Localizer } from 'preact-i18n';\nimport { toJS } from 'mobx'\n\nimport Map from '../../components/map';\n\nimport mu from '../../lib/musher-util';\n\nconst initialState = {\n\tshowAddComment: false,\n};\n\n@observer\nclass Heatmap extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            ...initialState,\n        };\n        this.updateTimer = {};\n\t\tthis.inputRef = {};\n    }\n\n\tasync loadHeatmap() {\n\t\tthis.setState({ isLoading: true });\n\t\tconst { adminStore } = this.props.stores;\n        const { raceid } = this.props;\n        await adminStore.getPublicHeatmap(raceid);\n\t\tthis.setState({ isLoading: false });\n\t}\n\n\tcomponentDidMount() {\n\t\tthis.loadHeatmap();\n\t}\n\n    // componentWillReceiveProps() {\n\t// \tthis.loadHeatmap();\n\t// }\n\n    render() {\n        const { adminStore } = this.props.stores;\n        const { waypoints, zoomToMarkers, mapid, fullscreenMap } = this.props;\n        const { publicHeatmap: heatmap } = adminStore;\n        // const heatmap = publicHeatmap.slice(0, 10);\n        // const heatmap = [[60.4433,8.8996,14],[61.384,9.1152,14],[60.42,8.9422,15]];\n\n        return (\n            <>\n                {/* heatmap: {`map-${mapid}`}<br /> */}\n                {/* {JSON.stringify(heatmap)} */}\n                <Map\n                    stores={this.props.stores}\n                    mapId={heatmap.length}\n                    heatmap={heatmap}\n                    minZoom={2}\n                    maxZoom={18}\n                    height={600}\n                    waypoints={waypoints}\n                    zoomToMarkers={zoomToMarkers}\n                    fullscreenMap={fullscreenMap}\n                    key={`map-${mapid}`}\n                />\n            </>\n        );\n    }\n}\n\nexport default Heatmap;\n","import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport { Text, Localizer } from 'preact-i18n';\nimport linkstate from 'linkstate';\n\nimport Header from './header';\nimport Heatmap from '../../../components/public/heatmap';\n\nimport mu from '../../../lib/musher-util';\nconst MARGIN_TOP = mu.marginTop(true);\nconst MARGIN_BOTTOM = mu.marginBottom();\nconst SUB_MENU_MARGIN_TOP = mu.subMenuMarginTop();\n\nconst initialState = {\n\tisLoading: false,\n\temail: '',\n\tsubmenu: 'ads',\n\tjwtToken: util.getJwtToken(),\n};\n\n@observer\nclass PublicRaceDetail extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            ...initialState,\n        };\n    }\n\n\trender() {\n\t\tconst { appState } = this.props.stores;\n\t\tconst { raceid, path } = this.props;\n\t\tconst { darkmode } = appState;\n\n        let currentMenu = 'default';\n        if (path.match(/\\/race\\/:raceid$/)) {\n            currentMenu = 'default';\n        } else if (path.match(/\\/race\\/:raceid\\/mushers$/)) {\n            currentMenu = 'mushers';\n        } else if (path.match(/\\/race\\/:raceid\\/results$/)) {\n            currentMenu = 'results';\n        } else if (path.match(/\\/race\\/:raceid\\/media$/)) {\n            currentMenu = 'media';\n        } else if (path.match(/\\/race\\/:raceid\\/tracking$/)) {\n            currentMenu = 'tracking';\n        }\n\n\t\treturn (\n\t\t\t<>\t\t\t\t\n                <div class='row fixed-top pr-3' style={`margin-top: 40px; background-color: ${darkmode ? '#191d21' : '#f8f9fa'};`}>\n\n                    <div class='col-12 my-2 mx-2'>\n                        <ul class='nav nav-pills nav-fill flex-nowrap'>\n                            <li class='nav-item' style='max-width: 20%;'>\n                                <a href={`/race/${raceid}`} class={`text-overflow nav-link ${currentMenu === 'default' ? 'active' : ''}`}>\n                                    <nobr><i class='fas fa-info-circle' /> <Text id='race.therace'>Løpet</Text></nobr>\n                                </a>\n                            </li>\n                            <li class='nav-item' style='max-width: 20%;'>\n                                <a href={`/race/${raceid}/mushers`} class={`text-overflow nav-link ${currentMenu === 'mushers' ? 'active' : ''}`}>\n                                    <nobr><i class='fas fa-users' /> <Text id='race.mushers'>Deltakere</Text></nobr>\n                                </a>\n                            </li>\n                            <li class='nav-item' style='max-width: 20%;'>\n                                <a href={`/race/${raceid}/results`} class={`text-overflow nav-link ${currentMenu === 'results' ? 'active' : ''}`}>\n                                    <nobr><i class='fas fa-poll' /> <Text id='race.results'>Resultater</Text></nobr>\n                                </a>\n                            </li>\n                            <li class='nav-item' style='max-width: 20%;'>\n                                <a href={`/race/${raceid}/media`} class={`text-overflow nav-link ${currentMenu === 'media' ? 'active' : ''}`}>\n                                    <nobr><i class='fas fa-images' /> <Text id='race.media'>Bilder</Text></nobr>\n                                </a>\n                            </li>\n                            <li class='nav-item' style='max-width: 20%;'>\n                                <a href={`/race/${raceid}/tracking`} class={`text-overflow nav-link ${currentMenu === 'tracking' ? 'active' : ''}`}>\n                                    <nobr><i class='fas fa-map-marked-alt' /> <Text id='race.tracking'>Tracking</Text></nobr>\n                                </a>\n                            </li>\n                        </ul>\n                    </div>\n\n\n                    {/* <div class={`col text-center subtopmenu ${path.match(/\\/race\\/:raceid$/) ? 'border-bottom border-primary' : ''}`}>\n                        <a href={`/race/${raceid}`} class={`text-${path.match(/\\/race\\/:raceid$/) ? 'primary' : 'secondary'} stretched-link`}>\n                            <nobr><i class='fas fa-chart-line' /> <Text id='race.therace'>Løpet</Text></nobr>\n                        </a>\n                    </div>\n                    <div class={`col text-center subtopmenu ${path.match(/\\/race\\/:raceid\\/mushers$/) ? 'border-bottom border-primary' : ''}`}>\n                        <a href={`/race/${raceid}/mushers`} class={`text-${path.match(/\\/race\\/:raceid\\/mushers$/) ? 'primary' : 'secondary'} stretched-link`}>\n                            <nobr><i class='fas fa-chart-line' /> <Text id='race.mushers'>Deltakere</Text></nobr>\n                        </a>\n                    </div>\n                    <div class={`col text-center subtopmenu ${path.match(/\\/race\\/:raceid\\/results$/) ? 'border-bottom border-primary' : ''}`}>\n                        <a href={`/race/${raceid}/results`} class={`text-${path.match(/\\/race\\/:raceid\\/results$/) ? 'primary' : 'secondary'} stretched-link`}>\n                            <nobr><i class='fas fa-chart-line' /> <Text id='race.results'>Resultater</Text></nobr>\n                        </a>\n                    </div>\n                    <div class={`col text-center subtopmenu ${path.match(/\\/race\\/:raceid\\/tracking$/) ? 'border-bottom border-primary' : ''}`}>\n                        <a href={`/race/${raceid}/tracking`} class={`text-${path.match(/\\/race\\/:raceid\\/tracking$/) ? 'primary' : 'secondary'} stretched-link`}>\n                            <nobr><i class='fas fa-chart-line' /> <Text id='race.tracking'>Tracking</Text></nobr>\n                        </a>\n                    </div> */}\n                </div>\n\t\t\t</>\n\t\t);\n\t}\n}\n\nexport default PublicRaceDetail;\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"pointerCursor\":\"pointerCursor__1W6mM\"};","import { h, Component } from 'preact';\nimport { Link } from 'preact-router/match';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport linkState from 'linkstate';\nimport { route } from 'preact-router';\nimport { Text, Localizer } from 'preact-i18n';\n\nimport style from './style.css';\n\n\nconst initialState = {\n    menu: {\n\t\tprofile: false,\n\t\tmain: false,\n\t},\n\tsearchText: '',\n};\n\n@observer\nclass Navigation extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            ...initialState,\n        };\n    }\n\n\ttoggleDropdown = (e) => {\n\t\tconst { menu } = this.state;\n\t\tlet menuName = e.target.dataset.name;\n\t\tif (!menuName && e.target.parentNode) {\n\t\t\tmenuName = e.target.parentNode.dataset.name;\n\t\t}\n\t\tif (menuName) {\n\t\t\tmenu[menuName] = !menu[menuName];\n\t\t}\n\t\tthis.setState({ menu });\n\t}\n\n\ttoggleDarkmode = (e) => {\n        const { appState } = this.props.stores;\n\t\tappState.toggleDarkmode();\n\t\tthis.toggleDropdown(e);\n\t}\n\n\ttoggleViewmode = (e) => {\n        const { appState } = this.props.stores;\n\t\tlet mode = e.target.dataset.mode;\n\t\tif (!mode && e.target.parentNode) {\n\t\t\tmode = e.target.parentNode.dataset.mode;\n\t\t}\n\t\tappState.toggleViewmode(mode);\n\t\tthis.toggleDropdown(e);\n\t}\n\n\treloadApp = () => {\n\t\twindow.location.reload(true);\n\t}\n\n\tadminLoadAll = async (e) => {\n        const { userStore } = this.props.stores;\n        await userStore.getInfo(true);\n\t}\n\n\tchangeLanguage = (e) => {\n\t\tconst lang = e.target.value;\n\t\tconsole.log('changeLanguage', lang);\n\t\tconst { appState, userStore } = this.props.stores;\n\t\tconst { user = {} } = userStore;\n\t\tif (user.email) {\n\t\t\tuserStore.setLanguage({ email: user.email, language: lang });\n\t\t}\n\t\tappState.setLanguage(lang);\n\t}\n\n\tsearch = () => {\n\t\tconst { searchText } = this.state;\n\t\troute(`/search/${searchText}`);\n\t}\n\n    render() {\n\t\tconst { menu, searchText } = this.state;\n        const { appState, userStore } = this.props.stores;\n        const { darkmode, viewmode, isCordova } = appState;\n\t\tconst { allUsers, isAdmin, user, notifications = [] } = userStore;\n\t\tconst unreadNotificatins = notifications.filter(e => !e.read);\n\t\tconst unread = unreadNotificatins.length || 0;\n\t\tconst { language = 'en' } = user;\n\n\t\treturn (\n\t\t\t<nav class='navbar navbar-expand-lg navbar-themed fixed-top py-1' style='z-index: 99999;'>\n\t\t\t\t<a class='navbar-brand' href='/race/'>\n\t\t\t\t\t{/* <img src={`./assets/logo-jul-2020-v2-${darkmode ? 'black' : 'white'}.png`} height='30' class='position-absolute' style='top: 8px; left: 6px' /> */}\n\t\t\t\t\t<img src={`./assets/homerun-race-logo-2-${darkmode ? 'white-' : ''}small.png`} height='37' class='position-absolute' style='top: 5px; left: 6px' />\n\t\t\t\t\t<span class='font-weight-normal' style='margin-left: 30px; font-size: 20px;'>Homerun Race</span>\n\t\t\t\t</a>\n\n\t\t\t\t<button class='navbar-toggler' type='button'\n\t\t\t\t\tdata-name='main'\n\t\t\t\t\tonClick={this.toggleDropdown}\n\t\t\t\t>\n\t\t\t\t\t<span class='navbar-toggler-icon' />\n\t\t\t\t</button>\n\n\t\t\t\t<div class={`collapse navbar-collapse ${menu.main ? 'show' : ''}`} id='navbarSupportedContent'>\n\t\t\t\t\t<ul class='navbar-nav mr-auto ml-5'>\n\t\t\t\t\t\t<li class='nav-item'>\n\t\t\t\t\t\t\t<Link className='nav-link' activeClassName={'active'} href='/race'\n\t\t\t\t\t\t\t\tdata-name='main'\n\t\t\t\t\t\t\t\tstyle='font-size: 1.0em !important;'\n\t\t\t\t\t\t\t\tonClick={this.toggleDropdown}\n\t\t\t\t\t\t\t><i class='fas fa-flag-checkered' /> <Text id='header.races'>Løpene</Text></Link>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t\t<li class='nav-item'>\n\t\t\t\t\t\t\t<Link className='nav-link' activeClassName={'active'} href='/race/support'\n\t\t\t\t\t\t\t\tdata-name='main'\n\t\t\t\t\t\t\t\tstyle='font-size: 1.0em !important;'\n\t\t\t\t\t\t\t\tonClick={this.toggleDropdown}\n\t\t\t\t\t\t\t><i class='far fa-question-circle' /> <Text id='header.support'>Support</Text></Link>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t\t<li class='nav-item'>\n\t\t\t\t\t\t\t<Link className='nav-link' activeClassName={'active'} href='/race/news'\n\t\t\t\t\t\t\t\tdata-name='main'\n\t\t\t\t\t\t\t\tstyle='font-size: 1.0em !important;'\n\t\t\t\t\t\t\t\tonClick={this.toggleDropdown}\n\t\t\t\t\t\t\t><i class='fas fa-quote-right' /> <Text id='header.news'>Nyheter</Text></Link>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t\t{/* <li class='nav-item'>\n\t\t\t\t\t\t\t<Link className='nav-link' activeClassName={'active'} href='/'\n\t\t\t\t\t\t\t\tdata-name='main'\n\t\t\t\t\t\t\t\tonClick={this.toggleDropdown}\n\t\t\t\t\t\t\t><i class='fas fa-dog' /> <Text id='header.backtoapp'>The Musher</Text></Link>\n\t\t\t\t\t\t</li> */}\n\t\t\t\t\t\t{/* <li class='nav-item'>\n\t\t\t\t\t\t\t<Link className='nav-link' activeClassName={'active'} href='/news'\n\t\t\t\t\t\t\t\tdata-name='main'\n\t\t\t\t\t\t\t\tonClick={this.toggleDropdown}\n\t\t\t\t\t\t\t><i class='fas fa-quote-right' /> <Text id='header.news'>Nyheter</Text></Link>\n\t\t\t\t\t\t</li> */}\n\t\t\t\t\t\t{/* <li class='nav-item d-block d-lg-none'>\n\t\t\t\t\t\t\t<Link className='nav-link' activeClassName={'active'} href='/howto'\n\t\t\t\t\t\t\t\tdata-name='main'\n\t\t\t\t\t\t\t\tonClick={this.toggleDropdown}\n\t\t\t\t\t\t\t><i class='fas fa-quote-right' /> <Text id='header.howto'>Hvordan gjør man det?</Text></Link>\n\t\t\t\t\t\t</li> */}\n\t\t\t\t\t</ul>\n\n\t\t\t\t\t<ul class='navbar-nav ml-auto '>\n\t\t\t\t\t\t{/* <li class='nav-item mr-2'>\n\t\t\t\t\t\t\t<Link className='nav-link' activeClassName={'active'}\n\t\t\t\t\t\t\t\thref='/users/notifications'\n\t\t\t\t\t\t\t\tdata-name='main'\n\t\t\t\t\t\t\t\tonClick={this.toggleDropdown}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<i class='fas fa-bell mr-1' />\n\t\t\t\t\t\t\t\t{unread > 0 && <>\n\t\t\t\t\t\t\t\t\t<span class='badge badge-pill badge-danger'>{unread > 9 ? '9+' : unread}</span>\n\t\t\t\t\t\t\t\t</>}\n\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t</li> */}\n\t\t\t\t\t\t<li class='nav-item mr-2'>\n\t\t\t\t\t\t\t<div class='form-row align-items-center'>\n\t\t\t\t\t\t\t\t<div class='col-auto my-1' style='width: 80px;'>\n\t\t\t\t\t\t\t\t\t<select class='custom-select'\n\t\t\t\t\t\t\t\t\t\tstyle='background-color: inherit; border: none; padding: 0; height: 1.1em; font-size: 0.9em;'\n\t\t\t\t\t\t\t\t\t\tonInput={this.changeLanguage}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<option value='no' selected={language === 'no'}>🇳🇴 NO</option>\n\t\t\t\t\t\t\t\t\t\t<option value='en' selected={language === 'en'}>🇬🇧 EN</option>\n\t\t\t\t\t\t\t\t\t\t<option value='es' selected={language === 'es'}>🇪🇸 ES</option>\n\t\t\t\t\t\t\t\t\t\t<option value='de' selected={language === 'de'}>🇩🇪 DE</option>\n\t                                    <option value='fr' selected={language === 'fr'}>🇫🇷 FR</option>\n\t                                    <option value='ru' selected={language === 'ru'}>🇷🇺 RU</option>\n\t                                    <option value='se' selected={language === 'se'}>🇸🇪 SE</option>\n\t\t\t\t\t\t\t\t\t</select>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t\t<li class='nav-item d-block d-lg-none'>\n\t\t\t\t\t\t\t<Link className='nav-link' activeClassName={'active'}\n\t\t\t\t\t\t\t\tdata-name='main'\n\t\t\t\t\t\t\t\tonClick={this.toggleDarkmode}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<i class={`${darkmode ? 'fas text-warning' : 'far'} fa-moon`} /> <Text id='header.darkmode'>Nattmodus</Text>\n\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t\t<li class='nav-item mr-2 d-none d-lg-block'>\n\t\t\t\t\t\t\t<button class='btn btn-link'\n\t\t\t\t\t\t\t\tdata-name='profile'\n\t\t\t\t\t\t\t\tonClick={this.toggleDarkmode}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<i class={`${darkmode ? 'fas text-warning' : 'far'} fa-moon`} />\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t\t{/* <li class='nav-item ml-auto d-none d-lg-block'>\n\t\t\t\t\t\t\t<form class='form-inline my-2 my-lg-0'>\n\t\t\t\t\t\t\t\t<Localizer>\n\t\t\t\t\t\t\t\t\t<input class='form-control form-control-sm mr-sm-2' type='search' placeholder={<Text id='header.search-placeholder'>Søk etter det meste...</Text>}\n\t\t\t\t\t\t\t\t\t\tvalue={searchText}\n\t\t\t\t\t\t\t\t\t\tonInput={linkState(this, 'searchText')}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</Localizer>\n\t\t\t\t\t\t\t\t<button class='btn btn-sm btn-outline-success my-2 my-sm-0' type='button'\t\n\t\t\t\t\t\t\t\t\tonClick={this.search}\n\t\t\t\t\t\t\t\t><Text id='header.search'>Søk</Text></button>\n\t\t\t\t\t\t\t</form>\n\t\t\t\t\t\t</li> */}\n\t\t\t\t\t</ul>\n\n\t\t\t\t    \n\n\t\t\t\t</div>\n\t\t\t</nav>\n\t\t);\n\t}\n}\n\nexport default Navigation;\n","import { h, Component } from 'preact';\nimport { observer } from 'mobx-preact';\n\nconst initialState = {\n};\n\n@observer\nclass RaceText extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            ...initialState,\n        };\n    }\n\n    render() {\n\t\tconst { appState } = this.props.stores;\n\t\tconst { text } = this.props;\n\t\tconst { darkmode, language = 'en' } = appState;\n\n        let finalText = text;\n\n        const regex = new RegExp(`/<${language}>(.*?)<\\/${language}>/`);\n        const parsedText = text.replace(regex, '$1');\n        if (parsedText) {\n            finalText = text;\n        }\n\n\t\treturn (\n\t\t\t<>\n                {finalText}\n\t\t\t</>\n\t\t);\n\t}\n}\n\nexport default RaceText;\n","import { h, Component } from 'preact';\nimport { useEffect } from \"preact/hooks\";\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport { Text, Localizer } from 'preact-i18n';\n\nimport Header from './header';\nimport Submenu from './submenu';\nimport RaceHeader from './raceheader';\nimport RaceText from './raceText';\n\nimport mu from '../../../lib/musher-util';\nconst MARGIN_TOP = mu.marginTop(true, true);\nconst MARGIN_BOTTOM = mu.marginBottom();\n\nfunction asFacebookUser(input = '') {\n\tif (input.match(/facebook.com/)) {\n\t\tif (input.match(/^http/)) {\n\t\t\treturn input;\n\t\t}\n\t\treturn `https://${input}`;\n\t}\n\treturn `https://facebook.com/${input}`;\n}\n\nfunction asInstagramUser(input) {\n\tif (input.match(/instagram.com/)) {\n\t\tif (input.match(/^http/)) {\n\t\t\treturn input;\n\t\t}\n\t\treturn `https://${input}`;\n\t}\n\treturn `https://instagram.com/${input}`;\n}\n\nconst initialState = {\n\tisLoading: false,\n\temail: '',\n\tsubmenu: 'ads',\n\tjwtToken: util.getJwtToken(),\n\n\treloadInSec: null,\n\treloadLastEpoch: null,\n\treloadIsActive: false,\n};\n\nconst RELOAD_INTERVAL_IN_SEC = 60;\n\n@observer\nclass PublicRaceDetail extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            ...initialState,\n        };\n\t\tthis.updateTimer = {};\n    }\n\n\tasync loadRace(props = this.props) {\n\t\tthis.setState({ isLoading: true });\n\t\tconst { raceStore } = props.stores;\n\t\tconst { raceid } = props;\n\n\t\tawait raceStore.load(raceid);\n\t\tconst { race } = raceStore;\n\t\tconst allTeamIds = race.classes.map((currentClass) => {\n\t\t\tif (currentClass.contestants) {\n\t\t\t\treturn currentClass.contestants.map(musher => musher.team)\n\t\t\t}\n\t\t});\n\t\tif (allTeamIds.length > 0) {\n\t\t\tawait raceStore.loadTeams(allTeamIds.join(','));\n\t\t\tawait raceStore.loadWorkoutSummary(allTeamIds.join(','), raceid);\n\t\t}\n\t\t// Load all images\n\t\traceStore.getAllImages();\n\n\t\tconst reloadLastEpoch = Math.floor(new Date().getTime() / 1000);\n\t\tthis.setState({\n\t\t\treloadIsActive: true,\n\t\t\treloadLastEpoch,\n\t\t}, () => this.tickReloadTimeer());\n\t\t// Set reload timer\n\t\tclearTimeout(this.updateTimer.reload);\n\t\tthis.updateTimer.reload = setTimeout(async () => {\n\t\t\tconst reloadLastEpoch = Math.floor(new Date().getTime() / 1000);\n\t\t\tthis.setState({ reloadLastEpoch });\n\t\t\tthis.loadRace();\n\t\t}, RELOAD_INTERVAL_IN_SEC * 1000);\n\n\t\tthis.setState({ isLoading: false });\n\t}\n\n\ttickReloadTimeer() {\n\t\tconst { reloadIsActive, reloadLastEpoch } = this.state;\n        if (reloadIsActive) {\n\t\t\tconst now = Math.floor(new Date().getTime() / 1000);\n\t\t\tconst reloadInSec = RELOAD_INTERVAL_IN_SEC - (now - reloadLastEpoch);\n\t\t\tthis.setState({ reloadInSec });\n\t\t\tclearTimeout(this.updateTimer.tick);\n\t\t\tthis.updateTimer.tick = setTimeout(() => this.tickReloadTimeer(), 1000);\n        }\n\t\treturn false;\n    }\n\n\tcopyText = (e) => {\n\t\te.target.select();\n\t    document.execCommand('copy');\n\t}\n\n\tcomponentWillUnmount() {\n\t\tclearTimeout(this.updateTimer.reload);\n\t\tclearTimeout(this.updateTimer.tick);\n\t}\n\n\tcomponentDidMount() {\n\t\tthis.loadRace();\n\t}\n\n\tcomponentWillReceiveProps(nextProps) {\n\t\tthis.loadRace(nextProps);\n\t}\n\n\trender() {\n\t\tconst { appState, raceStore, userStore } = this.props.stores;\n\t\tconst { user = {}, isAdmin } = userStore;\n\t\tconst { raceid, path } = this.props;\n\t\tconst { darkmode, language = 'en' } = appState;\n\t\tconst { race, teamList, images } = raceStore;\n\n\t\tconst { reloadInSec } = this.state;\n\t\tconst reloadPercent = Math.floor(util.normalizeBetween(reloadInSec, 0, RELOAD_INTERVAL_IN_SEC, 0, 100))\n\n\t\treturn (\n\t\t\t<>\n\t\t\t\t<Header stores={this.props.stores} />\n\n\t\t\t\t<div class='container-fluid ' style={`margin-bottom: ${MARGIN_BOTTOM}; margin-top: ${MARGIN_TOP};`}>\n\t\t\t\t\t<Submenu stores={this.props.stores} path={path} raceid={raceid} />\n\n\t\t\t\t\t<div class='row border-bottom '>\n\t\t\t\t\t\t<div class='col-12'>\n\n\t\t\t\t\t\t\t<Localizer>\n\t\t\t\t\t\t\t\t<RaceHeader stores={this.props.stores} title={<Text id='races.photos'>Bilder</Text>} />\n\t\t\t\t\t\t\t</Localizer>\n\n\t\t\t\t\t\t\t{reloadInSec >= 0 && <>\n\t\t\t\t\t\t\t\t<div class='progress fixed-top' style='height: 2px;'>\n\t\t\t\t\t\t\t\t\t<div class='progress-bar' role='progressbar' style={`width: ${reloadPercent}%;`} aria-valuenow={reloadPercent} aria-valuemin='0' aria-valuemax='100' />\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</>}\n\n\t\t\t\t\t\t\t{user.email && <div class='alert alert-primary' role='alert'>\n\t\t\t\t\t\t\t\t{language === 'no' && <>\n\t\t\t\t\t\t\t\t\tBildene hentes direkte fra The Musher appen.<br />\n\t\t\t\t\t\t\t\t\t<strong>For at bildene skal dukke opp må de:</strong>\n\t\t\t\t\t\t\t\t\t<ul>\n\t\t\t\t\t\t\t\t\t\t<li>Ligge på teamet som er påmeldt.</li>\n\t\t\t\t\t\t\t\t\t\t<li>Ligge på treningsøktene som er med i konkurransen.</li>\n\t\t\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t\t\t</>}\n\t\t\t\t\t\t\t\t{language === 'en' && <>\n\t\t\t\t\t\t\t\t\tBildene hentes direkte fra The Musher appen.<br />\n\t\t\t\t\t\t\t\t\t<strong>For at bildene skal dukke opp må de:</strong>\n\t\t\t\t\t\t\t\t\t<ul>\n\t\t\t\t\t\t\t\t\t\t<li>Ligge på teamet som er påmeldt.</li>\n\t\t\t\t\t\t\t\t\t\t<li>Ligge på treningsøktene som er med i konkurransen.</li>\n\t\t\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t\t\t</>}\n\t\t\t\t\t\t\t</div>}\n\n\t\t\t\t\t\t\t<div class='p-3 my-4 bg-light'>\n\t\t\t\t\t\t\t\t<ul>\n\t\t\t\t\t\t\t\t\t{[1, 2, 3, 4].map(idx => <>\n\t\t\t\t\t\t\t\t\t\t{race[`mediaURL${idx}`] ? <li>\n\t\t\t\t\t\t\t\t\t\t\t<a href={race[`mediaURL${idx}`]} target='_blank' rel='noreferrer' native>\n\t\t\t\t\t\t\t\t\t\t\t\t{race[`mediaText${idx}`] ? race[`mediaText${idx}`] : <>Se bilder her</>} <i class='fas fa-chevron-circle-right' />\n\t\t\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t\t</li> : <></>}\t\t\t\n\t\t\t\t\t\t\t\t\t</>)}\n\t\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t{(!images || images.length === 0) && <div class='d-flex justify-content-center my-5 py-5'>\n\t\t\t\t\t\t\t\t<div class='spinner-border text-primary' role='status'>\n\t\t\t\t\t\t\t\t\t<span class='sr-only'>Loading...</span>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>}\n\n\t\t\t\t\t\t\t<div class='row'>\n\t\t\t\t\t\t\t\t{images && images.map((image) => {\n\t\t\t\t\t\t\t\t\tconst imageLink = image.s3LargeLink || image.s3MediumLink;\n\t\t\t\t\t\t\t\t\tif (!imageLink) {\n\t\t\t\t\t\t\t\t\t\treturn (<></>);\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\tconst photoByline = image.title ? `${image.title}\\n${image.body}\\n` : `Photo by: ${image.musher.firstname || ''} ${image.musher.lastname || ''} / ${image.currentTeam.name || ''} / ${image.musher.sportsClub || ''}`;\n\t\t\t\t\t\t\t\t\tconst tagLine = `${race.tag ? race.tag.split(',').map(tag => `#${tag}`).join(' ') : ''}`;\n\t\t\t\t\t\t\t\t\tconst moreInfoFacebook = `All about the race: https://homerunrace.no/index#/race/${race.id}`;\n\t\t\t\t\t\t\t\t\tconst moreInfoInstagram = `All about the race: homerunrace.no`;\n\t\t\t\t\t\t\t\t\tconst facebookText = `${race.title}\n\n${photoByline}\n\n${tagLine}\n\n${race.tagFacebookUsers ? race.tagFacebookUsers.split(',').map(usr => `@${usr}`).join(' ') : ''} ${image.musher.facebook ? `@${image.musher.facebook}` : ''}\n\n${moreInfoFacebook}\n\n`;\n\t\t\t\t\t\t\t\t\tconst instagramText = `${race.title}\n\n${photoByline}\n\n${tagLine}\n\n${race.tagInstagramUsers ? race.tagInstagramUsers.split(',').map(usr => `@${usr}`).join(' ') : ''} ${image.musher.instagram ? `@${image.musher.instagram}` : ''}\n\n${moreInfoInstagram}\n\n`;\n\t\t\t\t\t\t\t\t\treturn (<>\n\t\t\t\t\t\t\t\t\t\t<div class='col-12 col-sm-6 col-md-4 col-lg-3 mb-4'>\n\t\t\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\t\t\tclass={`text-center border rounded-lg`}\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t<img src={imageLink} class='img-fluid' />\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t<small class='text-muted float-right'>{util.formatDate(image.createdDate, { locale: language, hour12: false, hour: '2-digit', minute: '2-digit' })}</small>\n\t\t\t\t\t\t\t\t\t\t\t{image.title}\n\t\t\t\t\t\t\t\t\t\t\t{image.musher.firstname} {image.musher.lastname}<br />\n\t\t\t\t\t\t\t\t\t\t\t<span class='text-muted'>\n\t\t\t\t\t\t\t\t\t\t\t\t{image.currentTeam.name}\n\t\t\t\t\t\t\t\t\t\t\t\t{image.body}\n\t\t\t\t\t\t\t\t\t\t\t</span><br />\n\t\t\t\t\t\t\t\t\t\t\t{image.musher.sportsClub && <><small class='text-muted'>{image.musher.sportsClub}</small><br /></>}\n\n\t\t\t\t\t\t\t\t\t\t\t{isAdmin && <div class='p-2 bg-light border rounded-lg'>\n\t\t\t\t\t\t\t\t\t\t\t\t<small>\n\t\t\t\t\t\t\t\t\t\t\t\t\tAdmin copy-paste:<br />\n\t\t\t\t\t\t\t\t\t\t\t\t\t<small class='text-muted float-right'><a href={image.s3XXLargeLink} rel='noreferrer' native target='_blank'>Download</a></small>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<small class='text-muted'>Facebook:</small><br />\n\t\t\t\t\t\t\t\t\t\t\t\t\t<textarea style='width: 100%; font-size: 0.8em;' value={facebookText} onClick={this.copyText} />\n\t\t\t\t\t\t\t\t\t\t\t\t\t<small class='text-muted float-right'><a href={image.s3XXLargeLink} rel='noreferrer' native target='_blank'>Download</a></small>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<small class='text-muted'>Instagram:</small><br />\n\t\t\t\t\t\t\t\t\t\t\t\t\t<textarea style='width: 100%; font-size: 0.8em;' value={instagramText} onClick={this.copyText} />\n\t\t\t\t\t\t\t\t\t\t\t\t</small>\n\t\t\t\t\t\t\t\t\t\t\t</div>}\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</>);\n\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</>\n\t\t);\n\t}\n}\n\nexport default PublicRaceDetail;\n"],"sourceRoot":""}