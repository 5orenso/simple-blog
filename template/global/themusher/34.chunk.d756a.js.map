{"version":3,"sources":["webpack:///./routes/public/race/edit.js","webpack:///./routes/public/race/style.css","webpack:///./routes/public/race/header.js","webpack:///./components/form/files.js","webpack:///./components/form/images.js","webpack:///./components/form/dragNdropFileupload.js"],"names":["MARGIN_TOP","mu","marginTop","MARGIN_TOP_BACK","marginTopBack","MARGIN_BOTTOM","marginBottom","initialState","isLoading","fieldSorter","fields","a","b","map","o","dir","substring","reduce","p","n","Input","observer","handleImageErrored","e","image","target","onerror","setTimeout","src","Date","removeImage","props","stores","raceStore","id","race","name","parentElement","dataset","removeMainImage","updateField","field","value","setDateToNow","util","isoDate","undefined","setTimeToNow","isoTime","type","setValue","setRightValue","rightValueReal","render","displayValue","this","saved","rows","min","max","step","title","icon","help","onInput","rightValue","required","toJS","maxValue","secToHms","class","for","images","img","s3SmallLink","onError","onClick","data-name","object","autoOpen","style","aria-describedby","data-id","data-field","checked","data-value","insertValue","data-type","Component","InputNew","updateObjectKeyValue","newRace","PublicRaceEdit","elementtype","updateFieldValue","parseInt","datatype","skipTimer","newValue","localObjectValue","Array","isArray","split","parseFloat","doUpdateField","clearTimeout","updateTimer","insertNewRace","insert","data","route","addRaceClass","addClass","raceid","newClass","state","newRaceClass","setState","addRaceArticle","addArticle","newArticle","newRaceArticle","addRaceUserImage","addUserImage","newUserImage","newRaceUserImage","updateUserImageUpload","removeRaceClass","removeClass","classId","removeRaceArticle","removeArticle","articleId","removeRaceUserImage","removeUserImage","userImageId","editRaceClass","raceClassId","ucfirst","editClass","editRaceArticle","raceArticleId","editArticle","editRaceUserImage","raceUserImageId","editUserImage","addCheckpoint","classid","newCheckpoint","checkpoint","editCheckpoint","checkpointId","checkpointid","localUpdateSignup","deleteCheckpoint","raceClassCheckpointDelete","back","createNew","loadRace","load","saveField","componentDidMount","userStore","isAdmin","onclick","idx","classes","currentClass","JSON","stringify","checkpoints","slice","sort","currentCheckpoint","indexOf","data-classid","data-checkpointid","placeholder","distanceFromPrev","estSpeed","filter","cp","position","lat","lng","linkstate","module","exports","menu","profile","main","searchText","Navigation","toggleDropdown","menuName","parentNode","toggleDarkmode","appState","toggleViewmode","mode","reloadApp","window","location","reload","adminLoadAll","getInfo","changeLanguage","lang","console","log","user","email","setLanguage","language","search","darkmode","notifications","read","href","height","className","activeClassName","selected","Files","handleAddImage","file","files","uploadStatus","before","after","apiUrl","width","Images","addToImages","push","DragNDropFileupload","dropRef","createRef","handleDrag","preventDefault","stopPropagation","handleDragIn","dragCounter","dataTransfer","items","length","drag","handleDragOut","handleDrop","i","l","readLocalFile","handleAddFiles","event","el","handleEvent","handleUpload","fileObject","isFunction","formData","FormData","append","uploadMeta","progress","xhr","XMLHttpRequest","upload","addEventListener","updateProgress","fileObj","uploadDone","open","getApiServer","setRequestHeader","getJwtToken","send","filename","uploadedFilesData","imageNum","Promise","resolve","reject","reader","FileReader","error","photo","readAsDataURL","lengthComputable","percentComplete","loaded","total","readyState","status","parse","responseText","addFileToUpload","fileInput","loadingProgress","uploadedFiles","div","current","click","componentWillUnmount","removeEventListener","ref","border","backgroundColor","top","bottom","left","right","zIndex","textAlign","color","fontSize","multiple","onchange","c","Object","keys","key","isImage","match","result","formatBytes","role","aria-valuenow","aria-valuemin","aria-valuemax","children"],"mappings":"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","file":"34.chunk.d756a.js","sourcesContent":["import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport { toJS } from 'mobx';\nimport { Text, Localizer } from 'preact-i18n';\nimport { route } from 'preact-router';\nimport linkstate from 'linkstate';\n\nimport Header from './header';\n\nimport mu from '../../../lib/musher-util';\n\nimport Images from '../../../components/form/images';\nimport Files from '../../../components/form/files';\n\nconst MARGIN_TOP = mu.marginTop(true, true);\nconst MARGIN_TOP_BACK = mu.marginTopBack(false);\nconst MARGIN_BOTTOM = mu.marginBottom();\n\nconst AVG_SPEED = 12.5;\n\nconst initialState = {\n\tisLoading: false,\n};\n\nconst fieldSorter = (fields) => (a, b) => fields.map(o => {\n    let dir = 1;\n    if (o[0] === '-') { dir = -1; o=o.substring(1); }\n    return a[o] > b[o] ? dir : a[o] < b[o] ? -(dir) : 0;\n}).reduce((p, n) => p ? p : n, 0);\n\n@observer\nclass Input extends Component {\n    handleImageErrored = (e) => {\n        const image = e.target;\n        image.onerror = null;\n        setTimeout(() => {\n            image.src += `?${new Date()}`;\n        }, 1000);\n    }\n\n    removeImage = async (e) => {\n        const { raceStore } = this.props.stores;\n        const { race } = this.props;\n        const imageName = e.target.parentElement.dataset.name || e.target.dataset.name;\n        raceStore.removeImage({\n            id: race.id,\n            name: imageName,\n        });\n    }\n\n    removeMainImage = () => {\n        const { race, field, updateField } = this.props;\n        updateField({ id: race.id, field, value: {} });\n    }\n\n\tsetDateToNow = () => {\n        const { field, updateField, race } = this.props;\n        const value = util.isoDate(undefined, false, false, true);\n        // updateFieldValue = ({ id, field, value, datatype, elementtype, type, isNew = false, skipTimer = false }) => {\n        updateField({ id: race.id, field, value });\n    }\n\n    setTimeToNow = () => {\n        const { field, updateField, race } = this.props;\n        const value = util.isoTime();\n        // updateFieldValue = ({ id, field, value, datatype, elementtype, type, isNew = false, skipTimer = false }) => {\n        updateField({ id: race.id, field, value, type: 'time' });\n    }\n\n    setValue = (e) => {\n        const value = e.target.parentElement.dataset.value || e.target.dataset.value;\n        if (value) {\n            const { field, updateField, race } = this.props;\n            // updateFieldValue = ({ id, field, value, datatype, elementtype, type, isNew = false, skipTimer = false }) => {\n            updateField({ id: race.id, field, value });\n        }\n    }\n\n    setRightValue = () => {\n        const { field, updateField, race, rightValueReal } = this.props;\n        updateField({ id: race.id, field, value: rightValueReal });\n    }\n\n    render() {\n        // const { saved, dog, type = 'text', datalist = [], min, max, step, field, title, icon, help, onInput, updateField } = this.props;\n        const { saved, race, type = 'text', rows, field, min, max, step, title, icon, help, onInput, updateField, rightValue, required } = this.props;\n\t\tlet value = toJS(race[field]);\n        let maxValue = max;\n\t\tif (type === 'date') {\n            if (value) {\n                value = util.isoDate(race[field], false, false, true);\n            }\n            if (max === 'today') {\n                maxValue = util.isoDate(undefined, false, false, true);\n            }\n        }\n        if (type === 'time') {\n            if (value) {\n                value = util.isoTime(race[field]);\n            }\n        }\n        let displayValue;\n        let insertValue;\n        if (field === 'duration' || field === 'rest') {\n            displayValue = util.secToHms(value, true);\n        }\n\n        if (type === 'image') {\n            return (\n                <div class={`form-group ${saved[`${field}.${race.id}`] ? 'is-valid' : ''}`}>\n                    <label for={`${field}Input`}>{icon && <i class={`${icon} text-muted`} />} {title}</label>\n\n                    <div class='container-fluid'>\n                        <div class='row'>\n                            {race.images && race.images.map(img => (\n                                <div class='col-3 p-1'>\n                                    <img src={img.s3SmallLink} class='img-fluid' onError={this.handleImageErrored} />\n                                    <button class='btn btn-sm btn-link'\n                                        onClick={this.removeImage}\n                                        data-name={img.name}\n                                    ><i class='fas fa-trash' /> Del</button>\n                                </div>\n                            ))}\n                        </div>\n                    </div>\n                    <Images saved={saved} object={race} field={field} updateField={updateField} autoOpen={false} />\n                    {saved[`${field}.${race.id}`] ? <div class={`valid-feedback`} style='display: block;'><Text id='race.changes-saved'>Endringene er lagret</Text></div> :\n                        <small id={`${field}Help`} class='form-text text-muted'>{help}</small>}\n                </div>\n            );\n        }\n        if (type === 'file') {\n            return (\n                <div class={`form-group ${saved[`${field}.${race.id}`] ? 'is-valid' : ''}`}>\n                    <label for={`${field}Input`}>{icon && <i class={`${icon} text-muted`} />} {title}</label>\n                    <Files saved={saved} object={race} field={field} updateField={updateField} />\n                    {saved[`${field}.${race.id}`] ? <div class={`valid-feedback`} style='display: block;'><Text id='race.changes-saved'>Endringene er lagret</Text></div> :\n                        <small id={`${field}Help`} class='form-text text-muted'>{help}</small>}\n                </div>\n            );\n        }\n        if (type === 'textarea') {\n            return (\n                <div class={`form-group ${saved[`${field}.${race.id}`] ? 'is-valid' : ''}`}>\n                    <label for={`${field}Input`}>{icon && <i class={`${icon} text-muted`} />} {title}</label>\n                    <textarea type={type} class={`form-control ${saved[`${field}.${race.id}`] ? 'is-valid' : ''}`} id={`${field}Input`} aria-describedby={`${field}Help`}\n                        value={value}\n                        rows={rows}\n                        data-id={race.id}\n                        data-field={field}\n                        onInput={onInput}\n                    />\n                    {saved[`${field}.${race.id}`] ? <div class={`valid-feedback`} style='display: block;'><Text id='race.changes-saved'>Endringene er lagret</Text></div> :\n                        <small id={`${field}Help`} class='form-text text-muted'>{help}</small>}\n                </div>\n            );\n        }\n\t\tif (type === 'toggle') {\n            return (\n                <div class={`form-group ${saved[`${field}.${race.id}`] ? 'is-valid' : ''}`}>\n                    <label for={`${field}Input`}>{icon && <i class={`${icon} text-muted`} />} {title}</label>\n                    <div class='custom-control custom-switch'>\n                        <input type='checkbox'\n                            class='custom-control-input'\n                            id={`${field}Input`}\n                            value={value === 1 ? 0 : 1}\n                            data-id={race.id}\n                            data-field={field}\n                            onInput={onInput}\n                            checked={value == 1 ? 'checked' : ''}\n                        />\n                        <label class='custom-control-label' for={`${field}Input`} />\n                    </div>\n                    {saved[`${field}.${race.id}`] ? <div class={`valid-feedback`} style='display: block;'><Text id='races.changes-saved'>Endringene er lagret</Text></div> :\n                        <small id={`${field}Help`} class='form-text text-muted'>{help}</small>}\n                </div>\n            );\n        }\n\n        return (\n            <div class={`form-group ${saved[`${field}.${race.id}`] ? 'is-valid' : ''}`}>\n                {type === 'date' && <span class='float-right text-muted font-weight-lighter' onClick={this.setDateToNow}>I dag <i class='far fa-check-circle' /></span>}\n                {type === 'time' && <span class='float-right text-muted font-weight-lighter' onClick={this.setTimeToNow}>Nå <i class='far fa-check-circle' /></span>}\n                {rightValue && <span class='float-right text-muted font-weight-lighter' onClick={this.setRightValue}>{rightValue}</span>}\n\n\n                <label for={`${field}Input`}>{icon && <i class={`${icon} text-muted`} />} {title}</label>\n\t\t\t\t{displayValue && <span class='float-right'>\n                    <strong onClick={this.setValue} data-value={insertValue}>{displayValue}</strong>\n                </span>}\n                <input type={type} class={`form-control ${saved[`${field}.${race.id}`] ? 'is-valid' : ''} ${required ? (value ? 'border-success' : 'border-danger') : ''}`} id={`${field}Input`} aria-describedby={`${field}Help`}\n                    value={value}\n\t\t\t\t\tmin={min}\n                    max={maxValue}\n                    step={step}\n                    data-id={race.id}\n                    data-field={field}\n                    data-type={type}\n                    onInput={onInput}\n                />\n                {saved[`${field}.${race.id}`] ? <div class={`valid-feedback`} style='display: block;'><Text id='race.changes-saved'>Endringene er lagret</Text></div> :\n                    <small id={`${field}Help`} class='form-text text-muted'>{help}</small>}\n            </div>\n        );\n    }\n}\n\n@observer\nclass InputNew extends Component {\n    onInput = (e) => {\n        const { field } = this.props;\n        const value = e.target.value;\n        const { raceStore } = this.props.stores;\n        // console.log('adStore.newAd', adStore.newAd);\n        raceStore.updateObjectKeyValue('newRace', field, value);\n    }\n\n    render() {\n        const { field, icon, title, help } = this.props;\n        const { raceStore } = this.props.stores;\n        const { newRace } = raceStore;\n        return (\n            <div class='form-group'>\n                <label for={`${field}Input`}>{icon && <i class={`${icon} text-muted`} />} {title}</label>\n                <input type='text' class={`form-control`} id={`${field}Input`} aria-describedby={`${field}Help`}\n                    onInput={this.onInput}\n                    value={newRace[field]}\n                />\n                <small id={`${field}Help`} class='form-text text-muted'>{help}</small>\n            </div>\n        );\n    }\n}\n\n@observer\nclass PublicRaceEdit extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            ...initialState,\n\t\t\tnewRaceClass: {},\n\t\t\tnewRaceArticle: {},\n\t\t\tnewRaceUserImage: {},\n\t\t\tcheckpoint: {},\n        };\n\t\tthis.updateTimer = {};\n    }\n\n\tasync loadRace(props = this.props) {\n\t\tthis.setState({ isLoading: true });\n\t\tconst { raceStore } = this.props.stores;\n\t\tawait raceStore.load(props.raceid);\n\t}\n\n    updateField = (e) => {\n        const { id, field, type, elementtype } = e.target.dataset;\n        const value = e.target.value;\n        this.updateFieldValue({ id: parseInt(id, 10), field, value, type, elementtype });\n    }\n\n    updateFieldValue = ({ id, field, value, datatype, elementtype, type, skipTimer = false }) => {\n        const { raceStore } = this.props.stores;\n        const { race } = raceStore;\n        let newValue = value;\n        let localObjectValue = value;\n\t\tif (type === 'time') {\n\t\t\tnewValue = `${util.isoDate(race[field], false, false, true)} ${value}`;\n\t\t\tlocalObjectValue = newValue;\n\t\t}\n\n        if (field === 'images') {\n            if (Array.isArray(race.images) && Array.isArray(value)) {\n                localObjectValue = [...race.images, ...value];\n            }\n        }\n\n        if (datatype === 'array' && !Array.isArray(value)) {\n            if (elementtype === 'number') {\n                newValue = value.split(',').map(e => parseFloat(e) || e);\n            } else  {\n                newValue = value.split(',');\n            }\n            // console.log('updateFieldValue', id, field, value, datatype, elementtype);\n        }\n\n        raceStore.updateField(id, field, localObjectValue);\n        if (skipTimer) {\n            this.doUpdateField(id, field, newValue);\n        } else {\n            clearTimeout(this.updateTimer[field]);\n            this.updateTimer[field] = setTimeout(async () => {\n                this.doUpdateField(id, field, newValue);\n            }, 1500);\n        }\n    }\n\n    async doUpdateField(id, field, value) {\n        const { raceStore } = this.props.stores;\n        await raceStore.saveField(id, field, value);\n    }\n\n    insertNewRace = async () => {\n        const { raceStore } = this.props.stores;\n\t\tconst { newRace } = raceStore;\n\t\tconst response = await raceStore.insert({ ...newRace });\n\t\tconst { id } = response.data;\n\t\troute(`/race/${id}`);\n\t}\n\n\taddRaceClass = async () => {\n\t\tconst { raceid } = this.props;\n        const { raceStore } = this.props.stores;\n\t\tconst { newRaceClass } = this.state;\n\t\tawait raceStore.addClass({ id: raceid, newClass: newRaceClass });\n\t\tthis.setState({\n\t\t\tnewRaceClass: {},\n\t\t});\n\t}\n\n\thandleImageErrored = (e) => {\n        const image = e.target;\n        image.onerror = null;\n        setTimeout(() => {\n            image.src += `?${new Date()}`;\n        }, 1000);\n    }\n\n\taddRaceArticle = async () => {\n\t\tconst { raceid } = this.props;\n        const { raceStore } = this.props.stores;\n\t\tconst { newRaceArticle } = this.state;\n\t\tawait raceStore.addArticle({ id: raceid, newArticle: newRaceArticle });\n\t\tthis.setState({\n\t\t\tnewRaceArticle: {},\n\t\t});\n\t}\n\n\taddRaceUserImage = async () => {\n\t\tconst { raceid } = this.props;\n        const { raceStore } = this.props.stores;\n\t\tconst { newRaceUserImage } = this.state;\n\t\tawait raceStore.addUserImage({ id: raceid, newUserImage: newRaceUserImage });\n\t\tthis.setState({\n\t\t\tnewRaceUserImage: {},\n\t\t});\n\t}\n\n\tupdateUserImageUpload = ({ field, value }) => {\n\t\t// updateField({ id: object.id, field: 'images', value: images, skipTimer: true });\n\t\tconst { newRaceUserImage } = this.state;\n\t\tnewRaceUserImage[field] = value;\n\t\tthis.setState({ newRaceUserImage });\n\t}\n\n\tremoveRaceClass = async (e) => {\n\t\tconst id = e.target.parentElement.dataset.id || e.target.dataset.id;\n\t\tconst { raceid } = this.props;\n        const { raceStore } = this.props.stores;\n\t\tawait raceStore.removeClass({\n\t\t\tid: raceid,\n\t\t\tclassId: id,\n\t\t});\n\t}\n\n\tremoveRaceArticle = async (e) => {\n\t\tconst id = e.target.parentElement.dataset.id || e.target.dataset.id;\n\t\tconst { raceid } = this.props;\n        const { raceStore } = this.props.stores;\n\t\tawait raceStore.removeArticle({\n\t\t\tid: raceid,\n\t\t\tarticleId: id,\n\t\t});\n\t}\n\n\tremoveRaceUserImage = async (e) => {\n\t\tconst id = e.target.parentElement.dataset.id || e.target.dataset.id;\n\t\tconst { raceid } = this.props;\n        const { raceStore } = this.props.stores;\n\t\tawait raceStore.removeUserImage({\n\t\t\tid: raceid,\n\t\t\tuserImageId: id,\n\t\t});\n\t}\n\n\teditRaceClass = async (e) => {\n\t\tconst { id, field } = e.target.dataset;\n\t\tconst { value } = e.target;\n\t\tconst { raceid } = this.props;\n\t\tconst { raceStore } = this.props.stores;\n\t\tconst data = {\n\t\t\traceClassId: id,\n\t\t\t[`raceClass${util.ucfirst(field)}`]: value,\n\t\t};\n\t\tclearTimeout(this.updateTimer[`${raceid}-${id}-${field}`]);\n\t\tthis.updateTimer[`${raceid}-${id}-${field}`] = setTimeout(async () => {\n\t\t\traceStore.editClass({\n\t\t\t\tid: raceid,\n\t\t\t\tdata,\n\t\t\t});\n\t\t}, 1500);\n\t}\n\n\teditRaceArticle = async (e) => {\n\t\tconst { id, field } = e.target.dataset;\n\t\tconst { value } = e.target;\n\t\tconst { raceid } = this.props;\n\t\tconst { raceStore } = this.props.stores;\n\t\tconst data = {\n\t\t\traceArticleId: id,\n\t\t\t[`raceArticle${util.ucfirst(field)}`]: value,\n\t\t};\n\t\tclearTimeout(this.updateTimer[`${raceid}-${id}-${field}`]);\n\t\tthis.updateTimer[`${raceid}-${id}-${field}`] = setTimeout(async () => {\n\t\t\traceStore.editArticle({\n\t\t\t\tid: raceid,\n\t\t\t\tdata,\n\t\t\t});\n\t\t}, 1500);\n\t}\n\n\teditRaceUserImage = async (e) => {\n\t\tconst { id, field } = e.target.dataset;\n\t\tconst { value } = e.target;\n\t\tconst { raceid } = this.props;\n\t\tconst { raceStore } = this.props.stores;\n\t\tconst data = {\n\t\t\traceUserImageId: id,\n\t\t\t[`raceUserImage${util.ucfirst(field)}`]: value,\n\t\t};\n\t\tclearTimeout(this.updateTimer[`${raceid}-${id}-${field}`]);\n\t\tthis.updateTimer[`${raceid}-${id}-${field}`] = setTimeout(async () => {\n\t\t\traceStore.editUserImage({\n\t\t\t\tid: raceid,\n\t\t\t\tdata,\n\t\t\t});\n\t\t}, 1500);\n\t}\n\n\taddCheckpoint = async (e) => {\n\t\tconst { raceStore } = this.props.stores;\n        const { checkpoint } = this.state;\n\t\tconst { race } = raceStore;\n        const raceid = race.id;\n\t\tconst { classid } = e.target.dataset;\n\n\t\tawait raceStore.addCheckpoint({\n\t\t\tid: raceid,\n\t\t\tclassId: classid,\n\t\t\tnewCheckpoint: {\n\t\t\t\t ...checkpoint\n\t\t\t}\n        });\n\t}\n\n\teditCheckpoint = (e) => {\n        const { raceStore } = this.props.stores;\n\t\tconst { race } = raceStore;\n        const raceid = race.id;\n\n        const field = e.target.id;\n        const value = e.target.value;\n        const { classid, checkpointid } = e.target.dataset;\n\n        const data = {\n\t\t\traceClassId: classid,\n            checkpointId: checkpointid,\n\t\t\t[`raceClassCheckpoint${util.ucfirst(field)}`]: value,\n\t\t};\n\t\tclearTimeout(this.updateTimer[field]);\n\t\tthis.updateTimer[field] = setTimeout(async () => {\n\t\t\traceStore.editClass({\n\t\t\t\tid: raceid,\n\t\t\t\tdata,\n\t\t\t});\n            raceStore.localUpdateSignup(field, value);\n\t\t}, 1500);\n    }\n\n\tdeleteCheckpoint = (e) => {\n        const { raceStore } = this.props.stores;\n\t\tconst { race } = raceStore;\n        const raceid = race.id;\n\n        const field = e.target.id;\n        const value = e.target.value;\n        const { classid, checkpointid } = e.target.dataset;\n\n        const data = {\n\t\t\traceClassId: classid,\n            checkpointId: checkpointid,\n\t\t\traceClassCheckpointDelete: 1,\n\t\t};\n\t\tclearTimeout(this.updateTimer[field]);\n\t\tthis.updateTimer[field] = setTimeout(async () => {\n\t\t\traceStore.editClass({\n\t\t\t\tid: raceid,\n\t\t\t\tdata,\n\t\t\t});\n            raceStore.localUpdateSignup(field, value);\n\t\t}, 1500);\n    }\n\n\tcomponentDidMount() {\n\t\tthis.loadRace();\n\t}\n\n    back = () => {\n        const { createNew } = this.props;\n        const { raceStore } = this.props.stores;\n\t\tconst { race } = raceStore;\n        if (createNew) {\n            route(`/race/`);\n        } else {\n            route(`/race/${race.id}`);\n        }\n    }\n\n\trender() {\n\t\tconst { newRaceUserImage } = this.state;\n\t\tconst { createNew, raceid } = this.props;\n\t\tconst { raceStore, userStore } = this.props.stores;\n        const { isAdmin } = userStore;\n        if (!isAdmin) {\n            return '';\n        }\n\t\tconst { race, saved } = raceStore;\n\t\tconst required = ['name', 'sortOrder', 'distanceFromPrev', 'estTimeToCpMinutes', 'estRestMinutes'];\n\n\t\treturn (\n\t\t\t<>\n\t\t\t\t<Header stores={this.props.stores} />\n\t\t\t\t<div class='container-fluid' style={`margin-bottom: ${MARGIN_BOTTOM}; margin-top: ${MARGIN_TOP};`}>\n\t\t\t\t\t<button class='btn btn-link float-left pl-0 fixed-top text-primary'\n\t\t\t\t\t\tstyle={`top: ${MARGIN_TOP_BACK}; left: 5px; font-size: 35px; width: 45px;`}\n\t\t\t\t\t\tonClick={this.back}\n\t\t\t\t\t>\n\t\t\t\t\t\t<i class='fas fa-arrow-circle-left' />\n\t\t\t\t\t</button>\n\n\t\t\t\t\t{createNew ? (\n\t\t\t\t\t\t<div class='row'>\n\t\t\t\t\t\t\t<div class='col-12'>\n\t\t\t\t\t\t\t\t<h5><Text id='race.add-new'>Lag nytt innhold</Text></h5>\n\t\t\t\t\t\t\t\t<InputNew stores={this.props.stores} field='title' icon='fas fa-heading'\n\t\t\t\t\t\t\t\t\ttitle={<Text id='race.title'>Tittel</Text>}\n\t\t\t\t\t\t\t\t\thelp={<Text id='race.title-help'>Title of this race story</Text>} />\n\t\t\t\t\t\t\t\t<InputNew stores={this.props.stores} field='tag' icon='fas fa-eye'\n\t\t\t\t\t\t\t\t\ttitle={<Text id='race.tag'>Tag</Text>}\n\t\t\t\t\t\t\t\t\thelp={<Text id='race.tag-help'>Tag of this race story</Text>}\n\t\t\t\t\t\t\t\t\tonInput={this.updateField} />\n\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\ttype='button'\n\t\t\t\t\t\t\t\t\tclass='btn btn-primary mb-2'\n\t\t\t\t\t\t\t\t\tonclick={this.insertNewRace}\n\t\t\t\t\t\t\t\t>Save race</button>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t) : (\n\t\t\t\t\t\t<div class='row'>\n\t\t\t\t\t\t\t<div class='col-12'>\n\n\t\t\t\t\t\t\t\t<Input saved={saved} race={race} field='title' icon='fas fa-heading' required={true}\n\t\t\t\t\t\t\t\t\ttitle={<Text id='race.title'>Title</Text>}\n\t\t\t\t\t\t\t\t\thelp={<Text id='race.title-help'>Title of this race</Text>}\n\t\t\t\t\t\t\t\t\tonInput={this.updateField} />\n\n\t\t\t\t\t\t\t\t<div class='row'>\n\t\t\t\t\t\t\t\t\t<div class='col'>\n\t\t\t\t\t\t\t\t\t\t<Input saved={saved} race={race} field='active' icon='fas fa-heading'\n\t\t\t\t\t\t\t\t\t\t\ttitle={<Text id='race.active'>Active</Text>}\n\t\t\t\t\t\t\t\t\t\t\thelp={<Text id='race.active-help'>Is this active yet?</Text>}\n\t\t\t\t\t\t\t\t\t\t\tonInput={this.updateField} />\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div class='col'>\n\t\t\t\t\t\t\t\t\t\t<Input saved={saved} race={race} field='nonstop' icon='fas fa-heading'\n\t\t\t\t\t\t\t\t\t\t\ttitle={<Text id='race.nonstop'>Nonstop</Text>}\n\t\t\t\t\t\t\t\t\t\t\thelp={<Text id='race.nonstop-help'>Nonstop race.</Text>}\n\t\t\t\t\t\t\t\t\t\t\tonInput={this.updateField} />\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div class='col'>\n\t\t\t\t\t\t\t\t\t\t<Input saved={saved} race={race} field='liveRace' icon='fas fa-heading'\n\t\t\t\t\t\t\t\t\t\t\ttitle={<Text id='race.live-race'>Live race</Text>}\n\t\t\t\t\t\t\t\t\t\t\thelp={<Text id='race.live-race-help'>Live race.</Text>}\n\t\t\t\t\t\t\t\t\t\t\tonInput={this.updateField} />\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t<div class='row'>\n\t\t\t\t\t\t\t\t\t<div class='col'>\n\t\t\t\t\t\t\t\t\t\t<Input saved={saved} race={race} field='signupfee' icon='fas fa-heading'\n\t\t\t\t\t\t\t\t\t\t\ttitle={<Text id='race.signupfee'>Signup fee</Text>}\n\t\t\t\t\t\t\t\t\t\t\thelp={<Text id='race.signupfee-help'>Signup fee for this race.</Text>}\n\t\t\t\t\t\t\t\t\t\t\tonInput={this.updateField} />\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div class='col'>\n\t\t\t\t\t\t\t\t\t\t<Input saved={saved} race={race} field='signuppayment' icon='fas fa-heading'\n\t\t\t\t\t\t\t\t\t\t\ttitle={<Text id='race.signuppayment'>Signup payment</Text>}\n\t\t\t\t\t\t\t\t\t\t\thelp={<Text id='race.signuppayment-help'>Signup payment for this race.</Text>}\n\t\t\t\t\t\t\t\t\t\t\tonInput={this.updateField} />\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t<div class='row'>\n\t\t\t\t\t\t\t\t\t<div class='col'>\n\t\t\t\t\t\t\t\t\t\t<Input saved={saved} race={race} field='signupStartDate' icon='fas fa-heading' required={true}\n\t\t\t\t\t\t\t\t\t\t\ttitle={<Text id='race.signupStartDate'>Signup start date</Text>}\n\t\t\t\t\t\t\t\t\t\t\ttype='date'\n\t\t\t\t\t\t\t\t\t\t\thelp={<Text id='race.signupStartDate-help'>Signup start date</Text>}\n\t\t\t\t\t\t\t\t\t\t\tonInput={this.updateField}\n\t\t\t\t\t\t\t\t\t\t\tupdateField={this.updateFieldValue}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div class='col'>\n\t\t\t\t\t\t\t\t\t\t<Input saved={saved} race={race} field='signupStartDate' icon='fas fa-heading' required={true}\n\t\t\t\t\t\t\t\t\t\t\ttitle={<Text id='race.signupStartDate'>Signup start time</Text>}\n\t\t\t\t\t\t\t\t\t\t\ttype='time'\n\t\t\t\t\t\t\t\t\t\t\thelp={<Text id='race.signupStartDate-help'>Signup start time</Text>}\n\t\t\t\t\t\t\t\t\t\t\tonInput={this.updateField}\n\t\t\t\t\t\t\t\t\t\t\tupdateField={this.updateFieldValue}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div class='col'>\n\t\t\t\t\t\t\t\t\t\t<Input saved={saved} race={race} field='signupEndDate' icon='fas fa-heading' required={true}\n\t\t\t\t\t\t\t\t\t\t\ttitle={<Text id='race.signupEndDate'>Signup end date</Text>}\n\t\t\t\t\t\t\t\t\t\t\ttype='date'\n\t\t\t\t\t\t\t\t\t\t\thelp={<Text id='race.signupEndDate-help'>Signup end date</Text>}\n\t\t\t\t\t\t\t\t\t\t\tonInput={this.updateField}\n\t\t\t\t\t\t\t\t\t\t\tupdateField={this.updateFieldValue}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div class='col'>\n\t\t\t\t\t\t\t\t\t\t<Input saved={saved} race={race} field='signupEndDate' icon='fas fa-heading' required={true}\n\t\t\t\t\t\t\t\t\t\t\ttitle={<Text id='race.signupEndDate'>Signup end time</Text>}\n\t\t\t\t\t\t\t\t\t\t\ttype='time'\n\t\t\t\t\t\t\t\t\t\t\thelp={<Text id='race.signupEndDate-help'>Signup end time</Text>}\n\t\t\t\t\t\t\t\t\t\t\tonInput={this.updateField}\n\t\t\t\t\t\t\t\t\t\t\tupdateField={this.updateFieldValue}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t<div class='row'>\n\t\t\t\t\t\t\t\t\t<div class='col'>\n\t\t\t\t\t\t\t\t\t\t<Input saved={saved} race={race} field='startDate' icon='fas fa-heading' required={true}\n\t\t\t\t\t\t\t\t\t\t\ttitle={<Text id='race.startDate'>Race start date</Text>}\n\t\t\t\t\t\t\t\t\t\t\ttype='date'\n\t\t\t\t\t\t\t\t\t\t\thelp={<Text id='race.startDate-help'>Race start date</Text>}\n\t\t\t\t\t\t\t\t\t\t\tonInput={this.updateField}\n\t\t\t\t\t\t\t\t\t\t\tupdateField={this.updateFieldValue}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div class='col'>\n\t\t\t\t\t\t\t\t\t\t<Input saved={saved} race={race} field='startDate' icon='fas fa-heading' required={true}\n\t\t\t\t\t\t\t\t\t\t\ttitle={<Text id='race.startDate'>Race start time</Text>}\n\t\t\t\t\t\t\t\t\t\t\ttype='time'\n\t\t\t\t\t\t\t\t\t\t\thelp={<Text id='race.startDate-help'>Race start time</Text>}\n\t\t\t\t\t\t\t\t\t\t\tonInput={this.updateField}\n\t\t\t\t\t\t\t\t\t\t\tupdateField={this.updateFieldValue}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div class='col'>\n\t\t\t\t\t\t\t\t\t\t<Input saved={saved} race={race} field='endDate' icon='fas fa-heading' required={true}\n\t\t\t\t\t\t\t\t\t\t\ttitle={<Text id='race.endDate'>Race end date</Text>}\n\t\t\t\t\t\t\t\t\t\t\ttype='date'\n\t\t\t\t\t\t\t\t\t\t\thelp={<Text id='race.endDate-help'>Race end date</Text>}\n\t\t\t\t\t\t\t\t\t\t\tonInput={this.updateField}\n\t\t\t\t\t\t\t\t\t\t\tupdateField={this.updateFieldValue}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div class='col'>\n\t\t\t\t\t\t\t\t\t\t<Input saved={saved} race={race} field='endDate' icon='fas fa-heading' required={true}\n\t\t\t\t\t\t\t\t\t\t\ttitle={<Text id='race.endDate'>Race end time</Text>}\n\t\t\t\t\t\t\t\t\t\t\ttype='time'\n\t\t\t\t\t\t\t\t\t\t\thelp={<Text id='race.endDate-help'>Race end time</Text>}\n\t\t\t\t\t\t\t\t\t\t\tonInput={this.updateField}\n\t\t\t\t\t\t\t\t\t\t\tupdateField={this.updateFieldValue}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\n\n\n\t\t\t\t\t\t\t\t<div class='row'>\n\t\t\t\t\t\t\t\t\t<div class='col'>\n\t\t\t\t\t\t\t\t\t\t<Input saved={saved} race={race} field='tag' icon='fas fa-heading' required={true}\n\t\t\t\t\t\t\t\t\t\t\ttitle={<Text id='race.tag'>Tag</Text>}\n\t\t\t\t\t\t\t\t\t\t\thelp={<Text id='race.tag-help'>Sosial media tags of this race. Comma sep.</Text>}\n\t\t\t\t\t\t\t\t\t\t\tonInput={this.updateField} />\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div class='col'>\n\t\t\t\t\t\t\t\t\t\t<Input saved={saved} race={race} field='tagFacebookUsers' icon='fas fa-heading'\n\t\t\t\t\t\t\t\t\t\t\ttitle={<Text id='race.tag-facebook-user'>Facebook users to tag</Text>}\n\t\t\t\t\t\t\t\t\t\t\thelp={<Text id='race.tag-facebook-user-help'>Facebook users to tag in this race. Comma sep.</Text>}\n\t\t\t\t\t\t\t\t\t\t\tonInput={this.updateField} />\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div class='col'>\n\t\t\t\t\t\t\t\t\t\t<Input saved={saved} race={race} field='tagInstagramUsers' icon='fas fa-heading'\n\t\t\t\t\t\t\t\t\t\t\ttitle={<Text id='race.tag-instagram-user'>Intagram users to tag</Text>}\n\t\t\t\t\t\t\t\t\t\t\thelp={<Text id='race.tag-instagram-user-help'>Instagram users to tag in this race. Comma sep.</Text>}\n\t\t\t\t\t\t\t\t\t\t\tonInput={this.updateField} />\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t<Input saved={saved} race={race} field='raceTrackerRace' icon='fas fa-heading'\n\t\t\t\t\t\t\t\t\ttitle={<Text id='race.race-tracker-name'>RaceTracker name</Text>}\n\t\t\t\t\t\t\t\t\thelp={<Text id='race.race-tracker-name-help'>Check database for RaceTracker name</Text>}\n\t\t\t\t\t\t\t\t\tonInput={this.updateField} />\n\n\t\t\t\t\t\t\t\t<Input saved={saved} race={race} field='raceAdmins' icon='fas fa-heading'\n\t\t\t\t\t\t\t\t\ttitle={<Text id='race.raceAdmins'>raceAdmins</Text>}\n\t\t\t\t\t\t\t\t\thelp={<Text id='race.raceAdmins-help'>raceAdmins comma sep list.</Text>}\n\t\t\t\t\t\t\t\t\tonInput={this.updateField} />\n\n\t\t\t\t\t\t\t\t<Input saved={saved} race={race} field='mapCredits' icon='fas fa-heading'\n\t\t\t\t\t\t\t\t\ttitle={<Text id='race.mapCredits'>mapCredits</Text>}\n\t\t\t\t\t\t\t\t\thelp={<Text id='race.mapCredits-help'>mapCredits Markdown text.</Text>}\n\t\t\t\t\t\t\t\t\tonInput={this.updateField} />\n\n\t\t\t\t\t\t\t\t<Input saved={saved} race={race} field='checkpointOuterFence' icon='fas fa-heading'\n\t\t\t\t\t\t\t\t\ttitle={<Text id='race.checkpointOuterFence'>checkpointOuterFence</Text>}\n\t\t\t\t\t\t\t\t\thelp={<Text id='race.checkpointOuterFence-help'>checkpointOuterFence in meters (default: 3000 m)</Text>}\n\t\t\t\t\t\t\t\t\tonInput={this.updateField} />\n\t\t\t\t\t\t\t\t<Input saved={saved} race={race} field='checkpointArrivalFence' icon='fas fa-heading'\n\t\t\t\t\t\t\t\t\ttitle={<Text id='race.checkpointArrivalFence'>checkpointArrivalFence</Text>}\n\t\t\t\t\t\t\t\t\thelp={<Text id='race.checkpointArrivalFence-help'>checkpointArrivalFence in meters (default: 1500 m)</Text>}\n\t\t\t\t\t\t\t\t\tonInput={this.updateField} />\n\t\t\t\t\t\t\t\t<Input saved={saved} race={race} field='checkpointDepartureFence' icon='fas fa-heading'\n\t\t\t\t\t\t\t\t\ttitle={<Text id='race.checkpointDepartureFence'>checkpointDepartureFence</Text>}\n\t\t\t\t\t\t\t\t\thelp={<Text id='race.checkpointDepartureFence-help'>checkpointDepartureFence in meters (default: 2500 m)</Text>}\n\t\t\t\t\t\t\t\t\tonInput={this.updateField} />\n\t\t\t\t\t\t\t\t<Input saved={saved} race={race} field='cutOffSpeedMeterSec' icon='fas fa-heading'\n\t\t\t\t\t\t\t\t\ttitle={<Text id='race.cutOffSpeedMeterSec'>cutOffSpeedMeterSec</Text>}\n\t\t\t\t\t\t\t\t\thelp={<Text id='race.cutOffSpeedMeterSec-help'>cutOffSpeedMeterSec rest vs run (default: 1.5 m/s)</Text>}\n\t\t\t\t\t\t\t\t\tonInput={this.updateField} />\n\t\t\t\t\t\t\t\t<Input saved={saved} race={race} field='cutOffDurationSec' icon='fas fa-heading'\n\t\t\t\t\t\t\t\t\ttitle={<Text id='race.cutOffDurationSec'>cutOffDurationSec</Text>}\n\t\t\t\t\t\t\t\t\thelp={<Text id='race.cutOffDurationSec-help'>cutOffDurationSec rest vs run (default: 600 sec)</Text>}\n\t\t\t\t\t\t\t\t\tonInput={this.updateField} />\n\n\t\t\t\t\t\t\t\t<div class='row'>\n\t\t\t\t\t\t\t\t\t<div class='col'>\n\t\t\t\t\t\t\t\t\t\t<Input saved={saved} race={race} field='resultsText' icon='fas fa-heading'\n\t\t\t\t\t\t\t\t\t\t\ttitle={<Text id='race.resultsText'>Results URL Text</Text>}\n\t\t\t\t\t\t\t\t\t\t\thelp={<Text id='race.resultsText-help'>Text to results URL</Text>}\n\t\t\t\t\t\t\t\t\t\t\tonInput={this.updateField} />\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div class='col'>\n\t\t\t\t\t\t\t\t\t\t<Input saved={saved} race={race} field='resultsUrl' icon='fas fa-heading'\n\t\t\t\t\t\t\t\t\t\t\ttitle={<Text id='race.resultsUrl'>Results URL</Text>}\n\t\t\t\t\t\t\t\t\t\t\thelp={<Text id='race.resultsUrl-help'>URL to results</Text>}\n\t\t\t\t\t\t\t\t\t\t\tonInput={this.updateField} />\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div class='col'>\n\t\t\t\t\t\t\t\t\t\t<Input saved={saved} race={race} field='resultsHide' icon='fas fa-heading'\n\t\t\t\t\t\t\t\t\t\t\ttitle={<Text id='race.resultsHide'>Results hide</Text>}\n\t\t\t\t\t\t\t\t\t\t\thelp={<Text id='race.resultsHide-help'>Show we hide results from the app?</Text>}\n\t\t\t\t\t\t\t\t\t\t\tonInput={this.updateField} />\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t<div class='row'>\n\t\t\t\t\t\t\t\t\t<div class='col'>\n\t\t\t\t\t\t\t\t\t\t<Input saved={saved} race={race} field='countryRegexp' icon='fas fa-heading'\n\t\t\t\t\t\t\t\t\t\t\ttitle={<Text id='race.countryRegexp'>Country regexp hide tracking</Text>}\n\t\t\t\t\t\t\t\t\t\t\thelp={<Text id='race.countryRegexp-help'>Hide tracking for matching countries</Text>}\n\t\t\t\t\t\t\t\t\t\t\tonInput={this.updateField} />\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div class='col'>\n\t\t\t\t\t\t\t\t\t\t<Input saved={saved} race={race} field='countryRegexpMessage' icon='fas fa-heading'\n\t\t\t\t\t\t\t\t\t\t\ttitle={<Text id='race.countryRegexpMessage'>Country regexp message</Text>}\n\t\t\t\t\t\t\t\t\t\t\thelp={<Text id='race.countryRegexpMessage-help'>Text for people without access.</Text>}\n\t\t\t\t\t\t\t\t\t\t\tonInput={this.updateField} />\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t<div class='row'>\n\t\t\t\t\t\t\t\t\t<div class='col'>\n\t\t\t\t\t\t\t\t\t\t<Input saved={saved} race={race} field='contestantsText' icon='fas fa-heading'\n\t\t\t\t\t\t\t\t\t\t\ttitle={<Text id='race.contestantsText'>Contestants URL text</Text>}\n\t\t\t\t\t\t\t\t\t\t\thelp={<Text id='race.contestantsText-help'>Text to Contestants URL</Text>}\n\t\t\t\t\t\t\t\t\t\t\tonInput={this.updateField} />\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div class='col'>\n\t\t\t\t\t\t\t\t\t\t<Input saved={saved} race={race} field='contestantsUrl' icon='fas fa-heading'\n\t\t\t\t\t\t\t\t\t\t\ttitle={<Text id='race.contestantsUrl'>Contestants URL</Text>}\n\t\t\t\t\t\t\t\t\t\t\thelp={<Text id='race.contestantsUrl-help'>URL to Contestants</Text>}\n\t\t\t\t\t\t\t\t\t\t\tonInput={this.updateField} />\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t{[1, 2, 3, 4].map(idx => <>\n\t\t\t\t\t\t\t\t\t<div class='row'>\n\t\t\t\t\t\t\t\t\t\t<div class='col'>\n\t\t\t\t\t\t\t\t\t\t\t<Input saved={saved} race={race} field={`mediaText${idx}`} icon='fas fa-heading'\n\t\t\t\t\t\t\t\t\t\t\t\ttitle={<Text id='race.mediaText'>Media URL text {idx}</Text>}\n\t\t\t\t\t\t\t\t\t\t\t\thelp={<Text id='race.mediaText1-help'>Text to Media URL {idx}</Text>}\n\t\t\t\t\t\t\t\t\t\t\t\tonInput={this.updateField} />\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div class='col'>\n\t\t\t\t\t\t\t\t\t\t\t<Input saved={saved} race={race} field={`mediaURL${idx}`} icon='fas fa-heading'\n\t\t\t\t\t\t\t\t\t\t\t\ttitle={<Text id='race.contestantsUrl'>Media URL {idx}</Text>}\n\t\t\t\t\t\t\t\t\t\t\t\thelp={<Text id='race.contestantsUrl-help'>URL to Media {idx}</Text>}\n\t\t\t\t\t\t\t\t\t\t\t\tonInput={this.updateField} />\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</>)}\n\n\t\t\t\t\t\t\t\t<div class='row'>\n\t\t\t\t\t\t\t\t\t<div class='col'>\n\t\t\t\t\t\t\t\t\t\t<Input saved={saved} race={race} field='contactEmail' icon='fas fa-heading'\n\t\t\t\t\t\t\t\t\t\t\ttitle={<Text id='race.contactEmail'>Contact Email</Text>}\n\t\t\t\t\t\t\t\t\t\t\thelp={<Text id='race.contactEmail-help'>Contact Email of this race</Text>}\n\t\t\t\t\t\t\t\t\t\t\tonInput={this.updateField} />\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div class='col'>\n\t\t\t\t\t\t\t\t\t\t<Input saved={saved} race={race} field='contactCellphone' icon='fas fa-heading'\n\t\t\t\t\t\t\t\t\t\t\ttitle={<Text id='race.contactCellphone'>Contact Cellphone</Text>}\n\t\t\t\t\t\t\t\t\t\t\thelp={<Text id='race.contactCellphone-help'>Contact Cellphone of this race</Text>}\n\t\t\t\t\t\t\t\t\t\t\tonInput={this.updateField} />\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div class='col'>\n\t\t\t\t\t\t\t\t\t\t<Input saved={saved} race={race} field='facebook' icon='fas fa-heading'\n\t\t\t\t\t\t\t\t\t\t\ttitle={<Text id='race.facebook'>Facebook</Text>}\n\t\t\t\t\t\t\t\t\t\t\thelp={<Text id='race.facebook-help'>Facebook Event or page</Text>}\n\t\t\t\t\t\t\t\t\t\t\tonInput={this.updateField} />\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div class='col'>\n\t\t\t\t\t\t\t\t\t\t<Input saved={saved} race={race} field='instagram' icon='fas fa-heading'\n\t\t\t\t\t\t\t\t\t\t\ttitle={<Text id='race.instagram'>Instagram</Text>}\n\t\t\t\t\t\t\t\t\t\t\thelp={<Text id='race.instagram-help'>Instagram account or tag</Text>}\n\t\t\t\t\t\t\t\t\t\t\tonInput={this.updateField} />\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t<div class='row'>\n\t\t\t\t\t\t\t\t\t<div class='col'>\n\t\t\t\t\t\t\t\t\t\t<Input saved={saved} race={race} field='locationCity' icon='fas fa-heading'\n\t\t\t\t\t\t\t\t\t\t\ttitle={<Text id='race.locationCity'>Location City</Text>}\n\t\t\t\t\t\t\t\t\t\t\thelp={<Text id='race.locationCity-help'>Location City of this race</Text>}\n\t\t\t\t\t\t\t\t\t\t\tonInput={this.updateField} />\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div class='col'>\n\t\t\t\t\t\t\t\t\t\t<Input saved={saved} race={race} field='locationState' icon='fas fa-heading'\n\t\t\t\t\t\t\t\t\t\t\ttitle={<Text id='race.locationState'>Location State</Text>}\n\t\t\t\t\t\t\t\t\t\t\thelp={<Text id='race.locationState-help'>Location State of this race</Text>}\n\t\t\t\t\t\t\t\t\t\t\tonInput={this.updateField} />\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div class='col'>\n\t\t\t\t\t\t\t\t\t\t<Input saved={saved} race={race} field='locationCountry' icon='fas fa-heading'\n\t\t\t\t\t\t\t\t\t\t\ttitle={<Text id='race.locationCountry'>Location Country</Text>}\n\t\t\t\t\t\t\t\t\t\t\thelp={<Text id='race.locationCountry-help'>Location Country of this race</Text>}\n\t\t\t\t\t\t\t\t\t\t\tonInput={this.updateField} />\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t<Input saved={saved} race={race} field='ingress' icon='fas fa-quote-right'\n\t\t\t\t\t\t\t\t\ttype='textarea'\n\t\t\t\t\t\t\t\t\ttitle={<Text id='race.ingress'>Ingress</Text>}\n\t\t\t\t\t\t\t\t\thelp={<Text id='race.ingress-help'>Ingress of this race</Text>}\n\t\t\t\t\t\t\t\t\tonInput={this.updateField} />\n\n\t\t\t\t\t\t\t\t<Input saved={saved} race={race} field='body' icon='fas fa-quote-right'\n\t\t\t\t\t\t\t\t\ttype='textarea' rows={10}\n\t\t\t\t\t\t\t\t\ttitle={<Text id='race.body'>Body</Text>}\n\t\t\t\t\t\t\t\t\thelp={<Text id='race.body-help'>Body of this race</Text>}\n\t\t\t\t\t\t\t\t\tonInput={this.updateField} />\n\n\t\t\t\t\t\t\t\t<div class='row'>\n\t\t\t\t\t\t\t\t\t<div class='col'>\n\t\t\t\t\t\t\t\t\t\t<Input saved={saved} race={race} field='rules' icon='fas fa-quote-right'\n\t\t\t\t\t\t\t\t\t\t\ttype='textarea' rows={10}\n\t\t\t\t\t\t\t\t\t\t\ttitle={<Text id='race.rules'>Rules</Text>}\n\t\t\t\t\t\t\t\t\t\t\thelp={<Text id='race.rules-help'>Rules of this race</Text>}\n\t\t\t\t\t\t\t\t\t\t\tonInput={this.updateField} />\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div class='col'>\n\t\t\t\t\t\t\t\t\t\t<Input saved={saved} race={race} field='declaration' icon='fas fa-quote-right'\n\t\t\t\t\t\t\t\t\t\t\ttype='textarea' rows={10}\n\t\t\t\t\t\t\t\t\t\t\ttitle={<Text id='race.declaration'>Declaration</Text>}\n\t\t\t\t\t\t\t\t\t\t\thelp={<Text id='race.declaration-help'>Self declaration for the race</Text>}\n\t\t\t\t\t\t\t\t\t\t\tonInput={this.updateField} />\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t<div class='row'>\n\t\t\t\t\t\t\t\t\t<div class='col'>\n\t\t\t\t\t\t\t\t\t\t<Input saved={saved} race={race} field='veterinaryInfo' icon='fas fa-quote-right'\n\t\t\t\t\t\t\t\t\t\t\ttype='textarea' rows={10}\n\t\t\t\t\t\t\t\t\t\t\ttitle={<Text id='race.veterinaryInfo'>Veterinærinfo</Text>}\n\t\t\t\t\t\t\t\t\t\t\thelp={<Text id='race.veterinaryInfo-help'>Veterinærinfo</Text>}\n\t\t\t\t\t\t\t\t\t\t\tonInput={this.updateField} />\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div class='col'>\n\t\t\t\t\t\t\t\t\t\t<Input saved={saved} race={race} field='checkpoints' icon='fas fa-quote-right'\n\t\t\t\t\t\t\t\t\t\t\ttype='textarea' rows={10}\n\t\t\t\t\t\t\t\t\t\t\ttitle={<Text id='race.checkpoints'>Sjekkpunkter</Text>}\n\t\t\t\t\t\t\t\t\t\t\thelp={<Text id='race.checkpoints-help'>Sjekkpunkter</Text>}\n\t\t\t\t\t\t\t\t\t\t\tonInput={this.updateField} />\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t<div class='row'>\n\t\t\t\t\t\t\t\t\t<div class='col'>\n\t\t\t\t\t\t\t\t\t\t<Input saved={saved} race={race} field='trailDescription' icon='fas fa-quote-right'\n\t\t\t\t\t\t\t\t\t\t\ttype='textarea' rows={10}\n\t\t\t\t\t\t\t\t\t\t\ttitle={<Text id='race.trailDescription'>Løypebeskrivelse</Text>}\n\t\t\t\t\t\t\t\t\t\t\thelp={<Text id='race.trailDescription-help'>Løypebeskrivelse</Text>}\n\t\t\t\t\t\t\t\t\t\t\tonInput={this.updateField} />\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div class='col'>\n\t\t\t\t\t\t\t\t\t\t<Input saved={saved} race={race} field='program' icon='fas fa-quote-right'\n\t\t\t\t\t\t\t\t\t\t\ttype='textarea' rows={10}\n\t\t\t\t\t\t\t\t\t\t\ttitle={<Text id='race.program'>Program</Text>}\n\t\t\t\t\t\t\t\t\t\t\thelp={<Text id='race.program-help'>Program</Text>}\n\t\t\t\t\t\t\t\t\t\t\tonInput={this.updateField} />\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div class='col'>\n\t\t\t\t\t\t\t\t\t\t<Input saved={saved} race={race} field='prices' icon='fas fa-quote-right'\n\t\t\t\t\t\t\t\t\t\t\ttype='textarea' rows={10}\n\t\t\t\t\t\t\t\t\t\t\ttitle={<Text id='race.prices'>Prices</Text>}\n\t\t\t\t\t\t\t\t\t\t\thelp={<Text id='race.prices-help'>Prices for this race</Text>}\n\t\t\t\t\t\t\t\t\t\t\tonInput={this.updateField} />\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t<div class='row'>\n\t\t\t\t\t\t\t\t\t<div class='col'>\n\t\t\t\t\t\t\t\t\t\t<Input saved={saved} race={race} field='resultDanger' icon='fas fa-quote-right'\n\t\t\t\t\t\t\t\t\t\t\ttype='textarea' rows={10}\n\t\t\t\t\t\t\t\t\t\t\ttitle={<Text id='race.resultDanger'>resultDanger</Text>}\n\t\t\t\t\t\t\t\t\t\t\thelp={<Text id='race.resultDanger-help'>resultDanger for this race</Text>}\n\t\t\t\t\t\t\t\t\t\t\tonInput={this.updateField} />\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div class='col'>\n\t\t\t\t\t\t\t\t\t\t<Input saved={saved} race={race} field='resultWarning' icon='fas fa-quote-right'\n\t\t\t\t\t\t\t\t\t\t\ttype='textarea' rows={10}\n\t\t\t\t\t\t\t\t\t\t\ttitle={<Text id='race.resultWarning'>resultWarning</Text>}\n\t\t\t\t\t\t\t\t\t\t\thelp={<Text id='race.resultWarning-help'>resultWarning for this race</Text>}\n\t\t\t\t\t\t\t\t\t\t\tonInput={this.updateField} />\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div class='col'>\n\t\t\t\t\t\t\t\t\t\t<Input saved={saved} race={race} field='resultSuccess' icon='fas fa-quote-right'\n\t\t\t\t\t\t\t\t\t\t\ttype='textarea' rows={10}\n\t\t\t\t\t\t\t\t\t\t\ttitle={<Text id='race.resultSuccess'>resultSuccess</Text>}\n\t\t\t\t\t\t\t\t\t\t\thelp={<Text id='race.resultSuccess-help'>resultSuccess for this race</Text>}\n\t\t\t\t\t\t\t\t\t\t\tonInput={this.updateField} />\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t<Input saved={saved} race={race} field='image' type='image' icon='fas fa-camera'\n\t\t\t\t\t\t\t\t\tstores={this.props.stores}\n\t\t\t\t\t\t\t\t\ttitle={<Text id='race.photo'>Bilder</Text>}\n\t\t\t\t\t\t\t\t\thelp={<Text id='race.photo-help'>Images for this race.</Text>}\n\t\t\t\t\t\t\t\t\tonInput={this.updateField} updateField={this.updateFieldValue} />\n\n\t\t\t\t\t\t\t\t<div class='row'>\n\t\t\t\t\t\t\t\t\t{race.classes && race.classes.map(currentClass => <>\n\t\t\t\t\t\t\t\t\t\t<div class='col-12 border rounded-lg m-2 p-3'>\n\t\t\t\t\t\t\t\t\t\t\t<button class='btn btn-danger float-right' data-id={currentClass.id} onClick={this.removeRaceClass}>\n\t\t\t\t\t\t\t\t\t\t\t\t<i class='fas fa-times' />\n\t\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t\t\t<h5>{currentClass.title}</h5>\n\n\t\t\t\t\t\t\t\t\t\t\t<div class='row'>\n\t\t\t\t\t\t\t\t\t\t\t\t{['title', 'distance', 'minDistance', 'signupfee', 'track', 'raceTrackerResults', 'dogs'].map(field => <>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div class='col form-group'>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<label for={field}>{field}</label>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<input type='text' class='form-control' id={field} aria-describedby={`${field}Help`}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdata-id={currentClass.id}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdata-field={field}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalue={currentClass[field]}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tonInput={this.editRaceClass}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t</>)}\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t\t\t\t<div class='row'>\n\t\t\t\t\t\t\t\t\t\t\t\t{['startDate', 'endDate'].map(field => <>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div class='col form-group'>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<label for={field}>{field}</label>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<input type='datetime-local' class='form-control' id={field} aria-describedby={`${field}Help`}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdata-id={currentClass.id}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdata-field={field}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalue={util.isoDate(currentClass[field])}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tonInput={this.editRaceClass}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t</>)}\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t\t\t\t<div class='row'>\n\t\t\t\t\t\t\t\t\t\t\t\t{['ingress', 'body', 'rules'].map(field => <>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div class='col form-group'>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<label for={field}>{field}</label>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<textarea type='textarea' class='form-control' id={field} aria-describedby={`${field}Help`}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdata-id={currentClass.id}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdata-field={field}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalue={currentClass[field]}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tonInput={this.editRaceClass}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t</>)}\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t\t\t\t{['waypoints'].map(field => <>\n\t\t\t\t\t\t\t\t\t\t\t\t<div class='form-group'>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<label for={field}>{field}</label>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<textarea type='textarea' class='form-control' id={field} aria-describedby={`${field}Help`}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tdata-id={currentClass.id}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tdata-field={field}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalue={JSON.stringify(currentClass[field], null, 4)}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tonInput={this.editRaceClass}\n\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t</>)}\n\n\t\t\t\t\t\t\t\t\t\t\t<div class='overflow-auto'>\n\t\t\t\t\t\t\t\t\t\t\t\t<div class='d-flex flex-nowrap'>\n\t\t\t\t\t\t\t\t\t\t\t\t\t{currentClass.checkpoints && currentClass.checkpoints.slice().sort(fieldSorter(['sortOrder'])).map(currentCheckpoint => <>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div class='border rounded-lg m-2 p-3 bg-light'>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<h5>{currentCheckpoint.name}</h5>\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{['name', 'sortOrder', 'distanceFromStart', 'distanceFromPrev', 'estSpeed', 'requiredRestMinutes', 'timeEqualization',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t'isStartLine', 'isFinishLine', 'estTimeToCpMinutes', 'estRestMinutes', 'hideResults',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t'email', 'cellphone', 'facebook', 'instagram', 'image', 'topImage',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t'topImage1', 'topImage2','topImage3',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t'image1', 'image2','image3',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t].map(field => <>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div class='form-group'>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<label for={field}>{required.indexOf(field) > - 1 && <>*</>} {field}</label>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<input type='text' class={`form-control ${required.indexOf(field) > - 1 ? (currentCheckpoint[field] ? 'border-success' : 'border-danger') : ''}`} id={field} aria-describedby={`${field}Help`}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdata-classid={currentClass.id}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdata-checkpointid={currentCheckpoint.id}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdata-field={field}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalue={currentCheckpoint[field]}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tonInput={this.editCheckpoint}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tplaceholder={field === 'estSpeed' ? AVG_SPEED : ''}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<small id={`${field}Help`} class='form-text text-muted'>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{field === 'estTimeToCpMinutes' && <>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{((currentCheckpoint.distanceFromPrev * 1000) / ((currentCheckpoint.estSpeed || AVG_SPEED) / 3.6)) / 60}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span class='text-muted px-2'>-</span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{util.secToHms(((currentCheckpoint.distanceFromPrev * 1000) / ((currentCheckpoint.estSpeed || AVG_SPEED) / 3.6)), true)}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span class='text-muted px-2'>-</span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{(currentCheckpoint.estSpeed || AVG_SPEED)} km/t\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</>}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{['requiredRestMinutes', 'estRestMinutes'].indexOf(field) > -1 && <>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{util.secToHms(currentCheckpoint[field] * 60, true)}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</>}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</small>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</>)}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{['description'].map(field => <>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div class='form-group'>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<label for={field}>{field}</label>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<textarea type='text' class='form-control' id={field} aria-describedby={`${field}Help`}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdata-classid={currentClass.id}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdata-checkpointid={currentCheckpoint.id}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdata-field={field}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalue={currentCheckpoint[field]}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tonInput={this.editCheckpoint}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</>)}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{['position', 'polygon'].map(field => <>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div class='form-group'>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<label for={field}>{field}</label>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<textarea type='textarea' class='form-control' id={field} aria-describedby={`${field}Help`}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdata-classid={currentClass.id}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdata-checkpointid={currentCheckpoint.id}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdata-field={field}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalue={JSON.stringify(currentCheckpoint[field], null, 4)}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tonInput={this.editCheckpoint}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</>)}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclass='btn btn-link'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={this.deleteCheckpoint}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdata-classid={currentClass.id}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdata-checkpointid={currentCheckpoint.id}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t>Delete</button>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</>)}\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t\t\t\t{currentClass.checkpoints ? <>\n\t\t\t\t\t\t\t\t\t\t\t\t<div class='overflow-auto'>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div class='d-flex flex-nowrap'>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div class='form-group'>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<label>Waypoint data for class (copy & paste to field above)</label>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<textarea type='textarea' class='form-control'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalue={\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tJSON.stringify(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcurrentClass.checkpoints\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.slice()\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.sort(fieldSorter(['sortOrder']))\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.filter(cp => cp.position && cp.position[0])\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.map(cp => ({\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tid: cp.id,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttitle: cp.name,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tlat: cp.position[0],\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tlng: cp.position[1],\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t, null, 4))\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t</> : <></>}\n\n\t\t\t\t\t\t\t\t\t\t\t<div class='d-flex flex-nowrap'>\n\t\t\t\t\t\t\t\t\t\t\t\t<div class='border rounded-lg m-2 p-3 bg-light'>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<h5>Add new checkpoint</h5>\n\t\t\t\t\t\t\t\t\t\t\t\t\t{['name', 'distanceFromStart', 'requiredRestMinutes', 'email', 'cellphone'].map(field => <>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div class='form-group'>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<label for={field}>{field}</label>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<input type='text' class='form-control' id={field} aria-describedby={`${field}Help`}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tonInput={linkstate(this, `checkpoint.${field}`)}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</>)}\n\t\t\t\t\t\t\t\t\t\t\t\t\t{['position', 'polygon'].map(field => <>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div class='form-group'>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<label for={field}>{field}</label>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<textarea type='text' class='form-control' id={field} aria-describedby={`${field}Help`}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tonInput={linkstate(this, `checkpoint.${field}`)}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</>)}\n\t\t\t\t\t\t\t\t\t\t\t\t\t<button class='btn btn-info' data-classid={currentClass.id} onClick={this.addCheckpoint}>Add checkpoint</button>\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</>)}\n\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t<div class='row'>\n\t\t\t\t\t\t\t\t\t<div class='col border rounded-lg m-2 p-3 bg-light'>\n\t\t\t\t\t\t\t\t\t\t<h5>Add new class</h5>\n\t\t\t\t\t\t\t\t\t\t{['title', 'distance', 'minDistance', 'signupfee'].map(field => <>\n\t\t\t\t\t\t\t\t\t\t\t<div class='form-group'>\n\t\t\t\t\t\t\t\t\t\t\t\t<label for={field}>{field}</label>\n\t\t\t\t\t\t\t\t\t\t\t\t<input type='text' class='form-control' id={field} aria-describedby={`${field}Help`}\n\t\t\t\t\t\t\t\t\t\t\t\t\tonInput={linkstate(this, `newRaceClass.${field}`)}\n\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t</>)}\n\t\t\t\t\t\t\t\t\t\t{['ingress', 'body', 'rules'].map(field => <>\n\t\t\t\t\t\t\t\t\t\t\t<div class='form-group'>\n\t\t\t\t\t\t\t\t\t\t\t\t<label for={field}>{field}</label>\n\t\t\t\t\t\t\t\t\t\t\t\t<textarea type='text' class='form-control' id={field} aria-describedby={`${field}Help`}\n\t\t\t\t\t\t\t\t\t\t\t\t\tonInput={linkstate(this, `newRaceClass.${field}`)}\n\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t</>)}\n\t\t\t\t\t\t\t\t\t\t<button class='btn btn-info' onClick={this.addRaceClass}>Add race class</button>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t)}\n\t\t\t\t</div>\n\t\t\t</>\n\t\t);\n\t}\n}\n\nexport default PublicRaceEdit;\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"pointerCursor\":\"pointerCursor__1W6mM\"};","import { h, Component } from 'preact';\nimport { Link } from 'preact-router/match';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport linkState from 'linkstate';\nimport { route } from 'preact-router';\nimport { Text, Localizer } from 'preact-i18n';\n\nimport style from './style.css';\n\n\nconst initialState = {\n    menu: {\n\t\tprofile: false,\n\t\tmain: false,\n\t},\n\tsearchText: '',\n};\n\n@observer\nclass Navigation extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            ...initialState,\n        };\n    }\n\n\ttoggleDropdown = (e) => {\n\t\tconst { menu } = this.state;\n\t\tlet menuName = e.target.dataset.name;\n\t\tif (!menuName && e.target.parentNode) {\n\t\t\tmenuName = e.target.parentNode.dataset.name;\n\t\t}\n\t\tif (menuName) {\n\t\t\tmenu[menuName] = !menu[menuName];\n\t\t}\n\t\tthis.setState({ menu });\n\t}\n\n\ttoggleDarkmode = (e) => {\n        const { appState } = this.props.stores;\n\t\tappState.toggleDarkmode();\n\t\tthis.toggleDropdown(e);\n\t}\n\n\ttoggleViewmode = (e) => {\n        const { appState } = this.props.stores;\n\t\tlet mode = e.target.dataset.mode;\n\t\tif (!mode && e.target.parentNode) {\n\t\t\tmode = e.target.parentNode.dataset.mode;\n\t\t}\n\t\tappState.toggleViewmode(mode);\n\t\tthis.toggleDropdown(e);\n\t}\n\n\treloadApp = () => {\n\t\twindow.location.reload(true);\n\t}\n\n\tadminLoadAll = async (e) => {\n        const { userStore } = this.props.stores;\n        await userStore.getInfo(true);\n\t}\n\n\tchangeLanguage = (e) => {\n\t\tconst lang = e.target.value;\n\t\tconsole.log('changeLanguage', lang);\n\t\tconst { appState, userStore } = this.props.stores;\n\t\tconst { user = {} } = userStore;\n\t\tif (user.email) {\n\t\t\tuserStore.setLanguage({ email: user.email, language: lang });\n\t\t}\n\t\tappState.setLanguage(lang);\n\t}\n\n\tsearch = () => {\n\t\tconst { searchText } = this.state;\n\t\troute(`/search/${searchText}`);\n\t}\n\n    render() {\n\t\tconst { menu, searchText } = this.state;\n        const { appState, userStore } = this.props.stores;\n        const { darkmode, viewmode, isCordova } = appState;\n\t\tconst { allUsers, isAdmin, user, notifications = [] } = userStore;\n\t\tconst unreadNotificatins = notifications.filter(e => !e.read);\n\t\tconst unread = unreadNotificatins.length || 0;\n\t\tconst { language = 'en' } = user;\n\n\t\treturn (\n\t\t\t<nav class='navbar navbar-expand-lg navbar-themed fixed-top py-1' style='z-index: 99999;'>\n\t\t\t\t<a class='navbar-brand' href='/race/'>\n\t\t\t\t\t{/* <img src={`./assets/logo-jul-2020-v2-${darkmode ? 'black' : 'white'}.png`} height='30' class='position-absolute' style='top: 8px; left: 6px' /> */}\n\t\t\t\t\t<img src={`./assets/homerun-race-logo-2-${darkmode ? 'white-' : ''}small.png`} height='37' class='position-absolute' style='top: 5px; left: 6px' />\n\t\t\t\t\t<span class='font-weight-normal' style='margin-left: 30px; font-size: 20px;'>Homerun Race</span>\n\t\t\t\t</a>\n\n\t\t\t\t<button class='navbar-toggler' type='button'\n\t\t\t\t\tdata-name='main'\n\t\t\t\t\tonClick={this.toggleDropdown}\n\t\t\t\t>\n\t\t\t\t\t<span class='navbar-toggler-icon' />\n\t\t\t\t</button>\n\n\t\t\t\t<div class={`collapse navbar-collapse ${menu.main ? 'show' : ''}`} id='navbarSupportedContent'>\n\t\t\t\t\t<ul class='navbar-nav mr-auto ml-5'>\n\t\t\t\t\t\t<li class='nav-item'>\n\t\t\t\t\t\t\t<Link className='nav-link' activeClassName={'active'} href='/race'\n\t\t\t\t\t\t\t\tdata-name='main'\n\t\t\t\t\t\t\t\tstyle='font-size: 1.0em !important;'\n\t\t\t\t\t\t\t\tonClick={this.toggleDropdown}\n\t\t\t\t\t\t\t><i class='fas fa-flag-checkered' /> <Text id='header.races'>Løpene</Text></Link>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t\t<li class='nav-item'>\n\t\t\t\t\t\t\t<Link className='nav-link' activeClassName={'active'} href='/race/support'\n\t\t\t\t\t\t\t\tdata-name='main'\n\t\t\t\t\t\t\t\tstyle='font-size: 1.0em !important;'\n\t\t\t\t\t\t\t\tonClick={this.toggleDropdown}\n\t\t\t\t\t\t\t><i class='far fa-question-circle' /> <Text id='header.support'>Support</Text></Link>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t\t<li class='nav-item'>\n\t\t\t\t\t\t\t<Link className='nav-link' activeClassName={'active'} href='/race/news'\n\t\t\t\t\t\t\t\tdata-name='main'\n\t\t\t\t\t\t\t\tstyle='font-size: 1.0em !important;'\n\t\t\t\t\t\t\t\tonClick={this.toggleDropdown}\n\t\t\t\t\t\t\t><i class='fas fa-quote-right' /> <Text id='header.news'>Nyheter</Text></Link>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t\t{/* <li class='nav-item'>\n\t\t\t\t\t\t\t<Link className='nav-link' activeClassName={'active'} href='/'\n\t\t\t\t\t\t\t\tdata-name='main'\n\t\t\t\t\t\t\t\tonClick={this.toggleDropdown}\n\t\t\t\t\t\t\t><i class='fas fa-dog' /> <Text id='header.backtoapp'>The Musher</Text></Link>\n\t\t\t\t\t\t</li> */}\n\t\t\t\t\t\t{/* <li class='nav-item'>\n\t\t\t\t\t\t\t<Link className='nav-link' activeClassName={'active'} href='/news'\n\t\t\t\t\t\t\t\tdata-name='main'\n\t\t\t\t\t\t\t\tonClick={this.toggleDropdown}\n\t\t\t\t\t\t\t><i class='fas fa-quote-right' /> <Text id='header.news'>Nyheter</Text></Link>\n\t\t\t\t\t\t</li> */}\n\t\t\t\t\t\t{/* <li class='nav-item d-block d-lg-none'>\n\t\t\t\t\t\t\t<Link className='nav-link' activeClassName={'active'} href='/howto'\n\t\t\t\t\t\t\t\tdata-name='main'\n\t\t\t\t\t\t\t\tonClick={this.toggleDropdown}\n\t\t\t\t\t\t\t><i class='fas fa-quote-right' /> <Text id='header.howto'>Hvordan gjør man det?</Text></Link>\n\t\t\t\t\t\t</li> */}\n\t\t\t\t\t</ul>\n\n\t\t\t\t\t<ul class='navbar-nav ml-auto '>\n\t\t\t\t\t\t{/* <li class='nav-item mr-2'>\n\t\t\t\t\t\t\t<Link className='nav-link' activeClassName={'active'}\n\t\t\t\t\t\t\t\thref='/users/notifications'\n\t\t\t\t\t\t\t\tdata-name='main'\n\t\t\t\t\t\t\t\tonClick={this.toggleDropdown}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<i class='fas fa-bell mr-1' />\n\t\t\t\t\t\t\t\t{unread > 0 && <>\n\t\t\t\t\t\t\t\t\t<span class='badge badge-pill badge-danger'>{unread > 9 ? '9+' : unread}</span>\n\t\t\t\t\t\t\t\t</>}\n\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t</li> */}\n\t\t\t\t\t\t<li class='nav-item mr-2'>\n\t\t\t\t\t\t\t<div class='form-row align-items-center'>\n\t\t\t\t\t\t\t\t<div class='col-auto my-1' style='width: 80px;'>\n\t\t\t\t\t\t\t\t\t<select class='custom-select'\n\t\t\t\t\t\t\t\t\t\tstyle='background-color: inherit; border: none; padding: 0; height: 1.1em; font-size: 0.9em;'\n\t\t\t\t\t\t\t\t\t\tonInput={this.changeLanguage}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<option value='no' selected={language === 'no'}>🇳🇴 NO</option>\n\t\t\t\t\t\t\t\t\t\t<option value='en' selected={language === 'en'}>🇬🇧 EN</option>\n\t\t\t\t\t\t\t\t\t\t<option value='es' selected={language === 'es'}>🇪🇸 ES</option>\n\t\t\t\t\t\t\t\t\t\t<option value='de' selected={language === 'de'}>🇩🇪 DE</option>\n\t                                    <option value='fr' selected={language === 'fr'}>🇫🇷 FR</option>\n\t                                    <option value='ru' selected={language === 'ru'}>🇷🇺 RU</option>\n\t                                    <option value='se' selected={language === 'se'}>🇸🇪 SE</option>\n\t\t\t\t\t\t\t\t\t</select>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t\t<li class='nav-item d-block d-lg-none'>\n\t\t\t\t\t\t\t<Link className='nav-link' activeClassName={'active'}\n\t\t\t\t\t\t\t\tdata-name='main'\n\t\t\t\t\t\t\t\tonClick={this.toggleDarkmode}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<i class={`${darkmode ? 'fas text-warning' : 'far'} fa-moon`} /> <Text id='header.darkmode'>Nattmodus</Text>\n\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t\t<li class='nav-item mr-2 d-none d-lg-block'>\n\t\t\t\t\t\t\t<button class='btn btn-link'\n\t\t\t\t\t\t\t\tdata-name='profile'\n\t\t\t\t\t\t\t\tonClick={this.toggleDarkmode}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<i class={`${darkmode ? 'fas text-warning' : 'far'} fa-moon`} />\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t\t{/* <li class='nav-item ml-auto d-none d-lg-block'>\n\t\t\t\t\t\t\t<form class='form-inline my-2 my-lg-0'>\n\t\t\t\t\t\t\t\t<Localizer>\n\t\t\t\t\t\t\t\t\t<input class='form-control form-control-sm mr-sm-2' type='search' placeholder={<Text id='header.search-placeholder'>Søk etter det meste...</Text>}\n\t\t\t\t\t\t\t\t\t\tvalue={searchText}\n\t\t\t\t\t\t\t\t\t\tonInput={linkState(this, 'searchText')}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</Localizer>\n\t\t\t\t\t\t\t\t<button class='btn btn-sm btn-outline-success my-2 my-sm-0' type='button'\t\n\t\t\t\t\t\t\t\t\tonClick={this.search}\n\t\t\t\t\t\t\t\t><Text id='header.search'>Søk</Text></button>\n\t\t\t\t\t\t\t</form>\n\t\t\t\t\t\t</li> */}\n\t\t\t\t\t</ul>\n\n\t\t\t\t    \n\n\t\t\t\t</div>\n\t\t\t</nav>\n\t\t);\n\t}\n}\n\nexport default Navigation;\n","import { h, Component } from 'preact';\nimport { observer } from 'mobx-preact';\nimport { toJS } from 'mobx';\nimport util from 'preact-util';\nimport { Text, Localizer } from 'preact-i18n';\n\nimport DragNDropFileupload from './dragNdropFileupload';\n\n@observer\nclass Files extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            files: [],\n        };\n    }\n    \n    handleAddImage = (file) => {\n        // <Images saved={saved} object={dog} field={field} updateField={updateField} />\n        // updateFieldValue = ({ id, field, value, datatype, elementtype, isNew = false, skipTimer = false }) => {\n        const {\n            updateField,\n            object,\n            field,\n        } = this.props;\n        updateField({ id: object.id, field, value: file });\n\n        // let images = toJS(object.images);\n        // if (!util.isArray(images)) {\n        //     images = [];\n        // }\n        // images.push(file);\n        // updateField({ id: object.id, field: 'images', value: images });\n    };\n\n    render() {\n        const { uploadStatus = () => {}, before = () => {}, after = () => {}, autoOpen = false } = this.props;\n        return (\n            <div class='row'>\n                <div class='col-12'>\n                    <Text id='form.files.upload-file'>Last opp fil</Text>:<br />\n                    <DragNDropFileupload\n                        handleAddImage={this.handleAddImage}\n                        apiUrl={'/api/fileupload'}\n                        uploadStatus={uploadStatus}\n                        before={before}\n                        after={after}\n                        autoOpen={autoOpen}\n                    >\n                        <div style={{ height: 30, width: '100%' }}>\n                            {/* {files.map((file, idx) => (\n                                <div key={idx}>\n                                    {file.name}\n                                    Total: {util.asString(file, 'load', 'total')}\n                                    <img style='width: 48px;'\n                                        alt='Preview'\n                                        key={file.preview}\n                                        src={file.src}\n                                    />\n                                </div>\n                            ))} */}\n                        </div>\n                    </DragNDropFileupload>\n                </div>\n            </div>\n        );\n    }\n}\n\nexport default Files;\n","import { h, Component } from 'preact';\nimport { observer } from 'mobx-preact';\nimport { toJS } from 'mobx';\nimport util from 'preact-util';\n\nimport DragNDropFileupload from './dragNdropFileupload';\n\n@observer\nclass Images extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            files: [],\n        };\n    }\n    \n    handleAddImage = (file) => {\n        const { addToImages = true } = this.props;\n\n        // <Images saved={saved} object={dog} field={field} updateField={updateField} />\n        // updateFieldValue = ({ id, field, value, datatype, elementtype, isNew = false, skipTimer = false }) => {\n        const {\n            updateField,\n            object,\n            field,\n        } = this.props;\n\n        if (field) {\n            updateField({ id: object.id, field, value: file, skipTimer: true });\n        }\n\n        // let images = toJS(object.images);\n        // if (!util.isArray(images)) {\n        //     images = [];\n        // }\n        if (addToImages) {\n            const images = [];\n            images.push(file);\n            updateField({ id: object.id, field: 'images', value: images, skipTimer: true });\n        }\n        // const allImages = [];\n        // allImages.push(file);\n        // updateField({ id: object.id, field: 'allImages', value: allImages, skipTimer: true });\n    };\n\n    render() {\n        const { uploadStatus = () => {}, before = () => {}, after = () => {}, autoOpen = true } = this.props;\n        return (\n            <div class='row'>\n                <div class='col-12'>\n                    <DragNDropFileupload\n                        handleAddImage={this.handleAddImage}\n                        uploadStatus={uploadStatus}\n                        apiUrl={'/api/fileupload'}\n                        before={before}\n                        after={after}\n                        autoOpen={autoOpen}\n                    >\n                        <div style={{ height: 30, width: '100%' }}>\n                            {/* {files.map((file, idx) => (\n                                <div key={idx}>\n                                    {file.name}\n                                    Total: {util.asString(file, 'load', 'total')}\n                                    <img style='width: 48px;'\n                                        alt='Preview'\n                                        key={file.preview}\n                                        src={file.src}\n                                    />\n                                </div>\n                            ))} */}\n                        </div>\n                    </DragNDropFileupload>\n                </div>\n            </div>\n        );\n    }\n}\n\nexport default Images;\n","import { h, Component, createRef } from 'preact';\nimport { observer } from 'mobx-preact';\nimport util from 'preact-util';\nimport { Text, Localizer, withText } from 'preact-i18n';\n\nconst debug = false;\nconst debugName = 'Images';\n\n@observer\nclass DragNDropFileupload extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            drag: false,\n            loadingProgress: 0,\n            uploadedFiles: [],\n            uploadedFilesData: {},\n        };\n    }\n\n    dropRef = createRef();\n\n    handleDrag = (e) => {\n        e.preventDefault();\n        e.stopPropagation();\n    }\n\n    handleDragIn = (e) => {\n        e.preventDefault();\n        e.stopPropagation();\n        this.dragCounter++;\n        if (e.dataTransfer.items && e.dataTransfer.items.length > 0) {\n            this.setState({ drag: true });\n        }\n    }\n\n    handleDragOut = (e) => {\n        e.preventDefault();\n        e.stopPropagation();\n        this.dragCounter--;\n        if (this.dragCounter === 0) {\n            this.setState({ drag: false });\n        }\n    }\n\n    handleDrop = (e) => {\n        if (debug) {\n            console.log(`${debugName}.handleDrop: event`, e);\n        }\n        e.preventDefault();\n        e.stopPropagation();\n        this.setState({ drag: false });\n        if (e.dataTransfer.files && e.dataTransfer.files.length > 0) {\n            // this.props.handleDrop(e.dataTransfer.files);\n            // e.dataTransfer.clearData();\n            for (let i = 0, l = e.dataTransfer.files.length; i < l; i += 1) {\n                const photo = e.dataTransfer.files[i];\n                // if (photo.type.match('image.*')) {\n                this.readLocalFile(photo);\n                // }\n            }\n            this.dragCounter = 0;\n        }\n    }\n\n    // Upload\n    handleAddFiles = (event) => {\n        event.preventDefault();\n        const el = event.target;\n        if (debug) {\n            console.log(`${debugName}.handleAddFiles: event, el`, event, el);\n        }\n        for (let i = 0, l = el.files.length; i < l; i += 1) {\n            const photo = el.files[i];\n            // if (photo.type.match('image.*')) {\n            this.readLocalFile(photo);\n            // }\n        }\n    }\n\n    handleEvent = (e, fileObject) => {\n        if (debug) {\n            console.log(`${debugName}.handleEvent[${fileObject.name}]: ${e.type}: `\n                + `${e.loaded} bytes transferred of ${e.total}. Is lengthComputable: ${e.lengthComputable}: `\n                + `${JSON.stringify(e)}`);\n        }\n    }\n\n    handleUpload = (fileObject) => {\n        if (debug) {\n            console.log(`${debugName}.handleUpload[${fileObject.name}]`);\n        }\n\n        const { uploadStatus = () => {}, before = () => {}, after = () => {} } = this.props;\n        uploadStatus(false);\n\n        if (util.isFunction(before)) {\n            before();\n        }\n\n        const formData = new FormData();\n        formData.append('files[]', fileObject);\n        const uploadMeta = {\n            progress: 1,\n        };\n\n        uploadMeta.xhr = new XMLHttpRequest();\n\n        uploadMeta.xhr.upload.addEventListener('progress', (event) => {\n            const fileObj = fileObject;\n            this.updateProgress(event, fileObj);\n        });\n        uploadMeta.xhr.addEventListener('loadstart', (event) => {\n            const fileObj = fileObject;\n            this.handleEvent(event, fileObj);\n        });\n        uploadMeta.xhr.addEventListener('load', (event) => {\n            const fileObj = fileObject;\n            this.handleEvent(event, fileObj);\n        });\n        uploadMeta.xhr.addEventListener('loadend', (event) => {\n            const fileObj = fileObject;\n            if (util.isFunction(after)) {\n                after();\n            }\n            this.handleEvent(event, fileObj);\n        });\n        uploadMeta.xhr.addEventListener('progress', (event) => {\n            const fileObj = fileObject;\n            this.handleEvent(event, fileObj);\n        });\n        uploadMeta.xhr.addEventListener('error', (event) => {\n            const fileObj = fileObject;\n            this.handleEvent(event, fileObj);\n        });\n        uploadMeta.xhr.addEventListener('abort', (event) => {\n            const fileObj = fileObject;\n            this.handleEvent(event, fileObj);\n        });\n        uploadMeta.xhr.addEventListener('readystatechange', (event) => {\n            const fileObj = fileObject;\n            this.uploadDone(event, fileObj);\n        });\n\n        uploadMeta.xhr.open('POST', `${util.getApiServer()}${this.props.apiUrl}`);\n        uploadMeta.xhr.setRequestHeader('Authorization', `Bearer ${util.getJwtToken()}`);\n        uploadMeta.xhr.send(formData);\n\n        const filename = fileObject.name;\n        const uploadedFilesData = this.state.uploadedFilesData;\n        if (!uploadedFilesData[filename]) {\n            uploadedFilesData[filename] = {};\n        }\n        uploadedFilesData[filename].uploadMeta = uploadMeta;\n        uploadedFilesData[filename].imageNum = this.state.imageNum;\n        this.setState({ uploadedFilesData });\n    }\n\n    // eslint-disable-next-line\n    readLocalFile = (fileObject) => {\n        return new Promise((resolve, reject) => {\n            const reader = new FileReader();\n\n            reader.addEventListener('error', (error) => {\n                if (debug) {\n                    console.log(`${debugName}.FileReader: Error occurred reading file: ${fileObject.name}: ${error}`);\n                }\n                reject(error);\n            });\n\n            reader.addEventListener('load', (event) => {\n                if (debug) {\n                    console.log(`${debugName}.FileReader: File: ${fileObject.name} read successfully: `\n                        + `${JSON.stringify(event)}`);\n                }\n                const photo = fileObject;\n                const filename = photo.name;\n                const uploadedFilesData = this.state.uploadedFilesData;\n                if (!uploadedFilesData[filename]) {\n                    uploadedFilesData[filename] = {};\n                }\n                uploadedFilesData[filename].event = event;\n                this.setState({ uploadedFilesData });\n                this.handleUpload(photo);\n                resolve(event);\n            });\n\n            reader.readAsDataURL(fileObject);\n        });\n    }\n\n    updateProgress = (event, fileObject) => {\n        if (event.lengthComputable) {\n            const filename = fileObject.name;\n            const uploadedFilesData = this.state.uploadedFilesData;\n            const percentComplete = (event.loaded / event.total) * 100;\n            if (debug) {\n                console.log(`${debugName}.updateProgress[${filename}].progress`, percentComplete);\n            }\n            uploadedFilesData[filename].uploadMeta.progress = percentComplete;\n            this.setState({ uploadedFilesData });\n        }\n    }\n\n    uploadDone = (event, fileObject) => {\n        const filename = fileObject.name;\n        const uploadedFilesData = this.state.uploadedFilesData;\n        const uploadMeta = uploadedFilesData[filename].uploadMeta;\n        if (debug) {\n            console.log(`${debugName}.uploadDone[${filename}].uploadedFilesData`, uploadedFilesData);\n            console.log(`${debugName}.uploadDone[${filename}].uploadMeta`, uploadMeta);\n            console.log(`${debugName}.uploadDone.event`, event);\n        }\n\n        if (uploadMeta && uploadMeta.xhr.readyState === 4 && uploadMeta.xhr.status === 201) {\n            const response = JSON.parse(uploadMeta.xhr.responseText);\n            const files = response.data.files;\n            for (let i = 0; i < files.length; i += 1) {\n                const file = files[i];\n                this.addFileToUpload(file);\n                this.fileInput.value = '';\n            }\n        }\n    }\n\n    addFileToUpload(file) {\n        if (debug) {\n            console.log(`${debugName}.addFileToUpload[${file.name}]`);\n        }\n        const { uploadedFilesData } = this.state;\n        const { handleAddImage, uploadStatus = () => {} } = this.props;\n\n        delete uploadedFilesData[file.name];\n        this.setState({ uploadedFilesData });\n        handleAddImage(file);\n        uploadStatus(true);\n    }\n    // /Upload\n\n    componentDidMount() {\n        const div = this.dropRef.current;\n        div.addEventListener('dragenter', this.handleDragIn);\n        div.addEventListener('dragleave', this.handleDragOut);\n        div.addEventListener('dragover', this.handleDrag);\n        div.addEventListener('drop', this.handleDrop);\n\n        const { autoOpen } = this.props;\n\n        if (autoOpen) {\n            setTimeout(() => {\n                // console.log('[setTimeout]');\n                this.fileInput.click();\n            }, 10);\n        }\n    }\n\n    componentWillUnmount() {\n        const div = this.dropRef.current;\n        div.removeEventListener('dragenter', this.handleDragIn);\n        div.removeEventListener('dragleave', this.handleDragOut);\n        div.removeEventListener('dragover', this.handleDrag);\n        div.removeEventListener('drop', this.handleDrop);\n    }\n\n    render() {\n        const { uploadedFilesData } = this.state;\n\n        return (\n            <div style={{ position: 'relative' }} ref={this.dropRef}>\n                {this.state.drag &&\n                <div style={{\n                    border: 'dashed grey 4px',\n                    backgroundColor: 'rgba(255,255,255,.8)',\n                    position: 'absolute',\n                    top: 0,\n                    bottom: 0,\n                    left: 0,\n                    right: 0,\n                    zIndex: 9999,\n                }}>\n                    <div\n                        style={{\n                            position: 'absolute',\n                            top: '50%',\n                            right: 0,\n                            left: 0,\n                            textAlign: 'center',\n                            color: 'grey',\n                            fontSize: 36,\n                        }}\n                    >\n                        <div><Text id='imageupload.drag-files-here'>drop your files here :)</Text></div>\n                    </div>\n                </div>}\n\n                <div>\n                    <input class='btn btn-info col-sm-12' multiple\n                        type='file'\n                        id='image-file'\n                        onchange={this.handleAddFiles}\n                        ref={(c) => {\n                            this.fileInput = c;\n                        }}\n                    />\n                </div>\n                <div>\n                    {Object.keys(uploadedFilesData).length > 0 ? (<h3><Text id='imageupload.upload-images'>Uploaded images</Text></h3>) : ''}\n                    <ul class='list-group'>\n                        {Object.keys(uploadedFilesData).map((key) => {\n                            const { uploadMeta = {} } = uploadedFilesData[key];\n                            const isImage = key.match(/(jpg|jpeg|png|gif|heic|heif|svg|webp|tif)/i);\n                            return (\n                                <li class='list-group-item list-group-item-action flex-column align-items-start'>\n                                    <div class='d-flex w-100 justify-content-between'>\n                                        {isImage && <img class='img-fluid mr-3'\n                                            src={uploadedFilesData[key].event.target.result}\n                                            style='max-height: 50px;'\n                                        />}\n                                        <small>{uploadedFilesData[key].event.uploadDone}</small>\n                                        <Text id='imageupload.uploading-image'>Laster opp bilde...</Text>\n                                        <small>{util.formatBytes(uploadedFilesData[key].event.total, 2)}</small>\n                                    </div>\n                                    <div class='progress mt-1' style='height: 4px;'>\n                                        <div\n                                            class='progress-bar progress-bar-striped progress-bar-animated bg-success'\n                                            role='progressbar'\n                                            style={`width: ${uploadMeta.progress}%; height: 4px;`}\n                                            aria-valuenow={uploadMeta.progress}\n                                            aria-valuemin='0'\n                                            aria-valuemax='100'\n                                        />\n                                    </div>\n                                </li>\n                            );\n                        })}\n                    </ul>\n                </div>\n\n                {this.props.children}\n            </div>\n        );\n    }\n}\n\nexport default DragNDropFileupload;\n"],"sourceRoot":""}