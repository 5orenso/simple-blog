(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{t1gC:function(e,t,a){"use strict";a.r(t),function(e){function c(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);t&&(c=c.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,c)}return a}function s(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?c(Object(a),!0).forEach((function(t){l(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):c(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function l(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var r,i=a("hosL"),n=a("Utv1"),o=a("/eY4"),b=a("OhSV"),h=a("Y3FI"),d=a("ZOvn"),p=d.a.marginTop(!1),u=d.a.marginTopBack(!1),m=d.a.marginBottom(),O=(d.a.subMenuMarginTop(),{isLoading:!1}),f=Object(o.a)(r=function(t){function a(e){var a;return(a=t.call(this,e)||this).signupToRace=function(){return new Promise((function(e,t){var c,l,r,i;return r=(c=a.props.stores).userStore.user,i=(l=c.raceStore).signup,Promise.resolve(l.addContestant({id:a.props.raceid,classId:i.class,newContestant:s({team:r.team,firstname:r.firstname,lastname:r.lastname,sportsClub:r.sportsClub,email:r.email,cellphone:r.cellphone,facebook:r.facebook,instagram:r.instagram},i)})).then((function(){try{return e()}catch(e){return t(e)}}),t)}))},a.updateSignup=function(e){a.props.stores.raceStore.updateObjectKeyValue("signup",e.target.id,e.target.value)},a.editSignup=function(e){var t,c=a.props.raceid,s=a.props.stores.raceStore,l=e.target.id,r=e.target.value,i=e.target.dataset,o=i.classid,b=i.contestantid;s.updateObjectKeyValue("signup",l,r);var h=((t={raceClassId:o,contestantId:b})["raceClassContestant"+n.a.ucfirst(l)]=r,t);clearTimeout(a.updateTimer[l]),a.updateTimer[l]=setTimeout((function(){return new Promise((function(e){return s.editClass({id:c,data:h}),e()}))}),500)},a.likeRace=function(){return new Promise((function(e,t){var c;return c=a.props.stores.raceStore,Promise.resolve(c.likeRace({id:c.race.id})).then((function(a){try{return a,e()}catch(e){return t(e)}}),t)}))},a.toggleAddComment=function(e){var t=e.target.parentElement.dataset.id||e.target.dataset.id;a.setState({showAddComment:!a.state.showAddComment},(function(){a.inputRef[t]&&a.inputRef[t].focus()}))},a.back=function(){Object(h.route)("/",!0)},a.state=s({},O),a.inputRef={},a.updateTimer={},a}var c,l;l=t,(c=a).prototype=Object.create(l.prototype),c.prototype.constructor=c,c.__proto__=l;var r=a.prototype;return r.loadRace=function(e){return new Promise(function(t,a){var c,l,r,i,n,o,b,h,d,p;return void 0===e&&(e=this.props),this.setState({isLoading:!0}),l=(c=e.stores).raceStore,i=void 0===(r=c.userStore.user)?{}:r,Promise.resolve(l.load(e.raceid)).then(function(){try{if(this.setState({isLoading:!1}),n={},(o=l.race).classes&&i&&i.email)for(b=0,h=o.classes.length;b<h;b+=1)(d=o.classes[b]).contestants&&(p=d.contestants.findIndex((function(e){return e.email===i.email})))>-1&&(n=s({},d.contestants[p]));return l.updateKeyValue("signup",n),t()}catch(e){return a(e)}}.bind(this),a)}.bind(this))},r.componentDidMount=function(){this.loadRace()},r.componentWillReceiveProps=function(e){e.raceid!==this.props.raceid&&this.loadRace(e)},r.render=function(){var t=this.props.stores,a=t.userStore,c=t.raceStore,s=a.user,l=void 0===s?{}:s,r=a.teams,o=void 0===r?[]:r,h=c.race,d=c.signup,O={};d.class&&(O=c.getRaceClassById(d.class));var f=new Date;return Object(i.h)("div",{class:"container-fluid",style:"margin-bottom: "+m+"; margin-top: "+p+";"},Object(i.h)("div",{class:"d-flex justify-content-between mb-2"},Object(i.h)("div",null,Object(i.h)("button",{class:"btn btn-link pl-0 fixed-top",style:"top: "+u+"; left: 5px; font-size: 25px; width: 40px;",onClick:this.back},Object(i.h)("i",{class:"fas fa-arrow-circle-left"}))),Object(i.h)("div",null,Object(i.h)("h5",{class:"text-muted"}," "))),Object(i.h)("h2",null,Object(i.h)(b.c,{id:"races.signup"},"Påmelding")," ",Object(i.h)("span",{class:"font-weight-lighter",style:"letter-spacing: -2px;"}," - ",h.title)),Object(i.h)("div",{class:"mb-1"},h.signupStartDate&&Object(i.h)(e,null,Object(i.h)(b.c,{id:"races.periode"},"Periode"),": ",n.a.formatDate(h.signupStartDate,{locale:"no-NB",hour12:!1,hour:"2-digit",minute:"2-digit"})),h.signupEndDate&&Object(i.h)(e,null," - ",n.a.formatDate(h.signupEndDate,{locale:"no-NB",hour12:!1,hour:"2-digit",minute:"2-digit"}))),f>=new Date(h.signupStartDate)&&f<=new Date(h.signupEndDate)?Object(i.h)(e,null,Object(i.h)("span",{class:"font-weight-lighter"},Object(i.h)(b.c,{id:"races.signed-in-as"},"Logget inn som"),":")," ",l.email,Object(i.h)("br",null),Object(i.h)("br",null),d.id?Object(i.h)(e,null,Object(i.h)("div",{class:"font-weight-bold mb-4"},Object(i.h)("i",{class:"fas fa-check text-success"})," ",Object(i.h)(b.c,{id:"races.signed-up"},"Din bruker er påmeldt!"),Object(i.h)("br",null)),h.signuppayment&&Object(i.h)(e,null,Object(i.h)("div",{class:"form-group row my-0"},Object(i.h)("label",{for:"cellphone",class:"col-2 col-form-label text-right font-weight-lighter"},Object(i.h)(b.c,{id:"races.signup"},"Påmelding")),Object(i.h)("div",{class:"col-10"},d.paidSignupfee?Object(i.h)("div",{class:"py-2"},Object(i.h)(b.c,{id:"races.paid"},"Betalt"),": ",n.a.formatDate(d.paidSignupfee),Object(i.h)("i",{class:"fas fa-check text-success ml-3"})):Object(i.h)(e,null,Object(i.h)("div",{class:"alert alert-danger mb-1",role:"alert"},Object(i.h)("h5",null,Object(i.h)("span",{class:"font-weight-lighter"},Object(i.h)(b.c,{id:"races.payment-info"},"Betaling påmelding"),":")," ",h.signuppayment,Object(i.h)("br",null),O.signupfee||h.signupfee," NOK")))))),Object(i.h)("div",{class:"clearfix mt-2"},Object(i.h)("span",{class:"font-weight-lighter float-right"},Object(i.h)(b.c,{id:"races.click-to-change"},"Klikk for å endre info i påmeldingen."))),Object(i.h)("div",{class:"form-group row my-0"},Object(i.h)("label",{for:"cellphone",class:"col-2 col-form-label text-right font-weight-lighter"},Object(i.h)(b.c,{id:"races.cellphone"},"Mobil")),Object(i.h)("div",{class:"col-10"},Object(i.h)(b.b,null,Object(i.h)("input",{type:"text",class:"form-control-plaintext",id:"cellphone","data-classid":d.class,"data-contestantid":d.id,onInput:this.editSignup,value:d.cellphone,placeholder:Object(i.h)(b.c,{id:"races.cellphone-help"},"Hva er mobilnummer ditt?")})))),Object(i.h)("div",{class:"form-group row my-0"},Object(i.h)("label",{for:"firstname",class:"col-2 col-form-label text-right font-weight-lighter"},Object(i.h)(b.c,{id:"races.firstname"},"Fornavn")),Object(i.h)("div",{class:"col-10"},Object(i.h)(b.b,null,Object(i.h)("input",{type:"text",class:"form-control-plaintext",id:"firstname","data-classid":d.class,"data-contestantid":d.id,onInput:this.editSignup,value:d.firstname,placeholder:Object(i.h)(b.c,{id:"races.firstname-help"},"Hva er fornavnet ditt?")})))),Object(i.h)("div",{class:"form-group row my-0"},Object(i.h)("label",{for:"lastname",class:"col-2 col-form-label text-right font-weight-lighter"},Object(i.h)(b.c,{id:"races.lastname"},"Etternavn")),Object(i.h)("div",{class:"col-10"},Object(i.h)(b.b,null,Object(i.h)("input",{type:"text",class:"form-control-plaintext",id:"lastname","data-classid":d.class,"data-contestantid":d.id,onInput:this.editSignup,value:d.lastname,placeholder:Object(i.h)(b.c,{id:"races.lastname-help"},"Hva er etternavnet ditt?")})))),Object(i.h)("div",{class:"form-group row my-0"},Object(i.h)("label",{for:"sportsClub",class:"col-2 col-form-label text-right font-weight-lighter"},Object(i.h)(b.c,{id:"races.sportsclub"},"Klubb")),Object(i.h)("div",{class:"col-10"},Object(i.h)(b.b,null,Object(i.h)("input",{type:"text",class:"form-control-plaintext",id:"sportsClub","data-classid":d.class,"data-contestantid":d.id,onInput:this.editSignup,value:d.sportsClub,placeholder:Object(i.h)(b.c,{id:"races.sportsClub-help"},"Hvilken klubb tilhører du?")})))),Object(i.h)("div",{class:"form-group row my-0"},Object(i.h)("label",{for:"facebook",class:"col-2 col-form-label text-right font-weight-lighter"},Object(i.h)(b.c,{id:"races.facebook"},"Facebook")),Object(i.h)("div",{class:"col-10"},Object(i.h)(b.b,null,Object(i.h)("input",{type:"text",class:"form-control-plaintext",id:"facebook","data-classid":d.class,"data-contestantid":d.id,onInput:this.editSignup,value:d.facebook,placeholder:Object(i.h)(b.c,{id:"races.facebook-help"},"Hva er Facebook brukernavnet ditt?")})))),Object(i.h)("div",{class:"form-group row my-0"},Object(i.h)("label",{for:"instagram",class:"col-2 col-form-label text-right font-weight-lighter"},Object(i.h)(b.c,{id:"races.instagram"},"Instagram")),Object(i.h)("div",{class:"col-10"},Object(i.h)(b.b,null,Object(i.h)("input",{type:"text",class:"form-control-plaintext",id:"instagram","data-classid":d.class,"data-contestantid":d.id,onInput:this.editSignup,value:d.instagram,placeholder:Object(i.h)(b.c,{id:"races.instagram-help"},"Hva er Instagram brukernavnet ditt?")})))),Object(i.h)("div",{class:"form-group row my-0"},Object(i.h)("label",{for:"team",class:"col-2 col-form-label text-right font-weight-lighter"},Object(i.h)(b.c,{id:"races.team"},"Team")),Object(i.h)("div",{class:"col-10"},Object(i.h)("select",{class:"form-control-plaintext",id:"team","aria-describedby":"teamHelp","data-classid":d.class,"data-contestantid":d.id,onInput:this.editSignup,value:d.team},Object(i.h)("option",{value:""},"-- ",Object(i.h)(b.c,{id:"races.choose-team"},"Velg team")," --"),o.map((function(e){return Object(i.h)("option",{value:e.id},e.name)}))))),Object(i.h)("div",{class:"form-group row my-0"},Object(i.h)("label",{for:"team",class:"col-2 col-form-label text-right font-weight-lighter"},Object(i.h)(b.c,{id:"races.class"},"Klasse")),Object(i.h)("div",{class:"col-10"},Object(i.h)("select",{class:"form-control-plaintext",id:"class","aria-describedby":"classHelp",onInput:this.editSignup,value:d.class,disabled:!0},Object(i.h)("option",{value:""},"-- ",Object(i.h)(b.c,{id:"races.choose-class"},"Velg klasse")," --"),h.classes&&h.classes.sort((function(e,t){return e.distance-t.distance})).map((function(t){return Object(i.h)(e,null,Object(i.h)("option",{value:t.id},t.title," - ",t.distance," km - Påmelding: ",t.signupfee||h.signupfee," NOK"))})))))):Object(i.h)(e,null,Object(i.h)("div",{class:"form-group"},Object(i.h)("label",{for:"cellphone"},Object(i.h)(b.c,{id:"races.cellphone"},"Mobil")),Object(i.h)("input",{type:"text",class:"form-control",id:"cellphone","aria-describedby":"cellphoneHelp",placeholder:l.cellphone,onInput:this.updateSignup,value:d.cellphone}),Object(i.h)("small",{id:"cellphoneHelp",class:"form-text text-muted"},Object(i.h)(b.c,{id:"races.cellphone-help"},"'Hva er mobilnummer ditt?'"))),Object(i.h)("div",{class:"row"},Object(i.h)("div",{class:"col"},Object(i.h)("div",{class:"form-group"},Object(i.h)("label",{for:"firstname"},Object(i.h)(b.c,{id:"races.firstname"},"Fornavn")),Object(i.h)("input",{type:"text",class:"form-control",id:"firstname","aria-describedby":"firstnameHelp",placeholder:l.firstname,onInput:this.updateSignup,value:d.firstname}),Object(i.h)("small",{id:"firstnameHelp",class:"form-text text-muted"},Object(i.h)(b.c,{id:"races.firstname-help"},"Hva er fornavnet ditt?")))),Object(i.h)("div",{class:"col"},Object(i.h)("div",{class:"form-group"},Object(i.h)("label",{for:"lastname"},Object(i.h)(b.c,{id:"races.lastname"},"Etternavn")),Object(i.h)("input",{type:"text",class:"form-control",id:"lastname","aria-describedby":"lastnameHelp",placeholder:l.lastname,onInput:this.updateSignup,value:d.lastname}),Object(i.h)("small",{id:"lastnameHelp",class:"form-text text-muted"},Object(i.h)(b.c,{id:"races.lastname-help"},"Hva er etternavnet ditt?"))))),Object(i.h)("div",{class:"form-group"},Object(i.h)("label",{for:"sportsClub"},Object(i.h)(b.c,{id:"races.sportsclub"},"Klubb")),Object(i.h)("input",{type:"text",class:"form-control",id:"sportsClub","aria-describedby":"sportsClubHelp",placeholder:l.sportsClub,onInput:this.updateSignup,value:d.sportsClub}),Object(i.h)("small",{id:"sportsClubHelp",class:"form-text text-muted"},Object(i.h)(b.c,{id:"races.sportsClub-help"},"Hvilken klubb tilhører du?"))),Object(i.h)("div",{class:"row"},Object(i.h)("div",{class:"col"},Object(i.h)("div",{class:"form-group"},Object(i.h)("label",{for:"facebook"},Object(i.h)(b.c,{id:"races.facebook"},"Facebook")),Object(i.h)("input",{type:"text",class:"form-control",id:"facebook","aria-describedby":"facebookHelp",placeholder:l.facebook,onInput:this.updateSignup,value:d.facebook}),Object(i.h)("small",{id:"facebookHelp",class:"form-text text-muted"},Object(i.h)(b.c,{id:"races.facebook-help"},"Hva er Facebook brukernavnet ditt?")))),Object(i.h)("div",{class:"col"},Object(i.h)("div",{class:"form-group"},Object(i.h)("label",{for:"instagram"},Object(i.h)(b.c,{id:"races.instagram"},"Instagram")),Object(i.h)("input",{type:"text",class:"form-control",id:"instagram","aria-describedby":"instagramHelp",placeholder:l.instagram,onInput:this.updateSignup,value:d.instagram}),Object(i.h)("small",{id:"instagramHelp",class:"form-text text-muted"},Object(i.h)(b.c,{id:"races.instagram-help"},"Hva er Instagram brukernavnet ditt?"))))),Object(i.h)("div",{class:"form-group"},Object(i.h)("label",{for:"team"},Object(i.h)(b.c,{id:"races.team"},"Team")),Object(i.h)("select",{class:"form-control",id:"team","aria-describedby":"teamHelp",onInput:this.updateSignup,value:d.team},Object(i.h)("option",{value:""},"-- ",Object(i.h)(b.c,{id:"races.choose-team"},"Velg team")," --"),o.map((function(e){return Object(i.h)("option",{value:e.id},e.name)}))),Object(i.h)("small",{id:"teamHelp",class:"form-text text-muted"},Object(i.h)(b.c,{id:"races.choose-team-help"},"Velg fra dine team"))),Object(i.h)("div",{class:"form-group"},Object(i.h)("label",{for:"class"},Object(i.h)(b.c,{id:"races.class"},"Klasse")),Object(i.h)("select",{class:"form-control",id:"class","aria-describedby":"classHelp",onInput:this.updateSignup,value:d.class},Object(i.h)("option",{value:""},"-- ",Object(i.h)(b.c,{id:"races.choose-class"},"Velg klasse")," --"),h.classes&&h.classes.map((function(t){return Object(i.h)(e,null,Object(i.h)("option",{value:t.id},t.title," - ",t.distance," km - Påmelding: ",t.signupfee||h.signupfee," NOK"))}))),Object(i.h)("small",{id:"classHelp",class:"form-text text-muted"},Object(i.h)(b.c,{id:"races.choose-class-help"},"Velg ønsket klasse."))),Object(i.h)("div",{class:"form-group form-check"},Object(i.h)("input",{type:"checkbox",class:"form-check-input",id:"termsAndAgreement",onInput:this.updateSignup,checked:d.termsAndAgreement,value:!0}),Object(i.h)("label",{class:"form-check-label",for:"termsAndAgreement"},Object(i.h)(b.c,{id:"races.agreement-accept"},"Jeg har lest og godtar reglene for løpet."))),Object(i.h)("button",{type:"button",class:"btn btn-primary",onClick:this.signupToRace},Object(i.h)(b.c,{id:"races.do-signup"},"Meld meg på")))):Object(i.h)(e,null,f<new Date(h.signupStartDate)?Object(i.h)(e,null,Object(i.h)("h5",{class:"mt-4"},Object(i.h)("i",{class:"fas fa-exclamation-circle"})," ",Object(i.h)(b.c,{id:"races.signup-not-open-yet"},"Påmeldingen har ikke åpnet ennå!")),Object(i.h)("p",{class:"mt-4"},Object(i.h)(b.c,{id:"races.signup-opening"},"Påmeldingen åpner"),":",Object(i.h)("br",null),Object(i.h)("span",{class:"display-4"},n.a.formatDate(h.signupStartDate,{locale:"no-NB",hour12:!1,hour:"2-digit",minute:"2-digit"})))):Object(i.h)(e,null,Object(i.h)("h5",{class:"mt-4 mb-4"},Object(i.h)("i",{class:"fas fa-exclamation-circle"})," ",Object(i.h)(b.c,{id:"races.signup-closed"},"Påmeldingen er stengt!")))))},a}(i.Component))||r;t.default=f}.call(this,a("hosL").Fragment)}}]);
//# sourceMappingURL=route-app-races.chunk.03cd6.js.map