(window.webpackJsonp=window.webpackJsonp||[]).push([[66],{"/DnB":function(t,e,s){"use strict";function a(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,a)}return s}function l(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}var c,n=s("hosL"),i=(s("Utv1"),s("/eY4"));const r={};let o=Object(i.a)(c=class extends n.Component{constructor(t){super(t),this.state=function(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?a(Object(s),!0).forEach((function(e){l(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):a(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}({},r),this.container=null}componentDidMount(){const{horizontal:t,vertical:e=""}=this.props,s={behavior:"smooth"};t&&(s.inline=t),e&&(s.block=e),this.container.scrollIntoView(s)}render(){return Object(n.h)("div",{ref:t=>this.container=t}," ")}})||c;e.a=o},"3kDq":function(t,e,s){"use strict";(function(t){function a(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,a)}return s}function l(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}var c,n=s("hosL"),i=s("QRet"),r=s("Utv1"),o=s("/eY4"),h=s("OhSV");const b={};let d=Object(o.a)(c=class extends n.Component{constructor(t){super(t),this.state=function(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?a(Object(s),!0).forEach((function(e){l(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):a(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}({},b)}render(){const{raceStore:e,appState:s}=this.props.stores,{title:a}=this.props,{language:l="en"}=s,{race:c}=e,o=new Date;let b="";return o>=new Date(c.startDate)&&o<=new Date(c.endDate)?b="race":o>=new Date(c.signupStartDate)&&o<=new Date(c.signupEndDate)?b="signup":o>new Date(c.endDate)&&(b="done"),Object(n.h)(t,null,Object(n.h)("div",{class:"d-flex"},Object(n.h)("div",{class:"flex-fill"},function(t,e=""){return Object(i.d)(()=>{document.title="Homerun Race: "+t},[t]),Object(n.h)("h1",{class:e},t)}(a,"mb-0")),Object(n.h)("div",{class:"flex-fill text-center d-none d-md-block"},Object(n.h)("h1",{class:"mb-0",style:"line-height: 0.8em;"},Object(n.h)("span",{class:"font-weight-lighter",style:"letter-spacing: -1px;"},c.title)),Object(n.h)("small",{class:""},c.startDate&&Object(n.h)(t,null,r.a.formatDate(c.startDate,{locale:l,hour12:!1,hour:"2-digit",minute:"2-digit"})),c.endDate&&Object(n.h)(t,null," - ",r.a.formatDate(c.endDate,{locale:l,hour12:!1,hour:"2-digit",minute:"2-digit"})))),Object(n.h)("div",{class:"flex-fill"},Object(n.h)("h3",{class:"float-right"},"signup"===b&&!c.liveRace&&Object(n.h)(t,null,Object(n.h)("div",{class:"spinner-grow text-primary",role:"status"}),Object(n.h)("span",{class:"badge badge-primary ml-2"},Object(n.h)(h.c,{id:"races.signup-open"},"Påmelding åpen"))),"race"===b&&Object(n.h)(t,null,Object(n.h)("div",{class:"spinner-grow text-danger",role:"status"}),Object(n.h)("span",{class:"badge badge-danger ml-2"},Object(n.h)(h.c,{id:"races.race-in-progress"},"Løp pågår"))),"done"===b&&Object(n.h)(t,null,Object(n.h)("i",{class:"fas fa-check text-success"}),Object(n.h)("span",{class:"badge badge-success ml-2"},Object(n.h)(h.c,{id:"races.race-finished"},"Løp avsluttet")))))),Object(n.h)("div",{class:"d-block d-md-none"},Object(n.h)("h4",{class:"mb-0",style:"line-height: 0.8em;"},Object(n.h)("span",{class:"font-weight-light",style:"letter-spacing: -1px;"},c.title)),Object(n.h)("small",null,c.startDate&&Object(n.h)(t,null,r.a.formatDate(c.startDate,{locale:l,hour12:!1,hour:"2-digit",minute:"2-digit"})),c.endDate&&Object(n.h)(t,null," - ",r.a.formatDate(c.endDate,{locale:l,hour12:!1,hour:"2-digit",minute:"2-digit"})))))}})||c;e.a=d}).call(this,s("hosL").Fragment)},"5l0g":function(t,e,s){"use strict";(function(t){function a(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,a)}return s}function l(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}var c,n=s("hosL"),i=(s("Utv1"),s("/eY4")),r=(s("OhSV"),s("cneo"),s("HqZR"));s("ZOvn");const o={showAddComment:!1};let h=Object(i.a)(c=class extends n.Component{constructor(t){super(t),this.state=function(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?a(Object(s),!0).forEach((function(e){l(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):a(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}({},o),this.updateTimer={},this.inputRef={}}async loadHeatmap(){this.setState({isLoading:!0});const{adminStore:t}=this.props.stores,{raceid:e}=this.props;await t.getPublicHeatmap(e),this.setState({isLoading:!1})}componentDidMount(){this.loadHeatmap()}render(){const{adminStore:e}=this.props.stores,{waypoints:s,zoomToMarkers:a,mapid:l,fullscreenMap:c}=this.props,{publicHeatmap:i}=e;return Object(n.h)(t,null,Object(n.h)(r.a,{stores:this.props.stores,mapId:i.length,heatmap:i,minZoom:2,maxZoom:18,height:600,waypoints:s,zoomToMarkers:a,fullscreenMap:c,key:"map-"+l}))}})||c;e.a=h}).call(this,s("hosL").Fragment)},"8Lgr":function(t,e,s){"use strict";(function(t){function a(t){return n.a.format(t,t<5?2:1)}var l,c=s("hosL"),n=s("Utv1"),i=s("/eY4");s("OhSV"),s("ZOvn");let r=Object(i.a)(l=class extends c.Component{render(){const{value:e=0,smallUnit:s}=this.props,{userStore:l}=this.props.stores,{user:n}=l,{settings:i={}}=n;return i.imperial?Object(c.h)(t,null,Object(c.h)("nobr",null,a(function(t){return.621371*t}(e))," ",s?Object(c.h)(t,null,Object(c.h)("small",null,Object(c.h)("small",null,Object(c.h)("small",{class:"ml-0 text-muted"},"mi")))):Object(c.h)(t,null,"mi"))):Object(c.h)(t,null,Object(c.h)("nobr",null,a(e)," ",s?Object(c.h)(t,null,Object(c.h)("small",null,Object(c.h)("small",null,Object(c.h)("small",{class:"ml-0 text-muted"},"km")))):Object(c.h)(t,null,"km")))}})||l;e.a=r}).call(this,s("hosL").Fragment)},"8gML":function(t,e,s){"use strict";(function(t){function a(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,a)}return s}function l(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}var c,n=s("hosL"),i=s("Utv1"),r=s("/eY4"),o=s("OhSV"),h=(s("go65"),s("RMlE"),s("5l0g"),s("ZOvn"));h.a.marginTop(!0),h.a.marginBottom(),h.a.subMenuMarginTop();const b={isLoading:!1,email:"",submenu:"ads",jwtToken:i.a.getJwtToken()};let d=Object(r.a)(c=class extends n.Component{constructor(t){super(t),this.state=function(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?a(Object(s),!0).forEach((function(e){l(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):a(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}({},b)}render(){const{appState:e}=this.props.stores,{raceid:s,path:a}=this.props,{darkmode:l}=e;let c="default";return a.match(/\/race\/:raceid$/)?c="default":a.match(/\/race\/:raceid\/mushers$/)?c="mushers":a.match(/\/race\/:raceid\/results$/)?c="results":a.match(/\/race\/:raceid\/media$/)?c="media":a.match(/\/race\/:raceid\/tracking$/)&&(c="tracking"),Object(n.h)(t,null,Object(n.h)("div",{class:"row fixed-top pr-3",style:`margin-top: 40px; background-color: ${l?"#191d21":"#f8f9fa"};`},Object(n.h)("div",{class:"col-12 my-2 mx-2"},Object(n.h)("ul",{class:"nav nav-pills nav-fill flex-nowrap"},Object(n.h)("li",{class:"nav-item",style:"max-width: 20%;"},Object(n.h)("a",{href:"/race/"+s,class:"text-overflow nav-link "+("default"===c?"active":"")},Object(n.h)("nobr",null,Object(n.h)("i",{class:"fas fa-info-circle"})," ",Object(n.h)(o.c,{id:"race.therace"},"Løpet")))),Object(n.h)("li",{class:"nav-item",style:"max-width: 20%;"},Object(n.h)("a",{href:`/race/${s}/mushers`,class:"text-overflow nav-link "+("mushers"===c?"active":"")},Object(n.h)("nobr",null,Object(n.h)("i",{class:"fas fa-users"})," ",Object(n.h)(o.c,{id:"race.mushers"},"Deltakere")))),Object(n.h)("li",{class:"nav-item",style:"max-width: 20%;"},Object(n.h)("a",{href:`/race/${s}/results`,class:"text-overflow nav-link "+("results"===c?"active":"")},Object(n.h)("nobr",null,Object(n.h)("i",{class:"fas fa-poll"})," ",Object(n.h)(o.c,{id:"race.results"},"Resultater")))),Object(n.h)("li",{class:"nav-item",style:"max-width: 20%;"},Object(n.h)("a",{href:`/race/${s}/media`,class:"text-overflow nav-link "+("media"===c?"active":"")},Object(n.h)("nobr",null,Object(n.h)("i",{class:"fas fa-images"})," ",Object(n.h)(o.c,{id:"race.media"},"Bilder")))),Object(n.h)("li",{class:"nav-item",style:"max-width: 20%;"},Object(n.h)("a",{href:`/race/${s}/tracking`,class:"text-overflow nav-link "+("tracking"===c?"active":"")},Object(n.h)("nobr",null,Object(n.h)("i",{class:"fas fa-map-marked-alt"})," ",Object(n.h)(o.c,{id:"race.tracking"},"Tracking"))))))))}})||c;e.a=d}).call(this,s("hosL").Fragment)},LMwI:function(t){t.exports={pointerCursor:"pointerCursor__1W6mM"}},LbFk:function(t,e,s){"use strict";(function(t){function a(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,a)}return s}function l(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?a(Object(s),!0).forEach((function(e){c(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):a(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}function c(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}var n,i,r=s("hosL"),o=s("Utv1"),h=s("/eY4"),b=(s("OhSV"),s("fh8t"),s("go65")),d=s("cneo");s("ZOvn");const u=t=>(e,s)=>t.map(t=>{let a=1;return"-"===t[0]&&(a=-1,t=t.substring(1)),e[t]>s[t]?a:e[t]<s[t]?-a:0}).reduce((t,e)=>t||e,0);let p=Object(h.a)(n=class extends r.Component{render(){const{lastResults:e=[],currentClass:s={},selectedMusher:a={},selectResult:l=(()=>{})}=this.props,{userStore:c}=this.props.stores,{user:n={}}=c,{language:i="en"}=n;return Object(r.h)(t,null,Object(r.h)("table",{class:"table table-striped"},Object(r.h)("thead",null,Object(r.h)("tr",null,Object(r.h)("th",{style:"width: 10%"},"Time"),Object(r.h)("th",{style:"width: 5%"},"Dir"),Object(r.h)("th",{style:"width: 75%"},"Checkpoint"),Object(r.h)("th",{style:"width: 10%"},"Dogs"))),Object(r.h)("tbody",null,e&&e.length>0&&e.map(e=>{const c=s.checkpoints?s.checkpoints.find(t=>t.id===e.checkpoint):null,n="in"===e.direction&&c.requiredRestMinutes?c.timeEqualization?a.timeEqualization+c.requiredRestMinutes:c.requiredRestMinutes:null;new Date(new Date(e.timestamp).getTime()+6e4*n);return Object(r.h)(t,null,Object(r.h)("tr",{class:"resultLine","data-resultid":e.id,onClick:l},Object(r.h)("td",null,Object(r.h)("nobr",null,Object(r.h)("span",{class:"text-muted"},Object(r.h)("i",{class:"fas fa-clock"}))," ",o.a.formatDate(e.timestamp,{locale:i,year:"2-digit",month:"2-digit",hour12:!1,hour:"2-digit",minute:"2-digit"}))),Object(r.h)("td",null,"in"===e.direction&&Object(r.h)(t,null,Object(r.h)("i",{class:"fas fa-sign-in-alt mr-2 text-success"})),"out"===e.direction&&Object(r.h)(t,null,Object(r.h)("i",{class:"fas fa-sign-out-alt mr-2 text-info"})),"scratched"===e.direction&&Object(r.h)(t,null,Object(r.h)("i",{class:"fas fa-times mr-2 text-danger"}))),Object(r.h)("td",null,Object(r.h)("span",{class:"text-muted"},c.sortOrder,":")," ",c.name),Object(r.h)("td",null,Object(r.h)("nobr",null,Object(r.h)("span",{class:"text-muted"},Object(r.h)("i",{class:"fas fa-dog ml-3"}))," ",e.dogs,Object(r.h)("br",null)))))}))))}})||n,m=Object(h.a)(i=class extends r.Component{constructor(t){var e;super(t),e=this,this.addResult=async function(t){const{raceStore:s,appState:a}=e.props.stores,{direction:c,classid:n}=t.target.closest("button").dataset,{checkpointId:i,selectedClassIds:r=[]}=a,o=s.getClassById(r[0]),h=o.checkpoints?o.checkpoints.find(t=>t.id===i):null,{result:b,showTimestamp:d}=e.state,{race:u}=s,p=u.id;b.timestamp=d&&b.timestamp?b.timestamp:new Date,"scratched"===c&&(await s.addResult({id:p,classId:n,showTimestamp:!1,newResult:l({direction:"in",checkpoint:i},b)}),await s.editContestant({id:p,classId:n,bib:b.bib,field:"raceStatus",value:"DNF"})),await s.addResult({id:p,classId:n,showTimestamp:!1,newResult:l({direction:c,checkpoint:i},b)}),e.setState({result:{bib:"",dogs:"",timestamp:""},selectedMusher:null,lastResults:null,message:`Added ${b.bib} with ${b.dogs} dogs ${c} ${"in"===c?"to":"of"} checkpoint ${h.name}.`}),clearTimeout(e.updateTimer.message),e.updateTimer.message=setTimeout((async function(){e.setState({message:""})}),3e3)},this.editResult=t=>{const{raceStore:e,appState:s}=this.props.stores,{currentResult:a}=this.state,{race:l}=e,c=l.id,n=t.target.id,i=t.target.value,{classid:r,resultid:h}=t.target.dataset;a[n]=i,this.setState({currentResult:a});const{selectedClassIds:b=[]}=s,d=b[0],u={raceClassId:r,resultId:h,["raceClassResult"+o.a.ucfirst(n)]:i};clearTimeout(this.updateTimer[n]),this.updateTimer[n]=setTimeout((async function(){await e.editClass({id:c,data:u}),e.updateClassesResultLocal(r,h,n,i);const t=e.getClassById(d),{checkpoints:s=[],contestants:a=[],results:l=[]}=t;e.sortContestantsByResult({contestants:a,results:l,checkpoints:s})}),500)},this.updateField=t=>{const{raceStore:e,appState:s}=this.props.stores,{race:a}=e,l=t.target.id,c=t.target.value,{selectedClassIds:n=[]}=s,i=e.getClassById(n[0]),{result:r,selectedResult:h,showTimestamp:b}=this.state;r[l]=c;const{checkpointId:p}=s,{sortedContestants:m=[]}=e,O=i.checkpoints?i.checkpoints.find(t=>t.id===p):null,j=m?m.find(t=>t.bib===parseInt(r.bib,10)):null;if(!j)return this.setState({result:r}),!1;let f,g,x,v,y,w,k,S,C;i&&(f=i.results?i.results.slice().sort(u(["-timestamp","-direction"])).filter(t=>parseInt(t.bib,10)===parseInt(r.bib,10)):null,f&&f.length>0&&(g=f.find(t=>t.checkpoint===p&&"in"===t.direction),x=f.find(t=>t.checkpoint===p&&"out"===t.direction),v=f.find(t=>t.checkpoint===p&&"scratched"===t.direction),w=e.getPreviousCheckpoint({currentClass:i,checkpointId:p}),w&&(k=f.find(t=>t.checkpoint===w.id&&"in"===t.direction),S=f.find(t=>t.checkpoint===w.id&&"out"===t.direction),C=f.find(t=>t.checkpoint===w.id&&"scratched"===t.direction))),y=i.results?Object(d.i)(i.results.slice().find(t=>t.id===h)):{});const D=f&&f[0]?f[0]:null;if(D){const t=f&&f[0]?f[0].timestamp:j&&j.startTime?j.startTime:i.startDate;b&&(r.timestamp=o.a.isoDate(t,!1,!1,!1)),r.dogs=D.dogs}this.setState({result:r,selectedCheckpoint:O,selectedMusher:j,isCheckedIn:g,isCheckedOut:x,isScratched:v,isCheckedInPrev:k,isCheckedOutPrev:S,isScratchedPrev:C,prevCheckpoint:w,currentResult:y,lastResults:f})},this.deleteResult=async function(){const{selectedResult:t}=e.state,{appState:s,raceStore:a}=e.props.stores,{race:l}=a,c=l.id,{selectedClassIds:n=[]}=s,i=a.getClassById(n[0]),r={raceClassId:i.id,resultId:t,raceClassResultDelete:1};await a.editClass({id:c,data:r});const{checkpoints:o=[],contestants:h=[],results:b=[]}=i;a.sortContestantsByResult({contestants:h,results:b,checkpoints:o}),e.doneEditResult()},this.selectCheckpoint=t=>{const{result:e}=this.state,s=t.target.closest("button").dataset.id,{appState:a,raceStore:l}=this.props.stores;a.selectCheckpoint(s);const{selectedClassIds:c=[]}=a,n=l.getClassById(c[0]),i=n.checkpoints?n.checkpoints.find(t=>t.id===s):null,{sortedContestants:r=[]}=l,o=r?r.find(t=>t.bib===parseInt(e.bib,10)):null,h=n.results?n.results.slice().sort(u(["-timestamp","-direction"])).filter(t=>parseInt(t.bib,10)===parseInt(e.bib,10)):null,b=h.find(t=>t.checkpoint===s&&"in"===t.direction),d=h.find(t=>t.checkpoint===s&&"out"===t.direction),p=h.find(t=>t.checkpoint===s&&"scratched"===t.direction),m=l.getPreviousCheckpoint({currentClass:n,checkpointId:s}),O=h.find(t=>t.checkpoint===m.id&&"in"===t.direction),j=h.find(t=>t.checkpoint===m.id&&"out"===t.direction),f=h.find(t=>t.checkpoint===m.id&&"scratched"===t.direction);this.setState({selectedCheckpoint:i,selectedMusher:o,isCheckedIn:b,isCheckedOut:d,isScratched:p,isCheckedInPrev:O,isCheckedOutPrev:j,isScratchedPrev:f,lastResults:h})},this.toggleTimestamp=()=>{const{showTimestamp:t,result:e}=this.state,{appState:s,raceStore:a}=this.props.stores,{selectedClassIds:l=[]}=s,c=a.getClassById(l[0]),n=c.contestants?c.contestants.find(t=>t.bib===parseInt(e.bib,10)):null,i=c.results?c.results.slice().sort(u(["timestamp"])).reverse().filter(t=>parseInt(t.bib,10)===parseInt(e.bib,10)):null;let r;r=i&&i[0]?i[0].timestamp:n.startTime?n.startTime:c.startDate?c.startDate:new Date,e.timestamp=o.a.isoDate(r,!1,!1,!1),this.setState({showTimestamp:!t,result:e})},this.doneEditResult=()=>{const{raceStore:t,appState:e}=this.props.stores,{selectedClassIds:s=[]}=e,a=t.getClassById(s[0]),{checkpointId:l}=e,c=a.checkpoints?a.checkpoints.find(t=>t.id===l):null;this.setState({selectedResult:"",selectedCheckpoint:c,currentResult:null,result:{bib:"",dogs:"",timestamp:""}})},this.selectResult=t=>{const e=t.target.closest(".resultLine").dataset.resultid,{appState:s,raceStore:a}=this.props.stores,{selectedClassIds:l=[]}=s,c=a.getClassById(l[0]),n=c.results?Object(d.i)(c.results.slice().find(t=>t.id===e)):{};this.setState({selectedResult:e,currentResult:n})},this.state={result:{},message:""},this.updateTimer={}}componentWillReceiveProps(t){}componentDidMount(){this.doneEditResult()}render(){const{result:e,showTimestamp:s,message:a,selectedCheckpoint:l,selectedMusher:c,isCheckedIn:n,isCheckedOut:i,isScratched:h,isCheckedOutPrev:d,currentResult:u,lastResults:m=[]}=this.state,{appState:O,raceStore:j,userStore:f}=this.props.stores,{checkpointId:g}=O,{selectedClassIds:x=[]}=O,v=j.getClassById(x[0]),y=m&&m[0]?m[0]:{};let w=v.checkpoints?v.checkpoints.find(t=>t.id===y.checkpoint):null;w=w||{};const{user:k={}}=f,{language:S="en"}=k;return Object(r.h)(t,null,Object(r.h)("div",{class:"mt-2 pb-5",style:"height: 70vh;"},Object(r.h)("h3",null,"Admin timing - ",v.title),Object(r.h)("div",{class:"w-100 overflow-hidden"},Object(r.h)("div",{class:"d-flex flex-row flex-nowrap pb-2 px-1",style:"overflow: auto; scroll-snap-type: x mandatory;"},v.checkpoints&&v.checkpoints.map((e,s)=>{let a={},l={},n={};return m&&m.length>0&&(a=m.slice().find(t=>parseInt(t.bib,10)==c.bib&&t.checkpoint===e.id&&"in"===t.direction)||{},l=m.slice().find(t=>parseInt(t.bib,10)==c.bib&&t.checkpoint===e.id&&"out"===t.direction)||{},n=m.slice().find(t=>parseInt(t.bib,10)==c.bib&&t.checkpoint===e.id&&"scratched"===t.direction)||{}),Object(r.h)(t,null,Object(r.h)("div",{class:"col px-0 pt-2"},Object(r.h)("button",{type:"button",class:`btn btn-block ${0===s&&"rounded-pill-left"} ${s===v.checkpoints.length-1&&"rounded-pill-right"} rounded-none ${g===e.id?"btn-primary":"btn-outline-primary"} text-nowrap`,style:"text-overflow: ellipsis; overflow: hidden;",onClick:this.selectCheckpoint,"data-id":e.id},e.sortOrder,": ",e.name,l&&l.id?Object(r.h)("i",{class:"fas fa-check text-white ml-2"}):"",a&&a.id&&!l.id?Object(r.h)("i",{class:"fas fa-map-marker-alt text-white ml-2"}):"")))}))),Object(r.h)("div",{class:"w-100 overflow-hidden"},l&&Object(r.h)(t,null,Object(r.h)("h3",null,c&&Object(r.h)(t,null,Object(r.h)("i",{class:"fas fa-user text-muted"})," ",c.firstname," ",c.lastname)),u?Object(r.h)(t,null,["bib","dogs"].map(e=>Object(r.h)(t,null,Object(r.h)("div",{class:"form-group"},Object(r.h)("label",{for:e},e),Object(r.h)("input",{type:"text",class:"form-control",id:e,"aria-describedby":e+"Help","data-classid":v.id,"data-resultid":u.id,"data-field":e,value:u[e],onInput:this.editResult})))),["timestamp"].map(e=>Object(r.h)(t,null,Object(r.h)("div",{class:"form-group"},Object(r.h)("label",{for:e},Object(r.h)("i",{class:"fas fa-stopwatch"})," ",e),Object(r.h)("input",{type:"datetime-local",class:"form-control",id:e,"aria-describedby":e+"Help","data-classid":v.id,"data-resultid":u.id,"data-field":e,value:o.a.isoDate(u[e],!1,!1,!1),onInput:this.editResult}),Object(r.h)("button",{class:"btn btn-link",onClick:this.toggleTimestamp},"Hide timestamp")))),Object(r.h)("button",{class:"btn btn-lg btn-danger float-left",onClick:this.deleteResult},"Delete"),Object(r.h)("button",{class:"btn btn-lg btn-info float-right",onClick:this.doneEditResult},"Done")):Object(r.h)(t,null,l.sortOrder>w.sortOrder+1&&Object(r.h)(t,null,Object(r.h)("div",{class:"p-3 mb-2 bg-danger text-white clearfix"},Object(r.h)("span",{class:"float-left",style:"font-size: 2.0em;"},Object(r.h)("i",{class:"fas fa-exclamation-triangle mr-3"})),"Previous checkpoint is not logged yet.")),!d&&l.sortOrder===w.sortOrder+1&&Object(r.h)(t,null,Object(r.h)("div",{class:"p-3 mb-2 bg-danger text-white clearfix"},Object(r.h)("span",{class:"float-left",style:"font-size: 2.0em;"},Object(r.h)("i",{class:"fas fa-exclamation-triangle mr-3"})),"Not checked out of prev.")),["bib"].map(s=>Object(r.h)(t,null,Object(r.h)("div",{class:"form-group"},Object(r.h)("label",{for:s},s),Object(r.h)("input",{type:"text",class:"form-control form-control-lg",id:s,"aria-describedby":s+"Help",onInput:this.updateField,value:e[s]})))),["dogs"].map(s=>Object(r.h)(t,null,Object(r.h)("div",{class:"form-group"},Object(r.h)("label",{for:s},Object(r.h)("i",{class:"fas fa-dog"})," ",s),Object(r.h)("input",{type:"text",class:"form-control form-control-lg",id:s,"aria-describedby":s+"Help",onInput:Object(b.a)(this,"result."+s),value:e[s]})))),s?Object(r.h)(t,null,["timestamp"].map(s=>Object(r.h)(t,null,Object(r.h)("div",{class:"form-group"},Object(r.h)("label",{for:s},Object(r.h)("i",{class:"fas fa-stopwatch"})," ",s),Object(r.h)("input",{type:"datetime-local",class:"form-control",id:s,"aria-describedby":s+"Help",onInput:Object(b.a)(this,"result."+s),value:o.a.isoDate(e[s],!1,!1,!1).replace(/ /g,"T"),min:o.a.isoDate(y.timestamp,!1,!1,!1).replace(/ /g,"T")}),Object(r.h)("button",{class:"btn btn-link",onClick:this.toggleTimestamp},Object(r.h)("i",{class:"fas fa-stopwatch"})," Hide timestamp"))))):Object(r.h)(t,null,Object(r.h)("div",{class:"form-group"},Object(r.h)("button",{class:"btn btn-link",onClick:this.toggleTimestamp},Object(r.h)("i",{class:"fas fa-stopwatch"})," Show timestamp"))),n&&i&&Object(r.h)(t,null,Object(r.h)("div",{class:"alert alert-warning my-2 clearfix",role:"alert"},Object(r.h)("span",{class:"float-left",style:"font-size: 2.0em;"},Object(r.h)("i",{class:"fas fa-exclamation-triangle mr-3"})),c&&Object(r.h)(t,null,c.firstname," ",c.lastname)," Has checked in and out of this checkpoint!")),Object(r.h)("div",{class:"d-flex justify-content-between"},Object(r.h)("div",{class:"text-center"},Object(r.h)("h3",null,Object(r.h)("i",{class:"fas fa-campground text-muted"})," ",l.name))),Object(r.h)("div",{class:"d-flex justify-content-between"},Object(r.h)("button",{class:"btn btn-lg btn-success float-left",onClick:this.addResult,"data-direction":"in","data-classid":v.id,disabled:n?"disabled":""},"CP In ",Object(r.h)("i",{class:"fas fa-sign-in-alt ml-2"})),Object(r.h)("button",{class:"btn btn-lg btn-info float-right",onClick:this.addResult,"data-direction":"out","data-classid":v.id,disabled:i?"disabled":""},Object(r.h)("i",{class:"fas fa-sign-out-alt mr-2"})," CP Out"))))),a&&Object(r.h)("div",{class:"alert alert-success mt-3 clearfix",role:"alert"},a),Object(r.h)("div",{class:"overflow-hidden mb-5 mt-3"},Object(r.h)(p,{stores:this.props.stores,lastResults:m,currentClass:v,selectedMusher:c,selectResult:this.selectResult})),Object(r.h)("div",{class:"d-flex justify-content-center mt-3 mb-5"},Object(r.h)("button",{class:"btn btn-sm btn-block btn-danger",onClick:this.addResult,"data-direction":"scratched","data-classid":v.id,disabled:h?"disabled":""},"Scratch ",Object(r.h)("i",{class:"fas fa-times ml-2"})))))}})||i;e.a=m}).call(this,s("hosL").Fragment)},QkTp:function(t,e,s){"use strict";(function(t){var a,l=s("hosL"),c=s("Utv1"),n=s("/eY4");s("OhSV"),s("ZOvn");let i=Object(n.a)(a=class extends l.Component{render(){const{value:e=0}=this.props,{userStore:s}=this.props.stores,{user:a}=s,{settings:n={}}=a;return n.imperial?Object(l.h)(t,null,Object(l.h)("nobr",null,c.a.format(function(t){return 9*t/5+32}(e),0),"°F")):Object(l.h)(t,null,Object(l.h)("nobr",null,c.a.format(e,1),"°C"))}})||a;e.a=i}).call(this,s("hosL").Fragment)},QuNB:function(t,e,s){"use strict";(function(t){var a,l=s("hosL"),c=s("Utv1"),n=s("/eY4"),i=(s("OhSV"),s("fh8t"),s("ZOvn")),r=s("gcyc");let o=Object(n.a)(a=class extends l.Component{render(){const{bib:e,onClickNav:s=(()=>{})}=this.props,{appState:a,raceStore:n,userStore:o}=this.props.stores,{user:h={},teams:b=[]}=o,{language:d="en"}=h,{checkpointId:u}=a,{sortedContestants:p=[]}=n,{selectedClassIds:m=[]}=a,O=n.getClassById(m[0])||{},{checkpoints:j=[],contestants:f=[],results:g=[]}=O;O.checkpoints&&O.checkpoints.find(t=>t.id===u);let x=p?p.find(t=>t.bib===parseInt(e,10)):null;x=x||{};const v=p?p.findIndex(t=>t.bib===parseInt(e,10)):null;O.results&&O.results.slice().sort((y=["-timestamp","-direction"],(t,e)=>y.map(s=>{let a=1;return"-"===s[0]&&(a=-1,s=s.substring(1)),t[s]>e[s]?a:t[s]<e[s]?-a:0}).reduce((t,e)=>t||e,0))).filter(t=>parseInt(t.bib,10)===parseInt(e,10));var y;const w=n.getTeamById(x.team),k=w.members?w.members.find(t=>t.email===x.email):{};i.a.getImage({user:k,team:w,priority:"user"}),i.a.displayNameShort(k)||i.a.displayNameShort(x);let S,C,D=0,T=0,I=0,R=0,L=O.startDate,P=0;const M=v>-1&&p[v+1]?p[v+1].bib:null,E=v>-1&&p[v-1]?p[v-1].bib:null;return Object(l.h)(t,null,M&&Object(l.h)("button",{class:"btn btn-link text-primary float-right mr-2 py-0",style:"font-size: 2.0em; line-height: 1.0em;",onClick:()=>s(M)},Object(l.h)("i",{class:"fas fa-angle-right"})),E&&Object(l.h)("button",{class:"btn btn-link text-primary float-right mr-2 py-0",style:"font-size: 2.0em; line-height: 1.0em;",onClick:()=>s(E)},Object(l.h)("i",{class:"fas fa-angle-left"})),Object(l.h)(r.a,{stores:this.props.stores,contestant:x,onTeamClick:this.onTeamClick,onUserClick:this.onUserClick,onDogClick:this.onDogClick,onClickNav:s,rank:v+1},Object(l.h)("div",{class:"table-responsive"},Object(l.h)("table",{class:"table table-striped table-sm"},Object(l.h)("thead",null,Object(l.h)("tr",null,Object(l.h)("th",null,"Checkpoint"),Object(l.h)("th",{class:"text-center"},"In"),Object(l.h)("th",{class:"text-center"},"Out"),Object(l.h)("th",{class:"text-center"},"Moving time"),Object(l.h)("th",{class:"text-center"},"Avg speed"),Object(l.h)("th",{class:"text-center"},"Total moving time"),Object(l.h)("th",{class:"text-center"},"Rest"),Object(l.h)("th",{class:"text-center"},"Total rest"),Object(l.h)("th",{class:"text-center"},"% rest"),Object(l.h)("th",{class:"text-center"},"Distance"),Object(l.h)("th",{class:"text-center"},"Total distance"))),Object(l.h)("tbody",null,j&&j.map(e=>{const s=Math.floor((new Date).getTime()/1e3,10),a=g.slice().find(t=>parseInt(t.bib,10)==x.bib&&t.checkpoint===e.id&&"in"===t.direction)||{},n=g.slice().find(t=>parseInt(t.bib,10)==x.bib&&t.checkpoint===e.id&&"out"===t.direction)||{},r=g.slice().find(t=>parseInt(t.bib,10)==x.bib&&t.checkpoint===e.id&&"scratched"===t.direction)||{};let o=0;!e.isStartLine&&a&&n&&a.timestamp&&n.timestamp&&(o=i.a.deltaSec(a.timestamp,n.timestamp));let h=0;S&&a&&S.timestamp&&a.timestamp&&(h=i.a.deltaSec(S.timestamp,a.timestamp));let b=!1,d=0;a&&a.timestamp&&(b=!0,d=e.distanceFromPrev/(h/3600)),D+=e.distanceFromPrev?parseInt(e.distanceFromPrev,10):0,I+=h||0,R+=o||0,T+=(h||0)+(o||0);const u=T?R/T*100:0,p=60*O.requiredRestMinutes;let m,j="text-muted font-weight-lighter",f="text-info";if(b){let b,g,v;n&&n.timestamp||(e.isStartLine?g=0:e.timeEqualization?(O.requiredRestMinutes&&R<p&&(g=p-R+60*x.timeEqualization,j="text-warning font-weight-bold"),!g&&e.requiredRestMinutes&&e.timeEqualization&&x.timeEqualization&&(g=60*e.requiredRestMinutes+60*x.timeEqualization)):g=e.requiredRestMinutes>0?60*e.requiredRestMinutes:10800,e.isStartLine?b=i.a.addDeltaSec(x.startTime||O.startDate,0):(b=i.a.addDeltaSec(a.timestamp,g),v=i.a.deltaSec(a.timestamp,s)),L=b,p&&(f=R+v>p+60*x.timeEqualization?"text-success":"text-danger")),m=Object(l.h)(t,null,Object(l.h)("tr",null,Object(l.h)("td",null,Object(l.h)("nobr",null,e.name)),Object(l.h)("td",{class:"text-center"},!e.isStartLine&&Object(l.h)("nobr",null,Object(l.h)("span",{class:"text-muted mr-1"},i.a.formatDate(a.timestamp,{locale:"en-GB",day:"numeric",month:"numeric"})),i.a.formatDate(a.timestamp,{locale:"en-GB",hour12:!1,hour:"2-digit",minute:"2-digit"}),a.dogs>0&&Object(l.h)(t,null,Object(l.h)("i",{class:"fas fa-dog text-muted ml-2"})," ",a.dogs))),Object(l.h)("td",{class:"text-center"},e.isFinishLine?Object(l.h)(t,null," "):Object(l.h)(t,null,n.timestamp&&Object(l.h)("nobr",null,Object(l.h)("span",{class:"text-muted mr-1"},i.a.formatDate(n.timestamp,{locale:"en-GB",day:"numeric",month:"numeric"})),i.a.formatDate(n.timestamp,{locale:"en-GB",hour12:!1,hour:"2-digit",minute:"2-digit"}),n.dogs>0&&Object(l.h)(t,null,Object(l.h)("i",{class:"fas fa-dog text-muted ml-2"})," ",n.dogs)),!r.timestamp&&b&&Object(l.h)("nobr",{class:""+j},Object(l.h)("span",{class:"text-muted mr-1"},i.a.formatDate(b,{locale:"en-GB",day:"numeric",month:"numeric"})),i.a.formatDate(b,{locale:"en-GB",hour12:!1,hour:"2-digit",minute:"2-digit"}))),r.timestamp&&Object(l.h)("nobr",{class:"text-danger"},Object(l.h)("i",{class:"fas fa-times"}),Object(l.h)("span",{class:"text-muted mr-1"},i.a.formatDate(r.timestamp,{locale:"en-GB",day:"numeric",month:"numeric"})),i.a.formatDate(r.timestamp,{locale:"en-GB",hour12:!1,hour:"2-digit",minute:"2-digit"}))),Object(l.h)("td",{class:"text-center"},!e.isStartLine&&Object(l.h)("nobr",null,c.a.secToHms(h,!0))),Object(l.h)("td",{class:"text-center"},!e.isStartLine&&Object(l.h)("nobr",null,c.a.format(d||0,1)," ",Object(l.h)("span",{class:"text-muted font-weight-lighter"},"km/t"))),Object(l.h)("td",{class:"text-center"},!e.isStartLine&&Object(l.h)("nobr",null,c.a.secToHms(I,!0))),Object(l.h)("td",{class:"text-center"},e.isFinishLine||e.isStartLine?Object(l.h)(t,null," "):Object(l.h)(t,null,r.timestamp?Object(l.h)(t,null," "):Object(l.h)(t,null,n&&n.timestamp?Object(l.h)(t,null,!e.isStartLine&&Object(l.h)(t,null,g>0?Object(l.h)(t,null,Object(l.h)("nobr",{class:"text-muted font-weight-lighter"},c.a.secToHms(g,!0))):Object(l.h)(t,null,Object(l.h)("nobr",null,c.a.secToHms(o,!0))))):Object(l.h)(t,null,Object(l.h)("nobr",{class:"text-info"},c.a.secToHms(v,!0)))))),Object(l.h)("td",{class:"text-center"},e.isFinishLine?Object(l.h)(t,null,Object(l.h)("nobr",null,c.a.secToHms(R,!0))):Object(l.h)(t,null,r.timestamp?Object(l.h)(t,null," "):Object(l.h)(t,null,!e.isStartLine&&Object(l.h)(t,null,Object(l.h)("nobr",null,v?Object(l.h)(t,null,Object(l.h)("span",{class:f},c.a.secToHms(R+v,!0))," ",Object(l.h)("span",{class:"text-muted font-weight-lighter"},"/ ",c.a.secToHms(p+60*x.timeEqualization,!0))):Object(l.h)(t,null,c.a.secToHms(R,!0))))))),Object(l.h)("td",{class:"text-center"},e.isStartLine||r.timestamp?Object(l.h)(t,null," "):Object(l.h)(t,null,u>0&&Object(l.h)("nobr",null,c.a.format(u||0,0)," ",Object(l.h)("span",{class:"text-muted font-weight-lighter"},"%")))),Object(l.h)("td",{class:"text-center"},Object(l.h)("nobr",null,e.distanceFromPrev||0," ",Object(l.h)("span",{class:"text-muted font-weight-lighter"},"km"))),Object(l.h)("td",{class:"text-center"},Object(l.h)("nobr",null,D," ",Object(l.h)("span",{class:"text-muted font-weight-lighter"},"km"))))),n&&n.timestamp&&(L=n.timestamp,P=d)}else{let a,n,r,o;const h=1e3*e.distanceFromPrev,b=P/3.6;let u=P?h/b/60:e.estTimeToCpMinutes||0;e.isStartLine?(a=x.startTime||O.startDate,r=0):L&&(a=i.a.addDeltaSec(L,60*u),r=e.isStartLine?0:e.requiredRestMinutes&&e.timeEqualization&&x.timeEqualization?60*e.requiredRestMinutes+60*x.timeEqualization:e.requiredRestMinutes>0?60*e.requiredRestMinutes:60*(e.estRestMinutes||180),n=i.a.addDeltaSec(a,r),L=n),S&&S.timestamp&&(o=i.a.deltaSec(S.timestamp,s)),d=P||e.distanceFromPrev/(60*u/3600),m=Object(l.h)("tr",null,Object(l.h)("td",null,e.name),S&&S.timestamp?Object(l.h)(t,null,Object(l.h)("td",{class:"text-center text-info font-weight-light"},!e.isStartLine&&a&&Object(l.h)("nobr",null,"est:",Object(l.h)("span",{class:"text-muted mr-1 ml-1"},i.a.formatDate(a,{locale:"en-GB",day:"numeric",month:"numeric"})),i.a.formatDate(a,{locale:"en-GB",hour12:!1,hour:"2-digit",minute:"2-digit"})))):Object(l.h)(t,null,Object(l.h)("td",{class:"text-center text-muted font-weight-lighter"},!e.isStartLine&&a&&Object(l.h)("nobr",null,Object(l.h)("span",{class:"text-muted mr-1"},i.a.formatDate(a,{locale:"en-GB",day:"numeric",month:"numeric"})),i.a.formatDate(a,{locale:"en-GB",hour12:!1,hour:"2-digit",minute:"2-digit"})))),Object(l.h)("td",{class:"text-center text-muted font-weight-lighter"},!e.isFinishLine&&n&&Object(l.h)("nobr",null,Object(l.h)("span",{class:"text-muted mr-1"},i.a.formatDate(n,{locale:"en-GB",day:"numeric",month:"numeric"})),i.a.formatDate(n,{locale:"en-GB",hour12:!1,hour:"2-digit",minute:"2-digit"}))),S&&S.timestamp?Object(l.h)(t,null,Object(l.h)("td",{class:"text-center text-info"},Object(l.h)("nobr",null,c.a.secToHms(o,!0)))):Object(l.h)(t,null,Object(l.h)("td",{class:"text-center text-muted font-weight-lighter"},!e.isStartLine&&Object(l.h)("nobr",null,c.a.secToHms(60*e.estTimeToCpMinutes,!0)))),Object(l.h)("td",{class:"text-center text-muted font-weight-lighter"},!e.isStartLine&&Object(l.h)("nobr",null,c.a.format(d||0,1)," ",Object(l.h)("span",{class:"text-muted font-weight-lighter"},"km/t"))),S&&S.timestamp?Object(l.h)(t,null,Object(l.h)("td",{class:"text-center text-info"},Object(l.h)("nobr",null,c.a.secToHms(o+I,!0)))):Object(l.h)(t,null,Object(l.h)("td",{class:"text-center text-muted font-weight-lighter"}," ")),Object(l.h)("td",{class:"text-center text-muted font-weight-lighter"},!e.isStartLine&&!e.isFinishLine&&Object(l.h)("nobr",null,c.a.secToHms(r,!0))),Object(l.h)("td",{class:"text-center text-muted font-weight-lighter"}," "),Object(l.h)("td",{class:"text-center text-muted font-weight-lighter"}," "),Object(l.h)("td",{class:"text-center"},Object(l.h)("nobr",null,e.distanceFromPrev||0," ",Object(l.h)("span",{class:"text-muted font-weight-lighter"},"km"))),Object(l.h)("td",{class:"text-center text-muted font-weight-lighter"}," "),Object(l.h)("td",{class:"text-center text-muted font-weight-lighter"}," "))}return S=n,C=a,m}))))))}})||a;e.a=o}).call(this,s("hosL").Fragment)},RMlE:function(t,e,s){"use strict";function a(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,a)}return s}function l(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}var c,n=s("hosL"),i=s("ox/y"),r=(s("Utv1"),s("/eY4")),o=(s("go65"),s("Y3FI")),h=s("OhSV");s("LMwI");const b={menu:{profile:!1,main:!1},searchText:""};let d=Object(r.a)(c=class extends n.Component{constructor(t){var e;super(t),e=this,this.toggleDropdown=t=>{const{menu:e}=this.state;let s=t.target.dataset.name;!s&&t.target.parentNode&&(s=t.target.parentNode.dataset.name),s&&(e[s]=!e[s]),this.setState({menu:e})},this.toggleDarkmode=t=>{const{appState:e}=this.props.stores;e.toggleDarkmode(),this.toggleDropdown(t)},this.toggleViewmode=t=>{const{appState:e}=this.props.stores;let s=t.target.dataset.mode;!s&&t.target.parentNode&&(s=t.target.parentNode.dataset.mode),e.toggleViewmode(s),this.toggleDropdown(t)},this.reloadApp=()=>{window.location.reload(!0)},this.adminLoadAll=async function(){const{userStore:t}=e.props.stores;await t.getInfo(!0)},this.changeLanguage=t=>{const e=t.target.value;console.log("changeLanguage",e);const{appState:s,userStore:a}=this.props.stores,{user:l={}}=a;l.email&&a.setLanguage({email:l.email,language:e}),s.setLanguage(e)},this.search=()=>{const{searchText:t}=this.state;Object(o.route)("/search/"+t)},this.state=function(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?a(Object(s),!0).forEach((function(e){l(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):a(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}({},b)}render(){const{menu:t}=this.state,{appState:e,userStore:s}=this.props.stores,{darkmode:a}=e,{user:l,notifications:c=[]}=s,{language:r="en"}=(c.filter(t=>!t.read),l);return Object(n.h)("nav",{class:"navbar navbar-expand-lg navbar-themed fixed-top py-1",style:"z-index: 99999;"},Object(n.h)("a",{class:"navbar-brand",href:"/race/"},Object(n.h)("img",{src:`./assets/homerun-race-logo-2-${a?"white-":""}small.png`,height:"37",class:"position-absolute",style:"top: 5px; left: 6px"}),Object(n.h)("span",{class:"font-weight-normal",style:"margin-left: 30px; font-size: 20px;"},"Homerun Race")),Object(n.h)("button",{class:"navbar-toggler",type:"button","data-name":"main",onClick:this.toggleDropdown},Object(n.h)("span",{class:"navbar-toggler-icon"})),Object(n.h)("div",{class:"collapse navbar-collapse "+(t.main?"show":""),id:"navbarSupportedContent"},Object(n.h)("ul",{class:"navbar-nav mr-auto ml-5"},Object(n.h)("li",{class:"nav-item"},Object(n.h)(i.Link,{className:"nav-link",activeClassName:"active",href:"/race","data-name":"main",style:"font-size: 1.0em !important;",onClick:this.toggleDropdown},Object(n.h)("i",{class:"fas fa-flag-checkered"})," ",Object(n.h)(h.c,{id:"header.races"},"Løpene"))),Object(n.h)("li",{class:"nav-item"},Object(n.h)(i.Link,{className:"nav-link",activeClassName:"active",href:"/race/support","data-name":"main",style:"font-size: 1.0em !important;",onClick:this.toggleDropdown},Object(n.h)("i",{class:"far fa-question-circle"})," ",Object(n.h)(h.c,{id:"header.support"},"Support"))),Object(n.h)("li",{class:"nav-item"},Object(n.h)(i.Link,{className:"nav-link",activeClassName:"active",href:"/race/news","data-name":"main",style:"font-size: 1.0em !important;",onClick:this.toggleDropdown},Object(n.h)("i",{class:"fas fa-quote-right"})," ",Object(n.h)(h.c,{id:"header.news"},"Nyheter")))),Object(n.h)("ul",{class:"navbar-nav ml-auto "},Object(n.h)("li",{class:"nav-item mr-2"},Object(n.h)("div",{class:"form-row align-items-center"},Object(n.h)("div",{class:"col-auto my-1",style:"width: 80px;"},Object(n.h)("select",{class:"custom-select",style:"background-color: inherit; border: none; padding: 0; height: 1.1em; font-size: 0.9em;",onInput:this.changeLanguage},Object(n.h)("option",{value:"no",selected:"no"===r},"🇳🇴 NO"),Object(n.h)("option",{value:"en",selected:"en"===r},"🇬🇧 EN"),Object(n.h)("option",{value:"es",selected:"es"===r},"🇪🇸 ES"),Object(n.h)("option",{value:"de",selected:"de"===r},"🇩🇪 DE"),Object(n.h)("option",{value:"fr",selected:"fr"===r},"🇫🇷 FR"),Object(n.h)("option",{value:"ru",selected:"ru"===r},"🇷🇺 RU"),Object(n.h)("option",{value:"se",selected:"se"===r},"🇸🇪 SE"))))),Object(n.h)("li",{class:"nav-item d-block d-lg-none"},Object(n.h)(i.Link,{className:"nav-link",activeClassName:"active","data-name":"main",onClick:this.toggleDarkmode},Object(n.h)("i",{class:(a?"fas text-warning":"far")+" fa-moon"})," ",Object(n.h)(h.c,{id:"header.darkmode"},"Nattmodus"))),Object(n.h)("li",{class:"nav-item mr-2 d-none d-lg-block"},Object(n.h)("button",{class:"btn btn-link","data-name":"profile",onClick:this.toggleDarkmode},Object(n.h)("i",{class:(a?"fas text-warning":"far")+" fa-moon"}))))))}})||c;e.a=d},UwwE:function(t,e,s){"use strict";(function(t){var a,l=s("hosL"),c=s("Utv1"),n=s("/eY4");s("OhSV"),s("ZOvn");let i=Object(n.a)(a=class extends l.Component{render(){const{value:e=0}=this.props,{userStore:s}=this.props.stores,{user:a}=s,{settings:n={}}=a;return n.imperial?Object(l.h)(t,null,Object(l.h)("nobr",null,c.a.format(function(t){return 2.20462*t}(e),0)," lb")):Object(l.h)(t,null,Object(l.h)("nobr",null,c.a.format(e,0)," kg"))}})||a;e.a=i}).call(this,s("hosL").Fragment)},aGZh:function(t,e,s){"use strict";(function(t){function e(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,a)}return s}function a(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}var l,c=s("hosL"),n=s("/eY4");const i={};Object(n.a)(l=class extends c.Component{constructor(t){super(t),this.state=function(t){for(var s=1;s<arguments.length;s++){var l=null!=arguments[s]?arguments[s]:{};s%2?e(Object(l),!0).forEach((function(e){a(t,e,l[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(l)):e(Object(l)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(l,e))}))}return t}({},i)}render(){const{appState:e}=this.props.stores,{text:s}=this.props,{language:a="en"}=e;let l=s;const n=new RegExp(`/<${a}>(.*?)</${a}>/`);return s.replace(n,"$1")&&(l=s),Object(c.h)(t,null,l)}})}).call(this,s("hosL").Fragment)},aMCh:function(t,e,s){"use strict";(function(t){var a,l,c,n=s("hosL"),i=s("Utv1"),r=s("/eY4"),o=(s("OhSV"),s("fh8t"),s("ZOvn"));let h=Object(r.a)(a=class extends n.Component{render(){const{checkpoints:e,thClass:s,thStyle:a,selectedCheckpointId:l,width:c,widthCp:i,onClickCheckpoint:r=(()=>{}),dotColor:o}=this.props;return Object(n.h)(t,null,e&&e.map((e,h)=>Object(n.h)(t,null,h>0&&Object(n.h)("th",{class:s,style:a},Object(n.h)("div",{class:"",style:`width: ${c}px;`}," ")),Object(n.h)("th",{class:s,style:a},Object(n.h)("div",{class:"checkpoint position-relative "+(l===e.id?"text-primary":""),style:`width: ${i}px; font-size: 1.1em;`,onClick:r,"data-id":e.id},Object(n.h)("i",{class:"fas fa-campground"}),Object(n.h)("div",{class:`rounded-pill-both px-1 text-center position-absolute ${o?"":"bg-secondary"} font-weight-bold`,style:"bottom: 0px; right: -20px; font-size: 0.6em; "+(o?`background-color: ${o};`:"")},e.sortOrder&&"n/a"!==e.sortOrder&&Object(n.h)(t,null,e.sortOrder)))))))}})||a,b=Object(r.a)(l=class extends n.Component{render(){const{currentClass:e,contestants:s,limit:a,onClickMusher:l,tdClass:c,tdStyle:r,progressStyle:h,progressbarStyle:b}=this.props,{checkpoints:d=[],results:u=[]}=e,p=s&&a?s.slice(0,a):s,{raceStore:m}=this.props.stores,{sortedContestants:O=[]}=m,j=60*e.requiredRestMinutes,f=Math.floor((new Date).getTime()/1e3,10);return Object(n.h)(t,null,p&&p.map((e,s)=>{let a,p,m,g,x=0,v=0,y=O?O.find(t=>t.bib===parseInt(e.bib,10)):null;return y=y||{},Object(n.h)(t,null,Object(n.h)("tr",{class:"musher",onClick:l,"data-bib":e.bib},Object(n.h)("td",{class:c,style:r},e.startTime?i.a.isoTime(e.startTime):""),d&&d.map((s,l)=>{const i=u.slice().filter(t=>t.checkpoint===s.id).sort((d=["timestamp"],(t,e)=>d.map(s=>{let a=1;return"-"===s[0]&&(a=-1,s=s.substring(1)),t[s]>e[s]?a:t[s]<e[s]?-a:0}).reduce((t,e)=>t||e,0)));var d;const O=i.filter(t=>parseInt(t.bib,10)==e.bib),y=O.find(t=>"out"===t.direction),w=O.find(t=>"in"===t.direction),k=O.find(t=>"scratched"===t.direction),S=i.filter(t=>"in"===t.direction||"scratched"===t.direction).findIndex(t=>parseInt(t.bib,10)==e.bib),C=i.filter(t=>"out"===t.direction).findIndex(t=>parseInt(t.bib,10)==e.bib);let D,T=0;if(!s.isStartLine&&w&&y&&w.timestamp&&y.timestamp&&(T=o.a.deltaSec(w.timestamp,y.timestamp)),v+=T||0,!y&&w&&!s.isStartLine&&s.timeEqualization&&j){const t=o.a.deltaSec(w.timestamp,f);D=(v+t)/j*100,D=D>100?100:D}if(g)return"";if(-1===S){if(a){const l=Math.floor((new Date).getTime()/1e3),i=Math.floor(new Date(a.timestamp).getTime()/1e3),o=Math.floor((l-i)/60);let d=o/s.estTimeToCpMinutes*100;d=d>95?95:d;const u=Object(n.h)(t,null,Object(n.h)("td",{class:"text-center align-middle px-0 pr-1 "+c,style:r},Object(n.h)("div",{class:"progress",style:""+h},Object(n.h)("div",{class:"progress-bar progress-bar-striped",role:"progressbar",style:`width: ${d}%; ${b}`,"aria-valuenow":d,"aria-valuemin":"0","aria-valuemax":"100","data-prevtimestamp":a.timestamp,"data-timeUsedOnStage":o,"data-estTimeToCpMinutesPrev":m,"data-nowEpoch":l,"data-prevCpOutEpoch":i},p+1>0?p+1:"")),e.cpId&&O.length>0&&Object(n.h)(t,null)));return p=C,a=y,m=s.estTimeToCpMinutes,u}return""}x=l,p=C,a=y,m=s.estTimeToCpMinutes;const I=Object(n.h)(t,null,(w||k)&&l>0&&Object(n.h)(t,null,Object(n.h)("td",{class:"text-center align-middle px-0 pr-1 "+c,style:r},Object(n.h)("div",{class:"progress",style:""+h},Object(n.h)("div",{class:"progress-bar",role:"progressbar",style:"width: 100%; "+b,"aria-valuenow":"100","aria-valuemin":"0","aria-valuemax":"100"})),e.cpId&&O.length>0&&Object(n.h)(t,null))),Object(n.h)("td",{class:"text-center align-middle px-0 pr-1 "+c,style:r},Object(n.h)("div",{class:"progress",style:""+h},Object(n.h)("div",{class:`progress-bar ${D>0?"progress-bar-striped":""} ${k?"bg-danger":"bg-success"}`,role:"progressbar",style:`width: ${D||100}%; ${b}`,"aria-valuenow":D,"aria-valuemin":"0","aria-valuemax":"100"},k?Object(n.h)("i",{class:"fas fa-times"}):Object(n.h)(t,null,S+1>0?S+1:""))),e.cpId&&O.length>0&&Object(n.h)(t,null)));return g=k,I}),Object(n.h)("td",{colspan:2*d.length-x,class:c,style:r},Object(n.h)("div",{class:"d-flex flex-nowrap"},Object(n.h)("div",{class:"text-white font-weight-bolder pl-2 pr-1 py-0 rounded-pill-left rounded-none mr-2",style:`background-color: ${o.a.getRankingColor(s+1)}; width: 45px;`},e.bib),Object(n.h)("div",null,Object(n.h)("nobr",null,e.flag," ",e.lastname))))))}))}})||l,d=Object(r.a)(c=class extends n.Component{componentWillReceiveProps(t){if(this.props.currentClass.id!==t.currentClass.id||this.props.reloadLastEpoch!==t.reloadLastEpoch){const{currentClass:t}=this.props,{raceStore:e}=this.props.stores,{checkpoints:s=[],contestants:a=[],results:l=[],sortOrderResults:c,startDate:n}=t;e.sortContestantsByResult({contestants:a,results:l,checkpoints:s,sortOrderResults:c,startDate:n})}}componentDidMount(){const{currentClass:t}=this.props,{raceStore:e}=this.props.stores,{checkpoints:s=[],contestants:a=[],results:l=[],sortOrderResults:c,startDate:n}=t;e.sortContestantsByResult({contestants:a,results:l,checkpoints:s,sortOrderResults:c,startDate:n})}render(){const{currentClass:e,onClickMusher:s=(()=>{}),onClickCheckpoint:a=(()=>{}),selectedCheckpointId:l,limit:c=100,tableClass:i="table-striped table-sm",thClass:r,thStyle:o,tdClass:d,tdStyle:u,progressStyle:p="height: 20px;",progressbarStyle:m}=this.props,{checkpoints:O=[]}=e,{raceStore:j}=this.props.stores,{sortedContestants:f=[]}=j;return Object(n.h)(t,null,Object(n.h)("div",{class:"table-responsive"},Object(n.h)("table",{class:"table "+i},Object(n.h)("thead",null,Object(n.h)("tr",null,Object(n.h)("th",{class:r,style:o},Object(n.h)("div",{class:"",style:"width: 40px;"},Object(n.h)("i",{class:"fas fa-flag"}))),Object(n.h)(h,{stores:this.props.stores,checkpoints:O,thClass:r,thStyle:o,selectedCheckpointId:l,width:40,widthCp:20,onClickCheckpoint:a,dotColor:"#808080"}),Object(n.h)("th",{class:r,style:o},Object(n.h)("div",{class:"",style:"width: 20px;"},Object(n.h)("i",{class:"fas fa-flag-checkered"}))))),Object(n.h)("tbody",null,Object(n.h)(b,{stores:this.props.stores,currentClass:e,contestants:f,limit:c,onClickMusher:s,tdClass:d,tdStyle:u,progressStyle:p,progressbarStyle:m})))))}})||c;e.a=d}).call(this,s("hosL").Fragment)},cadc:function(t,e,s){"use strict";s.r(e),function(t){function a(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,a)}return s}function l(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?a(Object(s),!0).forEach((function(e){c(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):a(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}function c(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}var n,i,r=s("hosL"),o=s("Utv1"),h=s("/eY4"),b=s("OhSV"),d=s("fh8t"),u=s.n(d),p=s("RMlE"),m=s("8gML"),O=s("3kDq"),j=(s("aGZh"),s("/DnB"),s("cH0S")),f=(s("wanP"),s("ZQlJ"),s("fVsX"),s("aMCh")),g=(s("gcyc"),s("LbFk")),x=s("QuNB"),v=s("zUny"),y=s("ZOvn");const w=y.a.marginTop(!0,!0),k=y.a.marginBottom(),S={isLoading:!1,contentIsNotLoaded:!0,email:"",submenu:"ads",jwtToken:o.a.getJwtToken(),reloadInSec:null,reloadLastEpoch:null,reloadIsActive:!1};let C=Object(h.a)(n=class extends r.Component{constructor(t){super(t),this.initComponent=()=>{this.setState({reloadIsActive:!0},()=>this.tickReloadTimeer())},this.state=l({},S),this.updateTimer={}}tickReloadTimeer(){const{reloadLastEpoch:t}=this.props,{reloadIsActive:e}=this.state;if(e){const e=Math.floor((new Date).getTime()/1e3);this.setState({reloadInSec:60-(e-t)}),clearTimeout(this.updateTimer.tick),this.updateTimer.tick=setTimeout(()=>this.tickReloadTimeer(),1e3)}return!1}componentDidMount(){this.initComponent()}componentWillUnmount(){clearTimeout(this.updateTimer.tick)}render(){const{reloadInSec:e}=this.state,s=Math.floor(o.a.normalizeBetween(e,0,60,0,100));return Object(r.h)(t,null,Object(r.h)("div",{class:"progress fixed-top",style:"height: 2px; z-index: 999999;"},Object(r.h)("div",{class:"progress-bar",role:"progressbar",style:`width: ${s}%;`,"aria-valuenow":s,"aria-valuemin":"0","aria-valuemax":"100"})))}})||n,D=Object(h.a)(i=class extends r.Component{constructor(t){var e;super(t),e=this,this.loadLiveRaceResults=async function(t=e.props,{teamIds:s,focusOnMushers:a,bibs:l,classid:c,historySteps:n}){const{raceStore:i,userStore:r}=t.stores,{race:o}=i,{replayHistory:h}=e.state,{showDrawerReplay:b}=e.props,d=i.getClassById(c)||{},{isAdmin:u}=r;await i.getRaceTrackerData(o.raceTrackerRace,{historySteps:n,history:h||b,bibs:l,classid:c,startDate:d.startDate,endDate:d.endDate,isAdmin:u}),i.getRaceTrackerActiveTeams(s,a,l,!0)},this.loadRaceResults=async function(t=e.props,s,a){const{raceStore:l}=t.stores,{raceid:c}=t,{timerRunning:n}=e.state;await l.loadWorkoutSummary(s,c),l.getWorkoutSummaryActiveTeams(s,a),n&&(clearTimeout(e.updateTimer.reload),e.updateTimer.reload=setTimeout(()=>{const t=Math.floor((new Date).getTime()/1e3);e.setState({reloadLastEpoch:t}),e.loadRaceResults(e.props,s,a)},6e4))},this.toggleDisplayDetails=t=>{const e=t.target.closest("tr").dataset.email,{appState:s}=this.props.stores;s.toggleDisplayDetails(e)},this.adminToggleEditUser=t=>{t.stopPropagation();const e=t.target.closest("tr").dataset.email,{appState:s}=this.props.stores;s.toggleEditUserDetails(e)},this.adminSignupEdit=t=>{const{raceid:e}=this.props,{raceStore:s}=this.props.stores,a=t.target.id,l=t.target.value,{classid:c,contestantid:n}=t.target.dataset,i={raceClassId:c,contestantId:n,["raceClassContestant"+o.a.ucfirst(a)]:l};clearTimeout(this.updateTimer[a]),this.updateTimer[a]=setTimeout((async function(){s.editClass({id:e,data:i})}),500)},this.lockAllWorkoutsInRace=async function(){const{raceid:t}=e.props,{raceStore:s}=e.props.stores,a=await s.lockAllWorkoutsInRace({id:t});e.setState({lockMessage:a})},this.filterByClass=t=>{const e=t.target.closest("button").dataset.id,{appState:s}=this.props.stores;s.toggleSelectedClassId(e,!0)},this.toggleDrawer=()=>{const{showDrawer:t}=this.state;this.setState({showDrawer:!t,showDrawerCheckpoint:!1,showDrawerMusher:!1})},this.toggleDrawerMusher=t=>{const e=t.target.closest(".musher").dataset.bib;this.selectMusher(e)},this.selectMusher=t=>{this.setState({selectedMusherBib:t,showDrawerMusher:!0,showDrawerCheckpoint:!1,showDrawer:!1})},this.closeDrawerMusher=()=>{this.setState({selectedMusherBib:"",showDrawerMusher:!1})},this.toggleDrawerCheckpoint=t=>{const e=t.target.closest(".checkpoint").dataset.id;this.selectCheckpoint(e)},this.selectCheckpoint=t=>{this.setState({selectedCheckpointId:t,showDrawerCheckpoint:!0,showDrawerMusher:!1,showDrawer:!1})},this.closeDrawerCheckpoint=()=>{this.setState({selectedCheckpointId:"",showDrawerCheckpoint:!1})},this.state=l({timerRunning:!0},S),this.updateTimer={}}async loadRace(t=this.props){var e=this;const{loadTimes:s=0}=this.state;this.setState({isLoading:!0});const{raceStore:a,appState:l}=t.stores,{raceid:c,classid:n,filterByBibs:i,historySteps:r}=t;await a.load(c),a.getAllClassesSortedBy();const{race:o}=a,{focusOnMushers:h}=l,{selectedClassIds:b=[]}=l,d=null==o?void 0:o.classes.map(t=>t.id);let u=b[0];-1===d.indexOf(u)&&(u=d[0],l.setSelectedClassId(u)),n&&l.toggleSelectedClassId(n,!0);const p=o.classes.filter(t=>t.id===u).filter(t=>t.contestants&&t.contestants.length>0).map(t=>t.contestants.filter(t=>t.team>0).map(t=>t.team)).flat(),m=i||o.classes.filter(t=>t.id===u).filter(t=>t.contestants&&t.contestants.length>0).map(t=>t.contestants.filter(t=>t.bib>0).map(t=>t.bib)).flat();p.length>0&&await a.loadTeams(p.join(","),!1,!0,!0),o.liveRace>0?(await this.loadLiveRaceResults(this.props,{teamIds:p,focusOnMushers:h,bibs:m,classid:u,historySteps:r}),clearTimeout(this.updateTimer.reload),this.updateTimer.reload=setTimeout((async function(){const t=Math.floor((new Date).getTime()/1e3);e.setState({reloadLastEpoch:t}),e.loadRace()}),6e4)):await this.loadRaceResults(this.props,p,h),this.setState({isLoading:!1,contentIsNotLoaded:!1,loadTimes:s+1})}componentWillUnmount(){clearTimeout(this.updateTimer.reload),clearTimeout(this.updateTimer.tick)}componentDidMount(){this.loadRace()}componentWillReceiveProps(t){this.loadRace(t)}render(){const{appState:e,raceStore:s,userStore:a}=this.props.stores,{user:l={},isAdmin:c}=a,{raceid:n,path:i}=this.props,{displayDetails:h,editUserDetails:d,language:S="en",selectedClassIds:D=[]}=e,{race:T,classes:I}=s,{contentIsNotLoaded:R,lockMessage:L,showDrawer:P,showDrawerCheckpoint:M,showDrawerMusher:E,reloadLastEpoch:B,selectedCheckpointId:H,selectedMusherBib:N}=this.state,{activeTeams:$}=s,z=new Date(T.endDate);z.setHours(z.getHours()+2);const F=t=>!(D.length>0)||D.indexOf(t.id)>-1,U=1===T.liveRace;return Object(r.h)(t,null,Object(r.h)(p.a,{stores:this.props.stores}),Object(r.h)("div",{class:"container-fluid ",style:`margin-bottom: ${k}; margin-top: ${w};`},Object(r.h)(m.a,{stores:this.props.stores,path:i,raceid:n}),Object(r.h)("div",{class:"row border-bottom "},Object(r.h)("div",{class:"col-12"},Object(r.h)(b.b,null,Object(r.h)(O.a,{stores:this.props.stores,title:Object(r.h)(b.c,{id:"races.results"},"Resultater")})),c&&Object(r.h)(t,null,Object(r.h)("a",{href:`/race/${n}/resultsMain`},"New results demo")),Object(r.h)(C,{stores:this.props.stores,reloadLastEpoch:B}),U?Object(r.h)(t,null):Object(r.h)(t,null,l.email&&Object(r.h)("div",{class:"alert alert-primary",role:"alert"},"no"===S&&Object(r.h)(t,null,"Resultatene hentes direkte fra treningsøktene i QPaws appen.",Object(r.h)("br",null),Object(r.h)("strong",null,"For at treningsøktene skal bli registrert må øktene:"),Object(r.h)("ul",null,Object(r.h)("li",null,"Ha riktig dato som er innenfor løpsperioden."),Object(r.h)("li",null,"Være markert som 'Konkurranse'."),Object(r.h)("li",null,"Være registrert på teamet som er påmeldt."))),"en"===S&&Object(r.h)(t,null,"The results are imported directly from the workouts inside QPaws app.",Object(r.h)("br",null),Object(r.h)("strong",null,"To make sure your workouts are registered check the following:"),Object(r.h)("ul",null,Object(r.h)("li",null,"Use the correct date on your workout. Has to be inside the race period."),Object(r.h)("li",null,"Mark the workout as 'Race'."),Object(r.h)("li",null,"Workout has to be on the same team as you signed up with."))))),T.resultsUrl?Object(r.h)("div",{class:"p-3 my-4 bg-light"},Object(r.h)("a",{href:T.resultsUrl,target:"_blank",rel:"noreferrer",native:!0},T.resultsText?T.resultsText:Object(r.h)(t,null,Object(r.h)(b.c,{id:"races.results-here"},"Se resultater her")," ")," ",Object(r.h)("i",{class:"fas fa-chevron-circle-right"}))):Object(r.h)(t,null),U?Object(r.h)(t,null):Object(r.h)(t,null,(R||!I||0===I.length)&&Object(r.h)("div",{class:"d-flex justify-content-center my-5 py-5"},Object(r.h)("div",{class:"spinner-border text-primary",role:"status"},Object(r.h)("span",{class:"sr-only"},"Loading..."))))),U?Object(r.h)(t,null,!P&&Object(r.h)(t,null,Object(r.h)("div",{class:"col-12"},Object(r.h)("h1",null,Object(r.h)(b.c,{id:"races.classes"},"Classes")),Object(r.h)("nav",{class:"flex-column flex-sm-row"},T.classes&&T.classes.sort((t,e)=>t.distance-e.distance).map(e=>Object(r.h)(t,null,Object(r.h)("button",{type:"button",class:`btn btn-lg flex-sm-fill text-sm-center btn${D.indexOf(e.id)>-1?"":"-outline"}-primary mr-2 mb-2`,onClick:this.filterByClass,"data-id":e.id},e.title))))),Object(r.h)("div",{class:"col-12"},T.classes&&T.classes.filter(F).sort((t,e)=>t.distance-e.distance).map(t=>Object(r.h)("div",{class:"mt-5 mb-5"},Object(r.h)(f.a,{stores:this.props.stores,race:T,currentClass:t,reloadLastEpoch:B,key:"raceclass-"+t.id,onClickMusher:this.toggleDrawerMusher,onClickCheckpoint:this.toggleDrawerCheckpoint,selectedCheckpointId:H})))))):Object(r.h)(t,null,Object(r.h)("div",{class:"col-12 overflow-auto bg-light py-4 border rounded-lg mb-5",style:"max-height: 30vh;"},$&&$.length>0&&Object(r.h)(t,null,Object(r.h)("span",{class:"float-right"},Object(r.h)("span",{class:"text-muted"},Object(r.h)(b.c,{id:"races.mushers-on-trail"},"Mushers on trail"),": ",$.length))),Object(r.h)("h5",null,Object(r.h)(b.c,{id:"races.on-trail"},"På sporet nå"),":"),Object(r.h)("div",{class:"table-responsive-md"},Object(r.h)("table",{class:"table table-sm table-striped"},Object(r.h)("thead",null,Object(r.h)("tr",null,Object(r.h)("th",null,"#"),Object(r.h)("th",null,Object(r.h)(b.c,{id:"races.name"},"Navn")),Object(r.h)("th",null,Object(r.h)(b.c,{id:"races.start-date"},"Startdato")),Object(r.h)("th",{class:"text-center"},Object(r.h)(b.c,{id:"races.distance"},"Distanse")),Object(r.h)("th",{class:"text-center"},Object(r.h)(b.c,{id:"races.ascend"},"Høydemeter")),Object(r.h)("th",{class:"text-center"},Object(r.h)(b.c,{id:"races.avg-speed"},"Gj.snittsfart")),Object(r.h)("th",{class:"text-center"},Object(r.h)(b.c,{id:"races.race-time"},"Kjøretid")),Object(r.h)("th",{class:"text-center"},Object(r.h)(b.c,{id:"races.rest-time"},"Hviletid")),Object(r.h)("th",{class:"text-center"},Object(r.h)(b.c,{id:"races.load-index"},"B.index")),Object(r.h)("th",{class:"text-center"},Object(r.h)(b.c,{id:"races.current-speed"},"Fart nå")),Object(r.h)("th",null,Object(r.h)(b.c,{id:"races.elevation"},"Moh")),Object(r.h)("th",null,Object(r.h)(b.c,{id:"races.elevation-graph"},"Høydekurve")))),Object(r.h)("tbody",null,$&&$.length>0?$.map((e,a)=>{const l=s.getTeamById(e.team),c=s.getMusherByTeamId(l.id),n=o.a.format(3.6*e.currentLocation.coords.speed,1),i=e.secSinceLastUpdate>1800?"danger":e.secSinceLastUpdate>600?"warning":"success",h=e.currentLocation.timestamp;return Object(r.h)("tr",null,Object(r.h)("th",null,a+1),Object(r.h)("td",null,1===e.isInProgress&&Object(r.h)("div",{class:`spinner-grow text-${i} float-left`,role:"status"}),2===e.isInProgress&&Object(r.h)("i",{class:"fas fa-pause-circle text-warning mr-2 float-left",style:"font-size: 1.8em;"}),c.firstname," ",c.lastname,l.name&&Object(r.h)(t,null," / ",Object(r.h)("span",{class:"text-muted"},l.name)),Object(r.h)("br",null),Object(r.h)("small",null,Object(r.h)("i",{class:"fas fa-dog text-muted ml-2"})," ",e.avgDogs,Object(r.h)("i",{class:"fas fa-battery-three-quarters text-muted ml-2"})," ",o.a.format(100*e.currentLocation.battery.level,0),"%",Object(r.h)("i",{class:"fas fa-hourglass-half text-muted ml-2"})," Updated: ",o.a.formatDistance(h,new Date)," ago")),Object(r.h)("td",null,o.a.formatDate(e.date,{locale:S,hour12:!1,hour:"2-digit",minute:"2-digit"})),Object(r.h)("td",{class:"text-right"},o.a.format(e.distanceKm,1)," km"),Object(r.h)("td",{class:"text-right"},o.a.format(e.elevation,0)," m"),Object(r.h)("td",{class:"text-right"},o.a.format(e.speedAvg,1)," km/t"),Object(r.h)("td",{class:"text-center"},o.a.secToHms(e.duration)),Object(r.h)("td",{class:"text-center"},o.a.secToHms(e.rest)),Object(r.h)("td",{class:"text-right"},e.loadIndex),Object(r.h)("td",{class:"text-right"},n," km/t"),Object(r.h)("td",null,e.currentLocation.coords.altitude," moh"),Object(r.h)("td",null,Object(r.h)("svg",{viewBox:"0 0 300 100",style:"width: 100%; height: 50px;"},Object(r.h)("path",{d:""+e.svgElevation,style:"fill: #0063FF; stroke: #0063FF; stroke-width: 2; opacity: 0.2;"}))))}):Object(r.h)("tr",null,Object(r.h)("td",{colspan:"11",class:"text-center py-4"},Object(r.h)("h5",null,Object(r.h)(b.c,{id:"races.no-team-on-trail"},"Ingen team tracker live i The Musher appen akkurat nå...")))))))),Object(r.h)("div",{class:"col-12"},Object(r.h)("h1",null,Object(r.h)(b.c,{id:"races.classes"},"Classes")),Object(r.h)("nav",{class:"flex-column flex-sm-row"},T.classes&&T.classes.sort((t,e)=>t.distance-e.distance).map(e=>Object(r.h)(t,null,Object(r.h)("button",{type:"button",class:`btn btn-lg flex-sm-fill text-sm-center btn${D.indexOf(e.id)>-1?"":"-outline"}-primary mr-2 mb-2`,onClick:this.filterByClass,"data-id":e.id},e.title))))),Object(r.h)("div",{class:"col-12"},T.classes&&T.classes.filter(F).sort((t,e)=>t.distance-e.distance).map(e=>Object(r.h)("div",{class:"mt-5 mb-5"},T.resultDanger&&Object(r.h)("div",{class:"alert alert-danger",role:"alert"},Object(r.h)("div",{class:"spinner-grow text-danger float-left",role:"status"},Object(r.h)("span",{class:"sr-only"},"Loading...")),Object(r.h)("i",{class:"fas fa-exclamation-triangle float-left mr-4",style:"font-size: 2.0em;"}),Object(r.h)(u.a,{markdown:y.a.replaceImages(T.resultDanger,T.images,S),markdownOpts:y.a.getMarkdownOptions()})),T.resultWarning&&Object(r.h)("div",{class:"alert alert-warning",role:"alert"},Object(r.h)("i",{class:"fas fa-exclamation float-left mr-4",style:"font-size: 2.0em;"}),Object(r.h)(u.a,{markdown:y.a.replaceImages(T.resultWarning,T.images,S),markdownOpts:y.a.getMarkdownOptions()})),T.resultSuccess&&Object(r.h)("div",{class:"alert alert-success",role:"alert"},Object(r.h)("i",{class:"fas fa-check float-left mr-4",style:"font-size: 2.0em;"}),Object(r.h)(u.a,{markdown:y.a.replaceImages(T.resultSuccess,T.images,S),markdownOpts:y.a.getMarkdownOptions()})),Object(r.h)("span",{class:"float-right"},Object(r.h)("span",{class:"text-muted"},Object(r.h)(b.c,{id:"races.mushers"},"Mushers"),": ",e.totalMushers||0),Object(r.h)("span",{class:"text-muted ml-4"},Object(r.h)(b.c,{id:"races.finished-mushers"},"Finished mushers"),": ",e.totalFinished||0," ")),Object(r.h)("h3",null,e.title," ",e.startDate&&Object(r.h)(t,null,": ",Object(r.h)("span",{class:"font-weight-lighter"},o.a.formatDate(`${e.startDate} ${e.startTime||"00:00:00"}`,{locale:S,hour12:!1,hour:"2-digit",minute:"2-digit"})," - ",o.a.formatDate(`${e.endDate} ${e.endTime||"00:00:00"}`,{locale:S,hour12:!1,hour:"2-digit",minute:"2-digit"})))),Object(r.h)("div",{class:"table-responsive-md"},Object(r.h)("table",{class:"table table-sm table-striped"},Object(r.h)("thead",null,Object(r.h)("tr",null,Object(r.h)("th",{scope:"col"},"#"),Object(r.h)("th",{scope:"col",style:"min-width: 200px;"},Object(r.h)(b.c,{id:"races.name"},"Navn")),c&&Object(r.h)(t,null,Object(r.h)("th",{scope:"col"},Object(r.h)("i",{class:"fas fa-user-shield"})," Cellphone"),Object(r.h)("th",{scope:"col"},Object(r.h)("i",{class:"fas fa-user-shield"})," Email")),c&&Object(r.h)("th",{scope:"col",class:"d-none d-sm-block",style:"min-width: 400px;"},Object(r.h)(b.c,{id:"races.stages"},"Etapper")),Object(r.h)("th",{scope:"col"},Object(r.h)(b.c,{id:"races.result"},"Resultat")))),Object(r.h)("tbody",null,I[e.id]&&I[e.id].contestants&&I[e.id].contestants.map((a,l)=>{const{musher:n,currentTeam:i,currentStages:b,currentResults:p,completed:m,normalizedDuration:O,weightedNormalizedDuration:j,isDone:f,finishedDate:g,totalWorkoutTimeUsedSec:x}=a,v=s.getTotalsByTeamId(i.id);return Object(r.h)(t,null,Object(r.h)("tr",{onClick:this.toggleDisplayDetails,"data-email":n.email},Object(r.h)("th",{scope:"row"},l+1,c&&p&&Object(r.h)(t,null,Object(r.h)("br",null),p.isLocked?Object(r.h)("i",{class:"fas fa-lock text-danger mr-2"}):Object(r.h)("i",{class:"fas fa-lock-open text-success mr-2"}))),Object(r.h)("td",{class:""+(h[n.email]?"font-weight-bold":""),style:""+(h[n.email]?"":"line-height: 0.8em;")},h[n.email]?Object(r.h)(t,null,n.firstname," ",n.lastname,Object(r.h)("br",null),Object(r.h)("span",{class:"text-muted"},i.name),Object(r.h)("br",null),Object(r.h)("small",{class:"text-muted"},n.sportsClub),Object(r.h)("br",null),n.facebook&&Object(r.h)("a",{class:"mr-2",href:y.a.asFacebookLink(n.facebook),native:!0,target:"_blank",rel:"noreferrer"},Object(r.h)("i",{class:"fab fa-facebook"})),n.instagram&&Object(r.h)("a",{class:"mr-2",href:y.a.asInstagramLink(n.instagram),native:!0,target:"_blank",rel:"noreferrer"},Object(r.h)("i",{class:"fab fa-instagram"})),n.price1&&Object(r.h)("div",{class:"font-weight-lighter"},Object(r.h)("i",{class:"fas fa-trophy text-warning"})," ",n.price1,n.priceSent&&Object(r.h)(t,null,Object(r.h)("i",{class:"fas fa-check text-success"}))),n.price2&&Object(r.h)("div",{class:"font-weight-lighter"},Object(r.h)("i",{class:"fas fa-trophy text-warning"})," ",n.price2),n.price3&&Object(r.h)("div",{class:"font-weight-lighter"},Object(r.h)("i",{class:"fas fa-trophy text-warning"})," ",n.price3)):Object(r.h)(t,null,n.price1&&Object(r.h)("span",{class:"float-right text-warning",style:"font-size: 1.2em;"},Object(r.h)("i",{class:"fas fa-trophy"}),n.priceSent&&Object(r.h)(t,null,Object(r.h)("i",{class:"fas fa-check text-success"}))),Object(r.h)("nobr",null,n.firstname," ",n.lastname,Object(r.h)("br",null),Object(r.h)("small",{class:"text-muted"},n.sportsClub),Object(r.h)("br",null)))),c&&Object(r.h)(t,null,Object(r.h)("td",null,n.cellphone),Object(r.h)("td",null,n.email)),c&&Object(r.h)("td",{class:"d-none d-md-block"},c&&Object(r.h)(t,null,Object(r.h)("button",{class:"btn btn-primary btn-sm float-right",onClick:this.adminToggleEditUser},Object(r.h)("i",{class:"fas fa-user-edit"}))),c&&d[n.email]&&Object(r.h)(t,null,Object(r.h)("h5",null,"Admin edit:"),Object(r.h)("div",{class:"form-group row my-0"},Object(r.h)("label",{class:"col-sm-2 col-form-label text-right"},"Email"),Object(r.h)("div",{class:"col-sm-10"},n.email)),Object(r.h)("div",{class:"form-group row my-0"},Object(r.h)("label",{class:"col-sm-2 col-form-label text-right"},"Cellphone"),Object(r.h)("div",{class:"col-sm-10"},n.cellphone)),Object(r.h)("div",{class:"form-group row my-0"},Object(r.h)("label",{for:"team",class:"col-sm-2 col-form-label text-right"},"Race status"),Object(r.h)("div",{class:"col-sm-10"},Object(r.h)("select",{class:"form-control-plaintext",id:"raceStatus","data-classid":n.class,"data-contestantid":n.id,onInput:this.adminSignupEdit,value:n.raceStatus},Object(r.h)("option",{value:""},"-- Choose race status --"),Object(r.h)("option",{value:"OK"},"OK - Everything ok"),Object(r.h)("option",{value:"DNS"},"DNS - Did Not Start"),Object(r.h)("option",{value:"DNF"},"DNF - Did Not Finish"),Object(r.h)("option",{value:"DNQ"},"DNQ - Did not qualify"),Object(r.h)("option",{value:"DQ"},"DQ - Disqualified"),Object(r.h)("option",{value:"DC"},"DC - Data changed by user")))),Object(r.h)("div",{class:"form-group row my-0"},Object(r.h)("label",{for:"raceComment",class:"col-sm-2 col-form-label text-right"},"Race comment"),Object(r.h)("div",{class:"col-sm-10"},Object(r.h)("input",{type:"text",class:"form-control-plaintext",id:"raceComment","data-classid":n.class,"data-contestantid":n.id,onInput:this.adminSignupEdit,value:n.raceComment}))),Object(r.h)("div",{class:"form-group row my-0"},Object(r.h)("label",{for:"gpxResultsApproved",class:"col-sm-2 col-form-label text-right"},"GPX Results approved (date)"),Object(r.h)("div",{class:"col-sm-10"},Object(r.h)("input",{type:"date",class:"form-control-plaintext",id:"gpxResultsApproved","data-classid":n.class,"data-contestantid":n.id,onInput:this.adminSignupEdit,value:n.gpxResultsApproved?o.a.isoDate(n.gpxResultsApproved,!1,!1,!0):null}))),Object(r.h)("div",{class:"form-group row my-0"},Object(r.h)("label",{for:"price1",class:"col-sm-2 col-form-label text-right"},"Price 1"),Object(r.h)("div",{class:"col-sm-10"},Object(r.h)("input",{type:"text",class:"form-control-plaintext",id:"price1","data-classid":n.class,"data-contestantid":n.id,onInput:this.adminSignupEdit,value:n.price1}))),Object(r.h)("div",{class:"form-group row my-0"},Object(r.h)("label",{for:"price2",class:"col-sm-2 col-form-label text-right"},"Price 2"),Object(r.h)("div",{class:"col-sm-10"},Object(r.h)("input",{type:"text",class:"form-control-plaintext",id:"price2","data-classid":n.class,"data-contestantid":n.id,onInput:this.adminSignupEdit,value:n.price2}))),Object(r.h)("div",{class:"form-group row my-0"},Object(r.h)("label",{for:"price3",class:"col-sm-2 col-form-label text-right"},"Price 3"),Object(r.h)("div",{class:"col-sm-10"},Object(r.h)("input",{type:"text",class:"form-control-plaintext",id:"price3","data-classid":n.class,"data-contestantid":n.id,onInput:this.adminSignupEdit,value:n.price3}))),Object(r.h)("div",{class:"form-group row my-0"},Object(r.h)("label",{for:"priceSent",class:"col-sm-2 col-form-label text-right"},"Price sent"),Object(r.h)("div",{class:"col-sm-10"},Object(r.h)("input",{type:"date",class:"form-control-plaintext",id:"priceSent","data-classid":n.class,"data-contestantid":n.id,onInput:this.adminSignupEdit,value:n.priceSent?o.a.isoDate(n.priceSent,!1,!1,!0):null})))),c&&Object(r.h)("div",{class:"d-flex flex-wrap"},b&&b.map((s,a)=>{const l=s.distanceKm/e.distance*100,i=(l>100||parseInt(l,10),Math.floor(new Date(s.date).getTime()/1e3)),b=new Date(0);b.setUTCSeconds(i+parseInt(s.duration,10));s.images.flat();return h[n.email]?Object(r.h)(t,null,Object(r.h)("div",{class:"bg-light border rounded-lg  text-right position-relative mr-1 mb-1",style:"width: 350px; min-width: 320px;"},Object(r.h)("svg",{viewBox:"0 0 300 100",class:"position-absolute",style:"width: 100%; height: 95%; bottom: 0px; left: 0px; z-index: 0;"},Object(r.h)("path",{d:""+s.svgElevation,style:"fill: #0063FF; stroke: #0063FF; stroke-width: 2; opacity: 0.2;"})),Object(r.h)("div",{class:"position-relative px-3"},Object(r.h)("span",{class:"position-absolute",style:"top: 3px; left: 3px; font-size: 1.3em;"},a+1),Object(r.h)("small",null,c&&Object(r.h)("span",{class:"position-absolute",style:"top: 0px; right: -5px;"},s.isLocked?Object(r.h)("i",{class:"fas fa-lock text-danger"}):Object(r.h)("i",{class:"fas fa-lock-open text-success"})),Object(r.h)("span",{class:"float-left"},Object(r.h)("nobr",null,Object(r.h)("i",{style:"width: 20px;",class:"fas fa-sign-out-alt text-muted"})," ",o.a.formatDate(s.date,{locale:S,hour12:!1,hour:"2-digit",minute:"2-digit"})),Object(r.h)("nobr",null,Object(r.h)("i",{style:"width: 20px;",class:"fas fa-sign-in-alt text-muted"})," ",o.a.formatDate(b,{locale:S,hour12:!1,hour:"2-digit",minute:"2-digit"}))),Object(r.h)("span",{class:"float-right"},Object(r.h)("nobr",null,Object(r.h)("i",{style:"width: 20px;",class:"fas fa-road text-muted"})," ",o.a.format(s.distanceKm,1)||"n/a"," ",Object(r.h)("span",{class:"font-weight-lighter"},"km")),Object(r.h)("nobr",null,Object(r.h)("i",{style:"width: 20px;",class:"fas fa-mountain text-muted"})," ",o.a.format(s.elevation,0)||"n/a"," ",Object(r.h)("span",{class:"font-weight-lighter"},"m")),Object(r.h)("nobr",null,Object(r.h)("i",{style:"width: 20px;",class:"fas fa-tachometer-alt text-muted"})," ",o.a.format(s.speedAvg,1)||"n/a"," ",Object(r.h)("span",{class:"font-weight-lighter"},"km/t")),Object(r.h)("br",null),Object(r.h)("nobr",null,Object(r.h)("i",{style:"width: 20px;",class:"fas fa-clock text-muted"})," ",o.a.secToHms(s.duration)||"n/a"),Object(r.h)("nobr",null,Object(r.h)("i",{style:"width: 20px;",class:"fas fa-moon text-muted"})," ",o.a.secToHms(s.rest)||"n/a"),Object(r.h)("nobr",null,Object(r.h)("i",{style:"width: 20px;",class:"fas fa-running text-muted"})," ",o.a.secToHms(s.duration-s.rest)||"n/a"),Object(r.h)("br",null),Object(r.h)("nobr",null,Object(r.h)("i",{style:"width: 20px;",class:"fas fa-dog text-muted"})," ",o.a.format(s.avgDogs,0)||"n/a")))))):Object(r.h)(t,null,Object(r.h)("div",{class:"bg-light border rounded-lg text-right position-relative px-3 mr-1 mb-1",style:"width: 300px; min-width: 300px;"},Object(r.h)("small",null,c&&Object(r.h)("span",{class:"position-absolute",style:"top: 2px; right: -5px;"},s.isLocked?Object(r.h)("i",{class:"fas fa-lock text-danger"}):Object(r.h)("i",{class:"fas fa-lock-open text-sucess"})),Object(r.h)("span",{class:"float-left"},a+1),Object(r.h)("nobr",null,Object(r.h)("i",{style:"width: 20px;",class:"fas fa-road text-muted"})," ",o.a.format(s.distanceKm,1)||"n/a"," ",Object(r.h)("span",{class:"font-weight-lighter"},"km")),Object(r.h)("nobr",null,Object(r.h)("i",{style:"width: 20px;",class:"fas fa-tachometer-alt text-muted"})," ",o.a.format(s.speedAvg,1)||"n/a"," ",Object(r.h)("span",{class:"font-weight-lighter"},"km/t")),Object(r.h)("nobr",null,Object(r.h)("i",{style:"width: 20px;",class:"fas fa-clock text-muted"})," ",o.a.secToHms(s.duration)||"n/a"))))}))),Object(r.h)("td",{class:"text-right position-relative pl-4"},function(e){switch(e.raceStatus){case"OK":return Object(r.h)(t,null,Object(r.h)("span",{class:"position-absolute rounded-lg",style:"top: 10px; left: 0px;"},Object(r.h)("i",{class:"fas fa-check text-success"})));case"DNS":case"DNF":case"DNQ":case"DQ":return Object(r.h)(t,null,Object(r.h)("span",{class:"position-absolute bg-danger text-white text-center px-2 rounded-lg border",style:"top: 5px; left: -100px; width: 80px"},Object(r.h)("i",{class:"fas fa-info-circle"})," ",e.raceStatus));case"DC":return Object(r.h)(t,null,Object(r.h)("span",{class:"position-absolute bg-warning text-white text-center px-2 rounded-lg border",style:"top: 5px; left: -150px; width: 80px"},Object(r.h)("i",{class:"fas fa-info-circle"})," ",e.raceStatus));default:return""}}(n),n.raceComment&&Object(r.h)(t,null,Object(r.h)("div",{class:"alert alert-warning text-left",role:"alert"},Object(r.h)("i",{class:"fas fa-exclamation-triangle float-left mr-4",style:"font-size: 2.0em;"}),Object(r.h)(u.a,{markdown:y.a.replaceImages(n.raceComment,T.images,S),markdownOpts:y.a.getMarkdownOptions()}))),c&&p.lastUpdated>z&&Object(r.h)(t,null,Object(r.h)("div",{class:"alert alert-danger text-left d-none d-md-block",role:"alert"},Object(r.h)("i",{class:"fas fa-exclamation-triangle float-left mr-4",style:"font-size: 2.0em;"}),Object(r.h)("i",{class:"fas fa-user-shield"})," Last changed: ",o.a.formatDate(p.lastUpdated,{locale:S,hour12:!1,hour:"2-digit",minute:"2-digit"}))),m>=99?Object(r.h)("span",{class:"position-absolute",style:"top: 10px; left: 0px;"},Object(r.h)("i",{class:"fas fa-flag-checkered text-success"})):"",Object(r.h)("small",null,h[n.email]?Object(r.h)(t,null,Object(r.h)("nobr",null,Object(r.h)("i",{style:"width: 20px;",class:"fas fa-road text-muted"})," ",o.a.format(p.distanceKm,1)||"n/a"," ",Object(r.h)("span",{class:"font-weight-lighter"},"km")),Object(r.h)("nobr",null,Object(r.h)("i",{style:"width: 20px;",class:"fas fa-mountain text-muted"})," ",o.a.format(p.elevation,0)||"n/a"," ",Object(r.h)("span",{class:"font-weight-lighter"},"m")),Object(r.h)("div",{class:"progress mb-1",style:"height: 3px;"},Object(r.h)("div",{class:"progress-bar "+(m>=99?"bg-success":""),role:"progressbar",style:`width: ${m}%`,"aria-valuenow":""+m,"aria-valuemin":"0","aria-valuemax":"100"})),T.nonstop?Object(r.h)(t,null,Object(r.h)("nobr",null,Object(r.h)("i",{style:"width: 20px;",class:"fas fa-clock text-muted"})," ",o.a.secToHms(x)||"n/a"),Object(r.h)("nobr",null,Object(r.h)("i",{style:"width: 20px;",class:"fas fa-moon text-muted"})," ",o.a.secToHms(v.totalRest)||"n/a"),Object(r.h)("br",null),Object(r.h)("nobr",null,Object(r.h)("i",{style:"width: 20px;",class:"fas fa-calendar text-muted"})," ",o.a.isoDate(v.firstEpoch)," - ",Object(r.h)("i",{style:"width: 20px;",class:"fas fa-calendar text-muted"})," ",o.a.isoDate(g)),c&&Object(r.h)(t,null,Object(r.h)("br",null),Object(r.h)("div",{class:"text-danger"},v.firstGpxStartEpoch&&Object(r.h)(t,null,Object(r.h)("nobr",null,"firstGpxStartEpoch: ",o.a.isoDate(v.firstGpxStartEpoch)),Object(r.h)("br",null)),v.lastGpxStartEpoch&&Object(r.h)(t,null,Object(r.h)("nobr",null,"lastGpxStartEpoch: ",o.a.isoDate(v.lastGpxStartEpoch)),Object(r.h)("br",null)),Object(r.h)("nobr",null,"totalWorkoutTimeUsedSec: ",o.a.secToHms(v.totalWorkoutTimeUsedSec)),Object(r.h)("br",null),Object(r.h)("nobr",null,"rest: ",o.a.secToHms(v.rest)),Object(r.h)("br",null),Object(r.h)("nobr",null,"totalRest: ",o.a.secToHms(v.totalRest)),Object(r.h)("br",null),Object(r.h)("nobr",null,"duration: ",o.a.secToHms(v.duration)),Object(r.h)("br",null)))):Object(r.h)(t,null,Object(r.h)("nobr",null,Object(r.h)("i",{style:"width: 20px;",class:"fas fa-clock text-muted"})," ",o.a.secToHms(p.duration)||"n/a"),Object(r.h)("nobr",null,Object(r.h)("i",{style:"width: 20px;",class:"fas fa-moon text-muted"})," ",o.a.secToHms(p.rest)||"n/a"),Object(r.h)("nobr",null,Object(r.h)("i",{style:"width: 20px;",class:"fas fa-running text-muted"})," ",o.a.secToHms(p.duration-p.rest)||"n/a"),Object(r.h)("br",null),1===f&&Object(r.h)(t,null,Object(r.h)("nobr",{class:"font-weight-bold"},Object(r.h)("span",{class:"font-weight-lighter text-muted"},"Normalized to race distance:")," ",Object(r.h)("i",{style:"width: 20px;",class:"fas fa-clock text-muted"})," ",o.a.secToHms(O)||"n/a"),Object(r.h)("br",null)),1===f&&Object(r.h)(t,null,Object(r.h)("nobr",{class:"font-weight-bold"},Object(r.h)("span",{class:"font-weight-lighter text-muted"},"Normalized:")," ",Object(r.h)("i",{style:"width: 20px;",class:"fas fa-clock text-muted"})," ",o.a.secToHms(j)||"n/a"),Object(r.h)("br",null)))):Object(r.h)(t,null,Object(r.h)("nobr",null,Object(r.h)("i",{style:"width: 20px;",class:"fas fa-road text-muted"})," ",o.a.format(p.distanceKm,1)||"n/a"," ",Object(r.h)("span",{class:"font-weight-lighter"},"km")),Object(r.h)("nobr",null,Object(r.h)("i",{style:"width: 20px;",class:"fas fa-mountain text-muted"})," ",o.a.format(p.elevation,0)||"n/a"," ",Object(r.h)("span",{class:"font-weight-lighter"},"m")),Object(r.h)("div",{class:"progress mb-1",style:"height: 3px;"},Object(r.h)("div",{class:"progress-bar "+(m>=99?"bg-success":""),role:"progressbar",style:`width: ${m}%`,"aria-valuenow":""+m,"aria-valuemin":"0","aria-valuemax":"100"})),T.nonstop?Object(r.h)(t,null,Object(r.h)("nobr",null,Object(r.h)("i",{style:"width: 20px;",class:"fas fa-clock text-muted"})," ",o.a.secToHms(x)||"n/a"),Object(r.h)("nobr",null,Object(r.h)("i",{style:"width: 20px;",class:"fas fa-moon text-muted"})," ",o.a.secToHms(v.totalRest)||"n/a")):Object(r.h)(t,null,1===f?Object(r.h)(t,null,Object(r.h)("nobr",{class:"font-weight-bold"},Object(r.h)("i",{style:"width: 20px;",class:"fas fa-clock text-muted"})," ",o.a.secToHms(j)||"n/a"),Object(r.h)("br",null)):Object(r.h)(t,null,Object(r.h)("nobr",null,Object(r.h)("i",{style:"width: 20px;",class:"fas fa-clock text-muted"})," ",o.a.secToHms(p.duration)||"n/a"),Object(r.h)("br",null))))))))})))),Object(r.h)("div",{class:"text-center text-muted"},Object(r.h)("small",null,"no"===S&&Object(r.h)(t,null,"OBS! Ref reglene så er det ikke lov til å endre treningsøktene som er med i konkurransen etter at løpet er ferdig.",Object(r.h)("br",null),"Forsøk på dette vil resultere i automatisk deplassering på listene."),"en"===S&&Object(r.h)(t,null,"IMPORTANT! According to the rules: It is NOT allowed to try alter the workouts related to the competition after the race has ended.",Object(r.h)("br",null),"Attempts will result in automatic deplacement on the resultlists."))))))))),!U&&c&&Object(r.h)(t,null,Object(r.h)("button",{class:"btn btn-danger btn-lg float-right m-4",onClick:this.lockAllWorkoutsInRace},"Lock all workouts in this race"),Object(r.h)("xmp",{class:"m-5"},JSON.stringify(L,null,4))),P&&Object(r.h)(t,null,Object(r.h)(j.a,{stores:this.props.stores,onCloseClick:this.toggleDrawer},Object(r.h)(g.a,{stores:this.props.stores}))),M&&Object(r.h)(t,null,Object(r.h)(j.a,{stores:this.props.stores,onCloseClick:this.closeDrawerCheckpoint},Object(r.h)(v.a,{stores:this.props.stores,id:H,onClickNav:this.selectCheckpoint}))),E&&Object(r.h)(t,null,Object(r.h)(j.a,{stores:this.props.stores,onCloseClick:this.closeDrawerMusher},Object(r.h)(x.a,{stores:this.props.stores,bib:N,onClickNav:this.selectMusher}))))}})||i;e.default=D}.call(this,s("hosL").Fragment)},gcyc:function(t,e,s){"use strict";(function(t){var a,l=s("hosL"),c=s("Utv1"),n=s("/eY4"),i=s("OhSV"),r=s("fh8t"),o=s.n(r),h=s("ZOvn"),b=s("ZQlJ"),d=s("s4FZ"),u=s("e0EM");let p=Object(n.a)(a=class extends l.Component{constructor(t){super(t),this.toggleAdminInfo=t=>{t.stopPropagation();const{showAdminInfo:e}=this.state;this.setState({showAdminInfo:!e})},this.toggleInfo=t=>{t.stopPropagation();const{showInfo:e}=this.state;this.setState({showInfo:!e})},this.onDogClick=(t,e,s)=>{t.preventDefault(),t.stopPropagation();const a=s.find(t=>t.uuidv4===e);return this.setState({currentDog:a,showDog:e,dogs:s}),!1},this.chooseSubmenu=t=>{const e=t.target.closest("button").dataset.submenu;this.setState({submenu:e})},this.state={}}render(){const{raceStore:e,userStore:s}=this.props.stores,{showAdminInfo:a,submenu:n="details",showDog:r,currentDog:p={}}=this.state,{totalTrackLength:m}=e,{contestant:O={},onMarkerClick:j=(()=>{}),children:f,rank:g}=this.props,x=e.findWaypointByBib(O.bib),{isAdmin:v}=s,y=(O.bib?e.getMusherByBibId(O.bib):e.getMusherByBibEmail(O.email))||{},w=e.getTeamById(y.team),k=w.members?w.members.find(t=>t.email===y.email):{},S=(e.getClassByBib(O.bib),e.getTotalsByTeamId(y.team));let C=h.a.getImage({user:k,team:w,priority:"user",fallback:y.image1});const D=h.a.displayNameShort(k)||h.a.displayNameShort(y),T=O.color,I=h.a.hasBirthday(p.birth),R=p.birth?Math.ceil(h.a.daysUntilNextBirthday(p.birth)):365,{inFront:L,behind:P}=(c.a.format(x.totalDistanceOnTrack/m*100,0),e.findNearestMushers(O.bib)),M=w&&w.imageHeader&&w.imageHeader.s3XXLargeLink?w.imageHeader:{s3XXLargeLink:y.topImage1||"./assets/homerun-race-logo.png"},E=w&&w.images?[...w.images]:[];for(let t=0,e=3;t<e;t+=1)y["image"+t]&&E.push({s3SmallLink:y["image"+t],s3LargeLink:y["image"+t]});return Object(l.h)(t,null,Object(l.h)("div",{class:"w-100 position-absolute",style:"z-index: -1; height: 18vh; top: 0px; left: 0px; background-size: cover; background-repeat: no-repeat; background-position: 50% 30%; background-color: #a0a0a0; "+(M?`background-image: url("${M.s3XXLargeLink}");`:"")}),Object(l.h)("div",{class:"d-flex position-relative",style:"margin-top: 17vh;"},Object(l.h)("div",{class:"position-relative text-center border rounded-circle imageRounded",style:"margin-top: -50px; "+(C?`background-image: url("${C}"); background-size: cover;`:"background-color: #c0c0c0;")},!C&&Object(l.h)("div",{class:"text-muted",style:"font-size: 35px; padding-top: 10px;"},D),Object(l.h)("div",{class:`rounded-pill-both px-2 text-center position-absolute ${T?"":"bg-secondary"} font-weight-bold`,style:"bottom: -8px; right: 0; font-size: 1.2em; "+(T?`background-color: ${T};`:"")},g&&Object(l.h)(t,null,g))),Object(l.h)("div",{class:"flex-grow-1 pl-3 text-overflow mb-0",style:"line-height: 1.2em;"},Object(l.h)("h5",{class:"mb-0"},Object(l.h)("div",{class:"d-flex flex-nowrap"},Object(l.h)("div",{class:"text-white font-weight-bold pl-2 pr-1 py-0 rounded-pill-left rounded-none mr-2",style:`background-color: ${h.a.getRankingColor(g)}; width: 55px;`},y.bib),Object(l.h)("div",null,Object(l.h)("nobr",null,y.flag," ",y.firstname," ",y.lastname)))),Object(l.h)("span",{class:"mb-0",style:"margin-left: 93px;"},y.sportsClub||w.name||Object(l.h)(t,null," ")))),Object(l.h)("div",{class:"d-flex justify-content-center mb-3"},Object(l.h)("div",{class:"col px-0 pt-2"},Object(l.h)("button",{type:"button",class:`btn btn-block rounded-pill-left rounded-none ${"details"===n?"btn-primary":"btn-outline-primary"} text-nowrap`,style:"text-overflow: ellipsis; overflow: hidden;",onClick:this.chooseSubmenu,"data-submenu":"details"},"Details")),Object(l.h)("div",{class:"col px-0 pt-2"},Object(l.h)("button",{type:"button",class:`btn btn-block rounded-none ${"gpsdata"===n?"btn-primary":"btn-outline-primary"} text-nowrap`,style:"text-overflow: ellipsis; overflow: hidden;",onClick:this.chooseSubmenu,"data-submenu":"gpsdata"},"GPS Data")),Object(l.h)("div",{class:"col px-0 pt-2"},Object(l.h)("button",{type:"button",class:`btn btn-block rounded-none ${"team"===n?"btn-primary":"btn-outline-primary"} text-nowrap`,style:"text-overflow: ellipsis; overflow: hidden;",onClick:this.chooseSubmenu,"data-submenu":"team"},"Team")),Object(l.h)("div",{class:"col px-0 pt-2"},Object(l.h)("button",{type:"button",class:`btn btn-block rounded-pill-right rounded-none ${"dogs"===n?"btn-primary":"btn-outline-primary"} text-nowrap`,style:"text-overflow: ellipsis; overflow: hidden;",onClick:this.chooseSubmenu,"data-submenu":"dogs"},"Dogs"))),Object(l.h)("div",{class:"w-100 overflow-auto position-relative"},"details"===n&&Object(l.h)(t,null,f),"gpsdata"===n&&Object(l.h)(t,null,Object(l.h)(u.a,{stores:this.props.stores,wp:x,musher:y})),"team"===n&&Object(l.h)(t,null,w.public>0?Object(l.h)(t,null,Object(l.h)("h3",null,w.name),Object(l.h)(o.a,{markdown:h.a.replaceImages(w.description,w.images),markdownOpts:h.a.getMarkdownOptions()}),Object(l.h)(d.a,{stores:this.props.stores,images:E})):Object(l.h)(t,null,Object(l.h)("div",{class:"text-center text-muted"},Object(l.h)("div",{class:"display-1"},Object(l.h)("i",{class:"fas fa-dog"})),Object(l.h)("h3",null,Object(l.h)(i.c,{id:"teams.no-public-team"},"No public team!")),Object(l.h)(i.c,{id:"teams.no-public-team"},"This team is not publicly visible."),E&&Object(l.h)("div",{class:"my-3"},Object(l.h)(d.a,{stores:this.props.stores,images:E}))))),"dogs"===n&&Object(l.h)(t,null,w.public>0?Object(l.h)(t,null,w.dogs&&Object(l.h)("div",{class:"w-100 container-fluid"},Object(l.h)("div",{class:"row pt-2"},Object(l.h)(b.a,{stores:this.props.stores,dogs:w.dogs.map(t=>t.id),allDogs:w.dogs,onDogClick:this.onDogClick}))),r&&Object(l.h)(t,null,Object(l.h)("div",{class:"d-flex mb-0 mt-3 position-relative"},Object(l.h)("div",{class:"text-center border rounded-circle imageRounded imageRoundedLarge text-muted pt-2",style:p.image?`background-image: url("${p.image.s3LargeLink}"); background-size: cover;`:""},!p.image&&Object(l.h)("span",{class:"font-weight-lighter",style:"font-size: 35px;"},c.a.ucfirst(p.name,!0))),Object(l.h)("div",{class:"flex-grow-1 pl-3 pr-2",style:`border-right: 4px solid ${s.findHarness(p.harness,"colorNonstop")} !important; line-height: 1.2em;`},Object(l.h)("h5",{class:"mb-1"},p.shortname||p.name," ",p.shortname&&""!==p.shortname&&Object(l.h)(t,null," - ",Object(l.h)("span",{class:"font-weight-lighter"},p.name)),I&&Object(l.h)(t,null,Object(l.h)("i",{class:"fas fa-birthday-cake ml-3"}))),Object(l.h)("div",null,R<7&&Object(l.h)(t,null,Object(l.h)("span",{class:"text-muted mr-2"},Object(l.h)("i",{class:"fas fa-birthday-cake"})," in ",R," days")),p.birth&&Object(l.h)("span",{class:"mr-2"},c.a.age(p.birth,p.deceased)),"female"===p.gender?Object(l.h)("i",{class:"fas fa-venus"}):Object(l.h)("i",{class:"fas fa-mars"})))))):Object(l.h)(t,null,Object(l.h)("div",{class:"text-center text-muted"},Object(l.h)("div",{class:"display-1"},Object(l.h)("i",{class:"fas fa-dog"})),Object(l.h)("h3",null,Object(l.h)(i.c,{id:"teams.no-public-team"},"No public team!")),Object(l.h)(i.c,{id:"teams.no-public-team"},"This team is not publicly visible.")))),v&&Object(l.h)("div",{style:"max-height: 200px; max-width: 70vw; overflow: auto;"},Object(l.h)("button",{class:"btn btn-link btn-block",onClick:this.toggleAdminInfo},"Toggle admin info"),a&&Object(l.h)(t,null,Object(l.h)("small",null,Object(l.h)("xmp",null,"musher: ",JSON.stringify(y,null,4),Object(l.h)("br",null),"user: ",JSON.stringify(k,null,4),Object(l.h)("br",null),"team: ",JSON.stringify(w,null,4),Object(l.h)("br",null),"totals: ",JSON.stringify(S,null,4),Object(l.h)("br",null))))),Object(l.h)("div",{class:"d-flex position-absolute",style:"right: 10px; bottom: 10px;"},L.bib&&Object(l.h)("a",{class:"text-primary mx-2",onClick:()=>j(L),style:"line-height: 1.0em; font-size: 2.3em;"},Object(l.h)("i",{class:"fas fa-angle-left"})),P.bib&&Object(l.h)("a",{class:"text-primary mx-2",onClick:()=>j(P),style:"line-height: 1.0em; font-size: 2.3em;"},Object(l.h)("i",{class:"fas fa-angle-right"})))))}})||a;e.a=p}).call(this,s("hosL").Fragment)},irB3:function(t,e,s){"use strict";(function(t){var a,l=s("hosL"),c=s("Utv1"),n=s("/eY4");s("OhSV"),s("ZOvn");let i=Object(n.a)(a=class extends l.Component{render(){const{value:e=0,smallUnit:s}=this.props,{userStore:a}=this.props.stores,{user:n}=a,{settings:i={}}=n;return i.imperial?Object(l.h)(t,null,Object(l.h)("nobr",null,c.a.format(function(t){return 3.28084*t}(e),0)," ",s?Object(l.h)(t,null,Object(l.h)("small",null,Object(l.h)("small",null,Object(l.h)("small",{class:"ml-0 text-muted"},"ft")))):Object(l.h)(t,null,"ft"))):Object(l.h)(t,null,Object(l.h)("nobr",null,c.a.format(e,0)," ",s?Object(l.h)(t,null,Object(l.h)("small",null,Object(l.h)("small",null,Object(l.h)("small",{class:"ml-0 text-muted"},"m")))):Object(l.h)(t,null,"m")))}})||a;e.a=i}).call(this,s("hosL").Fragment)},nHdA:function(t,e,s){"use strict";(function(t){var a,l=s("hosL"),c=s("Utv1"),n=s("/eY4"),i=s("OhSV");s("ZOvn");let r=Object(n.a)(a=class extends l.Component{render(){const{value:e=0,smallUnit:s}=this.props,{userStore:a}=this.props.stores,{user:n}=a,{settings:r={}}=n;return r.imperial?Object(l.h)(t,null,Object(l.h)("nobr",null,c.a.format(function(t){return.621371*t}(e),1)," ",s?Object(l.h)(t,null,Object(l.h)("small",null,Object(l.h)("small",null,Object(l.h)("small",{class:"ml-0 text-muted"},Object(l.h)(i.c,{id:"workouts.mph"},"mph"))))):Object(l.h)(t,null,Object(l.h)(i.c,{id:"workouts.mph"},"mph")))):Object(l.h)(t,null,Object(l.h)("nobr",null,c.a.format(e,1)," ",s?Object(l.h)(t,null,Object(l.h)("small",null,Object(l.h)("small",null,Object(l.h)("small",{class:"ml-0 text-muted"},Object(l.h)(i.c,{id:"workouts.kmt"},"km/t"))))):Object(l.h)(t,null,Object(l.h)(i.c,{id:"workouts.kmt"},"km/t"))))}})||a;e.a=r}).call(this,s("hosL").Fragment)}}]);
//# sourceMappingURL=66.chunk.eeee9.esm.js.map