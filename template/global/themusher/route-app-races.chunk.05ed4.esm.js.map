{"version":3,"sources":["webpack:///./routes/app-races/index.js"],"names":["MARGIN_TOP","mu","marginTop","MARGIN_TOP_BACK","marginTopBack","MARGIN_BOTTOM","marginBottom","initialState","subMenuMarginTop","isLoading","AppRaceDetailSignup","observer","Component","constructor","props","super","signupToRace","async","raceStore","userStore","stores","user","signup","raceid","addContestant","id","classId","class","newContestant","team","firstname","lastname","sportsClub","email","cellphone","facebook","instagram","updateSignup","e","key","target","value","this","updateObjectKeyValue","editSignup","field","classid","contestantid","dataset","data","raceClassId","contestantId","util","ucfirst","clearTimeout","updateTimer","setTimeout","editClass","likeRace","race","toggleAddComment","raceId","parentElement","showAddComment","state","setState","inputRef","focus","back","route","load","classes","i","l","length","currentClass","contestants","idx","findIndex","updateKeyValue","componentDidMount","loadRace","componentWillReceiveProps","nextProps","render","appState","teams","language","signupClass","getRaceClassById","today","Date","style","onClick","title","startDate","formatDate","locale","hour12","hour","minute","endDate","signupStartDate","signupEndDate","signuppayment","for","paidSignupfee","role","line","images","isString","text","match","RegExp","exec","parsedLanguageText","replace","p1","p2","isObject","s3XXLargeLink","replaceImages","signupfee","type","data-classid","data-contestantid","onInput","placeholder","aria-describedby","map","name","disabled","sort","a","b","distance","checked","termsAndAgreement"],"mappings":"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","file":"route-app-races.chunk.05ed4.esm.js","sourcesContent":["import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport { Text, Localizer } from 'preact-i18n';\nimport { route } from 'preact-router';\n\nimport mu from '../../lib/musher-util';\nconst MARGIN_TOP = mu.marginTop(false);\nconst MARGIN_TOP_BACK = mu.marginTopBack(false);\nconst MARGIN_BOTTOM = mu.marginBottom();\nconst SUB_MENU_MARGIN_TOP = mu.subMenuMarginTop();\n\nfunction replaceImages(line = '', images, language = 'no') {\n    function imageReplacer(match, p1, p2, p3, offset, string) {\n        // console.log({ match, p1, p2, p3, offset, string })\n        if (util.isObject(images[p1])) {\n            return `<img src=${images[p1].s3XXLargeLink} class='img-fluid float-right' style='width: ${p2 || 40}%;' />`;\n        }\n        return '';\n    }\n\n    if (util.isString(line)) {\n\t\tlet text = line;\n        const regex = new RegExp(`<${language}>(.*?)</${language}>`, 's');\n\t\tconst match = regex.exec(text);\n\t\tif (match) {\n\t\t\tconst parsedLanguageText = match[0];\n\t\t\tif (parsedLanguageText) {\n\t\t\t\ttext = parsedLanguageText;\n\t\t\t}\n\t\t}\n        return text.replace(/\\{\\{img\\.(\\d+)\\s*(\\d*)\\}\\}/g, imageReplacer);\n    }\n    return line;\n}\n\nconst initialState = {\n\tisLoading: false,\n};\n\n@observer\nclass AppRaceDetailSignup extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            ...initialState,\n        };\n\t\tthis.inputRef = {};\n        this.updateTimer = {};\n    }\n\n\tasync loadRace(props = this.props) {\n\t\tthis.setState({ isLoading: true });\n\t\tconst { raceStore, userStore } = props.stores;\n\t\tconst { user = {} } = userStore;\n\t\tconst { raceid } = props;\n\t\tawait raceStore.load(raceid);\n\t\tthis.setState({ isLoading: false });\n\n\t\tlet signup = {};\n\t\tconst { race } = raceStore;\n\t\tif (race.classes && user && user.email) {\n\t\t\tfor (let i = 0, l = race.classes.length; i < l; i += 1) {\n\t\t\t\tconst currentClass = race.classes[i];\n\t\t\t\tif (currentClass.contestants) {\n\t\t\t\t\tconst idx = currentClass.contestants.findIndex(e => e.email === user.email);\n\t\t\t\t\tif (idx > -1) {\n\t\t\t\t\t\tsignup = { ...currentClass.contestants[idx] };\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\traceStore.updateKeyValue('signup', signup);\n\t}\n\n\tsignupToRace = async () => {\n\t\tconst { raceStore, userStore } = this.props.stores;\n\t\tconst { user } = userStore;\n        const { signup } = raceStore;\n\t\tconst { raceid } = this.props;\n\n\t\tawait raceStore.addContestant({\n\t\t\tid: raceid,\n\t\t\tclassId: signup.class,\n\t\t\tnewContestant: {\n\t\t\t\tteam: user.team,\n\t\t\t\tfirstname: user.firstname,\n\t\t\t\tlastname: user.lastname,\n\t\t\t\tsportsClub: user.sportsClub,\n\t\t\t\temail: user.email,\n\t\t\t\tcellphone: user.cellphone,\n\t\t\t\tfacebook: user.facebook,\n\t\t\t\tinstagram: user.instagram,\n\t\t\t\t ...signup\n\t\t\t} });\n\t}\n\n    updateSignup = (e) => {\n        const key = e.target.id;\n        const value = e.target.value;\n        const { raceStore } = this.props.stores;\n        raceStore.updateObjectKeyValue('signup', key, value);\n    }\n\n    editSignup = (e) => {\n        const { raceid } = this.props;\n        const { raceStore } = this.props.stores;\n        const field = e.target.id;\n        const value = e.target.value;\n        const { classid, contestantid } = e.target.dataset;\n        raceStore.updateObjectKeyValue('signup', field, value);\n\n        // console.log({ raceid, field, value, classid });\n        // const { raceStore } = this.props.stores;\n        // raceStore.updateObjectKeyValue('signup', key, value);\n\n        const data = {\n\t\t\traceClassId: classid,\n            contestantId: contestantid,\n\t\t\t[`raceClassContestant${util.ucfirst(field)}`]: value,\n\t\t};\n\t\tclearTimeout(this.updateTimer[field]);\n\t\tthis.updateTimer[field] = setTimeout(async () => {\n\t\t\traceStore.editClass({\n\t\t\t\tid: raceid,\n\t\t\t\tdata,\n\t\t\t});\n\t\t}, 500);\n    }\n\n\t// editRaceClass = async (e) => {\n\t// \tconst { id, field } = e.target.dataset;\n\t// \tconst { value } = e.target;\n\t// \tconst { raceid } = this.props;\n\t// \tconst { raceStore } = this.props.stores;\n\t// \tconst data = {\n\t// \t\traceClassId: id,\n\t// \t\t[`raceClass${util.ucfirst(field)}`]: value,\n\t// \t};\n\t// \tclearTimeout(this.updateTimer[field]);\n\t// \tthis.updateTimer[field] = setTimeout(async () => {\n\t// \t\traceStore.editClass({\n\t// \t\t\tid: raceid,\n\t// \t\t\tdata,\n\t// \t\t});\n\t// \t}, 500);\n\t// }\n\n\t// editSignupToRaceasync = async () => {\n\t// \tconst { raceStore, userStore } = this.props.stores;\n\t// \tconst { user } = userStore;\n    //     const { signup } = raceStore;\n\t// \tconst { raceid } = this.props;\n\n\t// \tawait raceStore.editContestant({\n\t// \t\tid: raceid,\n\t// \t\tclassId: signup.class,\n\t// \t\tnewContestant: {\n\t// \t\t\tteam: user.team,\n\t// \t\t\tfirstname: user.firstname,\n\t// \t\t\tlastname: user.lastname,\n\t// \t\t\tsportsClub: user.sportsClub,\n\t// \t\t\temail: user.email,\n\t// \t\t\tcellphone: user.cellphone,\n\t// \t\t\tfacebook: user.facebook,\n\t// \t\t\tinstagram: user.instagram,\n\t// \t\t\t ...signup\n\t// \t\t} });\n\t// }\n\n    likeRace = async () => {\n\t\tconst { raceStore } = this.props.stores;\n\t\tconst { race } = raceStore;\n\t\tconst response = await raceStore.likeRace({ id: race.id });\n\n        if (response && response.status === 200) {\n\t\t\t// this.loadRaceDetail({ race });\n\t\t}\n\t}\n\n\ttoggleAddComment = (e) => {\n\t\tconst raceId = e.target.parentElement.dataset.id || e.target.dataset.id;\n\t\tconst { showAddComment } = this.state;\n\t\tthis.setState({\n\t\t\tshowAddComment: !showAddComment,\n\t\t}, () => {\n\t\t\tif (this.inputRef[raceId]) {\n\t\t\t\tthis.inputRef[raceId].focus();\n\t\t\t}\n\t\t});\n\t}\n\n\tcomponentDidMount() {\n\t\tthis.loadRace();\n\t}\n\n    componentWillReceiveProps(nextProps) {\n        if (nextProps.raceid !== this.props.raceid) {\n            this.loadRace(nextProps);\n        }\n\t}\n\n    back = () => {\n        route(`/`, true);\n    }\n\n\trender() {\n\t\tconst { userStore, raceStore, appState } = this.props.stores;\n\t\tconst { user = {}, teams = [] } = userStore;\n\t\tconst { raceid, subsection } = this.props;\n\t\tconst { race, signup } = raceStore;\n        const { darkmode, language = 'no' } = appState;\n\n        let signupClass = {};\n        if (signup.class) {\n            signupClass = raceStore.getRaceClassById(signup.class);\n        }\n\t\tconst today = new Date();\n\n\t\treturn (\n\t\t\t<div class='container-fluid' style={`margin-bottom: ${MARGIN_BOTTOM}; margin-top: ${MARGIN_TOP};`}>\n\n                <div class='d-flex justify-content-between mb-2'>\n                    <div>\n                        <button class='btn btn-link pl-0 fixed-top'\n                            style={`top: ${MARGIN_TOP_BACK}; left: 5px; font-size: 25px; width: 40px;`}\n                            onClick={this.back}>\n                            <i class='fas fa-arrow-circle-left' />\n                        </button>\n                    </div>\n                    <div>\n                        <h5 class='text-muted'>&nbsp;</h5>\n                    </div>\n                </div>\n\n                <h2 class='mb-0'><Text id='races.signup'>Påmelding</Text> <span class='font-weight-lighter' style='letter-spacing: -1px;'> - {race.title}</span></h2>\n\t            <div class='mb-4'>\n                    {race.startDate && <><Text id='races.periode'>Periode</Text>: {util.formatDate(race.startDate, { locale: 'no-NB', hour12: false, hour: '2-digit', minute: '2-digit' })}</>}\n                    {race.endDate && <> - {util.formatDate(race.endDate, { locale: 'no-NB', hour12: false, hour: '2-digit', minute: '2-digit' })}</>}\n                </div>\n\n                {today >= new Date(race.signupStartDate) && today <= new Date(race.signupEndDate) ? <>\n\n                    <span class='font-weight-lighter'><Text id='races.signed-in-as'>Logget inn som</Text>:</span> {user.email}<br /><br />\n\n                    {signup.id ? <>\n\n                        <div class='font-weight-bold mb-4'>\n                            <i class='fas fa-check text-success' /> <Text id='races.signed-up'>Din bruker er påmeldt!</Text><br />\n                            {/* {JSON.stringify(signup)} */}\n                        </div>\n\n\n                        {race.signuppayment && <>\n                            <div class='form-group row my-0'>\n                                <label for='cellphone' class='col-2 col-form-label text-right font-weight-lighter'><Text id='races.signup'>Påmelding</Text></label>\n                                <div class='col-10'>\n                                    {signup.paidSignupfee ? <div class='py-2'>\n                                        <Text id='races.paid'>Betalt</Text>: {util.formatDate(signup.paidSignupfee)}\n                                        <i class='fas fa-check text-success ml-3' />\n                                    </div> : <>\n                                        <div class='alert alert-danger mb-1' role='alert'>\n                                            <h5>\n                                                <span class='font-weight-lighter'><Text id='races.payment-info'>Betaling påmelding</Text>:</span> {replaceImages(race.signuppayment, race.images, language)}<br />\n                                                {signupClass.signupfee || race.signupfee} NOK\n                                            </h5>\n                                        </div>\n                                    </>}\n                                </div>\n                            </div>\n                        </>}\n\n                        <div class='clearfix mt-2'>\n                            <span class='font-weight-lighter float-right'><Text id='races.click-to-change'>Klikk for å endre info i påmeldingen.</Text></span>\n                        </div>\n\n                        <div class='form-group row my-0'>\n                            <label for='cellphone' class='col-2 col-form-label text-right font-weight-lighter'><Text id='races.cellphone'>Mobil</Text></label>\n                            <div class='col-10'>\n                                <Localizer>\n                                    <input type='text' class='form-control-plaintext' id='cellphone'\n                                        data-classid={signup.class}\n                                        data-contestantid={signup.id}\n                                        onInput={this.editSignup}\n                                        value={signup.cellphone}\n                                        placeholder={<Text id='races.cellphone-help'>Hva er mobilnummer ditt?</Text>}\n                                    />\n                                </Localizer>\n                            </div>\n                        </div>\n                        <div class='form-group row my-0'>\n                            <label for='firstname' class='col-2 col-form-label text-right font-weight-lighter'><Text id='races.firstname'>Fornavn</Text></label>\n                            <div class='col-10'>\n                                <Localizer>\n                                    <input type='text' class='form-control-plaintext' id='firstname'\n                                        data-classid={signup.class}\n                                        data-contestantid={signup.id}\n                                        onInput={this.editSignup}\n                                        value={signup.firstname}\n                                        placeholder={<Text id='races.firstname-help'>Hva er fornavnet ditt?</Text>}\n                                    />\n                                </Localizer>\n                            </div>\n                        </div>\n                        <div class='form-group row my-0'>\n                            <label for='lastname' class='col-2 col-form-label text-right font-weight-lighter'><Text id='races.lastname'>Etternavn</Text></label>\n                            <div class='col-10'>\n                                <Localizer>\n                                    <input type='text' class='form-control-plaintext' id='lastname'\n                                        data-classid={signup.class}\n                                        data-contestantid={signup.id}\n                                        onInput={this.editSignup}\n                                        value={signup.lastname}\n                                        placeholder={<Text id='races.lastname-help'>Hva er etternavnet ditt?</Text>}\n                                    />\n                                </Localizer>\n                            </div>\n                        </div>\n                        <div class='form-group row my-0'>\n                            <label for='sportsClub' class='col-2 col-form-label text-right font-weight-lighter'><Text id='races.sportsclub'>Klubb</Text></label>\n                            <div class='col-10'>\n                                <Localizer>\n                                    <input type='text' class='form-control-plaintext' id='sportsClub'\n                                        data-classid={signup.class}\n                                        data-contestantid={signup.id}\n                                        onInput={this.editSignup}\n                                        value={signup.sportsClub}\n                                        placeholder={<Text id='races.sportsClub-help'>Hvilken klubb tilhører du?</Text>}\n                                    />\n                                </Localizer>\n                            </div>\n                        </div>\n                        <div class='form-group row my-0'>\n                            <label for='facebook' class='col-2 col-form-label text-right font-weight-lighter'><Text id='races.facebook'>Facebook</Text></label>\n                            <div class='col-10'>\n                                <Localizer>\n                                    <input type='text' class='form-control-plaintext' id='facebook'\n                                        data-classid={signup.class}\n                                        data-contestantid={signup.id}\n                                        onInput={this.editSignup}\n                                        value={signup.facebook}\n                                        placeholder={<Text id='races.facebook-help'>Hva er Facebook brukernavnet ditt?</Text>}\n                                    />\n                                </Localizer>\n                            </div>\n                        </div>\n                        <div class='form-group row my-0'>\n                            <label for='instagram' class='col-2 col-form-label text-right font-weight-lighter'><Text id='races.instagram'>Instagram</Text></label>\n                            <div class='col-10'>\n                                <Localizer>\n                                    <input type='text' class='form-control-plaintext' id='instagram'\n                                        data-classid={signup.class}\n                                        data-contestantid={signup.id}\n                                        onInput={this.editSignup}\n                                        value={signup.instagram}\n                                        placeholder={<Text id='races.instagram-help'>Hva er Instagram brukernavnet ditt?</Text>}\n                                    />\n                                </Localizer>\n                            </div>\n                        </div>\n                        <div class='form-group row my-0'>\n                            <label for='team' class='col-2 col-form-label text-right font-weight-lighter'><Text id='races.team'>Team</Text></label>\n                            <div class='col-10'>\n                                <select class='form-control-plaintext' id='team' aria-describedby='teamHelp'\n                                    data-classid={signup.class}\n                                    data-contestantid={signup.id}\n                                    onInput={this.editSignup}\n                                    value={signup.team}\n                                >\n                                    <option value=''>-- <Text id='races.choose-team'>Velg team</Text> --</option>\n                                    {teams.map(team => \n                                        <option value={team.id}>{team.name}</option>\n                                    )}\n                                </select>\n                            </div>\n                        </div>\n                        <div class='form-group row my-0'>\n                            <label for='team' class='col-2 col-form-label text-right font-weight-lighter'><Text id='races.class'>Klasse</Text></label>\n                            <div class='col-10'>\n                                <select class='form-control-plaintext' id='class' aria-describedby='classHelp'\n                                    onInput={this.editSignup}\n                                    value={signup.class}\n                                    disabled\n                                >\n                                    <option value=''>-- <Text id='races.choose-class'>Velg klasse</Text> --</option>\n                                    {race.classes && race.classes.sort((a, b) => a.distance - b.distance).map(currentClass => <>\n                                        <option value={currentClass.id}>{currentClass.title} - {currentClass.distance} km - Påmelding: {currentClass.signupfee || race.signupfee} NOK</option>\n                                    </>)}\n                                </select>\n                            </div>\n                        </div>\n\n                    </> : <>\n\n                        <div class='form-group'>\n                            <label for='cellphone'><Text id='races.cellphone'>Mobil</Text></label>\n                            <input type='text' class='form-control' id='cellphone' aria-describedby='cellphoneHelp'\n                                placeholder={user.cellphone}\n                                onInput={this.updateSignup}\n                                value={signup.cellphone}\n                            />\n                            <small id='cellphoneHelp' class='form-text text-muted'><Text id='races.cellphone-help'>'Hva er mobilnummer ditt?'</Text></small>\n                        </div>\n\n                        <div class='row'>\n                            <div class='col'>\n                                <div class='form-group'>\n                                    <label for='firstname'><Text id='races.firstname'>Fornavn</Text></label>\n                                    <input type='text' class='form-control' id='firstname' aria-describedby='firstnameHelp'\n                                        placeholder={user.firstname}\n                                        onInput={this.updateSignup}\n                                        value={signup.firstname}\n                                    />\n                                    <small id='firstnameHelp' class='form-text text-muted'><Text id='races.firstname-help'>Hva er fornavnet ditt?</Text></small>\n                                </div>\n                            </div>\n                            <div class='col'>\n                                <div class='form-group'>\n                                    <label for='lastname'><Text id='races.lastname'>Etternavn</Text></label>\n                                    <input type='text' class='form-control' id='lastname' aria-describedby='lastnameHelp'\n                                        placeholder={user.lastname}\n                                        onInput={this.updateSignup}\n                                        value={signup.lastname}\n                                    />\n                                    <small id='lastnameHelp' class='form-text text-muted'><Text id='races.lastname-help'>Hva er etternavnet ditt?</Text></small>\n                                </div>\n                            </div>\n                        </div>\n\n                        <div class='form-group'>\n                            <label for='sportsClub'><Text id='races.sportsclub'>Klubb</Text></label>\n                            <input type='text' class='form-control' id='sportsClub' aria-describedby='sportsClubHelp'\n                                placeholder={user.sportsClub}\n                                onInput={this.updateSignup}\n                                value={signup.sportsClub}\n                            />\n                            <small id='sportsClubHelp' class='form-text text-muted'><Text id='races.sportsClub-help'>Hvilken klubb tilhører du?</Text></small>\n                        </div>\n\n                        <div class='row'>\n                            <div class='col'>\n                                <div class='form-group'>\n                                    <label for='facebook'><Text id='races.facebook'>Facebook</Text></label>\n                                    <input type='text' class='form-control' id='facebook' aria-describedby='facebookHelp'\n                                        placeholder={user.facebook}\n                                        onInput={this.updateSignup}\n                                        value={signup.facebook}\n                                    />\n                                    <small id='facebookHelp' class='form-text text-muted'><Text id='races.facebook-help'>Hva er Facebook brukernavnet ditt?</Text></small>\n                                </div>\n                            </div>\n                            <div class='col'>\n                                <div class='form-group'>\n                                    <label for='instagram'><Text id='races.instagram'>Instagram</Text></label>\n                                    <input type='text' class='form-control' id='instagram' aria-describedby='instagramHelp'\n                                        placeholder={user.instagram}\n                                        onInput={this.updateSignup}\n                                        value={signup.instagram}\n                                    />\n                                    <small id='instagramHelp' class='form-text text-muted'><Text id='races.instagram-help'>Hva er Instagram brukernavnet ditt?</Text></small>\n                                </div>\n                            </div>\n                        </div>\n\n                        <div class='form-group'>\n                            <label for='team'><Text id='races.team'>Team</Text></label>\n                            <select class='form-control' id='team' aria-describedby='teamHelp'\n                                onInput={this.updateSignup}\n                                value={signup.team}\n                            >\n                                <option value=''>-- <Text id='races.choose-team'>Velg team</Text> --</option>\n                                {teams.map(team => \n                                    <option value={team.id}>{team.name}</option>\n                                )}\n                            </select>\n                            <small id='teamHelp' class='form-text text-muted'><Text id='races.choose-team-help'>Velg fra dine team</Text></small>\n                        </div>\n\n                        <div class='form-group'>\n                            <label for='class'><Text id='races.class'>Klasse</Text></label>\n                            <select class='form-control' id='class' aria-describedby='classHelp'\n                                onInput={this.updateSignup}\n                                value={signup.class}\n                            >\n                                <option value=''>-- <Text id='races.choose-class'>Velg klasse</Text> --</option>\n                                {race.classes && race.classes.map(currentClass => <>\n                                    <option value={currentClass.id}>{currentClass.title} - {currentClass.distance} km - Påmelding: {currentClass.signupfee || race.signupfee} NOK</option>\n                                </>)}\n                            </select>\n                            <small id='classHelp' class='form-text text-muted'><Text id='races.choose-class-help'>Velg ønsket klasse.</Text></small>\n                        </div>\n\n                        <div class='form-group form-check'>\n                            <input type='checkbox' class='form-check-input' id='termsAndAgreement'\n                                onInput={this.updateSignup}\n                                checked={signup.termsAndAgreement}\n                                value={true}\n                            />\n                            <label class='form-check-label' for='termsAndAgreement'><Text id='races.agreement-accept'>Jeg har lest og godtar reglene for løpet.</Text></label>\n                        </div>\n                        <button type='button' class='btn btn-primary' onClick={this.signupToRace}><Text id='races.do-signup'>Meld meg på</Text></button>\n                    </>}\n\n                </> : <>\n                    {today < new Date(race.signupStartDate) ? <>\n                        <h5 class='mt-4'>\n                            <i class='fas fa-exclamation-circle' /> <Text id='races.signup-not-open-yet'>Påmeldingen har ikke åpnet ennå!</Text>\n                        </h5>\n                        <p class='mt-4'>\n                            <Text id='races.signup-opening'>Påmeldingen åpner</Text>:<br />\n                            <span class='display-4'>{util.formatDate(race.signupStartDate, { locale: 'no-NB', hour12: false, hour: '2-digit', minute: '2-digit' })}</span>\n                        </p>\n                    </> : <>\n                        <h5 class='mt-4 mb-4'>\n                            <i class='fas fa-exclamation-circle' /> <Text id='races.signup-closed'>Påmeldingen er stengt!</Text>\n                        </h5>\n                    </>}\n                </>}\n            </div>\n\t\t);\n\t}\n}\n\nexport default AppRaceDetailSignup;\n"],"sourceRoot":""}