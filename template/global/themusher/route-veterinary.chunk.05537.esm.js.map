{"version":3,"sources":["webpack:///./routes/veterinary/header.js","webpack:///./routes/veterinary/index.js","webpack:///./components/imageScroller/index.js"],"names":["initialState","menu","profile","main","searchText","observer","Component","constructor","props","super","toggleDropdown","e","this","state","menuName","target","dataset","name","parentNode","setState","toggleDarkmode","appState","stores","toggleViewmode","mode","reloadApp","window","location","reload","adminLoadAll","async","userStore","getInfo","changeLanguage","lang","value","console","log","user","email","setLanguage","language","search","route","render","darkmode","notifications","filter","read","class","style","href","src","height","type","data-name","onClick","id","onInput","selected","className","activeClassName","MARGIN_TOP","mu","marginTop","MARGIN_BOTTOM","marginBottom","VACCINE_TYPES","subMenuMarginTop","getVaccineTypesVet","apiServer","util","getApiServer","isLoading","submenu","jwtToken","getJwtToken","Teams","selectTeam","preventDefault","displayTeam","parseInt","teams","displayUser","defaultTeam","getDogs","for","onChange","map","team","Dogs","dogs","selectDog","closest","selectedDogs","missingChipId","dogId","idx","indexOf","find","chipId","length","push","splice","selectDogSection","selectAllDogs","dogMissingChipId","i","l","removeAllDogs","selectVaccine","selectedVaccines","vaccineId","addVaccinesToDogs","vaccineDate","vaccineLogStore","data","vetData","firstname","lastname","image","dog","dogData","shortname","j","m","vaccine","vaccineData","date","agens","comment","veterinary","insert","addVaccineLogStatuses","toggleShowAddVaccineToDogs","showAddVaccineToDogs","isoDate","Date","isAdmin","vaccineLogStatuses","selectedAgens","vac","flat","scope","images","isSelected","isMissingChipId","data-id","s3ThumbLink","ucfirst","birth","age","deceased","gender","inKarens","vaccineAgens","durationEnd","format","karensDaysLeft","files","file","s3LargeLink","isChecked","durationMonths","karensDays","dogHasAgens","v","agen","placeholder","linkstate","fields","line","Veterinary","searchForMusher","isSearcing","searchUsers","selectMusher","userId","componentDidMount","componentWillReceiveProps","nextProps","isVeterinary","searchUsersResult","searchUserTeams","col","offset","getImage","displayNameShort","displayName","onSubmit","role","facebook","asFacebookLink","rel","instagram","asInstagramLink","cellphone","colspan","hasImage","img","isObject","ImageScroller","scrollImages","scrollLeft","clientWidth","imageIdx","nearestInt","Math","round","diff","abs","Number","isInteger","distance","event","hypot","touches","pageX","pageY","pinchZoomOnTouchStart","stopPropagation","start","x","y","pinchZoomOnTouchMove","imageElementScale","imageElementMaxScale","scale","min","max","transform","transition","WebkitTransform","zIndex","pinchZoomOnTouchEnd","dblClick","likeRef","noimagestext","minHeight","onScroll","onDblclick","onTouchstart","onTouchend","onTouchmove","s3SmallLink","updatedDate","loading"],"mappings":"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","file":"route-veterinary.chunk.05537.esm.js","sourcesContent":["import { h, Component } from 'preact';\nimport { Link } from 'preact-router/match';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport linkState from 'linkstate';\nimport { route } from 'preact-router';\nimport { Text, Localizer } from 'preact-i18n';\n\nconst initialState = {\n    menu: {\n\t\tprofile: false,\n\t\tmain: false,\n\t},\n\tsearchText: '',\n};\n\n@observer\nclass Navigation extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            ...initialState,\n        };\n    }\n\n\ttoggleDropdown = (e) => {\n\t\tconst { menu } = this.state;\n\t\tlet menuName = e.target.dataset.name;\n\t\tif (!menuName && e.target.parentNode) {\n\t\t\tmenuName = e.target.parentNode.dataset.name;\n\t\t}\n\t\tif (menuName) {\n\t\t\tmenu[menuName] = !menu[menuName];\n\t\t}\n\t\tthis.setState({ menu });\n\t}\n\n\ttoggleDarkmode = (e) => {\n        const { appState } = this.props.stores;\n\t\tappState.toggleDarkmode();\n\t\tthis.toggleDropdown(e);\n\t}\n\n\ttoggleViewmode = (e) => {\n        const { appState } = this.props.stores;\n\t\tlet mode = e.target.dataset.mode;\n\t\tif (!mode && e.target.parentNode) {\n\t\t\tmode = e.target.parentNode.dataset.mode;\n\t\t}\n\t\tappState.toggleViewmode(mode);\n\t\tthis.toggleDropdown(e);\n\t}\n\n\treloadApp = () => {\n\t\twindow.location.reload(true);\n\t}\n\n\tadminLoadAll = async (e) => {\n        const { userStore } = this.props.stores;\n        await userStore.getInfo(true);\n\t}\n\n\tchangeLanguage = (e) => {\n\t\tconst lang = e.target.value;\n\t\tconsole.log('changeLanguage', lang);\n\t\tconst { appState, userStore } = this.props.stores;\n\t\tconst { user = {} } = userStore;\n\t\tif (user.email) {\n\t\t\tuserStore.setLanguage({ email: user.email, language: lang });\n\t\t}\n\t\tappState.setLanguage(lang);\n\t}\n\n\tsearch = () => {\n\t\tconst { searchText } = this.state;\n\t\troute(`/search/${searchText}`);\n\t}\n\n    render() {\n\t\tconst { menu, searchText } = this.state;\n        const { appState, userStore } = this.props.stores;\n        const { darkmode, viewmode, isCordova } = appState;\n\t\tconst { allUsers, isAdmin, user, notifications = [] } = userStore;\n\t\tconst unreadNotificatins = notifications.filter(e => !e.read);\n\t\tconst unread = unreadNotificatins.length || 0;\n\t\tconst { language = 'en' } = user;\n\n\t\treturn (\n\t\t\t<nav class='navbar navbar-expand-lg navbar-themed fixed-top' style='z-index: 99999;'>\n\t\t\t\t<a class='navbar-brand' href='/'>\n\t\t\t\t\t{/* <img src={`./assets/logo-jul-2020-v2-${darkmode ? 'black' : 'white'}.png`} height='30' class='position-absolute' style='top: 8px; left: 6px' /> */}\n\t\t\t\t\t<img src={`./assets/logo${darkmode ? '' : ''}.png`} height='37' class='position-absolute' style='top: 10px; left: 6px' />\n\t\t\t\t\t<span class='font-weight-normal' style='margin-left: 30px; font-size: 25px;'>The Musher</span>\n\t\t\t\t</a>\n\n\t\t\t\t<button class='navbar-toggler' type='button'\n\t\t\t\t\tdata-name='main'\n\t\t\t\t\tonClick={this.toggleDropdown}\n\t\t\t\t>\n\t\t\t\t\t<span class='navbar-toggler-icon' />\n\t\t\t\t</button>\n\n\t\t\t\t<div class={`collapse navbar-collapse ${menu.main ? 'show' : ''}`} id='navbarSupportedContent'>\n\t\t\t\t\t<ul class='navbar-nav mr-auto ml-5'>\n\t\t\t\t\t\t{/* <li class='nav-item'>\n\t\t\t\t\t\t\t<Link className='nav-link' activeClassName={'active'} href='/race'\n\t\t\t\t\t\t\t\tdata-name='main'\n\t\t\t\t\t\t\t\tonClick={this.toggleDropdown}\n\t\t\t\t\t\t\t><i class='fas fa-flag-checkered' /> <Text id='header.races'>Løpene</Text></Link>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t\t<li class='nav-item'>\n\t\t\t\t\t\t\t<Link className='nav-link' activeClassName={'active'} href='/race/support'\n\t\t\t\t\t\t\t\tdata-name='main'\n\t\t\t\t\t\t\t\tonClick={this.toggleDropdown}\n\t\t\t\t\t\t\t><i class='far fa-question-circle' /> <Text id='header.support'>Support</Text></Link>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t\t<li class='nav-item'>\n\t\t\t\t\t\t\t<Link className='nav-link' activeClassName={'active'} href='/race/news'\n\t\t\t\t\t\t\t\tdata-name='main'\n\t\t\t\t\t\t\t\tonClick={this.toggleDropdown}\n\t\t\t\t\t\t\t><i class='fas fa-quote-right' /> <Text id='header.news'>Nyheter</Text></Link>\n\t\t\t\t\t\t</li> */}\n\t\t\t\t\t\t{/* <li class='nav-item'>\n\t\t\t\t\t\t\t<Link className='nav-link' activeClassName={'active'} href='/'\n\t\t\t\t\t\t\t\tdata-name='main'\n\t\t\t\t\t\t\t\tonClick={this.toggleDropdown}\n\t\t\t\t\t\t\t><i class='fas fa-dog' /> <Text id='header.backtoapp'>The Musher</Text></Link>\n\t\t\t\t\t\t</li> */}\n\t\t\t\t\t\t{/* <li class='nav-item'>\n\t\t\t\t\t\t\t<Link className='nav-link' activeClassName={'active'} href='/news'\n\t\t\t\t\t\t\t\tdata-name='main'\n\t\t\t\t\t\t\t\tonClick={this.toggleDropdown}\n\t\t\t\t\t\t\t><i class='fas fa-quote-right' /> <Text id='header.news'>Nyheter</Text></Link>\n\t\t\t\t\t\t</li> */}\n\t\t\t\t\t\t{/* <li class='nav-item d-block d-lg-none'>\n\t\t\t\t\t\t\t<Link className='nav-link' activeClassName={'active'} href='/howto'\n\t\t\t\t\t\t\t\tdata-name='main'\n\t\t\t\t\t\t\t\tonClick={this.toggleDropdown}\n\t\t\t\t\t\t\t><i class='fas fa-quote-right' /> <Text id='header.howto'>Hvordan gjør man det?</Text></Link>\n\t\t\t\t\t\t</li> */}\n\t\t\t\t\t</ul>\n\n\t\t\t\t\t<ul class='navbar-nav ml-auto '>\n\t\t\t\t\t\t{/* <li class='nav-item mr-2'>\n\t\t\t\t\t\t\t<Link className='nav-link' activeClassName={'active'}\n\t\t\t\t\t\t\t\thref='/users/notifications'\n\t\t\t\t\t\t\t\tdata-name='main'\n\t\t\t\t\t\t\t\tonClick={this.toggleDropdown}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<i class='fas fa-bell mr-1' />\n\t\t\t\t\t\t\t\t{unread > 0 && <>\n\t\t\t\t\t\t\t\t\t<span class='badge badge-pill badge-danger'>{unread > 9 ? '9+' : unread}</span>\n\t\t\t\t\t\t\t\t</>}\n\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t</li> */}\n\t\t\t\t\t\t<li class='nav-item mr-2'>\n\t\t\t\t\t\t\t<div class='form-row align-items-center'>\n\t\t\t\t\t\t\t\t<div class='col-auto my-1' style='width: 80px;'>\n\t\t\t\t\t\t\t\t\t<select class='custom-select'\n\t\t\t\t\t\t\t\t\t\tstyle='background-color: inherit; border: none; padding: 0; height: 1.1em; font-size: 0.9em;'\n\t\t\t\t\t\t\t\t\t\tonInput={this.changeLanguage}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<option value='no' selected={language === 'no'}>🇳🇴 NO</option>\n\t\t\t\t\t\t\t\t\t\t<option value='en' selected={language === 'en'}>🇬🇧 EN</option>\n\t\t\t\t\t\t\t\t\t\t<option value='es' selected={language === 'es'}>🇪🇸 ES</option>\n\t\t\t\t\t\t\t\t\t\t<option value='de' selected={language === 'de'}>🇩🇪 DE</option>\n\t\t\t\t\t\t\t\t\t\t<option value='fr' selected={language === 'fr'}>🇫🇷 FR</option>\n\t                                    <option value='ru' selected={language === 'ru'}>🇷🇺 RU</option>\n\t                                    <option value='se' selected={language === 'se'}>🇸🇪 SE</option>\n\t\t\t\t\t\t\t\t\t</select>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t\t<li class='nav-item d-block d-lg-none'>\n\t\t\t\t\t\t\t<Link className='nav-link' activeClassName={'active'}\n\t\t\t\t\t\t\t\tdata-name='main'\n\t\t\t\t\t\t\t\tonClick={this.toggleDarkmode}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<i class={`${darkmode ? 'fas text-warning' : 'far'} fa-moon`} /> <Text id='header.darkmode'>Nattmodus</Text>\n\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t\t<li class='nav-item mr-2 d-none d-lg-block'>\n\t\t\t\t\t\t\t<button class='btn btn-link'\n\t\t\t\t\t\t\t\tdata-name='profile'\n\t\t\t\t\t\t\t\tonClick={this.toggleDarkmode}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<i class={`${darkmode ? 'fas text-warning' : 'far'} fa-moon`} />\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t\t{/* <li class='nav-item ml-auto d-none d-lg-block'>\n\t\t\t\t\t\t\t<form class='form-inline my-2 my-lg-0'>\n\t\t\t\t\t\t\t\t<Localizer>\n\t\t\t\t\t\t\t\t\t<input class='form-control form-control-sm mr-sm-2' type='search' placeholder={<Text id='header.search-placeholder'>Søk etter det meste...</Text>}\n\t\t\t\t\t\t\t\t\t\tvalue={searchText}\n\t\t\t\t\t\t\t\t\t\tonInput={linkState(this, 'searchText')}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</Localizer>\n\t\t\t\t\t\t\t\t<button class='btn btn-sm btn-outline-success my-2 my-sm-0' type='button'\t\n\t\t\t\t\t\t\t\t\tonClick={this.search}\n\t\t\t\t\t\t\t\t><Text id='header.search'>Søk</Text></button>\n\t\t\t\t\t\t\t</form>\n\t\t\t\t\t\t</li> */}\n\t\t\t\t\t</ul>\n\n\t\t\t\t    \n\n\t\t\t\t</div>\n\t\t\t</nav>\n\t\t);\n\t}\n}\n\nexport default Navigation;\n","import { h, Component } from 'preact';\nimport { useEffect } from 'preact/hooks';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport { Text, Localizer } from 'preact-i18n';\nimport linkstate from 'linkstate';\nimport Markdown from 'preact-markdown';\nimport { toJS } from 'mobx';\n\nimport Header from './header';\nimport ImageScroller from '../../components/imageScroller';\n\nimport mu from '../../lib/musher-util';\nconst MARGIN_TOP = mu.marginTop(true);\nconst MARGIN_BOTTOM = mu.marginBottom();\nconst SUB_MENU_MARGIN_TOP = mu.subMenuMarginTop();\n\nconst VACCINE_TYPES = mu.getVaccineTypesVet();\n\nconst apiServer = util.getApiServer();\n\nfunction PageTitle(title = '') {\n  useEffect(() => {\n    document.title = `QPaws: ${title}`;\n  }, [title]);\n  return <h1>{title}</h1>;\n}\n\nconst initialState = {\n\tisLoading: false,\n\temail: '',\n\tsubmenu: 'ads',\n\tjwtToken: util.getJwtToken(),\n};\n\n@observer\nclass Teams extends Component {\n    selectTeam = async (e) => {\n        e.preventDefault();\n        const id = e.target.value;\n        this.setState({ displayTeam: parseInt(id, 10) });\n    }\n\n    render() {\n        const { teams = [], displayUser } = this.props;\n        const { userStore } = this.props.stores;\n        const { isLoading } = userStore;\n        const defaultTeam = teams[0] ? teams[0] : {};\n        const { displayTeam = defaultTeam.id } = this.state;\n        return (\n            <div class='bg-light p-0'>\n                {isLoading.getDogs ? <>\n                    Loading...\n                </> : <>\n                    <label for='team'><i class='fas fa-users' /> <Text id='dog.veterinary.team'>Team</Text></label>\n                    <select\n                        class='form-control form-control-lg mb-2'\n                        id='team'\n                        onChange={this.selectTeam}\n                    >\n                        <option value=''>-- <Text id='dog.veterinary.choose-team'>Choose team</Text> --</option>\n                        {teams && teams.map(team => {\n                            return (<>\n                                <option value={team.id}>\n                                    {team.name}\n                                </option>\n                            </>);\n                        })}\n                    </select>\n\n                    {teams && teams.map(team => <>\n                        {displayTeam === team.id && <>\n                            <Dogs stores={this.props.stores} dogs={team.dogs} displayUser={displayUser} />\n                        </>}\n                    </>)}\n                </>}\n            </div>\n        );\n    }\n}\n\n@observer\nclass Dogs extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            missingChipId: {},\n            selectedDogs: [],\n            selectedVaccines: [],\n            vaccineDate: util.isoDate(new Date(), false, false, true),\n        };\n    }\n\n    selectDog = (e) => {\n        const { id } = e.target.closest('tr').dataset;\n        const { selectedDogs, missingChipId } = this.state;\n        const dogId = parseInt(id, 10);\n        const idx = selectedDogs.indexOf(dogId);\n\n        const { dogs } = this.props;\n        const dog = dogs.find(e => e.id === dogId);\n        // console.log({ dog });\n        if (dog.chipId.length < 10) {\n            missingChipId[dogId] = !missingChipId[dogId];\n            this.setState({ missingChipId });\n            return '';\n        }\n\n        if (idx === -1) {\n            selectedDogs.push(dogId);\n        } else {\n            selectedDogs.splice(idx, 1);\n        }\n        this.setState({ selectedDogs });\n    }\n\n    selectDogSection = (e) => {\n        const { id } = e.target.closest('i').dataset;\n        const { selectedDogs, missingChipId } = this.state;\n        const dogId = parseInt(id, 10);\n        const idx = selectedDogs.indexOf(dogId);\n\n        const { dogs } = this.props;\n        const dog = dogs.find(e => e.id === dogId);\n        if (dog.chipId.length < 10) {\n            missingChipId[dogId] = !missingChipId[dogId];\n            this.setState({ missingChipId });\n            return '';\n        }\n\n        if (idx === -1) {\n            selectedDogs.push(dogId);\n        } else {\n            selectedDogs.splice(idx, 1);\n        }\n        this.setState({ selectedDogs });\n    }\n\n    selectAllDogs = () => {\n        const { dogs } = this.props;\n        const selectedDogs = dogs.filter(e => e.chipId.length > 10).map(e => e.id);\n        const dogMissingChipId = dogs.filter(e => e.chipId.length < 10).map(e => e.id);\n\n        const { missingChipId } = this.state;\n        for (let i = 0, l = dogMissingChipId.length; i < l; i += 1) {\n            const dogId = dogMissingChipId[i];\n            missingChipId[dogId] = !missingChipId[dogId];\n        }\n\n        this.setState({ selectedDogs, missingChipId });\n    }\n\n    removeAllDogs = () => {\n        const selectedDogs = [];\n        this.setState({ selectedDogs });\n    }\n\n    selectVaccine = (e) => {\n        const { id } = e.target.closest('tr').dataset;\n        const { selectedVaccines } = this.state;\n        const vaccineId = parseInt(id, 10);\n        const idx = selectedVaccines.indexOf(vaccineId);\n        if (idx === -1) {\n            selectedVaccines.push(vaccineId);\n        } else {\n            selectedVaccines.splice(idx, 1);\n        }\n        this.setState({ selectedVaccines });\n    }\n\n    addVaccinesToDogs = async () => {\n        const { selectedDogs, selectedVaccines, vaccineDate } = this.state;\n        const { userStore, vaccineLogStore } = this.props.stores;\n        const { user } = userStore;\n        const data = [];\n        const { dogs } = this.props;\n        // console.log({ selectedDogs, selectedVaccines });\n        const vetData = {\n            id: user.id,\n            firstname: user.firstname,\n            lastname: user.lastname,\n            email: user.email,\n            image: user.image,\n        };\n\n        for (let i = 0, l = selectedDogs.length; i < l; i += 1) {\n            const dogId = selectedDogs[i];\n            const dog = dogs.find(e => e.id === dogId);\n            const dogData = {\n                id: dog.id,\n                user: dog.user,\n                team: dog.team,\n                name: dog.name,\n                shortname: dog.shortname,\n                chipId: dog.chipId,\n            };\n\n            for (let j = 0, m = selectedVaccines.length; j < m; j += 1) {\n                const vaccineId = selectedVaccines[j];\n                const vaccine = VACCINE_TYPES.find(e => e.id === vaccineId);\n                const vaccineData = {\n                    date: vaccineDate,\n                    id: vaccine.id,\n                    name: vaccine.name,\n                    agens: vaccine.agens,\n                    comment: vaccine.comment,\n                };\n                data.push({\n                    dog: { ...dogData },\n                    vaccine: { ...vaccineData },\n                    veterinary: { ...vetData },\n                });\n            }\n        }\n        await vaccineLogStore.insert({ data });\n        this.setState({\n            data,\n            selectedDogs: [],\n            selectedVaccines: [],\n        });\n        userStore.addVaccineLogStatuses(data);\n    }\n\n    toggleShowAddVaccineToDogs = (e) => {\n        const { showAddVaccineToDogs = false } = this.state;\n        this.setState({\n            showAddVaccineToDogs: !showAddVaccineToDogs,\n        });\n    }\n\n    render() {\n        const { selectedDogs, selectedVaccines, missingChipId, data, showAddVaccineToDogs = false, vaccineDate } = this.state;\n        const { userStore } = this.props.stores;\n        const { isAdmin, isVeterinary, vaccineStatuses, vaccineLogStatuses, isLoading } = userStore;\n        const { dogs } = this.props;\n\n        const selectedAgens = VACCINE_TYPES\n            .filter(e => selectedVaccines.indexOf(e.id) > -1)\n            .map(vac => vac.agens.map(e => e.name))\n            .flat();\n\n        return (<>\n            <div class='table-responsive mt-3'>\n                <button\n                    class='btn btn-lg btn-block btn-outline-success mt-5'\n                    onClick={this.selectAllDogs}\n                >\n                    <Text id='dog.veterinary.select-all-dogs'>Select all dogs</Text>\n                </button>\n                {selectedDogs && selectedDogs.length > 0 && <>\n                    <button\n                        class='btn btn-sm btn-block btn-link'\n                        onClick={this.removeAllDogs}\n                    >\n                        <Text id='dog.veterinary.remove-all-dogs'>Remove all dogs</Text>\n                    </button>\n                </>}\n\n                <table class='table table-striped'>\n                    <thead>\n                        <tr>\n                            <th scope='col' style='width: 100px;'>&nbsp;</th>\n                            <th scope='col'><Text id='dog.veterinary.name'>Name</Text></th>\n                        </tr>\n                    </thead>\n                    <tbody>\n                        {dogs && dogs.map(dog => {\n                            let image;\n                            if (dog.images && dog.images[0]) {\n                                image = dog.images[0];\n                            }\n                            if (dog.image) {\n                                image = dog.image;\n                            }\n                            const isSelected = selectedDogs.indexOf(dog.id) > -1;\n                            const isMissingChipId = missingChipId[dog.id];\n\n                            return (<>\n                                <tr class='pointerCursor' onClick={this.selectDog} data-id={dog.id}>\n                                    <td class='position-relative'>\n                                        <div\n                                            class={`text-center border rounded-circle imageRounded text-muted pt-2`}\n                                            style={`${image ? `background-image: url('${image.s3ThumbLink}'); background-size: cover;` : ''}`}\n                                        >\n                                            {!image && <span class='font-weight-lighter' style='font-size: 35px;'>\n                                                {util.ucfirst(dog.name, true)}\n                                            </span>}\n                                        </div>\n                                        {isSelected && <span class='position-absolute display-4' style='top: 0px; left: 0px;'>\n                                            <i class='fas fa-check text-success' />\n                                        </span>}\n                                        {isMissingChipId && <span class='position-absolute display-4' style='top: 0px; left: 0px;'>\n                                            <i class='fas fa-hand-paper text-danger' />\n                                        </span>}\n                                    </td>\n                                    <td>\n                                        <span class='float-right'>\n                                            {dog.birth && <span class='mr-2'>{util.age(dog.birth, dog.deceased)}</span>}\n                                            {dog.gender === 'female' ? <i class='fas fa-venus' /> : <i class='fas fa-mars' />}\n                                        </span>\n                                        <h5>{dog.name} {dog.shortname && <span class='font-weight-lighter'> - '{dog.shortname}'</span>}</h5>\n                                        <div>\n                                            <span class='text-muted'>\n                                                {dog.chipId && <><i class='fas fa-microchip' /> {dog.chipId}</>}\n                                            </span>\n                                        </div>\n                                        <div>\n                                            {vaccineLogStatuses && vaccineLogStatuses.filter(e => e.chipId === dog.chipId).map((vac) => {\n                                                return (\n                                                    <span class={`badge badge-${vac.inKarens ? 'warning' : 'success'} mr-2 mb-1`}>\n                                                        {vac.vaccineAgens.name}\n                                                        <span class='font-weight-lighter ml-2'>\n                                                            <i class='fas fa-calendar-check' /> {util.isoDate(vac.vaccineAgens.durationEnd, false, false, true)}\n                                                            {vac.inKarens && <>\n                                                                <br />\n                                                                (karens: {util.format(vac.karensDaysLeft, 0)} days left)\n                                                            </>}\n                                                        </span>\n                                                    </span>\n                                                );\n                                            })}\n                                        </div>\n                                        {isAdmin && <>\n                                            <h5>Uploaded files for this dog:</h5>\n                                            {dog.files && dog.files.length > 0 ? <>\n                                                <ImageScroller stores={this.props.stores} images={dog.files.filter(file => file.s3LargeLink)} />\n                                            </> : <>\n                                                {/* <div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 px-0'>\n                                                    <div class='text-center text-muted'>\n                                                        <div class='display-1'><i class='fas fa-file' /></div>\n                                                        <h3><Text id='teams.no-dogs-files'>No files for this dog!</Text></h3>\n                                                    </div>\n                                                </div> */}\n                                            </>}\n                                        </>}\n                                    </td>\n                                </tr>\n                            </>);\n                        })}\n                    </tbody>\n                </table>\n            </div>\n\n            <div class='mt-5'>\n                {selectedDogs && selectedDogs.length > 0 && <>\n                    <div class='form-row align-items-center'>\n                        <div class='col-12'>\n                            <label for='vaccineTypeInput'><i class='fas fa-syringe' /> <Text id='dog.addlog.vaccine-type'>Vaksinetype</Text></label>\n                            <table class='table table-striped'>\n                                <thead>\n                                    <tr>\n                                        <th scope='col' style='width: 100px;'>&nbsp;</th>\n                                        <th scope='col'><Text id='dog.veterinary.name'>Name</Text></th>\n                                        <th scope='col' style='width: 130px;'><Text id='dog.veterinary.image'>Image</Text></th>\n                                    </tr>\n                                </thead>\n                                <tbody>\n                                    {VACCINE_TYPES && VACCINE_TYPES.map(vac => {\n                                        const isChecked = selectedVaccines.indexOf(vac.id) > -1;\n                                        return (\n                                            <tr\n                                                data-id={vac.id}\n                                                onClick={this.selectVaccine}\n                                            >\n                                                <td>\n                                                    {isChecked ? <>\n                                                        <div class='display-4 text-center'>\n                                                            <i class='fas fa-check text-success' />\n                                                        </div>\n                                                    </> : <>\n                                                        <div class='display-4 border rounded-lg text-center'>\n                                                            <i class='fas fa-radio text-success' />\n                                                        </div>\n                                                    </>}\n                                                </td>\n                                                <td>\n                                                    {vac.name}<br />\n                                                    <small>\n                                                        {vac.agens.map(agens => <>\n                                                            <span class='badge badge-dark mr-2 mt-1'>\n                                                                {agens.name} ({agens.durationMonths} months, {agens.karensDays} days)\n                                                            </span>\n                                                        </>)}\n                                                    </small>\n                                                </td>\n                                                <td>\n                                                    {vac.image && <img class='img-fluid' src={`${apiServer}${vac.image}`} />}\n                                                </td>\n                                            </tr>\n                                        );\n                                    })}\n                                </tbody>\n                            </table>\n                        </div>\n                        <div class='col-12 pt-4'>\n                            <label for='team'><i class='fas fa-dog' /> <Text id='dog.veterinary.choosen-dogs'>Valgte hunder</Text></label>\n                            <div class='d-flex flex-wrap'>\n                                {dogs && dogs.map(dog => {\n                                    let image;\n                                    if (dog.images && dog.images[0]) {\n                                        image = dog.images[0];\n                                    }\n                                    if (dog.image) {\n                                        image = dog.image;\n                                    }\n                                    const isSelected = selectedDogs.indexOf(dog.id) > -1;\n                                    if (!isSelected) {\n                                        return '';\n                                    }\n                                    const dogHasAgens = vaccineLogStatuses.filter(v => v.chipId === dog.chipId).map(vac => vac.vaccineAgens.name).flat();\n\n                                    return (<>\n                                        <section class='p-2 position-relative' style='width: 120px;'>\n                                            <div\n                                                class={`text-center border rounded-circle imageRounded text-muted pt-2`}\n                                                style={`${image ? `background-image: url('${image.s3ThumbLink}');` : ''}`}\n                                            >\n                                                {!image && <span class='font-weight-lighter' style='font-size: 35px;'>\n                                                    {util.ucfirst(dog.name, true)}\n                                                </span>}\n                                            </div>\n                                            <small>\n                                                {dog.name}\n                                            </small><br />\n                                            <small class='text-muted'>\n                                                {dog.birth && <span class='mr-2'>{util.age(dog.birth, dog.deceased)}</span>}\n                                                {dog.gender === 'female' ? <i class='fas fa-venus' /> : <i class='fas fa-mars' />}\n                                            </small>\n\n                                            {selectedAgens && <>\n                                                {selectedAgens.filter(e => dogHasAgens.indexOf(e) > -1).map(agen => <>\n                                                    <span class={`badge badge-danger mr-2 mb-1`}>\n                                                        <i class='fas fa-exclamation-triangle' /> {agen}\n                                                    </span>\n                                                </>)}\n                                            </>}\n\n                                            <div class='position-absolute' style='top: 0px; right: 0px; font-size: 2.0em;'>\n                                                <i class='fas fa-times-circle text-danger' onClick={this.selectDogSection} data-id={dog.id} />\n                                            </div>\n                                        </section>\n                                    </>);\n                                })}\n                            </div>\n                        </div>\n                        <div class='col-12 pt-4'>\n                            <label><i class='fas fa-syringe' /> <Text id='dog.veterinary.chosen-vaccines'>Valgte vaksiner</Text></label>\n                            {VACCINE_TYPES && VACCINE_TYPES.map(vac => {\n                                const isChecked = selectedVaccines.indexOf(vac.id) > -1;\n                                if (!isChecked) {\n                                    return '';\n                                }\n                                return (<div class='mb-3'>\n                                    <span class='font-weight-lighter'>+</span> {vac.name}<br />\n                                    <small>\n                                        {vac.agens.map(agens => <>\n                                            <span class='badge badge-dark mr-2 mt-1'>\n                                                {agens.name} ({agens.durationMonths} months, {agens.karensDays} days)\n                                            </span>\n                                        </>)}\n                                    </small>\n                                </div>);\n                            })}\n                        </div>\n\n                        {selectedVaccines && selectedVaccines.length > 0 ? <>\n                            <div class='col-12 pt-4'>\n                                <label><i class='fas fa-calendar-alt' /> <Text id='dog.veterinary.vaccine-date'>Dato for vaksine</Text></label>\n                                <Localizer>\n                                    <input\n                                        type='date'\n                                        class='form-control form-control-lg mb-2'\n                                        id='vetSearch'\n                                        placeholder={<Text id='dog.veterinary.vaccine-date-placeholder'>Velg dato for vaksine. Dersom vaksine er dagens dato, så trenger du ikke velge.</Text>}\n                                        onInput={linkstate(this, 'vaccineDate')}\n                                        value={vaccineDate}\n                                    />\n                                </Localizer>\n                            </div>\n                            {showAddVaccineToDogs ? <>\n                                <div class='col-12 pt-4'>\n                                    <h5><Text id='dog.veterinary.are-you-sure' fields={{ dogs: selectedDogs.length }}>Are you sure you want to add vaccine to {selectedDogs.length} dog?</Text></h5>\n                                    <button\n                                        type='button'\n                                        class='btn btn-lg btn-block btn-success mb-2'\n                                        onClick={this.addVaccinesToDogs}\n                                    ><Text id='dog.veterinary.yes-iam-sure'>Yes, I'm sure!</Text></button>\n                                    <button\n                                        type='button'\n                                        class='btn btn-lg btn-block btn-danger mb-2'\n                                        onClick={this.toggleShowAddVaccineToDogs}\n                                    ><Text id='dog.veterinary.cancel'>Cancel</Text></button>\n                                </div>\n                            </> : <>\n                                <div class='col-12 pt-4'>\n                                    <button\n                                        type='button'\n                                        class='btn btn-lg btn-block btn-success mb-2'\n                                        onClick={this.toggleShowAddVaccineToDogs}\n                                    ><Text id='dog.veterinary.add-vaccine-to-dogs' fields={{ dogs: selectedDogs.length }}>Add vaccine to {selectedDogs.length} dogs</Text></button>\n                                </div>\n                            </>}\n                        </> : <>\n                            <h3 class='text-muted mt-4'>\n                                <Text id='dog.veterinary.choose-vaccines'>Velg vaksiner i listen over</Text>\n                            </h3>\n                        </>}\n\n                    </div>\n\n                </>}\n            </div>\n\n            {data && <>\n                <div class='mt-5'>\n                    <div class='row'>\n                        <div class='col-12 pt-4'>\n                            <h5><Text id='dog.veterinary.recepipt'>Receipt</Text></h5>\n                            <table class='table table-striped'>\n                                <thead>\n                                    <tr>\n                                        <th scope='col'><Text id='dog.veterinary.dog'>Dog</Text></th>\n                                        <th scope='col'><Text id='dog.veterinary.vaccine'>Vaccine</Text></th>\n                                    </tr>\n                                </thead>\n                                <tbody>\n                                    {data && data.map(line => {\n                                        const dog = line.dog;\n                                        const vac = line.vaccine;\n                                        return (<>\n                                            <tr>\n                                                <td>\n                                                    {dog.name}<br />\n                                                    <small class='text-muted'>\n                                                        {dog.chipId}\n                                                    </small>\n                                                </td>\n                                                <td>\n                                                    {vac.name}\n                                                    <small>\n                                                        {vac.agens.map(agens => <>\n                                                            <span class='badge badge-dark mr-2 mt-1'>\n                                                                {agens.name} ({agens.durationMonths} months, {agens.karensDays} days)\n                                                            </span>\n                                                        </>)}\n                                                    </small>\n                                                </td>\n                                            </tr>\n                                        </>);\n                                    })}\n                                </tbody>\n                            </table>\n                        </div>\n                    </div>\n                </div>\n            </>}\n\n        </>);\n    }\n}\n\n@observer\nclass Veterinary extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            ...initialState,\n        };\n    }\n\n    searchForMusher = async (e) => {\n        e.preventDefault();\n        const { userStore } = this.props.stores;\n        const { search } = this.state;\n        // console.log('search for musher:', search);\n        this.setState({ isSearcing: true, displayUser: null });\n        await userStore.searchUsers({ search });\n        this.setState({ isSearcing: false });\n    }\n\n    selectMusher = async (e) => {\n        const { id } = e.target.closest('tr').dataset;\n        const { displayUser } = this.state;\n        const userId = parseInt(id, 10);\n        if (displayUser === userId) {\n            this.setState({ displayUser: null });\n        } else {\n            this.setState({ displayUser: userId });\n            const { userStore } = this.props.stores;\n            await userStore.getDogs({ id: userId });\n        }\n    }\n\n\tcomponentDidMount() {\n\t}\n\n\tcomponentWillReceiveProps(nextProps) {\n\t}\n\n\trender() {\n        const { displayUser, isSearcing, isLoading } = this.state;\n\t\tconst { appState, userStore } = this.props.stores;\n\t\tconst { isAdmin, isVeterinary, searchUsersResult, searchUserTeams, user } = userStore;\n\t\tconst { language = 'en' } = appState;\n        const { col = 12, offset = 0 } = this.props;\n        const filterBy = (e) => {\n            if (displayUser) {\n                return e.id === displayUser;\n            }\n            return true;\n        }\n\n        if (!isVeterinary) {\n            return (<>\n                <div class='container-fluid h-100'>\n                    <div class='row h-100'>\n                        <div class='col-12 text-center my-auto'>\n                            <div class='display-1 text-danger'>\n                                <i class='fas fa-hand-paper' />\n                            </div>\n                            <h5><Text id='dog.veterinary.no-access'>No access!</Text></h5>\n                            <p><Text id='dog.veterinary.attempts-logged'>All attempts are logged and reported.</Text></p>\n                            <a class='mt-3 btn btn-lg btn-primary' href='/'><Text id='dog.veterinary.goto-frontpage'>Go to the frontpage</Text></a>\n                        </div>\n                    </div>\n                </div>\n            </>)\n        }\n\n        const image = mu.getImage({ user });\n        const shortname = mu.displayNameShort(user);\n        const name = mu.displayName(user, true);\n\n\t\treturn (\n\t\t\t<>\n\t\t\t\t{/* <Header stores={this.props.stores} /> */}\n\n\t\t\t\t<div class='container-fluid' style={`margin-bottom: ${MARGIN_BOTTOM}; margin-top: ${MARGIN_TOP};`}>\n                    <div class='row'>\n\t\t\t\t\t\t<div class={`col-${col} offset-${offset} col-sm-8 col-lg-8 offset-sm-2 offset-lg-2`}>\n\n                            <div class='d-flex position-relative mb-3'>\n                                <div\n                                    class={`text-center border rounded-circle imageRounded imageRoundedSmall`}\n                                    style={image ? `background-image: url(\"${image}\"); background-size: cover;` : ''}\n                                >\n                                    {!image && <div class='text-muted' style='font-size: 20px; padding-top: 3px;'>{shortname}</div>}\n                                </div>\n                                <div class='flex-grow-1 pl-3 text-overflow' style='line-height: 0.9em;'>\n                                    <h1 class='mb-0'><Text id='dog.veterinary.title'>Veterinary search</Text></h1>\n                                    <small class='text-muted'>{name}</small>\n                                </div>\n                            </div>\n\n                            <form onSubmit={this.searchForMusher}>\n                                <div class='form-row align-items-center'>\n                                    <div class='col-10'>\n                                        <label class='sr-only' for='vetSearch'><Text id='dog.veterinary.name'>Name</Text></label>\n                                        <Localizer>\n                                            <input\n                                                type='text'\n                                                class='form-control form-control-lg mb-2'\n                                                id='vetSearch'\n                                                placeholder={<Text id='dog.veterinary.search-placeholder'>Search for musher by email, cellphone or name...</Text>}\n                                                onInput={linkstate(this, 'search')}\n\n                                            />\n                                        </Localizer>\n                                    </div>\n                                    <div class='col-2'>\n                                        <button\n                                            type='button'\n                                            class='btn btn-lg btn-primary mb-2'\n                                            onClick={this.searchForMusher}\n                                        ><Text id='dog.veterinary.search'>Search</Text></button>\n                                    </div>\n                                </div>\n                            </form>\n\n                        </div>\n\t\t\t\t\t\t<div class={`col-${col} offset-${offset} col-sm-8 col-lg-8 offset-sm-2 offset-lg-2`}>\n                            {isSearcing && <>\n                                <div class='spinner-border text-primary' role='status'>\n                                    <span class='sr-only'>\n                                        <Text id='dog.veterinary.searching'>Searcing...</Text>\n                                    </span>\n                                </div>\n                            </>}\n                            {(!searchUsersResult || searchUsersResult.length === 0) ? <>\n                                &nbsp;\n                            </> : <div class='table-responsive'>\n                                <table class='table table-striped'>\n                                    <thead>\n                                        <tr>\n                                            <th scope='col' style='width: 100px;'>&nbsp;</th>\n                                            <th scope='col'><Text id='dog.veterinary.name'>Name</Text></th>\n                                        </tr>\n                                    </thead>\n                                    <tbody>\n                                        {searchUsersResult && searchUsersResult.filter(filterBy).map(user => {\n                                            let image;\n                                            if (user.images && user.images[0]) {\n                                                image = user.images[0];\n                                            }\n                                            if (user.image) {\n                                                image = user.image;\n                                            }\n\n                                            return (<>\n                                                <tr class='pointerCursor' onClick={this.selectMusher} data-id={user.id}>\n                                                    <td>\n                                                        <div\n                                                            class={`text-center border rounded-circle imageRounded text-muted pt-2`}\n                                                            style={`${image ? `background-image: url('${image.s3ThumbLink}');` : ''}`}\n                                                        >\n                                                            {!image && <span class='font-weight-lighter' style='font-size: 35px;'>\n                                                                {user.firstname ? <>\n                                                                    {util.ucfirst(user.firstname, true)}\n                                                                    {util.ucfirst(user.lastname, true)}\n                                                                </> : <>\n                                                                    {util.ucfirst(user.email, true)}\n                                                                </>}\n                                                            </span>}\n                                                        </div>\n                                                    </td>\n                                                    <td>\n                                                        {user.firstname} {user.lastname}<br />\n                                                        <div>\n                                                            {user.facebook && <a class='mr-2' href={mu.asFacebookLink(user.facebook)} target='_blank' rel='noreferrer'>\n                                                                <i class='fab fa-facebook-square' />\n                                                            </a>}\n                                                            {user.instagram && <a class='mr-2' href={mu.asInstagramLink(user.instagram)} target='_blank' rel='noreferrer'>\n                                                                <i class='fab fa-instagram' />\n                                                            </a>}\n                                                        </div>\n                                                        <i class='fas fa-mobile-alt' /> {user.cellphone}\n                                                        <i class='fas fa-envelope ml-3' /> {user.email}\n                                                    </td>\n                                                </tr>\n                                                {displayUser === user.id && <>\n                                                    <tr>\n                                                        <td colspan='2'>\n                                                            <Teams stores={this.props.stores} teams={searchUserTeams} displayUser={displayUser} />\n                                                        </td>\n                                                    </tr>\n                                                </>}\n                                            </>);\n                                        })}\n                                    </tbody>\n                                </table>\n                            </div>}\n                            {/* <xmp>{JSON.stringify(searchUsersResult, null, 4)}</xmp> */}\n                        </div>\n                    </div>\n\t\t\t\t</div>\n\t\t\t</>\n\t\t);\n\t}\n}\n\nexport default Veterinary;\n","import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport { Text, Localizer } from 'preact-i18n';\n\nfunction hasImage(img) {\n    return (util.isObject(img) && img.s3LargeLink);\n}\n\n\n@observer\nclass ImageScroller extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            imageIdx: 0,\n            imageElementScale: 1,\n            imageElementMaxScale: 5,\n            start: {},\n        };\n    }\n\n    scrollImages = (e) => {\n        const { images } = this.props;\n        const totalImages = images.length - 1;\n\n        // scrollHeight: 705\n        // scrollLeft: 564\n        // scrollTop: 0\n        // scrollWidth: 1692\n\n        const { scrollLeft, scrollWidth, clientWidth } = e.target;\n        const imageStep = clientWidth;\n        const imageIdx = scrollLeft / imageStep;\n        // console.log({ e, imageStep, imageIdx, scrollLeft, scrollWidth, clientWidth });\n\n        const nearestInt = Math.round(imageIdx);\n        const diff = Math.abs(nearestInt - imageIdx);\n        // console.log({ nearestInt, diff });\n        if (Number.isInteger(imageIdx) || diff < 0.1) {\n            this.setState({\n                imageIdx: nearestInt,\n            });\n        }\n    }\n\n    distance = (event) => {\n        return Math.hypot(event.touches[0].pageX - event.touches[1].pageX, event.touches[0].pageY - event.touches[1].pageY);\n    }\n\n    pinchZoomOnTouchStart = (event) => {\n        // console.log('touchstart', event);\n        if (event.touches.length === 2) {\n            event.preventDefault(); // Prevent page scroll\n            event.stopPropagation();\n\n            // Calculate where the fingers have started on the X and Y axis\n            const start = {};\n            start.x = (event.touches[0].pageX + event.touches[1].pageX) / 2;\n            start.y = (event.touches[0].pageY + event.touches[1].pageY) / 2;\n            start.distance = this.distance(event);\n            this.setState({ start });\n        }    \n    }\n\n    pinchZoomOnTouchMove = (event) => {\n        // console.log('touchmove', event);\n        let { imageElementScale, imageElementMaxScale } = this.state;\n        const { start } = this.state;\n        if (event.touches.length === 2) {\n            event.preventDefault(); // Prevent page scroll\n            event.stopPropagation();\n            let scale;\n\n            // Safari provides event.scale as two fingers move on the screen\n            // For other browsers just calculate the scale manually\n            if (event.scale) {\n                scale = event.scale;\n            } else {\n            const deltaDistance = this.distance(event);\n                scale = deltaDistance / start.distance;\n            }\n\n            imageElementScale = Math.min(Math.max(1, scale), imageElementMaxScale);\n            this.setState({ imageElementScale }, () => {\n                // Calculate how much the fingers have moved on the X and Y axis\n                const deltaX = (((event.touches[0].pageX + event.touches[1].pageX) / 2) - start.x) * 2; // x2 for accelarated movement\n                const deltaY = (((event.touches[0].pageY + event.touches[1].pageY) / 2) - start.y) * 2; // x2 for accelarated movement\n\n                // Transform the image to make it grow and move with fingers\n                const transform = `translate3d(${deltaX}px, ${deltaY}px, 0) scale(${imageElementScale})`;\n                event.target.style.transition = '';\n                event.target.style.transform = transform;\n                event.target.style.WebkitTransform = transform;\n                event.target.style.zIndex = '100000';\n                // event.target.style.maxHeight = '';\n                // event.target.style.maxWidth = '';\n            });\n\n        }\n    }\n\n    pinchZoomOnTouchEnd = (event) => {\n        // console.log('touchend', event);\n        // Reset image to it's original format\n        this.setState({ imageElementScale: 1 });\n        event.target.style.transition = 'transform 250ms';\n        event.target.style.transform = '';\n        event.target.style.WebkitTransform = '';\n        event.target.style.zIndex = '';\n        // event.target.style.maxHeight = '75vh';\n        // event.target.style.maxWidth = '100%';\n    }\n\n    render() {\n        const { imageIdx, imageElementScale } = this.state;\n        const { images, id, dblClick = () => {}, likeRef = {}, noimagestext, minHeight = '100px' } = this.props;\n\n        if (!images || images.length === 0) {\n            if (noimagestext) {\n                return (<>            \n                    <div class='col-12 text-center text-muted'>\n                        <div class='display-1'>\n                            <i class='fas fa-camera' />\n                        </div>\n                        <h3 class='font-weight-lighter'>\n                            {noimagestext}\n                        </h3>\n                    </div>\n                </>);\n            }\n            return <></>;\n        }\n\n        return (\n            <div class='w-100 position-relative'>\n                <div\n                    class='d-flex flex-row flex-nowrap bg-light border-top border-bottom no-scrollbar'\n                    style={`\n                        overflow-x: ${imageElementScale > 1 && images.length === 1 ? 'visible !important' : 'auto'};\n                        overflow-y: ${imageElementScale > 1 ? 'visible !important' : 'auto'};\n                        scroll-snap-type: x mandatory;\n                    `}\n                    onScroll={this.scrollImages}\n                >\n                    {images && images.filter(hasImage).map((img, idx) => (\n                        <div class='col-12 clearfix p-0'>\n                            <div\n                                class={`w-100 h-100 text-center rounded-lg imageContainer d-flex justify-content-center align-items-center position-relative `}\n                                style={`\n                                    scroll-snap-align: start;\n                                    flex-wrap: wrap;\n                                `}\n                                // overflow: ${imageElementScale > 1 ? 'visible !important' : 'hidden'};\n                                onDblclick={dblClick}\n                                data-id={id}\n                                onTouchstart={(e) => { e.stopPropagation(); }}\n                                onTouchend={(e) => { e.stopPropagation(); }}\n                                onTouchmove={(e) => { e.stopPropagation(); }}\n                            >\t\t\t\t\t\n                                <div\n                                    class='position-absolute w-100 h-100'\n                                    style={`\n                                        background-image: url('${img.s3SmallLink}'); background-size: cover;\n                                        filter: blur(10px);\n                                        opacity: 0.5;\n                                    `}\n                                        // overflow-y: ${imageElementScale > 1 ? 'visible !important' : 'hidden'};\n                                />\n                                {img.s3LargeLink ? <img\n                                    class='img-fluid position-relative'\n                                    src={`${img.s3LargeLink}${img.updatedDate ? `?updated=${`${img.updatedDate}`}`: ''}`}\n                                    loading='lazy'\n                                    style={`max-height: 75vh; min-height: ${minHeight}; ${idx !== imageIdx ? '' : ''}`}\n\n                                    onTouchstart={this.pinchZoomOnTouchStart}\n                                    onTouchend={this.pinchZoomOnTouchEnd}\n                                    onTouchmove={this.pinchZoomOnTouchMove}\n                                /> : <>\n                                    <span class='display-1 text-muted'>\n                                        <i class='fas fa-camera' />\n                                    </span>\n                                </>}\n\n                                {/* <xmp>{JSON.stringify(img, null, 4)}</xmp> */}\n                            </div>\n                            {likeRef[id] && <span class='likeHeart position-absolute text-white display-1' style='top: calc(50% - 50px); left: calc(50% - 50px); width: 100px; height: 100px;'>\n                                <i class='fas fa-heart likeStory' />\n                            </span>}\n                        </div>\n                    ))}\n                </div>\n                {images && images.length > 1 && <>\n                    <div class='w-100 text-center'>\n                        <small>\n                            <small>\n                                {images && images.filter(hasImage).map((img, idx) => <>\n                                    <i class={`${idx === imageIdx ? 'fas' : 'far'} fa-circle mr-1`} />\n                                </>)}\n                            </small>\n                        </small>\n                    </div>\n                    <div\n                        class='position-absolute text-white font-weight-lighter px-1 py-1 rounded-lg'\n                        style='top: 10px; right: 10px; background-color: rgba(0, 0, 0, 0.3); line-height: 1.0em;'\n                    >\n                        <small>{imageIdx + 1} / {images.length}</small>\n                    </div>\n                </>}\n\n            </div>\n        );\n    }\n}\n\nexport default ImageScroller;\n"],"sourceRoot":""}