(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{CE5K:function(e,t,s){"use strict";function o(){try{if(window)return window}catch(e){return}}function n(){let e=o();return e&&(!(!e.matchMedia||!e.matchMedia("(display-mode: standalone)").matches)||e.navigator&&!0===e.navigator.standalone)||!1}function a(){h.onPrompts.forEach(e=>e(h.prompt))}function i(e){if(!h.installPromptListener){let e=o();if(!e||n())return null;h.installPromptListener=t=>{t.preventDefault();let s=t;h.prompt=()=>new Promise(t=>{h.appInstalledListener=()=>{t(!0)},e.addEventListener("appinstalled",h.appInstalledListener),s.prompt(),s.userChoice.then(e=>{"accepted"!==e.outcome&&t(!1)})}).then(t=>(s=null,h.appInstalledListener&&e.removeEventListener("appinstalled",h.appInstalledListener),t&&(h.prompt=null,a()),t)),a()},e.addEventListener("beforeinstallprompt",h.installPromptListener)}return e?(h.onPrompts.push(e),h.prompt&&e(h.prompt),()=>{return t=e,void(h.onPrompts=h.onPrompts.filter(e=>e!==t));var t}):()=>function(){let e=o();h.installPromptListener&&(e&&e.removeEventListener&&e.removeEventListener("beforeinstallprompt",h.installPromptListener),h.installPromptListener=null),h.appInstalledListener&&(e&&e.removeEventListener&&e.removeEventListener("appinstalled",h.appInstalledListener),h.appInstalledListener=null),h.prompt=null,h.onPrompts=[]}()}function l(){const[e]=Object(p.k)(n()),[t,s]=Object(p.k)(null);return Object(p.d)(()=>i((e,t)=>{s({prompt:()=>e().then(e=>(e&&t(),e))})})),{isStandalone:e,installPrompt:t&&t.prompt}}function c(){const{installPrompt:e,isStandalone:t}=l();return e&&Object(r.h)("div",{class:"text-center"},Object(r.h)("a",{class:"btn btn-success",href:"#",onclick:e},Object(r.h)(u.c,{id:"install.install-app"},"Install The Musher")))||t&&""}s.d(t,"a",(function(){return c}));var r=s("hosL"),p=s("QRet");const h={prompt:null,installPromptListener:null,appInstalledListener:null,onPrompts:[]};var u=s("OhSV")},"c5+e":function(e,t,s){"use strict";s.r(t),function(e){var o,n=s("hosL"),a=s("Utv1"),i=s("/eY4"),l=s("Y3FI"),c=s("go65"),r=s("OhSV"),p=s("tJLP"),h=s("Cjoz"),u=s("CE5K");let d=Object(i.a)(o=class extends n.Component{constructor(e){var t;super(e),t=this,this.handleEmailInput=async function(e){const{userStore:s}=t.props.stores,o=e.target.value;t.setState({email:o}),clearTimeout(t.checkEmailTimer),t.checkEmailTimer=setTimeout(()=>s.checkEmail(o),1e3)},this.togglePassword=()=>{let{passwordType:e}=this.state;e="password"===e?"text":"password",this.setState({passwordType:e})},this.updateCapsLockStatus=e=>{this.setState({isCapsLock:e})},this.login=()=>{const{email:e,password:t,token:s}=this.state,{userStore:o}=this.props.stores;o.checkLogin({email:e,password:t,token:s})},this.resetLoginMessages=()=>{const{userStore:e}=this.props.stores;e.resetLoginMessages()},this.newUser=()=>{const{email:e=""}=this.state;Object(l.route)("/register/"+e)},this.forgotten=()=>{const{email:e=""}=this.state;Object(l.route)("/forgotten/"+e)},this.changeLanguage=e=>{const t=e.target.value,{appState:s}=this.props.stores;s.setLanguage(t)},this.validateLoginToken=async function(){const{userStore:e}=t.props.stores,{loginToken:s}=t.props,o=await e.validateLoginToken(s);o&&200===o.status&&Object(l.route)("/")},this.state={showToken:!1,isCapsLock:!1,passwordType:"password",email:this.props.email}}componentDidMount(){const{userStore:e}=this.props.stores;this.props.email&&(clearTimeout(this.checkEmailTimer),this.checkEmailTimer=setTimeout(()=>e.checkEmail(this.props.email),1e3));const{loginToken:t}=this.props;a.a.isString(t)&&this.validateLoginToken()}render(){const{isCapsLock:t,email:s,password:o,token:i,passwordType:l}=this.state,{appState:d,userStore:m}=this.props.stores,{language:b="en"}=d,{emailIsAvailable:g,login:O,twoFactorLogin:j}=m,{message:f,messageIcon:v,error:k,errorIcon:L}=O,w=a.a.validateEmail(s),y=w&&o;return Object(n.h)("div",{class:"container-fluid"},Object(n.h)("div",{class:"row"},Object(n.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-md-6 offset-md-3 col-lg-4 offset-lg-4 pt-5"},!1,Object(n.h)(u.a,null),Object(n.h)("div",{class:"d-flex justify-content-center mb-5 mt-5"},Object(n.h)(e,null,Object(n.h)("img",{src:"https://themusher.app/assets/logo-qpaws-dark.png",height:"100"}))),Object(n.h)(p.a,{message:k,icon:L,remove:this.resetLoginMessages}),Object(n.h)(h.a,{message:f,icon:v,remove:this.resetLoginMessages}),Object(n.h)("div",{class:"form-group"},Object(n.h)(r.b,null,Object(n.h)("input",{type:"email",class:"form-control form-control-lg "+(s?w&&!g?"is-valid":"is-invalid":""),id:"emailInput",onInput:this.handleEmailInput,value:s,onKeypress:e=>{a.a.isCapsLock(e,this.updateCapsLockStatus)},placeholder:Object(n.h)(r.c,{id:"login.email"},"Email")})),s&&w&&g&&Object(n.h)("div",{class:"invalid-feedback",style:"display: block;"},Object(n.h)(r.c,{id:"login.email-not-found"},"E-posten finnes ikke, men du kan registrere deg ðŸ˜ƒ")),s&&!w&&Object(n.h)("div",{class:"invalid-feedback",style:"display: block;"},Object(n.h)(r.c,{id:"login.email-not-valid"},"Hmm, e-posten ser ikke helt riktig ut. Kan det vÃ¦re en skrivefeil?")),s&&w&&!g&&Object(n.h)("div",{class:"valid-feedback",style:"display: block;"},Object(n.h)(r.c,{id:"login.email-looks-good"},"E-post ser bra ut."))),Object(n.h)("div",{class:"form-group"},Object(n.h)("div",{class:"input-group"},Object(n.h)(r.b,null,Object(n.h)("input",{type:l,class:"form-control form-control-lg",id:"passwordInput",onInput:Object(c.a)(this,"password"),value:o,onKeypress:e=>{a.a.isCapsLock(e,this.updateCapsLockStatus)},placeholder:Object(n.h)(r.c,{id:"login.password"},"Password")})),Object(n.h)("div",{class:"input-group-append"},Object(n.h)("button",{class:"btn btn-lg btn-primary",type:"button",onClick:this.togglePassword},Object(n.h)("i",{class:"fas fa-eye"+("text"===l?"-slash":"")}))))),t&&Object(n.h)("div",{class:"alert alert-danger",role:"alert"},Object(n.h)(r.c,{id:"login.caps-lock-on"},"CAPS LOCK er pÃ¥!")),j&&Object(n.h)(e,null,Object(n.h)("div",{class:"form-group"},Object(n.h)(r.b,null,Object(n.h)("input",{type:"number",class:"form-control form-control-lg",id:"tokenInput",onInput:Object(c.a)(this,"token"),value:i,placeholder:Object(n.h)(r.c,{id:"login.2fa-token"},"2FA Token")})))),Object(n.h)("div",{class:"form-group"},Object(n.h)("div",{class:"input-group mb-2"},Object(n.h)("div",{class:"input-group-prepend"},Object(n.h)("div",{class:"input-group-text"},Object(n.h)(r.c,{id:"login.select-language"},"Select language"))),Object(n.h)("select",{class:"custom-select custom-select-lg border-0 text-white bg-primary",onInput:this.changeLanguage},Object(n.h)("option",{value:"no",selected:"no"===b},"ðŸ‡³ðŸ‡´ NO"),Object(n.h)("option",{value:"en",selected:"en"===b},"ðŸ‡¬ðŸ‡§ EN"),Object(n.h)("option",{value:"es",selected:"es"===b},"ðŸ‡ªðŸ‡¸ ES"),Object(n.h)("option",{value:"de",selected:"de"===b},"ðŸ‡©ðŸ‡ª DE"),Object(n.h)("option",{value:"fr",selected:"fr"===b},"ðŸ‡«ðŸ‡· FR"),Object(n.h)("option",{value:"ru",selected:"ru"===b},"ðŸ‡·ðŸ‡º RU"),Object(n.h)("option",{value:"se",selected:"se"===b},"ðŸ‡¸ðŸ‡ª SE")))),Object(n.h)("button",{class:"btn btn-lg btn-block btn-primary",type:"button",onClick:this.login,disabled:!y},Object(n.h)("i",{class:"fas fa-sign-in-alt mr-2"}),Object(n.h)(r.c,{id:"login.login"},"Logg inn")),Object(n.h)("small",{class:"form-text text-muted mt-1 text-right"},Object(n.h)("button",{class:"btn btn-small btn-link text-primary",onClick:this.forgotten},Object(n.h)(r.c,{id:"login.forgot-password"},"Glemt passordet?"))))),Object(n.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-md-6 offset-md-3 col-lg-4 offset-lg-4 mt-4"},Object(n.h)("div",{class:"form-row align-items-center"},Object(n.h)("button",{class:"btn btn-link btn-block text-white",type:"button",onClick:this.newUser},Object(n.h)("strong",null,Object(n.h)(r.c,{id:"login.no-account"},"No account?")),Object(n.h)("br",null),Object(n.h)("i",{class:"fas fa-plus mr-2"}),Object(n.h)(r.c,{id:"login.signup-free-account"},"Please sign up for a free account here")))))}})||o;t.default=d}.call(this,s("hosL").Fragment)},tJLP:function(e,t,s){"use strict";var o,n=s("hosL"),a=s("/eY4");let i=Object(a.a)(o=class extends n.Component{componentDidUpdate(){const{remove:e=(()=>{})}=this.props;clearTimeout(this.removeTimer),this.removeTimer=setTimeout(()=>e(),1e4)}componentWillUnmount(){clearTimeout(this.removeTimer)}render(){const{message:e,icon:t,remove:s=(()=>{})}=this.props;return e?Object(n.h)("div",{class:"container"},Object(n.h)("div",{class:"alert alert-danger row"},Object(n.h)("div",{class:"col-12"},Object(n.h)("a",{href:"#",onclick:s,class:"float-right"},Object(n.h)("i",{className:"fas fa-times"})),t&&Object(n.h)("h1",{class:"float-left mr-3"},Object(n.h)("i",{class:t})),e&&Object(n.h)("span",null,e)))):""}})||o;t.a=i}}]);
//# sourceMappingURL=20.chunk.9b349.esm.js.map