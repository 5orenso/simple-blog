(window.webpackJsonp=window.webpackJsonp||[]).push([[14,6],{"/DnB":function(e,t,o){"use strict";function s(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,s)}return o}function a(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}var i,n=o("hosL"),r=(o("Utv1"),o("/eY4")),l={},c=Object(r.a)(i=function(e){function t(t){var o;return(o=e.call(this,t)||this).state=function(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?s(Object(o),!0).forEach((function(t){a(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):s(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}({},l),o.container=null,o}var o,i;i=e,(o=t).prototype=Object.create(i.prototype),o.prototype.constructor=o,o.__proto__=i;var r=t.prototype;return r.componentDidMount=function(){var e=this.props,t=e.horizontal,o=e.vertical,s=void 0===o?"":o,a={behavior:"smooth"};t&&(a.inline=t),s&&(a.block=s),this.container.scrollIntoView(a)},r.render=function(){var e=this;return Object(n.h)("div",{ref:function(t){return e.container=t}}," ")},t}(n.Component))||i;t.a=c},"3on9":function(e,t,o){"use strict";(function(e){function s(){return(s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var s in o)Object.prototype.hasOwnProperty.call(o,s)&&(e[s]=o[s])}return e}).apply(this,arguments)}function a(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}function i(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,s)}return o}function n(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?i(Object(o),!0).forEach((function(t){r(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):i(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}function r(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}var l,c=o("hosL"),d=o("Utv1"),u=o("/eY4"),p=o("cneo"),h=o("go65"),b=(o("Y3FI"),o("OhSV")),f=o("dVCl"),m={id:0,name:"empty"},g=function(){var e=n({},m);return e.unique=(new Date).getTime()+"-"+d.a.randomPassword(),e},O=function(e){function t(){return e.apply(this,arguments)||this}return a(t,e),t.prototype.render=function(){var e,t=this.props,o=t.provided,a=t.snapshot,i=t.innerRef,n=t.children,r=t.className;return Object(c.h)("div",s({class:"h-100 border "+r},o.droppableProps,{ref:i,style:(e=a.isDraggingOver,{borderStyle:e?"dashed":"",width:110})}),n)},t}(c.Component),j=function(t){function o(){for(var e,o=arguments.length,s=new Array(o),a=0;a<o;a++)s[a]=arguments[a];return(e=t.call.apply(t,[this].concat(s))||this).removeThisPlaceholder=function(){var t=e.props,o=t.removePlaceholder;(void 0===o?function(){}:o)({idx:t.idx,list:t.list})},e}return a(o,t),o.prototype.render=function(){var t,o,a=this.props,i=a.provided,r=a.snapshot,l=a.innerRef,u=a.dog;return Object(c.h)("div",s({},i.draggableProps,i.dragHandleProps,{ref:l,class:"mx-2 my-2 p-2",style:(t=r.isDragging,o=i.draggableProps.style,n({userSelect:"none",background:t?"#808080":"",maxWidth:92,height:100},o))}),0===u.id?Object(c.h)(e,null,Object(c.h)("div",null,Object(c.h)("div",{class:"text-center border rounded-circle imageRounded text-muted pt-2"},Object(c.h)("span",{class:"font-weight-lighter",style:"font-size: 35px;"}," ")),Object(c.h)("div",{class:"text-center"},Object(c.h)("button",{class:"btn btn-sm btn-link float-right p-0",onClick:this.removeThisPlaceholder},Object(c.h)("i",{class:"fas fa-trash-alt"}))," "))):Object(c.h)(e,null,Object(c.h)("div",null,Object(c.h)("div",{class:"text-center border rounded-circle imageRounded text-muted pt-2",style:u.image?'background-image: url("'+u.image.s3ThumbLink+'");':""},!u.image&&Object(c.h)("span",{class:"font-weight-lighter",style:"font-size: 35px;"},d.a.ucfirst(u.name,!0))),Object(c.h)("div",{class:"text-center"},Object(c.h)("small",null,u.shortname||u.name,Object(c.h)("br",null))))))},o}(c.Component),v={filterby:d.a.get("dogs-filter")},y=Object(u.a)(l=function(t){function o(e){var o;return(o=t.call(this,e)||this).toggleDog=function(e){return new Promise((function(t,s){var a,i,n,r,l,c,d,u,h,b,f,m,g;return a=e.target.closest("#dogContainer").dataset.id,i=parseInt(a,10),r=(n=o.props).object,l=n.type,c=n.elementtype,d=n.field,u=n.updateField,h=n.isNew,b=n.showPositions,(m=(f=Object(p.i)(r[d])||[]).indexOf(i))>-1?(f.splice(m,1),g="remove"):(f.push(i),g="add"),Promise.resolve(u({id:r.id,field:d,value:f,type:l,elementtype:c,isNew:h,skipTimer:!0,singleValue:i})).then((function(){try{return o.setState({filterText:""}),b&&o.dndDogs({dogId:i,action:g}),t()}catch(e){return s(e)}}),s)}))},o.findAllDogsInTeams=function(){var e=o.props.stores.dogStore.dogs,t=void 0===e?[]:e,s=o.props,a=s.object,i=s.currentTeam,n=void 0===i?{}:i,r=Object(p.i)(a.teams||[]),l=n.id;return t.filter((function(e){return!!(e.team===l||e.teams&&e.teams.indexOf(l)>-1)||(r.indexOf(e.team)>-1||!!e.teams&&e.teams.some((function(e){return r.indexOf(e)>=0})))})).map((function(e){return e.id}))},o.addAllDogsInTeam=function(){return new Promise((function(e,t){var s,a,i,n,r,l,c,d;return a=(s=o.props).object,i=s.type,n=s.elementtype,r=s.field,l=s.updateField,c=s.isNew,d=o.findAllDogsInTeams(),Promise.resolve(l({id:a.id,field:r,value:d,type:i,elementtype:n,isNew:c,skipTimer:!0})).then((function(){try{return e()}catch(e){return t(e)}}),t)}))},o.dndDogs=function(e){var t=e.dogId,s=e.action,a=o.props.stores.dogStore.dogs,i=void 0===a?[]:a,n=o.props.object,r=n.dogs?function(e){return n.dogs.indexOf(e.id)>-1}:function(){return!1},l=Object(p.i)(i),c=l.filter(r),d=Math.ceil(c.length/2),u=c.splice(0,d),h=[];n.dogsLeft&&n.dogsLeft.length>0&&(h=n.dogsLeft.filter((function(e){return 0===e||l.find((function(t){return t.id===e}))&&-1===n.dogsRight.indexOf(e)})).map((function(e){return l.find((function(t){return t.id===e}))||g()})));var b=[];if(n.dogsRight&&n.dogsRight.length>0&&(b=n.dogsRight.filter((function(e){return 0===e||l.find((function(t){return t.id===e}))&&-1===n.dogsLeft.indexOf(e)})).map((function(e){return l.find((function(t){return t.id===e}))||g()}))),"add"===s){var f=i.find((function(e){return e.id===t}));f&&(h.length>b.length?b.push(f):h.push(f))}if("remove"===s){var m=h.findIndex((function(e){return e.id===t}));m>-1&&h.splice(m,1);var O=b.findIndex((function(e){return e.id===t}));O>-1&&b.splice(O,1)}0===h.length&&0===b.length&&(h=u,b=c),s?o.setState({dogsLeft:h,dogsRight:b,dogPositionUpdated:!0},(function(){return o.updateDogPositions()})):o.setState({dogsLeft:h,dogsRight:b})},o.addPlaceholderLeft=function(){var e=o.state.dogsLeft,t=void 0===e?[]:e;t.push(g()),o.setState({dogsLeft:t,dogPositionUpdated:!0})},o.addPlaceholderRight=function(){var e=o.state.dogsRight,t=void 0===e?[]:e;t.push(g()),o.setState({dogsRight:t,dogPositionUpdated:!0})},o.removePlaceholder=function(e){var t=e.idx,s=e.list;if("dogsLeft"===s){var a=o.state.dogsLeft,i=void 0===a?[]:a;i.splice(t,1),o.setState({dogsLeft:i,dogPositionUpdated:!0})}if("dogsRight"===s){var n=o.state.dogsRight,r=void 0===n?[]:n;r.splice(t,1),o.setState({dogsRight:r,dogPositionUpdated:!0})}},o.clearAllDogs=function(){return new Promise((function(e,t){var s;return s=o.props,Promise.resolve((0,s.updateField)({id:s.object.id,field:s.field,value:[],type:s.type,elementtype:s.elementtype,isNew:s.isNew,skipTimer:!0})).then((function(){try{return o.resetDogPositions(),e()}catch(e){return t(e)}}),t)}))},o.toggleSearchField=function(){o.setState({showSearchField:o.state.showSearchField?null:1})},o.getList=function(e){return o.state[e]},o.onDragEnd=function(e){var t=e.source,s=e.destination;if(s)if(t.droppableId===s.droppableId){var a,i=function(e,t,o){var s=Array.from(e),a=s.splice(t,1);return s.splice(o,0,a[0]),s}(o.getList(t.droppableId),t.index,s.index);o.setState(((a={})[t.droppableId]=i,a.dogPositionUpdated=!0,a))}else{var n=function(e,t,o,s){var a=Array.from(e),i=Array.from(t),n=a.splice(o.index,1);i.splice(s.index,0,n[0]);var r={};return r[o.droppableId]=a,r[s.droppableId]=i,r}(o.getList(t.droppableId),o.getList(s.droppableId),t,s);o.setState({dogsLeft:n.dogsLeft,dogsRight:n.dogsRight,dogPositionUpdated:!0})}},o.updateDogPositions=function(){return new Promise((function(e,t){var s,a,i,n,r,l,c,d;return a=(s=o.state).dogsLeft,n=void 0===(i=s.dogsRight)?[]:i,l=(r=o.props).object,c=r.updateField,d=r.isNew,Promise.resolve(c({id:l.id,field:"dogsLeft",value:(void 0===a?[]:a).map((function(e){return e.id})),isNew:d,datatype:"array"})).then((function(){try{return Promise.resolve(c({id:l.id,field:"dogsRight",value:n.map((function(e){return e.id})),isNew:d,datatype:"array"})).then((function(){try{return o.setState({dogPositionUpdated:!1}),e()}catch(e){return t(e)}}),t)}catch(e){return t(e)}}),t)}))},o.resetDogPositions=function(){return new Promise((function(e,t){var s,a,i,n,r,l,c,d,u,h,b;return a=void 0===(s=o.props.stores.dogStore.dogs)?[]:s,n=(i=o.props).object,r=i.updateField,l=i.isNew,c=function(e){return n.dogs.indexOf(e.id)>-1},d=Object(p.i)(a),u=d.filter(c),h=Math.ceil(u.length/2),b=u.splice(0,h),Promise.resolve(r({id:n.id,field:"dogsLeft",value:b.map((function(e){return e.id})),isNew:l,datatype:"array"})).then((function(){try{return Promise.resolve(r({id:n.id,field:"dogsRight",value:u.map((function(e){return e.id})),isNew:l,datatype:"array"})).then((function(){try{return o.setState({dogsLeft:b,dogsRight:u,dogPositionUpdated:!1}),e()}catch(e){return t(e)}}),t)}catch(e){return t(e)}}),t)}))},o.clearDogPositions=function(){return new Promise((function(e,t){var s,a,i,n,r,l;return a=(s=o.props).object,i=s.updateField,n=s.isNew,r=[],l=[],Promise.resolve(i({id:a.id,field:"dogsLeft",value:l,isNew:n,datatype:"array"})).then((function(){try{return Promise.resolve(i({id:a.id,field:"dogsRight",value:r,isNew:n,datatype:"array"})).then((function(){try{return o.setState({dogsLeft:l,dogsRight:r,dogPositionUpdated:!1}),e()}catch(e){return t(e)}}),t)}catch(e){return t(e)}}),t)}))},o.changeFilter=function(e){var t=e.target.value;o.setState({filterby:t}),d.a.set("dogs-filter",t),o.loadDog()},o.getFilteredDogs=function(e){void 0===e&&(e=o.props);var t=o.state,s=t.filterText,a=e.object,i=e.filter,n=o.props.stores.dogStore.dogs,r=void 0===n?[]:n,l=void 0===i?function(){return!0}:i;if(a.dogs)switch(t.filterby){case"all":l=s?function(e){return e.name.match(new RegExp(s,"i"))||a.dogs.indexOf(e.id)>-1}:function(){return!0};break;case"onlySelected":l=s?function(e){return e.name.match(new RegExp(s,"i"))||a.dogs.indexOf(e.id)>-1}:function(e){return a.dogs.indexOf(e.id)>-1};break;case"onlyTeam":l=s?function(e){return e.name.match(new RegExp(s,"i"))||a.dogs.indexOf(e.id)>-1}:function(e){return a.team===e.team||a.dogs.indexOf(e.id)>-1};break;case"leadOnly":l=function(e){return a.dogs.indexOf(e.id)>-1||d.a.getNestedValue(e,"positions.lead.distanceKm")>0};break;case"pointOnly":l=function(e){return a.dogs.indexOf(e.id)>-1||d.a.getNestedValue(e,"positions.point.distanceKm")>0};break;case"teamOnly":l=function(e){return a.dogs.indexOf(e.id)>-1||d.a.getNestedValue(e,"positions.team.distanceKm")>0};break;case"wheelOnly":l=function(e){return a.dogs.indexOf(e.id)>-1||d.a.getNestedValue(e,"positions.wheel.distanceKm")>0}}var c=r.filter(l);o.setState({filteredDogs:c})},o.state=n({dogsLeft:[],dogsRight:[]},v),o}a(o,t);var s=o.prototype;return s.loadDog=function(e){return new Promise(function(t,o){var s;return void 0===e&&(e=this.props),s=this.props.showPositions,Promise.resolve(e.stores.dogStore.load({query:{deceased:0},addData:["team","user","workoutSummary","vaccineStatuses","historyStatuses","vaccineLogStatuses","allDogs"]})).then(function(){try{return s&&this.dndDogs({}),this.getFilteredDogs(),t()}catch(e){return o(e)}}.bind(this),o)}.bind(this))},s.componentWillReceiveProps=function(e){e.filter!==this.props.filter&&this.getFilteredDogs(e)},s.componentDidMount=function(){this.loadDog()},s.render=function(){var t=this,o=this.state,s=o.filterby,a=o.filterText,i=o.showSearchField,n=o.dogsLeft,r=void 0===n?[]:n,l=o.dogsRight,u=void 0===l?[]:l,m=o.dogPositionUpdated,g=o.filteredDogs,v=void 0===g?[]:g,y=this.props.stores,w=y.userStore,k=y.dogStore,x=k.dogs,I=void 0===x?[]:x,D=w.user.language,F=void 0===D?"en":D,S=this.props,T=S.saved,V=void 0===T?{}:T,P=S.object,N=S.field,C=S.title,H=S.icon,K=S.help,L=S.showPositions,E=void 0!==L&&L,W=S.currentTeam,_=void 0===W?{}:W,A=Object(p.i)(P[N])||[],R=this.findAllDogsInTeams(),M=P.teams?P.teams.map((function(e){return w.findTeam(e)})):[];return Object(c.h)("div",{class:"form-group  mb-5 pb-1 border-bottom "+(V[N+"."+P.id]?"is-valid":"")},Object(c.h)("span",{class:"float-right",onClick:this.toggleSearchField},Object(c.h)("i",{class:"fas fa-search"})),Object(c.h)("button",{class:"btn btn-sm btn-link float-right mr-5",onClick:this.clearAllDogs},Object(c.h)("i",{class:"fas fa-eraser"})," ",Object(c.h)(b.c,{id:"dog.dogs.remove-all-dogs"},"Fjern alle hundene")),Object(c.h)("label",{for:N+"Input"},H&&Object(c.h)("i",{class:H+" text-muted"})," ",C),Object(c.h)("div",{class:"container-fluid px-0"},i&&Object(c.h)("div",{class:"row"},Object(c.h)("div",{class:"col-12"},Object(c.h)(b.b,null,Object(c.h)("input",{class:"form-control form-control-sm",type:"text",placeholder:Object(c.h)(b.c,{id:"dog.dogs.search-for-dogs"},"Søk etter hund"),value:a,onInput:Object(h.a)(this,"filterText")})))),Object(c.h)("div",{class:"row"},Object(c.h)("div",{class:"col-12"},Object(c.h)("div",{class:"form-row align-items-center"},Object(c.h)("div",{class:"col-auto my-2 mx-auto"},Object(c.h)("select",{class:"custom-select",style:"background-color: inherit; border: none; padding-top: 0; padding-bottom: 0; height: 1.4em; font-size: 0.8em;",onInput:this.changeFilter},Object(c.h)("option",{value:"",selected:!s},"-- ",Object(c.h)(b.c,{id:"dog.dogs.choose-filter"},"Choose filter")," ---"),Object(c.h)("option",{value:"all",selected:"all"===s},Object(c.h)(b.c,{id:"dog.dogs.show-all"},"Vis alle")),Object(c.h)("option",{value:"onlySelected",selected:"onlySelected"===s},Object(c.h)(b.c,{id:"dog.dogs.show-only-selected"},"Vis kun valgte")),Object(c.h)("option",{value:"onlyTeam",selected:"onlyTeam"===s},Object(c.h)(b.c,{id:"dog.dogs.show-only-team-dogs"},"Vis kun hundene i teamet")),Object(c.h)("option",{value:"leadOnly",selected:"leadOnly"===s},Object(c.h)(b.c,{id:"dog.dogs.show-lead-dogs-only"},"Vis kun lederhunder")),Object(c.h)("option",{value:"pointOnly",selected:"pointOnly"===s},Object(c.h)(b.c,{id:"dog.dogs.show-point-dogs-only"},"Vis kun pointhunder")),Object(c.h)("option",{value:"teamOnly",selected:"teamOnly"===s},Object(c.h)(b.c,{id:"dog.dogs.show-team-dogs-only"},"Vis kun teamhunder")),Object(c.h)("option",{value:"wheelOnly",selected:"wheelOnly"===s},Object(c.h)(b.c,{id:"dog.dogs.show-wheel-dogs-only"},"Vis kun wheelhunder"))))))),Object(c.h)("div",{class:"row"},R.length>0&&Object(c.h)(e,null,Object(c.h)("button",{class:"btn btn-primary btn-block",onClick:this.addAllDogsInTeam},Object(c.h)("i",{class:"fas fa-plus mr-2"})," ",Object(c.h)(b.c,{id:"dog.dogs.add-all-in-team",fields:{total:R.length}},"Add all dogs in team"),_.name?": "+_.name:"",M&&M.length>0&&Object(c.h)("span",{class:"font-weight-lighter"},", ",M.map((function(t,o){return Object(c.h)(e,null,o>0?", ":"",t)}))))),d.a.isArray(I)&&v.map((function(e){var o=w.findDogstatus({status:e.status,language:F}),a=w.findDogposition({position:e.position,language:F}),i=k.findHistoryStatuses(e.id);return Object(c.h)("div",{class:"col-6 col-sm-6 col-md-6 col-lg-6 mb-1"},Object(c.h)("div",{class:"border rounded px-3 pt-2 pb-1 "+(A.indexOf(e.id)>-1?"bg-success":"")+" position-relative",onClick:t.toggleDog,id:"dogContainer","data-id":e.id,style:"padding: .3rem !important; line-height: 1.1em; cursor: pointer; pointer-events: inherit;"},a&&Object(c.h)("small",{class:"position-absolute",style:"left:5px; top: 32px;"},Object(c.h)("span",{class:"badge badge-"+(a.class||"primary")+" mr-3"},a.icon&&Object(c.h)("i",{class:a.icon})," ",a.name)),"leadOnly"===s&&d.a.getNestedValue(e,"positions.lead.distanceKm")>0&&Object(c.h)("small",{class:"position-absolute",style:"left:5px; top: 32px;"},Object(c.h)("span",{class:"badge badge-secondary mr-3"},Object(c.h)(b.c,{id:"dogs.sort-lead"},"Lead"),": ",d.a.format(d.a.getNestedValue(e,"positions.lead.distanceKm"),0),"km")),"pointOnly"===s&&d.a.getNestedValue(e,"positions.point.distanceKm")>0&&Object(c.h)("small",{class:"position-absolute",style:"left:5px; top: 32px;"},Object(c.h)("span",{class:"badge badge-secondary mr-3"},Object(c.h)(b.c,{id:"dogs.sort-point"},"Point"),": ",d.a.format(d.a.getNestedValue(e,"positions.point.distanceKm"),0),"km")),"teamOnly"===s&&d.a.getNestedValue(e,"positions.team.distanceKm")>0&&Object(c.h)("small",{class:"position-absolute",style:"left:5px; top: 32px;"},Object(c.h)("span",{class:"badge badge-secondary mr-3"},Object(c.h)(b.c,{id:"dogs.sort-team"},"Team"),": ",d.a.format(d.a.getNestedValue(e,"positions.team.distanceKm"),0),"km")),"wheelOnly"===s&&d.a.getNestedValue(e,"positions.wheel.distanceKm")>0&&Object(c.h)("small",{class:"position-absolute",style:"left:5px; top: 32px;"},Object(c.h)("span",{class:"badge badge-secondary mr-3"},Object(c.h)(b.c,{id:"dogs.sort-wheel"},"Wheel"),": ",d.a.format(d.a.getNestedValue(e,"positions.wheel.distanceKm"),0),"km")),Object(c.h)("div",{class:"d-flex"},Object(c.h)("div",{class:"text-center border rounded-circle imageRounded imageRoundedSmall text-muted pt-2",style:e.image?'background-image: url("'+e.image.s3ThumbLink+'");':""},!e.image&&Object(c.h)("span",{class:"font-weight-lighter",style:"font-size: 20px;"},d.a.ucfirst(e.name,!0))),Object(c.h)("div",{class:"flex-grow-1 pl-2 pr-1",style:"border-right: 4px solid "+w.findHarness(e.harness,"colorNonstop")+" !important; line-height: 0.9em;"},Object(c.h)("small",null,Object(c.h)("small",{class:"float-right"},e.birth&&Object(c.h)("span",{class:"mr-1"},d.a.age(e.birth,e.deceased)),"female"===e.gender?Object(c.h)("i",{class:"fas fa-venus"}):Object(c.h)("i",{class:"fas fa-mars"})),e.shortname||e.name,Object(c.h)("br",null),Object(c.h)("div",{style:"line-height: 0.8em;"},Object(c.h)("small",null,w.findTeam(e.team)))),Object(c.h)("small",{class:"float-right"},o&&o.id&&Object(c.h)("span",{class:"badge badge-"+o.class+" mr-2 font-weight-light"},o.icon&&Object(c.h)("i",{class:o.icon})," ",o.name),e.specialNeeds&&Object(c.h)("span",{class:"badge badge-warning mr-2 font-weight-light"},Object(c.h)("i",{class:"fas fa-exclamation-triangle"})," ",e.specialNeeds),i&&i.map((function(e){return Object(c.h)("span",{class:"badge badge-warning mr-2",title:d.a.isoDate(e.endDate,!1,!1,!0)},e.title)})))))))})))),V[N+"."+P.id]?Object(c.h)("div",{class:"valid-feedback",style:"display: block;"},Object(c.h)(b.c,{id:"dog.dogs.saved-changes"},"Endringene er lagret")):Object(c.h)("small",{id:N+"Help",class:"form-text text-muted"},K),E&&Object(c.h)(e,null,Object(c.h)("div",{class:"container-fluid px-0 clearfix"},Object(c.h)("div",{class:"row"},Object(c.h)("div",{class:"col-12"},Object(c.h)("h5",null,Object(c.h)(b.c,{id:"dog.dogs.dogs-positions"},"Posisjoner i spannet")))),Object(c.h)(f.a,{onDragEnd:this.onDragEnd},Object(c.h)("div",{class:"row"},Object(c.h)("div",{class:"col-6 pr-0",style:"min-height: 100px;"},Object(c.h)(f.c,{droppableId:"dogsLeft"},(function(e,o){return Object(c.h)(O,{provided:e,snapshot:o,innerRef:e.innerRef,className:"ml-auto"},r&&r.map((function(e,s){return Object(c.h)(f.b,{key:e.id+"-"+e.unique,draggableId:"dragId-"+e.id+"-"+e.unique,index:s},(function(a){return Object(c.h)(j,{provided:a,snapshot:o,innerRef:a.innerRef,dog:e,removePlaceholder:t.removePlaceholder,idx:s,list:"dogsLeft"})}))})),e.placeholder)}))),Object(c.h)("div",{class:"col-6 pl-0",style:"min-height: 100px;"},Object(c.h)(f.c,{droppableId:"dogsRight"},(function(e,o){return Object(c.h)(O,{provided:e,snapshot:o,innerRef:e.innerRef,className:"mr-auto"},u&&u.map((function(e,s){return Object(c.h)(f.b,{key:e.id+"-"+e.unique,draggableId:"dragId-"+e.id+"-"+e.unique,index:s},(function(a){return Object(c.h)(j,{provided:a,snapshot:o,innerRef:a.innerRef,dog:e,removePlaceholder:t.removePlaceholder,idx:s,list:"dogsRight"})}))})),e.placeholder)}))))),Object(c.h)("div",{class:"row mb-3 mt-2"},Object(c.h)("div",{class:"col-6 pr-0"},Object(c.h)("button",{class:"btn btn-sm btn-outline-secondary",onClick:this.addPlaceholderLeft},Object(c.h)("i",{class:"fas fa-plus-circle"})," ",Object(c.h)(b.c,{id:"dog.dogs.addplaceholder"},"Add placeholder"))),Object(c.h)("div",{class:"col-6 pl-0"},Object(c.h)("button",{class:"float-right btn btn-sm btn-outline-secondary",onClick:this.addPlaceholderRight},Object(c.h)("i",{class:"fas fa-plus-circle"})," ",Object(c.h)(b.c,{id:"dog.dogs.addplaceholder"},"Add placeholder"))))),Object(c.h)("div",{class:"container-fluid px-0"},Object(c.h)("div",{class:"row"},Object(c.h)("div",{class:"col-6"},Object(c.h)("button",{class:"btn btn-sm btn-"+(m?"primary":"secondary"),onClick:this.updateDogPositions},Object(c.h)("i",{class:"fas fa-save"})," ",Object(c.h)(b.c,{id:"dog.dogs.saveDogPositions"},"Save dog positions"))),Object(c.h)("div",{class:"col-6"},Object(c.h)("button",{class:"float-right btn btn-sm btn-warning",onClick:this.resetDogPositions},Object(c.h)("i",{class:"fas fa-sync"})," ",Object(c.h)(b.c,{id:"dog.dogs.resetDogPositions"},"Reset dog positions")))),Object(c.h)("div",{class:"row mt-2"},Object(c.h)("div",{class:"col-6"}," "),Object(c.h)("div",{class:"col-6"},Object(c.h)("button",{class:"float-right btn btn-sm btn-link",onClick:this.clearDogPositions},Object(c.h)("i",{class:"fas fa-eraser"})," ",Object(c.h)(b.c,{id:"dog.dogs.clearDogPositions"},"Clear dog positions")))))))},o}(c.Component))||l;t.a=y}).call(this,o("hosL").Fragment)},TiXY:function(e,t,o){"use strict";var s,a=o("hosL"),i=o("/eY4"),n=(o("cneo"),o("Utv1"),o("OhSV")),r=o("u2zT"),l=Object(i.a)(s=function(e){function t(t){var o;return(o=e.call(this,t)||this).handleAddImage=function(e){var t=o.props;(0,t.updateField)({id:t.object.id,field:t.field,value:e})},o.state={files:[]},o}var o,s;return s=e,(o=t).prototype=Object.create(s.prototype),o.prototype.constructor=o,o.__proto__=s,t.prototype.render=function(){var e=this.props,t=e.uploadStatus,o=void 0===t?function(){}:t,s=e.before,i=void 0===s?function(){}:s,l=e.after,c=void 0===l?function(){}:l,d=e.autoOpen,u=void 0!==d&&d;return Object(a.h)("div",{class:"row"},Object(a.h)("div",{class:"col-12"},Object(a.h)(n.c,{id:"form.files.upload-file"},"Last opp fil"),":",Object(a.h)("br",null),Object(a.h)(r.a,{handleAddImage:this.handleAddImage,apiUrl:"/api/fileupload",uploadStatus:o,before:i,after:c,autoOpen:u},Object(a.h)("div",{style:{height:30,width:"100%"}}))))},t}(a.Component))||s;t.a=l},f4kV:function(e,t,o){"use strict";o.r(t),function(e){function s(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,s)}return o}function a(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?s(Object(o),!0).forEach((function(t){i(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):s(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}function i(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function n(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}var r,l,c,d,u,p,h,b,f,m,g=o("hosL"),O=o("Utv1"),j=o("/eY4"),v=o("cneo"),y=o("go65"),w=o("Y3FI"),k=o("OhSV"),x=o("ZOvn"),I=o("X9Km"),D=o("om2D"),F=o("3on9"),S=o("HqZR"),T=o("TiXY"),V=o("/DnB"),P=x.a.marginTop(!1),N=x.a.marginTopBack(!1),C=x.a.marginBottom(),H={newWorkout:{}},K=Object(j.a)(r=function(t){function o(){for(var e,o=arguments.length,s=new Array(o),a=0;a<o;a++)s[a]=arguments[a];return(e=t.call.apply(t,[this].concat(s))||this).onInput=function(t){var o=e.props.field,s=e.props.stores.workoutStore;s.updateObjectKeyValue("newWorkout",o,t.target.value),s.updateObjectKeyValue("newWorkout","updated-"+o,(new Date).getTime())},e.updateDuration=function(t,o){var s=e.props.field,a=e.props.stores.workoutStore;a.updateObjectKeyValue("newWorkout",t,o);var i=a.newWorkout;if(O.a.isUndefined(i[s+"-hours"])){a.updateObjectKeyValue("newWorkout",s+"-hours",0)}if(O.a.isUndefined(i[s+"-minutes"])){a.updateObjectKeyValue("newWorkout",s+"-minutes",0)}a.updateObjectKeyValue("newWorkout",s,3600*(i[s+"-hours"]||0)+60*(i[s+"-minutes"]||0)),a.updateObjectKeyValue("newWorkout","updated-"+s,(new Date).getTime())},e.onInputDuration=function(t){var o=parseInt(t.target.value,10);e.updateDuration(t.target.name,o)},e.decDuration=function(t){var o=t.target.closest("button").dataset.name,s=(e.props.stores.workoutStore.newWorkout[o]||0)-1;e.updateDuration(o,s<0?0:s)},e.incDuration=function(t){var o=t.target.closest("button").dataset.name,s=(e.props.stores.workoutStore.newWorkout[o]||0)+1;e.updateDuration(o,s<0?0:s)},e.setDateToNow=function(){var t=e.props.field,o=O.a.isoDate(void 0,!1,!1,!0);e.props.stores.workoutStore.updateObjectKeyValue("newWorkout",t,o)},e.setTimeToNow=function(){var t=e.props.field,o=O.a.isoTime();e.props.stores.workoutStore.updateObjectKeyValue("newWorkout",t,o)},e.setRightValue=function(){var t=e.props;e.props.stores.workoutStore.updateObjectKeyValue("newWorkout",t.field,t.rightValueReal)},e}return n(o,t),o.prototype.render=function(){var t,o=this.props,s=o.type,a=o.datalist,i=void 0===a?[]:a,n=o.min,r=o.max,l=o.step,c=o.field,d=o.title,u=o.icon,p=o.help,h=o.placeholder,b=o.rightValue,f=this.props.stores.workoutStore.newWorkout,m=r;if("date"===s&&"today"===r&&(m=O.a.isoDate(void 0,!1,!1,!0)),"duration"!==c&&"rest"!==c||(t=O.a.secToHms(f[c],!0)),"weather"===c&&O.a.checkNested(f,"yr","0","instant","details")){var j=Object(v.i)(f.yr[0].instant.details);O.a.isoDate(f.yr[0].date,!1,!1,!0)===O.a.isoDate(f.date,!1,!1,!0)&&(t="Yr.no: 🌡️ "+j.air_temperature+"°C, 💨 "+j.wind_speed+"m/s 🧭 "+x.a.windDirection(j.wind_from_direction)+", ☁️ "+j.cloud_area_fraction+"%, "+j.air_pressure_at_sea_level+"mb, 💦 "+j.relative_humidity+"%")}if("temperature"===c&&O.a.checkNested(f,"yr","0","instant","details")){var y=Object(v.i)(f.yr[0].instant.details);O.a.isoDate(f.yr[0].date,!1,!1,!0)===O.a.isoDate(f.date,!1,!1,!0)&&(t="Yr.no: 🌡️ "+y.air_temperature+"°C")}if("datalist"===s)return Object(g.h)("div",{class:"form-group mb-1 pb-1 border-bottom"},Object(g.h)("label",{for:c+"Input"},u&&Object(g.h)("i",{class:u+" text-muted"})," ",d),Object(g.h)("input",{list:"list-"+c,class:"form-control",id:c+"Input","aria-describedby":c+"Help",onInput:this.onInput,value:f[c]}),Object(g.h)("datalist",{id:"list-"+c},i.map((function(e){return Object(g.h)("option",{value:e[0]},e[1])}))),Object(g.h)("small",{id:c+"Help",class:"form-text text-muted"},p));if("duration"===s){var w=Math.floor(f[c]/3600),k=Math.floor(f[c]%3600/60);return Object(g.h)("div",{class:"form-group mb-1 pb-1 border-bottom"},Object(g.h)("span",{class:"float-right"},Object(g.h)("strong",null,t)),Object(g.h)("label",{for:c+"Input"},u&&Object(g.h)("i",{class:u+" text-muted"})," ",d),Object(g.h)("div",{class:"form-row"},Object(g.h)("div",{class:"input-group col-5 offset-1 col-xl-3 offset-xl-3"},Object(g.h)("div",{class:"input-group-prepend "},Object(g.h)("button",{class:"btn btn-sm btn-outline-secondary",type:"button","data-name":c+"-hours",onClick:this.decDuration},Object(g.h)("i",{class:"fas fa-minus"}))),Object(g.h)("input",{class:"form-control text-center",id:c+"Input","aria-describedby":c+"Help",onInput:this.onInputDuration,name:c+"-hours",value:w,type:"number",min:"0",max:"24"}),Object(g.h)("div",{class:"input-group-append "},Object(g.h)("button",{class:"btn btn-sm btn-outline-secondary",type:"button","data-name":c+"-hours",onClick:this.incDuration},Object(g.h)("i",{class:"fas fa-plus"})))),Object(g.h)("div",{class:"input-group col-5 col-xl-3"},Object(g.h)("div",{class:"input-group-prepend "},Object(g.h)("button",{class:"btn btn-sm btn-outline-secondary",type:"button","data-name":c+"-minutes",onClick:this.decDuration},Object(g.h)("i",{class:"fas fa-minus"}))),Object(g.h)("input",{class:"form-control text-center",id:c+"Input","aria-describedby":c+"Help",onInput:this.onInputDuration,name:c+"-minutes",value:k,type:"number",min:"0",max:"59"}),Object(g.h)("div",{class:"input-group-append "},Object(g.h)("button",{class:"btn btn-sm btn-outline-secondary",type:"button","data-name":c+"-minutes",onClick:this.incDuration},Object(g.h)("i",{class:"fas fa-plus"}))))),Object(g.h)("small",{id:c+"Help",class:"form-text text-muted"},p))}return"toggle"===s?Object(g.h)("div",{class:"form-group mb-1 pb-1 border-bottom"},Object(g.h)("label",{for:c+"Input"},u&&Object(g.h)("i",{class:u+" text-muted"})," ",d),Object(g.h)("div",{class:"custom-control custom-switch"},Object(g.h)("input",{type:"checkbox",class:"custom-control-input",id:c+"Input",value:1===f[c]?0:1,"data-field":c,onInput:this.onInput,checked:1==f[c]?"checked":""}),Object(g.h)("label",{class:"custom-control-label",for:c+"Input"})),Object(g.h)("small",{id:c+"Help",class:"form-text text-muted"},p)):"textarea"===s?Object(g.h)(e,null,Object(g.h)("div",{class:"form-group mb-1 pb-1 border-bottom"},Object(g.h)("label",{for:c+"Input"},u&&Object(g.h)("i",{class:u+" text-muted"})," ",d),Object(g.h)("textarea",{class:"form-control "+("number"===s||"date"===s||"time"===s?"text-center":""),id:c+"Input","aria-describedby":c+"Help",min:n,max:m,step:l,rows:5,onInput:this.onInput,value:f[c],placeholder:h,onKeyUp:x.a.resizeTextarea,onFocus:x.a.resizeTextarea}),Object(g.h)("small",{id:c+"Help",class:"form-text text-muted"},p))):Object(g.h)("div",{class:"form-group mb-1 pb-1 border-bottom"},"date"===s&&Object(g.h)("span",{class:"float-right text-muted font-weight-lighter",onClick:this.setDateToNow},"I dag ",Object(g.h)("i",{class:"far fa-check-circle"})),"time"===s&&Object(g.h)("span",{class:"float-right text-muted font-weight-lighter",onClick:this.setTimeToNow},"Nå ",Object(g.h)("i",{class:"far fa-check-circle"})),b&&Object(g.h)("span",{class:"float-right text-muted font-weight-lighter",onClick:this.setRightValue},b),Object(g.h)("label",{for:c+"Input"},u&&Object(g.h)("i",{class:u+" text-muted"})," ",d),t&&Object(g.h)("span",{class:"float-right"},Object(g.h)("strong",null,t)),Object(g.h)("input",{type:s,class:"form-control "+("number"===s||"date"===s||"time"===s?"text-center":""),id:c+"Input","aria-describedby":c+"Help",min:n,max:m,step:l,onInput:this.onInput,value:f[c],placeholder:h}),Object(g.h)("small",{id:c+"Help",class:"form-text text-muted"},p))},o}(g.Component))||r,L=Object(j.a)(l=function(t){function o(){for(var e,o=arguments.length,s=new Array(o),a=0;a<o;a++)s[a]=arguments[a];return(e=t.call.apply(t,[this].concat(s))||this).updateDuration=function(t,o){var s=e.props,a=s.field,i=s.updateField,n=s.workout,r=O.a.secToHms(n[a]).split(":"),l=parseInt(r[0]||0,10);isNaN(l)&&(l=0);var c=parseInt(r[1]||0,10);isNaN(c)&&(c=0);var d=parseInt(r[2]||0,10);isNaN(d)&&(d=0),t.match(/-hours/)&&(l=isNaN(o)?0:o),t.match(/-minutes/)&&(c=isNaN(o)?0:o),t.match(/-seconds/)&&(d=isNaN(o)?0:o),i({id:n.id,field:a,value:3600*l+60*c+d})},e.onInputDuration=function(t){var o=parseInt(t.target.value,10);e.updateDuration(t.target.name,o)},e.decDuration=function(t){var o=t.target.closest("button").dataset.name,s=e.props,a=O.a.secToHms(s.workout[s.field]).split(":"),i=parseInt(a[0]||0,10);isNaN(i)&&(i=0);var n=parseInt(a[1]||0,10);isNaN(n)&&(n=0);var r=parseInt(a[2]||0,10);(isNaN(r)&&(r=0),o.match(/-hours/))&&e.updateDuration(o,i-1<0?0:i-1);o.match(/-minutes/)&&e.updateDuration(o,n-1<0?0:n-1);o.match(/-seconds/)&&e.updateDuration(o,r-1<0?0:r-1)},e.incDuration=function(t){var o=t.target.closest("button").dataset.name,s=e.props,a=O.a.secToHms(s.workout[s.field]).split(":"),i=parseInt(a[0]||0,10);isNaN(i)&&(i=0);var n=parseInt(a[1]||0,10);isNaN(n)&&(n=0);var r=parseInt(a[2]||0,10);(isNaN(r)&&(r=0),o.match(/-hours/))&&e.updateDuration(o,i+1<0?0:i+1);o.match(/-minutes/)&&e.updateDuration(o,n+1<0?0:n+1);o.match(/-seconds/)&&e.updateDuration(o,r+1<0?0:r+1)},e.handleImageErrored=function(e){var t=e.target;t.onerror=null,setTimeout((function(){t.src+="?"+new Date}),1e3)},e.removeImage=function(t){return new Promise((function(o){return e.props.stores.workoutStore.removeImage({id:e.props.workout.id,name:t.target.parentElement.dataset.name||t.target.dataset.name}),o()}))},e.removeMainImage=function(){var t=e.props;(0,t.updateField)({id:t.workout.id,field:t.field,value:{}})},e.setDateToNow=function(){var t=e.props,o=t.field,s=t.updateField,a=t.workout,i=O.a.isoDate(void 0,!1,!1,!0);s({id:a.id,field:o,value:i})},e.setTimeToNow=function(){var t=e.props,o=t.field,s=t.updateField,a=t.workout,i=O.a.isoTime();s({id:a.id,field:o,value:i})},e.setValue=function(t){var o=t.target.parentElement.dataset.value||t.target.dataset.value;if(o){var s=e.props;(0,s.updateField)({id:s.workout.id,field:s.field,value:o})}},e.setRightValue=function(){var t=e.props;(0,t.updateField)({id:t.workout.id,field:t.field,value:t.rightValueReal})},e}return n(o,t),o.prototype.render=function(){var t,o,s=this,a=this.props,i=a.saved,n=a.workout,r=a.type,l=a.datalist,c=void 0===l?[]:l,d=a.min,u=a.max,p=a.step,h=a.elementtype,b=a.field,f=a.title,m=a.icon,j=a.help,y=a.onInput,w=a.updateField,I=a.rightValue,F=Object(v.i)(n[b]),S=u;if("date"===r&&(F&&(F=O.a.isoDate(n[b],!1,!1,!0)),"today"===u&&(S=O.a.isoDate(void 0,!1,!1,!0))),"duration"!==b&&"rest"!==b||(t=O.a.secToHms(F,!0)),"weather"===b&&O.a.checkNested(n,"yr","0","instant","details")){var V=Object(v.i)(n.yr[0].instant.details);O.a.isoDate(n.yr[0].date,!1,!1,!0)===O.a.isoDate(n.date,!1,!1,!0)&&(o=t="Yr.no: 🌡️ "+V.air_temperature+"°C, 💨 "+V.wind_speed+"m/s 🧭 "+x.a.windDirection(V.wind_from_direction)+", ☁️ "+V.cloud_area_fraction+"%, "+V.air_pressure_at_sea_level+"mb, 💦 "+V.relative_humidity+"%")}if("temperature"===b&&O.a.checkNested(n,"yr","0","instant","details")){var P=Object(v.i)(n.yr[0].instant.details);O.a.isoDate(n.yr[0].date,!1,!1,!0)===O.a.isoDate(n.date,!1,!1,!0)&&(t="Yr.no: 🌡️ "+P.air_temperature+"°C",o=O.a.asNumber(P.air_temperature))}if("file"===r)return Object(g.h)("div",{class:"form-group "+(i[b+"."+n.id]?"is-valid":"")},Object(g.h)("label",{for:b+"Input"},m&&Object(g.h)("i",{class:m+" text-muted"})," ",f),Object(g.h)(T.a,{saved:i,object:n,field:b,updateField:w}),i[b+"."+n.id]?Object(g.h)("div",{class:"valid-feedback",style:"display: block;"},Object(g.h)(k.c,{id:"workouts.changes-saved"},"Endringene er lagret")):Object(g.h)("small",{id:b+"Help",class:"form-text text-muted"},j));if("image"===r)return Object(g.h)("div",{class:"form-group  mb-1 pb-1 border-bottom "+(i[b+"."+n.id]?"is-valid":"")},Object(g.h)("label",{for:b+"Input"},m&&Object(g.h)("i",{class:m+" text-muted"})," ",f),Object(g.h)("div",{class:"container-fluid"},Object(g.h)("div",{class:"row"},n.images&&n.images.map((function(e){return Object(g.h)("div",{class:"col-3 p-1"},Object(g.h)("img",{src:e.s3SmallLink,class:"img-fluid",onError:s.handleImageErrored}),Object(g.h)("button",{class:"btn btn-sm btn-link",onClick:s.removeImage,"data-name":e.name},Object(g.h)("i",{class:"fas fa-trash"})," Remove"))})))),Object(g.h)(D.a,{saved:i,object:n,field:b,updateField:w,autoOpen:!1}),i[b+"."+n.id]?Object(g.h)("div",{class:"valid-feedback",style:"display: block;"},"Endringene er lagret"):Object(g.h)("small",{id:b+"Help",class:"form-text text-muted"},j));if("datalist"===r)return Object(g.h)("div",{class:"form-group  mb-1 pb-1 border-bottom "+(i[b+"."+n.id]?"is-valid":"")},Object(g.h)("label",{for:b+"Input"},m&&Object(g.h)("i",{class:m+" text-muted"})," ",f),Object(g.h)("input",{list:"list-"+b,class:"form-control "+(i[b+"."+n.id]?"is-valid":""),id:b+"Input","aria-describedby":b+"Help",value:F,"data-id":n.id,"data-field":b,onInput:y}),Object(g.h)("datalist",{id:"list-"+b},c.map((function(e){return Object(g.h)("option",{value:e[0]},e[1])}))),i[b+"."+n.id]?Object(g.h)("div",{class:"valid-feedback",style:"display: block;"},Object(g.h)(k.c,{id:"workouts.changes-saved"},"Endringene er lagret")):Object(g.h)("small",{id:b+"Help",class:"form-text text-muted"},j));if("duration"===r){var N=Math.floor(n[b]/3600),C=Math.floor(n[b]%3600/60);Math.floor(n[b]%3600%60);return Object(g.h)("div",{class:"form-group mb-1 pb-1 border-bottom"},Object(g.h)("span",{class:"float-right"},Object(g.h)("strong",{onClick:this.setValue,"data-value":o},t)),Object(g.h)("label",{for:b+"Input"},m&&Object(g.h)("i",{class:m+" text-muted"})," ",f),Object(g.h)("div",{class:"form-row"},Object(g.h)("div",{class:"input-group col-5 offset-1 col-xl-3 offset-xl-3"},Object(g.h)("div",{class:"input-group-prepend "},Object(g.h)("button",{class:"btn btn-sm btn-outline-secondary",type:"button","data-name":b+"-hours",onClick:this.decDuration},Object(g.h)("i",{class:"fas fa-minus"}))),Object(g.h)("input",{class:"form-control text-center",id:b+"Input","aria-describedby":b+"Help",onInput:this.onInputDuration,name:b+"-hours",value:N,type:"number",min:"0",max:"24"}),Object(g.h)("div",{class:"input-group-append "},Object(g.h)("button",{class:"btn btn-sm btn-outline-secondary",type:"button","data-name":b+"-hours",onClick:this.incDuration},Object(g.h)("i",{class:"fas fa-plus"})))),Object(g.h)("div",{class:"input-group col-5 col-xl-3"},Object(g.h)("div",{class:"input-group-prepend "},Object(g.h)("button",{class:"btn btn-sm btn-outline-secondary",type:"button","data-name":b+"-minutes",onClick:this.decDuration},Object(g.h)("i",{class:"fas fa-minus"}))),Object(g.h)("input",{class:"form-control text-center",id:b+"Input","aria-describedby":b+"Help",onInput:this.onInputDuration,name:b+"-minutes",value:C,type:"number",min:"0",max:"59"}),Object(g.h)("div",{class:"input-group-append "},Object(g.h)("button",{class:"btn btn-sm btn-outline-secondary",type:"button","data-name":b+"-minutes",onClick:this.incDuration},Object(g.h)("i",{class:"fas fa-plus"}))))),i[b+"."+n.id]?Object(g.h)("div",{class:"valid-feedback",style:"display: block;"},Object(g.h)(k.c,{id:"workouts.changes-saved"},"Endringene er lagret")):Object(g.h)("small",{id:b+"Help",class:"form-text text-muted"},j))}return"toggle"===r?Object(g.h)("div",{class:"form-group "+(i[b+"."+n.id]?"is-valid":"")},Object(g.h)("label",{for:b+"Input"},m&&Object(g.h)("i",{class:m+" text-muted"})," ",f),Object(g.h)("div",{class:"custom-control custom-switch"},Object(g.h)("input",{type:"checkbox",class:"custom-control-input",id:b+"Input",value:1===F?0:1,"data-id":n.id,"data-field":b,onInput:y,checked:1==F?"checked":""}),Object(g.h)("label",{class:"custom-control-label",for:b+"Input"})),i[b+"."+n.id]?Object(g.h)("div",{class:"valid-feedback",style:"display: block;"},Object(g.h)(k.c,{id:"workouts.changes-saved"},"Endringene er lagret")):Object(g.h)("small",{id:b+"Help",class:"form-text text-muted"},j)):"textarea"===r?Object(g.h)(e,null,Object(g.h)("div",{class:"form-group  mb-1 pb-1 border-bottom "+(i[b+"."+n.id]?"is-valid":"")},Object(g.h)("label",{for:b+"Input"},m&&Object(g.h)("i",{class:m+" text-muted"})," ",f),Object(g.h)("textarea",{class:"form-control "+("number"===r||"date"===r||"time"===r?"text-center":"")+" "+(i[b+"."+n.id]?"is-valid":""),id:b+"Input","aria-describedby":b+"Help",min:d,max:S,step:p,rows:5,value:F,"data-id":n.id,"data-field":b,"data-type":r,"data-elementtype":h,onInput:y,onKeyUp:x.a.resizeTextarea,onFocus:x.a.resizeTextarea}),i[b+"."+n.id]?Object(g.h)("div",{class:"valid-feedback",style:"display: block;"},Object(g.h)(k.c,{id:"workouts.changes-saved"},"Endringene er lagret")):Object(g.h)("small",{id:b+"Help",class:"form-text text-muted"},j))):Object(g.h)("div",{class:"form-group  mb-1 pb-1 border-bottom "+(i[b+"."+n.id]?"is-valid":"")},"date"===r&&Object(g.h)("span",{class:"float-right text-muted font-weight-lighter",onClick:this.setDateToNow},"I dag ",Object(g.h)("i",{class:"far fa-check-circle"})),"time"===r&&Object(g.h)("span",{class:"float-right text-muted font-weight-lighter",onClick:this.setTimeToNow},"Nå ",Object(g.h)("i",{class:"far fa-check-circle"})),I&&Object(g.h)("span",{class:"float-right text-muted font-weight-lighter",onClick:this.setRightValue},I),Object(g.h)("label",{for:b+"Input"},m&&Object(g.h)("i",{class:m+" text-muted"})," ",f),t&&Object(g.h)("span",{class:"float-right"},Object(g.h)("strong",{onClick:this.setValue,"data-value":o},t)),Object(g.h)("input",{type:r,class:"form-control "+("number"===r||"date"===r||"time"===r?"text-center":"")+" "+(i[b+"."+n.id]?"is-valid":""),id:b+"Input","aria-describedby":b+"Help",min:d,max:S,step:p,value:F,"data-id":n.id,"data-field":b,"data-type":r,"data-elementtype":h,onInput:y}),i[b+"."+n.id]?Object(g.h)("div",{class:"valid-feedback",style:"display: block;"},Object(g.h)(k.c,{id:"workouts.changes-saved"},"Endringene er lagret")):Object(g.h)("small",{id:b+"Help",class:"form-text text-muted"},j))},o}(g.Component))||l,E=Object(j.a)(c=function(t){function o(){return t.apply(this,arguments)||this}n(o,t);var s=o.prototype;return s.toggleMusher=function(e){var t=this.props,o=t.workout,s=t.type,a=t.elementtype,i=t.field,n=t.updateField,r=t.isNew,l=Object(v.i)(o[i])||[],c=l.indexOf(e);c>-1?l.splice(c,1):l.push(e),n({id:o.id,field:i,value:l,type:s,elementtype:a,isNew:r})},s.componentDidMount=function(){this.container&&this.container.scrollIntoView({behavior:"smooth",block:"center"})},s.render=function(){var t=this,o=this.props.stores.userStore.mushers,s=this.props,a=s.saved,i=s.workout,n=s.field,r=s.title,l=s.icon,c=s.help,d=Object(v.i)(i[n])||[];return Object(g.h)("div",{class:"form-group mb-1 pb-1 border-bottom "+(a[n+"."+i.id]?"is-valid":"")},Object(g.h)("label",{for:n+"Input"},l&&Object(g.h)("i",{class:l+" text-muted"})," ",r),Object(g.h)("div",{class:"container-fluid px-0"},Object(g.h)("div",{class:"row"},Object(g.h)("div",{class:"w-100 overflow-hidden"},Object(g.h)("div",{class:"d-flex flex-column pb-2 px-1"},o&&o.map((function(o){return Object(g.h)("div",{class:"col mb-2 px-1",ref:d.indexOf(o.id)>-1?function(e){return t.container=e}:null},Object(g.h)("button",{class:"btn btn-block \n                                                rounded-lg\n                                                btn"+(d.indexOf(o.id)>-1?"":"-outline")+"-success\n                                                text-nowrap overflow-hidden",style:"text-overflow: ellipsis;",onClick:function(){return t.toggleMusher(o.id)}},Object(g.h)("i",{class:"fas fa-user mr-2"}),o.firstname?Object(g.h)(e,null,o.firstname," ",o.lastname):Object(g.h)(e,null,o.email)))})))))),a[n+"."+i.id]?Object(g.h)("div",{class:"valid-feedback",style:"display: block;"},Object(g.h)(k.c,{id:"workouts.changes-saved"},"Endringene er lagret")):Object(g.h)("small",{id:n+"Help",class:"form-text text-muted"},c))},o}(g.Component))||c,W=Object(j.a)(d=function(t){function o(){return t.apply(this,arguments)||this}n(o,t);var s=o.prototype;return s.toggleTeam=function(e){var t=this.props.stores,o=t.dogStore,s=t.workoutStore,a=this.props,i=a.workout,n=a.type,r=a.field,l=a.updateField,c=a.isNew,d=a.selectTeam,u=Object(v.i)(i[r]);null===(u=u===e?null:e)?l({id:i.id,field:r,value:u,type:n,isNew:c}):i.teams&&i.teams.indexOf(u)>-1?s.removeTeam({id:i.id,team:u}):i.team?s.addTeam({id:i.id,team:u}):(o.setCurrentTeam(u),s.setCurrentTeam(u),l({id:i.id,field:r,value:u,type:n,isNew:c}),O.a.isDefined(d)&&d(e))},s.componentDidMount=function(){this.container&&this.container.scrollIntoView({behavior:"smooth",block:"center"})},s.render=function(){var t=this,o=this.props.stores.userStore.teams,s=this.props,a=s.saved,i=s.workout,n=s.field,r=s.title,l=s.icon,c=s.help,d=Object(v.i)(i[n])||[],u=this.props.highlight;return Object(g.h)("div",{class:"form-group mb-1 pb-1 border-bottom "+(a[n+"."+i.id]?"is-valid":"")},Object(g.h)("label",{for:n+"Input"},l&&Object(g.h)("i",{class:l+" text-muted"})," ",r),Object(g.h)("div",{class:"container-fluid px-0"},Object(g.h)("div",{class:"row"},Object(g.h)("div",{class:"w-100 overflow-hidden"},Object(g.h)("div",{class:"d-flex flex-row flex-nowrap pb-2 px-1",style:"overflow: auto; scroll-snap-type: x mandatory;"},o&&o.map((function(s,a){var n=d===s.id,r=i&&O.a.isArray(i.teams)&&i.teams.indexOf(s.id)>-1;return Object(g.h)("div",{class:"col mb-0 px-0",ref:n||r?function(e){return t.container=e}:null},Object(g.h)("button",{class:"btn btn-block \n            \t\t\t\t\t\t\t\t\t\trounded-none "+(0===a?"rounded-pill-left":a+1===o.length?"rounded-pill-right":"")+"\n                                                    btn"+(n||r?"":"-outline")+"-"+(r?"info":"success")+"\n                                                    text-nowrap overflow-hidden",style:"text-overflow: ellipsis;",onClick:function(){return t.toggleTeam(s.id)}},i.hintTeam===s.id&&Object(g.h)("span",{class:"float-right text-primary"},Object(g.h)("i",{class:"fas fa-circle"})),Object(g.h)("i",{class:"fas fa-users mr-2"}),s.name,u&&u.indexOf(s.id)>-1&&Object(g.h)(e,null,d===s.id?Object(g.h)(e,null,Object(g.h)("i",{class:"fas fa-check float-right"})):Object(g.h)(e,null,Object(g.h)("div",{class:"spinner-grow text-warning float-right",role:"status"},Object(g.h)("span",{class:"sr-only"},"Loading...")),Object(g.h)("i",{class:"far fa-hand-point-left float-right",style:"font-size: 2.0em;"}))),Object(g.h)("small",null,n&&Object(g.h)("span",{class:"badge badge-pill badge-primary"},"Primary"),r&&Object(g.h)("span",{class:"badge badge-pill badge-secondary"},"Secondary"))))})))))),a[n+"."+i.id]?Object(g.h)("div",{class:"valid-feedback",style:"display: block;"},Object(g.h)(k.c,{id:"workouts.changes-saved"},"Endringene er lagret")):Object(g.h)("small",{id:n+"Help",class:"form-text text-muted"},c))},o}(g.Component))||d,_=Object(j.a)(u=function(e){function t(){for(var t,o=arguments.length,s=new Array(o),a=0;a<o;a++)s[a]=arguments[a];return(t=e.call.apply(e,[this].concat(s))||this).toggleFilter=function(){t.setState({showAll:t.state.showAll?0:1})},t.toggleSearchField=function(){t.setState({showSearchField:t.state.showSearchField?null:1})},t}n(t,e);var o=t.prototype;return o.toggleTrack=function(e,t){var o=this.state.showAll,s=this.props,a=s.workout,i=void 0===a?{}:a,n=s.type,r=s.field,l=s.updateField,c=s.isNew,d=this.props.stores.userStore,u=d.types,p=x.a.getDays(d.user.language),h=Object(v.i)(i[r]);if(l({id:i.id,field:r,value:h=h===e?null:e,type:n,isNew:c,skipTimer:!0}),i.distanceKm||l({id:i.id,field:"distanceKm",value:t.distanceKm,type:"number",isNew:c,skipTimer:!0}),i.elevation||l({id:i.id,field:"elevation",value:t.elevation,type:"number",isNew:c,skipTimer:!0}),!i.name){var b=p[(i.date?new Date(i.date):new Date).getDay()],f=u.find((function(e){return e.id===i.type}));l({id:i.id,field:"name",value:t.name+": "+b+(f?" "+f.name:"stur"),type:"string",isNew:c,skipTimer:!0})}this.setState({filterText:""}),o&&this.toggleFilter()},o.render=function(){var e=this,t=this.state,o=t.showAll,s=t.filterText,a=t.showSearchField,i=this.props.stores.userStore.tracks,n=this.props,r=n.saved,l=n.workout,c=n.field,d=n.title,u=n.icon,p=n.help,h=n.filter,b=void 0===h?function(){return!0}:h,f=Object(v.i)(l[c]),m=o?function(){return!0}:b;s&&(m=function(e){return e.name.match(new RegExp(s,"i"))||l.track===e.id});var j=i.filter(m);return Object(g.h)("div",{class:"form-group mb-1 pb-1 border-bottom "+(r[c+"."+l.id]?"is-valid":"")},Object(g.h)("span",{class:"float-right",onClick:this.toggleSearchField},Object(g.h)("i",{class:"fas fa-search"})),Object(g.h)("label",{for:c+"Input"},u&&Object(g.h)("i",{class:u+" text-muted"})," ",d),Object(g.h)("div",{class:"container-fluid px-0"},a&&Object(g.h)("div",{class:"row"},Object(g.h)("div",{class:"col-12"},Object(g.h)("input",{class:"form-control form-control-sm",type:"text",placeholder:"Søk etter runder",value:s,onInput:Object(y.a)(this,"filterText")}))),Object(g.h)("div",{class:"row"},j&&j.map((function(t){return Object(g.h)("div",{class:"col-6 col-sm-6 col-md-6 col-lg-6 mb-2"},Object(g.h)("div",{class:"border position-relative rounded p-2 pt-3 pb-1 "+(f===t.id?"bg-success":""),onClick:function(){return e.toggleTrack(t.id,t)},style:"line-height: 0.9em; cursor: pointer; pointer-events: inherit;"},Object(g.h)("small",{class:"float-right position-absolute",style:"top: 0; right: 5px;"},Object(g.h)("small",null,Object(g.h)("i",{class:"fas fa-road"})," ",O.a.format(t.distanceKm,1)," km",Object(g.h)("i",{class:"fas fa-mountain ml-2"})," ",O.a.format(t.elevation,0)," m")),Object(g.h)("div",{style:"overflow: hidden;"},l.hintTrack===t.id&&Object(g.h)("span",{class:"float-right text-primary"},Object(g.h)("i",{class:"fas fa-circle"})),Object(g.h)("small",null,Object(g.h)("i",{class:"fas fa-map-marked mr-2"}),t.name))))}))),Object(g.h)("div",{class:"row"},Object(g.h)("div",{class:"col-12 text-right"},o?Object(g.h)("button",{class:"btn btn-sm btn-link",onClick:this.toggleFilter},Object(g.h)(k.c,{id:"workouts.show-last-used-tracks"},"Vis kun de sist brukte rundene")):Object(g.h)("button",{class:"btn btn-sm btn-link",onClick:this.toggleFilter},Object(g.h)(k.c,{id:"workouts.show-all-tracks"},"Vis alle rundene"))))),r[c+"."+l.id]?Object(g.h)("div",{class:"valid-feedback",style:"display: block;"},Object(g.h)(k.c,{id:"workouts.changes-saved"},"Endringene er lagret")):Object(g.h)("small",{id:c+"Help",class:"form-text text-muted"},p))},t}(g.Component))||u,A=Object(j.a)(p=function(t){function o(){for(var e,o=arguments.length,s=new Array(o),a=0;a<o;a++)s[a]=arguments[a];return(e=t.call.apply(t,[this].concat(s))||this).updateTextField=function(t){var o=e.props,s=o.type,a=o.isNew,i=t.target.dataset,n=i.field,r=t.target.value;(0,o.updateField)({id:parseInt(i.id,10),field:n,value:r,type:s,isNew:a})},e}n(o,t);var s=o.prototype;return s.toggleType=function(e){var t=this.props,o=t.workout,s=t.type,a=t.field,i=t.updateField,n=t.isNew,r=Object(v.i)(o[a]);i({id:o.id,field:a,value:r=r===e?null:e,type:s,isNew:n})},s.componentDidMount=function(){this.container&&this.container.scrollIntoView({behavior:"smooth",block:"center"})},s.render=function(){var t=this,o=this.props.stores,s=o.userStore,a=o.raceStore,i=s.types,n=s.user,r=n.language,l=this.props,c=l.saved,d=l.workout,u=l.field,p=l.title,h=l.icon,b=l.help,f=l.isNew,m=Object(v.i)(d[u]),O=a.getSignupByUserEmail(n.email).length>0;return Object(g.h)("div",{class:"form-group mb-1 pb-1 border-bottom "+(c[u+"."+d.id]?"is-valid":"")},Object(g.h)("label",{for:u+"Input"},h&&Object(g.h)("i",{class:h+" text-muted"})," ",p),Object(g.h)("div",{class:"container-fluid px-0"},Object(g.h)("div",{class:"row"},Object(g.h)("div",{class:"w-100 overflow-hidden"},Object(g.h)("div",{class:"d-flex flex-row flex-nowrap pb-2 px-1",style:"overflow: auto; scroll-snap-type: x mandatory;"},i&&i.map((function(o,s){return Object(g.h)("div",{class:"col mb-0 px-0",ref:m===o.id?function(e){return t.container=e}:null},Object(g.h)("button",{class:"btn btn-block \n        \t\t\t\t\t\t\t\t\t\trounded-none "+(0===s?"rounded-pill-left":s+1===i.length?"rounded-pill-right":"")+"                                    \n                                                btn"+(m===o.id?"":"-outline")+"-success\n                                                text-nowrap overflow-hidden",style:"text-overflow: ellipsis;",onClick:function(){return t.toggleType(o.id)}},o.icon&&Object(g.h)("i",{class:o.icon})," ",r&&o.lang&&o.lang[r]?o.lang[r]:o.name,O&&2===o.id&&Object(g.h)(e,null,m===o.id?Object(g.h)(e,null,Object(g.h)("i",{class:"fas fa-check float-right"})):Object(g.h)(e,null,Object(g.h)("div",{class:"spinner-grow text-warning float-right",role:"status"},Object(g.h)("span",{class:"sr-only"},"Loading...")),Object(g.h)("i",{class:"far fa-hand-point-left float-right",style:"font-size: 2.0em;"})))))}))))),4===m&&Object(g.h)("div",{class:"row"},f?Object(g.h)("div",{class:"col-12"},Object(g.h)(K,{stores:this.props.stores,field:"typeTitle",title:Object(g.h)(k.c,{id:"workouts.other"},"Annet"),help:Object(g.h)(k.c,{id:"workouts.other-help"},"Hva slags type tur/aktivitet var dette?")})):Object(g.h)("div",{class:"col-12"},Object(g.h)(L,{saved:c,workout:d,field:"typeTitle",title:Object(g.h)(k.c,{id:"workouts.other"},"Annet"),help:Object(g.h)(k.c,{id:"workouts.other-help"},"Hva slags type tur/aktivitet var dette?"),onInput:this.updateTextField})))),c[u+"."+d.id]?Object(g.h)("div",{class:"valid-feedback",style:"display: block;"},Object(g.h)(k.c,{id:"workouts.changes-saved"},"Endringene er lagret")):Object(g.h)("small",{id:u+"Help",class:"form-text text-muted"},b))},o}(g.Component))||p,R=Object(j.a)(h=function(t){function o(){return t.apply(this,arguments)||this}n(o,t);var s=o.prototype;return s.toggleType=function(e){var t=this.props,o=t.workout,s=t.type,a=t.field,i=t.updateField,n=t.isNew,r=Object(v.i)(o[a]);i({id:o.id,field:a,value:r=r===e?null:e,type:s,isNew:n})},s.render=function(){var t=this,o=this.props.stores.userStore.intensities,s=this.props,a=s.saved,i=s.workout,n=s.field,r=s.title,l=s.icon,c=s.help,d=Object(v.i)(i[n]);return Object(g.h)("div",{class:"form-group  mb-1 pb-1 border-bottom "+(a[n+"."+i.id]?"is-valid":"")},Object(g.h)("label",{for:n+"Input"},l&&Object(g.h)("i",{class:l+" text-muted"})," ",r),Object(g.h)("div",{class:"container-fluid px-0"},Object(g.h)("div",{class:"row"},o&&o.map((function(o){return Object(g.h)("div",{class:"col-12 mb-2"},Object(g.h)("button",{class:"btn btn-block btn"+(d===o.id?"":"-outline")+"-"+(o.class||"success")+" text-nowrap overflow-hidden",style:"text-overflow: ellipsis;",onClick:function(){return t.toggleType(o.id)}},i.hintIntensity===o.id&&Object(g.h)("span",{class:"float-right text-primary"},Object(g.h)("i",{class:"fas fa-circle"})),Object(g.h)("span",{style:"font-size: 1.5em;"},o.icon||""," ",o.name),o.help&&Object(g.h)(e,null,Object(g.h)("br",null),Object(g.h)("small",null,o.help))))})))),a[n+"."+i.id]?Object(g.h)("div",{class:"valid-feedback",style:"display: block;"},Object(g.h)(k.c,{id:"workouts.changes-saved"},"Endringene er lagret")):Object(g.h)("small",{id:n+"Help",class:"form-text text-muted"},c))},o}(g.Component))||h,M=Object(j.a)(b=function(e){function t(){return e.apply(this,arguments)||this}n(t,e);var o=t.prototype;return o.toggleEquipment=function(e){var t=this.props,o=t.workout,s=t.type,a=t.field,i=t.updateField,n=t.isNew,r=Object(v.i)(o[a]);i({id:o.id,field:a,value:r=r===e?null:e,type:s,isNew:n})},o.render=function(){var e=this,t=this.props.stores.userStore,o=t.equipments,s=t.user.language,a=this.props,i=a.saved,n=a.workout,r=a.field,l=a.title,c=a.icon,d=a.help,u=Object(v.i)(n[r]);return Object(g.h)("div",{class:"form-group  mb-1 pb-1 border-bottom "+(i[r+"."+n.id]?"is-valid":"")},Object(g.h)("label",{for:r+"Input"},c&&Object(g.h)("i",{class:c+" text-muted"})," ",l),Object(g.h)("div",{class:"container-fluid px-0"},Object(g.h)("div",{class:"row"},Object(g.h)("div",{class:"w-100 overflow-hidden"},Object(g.h)("div",{class:"d-flex flex-column",style:"overflow: auto; scroll-snap-type: x mandatory;"},o&&o.map((function(t){return Object(g.h)("div",{class:"col px-1 mb-1"},Object(g.h)("button",{class:"btn btn-block btn"+(u===t.id?"":"-outline")+"-success text-nowrap overflow-hidden",style:"text-overflow: ellipsis;",onClick:function(){return e.toggleEquipment(t.id)}},t.icon&&Object(g.h)("i",{class:t.icon})," ",s&&t.lang&&t.lang[s]?t.lang[s]:t.name))})))))),i[r+"."+n.id]?Object(g.h)("div",{class:"valid-feedback",style:"display: block;"},Object(g.h)(k.c,{id:"workouts.changes-saved"},"Endringene er lagret")):Object(g.h)("small",{id:r+"Help",class:"form-text text-muted"},d))},t}(g.Component))||b,U=Object(j.a)(f=function(e){function t(){return e.apply(this,arguments)||this}return n(t,e),t.prototype.render=function(){var e=this.props.stores,t=e.raceStore.getSignupByUserEmail(e.userStore.user.email);return t&&t.length>0?Object(g.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3"},Object(g.h)("div",{class:"alert alert-warning"},Object(g.h)("h5",null,Object(g.h)(k.c,{id:"races.race-in-progress"},"Løp pågår")),Object(g.h)("ul",null,t.map((function(e){return Object(g.h)("li",null,e.race.title)}))),Object(g.h)("i",{class:"fas fa-exclamation-triangle"})," ",Object(g.h)(k.c,{id:"races.choose-correct-team-and-type"},"Velg riktig team og type for løpet."))):""},t}(g.Component))||f,q=Object(j.a)(m=function(t){function o(e){var o;return(o=t.call(this,e)||this).loadAll=function(){return new Promise((function(e,t){return Promise.resolve(o.loadDogs()).then((function(){try{return Promise.resolve(o.loadWorkout()).then((function(){try{return o.props.stores.raceStore.loadRaceInProgress(),e()}catch(e){return t(e)}}),t)}catch(e){return t(e)}}),t)}))},o.loadWorkout=function(e){return new Promise((function(t,s){function a(){return t()}var i,n,r,l,c,d,u,p,h,b,f,m,g,j,v;return n=(i=o.props.stores).workoutStore,r=i.dogStore,c=x.a.getDays((l=i.userStore.user).language),u=void 0===(d=n.workouts)?[]:d,p=n.newWorkout,h=n.currentTeam,"new"===o.props.workout?(o.setState({createNew:!0}),Promise.resolve(n.load({query:{team:e||h},skipUpdate:1,limit:5,sort:"-createdDate"})).then(function(t){try{return f=h||l.team,(b=(u=t)[0])?(p.team||n.updateObjectKeyValue("newWorkout","team",f),n.updateObjectKeyValue("newWorkout","dogs",b.dogs||[]),n.updateObjectKeyValue("newWorkout","dogsLeft",b.dogsLeft||[]),n.updateObjectKeyValue("newWorkout","dogsRight",b.dogsRight||[]),n.updateObjectKeyValue("newWorkout","mushers",b.mushers),n.updateObjectKeyValue("newWorkout","type",b.type),n.updateObjectKeyValue("newWorkout","equipment",b.equipment),n.updateObjectKeyValue("newWorkout","duration",b.duration),n.updateObjectKeyValue("newWorkout","duration-hours",Math.floor(b.duration/3600)),n.updateObjectKeyValue("newWorkout","duration-minutes",Math.floor(b.duration%3600/60)),n.updateObjectKeyValue("newWorkout","rest",b.rest||0),n.updateObjectKeyValue("newWorkout","rest-hours",Math.floor(b.rest/3600)||0),n.updateObjectKeyValue("newWorkout","rest-minutes",Math.floor(b.rest%3600/60)||0),n.updateObjectKeyValue("newWorkout","rating",b.rating||3),n.updateObjectKeyValue("newWorkout","sledWeight",b.sledWeight),p["updated-date"]||n.updateObjectKeyValue("newWorkout","date",O.a.isoDate(b.date,!1,!1,!0)),p["updated-time"]||n.updateObjectKeyValue("newWorkout","time",O.a.isoTime(b.date)),n.updateObjectKeyValue("newWorkout","hintTeam",b.team),n.updateObjectKeyValue("newWorkout","hintType",b.type),n.updateObjectKeyValue("newWorkout","hintTrack",b.track),n.updateObjectKeyValue("newWorkout","hintIntensity",b.intensity),m=u.map((function(e){return e.track})),o.setState({lastUsedTracks:m}),i.call(this)):(g=new Date,j=c[g.getDay()],Promise.resolve(r.load({query:{team:e||h},skipUpdate:1})).then(function(e){try{return v=e,p.team||n.updateObjectKeyValue("newWorkout","team",f),n.updateObjectKeyValue("newWorkout","dogs",v.map((function(e){return e.id}))||[]),n.updateObjectKeyValue("newWorkout","dogsLeft",[]),n.updateObjectKeyValue("newWorkout","dogsRight",[]),n.updateObjectKeyValue("newWorkout","mushers",[l.id]),n.updateObjectKeyValue("newWorkout","name",O.a.ucfirst(j+" - Tur med hundene")),n.updateObjectKeyValue("newWorkout","type",1),n.updateObjectKeyValue("newWorkout","equipment",2),n.updateObjectKeyValue("newWorkout","duration",3600),n.updateObjectKeyValue("newWorkout","rest",0),n.updateObjectKeyValue("newWorkout","rating",3),n.updateObjectKeyValue("newWorkout","date",O.a.isoDate(void 0,!1,!1,!0)),n.updateObjectKeyValue("newWorkout","time",O.a.isoTime()),i.call(this)}catch(e){return s(e)}}.bind(this),s));function i(){return n.updateObjectKeyValue("newWorkout","temperature",-1),a.call(this)}}catch(e){return s(e)}}.bind(this),s)):(n.load(o.props.workout),a.call(this))}))},o.loadDogs=function(){return new Promise((function(e,t){return o.setState({isLoading:!0}),Promise.resolve(o.props.stores.dogStore.load({query:{deceased:0},addData:["workoutSummary"]})).then((function(){try{return o.setState({isLoading:!1}),e()}catch(e){return t(e)}}),t)}))},o.insertWorkout=function(){return new Promise((function(e,t){var s,i,n,r;return i=(s=o.props.stores).workoutStore,n=s.userStore,Promise.resolve(i.insert(a({},i.newWorkout))).then((function(s){try{return 422===(r=s).status?I.a.publish(I.b.STATUS_MESSAGE,{message:"Mangler tittel på treningsøkten",type:"warning",icon:"fas fa-exclamation-triangle"}):r.status>=500?I.a.publish(I.b.STATUS_MESSAGE,{message:r.message||r.error,type:"danger",icon:"fas fa-exclamation-triangle"}):(o.resetDog(),n.getInfo(),Object(w.route)("/workouts/"+r.data.id)),e()}catch(e){return t(e)}}),t)}))},o.updateField=function(e){var t=e.target.dataset,s=t.id,a=t.field,i=t.type,n=t.elementtype,r=t.isNew,l=e.target,c=l.value,d=l.min,u=l.max;"date"===l.type&&d&&u?c>=d&&c<=u&&o.updateFieldValue({id:parseInt(s,10),field:a,value:c,type:i,elementtype:n,isNew:r}):o.updateFieldValue({id:parseInt(s,10),field:a,value:c,type:i,elementtype:n,isNew:r})},o.updateFieldValue=function(e){return new Promise((function(t,s){function a(){function e(){return t()}return"gpx"===n&&g&&O.a.checkNested(g,"gpx","gpxInfo")?(v=(j=g.gpx.gpxInfo).totalDistance,y=j.maxSpeed,w=j.avgSpeed,k=j.ascent,x=j.decent,D=j.rest,F=j.startLatlng,S=j.endLatlng,T={},(I=j.duration)&&(b.updateField(i,"duration",I),T.duration=I),D&&(b.updateField(i,"rest",D),T.rest=D),v&&(b.updateField(i,"distanceKm",O.a.roundTo(v,10)),T.distanceKm=O.a.roundTo(v,10)),y&&(b.updateField(i,"speedmax",O.a.roundTo(y,10)),T.speedmax=O.a.roundTo(y,10)),w&&(b.updateField(i,"speedAvg",O.a.roundTo(w,10)),T.speedAvg=O.a.roundTo(w,10)),k&&(b.updateField(i,"elevation",k),T.elevation=k),x&&(b.updateField(i,"decent",x),T.decent=x),F&&(b.updateField(i,"startLatlng",F),T.startLatlng=F),S&&(b.updateField(i,"endLatlng",S),T.endLatlng=S),Promise.resolve(b.save(T,g.id)).then(function(){try{return e.call(this)}catch(e){return s(e)}}.bind(this),s)):e.call(this)}var i,n,r,l,c,d,u,p,h,b,f,m,g,j,v,y,w,k,x,I,D,F,S,T;if(i=e.id,l=e.datatype,c=e.elementtype,e.type,u=void 0!==(d=e.isNew)&&d,h=void 0!==(p=e.skipTimer)&&p,f=r=e.value,m=r,g=(b=o.props.stores.workoutStore).workout,"images"===(n=e.field)&&Array.isArray(g.images)&&Array.isArray(r)&&(m=[].concat(g.images,r)),"array"!==l||Array.isArray(r)||(f="number"===c?r.split(",").map((function(e){return parseFloat(e)||e})):r.split(",")),u)return b.updateObjectKeyValue("newWorkout",n,r),a.call(this);{return b.updateField(i,n,m),h?Promise.resolve(o.doUpdateField(i,n,f)).then(function(){try{return V.call(this)}catch(e){return s(e)}}.bind(this),s):(clearTimeout(o.updateTimer[n]),o.updateTimer[n]=setTimeout((function(){return new Promise((function(e){return o.doUpdateField(i,n,f),e()}))}),500),V.call(this));function V(){return a.call(this)}}}))},o.dogFilter=function(e){var t=o.props.stores.workoutStore.workout;return!(!t||!t.dogs)&&(e.team===t.team||t.dogs.indexOf(e.id)>-1)},o.back=function(){o.props.stores.history.goBack()},o.getYrWeather=function(){return new Promise((function(e,t){var s,a,i,n,r,l,c,d,u,p,h,b,f,m,g,j,y;return s=o.state.createNew,n=(a=o.props.stores).userStore,c=(i=a.workoutStore).newWorkout,d=x.a.getFirstPoint(l=void 0===(r=i.workout)?{}:r),u=x.a.getMidPoint(l,.5),Promise.resolve(n.getWeather({lat:d[0],lon:d[1],altitude:d[2]})).then((function(a){try{return p=a,Promise.resolve(n.getWeather({lat:u[0],lon:u[1],altitude:u[2]})).then((function(a){try{return h=a,s?(o.updateFieldValue({id:c.id,field:"yr",value:p,isNew:!0,skipTimer:!1}),o.updateFieldValue({id:c.id,field:"yrMid",value:h,isNew:!0,skipTimer:!1}),O.a.checkNested(c,"yr","0","instant","details")&&!c.weather&&("",f=Object(v.i)(c.yr[0].instant.details),b="Yr.no: 🌡️ "+f.air_temperature+"°C, 💨 "+f.wind_speed+"m/s 🧭 "+x.a.windDirection(f.wind_from_direction)+", ☁️ "+f.cloud_area_fraction+"%, "+f.air_pressure_at_sea_level+"mb, 💦 "+f.relative_humidity+"%",o.updateFieldValue({id:c.id,field:"weather",value:b,isNew:!0,skipTimer:!1}),c.temperature||o.updateFieldValue({id:c.id,field:"temperature",value:f.air_temperature,isNew:!0,skipTimer:!1}))):(o.updateFieldValue({id:l.id,field:"yr",value:p,isNew:!1,skipTimer:!1}),o.updateFieldValue({id:l.id,field:"yrMid",value:h,isNew:!1,skipTimer:!1}),O.a.checkNested(l,"yr","0","instant","details")&&(m="",g=Object(v.i)(l.yr[0].instant.details),j=O.a.isoDate(l.yr[0].date,!1,!1,!0),y=O.a.isoDate(l.date,!1,!1,!0),j!==y||l.weather&&""!==l.weather||(m="Yr.no: 🌡️ "+g.air_temperature+"°C, 💨 "+g.wind_speed+"m/s 🧭 "+x.a.windDirection(g.wind_from_direction)+", ☁️ "+g.cloud_area_fraction+"%, "+g.air_pressure_at_sea_level+"mb, 💦 "+g.relative_humidity+"%",o.updateFieldValue({id:l.id,field:"weather",value:m,isNew:!1,skipTimer:!1}),l.temperature||o.updateFieldValue({id:l.id,field:"temperature",value:g.air_temperature,isNew:!0,skipTimer:!1})))),e()}catch(e){return t(e)}}),t)}catch(e){return t(e)}}),t)}))},o.chooseSubmenu=function(e){o.setState({submenu:e.target.parentElement.dataset.menu||e.target.dataset.menu})},o.toggleAdminDebug=function(){o.setState({showAdminDebug:!o.state.showAdminDebug})},o.state=a(a({},H),{},{submenu:e.submenu||"info"}),o.updateTimer={},o}n(o,t);var s=o.prototype;return s.resetDog=function(){this.props.stores.workoutStore.updateKeyValue("newWorkout",{})},s.doUpdateField=function(e,t,o){return new Promise(function(s,a){function i(){return s()}return e&&t?Promise.resolve(this.props.stores.workoutStore.saveField(e,t,o)).then(function(){try{return i.call(this)}catch(e){return a(e)}}.bind(this),a):i.call(this)}.bind(this))},s.componentDidMount=function(){this.loadAll()},s.render=function(){var t=this.state,o=t.createNew,s=t.lastUsedTracks,a=t.submenu,i=t.showAdminDebug,n=void 0===i||i,r=this.props.stores,l=r.workoutStore,c=r.userStore,d=r.raceStore,u=r.appState.viewmode,p=c.isAdmin,h=c.user,b=l.insertStatus,f=l.saved,m=l.workout,j=void 0===m?{}:m,v=l.newWorkout,y=void 0===v?{}:v,w=c.findTeam(j.team||l.currentTeam,!0),I=d.getSignupByUserEmail(h.email).map((function(e){return parseInt(e.musher.team,10)})),D=j.name,T=j.gpxInfo,H=void 0===T?{}:T,q=j.gpx,z=void 0===q?{gpxInfo:{}}:q,Y=!1;return Y=o?[6,8].indexOf(y.type)>-1:[6,8].indexOf(j.type)>-1,o?Object(g.h)("div",{class:"container-fluid",style:"margin-bottom: "+C+"; margin-top: "+P+";"},Object(g.h)("button",{class:"btn btn-link float-left pl-0 fixed-top text-primary",style:"top: "+N+"; left: 5px; font-size: 35px; width: 45px;",onClick:this.back},Object(g.h)("i",{class:"fas fa-arrow-circle-left"})),Object(g.h)("div",{class:"row"},Object(g.h)(U,{stores:this.props.stores}),Object(g.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3",style:"padding-left: 35px;"},Object(g.h)("div",null,Object(g.h)("h5",null,Object(g.h)(k.c,{id:"workouts.add-new"},"Legg til ny treningstur")))),Object(g.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 my-3"},Object(g.h)("div",{class:"row"},Object(g.h)("div",{class:"w-100 overflow-hidden"},Object(g.h)("div",{class:"d-flex flex-row flex-nowrap pb-2 px-1",style:"overflow: auto; scroll-snap-type: x mandatory;"},Object(g.h)("div",{class:"col px-0 pt-2"},Object(g.h)("button",{class:"btn btn-block rounded-pill-left rounded-none "+("info"===a?"btn-primary":"btn-outline-primary")+" text-nowrap",style:"text-overflow: ellipsis; overflow: hidden;","data-menu":"info",onClick:this.chooseSubmenu},Object(g.h)("i",{class:"fas fa-info-circle"})," ",Object(g.h)(k.c,{id:"workouts.info"},"Info")),"info"===a&&Object(g.h)(V.a,{horizontal:"center",vertical:"end"})),Object(g.h)("div",{class:"col px-0 pt-2"},Object(g.h)("button",{class:"btn btn-block rounded-none "+("team"===a?"btn-primary":"btn-outline-primary")+" text-nowrap",style:"text-overflow: ellipsis; overflow: hidden;","data-menu":"team",onClick:this.chooseSubmenu},Object(g.h)("i",{class:"fas fa-users"})," ",Object(g.h)(k.c,{id:"workouts.team"},"Team")),"team"===a&&Object(g.h)(V.a,{horizontal:"center",vertical:"end"})),Object(g.h)("div",{class:"col px-0 pt-2"},Object(g.h)("button",{class:"btn btn-block rounded-none "+("user"===a?"btn-primary":"btn-outline-primary")+" text-nowrap",style:"text-overflow: ellipsis; overflow: hidden;","data-menu":"user",onClick:this.chooseSubmenu},Object(g.h)("i",{class:"fas fa-user"})," ",Object(g.h)(k.c,{id:"workouts.user"},"Musher")),"user"===a&&Object(g.h)(V.a,{horizontal:"center",vertical:"end"})),Object(g.h)("div",{class:"col px-0 pt-2"},Object(g.h)("button",{class:"btn btn-block rounded-none "+("images"===a?"btn-primary":"btn-outline-primary")+" text-nowrap",style:"text-overflow: ellipsis; overflow: hidden;","data-menu":"images",onClick:this.chooseSubmenu},Object(g.h)("i",{class:"fas fa-images"})," ",Object(g.h)(k.c,{id:"workouts.images"},"Bilder")),"images"===a&&Object(g.h)(V.a,{horizontal:"center",vertical:"end"})),Object(g.h)("div",{class:"col px-0 pt-2"},Object(g.h)("button",{class:"btn btn-block rounded-none "+("gps"===a?"btn-primary":"btn-outline-primary")+" text-nowrap",style:"text-overflow: ellipsis; overflow: hidden;","data-menu":"gps",onClick:this.chooseSubmenu},Object(g.h)("i",{class:"fas fa-map-marker-alt"})," ",Object(g.h)(k.c,{id:"workouts.gps"},"GPS")),"gps"===a&&Object(g.h)(V.a,{horizontal:"center",vertical:"end"})),Object(g.h)("div",{class:"col px-0 pt-2"},Object(g.h)("button",{class:"btn btn-block rounded-none "+("equipment"===a?"btn-primary":"btn-outline-primary")+" text-nowrap",style:"text-overflow: ellipsis; overflow: hidden;","data-menu":"equipment",onClick:this.chooseSubmenu},Object(g.h)("i",{class:"fas fa-sleigh"})," ",Object(g.h)(k.c,{id:"workouts.equipment"},"Equipment")),"equipment"===a&&Object(g.h)(V.a,{horizontal:"center",vertical:"end"})),Object(g.h)("div",{class:"col px-0 pt-2"},Object(g.h)("button",{class:"btn btn-block rounded-pill-right rounded-none "+("advanced"===a?"btn-primary":"btn-outline-primary")+" text-nowrap",style:"text-overflow: ellipsis; overflow: hidden;","data-menu":"advanced",onClick:this.chooseSubmenu},Object(g.h)("i",{class:"fas fa-cogs"})," ",Object(g.h)(k.c,{id:"workouts.advanced"},"advanced")),"advanced"===a&&Object(g.h)(V.a,{horizontal:"center",vertical:"end"})))))),"info"===a&&Object(g.h)(e,null,["beta","advanced","normal"].indexOf(u)>-1&&Object(g.h)(e,null,Object(g.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 my-3"},Object(g.h)(A,{stores:this.props.stores,isNew:1,saved:f,workout:y,type:"number",field:"type",icon:"fas fa-running",title:Object(g.h)(k.c,{id:"workouts.type"},"Type tur"),help:Object(g.h)(k.c,{id:"workouts.type-help"},"Type treningstur. 'trening', 'konkurranse', 'tur'."),updateField:this.updateFieldValue}))),Object(g.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 my-3"},Object(g.h)(K,{stores:this.props.stores,field:"name",icon:"fas fa-heading",title:Object(g.h)(k.c,{id:"workouts.title"},"Tittel"),help:Object(g.h)(k.c,{id:"workouts.title-help"},"Tittel på denne turen. 'Fin høsttur i øsende regn...'")})),Object(g.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 my-3"},Object(g.h)(K,{stores:this.props.stores,field:"comment",type:"textarea",title:Object(g.h)(k.c,{id:"workouts.comment"},"Kommentar"),help:Object(g.h)(k.c,{id:"workouts.comment-help"},"Kommentar til turen. Hvordan gikk det?")})),w&&w.public>0&&Object(g.h)(e,null,Object(g.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 my-3"},Object(g.h)(K,{stores:this.props.stores,field:"private",icon:"fas fa-eye",type:"toggle",title:Object(g.h)(k.c,{id:"workouts.private"},"Skjul treningsturen"),help:Object(g.h)(k.c,{id:"workouts.private-help"},"Skal denne turen være skjult for de som følger teamet ditt?")}))),Object(g.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 my-3"},Object(g.h)(K,{stores:this.props.stores,field:"date",icon:"fas fa-calendar",type:"date",min:"2010-01-01",max:"today",title:Object(g.h)(k.c,{id:"workouts.date"},"Dato"),help:Object(g.h)(k.c,{id:"workouts.date-help"},"Dato for turen. Format på dato er: 'YYYY-MM-DD'.")})),Object(g.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 my-3"},Object(g.h)(K,{stores:this.props.stores,field:"time",icon:"fas fa-clock",type:"time",title:Object(g.h)(k.c,{id:"workouts.time"},"Klokka"),help:Object(g.h)(k.c,{id:"workouts.time-help"},"Klokkeslett for turen. Format: 'HH:MI'.")})),Object(g.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 my-3"},Object(g.h)(K,{stores:this.props.stores,field:"duration",type:"duration",icon:"fas fa-stopwatch",title:Object(g.h)(k.c,{id:"workouts.duration"},"Varighet på treningen"),help:Object(g.h)(k.c,{id:"workouts.duration-help"},"Hvor lenge var du ute? (HH:MI)")})),Object(g.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 my-3"},Object(g.h)(K,{stores:this.props.stores,field:"rest",type:"duration",icon:"fas fa-stopwatch",title:Object(g.h)(k.c,{id:"workouts.rest"},"Hviletid på treningen"),help:Object(g.h)(k.c,{id:"workouts.rest-help"},"Hvor lenge stod du stille? (HH:MI)")})),Object(g.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 my-3"},["beta","advanced","normal"].indexOf(u)>-1&&Object(g.h)(e,null,Object(g.h)(K,{stores:this.props.stores,field:"speedAvg",rightValue:O.a.format(x.a.speedAvg({duration:y.duration,rest:y.rest,distanceKm:y.distanceKm}),1,"."," ")+" km/t",rightValueReal:x.a.speedAvg({duration:y.duration,rest:y.rest,distanceKm:y.distanceKm}),updateField:this.updateFieldValue,icon:"fas fa-tachometer-alt",type:"number",min:"0",max:"100",step:"0.1",title:Object(g.h)(k.c,{id:"workouts.avg-speed"},"Gjennomsnittsfart"),help:Object(g.h)(k.c,{id:"workouts.avg-speed-help"},"Gjennomsnittsfart når du var i bevegelse. Dersom du ikke vet dette så legger du bare inn distanse og varighet så blir dette regnet ut.")}))),Object(g.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 my-3"},Object(g.h)("div",{class:"row px-0"},Object(g.h)("div",{class:"col-6"},Object(g.h)(K,{stores:this.props.stores,field:"distanceKm",icon:"fas fa-road",title:Object(g.h)(k.c,{id:"workouts.distance"},"Distanse i km"),type:"number",min:"0",max:"300",step:"1",help:Object(g.h)(k.c,{id:"workouts.distance-help"},"Hvor lang var turen i km.")})),Object(g.h)("div",{class:"col-6"},Object(g.h)(K,{stores:this.props.stores,field:"elevation",icon:"fas fa-mountain",title:Object(g.h)(k.c,{id:"workouts.ascend"},"Høydemeter"),type:"number",min:"0",max:"3000",step:"1",help:Object(g.h)(k.c,{id:"workouts.ascend-help"},"Høydemeter du klatret på denne turen.")}))))),"team"===a&&Object(g.h)(e,null,Object(g.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 my-3"},Object(g.h)(W,{stores:this.props.stores,isNew:1,saved:f,workout:y,type:"number",field:"team",icon:"fas fa-users",title:Object(g.h)(k.c,{id:"workouts.team"},"Team"),help:Object(g.h)(k.c,{id:"workouts.team-help"},"Teamet som er på tur."),updateField:this.updateFieldValue,selectTeam:this.loadWorkout,highlight:I})),Object(g.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 my-3"},Object(g.h)(F.a,{stores:this.props.stores,isNew:1,saved:f,object:y,type:"array",icon:"fas fa-dog",elementtype:"number",field:"dogs",title:Object(g.h)(k.c,{id:"workouts.dogs"},"Hunder"),help:Object(g.h)(k.c,{id:"workouts.dogs-help"},"Hvilke hunder var med på turen."),updateField:this.updateFieldValue,filter:function(e){return e.team===y.team||y.dogs&&y.dogs.indexOf(e.id)>-1},showPositions:!Y&&["beta","advanced","normal"].indexOf(u)>-1,currentTeam:w,key:"dogs-"+O.a.getNestedValue(w,"id")}))),"user"===a&&Object(g.h)(e,null,Object(g.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 my-3"},Object(g.h)(E,{stores:this.props.stores,isNew:1,saved:f,workout:y,type:"array",elementtype:"number",field:"mushers",icon:"fas fa-user",title:Object(g.h)(k.c,{id:"workouts.mushers"},"Kjørere"),help:Object(g.h)(k.c,{id:"workouts.mushers-help"},"Hvem av kjørerne var med på turen."),updateField:this.updateFieldValue}))),"images"===a&&Object(g.h)(e,null,Object(g.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 my-3"},Object(g.h)("div",{class:"text-center text-muted"},Object(g.h)("div",{class:"display-1"},Object(g.h)("i",{class:"fas fa-images"})),Object(g.h)(k.c,{id:"workouts.save-to-add-images"},"Please save workout and then go into edit mode to add images.")))),"gps"===a&&Object(g.h)(e,null,Object(g.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 my-3"},Object(g.h)("div",{class:"text-center text-muted mb-3"},Object(g.h)("div",{class:"display-1"},Object(g.h)("i",{class:"fas fa-map-marker-alt"})),Object(g.h)(k.c,{id:"workouts.save-to-add-gpx"},"Please save workout and then you will be able to upload a GPX-file if you like.")),Object(g.h)(_,{stores:this.props.stores,isNew:1,saved:f,workout:y,type:"number",field:"track",icon:"fas fa-map-marked",title:Object(g.h)(k.c,{id:"workouts.track"},"Runde"),help:Object(g.h)(k.c,{id:"workouts.track-help"},"Hvilken treningsrunde er dette."),updateField:this.updateFieldValue,filter:function(e){return e.id===y.track||s&&s.indexOf(e.id)>-1}}))),"equipment"===a&&Object(g.h)(e,null,Object(g.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 my-3"},Object(g.h)(M,{stores:this.props.stores,isNew:1,saved:f,workout:y,type:"number",field:"equipment",icon:"fas fa-sleigh",title:Object(g.h)(k.c,{id:"workouts.equipment"},"Utstyr"),help:Object(g.h)(k.c,{id:"workouts.equipment-help"},"Utstyr som ble brukt. 'trollvogn', 'atv', 'slede'."),updateField:this.updateFieldValue})),Object(g.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 my-3"},Object(g.h)(K,{stores:this.props.stores,isNew:1,saved:f,workout:y,type:"number",field:"sledWeight",icon:"fas fa-sleigh",title:Object(g.h)(k.c,{id:"workouts.sledWeight"},"Sledevekt"),help:Object(g.h)(k.c,{id:"workouts.sledWeight-help"},"Vekt på sleden denne turen."),updateField:this.updateFieldValue}))),"advanced"===a&&Object(g.h)(e,null,["beta","advanced","normal"].indexOf(u)>-1&&Object(g.h)(e,null,Object(g.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 my-3"},Object(g.h)(K,{stores:this.props.stores,field:"weather",icon:"fas fa-cloud-sun-rain",title:Object(g.h)(k.c,{id:"workouts.weather"},"Været på turen"),help:Object(g.h)(k.c,{id:"workouts.weather-help"},"Hvordan var været.")})),Object(g.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 my-3"},Object(g.h)(K,{stores:this.props.stores,field:"temperature",icon:"fas fa-temperature-low",title:Object(g.h)(k.c,{id:"workouts.temperature"},"Temperatur"),type:"number",min:"-40",max:"20",step:"0.5",help:Object(g.h)(k.c,{id:"workouts.temperature-help"},"Hvilken temperatur var det.")}))),["beta","advanced","normal"].indexOf(u)>-1&&Object(g.h)(e,null,Object(g.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 my-3"},Object(g.h)(K,{stores:this.props.stores,field:"rating",icon:"fas fa-dice",title:Object(g.h)(k.c,{id:"workouts.rating"},"Rating av turen"),type:"number",min:"0",max:"6",step:"1",help:Object(g.h)(k.c,{id:"workouts.rating-help"},"Din rating av turen. 1-6")})),Object(g.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 my-3"},Object(g.h)(R,{stores:this.props.stores,isNew:1,saved:f,workout:y,type:"number",field:"intensity",icon:"fas fa-dumbbell",title:Object(g.h)(k.c,{id:"workouts.intensity"},"Intensitet"),help:Object(g.h)(k.c,{id:"workouts.intensity-help"},"Hvor stor belastning var denne turen?"),updateField:this.updateFieldValue})))),Object(g.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 my-3"},Object(g.h)("div",{class:"form-group mb-1 pb-1 border-bottom"},Object(g.h)("button",{type:"button",class:"btn btn-block btn-primary",onClick:this.insertWorkout},Object(g.h)(k.c,{id:"workouts.add-save-new"},"Lagre treningstur"))))),b&&Object(g.h)("div",{class:"alert alert-success mt-4 col-12",role:"alert"},Object(g.h)(k.c,{id:"workouts.workout-saved"},"Treningen er lagret."))):Object(g.h)("div",{class:"container-fluid",style:"margin-bottom: "+C+"; margin-top: "+P+";"},Object(g.h)("button",{class:"btn btn-link float-left pl-0 fixed-top",style:"top: "+N+"; left: 5px; font-size: 35px; width: 45px;",onClick:this.back},Object(g.h)("i",{class:"fas fa-arrow-circle-left"})),Object(g.h)("div",{class:"row"},Object(g.h)(U,{stores:this.props.stores}),Object(g.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3",style:"padding-left: 35px;"},Object(g.h)("div",null,Object(g.h)("h5",null,Object(g.h)(k.c,{id:"workouts.edit-workout"},"Endre trening"),": ",D,1===j.isLocked&&Object(g.h)("i",{class:"fas fa-lock text-danger ml-3"})))),Object(g.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 my-3"},Object(g.h)("div",{class:"row"},Object(g.h)("div",{class:"w-100 overflow-hidden"},Object(g.h)("div",{class:"d-flex flex-row flex-nowrap pb-2 px-1",style:"overflow: auto; scroll-snap-type: x mandatory;"},Object(g.h)("div",{class:"col px-0 pt-2"},Object(g.h)("button",{class:"btn btn-block rounded-pill-left rounded-none "+("info"===a?"btn-primary":"btn-outline-primary")+" text-nowrap",style:"text-overflow: ellipsis; overflow: hidden;","data-menu":"info",onClick:this.chooseSubmenu},Object(g.h)("i",{class:"fas fa-info-circle"})," ",Object(g.h)(k.c,{id:"workouts.info"},"Info"))),Object(g.h)("div",{class:"col px-0 pt-2"},Object(g.h)("button",{class:"btn btn-block rounded-none "+("team"===a?"btn-primary":"btn-outline-primary")+" text-nowrap",style:"text-overflow: ellipsis; overflow: hidden;","data-menu":"team",onClick:this.chooseSubmenu},Object(g.h)("i",{class:"fas fa-users"})," ",Object(g.h)(k.c,{id:"workouts.team"},"Team"))),Object(g.h)("div",{class:"col px-0 pt-2"},Object(g.h)("button",{class:"btn btn-block rounded-none "+("user"===a?"btn-primary":"btn-outline-primary")+" text-nowrap",style:"text-overflow: ellipsis; overflow: hidden;","data-menu":"user",onClick:this.chooseSubmenu},Object(g.h)("i",{class:"fas fa-user"})," ",Object(g.h)(k.c,{id:"workouts.user"},"Musher"))),Object(g.h)("div",{class:"col px-0 pt-2"},Object(g.h)("button",{class:"btn btn-block rounded-none "+("images"===a?"btn-primary":"btn-outline-primary")+" text-nowrap",style:"text-overflow: ellipsis; overflow: hidden;","data-menu":"images",onClick:this.chooseSubmenu},Object(g.h)("i",{class:"fas fa-images"})," ",Object(g.h)(k.c,{id:"workouts.images"},"Bilder"))),Object(g.h)("div",{class:"col px-0 pt-2"},Object(g.h)("button",{class:"btn btn-block rounded-none "+("gps"===a?"btn-primary":"btn-outline-primary")+" text-nowrap",style:"text-overflow: ellipsis; overflow: hidden;","data-menu":"gps",onClick:this.chooseSubmenu},Object(g.h)("i",{class:"fas fa-map-marker-alt"})," ",Object(g.h)(k.c,{id:"workouts.gps"},"GPS"))),Object(g.h)("div",{class:"col px-0 pt-2"},Object(g.h)("button",{class:"btn btn-block rounded-none "+("equipment"===a?"btn-primary":"btn-outline-primary")+" text-nowrap",style:"text-overflow: ellipsis; overflow: hidden;","data-menu":"equipment",onClick:this.chooseSubmenu},Object(g.h)("i",{class:"fas fa-sleigh"})," ",Object(g.h)(k.c,{id:"workouts.equipment"},"Equipment"))),Object(g.h)("div",{class:"col px-0 pt-2"},Object(g.h)("button",{class:"btn btn-block rounded-pill-right rounded-none "+("advanced"===a?"btn-primary":"btn-outline-primary")+" text-nowrap",style:"text-overflow: ellipsis; overflow: hidden;","data-menu":"advanced",onClick:this.chooseSubmenu},Object(g.h)("i",{class:"fas fa-cogs"})," ",Object(g.h)(k.c,{id:"workouts.advanced"},"advanced"))))))),"info"===a&&Object(g.h)(e,null,["beta","advanced","normal"].indexOf(u)>-1&&Object(g.h)(e,null,Object(g.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 my-3"},Object(g.h)(A,{stores:this.props.stores,saved:f,workout:j,type:"number",field:"type",icon:"fas fa-running",title:Object(g.h)(k.c,{id:"workouts.type"},"Type tur"),help:Object(g.h)(k.c,{id:"workouts.type-help"},"Type treningstur. 'trening', 'konkurranse', 'tur'."),updateField:this.updateFieldValue}))),Object(g.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 my-3"},Object(g.h)(L,{saved:f,workout:j,field:"name",icon:"fas fa-heading",title:Object(g.h)(k.c,{id:"workouts.title"},"Tittel"),help:Object(g.h)(k.c,{id:"workouts.title-help"},"Tittel på denne turen. 'Fin høsttur i øsende regn...'"),onInput:this.updateField,updateField:this.updateFieldValue})),Object(g.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 my-3"},Object(g.h)(L,{saved:f,workout:j,field:"comment",type:"textarea",title:Object(g.h)(k.c,{id:"workouts.comment"},"Kommentar"),help:Object(g.h)(k.c,{id:"workouts.comment-help"},"Kommentar til turen. Hvordan gikk det?"),onInput:this.updateField,updateField:this.updateFieldValue})),Object(g.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 my-3"},w&&w.public>0&&Object(g.h)(L,{stores:this.props.stores,saved:f,workout:j,field:"private",icon:"fas fa-eye",type:"toggle",title:Object(g.h)(k.c,{id:"workouts.private"},"Skjul treningsturen"),help:Object(g.h)(k.c,{id:"workouts.private-help"},"Skal denne turen være skjult for de som følger teamet ditt?"),onInput:this.updateField,updateField:this.updateFieldValue})),Object(g.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 my-3"},Object(g.h)(L,{stores:this.props.stores,saved:f,workout:j,field:"date",icon:"fas fa-calendar",type:"date",min:"2010-01-01",max:"today",title:Object(g.h)(k.c,{id:"workouts.date"},"Dato"),help:Object(g.h)(k.c,{id:"workouts.date-help"},"Dato for turen. Format på dato er: 'YYYY-MM-DD'."),onInput:this.updateField,updateField:this.updateFieldValue}),n&&Object(g.h)("div",{onClick:this.toggleAdminDebug},p&&H.minEpoch>0&&Object(g.h)("small",{class:"text-danger",style:"line-height: 0.8em;"},"gpxInfo.minEpoch: ",O.a.isoDate(H.minEpoch,!0,!0)," ",Object(g.h)("br",null)),p&&z.gpxInfo&&z.gpxInfo.startTime>0&&Object(g.h)("small",{class:"text-danger",style:"line-height: 0.8em;"},"gpx.gpxInfo.startTime ",O.a.isoDate(z.gpxInfo.startTime,!0,!0)," ",Object(g.h)("br",null)))),Object(g.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 my-3"},Object(g.h)(L,{stores:this.props.stores,saved:f,workout:j,field:"time",icon:"fas fa-clock",type:"time",title:Object(g.h)(k.c,{id:"workouts.time"},"Klokka"),help:Object(g.h)(k.c,{id:"workouts.time-help"},"Klokkeslett for turen. Format: 'HH:MI'."),onInput:this.updateField,updateField:this.updateFieldValue})),Object(g.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 my-3"},Object(g.h)(L,{saved:f,workout:j,field:"duration",type:"duration",icon:"fas fa-stopwatch",title:Object(g.h)(k.c,{id:"workouts.duration"},"Varighet på treningen"),help:Object(g.h)(k.c,{id:"workouts.duration-help"},"Hvor lenge var du ute? (HH:MI)"),onInput:this.updateField,updateField:this.updateFieldValue}),n&&Object(g.h)("div",{onClick:this.toggleAdminDebug},p&&H.minEpoch>0&&H.maxEpoch>0&&Object(g.h)("small",{class:"text-danger",style:"line-height: 0.8em;"},"gpxInfo.maxEpoch-minEpoch: ",O.a.secToHms(H.maxEpoch-H.minEpoch)," ",Object(g.h)("br",null)),p&&H.duration>0&&Object(g.h)("small",{class:"text-danger",style:"line-height: 0.8em;"},"gpxInfo.duration: ",O.a.secToHms(H.duration)," ",Object(g.h)("br",null)),p&&z.gpxInfo&&z.gpxInfo.endTime>0&&z.gpxInfo.startTime>0&&Object(g.h)("small",{class:"text-danger",style:"line-height: 0.8em;"},"gpx.gpxInfo.endTime-startTime: ",O.a.secToHms((z.gpxInfo.endTime-z.gpxInfo.startTime)/1e3)," ",Object(g.h)("br",null)),p&&z.gpxInfo&&z.gpxInfo.duration>0&&Object(g.h)("small",{class:"text-danger",style:"line-height: 0.8em;"},"gpx.gpxInfo.duration: ",O.a.secToHms(z.gpxInfo.duration)," ",Object(g.h)("br",null)))),Object(g.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 my-3"},Object(g.h)(L,{saved:f,workout:j,field:"rest",type:"duration",icon:"fas fa-stopwatch",title:Object(g.h)(k.c,{id:"workouts.rest"},"Hviletid på treningen"),help:Object(g.h)(k.c,{id:"workouts.rest-help"},"Hvor lenge stod du stille? (HH:MI)"),onInput:this.updateField,updateField:this.updateFieldValue}),n&&Object(g.h)("div",{onClick:this.toggleAdminDebug},p&&H.minEpoch>0&&H.maxEpoch>0&&Object(g.h)("small",{class:"text-danger",style:"line-height: 0.8em;"},"gpxInfo.maxEpoch-minEpoch: ",O.a.secToHms(H.rest)," ",Object(g.h)("br",null)),p&&H.rest>0&&Object(g.h)("small",{class:"text-danger",style:"line-height: 0.8em;"},"gpxInfo.rest: ",O.a.secToHms(H.rest)," ",Object(g.h)("br",null)),p&&z.gpxInfo&&z.gpxInfo.rest>0&&Object(g.h)("small",{class:"text-danger",style:"line-height: 0.8em;"},"gpx.gpxInfo.rest: ",O.a.secToHms(z.gpxInfo.rest)," ",Object(g.h)("br",null)))),Object(g.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 my-3"},!Y&&Object(g.h)(e,null,["beta","advanced","normal"].indexOf(u)>-1&&Object(g.h)(e,null,Object(g.h)(L,{saved:f,workout:j,field:"speedAvg",rightValue:O.a.format(x.a.speedAvg({duration:j.duration,rest:j.rest,distanceKm:j.distanceKm}),1,"."," ")+" km/t",rightValueReal:x.a.speedAvg({duration:j.duration,rest:j.rest,distanceKm:j.distanceKm}),updateField:this.updateFieldValue,icon:"fas fa-tachometer-alt",title:Object(g.h)(k.c,{id:"workouts.avg-speed"},"Gjennomsnittsfart"),type:"number",min:"0",max:"100",step:"0.1",help:Object(g.h)(k.c,{id:"workouts.avg-speed-help"},"Gjennomsnittsfart når du var i bevegelse. Dersom du ikke vet dette så legger du bare inn distanse og varighet så blir dette regnet ut."),onInput:this.updateField}),n&&Object(g.h)("div",{onClick:this.toggleAdminDebug},p&&H.avgMovingSpeeds>0&&Object(g.h)("small",{class:"text-danger",style:"line-height: 0.8em;"},"gpxInfo.avgMovingSpeeds ",O.a.format(3.6*H.avgMovingSpeeds,2)," km/t ",Object(g.h)("br",null)),p&&H.avgGpsSpeed>0&&Object(g.h)("small",{class:"text-danger",style:"line-height: 0.8em;"},"gpxInfo.avgGpsSpeed ",O.a.format(3.6*H.avgGpsSpeed,2)," km/t ",Object(g.h)("br",null)),p&&H.avgGpsMovingSpeed>0&&Object(g.h)("small",{class:"text-danger",style:"line-height: 0.8em;"},"gpxInfo.avgGpsMovingSpeed ",O.a.format(3.6*H.avgGpsMovingSpeed,2)," km/t ",Object(g.h)("br",null)),p&&z.gpxInfo&&z.gpxInfo.avgSpeed>0&&Object(g.h)("small",{class:"text-danger",style:"line-height: 0.8em;"},"gpx.gpxInfo.avgSpeed ",O.a.format(3.6*z.gpxInfo.avgSpeed,2)," km/t ",Object(g.h)("br",null)))))),Object(g.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 my-3"},Object(g.h)("div",{class:"row px-0"},!Y&&Object(g.h)(e,null,Object(g.h)("div",{class:"col-6"},Object(g.h)(L,{saved:f,workout:j,field:"distanceKm",icon:"fas fa-road",title:Object(g.h)(k.c,{id:"workouts.distance"},"Distanse i km"),type:"number",min:"0",max:"300",step:"1",help:Object(g.h)(k.c,{id:"workouts.distance-help"},"Hvor lang var turen i km."),onInput:this.updateField,updateField:this.updateFieldValue}),n&&Object(g.h)("div",{onClick:this.toggleAdminDebug},p&&H.calculatedTotalDistance>0&&Object(g.h)("small",{class:"text-danger",style:"line-height: 0.8em;"},"gpxInfo.calculatedTotalDistance: ",O.a.format(H.calculatedTotalDistance,2)," km ",Object(g.h)("br",null)),p&&z.gpxInfo&&z.gpxInfo.totalDistance>0&&Object(g.h)("small",{class:"text-danger",style:"line-height: 0.8em;"},"gpx.gpxInfo.totalDistance: ",O.a.format(z.gpxInfo.totalDistance,2)," km ",Object(g.h)("br",null)))),Object(g.h)("div",{class:"col-6"},Object(g.h)(L,{saved:f,workout:j,field:"elevation",icon:"fas fa-mountain",title:Object(g.h)(k.c,{id:"workouts.ascend"},"Høydemeter"),type:"number",min:"0",max:"3000",step:"1",help:Object(g.h)(k.c,{id:"workouts.ascend-help"},"Høydemeter du klatret på denne turen."),onInput:this.updateField,updateField:this.updateFieldValue}),n&&Object(g.h)("div",{onClick:this.toggleAdminDebug},p&&H.calculatedAscend>0&&Object(g.h)("small",{class:"text-danger",style:"line-height: 0.8em;"},"gpxInfo.calculatedAscend: ",O.a.format(H.calculatedAscend,0)," m ",Object(g.h)("br",null)),p&&H.calculatedDescend>0&&Object(g.h)("small",{class:"text-danger",style:"line-height: 0.8em;"},"gpxInfo.calculatedDescend: ",O.a.format(H.calculatedDescend,0)," m ",Object(g.h)("br",null)),p&&z.gpxInfo&&z.gpxInfo.ascent>0&&Object(g.h)("small",{class:"text-danger",style:"line-height: 0.8em;"},"gpx.gpxInfo.ascent: ",O.a.format(z.gpxInfo.ascent,0)," m ",Object(g.h)("br",null)),p&&z.gpxInfo&&z.gpxInfo.descent>0&&Object(g.h)("small",{class:"text-danger",style:"line-height: 0.8em;"},"gpx.gpxInfo.descent: ",O.a.format(z.gpxInfo.descent,0)," m ",Object(g.h)("br",null)))))))),"team"===a&&Object(g.h)(e,null,Object(g.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 my-3"},Object(g.h)(W,{stores:this.props.stores,saved:f,workout:j,type:"number",field:"team",icon:"fas fa-users",title:Object(g.h)(k.c,{id:"workouts.team"},"Team"),help:Object(g.h)(k.c,{id:"workouts.team-help"},"Teamet som er på tur."),updateField:this.updateFieldValue,highlight:I})),Object(g.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 my-3"},Object(g.h)(F.a,{stores:this.props.stores,saved:f,object:j,type:"array",elementtype:"number",field:"dogs",icon:"fas fa-dog",title:Object(g.h)(k.c,{id:"workouts.dogs"},"Hunder"),help:Object(g.h)(k.c,{id:"workouts.dogs-help"},"Hvilke hunder var med på turen."),updateField:this.updateFieldValue,filter:this.dogFilter,showPositions:!Y&&["beta","advanced","normal"].indexOf(u)>-1,currentTeam:w}))),"user"===a&&Object(g.h)(e,null,Object(g.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 my-3"},Object(g.h)(E,{stores:this.props.stores,saved:f,workout:j,type:"array",elementtype:"number",field:"mushers",icon:"fas fa-user",title:Object(g.h)(k.c,{id:"workouts.mushers"},"Kjørere"),help:Object(g.h)(k.c,{id:"workouts.mushers-help"},"Hvem av kjørerne var med på turen."),updateField:this.updateFieldValue}))),"images"===a&&Object(g.h)(e,null,Object(g.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 my-3"},Object(g.h)(L,{saved:f,workout:j,field:"image",type:"image",stores:this.props.stores,title:Object(g.h)(k.c,{id:"workouts.photos"},"Bilder"),help:Object(g.h)(k.c,{id:"workouts.photos-help"},"Legg til bilde fra treningen."),onInput:this.updateField,updateField:this.updateFieldValue}))),"gps"===a&&Object(g.h)(e,null,Object(g.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 my-3"},z&&Object(g.h)("div",{style:"height: 300px;"},Object(g.h)(S.a,{stores:this.props.stores,mapId:j.id,geojson:z.geoJSON,gpxInfo:z.gpxInfo,height:300})),Object(g.h)(L,{saved:f,workout:j,field:"gpx",type:"file",title:Object(g.h)(k.c,{id:"workouts.gpx"},"Gpx"),help:Object(g.h)(k.c,{id:"workouts.gpx-help"},"Gpx til denne treningen."),onInput:this.updateField,updateField:this.updateFieldValue})),Object(g.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 my-3"},Object(g.h)(_,{stores:this.props.stores,saved:f,workout:j,type:"number",field:"track",icon:"fas fa-map-marked",title:Object(g.h)(k.c,{id:"workouts.track"},"Runde"),help:Object(g.h)(k.c,{id:"workouts.track-help"},"Hvilken treningsrunde er dette."),updateField:this.updateFieldValue,filter:function(e){return e.id===j.track}}))),"equipment"===a&&Object(g.h)(e,null,Object(g.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 my-3"},Object(g.h)(M,{stores:this.props.stores,saved:f,workout:j,type:"number",field:"equipment",icon:"fas fa-sleigh",title:Object(g.h)(k.c,{id:"workouts.equipment"},"Utstyr"),help:Object(g.h)(k.c,{id:"workouts.equipment-help"},"Utstyr som ble brukt. 'trollvogn', 'atv', 'slede'."),updateField:this.updateFieldValue})),Object(g.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 my-3"},Object(g.h)(L,{saved:f,workout:j,field:"sledWeight",type:"number",step:"1",icon:"fas fa-sleigh",title:Object(g.h)(k.c,{id:"workouts.sledWeight"},"Sledevekt"),help:Object(g.h)(k.c,{id:"workouts.sledWeight-help"},"Vekt på sleden denne turen."),onInput:this.updateField,updateField:this.updateFieldValue}))),"advanced"===a&&Object(g.h)(e,null,["beta","advanced","normal"].indexOf(u)>-1&&Object(g.h)(e,null,Object(g.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 my-3"},!O.a.checkNested(j,"yr","0","instant","details")&&Object(g.h)("button",{class:"btn btn-sm float-right btn-secondary",onClick:this.getYrWeather},Object(g.h)(k.c,{id:"workouts.fetch-weather"},"Hent fra yr")),Object(g.h)(L,{saved:f,workout:j,field:"weather",icon:"fas fa-cloud-sun-rain",title:Object(g.h)(k.c,{id:"workouts.weather"},"Været på turen"),help:Object(g.h)(k.c,{id:"workouts.weather-help"},"Hvordan var været."),onInput:this.updateField,updateField:this.updateFieldValue})),Object(g.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 my-3"},Object(g.h)(L,{saved:f,workout:j,field:"temperature",icon:"fas fa-temperature-low",title:Object(g.h)(k.c,{id:"workouts.temperature"},"Temperatur"),type:"number",min:"-40",max:"20",step:"0.5",help:Object(g.h)(k.c,{id:"workouts.temperature-help"},"Hvilken temperatur var det."),onInput:this.updateField,updateField:this.updateFieldValue}))),["beta","advanced","normal"].indexOf(u)>-1&&Object(g.h)(e,null,Object(g.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 my-3"},Object(g.h)(L,{saved:f,workout:j,field:"rating",type:"number",min:"0",max:"6",step:"1",icon:"fas fa-dice",title:Object(g.h)(k.c,{id:"workouts.rating"},"Rating av turen"),help:Object(g.h)(k.c,{id:"workouts.rating-help"},"Din rating av turen. 1-6"),onInput:this.updateField,updateField:this.updateFieldValue})),Object(g.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 my-3"},Object(g.h)(R,{stores:this.props.stores,saved:f,workout:j,type:"number",field:"intensity",icon:"fas fa-dumbbell",title:Object(g.h)(k.c,{id:"workouts.intensity"},"Intensitet"),help:Object(g.h)(k.c,{id:"workouts.intensity-help"},"Hvor stor belastning var denne turen?"),updateField:this.updateFieldValue}))))))},o}(g.Component))||m;t.default=q}.call(this,o("hosL").Fragment)},om2D:function(e,t,o){"use strict";var s,a=o("hosL"),i=o("/eY4"),n=(o("cneo"),o("Utv1"),o("u2zT")),r=Object(i.a)(s=function(e){function t(t){var o;return(o=e.call(this,t)||this).handleAddImage=function(e){var t=o.props.addToImages,s=void 0===t||t,a=o.props,i=a.updateField,n=a.object,r=a.field;if(r&&i({id:n.id,field:r,value:e,skipTimer:!0}),s){var l=[];l.push(e),i({id:n.id,field:"images",value:l,skipTimer:!0})}},o.state={files:[]},o}var o,s;return s=e,(o=t).prototype=Object.create(s.prototype),o.prototype.constructor=o,o.__proto__=s,t.prototype.render=function(){var e=this.props,t=e.uploadStatus,o=void 0===t?function(){}:t,s=e.before,i=void 0===s?function(){}:s,r=e.after,l=void 0===r?function(){}:r,c=e.autoOpen,d=void 0===c||c;return Object(a.h)("div",{class:"row"},Object(a.h)("div",{class:"col-12"},Object(a.h)(n.a,{handleAddImage:this.handleAddImage,uploadStatus:o,apiUrl:"/api/fileupload",before:i,after:l,autoOpen:d},Object(a.h)("div",{style:{height:30,width:"100%"}}))))},t}(a.Component))||s;t.a=r},u2zT:function(e,t,o){"use strict";var s,a=o("hosL"),i=o("/eY4"),n=o("Utv1"),r=o("OhSV"),l=Object(i.a)(s=function(e){function t(t){var o;return(o=e.call(this,t)||this).dropRef=Object(a.createRef)(),o.handleDrag=function(e){e.preventDefault(),e.stopPropagation()},o.handleDragIn=function(e){e.preventDefault(),e.stopPropagation(),o.dragCounter++,e.dataTransfer.items&&e.dataTransfer.items.length>0&&o.setState({drag:!0})},o.handleDragOut=function(e){e.preventDefault(),e.stopPropagation(),o.dragCounter--,0===o.dragCounter&&o.setState({drag:!1})},o.handleDrop=function(e){if(e.preventDefault(),e.stopPropagation(),o.setState({drag:!1}),e.dataTransfer.files&&e.dataTransfer.files.length>0){for(var t=0,s=e.dataTransfer.files.length;t<s;t+=1){o.readLocalFile(e.dataTransfer.files[t])}o.dragCounter=0}},o.handleAddFiles=function(e){e.preventDefault();var t=e.target;for(var s=0,a=t.files.length;s<a;s+=1){o.readLocalFile(t.files[s])}},o.handleEvent=function(){0},o.handleUpload=function(e){var t=o.props,s=t.uploadStatus,a=t.before,i=void 0===a?function(){}:a,r=t.after,l=void 0===r?function(){}:r;(void 0===s?function(){}:s)(!1),n.a.isFunction(i)&&i();var c=new FormData;c.append("files[]",e);var d={progress:1};d.xhr=new XMLHttpRequest,d.xhr.upload.addEventListener("progress",(function(t){o.updateProgress(t,e)})),d.xhr.addEventListener("loadstart",(function(t){o.handleEvent(t,e)})),d.xhr.addEventListener("load",(function(t){o.handleEvent(t,e)})),d.xhr.addEventListener("loadend",(function(t){var s=e;n.a.isFunction(l)&&l(),o.handleEvent(t,s)})),d.xhr.addEventListener("progress",(function(t){o.handleEvent(t,e)})),d.xhr.addEventListener("error",(function(t){o.handleEvent(t,e)})),d.xhr.addEventListener("abort",(function(t){o.handleEvent(t,e)})),d.xhr.addEventListener("readystatechange",(function(t){o.uploadDone(t,e)})),d.xhr.open("POST",""+n.a.getApiServer()+o.props.apiUrl),d.xhr.setRequestHeader("Authorization","Bearer "+n.a.getJwtToken()),d.xhr.send(c);var u=e.name,p=o.state.uploadedFilesData;p[u]||(p[u]={}),p[u].uploadMeta=d,p[u].imageNum=o.state.imageNum,o.setState({uploadedFilesData:p})},o.readLocalFile=function(e){return new Promise((function(t,s){var a=new FileReader;a.addEventListener("error",(function(e){s(e)})),a.addEventListener("load",(function(s){var a=e,i=a.name,n=o.state.uploadedFilesData;n[i]||(n[i]={}),n[i].event=s,o.setState({uploadedFilesData:n}),o.handleUpload(a),t(s)})),a.readAsDataURL(e)}))},o.updateProgress=function(e,t){if(e.lengthComputable){var s=t.name,a=o.state.uploadedFilesData,i=e.loaded/e.total*100;0,a[s].uploadMeta.progress=i,o.setState({uploadedFilesData:a})}},o.uploadDone=function(e,t){var s=t.name,a=o.state.uploadedFilesData,i=a[s].uploadMeta;if(i&&4===i.xhr.readyState&&201===i.xhr.status)for(var n=JSON.parse(i.xhr.responseText).data.files,r=0;r<n.length;r+=1){o.addFileToUpload(n[r]),o.fileInput.value=""}},o.state={drag:!1,loadingProgress:0,uploadedFiles:[],uploadedFilesData:{}},o}var o,s;s=e,(o=t).prototype=Object.create(s.prototype),o.prototype.constructor=o,o.__proto__=s;var i=t.prototype;return i.addFileToUpload=function(e){var t=this.state.uploadedFilesData,o=this.props,s=o.handleAddImage,a=o.uploadStatus,i=void 0===a?function(){}:a;delete t[e.name],this.setState({uploadedFilesData:t}),s(e),i(!0)},i.componentDidMount=function(){var e=this,t=this.dropRef.current;t.addEventListener("dragenter",this.handleDragIn),t.addEventListener("dragleave",this.handleDragOut),t.addEventListener("dragover",this.handleDrag),t.addEventListener("drop",this.handleDrop),this.props.autoOpen&&setTimeout((function(){e.fileInput.click()}),10)},i.componentWillUnmount=function(){var e=this.dropRef.current;e.removeEventListener("dragenter",this.handleDragIn),e.removeEventListener("dragleave",this.handleDragOut),e.removeEventListener("dragover",this.handleDrag),e.removeEventListener("drop",this.handleDrop)},i.render=function(){var e=this,t=this.state.uploadedFilesData;return Object(a.h)("div",{style:{position:"relative"},ref:this.dropRef},this.state.drag&&Object(a.h)("div",{style:{border:"dashed grey 4px",backgroundColor:"rgba(255,255,255,.8)",position:"absolute",top:0,bottom:0,left:0,right:0,zIndex:9999}},Object(a.h)("div",{style:{position:"absolute",top:"50%",right:0,left:0,textAlign:"center",color:"grey",fontSize:36}},Object(a.h)("div",null,Object(a.h)(r.c,{id:"imageupload.drag-files-here"},"drop your files here :)")))),Object(a.h)("div",null,Object(a.h)("input",{class:"btn btn-info col-sm-12",multiple:!0,type:"file",id:"image-file",onchange:this.handleAddFiles,ref:function(t){e.fileInput=t}})),Object(a.h)("div",null,Object.keys(t).length>0?Object(a.h)("h3",null,Object(a.h)(r.c,{id:"imageupload.upload-images"},"Uploaded images")):"",Object(a.h)("ul",{class:"list-group"},Object.keys(t).map((function(e){var o=t[e].uploadMeta,s=void 0===o?{}:o,i=e.match(/(jpg|jpeg|png|gif|heic|heif|svg|webp|tif)/i);return Object(a.h)("li",{class:"list-group-item list-group-item-action flex-column align-items-start"},Object(a.h)("div",{class:"d-flex w-100 justify-content-between"},i&&Object(a.h)("img",{class:"img-fluid mr-3",src:t[e].event.target.result,style:"max-height: 50px;"}),Object(a.h)("small",null,t[e].event.uploadDone),Object(a.h)(r.c,{id:"imageupload.uploading-image"},"Laster opp bilde..."),Object(a.h)("small",null,n.a.formatBytes(t[e].event.total,2))),Object(a.h)("div",{class:"progress mt-1",style:"height: 4px;"},Object(a.h)("div",{class:"progress-bar progress-bar-striped progress-bar-animated bg-success",role:"progressbar",style:"width: "+s.progress+"%; height: 4px;","aria-valuenow":s.progress,"aria-valuemin":"0","aria-valuemax":"100"})))})))),this.props.children)},t}(a.Component))||s;t.a=l}}]);
//# sourceMappingURL=14.chunk.907d9.js.map