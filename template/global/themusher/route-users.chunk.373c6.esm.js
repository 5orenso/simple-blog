(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{ztHd:function(t,e,s){"use strict";s.r(e),function(t){var c,i=s("hosL"),a=s("Utv1"),l=s("/eY4"),n=s("OhSV"),r=s("ZOvn"),o=s("tJLP"),h=s("Cjoz");const b=r.a.marginTop(!1),u=r.a.marginBottom();let d=Object(l.a)(c=class extends i.Component{constructor(t){var e;super(t),e=this,this.resetEmailMessage=()=>{const{userStore:t}=this.props.stores;t.updateField("emailMessage",""),t.updateField("emailMessageIcon","")},this.resetEmailError=()=>{const{userStore:t}=this.props.stores;t.updateField("emailError",""),t.updateField("emailErrorIcon","")},this.toggleSetting=async function(t){const{userStore:s}=e.props.stores,{user:c}=s,{settings:i={}}=c;await s.updateSetting({["settings."+t]:1===i[t]?0:1})},this.subscriptionCreate=async function(){const{paypalStore:t,userStore:s}=e.props.stores;e.setState({paypalLoading:!0}),await t.subscriptionCreate({}),await s.getInfo(),e.setState({paypalLoading:!1})},this.subscriptionCancel=async function(t){const{id:s}=t.target.closest("button").dataset,{paypalStore:c,userStore:i}=e.props.stores;await c.subscriptionCancel({planId:s}),await i.getInfo()},this.subscriptionDetail=async function(){const{paypalStore:t,userStore:s}=e.props.stores,{user:c={}}=s,{subscription:i}=c;if(i.payPalSubscriptionId){const e=await t.subscriptionDetail({id:i.payPalSubscriptionId});s.setSubscriptionPaypal(e.data),await s.getInfo()}},this.toggleCancel=()=>{const{showCancel:t}=this.state;this.setState({showCancel:!t})},this.toggleDetails=()=>{const{showDetails:t}=this.state;t||this.subscriptionDetail(),this.setState({showDetails:!t})},this.state={time:Date.now(),count:10}}getPaypalButton(){const{paypalLoading:e,showCancel:s,showDetails:c}=this.state,{userStore:l}=this.props.stores,{user:n={},subscriptionPaypal:r={}}=l,{subscription:o={}}=n;if(o&&o.isActive){if(c){const{subscriber:c={},billing_info:l={}}=r,{name:n={}}=c,{last_payment:h={}}=l;return Object(i.h)(t,null,Object(i.h)("h5",null,"Subscriber"),Object(i.h)("table",{class:"table table-sm table-striped"},Object(i.h)("tbody",null,Object(i.h)("tr",null,Object(i.h)("th",null,"Email"),Object(i.h)("td",null,c.email_address)),Object(i.h)("tr",null,Object(i.h)("th",null,"Name"),Object(i.h)("td",null,n.given_name," ",n.surname)),Object(i.h)("tr",null,Object(i.h)("th",null,"Next billing"),Object(i.h)("td",null,a.a.isoDate(l.next_billing_time))),Object(i.h)("tr",null,Object(i.h)("th",null,"Last payment"),Object(i.h)("td",null,a.a.isoDate(h.time)," ",h.amount&&Object(i.h)(t,null,h.amount.currency_code," ",h.amount.value))))),s?Object(i.h)(t,null,Object(i.h)("button",{type:"submit",class:"btn btn-danger btn-lg",onClick:this.subscriptionCancel,disabled:e,"data-id":o.payPalSubscriptionId},"Cancel subscription ",e&&Object(i.h)(t,null,Object(i.h)("span",{class:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"}),Object(i.h)("span",{class:"sr-only"},"Loading...")))):Object(i.h)(t,null,Object(i.h)("small",{class:"font-weight-lighter",onClick:this.toggleCancel},"Cancel subscription")))}return Object(i.h)(t,null,Object(i.h)("div",{class:"d-flex"},Object(i.h)("div",{class:"display-4 text-success float-left"},Object(i.h)("i",{class:"fas fa-check"})),Object(i.h)("div",{class:"align-self-stretch ml-3 pt-3"},"Active premium subscription since ",a.a.isoDate(o.startDate),Object(i.h)("br",null),Object(i.h)("small",{class:"font-weight-lighter",onClick:this.toggleDetails},"Subscription details"))))}if(o&&o.approveLinkObject){const{href:e}=o.approveLinkObject;return Object(i.h)(t,null,Object(i.h)("a",{class:"btn btn-primary btn-lg",href:e,target:"_blank",rel:"noreferrer"},"Approve payment at PayPal"))}return Object(i.h)(t,null,Object(i.h)("button",{type:"submit",class:"btn btn-success btn-lg",onClick:this.subscriptionCreate,disabled:e},"Subscripe to Premium / Monthly $5 ",e&&Object(i.h)(t,null,Object(i.h)("span",{class:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"}),Object(i.h)("span",{class:"sr-only"},"Loading..."))))}componentDidMount(){const{userStore:t}=this.props.stores;this.props.verifyEmailToken&&t.verifyEmail({token:this.props.verifyEmailToken})}render(){const{userStore:e}=this.props.stores,{user:s,emailMessage:c,emailError:l,emailMessageIcon:r,emailErrorIcon:d,isAdmin:m}=e,{teams:j,settings:O={}}=s,p=e.findTeams(j),g=a.a.getApiServer(),v=a.a.getJwtToken();return Object(i.h)("div",{class:"container-fluid",style:`margin-bottom: ${u}; margin-top: ${b};`},Object(i.h)("div",{class:"row"},Object(i.h)("div",{class:"col-12"},Object(i.h)(o.a,{message:l,icon:d,remove:this.resetEmailError}),Object(i.h)(h.a,{message:c,icon:r,remove:this.resetEmailMessage}),Object(i.h)("a",{href:"/users/edit",class:"btn btn-primary btn-sm float-right"},Object(i.h)(n.c,{id:"users.edit"},"Endre")),Object(i.h)("h5",null,Object(i.h)(n.c,{id:"users.title"},"Din profil"))),Object(i.h)("div",{class:"col-4 text-muted text-right"},Object(i.h)(n.c,{id:"users.email"},"E-post")),Object(i.h)("div",{class:"col-8"},s.email),Object(i.h)("div",{class:"col-4 text-muted text-right"},Object(i.h)(n.c,{id:"users.password"},"Passord")),Object(i.h)("div",{class:"col-8"},Object(i.h)("a",{href:"/users/edit-password",class:"btn btn-primary btn-sm"},Object(i.h)(n.c,{id:"users.change-password"},"Endre passord"))),s.team&&Object(i.h)(t,null,Object(i.h)("div",{class:"col-4 text-muted text-right"},Object(i.h)(n.c,{id:"users.main-team"},"Hovedteam")),Object(i.h)("div",{class:"col-8"},e.findTeam(s.team))),s.teams&&Object(i.h)(t,null,Object(i.h)("div",{class:"col-4 text-muted text-right"},Object(i.h)(n.c,{id:"users.all-teams"},"Alle teamene")),Object(i.h)("div",{class:"col-8"},p.map(t=>Object(i.h)("div",null,t.name)))),s.username&&Object(i.h)(t,null,Object(i.h)("div",{class:"col-4 text-muted text-right"},Object(i.h)(n.c,{id:"users.username"},"Brukernavn")),Object(i.h)("div",{class:"col-8"},s.username)),s.firstname&&Object(i.h)(t,null,Object(i.h)("div",{class:"col-4 text-muted text-right"},Object(i.h)(n.c,{id:"users.firstname"},"Fornavn")),Object(i.h)("div",{class:"col-8"},s.firstname)),s.lastname&&Object(i.h)(t,null,Object(i.h)("div",{class:"col-4 text-muted text-right"},Object(i.h)(n.c,{id:"users.lastname"},"Etternavn")),Object(i.h)("div",{class:"col-8"},s.lastname)),s.cellphone&&Object(i.h)(t,null,Object(i.h)("div",{class:"col-4 text-muted text-right"},Object(i.h)(n.c,{id:"users.cellphone"},"Mobil")),Object(i.h)("div",{class:"col-8"},s.cellphone)),s.url&&Object(i.h)(t,null,Object(i.h)("div",{class:"col-4 text-muted text-right"},Object(i.h)(n.c,{id:"users.homepage"},"Hjemmeside")),Object(i.h)("div",{class:"col-8"},s.url)),s.facebook&&Object(i.h)(t,null,Object(i.h)("div",{class:"col-4 text-muted text-right"},Object(i.h)(n.c,{id:"users.facebook"},"Facebook")),Object(i.h)("div",{class:"col-8"},s.facebook)),s.instagram&&Object(i.h)(t,null,Object(i.h)("div",{class:"col-4 text-muted text-right"},Object(i.h)(n.c,{id:"users.instagram"},"Instagram")),Object(i.h)("div",{class:"col-8"},s.instagram)),s.snapchat&&Object(i.h)(t,null,Object(i.h)("div",{class:"col-4 text-muted text-right"},Object(i.h)(n.c,{id:"users.snapchat"},"Snapchat")),Object(i.h)("div",{class:"col-8"},s.snapchat))),Object(i.h)("div",{class:"row mt-4"},Object(i.h)("div",{class:"col-4 text-muted text-right"},Object(i.h)(n.c,{id:"users.settings-hide-profile"},"Skjul profilen")),Object(i.h)("div",{class:"col-8"},Object(i.h)("div",{class:"custom-control custom-switch"},Object(i.h)("input",{type:"checkbox",class:"custom-control-input",id:"settingsHideProfile",onInput:()=>this.toggleSetting("hideProfile"),checked:O.hideProfile}),Object(i.h)("label",{class:"custom-control-label",for:"settingsHideProfile"})),Object(i.h)("small",{class:"text-muted"},Object(i.h)(n.c,{id:"users.settings-hide-profile-help"},"Det vil snart være mulig å bli venner med andre her på The Musher. Dersom du ikke vil at andre skal kunne finne deg, så kan du skjule profilen din her.")))),Object(i.h)("div",{class:"row mt-4"},Object(i.h)("div",{class:"col-4 text-muted text-right"},Object(i.h)(n.c,{id:"users.settings-hide-invite"},"Skjul invitasjonsboks")),Object(i.h)("div",{class:"col-8"},Object(i.h)("div",{class:"custom-control custom-switch"},Object(i.h)("input",{type:"checkbox",class:"custom-control-input",id:"settingsHideInvitation",onInput:()=>this.toggleSetting("hideInvite"),checked:O.hideInvite}),Object(i.h)("label",{class:"custom-control-label",for:"settingsHideInvitation"})),Object(i.h)("small",{class:"text-muted"},Object(i.h)(n.c,{id:"users.settings-hide-invite-help"},"Skjul invitasjonsboksen på forsiden.")))),Object(i.h)("div",{class:"row mt-4"},Object(i.h)("div",{class:"col-4 text-muted text-right"},Object(i.h)(n.c,{id:"users.settings-hide-settings"},"Skjul innstillinger")),Object(i.h)("div",{class:"col-8"},Object(i.h)("div",{class:"custom-control custom-switch"},Object(i.h)("input",{type:"checkbox",class:"custom-control-input",id:"settingsHideSettings",onInput:()=>this.toggleSetting("hideSettings"),checked:O.hideSettings}),Object(i.h)("label",{class:"custom-control-label",for:"settingsHideSettings"})),Object(i.h)("small",{class:"text-muted"},Object(i.h)(n.c,{id:"users.settings-hide-settings-help"},"Skjul innstillinger på forsiden.")))),Object(i.h)("div",{class:"row mt-4"},Object(i.h)("div",{class:"col-4 text-muted text-right"},Object(i.h)(n.c,{id:"users.settings-summary-email"},"Oppsummeringer")),Object(i.h)("div",{class:"col-8"},Object(i.h)("div",{class:"custom-control custom-switch"},Object(i.h)("input",{type:"checkbox",class:"custom-control-input",id:"settingsSummaryEmails",onInput:()=>this.toggleSetting("summaryEmails"),checked:O.summaryEmails}),Object(i.h)("label",{class:"custom-control-label",for:"settingsSummaryEmails"})),Object(i.h)("small",{class:"text-muted"},Object(i.h)(n.c,{id:"users.settings-receive-summary-email"},"Motta oppsummeringer via e-post")))),Object(i.h)("div",{class:"row mt-4"},Object(i.h)("div",{class:"col-4 text-muted text-right"},Object(i.h)(n.c,{id:"users.settings-info-email"},"Info")),Object(i.h)("div",{class:"col-8"},Object(i.h)("div",{class:"custom-control custom-switch"},Object(i.h)("input",{type:"checkbox",class:"custom-control-input",id:"settingsInfoEmails",onInput:()=>this.toggleSetting("infoEmails"),checked:O.infoEmails}),Object(i.h)("label",{class:"custom-control-label",for:"settingsInfoEmails"})),Object(i.h)("small",{class:"text-muted"},Object(i.h)(n.c,{id:"users.settings-receive-info-email"},"Motta info via e-post")))),Object(i.h)("div",{class:"row mt-4"},Object(i.h)("div",{class:"col-4 text-muted text-right"},Object(i.h)(n.c,{id:"users.settings-partner-email"},"Partners")),Object(i.h)("div",{class:"col-8"},Object(i.h)("div",{class:"custom-control custom-switch"},Object(i.h)("input",{type:"checkbox",class:"custom-control-input",id:"settingsPartnerEmails",onInput:()=>this.toggleSetting("partnerEmails"),checked:O.partnerEmails}),Object(i.h)("label",{class:"custom-control-label",for:"settingsPartnerEmails"})),Object(i.h)("small",{class:"text-muted"},Object(i.h)(n.c,{id:"users.settings-receive-partner-email"},"Motta tilbud fra våre partnere via e-post")))),m&&Object(i.h)("div",{class:"row border-top mt-5 pt-5"},Object(i.h)("div",{class:"col-12"},this.getPaypalButton())),Object(i.h)("div",{class:"row border-top mt-5 pt-5"},Object(i.h)("div",{class:"col-12"},Object(i.h)("div",null,Object(i.h)("img",{src:"./assets/strava_logo_orange.png",style:"max-height: 100px;"}))),s.strava&&s.strava.access_token?Object(i.h)(t,null,Object(i.h)("div",{class:"col-12"},Object(i.h)("h5",null,Object(i.h)("i",{class:"fas fa-thumbs-up text-success"})," ",Object(i.h)(n.c,{id:"users.strava-connected"},"Connected to Strava!"))),Object(i.h)("div",{class:"col-4 text-right text-muted"},Object(i.h)(n.c,{id:"users.strava-id"},"id"),":"),Object(i.h)("div",{class:"col-8"}," ",s.strava.athlete.id),Object(i.h)("div",{class:"col-4 text-right text-muted"},Object(i.h)(n.c,{id:"users.strava-username"},"username"),":"),Object(i.h)("div",{class:"col-8"}," ",s.strava.athlete.username),Object(i.h)("div",{class:"col-4 text-right text-muted"},Object(i.h)(n.c,{id:"users.strava-profile"},"profile"),":"),Object(i.h)("div",{class:"col-8"}," ",Object(i.h)("img",{src:s.strava.athlete.profile})),Object(i.h)("div",{class:"col-12 mt-2"},Object(i.h)("div",{class:"display-1 text-success"},Object(i.h)("i",{class:"fas fa-check"})),Object(i.h)("small",{class:"text-muted"},Object(i.h)("small",null,Object(i.h)(n.c,{id:"users.strava-reconnect-help"},"Hvis du opplever problemer med integrasjoen så kan du prøve å koble til på nytt"),":",Object(i.h)("br",null),Object(i.h)("a",{href:`${g}/api/strava/request-access?token=${v}`,native:!0,target:"_blank",rel:"noreferrer"},Object(i.h)(n.c,{id:"users.strava-reconnect"},"Reconnect to Strava")))))):Object(i.h)(t,null,Object(i.h)("div",{class:"col-12 mt-2"},Object(i.h)("a",{class:"btn btn-primary",href:`${g}/api/strava/request-access?token=${v}`,native:!0,target:"_blank",rel:"noreferrer"},Object(i.h)(n.c,{id:"users.strava-connect"},"Connect to Strava"))))),Object(i.h)("div",{class:"row border-top mt-5 pt-5"},Object(i.h)("div",{class:"col-12"},Object(i.h)("div",null,Object(i.h)("img",{src:"./assets/garmin-connect.png",style:"height: 100px;"}))),s.garmin&&s.garmin.access&&s.garmin.access.oauth_token?Object(i.h)(t,null,Object(i.h)("div",{class:"col-12"},Object(i.h)("h5",null,Object(i.h)("i",{class:"fas fa-thumbs-up text-success"})," ",Object(i.h)(n.c,{id:"users.garmin-connected"},"Connected to Garmin Connect!"))),Object(i.h)("div",{class:"col-12 mt-2"},Object(i.h)("div",{class:"display-1 text-success"},Object(i.h)("i",{class:"fas fa-check"})),Object(i.h)("small",{class:"text-muted"},Object(i.h)("small",null,Object(i.h)(n.c,{id:"users.garmin-reconnect-help"},"Hvis du opplever problemer med integrasjoen så kan du prøve å koble til på nytt"),":",Object(i.h)("br",null),Object(i.h)("a",{href:`${g}/api/garmin/request-access?token=${v}`,native:!0,target:"_blank",rel:"noreferrer"},Object(i.h)(n.c,{id:"users.garmin-reconnect"},"Reconnect to Garmin Connect")))))):Object(i.h)(t,null,Object(i.h)("div",{class:"col-12 mt-2"},Object(i.h)("a",{class:"btn btn-primary",href:`${g}/api/garmin/request-access?token=${v}`,native:!0,target:"_blank",rel:"noreferrer"},Object(i.h)(n.c,{id:"users.garmin-connect"},"Connect to Garmin Connect"))))),Object(i.h)("div",{class:"row border-top mt-5 pt-5"},Object(i.h)("div",{class:"col-12 text-center"},Object(i.h)("a",{href:"/logout",class:"btn btn-block btn-lg btn-warning"},Object(i.h)("i",{class:"fas fa-sign-out-alt"})," ",Object(i.h)(n.c,{id:"header.logout"},"Logg ut")))))}})||c;e.default=d}.call(this,s("hosL").Fragment)}}]);
//# sourceMappingURL=route-users.chunk.373c6.esm.js.map