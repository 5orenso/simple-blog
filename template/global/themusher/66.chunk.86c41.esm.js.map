{"version":3,"sources":["webpack:///./routes/public/race/listMusher.js","webpack:///./routes/public/race/raceheader.js","webpack:///./components/public/heatmap.js","webpack:///./routes/public/race/submenu.js","webpack:///./routes/public/race/style.css","webpack:///./routes/public/race/header.js","webpack:///./routes/public/race/tracking.js","webpack:///./routes/public/race/raceText.js","webpack:///./components/gauge/style.css","webpack:///./routes/public/race/displayMusher.js","webpack:///./components/gauge/index.js"],"names":["initialState","ListMusher","observer","Component","constructor","props","super","toggleFocusOnMusher","e","musherId","target","parentElement","dataset","musherid","appState","raceStore","this","stores","parseInt","focusOnMushers","getWorkoutSummaryActiveTeams","toggleInfoOnMusher","state","render","team","idx","language","infoOnMushers","line","getActiveTeamById","id","currentStages","getWorkoutSummaryByTeam","currentClass","getClassByTeamId","currentResults","getWorkoutResultsByTeam","distance","musher","getMusherByTeamId","image","images","length","raceClass","completed","distanceKm","hasStarted","currentSpeed","updated","isActive","currentLocation","coords","speed","timestamp","toFinish","class","style","s3SmallLink","onClick","data-musherid","util","ucfirst","String","firstname","lastname","name","title","format","secToHms","rest","isInProgress","dogs","formatDistance","Date","indexOf","battery","level","RaceHeader","race","today","status","startDate","endDate","signupStartDate","signupEndDate","classes","useEffect","document","PageTitle","formatDate","locale","hour12","hour","minute","liveRace","role","showAddComment","Heatmap","updateTimer","inputRef","setState","isLoading","adminStore","raceid","getPublicHeatmap","componentDidMount","loadHeatmap","waypoints","zoomToMarkers","mapid","fullscreenMap","publicHeatmap","heatmap","mapId","minZoom","maxZoom","height","key","mu","marginTop","marginBottom","subMenuMarginTop","email","submenu","jwtToken","getJwtToken","PublicRaceDetail","path","darkmode","currentMenu","match","href","module","exports","menu","profile","main","searchText","Navigation","toggleDropdown","menuName","parentNode","toggleDarkmode","toggleViewmode","mode","reloadApp","window","location","reload","adminLoadAll","async","userStore","getInfo","changeLanguage","lang","value","console","log","user","setLanguage","search","route","notifications","filter","read","src","type","data-name","className","activeClassName","onInput","selected","MARKDOWN_OPTIONS","pedantic","gfm","breaks","sanitize","smartLists","smartypants","xhtml","reloadInSec","reloadIsActive","leaderboardMode","filterByraceClass","showLeaderBoard","showNews","ReloadTimer","initComponent","tickReloadTimeer","reloadLastEpoch","now","Math","floor","getTime","clearTimeout","tick","setTimeout","componentWillUnmount","radius","fontSize","classNames","reloadPercent","normalizeBetween","color","showPercentText","percent","showCenterText","centerText","centerTextSize","centerTextY","loadLiveRaceResults","getRaceTrackerData","raceTrackerRace","getRaceTrackerActiveTeams","loadRaceResults","teamIds","loadWorkoutSummary","setLeaderboardMode","chooseRaceClass","toggleShowLeaderBoard","hide","toggleShowNews","load","allTeamIds","contestants","map","flat","teamid","loadTeams","join","getAllClassesSortedBy","loadRace","RELOAD_INTERVAL_IN_SEC","width","innerWidth","innerHeight","getWindowDimensions","componentWillReceiveProps","nextProps","teamsInThisRace","activeTeams","teamList","articles","reverse","article","date","replaceImages","s3LargeLink","ingress","markdown","markdownOpts","body","aria-describedby","sort","a","b","totalMushers","data-mode","contestant","currentTeam","teamId","getTeamById","text","finalText","regex","RegExp","replace","DisplayMusher","avgDogs","speedAvg","weightedNormalizedDuration","duration","elevation","altitude","loadIndex","viewBox","d","svgElevation","svgMap","stage","currentEpoch","inDate","setUTCSeconds","mouseData","Gauge","svgRef","heightAdd","prefix","centerTextX","total","totalY","totalX","totalTextAnchor","completedY","completedX","completedTextAnchor","strokeWidth","innerRadius","strokeWidthGauge","circumference","PI","arc","dashArray","transform","offset","min","max","textSize","textSizeSmall","xmlns","svg","preserveAspectRatio","ref","c","gaugeBackground","cx","cy","r","strokeDasharray","strokeLinecap","gauge","stroke","strokeDashoffset","transition","gaugeText","x","y","dominant-baseline","text-anchor","font-size","secondary"],"mappings":"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","file":"66.chunk.86c41.esm.js","sourcesContent":["import { h, Component } from 'preact';\nimport { useEffect } from \"preact/hooks\";\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport { Text, Localizer } from 'preact-i18n';\n\nconst initialState = {\n};\n\n@observer\nclass ListMusher extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            ...initialState,\n        };\n    }\n\n\ttoggleFocusOnMusher = (e) => {\n\t\tconst musherId = e.target.parentElement.dataset.musherid || e.target.dataset.musherid;\n\t\tconst { appState, raceStore } = this.props.stores;\n\t\tappState.toggleFocusOnMusher(parseInt(musherId, 10));\n\n\t\tconst { focusOnMushers } = appState;\n\t\traceStore.getWorkoutSummaryActiveTeams(focusOnMushers);\n\t}\n\n\ttoggleInfoOnMusher = (e) => {\n\t\tconst musherId = e.target.parentElement.dataset.musherid || e.target.dataset.musherid;\n\t\tconst { appState } = this.props.stores;\n\t\tappState.toggleInfoOnMusher(parseInt(musherId, 10));\n\t}\n\n    render() {\n\t\tconst { raceStore, appState } = this.props.stores;\n\t\tconst { team = {}, idx } = this.props;\n\t\tconst { darkmode, language = 'en', focusOnMushers = [], infoOnMushers = [] } = appState;\n\t\tconst { race } = raceStore;\n\n        const line = raceStore.getActiveTeamById(team.id);\n        const currentStages = raceStore.getWorkoutSummaryByTeam(team.id);\n        const currentClass = raceStore.getClassByTeamId(team.id);\n        const currentResults = raceStore.getWorkoutResultsByTeam(currentStages, currentClass.distance);\n        const musher = raceStore.getMusherByTeamId(team.id);\n        const image = team.images && team.images.length > 0 ? team.images[0] : {};\n        const raceClass = raceStore.getClassByTeamId(team.id);\n\n        const completed = currentResults.distanceKm / currentClass.distance * 100;\n        const hasStarted = completed > 0 ? 1 : 0;\n        const isDone = completed >= 100 ? 1 : 0;\n\n        let currentSpeed;\n        let updated;\n        let isActive;\n        if (line && line.currentLocation && line.currentLocation.coords) {\n            currentSpeed = line.currentLocation.coords.speed * 3.6;\n            updated = line.currentLocation.timestamp;\n            isActive = true;\n        }\n        let toFinish = raceClass.distance - currentResults.distanceKm;\n        if (toFinish < 0) {\n            toFinish = 0;\n        }\n\n        // const currentSpeed = util.format(line.currentLocation.coords.speed * 3.6, 1);\n        // avgDogs: 9.777777777777779\n        // distanceKm: 268.3432364824406\n        // duration: 67524.34002106966\n        // elevation: 5287.123805500813\n        // flatTotalKcal: 4971.658025959346\n        // images: Array(32) [ Proxy, Proxy, Proxy, … ]\n        // loadIndex: 1446\n        // rest: 2306\n        // speedAvg: 14.820718823260847\n        // totalKcalRelated: 1225.314525471911\n        // weightedTotalKcal: 11344.398317216459\n\n        return (<>\n            <div class='row border-top mt-2' style='font-size: 0.7em;'>\n                <div class='col-2 p-0 text-center'>\n                    <h2>{idx + 1}</h2>\n                </div>\n                <div class='col-2 p-0 text-center'>\n                    <div\n                        class={`text-center text-muted pt-2 h-100`}\n                        style={`background-image: url(\"${image.s3SmallLink}\"); background-size: cover;`}\n                        onClick={this.toggleInfoOnMusher} data-musherid={team.id}\n                    >\n                        {!image.s3SmallLink && <>\n                            <span class='font-weight-lighter' style='font-size: 35px;'>\n                                {util.ucfirst(String(musher.firstname), true)}\n                                {util.ucfirst(String(musher.lastname), true)}\n                            </span>\n                        </>}\n                    </div>\n                </div>\n                <div class='col-8'>\n                    <div class='row'>\n                        <div class='col-6 px-1'>\n                            <span class='font-weight-bold'>{musher.firstname} {musher.lastname}</span><br />\n                            <span class='font-weight-lighter'>{team.name}</span><br />\n                            {raceClass && raceClass.title && <>\n                                <span class='font-weight-lighter'>{raceClass.title}</span>\n                            </>}\n                        </div>\n                        <div class='col-3 p-0 text-center'>\n                            <span class='font-weight-lighter'>km</span><br />\n                            <span style='font-size: 2.0em;'>{util.format(currentResults.distanceKm, 0)}</span>\n                        </div>\n                        <div class='col-3 p-0 text-center'>\n                            <span class='font-weight-lighter'>to finish</span><br />\n                            <span style='font-size: 2.0em;'>\n                                {toFinish === 0 ? <i class='fas fa-flag-checkered text-success' /> : <>{util.format(toFinish, 0)}</>}\n                            </span>\n                        </div>\n                    </div>\n                    <div class='row border-top'>\n                        <div class='col-3 p-0 text-center'>\n                            <span class='font-weight-lighter'>Rest</span><br />\n                            {util.secToHms(currentResults.rest)}\n                        </div>\n                        <div class='col-3 p-0 text-center'>\n                            <span class='font-weight-lighter'>Speed</span><br />\n                            {currentSpeed ? <>{util.format(currentSpeed, 1)} km/t</> : '-'}\n                        </div>\n                        <div class='col-3 p-0 text-center'>\n                            <span class='font-weight-lighter'>Status</span><br />\n                            {line.isInProgress === 1 ? <span class='text-primary'>running</span> : ''}\n                            {line.isInProgress === 2 ? <span class='text-danger'>resting</span> : ''}\n                            {toFinish === 0 ? <>\n                                {!line.isInProgress ? <span class='text-success'>FINISH</span> : ''}\n                            </> : <>\n                                {!line.isInProgress ? <>\n                                    {hasStarted ? <span class='text-danger'>resting</span> : <span class='text-muted'>NYS</span>}\n                                </> : ''}\n                            </>}\n                            \n                        </div>\n                        <div class='col-3 p-0 text-center align-bottom'>\n                            <h5>\n                                {team.dogs && team.dogs ? util.format(team.dogs.length, 0) : '-'} <i class='fas fa-dog text-muted ml-2' />\n                            </h5>\n                        </div>\n                    </div>\n                </div>\n            </div>\n            <div class='row bg-secondary text-white' style='font-size: 0.8em;'>\n                <div class='col-6 text-left' style='font-size: 0.8em;'>\n                    {isActive && <>\n                        Updated: {util.formatDistance(updated, new Date())} ago\n                    </>}\n                </div>\n                <div class='col-6 text-right'>\n                    <span class='float-right' onClick={this.toggleFocusOnMusher} data-musherid={team.id}>{focusOnMushers.indexOf(team.id) > -1 ? <i class='fas fa-star text-warning' /> : <i class='far fa-star' />}</span>\n                    <span class='float-right mr-2' onClick={this.toggleInfoOnMusher} data-musherid={team.id}>{infoOnMushers.indexOf(team.id) > -1 ? <i class='fas fa-info-circle text-warning' /> : <i class='fas fa-info-circle' />}</span>\n\n                    {isActive && line.currentLocation.battery.level > 0 && <>\n                        <span class='float-right mr-2'>\n                            <i class='fas fa-battery-three-quarters text-muted ml-2 mr-1' />\n                            {util.format(line.currentLocation.battery.level * 100, 0)}%\n                        </span>\n                    </>}\n\n                </div>\n            </div>\n        </>);\n    }\n}\n\nexport default ListMusher;\n","import { h, Component } from 'preact';\nimport { useEffect } from \"preact/hooks\";\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport { Text, Localizer } from 'preact-i18n';\n\nfunction PageTitle(title, classes = '') {\n\tuseEffect(() => {\n\t\tdocument.title = `Homerun Race: ${title}`;\n\t}, [title]);\n\treturn <h1 class={classes}>{title}</h1>;\n}\n\nconst initialState = {\n};\n\n@observer\nclass RaceHeader extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            ...initialState,\n        };\n    }\n\n    render() {\n\t\tconst { raceStore, appState } = this.props.stores;\n\t\tconst { title } = this.props;\n\t\tconst { darkmode, language = 'en' } = appState;\n\t\tconst { race } = raceStore;\n\n\t\tconst today = new Date();\n\t\tlet status = '';\n\t\tif (today >= new Date(race.startDate) && today <= new Date(race.endDate)) {\n\t\t\tstatus = 'race';\n\t\t} else if (today >= new Date(race.signupStartDate) && today <= new Date(race.signupEndDate)) {\n\t\t\tstatus = 'signup';\n\t\t} else if (today > new Date(race.endDate)) {\n\t\t\tstatus = 'done';\n\t\t}\n\n\t\treturn (\n\t\t\t<>\n\t\t\t\t<div class='d-flex'>\n\t\t\t\t\t<div class='flex-fill'>\n\t\t\t\t\t\t{PageTitle(title, 'mb-0')}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class='flex-fill text-center d-none d-md-block'>\n\t\t\t\t\t\t<h1 class='mb-0' style='line-height: 0.8em;'><span class='font-weight-lighter' style='letter-spacing: -1px;'>{race.title}</span></h1>\n\t\t\t\t\t\t<small class=''>\n\t\t\t\t\t\t\t{race.startDate && <>{util.formatDate(race.startDate, { locale: language, hour12: false, hour: '2-digit', minute: '2-digit' })}</>}\n\t\t\t\t\t\t\t{race.endDate && <> - {util.formatDate(race.endDate, { locale: language, hour12: false, hour: '2-digit', minute: '2-digit' })}</>}\n\t\t\t\t\t\t</small>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class='flex-fill'>\n\t\t\t\t\t\t<h3 class='float-right'>\n\t\t\t\t\t\t\t{status === 'signup' && !race.liveRace && <>\n\t\t\t\t\t\t\t\t<div class='spinner-grow text-primary' role='status' />\n\t\t\t\t\t\t\t\t<span class='badge badge-primary ml-2'><Text id='races.signup-open'>Påmelding åpen</Text></span>\n\t\t\t\t\t\t\t</>}\n\t\t\t\t\t\t\t{status === 'race' && <>\n\t\t\t\t\t\t\t\t<div class='spinner-grow text-danger' role='status' />\n\t\t\t\t\t\t\t\t<span class='badge badge-danger ml-2'><Text id='races.race-in-progress'>Løp pågår</Text></span>\n\t\t\t\t\t\t\t</>}\n\t\t\t\t\t\t\t{status === 'done' && <>\n\t\t\t\t\t\t\t\t<i class='fas fa-check text-success' />\n\t\t\t\t\t\t\t\t<span class='badge badge-success ml-2'><Text id='races.race-finished'>Løp avsluttet</Text></span>\n\t\t\t\t\t\t\t</>}\n\t\t\t\t\t\t</h3>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class='d-block d-md-none'>\n\t\t\t\t\t<h4 class='mb-0' style='line-height: 0.8em;'><span class='font-weight-light' style='letter-spacing: -1px;'>{race.title}</span></h4>\n\t\t\t\t\t<small>\n\t\t\t\t\t\t{race.startDate && <>{util.formatDate(race.startDate, { locale: language, hour12: false, hour: '2-digit', minute: '2-digit' })}</>}\n\t\t\t\t\t\t{race.endDate && <> - {util.formatDate(race.endDate, { locale: language, hour12: false, hour: '2-digit', minute: '2-digit' })}</>}\n\t\t\t\t\t</small>\t\t\t\t\n\t\t\t\t</div>\n\t\t\t</>\n\t\t);\n\t}\n}\n\nexport default RaceHeader;\n","import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport { Text, Localizer } from 'preact-i18n';\nimport { toJS } from 'mobx'\n\nimport Map from '../../components/map';\n\nimport mu from '../../lib/musher-util';\n\nconst initialState = {\n\tshowAddComment: false,\n};\n\n@observer\nclass Heatmap extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            ...initialState,\n        };\n        this.updateTimer = {};\n\t\tthis.inputRef = {};\n    }\n\n\tasync loadHeatmap() {\n\t\tthis.setState({ isLoading: true });\n\t\tconst { adminStore } = this.props.stores;\n        const { raceid } = this.props;\n        await adminStore.getPublicHeatmap(raceid);\n\t\tthis.setState({ isLoading: false });\n\t}\n\n\tcomponentDidMount() {\n\t\tthis.loadHeatmap();\n\t}\n\n    // componentWillReceiveProps() {\n\t// \tthis.loadHeatmap();\n\t// }\n\n    render() {\n        const { adminStore } = this.props.stores;\n        const { waypoints, zoomToMarkers, mapid, fullscreenMap } = this.props;\n        const { publicHeatmap: heatmap } = adminStore;\n        // const heatmap = publicHeatmap.slice(0, 10);\n        // const heatmap = [[60.4433,8.8996,14],[61.384,9.1152,14],[60.42,8.9422,15]];\n\n        return (\n            <>\n                {/* heatmap: {`map-${mapid}`}<br /> */}\n                {/* {JSON.stringify(heatmap)} */}\n                <Map\n                    stores={this.props.stores}\n                    mapId={heatmap.length}\n                    heatmap={heatmap}\n                    minZoom={2}\n                    maxZoom={18}\n                    height={600}\n                    waypoints={waypoints}\n                    zoomToMarkers={zoomToMarkers}\n                    fullscreenMap={fullscreenMap}\n                    key={`map-${mapid}`}\n                />\n            </>\n        );\n    }\n}\n\nexport default Heatmap;\n","import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport { Text, Localizer } from 'preact-i18n';\nimport linkstate from 'linkstate';\n\nimport Header from './header';\nimport Heatmap from '../../../components/public/heatmap';\n\nimport mu from '../../../lib/musher-util';\nconst MARGIN_TOP = mu.marginTop(true);\nconst MARGIN_BOTTOM = mu.marginBottom();\nconst SUB_MENU_MARGIN_TOP = mu.subMenuMarginTop();\n\nconst initialState = {\n\tisLoading: false,\n\temail: '',\n\tsubmenu: 'ads',\n\tjwtToken: util.getJwtToken(),\n};\n\n@observer\nclass PublicRaceDetail extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            ...initialState,\n        };\n    }\n\n\trender() {\n\t\tconst { appState } = this.props.stores;\n\t\tconst { raceid, path } = this.props;\n\t\tconst { darkmode } = appState;\n\n        let currentMenu = 'default';\n        if (path.match(/\\/race\\/:raceid$/)) {\n            currentMenu = 'default';\n        } else if (path.match(/\\/race\\/:raceid\\/mushers$/)) {\n            currentMenu = 'mushers';\n        } else if (path.match(/\\/race\\/:raceid\\/results$/)) {\n            currentMenu = 'results';\n        } else if (path.match(/\\/race\\/:raceid\\/media$/)) {\n            currentMenu = 'media';\n        } else if (path.match(/\\/race\\/:raceid\\/tracking$/)) {\n            currentMenu = 'tracking';\n        }\n\n\t\treturn (\n\t\t\t<>\t\t\t\t\n                <div class='row fixed-top pr-3' style={`margin-top: 40px; background-color: ${darkmode ? '#191d21' : '#f8f9fa'};`}>\n\n                    <div class='col-12 my-2 mx-2'>\n                        <ul class='nav nav-pills nav-fill flex-nowrap'>\n                            <li class='nav-item' style='max-width: 20%;'>\n                                <a href={`/race/${raceid}`} class={`text-overflow nav-link ${currentMenu === 'default' ? 'active' : ''}`}>\n                                    <nobr><i class='fas fa-info-circle' /> <Text id='race.therace'>Løpet</Text></nobr>\n                                </a>\n                            </li>\n                            <li class='nav-item' style='max-width: 20%;'>\n                                <a href={`/race/${raceid}/mushers`} class={`text-overflow nav-link ${currentMenu === 'mushers' ? 'active' : ''}`}>\n                                    <nobr><i class='fas fa-users' /> <Text id='race.mushers'>Deltakere</Text></nobr>\n                                </a>\n                            </li>\n                            <li class='nav-item' style='max-width: 20%;'>\n                                <a href={`/race/${raceid}/results`} class={`text-overflow nav-link ${currentMenu === 'results' ? 'active' : ''}`}>\n                                    <nobr><i class='fas fa-poll' /> <Text id='race.results'>Resultater</Text></nobr>\n                                </a>\n                            </li>\n                            <li class='nav-item' style='max-width: 20%;'>\n                                <a href={`/race/${raceid}/media`} class={`text-overflow nav-link ${currentMenu === 'media' ? 'active' : ''}`}>\n                                    <nobr><i class='fas fa-images' /> <Text id='race.media'>Bilder</Text></nobr>\n                                </a>\n                            </li>\n                            <li class='nav-item' style='max-width: 20%;'>\n                                <a href={`/race/${raceid}/tracking`} class={`text-overflow nav-link ${currentMenu === 'tracking' ? 'active' : ''}`}>\n                                    <nobr><i class='fas fa-map-marked-alt' /> <Text id='race.tracking'>Tracking</Text></nobr>\n                                </a>\n                            </li>\n                        </ul>\n                    </div>\n\n\n                    {/* <div class={`col text-center subtopmenu ${path.match(/\\/race\\/:raceid$/) ? 'border-bottom border-primary' : ''}`}>\n                        <a href={`/race/${raceid}`} class={`text-${path.match(/\\/race\\/:raceid$/) ? 'primary' : 'secondary'} stretched-link`}>\n                            <nobr><i class='fas fa-chart-line' /> <Text id='race.therace'>Løpet</Text></nobr>\n                        </a>\n                    </div>\n                    <div class={`col text-center subtopmenu ${path.match(/\\/race\\/:raceid\\/mushers$/) ? 'border-bottom border-primary' : ''}`}>\n                        <a href={`/race/${raceid}/mushers`} class={`text-${path.match(/\\/race\\/:raceid\\/mushers$/) ? 'primary' : 'secondary'} stretched-link`}>\n                            <nobr><i class='fas fa-chart-line' /> <Text id='race.mushers'>Deltakere</Text></nobr>\n                        </a>\n                    </div>\n                    <div class={`col text-center subtopmenu ${path.match(/\\/race\\/:raceid\\/results$/) ? 'border-bottom border-primary' : ''}`}>\n                        <a href={`/race/${raceid}/results`} class={`text-${path.match(/\\/race\\/:raceid\\/results$/) ? 'primary' : 'secondary'} stretched-link`}>\n                            <nobr><i class='fas fa-chart-line' /> <Text id='race.results'>Resultater</Text></nobr>\n                        </a>\n                    </div>\n                    <div class={`col text-center subtopmenu ${path.match(/\\/race\\/:raceid\\/tracking$/) ? 'border-bottom border-primary' : ''}`}>\n                        <a href={`/race/${raceid}/tracking`} class={`text-${path.match(/\\/race\\/:raceid\\/tracking$/) ? 'primary' : 'secondary'} stretched-link`}>\n                            <nobr><i class='fas fa-chart-line' /> <Text id='race.tracking'>Tracking</Text></nobr>\n                        </a>\n                    </div> */}\n                </div>\n\t\t\t</>\n\t\t);\n\t}\n}\n\nexport default PublicRaceDetail;\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"pointerCursor\":\"pointerCursor__1W6mM\"};","import { h, Component } from 'preact';\nimport { Link } from 'preact-router/match';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport linkState from 'linkstate';\nimport { route } from 'preact-router';\nimport { Text, Localizer } from 'preact-i18n';\n\nimport style from './style.css';\n\n\nconst initialState = {\n    menu: {\n\t\tprofile: false,\n\t\tmain: false,\n\t},\n\tsearchText: '',\n};\n\n@observer\nclass Navigation extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            ...initialState,\n        };\n    }\n\n\ttoggleDropdown = (e) => {\n\t\tconst { menu } = this.state;\n\t\tlet menuName = e.target.dataset.name;\n\t\tif (!menuName && e.target.parentNode) {\n\t\t\tmenuName = e.target.parentNode.dataset.name;\n\t\t}\n\t\tif (menuName) {\n\t\t\tmenu[menuName] = !menu[menuName];\n\t\t}\n\t\tthis.setState({ menu });\n\t}\n\n\ttoggleDarkmode = (e) => {\n        const { appState } = this.props.stores;\n\t\tappState.toggleDarkmode();\n\t\tthis.toggleDropdown(e);\n\t}\n\n\ttoggleViewmode = (e) => {\n        const { appState } = this.props.stores;\n\t\tlet mode = e.target.dataset.mode;\n\t\tif (!mode && e.target.parentNode) {\n\t\t\tmode = e.target.parentNode.dataset.mode;\n\t\t}\n\t\tappState.toggleViewmode(mode);\n\t\tthis.toggleDropdown(e);\n\t}\n\n\treloadApp = () => {\n\t\twindow.location.reload(true);\n\t}\n\n\tadminLoadAll = async (e) => {\n        const { userStore } = this.props.stores;\n        await userStore.getInfo(true);\n\t}\n\n\tchangeLanguage = (e) => {\n\t\tconst lang = e.target.value;\n\t\tconsole.log('changeLanguage', lang);\n\t\tconst { appState, userStore } = this.props.stores;\n\t\tconst { user = {} } = userStore;\n\t\tif (user.email) {\n\t\t\tuserStore.setLanguage({ email: user.email, language: lang });\n\t\t}\n\t\tappState.setLanguage(lang);\n\t}\n\n\tsearch = () => {\n\t\tconst { searchText } = this.state;\n\t\troute(`/search/${searchText}`);\n\t}\n\n    render() {\n\t\tconst { menu, searchText } = this.state;\n        const { appState, userStore } = this.props.stores;\n        const { darkmode, viewmode, isCordova } = appState;\n\t\tconst { allUsers, isAdmin, user, notifications = [] } = userStore;\n\t\tconst unreadNotificatins = notifications.filter(e => !e.read);\n\t\tconst unread = unreadNotificatins.length || 0;\n\t\tconst { language = 'en' } = user;\n\n\t\treturn (\n\t\t\t<nav class='navbar navbar-expand-lg navbar-themed fixed-top py-1' style='z-index: 99999;'>\n\t\t\t\t<a class='navbar-brand' href='/race/'>\n\t\t\t\t\t{/* <img src={`./assets/logo-jul-2020-v2-${darkmode ? 'black' : 'white'}.png`} height='30' class='position-absolute' style='top: 8px; left: 6px' /> */}\n\t\t\t\t\t<img src={`./assets/homerun-race-logo-2-${darkmode ? 'white-' : ''}small.png`} height='37' class='position-absolute' style='top: 5px; left: 6px' />\n\t\t\t\t\t<span class='font-weight-normal' style='margin-left: 30px; font-size: 20px;'>Homerun Race</span>\n\t\t\t\t</a>\n\n\t\t\t\t<button class='navbar-toggler' type='button'\n\t\t\t\t\tdata-name='main'\n\t\t\t\t\tonClick={this.toggleDropdown}\n\t\t\t\t>\n\t\t\t\t\t<span class='navbar-toggler-icon' />\n\t\t\t\t</button>\n\n\t\t\t\t<div class={`collapse navbar-collapse ${menu.main ? 'show' : ''}`} id='navbarSupportedContent'>\n\t\t\t\t\t<ul class='navbar-nav mr-auto ml-5'>\n\t\t\t\t\t\t<li class='nav-item'>\n\t\t\t\t\t\t\t<Link className='nav-link' activeClassName={'active'} href='/race'\n\t\t\t\t\t\t\t\tdata-name='main'\n\t\t\t\t\t\t\t\tstyle='font-size: 1.0em !important;'\n\t\t\t\t\t\t\t\tonClick={this.toggleDropdown}\n\t\t\t\t\t\t\t><i class='fas fa-flag-checkered' /> <Text id='header.races'>Løpene</Text></Link>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t\t<li class='nav-item'>\n\t\t\t\t\t\t\t<Link className='nav-link' activeClassName={'active'} href='/race/support'\n\t\t\t\t\t\t\t\tdata-name='main'\n\t\t\t\t\t\t\t\tstyle='font-size: 1.0em !important;'\n\t\t\t\t\t\t\t\tonClick={this.toggleDropdown}\n\t\t\t\t\t\t\t><i class='far fa-question-circle' /> <Text id='header.support'>Support</Text></Link>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t\t<li class='nav-item'>\n\t\t\t\t\t\t\t<Link className='nav-link' activeClassName={'active'} href='/race/news'\n\t\t\t\t\t\t\t\tdata-name='main'\n\t\t\t\t\t\t\t\tstyle='font-size: 1.0em !important;'\n\t\t\t\t\t\t\t\tonClick={this.toggleDropdown}\n\t\t\t\t\t\t\t><i class='fas fa-quote-right' /> <Text id='header.news'>Nyheter</Text></Link>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t\t{/* <li class='nav-item'>\n\t\t\t\t\t\t\t<Link className='nav-link' activeClassName={'active'} href='/'\n\t\t\t\t\t\t\t\tdata-name='main'\n\t\t\t\t\t\t\t\tonClick={this.toggleDropdown}\n\t\t\t\t\t\t\t><i class='fas fa-dog' /> <Text id='header.backtoapp'>The Musher</Text></Link>\n\t\t\t\t\t\t</li> */}\n\t\t\t\t\t\t{/* <li class='nav-item'>\n\t\t\t\t\t\t\t<Link className='nav-link' activeClassName={'active'} href='/news'\n\t\t\t\t\t\t\t\tdata-name='main'\n\t\t\t\t\t\t\t\tonClick={this.toggleDropdown}\n\t\t\t\t\t\t\t><i class='fas fa-quote-right' /> <Text id='header.news'>Nyheter</Text></Link>\n\t\t\t\t\t\t</li> */}\n\t\t\t\t\t\t{/* <li class='nav-item d-block d-lg-none'>\n\t\t\t\t\t\t\t<Link className='nav-link' activeClassName={'active'} href='/howto'\n\t\t\t\t\t\t\t\tdata-name='main'\n\t\t\t\t\t\t\t\tonClick={this.toggleDropdown}\n\t\t\t\t\t\t\t><i class='fas fa-quote-right' /> <Text id='header.howto'>Hvordan gjør man det?</Text></Link>\n\t\t\t\t\t\t</li> */}\n\t\t\t\t\t</ul>\n\n\t\t\t\t\t<ul class='navbar-nav ml-auto '>\n\t\t\t\t\t\t{/* <li class='nav-item mr-2'>\n\t\t\t\t\t\t\t<Link className='nav-link' activeClassName={'active'}\n\t\t\t\t\t\t\t\thref='/users/notifications'\n\t\t\t\t\t\t\t\tdata-name='main'\n\t\t\t\t\t\t\t\tonClick={this.toggleDropdown}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<i class='fas fa-bell mr-1' />\n\t\t\t\t\t\t\t\t{unread > 0 && <>\n\t\t\t\t\t\t\t\t\t<span class='badge badge-pill badge-danger'>{unread > 9 ? '9+' : unread}</span>\n\t\t\t\t\t\t\t\t</>}\n\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t</li> */}\n\t\t\t\t\t\t<li class='nav-item mr-2'>\n\t\t\t\t\t\t\t<div class='form-row align-items-center'>\n\t\t\t\t\t\t\t\t<div class='col-auto my-1' style='width: 80px;'>\n\t\t\t\t\t\t\t\t\t<select class='custom-select'\n\t\t\t\t\t\t\t\t\t\tstyle='background-color: inherit; border: none; padding: 0; height: 1.1em; font-size: 0.9em;'\n\t\t\t\t\t\t\t\t\t\tonInput={this.changeLanguage}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<option value='no' selected={language === 'no'}>🇳🇴 NO</option>\n\t\t\t\t\t\t\t\t\t\t<option value='en' selected={language === 'en'}>🇬🇧 EN</option>\n\t\t\t\t\t\t\t\t\t\t<option value='es' selected={language === 'es'}>🇪🇸 ES</option>\n\t\t\t\t\t\t\t\t\t\t<option value='de' selected={language === 'de'}>🇩🇪 DE</option>\n\t                                    <option value='fr' selected={language === 'fr'}>🇫🇷 FR</option>\n\t                                    <option value='ru' selected={language === 'ru'}>🇷🇺 RU</option>\n\t                                    <option value='se' selected={language === 'se'}>🇸🇪 SE</option>\n\t\t\t\t\t\t\t\t\t</select>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t\t<li class='nav-item d-block d-lg-none'>\n\t\t\t\t\t\t\t<Link className='nav-link' activeClassName={'active'}\n\t\t\t\t\t\t\t\tdata-name='main'\n\t\t\t\t\t\t\t\tonClick={this.toggleDarkmode}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<i class={`${darkmode ? 'fas text-warning' : 'far'} fa-moon`} /> <Text id='header.darkmode'>Nattmodus</Text>\n\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t\t<li class='nav-item mr-2 d-none d-lg-block'>\n\t\t\t\t\t\t\t<button class='btn btn-link'\n\t\t\t\t\t\t\t\tdata-name='profile'\n\t\t\t\t\t\t\t\tonClick={this.toggleDarkmode}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<i class={`${darkmode ? 'fas text-warning' : 'far'} fa-moon`} />\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t\t{/* <li class='nav-item ml-auto d-none d-lg-block'>\n\t\t\t\t\t\t\t<form class='form-inline my-2 my-lg-0'>\n\t\t\t\t\t\t\t\t<Localizer>\n\t\t\t\t\t\t\t\t\t<input class='form-control form-control-sm mr-sm-2' type='search' placeholder={<Text id='header.search-placeholder'>Søk etter det meste...</Text>}\n\t\t\t\t\t\t\t\t\t\tvalue={searchText}\n\t\t\t\t\t\t\t\t\t\tonInput={linkState(this, 'searchText')}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</Localizer>\n\t\t\t\t\t\t\t\t<button class='btn btn-sm btn-outline-success my-2 my-sm-0' type='button'\t\n\t\t\t\t\t\t\t\t\tonClick={this.search}\n\t\t\t\t\t\t\t\t><Text id='header.search'>Søk</Text></button>\n\t\t\t\t\t\t\t</form>\n\t\t\t\t\t\t</li> */}\n\t\t\t\t\t</ul>\n\n\t\t\t\t    \n\n\t\t\t\t</div>\n\t\t\t</nav>\n\t\t);\n\t}\n}\n\nexport default Navigation;\n","import { h, Component } from 'preact';\nimport { useEffect } from 'preact/hooks';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport { Text, Localizer } from 'preact-i18n';\nimport Markdown from 'preact-markdown';\n\nimport Header from './header';\nimport Submenu from './submenu';\nimport Heatmap from '../../../components/public/heatmap';\nimport RaceHeader from './raceheader';\nimport RaceText from './raceText';\nimport DisplayMusher from './displayMusher';\nimport ListMusher from './listMusher';\nimport Gauge from '../../../components/gauge';\n\nimport mu from '../../../lib/musher-util';\nconst MARGIN_TOP = mu.marginTop(true, true);\nconst MARGIN_BOTTOM = mu.marginBottom();\n\nconst MARKDOWN_OPTIONS = {\n\tpedantic: false,\n\tgfm: true,\n\tbreaks: true,\n\tsanitize: false,\n\tsmartLists: true,\n\tsmartypants: true,\n\txhtml: true,\n};\n\nfunction PageTitle(title, classes = '', style = '') {\n\tuseEffect(() => {\n\t\tdocument.title = `Homerun Race: ${title}`;\n\t}, [title]);\n\treturn <span class={classes} style={style}>{title}</span>;\n}\n\nfunction getWindowDimensions() {\n    const { innerWidth: width, innerHeight: height } = window;\n    return {\n        width,\n        height\n    };\n}\n\nconst initialState = {\n\tisLoading: false,\n\temail: '',\n\tsubmenu: 'ads',\n\tjwtToken: util.getJwtToken(),\n\n\treloadInSec: null,\n\treloadIsActive: false,\n\n\tleaderboardMode: 'mushers',\n\tfilterByraceClass: '',\n\tshowLeaderBoard: true,\n\tshowNews: true,\n};\n\nconst RELOAD_INTERVAL_IN_SEC = 60;\n\n@observer\nclass ReloadTimer extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            ...initialState,\n        };\n\t\tthis.updateTimer = {};\n    }\n\n\tinitComponent = () => {\n\t\tthis.setState({\n\t\t\treloadIsActive: true,\n\t\t}, () => this.tickReloadTimeer());\n\t}\n\n\ttickReloadTimeer = () => {\n        const { reloadLastEpoch } = this.props;\n\t\tconst { reloadIsActive } = this.state;\n        if (reloadIsActive) {\n\t\t\tconst now = Math.floor(new Date().getTime() / 1000);\n\t\t\tconst reloadInSec = RELOAD_INTERVAL_IN_SEC - (now - reloadLastEpoch);\n\t\t\tthis.setState({ reloadInSec });\n\t\t\tclearTimeout(this.updateTimer.tick);\n\t\t\tthis.updateTimer.tick = setTimeout(() => this.tickReloadTimeer(), 1000);\n        }\n\t\treturn false;\n    }\n\n\tcomponentDidMount() {\n\t\tthis.initComponent();\n\t}\n\n\tcomponentWillUnmount() {\n\t\tclearTimeout(this.updateTimer.tick);\n\t}\n\n\trender() {\n\t\tconst { reloadInSec } = this.state;\n\t\tconst { radius = 13, fontSize = 11, classNames = '' } = this.props;\n\t\tconst reloadPercent = Math.floor(util.normalizeBetween(reloadInSec, 0, RELOAD_INTERVAL_IN_SEC, 0, 100))\n\n\t\treturn (<>\t\t\n\t\t\t<span class={classNames}>\n\t\t\t\t<Gauge key={`gauge-reload-page`}\n\t\t\t\t\tcolor='primary'\n\t\t\t\t\tradius={radius}\n\t\t\t\t\tshowPercentText={false}\n\t\t\t\t\tpercent={reloadPercent}\n\t\t\t\t\tshowCenterText={true}\n\t\t\t\t\tcenterText={reloadInSec}\n\t\t\t\t\tcenterTextSize={fontSize}\n\t\t\t\t\tcenterTextY={'55%'}\n\t\t\t\t/>\n\t\t\t</span>\n\t\t</>);\n\t}\n}\n\n@observer\nclass PublicRaceDetail extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            ...initialState,\n\t\t\treloadLastEpoch: Math.floor(new Date().getTime() / 1000),\n        };\n\t\tthis.updateTimer = {};\n    }\n\n\tloadLiveRaceResults = async (props = this.props, focusOnMushers) => {\n\t\tconst { raceStore } = props.stores;\n\t\tconst { race } = raceStore;\n\t\tawait raceStore.getRaceTrackerData(race.raceTrackerRace);\n\t\traceStore.getRaceTrackerActiveTeams();\n\t}\n\n\tloadRaceResults = async (props = this.props, teamIds, focusOnMushers) => {\n\t\tconst { raceStore } = props.stores;\n\t\tconst { raceid } = props;\n\n\t\tawait raceStore.loadWorkoutSummary(teamIds, raceid);\n\t\traceStore.getWorkoutSummaryActiveTeams(focusOnMushers);\n\t}\n\n\tasync loadRace(props = this.props) {\n\t\tthis.setState({ isLoading: true });\n\t\tconst { raceStore, appState } = props.stores;\n\t\tconst { raceid } = props;\n\t\tawait raceStore.load(raceid);\n\t\tconst { race } = raceStore;\n\t\tconst { focusOnMushers = [] } = appState;\n\n\t\tconst allTeamIds = race.classes.filter(currentClass => currentClass.contestants && currentClass.contestants.length > 0).map((currentClass) => {\n            return currentClass.contestants.filter(musher => musher.team > 0).map(musher => musher.team);\n\t\t}).flat();\n\n\t\tconst teamsInThisRace = focusOnMushers.filter(teamid => allTeamIds.indexOf(teamid) > -1);\n\t\tthis.setState({ allTeamIds });\n\t\tif (allTeamIds.length > 0) {\n\t\t\tawait raceStore.loadTeams(allTeamIds.join(','));\n\t\t\tif (race.liveRace > 0) {\n\t\t\t\tawait this.loadLiveRaceResults(props, focusOnMushers);\n\n\t\t\t} else {\n\t\t\t\tawait this.loadRaceResults(props, allTeamIds.join(','), focusOnMushers);\n\t\t\t}\n\n\t\t}\n\t\traceStore.getAllClassesSortedBy();\n\n\t\t// Set reload timer\n\t\tclearTimeout(this.updateTimer.reload);\n\t\tthis.updateTimer.reload = setTimeout(async () => {\n\t\t\tconst reloadLastEpoch = Math.floor(new Date().getTime() / 1000);\n\t\t\tthis.setState({ reloadLastEpoch });\n\t\t\tthis.loadRace();\n\t\t}, RELOAD_INTERVAL_IN_SEC * 1000);\n\n\t\tthis.setState({ isLoading: false });\n\t}\n\n\tsetLeaderboardMode = (e) => {\n\t\tconst leaderboardMode = e.target.parentElement.dataset.mode || e.target.dataset.mode;\n\t\tthis.setState({ leaderboardMode })\n\t}\n\n\tchooseRaceClass = (e) => {\n\t\tconst filterByraceClass = e.target.value;\n\t\tthis.setState({ filterByraceClass })\n\t}\n\n\ttoggleShowLeaderBoard = (hide) => {\n\t\tconst { showLeaderBoard } = this.state;\n\t\tif (hide === true) {\n\t\t\tthis.setState({ showLeaderBoard: false });\n\t\t} else {\n\t\t\tthis.setState({ showLeaderBoard: !showLeaderBoard });\n\t\t}\n\t}\n\n\ttoggleShowNews = (hide) => {\n\t\tconst { showNews } = this.state;\n\t\tif (hide === true) {\n\t\t\tthis.setState({ showNews: false });\n\t\t} else {\n\t\t\tthis.setState({ showNews: !showNews });\n\t\t}\n\t}\n\n\tcomponentWillUnmount() {\n\t\tclearTimeout(this.updateTimer.reload);\n\t\tclearTimeout(this.updateTimer.tick);\n\t}\n\n\tcomponentDidMount() {\n\t\tthis.loadRace();\n\t\tconst { width, height } = getWindowDimensions();\n\t\tif (width < 800) {\n\t\t\tthis.toggleShowLeaderBoard(true);\n\t\t\tthis.toggleShowNews(true);\n\t\t}\n\t}\n\n\tcomponentWillReceiveProps(nextProps) {\n\t\tthis.loadRace(nextProps);\n\t}\n\n\trender() {\n\t\tconst { appState, raceStore, userStore } = this.props.stores;\n\t\tconst { user = {} } = userStore;\n\t\tconst { raceid, path } = this.props;\n\t\tconst { language = 'en', focusOnMushers = [], infoOnMushers = [] } = appState;\n\t\tconst { leaderboardMode, filterByraceClass, showLeaderBoard, showNews, reloadLastEpoch, allTeamIds = [] } = this.state;\n\n\t\tconst teamsInThisRace = focusOnMushers.filter(teamid => allTeamIds.indexOf(teamid) > -1);\n\n\t\tconst { activeTeams, teamList, waypoints, zoomToMarkers, race, classes } = raceStore;\n\t\treturn (\n\t\t\t<>\n\t\t\t\t<div class='container-fluid h-100 position-relative p-0'>\n\t\t\t\t\t<Heatmap\n\t\t\t\t\t\tstores={this.props.stores}\n\t\t\t\t\t\traceid={raceid}\n\t\t\t\t\t\twaypoints={waypoints}\n\t\t\t\t\t\tzoomToMarkers={zoomToMarkers}\n\t\t\t\t\t\tfullscreenMap={true}\n\t\t\t\t\t\t// key={`heatmap-${focusOnMushers.join('-')}-${reloadLastEpoch}`}\n\t\t\t\t\t\t// mapid={`heatmap-${focusOnMushers.join('-')}-${reloadLastEpoch}`}\n\t\t\t\t\t/>\n\n\t\t\t\t\t<div class='position-absolute' style='top: 15px; left: 5px; z-index: 99999999;'>\n\t\t\t\t\t\t<div class='logo ml-3 clearfix text-white'>\n\t\t\t\t\t\t\t<img src={`./assets/homerun-race-logo-2-small.png`} height='37' class='float-left' />\n\t\t\t\t\t\t\t<a href={`/race/${race.id}`}>\n\t\t\t\t\t\t\t\t<span class='font-weight-bold text-dark' style='font-size: 1.4em;'>Homerun Race</span>\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t{!showLeaderBoard && <div class='position-absolute' style='top: 55px; left: 5px; z-index: 99999999; width: 150px; height: 50px;'>\n\t\t\t\t\t\t<button type='button' class='btn btn-sm btn-light' onClick={this.toggleShowLeaderBoard}>\n\t\t                    <ReloadTimer stores={this.props.stores} classNames='float-right ml-2' reloadLastEpoch={reloadLastEpoch} />\n\t\t\t\t\t\t\t<span class='float-left'>Leaderboard</span>\n\t\t\t\t\t\t</button>\n\t\t\t\t\t</div>}\n\n\t\t\t\t\t{!showNews && <div class='position-absolute' style='bottom: 40px; right: 5px; z-index: 99999999; width: 150px; height: 50px;'>\n\t\t\t\t\t\t<button type='button' class='btn btn-sm btn-primary float-right' onClick={this.toggleShowNews}>\n\t\t\t\t\t\t\t<span class='float-left'>News</span>\n\t\t\t\t\t\t</button>\n\t\t\t\t\t</div>}\n\n\t\t\t\t\t{showNews && race && race.articles && race.articles && race.articles.length >  0 && <div class='position-absolute' style='bottom: 50px; right: 5px; z-index: 99999999; width: 350px; height: 40vh;'>\n\t\t\t\t\t\t<div class='container-fluid bg-light rounded-lg py-2 overflow-auto mt-2' style='opacity: 0.9; height: 90%;'>\n\t\t\t\t\t\t\t<div class='row bg-light'>\n\t\t\t\t\t\t\t\t<div class='col-12 bg-primary text-white'>\n\t\t\t\t\t\t\t\t\t<button type='button' class='btn btn-sm btn-danger float-right' onClick={this.toggleShowNews}>\n\t\t\t\t\t\t\t\t\t\tX\n\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\tNews\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class='col-12 bg-light'>\n\t\t\t\t\t\t\t\t\t{race && race.articles && race.articles.reverse().map(article => <div class='border-bottom mb-2 pb-2 clearfix'>\n\t\t\t\t\t\t\t\t\t\t<small class='text-muted float-right'>{util.formatDate(article.date, { locale: language, hour12: false, hour: '2-digit', minute: '2-digit' })}</small>\n\t\t\t\t\t\t\t\t\t\t<h5>{mu.replaceImages(article.title, article.images, language, false)}</h5>\n\t\t\t\t\t\t\t\t\t\t{article.image && <img src={article.image.s3LargeLink} class='float-right rounded-lg ml-2' style='height: 100px;' />}\n\n\t\t\t\t\t\t\t\t\t\t{article.ingress && <strong>\n\t\t\t\t\t\t\t\t\t\t\t<Markdown markdown={mu.replaceImages(article.ingress, article.images, language)} markdownOpts={MARKDOWN_OPTIONS} />\n\t\t\t\t\t\t\t\t\t\t</strong>}\n\t\t\t\t\t\t\t\t\t\t{article.body && <p>\n\t\t\t\t\t\t\t\t\t\t\t<Markdown markdown={mu.replaceImages(article.body, article.images, language)} markdownOpts={MARKDOWN_OPTIONS} />\n\t\t\t\t\t\t\t\t\t\t</p>}\n\t\t\t\t\t\t\t\t\t</div>)}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>}\n\n\t\t\t\t\t{showLeaderBoard && <div class='position-absolute' style='top: 55px; left: 5px; z-index: 99999999; width: 350px; height: 90vh;'>\n\t\t\t\t\t\t<div class='container-fluid bg-light rounded-lg py-2 overflow-auto mt-2' style='opacity: 0.9; height: 90%;'>\n\t\t\t\t\t\t\t<div class='row bg-light'>\n\t\t\t\t\t\t\t\t<div class='col-12'>\n\t\t\t\t\t\t\t\t\t<button type='button' class='btn btn-sm btn-link float-right' onClick={this.toggleShowLeaderBoard}>\n\t\t\t\t\t\t\t\t\t\tX\n\t\t\t\t\t\t\t\t\t</button>\n\n\t\t\t\t\t\t\t\t\t<ReloadTimer stores={this.props.stores} classNames='float-right' radius={15} fontSize={13} reloadLastEpoch={reloadLastEpoch} />\n\t\t\t\t\t\t\t\t\t<h5 class='mb-0'>Leaderboard</h5>\n\t\t\t\t\t\t\t\t\t{PageTitle(race.title, 'font-weight-normal text-dark', 'font-size: 1.0em;')}\n\n\t\t\t\t\t\t\t\t\t<select class='form-control-plaintext' aria-describedby='classHelp'\n\t\t\t\t\t\t\t\t\t\tonInput={this.chooseRaceClass}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<option value=''>-- Choose class --</option>\n\t\t\t\t\t\t\t\t\t\t{race.classes && race.classes.sort((a, b) => a.distance - b.distance).map(currentClass => <>\n\t\t\t\t\t\t\t\t\t\t\t<option value={currentClass.id}>{currentClass.title} ({currentClass.totalMushers})</option>\n\t\t\t\t\t\t\t\t\t\t</>)}\n\t\t\t\t\t\t\t\t\t</select>\n\n\t\t\t\t\t\t\t\t\t<ul class='mt-2 nav nav-tabs nav-justified tracking-nav'>\n\t\t\t\t\t\t\t\t\t\t<li class='nav-item' style='width: 33%;'>\n\t\t\t\t\t\t\t\t\t\t\t<a class={`nav-link ${leaderboardMode === 'mushers' ? 'active' : ''}`} onClick={this.setLeaderboardMode} data-mode='mushers'><Text id='races.mushers'>Deltakere</Text></a>\n\t\t\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t\t\t<li class='nav-item' style='width: 33%;'>\n\t\t\t\t\t\t\t\t\t\t\t<a class={`nav-link ${leaderboardMode === 'onTrail' ? 'active' : ''}`} onClick={this.setLeaderboardMode} data-mode='onTrail'><Text id='races.on-trail'>På sporet nå</Text></a>\n\t\t\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t\t\t<li class='nav-item' style='width: 33%;'>\n\t\t\t\t\t\t\t\t\t\t\t<a class={`nav-link ${leaderboardMode === 'favorites' ? 'active' : ''}`} onClick={this.setLeaderboardMode} data-mode='favorites'><Text id='races.favorites'>Favoritter</Text></a>\n\t\t\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t{leaderboardMode === 'mushers' && <>\n\n\t\t\t\t\t\t\t\t{race.classes && race.classes.sort((a, b) => a.distance - b.distance)\n\t\t\t\t\t\t\t\t\t.filter((currentClass) => {\n\t\t\t\t\t\t\t\t\t\tif (filterByraceClass) {\n\t\t\t\t\t\t\t\t\t\t\tif (filterByraceClass === currentClass.id) {\n\t\t\t\t\t\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t.map(currentClass => <>\n\t\t\t\t\t\t\t\t\t\t<div class='row mt-2 bg-primary text-white'>\n\t\t\t\t\t\t\t\t\t\t\t<div class='col-12'>\n\t\t\t\t\t\t\t\t\t\t\t\t<h5 class='m-0'>\n\t\t\t\t\t\t\t\t\t\t\t\t\t{currentClass.title}\n\t\t\t\t\t\t\t\t\t\t\t\t</h5>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t{classes[currentClass.id] && classes[currentClass.id].contestants && classes[currentClass.id].contestants.map((contestant, idx) => {\n\t\t\t\t\t\t\t\t\t\t\tconst { musher, currentTeam, currentStages, currentResults, completed, duration,\n\t\t\t\t\t\t\t\t\t\t\t\tnormalizedDuration, weightedNormalizedDuration, totalKcalRelated, weightedTotalKcal,\n\t\t\t\t\t\t\t\t\t\t\t\tflatTotalKcal, percentHarder, loadIndex, raceDistance, isDone } = contestant;\n\t\t\t\t\t\t\t\t\t\t\treturn (<>\n\t\t\t\t\t\t\t\t\t\t\t\t<ListMusher stores={this.props.stores} team={currentTeam} idx={idx} />\n\t\t\t\t\t\t\t\t\t\t\t</>);\n\t\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\t</>)}\n\n\n\t\t\t\t\t\t\t\t{/* {(teamList && teamList.length > 0) ? teamList.filter((team) => {\n\t\t\t\t\t\t\t\t\tif (filterByraceClass) {\n\t\t\t\t\t\t\t\t\t\tconst raceClass = raceStore.getClassByTeamId(team.id);\n\t\t\t\t\t\t\t\t\t\tif (filterByraceClass === raceClass.id) {\n\t\t\t\t\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t\t\t}).map((team, idx) => <ListMusher stores={this.props.stores} team={team} idx={idx} />) : <>\n\t\t\t\t\t\t\t\t\t<div class='p-2 text-center'>\n\t\t\t\t\t\t\t\t\t\t<h5><Text id='races.no-teams-signed-up'>Ingen team påmeldt ennå...</Text></h5>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</>} */}\n\t\t\t\t\t\t\t</>}\n\n\t\t\t\t\t\t\t{leaderboardMode === 'favorites' && <>\n\t\t\t\t\t\t\t\t{(teamsInThisRace && teamsInThisRace.length > 0) ? teamsInThisRace.map((teamId, idx) => {\n\t\t\t\t\t\t\t\t\t\tconst team = raceStore.getTeamById(teamId);\n\t\t\t\t\t\t\t\t\t\treturn <ListMusher stores={this.props.stores} team={team} idx={idx} />;\n\t\t\t\t\t\t\t\t\t}\t\n\t\t\t\t\t\t\t\t) : <>\n\t\t\t\t\t\t\t\t\t<div class='p-2 text-center'>\n\t\t\t\t\t\t\t\t\t\t<h5><Text id='races.no-teams-signed-up'>Ingen team påmeldt ennå...</Text></h5>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</>}\n\t\t\t\t\t\t\t</>}\n\n\t\t\t\t\t\t\t{leaderboardMode === 'onTrail' && <>\n\t\t\t\t\t\t\t\t<div class='text-muted text-center bg-light'><Text id='races.mushers-on-trail'>Mushers on trail</Text>: {activeTeams.length}</div>\n\t\t\t\t\t\t\t\t{(activeTeams && activeTeams.length > 0) ? activeTeams.filter((line) => {\n\t\t\t\t\t\t\t\t\tif (filterByraceClass) {\n\t\t\t\t\t\t\t\t\t\tconst raceClass = raceStore.getClassByTeamId(line.team);\n\t\t\t\t\t\t\t\t\t\tif (filterByraceClass === raceClass.id) {\n\t\t\t\t\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t\t\t}).map((line, idx) => {\n\t\t\t\t\t\t\t\t\tconst team = raceStore.getTeamById(line.team);\n\t\t\t\t\t\t\t\t\treturn (<ListMusher stores={this.props.stores} team={team} idx={idx} />);\n\t\t\t\t\t\t\t\t}) : <>\n\t\t\t\t\t\t\t\t\t<div class='p-2 text-center'>\n\t\t\t\t\t\t\t\t\t\t<h5><Text id='races.no-team-on-trail'>Ingen team tracker live i The Musher appen akkurat nå...</Text></h5>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</>}\n\t\t\t\t\t\t\t</>}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>}\n\n\t\t\t\t\t{(infoOnMushers && infoOnMushers.length > 0 && teamList && teamList.length > 0) && <>\n\t\t\t\t\t\t<div class='position-absolute overflow-auto' style='top: 15px; right: 55px; z-index: 99999999; max-width: 830px; max-height: 90%;'>\n\t\t\t\t\t\t\t<div class=''>\n\t\t\t\t\t\t\t\t<div class='d-flex flex-wrap'>\n\t\t\t\t\t\t\t\t\t{infoOnMushers.map(teamId => <DisplayMusher stores={this.props.stores} teamId={teamId} />)}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</>}\n\n\t\t\t\t</div>\n\n\t\t\t</>\n\t\t);\n\t}\n}\n\nexport default PublicRaceDetail;\n","import { h, Component } from 'preact';\nimport { observer } from 'mobx-preact';\n\nconst initialState = {\n};\n\n@observer\nclass RaceText extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            ...initialState,\n        };\n    }\n\n    render() {\n\t\tconst { appState } = this.props.stores;\n\t\tconst { text } = this.props;\n\t\tconst { darkmode, language = 'en' } = appState;\n\n        let finalText = text;\n\n        const regex = new RegExp(`/<${language}>(.*?)<\\/${language}>/`);\n        const parsedText = text.replace(regex, '$1');\n        if (parsedText) {\n            finalText = text;\n        }\n\n\t\treturn (\n\t\t\t<>\n                {finalText}\n\t\t\t</>\n\t\t);\n\t}\n}\n\nexport default RaceText;\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"gaugeBackground\":\"gaugeBackground__1UGxt\",\"gauge\":\"gauge__2ZDxd\",\"success\":\"success__3UQxg\",\"primary\":\"primary__3pPV6\",\"secondary\":\"secondary__-Vrk_\",\"info\":\"info__3t5zs\",\"warning\":\"warning__1jHlR\",\"danger\":\"danger__BLVC9\",\"gaugeText\":\"gaugeText__1on-w\"};","import { h, Component } from 'preact';\nimport { useEffect } from \"preact/hooks\";\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport { Text, Localizer } from 'preact-i18n';\n\nconst initialState = {\n};\n\n@observer\nclass DisplayMusher extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            ...initialState,\n        };\n    }\n\n\ttoggleFocusOnMusher = (e) => {\n\t\tconst musherId = e.target.parentElement.dataset.musherid || e.target.dataset.musherid;\n\t\tconst { appState, raceStore } = this.props.stores;\n\t\tappState.toggleFocusOnMusher(parseInt(musherId, 10));\n\n\t\tconst { focusOnMushers } = appState;\n\t\traceStore.getWorkoutSummaryActiveTeams(focusOnMushers);\n\t}\n\n\ttoggleInfoOnMusher = (e) => {\n\t\tconst musherId = e.target.parentElement.dataset.musherid || e.target.dataset.musherid;\n\t\tconst { appState } = this.props.stores;\n\t\tappState.toggleInfoOnMusher(parseInt(musherId, 10));\n\t}\n\n    render() {\n\t\tconst { raceStore, appState } = this.props.stores;\n\t\tconst { teamId } = this.props;\n\t\tconst { darkmode, language = 'en' } = appState;\n\t\tconst { race } = raceStore;\n\n        const team = raceStore.getTeamById(teamId);\n        if (!team || !team.id) {\n            return <></>;\n        }\n        const line = raceStore.getActiveTeamById(team.id);\n        const currentStages = raceStore.getWorkoutSummaryByTeam(team.id).reverse();\n        const currentClass = raceStore.getClassByTeamId(team.id);\n        const currentResults = raceStore.getWorkoutResultsByTeam(currentStages, currentClass.distance);\n        const musher = raceStore.getMusherByTeamId(team.id);\n        const image = team.images && team.images.length > 0 ? team.images[0] : {};\n        const raceClass = raceStore.getClassByTeamId(team.id);\n\n        const completed = currentResults.distanceKm / currentClass.distance * 100;\n        const hasStarted = completed > 0 ? 1 : 0;\n        const isDone = completed >= 100 ? 1 : 0;\n\n        let currentSpeed;\n        let updated;\n        let isActive;\n        if (line && line.currentLocation && line.currentLocation.coords) {\n            currentSpeed = line.currentLocation.coords.speed * 3.6;\n            updated = line.currentLocation.timestamp;\n            isActive = true;\n        }\n        let toFinish = raceClass.distance - currentResults.distanceKm;\n        if (toFinish < 0) {\n            toFinish = 0;\n        }\n\n        // const currentSpeed = util.format(line.currentLocation.coords.speed * 3.6, 1);\n        // avgDogs: 9.777777777777779\n        // distanceKm: 268.3432364824406\n        // duration: 67524.34002106966\n        // elevation: 5287.123805500813\n        // flatTotalKcal: 4971.658025959346\n        // images: Array(32) [ Proxy, Proxy, Proxy, … ]\n        // loadIndex: 1446\n        // rest: 2306\n        // speedAvg: 14.820718823260847\n        // totalKcalRelated: 1225.314525471911\n        // weightedTotalKcal: 11344.398317216459\n\n\n\t\treturn (\n\t\t\t<>\n                <div class='mr-2 mb-2 overflow-auto' style='width: 350px !important; max-height: 350px; overflow-x: hidden !important;'>\n                    <div class='p-2 bg-light rounded-lg'>\n                        <div class='row mt-2' style='font-size: 0.9em;'>\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n                            <div class='col-4 text-center'>\n                                <div\n                                    class={`text-center text-muted pt-2 h-100`}\n                                    style={`background-image: url(\"${image.s3SmallLink}\"); background-size: cover;`}\n                                    onClick={this.toggleFocusOnMusher} data-musherid={team.id}\n                                >\n                                    {!image.s3SmallLink && <>\n                                        <span class='font-weight-lighter' style='font-size: 55px;'>\n                                            {util.ucfirst(String(musher.firstname), true)}\n                                            {util.ucfirst(String(musher.lastname), true)}\n                                        </span>\n                                    </>}\n                                </div>\n                            </div>\n                            <div class='col-8'>\n                                <div class='row'>\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n                                    <div class='col-12' style='font-size: 1.5em; line-height: 1.0em;'>\n                                        <button\n                                            type='button'\n                                            class='btn btn-sm float-right'\n                                            onClick={this.toggleInfoOnMusher} data-musherid={team.id}\n                                        >\n                                            X\n                                        </button>\n                                        <span class='font-weight-bold'>{musher.firstname} {musher.lastname}</span><br />\n                                        <span class='font-weight-lighter'>{team.name}</span><br />\n                                        {raceClass && raceClass.title && <>\n                                            <span class='font-weight-lighter mr-2' style='font-size: 0.8em;'>\n                                                {raceClass.title} - \n                                            </span>\n                                        </>}\n                                        <span class='font-weight-lighter' style='font-size: 0.8em;'>\n                                            {util.format(currentResults.avgDogs, 1)} <i class='fas fa-dog text-muted ml-1' />\n                                        </span>\n                                    </div>\n                                </div>\n                                <div class='row mt-2'>\n                                    <div class='col-4 text-center' style='line-height: 1.4em;'>\n                                        <span class='text-muted'>km/t</span><br />\n                                        <span style='font-size: 2.0em;'>{util.format(currentResults.speedAvg, 1)}</span>\n                                    </div>\n                                    <div class='col-4 text-center' style='line-height: 1.4em;'>\n                                        <span class='text-muted'>km</span><br />\n                                        <span style='font-size: 2.0em;'>{util.format(currentResults.distanceKm)}</span>\n                                    </div>\n                                    <div class='col-4 text-center' style='line-height: 1.4em;'>\n                                        <span class='text-muted'>to finish</span><br />\n                                        <span style='font-size: 2.0em;'>\n                                            {toFinish === 0 ? <i class='fas fa-flag-checkered text-success' /> : <>{util.format(toFinish, 0)}</>}\n                                        </span>\n                                    </div>\n                                </div>\n                                <div class='row mt-2'>\n                                    <div class='col-6 text-center' style='line-height: 1.4em;'>\n                                        <span class='text-muted'>\n                                            {toFinish === 0 ? <>\n                                                Calc.Duration\n                                            </> : <>\n                                                Duration\n                                            </>}\n                                        </span><br />\n                                        <span style='font-size: 1.5em;'>\n                                            {toFinish === 0 ? <>\n                                                {util.secToHms(currentResults.weightedNormalizedDuration || currentResults.duration)}\n                                            </> : <>\n                                                {util.secToHms(currentResults.duration)}\n                                            </>}\n                                        </span>\n                                    </div>\n                                    <div class='col-6 text-center' style='line-height: 1.4em;'>\n                                        <span class='text-muted'>Status</span><br />\n                                        <span style='font-size: 1.5em;'>\n                                            {isActive ? <>\n                                                {line.isInProgress === 1 ? <span class='text-primary'>running</span> : ''}\n                                                {line.isInProgress === 2 ? <span class='text-danger'>resting</span> : ''}\n                                                {toFinish === 0 ? <>\n                                                    {!line.isInProgress ? <span class='text-success'>FINISH</span> : ''}\n                                                </> : <>\n                                                    {!line.isInProgress ? <>\n                                                        {hasStarted ? <span class='text-danger'>resting</span> : <span class='text-muted'>NYS</span>}\n                                                    </> : '-'}                                                    \n                                                </>}\n                                            </> : <>\n                                                {toFinish === 0 ? <span class='text-success'>FINISH</span> : <>\n                                                    {hasStarted ? <span class='text-danger'>resting</span> : <span class='text-muted'>NYS</span>}\n                                                </>}\n                                            </>}\n                                        </span>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                        <div class='row mt-2' style='font-size: 0.9em;'>\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n                            <div class='col-6'>\n                                <table class='table table-sm table-striped'>\n                                    <tbody>\n                                        <tr>\n                                            <td>Current speed</td>\n                                            <td>{currentSpeed ? <>{util.format(currentSpeed, 1)} km/t</> : '-'}</td>\n                                        </tr>\n                                        <tr>\n                                            <td>Avg speed</td>\n                                            <td>{util.format(currentResults.speedAvg, 1)} km/t</td>\n                                        </tr>\n                                        <tr>\n                                            <td>Duration</td>\n                                            <td>{util.secToHms(currentResults.duration)}</td>\n                                        </tr>\n                                        <tr>\n                                            <td>Calculated duration</td>\n                                            <td>{util.secToHms(currentResults.weightedNormalizedDuration)}</td>\n                                        </tr>\n                                        <tr>\n                                            <td>Rest</td>\n                                            <td>{util.secToHms(currentResults.rest)}</td>\n                                        </tr>\n                                        <tr>\n                                            <td>Elevation</td>\n                                            <td>{util.format(currentResults.elevation, 0)} m</td>\n                                        </tr>\n                                        <tr>\n                                            <td>Altitude</td>\n                                            <td>{isActive ? <>{line.currentLocation.coords.altitude} moh</> : '-'}</td>\n                                        </tr>\n                                        <tr>\n                                            <td>Load index</td>\n                                            <td>{currentResults.loadIndex}</td>\n                                        </tr>\n                                        <tr>\n                                            <td>Updated:</td>\n                                            <td>{isActive ? <>{util.formatDistance(updated, new Date())} ago</> : '-'}</td>\n                                        </tr>\n                                    </tbody>\n                                </table>\n                            </div>\n                            <div class='col-6'>\n                                <span>Elevation profile:</span><br />\n                                {isActive ? <svg viewBox='0 0 300 100' style='width: 180px; height: 60px; top: 0; left: 0;'>\n                                    <path d={`${line.svgElevation}`} style='fill: #0063FF; stroke: #0063FF; stroke-width: 2; opacity: 0.2;' />\n                                </svg> : <div>-</div>}\n                                <span>Map profile:</span><br />\n                                {isActive ? <svg viewBox='0 0 300 300' style='width: 180px; height: 180px; top: 0; left: 0;'>\n                                    <path d={`${line.svgMap}`} style='fill: none; stroke: #FF6300; stroke-width: 5; opacity: 0.2;' />\n                                </svg> : <div>-</div>}\n                            </div>\n                        </div>\n\n                        <div class='mt-2' style='font-size: 0.9em;'>\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n\n                            <div class='d-flex flex-wrap'>\n                                {currentStages && currentStages.map((stage, idx) => {\n                                    const percent = stage.distanceKm / currentClass.distance * 100;\n                                    const width = percent > 100 ? 100 : parseInt(percent, 10);\n                                    const currentEpoch = Math.floor(new Date(stage.date).getTime() / 1000);\n                                    const inDate = new Date(0); // The 0 there is the key, which sets the date to the epoch\n                                    inDate.setUTCSeconds(currentEpoch + parseInt(stage.duration, 10));\n                                    const images = stage.images.flat();\n                                    if (1) {\n                                        return (<>\n                                            <div class='bg-light border rounded-lg text-right position-relative mr-1 mb-1'>\n                                                <svg viewBox='0 0 300 100' class='position-absolute' style='width: 100%; height: 95%; bottom: 0px; left: 0px; z-index: 0;'>\n                                                    <path d={`${stage.svgElevation}`} style='fill: #0063FF; stroke: #0063FF; stroke-width: 2; opacity: 0.2;' />\n                                                </svg>\n                                                <div class='position-relative px-3'>\n                                                    <span class='position-absolute' style='top: 3px; left: 3px; font-size: 1.3em;'>{idx + 1}</span>\n                                                    <small>\n                                                        <span class='float-left'>\n                                                            <nobr><i style='width: 20px;' class='fas fa-sign-out-alt' /> {util.formatDate(stage.date, { locale: language, hour12: false, hour: '2-digit', minute: '2-digit' })}</nobr>\n                                                            <nobr><i style='width: 20px;' class='fas fa-sign-in-alt' /> {util.formatDate(inDate, { locale: language, hour12: false, hour: '2-digit', minute: '2-digit' })}</nobr>\n                                                        </span>\n                                                        <span class='float-right'>\n                                                            {/* {restTimeText}\n                                                            {restTimeTrackText} */}\n                                                            <nobr><i style='width: 20px;' class='fas fa-road' /> {util.format(stage.distanceKm, 1) || 'n/a'} <span class='font-weight-lighter'>km</span></nobr>\n                                                            <nobr><i style='width: 20px;' class='fas fa-mountain' /> {util.format(stage.elevation, 0) || 'n/a'} <span class='font-weight-lighter'>m</span></nobr>\n                                                            <nobr><i style='width: 20px;' class='fas fa-tachometer-alt' /> {util.format(stage.speedAvg, 1) || 'n/a'} <span class='font-weight-lighter'>km/t</span></nobr><br />\n\n                                                            <nobr><i style='width: 20px;' class='fas fa-clock' /> {util.secToHms(stage.duration) || 'n/a'}</nobr>\n                                                            <nobr><i style='width: 20px;' class='fas fa-moon' /> {util.secToHms(stage.rest) || 'n/a'}</nobr><br />\n                                                            <nobr><i style='width: 20px;' class='fas fa-dog' /> {util.format(stage.avgDogs, 0) || 'n/a'}</nobr>\n                                                            <nobr><i style='width: 20px;' class='fas fa-balance-scale' /> {util.format(stage.loadIndex, 0) || 'n/a'}</nobr><br />\n                                                            <nobr><i style='width: 20px;' class='fas fa-images' /> {images.length}</nobr><br />\n                                                        </span>\n                                                    </small>\n                                                </div>\n                                            </div>\n                                        </>);\n                                    }\n                                    return (<>\n                                        <div class='bg-light border rounded-lg text-right position-relative px-3 mr-1 mb-1' style={`width: ${width}%; min-width: 320px;`}>\n                                            <small>\n                                                <span class='float-left'>{idx + 1}</span>\n                                                <nobr><i style='width: 20px;' class='fas fa-road' /> {util.format(stage.distanceKm, 1) || 'n/a'} <span class='font-weight-lighter'>km</span></nobr>\n                                                <nobr><i style='width: 20px;' class='fas fa-tachometer-alt' /> {util.format(stage.speedAvg, 1) || 'n/a'} <span class='font-weight-lighter'>km/t</span></nobr>\n                                                <nobr><i style='width: 20px;' class='fas fa-clock' /> {util.secToHms(stage.duration) || 'n/a'}</nobr>\n                                            </small>\n                                        </div>\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n                                    </>);\n                                })}\n                            </div>\n\n                        </div>\n\n                    </div>\n                </div>\n\t\t\t</>\n\t\t);\n\t}\n}\n\nexport default DisplayMusher;\n","import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\n\nimport style from './style.css';\n\nconst initialState = {\n    mouseData: {},\n};\n\n@observer\nclass Gauge extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            ...initialState,\n        };\n        this.svgRef = null;\n    }\n\n    render() {\n        const {\n            radius = 50,\n            heightAdd = 0,\n            color = 'success',\n\n            showPercentText = true,\n            percent = 0,\n            prefix = '',\n\n            showCenterText= false,\n            centerText,\n            centerTextSize,\n            centerTextX,\n            centerTextY,\n\n            total = '',\n            totalY = '90%',\n            totalX = '50%',\n            totalTextAnchor = 'middle',\n                        \n            completed = '',\n            completedY = '65%',\n            completedX = '50%',\n            completedTextAnchor = 'middle',\n        } = this.props;\n        const strokeWidth = radius * 0.3;\n        const innerRadius = radius - strokeWidth / 2;\n\n        const strokeWidthGauge = radius * 0.3;\n\n        const circumference = innerRadius * 2 * Math.PI;\n        const arc = circumference * (270 / 360);\n        const dashArray = `${arc} ${circumference}`;\n        const transform = `rotate(135, ${radius}, ${radius})`;\n\n        const percentNormalized = Math.min(Math.max(percent, 0), 100);\n        const offset = arc - (percentNormalized / 100) * arc;\n\n        const textSize = centerTextSize || radius / 2.5;\n        const textSizeSmall = radius / 5;\n\n        return (\n            <>\n                <svg xmlns='http://www.w3.org/2000/svg' class={style.svg}\n                    // viewBox={`0 0 ${radius * 2} ${radius * 2}`}\n                    width={radius * 2}\n                    height={radius * 2 + heightAdd}\n                    preserveAspectRatio='none'\n                    ref={c => this.svgRef = c}\n                >\n\n                    <circle\n                        class={`${style.gaugeBackground}`}\n                        cx={radius}\n                        cy={radius}\n                        r={innerRadius}\n                        strokeWidth={strokeWidth}\n                        strokeDasharray={dashArray}\n                        strokeLinecap='round'\n                        transform={transform}\n                    />\n                    \n                    <circle\n                        class={`${style[color]} ${style.gauge}`}\n                        cx={radius}\n                        cy={radius}\n                        r={innerRadius}\n                        stroke='url(#grad)'\n                        strokeDasharray={dashArray}\n                        strokeDashoffset={offset}\n                        strokeLinecap='round'\n                        strokeWidth={strokeWidthGauge}\n                        style={{\n                            transition: 'stroke-dashoffset 0.3s',\n                        }}\n                        transform={transform}\n                    />\n                     \n                    {showPercentText && <text\n                        class={`${style.gaugeText} ${style[color]}`}\n                        x={centerTextX || '50%'}\n                        y={centerTextY || '50%'}\n                        dominant-baseline='middle'\n                        text-anchor='middle'\n                        font-size={textSize}\n                    >{percent} {prefix}</text>}\n\n                    {showCenterText && <text\n                        class={`${style.gaugeText} ${style[color]}`}\n                        x={centerTextX || '50%'}\n                        y={centerTextY || '50%'}\n                        dominant-baseline='middle'\n                        text-anchor='middle'\n                        font-size={textSize}\n                    >{centerText}</text>}\n\n                    {completed && <text\n                        class={`${style.gaugeText} ${style[color]}`}\n                        x={completedX}\n                        y={completedY}\n                        dominant-baseline='middle'\n                        text-anchor={completedTextAnchor}\n                        font-size={textSizeSmall}\n                    >{completed}</text>}\n\n                    <text\n                        class={`${style.gaugeText} ${style.secondary}`}\n                        x={totalX}\n                        y={totalY}\n                        dominant-baseline='middle'\n                        text-anchor={totalTextAnchor}\n                        font-size={textSizeSmall}\n                    >{total}</text>\n\n                </svg>\n            </>\n        );\n    }\n}\n\nexport default Gauge;\n"],"sourceRoot":""}