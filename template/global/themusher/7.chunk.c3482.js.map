{"version":3,"sources":["webpack:///./components/imageSlider/index.js","webpack:///./components/dog/status.js","webpack:///./components/data/distance.js","webpack:///./components/style.css","webpack:///./components/data/temperature.js","webpack:///./components/form/files.js","webpack:///./components/modal/index.js","webpack:///./components/data/weight.js","webpack:///./components/dog/formGraph.js","webpack:///./components/data/elevation.js","webpack:///./components/dog/calendar.js","webpack:///./components/data/speed.js","webpack:///./routes/dogs/detail.js","webpack:///./components/premium/badge.js","webpack:///./components/dog/history.js"],"names":["observer","props","touchStart","e","stopPropagation","setState","startX","touches","pageX","touchEnd","undefined","sliding","touchMove","state","totalImages","x","prevImage","nextImage","images","imageContainer","currentImage1","currentImage2","currentIdx","length","imageDots","Array","fill","map","y","this","nextImageContainer","nextIdx","componentWillReceiveProps","nextProps","nextImages","render","imgHeight","imgWidth","img","curImage","dimensions","width","height","orientation","imageRatio","class","style","onTouchstart","onTouchend","onTouchmove","loading","src","s3LargeLink","ref","c","image1","image2","i","Component","Dog","dog","showWorkout","showInfo","hideTeam","fullWidth","daysBack","filterBy","stores","userStore","dogStore","workoutPlanStore","user","language","dogStatus","findDogstatus","status","dogStatuses","statuses","dogPosition","findDogposition","position","workoutSummary","findCurrentWorkoutSummary","id","currentWeek","util","getWeek","Date","currentYear","getYear","currentMonth","getMonth","seasonStart","parseInt","week","year","planWeek","sumWorkoutPlanDaysBack","completedWeek","format","distanceKm","hasBirthday","mu","birth","hasWorkoutPlan","percentComplete","image","s3SmallLink","ucfirst","name","key","radius","heightAdd","showPercentText","percent","prefix","total","totalY","completed","completedY","age","deceased","gender","href","shortname","findTeam","team","positions","lead","point","wheel","elevation","duration","secToHms","speedAvg","weight","bodyScore","icon","specialNeeds","displayDistance","distance","Distance","value","smallUnit","settings","imperial","kmToMiles","module","exports","Temperature","celciusToFahrenheit","Files","handleAddImage","file","updateField","object","field","files","uploadStatus","before","after","autoOpen","apiUrl","Modal","toggleDate","showDate","startY","pageY","readyToRefresh","appContainer","scrollTop","refreshing","close","imagexxl","thumb","title","date","onClick","formatDate","locale","formatDistance","target","rel","download","Weight","kgToPounds","FormGraph","graphFitness","graphFatigue","graphForm","xTicksAll","partsLength","Math","floor","xTicks","l","push","showXTicks","paddingTop","lineFromXzero","lineFromXmax","dataLeft","dataFillLeft","legendLeft","dataRight","legendRight","showYTicksLeft","avgWindowLeft","smoothLeft","showYTicksRight","scrollToRight","Elevation","meterToFeet","RED_DAYS","HistoryCalendar","setHistoryType","callback","historyType","dataset","historytype","parentElement","chooseDay","yyyy","mm","month","dd","day","setDay","loadHistorySummary","isLoading","currentTeam","workoutStore","getFeed","componentDidMount","chosenDD","chosenMM","chosenYYYY","filterHistories","HISTORY_TYPE_MAP","getHistoryMap","DAYS","getDays","MONTHS","getMonths","currentDay","getDate","getFullYear","basehref","monthNum","yearNum","getNextMonth","nextMonth","nextYear","getPrevMonth","prevMonth","prevYear","daysOfMonth","getDaysInMonth","weeksInMonth","getWeeksInMonth","daysOfWeek","getDaysInWeek","isoDate","getDay","weekObj","histories","findHistory","endHistories","findEndHistory","isChosen","isToday","isDayOff","indexOf","data-day","data-month","data-year","filter","history","idx","bgColor","getHistoryTypeColor","getHistoryPri","data-historytype","Speed","kmtToMph","MARGIN_TOP","marginTop","MARGIN_TOP_BACK","marginTopBack","MARGIN_BOTTOM","marginBottom","initialState","submenu","Input","handleImageErrored","onerror","setTimeout","removeImage","removeFile","saved","type","datalist","min","max","step","help","onInput","refName","showImages","showFiles","maxValue","for","createdDate","formatBytes","size","data-name","onError","list","aria-describedby","data-id","data-field","el","DogsDetail","loadDog","dogId","Promise","all","load","addData","getWorkoutSummary","findWorkoutSummaryCurrenSeason","findWorkoutSummaryPreviousSeason","loadTeam","motherChipId","loadExternalDogs","fatherChipId","plotFormGraph","loadWorkoutPlans","workoutPlanCurrent","updateItem","resetGraphPlanWeekDistanceCurrent","query","seasonYear","seasonMonth","workoutPlans","prepareWeekGraphs","updateKeyValue","showModal","preventDefault","displayModal","currentImage","currentImageXXL","closeModal","deleteDog","saveField","PubSub","publish","topics","STATUS_MESSAGE","message","route","elementtype","isNew","updateFieldValue","datatype","skipTimer","newValue","localObjectValue","isArray","split","parseFloat","updateObjectKeyValue","doUpdateField","clearTimeout","updateTimer","chooseSubmenu","menu","back","goBack","toggleCalendar","showCalendar","newHistory","time","isoTime","loadAll","teamStore","workoutPlan","vaccineStatuses","historyStatuses","workoutSummaryCurrentSeason","workoutSummaryPreviousSeason","hasHistory","teamNames","teams","forEach","dogVaccineLogStatuses","findVaccineLogStatuses","chipId","dogMother","findDog","mother","dogFather","father","children","findChildren","siblings","findSiblings","daysUntilBirthday","ceil","daysUntilNextBirthday","findHarness","harness","v","endDate","vaccineType","data-menu","horizontal","vertical","description","markdown","replaceImages","markdownOpts","getMarkdownOptions","currentSeason","prevSeason","Object","keys","asNumber","motherName","fatherName","d","className","getNestedValue","fields","reverse","line","trophys","getTrophyImage","textHeader","descriptionHeader","text","vac","inKarens","vaccineAgens","durationEnd","karensDaysLeft","vaccineName","veterinaryFirstname","veterinaryLastname","veterinaryEmail","achievements","url","links","s3Link","VACCINE_TYPES","getVaccineTypes","DogHistoryLine","eventFired","diffY","diffX","deleteVerify","reset","deleted","deleteHistoryRequest","deleteHistory","save","$pull","_id","swipeLeft","hasImage","isBeeingEdited","hoverElement","hoverelementonly","abs","grouped","dogImage","dogShortname","dogName","email","comment","cost"],"mappings":"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","file":"7.chunk.c3482.js","sourcesContent":["import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\n\n@observer\nclass ImageSlider extends Component {\n    constructor(props) {\n        super(props);\n        const { images = [] } = props;\n        this.state = {\n            imageContainer: 1,\n            currentImage1: images[0] || {},\n            currentImage2: {},\n            currentIdx: 0,\n            totalImages: images.length || 0,\n            imageDots: [...Array(images.length || 0).fill(1).map((x, y) => x + y)],\n        };\n    }\n\n    nextImage() {\n        // console.log('next');\n        const { images } = this.props;\n        const { totalImages, currentIdx, imageContainer } = this.state;\n        const nextImageContainer = imageContainer === 1 ? 2 : 1;\n        let nextIdx = currentIdx + 1;\n        if (nextIdx > totalImages -1) {\n            nextIdx = 0;\n        }\n        this.setState({\n            [`currentImage${nextImageContainer}`]: images[nextIdx],\n            currentIdx: nextIdx,\n            imageContainer: nextImageContainer,\n        });\n    }\n\n    prevImage() {\n        // console.log('prev');\n        const { images } = this.props;\n        const { totalImages, currentIdx, imageContainer } = this.state;\n        const nextImageContainer = imageContainer === 1 ? 2 : 1;\n        let nextIdx = currentIdx - 1;\n        if (nextIdx < 0) {\n            nextIdx = totalImages - 1;\n        }\n        this.setState({\n            [`currentImage${nextImageContainer}`]: images[nextIdx],\n            currentIdx: nextIdx,\n            imageContainer: imageContainer === 1 ? 2 : 1,\n        });\n    }\n\n    touchStart = (e) => {\n        e.stopPropagation();\n        this.setState({\n            startX: e.touches[0].pageX,\n        })\n    }\n\n    touchEnd = (e) => {\n        e.stopPropagation();\n        this.setState({\n            startX: undefined,\n            sliding: false,\n        })\n    }\n\n    touchMove = (e) => {\n        e.stopPropagation();\n        // e.preventDefault();\n        const { totalImages } = this.state;\n        if (totalImages > 1) {\n            const { startX, sliding } = this.state;\n            const scrollDistance = 50;\n            const x = e.touches[0].pageX;\n            if (!sliding) {\n                if (x > startX + scrollDistance) {\n                    this.setState({ sliding: true })\n                    this.prevImage();\n                } else if (x < startX - scrollDistance) {\n                    this.setState({ sliding: true })\n                    this.nextImage();\n                }\n            }\n        }\n    }\n\n    componentWillReceiveProps(nextProps) {\n        // console.log('componentWillReceiveProps', nextProps);\n        if (nextProps.images !== this.props.images) {\n            const { images: nextImages = [] } = nextProps;\n            this.setState({\n                imageContainer: 1,\n                currentImage1: nextImages.length > 0 ? nextImages[0] : {},\n                currentImage2: {},\n                currentIdx: 0,\n                totalImages: nextImages.length || 0,\n                imageDots: [...Array(nextImages.length || 0).fill(1).map((x, y) => x + y)],\n            });\n        }\n    }\n\n    render() {\n        const { currentImage1, currentImage2, imageContainer, totalImages, imageDots, currentIdx } = this.state;\n        const img = this[`image${imageContainer}`];\n        const curImage = imageContainer === 1 ? currentImage1 : currentImage2;\n        const htmlImageRatio = img && img.height ? img.width / img.height : 4 / 3;\n        let imgHeight;\n        let imgWidth;\n        if (curImage.dimensions) {\n            const { width, height, orientation } = curImage.dimensions;\n            if (orientation > 4 && orientation < 9) {\n                imgHeight = width;\n                imgWidth = height;\n            } else {\n                imgHeight = height;\n                imgWidth = width;\n            }\n        }\n        const imageRatio = curImage.dimensions ? imgWidth / imgHeight : htmlImageRatio;\n        if (totalImages <= 0) {\n            return '';\n        }\n\n        return (\n            <div class='w-100'>\n                <div class='border rounded position-relative w-100'\n                    style={`height: calc(85vw / ${imageRatio}); overflow: hidden; transition: all .3s ease-in-out;`}\n                    onTouchstart={this.touchStart}\n                    onTouchend={this.touchEnd}\n                    onTouchmove={this.touchMove}\n                >\n                    {totalImages > 1 && <span class='position-absolute' style='top:0px; right: 5px; z-index: 2000;'><small>{currentIdx + 1}/{totalImages}</small></span>}\n                    {currentImage1 && <div class='position-absolute' style={`${imageContainer === 1 ? 'opacity: 1;' :  'opacity: 0;'} transition: all .3s ease-in-out; top: 0; left: 0;`}>\n                        <img loading='lazy' src={currentImage1.s3LargeLink}\n                            class='img-fluid align-middle'\n                            ref={c => this.image1 = c}\n                        />\n                    </div>}\n                    {currentImage2 && <div class='position-absolute' style={`${imageContainer === 2 ? 'opacity: 1;' :  'opacity: 0;'} transition: all .3s ease-in-out; top: 0; left: 0;`}>\n                        <img loading='lazy' src={currentImage2.s3LargeLink}\n                            class='img-fluid align-middle'\n                            ref={c => this.image2 = c}\n                        />\n                    </div>}\n                </div>\n                {imageDots.length > 1 && <div class='w-100 text-center'>{imageDots.map(i => <span style={`color: ${i === currentIdx + 1 ? '#ffffff' : '#808080'};`}>&bull;</span>)}</div>}\n            </div>\n        );\n    }\n}\n\nexport default ImageSlider;\n","import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport { toJS } from 'mobx';\nimport { Text, Localizer, withText } from 'preact-i18n';\n\nimport Gauge from '../gauge';\n\nimport mu from '../../lib/musher-util';\n\n// const STOP_STATUSES = [2, 9];\n// const WARN_STATUSES = [4, 8];\n\nfunction getFatigueLevel(wo, dog) {\n    return 'secondary';\n    // if (dog) {\n    //     if (STOP_STATUSES.indexOf(dog.status) > -1) {\n    //         return 'danger';\n    //     } else if (WARN_STATUSES.indexOf(dog.status) > -1) {\n    //         return 'warning';\n    //     }\n    // }\n    // if (wo) {\n    //     if (wo.distanceKm > 50) {\n    //         return 'danger';\n    //     } else if (wo.distanceKm > 30) {\n    //         return 'warning';\n    //     }\n    // }\n    // return 'success';\n}\n\n@observer\nclass Dog extends Component {\n    render() {\n        const { dog, showWorkout, showInfo, hideTeam = false, fullWidth = false, daysBack = 7, filterBy = '' } = this.props;\n\t\tconst { userStore, dogStore, workoutPlanStore } = this.props.stores;\n        if (!dog) {\n            return '';\n        }\n        const { isAdmin, user } = userStore;\n        const { language = 'en' } = user;\n\n        const dogStatus = userStore.findDogstatus({ status: dog.status, language });\n        const dogStatuses = dog.statuses ? dog.statuses.map(e => userStore.findDogstatus({ status: e, language })) : [];\n\n        const dogPosition = userStore.findDogposition({ position: dog.position, language });\n\n        const workoutSummary = dogStore.findCurrentWorkoutSummary(dog.id) || {};\n\n        const currentWeek = util.getWeek(new Date());\n\t\tconst currentYear = util.getYear();\n        const currentMonth = new Date().getMonth() + 1;\n        const seasonStart = parseInt(currentMonth < 8 ? currentYear - 1 : currentYear, 10);\n\t\tconst { week = currentWeek, year = seasonStart } = this.props;\n\t\tconst planWeek = workoutPlanStore.sumWorkoutPlanDaysBack(parseInt(year, 10), parseInt(week, 10), daysBack) || 0;\n        const completedWeek = util.format(workoutSummary.distanceKm || 0, 0);\n        const hasBirthday = mu.hasBirthday(dog.birth);\n\n        let hasWorkoutPlan = false;\n        let percentComplete = 0;\n        if (completedWeek && planWeek) {\n            percentComplete = completedWeek / planWeek * 100;\n            hasWorkoutPlan = true;\n        }\n        return (\n                    <div class={`${fullWidth ? '' : 'col-4'} mb-3 ${hasWorkoutPlan ? 'mt-2' : ''} position-relative`}>\n                        {/* {JSON.stringify(dog, null, 4)} */}\n                        <div\n                            class={`text-center border border-${getFatigueLevel(workoutSummary, dog)} rounded-circle imageRounded mx-auto text-muted pt-2 position-relative`}\n                            style={`${dog.image ? `background-image: url(\"${dog.image.s3SmallLink}\"); background-size: cover;` : ''} border-width: 2px !important;`}\n                        >\n                            {/* {!dog.image && <i class='fas fa-dog mt-3' style='font-size: 40px;' />} */}\n                            {!dog.image && <span class='font-weight-lighter' style='font-size: 35px;'>{util.ucfirst(dog.name, true)}</span>}\n                            {hasWorkoutPlan && <div class='position-absolute' style='top: -12px; left: -12px;'>\n                                <Gauge key={`gauge-${percentComplete}`}\n                                    radius={48} \n                                    heightAdd={15}\n                                    showPercentText={false}\n                                    percent={percentComplete}\n                                    prefix='%'\n                                    total={`${planWeek} km`}\n                                    totalY='95%'\n                                    completed={`${completedWeek} km`}\n                                    completedY='85%'\n                                />\n                            </div>}\n                        </div>\n                        <div class={`${hasWorkoutPlan ? 'mt-4' : ''}`} style='line-height: 1.0em;'>\n                            <small>\n                                <span class='float-right'>\n                                    {dog.birth && <span class='mr-2'>{util.age(dog.birth, dog.deceased)}</span>}\n                                    {dog.gender === 'female' ? <i class='fas fa-venus' /> : <i class='fas fa-mars' />}\n                                </span>\n                                <a class='stretched-link' href={`/dogs/${dog.id}`}>\n                                    <h5 class='mb-1 font-weight-light' style='line-height: 1.0em; font-size: 1.3em;'>\n                                        {dog.shortname || dog.name}\n                                        {hasBirthday && <>\n                                            <i class='fas fa-birthday-cake ml-3' />\n                                        </>}\n                                    </h5>\n                                </a>\n                                {!hideTeam && <><span class='font-weight-light'>{userStore.findTeam(dog.team)}</span><br /></>}\n                            </small>\n\n                                {filterBy && dog.positions && dog.positions.lead && <div class=''>\n                                    {filterBy === 'leadOnly' && dog.positions.lead.distanceKm > 0 && <span class='badge badge-success mr-2'>\n                                        <span><Text id='dogs.sort-lead'>Lead</Text>:</span> {util.format(dog.positions.lead.distanceKm, 0)} km\n                                    </span>}\n                                    {filterBy === 'pointOnly' && dog.positions.point.distanceKm > 0 && <span class='badge badge-success mr-2'>\n                                        <span><Text id='dogs.sort-point'>Point</Text>:</span> {util.format(dog.positions.point.distanceKm, 0)} km\n                                    </span>}\n                                    {filterBy === 'teamOnly' && dog.positions.team.distanceKm > 0 && <span class='badge badge-success mr-2'>\n                                        <span><Text id='dogs.sort-team'>Team</Text>:</span> {util.format(dog.positions.team.distanceKm, 0)} km\n                                    </span>}\n                                    {filterBy === 'wheelOnly' && dog.positions.wheel.distanceKm > 0 && <span class='badge badge-success mr-2'>\n                                        <span><Text id='dogs.sort-wheel'>Wheel</Text>:</span> {util.format(dog.positions.wheel.distanceKm, 0)} km\n                                    </span>}\n                                </div>}\n\n                            <small>\n                                {showWorkout && <small class='text-muted'>\n                                    {workoutSummary && workoutSummary.distanceKm > 0 && <span class='mr-2'><i class='fas fa-road' /> {util.format(workoutSummary.distanceKm, 0)}km</span>}\n                                    {workoutSummary && workoutSummary.elevation > 0 && <span class='mr-2'><i class='fas fa-mountain' /> {util.format(workoutSummary.elevation, 0)}m</span>}\n                                    {workoutSummary && workoutSummary.duration > 0 && <span class='mr-2'><i class='fas fa-clock' /> {util.secToHms(workoutSummary.duration, true)}</span>}\n                                    {workoutSummary && workoutSummary.speedAvg > 0 && <span class='mr-2'><i class='fas fa-tachometer-alt' /> {util.format(workoutSummary.speedAvg, 1)}km/t</span>}\n                                </small>}\n\n                                {showInfo && <small class='text-muted'>\n                                    {dog.weight && <><i class='fas fa-balance-scale ml-2' /> {util.format(dog.weight, 1)} kg</>}\n                                    {dog.bodyScore && <><i class='fas fa-dog ml-2' /> {util.format(dog.bodyScore, 1)}</>}\n                                </small>}\n\n                                <div class='clearfix pb-0 pt-1'>\n                                    {dogPosition && dogPosition.class && <span class={`badge badge-${dogPosition.class || 'primary'} mr-2`}>{dogPosition.icon && <i class={dogPosition.icon} />} {dogPosition.name}</span>}\n                                    {dog.specialNeeds && <span class={`badge badge-warning mr-2`}><i class='fas fa-exclamation-triangle' /> {dog.specialNeeds}</span>}\n                                    {dogStatus && dogStatus.class && <span class={`badge badge-${dogStatus.class} mr-2 mt-1`}>{dogStatus.icon && <i class={dogStatus.icon} />} {dogStatus.name}</span>}\n                                    {dogStatuses && dogStatuses.map(status => <>\n                                        {status && status.class && <span class={`badge badge-${status.class} mr-2 mt-1`}>{status.icon && <i class={status.icon} />} {status.name}</span>}\n                                    </>)}\n                                </div>\n                            </small>\n                        </div>\n                    </div>\n        );\n    }\n}\n\nexport default Dog;\n","import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport { Text, Localizer } from 'preact-i18n';\n\nimport mu from '../../lib/musher-util';\n\nfunction displayDistance(distance) {\n\tif (distance < 5) {\n\t\treturn util.format(distance, 2);\n\t}\n\tif (distance < 10) {\n\t\treturn util.format(distance, 1);\n\t}\n\treturn util.format(distance, 1);\n}\n\nfunction kmToMiles(value) {\n    return 0.621371 * value;\n}\n\n@observer\nclass Distance extends Component {\n    render() {\n\t\tconst { value = 0, smallUnit } = this.props;\n\t\tconst { userStore } = this.props.stores;\n\t\tconst { user } = userStore;\n\t\tconst { settings = {} } = user;\n\n        if (settings.imperial) {\n            return (<>\n                <nobr>\n\t\t\t\t\t{displayDistance(kmToMiles(value))} {smallUnit ? <><small><small><small class='ml-0 text-muted'>mi</small></small></small></> : <>mi</>}\n\t\t\t\t</nobr>\n            </>);\n        }\n\n\t\treturn (<>\n\t\t\t<nobr>\n\t            {displayDistance(value)} {smallUnit ? <><small><small><small class='ml-0 text-muted'>km</small></small></small></> : <>km</>}\n\t\t\t</nobr>\n\t    </>);\n    }\n}\n\nexport default Distance;\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"hoverelementonly\":\"hoverelementonly__1mJGJ\",\"hoverElement\":\"hoverElement__axh3O\",\"hoverelementhide\":\"hoverelementhide__1k_qH\",\"progress-bar-vertical\":\"progress-bar-vertical__1B2sC\",\"progress-bar\":\"progress-bar__pnsVj\",\"dragged\":\"dragged__QXO46\",\"over\":\"over__1re3x\",\"list\":\"list__q_emZ\"};","import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport { Text, Localizer } from 'preact-i18n';\n\nimport mu from '../../lib/musher-util';\n\nfunction celciusToFahrenheit(value) {\n    return ((value * 9/5) + 32);\n}\n\n@observer\nclass Temperature extends Component {\n    render() {\n\t\tconst { value = 0, smallUnit } = this.props;\n\t\tconst { userStore } = this.props.stores;\n\t\tconst { user } = userStore;\n\t\tconst { settings = {} } = user;\n\n        if (settings.imperial) {\n            return (<>\n                <nobr>\n                    {util.format(celciusToFahrenheit(value), 0)}F\n                </nobr>\n            </>);\n        }\n\n\t\treturn (<>\n            <nobr>\n                {util.format(value, 1)}C\n            </nobr>\n        </>);\n    }\n}\n\nexport default Temperature;\n","import { h, Component } from 'preact';\nimport { observer } from 'mobx-preact';\nimport { toJS } from 'mobx';\nimport util from 'preact-util';\nimport { Text, Localizer } from 'preact-i18n';\n\nimport DragNDropFileupload from './dragNdropFileupload';\n\n@observer\nclass Files extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            files: [],\n        };\n    }\n    \n    handleAddImage = (file) => {\n        // <Images saved={saved} object={dog} field={field} updateField={updateField} />\n        // updateFieldValue = ({ id, field, value, datatype, elementtype, isNew = false, skipTimer = false }) => {\n        const {\n            updateField,\n            object,\n            field,\n        } = this.props;\n        updateField({ id: object.id, field, value: file });\n\n        // let images = toJS(object.images);\n        // if (!util.isArray(images)) {\n        //     images = [];\n        // }\n        // images.push(file);\n        // updateField({ id: object.id, field: 'images', value: images });\n    };\n\n    render() {\n        const { uploadStatus = () => {}, before = () => {}, after = () => {}, autoOpen = false } = this.props;\n        return (\n            <div class='row'>\n                <div class='col-12'>\n                    <Text id='form.files.upload-file'>Last opp fil</Text>:<br />\n                    <DragNDropFileupload\n                        handleAddImage={this.handleAddImage}\n                        apiUrl={'/api/fileupload'}\n                        uploadStatus={uploadStatus}\n                        before={before}\n                        after={after}\n                        autoOpen={autoOpen}\n                    >\n                        <div style={{ height: 30, width: '100%' }}>\n                            {/* {files.map((file, idx) => (\n                                <div key={idx}>\n                                    {file.name}\n                                    Total: {util.asString(file, 'load', 'total')}\n                                    <img style='width: 48px;'\n                                        alt='Preview'\n                                        key={file.preview}\n                                        src={file.src}\n                                    />\n                                </div>\n                            ))} */}\n                        </div>\n                    </DragNDropFileupload>\n                </div>\n            </div>\n        );\n    }\n}\n\nexport default Files;\n","import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport { Text, Localizer, withText } from 'preact-i18n';\n\n@observer\nclass Modal extends Component {\n    toggleDate = () => {\n        const { showDate } = this.state;\n        this.setState({ showDate: !showDate });\n    }\n\n    touchStart = (e) => {\n        e.stopPropagation();\n        this.setState({\n            startY: e.touches[0].pageY,\n        })\n    }\n\n    touchEnd = (e) => {\n        e.stopPropagation();\n        this.setState({\n            startY: undefined,\n            readyToRefresh: false,\n        })\n    }\n\n    touchMove = (e) => {\n        e.stopPropagation();\n        const { close } = this.props;\n        const { startY, refreshing } = this.state;\n        const scrollDistance = 30;\n        const y = e.touches[0].pageY;\n        if (this.appContainer) {\n            const { scrollTop } = this.appContainer;\n            if (scrollTop === 0 && y > startY + scrollDistance && !refreshing) {\n                close();\n            }\n        }\n    }\n\n    render() {\n        const { showDate } = this.state;\n        const { image, imagexxl, close, thumb, name, title, date } = this.props;\n        return (\n            <div class='fixed-top bg-dark text-center pt-2' style='width: 100vw; height: 100vh;'>\n                <button class='btn btn-secondary float-right mr-2' onClick={close}>X</button>\n\n                    <div class='d-flex mb-2 px-2'>\n                        {/* {JSON.stringify(dog, null, 4)} */}\n                        {thumb && <div class={`text-center border rounded-circle imageRounded imageRoundedSmall`} style={thumb ? `background-image: url(\"${thumb}\");` : ''}>\n                            &nbsp;\n                        </div>}\n                        <div class='flex-grow-1 pl-3 pr-2 text-left' style='line-height: 1.3em;'>\n                            {name && <strong class='mr-2'>{name}:</strong>}\n                            {title}<br />\n                            <small class='text-muted'>\n                                {date && <small onClick={this.toggleDate}>\n                                    {showDate ? util.formatDate(date, { locale: 'no-NB' }) : util.formatDistance(date, new Date(), { locale: 'no-NB' })}\n                                </small>}\n                            </small>\n                        </div>\n                    </div>\n\n\n                <img src={image}\n                    class='img-fluid align-middle mt-2 mb-2'\n                    onClick={close}\n                    onTouchstart={this.touchStart}\n                    onTouchend={this.touchEnd}\n                    onTouchmove={this.touchMove}\n                    ref={c => this.appContainer = c}\n                />\n\n                <a target='_blank' rel='noopener noreferrer' href={imagexxl || image} download={imagexxl || image}>\n                    <i class='fas fa-download' /> <Text id='modal.download'>Last ned bildet</Text>\n                </a>\n            </div>\n        );\n    }\n}\n\nexport default Modal;\n","import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport { Text, Localizer } from 'preact-i18n';\n\nimport mu from '../../lib/musher-util';\n\nfunction kgToPounds(value) {\n    return 2.20462 * value;\n}\n\n@observer\nclass Weight extends Component {\n    render() {\n\t\tconst { value = 0, smallUnit } = this.props;\n\t\tconst { userStore } = this.props.stores;\n\t\tconst { user } = userStore;\n\t\tconst { settings = {} } = user;\n\n        if (settings.imperial) {\n            return (<>\n                <nobr>\n                    {util.format(kgToPounds(value), 0)} lb\n                </nobr>\n            </>);\n        }\n\n\t\treturn (<>\n            <nobr>\n                {util.format(value, 0)} kg\n            </nobr>\n        </>);\n    }\n}\n\nexport default Weight;\n","import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport { Text, Localizer, withText } from 'preact-i18n';\n\nimport mu from '../../lib/musher-util';\n\nimport LineGraph from '../../components/lineGraph';\n\n@observer\nclass FormGraph extends Component {\n    render() {\n        const { dogStore } = this.props.stores;\n        const {\n            graphFitness,\n            graphFatigue,\n            graphForm,\n\t\t} = dogStore;\n\n        const xTicksAll = graphForm.map(e => e.date);\n        const partsLength = Math.floor(xTicksAll.length / 4);\n        const xTicks = [];\n        for (let i = 0, l = xTicksAll.length; i < l; i += partsLength) {\n            xTicks.push(xTicksAll[i]);\n        }\n        xTicks[xTicks.length - 1] = xTicksAll[xTicksAll.length - 1];\n\n        return (\n            <>\n                <h5><Text id='teams.fitness'>Form og belastning</Text></h5>\n                <div class='w-100 mt-3 mb-4'>\n                    <Localizer>\n                        <LineGraph\n                            stores={this.props.stores}\n                            width={1500}\n                            height={300}\n                            showXTicks={1}\n                            xTicks={xTicks}\n                            paddingTop={30}\n                            lineFromXzero={false}\n                            lineFromXmax={false}\n\n                            dataLeft={[graphFitness, graphFatigue]}\n                            dataFillLeft={[1]}\n                            legendLeft={[<Text id='teams.legend-fitness'>Fitness</Text>, <Text id='teams.legend-fatigue'>Fatigue</Text>]}\n\n                            dataRight={[graphForm]}\n                            legendRight={[<Text id='teams.legend-form'>Form</Text>]}\n\n                            // yMaxLeft={30}\n                            // yMinLeft={0}\n                            showYTicksLeft={1}\n                            avgWindowLeft={[0, 0]}\n                            smoothLeft={[0, 0]}\n\n                            // dataRight={[graphWorkoutAvgWeekElevationCurrent, graphAvgWorkoutStatsElevation]}\n                            // legendRight={[`${seasonStart} ${ascendAvg}`, `${seasonStart} ${ascendAvgAll}`]}\n                            showYTicksRight={1}\n                            // yTicksRightPostfix={'m'}\n                            // unitRight={['m', 'm']}\n                            // avgWindowRight={[0, 0]}\n                            // smoothRight={[1, 1]}\n\n                            // marker={week}\n                            scrollToRight={true}\n                        />\n                    </Localizer>\n                </div>\n            </>\n        );\n    }\n}\n\nexport default FormGraph;\n","import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport { Text, Localizer } from 'preact-i18n';\n\nimport mu from '../../lib/musher-util';\n\nfunction meterToFeet(value) {\n    return 3.28084 * value;\n}\n\n@observer\nclass Elevation extends Component {\n    render() {\n\t\tconst { value = 0, smallUnit } = this.props;\n\t\tconst { userStore } = this.props.stores;\n\t\tconst { user } = userStore;\n\t\tconst { settings = {} } = user;\n\n        if (settings.imperial) {\n            return (<>\n                <nobr>\n                    {util.format(meterToFeet(value), 0)} {smallUnit ? <><small><small><small class='ml-0 text-muted'>ft</small></small></small></> : <>ft</>}\n                </nobr>\n            </>);\n        }\n\n\t\treturn (<>\n            <nobr>\n                {util.format(value, 0)} {smallUnit ? <><small><small><small class='ml-0 text-muted'>m</small></small></small></> : <>m</>}\n            </nobr>\n        </>);\n    }\n}\n\nexport default Elevation;\n","import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport { Text, Localizer, withText } from 'preact-i18n';\n\nimport mu from '../../lib/musher-util';\n\nconst RED_DAYS = [0, 6];\n\n@observer\nclass HistoryCalendar extends Component {\n\n    async loadHistorySummary(props = this.props) {\n        this.setState({ isLoading: true });\n\t\tconst { userStore, workoutStore } = this.props.stores;\n\t\tconst { currentTeam } = workoutStore;\n\n        const currentMonth = new Date().getMonth() + 1;\n        const { month = currentMonth, year = util.getYear(), team = currentTeam, dog = {}, callback = () => {} } = props;\n        await userStore.getFeed({ month, year, team, dog: dog.id });\n\n        const { historyType } = this.state;\n        callback(historyType);\n\n        this.setState({ isLoading: false });\n    }\n\n    setHistoryType = (e) => {\n        const { callback = () => {} } = this.props;\n        const { historyType: prevHistoryType } = this.state;\n        let historyType = e.target.dataset.historytype || e.target.parentElement.dataset.historytype;\n\n        if (historyType === prevHistoryType) {\n            this.setState({ historyType: null })\n            callback(null);\n        } else {\n            this.setState({ historyType });\n            callback(historyType);\n        }\n    }\n\n    chooseDay = (e) => {\n        const { year: yyyy, month: mm, day: dd } = this.state;\n        const { setDay = () => {} } = this.props;\n\t\tconst day = parseInt(e.target.parentElement.dataset.day || e.target.dataset.day, 10);\n\t\tconst month = parseInt(e.target.parentElement.dataset.month || e.target.dataset.month, 10);\n\t\tconst year = parseInt(e.target.parentElement.dataset.year || e.target.dataset.year, 10);\n\t\t// console.log({ day, month, year });\n\n        if (year === yyyy && month === mm && day === dd) {\n            this.setState({\n                year: null,\n                month: null,\n                day: null,\n            });\n            setDay(null, null, null);\n        } else {\n            this.setState({\n                year,\n                month,\n                day,\n            });\n            setDay(year, month, day);\n        }\n    }\n\n    componentDidMount() {\n        this.loadHistorySummary();\n    }\n\n    componentWillReceiveProps(nextProps) {\n        // console.log('componentWillReceiveProps', nextProps);\n        if (nextProps.month !== this.props.month\n            || nextProps.year !== this.props.year\n            || nextProps.dog !== this.props.dog\n            || nextProps.team !== this.props.team) {\n            this.loadHistorySummary(nextProps);\n        }\n    }\n\n    render() {\n        const { historyType, day: chosenDD, month: chosenMM, year: chosenYYYY } = this.state;\n        const filterHistories = historyType ? (e) => e.historyType === historyType : () => true;\n\n        const { appState, userStore } = this.props.stores;\n        const { user } = userStore;\n        const { language = 'en' } = user;\n\n        const HISTORY_TYPE_MAP = mu.getHistoryMap(language);\n        const DAYS = mu.getDays(language);\n        const MONTHS = mu.getMonths(language);\n\n\t\tconst { darkmode } = appState;\n        const currentDay = new Date().getDate();\n        const currentMonth = new Date().getMonth() + 1;\n        const currentYear = new Date().getFullYear();\n\t\tconst { month = currentMonth, year = util.getYear(), dog, basehref } = this.props;\n\n        const monthNum = parseInt(month, 10);\n        const yearNum = parseInt(year, 10);\n        const { month: nextMonth, year: nextYear } = mu.getNextMonth(monthNum, yearNum);\n        const { month: prevMonth, year: prevYear } = mu.getPrevMonth(monthNum, yearNum);\n\n        const daysOfMonth = util.getDaysInMonth(month, year);\n        const weeksInMonth = util.getWeeksInMonth(month, year);\n        const firstWeek = weeksInMonth[0].week;\n        const daysOfWeek = util.getDaysInWeek(firstWeek, year);\n\n        return (\n            <>\n                <div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-4'>\n                    <a href={`${basehref || '/workouts/month/'}${nextMonth}/${nextYear}/skipScroll`} class='float-right btn btn-sm btn-link'><i class='fas fa-arrow-right' /></a>\n                    <a href={`${basehref || '/workouts/month/'}${prevMonth}/${prevYear}/skipScroll`} class='float-left btn btn-sm btn-link'><i class='fas fa-arrow-left' /></a>\n                    <h5><Text id='dog.calendar.month'>Mned</Text> - {MONTHS[month - 1]} {year}</h5>\n                    {dog && <div>{dog.name}</div>}\n                    <small>{util.isoDate(daysOfMonth[0], false, false, true)} - {util.isoDate(daysOfMonth[daysOfMonth.length - 1], false, false, true)}</small>\n                </div>\n\n                <div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-4 mb-4'>\n                    <table class='table table-striped table-sm'>\n                        <thead>\n                            <tr>\n                                <th class='text-muted'><small><Text id='dog.calendar.week'>Uke</Text></small></th>\n                                {daysOfWeek.map(day => <th><small>{DAYS[day.getDay()]}</small></th>)}\n                                {/* <th class='text-muted'>Totalt</th> */}\n                            </tr>\n                        </thead>\n                        <tbody>\n                            {weeksInMonth && weeksInMonth.map(weekObj => {\n                                const daysOfWeek = util.getDaysInWeek(weekObj.week, year, month);\n                                return (\n                                    <tr>\n                                        <td class='text-right text-muted pt-3'>\n                                            <small>\n                                                {weekObj.week}\n                                            </small>\n                                        </td>\n                                        {daysOfWeek.map(day => {\n                                            const yyyy = day.getFullYear();\n                                            const mm = day.getMonth() + 1;\n                                            const dd = day.getDate()\n                                            const histories = userStore.findHistory(yyyy, mm, dd);\n                                            const endHistories = userStore.findEndHistory(yyyy, mm, dd);\n                                            // { \"id\": \"5f59d861eaa7385aaef6b399\", \"date\": \"2020-09-09T19:00:00.000Z\", \"year\": 2020, \"month\": 9,\n                                            // \"day\": 9, \"createdDate\": \"2020-09-10T07:40:17.834Z\", \"title\": \"Spiste ikke opp alt\",\n                                            // \"historyType\": \"foodLeftover\", \"images\": [], \"dogId\": 4, \"dogName\": \"Glenn\", \"dogShortname\": \"\",\n  \t\t\t\t\t\t\t\t\t\t\tconst isChosen = (chosenYYYY == yyyy && chosenMM == mm && chosenDD == dd);\n\t\t\t\t\t\t\t\t\t\t\tconst isToday =  (currentYear == yyyy) && (currentMonth == mm) && (currentDay == dd);\n\t\t\t\t\t\t\t\t\t\t\tconst isDayOff = RED_DAYS.indexOf(day.getDay()) > -1;\n\n                                            return (\n                                                <td class={`text-center font-weight-light position-relative pt-3 ${isChosen ? 'calendarIsChosen' : ''} ${isToday ? 'calendarIsToday' : ''} ${isDayOff ? 'calendarIsWeekend' : ''}`}\n                                                    style={`font-size: 0.8em;`}\n                                                    onClick={this.chooseDay} data-day={dd} data-month={mm} data-year={yyyy}\n                                                >\n                                                    <div class='position-absolute text-muted' style='top: 0px; right: 2px; font-size: 0.7em;'>\n                                                        {day.getDate()}\n                                                    </div>\n\n                                                    {histories && histories.length > 0 ? <>\n                                                        {histories.filter(filterHistories).map((history, idx) => {\n                                                            if (!history.historyType) {\n                                                                return (\n                                                                    <div class='rounded-circle position-absolute border'\n                                                                        style={`background-color: #808080; top: 50%; left: ${idx * 5}px; width: 15px; height: 15px;`}\n                                                                    />\n                                                                );\n                                                            }\n                                                            const bgColor = mu.getHistoryTypeColor(history.historyType);\n                                                            return (\n                                                                <div class='rounded-circle position-absolute border'\n                                                                    style={`background-color: ${bgColor}; top: 50%; left: ${idx * 5}px; width: 15px; height: 15px;`}\n                                                                />\n                                                            );\n                                                        })}\n                                                        {histories.length > 1 && <span class='position-absolute text-danger'\n                                                            style='bottom: 0; right: 0px; font-size: 0.7em;'>{histories.length}</span>}\n                                                    </>: '-'}\n\n                                                    {endHistories && endHistories.length > 0 ? <>\n                                                        {endHistories.filter(filterHistories).map((history, idx) => {\n                                                            if (!history.historyType) {\n                                                                return (\n                                                                    <div class='rounded position-absolute border border-white'\n                                                                        style={`background-color: #808080; top: 50%; left: ${idx * 5}px; width: 15px; height: 15px;`}\n                                                                    />\n                                                                );\n                                                            }\n                                                            const bgColor = mu.getHistoryTypeColor(history.historyType);\n                                                            return (\n                                                                <div class='rounded position-absolute border border-white'\n                                                                    style={`background-color: ${bgColor}; top: 50%; left: ${idx * 5}px; width: 15px; height: 15px;`}\n                                                                />\n                                                            );\n                                                        })}\n                                                        {endHistories.length > 1 && <span class='position-absolute text-danger'\n                                                            style='bottom: 0; right: 0px; font-size: 0.7em;'>{endHistories.length}</span>}\n                                                    </>: '-'}\n\n                                                </td>\n                                            );\n                                        })}\n                                    </tr>\n                                );\n                            })}\n                        </tbody>\n                    </table>\n                </div>\n\n                <div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-4 mb-4'>\n                    <div class='clearfix'>\n                        <small>\n                            {mu.getHistoryPri().map(key => {\n                                const bgColor = mu.getHistoryTypeColor(key);\n                                return (\n                                    <span class={`float-left mr-2 ${historyType === key ? 'font-weight-bold' : 'font-weight-lighter'}`} onClick={this.setHistoryType} data-historytype={key}>\n                                        <div class='rounded-circle border float-left mr-1'\n                                            style={`background-color: ${bgColor}; width: 15px; height: 15px;`}\n                                        /> {HISTORY_TYPE_MAP[key]}\n                                    </span>\n                                );\n                            })}\n                        </small>\n                    </div>\n                    <div class='clearfix'>\n                        <small>\n                            {mu.getHistoryPri(2).map(key => {\n                                const bgColor = mu.getHistoryTypeColor(key);\n                                return (\n                                    <span class={`float-left mr-2 ${historyType === key ? 'font-weight-bold' : 'font-weight-lighter'}`} onClick={this.setHistoryType} data-historytype={key}>\n                                        <div class='rounded-circle border float-left mr-1'\n                                            style={`background-color: ${bgColor}; width: 15px; height: 15px;`}\n                                        /> {HISTORY_TYPE_MAP[key]}\n                                    </span>\n                                );\n                            })}\n                        </small>\n                    </div>\n                    <div class='clearfix'>\n                        <small>\n                            {mu.getHistoryPri(3).map(key => {\n                                const bgColor = mu.getHistoryTypeColor(key);\n                                return (\n                                    <span class={`float-left mr-2 ${historyType === key ? 'font-weight-bold' : 'font-weight-lighter'}`} onClick={this.setHistoryType} data-historytype={key}>\n                                        <div class='rounded-circle border float-left mr-1'\n                                            style={`background-color: ${bgColor}; width: 15px; height: 15px;`}\n                                        /> {HISTORY_TYPE_MAP[key]}\n                                    </span>\n                                );\n                            })}\n                        </small>\n                    </div>\n                </div>\n            </>\n        );\n    }\n}\n\nexport default HistoryCalendar;\n","import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport { Text, Localizer } from 'preact-i18n';\n\nimport mu from '../../lib/musher-util';\n\nfunction kmtToMph(value) {\n    return 0.621371 * value;\n}\n\n@observer\nclass Speed extends Component {\n    render() {\n\t\tconst { value = 0, smallUnit } = this.props;\n\t\tconst { userStore } = this.props.stores;\n\t\tconst { user } = userStore;\n\t\tconst { settings = {} } = user;\n\n        if (settings.imperial) {\n            return (<>\n                <nobr>\n                    {util.format(kmtToMph(value), 1)} {smallUnit ? <><small><small><small class='ml-0 text-muted'><Text id='workouts.mph'>mph</Text></small></small></small></> : <><Text id='workouts.mph'>mph</Text></>}\n                </nobr>\n            </>);\n        }\n\n\t\treturn (<>\n            <nobr>\n                {util.format(value, 1)} {smallUnit ? <><small><small><small class='ml-0 text-muted'><Text id='workouts.kmt'>km/t</Text></small></small></small></> : <><Text id='workouts.kmt'>km/t</Text></>}\n            </nobr>\n        </>);\n    }\n}\n\nexport default Speed;\n","import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport { route } from 'preact-router';\nimport { Text, Localizer } from 'preact-i18n';\nimport Markdown from 'preact-markdown';\n\nimport PubSub, { topics } from '../../lib/pubsub';\nimport mu from '../../lib/musher-util';\nconst MARGIN_TOP = mu.marginTop(false);\nconst MARGIN_TOP_BACK = mu.marginTopBack(false);\nconst MARGIN_BOTTOM = mu.marginBottom();\n\nimport WorkoutGraph from '../../components/workout/graph';\nimport WorkoutCalendar from '../../components/workout/calendar';\nimport DogHistory from '../../components/dog/history';\nimport DogAddLog from '../../components/dog/addlog';\nimport DogCalendar from '../../components/dog/calendar';\nimport DogStatus from '../../components/dog/status';\nimport FormGraph from '../../components/dog/formGraph';\nimport PremiumBadge from '../../components/premium/badge';\nimport ImageScroller from '../../components/imageScroller';\n\nimport Modal from '../../components/modal';\nimport WorkoutTotals from '../../components/workout/totals';\nimport WorkoutStatus from '../../components/workout/status';\nimport Ad from '../../components/ad/';\n\nimport Speed from '../../components/data/speed';\nimport Elevation from '../../components/data/elevation';\nimport Weight from '../../components/data/weight';\nimport Distance from '../../components/data/distance';\nimport Temperature from '../../components/data/temperature';\n\nimport Images from '../../components/form/images';\nimport Files from '../../components/form/files';\n\nimport ScrollIntoView from '../../components/util/scrollIntoView';\n\nconst initialState = {\n    submenu: 'stats',\n};\n\n@observer\nclass Input extends Component {\n    handleImageErrored = (e) => {\n        const image = e.target;\n        image.onerror = null;\n        setTimeout(() => {\n            image.src += `?${new Date()}`;\n        }, 1000);\n    }\n\n    removeImage = async (e) => {\n        const { dogStore } = this.props.stores;\n        const { dog } = this.props;\n        const imageName = e.target.parentElement.dataset.name || e.target.dataset.name;\n        dogStore.removeImage({\n            id: dog.id,\n            name: imageName,\n        });\n    }\n\n    removeFile = async (e) => {\n        const { dogStore } = this.props.stores;\n        const { dog } = this.props;\n        const fileName = e.target.parentElement.dataset.name || e.target.dataset.name;\n        dogStore.removeFile({\n            id: dog.id,\n            name: fileName,\n        });\n    }\n\n    render() {\n        const { saved, dog, type = 'text', datalist = [], min, max, step, field, title, icon, help, onInput, updateField, refName, showImages = false, showFiles = false } = this.props;\n        let value = dog[field];\n        let maxValue = max;\n        if (type === 'date') {\n            if (value) {\n                value = util.isoDate(dog[field], false, false, true);\n            }\n            if (max === 'today') {\n                maxValue = util.isoDate(undefined, false, false, true);\n            }\n        }\n        if (type === 'file') {\n            return (\n                <div class={`form-group ${saved[`${field}.${dog.id}`] ? 'is-valid' : ''}`}>\n                    <label for={`${field}Input`}>{icon && <i class={`${icon} text-muted`} />} {title}</label>\n                    {showFiles && <>\n                        <div class='container-fluid'>\n                            <div class='row'>\n\n                                {(!dog.files || dog.files.length === 0) && <>\n                                    <div class='text-center text-muted'>\n                                        <div class='display-1'><i class='fas fa-file' /></div>\n                                        <h3><Text id='dogs.no-files-title'>No files attached to this dog!</Text></h3>\n                                        <Text id='dogs.no-files-text'>You can upload files to this dog inside edit. These files can be of any type. Ie: Certificates, test, etc.</Text>\n                                    </div>\n                                </>}\n\n                                {dog.files && dog.files.map(file => (\n                                    <div class='col-12 p-1'>\n                                        <span class='font-weight-lighter mr-2'>{util.isoDate(file.createdDate, false, false, true)}</span>\n                                        <span class='mr-2'>{file.name}</span>\n                                        <span class='font-weight-lighter mr-2'>{util.formatBytes(file.size, 1)}</span>\n                                        <button class='btn btn-sm btn-link float-right p-0'\n                                            onClick={this.removeFile}\n                                            data-name={file.name}\n                                        ><i class='fas fa-trash-alt' /> Del</button>\n                                    </div>\n                                ))}\n                            </div>\n                        </div>\n                    </>}\n                    <Files saved={saved} object={dog} field={field} updateField={updateField} />\n                    {saved[`${field}.${dog.id}`] ? <div class={`valid-feedback`} style='display: block;'><Text id='dogs.changes-saved'>Endringene er lagret</Text></div> :\n                        <small id={`${field}Help`} class='form-text text-muted'>{help}</small>}\n                </div>\n            );\n        }\n        if (type === 'image') {\n            return (\n                <div class={`form-group ${saved[`${field}.${dog.id}`] ? 'is-valid' : ''}`}>\n                    <label for={`${field}Input`}>{icon && <i class={icon} />} {title}</label>\n\n                    {showImages && <>\n                        <div class='container-fluid'>\n                            <div class='row'>\n                                {dog.images && dog.images.map(img => (\n                                    <div class='col-3 p-1'>\n                                        <img src={img.s3SmallLink} class='img-fluid' onError={this.handleImageErrored} />\n                                        <button class='btn btn-sm btn-link'\n                                            onClick={this.removeImage}\n                                            data-name={img.name}\n                                        ><i class='fas fa-trash' /> Remove</button>\n                                    </div>\n                                ))}\n                            </div>\n                        </div>\n                    </>}\n                    <Images saved={saved} object={dog} field={field} updateField={updateField} autoOpen={false} />\n                    {saved[`${field}.${dog.id}`] ? <div class={`valid-feedback`} style='display: block;'><Text id='dogs.changes-saved'>Endringene er lagret</Text></div> :\n                        <small id={`${field}Help`} class='form-text text-muted'>{help}</small>}\n                </div>\n            );\n        }\n        if (type === 'datalist') {\n            return (\n                <div class={`form-group ${saved[`${field}.${dog.id}`] ? 'is-valid' : ''}`}>\n                    <label for={`${field}Input`}>{icon && <i class={icon} />} {title}</label>\n                    <input list={`list-${field}`} class={`form-control ${saved[`${field}.${dog.id}`] ? 'is-valid' : ''}`} id={`${field}Input`} aria-describedby={`${field}Help`}\n                        value={value}\n                        data-id={dog.id}\n                        data-field={field}\n                        onInput={onInput}\n                        // onInput={e => console.log(e)}\n                        // onChange={e => console.log(e)}\n                    />\n                    <datalist id={`list-${field}`}>\n                        {datalist.map(el => (\n                            <option value={el[0]}>{el[1]}</option>\n                        ))}\n                    </datalist>\n                    {saved[`${field}.${dog.id}`] ? <div class={`valid-feedback`} style='display: block;'><Text id='dogs.changes-saved'>Endringene er lagret</Text></div> :\n                        <small id={`${field}Help`} class='form-text text-muted'>{help}</small>}\n                </div>\n            );\n        }\n        if (type === 'select') {\n            return (\n                <div class={`form-group ${saved[`${field}.${dog.id}`] ? 'is-valid' : ''}`}>\n                    <label for={`${field}Input`}>{icon && <i class={icon} />} {title}</label>\n\n                    <select type={type} class={`form-control ${saved[`${field}.${dog.id}`] ? 'is-valid' : ''}`} id={`${field}Input`} aria-describedby={`${field}Help`}\n                        value={value}\n                        data-id={dog.id}\n                        data-field={field}\n                        onInput={onInput}\n                    >\n                        <option value=''>-- Velg kjnn --</option>\n                        {datalist.map(el => (\n                            <option value={el[0]}>{el[1]}</option>\n                        ))}\n                    </select>\n                    {saved[`${field}.${dog.id}`] ? <div class={`valid-feedback`} style='display: block;'><Text id='dogs.changes-saved'>Endringene er lagret</Text></div> :\n                        <small id={`${field}Help`} class='form-text text-muted'>{help}</small>}\n                </div>\n            );\n        }\n        return (\n            <div class={`form-group ${saved[`${field}.${dog.id}`] ? 'is-valid' : ''}`}>\n                <label for={`${field}Input`}>{icon && <i class={icon} />} {title}</label> {refName}\n                <input type={type} class={`form-control ${saved[`${field}.${dog.id}`] ? 'is-valid' : ''}`} id={`${field}Input`} aria-describedby={`${field}Help`}\n                    min={min}\n                    max={maxValue}\n                    step={step}\n                    value={value}\n                    data-id={dog.id}\n                    data-field={field}\n                    onInput={onInput}\n                />\n                {saved[`${field}.${dog.id}`] ? <div class={`valid-feedback`} style='display: block;'><Text id='dogs.changes-saved'>Endringene er lagret</Text></div> :\n                    <small id={`${field}Help`} class='form-text text-muted'>{help}</small>}\n            </div>\n        );\n    }\n}\n\n@observer\nclass DogsDetail extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n\t\t\tnewHistory: {\n\t\t\t\tdate: util.isoDate(new Date(), false, false, true),\n\t\t\t\ttime: util.isoTime(new Date()),\n\t\t\t},\n            ...initialState,\n            submenu: props.submenu || 'stats',\n        };\n        this.updateTimer = {};\n    }\n\n    async loadAll(props = this.props) {\n        this.setState({ isLoading: true });\n        await Promise.all([\n            this.loadDog(props),\n            this.loadWorkoutPlans(props),\n        ]);\n        this.setState({ isLoading: false });\n    }\n\n    loadDog = async (props = this.props) => {\n\t\tconst { dogStore, userStore } = props.stores;\n        const dogId = parseInt(props.dog, 10);\n        await Promise.all([\n            // dogStore.load(dogId, false, { addData: ['vaccineStatuses', 'historyStatuses', 'allDogs'] }),\n            dogStore.load(dogId, false, { addData: ['team', 'user', 'workoutSummary', 'vaccineStatuses', 'historyStatuses', 'vaccineLogStatuses', 'allDogs'] }),\n            userStore.getWorkoutSummary({ dog: dogId }),\n        ]);\n\n        const currentMonth = new Date().getMonth() + 1;\n        const currentYear = new Date().getFullYear();\n\t\tconst { month = currentMonth, year = currentYear } = this.props;\n\t\tconst seasonStart = parseInt(month < 8 ? year - 1 : year, 10);\n        dogStore.findWorkoutSummaryCurrenSeason(dogId, seasonStart) || {};\n        dogStore.findWorkoutSummaryPreviousSeason(dogId, seasonStart - 1) || {};\n\n\n        const { dog } = dogStore;\n        if (dog && dog.team) {\n            this.loadTeam(dog.team);\n        }\n        if (dog && dog.motherChipId) {\n            dogStore.loadExternalDogs([dog.motherChipId, dog.fatherChipId]);\n        }\n        dogStore.plotFormGraph();\n    }\n\n    async loadTeam(team) {\n\t\tconst { teamStore } = this.props.stores;\n        await teamStore.load(team);\n        teamStore.plotFormGraph();\n    }\n\n    loadWorkoutPlans = async (props = this.props) => {\n\t\tconst { year } = props;\n\n\t\tconst currentMonth = new Date().getMonth() + 1;\n\t\tconst currentYear = util.getYear();\n\t\tconst seasonStart = parseInt(year || (currentMonth < 8 ? currentYear - 1 : currentYear), 10);\n\t\tconst { workoutPlanStore, dogStore } = props.stores;\n\t\tconst { dog } = dogStore;\n\n\t\tworkoutPlanStore.updateItem('workoutPlans', []);\n\t\tworkoutPlanStore.updateItem('workoutPlan', {});\n\t\tworkoutPlanStore.resetGraphPlanWeekDistanceCurrent();\n\n\t\tif (dog.team) {\n\t\t\tawait workoutPlanStore.load({ query: {\n\t\t\t\tteam: dog.team,\n\t\t\t\tseasonYear: seasonStart,\n\t\t\t\tseasonMonth: 6,\n\t\t\t} });\n\t\t\tconst { workoutPlans } = workoutPlanStore;\n\t\t\tconst workoutPlanCurrent = workoutPlans[0] || {};\n            if (workoutPlanCurrent.id) {\n                await workoutPlanStore.load(workoutPlanCurrent.id);\n                workoutPlanStore.prepareWeekGraphs({ year });\n            } else {\n                workoutPlanStore.updateKeyValue('workoutPlan', {});\n                workoutPlanStore.updateKeyValue('workoutPlans', []);\n                workoutPlanStore.resetGraphPlanWeekDistanceCurrent();\n            }\n\t\t}\n\t}\n\n\tshowModal = (e) => {\n        e.stopPropagation();\n        e.preventDefault();\n        const img = e.target.dataset.image;\n        const imgXXL = e.target.dataset.imagexxl;\n\t\tconst thumb = e.target.dataset.thumb;\n        const name = e.target.dataset.name;\n        const title = e.target.dataset.title;\n        const date = e.target.dataset.date;\n        this.setState({\n            displayModal: true,\n            currentImage: img,\n            currentImageXXL: imgXXL,\n            thumb,\n            name,\n            title,\n            date,\n        });\n    }\n\n    closeModal = () => {\n        this.setState({\n            displayModal: false,\n        });\n    }\n\n    setHistoryType = (historyType) => {\n\t\tthis.setState({ historyType });\n    }\n\n\tdeleteDog = async () => {\n\t\tconst { dogStore } = this.props.stores;\n\t\tconst { dog } = dogStore;\n        await dogStore.saveField(dog.id, 'offline', 1);\n\t\tPubSub.publish(topics.STATUS_MESSAGE, {\n\t\t\tmessage: 'Hunden er slettet',\n\t\t\ttype: 'success',\n\t\t\ticon: 'fas fa-check',\n\t\t});\n        route(`/dogs/list`);\n\t}\n\n    updateField = (e) => {\n        const { id, field, type, elementtype, isNew } = e.target.dataset;\n        const value = e.target.value;\n        this.updateFieldValue({ id: parseInt(id, 10), field, value, type, elementtype, isNew });\n    }\n\n    updateFieldValue = ({ id, field, value, datatype, elementtype, isNew = false, skipTimer = false }) => {\n        const { dogStore } = this.props.stores;\n        let newValue = value;\n\n        let localObjectValue = value;\n        const { dog } = dogStore;\n        if (field === 'images') {\n            if (Array.isArray(dog.images) && Array.isArray(value)) {\n                localObjectValue = [...dog.images, ...value];\n            }\n        }\n        if (field === 'files') {\n            if (Array.isArray(dog.files)) {\n                if (Array.isArray(value)) {\n                    localObjectValue = [...dog.files, ...value];\n                } else {\n                    localObjectValue = [...dog.files, value];\n                }\n            }\n        }\n\n        if (datatype === 'array' && !Array.isArray(value)) {\n            if (elementtype === 'number') {\n                newValue = value.split(',').map(e => parseFloat(e) || e);\n            } else  {\n                newValue = value.split(',');\n            }\n            // console.log('updateFieldValue', id, field, value, datatype, elementtype);\n        }\n\n        if (isNew) {\n            dogStore.updateObjectKeyValue('newDog', field, value);\n        } else {\n            dogStore.updateField(id, field, localObjectValue);\n            if (skipTimer) {\n                this.doUpdateField(id, field, newValue);\n            } else {\n                clearTimeout(this.updateTimer[field]);\n                this.updateTimer[field] = setTimeout(async () => {\n                    this.doUpdateField(id, field, newValue);\n                }, 500);\n            }\n        }\n    }\n\n    async doUpdateField(id, field, value) {\n        const { dogStore } = this.props.stores;\n        await dogStore.saveField(id, field, value);\n    }\n\n\tchooseSubmenu = (e) => {\n\t\tconst submenu = e.target.parentElement.dataset.menu || e.target.dataset.menu;\n\t\tthis.setState({ submenu });\n\n        // const { dogStore } = this.props.stores;\n        // const { dog } = dogStore;\n        // route(`/dogs/${dog.id}/${submenu}`);\n\t}\n\n    back = () => {\n        const { history } = this.props.stores;\n        history.goBack();\n    }\n\n    toggleCalendar = async () => {\n        const { showCalendar = false } = this.state;\n        this.setState({ showCalendar: !showCalendar });\n    }\n\n\tcomponentDidMount() {\n        this.loadAll();\n    }\n\n    componentWillReceiveProps(nextProps) {\n        // console.log('componentWillReceiveProps', nextProps);\n        if (nextProps.dog !== this.props.dog) {\n            this.loadAll(nextProps);\n        }\n    }\n\n\trender() {\n\t\tconst { displayModal, currentImage, currentImageXXL, thumb, name, title, date, historyType, submenu, showCalendar = false } = this.state;\n        const { month, year } = this.props;\n        // const monthNum = parseInt(month, 10);\n        // const yearNum = parseInt(year, 10);\n        const filterHistories = historyType ? (e) => {\n            // if (monthNum && yearNum) {\n            //     return e.historyType === historyType && e.month === monthNum && e.year === yearNum;\n            // }\n            return e.historyType === historyType;\n        } : () => true;\n\t\tconst { dogStore, userStore, workoutPlanStore, workoutStore } = this.props.stores;\n        const { workoutPlan, workoutPlans } = workoutPlanStore;\n\t\tconst { currentTeam } = workoutStore;\n\n        const { historyFeed, isAdmin, user } = userStore;\n        const { language = 'en' } = user;\n\n\t\tconst { dog, vaccineStatuses, historyStatuses, workoutSummary, workoutSummaryCurrentSeason = {}, workoutSummaryPreviousSeason = {}, saved } = dogStore;\n        const dogStatus = userStore.findDogstatus({ status: dog.status, language });\n        const dogStatuses = dog.statuses ? dog.statuses.map(e => userStore.findDogstatus({ status: e, language })) : [];\n        const dogPosition = userStore.findDogposition({ position: dog.position, language });\n        // const teamName = userStore.findTeam(dog.team);\n        // const teamNames = dog.teams ? dog.teams.map(e => userStore.findTeam(e)) : [];\n\n\t\t// const hasHistory = historyFeed && historyFeed.length > 0;\n\t\tconst hasHistory = dog.history && dog.history.length > 0;\n\n        const teamNames = [];\n        if (userStore.findTeam(dog.team)) {\n            teamNames.push(userStore.findTeam(dog.team));\n        }\n        if (dog.teams) {\n            dog.teams.forEach((e) => {\n                if (userStore.findTeam(e)) {\n                    teamNames.push(userStore.findTeam(e));\n                }\n            });\n        }\n\n        const dogVaccineLogStatuses = dogStore.findVaccineLogStatuses(dog.chipId);\n\n        const dogMother = dogStore.findDog(dog.mother);\n        const dogFather = dogStore.findDog(dog.father);\n\n        const children = dogStore.findChildren(dog.chipId);\n        const siblings = dogStore.findSiblings(dog.id, dog.motherChipId, dog.birth);\n        const hasBirthday = mu.hasBirthday(dog.birth);\n        const daysUntilBirthday = dog.birth ? Math.ceil(mu.daysUntilNextBirthday(dog.birth)) : 365;\n\n\t\treturn (\n\t\t\t<div class='container-fluid' style={`margin-bottom: ${MARGIN_BOTTOM}; margin-top: ${MARGIN_TOP};`}>\n                <div class='d-flex justify-content-between mb-2'>\n                    <div>\n                        <button class='btn btn-link pl-0 fixed-top text-primary'\n                            style={`top: ${MARGIN_TOP_BACK}; left: 5px; font-size: 35px; width: 45px;`}\n                            onClick={this.back}>\n                            <i class='fas fa-arrow-circle-left' />\n                        </button>\n                    </div>\n                    <div>\n                        <h5 class='text-muted'>&nbsp;</h5>\n                    </div>\n                    <div>\n                        <a class='btn btn-sm btn-primary float-left ml-3'\n\t\t\t\t\t\t\thref={`/dogs/edit/${dog.id}`}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<i class='fas fa-edit' /> <Text id='dogs.edit'>Endre</Text>\n\t\t\t\t\t\t</a>\n                        <DogAddLog stores={this.props.stores} dog={dog} callback={this.loadDog} />\n                    </div>\n                </div>\n\t\t\t\t{displayModal && <Modal close={this.closeModal} image={currentImage} imagexxl={currentImageXXL} thumb={thumb} name={name} title={title} date={date} />}\n\n\t\t\t\t<div class='row'>\n\t\t\t\t\t<div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3'>\n\t\t\t\t\t\t<div class='d-flex mb-1'>\n                            {/* {JSON.stringify(dog, null, 4)} */}\n                            <div class={`text-center border rounded-circle imageRounded`} style={dog.image ? `background-image: url(\"${dog.image.s3SmallLink}\");` : ''}>\n                                {!dog.image && <i class='fas fa-dog text-muted mt-3' style='font-size: 40px;' />}\n                            </div>\n                            <div class='flex-grow-1 pl-3 pr-2'\n\t\t\t\t\t\t\t\tstyle={`border-right: 4px solid ${userStore.findHarness(dog.harness, 'colorNonstop')} !important;`}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<span class='float-right'>\n                                    {daysUntilBirthday < 7 && <>\n                                        <span class='text-muted mr-2'>\n                                            <i class='fas fa-birthday-cake' /> in {daysUntilBirthday} days\n                                        </span>\n                                    </>}\n\t\t\t\t\t\t\t\t\t{dog.birth && <span class='mr-2'>{util.age(dog.birth, dog.deceased)}</span>}\n\t\t\t\t\t\t\t\t\t{dog.gender === 'female' ? <i class='fas fa-venus' /> : <i class='fas fa-mars' />}\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t<h5>\n                                    {dog.shortname || dog.name} {dog.shortname && dog.shortname !== '' && <> - <span class='font-weight-lighter'>{dog.name}</span></>}\n                                    {hasBirthday && <>\n                                        <i class='fas fa-birthday-cake ml-3' />\n                                    </>}\n                                </h5>\n\n                                <div>\n                                    {dog.birth && <>\n                                        <small class='text-muted'>\n                                            <i class='fas fa-hand-holding-heart' /> {util.isoDate(dog.birth, false, false, true)}\n                                        </small>\n                                    </>}\n                                </div>\n\n\t\t\t\t\t\t\t\t<div>\n                                    {teamNames && teamNames.length > 0 && <small class='font-weight-lighter'>\n                                        {teamNames.map((name, idx) => <>{idx > 0 ? ', ' : ''}{name}</>)}\n                                    </small>}\n                                </div>\n\n\t\t\t\t\t\t\t\t<div>\n                                    <small class='text-muted'>\n                                        {dog.chipId && dog.chipId.length > 5 && <><i class='fas fa-microchip' /> {dog.chipId}</>}\n                                        {dog.weight > 0 && <><i class='fas fa-balance-scale ml-2' /> {util.format(dog.weight, 1)} kg</>}\n                                        {dog.bodyScore > 0 && <><i class='fas fa-dog ml-2' /> {util.format(dog.bodyScore, 1)}</>}\n                                    </small>\n\t\t\t\t\t\t\t\t</div>\n\n                                <div>\n                                    {vaccineStatuses && vaccineStatuses.filter(e => e.dogId === dog.id).map(v => (\n                                        <span class={`badge badge-success mr-2`} title={util.isoDate(v.endDate, false, false, true)}>\n                                            {v.vaccineType}\n                                            <span class='font-weight-lighter ml-3'>\n                                                <i class='fas fa-calendar-check' /> {util.isoDate(v.endDate, false, false, true)}\n                                            </span>\n                                        </span>\n                                    ))}\n                                </div>\n\n                                <div>\n                                    {historyStatuses && historyStatuses.filter(e => e.dogId === dog.id).map(v => (\n                                        <span class={`badge badge-warning mr-2`} title={util.isoDate(v.endDate, false, false, true)}>{v.title}</span>\n                                    ))}\n                                </div>\n\n                                <div>\n                                    {dog.specialNeeds && <span class={`badge badge-warning mr-2`}><i class='fas fa-exclamation-triangle' /> {dog.specialNeeds}</span>}\n                                    {dogStatus && dogStatus.class && <span class={`badge badge-${dogStatus.class} mr-2`}>{dogStatus.icon && <i class={dogStatus.icon} />} {dogStatus.name}</span>}\n                                    {dogStatuses && dogStatuses.map(status => <>\n                                        {status && status.class && <span class={`badge badge-${status.class} mr-2`}>{status.icon && <i class={status.icon} />} {status.name}</span>}\n                                    </>)}\n                                    {dogPosition && dogPosition.class && <span class={`badge badge-${dogPosition.class || 'primary'} mr-2`}>{dogPosition.icon && <i class={dogPosition.icon} />} {dogPosition.name}</span>}\n                                </div>\n\n                            </div>\n                        </div>\n                    </div>\n\n                    {/* <Ad stores={this.props.stores} url={this.props.url} /> */}\n\n                    <div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 my-3'>\n                        <div class='row'>\n                            <div class='w-100 overflow-hidden'>\n                                <div\n                                    class='d-flex flex-row flex-nowrap pb-2 px-1'\n                                    style='overflow: auto; scroll-snap-type: x mandatory;'\n                                >\n                                    <div class='col px-0 pt-2'>\n                                        <button\n                                            class={`btn btn-block rounded-pill-left rounded-none ${submenu === 'info' ? 'btn-primary' : 'btn-outline-primary'} text-nowrap`}\n                                            style='text-overflow: ellipsis; overflow: hidden;'\n                                            data-menu='info'\n                                            onClick={this.chooseSubmenu}\n                                        ><i class='fas fa-pen-nib' /> <Text id='dogs.info'>Info</Text></button>\n                                        {submenu === 'info' && <ScrollIntoView horizontal={'center'} vertical={'end'} />}\n                                    </div>\n                                    <div class='col px-0 pt-2'>\n                                        <button\n                                            class={`btn btn-block rounded-none ${submenu === 'stats' ? 'btn-primary' : 'btn-outline-primary'} text-nowrap`}\n                                            style='text-overflow: ellipsis; overflow: hidden;'\n                                            data-menu='stats'\n                                            onClick={this.chooseSubmenu}\n                                        ><i class='fas fa-tachometer-alt' /> <Text id='dogs.stats'>Stats</Text></button>\n                                        {submenu === 'stats' && <ScrollIntoView horizontal={'center'} vertical={'end'} />}\n                                    </div>\n                                    <div class='col px-0 pt-2'>\n                                        <button\n                                            class={`btn btn-block rounded-none ${submenu === 'pictures' ? 'btn-primary' : 'btn-outline-primary'} text-nowrap`}\n                                            style='text-overflow: ellipsis; overflow: hidden;'\n                                            data-menu='pictures'\n                                            onClick={this.chooseSubmenu}\n                                        ><i class='fas fa-images' /> <Text id='dogs.pictures'>Pictures</Text></button>\n                                        {submenu === 'pictures' && <ScrollIntoView horizontal={'center'} vertical={'end'} />}\n                                    </div>\n                                    <div class='col px-0 pt-2'>\n                                        <button\n                                            class={`btn btn-block rounded-none ${submenu === 'workouts' ? 'btn-primary' : 'btn-outline-primary'} text-nowrap`}\n                                            style='text-overflow: ellipsis; overflow: hidden;'\n                                            data-menu='workouts'\n                                            onClick={this.chooseSubmenu}\n                                        ><i class='fas fa-running' /> <Text id='dogs.workouts'>Workouts</Text></button>\n                                        {submenu === 'workouts' && <ScrollIntoView horizontal={'center'} vertical={'end'} />}\n                                    </div>\n                                    <div class='col px-0 pt-2'>\n                                        <button\n                                            class={`btn btn-block rounded-none ${submenu === 'fitness' ? 'btn-primary' : 'btn-outline-primary'} text-nowrap`}\n                                            style='text-overflow: ellipsis; overflow: hidden;'\n                                            data-menu='fitness'\n                                            onClick={this.chooseSubmenu}\n                                        ><i class='fas fa-chart-line' /> <Text id='dogs.fitness'>Fitness</Text></button>\n                                        {submenu === 'fitness' && <ScrollIntoView horizontal={'center'} vertical={'end'} />}\n                                    </div>\n                                    <div class='col px-0 pt-2'>\n                                        <button\n                                            class={`btn btn-block rounded-none ${submenu === 'relations' ? 'btn-primary' : 'btn-outline-primary'} text-nowrap`}\n                                            style='text-overflow: ellipsis; overflow: hidden;'\n                                            data-menu='relations'\n                                            onClick={this.chooseSubmenu}\n                                        ><i class='fas fa-users' /> <Text id='dogs.relations'>Relations</Text></button>\n                                        {submenu === 'relations' && <ScrollIntoView horizontal={'center'} vertical={'end'} />}\n                                    </div>\n                                    <div class='col px-0 pt-2'>\n                                        <button\n                                            class={`btn btn-block rounded-none ${submenu === 'log' ? 'btn-primary' : 'btn-outline-primary'} text-nowrap`}\n                                            style='text-overflow: ellipsis; overflow: hidden;'\n                                            data-menu='log'\n                                            onClick={this.chooseSubmenu}\n                                        ><i class='fas fa-history' /> <Text id='dogs.log'>Log</Text></button>\n                                        {submenu === 'log' && <ScrollIntoView horizontal={'center'} vertical={'end'} />}\n                                    </div>\n                                    <div class='col px-0 pt-2'>\n                                        <button\n                                            class={`btn btn-block rounded-none ${submenu === 'trophy' ? 'btn-primary' : 'btn-outline-primary'} text-nowrap`}\n                                            style='text-overflow: ellipsis; overflow: hidden;'\n                                            data-menu='trophy'\n                                            onClick={this.chooseSubmenu}\n                                        ><i class='fas fa-award' /> <Text id='dogs.trophy'>Trophy case</Text></button>\n                                        {submenu === 'trophy' && <ScrollIntoView horizontal={'center'} vertical={'end'} />}\n                                    </div>\n                                    <div class='col px-0 pt-2'>\n                                        <button\n                                            class={`btn btn-block rounded-none ${submenu === 'achievements' ? 'btn-primary' : 'btn-outline-primary'} text-nowrap`}\n                                            style='text-overflow: ellipsis; overflow: hidden;'\n                                            data-menu='achievements'\n                                            onClick={this.chooseSubmenu}\n                                        ><i class='fas fa-clock' /> <Text id='dogs.achievements'>Achievements</Text></button>\n                                        {submenu === 'achievements' && <ScrollIntoView horizontal={'center'} vertical={'end'} />}\n                                    </div>\n                                    <div class='col px-0 pt-2'>\n                                        <button\n                                            class={`btn btn-block rounded-none ${submenu === 'links' ? 'btn-primary' : 'btn-outline-primary'} text-nowrap`}\n                                            style='text-overflow: ellipsis; overflow: hidden;'\n                                            data-menu='links'\n                                            onClick={this.chooseSubmenu}\n                                        ><i class='fas fa-link' /> <Text id='dogs.links'>Links</Text></button>\n                                        {submenu === 'links' && <ScrollIntoView horizontal={'center'} vertical={'end'} />}\n                                    </div>\n                                    <div class='col px-0 pt-2'>\n                                        <button\n                                            class={`btn btn-block rounded-none ${submenu === 'veterinary' ? 'btn-primary' : 'btn-outline-primary'} text-nowrap`}\n                                            style='text-overflow: ellipsis; overflow: hidden;'\n                                            data-menu='veterinary'\n                                            onClick={this.chooseSubmenu}\n                                        ><i class='fas fa-syringe' /> <Text id='dogs.veterinary'>Veterenary</Text></button>\n                                        {submenu === 'veterinary' && <ScrollIntoView horizontal={'center'} vertical={'end'} />}\n                                    </div>\n                                    <div class='col px-0 pt-2'>\n                                        <button\n                                            class={`btn btn-block rounded-pill-right rounded-none ${submenu === 'advanced' ? 'btn-primary' : 'btn-outline-primary'} text-nowrap`}\n                                            style='text-overflow: ellipsis; overflow: hidden;'\n                                            data-menu='advanced'\n                                            onClick={this.chooseSubmenu}\n                                        ><i class='fas fa-cogs' /> <Text id='dogs.advanced'>Advanced</Text></button>\n                                        {submenu === 'advanced' && <ScrollIntoView horizontal={'center'} vertical={'end'} />}\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n\n                {submenu === 'info' && <>\n                    <div class='row mt-4'>\n                        <div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3'>\n                            <h5><Text id='dogs.info-about'>Informasjon om</Text> {dog.name}</h5>\n\n                            {!dog.description && <>\n                                <div class='text-center text-muted'>\n                                    <div class='display-1'>\n                                        <i class='fas fa-pen-nib' />\n                                    </div>\n                                    <h3 class='font-weight-lighter'>\n                                        <Text id='dogs.add-description'>G inn p endring av hunden for  legge inn en beskrivelse.</Text>\n                                    </h3>\n                                </div>\n                            </>}\n                            <Markdown markdown={mu.replaceImages(dog.description, dog.images, language)} markdownOpts={mu.getMarkdownOptions()} />\n                        </div>\n                    </div>\n                </>}\n\n                {submenu === 'stats' && <>\n                    <div class='row mt-4'>\n                        <div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3'>\n                            <WorkoutGraph\n                                stores={this.props.stores}\n                                isLoading={false}\n                                key={`graph-${workoutPlan.id}-${workoutPlans.length}`}\n                            />\n                            <WorkoutTotals stores={this.props.stores}\n                                currentTeam={dog.team}\n                                currentSeason={workoutSummaryCurrentSeason}\n                                prevSeason={workoutSummaryPreviousSeason}\n                                key={`totals-${dog.id}-${Object.keys(workoutSummaryCurrentSeason).length}-${Object.keys(workoutSummaryPreviousSeason).length}`}\n                            />\n                            <WorkoutStatus stores={this.props.stores}\n                                dog={dog.id}\n                                key={`status-${dog.id}-${Object.keys(workoutSummaryCurrentSeason).length}-${Object.keys(workoutSummaryPreviousSeason).length}`}\n                            />\n                        </div>\n\n                        {workoutSummaryCurrentSeason.positions && <>\n                            <div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-3'>\n                                <table class='table table-sm table-striped'>\n                                    <thead>\n                                        <tr>\n                                            <th>&nbsp;</th>\n                                            <th>Lead</th>\n                                            <th>Point</th>\n                                            <th>Team</th>\n                                            <th>Wheel</th>\n                                        </tr>\n                                    </thead>\n                                    <tbody>\n                                        <tr>\n                                            <th><Text id='workouts.distance'>Distance</Text></th>\n                                            <td class='text-center'><Distance stores={this.props.stores} value={util.asNumber(workoutSummaryCurrentSeason, 'positions', 'lead', 'distanceKm') || 0} /> </td>\n                                            <td class='text-center'><Distance stores={this.props.stores} value={util.asNumber(workoutSummaryCurrentSeason, 'positions', 'point', 'distanceKm') || 0} /> </td>\n                                            <td class='text-center'><Distance stores={this.props.stores} value={util.asNumber(workoutSummaryCurrentSeason, 'positions', 'team', 'distanceKm') || 0} /> </td>\n                                            <td class='text-center'><Distance stores={this.props.stores} value={util.asNumber(workoutSummaryCurrentSeason, 'positions', 'wheel', 'distanceKm') || 0} /> </td>\n                                        </tr>\n                                        <tr>\n                                            <th><Text id='workouts.duration'>Duration</Text></th>\n                                            <td class='text-center'>{util.secToHms(util.asNumber(workoutSummaryCurrentSeason, 'positions', 'lead', 'duration') || 0, true)}</td>\n                                            <td class='text-center'>{util.secToHms(util.asNumber(workoutSummaryCurrentSeason, 'positions', 'point', 'duration') || 0, true)}</td>\n                                            <td class='text-center'>{util.secToHms(util.asNumber(workoutSummaryCurrentSeason, 'positions', 'team', 'duration') || 0, true)}</td>\n                                            <td class='text-center'>{util.secToHms(util.asNumber(workoutSummaryCurrentSeason, 'positions', 'wheel', 'duration') || 0, true)}</td>\n                                        </tr>\n                                        <tr>\n                                            <th><Text id='workouts.ascend'>Ascend</Text></th>\n                                            <td class='text-center'><Elevation stores={this.props.stores} value={util.asNumber(workoutSummaryCurrentSeason, 'positions', 'lead', 'elevation') || 0} /></td>\n                                            <td class='text-center'><Elevation stores={this.props.stores} value={util.asNumber(workoutSummaryCurrentSeason, 'positions', 'point', 'elevation') || 0} /></td>\n                                            <td class='text-center'><Elevation stores={this.props.stores} value={util.asNumber(workoutSummaryCurrentSeason, 'positions', 'team', 'elevation') || 0} /></td>\n                                            <td class='text-center'><Elevation stores={this.props.stores} value={util.asNumber(workoutSummaryCurrentSeason, 'positions', 'wheel', 'elevation') || 0} /></td>\n                                        </tr>\n                                    </tbody>\n                                </table>\n                            </div>\n                        </>}\n                    </div>\n                </>}\n\n                {submenu === 'pictures' && <>\n                    <div class='row mt-4'>\n                        <div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3'>\n                            <h5><Text id='dogs.pictures-of'>Bilder av</Text> {dog.name}</h5>\n                            <div class='row'>\n\n                                {(!dog.images || dog.images.length === 0) && <>\n                                    <div class='text-center text-muted'>\n                                        <div class='display-1'><i class='fas fa-images' /></div>\n                                        <h3><Text id='dogs.no-images-title'>No images for this dog!</Text></h3>\n                                        <Text id='dogs.no-images-text'>You can add more images to this dog. Puppy pictures, workout pictures, lazy summer pictures, etc. All is a nice way to create a better profile for this dog.</Text>\n                                    </div>\n                                </>}\n\n                                <ImageScroller stores={this.props.stores} images={dog.images} />\n                            </div>\n                        </div>\n\n                        <div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mb-2 mt-5 bg-light py-4 border rounded-lg'>\n                            <Input saved={saved} dog={dog} field='imageOther' type='image' icon='fas fa-camera'\n                                stores={this.props.stores}\n                                title={<Text id='dogs.photo'>Bilde</Text>}\n                                help={<Text id='dogs.photo-help'>Bilder av hunden.</Text>}\n                                onInput={this.updateField} updateField={this.updateFieldValue}\n                                showImages={false}\n                            />\n                        </div>\n                    </div>\n                </>}\n\n                {submenu === 'workouts' && <>\n                    <div class='row mt-4'>\n                        <WorkoutCalendar\n                            stores={this.props.stores}\n                            dog={dog}\n                            basehref={`/dogs/${dog.id}/`}\n                            month={month}\n                            year={year}\n                            key={`calendar-${workoutPlan.id}-${workoutPlans.length}`}\n                        />\n                    </div>\n                </>}\n\n                {submenu === 'relations' && <>\n                    <div class='row mt-4'>\n                        <div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3'>\n                            <div class='container-fluid mb-5 mt-4'>\n                                <div class='row mt-2'>\n                                    <div class='col text-center'>\n                                        <small class='text-muted'><Text id='dogs.birth'>Fdt</Text></small>\n                                        <h3>\n                                            {util.isoDate(dog.birth, false, false, true)}\n                                        </h3>\n                                    </div>\n                                    {dog.deceased && <div class='col text-center border-left'>\n                                        <small class='text-muted'><Text id='dogs.deceased'>Dd</Text></small>\n                                        <h3>\n                                            {util.isoDate(dog.deceased, false, false, true)}\n                                        </h3>\n                                    </div>}\n                                </div>\n                                <div class='row mt-2'>\n                                    <div class='col text-center'>\n                                        <small class='text-muted'><Text id='dogs.team'>Team</Text></small>\n                                        <h3>\n                                            {dog.team && userStore.findTeam(dog.team)}\n                                        </h3>\n                                    </div>\n                                </div>\n                                <div class='row mt-2'>\n                                    <div class='col text-center'>\n                                        <small class='text-muted'><Text id='dogs.mother'>Mor</Text></small>\n                                        {dogMother ? <DogStatus stores={this.props.stores} dog={dogMother} fullWidth={true} /> : <>\n                                            <h3>\n                                                {dog.motherName}\n                                            </h3>\n                                            <div>\n                                                {dog.motherChipId && <small><i class='fas fa-microchip' /> {dog.motherChipId}</small>}\n                                            </div>\n                                        </>}\n                                    </div>\n                                    <div class='col text-center border-left'>\n                                        <small class='text-muted'><Text id='dogs.father'>Far</Text></small>\n                                        {dogFather ? <DogStatus stores={this.props.stores} dog={dogFather} fullWidth={true} /> : <>\n                                            <h3>\n                                                {dog.fatherName}\n                                            </h3>\n                                            <div>\n                                                {dog.fatherChipId && <small><i class='fas fa-microchip' /> {dog.fatherChipId}</small>}\n                                            </div>\n                                        </>}\n                                    </div>\n                                </div>\n                                <div class='row mt-2'>\n                                    <div class='col text-center'>\n                                        <small class='text-muted'><Text id='dogs.siblings'>Ssken</Text></small>\n                                        <div class='row'>\n                                            {siblings && siblings.map(d => <DogStatus stores={this.props.stores} dog={d} />)}\n                                        </div>\n                                    </div>\n                                </div>\n                                <div class='row mt-2'>\n                                    <div class='col text-center'>\n                                        <small class='text-muted'><Text id='dogs.children'>Avkom</Text></small>\n                                        <div class='row'>\n                                            {children && children.map(d => <DogStatus stores={this.props.stores} dog={d} />)}\n                                        </div>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </>}\n\n                {submenu === 'log' && <>\n                    <div class='row mt-4'>\n                        <div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3'>\n                            <DogAddLog stores={this.props.stores} dog={dog} className={'btn-block btn-primary btn-lg'} />\n                        </div>\n\n                        <div class='offset-0 col-12 mt-5'>\n                            <div class='container-fluid'>\n                                <div class='row'>\n                                    <div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 px-0'>\n                                        <h5 class='mt-3'><Text id='dogs.log-for'>Logg for</Text> {dog.name}</h5>\n                                    </div>\n\n                                    {showCalendar ? <>\n                                        <DogCalendar\n                                            stores={this.props.stores}\n                                            basehref={`/dogs/${dog.id}/history/`}\n                                            dog={dog}\n                                            month={month}\n                                            year={year}\n                                            callback={this.setHistoryType}\n                                            key={`calendar-history-${dog.id}-${util.getNestedValue(dog, 'history.length')}`}\n                                        />\n                                        <div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mb-4'>\n                                            <button class='btn btn-block btn-link' onClick={this.toggleCalendar}>\n                                                <i class='fas fa-angle-up' /> <Text id='dogs.hide-calendar'>Hide Calendar</Text>\n                                            </button>\n                                        </div>\n                                    </> : <>\n                                        <div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mb-4'>\n                                            <button class='btn btn-block btn-link' onClick={this.toggleCalendar}>\n                                                <i class='fas fa-angle-down' /> <Text id='dogs.show-calendar'>Show Calendar</Text>\n                                            </button>\n                                        </div>\n                                    </>}\n\n                                    {!hasHistory && <div class='text-muted'><Text id='dogs.log-for-is-empty' fields={{ name: dog.name }}>Loggen til {dog.name} er tom</Text></div>}\n                                    {/* {hasHistory && historyFeed.filter(filterHistories).map(line => (\n                                        <DogHistory stores={this.props.stores} line={line} />\n                                    ))} */}\n                                    {dog.history && dog.history.reverse().map(line => (\n                                        <DogHistory stores={this.props.stores} line={line} />\n                                    ))}\n\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </>}\n\n                {submenu === 'trophy' && <>\n                    <div class='row mt-4'>\n                        <div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3'>\n                            {(!dog.trophys || dog.trophys.length === 0) && <>\n                                <div class='text-center text-muted'>\n                                    <div class='display-1'><i class='fas fa-award' /></div>\n                                    <h3><Text id='dogs.no-trophys-title'>No trophys for this dog!</Text></h3>\n                                    <Text id='dogs.no-trophys-text'>You have to add more workouts, pictures, log entries for dogs, etc to earn trophys.</Text>\n                                </div>\n                            </>}\n\n                            <div class='row'>\n                                {dog.trophys && dog.trophys.reverse().map(file => {\n                                    const img = mu.getTrophyImage(file.name);\n                                    if (!img) {\n                                        return '';\n                                    }\n                                    const textHeader = file.descriptionHeader && file.descriptionHeader[language] ? file.descriptionHeader[language] : '';\n                                    const text = file.description && file.description[language] ? file.description[language] : '';\n                                    return (\n                                        <div class='col-4 mt-3'>\n                                            <div class='mb-2'>\n                                                <img src={img} class='img-fluid' />\n                                            </div>\n                                            <strong>{textHeader}</strong>\n                                            {/* <small class='font-weight-lighter mr-2'>\n                                                {util.isoDate(file.createdDate, false, false, true)}\n                                            </small> */}\n                                            <small>\n                                                <details>\n                                                    <summary><Text id='dogs.trophy-details'>Details</Text></summary>\n                                                    <Markdown markdown={mu.replaceImages(text, dog.images, language)} markdownOpts={mu.getMarkdownOptions()} />\n                                                </details>\n                                            </small>\n                                        </div>\n                                    );\n                                })}\n                            </div>\n\n                        </div>\n                    </div>\n                </>}\n\n                {submenu === 'fitness' && <>\n                    <div class='row mt-4'>\n                        <div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3'>\n                            <FormGraph stores={this.props.stores} />\n                        </div>\n                    </div>\n                </>}\n\n                {submenu === 'veterinary' && <>\n                    <div class='row mt-4'>\n                        <div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3'>\n                            <h5><Text id='dogs.vetenary-approved-vaccines'>Vetenary approved vaccines</Text></h5>\n\n                            {(!dogVaccineLogStatuses || dogVaccineLogStatuses.length === 0) && <>\n                                <div class='text-center text-muted'>\n                                    <div class='display-1'>\n                                        <i class='fas fa-syringe' />\n                                    </div>\n                                    <h3 class='font-weight-lighter'>\n                                        <Text id='dogs.add-veterinary'>Kontakt din veterinr og be om at vaksinene godkjennes i appen.</Text>\n                                    </h3>\n                                </div>\n                            </>}\n\n                            <div class=''>\n                                {dogVaccineLogStatuses && dogVaccineLogStatuses.map((vac) => {\n                                    return (\n                                        <div class='col-12 mt-2 p-3 border rounded-lg bg-light'>\n\n                                            <span class={`float-right badge badge-${vac.inKarens ? 'warning' : 'success'} ml-2 mb-1`}>\n                                                <span class='font-weight-lighter ml-2'>\n                                                    <i class='fas fa-calendar-check' /> {util.isoDate(vac.vaccineAgens.durationEnd, false, false, true)}\n                                                    {vac.inKarens && <>\n                                                        <br />\n                                                        (<Text id='dogs.vaccine-karens'>karens</Text>: {util.format(vac.karensDaysLeft, 0)} <Text id='dogs.vaccine-karens-days-left'>days left</Text>)\n                                                    </>}\n                                                </span>\n                                            </span>\n\n                                            <h5>{vac.vaccineAgens.name}</h5>\n                                            <span class='font-weight-lighter'>\n                                                <Text id='dogs.vaccine-name'>Vaksinenavn</Text>:\n                                            </span> {vac.vaccineName}<br />\n                                            <span class='font-weight-lighter'>\n                                                <Text id='dogs.vaccine-date'>Vaksinedato</Text>:\n                                            </span> {util.isoDate(vac.date, false, false, true)}<br />\n                                            <span class='font-weight-lighter'>\n                                                <Text id='dogs.vaccine-veterinary'>Veterinr</Text>:\n                                            </span> {vac.veterinaryFirstname} {vac.veterinaryLastname} &lt;{vac.veterinaryEmail}&gt;<br />\n                                        </div>\n                                    );\n                                })}\n                            </div>\n\n                        </div>\n                    </div>\n                </>}\n\n                {submenu === 'achievements' && <>\n                    <div class='row mt-4'>\n                        <div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3'>\n                            {(!dog.achievements || dog.achievements.length === 0) && <>\n                                <div class='text-center text-muted'>\n                                    <div class='display-1'><i class='fas fa-clock' /></div>\n                                    <h3><Text id='dogs.no-achievements-title'>No achievements for this dog!</Text></h3>\n                                    <Text id='dogs.no-achievements-text'>You can add achievements to this dog. Ie. Memories, trips, tests, prices, races, etc.</Text>\n                                </div>\n                            </>}\n\n                            {dog.achievements && dog.achievements.map(file => (\n                                <div class='col-12 p-1'>\n                                    <span class='font-weight-lighter mr-2'>{util.isoDate(file.createdDate, false, false, true)}</span>\n                                    <span class='mr-2'>{file.name}</span>\n                                    <span class='mr-2'>{file.url}</span>\n                                </div>\n                            ))}\n                        </div>\n                    </div>\n                </>}\n\n                {submenu === 'links' && <>\n                    <div class='row mt-4'>\n                        <div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3'>\n                            {(!dog.links || dog.links.length === 0) && <>\n                                <div class='text-center text-muted'>\n                                    <div class='display-1'><i class='fas fa-link' /></div>\n                                    <h3><Text id='dogs.no-links-title'>No links for this dog!</Text></h3>\n                                    <Text id='dogs.no-links-text'>You can add links to this dog. Ie. Links to Facebook page, Instagram page, blogg, etc.</Text>\n                                </div>\n                            </>}\n\n                            {dog.links && dog.links.map(file => (\n                                <div class='col-12 p-1'>\n                                    <span class='font-weight-lighter mr-2'>{util.isoDate(file.createdDate, false, false, true)}</span>\n                                    <span class='mr-2'>{file.name}</span>\n                                    <span class='mr-2'>{file.url}</span>\n                                </div>\n                            ))}\n                        </div>\n                    </div>\n                </>}\n\n                {submenu === 'advanced' && <>\n                    <div class='row mt-4'>\n                        <div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3'>\n                            {(!dog.files || dog.files.length === 0) && <>\n                                <div class='text-center text-muted'>\n                                    <div class='display-1'><i class='fas fa-file' /></div>\n                                    <h3><Text id='dogs.no-files-title'>No files attached to this dog!</Text></h3>\n                                    <Text id='dogs.no-files-text'>You can upload files to this dog inside edit. These files can be of any type. Ie: Certificates, test, etc.</Text>\n                                </div>\n                            </>}\n                            {dog.files && dog.files.map(file => (\n                                <div class='d-flex'>\n                                    <span class='font-weight-lighter mr-2'>{util.isoDate(file.createdDate, false, false, true)}</span>\n                                    <span class='mr-2'><a href={file.s3Link} target='_blank' rel='noreferrer'>{file.name}</a></span>\n                                    <span class='font-weight-lighter mr-2'>{util.formatBytes(file.size, 1)}</span>\n                                </div>\n                            ))}\n                        </div>\n\n                        <div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mb-2 mt-5 bg-light py-4 border rounded-lg'>\n                            <Localizer>\n                                <Input saved={saved} dog={dog} field='files' type='file' icon='fas fa-file'\n                                    stores={this.props.stores}\n                                    title={<Text id='dogs.files'>Files</Text>}\n                                    help={<Text id='dogs.files-help'>Filer til denne hunden.</Text>}\n                                    onInput={this.updateField}\n                                    updateField={this.updateFieldValue}\n                                />\n                            </Localizer>\n                        </div>\n\n                        <div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3'>\n                            <div class='mt-5 pt-5 mb-5'>\n                                <button class='btn btn-sm btn-danger mt-5 float-right'\n                                    onClick={this.deleteDog}\n                                >\n                                    <i class='fas fa-trash' /> <Text id='dogs.delete'>Slett</Text> {dog.name}\n                                </button>\n                            </div>\n                        </div>\n                    </div>\n                </>}\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nexport default DogsDetail;\n","import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport { Text, Localizer } from 'preact-i18n';\n\nimport mu from '../../lib/musher-util';\n\nconst initialState = {};\n\n@observer\nclass PremiumBadge extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            ...initialState,\n        };\n    }\n\n    render() {\n        return (\n            <span class='badge badge-pill badge-warning float-right'><i class='fas fa-award mr-2' /> <Text id='premium.title'>Premium</Text></span>\n\n        );\n    }\n}\n\nexport default PremiumBadge;\n","import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport { Text, Localizer, withText } from 'preact-i18n';\n\nimport mu from '../../lib/musher-util';\n\nimport Modal from '../modal';\nimport ImageSlider from '../imageSlider';\nimport ImageScroller from '../imageScroller';\n\n\nimport style from '../style.css';\n\nconst VACCINE_TYPES = mu.getVaccineTypes();\n\n@observer\nclass DogHistoryLine extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            showDate: false,\n        };\n    }\n\n    showModal = (e) => {\n        e.stopPropagation();\n        e.preventDefault();\n        const img = e.target.dataset.image;\n        const imgXXL = e.target.dataset.imagexxl;\n        const thumb = e.target.dataset.thumb;\n        const name = e.target.dataset.name;\n        const title = e.target.dataset.title;\n        const date = e.target.dataset.date;\n        this.setState({\n            displayModal: true,\n            currentImage: img,\n            currentImageXXL: imgXXL,\n            thumb,\n            name,\n            title,\n            date,\n        });\n    }\n\n    closeModal = () => {\n        this.setState({\n            displayModal: false,\n        });\n    }\n\n    toggleDate = () => {\n        const { showDate } = this.state;\n        this.setState({ showDate: !showDate });\n    }\n\n    touchStart = (e) => {\n        const { eventFired } = this.state;\n        if (!eventFired)  {\n            this.setState({\n                startY: e.touches[0].pageY,\n                startX: e.touches[0].pageX,\n                eventFired: false,\n                diffY: undefined,\n                diffX: undefined,\n                deleteVerify: false,\n            });\n        }\n    }\n\n    touchEnd = () => {\n        const { eventFired } = this.state;\n        if (eventFired) {\n            this.setState({\n                startY: undefined,\n                startX: undefined,\n            });\n        } else {\n            this.setState({\n                startY: undefined,\n                startX: undefined,\n                eventFired: false,\n                diffY: undefined,\n                diffX: undefined,\n                deleteVerify: false,\n            });\n        }\n    }\n\n    touchMove = (e) => {\n        const { eventFired } = this.state;\n        if (eventFired) {\n            return false;\n        }\n        const { startY, startX } = this.state;\n        const scrollDistance = 130;\n        const y = e.touches[0].pageY;\n        const x = e.touches[0].pageX;\n        const diffY = y - startY;\n        const diffX = x - startX;\n        this.setState({\n            diffY,\n            diffX,\n        });\n        if (y > (startY + scrollDistance)) {\n            // console.log('swiping down', y, '>', startY + scrollDistance);\n        } else if (y < (startY - scrollDistance)) {\n            // console.log('swiping up', y, '<', startY + scrollDistance);\n        } else if (x > (startX + scrollDistance)) {\n            // console.log('swiping right', startX, x);\n        } else if (x < (startX - scrollDistance)) {\n            this.setState({\n                eventFired: true,\n            });\n        }\n    }\n\n    reset = (e) => {\n        if (e) {\n            e.stopPropagation();\n            e.preventDefault();\n        }\n        this.setState({\n            deleted: false,\n            startY: undefined,\n            startX: undefined,\n            eventFired: false,\n            diffY: undefined,\n            diffX: undefined,\n            deleteVerify: false,\n        });\n    }\n\n    deleteHistoryRequest = async (e) => {\n        e.stopPropagation();\n        this.setState({\n            deleteVerify: true,\n        });\n    }\n\n    deleteHistory = async (e) => {\n        e.stopPropagation();\n        const { dogStore } = this.props.stores;\n        const { line } = this.props;\n        await dogStore.save({\n\t\t\tid: line.dogId,\n\t\t\t$pull: {\n                history: { _id: line.id || line._id },\n\t\t\t},\n\t\t});\n        this.setState({\n            deleted: true,\n            startY: undefined,\n            startX: undefined,\n            eventFired: false,\n            diffY: undefined,\n            diffX: undefined,\n            deleteVerify: false,\n        });\n    }\n\n    swipeLeft = (e) => {\n        const { eventFired } = this.state;\n        e.stopPropagation();\n        if (eventFired) {\n            this.reset();\n        } else {\n            this.setState({\n                eventFired: true,\n                diffX: -130,\n            });\n        }\n    }\n\n    componentWillReceiveProps(nextProps) {\n        // console.log('componentWillReceiveProps', nextProps);\n        if (nextProps.line.id !== this.props.line.id) {\n            this.reset();\n        }\n    }\n\n    render() {\n        const { userStore } = this.props.stores;\n        const { user } = userStore;\n        const { language = 'en' } = user;\n        const HISTORY_TYPE_MAP = mu.getHistoryMap(language);\n\n        const { displayModal, currentImage, currentImageXXL, showDate, thumb, name, title, date } = this.state;\n        const { line } = this.props;\n        const { diffX, deleted, deleteVerify } = this.state;\n        const hasImage = line.images && line.images.length > 0;\n        const isBeeingEdited = diffX < 0;\n        return (\n            <div class={`w-100 mb-4 position-relative ${style.hoverElement}`}\n                onTouchstart={deleted ? () => {} : this.touchStart}\n                onTouchend={deleted ? () => {} : this.touchEnd}\n                onTouchmove={deleted ? () => {} : this.touchMove}\n                onClick={!deleted && isBeeingEdited ? this.reset : () => {}}\n                style={`opacity: ${deleted ? 0.3 : 1};`}\n            >\n                {!isBeeingEdited && !deleted && <div class={`position-absolute ${style.hoverelementonly}`} style='top: 0px; right: 0px; z-index: 1000;'>\n                    <button class='btn btn-sm btn-secondary' type='button'\n                        onClick={this.swipeLeft}\n                    >\n                        <i class='fas fa-ellipsis-h' />\n                    </button>\n                </div>}\n                {isBeeingEdited && !deleted && <div class='position-absolute' style={`right: 0px; top: 10%; overflow: hidden; width: ${Math.abs(diffX) || 0}px; line-height: 0.8em;`}>\n                    {!line.grouped && <>\n                        {deleteVerify ?\n                            <>\n                                <button class='btn btn-sm btn-secondary float-right ml-3 mb-3'\n                                    onClick={this.reset}\n                                >\n                                    <i class='fas fa-times' /> <Text id='dog.history.no'>Nei</Text>\n                                </button>\n                                <button class='btn btn-sm btn-success float-right'\n                                    onClick={this.deleteHistory}\n                                >\n                                    <i class='fas fa-check' /> <Text id='dog.history.yes'>Ja</Text>\n                                </button>\n                            </>:\n                            <button class='btn btn-sm btn-danger float-right'\n                                onClick={this.deleteHistoryRequest}\n                            >\n                                <i class='fas fa-trash' /> <Text id='dog.history.delete'>Slett</Text>\n                            </button>\n                        }\n                    </>}\n                    {line.grouped && <small>\n                        <Text id='dog.history.cant-delete-groups'>Kan ikke slette grupperinger. G inn p hundene og slett der.</Text><br />\n                        <button class='btn btn-sm btn-success float-right'\n                            onClick={this.reset}\n                        >\n                            <i class='fas fa-check' /> Ok\n                        </button>\n                    </small>}\n                </div>}\n                <div class='row position-relative' style={`left: ${isBeeingEdited ? diffX : 0}px;`}>\n                    <div class='col-12 col-sm-8 col-lg-6 offset-sm-2 offset-lg-3 d-flex mb-0 position-relative'>\n                        {/* {JSON.stringify(dog, null, 4)} */}\n                        {line.dogImage ? <div class={`text-center border rounded-circle imageRounded imageRoundedSmall`} style={line.dogImage ? `background-image: url(\"${line.dogImage.s3SmallLink}\"); background-size: cover;` : ''}>\n                            &nbsp;\n                        </div> : <div class={`text-center border rounded-circle imageRounded imageRoundedSmall`} style={line.images && line.images[0] ? `background-image: url(\"${line.images[0].s3SmallLink}\"); background-size: cover;` : ''}>\n                            {!hasImage && <i class='fas fa-rss text-muted mt-2' style='font-size: 20px;' />}\n                        </div>}                        \n                        <div class='flex-grow-1 pl-3 pr-2' style='line-height: 1.0em;'>\n                            {!line.grouped && line.dogId && <a class='stretched-link' href={`/dogs/${line.dogId}`}>\n                                <strong class='mr-2'>{line.dogShortname || line.dogName}: </strong>\n                            </a>}\n                            {line.title}<br />\n                            \n                            {line.grouped && (\n                                <>\n                                    <div class='w-100 clearfix mt-2'>\n                                        {line.grouped.map(el => (\n                                            <>\n                                                <a href={`/dogs/${el.dogId}`}>\n                                                    {el.dogImage ? (\n                                                        <div class={`text-center border rounded-circle imageRounded imageRoundedThumb float-left`}\n                                                            style={`margin-right: 2px; ${el.dogImage ? `background-image: url(\"${el.dogImage.s3SmallLink}\");` : ''}`}\n                                                        >\n                                                            &nbsp;\n                                                        </div>\n                                                    ) : (\n                                                        <div class={`text-center border rounded-circle imageRounded imageRoundedThumb float-left text-muted pt-1`} \n                                                            style={`margin-right: 2px; ${el.images && el.images[0] ? `background-image: url(\"${el.images[0].s3SmallLink}\");` : ''}`}\n                                                        >\n                                                            {/* {!hasImage && <i class='fas fa-dog text-muted' style='font-size: 10px;' />} */}\n                                                            {!hasImage && <span style='font-size: 15px;'>{util.ucfirst(el.dogName, true)}</span>}\n                                                        </div>\n                                                    )}\n                                                </a>\n                                            </>\n                                        ))}\n                                    </div>\n                                    <div class='w-100 clearfix mt-2'>\n                                        <small>\n                                            {line.grouped.map(el => (\n                                                <span class='float-left mr-2 text-muted'>\n                                                    <a href={`/dogs/${el.dogId}`}>\n                                                        {el.dogShortname || el.dogName}\n                                                    </a>\n                                                </span>\n                                            ))}\n                                        </small>\n                                    </div>\n                                </>\n                            )}\n\n                            <div class='w-100 clearfix'>\n                                <small class='text-muted'>\n                                    {line.date && <small onClick={this.toggleDate}>\n                                        {showDate ? util.formatDate(line.date, { locale: 'no-NB' }) : util.formatDistance(line.date, new Date(), { locale: 'no-NB' })}\n                                        {line.endDate && <span class='ml-3'><i class='fas fa-hourglass-end' /> {util.formatDate(line.endDate, { locale: 'no-NB' })}</span>}\n                                        {line.historyType && <span class='ml-3'>\n                                            <i class='fas fa-folder-open' /> {HISTORY_TYPE_MAP[line.historyType]} {line.vaccineType ? ` - ${VACCINE_TYPES[line.vaccineType].name}` : ''}\n                                        </span>}\n                                        {line.weight && <span class='ml-3'><i class='fas fa-balance-scale' /> {line.weight} kg</span>}\n                                        {line.bodyScore && <span class='ml-3'><i class='fas fa-dog' /> {line.bodyScore}</span>}\n                                        {line.user && line.user.email && <span class='ml-3'><i class='fas fa-user' /> {line.user.email}</span>}\n                                    </small>}\n                                </small>\n                            </div>\n\n                            <div class='row mt-2'>\n                                <div class='col-12'>\n                                    <span class='font-weight-normal'>{line.comment}</span>\n                                    <span class='float-right'>\n                                        {line.cost ? `Kr. ${util.format(line.cost, 2)}` : ''}\n                                    </span>\n                                </div>\n                            </div>\n\n                        </div>\n                    </div>\n\n                    <div class='col-12 col-sm-8 col-lg-6 offset-sm-2 offset-lg-3 mt-1'>\n                        <div class='row'>\n                            <ImageScroller stores={this.props.stores} images={line.images} />\n                        </div>\n                    </div>\n                </div>\n            </div>\n        );\n    }\n}\n\nexport default DogHistoryLine;\n"],"sourceRoot":""}