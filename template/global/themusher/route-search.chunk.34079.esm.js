(window.webpackJsonp=window.webpackJsonp||[]).push([[53,34],{"1OK2":function(t,e,s){"use strict";var a,o=s("hosL"),i=(s("Utv1"),s("/eY4"));Object(i.a)(a=class extends o.Component{constructor(t){super(t),this.touchStart=t=>{t.stopPropagation(),this.setState({startX:t.touches[0].pageX})},this.touchEnd=t=>{t.stopPropagation(),this.setState({startX:void 0,sliding:!1})},this.touchMove=t=>{t.stopPropagation();const{totalImages:e}=this.state;if(e>1){const{startX:e,sliding:s}=this.state,a=50,o=t.touches[0].pageX;s||(o>e+a?(this.setState({sliding:!0}),this.prevImage()):o<e-a&&(this.setState({sliding:!0}),this.nextImage()))}};const{images:e=[]}=t;this.state={imageContainer:1,currentImage1:e[0]||{},currentImage2:{},currentIdx:0,totalImages:e.length||0,imageDots:[...Array(e.length||0).fill(1).map((t,e)=>t+e)]}}nextImage(){const{images:t}=this.props,{totalImages:e,currentIdx:s,imageContainer:a}=this.state,o=1===a?2:1;let i=s+1;i>e-1&&(i=0),this.setState({["currentImage"+o]:t[i],currentIdx:i,imageContainer:o})}prevImage(){const{images:t}=this.props,{totalImages:e,currentIdx:s,imageContainer:a}=this.state;let o=s-1;o<0&&(o=e-1),this.setState({["currentImage"+(1===a?2:1)]:t[o],currentIdx:o,imageContainer:1===a?2:1})}componentWillReceiveProps(t){if(t.images!==this.props.images){const{images:e=[]}=t;this.setState({imageContainer:1,currentImage1:e.length>0?e[0]:{},currentImage2:{},currentIdx:0,totalImages:e.length||0,imageDots:[...Array(e.length||0).fill(1).map((t,e)=>t+e)]})}}render(){const{currentImage1:t,currentImage2:e,imageContainer:s,totalImages:a,imageDots:i,currentIdx:l}=this.state,c=this["image"+s],n=1===s?t:e,r=c&&c.height?c.width/c.height:4/3;let h,d;if(n.dimensions){const{width:t,height:e,orientation:s}=n.dimensions;s>4&&s<9?(h=t,d=e):(h=e,d=t)}const m=n.dimensions?d/h:r;return a<=0?"":Object(o.h)("div",{class:"w-100"},Object(o.h)("div",{class:"border rounded position-relative w-100",style:`height: calc(85vw / ${m}); overflow: hidden; transition: all .3s ease-in-out;`,onTouchstart:this.touchStart,onTouchend:this.touchEnd,onTouchmove:this.touchMove},a>1&&Object(o.h)("span",{class:"position-absolute",style:"top:0px; right: 5px; z-index: 2000;"},Object(o.h)("small",null,l+1,"/",a)),t&&Object(o.h)("div",{class:"position-absolute",style:(1===s?"opacity: 1;":"opacity: 0;")+" transition: all .3s ease-in-out; top: 0; left: 0;"},Object(o.h)("img",{loading:"lazy",src:t.s3LargeLink,class:"img-fluid align-middle",ref:t=>this.image1=t})),e&&Object(o.h)("div",{class:"position-absolute",style:(2===s?"opacity: 1;":"opacity: 0;")+" transition: all .3s ease-in-out; top: 0; left: 0;"},Object(o.h)("img",{loading:"lazy",src:e.s3LargeLink,class:"img-fluid align-middle",ref:t=>this.image2=t}))),i.length>1&&Object(o.h)("div",{class:"w-100 text-center"},i.map(t=>Object(o.h)("span",{style:`color: ${t===l+1?"#ffffff":"#808080"};`},"•"))))}})},"4QWe":function(t,e,s){"use strict";(function(t){var a,o=s("hosL"),i=s("Utv1"),l=s("/eY4"),c=s("OhSV"),n=s("go65"),r=s("om2D"),h=s("ZOvn");let d=Object(l.a)(a=class extends o.Component{constructor(t){var e;super(t),e=this,this.beforeImagesUploaded=()=>{this.setState({sendButtonEnabled:!1})},this.afterImagesUploaded=()=>{this.setState({sendButtonEnabled:!0})},this.commentStory=async function(){const{sendButtonEnabled:t}=e.state;if(!t)return!1;const{callback:s=(()=>{}),inputRefObject:a={}}=e.props,{story:o}=e.props,{storyStore:i}=e.props.stores,{comment:l,showAddImage:c}=e.state;e.setState({sendButtonEnabled:!1});const n=await i.commentStory({id:o.id,comment:l});n&&200===n.status&&(e.setState({comment:{body:"",images:[]}},()=>{h.a.resizeTextarea(a[o.id]),c&&e.addImage()}),s({story:o,response:n})),e.setState({sendButtonEnabled:!0})},this.addImages=({value:t})=>{const{comment:e}=this.state;e.images.push(...t),this.setState({comment:e})},this.addImage=()=>{const{showAddImage:t=!1}=this.state;this.setState({showAddImage:!t})},this.handleImageErrored=t=>{const e=t.target;e.onerror=null,setTimeout(()=>{e.src+="?"+new Date},1e3)},this.state={comment:{body:"",images:[]},showAddImage:!1,sendButtonEnabled:!0},this.inputRef={}}render(){const{inputRef:e,story:s}=this.props,{comment:a,showAddImage:l,sendButtonEnabled:d}=this.state,{userStore:m}=this.props.stores,{user:b={}}=m,u=h.a.displayNameShort(b),p=(h.a.displayName(b),b.image||(b.images?b.images[0]:void 0));return Object(o.h)("div",null,Object(o.h)("div",{class:"d-flex mb-0 position-relative w-100"},Object(o.h)("div",{class:"text-center border rounded-circle imageRounded imageRoundedSmall",style:(p?`background-image: url('${p.s3SmallLink}'); background-size: cover;`:"")+" border-width: 3px !important;"},!b.image&&Object(o.h)("span",{class:"font-weight-lighter",style:"font-size: 15px;"},u)),Object(o.h)("div",{class:"col pl-3",style:"line-height: 1.2em;"},Object(o.h)("div",{class:"d-flex bd-highlight"},Object(o.h)("div",{class:"p-0 w-100 bd-highlight"},Object(o.h)("label",{class:"sr-only",for:"inlineFormInput"},Object(o.h)(c.c,{id:"comments.comment"},"Kommentar")),Object(o.h)("div",{class:"border rounded rounded-lg position-relative"},Object(o.h)(c.b,null,Object(o.h)("textarea",{class:"form-control-plaintext px-2",type:"text",placeholder:Object(o.h)(c.c,{id:"comments.write-comment"},"Skriv en kommentar..."),onInput:Object(n.a)(this,"comment.body"),onKeyUp:h.a.resizeTextarea,onFocus:h.a.resizeTextarea,style:"height: 2.3em;",value:a.body,ref:e})),Object(o.h)("div",{class:"position-absolute",style:"top: 8px; right: 10px; font-size: 1.2em;"},Object(o.h)("i",{class:"fas fa-image pointerCursor","data-id":s.id,onClick:this.addImage})))),Object(o.h)("div",{class:"p-0 pl-2 flex-shrink-1 bd-highlight"},Object(o.h)("button",{type:"button",class:`btn btn-${d?"primary":"secondary"} mb-2`,disabled:!d,onClick:this.commentStory},Object(o.h)("i",{class:"fas fa-paper-plane"})))))),l&&Object(o.h)(t,null,Object(o.h)("div",{class:"col-12 text-center"},Object(o.h)("div",{class:"container-fluid"},Object(o.h)("div",{class:"row"},i.a.isArray(a.images)&&a.images.map(t=>Object(o.h)("div",{class:"col-3 p-1"},Object(o.h)("img",{src:t.s3SmallLink,class:"img-fluid",onError:this.handleImageErrored}),Object(o.h)("button",{class:"btn btn-sm btn-link",onClick:this.removeImage,"data-name":t.name},Object(o.h)("i",{class:"fas fa-trash"})," ",Object(o.h)(c.c,{id:"comments.remove-image"},"Remove")))))),Object(o.h)(r.a,{object:a,updateField:this.addImages,before:this.beforeImagesUploaded,after:this.afterImagesUploaded,autoOpen:!0}))))}})||a;e.a=d}).call(this,s("hosL").Fragment)},"5uob":function(t,e,s){"use strict";var a,o=s("hosL"),i=(s("Utv1"),s("/eY4")),l=s("OhSV"),c=s("go65"),n=(s("ETxl"),s("ZOvn"));let r=Object(i.a)(a=class extends o.Component{constructor(t){var e;super(t),e=this,this.commentStory=async function(){const{sendButtonEnabled:t}=e.state;if(!t)return!1;const{callback:s=(()=>{}),commentId:a,inputRefObject:o={}}=e.props,{story:i}=e.props,{storyStore:l}=e.props.stores,{comment:c=""}=e.state;e.setState({sendButtonEnabled:!1});const r=await l.commentReplyStory({id:i.id,commentId:a,comment:c});r&&200===r.status&&(e.setState({comment:""},()=>{n.a.resizeTextarea(o[a])}),s({story:i,response:r,commentId:a})),e.setState({sendButtonEnabled:!0})},this.state={sendButtonEnabled:!0},this.inputRef={}}componentDidMount(){const{initCall:t=(()=>{})}=this.props;t()}render(){const{inputRef:t}=this.props,{comment:e,sendButtonEnabled:s}=this.state,{userStore:a}=this.props.stores,{user:i={}}=a,r=n.a.displayNameShort(i),h=(n.a.displayName(i),i.image||(i.images?i.images[0]:void 0));return Object(o.h)("div",{class:"w-100"},Object(o.h)("div",{class:"d-flex mb-0 position-relative w-100"},Object(o.h)("div",{class:"text-center border rounded-circle imageRounded imageRoundedThumb",style:(h?`background-image: url('${h.s3SmallLink}'); background-size: cover;`:"")+" border-width: 3px !important;"},!h&&Object(o.h)("span",{class:"font-weight-lighter",style:"font-size: 15px;"},r)),Object(o.h)("div",{class:"col pl-3",style:"line-height: 1.2em;"},Object(o.h)("div",{class:"d-flex bd-highlight"},Object(o.h)("div",{class:"p-0 w-100 bd-highlight"},Object(o.h)("label",{class:"sr-only",for:"inlineFormInput"},Object(o.h)(l.c,{id:"comments.comment"},"Kommentar")),Object(o.h)("div",{class:"border rounded rounded-lg position-relative"},Object(o.h)(l.b,null,Object(o.h)("textarea",{class:"form-control-plaintext px-2",type:"text",placeholder:Object(o.h)(l.c,{id:"comments.write-comment"},"Skriv en kommentar..."),onInput:Object(c.a)(this,"comment"),onKeyUp:n.a.resizeTextarea,style:"height: 2.3em;",value:e,ref:t})))),Object(o.h)("div",{class:"p-0 pl-2 flex-shrink-1 bd-highlight"},Object(o.h)("button",{type:"button",class:`btn btn-${s?"primary":"secondary"} mb-2`,disabled:!s,onClick:this.commentStory},Object(o.h)("i",{class:"fas fa-paper-plane"})))))))}})||a;e.a=r},B95u:function(t,e,s){"use strict";(function(t){function a(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,a)}return s}function o(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?a(Object(s),!0).forEach((function(e){i(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):a(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}function i(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}var l,c=s("hosL"),n=s("Utv1"),r=s("/eY4"),h=s("cneo"),d=s("OhSV"),m=s("fh8t"),b=s.n(m),u=s("go65"),p=s("5uob"),g=(s("ETxl"),s("ZOvn"));const O={showAddComment:{},showAllComments:!1,showAllReplies:{},viewImageIdx:{},likeComment:{},likeReply:{},showOriginal:{}};let j=Object(r.a)(l=class extends c.Component{constructor(t){var e;super(t),e=this,this.addLikeComment=async function(t){const{callback:s=(()=>{})}=e.props,a=t.target.closest(".commentContainer").dataset.id,{story:o}=e.props,{storyStore:i}=e.props.stores,{likeComment:l}=e.state;l[a]=!0,e.setState({likeComment:l}),setTimeout(()=>{const{likeComment:t}=e.state;delete t[a],e.setState({likeComment:t})},1200);const c=await i.likeStoryComment({id:o.id,commentId:a});return c&&200===c.status&&s({type:"likeComment",story:o,commentId:a,response:c}),!0},this.likeReply=async function(t){const{callback:s=(()=>{})}=e.props,a=t.target.closest(".replyContainer").dataset.id,o=t.target.closest(".replyContainer").dataset.comment,{story:i}=e.props,{storyStore:l}=e.props.stores,{likeReply:c}=e.state;c[a]=!0,e.setState({likeReply:c}),setTimeout(()=>{const{likeReply:t}=e.state;delete t[a],e.setState({likeReply:t})},1200);const n=await l.likeStoryCommentReply({id:i.id,replyId:a,commentId:o});n&&200===n.status&&s({type:"likeReply",story:i,commentId:o,replyId:a,response:n})},this.replyComment=async function(t){const s=t.target.parentElement.dataset.id||t.target.dataset.id,{showAddComment:a}=e.state;a[s]=!a[s],e.setState({showAddComment:a},()=>{e.inputRef[s]&&e.inputRef[s].focus()})},this.toggleComments=()=>{const{showAllComments:t}=this.state;this.setState({showAllComments:!t})},this.toggleReplies=t=>{const e=t.target.parentElement.dataset.id||t.target.dataset.id,{showAllReplies:s}=this.state;s[e]=!s[e],this.setState({showAllReplies:s})},this.toggleMenu=t=>{const{id:e}=t.target.closest("i").dataset,{showMenu:s={}}=this.state;s[e]=!s[e],this.setState({showDeleteComment:{},showEdit:{},showMenu:s})},this.toggleEdit=t=>{const{id:e,comment:s}=t.target.closest("button").dataset,{showEdit:a={}}=this.state;a[e]=!a[e],this.setState({showDeleteComment:{},showEdit:a,showMenu:{},commentEditText:s})},this.toggleDeleteComment=t=>{const{id:e}=t.target.closest("button").dataset,{showDeleteComment:s={}}=this.state;s[e]=!s[e],this.setState({showDeleteComment:s,showEdit:{},showMenu:{}})},this.deleteComment=async function(t){const{id:s}=t.target.closest("button").dataset,{story:a}=e.props,{storyStore:o}=e.props.stores;await o.deleteCommentStory({id:a.id,commentId:s}),e.setState({commentEditText:"",showDeleteComment:{},showEdit:{},showMenu:{}})},this.deleteCommentReply=async function(t){const{id:s,commentid:a}=t.target.closest("button").dataset,{story:o}=e.props,{storyStore:i}=e.props.stores;await i.deleteCommentReplyStory({id:o.id,commentId:a,replyId:s}),e.setState({commentEditText:"",showDeleteComment:{},showEdit:{},showMenu:{}})},this.saveComment=async function(t){const{id:s}=t.target.closest("button").dataset,{commentEditText:a}=e.state,{story:o}=e.props,{storyStore:i}=e.props.stores;await i.editCommentStory({id:o.id,commentId:s,comment:a}),e.setState({commentEditText:"",showDeleteComment:{},showEdit:{},showMenu:{}})},this.saveCommentReply=async function(t){const{id:s,commentid:a}=t.target.closest("button").dataset,{commentEditText:o}=e.state,{story:i}=e.props,{storyStore:l}=e.props.stores;await l.editCommentReplyStory({id:i.id,commentId:a,replyId:s,comment:o}),e.setState({commentEditText:"",showDeleteComment:{},showEdit:{},showMenu:{}})},this.viewImage=t=>{const{id:e,idx:s}=t.target.closest("img").dataset,{viewImageIdx:a}=this.state;a[e]=s,this.setState({viewImageIdx:a})},this.translate=async function(t){t.preventDefault(),t.stopPropagation();const{replyid:s,commentid:a}=t.target.closest("button").dataset,{story:o}=e.props,{userStore:i,storyStore:l}=e.props.stores,{user:c}=i,{showOriginal:n={},translatedText:r={}}=e.state,h=`${a}${s?"-"+s:""}`;n[h]=0,r[h]=s?await l.translateCommentReply({commentid:a,replyid:s,story:o,user:c}):await l.translateComment({commentid:a,story:o,user:c}),e.setState({showOriginal:n,translatedText:r})},this.showOriginal=t=>{const{replyid:e,commentid:s}=t.target.closest("button").dataset;t.preventDefault(),t.stopPropagation();const{showOriginal:a={}}=this.state;a[`${s}${e?"-"+e:""}`]=1,this.setState({showOriginal:a})},this.state=o(o({},O),{},{showAllComments:t.showAllComments}),this.inputRef={}}render(){const{showAddComment:e,showAllComments:s,showAllReplies:a,viewImageIdx:o,showMenu:i={},showEdit:l={},showDeleteComment:r={},commentEditText:m,likeComment:O,showOriginal:j={},translatedText:f={}}=this.state,{story:y,callback:v=(()=>{}),initCall:w=(()=>{}),compact:k=!1}=this.props,{userStore:x,storyStore:S}=this.props.stores,{user:C}=x,{language:I="en"}=C;let D,T=[],R=0,L=0;return y.comments&&(R=y.comments.length,s?T=y.comments:(D=k?0:2,T=y.comments.slice(Math.max(R-D,0))),L=T.length),Object(c.h)("div",null,y&&n.a.isArray(T)&&T.reverse().map(s=>{const{user:k={}}=s,x=S.findPublicTeamByMembers(k.id),T=g.a.displayNameShort(k),R=g.a.displayName(k),L=k.image||(k.images?k.images[0]:void 0),A=s.likes&&s.likes.findIndex(t=>t.user===C.id)>-1;let P=[],E=0,U=0;s.comments&&(E=s.comments.length,P=a[s.id]?s.comments:s.comments.slice(0,D),U=P.length);const z=[];if(s.images){const t=Object(h.i)(s.images);z.push(...t)}const F=o[s.id]?o[s.id]:0,N=z&&z[F]?z[F]:null,{currentLocationGeocode:M={}}=s,$=S.getCommentTranslations({story:y,commentid:s.id,targetLang:I})||f[s.id];let B=$||s.comment;return j[s.id]&&(B=s.comment),Object(c.h)("div",{class:"row"},Object(c.h)("div",{class:"col-11 offset-1 d-flex mb-2 position-relative"},Object(c.h)("div",{class:"text-center border rounded-circle imageRounded imageRoundedSmall",style:(L?`background-image: url("${L.s3SmallLink}"); background-size: cover;`:"")+" border-width: 3px !important;"},!k.image&&Object(c.h)("span",{class:"font-weight-lighter",style:"font-size: 15px;"},T)),Object(c.h)("div",{class:"flex-grow-1 pl-3 pt-0",style:"line-height: 1.2em;"},Object(c.h)("div",{class:"bg-light p-2 rounded rounded-lg position-relative"},C.id===k.id&&Object(c.h)(t,null,Object(c.h)("span",{class:"float-right font-weight-lighter text-muted"},Object(c.h)("i",{class:"fas fa-ellipsis-h",onClick:this.toggleMenu,"data-id":s.id}))),i[s.id]&&Object(c.h)(t,null,Object(c.h)("div",{class:"position-absolute bg-white p-2 border rounded rounded-lg shadow-sm",style:"top: 30px; right: 10px; width: 60%; z-index: 999999;"},Object(c.h)("button",{class:"btn btn-link btn-block text-left",onClick:this.toggleEdit,"data-id":s.id,"data-comment":s.comment},Object(c.h)("i",{class:"fas fa-edit"})," Edit"),Object(c.h)("hr",null),Object(c.h)("button",{class:"btn btn-link btn-block text-left",onClick:this.toggleDeleteComment,"data-id":s.id},Object(c.h)("i",{class:"fas fa-trash-alt"})," Delete"))),Object(c.h)("div",null,Object(c.h)("span",{style:"font-size: 0.95em;"},Object(c.h)("h5",{class:"font-weight-bold mb-2",style:"font-size: 1.0em;"},k.uuidv4&&k.uuidv4!==C.uuidv4?Object(c.h)(t,null,Object(c.h)("a",{href:"/inbox/"+k.uuidv4},R)):Object(c.h)(t,null,R),x&&x.length>0&&Object(c.h)(t,null,Object(c.h)("span",{class:"font-weight-lighter text-muted ml-1"},x.filter(t=>1===t.public).slice(0,1).map(e=>Object(c.h)(t,null,"- ",Object(c.h)("a",{href:"/teams/public/"+e.uuidv4},e.name)))))),l[s.id]?Object(c.h)(t,null,Object(c.h)("div",{class:"d-flex bd-highlight"},Object(c.h)("div",{class:"p-0 w-100 bd-highlight"},Object(c.h)("label",{class:"sr-only",for:"inlineFormInput"},Object(c.h)(d.c,{id:"comments.comment"},"Kommentar")),Object(c.h)("div",{class:"border rounded rounded-lg position-relative"},Object(c.h)(d.b,null,Object(c.h)("textarea",{class:"form-control-plaintext px-2",type:"text",placeholder:Object(c.h)(d.c,{id:"comments.write-comment"},"Skriv en kommentar..."),onInput:Object(u.a)(this,"commentEditText"),onKeyUp:g.a.resizeTextarea,onFocus:g.a.resizeTextarea,style:"height: 2.3em;",value:m})))),Object(c.h)("div",{class:"p-0 pl-2 flex-shrink-1 bd-highlight"},Object(c.h)("button",{type:"button",class:"btn btn-primary mb-2",onClick:this.saveComment,"data-id":s.id},Object(c.h)("i",{class:"fas fa-paper-plane"}))))):Object(c.h)(t,null,Object(c.h)(b.a,{markdown:g.a.replaceImages(B,s.images,I),markdownOpts:g.a.getMarkdownOptions()})),r[s.id]&&Object(c.h)("div",{class:"clearfix mt-3 mb-3"},Object(c.h)("button",{class:"btn btn-danger float-left",onClick:this.deleteComment,"data-id":s.id},Object(c.h)("i",{class:"fas fa-trash-alt"})," Delete"),Object(c.h)("button",{class:"btn btn-secondary float-right",onClick:this.toggleDeleteComment,"data-id":s.id},Object(c.h)("i",{class:"fas fa-times-circle"})," Cancel")))),Object(c.h)("div",null,Object(c.h)("div",{class:"container-fluid px-3 mt-1"},N&&Object(c.h)("div",{class:"clearfix row position-relative"},Object(c.h)("div",{class:"commentContainer col-12 px-0 overflow-hidden",style:"max-height: 60vh;",onDblclick:this.addLikeComment,"data-id":s.id},Object(c.h)("img",{loading:"lazy",class:"img-fluid",style:"min-width: 100px;",src:N.s3LargeLink})),O[s.id]&&Object(c.h)("span",{class:"likeHeart position-absolute text-white display-1",style:"top: calc(50% - 50px); left: calc(50% - 50px); width: 100px; height: 100px;"},Object(c.h)("i",{class:"fas fa-heart likeStory"}))),z&&z.length>1&&Object(c.h)("div",{class:"clearfix d-flex flex-wrap row"},n.a.isArray(z)&&z.map((e,a)=>Object(c.h)(t,null,Object(c.h)("div",{class:"col px-0 overflow-hidden",style:"max-height: 100px; min-width: 100px;"},Object(c.h)("img",{loading:"lazy",class:"img-fluid border",style:"min-width: 100px;",src:e.s3SmallLink,onClick:this.viewImage,"data-id":s.id,"data-idx":a})))))))),Object(c.h)("small",null,Object(c.h)("button",{class:"commentContainer btn btn-sm btn-link py-0 "+(A?"text-primary":""),onClick:this.addLikeComment,"data-id":s.id,disabled:A},A?Object(c.h)(d.c,{id:"comments.has-liked"},"Liked"):Object(c.h)(d.c,{id:"comments.like"},"Lik")),"-",Object(c.h)("button",{class:"btn btn-sm btn-link py-0",onClick:this.replyComment,"data-id":s.id},Object(c.h)(d.c,{id:"comments.comment-add"},"Kommentar")),s.language!==I&&Object(c.h)(t,null,"-",!j[s.id]&&$?Object(c.h)(t,null,Object(c.h)("button",{type:"button",class:"btn btn-sm btn-link","data-commentid":s.id,onClick:this.showOriginal},Object(c.h)("i",{class:"fas fa-cog"}),"  ",Object(c.h)(d.c,{id:"home.translate-show-original"},"Show original"))):Object(c.h)(t,null,Object(c.h)("button",{type:"button",class:"btn btn-sm btn-link",onClick:this.translate,"data-commentid":s.id},Object(c.h)("i",{class:"fas fa-cog"})," ",Object(c.h)(d.c,{id:"home.translate-to"},"See translation")))),"-",Object(c.h)("button",{class:"btn btn-sm btn-link py-0 disabled"},n.a.formatDistance(s.createdDate,new Date,{locale:"no-NB"}),s.updatedDate&&Object(c.h)(t,null,Object(c.h)("span",{class:"font-weight-light ml-2"},"(Edited ",n.a.formatDistance(s.updatedDate,new Date,{locale:"no-NB"}),")"))))),s.likes&&s.likes.length>0&&Object(c.h)("small",{class:"position-absolute bg-light shadow-sm rounded-lg py-0 px-1",style:"bottom: 20px; right: 15px;"},Object(c.h)("i",{class:"fas fa-thumbs-up text-primary"})," ",s.likes.length)),Object(c.h)("div",{class:"col-10 offset-2 mb-2"},s&&n.a.isArray(P)&&P.map(e=>{const{user:a={}}=e,o=S.findPublicTeamByMembers(a.id),h=g.a.displayNameShort(a),p=g.a.displayName(a),O=a.image||(a.images?a.images[0]:void 0),v=e.likes&&e.likes.findIndex(t=>t.user===C.id)>-1,{currentLocationGeocode:w={}}=e,k=S.getCommentReplyTranslations({story:y,commentid:s.id,replyid:e.id,targetLang:I})||f[`${s.id}-${e.id}`];let x=k||e.comment;return j[`${s.id}-${e.id}`]&&(x=e.comment),Object(c.h)("div",{class:"row"},Object(c.h)("div",{class:"col-12 d-flex mb-2 position-relative"},Object(c.h)("div",{class:"text-center border rounded-circle imageRounded imageRoundedSmall",style:(O?`background-image: url("${O.s3SmallLink}"); background-size: cover;`:"")+" border-width: 3px !important;"},!a.image&&Object(c.h)("span",{class:"font-weight-lighter",style:"font-size: 15px;"},h)),Object(c.h)("div",{class:"flex-grow-1 pl-3 pt-0",style:"line-height: 1.2em;"},Object(c.h)("div",{class:"bg-light p-2 rounded-lg position-relative"},C.id===a.id&&Object(c.h)(t,null,Object(c.h)("span",{class:"float-right font-weight-lighter text-muted"},Object(c.h)("i",{class:"fas fa-ellipsis-h",onClick:this.toggleMenu,"data-id":e.id}))),i[e.id]&&Object(c.h)(t,null,Object(c.h)("div",{class:"position-absolute bg-white p-2 border rounded rounded-lg shadow-sm",style:"top: 30px; right: 10px; width: 60%; z-index: 999999;"},Object(c.h)("button",{class:"btn btn-link btn-block text-left",onClick:this.toggleEdit,"data-id":e.id,"data-comment":e.comment},Object(c.h)("i",{class:"fas fa-edit"})," Edit"),Object(c.h)("hr",null),Object(c.h)("button",{class:"btn btn-link btn-block text-left",onClick:this.toggleDeleteComment,"data-id":e.id},Object(c.h)("i",{class:"fas fa-trash-alt"})," Delete"))),Object(c.h)("span",{style:"font-size: 0.95em;"},Object(c.h)("h5",{class:"font-weight-bold mb-2",style:"font-size: 1.0em;"},p,o&&o.length>0&&Object(c.h)(t,null,Object(c.h)("span",{class:"font-weight-lighter text-muted ml-2"},o.filter(t=>1===t.public).slice(0,1).map(e=>Object(c.h)(t,null,"- ",Object(c.h)("a",{href:"/teams/public/"+e.uuidv4,class:"mr-2"}," ",e.name)))))),l[e.id]?Object(c.h)(t,null,Object(c.h)("div",{class:"d-flex bd-highlight"},Object(c.h)("div",{class:"p-0 w-100 bd-highlight"},Object(c.h)("label",{class:"sr-only",for:"inlineFormInput"},Object(c.h)(d.c,{id:"comments.comment"},"Kommentar")),Object(c.h)("div",{class:"border rounded rounded-lg position-relative"},Object(c.h)(d.b,null,Object(c.h)("textarea",{class:"form-control-plaintext px-2",type:"text",placeholder:Object(c.h)(d.c,{id:"comments.write-comment"},"Skriv en kommentar..."),onInput:Object(u.a)(this,"commentEditText"),onKeyUp:g.a.resizeTextarea,onFocus:g.a.resizeTextarea,style:"height: 2.3em;",value:m})))),Object(c.h)("div",{class:"p-0 pl-2 flex-shrink-1 bd-highlight"},Object(c.h)("button",{type:"button",class:"btn btn-primary mb-2",onClick:this.saveCommentReply,"data-commentid":s.id,"data-id":e.id},Object(c.h)("i",{class:"fas fa-paper-plane"}))))):Object(c.h)(t,null,Object(c.h)(b.a,{markdown:g.a.replaceImages(x,e.images,I),markdownOpts:g.a.getMarkdownOptions()})),r[e.id]&&Object(c.h)("div",{class:"clearfix mt-3 mb-3"},Object(c.h)("button",{class:"btn btn-danger float-left",onClick:this.deleteCommentReply,"data-id":e.id,"data-commentid":s.id},Object(c.h)("i",{class:"fas fa-trash-alt"})," Delete"),Object(c.h)("button",{class:"btn btn-secondary float-right",onClick:this.toggleDeleteComment,"data-id":e.id},Object(c.h)("i",{class:"fas fa-times-circle"})," Cancel")))),Object(c.h)("small",null,Object(c.h)("button",{class:"replyContainer btn btn-sm btn-link py-0 "+(v?"text-primary":""),onClick:this.likeReply,"data-comment":s.id,"data-id":e.id,disabled:v},v?Object(c.h)(d.c,{id:"comments.has-liked"},"Liked"):Object(c.h)(d.c,{id:"comments.like"},"Lik")),"-",Object(c.h)("button",{class:"btn btn-sm btn-link py-0",onClick:this.replyComment,"data-id":s.id},Object(c.h)(d.c,{id:"comments.comment-add"},"Kommentar")),e.language!==I&&Object(c.h)(t,null,"-",!j[`${s.id}-${e.id}`]&&k?Object(c.h)(t,null,Object(c.h)("button",{type:"button",class:"btn btn-sm btn-link","data-commentid":s.id,"data-replyid":e.id,onClick:this.showOriginal},Object(c.h)("i",{class:"fas fa-cog"}),"  ",Object(c.h)(d.c,{id:"home.translate-show-original"},"Show original"))):Object(c.h)(t,null,Object(c.h)("button",{type:"button",class:"btn btn-sm btn-link",onClick:this.translate,"data-commentid":s.id,"data-replyid":e.id},Object(c.h)("i",{class:"fas fa-cog"})," ",Object(c.h)(d.c,{id:"home.translate-to"},"See translation")))),"-",Object(c.h)("button",{class:"btn btn-sm btn-link py-0 disabled"},n.a.formatDistance(e.createdDate,new Date,{locale:"no-NB"}),e.updatedDate&&Object(c.h)(t,null,Object(c.h)("span",{class:"font-weight-light ml-2"},"(Edited ",n.a.formatDistance(e.updatedDate,new Date,{locale:"no-NB"}),")"))))),e.likes&&Object(c.h)("small",{class:"position-absolute bg-light shadow-sm rounded-lg py-0 px-1",style:"bottom: 20px; right: 15px;"},Object(c.h)("i",{class:"fas fa-thumbs-up text-primary"})," ",e.likes.length)))}),E-U>0&&Object(c.h)("div",null,Object(c.h)("button",{class:"btn btn-sm btn-link py-0",onClick:this.toggleReplies,"data-id":s.id},Object(c.h)(d.c,{id:"comments.show-more",fields:{more:E-U}},"Vis ",E-U," flere kommentarer...")))),e[s.id]&&Object(c.h)("div",{class:"col-11 offset-1 d-flex mb-2 position-relative"},Object(c.h)(p.a,{stores:this.props.stores,story:y,initCall:w,callback:v,commentId:s.id,inputRef:t=>this.inputRef[s.id]=t,inputRefObject:this.inputRef,key:"story-commentreply-"+s.id})))}),R-L>0&&Object(c.h)("div",null,Object(c.h)("button",{class:"btn btn-sm btn-link py-0",onClick:this.toggleComments},Object(c.h)(d.c,{id:"comments.show-more",fields:{more:R-L}},"Vis ",R-L," flere kommentarer..."))),s&&Object(c.h)("div",null,Object(c.h)("button",{class:"btn btn-sm btn-link py-0",onClick:this.toggleComments},Object(c.h)(d.c,{id:"comments.hide-all-comments"},"Skjul alle kommentarene."))))}})||l;e.a=j}).call(this,s("hosL").Fragment)},"Gx/q":function(t,e,s){"use strict";(function(t){var a,o=s("hosL"),i=s("Utv1"),l=s("/eY4"),c=(s("OhSV"),s("nHdA")),n=s("irB3"),r=(s("UwwE"),s("8Lgr")),h=(s("QkTp"),s("ZOvn"));let d=Object(l.a)(a=class extends o.Component{constructor(t){var e;super(t),e=this,this.removeUser=async function(t){let s=t.target.dataset.id,a=t.target.dataset.email,o=t.target.dataset.team;!s&&t.target.parentNode&&(s=t.target.parentNode.dataset.id,a=t.target.parentNode.dataset.email,o=t.target.parentNode.dataset.team),console.log("id, email, team",s,a,o);const{teamStore:i}=e.props.stores;await i.removeMember(o,{id:s,email:a})},this.adminUpdateUser=t=>{const{email:e}=t.target.closest("input").dataset,{name:s}=t.target,a=`${e}-${s}`;clearTimeout(this.updateTimer[a]),this.updateTimer[a]=setTimeout(()=>{this.doAdminUpdateUser(t)},500)},this.doAdminUpdateUser=async function(t){const{email:s}=t.target.closest("input").dataset,{name:a,value:o}=t.target,{userStore:i}=e.props.stores;await i.adminUpdateUser(s,{[a]:o})},this.simulateUser=t=>{const{email:e}=t.target.closest("button").dataset,{userStore:s}=this.props.stores;s.getSimulateUser(e)},this.state={},this.updateTimer={}}render(){const{user:e,team:s={}}=this.props,{userStore:a,teamStore:l}=this.props.stores,{user:d,isAdmin:m}=a,b=a.findTeams(e.teams),u=l.findMusherSummary(e.id,s.id)||{},p=s.user===d.id,g=h.a.getImage({user:e,team:s}),O=h.a.displayName(e);return Object(o.h)("div",{class:"w-100 mb-3"},Object(o.h)("div",{class:"row"},Object(o.h)("div",{class:"col-12 d-flex mb-0 position-relative"},Object(o.h)("div",{class:"text-center border rounded-circle imageRounded",style:g?`background-image: url('${g}'); background-size: cover;`:""},!g&&Object(o.h)("i",{class:"fas fa-user text-muted mt-3",style:"font-size: 40px;"})),Object(o.h)("div",{class:"flex-grow-1 pl-3 pr-2"},Object(o.h)("h5",null,O),Object(o.h)("div",null,Object(o.h)("small",{class:"text-muted"},Object(o.h)("div",{class:"d-flex justify-content-left"},e.cellphone&&Object(o.h)("div",{class:"mr-2"},Object(o.h)("i",{class:"fas fa-mobile-alt"})," ",e.cellphone),e.email&&Object(o.h)("div",{class:"mr-2"},Object(o.h)("i",{class:"fas fa-envelope ml-3"})," ",e.email),e.url&&Object(o.h)("div",{class:"mr-2"},Object(o.h)("a",{href:h.a.asUrl(e.url),target:"_blank",rel:"noreferrer"},Object(o.h)("i",{class:"fas fa-link"}))),e.facebook&&Object(o.h)("div",{class:"mr-2"},Object(o.h)("a",{href:h.a.asFacebookLink(e.facebook),target:"_blank",rel:"noreferrer"},Object(o.h)("i",{class:"fab fa-facebook"}))),e.instagram&&Object(o.h)("div",{class:"mr-2"},Object(o.h)("a",{href:h.a.asInstagramLink(e.instagram),target:"_blank",rel:"noreferrer"},Object(o.h)("i",{class:"fab fa-instagram"}))),e.snapchat&&Object(o.h)("div",{class:"mr-2"},Object(o.h)("a",{href:h.a.asSnapchatLink(e.snapchat),target:"_blank",rel:"noreferrer"},Object(o.h)("i",{class:"fab fa-snapchat"})))))),m&&Object(o.h)(t,null,Object(o.h)("button",{class:"btn btn-block btn-success",onClick:this.simulateUser,"data-email":e.email},"Simulate user"),Object(o.h)("small",null,Object(o.h)("details",null,Object(o.h)("summary",null,"settings"),Object(o.h)("xmp",null,JSON.stringify(e.settings,null,4))),Object(o.h)("details",null,Object(o.h)("summary",null,"subscription"),Object(o.h)("xmp",null,JSON.stringify(e.subscription,null,4))),Object(o.h)("details",null,Object(o.h)("summary",null,"deviceInfo"),Object(o.h)("xmp",null,JSON.stringify(e.deviceInfo,null,4))),Object(o.h)("details",null,Object(o.h)("summary",null,"subscription"),Object(o.h)("xmp",null,JSON.stringify(e.subscription,null,4))),Object(o.h)("details",null,Object(o.h)("summary",null,"notifications"),Object(o.h)("xmp",null,JSON.stringify(e.notifications,null,4))),Object(o.h)("details",null,Object(o.h)("summary",null,"notificationTopics"),Object(o.h)("xmp",null,JSON.stringify(e.notificationTopics,null,4))),Object(o.h)("details",null,Object(o.h)("summary",null,"applications"),Object(o.h)("xmp",null,JSON.stringify(e.applications,null,4))),Object(o.h)("details",null,Object(o.h)("summary",null,"shadowTags"),Object(o.h)("xmp",null,JSON.stringify(e.shadowTags,null,4))),Object(o.h)("details",null,Object(o.h)("summary",null,"garmin"),Object(o.h)("xmp",null,JSON.stringify(e.garmin,null,4))),Object(o.h)("details",null,Object(o.h)("summary",null,"strava"),Object(o.h)("xmp",null,JSON.stringify(e.strava,null,4))),Object(o.h)("details",null,Object(o.h)("summary",null,"currentLocationGeocode"),Object(o.h)("xmp",null,JSON.stringify(e.currentLocationGeocode,null,4))),"lastActivityEpoch: ",i.a.isoDate(e.lastActivityEpoch),Object(o.h)("br",null),"activities: ",i.a.format(e.activities),Object(o.h)("br",null),e.settings&&Object(o.h)("div",{class:"form-check"},Object(o.h)("input",{class:"form-check-input",type:"checkbox",value:e.settings.veterinaryAllowed?0:1,id:"settings.veterinaryAllowed-"+e.id,name:"settings.veterinaryAllowed",checked:e.settings.veterinaryAllowed?"checked":"","data-email":e.email,onInput:this.adminUpdateUser}),Object(o.h)("label",{class:"form-check-label",for:"settings.veterinaryAllowed-"+e.id},"settings.veterinaryAllowed")),Object(o.h)("div",{class:"form-check"},Object(o.h)("input",{class:"form-check-input",type:"checkbox",value:e.twoFactorLogin?0:1,id:"twoFactorLogin-"+e.id,name:"twoFactorLogin",checked:e.twoFactorLogin?"checked":"","data-email":e.email,onInput:this.adminUpdateUser}),Object(o.h)("label",{class:"form-check-label",for:"twoFactorLogin-"+e.id},"twoFactorLogin")),Object(o.h)("div",{class:"form-check"},Object(o.h)("input",{class:"form-check-input",type:"checkbox",value:e.isVeterinary?0:1,id:"isVeterinary-"+e.id,name:"isVeterinary",checked:e.isVeterinary?"checked":"","data-email":e.email,onInput:this.adminUpdateUser}),Object(o.h)("label",{class:"form-check-label",for:"isVeterinary-"+e.id},"isVeterinary")),Object(o.h)("div",{class:"form-group row"},Object(o.h)("label",{class:"col-sm-2 col-form-label",for:"cellphone-"+e.id},"cellphone"),Object(o.h)("div",{class:"col-sm-10"},Object(o.h)("input",{type:"text",id:"cellphone-"+e.id,name:"cellphone",class:"form-control",value:e.cellphone,"data-email":e.email,onInput:this.adminUpdateUser}))),Object(o.h)("div",{class:"form-group row"},Object(o.h)("label",{class:"col-sm-2 col-form-label",for:"firstname-"+e.id},"firstname"),Object(o.h)("div",{class:"col-sm-10"},Object(o.h)("input",{type:"text",id:"firstname-"+e.id,name:"firstname",class:"form-control",value:e.firstname,"data-email":e.email,onInput:this.adminUpdateUser}))),Object(o.h)("div",{class:"form-group row"},Object(o.h)("label",{class:"col-sm-2 col-form-label",for:"lastname-"+e.id},"lastname"),Object(o.h)("div",{class:"col-sm-10"},Object(o.h)("input",{type:"text",id:"lastname-"+e.id,name:"lastname",class:"form-control",value:e.lastname,"data-email":e.email,onInput:this.adminUpdateUser}))))),e.teams&&Object(o.h)(t,null,b.map(t=>Object(o.h)("span",{class:"badge badge-pill badge-info mr-2"},t.name)),Object(o.h)("br",null)),s.id&&u&&Object(o.h)(t,null,Object(o.h)("small",{class:"text-muted"},"Total:",u&&Object(o.h)("span",{class:"ml-2"},Object(o.h)("i",{class:"fas fa-road"})," ",Object(o.h)(r.a,{stores:this.props.stores,value:u.distanceKm})),u&&Object(o.h)("span",{class:"ml-2"},Object(o.h)("i",{class:"fas fa-mountain"})," ",Object(o.h)(n.a,{stores:this.props.stores,value:u.elevation})),u&&Object(o.h)("span",{class:"ml-2"},Object(o.h)("i",{class:"fas fa-clock"})," ",i.a.secToHms(u.duration||0))),Object(o.h)("br",null),Object(o.h)("small",{class:"text-muted"},"Avg:",u&&Object(o.h)("span",{class:"ml-2"},Object(o.h)("i",{class:"fas fa-road"})," ",Object(o.h)(r.a,{stores:this.props.stores,value:u.avgDistance})),u&&Object(o.h)("span",{class:"ml-2"},Object(o.h)("i",{class:"fas fa-mountain"})," ",Object(o.h)(n.a,{stores:this.props.stores,value:u.avgElevation})),u&&Object(o.h)("span",{class:"ml-2"},Object(o.h)("i",{class:"fas fa-clock"})," ",i.a.secToHms(u.avgDuration||0)),u&&Object(o.h)("span",{class:"ml-2"},Object(o.h)("i",{class:"fas fa-tachometer-alt"})," ",Object(o.h)(c.a,{stores:this.props.stores,value:u.speedAvg})),u&&Object(o.h)("span",{class:"ml-2"},Object(o.h)("i",{class:"fas fa-dog"})," ",i.a.format(u.avgDogs,1))))),Object(o.h)("div",null,p&&e.id!==d.id&&Object(o.h)("button",{class:"btn btn-sm btn-danger",onClick:this.removeUser,"data-email":e.email,"data-id":e.id,"data-team":s.id},Object(o.h)("i",{class:"fas fa-ban"})),!p&&e.id===d.id&&Object(o.h)("button",{class:"btn btn-sm btn-secondary",onClick:this.removeUser,"data-email":e.email,"data-id":e.id,"data-team":s.id},Object(o.h)("i",{class:"fas fa-sign-out-alt"}),s.id)))))}})||a;e.a=d}).call(this,s("hosL").Fragment)},ISGx:function(t,e,s){"use strict";(function(t){function a(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,a)}return s}function o(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?a(Object(s),!0).forEach((function(e){i(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):a(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}function i(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}var l,c=s("hosL"),n=s("Utv1"),r=s("/eY4"),h=s("cneo"),d=s("OhSV"),m=s("fh8t"),b=s.n(m),u=s("Y3FI"),p=s("s4FZ"),g=s("ZQlJ"),O=s("sqi2"),j=s("/922"),f=s("eQ6k"),y=s("+JSK"),v=s("vY+r"),w=s("nHdA"),k=s("irB3"),x=s("UwwE"),S=s("8Lgr"),C=s("QkTp"),I=s("ZOvn");const D={showAddComment:{},likeWorkout:{},idxSuggestion:0,idxAd:4,limit:15,offset:0,hasFollowSugguestions:!1,hasAd:!1,sessionid:(new Date).getTime()};let T=Object(r.a)(l=class extends c.Component{constructor(t){var e;super(t),e=this,this.toggleDate=t=>{t.stopPropagation(),t.preventDefault();const{showDate:e}=this.state;this.setState({showDate:!e})},this.likeWorkout=async function(t){const s=parseInt(t.target.closest(".imageContainer").dataset.id,10),{workoutStore:a}=e.props.stores,{likeWorkout:o}=e.state;o[s]=!0,e.setState({likeWorkout:o}),setTimeout(()=>{const{likeWorkout:t}=e.state;delete t[s],e.setState({likeWorkout:t})},1200);const i=await a.likeWorkout({id:s});i&&200===i.status&&e.addLikeToFeed(s,i.data)},this.addCommentToFeed=({type:t,workout:e,response:s,commentId:a,replyId:o})=>{const{holdingStore:i="team"}=this.props;if("team"===i){const{teamStore:i}=this.props.stores;switch(t){case"likeComment":i.addLikeToComment({id:e.id,data:s.data,commentId:a});break;case"likeReply":i.addLikeToCommentReply({id:e.id,data:s.data,commentId:a,replyId:o});break;default:a?i.addCommentToWorkoutComment({id:e.id,data:s.data,commentId:a}):i.addCommentToWorkout({id:e.id,data:s.data})}}else if("story"===i){const{storyStore:i}=this.props.stores;switch(t){case"likeComment":i.workoutsAddLikeToComment({id:e.id,data:s.data,commentId:a});break;case"likeReply":i.workoutsAddLikeToCommentReply({id:e.id,data:s.data,commentId:a,replyId:o});break;default:a?i.workoutsAddCommentToWorkoutComment({id:e.id,data:s.data,commentId:a}):i.workoutsAddCommentToWorkout({id:e.id,data:s.data})}}},this.addLikeToFeed=(t,e)=>{const{holdingStore:s="team"}=this.props;if("team"===s){const{teamStore:s}=this.props.stores;s.addLikeToWorkout({id:t,data:e})}else if("story"===s){const{storyStore:s}=this.props.stores;s.workoutsAddLikeToWorkout({id:t,data:e})}},this.toggleAddComment=t=>{const e=t.target.closest("button").dataset.id,{showAddComment:s}=this.state;s[e]?delete s[e]:s[e]=!0,this.setState({showAddComment:s},()=>{this.inputRef[e]&&this.inputRef[e].focus()})},this.shareLink=t=>{const{url:e,title:s,text:a}=t.target.closest("button").dataset,{appState:o}=this.props.stores;o.shareUrl({url:e,title:s,text:a})},this.showWorkoutDetail=t=>{if("a"===t.target.localName)return!1;const e=t.target.closest("#workoutDetail");if(e){const{id:t}=e.dataset;t&&(console.log({target:e,id:t}),Object(u.route)("/workouts/public/"+t))}},this.translate=async function(t){t.preventDefault(),t.stopPropagation();const{feed:s={}}=e.props,{userStore:a,teamStore:o}=e.props.stores,{user:i}=a,l=await o.translate({object:s,user:i,field:"name"});let c;s.comment&&(c=await o.translate({object:s,user:i,field:"comment"})),e.setState({showOriginal:0,translatedTextName:l,translatedTextComment:c})},this.showOriginal=t=>{t.preventDefault(),t.stopPropagation(),this.setState({showOriginal:1})},this.state=o({},D),this.inputRef={},this.containerRef=null}render(){const{feed:e,onTeamClick:s=(()=>{}),onUserClick:a=(()=>{}),onDogClick:i=(()=>{}),holdingStore:l="team"}=this.props,{showAddComment:r,showDate:m,likeWorkout:u,showOriginal:D,translatedTextName:T,translatedTextComment:R}=this.state,{teamStore:L,storyStore:A,userStore:P,appState:E}=this.props.stores,{user:U,isAdmin:z}=P,{language:F="en"}=U,{hasShareApi:N}=E,{publicDogs:M}=L;let $={},B={};"team"===l?($=L.findPublicTeam(e.team),B=L.findPublicUser(e.user)||{}):"story"===l&&($=A.findPublicTeam(e.team),B=A.findPublicUser(e.user)||{});P.findTeamAmbition({ambition:$.ambitions,language:F});const W=P.findTeamType({type:$.type,language:F}),K=!(!$||!$.members)&&$.members.some(t=>t===U.id),V=I.a.getImage({user:B,team:$,object:e,priority:"user"}),{likes:q,comments:Y}=e,J=e.likes&&e.likes.findIndex(t=>t.user===U.id)>-1,H=$&&$.followers?$.followers.length:0,Z=$.members&&$.members.indexOf(U.id)>-1,G=$&&$.followers&&$.followers.indexOf(U.id)>-1,_=$.followRequests&&$.followRequests.findIndex(t=>t.id===U.id)>-1,Q=P.findEquipment({equipment:e.equipment,language:F}),X=P.findEquipment({equipment:e.equipment,field:"icon"}),{gpxInfo:tt={}}=e;let et,st,at,ot;B&&(et=I.a.displayNameShort(B),st=I.a.displayName(B),at=I.a.displayName(B),B.settings&&B.uuidv4!==U.uuidv4&&(ot=B.settings.hideProfile?null:"/inbox/"+B.uuidv4));const it=[];if(e.mapImage&&it.push(o(o({},e.mapImage),{},{type:"map"})),e.images){const t=Object(h.i)(e.images);it.push(...t)}const{currentLocationGeocode:lt={},yrWeather:ct=[]}=e,nt=I.a.getViews(e.statistics),rt=I.a.getAdminData(e.statistics);if(!$||!$.name)return"";const ht=I.a.getTranslation({object:e,targetLang:F,field:"name"})||T;let dt=ht||e.name;let mt=I.a.getTranslation({object:e,targetLang:F,field:"comment"})||R||e.comment;return D&&(dt=e.name,mt=e.comment),Object(c.h)(t,null,Object(c.h)("div",{class:"d-flex position-relative"},Object(c.h)("div",{class:"text-center"},Object(c.h)("div",{class:"position-relative text-center border rounded-circle imageRounded imageRoundedMedium",style:V?`background-image: url("${V}"); background-size: cover;`:""},!V&&Object(c.h)("i",{class:"fas fa-users text-muted mt-2",style:"font-size: 20px;"}))),Object(c.h)("div",{class:"flex-grow-1 pl-3 text-overflow",style:"line-height: 1.2em;"},Object(c.h)("span",{class:"badge badge-pill badge-secondary float-right"},W),Object(c.h)("h5",{class:"mb-1 position-relative",style:"line-height: 1.0em;"},$.public?Object(c.h)(t,null,Object(c.h)("a",{href:"/teams/public/"+$.uuidv4,onClick:t=>s(t,$.uuidv4),class:"stretched-link"},$.name)):Object(c.h)(t,null,$.name)),Object(c.h)("div",{class:"mb-2"},e.date&&Object(c.h)("small",{class:"text-muted",onClick:this.toggleDate},m?n.a.formatDate(e.date,{locale:"no-NB",hour12:!1,hour:"2-digit",minute:"2-digit"}):n.a.formatDistance(e.date,new Date,{locale:"no-NB"})),1===e.public?Object(c.h)(t,null,Object(c.h)("small",{class:"ml-2 text-muted"},Object(c.h)("i",{class:"fas fa-globe-europe"}))):Object(c.h)(t,null,Object(c.h)("small",{class:"ml-2 text-muted"},Object(c.h)("i",{class:"fas fa-users"})," (",n.a.format(H),")")),at&&Object(c.h)(t,null,Object(c.h)("small",{class:"ml-2 text-muted"},ot?Object(c.h)(t,null,Object(c.h)("i",{class:"fas fa-user"})," ",Object(c.h)("a",{href:ot},at)):Object(c.h)(t,null,Object(c.h)("i",{class:"fas fa-user"})," ",at))),Object(c.h)("small",{class:"text-muted"},e.equipment>0&&Object(c.h)(t,null,Object(c.h)("i",{class:X+" ml-2"})," ",Q),e.dogs>0&&Object(c.h)(t,null,Object(c.h)("i",{class:"fas fa-dog ml-2"})," ",e.dogs.length),e.track>0&&Object(c.h)(t,null,Object(c.h)("i",{class:`fas fa-map-marked text-${e.track>0?"success":"danger"} ml-2`})),e.sledWeight>0&&Object(c.h)(t,null,Object(c.h)("i",{class:"fas fa-sleigh ml-2"})," ",Object(c.h)(x.a,{stores:this.props.stores,value:e.sledWeight})),0!==e.temperature&&Object(c.h)(t,null,Object(c.h)("i",{class:"fas fa-temperature-low ml-2"})," ",Object(c.h)(C.a,{stores:this.props.stores,value:e.temperature})),e.dogs&&e.dogs.length>0&&Object(c.h)(t,null,Object(c.h)("i",{class:"fas fa-dog ml-2"})," ",n.a.format(e.dogs.length,0)),lt&&lt.formattedCounty&&Object(c.h)(t,null,Object(c.h)("i",{class:"fas fa-map-marker-alt ml-2"})," ",lt.formattedCounty),e.moonIllumination&&e.moonIllumination.phaseIcon&&Object(c.h)("span",{class:"float-right ml-2"},e.moonIllumination.phaseIcon))),z&&Object(c.h)("div",{class:"d-flex flex-row flex-nowrap bg-light border-top border-bottom py-2",style:"overflow: auto;"},Object(c.h)("small",{class:"text-muted mr-2"},"Adm:"),lt&&lt.formatted_address&&Object(c.h)(t,null,Object(c.h)("small",{class:"text-muted"},Object(c.h)("i",{class:"fas fa-map-marker-alt"})," ",lt.formatted_address)),B.deviceInfo&&Object(c.h)(t,null,Object(c.h)("span",{class:"badge badge-secondary ml-1 float-right font-weight-light"},["platform","manufacturer","model"].map(e=>Object(c.h)(t,null,Object(c.h)("span",{class:"ml-1 text-white"},B.deviceInfo[e]))))),rt&&Object(c.h)(t,null,Object(c.h)("small",{class:"ml-2 text-muted"},"V: ",rt.count),Object(c.h)("small",{class:"ml-2 text-muted"},"R: ",rt.ranking," ",n.a.isNumber(rt.rankingTrend)&&Object(c.h)(t,null,Object(c.h)("i",{class:I.a.getClassForTrend(rt.rankingTrend)}))),Object(c.h)("small",{class:"ml-2 text-muted"},"D: ",n.a.format(rt.durationAvg/1e3,1),"s ",n.a.isNumber(rt.durationAvgTrend)&&Object(c.h)(t,null,Object(c.h)("i",{class:I.a.getClassForTrend(rt.durationAvgTrend)}))),e.statisticsCurrent&&e.statisticsCurrent.totalInteractions>0&&Object(c.h)("small",{class:"ml-2 text-muted"},"S: ",n.a.format(e.statisticsCurrent.totalInteractions,0)),e.shadowTags&&e.shadowTags.map(e=>Object(c.h)(t,null,Object(c.h)("span",{class:"badge badge-secondary ml-2 float-right font-weight-light"},e))))))),Object(c.h)("div",{class:"container-fluid px-0 mt-1"},Object(c.h)("div",{class:"row"},Object(c.h)(p.a,{stores:this.props.stores,images:it,id:e.id,dblClick:this.likeWorkout,likeRef:u}))),e.dogs&&e.dogs.length>0&&Object(c.h)("div",{class:"container-fluid px-0 mt-1"},Object(c.h)("div",{class:"row pt-2"},Object(c.h)(g.a,{stores:this.props.stores,dogs:e.dogs,allDogs:M,onDogClick:i}))),Object(c.h)("div",{class:"d-flex justify-content-between bg-light rounded-lg px-2"},e.distanceKm>0&&Object(c.h)("div",{class:"mr-2 text-center"},Object(c.h)("div",{class:"text-overflow text-muted"},Object(c.h)("small",null,Object(c.h)("i",{class:"fas fa-road"})," ",Object(c.h)(d.c,{id:"workout.calendar.distance"},"Distanse"))),Object(c.h)("div",{class:"text-overflow font-weight-light",style:"font-size: 1.2em;"},Object(c.h)(S.a,{stores:this.props.stores,value:e.distanceKm}))),e.elevation>0&&Object(c.h)("div",{class:"mr-2 text-center"},Object(c.h)("div",{class:"text-overflow text-muted"},Object(c.h)("small",null,Object(c.h)("i",{class:"fas fa-mountain"})," ",Object(c.h)(d.c,{id:"workout.calendar.ascend"},"Høydemeter"))),Object(c.h)("div",{class:"text-overflow font-weight-light",style:"font-size: 1.2em;"},Object(c.h)(k.a,{stores:this.props.stores,value:e.elevation}))),e.duration>0&&Object(c.h)("div",{class:"mr-2 text-center"},Object(c.h)("div",{class:"text-overflow text-muted"},Object(c.h)("small",null,Object(c.h)("i",{class:"fas fa-clock"})," ",Object(c.h)(d.c,{id:"workout.calendar.duration"},"Varighet"))),Object(c.h)("div",{class:"text-overflow font-weight-light",style:"font-size: 1.2em;"},n.a.secToHms(e.duration,!0))),e.speedAvg>0&&Object(c.h)("div",{class:"text-center"},Object(c.h)("div",{class:"text-overflow text-muted"},Object(c.h)("small",null,Object(c.h)("i",{class:"fas fa-tachometer-alt"})," ",Object(c.h)(d.c,{id:"workout.calendar.avg-speed"},"Snittfart"))),Object(c.h)("div",{class:"text-overflow font-weight-light",style:"font-size: 1.2em;"},tt&&tt.avgGpsMovingSpeed>0?Object(c.h)(t,null,Object(c.h)(w.a,{stores:this.props.stores,value:3.6*tt.avgGpsMovingSpeed})):Object(c.h)(t,null,Object(c.h)(w.a,{stores:this.props.stores,value:e.speedAvg}))))),Object(c.h)("div",{class:"row mt-2"},Object(c.h)("div",{id:"workoutDetail",class:"clearfix col-12 font-weight-bold",style:"font-size: 1.2em;",onClick:this.showWorkoutDetail,"data-id":e.uuidv4},Object(c.h)(b.a,{markdown:I.a.replaceImages(dt,e.images,F),markdownOpts:I.a.getMarkdownOptions()})),Object(c.h)("div",{class:"clearfix col-12"},Object(c.h)(b.a,{markdown:I.a.replaceImages(mt,e.images,F),markdownOpts:I.a.getMarkdownOptions()})),e.language!==F&&Object(c.h)(t,null,!D&&ht?Object(c.h)(t,null,Object(c.h)("button",{type:"button",class:"btn btn-sm btn-link text-muted",onClick:this.showOriginal},Object(c.h)("i",{class:"fas fa-cog"}),"  ",Object(c.h)(d.c,{id:"home.translate-show-original"},"Show original"))):Object(c.h)(t,null,Object(c.h)("button",{type:"button",class:"btn btn-sm btn-link text-muted",onClick:this.translate},Object(c.h)("i",{class:"fas fa-cog"})," ",Object(c.h)(d.c,{id:"home.translate-to"},"See translation"))))),Object(c.h)("div",{class:"mt-2"},Object(c.h)(y.a,{stores:this.props.stores,likes:q,comments:Y,type:"team",onTeamClick:s,onUserClick:a})),!Z&&!G&&!_&&Object(c.h)("div",{class:"clearfix mb-2"},Object(c.h)(f.a,{stores:this.props.stores,team:$,buttonOnly:!0})),Object(c.h)("div",null,Object(c.h)("div",{class:"row"},Object(c.h)("div",{class:"col text-center"},Object(c.h)("button",{type:"button",class:`imageContainer btn btn-sm btn-outline-${J?"primary":"secondary"} btn-lg btn-block ${J?"text-primary":""} text-overflow`,"data-id":e.id,onClick:this.likeWorkout},Object(c.h)("i",{class:(J?"text-primary fas":"far")+" fa-thumbs-up"})," ",Object(c.h)(d.c,{id:"comments.like"},"Lik"))),Object(c.h)("div",{class:"col text-center"},Object(c.h)("button",{type:"button",class:"btn btn-sm btn-outline-secondary btn-lg btn-block text-overflow","data-id":e.id,onClick:this.toggleAddComment},Object(c.h)("i",{class:"fas fa-comment"})," ",Object(c.h)(d.c,{id:"comments.comment-add"},"Kommentar"))),N?Object(c.h)(t,null,Object(c.h)("div",{class:"col text-center"},Object(c.h)("button",{class:"btn btn-sm btn-outline-secondary btn-lg btn-block text-overflow",onClick:this.shareLink,"data-url":"https://themusher.app/share/workout/"+e.uuidv4,"data-title":"title: "+e.title},Object(c.h)("i",{class:"fas fa-share"})," ",Object(c.h)(d.c,{id:"story.share"},"Del")))):Object(c.h)(t,null,Object(c.h)("div",{class:"col text-center"},Object(c.h)("a",{class:"btn btn-sm btn-outline-secondary btn-lg btn-block text-overflow",href:"https://themusher.app/share/workout/"+e.uuidv4,target:"_blank",rel:"noreferrer","data-native":!0},Object(c.h)("i",{class:"fas fa-share"})," ",Object(c.h)(d.c,{id:"story.share"},"Del")))))),nt>0&&Object(c.h)(t,null,Object(c.h)("div",{class:"mt-2"},Object(c.h)(v.a,{stores:this.props.stores,views:nt,object:e,type:"team",isTeamAdmin:K,isAdmin:z,onTeamClick:s,onUserClick:a}))),Object(c.h)("div",{class:"mt-2"},r[e.id]&&Object(c.h)(j.a,{stores:this.props.stores,workout:e,inputRef:t=>this.inputRef[e.id]=t,inputRefObject:this.inputRef,col:"12",offset:"0",showAvatar:!0,extraClass:"px-0",callback:this.addCommentToFeed}),Object(c.h)(O.a,{stores:this.props.stores,workout:e,col:"12",offset:"0",compact:!1,callback:this.addCommentToFeed})))}})||l;e.a=T}).call(this,s("hosL").Fragment)},"JWe/":function(t,e,s){"use strict";(function(t){function a(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,a)}return s}function o(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?a(Object(s),!0).forEach((function(e){i(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):a(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}function i(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}function l(t){switch(t.type){case 1:return"border-primary";case 2:return"border-danger";case 3:return"border-success";case 4:return"border-info";default:return"border-warning"}}function c(t){switch(t.type){case 1:return"fas fa-running";case 2:return"fas fa-flag-checkered";case 3:return"fas fa-hiking";case 4:return"fas fa-futbol";default:return"fas fa-hiking"}}var n,r=s("hosL"),h=s("Utv1"),d=s("/eY4"),m=s("cneo"),b=s("OhSV"),u=s("fh8t"),p=s.n(u),g=(s("UJvz"),s("sqi2")),O=s("/922"),j=s("s4FZ"),f=s("ZQlJ"),y=s("q/oJ"),v=s("gWxU"),w=s("Nanz"),k=s("+JSK"),x=s("vY+r"),S=s("nHdA"),C=s("irB3"),I=s("UwwE"),D=s("8Lgr"),T=s("QkTp"),R=s("ZOvn");const L=R.a.getMaxLoadIndex(),A={showAddComment:!1,viewImageIdx:{},likeWorkout:{}};let P=Object(d.a)(n=class extends r.Component{constructor(t){var e;super(t),e=this,this.toggleDate=t=>{t.stopPropagation(),t.preventDefault();const{showDate:e}=this.state;this.setState({showDate:!e})},this.likeWorkout=async function(){const{workoutStore:t}=e.props.stores,{workout:s}=e.props,a=s.id,{likeWorkout:o}=e.state;o[a]=!0,e.setState({likeWorkout:o}),setTimeout(()=>{const{likeWorkout:t}=e.state;delete t[a],e.setState({likeWorkout:t})},1200);await t.likeWorkout({id:a})},this.toggleAddComment=t=>{const e=t.target.parentElement.dataset.id||t.target.dataset.id,{showAddComment:s}=this.state;this.setState({showAddComment:!s},()=>{this.inputRef[e]&&this.inputRef[e].focus()})},this.viewImage=t=>{const{id:e,idx:s}=t.target.closest("img").dataset,{viewImageIdx:a}=this.state;a[e]=s,this.setState({viewImageIdx:a})},this.shareLink=t=>{const{url:e,title:s,text:a}=t.target.closest("button").dataset,{appState:o}=this.props.stores;o.shareUrl({url:e,title:s,text:a})},this.onTeamClick=(t,e)=>(t.preventDefault(),t.stopPropagation(),this.setState({showTeam:e}),!1),this.hideTeam=()=>{this.setState({showTeam:null})},this.onUserClick=t=>(t.preventDefault(),t.stopPropagation(),!1),this.onDogClick=(t,e,s)=>(t.preventDefault(),t.stopPropagation(),this.setState({showDog:e,dogs:s}),!1),this.hideDog=()=>{this.setState({showDog:null})},this.state=o({},A),this.updateTimer={},this.inputRef={}}render(){const{showDate:e,showAddComment:s,viewImageIdx:a={},likeWorkout:i,dogs:n,showTeam:d,showDog:u}=this.state,{workout:A,showDate:P,wrapperClasses:E="col-12 col-sm-8 col-lg-6 offset-sm-2 offset-lg-3",wrapperClassesRow:U="row"}=this.props,{userStore:z,appState:F,workoutStore:N}=this.props.stores,{viewmode:M,hasShareApi:$}=F,{user:B,dogs:W}=z,{language:K="en"}=B,V=z.findIntensity({code:A.intensity,language:K})||{},q=z.findTeam(A.team,!0)||{},Y=q.name,J=[];Y&&J.push(Y),A.teams&&A.teams.forEach(t=>{z.findTeam(t)&&J.push(z.findTeam(t))});const{likes:H=[],comments:Z=[]}=A,G=A.likes&&A.likes.findIndex(t=>t.user===B.id)>-1,{gpxInfo:_={},mushers:Q=[]}=A,{loadIndex:X=0}=_,tt=z.findEquipment({equipment:A.equipment,language:K}),et=z.findEquipment({equipment:A.equipment,field:"icon"}),st=[];Q.length>1&&Q.slice(1,10).map(t=>{const e=N.findPublicUser(t)||{};e.images&&e.images[0]&&st.push(e.images[0])});const at=N.findPublicUser(Q[0])||{};let ot;at&&at.images&&at.images[0]?ot=at.images[0]:q.image&&q.image.s3SmallLink?ot=q.image:q.images&&q.images[0]&&q.images[0].s3SmallLink?ot=q.images[0]:A.image&&A.image.s3SmallLink&&(ot=A.image);const it=[];if(A.mapImage&&it.push(o(o({},A.mapImage),{},{type:"map"})),A.images){const t=Object(m.i)(A.images);it.push(...t)}let lt;A&&A.gpxInfo&&A.gpxInfo.battegryLevelStart&&(lt=100*(A.gpxInfo.battegryLevelStart-A.gpxInfo.battegryLevelEnd));const ct=R.a.getViews(A.statistics);return Object(r.h)(t,null,d&&Object(r.h)(y.a,null,Object(r.h)(v.default,{stores:this.props.stores,teamid:d,marginTop:"0px;",marginBottom:"0px;",back:this.hideTeam,hideTeam:this.hideTeam})),u&&Object(r.h)(y.a,null,Object(r.h)(w.default,{stores:this.props.stores,dogid:u,marginTop:"0px;",marginBottom:"0px;",back:this.hideDog,dogs:n})),Object(r.h)("div",{class:"w-100 mb-2"},Object(r.h)("div",{class:U},Object(r.h)("div",{class:E+" d-flex mb-0 position-relative"},Object(r.h)("div",{class:"text-center"},Object(r.h)("div",{class:"position-relative text-center border rounded-circle imageRounded "+l(A),style:(ot?`background-image: url("${ot.s3SmallLink}"); background-size: cover;`:"")+" border-width: 3px !important;"},!ot&&Object(r.h)("i",{class:`${c(A)} text-${V.class?V.class:"muted"} mt-3`,style:"font-size: 40px;"}),st&&st.map((e,s)=>Object(r.h)(t,null,Object(r.h)("div",{class:"position-absolute rounded-circle imageRounded border imageRoundedThumb border-white",style:`\n                                            background-image: url("${e.s3SmallLink}");\n                                            background-size: cover;\n                                            bottom: -3px;\n                                            left: ${10*s-5}px;\n                                        `})))),0!==A.temperature&&Object(r.h)(t,null,Object(r.h)("span",{class:"text-muted font-weight-light"},Object(r.h)(T.a,{stores:this.props.stores,value:A.temperature})))),Object(r.h)("div",{class:"flex-grow-1 pl-3",style:"line-height: 1.2em;"},Object(r.h)("span",{class:"float-right"},1===A.isLocked&&Object(r.h)("i",{class:"fas fa-lock text-danger ml-3"}),1===A.isInProgress&&Object(r.h)("div",{class:"spinner-grow text-success ml-3",role:"status"}),2===A.isInProgress&&Object(r.h)("i",{class:"fas fa-pause-circle text-warning ml-3"})),Object(r.h)("a",{class:"stretched-link",href:"/workouts/"+A.id},Object(r.h)("h5",{class:"my-0 mb-1",style:"line-height: 1.0em;"},A.name)),J&&J.length>0&&Object(r.h)("small",{class:"font-weight-lighter"},J.map((e,s)=>Object(r.h)(t,null,s>0?", ":"",e))),Object(r.h)("br",null),Object(r.h)("small",{class:"text-muted"},A.date&&Object(r.h)("small",{onClick:this.toggleDate},P||e?h.a.formatDate(A.date,{locale:"no-NB",hour12:!1,hour:"2-digit",minute:"2-digit"}):h.a.formatDistance(A.date,new Date,{locale:"no-NB"})),Object(r.h)("span",{class:`badge badge-${V.class} ml-2`},V.name),X>0&&Object(r.h)("span",{class:"ml-2 text-"+R.a.getLoadIndexColor(h.a.normalizeBetween(X,0,L,0,100))},Object(r.h)("i",{class:"fas fa-hand-rock mr-1"}),Math.floor(h.a.normalizeBetween(X,0,L,0,100))," - ",R.a.getLoadIndexText(h.a.normalizeBetween(X,0,L,0,100))),Object(r.h)("br",null)),Object(r.h)("small",null,Object(r.h)("div",{class:"text-muted"},A.garminId>0&&Object(r.h)("div",{class:"float-left mr-2 text-center border rounded-circle imageRounded imageRoundedIcon",style:'background-image: url("./assets/garmin-connect.png");'}),A.stravaId>0&&Object(r.h)("div",{class:"float-left mr-2 text-center border rounded-circle imageRounded imageRoundedIcon",style:'background-image: url("./assets/strava-icon.png");'}),A.equipment>0&&Object(r.h)(t,null,Object(r.h)("i",{class:et+" ml-2"})," ",tt),A.dogs>0&&Object(r.h)(t,null,Object(r.h)("i",{class:"fas fa-dog ml-2"})," ",A.dogs.length),A.track>0&&Object(r.h)(t,null,Object(r.h)("i",{class:`fas fa-map-marked text-${A.track>0?"success":"danger"} ml-2`})),A.dogsLeft>0&&Object(r.h)(t,null,Object(r.h)("i",{class:`fas fa-crosshairs text-${A.dogsLeft&&A.dogsRight?"success":"danger"} ml-2`})),A.sledWeight>0&&Object(r.h)(t,null,Object(r.h)("i",{class:"fas fa-sleigh ml-2"})," ",Object(r.h)(I.a,{stores:this.props.stores,value:A.sledWeight})),lt>0&&Object(r.h)("span",{class:"text-muted ml-2"},Object(r.h)("i",{class:"fas fa-battery-three-quarters"})," ",h.a.format(lt,1),"% ",Object(r.h)(b.c,{id:"workout.battery-used"},"used"))),["beta","advanced"].indexOf(M)>-1&&Object(r.h)("span",{class:"text-muted"},Object(r.h)("i",{class:"fas fa-balance-scale"})," ",h.a.format(A.kcalBurnedTotal)," ",Object(r.h)(b.c,{id:"workout.kcal"},"kcal"),Object(r.h)("i",{class:"fas fa-drumstick-bite ml-2"})," ",Object(r.h)(I.a,{stores:this.props.stores,value:A.kcalMeatGramsTotal/1e3}),Object(r.h)("i",{class:"fas fa-fish ml-2"})," ",Object(r.h)(I.a,{stores:this.props.stores,value:A.kcalSalmonGramsTotal/1e3}),Object(r.h)("i",{class:"fas fa-piggy-bank ml-2"})," ",Object(r.h)(I.a,{stores:this.props.stores,value:A.kcalFatGramsTotal/1e3}))))),Object(r.h)("div",{class:E+" position-relative mt-2"},Object(r.h)("strong",null,A.description)),Object(r.h)("div",{class:E+" position-relative"},Object(r.h)(p.a,{markdown:R.a.replaceImages(A.comment,A.images,K),markdownOpts:R.a.getMarkdownOptions()})),Object(r.h)("div",{class:E+" d-flex mb-0 position-relative"},Object(r.h)("div",{class:"container-fluid px-0"},Object(r.h)("div",{class:"row mt-1"},A.distanceKm>0&&Object(r.h)("div",{class:"col-3"},Object(r.h)("div",{class:"text-overflow"},Object(r.h)("small",null,Object(r.h)("i",{class:"fas fa-road"})," ",Object(r.h)(b.c,{id:"workout.calendar.distance"},"Distanse"))),Object(r.h)("div",{class:"text-overflow font-weight-light",style:"font-size: 1.2em;"},Object(r.h)(D.a,{stores:this.props.stores,value:A.distanceKm}))),A.elevation>0&&Object(r.h)("div",{class:"col-3"},Object(r.h)("div",{class:"text-overflow"},Object(r.h)("small",null,Object(r.h)("i",{class:"fas fa-mountain"})," ",Object(r.h)(b.c,{id:"workout.calendar.ascend"},"Høydemeter"))),Object(r.h)("div",{class:"text-overflow font-weight-light",style:"font-size: 1.2em;"},Object(r.h)(C.a,{stores:this.props.stores,value:A.elevation}))),A.duration>0&&Object(r.h)("div",{class:"col-3"},Object(r.h)("div",{class:"text-overflow"},Object(r.h)("small",null,Object(r.h)("i",{class:"fas fa-clock"})," ",Object(r.h)(b.c,{id:"workout.calendar.duration"},"Varighet"))),Object(r.h)("div",{class:"text-overflow font-weight-light",style:"font-size: 1.2em;"},h.a.secToHms(A.duration,!0))),A.speedAvg>0&&Object(r.h)("div",{class:"col-3"},Object(r.h)("div",{class:"text-overflow"},Object(r.h)("small",null,Object(r.h)("i",{class:"fas fa-tachometer-alt"})," ",Object(r.h)(b.c,{id:"workout.calendar.avg-speed"},"Snittfart"))),Object(r.h)("div",{class:"text-overflow font-weight-light",style:"font-size: 1.2em;"},A.gpxInfo&&A.gpxInfo.avgGpsMovingSpeed>0?Object(r.h)(t,null,Object(r.h)(S.a,{stores:this.props.stores,value:3.6*A.gpxInfo.avgGpsMovingSpeed})):Object(r.h)(t,null,Object(r.h)(S.a,{stores:this.props.stores,value:A.speedAvg}))))))),["beta","advanced","normal"].indexOf(M)>-1&&Object(r.h)("div",{class:""+E},Object(r.h)("div",{class:"container-fluid px-0 mt-1"},Object(r.h)("div",{class:"row"},Object(r.h)(j.a,{stores:this.props.stores,images:it,id:A.id,dblClick:this.likeWorkout,likeRef:i})))),["beta","advanced","normal"].indexOf(M)>-1&&Object(r.h)(t,null,A.dogs&&A.dogs.length>0&&Object(r.h)("div",{class:"container-fluid px-0 mt-1"},Object(r.h)("div",{class:"row pt-2"},Object(r.h)(f.a,{stores:this.props.stores,dogs:A.dogs,allDogs:W,onDogClick:this.onDogClick}))),Object(r.h)("div",{class:"mt-2"},Object(r.h)(k.a,{stores:this.props.stores,likes:H,comments:Z,type:"workout",onTeamClick:this.onTeamClick,onUserClick:this.onUserClick}))),["beta","advanced","normal"].indexOf(M)>-1&&Object(r.h)(t,null,Object(r.h)("div",{class:E+" mb-0 position-relative mt-2"},Object(r.h)("div",{class:"row"},Object(r.h)("div",{class:"col text-center"},Object(r.h)("button",{type:"button",class:`btn btn-sm btn-outline-${G?"primary":"secondary"} btn-lg btn-block ${G?"text-primary":""}`,onClick:this.likeWorkout},Object(r.h)("i",{class:(G?"text-primary fas":"far")+" fa-thumbs-up"})," ",Object(r.h)(b.c,{id:"comments.like"},"Lik"))),Object(r.h)("div",{class:"col text-center"},Object(r.h)("button",{type:"button",class:"btn btn-sm btn-outline-secondary btn-lg btn-block","data-id":A.id,onClick:this.toggleAddComment},Object(r.h)("i",{class:"fas fa-comment"})," ",Object(r.h)(b.c,{id:"comments.comment-add"},"Kommentar"))),$?Object(r.h)(t,null,Object(r.h)("div",{class:"col text-center"},Object(r.h)("button",{class:"btn btn-sm btn-outline-secondary btn-lg btn-block text-overflow",onClick:this.shareLink,"data-url":"https://themusher.app/share/workout/"+A.uuidv4,"data-title":"title: "+A.name},Object(r.h)("i",{class:"fas fa-share"})," ",Object(r.h)(b.c,{id:"workout.share"},"Del")))):Object(r.h)(t,null,Object(r.h)("div",{class:"col text-center"},Object(r.h)("a",{class:"btn btn-sm btn-outline-secondary btn-lg btn-block text-overflow",href:"https://themusher.app/share/workout/"+A.uuidv4,target:"_blank",rel:"noreferrer","data-native":!0},Object(r.h)("i",{class:"fas fa-share"})," ",Object(r.h)(b.c,{id:"workout.share"},"Del")))))),Object(r.h)("div",{class:E+" mt-2 mb-3"},s&&Object(r.h)(O.a,{stores:this.props.stores,workout:A,inputRef:t=>this.inputRef[A.id]=t,inputRefObject:this.inputRef,col:"12",offset:"0"}),Object(r.h)(g.a,{stores:this.props.stores,workout:A,col:"10",offset:"2",compact:!0})),ct>0&&Object(r.h)(t,null,Object(r.h)("div",{class:"mt-2"},Object(r.h)(x.a,{stores:this.props.stores,views:ct,object:A,type:"workout",isTeamAdmin:!0,isAdmin:!1,onTeamClick:this.onTeamClick,onUserClick:this.onUserClick})))))))}})||n;e.a=P}).call(this,s("hosL").Fragment)},K5BL:function(t,e,s){"use strict";var a,o=s("hosL"),i=s("Utv1"),l=s("/eY4"),c=s("OhSV"),n=s("go65");s("ETxl"),s("ZOvn");let r=Object(l.a)(a=class extends o.Component{constructor(...t){var e;super(...t),e=this,this.commentTrack=async function(){const{callback:t=(()=>{}),commentId:s}=e.props,{track:a}=e.props,{trackStore:o}=e.props.stores,{comment:i=""}=e.state,l=await o.commentReplyTrack({id:a.id,commentId:s,comment:i});l&&200===l.status&&(e.setState({comment:""}),t({track:a,response:l}))}}render(){const{inputRef:t}=this.props,{comment:e}=this.state,{userStore:s}=this.props.stores,{user:a={}}=s,l=a.firstname?`${i.a.ucfirst(a.firstname,!0)}${i.a.ucfirst(a.lastname,!0)}`:""+i.a.ucfirst(a.email||"",!0),r=a.image||(a.images?a.images[0]:void 0);return Object(o.h)("div",{class:"w-100"},Object(o.h)("div",{class:"d-flex mb-0 position-relative w-100"},Object(o.h)("div",{class:"text-center border rounded-circle imageRounded imageRoundedThumb",style:(r?`background-image: url('${r.s3SmallLink}'); background-size: cover;`:"")+" border-width: 3px !important;"},!r&&Object(o.h)("span",{class:"font-weight-lighter",style:"font-size: 15px;"},l)),Object(o.h)("div",{class:"col pl-3",style:"line-height: 1.2em;"},Object(o.h)("div",{class:"d-flex bd-highlight"},Object(o.h)("div",{class:"p-0 w-100 bd-highlight"},Object(o.h)("label",{class:"sr-only",for:"inlineFormInput"},Object(o.h)(c.c,{id:"comments.comment"},"Kommentar")),Object(o.h)("div",{class:"border rounded rounded-lg position-relative"},Object(o.h)(c.b,null,Object(o.h)("input",{class:"form-control-plaintext px-2",type:"text",placeholder:Object(o.h)(c.c,{id:"comments.write-comment"},"Skriv en kommentar..."),onInput:Object(n.a)(this,"comment"),value:e,ref:t})))),Object(o.h)("div",{class:"p-0 pl-2 flex-shrink-1 bd-highlight"},Object(o.h)("button",{type:"button",class:"btn btn-sm btn-primary mb-2",onClick:this.commentTrack},Object(o.h)("i",{class:"fas fa-paper-plane"})))))))}})||a;e.a=r},KDoM:function(t,e,s){"use strict";(function(t){var a,o=s("hosL"),i=s("Utv1"),l=s("/eY4"),c=s("OhSV"),n=s("nHdA"),r=s("irB3"),h=s("UwwE"),d=s("8Lgr"),m=(s("QkTp"),s("ZOvn"));let b=Object(l.a)(a=class extends o.Component{render(){const{dog:e}=this.props,{userStore:s,dogStore:a,appState:l}=this.props.stores,{user:b}=s,{language:u="en"}=b,{viewmode:p}=l,g=(new Date).getMonth()+1,O=(new Date).getFullYear(),{month:j=g,year:f=O}=this.props,y=parseInt(j<8?f-1:f,10),v=a.findWorkoutSummary(e.id,y)||{},w=e.statuses?e.statuses.map(t=>s.findDogstatus({status:t,language:u})):[],k=a.findVaccineStatuses(e.id),x=a.findVaccineLogStatuses(e.chipId),S=a.findHistoryStatuses(e.id),C=s.findDogstatus({status:e.status,language:u}),I=s.findDogposition({position:e.position,language:u}),D=[];s.findTeam(e.team)&&D.push(s.findTeam(e.team)),e.teams&&e.teams.forEach(t=>{s.findTeam(t)&&D.push(s.findTeam(t))});const T=m.a.hasBirthday(e.birth),R=e.birth?Math.ceil(m.a.daysUntilNextBirthday(e.birth)):365,{url:L="/dogs/"+e.id}=this.props;return Object(o.h)("div",{class:"w-100 mb-3"},Object(o.h)("div",{class:"row"},Object(o.h)("div",{class:"col-12 col-sm-8 col-lg-6 offset-sm-2 offset-lg-3 d-flex mb-0 position-relative"},Object(o.h)("div",{class:"text-center border rounded-circle imageRounded text-muted pt-2",style:e.image?`background-image: url("${e.image.s3SmallLink}"); background-size: cover;`:""},!e.image&&Object(o.h)("span",{class:"font-weight-lighter",style:"font-size: 35px;"},i.a.ucfirst(e.name,!0))),Object(o.h)("div",{class:"flex-grow-1 pl-3 pr-2",style:`border-right: 4px solid ${s.findHarness(e.harness,"colorNonstop")} !important; line-height: 1.2em;`},Object(o.h)("span",{class:"float-right"},I&&Object(o.h)("span",{class:`badge badge-${I.class||"primary"} mr-3`},I.icon&&Object(o.h)("i",{class:I.icon})," ",I.name),R<7&&Object(o.h)(t,null,Object(o.h)("span",{class:"text-muted mr-2"},Object(o.h)("i",{class:"fas fa-birthday-cake"})," in ",R," days")),e.birth&&Object(o.h)("span",{class:"mr-2"},i.a.age(e.birth,e.deceased)),"female"===e.gender?Object(o.h)("i",{class:"fas fa-venus"}):Object(o.h)("i",{class:"fas fa-mars"})),Object(o.h)("a",{class:"stretched-link",href:L},Object(o.h)("h5",{class:"mb-1",style:"line-height: 1.0em;"},e.shortname||e.name," ",e.shortname&&""!==e.shortname&&Object(o.h)(t,null," - ",Object(o.h)("span",{class:"font-weight-lighter"},e.name)),T&&Object(o.h)(t,null,Object(o.h)("i",{class:"fas fa-birthday-cake ml-3"})))),Object(o.h)("div",null,D&&D.length>0&&Object(o.h)("small",{class:"font-weight-lighter"},D.map((e,s)=>Object(o.h)(t,null,s>0?", ":"",e))),Object(o.h)("br",null)),Object(o.h)("small",{class:"text-muted"},e.history>0&&Object(o.h)("span",{class:"ml-0"},Object(o.h)("i",{class:"fas fa-file-signature"})," ",e.history.length),e.images>0&&Object(o.h)("span",{class:"ml-2"},Object(o.h)("i",{class:"fas fa-image"})," ",e.images.length),v&&v.distanceKm>0&&Object(o.h)("span",{class:"ml-2"},Object(o.h)("i",{class:"fas fa-road"})," ",Object(o.h)(d.a,{stores:this.props.stores,value:v.distanceKm})),v&&v.elevation>0&&Object(o.h)("span",{class:"ml-2"},Object(o.h)("i",{class:"fas fa-mountain"})," ",Object(o.h)(r.a,{stores:this.props.stores,value:v.elevation})),v&&v.duration>0&&Object(o.h)("span",{class:"ml-2"},Object(o.h)("i",{class:"fas fa-clock"})," ",i.a.secToHms(v.duration,!0)),v&&v.speedAvg>0&&Object(o.h)("span",{class:"ml-2"},Object(o.h)("i",{class:"fas fa-tachometer-alt"})," ",Object(o.h)(n.a,{stores:this.props.stores,value:v.speedAvg})),e.weight>0&&Object(o.h)(t,null,Object(o.h)("i",{class:"fas fa-balance-scale ml-2"})," ",Object(o.h)(h.a,{stores:this.props.stores,value:e.weight})),e.bodyScore>0&&Object(o.h)(t,null,Object(o.h)("i",{class:"fas fa-dog ml-2"})," ",i.a.format(e.bodyScore,1))),["beta","advanced","normal"].indexOf(p)>-1&&Object(o.h)(t,null,Object(o.h)("div",null,k&&k.map(t=>Object(o.h)("span",{class:"badge badge-success mr-2",title:i.a.isoDate(t.endDate,!1,!1,!0)},t.vaccineType,Object(o.h)("span",{class:"font-weight-light ml-3"},Object(o.h)("i",{class:"fas fa-calendar-check"})," ",i.a.isoDate(t.endDate,!1,!1,!0)))),S&&S.map(t=>Object(o.h)("span",{class:"badge badge-warning mr-2",title:i.a.isoDate(t.endDate,!1,!1,!0)},t.title)))),["beta","advanced"].indexOf(p)>-1&&Object(o.h)(t,null,e.positions&&e.positions.lead&&Object(o.h)("div",{class:""},e.positions.lead.distanceKm>0&&Object(o.h)("span",{class:"badge badge-secondary mr-2"},Object(o.h)("span",{class:"font-weight-lighter"},Object(o.h)(c.c,{id:"dogs.sort-lead"},"Lead"),":")," ",Object(o.h)(d.a,{stores:this.props.stores,value:e.positions.lead.distanceKm})),e.positions.point.distanceKm>0&&Object(o.h)("span",{class:"badge badge-secondary mr-2"},Object(o.h)("span",{class:"font-weight-lighter"},Object(o.h)(c.c,{id:"dogs.sort-point"},"Point"),":")," ",Object(o.h)(d.a,{stores:this.props.stores,value:e.positions.point.distanceKm})),e.positions.team.distanceKm>0&&Object(o.h)("span",{class:"badge badge-secondary mr-2"},Object(o.h)("span",{class:"font-weight-lighter"},Object(o.h)(c.c,{id:"dogs.sort-team"},"Team"),":")," ",Object(o.h)(d.a,{stores:this.props.stores,value:e.positions.team.distanceKm})),e.positions.wheel.distanceKm>0&&Object(o.h)("span",{class:"badge badge-secondary mr-2"},Object(o.h)("span",{class:"font-weight-lighter"},Object(o.h)(c.c,{id:"dogs.sort-wheel"},"Wheel"),":")," ",Object(o.h)(d.a,{stores:this.props.stores,value:e.positions.wheel.distanceKm})))),Object(o.h)("div",{class:"clearfix pb-0"},e.specialNeeds&&Object(o.h)("span",{class:"badge badge-warning ml-2 mt-1 float-right"},Object(o.h)("i",{class:"fas fa-exclamation-triangle"})," ",e.specialNeeds),C&&Object(o.h)("span",{class:`badge badge-${C.class} ml-2 mt-1 float-right`},C.icon&&Object(o.h)("i",{class:C.icon})," ",C.name),w&&w.map(e=>Object(o.h)(t,null,Object(o.h)("span",{class:`badge badge-${e.class} ml-2 mt-1 float-right`},e.icon&&Object(o.h)("i",{class:e.icon})," ",e.lang&&e.lang[u]?e.lang[u]:e.name)))),x&&x.length>0&&Object(o.h)(t,null,Object(o.h)("div",{class:"mt-2"},x&&x.filter(t=>t.chipId===e.chipId).map(t=>Object(o.h)("span",{class:`badge badge-${t.inKarens?"warning":"success"} mr-2 mb-1`},Object(o.h)("i",{class:"fas fa-user-md"})," ",t.vaccineAgens.name))))))))}})||a;e.a=b}).call(this,s("hosL").Fragment)},NMoA:function(t,e,s){"use strict";(function(t){function a(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,a)}return s}function o(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}var i,l,c,n,r,h=s("hosL"),d=s("Utv1"),m=s("/eY4"),b=s("cneo"),u=s("OhSV"),p=s("fh8t"),g=s.n(p),O=s("go65"),j=s("Y3FI"),f=(s("X9Km"),s("1OK2"),s("B95u")),y=s("4QWe"),v=(s("NMoA"),s("P9Fo")),w=s("s4FZ"),k=s("+JSK"),x=s("vY+r"),S=s("eQ6k"),C=s("ZOvn");const I={showAddComment:{},showTeamSetting:{},viewImageIdx:{},likeStory:{}};let D=Object(m.a)(i=class extends h.Component{constructor(t){var e;super(t),e=this,this.saveStory=async function(t){const{id:s}=t.target.closest("button").dataset,{storyBody:a}=e.state,{storyStore:o}=e.props.stores,{callback:i=(()=>!0)}=e.props;await o.saveField(parseInt(s,10),"body",a,!0),o.publicFeedUpdate(parseInt(s,10),"body",a),e.setState({storyBody:"",storyType:0}),i()},this.saveStoryField=async function(t){const{story:s}=e.props,{id:a}=s,{value:o,name:i}=t.target;clearTimeout(e.updateTimer[i]),e.updateTimer[i]=setTimeout((async function(){e.doUpdateField(a,i,o)}),1e3)},this.updateTimer={}}async doUpdateField(t,e,s){const{storyStore:a}=this.props.stores;await a.saveField(parseInt(t,10),e,s,!0),a.publicFeedUpdate(parseInt(t,10),e,s)}render(){const{storyBody:e,storyType:s}=this.state,{userStore:a}=this.props.stores,{isAdmin:o}=a,{story:i}=this.props;return Object(h.h)(t,null,Object(h.h)("div",{class:"d-flex bd-highlight"},Object(h.h)("div",{class:"p-0 w-100 bd-highlight"},Object(h.h)("label",{class:"sr-only",for:"inlineFormInput"},Object(h.h)(u.c,{id:"comments.comment"},"Kommentar")),Object(h.h)("div",{class:"border rounded rounded-lg position-relative"},Object(h.h)(u.b,null,Object(h.h)("textarea",{class:"form-control-plaintext px-2",type:"text",placeholder:Object(h.h)(u.c,{id:"comments.write-comment"},"Skriv en kommentar..."),onInput:Object(O.a)(this,"storyBody"),onFocus:C.a.resizeTextarea,style:"height: 2.3em;",value:e||i.body}))),Object(h.h)("div",{class:"position-relative mt-3"},o&&Object(h.h)(t,null,Object(h.h)("div",{class:"col-12 text-center mt-2"},Object(h.h)("div",{class:"form-group"},Object(h.h)("small",null,Object(h.h)("label",null,"Pinned to top:"),Object(h.h)("input",{type:"checkbox",id:i.id,name:"pinned",onInput:this.saveStoryField,value:i.pinned?0:1,checked:i.pinned?1:0}))))),o&&Object(h.h)(t,null,Object(h.h)("label",null,Object(h.h)(u.c,{id:"story.type"},"Type")),Object(h.h)("div",{class:"form-group"},Object(h.h)("small",null,Object(h.h)("select",{class:"custom-select custom-select-sm",id:i.id,name:"type",onInput:this.saveStoryField,value:s||i.type},Object(h.h)("option",{value:""},"-- ",Object(h.h)(u.c,{id:"story.type-choose"},"Velg type")," --"),Object(h.h)("option",{value:1,selected:1==i.type?"selected":""},"✍️ ",Object(h.h)(u.c,{id:"story.type-regular"},"Vanlig")),Object(h.h)("option",{value:2,selected:2==i.type?"selected":""},"🚀 ",Object(h.h)(u.c,{id:"story.type-ad"},"Annonse")),Object(h.h)("option",{value:3,selected:3==i.type?"selected":""},"📄 ",Object(h.h)(u.c,{id:"story.type-article"},"Artikkel")))))),i.type>=2&&Object(h.h)(t,null,Object(h.h)("label",null,Object(h.h)(u.c,{id:"story.url-text"},"URL text")),Object(h.h)("div",{class:"form-group"},Object(h.h)("small",null,Object(h.h)("input",{class:"form-control",type:"text",name:"urlText",onInput:this.saveStoryField,value:i.urlText}))),Object(h.h)("label",null,Object(h.h)(u.c,{id:"story.url"},"URL")),Object(h.h)("div",{class:"form-group"},Object(h.h)("small",null,Object(h.h)("input",{class:"form-control",type:"text",name:"url",onInput:this.saveStoryField,value:i.url})))),2===i.type&&Object(h.h)(t,null,Object(h.h)("label",null,Object(h.h)(u.c,{id:"story.code"},"Code")),Object(h.h)("div",{class:"form-group"},Object(h.h)("small",null,Object(h.h)("input",{class:"form-control",type:"text",name:"code",onInput:this.saveStoryField,value:i.code}))),Object(h.h)("label",null,Object(h.h)(u.c,{id:"story.country"},"Country")),Object(h.h)("div",{class:"form-group"},Object(h.h)("small",null,Object(h.h)("input",{class:"form-control",type:"text",name:"country",onInput:this.saveStoryField,value:i.country}))),Object(h.h)("label",null,Object(h.h)(u.c,{id:"story.region"},"Region")),Object(h.h)("div",{class:"form-group"},Object(h.h)("small",null,Object(h.h)("input",{class:"form-control",type:"text",name:"region",onInput:this.saveStoryField,value:i.region}))),Object(h.h)("label",null,Object(h.h)(u.c,{id:"story.currency"},"Currency")),Object(h.h)("div",{class:"form-group"},Object(h.h)("small",null,Object(h.h)("input",{class:"form-control",type:"text",name:"currency",onInput:this.saveStoryField,value:i.currency}))),Object(h.h)("label",null,Object(h.h)(u.c,{id:"story.price"},"Price")),Object(h.h)("div",{class:"form-group"},Object(h.h)("small",null,Object(h.h)("input",{class:"form-control",type:"text",name:"price",onInput:this.saveStoryField,value:i.price})))))),Object(h.h)("div",{class:"p-0 pl-2 flex-shrink-1 bd-highlight"},Object(h.h)("button",{type:"button",class:"btn btn-primary mb-2",onClick:this.saveStory,"data-id":i.id},Object(h.h)("i",{class:"fas fa-paper-plane"})))))}})||i,T=Object(m.a)(l=class extends h.Component{constructor(t){var e;super(t),e=this,this.viewImage=t=>{const{id:e,idx:s}=t.target.closest("img").dataset,{viewImageIdx:a}=this.state;a[e]=s,this.setState({viewImageIdx:a})},this.showStoryDetail=t=>{if("a"===t.target.localName)return!1;const{id:e}=t.target.closest("#storyDetail").dataset;e&&Object(j.route)("/stories/"+e)},this.translate=async function(t){t.preventDefault(),t.stopPropagation();const{story:s}=e.props,{userStore:a,storyStore:o}=e.props.stores,{user:i}=a,l=await o.translate({story:s,user:i});e.setState({showOriginal:0,translatedText:l})},this.showOriginal=t=>{t.preventDefault(),t.stopPropagation(),this.setState({showOriginal:1})},this.state={viewImageIdx:{}}}render(){const{viewImageIdx:e,showOriginal:s,translatedText:a}=this.state,{userStore:o}=this.props.stores,{story:i,likeStory:l,likeRef:c}=this.props,{user:n}=o,{language:r="en"}=n,d=[];if(i.images){const t=Object(b.i)(i.images);d.push(...t)}const m=C.a.getTranslation({object:i,targetLang:r,field:"body"})||a;let p=m||i.body;s&&(p=i.body);const{components:O=[],finalBody:j}=C.a.getInlineComponents(p);return Object(h.h)(t,null,Object(h.h)("div",{class:"container-fluid px-0 mt-1"},Object(h.h)("div",{class:"row"},Object(h.h)(w.a,{stores:this.props.stores,images:d,id:i.id,dblClick:l,likeRef:c}))),Object(h.h)("div",{class:"row mt-2"},Object(h.h)("div",{class:"clearfix col-12 overflow-hidden",style:""+(i.offline?"text-decoration: line-through;":"")},Object(h.h)("div",{id:"storyDetail",onClick:this.showStoryDetail,"data-id":i.id},Object(h.h)(g.a,{markdown:C.a.replaceImages(j,i.images,r),markdownOpts:C.a.getMarkdownOptions()}),i.language!==r&&Object(h.h)(t,null,!s&&m?Object(h.h)(t,null,Object(h.h)("button",{type:"button",class:"btn btn-sm btn-link text-muted",onClick:this.showOriginal},Object(h.h)("i",{class:"fas fa-cog"}),"  ",Object(h.h)(u.c,{id:"home.translate-show-original"},"Show original"))):Object(h.h)(t,null,Object(h.h)("button",{type:"button",class:"btn btn-sm btn-link text-muted",onClick:this.translate},Object(h.h)("i",{class:"fas fa-cog"})," ",Object(h.h)(u.c,{id:"home.translate-to"},"See translation"))))),O&&O.map(t=>{if("poll"===t.name)return Object(h.h)(v.a,{stores:this.props.stores,story:i,storyId:i.id,params:t.params,opts:t.opts,content:t.content})}))))}})||l,R=Object(m.a)(c=class extends h.Component{constructor(t){var e;super(t),e=this,this.viewImage=t=>{const{id:e,idx:s}=t.target.closest("img").dataset,{viewImageIdx:a}=this.state;a[e]=s,this.setState({viewImageIdx:a})},this.showStoryDetail=t=>{if("a"===t.target.localName)return!1;const{id:e}=t.target.closest("#storyDetail").dataset;e&&Object(j.route)("/stories/"+e)},this.translate=async function(t){t.preventDefault(),t.stopPropagation();const{story:s}=e.props,{userStore:a,storyStore:o}=e.props.stores,{user:i}=a;e.setState({showOriginal:0}),await o.translate({story:s,user:i})},this.showOriginal=t=>{t.preventDefault(),t.stopPropagation(),this.setState({showOriginal:1})},this.getTranslation=()=>{const{story:t}=this.props,{userStore:e}=this.props.stores,{user:s}=e,{language:a="en"}=s;C.a.getTranslation({object:t,targetLang:a,field:"body"})&&this.setState({showOriginal:0})},this.state={viewImageIdx:{}}}componentWillMount(){this.getTranslation()}render(){const{viewImageIdx:e,showOriginal:s}=this.state,{userStore:a}=this.props.stores,{story:o,likeStory:i,likeRef:l}=this.props,{user:c}=a,{language:n="en"}=c,r=[];if(o.images){const t=Object(b.i)(o.images);r.push(...t)}const m=C.a.getTranslation({object:o,targetLang:n,field:"body"});let p=m||o.body;return s&&(p=o.body),Object(h.h)(t,null,Object(h.h)("div",{class:"container-fluid px-0 mt-1"},Object(h.h)("div",{class:"row"},Object(h.h)(w.a,{stores:this.props.stores,images:r,id:o.id,dblClick:i,likeRef:l}))),Object(h.h)("div",{class:"row mt-2"},Object(h.h)("div",{class:"clearfix col-12 overflow-hidden",style:""+(o.offline?"text-decoration: line-through;":"")},Object(h.h)("div",{id:"storyDetail","data-id":o.id},Object(h.h)(g.a,{markdown:C.a.replaceImages(p,o.images,n),markdownOpts:C.a.getMarkdownOptions()}),o.language!==n&&Object(h.h)(t,null,!s&&m?Object(h.h)(t,null,Object(h.h)("button",{type:"button",class:"btn btn-sm btn-link",onClick:this.showOriginal},Object(h.h)("i",{class:"fas fa-cog"}),"  ",Object(h.h)(u.c,{id:"home.translate-show-original"},"Show original"))):Object(h.h)(t,null,Object(h.h)("button",{type:"button",class:"btn btn-sm btn-link",onClick:this.translate},Object(h.h)("i",{class:"fas fa-cog"})," ",Object(h.h)(u.c,{id:"home.translate-to"},"See translation")))))),!!(o.url||o.code||o.price>0)&&Object(h.h)(t,null,Object(h.h)("div",{class:"clearfix col-12  py-2",style:""+(o.offline?"text-decoration: line-through;":"")},Object(h.h)("div",{class:"row"},o.url&&Object(h.h)(t,null,Object(h.h)("div",{class:"col-12 text-left",style:"font-size: 1.0em;"},Object(h.h)("a",{href:C.a.asUrl(o.url),target:"_blank",rel:"noreferrer"},Object(h.h)("i",{class:"fas fa-link mr-2"}),o.urlText?Object(h.h)(t,null,o.urlText):Object(h.h)(t,null,Object(h.h)(u.c,{id:"story.ad-url-readmore"},"Les mer..."))))),o.code&&Object(h.h)(t,null,Object(h.h)("div",{class:"col text-left",style:"font-size: 1.2em;"},Object(h.h)("nobr",null,Object(h.h)("span",{class:"font-weight-lighter"},Object(h.h)(u.c,{id:"story.ad-campaign-code"},"Kampanjekode"),":")," ",o.code))),o.price>0&&Object(h.h)(t,null,Object(h.h)("div",{class:"col text-right",style:"font-size: 1.2em;"},Object(h.h)("nobr",null,o.currencty&&Object(h.h)("span",{class:"font-weight-lighter"},o.currency)," ",d.a.format(o.price,2)))))))))}})||c,L=Object(m.a)(n=class extends h.Component{constructor(t){var e;super(t),e=this,this.viewImage=t=>{const{id:e,idx:s}=t.target.closest("img").dataset,{viewImageIdx:a}=this.state;a[e]=s,this.setState({viewImageIdx:a})},this.showStoryDetail=t=>{if("a"===t.target.localName)return!1;const{id:e}=t.target.closest("#storyDetail").dataset;e&&Object(j.route)("/stories/"+e)},this.translate=async function(t){t.preventDefault(),t.stopPropagation();const{story:s}=e.props,{userStore:a,storyStore:o}=e.props.stores,{user:i}=a;e.setState({showOriginal:0}),await o.translate({story:s,user:i})},this.showOriginal=t=>{t.preventDefault(),t.stopPropagation(),this.setState({showOriginal:1})},this.getTranslation=()=>{const{story:t}=this.props,{userStore:e}=this.props.stores,{user:s}=e,{language:a="en"}=s;C.a.getTranslation({object:t,targetLang:a,field:"body"})&&this.setState({showOriginal:0})},this.state={viewImageIdx:{}}}componentWillMount(){this.getTranslation()}render(){const{viewImageIdx:e,showOriginal:s}=this.state,{userStore:a}=this.props.stores,{story:o,likeStory:i,likeRef:l}=this.props,{user:c}=a,{language:n="en"}=c,r=[];if(o.images){const t=Object(b.i)(o.images);r.push(...t)}const d=C.a.getTranslation({object:o,targetLang:n,field:"body"});let m=d||o.body;return s&&(m=o.body),Object(h.h)(t,null,Object(h.h)("div",{class:"container-fluid px-0 mt-1"},Object(h.h)("div",{class:"row"},Object(h.h)(w.a,{stores:this.props.stores,images:r,id:o.id,dblClick:i,likeRef:l}))),Object(h.h)("div",{class:"row mt-2"},Object(h.h)("div",{class:"clearfix col-12 overflow-hidden",style:""+(o.offline?"text-decoration: line-through;":"")},Object(h.h)("div",{id:"storyDetail",onClick:this.showStoryDetail,"data-id":o.id},Object(h.h)(g.a,{markdown:C.a.replaceImages(m,o.images,n),markdownOpts:C.a.getMarkdownOptions()}),o.language!==n&&Object(h.h)(t,null,!s&&d?Object(h.h)(t,null,Object(h.h)("button",{type:"button",class:"btn btn-sm btn-link",onClick:this.showOriginal},Object(h.h)("i",{class:"fas fa-cog"}),"  ",Object(h.h)(u.c,{id:"home.translate-show-original"},"Show original"))):Object(h.h)(t,null,Object(h.h)("button",{type:"button",class:"btn btn-sm btn-link",onClick:this.translate},Object(h.h)("i",{class:"fas fa-cog"})," ",Object(h.h)(u.c,{id:"home.translate-to"},"See translation")))))),!!(o.url||o.code||o.price)&&Object(h.h)(t,null,Object(h.h)("div",{class:"clearfix col-12  py-2",style:""+(o.offline?"text-decoration: line-through;":"")},Object(h.h)("div",{class:"row"},o.url&&Object(h.h)(t,null,Object(h.h)("div",{class:"col-12 text-left",style:"font-size: 1.0em;"},Object(h.h)("a",{href:C.a.asUrl(o.url),target:"_blank",rel:"noreferrer"},Object(h.h)("i",{class:"fas fa-link mr-2"}),o.urlText?Object(h.h)(t,null,o.urlText):Object(h.h)(t,null,Object(h.h)(u.c,{id:"story.ad-url-readmore"},"Les mer..."))))))))))}})||n,A=Object(m.a)(r=class extends h.Component{constructor(t){var e;super(t),e=this,this.toggleDate=t=>{t.stopPropagation(),t.preventDefault();const{showDate:e}=this.state;this.setState({showDate:!e})},this.likeStory=async function(){const{story:t}=e.props,{id:s}=t,a=s,{storyStore:o}=e.props.stores,{likeStory:i}=e.state;i[a]=!0;const l=Object.keys(i);e.setState({likeStory:i,likeIds:l}),setTimeout(()=>{const{likeStory:t}=e.state;delete t[a];const s=Object.keys(t);e.setState({likeStory:t,likeIds:s})},1200);await o.likeStory({id:a})},this.toggleAddComment=t=>{const e=t.target.closest("button").dataset.id,{showAddComment:s}=this.state;s[e]?delete s[e]:s[e]=!0,this.setState({showAddComment:s},()=>{this.inputRef[e]&&this.inputRef[e].focus()})},this.closeAllAddComments=()=>{this.setState({showAddComment:{}})},this.toggleShowTeamSetting=t=>{const e=t.target.closest("button").dataset.id,{showTeamSetting:s}=this.state;s[e]?delete s[e]:s[e]=!0,this.setState({showTeamSetting:s})},this.viewImage=t=>{const{id:e,idx:s}=t.target.closest("img").dataset,{viewImageIdx:a}=this.state;a[e]=s,this.setState({viewImageIdx:a})},this.toggleMenu=t=>{const{id:e}=t.target.closest("i").dataset,{showMenu:s={}}=this.state;s[e]=!s[e],this.setState({showDeleteStory:{},showEdit:{},showMenu:s})},this.toggleEdit=t=>{const{id:e}=t.target.closest("button").dataset,{showEdit:s={}}=this.state;s[e]=!s[e],this.setState({showDeleteStory:{},showEdit:s,showMenu:{}})},this.toggleDeleteStory=t=>{const{id:e}=t.target.closest("button").dataset,{showDeleteStory:s={}}=this.state;s[e]=!s[e],this.setState({showDeleteStory:s,showEdit:{},showMenu:{}})},this.reportStory=async function(t){const{id:s}=t.target.closest("button").dataset,{storyStore:a}=e.props.stores;await a.reportStory({id:s}),e.setState({showEdit:{},showMenu:{}})},this.adminRemoveStory=async function(t){const{id:s}=t.target.closest("button").dataset,{storyStore:a}=e.props.stores;await a.adminHideStory({id:s}),e.setState({showEdit:{},showMenu:{}})},this.deleteStory=async function(t){const{id:s}=t.target.closest("button").dataset,{storyStore:a}=e.props.stores;await a.saveField(parseInt(s,10),"offline",1,!0),a.publicFeedUpdate(parseInt(s,10),"offline",1),e.setState({storyBody:"",showDeleteStory:{},showEdit:{},showMenu:{}})},this.doneEdit=()=>{this.setState({storyBody:"",showDeleteStory:{},showEdit:{},showMenu:{}})},this.showStoryDetail=t=>{if("a"===t.target.localName)return!1;const{id:e}=t.target.closest("#storyDetail").dataset;e&&Object(j.route)("/stories/"+e)},this.shareLink=t=>{const{url:e,title:s,text:a}=t.target.closest("button").dataset,{appState:o}=this.props.stores;o.shareUrl({url:e,title:s,text:a})},this.state=function(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?a(Object(s),!0).forEach((function(e){o(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):a(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}({},I),this.inputRef={}}async loadStoriesPublicFeed(t=this.props){const{hashtag:e}=t,{storyStore:s}=t.stores;await s.loadPublicFeed({hashtag:e})}render(){const{showAddComment:e,showDate:s,showMenu:a={},showEdit:o={},showDeleteStory:i={},showTeamSetting:l,likeStory:c,likeIds:n}=this.state,{story:r,showAllComments:m,onTeamClick:b=(()=>{}),onUserClick:p=(()=>{})}=this.props,{userStore:g,storyStore:O,appState:j}=this.props.stores,{user:v={},isAdmin:w}=g,{hasShareApi:I}=j,A=O.findPublicTeam(r.team)||{},P=O.findPublicUser(r.user)||{},E=C.a.getImage({user:P,team:A,priority:"user",object:r}),U=!(!A||!A.members)&&A.members.some(t=>t===v.id);let z,F,N,M;A&&A.name?(z=C.a.displayNameShort(A),F=C.a.displayName(A),N=C.a.displayName(P),P.settings&&v.uuidv4!==P.uuidv4&&(M=P.settings.hideProfile?null:"/inbox/"+P.uuidv4)):P&&P.id&&(z=C.a.displayNameShort(P),F=C.a.displayName(P));const{likes:$,comments:B,reports:W=[]}=r,K=r.likes&&r.likes.findIndex(t=>t.user===v.id)>-1,V=A.followers?A.followers.length:0,q=A.members&&A.members.indexOf(v.id)>-1,Y=A.followers&&A.followers.indexOf(v.id)>-1,J=A.followRequests&&A.followRequests.findIndex(t=>t.id===v.id)>-1,{currentLocationGeocode:H={},yrWeather:Z=[]}=r,G=C.a.getViews(r.statistics),_=C.a.getAdminData(r.statistics);return Object(h.h)(t,null,w||v.id===P.id?Object(h.h)(t,null,Object(h.h)("span",{class:"float-right font-weight-lighter text-muted"},Object(h.h)("i",{class:"fas fa-ellipsis-h",onClick:this.toggleMenu,"data-id":r.id}))):Object(h.h)(t,null,!q&&!Y&&!J&&A.public>0&&Object(h.h)("span",{class:"float-right"},Object(h.h)(S.a,{stores:this.props.stores,team:A,buttonOnly:!0,simple:!0,classNames:"btn btn-link text-primary"}))),a[r.id]&&Object(h.h)(t,null,Object(h.h)("div",{class:"position-absolute bg-light p-2 border rounded rounded-lg shadow-sm",style:"top: 30px; right: 10px; width: 60%; z-index: 999999;"},v.id===P.id?Object(h.h)(t,null,Object(h.h)("button",{class:"btn btn-link btn-block text-left",onClick:this.toggleEdit,"data-id":r.id},Object(h.h)("i",{class:"fas fa-edit"})," Edit"),Object(h.h)("hr",null),Object(h.h)("button",{class:"btn btn-link btn-block text-left text-danger",onClick:this.toggleDeleteStory,"data-id":r.id},Object(h.h)("i",{class:"fas fa-trash-alt"})," Delete")):Object(h.h)(t,null,Object(h.h)("button",{class:"btn btn-link btn-block text-left",onClick:this.reportStory,"data-id":r.id},Object(h.h)("i",{class:"fas fa-flag"})," Report"),w&&Object(h.h)(t,null,Object(h.h)("hr",null),Object(h.h)("button",{class:"btn btn-link btn-block text-left text-danger",onClick:this.adminRemoveStory,"data-id":r.id},Object(h.h)("i",{class:"fas fa-eraser"})," Remove from feed"))))),Object(h.h)("div",{class:"d-flex position-relative"},Object(h.h)("div",{class:"position-relative text-center border rounded-circle imageRounded imageRoundedMedium",style:E?`background-image: url("${E}"); background-size: cover;`:""},!E&&Object(h.h)("div",{class:"text-muted",style:"font-size: 20px; padding-top: 3px;"},z)),Object(h.h)("div",{class:"flex-grow-1 pl-3 text-overflow",style:"line-height: 1.2em;"},Object(h.h)("h5",{class:"mb-1 position-relative",style:"line-height: 1.0em; "+(r.offline?"text-decoration: line-through;":"")},A.public?Object(h.h)(t,null,Object(h.h)("a",{href:"/teams/public/"+A.uuidv4,onClick:t=>b(t,A.uuidv4),class:"stretched-link"},F)):Object(h.h)(t,null,F),q&&!A.public&&Object(h.h)("button",{type:"button",class:"btn btn-sm btn-link text-muted","data-id":r.id,onClick:this.toggleShowTeamSetting},Object(h.h)("i",{class:"fas fa-exclamation-triangle"}))),Object(h.h)("div",{class:"mb-2",style:""+(r.offline?"text-decoration: line-through;":"")},r.pinned&&Object(h.h)(t,null,Object(h.h)("small",{class:"text-muted mr-2"},Object(h.h)("i",{class:"fas fa-thumbtack"}))),2===r.type?Object(h.h)(t,null,Object(h.h)("small",{class:"text-muted"},Object(h.h)(u.c,{id:"story.sponsored"},"Sponsored")," -")):Object(h.h)(t,null,r.date&&Object(h.h)("small",{class:"text-muted",onClick:this.toggleDate},s?d.a.formatDate(r.date,{locale:"no-NB",hour12:!1,hour:"2-digit",minute:"2-digit"}):d.a.formatDistance(r.date,new Date,{locale:"no-NB"}))),1===r.public?Object(h.h)(t,null,Object(h.h)("small",{class:"ml-2 text-muted"},Object(h.h)("i",{class:"fas fa-globe-europe"}))):Object(h.h)(t,null,Object(h.h)("small",{class:"ml-2 text-muted"},Object(h.h)("i",{class:"fas fa-users"})," (",d.a.format(V),")")),N&&Object(h.h)(t,null,Object(h.h)("small",{class:"ml-2 text-muted"},M?Object(h.h)(t,null,Object(h.h)("i",{class:"fas fa-user"})," ",Object(h.h)("a",{href:M},N)):Object(h.h)(t,null,Object(h.h)("i",{class:"fas fa-user"})," ",N))),H&&H.formattedCounty&&Object(h.h)(t,null,Object(h.h)("small",{class:"ml-2 text-muted"},Object(h.h)("i",{class:"fas fa-map-marker-alt"})," ",H.formattedCounty))),w&&Object(h.h)("div",{class:"d-flex flex-row flex-nowrap bg-light border-top border-bottom py-2",style:"overflow: auto;"},Object(h.h)("small",{class:"text-muted mr-2"},"Adm:"),W&&W.length>0&&Object(h.h)(t,null,Object(h.h)("small",{class:"text-danger mr-2"},Object(h.h)("i",{class:"fas fa-flag"})," ",W.length)),H&&H.formatted_address&&Object(h.h)(t,null,Object(h.h)("small",{class:"text-muted"},Object(h.h)("i",{class:"fas fa-map-marker-alt"})," ",H.formatted_address)),P.deviceInfo&&Object(h.h)(t,null,Object(h.h)("span",{class:"badge badge-secondary ml-2 float-right font-weight-light"},["platform","manufacturer","model"].map(e=>Object(h.h)(t,null,Object(h.h)("span",{class:"ml-2 text-white"},P.deviceInfo[e]))))),_&&Object(h.h)(t,null,Object(h.h)("small",{class:"ml-2 text-muted"},"V: ",_.count),Object(h.h)("small",{class:"ml-2 text-muted"},"R: ",_.ranking," ",d.a.isNumber(_.rankingTrend)&&Object(h.h)(t,null,Object(h.h)("i",{class:C.a.getClassForTrend(_.rankingTrend)}))),Object(h.h)("small",{class:"ml-2 text-muted"},"D: ",d.a.format(_.durationAvg/1e3,1),"s ",d.a.isNumber(_.durationAvgTrend)&&Object(h.h)(t,null,Object(h.h)("i",{class:C.a.getClassForTrend(_.durationAvgTrend)}))),r.statisticsCurrent&&r.statisticsCurrent.totalInteractions>0&&Object(h.h)("small",{class:"ml-2 text-muted"},"S: ",d.a.format(r.statisticsCurrent.totalInteractions,0)),r.shadowTags&&r.shadowTags.map(e=>Object(h.h)(t,null,Object(h.h)("span",{class:"badge badge-secondary ml-2 float-right font-weight-light"},e))))))),Object(h.h)("div",{class:"row mt-2"},Object(h.h)("div",{class:"clearfix col-12",style:""+(r.offline?"text-decoration: line-through;":"")},o[r.id]&&Object(h.h)(t,null,Object(h.h)(D,{stores:this.props.stores,story:r,key:"story-edit-"+r.id,callback:this.doneEdit})),i[r.id]&&Object(h.h)("div",{class:"clearfix mt-3 mb-3"},Object(h.h)("button",{class:"btn btn-danger float-left",onClick:this.deleteStory,"data-id":r.id},Object(h.h)("i",{class:"fas fa-trash-alt"})," Delete"),Object(h.h)("button",{class:"btn btn-secondary float-right",onClick:this.toggleDeleteStory,"data-id":r.id},Object(h.h)("i",{class:"fas fa-times-circle"})," Cancel")))),(!r.type||1==r.type)&&Object(h.h)(T,{stores:this.props.stores,story:r,key:"story-regular-view-"+r.id,likeStory:this.likeStory,likeRef:c,keys:n}),2==r.type&&Object(h.h)(R,{stores:this.props.stores,story:r,key:"story-ad-view-"+r.id,likeStory:this.likeStory,likeRef:c,keys:n}),3==r.type&&Object(h.h)(L,{stores:this.props.stores,story:r,key:"story-article-view-"+r.id,likeStory:this.likeStory,likeRef:c,keys:n}),Object(h.h)("div",{class:"d-flex justify-content-between mt-2"},Object(h.h)("div",{class:"mr-2"},Object(h.h)(k.a,{stores:this.props.stores,likes:$,comments:B,type:"story",onTeamClick:b,onUserClick:p})),G>0&&Object(h.h)(t,null,Object(h.h)("div",null,Object(h.h)(x.a,{stores:this.props.stores,views:G,object:r,type:"story",isTeamAdmin:U,isAdmin:w,onTeamClick:b,onUserClick:p})))),l[r.id]&&Object(h.h)(t,null,Object(h.h)("small",null,Object(h.h)("div",{class:"alert alert-info",role:"alert"},Object(h.h)("span",{class:"display-4 float-left"},Object(h.h)("i",{class:"fas fa-exclamation-triangle mr-3 mb-3"})),Object(h.h)("p",null,Object(h.h)(u.c,{id:"story.alert-text-1"},"Your team is not visible and it's not possible to request friendship with your team.")),Object(h.h)("p",null,Object(h.h)(u.c,{id:"story.alert-text-2"},"If you want to make your team visible so other can request to follow your team, you can find the setting here:")),Object(h.h)("p",null,Object(h.h)("a",{href:"/teams/edit/"+A.id},Object(h.h)(u.c,{id:"story.alert-text-3"},"Edit team")))))),Object(h.h)("div",null,Object(h.h)("div",{class:"row"},Object(h.h)("div",{class:"col text-center"},Object(h.h)("button",{type:"button",class:`storyImage btn btn-sm btn-outline-${K?"primary":"secondary"} btn-lg btn-block ${K?"text-primary":""} text-overflow`,"data-id":r.id,onClick:this.likeStory},Object(h.h)("i",{class:(K?"text-primary fas":"far")+" fa-thumbs-up"})," ",K?Object(h.h)(u.c,{id:"comments.has-liked"},"Liked"):Object(h.h)(u.c,{id:"comments.like"},"Lik"))),Object(h.h)("div",{class:"col text-center"},Object(h.h)("button",{type:"button",class:"btn btn-sm btn-outline-secondary btn-lg btn-block text-overflow","data-id":r.id,onClick:this.toggleAddComment},Object(h.h)("i",{class:"fas fa-comment"})," ",Object(h.h)(u.c,{id:"comments.comment-add"},"Kommentar"))),I?Object(h.h)(t,null,Object(h.h)("div",{class:"col text-center"},Object(h.h)("button",{class:"btn btn-sm btn-outline-secondary btn-lg btn-block text-overflow",onClick:this.shareLink,"data-url":"https://themusher.app/share/story/"+r.uuidv4,"data-title":"title: "+r.title},Object(h.h)("i",{class:"fas fa-share"})," ",Object(h.h)(u.c,{id:"story.share"},"Del")))):Object(h.h)(t,null,Object(h.h)("div",{class:"col text-center"},Object(h.h)("a",{class:"btn btn-sm btn-outline-secondary btn-lg btn-block text-overflow",href:"https://themusher.app/share/story/"+r.uuidv4,target:"_blank",rel:"noreferrer","data-native":!0},Object(h.h)("i",{class:"fas fa-share"})," ",Object(h.h)(u.c,{id:"story.share"},"Del")))))),Object(h.h)("div",{class:"mt-2"},Object(h.h)(f.a,{stores:this.props.stores,story:r,col:"10",offset:"2",compact:!1,showAllComments:m,initCall:this.closeAllAddComments}),e[r.id]&&Object(h.h)(y.a,{stores:this.props.stores,story:r,inputRef:t=>this.inputRef[r.id]=t,inputRefObject:this.inputRef,col:"10",offset:"2",key:"story-comment-"+r.id})))}})||r;e.a=A}).call(this,s("hosL").Fragment)},P9Fo:function(t,e,s){"use strict";(function(t){var a,o=s("hosL"),i=s("Utv1"),l=s("/eY4"),c=(s("cneo"),s("OhSV")),n=(s("fh8t"),s("go65"),s("ZOvn"));let r=Object(l.a)(a=class extends o.Component{constructor(t){var e;super(t),e=this,this.pollStory=async function(t){const{storyId:s}=e.props,{storyStore:a}=e.props.stores,{line:o}=t.target.dataset;await a.pollStory({id:s,line:o})},this.toggleResult=()=>{const{viewResult:t}=this.state;this.setState({viewResult:!t})},this.state={},this.inputRef={}}render(){const{viewResult:e}=this.state,{story:s,opts:a,content:l}=this.props,{userStore:r}=this.props.stores,{user:h}=r,{language:d="en"}=h,m=l.split("\n").map(t=>t.trim().replace(/^\-\s*/g,"")),b=s.polls&&s.polls.findIndex(t=>t.user===h.id)>-1,u=s.polls?s.polls.length:0;let p=0;m.forEach(t=>{const e=100*(s.polls?s.polls.filter(e=>e.line===n.a.md5(t)).length/u:0);e>p&&(p=e)});const g=a.days?parseInt(a.days,10):7,O=i.a.addDays(s.date,g),j=O<new Date;return Object(o.h)(t,null,Object(o.h)("div",{class:"w-100 my-4"},j||b||e?Object(o.h)(t,null,m&&m.map(e=>{const a=s.polls&&s.polls.findIndex(t=>t.user===h.id&&t.line===n.a.md5(e))>-1,l=(s.polls?s.polls.filter(t=>t.line===n.a.md5(e)).length:0)/u*100;return Object(o.h)(t,null,Object(o.h)("div",{class:"progress position-relative my-2 ",style:"height: 1.5em; font-size: 1.3em;"},Object(o.h)("span",{class:"position-absolute",style:"right: 10px;"}," ",i.a.format(l||0,1),"%"),Object(o.h)("span",{class:"position-absolute",style:"left: 10px;"}," ",a&&Object(o.h)("i",{class:"fas fa-check-circle"})," ",e),Object(o.h)("div",{class:"progress-bar "+(p===l?"bg-primary":"bg-secondary"),role:"progressbar",style:`width: ${l}%;`,"aria-valuenow":l,"aria-valuemin":"0","aria-valuemax":"100"})))}),Object(o.h)("div",{class:"w-100 mt-3 text-muted d-flex justify-content-start"},Object(o.h)("div",null,i.a.format(u,0)," ",1===u?Object(o.h)(c.c,{id:"story.poll"},"vote"):Object(o.h)(c.c,{id:"story.polls"},"votes")),j?Object(o.h)(t,null,Object(o.h)("div",{class:"ml-2"},"- ",Object(o.h)(c.c,{id:"story.finished"},"Finished"))):Object(o.h)(t,null,Object(o.h)("div",{class:"ml-2"},"- ",i.a.formatDistance(O,new Date,{},{extended:!0})," ",Object(o.h)(c.c,{id:"story.left"},"left")),!b&&Object(o.h)("div",{class:"ml-2",onClick:this.toggleResult},"- ",Object(o.h)(c.c,{id:"story.view-vote"},"View vote"))))):Object(o.h)(t,null,m&&m.map(e=>Object(o.h)(t,null,Object(o.h)("button",{class:"btn btn-block btn-outline-primary rounded-pill",onClick:this.pollStory,"data-line":n.a.md5(e)},e))),Object(o.h)("div",{class:"w-100 mt-3 text-muted d-flex justify-content-start"},Object(o.h)("div",null,i.a.format(u,0)," ",1===u?Object(o.h)(c.c,{id:"story.poll"},"vote"):Object(o.h)(c.c,{id:"story.polls"},"votes")),j?Object(o.h)(t,null,Object(o.h)("div",{class:"ml-2"},"- ",Object(o.h)(c.c,{id:"story.finished"},"Finished"))):Object(o.h)(t,null,Object(o.h)("div",{class:"ml-2"},"- ",i.a.formatDistance(O,new Date,{},{extended:!0})," ",Object(o.h)(c.c,{id:"story.left"},"left"))),Object(o.h)("div",{class:"ml-2",onClick:this.toggleResult},"- ",Object(o.h)(c.c,{id:"story.view-results"},"View results"))))))}})||a;e.a=r}).call(this,s("hosL").Fragment)},UJvz:function(t,e,s){"use strict";var a,o=s("hosL"),i=s("Utv1"),l=s("/eY4"),c=s("OhSV");let n=Object(l.a)(a=class extends o.Component{constructor(...t){super(...t),this.toggleDate=()=>{const{showDate:t}=this.state;this.setState({showDate:!t})},this.touchStart=t=>{t.stopPropagation(),this.setState({startY:t.touches[0].pageY})},this.touchEnd=t=>{t.stopPropagation(),this.setState({startY:void 0,readyToRefresh:!1})},this.touchMove=t=>{t.stopPropagation();const{close:e}=this.props,{startY:s,refreshing:a}=this.state,o=t.touches[0].pageY;if(this.appContainer){const{scrollTop:t}=this.appContainer;0===t&&o>s+30&&!a&&e()}}}render(){const{showDate:t}=this.state,{image:e,imagexxl:s,close:a,thumb:l,name:n,title:r,date:h}=this.props;return Object(o.h)("div",{class:"fixed-top bg-dark text-center pt-2",style:"width: 100vw; height: 100vh;"},Object(o.h)("button",{class:"btn btn-secondary float-right mr-2",onClick:a},"X"),Object(o.h)("div",{class:"d-flex mb-2 px-2"},l&&Object(o.h)("div",{class:"text-center border rounded-circle imageRounded imageRoundedSmall",style:l?`background-image: url("${l}");`:""}," "),Object(o.h)("div",{class:"flex-grow-1 pl-3 pr-2 text-left",style:"line-height: 1.3em;"},n&&Object(o.h)("strong",{class:"mr-2"},n,":"),r,Object(o.h)("br",null),Object(o.h)("small",{class:"text-muted"},h&&Object(o.h)("small",{onClick:this.toggleDate},t?i.a.formatDate(h,{locale:"no-NB"}):i.a.formatDistance(h,new Date,{locale:"no-NB"}))))),Object(o.h)("img",{src:e,class:"img-fluid align-middle mt-2 mb-2",onClick:a,onTouchstart:this.touchStart,onTouchend:this.touchEnd,onTouchmove:this.touchMove,ref:t=>this.appContainer=t}),Object(o.h)("a",{target:"_blank",rel:"noopener noreferrer",href:s||e,download:s||e},Object(o.h)("i",{class:"fas fa-download"})," ",Object(o.h)(c.c,{id:"modal.download"},"Last ned bildet")))}})||a;e.a=n},ZQlJ:function(t,e,s){"use strict";var a,o=s("hosL"),i=(s("Utv1"),s("/eY4")),l=(s("OhSV"),s("NDEG"));let c=Object(i.a)(a=class extends o.Component{constructor(t){super(t),this.scrollImages=t=>{const{scrollLeft:e,clientWidth:s}=t.target,a=e/s,o=Math.round(a),i=Math.abs(o-a);(Number.isInteger(a)||i<.1)&&this.setState({imageIdx:o})},this.sortByName=(t,e)=>{const{allDogs:s=[]}=this.props,a=s.find(e=>e.id===t),o=s.find(t=>t.id===e);return a&&o&&a.name>o.name?1:-1},this.state={imageIdx:0}}render(){const{dogs:t,allDogs:e=[],size:s="medium",onDogClick:a=(()=>{})}=this.props;return Object(o.h)("div",{class:"w-100"},Object(o.h)("div",{class:"d-flex flex-row flex-nowrap no-scrollbar",style:"overflow: auto; scroll-snap-type: x mandatory;",onScroll:this.scrollImages},t&&t.sort(this.sortByName).map(i=>{const c=e.find(t=>t.id===i);return c?Object(o.h)("div",{class:"col clearfix position-relative p-0 mx-2"},Object(o.h)("div",{class:"w-100 h-100 text-center rounded-lg imageContainer d-flex justify-content-center align-items-center",style:"\n                                        flex-wrap: wrap;\n                                        overflow-y: hidden;\n                                    ",onTouchstart:t=>{t.stopPropagation()},onTouchend:t=>{t.stopPropagation()},onTouchmove:t=>{t.stopPropagation()}},Object(o.h)(l.a,{stores:this.props.stores,dog:c,dogs:e.filter(e=>t.indexOf(e.id)>-1).sort((t,e)=>t.name>e.name?1:-1),className:"mx-auto",showName:!0,showPosition:!1,size:s,onDogClick:a}))):""})))}})||a;e.a=c},bMs3:function(t,e,s){"use strict";var a,o=s("hosL"),i=s("Utv1"),l=s("/eY4"),c=s("OhSV"),n=s("nHdA"),r=s("irB3"),h=(s("UwwE"),s("8Lgr")),d=(s("QkTp"),s("ZOvn"));let m=Object(l.a)(a=class extends o.Component{constructor(...t){super(...t),this.requestFollowTeam=t=>{t.preventDefault(),t.stopPropagation();const{teamStore:e,userStore:s}=this.props.stores,{user:a}=s,o=parseInt(t.target.parentElement.dataset.team||t.target.dataset.team,10);e.followRequest(o,a),this.setState({requestSent:!0})},this.getButton=(t="")=>{const{requestSent:e}=this.state,{userStore:s}=this.props.stores,{user:a}=s,{team:i,skipHome:l}=this.props,n=i.members&&i.members.indexOf(a.id)>-1,r=i.followers&&i.followers.indexOf(a.id)>-1,h=i.blockedFollowers&&i.blockedFollowers.indexOf(a.id)>-1,d=e||i.followRequests&&i.followRequests.findIndex(t=>t.id===a.id)>-1;return n?l?"":Object(o.h)("i",{class:"fas fa-home"}):r?Object(o.h)("button",{type:"button",class:"btn btn-sm btn-outline-secondary float-right",onClick:this.unFollowTeam,disabled:"true","data-team":i.id},Object(o.h)("i",{class:"fas fa-link mr-2"}),Object(o.h)(c.c,{id:"teams.connect.is-following"},"Følger")," ",t):h?"":d?Object(o.h)("button",{type:"button",class:"btn btn-sm btn-outline-secondary float-right",disabled:"true"},Object(o.h)("i",{class:"fas fa-hourglass-half mr-2"}),Object(o.h)(c.c,{id:"teams.connect.has-requested"},"Venter på godkjenning")," ",t):i.public?Object(o.h)("button",{type:"button",class:"btn btn-sm btn-outline-success float-right",onClick:this.requestFollowTeam,"data-team":i.id},Object(o.h)("i",{class:"far fa-hand-point-right mr-2"}),Object(o.h)(c.c,{id:"teams.connect.follow"},"Følg")," ",t):void 0}}render(){const{team:t,showButton:e,publicUsers:s=[],showLocation:a,showMembers:l}=this.props,{teamStore:c,userStore:m}=this.props.stores,b=(new Date).getMonth()+1,u=(new Date).getFullYear(),{month:p=b,year:g=u}=this.props,O=parseInt(p<8?g-1:g,10),j=c.findWorkoutSummary(t.id,O)||{},{user:f}=m,{language:y="en"}=f,v=m.findTeamAmbition({ambition:t.ambitions,language:y}),w=m.findTeamType({type:t.type,language:y}),k=s.find(e=>e.id===t.user),x=d.a.displayName(k),S=d.a.getImage({user:k,team:t,priority:"user"}),{url:C="/teams/"+t.id}=this.props;return Object(o.h)("div",{class:"w-100 mb-3"},Object(o.h)("div",{class:"row"},Object(o.h)("div",{class:"col-12 col-sm-8 col-lg-6 offset-sm-2 offset-lg-3 d-flex mb-0 position-relative"},Object(o.h)("div",{class:"position-relative d-flex flex-grow-1"},Object(o.h)("div",{class:"text-center border rounded-circle imageRounded",style:S?`background-image: url("${S}"); background-size: cover;`:""},!S&&Object(o.h)("i",{class:"fas fa-users text-muted mt-3",style:"font-size: 40px;"})),Object(o.h)("div",{class:"flex-grow-1 pl-3",style:"line-height: 1.2em;"},Object(o.h)("a",{class:"stretched-link",href:C},Object(o.h)("h5",{class:"mb-1",style:"line-height: 1.0em;"},t.name)),a&&Object(o.h)("div",null,(t.place||t.country)&&Object(o.h)("span",{class:"mr-3"},Object(o.h)("i",{class:"fas fa-map-marker-alt"}),"  ",t.place," ",t.place?", "+t.country:t.country)),l&&Object(o.h)("div",null,k&&Object(o.h)("span",{class:"mr-2"},Object(o.h)("i",{class:"fas fa-user"})," ",x)),Object(o.h)("div",null,w&&Object(o.h)("span",{class:"badge badge-pill badge-secondary"},w),v&&Object(o.h)("span",{class:"badge badge-pill badge-secondary ml-2"},v)),Object(o.h)("small",{class:"text-muted"},t&&t.dogs&&Object(o.h)("span",{class:""},Object(o.h)("i",{class:"fas fa-dog"})," ",t.dogs.length),t&&t.members&&Object(o.h)("span",{class:"ml-2"},Object(o.h)("i",{class:"fas fa-user"})," ",t.members.length),j&&j.distanceKm>0&&Object(o.h)("span",{class:"ml-2"},Object(o.h)("i",{class:"fas fa-road"})," ",Object(o.h)(h.a,{stores:this.props.stores,value:j.distanceKm})),j&&j.elevation>0&&Object(o.h)("span",{class:"ml-2"},Object(o.h)("i",{class:"fas fa-mountain"})," ",Object(o.h)(r.a,{stores:this.props.stores,value:j.elevation})),j&&j.duration>0&&Object(o.h)("span",{class:"ml-2"},Object(o.h)("i",{class:"fas fa-clock"})," ",i.a.secToHms(j.duration)),j&&j.speedAvg>0&&Object(o.h)("span",{class:"ml-2"},Object(o.h)("i",{class:"fas fa-tachometer-alt"})," ",Object(o.h)(n.a,{stores:this.props.stores,value:j.speedAvg}))))),e&&Object(o.h)("div",null,this.getButton()))))}})||a;e.a=m},ePpR:function(t,e,s){"use strict";(function(t){var a,o=s("hosL"),i=s("Utv1"),l=s("/eY4"),c=s("OhSV"),n=s("go65"),r=s("om2D"),h=s("ZOvn");let d=Object(l.a)(a=class extends o.Component{constructor(t){var e;super(t),e=this,this.commentTrack=async function(){const{callback:t=(()=>{}),inputRefObject:s={}}=e.props,{track:a}=e.props,{trackStore:o}=e.props.stores,{comment:i,showAddImage:l}=e.state,c=await o.commentTrack({id:a.id,comment:i});c&&200===c.status&&(e.setState({comment:{body:"",images:[]}},()=>{h.a.resizeTextarea(s[a.id]),l&&e.addImage()}),t({track:a,response:c}))},this.addImages=({value:t})=>{const{comment:e}=this.state;e.images.push(...t),this.setState({comment:e})},this.addImage=()=>{const{showAddImage:t=!1}=this.state;this.setState({showAddImage:!t})},this.handleImageErrored=t=>{const e=t.target;e.onerror=null,setTimeout(()=>{e.src+="?"+new Date},1e3)},this.state={comment:{body:"",images:[]},showAddImage:!1},this.inputRef={}}render(){const{inputRef:e,track:s}=this.props,{comment:a,showAddImage:l}=this.state,{userStore:h}=this.props.stores,{user:d={}}=h,m=d.firstname?`${i.a.ucfirst(d.firstname,!0)}${i.a.ucfirst(d.lastname,!0)}`:""+i.a.ucfirst(d.email||"",!0),b=d.image||(d.images?d.images[0]:void 0);return Object(o.h)("div",{class:"col-12 col-sm-8 col-lg-6 offset-sm-2 offset-lg-3 mb-3 position-relative"},Object(o.h)("div",{class:"d-flex mb-0 position-relative w-100"},Object(o.h)("div",{class:"text-center border rounded-circle imageRounded imageRoundedSmall",style:(b?`background-image: url('${b.s3SmallLink}'); background-size: cover;`:"")+" border-width: 3px !important;"},!b&&Object(o.h)("span",{class:"font-weight-lighter",style:"font-size: 15px;"},m)),Object(o.h)("div",{class:"col pl-3",style:"line-height: 1.2em;"},Object(o.h)("div",{class:"d-flex bd-highlight"},Object(o.h)("div",{class:"p-0 w-100 bd-highlight"},Object(o.h)("label",{class:"sr-only",for:"inlineFormInput"},Object(o.h)(c.c,{id:"comments.comment"},"Kommentar")),Object(o.h)("div",{class:"border rounded rounded-lg position-relative"},Object(o.h)(c.b,null,Object(o.h)("input",{class:"form-control-plaintext px-2",type:"text",placeholder:Object(o.h)(c.c,{id:"comments.write-comment"},"Skriv en kommentar..."),onInput:Object(n.a)(this,"comment.body"),value:a.body,ref:e})),Object(o.h)("div",{class:"position-absolute",style:"top: 8px; right: 10px; font-size: 1.2em;"},Object(o.h)("i",{class:"fas fa-image pointerCursor","data-id":s.id,onClick:this.addImage})))),Object(o.h)("div",{class:"p-0 pl-2 flex-shrink-1 bd-highlight"},Object(o.h)("button",{type:"button",class:"btn btn-primary mb-2",onClick:this.commentTrack},Object(o.h)("i",{class:"fas fa-paper-plane"})))))),l&&Object(o.h)(t,null,Object(o.h)("div",{class:"col-12 text-center"},Object(o.h)("div",{class:"container-fluid"},Object(o.h)("div",{class:"row"},i.a.isArray(a.images)&&a.images.map(t=>Object(o.h)("div",{class:"col-3 p-1"},Object(o.h)("img",{src:t.s3SmallLink,class:"img-fluid",onError:this.handleImageErrored}),Object(o.h)("button",{class:"btn btn-sm btn-link",onClick:this.removeImage,"data-name":t.name},Object(o.h)("i",{class:"fas fa-trash"})," Del"))))),Object(o.h)(r.a,{object:a,updateField:this.addImages,autoOpen:!0}))))}})||a;e.a=d}).call(this,s("hosL").Fragment)},lcEk:function(t,e,s){"use strict";(function(t){function a(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,a)}return s}function o(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}var i,l=s("hosL"),c=s("Utv1"),n=s("/eY4"),r=s("cneo"),h=s("OhSV"),d=s("fh8t"),m=s.n(d),b=s("K5BL"),u=(s("ETxl"),s("ZOvn"));const p={showAddComment:{},showAllComments:!1,showAllReplies:{},viewImageIdx:{},likeComment:{},likeReply:{}};let g=Object(n.a)(i=class extends l.Component{constructor(t){var e;super(t),e=this,this.likeComment=async function(t){const{callback:s=(()=>{})}=e.props,a=t.target.parentElement.dataset.id||t.target.dataset.id,{track:o}=e.props,{trackStore:i}=e.props.stores,l=await i.likeTrackComment({id:o.id,commentId:a});return l&&200===l.status&&s({track:o,commentId:a,response:l}),!0},this.likeReply=async function(t){const{callback:s=(()=>{})}=e.props,a=t.target.parentElement.dataset.id||t.target.dataset.id,o=t.target.parentElement.dataset.comment||t.target.dataset.comment,{track:i}=e.props,{trackStore:l}=e.props.stores,c=await l.likeTrackCommentReply({id:i.id,replyId:a,commentId:o});c&&200===c.status&&s({track:i,commentId:o,response:c})},this.replyComment=async function(t){const s=t.target.parentElement.dataset.id||t.target.dataset.id,{showAddComment:a}=e.state;a[s]=!a[s],e.setState({showAddComment:a},()=>{e.inputRef[s]&&e.inputRef[s].focus()})},this.toggleComments=()=>{const{showAllComments:t}=this.state;this.setState({showAllComments:!t})},this.toggleReplies=t=>{const e=t.target.parentElement.dataset.id||t.target.dataset.id,{showAllReplies:s}=this.state;s[e]=!s[e],this.setState({showAllReplies:s})},this.state=function(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?a(Object(s),!0).forEach((function(e){o(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):a(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}({},p),this.inputRef={}}render(){const{showAddComment:e,showAllComments:s,showAllReplies:a,viewImageIdx:o,likeComment:i}=this.state,{track:n,callback:d=(()=>{}),col:p=12,offset:g=0,compact:O=!1}=this.props,{userStore:j}=this.props.stores,{user:f,language:y="en"}=j;let v=[],w=0,k=0;if(n.comments){if(w=n.comments.length,s)v=n.comments;else{v=n.comments.slice(Math.max(w-(O?0:2),0))}k=v.length}return Object(l.h)("div",{class:`col-${p} offset-${g} col-sm-8 col-lg-6 offset-sm-2 offset-lg-3`},s&&Object(l.h)("div",null,Object(l.h)("button",{class:"btn btn-sm btn-link py-0 mb-2",onClick:this.toggleComments},Object(l.h)(h.c,{id:"comments.hide-all-comments"},"Skjul alle kommentarene."))),n&&v&&v.reverse().map(s=>{const{user:p={}}=s,g=p.firstname?`${c.a.ucfirst(p.firstname,!0)}${c.a.ucfirst(p.lastname,!0)}`:""+c.a.ucfirst(p.email||"",!0),O=p.firstname?`${p.firstname} ${p.lastname}`:""+p.email,j=p.image||(p.images?p.images[0]:void 0),v=s.likes&&s.likes.findIndex(t=>t.user===f.id)>-1;let w=[],k=0,x=0;s.comments&&(k=s.comments.length,w=a[s.id]?s.comments:s.comments.slice(0,void 0),x=w.length);const S=[];if(s.images){const t=Object(r.i)(s.images);S.push(...t)}const C=o[s.id]?o[s.id]:0,I=S&&S[C]?S[C]:null,{currentLocationGeocode:D={}}=s;return Object(l.h)("div",{class:"row"},Object(l.h)("div",{class:"col-12 d-flex mb-2 position-relative"},Object(l.h)("div",{class:"text-center border rounded-circle imageRounded imageRoundedSmall",style:(j?`background-image: url("${j.s3SmallLink}"); background-size: cover;`:"")+" border-width: 3px !important;"},!p.image&&Object(l.h)("span",{class:"font-weight-lighter",style:"font-size: 15px;"},g)),Object(l.h)("div",{class:"flex-grow-1 pl-3 pt-0",style:"line-height: 1.2em;"},Object(l.h)("div",{class:"bg-light p-2 rounded-lg"},Object(l.h)("h5",{class:"font-weight-bold mb-0",style:"font-size: 1.0em;"},O),Object(l.h)(m.a,{markdown:u.a.replaceImages(s.comment,s.images,y),markdownOpts:u.a.getMarkdownOptions()})),Object(l.h)("div",null,Object(l.h)("div",{class:"container-fluid px-3 mt-1"},I&&Object(l.h)("div",{class:"clearfix row position-relative"},Object(l.h)("div",{class:"commentContainer col-12 px-0 overflow-hidden",style:"max-height: 60vh;",onDblclick:this.addLikeComment,"data-id":s.id},Object(l.h)("img",{loading:"lazy",class:"img-fluid",style:"min-width: 100px;",src:I.s3LargeLink})),i[s.id]&&Object(l.h)("span",{class:"likeHeart position-absolute text-white display-1",style:"top: calc(50% - 50px); left: calc(50% - 50px); width: 100px; height: 100px;"},Object(l.h)("i",{class:"fas fa-heart likeStory"}))),S&&S.length>1&&Object(l.h)("div",{class:"clearfix d-flex flex-wrap row"},c.a.isArray(S)&&S.map((e,a)=>Object(l.h)(t,null,Object(l.h)("div",{class:"col px-0 overflow-hidden",style:"max-height: 100px; min-width: 100px;"},Object(l.h)("img",{loading:"lazy",class:"img-fluid border",style:"min-width: 100px;",src:e.s3SmallLink,onClick:this.viewImage,"data-id":s.id,"data-idx":a}))))))),Object(l.h)("small",null,Object(l.h)("button",{class:"btn btn-sm btn-link py-0 "+(v?"text-primary":""),onClick:this.likeComment,"data-id":s.id},Object(l.h)(h.c,{id:"comments.like"},"Lik")),"-",Object(l.h)("button",{class:"btn btn-sm btn-link py-0",onClick:this.replyComment,"data-id":s.id},Object(l.h)(h.c,{id:"comments.comment-add"},"Kommentar")),"-",Object(l.h)("button",{class:"btn btn-sm btn-link py-0 disabled"},c.a.formatDistance(s.createdDate,new Date,{locale:"no-NB"})))),s.likes&&s.likes.length>0&&Object(l.h)("small",{class:"position-absolute bg-light shadow-sm rounded-lg py-0 px-1",style:"bottom: 20px; right: 15px;"},Object(l.h)("i",{class:"fas fa-thumbs-up text-primary"})," ",s.likes.length)),Object(l.h)("div",{class:"col-11 offset-1 mb-2"},s&&w&&w.map(t=>{const{user:e={}}=t,a=e.firstname?`${c.a.ucfirst(e.firstname,!0)}${c.a.ucfirst(e.lastname,!0)}`:""+c.a.ucfirst(e.email||"",!0),o=e.firstname?`${e.firstname} ${e.lastname}`:""+e.email,i=e.image||(e.images?e.images[0]:void 0),n=t.likes&&t.likes.findIndex(t=>t.user===f.id)>-1;return Object(l.h)("div",{class:"row"},Object(l.h)("div",{class:"col-12 d-flex mb-2 position-relative"},Object(l.h)("div",{class:"text-center border rounded-circle imageRounded imageRoundedThumb",style:(i?`background-image: url("${i.s3SmallLink}"); background-size: cover;`:"")+" border-width: 3px !important;"},!e.image&&Object(l.h)("span",{class:"font-weight-lighter",style:"font-size: 15px;"},a)),Object(l.h)("div",{class:"flex-grow-1 pl-3 pt-0",style:"line-height: 1.2em;"},Object(l.h)("div",{class:"bg-light p-2 rounded-lg"},Object(l.h)("h5",{class:"font-weight-bold mb-0",style:"font-size: 1.0em;"},o),t.comment),Object(l.h)("small",null,Object(l.h)("button",{class:"btn btn-sm btn-link py-0 "+(n?"text-primary":""),onClick:this.likeReply,"data-comment":s.id,"data-id":t.id},Object(l.h)(h.c,{id:"comments.like"},"Lik")),"-",Object(l.h)("button",{class:"btn btn-sm btn-link py-0",onClick:this.replyComment,"data-id":s.id},Object(l.h)(h.c,{id:"comments.comment-add"},"Kommentar")),"-",Object(l.h)("button",{class:"btn btn-sm btn-link py-0 disabled"},c.a.formatDistance(t.createdDate,new Date,{locale:"no-NB"})))),t.likes&&Object(l.h)("small",{class:"position-absolute bg-light shadow-sm rounded-lg py-0 px-1",style:"bottom: 20px; right: 15px;"},Object(l.h)("i",{class:"fas fa-thumbs-up text-primary"})," ",t.likes.length)))}),k-x>0&&Object(l.h)("div",null,Object(l.h)("button",{class:"btn btn-sm btn-link py-0",onClick:this.toggleReplies,"data-id":s.id},Object(l.h)(h.c,{id:"comments.show-more",fields:{more:k-x}},"Vis ",k-x," flere kommentarer...")))),e[s.id]&&Object(l.h)("div",{class:"col-11 offset-1 d-flex mb-2 position-relative"},Object(l.h)(b.a,{stores:this.props.stores,track:n,callback:d,commentId:s.id,inputRef:t=>this.inputRef[s.id]=t})))}),w-k>0&&Object(l.h)("div",null,Object(l.h)("button",{class:"btn btn-sm btn-link py-0",onClick:this.toggleComments},Object(l.h)(h.c,{id:"comments.show-more",fields:{more:w-k}},"Vis ",w-k," flere kommentarer..."))),s&&Object(l.h)("div",null,Object(l.h)("button",{class:"btn btn-sm btn-link py-0",onClick:this.toggleComments},Object(l.h)(h.c,{id:"comments.hide-all-comments"},"Skjul alle kommentarene."))))}})||i;e.a=g}).call(this,s("hosL").Fragment)},w8dD:function(t,e,s){"use strict";function a(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,a)}return s}function o(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}var i,l=s("hosL"),c=s("Utv1"),n=s("/eY4"),r=s("UJvz"),h=s("lcEk"),d=s("ePpR"),m=(s("nHdA"),s("irB3")),b=(s("UwwE"),s("8Lgr")),u=(s("QkTp"),s("ZOvn"));const p=u.a.getMaxLoadIndex(),g={showAddComment:!1};let O=Object(n.a)(i=class extends l.Component{constructor(t){var e;super(t),e=this,this.likeTrack=async function(){const{trackStore:t}=e.props.stores,{track:s}=e.props;await t.likeTrack({id:s.id})},this.toggleAddComment=t=>{const e=t.target.parentElement.dataset.id||t.target.dataset.id,{showAddComment:s}=this.state;this.setState({showAddComment:!s},()=>{this.inputRef[e]&&this.inputRef[e].focus()})},this.showModal=t=>{t.stopPropagation(),t.preventDefault();this.setState({displayModal:!0,currentImage:t.target.dataset.image,currentImageXXL:t.target.dataset.imagexxl,thumb:t.target.dataset.thumb,name:t.target.dataset.name,title:t.target.dataset.title,date:t.target.dataset.date})},this.closeModal=()=>{this.setState({displayModal:!1})},this.toggleDate=()=>{const{showDate:t}=this.state;this.setState({showDate:!t})},this.state=function(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?a(Object(s),!0).forEach((function(e){o(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):a(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}({},g),this.updateTimer={},this.inputRef={}}render(){const{displayModal:t,currentImage:e,currentImageXXL:s,showDate:a,thumb:o,name:i,title:n,date:g,showAddComment:O}=this.state,{track:j,showUser:f=!1,isPublic:y=!1}=this.props,v=j.image&&j.image.s3SmallLink?j.image:null,{gpxInfo:w={}}=j,{loadIndex:k=0}=w,{userStore:x}=this.props.stores,{user:S}=x,{likes:C=[],comments:I=[]}=j,D=j.likes&&j.likes.findIndex(t=>t.user===S.id)>-1;return Object(l.h)("div",{class:"w-100 mb-3"},Object(l.h)("div",{class:"row"},t&&Object(l.h)(r.a,{close:this.closeModal,image:e,imagexxl:s,thumb:o,name:i,title:n,date:g}),Object(l.h)("div",{class:"col-12 col-sm-8 col-lg-6 offset-sm-2 offset-lg-3 d-flex mb-0 position-relative"},Object(l.h)("div",{class:"text-center border rounded-circle imageRounded",style:v?`background-image: url("${v.s3SmallLink}");`:""},!v&&Object(l.h)("i",{class:"fas fa-map-marked text-muted mt-3",style:"font-size: 40px;"})),Object(l.h)("div",{class:"flex-grow-1 pl-3",style:"line-height: 1.2em;"},Object(l.h)("a",{class:"stretched-link",href:`/tracks/${j.id}${y?"/public":""}`},Object(l.h)("h5",{class:"mb-1",style:"line-height: 1.0em;"},j.name),Object(l.h)("div",{class:"text-muted font-weight-lighter"},Object(l.h)("small",null,j.place))),Object(l.h)("div",null,Object(l.h)("small",null,k>0&&Object(l.h)("span",{class:"ml-2 text-"+u.a.getLoadIndexColor(c.a.normalizeBetween(k,0,p,0,100))},Object(l.h)("i",{class:"fas fa-hand-rock mr-1"}),Math.floor(c.a.normalizeBetween(k,0,p,0,100))," - ",u.a.getLoadIndexText(c.a.normalizeBetween(k,0,p,0,100))))),Object(l.h)("div",null,1===j.public&&Object(l.h)("span",{class:"badge badge-success"},"Is public"),f&&Object(l.h)("span",{class:"text-muted font-weight-lighter ml-3"},u.a.displayName(j.users))),Object(l.h)("small",{class:"text-muted"},j.date&&Object(l.h)("small",{onClick:this.toggleDate},a?c.a.formatDate(j.date,{locale:"no-NB"}):c.a.formatDistance(j.date,new Date,{locale:"no-NB"}),Object(l.h)("br",null))),Object(l.h)("small",{class:"text-muted"},j.garminId>0&&Object(l.h)("div",{class:"float-left mr-2 text-center border rounded-circle imageRounded imageRoundedIcon",style:'background-image: url("./assets/garmin-connect.png");'}),j.stravaId>0&&Object(l.h)("div",{class:"float-left mr-2 text-center border rounded-circle imageRounded imageRoundedIcon",style:'background-image: url("./assets/strava-icon.png");'}),Object(l.h)("i",{class:"fas fa-road"})," ",Object(l.h)(b.a,{stores:this.props.stores,value:j.distanceKm}),Object(l.h)("i",{class:"fas fa-mountain ml-2"})," ",Object(l.h)(m.a,{stores:this.props.stores,value:j.elevation}),j.gpx&&Object(l.h)("i",{class:"fas fa-map-marked-alt ml-2"})))),Object(l.h)("div",{class:"col-12 col-sm-8 col-lg-6 offset-sm-2 offset-lg-3 mt-1",style:"padding-left: 122px;"},Object(l.h)("div",{class:"row"},j.images&&j.images.map(t=>Object(l.h)("div",{class:"text-center border rounded imageRounded imageRoundedSmall",style:t?`background-image: url("${t.s3SmallLink}");`:"",onClick:this.showModal,"data-image":t.s3LargeLink,"data-imagexxl":t.s3XXLargeLink,"data-thumb":j.image&&j.image.s3SmallLink,"data-title":j.name,"data-date":j.date}," ")))),Object(l.h)("div",{class:"col-10 offset-2 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-3"},C&&C.length>0&&Object(l.h)("small",{class:"bg-light shadow-sm rounded-lg py-0 px-1",style:"bottom: 20px; right: 15px;"},Object(l.h)("i",{class:"fas fa-thumbs-up text-primary"})," ",C.length),I&&I.length>0&&Object(l.h)("small",{class:"float-right bg-light shadow-sm rounded-lg py-0 px-1",style:"bottom: 20px; right: 15px;"},Object(l.h)("i",{class:"fas fa-comment text-primary"})," ",I.length)),Object(l.h)("div",{class:"col-10 offset-2 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-2 mb-3"},Object(l.h)("div",{class:"row"},Object(l.h)("div",{class:"col-6 text-center"},Object(l.h)("button",{type:"button",class:`btn btn-sm btn-outline-${D?"primary":"secondary"} btn-lg btn-block ${D?"text-primary":""}`,onClick:this.likeTrack},Object(l.h)("i",{class:(D?"text-primary fas":"far")+" fa-thumbs-up"})," Like")),Object(l.h)("div",{class:"col-6 text-center"},Object(l.h)("button",{type:"button",class:"btn btn-sm btn-outline-secondary btn-lg btn-block","data-id":j.id,onClick:this.toggleAddComment},Object(l.h)("i",{class:"fas fa-comment"})," Comment")))),O&&Object(l.h)(d.a,{stores:this.props.stores,track:j,inputRef:t=>this.inputRef[j.id]=t}),Object(l.h)(h.a,{stores:this.props.stores,track:j,col:10,offset:2,compact:!0})))}})||i;e.a=O},zc1A:function(t,e,s){"use strict";s.r(e),function(t){function a(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,a)}return s}function o(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}var i,l=s("hosL"),c=(s("Utv1"),s("/eY4")),n=s("OhSV"),r=s("go65"),h=s("Y3FI"),d=s("KDoM"),m=(s("JWe/"),s("bMs3")),b=s("w8dD"),u=(s("Gx/q"),s("NMoA")),p=s("ISGx");const g={submenu:"dogs",hits:0,searchText:""};let O=Object(c.a)(i=class extends l.Component{constructor(t){var e;super(t),e=this,this.loadAll=async function(t=e.props){const{appState:s,storyStore:a,teamStore:o}=e.props.stores,{search:i}=t;await s.getSearch(i);const{publicTeams:l,publicUsers:c}=s;a.localUpdateField("publicTeams",l),a.localUpdateField("publicUsers",c),o.localUpdateField("publicTeams",l),o.localUpdateField("publicUsers",c);const{searchResultStories:n,searchResultDogs:r,searchResultWorkouts:h=[],searchResultTeams:d,searchResultTracks:m}=s,b=[n,r,h,d,m],u=b.map(t=>t.length).indexOf(Math.max(...b.map(t=>t.length))),p=b.map(t=>t.length).reduce((t,e)=>t+e,0);e.setState({searchText:i,submenu:["stories","dogs","workouts","teams","tracks","users"][u],hits:p})},this.search=()=>{const{searchText:t}=this.state;Object(h.route)("/search/"+t)},this.chooseSubmenu=t=>{this.setState({submenu:t.target.parentElement.dataset.menu||t.target.dataset.menu})},this.state=function(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?a(Object(s),!0).forEach((function(e){o(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):a(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}({},g)}componentDidMount(){this.loadAll()}componentWillReceiveProps(t){t.search!==this.props.search&&this.loadAll(t)}render(){const{appState:e,userStore:s}=this.props.stores,{search:a}=this.props,{searchResultStories:o,searchResultDogs:i,searchResultWorkouts:c=[],searchResultTeams:h,searchResultTracks:g,publicUsers:O}=e,{submenu:j,hits:f,searchText:y}=this.state;return Object(l.h)("div",{class:"container-fluid",style:"margin-bottom: 200px; margin-top: 60px;"},Object(l.h)("div",{class:"row"},Object(l.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-0 mb-2"},Object(l.h)("h1",null,Object(l.h)(n.c,{id:"search.title"},"Search")),Object(l.h)("h5",{class:"my-3"},Object(l.h)(n.c,{id:"search.search-for",fields:{search:a,hits:f}},f,' in your search for "',a,'"')),Object(l.h)("div",{class:"d-flex justify-content-center py-3"},Object(l.h)(n.b,null,Object(l.h)("input",{class:"form-control form-control mr-2",type:"search",placeholder:Object(l.h)(n.c,{id:"header.search-placeholder"},"Søk etter det meste..."),value:y,onInput:Object(r.a)(this,"searchText")})),Object(l.h)("button",{class:"btn btn-outline-success",type:"button",onClick:this.search},Object(l.h)(n.c,{id:"header.search"},"Søk")))),Object(l.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 my-3"},Object(l.h)("div",{class:"row"},Object(l.h)("div",{class:"w-100 overflow-hidden"},Object(l.h)("div",{class:"d-flex flex-row flex-nowrap pb-2 px-1",style:"overflow: auto; scroll-snap-type: x mandatory;"},Object(l.h)("div",{class:"col px-0 pt-2"},Object(l.h)("button",{class:`btn btn-block rounded-pill-left rounded-none ${"dogs"===j?"btn-primary":"btn-outline-primary"} text-nowrap`,style:"text-overflow: ellipsis; overflow: hidden;","data-menu":"dogs",onClick:this.chooseSubmenu},Object(l.h)("i",{class:"fas fa-dog"})," ",Object(l.h)(n.c,{id:"search.dogs"},"Dogs")," (",i.length||0,")")),Object(l.h)("div",{class:"col px-0 pt-2"},Object(l.h)("button",{class:`btn btn-block rounded-none ${"teams"===j?"btn-primary":"btn-outline-primary"} text-nowrap`,style:"text-overflow: ellipsis; overflow: hidden;","data-menu":"teams",onClick:this.chooseSubmenu},Object(l.h)("i",{class:"fas fa-users"})," ",Object(l.h)(n.c,{id:"search.teams"},"Teams")," (",h.length||0,")")),Object(l.h)("div",{class:"col px-0 pt-2"},Object(l.h)("button",{class:`btn btn-block rounded-none ${"tracks"===j?"btn-primary":"btn-outline-primary"} text-nowrap`,style:"text-overflow: ellipsis; overflow: hidden;","data-menu":"tracks",onClick:this.chooseSubmenu},Object(l.h)("i",{class:"fas fa-map-marked-alt"})," ",Object(l.h)(n.c,{id:"search.tracks"},"Tracks")," (",g.length||0,")")),Object(l.h)("div",{class:"col px-0 pt-2"},Object(l.h)("button",{class:`btn btn-block rounded-pill-right rounded-none ${"stories"===j?"btn-primary":"btn-outline-primary"} text-nowrap`,style:"text-overflow: ellipsis; overflow: hidden;","data-menu":"stories",onClick:this.chooseSubmenu},Object(l.h)("i",{class:"fas fa-comments"})," ",Object(l.h)(n.c,{id:"search.stories"},"Stories")," (",o.length||0,")")))))),"dogs"===j&&Object(l.h)(t,null,Object(l.h)("div",{class:"col-12"},(!i||0===i.length)&&Object(l.h)(t,null,Object(l.h)("div",{class:"text-center text-muted"},Object(l.h)("div",{class:"display-1"},Object(l.h)("i",{class:"fas fa-dog"})),Object(l.h)("h3",{class:"font-weight-lighter"},Object(l.h)(n.c,{id:"search.no-dogs-found"},"No dogs found.")))),i&&i.map(t=>Object(l.h)(d.a,{stores:this.props.stores,dog:t,url:"/dogs/public/"+t.uuidv4})))),"workouts"===j&&Object(l.h)(t,null,Object(l.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-0 mb-2"},(!c||0===c.length)&&Object(l.h)(t,null,Object(l.h)("div",{class:"text-center text-muted"},Object(l.h)("div",{class:"display-1"},Object(l.h)("i",{class:"fas fa-running"})),Object(l.h)("h3",{class:"font-weight-lighter"},Object(l.h)(n.c,{id:"search.no-workouts-found"},"No workouts found.")))),c&&c.map((t,e)=>Object(l.h)("div",{class:"row mb-4"},Object(l.h)("div",{class:"col-12 py-3"},Object(l.h)(p.a,{stores:this.props.stores,feed:t,idx:e})))))),"teams"===j&&Object(l.h)(t,null,Object(l.h)("div",{class:"col-12"},(!h||0===h.length)&&Object(l.h)(t,null,Object(l.h)("div",{class:"text-center text-muted"},Object(l.h)("div",{class:"display-1"},Object(l.h)("i",{class:"fas fa-users"})),Object(l.h)("h3",{class:"font-weight-lighter"},Object(l.h)(n.c,{id:"search.no-teams-found"},"No teams found.")))),h&&h.map(e=>Object(l.h)(t,null,Object(l.h)(m.a,{stores:this.props.stores,team:e,url:"/teams/public/"+e.uuidv4,showButton:!0,publicUsers:O,showMembers:1,showLocation:1}))))),"tracks"===j&&Object(l.h)(t,null,Object(l.h)("div",{class:"col-12"},(!g||0===g.length)&&Object(l.h)(t,null,Object(l.h)("div",{class:"text-center text-muted"},Object(l.h)("div",{class:"display-1"},Object(l.h)("i",{class:"fas fa-map-marked-alt"})),Object(l.h)("h3",{class:"font-weight-lighter"},Object(l.h)(n.c,{id:"search.no-tracks-found"},"No tracks found.")))),g&&g.map(t=>Object(l.h)(b.a,{stores:this.props.stores,track:t})))),"stories"===j&&Object(l.h)(t,null,Object(l.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-0 mb-2"},(!o||0===o.length)&&Object(l.h)(t,null,Object(l.h)("div",{class:"text-center text-muted"},Object(l.h)("div",{class:"display-1"},Object(l.h)("i",{class:"fas fa-comments"})),Object(l.h)("h3",{class:"font-weight-lighter"},Object(l.h)(n.c,{id:"search.no-stories-found"},"No stories found.")))),o&&o.map(t=>Object(l.h)("div",{class:"row mb-4"},Object(l.h)("div",{class:"col-12 py-3"},Object(l.h)(u.a,{stores:this.props.stores,story:t,key:"story-detail-"+t.id}))))))))}})||i;e.default=O}.call(this,s("hosL").Fragment)}}]);
//# sourceMappingURL=route-search.chunk.34079.esm.js.map