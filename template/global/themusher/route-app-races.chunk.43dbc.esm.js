(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{HGwV:function(t,e,s){"use strict";(function(t){function a(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,a)}return s}function c(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?a(Object(s),!0).forEach((function(e){l(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):a(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}function l(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}var o,i,n,r=s("hosL"),h=(s("QRet"),s("Utv1")),d=s("/eY4"),b=s("OhSV"),p=(s("Y3FI"),s("fh8t")),u=s.n(p),m=(s("go65"),s("HQo+")),O=s("wanP"),j=s("ZQlJ"),f=s("q/oJ"),g=s("gWxU"),v=s("Nanz"),w=s("ZOvn");const x=w.a.marginTop(!1),y=w.a.marginTopBack(!1),k=(w.a.marginBottom(),w.a.subMenuMarginTop(),{isLoading:!1,email:"",submenu:"ads",jwtToken:h.a.getJwtToken(),reloadInSec:null,reloadIsActive:!1,leaderboardMode:"mushers",filterByraceClass:"",showLeaderBoard:!0,showNews:!0});let S=Object(d.a)(o=class extends r.Component{constructor(t){super(t),this.initComponent=()=>{this.setState({reloadIsActive:!0},()=>this.tickReloadTimeer())},this.tickReloadTimeer=()=>{const{reloadLastEpoch:t}=this.props,{reloadIsActive:e}=this.state;if(e){const e=Math.floor((new Date).getTime()/1e3);this.setState({reloadInSec:60-(e-t)}),clearTimeout(this.updateTimer.tick),this.updateTimer.tick=setTimeout(()=>this.tickReloadTimeer(),1e3)}return!1},this.state=c({},k),this.updateTimer={}}componentDidMount(){this.initComponent()}componentWillUnmount(){clearTimeout(this.updateTimer.tick)}render(){const{reloadInSec:e}=this.state,{radius:s=13,fontSize:a=11,classNames:c=""}=this.props,l=Math.floor(h.a.normalizeBetween(e,0,60,0,100));return Object(r.h)(t,null,Object(r.h)("span",{class:c},Object(r.h)(O.a,{key:"gauge-reload-page",color:"primary",radius:s,showPercentText:!1,percent:l,showCenterText:!0,centerText:e,centerTextSize:a,centerTextY:"55%"})))}})||o,I=Object(d.a)(i=class extends r.Component{constructor(t){super(t),this.toggleAdminInfo=t=>{t.stopPropagation();const{showAdminInfo:e}=this.state;this.setState({showAdminInfo:!e})},this.toggleInfo=t=>{t.stopPropagation();const{showInfo:e}=this.state;this.setState({showInfo:!e})},this.state={}}render(){const{showAdminInfo:e,showInfo:s}=this.state,{bib:a,email:c,onTeamClick:l,onDogClick:o}=this.props,{raceStore:i,userStore:n}=this.props.stores,{isAdmin:d}=n,p=a?i.getMusherByBibId(a):i.getMusherByBibEmail(c),m=i.getTeamById(p.team),O=m.members?m.members.find(t=>t.email===p.email):{},f=i.getClassByTeamId(p.team),g=i.getTotalsByTeamId(p.team),v=w.a.getImage({user:O,team:m,priority:"user"}),x=w.a.displayNameShort(O)||w.a.displayNameShort(p),y=w.a.getRankingColor(p.bib);return Object(r.h)(t,null,Object(r.h)("div",{class:"d-flex position-relative"},Object(r.h)("div",{class:"position-relative text-center border rounded-circle imageRounded imageRoundedMedium",style:v?`background-image: url("${v}"); background-size: cover;`:""},!v&&Object(r.h)("div",{class:"text-muted",style:"font-size: 25px; padding-top: 5px;"},x),Object(r.h)("div",{class:`rounded-pill-both px-2 text-center position-absolute ${y?"":"bg-secondary"} font-weight-bold`,style:"bottom: -20px; right: 0; "+(y?`background-color: ${y};`:"")},p.bib&&"n/a"!==p.bib&&Object(r.h)(t,null,p.bib))),Object(r.h)("div",{class:"flex-grow-1 pl-3 text-overflow mb-3",style:"line-height: 1.2em;"},Object(r.h)("h6",{class:"font-weight-light mb-0"},f.title),Object(r.h)("h3",{class:"mb-0"},p.flag," ",p.firstname," ",p.lastname),Object(r.h)("h6",{class:"mb-0"},p.sportsClub))),m.public>0&&Object(r.h)(t,null,s?Object(r.h)(t,null,Object(r.h)("button",{class:"btn btn-link float-right",onClick:this.toggleInfo},Object(r.h)("i",{class:"fas fa-angle-up"})," ",Object(r.h)(b.c,{id:"races.hide-info"},"Hide info"))):Object(r.h)(t,null,Object(r.h)("button",{class:"btn btn-link float-right",onClick:this.toggleInfo},Object(r.h)("i",{class:"fas fa-angle-down"})," ",Object(r.h)(b.c,{id:"races.show-info"},"Show info"))),Object(r.h)("h3",null,m.public?Object(r.h)(t,null,Object(r.h)("a",{href:"/teams/public/"+m.uuidv4,onClick:t=>l(t,m.uuidv4)},m.name)):Object(r.h)(t,null,m.name)),s&&Object(r.h)(t,null,Object(r.h)(u.a,{markdown:w.a.replaceImages(m.description,m.images),markdownOpts:w.a.getMarkdownOptions()})),m.dogs&&Object(r.h)("div",{class:"w-100 container-fluid"},Object(r.h)("div",{class:"row pt-2"},Object(r.h)(j.a,{stores:this.props.stores,dogs:m.dogs.map(t=>t.id),allDogs:m.dogs,onDogClick:o})))),g&&g.distanceKm&&Object(r.h)(t,null,Object(r.h)("div",{class:"table-responsive-lg"},Object(r.h)("table",{class:"table table-borderless"},Object(r.h)("tbody",null,Object(r.h)("tr",null,Object(r.h)("td",{style:"width: 5%;"},Object(r.h)("i",{class:"fas fa-dog"})),Object(r.h)("td",{style:"width: 60%"},Object(r.h)(b.c,{id:"races.dogs"},"Dogs")),Object(r.h)("td",{style:"width: 5%;"}," "),Object(r.h)("td",{class:"text-right",style:"width: 30%;"},m.dogs.length)),Object(r.h)("tr",null,Object(r.h)("td",null,Object(r.h)("i",{class:"fas fa-road"})),Object(r.h)("td",null,Object(r.h)(b.c,{id:"races.distance"},"Distance")),Object(r.h)("td",null," "),Object(r.h)("td",{class:"text-right"},Object(r.h)("nobr",null,g.distanceKm?h.a.format(g.distanceKm,1)+" km":"n/a"))),Object(r.h)("tr",null,Object(r.h)("td",null,Object(r.h)("i",{class:"fas fa-mountain"})),Object(r.h)("td",null,Object(r.h)(b.c,{id:"races.ascend"},"Ascending")),Object(r.h)("td",null," "),Object(r.h)("td",{class:"text-right"},Object(r.h)("nobr",null,g.elevation?h.a.format(g.elevation,0)+" m":"n/a"))),Object(r.h)("tr",null,Object(r.h)("td",null,Object(r.h)("i",{class:"fas fa-stopwatch"})),Object(r.h)("td",null,Object(r.h)(b.c,{id:"races.race-time"},"Racetime")),Object(r.h)("td",null,Object(r.h)("i",{class:"fas fa-clock"})),Object(r.h)("td",{class:"text-right"},Object(r.h)("nobr",null,h.a.secToHms(g.duration)||"n/a"))),Object(r.h)("tr",null,Object(r.h)("td",null,Object(r.h)("i",{class:"fas fa-bed"})),Object(r.h)("td",null,Object(r.h)(b.c,{id:"races.rest-time"},"Rest")),Object(r.h)("td",null,Object(r.h)("i",{class:"fas fa-clock"})),Object(r.h)("td",{class:"text-right"},Object(r.h)("nobr",null,h.a.secToHms(g.rest)||"n/a"))))))),d&&Object(r.h)("div",{style:"max-height: 200px; max-width: 70vw; overflow: auto;"},Object(r.h)("button",{class:"btn btn-link btn-block",onClick:this.toggleAdminInfo},"Toggle admin info"),e&&Object(r.h)(t,null,Object(r.h)("small",null,Object(r.h)("xmp",null,JSON.stringify(p,null,4),JSON.stringify(O,null,4),JSON.stringify(m,null,4),JSON.stringify(g,null,4))))))}})||i,T=Object(d.a)(n=class extends r.Component{constructor(t){var e;super(t),e=this,this.loadLiveRaceResults=async function(t=e.props,s,a){const{raceStore:c}=t.stores,{race:l}=c;await c.getRaceTrackerData(l.raceTrackerRace),c.getRaceTrackerActiveTeams(s,a)},this.loadRaceResults=async function(t=e.props,s,a){const{raceStore:c}=t.stores,{raceid:l}=t;await c.loadWorkoutSummary(s,l),c.getWorkoutSummaryActiveTeams(s,a)},this.loadRace=async function(t=e.props){e.setState({isLoading:!0});const{raceStore:s,appState:a}=t.stores,{raceid:c,classid:l}=t;await s.load(c);const{race:o}=s,{focusOnMushers:i}=a,{selectedClassIds:n=[]}=a,r=l||n[0];l&&a.toggleSelectedClassId(l,!0);const h=o.classes.filter(t=>t.id===r).filter(t=>t.contestants&&t.contestants.length>0).map(t=>t.contestants.filter(t=>t.team>0).map(t=>t.team)).flat();h.length>0&&await s.loadTeams(h.join(",")),o.liveRace>0?await e.loadLiveRaceResults(e.props,h,i):await e.loadRaceResults(e.props,h,i),s.getAllClassesSortedBy(),clearTimeout(e.updateTimer.reload),e.updateTimer.reload=setTimeout((async function(){const s=Math.floor((new Date).getTime()/1e3);e.setState({reloadLastEpoch:s}),e.loadRace(t)}),6e4),e.setState({isLoading:!1})},this.setLeaderboardMode=t=>{this.setState({leaderboardMode:t.target.parentElement.dataset.mode||t.target.dataset.mode})},this.chooseRaceClass=t=>{this.setState({filterByraceClass:t.target.value})},this.toggleShowLeaderBoard=t=>{const{showLeaderBoard:e}=this.state;this.setState(!0===t?{showLeaderBoard:!1}:{showLeaderBoard:!e})},this.toggleShowNews=t=>{const{showNews:e}=this.state;this.setState(!0===t?{showNews:!1}:{showNews:!e})},this.onMarkerClick=({title:t,bib:e,email:s})=>{const{showModal:a}=this.state;this.setState({showModal:!a,modalTitle:t,modalBib:e,modalEmail:s})},this.toggleModal=()=>{const{showModal:t}=this.state;this.setState({showModal:!t})},this.onTeamClick=(t,e)=>(t.preventDefault(),t.stopPropagation(),this.setState({showTeam:e}),!1),this.hideTeam=()=>{this.setState({showTeam:null})},this.onUserClick=t=>(t.preventDefault(),t.stopPropagation(),!1),this.onDogClick=(t,e,s)=>(t.preventDefault(),t.stopPropagation(),this.setState({showDog:e,dogs:s}),!1),this.hideDog=()=>{this.setState({showDog:null})},this.filterByClass=async function(t){const s=t.target.closest("button").dataset.id,{appState:a,raceStore:c}=e.props.stores;a.toggleSelectedClassId(s,!0);const{race:l}=c,{focusOnMushers:o}=a,i=l.classes.filter(t=>t.id===s).filter(t=>t.contestants&&t.contestants.length>0).map(t=>t.contestants.filter(t=>t.team>0).map(t=>t.team)).flat();i.length>0&&await c.loadTeams(i.join(",")),l.liveRace>0?await e.loadLiveRaceResults(e.props,i,o):await e.loadRaceResults(e.props,i,o)},this.back=()=>{const{history:t}=this.props.stores;t.goBack()},this.state=c(c({},k),{},{reloadLastEpoch:Math.floor((new Date).getTime()/1e3)}),this.updateTimer={}}componentWillUnmount(){clearTimeout(this.updateTimer.reload),clearTimeout(this.updateTimer.tick)}componentDidMount(){this.loadRace();const{width:t}=function(){const{innerWidth:t,innerHeight:e}=window;return{width:t,height:e}}();t<800&&(this.toggleShowLeaderBoard(!0),this.toggleShowNews(!0))}componentWillReceiveProps(t){this.loadRace(t)}render(){const{userStore:e,raceStore:s,appState:a}=this.props.stores,{user:c={},teams:l=[]}=e,{language:o="en"}=c,{raceid:i}=this.props,{focusOnMushers:n=[],infoOnMushers:h=[],selectedClassIds:d=[]}=a,{reloadLastEpoch:b,showModal:p,modalBib:u,modalEmail:O,showTeam:j,showDog:w}=this.state,{waypoints:k,zoomToMarkers:T,race:C}=s,D=u?s.getMusherByBibId(u):s.getMusherByBibEmail(O),R=s.getTeamById(D.team);return Object(r.h)(t,null,j&&Object(r.h)(f.a,null,Object(r.h)(g.a,{stores:this.props.stores,teamid:j,marginTop:"0px;",marginBottom:"0px;",back:this.hideTeam,hideTeam:this.hideTeam})),w&&Object(r.h)(f.a,null,Object(r.h)(v.a,{stores:this.props.stores,dogid:w,marginTop:"0px;",marginBottom:"0px;",back:this.hideDog,dogs:R.dogs})),Object(r.h)("div",{class:"container-fluid position-relative p-0",style:`margin-top: ${x}; height: calc(100vh - 130px);`},Object(r.h)(m.a,{stores:this.props.stores,raceid:i,waypoints:k,zoomToMarkers:T,fullscreenMap:!0,onMarkerClick:this.onMarkerClick,showHeatmap:C.liveRace<1,showTracks:C.liveRace>=1,key:"trackmap-"+d.join("-")}),Object(r.h)("div",{class:"position-absolute",style:"top: 15px; left: 50px; z-index: 9999;"},Object(r.h)("button",{class:"btn btn-link pl-0 fixed-top text-primary",style:`top: ${y}; left: 5px; font-size: 35px; width: 45px;`,onClick:this.back},Object(r.h)("i",{class:"fas fa-arrow-circle-left"})),Object(r.h)("div",{class:"logo ml-3 clearfix text-white"},Object(r.h)("img",{src:"./assets/homerun-race-logo-2-small.png",height:"37",class:"float-left"}),Object(r.h)("a",{href:`/app-races/${C.id}/results`},Object(r.h)("span",{class:"font-weight-bold text-dark",style:"font-size: 1.4em;"},C.title)))),Object(r.h)("div",{class:"position-absolute",style:"top: 55px; left: 5px; z-index: 9999; width: 30px; height: 30px;"},Object(r.h)(S,{stores:this.props.stores,classNames:"float-right ml-2",reloadLastEpoch:b})),Object(r.h)("div",{class:"position-absolute",style:" bottom: 55px; left: 0;  right: 0;  margin-left: auto;  margin-right: auto;  z-index: 9999; width: 80vw; height: 50px;"},Object(r.h)("div",{class:"w-100 overflow-hidden"},Object(r.h)("div",{class:"d-flex flex-row flex-nowrap pb-2 px-1",style:"overflow: auto; scroll-snap-type: x mandatory;"},C.classes&&C.classes.sort((t,e)=>t.distance-e.distance).map((e,s)=>Object(r.h)(t,null,Object(r.h)("div",{class:"col px-0 pt-2"},Object(r.h)("button",{type:"button",class:`btn btn-block ${0===s&&"rounded-pill-left"} ${s===C.classes.length-1&&"rounded-pill-right"} rounded-none ${d.indexOf(e.id)>-1?"btn-primary":"btn-outline-primary"} text-nowrap`,style:"text-overflow: ellipsis; overflow: hidden;",onClick:this.filterByClass,"data-id":e.id},e.title))))))),p&&Object(r.h)(t,null,Object(r.h)("div",{class:"position-absolute",style:"top: 0px; left: 0px; z-index: 9999; width: 100%; height: 100%; background: rgba(0, 0, 0, 0.3);",onClick:this.toggleModal},Object(r.h)("div",{class:"position-absolute bg-light border rounded rounded-lg pt-3 pb-3 px-2",style:"top: 50%; left: 50%; transform: translate(-50%, -50%); width: 80vw; max-width: 800px; max-height: 600px; overflow: auto;"},Object(r.h)("button",{class:"btn btn-warning btn-sm float-right position-absolute",style:"top: 5px; right: 5px;"},Object(r.h)("i",{class:"fas fa-times"})),Object(r.h)(I,{stores:this.props.stores,bib:u,email:O,onTeamClick:this.onTeamClick,onUserClick:this.onUserClick,onDogClick:this.onDogClick}))))))}})||n;e.a=T}).call(this,s("hosL").Fragment)},J9nn:function(t,e,s){"use strict";(function(t){var a,c=s("hosL"),l=(s("Utv1"),s("/eY4")),o=s("OhSV");s("Y3FI"),s("fh8t"),s("go65"),s("ZOvn");let i=Object(l.a)(a=class extends c.Component{constructor(t){var e;super(t),e=this,this.subscribeNotificationTopic=async function(t){const{userStore:s}=e.props.stores,{user:a}=s,{notificationTopics:c={}}=a;await s.setNotificationTopic({field:"notificationTopics."+t,value:1})},this.state={},this.inputRef={},this.updateTimer={}}render(){const{userStore:e}=this.props.stores,{user:s={},teams:a=[]}=e,{language:l="en"}=s,{notificationTopics:i={}}=s,{race:n={}}=this.props,r="race-"+n.id;return i&&i[r]?"":Object(c.h)(t,null,Object(c.h)("div",{class:"row"},Object(c.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-0 mb-2"},Object(c.h)("button",{class:"btn btn-block btn-info btn-lg",onClick:()=>this.subscribeNotificationTopic(r)},Object(c.h)("i",{class:"fas fa-bell"})," ",Object(c.h)(o.c,{id:"race.notifications"},"Subscribe to race notifications")))))}})||a;e.a=i}).call(this,s("hosL").Fragment)},Pbyq:function(t,e,s){"use strict";(function(t){var a,c=s("hosL"),l=s("Utv1"),o=s("/eY4"),i=(s("OhSV"),s("Y3FI"),s("fh8t"),s("go65"),s("om2D"),s("AEg1")),n=s("gOLw");s("ZOvn");let r=Object(o.a)(a=class extends c.Component{constructor(t){var e;super(t),e=this,this.addRaceUserImage=async function(){const{race:t={}}=e.props,s=t.id,{raceStore:a}=e.props.stores,{newRaceUserImage:c}=e.state;await a.addUserImage({id:s,newUserImage:c}),e.setState({newRaceUserImage:{}})},this.updateUserImageUpload=({field:t,value:e})=>{const{newRaceUserImage:s}=this.state;s[t]=e,this.setState({newRaceUserImage:s})},this.removeRaceUserImage=async function(t){const s=t.target.parentElement.dataset.id||t.target.dataset.id,{race:a={}}=e.props,c=a.id,{raceStore:l}=e.props.stores;await l.removeUserImage({id:c,userImageId:s})},this.editRaceUserImage=async function(t){const{id:s,field:a}=t.target.dataset,{value:c}=t.target,{race:o={}}=e.props,i=o.id,{raceStore:n}=e.props.stores,r={raceUserImageId:s,["raceUserImage"+l.a.ucfirst(a)]:c};clearTimeout(e.updateTimer[`${i}-${s}-${a}`]),e.updateTimer[`${i}-${s}-${a}`]=setTimeout((async function(){n.editUserImage({id:i,data:r})}),1500),e.resizeTextarea(t.target)},this.resizeTextarea=t=>{let e=t;e.target&&(e=t.target);const{scrollHeight:s}=e;e.style.height=s+"px"},this.handleImageErrored=t=>{const e=t.target;e.onerror=null,setTimeout(()=>{e.src+="?"+new Date},1e3)},this.state={newRaceUserImage:{}},this.inputRef={},this.updateTimer={}}render(){const{newRaceUserImage:e={}}=this.state,{userStore:s}=this.props.stores,{user:a={},teams:l=[]}=s,{language:o="en"}=a,{race:r={}}=this.props,h=["photos"];return r.tag&&r.tag.split(",").forEach(t=>{h.push(t.trim())}),Object(c.h)(t,null,a.id&&Object(c.h)(i.a,{stores:this.props.stores,hashTags:h,postfix:`[🔗 ${r.title}: Images](/app-races/${r.id}/userImages)`,topic:"race-"+r.id}),Object(c.h)(n.a,{stores:this.props.stores,hashtags:h}))}})||a;e.a=r}).call(this,s("hosL").Fragment)},ULR1:function(t,e,s){"use strict";(function(t){var a,c=s("hosL"),l=s("Utv1"),o=s("/eY4"),i=(s("OhSV"),s("Y3FI"),s("fh8t"),s("go65"),s("om2D"),s("AEg1")),n=s("gOLw");s("ZOvn");let r=Object(o.a)(a=class extends c.Component{constructor(t){var e;super(t),e=this,this.addRaceArticle=async function(){const{race:t={}}=e.props,s=t.id,{raceStore:a}=e.props.stores,{newRaceArticle:c}=e.state;await a.addArticle({id:s,newArticle:c}),e.setState({newRaceArticle:{}})},this.editRaceArticle=async function(t){const{id:s,field:a}=t.target.dataset,{value:c}=t.target,{race:o={}}=e.props,i=o.id,{raceStore:n}=e.props.stores,r={raceArticleId:s,["raceArticle"+l.a.ucfirst(a)]:c};clearTimeout(e.updateTimer[`${i}-${s}-${a}`]),e.updateTimer[`${i}-${s}-${a}`]=setTimeout((async function(){n.editArticle({id:i,data:r})}),1500),e.resizeTextarea(t.target)},this.removeRaceArticle=async function(t){const s=t.target.parentElement.dataset.id||t.target.dataset.id,{race:a={}}=e.props,c=a.id,{raceStore:l}=e.props.stores;await l.removeArticle({id:c,articleId:s})},this.updateArticleUpload=({field:t,value:e})=>{const{newRaceArticle:s}=this.state;s[t]=e,this.setState({newRaceArticle:s})},this.resizeTextarea=t=>{let e=t;e.target&&(e=t.target);const{scrollHeight:s}=e;e.style.height=s+"px"},this.handleImageErrored=t=>{const e=t.target;e.onerror=null,setTimeout(()=>{e.src+="?"+new Date},1e3)},this.state={newRaceArticle:{}},this.inputRef={},this.updateTimer={}}render(){const{userStore:e}=this.props.stores,{user:s={},teams:a=[]}=e,{language:l="en"}=s,{race:o={}}=this.props,r=["news"];return o.tag&&o.tag.split(",").forEach(t=>{r.push(t.trim())}),Object(c.h)(t,null,s.id&&Object(c.h)(i.a,{stores:this.props.stores,hashTags:r,postfix:`[🔗 ${o.title}: News](/app-races/${o.id}/news)`,topic:"race-"+o.id}),Object(c.h)(n.a,{stores:this.props.stores,hashtags:r}))}})||a;e.a=r}).call(this,s("hosL").Fragment)},hwiY:function(t,e,s){"use strict";(function(t){function a(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,a)}return s}function c(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?a(Object(s),!0).forEach((function(e){l(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):a(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}function l(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}var o,i=s("hosL"),n=s("Utv1"),r=s("/eY4"),h=s("OhSV"),d=(s("Y3FI"),s("fh8t")),b=s.n(d),p=(s("go65"),s("ZOvn"));let u=Object(r.a)(o=class extends i.Component{constructor(t){var e;super(t),e=this,this.signupToRace=async function(){const{raceStore:t,userStore:s}=e.props.stores,{user:a}=s,{signup:l}=t,{race:o={}}=e.props,i=o.id;await t.addContestant({id:i,classId:l.class,newContestant:c({team:a.team,firstname:a.firstname,lastname:a.lastname,sportsClub:a.sportsClub,email:a.email,cellphone:a.cellphone,facebook:a.facebook,instagram:a.instagram},l)})},this.updateSignup=t=>{const e=t.target.id,s=t.target.value,{raceStore:a}=this.props.stores;a.updateObjectKeyValue("signup",e,s)},this.editSignup=t=>{const{race:e={}}=this.props,s=e.id,{raceStore:a}=this.props.stores,c=t.target.id,l=t.target.value,{classid:o,contestantid:i}=t.target.dataset;a.updateObjectKeyValue("signup",c,l);const r={raceClassId:o,contestantId:i,["raceClassContestant"+n.a.ucfirst(c)]:l};clearTimeout(this.updateTimer[c]),this.updateTimer[c]=setTimeout((async function(){a.editClass({id:s,data:r}),a.localUpdateSignup(c,l),"team"===c&&await a.loadTeams(l,!0)}),500)},this.state={},this.inputRef={},this.updateTimer={}}render(){const{userStore:e,raceStore:s}=this.props.stores,{user:a={},teams:c=[]}=e,{language:l="en"}=a,{race:o={}}=this.props,{signup:r}=s;let d={},u=[];r.class&&(d=s.getRaceClassById(r.class)),r.team&&(u=e.findDogsByTeam(parseInt(r.team,10)));const{vaccineLogStatuses:m}=e,O=new Date;return Object(i.h)(t,null,Object(i.h)("div",{class:"row"},Object(i.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-0 mb-2"},Object(i.h)("h2",{class:"mb-0"},Object(i.h)(h.c,{id:"races.signup"},"Påmelding"))),Object(i.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-3 mb-2"},O>=new Date(o.signupStartDate)&&O<=new Date(o.signupEndDate)?Object(i.h)(t,null,Object(i.h)("span",{class:"font-weight-lighter"},Object(i.h)(h.c,{id:"races.signed-in-as"},"Logget inn som"),":")," ",a.email,Object(i.h)("br",null),Object(i.h)("br",null),r.id?Object(i.h)(t,null,Object(i.h)("div",{class:"font-weight-bold mb-4"},Object(i.h)("i",{class:"fas fa-check text-success"})," ",Object(i.h)(h.c,{id:"races.signed-up"},"Din bruker er påmeldt!"),Object(i.h)("br",null)),!o.liveRace&&o.signuppayment&&Object(i.h)(t,null,Object(i.h)("div",{class:"form-group row my-2"},Object(i.h)("label",{for:"cellphone",class:"col-2 col-form-label text-right font-weight-lighter"},Object(i.h)(h.c,{id:"races.signup"},"Påmelding")),Object(i.h)("div",{class:"col-10"},r.paidSignupfee?Object(i.h)("div",{class:"py-2"},Object(i.h)(h.c,{id:"races.paid"},"Betalt"),": ",n.a.formatDate(r.paidSignupfee),Object(i.h)("i",{class:"fas fa-check text-success ml-3"})):Object(i.h)(t,null,Object(i.h)("div",{class:"alert alert-danger mb-1",role:"alert"},Object(i.h)("h5",null,Object(i.h)("span",{class:"font-weight-lighter"},Object(i.h)(h.c,{id:"races.payment-info"},"Betaling påmelding"),":"),Object(i.h)("br",null),Object(i.h)(b.a,{markdown:p.a.replaceImages(o.signuppayment,o.images,l),markdownOpts:p.a.getMarkdownOptions()}),d.signupfee||o.signupfee," NOK")))))),Object(i.h)("div",{class:"form-group row my-5"},Object(i.h)("label",{for:"team",class:"col-3 col-form-label text-right font-weight-lighter"},Object(i.h)(h.c,{id:"races.team"},"Team")),Object(i.h)("div",{class:"col-9"},Object(i.h)("select",{class:"form-control form-control-lg",id:"team","aria-describedby":"teamHelp","data-classid":r.class,"data-contestantid":r.id,onInput:this.editSignup,value:r.team},Object(i.h)("option",{value:""},"-- ",Object(i.h)(h.c,{id:"races.choose-team"},"Velg team")," --"),c.map(t=>Object(i.h)("option",{value:t.id},t.name))),r.team?Object(i.h)(t,null):Object(i.h)(t,null,Object(i.h)("div",{class:"alert alert-danger clearfix",role:"alert"},Object(i.h)("span",{class:"display-4 float-left mr-3"},Object(i.h)("i",{class:"fas fa-exclamation-triangle"})),Object(i.h)(h.c,{id:"races.choose-race-team",fields:{title:o.title}},"Please choose race team for ",o.title))))),Object(i.h)("div",{class:"form-group row my-2"},Object(i.h)("label",{for:"cellphone",class:"col-3 col-form-label text-right font-weight-lighter"},Object(i.h)(h.c,{id:"races.cellphone"},"Mobil")),Object(i.h)("div",{class:"col-9"},Object(i.h)(h.b,null,Object(i.h)("input",{type:"text",class:"form-control",id:"cellphone","data-classid":r.class,"data-contestantid":r.id,onInput:this.editSignup,value:r.cellphone,placeholder:Object(i.h)(h.c,{id:"races.cellphone-help"},"Hva er mobilnummer ditt?")})))),r.name&&Object(i.h)("div",{class:"form-group row my-2"},Object(i.h)("label",{for:"name",class:"col-3 col-form-label text-right font-weight-lighter"},Object(i.h)(h.c,{id:"races.name"},"Navn")),Object(i.h)("div",{class:"col-9"},r.name)),Object(i.h)("div",{class:"form-group row my-2"},Object(i.h)("label",{for:"firstname",class:"col-3 col-form-label text-right font-weight-lighter"},Object(i.h)(h.c,{id:"races.firstname"},"Fornavn")),Object(i.h)("div",{class:"col-9"},Object(i.h)(h.b,null,Object(i.h)("input",{type:"text",class:"form-control",id:"firstname","data-classid":r.class,"data-contestantid":r.id,onInput:this.editSignup,value:r.firstname,placeholder:Object(i.h)(h.c,{id:"races.firstname-help"},"Hva er fornavnet ditt?")})))),Object(i.h)("div",{class:"form-group row my-2"},Object(i.h)("label",{for:"lastname",class:"col-3 col-form-label text-right font-weight-lighter"},Object(i.h)(h.c,{id:"races.lastname"},"Etternavn")),Object(i.h)("div",{class:"col-9"},Object(i.h)(h.b,null,Object(i.h)("input",{type:"text",class:"form-control",id:"lastname","data-classid":r.class,"data-contestantid":r.id,onInput:this.editSignup,value:r.lastname,placeholder:Object(i.h)(h.c,{id:"races.lastname-help"},"Hva er etternavnet ditt?")})))),Object(i.h)("div",{class:"form-group row my-2"},Object(i.h)("label",{for:"sportsClub",class:"col-3 col-form-label text-right font-weight-lighter"},Object(i.h)(h.c,{id:"races.sportsclub"},"Klubb")),Object(i.h)("div",{class:"col-9"},Object(i.h)(h.b,null,Object(i.h)("input",{type:"text",class:"form-control",id:"sportsClub","data-classid":r.class,"data-contestantid":r.id,onInput:this.editSignup,value:r.sportsClub,placeholder:Object(i.h)(h.c,{id:"races.sportsClub-help"},"Hvilken klubb tilhører du?")})))),Object(i.h)("div",{class:"form-group row my-2"},Object(i.h)("label",{for:"facebook",class:"col-3 col-form-label text-right font-weight-lighter"},Object(i.h)(h.c,{id:"races.facebook"},"Facebook")),Object(i.h)("div",{class:"col-9"},Object(i.h)(h.b,null,Object(i.h)("input",{type:"text",class:"form-control",id:"facebook","data-classid":r.class,"data-contestantid":r.id,onInput:this.editSignup,value:r.facebook,placeholder:Object(i.h)(h.c,{id:"races.facebook-help"},"Hva er Facebook brukernavnet ditt?")})))),Object(i.h)("div",{class:"form-group row my-2"},Object(i.h)("label",{for:"instagram",class:"col-3 col-form-label text-right font-weight-lighter"},Object(i.h)(h.c,{id:"races.instagram"},"Instagram")),Object(i.h)("div",{class:"col-9"},Object(i.h)(h.b,null,Object(i.h)("input",{type:"text",class:"form-control",id:"instagram","data-classid":r.class,"data-contestantid":r.id,onInput:this.editSignup,value:r.instagram,placeholder:Object(i.h)(h.c,{id:"races.instagram-help"},"Hva er Instagram brukernavnet ditt?")})))),Object(i.h)("div",{class:"form-group row my-2"},Object(i.h)("label",{for:"team",class:"col-3 col-form-label text-right font-weight-lighter"},Object(i.h)(h.c,{id:"races.class"},"Klasse")),Object(i.h)("div",{class:"col-9"},Object(i.h)("select",{class:"form-control",id:"class","aria-describedby":"classHelp","data-classid":r.class,"data-contestantid":r.id,onInput:this.editSignup,value:r.class,disabled:!0},Object(i.h)("option",{value:""},"-- ",Object(i.h)(h.c,{id:"races.choose-class"},"Velg klasse")," --"),o.classes&&o.classes.sort((t,e)=>t.distance-e.distance).map(e=>Object(i.h)(t,null,Object(i.h)("option",{value:e.id},e.title,!o.liveRace&&Object(i.h)(t,null,"- ",e.distance," km - Påmelding: ",e.signupfee||o.signupfee," NOK"))))))),o.rules&&Object(i.h)("div",{class:"form-group row my-2"},Object(i.h)("label",{for:"team",class:"col-3 col-form-label text-right font-weight-lighter"}," "),Object(i.h)("div",{class:"col-9 pl-5"},Object(i.h)("input",{type:"checkbox",class:"form-check-input",id:"termsAndAgreement","data-classid":r.class,"data-contestantid":r.id,onInput:this.editSignup,checked:r.termsAndAgreement,value:1}),Object(i.h)("label",{class:"form-check-label",for:"termsAndAgreement"},Object(i.h)(h.c,{id:"races.agreement-accept"},"Jeg har lest og godtar reglene for løpet.")))),o.declaration&&Object(i.h)("div",{class:"form-group row my-4"},Object(i.h)("div",{class:"col-12 text-center border-top"},Object(i.h)("h5",null,Object(i.h)(h.c,{id:"races.declaration"},"Declaration"))),Object(i.h)("details",{class:"col-12"},r.declaration?Object(i.h)(t,null,Object(i.h)("summary",null,Object(i.h)(h.c,{id:"races.see-declaration"},"See declaration")," (",Object(i.h)("span",{class:"text-muted font-weight-light"},Object(i.h)(h.c,{id:"races.declaration-signed"},"Declaration signed"),": ",n.a.isoDate(r.declarationDate)),")")):Object(i.h)(t,null,Object(i.h)("summary",null,Object(i.h)("h5",{class:"btn btn-primary"},Object(i.h)(h.c,{id:"races.see-declaration"},"See declaration")))),Object(i.h)(b.a,{markdown:p.a.replaceImages(o.declaration,o.images,l),markdownOpts:p.a.getMarkdownOptions()}),r.declaration?Object(i.h)(t,null,Object(i.h)("i",null,Object(i.h)(h.c,{id:"races.declaration-signed"},"Declaration signed"),": ",n.a.isoDate(r.declarationDate))):Object(i.h)(t,null,Object(i.h)("div",{class:"pl-5"},Object(i.h)("input",{type:"checkbox",class:"form-check-input",id:"declaration","data-classid":r.class,"data-contestantid":r.id,onInput:this.editSignup,checked:r.declaration,value:1}),Object(i.h)("label",{class:"form-check-label",for:"declaration"},Object(i.h)(h.c,{id:"races.declaration-accept"},"I hereby sign the declaration for the race!")))))),Object(i.h)("div",{class:"form-group row my-4"},Object(i.h)("div",{class:"col-12 text-center border-top"},Object(i.h)("h5",null,Object(i.h)(h.c,{id:"races.chiplist"},"Chiplist"))),Object(i.h)("details",{class:"col-12"},Object(i.h)("summary",null,Object(i.h)(h.c,{id:"races.see-dogs"},"See dogs & chiplist")),Object(i.h)("div",{class:"pt-3"},u&&u.length>0?Object(i.h)(t,null,u.map(e=>Object(i.h)(t,null,Object(i.h)("div",{class:"d-flex mb-0 position-relative mb-3"},Object(i.h)("div",{class:"text-center border rounded-circle imageRounded imageRoundedMedium text-muted pt-2",style:e.image?`background-image: url("${e.image.s3SmallLink}"); background-size: cover;`:""},!e.image&&Object(i.h)("span",{class:"font-weight-lighter",style:"font-size: 35px;"},n.a.ucfirst(e.name,!0))),Object(i.h)("div",{class:"flex-grow-1 pl-3 pr-2"},Object(i.h)("span",{class:"float-right"},e.birth&&Object(i.h)("span",{class:"mr-2"},n.a.age(e.birth,e.deceased)),"female"===e.gender?Object(i.h)("i",{class:"fas fa-venus"}):Object(i.h)("i",{class:"fas fa-mars"})),Object(i.h)("a",{href:"/dogs/edit/"+e.id},Object(i.h)("h6",{class:"mb-1",style:"line-height: 1.0em;"},e.shortname||e.name," ",e.shortname&&""!==e.shortname&&Object(i.h)(t,null," - ",Object(i.h)("span",{class:"font-weight-lighter"},e.name)))),e.chipId?Object(i.h)(t,null,Object(i.h)("i",{class:"fas fa-microchip text-muted"})," ",e.chipId):Object(i.h)(t,null,Object(i.h)("div",{class:"alert alert-danger",role:"alert"},Object(i.h)(h.c,{id:"races.missing-chipid"},"Missing chid id"))),Object(i.h)("div",null,m&&m.filter(t=>t.chipId===e.chipId).map(e=>Object(i.h)("span",{class:`badge badge-${e.inKarens?"warning":"success"} mr-2 mb-1`},e.vaccineAgens.name,Object(i.h)("span",{class:"font-weight-lighter ml-2"},Object(i.h)("i",{class:"fas fa-calendar-check"})," ",n.a.isoDate(e.vaccineAgens.durationEnd,!1,!1,!0),e.inKarens&&Object(i.h)(t,null,Object(i.h)("br",null),"(karens: ",n.a.format(e.karensDaysLeft,0)," days left)")))))))))):Object(i.h)(t,null,Object(i.h)("div",{class:"text-center text-muted"},Object(i.h)("div",{class:"display-1"},Object(i.h)("i",{class:"fas fa-dog"})),Object(i.h)("h3",{class:"font-weight-lighter"},Object(i.h)(h.c,{id:"race.add-dogs"},"Add a team to your race signup to see the dogs.")))))))):Object(i.h)(t,null,o.liveRace?Object(i.h)(t,null,"Signup is done at the race normal web pages."):Object(i.h)(t,null,Object(i.h)("div",{class:"form-group"},Object(i.h)("label",{for:"cellphone"},Object(i.h)(h.c,{id:"races.cellphone"},"Mobil")),Object(i.h)("input",{type:"text",class:"form-control",id:"cellphone","aria-describedby":"cellphoneHelp",placeholder:a.cellphone,onInput:this.updateSignup,value:r.cellphone}),Object(i.h)("small",{id:"cellphoneHelp",class:"form-text text-muted"},Object(i.h)(h.c,{id:"races.cellphone-help"},"'Hva er mobilnummer ditt?'"))),r.name&&Object(i.h)("div",{class:"row"},Object(i.h)("div",{class:"col"},Object(i.h)("div",{class:"form-group"},Object(i.h)("label",{for:"name"},Object(i.h)(h.c,{id:"races.name"},"Name")),Object(i.h)("input",{type:"text",class:"form-control",id:"name","aria-describedby":"nameHelp",placeholder:a.name,onInput:this.updateSignup,value:r.name}),Object(i.h)("small",{id:"nameHelp",class:"form-text text-muted"},Object(i.h)(h.c,{id:"races.name-help"},"Hva er navnet ditt?"))))),Object(i.h)("div",{class:"row"},Object(i.h)("div",{class:"col"},Object(i.h)("div",{class:"form-group"},Object(i.h)("label",{for:"firstname"},Object(i.h)(h.c,{id:"races.firstname"},"Fornavn")),Object(i.h)("input",{type:"text",class:"form-control",id:"firstname","aria-describedby":"firstnameHelp",placeholder:a.firstname,onInput:this.updateSignup,value:r.firstname}),Object(i.h)("small",{id:"firstnameHelp",class:"form-text text-muted"},Object(i.h)(h.c,{id:"races.firstname-help"},"Hva er fornavnet ditt?")))),Object(i.h)("div",{class:"col"},Object(i.h)("div",{class:"form-group"},Object(i.h)("label",{for:"lastname"},Object(i.h)(h.c,{id:"races.lastname"},"Etternavn")),Object(i.h)("input",{type:"text",class:"form-control",id:"lastname","aria-describedby":"lastnameHelp",placeholder:a.lastname,onInput:this.updateSignup,value:r.lastname}),Object(i.h)("small",{id:"lastnameHelp",class:"form-text text-muted"},Object(i.h)(h.c,{id:"races.lastname-help"},"Hva er etternavnet ditt?"))))),Object(i.h)("div",{class:"form-group"},Object(i.h)("label",{for:"sportsClub"},Object(i.h)(h.c,{id:"races.sportsclub"},"Klubb")),Object(i.h)("input",{type:"text",class:"form-control",id:"sportsClub","aria-describedby":"sportsClubHelp",placeholder:a.sportsClub,onInput:this.updateSignup,value:r.sportsClub}),Object(i.h)("small",{id:"sportsClubHelp",class:"form-text text-muted"},Object(i.h)(h.c,{id:"races.sportsClub-help"},"Hvilken klubb tilhører du?"))),Object(i.h)("div",{class:"row"},Object(i.h)("div",{class:"col"},Object(i.h)("div",{class:"form-group"},Object(i.h)("label",{for:"facebook"},Object(i.h)(h.c,{id:"races.facebook"},"Facebook")),Object(i.h)("input",{type:"text",class:"form-control",id:"facebook","aria-describedby":"facebookHelp",placeholder:a.facebook,onInput:this.updateSignup,value:r.facebook}),Object(i.h)("small",{id:"facebookHelp",class:"form-text text-muted"},Object(i.h)(h.c,{id:"races.facebook-help"},"Hva er Facebook brukernavnet ditt?")))),Object(i.h)("div",{class:"col"},Object(i.h)("div",{class:"form-group"},Object(i.h)("label",{for:"instagram"},Object(i.h)(h.c,{id:"races.instagram"},"Instagram")),Object(i.h)("input",{type:"text",class:"form-control",id:"instagram","aria-describedby":"instagramHelp",placeholder:a.instagram,onInput:this.updateSignup,value:r.instagram}),Object(i.h)("small",{id:"instagramHelp",class:"form-text text-muted"},Object(i.h)(h.c,{id:"races.instagram-help"},"Hva er Instagram brukernavnet ditt?"))))),Object(i.h)("div",{class:"form-group"},Object(i.h)("label",{for:"team"},Object(i.h)(h.c,{id:"races.team"},"Team")),Object(i.h)("select",{class:"form-control",id:"team","aria-describedby":"teamHelp",onInput:this.updateSignup,value:r.team},Object(i.h)("option",{value:""},"-- ",Object(i.h)(h.c,{id:"races.choose-team"},"Velg team")," --"),c.map(t=>Object(i.h)("option",{value:t.id},t.name))),Object(i.h)("small",{id:"teamHelp",class:"form-text text-muted"},Object(i.h)(h.c,{id:"races.choose-team-help"},"Velg fra dine team"))),Object(i.h)("div",{class:"form-group"},Object(i.h)("label",{for:"class"},Object(i.h)(h.c,{id:"races.class"},"Klasse")),Object(i.h)("select",{class:"form-control",id:"class","aria-describedby":"classHelp",onInput:this.updateSignup,value:r.class},Object(i.h)("option",{value:""},"-- ",Object(i.h)(h.c,{id:"races.choose-class"},"Velg klasse")," --"),o.classes&&o.classes.map(e=>Object(i.h)(t,null,Object(i.h)("option",{value:e.id},e.title," - ",e.distance," km - Påmelding: ",e.signupfee||o.signupfee," NOK")))),Object(i.h)("small",{id:"classHelp",class:"form-text text-muted"},Object(i.h)(h.c,{id:"races.choose-class-help"},"Velg ønsket klasse."))),Object(i.h)("div",{class:"form-group form-check"},Object(i.h)("input",{type:"checkbox",class:"form-check-input",id:"termsAndAgreement",onInput:this.updateSignup,checked:r.termsAndAgreement,value:!0}),Object(i.h)("label",{class:"form-check-label",for:"termsAndAgreement"},Object(i.h)(h.c,{id:"races.agreement-accept"},"Jeg har lest og godtar reglene for løpet."))),Object(i.h)("button",{type:"button",class:"btn btn-primary",onClick:this.signupToRace},Object(i.h)(h.c,{id:"races.do-signup"},"Meld meg på"))))):Object(i.h)(t,null,O<new Date(o.signupStartDate)?Object(i.h)(t,null,Object(i.h)("h5",{class:"mt-4"},Object(i.h)("i",{class:"fas fa-exclamation-circle"})," ",Object(i.h)(h.c,{id:"races.signup-not-open-yet"},"Påmeldingen har ikke åpnet ennå!")),Object(i.h)("p",{class:"mt-4"},Object(i.h)(h.c,{id:"races.signup-opening"},"Påmeldingen åpner"),":",Object(i.h)("br",null),Object(i.h)("span",{class:"display-4"},n.a.formatDate(o.signupStartDate,{locale:"no-NB",hour12:!1,hour:"2-digit",minute:"2-digit"})))):Object(i.h)(t,null,Object(i.h)("h5",{class:"mt-4 mb-4"},Object(i.h)("i",{class:"fas fa-exclamation-circle"})," ",Object(i.h)(h.c,{id:"races.signup-closed"},"Påmeldingen er stengt!")))))))}})||o;e.a=u}).call(this,s("hosL").Fragment)},n7ns:function(t,e,s){"use strict";(function(t){function a(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,a)}return s}function c(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?a(Object(s),!0).forEach((function(e){l(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):a(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}function l(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}function o(t,e){const s=void 0!==t.bib;return(void 0!==e.bib)-s||!0===s&&t.bib-e.bib||0}var i,n=s("hosL"),r=s("Utv1"),h=s("/eY4"),d=s("OhSV"),b=(s("Y3FI"),s("fh8t")),p=s.n(b),u=s("go65"),m=s("ZOvn"),O=s("/DnB");s("s4FZ");let j=Object(h.a)(i=class extends n.Component{constructor(t){var e;super(t),e=this,this.toggleDisplayDetails=t=>{const e=t.target.closest("tr").dataset.id,{appState:s}=this.props.stores,{editUserDetails:a}=s;a[e]||s.toggleDisplayDetails(e)},this.adminToggleEditUser=t=>{t.stopPropagation();const e=t.target.closest("tr").dataset.id,{appState:s}=this.props.stores;s.toggleEditUserDetails(e)},this.veterinaryToggleEditUser=t=>{t.stopPropagation();const e=t.target.closest("tr").dataset.id,{appState:s}=this.props.stores;s.toggleVeterinaryUserDetails(e,!0)},this.toggleAdminSendMessage=t=>{const e=t.target.closest("button").dataset.class,{showAdminSendMessage:s}=this.state;s[e]=!s[e],this.setState({showAdminSendMessage:s})},this.toggleAdminSendInboxMessage=t=>{const e=t.target.closest("button").dataset.class,{showAdminSendInboxMessage:s={}}=this.state;s[e]=!s[e],this.setState({showAdminSendInboxMessage:s})},this.toggleAdminImport=t=>{const e=t.target.closest("button").dataset.class,{showAdminImport:s}=this.state;s[e]=!s[e],this.setState({showAdminImport:s})},this.adminSignupEdit=t=>{const{race:e={}}=this.props,s=e.id,{raceStore:a}=this.props.stores,c=t.target.id,l=t.target.value,{classid:o,contestantid:i}=t.target.dataset,n={raceClassId:o,contestantId:i,["raceClassContestant"+r.a.ucfirst(c)]:l};clearTimeout(this.updateTimer[c]),this.updateTimer[c]=setTimeout((async function(){a.editClass({id:s,data:n})}),500)},this.sendEmail=async function(t){const{race:s={}}=e.props,a=s.id,c=t.target.closest("button").dataset.to,l=t.target.closest("button").dataset.raceclassid,{appState:o}=e.props.stores,{message:i}=e.state,{subject:n,body:r}=i,h=await o.sendEmail({to:c,subject:n,body:r,raceId:a,raceClassId:l});e.setState({emailResponse:h})},this.resetEmail=()=>{this.setState({emailResponse:null,message:{subject:"",body:""}})},this.sendInboxMessage=async function(t){const{raceStore:s}=e.props.stores,{race:a={}}=e.props,c=a.id,l=t.target.closest("button").dataset.raceclassid,{inboxMessage:o}=e.state,{body:i}=o,n=await s.sendInboxMessage({body:i,raceId:c,raceClassId:l});e.setState({inboxMessageResponse:n})},this.resetInboxMessage=()=>{this.setState({inboxMessage:{body:""}})},this.signupToRace=async function({signup:t}){const{raceStore:s}=e.props.stores,{race:a={}}=e.props,l=a.id;await s.addContestant({id:l,classId:t.class,newContestant:c({},t)})},this.parseInput=async function(t,s){clearTimeout(e.parseInputTimer),e.parseInputTimer=setTimeout(()=>e.doParseInput(t,s),500)},this.doParseInput=async function(t,s){const a=String(t).split("\n");let c=[];const l=[],o=a[0];c=o.match(/\t/)?o.split("\t"):o.match(/;/)?o.split(";"):o.split(",");for(let t=1,e=a.length;t<e;t+=1){const e=a[t];let s;s=e.match(/\t/)?e.split("\t"):e.match(/;/)?e.split(";"):e.split(",");const o={};s.forEach((t,e)=>{let s=t;"email"===c[e]&&(s=t.toLowerCase()),o[c[e]]=s}),l.push(o)}const{raceStore:i}=e.props.stores,{race:n={}}=e.props;return i.addMultipleContestants({id:n.id,classId:s,contestants:l}),!0},this.chooseSubmenu=t=>{t.stopPropagation();this.setState({submenu:t.target.parentElement.dataset.menu||t.target.dataset.menu})},this.filterByClass=t=>{const e=t.target.closest("button").dataset.id,{appState:s}=this.props.stores;s.toggleSelectedClassId(e,!0)},this.clearSearchForBib=()=>{this.setState({searchForBib:""})},this.savePreCheck=async function(t){const{id:s,chipid:a,name:l,shortname:o,team:i}=t.target.closest("button").dataset,{preCheck:n,dogJournals:h}=e.state,{dogJournalStore:d,userStore:b}=e.props.stores,{user:p={}}=b,u={id:p.id,firstname:p.firstname,lastname:p.lastname,email:p.email,image:p.image},m={id:s,chipId:a,name:l,shortname:o,team:i},O=c({checkType:"preCheck"},r.a.getNestedValue(n,s)||{}),j=[{dog:c({},m),journal:c({},O),veterinary:c({},u)}];h[a]||(h[a]=[]),h[a].push(c(c(c({date:new Date},m),O),u)),await d.insert({data:j}),delete n[s],e.setState({preCheck:n})},this.state={displayDetails:{},editUserDetails:{},showAdminSendMessage:{},showAdminImport:{},message:{},inboxMessage:{},submenu:"chiplists",preCheck:{},raceCheck:{},dogJournals:{}},this.inputRef={},this.updateTimer={},this.parseInputTimer=null}render(){const{showAdminSendMessage:e={},showAdminSendInboxMessage:s={},showAdminImport:a={},message:c={},inboxMessage:l={},inboxMessageResponse:i,emailResponse:h,submenu:b,searchForBib:j,preCheck:f={},raceCheck:g={},dogJournals:v={}}=this.state,{userStore:w,raceStore:x,appState:y}=this.props.stores,{user:k={},teams:S=[],isAdmin:I,isVeterinary:T}=w,{language:C="en"}=k,{displayDetails:D,editUserDetails:R,veterinaryUserDetails:A,selectedClassIds:E=[]}=y,{race:M={}}=this.props,P=t=>{if(j){const e=new RegExp(""+j.replace(/[^a-zA-Z 0-9æøåÆØÅ]/,""),"i");return e.test(t.bib)||e.test(t.firstname)||e.test(t.lastname)}return!0};return Object(n.h)(t,null,Object(n.h)("div",{class:"row"},Object(n.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-0 mb-2"},Object(n.h)("h2",{class:"mb-0"},Object(n.h)(d.c,{id:"races.mushers"},"Deltakere"))),Object(n.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-3 mb-2"},Object(n.h)("div",{class:"w-100 overflow-hidden"},Object(n.h)("div",{class:"d-flex flex-row flex-nowrap pb-2 px-1",style:"overflow: auto; scroll-snap-type: x mandatory;"},M.classes&&M.classes.sort((t,e)=>t.distance-e.distance).map((e,s)=>Object(n.h)(t,null,Object(n.h)("div",{class:"col px-0 pt-2"},Object(n.h)("button",{type:"button",class:`btn btn-block ${0===s&&"rounded-pill-left"} ${s===M.classes.length-1&&"rounded-pill-right"} rounded-none ${E.indexOf(e.id)>-1?"btn-primary":"btn-outline-primary"} text-nowrap`,style:"text-overflow: ellipsis; overflow: hidden;",onClick:this.filterByClass,"data-id":e.id},e.title)))))),Object(n.h)("div",{class:"row mb-3"},Object(n.h)("div",{class:"col-6 offset-3"},Object(n.h)("div",{class:"input-group"},Object(n.h)("input",{class:"form-control form-control-lg",type:"text",placeholder:"Search for bib",value:j,onInput:Object(u.a)(this,"searchForBib")}),j&&Object(n.h)("div",{class:"input-group-append"},Object(n.h)("div",{class:"input-group-text",onClick:this.clearSearchForBib},"x"))))),M.classes&&M.classes.filter(t=>!(E.length>0)||E.indexOf(t.id)>-1).sort((t,e)=>t.distance-e.distance).map(j=>Object(n.h)(t,null,I&&Object(n.h)("span",{class:"float-right"},"Total app users: ",j.contestants&&j.contestants.filter(t=>t.user||t.team).length),Object(n.h)("h5",null,j.title," ",j.startDate&&Object(n.h)(t,null,": ",Object(n.h)("span",{class:"font-weight-lighter"},r.a.formatDate(`${j.startDate} ${j.startTime||"00:00:00"}`,{locale:C,hour12:!1,hour:"2-digit",minute:"2-digit"})," - ",r.a.formatDate(`${j.endDate} ${j.endTime||"00:00:00"}`,{locale:C,hour12:!1,hour:"2-digit",minute:"2-digit"})))),I&&Object(n.h)(t,null,Object(n.h)("a",{class:"mx-2",href:`/tv/top10/${M.id}/${j.id}`},"TV Top 10")," -",Object(n.h)("a",{class:"mx-2",href:`/tv/top5/${M.id}/${j.id}`},"TV Top 5")," -",Object(n.h)("a",{class:"mx-2",href:`/tv/top3/${M.id}/${j.id}`},"TV Top 3")," -",Object(n.h)("a",{class:"mx-2",href:`/tv/team/${M.id}/1`},"TV One team")," -",Object(n.h)("a",{class:"mx-2",href:`/tv/tracking/${M.id}/${j.id}`},"TV tracking")," -",Object(n.h)("a",{class:"mx-2",href:`/embed/top10/${M.id}/${j.id}`},"Embed top10")," -",Object(n.h)("a",{class:"mx-2",href:`/embed/tracking/${M.id}/${j.id}`},"Embed tracking")," -"),Object(n.h)("div",{class:"table-responsive"},Object(n.h)("table",{class:"table table-sm table-striped"},Object(n.h)("thead",null,Object(n.h)("tr",null,Object(n.h)("th",{scope:"col"},"#"),Object(n.h)("th",{scope:"col",style:"min-width: 90%;"},Object(n.h)(d.c,{id:"races.name"},"Navn")))),Object(n.h)("tbody",null,j.contestants&&j.contestants.filter(P).sort(o).map((e,s)=>{const a=x.getTeamById(e.team),c=x.hasVaccines(a),l=e.mandatoryCheck;return Object(n.h)(t,null,Object(n.h)("tr",{onClick:this.toggleDisplayDetails,"data-id":e.id},Object(n.h)("th",{scope:"row"},e.bib?Object(n.h)(t,null,e.bib):Object(n.h)(t,null,Object(n.h)("span",{class:"font-weight-lighter text-muted"},s+1))),Object(n.h)("td",{class:""+(D[e.id]?"font-weight-bold":""),style:""+(D[e.id]||A[e.id]?"":"line-height: 0.8em;")},T&&Object(n.h)(t,null,e.team?Object(n.h)(t,null,Object(n.h)("button",{class:"btn btn-primary btn-sm float-right ml-4",onClick:this.veterinaryToggleEditUser},Object(n.h)("i",{class:"fas fa-user-md"}))):Object(n.h)(t,null,Object(n.h)("button",{class:"btn btn-outline-secondary btn-sm float-right ml-4 disabled",onClick:t=>t.stopPropagation()},Object(n.h)("i",{class:"fas fa-user-md"}))),c?Object(n.h)(t,null,Object(n.h)("button",{class:"btn btn-success btn-sm float-right ml-1",onClick:t=>t.stopPropagation()},Object(n.h)("i",{class:"fas fa-syringe"}))):Object(n.h)(t,null,Object(n.h)("button",{class:"btn btn-outline-secondary btn-sm float-right ml-1",onClick:t=>t.stopPropagation()},Object(n.h)("i",{class:"fas fa-syringe"}))),l?Object(n.h)(t,null,Object(n.h)("button",{class:"btn btn-success btn-sm float-right ml-1",onClick:t=>t.stopPropagation()},Object(n.h)("i",{class:"fas fa-stethoscope"}))):Object(n.h)(t,null,Object(n.h)("button",{class:"btn btn-outline-secondary btn-sm float-right ml-1",onClick:t=>t.stopPropagation()},Object(n.h)("i",{class:"fas fa-stethoscope"})))),I&&Object(n.h)(t,null,Object(n.h)("button",{class:"btn btn-outline-warning btn-sm float-right ml-1",onClick:this.adminToggleEditUser},Object(n.h)("i",{class:"fas fa-user-edit"})),e.paidSignupfee&&Object(n.h)(t,null,Object(n.h)("span",{class:"float-right"},Object(n.h)("i",{class:"fas fa-check text-success"}),Object(n.h)("br",null))),Object(n.h)("small",{class:"float-right"},e.raceStatus&&Object(n.h)(t,null,Object(n.h)("span",{class:"text-muted"},"raceStatus:"),Object(n.h)("br",null)," ",e.raceStatus,Object(n.h)("br",null)),e.raceComment&&Object(n.h)(t,null,Object(n.h)("span",{class:"text-muted"},"raceComment:"),Object(n.h)("br",null)," ",e.raceComment,Object(n.h)("br",null)),e.gpxResultsApproved&&Object(n.h)(t,null,Object(n.h)("span",{class:"text-muted"},"gpxResultsApproved:"),Object(n.h)("br",null)," ",e.gpxResultsApproved,Object(n.h)("br",null)))),I&&M.liveRace>0&&Object(n.h)(t,null,Object(n.h)("span",{class:"float-right text-success mr-2",style:"font-size: 1.2em;"},(e.user||e.team)&&Object(n.h)("i",{class:"fas fa-mobile-alt ml-2"}),e.declaration&&Object(n.h)("i",{class:"fas fa-handshake ml-2",alt:r.a.isoDate(e.declarationDate)}))),D[e.id]?Object(n.h)(t,null,e.flag&&Object(n.h)("span",{class:"mr-2"},e.flag),e.firstname?Object(n.h)(t,null,e.firstname," ",e.lastname,Object(n.h)("br",null)):Object(n.h)(t,null,e.name),Object(n.h)("span",{class:"text-muted"},a.name),Object(n.h)("br",null),Object(n.h)("small",{class:"text-muted"},e.sportsClub),Object(n.h)("br",null),e.facebook&&Object(n.h)("a",{class:"mr-2",href:m.a.asFacebookLink(e.facebook),native:!0,target:"_blank",rel:"noreferrer"},Object(n.h)("i",{class:"fab fa-facebook"})),e.instagram&&Object(n.h)("a",{class:"mr-2",href:m.a.asInstagramLink(e.instagram),native:!0,target:"_blank",rel:"noreferrer"},Object(n.h)("i",{class:"fab fa-instagram"})),Object(n.h)("br",null),I&&Object(n.h)(t,null,e.bib&&Object(n.h)(t,null,Object(n.h)("i",{class:"fas fa-tshirt ml-2"})," ",e.bib),e.startTime&&Object(n.h)(t,null,Object(n.h)("i",{class:"fas fa-clock ml-2"})," ",r.a.isoDate(e.startTime))),e.price1&&Object(n.h)("div",{class:"font-weight-lighter"},Object(n.h)("i",{class:"fas fa-trophy text-warning"})," ",e.price1,e.priceSent&&Object(n.h)(t,null,Object(n.h)("i",{class:"fas fa-check text-success"}))),e.price2&&Object(n.h)("div",{class:"font-weight-lighter"},Object(n.h)("i",{class:"fas fa-trophy text-warning"})," ",e.price2),e.price3&&Object(n.h)("div",{class:"font-weight-lighter"},Object(n.h)("i",{class:"fas fa-trophy text-warning"})," ",e.price3)):Object(n.h)(t,null,e.price1&&Object(n.h)("span",{class:"float-right text-warning",style:"font-size: 1.2em;"},Object(n.h)("i",{class:"fas fa-trophy"}),e.priceSent&&Object(n.h)(t,null,Object(n.h)("i",{class:"fas fa-check text-success"}))),Object(n.h)("nobr",null,e.flag&&Object(n.h)("span",{class:"mr-2"},e.flag),e.firstname?Object(n.h)(t,null,e.firstname," ",e.lastname,Object(n.h)("br",null)):Object(n.h)(t,null,e.name),Object(n.h)("small",{class:"text-muted"},e.sportsClub),Object(n.h)("br",null))),T&&A[e.id]&&Object(n.h)(t,null,Object(n.h)(O.a,{horizontal:"end",vertical:"center"}),Object(n.h)("div",{class:"w-100 overflow-hidden",style:"max-width: 100%;"},Object(n.h)("div",{class:"d-flex flex-row flex-nowrap pb-2 px-1",style:"overflow: auto; scroll-snap-type: x mandatory;"},Object(n.h)("div",{class:"col px-0 pt-2"},Object(n.h)("button",{class:`btn btn-sm btn-block rounded-pill-left rounded-none ${"chiplists"===b?"btn-primary":"btn-outline-primary"} text-nowrap`,style:"text-overflow: ellipsis; overflow: hidden;","data-menu":"chiplists",onClick:this.chooseSubmenu},Object(n.h)("i",{class:"fas fa-user-md"})," ",Object(n.h)(d.c,{id:"racevet.chiplists"},"Vaccines"))),Object(n.h)("div",{class:"col px-0 pt-2"},Object(n.h)("button",{class:`btn btn-sm btn-block rounded-none ${"precheck"===b?"btn-primary":"btn-outline-primary"} text-nowrap`,style:"text-overflow: ellipsis; overflow: hidden;","data-menu":"precheck",onClick:this.chooseSubmenu},Object(n.h)("i",{class:"fas fa-stethoscope"})," ",Object(n.h)(d.c,{id:"racevet.precheck"},"PreCheck"))),Object(n.h)("div",{class:"col px-0 pt-2"},Object(n.h)("button",{class:`btn btn-sm btn-block rounded-pill-right rounded-none ${"racecheck"===b?"btn-primary":"btn-outline-primary"} text-nowrap`,style:"text-overflow: ellipsis; overflow: hidden;","data-menu":"racecheck",onClick:this.chooseSubmenu},Object(n.h)("i",{class:"fas fa-flag-checkered"})," ",Object(n.h)(d.c,{id:"racevet.racecheck"},"RaceCheck"))))),"chiplists"===b&&Object(n.h)(t,null,Object(n.h)("h5",{class:"mt-4 border-bottom"},"Chiplist & Vaccines"),Object(n.h)("div",{class:"container-fluid"},Object(n.h)("div",{class:"row"},a&&a.dogs?a.dogs.map(e=>{let s;return a&&a.vaccines&&(s=a.vaccines.filter(t=>t.chipId===e.chipId)),Object(n.h)(t,null,Object(n.h)("div",{class:"col-12 d-flex my-3"},Object(n.h)("div",{class:"mx-0 mr-1 px-0 position-relative pt-1"},Object(n.h)("div",{class:"text-center border rounded-circle imageRounded imageRoundedMedium text-muted pt-2",style:(e.image?`background-image: url("${e.image.s3SmallLink}"); background-size: cover;`:"")+" border-width: 2px !important;"},!e.image&&Object(n.h)("span",{class:"font-weight-lighter",style:"font-size: 35px;"},r.a.ucfirst(e.name,!0))),Object(n.h)("small",null,Object(n.h)("span",{class:"float-left text-overflow",style:"width: 70px;"},e.name),Object(n.h)("br",null)),(e.birth||e.gender)&&Object(n.h)("small",null,Object(n.h)("small",{class:"font-weight-normal float-right position-absolute text-white bg-info p-1 rounded",style:"top: 0px; right: 0px; line-height: 0.8em;"},e.birth&&Object(n.h)("span",{class:"mr-1 text-white"},r.a.age(e.birth,e.deceased)),e.gender&&Object(n.h)(t,null,"female"===e.gender?Object(n.h)("i",{class:"fas fa-venus"}):Object(n.h)("i",{class:"fas fa-mars"}))))),Object(n.h)("div",{class:"flex-grow-1 row"},Object(n.h)("div",{class:"col-12 font-weight-bold"},Object(n.h)("i",{class:"fas fa-microchip text-muted"})," ",e.chipId),s&&s.map(e=>Object(n.h)("div",{class:"col-4 px-1 overflow-hidden"},Object(n.h)("span",{class:"badge badge-"+(e.inKarens?"warning":"success")},Object(n.h)("span",{class:"font-weight-lighter"},Object(n.h)("i",{class:"fas fa-calendar-check"})," ",r.a.isoDate(e.vaccineAgens.durationEnd,!1,!1,!0),e.inKarens&&Object(n.h)(t,null,Object(n.h)("br",null),"(",Object(n.h)(d.c,{id:"dogs.vaccine-karens"},"karens"),": ",r.a.format(e.karensDaysLeft,0)," ",Object(n.h)(d.c,{id:"dogs.vaccine-karens-days-left"},"days left"),")"))),Object(n.h)("div",{class:"text-overflow"},Object(n.h)("small",{class:"font-weight-light"},e.vaccineAgens.name,Object(n.h)("br",null),Object(n.h)("nobr",null,e.vaccineName),Object(n.h)("br",null))))))))}):Object(n.h)(t,null,Object(n.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 px-0"},Object(n.h)("div",{class:"text-center text-muted"},Object(n.h)("div",{class:"display-1"},Object(n.h)("i",{class:"fas fa-dog"})),Object(n.h)("h3",null,Object(n.h)(d.c,{id:"teams.no-dogs-title"},"No dogs for this team!")))))))),"precheck"===b&&Object(n.h)(t,null,Object(n.h)("h5",{class:"mt-4 border-bottom"},"Precheck"),Object(n.h)("div",{class:"row"},a&&a.dogs?a.dogs.map(e=>{let s;return a&&a.journal&&(s=a.journal.filter(t=>t.chipId===e.chipId)),Object(n.h)(t,null,Object(n.h)("div",{class:"col-12 d-flex my-3"},Object(n.h)("div",{class:"mx-0 mr-1 px-0 position-relative pt-1"},Object(n.h)("div",{class:"text-center border rounded-circle imageRounded imageRoundedMedium text-muted pt-2",style:(e.image?`background-image: url("${e.image.s3SmallLink}"); background-size: cover;`:"")+" border-width: 2px !important;"},!e.image&&Object(n.h)("span",{class:"font-weight-lighter",style:"font-size: 35px;"},r.a.ucfirst(e.name,!0))),Object(n.h)("small",null,Object(n.h)("span",{class:"float-left text-overflow",style:"width: 70px;"},e.name),Object(n.h)("br",null)),(e.birth||e.gender)&&Object(n.h)("small",null,Object(n.h)("small",{class:"font-weight-normal float-right position-absolute text-white bg-info p-1 rounded",style:"top: 0px; right: 0px; line-height: 0.8em;"},e.birth&&Object(n.h)("span",{class:"mr-1 text-white"},r.a.age(e.birth,e.deceased)),e.gender&&Object(n.h)(t,null,"female"===e.gender?Object(n.h)("i",{class:"fas fa-venus"}):Object(n.h)("i",{class:"fas fa-mars"}))))),Object(n.h)("div",{class:"flex-grow-1 row"},Object(n.h)("div",{class:"col-12 font-weight-bold"},Object(n.h)("i",{class:"fas fa-microchip text-muted"})," ",e.chipId.slice(-5)),Object(n.h)("div",{class:"col-12"},s&&s.length>0&&s.map(e=>Object(n.h)(t,null,Object(n.h)("div",{class:"row border-bottom"},Object(n.h)("div",{class:"col-12 text-muted"},Object(n.h)("small",null,Object(n.h)("span",{class:"float-right"},e.checkType&&Object(n.h)(t,null,e.checkType)),r.a.isoDate(e.date)," by ",e.veterinaryFirstname," ",e.veterinaryLastname)),Object(n.h)("div",{class:"col-12 d-flex justify-content-between"},e.diagnoseId>0&&Object(n.h)("span",{class:"mx-1"},Object(n.h)("span",{class:"text-muted"},"ID:")," ",e.diagnoseId),e.heartRate>0&&Object(n.h)("span",{class:"mx-1"},Object(n.h)("span",{class:"text-muted"},"HR:")," ",e.heartRate),e.weight>0&&Object(n.h)("span",{class:"mx-1"},Object(n.h)("i",{class:"fas fa-balance-scale text-muted"})," ",e.weight," ",Object(n.h)("span",{class:"text-muted"},"kg")),e.bodyConditionScore>0&&Object(n.h)("span",{class:"mx-1"},Object(n.h)("span",{class:"text-muted"},"BCS:")," ",e.bodyConditionScore)),Object(n.h)("div",{class:"col-12"},e.generalFindings&&Object(n.h)("span",{class:"mr-1"},Object(n.h)("span",{class:"text-muted"},"Other:")," ",e.generalFindings))))),v[e.chipId]&&v[e.chipId].length>0&&v[e.chipId].map(e=>Object(n.h)(t,null,Object(n.h)("div",{class:"row border-bottom"},Object(n.h)("div",{class:"col-12 text-muted"},Object(n.h)("small",null,Object(n.h)("span",{class:"float-right"},e.checkType&&Object(n.h)(t,null,e.checkType)),r.a.isoDate(e.date)," by ",e.veterinaryFirstname," ",e.veterinaryLastname)),Object(n.h)("div",{class:"col-12 d-flex justify-content-between"},e.diagnoseId>0&&Object(n.h)("span",{class:"mx-1"},Object(n.h)("span",{class:"text-muted"},"ID:")," ",e.diagnoseId),e.heartRate>0&&Object(n.h)("span",{class:"mx-1"},Object(n.h)("span",{class:"text-muted"},"HR:")," ",e.heartRate),e.weight>0&&Object(n.h)("span",{class:"mx-1"},Object(n.h)("i",{class:"fas fa-balance-scale text-muted"})," ",e.weight," ",Object(n.h)("span",{class:"text-muted"},"kg")),e.bodyConditionScore>0&&Object(n.h)("span",{class:"mx-1"},Object(n.h)("span",{class:"text-muted"},"BCS:")," ",e.bodyConditionScore)),Object(n.h)("div",{class:"col-12"},e.generalFindings&&Object(n.h)("span",{class:"mr-1"},Object(n.h)("span",{class:"text-muted"},"Other:")," ",e.generalFindings)))))),Object(n.h)("div",{class:"col-12 form-group"},Object(n.h)("small",null,Object(n.h)("label",{class:"text-overflow w-100 mb-0",for:"diagnoseId"},"Diagnostic"),Object(n.h)("select",{class:"form-control",id:"diagnoseId",onInput:Object(u.a)(this,`preCheck.${e.id}.diagnoseId`),value:r.a.getNestedValue(f,e.id+".diagnoseId")},Object(n.h)("option",{value:""},"-- Please choose --"),Object(n.h)("option",{value:"100"},"No findings")))),Object(n.h)("div",{class:"col-4 form-group"},Object(n.h)("small",null,Object(n.h)("label",{class:"text-overflow w-100 mb-0",for:"weight"},"Weight"),Object(n.h)("input",{type:"number",class:"form-control",id:"weight",onInput:Object(u.a)(this,`preCheck.${e.id}.weight`),value:r.a.getNestedValue(f,e.id+".weight")}))),Object(n.h)("div",{class:"col-4 form-group overflow-hidden"},Object(n.h)("small",null,Object(n.h)("label",{class:"text-overflow w-100 mb-0",for:"heartRate"},"Heart Rate"),Object(n.h)("input",{type:"text",class:"form-control",id:"heartRate",onInput:Object(u.a)(this,`preCheck.${e.id}.heartRate`),value:r.a.getNestedValue(f,e.id+".heartRate")}))),Object(n.h)("div",{class:"col-4 form-group"},Object(n.h)("small",null,Object(n.h)("label",{class:"text-overflow w-100 mb-0",for:"bodyConditionScore"},"BCS"),Object(n.h)("input",{type:"number",class:"form-control",id:"bodyConditionScore",onInput:Object(u.a)(this,`preCheck.${e.id}.bodyConditionScore`),value:r.a.getNestedValue(f,e.id+".bodyConditionScore")}))),Object(n.h)("div",{class:"col-12 form-group"},Object(n.h)("small",null,Object(n.h)("label",{class:"text-overflow w-100 mb-0",for:"generalFindings"},"General findings"),Object(n.h)("input",{type:"text",class:"form-control",id:"generalFindings",onInput:Object(u.a)(this,`preCheck.${e.id}.generalFindings`),value:r.a.getNestedValue(f,e.id+".generalFindings")})),Object(n.h)("small",{id:"generalFindingsHelp",class:"form-text text-muted"},"Teeth, mucus membranes, general condition, other findings.")),Object(n.h)("div",{class:"col-12 form-group"},Object(n.h)("button",{class:"btn btn-outline-success",onClick:this.savePreCheck,"data-id":e.id,"data-chipid":e.chipId,"data-team":a.id,"data-name":e.name,"data-shortname":e.shortName}," Save Pre Check")))))}):Object(n.h)(t,null,Object(n.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 px-0"},Object(n.h)("div",{class:"text-center text-muted"},Object(n.h)("div",{class:"display-1"},Object(n.h)("i",{class:"fas fa-dog"})),Object(n.h)("h3",null,Object(n.h)(d.c,{id:"teams.no-dogs-title"},"No dogs for this team!"))))))),"racecheck"===b&&Object(n.h)(t,null,Object(n.h)("h5",{class:"mt-4 border-bottom"},"Racecheck"),Object(n.h)("div",{class:"row"},a&&a.dogs?a.dogs.map(e=>Object(n.h)(t,null,Object(n.h)("div",{class:"col-12 d-flex my-3"},Object(n.h)("div",{class:"mx-0 mr-1 px-0 position-relative pt-1"},Object(n.h)("div",{class:"text-center border rounded-circle imageRounded imageRoundedMedium text-muted pt-2",style:(e.image?`background-image: url("${e.image.s3SmallLink}"); background-size: cover;`:"")+" border-width: 2px !important;"},!e.image&&Object(n.h)("span",{class:"font-weight-lighter",style:"font-size: 35px;"},r.a.ucfirst(e.name,!0))),Object(n.h)("small",null,Object(n.h)("span",{class:"float-left text-overflow",style:"width: 70px;"},e.name),Object(n.h)("br",null)),(e.birth||e.gender)&&Object(n.h)("small",null,Object(n.h)("small",{class:"font-weight-normal float-right position-absolute text-white bg-info p-1 rounded",style:"top: 0px; right: 0px; line-height: 0.8em;"},e.birth&&Object(n.h)("span",{class:"mr-1 text-white"},r.a.age(e.birth,e.deceased)),e.gender&&Object(n.h)(t,null,"female"===e.gender?Object(n.h)("i",{class:"fas fa-venus"}):Object(n.h)("i",{class:"fas fa-mars"}))))),Object(n.h)("div",{class:"flex-grow-1 row"},Object(n.h)("div",{class:"col-12 font-weight-bold"},Object(n.h)("i",{class:"fas fa-microchip text-muted"})," ",e.chipId.slice(-5)),Object(n.h)("div",{class:"col-4 form-group"},Object(n.h)("small",null,Object(n.h)("label",{class:"text-overflow w-100",for:"weight"},"Weight"),Object(n.h)("input",{type:"number",class:"form-control",id:"weight"}))),Object(n.h)("div",{class:"col-4 form-group overflow-hidden"},Object(n.h)("small",null,Object(n.h)("label",{class:"text-overflow w-100",for:"hrHeartLungs"},"HR/Heart/Lungs"),Object(n.h)("input",{type:"text",class:"form-control",id:"hrHeartLungs"}))),Object(n.h)("div",{class:"col-4 form-group"},Object(n.h)("small",null,Object(n.h)("label",{class:"text-overflow w-100",for:"bcs"},"BCS"),Object(n.h)("input",{type:"number",class:"form-control",id:"bcs"}))),Object(n.h)("div",{class:"col-12 form-group"},Object(n.h)("small",null,Object(n.h)("label",{class:"text-overflow w-100",for:"general"},"General findings"),Object(n.h)("input",{type:"text",class:"form-control",id:"general"})),Object(n.h)("small",{id:"generalHelp",class:"form-text text-muted"},"Teeth, mucus membranes, general condition, other findings.")))))):Object(n.h)(t,null,Object(n.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 px-0"},Object(n.h)("div",{class:"text-center text-muted"},Object(n.h)("div",{class:"display-1"},Object(n.h)("i",{class:"fas fa-dog"})),Object(n.h)("h3",null,Object(n.h)(d.c,{id:"teams.no-dogs-title"},"No dogs for this team!")))))))),I&&R[e.id]&&Object(n.h)(t,null,Object(n.h)("h5",null,"Admin edit:"),Object(n.h)("div",{class:"form-group row my-0"},Object(n.h)("label",{class:"col-4 col-form-label text-right"},"Email"),Object(n.h)("div",{class:"col-8"},e.email)),Object(n.h)("div",{class:"form-group row my-0"},Object(n.h)("label",{for:"bib",class:"col-4 col-form-label text-right"},"bib"),Object(n.h)("div",{class:"col-8"},Object(n.h)("input",{type:"number",class:"form-control",id:"bib","data-classid":j.id,"data-contestantid":e.id,onInput:this.adminSignupEdit,value:e.bib}))),Object(n.h)("div",{class:"form-group row my-0"},Object(n.h)("label",{for:"startTime",class:"col-4 col-form-label text-right"},"startTime"),Object(n.h)("div",{class:"col-8"},Object(n.h)("input",{type:"date",class:"form-control",id:"startTime","data-classid":j.id,"data-contestantid":e.id,onInput:this.adminSignupEdit,value:e.startTime?r.a.isoDate(e.startTime,!1,!1,!1):null}))),Object(n.h)("div",{class:"form-group row my-0"},Object(n.h)("label",{for:"team",class:"col-4 col-form-label text-right"},"team"),Object(n.h)("div",{class:"col-8"},Object(n.h)("input",{type:"number",class:"form-control",id:"team","data-classid":j.id,"data-contestantid":e.id,onInput:this.adminSignupEdit,value:e.team}))),Object(n.h)("div",{class:"form-group row my-0"},Object(n.h)("label",{for:"user",class:"col-4 col-form-label text-right"},"user"),Object(n.h)("div",{class:"col-8"},Object(n.h)("input",{type:"number",class:"form-control",id:"user","data-classid":j.id,"data-contestantid":e.id,onInput:this.adminSignupEdit,value:e.user}))),Object(n.h)("div",{class:"form-group row my-0"},Object(n.h)("label",{for:"team",class:"col-4 col-form-label text-right"},"Race status"),Object(n.h)("div",{class:"col-8"},Object(n.h)("select",{class:"form-control",id:"raceStatus","data-classid":j.id,"data-contestantid":e.id,onInput:this.adminSignupEdit,value:e.raceStatus},Object(n.h)("option",{value:""},"-- Choose race status --"),Object(n.h)("option",{value:"OK"},"OK - Everything ok"),Object(n.h)("option",{value:"DNS"},"DNS - Did Not Start"),Object(n.h)("option",{value:"DNF"},"DNF - Did Not Finish"),Object(n.h)("option",{value:"DNQ"},"DNQ - Did not qualify"),Object(n.h)("option",{value:"DQ"},"DQ - Disqualified")))),Object(n.h)("div",{class:"form-group row my-0"},Object(n.h)("label",{for:"raceComment",class:"col-4 col-form-label text-right"},"Race comment"),Object(n.h)("div",{class:"col-8"},Object(n.h)("input",{type:"text",class:"form-control",id:"raceComment","data-classid":j.id,"data-contestantid":e.id,onInput:this.adminSignupEdit,value:e.raceComment}))),Object(n.h)("div",{class:"form-group row my-0"},Object(n.h)("label",{for:"gpxResultsApproved",class:"col-4 col-form-label text-right"},"GPX Results approved (date)"),Object(n.h)("div",{class:"col-8"},Object(n.h)("input",{type:"date",class:"form-control",id:"gpxResultsApproved","data-classid":j.id,"data-contestantid":e.id,onInput:this.adminSignupEdit,value:e.gpxResultsApproved?r.a.isoDate(e.gpxResultsApproved,!1,!1,!0):null}))),Object(n.h)("div",{class:"form-group row my-0"},Object(n.h)("label",{for:"paidSignupfee",class:"col-4 col-form-label text-right"},"paidSignupfee (date)"),Object(n.h)("div",{class:"col-8"},Object(n.h)("input",{type:"date",class:"form-control",id:"paidSignupfee","data-classid":j.id,"data-contestantid":e.id,onInput:this.adminSignupEdit,value:e.paidSignupfee?r.a.isoDate(e.paidSignupfee,!1,!1,!0):null}))),Object(n.h)("div",{class:"form-group row my-0"},Object(n.h)("label",{for:"startOrder",class:"col-4 col-form-label text-right"},"startOrder"),Object(n.h)("div",{class:"col-8"},Object(n.h)("input",{type:"number",class:"form-control",id:"startOrder","data-classid":j.id,"data-contestantid":e.id,onInput:this.adminSignupEdit,value:e.startOrder}))),Object(n.h)("div",{class:"form-group row my-0"},Object(n.h)("label",{for:"cellphone",class:"col-4 col-form-label text-right"},"Mobil"),Object(n.h)("div",{class:"col-8"},Object(n.h)("input",{type:"text",class:"form-control",id:"cellphone","data-classid":j.id,"data-contestantid":e.id,onInput:this.adminSignupEdit,value:e.cellphone}))),Object(n.h)("div",{class:"form-group row my-0"},Object(n.h)("label",{for:"name",class:"col-4 col-form-label text-right"},"Navn"),Object(n.h)("div",{class:"col-8"},Object(n.h)("input",{type:"text",class:"form-control",id:"name","data-classid":j.id,"data-contestantid":e.id,onInput:this.adminSignupEdit,value:e.name}))),Object(n.h)("div",{class:"form-group row my-0"},Object(n.h)("label",{for:"firstname",class:"col-4 col-form-label text-right"},"Fornavn"),Object(n.h)("div",{class:"col-8"},Object(n.h)("input",{type:"text",class:"form-control",id:"firstname","data-classid":j.id,"data-contestantid":e.id,onInput:this.adminSignupEdit,value:e.firstname}))),Object(n.h)("div",{class:"form-group row my-0"},Object(n.h)("label",{for:"lastname",class:"col-4 col-form-label text-right"},"Etternavn"),Object(n.h)("div",{class:"col-8"},Object(n.h)("input",{type:"text",class:"form-control",id:"lastname","data-classid":j.id,"data-contestantid":e.id,onInput:this.adminSignupEdit,value:e.lastname}))),Object(n.h)("div",{class:"form-group row my-0"},Object(n.h)("label",{for:"address",class:"col-4 col-form-label text-right"},"Adresse"),Object(n.h)("div",{class:"col-8"},Object(n.h)("input",{type:"text",class:"form-control",id:"address","data-classid":j.id,"data-contestantid":e.id,onInput:this.adminSignupEdit,value:e.address}))),Object(n.h)("div",{class:"form-group row my-0"},Object(n.h)("label",{for:"postalcode",class:"col-4 col-form-label text-right"},"Postalcode"),Object(n.h)("div",{class:"col-8"},Object(n.h)("input",{type:"text",class:"form-control",id:"postalcode","data-classid":j.id,"data-contestantid":e.id,onInput:this.adminSignupEdit,value:e.postalcode}))),Object(n.h)("div",{class:"form-group row my-0"},Object(n.h)("label",{for:"postalplace",class:"col-4 col-form-label text-right"},"Postalplace"),Object(n.h)("div",{class:"col-8"},Object(n.h)("input",{type:"text",class:"form-control",id:"postalplace","data-classid":j.id,"data-contestantid":e.id,onInput:this.adminSignupEdit,value:e.postalplace}))),Object(n.h)("div",{class:"form-group row my-0"},Object(n.h)("label",{for:"flag",class:"col-4 col-form-label text-right"},"flag (emoji)"),Object(n.h)("div",{class:"col-8"},Object(n.h)("input",{type:"text",class:"form-control",id:"flag","data-classid":j.id,"data-contestantid":e.id,onInput:this.adminSignupEdit,value:e.flag}))),Object(n.h)("div",{class:"form-group row my-0"},Object(n.h)("label",{for:"countryCode",class:"col-4 col-form-label text-right"},"countryCode (iso)"),Object(n.h)("div",{class:"col-8"},Object(n.h)("input",{type:"text",class:"form-control",id:"countryCode","data-classid":j.id,"data-contestantid":e.id,onInput:this.adminSignupEdit,value:e.countryCode}))),Object(n.h)("div",{class:"form-group row my-0"},Object(n.h)("label",{for:"birthdate",class:"col-4 col-form-label text-right"},"birthdate"),Object(n.h)("div",{class:"col-8"},Object(n.h)("input",{type:"date",class:"form-control",id:"birthdate","data-classid":j.id,"data-contestantid":e.id,onInput:this.adminSignupEdit,value:e.birthdate?r.a.isoDate(e.birthdate,!1,!1,!0):null}))),Object(n.h)("div",{class:"form-group row my-0"},Object(n.h)("label",{for:"sportsClub",class:"col-4 col-form-label text-right"},"Klubb"),Object(n.h)("div",{class:"col-8"},Object(n.h)("input",{type:"text",class:"form-control",id:"sportsClub","data-classid":j.id,"data-contestantid":e.id,onInput:this.adminSignupEdit,value:e.sportsClub}))),Object(n.h)("div",{class:"form-group row my-0"},Object(n.h)("label",{for:"facebook",class:"col-4 col-form-label text-right"},"Facebook"),Object(n.h)("div",{class:"col-8"},Object(n.h)("input",{type:"text",class:"form-control",id:"facebook","data-classid":j.id,"data-contestantid":e.id,onInput:this.adminSignupEdit,value:e.facebook}))),Object(n.h)("div",{class:"form-group row my-0"},Object(n.h)("label",{for:"instagram",class:"col-4 col-form-label text-right"},"Instagram"),Object(n.h)("div",{class:"col-8"},Object(n.h)("input",{type:"text",class:"form-control",id:"instagram","data-classid":j.id,"data-contestantid":e.id,onInput:this.adminSignupEdit,value:e.instagram}))),Object(n.h)("div",{class:"form-group row my-0"},Object(n.h)("label",{for:"team",class:"col-4 col-form-label text-right"},"Klasse"),Object(n.h)("div",{class:"col-8"},Object(n.h)("select",{class:"form-control",id:"class","aria-describedby":"classHelp","data-classid":j.id,"data-contestantid":e.id,onInput:this.adminSignupEdit,value:e.class},Object(n.h)("option",{value:""},"-- Choose race class --"),M.classes&&M.classes.sort((t,e)=>t.distance-e.distance).map(e=>Object(n.h)(t,null,Object(n.h)("option",{value:e.id},e.title," - ",e.distance," km - Påmelding: ",e.signupfee||M.signupfee," NOK")))))),Object(n.h)("div",{class:"form-group row my-0"},Object(n.h)("label",{for:"price1",class:"col-4 col-form-label text-right"},"Price 1"),Object(n.h)("div",{class:"col-8"},Object(n.h)("input",{type:"text",class:"form-control",id:"price1","data-classid":j.id,"data-contestantid":e.id,onInput:this.adminSignupEdit,value:e.price1}))),Object(n.h)("div",{class:"form-group row my-0"},Object(n.h)("label",{for:"price2",class:"col-4 col-form-label text-right"},"Price 2"),Object(n.h)("div",{class:"col-8"},Object(n.h)("input",{type:"text",class:"form-control",id:"price2","data-classid":j.id,"data-contestantid":e.id,onInput:this.adminSignupEdit,value:e.price2}))),Object(n.h)("div",{class:"form-group row my-0"},Object(n.h)("label",{for:"price3",class:"col-4 col-form-label text-right"},"Price 3"),Object(n.h)("div",{class:"col-8"},Object(n.h)("input",{type:"text",class:"form-control",id:"price3","data-classid":j.id,"data-contestantid":e.id,onInput:this.adminSignupEdit,value:e.price3}))),Object(n.h)("div",{class:"form-group row my-0"},Object(n.h)("label",{for:"priceSent",class:"col-4 col-form-label text-right"},"Price sent"),Object(n.h)("div",{class:"col-8"},Object(n.h)("input",{type:"date",class:"form-control",id:"priceSent","data-classid":j.id,"data-contestantid":e.id,onInput:this.adminSignupEdit,value:e.priceSent?r.a.isoDate(e.priceSent,!1,!1,!0):null}))),Object(n.h)("div",{class:"form-group row my-5"},Object(n.h)("div",{class:"col-8"},Object(n.h)("button",{type:"button",class:"btn btn-danger float-right",id:"deleteUser",value:"1",onClick:this.adminSignupEdit,"data-classid":j.id,"data-contestantid":e.id},"Delete user from this class")))))))})))),I&&Object(n.h)(t,null,e[j.id]?Object(n.h)(t,null,Object(n.h)("div",{class:"container"},Object(n.h)("div",{class:"row"},Object(n.h)("div",{class:"col-12"},Object(n.h)("h5",null,"Email to all mushers in ",j.title),Object(n.h)("div",{class:"overflow-auto p-5",style:"max-height: 30vh;"},Object(n.h)("small",null,j.emails&&j.emails.map(t=>{return Object(n.h)("div",{class:"border rounded-lg p-3 mb-3"},Object(n.h)("div",{class:"row bg-light"},Object(n.h)("div",{class:"col-3 text-right"},"Date:"),Object(n.h)("div",{class:"col-9"},r.a.formatDate(t.date,{locale:C,hour12:!1,hour:"2-digit",minute:"2-digit"}))),Object(n.h)("div",{class:"row bg-light"},Object(n.h)("div",{class:"col-3 text-right"},"To:"),Object(n.h)("div",{class:"col-9"},t.to.map(t=>Object(n.h)("span",{class:"badge badge-info px-2 py-1 mr-2"},t)))),Object(n.h)("div",{class:"row bg-light"},Object(n.h)("div",{class:"col-3 text-right"},"Subject:"),Object(n.h)("div",{class:"col-9"},t.subject)),Object(n.h)("div",{class:"row mt-2"},Object(n.h)("div",{class:"col-3 text-right"},"Body:"),Object(n.h)("div",{class:"col-9",dangerouslySetInnerHTML:{__html:(e=t.body,"string"==typeof e?e.replace(/[\n]/g,"<br>"):e)}})));var e}))),Object(n.h)("div",{class:"form-group row"},Object(n.h)("label",{for:"subject",class:"col-2 col-form-label text-right font-weight-lighter"},"To"),Object(n.h)("div",{class:"col-10"},j.contestants&&j.contestants.map(e=>Object(n.h)(t,null,Object(n.h)("span",{class:"badge badge-info px-2 py-1 mr-2"},e.firstname," ",e.lastname," (",e.email,")"))))),Object(n.h)("div",{class:"form-group row"},Object(n.h)("label",{for:"subject",class:"col-2 col-form-label text-right font-weight-lighter"},"Subject"),Object(n.h)("div",{class:"col-10"},Object(n.h)("input",{type:"text",class:"form-control",id:"subject",onInput:Object(u.a)(this,"message.subject"),value:c.subject}))),Object(n.h)("div",{class:"form-group row"},Object(n.h)("label",{for:"body",class:"col-2 col-form-label text-right font-weight-lighter"},"Message"),Object(n.h)("div",{class:"col-10"},Object(n.h)("textarea",{type:"text",class:"form-control",id:"body",rows:"10",onInput:Object(u.a)(this,"message.body"),value:c.body})),Object(n.h)("div",{class:"col-5 contain-images"},c.body&&Object(n.h)(p.a,{markdown:c.body,markdownOpts:m.a.getMarkdownOptions()}))),h&&Object(n.h)(t,null,Object(n.h)("div",{class:"alert alert-"+(h&&h.status>=300?"danger":"success"),role:"alert"},Object(n.h)("small",null,Object(n.h)("xmp",null,JSON.stringify(h,null,4))))),Object(n.h)("button",{class:"btn btn-success float-right",type:"button","data-to":j.contestants&&j.contestants.map(t=>t.email),"data-raceclassid":j.id,onClick:this.sendEmail},Object(n.h)("i",{class:"fas fa-paper-plane"})," Send email to all mushers"),Object(n.h)("button",{class:"btn btn-danger float-right mr-2",type:"button",onClick:this.resetEmail},Object(n.h)("i",{class:"fas fa-times"})," Reset email")),Object(n.h)("div",{class:"col-12 text-center"},Object(n.h)("button",{class:"btn btn-sm btn-link",type:"button",onClick:this.toggleAdminSendMessage,"data-class":j.id},"Hide email form"))))):Object(n.h)(t,null,Object(n.h)("div",{class:"col-12 text-center"},Object(n.h)("button",{class:"btn btn-sm btn-link",type:"button",onClick:this.toggleAdminSendMessage,"data-class":j.id},"Send email to all in this class")),Object(n.h)("div",{class:"col-12 text-center"},Object(n.h)("button",{class:"btn btn-sm btn-link",type:"button",onClick:this.toggleAdminSendInboxMessage,"data-class":j.id},"Send inbox message to all in this class")),Object(n.h)("div",{class:"col-12 text-center"},Object(n.h)("button",{class:"btn btn-sm btn-link",type:"button",onClick:this.toggleAdminImport,"data-class":j.id},"Toggle import form"))),s[j.id]?Object(n.h)(t,null,Object(n.h)("div",{class:"container"},Object(n.h)("div",{class:"row"},Object(n.h)("div",{class:"col-12"},Object(n.h)("h5",null,"Inbox Message to all mushers in ",j.title),Object(n.h)("div",{class:"form-group row"},Object(n.h)("label",{for:"body",class:"col-2 col-form-label text-right font-weight-lighter"},"Inbox message"),Object(n.h)("div",{class:"col-10"},Object(n.h)("textarea",{type:"text",class:"form-control",id:"body",rows:"10",onInput:Object(u.a)(this,"inboxMessage.body"),value:l.body})),Object(n.h)("div",{class:"col-5 contain-images"},l.body&&Object(n.h)(p.a,{markdown:l.body,markdownOpts:m.a.getMarkdownOptions()}))),Object(n.h)("div",{class:"clearfix"},Object(n.h)("button",{class:"btn btn-success float-right",type:"button","data-raceclassid":j.id,onClick:this.sendInboxMessage},Object(n.h)("i",{class:"fas fa-paper-plane"})," Send inbox message to all mushers"),Object(n.h)("button",{class:"btn btn-danger float-right mr-2",type:"button",onClick:this.resetInboxMessage},Object(n.h)("i",{class:"fas fa-times"})," Reset inbox message")),i&&Object(n.h)(t,null,Object(n.h)("div",{class:"alert alert-"+(i&&i.status>=300?"danger":"success"),role:"alert",style:"max-height: 20vh;"},Object(n.h)("small",null,Object(n.h)("xmp",null,JSON.stringify(i,null,4)))))),Object(n.h)("div",{class:"col-12 text-center"},Object(n.h)("button",{class:"btn btn-sm btn-link",type:"button",onClick:this.toggleAdminSendInboxMessage,"data-class":j.id},"Hide inboxmessage form"))))):Object(n.h)(t,null),I&&a[j.id]&&Object(n.h)(t,null,Object(n.h)("div",{class:"form-group"},Object(n.h)("label",{for:"importUsers"},Object(n.h)(d.c,{id:"races.paste-users"},"Paste your user data here to import users"),":"),Object(n.h)("textarea",{class:"form-control",id:"importUsers",rows:"20",oninput:t=>this.parseInput(t.target.value,j.id)})))))))))}})||i;e.a=j}).call(this,s("hosL").Fragment)},t1gC:function(t,e,s){"use strict";s.r(e),function(t){function a(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,a)}return s}function c(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?a(Object(s),!0).forEach((function(e){l(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):a(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}function l(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}var o,i=s("hosL"),n=s("Utv1"),r=s("/eY4"),h=s("OhSV"),d=s("Y3FI"),b=s("fh8t"),p=s.n(b),u=(s("go65"),s("Ysxg")),m=s("9lZG"),O=(s("aGZh"),s("om2D"),s("+JSK")),j=s("/DnB"),f=s("w5T0"),g=s("ULR1"),v=s("hwiY"),w=s("uAGO"),x=s("n7ns"),y=s("Pbyq"),k=s("HGwV"),S=s("J9nn"),I=s("ZOvn");const T=I.a.marginTop(!1),C=I.a.marginTopBack(!1),D=I.a.marginBottom(),R=(I.a.subMenuMarginTop(),{isLoading:!1,showAdminSendMessage:{},newRaceArticle:{},newRaceUserImage:{},message:{subject:"",body:""}});let A=Object(r.a)(o=class extends i.Component{constructor(t){var e;super(t),e=this,this.likeRace=async function(){const{raceStore:t}=e.props.stores,{race:s}=t;await t.likeRace({id:s.id})},this.toggleAddComment=t=>{const e=t.target.parentElement.dataset.id||t.target.dataset.id,{showAddComment:s}=this.state;this.setState({showAddComment:!s},()=>{this.inputRef[e]&&this.inputRef[e].focus()})},this.chooseSubmenu=t=>{const e=t.target.parentElement.dataset.menu||t.target.dataset.menu;this.setState({submenu:e});const{raceid:s}=this.props;Object(d.route)(`/app-races/${s}/${e}`)},this.resizeTextarea=t=>{let e=t;e.target&&(e=t.target);const{scrollHeight:s}=e;e.style.height=s+"px"},this.resizeAllTextareas=()=>{const t=document.getElementsByTagName("textarea");for(let e=0,s=t.length;e<s;e+=1){this.resizeTextarea(t[e])}},this.addNavigation=t=>{this.setState({submenu:t.submenu})},this.back=()=>{Object(d.route)("/")},this.state=c(c({},R),{},{showAdminSendMessage:{},newRaceArticle:{},newRaceUserImage:{},message:{subject:"",body:""},submenu:t.submenu||"about"}),this.inputRef={},this.updateTimer={}}async loadRace(t=this.props){this.setState({isLoading:!0});const{raceStore:e,userStore:s}=t.stores,{user:a={}}=s,{raceid:l}=t;await e.load(l),this.setState({isLoading:!1});let o={};const{race:i}=e;if(i.classes&&a&&a.email)for(let t=0,e=i.classes.length;t<e;t+=1){const e=i.classes[t];if(e.contestants){const t=e.contestants.findIndex(t=>t.email===a.email);t>-1&&(o=c(c({},e.contestants[t]),{},{class:e.id}))}}e.updateKeyValue("signup",o),o.user&&await s.getDogs({id:o.user});const n=i.classes.filter(t=>t.contestants&&t.contestants.length>0).map(t=>t.contestants.filter(t=>t.team>0).map(t=>t.team)).flat();n.length>0&&l&&await e.loadTeams(n.join(",")),e.getAllClassesSortedBy(),await e.loadPublicInteractions(l)}componentDidMount(){this.loadRace(),this.resizeAllTextareas()}componentWillReceiveProps(t){t.raceid!==this.props.raceid&&this.loadRace(t),t.submenu!==this.props.submenu&&this.addNavigation(t)}render(){const{submenu:e}=this.state,{showAddComment:s}=this.state,{userStore:a,raceStore:c,appState:l}=this.props.stores,{user:o={},teams:r=[],isAdmin:d}=a,{language:b="en"}=o,{raceid:R}=this.props,{race:A,signup:E}=c,{likes:M=[],comments:P=[]}=A,$=A.likes&&A.likes.findIndex(t=>t.user===o.id)>-1,L=new Date;let N="";L>=new Date(A.startDate)&&L<=new Date(A.endDate)?N="race":L>=new Date(A.signupStartDate)&&L<=new Date(A.signupEndDate)&&(N="signup");const H=1===A.liveRace,B=!H||!!E.email;return"tracking"===e?Object(i.h)(k.a,{stores:this.props.stores,raceid:R}):Object(i.h)("div",{class:"container-fluid",style:`margin-bottom: ${D}; margin-top: ${T};`},Object(i.h)("button",{class:"btn btn-link pl-0 fixed-top text-primary",style:`top: ${C}; left: 5px; font-size: 35px; width: 45px;`,onClick:this.back},Object(i.h)("i",{class:"fas fa-arrow-circle-left"})),Object(i.h)("div",{class:"row m-0"},Object(i.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-1 mb-2 p-0"},Object(i.h)("div",{class:"row d-flex align-items-center position-relative"},Object(i.h)("h3",{class:"position-absolute",style:"top: 3px; right: 5px;"},"signup"===N&&!H&&Object(i.h)(t,null,Object(i.h)("span",{class:"badge badge-primary badge-lg border border-white ml-2","data-menu":"signup",onClick:this.chooseSubmenu},Object(i.h)(h.c,{id:"races.signup-open"},"Påmelding åpen"))),"race"===N&&Object(i.h)(t,null,Object(i.h)("span",{class:"badge badge-danger border border-white ml-2"},Object(i.h)(h.c,{id:"races.race-in-progress"},"Løp pågår"))),"done"===N&&Object(i.h)(t,null,Object(i.h)("span",{class:"badge badge-success border border-white ml-2"},Object(i.h)(h.c,{id:"races.race-finished"},"Løp avsluttet")))),A.images&&A.images[0]?Object(i.h)("img",{src:A.images[0].s3LargeLink,class:"img-fluid"}):""))),Object(i.h)("div",{class:"row"},Object(i.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3"},d&&Object(i.h)(t,null,Object(i.h)("a",{class:"btn btn-primary float-right",href:`https://homerunrace.no/index#/race/${A.id}/edit`},"Edit")),Object(i.h)("h3",null,A.title),Object(i.h)("div",null,A.startDate&&Object(i.h)(t,null,Object(i.h)(h.c,{id:"races.periode"},"Periode"),": ",n.a.formatDate(A.startDate,{locale:"no-NB",hour12:!1,hour:"2-digit",minute:"2-digit"})),A.endDate&&Object(i.h)(t,null," - ",n.a.formatDate(A.endDate,{locale:"no-NB",hour12:!1,hour:"2-digit",minute:"2-digit"}))))),Object(i.h)("div",{class:"row"},Object(i.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3"},Object(i.h)("div",{class:"row"},Object(i.h)("div",{class:"w-100 overflow-hidden"},Object(i.h)("div",{class:"d-flex flex-row flex-nowrap pb-2 px-1",style:"overflow: auto; scroll-snap-type: x mandatory;"},Object(i.h)("div",{class:"col px-0 pt-2"},Object(i.h)("button",{class:`btn btn-block rounded-pill-left rounded-none ${"about"===e?"btn-primary":"btn-outline-primary"} text-nowrap`,style:"text-overflow: ellipsis; overflow: hidden;","data-menu":"about",onClick:this.chooseSubmenu},Object(i.h)("i",{class:"fas fa-info-circle"})," ",Object(i.h)(h.c,{id:"race.about"},"About")),"about"===e&&Object(i.h)(j.a,{horizontal:"center",vertical:"end"})),Object(i.h)("div",{class:"col px-0 pt-2"},Object(i.h)("button",{class:`btn btn-block rounded-none ${"results"===e?"btn-primary":"btn-outline-primary"} text-nowrap`,style:"text-overflow: ellipsis; overflow: hidden;","data-menu":"results",onClick:this.chooseSubmenu},Object(i.h)("i",{class:"fas fa-list-ol"})," ",Object(i.h)(h.c,{id:"race.results"},"Results")),"results"===e&&Object(i.h)(j.a,{horizontal:"center",vertical:"end"})),Object(i.h)("div",{class:"col px-0 pt-2"},Object(i.h)("button",{class:`btn btn-block rounded-none ${"tracking"===e?"btn-primary":"btn-outline-primary"} text-nowrap`,style:"text-overflow: ellipsis; overflow: hidden;","data-menu":"tracking",onClick:this.chooseSubmenu},Object(i.h)("i",{class:"fas fa-map-marker-alt"})," ",Object(i.h)(h.c,{id:"race.tracking"},"Tracking")),"tracking"===e&&Object(i.h)(j.a,{horizontal:"center",vertical:"end"})),Object(i.h)("div",{class:"col px-0 pt-2"},Object(i.h)("button",{class:`btn btn-block rounded-none ${"news"===e?"btn-primary":"btn-outline-primary"} text-nowrap`,style:"text-overflow: ellipsis; overflow: hidden;","data-menu":"news",onClick:this.chooseSubmenu},Object(i.h)("i",{class:"fas fa-rss"})," ",Object(i.h)(h.c,{id:"race.news"},"News")),"news"===e&&Object(i.h)(j.a,{horizontal:"center",vertical:"end"})),Object(i.h)("div",{class:"col px-0 pt-2"},Object(i.h)("button",{class:`btn btn-block rounded-none ${"userImages"===e?"btn-primary":"btn-outline-primary"} text-nowrap`,style:"text-overflow: ellipsis; overflow: hidden;","data-menu":"userImages",onClick:this.chooseSubmenu},Object(i.h)("i",{class:"fas fa-images"})," ",Object(i.h)(h.c,{id:"race.user-images"},"User images")),"userImages"===e&&Object(i.h)(j.a,{horizontal:"center",vertical:"end"})),A.rules&&Object(i.h)("div",{class:"col px-0 pt-2"},Object(i.h)("button",{class:`btn btn-block rounded-none ${"rules"===e?"btn-primary":"btn-outline-primary"} text-nowrap`,style:"text-overflow: ellipsis; overflow: hidden;","data-menu":"rules",onClick:this.chooseSubmenu},Object(i.h)("i",{class:"fas fa-gavel"})," ",Object(i.h)(h.c,{id:"race.rules"},"Rules")),"rules"===e&&Object(i.h)(j.a,{horizontal:"center",vertical:"end"})),A.veterinaryInfo&&Object(i.h)("div",{class:"col px-0 pt-2"},Object(i.h)("button",{class:`btn btn-block rounded-none ${"veterinary"===e?"btn-primary":"btn-outline-primary"} text-nowrap`,style:"text-overflow: ellipsis; overflow: hidden;","data-menu":"veterinary",onClick:this.chooseSubmenu},Object(i.h)("i",{class:"fas fa-stethoscope"})," ",Object(i.h)(h.c,{id:"race.veterinary"},"Veterinary info")),"veterinary"===e&&Object(i.h)(j.a,{horizontal:"center",vertical:"end"})),A.checkpoints&&Object(i.h)("div",{class:"col px-0 pt-2"},Object(i.h)("button",{class:`btn btn-block rounded-none ${"checkpoints"===e?"btn-primary":"btn-outline-primary"} text-nowrap`,style:"text-overflow: ellipsis; overflow: hidden;","data-menu":"checkpoints",onClick:this.chooseSubmenu},Object(i.h)("i",{class:"fas fa-map-marker-alt"})," ",Object(i.h)(h.c,{id:"race.checkpoints"},"Checkpoints")),"checkpoints"===e&&Object(i.h)(j.a,{horizontal:"center",vertical:"end"})),A.trailDescription&&Object(i.h)("div",{class:"col px-0 pt-2"},Object(i.h)("button",{class:`btn btn-block rounded-none ${"track"===e?"btn-primary":"btn-outline-primary"} text-nowrap`,style:"text-overflow: ellipsis; overflow: hidden;","data-menu":"track",onClick:this.chooseSubmenu},Object(i.h)("i",{class:"fas fa-map-signs"})," ",Object(i.h)(h.c,{id:"race.track-description"},"Track description")),"track"===e&&Object(i.h)(j.a,{horizontal:"center",vertical:"end"})),A.program&&Object(i.h)("div",{class:"col px-0 pt-2"},Object(i.h)("button",{class:`btn btn-block rounded-none ${"program"===e?"btn-primary":"btn-outline-primary"} text-nowrap`,style:"text-overflow: ellipsis; overflow: hidden;","data-menu":"program",onClick:this.chooseSubmenu},Object(i.h)("i",{class:"fas fa-list-alt"})," ",Object(i.h)(h.c,{id:"race.program"},"Program")),"program"===e&&Object(i.h)(j.a,{horizontal:"center",vertical:"end"})),A.prices&&Object(i.h)("div",{class:"col px-0 pt-2"},Object(i.h)("button",{class:`btn btn-block rounded-none ${"prices"===e?"btn-primary":"btn-outline-primary"} text-nowrap`,style:"text-overflow: ellipsis; overflow: hidden;","data-menu":"prices",onClick:this.chooseSubmenu},Object(i.h)("i",{class:"fas fa-award"})," ",Object(i.h)(h.c,{id:"race.prices"},"Premier")),"prices"===e&&Object(i.h)(j.a,{horizontal:"center",vertical:"end"})),!H&&Object(i.h)("div",{class:"col px-0 pt-2"},Object(i.h)("button",{class:`btn btn-block rounded-none ${"classes"===e?"btn-primary":"btn-outline-primary"} text-nowrap`,style:"text-overflow: ellipsis; overflow: hidden;","data-menu":"classes",onClick:this.chooseSubmenu},Object(i.h)("i",{class:"fas fa-folder-open"})," ",Object(i.h)(h.c,{id:"race.classes"},"Classes")),"classes"===e&&Object(i.h)(j.a,{horizontal:"center",vertical:"end"})),Object(i.h)("div",{class:"col px-0 pt-2"},Object(i.h)("button",{class:`btn btn-block rounded-none ${B?"":"rounded-pill-right"} ${"mushers"===e?"btn-primary":"btn-outline-primary"} text-nowrap`,style:"text-overflow: ellipsis; overflow: hidden;","data-menu":"mushers",onClick:this.chooseSubmenu},Object(i.h)("i",{class:"fas fa-users"})," ",Object(i.h)(h.c,{id:"races.mushers"},"Mushers")),"mushers"===e&&Object(i.h)(j.a,{horizontal:"center",vertical:"end"})),B&&Object(i.h)("div",{class:"col px-0 pt-2"},Object(i.h)("button",{class:`btn btn-block rounded-pill-right rounded-none ${"signup"===e?"btn-primary":"btn-outline-primary"} text-nowrap`,style:"text-overflow: ellipsis; overflow: hidden;","data-menu":"signup",onClick:this.chooseSubmenu},Object(i.h)("i",{class:"fas fa-user-edit"})," ",Object(i.h)(h.c,{id:"race.signup"},"Sign up")),"signup"===e&&Object(i.h)(j.a,{horizontal:"center",vertical:"end"}))))))),"about"===e&&Object(i.h)(t,null,Object(i.h)(S.a,{stores:this.props.stores,race:A}),Object(i.h)("div",{class:"row"},Object(i.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-0 mb-2"},Object(i.h)("h2",{class:"mb-0"},Object(i.h)(h.c,{id:"race.about"},"Om løpet"))),Object(i.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-3 mb-2"},Object(i.h)("p",{class:"clearfix"},Object(i.h)("strong",null,Object(i.h)(p.a,{markdown:I.a.replaceImages(A.ingress,A.images,b),markdownOpts:I.a.getMarkdownOptions()}))),"signup"===N&&Object(i.h)(t,null,H?Object(i.h)(t,null,Object(i.h)("button",{class:"btn btn-block btn-success mb-3","data-menu":"signup",onClick:this.chooseSubmenu},Object(i.h)("i",{class:"fas fa-user-edit"})," ",Object(i.h)(h.c,{id:"race.declaration"},"Declaration")," & ",Object(i.h)(h.c,{id:"race.chiplist"},"Chiplist"))):Object(i.h)(t,null,Object(i.h)("button",{class:"btn btn-block btn-success mb-3","data-menu":"signup",onClick:this.chooseSubmenu},Object(i.h)("i",{class:"fas fa-user-edit"})," ",Object(i.h)(h.c,{id:"race.signup"},"Sign up")))),Object(i.h)(p.a,{markdown:I.a.replaceImages(A.body,A.images,b),markdownOpts:I.a.getMarkdownOptions()})),Object(i.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-3 mb-2"},A.tag&&A.tag.split(",").map(e=>Object(i.h)(t,null,Object(i.h)("span",{class:"badge badge-pill badge-primary py-1 ml-2"},Object(i.h)("a",{class:"text-white",href:"https://www.facebook.com/hashtag/"+e,target:"_blank",rel:"noreferrer",native:!0},Object(i.h)("i",{class:"fab fa-facebook"})," #",e)),Object(i.h)("span",{class:"badge badge-pill badge-primary py-1 ml-2"},Object(i.h)("a",{class:"text-white",href:"https://www.instagram.com/explore/tags/"+e,target:"_blank",rel:"noreferrer",native:!0},Object(i.h)("i",{class:"fab fa-instagram"})," #",e))))))),"results"===e&&Object(i.h)(t,null,Object(i.h)(S.a,{stores:this.props.stores,race:A}),Object(i.h)(f.a,{stores:this.props.stores,raceid:R})),"tracking"===e&&Object(i.h)(t,null,Object(i.h)(k.a,{stores:this.props.stores,raceid:R})),"news"===e&&Object(i.h)(t,null,Object(i.h)(g.a,{stores:this.props.stores,race:A})),"userImages"===e&&Object(i.h)(t,null,Object(i.h)(y.a,{stores:this.props.stores,race:A})),"rules"===e&&Object(i.h)(t,null,Object(i.h)("div",{class:"row"},Object(i.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-0 mb-2"},Object(i.h)("h2",{class:"mb-0"},Object(i.h)(h.c,{id:"race.rules"},"Regler"))),Object(i.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-3 mb-2"},Object(i.h)(p.a,{markdown:I.a.replaceImages(A.rules,A.images,b),markdownOpts:I.a.getMarkdownOptions()})))),"veterinary"===e&&Object(i.h)(t,null,Object(i.h)("div",{class:"row"},Object(i.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-0 mb-2"},Object(i.h)("h2",{class:"mb-0"},Object(i.h)(h.c,{id:"race.veterinary"},"Veterinærinfo"))),Object(i.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-3 mb-2"},Object(i.h)(p.a,{markdown:I.a.replaceImages(A.veterinaryInfo,A.images,b),markdownOpts:I.a.getMarkdownOptions()})))),"checkpoints"===e&&Object(i.h)(t,null,Object(i.h)("div",{class:"row"},Object(i.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-0 mb-2"},Object(i.h)("h2",{class:"mb-0"},Object(i.h)(h.c,{id:"race.checkpoints"},"Sjekkpunkter"))),Object(i.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-3 mb-2"},Object(i.h)(p.a,{markdown:I.a.replaceImages(A.checkpoints,A.images,b),markdownOpts:I.a.getMarkdownOptions()})))),"track"===e&&Object(i.h)(t,null,Object(i.h)("div",{class:"row"},Object(i.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-0 mb-2"},Object(i.h)("h2",{class:"mb-0"},Object(i.h)(h.c,{id:"race.track-description"},"Løypebeskrivelse"))),Object(i.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-3 mb-2"},Object(i.h)(p.a,{markdown:I.a.replaceImages(A.trailDescription,A.images,b),markdownOpts:I.a.getMarkdownOptions()})))),"program"===e&&Object(i.h)(t,null,Object(i.h)("div",{class:"row"},Object(i.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-0 mb-2"},Object(i.h)("h2",{class:"mb-0"},Object(i.h)(h.c,{id:"race.program"},"Program"))),Object(i.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-3 mb-2"},Object(i.h)(p.a,{markdown:I.a.replaceImages(A.program,A.images,b),markdownOpts:I.a.getMarkdownOptions()})))),"prices"===e&&Object(i.h)(t,null,Object(i.h)("div",{class:"row"},Object(i.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-0 mb-2"},Object(i.h)("h2",{class:"mb-0"},Object(i.h)(h.c,{id:"race.prices"},"Premier"))),Object(i.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-3 mb-2"},Object(i.h)(p.a,{markdown:I.a.replaceImages(A.prices,A.images,b),markdownOpts:I.a.getMarkdownOptions()})))),"mushers"===e&&Object(i.h)(t,null,Object(i.h)(x.a,{stores:this.props.stores,race:A})),"classes"===e&&Object(i.h)(t,null,Object(i.h)(w.a,{stores:this.props.stores,race:A})),"signup"===e&&Object(i.h)(t,null,Object(i.h)(v.a,{stores:this.props.stores,race:A})),["about"].indexOf(e)>-1&&Object(i.h)(t,null,Object(i.h)("div",{class:"row"},Object(i.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-0 mb-2"},Object(i.h)("div",{class:""},Object(i.h)(O.a,{stores:this.props.stores,likes:M,comments:P,type:"race"}))),Object(i.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-2 mb-3"},Object(i.h)("div",{class:"row"},Object(i.h)("div",{class:"col-6 text-center"},Object(i.h)("button",{type:"button",class:`btn btn-outline-${$?"primary":"secondary"} btn-lg btn-block ${$?"text-primary":""}`,onClick:this.likeRace},Object(i.h)("i",{class:($?"text-primary fas":"far")+" fa-thumbs-up"})," ",$?Object(i.h)(h.c,{id:"comments.has-liked"},"Liked"):Object(i.h)(h.c,{id:"comments.like"},"Lik"))),Object(i.h)("div",{class:"col-6 text-center"},Object(i.h)("button",{type:"button",class:"btn btn-outline-secondary btn-lg btn-block","data-id":A.id,onClick:this.toggleAddComment},Object(i.h)("i",{class:"fas fa-comment"})," ",Object(i.h)(h.c,{id:"comments.comment-add"},"Comment"))))),Object(i.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-2 mb-3"},s&&o.email&&Object(i.h)(m.a,{stores:this.props.stores,race:A,inputRef:t=>this.inputRef[A.id]=t,inputRefObject:this.inputRef})),Object(i.h)("div",{class:"col-12 mt-2"},Object(i.h)(u.a,{stores:this.props.stores,race:A,cols:"12"})))))}})||o;e.default=A}.call(this,s("hosL").Fragment)},uAGO:function(t,e,s){"use strict";(function(t){var a,c=s("hosL"),l=s("Utv1"),o=s("/eY4"),i=s("OhSV"),n=(s("Y3FI"),s("fh8t")),r=s.n(n),h=(s("go65"),s("ZOvn"));let d=Object(o.a)(a=class extends c.Component{constructor(t){super(t),this.state={},this.inputRef={},this.updateTimer={}}render(){const{userStore:e}=this.props.stores,{user:s={},teams:a=[],isAdmin:o}=e,{language:n="en"}=s,{race:d={}}=this.props;return Object(c.h)(t,null,Object(c.h)("div",{class:"row"},Object(c.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-0 mb-2"},Object(c.h)("h2",{class:"mb-0"},Object(c.h)(i.c,{id:"race.classes"},"Klasser"))),Object(c.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-3 mb-2"},Object(c.h)("div",{class:"row"},d.classes&&d.classes.sort((t,e)=>t.distance-e.distance).map(e=>Object(c.h)(t,null,Object(c.h)("div",{class:"col-12 col-sm-6 col-lg-4 mb-4"},Object(c.h)("div",{class:"border rounded rounded-lg p-3"},Object(c.h)("h5",null,e.title),o&&Object(c.h)(t,null,Object(c.h)("a",{href:`/tv/top10/${d.id}/${e.id}`},"TV Top 10"),Object(c.h)("br",null),Object(c.h)("a",{href:`/tv/team/${d.id}/1`},"TV One team"),Object(c.h)("br",null)),Object(c.h)("small",null,e.startDate&&Object(c.h)("div",null,Object(c.h)("span",{class:"font-weight-lighter"},Object(c.h)(i.c,{id:"race.startdate"},"Start"),":")," ",l.a.formatDate(`${e.startDate} ${e.startTime||"00:00:00"}`,{locale:n,hour12:!1,hour:"2-digit",minute:"2-digit"})),e.endDate&&Object(c.h)("div",null,Object(c.h)("span",{class:"font-weight-lighter"},Object(c.h)(i.c,{id:"race.enddate"},"End"),":")," ",l.a.formatDate(`${e.endDate} ${e.endTime||"00:00:00"}`,{locale:n,hour12:!1,hour:"2-digit",minute:"2-digit"}))),Object(c.h)("div",null,Object(c.h)("span",{class:"font-weight-lighter"},Object(c.h)(i.c,{id:"race.distance"},"Distanse"),":")," ",e.distance," km"),Object(c.h)("div",null,Object(c.h)("span",{class:"font-weight-lighter"},Object(c.h)(i.c,{id:"race.signup"},"Påmelding"),":")," ",e.signupfee||d.signupfee," NOK"),Object(c.h)("p",{class:"clearfix"},Object(c.h)(r.a,{markdown:h.a.replaceImages(e.ingress,d.images,n),markdownOpts:h.a.getMarkdownOptions()})),Object(c.h)("small",null,Object(c.h)(r.a,{markdown:h.a.replaceImages(e.body,d.images,n),markdownOpts:h.a.getMarkdownOptions()})),e.rules&&Object(c.h)(t,null,Object(c.h)("h5",null,Object(c.h)(i.c,{id:"race.rules"},"Regler")),Object(c.h)(r.a,{markdown:h.a.replaceImages(e.rules,d.images,n),markdownOpts:h.a.getMarkdownOptions()}))))))))))}})||a;e.a=d}).call(this,s("hosL").Fragment)},w5T0:function(t,e,s){"use strict";(function(t){function a(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,a)}return s}function c(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}var l,o,i=s("hosL"),n=s("Utv1"),r=s("/eY4"),h=s("OhSV"),d=(s("Y3FI"),s("fh8t")),b=s.n(d),p=(s("go65"),s("/DnB"),s("ZOvn"));const u={isLoading:!1,contentIsNotLoaded:!0,reloadInSec:null,reloadLastEpoch:null,reloadIsActive:!1};let m=Object(r.a)(l=class extends i.Component{constructor(t){super(t),this.initComponent=()=>{const t=Math.floor((new Date).getTime()/1e3);this.setState({reloadIsActive:!0,reloadLastEpoch:t},()=>this.tickReloadTimeer())},this.state=function(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?a(Object(s),!0).forEach((function(e){c(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):a(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}({},u),this.updateTimer={}}tickReloadTimeer(){const{reloadIsActive:t,reloadLastEpoch:e}=this.state;if(t){const t=Math.floor((new Date).getTime()/1e3);this.setState({reloadInSec:60-(t-e)}),clearTimeout(this.updateTimer.tick),this.updateTimer.tick=setTimeout(()=>this.tickReloadTimeer(),1e3)}return!1}componentDidMount(){this.initComponent()}componentWillUnmount(){clearTimeout(this.updateTimer.tick)}render(){const{reloadInSec:e}=this.state,s=Math.floor(n.a.normalizeBetween(e,0,60,0,100));return Object(i.h)(t,null,Object(i.h)("div",{class:"progress fixed-top",style:"height: 2px; z-index: 999999;"},Object(i.h)("div",{class:"progress-bar",role:"progressbar",style:`width: ${s}%;`,"aria-valuenow":s,"aria-valuemin":"0","aria-valuemax":"100"})))}})||l,O=Object(r.a)(o=class extends i.Component{constructor(t){var e;super(t),e=this,this.toggleDisplayDetails=t=>{const e=t.target.closest("tr").dataset.email,{appState:s}=this.props.stores;s.toggleDisplayDetails(e)},this.adminToggleEditUser=t=>{t.stopPropagation();const e=t.target.closest("tr").dataset.email,{appState:s}=this.props.stores;s.toggleEditUserDetails(e)},this.adminSignupEdit=t=>{const{raceid:e}=this.props,{raceStore:s}=this.props.stores,a=t.target.id,c=t.target.value,{classid:l,contestantid:o}=t.target.dataset,i={raceClassId:l,contestantId:o,["raceClassContestant"+n.a.ucfirst(a)]:c};clearTimeout(this.updateTimer[a]),this.updateTimer[a]=setTimeout((async function(){s.editClass({id:e,data:i})}),500)},this.lockAllWorkoutsInRace=async function(){const{raceid:t}=e.props,{raceStore:s}=e.props.stores,a=await s.lockAllWorkoutsInRace({id:t});e.setState({lockMessage:a})},this.filterByClass=t=>{const e=t.target.closest("button").dataset.id,{appState:s}=this.props.stores;s.toggleSelectedClassId(e,!0)},this.state={},this.inputRef={},this.updateTimer={}}async loadRace(t=this.props){var e=this;this.setState({isLoading:!0});const{raceStore:s}=t.stores,{raceid:a}=t;await s.load(a);const{race:c}=s,l=c.classes.filter(t=>t.contestants&&t.contestants.length>0).map(t=>t.contestants.filter(t=>t.team>0).map(t=>t.team)).flat();l.length>0&&a&&(await s.loadTeams(l.join(",")),await s.loadWorkoutSummary(l.join(","),a),s.getWorkoutSummaryActiveTeams()),s.getAllClassesSortedBy(),clearTimeout(this.updateTimer.reload),this.updateTimer.reload=setTimeout((async function(){const t=Math.floor((new Date).getTime()/1e3);e.setState({reloadLastEpoch:t}),e.loadRace()}),6e4),this.setState({isLoading:!1,contentIsNotLoaded:!1})}componentWillUnmount(){clearTimeout(this.updateTimer.reload),clearTimeout(this.updateTimer.tick)}componentDidMount(){this.loadRace()}render(){const{contentIsNotLoaded:e,lockMessage:s}=this.state,{userStore:a,raceStore:c,appState:l}=this.props.stores,{user:o={},teams:r=[],isAdmin:d}=a,{language:u="en"}=o,{displayDetails:O,editUserDetails:j,selectedClassIds:f=[]}=l,{race:g={},classes:v=[]}=c,w=new Date(g.endDate);w.setHours(w.getHours()+2);const x=1===g.liveRace;return Object(i.h)(t,null,Object(i.h)("div",{class:"row"},Object(i.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-0 mb-2"},Object(i.h)("h2",{class:"mb-0"},Object(i.h)(h.c,{id:"race.results"},"Results"))),Object(i.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-3 mb-2"},Object(i.h)(m,{stores:this.props.stores}),x?Object(i.h)(t,null):Object(i.h)(t,null,o.email&&Object(i.h)("div",{class:"alert alert-primary",role:"alert"},"no"===u&&Object(i.h)(t,null,"Resultatene hentes direkte fra treningsøktene i QPaws appen.",Object(i.h)("br",null),Object(i.h)("strong",null,"For at treningsøktene skal bli registrert må øktene:"),Object(i.h)("ul",null,Object(i.h)("li",null,"Ha riktig dato som er innenfor løpsperioden."),Object(i.h)("li",null,"Være markert som 'Konkurranse'."),Object(i.h)("li",null,"Være registrert på teamet som er påmeldt."))),"en"===u&&Object(i.h)(t,null,"The results are imported directly from the workouts inside QPaws app.",Object(i.h)("br",null),Object(i.h)("strong",null,"To make sure your workouts are registered check the following:"),Object(i.h)("ul",null,Object(i.h)("li",null,"Use the correct date on your workout. Has to be inside the race period."),Object(i.h)("li",null,"Mark the workout as 'Race'."),Object(i.h)("li",null,"Workout has to be on the same team as you signed up with."))))),g.resultsUrl?Object(i.h)("div",{class:"p-3 my-4 bg-light"},Object(i.h)("a",{href:g.resultsUrl,target:"_blank",rel:"noreferrer",native:!0},g.resultsText?g.resultsText:Object(i.h)(t,null,Object(i.h)(h.c,{id:"races.results-here"},"Se resultater her")," ")," ",Object(i.h)("i",{class:"fas fa-chevron-circle-right"}))):Object(i.h)(t,null),(e||!v||0===v.length)&&Object(i.h)("div",{class:"d-flex justify-content-center my-5 py-5"},Object(i.h)("div",{class:"spinner-border text-primary",role:"status"},Object(i.h)("span",{class:"sr-only"},"Loading...")))),Object(i.h)("div",{class:"col-12"},Object(i.h)("div",{class:"row"},Object(i.h)("div",{class:"w-100 overflow-hidden"},Object(i.h)("div",{class:"d-flex flex-row flex-nowrap pb-2 px-1",style:"overflow: auto; scroll-snap-type: x mandatory;"},g.classes&&g.classes.sort((t,e)=>t.distance-e.distance).map((e,s)=>Object(i.h)(t,null,Object(i.h)("div",{class:"col px-0 pt-2"},Object(i.h)("button",{type:"button",class:`btn btn-block ${0===s&&"rounded-pill-left"} ${s===g.classes.length-1&&"rounded-pill-right"} rounded-none ${f.indexOf(e.id)>-1?"btn-primary":"btn-outline-primary"} text-nowrap`,style:"text-overflow: ellipsis; overflow: hidden;",onClick:this.filterByClass,"data-id":e.id},e.title)))))))),Object(i.h)("div",{class:"col-12"},g.classes&&g.classes.filter(t=>!(f.length>0)||f.indexOf(t.id)>-1).sort((t,e)=>t.distance-e.distance).map(e=>Object(i.h)("div",{class:"mt-5 mb-5"},g.resultDanger&&Object(i.h)("div",{class:"alert alert-danger",role:"alert"},Object(i.h)("div",{class:"spinner-grow text-danger float-left",role:"status"},Object(i.h)("span",{class:"sr-only"},"Loading...")),Object(i.h)("i",{class:"fas fa-exclamation-triangle float-left mr-4",style:"font-size: 2.0em;"}),Object(i.h)(b.a,{markdown:p.a.replaceImages(g.resultDanger,g.images,u),markdownOpts:p.a.getMarkdownOptions()})),g.resultWarning&&Object(i.h)("div",{class:"alert alert-warning",role:"alert"},Object(i.h)("i",{class:"fas fa-exclamation float-left mr-4",style:"font-size: 2.0em;"}),Object(i.h)(b.a,{markdown:p.a.replaceImages(g.resultWarning,g.images,u),markdownOpts:p.a.getMarkdownOptions()})),g.resultSuccess&&Object(i.h)("div",{class:"alert alert-success",role:"alert"},Object(i.h)("i",{class:"fas fa-check float-left mr-4",style:"font-size: 2.0em;"}),Object(i.h)(b.a,{markdown:p.a.replaceImages(g.resultSuccess,g.images,u),markdownOpts:p.a.getMarkdownOptions()})),Object(i.h)("h3",null,e.title," ",e.startDate&&Object(i.h)(t,null,": ",Object(i.h)("span",{class:"font-weight-lighter"},n.a.formatDate(`${e.startDate} ${e.startTime||"00:00:00"}`,{locale:u,hour12:!1,hour:"2-digit",minute:"2-digit"})," - ",n.a.formatDate(`${e.endDate} ${e.endTime||"00:00:00"}`,{locale:u,hour12:!1,hour:"2-digit",minute:"2-digit"})))),Object(i.h)("span",{class:"float-right"},Object(i.h)("span",{class:"text-muted"},Object(i.h)(h.c,{id:"races.mushers"},"Mushers"),": ",e.totalMushers||0),Object(i.h)("span",{class:"text-muted ml-4"},Object(i.h)(h.c,{id:"races.finished-mushers"},"Finished mushers"),": ",e.totalFinished||0," ")),Object(i.h)("div",{class:"table-responsive-md"},Object(i.h)("table",{class:"table table-sm table-striped"},Object(i.h)("thead",null,Object(i.h)("tr",null,Object(i.h)("th",{scope:"col"},"#"),Object(i.h)("th",{scope:"col",style:"min-width: 200px;"},Object(i.h)(h.c,{id:"races.name"},"Navn")),d&&Object(i.h)(t,null,Object(i.h)("th",{class:"d-none d-lg-table-cell",scope:"col"},Object(i.h)("i",{class:"fas fa-user-shield"})," Cellphone"),Object(i.h)("th",{class:"d-none d-lg-table-cell",scope:"col"},Object(i.h)("i",{class:"fas fa-user-shield"})," Email")),d&&Object(i.h)("th",{scope:"col",class:"d-none d-lg-table-cell",style:"min-width: 400px;"},Object(i.h)(h.c,{id:"races.stages"},"Etapper")),Object(i.h)("th",{scope:"col"},Object(i.h)(h.c,{id:"races.result"},"Resultat")))),Object(i.h)("tbody",null,v[e.id]&&v[e.id].contestants&&v[e.id].contestants.map((s,a)=>{const{musher:l,currentTeam:o,currentStages:r,currentResults:h,completed:m,normalizedDuration:f,weightedNormalizedDuration:v,isDone:x,finishedDate:y,totalWorkoutTimeUsedSec:k}=s,S=c.getTotalsByTeamId(o.id);return Object(i.h)(t,null,Object(i.h)("tr",{onClick:this.toggleDisplayDetails,"data-email":l.email},Object(i.h)("th",{scope:"row"},a+1,d&&h&&Object(i.h)(t,null,Object(i.h)("br",null),h.isLocked?Object(i.h)("i",{class:"fas fa-lock text-danger mr-2"}):Object(i.h)("i",{class:"fas fa-lock-open text-success mr-2"}))),Object(i.h)("td",{class:""+(O[l.email]?"font-weight-bold":""),style:""+(O[l.email]?"":"line-height: 0.8em;")},O[l.email]?Object(i.h)(t,null,l.firstname," ",l.lastname,Object(i.h)("br",null),Object(i.h)("span",{class:"text-muted"},o.name),Object(i.h)("br",null),Object(i.h)("small",{class:"text-muted"},l.sportsClub),Object(i.h)("br",null),l.facebook&&Object(i.h)("a",{class:"mr-2",href:p.a.asFacebookLink(l.facebook),native:!0,target:"_blank",rel:"noreferrer"},Object(i.h)("i",{class:"fab fa-facebook"})),l.instagram&&Object(i.h)("a",{class:"mr-2",href:p.a.asInstagramLink(l.instagram),native:!0,target:"_blank",rel:"noreferrer"},Object(i.h)("i",{class:"fab fa-instagram"})),l.price1&&Object(i.h)("div",{class:"font-weight-lighter"},Object(i.h)("i",{class:"fas fa-trophy text-warning"})," ",l.price1,l.priceSent&&Object(i.h)(t,null,Object(i.h)("i",{class:"fas fa-check text-success"}))),l.price2&&Object(i.h)("div",{class:"font-weight-lighter"},Object(i.h)("i",{class:"fas fa-trophy text-warning"})," ",l.price2),l.price3&&Object(i.h)("div",{class:"font-weight-lighter"},Object(i.h)("i",{class:"fas fa-trophy text-warning"})," ",l.price3)):Object(i.h)(t,null,l.price1&&Object(i.h)("span",{class:"float-right text-warning",style:"font-size: 1.2em;"},Object(i.h)("i",{class:"fas fa-trophy"}),l.priceSent&&Object(i.h)(t,null,Object(i.h)("i",{class:"fas fa-check text-success"}))),Object(i.h)("nobr",null,l.firstname," ",l.lastname,Object(i.h)("br",null),Object(i.h)("small",{class:"text-muted"},l.sportsClub),Object(i.h)("br",null)))),d&&Object(i.h)(t,null,Object(i.h)("td",{class:"d-none d-lg-table-cell"},l.cellphone),Object(i.h)("td",{class:"d-none d-lg-table-cell"},l.email)),d&&Object(i.h)("td",{class:"d-none d-lg-table-cell"},d&&Object(i.h)(t,null,Object(i.h)("button",{class:"btn btn-primary btn-sm float-right",onClick:this.adminToggleEditUser},Object(i.h)("i",{class:"fas fa-user-edit"}))),d&&j[l.email]&&Object(i.h)(t,null,Object(i.h)("h5",null,"Admin edit:"),Object(i.h)("div",{class:"form-group row my-0"},Object(i.h)("label",{class:"col-sm-2 col-form-label text-right"},"Email"),Object(i.h)("div",{class:"col-sm-10"},l.email)),Object(i.h)("div",{class:"form-group row my-0"},Object(i.h)("label",{class:"col-sm-2 col-form-label text-right"},"Cellphone"),Object(i.h)("div",{class:"col-sm-10"},l.cellphone)),Object(i.h)("div",{class:"form-group row my-0"},Object(i.h)("label",{for:"team",class:"col-sm-2 col-form-label text-right"},"Race status"),Object(i.h)("div",{class:"col-sm-10"},Object(i.h)("select",{class:"form-control-plaintext",id:"raceStatus","data-classid":l.class,"data-contestantid":l.id,onInput:this.adminSignupEdit,value:l.raceStatus},Object(i.h)("option",{value:""},"-- Choose race status --"),Object(i.h)("option",{value:"OK"},"OK - Everything ok"),Object(i.h)("option",{value:"DNS"},"DNS - Did Not Start"),Object(i.h)("option",{value:"DNF"},"DNF - Did Not Finish"),Object(i.h)("option",{value:"DNQ"},"DNQ - Did not qualify"),Object(i.h)("option",{value:"DQ"},"DQ - Disqualified"),Object(i.h)("option",{value:"DC"},"DC - Data changed by user")))),Object(i.h)("div",{class:"form-group row my-0"},Object(i.h)("label",{for:"raceComment",class:"col-sm-2 col-form-label text-right"},"Race comment"),Object(i.h)("div",{class:"col-sm-10"},Object(i.h)("input",{type:"text",class:"form-control-plaintext",id:"raceComment","data-classid":l.class,"data-contestantid":l.id,onInput:this.adminSignupEdit,value:l.raceComment}))),Object(i.h)("div",{class:"form-group row my-0"},Object(i.h)("label",{for:"gpxResultsApproved",class:"col-sm-2 col-form-label text-right"},"GPX Results approved (date)"),Object(i.h)("div",{class:"col-sm-10"},Object(i.h)("input",{type:"date",class:"form-control-plaintext",id:"gpxResultsApproved","data-classid":l.class,"data-contestantid":l.id,onInput:this.adminSignupEdit,value:l.gpxResultsApproved?n.a.isoDate(l.gpxResultsApproved,!1,!1,!0):null}))),Object(i.h)("div",{class:"form-group row my-0"},Object(i.h)("label",{for:"price1",class:"col-sm-2 col-form-label text-right"},"Price 1"),Object(i.h)("div",{class:"col-sm-10"},Object(i.h)("input",{type:"text",class:"form-control-plaintext",id:"price1","data-classid":l.class,"data-contestantid":l.id,onInput:this.adminSignupEdit,value:l.price1}))),Object(i.h)("div",{class:"form-group row my-0"},Object(i.h)("label",{for:"price2",class:"col-sm-2 col-form-label text-right"},"Price 2"),Object(i.h)("div",{class:"col-sm-10"},Object(i.h)("input",{type:"text",class:"form-control-plaintext",id:"price2","data-classid":l.class,"data-contestantid":l.id,onInput:this.adminSignupEdit,value:l.price2}))),Object(i.h)("div",{class:"form-group row my-0"},Object(i.h)("label",{for:"price3",class:"col-sm-2 col-form-label text-right"},"Price 3"),Object(i.h)("div",{class:"col-sm-10"},Object(i.h)("input",{type:"text",class:"form-control-plaintext",id:"price3","data-classid":l.class,"data-contestantid":l.id,onInput:this.adminSignupEdit,value:l.price3}))),Object(i.h)("div",{class:"form-group row my-0"},Object(i.h)("label",{for:"priceSent",class:"col-sm-2 col-form-label text-right"},"Price sent"),Object(i.h)("div",{class:"col-sm-10"},Object(i.h)("input",{type:"date",class:"form-control-plaintext",id:"priceSent","data-classid":l.class,"data-contestantid":l.id,onInput:this.adminSignupEdit,value:l.priceSent?n.a.isoDate(l.priceSent,!1,!1,!0):null})))),d&&Object(i.h)("div",{class:"d-flex flex-wrap"},r&&r.map((s,a)=>{const c=s.distanceKm/e.distance*100,o=(c>100||parseInt(c,10),Math.floor(new Date(s.date).getTime()/1e3)),r=new Date(0);r.setUTCSeconds(o+parseInt(s.duration,10));s.images.flat();return O[l.email]?Object(i.h)(t,null,Object(i.h)("div",{class:"bg-light border rounded-lg  text-right position-relative mr-1 mb-1",style:"width: 350px; min-width: 320px;"},Object(i.h)("svg",{viewBox:"0 0 300 100",class:"position-absolute",style:"width: 100%; height: 95%; bottom: 0px; left: 0px; z-index: 0;"},Object(i.h)("path",{d:""+s.svgElevation,style:"fill: #0063FF; stroke: #0063FF; stroke-width: 2; opacity: 0.2;"})),Object(i.h)("div",{class:"position-relative px-3"},Object(i.h)("span",{class:"position-absolute",style:"top: 3px; left: 3px; font-size: 1.3em;"},a+1),Object(i.h)("small",null,d&&Object(i.h)("span",{class:"position-absolute",style:"top: 0px; right: -5px;"},s.isLocked?Object(i.h)("i",{class:"fas fa-lock text-danger"}):Object(i.h)("i",{class:"fas fa-lock-open text-success"})),Object(i.h)("span",{class:"float-left"},Object(i.h)("nobr",null,Object(i.h)("i",{style:"width: 20px;",class:"fas fa-sign-out-alt text-muted"})," ",n.a.formatDate(s.date,{locale:u,hour12:!1,hour:"2-digit",minute:"2-digit"})),Object(i.h)("nobr",null,Object(i.h)("i",{style:"width: 20px;",class:"fas fa-sign-in-alt text-muted"})," ",n.a.formatDate(r,{locale:u,hour12:!1,hour:"2-digit",minute:"2-digit"}))),Object(i.h)("span",{class:"float-right"},Object(i.h)("nobr",null,Object(i.h)("i",{style:"width: 20px;",class:"fas fa-road text-muted"})," ",n.a.format(s.distanceKm,1)||"n/a"," ",Object(i.h)("span",{class:"font-weight-lighter"},"km")),Object(i.h)("nobr",null,Object(i.h)("i",{style:"width: 20px;",class:"fas fa-mountain text-muted"})," ",n.a.format(s.elevation,0)||"n/a"," ",Object(i.h)("span",{class:"font-weight-lighter"},"m")),Object(i.h)("nobr",null,Object(i.h)("i",{style:"width: 20px;",class:"fas fa-tachometer-alt text-muted"})," ",n.a.format(s.speedAvg,1)||"n/a"," ",Object(i.h)("span",{class:"font-weight-lighter"},"km/t")),Object(i.h)("br",null),Object(i.h)("nobr",null,Object(i.h)("i",{style:"width: 20px;",class:"fas fa-clock text-muted"})," ",n.a.secToHms(s.duration)||"n/a"),Object(i.h)("nobr",null,Object(i.h)("i",{style:"width: 20px;",class:"fas fa-moon text-muted"})," ",n.a.secToHms(s.rest)||"n/a"),Object(i.h)("nobr",null,Object(i.h)("i",{style:"width: 20px;",class:"fas fa-running text-muted"})," ",n.a.secToHms(s.duration-s.rest)||"n/a"),Object(i.h)("br",null),Object(i.h)("nobr",null,Object(i.h)("i",{style:"width: 20px;",class:"fas fa-dog text-muted"})," ",n.a.format(s.avgDogs,0)||"n/a")))))):Object(i.h)(t,null,Object(i.h)("div",{class:"bg-light border rounded-lg text-right position-relative px-3 mr-1 mb-1",style:"width: 300px; min-width: 300px;"},Object(i.h)("small",null,d&&Object(i.h)("span",{class:"position-absolute",style:"top: 2px; right: -5px;"},s.isLocked?Object(i.h)("i",{class:"fas fa-lock text-danger"}):Object(i.h)("i",{class:"fas fa-lock-open text-sucess"})),Object(i.h)("span",{class:"float-left"},a+1),Object(i.h)("nobr",null,Object(i.h)("i",{style:"width: 20px;",class:"fas fa-road text-muted"})," ",n.a.format(s.distanceKm,1)||"n/a"," ",Object(i.h)("span",{class:"font-weight-lighter"},"km")),Object(i.h)("nobr",null,Object(i.h)("i",{style:"width: 20px;",class:"fas fa-tachometer-alt text-muted"})," ",n.a.format(s.speedAvg,1)||"n/a"," ",Object(i.h)("span",{class:"font-weight-lighter"},"km/t")),Object(i.h)("nobr",null,Object(i.h)("i",{style:"width: 20px;",class:"fas fa-clock text-muted"})," ",n.a.secToHms(s.duration)||"n/a"))))}))),Object(i.h)("td",{class:"text-right position-relative pl-4"},function(e){switch(e.raceStatus){case"OK":return Object(i.h)(t,null,Object(i.h)("span",{class:"position-absolute rounded-lg",style:"top: 10px; left: 0px;"},Object(i.h)("i",{class:"fas fa-check text-success"})));case"DNS":case"DNF":case"DNQ":case"DQ":return Object(i.h)(t,null,Object(i.h)("span",{class:"position-absolute bg-danger text-white text-center px-2 rounded-lg border",style:"top: 5px; left: -100px; width: 80px"},Object(i.h)("i",{class:"fas fa-info-circle"})," ",e.raceStatus));case"DC":return Object(i.h)(t,null,Object(i.h)("span",{class:"position-absolute bg-warning text-white text-center px-2 rounded-lg border",style:"top: 5px; left: -150px; width: 80px"},Object(i.h)("i",{class:"fas fa-info-circle"})," ",e.raceStatus));default:return""}}(l),l.raceComment&&Object(i.h)(t,null,Object(i.h)("div",{class:"alert alert-warning text-left",role:"alert"},Object(i.h)("i",{class:"fas fa-exclamation-triangle float-left mr-4",style:"font-size: 2.0em;"}),Object(i.h)(b.a,{markdown:p.a.replaceImages(l.raceComment,g.images,u),markdownOpts:p.a.getMarkdownOptions()}))),d&&h.lastUpdated>w&&Object(i.h)(t,null,Object(i.h)("div",{class:"alert alert-danger text-left d-none d-md-block",role:"alert"},Object(i.h)("i",{class:"fas fa-exclamation-triangle float-left mr-4",style:"font-size: 2.0em;"}),Object(i.h)("i",{class:"fas fa-user-shield"})," Last changed: ",n.a.formatDate(h.lastUpdated,{locale:u,hour12:!1,hour:"2-digit",minute:"2-digit"}))),m>=99?Object(i.h)("span",{class:"position-absolute",style:"top: 10px; left: 0px;"},Object(i.h)("i",{class:"fas fa-flag-checkered text-success"})):"",Object(i.h)("small",null,O[l.email]?Object(i.h)(t,null,Object(i.h)("nobr",null,Object(i.h)("i",{style:"width: 20px;",class:"fas fa-road text-muted"})," ",n.a.format(h.distanceKm,1)||"n/a"," ",Object(i.h)("span",{class:"font-weight-lighter"},"km")),Object(i.h)("nobr",null,Object(i.h)("i",{style:"width: 20px;",class:"fas fa-mountain text-muted"})," ",n.a.format(h.elevation,0)||"n/a"," ",Object(i.h)("span",{class:"font-weight-lighter"},"m")),Object(i.h)("div",{class:"progress mb-1",style:"height: 3px;"},Object(i.h)("div",{class:"progress-bar "+(m>=99?"bg-success":""),role:"progressbar",style:`width: ${m}%`,"aria-valuenow":""+m,"aria-valuemin":"0","aria-valuemax":"100"})),g.nonstop?Object(i.h)(t,null,Object(i.h)("nobr",null,Object(i.h)("i",{style:"width: 20px;",class:"fas fa-clock text-muted"})," ",n.a.secToHms(k)||"n/a"),Object(i.h)("nobr",null,Object(i.h)("i",{style:"width: 20px;",class:"fas fa-moon text-muted"})," ",n.a.secToHms(S.totalRest)||"n/a"),Object(i.h)("br",null),Object(i.h)("nobr",null,Object(i.h)("i",{style:"width: 20px;",class:"fas fa-calendar text-muted"})," ",n.a.isoDate(S.firstEpoch)," - ",Object(i.h)("i",{style:"width: 20px;",class:"fas fa-calendar text-muted"})," ",n.a.isoDate(y)),d&&Object(i.h)(t,null,Object(i.h)("br",null),Object(i.h)("div",{class:"text-danger"},S.firstGpxStartEpoch&&Object(i.h)(t,null,Object(i.h)("nobr",null,"firstGpxStartEpoch: ",n.a.isoDate(S.firstGpxStartEpoch)),Object(i.h)("br",null)),S.lastGpxStartEpoch&&Object(i.h)(t,null,Object(i.h)("nobr",null,"lastGpxStartEpoch: ",n.a.isoDate(S.lastGpxStartEpoch)),Object(i.h)("br",null))))):Object(i.h)(t,null,Object(i.h)("nobr",null,Object(i.h)("i",{style:"width: 20px;",class:"fas fa-clock text-muted"})," ",n.a.secToHms(h.duration)||"n/a"),Object(i.h)("nobr",null,Object(i.h)("i",{style:"width: 20px;",class:"fas fa-moon text-muted"})," ",n.a.secToHms(h.rest)||"n/a"),Object(i.h)("nobr",null,Object(i.h)("i",{style:"width: 20px;",class:"fas fa-running text-muted"})," ",n.a.secToHms(h.duration-h.rest)||"n/a"),Object(i.h)("br",null),1===x&&Object(i.h)(t,null,Object(i.h)("nobr",{class:"font-weight-bold"},Object(i.h)("span",{class:"font-weight-lighter text-muted"},"Normalized to race distance:")," ",Object(i.h)("i",{style:"width: 20px;",class:"fas fa-clock text-muted"})," ",n.a.secToHms(f)||"n/a"),Object(i.h)("br",null)),1===x&&Object(i.h)(t,null,Object(i.h)("nobr",{class:"font-weight-bold"},Object(i.h)("span",{class:"font-weight-lighter text-muted"},"Normalized:")," ",Object(i.h)("i",{style:"width: 20px;",class:"fas fa-clock text-muted"})," ",n.a.secToHms(v)||"n/a"),Object(i.h)("br",null)))):Object(i.h)(t,null,Object(i.h)("nobr",null,Object(i.h)("i",{style:"width: 20px;",class:"fas fa-road text-muted"})," ",n.a.format(h.distanceKm,1)||"n/a"," ",Object(i.h)("span",{class:"font-weight-lighter"},"km")),Object(i.h)("nobr",null,Object(i.h)("i",{style:"width: 20px;",class:"fas fa-mountain text-muted"})," ",n.a.format(h.elevation,0)||"n/a"," ",Object(i.h)("span",{class:"font-weight-lighter"},"m")),Object(i.h)("div",{class:"progress mb-1",style:"height: 3px;"},Object(i.h)("div",{class:"progress-bar "+(m>=99?"bg-success":""),role:"progressbar",style:`width: ${m}%`,"aria-valuenow":""+m,"aria-valuemin":"0","aria-valuemax":"100"})),g.nonstop?Object(i.h)(t,null,Object(i.h)("nobr",null,Object(i.h)("i",{style:"width: 20px;",class:"fas fa-clock text-muted"})," ",n.a.secToHms(k)||"n/a"),Object(i.h)("nobr",null,Object(i.h)("i",{style:"width: 20px;",class:"fas fa-moon text-muted"})," ",n.a.secToHms(S.totalRest)||"n/a")):Object(i.h)(t,null,1===x?Object(i.h)(t,null,Object(i.h)("nobr",{class:"font-weight-bold"},Object(i.h)("i",{style:"width: 20px;",class:"fas fa-clock text-muted"})," ",n.a.secToHms(v)||"n/a"),Object(i.h)("br",null)):Object(i.h)(t,null,Object(i.h)("nobr",null,Object(i.h)("i",{style:"width: 20px;",class:"fas fa-clock text-muted"})," ",n.a.secToHms(h.duration)||"n/a"),Object(i.h)("br",null))))))))})))),Object(i.h)("div",{class:"text-center text-muted"},Object(i.h)("small",null,"no"===u&&Object(i.h)(t,null,"OBS! Ref reglene så er det ikke lov til å endre treningsøktene som er med i konkurransen etter at løpet er ferdig.",Object(i.h)("br",null),"Forsøk på dette vil resultere i automatisk deplassering på listene."),"en"===u&&Object(i.h)(t,null,"IMPORTANT! According to the rules: It is NOT allowed to try alter the workouts related to the competition after the race has ended.",Object(i.h)("br",null),"Attempts will result in automatic deplacement on the resultlists.")))))),d&&Object(i.h)(t,null,Object(i.h)("button",{class:"btn btn-danger btn-lg float-right m-4",onClick:this.lockAllWorkoutsInRace},"Lock all workouts in this race"),Object(i.h)("xmp",{class:"m-5"},JSON.stringify(s,null,4))),Object(i.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-3 mb-2"},Object(i.h)("a",{class:"btn btn-lg btn-block btn-primary",href:`https://homerunrace.no/index#/race/${g.id}/results`},"All results"))))}})||o;e.a=O}).call(this,s("hosL").Fragment)}}]);
//# sourceMappingURL=route-app-races.chunk.43dbc.esm.js.map