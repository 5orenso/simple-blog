(window.webpackJsonp=window.webpackJsonp||[]).push([[46],{"/DnB":function(t,e,s){"use strict";function a(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,a)}return s}function o(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}var c,l=s("hosL"),n=(s("Utv1"),s("/eY4"));const r={};let i=Object(n.a)(c=class extends l.Component{constructor(t){super(t),this.state=function(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?a(Object(s),!0).forEach((function(e){o(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):a(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}({},r),this.container=null}componentDidMount(){const{horizontal:t,vertical:e=""}=this.props,s={behavior:"smooth"};t&&(s.inline=t),e&&(s.block=e),this.container.scrollIntoView(s)}render(){return Object(l.h)("div",{ref:t=>this.container=t},"Â ")}})||c;e.a=i},pJjI:function(t,e,s){"use strict";(function(t){var a,o=s("hosL"),c=s("Utv1"),l=s("/eY4"),n=s("OhSV");s("/DnB");let r=Object(l.a)(a=class extends o.Component{constructor(...t){super(...t),this.toggleTeam=t=>{const{callback:e,unsetTeamIfSelected:s=!0}=this.props,{dogStore:a,workoutStore:o}=this.props.stores,{currentTeam:l}=a;s&&t===l?(a.setCurrentTeam(void 0),o.setCurrentTeam(void 0)):(a.setCurrentTeam(t),o.setCurrentTeam(t)),c.a.isDefined(e)&&e()},this.showAllTeams=()=>{const{callback:t}=this.props,{dogStore:e,workoutStore:s}=this.props.stores;e.setCurrentTeam(void 0),s.setCurrentTeam(void 0),c.a.isDefined(t)&&t()}}render(){const{userStore:e,dogStore:s}=this.props.stores,{teams:a}=e,{currentTeam:c}=s,{highlight:l,showAll:r=!0}=this.props;return Object(o.h)("div",{class:"row mt-2"},Object(o.h)("div",{class:"w-100 overflow-hidden"},Object(o.h)("div",{class:"d-flex flex-row flex-nowrap pb-2 px-1",style:"overflow: auto; scroll-snap-type: x mandatory;"},a&&a.map((e,s)=>{let n;return 1===a.length?n="rounded-pill-both":0===s?n="rounded-pill-left":s+1===a.length&&(n="rounded-pill-right"),Object(o.h)("div",{class:"col mb-0 px-0 clearfix",key:e.id},Object(o.h)("button",{class:`btn btn-sm btn-block \n\t\t\t\t\t\t\t\t\t\t\trounded-none ${n}\n\t\t\t\t\t\t\t\t\t\t\t${c===e.id?"btn-success":"btn-outline-success"}\n\t\t\t\t\t\t\t\t\t\t\ttext-nowrap clearfix`,style:"text-overflow: ellipsis; overflow: hidden;",onClick:()=>this.toggleTeam(e.id)},Object(o.h)("i",{class:"fas fa-users"})," ",e.name,l&&l.indexOf(e.id)>-1&&Object(o.h)(t,null,c===e.id?Object(o.h)(t,null,Object(o.h)("i",{class:"fas fa-check float-right"})):Object(o.h)(t,null,Object(o.h)("div",{class:"spinner-grow text-warning float-right",role:"status"},Object(o.h)("span",{class:"sr-only"},"Loading...")),Object(o.h)("i",{class:"far fa-hand-point-left float-right",style:"font-size: 2.0em;"})))))})),r&&Object(o.h)("div",{class:"row"},Object(o.h)("div",{class:"col-12 mb-1 px-1 d-flex justify-content-center"},Object(o.h)("button",{class:"btn btn-sm rounded-lg btn-link text-nowrap clearfix",style:"text-overflow: ellipsis; overflow: hidden;",onClick:this.showAllTeams},Object(o.h)("i",{class:"fas fa-users"})," ",Object(o.h)(n.c,{id:"teams.show-all"},"Show all"))))))}})||a;e.a=r}).call(this,s("hosL").Fragment)},qZTL:function(t,e,s){"use strict";s.r(e),function(t){var a,o=s("hosL"),c=s("Utv1"),l=s("/eY4"),n=s("Y3FI"),r=(s("go65"),s("OhSV")),i=s("fh8t"),h=s.n(i),d=s("ZOvn"),p=s("67HY"),u=s("gbHB"),b=s("B+py"),g=s("pJjI"),f=s("s4FZ");let m=Object(l.a)(a=class extends o.Component{constructor(t){var e;super(t),e=this,this.loadApplication=()=>{const{id:t}=this.state,{applicationStore:e}=this.props.stores;e.load(t)},this.loadTeam=async function(){e.setState({isLoading:!0});const{teamStore:t,workoutStore:s}=e.props.stores,{currentTeam:a}=s;await t.load(a),e.setState({isLoading:!1})},this.changeLanguage=t=>{const e=t.target.value,{appState:s}=this.props.stores;s.setLanguage(e)},this.grantAccess=async function(){const{userStore:t,teamStore:s,workoutStore:a}=e.props.stores,{currentTeam:o}=a,{user:c}=t,{returnUrl:l,id:n}=e.state,r={grantedDate:new Date,returnUrl:l,team:o,appId:n};t.findApplicationById(n)||(await t.saveField(c.id,"applications",r),await t.saveField(c.id,"settings.veterinaryAllowed",1),await s.saveField(o,"public",1)),e.setState({accessGranted:1})},this.denyAccess=()=>{Object(n.route)("/")},this.saveInputParams=()=>{let{returnUrl:t,id:e}=this.props;t?(c.a.set("returnUrl",t),c.a.set("id",e)):(t=c.a.get("returnUrl"),e=c.a.get("id")),this.setState({returnUrl:t,id:e})},this.state={returnUrl:"",id:0}}componentWillMount(){this.saveInputParams()}componentDidMount(){this.loadApplication(),this.loadTeam()}render(){const{appState:e,userStore:s,applicationStore:a,workoutStore:c,teamStore:l}=this.props.stores,{subsection:n}=this.props,{returnUrl:i,accessGranted:m}=this.state,{currentTeam:O}=c,{user:j}=s,{language:v="en",darkmode:w}=e,{application:y}=a,{team:x}=l;if(!y)return Object(o.h)("div",{class:"container-fluid"},Object(o.h)("div",{class:"row"},Object(o.h)("div",{class:"col-10 offset-1 col-sm-8 offset-sm-2 col-md-6 offset-md-3 col-lg-4 offset-lg-4 pt-5"},Object(o.h)("div",{class:"d-flex justify-content-center"},w?Object(o.h)(t,null,Object(o.h)("img",{src:"https://themusher.app/assets/logo-qpaws-dark.png",height:"100"})):Object(o.h)(t,null,Object(o.h)("img",{src:"https://themusher.app/assets/logo-qpaws-light.png",height:"100"}))),Object(o.h)("div",{class:"d-flex justify-content-center"},Object(o.h)("h5",{class:"mt-1 mb-3 font-weight-lighter"},Object(o.h)(r.c,{id:"grant-access.title"},"Grant access"))),Object(o.h)("div",{class:"alert alert-danger",role:"alert"},Object(o.h)("h5",null,"Error"),"Application not found!"))));const{title:k,body:S,images:T}=y;return Object(o.h)("div",{class:"container-fluid"},Object(o.h)("div",{class:"row"},Object(o.h)("div",{class:"col-10 offset-1 col-sm-8 offset-sm-2 col-md-6 offset-md-3 col-lg-4 offset-lg-4 pt-5"},Object(o.h)("div",{class:"d-flex justify-content-center"},w?Object(o.h)(t,null,Object(o.h)("img",{src:"https://themusher.app/assets/logo-qpaws-dark.png",height:"100"})):Object(o.h)(t,null,Object(o.h)("img",{src:"https://themusher.app/assets/logo-qpaws-light.png",height:"100"}))),Object(o.h)("div",{class:"d-flex justify-content-center"},Object(o.h)("h5",{class:"mt-1 mb-3 font-weight-lighter"},Object(o.h)(r.c,{id:"grant-access.title"},"Grant access"))),Object(o.h)(f.a,{stores:this.props.stores,images:T,minHeight:"50px"}),Object(o.h)("h5",{class:"mt-3"},k),Object(o.h)("p",{class:"mt-3"},Object(o.h)(h.a,{markdown:d.a.replaceImages(S,T,v),markdownOpts:d.a.getMarkdownOptions()})))),Object(o.h)("div",{class:"row"},j.email?Object(o.h)(t,null,m?Object(o.h)(t,null,Object(o.h)("div",{class:"col-10 offset-1 col-sm-8 offset-sm-2 col-md-6 offset-md-3 col-lg-4 offset-lg-4 mt-3 border-top pt-3"},Object(o.h)("div",{class:"display-1 text-success text-center"},Object(o.h)("i",{class:"fas fa-check"})),Object(o.h)("p",null,Object(o.h)(r.c,{id:"grant-access.access-granted"},"Access granted. Now please click the button below to go back to")," ",k,"."),Object(o.h)("a",{class:"btn btn-success btn-block",href:`${i}?userId=${j.uuidv4}&teamId=${x.uuidv4}`,native:!0},Object(o.h)(r.c,{id:"grant-access.back-to-application"},"Back to"),": ",k," ",Object(o.h)("i",{class:"fas fa-arrow-right"})))):Object(o.h)(t,null,Object(o.h)("div",{class:"col-10 offset-1 col-sm-8 offset-sm-2 col-md-6 offset-md-3 col-lg-4 offset-lg-4 mt-3 border-top pt-3"},Object(o.h)("h5",{class:"font-weight-light"},Object(o.h)(r.c,{id:"grant-access.data-shared"},"Data beeing shared"),":"),Object(o.h)("p",null,Object(o.h)("i",{class:"fas fa-user"}),": ",Object(o.h)(r.c,{id:"grant-access.fields-shared-person"},"Image, Name, email, cellphone, address")),Object(o.h)("p",null,Object(o.h)("i",{class:"fas fa-dog"}),": ",Object(o.h)(r.c,{id:"grant-access.fields-shared-dog"},"Image, Name, chipId, gender, birth, vaccines")),Object(o.h)("p",null,Object(o.h)("i",{class:"fas fa-users"}),": ",Object(o.h)(r.c,{id:"grant-access.fields-shared-team"},"Name, description, images"))),Object(o.h)("div",{class:"col-10 offset-1 col-sm-8 offset-sm-2 col-md-6 offset-md-3 col-lg-4 offset-lg-4 mt-3 border-top pt-3"},Object(o.h)("h5",{class:"font-weight-light"},Object(o.h)(r.c,{id:"grant-access.choose-team"},"Choose team")),Object(o.h)("div",{class:"col-12"},Object(o.h)(g.a,{stores:this.props.stores,callback:this.loadTeam,key:"teams-"+O,showAll:!1}))),O?Object(o.h)(t,null,Object(o.h)("div",{class:"col-10 offset-1 col-sm-8 offset-sm-2 col-md-6 offset-md-3 col-lg-4 offset-lg-4 mt-3"},Object(o.h)("button",{class:"btn btn-primary btn-block",onClick:this.grantAccess},Object(o.h)("i",{class:"fas fa-check"})," ",Object(o.h)(r.c,{id:"grant-access.grant"},"Grant access")),Object(o.h)("button",{class:"mt-4 btn btn-sm btn-link text-muted float-right",onClick:this.denyAccess},Object(o.h)(r.c,{id:"grant-access.deny"},"Deny access")))):Object(o.h)(t,null,Object(o.h)("div",{class:"col-10 offset-1 col-sm-8 offset-sm-2 col-md-6 offset-md-3 col-lg-4 offset-lg-4 mt-3"},Object(o.h)("span",{class:"display-4"},Object(o.h)("i",{class:"fas fa-hand-point-up"})," Choose team"))))):Object(o.h)(t,null,!n&&Object(o.h)(p.a,{stores:this.props.stores,showLogo:!1,routeLoginOk:"/grant-access",routeLoginNew:"/grant-access/newUser",routeLoginForgot:"/grant-access/forgotPassword"}),"newUser"===n&&Object(o.h)(u.default,{stores:this.props.stores,showLogo:!1,routeLogin:"/grant-access",routeLoginForgot:"/grant-access/forgotPassword",skipPubSub:!0}),"forgotPassword"===n&&Object(o.h)(b.default,{stores:this.props.stores,showLogo:!1,routeLogin:"/grant-access",routeLoginNew:"/grant-access/newUser"}))),Object(o.h)("div",{class:"col-10 offset-1 col-sm-8 offset-sm-2 col-md-6 offset-md-3 col-lg-4 offset-lg-4"},Object(o.h)("div",{class:"form-row align-items-center"},Object(o.h)("div",{class:"col-auto my-1 mx-auto",style:"width: 80px;"},Object(o.h)("select",{class:"custom-select",style:"background-color: inherit; border: none;",onInput:this.changeLanguage},Object(o.h)("option",{value:"no",selected:"no"===v},"ðŸ‡³ðŸ‡´ NO"),Object(o.h)("option",{value:"en",selected:"en"===v},"ðŸ‡¬ðŸ‡§ EN"),Object(o.h)("option",{value:"es",selected:"es"===v},"ðŸ‡ªðŸ‡¸ ES"),Object(o.h)("option",{value:"de",selected:"de"===v},"ðŸ‡©ðŸ‡ª DE"),Object(o.h)("option",{value:"fr",selected:"fr"===v},"ðŸ‡«ðŸ‡· FR"),Object(o.h)("option",{value:"ru",selected:"ru"===v},"ðŸ‡·ðŸ‡º RU"),Object(o.h)("option",{value:"se",selected:"se"===v},"ðŸ‡¸ðŸ‡ª SE"))))))}})||a;e.default=m}.call(this,s("hosL").Fragment)},s4FZ:function(t,e,s){"use strict";(function(t){function a(t){return l.a.isObject(t)&&t.s3LargeLink}var o,c=s("hosL"),l=s("Utv1"),n=s("/eY4");s("OhSV");let r=Object(n.a)(o=class extends c.Component{constructor(t){super(t),this.scrollImages=t=>{const{images:e}=this.props,{scrollLeft:s,clientWidth:a}=t.target,o=s/a,c=Math.round(o),l=Math.abs(c-o);(Number.isInteger(o)||l<.1)&&this.setState({imageIdx:c})},this.distance=t=>Math.hypot(t.touches[0].pageX-t.touches[1].pageX,t.touches[0].pageY-t.touches[1].pageY),this.pinchZoomOnTouchStart=t=>{if(2===t.touches.length){t.preventDefault(),t.stopPropagation();const e={};e.x=(t.touches[0].pageX+t.touches[1].pageX)/2,e.y=(t.touches[0].pageY+t.touches[1].pageY)/2,e.distance=this.distance(t),this.setState({start:e})}},this.pinchZoomOnTouchMove=t=>{let{imageElementScale:e,imageElementMaxScale:s}=this.state;const{start:a}=this.state;if(2===t.touches.length){let o;if(t.preventDefault(),t.stopPropagation(),t.scale)o=t.scale;else{o=this.distance(t)/a.distance}e=Math.min(Math.max(1,o),s),this.setState({imageElementScale:e},()=>{const s=`translate3d(${2*((t.touches[0].pageX+t.touches[1].pageX)/2-a.x)}px, ${2*((t.touches[0].pageY+t.touches[1].pageY)/2-a.y)}px, 0) scale(${e})`;t.target.style.transition="",t.target.style.transform=s,t.target.style.WebkitTransform=s,t.target.style.zIndex="100000"})}},this.pinchZoomOnTouchEnd=t=>{this.setState({imageElementScale:1}),t.target.style.transition="transform 250ms",t.target.style.transform="",t.target.style.WebkitTransform="",t.target.style.zIndex=""},this.state={imageIdx:0,imageElementScale:1,imageElementMaxScale:5,start:{}}}render(){const{imageIdx:e,imageElementScale:s}=this.state,{images:o,id:l,dblClick:n=(()=>{}),likeRef:r={},noimagestext:i,minHeight:h="100px"}=this.props;return o&&0!==o.length?Object(c.h)("div",{class:"w-100 position-relative"},Object(c.h)("div",{class:"d-flex flex-row flex-nowrap bg-light border-top border-bottom",style:`\n                        overflow-x: ${s>1&&1===o.length?"visible !important":"auto"};\n                        overflow-y: ${s>1?"visible !important":"auto"};\n                        scroll-snap-type: x mandatory;\n                    `,onScroll:this.scrollImages},o&&o.filter(a).map(e=>Object(c.h)("div",{class:"col-12 clearfix p-0"},Object(c.h)("div",{class:"w-100 h-100 text-center rounded-lg imageContainer d-flex justify-content-center align-items-center position-relative ",style:"\n                                    scroll-snap-align: start;\n                                    flex-wrap: wrap;\n                                ",onDblclick:n,"data-id":l,onTouchstart:t=>{t.stopPropagation()},onTouchend:t=>{t.stopPropagation()},onTouchmove:t=>{t.stopPropagation()}},Object(c.h)("div",{class:"position-absolute w-100 h-100",style:`\n                                        background-image: url('${e.s3SmallLink}'); background-size: cover;\n                                        filter: blur(10px);\n                                        opacity: 0.5;\n                                    `}),e.s3LargeLink?Object(c.h)("img",{class:"img-fluid position-relative",src:`${e.s3LargeLink}${e.updatedDate?"?updated="+(""+e.updatedDate):""}`,loading:"lazy",style:`max-height: 75vh; min-height: ${h}; `,onTouchstart:this.pinchZoomOnTouchStart,onTouchend:this.pinchZoomOnTouchEnd,onTouchmove:this.pinchZoomOnTouchMove}):Object(c.h)(t,null,Object(c.h)("span",{class:"display-1 text-muted"},Object(c.h)("i",{class:"fas fa-camera"})))),r[l]&&Object(c.h)("span",{class:"likeHeart position-absolute text-white display-1",style:"top: calc(50% - 50px); left: calc(50% - 50px); width: 100px; height: 100px;"},Object(c.h)("i",{class:"fas fa-heart likeStory"}))))),o&&o.length>1&&Object(c.h)(t,null,Object(c.h)("div",{class:"w-100 text-center"},Object(c.h)("small",null,Object(c.h)("small",null,o&&o.filter(a).map((s,a)=>Object(c.h)(t,null,Object(c.h)("i",{class:(a===e?"fas":"far")+" fa-circle mr-1"})))))),Object(c.h)("div",{class:"position-absolute text-white font-weight-lighter px-1 py-1 rounded-lg",style:"top: 10px; right: 10px; background-color: rgba(0, 0, 0, 0.3); line-height: 1.0em;"},Object(c.h)("small",null,e+1," / ",o.length)))):i?Object(c.h)(t,null,Object(c.h)("div",{class:"col-12 text-center text-muted"},Object(c.h)("div",{class:"display-1"},Object(c.h)("i",{class:"fas fa-camera"})),Object(c.h)("h3",{class:"font-weight-lighter"},i))):Object(c.h)(t,null)}})||o;e.a=r}).call(this,s("hosL").Fragment)}}]);
//# sourceMappingURL=route-grant-access.chunk.f8f00.esm.js.map