(window.webpackJsonp=window.webpackJsonp||[]).push([[59],{"4imK":function(t,e,r){"use strict";(function(t){var o,a=r("hosL"),s=r("Utv1"),n=r("/eY4"),i=r("OhSV"),c=r("nHdA"),l=r("irB3"),h=(r("UwwE"),r("8Lgr")),u=(r("QkTp"),Object(n.a)(o=function(e){function r(){for(var t,r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(t=e.call.apply(e,[this].concat(o))||this).toggleDate=function(e){e.stopPropagation(),e.preventDefault(),t.setState({showDate:!t.state.showDate})},t.ignoreGarminWorkout=function(e){return new Promise((function(r,o){return e.stopPropagation(),Promise.resolve(t.props.stores.garminActivityDetailsStore.ignoreWorkout(e.target.parentElement.dataset.id||e.target.dataset.id)).then((function(){try{return t.loadGarminActivities(),r()}catch(t){return o(t)}}),o)}))},t.importGarminWorkout=function(e){return new Promise((function(r,o){function a(){return t.loadGarminActivities(),t.loadWorkouts(),r()}var s,n,i,c;return e.stopPropagation(),s=e.target.parentElement.dataset.id||e.target.dataset.id,i=(n=t.props.stores).garminActivityDetailsStore,c=n.workoutStore.currentTeam,t.props.asTrack?Promise.resolve(i.importTrack(s,c)).then(function(){try{return a.call(this)}catch(t){return o(t)}}.bind(this),o):Promise.resolve(i.importWorkout(s,c)).then(function(){try{return a.call(this)}catch(t){return o(t)}}.bind(this),o)}))},t.loadWorkouts=function(){return new Promise((function(e,r){var o;return o=t.props.stores.workoutStore,Promise.resolve(o.load({query:{team:o.currentTeam}})).then((function(){try{return e()}catch(t){return r(t)}}),r)}))},t.toggleDetail=function(){var e=t.state.showDetail;t.setState({showDetail:!(void 0!==e&&e)})},t}var o,n;n=e,(o=r).prototype=Object.create(n.prototype),o.prototype.constructor=o,o.__proto__=n;var u=r.prototype;return u.loadGarminActivities=function(){return new Promise(function(t){return this.props.stores.garminActivityDetailsStore.load({query:{hideImported:1}}),t()}.bind(this))},u.componentDidMount=function(){this.loadGarminActivities()},u.render=function(){var e=this,r=this.state,o=r.showDate,n=r.showDetail,u=void 0!==n&&n,b=this.props,d=b.activities,p=void 0===d?[]:d,m=b.showDate,f=b.asTrack,g=void 0!==f&&f,O=this.props.stores,j=O.userStore,v=j.findTeam(O.workoutStore.currentTeam||j.team.id);return u?Object(a.h)(t,null,Object(a.h)("div",{class:"col-12 mb-3"},Object(a.h)("div",{class:"row"},p&&p.length>0&&Object(a.h)("div",{class:"col-12 border-top border-bottom pt-3 pb-3 my-2 bg-light"},Object(a.h)("button",{type:"button",class:"float-right btn btn-sm btn-link",onClick:this.toggleDetail},Object(a.h)("i",{class:"fas fa-caret-up"})," ",Object(a.h)(i.c,{id:"garmin.hide-list"},"Hide list")),Object(a.h)("h5",null,Object(a.h)(i.c,{id:"workout.index.garmin-workouts"},"Garmin workouts / not imported")," ",p.length),p&&p.map((function(r){var n=r.summary,u=void 0===n?{}:n,b=s.a.parseInputDate(u.startTimeInSeconds);return Object(a.h)(t,null,Object(a.h)("div",{class:"col-12 d-flex mb-4 position-relative"},Object(a.h)("div",{class:"text-center border rounded-circle imageRounded",style:'background-image: url("./assets/garmin-connect.png"); border-width: 3px !important;'}," "),Object(a.h)("div",{class:"flex-grow-1 pl-3",style:"line-height: 1.2em;"},Object(a.h)("h5",{class:"my-0 mb-1",style:"line-height: 1.0em;"},u.deviceName),u.activityType,Object(a.h)("br",null),Object(a.h)("small",{class:"text-muted"},b&&Object(a.h)("small",{onClick:e.toggleDate},m||o?s.a.formatDate(b,{locale:"no-NB"}):s.a.formatDistance(b,new Date,{locale:"no-NB"})),Object(a.h)("span",{class:"text-muted"},Object(a.h)("i",{class:"fas fa-road ml-2"})," ",Object(a.h)(h.a,{stores:e.props.stores,value:u.distanceInMeters/1e3}),Object(a.h)("i",{class:"fas fa-mountain ml-2"})," ",Object(a.h)(l.a,{stores:e.props.stores,value:u.totalElevationGainInMeters}),Object(a.h)("i",{class:"fas fa-tachometer-alt ml-2"})," ",Object(a.h)(c.a,{stores:e.props.stores,value:3.6*u.averageSpeedInMetersPerSecond}),Object(a.h)("i",{class:"fas fa-stopwatch ml-2"})," ",s.a.secToHms(u.durationInSeconds))),Object(a.h)("br",null),Object(a.h)("button",{class:"btn btn-sm btn-block btn-primary",onClick:e.importGarminWorkout,"data-id":r.id},Object(a.h)("i",{class:"fas fa-file-import"})," ",g?Object(a.h)(i.c,{id:"garmin.import-track"},"Import as track"):Object(a.h)(t,null,Object(a.h)(i.c,{id:"garmin.import"},"Import workout")," ",Object(a.h)("i",{class:"fas fa-arrow-right"})," ",v)),Object(a.h)("button",{class:"btn btn-sm btn-link",onClick:e.ignoreGarminWorkout,"data-id":r.id},Object(a.h)("i",{class:"fas fa-trash-alt"})," ",Object(a.h)(i.c,{id:"garmin.ignore"},"Ignore workout")))))})),Object(a.h)("button",{type:"button",class:"btn btn-block btn-primary mt-3",onClick:this.toggleDetail},Object(a.h)("i",{class:"fas fa-caret-up"})," ",Object(a.h)(i.c,{id:"garmin.hide-list"},"Hide list")))))):p&&p.length>0?Object(a.h)(t,null,Object(a.h)("div",{class:"col-12 mb-3"},Object(a.h)("button",{type:"button",class:"btn btn-block btn-outline-info",onClick:this.toggleDetail},Object(a.h)("div",{class:"float-right ml-2 text-center border rounded-circle imageRounded imageRoundedIcon",style:"background-image: url('./assets/garmin-connect.png');"}),Object(a.h)(i.c,{id:"workout.index.garmin-workouts"},"Garmin workouts / not imported")," ",p.length))):Object(a.h)(t,null)},r}(a.Component))||o);e.a=u}).call(this,r("hosL").Fragment)},bUJL:function(t,e,r){"use strict";(function(t){var o,a=r("hosL"),s=r("Utv1"),n=r("/eY4"),i=r("OhSV"),c=r("nHdA"),l=r("irB3"),h=(r("UwwE"),r("8Lgr")),u=(r("QkTp"),Object(n.a)(o=function(e){function r(){for(var t,r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(t=e.call.apply(e,[this].concat(o))||this).toggleDate=function(e){e.stopPropagation(),e.preventDefault(),t.setState({showDate:!t.state.showDate})},t.ignoreStravaWorkout=function(e){return new Promise((function(r,o){return e.stopPropagation(),Promise.resolve(t.props.stores.stravaActivityStore.ignoreWorkout(e.target.parentElement.dataset.id||e.target.dataset.id)).then((function(){try{return t.loadStravaActivities(),r()}catch(t){return o(t)}}),o)}))},t.importStravaWorkout=function(e){return new Promise((function(r,o){var a;return e.stopPropagation(),a=t.props.stores,Promise.resolve(a.stravaActivityStore.importWorkout(e.target.parentElement.dataset.id||e.target.dataset.id,a.workoutStore.currentTeam)).then((function(){try{return t.loadStravaActivities(),t.loadWorkouts(),r()}catch(t){return o(t)}}),o)}))},t.loadWorkouts=function(){return new Promise((function(e,r){var o;return o=t.props.stores.workoutStore,Promise.resolve(o.load({query:{team:o.currentTeam}})).then((function(){try{return e()}catch(t){return r(t)}}),r)}))},t.toggleDetail=function(){var e=t.state.showDetail;t.setState({showDetail:!(void 0!==e&&e)})},t}var o,n;n=e,(o=r).prototype=Object.create(n.prototype),o.prototype.constructor=o,o.__proto__=n;var u=r.prototype;return u.loadStravaActivities=function(){return new Promise(function(t){return this.props.stores.stravaActivityStore.load({query:{hideImported:1}}),t()}.bind(this))},u.componentDidMount=function(){this.loadStravaActivities()},u.render=function(){var e=this,r=this.state,o=r.showDate,n=r.showDetail,u=void 0!==n&&n,b=this.props,d=b.activities,p=b.showDate,m=this.props.stores,f=m.userStore,g=f.findTeam(m.workoutStore.currentTeam||f.team.id);return u?Object(a.h)(t,null,Object(a.h)("div",{class:"col-12 mb-3"},Object(a.h)("div",{class:"row"},d&&d.length>0&&Object(a.h)("div",{class:"col-12 border-top border-bottom pt-3 pb-3 my-2 bg-light"},Object(a.h)("button",{type:"button",class:"float-right btn btn-sm btn-link",onClick:this.toggleDetail},Object(a.h)("i",{class:"fas fa-caret-up"})," ",Object(a.h)(i.c,{id:"strava.hide-list"},"Hide list")),Object(a.h)("h5",null,Object(a.h)(i.c,{id:"workout.index.strava-workouts"},"Strava workouts / not imported")," ",d.length),d&&d.map((function(r){var n=r.summary;s.a.parseInputDate((void 0===n?{}:n).startTimeInSeconds);return Object(a.h)(t,null,Object(a.h)("div",{class:"col-12 d-flex mb-4 position-relative"},Object(a.h)("div",{class:"text-center border rounded-circle imageRounded",style:'background-image: url("./assets/strava-icon.png"); border-width: 3px !important;'}," "),Object(a.h)("div",{class:"flex-grow-1 pl-3",style:"line-height: 1.2em;"},Object(a.h)("h5",{class:"my-0 mb-1",style:"line-height: 1.0em;"},r.name),r.type,Object(a.h)("br",null),Object(a.h)("small",{class:"text-muted"},r.start_date&&Object(a.h)("small",{onClick:e.toggleDate},p||o?s.a.formatDate(r.start_date,{locale:"no-NB"}):s.a.formatDistance(r.start_date,new Date,{locale:"no-NB"})),Object(a.h)("span",{class:"text-muted"},Object(a.h)("i",{class:"fas fa-road ml-2"})," ",Object(a.h)(h.a,{stores:e.props.stores,value:r.distance/1e3}),Object(a.h)("i",{class:"fas fa-mountain ml-2"})," ",Object(a.h)(l.a,{stores:e.props.stores,value:r.total_elevation_gain}),Object(a.h)("i",{class:"fas fa-tachometer-alt ml-2"})," ",Object(a.h)(c.a,{stores:e.props.stores,value:3.6*r.average_speed}),Object(a.h)("i",{class:"fas fa-stopwatch ml-2"})," ",s.a.secToHms(r.elapsed_time))),Object(a.h)("br",null),Object(a.h)("button",{class:"btn btn-sm btn-block btn-primary",onClick:e.importStravaWorkout,"data-id":r.id},Object(a.h)("i",{class:"fas fa-file-import"})," ",Object(a.h)(i.c,{id:"strava.import"},"Import workout")," ",Object(a.h)("i",{class:"fas fa-arrow-right"})," ",g),Object(a.h)("button",{class:"btn btn-sm btn-link",onClick:e.ignoreStravaWorkout,"data-id":r.id},Object(a.h)("i",{class:"fas fa-trash-alt"})," ",Object(a.h)(i.c,{id:"strava.ignore"},"Ignore workout")))))})),Object(a.h)("button",{type:"button",class:"btn btn-block btn-primary mt-3",onClick:this.toggleDetail},Object(a.h)("i",{class:"fas fa-caret-up"})," ",Object(a.h)(i.c,{id:"strava.hide-list"},"Hide list")))))):d&&d.length>0?Object(a.h)(t,null,Object(a.h)("div",{class:"col-12 mb-3"},Object(a.h)("button",{type:"button",class:"btn btn-block btn-outline-info",onClick:this.toggleDetail},Object(a.h)("div",{class:"float-right ml-2 text-center border rounded-circle imageRounded imageRoundedIcon",style:"background-image: url('./assets/strava-icon.png');"}),Object(a.h)(i.c,{id:"workout.index.strava-workouts"},"Strava workouts / not imported")," ",d.length))):Object(a.h)(t,null)},r}(a.Component))||o);e.a=u}).call(this,r("hosL").Fragment)},nKYJ:function(t,e,r){"use strict";r.r(e),function(t){function o(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,o)}return r}function a(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var s,n=r("hosL"),i=(r("Utv1"),r("/eY4")),c=r("OhSV"),l=r("go65"),h=r("w8dD"),u=(r("bUJL"),r("4imK")),b=r("ZOvn"),d=b.a.marginTop(!0),p=b.a.marginBottom(),m=b.a.subMenuMarginTop(),f={isLoading:!1},g=Object(i.a)(s=function(e){function r(t){var r;return(r=e.call(this,t)||this).state=function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?o(Object(r),!0).forEach((function(e){a(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({},f),r}var s,i;i=e,(s=r).prototype=Object.create(i.prototype),s.prototype.constructor=s,s.__proto__=i;var b=r.prototype;return b.loadTracks=function(){return new Promise(function(t,e){var r,o,a;return this.setState({isLoading:!0}),o=(r=this.props.stores).userStore,a=r.messageStore,Promise.resolve(r.trackStore.load()).then(function(){try{return Promise.resolve(o.getNotifications()).then(function(){try{return Promise.resolve(a.getUnReadMessages()).then(function(){try{return this.setState({isLoading:!1}),t()}catch(t){return e(t)}}.bind(this),e)}catch(t){return e(t)}}.bind(this),e)}catch(t){return e(t)}}.bind(this),e)}.bind(this))},b.loadStravaActivities=function(){return new Promise(function(t){return this.props.stores.stravaActivityStore.load({query:{hideImported:1}}),t()}.bind(this))},b.loadGarminActivities=function(){return new Promise(function(t){return this.props.stores.garminActivityDetailsStore.load({query:{hideImported:1}}),t()}.bind(this))},b.componentDidMount=function(){this.loadTracks(),this.loadGarminActivities()},b.render=function(){var e=this,r=this.props.scrolledDown,o=this.state,a=o.isLoading,s=o.searchText,i=this.props.stores,b=i.trackStore.tracks,f=i.userStore.user,g=i.appState.darkmode,O=i.workoutStore.currentTeam,j=i.garminActivityDetailsStore.garminActivityDetails,v=void 0===j?[]:j;return Object(n.h)("div",{class:"container-fluid",style:"margin-bottom: "+p+"; margin-top: "+d+";"},Object(n.h)("div",{class:"row fixed-top pt-2",style:"margin-top: "+(r>0?0:m)+"; background-color: "+(g?"#191d21":"#f8f9fa")+"; transition: all 0.3s ease-in-out;"},Object(n.h)("div",{class:"col text-center border-bottom border-primary subtopmenu"},Object(n.h)("a",{href:"/tracks/",class:"text-primary stretched-link"},Object(n.h)("nobr",null,Object(n.h)("i",{class:"fas fa-map-marked"})," ",Object(n.h)(c.c,{id:"tracks.your-tracks"},"Dine runder")))),Object(n.h)("div",{class:"col text-center subtopmenu"},Object(n.h)("a",{href:"/tracks/public",class:"text-secondary stretched-link"},Object(n.h)("nobr",null,Object(n.h)("i",{class:"fas fa-map-marked"})," ",Object(n.h)(c.c,{id:"tracks.public-tracks"},"Offentlige runder"))))),Object(n.h)("div",{class:"row"},Object(n.h)("div",{class:"col-12"},Object(n.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 px-0"},Object(n.h)("h5",null,Object(n.h)(c.c,{id:"tracks.all-tracks",fields:{total:b.length}},"Treningsrundene dine - ",b.length," stk"))),Object(n.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 px-0 clearfix mb-2"},Object(n.h)("a",{class:"btn btn-sm btn-primary float-right",href:"/tracks/edit/new"},Object(n.h)("i",{class:"fas fa-plus"})," ",Object(n.h)(c.c,{id:"tracks.add-new"},"Legg til runde"))),!a&&b&&0===b.length&&Object(n.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 text-muted"},Object(n.h)("div",{class:"text-center mb-5"},Object(n.h)("div",{class:"display-1"},Object(n.h)("i",{class:"fas fa-map-marked"})),Object(n.h)("h5",null,Object(n.h)(c.c,{id:"tracks.no-tracks-yet"},"Ingen runder er registrert ennå."))),Object(n.h)("p",{class:"text-center"},Object(n.h)("p",null,Object(n.h)(c.c,{id:"tracks.no-tracks-info-1"},"Du har mulighet til å laste opp GPX-filer fra rundene dine.")),Object(n.h)("p",null,Object(n.h)(c.c,{id:"tracks.no-tracks-info-2"},"Det finnes mange apper som lar deg lage GPX-filer, men vi anbefaler"),":"),"ViewRanger for ",Object(n.h)("a",{href:"https://apps.apple.com/gb/app/viewranger-hike-ride-or-walk/id404581674"},"iOS")," and  ",Object(n.h)("a",{href:"https://play.google.com/store/apps/details?id=com.augmentra.viewranger.android&hl=en"},"Android"),"."),Object(n.h)(c.c,{id:"tracks.howto-title"},"Slik kommer du i gang"),":",Object(n.h)("ol",null,Object(n.h)("li",null,Object(n.h)(c.c,{id:"tracks.howto-1"},'Trykk på knappen "Legg til runde" rett nedenfor.')))))),f&&f.garmin&&Object(n.h)("div",{class:"row"},Object(n.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mb-3"},Object(n.h)("div",{class:"row mt-3"},f&&f.garmin&&Object(n.h)(t,null,Object(n.h)(u.a,{stores:this.props.stores,activities:v,asTrack:!0,key:"garmin-"+O+"-"+v.length}))))),Object(n.h)("div",{class:"row"},Object(n.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mb-3"},Object(n.h)("div",{class:"d-flex justify-content-center py-3"},Object(n.h)(c.b,null,Object(n.h)("input",{class:"form-control form-control mr-2",type:"search",placeholder:Object(n.h)(c.c,{id:"header.search-placeholder"},"Søk etter det meste..."),value:s,onInput:Object(l.a)(this,"searchText")}))))),Object(n.h)("div",{class:"row"},Object(n.h)("div",{class:"col-12"},b&&b.filter((function(t){return!s||new RegExp(s,"i").test(t.name)})).map((function(t){return Object(n.h)(h.a,{stores:e.props.stores,track:t})})))))},r}(n.Component))||s;e.default=g}.call(this,r("hosL").Fragment)}}]);
//# sourceMappingURL=route-tracks.chunk.f5564.js.map