(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{t1gC:function(e,t,a){"use strict";a.r(t),function(e){function c(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);t&&(c=c.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,c)}return a}function s(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?c(Object(a),!0).forEach((function(t){l(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):c(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function l(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var i,o=a("hosL"),r=a("Utv1"),n=a("/eY4"),h=a("OhSV"),b=a("Y3FI"),d=a("ZOvn");const p=d.a.marginTop(!1),u=d.a.marginTopBack(!1),m=d.a.marginBottom(),O=(d.a.subMenuMarginTop(),{isLoading:!1});let g=Object(n.a)(i=class extends o.Component{constructor(e){var t;super(e),t=this,this.signupToRace=async function(){const{raceStore:e,userStore:a}=t.props.stores,{user:c}=a,{signup:l}=e,{raceid:i}=t.props;await e.addContestant({id:i,classId:l.class,newContestant:s({team:c.team,firstname:c.firstname,lastname:c.lastname,sportsClub:c.sportsClub,email:c.email,cellphone:c.cellphone,facebook:c.facebook,instagram:c.instagram},l)})},this.updateSignup=e=>{const t=e.target.id,a=e.target.value,{raceStore:c}=this.props.stores;c.updateObjectKeyValue("signup",t,a)},this.editSignup=e=>{const{raceid:t}=this.props,{raceStore:a}=this.props.stores,c=e.target.id,s=e.target.value,{classid:l,contestantid:i}=e.target.dataset;a.updateObjectKeyValue("signup",c,s);const o={raceClassId:l,contestantId:i,["raceClassContestant"+r.a.ucfirst(c)]:s};clearTimeout(this.updateTimer[c]),this.updateTimer[c]=setTimeout((async function(){a.editClass({id:t,data:o})}),500)},this.likeRace=async function(){const{raceStore:e}=t.props.stores,{race:a}=e;await e.likeRace({id:a.id})},this.toggleAddComment=e=>{const t=e.target.parentElement.dataset.id||e.target.dataset.id,{showAddComment:a}=this.state;this.setState({showAddComment:!a},()=>{this.inputRef[t]&&this.inputRef[t].focus()})},this.back=()=>{Object(b.route)("/",!0)},this.state=s({},O),this.inputRef={},this.updateTimer={}}async loadRace(e=this.props){this.setState({isLoading:!0});const{raceStore:t,userStore:a}=e.stores,{user:c={}}=a,{raceid:l}=e;await t.load(l),this.setState({isLoading:!1});let i={};const{race:o}=t;if(o.classes&&c&&c.email)for(let e=0,t=o.classes.length;e<t;e+=1){const t=o.classes[e];if(t.contestants){const e=t.contestants.findIndex(e=>e.email===c.email);e>-1&&(i=s({},t.contestants[e]))}}t.updateKeyValue("signup",i)}componentDidMount(){this.loadRace()}componentWillReceiveProps(e){e.raceid!==this.props.raceid&&this.loadRace(e)}render(){const{userStore:t,raceStore:a,appState:c}=this.props.stores,{user:s={},teams:l=[]}=t,{race:i,signup:n}=a,{language:b="no"}=c;let d={};n.class&&(d=a.getRaceClassById(n.class));const O=new Date;return Object(o.h)("div",{class:"container-fluid",style:`margin-bottom: ${m}; margin-top: ${p};`},Object(o.h)("div",{class:"d-flex justify-content-between mb-2"},Object(o.h)("div",null,Object(o.h)("button",{class:"btn btn-link pl-0 fixed-top",style:`top: ${u}; left: 5px; font-size: 25px; width: 40px;`,onClick:this.back},Object(o.h)("i",{class:"fas fa-arrow-circle-left"}))),Object(o.h)("div",null,Object(o.h)("h5",{class:"text-muted"}," "))),Object(o.h)("h2",{class:"mb-0"},Object(o.h)(h.c,{id:"races.signup"},"Påmelding")," ",Object(o.h)("span",{class:"font-weight-lighter",style:"letter-spacing: -1px;"}," - ",i.title)),Object(o.h)("div",{class:"mb-4"},i.startDate&&Object(o.h)(e,null,Object(o.h)(h.c,{id:"races.periode"},"Periode"),": ",r.a.formatDate(i.startDate,{locale:"no-NB",hour12:!1,hour:"2-digit",minute:"2-digit"})),i.endDate&&Object(o.h)(e,null," - ",r.a.formatDate(i.endDate,{locale:"no-NB",hour12:!1,hour:"2-digit",minute:"2-digit"}))),O>=new Date(i.signupStartDate)&&O<=new Date(i.signupEndDate)?Object(o.h)(e,null,Object(o.h)("span",{class:"font-weight-lighter"},Object(o.h)(h.c,{id:"races.signed-in-as"},"Logget inn som"),":")," ",s.email,Object(o.h)("br",null),Object(o.h)("br",null),n.id?Object(o.h)(e,null,Object(o.h)("div",{class:"font-weight-bold mb-4"},Object(o.h)("i",{class:"fas fa-check text-success"})," ",Object(o.h)(h.c,{id:"races.signed-up"},"Din bruker er påmeldt!"),Object(o.h)("br",null)),i.signuppayment&&Object(o.h)(e,null,Object(o.h)("div",{class:"form-group row my-0"},Object(o.h)("label",{for:"cellphone",class:"col-2 col-form-label text-right font-weight-lighter"},Object(o.h)(h.c,{id:"races.signup"},"Påmelding")),Object(o.h)("div",{class:"col-10"},n.paidSignupfee?Object(o.h)("div",{class:"py-2"},Object(o.h)(h.c,{id:"races.paid"},"Betalt"),": ",r.a.formatDate(n.paidSignupfee),Object(o.h)("i",{class:"fas fa-check text-success ml-3"})):Object(o.h)(e,null,Object(o.h)("div",{class:"alert alert-danger mb-1",role:"alert"},Object(o.h)("h5",null,Object(o.h)("span",{class:"font-weight-lighter"},Object(o.h)(h.c,{id:"races.payment-info"},"Betaling påmelding"),":")," ",function(e="",t,a="no"){if(r.a.isString(e)){let c=e;const s=new RegExp(`<${a}>(.*?)</${a}>`,"s").exec(c);if(s){const e=s[0];e&&(c=e)}return c.replace(/\{\{img\.(\d+)\s*(\d*)\}\}/g,(function(e,a,c){return r.a.isObject(t[a])?`<img src=${t[a].s3XXLargeLink} class='img-fluid float-right' style='width: ${c||40}%;' />`:""}))}return e}(i.signuppayment,i.images,b),Object(o.h)("br",null),d.signupfee||i.signupfee," NOK")))))),Object(o.h)("div",{class:"clearfix mt-2"},Object(o.h)("span",{class:"font-weight-lighter float-right"},Object(o.h)(h.c,{id:"races.click-to-change"},"Klikk for å endre info i påmeldingen."))),Object(o.h)("div",{class:"form-group row my-0"},Object(o.h)("label",{for:"cellphone",class:"col-2 col-form-label text-right font-weight-lighter"},Object(o.h)(h.c,{id:"races.cellphone"},"Mobil")),Object(o.h)("div",{class:"col-10"},Object(o.h)(h.b,null,Object(o.h)("input",{type:"text",class:"form-control-plaintext",id:"cellphone","data-classid":n.class,"data-contestantid":n.id,onInput:this.editSignup,value:n.cellphone,placeholder:Object(o.h)(h.c,{id:"races.cellphone-help"},"Hva er mobilnummer ditt?")})))),Object(o.h)("div",{class:"form-group row my-0"},Object(o.h)("label",{for:"firstname",class:"col-2 col-form-label text-right font-weight-lighter"},Object(o.h)(h.c,{id:"races.firstname"},"Fornavn")),Object(o.h)("div",{class:"col-10"},Object(o.h)(h.b,null,Object(o.h)("input",{type:"text",class:"form-control-plaintext",id:"firstname","data-classid":n.class,"data-contestantid":n.id,onInput:this.editSignup,value:n.firstname,placeholder:Object(o.h)(h.c,{id:"races.firstname-help"},"Hva er fornavnet ditt?")})))),Object(o.h)("div",{class:"form-group row my-0"},Object(o.h)("label",{for:"lastname",class:"col-2 col-form-label text-right font-weight-lighter"},Object(o.h)(h.c,{id:"races.lastname"},"Etternavn")),Object(o.h)("div",{class:"col-10"},Object(o.h)(h.b,null,Object(o.h)("input",{type:"text",class:"form-control-plaintext",id:"lastname","data-classid":n.class,"data-contestantid":n.id,onInput:this.editSignup,value:n.lastname,placeholder:Object(o.h)(h.c,{id:"races.lastname-help"},"Hva er etternavnet ditt?")})))),Object(o.h)("div",{class:"form-group row my-0"},Object(o.h)("label",{for:"sportsClub",class:"col-2 col-form-label text-right font-weight-lighter"},Object(o.h)(h.c,{id:"races.sportsclub"},"Klubb")),Object(o.h)("div",{class:"col-10"},Object(o.h)(h.b,null,Object(o.h)("input",{type:"text",class:"form-control-plaintext",id:"sportsClub","data-classid":n.class,"data-contestantid":n.id,onInput:this.editSignup,value:n.sportsClub,placeholder:Object(o.h)(h.c,{id:"races.sportsClub-help"},"Hvilken klubb tilhører du?")})))),Object(o.h)("div",{class:"form-group row my-0"},Object(o.h)("label",{for:"facebook",class:"col-2 col-form-label text-right font-weight-lighter"},Object(o.h)(h.c,{id:"races.facebook"},"Facebook")),Object(o.h)("div",{class:"col-10"},Object(o.h)(h.b,null,Object(o.h)("input",{type:"text",class:"form-control-plaintext",id:"facebook","data-classid":n.class,"data-contestantid":n.id,onInput:this.editSignup,value:n.facebook,placeholder:Object(o.h)(h.c,{id:"races.facebook-help"},"Hva er Facebook brukernavnet ditt?")})))),Object(o.h)("div",{class:"form-group row my-0"},Object(o.h)("label",{for:"instagram",class:"col-2 col-form-label text-right font-weight-lighter"},Object(o.h)(h.c,{id:"races.instagram"},"Instagram")),Object(o.h)("div",{class:"col-10"},Object(o.h)(h.b,null,Object(o.h)("input",{type:"text",class:"form-control-plaintext",id:"instagram","data-classid":n.class,"data-contestantid":n.id,onInput:this.editSignup,value:n.instagram,placeholder:Object(o.h)(h.c,{id:"races.instagram-help"},"Hva er Instagram brukernavnet ditt?")})))),Object(o.h)("div",{class:"form-group row my-0"},Object(o.h)("label",{for:"team",class:"col-2 col-form-label text-right font-weight-lighter"},Object(o.h)(h.c,{id:"races.team"},"Team")),Object(o.h)("div",{class:"col-10"},Object(o.h)("select",{class:"form-control-plaintext",id:"team","aria-describedby":"teamHelp","data-classid":n.class,"data-contestantid":n.id,onInput:this.editSignup,value:n.team},Object(o.h)("option",{value:""},"-- ",Object(o.h)(h.c,{id:"races.choose-team"},"Velg team")," --"),l.map(e=>Object(o.h)("option",{value:e.id},e.name))))),Object(o.h)("div",{class:"form-group row my-0"},Object(o.h)("label",{for:"team",class:"col-2 col-form-label text-right font-weight-lighter"},Object(o.h)(h.c,{id:"races.class"},"Klasse")),Object(o.h)("div",{class:"col-10"},Object(o.h)("select",{class:"form-control-plaintext",id:"class","aria-describedby":"classHelp",onInput:this.editSignup,value:n.class,disabled:!0},Object(o.h)("option",{value:""},"-- ",Object(o.h)(h.c,{id:"races.choose-class"},"Velg klasse")," --"),i.classes&&i.classes.sort((e,t)=>e.distance-t.distance).map(t=>Object(o.h)(e,null,Object(o.h)("option",{value:t.id},t.title," - ",t.distance," km - Påmelding: ",t.signupfee||i.signupfee," NOK"))))))):Object(o.h)(e,null,Object(o.h)("div",{class:"form-group"},Object(o.h)("label",{for:"cellphone"},Object(o.h)(h.c,{id:"races.cellphone"},"Mobil")),Object(o.h)("input",{type:"text",class:"form-control",id:"cellphone","aria-describedby":"cellphoneHelp",placeholder:s.cellphone,onInput:this.updateSignup,value:n.cellphone}),Object(o.h)("small",{id:"cellphoneHelp",class:"form-text text-muted"},Object(o.h)(h.c,{id:"races.cellphone-help"},"'Hva er mobilnummer ditt?'"))),Object(o.h)("div",{class:"row"},Object(o.h)("div",{class:"col"},Object(o.h)("div",{class:"form-group"},Object(o.h)("label",{for:"firstname"},Object(o.h)(h.c,{id:"races.firstname"},"Fornavn")),Object(o.h)("input",{type:"text",class:"form-control",id:"firstname","aria-describedby":"firstnameHelp",placeholder:s.firstname,onInput:this.updateSignup,value:n.firstname}),Object(o.h)("small",{id:"firstnameHelp",class:"form-text text-muted"},Object(o.h)(h.c,{id:"races.firstname-help"},"Hva er fornavnet ditt?")))),Object(o.h)("div",{class:"col"},Object(o.h)("div",{class:"form-group"},Object(o.h)("label",{for:"lastname"},Object(o.h)(h.c,{id:"races.lastname"},"Etternavn")),Object(o.h)("input",{type:"text",class:"form-control",id:"lastname","aria-describedby":"lastnameHelp",placeholder:s.lastname,onInput:this.updateSignup,value:n.lastname}),Object(o.h)("small",{id:"lastnameHelp",class:"form-text text-muted"},Object(o.h)(h.c,{id:"races.lastname-help"},"Hva er etternavnet ditt?"))))),Object(o.h)("div",{class:"form-group"},Object(o.h)("label",{for:"sportsClub"},Object(o.h)(h.c,{id:"races.sportsclub"},"Klubb")),Object(o.h)("input",{type:"text",class:"form-control",id:"sportsClub","aria-describedby":"sportsClubHelp",placeholder:s.sportsClub,onInput:this.updateSignup,value:n.sportsClub}),Object(o.h)("small",{id:"sportsClubHelp",class:"form-text text-muted"},Object(o.h)(h.c,{id:"races.sportsClub-help"},"Hvilken klubb tilhører du?"))),Object(o.h)("div",{class:"row"},Object(o.h)("div",{class:"col"},Object(o.h)("div",{class:"form-group"},Object(o.h)("label",{for:"facebook"},Object(o.h)(h.c,{id:"races.facebook"},"Facebook")),Object(o.h)("input",{type:"text",class:"form-control",id:"facebook","aria-describedby":"facebookHelp",placeholder:s.facebook,onInput:this.updateSignup,value:n.facebook}),Object(o.h)("small",{id:"facebookHelp",class:"form-text text-muted"},Object(o.h)(h.c,{id:"races.facebook-help"},"Hva er Facebook brukernavnet ditt?")))),Object(o.h)("div",{class:"col"},Object(o.h)("div",{class:"form-group"},Object(o.h)("label",{for:"instagram"},Object(o.h)(h.c,{id:"races.instagram"},"Instagram")),Object(o.h)("input",{type:"text",class:"form-control",id:"instagram","aria-describedby":"instagramHelp",placeholder:s.instagram,onInput:this.updateSignup,value:n.instagram}),Object(o.h)("small",{id:"instagramHelp",class:"form-text text-muted"},Object(o.h)(h.c,{id:"races.instagram-help"},"Hva er Instagram brukernavnet ditt?"))))),Object(o.h)("div",{class:"form-group"},Object(o.h)("label",{for:"team"},Object(o.h)(h.c,{id:"races.team"},"Team")),Object(o.h)("select",{class:"form-control",id:"team","aria-describedby":"teamHelp",onInput:this.updateSignup,value:n.team},Object(o.h)("option",{value:""},"-- ",Object(o.h)(h.c,{id:"races.choose-team"},"Velg team")," --"),l.map(e=>Object(o.h)("option",{value:e.id},e.name))),Object(o.h)("small",{id:"teamHelp",class:"form-text text-muted"},Object(o.h)(h.c,{id:"races.choose-team-help"},"Velg fra dine team"))),Object(o.h)("div",{class:"form-group"},Object(o.h)("label",{for:"class"},Object(o.h)(h.c,{id:"races.class"},"Klasse")),Object(o.h)("select",{class:"form-control",id:"class","aria-describedby":"classHelp",onInput:this.updateSignup,value:n.class},Object(o.h)("option",{value:""},"-- ",Object(o.h)(h.c,{id:"races.choose-class"},"Velg klasse")," --"),i.classes&&i.classes.map(t=>Object(o.h)(e,null,Object(o.h)("option",{value:t.id},t.title," - ",t.distance," km - Påmelding: ",t.signupfee||i.signupfee," NOK")))),Object(o.h)("small",{id:"classHelp",class:"form-text text-muted"},Object(o.h)(h.c,{id:"races.choose-class-help"},"Velg ønsket klasse."))),Object(o.h)("div",{class:"form-group form-check"},Object(o.h)("input",{type:"checkbox",class:"form-check-input",id:"termsAndAgreement",onInput:this.updateSignup,checked:n.termsAndAgreement,value:!0}),Object(o.h)("label",{class:"form-check-label",for:"termsAndAgreement"},Object(o.h)(h.c,{id:"races.agreement-accept"},"Jeg har lest og godtar reglene for løpet."))),Object(o.h)("button",{type:"button",class:"btn btn-primary",onClick:this.signupToRace},Object(o.h)(h.c,{id:"races.do-signup"},"Meld meg på")))):Object(o.h)(e,null,O<new Date(i.signupStartDate)?Object(o.h)(e,null,Object(o.h)("h5",{class:"mt-4"},Object(o.h)("i",{class:"fas fa-exclamation-circle"})," ",Object(o.h)(h.c,{id:"races.signup-not-open-yet"},"Påmeldingen har ikke åpnet ennå!")),Object(o.h)("p",{class:"mt-4"},Object(o.h)(h.c,{id:"races.signup-opening"},"Påmeldingen åpner"),":",Object(o.h)("br",null),Object(o.h)("span",{class:"display-4"},r.a.formatDate(i.signupStartDate,{locale:"no-NB",hour12:!1,hour:"2-digit",minute:"2-digit"})))):Object(o.h)(e,null,Object(o.h)("h5",{class:"mt-4 mb-4"},Object(o.h)("i",{class:"fas fa-exclamation-circle"})," ",Object(o.h)(h.c,{id:"races.signup-closed"},"Påmeldingen er stengt!")))))}})||i;t.default=g}.call(this,a("hosL").Fragment)}}]);
//# sourceMappingURL=route-app-races.chunk.4a2b9.esm.js.map