(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{"8j+j":function(e,t,r){"use strict";r.r(t),function(e){function n(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function s(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){o(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function a(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}var i,c,l=r("hosL"),u=r("Utv1"),h=r("/eY4"),d=(r("OhSV"),r("ZOvn")),f=r("eT2M"),p=r.n(f),m=d.a.marginTop(!0),b=d.a.marginBottom(),g={isLoading:!1,contentIsNotLoaded:!0,reloadInSec:null,reloadLastEpoch:null,reloadIsActive:!1},O=(Object(h.a)(i=function(t){function r(e){var r;return(r=t.call(this,e)||this).initComponent=function(){var e=Math.floor((new Date).getTime()/1e3);r.setState({reloadIsActive:!0,reloadLastEpoch:e},(function(){return r.tickReloadTimeer()}))},r.state=s({},g),r.updateTimer={},r}a(r,t);var n=r.prototype;return n.tickReloadTimeer=function(){var e=this,t=this.state,r=t.reloadLastEpoch;if(t.reloadIsActive){var n=Math.floor((new Date).getTime()/1e3);this.setState({reloadInSec:60-(n-r)}),clearTimeout(this.updateTimer.tick),this.updateTimer.tick=setTimeout((function(){return e.tickReloadTimeer()}),1e3)}return!1},n.componentDidMount=function(){this.initComponent()},n.componentWillUnmount=function(){clearTimeout(this.updateTimer.tick)},n.render=function(){var t=Math.floor(u.a.normalizeBetween(this.state.reloadInSec,0,60,0,100));return Object(l.h)(e,null,Object(l.h)("div",{class:"progress fixed-top",style:"height: 2px; z-index: 999999;"},Object(l.h)("div",{class:"progress-bar",role:"progressbar",style:"width: "+t+"%;","aria-valuenow":t,"aria-valuemin":"0","aria-valuemax":"100"})))},r}(l.Component)),Object(h.a)(c=function(t){function r(e){var r;return(r=t.call(this,e)||this).loadLiveRaceResults=function(e,t){return new Promise((function(n,s){var o,a,i,c,l,u,h,d,f,p,m,b,g,O;return void 0===e&&(e=r.props),o=t.teamIds,a=t.focusOnMushers,i=t.bibs,h=(l=e.stores).userStore,d=(u=l.raceStore).race,p=(f=r.state).historyPointIndex,m=f.replayHistory,b=f.timerRunning,g=r.props.showDrawerReplay,O=u.getClassById(c=t.classid)||{},Promise.resolve(u.getRaceTrackerData(d.raceTrackerRace,{history:m||g,bibs:i,classid:c,startDate:O.startDate,endDate:O.endDate,isAdmin:h.isAdmin})).then((function(){try{return u.getRaceTrackerActiveTeams(o,a,i,p),b&&(clearTimeout(r.updateTimer.reload),r.updateTimer.reload=setTimeout((function(){console.log("loadLiveRaceResults.reloading...");var e=Math.floor((new Date).getTime()/1e3);r.setState({reloadLastEpoch:e}),r.loadLiveRaceResults(r.props,{teamIds:o,focusOnMushers:a,bibs:i,classid:c})}),6e4)),n()}catch(e){return s(e)}}),s)}))},r.loadRaceResults=function(e,t,n){return new Promise((function(s,o){var a;return void 0===e&&(e=r.props),a=e.stores.raceStore,Promise.resolve(a.loadWorkoutSummary(t,e.raceid)).then((function(){try{return a.getWorkoutSummaryActiveTeams(t,n),s()}catch(e){return o(e)}}),o)}))},r.loadRace=function(e){return new Promise((function(t,n){var s,o,a,i,c,l,u,h,d,f,p,m;void 0===e&&(e=r.props);var b=function(){try{return t()}catch(e){return n(e)}},g=function(e){try{return console.log(e),b()}catch(e){return n(e)}};try{return r.setState({isLoading:!0}),o=(s=e.stores).raceStore,a=s.appState,c=(i=e).classid,Promise.resolve(o.load(i.raceid)).then(function(){try{if(l=o.race,u=a.focusOnMushers,d=void 0===(h=a.selectedClassIds)?[]:h,f=c||d[0],c&&a.toggleSelectedClassId(c,!0),p=l.classes.filter((function(e){return e.id===f})).filter((function(e){return e.contestants&&e.contestants.length>0})).map((function(e){return e.contestants.filter((function(e){return e.team>0})).map((function(e){return e.team}))})).flat(),m=l.classes.filter((function(e){return e.id===f})).filter((function(e){return e.contestants&&e.contestants.length>0})).map((function(e){return e.contestants.filter((function(e){return e.bib>0})).map((function(e){return e.bib}))})).flat(),p.length>0)return Promise.resolve(o.loadTeams(p.join(","))).then(function(){try{return e.call(this)}catch(e){return g(e)}}.bind(this),g);function e(){function e(){return o.getAllClassesSortedBy(),r.setState({isLoading:!1}),b()}return l.liveRace>0?Promise.resolve(r.loadLiveRaceResults(r.props,{teamIds:p,focusOnMushers:u,bibs:m,classid:f})).then(function(){try{return e.call(this)}catch(e){return g(e)}}.bind(this),g):Promise.resolve(r.loadRaceResults(r.props,p,u)).then(function(){try{return e.call(this)}catch(e){return g(e)}}.bind(this),g)}return e.call(this)}catch(e){return g(e)}}.bind(this),g)}catch(e){g(e)}}))},r.toggleFocusOnMusher=function(e){var t=r.props.stores,n=t.appState,s=t.raceStore;n.toggleFocusOnMusher(e.target.parentElement.dataset.musherid||e.target.dataset.musherid);var o=n.focusOnMushers;s.race.liveRace>0?s.getRaceTrackerActiveTeams(null,o):s.getWorkoutSummaryActiveTeams(null,o)},r.state=s({},g),r.inputRef={},r.updateTimer={},r}a(r,t);var n=r.prototype;return n.componentWillUnmount=function(){clearTimeout(this.updateTimer.reload),clearTimeout(this.updateTimer.tick)},n.componentDidMount=function(){this.loadRace()},n.componentWillReceiveProps=function(e){this.props.classid!==e.classid&&this.loadRace(e)},n.render=function(){var t=this.props.stores,r=t.userStore,n=t.raceStore,s=this.props,o=s.classid,a=s.position,i=void 0===a?"right":a,c=s.limit,h=void 0===c?10:c,f=r.user,g=(void 0===f?{}:f).language,O=void 0===g?"en":g,v=n.race,j=void 0===v?{}:v,y=n.waypoints,w=new Date(j.endDate);w.setHours(w.getHours()+2);var T=j.classes&&j.classes.find((function(e){return e.id===o}))||{};return Object(l.h)(e,null,Object(l.h)("div",{class:"fixed-top "+p.a.hoverElement,style:"height: 100px;"},Object(l.h)("div",{class:""+p.a.hoverelementonly},Object(l.h)("div",{class:"row"},j.classes&&j.classes.sort((function(e,t){return e.distance-t.distance})).map((function(t){return Object(l.h)(e,null,Object(l.h)("div",{class:"col"},Object(l.h)("a",{class:"btn btn-block "+(t.id===o?"btn-success":"btn-outline-success")+" text-nowrap",style:"text-overflow: ellipsis; overflow: hidden;","data-id":t.id,href:"/tv/top10/"+j.id+"/"+t.id+"/"+i},"Left: ",t.title),Object(l.h)("a",{class:"btn btn-link text-nowrap "+("left"===i?"float-right":"float-left"),style:"text-overflow: ellipsis; overflow: hidden;","data-id":t.id,href:"/tv/top10/"+j.id+"/"+t.id+"/"+("left"===i?"right":"left")},"left"===i?Object(l.h)(e,null,"right ",Object(l.h)("i",{class:"fas fa-angle-right"})):Object(l.h)(e,null,Object(l.h)("i",{class:"fas fa-angle-left"})," left"))))}))))),Object(l.h)("div",{class:"container-fluid pt-5",style:"margin-bottom: "+b+"; margin-top: "+m+"; height: calc(100% - "+b+" - "+m+");"},Object(l.h)("div",{class:"row"},Object(l.h)("div",{class:"left"===i?"col-4 ml-5":"col-4 offset-8 mr-5",style:"font-size: 1.5em; line-height: 1.0em;"},Object(l.h)("table",{class:"table table-sm table-borderless rounded-lg"},Object(l.h)("thead",null,Object(l.h)("tr",null,Object(l.h)("td",{colspan:"3",class:"px-4 py-4 overflow-hidden",style:"background-color: #FB4114; color: #ffffff; border-radius: 10px 0 0 0; font-size: 1.4em;"},Object(l.h)("nobr",null,T.title," / GPS Ranking")),Object(l.h)("td",{class:"px-3 text-center py-4 overflow-hidden",style:"background-color: #FB4114; color: #ffffff; border-radius: 0 10px 0 0 ; font-size: 1.1em;"},"Time"))),Object(l.h)("tbody",{style:' background-color: #1C1F4C; background-image: url("https://themusher.app/assets/tv-single-background.jpg"); background-size: cover !important; background-position: 0 0; '},y&&y.slice(0,h).map((function(t,r){var n=t.bib,s=t.flag,o=t.title;return Object(l.h)(e,null,Object(l.h)("tr",{style:"border-bottom: 1px solid #7B312F;"},Object(l.h)("td",{class:"pl-3 pr-1 py-3 text-center",style:"color: #ffffff; font-size: 1.2em;"},Object(l.h)("div",{class:"text-overflow",style:"max-width: 100px; line-height: 1.1em;"},r+1)),Object(l.h)("td",{class:"text-center align-middle ml-0 pl-0",style:"width: 50px; color: #ffffff; font-size: 1.2em; line-height: 1.2em;"},Object(l.h)("div",{class:"d-flex justify-content-start"},Object(l.h)("div",{class:"pl-3 pr-2 w-100 clearfix rounded-pill-right",style:"background-color: "+d.a.getRankingColor(r+1)},n||r+1))),Object(l.h)("td",{class:"px-3 py-3",style:"color: #ffffff; font-size: 1.2em;"},Object(l.h)("div",{class:"text-overflow",style:"max-width: 348px; line-height: 1.1em;"},Object(l.h)("nobr",null,s," ",o,Object(l.h)("br",null)))),Object(l.h)("td",{class:"text-center align-middle",style:"width: 150px; color: #ffffff; font-size: 1.2em;"},Object(l.h)("nobr",null,t.finishTime<9999999999?Object(l.h)(e,null,t.diffToFirstFinishTime>0?Object(l.h)(e,null,u.a.secToHms(t.diffToFirstFinishTime)):Object(l.h)(e,null,d.a.formatDate(u.a.parseInputDate(t.finishTime),{locale:O,day:"numeric",month:"numeric",hour12:!1,hour:"2-digit",minute:"2-digit"}))):Object(l.h)(e,null,Object(l.h)("span",{class:"text-muted"},Object(l.h)("i",{class:"fas fa-compass"}))," ",d.a.windDirection(t.bearing),Object(l.h)("span",{class:"text-muted font-weight-light ml-3"},Object(l.h)("i",{class:"fas fa-tachometer-alt"}))," ",u.a.format(t.speed||0,1)," km/h",Object(l.h)("br",null),Object(l.h)("span",{class:"text-muted font-weight-light"},Object(l.h)("i",{class:"fas fa-flag-checkered"}))," ",u.a.format(t.distanceToFinish,1)," km",t.distanceToFinish!==t.distanceToFirst&&t.distanceToFirst>0&&Object(l.h)(e,null,Object(l.h)("span",{class:"text-muted font-weight-light ml-3"},"1st:")," ",u.a.format(t.distanceToFirst,1)," km"),t.distanceToFinish!==t.distanceToForward&&t.distanceToForward>0&&Object(l.h)(e,null,Object(l.h)("span",{class:"text-muted font-weight-light ml-3"},Object(l.h)("i",{class:"fas fa-arrow-up"}))," ",u.a.format(t.distanceToForward,1)," km"),t.distanceToBehind>0&&Object(l.h)(e,null,Object(l.h)("span",{class:"text-muted font-weight-light ml-3"},Object(l.h)("i",{class:"fas fa-arrow-down"}))," ",u.a.format(t.distanceToBehind,1)," km"))))))}))),Object(l.h)("tfoot",null,Object(l.h)("tr",null,Object(l.h)("td",{colspan:"4",class:"px-5 py-4 text-center overflow-hidden",style:"background-color: #FB4114; color: #ffffff; border-radius: 0 0 10px 10px; font-size: 1.1em;"},Object(l.h)("nobr",{class:"mr-4"},"QPaws app"),Object(l.h)("img",{src:"https://themusher.app/assets/appstore-download.png",height:"40",class:"ml-5 mr-1"}),Object(l.h)("img",{src:"https://themusher.app/assets/playstore-download.png",height:"40",class:"mx-1"})))))))))},r}(l.Component))||c);t.default=O}.call(this,r("hosL").Fragment)},eT2M:function(e){e.exports={hoverelementonly:"hoverelementonly__3_DrK",hoverElement:"hoverElement__3ED7Q",hoverelementhide:"hoverelementhide__2AP13"}}}]);
//# sourceMappingURL=18.chunk.7a010.js.map