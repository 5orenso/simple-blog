(window.webpackJsonp=window.webpackJsonp||[]).push([[35,6,7,8],{"+I+c":function(e,t,s){"use strict";function a(e,t){if(null==e)return{};var s,a,o={},i=Object.keys(e);for(a=0;a<i.length;a++)t.indexOf(s=i[a])>=0||(o[s]=e[s]);return o}s.d(t,"a",(function(){return a}))},"+JSK":function(e,t,s){"use strict";(function(e){function a(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,a)}return s}function o(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}var i,n=s("hosL"),l=s("Utv1"),r=s("/eY4"),c=s("OhSV"),d=s("ZOvn");const h={};let b=Object(r.a)(i=class extends n.Component{constructor(e){super(e),this.toggleLikes=()=>{const{showLikesList:e}=this.state;this.setState({showLikesList:!e})},this.state=function(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?a(Object(s),!0).forEach((function(t){o(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):a(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}({},h)}render(){const{showLikesList:t}=this.state,{storyStore:s,teamStore:a,workoutStore:o,raceStore:i}=this.props.stores,{likes:r,comments:h,type:b="story",onTeamClick:m=(()=>{}),onUserClick:p=(()=>{})}=this.props;return Object(n.h)(e,null,Object(n.h)("div",{class:"d-flex justify-content-between mb-2"},r&&r.length>0&&Object(n.h)(e,null,Object(n.h)("div",{class:"d-flex flex-row flex-nowrap position-relative mr-3",style:"overflow: auto;"},Object(n.h)("span",{class:"text-muted mr-2",onClick:this.toggleLikes},Object(n.h)("i",{class:"fas fa-thumbs-up text-primary"})," ",r.length),r.slice(0,3).map(t=>{let r,c,h;"story"===b?(r=s.findPublicUser(t.user),c=s.findPublicTeamByMembers(t.user)):"team"===b?(r=a.findPublicUser(t.user),c=a.findPublicTeamByMembers(t.user)):"workout"===b?(r=o.findPublicUser(t.user),c=o.findPublicTeamByMembers(t.user)):"race"===b&&(r=i.findPublicUser(t.user),c=i.findPublicTeamByMembers(t.user)),l.a.isArray(c)&&(h=c.find(e=>1===e.public));const p=d.a.getImage({user:r,team:h,priority:"user"}),g=d.a.displayNameShort(r);return Object(n.h)(e,null,h?Object(n.h)(e,null,Object(n.h)("a",{href:"/teams/public/"+h.uuidv4,title:h.name,onClick:e=>m(e,h.uuidv4)},Object(n.h)("div",{class:"text-center border rounded-circle imageRounded imageRoundedThumb",style:""+(p?`background-image: url("${p}"); background-size: cover;`:"")},!p&&Object(n.h)("div",{class:"",style:"font-size: 12px; padding-top: 3px;"},g)))):Object(n.h)(e,null,Object(n.h)("div",{class:"text-center border rounded-circle imageRounded imageRoundedThumb",style:(p?`background-image: url("${p}"); background-size: cover;`:"")+" opacity: 0.5;"},!p&&Object(n.h)("div",{class:"text-muted",style:"font-size: 12px; padding-top: 3px;"},g))))}),r.length>3&&Object(n.h)(e,null,Object(n.h)("span",{class:"text-muted font-weight-lighter ml-2",onClick:this.toggleLikes},Object(n.h)(c.c,{id:"likes-comments.and",fields:{total:r.length-3}},"and ",r.length-3," others."))))),h&&h.length>0&&Object(n.h)("span",{class:"float-right text-muted"},Object(n.h)("i",{class:"fas fa-comment text-primary"})," ",h.length)),t&&Object(n.h)("div",{class:"mt-3 mb-3"},r&&r.map(t=>{let r,c,h;"story"===b?(r=s.findPublicUser(t.user),c=s.findPublicTeamByMembers(t.user)):"team"===b?(r=a.findPublicUser(t.user),c=a.findPublicTeamByMembers(t.user)):"workout"===b?(r=o.findPublicUser(t.user),c=o.findPublicTeamByMembers(t.user)):"race"===b&&(r=i.findPublicUser(t.user),c=i.findPublicTeamByMembers(t.user)),l.a.isArray(c)&&(h=c.find(e=>1===e.public));const p=d.a.getImage({user:r,team:h,priority:"user"}),g=d.a.displayNameShort(r),u=d.a.displayName(r,!0);return Object(n.h)("div",{class:"d-flex flex-row position-relative font-weight-light mb-1"},h?Object(n.h)(e,null,Object(n.h)("a",{href:"/teams/public/"+h.uuidv4,title:h.name,onClick:e=>m(e,h.uuidv4),class:"stretched-link"},Object(n.h)("div",{class:"text-center border rounded-circle imageRounded imageRoundedThumb",style:""+(p?`background-image: url("${p}"); background-size: cover;`:"")},!p&&Object(n.h)("div",{class:"",style:"font-size: 12px; padding-top: 3px;"},g))),Object(n.h)("div",{class:"ml-2 "},u," ",Object(n.h)("span",{class:"font-weight-lighter"},"- ",h.name))):Object(n.h)(e,null,Object(n.h)("div",{class:"text-center border rounded-circle imageRounded imageRoundedThumb",style:(p?`background-image: url("${p}"); background-size: cover;`:"")+" opacity: 0.5;"},!p&&Object(n.h)("div",{class:"text-muted",style:"font-size: 12px; padding-top: 3px;"},g)),Object(n.h)("div",{class:"ml-2"},u)))})))}})||i;t.a=b}).call(this,s("hosL").Fragment)},"/922":function(e,t,s){"use strict";(function(e){var a,o=s("hosL"),i=s("Utv1"),n=s("/eY4"),l=s("OhSV"),r=s("go65"),c=s("om2D"),d=(s("ETxl"),s("ZOvn"));let h=Object(n.a)(a=class extends o.Component{constructor(e){var t;super(e),t=this,this.beforeImagesUploaded=()=>{this.setState({sendButtonEnabled:!1})},this.afterImagesUploaded=()=>{this.setState({sendButtonEnabled:!0})},this.commentWorkout=async function(){const{sendButtonEnabled:e}=t.state;if(!e)return!1;const{callback:s=(()=>{}),inputRefObject:a={}}=t.props,{workout:o}=t.props,{workoutStore:i}=t.props.stores,{comment:n,showAddImage:l}=t.state;t.setState({sendButtonEnabled:!1});const r=await i.commentWorkout({id:o.id,comment:n});r&&200===r.status&&(t.setState({comment:{body:"",images:[]}},()=>{d.a.resizeTextarea(a[o.id]),l&&t.addImage()}),s({workout:o,response:r})),t.setState({sendButtonEnabled:!0})},this.addImages=({value:e})=>{const{comment:t}=this.state;t.images.push(...e),this.setState({comment:t})},this.addImage=()=>{const{showAddImage:e=!1}=this.state;this.setState({showAddImage:!e})},this.handleImageErrored=e=>{const t=e.target;t.onerror=null,setTimeout(()=>{t.src+="?"+new Date},1e3)},this.state={comment:{body:"",images:[]},showAddImage:!1,sendButtonEnabled:!0},this.inputRef={}}render(){const{inputRef:t,col:s=12,offset:a=0,showAvatar:n=!0,extraClass:h="",workout:b}=this.props,{comment:m,showAddImage:p,sendButtonEnabled:g}=this.state,{userStore:u}=this.props.stores,{user:f={}}=u,O=f.firstname?`${i.a.ucfirst(f.firstname,!0)}${i.a.ucfirst(f.lastname,!0)}`:""+i.a.ucfirst(f.email||"",!0),j=f.image||(f.images?f.images[0]:void 0);return Object(o.h)("div",{class:`col-${s} offset-${a} ${h}`},Object(o.h)("div",{class:"d-flex mb-0 position-relative w-100"},n&&Object(o.h)("div",{class:"text-center border rounded-circle imageRounded imageRoundedSmall",style:(j?`background-image: url('${j.s3SmallLink}'); background-size: cover;`:"")+" border-width: 3px !important;"},!f.image&&Object(o.h)("span",{class:"font-weight-lighter",style:"font-size: 15px;"},O)),Object(o.h)("div",{class:"col pl-3",style:"line-height: 1.2em;"},Object(o.h)("div",{class:"d-flex bd-highlight"},Object(o.h)("div",{class:"p-0 w-100 bd-highlight"},Object(o.h)("label",{class:"sr-only",for:"inlineFormInput"},Object(o.h)(l.c,{id:"comments.comment"},"Kommentar")),Object(o.h)("div",{class:"border rounded rounded-lg position-relative"},Object(o.h)(l.b,null,Object(o.h)("textarea",{class:"form-control-plaintext px-2",type:"text",placeholder:Object(o.h)(l.c,{id:"comments.write-comment"},"Skriv en kommentar..."),onInput:Object(r.a)(this,"comment.body"),onKeyUp:d.a.resizeTextarea,onFocus:d.a.resizeTextarea,style:"height: 2.3em;",value:m.body,ref:t})),Object(o.h)("div",{class:"position-absolute",style:"top: 8px; right: 10px; font-size: 1.2em;"},Object(o.h)("i",{class:"fas fa-image pointerCursor","data-id":b.id,onClick:this.addImage})))),Object(o.h)("div",{class:"p-0 pl-2 flex-shrink-1 bd-highlight"},Object(o.h)("button",{type:"button",class:`btn btn-${g?"primary":"secondary"} mb-2`,disabled:!g,onClick:this.commentWorkout},Object(o.h)("i",{class:"fas fa-paper-plane"})))))),p&&Object(o.h)(e,null,Object(o.h)("div",{class:"col-12 text-center"},Object(o.h)("div",{class:"container-fluid"},Object(o.h)("div",{class:"row"},m.images&&m.images.map(e=>Object(o.h)("div",{class:"col-3 p-1"},Object(o.h)("img",{src:e.s3SmallLink,class:"img-fluid",onError:this.handleImageErrored}),Object(o.h)("button",{class:"btn btn-sm btn-link",onClick:this.removeImage,"data-name":e.name},Object(o.h)("i",{class:"fas fa-trash"}),"  ",Object(o.h)(l.c,{id:"comments.remove-image"},"Remove")))))),Object(o.h)(c.a,{object:m,updateField:this.addImages,before:this.beforeImagesUploaded,after:this.afterImagesUploaded,autoOpen:!0}))))}})||a;t.a=h}).call(this,s("hosL").Fragment)},"1OK2":function(e,t,s){"use strict";var a,o=s("hosL"),i=(s("Utv1"),s("/eY4"));Object(i.a)(a=class extends o.Component{constructor(e){super(e),this.touchStart=e=>{e.stopPropagation(),this.setState({startX:e.touches[0].pageX})},this.touchEnd=e=>{e.stopPropagation(),this.setState({startX:void 0,sliding:!1})},this.touchMove=e=>{e.stopPropagation();const{totalImages:t}=this.state;if(t>1){const{startX:t,sliding:s}=this.state,a=50,o=e.touches[0].pageX;s||(o>t+a?(this.setState({sliding:!0}),this.prevImage()):o<t-a&&(this.setState({sliding:!0}),this.nextImage()))}};const{images:t=[]}=e;this.state={imageContainer:1,currentImage1:t[0]||{},currentImage2:{},currentIdx:0,totalImages:t.length||0,imageDots:[...Array(t.length||0).fill(1).map((e,t)=>e+t)]}}nextImage(){const{images:e}=this.props,{totalImages:t,currentIdx:s,imageContainer:a}=this.state,o=1===a?2:1;let i=s+1;i>t-1&&(i=0),this.setState({["currentImage"+o]:e[i],currentIdx:i,imageContainer:o})}prevImage(){const{images:e}=this.props,{totalImages:t,currentIdx:s,imageContainer:a}=this.state;let o=s-1;o<0&&(o=t-1),this.setState({["currentImage"+(1===a?2:1)]:e[o],currentIdx:o,imageContainer:1===a?2:1})}componentWillReceiveProps(e){if(e.images!==this.props.images){const{images:t=[]}=e;this.setState({imageContainer:1,currentImage1:t.length>0?t[0]:{},currentImage2:{},currentIdx:0,totalImages:t.length||0,imageDots:[...Array(t.length||0).fill(1).map((e,t)=>e+t)]})}}render(){const{currentImage1:e,currentImage2:t,imageContainer:s,totalImages:a,imageDots:i,currentIdx:n}=this.state,l=this["image"+s],r=1===s?e:t,c=l&&l.height?l.width/l.height:4/3;let d,h;if(r.dimensions){const{width:e,height:t,orientation:s}=r.dimensions;s>4&&s<9?(d=e,h=t):(d=t,h=e)}const b=r.dimensions?h/d:c;return a<=0?"":Object(o.h)("div",{class:"w-100"},Object(o.h)("div",{class:"border rounded position-relative w-100",style:`height: calc(85vw / ${b}); overflow: hidden; transition: all .3s ease-in-out;`,onTouchstart:this.touchStart,onTouchend:this.touchEnd,onTouchmove:this.touchMove},a>1&&Object(o.h)("span",{class:"position-absolute",style:"top:0px; right: 5px; z-index: 2000;"},Object(o.h)("small",null,n+1,"/",a)),e&&Object(o.h)("div",{class:"position-absolute",style:(1===s?"opacity: 1;":"opacity: 0;")+" transition: all .3s ease-in-out; top: 0; left: 0;"},Object(o.h)("img",{loading:"lazy",src:e.s3LargeLink,class:"img-fluid align-middle",ref:e=>this.image1=e})),t&&Object(o.h)("div",{class:"position-absolute",style:(2===s?"opacity: 1;":"opacity: 0;")+" transition: all .3s ease-in-out; top: 0; left: 0;"},Object(o.h)("img",{loading:"lazy",src:t.s3LargeLink,class:"img-fluid align-middle",ref:e=>this.image2=e}))),i.length>1&&Object(o.h)("div",{class:"w-100 text-center"},i.map(e=>Object(o.h)("span",{style:`color: ${e===n+1?"#ffffff":"#808080"};`},"•"))))}})},"2X7c":function(e,t,s){"use strict";function a(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,a)}return s}function o(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?a(Object(s),!0).forEach((function(t){i(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):a(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function i(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}var n,l=s("hosL"),r=s("Utv1"),c=s("/eY4"),d=(s("cneo"),s("go65")),h=s("OhSV"),b=s("ZOvn"),m=s("X9Km"),p=s("om2D"),g=s("3on9");const u=b.a.getVaccineTypes(),f={showLog:!1,okToAddLog:!0};let O=Object(c.a)(n=class extends l.Component{constructor(e){var t;super(e),t=this,this.toggleLog=()=>{const{showLog:e}=this.state;this.setState({showLog:!e})},this.resetLog=()=>{this.setState({newHistory:{date:r.a.isoDate(new Date,!1,!1,!0),time:r.a.isoTime(new Date),dogs:[]},showLog:!1})},this.addImages=e=>{if(Array.isArray(e.value)){const{newHistory:t}=this.state;t.images=Array.isArray(t.images)?[...t.images,...e.value]:e.value,this.setState({newHistory:t})}},this.handleImageErrored=e=>{const t=e.target;t.onerror=null,setTimeout(()=>{t.src+="?"+new Date},1e3)},this.imageUploadStatus=e=>{this.setState({okToAddLog:e})},this.insertLog=async function(){const{newHistory:e}=t.state,{dogStore:s,userStore:a}=t.props.stores,{callback:i}=t.props,{dog:n}=s,{user:l}=a;return e.title||e.comment?e.id||0!==e.dogs.length?(e.date=`${e.date} ${e.time}`,await s.save({id:n.id||e.dogs[0],history:o({user:{id:l.id,email:l.email,firstname:l.firstname,lastname:l.lastname}},e)}),t.resetLog(),await t.loadDog(),await t.loadFeed(),void(r.a.isDefined(i)&&i())):(m.a.publish(m.b.STATUS_MESSAGE,{message:"Mangler hunder til logginnlegg",type:"warning",icon:"fas fa-exclamation-triangle"}),!1):(m.a.publish(m.b.STATUS_MESSAGE,{message:"Mangler tittel på logginnlegg",type:"warning",icon:"fas fa-exclamation-triangle"}),!1)},this.updateField=({field:e,value:t})=>{const{newHistory:s}=this.state;s[e]=t,this.setState({newHistory:s})},this.setHistoryType=e=>{const{userStore:t}=this.props.stores,{user:s}=t,{language:a="en"}=s,o=b.a.getHistoryMap(a),{newHistory:i}=this.state,n=e.target.value;i.historyType=n,i.title||(i.title=o[n]),"maturity"===i.historyType&&(i.endDate=r.a.isoDate(r.a.addDays(i.date,21),!1,!1,!0)),"mating"!==i.historyType&&"unwantedMating"!==i.historyType||(i.endDate=r.a.isoDate(r.a.addDays(i.date,63),!1,!1,!0)),this.setState({newHistory:i})},this.setVaccineType=e=>{const{newHistory:t}=this.state,s=e.target.value;t.vaccineType=s,t.title+=" - "+u[s].name,t.endDate=r.a.isoDate(r.a.addDays(t.date,u[s].duration),!1,!1,!0),this.setState({newHistory:t})},this.state=o({newHistory:{date:r.a.isoDate(new Date,!1,!1,!0),time:r.a.isoTime(new Date),dogs:[]}},f)}async loadDog(e=this.props){const{dog:t}=e;if(t&&t.id){const{newHistory:e}=this.state;e.dogs=[t.id],this.setState({newHistory:e})}}async loadFeed(){const{userStore:e}=this.props.stores;await e.getFeed({})}componentWillMount(){this.resetLog(),this.loadDog()}componentWillReceiveProps(e){e.dog.id!==this.props.dog.id&&(this.resetLog(),this.loadDog(e))}render(){const{newHistory:e,showLog:t,okToAddLog:s}=this.state,{dog:a,className:o="btn-sm btn-secondary float-left"}=this.props,{workoutStore:i,userStore:n}=this.props.stores,{currentTeam:r}=i,c=n.findTeam(r,!0);return t?Object(l.h)("div",{class:"col-12 px-0 border rounded "},Object(l.h)("button",{class:"'btn "+o,onClick:this.toggleLog},Object(l.h)("i",{class:"fas fa-plus"})," ",t?Object(l.h)(h.c,{id:"dog.addlog.hidelog"},"Skjul logg"):Object(l.h)(h.c,{id:"dog.addlog.newlog"},"Ny logg")),Object(l.h)("br",null),t&&Object(l.h)("div",{class:"mb-2 py-4 px-2"},Object(l.h)("h5",null,Object(l.h)(h.c,{id:"dog.addlog.addlog"},"Legg til logg")),Object(l.h)(h.b,null,Object(l.h)(g.a,{stores:this.props.stores,object:e,type:"array",elementtype:"number",field:"dogs",icon:"fas fa-dog",title:Object(l.h)(h.c,{id:"dog.addlog.dogs"},"Hunder"),help:Object(l.h)(h.c,{id:"dog.addlog.dogs-help"},"Hvilke hunder gjelder dette?"),updateField:this.updateField,filter:t=>a.id===t.id||e.dogs.indexOf(t.id)>-1,currentTeam:c})),Object(l.h)("div",{class:"row"},Object(l.h)("div",{class:"form-group col"},Object(l.h)("label",{for:"dateInput"},Object(l.h)("i",{class:"fas fa-calendar-alt"})," ",Object(l.h)(h.c,{id:"dog.addlog.date"},"Dato")),Object(l.h)("input",{type:"date",class:"form-control",id:"dateInput","aria-describedby":"dateHelp",onInput:Object(d.a)(this,"newHistory.date"),value:e.date,autocomplete:"off"}),Object(l.h)("small",{id:"dateHelp",class:"form-text text-muted"},Object(l.h)(h.c,{id:"dog.addlog.date-help"},"Dato for logglinje."))),Object(l.h)("div",{class:"form-group col"},Object(l.h)("label",{for:"timeInput"},Object(l.h)("i",{class:"fas fa-clock"})," ",Object(l.h)(h.c,{id:"dog.addlog.time"},"Klokka")),Object(l.h)("input",{type:"time",class:"form-control",id:"timeInput","aria-describedby":"timeHelp",onInput:Object(d.a)(this,"newHistory.time"),value:e.time,autocomplete:"off"}),Object(l.h)("small",{id:"timeHelp",class:"form-text text-muted"},Object(l.h)(h.c,{id:"dog.addlog.time-help"},"Tid for logglinje.")))),Object(l.h)("div",{class:"form-group"},Object(l.h)("label",{for:"typeInput"},Object(l.h)("i",{class:"fas fa-folder-open"})," ",Object(l.h)(h.c,{id:"dog.addlog.type"},"Type hendelse")),Object(l.h)("select",{class:"form-control",id:"typeInput","aria-describedby":"typeHelp",onInput:this.setHistoryType,value:e.historyType,autocomplete:"off"},Object(l.h)("option",{value:""},"-- ",Object(l.h)(h.c,{id:"dog.addlog.choose-type"},"Velg type")," --"),Object(l.h)("option",{value:"other"},Object(l.h)(h.c,{id:"dog.addlog.other"},"Annet")),Object(l.h)("option",{value:"stoolProblem"},Object(l.h)(h.c,{id:"dog.addlog.stoolProblem"},"Avføringsproblem")),Object(l.h)("option",{value:"bodyScore"},Object(l.h)(h.c,{id:"dog.addlog.bodyScore"},"Bodyscore")),Object(l.h)("option",{value:"diarrhea"},Object(l.h)(h.c,{id:"dog.addlog.diarrhea"},"Diarè")),Object(l.h)("option",{value:"foodLeftover"},Object(l.h)(h.c,{id:"dog.addlog.foodLeftover"},"Ikke spist opp maten")),Object(l.h)("option",{value:"animalchiropractor"},Object(l.h)(h.c,{id:"dog.addlog.animalchiropractor"},"Dyrekiropraktor")),Object(l.h)("option",{value:"clawClip"},Object(l.h)(h.c,{id:"dog.addlog.clawClip"},"Kloklipp")),Object(l.h)("option",{value:"maturity"},Object(l.h)(h.c,{id:"dog.addlog.maturity"},"Løpetid")),Object(l.h)("option",{value:"massage"},Object(l.h)(h.c,{id:"dog.addlog.massage"},"Massasje")),Object(l.h)("option",{value:"newStraw"},Object(l.h)(h.c,{id:"dog.addlog.newStraw"},"Ny halm/treull")),Object(l.h)("option",{value:"update"},Object(l.h)(h.c,{id:"dog.addlog.update"},"Oppdatering")),Object(l.h)("option",{value:"deworming"},Object(l.h)(h.c,{id:"dog.addlog.deworming"},"Ormekur")),Object(l.h)("option",{value:"mating"},Object(l.h)(h.c,{id:"dog.addlog.mating"},"Parring")),Object(l.h)("option",{value:"injury"},Object(l.h)(h.c,{id:"dog.addlog.injury"},"Skade")),Object(l.h)("option",{value:"fight"},Object(l.h)(h.c,{id:"dog.addlog.fight"},"Slåsskamp")),Object(l.h)("option",{value:"sick"},Object(l.h)(h.c,{id:"dog.addlog.sick"},"Syk")),Object(l.h)("option",{value:"unwantedMating"},Object(l.h)(h.c,{id:"dog.addlog.unwantedMating"},"Tjuvparring")),Object(l.h)("option",{value:"vaccine"},Object(l.h)(h.c,{id:"dog.addlog.vaccine"},"Vaksine")),Object(l.h)("option",{value:"weight"},Object(l.h)(h.c,{id:"dog.addlog.weight"},"Veiing")),Object(l.h)("option",{value:"veterinarianVisit"},Object(l.h)(h.c,{id:"dog.addlog.veterinarianVisit"},"Vetrinær besøk")," ")),Object(l.h)("small",{id:"nameHelp",class:"form-text text-muted"},Object(l.h)(h.c,{id:"dog.addlog.type-help"},"Type hendelse. Vetrinær besøk, vaksinering, syk, løpetid, etc."))),["vaccine"].indexOf(e.historyType)>-1&&Object(l.h)("div",{class:"form-group"},Object(l.h)("label",{for:"vaccineTypeInput"},Object(l.h)("i",{class:"fas fa-hourglass-end"})," ",Object(l.h)(h.c,{id:"dog.addlog.vaccine-type"},"Vaksinetype")),Object(l.h)("select",{class:"form-control",id:"vaccineTypeInput","aria-describedby":"vaccineTypeHelp",onInput:this.setVaccineType,value:e.vaccineType,autocomplete:"off"},Object(l.h)("option",{value:""},"-- ",Object(l.h)(h.c,{id:"dog.addlog.choose-vaccine"},"Velg vaksinetype")," --"),Object(l.h)("option",{value:"rabies"},Object(l.h)(h.c,{id:"dog.addlog.rabies"},"Rabies (3 år)")),Object(l.h)("option",{value:"deworming"},Object(l.h)(h.c,{id:"dog.addlog.deworming"},"Ormekur")),Object(l.h)("option",{value:"BbPi"},Object(l.h)(h.c,{id:"dog.addlog.BbPi"},"BbPi - Nesevaksine (1 år)")),Object(l.h)("option",{value:"DHP"},Object(l.h)(h.c,{id:"dog.addlog.DHP"},"DHP (3 år)")),Object(l.h)("option",{value:"DHPPi"},Object(l.h)(h.c,{id:"dog.addlog.DHPPi"},"DHPPi (3 år)"))),Object(l.h)("small",{id:"vaccineTypeHelp",class:"form-text text-muted"},Object(l.h)(h.c,{id:"dog.addlog.vaccine-help"},"Hvilken vaksinetype er dette?"))),Object(l.h)("div",{class:"form-group"},Object(l.h)("label",{for:"nameInput"},Object(l.h)(h.c,{id:"dog.addlog.title"},"Tittel")),Object(l.h)("input",{type:"text",class:"form-control",id:"nameInput","aria-describedby":"nameHelp",onInput:Object(d.a)(this,"newHistory.title"),value:e.title,autocomplete:"off",required:!0}),Object(l.h)("small",{id:"nameHelp",class:"form-text text-muted"},Object(l.h)(h.c,{id:"dog.addlog.title-help"},"Tittel på logglinje. Vetrinær besøk, Vaksinering, Syk, Profilbilde, etc."))),["vaccine","maturity","unwantedMating","mating"].indexOf(e.historyType)>-1&&Object(l.h)("div",{class:"form-group"},Object(l.h)("label",{for:"endDateInput"},Object(l.h)("i",{class:"fas fa-hourglass-end"})," ",Object(l.h)(h.c,{id:"dog.addlog.duration"},"Varighet")),Object(l.h)("input",{type:"date",class:"form-control",id:"endDateInput","aria-describedby":"endDateHelp",onInput:Object(d.a)(this,"newHistory.endDate"),value:e.endDate,autocomplete:"off"}),Object(l.h)("small",{id:"endDateHelp",class:"form-text text-muted"},Object(l.h)(h.c,{id:"dog.addlog.duration-help"},"Når går denne vaksinen ut?"))),("weight"===e.historyType||"bodyScore"===e.historyType)&&Object(l.h)("div",{class:"form-group"},Object(l.h)("label",{for:"weightInput"},Object(l.h)("i",{class:"fas fa-balance-scale"})," ",Object(l.h)(h.c,{id:"dog.addlog.weight-of-dog"},"Vekt")),Object(l.h)("input",{type:"text",class:"form-control",id:"weightInput","aria-describedby":"weightHelp",onInput:Object(d.a)(this,"newHistory.weight"),value:e.weight,autocomplete:"off"}),Object(l.h)("small",{id:"weightHelp",class:"form-text text-muted"},Object(l.h)(h.c,{id:"dog.addlog.weight-of-dog-help"},"Vekten til hunden."))),("weight"===e.historyType||"bodyScore"===e.historyType)&&Object(l.h)("div",{class:"form-group"},Object(l.h)("label",{for:"bodyScoreInput"},Object(l.h)("i",{class:"fas fa-balance-scale"})," ",Object(l.h)(h.c,{id:"dog.addlog.bodyscore"},"Bodyscore")),Object(l.h)("input",{type:"text",class:"form-control",id:"bodyScoreInput","aria-describedby":"bodyScoreHelp",onInput:Object(d.a)(this,"newHistory.bodyScore"),value:e.bodyScore,autocomplete:"off"}),Object(l.h)("small",{id:"bodyScoreHelp",class:"form-text text-muted"},Object(l.h)(h.c,{id:"dog.addlog.bodyscore-help"},"Bodyscore til hunden."))),("veterinarianVisit"===e.historyType||"vaccine"===e.historyType)&&Object(l.h)("div",{class:"form-group"},Object(l.h)("label",{for:"costInput"},Object(l.h)("i",{class:"fas fa-money-bill-alt"})," ",Object(l.h)(h.c,{id:"dog.addlog.cost"},"Kostnad")),Object(l.h)("input",{type:"text",class:"form-control",id:"costInput","aria-describedby":"costHelp",onInput:Object(d.a)(this,"newHistory.cost"),value:e.cost,autocomplete:"off",pattern:"[0-9]{3}",title:"Kun tall. Ikke noen andre tegn eller symboler."}),Object(l.h)("small",{id:"costHelp",class:"form-text text-muted"},Object(l.h)(h.c,{id:"dog.addlog.cost-help"},"Kostnad for denne hendelsen."))),Object(l.h)("div",{class:"form-group"},Object(l.h)("label",{for:"commentInput"},Object(l.h)("i",{class:"fas fa-quote-right"})," ",Object(l.h)(h.c,{id:"dog.addlog.commet"},"Kommentar")),Object(l.h)("input",{type:"text",class:"form-control",id:"commentInput","aria-describedby":"commentHelp",onInput:Object(d.a)(this,"newHistory.comment"),value:e.comment,autocomplete:"off"}),Object(l.h)("small",{id:"commentHelp",class:"form-text text-muted"},Object(l.h)(h.c,{id:"dog.addlog.comment-help"},"Kommentar til loggen. Skriv mer om hva som hendte."))),Object(l.h)("div",{class:"container-fluid"},Object(l.h)("div",{class:"row"},Object(l.h)("div",{class:"row-12"},Object(l.h)("label",{for:"imageInput"},Object(l.h)("i",{class:"fas fa-camera"})," ",Object(l.h)(h.c,{id:"dog.addlog.images"},"Bilder")))),Object(l.h)("div",{class:"row"},e.images&&e.images.map(e=>Object(l.h)("div",{class:"col-3 p-1"},Object(l.h)("img",{src:e.s3SmallLink,class:"img-fluid",onError:this.handleImageErrored}))))),Object(l.h)(p.a,{object:e,field:"images",updateField:this.addImages,uploadStatus:this.imageUploadStatus,autoOpen:!1}),Object(l.h)("button",{type:"button",class:"btn btn-success",onClick:this.insertLog,disabled:!s},s?Object(l.h)(h.c,{id:"dog.addlog.addlog"},"Legg til logg"):Object(l.h)(h.c,{id:"dog.addlog.please-wait"},"vent litt...")),Object(l.h)("button",{type:"button",class:"btn btn-danger float-right",onClick:this.resetLog},Object(l.h)(h.c,{id:"dog.addlog.cancel"},"Glem det")))):Object(l.h)("button",{class:"'btn "+o,onClick:this.toggleLog},Object(l.h)("i",{class:"fas fa-plus"})," ",t?Object(l.h)(h.c,{id:"dog.addlog.hidelog"},"Skjul logg"):Object(l.h)(h.c,{id:"dog.addlog.newlog"},"Ny logg"))}})||n;t.a=O},"3on9":function(e,t,s){"use strict";(function(e){function a(){return(a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e}).apply(this,arguments)}function o(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,a)}return s}function i(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?o(Object(s),!0).forEach((function(t){n(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):o(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function n(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}var l,r=s("hosL"),c=s("Utv1"),d=s("/eY4"),h=s("cneo"),b=s("go65"),m=(s("Y3FI"),s("OhSV")),p=s("dVCl");const g={id:0,name:"empty"},u=()=>{const e=i({},g);return e.unique=`${(new Date).getTime()}-${c.a.randomPassword()}`,e};class f extends r.Component{render(){const{provided:e,snapshot:t,innerRef:s,children:o,className:i}=this.props;return Object(r.h)("div",a({class:"h-100 border "+i},e.droppableProps,{ref:s,style:(n=t.isDraggingOver,{borderStyle:n?"dashed":"",width:110})}),o);var n}}class O extends r.Component{constructor(...e){super(...e),this.removeThisPlaceholder=()=>{const{removePlaceholder:e=(()=>{}),idx:t,list:s}=this.props;e({idx:t,list:s})}}render(){const{provided:t,snapshot:s,innerRef:o,dog:n}=this.props;return Object(r.h)("div",a({},t.draggableProps,t.dragHandleProps,{ref:o,class:"mx-2 my-2 p-2",style:(l=s.isDragging,d=t.draggableProps.style,i({userSelect:"none",background:l?"#808080":"",maxWidth:92,height:100},d))}),0===n.id?Object(r.h)(e,null,Object(r.h)("div",null,Object(r.h)("div",{class:"text-center border rounded-circle imageRounded text-muted pt-2"},Object(r.h)("span",{class:"font-weight-lighter",style:"font-size: 35px;"}," ")),Object(r.h)("div",{class:"text-center"},Object(r.h)("button",{class:"btn btn-sm btn-link float-right p-0",onClick:this.removeThisPlaceholder},Object(r.h)("i",{class:"fas fa-trash-alt"}))," "))):Object(r.h)(e,null,Object(r.h)("div",null,Object(r.h)("div",{class:"text-center border rounded-circle imageRounded text-muted pt-2",style:""+(n.image?`background-image: url("${n.image.s3ThumbLink}");`:"")},!n.image&&Object(r.h)("span",{class:"font-weight-lighter",style:"font-size: 35px;"},c.a.ucfirst(n.name,!0))),Object(r.h)("div",{class:"text-center"},Object(r.h)("small",null,n.shortname||n.name,Object(r.h)("br",null))))));var l,d}}const j={filterby:c.a.get("dogs-filter")};let y=Object(d.a)(l=class extends r.Component{constructor(e){var t;super(e),t=this,this.toggleDog=async function(e){const{id:s}=e.target.closest("#dogContainer").dataset,a=parseInt(s,10),{object:o,type:i,elementtype:n,field:l,updateField:r,isNew:c,showPositions:d}=t.props,b=Object(h.i)(o[l])||[],m=b.indexOf(a);let p;m>-1?(b.splice(m,1),p="remove"):(b.push(a),p="add"),await r({id:o.id,field:l,value:b,type:i,elementtype:n,isNew:c,skipTimer:!0,singleValue:a}),t.setState({filterText:""}),d&&t.dndDogs({dogId:a,action:p})},this.findAllDogsInTeams=()=>{const{dogStore:e}=this.props.stores,{dogs:t=[]}=e,{object:s,currentTeam:a={}}=this.props,o=Object(h.i)(s.teams||[]),i=a.id;return t.filter(e=>!!(e.team===i||e.teams&&e.teams.indexOf(i)>-1)||(o.indexOf(e.team)>-1||!!e.teams&&e.teams.some(e=>o.indexOf(e)>=0))).map(e=>e.id)},this.addAllDogsInTeam=async function(){const{object:e,type:s,elementtype:a,field:o,updateField:i,isNew:n}=t.props,l=t.findAllDogsInTeams();await i({id:e.id,field:o,value:l,type:s,elementtype:a,isNew:n,skipTimer:!0})},this.dndDogs=({dogId:e,action:t})=>{const{dogStore:s}=this.props.stores,{dogs:a=[]}=s,{object:o}=this.props,i=o.dogs?e=>o.dogs.indexOf(e.id)>-1:()=>!1,n=Object(h.i)(a),l=e=>0===e||n.find(t=>t.id===e)&&-1===o.dogsRight.indexOf(e),r=e=>0===e||n.find(t=>t.id===e)&&-1===o.dogsLeft.indexOf(e),c=n.filter(i),d=Math.ceil(c.length/2),b=c.splice(0,d);let m=[];o.dogsLeft&&o.dogsLeft.length>0&&(m=o.dogsLeft.filter(l).map(e=>n.find(t=>t.id===e)||u()));let p=[];if(o.dogsRight&&o.dogsRight.length>0&&(p=o.dogsRight.filter(r).map(e=>n.find(t=>t.id===e)||u())),"add"===t){const t=a.find(t=>t.id===e);t&&(m.length>p.length?p.push(t):m.push(t))}if("remove"===t){const t=m.findIndex(t=>t.id===e);t>-1&&m.splice(t,1);const s=p.findIndex(t=>t.id===e);s>-1&&p.splice(s,1)}0===m.length&&0===p.length&&(m=b,p=c),t?this.setState({dogsLeft:m,dogsRight:p,dogPositionUpdated:!0},()=>this.updateDogPositions()):this.setState({dogsLeft:m,dogsRight:p})},this.addPlaceholderLeft=()=>{const{dogsLeft:e=[]}=this.state;e.push(u()),this.setState({dogsLeft:e,dogPositionUpdated:!0})},this.addPlaceholderRight=()=>{const{dogsRight:e=[]}=this.state;e.push(u()),this.setState({dogsRight:e,dogPositionUpdated:!0})},this.removePlaceholder=({idx:e,list:t})=>{if("dogsLeft"===t){const{dogsLeft:t=[]}=this.state;t.splice(e,1),this.setState({dogsLeft:t,dogPositionUpdated:!0})}if("dogsRight"===t){const{dogsRight:t=[]}=this.state;t.splice(e,1),this.setState({dogsRight:t,dogPositionUpdated:!0})}},this.clearAllDogs=async function(){const{object:e,type:s,elementtype:a,field:o,updateField:i,isNew:n}=t.props;await i({id:e.id,field:o,value:[],type:s,elementtype:a,isNew:n,skipTimer:!0}),t.resetDogPositions()},this.toggleSearchField=()=>{const{showSearchField:e}=this.state;this.setState({showSearchField:e?null:1})},this.getList=e=>this.state[e],this.onDragEnd=e=>{const{source:t,destination:s}=e;if(s)if(t.droppableId===s.droppableId){const e=((e,t,s)=>{const a=Array.from(e),[o]=a.splice(t,1);return a.splice(s,0,o),a})(this.getList(t.droppableId),t.index,s.index);this.setState({[t.droppableId]:e,dogPositionUpdated:!0})}else{const e=((e,t,s,a)=>{const o=Array.from(e),i=Array.from(t),[n]=o.splice(s.index,1);i.splice(a.index,0,n);const l={};return l[s.droppableId]=o,l[a.droppableId]=i,l})(this.getList(t.droppableId),this.getList(s.droppableId),t,s);this.setState({dogsLeft:e.dogsLeft,dogsRight:e.dogsRight,dogPositionUpdated:!0})}},this.updateDogPositions=async function(){const{dogsLeft:e=[],dogsRight:s=[]}=t.state,{object:a,updateField:o,isNew:i}=t.props;await o({id:a.id,field:"dogsLeft",value:e.map(e=>e.id),isNew:i,datatype:"array"}),await o({id:a.id,field:"dogsRight",value:s.map(e=>e.id),isNew:i,datatype:"array"}),t.setState({dogPositionUpdated:!1})},this.resetDogPositions=async function(){const{dogStore:e}=t.props.stores,{dogs:s=[]}=e,{object:a,updateField:o,isNew:i}=t.props,n=Object(h.i)(s).filter(e=>a.dogs.indexOf(e.id)>-1),l=Math.ceil(n.length/2),r=n.splice(0,l);await o({id:a.id,field:"dogsLeft",value:r.map(e=>e.id),isNew:i,datatype:"array"}),await o({id:a.id,field:"dogsRight",value:n.map(e=>e.id),isNew:i,datatype:"array"}),t.setState({dogsLeft:r,dogsRight:n,dogPositionUpdated:!1})},this.clearDogPositions=async function(){const{object:e,updateField:s,isNew:a}=t.props,o=[],i=[];await s({id:e.id,field:"dogsLeft",value:i,isNew:a,datatype:"array"}),await s({id:e.id,field:"dogsRight",value:o,isNew:a,datatype:"array"}),t.setState({dogsLeft:i,dogsRight:o,dogPositionUpdated:!1})},this.changeFilter=e=>{const t=e.target.value;this.setState({filterby:t}),c.a.set("dogs-filter",t),this.loadDog()},this.getFilteredDogs=(e=this.props)=>{const{filterby:t,filterText:s}=this.state,{object:a,filter:o=(()=>!0)}=e,{dogStore:i}=this.props.stores,{dogs:n=[]}=i;let l=o;if(a.dogs)switch(t){case"all":l=s?e=>e.name.match(new RegExp(s,"i"))||a.dogs.indexOf(e.id)>-1:()=>!0;break;case"onlySelected":l=s?e=>e.name.match(new RegExp(s,"i"))||a.dogs.indexOf(e.id)>-1:e=>a.dogs.indexOf(e.id)>-1;break;case"onlyTeam":l=s?e=>e.name.match(new RegExp(s,"i"))||a.dogs.indexOf(e.id)>-1:e=>a.team===e.team||a.dogs.indexOf(e.id)>-1;break;case"leadOnly":l=e=>a.dogs.indexOf(e.id)>-1||c.a.getNestedValue(e,"positions.lead.distanceKm")>0;break;case"pointOnly":l=e=>a.dogs.indexOf(e.id)>-1||c.a.getNestedValue(e,"positions.point.distanceKm")>0;break;case"teamOnly":l=e=>a.dogs.indexOf(e.id)>-1||c.a.getNestedValue(e,"positions.team.distanceKm")>0;break;case"wheelOnly":l=e=>a.dogs.indexOf(e.id)>-1||c.a.getNestedValue(e,"positions.wheel.distanceKm")>0}let r=n.filter(l);this.setState({filteredDogs:r})},this.state=i({dogsLeft:[],dogsRight:[]},j)}async loadDog(e=this.props){const{showPositions:t}=this.props,{dogStore:s}=e.stores;await s.load({query:{deceased:0},addData:["team","user","workoutSummary","vaccineStatuses","historyStatuses","vaccineLogStatuses","allDogs"]}),t&&this.dndDogs({}),this.getFilteredDogs()}componentWillReceiveProps(e){e.filter!==this.props.filter&&this.getFilteredDogs(e)}componentDidMount(){this.loadDog()}render(){const{filterby:t,filterText:s,showSearchField:a,dogsLeft:o=[],dogsRight:i=[],dogPositionUpdated:n,filteredDogs:l=[]}=this.state,{userStore:d,dogStore:g}=this.props.stores,{dogs:u=[]}=g,{user:j}=d,{language:y="en"}=j,{saved:v={},object:w,field:x,title:k,icon:S,help:D,showPositions:T=!1,currentTeam:I={}}=this.props,P=Object(h.i)(w[x])||[],L=this.findAllDogsInTeams(),C=w.teams?w.teams.map(e=>d.findTeam(e)):[];return Object(r.h)("div",{class:"form-group  mb-5 pb-1 border-bottom "+(v[`${x}.${w.id}`]?"is-valid":"")},Object(r.h)("span",{class:"float-right",onClick:this.toggleSearchField},Object(r.h)("i",{class:"fas fa-search"})),Object(r.h)("button",{class:"btn btn-sm btn-link float-right mr-5",onClick:this.clearAllDogs},Object(r.h)("i",{class:"fas fa-eraser"})," ",Object(r.h)(m.c,{id:"dog.dogs.remove-all-dogs"},"Fjern alle hundene")),Object(r.h)("label",{for:x+"Input"},S&&Object(r.h)("i",{class:S+" text-muted"})," ",k),Object(r.h)("div",{class:"container-fluid px-0"},a&&Object(r.h)("div",{class:"row"},Object(r.h)("div",{class:"col-12"},Object(r.h)(m.b,null,Object(r.h)("input",{class:"form-control form-control-sm",type:"text",placeholder:Object(r.h)(m.c,{id:"dog.dogs.search-for-dogs"},"Søk etter hund"),value:s,onInput:Object(b.a)(this,"filterText")})))),Object(r.h)("div",{class:"row"},Object(r.h)("div",{class:"col-12"},Object(r.h)("div",{class:"form-row align-items-center"},Object(r.h)("div",{class:"col-auto my-2 mx-auto"},Object(r.h)("select",{class:"custom-select",style:"background-color: inherit; border: none; padding-top: 0; padding-bottom: 0; height: 1.4em; font-size: 0.8em;",onInput:this.changeFilter},Object(r.h)("option",{value:"",selected:!t},"-- ",Object(r.h)(m.c,{id:"dog.dogs.choose-filter"},"Choose filter")," ---"),Object(r.h)("option",{value:"all",selected:"all"===t},Object(r.h)(m.c,{id:"dog.dogs.show-all"},"Vis alle")),Object(r.h)("option",{value:"onlySelected",selected:"onlySelected"===t},Object(r.h)(m.c,{id:"dog.dogs.show-only-selected"},"Vis kun valgte")),Object(r.h)("option",{value:"onlyTeam",selected:"onlyTeam"===t},Object(r.h)(m.c,{id:"dog.dogs.show-only-team-dogs"},"Vis kun hundene i teamet")),Object(r.h)("option",{value:"leadOnly",selected:"leadOnly"===t},Object(r.h)(m.c,{id:"dog.dogs.show-lead-dogs-only"},"Vis kun lederhunder")),Object(r.h)("option",{value:"pointOnly",selected:"pointOnly"===t},Object(r.h)(m.c,{id:"dog.dogs.show-point-dogs-only"},"Vis kun pointhunder")),Object(r.h)("option",{value:"teamOnly",selected:"teamOnly"===t},Object(r.h)(m.c,{id:"dog.dogs.show-team-dogs-only"},"Vis kun teamhunder")),Object(r.h)("option",{value:"wheelOnly",selected:"wheelOnly"===t},Object(r.h)(m.c,{id:"dog.dogs.show-wheel-dogs-only"},"Vis kun wheelhunder"))))))),Object(r.h)("div",{class:"row"},L.length>0&&Object(r.h)(e,null,Object(r.h)("button",{class:"btn btn-primary btn-block",onClick:this.addAllDogsInTeam},Object(r.h)("i",{class:"fas fa-plus mr-2"})," ",Object(r.h)(m.c,{id:"dog.dogs.add-all-in-team",fields:{total:L.length}},"Add all dogs in team"),I.name?": "+I.name:"",C&&C.length>0&&Object(r.h)("span",{class:"font-weight-lighter"},", ",C.map((t,s)=>Object(r.h)(e,null,s>0?", ":"",t))))),c.a.isArray(u)&&l.map(e=>{const s=d.findDogstatus({status:e.status,language:y}),a=d.findDogposition({position:e.position,language:y}),o=g.findHistoryStatuses(e.id);return Object(r.h)("div",{class:"col-6 col-sm-6 col-md-6 col-lg-6 mb-1"},Object(r.h)("div",{class:`border rounded px-3 pt-2 pb-1 ${P.indexOf(e.id)>-1?"bg-success":""} position-relative`,onClick:this.toggleDog,id:"dogContainer","data-id":e.id,style:"padding: .3rem !important; line-height: 1.1em; cursor: pointer; pointer-events: inherit;"},a&&Object(r.h)("small",{class:"position-absolute",style:"left:5px; top: 32px;"},Object(r.h)("span",{class:`badge badge-${a.class||"primary"} mr-3`},a.icon&&Object(r.h)("i",{class:a.icon})," ",a.name)),"leadOnly"===t&&c.a.getNestedValue(e,"positions.lead.distanceKm")>0&&Object(r.h)("small",{class:"position-absolute",style:"left:5px; top: 32px;"},Object(r.h)("span",{class:"badge badge-secondary mr-3"},Object(r.h)(m.c,{id:"dogs.sort-lead"},"Lead"),": ",c.a.format(c.a.getNestedValue(e,"positions.lead.distanceKm"),0),"km")),"pointOnly"===t&&c.a.getNestedValue(e,"positions.point.distanceKm")>0&&Object(r.h)("small",{class:"position-absolute",style:"left:5px; top: 32px;"},Object(r.h)("span",{class:"badge badge-secondary mr-3"},Object(r.h)(m.c,{id:"dogs.sort-point"},"Point"),": ",c.a.format(c.a.getNestedValue(e,"positions.point.distanceKm"),0),"km")),"teamOnly"===t&&c.a.getNestedValue(e,"positions.team.distanceKm")>0&&Object(r.h)("small",{class:"position-absolute",style:"left:5px; top: 32px;"},Object(r.h)("span",{class:"badge badge-secondary mr-3"},Object(r.h)(m.c,{id:"dogs.sort-team"},"Team"),": ",c.a.format(c.a.getNestedValue(e,"positions.team.distanceKm"),0),"km")),"wheelOnly"===t&&c.a.getNestedValue(e,"positions.wheel.distanceKm")>0&&Object(r.h)("small",{class:"position-absolute",style:"left:5px; top: 32px;"},Object(r.h)("span",{class:"badge badge-secondary mr-3"},Object(r.h)(m.c,{id:"dogs.sort-wheel"},"Wheel"),": ",c.a.format(c.a.getNestedValue(e,"positions.wheel.distanceKm"),0),"km")),Object(r.h)("div",{class:"d-flex"},Object(r.h)("div",{class:"text-center border rounded-circle imageRounded imageRoundedSmall text-muted pt-2",style:""+(e.image?`background-image: url("${e.image.s3ThumbLink}");`:"")},!e.image&&Object(r.h)("span",{class:"font-weight-lighter",style:"font-size: 20px;"},c.a.ucfirst(e.name,!0))),Object(r.h)("div",{class:"flex-grow-1 pl-2 pr-1",style:`border-right: 4px solid ${d.findHarness(e.harness,"colorNonstop")} !important; line-height: 0.9em;`},Object(r.h)("small",null,Object(r.h)("small",{class:"float-right"},e.birth&&Object(r.h)("span",{class:"mr-1"},c.a.age(e.birth,e.deceased)),"female"===e.gender?Object(r.h)("i",{class:"fas fa-venus"}):Object(r.h)("i",{class:"fas fa-mars"})),e.shortname||e.name,Object(r.h)("br",null),Object(r.h)("div",{style:"line-height: 0.8em;"},Object(r.h)("small",null,d.findTeam(e.team)))),Object(r.h)("small",{class:"float-right"},s&&s.id&&Object(r.h)("span",{class:`badge badge-${s.class} mr-2 font-weight-light`},s.icon&&Object(r.h)("i",{class:s.icon})," ",s.name),e.specialNeeds&&Object(r.h)("span",{class:"badge badge-warning mr-2 font-weight-light"},Object(r.h)("i",{class:"fas fa-exclamation-triangle"})," ",e.specialNeeds),o&&o.map(e=>Object(r.h)("span",{class:"badge badge-warning mr-2",title:c.a.isoDate(e.endDate,!1,!1,!0)},e.title)))))))}))),v[`${x}.${w.id}`]?Object(r.h)("div",{class:"valid-feedback",style:"display: block;"},Object(r.h)(m.c,{id:"dog.dogs.saved-changes"},"Endringene er lagret")):Object(r.h)("small",{id:x+"Help",class:"form-text text-muted"},D),T&&Object(r.h)(e,null,Object(r.h)("div",{class:"container-fluid px-0 clearfix"},Object(r.h)("div",{class:"row"},Object(r.h)("div",{class:"col-12"},Object(r.h)("h5",null,Object(r.h)(m.c,{id:"dog.dogs.dogs-positions"},"Posisjoner i spannet")))),Object(r.h)(p.a,{onDragEnd:this.onDragEnd},Object(r.h)("div",{class:"row"},Object(r.h)("div",{class:"col-6 pr-0",style:"min-height: 100px;"},Object(r.h)(p.c,{droppableId:"dogsLeft"},(e,t)=>Object(r.h)(f,{provided:e,snapshot:t,innerRef:e.innerRef,className:"ml-auto"},o&&o.map((e,s)=>Object(r.h)(p.b,{key:`${e.id}-${e.unique}`,draggableId:`dragId-${e.id}-${e.unique}`,index:s},a=>Object(r.h)(O,{provided:a,snapshot:t,innerRef:a.innerRef,dog:e,removePlaceholder:this.removePlaceholder,idx:s,list:"dogsLeft"}))),e.placeholder))),Object(r.h)("div",{class:"col-6 pl-0",style:"min-height: 100px;"},Object(r.h)(p.c,{droppableId:"dogsRight"},(e,t)=>Object(r.h)(f,{provided:e,snapshot:t,innerRef:e.innerRef,className:"mr-auto"},i&&i.map((e,s)=>Object(r.h)(p.b,{key:`${e.id}-${e.unique}`,draggableId:`dragId-${e.id}-${e.unique}`,index:s},a=>Object(r.h)(O,{provided:a,snapshot:t,innerRef:a.innerRef,dog:e,removePlaceholder:this.removePlaceholder,idx:s,list:"dogsRight"}))),e.placeholder))))),Object(r.h)("div",{class:"row mb-3 mt-2"},Object(r.h)("div",{class:"col-6 pr-0"},Object(r.h)("button",{class:"btn btn-sm btn-outline-secondary",onClick:this.addPlaceholderLeft},Object(r.h)("i",{class:"fas fa-plus-circle"})," ",Object(r.h)(m.c,{id:"dog.dogs.addplaceholder"},"Add placeholder"))),Object(r.h)("div",{class:"col-6 pl-0"},Object(r.h)("button",{class:"float-right btn btn-sm btn-outline-secondary",onClick:this.addPlaceholderRight},Object(r.h)("i",{class:"fas fa-plus-circle"})," ",Object(r.h)(m.c,{id:"dog.dogs.addplaceholder"},"Add placeholder"))))),Object(r.h)("div",{class:"container-fluid px-0"},Object(r.h)("div",{class:"row"},Object(r.h)("div",{class:"col-6"},Object(r.h)("button",{class:"btn btn-sm btn-"+(n?"primary":"secondary"),onClick:this.updateDogPositions},Object(r.h)("i",{class:"fas fa-save"})," ",Object(r.h)(m.c,{id:"dog.dogs.saveDogPositions"},"Save dog positions"))),Object(r.h)("div",{class:"col-6"},Object(r.h)("button",{class:"float-right btn btn-sm btn-warning",onClick:this.resetDogPositions},Object(r.h)("i",{class:"fas fa-sync"})," ",Object(r.h)(m.c,{id:"dog.dogs.resetDogPositions"},"Reset dog positions")))),Object(r.h)("div",{class:"row mt-2"},Object(r.h)("div",{class:"col-6"}," "),Object(r.h)("div",{class:"col-6"},Object(r.h)("button",{class:"float-right btn btn-sm btn-link",onClick:this.clearDogPositions},Object(r.h)("i",{class:"fas fa-eraser"})," ",Object(r.h)(m.c,{id:"dog.dogs.clearDogPositions"},"Clear dog positions")))))))}})||l;t.a=y}).call(this,s("hosL").Fragment)},"3pQw":function(e,t,s){"use strict";var a,o=s("hosL"),i=s("Utv1"),n=s("/eY4");s("OhSV");Object(n.a)(a=class extends o.Component{render(){const{summary:e={}}=this.props;return Object(o.h)("div",{class:"w-100 mb-3"},Object(o.h)("div",{class:"row"},Object(o.h)("div",{class:"col-12 col-sm-8 col-lg-6 offset-sm-2 offset-lg-3 d-flex mb-0 position-relative"},Object(o.h)("div",{class:"text-center border rounded-circle imageRounded"},Object(o.h)("div",{class:"text-muted mt-2",style:"font-size: 40px; line-height: 1;"},e.week),Object(o.h)("div",{class:"text-muted",style:"font-size: 10px; line-height: 0.8em;"},e.year)),Object(o.h)("div",{class:"flex-grow-1 pl-3"},Object(o.h)("h5",{class:"my-0"},e.week," - ",e.year),Object(o.h)("small",{class:"text-muted"},Object(o.h)("i",{class:"fas fa-wave-square"})," ",e.count,Object(o.h)("i",{class:"fas fa-road ml-2"})," ",i.a.format(e.distanceKm,0),"km",Object(o.h)("i",{class:"fas fa-mountain ml-2"})," ",i.a.format(e.elevation,0),"m",Object(o.h)("i",{class:"fas fa-stopwatch ml-2"})," ",i.a.secToHms(e.duration),Object(o.h)("i",{class:"fas fa-tachometer-alt ml-2"})," ",i.a.format(e.speedAvg,1),"km/t")))))}})},"3wGD":function(e,t,s){"use strict";var a,o=s("hosL"),i=s("Utv1"),n=s("/eY4"),l=s("OhSV"),r=s("go65"),c=(s("ETxl"),s("ZOvn"));let d=Object(n.a)(a=class extends o.Component{constructor(e){var t;super(e),t=this,this.commentWorkout=async function(){const{sendButtonEnabled:e}=t.state;if(!e)return!1;const{callback:s=(()=>{}),commentId:a,inputRefObject:o={}}=t.props,{workout:i}=t.props,{workoutStore:n}=t.props.stores,{comment:l=""}=t.state;t.setState({sendButtonEnabled:!1});const r=await n.commentReplyWorkout({id:i.id,commentId:a,comment:l});r&&200===r.status&&(t.setState({comment:""},()=>{c.a.resizeTextarea(o[a])}),s({workout:i,response:r,commentId:a})),t.setState({sendButtonEnabled:!0})},this.state={sendButtonEnabled:!0},this.inputRef={}}render(){const{inputRef:e}=this.props,{comment:t,sendButtonEnabled:s}=this.state,{userStore:a}=this.props.stores,{user:n={}}=a,d=n.firstname?`${i.a.ucfirst(n.firstname,!0)}${i.a.ucfirst(n.lastname,!0)}`:""+i.a.ucfirst(n.email||"",!0),h=n.image||(n.images?n.images[0]:void 0);return Object(o.h)("div",{class:"w-100"},Object(o.h)("div",{class:"d-flex mb-0 position-relative w-100"},Object(o.h)("div",{class:"text-center border rounded-circle imageRounded imageRoundedThumb",style:(h?`background-image: url('${h.s3SmallLink}'); background-size: cover;`:"")+" border-width: 3px !important;"},!h&&Object(o.h)("span",{class:"font-weight-lighter",style:"font-size: 15px;"},d)),Object(o.h)("div",{class:"col pl-3",style:"line-height: 1.2em;"},Object(o.h)("div",{class:"d-flex bd-highlight"},Object(o.h)("div",{class:"p-0 w-100 bd-highlight"},Object(o.h)("label",{class:"sr-only",for:"inlineFormInput"},Object(o.h)(l.c,{id:"comments.comment"},"Kommentar")),Object(o.h)("div",{class:"border rounded rounded-lg position-relative"},Object(o.h)(l.b,null,Object(o.h)("textarea",{class:"form-control-plaintext px-2",type:"text",placeholder:Object(o.h)(l.c,{id:"comments.write-comment"},"Skriv en kommentar..."),onInput:Object(r.a)(this,"comment"),onKeyUp:c.a.resizeTextarea,style:"height: 2.3em;",value:t,ref:e})))),Object(o.h)("div",{class:"p-0 pl-2 flex-shrink-1 bd-highlight"},Object(o.h)("button",{type:"button",class:`btn btn-${s?"primary":"secondary"} mb-2`,disabled:!s,onClick:this.commentWorkout},Object(o.h)("i",{class:"fas fa-paper-plane"})))))))}})||a;t.a=d},"7L9N":function(e,t,s){"use strict";function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function o(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,a(e,t)}s.d(t,"a",(function(){return o}))},"8Lgr":function(e,t,s){"use strict";(function(e){function a(e){return n.a.format(e,e<5?2:1)}var o,i=s("hosL"),n=s("Utv1"),l=s("/eY4");s("OhSV"),s("ZOvn");let r=Object(l.a)(o=class extends i.Component{render(){const{value:t=0,smallUnit:s}=this.props,{userStore:o}=this.props.stores,{user:n}=o,{settings:l={}}=n;return l.imperial?Object(i.h)(e,null,Object(i.h)("nobr",null,a(function(e){return.621371*e}(t))," ",s?Object(i.h)(e,null,Object(i.h)("small",null,Object(i.h)("small",null,Object(i.h)("small",{class:"ml-0 text-muted"},"mi")))):Object(i.h)(e,null,"mi"))):Object(i.h)(e,null,Object(i.h)("nobr",null,a(t)," ",s?Object(i.h)(e,null,Object(i.h)("small",null,Object(i.h)("small",null,Object(i.h)("small",{class:"ml-0 text-muted"},"km")))):Object(i.h)(e,null,"km")))}})||o;t.a=r}).call(this,s("hosL").Fragment)},E02R:function(e){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},"EE/7":function(e,t,s){"use strict";function a(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,a)}return s}function o(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}s.r(t);var i,n=s("hosL"),l=s("Utv1"),r=s("/eY4"),c=s("OhSV"),d=s("ZOvn"),h=(s("JWe/"),s("3pQw"),s("xDik")),b=s("2X7c"),m=s("mPUg");const p=d.a.marginTop(!0),g=d.a.marginBottom(),u=d.a.subMenuMarginTop(),f={isLoading:!1};let O=Object(r.a)(i=class extends n.Component{constructor(e){super(e),this.setHistoryType=e=>{this.setState({historyType:e})},this.setDay=(e,t,s)=>{this.setState({yyyy:e,mm:t,dd:s})},this.resetDay=()=>{this.setState({yyyy:null,mm:null,dd:null})},this.state=function(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?a(Object(s),!0).forEach((function(t){o(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):a(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}({},f),this.loadAll()}async loadAll(){this.setState({isLoading:!0}),await this.loadFeed(),this.setState({isLoading:!1})}async loadFeed(e=this.props){const{userStore:t,workoutStore:s}=this.props.stores,{currentTeam:a}=s,o=(new Date).getMonth()+1,{month:i=o,year:n=l.a.getYear(),team:r=a,dog:c={}}=e;await t.getFeed({month:i,year:n,team:r,dog:c.id})}componentDidMount(){this.loadAll()}render(){const{isLoading:e,historyType:t,yyyy:s,mm:a,dd:o}=this.state,i=e=>{let i=!0;return t&&(i=e.historyType===t),i&&s&&a&&o&&(i=e.year===s&&e.month===a&&e.day===o),i},{userStore:r,appState:d}=this.props.stores,{darkmode:f}=d,{month:O,year:j}=this.props,{historyFeed:y,isAdmin:v}=r;return Object(n.h)("div",{class:"container-fluid",style:`margin-bottom: ${g}; margin-top: ${p};`},Object(n.h)("div",{class:"row fixed-top",style:`margin-top: ${u}; background-color: ${f?"#191d21":"#f8f9fa"};`},v&&Object(n.h)("div",{class:"col text-center subtopmenu"},Object(n.h)("a",{href:"/admin",class:"text-secondary stretched-link"},Object(n.h)("nobr",null,Object(n.h)("i",{class:"fas fa-user-shield"})," ",Object(n.h)(c.c,{id:"home.admin"},"Admin")))),Object(n.h)("div",{class:"col text-center subtopmenu"},Object(n.h)("a",{href:"/",class:"text-secondary stretched-link"},Object(n.h)("nobr",null,Object(n.h)("i",{class:"fas fa-chart-line"})," ",Object(n.h)(c.c,{id:"feed.dashboard"},"Dashboard")))),Object(n.h)("div",{class:"col text-center border-bottom border-primary subtopmenu"},Object(n.h)("a",{href:"/feed",class:"text-primary stretched-link"},Object(n.h)("nobr",null,Object(n.h)("i",{class:"fas fa-rss"})," ",Object(n.h)(c.c,{id:"feed.feed"},"Feed")))),Object(n.h)("div",{class:"col text-center subtopmenu"},Object(n.h)("a",{href:"/todo",class:"text-secondary stretched-link"},Object(n.h)("nobr",null,Object(n.h)("i",{class:"fas fa-list"})," ",Object(n.h)(c.c,{id:"feed.todo"},"Todo"))))),Object(n.h)("div",{class:"row"},Object(n.h)("div",{class:"col-12 mb-4"},Object(n.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 px-0"},Object(n.h)("span",{class:"float-right"},Object(n.h)(b.a,{stores:this.props.stores,dog:{}})),Object(n.h)("h5",null,Object(n.h)(c.c,{id:"feed.title"},"Siste fra hundene"))),Object(n.h)(m.a,{stores:this.props.stores,basehref:"/feed/",month:O,year:j,callback:this.setHistoryType,setDay:this.setDay}),!e&&y&&0===y.length&&Object(n.h)("div",{class:"mb-5 py-3 text-center border-top border-bottom text-muted"},Object(n.h)("div",{class:"display-4"},Object(n.h)("i",{class:"fas fa-dog"})),Object(n.h)("h5",null,Object(n.h)(c.c,{id:"feed.no-log"},"Ingen hendelser fra hundene.")),Object(n.h)("p",null,Object(n.h)(c.c,{id:"feed.tip-1"},"Det er fint å legge inn hendelser (løpetid, skader, vaksinering, vetrinærbesøk, mm) og bilder av hundene i loggen.")),Object(n.h)("p",null,Object(n.h)(c.c,{id:"feed.tip-2"},"På denne måten så vil hele teamet ditt se hva som skjer med hundene og hva som trengs å følges opp. Dette er en slags ",Object(n.h)("strike",null,"Face"),"Dogbook for hundene deres.")),Object(n.h)("br",null),Object(n.h)("a",{class:"btn btn-info mt-3",href:"/dogs/"},Object(n.h)("i",{class:"fas fa-dog"})," ",Object(n.h)(c.c,{id:"feed.add-log"},"Legg til logg på hundene"))),s&&a&&o&&Object(n.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 px-0 clearfix mb-3"},Object(n.h)("button",{class:"btn btn-sm btn-secondary float-right",onClick:this.resetDay},Object(n.h)(c.c,{id:"feed.show-all-days"},"Vis alle")),Object(n.h)("h5",null,s,"-",l.a.padDate(a),"-",l.a.padDate(o),":")),y&&y.filter(i).map(e=>Object(n.h)(h.a,{stores:this.props.stores,line:e})),!e&&y&&0===y.filter(i).length&&Object(n.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 px-0 clearfix"},Object(n.h)("div",{class:"mb-5 py-3 text-center border-top border-bottom text-muted"},Object(n.h)("div",{class:"display-4"},Object(n.h)("i",{class:"fas fa-dog"})),Object(n.h)("h5",null,Object(n.h)(c.c,{id:"feed.no-log"},"Ingen hendelser fra hundene.")),Object(n.h)("p",null,Object(n.h)(c.c,{id:"feed.tip-1"},"Det er fint å legge inn hendelser (løpetid, skader, vaksinering, vetrinærbesøk, mm) og bilder av hundene i loggen.")),Object(n.h)("p",null,Object(n.h)(c.c,{id:"feed.tip-2"},"På denne måten så vil hele teamet ditt se hva som skjer med hundene og hva som trengs å følges opp. Dette er en slags ",Object(n.h)("strike",null,"Face"),"Dogbook for hundene deres.")),Object(n.h)("br",null),Object(n.h)("a",{class:"btn btn-info mt-3",href:"/dogs/"},Object(n.h)("i",{class:"fas fa-dog"})," ",Object(n.h)(c.c,{id:"feed.add-log"},"Legg til logg på hundene")))))))}})||i;t.default=O},ETxl:function(e){e.exports={hoverelementonly:"hoverelementonly__1mJGJ",hoverElement:"hoverElement__axh3O",hoverelementhide:"hoverelementhide__1k_qH","progress-bar-vertical":"progress-bar-vertical__1B2sC","progress-bar":"progress-bar__pnsVj",dragged:"dragged__QXO46",over:"over__1re3x",list:"list__q_emZ"}},GeWT:function(e){"use strict";var t={childContextTypes:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},s={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},a=Object.defineProperty,o=Object.getOwnPropertyNames,i=Object.getOwnPropertySymbols,n=Object.getOwnPropertyDescriptor,l=Object.getPrototypeOf,r=l&&l(Object);e.exports=function e(c,d,h){if("string"!=typeof d){if(r){var b=l(d);b&&b!==r&&e(c,b,h)}var m=o(d);i&&(m=m.concat(i(d)));for(var p=0;p<m.length;++p){var g=m[p];if(!(t[g]||s[g]||h&&h[g])){var u=n(d,g);try{a(c,g,u)}catch(e){}}}return c}return c}},"JWe/":function(e,t,s){"use strict";(function(e){function a(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,a)}return s}function o(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?a(Object(s),!0).forEach((function(t){i(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):a(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function i(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function n(e){switch(e.type){case 1:return"border-primary";case 2:return"border-danger";case 3:return"border-success";case 4:return"border-info";default:return"border-warning"}}function l(e){switch(e.type){case 1:return"fas fa-running";case 2:return"fas fa-flag-checkered";case 3:return"fas fa-hiking";case 4:return"fas fa-futbol";default:return"fas fa-hiking"}}var r,c=s("hosL"),d=s("Utv1"),h=s("/eY4"),b=s("cneo"),m=s("OhSV"),p=s("fh8t"),g=s.n(p),u=(s("UJvz"),s("sqi2")),f=s("/922"),O=s("s4FZ"),j=s("ZQlJ"),y=s("q/oJ"),v=s("gWxU"),w=s("Nanz"),x=s("+JSK"),k=s("vY+r"),S=s("nHdA"),D=s("irB3"),T=s("UwwE"),I=s("8Lgr"),P=s("QkTp"),L=s("ZOvn");const C=L.a.getMaxLoadIndex(),R={showAddComment:!1,viewImageIdx:{},likeWorkout:{}};let E=Object(h.a)(r=class extends c.Component{constructor(e){var t;super(e),t=this,this.toggleDate=e=>{e.stopPropagation(),e.preventDefault();const{showDate:t}=this.state;this.setState({showDate:!t})},this.likeWorkout=async function(){const{workoutStore:e}=t.props.stores,{workout:s}=t.props,a=s.id,{likeWorkout:o}=t.state;o[a]=!0,t.setState({likeWorkout:o}),setTimeout(()=>{const{likeWorkout:e}=t.state;delete e[a],t.setState({likeWorkout:e})},1200);await e.likeWorkout({id:a})},this.toggleAddComment=e=>{const t=e.target.parentElement.dataset.id||e.target.dataset.id,{showAddComment:s}=this.state;this.setState({showAddComment:!s},()=>{this.inputRef[t]&&this.inputRef[t].focus()})},this.viewImage=e=>{const{id:t,idx:s}=e.target.closest("img").dataset,{viewImageIdx:a}=this.state;a[t]=s,this.setState({viewImageIdx:a})},this.shareLink=e=>{const{url:t,title:s,text:a}=e.target.closest("button").dataset,{appState:o}=this.props.stores;o.shareUrl({url:t,title:s,text:a})},this.onTeamClick=(e,t)=>(e.preventDefault(),e.stopPropagation(),this.setState({showTeam:t}),!1),this.hideTeam=()=>{this.setState({showTeam:null})},this.onUserClick=e=>(e.preventDefault(),e.stopPropagation(),!1),this.onDogClick=(e,t,s)=>(e.preventDefault(),e.stopPropagation(),this.setState({showDog:t,dogs:s}),!1),this.hideDog=()=>{this.setState({showDog:null})},this.state=o({},R),this.updateTimer={},this.inputRef={}}render(){const{showDate:t,showAddComment:s,viewImageIdx:a={},likeWorkout:i,dogs:r,showTeam:h,showDog:p}=this.state,{workout:R,showDate:E,wrapperClasses:$="col-12 col-sm-8 col-lg-6 offset-sm-2 offset-lg-3",wrapperClassesRow:F="row"}=this.props,{userStore:H,appState:U,workoutStore:A}=this.props.stores,{viewmode:V,hasShareApi:N}=U,{user:z,dogs:M}=H,{language:B="en"}=z,Y=H.findIntensity({code:R.intensity,language:B})||{},W=H.findTeam(R.team,!0)||{},_=W.name,K=[];_&&K.push(_),R.teams&&R.teams.forEach(e=>{H.findTeam(e)&&K.push(H.findTeam(e))});const{likes:X=[],comments:q=[]}=R,Z=R.likes&&R.likes.findIndex(e=>e.user===z.id)>-1,{gpxInfo:J={},mushers:G=[]}=R,{loadIndex:Q=0}=J,ee=H.findEquipment({equipment:R.equipment,language:B}),te=H.findEquipment({equipment:R.equipment,field:"icon"}),se=[];G.length>1&&G.slice(1,10).map(e=>{const t=A.findPublicUser(e)||{};t.images&&t.images[0]&&se.push(t.images[0])});const ae=A.findPublicUser(G[0])||{};let oe;ae&&ae.images&&ae.images[0]?oe=ae.images[0]:W.image&&W.image.s3SmallLink?oe=W.image:W.images&&W.images[0]&&W.images[0].s3SmallLink?oe=W.images[0]:R.image&&R.image.s3SmallLink&&(oe=R.image);const ie=[];if(R.mapImage&&ie.push(o(o({},R.mapImage),{},{type:"map"})),R.images){const e=Object(b.i)(R.images);ie.push(...e)}let ne;R&&R.gpxInfo&&R.gpxInfo.battegryLevelStart&&(ne=100*(R.gpxInfo.battegryLevelStart-R.gpxInfo.battegryLevelEnd));const le=L.a.getViews(R.statistics);return Object(c.h)(e,null,h&&Object(c.h)(y.a,null,Object(c.h)(v.default,{stores:this.props.stores,teamid:h,marginTop:"0px;",marginBottom:"0px;",back:this.hideTeam,hideTeam:this.hideTeam})),p&&Object(c.h)(y.a,null,Object(c.h)(w.default,{stores:this.props.stores,dogid:p,marginTop:"0px;",marginBottom:"0px;",back:this.hideDog,dogs:r})),Object(c.h)("div",{class:"w-100 mb-2"},Object(c.h)("div",{class:F},Object(c.h)("div",{class:$+" d-flex mb-0 position-relative"},Object(c.h)("div",{class:"text-center"},Object(c.h)("div",{class:"position-relative text-center border rounded-circle imageRounded "+n(R),style:(oe?`background-image: url("${oe.s3SmallLink}"); background-size: cover;`:"")+" border-width: 3px !important;"},!oe&&Object(c.h)("i",{class:`${l(R)} text-${Y.class?Y.class:"muted"} mt-3`,style:"font-size: 40px;"}),se&&se.map((t,s)=>Object(c.h)(e,null,Object(c.h)("div",{class:"position-absolute rounded-circle imageRounded border imageRoundedThumb border-white",style:`\n                                            background-image: url("${t.s3SmallLink}");\n                                            background-size: cover;\n                                            bottom: -3px;\n                                            left: ${10*s-5}px;\n                                        `})))),0!==R.temperature&&Object(c.h)(e,null,Object(c.h)("span",{class:"text-muted font-weight-light"},Object(c.h)(P.a,{stores:this.props.stores,value:R.temperature})))),Object(c.h)("div",{class:"flex-grow-1 pl-3",style:"line-height: 1.2em;"},Object(c.h)("span",{class:"float-right"},1===R.isLocked&&Object(c.h)("i",{class:"fas fa-lock text-danger ml-3"}),1===R.isInProgress&&Object(c.h)("div",{class:"spinner-grow text-success ml-3",role:"status"}),2===R.isInProgress&&Object(c.h)("i",{class:"fas fa-pause-circle text-warning ml-3"})),Object(c.h)("a",{class:"stretched-link",href:"/workouts/"+R.id},Object(c.h)("h5",{class:"my-0 mb-1",style:"line-height: 1.0em;"},R.name)),K&&K.length>0&&Object(c.h)("small",{class:"font-weight-lighter"},K.map((t,s)=>Object(c.h)(e,null,s>0?", ":"",t))),Object(c.h)("br",null),Object(c.h)("small",{class:"text-muted"},R.date&&Object(c.h)("small",{onClick:this.toggleDate},E||t?d.a.formatDate(R.date,{locale:"no-NB",hour12:!1,hour:"2-digit",minute:"2-digit"}):d.a.formatDistance(R.date,new Date,{locale:"no-NB"})),Object(c.h)("span",{class:`badge badge-${Y.class} ml-2`},Y.name),Q>0&&Object(c.h)("span",{class:"ml-2 text-"+L.a.getLoadIndexColor(d.a.normalizeBetween(Q,0,C,0,100))},Object(c.h)("i",{class:"fas fa-hand-rock mr-1"}),Math.floor(d.a.normalizeBetween(Q,0,C,0,100))," - ",L.a.getLoadIndexText(d.a.normalizeBetween(Q,0,C,0,100))),Object(c.h)("br",null)),Object(c.h)("small",null,Object(c.h)("div",{class:"text-muted"},R.garminId>0&&Object(c.h)("div",{class:"float-left mr-2 text-center border rounded-circle imageRounded imageRoundedIcon",style:'background-image: url("./assets/garmin-connect.png");'}),R.stravaId>0&&Object(c.h)("div",{class:"float-left mr-2 text-center border rounded-circle imageRounded imageRoundedIcon",style:'background-image: url("./assets/strava-icon.png");'}),R.equipment>0&&Object(c.h)(e,null,Object(c.h)("i",{class:te+" ml-2"})," ",ee),R.dogs>0&&Object(c.h)(e,null,Object(c.h)("i",{class:"fas fa-dog ml-2"})," ",R.dogs.length),R.track>0&&Object(c.h)(e,null,Object(c.h)("i",{class:`fas fa-map-marked text-${R.track>0?"success":"danger"} ml-2`})),R.dogsLeft>0&&Object(c.h)(e,null,Object(c.h)("i",{class:`fas fa-crosshairs text-${R.dogsLeft&&R.dogsRight?"success":"danger"} ml-2`})),R.sledWeight>0&&Object(c.h)(e,null,Object(c.h)("i",{class:"fas fa-sleigh ml-2"})," ",Object(c.h)(T.a,{stores:this.props.stores,value:R.sledWeight})),ne>0&&Object(c.h)("span",{class:"text-muted ml-2"},Object(c.h)("i",{class:"fas fa-battery-three-quarters"})," ",d.a.format(ne,1),"% ",Object(c.h)(m.c,{id:"workout.battery-used"},"used"))),["beta","advanced"].indexOf(V)>-1&&Object(c.h)("span",{class:"text-muted"},Object(c.h)("i",{class:"fas fa-balance-scale"})," ",d.a.format(R.kcalBurnedTotal)," ",Object(c.h)(m.c,{id:"workout.kcal"},"kcal"),Object(c.h)("i",{class:"fas fa-drumstick-bite ml-2"})," ",Object(c.h)(T.a,{stores:this.props.stores,value:R.kcalMeatGramsTotal/1e3}),Object(c.h)("i",{class:"fas fa-fish ml-2"})," ",Object(c.h)(T.a,{stores:this.props.stores,value:R.kcalSalmonGramsTotal/1e3}),Object(c.h)("i",{class:"fas fa-piggy-bank ml-2"})," ",Object(c.h)(T.a,{stores:this.props.stores,value:R.kcalFatGramsTotal/1e3}))))),Object(c.h)("div",{class:$+" position-relative mt-2"},Object(c.h)("strong",null,R.description)),Object(c.h)("div",{class:$+" position-relative"},Object(c.h)(g.a,{markdown:L.a.replaceImages(R.comment,R.images,B),markdownOpts:L.a.getMarkdownOptions()})),Object(c.h)("div",{class:$+" d-flex mb-0 position-relative"},Object(c.h)("div",{class:"container-fluid px-0"},Object(c.h)("div",{class:"row mt-1"},R.distanceKm>0&&Object(c.h)("div",{class:"col-3"},Object(c.h)("div",{class:"text-overflow"},Object(c.h)("small",null,Object(c.h)("i",{class:"fas fa-road"})," ",Object(c.h)(m.c,{id:"workout.calendar.distance"},"Distanse"))),Object(c.h)("div",{class:"text-overflow font-weight-light",style:"font-size: 1.2em;"},Object(c.h)(I.a,{stores:this.props.stores,value:R.distanceKm}))),R.elevation>0&&Object(c.h)("div",{class:"col-3"},Object(c.h)("div",{class:"text-overflow"},Object(c.h)("small",null,Object(c.h)("i",{class:"fas fa-mountain"})," ",Object(c.h)(m.c,{id:"workout.calendar.ascend"},"Høydemeter"))),Object(c.h)("div",{class:"text-overflow font-weight-light",style:"font-size: 1.2em;"},Object(c.h)(D.a,{stores:this.props.stores,value:R.elevation}))),R.duration>0&&Object(c.h)("div",{class:"col-3"},Object(c.h)("div",{class:"text-overflow"},Object(c.h)("small",null,Object(c.h)("i",{class:"fas fa-clock"})," ",Object(c.h)(m.c,{id:"workout.calendar.duration"},"Varighet"))),Object(c.h)("div",{class:"text-overflow font-weight-light",style:"font-size: 1.2em;"},d.a.secToHms(R.duration,!0))),R.speedAvg>0&&Object(c.h)("div",{class:"col-3"},Object(c.h)("div",{class:"text-overflow"},Object(c.h)("small",null,Object(c.h)("i",{class:"fas fa-tachometer-alt"})," ",Object(c.h)(m.c,{id:"workout.calendar.avg-speed"},"Snittfart"))),Object(c.h)("div",{class:"text-overflow font-weight-light",style:"font-size: 1.2em;"},R.gpxInfo&&R.gpxInfo.avgGpsMovingSpeed>0?Object(c.h)(e,null,Object(c.h)(S.a,{stores:this.props.stores,value:3.6*R.gpxInfo.avgGpsMovingSpeed})):Object(c.h)(e,null,Object(c.h)(S.a,{stores:this.props.stores,value:R.speedAvg}))))))),["beta","advanced","normal"].indexOf(V)>-1&&Object(c.h)("div",{class:""+$},Object(c.h)("div",{class:"container-fluid px-0 mt-1"},Object(c.h)("div",{class:"row"},Object(c.h)(O.a,{stores:this.props.stores,images:ie,id:R.id,dblClick:this.likeWorkout,likeRef:i})))),["beta","advanced","normal"].indexOf(V)>-1&&Object(c.h)(e,null,R.dogs&&R.dogs.length>0&&Object(c.h)("div",{class:"container-fluid px-0 mt-1"},Object(c.h)("div",{class:"row pt-2"},Object(c.h)(j.a,{stores:this.props.stores,dogs:R.dogs,allDogs:M,onDogClick:this.onDogClick}))),Object(c.h)("div",{class:"mt-2"},Object(c.h)(x.a,{stores:this.props.stores,likes:X,comments:q,type:"workout",onTeamClick:this.onTeamClick,onUserClick:this.onUserClick}))),["beta","advanced","normal"].indexOf(V)>-1&&Object(c.h)(e,null,Object(c.h)("div",{class:$+" mb-0 position-relative mt-2"},Object(c.h)("div",{class:"row"},Object(c.h)("div",{class:"col text-center"},Object(c.h)("button",{type:"button",class:`btn btn-sm btn-outline-${Z?"primary":"secondary"} btn-lg btn-block ${Z?"text-primary":""}`,onClick:this.likeWorkout},Object(c.h)("i",{class:(Z?"text-primary fas":"far")+" fa-thumbs-up"})," ",Object(c.h)(m.c,{id:"comments.like"},"Lik"))),Object(c.h)("div",{class:"col text-center"},Object(c.h)("button",{type:"button",class:"btn btn-sm btn-outline-secondary btn-lg btn-block","data-id":R.id,onClick:this.toggleAddComment},Object(c.h)("i",{class:"fas fa-comment"})," ",Object(c.h)(m.c,{id:"comments.comment-add"},"Kommentar"))),N?Object(c.h)(e,null,Object(c.h)("div",{class:"col text-center"},Object(c.h)("button",{class:"btn btn-sm btn-outline-secondary btn-lg btn-block text-overflow",onClick:this.shareLink,"data-url":"https://themusher.app/share/workout/"+R.uuidv4,"data-title":"title: "+R.name},Object(c.h)("i",{class:"fas fa-share"})," ",Object(c.h)(m.c,{id:"workout.share"},"Del")))):Object(c.h)(e,null,Object(c.h)("div",{class:"col text-center"},Object(c.h)("a",{class:"btn btn-sm btn-outline-secondary btn-lg btn-block text-overflow",href:"https://themusher.app/share/workout/"+R.uuidv4,target:"_blank",rel:"noreferrer","data-native":!0},Object(c.h)("i",{class:"fas fa-share"})," ",Object(c.h)(m.c,{id:"workout.share"},"Del")))))),Object(c.h)("div",{class:$+" mt-2 mb-3"},s&&Object(c.h)(f.a,{stores:this.props.stores,workout:R,inputRef:e=>this.inputRef[R.id]=e,inputRefObject:this.inputRef,col:"12",offset:"0"}),Object(c.h)(u.a,{stores:this.props.stores,workout:R,col:"10",offset:"2",compact:!0})),le>0&&Object(c.h)(e,null,Object(c.h)("div",{class:"mt-2"},Object(c.h)(k.a,{stores:this.props.stores,views:le,object:R,type:"workout",isTeamAdmin:!0,isAdmin:!1,onTeamClick:this.onTeamClick,onUserClick:this.onUserClick})))))))}})||r;t.a=E}).call(this,s("hosL").Fragment)},NS33:function(e,t,s){"use strict";function a(){}function o(){}var i=s("E02R");o.resetWarningCache=a,e.exports=function(){function e(e,t,s,a,o,n){if(n!==i){var l=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw l.name="Invariant Violation",l}}function t(){return e}e.isRequired=e;var s={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:o,resetWarningCache:a};return s.PropTypes=s,s}},QkTp:function(e,t,s){"use strict";(function(e){var a,o=s("hosL"),i=s("Utv1"),n=s("/eY4");s("OhSV"),s("ZOvn");let l=Object(n.a)(a=class extends o.Component{render(){const{value:t=0}=this.props,{userStore:s}=this.props.stores,{user:a}=s,{settings:n={}}=a;return n.imperial?Object(o.h)(e,null,Object(o.h)("nobr",null,i.a.format(function(e){return 9*e/5+32}(t),0),"°F")):Object(o.h)(e,null,Object(o.h)("nobr",null,i.a.format(t,1),"°C"))}})||a;t.a=l}).call(this,s("hosL").Fragment)},UJvz:function(e,t,s){"use strict";var a,o=s("hosL"),i=s("Utv1"),n=s("/eY4"),l=s("OhSV");let r=Object(n.a)(a=class extends o.Component{constructor(...e){super(...e),this.toggleDate=()=>{const{showDate:e}=this.state;this.setState({showDate:!e})},this.touchStart=e=>{e.stopPropagation(),this.setState({startY:e.touches[0].pageY})},this.touchEnd=e=>{e.stopPropagation(),this.setState({startY:void 0,readyToRefresh:!1})},this.touchMove=e=>{e.stopPropagation();const{close:t}=this.props,{startY:s,refreshing:a}=this.state,o=e.touches[0].pageY;if(this.appContainer){const{scrollTop:e}=this.appContainer;0===e&&o>s+30&&!a&&t()}}}render(){const{showDate:e}=this.state,{image:t,imagexxl:s,close:a,thumb:n,name:r,title:c,date:d}=this.props;return Object(o.h)("div",{class:"fixed-top bg-dark text-center pt-2",style:"width: 100vw; height: 100vh;"},Object(o.h)("button",{class:"btn btn-secondary float-right mr-2",onClick:a},"X"),Object(o.h)("div",{class:"d-flex mb-2 px-2"},n&&Object(o.h)("div",{class:"text-center border rounded-circle imageRounded imageRoundedSmall",style:n?`background-image: url("${n}");`:""}," "),Object(o.h)("div",{class:"flex-grow-1 pl-3 pr-2 text-left",style:"line-height: 1.3em;"},r&&Object(o.h)("strong",{class:"mr-2"},r,":"),c,Object(o.h)("br",null),Object(o.h)("small",{class:"text-muted"},d&&Object(o.h)("small",{onClick:this.toggleDate},e?i.a.formatDate(d,{locale:"no-NB"}):i.a.formatDistance(d,new Date,{locale:"no-NB"}))))),Object(o.h)("img",{src:t,class:"img-fluid align-middle mt-2 mb-2",onClick:a,onTouchstart:this.touchStart,onTouchend:this.touchEnd,onTouchmove:this.touchMove,ref:e=>this.appContainer=e}),Object(o.h)("a",{target:"_blank",rel:"noopener noreferrer",href:s||t,download:s||t},Object(o.h)("i",{class:"fas fa-download"})," ",Object(o.h)(l.c,{id:"modal.download"},"Last ned bildet")))}})||a;t.a=r},UwwE:function(e,t,s){"use strict";(function(e){var a,o=s("hosL"),i=s("Utv1"),n=s("/eY4");s("OhSV"),s("ZOvn");let l=Object(n.a)(a=class extends o.Component{render(){const{value:t=0}=this.props,{userStore:s}=this.props.stores,{user:a}=s,{settings:n={}}=a;return n.imperial?Object(o.h)(e,null,Object(o.h)("nobr",null,i.a.format(function(e){return 2.20462*e}(t),0)," lb")):Object(o.h)(e,null,Object(o.h)("nobr",null,i.a.format(t,0)," kg"))}})||a;t.a=l}).call(this,s("hosL").Fragment)},W0B4:function(e,t,s){e.exports=s("NS33")()},ZQlJ:function(e,t,s){"use strict";var a,o=s("hosL"),i=(s("Utv1"),s("/eY4")),n=(s("OhSV"),s("NDEG"));let l=Object(i.a)(a=class extends o.Component{constructor(e){super(e),this.scrollImages=e=>{const{scrollLeft:t,clientWidth:s}=e.target,a=t/s,o=Math.round(a),i=Math.abs(o-a);(Number.isInteger(a)||i<.1)&&this.setState({imageIdx:o})},this.sortByName=(e,t)=>{const{allDogs:s=[]}=this.props,a=s.find(t=>t.id===e),o=s.find(e=>e.id===t);return a&&o&&a.name>o.name?1:-1},this.state={imageIdx:0}}render(){const{dogs:e,allDogs:t=[],size:s="medium",onDogClick:a=(()=>{})}=this.props;return Object(o.h)("div",{class:"w-100"},Object(o.h)("div",{class:"d-flex flex-row flex-nowrap",style:"overflow: auto; scroll-snap-type: x mandatory;",onScroll:this.scrollImages},e&&e.sort(this.sortByName).map(i=>{const l=t.find(e=>e.id===i);return l?Object(o.h)("div",{class:"col clearfix position-relative p-0 mx-2"},Object(o.h)("div",{class:"w-100 h-100 text-center rounded-lg imageContainer d-flex justify-content-center align-items-center",style:"\n                                        flex-wrap: wrap;\n                                        overflow-y: hidden;\n                                    ",onTouchstart:e=>{e.stopPropagation()},onTouchend:e=>{e.stopPropagation()},onTouchmove:e=>{e.stopPropagation()}},Object(o.h)(n.a,{stores:this.props.stores,dog:l,dogs:t.filter(t=>e.indexOf(t.id)>-1).sort((e,t)=>e.name>t.name?1:-1),className:"mx-auto",showName:!0,showPosition:!1,size:s,onDogClick:a}))):""})))}})||a;t.a=l},irB3:function(e,t,s){"use strict";(function(e){var a,o=s("hosL"),i=s("Utv1"),n=s("/eY4");s("OhSV"),s("ZOvn");let l=Object(n.a)(a=class extends o.Component{render(){const{value:t=0,smallUnit:s}=this.props,{userStore:a}=this.props.stores,{user:n}=a,{settings:l={}}=n;return l.imperial?Object(o.h)(e,null,Object(o.h)("nobr",null,i.a.format(function(e){return 3.28084*e}(t),0)," ",s?Object(o.h)(e,null,Object(o.h)("small",null,Object(o.h)("small",null,Object(o.h)("small",{class:"ml-0 text-muted"},"ft")))):Object(o.h)(e,null,"ft"))):Object(o.h)(e,null,Object(o.h)("nobr",null,i.a.format(t,0)," ",s?Object(o.h)(e,null,Object(o.h)("small",null,Object(o.h)("small",null,Object(o.h)("small",{class:"ml-0 text-muted"},"m")))):Object(o.h)(e,null,"m")))}})||a;t.a=l}).call(this,s("hosL").Fragment)},mPUg:function(e,t,s){"use strict";(function(e){var a,o=s("hosL"),i=s("Utv1"),n=s("/eY4"),l=s("OhSV"),r=s("ZOvn");const c=[0,6];let d=Object(n.a)(a=class extends o.Component{constructor(...e){super(...e),this.setHistoryType=e=>{const{callback:t=(()=>{})}=this.props,{historyType:s}=this.state;let a=e.target.dataset.historytype||e.target.parentElement.dataset.historytype;a===s?(this.setState({historyType:null}),t(null)):(this.setState({historyType:a}),t(a))},this.chooseDay=e=>{const{year:t,month:s,day:a}=this.state,{setDay:o=(()=>{})}=this.props,i=parseInt(e.target.parentElement.dataset.day||e.target.dataset.day,10),n=parseInt(e.target.parentElement.dataset.month||e.target.dataset.month,10),l=parseInt(e.target.parentElement.dataset.year||e.target.dataset.year,10);l===t&&n===s&&i===a?(this.setState({year:null,month:null,day:null}),o(null,null,null)):(this.setState({year:l,month:n,day:i}),o(l,n,i))}}async loadHistorySummary(e=this.props){this.setState({isLoading:!0});const{userStore:t,workoutStore:s}=this.props.stores,{currentTeam:a}=s,o=(new Date).getMonth()+1,{month:n=o,year:l=i.a.getYear(),team:r=a,dog:c={},callback:d=(()=>{})}=e;await t.getFeed({month:n,year:l,team:r,dog:c.id});const{historyType:h}=this.state;d(h),this.setState({isLoading:!1})}componentDidMount(){this.loadHistorySummary()}componentWillReceiveProps(e){e.month===this.props.month&&e.year===this.props.year&&e.dog===this.props.dog&&e.team===this.props.team||this.loadHistorySummary(e)}render(){const{historyType:t,day:s,month:a,year:n}=this.state,d=t?e=>e.historyType===t:()=>!0,{appState:h,userStore:b}=this.props.stores,{user:m}=b,{language:p="en"}=m,g=r.a.getHistoryMap(p),u=r.a.getDays(p),f=r.a.getMonths(p),O=(new Date).getDate(),j=(new Date).getMonth()+1,y=(new Date).getFullYear(),{month:v=j,year:w=i.a.getYear(),dog:x,basehref:k}=this.props,S=parseInt(v,10),D=parseInt(w,10),{month:T,year:I}=r.a.getNextMonth(S,D),{month:P,year:L}=r.a.getPrevMonth(S,D),C=i.a.getDaysInMonth(v,w),R=i.a.getWeeksInMonth(v,w),E=i.a.getDaysInWeek(R[0].week,w);return Object(o.h)(e,null,Object(o.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-4"},Object(o.h)("a",{href:`${k||"/workouts/month/"}${T}/${I}/skipScroll`,class:"float-right btn btn-sm btn-link"},Object(o.h)("i",{class:"fas fa-arrow-right"})),Object(o.h)("a",{href:`${k||"/workouts/month/"}${P}/${L}/skipScroll`,class:"float-left btn btn-sm btn-link"},Object(o.h)("i",{class:"fas fa-arrow-left"})),Object(o.h)("h5",null,Object(o.h)(l.c,{id:"dog.calendar.month"},"Måned")," - ",f[v-1]," ",w),x&&Object(o.h)("div",null,x.name),Object(o.h)("small",null,i.a.isoDate(C[0],!1,!1,!0)," - ",i.a.isoDate(C[C.length-1],!1,!1,!0))),Object(o.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-4 mb-4"},Object(o.h)("table",{class:"table table-striped table-sm"},Object(o.h)("thead",null,Object(o.h)("tr",null,Object(o.h)("th",{class:"text-muted"},Object(o.h)("small",null,Object(o.h)(l.c,{id:"dog.calendar.week"},"Uke"))),E.map(e=>Object(o.h)("th",null,Object(o.h)("small",null,u[e.getDay()]))))),Object(o.h)("tbody",null,R&&R.map(t=>{const l=i.a.getDaysInWeek(t.week,w,v);return Object(o.h)("tr",null,Object(o.h)("td",{class:"text-right text-muted pt-3"},Object(o.h)("small",null,t.week)),l.map(t=>{const i=t.getFullYear(),l=t.getMonth()+1,h=t.getDate(),m=b.findHistory(i,l,h),p=b.findEndHistory(i,l,h),g=n==i&&a==l&&s==h,u=y==i&&j==l&&O==h,f=c.indexOf(t.getDay())>-1;return Object(o.h)("td",{class:`text-center font-weight-light position-relative pt-3 ${g?"calendarIsChosen":""} ${u?"calendarIsToday":""} ${f?"calendarIsWeekend":""}`,style:"font-size: 0.8em;",onClick:this.chooseDay,"data-day":h,"data-month":l,"data-year":i},Object(o.h)("div",{class:"position-absolute text-muted",style:"top: 0px; right: 2px; font-size: 0.7em;"},t.getDate()),m&&m.length>0?Object(o.h)(e,null,m.filter(d).map((e,t)=>{if(!e.historyType)return Object(o.h)("div",{class:"rounded-circle position-absolute border",style:`background-color: #808080; top: 50%; left: ${5*t}px; width: 15px; height: 15px;`});const s=r.a.getHistoryTypeColor(e.historyType);return Object(o.h)("div",{class:"rounded-circle position-absolute border",style:`background-color: ${s}; top: 50%; left: ${5*t}px; width: 15px; height: 15px;`})}),m.length>1&&Object(o.h)("span",{class:"position-absolute text-danger",style:"bottom: 0; right: 0px; font-size: 0.7em;"},m.length)):"-",p&&p.length>0?Object(o.h)(e,null,p.filter(d).map((e,t)=>{if(!e.historyType)return Object(o.h)("div",{class:"rounded position-absolute border border-white",style:`background-color: #808080; top: 50%; left: ${5*t}px; width: 15px; height: 15px;`});const s=r.a.getHistoryTypeColor(e.historyType);return Object(o.h)("div",{class:"rounded position-absolute border border-white",style:`background-color: ${s}; top: 50%; left: ${5*t}px; width: 15px; height: 15px;`})}),p.length>1&&Object(o.h)("span",{class:"position-absolute text-danger",style:"bottom: 0; right: 0px; font-size: 0.7em;"},p.length)):"-")}))})))),Object(o.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-4 mb-4"},Object(o.h)("div",{class:"clearfix"},Object(o.h)("small",null,r.a.getHistoryPri().map(e=>{const s=r.a.getHistoryTypeColor(e);return Object(o.h)("span",{class:"float-left mr-2 "+(t===e?"font-weight-bold":"font-weight-lighter"),onClick:this.setHistoryType,"data-historytype":e},Object(o.h)("div",{class:"rounded-circle border float-left mr-1",style:`background-color: ${s}; width: 15px; height: 15px;`})," ",g[e])}))),Object(o.h)("div",{class:"clearfix"},Object(o.h)("small",null,r.a.getHistoryPri(2).map(e=>{const s=r.a.getHistoryTypeColor(e);return Object(o.h)("span",{class:"float-left mr-2 "+(t===e?"font-weight-bold":"font-weight-lighter"),onClick:this.setHistoryType,"data-historytype":e},Object(o.h)("div",{class:"rounded-circle border float-left mr-1",style:`background-color: ${s}; width: 15px; height: 15px;`})," ",g[e])}))),Object(o.h)("div",{class:"clearfix"},Object(o.h)("small",null,r.a.getHistoryPri(3).map(e=>{const s=r.a.getHistoryTypeColor(e);return Object(o.h)("span",{class:"float-left mr-2 "+(t===e?"font-weight-bold":"font-weight-lighter"),onClick:this.setHistoryType,"data-historytype":e},Object(o.h)("div",{class:"rounded-circle border float-left mr-1",style:`background-color: ${s}; width: 15px; height: 15px;`})," ",g[e])})))))}})||a;t.a=d}).call(this,s("hosL").Fragment)},nHdA:function(e,t,s){"use strict";(function(e){var a,o=s("hosL"),i=s("Utv1"),n=s("/eY4"),l=s("OhSV");s("ZOvn");let r=Object(n.a)(a=class extends o.Component{render(){const{value:t=0,smallUnit:s}=this.props,{userStore:a}=this.props.stores,{user:n}=a,{settings:r={}}=n;return r.imperial?Object(o.h)(e,null,Object(o.h)("nobr",null,i.a.format(function(e){return.621371*e}(t),1)," ",s?Object(o.h)(e,null,Object(o.h)("small",null,Object(o.h)("small",null,Object(o.h)("small",{class:"ml-0 text-muted"},Object(o.h)(l.c,{id:"workouts.mph"},"mph"))))):Object(o.h)(e,null,Object(o.h)(l.c,{id:"workouts.mph"},"mph")))):Object(o.h)(e,null,Object(o.h)("nobr",null,i.a.format(t,1)," ",s?Object(o.h)(e,null,Object(o.h)("small",null,Object(o.h)("small",null,Object(o.h)("small",{class:"ml-0 text-muted"},Object(o.h)(l.c,{id:"workouts.kmt"},"km/t"))))):Object(o.h)(e,null,Object(o.h)(l.c,{id:"workouts.kmt"},"km/t"))))}})||a;t.a=r}).call(this,s("hosL").Fragment)},om2D:function(e,t,s){"use strict";var a,o=s("hosL"),i=s("/eY4"),n=(s("cneo"),s("Utv1"),s("u2zT"));let l=Object(i.a)(a=class extends o.Component{constructor(e){super(e),this.handleAddImage=e=>{const{addToImages:t=!0}=this.props,{updateField:s,object:a,field:o}=this.props;if(o&&s({id:a.id,field:o,value:e,skipTimer:!0}),t){const t=[];t.push(e),s({id:a.id,field:"images",value:t,skipTimer:!0})}},this.state={files:[]}}render(){const{uploadStatus:e=(()=>{}),before:t=(()=>{}),after:s=(()=>{}),autoOpen:a=!0}=this.props;return Object(o.h)("div",{class:"row"},Object(o.h)("div",{class:"col-12"},Object(o.h)(n.a,{handleAddImage:this.handleAddImage,uploadStatus:e,apiUrl:"/api/fileupload",before:t,after:s,autoOpen:a},Object(o.h)("div",{style:{height:30,width:"100%"}}))))}})||a;t.a=l},sqi2:function(e,t,s){"use strict";(function(e){function a(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,a)}return s}function o(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}var i,n=s("hosL"),l=s("Utv1"),r=s("/eY4"),c=s("cneo"),d=s("OhSV"),h=s("fh8t"),b=s.n(h),m=s("3wGD"),p=(s("ETxl"),s("ZOvn"));const g={showAddComment:{},showAllComments:!1,showAllReplies:{},viewImageIdx:{}};let u=Object(r.a)(i=class extends n.Component{constructor(e){var t;super(e),t=this,this.likeComment=async function(e){const{callback:s=(()=>{})}=t.props,a=e.target.parentElement.dataset.id||e.target.dataset.id,{workout:o}=t.props,{workoutStore:i}=t.props.stores,n=await i.likeWorkoutComment({id:o.id,commentId:a});return n&&200===n.status&&s({type:"likeComment",workout:o,commentId:a,response:n}),!0},this.likeReply=async function(e){const{callback:s=(()=>{})}=t.props,a=e.target.parentElement.dataset.id||e.target.dataset.id,o=e.target.parentElement.dataset.comment||e.target.dataset.comment,{workout:i}=t.props,{workoutStore:n}=t.props.stores,l=await n.likeWorkoutCommentReply({id:i.id,replyId:a,commentId:o});l&&200===l.status&&s({type:"likeReply",workout:i,commentId:o,replyId:a,response:l})},this.replyComment=async function(e){const s=e.target.parentElement.dataset.id||e.target.dataset.id,{showAddComment:a}=t.state;a[s]=!a[s],t.setState({showAddComment:a},()=>{t.inputRef[s]&&t.inputRef[s].focus()})},this.toggleComments=()=>{const{showAllComments:e}=this.state;this.setState({showAllComments:!e})},this.toggleReplies=e=>{const t=e.target.parentElement.dataset.id||e.target.dataset.id,{showAllReplies:s}=this.state;s[t]=!s[t],this.setState({showAllReplies:s})},this.viewImage=e=>{const{id:t,idx:s}=e.target.closest("img").dataset,{viewImageIdx:a}=this.state;a[t]=s,this.setState({viewImageIdx:a})},this.translate=async function(e){e.preventDefault(),e.stopPropagation();const{replyid:s,commentid:a}=e.target.closest("button").dataset,{workout:o}=t.props,{userStore:i,teamStore:n}=t.props.stores,{user:l}=i,{showOriginal:r={},translatedText:c={}}=t.state,d=`${a}${s?"-"+s:""}`;r[d]=0,c[d]=s?await n.translateCommentReply({commentid:a,replyid:s,object:o,user:l}):await n.translateComment({commentid:a,object:o,user:l}),t.setState({showOriginal:r,translatedText:c})},this.showOriginal=e=>{const{replyid:t,commentid:s}=e.target.closest("button").dataset;e.preventDefault(),e.stopPropagation();const{showOriginal:a={}}=this.state;a[`${s}${t?"-"+t:""}`]=1,this.setState({showOriginal:a})},this.state=function(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?a(Object(s),!0).forEach((function(t){o(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):a(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}({},g),this.inputRef={}}render(){const{showAddComment:t,showAllComments:s,showAllReplies:a,viewImageIdx:o,showOriginal:i={},translatedText:r={}}=this.state,{workout:h,callback:g=(()=>{}),col:u=12,offset:f=0,compact:O=!1}=this.props,{userStore:j,teamStore:y}=this.props.stores,{user:v,isAdmin:w}=j,{language:x="en"}=v;let k,S=[],D=0,T=0;return h.comments&&(D=h.comments.length,s?S=h.comments:(k=O?0:1,S=h.comments.slice(Math.max(D-k,0))),T=S.length),Object(n.h)("div",null,h&&S&&S.reverse().map(s=>{const{user:u={}}=s,f=y.findPublicTeamByMembers(u.id),O=p.a.displayNameShort(u),j=p.a.displayName(u),S=u.image||(u.images?u.images[0]:void 0),D=s.likes&&s.likes.findIndex(e=>e.user===v.id)>-1;let T=[],I=0,P=0;s.comments&&(I=s.comments.length,T=a[s.id]?s.comments:s.comments.slice(0,k),P=T.length);const L=[];if(s.images){const e=Object(c.i)(s.images);L.push(...e)}const C=o[s.id]?o[s.id]:0,R=L&&L[C]?L[C]:null,{currentLocationGeocode:E={}}=s,$=y.getCommentTranslations({object:h,commentid:s.id,targetLang:x})||r[s.id];let F=$||s.comment;return i[s.id]&&(F=s.comment),Object(n.h)("div",{class:"row"},Object(n.h)("div",{class:"col-12 d-flex mb-2 position-relative"},Object(n.h)("div",{class:"text-center border rounded-circle imageRounded imageRoundedSmall",style:(S?`background-image: url("${S.s3SmallLink}"); background-size: cover;`:"")+" border-width: 3px !important;"},!u.image&&Object(n.h)("span",{class:"font-weight-lighter",style:"font-size: 15px;"},O)),Object(n.h)("div",{class:"flex-grow-1 pl-3 pt-0",style:"line-height: 1.2em;"},Object(n.h)("div",{class:"bg-light p-2 rounded rounded-lg"},Object(n.h)("div",null,Object(n.h)("span",{style:"font-size: 0.95em;"},Object(n.h)("h5",{class:"font-weight-bold mb-0",style:"font-size: 1.0em;"},j),f&&f.length>0&&Object(n.h)("div",{class:"mb-2"},Object(n.h)("small",{class:"font-weight-lighter text-muted"},f.filter(e=>1===e.public).slice(0,2).map(t=>Object(n.h)(e,null,Object(n.h)("a",{href:"/teams/public/"+t.uuidv4,class:"mr-2"},Object(n.h)("i",{class:"fas fa-users text-muted"})," ",t.name))))),Object(n.h)(b.a,{markdown:p.a.replaceImages(F,s.images,x),markdownOpts:p.a.getMarkdownOptions()}))),Object(n.h)("div",{class:"container-fluid px-3 mt-1"},R&&Object(n.h)("div",{class:"clearfix row"},Object(n.h)("div",{class:"col-12 px-0 overflow-hidden",style:"max-height: 30vh;"},Object(n.h)("img",{loading:"lazy",class:"img-fluid",style:"min-width: 100px;",src:R.s3LargeLink}))),L&&L.length>1&&Object(n.h)("div",{class:"clearfix d-flex flex-wrap row"},L.map((t,a)=>Object(n.h)(e,null,Object(n.h)("div",{class:"col px-0 overflow-hidden",style:"max-height: 100px; min-width: 100px;"},Object(n.h)("img",{loading:"lazy",class:"img-fluid border",style:"min-width: 100px;",src:t.s3SmallLink,onClick:this.viewImage,"data-id":s.id,"data-idx":a}))))))),Object(n.h)("small",null,Object(n.h)("button",{class:"btn btn-sm btn-link py-0 "+(D?"text-primary":""),onClick:this.likeComment,"data-id":s.id},Object(n.h)(d.c,{id:"comments.like"},"Lik")),"-",Object(n.h)("button",{class:"btn btn-sm btn-link py-0",onClick:this.replyComment,"data-id":s.id},Object(n.h)(d.c,{id:"comments.comment-add"},"Kommentar")),s.language!==x&&Object(n.h)(e,null,"-",!i[s.id]&&$?Object(n.h)(e,null,Object(n.h)("button",{type:"button",class:"btn btn-sm btn-link","data-commentid":s.id,onClick:this.showOriginal},Object(n.h)("i",{class:"fas fa-cog"}),"  ",Object(n.h)(d.c,{id:"home.translate-show-original"},"Show original"))):Object(n.h)(e,null,Object(n.h)("button",{type:"button",class:"btn btn-sm btn-link",onClick:this.translate,"data-commentid":s.id},Object(n.h)("i",{class:"fas fa-cog"})," ",Object(n.h)(d.c,{id:"home.translate-to"},"See translation")))),"-",Object(n.h)("button",{class:"btn btn-sm btn-link py-0 disabled"},l.a.formatDistance(s.createdDate,new Date,{locale:"no-NB"}),s.updatedDate&&Object(n.h)(e,null,Object(n.h)("span",{class:"font-weight-light ml-2"},"(Edited ",l.a.formatDistance(s.updatedDate,new Date,{locale:"no-NB"}),")"))),w&&E&&E.formatted_address&&Object(n.h)(e,null,Object(n.h)("span",{class:"ml-2 text-muted"},Object(n.h)("i",{class:"fas fa-map-marker-alt"})," ",E.formatted_address)))),s.likes&&s.likes.length>0&&Object(n.h)("small",{class:"position-absolute bg-light shadow-sm rounded-lg py-0 px-1",style:"bottom: 20px; right: 15px;"},Object(n.h)("i",{class:"fas fa-thumbs-up text-primary"})," ",s.likes.length)),Object(n.h)("div",{class:"col-11 offset-1 mb-2"},s&&T&&T.map(t=>{const{user:a={}}=t,o=y.findPublicTeamByMembers(a.id),c=a.firstname?`${l.a.ucfirst(a.firstname,!0)}${l.a.ucfirst(a.lastname,!0)}`:""+l.a.ucfirst(a.email||"",!0),m=a.firstname?`${a.firstname} ${a.lastname}`:""+a.email,g=a.image||(a.images?a.images[0]:void 0),u=t.likes&&t.likes.findIndex(e=>e.user===v.id)>-1,f=y.getCommentReplyTranslations({object:h,commentid:s.id,replyid:t.id,targetLang:x})||r[`${s.id}-${t.id}`];let O=f||t.comment;return i[`${s.id}-${t.id}`]&&(O=t.comment),Object(n.h)("div",{class:"row"},Object(n.h)("div",{class:"col-12 d-flex mb-2 position-relative"},Object(n.h)("div",{class:"text-center border rounded-circle imageRounded imageRoundedThumb",style:(g?`background-image: url("${g.s3SmallLink}"); background-size: cover;`:"")+" border-width: 3px !important;"},!a.image&&Object(n.h)("span",{class:"font-weight-lighter",style:"font-size: 15px;"},c)),Object(n.h)("div",{class:"flex-grow-1 pl-3 pt-0",style:"line-height: 1.2em;"},Object(n.h)("div",{class:"bg-light p-2 rounded-lg"},Object(n.h)("span",{style:"font-size: 0.95em;"},Object(n.h)("h5",{class:"font-weight-bold mb-0",style:"font-size: 1.0em;"},m),o&&o.length>0&&Object(n.h)("div",{class:"mb-2"},Object(n.h)("small",{class:"font-weight-lighter text-muted"},o.filter(e=>1===e.public).slice(0,2).map(t=>Object(n.h)(e,null,Object(n.h)("a",{href:"/teams/public/"+t.uuidv4,class:"mr-2"},Object(n.h)("i",{class:"fas fa-users text-muted"})," ",t.name))))),Object(n.h)(b.a,{markdown:p.a.replaceImages(O,t.images,x),markdownOpts:p.a.getMarkdownOptions()}))),Object(n.h)("small",null,Object(n.h)("button",{class:"btn btn-sm btn-link py-0 "+(u?"text-primary":""),onClick:this.likeReply,"data-comment":s.id,"data-id":t.id},Object(n.h)(d.c,{id:"comments.like"},"Lik")),"-",Object(n.h)("button",{class:"btn btn-sm btn-link py-0",onClick:this.replyComment,"data-id":s.id},Object(n.h)(d.c,{id:"comments.comment-add"},"Kommentar")),t.language!==x&&Object(n.h)(e,null,"-",!i[`${s.id}-${t.id}`]&&f?Object(n.h)(e,null,Object(n.h)("button",{type:"button",class:"btn btn-sm btn-link","data-commentid":s.id,"data-replyid":t.id,onClick:this.showOriginal},Object(n.h)("i",{class:"fas fa-cog"}),"  ",Object(n.h)(d.c,{id:"home.translate-show-original"},"Show original"))):Object(n.h)(e,null,Object(n.h)("button",{type:"button",class:"btn btn-sm btn-link",onClick:this.translate,"data-commentid":s.id,"data-replyid":t.id},Object(n.h)("i",{class:"fas fa-cog"})," ",Object(n.h)(d.c,{id:"home.translate-to"},"See translation")))),"-",Object(n.h)("button",{class:"btn btn-sm btn-link py-0 disabled"},l.a.formatDistance(t.createdDate,new Date,{locale:"no-NB"})))),t.likes&&Object(n.h)("small",{class:"position-absolute bg-light shadow-sm rounded-lg py-0 px-1",style:"bottom: 20px; right: 15px;"},Object(n.h)("i",{class:"fas fa-thumbs-up text-primary"})," ",t.likes.length)))}),I-P>0&&Object(n.h)("div",null,Object(n.h)("button",{class:"btn btn-sm btn-link py-0",onClick:this.toggleReplies,"data-id":s.id},Object(n.h)(d.c,{id:"comments.show-more",fields:{more:I-P}},"Vis ",I-P," flere kommentarer...")))),t[s.id]&&Object(n.h)("div",{class:"col-11 offset-1 d-flex mb-2 position-relative"},Object(n.h)(m.a,{stores:this.props.stores,workout:h,callback:g,commentId:s.id,inputRef:e=>this.inputRef[s.id]=e,inputRefObject:this.inputRef})))}),D-T>0&&Object(n.h)("div",null,Object(n.h)("button",{class:"btn btn-sm btn-link py-0",onClick:this.toggleComments},Object(n.h)(d.c,{id:"comments.show-more",fields:{more:D-T}},"Vis ",D-T," flere kommentarer..."))),s&&Object(n.h)("div",null,Object(n.h)("button",{class:"btn btn-sm btn-link py-0",onClick:this.toggleComments},Object(n.h)(d.c,{id:"comments.hide-all-comments"},"Skjul alle kommentarene."))))}})||i;t.a=u}).call(this,s("hosL").Fragment)},u2zT:function(e,t,s){"use strict";var a,o=s("hosL"),i=s("/eY4"),n=s("Utv1"),l=s("OhSV");let r=Object(i.a)(a=class extends o.Component{constructor(e){super(e),this.dropRef=Object(o.createRef)(),this.handleDrag=e=>{e.preventDefault(),e.stopPropagation()},this.handleDragIn=e=>{e.preventDefault(),e.stopPropagation(),this.dragCounter++,e.dataTransfer.items&&e.dataTransfer.items.length>0&&this.setState({drag:!0})},this.handleDragOut=e=>{e.preventDefault(),e.stopPropagation(),this.dragCounter--,0===this.dragCounter&&this.setState({drag:!1})},this.handleDrop=e=>{if(e.preventDefault(),e.stopPropagation(),this.setState({drag:!1}),e.dataTransfer.files&&e.dataTransfer.files.length>0){for(let t=0,s=e.dataTransfer.files.length;t<s;t+=1){this.readLocalFile(e.dataTransfer.files[t])}this.dragCounter=0}},this.handleAddFiles=e=>{e.preventDefault();const t=e.target;for(let e=0,s=t.files.length;e<s;e+=1){this.readLocalFile(t.files[e])}},this.handleEvent=()=>{0},this.handleUpload=e=>{const{uploadStatus:t=(()=>{}),before:s=(()=>{}),after:a=(()=>{})}=this.props;t(!1),n.a.isFunction(s)&&s();const o=new FormData;o.append("files[]",e);const i={progress:1};i.xhr=new XMLHttpRequest,i.xhr.upload.addEventListener("progress",t=>{this.updateProgress(t,e)}),i.xhr.addEventListener("loadstart",t=>{this.handleEvent(t,e)}),i.xhr.addEventListener("load",t=>{this.handleEvent(t,e)}),i.xhr.addEventListener("loadend",t=>{const s=e;n.a.isFunction(a)&&a(),this.handleEvent(t,s)}),i.xhr.addEventListener("progress",t=>{this.handleEvent(t,e)}),i.xhr.addEventListener("error",t=>{this.handleEvent(t,e)}),i.xhr.addEventListener("abort",t=>{this.handleEvent(t,e)}),i.xhr.addEventListener("readystatechange",t=>{this.uploadDone(t,e)}),i.xhr.open("POST",`${n.a.getApiServer()}${this.props.apiUrl}`),i.xhr.setRequestHeader("Authorization","Bearer "+n.a.getJwtToken()),i.xhr.send(o);const l=e.name,r=this.state.uploadedFilesData;r[l]||(r[l]={}),r[l].uploadMeta=i,r[l].imageNum=this.state.imageNum,this.setState({uploadedFilesData:r})},this.readLocalFile=e=>new Promise((t,s)=>{const a=new FileReader;a.addEventListener("error",e=>{s(e)}),a.addEventListener("load",s=>{const a=e,o=a.name,i=this.state.uploadedFilesData;i[o]||(i[o]={}),i[o].event=s,this.setState({uploadedFilesData:i}),this.handleUpload(a),t(s)}),a.readAsDataURL(e)}),this.updateProgress=(e,t)=>{if(e.lengthComputable){const s=t.name,a=this.state.uploadedFilesData,o=e.loaded/e.total*100;0,a[s].uploadMeta.progress=o,this.setState({uploadedFilesData:a})}},this.uploadDone=(e,t)=>{const s=t.name,a=this.state.uploadedFilesData,o=a[s].uploadMeta;if(o&&4===o.xhr.readyState&&201===o.xhr.status){const e=JSON.parse(o.xhr.responseText).data.files;for(let t=0;t<e.length;t+=1){this.addFileToUpload(e[t]),this.fileInput.value=""}}},this.state={drag:!1,loadingProgress:0,uploadedFiles:[],uploadedFilesData:{}}}addFileToUpload(e){const{uploadedFilesData:t}=this.state,{handleAddImage:s,uploadStatus:a=(()=>{})}=this.props;delete t[e.name],this.setState({uploadedFilesData:t}),s(e),a(!0)}componentDidMount(){const e=this.dropRef.current;e.addEventListener("dragenter",this.handleDragIn),e.addEventListener("dragleave",this.handleDragOut),e.addEventListener("dragover",this.handleDrag),e.addEventListener("drop",this.handleDrop);const{autoOpen:t}=this.props;t&&setTimeout(()=>{this.fileInput.click()},10)}componentWillUnmount(){const e=this.dropRef.current;e.removeEventListener("dragenter",this.handleDragIn),e.removeEventListener("dragleave",this.handleDragOut),e.removeEventListener("dragover",this.handleDrag),e.removeEventListener("drop",this.handleDrop)}render(){const{uploadedFilesData:e}=this.state;return Object(o.h)("div",{style:{position:"relative"},ref:this.dropRef},this.state.drag&&Object(o.h)("div",{style:{border:"dashed grey 4px",backgroundColor:"rgba(255,255,255,.8)",position:"absolute",top:0,bottom:0,left:0,right:0,zIndex:9999}},Object(o.h)("div",{style:{position:"absolute",top:"50%",right:0,left:0,textAlign:"center",color:"grey",fontSize:36}},Object(o.h)("div",null,Object(o.h)(l.c,{id:"imageupload.drag-files-here"},"drop your files here :)")))),Object(o.h)("div",null,Object(o.h)("input",{class:"btn btn-info col-sm-12",multiple:!0,type:"file",id:"image-file",onchange:this.handleAddFiles,ref:e=>{this.fileInput=e}})),Object(o.h)("div",null,Object.keys(e).length>0?Object(o.h)("h3",null,Object(o.h)(l.c,{id:"imageupload.upload-images"},"Uploaded images")):"",Object(o.h)("ul",{class:"list-group"},Object.keys(e).map(t=>{const{uploadMeta:s={}}=e[t],a=t.match(/(jpg|jpeg|png|gif|heic|heif|svg|webp|tif)/i);return Object(o.h)("li",{class:"list-group-item list-group-item-action flex-column align-items-start"},Object(o.h)("div",{class:"d-flex w-100 justify-content-between"},a&&Object(o.h)("img",{class:"img-fluid mr-3",src:e[t].event.target.result,style:"max-height: 50px;"}),Object(o.h)("small",null,e[t].event.uploadDone),Object(o.h)(l.c,{id:"imageupload.uploading-image"},"Laster opp bilde..."),Object(o.h)("small",null,n.a.formatBytes(e[t].event.total,2))),Object(o.h)("div",{class:"progress mt-1",style:"height: 4px;"},Object(o.h)("div",{class:"progress-bar progress-bar-striped progress-bar-animated bg-success",role:"progressbar",style:`width: ${s.progress}%; height: 4px;`,"aria-valuenow":s.progress,"aria-valuemin":"0","aria-valuemax":"100"})))}))),this.props.children)}})||a;t.a=r},"vY+r":function(e,t,s){"use strict";(function(e){function a(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,a)}return s}function o(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}var i,n=s("hosL"),l=s("Utv1"),r=s("/eY4"),c=s("OhSV"),d=s("ZOvn");const h={};let b=Object(r.a)(i=class extends n.Component{constructor(e){super(e),this.toggleViews=()=>{const{showViewList:e}=this.state,{isTeamAdmin:t,isAdmin:s}=this.props;(t||s)&&this.setState({showViewList:!e})},this.state=function(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?a(Object(s),!0).forEach((function(t){o(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):a(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}({},h)}render(){const{showViewList:t}=this.state,{storyStore:s,teamStore:a,workoutStore:o}=this.props.stores,{views:i,object:r,type:h="story",onTeamClick:b=(()=>{}),onUserClick:m=(()=>{})}=this.props,p=[];Object.entries(r.statistics).forEach(([e,t])=>{Object.entries(t).forEach(([e,t])=>{t.viewUsers&&p.push(t.viewUsers)})});const g=p.flat().slice(0,50);return Object(n.h)(e,null,Object(n.h)("div",{class:"d-flex justify-content-between mb-2"},Object(n.h)("small",{class:"ml-2 text-muted",onClick:this.toggleViews},i," ",Object(n.h)(c.c,{id:"story.views"},"views"))),t&&Object(n.h)("div",{class:"mt-3 mb-3"},g&&g.map(t=>{let i,r,c;if("story"===h?(i=s.findPublicUser(t),r=s.findPublicTeamByMembers(t)):"team"===h?(i=a.findPublicUser(t),r=a.findPublicTeamByMembers(t)):"workout"===h&&(i=o.findPublicUser(t),r=o.findPublicTeamByMembers(t)),!i)return"";l.a.isArray(r)&&(c=r.find(e=>1===e.public));const m=d.a.getImage({user:i,team:c,priority:"user"}),p=d.a.displayNameShort(i),g=d.a.displayName(i,!0);return Object(n.h)("div",{class:"d-flex flex-row position-relative font-weight-light mb-1"},c?Object(n.h)(e,null,Object(n.h)("a",{href:"/teams/public/"+c.uuidv4,title:c.name,onClick:e=>b(e,c.uuidv4),class:"stretched-link"},Object(n.h)("div",{class:"text-center border rounded-circle imageRounded imageRoundedThumb",style:""+(m?`background-image: url("${m}"); background-size: cover;`:"")},!m&&Object(n.h)("div",{class:"",style:"font-size: 12px; padding-top: 3px;"},p))),Object(n.h)("div",{class:"ml-2 "},g," ",Object(n.h)("span",{class:"font-weight-lighter"},"- ",c.name))):Object(n.h)(e,null,Object(n.h)("div",{class:"text-center border rounded-circle imageRounded imageRoundedThumb",style:(m?`background-image: url("${m}"); background-size: cover;`:"")+" opacity: 0.5;"},!m&&Object(n.h)("div",{class:"text-muted",style:"font-size: 12px; padding-top: 3px;"},p)),Object(n.h)("div",{class:"ml-2"},g)))}),i>g.length&&Object(n.h)(e,null,Object(n.h)("small",{class:"text-muted"},Object(n.h)(c.c,{id:"story.limited-to"},"Limited to max 50 users.")))))}})||i;t.a=b}).call(this,s("hosL").Fragment)},xDik:function(e,t,s){"use strict";(function(e){var a,o=s("hosL"),i=s("Utv1"),n=s("/eY4"),l=s("OhSV"),r=s("ZOvn"),c=(s("UJvz"),s("1OK2"),s("s4FZ")),d=s("ETxl"),h=s.n(d);const b=r.a.getVaccineTypes();let m=Object(n.a)(a=class extends o.Component{constructor(e){var t;super(e),t=this,this.showModal=e=>{e.stopPropagation(),e.preventDefault();this.setState({displayModal:!0,currentImage:e.target.dataset.image,currentImageXXL:e.target.dataset.imagexxl,thumb:e.target.dataset.thumb,name:e.target.dataset.name,title:e.target.dataset.title,date:e.target.dataset.date})},this.closeModal=()=>{this.setState({displayModal:!1})},this.toggleDate=()=>{const{showDate:e}=this.state;this.setState({showDate:!e})},this.touchStart=e=>{const{eventFired:t}=this.state;t||this.setState({startY:e.touches[0].pageY,startX:e.touches[0].pageX,eventFired:!1,diffY:void 0,diffX:void 0,deleteVerify:!1})},this.touchEnd=()=>{const{eventFired:e}=this.state;this.setState(e?{startY:void 0,startX:void 0}:{startY:void 0,startX:void 0,eventFired:!1,diffY:void 0,diffX:void 0,deleteVerify:!1})},this.touchMove=e=>{const{eventFired:t}=this.state;if(t)return!1;const{startY:s,startX:a}=this.state,o=e.touches[0].pageY,i=e.touches[0].pageX;this.setState({diffY:o-s,diffX:i-a}),o>s+130||o<s-130||i>a+130||i<a-130&&this.setState({eventFired:!0})},this.reset=e=>{e&&(e.stopPropagation(),e.preventDefault()),this.setState({deleted:!1,startY:void 0,startX:void 0,eventFired:!1,diffY:void 0,diffX:void 0,deleteVerify:!1})},this.deleteHistoryRequest=async function(e){e.stopPropagation(),t.setState({deleteVerify:!0})},this.deleteHistory=async function(e){e.stopPropagation();const{dogStore:s}=t.props.stores,{line:a}=t.props;await s.save({id:a.dogId,$pull:{history:{_id:a.id||a._id}}}),t.setState({deleted:!0,startY:void 0,startX:void 0,eventFired:!1,diffY:void 0,diffX:void 0,deleteVerify:!1})},this.swipeLeft=e=>{const{eventFired:t}=this.state;e.stopPropagation(),t?this.reset():this.setState({eventFired:!0,diffX:-130})},this.state={showDate:!1}}componentWillReceiveProps(e){e.line.id!==this.props.line.id&&this.reset()}render(){const{userStore:t}=this.props.stores,{user:s}=t,{language:a="en"}=s,n=r.a.getHistoryMap(a),{showDate:d}=this.state,{line:m}=this.props,{diffX:p,deleted:g,deleteVerify:u}=this.state,f=m.images&&m.images.length>0,O=p<0;return Object(o.h)("div",{class:"w-100 mb-4 position-relative "+h.a.hoverElement,onTouchstart:g?()=>{}:this.touchStart,onTouchend:g?()=>{}:this.touchEnd,onTouchmove:g?()=>{}:this.touchMove,onClick:!g&&O?this.reset:()=>{},style:`opacity: ${g?.3:1};`},!O&&!g&&Object(o.h)("div",{class:"position-absolute "+h.a.hoverelementonly,style:"top: 0px; right: 0px; z-index: 1000;"},Object(o.h)("button",{class:"btn btn-sm btn-secondary",type:"button",onClick:this.swipeLeft},Object(o.h)("i",{class:"fas fa-ellipsis-h"}))),O&&!g&&Object(o.h)("div",{class:"position-absolute",style:`right: 0px; top: 10%; overflow: hidden; width: ${Math.abs(p)||0}px; line-height: 0.8em;`},!m.grouped&&Object(o.h)(e,null,u?Object(o.h)(e,null,Object(o.h)("button",{class:"btn btn-sm btn-secondary float-right ml-3 mb-3",onClick:this.reset},Object(o.h)("i",{class:"fas fa-times"})," ",Object(o.h)(l.c,{id:"dog.history.no"},"Nei")),Object(o.h)("button",{class:"btn btn-sm btn-success float-right",onClick:this.deleteHistory},Object(o.h)("i",{class:"fas fa-check"})," ",Object(o.h)(l.c,{id:"dog.history.yes"},"Ja"))):Object(o.h)("button",{class:"btn btn-sm btn-danger float-right",onClick:this.deleteHistoryRequest},Object(o.h)("i",{class:"fas fa-trash"})," ",Object(o.h)(l.c,{id:"dog.history.delete"},"Slett"))),m.grouped&&Object(o.h)("small",null,Object(o.h)(l.c,{id:"dog.history.cant-delete-groups"},"Kan ikke slette grupperinger. Gå inn på hundene og slett der."),Object(o.h)("br",null),Object(o.h)("button",{class:"btn btn-sm btn-success float-right",onClick:this.reset},Object(o.h)("i",{class:"fas fa-check"})," Ok"))),Object(o.h)("div",{class:"row position-relative",style:`left: ${O?p:0}px;`},Object(o.h)("div",{class:"col-12 col-sm-8 col-lg-6 offset-sm-2 offset-lg-3 d-flex mb-0 position-relative"},m.dogImage?Object(o.h)("div",{class:"text-center border rounded-circle imageRounded imageRoundedSmall",style:m.dogImage?`background-image: url("${m.dogImage.s3SmallLink}"); background-size: cover;`:""}," "):Object(o.h)("div",{class:"text-center border rounded-circle imageRounded imageRoundedSmall",style:m.images&&m.images[0]?`background-image: url("${m.images[0].s3SmallLink}"); background-size: cover;`:""},!f&&Object(o.h)("i",{class:"fas fa-rss text-muted mt-2",style:"font-size: 20px;"})),Object(o.h)("div",{class:"flex-grow-1 pl-3 pr-2",style:"line-height: 1.0em;"},!m.grouped&&m.dogId&&Object(o.h)("a",{class:"stretched-link",href:"/dogs/"+m.dogId},Object(o.h)("strong",{class:"mr-2"},m.dogShortname||m.dogName,": ")),m.title,Object(o.h)("br",null),m.grouped&&Object(o.h)(e,null,Object(o.h)("div",{class:"w-100 clearfix mt-2"},m.grouped.map(t=>Object(o.h)(e,null,Object(o.h)("a",{href:"/dogs/"+t.dogId},t.dogImage?Object(o.h)("div",{class:"text-center border rounded-circle imageRounded imageRoundedThumb float-left",style:"margin-right: 2px; "+(t.dogImage?`background-image: url("${t.dogImage.s3SmallLink}");`:"")}," "):Object(o.h)("div",{class:"text-center border rounded-circle imageRounded imageRoundedThumb float-left text-muted pt-1",style:"margin-right: 2px; "+(t.images&&t.images[0]?`background-image: url("${t.images[0].s3SmallLink}");`:"")},!f&&Object(o.h)("span",{style:"font-size: 15px;"},i.a.ucfirst(t.dogName,!0))))))),Object(o.h)("div",{class:"w-100 clearfix mt-2"},Object(o.h)("small",null,m.grouped.map(e=>Object(o.h)("span",{class:"float-left mr-2 text-muted"},Object(o.h)("a",{href:"/dogs/"+e.dogId},e.dogShortname||e.dogName)))))),Object(o.h)("div",{class:"w-100 clearfix"},Object(o.h)("small",{class:"text-muted"},m.date&&Object(o.h)("small",{onClick:this.toggleDate},d?i.a.formatDate(m.date,{locale:"no-NB"}):i.a.formatDistance(m.date,new Date,{locale:"no-NB"}),m.endDate&&Object(o.h)("span",{class:"ml-3"},Object(o.h)("i",{class:"fas fa-hourglass-end"})," ",i.a.formatDate(m.endDate,{locale:"no-NB"})),m.historyType&&Object(o.h)("span",{class:"ml-3"},Object(o.h)("i",{class:"fas fa-folder-open"})," ",n[m.historyType]," ",m.vaccineType?" - "+b[m.vaccineType].name:""),m.weight&&Object(o.h)("span",{class:"ml-3"},Object(o.h)("i",{class:"fas fa-balance-scale"})," ",m.weight," kg"),m.bodyScore&&Object(o.h)("span",{class:"ml-3"},Object(o.h)("i",{class:"fas fa-dog"})," ",m.bodyScore),m.user&&m.user.email&&Object(o.h)("span",{class:"ml-3"},Object(o.h)("i",{class:"fas fa-user"})," ",m.user.email)))),Object(o.h)("div",{class:"row mt-2"},Object(o.h)("div",{class:"col-12"},Object(o.h)("span",{class:"font-weight-normal"},m.comment),Object(o.h)("span",{class:"float-right"},m.cost?"Kr. "+i.a.format(m.cost,2):""))))),Object(o.h)("div",{class:"col-12 col-sm-8 col-lg-6 offset-sm-2 offset-lg-3 mt-1"},Object(o.h)("div",{class:"row"},Object(o.h)(c.a,{stores:this.props.stores,images:m.images})))))}})||a;t.a=m}).call(this,s("hosL").Fragment)}}]);
//# sourceMappingURL=35.chunk.04af6.esm.js.map