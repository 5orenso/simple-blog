{"version":3,"sources":["webpack:///./components/util/scrollIntoView.js","webpack:///./components/imageSlider/index.js","webpack:///./routes/workouts/detail.js","webpack:///./components/workout/infoGraph.js","webpack:///./components/dog/index.js","webpack:///./components/dog/simple.js","webpack:///./components/gauge/style.css","webpack:///./components/ad/index.js","webpack:///./components/states/index.js","webpack:///./components/user/musher.js","webpack:///./components/gauge/index.js"],"names":["initialState","ScrollIntoView","observer","props","state","container","componentDidMount","this","horizontal","vertical","behavior","inline","block","scrollIntoView","render","ref","c","Component","touchStart","e","stopPropagation","setState","startX","touches","pageX","touchEnd","undefined","sliding","touchMove","totalImages","x","prevImage","nextImage","images","imageContainer","currentImage1","currentImage2","currentIdx","length","imageDots","Array","fill","map","y","nextImageContainer","nextIdx","componentWillReceiveProps","nextProps","nextImages","imgHeight","imgWidth","img","curImage","dimensions","width","height","orientation","imageRatio","class","style","onTouchstart","onTouchend","onTouchmove","loading","src","s3LargeLink","image1","image2","i","getWorkoutColor","workout","type","getWorkoutIcon","MARGIN_TOP","mu","marginTop","MARGIN_TOP_BACK","marginTopBack","MARGIN_BOTTOM","marginBottom","MAX_LOADINDEX","getMaxLoadIndex","newDog","submenu","showAddComment","mapHeight","mapMaxHeight","reloadInSec","reloadLastEpoch","reloadIsActive","AdminInfo","onInputDuration","field","updateField","value","parseInt","target","name","hh","Math","floor","mi","match","id","handleImageErrored","image","onerror","setTimeout","Date","removeImage","stores","workoutStore","parentElement","dataset","removeMainImage","setDateToNow","util","isoDate","setTimeToNow","isoTime","setValue","setRightValue","rightValueReal","displayValue","insertValue","saved","datalist","min","max","step","elementtype","title","icon","help","onInput","rightValue","toJS","maxValue","secToHms","checkNested","yr","instant","details","date","air_temperature","wind_speed","windDirection","wind_from_direction","cloud_area_fraction","air_pressure_at_sea_level","relative_humidity","asNumber","for","Files","object","s3SmallLink","onError","onClick","data-name","autoOpen","list","aria-describedby","data-id","data-field","el","data-value","checked","data-type","data-elementtype","duration","firstPoint","getFirstPoint","midPoint","getMidPoint","endPoint","tracks","firstTrackPoint","lastTrackPoint","startTime","timestamp","getTime","join","t","coords","accuracy","JSON","stringify","WorkoutDetail","loadWorkout","addData","showAdminInfo","push","load","plotGeocluster","isNew","updateFieldValue","totalDistance","gpx","gpxInfo","maxSpeed","avgSpeed","ascent","decent","rest","startLatlng","endLatlng","updateObject","roundTo","distanceKm","speedmax","speedAvg","elevation","save","newValue","localObjectValue","datatype","skipTimer","isArray","split","parseFloat","updateObjectKeyValue","doUpdateField","clearTimeout","updateTimer","showModal","preventDefault","displayModal","currentImage","currentImageXXL","imagexxl","thumb","closeModal","deleteWorkout","saveField","PubSub","publish","topics","STATUS_MESSAGE","message","route","duplicateWorkout","response","makeTrack","makeTrackFromWorkout","likeWorkout","toggleAddComment","workoutId","inputRef","focus","toggleAdminInfo","userStore","isAdmin","chooseSubmenu","menu","showStateDetail","data","closest","stateDetail","reimportStravaWorkout","stravaId","reimportGarminWorkout","garminId","reCalculateGpxData","recalculated","reLoad","toggleMapSize","finishWorkout","cordovaSaveTracking","isInProgress","sendGpxFile","gpxFileSent","shareLink","appState","shareUrl","url","text","onTeamClick","teamid","showTeam","hideTeam","onUserClick","onDogClick","dogid","dogs","showDog","hideDog","back","history","goBack","tickReloadTimeer","now","componentWillUnmount","reload","batteryUsage","mapColorMode","mapRangeMin","mapRangeMax","isCordova","hasShareApi","viewmode","user","normalizeBetween","waypoints2","waypoints3","likes","comments","language","team","findTeam","teamAmbition","findTeamAmbition","ambition","ambitions","teamType","findTeamType","workoutType","findWorkoutType","workoutTypeIcon","track","findTrack","workoutEquipment","findEquipment","equipment","workoutEquipmentIcon","findDogs","mushers","findMushers","intensity","findIntensity","code","workoutNavigation","getWorkoutNavigation","hasLikedWorkout","findIndex","weightedTotalKcal","loadIndex","kcalMultiplier","totalKcalRelated","teamNames","teams","battegryLevelStart","battegryLevelEnd","mapImage","imgs","showReimport","views","getViews","statistics","musherImages","slice","musher","u","findMusher","firstMusher","isLocked","href","previous","total","idx","next","role","sledWeight","format","comment","markdown","replaceImages","markdownOpts","getMarkdownOptions","data-menu","mapId","geojson","geoJSON","skipGeojson","key","fullscreenMap","weather","temperature","currentSpeed","calculatedTotalDistance","abs","calculatedAscend","calculatedDescend","descent","section","endTime","minEpoch","maxEpoch","avgMovingSpeeds","avgGpsSpeed","avgGpsMovingSpeed","reimported","states","radius","showPercentText","color","getLoadIndexColor","percent","completed","getLoadIndexText","prefix","typeFactor","ambitionFactor","normalSpeed","speedFactor","normalDuration","durationFactor","intensityFactor","kcalBurnedTotal","kcalBurned","kcalFatGramsTotal","kcalFatGrams","kcalMeatGramsTotal","kcalMeatGrams","kcalSalmonGramsTotal","kcalSalmonGrams","dogsLeft","dogId","dog","findDog","className","dogsRight","fields","sunPosition","start","end","moonPosition","altitudeDeg","moonIllumination","phaseIcon","fraction","aria-valuenow","aria-valuemin","aria-valuemax","indexOf","rating","private","data-url","uuidv4","data-title","rel","data-native","inputRefObject","isTeamAdmin","WorkoutInfoGraph","withText","week","distance","ascend","plan","finalGpxInfo","gpsSpeeds","speeds","elevations","temperatures","climbs","ecor","dataLeft","dataLeft2","dataLeft3","dataRight","dataRight3","legendLeft","legendLeft2","legendLeft3","legendRight","legendRight3","unitLeft","unitLeft2","unitLeft3","unitRight","unitRight3","smoothArray","xTicks","xTicksRange","range","ceil","partSize","l","showXTicks","xTicksVal","val","paddingTop","lineFromXzero","lineFromXmax","dataFillLeft","showYTicksLeft","yTicksLeftPostfix","avgWindowLeft","smoothLeft","showYTicksRight","yTicksRightPostfix","avgWindowRight","smoothRight","yMaxMinLeftRound","yTicksRightVal","v","Dog","dogStore","currentMonth","getMonth","currentYear","getFullYear","month","year","seasonStart","workoutSummary","findWorkoutSummary","dogStatuses","statuses","findDogstatus","status","dogVaccines","findVaccineStatuses","dogVaccineLogStatuses","findVaccineLogStatuses","chipId","dogHistoryStatuses","findHistoryStatuses","dogStatus","dogPosition","findDogposition","position","forEach","hasBirthday","birth","daysUntilBirthday","daysUntilNextBirthday","ucfirst","findHarness","harness","age","deceased","gender","shortname","weight","bodyScore","endDate","vaccineType","positions","lead","point","wheel","specialNeeds","lang","filter","vac","inKarens","vaccineAgens","getFatigueLevel","wo","STOP_STATUSES","WARN_STATUSES","showWorkout","showNeeds","showInfo","showName","showPosition","showAge","size","findCurrentWorkoutSummary","module","exports","Ad","subject","body","logClick","ads","adStore","apiServer","getApiServer","loadAd","page","isLoading","path","currentTeam","postalcode","place","country","replace","query","setTime","time","ad","native","getStateColor","getStateIcon","States","hideDetail","nextStateDetail","nextState","avgspeed","statespeeds","stateSpeeds","prevStateDetail","prevIdx","prevState","showText","currentWidth","data-idx","data-state","data-duration","data-distance","data-avgspeed","data-statespeeds","data-point","data-start","data-end","data-percent","formatDate","parseInputDate","locale","hour12","day","hour","minute","Musher","email","fname","mouseData","Gauge","svgRef","heightAdd","showCenterText","centerText","centerTextSize","centerTextX","centerTextY","totalY","totalX","totalTextAnchor","completedY","completedX","completedTextAnchor","strokeWidth","innerRadius","strokeWidthGauge","circumference","PI","arc","dashArray","transform","offset","textSize","textSizeSmall","xmlns","svg","preserveAspectRatio","gaugeBackground","cx","cy","r","strokeDasharray","strokeLinecap","gauge","stroke","strokeDashoffset","transition","gaugeText","dominant-baseline","text-anchor","font-size","secondary"],"mappings":"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","file":"14.chunk.573c2.js","sourcesContent":["import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\n\nconst initialState = {};\n\n@observer\nclass ScrollIntoView extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            ...initialState,\n        };\n        this.container = null;\n    }\n\n    componentDidMount() {\n        const { horizontal, vertical = '' } = this.props;\n        const props = {\n            behavior: 'smooth',\n        };\n        if (horizontal) {\n            props.inline = horizontal;\n        }\n        if (vertical) {\n            props.block = vertical;\n        }\n\t\tthis.container.scrollIntoView(props);\n\t}\n\n    render() {\n        return (\n            <div ref={c => this.container = c}>&nbsp;</div>\n        );\n    }\n}\n\nexport default ScrollIntoView;\n","import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\n\n@observer\nclass ImageSlider extends Component {\n    constructor(props) {\n        super(props);\n        const { images = [] } = props;\n        this.state = {\n            imageContainer: 1,\n            currentImage1: images[0] || {},\n            currentImage2: {},\n            currentIdx: 0,\n            totalImages: images.length || 0,\n            imageDots: [...Array(images.length || 0).fill(1).map((x, y) => x + y)],\n        };\n    }\n\n    nextImage() {\n        // console.log('next');\n        const { images } = this.props;\n        const { totalImages, currentIdx, imageContainer } = this.state;\n        const nextImageContainer = imageContainer === 1 ? 2 : 1;\n        let nextIdx = currentIdx + 1;\n        if (nextIdx > totalImages -1) {\n            nextIdx = 0;\n        }\n        this.setState({\n            [`currentImage${nextImageContainer}`]: images[nextIdx],\n            currentIdx: nextIdx,\n            imageContainer: nextImageContainer,\n        });\n    }\n\n    prevImage() {\n        // console.log('prev');\n        const { images } = this.props;\n        const { totalImages, currentIdx, imageContainer } = this.state;\n        const nextImageContainer = imageContainer === 1 ? 2 : 1;\n        let nextIdx = currentIdx - 1;\n        if (nextIdx < 0) {\n            nextIdx = totalImages - 1;\n        }\n        this.setState({\n            [`currentImage${nextImageContainer}`]: images[nextIdx],\n            currentIdx: nextIdx,\n            imageContainer: imageContainer === 1 ? 2 : 1,\n        });\n    }\n\n    touchStart = (e) => {\n        e.stopPropagation();\n        this.setState({\n            startX: e.touches[0].pageX,\n        })\n    }\n\n    touchEnd = (e) => {\n        e.stopPropagation();\n        this.setState({\n            startX: undefined,\n            sliding: false,\n        })\n    }\n\n    touchMove = (e) => {\n        e.stopPropagation();\n        // e.preventDefault();\n        const { totalImages } = this.state;\n        if (totalImages > 1) {\n            const { startX, sliding } = this.state;\n            const scrollDistance = 50;\n            const x = e.touches[0].pageX;\n            if (!sliding) {\n                if (x > startX + scrollDistance) {\n                    this.setState({ sliding: true })\n                    this.prevImage();\n                } else if (x < startX - scrollDistance) {\n                    this.setState({ sliding: true })\n                    this.nextImage();\n                }\n            }\n        }\n    }\n\n    componentWillReceiveProps(nextProps) {\n        // console.log('componentWillReceiveProps', nextProps);\n        if (nextProps.images !== this.props.images) {\n            const { images: nextImages = [] } = nextProps;\n            this.setState({\n                imageContainer: 1,\n                currentImage1: nextImages.length > 0 ? nextImages[0] : {},\n                currentImage2: {},\n                currentIdx: 0,\n                totalImages: nextImages.length || 0,\n                imageDots: [...Array(nextImages.length || 0).fill(1).map((x, y) => x + y)],\n            });\n        }\n    }\n\n    render() {\n        const { currentImage1, currentImage2, imageContainer, totalImages, imageDots, currentIdx } = this.state;\n        const img = this[`image${imageContainer}`];\n        const curImage = imageContainer === 1 ? currentImage1 : currentImage2;\n        const htmlImageRatio = img && img.height ? img.width / img.height : 4 / 3;\n        let imgHeight;\n        let imgWidth;\n        if (curImage.dimensions) {\n            const { width, height, orientation } = curImage.dimensions;\n            if (orientation > 4 && orientation < 9) {\n                imgHeight = width;\n                imgWidth = height;\n            } else {\n                imgHeight = height;\n                imgWidth = width;\n            }\n        }\n        const imageRatio = curImage.dimensions ? imgWidth / imgHeight : htmlImageRatio;\n        if (totalImages <= 0) {\n            return '';\n        }\n\n        return (\n            <div class='w-100'>\n                <div class='border rounded position-relative w-100'\n                    style={`height: calc(85vw / ${imageRatio}); overflow: hidden; transition: all .3s ease-in-out;`}\n                    onTouchstart={this.touchStart}\n                    onTouchend={this.touchEnd}\n                    onTouchmove={this.touchMove}\n                >\n                    {totalImages > 1 && <span class='position-absolute' style='top:0px; right: 5px; z-index: 2000;'><small>{currentIdx + 1}/{totalImages}</small></span>}\n                    {currentImage1 && <div class='position-absolute' style={`${imageContainer === 1 ? 'opacity: 1;' :  'opacity: 0;'} transition: all .3s ease-in-out; top: 0; left: 0;`}>\n                        <img loading='lazy' src={currentImage1.s3LargeLink}\n                            class='img-fluid align-middle'\n                            ref={c => this.image1 = c}\n                        />\n                    </div>}\n                    {currentImage2 && <div class='position-absolute' style={`${imageContainer === 2 ? 'opacity: 1;' :  'opacity: 0;'} transition: all .3s ease-in-out; top: 0; left: 0;`}>\n                        <img loading='lazy' src={currentImage2.s3LargeLink}\n                            class='img-fluid align-middle'\n                            ref={c => this.image2 = c}\n                        />\n                    </div>}\n                </div>\n                {imageDots.length > 1 && <div class='w-100 text-center'>{imageDots.map(i => <span style={`color: ${i === currentIdx + 1 ? '#ffffff' : '#808080'};`}>&bull;</span>)}</div>}\n            </div>\n        );\n    }\n}\n\nexport default ImageSlider;\n","import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport { route } from 'preact-router';\nimport { Text, Localizer } from 'preact-i18n';\nimport { toJS } from 'mobx';\nimport Markdown from 'preact-markdown';\n\nimport PubSub, { topics } from '../../lib/pubsub';\n\nimport mu from '../../lib/musher-util';\nconst MARGIN_TOP = mu.marginTop(false);\nconst MARGIN_TOP_BACK = mu.marginTopBack(false);\nconst MARGIN_BOTTOM = mu.marginBottom();\n\nconst MAX_LOADINDEX = mu.getMaxLoadIndex();\nconst RELOAD_INTERVAL_IN_SEC = 60;\n\nimport Map from '../../components/map';\nimport ImageSlider from '../../components/imageSlider';\nimport ImageScroller from '../../components/imageScroller';\nimport Dog from '../../components/dog';\nimport Musher from '../../components/user/musher';\nimport DogSimple from '../../components/dog/simple';\nimport WorkoutInfoGraph from '../../components/workout/infoGraph';\nimport WorkoutComments from '../../components/workout/comments';\nimport WorkoutAddComment from '../../components/workout/commentAdd';\nimport Gauge from '../../components/gauge';\nimport Ad from '../../components/ad/';\nimport Images from '../../components/form/images';\n\nimport Overlay from '../../components/overlay/';\nimport TeamsPublicDetail from '../../routes/teams/publicDetail';\nimport DogPublicDetail from '../../routes/dogs/publicDetail';\n\nimport LikesAndComments from '../../components/feedback/likesAndComments';\nimport Views from '../../components/feedback/views';\n\nimport Speed from '../../components/data/speed';\nimport Elevation from '../../components/data/elevation';\nimport Weight from '../../components/data/weight';\nimport Distance from '../../components/data/distance';\nimport Temperature from '../../components/data/temperature';\n\nimport States from '../../components/states';\n\nimport ScrollIntoView from '../../components/util/scrollIntoView';\n\nfunction getWorkoutColor(workout) {\n\tswitch (workout.type) {\n\t\tcase 1:\n\t\t\treturn 'border-primary';\n\t\tcase 2:\n\t\t\treturn 'border-danger';\n\t\tcase 3:\n\t\t\treturn 'border-success';\n\t\tcase 4:\n\t\t\treturn 'border-info';\n\t\tdefault:\n\t\t\treturn 'border-warning';\n\t}\n}\n\nfunction getWorkoutIcon(workout) {\n\tswitch (workout.type) {\n\t\tcase 1:\n\t\t\treturn 'fas fa-running';\n\t\tcase 2:\n\t\t\treturn 'fas fa-flag-checkered';\n\t\tcase 3:\n\t\t\treturn 'fas fa-hiking';\n\t\tcase 4:\n\t\t\treturn 'fas fa-futbol';\n\t\tdefault:\n\t\t\treturn 'fas fa-hiking';\n\t}\n}\n\nfunction getStateColor(state) {\n\tswitch (state) {\n\t\tcase 'running':\n\t\t\treturn 'primary';\n\t\tcase 'rest':\n\t\t\treturn 'warning';\n\t\tcase 'restTrail':\n\t\t\treturn 'danger';\n\t}\n}\n\nfunction getStateIcon(state) {\n\tswitch (state) {\n\t\tcase 'running':\n\t\t\treturn 'fas fa-running';\n\t\tcase 'rest':\n\t\t\treturn 'fas fa-male';\n\t\tcase 'restTrail':\n\t\t\treturn 'fas fa-bed';\n\t}\n}\n\nfunction displayDistance(distanceKm) {\n\tif (distanceKm < 5) {\n\t\treturn util.format(distanceKm, 2);\n\t}\n\tif (distanceKm < 10) {\n\t\treturn util.format(distanceKm, 1);\n\t}\n\treturn util.format(distanceKm, 1);\n}\n\nconst initialState = {\n    newDog: {},\n\tsubmenu: 'totals',\n\tshowAddComment: false,\n\tmapHeight: 300,\n\tmapMaxHeight: 600,\n\treloadInSec: null,\n\treloadLastEpoch: null,\n\treloadIsActive: false,\n};\n\n@observer\nclass Input extends Component {\n    onInputDuration = (e) => {\n        const { field, updateField, workout } = this.props;\n        const value = parseInt(e.target.value, 10);\n        const name = e.target.name;\n        let hh = Math.floor(workout[field] / 3600) || 0;\n        let mi = Math.floor(workout[field] / 3600) || 0;\n        if (name.match(/-hours/)) {\n            hh = value;\n        }\n        if (name.match(/-minutes/)) {\n            mi = value;\n        }\n        const combinedValue = (hh * 3600) + (mi * 60);\n        updateField({ id: workout.id, field, value: combinedValue });\n    }\n\n    handleImageErrored = (e) => {\n        const image = e.target;\n        image.onerror = null;\n        setTimeout(() => {\n            image.src += `?${new Date()}`;\n        }, 1000);\n    }\n\n    removeImage = async (e) => {\n        const { workoutStore } = this.props.stores;\n        const { workout } = this.props;\n        const imageName = e.target.parentElement.dataset.name || e.target.dataset.name;\n        workoutStore.removeImage({\n            id: workout.id,\n            name: imageName,\n        });\n    }\n\n    removeMainImage = () => {\n        const { workout, field, updateField } = this.props;\n        updateField({ id: workout.id, field, value: {} });\n    }\n\n    setDateToNow = () => {\n        const { field, updateField, workout } = this.props;\n        const value = util.isoDate(undefined, false, false, true);\n        // updateFieldValue = ({ id, field, value, datatype, elementtype, type, isNew = false, skipTimer = false }) => {\n        updateField({ id: workout.id, field, value });\n    }\n\n    setTimeToNow = () => {\n        const { field, updateField, workout } = this.props;\n        const value = util.isoTime();\n        // updateFieldValue = ({ id, field, value, datatype, elementtype, type, isNew = false, skipTimer = false }) => {\n        updateField({ id: workout.id, field, value });\n    }\n\n    setValue = (e) => {\n        const value = e.target.parentElement.dataset.value || e.target.dataset.value;\n        if (value) {\n            const { field, updateField, workout } = this.props;\n            // updateFieldValue = ({ id, field, value, datatype, elementtype, type, isNew = false, skipTimer = false }) => {\n            updateField({ id: workout.id, field, value });\n        }\n    }\n\n    setRightValue = () => {\n        const { field, updateField, workout, rightValueReal } = this.props;\n        updateField({ id: workout.id, field, value: rightValueReal });\n    }\n\n    render() {\n        const { saved, workout, type, datalist = [], min, max, step, elementtype, field, title, icon, help, onInput, updateField, rightValue } = this.props;\n        let value = toJS(workout[field]);\n        let maxValue = max;\n        if (type === 'date') {\n            if (value) {\n                value = util.isoDate(workout[field], false, false, true);\n            }\n            if (max === 'today') {\n                maxValue = util.isoDate(undefined, false, false, true);\n            }\n        }\n        // if (type === 'time') {\n        //     if (value) {\n        //         value = util.isoTime(workout[field]);\n        //     }\n        // }\n        let displayValue;\n        let insertValue;\n        if (field === 'duration' || field === 'rest') {\n            displayValue = util.secToHms(value, true);\n        }\n        if (field === 'weather' && util.checkNested(workout, 'yr', '0', 'instant', 'details')) {\n            const yr = toJS(workout.yr[0].instant.details);\n            const yrDate = util.isoDate(workout.yr[0].date, false, false, true);\n            const workoutDate = util.isoDate(workout.date, false, false, true);\n            // air_pressure_at_sea_level, air_temperature, cloud_area_fraction, relative_humidity, wind_from_direction, wind_speed\n            if (yrDate === workoutDate) {\n                displayValue = `Yr.no: 🌡️ ${yr.air_temperature}°C, 💨 ${yr.wind_speed}m/s 🧭 ${mu.windDirection(yr.wind_from_direction)}, ☁️ ${yr.cloud_area_fraction}%, ${yr.air_pressure_at_sea_level}mb, 💦 ${yr.relative_humidity}%`;\n                insertValue = displayValue;\n            }\n        }\n        if (field === 'temperature' && util.checkNested(workout, 'yr', '0', 'instant', 'details')) {\n            const yr = toJS(workout.yr[0].instant.details);\n            const yrDate = util.isoDate(workout.yr[0].date, false, false, true);\n            const workoutDate = util.isoDate(workout.date, false, false, true);\n            // air_pressure_at_sea_level, air_temperature, cloud_area_fraction, relative_humidity, wind_from_direction, wind_speed\n            if (yrDate === workoutDate) {\n                displayValue = `Yr.no: 🌡️ ${yr.air_temperature}°C`;\n                insertValue = util.asNumber(yr.air_temperature);\n            }\n        }\n        if (type === 'file') {\n            return (\n                <div class={`form-group ${saved[`${field}.${workout.id}`] ? 'is-valid' : ''}`}>\n                    <label for={`${field}Input`}>{icon && <i class={`${icon} text-muted`} />} {title}</label>\n                    <Files saved={saved} object={workout} field={field} updateField={updateField} />\n                    {saved[`${field}.${workout.id}`] ? <div class={`valid-feedback`} style='display: block;'><Text id='workouts.changes-saved'>Endringene er lagret</Text></div> :\n                        <small id={`${field}Help`} class='form-text text-muted'>{help}</small>}\n                </div>\n            );\n        }\n        if (type === 'image') {\n            return (\n                <div class={`form-group  mb-5 pb-1 border-bottom ${saved[`${field}.${workout.id}`] ? 'is-valid' : ''}`}>\n                    <label for={`${field}Input`}>{icon && <i class={`${icon} text-muted`} />} {title}</label>\n                    <div class='container-fluid'>\n                        <div class='row'>\n                            {workout.image && workout.image.s3SmallLink && <div class='col-3 p-1'>\n                                <img loading='lazy' src={workout.image.s3SmallLink} class='img-fluid border rounded-lg' onError={this.handleImageErrored} />\n                                <button class='btn btn-sm btn-link'\n                                    onClick={this.removeMainImage}\n                                    data-name={workout.image.name}\n                                ><i class='fas fa-trash' /> Del</button>\n                                <span class='badge badge-success'>Main</span>\n                            </div>}\n                            {workout.images && workout.images.map(img => (\n                                <div class='col-3 p-1'>\n                                    <img loading='lazy' src={img.s3SmallLink} class='img-fluid' onError={this.handleImageErrored} />\n                                    <button class='btn btn-sm btn-link'\n                                        onClick={this.removeImage}\n                                        data-name={img.name}\n                                    ><i class='fas fa-trash' /> Del</button>\n                                </div>\n                            ))}\n                        </div>\n                    </div>\n                    <Images saved={saved} object={workout} field={field} updateField={updateField} autoOpen={false} />\n                    {saved[`${field}.${workout.id}`] ? <div class={`valid-feedback`} style='display: block;'>Endringene er lagret</div> :\n                        <small id={`${field}Help`} class='form-text text-muted'>{help}</small>}\n                </div>\n            );\n        }\n        if (type === 'datalist') {\n            return (\n                <div class={`form-group  mb-5 pb-1 border-bottom ${saved[`${field}.${workout.id}`] ? 'is-valid' : ''}`}>\n                    <label for={`${field}Input`}>{icon && <i class={`${icon} text-muted`} />} {title}</label>\n                    <input list={`list-${field}`} class={`form-control ${saved[`${field}.${workout.id}`] ? 'is-valid' : ''}`} id={`${field}Input`} aria-describedby={`${field}Help`}\n                        value={value}\n                        data-id={workout.id}\n                        data-field={field}\n                        onInput={onInput}\n                    />\n                    <datalist id={`list-${field}`} >\n                        {datalist.map(el => (\n                            <option value={el[0]}>{el[1]}</option>\n                        ))}\n                    </datalist>\n                    {saved[`${field}.${workout.id}`] ? <div class={`valid-feedback`} style='display: block;'><Text id='workouts.changes-saved'>Endringene er lagret</Text></div> :\n                        <small id={`${field}Help`} class='form-text text-muted'>{help}</small>}\n                </div>\n            );\n        }\n        if (type === 'duration') {\n            const hh = Math.floor(workout[field] / 3600);\n            const mi = Math.floor(workout[field] % 3600 / 60);\n            // const ss = Math.floor(newWorkout[field] % 3600 % 60);\n\n            return (\n                <div class={`form-group mb-5 pb-1 border-bottom`}>\n                    <span class='float-right'>\n                        <strong onClick={this.setValue} data-value={insertValue}>{displayValue}</strong>\n                    </span>\n                    <label for={`${field}Input`}>{icon && <i class={`${icon} text-muted`} />} {title}</label>\n                    <div class='form-row'>\n                        <div class='form-group col-3 offset-3'>\n                            <input class={`form-control text-right`} id={`${field}Input`} aria-describedby={`${field}Help`}\n                                onInput={this.onInputDuration}\n                                name={`${field}-hours`}\n                                value={hh}\n                                type='number'\n                                min='0'\n                                max='24'\n                            />\n                        </div>\n                        <div class='form-group col-3'>\n                            <input class={`form-control`} id={`${field}Input`} aria-describedby={`${field}Help`}\n                                onInput={this.onInputDuration}\n                                name={`${field}-minutes`}\n                                value={mi}\n                                type='number'\n                                min='0'\n                                max='59'\n                            />\n                        </div>\n                    </div>\n                    <small id={`${field}Help`} class='form-text text-muted'>{help}</small>\n                </div>\n            );\n        }\n        if (type === 'toggle') {\n            return (\n                <div class={`form-group ${saved[`${field}.${workout.id}`] ? 'is-valid' : ''}`}>\n                    <label for={`${field}Input`}>{icon && <i class={`${icon} text-muted`} />} {title}</label>\n                    <div class='custom-control custom-switch'>\n                        <input type='checkbox'\n                            class='custom-control-input'\n                            id={`${field}Input`}\n                            value={value === 1 ? 0 : 1}\n                            data-id={workout.id}\n                            data-field={field}\n                            onInput={onInput}\n                            checked={value == 1 ? 'checked' : ''}\n                        />\n                        <label class='custom-control-label' for={`${field}Input`} />\n                    </div>\n                    {saved[`${field}.${workout.id}`] ? <div class={`valid-feedback`} style='display: block;'><Text id='workouts.changes-saved'>Endringene er lagret</Text></div> :\n                        <small id={`${field}Help`} class='form-text text-muted'>{help}</small>}\n                </div>\n            );\n        }\n\n        return (\n            <div class={`form-group  mb-5 pb-1 border-bottom ${saved[`${field}.${workout.id}`] ? 'is-valid' : ''}`}>\n                {type === 'date' && <span class='float-right text-muted font-weight-lighter' onClick={this.setDateToNow}>I dag <i class='far fa-check-circle' /></span>}\n                {type === 'time' && <span class='float-right text-muted font-weight-lighter' onClick={this.setTimeToNow}>Nå <i class='far fa-check-circle' /></span>}\n                {rightValue && <span class='float-right text-muted font-weight-lighter' onClick={this.setRightValue}>{rightValue}</span>}\n\n                <label for={`${field}Input`}>{icon && <i class={`${icon} text-muted`} />} {title}</label>\n                {displayValue && <span class='float-right'>\n                    <strong onClick={this.setValue} data-value={insertValue}>{displayValue}</strong>\n                </span>}\n                <input type={type} class={`form-control ${saved[`${field}.${workout.id}`] ? 'is-valid' : ''}`} id={`${field}Input`} aria-describedby={`${field}Help`}\n                    min={min}\n                    max={maxValue}\n                    step={step}\n                    value={value}\n                    data-id={workout.id}\n                    data-field={field}\n                    data-type={type}\n                    data-elementtype={elementtype}\n                    onInput={onInput}\n                />\n                {saved[`${field}.${workout.id}`] ? <div class={`valid-feedback`} style='display: block;'><Text id='workouts.changes-saved'>Endringene er lagret</Text></div> :\n                    <small id={`${field}Help`} class='form-text text-muted'>{help}</small>}\n            </div>\n        );\n    }\n}\n\n@observer\nclass AdminInfo extends Component {\n    render() {\n\t\tconst { workoutStore } = this.props.stores;\n\t\tconst { workout = {} } = workoutStore;\n\n        const firstPoint = mu.getFirstPoint(workout);\n        const midPoint = mu.getMidPoint(workout, 0.5);\n        const endPoint = mu.getMidPoint(workout, 1);\n\n\t\tconst { tracks = [] } = workout;\n\t\tconst firstTrackPoint = tracks[0];\n\t\tconst lastTrackPoint = tracks[tracks.length - 1];\n\n\t\tlet duration;\n\t\tif (firstTrackPoint && lastTrackPoint) {\n\t\t\tconst startDate = new Date(firstTrackPoint.timestamp);\n\t\t\tconst startTime = startDate.getTime() / 1000;\n\t\t\tconst endDate = new Date(lastTrackPoint.timestamp);\n\t\t\tconst endTime = endDate.getTime() / 1000;\n\t\t\tduration = endTime - startTime;\n\t\t}\n\n        return (\n            <div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3'>\n                <div class='alert alert-warning'>\n                    <h5>Admin info</h5>\n\t\t\t\t\t<xmp>\n                        firstPoint: {firstPoint.join(', ')}<br />\n                        midPoint: {midPoint.join(', ')}<br />\n                        endPoint: {endPoint.join(', ')}<br />\n\t\t\t\t\t\t<br />\n\t\t\t\t\t\tduration: {util.secToHms(workout.duration)}<br />\n\t\t\t\t\t\t<br />\n\t\t\t\t\t\t<strong>Tracking info</strong><br />\n\t\t\t\t\t\tduration: {util.secToHms(duration)}<br />\n\t\t\t\t\t\t<br />\n\t\t\t\t\t</xmp>\n\t\t\t\t\t<div class='d-flex align-content-start flex-wrap'>\n\t\t\t\t\t\t{tracks && tracks.map(t => <span class='ml-1'>\n\t\t\t\t\t\t\t{t.coords.accuracy}\n\t\t\t\t\t\t</span>)}\n\t\t\t\t\t</div>\n\t\t\t\t\t<xmp>\n\t\t\t\t\t\t<br />\n\t\t\t\t\t\tfirstTrackPoint:<br />\n\t\t\t\t\t\t{JSON.stringify(firstTrackPoint, null, 4)}<br />\n\t\t\t\t\t\t<br />\n\t\t\t\t\t\tlastTrackPoint:<br />\n\t\t\t\t\t\t{JSON.stringify(lastTrackPoint, null, 4)}<br />\n\t\t\t\t\t\t<br />\n\t\t\t\t\t</xmp>\n                </div>\n            </div>\n        );\n    }\n}\n\n@observer\nclass WorkoutDetail extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            ...initialState,\n            submenu: props.submenu || 'totals',\n        };\n        this.updateTimer = {};\n\t\tthis.inputRef = {};\n    }\n\n    loadWorkout = async (props = this.props) => {\n\t\tconst { workoutStore } = this.props.stores;\n\t\tconst { showAdminInfo } = this.state;\n\t\tconst addData = ['publicTeams', 'publicUsers'];\n\t\tif (showAdminInfo) {\n\t\t\taddData.push('geocluster');\n\t\t}\n        await workoutStore.load(props.workout, false, { addData });\n\t\tconst { workout } = workoutStore;\n\t\tworkoutStore.plotGeocluster();\n\n\t\t// if (workout.isInProgress > 0) {\n\t\t// \tconst reloadLastEpoch = Math.floor(new Date().getTime() / 1000);\n\t\t// \tthis.setState({\n\t\t// \t\treloadIsActive: true,\n\t\t// \t\treloadLastEpoch,\n\t\t// \t}, () => this.tickReloadTimeer());\n\t\t// \t// Set reload timer\n\t\t// \tthis.updateTimer.reload = setTimeout(async () => {\n\t\t// \t\tconst reloadLastEpoch = Math.floor(new Date().getTime() / 1000);\n\t\t// \t\tthis.setState({ reloadLastEpoch });\n\t\t// \t\tthis.loadWorkout();\n\t\t// \t}, RELOAD_INTERVAL_IN_SEC * 1000);\n\t\t// }\n    }\n\n\ttickReloadTimeer() {\n\t\tconst { reloadIsActive, reloadLastEpoch } = this.state;\n        if (reloadIsActive) {\n\t\t\tconst now = Math.floor(new Date().getTime() / 1000);\n\t\t\tconst reloadInSec = RELOAD_INTERVAL_IN_SEC - (now - reloadLastEpoch);\n\t\t\tthis.setState({ reloadInSec });\n\t\t\tsetTimeout(() => this.tickReloadTimeer(), 1000);\n        }\n\t\treturn false;\n    }\n\n    updateField = (e) => {\n        const { id, field, type, elementtype, isNew } = e.target.dataset;\n        const value = e.target.value;\n        this.updateFieldValue({ id: parseInt(id, 10), field, value, type, elementtype, isNew });\n    }\n\n    updateFieldValue = async ({ id, field, value, datatype, elementtype, type, isNew = false, skipTimer = false }) => {\n        const { workoutStore } = this.props.stores;\n        let newValue = value;\n        let localObjectValue = value;\n        const { workout } = workoutStore;\n        if (field === 'images') {\n            if (Array.isArray(workout.images) && Array.isArray(value)) {\n                localObjectValue = [...workout.images, ...value];\n            }\n        }\n        if (datatype === 'array' && !Array.isArray(value)) {\n            if (elementtype === 'number') {\n                newValue = value.split(',').map(e => parseFloat(e) || e);\n            } else  {\n                newValue = value.split(',');\n            }\n            // console.log('updateFieldValue', id, field, value, datatype, elementtype);\n        }\n        if (isNew) {\n            workoutStore.updateObjectKeyValue('newWorkout', field, value);\n        } else {\n            workoutStore.updateField(id, field, localObjectValue);\n            if (skipTimer) {\n                await this.doUpdateField(id, field, newValue);\n            } else {\n                clearTimeout(this.updateTimer[field]);\n                this.updateTimer[field] = setTimeout(async () => {\n                    this.doUpdateField(id, field, newValue);\n                }, 500);\n            }\n        }\n\n        // GPX update stuff\n        if (field === 'gpx' && workout && util.checkNested(workout, 'gpx', 'gpxInfo')) {\n            const { totalDistance, maxSpeed, avgSpeed, ascent, decent, duration, rest, startLatlng, endLatlng } = workout.gpx.gpxInfo;\n            const updateObject = {};\n            if (duration) {\n                workoutStore.updateField(id, 'duration', duration);\n                updateObject.duration = duration;\n            }\n            if (rest) {\n                workoutStore.updateField(id, 'rest', rest);\n                updateObject.rest = rest;\n            }\n            if (totalDistance) {\n                workoutStore.updateField(id, 'distanceKm', util.roundTo(totalDistance, 10));\n                updateObject.distanceKm = util.roundTo(totalDistance, 10);\n            }\n            if (maxSpeed) {\n                workoutStore.updateField(id, 'speedmax', util.roundTo(maxSpeed, 10));\n                updateObject.speedmax = util.roundTo(maxSpeed, 10);\n            }\n            if (avgSpeed) {\n                workoutStore.updateField(id, 'speedAvg', util.roundTo(avgSpeed, 10));\n                updateObject.speedAvg = util.roundTo(avgSpeed, 10);\n            }\n            if (ascent) {\n                workoutStore.updateField(id, 'elevation', ascent);\n                updateObject.elevation = ascent;\n            }\n            if (decent) {\n                workoutStore.updateField(id, 'decent', decent);\n                updateObject.decent = decent;\n            }\n            if (startLatlng) {\n                workoutStore.updateField(id, 'startLatlng', startLatlng);\n                updateObject.startLatlng = startLatlng;\n            }\n            if (endLatlng) {\n                workoutStore.updateField(id, 'endLatlng', endLatlng);\n                updateObject.endLatlng = endLatlng;\n            }\n            await workoutStore.save(updateObject, workout.id);\n        }\n    }\n\n    async doUpdateField(id, field, value) {\n        const { workoutStore } = this.props.stores;\n        if (id && field) {\n            await workoutStore.saveField(id, field, value);\n        }\n    }\n\n    // loadWorkoutDetail = async ({ workout }) => {\n\t// \tconst { workoutStore } = this.props.stores;\n    //     workoutStore.load(workout.id);\n    // }\n\n\tshowModal = (e) => {\n        e.stopPropagation();\n        e.preventDefault();\n        const img = e.target.dataset.image;\n        const imgXXL = e.target.dataset.imagexxl;\n\t\tconst thumb = e.target.dataset.thumb;\n        const name = e.target.dataset.name;\n        const title = e.target.dataset.title;\n        const date = e.target.dataset.date;\n        this.setState({\n            displayModal: true,\n            currentImage: img,\n            currentImageXXL: imgXXL,\n            thumb,\n            name,\n            title,\n            date,\n        });\n    }\n\n    closeModal = () => {\n        this.setState({\n            displayModal: false,\n        });\n    }\n\n\tdeleteWorkout = async () => {\n\t\tconst { workoutStore } = this.props.stores;\n\t\tconst { workout } = workoutStore;\n        await workoutStore.saveField(workout.id, 'offline', 1);\n\t\tPubSub.publish(topics.STATUS_MESSAGE, {\n\t\t\tmessage: 'Workout was deleted',\n\t\t\ttype: 'success',\n\t\t\ticon: 'fas fa-check',\n\t\t});\n        route(`/workouts/list`);\n\t}\n\n\tduplicateWorkout = async () => {\n\t\tconst { workoutStore } = this.props.stores;\n\t\tconst { workout } = workoutStore;\n\t\tconst response = await workoutStore.duplicateWorkout({ id: workout.id });\n\t\tif (response && response.id) {\n\t\t\tPubSub.publish(topics.STATUS_MESSAGE, {\n\t\t\t\tmessage: 'Workout was duplicated successfully',\n\t\t\t\ttype: 'success',\n\t\t\t\ticon: 'fas fa-check',\n\t\t\t});\n\t\t\troute(`/workouts/${response.id}`);\n\t\t}\n\t}\n\n\tmakeTrack = async () => {\n\t\tconst { workoutStore } = this.props.stores;\n\t\tconst { workout } = workoutStore;\n\t\tconst response = await workoutStore.makeTrackFromWorkout({ id: workout.id });\n\t\tif (response && response.id) {\n\t\t\tPubSub.publish(topics.STATUS_MESSAGE, {\n\t\t\t\tmessage: 'Track was created successfully',\n\t\t\t\ttype: 'success',\n\t\t\t\ticon: 'fas fa-check',\n\t\t\t});\n\t\t\troute(`/tracks/edit/${response.id}`);\n\t\t}\n\t}\n\n\tlikeWorkout = async () => {\n\t\tconst { workoutStore } = this.props.stores;\n\t\tconst { workout } = workoutStore;\n\t\tconst response = await workoutStore.likeWorkout({ id: workout.id });\n\n        if (response && response.status === 200) {\n\t\t\t// this.loadWorkoutDetail({ workout });\n\t\t}\n\t}\n\n\ttoggleAddComment = (e) => {\n\t\tconst workoutId = e.target.parentElement.dataset.id || e.target.dataset.id;\n\t\tconst { showAddComment } = this.state;\n\t\tthis.setState({\n\t\t\tshowAddComment: !showAddComment,\n\t\t}, () => {\n\t\t\tif (this.inputRef[workoutId]) {\n\t\t\t\tthis.inputRef[workoutId].focus();\n\t\t\t}\n\t\t});\n\t}\n\n\ttoggleAdminInfo = () => {\n\t\tconst { userStore } = this.props.stores;\n\t\tconst { isAdmin } = userStore;\n\t\tif (isAdmin) {\n\t\t\tconst { showAdminInfo } = this.state;\n\t\t\tthis.setState({\n\t\t\t\tshowAdminInfo: !showAdminInfo,\n\t\t\t}, () => {\n\t\t\t\tthis.loadWorkout();\n\t\t\t});\n\t\t}\n\t}\n\n\tchooseSubmenu = (e) => {\n\t\tconst submenu = e.target.parentElement.dataset.menu || e.target.dataset.menu;\n\t\tthis.setState({ submenu });\n\t}\n\n\tshowStateDetail = (e) => {\n\t\tconst data = e.target.closest('div').dataset;\n\t\tthis.setState({\n\t\t\tstateDetail: {\n\t\t\t\t...data,\n\t\t\t},\n\t\t});\n\t}\n\n\treimportStravaWorkout = async () => {\n        const { workoutStore } = this.props.stores;\n\t\tconst { workout } = workoutStore;\n\t\tawait workoutStore.reimportStravaWorkout(workout.stravaId, workout.id);\n        this.loadWorkout();\n    }\n\n\treimportGarminWorkout = async () => {\n        const { workoutStore } = this.props.stores;\n\t\tconst { workout } = workoutStore;\n\t\tawait workoutStore.reimportGarminWorkout(workout.garminId, workout.id);\n        this.loadWorkout();\n    }\n\n\treCalculateGpxData = async () => {\n\t\tconst { recalculated } = this.state;\n\t\tif (recalculated) {\n\t\t\treturn true;\n\t\t}\n\t\tconst { workoutStore } = this.props.stores;\n\t\tconst { workout } = workoutStore;\n\t\tthis.setState({ recalculated: true });\n        await workoutStore.reLoad(workout.id);\n    }\n\n\ttoggleMapSize = () => {\n\t\tconst { mapHeight } = this.state;\n\t\tif (mapHeight === initialState.mapHeight) {\n\t\t\tthis.setState({ mapHeight: initialState.mapMaxHeight });\n\t\t} else {\n\t\t\tthis.setState({ mapHeight: initialState.mapHeight });\n\t\t}\n\t}\n\n\tfinishWorkout = async () => {\n\t\tconst { workoutStore } = this.props.stores;\n\t\tawait workoutStore.cordovaSaveTracking();\n\t\tconst { workout } = workoutStore;\n        const updateObject = {\n            isInProgress: 0,\n        };\n        await workoutStore.save(updateObject, workout.id);\n\t\tthis.loadWorkout();\n\t}\n\n\tsendGpxFile = async () => {\n\t\tconst { workoutStore } = this.props.stores;\n\t\tconst { workout } = workoutStore;\n\n\t\tawait workoutStore.sendGpxFile(workout.id);\n\t\tthis.setState({\n\t\t\tgpxFileSent: true,\n\t\t});\n\t}\n\n\tshareLink = (e) => {\n        const { url, title, text } = e.target.closest('button').dataset;\n        const { appState } = this.props.stores;\n        appState.shareUrl({ url, title, text });\n    }\n\n\t// Overlay functions\n    onTeamClick = (e, teamid) => {\n        e.preventDefault();\n        e.stopPropagation();\n        this.setState({\n            showTeam: teamid,\n        });\n        return false;\n    }\n\n    hideTeam = () => {\n        this.setState({\n            showTeam: null,\n        });\n    }\n\n    onUserClick = (e, userid) => {\n        e.preventDefault();\n        e.stopPropagation();\n        return false;\n    }\n\n    onDogClick = (e, dogid, dogs) => {\n        e.preventDefault();\n        e.stopPropagation();\n        this.setState({\n            showDog: dogid,\n            dogs,\n        });\n        return false;\n    }\n\n    hideDog = () => {\n        this.setState({\n            showDog: null,\n        });\n    }\n\n    back = () => {\n        const { history } = this.props.stores;\n        history.goBack();\n    }\n\n    componentDidMount() {\n        this.loadWorkout();\n\t\t// this.addNavigation();\n    }\n\n\tcomponentWillReceiveProps(nextProps) {\n        // console.log('componentWillReceiveProps', nextProps);\n        if (nextProps.workout !== this.props.workout) {\n            this.loadWorkout(nextProps);\n        }\n    }\n\n\tcomponentWillUnmount() {\n\t\tclearTimeout(this.updateTimer.reload);\n\t}\n\n    //     const { workoutStore } = this.props.stores;\n\t// \tworkoutStore.cleanupMemory();\n    // }\n\n\t// // Swipe navigation\n\t// addNavigation = () => {\n\t// \tconsole.log('addNavigation');\n    //     const { appState, workoutStore } = this.props.stores;\n\t// \tappState.setSwipeRight(() => {\n\t// \t\tconsole.log('swipeRight');\n\t// \t\tconst { workoutStore } = this.props.stores;\n\t// \t\tconst { workout } = this.props;\n\t// \t\tconst workoutNavigation = workoutStore.getWorkoutNavigation(parseInt(workout, 10)) || {};\n\t// \t\troute(`/workouts/${workoutNavigation.previous.id}`);\n\t// \t});\n\t// \tappState.setSwipeLeft(() => {\n\t// \t\tconsole.log('swipeLeft');\n\t// \t\tconst { workoutStore } = this.props.stores;\n\t// \t\tconst { workout } = this.props;\n\t// \t\tconst workoutNavigation = workoutStore.getWorkoutNavigation(parseInt(workout, 10)) || {};\n\t// \t\troute(`/workouts/${workoutNavigation.next.id}`);\n\t// \t});\n\t// }\n\n\t// componentWillUnmount() {\n\t// \tconsole.log('removeNavigation');\n\t// \tconst { appState } = this.props.stores;\n\t// \tappState.setSwipeRight();\n\t// \tappState.setSwipeLeft();\n\t// }\n\t// // /Swipe navigation\n\n\trender() {\n\t\tconst { workoutStore, userStore, appState } = this.props.stores;\n\t\tconst { mapColorMode, mapRangeMin, mapRangeMax, isCordova, hasShareApi, viewmode } = appState;\n\t\tconst { user, isAdmin } = userStore;\n\t\tconst { submenu, showAddComment, showAdminInfo, mapHeight, reloadInSec, reloadLastEpoch, stateDetail, gpxFileSent,\n            showTeam,\n            showDog,\n\t\t\trecalculated,\n\t\t} = this.state;\n\t\tconst reloadPercent = Math.floor(util.normalizeBetween(reloadInSec, 0, RELOAD_INTERVAL_IN_SEC, 0, 100));\n\t\tconst { workout, saved, waypoints2 = [], waypoints3 = [] } = workoutStore;\n\t\tconst { likes = [], comments = [] } = workout;\n        const { language = 'en' } = user;\n\t\tconst team = userStore.findTeam(workout.team, true) || {};\n\t\tconst teamAmbition = userStore.findTeamAmbition({ ambition: team.ambitions, language });\n        const teamType = userStore.findTeamType({ type: team.type, language });\n        const workoutType = userStore.findWorkoutType({ type: workout.type, language });\n\t\tconst workoutTypeIcon = userStore.findWorkoutType({ type: workout.type, field: 'icon' });\n\t\tconst track = userStore.findTrack(workout.track);\n\t\tconst workoutEquipment = userStore.findEquipment({ equipment: workout.equipment, language });\n\t\tconst workoutEquipmentIcon = userStore.findEquipment({ equipment: workout.equipment, field: 'icon' });\n\n\t\tconst dogs = userStore.findDogs(workout.dogs);\n\t\tconst mushers = userStore.findMushers(workout.mushers);\n\t\tconst intensity = userStore.findIntensity({ code: workout.intensity, language }) || {};\n\t\tconst workoutNavigation = workoutStore.getWorkoutNavigation(workout.id) || {};\n\t\tconst hasLikedWorkout = workout.likes && workout.likes.findIndex(e => e.user === user.id) > -1;\n\t\tconst { gpxInfo = {}, gpx = { gpxInfo: {} } } = workout;\n\t\tconst { weightedTotalKcal = 0, loadIndex = 0 } = gpxInfo;\n\t\tconst loadMultiplier = loadIndex / 100;\n\t\tconst kcalMultiplier = gpxInfo.totalKcalRelated / 100;\n        const teamNames = workout.teams ? workout.teams.map(e => userStore.findTeam(e)) : [];\n        let batteryUsage;\n        if (workout && workout.gpxInfo && workout.gpxInfo.battegryLevelStart) {\n            batteryUsage = (workout.gpxInfo.battegryLevelStart - workout.gpxInfo.battegryLevelEnd) * 100;\n        }\n\n\t\tconst images = [];\n        if (workout.mapImage) {\n            images.push({\n                ...workout.mapImage,\n                type: 'map',\n            });\n        }\n        if (workout.images) {\n            const imgs = toJS(workout.images);\n            images.push(...imgs);\n        }\n\n\t\tlet showReimport = false;\n\n\t\tconst views = mu.getViews(workout.statistics);\n\n\t\tconst musherImages = [];\n        if (workout.mushers && workout.mushers.length > 1) {\n            workout.mushers.slice(1, 10).map((musher) => {\n\t\t\t\tconst u = userStore.findMusher(musher);\n                if (u && u.images && u.images[0]) {\n                    musherImages.push(u.images[0]);\n                }\n            });\n        }\n\n        let image;\n\t\tif (workout.mushers && workout.mushers[0]) {\n\t\t\tlet firstMusher = userStore.findMusher(workout.mushers[0]);\n\t\t\tif (firstMusher && firstMusher.images && firstMusher.images[0]) {\n\t\t\t\timage = firstMusher.images[0];\n\t\t\t}\n        } else if (team.image && team.image.s3SmallLink) {\n            image = team.image;\n        } else if (team.images && team.images[0] && team.images[0].s3SmallLink) {\n            image = team.images[0];\n        } else if (workout.image && workout.image.s3SmallLink) {\n            image = workout.image;\n        }\n\n\t\treturn (<>\n\n            {showTeam && <Overlay>\n                <TeamsPublicDetail stores={this.props.stores} teamid={showTeam} marginTop={'0px;'} marginBottom={'0px;'} back={this.hideTeam} hideTeam={this.hideTeam} />\n            </Overlay>}\n\n            {showDog && <Overlay>\n                <DogPublicDetail stores={this.props.stores} dogid={showDog} marginTop={'0px;'} marginBottom={'0px;'} back={this.hideDog} dogs={dogs} />\n            </Overlay>}\n\n\t\t\t<div class='container-fluid' style={`margin-bottom: ${MARGIN_BOTTOM}; margin-top: ${MARGIN_TOP};`}>\n                <div class='d-flex justify-content-between mb-2'>\n                    <div>\n\t\t\t\t\t\t<button class='btn btn-link float-left pl-0 fixed-top text-primary'\n                            style={`top: ${MARGIN_TOP_BACK}; left: 5px; font-size: 35px; width: 45px;`}\n\t\t\t\t\t\t\tonClick={this.back}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<i class='fas fa-arrow-circle-left' />\n\t\t\t\t\t\t</button>\n                    </div>\n                    <div>\n                        <h5 class='text-muted'>&nbsp;</h5>\n                    </div>\n                    <div>\n                        {workout.isLocked === 1 ? <>\n\t\t\t\t\t\t\t<i class='fas fa-lock text-danger' style='font-size: 1.5em;' />\n\t\t\t\t\t\t\t{isAdmin && <>\n\t\t\t\t\t\t\t\t<a class='btn btn-primary float-right'\n\t\t\t\t\t\t\t\t\thref={`/workouts/edit/${workout.id}`}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<i class='fas fa-edit' /> <Text id='workouts.admin-edit'>Admin edit</Text>\n\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t</>}\n\t\t\t\t\t\t</> : <>\n\t\t\t\t\t\t\t<a class='btn btn btn-primary float-right mt-1'\n\t\t\t\t\t\t\t\thref={`/workouts/edit/${workout.id}`}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<i class='fas fa-edit' /> <Text id='workouts.edit'>Endre</Text>\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t</>}\n                    </div>\n                </div>\n\n\t\t\t\t<div class='d-flex justify-content-between mb-2'>\n                    <div class='text-muted'>\n\t\t\t\t\t\t{workoutNavigation && workoutNavigation.previous && <a href={`/workouts/${workoutNavigation.previous.id}`} class='text-muted'>\n\t\t\t\t\t\t\t<i class='fas fa-arrow-circle-left' />\n\t\t\t\t\t\t</a>}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class='text-muted'>\n\t\t\t\t\t\t{workoutNavigation.total > 0 && <>\n\t\t\t\t\t\t\t{workoutNavigation.idx + 1} / {workoutNavigation.total}\n\t\t\t\t\t\t</>}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class='text-muted'>\n\t\t\t\t\t\t{workoutNavigation && workoutNavigation.next && <a href={`/workouts/${workoutNavigation.next.id}`} class='text-muted'>\n\t\t\t\t\t\t\t<i class='fas fa-arrow-circle-right' />\n\t\t\t\t\t\t</a>}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class='row'>\n\t\t\t\t\t<div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3'>\n\t\t\t\t\t\t<div class='d-flex mb-2'>\n\t\t\t\t\t\t\t<div class={`position-relative text-center border rounded-circle imageRounded ${getWorkoutColor(workout)}`}\n                                style={`${image ? `background-image: url(\"${image.s3SmallLink}\"); background-size: cover;` : ''} border-width: 3px !important;`}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{!image && <i class={`${getWorkoutIcon(workout)} text-${intensity.class ? intensity.class : 'muted'} mt-3`} style='font-size: 40px;' />}\n\n                                {musherImages && musherImages.map((img, idx) => <>\n                                    <div\n                                        class='position-absolute rounded-circle imageRounded border imageRoundedThumb border-white'\n                                        style={`\n                                            background-image: url(\"${img.s3SmallLink}\");\n                                            background-size: cover;\n                                            bottom: -3px;\n                                            left: ${-5 + (idx * 10)}px;\n                                        `}\n                                    />\n                                </>)}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class='flex-grow-1 pl-3'>\n\t\t\t\t\t\t\t\t<h5 class='my-0'>\n\t\t\t\t\t\t\t\t\t{workout.name}\n\t\t\t\t\t\t\t\t\t{workout.isInProgress > 0 && <>\n\t\t\t\t\t\t\t\t\t\t<span class='position-relative ml-3'>\n\t\t\t\t\t\t\t\t\t\t\t{workout.isInProgress === 1 && <div class='spinner-grow text-success position-absolute' style='top: -5px; left: -6px;' role='status' />}\n\t\t\t\t\t\t\t\t\t\t\t{/* {workout.isInProgress === 2 && <i class='fas fa-stop-circle text-warning position-absolute' style='top: 0px; left: 0px;' />} */}\n\t\t\t\t\t\t\t\t\t\t\t{/* {reloadInSec > 0 && <div class='position-absolute' style='top: -5px; left: -5px;'>\n\t\t\t\t\t\t\t\t\t\t\t\t<Gauge key={`gauge-reload-page`}\n\t\t\t\t\t\t\t\t\t\t\t\t\tcolor='primary'\n\t\t\t\t\t\t\t\t\t\t\t\t\tradius={15}\n\t\t\t\t\t\t\t\t\t\t\t\t\tshowPercentText={false}\n\t\t\t\t\t\t\t\t\t\t\t\t\tpercent={reloadPercent}\n\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t</div>} */}\n\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t<i class='fas fa-stop-circle float-right text-warning' style='font-size: 1.5em; cursor: pointer; pointer-events: inherit;' onClick={this.finishWorkout} />\n\t\t\t\t\t\t\t\t\t</>}\n\n\t\t\t\t\t\t\t\t\t{isCordova && showAdminInfo && isAdmin && <>\n\t\t\t\t\t\t\t\t\t\t<a href={`/workouts/tracking/${workout.id}`} class='ml-4'>\n\t\t\t\t\t\t\t\t\t\t\t<i class='far fa-play-circle' />\n\t\t\t\t\t\t\t\t\t\t\t<Text id='footer.workouts-continue'>Continue</Text>\n\t\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t</>}\n\t\t\t\t\t\t\t\t</h5>\n\t\t\t\t\t\t\t\t{workout.garminId && <div class={`float-right ml-2 text-center border rounded-circle imageRounded imageRoundedIcon`} style={`background-image: url('./assets/garmin-connect.png');`} />}\n\t\t\t\t\t\t\t\t{workout.stravaId && <div class={`float-right ml-2 text-center border rounded-circle imageRounded imageRoundedIcon`} style={`background-image: url('./assets/strava-icon.png');`} />}\n\n\t\t\t\t\t\t\t\t{workout.team && userStore.findTeam(workout.team)}\n\t\t\t\t\t\t\t\t{teamNames && teamNames.length > 0 && <small class='font-weight-lighter'>\n                                    , {teamNames.map((name, idx) => <>{idx > 0 ? ', ' : ''}{name}</>)}\n                                </small>}\n\t\t\t\t\t\t\t\t<br />\n\n\t\t\t\t\t\t\t\t<small class='text-muted'>\n\t\t\t\t\t\t\t\t\t{util.isoDate(workout.date, false, false, false)}\n\t\t\t\t\t\t\t\t</small>\n\t\t\t\t\t\t\t\t{intensity.class && <span class={`badge badge-${intensity.class} ml-2`}>{intensity.name}</span>}\n\t\t\t\t\t\t\t\t{workout.sledWeight > 0 && <small class='ml-3 text-muted'>\n\t\t\t\t\t\t\t\t\t<i class='fas fa-sleigh' /> <Text id='workouts.sledWeight'>Sledevekt</Text>: <Weight stores={this.props.stores} value={workout.sledWeight} />\n\t\t\t\t\t\t\t\t</small>}\n\t\t\t\t\t\t\t\t{batteryUsage > 0 && <small class='text-muted ml-3'><i class='fas fa-battery-three-quarters' /> {util.format(batteryUsage, 1)}% used</small>}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 my-1'>\n\t\t\t\t\t\t{workout.comment && <div class='mb-3'>\n\t\t\t\t\t\t\t<Markdown markdown={mu.replaceImages(workout.comment, workout.images, language)} markdownOpts={mu.getMarkdownOptions()} />\n\t\t\t\t\t\t</div>}\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 my-1'>\n\t\t\t\t\t\t<div class='row'>\n\t\t\t\t\t\t\t<div class='w-100 overflow-hidden'>\n                                <div\n                                    class='d-flex flex-row flex-nowrap pb-2 px-1'\n                                    style='overflow: auto; scroll-snap-type: x mandatory;'\n                                >\n\t\t\t\t\t\t\t\t\t{workout.isInProgress > 0 && <div class='col px-0 pt-2'>\n\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\tclass={`btn btn-block rounded-pill-left rounded-none ${submenu === 'current' ? 'btn-primary' : 'btn-outline-primary'} text-nowrap`}\n\t\t\t\t\t\t\t\t\t\t\tstyle='text-overflow: ellipsis; overflow: hidden;'\n\t\t\t\t\t\t\t\t\t\t\tdata-menu='current'\n\t\t\t\t\t\t\t\t\t\t\tonClick={this.chooseSubmenu}\n\t\t\t\t\t\t\t\t\t\t><i class='fas fa-tachometer-alt' /> <Text id='workouts.current'>Akkurat nå</Text></button>\n                                        {submenu === 'current' && <ScrollIntoView horizontal={'center'} vertical={'end'} />}\n\t\t\t\t\t\t\t\t\t</div>}\n\t\t\t\t\t\t\t\t\t<div class='col px-0 pt-2'>\n\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\tclass={`btn btn-block ${workout.isInProgress > 0 ? '' : 'rounded-pill-left'} rounded-none ${submenu === 'totals' ? 'btn-primary' : 'btn-outline-primary'} text-nowrap`}\n\t\t\t\t\t\t\t\t\t\t\tstyle='text-overflow: ellipsis; overflow: hidden;'\n\t\t\t\t\t\t\t\t\t\t\tdata-menu='totals'\n\t\t\t\t\t\t\t\t\t\t\tonClick={this.chooseSubmenu}\n\t\t\t\t\t\t\t\t\t\t><i class='fas fa-tachometer-alt' /> <Text id='workouts.totals'>Totaler</Text></button>\n                                        {submenu === 'totals' && <ScrollIntoView horizontal={'center'} vertical={'end'} />}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div class='col px-0 pt-2'>\n\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\tclass={`btn btn-block rounded-none ${submenu === 'map' ? 'btn-primary' : 'btn-outline-primary'} text-nowrap`}\n\t\t\t\t\t\t\t\t\t\t\tstyle='text-overflow: ellipsis; overflow: hidden;'\n\t\t\t\t\t\t\t\t\t\t\tdata-menu='map'\n\t\t\t\t\t\t\t\t\t\t\tonClick={this.chooseSubmenu}\n\t\t\t\t\t\t\t\t\t\t><i class='fas fa-tachometer-alt' /> <Text id='workouts.map'>Map</Text></button>\n                                        {submenu === 'map' && <ScrollIntoView horizontal={'center'} vertical={'end'} />}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div class='col px-0 pt-2'>\n\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\tclass={`btn btn-block rounded-none ${submenu === 'analysis' ? 'btn-primary' : 'btn-outline-primary'} text-nowrap`}\n\t\t\t\t\t\t\t\t\t\t\tstyle='text-overflow: ellipsis; overflow: hidden;'\n\t\t\t\t\t\t\t\t\t\t\tdata-menu='analysis'\n\t\t\t\t\t\t\t\t\t\t\tonClick={this.chooseSubmenu}\n\t\t\t\t\t\t\t\t\t\t><i class='fas fa-chart-area' /> <Text id='workouts.analysis'>Analyser</Text></button>\n                                        {submenu === 'analysis' && <ScrollIntoView horizontal={'center'} vertical={'end'} />}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div class='col px-0 pt-2'>\n\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\tclass={`btn btn-block rounded-none ${submenu === 'images' ? 'btn-primary' : 'btn-outline-primary'} text-nowrap`}\n\t\t\t\t\t\t\t\t\t\t\tstyle='text-overflow: ellipsis; overflow: hidden;'\n\t\t\t\t\t\t\t\t\t\t\tdata-menu='images'\n\t\t\t\t\t\t\t\t\t\t\tonClick={this.chooseSubmenu}\n\t\t\t\t\t\t\t\t\t\t><i class='fas fa-images' /> <Text id='workouts.images'>Bilder</Text></button>\n                                        {submenu === 'images' && <ScrollIntoView horizontal={'center'} vertical={'end'} />}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div class='col px-0 pt-2'>\n\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\tclass={`btn btn-block rounded-none ${submenu === 'dogs' ? 'btn-primary' : 'btn-outline-primary'} text-nowrap`}\n\t\t\t\t\t\t\t\t\t\t\tstyle='text-overflow: ellipsis; overflow: hidden;'\n\t\t\t\t\t\t\t\t\t\t\tdata-menu='dogs'\n\t\t\t\t\t\t\t\t\t\t\tonClick={this.chooseSubmenu}\n\t\t\t\t\t\t\t\t\t\t><i class='fas fa-dog' /> <Text id='workouts.dogs'>Hunder</Text></button>\n                                        {submenu === 'dogs' && <ScrollIntoView horizontal={'center'} vertical={'end'} />}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div class='col px-0 pt-2'>\n\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\tclass={`btn btn-block rounded-none ${submenu === 'handlers' ? 'btn-primary' : 'btn-outline-primary'} text-nowrap`}\n\t\t\t\t\t\t\t\t\t\t\tstyle='text-overflow: ellipsis; overflow: hidden;'\n\t\t\t\t\t\t\t\t\t\t\tdata-menu='handlers'\n\t\t\t\t\t\t\t\t\t\t\tonClick={this.chooseSubmenu}\n\t\t\t\t\t\t\t\t\t\t><i class='fas fa-user' /> <Text id='workouts.handlers'>Handlere</Text></button>\n                                        {submenu === 'handlers' && <ScrollIntoView horizontal={'center'} vertical={'end'} />}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div class='col px-0 pt-2'>\n\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\tclass={`btn btn-block rounded-none ${submenu === 'gpx' ? 'btn-primary' : 'btn-outline-primary'} text-nowrap`}\n\t\t\t\t\t\t\t\t\t\t\tstyle='text-overflow: ellipsis; overflow: hidden;'\n\t\t\t\t\t\t\t\t\t\t\tdata-menu='gpx'\n\t\t\t\t\t\t\t\t\t\t\tonClick={this.chooseSubmenu}\n\t\t\t\t\t\t\t\t\t\t><i class='fas fa-user' /> <Text id='workouts.gpx'>GPX</Text></button>\n                                        {submenu === 'gpx' && <ScrollIntoView horizontal={'center'} vertical={'end'} />}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div class='col px-0 pt-2'>\n\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\tclass={`btn btn-block rounded-pill-right rounded-none ${submenu === 'advanced' ? 'btn-primary' : 'btn-outline-primary'} text-nowrap`}\n\t\t\t\t\t\t\t\t\t\t\tstyle='text-overflow: ellipsis; overflow: hidden;'\n\t\t\t\t\t\t\t\t\t\t\tdata-menu='advanced'\n\t\t\t\t\t\t\t\t\t\t\tonClick={this.chooseSubmenu}\n\t\t\t\t\t\t\t\t\t\t><i class='fas fa-cogs' /> <Text id='workouts.advanced'>advanced</Text></button>\n                                        {submenu === 'advanced' && <ScrollIntoView horizontal={'center'} vertical={'end'} />}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 my-3'>\n\t\t\t\t\t\t{isAdmin && <>\n\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\tclass='btn btn-link btn-block'\n\t\t\t\t\t\t\t\tonClick={this.toggleAdminInfo}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\tShow admin details\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t</>}\n\t\t\t\t\t</div>\n\n\t\t\t\t\t{submenu === 'map' && <>\n\t\t\t\t\t\t<div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 my-3'>\n\t\t\t\t\t\t\t{workout && workout.gpx && <>\n\t\t\t\t\t\t\t\t<button class='btn btn-sm btn-link float-right' onClick={this.toggleMapSize}>\n\t\t\t\t\t\t\t\t\tToggle map size\n\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t<div class='clearfix'>\n\t\t\t\t\t\t\t\t\t<div class='' style={`height: ${mapHeight + 40}px;`}>\n\t\t\t\t\t\t\t\t\t\t<Map\n\t\t\t\t\t\t\t\t\t\t\tstores={this.props.stores}\n\t\t\t\t\t\t\t\t\t\t\tmapId={`${workout.id}-${mapHeight}`}\n\t\t\t\t\t\t\t\t\t\t\tgeojson={workout.gpx.geoJSON}\n\t\t\t\t\t\t\t\t\t\t\tskipGeojson={false}\n\t\t\t\t\t\t\t\t\t\t\tgpxInfo={workout.gpxInfo}\n\t\t\t\t\t\t\t\t\t\t\theight={mapHeight}\n\t\t\t\t\t\t\t\t\t\t\tmapColorMode={mapColorMode}\n\t\t\t\t\t\t\t\t\t\t\tmapRangeMin={mapRangeMin}\n\t\t\t\t\t\t\t\t\t\t\tmapRangeMax={mapRangeMax}\n\t\t\t\t\t\t\t\t\t\t\tkey={`workout-map-${reloadLastEpoch}`}\n\t\t\t\t\t\t\t\t\t\t\twaypoints2={waypoints2}\n\t\t\t\t\t\t\t\t\t\t\twaypoints3={waypoints3}\n\t\t\t\t\t\t\t\t\t\t\tfullscreenMap={true}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</>}\n\t\t\t\t\t\t\t{track && track.gpx && !(workout && workout.gpx) && <>\n\t\t\t\t\t\t\t\t<div class='clearfix' style={`height: ${mapHeight}px;`}>\n\t\t\t\t\t\t\t\t\t<Map\n\t\t\t\t\t\t\t\t\t\tstores={this.props.stores}\n\t\t\t\t\t\t\t\t\t\tmapId={`${track.id}-${mapHeight}`}\n\t\t\t\t\t\t\t\t\t\tgeojson={track.gpx.geoJSON}\n\t\t\t\t\t\t\t\t\t\tskipGeojson={false}\n\t\t\t\t\t\t\t\t\t\tgpxInfo={track.gpx.gpxInfo}\n\t\t\t\t\t\t\t\t\t\theight={mapHeight}\n\t\t\t\t\t\t\t\t\t\tmapColorMode={mapColorMode}\n\t\t\t\t\t\t\t\t\t\tmapRangeMin={mapRangeMin}\n\t\t\t\t\t\t\t\t\t\tmapRangeMax={mapRangeMax}\n\t\t\t\t\t\t\t\t\t\tkey={`workout-map-${reloadLastEpoch}`}\n\t                                    fullscreenMap={true}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</>}\n\n\t\t\t\t\t\t\t<div class='text-center'>\n\t\t\t\t\t\t\t\t<small class='text-muted'>\n\t\t\t\t\t\t\t\t\t{workout.weather}\n\t\t\t\t\t\t\t\t\t{!workout.weather && <>\n\t\t\t\t\t\t\t\t\t\t{util.format(workout.temperature, 1)}°C\n\t\t\t\t\t\t\t\t\t</>}\n\t\t\t\t\t\t\t\t</small>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</>}\n\n\t\t\t\t\t{submenu === 'current' && <>\n\t\t\t\t\t\t<div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3'>\n\t\t\t\t\t\t\t<div class='row mt-2'>\n\t\t\t\t\t\t\t\t<div class='col text-center' style='line-height: 1.0em;'>\n\t\t\t\t\t\t\t\t\t<small class='text-muted'><i class='fas fa-clock ml-2' /> <Text id='workouts.duration'>Vargihet</Text></small>\n\t\t\t\t\t\t\t\t\t<h3>\n\t\t\t\t\t\t\t\t\t\t{util.secToHms(workout.duration)}\n\t\t\t\t\t\t\t\t\t</h3>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class='col text-center' style='line-height: 1.0em;'>\n\t\t\t\t\t\t\t\t\t<small class='text-muted'><i class='fas fa-clock ml-2' /> <Text id='workouts.rest'>Hvile</Text></small>\n\t\t\t\t\t\t\t\t\t<h3 class='text-muted'>\n\t\t\t\t\t\t\t\t\t\t{util.secToHms(workout.rest)}\n\t\t\t\t\t\t\t\t\t</h3>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class='row mt-2'>\n\t\t\t\t\t\t\t\t<div class='col text-center' style='line-height: 1.0em;'>\n\t\t\t\t\t\t\t\t\t<small class='text-muted'><i class='fas fa-tachometer-alt ml-2' /> <Text id='workouts.avgspeed'>Gj.fart</Text></small>\n\t\t\t\t\t\t\t\t\t<h3>\n\t\t\t\t\t\t\t\t\t\t<Speed stores={this.props.stores} value={workout.speedAvg} />\n\t\t\t\t\t\t\t\t\t</h3>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class='col text-center' style='line-height: 1.0em;'>\n\t\t\t\t\t\t\t\t\t<small class='text-muted'><i class='fas fa-tachometer-alt ml-2' /> <Text id='workouts.currentspeed'>Fart</Text></small>\n\t\t\t\t\t\t\t\t\t<h3>\n\t\t\t\t\t\t\t\t\t\t<Speed stores={this.props.stores} value={workout.currentSpeed} />\n\t\t\t\t\t\t\t\t\t</h3>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class='row mt-2'>\n\t\t\t\t\t\t\t\t<div class='col  text-center' style='line-height: 1.0em;'>\n\t\t\t\t\t\t\t\t\t<small class='text-muted'><i class='fas fa-road ml-2' /> <Text id='workouts.distance'>Distanse</Text></small>\n\t\t\t\t\t\t\t\t\t<h3>\n\t\t\t\t\t\t\t\t\t\t<Distance stores={this.props.stores} value={workout.distanceKm} />\n\t\t\t\t\t\t\t\t\t</h3>\n\t\t\t\t\t\t\t\t\t{gpxInfo.calculatedTotalDistance > 0 && Math.abs(workout.distanceKm - gpxInfo.calculatedTotalDistance) > 1 && <small class='text-muted' style='line-height: 0.8em;'>\n\t\t\t\t\t\t\t\t\t\t<Text id='workouts.kcal-calculated'>Beregnet:</Text> {util.format(gpxInfo.calculatedTotalDistance, 1)} km <br />\n\t\t\t\t\t\t\t\t\t</small>}\n\t\t\t\t\t\t\t\t\t{isAdmin && showAdminInfo && gpxInfo.calculatedTotalDistance > 0 && <small class='text-danger' style='line-height: 0.8em;'>\n\t\t\t\t\t\t\t\t\t\tgpxInfo.calculatedTotalDistance: {util.format(gpxInfo.calculatedTotalDistance, 2)} km <br />\n\t\t\t\t\t\t\t\t\t</small>}\n\t\t\t\t\t\t\t\t\t{isAdmin && showAdminInfo && gpx.gpxInfo && gpx.gpxInfo.totalDistance > 0 && <small class='text-danger' style='line-height: 0.8em;'>\n\t\t\t\t\t\t\t\t\t\tgpx.gpxInfo.totalDistance: {util.format(gpx.gpxInfo.totalDistance, 2)} km <br />\n\t\t\t\t\t\t\t\t\t</small>}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class='col  text-center' style='line-height: 1.0em;'>\n\t\t\t\t\t\t\t\t\t<small class='text-muted'><i class='fas fa-mountain ml-2' /> <Text id='workouts.ascend'>Stigning</Text></small>\n\t\t\t\t\t\t\t\t\t<h3>\n\t\t\t\t\t\t\t\t\t\t<Elevation stores={this.props.stores} value={workout.elevation} />\n\t\t\t\t\t\t\t\t\t</h3>\n\t\t\t\t\t\t\t\t\t{gpxInfo.calculatedAscend > 0 && Math.abs(workout.elevation - gpxInfo.calculatedAscend) > 50 && <small class='text-muted' style='line-height: 0.8em;'>\n\t\t\t\t\t\t\t\t\t\t<Text id='workouts.kcal-calculated'>Beregnet:</Text> {util.format(gpxInfo.calculatedAscend, 0)} m <br />\n\t\t\t\t\t\t\t\t\t</small>}\n\t\t\t\t\t\t\t\t\t{isAdmin && showAdminInfo && gpxInfo.calculatedAscend > 0 && <small class='text-danger' style='line-height: 0.8em;'>\n\t\t\t\t\t\t\t\t\t\tgpxInfo.calculatedAscend: {util.format(gpxInfo.calculatedAscend, 0)} m <br />\n\t\t\t\t\t\t\t\t\t</small>}\n\t\t\t\t\t\t\t\t\t{isAdmin && showAdminInfo && gpxInfo.calculatedDescend > 0 && <small class='text-danger' style='line-height: 0.8em;'>\n\t\t\t\t\t\t\t\t\t\tgpxInfo.calculatedDescend: {util.format(gpxInfo.calculatedDescend, 0)} m <br />\n\t\t\t\t\t\t\t\t\t</small>}\n\t\t\t\t\t\t\t\t\t{isAdmin && showAdminInfo && gpx.gpxInfo && gpx.gpxInfo.ascent > 0 && <small class='text-danger' style='line-height: 0.8em;'>\n\t\t\t\t\t\t\t\t\t\tgpx.gpxInfo.ascent: {util.format(gpx.gpxInfo.ascent, 0)} m <br />\n\t\t\t\t\t\t\t\t\t</small>}\n\t\t\t\t\t\t\t\t\t{isAdmin && showAdminInfo && gpx.gpxInfo && gpx.gpxInfo.descent > 0 && <small class='text-danger' style='line-height: 0.8em;'>\n\t\t\t\t\t\t\t\t\t\tgpx.gpxInfo.descent: {util.format(gpx.gpxInfo.descent, 0)} m <br />\n\t\t\t\t\t\t\t\t\t</small>}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class='col-12'>\n\t\t\t\t\t\t\t<Ad stores={this.props.stores} url={this.props.url} section={submenu} />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</>}\n\n\t\t\t\t\t{submenu === 'totals' && <>\n\t\t\t\t\t\t<div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3'>\n\t\t\t\t\t\t\t{isAdmin && showAdminInfo && <div class='row mt-2'>\n\t\t\t\t\t\t\t\t<div class='col text-center' style='line-height: 1.0em;'>\n\t\t\t\t\t\t\t\t\t<small class='text-muted'><i class='fas fa-user-shield ml-2' /> <Text id='workouts.admin-info'>Admin info</Text></small>\n\t\t\t\t\t\t\t\t\t<h3>Admin</h3>\n\t\t\t\t\t\t\t\t\t{isAdmin && showAdminInfo && gpx.gpxInfo && gpx.gpxInfo.startTime > 0 && <small class='text-danger' style='line-height: 0.8em;'>\n\t\t\t\t\t\t\t\t\t\tgpx.gpxInfo.startTime: {util.isoDate(gpx.gpxInfo.startTime)} <br />\n\t\t\t\t\t\t\t\t\t\tgpx.gpxInfo.endTime: {util.isoDate(gpx.gpxInfo.endTime)} <br />\n\t\t\t\t\t\t\t\t\t</small>}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>}\n\t\t\t\t\t\t\t<div class='row mt-2'>\n\t\t\t\t\t\t\t\t<div class='col text-center' style='line-height: 1.0em;'>\n\t\t\t\t\t\t\t\t\t<small class='text-muted'><i class='fas fa-clock ml-2' /> <Text id='workouts.duration'>Vargihet</Text></small>\n\t\t\t\t\t\t\t\t\t<h3>\n\t\t\t\t\t\t\t\t\t\t{util.secToHms(workout.duration)}\n\t\t\t\t\t\t\t\t\t</h3>\n\t\t\t\t\t\t\t\t\t{isAdmin && showAdminInfo && gpxInfo.minEpoch > 0 && gpxInfo.maxEpoch > 0 && <small class='text-danger' style='line-height: 0.8em;'>\n\t\t\t\t\t\t\t\t\t\tgpxInfo.maxEpoch-minEpoch: {util.secToHms(gpxInfo.maxEpoch - gpxInfo.minEpoch)} <br />\n\t\t\t\t\t\t\t\t\t</small>}\n\t\t\t\t\t\t\t\t\t{isAdmin && showAdminInfo && gpxInfo.duration > 0 && <small class='text-danger' style='line-height: 0.8em;'>\n\t\t\t\t\t\t\t\t\t\tgpxInfo.duration: {util.secToHms(gpxInfo.duration)} <br />\n\t\t\t\t\t\t\t\t\t</small>}\n\t\t\t\t\t\t\t\t\t{isAdmin && showAdminInfo && gpx.gpxInfo && gpx.gpxInfo.endTime > 0 && gpx.gpxInfo.startTime > 0 && <small class='text-danger' style='line-height: 0.8em;'>\n\t\t\t\t\t\t\t\t\t\tgpx.gpxInfo.endTime-startTime: {util.secToHms((gpx.gpxInfo.endTime - gpx.gpxInfo.startTime) / 1000)} <br />\n\t\t\t\t\t\t\t\t\t</small>}\n\t\t\t\t\t\t\t\t\t{isAdmin && showAdminInfo && gpx.gpxInfo && gpx.gpxInfo.duration > 0 && <small class='text-danger' style='line-height: 0.8em;'>\n\t\t\t\t\t\t\t\t\t\tgpx.gpxInfo.duration: {util.secToHms(gpx.gpxInfo.duration)} <br />\n\t\t\t\t\t\t\t\t\t</small>}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class='col text-center' style='line-height: 1.0em;'>\n\t\t\t\t\t\t\t\t\t<small class='text-muted'><i class='fas fa-clock ml-2' /> <Text id='workouts.rest'>Hvile</Text></small>\n\t\t\t\t\t\t\t\t\t<h3 class='text-muted'>\n\t\t\t\t\t\t\t\t\t\t{util.secToHms(workout.rest)}\n\t\t\t\t\t\t\t\t\t</h3>\n\t\t\t\t\t\t\t\t\t{isAdmin && showAdminInfo && gpxInfo.minEpoch > 0 && gpxInfo.maxEpoch > 0 && <small class='text-danger' style='line-height: 0.8em;'>\n\t\t\t\t\t\t\t\t\t\tgpxInfo.maxEpoch-minEpoch: {util.secToHms(gpxInfo.rest)} <br />\n\t\t\t\t\t\t\t\t\t</small>}\n\t\t\t\t\t\t\t\t\t{isAdmin && showAdminInfo && gpxInfo.rest > 0 && <small class='text-danger' style='line-height: 0.8em;'>\n\t\t\t\t\t\t\t\t\t\tgpxInfo.rest: {util.secToHms(gpxInfo.rest)} <br />\n\t\t\t\t\t\t\t\t\t</small>}\n\t\t\t\t\t\t\t\t\t{isAdmin && showAdminInfo && gpx.gpxInfo && gpx.gpxInfo.rest > 0 && <small class='text-danger' style='line-height: 0.8em;'>\n\t\t\t\t\t\t\t\t\t\tgpx.gpxInfo.rest: {util.secToHms(gpx.gpxInfo.rest)} <br />\n\t\t\t\t\t\t\t\t\t</small>}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class='row mt-2'>\n\t\t\t\t\t\t\t\t<div class='col text-center' style='line-height: 1.0em;'>\n\t\t\t\t\t\t\t\t\t<small class='text-muted'><i class='fas fa-tachometer-alt ml-2' /> <Text id='workouts.avgspeed'>Gj.fart</Text></small>\n\t\t\t\t\t\t\t\t\t<h3>\n\t\t\t\t\t\t\t\t\t\t{/* {gpxInfo && gpxInfo.avgGpsMovingSpeed > 0 ? <>\n\t\t\t\t\t\t\t\t\t\t\t<Speed stores={this.props.stores} value={gpxInfo.avgMovingSpeeds * 3.6} />\n\t\t\t\t\t\t\t\t\t\t</> : <> */}\n\t\t\t\t\t\t\t\t\t\t<Speed stores={this.props.stores} value={workout.speedAvg} />\n\t\t\t\t\t\t\t\t\t\t{/* </>} */}\n\t\t\t\t\t\t\t\t\t</h3>\n\t\t\t\t\t\t\t\t\t{/* avgGpsMovingSpeed */}\n\t\t\t\t\t\t\t\t\t{isAdmin && showAdminInfo && gpxInfo.avgMovingSpeeds > 0 && <small class='text-danger' style='line-height: 0.8em;'>\n\t\t\t\t\t\t\t\t\t\tgpxInfo.avgMovingSpeeds {util.format(gpxInfo.avgMovingSpeeds * 3.6, 2)} km/t <br />\n\t\t\t\t\t\t\t\t\t</small>}\n\t\t\t\t\t\t\t\t\t{isAdmin && showAdminInfo && gpxInfo.avgGpsSpeed > 0 && <small class='text-danger' style='line-height: 0.8em;'>\n\t\t\t\t\t\t\t\t\t\tgpxInfo.avgGpsSpeed {util.format(gpxInfo.avgGpsSpeed * 3.6, 2)} km/t <br />\n\t\t\t\t\t\t\t\t\t</small>}\n\t\t\t\t\t\t\t\t\t{isAdmin && showAdminInfo && gpxInfo.avgGpsMovingSpeed > 0 && <small class='text-danger' style='line-height: 0.8em;'>\n\t\t\t\t\t\t\t\t\t\tgpxInfo.avgGpsMovingSpeed {util.format(gpxInfo.avgGpsMovingSpeed * 3.6, 2)} km/t <br />\n\t\t\t\t\t\t\t\t\t</small>}\n\t\t\t\t\t\t\t\t\t{isAdmin && showAdminInfo && gpx.gpxInfo && gpx.gpxInfo.avgSpeed > 0 && <small class='text-danger' style='line-height: 0.8em;'>\n\t\t\t\t\t\t\t\t\t\tgpx.gpxInfo.avgSpeed {util.format(gpx.gpxInfo.avgSpeed * 3.6, 2)} km/t <br />\n\t\t\t\t\t\t\t\t\t</small>}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class='col text-center' style='line-height: 1.0em;'>\n\t\t\t\t\t\t\t\t\t<small class='text-muted'><i class={`${workoutTypeIcon}`} /> <Text id='workouts.type'>Type</Text></small>\n\t\t\t\t\t\t\t\t\t<h3>\n\t\t\t\t\t\t\t\t\t\t {workoutType}\n\t\t\t\t\t\t\t\t\t</h3>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class='row mt-2'>\n\t\t\t\t\t\t\t\t<div class='col text-center' style='line-height: 1.0em;'>\n\t\t\t\t\t\t\t\t\t<small class='text-muted'><i class={`${workoutEquipmentIcon}`} /> <Text id='workouts.equipment'>Utstyr</Text></small>\n\t\t\t\t\t\t\t\t\t<h3>\n\t\t\t\t\t\t\t\t\t\t{workoutEquipment}\n\t\t\t\t\t\t\t\t\t</h3>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class='col text-center' style='line-height: 1.0em;'>\n\t\t\t\t\t\t\t\t\t<small class='text-muted'><i class='fas fa-dog ml-2' /> <Text id='workouts.dogs'>Hunder</Text></small>\n\t\t\t\t\t\t\t\t\t<h3>\n\t\t\t\t\t\t\t\t\t\t{workout.dogs && <span>{workout.dogs.length}</span>}\n\t\t\t\t\t\t\t\t\t</h3>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class='row mt-2'>\n\t\t\t\t\t\t\t\t<div class='col  text-center' style='line-height: 1.0em;'>\n\t\t\t\t\t\t\t\t\t<small class='text-muted'><i class='fas fa-road ml-2' /> <Text id='workouts.distance'>Distanse</Text></small>\n\t\t\t\t\t\t\t\t\t<h3>\n\t\t\t\t\t\t\t\t\t\t<Distance stores={this.props.stores} value={workout.distanceKm} />\n\t\t\t\t\t\t\t\t\t</h3>\n\t\t\t\t\t\t\t\t\t{gpxInfo.calculatedTotalDistance > 0 && Math.abs(workout.distanceKm - gpxInfo.calculatedTotalDistance) > 1 && <small class='text-muted' style='line-height: 0.8em;'>\n\t\t\t\t\t\t\t\t\t\t<Text id='workouts.kcal-calculated'>Beregnet:</Text> {util.format(gpxInfo.calculatedTotalDistance, 1)} km <br />\n\t\t\t\t\t\t\t\t\t</small>}\n\t\t\t\t\t\t\t\t\t{isAdmin && showAdminInfo && gpxInfo.calculatedTotalDistance > 0 && <small class='text-danger' style='line-height: 0.8em;'>\n\t\t\t\t\t\t\t\t\t\tgpxInfo.calculatedTotalDistance: {util.format(gpxInfo.calculatedTotalDistance, 2)} km <br />\n\t\t\t\t\t\t\t\t\t</small>}\n\t\t\t\t\t\t\t\t\t{isAdmin && showAdminInfo && gpx.gpxInfo && gpx.gpxInfo.totalDistance > 0 && <small class='text-danger' style='line-height: 0.8em;'>\n\t\t\t\t\t\t\t\t\t\tgpx.gpxInfo.totalDistance: {util.format(gpx.gpxInfo.totalDistance, 2)} km <br />\n\t\t\t\t\t\t\t\t\t</small>}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class='col  text-center' style='line-height: 1.0em;'>\n\t\t\t\t\t\t\t\t\t<small class='text-muted'><i class='fas fa-mountain ml-2' /> <Text id='workouts.ascend'>Stigning</Text></small>\n\t\t\t\t\t\t\t\t\t<h3>\n\t\t\t\t                        <Elevation stores={this.props.stores} value={workout.elevation} />\n\t\t\t\t\t\t\t\t\t</h3>\n\t\t\t\t\t\t\t\t\t{gpxInfo.calculatedAscend > 0 && Math.abs(workout.elevation - gpxInfo.calculatedAscend) > 50 && <small class='text-muted' style='line-height: 0.8em;'>\n\t\t\t\t\t\t\t\t\t\t<Text id='workouts.kcal-calculated'>Beregnet:</Text> {util.format(gpxInfo.calculatedAscend, 0)} m <br />\n\t\t\t\t\t\t\t\t\t</small>}\n\t\t\t\t\t\t\t\t\t{isAdmin && showAdminInfo && gpxInfo.calculatedAscend > 0 && <small class='text-danger' style='line-height: 0.8em;'>\n\t\t\t\t\t\t\t\t\t\tgpxInfo.calculatedAscend: {util.format(gpxInfo.calculatedAscend, 0)} m <br />\n\t\t\t\t\t\t\t\t\t</small>}\n\t\t\t\t\t\t\t\t\t{isAdmin && showAdminInfo && gpxInfo.calculatedDescend > 0 && <small class='text-danger' style='line-height: 0.8em;'>\n\t\t\t\t\t\t\t\t\t\tgpxInfo.calculatedDescend: {util.format(gpxInfo.calculatedDescend, 0)} m <br />\n\t\t\t\t\t\t\t\t\t</small>}\n\t\t\t\t\t\t\t\t\t{isAdmin && showAdminInfo && gpx.gpxInfo && gpx.gpxInfo.ascent > 0 && <small class='text-danger' style='line-height: 0.8em;'>\n\t\t\t\t\t\t\t\t\t\tgpx.gpxInfo.ascent: {util.format(gpx.gpxInfo.ascent, 0)} m <br />\n\t\t\t\t\t\t\t\t\t</small>}\n\t\t\t\t\t\t\t\t\t{isAdmin && showAdminInfo && gpx.gpxInfo && gpx.gpxInfo.descent > 0 && <small class='text-danger' style='line-height: 0.8em;'>\n\t\t\t\t\t\t\t\t\t\tgpx.gpxInfo.descent: {util.format(gpx.gpxInfo.descent, 0)} m <br />\n\t\t\t\t\t\t\t\t\t</small>}\n\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class='row mt-2'>\n\t\t\t\t\t\t\t\t<div class='col text-center' style='line-height: 1.0em;'>\n\t\t\t\t\t\t\t\t\t{workout.isLocked === 1 ? <>\n\t\t\t\t\t\t\t\t\t\t<i class='fas fa-lock text-danger' style='font-size: 1.5em;' />\n\t\t\t\t\t\t\t\t\t</> : <>\n\t\t\t\t\t\t\t\t\t\t{workout.stravaId && !gpxInfo.reimported && <button class='btn btn-sm btn-link text-muted'\n\t\t\t\t\t\t\t\t\t\t\tstyle='font-size: 0.8em;'\n\t\t\t\t\t\t\t\t\t\t\tonClick={this.reimportStravaWorkout}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t{showReimport = true}\n\t\t\t\t\t\t\t\t\t\t\t<i class='fas fa-sync' /> Reimport Strava data\n\t\t\t\t\t\t\t\t\t\t</button>}\n\t\t\t\t\t\t\t\t\t\t{workout.garminId && !gpxInfo.reimported && <button class='btn btn-sm btn-link text-muted'\n\t\t\t\t\t\t\t\t\t\t\tstyle='font-size: 0.8em;'\n\t\t\t\t\t\t\t\t\t\t\tonClick={this.reimportGarminWorkout}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t{showReimport = true}\n\t\t\t\t\t\t\t\t\t\t\t<i class='fas fa-sync' /> Reimport Garmin data\n\t\t\t\t\t\t\t\t\t\t</button>}\n\t\t\t\t\t\t\t\t\t\t{(isAdmin || !showReimport) && <button class={`btn btn-sm btn-link text-muted`}\n\t\t\t\t\t\t\t\t\t\t\tstyle='font-size: 0.8em;'\n\t\t\t\t\t\t\t\t\t\t\tonClick={this.reCalculateGpxData}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t<i class='fas fa-sync' /> Recalculate GPX data\n\t\t\t\t\t\t\t\t\t\t</button>}\n\t\t\t\t\t\t\t\t\t</>}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<States stores={this.props.stores} states={gpxInfo.states} duration={workout.duration} />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class='col-12'>\n\t\t\t\t\t\t\t<Ad stores={this.props.stores} url={this.props.url} section={submenu} />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</>}\n\n\t\t\t\t\t{submenu === 'analysis' && <>\n\t\t\t\t\t\t<div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3'>\n\t\t\t\t\t\t\t{(util.checkNested(workout, 'gpxInfo', 'elevations') || util.checkNested(workout, 'gpx', 'gpxInfo', 'elevations')) ? <>\n\t\t\t\t\t\t\t\t<WorkoutInfoGraph stores={this.props.stores} key={`workout-elevation-${workout.id}`} />\n\t\t\t\t\t\t\t</> : <>\n\t\t\t\t\t\t\t\t<div class='text-center text-muted'>\n\t\t\t\t\t\t\t\t\t<div class='display-1'>\n\t\t\t\t\t\t\t\t\t\t<i class='fas fa-chart-area' />\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<h3 class='font-weight-lighter'>\n\t\t\t\t\t\t\t\t\t\t<Text id='workout.no-elevation-data'>No elevation data. If you use a GPS to track your workouts you will get a nice graph here and more correct analysis of the energy usage.</Text>\n\t\t\t\t\t\t\t\t\t</h3>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</>}\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t<div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3'>\n\t\t\t\t\t\t\t{loadIndex > 0 && <div class='row mt-4'>\n\t\t\t\t\t\t\t\t<div class='col text-center'>\n\t\t\t\t\t\t\t\t\t<h5 onClick={this.toggleAdminInfo}>\n\t\t\t\t\t\t\t\t\t\t<Text id='workouts.load-index'>Belastningsindex</Text>\n\t\t\t\t\t\t\t\t\t</h5>\n\t\t\t\t\t\t\t\t\t<Gauge key={`gauge-${loadIndex}`}\n\t\t\t\t\t\t\t\t\t\tradius={100}\n\t\t\t\t\t\t\t\t\t\tshowPercentText={true}\n\t\t\t\t\t\t\t\t\t\tcolor={mu.getLoadIndexColor(util.normalizeBetween(loadIndex, 0, MAX_LOADINDEX, 0, 100))}\n\t\t\t\t\t\t\t\t\t\tpercent={Math.floor(util.normalizeBetween(loadIndex, 0, MAX_LOADINDEX, 0, 100))}\n\t\t\t\t\t\t\t\t\t\tcompleted={mu.getLoadIndexText(util.normalizeBetween(loadIndex, 0, MAX_LOADINDEX, 0, 100))}\n\t\t\t\t\t\t\t\t\t\tprefix=''\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\t{teamType && <a href={`/settings/team/${workout.team}`}><span class='badge badge-pill badge-secondary'>{teamType}</span></a>}\n\t\t\t\t\t\t\t\t\t\t{teamAmbition && <a href={`/settings/team/${workout.team}`}><span class='badge badge-pill badge-secondary ml-2'>{teamAmbition}</span></a>}<br />\n\t\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t\t{workout.stravaId && !gpxInfo.reimported && <button class='btn btn-sm btn-link text-muted'\n\t\t\t\t\t\t\t\t\t\tstyle='font-size: 0.8em;'\n\t\t\t\t\t\t\t\t\t\tonClick={this.reimportStravaWorkout}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<i class='fas fa-sync' /> <Text id='workouts.reimport-strava'>Reimport Strava data</Text>\n\t\t\t\t\t\t\t\t\t</button>}\n\t\t\t\t\t\t\t\t\t{workout.garminId && !gpxInfo.reimported && <button class='btn btn-sm btn-link text-muted'\n\t\t\t\t\t\t\t\t\t\tstyle='font-size: 0.8em;'\n\t\t\t\t\t\t\t\t\t\tonClick={this.reimportGarminWorkout}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<i class='fas fa-sync' /> <Text id='workouts.reimport-garmin'>Reimport Garmin data</Text>\n\t\t\t\t\t\t\t\t\t</button>}\n\n\t\t\t\t\t\t\t\t\t{isAdmin && showAdminInfo && <div>\n\t\t\t\t\t\t\t\t\t\t<small>\n\t\t\t\t\t\t\t\t\t\t\t<span class='badge badge-secondary mr-2'>loadIndex: {gpxInfo.loadIndex}</span>\n\t\t\t\t\t\t\t\t\t\t\t<span class='badge badge-secondary mr-2'>Max loadIndex: {MAX_LOADINDEX}</span>\n\t\t\t\t\t\t\t\t\t\t\t<span class='badge badge-secondary mr-2'>totalKcalRelated: {util.format(gpxInfo.totalKcalRelated, 1)}</span>\n\t\t\t\t\t\t\t\t\t\t\t<span class='badge badge-secondary mr-2'>typeFactor: {gpxInfo.typeFactor}</span>\n\t\t\t\t\t\t\t\t\t\t\t<span class='badge badge-secondary mr-2'>ambitionFactor: {gpxInfo.ambitionFactor}</span>\n\t\t\t\t\t\t\t\t\t\t\t<span class='badge badge-secondary mr-2'>normalSpeed: {gpxInfo.normalSpeed}</span>\n\t\t\t\t\t\t\t\t\t\t\t<span class='badge badge-secondary mr-2'>speedFactor: {util.format(gpxInfo.speedFactor, 2)}</span>\n\t\t\t\t\t\t\t\t\t\t\t<span class='badge badge-secondary mr-2'>normalDuration: {gpxInfo.normalDuration}</span>\n\t\t\t\t\t\t\t\t\t\t\t<span class='badge badge-secondary mr-2'>durationFactor: {util.format(gpxInfo.durationFactor, 2)}</span>\n\t\t\t\t\t\t\t\t\t\t\t<span class='badge badge-secondary mr-2'>intensityFactor: {util.format(gpxInfo.intensityFactor, 2)}</span>\n\t\t\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\t\t\t<small class='text-muted'>\n\t\t\t\t\t\t\t\t\t\t\t\t\tloadIndex = Math.floor(totalKcalRelated * durationFactor * speedFactor * typeFactor * ambitionFactor);\n\t\t\t\t\t\t\t\t\t\t\t\t</small>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t</small>\n\t\t\t\t\t\t\t\t\t</div>}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>}\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t<div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3'>\n\t\t\t\t\t\t\t<div class='row mt-4'>\n\t\t\t\t\t\t\t\t<div class='col text-center'>\n\t\t\t\t\t\t\t\t\t<small class='text-muted'>\n\t\t\t\t\t\t\t\t\t\t<Text id='workouts.energy-consumption-help'>Energiforbruk er regnet ut fra 1,25 kcal / kg kroppsvekt / km.</Text>\n\t\t\t\t\t\t\t\t\t</small>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class='row mt-2'>\n\t\t\t\t\t\t\t\t<div class='col  text-center'>\n\t\t\t\t\t\t\t\t\t<small class='text-muted'><i class='fas fa-balance-scale ml-2' /> <Text id='workouts.energy-consumption-total'>Energiforbruk totalt</Text></small>\n\t\t\t\t\t\t\t\t\t<h3>\n\t\t\t\t\t\t\t\t\t\t{util.format(workout.kcalBurnedTotal, 0)} <Text id='workout.kcal'>kcal</Text>\n\t\t\t\t\t\t\t\t\t</h3>\n\t\t\t\t\t\t\t\t\t{kcalMultiplier > 0 && <small class='text-muted' style='line-height: 0.8em;'>\n\t\t\t\t\t\t\t\t\t\t<Text id='workouts.kcal-calculated'>Beregnet:</Text> {util.format(workout.kcalBurnedTotal * kcalMultiplier, 0)} <Text id='workout.kcal'>kcal</Text> <br />\n\t\t\t\t\t\t\t\t\t</small>}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class='col  text-center'>\n\t\t\t\t\t\t\t\t\t<small class='text-muted'><i class='fas fa-balance-scale ml-2' /> <Text id='workouts.energy-consumption'>Energiforbruk pr hund</Text></small>\n\t\t\t\t\t\t\t\t\t<h3>\n\t\t\t\t\t\t\t\t\t\t{util.format(workout.kcalBurned, 0)} kcal\n\t\t\t\t\t\t\t\t\t</h3>\n\t\t\t\t\t\t\t\t\t{kcalMultiplier > 0 && <small class='text-muted' style='line-height: 0.8em;'>\n\t\t\t\t\t\t\t\t\t\t<Text id='workouts.kcal-calculated'>Beregnet:</Text> {util.format(weightedTotalKcal, 0)} <Text id='workout.kcal'>kcal</Text> <br />\n\t\t\t\t\t\t\t\t\t</small>}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class='row mt-2'>\n\t\t\t\t\t\t\t\t<div class='col  text-center'>\n\t\t\t\t\t\t\t\t\t<small class='text-muted'><i class='fas fa-piggy-bank ml-2' /> <Text id='workouts.energy-consumption-fat-total'>Fett totalt</Text></small>\n\t\t\t\t\t\t\t\t\t<h3>\n\t\t\t\t\t\t\t\t\t\t{util.format(workout.kcalFatGramsTotal / 1000, 1)} <Text id='workout.kg'>kg</Text>\n\t\t\t\t\t\t\t\t\t</h3>\n\t\t\t\t\t\t\t\t\t{kcalMultiplier > 0 && <small class='text-muted' style='line-height: 0.8em;'>\n\t\t\t\t\t\t\t\t\t\t<Text id='workouts.kcal-calculated'>Beregnet:</Text> {util.format(workout.kcalFatGramsTotal / 1000 * kcalMultiplier, 1)} <Text id='workout.kg'>kg</Text>\n\t\t\t\t\t\t\t\t\t</small>}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class='col  text-center'>\n\t\t\t\t\t\t\t\t\t<small class='text-muted'><i class='fas fa-piggy-bank ml-2' /> <Text id='workouts.energy-consumption-fat'>Fett pr hund</Text></small>\n\t\t\t\t\t\t\t\t\t<h3>\n\t\t\t\t\t\t\t\t\t\t{util.format(workout.kcalFatGrams / 1000, 1)} <Text id='workout.kg'>kg</Text>\n\t\t\t\t\t\t\t\t\t</h3>\n\t\t\t\t\t\t\t\t\t{kcalMultiplier > 0 && <small class='text-muted' style='line-height: 0.8em;'>\n\t\t\t\t\t\t\t\t\t\t<Text id='workouts.kcal-calculated'>Beregnet:</Text> {util.format(workout.kcalFatGrams / 1000 * kcalMultiplier, 1)} <Text id='workout.kg'>kg</Text>\n\t\t\t\t\t\t\t\t\t</small>}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class='row mt-2'>\n\t\t\t\t\t\t\t\t<div class='col  text-center'>\n\t\t\t\t\t\t\t\t\t<small class='text-muted'><i class='fas fa-drumstick-bite ml-2' /> <Text id='workouts.energy-consumption-meat-total'>Kjøtt totalt</Text></small>\n\t\t\t\t\t\t\t\t\t<h3>\n\t\t\t\t\t\t\t\t\t\t{util.format(workout.kcalMeatGramsTotal / 1000, 1)} <Text id='workout.kg'>kg</Text>\n\t\t\t\t\t\t\t\t\t</h3>\n\t\t\t\t\t\t\t\t\t{kcalMultiplier > 0 && <small class='text-muted' style='line-height: 0.8em;'>\n\t\t\t\t\t\t\t\t\t\t<Text id='workouts.kcal-calculated'>Beregnet:</Text> {util.format(workout.kcalMeatGramsTotal / 1000 * kcalMultiplier, 1)} <Text id='workout.kg'>kg</Text>\n\t\t\t\t\t\t\t\t\t</small>}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class='col  text-center'>\n\t\t\t\t\t\t\t\t\t<small class='text-muted'><i class='fas fa-drumstick-bite ml-2' /> <Text id='workouts.energy-consumption-meat'>Kjøtt pr hund</Text></small>\n\t\t\t\t\t\t\t\t\t<h3>\n\t\t\t\t\t\t\t\t\t\t{util.format(workout.kcalMeatGrams / 1000, 1)} kg\n\t\t\t\t\t\t\t\t\t</h3>\n\t\t\t\t\t\t\t\t\t{kcalMultiplier > 0 && <small class='text-muted' style='line-height: 0.8em;'>\n\t\t\t\t\t\t\t\t\t\t<Text id='workouts.kcal-calculated'>Beregnet:</Text> {util.format(workout.kcalMeatGrams / 1000 * kcalMultiplier, 1)} <Text id='workout.kg'>kg</Text>\n\t\t\t\t\t\t\t\t\t</small>}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class='row mt-2'>\n\t\t\t\t\t\t\t\t<div class='col  text-center'>\n\t\t\t\t\t\t\t\t\t<small class='text-muted'><i class='fas fa-fish ml-2' /> <Text id='workouts.energy-consumption-salmon-total'>Kjøtt totalt</Text></small>\n\t\t\t\t\t\t\t\t\t<h3>\n\t\t\t\t\t\t\t\t\t\t{util.format(workout.kcalSalmonGramsTotal / 1000, 1)} <Text id='workout.kg'>kg</Text>\n\t\t\t\t\t\t\t\t\t</h3>\n\t\t\t\t\t\t\t\t\t{kcalMultiplier > 0 && <small class='text-muted' style='line-height: 0.8em;'>\n\t\t\t\t\t\t\t\t\t\t<Text id='workouts.kcal-calculated'>Beregnet:</Text> {util.format(workout.kcalSalmonGramsTotal / 1000 * kcalMultiplier, 1)} <Text id='workout.kg'>kg</Text>\n\t\t\t\t\t\t\t\t\t</small>}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class='col  text-center'>\n\t\t\t\t\t\t\t\t\t<small class='text-muted'><i class='fas fa-fish ml-2' /> <Text id='workouts.energy-consumption-salmon'>Kjøtt pr hund</Text></small>\n\t\t\t\t\t\t\t\t\t<h3>\n\t\t\t\t\t\t\t\t\t\t{util.format(workout.kcalSalmonGrams / 1000, 1)} <Text id='workout.kg'>kg</Text>\n\t\t\t\t\t\t\t\t\t</h3>\n\t\t\t\t\t\t\t\t\t{kcalMultiplier > 0 && <small class='text-muted' style='line-height: 0.8em;'>\n\t\t\t\t\t\t\t\t\t\t<Text id='workouts.kcal-calculated'>Beregnet:</Text> {util.format(workout.kcalSalmonGrams / 1000 * kcalMultiplier, 1)} <Text id='workout.kg'>kg</Text>\n\t\t\t\t\t\t\t\t\t</small>}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class='col-12'>\n\t\t\t\t\t\t\t<Ad stores={this.props.stores} url={this.props.url} section={submenu} />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</>}\n\n\t\t\t\t\t{submenu === 'images' && <>\n\t\t\t\t\t\t<div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3'>\n\t\t\t\t\t\t\t<div class='row'>\n\t\t\t\t\t\t\t\t<ImageScroller stores={this.props.stores} images={images} />\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t<div class='col-12'>\n\t\t\t\t\t\t\t<Ad stores={this.props.stores} url={this.props.url} section={submenu} />\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t{/* <div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mb-2 mt-5 bg-light py-4 border rounded-lg'>\n\t\t\t\t\t\t\t<Input saved={saved} workout={workout} field='image' type='image'\n\t\t\t\t\t\t\t\tstores={this.props.stores}\n\t\t\t\t\t\t\t\ttitle={<Text id='workouts.photos'>Bilder</Text>}\n\t\t\t\t\t\t\t\thelp={<Text id='workouts.photos-help'>Legg til bilde fra treningen.</Text>}\n\t\t\t\t\t\t\t\tonInput={this.updateField}\n\t\t\t\t\t\t\t\tupdateField={this.updateFieldValue}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div> */}\n\t\t\t\t\t</>}\n\n\t\t\t\t\t{submenu === 'dogs' && <>\n\t\t\t\t\t\t{workout.dogsLeft && <div class='offset-0 col-12 mt-4'>\n\t\t\t\t\t\t\t<div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 px-0'>\n\t\t\t\t\t\t\t\t<h5><Text id='workouts.dogs-positions'>Posisjoner i spannet</Text></h5>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class='row'>\n\t\t\t\t\t\t\t\t<div class='col-6 p-0'>\n\t\t\t\t\t\t\t\t\t{workout.dogsLeft && workout.dogsLeft.map(dogId => {\n\t\t\t\t\t\t\t\t\t\tconst dog = userStore.findDog(dogId);\n\t\t\t\t\t\t\t\t\t\treturn <DogSimple stores={this.props.stores} dog={dog} className='ml-auto' />;\n\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class='col-6 p-0'>\n\t\t\t\t\t\t\t\t\t{workout.dogsRight && workout.dogsRight.map(dogId => {\n\t\t\t\t\t\t\t\t\t\tconst dog = userStore.findDog(dogId);\n\t\t\t\t\t\t\t\t\t\treturn <DogSimple stores={this.props.stores} dog={dog} className='mr-auto' />;\n\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>}\n\t\t\t\t\t</>}\n\n\t\t\t\t\t{submenu === 'dogs' && <>\n\t\t\t\t\t\t<div class='offset-0 col-12 mt-4'>\n\t\t\t\t\t\t\t<div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 px-0'>\n\t\t\t\t\t\t\t\t<h5><Text id='workouts.all-dogs' fields={{ total: dogs.length }}>Hundene - {dogs.length} stk</Text></h5>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t{dogs && dogs.map(dog => (\n\t\t\t\t\t\t\t\t<Dog stores={this.props.stores} dog={dog} />\n\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class='col-12'>\n\t\t\t\t\t\t\t<Ad stores={this.props.stores} url={this.props.url} section={submenu} />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</>}\n\n\t\t\t\t\t{submenu === 'handlers' && <>\n\t\t\t\t\t\t<div class='offset-0 col-12 mt-4'>\n\t\t\t\t\t\t\t<div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 px-0'>\n\t\t\t\t\t\t\t\t<h5><Text id='workouts.all-mushers' fields={{ total: mushers.length }}>Handlere - {mushers.length} stk</Text></h5>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t{mushers && mushers.map(musher => (\n\t\t\t\t\t\t\t\t<Musher stores={this.props.stores} musher={musher} />\n\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class='col-12'>\n\t\t\t\t\t\t\t<Ad stores={this.props.stores} url={this.props.url} section={submenu} />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</>}\n\n\t\t\t\t\t{submenu === 'gpx' && <>\n\t\t\t\t\t\t<div class='offset-0 col-12 mt-4'>\n\t\t\t\t\t\t\t<div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 px-0 mb-3'>\n\t\t\t\t\t\t\t\t<h5><Text id='workouts.gpx-title'>GPX</Text></h5>\n\t\t\t\t\t\t\t\t<Text id='workouts.gpx-description'>Send GPX-file to your email address.</Text>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 px-0 mb-5'>\n\t\t\t\t\t\t\t\t{gpxFileSent ? <>\n\t\t\t\t\t\t\t\t\t<i class='fas fa-check text-success' /> <Text id='workouts.gpx-file-sent'>GPX file sent via email.</Text>\n\t\t\t\t\t\t\t\t</> : <>\n\t\t\t\t\t\t\t\t\t<button class='btn btn-success' onClick={this.sendGpxFile}>\n\t\t\t\t\t\t\t\t\t\t<Text id='workouts.gpx-send'>Send GPX-file</Text>\n\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t</>}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t<div class='col-12'>\n\t\t\t\t\t\t\t<Ad stores={this.props.stores} url={this.props.url} section={submenu} />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</>}\n\n\n\t\t\t\t\t {submenu === 'advanced' && <>\n\t\t\t\t\t\t<div class='offset-0 col-12 mt-4'>\n\t\t\t\t\t\t\t<div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 px-0 mb-3'>\n\t\t\t\t\t\t\t\t<h5><Text id='workouts.advanced'>Advanced</Text></h5>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 px-0 mb-5'>\n\t\t\t\t\t\t\t\t<div class='row mt-2'>\n\t\t\t\t\t\t\t\t\t<div class='col text-center' style='line-height: 1.0em;'>\n\t\t\t\t\t\t\t\t\t\t<small class='text-muted'>\n\t\t\t\t\t\t\t\t\t\t\t<i class='fas fa-cloud-sun-rain ml-2' /> <Text id='workouts.weather'>The weather during this workout</Text>\n\t\t\t\t\t\t\t\t\t\t</small>\n\t\t\t\t\t\t\t\t\t\t<h3 class='font-weight-lighter'>\n\t\t\t\t\t\t\t\t\t\t\t{workout.weather}\n\t\t\t\t\t\t\t\t\t\t</h3>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class='row mt-4'>\n\t\t\t\t\t\t\t\t\t<div class='col text-center' style='line-height: 1.0em;'>\n\t\t\t\t\t\t\t\t\t\t<small class='text-muted'>\n\t\t\t\t\t\t\t\t\t\t\t<i class='fas fa-temperature-low ml-2' /> <Text id='workouts.temperature'>Temperature</Text>\n\t\t\t\t\t\t\t\t\t\t</small>\n\t\t\t\t\t\t\t\t\t\t<h3>\n\t\t\t\t\t\t\t\t\t\t\t<Temperature stores={this.props.stores} value={workout.temperature} />\n\t\t\t\t\t\t\t\t\t\t</h3>\n\t\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t\t{workout.sunPosition && <div class='col text-center' style='line-height: 1.0em;'>\n\t\t\t\t\t\t\t\t\t\t<small class='text-muted'>\n\t\t\t\t\t\t\t\t\t\t\t<i class='fas fa-sun ml-2' /> <Text id='workouts.periode-of-day'>Periode of day</Text>\n\t\t\t\t\t\t\t\t\t\t</small>\n\t\t\t\t\t\t\t\t\t\t<h3>\n\t\t\t\t\t\t\t\t\t\t\t{workout.sunPosition.start} - {workout.sunPosition.end}\n\t\t\t\t\t\t\t\t\t\t</h3>\n\t\t\t\t\t\t\t\t\t</div>}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class='row mt-4'>\n\t\t\t\t\t\t\t\t\t{workout.moonPosition && workout.moonPosition.start && workout.moonPosition.start.altitudeDeg > 0 && <div class='col text-center' style='line-height: 1.0em;'>\n\t\t\t\t\t\t\t\t\t\t<small class='text-muted'>\n\t\t\t\t\t\t\t\t\t\t\t{workout.moonIllumination && workout.moonIllumination.phaseIcon && <>{workout.moonIllumination.phaseIcon}</>} <Text id='workouts.moon-position'>Moon position</Text>\n\t\t\t\t\t\t\t\t\t\t</small>\n\t\t\t\t\t\t\t\t\t\t<h3>\n\t\t\t\t\t\t\t\t\t\t\t{util.format(workout.moonPosition.start.altitudeDeg, 0)}° {workout.moonPosition.end && workout.moonPosition.end.altitudeDeg > 0 && <> - {util.format(workout.moonPosition.end.altitudeDeg, 0)}°</>}\n\t\t\t\t\t\t\t\t\t\t</h3>\n\t\t\t\t\t\t\t\t\t\t{workout.moonIllumination && workout.moonIllumination.fraction && <>\n\t\t\t\t\t\t\t\t\t\t\t<div class='progress'>\n\t\t\t\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\t\t\t\tclass='progress-bar bg-warning'\n\t\t\t\t\t\t\t\t\t\t\t\t\trole='progressbar'\n\t\t\t\t\t\t\t\t\t\t\t\t\tstyle={`width: ${workout.moonIllumination.fraction * 100}%`}\n\t\t\t\t\t\t\t\t\t\t\t\t\taria-valuenow={workout.moonIllumination.fraction * 100}\n\t\t\t\t\t\t\t\t\t\t\t\t\taria-valuemin='0'\n\t\t\t\t\t\t\t\t\t\t\t\t\taria-valuemax='100'>{util.format(workout.moonIllumination.fraction * 100, 0)}%</div>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t</>}\n\t\t\t\t\t\t\t\t\t</div>}\n\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t{['beta', 'advanced', 'normal'].indexOf(viewmode) > -1 && <>\n\t\t\t\t\t\t\t\t\t<div class='row mt-4'>\n\t\t\t\t\t\t\t\t\t\t<div class='col text-center' style='line-height: 1.0em;'>\n\t\t\t\t\t\t\t\t\t\t\t<small class='text-muted'>\n\t\t\t\t\t\t\t\t\t\t\t\t<i class='fas fa-dice ml-2' /> <Text id='workouts.rating'>Workout rating</Text>\n\t\t\t\t\t\t\t\t\t\t\t</small>\n\t\t\t\t\t\t\t\t\t\t\t<h3>\n\t\t\t\t\t\t\t\t\t\t\t\t{util.format(workout.rating, 0)}\n\t\t\t\t\t\t\t\t\t\t\t</h3>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div class='col text-center' style='line-height: 1.0em;'>\n\t\t\t\t\t\t\t\t\t\t\t<small class='text-muted'>\n\t\t\t\t\t\t\t\t\t\t\t\t<i class='fas fa-dumbbell ml-2' /> <Text id='workouts.intensity'>Workout intensity</Text>\n\t\t\t\t\t\t\t\t\t\t\t</small>\n\t\t\t\t\t\t\t\t\t\t\t<h3>\n\t\t\t\t\t\t\t\t\t\t\t\t{intensity.class && <span class={`badge badge-${intensity.class} ml-2`}>{intensity.name}</span>}\n\t\t\t\t\t\t\t\t\t\t\t</h3>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</>}\n\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t{isAdmin && showAdminInfo && <>\n\t\t\t\t\t\t\t<AdminInfo stores={this.props.stores} />\n\t\t\t\t\t\t</>}\n\n\t\t\t\t\t\t<div class='col-12'>\n\t\t\t\t\t\t\t<Ad stores={this.props.stores} url={this.props.url} section={submenu} />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</>}\n\n\t\t\t\t\t{submenu !== 'advanced' && <>\n\t\t\t\t\t\t<div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-3'>\n\t\t\t\t\t\t\t<LikesAndComments\n\t\t\t\t\t\t\t\tstores={this.props.stores}\n\t\t\t\t\t\t\t\tlikes={likes}\n\t\t\t\t\t\t\t\tcomments={comments}\n\t\t\t\t\t\t\t\ttype='workout'\n\t\t\t\t\t\t\t\tonTeamClick={this.onTeamClick}\n\t\t\t\t\t\t\t\tonUserClick={this.onUserClick}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t<div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-2 mb-3'>\n\t\t\t\t\t\t\t<div class='row'>\n\t\t\t\t\t\t\t\t<div class='col text-center'>\n\t\t\t\t\t\t\t\t\t<button type='button' class={`btn btn-outline-${hasLikedWorkout ? 'primary' : 'secondary'} btn-sm btn-block ${hasLikedWorkout ? 'text-primary' : ''}`}\n\t\t\t\t\t\t\t\t\t\tonClick={this.likeWorkout}\n\t\t\t\t\t\t\t\t\t\t// disabled={hasLikedWorkout}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<i class={`${hasLikedWorkout ? 'text-primary fas' : 'far'} fa-thumbs-up`} /> <Text id='workouts.like'>Like</Text>\n\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class='col text-center'>\n\t\t\t\t\t\t\t\t\t<button type='button' class='btn btn-outline-secondary btn-sm btn-block'\n\t\t\t\t\t\t\t\t\t\tdata-id={workout.id}\n\t\t\t\t\t\t\t\t\t\tonClick={this.toggleAddComment}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<i class='fas fa-comment' /> <Text id='workouts.comment'>Comment</Text>\n\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t{workout.private ? <>\n\t\t\t\t\t\t\t\t\t<div class='col text-center'>\n\t\t\t\t\t\t\t\t\t\t<Text id='workouts.is-private'>Workout is private</Text>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</> : <>\n\t\t\t\t\t\t\t\t\t{hasShareApi ? <>\n\t\t\t\t\t\t\t\t\t\t<div class='col text-center'>\n\t\t\t\t\t\t\t\t\t\t\t<button class='btn btn-outline-secondary btn-sm btn-block text-overflow'\n\t\t\t\t\t\t\t\t\t\t\t\tonClick={this.shareLink}\n\t\t\t\t\t\t\t\t\t\t\t\tdata-url={`https://themusher.app/share/workout/${workout.uuidv4}`}\n\t\t\t\t\t\t\t\t\t\t\t\tdata-title={`title: ${workout.title}`}\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t<i class='fas fa-share' /> <Text id='story.share'>Del</Text>\n\t\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</> : <>\n\t\t\t\t\t\t\t\t\t\t<div class='col text-center'>\n\t\t\t\t\t\t\t\t\t\t\t<a class='btn btn-outline-secondary btn-sm btn-block text-overflow'\n\t\t\t\t\t\t\t\t\t\t\t\thref={`https://themusher.app/share/workout/${workout.uuidv4}`}\n\t\t\t\t\t\t\t\t\t\t\t\ttarget='_blank'\n\t\t\t\t\t\t\t\t\t\t\t\trel='noreferrer'\n\t\t\t\t\t\t\t\t\t\t\t\tdata-native\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t<i class='fas fa-share' /> <Text id='story.share'>Del</Text>\n\t\t\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</>}\n\t\t\t\t\t\t\t\t</>}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t<div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-2 mb-3'>\n\t\t\t\t\t\t\t{showAddComment && <WorkoutAddComment\n\t\t\t\t\t\t\t\tstores={this.props.stores}\n\t\t\t\t\t\t\t\tworkout={workout}\n\t\t\t\t\t\t\t\t// callback={this.loadWorkoutDetail}\n\t\t\t\t\t\t\t\tinputRef={c => this.inputRef[workout.id] = c}\n\t\t\t\t\t\t\t\tinputRefObject={this.inputRef}\n\t\t\t\t\t\t\t/>}\n\t\t\t\t\t\t\t<WorkoutComments\n\t\t\t\t\t\t\t\tstores={this.props.stores}\n\t\t\t\t\t\t\t\tworkout={workout}\n\t\t\t\t\t\t\t\t// callback={this.loadWorkoutDetail}\n\t\t\t\t\t\t\t/>\n\n\t\t\t\t\t\t\t{views > 0 && <>\n\t\t\t\t\t\t\t\t<div class='mt-2'>\n\t\t\t\t\t\t\t\t\t<Views\n\t\t\t\t\t\t\t\t\t\tstores={this.props.stores}\n\t\t\t\t\t\t\t\t\t\tviews={views}\n\t\t\t\t\t\t\t\t\t\tobject={workout}\n\t\t\t\t\t\t\t\t\t\ttype='workout'\n\t\t\t\t\t\t\t\t\t\tisTeamAdmin={true}\n\t\t\t\t\t\t\t\t\t\tisAdmin={false}\n\t\t\t\t\t\t\t\t\t\tonTeamClick={this.onTeamClick}\n\t\t\t\t\t\t\t\t\t\tonUserClick={this.onUserClick}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</>}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</>}\n\n\t\t\t\t\t{workout.isLocked === 1 ? <>\n\n\t\t\t\t\t</> : <>\n\t\t\t\t\t\t{submenu === 'advanced' && <>\n\t\t\t\t\t\t\t<div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mb-5 mt-5 border-top'>\n\t\t\t\t\t\t\t\t<h5 class='mt-5'><Text id='workouts.recalculate-title'>Recalculate data</Text></h5>\n\t\t\t\t\t\t\t\t<Text id='workouts.recalculate-help'>\n\t\t\t\t\t\t\t\t\tClick the button below if you want to recalculate this workout.<br />\n\t\t\t\t\t\t\t\t\tPlease don't overuse this function. If the calculations is not changed after 1 try,\n\t\t\t\t\t\t\t\t\tthen it's not going to change the next time either.\n\t\t\t\t\t\t\t\t</Text>\n\n\t\t\t\t\t\t\t\t<button class={`btn btn-block btn-warning mt-2 float-left ${recalculated ? 'disabled': ''}`}\n\t\t\t\t\t\t\t\t\tstyle='font-size: 0.8em;'\n\t\t\t\t\t\t\t\t\tonClick={this.reCalculateGpxData}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<i class='fas fa-sync' /> <Text id='workouts.recalculate'>Recalculate data</Text>\n\t\t\t\t\t\t\t\t</button><br />\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t<div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mb-5 mt-5 border-top'>\n\t\t\t\t\t\t\t\t<h5 class='mt-5'><Text id='workouts.duplicate-title'>Duplicate workout</Text></h5>\n\t\t\t\t\t\t\t\t<Text id='workouts.duplicate-help'>\n\t\t\t\t\t\t\t\t\tClick the button below if you want to duplicate this workout.\n\t\t\t\t\t\t\t\t\tAfter you have duplicated this workout you can edit it as a regular workout.\n\t\t\t\t\t\t\t\t</Text>\n\t\t\t\t\t\t\t\t<button class='btn btn-block btn-secondary mt-2 float-left'\n\t\t\t\t\t\t\t\t\tonClick={this.duplicateWorkout}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<i class='fas fa-copy' /> <Text id='workouts.duplicate'>Duplicate workout</Text>\n\t\t\t\t\t\t\t\t</button><br />\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t<div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mb-5 mt-5 border-top'>\n\t\t\t\t\t\t\t\t<h5 class='mt-5'><Text id='workouts.make-track-title'>Make track</Text></h5>\n\t\t\t\t\t\t\t\t<Text id='workouts.make-track-help'>\n\t\t\t\t\t\t\t\t\tUse this workout to make a track. This track can shared and downloaded as a regular track.\n\t\t\t\t\t\t\t\t</Text>\n\t\t\t\t\t\t\t\t<button class='btn btn-block btn-info mt-2 float-left'\n\t\t\t\t\t\t\t\t\tonClick={this.makeTrack}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<i class='fas fa-map-marked-alt' /> <Text id='workouts.make-track'>Make track</Text>\n\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t<div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-5 border-top'>\n\t\t\t\t\t\t\t\t<h5 class='mt-5'><Text id='workouts.delete-title'>Delete workout</Text></h5>\n\t\t\t\t\t\t\t\t<Text id='workouts.delete-help'>\n\t\t\t\t\t\t\t\t\tClick the button below to delete this workout. All data related to this workout will be lost. All team and dog statistics will also be affected.\n\t\t\t\t\t\t\t\t</Text>\n\t\t\t\t\t\t\t\t<button class='btn btn-block btn-sm btn-danger mt-2 float-right'\n\t\t\t\t\t\t\t\t\tonClick={this.deleteWorkout}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<i class='fas fa-trash' /> <Text id='workouts.delete'>Delete</Text> {workout.name}\n\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</>}\n\t\t\t\t\t</>}\n\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</>);\n\t}\n}\n\nexport default WorkoutDetail;\n","import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport { Text, Localizer, withText } from 'preact-i18n';\n\nimport mu from '../../lib/musher-util';\n\nimport LineGraph from '../../components/lineGraph';\n\n@withText((props) => ({\n    week: <Text id='workout.graph.week' />,\n    distance: <Text id='workout.graph.distance' />,\n    ascend: <Text id='workout.graph.ascend' />,\n    plan: <Text id='workout.graph.plan' />,\n}))\n@observer\nclass WorkoutInfoGraph extends Component {\n    render() {\n        const { showDebug } = this.props;\n        const { workoutStore } = this.props.stores;\n        const { workout = {} } = workoutStore;\n        const { gpx = {}, gpxInfo } = workout;\n        const { gpxInfo: subGpxInfo = {} } = gpx;\n\n        const finalGpxInfo = {\n            ...subGpxInfo,\n            ...gpxInfo,\n        };\n        const { gpsSpeeds = [] } = finalGpxInfo;\n        const { speeds = gpsSpeeds, elevations = [], temperatures = [], climbs = [], distances = [], ecor = [] } = finalGpxInfo;\n\n        let dataLeft = [];\n        let dataLeft2 = [];\n        let dataLeft3 = [];\n        let dataRight = [];\n        let dataRight3 = [];\n        const legendLeft = [];\n        const legendLeft2 = [];\n        const legendLeft3 = [];\n        const legendRight = [];\n        const legendRight3 = [];\n        const unitLeft = [];\n        const unitLeft2 = [];\n        const unitLeft3 = [];\n        const unitRight = [];\n        const unitRight3 = [];\n\n        if (elevations.length > 0) {\n            const smoothed = mu.smoothArray(elevations, 5);\n            const data = smoothed.map((e, idx) => ({\n                x: idx,\n                y: e,\n            }));\n            dataLeft.push(data);\n            legendLeft.push('Elevation');\n            unitLeft.push('m');\n        }\n        if (speeds.length > 0) {\n            const smoothed = mu.smoothArray(speeds, 3);\n            const data = smoothed.map((e, idx) => ({\n                x: idx,\n                y: e * 3.6,\n            }));\n            dataRight.push(data);\n            legendRight.push('Speed');\n            unitRight.push('km/t');\n        }\n        if (temperatures.length > 0) {\n            const smoothed = mu.smoothArray(temperatures, 2);\n            const data = smoothed.map((e, idx) => ({\n                x: idx,\n                y: e,\n            }));\n            dataLeft2.push(data);\n            legendLeft2.push('Temp');\n            unitLeft2.push('°C');\n        }\n        if (climbs.length > 0) {\n            const smoothed = mu.smoothArray(climbs, 2);\n            const data = smoothed.map((e, idx) => ({\n                x: idx,\n                y: e,\n            }));\n            dataLeft3.push(data);\n            legendLeft3.push('Climblevel');\n            unitLeft3.push('%');\n        }\n        if (ecor.length > 0) {\n            const smoothed = mu.smoothArray(ecor, 1);\n            const data = smoothed.map((e, idx) => ({\n                x: idx,\n                y: e * 1000,\n            }));\n            dataRight3.push(data);\n            legendRight3.push('ECOR (kcal/kg/km)');\n            unitRight3.push('kcal/kg/km');\n        }\n        // if (distances.length > 0) {\n        //     const smoothed = mu.smoothArray(distances, 30);\n        //     const data = smoothed.map((e, idx) => ({\n        //         x: idx,\n        //         y: e * 1000,\n        //     }));\n        //     dataRight3.push(data);\n        //     legendRight3.push('Distance');\n        //     unitRight3.push('km');\n        // }\n\n        // const firstData = dataLeft[0] || [];\n        const xTicks = [];\n        if (workout.distanceKm > 0) {\n            const xTicksRange = util.range(0, Math.ceil(finalGpxInfo.calculatedTotalDistance || workout.distanceKm), 1);\n            const partSize = Math.ceil(xTicksRange.length / 5);\n            const parts = Math.floor(xTicksRange.length / partSize);\n            // if (showDebug) {\n                // console.log({ xTicksRange, parts, partSize });\n            // }\n            for (let i = 0, l = xTicksRange.length; i < l; i += partSize) {\n                xTicks.push(xTicksRange[i]);\n            }\n            xTicks.push(xTicksRange[xTicksRange.length - 1]);\n        }\n        // if (firstData.length) {\n        //     const partSize = Math.ceil(firstData.length / 4);\n        //     const parts = Math.floor(firstData.length / partSize);\n        //     if (showDebug) {\n        //         console.log({ firstData, parts, partSize });\n        //     }\n        //     for (let i = 0, l = firstData.length; i < l; i += partSize) {\n        //         xTicks.push(firstData[i].epoch);\n        //     }\n        //     xTicks.push(firstData[firstData.length - 1].epoch);\n        // }\n        return (\n            <>\n                <div class='w-100 mt-3 mb-4'>\n                    {/* <xmp>graphWorkoutSummaryWeekDistanceCurrent: {JSON.stringify(graphWorkoutSummaryWeekDistanceCurrent, null, 4)}</xmp>\n                    <xmp>graphWorkoutSummaryWeekDistancePrev: {JSON.stringify(graphWorkoutSummaryWeekDistancePrev, null, 4)}</xmp> */}\n                    <LineGraph\n                        stores={this.props.stores}\n                        width={1000}\n                        height={200}\n                        showXTicks={1}\n                        xTicksVal={val => `${val}km`}\n                        xTicks={xTicks}\n                        paddingTop={30}\n                        lineFromXzero={true}\n                        lineFromXmax={true}\n                        // xTicksLink={'/workouts/week/'}\n\n                        dataLeft={dataLeft}\n                        legendLeft={legendLeft}\n                        dataFillLeft={[1]}\n                        // yMaxLeft={30}\n                        // yMinLeft={0}\n                        showYTicksLeft={1}\n                        yTicksLeftPostfix={' m'}\n                        unitLeft={unitLeft}\n                        avgWindowLeft={[0, 0, 0]}\n                        smoothLeft={[1, 1, 1]}\n\n                        dataRight={dataRight}\n                        legendRight={legendRight}\n                        // dataRight={[graphWorkoutSummaryWeekElevationCurrent, graphWorkoutSummaryWeekElevationPrev]}\n                        // legendRight={[`${seasonStart} ${ascend}`, `${seasonStart - 1} ${ascend}`]}\n                        showYTicksRight={dataRight.length > 0 ? 1 : 0}\n                        yTicksRightPostfix={'km/t'}\n                        unitRight={unitRight}\n                        avgWindowRight={[0, 0, 0]}\n                        smoothRight={[1, 1, 1]}\n\n                        // marker={week}\n                    />\n                </div>\n\n                {dataLeft2.length > 0 && <div class='w-100 mt-3 mb-4'>\n                    {/* <xmp>graphWorkoutSummaryWeekDistanceCurrent: {JSON.stringify(graphWorkoutSummaryWeekDistanceCurrent, null, 4)}</xmp>\n                    <xmp>graphWorkoutSummaryWeekDistancePrev: {JSON.stringify(graphWorkoutSummaryWeekDistancePrev, null, 4)}</xmp> */}\n                    <LineGraph\n                        stores={this.props.stores}\n                        width={1000}\n                        height={100}\n                        showXTicks={1}\n                        xTicksVal={val => `${val}km`}\n                        xTicks={xTicks}\n                        paddingTop={30}\n                        lineFromXzero={true}\n                        lineFromXmax={true}\n                        // xTicksLink={'/workouts/week/'}\n\n                        dataLeft={dataLeft2}\n                        legendLeft={legendLeft2}\n                        dataFillLeft={[1]}\n                        // yMaxLeft={10}\n                        // yMinLeft={-20}\n                        yMaxMinLeftRound={false}\n                        showYTicksLeft={1}\n                        yTicksLeftPostfix={' °C'}\n                        unitLeft={unitLeft2}\n                        avgWindowLeft={[0]}\n                        smoothLeft={[1]}\n                        // marker={week}\n                    />\n                </div>}\n\n                {dataLeft3.length > 0 && <div class='w-100 mt-3 mb-4'>\n                    {/* <xmp>graphWorkoutSummaryWeekDistanceCurrent: {JSON.stringify(graphWorkoutSummaryWeekDistanceCurrent, null, 4)}</xmp>\n                    <xmp>graphWorkoutSummaryWeekDistancePrev: {JSON.stringify(graphWorkoutSummaryWeekDistancePrev, null, 4)}</xmp> */}\n                    <LineGraph\n                        stores={this.props.stores}\n                        width={1000}\n                        height={200}\n                        showXTicks={1}\n                        xTicksVal={val => `${val}km`}\n                        xTicks={xTicks}\n                        paddingTop={30}\n                        lineFromXzero={true}\n                        lineFromXmax={true}\n                        // xTicksLink={'/workouts/week/'}\n\n                        dataLeft={dataLeft3}\n                        legendLeft={legendLeft3}\n                        dataFillLeft={[1]}\n                        // yMaxLeft={20}\n                        // yMinLeft={-20}\n                        yMaxMinLeftRound={false}\n                        showYTicksLeft={1}\n                        yTicksLeftPostfix={' %'}\n                        unitLeft={unitLeft3}\n                        avgWindowLeft={[0]}\n                        smoothLeft={[1]}\n                        // marker={week}\n\n                        dataRight={dataRight3}\n                        legendRight={legendRight3}\n                        // dataRight={[graphWorkoutSummaryWeekElevationCurrent, graphWorkoutSummaryWeekElevationPrev]}\n                        // legendRight={[`${seasonStart} ${ascend}`, `${seasonStart - 1} ${ascend}`]}\n                        showYTicksRight={dataRight3.length > 0 ? 1 : 0}\n                        yTicksRightVal={v => util.format(v / 1000, 2)}\n                        // yTicksRightPostfix={'kcal/kg/km'}\n                        unitRight={unitRight3}\n                        avgWindowRight={[0, 0, 0]}\n                        smoothRight={[1, 1, 1]}\n                    />\n                </div>}\n\n            </>\n        );\n    }\n}\n\nexport default WorkoutInfoGraph;\n","import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport { Text, Localizer, withText } from 'preact-i18n';\n\nimport Speed from '../../components/data/speed';\nimport Elevation from '../../components/data/elevation';\nimport Weight from '../../components/data/weight';\nimport Distance from '../../components/data/distance';\nimport Temperature from '../../components/data/temperature';\n\nimport mu from '../../lib/musher-util';\n\n@observer\nclass Dog extends Component {\n    render() {\n        const { dog } = this.props;\n\t\tconst { userStore, dogStore, appState } = this.props.stores;\n        const { isAdmin, user } = userStore;\n        const { language = 'en' } = user;\n        const { viewmode } = appState;\n\n        const currentMonth = new Date().getMonth() + 1;\n        const currentYear = new Date().getFullYear();\n\t\tconst { month = currentMonth, year = currentYear } = this.props;\n\t\tconst seasonStart = parseInt(month < 8 ? year - 1 : year, 10);\n\n        const workoutSummary = dogStore.findWorkoutSummary(dog.id, seasonStart) || {};\n        // {\"0\":{\"year\":2020,\"dog\":16,\"count\":1,\"distanceKm\":9.9,\"elevation\":202,\"duration\":0,\"speedAvg\":0}}\n        const dogStatuses = dog.statuses ? dog.statuses.map(e => userStore.findDogstatus({ status: e, language })) : [];\n        const dogVaccines = dogStore.findVaccineStatuses(dog.id);\n        const dogVaccineLogStatuses = dogStore.findVaccineLogStatuses(dog.chipId);\n        const dogHistoryStatuses = dogStore.findHistoryStatuses(dog.id);\n        const dogStatus = userStore.findDogstatus({ status: dog.status, language });\n        const dogPosition = userStore.findDogposition({ position: dog.position, language });\n        const teamNames = [];\n        if (userStore.findTeam(dog.team)) {\n            teamNames.push(userStore.findTeam(dog.team));\n        }\n        if (dog.teams) {\n            dog.teams.forEach((e) => {\n                if (userStore.findTeam(e)) {\n                    teamNames.push(userStore.findTeam(e));\n                }\n            });\n        }\n        const hasBirthday = mu.hasBirthday(dog.birth);\n        const daysUntilBirthday = dog.birth ? Math.ceil(mu.daysUntilNextBirthday(dog.birth)) : 365;\n\n        const { url = `/dogs/${dog.id}` } = this.props;\n\n        return (\n            <div class='w-100 mb-3'>\n                <div class='row'>\n                    <div class='col-12 col-sm-8 col-lg-6 offset-sm-2 offset-lg-3 d-flex mb-0 position-relative'>\n                        {/* {JSON.stringify(dog, null, 4)} */}\n                        <div class={`text-center border rounded-circle imageRounded text-muted pt-2`} style={dog.image ? `background-image: url(\"${dog.image.s3SmallLink}\"); background-size: cover;` : ''}>\n                            {/* {!dog.image && <i class='fas fa-dog mt-3' style='font-size: 40px;' />} */}\n                            {!dog.image && <span class='font-weight-lighter' style='font-size: 35px;'>{util.ucfirst(dog.name, true)}</span>}\n                        </div>\n                        <div class='flex-grow-1 pl-3 pr-2'\n                            style={`border-right: 4px solid ${userStore.findHarness(dog.harness, 'colorNonstop')} !important; line-height: 1.2em;`}\n                        >\n                            <span class='float-right'>\n                                {dogPosition && <span class={`badge badge-${dogPosition.class || 'primary'} mr-3`}>{dogPosition.icon && <i class={dogPosition.icon} />} {dogPosition.name}</span>}\n                                {daysUntilBirthday < 7 && <>\n                                    <span class='text-muted mr-2'>\n                                        <i class='fas fa-birthday-cake' /> in {daysUntilBirthday} days\n                                    </span>\n                                </>}                                \n                                {dog.birth && <span class='mr-2'>{util.age(dog.birth, dog.deceased)}</span>}\n                                {dog.gender === 'female' ? <i class='fas fa-venus' /> : <i class='fas fa-mars' />}\n                            </span>\n                            <a class='stretched-link' href={url}>\n                                <h5 class='mb-1' style='line-height: 1.0em;'>\n                                    {dog.shortname || dog.name} {dog.shortname && dog.shortname !== '' && <> - <span class='font-weight-lighter'>{dog.name}</span></>}\n                                    {hasBirthday && <>\n                                        <i class='fas fa-birthday-cake ml-3' />\n                                    </>}\n                                </h5>\n                            </a>\n                            <div>\n                                {teamNames && teamNames.length > 0 && <small class='font-weight-lighter'>\n                                    {teamNames.map((name, idx) => <>{idx > 0 ? ', ' : ''}{name}</>)}\n                                </small>}\n                                <br />\n                            </div>\n\n                            <small class='text-muted'>\n                                {/* {dog.chipId && <span class='ml-0'><i class='fas fa-microchip' /> {dog.chipId}</span>} */}\n                                {dog.history > 0 && <span class='ml-0'><i class='fas fa-file-signature' /> {dog.history.length}</span>}\n                                {dog.images > 0 && <span class='ml-2'><i class='fas fa-image' /> {dog.images.length}</span>}\n\n                                {workoutSummary && workoutSummary.distanceKm > 0 && <span class='ml-2'><i class='fas fa-road' /> <Distance stores={this.props.stores} value={workoutSummary.distanceKm} /></span>}\n                                {workoutSummary && workoutSummary.elevation > 0 && <span class='ml-2'><i class='fas fa-mountain' /> <Elevation stores={this.props.stores} value={workoutSummary.elevation} /></span>}\n                                {workoutSummary && workoutSummary.duration > 0 && <span class='ml-2'><i class='fas fa-clock' /> {util.secToHms(workoutSummary.duration, true)}</span>}\n                                {workoutSummary && workoutSummary.speedAvg > 0 && <span class='ml-2'><i class='fas fa-tachometer-alt' /> <Speed stores={this.props.stores} value={workoutSummary.speedAvg} /></span>}\n\n                                {dog.weight > 0 && <><i class='fas fa-balance-scale ml-2' /> <Weight stores={this.props.stores} value={dog.weight} /></>}\n                                {dog.bodyScore > 0 && <><i class='fas fa-dog ml-2' /> {util.format(dog.bodyScore, 1)}</>}\n                            </small>\n\n                            {['beta', 'advanced', 'normal'].indexOf(viewmode) > -1 && <>\n                                <div>\n                                    {dogVaccines && dogVaccines.map(v => (\n                                        <span class={`badge badge-success mr-2`} title={util.isoDate(v.endDate, false, false, true)}>\n                                            {v.vaccineType}\n                                            <span class='font-weight-light ml-3'>\n                                                <i class='fas fa-calendar-check' /> {util.isoDate(v.endDate, false, false, true)}                                    \n                                            </span>\n                                        </span>\n                                    ))}\n                                    {dogHistoryStatuses && dogHistoryStatuses.map(v => (\n                                        <span class={`badge badge-warning mr-2`} title={util.isoDate(v.endDate, false, false, true)}>{v.title}</span>\n                                    ))}\n                                </div>\n                            </>}\n\n                            {['beta', 'advanced'].indexOf(viewmode) > -1 && <>\n                                {dog.positions && dog.positions.lead && <div class=''>\n                                    {dog.positions.lead.distanceKm > 0 && <span class='badge badge-secondary mr-2'>\n                                        <span class='font-weight-lighter'><Text id='dogs.sort-lead'>Lead</Text>:</span> <Distance stores={this.props.stores} value={dog.positions.lead.distanceKm} />\n                                    </span>}\n                                    {dog.positions.point.distanceKm > 0 && <span class='badge badge-secondary mr-2'>\n                                        <span class='font-weight-lighter'><Text id='dogs.sort-point'>Point</Text>:</span> <Distance stores={this.props.stores} value={dog.positions.point.distanceKm} />\n                                    </span>}\n                                    {dog.positions.team.distanceKm > 0 && <span class='badge badge-secondary mr-2'>\n                                        <span class='font-weight-lighter'><Text id='dogs.sort-team'>Team</Text>:</span> <Distance stores={this.props.stores} value={dog.positions.team.distanceKm} />\n                                    </span>}\n                                    {dog.positions.wheel.distanceKm > 0 && <span class='badge badge-secondary mr-2'>\n                                        <span class='font-weight-lighter'><Text id='dogs.sort-wheel'>Wheel</Text>:</span> <Distance stores={this.props.stores} value={dog.positions.wheel.distanceKm} />\n                                    </span>}\n                                </div>}\n                            </>}\n\n                            <div class='clearfix pb-0'>\n                                {dog.specialNeeds && <span class={`badge badge-warning ml-2 mt-1 float-right`}><i class='fas fa-exclamation-triangle' /> {dog.specialNeeds}</span>}\n                                {dogStatus && <span class={`badge badge-${dogStatus.class} ml-2 mt-1 float-right`}>{dogStatus.icon && <i class={dogStatus.icon} />} {dogStatus.name}</span>}\n                                {dogStatuses && dogStatuses.map(status => <>\n                                    <span class={`badge badge-${status.class} ml-2 mt-1 float-right`}>\n                                        {status.icon && <i class={status.icon} />} {status.lang && status.lang[language] ? status.lang[language] : status.name}\n                                    </span>\n                                </>)}\n                            </div>\n\n                            {dogVaccineLogStatuses && dogVaccineLogStatuses.length > 0 && <>\n                                <div class='mt-2'>\n                                    {dogVaccineLogStatuses && dogVaccineLogStatuses.filter(e => e.chipId === dog.chipId).map((vac) => {\n                                        return (\n                                            <span class={`badge badge-${vac.inKarens ? 'warning' : 'success'} mr-2 mb-1`}>\n                                                <i class='fas fa-user-md' /> {vac.vaccineAgens.name}\n                                                {/* <span class='font-weight-lighter ml-2'> */}\n                                                    {/* <i class='fas fa-calendar-check' /> {util.isoDate(vac.vaccineAgens.durationEnd, false, false, true)} */}\n                                                    {/* {vac.inKarens && <>\n                                                        <br />\n                                                        (karens: {util.format(vac.karensDaysLeft, 0)} days left)\n                                                    </>} */}\n                                                {/* </span> */}\n                                            </span>\n                                        );\n                                    })}\n                                </div>\n                            </>}\n\n                        </div>\n                    </div>\n                </div>\n            </div>\n        );\n    }\n}\n\nexport default Dog;\n","import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\n\nimport mu from '../../lib/musher-util';\n\nconst STOP_STATUSES = [2, 9];\nconst WARN_STATUSES = [4, 8];\n\n\nfunction getFatigueLevel(wo, dog) {\n    if (dog) {\n        if (STOP_STATUSES.indexOf(dog.status) > -1) {\n            return 'danger';\n        } else if (WARN_STATUSES.indexOf(dog.status) > -1) {\n            return 'warning';\n        }\n    }\n    if (wo) {\n        if (wo.distanceKm > 50) {\n            return 'danger';\n        } else if (wo.distanceKm > 30) {\n            return 'warning';\n        }\n    }\n    return 'success';\n}\n\n@observer\nclass Dog extends Component {\n    render() {\n        const { \n            dog,\n            showWorkout,\n            showTeam,\n            showNeeds,\n            showInfo,\n            showName = true,\n            showPosition = true,\n            showAge = false,\n            className,\n            size,\n        } = this.props;\n\t\tconst { userStore, dogStore } = this.props.stores;\n        const { isAdmin, user } = userStore;\n        const { language = 'en' } = user;\n\n        if (!dog) {\n            if (size === 'small') {\n                return (\n                    <div class={`mb-1 position-relative ${className}`} style='width: 50px;'>\n                        <div class={`text-center border rounded-circle imageRounded imageRoundedSmall text-muted pt-2  mx-auto`}>\n                            <span class='font-weight-lighter' style='font-size: 20px;'>&nbsp;</span>\n                        </div>\n                        {showName && <div class='text-center'>\n                            &nbsp;\n                        </div>}\n                    </div>\n                );\n            }\n            if (size === 'medium') {\n                return (\n                    <div class={`mb-1 position-relative ${className}`} style='width: 60px;'>\n                        <div class={`text-center border rounded-circle imageRounded imageRoundedMedium text-muted pt-2  mx-auto`}>\n                            <span class='font-weight-lighter' style='font-size: 25px;'>&nbsp;</span>\n                        </div>\n                        {showName && <div class='text-center'>\n                            &nbsp;\n                        </div>}\n                    </div>\n                );\n            }\n            return (\n                <div class={`mb-2 position-relative ${className}`} style='width: 92px;'>\n                    <div class={`text-center border rounded-circle imageRounded text-muted pt-2  mx-auto`}>\n                        <span class='font-weight-lighter' style='font-size: 35px;'>&nbsp;</span>\n                    </div>\n                    {showName && <div class='text-center'>\n                        &nbsp;\n                    </div>}\n                </div>\n            );\n        }\n\n        const dogStatus = userStore.findDogstatus({ status: dog.status, language });\n        const dogPosition = userStore.findDogposition({ position: dog.position, language });\n        const workoutSummary = dogStore.findCurrentWorkoutSummary(dog.id);\n        const hasBirthday = mu.hasBirthday(dog.birth);\n        const daysUntilBirthday = Math.ceil(mu.daysUntilNextBirthday(dog.birth));\n\n        if (size === 'small') {\n            return (\n                <div class={`mb-1 position-relative ${className}`} style='width: 50px;'>\n                    <div\n                        class={`text-center border border-${getFatigueLevel(workoutSummary, dog)} rounded-circle imageRounded imageRoundedSmall mx-auto text-muted pt-2`}\n                        style={`${dog.image ? `background-image: url(\"${dog.image.s3SmallLink}\"); background-size: cover;` : ''} border-width: 2px !important;`}\n                    >\n                        {!dog.image && <span class='font-weight-lighter' style='font-size: 20px;'>{util.ucfirst(dog.name, true)}</span>}\n                    </div>\n                </div>\n            );\n        }\n        if (size === 'medium') {\n            return (\n                <div class={`mb-1 position-relative ${className}`} style='width: 60px;'>\n                    <div\n                        class={`text-center border border-${getFatigueLevel(workoutSummary, dog)} rounded-circle imageRounded imageRoundedMedium mx-auto text-muted pt-2`}\n                        style={`${dog.image ? `background-image: url(\"${dog.image.s3SmallLink}\"); background-size: cover;` : ''} border-width: 2px !important;`}\n                    >\n                        {!dog.image && <span class='font-weight-lighter' style='font-size: 20px;'>{util.ucfirst(dog.name, true)}</span>}\n                    </div>\n                </div>\n            );\n        }\n\n        return (\n            <div class={`mb-2 position-relative ${className}`} style='width: 92px;'>\n                {/* {JSON.stringify(dog, null, 4)} */}\n                {showPosition && dogPosition && <small class='position-absolute' style='left:0px; top: 50px;'>\n                    <span class={`badge badge-${dogPosition.class || 'primary'} mr-3`}>{dogPosition.icon && <i class={dogPosition.icon} />} {dogPosition.name}</span>\n                </small>}\n                <div\n                    class={`text-center border border-${getFatigueLevel(workoutSummary, dog)} rounded-circle imageRounded mx-auto text-muted pt-2`}\n                    style={`${dog.image ? `background-image: url(\"${dog.image.s3SmallLink}\"); background-size: cover;` : ''} border-width: 2px !important;`}\n                >\n                    {/* {!dog.image && <i class='fas fa-dog mt-3' style='font-size: 40px;' />} */}\n                    {!dog.image && <span class='font-weight-lighter' style='font-size: 35px;'>{util.ucfirst(dog.name, true)}</span>}\n                </div>\n                <div class='text-center' style='line-height: 1.0em;'>\n                    <small>\n                        {/* <span class='float-right'>\n                            {dog.birth && <span class='mr-2'>{util.age(dog.birth, dog.deceased)}</span>}\n                            {dog.gender === 'female' ? <i class='fas fa-venus' /> : <i class='fas fa-mars' />}\n                        </span> */}\n                        {showName && <a class='stretched-link' href={`/dogs/${dog.id}`}>\n                            <h5 class='mb-1 font-weight-light' style='line-height: 1.0em; font-size: 1.3em;'>\n                                {dog.shortname || dog.name}\n                                {hasBirthday && <>\n                                    <i class='fas fa-birthday-cake ml-3' />\n                                </>}\n                            </h5>\n                        </a>}\n\n                        {dog.birth && showAge && <>\n                            <span>\n                                {daysUntilBirthday < 7 && <>\n                                    <span class='text-muted mr-2'>\n                                        <i class='fas fa-birthday-cake' /> in {daysUntilBirthday} days\n                                    </span>\n                                </>}                                \n                                {dog.birth && <span class='mr-2'>{util.age(dog.birth, dog.deceased)}</span>}\n                                {dog.gender === 'female' ? <i class='fas fa-venus' /> : <i class='fas fa-mars' />}\n                            </span>\n                        </>}\n\n                        {showTeam && <><span class='font-weight-light'>{userStore.findTeam(dog.team)}</span><br /></>}\n\n                        {showWorkout && <small class='text-muted'>\n                            {workoutSummary && workoutSummary.distanceKm > 0 && <span class='mr-2'><i class='fas fa-road' /> {util.format(workoutSummary.distanceKm, 0)}km</span>}\n                            {workoutSummary && workoutSummary.elevation > 0 && <span class='mr-2'><i class='fas fa-mountain' /> {util.format(workoutSummary.elevation, 0)}m</span>}\n                            {workoutSummary && workoutSummary.duration > 0 && <span class='mr-2'><i class='fas fa-clock' /> {util.secToHms(workoutSummary.duration, true)}</span>}\n                            {workoutSummary && workoutSummary.speedAvg > 0 && <span class='mr-2'><i class='fas fa-tachometer-alt' /> {util.format(workoutSummary.speedAvg, 1)}km/t</span>}\n                        </small>}\n\n                        {showInfo && <small class='text-muted'>\n                            {dog.weight && <><i class='fas fa-balance-scale ml-2' /> {util.format(dog.weight, 1)} kg</>}\n                            {dog.bodyScore && <><i class='fas fa-dog ml-2' /> {util.format(dog.bodyScore, 1)}</>}\n                        </small>}\n\n                        {showNeeds && <div class='clearfix pb-0 pt-1'>\n                            {dog.specialNeeds && <span class={`badge badge-warning mr-2`}><i class='fas fa-exclamation-triangle' /> {dog.specialNeeds}</span>}\n                            {dogStatus && <span class={`badge badge-${dogStatus.class} mr-2`}>{dogStatus.icon && <i class={dogStatus.icon} />} {dogStatus.name}</span>}\n                        </div>}\n                    </small>\n                </div>\n            </div>\n        );\n    }\n}\n\nexport default Dog;\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"gaugeBackground\":\"gaugeBackground__1UGxt\",\"gauge\":\"gauge__2ZDxd\",\"success\":\"success__3UQxg\",\"primary\":\"primary__3pPV6\",\"secondary\":\"secondary__-Vrk_\",\"info\":\"info__3t5zs\",\"warning\":\"warning__1jHlR\",\"danger\":\"danger__BLVC9\",\"gaugeText\":\"gaugeText__1on-w\"};","import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport { Text, Localizer, withText } from 'preact-i18n';\n\nimport mu from '../../lib/musher-util';\n\nconst initialState = {\n\tshowAddComment: false,\n};\n\n@withText(() => ({\n    subject: <Text id='ad.subject'>Annonseforespørsel</Text>,\n    body: <Text id='ad.body'>Hei, Jeg ønsker å vite mer om annonsering i appen The Musher.</Text>,\n}))\n\n@observer\nclass Ad extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            ...initialState,\n        };\n        this.updateTimer = {};\n\t\tthis.inputRef = {};\n        this.apiServer = util.getApiServer();\n    }\n\n\tasync loadAd(props = this.props) {\n\t\tthis.setState({ isLoading: true });\n\t\tconst { adStore, workoutStore, userStore, appState } = this.props.stores;\n        const { section } = this.props;\n        const { path: url = '' } = appState;\n        const { currentTeam } = workoutStore;\n        const { user } = userStore;\n        const { language = 'en' } = user;\n        let team = {};\n        let ambitions;\n        let type;\n        let postalcode;\n        let place;\n        let country;\n        if (currentTeam) {\n            team = userStore.findTeam(currentTeam, true);\n            if (team && team.id) {\n                ambitions = userStore.findTeamAmbition({ ambition: team.ambitions, language });\n                type = userStore.findTeamType({ type: team.type, language });\n                postalcode = team.postalcode;\n                place = team.place;\n                country = team.country;\n            }\n        }\n        // console.log({ currentTeam, team, ambitions,  type, postalcode, place, country });\n        // const { url = '' } = this.props;\n        let page = url.replace(/\\d+$/, 'detail');\n        page = url.replace(/\\/\\d+/, '/detail');\n\n        // props: { \"url\": \"/\" }\n        // props: { \"url\": \"/workouts/\" }\n        // props: { \"url\": \"/workouts/4708\" }\n        // props: { \"url\": \"/dogs\" }\n        // props: { \"url\": \"/dogs/10\" }\n\n\t\tawait adStore.load({ query: { page, section }});\n        adStore.setTime();\n\t\tthis.setState({ isLoading: false });\n\t}\n\n    logClick = async () => {\n        const { adStore, userStore } = this.props.stores;\n        const { ads = [] } = adStore;\n        let id = ads.length > 0 ? ads[0].id : null;\n        const { user = {} } = userStore;\n        await adStore.logClick({ id, user: user.id });\n    }\n\n\tcomponentDidMount() {\n\t\tthis.loadAd();\n\t}\n\n    componentWillReceiveProps(nextProps) {\n        // console.log('componentWillReceiveProps', nextProps);\n        if (nextProps.path !== this.props.path) {\n            this.loadAd(nextProps);\n        }\n    }\n\n    render() {\n        const { adStore, userStore, appState } = this.props.stores;\n        const { subject, body, section } = this.props;\n        const { path } = appState;\n        const { user = {} } = userStore;\n        const { ads = [], time, adViews, adClicks } = adStore;\n        if (!user || !user.id || !ads || ads.length === 0) {\n            if (path.match(/\\/(home)/i)) {\n                return <>\n                    <div class='w-100'>\n                        <div class='row'>\n                            <div class='col-12 col-sm-8 col-lg-6 offset-sm-2 offset-lg-3 mb-0 position-relative'>\n                                <div class='border rounded-lg p-4 my-3'>\n                                    <span class='float-right display-4 text-warning'>\n                                        <i class='far fa-smile-wink' />\n                                    </span>\n                                    <h5><Text id='ad.heading'>Vil du annonsere her?</Text></h5>\n                                    <div><Text id='ad.teaser'>Det er super enkelt :)</Text></div>\n                                    <Localizer>\n                                        <a href={`mailto:post@themusher.no?subject=${subject}: ${path}: ${section}&body=${body}`} target='_blank' rel='noreferrer'>\n                                            <i class='fas fa-paper-plane' /> <Text id='ad.linktext'>Ta kontakt med The Musher</Text>\n                                        </a>\n                                    </Localizer>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </>;\n            }\n            return <></>;\n        }\n        const ad = ads[0];\n        return (\n            <>\n                <div class='w-100'>\n                    <div class='row'>\n                        <div class='col-12 col-sm-8 col-lg-6 offset-sm-2 offset-lg-3 mb-0 position-relative'>\n                            <div>\n                                <small><small class='text-muted'>\n                                    <Text id='ad.ad'>Annonse</Text>:\n                                    <img src={`${this.apiServer}/api/ads/${ad.id}/view?user=${user.id}&time=${time}`} style='width: 1; height: 1; opacity: 0.1;' />\n                                </small></small>\n                            </div>\n                            {ad.target ? <>\n                                <a\n                                    class='stretched-link'\n                                    href={`${ad.url}`}\n                                    target={ad.target || '_blank'}\n                                    rel='noopener noreferrer'\n                                    onClick={this.logClick}\n                                    native\n                                >\n                                    {ad.images && ad.images[0] && <>\n                                        <img src={ad.images[0].s3LargeLink} class='img-fluid rounded-lg' />\n                                    </>}\n                                </a>                            \n                            </> : <>\n                                <a\n                                    class='stretched-link'\n                                    href={`${ad.url}`}\n                                    onClick={this.logClick}\n                                >\n                                    {ad.images && ad.images[0] && <>\n                                        <img src={ad.images[0].s3LargeLink} class='img-fluid rounded-lg' />\n                                    </>}\n                                </a>\n                            </>}\n                        </div>\n                    </div>\n                </div>\n            </>\n        );\n    }\n}\n\nexport default Ad;\n","import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport { route } from 'preact-router';\nimport { Text, Localizer } from 'preact-i18n';\nimport { toJS } from 'mobx';\nimport Markdown from 'preact-markdown';\n\nimport mu from '../../lib/musher-util';\n\nimport Speed from '../../components/data/speed';\nimport Elevation from '../../components/data/elevation';\nimport Weight from '../../components/data/weight';\nimport Distance from '../../components/data/distance';\nimport Temperature from '../../components/data/temperature';\n\nfunction getStateColor(state) {\n\tswitch (state) {\n\t\tcase 'running':\n\t\t\treturn 'primary';\n\t\tcase 'rest':\n\t\t\treturn 'warning';\n\t\tcase 'restTrail':\n\t\t\treturn 'danger';\n\t}\n}\n\nfunction getStateIcon(state) {\n\tswitch (state) {\n\t\tcase 'running':\n\t\t\treturn 'fas fa-running';\n\t\tcase 'rest':\n\t\t\treturn 'fas fa-male';\n\t\tcase 'restTrail':\n\t\t\treturn 'fas fa-bed';\n\t}\n}\n\n@observer\nclass States extends Component {\n    hideDetail = (e) => {\n        e.preventDefault();\n        e.stopPropagation();\n        this.setState({\n\t\t\tstateDetail: {\n\t\t\t\tstate: '',\n                idx: 0,\n\t\t\t},\n\t\t});\n    }\n\n\tshowStateDetail = (e) => {\n        e.preventDefault();\n        e.stopPropagation();\n\t\tconst data = e.target.closest('div').dataset;\n\t\tthis.setState({\n\t\t\tstateDetail: {\n\t\t\t\t...data,\n\t\t\t},\n\t\t});\n\t}\n\n    nextStateDetail = (e) => {\n        e.preventDefault();\n        e.stopPropagation();\n        const { states, duration } = this.props;\n        const { stateDetail = {} } = this.state;\n        const currentIdx = parseInt(stateDetail.idx, 10);\n        const nextIdx = currentIdx + 1;\n        const nextState = states[nextIdx];\n        if (nextState) {\n            this.setState({\n                stateDetail: {\n                    idx: nextIdx,\n                    state: nextState.state,\n                    duration: nextState.duration,\n                    distance: nextState.distance,\n                    avgspeed: nextState.avgSpeed,\n                    statespeeds: nextState.stateSpeeds,\n                    point: nextState.point,\n                    start: nextState.start,\n                    end: nextState.end,\n                    percent: util.normalizeBetween(nextState.duration, 0, duration, 0, 100),\n                },\n            });\n        }\n    }\n\n   prevStateDetail = (e) => {\n        e.preventDefault();\n        e.stopPropagation();\n        const { states, duration } = this.props;\n        const { stateDetail = {} } = this.state;\n        const currentIdx = parseInt(stateDetail.idx, 10);\n        const prevIdx = currentIdx - 1;\n        const prevState = states[prevIdx];\n        if (prevState) {\n            this.setState({\n                stateDetail: {\n                    idx: prevIdx,\n                    state: prevState.state,\n                    duration: prevState.duration,\n                    distance: prevState.distance,\n                    avgspeed: prevState.avgSpeed,\n                    statespeeds: prevState.stateSpeeds,\n                    point: prevState.point,\n                    start: prevState.start,\n                    end: prevState.end,\n                    percent: util.normalizeBetween(prevState.duration, 0, duration, 0, 100),\n                },\n            });\n        }\n    }\n\n    render() {\n        const { states, duration, height = '20px', showText = true } = this.props;\n        const { stateDetail = {} } = this.state;\n        const locale = 'en-GB';\n\n        return (<>\n            <div class='row'>\n                {states && <div class='col-12 px-0'>\n                    <div class='progress' style={`height: ${(stateDetail && stateDetail.idx) ? '20px' : height};`}>\n                        {states.map((state, idx) => {\n                            const value = Math.ceil(util.normalizeBetween(state.duration, 0, duration, 0, 100));\n                            let currentWidth = value;\n                            if (stateDetail && stateDetail.idx == idx) {\n                                currentWidth = value < 10 ? 10 : value;\n                            }\n                            return (<>\n                                <div\n                                    class={`progress-bar bg-${getStateColor(state.state)}`}\n                                    role='progressbar'\n                                    style={`width: ${currentWidth}%`}\n                                    aria-valuenow={value}\n                                    aria-valuemin='0'\n                                    aria-valuemax='100'\n                                    data-idx={idx}\n                                    data-state={state.state}\n                                    data-duration={state.duration}\n                                    data-distance={state.distance}\n                                    data-avgspeed={state.avgSpeed}\n                                    data-statespeeds={state.stateSpeeds}\n                                    data-point={state.point}\n                                    data-start={state.start}\n                                    data-end={state.end}\n                                    data-percent={util.normalizeBetween(state.duration, 0, duration, 0, 100)}\n                                    onClick={this.showStateDetail}\n                                >\n                                    {showText ? <>\n                                        <nobr>\n                                            {value > 10 && <>\n                                                {state.state === 'rest' ? <>\n                                                    {util.secToHms(state.duration, true)}\n                                                </> : <>\n                                                    {util.format(state.distance / 1000, 0)}km\n                                                </>}\n                                            </>}\n                                            {(stateDetail && stateDetail.idx == idx) ? <i class={`fas fa-hand-point-down text-${state.state === 'rest' ? 'dark' : 'warning'} mx-2`} /> : ''}\n                                        </nobr>\n                                    </> : <>\n                                        {(stateDetail && stateDetail.idx == idx) ? <i class={`fas fa-hand-point-down text-${state.state === 'rest' ? 'dark' : 'warning'} mx-2`} /> : ''}\n                                    </>}\n                                </div>\n                            </>);\n                        })}\n                    </div>\n                    {stateDetail && stateDetail.state && <>\n                        <div class='card position-relative'>\n                            <span class='position-absolute' style='top: 0px; right: 5px;'>\n                                <small class='text-muted'>\n                                    <i class={getStateIcon(stateDetail.state)} /> {util.format(stateDetail.percent, 1)}%\n                                </small>\n                            </span>\n                            <div class='card-body'>\n                                {stateDetail.state === 'rest' ? <>\n                                    <div class='card-text row'>\n                                        <div class='col-4 text-nowrap text-overflow'>\n                                            <small class='text-muted'>\n                                                <i class='fas fa-clock ml-2' /> <Text id='workouts.duration'>Vargihet</Text>\n                                            </small>\n                                            <h6>\n                                                {util.secToHms(stateDetail.duration, true)}\n                                            </h6>\n                                        </div>\n                                        {stateDetail.point && <div class='col-8 text-nowrap text-overflow'>\n                                            <small class='text-muted'>\n                                                <i class='fa-map-marked ml-2' /> <Text id='workouts.position'>Position</Text>\n                                            </small>\n                                            <h6>\n                                                {stateDetail.point}\n                                            </h6>\n                                        </div>}\n                                    </div>\n                                    <div class='card-text row'>\n                                        {stateDetail.start && <div class='col-4 text-nowrap text-overflow'>\n                                            <small class='text-muted'>\n                                                <i class='fas fa-clock ml-2' /> <Text id='workouts.starttime'>Start</Text>\n                                            </small>\n                                            <h6>\n                                                {mu.formatDate(util.parseInputDate(stateDetail.start), { locale, hour12: false, day: 'numeric', month: 'numeric', hour: '2-digit', minute: '2-digit' })}\n                                            </h6>\n                                        </div>}\n                                        {stateDetail.end && <div class='col-4 text-nowrap text-overflow'>\n                                            <small class='text-muted'>\n                                                <i class='fas fa-clock ml-2' /> <Text id='workouts.endtime'>End</Text>\n                                            </small>\n                                            <h6>\n                                                {mu.formatDate(util.parseInputDate(stateDetail.end), { locale, hour12: false, day: 'numeric', month: 'numeric', hour: '2-digit', minute: '2-digit' })}\n                                            </h6>\n                                        </div>}\n                                    </div>\n                                </> : <>\n                                    <div class='card-text row'>\n                                        <div class='col-4 text-nowrap text-overflow'>\n                                            <small class='text-muted'>\n                                                <i class='fas fa-road ml-2' /> <Text id='workouts.distance'>Distanse</Text>\n                                            </small>\n                                            <h6>\n                                                <Distance stores={this.props.stores} value={stateDetail.distance / 1000} />\n                                            </h6>\n                                        </div>\n\n                                        <div class='col-4 text-nowrap text-overflow'>\n                                            <small class='text-muted'>\n                                                <i class='fas fa-clock ml-2' /> <Text id='workouts.duration'>Vargihet</Text>\n                                            </small>\n                                            <h6>\n                                                {util.secToHms(stateDetail.duration, true)}\n                                            </h6>\n                                        </div>\n\n                                        <div class='col-4 text-nowrap text-overflow'>\n                                            <small class='text-muted'>\n                                                <i class='fas fa-tachometer-alt ml-2' /> <Text id='workouts.avgspeed'>Gj.fart</Text>\n                                            </small>\n                                            <h6>\n                                                <Speed stores={this.props.stores} value={stateDetail.distance / stateDetail.duration * 3.6} />\n                                            </h6>\n                                        </div>\n                                    </div>\n                                    <div class='card-text row'>\n                                        {stateDetail.start && <div class='col-4 text-nowrap text-overflow'>\n                                            <small class='text-muted'>\n                                                <i class='fas fa-clock ml-2' /> <Text id='workouts.starttime'>Start</Text>\n                                            </small>\n                                            <h6>\n                                                {mu.formatDate(util.parseInputDate(stateDetail.start), { locale, hour12: false, day: 'numeric', month: 'numeric', hour: '2-digit', minute: '2-digit' })}\n                                            </h6>\n                                        </div>}\n                                        {stateDetail.end && <div class='col-4 text-nowrap text-overflow'>\n                                            <small class='text-muted'>\n                                                <i class='fas fa-clock ml-2' /> <Text id='workouts.endtime'>End</Text>\n                                            </small>\n                                            <h6>\n                                                {mu.formatDate(util.parseInputDate(stateDetail.end), { locale, hour12: false, day: 'numeric', month: 'numeric', hour: '2-digit', minute: '2-digit' })}\n                                            </h6>\n                                        </div>}\n                                    </div>\n                                </>}\n                            </div>\n                            <div class='float-right'>\n\n                            <button class='btn btn-link text-primary mx-2 py-0 float-right' onClick={this.hideDetail} style='line-height: 1.0em; font-size: 2.0em;'>\n                                <i class='fas fa-times' />\n                            </button>\n\n                            {stateDetail.idx < states.length - 1 && <button class='btn btn-link text-primary mx-2 py-0 float-right' onClick={this.nextStateDetail} style='line-height: 1.0em; font-size: 2.0em;'>\n                                <i class='fas fa-angle-right' />\n                            </button>}\n                            {stateDetail.idx > 0 && <button class='btn btn-link text-primary mx-2 py-0 float-right' onClick={this.prevStateDetail} style='line-height: 1.0em; font-size: 2.0em;'>\n                                <i class='fas fa-angle-left' />\n                            </button>}\n\n                            </div>\n                        </div>\n                    </>}\n                </div>}\n            </div>\n        </>);\n    }\n}\n\nexport default States;\n","import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\n\n@observer\nclass Musher extends Component {\n    render() {\n        const { musher } = this.props;\n\t\t// const { userStore, dogStore } = this.props.stores;\n        // const workoutSummary = dogStore.findWorkoutSummary(dog.id, 2020) || {};\n        // // {\"0\":{\"year\":2020,\"dog\":16,\"count\":1,\"distanceKm\":9.9,\"elevation\":202,\"duration\":0,\"speedAvg\":0}}\n        // const dogVaccines = dogStore.findVaccineStatuses(dog.id);\n        return (\n            <div class='w-100 mb-3'>\n                <div class='row'>\n                    <div class='col-12 col-sm-8 col-lg-6 offset-sm-2 offset-lg-3 d-flex mb-0 position-relative'>\n                        {/* {JSON.stringify(dog, null, 4)} */}\n                        <div class={`text-center border rounded-circle imageRounded text-muted pt-2`} style={musher.image ? `background-image: url(\"${musher.image.s3SmallLink}\");` : ''}>\n                            {/* {!dog.image && <i class='fas fa-dog mt-3' style='font-size: 40px;' />} */}\n                            {!musher.image && <span class='font-weight-lighter' style='font-size: 35px;'>{util.ucfirst(musher.email, true)}</span>}\n                        </div>\n                        <div class='flex-grow-1 pl-3 pr-2'>\n                            <span class='float-right'>\n                                {/* {musher.birth && <span class='mr-2'>{util.age(musher.birth, musher.deceased)}</span>}\n                                {musher.gender === 'female' ? <i class='fas fa-venus' /> : <i class='fas fa-mars' />} */}\n                            </span>\n                            {/* <a class='stretched-link' href={`/dogs/${musher.id}`}> */}\n                                <h5 class='mb-1' style='line-height: 1.0em;'>{musher.fname || musher.email}</h5>\n                            {/* </a> */}\n                            {/* <span class='font-weight-light'>{userStore.findTeam(dog.team)}</span><br /> */}\n\n                            {/* <small class='text-muted'> */}\n                                {/* {dog.chipId && <span class='ml-0'><i class='fas fa-microchip' /> {dog.chipId}</span>} */}\n                                {/* {dog.history && <span class='ml-0'><i class='fas fa-file-signature' /> {dog.history.length}</span>}\n                                {dog.images && <span class='ml-2'><i class='fas fa-image' /> {dog.images.length}</span>}\n\n                                {workoutSummary && workoutSummary.distanceKm > 0 && <span class='ml-2'><i class='fas fa-road' /> {util.format(workoutSummary.distanceKm, 0)}km</span>}\n                                {workoutSummary && workoutSummary.elevation > 0 && <span class='ml-2'><i class='fas fa-mountain' /> {util.format(workoutSummary.elevation, 0)}m</span>}\n                                {workoutSummary && workoutSummary.duration > 0 && <span class='ml-2'><i class='fas fa-clock' /> {util.secToHms(workoutSummary.duration, true)}</span>}\n                                {workoutSummary && workoutSummary.speedAvg > 0 && <span class='ml-2'><i class='fas fa-tachometer-alt' /> {util.format(workoutSummary.speedAvg, 1)}km/t</span>}\n                                <div>\n                                    {dogVaccines && dogVaccines.map(v => (\n                                        <span class={`badge badge-success mr-2`} title={util.isoDate(v.endDate, false, false, true)}>{v.vaccineType}</span>\n                                    ))}\n                                </div> */}\n                            {/* </small> */}\n                            {/* <div class='clearfix pb-0'>\n                                {dog.specialNeeds && <span class={`badge badge-warning ml-2 float-right`}><i class='fas fa-exclamation-triangle' /> {dog.specialNeeds}</span>}\n                                {dogStatus && <span class={`badge badge-${dogStatus.class} ml-2 float-right`}>{dogStatus.icon && <i class={dogStatus.icon} />} {dogStatus.name}</span>}\n                            </div> */}\n                        </div>\n                    </div>\n                </div>\n            </div>\n        );\n    }\n}\n\nexport default Musher;\n","import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\n\nimport style from './style.css';\n\nconst initialState = {\n    mouseData: {},\n};\n\n@observer\nclass Gauge extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            ...initialState,\n        };\n        this.svgRef = null;\n    }\n\n    render() {\n        const {\n            radius = 50,\n            heightAdd = 0,\n            color = 'success',\n\n            showPercentText = true,\n            percent = 0,\n            prefix = '',\n\n            showCenterText= false,\n            centerText,\n            centerTextSize,\n            centerTextX,\n            centerTextY,\n\n            total = '',\n            totalY = '90%',\n            totalX = '50%',\n            totalTextAnchor = 'middle',\n                        \n            completed = '',\n            completedY = '65%',\n            completedX = '50%',\n            completedTextAnchor = 'middle',\n        } = this.props;\n        const strokeWidth = radius * 0.3;\n        const innerRadius = radius - strokeWidth / 2;\n\n        const strokeWidthGauge = radius * 0.3;\n\n        const circumference = innerRadius * 2 * Math.PI;\n        const arc = circumference * (270 / 360);\n        const dashArray = `${arc} ${circumference}`;\n        const transform = `rotate(135, ${radius}, ${radius})`;\n\n        const percentNormalized = Math.min(Math.max(percent, 0), 100);\n        const offset = arc - (percentNormalized / 100) * arc;\n\n        const textSize = centerTextSize || radius / 2.5;\n        const textSizeSmall = radius / 5;\n\n        return (\n            <>\n                <svg xmlns='http://www.w3.org/2000/svg' class={style.svg}\n                    // viewBox={`0 0 ${radius * 2} ${radius * 2}`}\n                    width={radius * 2}\n                    height={radius * 2 + heightAdd}\n                    preserveAspectRatio='none'\n                    ref={c => this.svgRef = c}\n                >\n\n                    <circle\n                        class={`${style.gaugeBackground}`}\n                        cx={radius}\n                        cy={radius}\n                        r={innerRadius}\n                        strokeWidth={strokeWidth}\n                        strokeDasharray={dashArray}\n                        strokeLinecap='round'\n                        transform={transform}\n                    />\n                    \n                    <circle\n                        class={`${style[color]} ${style.gauge}`}\n                        cx={radius}\n                        cy={radius}\n                        r={innerRadius}\n                        stroke='url(#grad)'\n                        strokeDasharray={dashArray}\n                        strokeDashoffset={offset}\n                        strokeLinecap='round'\n                        strokeWidth={strokeWidthGauge}\n                        style={{\n                            transition: 'stroke-dashoffset 0.3s',\n                        }}\n                        transform={transform}\n                    />\n                     \n                    {showPercentText && <text\n                        class={`${style.gaugeText} ${style[color]}`}\n                        x={centerTextX || '50%'}\n                        y={centerTextY || '50%'}\n                        dominant-baseline='middle'\n                        text-anchor='middle'\n                        font-size={textSize}\n                    >{percent} {prefix}</text>}\n\n                    {showCenterText && <text\n                        class={`${style.gaugeText} ${style[color]}`}\n                        x={centerTextX || '50%'}\n                        y={centerTextY || '50%'}\n                        dominant-baseline='middle'\n                        text-anchor='middle'\n                        font-size={textSize}\n                    >{centerText}</text>}\n\n                    {completed && <text\n                        class={`${style.gaugeText} ${style[color]}`}\n                        x={completedX}\n                        y={completedY}\n                        dominant-baseline='middle'\n                        text-anchor={completedTextAnchor}\n                        font-size={textSizeSmall}\n                    >{completed}</text>}\n\n                    <text\n                        class={`${style.gaugeText} ${style.secondary}`}\n                        x={totalX}\n                        y={totalY}\n                        dominant-baseline='middle'\n                        text-anchor={totalTextAnchor}\n                        font-size={textSizeSmall}\n                    >{total}</text>\n\n                </svg>\n            </>\n        );\n    }\n}\n\nexport default Gauge;\n"],"sourceRoot":""}