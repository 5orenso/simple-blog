(window.webpackJsonp=window.webpackJsonp||[]).push([[92],{"1/9N":function(t,e,s){"use strict";(function(t){var o,i=s("hosL"),a=s("Utv1"),l=s("/eY4"),c=(s("OhSV"),s("ZOvn"),s("bbv7"));let n=Object(l.a)(o=class extends i.Component{render(){const{legendLeft:e=[],legendRight:s=[],dataLeft:o=[],dataRight:l=[],showDebug:n,xTicksVal:r=(t=>a.a.isoDate(t,!1,!1,!0)),xTicksCnt:h=5,yTicksLeftVal:g=(t=>t),yTicksRightVal:d=(t=>t)}=this.props,b=o&&o[0]?o[0]:[],p=[];if(b.length){const t=Math.ceil(b.length/(h-1)),e=Math.floor(b.length/t);n&&console.log({firstData:b,parts:e,partSize:t});for(let e=0,s=b.length;e<s;e+=t)p.push(b[e].epoch);p.push(b[b.length-1].epoch)}return Object(i.h)(t,null,Object(i.h)("div",{class:"w-100 mt-3 mb-4"},Object(i.h)(c.a,{stores:this.props.stores,width:1e3,height:300,showXTicks:1,xTicksVal:r,xTicks:p,paddingTop:30,lineFromXzero:!1,lineFromXmax:!1,dataLeft:o,legendLeft:e,showYTicksLeft:1,yTicksLeftVal:g,avgWindowLeft:[0,0,0,0,0,0,0],smoothLeft:[0,0,0,0,0,0,0],dataRight:l,legendRight:s,showYTicksRight:l.length>0?1:0,yTicksRightVal:d,avgWindowRight:[0,0,0,0,0,0,0],smoothRight:[0,0,0,0,0,0,0],scrollToRight:!0})))}})||o;e.a=n}).call(this,s("hosL").Fragment)},Nanz:function(t,e,s){"use strict";s.r(e),function(t){function o(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,o)}return s}function i(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}var a,l=s("hosL"),c=s("Utv1"),n=s("/eY4"),r=(s("Y3FI"),s("OhSV")),h=s("fh8t"),g=s.n(h),d=(s("X9Km"),s("ZOvn")),b=s("s4FZ"),p=s("1/9N");const m=d.a.marginTop(!1),f=d.a.marginTopBack(!1),u=d.a.marginBottom(),O={newTeam:{}};let j=Object(n.a)(a=class extends l.Component{constructor(t){super(t),this.back=()=>{const{history:t}=this.props.stores;t.goBack()},this.nextDog=()=>{const{nextDogIdx:t}=this.state,{dogs:e=[],stores:s}=this.props,o=e[t];o&&o.uuidv4&&this.loadPublicDog({stores:s,dogs:e,dogid:o.uuidv4})},this.prevDog=()=>{const{prevDogIdx:t}=this.state,{dogs:e=[],stores:s}=this.props,o=e[t];o&&o.uuidv4&&this.loadPublicDog({stores:s,dogs:e,dogid:o.uuidv4})},this.state=function(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?o(Object(s),!0).forEach((function(e){i(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):o(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}({},O),this.updateTimer={},this.time=(new Date).getTime(),this.apiServer=c.a.getApiServer()}async loadPublicView(t){this.setState({isLoading:!0});const{dogid:e}=t,{dogStore:s}=this.props.stores;await s.getPublicViews(e),this.setState({isLoading:!1})}async loadAll(t=this.props){await this.loadPublicDog(t),await this.loadPublicView(t)}async loadPublicDog(t=this.props){const{dogStore:e}=t.stores,{dogid:s,dogs:o=[]}=t;await e.loadPublicDetail({id:s});const{publicDog:i}=e,a=o.findIndex(t=>t.id===i.id);let l=null,c=null,n=null,r=null,h=!1,g=!1;a>0&&(l=a-1,n=o[l].shortname||o[l].name,h=!0),a<o.length-1&&(c=a+1,r=o[c].shortname||o[c].name,g=!0),this.setState({prevDogIdx:l,prevDogName:n,nextDogIdx:c,nextDogName:r,hasPrevDog:h,hasNextDog:g,currentDogIdx:a})}componentDidMount(){const{back:t=this.back}=this.props,{appState:e}=this.props.stores;e.setSwipeRight(()=>{e.setSwipeRight(),t()}),this.loadAll()}componentWillReceiveProps(t){t.dogid!==this.props.dogid&&this.loadAll(t)}render(){const{hasPrevDog:e,hasNextDog:s}=this.state,{teamStore:o,dogStore:i,userStore:a}=this.props.stores,{user:n,isAdmin:h}=a,{language:O="en"}=n,{publicDog:j,publicTeam:v,publicViewsGraphData:x}=i,y=!(!v||!v.members)&&v.members.some(t=>t.id===n.id),w=v||{},{marginTop:k,marginBottom:S,back:D=this.back}=this.props,{users:L=[],imageHeader:T}=w,{image:P}=j,R=T&&T.s3XXLargeLink?T:{s3XXLargeLink:"./assets/homerun-race-logo.png"},$=P&&P.s3LargeLink?P:null,I=(a.findTeamAmbition({ambition:w.ambitions,language:O}),a.findTeamType({type:w.type,language:O}),a.findDogposition({position:j.position,language:O})),z=d.a.hasBirthday(j.birth),X=Math.ceil(d.a.daysUntilNextBirthday(j.birth));return Object(l.h)(t,null,Object(l.h)("div",{class:"container-fluid pb-5",style:`margin-bottom: ${S||u}; margin-top: ${k||m};`},Object(l.h)("button",{class:"btn btn-link pl-0 fixed-top text-primary",style:`top: ${f}; left: 5px; font-size: 2.0em; width: 43px;`,onClick:D},Object(l.h)("i",{class:"fas fa-arrow-circle-left"})),Object(l.h)("div",{class:"row mb-0"},Object(l.h)("div",{class:"w-100 position-relative",style:"height: 25vh; background-size: cover; background-repeat: no-repeat; background-position: 50% 50%; background-color: #a0a0a0; "+(R?`background-image: url("${R.s3XXLargeLink}");`:"")}),Object(l.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-3"},Object(l.h)("div",{class:"row"},Object(l.h)("div",{class:"col-3 col-sm-4 col-md-3 col-lg-4 position-relative"},Object(l.h)("div",{class:"text-center border border-white rounded-circle position-absolute imageRoundedXLarge imageRoundedResponsive imageRoundedResponsivePosition",style:"left: 20px; "+($?`background-image: url("${$.s3LargeLink}"); background-size: cover; background-repeat: no-repeat; background-position: 50% 50%;`:"")},!$&&Object(l.h)("i",{class:"fas fa-users text-muted mt-3",style:"font-size: 40px;"}))," "),Object(l.h)("div",{class:"col-9 col-sm-8 col-md-9 col-lg-8",style:"line-height: 1.2em;"},Object(l.h)("small",{class:"font-weight-light"},w.name),Object(l.h)("br",null),j.birth&&Object(l.h)(t,null,Object(l.h)("h5",{class:"float-right"},X<7&&Object(l.h)(t,null,Object(l.h)("span",{class:"text-muted mr-2"},Object(l.h)("i",{class:"fas fa-birthday-cake"})," in ",X," days")),j.birth&&Object(l.h)("span",{class:"mr-2"},c.a.age(j.birth,j.deceased)),"female"===j.gender?Object(l.h)("i",{class:"fas fa-venus"}):Object(l.h)("i",{class:"fas fa-mars"}))),Object(l.h)("h5",{class:"my-0"},j.shortname||j.name,z&&Object(l.h)(t,null,Object(l.h)("i",{class:"fas fa-birthday-cake ml-3"}))),j.shortname&&Object(l.h)("div",null,j.name),I&&I.class&&Object(l.h)(t,null,Object(l.h)("span",{class:`badge badge-${I.class||"primary"} mt-2`},I.icon&&Object(l.h)("i",{class:I.icon})," ",I.name)),j.weight>0&&Object(l.h)("small",{class:"text-muted"},j.weight&&Object(l.h)(t,null,Object(l.h)("i",{class:"fas fa-balance-scale ml-2"})," ",c.a.format(j.weight,1)," kg")))))),Object(l.h)("div",{class:"row mt-5"},Object(l.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3"},Object(l.h)("h5",{class:"font-weight-lighter text-muted border-bottom"},Object(l.h)(r.c,{id:"dogs.description"},"Beskrivelse"))),Object(l.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3"},Object(l.h)(g.a,{markdown:d.a.replaceImages(j.description,j.images,O),markdownOpts:d.a.getMarkdownOptions()}))),j.images&&Object(l.h)("div",{class:"row mt-5"},Object(l.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3"},Object(l.h)("h5",{class:"font-weight-lighter text-muted border-bottom"},Object(l.h)(r.c,{id:"dogs.public-photos",fields:{total:j.images.length}},"Bilder av hunden - ",j.images.length," stk"))),Object(l.h)("div",{class:"col-12 col-sm-8 col-lg-6 offset-sm-2 offset-lg-3 mb-0 position-relative px-0"},Object(l.h)(b.a,{stores:this.props.stores,images:j.images}))),j.achievements&&Object(l.h)("div",{class:"row mt-5"},Object(l.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3"},Object(l.h)("h5",{class:"font-weight-lighter text-muted border-bottom"},Object(l.h)(r.c,{id:"dogs.achievements"},"Achievements"))),Object(l.h)("div",{class:"col-12 col-sm-8 col-lg-6 offset-sm-2 offset-lg-3 mb-0 position-relative"},Object(l.h)("div",{class:"row"},j.achievements&&j.achievements.map(t=>Object(l.h)("div",{class:"col-12"},t.date&&Object(l.h)("span",{class:"font-weight-lighter mr-2"},c.a.isoDate(t.date,!1,!1,!0)),Object(l.h)("span",{class:"mr-2 font-weight-bold"},t.name),Object(l.h)("span",{class:"mr-2 font-weight-light"},t.description),t.url&&Object(l.h)("span",{class:"mr-2"},Object(l.h)("a",{href:d.a.asUrl(t.url),target:"_blank",rel:"noreferrer",native:!0},Object(l.h)("i",{class:"fas fa-link"})))))))),j.trophys&&Object(l.h)("div",{class:"row mt-5"},Object(l.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3"},Object(l.h)("h5",{class:"font-weight-lighter text-muted border-bottom"},Object(l.h)(r.c,{id:"dogs.trophy"},"Trophys"))),Object(l.h)("div",{class:"col-12 col-sm-8 col-lg-6 offset-sm-2 offset-lg-3 mb-0 position-relative"},Object(l.h)("div",{class:"row"},j.trophys&&j.trophys.reverse().map(t=>{const e=d.a.getTrophyImage(t.name);if(!e)return"";const s=t.descriptionHeader&&t.descriptionHeader[O]?t.descriptionHeader[O]:"",o=t.description&&t.description[O]?t.description[O]:"";return Object(l.h)("div",{class:"col-4 mt-3"},Object(l.h)("div",{class:"mb-2"},Object(l.h)("img",{src:e,class:"img-fluid"})),Object(l.h)("strong",null,s),Object(l.h)("small",null,Object(l.h)("details",null,Object(l.h)("summary",null,Object(l.h)(r.c,{id:"dogs.trophy-details"},"Details")),Object(l.h)(g.a,{markdown:d.a.replaceImages(o,j.images,O),markdownOpts:d.a.getMarkdownOptions()}))))})))),Object(l.h)("div",{class:"row mt-5 mb-5"},Object(l.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3"},Object(l.h)("div",{class:"text-center text-muted"},Object(l.h)("div",{class:"display-1"},Object(l.h)("i",{class:"fas fa-ellipsis-h"})),Object(l.h)("div",{style:"line-height: 0.9em;"},Object(l.h)("small",null,Object(l.h)(r.c,{id:"dogs.something-missing"},"Er det noe du savner på denne siden? Send oss en melding på Facebook.")))))),(h||y)&&Object(l.h)(t,null,Object(l.h)("h5",{class:"font-weight-lighter text-muted border-bottom"},Object(l.h)(r.c,{id:"dogs.visits"},"Dog page visits")),Object(l.h)(p.a,{stores:this.props.stores,dataLeft:x,legendLeft:["dog"],key:"minigraph-dog-"+j.uuidv4})),s&&Object(l.h)("span",{class:"fixed-bottom text-primary",style:"bottom: 60px; left: auto; right: 12px; width: 43px; font-size: 3.0em; z-index: 10;"},Object(l.h)("i",{class:"fas fa-arrow-circle-right",onClick:this.nextDog})),e&&Object(l.h)("span",{class:"fixed-bottom text-primary",style:"bottom: 60px; left: 5px; width: 43px; font-size: 3.0em; z-index: 10;"},Object(l.h)("i",{class:"fas fa-arrow-circle-left",onClick:this.prevDog})),j.uuidv4&&Object(l.h)("img",{src:`${this.apiServer}/api/dogs/${j.uuidv4}/view?user=${n.id}&time=${this.time}`,style:"width: 1; height: 1; opacity: 0.1;"})))}})||a;e.default=j}.call(this,s("hosL").Fragment)},s4FZ:function(t,e,s){"use strict";(function(t){function o(t){return l.a.isObject(t)&&t.s3LargeLink}var i,a=s("hosL"),l=s("Utv1"),c=s("/eY4");s("OhSV");let n=Object(c.a)(i=class extends a.Component{constructor(t){super(t),this.scrollImages=t=>{const{images:e,callback:s=(()=>{})}=this.props,{scrollLeft:o,clientWidth:i}=t.target,a=o/i,l=Math.round(a),c=Math.abs(l-a);(Number.isInteger(a)||c<.1)&&(this.setState({imageIdx:l}),s(l))},this.onClickScrollLeft=()=>{const t=this.imageScrollerRef;t.scrollBy({top:0,left:0-t.clientWidth,behavior:"smooth"})},this.onClickScrollRight=()=>{const t=this.imageScrollerRef;t.scrollBy({top:0,left:t.clientWidth,behavior:"smooth"})},this.distance=t=>Math.hypot(t.touches[0].pageX-t.touches[1].pageX,t.touches[0].pageY-t.touches[1].pageY),this.pinchZoomOnTouchStart=t=>{if(2===t.touches.length){t.preventDefault(),t.stopPropagation();const e={};e.x=(t.touches[0].pageX+t.touches[1].pageX)/2,e.y=(t.touches[0].pageY+t.touches[1].pageY)/2,e.distance=this.distance(t),this.setState({start:e})}},this.pinchZoomOnTouchMove=t=>{let{imageElementScale:e,imageElementMaxScale:s}=this.state;const{start:o}=this.state;if(2===t.touches.length){let i;if(t.preventDefault(),t.stopPropagation(),t.scale)i=t.scale;else{i=this.distance(t)/o.distance}e=Math.min(Math.max(1,i),s),this.setState({imageElementScale:e},()=>{const s=`translate3d(${2*((t.touches[0].pageX+t.touches[1].pageX)/2-o.x)}px, ${2*((t.touches[0].pageY+t.touches[1].pageY)/2-o.y)}px, 0) scale(${e})`;t.target.style.transition="",t.target.style.transform=s,t.target.style.WebkitTransform=s,t.target.style.zIndex="100000"})}},this.pinchZoomOnTouchEnd=t=>{this.setState({imageElementScale:1}),t.target.style.transition="transform 250ms",t.target.style.transform="",t.target.style.WebkitTransform="",t.target.style.zIndex=""},this.state={imageIdx:0,imageElementScale:1,imageElementMaxScale:5,start:{}}}render(){const{imageIdx:e,imageElementScale:s}=this.state,{images:i,id:l,dblClick:c=(()=>{}),likeRef:n={},noimagestext:r,minHeight:h="100px"}=this.props,{appState:g}=this.props.stores,{isCordova:d}=g,b=e>0,p=e<i.length-1;return i&&0!==i.length?Object(a.h)("div",{class:"w-100 position-relative"},Object(a.h)("div",{class:"d-flex flex-row flex-nowrap bg-light border-top border-bottom no-scrollbar",style:`\n                        overflow-x: ${s>1&&1===i.length?"visible !important":"auto"};\n                        overflow-y: ${s>1?"visible !important":"auto"};\n                        scroll-snap-type: x mandatory;\n                    `,onScroll:this.scrollImages,ref:t=>this.imageScrollerRef=t},i&&i.filter(o).map(e=>Object(a.h)("div",{class:"col-12 clearfix p-0"},Object(a.h)("div",{class:"w-100 h-100 text-center rounded-lg imageContainer d-flex justify-content-center align-items-center position-relative ",style:"\n                                    scroll-snap-align: start;\n                                    flex-wrap: wrap;\n                                ",onDblclick:c,"data-id":l,onTouchstart:t=>{t.stopPropagation()},onTouchend:t=>{t.stopPropagation()},onTouchmove:t=>{t.stopPropagation()}},Object(a.h)("div",{class:"position-absolute w-100 h-100",style:`\n                                        background-image: url('${e.s3SmallLink}'); background-size: cover;\n                                        filter: blur(10px);\n                                        opacity: 0.5;\n                                    `}),e.s3LargeLink?Object(a.h)("img",{class:"img-fluid position-relative",src:`${e.s3LargeLink}${e.updatedDate?"?updated="+(""+e.updatedDate):""}`,loading:"lazy",style:`max-height: 75vh; min-height: ${h}; `,onTouchstart:this.pinchZoomOnTouchStart,onTouchend:this.pinchZoomOnTouchEnd,onTouchmove:this.pinchZoomOnTouchMove}):Object(a.h)(t,null,Object(a.h)("span",{class:"display-1 text-muted"},Object(a.h)("i",{class:"fas fa-camera"}))),e.title&&Object(a.h)("div",{class:"position-absolute w-100 text-center",style:"bottom: 0px; background-color: rgba(0, 0, 0, 0.5);"},e.title)),n[l]&&Object(a.h)("span",{class:"likeHeart position-absolute text-white display-1",style:"top: calc(50% - 50px); left: calc(50% - 50px); width: 100px; height: 100px;"},Object(a.h)("i",{class:"fas fa-heart likeStory"}))))),i&&i.length>1&&Object(a.h)(t,null,Object(a.h)("div",{class:"w-100 text-center"},Object(a.h)("small",null,Object(a.h)("small",null,i&&i.filter(o).map((s,o)=>Object(a.h)(t,null,Object(a.h)("i",{class:(o===e?"fas":"far")+" fa-circle mr-1"})))))),Object(a.h)("div",{class:"position-absolute text-white font-weight-lighter px-1 py-1 rounded-lg",style:"top: 10px; right: 10px; background-color: rgba(0, 0, 0, 0.3); line-height: 1.0em;"},Object(a.h)("small",null,e+1," / ",i.length))),d?Object(a.h)(t,null):Object(a.h)(t,null,b&&Object(a.h)("div",{class:"position-absolute d-none d-lg-block",style:"top: 50%; left: 5px;"},Object(a.h)("button",{type:"button",class:"btn btn-link text-secondary",style:"font-size: 3.0em; opacity: 0.7;",onClick:this.onClickScrollLeft},Object(a.h)("i",{class:"fas fa-arrow-circle-left"}))),p&&Object(a.h)("div",{class:"position-absolute d-none d-lg-block",style:"top: 50%; right: 5px;"},Object(a.h)("button",{type:"button",class:"btn btn-link text-secondary",style:"font-size: 3.0em; opacity: 0.7;",onClick:this.onClickScrollRight},Object(a.h)("i",{class:"fas fa-arrow-circle-right"}))))):r?Object(a.h)(t,null,Object(a.h)("div",{class:"col-12 text-center text-muted"},Object(a.h)("div",{class:"display-1"},Object(a.h)("i",{class:"fas fa-camera"})),Object(a.h)("h3",{class:"font-weight-lighter"},r))):Object(a.h)(t,null)}})||i;e.a=n}).call(this,s("hosL").Fragment)}}]);
//# sourceMappingURL=92.chunk.31850.esm.js.map