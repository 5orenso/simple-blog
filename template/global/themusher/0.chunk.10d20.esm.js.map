{"version":3,"sources":["webpack:///./components/public/heatmap.js","webpack:///./components/login/loginForm.js","webpack:///./routes/public/race/submenu.js","webpack:///./routes/public/race/style.css","webpack:///./routes/public/race/header.js","webpack:///./routes/public/race/detail-signup.js","webpack:///./routes/public/race/detail.js"],"names":["initialState","showAddComment","Heatmap","observer","Component","constructor","props","super","this","state","updateTimer","inputRef","setState","isLoading","adminStore","stores","raceid","getPublicHeatmap","componentDidMount","loadHeatmap","render","waypoints","zoomToMarkers","mapid","fullscreenMap","publicHeatmap","heatmap","mapId","length","minZoom","maxZoom","height","key","Login","handleEmailInput","async","e","userStore","email","target","value","clearTimeout","checkEmailTimer","setTimeout","checkEmail","togglePassword","passwordType","updateCapsLockStatus","isCapsLock","login","routeLoginOk","password","token","appState","language","checkLogin","sendPubSubMessage","getInfo","route","resetLoginMessages","newUser","routeLoginNew","forgotten","routeLoginForgot","changeLanguage","lang","setLanguage","validateLoginToken","loginToken","response","status","showToken","util","isString","darkmode","showLogo","emailIsAvailable","twoFactorLogin","message","messageIcon","error","errorIcon","isValidEmail","validateEmail","isOkToLogin","class","src","id","icon","remove","for","type","onInput","onKeypress","style","linkState","onClick","role","disabled","mu","marginTop","marginBottom","subMenuMarginTop","submenu","jwtToken","getJwtToken","PublicRaceDetail","path","currentMenu","match","href","module","exports","menu","profile","main","searchText","Navigation","toggleDropdown","menuName","dataset","name","parentNode","toggleDarkmode","toggleViewmode","mode","reloadApp","window","location","reload","adminLoadAll","console","log","user","search","notifications","filter","read","data-name","className","activeClassName","selected","showSignup","PublicRaceDetailSignup","signupToRace","raceStore","newSignup","signup","team","firstname","lastname","sportsClub","cellphone","facebook","instagram","addContestant","classId","newContestant","addSignup","toggleShowSignup","updateSignup","updateObjectKeyValue","editSignup","field","classid","contestantid","data","raceClassId","contestantId","ucfirst","editClass","hide","teams","subsection","race","signups","today","Date","hasSignedup","skipTeams","map","parseInt","title","signupStartDate","formatDate","locale","hour12","hour","minute","signupEndDate","signupClass","getRaceClassById","liveRace","signuppayment","paidSignupfee","replaceImages","images","signupfee","data-classid","data-contestantid","placeholder","aria-describedby","indexOf","classes","sort","a","b","distance","currentClass","rules","checked","termsAndAgreement","declaration","routeLogin","skipPubSub","MARGIN_TOP","MARGIN_BOTTOM","newRaceArticle","newRaceUserImage","likeRace","toggleAddComment","raceId","parentElement","focus","addRaceArticle","addArticle","newArticle","addRaceUserImage","addUserImage","newUserImage","updateUserImageUpload","updateArticleUpload","removeRaceArticle","removeArticle","articleId","removeRaceUserImage","removeUserImage","userImageId","editRaceArticle","raceArticleId","editArticle","resizeTextarea","editRaceUserImage","raceUserImageId","editUserImage","resizeAllTextareas","textareaList","document","getElementsByTagName","i","l","el","element","scrollHeight","handleImageErrored","image","onerror","load","countAll","resetSignup","contestants","idx","findIndex","updateKeyValue","loadRace","componentWillReceiveProps","nextProps","isAdmin","section","col","offset","totalClasses","totalContestants","likes","comments","hasLikedRace","startDate","endDate","s3XXLargeLink","active","useEffect","fields","tag","split","rel","native","contactEmail","locationCity","locationCountry","veterinaryInfo","checkpoints","trailDescription","program","prices","articles","reverse","slice","currentArticle","s3LargeLink","date","body","markdown","ingress","markdownOpts","getMarkdownOptions","startTime","endTime","data-id","c","inputRefObject","cols","data-field","onError","linkstate","onKeyUp","saved","object","updateField","autoOpen","userImages","currentUserImage"],"mappings":"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","file":"0.chunk.10d20.esm.js","sourcesContent":["import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport { Text, Localizer } from 'preact-i18n';\nimport { toJS } from 'mobx'\n\nimport Map from '../../components/map';\n\nimport mu from '../../lib/musher-util';\n\nconst initialState = {\n\tshowAddComment: false,\n};\n\n@observer\nclass Heatmap extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            ...initialState,\n        };\n        this.updateTimer = {};\n\t\tthis.inputRef = {};\n    }\n\n\tasync loadHeatmap() {\n\t\tthis.setState({ isLoading: true });\n\t\tconst { adminStore } = this.props.stores;\n        const { raceid } = this.props;\n        await adminStore.getPublicHeatmap(raceid);\n\t\tthis.setState({ isLoading: false });\n\t}\n\n\tcomponentDidMount() {\n\t\tthis.loadHeatmap();\n\t}\n\n    // componentWillReceiveProps() {\n\t// \tthis.loadHeatmap();\n\t// }\n\n    render() {\n        const { adminStore } = this.props.stores;\n        const { waypoints, zoomToMarkers, mapid, fullscreenMap } = this.props;\n        const { publicHeatmap: heatmap } = adminStore;\n        // const heatmap = publicHeatmap.slice(0, 10);\n        // const heatmap = [[60.4433,8.8996,14],[61.384,9.1152,14],[60.42,8.9422,15]];\n\n        return (\n            <>\n                {/* heatmap: {`map-${mapid}`}<br /> */}\n                {/* {JSON.stringify(heatmap)} */}\n                <Map\n                    stores={this.props.stores}\n                    mapId={heatmap.length}\n                    heatmap={heatmap}\n                    minZoom={2}\n                    maxZoom={18}\n                    height={600}\n                    waypoints={waypoints}\n                    zoomToMarkers={zoomToMarkers}\n                    fullscreenMap={fullscreenMap}\n                    key={`map-${mapid}`}\n                />\n            </>\n        );\n    }\n}\n\nexport default Heatmap;\n","import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport { route } from 'preact-router';\nimport linkState from 'linkstate';\nimport { Text, Localizer, withText } from 'preact-i18n';\n\nimport Error from '../error';\nimport Message from '../message';\nimport Install from '../install';\n\n@observer\nclass Login extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            showToken: false,\n            isCapsLock: false,\n            passwordType: 'password',\n            email: this.props.email,\n        };\n    }\n\n    handleEmailInput = async (e) => {\n        const { userStore } = this.props.stores;\n        const email = e.target.value;\n        this.setState({ email });\n        clearTimeout(this.checkEmailTimer);\n        this.checkEmailTimer = setTimeout(() => userStore.checkEmail(email), 1000);\n    }\n\n    togglePassword = () => {\n        let { passwordType } = this.state;\n        if (passwordType === 'password') {\n            passwordType = 'text';\n        } else {\n            passwordType = 'password';\n        }\n        this.setState({ passwordType });\n    }\n\n    updateCapsLockStatus = (isCapsLock) => {\n        this.setState({\n            isCapsLock,\n        });\n    }\n\n    login = async () => {\n        const { routeLoginOk = '/' } = this.props;\n        const { email, password, token } = this.state;\n        const { userStore, appState } = this.props.stores;\n        const { language = 'en' } = appState;\n        const sendPubSubMessage = false;\n        const loginOk = await userStore.checkLogin({ email, password, token, sendPubSubMessage, language });\n        if (loginOk) {\n            await userStore.getInfo();\n            route(routeLoginOk);\n        }\n    }\n\n    resetLoginMessages = () => {\n        const { userStore } = this.props.stores;\n        userStore.resetLoginMessages();\n    }\n\n    newUser = () => {\n        const { email = '' } = this.state;\n        const { routeLoginNew = `/register/${email}` } = this.props;\n        route(routeLoginNew);\n    }\n\n    forgotten = () => {\n        const { email = '' } = this.state;\n        const { routeLoginForgot = `/forgotten/${email}` } = this.props;\n        route(routeLoginForgot);\n    }\n\n    // pwaInstallClick = (e) => {\n    //     // hide our user interface that shows our A2HS button\n    //     // addBtn.style.display = 'none';\n\n    //     // Show the prompt\n    //     this.deferredPrompt.prompt();\n    //     // Wait for the user to respond to the prompt\n    //     this.deferredPrompt.userChoice.then((choiceResult) => {\n    //         if (choiceResult.outcome === 'accepted') {\n    //             console.log('User accepted the A2HS prompt');\n    //         } else {\n    //             console.log('User dismissed the A2HS prompt');\n    //         }\n    //         this.deferredPrompt = null;\n    //     });\n    // }\n\n    // componentWillMount() {\n    //     window.addEventListener('beforeinstallprompt', (e) => {\n    //         // Prevent Chrome 67 and earlier from automatically showing the prompt\n    //         e.preventDefault();\n    //         // Stash the event so it can be triggered later.\n    //         this.deferredPrompt = e;\n\n    //         // // Update UI to notify the user they can add to home screen\n    //         // addBtn.style.display = 'block';\n    //     });\n    // }\n\n    changeLanguage = (e) => {\n        const lang = e.target.value;\n\t\tconst { appState } = this.props.stores;\n        appState.setLanguage(lang);\n    }\n\n    validateLoginToken = async () => {\n        const { userStore } = this.props.stores;\n        const { loginToken, routeLoginOk = '/' } = this.props;\n        // console.log(loginToken, util.isDefined(loginToken));\n        const response = await userStore.validateLoginToken(loginToken);\n        if (response && response.status === 200) {\n            await userStore.getInfo();\n            route(routeLoginOk);\n        }\n    }\n\n    componentDidMount() {\n        const { userStore } = this.props.stores;\n        if (this.props.email) {\n            clearTimeout(this.checkEmailTimer);\n            this.checkEmailTimer = setTimeout(() => userStore.checkEmail(this.props.email), 1000);\n        }\n        const { loginToken } = this.props;\n        if (util.isString(loginToken)) {\n            this.validateLoginToken();\n        }\n    }\n\n    render() {\n        const { isCapsLock, email, password, token, passwordType } = this.state;\n        const { appState, userStore } = this.props.stores;\n        const { language = 'en', darkmode } = appState;\n        const { routeLoginOk, routeLoginNew, routeLoginForgot, showLogo = true } = this.props;\n\n        const { emailIsAvailable, login, twoFactorLogin } = userStore;\n        const { message, messageIcon, error, errorIcon } = login;\n        const isValidEmail = util.validateEmail(email);\n        const isOkToLogin = isValidEmail && password;\n\n        return (\n            <div class='container-fluid'>\n                <div class='row'>\n                    <div class='col-10 offset-1 col-sm-8 offset-sm-2 col-md-6 offset-md-3 col-lg-4 offset-lg-4 pt-5'>\n\n                        <div class='d-flex justify-content-center'>\n                            {darkmode ? <>\n                                <img src={`https://themusher.app/assets/logo-qpaws-dark.png`} height='100' />\n                            </> : <>\n                                <img src={`https://themusher.app/assets/logo-qpaws-light.png`} height='100' />\n                            </>}\n                        </div>\n                        <div class='d-flex justify-content-center'>\n                            <h5 class='mt-1 mb-3'><Text id='login.login'>Logg inn</Text></h5>\n                        </div>\n\n                        <Error message={error} icon={errorIcon} remove={this.resetLoginMessages} />\n                        <Message message={message} icon={messageIcon} remove={this.resetLoginMessages}  />\n\n                        <div class='form-group'>\n                            <label for='emailInput'><i class='far fa-envelope' /> <Text id='login.email'>E-post</Text></label>\n                            <input type='email'\n                                class={`form-control ${email ? (isValidEmail && !emailIsAvailable ? 'is-valid' : 'is-invalid') : ''}`}\n                                id='emailInput'\n                                onInput={this.handleEmailInput}\n                                value={email}\n                                onKeypress={(e) => { util.isCapsLock(e, this.updateCapsLockStatus); }}\n                            />\n                            {email && isValidEmail && emailIsAvailable && <div class='invalid-feedback' style={`display: block;`}>\n                                <Text id='login.email-not-found'>E-posten finnes ikke, men du kan registrere deg ðŸ˜ƒ</Text>\n                            </div>}\n                            {email && !isValidEmail && <div class=\"invalid-feedback\" style={'display: block;'}>\n                                <Text id='login.email-not-valid'>Hmm, e-posten ser ikke helt riktig ut. Kan det vÃ¦re en skrivefeil?</Text>\n                            </div>}\n                            {email && isValidEmail && !emailIsAvailable && <div class=\"valid-feedback\" style={'display: block;'}>\n                                <Text id='login.email-looks-good'>E-post ser bra ut.</Text>\n                            </div>}\n                        </div>\n\n                        <div class='form-group'>\n                            <label for='passwordInput'><i class='fas fa-key' /> <Text id='login.password'>Passord</Text></label>\n                            <div class='input-group'>\n                                <input type={passwordType}\n                                    class={`form-control`}\n                                    id='passwordInput'\n                                    onInput={linkState(this, 'password')}\n                                    value={password}\n                                    onKeypress={(e) => { util.isCapsLock(e, this.updateCapsLockStatus); }}\n                                />\n                                <div class='input-group-append'>\n                                    <button class='btn btn-outline-secondary' type='button'\n                                        onClick={this.togglePassword}\n                                    >\n                                        <i class={`fas fa-eye${passwordType === 'text' ? '-slash' : ''}`} />\n                                    </button>\n                                </div>\n                            </div>\n                        </div>\n\n                        {isCapsLock && <div class='alert alert-danger' role='alert'>\n                            <Text id='login.caps-lock-on'>CAPS LOCK er pÃ¥!</Text>\n                        </div>}\n\n                        {twoFactorLogin &&\n                            <div class='form-group'>\n                                <label for='tokenInput'><i class='fas fa-unlock' /> <Text id='login.2fa-token'>2FA Token</Text></label>\n                                <input type='number'\n                                    class='form-control'\n                                    id='tokenInput'\n                                    onInput={linkState(this, 'token')}\n                                    value={token}\n                                />\n                            </div>}\n\n                        <button class={`btn ${isOkToLogin ? 'btn-primary' : 'btn-outline-primary'}`} type='button'\n                            onClick={this.login}\n                            disabled={!isOkToLogin}\n                        >\n                            <i class='fas fa-sign-in-alt mr-2' />\n                            <Text id='login.login'>Logg inn</Text>\n                        </button>\n                        <button class='btn btn-outline-secondary float-right' type='button'\n                            onClick={this.newUser}\n                        >\n                            <i class='fas fa-plus mr-2' />\n                            <Text id='login.new-user'>Ny bruker</Text>\n                        </button>\n\n                        <small class='form-text text-muted mt-5 text-center'>\n                            <button class='btn btn-small btn-link'\n                                onClick={this.forgotten}\n                            >\n                                <Text id='login.forgot-password'>Glemt passordet?</Text>\n                            </button>\n                        </small>\n\n                    </div>\n                </div>\n            </div>\n        );\n    }\n}\n\nexport default Login;\n","import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport { Text, Localizer } from 'preact-i18n';\nimport linkstate from 'linkstate';\n\nimport Header from './header';\nimport Heatmap from '../../../components/public/heatmap';\n\nimport mu from '../../../lib/musher-util';\nconst MARGIN_TOP = mu.marginTop(true);\nconst MARGIN_BOTTOM = mu.marginBottom();\nconst SUB_MENU_MARGIN_TOP = mu.subMenuMarginTop();\n\nconst initialState = {\n\tisLoading: false,\n\temail: '',\n\tsubmenu: 'ads',\n\tjwtToken: util.getJwtToken(),\n};\n\n@observer\nclass PublicRaceDetail extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            ...initialState,\n        };\n    }\n\n\trender() {\n\t\tconst { appState } = this.props.stores;\n\t\tconst { raceid, path } = this.props;\n\t\tconst { darkmode } = appState;\n\n        let currentMenu = 'default';\n        if (path.match(/\\/race\\/:raceid$/)) {\n            currentMenu = 'default';\n        } else if (path.match(/\\/race\\/:raceid\\/mushers$/)) {\n            currentMenu = 'mushers';\n        } else if (path.match(/\\/race\\/:raceid\\/results$/)) {\n            currentMenu = 'results';\n        } else if (path.match(/\\/race\\/:raceid\\/media$/)) {\n            currentMenu = 'media';\n        } else if (path.match(/\\/race\\/:raceid\\/tracking$/)) {\n            currentMenu = 'tracking';\n        }\n\n\t\treturn (\n\t\t\t<>\t\t\t\t\n                <div class='row fixed-top pr-3' style={`margin-top: 40px; background-color: ${darkmode ? '#191d21' : '#f8f9fa'};`}>\n\n                    <div class='col-12 my-2 mx-2'>\n                        <ul class='nav nav-pills nav-fill flex-nowrap'>\n                            <li class='nav-item' style='max-width: 20%;'>\n                                <a href={`/race/${raceid}`} class={`text-overflow nav-link ${currentMenu === 'default' ? 'active' : ''}`}>\n                                    <nobr><i class='fas fa-info-circle' /> <Text id='race.therace'>LÃ¸pet</Text></nobr>\n                                </a>\n                            </li>\n                            <li class='nav-item' style='max-width: 20%;'>\n                                <a href={`/race/${raceid}/mushers`} class={`text-overflow nav-link ${currentMenu === 'mushers' ? 'active' : ''}`}>\n                                    <nobr><i class='fas fa-users' /> <Text id='race.mushers'>Deltakere</Text></nobr>\n                                </a>\n                            </li>\n                            <li class='nav-item' style='max-width: 20%;'>\n                                <a href={`/race/${raceid}/results`} class={`text-overflow nav-link ${currentMenu === 'results' ? 'active' : ''}`}>\n                                    <nobr><i class='fas fa-poll' /> <Text id='race.results'>Resultater</Text></nobr>\n                                </a>\n                            </li>\n                            <li class='nav-item' style='max-width: 20%;'>\n                                <a href={`/race/${raceid}/media`} class={`text-overflow nav-link ${currentMenu === 'media' ? 'active' : ''}`}>\n                                    <nobr><i class='fas fa-images' /> <Text id='race.media'>Bilder</Text></nobr>\n                                </a>\n                            </li>\n                            <li class='nav-item' style='max-width: 20%;'>\n                                <a href={`/race/${raceid}/tracking`} class={`text-overflow nav-link ${currentMenu === 'tracking' ? 'active' : ''}`}>\n                                    <nobr><i class='fas fa-map-marked-alt' /> <Text id='race.tracking'>Tracking</Text></nobr>\n                                </a>\n                            </li>\n                        </ul>\n                    </div>\n\n\n                    {/* <div class={`col text-center subtopmenu ${path.match(/\\/race\\/:raceid$/) ? 'border-bottom border-primary' : ''}`}>\n                        <a href={`/race/${raceid}`} class={`text-${path.match(/\\/race\\/:raceid$/) ? 'primary' : 'secondary'} stretched-link`}>\n                            <nobr><i class='fas fa-chart-line' /> <Text id='race.therace'>LÃ¸pet</Text></nobr>\n                        </a>\n                    </div>\n                    <div class={`col text-center subtopmenu ${path.match(/\\/race\\/:raceid\\/mushers$/) ? 'border-bottom border-primary' : ''}`}>\n                        <a href={`/race/${raceid}/mushers`} class={`text-${path.match(/\\/race\\/:raceid\\/mushers$/) ? 'primary' : 'secondary'} stretched-link`}>\n                            <nobr><i class='fas fa-chart-line' /> <Text id='race.mushers'>Deltakere</Text></nobr>\n                        </a>\n                    </div>\n                    <div class={`col text-center subtopmenu ${path.match(/\\/race\\/:raceid\\/results$/) ? 'border-bottom border-primary' : ''}`}>\n                        <a href={`/race/${raceid}/results`} class={`text-${path.match(/\\/race\\/:raceid\\/results$/) ? 'primary' : 'secondary'} stretched-link`}>\n                            <nobr><i class='fas fa-chart-line' /> <Text id='race.results'>Resultater</Text></nobr>\n                        </a>\n                    </div>\n                    <div class={`col text-center subtopmenu ${path.match(/\\/race\\/:raceid\\/tracking$/) ? 'border-bottom border-primary' : ''}`}>\n                        <a href={`/race/${raceid}/tracking`} class={`text-${path.match(/\\/race\\/:raceid\\/tracking$/) ? 'primary' : 'secondary'} stretched-link`}>\n                            <nobr><i class='fas fa-chart-line' /> <Text id='race.tracking'>Tracking</Text></nobr>\n                        </a>\n                    </div> */}\n                </div>\n\t\t\t</>\n\t\t);\n\t}\n}\n\nexport default PublicRaceDetail;\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"pointerCursor\":\"pointerCursor__1W6mM\"};","import { h, Component } from 'preact';\nimport { Link } from 'preact-router/match';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport linkState from 'linkstate';\nimport { route } from 'preact-router';\nimport { Text, Localizer } from 'preact-i18n';\n\nimport style from './style.css';\n\n\nconst initialState = {\n    menu: {\n\t\tprofile: false,\n\t\tmain: false,\n\t},\n\tsearchText: '',\n};\n\n@observer\nclass Navigation extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            ...initialState,\n        };\n    }\n\n\ttoggleDropdown = (e) => {\n\t\tconst { menu } = this.state;\n\t\tlet menuName = e.target.dataset.name;\n\t\tif (!menuName && e.target.parentNode) {\n\t\t\tmenuName = e.target.parentNode.dataset.name;\n\t\t}\n\t\tif (menuName) {\n\t\t\tmenu[menuName] = !menu[menuName];\n\t\t}\n\t\tthis.setState({ menu });\n\t}\n\n\ttoggleDarkmode = (e) => {\n        const { appState } = this.props.stores;\n\t\tappState.toggleDarkmode();\n\t\tthis.toggleDropdown(e);\n\t}\n\n\ttoggleViewmode = (e) => {\n        const { appState } = this.props.stores;\n\t\tlet mode = e.target.dataset.mode;\n\t\tif (!mode && e.target.parentNode) {\n\t\t\tmode = e.target.parentNode.dataset.mode;\n\t\t}\n\t\tappState.toggleViewmode(mode);\n\t\tthis.toggleDropdown(e);\n\t}\n\n\treloadApp = () => {\n\t\twindow.location.reload(true);\n\t}\n\n\tadminLoadAll = async (e) => {\n        const { userStore } = this.props.stores;\n        await userStore.getInfo(true);\n\t}\n\n\tchangeLanguage = (e) => {\n\t\tconst lang = e.target.value;\n\t\tconsole.log('changeLanguage', lang);\n\t\tconst { appState, userStore } = this.props.stores;\n\t\tconst { user = {} } = userStore;\n\t\tif (user.email) {\n\t\t\tuserStore.setLanguage({ email: user.email, language: lang });\n\t\t}\n\t\tappState.setLanguage(lang);\n\t}\n\n\tsearch = () => {\n\t\tconst { searchText } = this.state;\n\t\troute(`/search/${searchText}`);\n\t}\n\n    render() {\n\t\tconst { menu, searchText } = this.state;\n        const { appState, userStore } = this.props.stores;\n        const { darkmode, viewmode, isCordova } = appState;\n\t\tconst { allUsers, isAdmin, user, notifications = [] } = userStore;\n\t\tconst unreadNotificatins = notifications.filter(e => !e.read);\n\t\tconst unread = unreadNotificatins.length || 0;\n\t\tconst { language = 'en' } = user;\n\n\t\treturn (\n\t\t\t<nav class='navbar navbar-expand-lg navbar-themed fixed-top py-1' style='z-index: 99999;'>\n\t\t\t\t<a class='navbar-brand' href='/race/'>\n\t\t\t\t\t{/* <img src={`./assets/logo-jul-2020-v2-${darkmode ? 'black' : 'white'}.png`} height='30' class='position-absolute' style='top: 8px; left: 6px' /> */}\n\t\t\t\t\t<img src={`./assets/homerun-race-logo-2-${darkmode ? 'white-' : ''}small.png`} height='37' class='position-absolute' style='top: 5px; left: 6px' />\n\t\t\t\t\t<span class='font-weight-normal' style='margin-left: 30px; font-size: 20px;'>Homerun Race</span>\n\t\t\t\t</a>\n\n\t\t\t\t<button class='navbar-toggler' type='button'\n\t\t\t\t\tdata-name='main'\n\t\t\t\t\tonClick={this.toggleDropdown}\n\t\t\t\t>\n\t\t\t\t\t<span class='navbar-toggler-icon' />\n\t\t\t\t</button>\n\n\t\t\t\t<div class={`collapse navbar-collapse ${menu.main ? 'show' : ''}`} id='navbarSupportedContent'>\n\t\t\t\t\t<ul class='navbar-nav mr-auto ml-5'>\n\t\t\t\t\t\t<li class='nav-item'>\n\t\t\t\t\t\t\t<Link className='nav-link' activeClassName={'active'} href='/race'\n\t\t\t\t\t\t\t\tdata-name='main'\n\t\t\t\t\t\t\t\tstyle='font-size: 1.0em !important;'\n\t\t\t\t\t\t\t\tonClick={this.toggleDropdown}\n\t\t\t\t\t\t\t><i class='fas fa-flag-checkered' /> <Text id='header.races'>LÃ¸pene</Text></Link>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t\t<li class='nav-item'>\n\t\t\t\t\t\t\t<Link className='nav-link' activeClassName={'active'} href='/race/support'\n\t\t\t\t\t\t\t\tdata-name='main'\n\t\t\t\t\t\t\t\tstyle='font-size: 1.0em !important;'\n\t\t\t\t\t\t\t\tonClick={this.toggleDropdown}\n\t\t\t\t\t\t\t><i class='far fa-question-circle' /> <Text id='header.support'>Support</Text></Link>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t\t<li class='nav-item'>\n\t\t\t\t\t\t\t<Link className='nav-link' activeClassName={'active'} href='/race/news'\n\t\t\t\t\t\t\t\tdata-name='main'\n\t\t\t\t\t\t\t\tstyle='font-size: 1.0em !important;'\n\t\t\t\t\t\t\t\tonClick={this.toggleDropdown}\n\t\t\t\t\t\t\t><i class='fas fa-quote-right' /> <Text id='header.news'>Nyheter</Text></Link>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t\t{/* <li class='nav-item'>\n\t\t\t\t\t\t\t<Link className='nav-link' activeClassName={'active'} href='/'\n\t\t\t\t\t\t\t\tdata-name='main'\n\t\t\t\t\t\t\t\tonClick={this.toggleDropdown}\n\t\t\t\t\t\t\t><i class='fas fa-dog' /> <Text id='header.backtoapp'>The Musher</Text></Link>\n\t\t\t\t\t\t</li> */}\n\t\t\t\t\t\t{/* <li class='nav-item'>\n\t\t\t\t\t\t\t<Link className='nav-link' activeClassName={'active'} href='/news'\n\t\t\t\t\t\t\t\tdata-name='main'\n\t\t\t\t\t\t\t\tonClick={this.toggleDropdown}\n\t\t\t\t\t\t\t><i class='fas fa-quote-right' /> <Text id='header.news'>Nyheter</Text></Link>\n\t\t\t\t\t\t</li> */}\n\t\t\t\t\t\t{/* <li class='nav-item d-block d-lg-none'>\n\t\t\t\t\t\t\t<Link className='nav-link' activeClassName={'active'} href='/howto'\n\t\t\t\t\t\t\t\tdata-name='main'\n\t\t\t\t\t\t\t\tonClick={this.toggleDropdown}\n\t\t\t\t\t\t\t><i class='fas fa-quote-right' /> <Text id='header.howto'>Hvordan gjÃ¸r man det?</Text></Link>\n\t\t\t\t\t\t</li> */}\n\t\t\t\t\t</ul>\n\n\t\t\t\t\t<ul class='navbar-nav ml-auto '>\n\t\t\t\t\t\t{/* <li class='nav-item mr-2'>\n\t\t\t\t\t\t\t<Link className='nav-link' activeClassName={'active'}\n\t\t\t\t\t\t\t\thref='/users/notifications'\n\t\t\t\t\t\t\t\tdata-name='main'\n\t\t\t\t\t\t\t\tonClick={this.toggleDropdown}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<i class='fas fa-bell mr-1' />\n\t\t\t\t\t\t\t\t{unread > 0 && <>\n\t\t\t\t\t\t\t\t\t<span class='badge badge-pill badge-danger'>{unread > 9 ? '9+' : unread}</span>\n\t\t\t\t\t\t\t\t</>}\n\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t</li> */}\n\t\t\t\t\t\t<li class='nav-item mr-2'>\n\t\t\t\t\t\t\t<div class='form-row align-items-center'>\n\t\t\t\t\t\t\t\t<div class='col-auto my-1' style='width: 80px;'>\n\t\t\t\t\t\t\t\t\t<select class='custom-select'\n\t\t\t\t\t\t\t\t\t\tstyle='background-color: inherit; border: none; padding: 0; height: 1.1em; font-size: 0.9em;'\n\t\t\t\t\t\t\t\t\t\tonInput={this.changeLanguage}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<option value='no' selected={language === 'no'}>ðŸ‡³ðŸ‡´ NO</option>\n\t\t\t\t\t\t\t\t\t\t<option value='en' selected={language === 'en'}>ðŸ‡¬ðŸ‡§ EN</option>\n\t\t\t\t\t\t\t\t\t\t<option value='es' selected={language === 'es'}>ðŸ‡ªðŸ‡¸ ES</option>\n\t\t\t\t\t\t\t\t\t\t<option value='de' selected={language === 'de'}>ðŸ‡©ðŸ‡ª DE</option>\n\t                                    <option value='fr' selected={language === 'fr'}>ðŸ‡«ðŸ‡· FR</option>\n\t                                    <option value='ru' selected={language === 'ru'}>ðŸ‡·ðŸ‡º RU</option>\n\t                                    <option value='se' selected={language === 'se'}>ðŸ‡¸ðŸ‡ª SE</option>\n\t\t\t\t\t\t\t\t\t</select>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t\t<li class='nav-item d-block d-lg-none'>\n\t\t\t\t\t\t\t<Link className='nav-link' activeClassName={'active'}\n\t\t\t\t\t\t\t\tdata-name='main'\n\t\t\t\t\t\t\t\tonClick={this.toggleDarkmode}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<i class={`${darkmode ? 'fas text-warning' : 'far'} fa-moon`} /> <Text id='header.darkmode'>Nattmodus</Text>\n\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t\t<li class='nav-item mr-2 d-none d-lg-block'>\n\t\t\t\t\t\t\t<button class='btn btn-link'\n\t\t\t\t\t\t\t\tdata-name='profile'\n\t\t\t\t\t\t\t\tonClick={this.toggleDarkmode}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<i class={`${darkmode ? 'fas text-warning' : 'far'} fa-moon`} />\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t\t{/* <li class='nav-item ml-auto d-none d-lg-block'>\n\t\t\t\t\t\t\t<form class='form-inline my-2 my-lg-0'>\n\t\t\t\t\t\t\t\t<Localizer>\n\t\t\t\t\t\t\t\t\t<input class='form-control form-control-sm mr-sm-2' type='search' placeholder={<Text id='header.search-placeholder'>SÃ¸k etter det meste...</Text>}\n\t\t\t\t\t\t\t\t\t\tvalue={searchText}\n\t\t\t\t\t\t\t\t\t\tonInput={linkState(this, 'searchText')}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</Localizer>\n\t\t\t\t\t\t\t\t<button class='btn btn-sm btn-outline-success my-2 my-sm-0' type='button'\t\n\t\t\t\t\t\t\t\t\tonClick={this.search}\n\t\t\t\t\t\t\t\t><Text id='header.search'>SÃ¸k</Text></button>\n\t\t\t\t\t\t\t</form>\n\t\t\t\t\t\t</li> */}\n\t\t\t\t\t</ul>\n\n\t\t\t\t    \n\n\t\t\t\t</div>\n\t\t\t</nav>\n\t\t);\n\t}\n}\n\nexport default Navigation;\n","import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport { Text, Localizer } from 'preact-i18n';\n\nimport LoginForm from '../../../components/login/loginForm';\nimport LoginRegister from '../../../components/register';\nimport LoginForgot from '../../../components/forgotten';\n\nimport mu from '../../../lib/musher-util';\n\nconst initialState = {\n\tisLoading: false,\n    showSignup: false,\n};\n\n@observer\nclass PublicRaceDetailSignup extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            ...initialState,\n        };\n\t\tthis.inputRef = {};\n        this.updateTimer = {};\n    }\n\n\tsignupToRace = async () => {\n\t\tconst { raceStore, userStore } = this.props.stores;\n\t\tconst { user } = userStore;\n        const { newSignup } = raceStore;\n\t\tconst { raceid } = this.props;\n\n        const signup = {\n            team: user.team,\n            firstname: user.firstname,\n            lastname: user.lastname,\n            sportsClub: user.sportsClub,\n            email: user.email,\n            cellphone: user.cellphone,\n            facebook: user.facebook,\n            instagram: user.instagram,\n            ...newSignup\n        };\n\n\t\tawait raceStore.addContestant({\n\t\t\tid: raceid,\n\t\t\tclassId: newSignup.class,\n\t\t\tnewContestant: signup,\n        });\n        raceStore.addSignup(signup);\n        this.toggleShowSignup(false, true);\n\t}\n\n    updateSignup = (e) => {\n        const key = e.target.id;\n        const value = e.target.value;\n        const { raceStore } = this.props.stores;\n        raceStore.updateObjectKeyValue('newSignup', key, value);\n    }\n\n    editSignup = (e) => {\n        const { raceid } = this.props;\n        const { raceStore } = this.props.stores;\n        const field = e.target.id;\n        const value = e.target.value;\n        const { classid, contestantid } = e.target.dataset;\n\n        // console.log({ raceid, field, value, classid });\n        // const { raceStore } = this.props.stores;\n        // raceStore.updateObjectKeyValue('signup', key, value);\n\n        const data = {\n\t\t\traceClassId: classid,\n            contestantId: contestantid,\n\t\t\t[`raceClassContestant${util.ucfirst(field)}`]: value,\n\t\t};\n\t\tclearTimeout(this.updateTimer[field]);\n\t\tthis.updateTimer[field] = setTimeout(async () => {\n\t\t\traceStore.editClass({\n\t\t\t\tid: raceid,\n\t\t\t\tdata,\n\t\t\t});\n\t\t}, 500);\n    }\n\n    toggleShowSignup = (e, hide) => {\n        const { showSignup } = this.state;\n        this.setState({\n            showSignup: hide ? false : !showSignup,\n        });\n    }\n\n\t// editRaceClass = async (e) => {\n\t// \tconst { id, field } = e.target.dataset;\n\t// \tconst { value } = e.target;\n\t// \tconst { raceid } = this.props;\n\t// \tconst { raceStore } = this.props.stores;\n\t// \tconst data = {\n\t// \t\traceClassId: id,\n\t// \t\t[`raceClass${util.ucfirst(field)}`]: value,\n\t// \t};\n\t// \tclearTimeout(this.updateTimer[field]);\n\t// \tthis.updateTimer[field] = setTimeout(async () => {\n\t// \t\traceStore.editClass({\n\t// \t\t\tid: raceid,\n\t// \t\t\tdata,\n\t// \t\t});\n\t// \t}, 500);\n\t// }\n\n\t// editSignupToRaceasync = async () => {\n\t// \tconst { raceStore, userStore } = this.props.stores;\n\t// \tconst { user } = userStore;\n    //     const { signup } = raceStore;\n\t// \tconst { raceid } = this.props;\n\n\t// \tawait raceStore.editContestant({\n\t// \t\tid: raceid,\n\t// \t\tclassId: signup.class,\n\t// \t\tnewContestant: {\n\t// \t\t\tteam: user.team,\n\t// \t\t\tfirstname: user.firstname,\n\t// \t\t\tlastname: user.lastname,\n\t// \t\t\tsportsClub: user.sportsClub,\n\t// \t\t\temail: user.email,\n\t// \t\t\tcellphone: user.cellphone,\n\t// \t\t\tfacebook: user.facebook,\n\t// \t\t\tinstagram: user.instagram,\n\t// \t\t\t ...signup\n\t// \t\t} });\n\t// }\n\n\trender() {\n        const { showSignup } = this.state;\n\t\tconst { appState, userStore, raceStore } = this.props.stores;\n\t\tconst { user = {}, teams = [], isAdmin } = userStore;\n        const { darkmode, language = 'en' } = appState;\n\t\tconst { raceid, subsection } = this.props;\n\t\tconst { race, signups, newSignup } = raceStore;\n\t\tconst today = new Date();\n        const hasSignedup = signups && signups.length > 0;\n        const skipTeams = signups.map(e => parseInt(e.team, 10)) || [];\n\n\t\treturn (\n\t\t\t<>\n                <h2 class='mb-0'><Text id='races.signup'>PÃ¥melding</Text> <span class='font-weight-lighter' style='letter-spacing: -1px;'> - {race.title}</span></h2>\n\t            <div class='mb-4'>\n                    {race.signupStartDate && <><Text id='races.periode'>Periode</Text>: {util.formatDate(race.signupStartDate, { locale: language, hour12: false, hour: '2-digit', minute: '2-digit' })}</>}\n                    {race.signupEndDate && <> - {util.formatDate(race.signupEndDate, { locale: language, hour12: false, hour: '2-digit', minute: '2-digit' })}</>}\n                </div>\n\n                {today >= new Date(race.signupStartDate) && today <= new Date(race.signupEndDate) ? <>\n\n                    {user.email ? <>\n\n                        <span class='font-weight-lighter'><Text id='races.signed-in-as'>Logget inn som</Text>:</span> {user.email}<br /><br />\n\n                        {hasSignedup && signups.map((signup) => {\n                            let signupClass = {};\n                            if (signup.class) {\n                                signupClass = raceStore.getRaceClassById(signup.class);\n                            }\n\n                            return (<div class='mb-5 p-3 bg-light border rounded-lg'>\n                                <div class='font-weight-bold mb-4'>\n                                    <i class='fas fa-check text-success' /> <Text id='races.signed-up'>Din bruker er pÃ¥meldt!</Text><br />\n                                    {/* {JSON.stringify(signup)} */}\n                                </div>\n\n                                {!race.liveRace && race.signuppayment && <>\n                                    <div class='form-group row my-0'>\n                                        <label for='cellphone' class='col-2 col-form-label text-right font-weight-lighter'><Text id='races.signup'>PÃ¥melding</Text></label>\n                                        <div class='col-10'>\n                                            {signup.paidSignupfee ? <div class='py-2'>\n                                                <Text id='races.paid'>Betalt</Text>: {util.formatDate(signup.paidSignupfee)}\n                                                <i class='fas fa-check text-success ml-3' />\n                                            </div> : <>\n                                                <div class='alert alert-danger mb-1' role='alert'>\n                                                    <h5>\n                                                        <span class='font-weight-lighter'><Text id='races.payment-info'>Betaling pÃ¥melding</Text>:</span> {mu.replaceImages(race.signuppayment, race.images, language, false)}<br />\n                                                        {signupClass.signupfee || race.signupfee} NOK\n                                                    </h5>\n                                                </div>\n                                            </>}\n                                        </div>\n                                    </div>\n                                </>}\n\n                                <div class='clearfix mt-2'>\n                                    <span class='font-weight-lighter float-right'><Text id='races.click-to-change'>Klikk for Ã¥ endre info i pÃ¥meldingen.</Text></span>\n                                </div>\n\n                                <div class='form-group row my-0'>\n                                    <label for='cellphone' class='col-2 col-form-label text-right font-weight-lighter'><Text id='races.cellphone'>Mobil</Text></label>\n                                    <div class='col-10'>\n                                        <Localizer>\n                                            <input type='text' class='form-control-plaintext' id='cellphone'\n                                                data-classid={signup.class}\n                                                data-contestantid={signup.id}\n                                                onInput={this.editSignup}\n                                                value={signup.cellphone}\n                                                placeholder={<Text id='races.cellphone-help'>Hva er mobilnummer ditt?</Text>}\n                                            />\n                                        </Localizer>\n                                    </div>\n                                </div>\n                                <div class='form-group row my-0'>\n                                    <label for='firstname' class='col-2 col-form-label text-right font-weight-lighter'><Text id='races.firstname'>Fornavn</Text></label>\n                                    <div class='col-10'>\n                                        <Localizer>\n                                            <input type='text' class='form-control-plaintext' id='firstname'\n                                                data-classid={signup.class}\n                                                data-contestantid={signup.id}\n                                                onInput={this.editSignup}\n                                                value={signup.firstname}\n                                                placeholder={<Text id='races.firstname-help'>Hva er fornavnet ditt?</Text>}\n                                            />\n                                        </Localizer>\n                                    </div>\n                                </div>\n                                <div class='form-group row my-0'>\n                                    <label for='lastname' class='col-2 col-form-label text-right font-weight-lighter'><Text id='races.lastname'>Etternavn</Text></label>\n                                    <div class='col-10'>\n                                        <Localizer>\n                                            <input type='text' class='form-control-plaintext' id='lastname'\n                                                data-classid={signup.class}\n                                                data-contestantid={signup.id}\n                                                onInput={this.editSignup}\n                                                value={signup.lastname}\n                                                placeholder={<Text id='races.lastname-help'>Hva er etternavnet ditt?</Text>}\n                                            />\n                                        </Localizer>\n                                    </div>\n                                </div>\n                                <div class='form-group row my-0'>\n                                    <label for='sportsClub' class='col-2 col-form-label text-right font-weight-lighter'><Text id='races.sportsclub'>Klubb</Text></label>\n                                    <div class='col-10'>\n                                        <Localizer>\n                                            <input type='text' class='form-control-plaintext' id='sportsClub'\n                                                data-classid={signup.class}\n                                                data-contestantid={signup.id}\n                                                onInput={this.editSignup}\n                                                value={signup.sportsClub}\n                                                placeholder={<Text id='races.sportsClub-help'>Hvilken klubb tilhÃ¸rer du?</Text>}\n                                            />\n                                        </Localizer>\n                                    </div>\n                                </div>\n                                <div class='form-group row my-0'>\n                                    <label for='facebook' class='col-2 col-form-label text-right font-weight-lighter'><Text id='races.facebook'>Facebook</Text></label>\n                                    <div class='col-10'>\n                                        <Localizer>\n                                            <input type='text' class='form-control-plaintext' id='facebook'\n                                                data-classid={signup.class}\n                                                data-contestantid={signup.id}\n                                                onInput={this.editSignup}\n                                                value={signup.facebook}\n                                                placeholder={<Text id='races.facebook-help'>Hva er Facebook brukernavnet ditt?</Text>}\n                                            />\n                                        </Localizer>\n                                    </div>\n                                </div>\n                                <div class='form-group row my-0'>\n                                    <label for='instagram' class='col-2 col-form-label text-right font-weight-lighter'><Text id='races.instagram'>Instagram</Text></label>\n                                    <div class='col-10'>\n                                        <Localizer>\n                                            <input type='text' class='form-control-plaintext' id='instagram'\n                                                data-classid={signup.class}\n                                                data-contestantid={signup.id}\n                                                onInput={this.editSignup}\n                                                value={signup.instagram}\n                                                placeholder={<Text id='races.instagram-help'>Hva er Instagram brukernavnet ditt?</Text>}\n                                            />\n                                        </Localizer>\n                                    </div>\n                                </div>\n                                <div class='form-group row my-0'>\n                                    <label for='team' class='col-2 col-form-label text-right font-weight-lighter'><Text id='races.team'>Team</Text></label>\n                                    <div class='col-10'>\n                                        <select class='form-control-plaintext' id='team' aria-describedby='teamHelp'\n                                            data-classid={signup.class}\n                                            data-contestantid={signup.id}\n                                            onInput={this.editSignup}\n                                            value={signup.team}\n                                        >\n                                            <option value=''>-- <Text id='races.choose-team'>Velg team</Text> --</option>\n                                            {teams.map(team => \n                                                <option value={team.id}\n                                                    disabled={skipTeams.indexOf(team.id) > -1}\n                                                >{team.name} {skipTeams.indexOf(team.id) > -1 && team.id !== signup.team ? '(Already signed up!)' : ''}</option>\n                                            )}\n                                        </select>\n                                    </div>\n                                </div>\n                                <div class='form-group row my-0'>\n                                    <label for='team' class='col-2 col-form-label text-right font-weight-lighter'><Text id='races.class'>Klasse</Text></label>\n                                    <div class='col-10'>\n                                        <select class='form-control-plaintext' id='class' aria-describedby='classHelp'\n                                            onInput={this.editSignup}\n                                            value={signup.class}\n                                            disabled\n                                        >\n                                            <option value=''>-- <Text id='races.choose-class'>Velg klasse</Text> --</option>\n                                            {race.classes && race.classes.sort((a, b) => a.distance - b.distance).map(currentClass => <>\n                                                <option value={currentClass.id}>\n                                                    {currentClass.title}{!race.liveRace && <>\n                                                        - {currentClass.distance} km - PÃ¥melding: {currentClass.signupfee || race.signupfee} NOK\n                                                    </>}\n                                                </option>\n                                            </>)}\n                                        </select>\n                                    </div>\n                                </div>\n\n                            </div>);\n                        })}\n                        \n                        {race.liveRace === 1 ? <>\n                            Signup is done at the race normal web pages.\n                        </> : <> \n                            {(hasSignedup && !showSignup) ? <>\n                                <button type='button' class='btn btn-sm float-right btn-outline-info' onClick={this.toggleShowSignup}><Text id='races.signup-another-team'>Meld meg pÃ¥ i flere klasser</Text></button>\n                            </> : <>\n\n                                <div class='form-group'>\n                                    <label for='cellphone'><Text id='races.cellphone'>Mobil</Text></label>\n                                    <input type='text' class='form-control' id='cellphone' aria-describedby='cellphoneHelp'\n                                        placeholder={user.cellphone}\n                                        onInput={this.updateSignup}\n                                        value={newSignup.cellphone}\n                                    />\n                                    <small id='cellphoneHelp' class='form-text text-muted'><Text id='races.cellphone-help'>'Hva er mobilnummer ditt?'</Text></small>\n                                </div>\n\n                                <div class='row'>\n                                    <div class='col'>\n                                        <div class='form-group'>\n                                            <label for='firstname'><Text id='races.firstname'>Fornavn</Text></label>\n                                            <input type='text' class='form-control' id='firstname' aria-describedby='firstnameHelp'\n                                                placeholder={user.firstname}\n                                                onInput={this.updateSignup}\n                                                value={newSignup.firstname}\n                                            />\n                                            <small id='firstnameHelp' class='form-text text-muted'><Text id='races.firstname-help'>Hva er fornavnet ditt?</Text></small>\n                                        </div>\n                                    </div>\n                                    <div class='col'>\n                                        <div class='form-group'>\n                                            <label for='lastname'><Text id='races.lastname'>Etternavn</Text></label>\n                                            <input type='text' class='form-control' id='lastname' aria-describedby='lastnameHelp'\n                                                placeholder={user.lastname}\n                                                onInput={this.updateSignup}\n                                                value={newSignup.lastname}\n                                            />\n                                            <small id='lastnameHelp' class='form-text text-muted'><Text id='races.lastname-help'>Hva er etternavnet ditt?</Text></small>\n                                        </div>\n                                    </div>\n                                </div>\n\n                                <div class='form-group'>\n                                    <label for='sportsClub'><Text id='races.sportsclub'>Klubb</Text></label>\n                                    <input type='text' class='form-control' id='sportsClub' aria-describedby='sportsClubHelp'\n                                        placeholder={user.sportsClub}\n                                        onInput={this.updateSignup}\n                                        value={newSignup.sportsClub}\n                                    />\n                                    <small id='sportsClubHelp' class='form-text text-muted'><Text id='races.sportsClub-help'>Hvilken klubb tilhÃ¸rer du?</Text></small>\n                                </div>\n\n                                <div class='row'>\n                                    <div class='col'>\n                                        <div class='form-group'>\n                                            <label for='facebook'><Text id='races.facebook'>Facebook</Text></label>\n                                            <input type='text' class='form-control' id='facebook' aria-describedby='facebookHelp'\n                                                placeholder={user.facebook}\n                                                onInput={this.updateSignup}\n                                                value={newSignup.facebook}\n                                            />\n                                            <small id='facebookHelp' class='form-text text-muted'><Text id='races.facebook-help'>Hva er Facebook brukernavnet ditt?</Text></small>\n                                        </div>\n                                    </div>\n                                    <div class='col'>\n                                        <div class='form-group'>\n                                            <label for='instagram'><Text id='races.instagram'>Instagram</Text></label>\n                                            <input type='text' class='form-control' id='instagram' aria-describedby='instagramHelp'\n                                                placeholder={user.instagram}\n                                                onInput={this.updateSignup}\n                                                value={newSignup.instagram}\n                                            />\n                                            <small id='instagramHelp' class='form-text text-muted'><Text id='races.instagram-help'>Hva er Instagram brukernavnet ditt?</Text></small>\n                                        </div>\n                                    </div>\n                                </div>\n                                <div class='form-group'>\n                                    <label for='team'><Text id='races.team'>Team</Text></label>\n                                    {!teams || teams.length === 0 && <>\n                                        <div class='alert alert-danger' role='alert'>\n                                            <Text id='races.no-teams'>Du har ingen team i appen din ennÃ¥. GÃ¥ inn i appen for Ã¥ registrer team og forsÃ¸k igjen.</Text>\n                                        </div>\n                                    </>}\n                                    <select class='form-control' id='team' aria-describedby='teamHelp'\n                                        onInput={this.updateSignup}\n                                        value={newSignup.team}\n                                    >\n                                        <option value=''>-- <Text id='races.choose-team'>Velg team</Text> --</option>\n                                        {teams.map(team => \n                                            <option value={team.id}\n                                                disabled={skipTeams.indexOf(team.id) > -1}\n                                            >{team.name} {skipTeams.indexOf(team.id) > -1 ? '(Already signed up!)' : ''}</option>\n                                        )}\n                                    </select>\n                                    <small id='teamHelp' class='form-text text-muted'><Text id='races.choose-team-help'>Velg fra dine team</Text></small>\n                                </div>\n\n                                <div class='form-group'>\n                                    <label for='class'><Text id='races.class'>Klasse</Text></label>\n                                    <select class='form-control' id='class' aria-describedby='classHelp'\n                                        onInput={this.updateSignup}\n                                        value={newSignup.class}\n                                    >\n                                        <option value=''>-- <Text id='races.choose-class'>Velg klasse</Text> --</option>\n                                        {race.classes && race.classes.map(currentClass => <>\n                                            <option value={currentClass.id}>{currentClass.title} - {currentClass.distance} km - PÃ¥melding: {currentClass.signupfee || race.signupfee} NOK</option>\n                                        </>)}\n                                    </select>\n                                    <small id='classHelp' class='form-text text-muted'><Text id='races.choose-class-help'>Velg Ã¸nsket klasse.</Text></small>\n                                </div>\n\n                                {race.rules && <div class='form-group form-check'>\n                                    <input type='checkbox' class='form-check-input' id='termsAndAgreement'\n                                        onInput={this.updateSignup}\n                                        checked={newSignup.termsAndAgreement}\n                                        value={true}\n                                    />\n                                    <label class='form-check-label' for='termsAndAgreement'><Text id='races.agreement-accept'>Jeg har lest og godtar reglene for lÃ¸pet.</Text></label>\n                                </div>}\n\n                                {race.declaration && <div class='form-group form-check'>\n                                    <input type='checkbox' class='form-check-input' id='declaration'\n                                        onInput={this.updateSignup}\n                                        checked={newSignup.declaration}\n                                        value={true}\n                                    />\n                                    <label class='form-check-label' for='declaration'><Text id='races.declaration-accept'>Jeg signerer med dette egenÃ¦rklÃ¦ringen.</Text></label>\n                                </div>}\n\n                                <button type='button' class='btn btn-primary' onClick={this.signupToRace}><Text id='races.do-signup'>Meld meg pÃ¥</Text></button>\n\n                                {hasSignedup && <button type='button' class='btn btn-danger float-right' onClick={this.toggleShowSignup}><Text id='races.hide-signup'>Avbryt</Text></button>}\n                            </>}\n                        </>}\n\n                    </> : <>\n\n                        {!subsection && <LoginForm stores={this.props.stores}\n                            routeLoginOk={`/race/${raceid}/signup`}\n                            routeLoginNew={`/race/${raceid}/signup/newUser`}\n                            routeLoginForgot={`/race/${raceid}/signup/forgotPassword`}\n                        />}\n\n                        {subsection === 'newUser' && <LoginRegister stores={this.props.stores}\n                            routeLogin={`/race/${raceid}/signup`}\n                            routeLoginForgot={`/race/${raceid}/signup/forgotPassword`}\n                            skipPubSub={true}\n                        />}\n\n                        {subsection === 'forgotPassword' && <LoginForgot stores={this.props.stores}\n                            routeLogin={`/race/${raceid}/signup`}\n                            routeLoginNew={`/race/${raceid}/signup/newUser`}\n                        />}\n                    </>}\n\n                </> : <>\n                    {today < new Date(race.signupStartDate) ? <>\n                        <h5 class='mt-4'>\n                            <i class='fas fa-exclamation-circle' /> <Text id='races.signup-not-open-yet'>PÃ¥meldingen har ikke Ã¥pnet ennÃ¥!</Text>\n                        </h5>\n                        <p class='mt-4'>\n                            <Text id='races.signup-opening'>PÃ¥meldingen Ã¥pner</Text>:<br />\n                            <span class='display-4'>{util.formatDate(race.signupStartDate, { locale: language, hour12: false, hour: '2-digit', minute: '2-digit' })}</span>\n                        </p>\n                    </> : <>\n                        <h5 class='mt-4 mb-4'>\n                            <i class='fas fa-exclamation-circle' /> <Text id='races.signup-closed'>PÃ¥meldingen er stengt!</Text>\n                        </h5>\n                    </>}\n                </>}\n            </>\n\t\t);\n\t}\n}\n\nexport default PublicRaceDetailSignup;\n","import { h, Component } from 'preact';\nimport { useEffect } from \"preact/hooks\";\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport { Text, Localizer } from 'preact-i18n';\nimport linkstate from 'linkstate';\nimport Markdown from 'preact-markdown';\n\nimport Header from './header';\nimport Submenu from './submenu';\nimport DetailSignup from './detail-signup.js';\n\nimport LoginForm from '../../../components/login/loginForm';\nimport LoginRegister from '../../../components/register';\nimport LoginForgot from '../../../components/forgotten';\nimport RaceComments from './comments';\nimport RaceAddComment from './commentAdd';\nimport RaceText from './raceText';\nimport Images from '../../../components/form/images';\n\nimport mu from '../../../lib/musher-util';\nconst MARGIN_TOP = mu.marginTop(true, true);\nconst MARGIN_BOTTOM = mu.marginBottom();\n\nfunction PageTitle(title) {\n  useEffect(() => {\n    document.title = `Homerun Race: ${title}`;\n  }, [title]);\n  return <h1 class='my-0'>{title}</h1>;\n}\n\nconst initialState = {\n\tisLoading: false,\n\temail: '',\n\tsubmenu: 'ads',\n\tjwtToken: util.getJwtToken(),\n\tnewRaceArticle: {},\n\tnewRaceUserImage: {},\n};\n\n@observer\nclass PublicRaceDetail extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            ...initialState,\n        };\n\t\tthis.inputRef = {};\n\t\tthis.updateTimer = {};\n    }\n\n\tasync loadRace(props = this.props) {\n\t\tthis.setState({ isLoading: true });\n\t\tconst { raceStore, userStore } = props.stores;\n\t\tconst { user = {} } = userStore;\n\t\tconst { raceid } = props;\n\t\tawait raceStore.load(raceid);\n\t\traceStore.countAll();\n\t\tthis.setState({ isLoading: false });\n\n\t\tlet signup = {};\n\t\traceStore.resetSignup();\n\t\tconst { race } = raceStore;\n\t\tif (race.classes && user && user.email) {\n\t\t\tfor (let i = 0, l = race.classes.length; i < l; i += 1) {\n\t\t\t\tconst currentClass = race.classes[i];\n\t\t\t\tif (currentClass.contestants) {\n\t\t\t\t\tconst idx = currentClass.contestants.findIndex(e => e.email === user.email);\n\t\t\t\t\tif (idx > -1) {\n\t\t\t\t\t\tsignup = { ...currentClass.contestants[idx], class: currentClass.id };\n\t\t\t\t\t\traceStore.addSignup(signup);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\traceStore.updateKeyValue('signup', signup);\n\n\t\tthis.resizeAllTextareas();\n\t}\n\n\tlikeRace = async () => {\n\t\tconst { raceStore } = this.props.stores;\n\t\tconst { race } = raceStore;\n\t\tconst response = await raceStore.likeRace({ id: race.id });\n\n        if (response && response.status === 200) {\n\t\t\t// this.loadRaceDetail({ race });\n\t\t}\n\t}\n\n\ttoggleAddComment = (e) => {\n\t\tconst raceId = e.target.parentElement.dataset.id || e.target.dataset.id;\n\t\tconst { showAddComment } = this.state;\n\t\tthis.setState({\n\t\t\tshowAddComment: !showAddComment,\n\t\t}, () => {\n\t\t\tif (this.inputRef[raceId]) {\n\t\t\t\tthis.inputRef[raceId].focus();\n\t\t\t}\n\t\t});\n\t}\n\n\taddRaceArticle = async () => {\n\t\tconst { raceid } = this.props;\n        const { raceStore } = this.props.stores;\n\t\tconst { newRaceArticle } = this.state;\n\t\tawait raceStore.addArticle({ id: raceid, newArticle: newRaceArticle });\n\t\tthis.setState({\n\t\t\tnewRaceArticle: {},\n\t\t});\n\t}\n\n\taddRaceUserImage = async () => {\n\t\tconst { raceid } = this.props;\n        const { raceStore } = this.props.stores;\n\t\tconst { newRaceUserImage } = this.state;\n\t\tawait raceStore.addUserImage({ id: raceid, newUserImage: newRaceUserImage });\n\t\tthis.setState({\n\t\t\tnewRaceUserImage: {},\n\t\t});\n\t}\n\n\tupdateUserImageUpload = ({ field, value }) => {\n\t\t// updateField({ id: object.id, field: 'images', value: images, skipTimer: true });\n\t\tconst { newRaceUserImage } = this.state;\n\t\tnewRaceUserImage[field] = value;\n\t\tthis.setState({ newRaceUserImage });\n\t}\n\n\tupdateArticleUpload = ({ field, value }) => {\n\t\t// updateField({ id: object.id, field: 'images', value: images, skipTimer: true });\n\t\tconst { newRaceArticle } = this.state;\n\t\tnewRaceArticle[field] = value;\n\t\tthis.setState({ newRaceArticle });\n\t}\n\n\tremoveRaceArticle = async (e) => {\n\t\tconst id = e.target.parentElement.dataset.id || e.target.dataset.id;\n\t\tconst { raceid } = this.props;\n        const { raceStore } = this.props.stores;\n\t\tawait raceStore.removeArticle({\n\t\t\tid: raceid,\n\t\t\tarticleId: id,\n\t\t});\n\t}\n\n\tremoveRaceUserImage = async (e) => {\n\t\tconst id = e.target.parentElement.dataset.id || e.target.dataset.id;\n\t\tconst { raceid } = this.props;\n        const { raceStore } = this.props.stores;\n\t\tawait raceStore.removeUserImage({\n\t\t\tid: raceid,\n\t\t\tuserImageId: id,\n\t\t});\n\t}\n\n\teditRaceArticle = async (e) => {\n\t\tconst { id, field } = e.target.dataset;\n\t\tconst { value } = e.target;\n\t\tconst { raceid } = this.props;\n\t\tconst { raceStore } = this.props.stores;\n\t\tconst data = {\n\t\t\traceArticleId: id,\n\t\t\t[`raceArticle${util.ucfirst(field)}`]: value,\n\t\t};\n\t\tclearTimeout(this.updateTimer[`${raceid}-${id}-${field}`]);\n\t\tthis.updateTimer[`${raceid}-${id}-${field}`] = setTimeout(async () => {\n\t\t\traceStore.editArticle({\n\t\t\t\tid: raceid,\n\t\t\t\tdata,\n\t\t\t});\n\t\t}, 1500);\n\n\t\tthis.resizeTextarea(e.target);\n\t}\n\n\teditRaceUserImage = async (e) => {\n\t\tconst { id, field } = e.target.dataset;\n\t\tconst { value } = e.target;\n\t\tconst { raceid } = this.props;\n\t\tconst { raceStore } = this.props.stores;\n\t\tconst data = {\n\t\t\traceUserImageId: id,\n\t\t\t[`raceUserImage${util.ucfirst(field)}`]: value,\n\t\t};\n\t\tclearTimeout(this.updateTimer[`${raceid}-${id}-${field}`]);\n\t\tthis.updateTimer[`${raceid}-${id}-${field}`] = setTimeout(async () => {\n\t\t\traceStore.editUserImage({\n\t\t\t\tid: raceid,\n\t\t\t\tdata,\n\t\t\t});\n\t\t}, 1500);\n\n\t\tthis.resizeTextarea(e.target);\n\t}\n\n\tresizeAllTextareas = () => {\n\t\tconst textareaList = document.getElementsByTagName('textarea');\n\t\tfor(let i = 0, l = textareaList.length; i < l; i += 1){\n\t\t\tconst textarea = textareaList[i];\n\t\t\tthis.resizeTextarea(textarea);\n\t\t}\n\t}\n\n\tresizeTextarea = (el) => {\n\t\tlet element = el;\n\t\tif (element.target) {\n\t\t\telement = el.target;\n\t\t}\n\t\tconst { scrollHeight } = element;\n\t\telement.style.height = `${scrollHeight}px`;\n\t}\n\n\thandleImageErrored = (e) => {\n        const image = e.target;\n        image.onerror = null;\n        setTimeout(() => {\n            image.src += `?${new Date()}`;\n        }, 1000);\n    }\n\n\tcomponentDidMount() {\n\t\tthis.loadRace();\n\t}\n\n\tcomponentWillReceiveProps(nextProps) {\n\t\tthis.loadRace(nextProps);\n\t}\n\n\trender() {\n\t\tconst { showAddComment, newRaceArticle, newRaceUserImage } = this.state;\n\t\tconst { appState, userStore, raceStore } = this.props.stores;\n\t\tconst { allUsers, isAdmin, user = {}, notifications = [], teams = [] } = userStore;\n\t\tconst { raceid, path, section, subsection, col = 12, offset = 0 } = this.props;\n\t\tconst { darkmode, language = 'en' } = appState;\n\t\tconst { race, totalClasses, totalContestants } = raceStore;\n\n\t\tconst { likes = [], comments = [] } = race;\n\t\tconst hasLikedRace = race.likes && race.likes.findIndex(e => e.user === user.id) > -1;\n\n\t\tconst today = new Date();\n\t\tlet status = '';\n\t\tif (today >= new Date(race.startDate) && today <= new Date(race.endDate)) {\n\t\t\tstatus = 'race';\n\t\t} else if (today >= new Date(race.signupStartDate) && today <= new Date(race.signupEndDate)) {\n\t\t\tstatus = 'signup';\n\t\t} else if (today > new Date(race.endDate)) {\n\t\t\tstatus = 'done';\n\t\t}\n\n\t\treturn (\n\t\t\t<>\n\t\t\t\t<Header stores={this.props.stores} />\n\n\t\t\t\t<div class='container-fluid position-relative' style={`margin-bottom: ${MARGIN_BOTTOM}; margin-top: ${MARGIN_TOP};`}>\n\t\t\t\t\t<Submenu stores={this.props.stores} path={path} raceid={raceid} />\n\n\t\t\t\t\t{isAdmin && <span class='float-right position-absolute' style='top: 10px; right: 10px; z-index:10000;'>\n\t\t\t\t\t\t<a href={`/race/${raceid}/edit`} class='btn btn-small btn-primary'>\n\t\t\t\t\t\t\t<nobr><i class='fas fa-chart-line' /> <Text id='race.edit'>Endre lÃ¸pet</Text></nobr>\n\t\t\t\t\t\t</a>\n\t\t\t\t\t</span>}\n\n\t\t\t\t\t<div class='row border-bottom '>\n\t\t\t\t\t\t<div class='col-12'>\n\t\t\t\t\t\t\t{/* <span class='position-absolute d-none d-lg-block' style='top: 0px; right: 0px;'>\n\t\t\t\t\t\t\t\t<iframe width='350' height='450' src='https://www.spleis.no/project/164024/embed' frameborder='0' />\n\t\t\t\t\t\t\t</span> */}\n\n\t\t\t\t\t\t\t<div class='jumbotron-thumb d-flex align-items-center position-relative'>\n\t\t\t\t\t\t\t\t{(race.images && race.images[0]) ? <img src={race.images[0].s3XXLargeLink} class='img-fluid border rounded-lg' style='min-width: 100%' /> : ''}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<h3 class='float-right'>\n\t\t\t\t\t\t\t\t{status === 'signup' && !race.liveRace && <>\n\t\t\t\t\t\t\t\t\t<div class='spinner-grow text-primary' role='status' />\n\t\t\t\t\t\t\t\t\t<span class='badge badge-primary ml-2'><Text id='races.signup-open'>PÃ¥melding Ã¥pen</Text></span>\n\t\t\t\t\t\t\t\t</>}\n\t\t\t\t\t\t\t\t{status === 'race' && <>\n\t\t\t\t\t\t\t\t\t<div class='spinner-grow text-danger' role='status' />\n\t\t\t\t\t\t\t\t\t<span class='badge badge-danger ml-2'><Text id='races.race-in-progress'>LÃ¸p pÃ¥gÃ¥r</Text></span>\n\t\t\t\t\t\t\t\t</>}\n\t\t\t\t\t\t\t\t{status === 'done' && <>\n\t\t\t\t\t\t\t\t\t<i class='fas fa-check text-success' />\n\t\t\t\t\t\t\t\t\t<span class='badge badge-success ml-2'><Text id='races.race-finished'>LÃ¸p avsluttet</Text></span>\n\t\t\t\t\t\t\t\t</>}\n\t\t\t\t\t\t\t</h3>\n\t\t\t\t\t\t\t<h1 class='float-right'>\n\t\t\t\t\t\t\t\t{isAdmin && <i class={`fas fa-eye${race.active ? ' text-success' : '-slash text-danger'} float-right`} />}\n\t\t\t\t\t\t\t</h1>\n\t\t\t\t\t\t\t{PageTitle(race.title)}\n\t\t\t\t\t\t\t{totalContestants > 10 ? <span class='text-muted font-weight-lighter'><Text id='races.starting-teams' fields={{ totalContestants, totalClasses }} /></span> : <></>}\n\t\t\t\t\t\t\t<div class='text-muted mt-2'>\n\t\t\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t\t\t{race.startDate && <>{util.formatDate(race.startDate, { locale: language, hour12: false, hour: '2-digit', minute: '2-digit' })}</>}\n\t\t\t\t\t\t\t\t\t{race.endDate && <> - {util.formatDate(race.endDate, { locale: language, hour12: false, hour: '2-digit', minute: '2-digit' })}</>}\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t<span class=''>\n\t\t\t\t\t\t\t\t\t{race.tag && race.tag.split(',').map(tag => <>\n\t\t\t\t\t\t\t\t\t\t<span class='badge badge-pill badge-primary py-1 ml-2'>\n\t\t\t\t\t\t\t\t\t\t\t<a class='text-white' href={`https://www.facebook.com/hashtag/${tag}`} target='_blank' rel='noreferrer' native>\n\t\t\t\t\t\t\t\t\t\t\t\t<i class='fab fa-facebook' /> #{tag}\n\t\t\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t<span class='badge badge-pill badge-primary py-1 ml-2'>\n\t\t\t\t\t\t\t\t\t\t\t<a class='text-white' href={`https://www.instagram.com/explore/tags/${tag}`} target='_blank' rel='noreferrer' native>\n\t\t\t\t\t\t\t\t\t\t\t\t<i class='fab fa-instagram' /> #{tag}\n\t\t\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t</>)}\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t{race.contactEmail && <span class='ml-2'>\n\t\t\t\t\t\t\t\t\t<a href={`mailto:${race.contactEmail}subject=Regarding ${race.title}&body=Write your question here :)`}><i class='fas fa-envelope' /> {race.contactEmail}</a>\n\t\t\t\t\t\t\t\t</span>}\n\t\t\t\t\t\t\t\t{race.facebook && <span class='ml-2'>\n\t\t\t\t\t\t\t\t\t<a href={`${race.facebook}`} target='_blank' rel='noreferrer' native><i class='fab fa-facebook' /> Facebook</a>\n\t\t\t\t\t\t\t\t</span>}\n\t\t\t\t\t\t\t\t{race.instagram && <span class='ml-2'>\n\t\t\t\t\t\t\t\t\t<a href={`${race.instagram}`} target='_blank' rel='noreferrer' native><i class='fab fa-instagram' /> Instagram</a>\n\t\t\t\t\t\t\t\t</span>}\n\t\t\t\t\t\t\t\t{race.signuppayment && <span class='badge badge-pill badge-success py-1 ml-2'>\n\t\t\t\t\t\t\t\t\t<span class='font-weight-lighter'><Text id='race.signup-payment'>Betaling pÃ¥melding</Text>:</span> {mu.replaceImages(race.signuppayment, race.images, language, false)}\n\t\t\t\t\t\t\t\t</span>}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t{race.locationCity && <div class='text-muted'>\n\t\t\t\t\t\t\t\t<Text id='race.location'>Sted</Text>: {race.locationCity}, {race.locationCountry}\n\t\t\t\t\t\t\t</div>}\n\n\t\t\t\t\t\t\t{/* contactEmail\n\t\t\t\t\t\t\tcontactCellphone\n\t\t\t\t\t\t\tfacebook\n\t\t\t\t\t\t\tinstagram */}\n\n\t\t\t\t\t\t\t<ul class='nav nav-tabs my-3'>\n\t\t\t\t\t\t\t\t<li class='nav-item'>\n\t\t\t\t\t\t\t\t\t<a class={`nav-link ${!section ? 'active' :''}`} href={`/race/${raceid}`}><i class='fas fa-info-circle' /> <Text id='race.about'>Om lÃ¸pet</Text></a>\n\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t<li class='nav-item'>\n\t\t\t\t\t\t\t\t\t<a class={`nav-link ${section === 'news' ? 'active' :''}`} href={`/race/${raceid}/news`}><i class='fas fa-rss' /> <Text id='race.news'>Nyheter</Text></a>\n\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t<li class='nav-item'>\n\t\t\t\t\t\t\t\t\t<a class={`nav-link ${section === 'rules' ? 'active' :''}`} href={`/race/${raceid}/rules`}><i class='fas fa-gavel' /> <Text id='race.rules'>Regler</Text></a>\n\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t{race.veterinaryInfo && <li class='nav-item'>\n\t\t\t\t\t\t\t\t\t<a class={`nav-link ${section === 'veterinaryInfo' ? 'active' :''}`} href={`/race/${raceid}/veterinaryInfo`}><i class='fas fa-stethoscope' /> <Text id='race.veterinary'>VeterinÃ¦rinfo</Text></a>\n\t\t\t\t\t\t\t\t</li>}\n\t\t\t\t\t\t\t\t{race.checkpoints && <li class='nav-item'>\n\t\t\t\t\t\t\t\t\t<a class={`nav-link ${section === 'checkpoints' ? 'active' :''}`} href={`/race/${raceid}/checkpoints`}><i class='fas fa-map-marker-alt' /> <Text id='race.checkpoints'>Sjekkpunkter</Text></a>\n\t\t\t\t\t\t\t\t</li>}\n\t\t\t\t\t\t\t\t{race.trailDescription && <li class='nav-item'>\n\t\t\t\t\t\t\t\t\t<a class={`nav-link ${section === 'trailDescription' ? 'active' :''}`} href={`/race/${raceid}/trailDescription`}><i class='fas fa-map-signs' /> <Text id='race.track-description'>LÃ¸ypebeskrivelse</Text></a>\n\t\t\t\t\t\t\t\t</li>}\n\t\t\t\t\t\t\t\t{race.program && <li class='nav-item'>\n\t\t\t\t\t\t\t\t\t<a class={`nav-link ${section === 'program' ? 'active' :''}`} href={`/race/${raceid}/program`}><i class='fas fa-list-alt' /> <Text id='race.program'>Program</Text></a>\n\t\t\t\t\t\t\t\t</li>}\n\t\t\t\t\t\t\t\t{race.prices && <li class='nav-item'>\n\t\t\t\t\t\t\t\t\t<a class={`nav-link ${section === 'prices' ? 'active' :''}`} href={`/race/${raceid}/prices`}><i class='fas fa-award' /> <Text id='race.prices'>Premier</Text></a>\n\t\t\t\t\t\t\t\t</li>}\n\t\t\t\t\t\t\t\t<li class='nav-item'>\n\t\t\t\t\t\t\t\t\t<a class={`nav-link ${section === 'classes' ? 'active' :''}`} href={`/race/${raceid}/classes`}><i class='fas fa-folder-open' /> <Text id='race.classes'>Klasser</Text></a>\n\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t<li class='nav-item'>\n\t\t\t\t\t\t\t\t\t<a class={`nav-link ${section === 'signup' ? 'active' :''}`} href={`/race/${raceid}/signup`}><i class='fas fa-folder-open' /> <Text id='race.signup'>PÃ¥melding</Text></a>\n\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t</ul>\n\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class={`col-${col} offset-${offset} col-sm-8 col-lg-8 offset-sm-2 offset-lg-2`}>\n\t\t\t\t\t\t\t{!section && <>\n\n\t\t\t\t\t\t\t\t{race.articles && race.articles.length > 0 && <div class='row'>\n\t\t\t\t\t\t\t\t\t<div class='col-12 mb-3 py-2 position-relative border-bottom bg-light'>\n\t\t\t\t\t\t\t\t\t\t<small>\n\t\t\t\t\t\t\t\t\t\t\t<div class='font-weight-bold'>\n\t\t\t\t\t\t\t\t\t\t\t\t<i class='fas fa-rss' /> <Text id='race.news'>Nyheter</Text>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t<div class='row'>\n\t\t\t\t\t\t\t\t\t\t\t\t{race.articles && race.articles.reverse().slice(0, 3).map(currentArticle => <>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div class='col-12 col-sm-6 col-md-4 col-lg-4 p-3 position-relative'>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{currentArticle.image && <img src={currentArticle.image.s3LargeLink} class='float-right rounded-lg ml-2' style='height: 70px;' />}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span class='text-muted font-weight-light mr-2'>{util.formatDate(currentArticle.date, { locale: language, hour12: false, hour: '2-digit', minute: '2-digit' })}</span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span class='font-weight-bold mr-2' style='font-size: 1.2em;'><a href={`/race/${raceid}/news`} class={`text-${darkmode ? 'light' : 'dark'}`}>{mu.replaceImages(currentArticle.title, race.images, language, false)}</a></span><br />\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span class='font-weight-normal'>{mu.replaceImages(currentArticle.body, race.images, language, false)}</span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t</>)}\n\t\t\t\t\t\t\t\t\t\t\t\t{race.articles.length > 3 && <div class='col-12 mt-2 text-center' style='font-size: 1.5em;'>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<a href={`/race/${raceid}/news`} class='text-muted'><Text id='race.more-news'>Flere nyheter</Text> &raquo;</a>\n\t\t\t\t\t\t\t\t\t\t\t\t</div>}\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t</small>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>}\n\n\t\t\t\t\t\t\t\t<p class='clearfix'>\n\t\t\t\t\t\t\t\t\t<strong>\n\t\t\t\t\t\t\t\t\t\t<Markdown markdown={mu.replaceImages(race.ingress, race.images, language)} markdownOpts={mu.getMarkdownOptions()} />\n\t\t\t\t\t\t\t\t\t</strong>\n\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t<Markdown markdown={mu.replaceImages(race.body, race.images, language)} markdownOpts={mu.getMarkdownOptions()} />\n\t\t\t\t\t\t\t</>}\n\n\t\t\t\t\t\t\t{section === 'news' && <>\n\t\t\t\t\t\t\t\t<div class='row'>\n\t\t\t\t\t\t\t\t\t<div class='col-12'>\n\t\t\t\t\t\t\t\t\t\t<h2><Text id='race.news'>Nyheter</Text></h2>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t{race.articles && race.articles.reverse().map(currentArticle => <>\n\t\t\t\t\t\t\t\t\t\t<div class='col-12 col-sm-12 col-md-6 col-lg-4 p-3 position-relative'>\n\t\t\t\t\t\t\t\t\t\t\t<h5>{mu.replaceImages(currentArticle.title, race.images, language, false)}</h5>\n\t\t\t\t\t\t\t\t\t\t\t{currentArticle.image && <img src={currentArticle.image.s3LargeLink} class='float-right w-50 rounded-lg ml-2' />}\n\t\t\t\t\t\t\t\t\t\t\t<small class='text-muted'> {util.formatDate(currentArticle.date, { locale: language, hour12: false, hour: '2-digit', minute: '2-digit' })}</small><br />\n\t\t\t\t\t\t\t\t\t\t\t<div class='font-weight-bold'>\n\t\t\t\t\t\t\t\t\t\t\t\t<Markdown markdown={mu.replaceImages(currentArticle.ingress, race.images, language)} markdownOpts={mu.getMarkdownOptions()} />\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\t\t\t<Markdown markdown={mu.replaceImages(currentArticle.body, race.images, language)} markdownOpts={mu.getMarkdownOptions()} />\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</>)}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</>}\n\n\t\t\t\t\t\t\t{section === 'rules' && <>\n\t\t\t\t\t\t\t\t<h2><Text id='race.rules'>Regler</Text></h2>\n\t\t\t\t\t\t\t\t<Markdown markdown={mu.replaceImages(race.rules, race.images, language)} markdownOpts={mu.getMarkdownOptions()} />\n\t\t\t\t\t\t\t</>}\n\n\t\t\t\t\t\t\t{section === 'veterinaryInfo' && <>\n\t\t\t\t\t\t\t\t<h2><Text id='race.veterinary'>VeterinÃ¦rinfo</Text></h2>\n\t\t\t\t\t\t\t\t<Markdown markdown={mu.replaceImages(race.veterinaryInfo, race.images, language)} markdownOpts={mu.getMarkdownOptions()} />\n\t\t\t\t\t\t\t</>}\n\n\t\t\t\t\t\t\t{section === 'checkpoints' && <>\n\t\t\t\t\t\t\t\t<h2><Text id='race.checkpoints'>Sjekkpunkter</Text></h2>\n\t\t\t\t\t\t\t\t<Markdown markdown={mu.replaceImages(race.checkpoints, race.images, language)} markdownOpts={mu.getMarkdownOptions()} />\n\t\t\t\t\t\t\t</>}\n\n\t\t\t\t\t\t\t{section === 'trailDescription' && <>\n\t\t\t\t\t\t\t\t<h2><Text id='race.track-description'>LÃ¸ypebeskrivelse</Text></h2>\n\t\t\t\t\t\t\t\t<Markdown markdown={mu.replaceImages(race.trailDescription, race.images, language)} markdownOpts={mu.getMarkdownOptions()} />\n\t\t\t\t\t\t\t</>}\n\n\t\t\t\t\t\t\t{section === 'program' && <>\n\t\t\t\t\t\t\t\t<h2><Text id='race.program'>Program</Text></h2>\n\t\t\t\t\t\t\t\t<Markdown markdown={mu.replaceImages(race.program, race.images, language)} markdownOpts={mu.getMarkdownOptions()} />\n\t\t\t\t\t\t\t</>}\n\n\t\t\t\t\t\t\t{section === 'prices' && <>\n\t\t\t\t\t\t\t\t<h2><Text id='race.prices'>Premier</Text></h2>\n\t\t\t\t\t\t\t\t<Markdown markdown={mu.replaceImages(race.prices, race.images, language)} markdownOpts={mu.getMarkdownOptions()} />\n\t\t\t\t\t\t\t</>}\n\n\t\t\t\t\t\t\t{section === 'classes' && <>\n\t\t\t\t\t\t\t\t<h2><Text id='race.classes'>Klasser</Text></h2>\n\t\t\t\t\t\t\t\t<div class='row'>\n\t\t\t\t\t\t\t\t\t{race.classes && race.classes.sort((a, b) => a.distance - b.distance).map(currentClass => <>\n\t\t\t\t\t\t\t\t\t\t<div class='col-6 col-sm-6 col-lg-4 mb-4'>\n\t\t\t\t\t\t\t\t\t\t\t<div class='border rounded rounded-lg p-3'>\n\t\t\t\t\t\t\t\t\t\t\t\t<h5>{currentClass.title}</h5>\n\n\t\t\t\t\t\t\t\t\t\t\t\t<small>\n\t\t\t\t\t\t\t\t\t\t\t\t\t{currentClass.startDate && <div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span class='font-weight-lighter'><Text id='race.startdate'>Start</Text>:</span> {util.formatDate(`${currentClass.startDate} ${currentClass.startTime || '00:00:00'}`, { locale: language, hour12: false, hour: '2-digit', minute: '2-digit' })}\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div>}\n\t\t\t\t\t\t\t\t\t\t\t\t\t{currentClass.endDate && <div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span class='font-weight-lighter'><Text id='race.enddate'>End</Text>:</span> {util.formatDate(`${currentClass.endDate} ${currentClass.endTime || '00:00:00'}`, { locale: language, hour12: false, hour: '2-digit', minute: '2-digit' })}\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div>}\n\t\t\t\t\t\t\t\t\t\t\t\t</small>\n\n\t\t\t\t\t\t\t\t\t\t\t\t<div><span class='font-weight-lighter'><Text id='race.distance'>Distanse</Text>:</span> {currentClass.distance} km</div>\n\t\t\t\t\t\t\t\t\t\t\t\t<div><span class='font-weight-lighter'><Text id='race.signup'>PÃ¥melding</Text>:</span> {currentClass.signupfee || race.signupfee} NOK</div>\n\t\t\t\t\t\t\t\t\t\t\t\t<p class='clearfix'>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Markdown markdown={mu.replaceImages(currentClass.ingress, race.images, language)} markdownOpts={mu.getMarkdownOptions()} />\n\t\t\t\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t\t\t\t<small>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Markdown markdown={mu.replaceImages(currentClass.body, race.images, language)} markdownOpts={mu.getMarkdownOptions()} />\n\t\t\t\t\t\t\t\t\t\t\t\t</small>\n\t\t\t\t\t\t\t\t\t\t\t\t{currentClass.rules && <>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<h5><Text id='race.rules'>Regler</Text></h5>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Markdown markdown={mu.replaceImages(currentClass.rules, race.images, language)} markdownOpts={mu.getMarkdownOptions()} />\n\t\t\t\t\t\t\t\t\t\t\t\t</>}\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</>)}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</>}\n\n\t\t\t\t\t\t\t{section === 'signup' && <DetailSignup stores={this.props.stores} raceid={raceid} subsection={subsection} />}\n\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t{/* <div class='row'>\n\t\t\t\t\t\t\t<div class='col-12'>\n\t\t\t\t\t\t\t\t{race.images && race.images.map(image => <>\n\t\t\t\t\t\t\t\t\t<div class='d-flex mx-0'>\n\t\t\t\t\t\t\t\t\t\t<img src={image.s3LargeLink} class='img-fluid align-middle' />\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</>)}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div> */}\n\n\t\t\t\t\t\t<div class={`col-${col} offset-${offset} col-sm-8 col-lg-6 offset-sm-2 offset-lg-3 mt-5`}>\n\t\t\t\t\t\t\t{likes && likes.length > 0 && <small class='bg-light shadow-sm rounded-lg py-0 px-1' style='bottom: 20px; right: 15px;'>\n\t\t\t\t\t\t\t\t<i class='fas fa-thumbs-up text-primary' /> {likes.length}\n\t\t\t\t\t\t\t</small>}\n\t\t\t\t\t\t\t{comments && comments.length > 0 && <small class='float-right bg-light shadow-sm rounded-lg py-0 px-1' style='bottom: 20px; right: 15px;'>\n\t\t\t\t\t\t\t\t<i class='fas fa-comment text-primary' /> {comments.length}\n\t\t\t\t\t\t\t</small>}\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t{user.email && <div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-2 mb-3'>\n\t\t\t\t\t\t\t<div class='row'>\n\t\t\t\t\t\t\t\t<div class='col-6 text-center'>\n\t\t\t\t\t\t\t\t\t<button type='button' class={`btn btn-outline-${hasLikedRace ? 'primary' : 'secondary'} btn-lg btn-block ${hasLikedRace ? 'text-primary' : ''}`}\n\t\t\t\t\t\t\t\t\t\tonClick={this.likeRace}\n\t\t\t\t\t\t\t\t\t\t// disabled={hasLikedRace}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<i class={`${hasLikedRace ? 'text-primary fas' : 'far'} fa-thumbs-up`} /> Like\n\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class='col-6 text-center'>\n\t\t\t\t\t\t\t\t\t<button type='button' class='btn btn-outline-secondary btn-lg btn-block'\n\t\t\t\t\t\t\t\t\t\tdata-id={race.id}\n\t\t\t\t\t\t\t\t\t\tonClick={this.toggleAddComment}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<i class='fas fa-comment' /> Comment\n\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>}\n\t\t\t\t\t\t<div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-2 mb-3'>\n\t\t\t\t\t\t\t{showAddComment && user.email && <RaceAddComment\n\t\t\t\t\t\t\t\tstores={this.props.stores}\n\t\t\t\t\t\t\t\trace={race}\n\t\t\t\t\t\t\t\t// callback={this.loadRaceDetail}\n\t\t\t\t\t\t\t\tinputRef={c => this.inputRef[race.id] = c}\n\t\t\t\t\t\t\t\tinputRefObject={this.inputRef}\n\t\t\t\t\t\t\t/>}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class='col-12 mt-2'>\n\t\t\t\t\t\t\t<RaceComments\n\t\t\t\t\t\t\t\tstores={this.props.stores}\n\t\t\t\t\t\t\t\trace={race}\n\t\t\t\t\t\t\t\tcols='12'\n\t\t\t\t\t\t\t\t// callback={this.loadRaceDetail}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t{isAdmin && <>\n\t\t\t\t\t\n\t\t\t\t\t\t\t\t<h2 class='mt-5'>Articles</h2>\n\t\t\t\t\t\t\t\t<div class='row'>\n\t\t\t\t\t\t\t\t\t{race.articles && race.articles.map(currentArticle => <>\n\t\t\t\t\t\t\t\t\t\t<div class='col-12 col-sm-6 col-md-4 col-lg-3 border rounded-lg p-3 position-relative'>\n\t\t\t\t\t\t\t\t\t\t\t<button class='btn btn-danger position-absolute' style='top:5px; right: 5px;' data-id={currentArticle.id} onClick={this.removeRaceArticle}>\n\t\t\t\t\t\t\t\t\t\t\t\t<i class='fas fa-times' />\n\t\t\t\t\t\t\t\t\t\t\t</button>\n\n\t\t\t\t\t\t\t\t\t\t\t{currentArticle.image && <img src={currentArticle.image.s3LargeLink} class='float-right w-100' />}\n\n\t\t\t\t\t\t\t\t\t\t\t{['title'].map(field => <>\n\t\t\t\t\t\t\t\t\t\t\t\t<div class='form-group'>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<input type='text' class='form-control-plaintext font-weight-bold' id={field} aria-describedby={`${field}Help`}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tstyle='font-size: 1.5em;'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tdata-id={currentArticle.id}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tdata-field={field}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalue={currentArticle[field]}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tonInput={this.editRaceArticle}\n\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t</>)}\n\t\t\t\t\t\t\t\t\t\t\t{['ingress', 'body'].map(field => <>\n\t\t\t\t\t\t\t\t\t\t\t\t<div class='form-group'>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<textarea type='textarea' class='form-control-plaintext' id={field} aria-describedby={`${field}Help`}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tdata-id={currentArticle.id}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tdata-field={field}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalue={currentArticle[field]}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tonInput={this.editRaceArticle}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tstyle='height: 1em;'\n\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t</>)}\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</>)}\n\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t<div class='row'>\n\t\t\t\t\t\t\t\t\t<div class='col-6 offset-3 border rounded-lg m-2 p-3 bg-light'>\n\t\t\t\t\t\t\t\t\t\t<h5>Add new article</h5>\n\t\t\t\t\t\t\t\t\t\t{newRaceArticle && newRaceArticle.image && <img src={newRaceArticle.image.s3LargeLink} class='float-right w-50'  onError={this.handleImageErrored} />}\n\n\t\t\t\t\t\t\t\t\t\t{['title'].map(field => <>\n\t\t\t\t\t\t\t\t\t\t\t<div class='form-group'>\n\t\t\t\t\t\t\t\t\t\t\t\t<label for={field}>{field}</label>\n\t\t\t\t\t\t\t\t\t\t\t\t<input type='text' class='form-control' id={field} aria-describedby={`${field}Help`}\n\t\t\t\t\t\t\t\t\t\t\t\t\tonInput={linkstate(this, `newRaceArticle.${field}`)}\n\t\t\t\t\t\t\t\t\t\t\t\t\tvalue={newRaceArticle[field]}\n\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t</>)}\n\t\t\t\t\t\t\t\t\t\t{['ingress', 'body'].map(field => <>\n\t\t\t\t\t\t\t\t\t\t\t<div class='form-group'>\n\t\t\t\t\t\t\t\t\t\t\t\t<label for={field}>{field}</label>\n\t\t\t\t\t\t\t\t\t\t\t\t<textarea type='text' class='form-control' id={field} aria-describedby={`${field}Help`}\n\t\t\t\t\t\t\t\t\t\t\t\t\tonInput={linkstate(this, `newRaceArticle.${field}`)}\n\t\t\t\t\t\t\t\t\t\t\t\t\tonKeyUp={this.resizeTextarea}\n\t\t\t\t\t\t\t\t\t\t\t\t\tstyle='height: 1em;'\n\t\t\t\t\t\t\t\t\t\t\t\t\tvalue={newRaceArticle[field]}\n\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t</>)}\n\n\t\t\t\t\t\t\t\t\t\t<Images saved={{}} object={{}} field={'image'} updateField={this.updateArticleUpload} autoOpen={false} />\n\n\t\t\t\t\t\t\t\t\t\t<button class='btn btn-info' onClick={this.addRaceArticle}>Add race article</button>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\n\n\t\t\t\t\t\t\t\t<h2 class='mt-5'>User images</h2>\n\t\t\t\t\t\t\t\t<div class='row'>\n\t\t\t\t\t\t\t\t\t{race.userImages && race.userImages.map(currentUserImage => <>\n\t\t\t\t\t\t\t\t\t\t<div class='col-12 col-sm-6 col-md-4 col-lg-3 border rounded-lg p-3 position-relative'>\n\t\t\t\t\t\t\t\t\t\t\t<button class='btn btn-danger position-absolute' style='top:5px; right: 5px;' data-id={currentUserImage.id} onClick={this.removeRaceUserImage}>\n\t\t\t\t\t\t\t\t\t\t\t\t<i class='fas fa-times' />\n\t\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t\t\t<img src={currentUserImage.image.s3LargeLink} class='float-right w-100' />\n\n\t\t\t\t\t\t\t\t\t\t\t{['title'].map(field => <>\n\t\t\t\t\t\t\t\t\t\t\t\t<div class='form-group '>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<input type='text' class='form-control-plaintext font-weight-bold' id={field} aria-describedby={`${field}Help`}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tstyle='font-size: 1.5em;'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tdata-id={currentUserImage.id}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tdata-field={field}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalue={currentUserImage[field]}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tonInput={this.editRaceUserImage}\n\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t</>)}\n\t\t\t\t\t\t\t\t\t\t\t{['body'].map(field => <>\n\t\t\t\t\t\t\t\t\t\t\t\t<div class='form-group'>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<textarea type='textarea' class='form-control-plaintext' id={field} aria-describedby={`${field}Help`}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tdata-id={currentUserImage.id}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tdata-field={field}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalue={currentUserImage[field]}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tonInput={this.editRaceUserImage}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tstyle='height: 1em;'\n\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t</>)}\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</>)}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class='row'>\n\t\t\t\t\t\t\t\t\t<div class='col-3 offset-3 border rounded-lg m-2 p-3 bg-light'>\n\t\t\t\t\t\t\t\t\t\t<h5>Add new user image</h5>\n\t\t\t\t\t\t\t\t\t\t<div class='row'>\n\t\t\t\t\t\t\t\t\t\t\t<div class='col'>\n\t\t\t\t\t\t\t\t\t\t\t\t{newRaceUserImage && newRaceUserImage.image && <img src={newRaceUserImage.image.s3LargeLink} class='float-right w-50'  onError={this.handleImageErrored} />}\n\t\t\t\t\t\t\t\t\t\t\t\t{['title'].map(field => <>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div class='form-group'>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<label for={field}>{field}</label>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<input type='text' class='form-control' id={field} aria-describedby={`${field}Help`}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tonInput={linkstate(this, `newRaceUserImage.${field}`)}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalue={newRaceUserImage[field]}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\t\t</>)}\n\t\t\t\t\t\t\t\t\t\t\t\t{['body'].map(field => <>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div class='form-group'>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<label for={field}>{field}</label>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<textarea type='text' class='form-control' id={field} aria-describedby={`${field}Help`}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tonInput={linkstate(this, `newRaceUserImage.${field}`)}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tonKeyUp={this.resizeTextarea}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstyle='height: 1em;'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalue={newRaceUserImage[field]}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\t\t</>)}\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t                    <Images saved={{}} object={{}} field={'image'} updateField={this.updateUserImageUpload} autoOpen={false} />\n\n\t\t\t\t\t\t\t\t\t\t<button class='btn btn-info' onClick={this.addRaceUserImage}>Add race user image</button>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\n\t\t\t\t\t</>}\n\t\t\t\t</div>\n\t\t\t</>\n\t\t);\n\t}\n}\n\nexport default PublicRaceDetail;\n"],"sourceRoot":""}