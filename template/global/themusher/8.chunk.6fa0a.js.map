{"version":3,"sources":["webpack:///./components/workout/index.js","webpack:///./components/modal/index.js","webpack:///./components/dog/scroller.js"],"names":["getWorkoutColor","workout","type","getWorkoutIcon","MAX_LOADINDEX","mu","getMaxLoadIndex","initialState","showAddComment","viewImageIdx","likeWorkout","Workout","observer","props","toggleDate","e","stopPropagation","preventDefault","setState","showDate","state","workoutId","workoutStore","stores","id","setTimeout","toggleAddComment","target","parentElement","dataset","inputRef","focus","viewImage","closest","idx","shareLink","appState","shareUrl","url","title","text","onTeamClick","teamid","showTeam","hideTeam","onUserClick","onDogClick","dogid","dogs","showDog","hideDog","updateTimer","render","this","forceShowDate","wrapperClasses","wrapperClassesRow","userStore","viewmode","hasShareApi","user","allDogs","language","intensity","findIntensity","code","team","findTeam","teamName","name","teamNames","push","teams","forEach","likes","comments","hasLikedWorkout","findIndex","gpxInfo","mushers","loadIndex","workoutEquipment","findEquipment","equipment","workoutEquipmentIcon","field","musherImages","length","slice","map","musher","u","findPublicUser","images","image","publicUser","s3SmallLink","mapImage","imgs","toJS","batteryUsage","battegryLevelStart","battegryLevelEnd","views","getViews","statistics","marginTop","marginBottom","back","class","style","img","temperature","value","isLocked","isInProgress","role","href","date","onClick","util","formatDate","locale","hour12","hour","minute","formatDistance","Date","getLoadIndexColor","normalizeBetween","Math","floor","getLoadIndexText","garminId","stravaId","track","dogsLeft","dogsRight","sledWeight","format","indexOf","kcalBurnedTotal","kcalMeatGramsTotal","kcalSalmonGramsTotal","kcalFatGramsTotal","description","markdown","replaceImages","comment","markdownOpts","getMarkdownOptions","distanceKm","elevation","duration","secToHms","speedAvg","avgGpsMovingSpeed","dblClick","likeRef","data-id","data-url","uuidv4","data-title","rel","data-native","c","inputRefObject","col","offset","compact","object","isTeamAdmin","isAdmin","Component","Modal","touchStart","startY","touches","pageY","touchEnd","undefined","readyToRefresh","touchMove","appContainer","scrollTop","refreshing","close","imagexxl","thumb","src","onTouchstart","onTouchend","onTouchmove","ref","download","DogScroller","scrollImages","imageIdx","scrollLeft","clientWidth","nearestInt","round","diff","abs","Number","isInteger","sortByName","a","b","dogA","find","dogB","size","onScroll","sort","dogId","dog","filter","d","className","showName","showPosition"],"mappings":"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","file":"8.chunk.6fa0a.js","sourcesContent":["import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport { toJS } from 'mobx';\nimport { Text, Localizer, withText } from 'preact-i18n';\nimport Markdown from 'preact-markdown';\n\nimport Modal from '../modal';\nimport WorkoutComments from '../../components/workout/comments';\nimport WorkoutAddComment from '../../components/workout/commentAdd';\nimport ImageScroller from '../../components/imageScroller';\nimport DogScroller from '../../components/dog/scroller';\n\nimport Overlay from '../../components/overlay/';\nimport TeamsPublicDetail from '../../routes/teams/publicDetail';\nimport DogPublicDetail from '../../routes/dogs/publicDetail';\n\nimport LikesAndComments from '../../components/feedback/likesAndComments';\nimport Views from '../../components/feedback/views';\n\nimport Speed from '../../components/data/speed';\nimport Elevation from '../../components/data/elevation';\nimport Weight from '../../components/data/weight';\nimport Distance from '../../components/data/distance';\nimport Temperature from '../../components/data/temperature';\n\nimport mu from '../../lib/musher-util';\n\nconst MAX_LOADINDEX = mu.getMaxLoadIndex();\n\nfunction getWorkoutColor(workout) {\n\tswitch (workout.type) {\n\t\tcase 1:\n\t\t\treturn 'border-primary';\n\t\tcase 2:\n\t\t\treturn 'border-danger';\n\t\tcase 3:\n\t\t\treturn 'border-success';\n\t\tcase 4:\n\t\t\treturn 'border-info';\n\t\tdefault:\n\t\t\treturn 'border-warning';\n\t}\n}\n\nfunction getWorkoutIcon(workout) {\n\tswitch (workout.type) {\n\t\tcase 1:\n\t\t\treturn 'fas fa-running';\n\t\tcase 2:\n\t\t\treturn 'fas fa-flag-checkered';\n\t\tcase 3:\n\t\t\treturn 'fas fa-hiking';\n\t\tcase 4:\n\t\t\treturn 'fas fa-futbol';\n\t\tdefault:\n\t\t\treturn 'fas fa-hiking';\n\t}\n}\n\nfunction displayDistance(distanceKm) {\n\tif (distanceKm < 5) {\n\t\treturn util.format(distanceKm, 2);\n\t}\n\tif (distanceKm < 10) {\n\t\treturn util.format(distanceKm, 1);\n\t}\n\treturn util.format(distanceKm, 1);\n}\n\nconst initialState = {\n\tshowAddComment: false,\n    viewImageIdx: {},\n    likeWorkout: {},\n};\n\n@observer\nclass Workout extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            ...initialState,\n        };\n        this.updateTimer = {};\n\t\tthis.inputRef = {};\n    }\n\n    toggleDate = (e) => {\n        e.stopPropagation();\n        e.preventDefault();\n        const { showDate } = this.state;\n        this.setState({ showDate: !showDate });\n    }\n\n\n\tlikeWorkout = async () => {\n\t\tconst { workoutStore } = this.props.stores;\n        const { workout } = this.props;\n        const workoutId = workout.id;\n\n        const { likeWorkout } = this.state;\n        likeWorkout[workoutId] = true;\n        this.setState({ likeWorkout });\n        setTimeout(() => {\n            const { likeWorkout } = this.state;\n            delete likeWorkout[workoutId];\n            this.setState({ likeWorkout });\n        }, 1200);\n\n\t\tconst response = await workoutStore.likeWorkout({ id: workoutId });\n        if (response && response.status === 200) {\n\n\t\t}\n\t}\n\n\ttoggleAddComment = (e) => {\n\t\tconst workoutId = e.target.parentElement.dataset.id || e.target.dataset.id;\n\t\tconst { showAddComment } = this.state;\n\t\tthis.setState({\n\t\t\tshowAddComment: !showAddComment,\n\t\t}, () => {\n\t\t\tif (this.inputRef[workoutId]) {\n\t\t\t\tthis.inputRef[workoutId].focus();\n\t\t\t}\n\t\t});\n\t}\n\n    viewImage = (e) => {\n\t\tconst { id, idx } = e.target.closest('img').dataset;\n        const { viewImageIdx } = this.state;\n        viewImageIdx[id] = idx;\n        this.setState({ viewImageIdx });\n    }\n\n    shareLink = (e) => {\n        const { url, title, text } = e.target.closest('button').dataset;\n        const { appState } = this.props.stores;\n        appState.shareUrl({ url, title, text });\n    }\n\n        // Overlay functions\n    onTeamClick = (e, teamid) => {\n        e.preventDefault();\n        e.stopPropagation();\n        this.setState({\n            showTeam: teamid,\n        });\n        return false;\n    }\n\n    hideTeam = () => {\n        this.setState({\n            showTeam: null,\n        });\n    }\n\n    onUserClick = (e, userid) => {\n        e.preventDefault();\n        e.stopPropagation();\n        return false;\n    }\n\n    onDogClick = (e, dogid, dogs) => {\n        e.preventDefault();\n        e.stopPropagation();\n        this.setState({\n            showDog: dogid,\n            dogs,\n        });\n        return false;\n    }\n\n    hideDog = () => {\n        this.setState({\n            showDog: null,\n        });\n    }\n\n    render() {\n        const {\n            showDate,\n            showAddComment,\n            viewImageIdx = {},\n            likeWorkout,\n            dogs,\n            showTeam,\n            showDog,\n        } = this.state;\n        const {\n            workout,\n            showDate: forceShowDate,\n            wrapperClasses = 'col-12 col-sm-8 col-lg-6 offset-sm-2 offset-lg-3',\n            wrapperClassesRow = 'row',\n        } = this.props;\n\t\tconst { userStore, appState, workoutStore } = this.props.stores;\n        const { viewmode, hasShareApi } = appState;\n        const { user, dogs: allDogs } = userStore;\n        const { language = 'en' } = user;\n        const intensity = userStore.findIntensity({ code: workout.intensity, language }) || {};\n        // const teamName = userStore.findTeam(workout.team);\n        const team = userStore.findTeam(workout.team, true) || {};\n        const teamName = team.name;\n        // const teamNames = workout.teams ? workout.teams.map(e => userStore.findTeam(e)) : [];\n        const teamNames = [];\n        if (teamName) {\n            teamNames.push(teamName);\n        }\n        if (workout.teams) {\n            workout.teams.forEach((e) => {\n                if (userStore.findTeam(e)) {\n                    teamNames.push(userStore.findTeam(e));\n                }\n            });\n        }\n\n        const { likes = [], comments = [] } = workout;\n\t\tconst hasLikedWorkout = workout.likes && workout.likes.findIndex(e => e.user === user.id) > -1;\n        const { gpxInfo = {}, mushers = [] } = workout;\n\t\tconst { loadIndex = 0 } = gpxInfo;\n        const workoutEquipment = userStore.findEquipment({ equipment: workout.equipment, language });\n        const workoutEquipmentIcon = userStore.findEquipment({ equipment: workout.equipment, field: 'icon' });\n\n        const musherImages = [];\n        if (mushers.length > 1) {\n            mushers.slice(1, 10).map((musher) => {\n                const u = workoutStore.findPublicUser(musher) || {};\n                if (u.images && u.images[0]) {\n                    musherImages.push(u.images[0]);\n                }\n            });\n        }\n\n        const publicUser = workoutStore.findPublicUser(mushers[0]) || {};\n        let image;\n        if (publicUser && publicUser.images && publicUser.images[0]) {\n            image = publicUser.images[0];\n        } else if (team.image && team.image.s3SmallLink) {\n            image = team.image;\n        } else if (team.images && team.images[0] && team.images[0].s3SmallLink) {\n            image = team.images[0];\n        } else if (workout.image && workout.image.s3SmallLink) {\n            image = workout.image;\n        }\n\n        const images = [];\n        if (workout.mapImage) {\n            images.push({\n                ...workout.mapImage,\n                type: 'map',\n            });\n        }\n        if (workout.images) {\n            const imgs = toJS(workout.images);\n            images.push(...imgs);\n        }\n        const imageIdx = viewImageIdx[workout.id] ? viewImageIdx[workout.id] : 0;\n        const currentImage = images && images[imageIdx] ? images[imageIdx] : null;\n\n        let batteryUsage;\n        if (workout && workout.gpxInfo && workout.gpxInfo.battegryLevelStart) {\n            batteryUsage = (workout.gpxInfo.battegryLevelStart - workout.gpxInfo.battegryLevelEnd) * 100;\n        }\n\n        const views = mu.getViews(workout.statistics);\n\n        // let temperature;\n        // let windSpeed;\n        // if (util.checkNested(workout, 'temperature')) {\n        //     const yr = toJS(workout.yr[0].instant.details);\n        //     // displayValue = `Yr.no: 🌡️ ${yr.air_temperature}°C, 💨 ${yr.wind_speed}m/s 🧭 ${mu.windDirection(yr.wind_from_direction)}, ☁️ ${yr.cloud_area_fraction}%, ${yr.air_pressure_at_sea_level}mb, 💦 ${yr.relative_humidity}%`;\n        //     temperature = `${yr.air_temperature}°C`;\n        //     windSpeed = `${yr.wind_speed}m/s`;\n        // }\n\t\t// // const loadMultiplier = loadIndex / 100;\n\n        return (<>\n\n            {showTeam && <Overlay>\n                <TeamsPublicDetail stores={this.props.stores} teamid={showTeam} marginTop={'0px;'} marginBottom={'0px;'} back={this.hideTeam} hideTeam={this.hideTeam} />\n            </Overlay>}\n\n            {showDog && <Overlay>\n                <DogPublicDetail stores={this.props.stores} dogid={showDog} marginTop={'0px;'} marginBottom={'0px;'} back={this.hideDog} dogs={dogs} />\n            </Overlay>}\n\n            <div class='w-100 mb-2'>\n                <div class={wrapperClassesRow}>\n\n                    <div class={`${wrapperClasses} d-flex mb-0 position-relative`}>\n\n                        {/* {workout.gpxInfo && <svg viewBox='0 0 300 300' style='top: 80px; left: 10px; width: 90px; height: 90px;' class='position-absolute'>\n                            <path d={`${workout.gpxInfo.svgMap}`} style='fill: none; stroke: #0063FF; stroke-width: 5; opacity: 0.3;' />\n                        </svg>} */}\n\n                        {/* {JSON.stringify(workout, null, 4)} */}\n                        <div class='text-center'>\n                            <div\n                                class={`position-relative text-center border rounded-circle imageRounded ${getWorkoutColor(workout)}`}\n                                style={`${image ? `background-image: url(\"${image.s3SmallLink}\"); background-size: cover;` : ''} border-width: 3px !important;`}\n                            >\n                                {!image && <i class={`${getWorkoutIcon(workout)} text-${intensity.class ? intensity.class : 'muted'} mt-3`} style='font-size: 40px;' />}\n\n                                {musherImages && musherImages.map((img, idx) => <>\n                                    <div\n                                        class='position-absolute rounded-circle imageRounded border imageRoundedThumb border-white'\n                                        style={`\n                                            background-image: url(\"${img.s3SmallLink}\");\n                                            background-size: cover;\n                                            bottom: -3px;\n                                            left: ${-5 + (idx * 10)}px;\n                                        `}\n                                    />\n                                </>)}\n                            </div>\n                            {workout.temperature !== 0 && <>\n                                <span class='text-muted font-weight-light'>\n                                    <Temperature stores={this.props.stores} value={workout.temperature} />\n                                </span>\n                            </>}\n                        </div>\n                        <div class='flex-grow-1 pl-3' style='line-height: 1.2em;'>\n                            <span class='float-right'>\n                                {workout.isLocked === 1 && <i class='fas fa-lock text-danger ml-3' />}\n                                {workout.isInProgress === 1 && <div class='spinner-grow text-success ml-3' role='status' />}\n                                {workout.isInProgress === 2 && <i class='fas fa-pause-circle text-warning ml-3' />}\n                            </span>\n                            <a class='stretched-link' href={`/workouts/${workout.id}`}>\n                                <h5 class='my-0 mb-1' style='line-height: 1.0em;'>\n                                    {workout.name}\n                                </h5>\n                            </a>\n                            {teamNames && teamNames.length > 0 && <small class='font-weight-lighter'>\n                                {teamNames.map((name, idx) => <>{idx > 0 ? ', ' : ''}{name}</>)}\n                            </small>}\n                            <br />\n                            <small class='text-muted'>\n                                {workout.date && <small onClick={this.toggleDate}>\n                                    {forceShowDate || showDate ? util.formatDate(workout.date, { locale: 'no-NB', hour12: false, hour: '2-digit', minute: '2-digit' }) : util.formatDistance(workout.date, new Date(), { locale: 'no-NB' })}\n                                </small>}\n                                <span class={`badge badge-${intensity.class} ml-2`}>{intensity.name}</span>\n                                {loadIndex > 0 && <span class={`ml-2 text-${mu.getLoadIndexColor(util.normalizeBetween(loadIndex, 0, MAX_LOADINDEX, 0, 100))}`}>\n                                    <i class='fas fa-hand-rock mr-1' />\n                                    {Math.floor(util.normalizeBetween(loadIndex, 0, MAX_LOADINDEX, 0, 100))} -&nbsp;\n                                    {mu.getLoadIndexText(util.normalizeBetween(loadIndex, 0, MAX_LOADINDEX, 0, 100))}\n                                </span>}\n                                <br />\n                            </small>\n                            <small>\n                                <div class='text-muted'>\n                                    {workout.garminId > 0 && <div class={`float-left mr-2 text-center border rounded-circle imageRounded imageRoundedIcon`} style={`background-image: url(\"./assets/garmin-connect.png\");`} />}\n                                    {workout.stravaId > 0&& <div class={`float-left mr-2 text-center border rounded-circle imageRounded imageRoundedIcon`} style={`background-image: url(\"./assets/strava-icon.png\");`} />}\n\n                                    {workout.equipment > 0 && <><i class={`${workoutEquipmentIcon} ml-2`} /> {workoutEquipment}</>}\n                                    {/* {workout.distanceKm > 0 && <><i class='fas fa-road ml-2' /> {displayDistance(workout.distanceKm)}km</>}\n                                    {workout.elevation > 0 && <><i class='fas fa-mountain ml-2' /> {util.format(workout.elevation, 0)}m</>} */}\n                                    {/* {workout.speedAvg > 0 && <><i class='fas fa-tachometer-alt ml-2' /> {util.format(workout.speedAvg, 1)}km/t</>} */}\n                                    {workout.dogs > 0 && <><i class='fas fa-dog ml-2' /> {workout.dogs.length}</>}\n                                    {workout.track > 0 && <><i class={`fas fa-map-marked text-${workout.track > 0 ? 'success' : 'danger'} ml-2`} /></>}\n                                    {workout.dogsLeft > 0 && <><i class={`fas fa-crosshairs text-${workout.dogsLeft && workout.dogsRight ? 'success' : 'danger'} ml-2`} /></>}\n                                    {workout.sledWeight > 0 && <>\n                                        <i class='fas fa-sleigh ml-2' /> <Weight stores={this.props.stores} value={workout.sledWeight} />\n                                    </>}\n                                    {batteryUsage > 0 && <span class='text-muted ml-2'><i class='fas fa-battery-three-quarters' /> {util.format(batteryUsage, 1)}% <Text id='workout.battery-used'>used</Text></span>}\n                                </div>\n                                {['beta', 'advanced'].indexOf(viewmode) > -1 && (\n                                    <span class='text-muted'>\n                                        <i class='fas fa-balance-scale' /> {util.format(workout.kcalBurnedTotal)} <Text id='workout.kcal'>kcal</Text>\n                                        <i class='fas fa-drumstick-bite ml-2' /> <Weight stores={this.props.stores} value={workout.kcalMeatGramsTotal / 1000} />\n                                        <i class='fas fa-fish ml-2' /> <Weight stores={this.props.stores} value={workout.kcalSalmonGramsTotal / 1000} />\n                                        <i class='fas fa-piggy-bank ml-2' /> <Weight stores={this.props.stores} value={workout.kcalFatGramsTotal / 1000} />\n                                    </span>\n                                )}\n                            </small>\n                        </div>\n                    </div>\n                    <div class={`${wrapperClasses} position-relative mt-2`}>\n                        <strong>\n                            {workout.description}\n                        </strong>\n                    </div>\n                    <div class={`${wrapperClasses} position-relative`}>\n                        <Markdown markdown={mu.replaceImages(workout.comment, workout.images, language)} markdownOpts={mu.getMarkdownOptions()} />\n                    </div>\n                    <div class={`${wrapperClasses} d-flex mb-0 position-relative`}>\n                        <div class='container-fluid px-0'>\n                            <div class='row mt-1'>\n                                {workout.distanceKm > 0 && <div class='col-3'>\n                                    <div class='text-overflow'>\n                                        <small><i class='fas fa-road' /> <Text id='workout.calendar.distance'>Distanse</Text></small>\n                                    </div>\n                                    <div class='text-overflow font-weight-light' style='font-size: 1.2em;'>\n                                        <Distance stores={this.props.stores} value={workout.distanceKm} />\n                                    </div>\n                                </div>}\n                                {workout.elevation > 0 && <div class='col-3'>\n                                    <div class='text-overflow'>\n                                        <small><i class='fas fa-mountain' /> <Text id='workout.calendar.ascend'>Høydemeter</Text></small>\n                                    </div>\n                                    <div class='text-overflow font-weight-light' style='font-size: 1.2em;'>\n                                        <Elevation stores={this.props.stores} value={workout.elevation} />\n                                    </div>\n                                </div>}\n                                {workout.duration > 0 && <div class='col-3'>\n                                    <div class='text-overflow'>\n                                        <small><i class='fas fa-clock' /> <Text id='workout.calendar.duration'>Varighet</Text></small>\n                                    </div>\n                                    <div class='text-overflow font-weight-light' style='font-size: 1.2em;'>\n                                        {util.secToHms(workout.duration, true)}\n                                    </div>\n                                </div>}\n                                {workout.speedAvg > 0 && <div class='col-3'>\n                                    <div class='text-overflow'>\n                                        <small><i class='fas fa-tachometer-alt' /> <Text id='workout.calendar.avg-speed'>Snittfart</Text></small>\n                                    </div>\n                                    <div class='text-overflow font-weight-light' style='font-size: 1.2em;'>\n\t\t\t\t                        {workout.gpxInfo && workout.gpxInfo.avgGpsMovingSpeed > 0 ? <>\n                                            <Speed stores={this.props.stores} value={workout.gpxInfo.avgGpsMovingSpeed * 3.6} />\n                                        </> : <>\n                                            <Speed stores={this.props.stores} value={workout.speedAvg} />\n                                        </>}\n                                    </div>\n                                </div>}\n                            </div>\n                        </div>\n                    </div>\n\n                    {['beta', 'advanced', 'normal'].indexOf(viewmode) > -1 && (\n                        <div class={`${wrapperClasses}`}>\n                            <div class='container-fluid px-0 mt-1'>\n                                <div class='row'>\n                                    <ImageScroller stores={this.props.stores} images={images} id={workout.id} dblClick={this.likeWorkout} likeRef={likeWorkout} />\n                                </div>\n                            </div>\n                        </div>\n                    )}\n\n                    {['beta', 'advanced', 'normal'].indexOf(viewmode) > -1 && <>\n                        {workout.dogs && workout.dogs.length > 0 && <div class='container-fluid px-0 mt-1'>\n                            <div class='row pt-2'>\n                                <DogScroller stores={this.props.stores} dogs={workout.dogs} allDogs={allDogs} onDogClick={this.onDogClick} />\n                            </div>\n                        </div>}\n\n                        <div class='mt-2'>\n                            <LikesAndComments\n                                stores={this.props.stores}\n                                likes={likes}\n                                comments={comments}\n                                type='workout'\n                                onTeamClick={this.onTeamClick}\n                                onUserClick={this.onUserClick}\n                            />\n                        </div>\n\n                    </>}\n\n                    {['beta', 'advanced', 'normal'].indexOf(viewmode) > -1 && <>\n                        <div class={`${wrapperClasses} mb-0 position-relative mt-2`}>\n                            <div class='row'>\n                                <div class='col text-center'>\n                                    <button type='button' class={`btn btn-sm btn-outline-${hasLikedWorkout ? 'primary' : 'secondary'} btn-lg btn-block ${hasLikedWorkout ? 'text-primary' : ''}`}\n                                        onClick={this.likeWorkout}\n                                        // disabled={hasLikedWorkout}\n                                    >\n                                        <i class={`${hasLikedWorkout ? 'text-primary fas' : 'far'} fa-thumbs-up`} /> <Text id='comments.like'>Lik</Text>\n                                    </button>\n                                </div>\n                                <div class='col text-center'>\n                                    <button type='button' class='btn btn-sm btn-outline-secondary btn-lg btn-block'\n                                        data-id={workout.id}\n                                        onClick={this.toggleAddComment}\n                                    >\n                                        <i class='fas fa-comment' /> <Text id='comments.comment-add'>Kommentar</Text>\n                                    </button>\n                                </div>\n                                {hasShareApi ? <>\n                                    <div class='col text-center'>\n                                        <button class='btn btn-sm btn-outline-secondary btn-lg btn-block text-overflow'\n                                            onClick={this.shareLink}\n                                            data-url={`https://themusher.app/share/workout/${workout.uuidv4}`}\n                                            data-title={`title: ${workout.name}`}\n                                        >\n                                            <i class='fas fa-share' /> <Text id='workout.share'>Del</Text>\n                                        </button>\n                                    </div>\n                                </> : <>\n                                    <div class='col text-center'>\n                                        <a class='btn btn-sm btn-outline-secondary btn-lg btn-block text-overflow'\n                                            href={`https://themusher.app/share/workout/${workout.uuidv4}`}\n                                            target='_blank'\n                                            rel='noreferrer'\n                                            data-native\n                                        >\n                                            <i class='fas fa-share' /> <Text id='workout.share'>Del</Text>\n                                        </a>\n                                    </div>\n                                </>}\n                            </div>\n                        </div>\n\n                        <div class={`${wrapperClasses} mt-2 mb-3`}>\n                            {showAddComment && <WorkoutAddComment\n                                stores={this.props.stores}\n                                workout={workout}\n                                inputRef={c => this.inputRef[workout.id] = c}\n                                inputRefObject={this.inputRef}\n                                col='12'\n                                offset='0'\n                            />}\n                            <WorkoutComments stores={this.props.stores} workout={workout} col='10' offset='2' compact={true} />\n                        </div>\n\n                        {views > 0 && <>\n                            <div class='mt-2'>\n                                <Views\n                                    stores={this.props.stores}\n                                    views={views}\n                                    object={workout}\n                                    type='workout'\n                                    isTeamAdmin={true}\n                                    isAdmin={false}\n                                    onTeamClick={this.onTeamClick}\n                                    onUserClick={this.onUserClick}\n                                />\n                            </div>\n                        </>}\n\n                    </>}\n\n                </div>\n            </div>\n        </>);\n    }\n}\n\nexport default Workout;\n","import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport { Text, Localizer, withText } from 'preact-i18n';\n\n@observer\nclass Modal extends Component {\n    toggleDate = () => {\n        const { showDate } = this.state;\n        this.setState({ showDate: !showDate });\n    }\n\n    touchStart = (e) => {\n        e.stopPropagation();\n        this.setState({\n            startY: e.touches[0].pageY,\n        })\n    }\n\n    touchEnd = (e) => {\n        e.stopPropagation();\n        this.setState({\n            startY: undefined,\n            readyToRefresh: false,\n        })\n    }\n\n    touchMove = (e) => {\n        e.stopPropagation();\n        const { close } = this.props;\n        const { startY, refreshing } = this.state;\n        const scrollDistance = 30;\n        const y = e.touches[0].pageY;\n        if (this.appContainer) {\n            const { scrollTop } = this.appContainer;\n            if (scrollTop === 0 && y > startY + scrollDistance && !refreshing) {\n                close();\n            }\n        }\n    }\n\n    render() {\n        const { showDate } = this.state;\n        const { image, imagexxl, close, thumb, name, title, date } = this.props;\n        return (\n            <div class='fixed-top bg-dark text-center pt-2' style='width: 100vw; height: 100vh;'>\n                <button class='btn btn-secondary float-right mr-2' onClick={close}>X</button>\n\n                    <div class='d-flex mb-2 px-2'>\n                        {/* {JSON.stringify(dog, null, 4)} */}\n                        {thumb && <div class={`text-center border rounded-circle imageRounded imageRoundedSmall`} style={thumb ? `background-image: url(\"${thumb}\");` : ''}>\n                            &nbsp;\n                        </div>}\n                        <div class='flex-grow-1 pl-3 pr-2 text-left' style='line-height: 1.3em;'>\n                            {name && <strong class='mr-2'>{name}:</strong>}\n                            {title}<br />\n                            <small class='text-muted'>\n                                {date && <small onClick={this.toggleDate}>\n                                    {showDate ? util.formatDate(date, { locale: 'no-NB' }) : util.formatDistance(date, new Date(), { locale: 'no-NB' })}\n                                </small>}\n                            </small>\n                        </div>\n                    </div>\n\n\n                <img src={image}\n                    class='img-fluid align-middle mt-2 mb-2'\n                    onClick={close}\n                    onTouchstart={this.touchStart}\n                    onTouchend={this.touchEnd}\n                    onTouchmove={this.touchMove}\n                    ref={c => this.appContainer = c}\n                />\n\n                <a target='_blank' rel='noopener noreferrer' href={imagexxl || image} download={imagexxl || image}>\n                    <i class='fas fa-download' /> <Text id='modal.download'>Last ned bildet</Text>\n                </a>\n            </div>\n        );\n    }\n}\n\nexport default Modal;\n","import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport { Text, Localizer } from 'preact-i18n';\n\nimport DogSimplePublic from './simplePublic';\n\n@observer\nclass DogScroller extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            imageIdx: 0,\n        };\n    }\n\n    scrollImages = (e) => {\n        const { dogs } = this.props;\n\n        const { scrollLeft, scrollWidth, clientWidth } = e.target;\n        const imageStep = clientWidth;\n        const imageIdx = scrollLeft / imageStep;\n        // console.log({ e, imageStep, imageIdx, scrollLeft, scrollWidth, clientWidth });\n\n        const nearestInt = Math.round(imageIdx);\n        const diff = Math.abs(nearestInt - imageIdx);\n        // console.log({ nearestInt, diff });\n        if (Number.isInteger(imageIdx) || diff < 0.1) {\n            this.setState({\n                imageIdx: nearestInt,\n            });\n        }\n    }\n\n    sortByName = (a, b) => {\n        const { allDogs = [] } = this.props;\n        const dogA = allDogs.find(e => e.id === a);\n        const dogB = allDogs.find(e => e.id === b);\n        if (dogA && dogB) {\n            if (dogA.name > dogB.name) {\n                return 1;\n            }\n        }\n        return -1;\n    }\n\n    render() {\n        const { imageIdx } = this.state;\n        const { dogs, allDogs = [], size = 'medium', onDogClick = () => {} } = this.props;\n\n        return (\n            <div class='w-100'>\n                <div\n                    class='d-flex flex-row flex-nowrap no-scrollbar'\n                    style='overflow: auto; scroll-snap-type: x mandatory;'\n                    onScroll={this.scrollImages}\n                >\n                    {dogs && dogs.sort(this.sortByName).map((dogId, idx) => {\n                        const dog = allDogs.find(e => e.id === dogId);\n                        if (!dog) {\n                            return '';\n                        }\n                        return (\n                            <div class='col clearfix position-relative p-0 mx-2'>\n                                <div\n                                    class={`w-100 h-100 text-center rounded-lg imageContainer d-flex justify-content-center align-items-center`}\n                                    style={`\n                                        flex-wrap: wrap;\n                                        overflow-y: hidden;\n                                    `}\n                                    onTouchstart={(e) => { e.stopPropagation(); }}\n                                    onTouchend={(e) => { e.stopPropagation(); }}\n                                    onTouchmove={(e) => { e.stopPropagation(); }}\n                                >\n                                    <DogSimplePublic\n                                        stores={this.props.stores}\n                                        dog={dog}\n                                        dogs={allDogs.filter(d => dogs.indexOf(d.id) > -1).sort((a, b) => a.name > b.name ? 1 : -1)}\n                                        className='mx-auto'\n                                        showName={true}\n                                        showPosition={false}\n                                        size={size}\n                                        onDogClick={onDogClick} \n                                    />\n                                    {/* <xmp>{JSON.stringify(img, null, 4)}</xmp> */}\n                                </div>\n                            </div>\n                        );\n                    })}\n                </div>\n            </div>\n        );\n    }\n}\n\nexport default DogScroller;\n"],"sourceRoot":""}