{"version":3,"sources":["webpack:///./components/track/index.js","webpack:///./routes/tracks/index.js"],"names":["Track","observer","showModal","e","stopPropagation","preventDefault","setState","displayModal","currentImage","target","dataset","image","currentImageXXL","imagexxl","thumb","name","title","date","closeModal","toggleDate","showDate","state","render","this","track","props","class","close","style","s3SmallLink","href","id","onClick","util","formatDate","locale","formatDistance","Date","distanceKm","elevation","gpx","images","map","img","data-image","s3LargeLink","data-imagexxl","s3XXLargeLink","data-thumb","data-title","data-date","Component","initialState","isLoading","Tracks","loadTracks","stores","trackStore","load","tracks","length"],"mappings":"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","file":"route-tracks.chunk.a3fff.js","sourcesContent":["import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\n\nimport Modal from '../modal';\n\n@observer\nclass Track extends Component {\n    showModal = (e) => {\n        e.stopPropagation();\n        e.preventDefault();\n        const img = e.target.dataset.image;\n        const imgXXL = e.target.dataset.imagexxl;\n        const thumb = e.target.dataset.thumb;\n        const name = e.target.dataset.name;\n        const title = e.target.dataset.title;\n        const date = e.target.dataset.date;\n        this.setState({\n            displayModal: true,\n            currentImage: img,\n            currentImageXXL: imgXXL,\n            thumb,\n            name,\n            title,\n            date,\n        });\n    }\n\n    closeModal = () => {\n        this.setState({\n            displayModal: false,\n        });\n    }\n\n    toggleDate = () => {\n        const { showDate } = this.state;\n        this.setState({ showDate: !showDate });\n    }\n\n    render() {\n        const { displayModal, currentImage, currentImageXXL, showDate, thumb, name, title, date } = this.state;\n        const { track } = this.props;\n        return (\n            <div class='w-100 mb-3'>\n                <div class='row'>\n                    {displayModal && <Modal close={this.closeModal} image={currentImage} imagexxl={currentImageXXL} thumb={thumb} name={name} title={title} date={date} />}\n\n                    <div class='col-12 col-sm-8 col-lg-6 offset-sm-2 offset-lg-3 d-flex mb-0 position-relative'>\n                        {/* {JSON.stringify(track, null, 4)} */}\n\n                        <div class={`text-center border rounded-circle imageRounded`} style={track.image ? `background-image: url(\"${track.image.s3SmallLink}\");` : ''}>\n                            {!track.image && <i class='fas fa-map-marked text-muted mt-3' style='font-size: 40px;' />}\n                        </div>\n                        <div class='flex-grow-1 pl-3' style='line-height: 1.2em;'>\n                            <a class='stretched-link' href={`/tracks/${track.id}`}>\n                                <h5 class='mb-1' style='line-height: 1.0em;'>{track.name}</h5>\n                            </a>\n                            <small class='text-muted'>\n                                {track.date && <small onClick={this.toggleDate}>\n                                    {showDate ? util.formatDate(track.date, { locale: 'no-NB' }) : util.formatDistance(track.date, new Date(), { locale: 'no-NB' })}<br />\n                                </small>}\n                            </small>\n                            <small class='text-muted'>\n                                <i class='fas fa-road' /> {track.distanceKm} km\n                                <i class='fas fa-mountain ml-2' /> {track.elevation} m\n                                {track.gpx && <i class='fas fa-map-marked-alt ml-2' />}\n                            </small>\n                        </div>\n                    </div>\n\n                    <div class='col-12 col-sm-8 col-lg-6 offset-sm-2 offset-lg-3 mt-1' style='padding-left: 122px;'>\n                        <div class='row'>\n                            {track.images && track.images.map(img => (\n                                <div class={`text-center border rounded imageRounded imageRoundedSmall`}\n                                    style={img ? `background-image: url(\"${img.s3SmallLink}\");` : ''}\n                                    onClick={this.showModal}\n                                    data-image={img.s3LargeLink}\n                                    data-imagexxl={img.s3XXLargeLink}\n                                    data-thumb={track.image && track.image.s3SmallLink}\n                                    data-title={track.name}\n                                    data-date={track.date}\n                                >\n                                    &nbsp;\n                                </div>\n                            ))}\n                        </div>\n                    </div>\n\n                </div>\n            </div>\n        );\n    }\n}\n\nexport default Track;\n","import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\n\nimport Track from '../../components/track';\n\nconst initialState = {\n\tisLoading: false,\n};\n\n@observer\nclass Tracks extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            ...initialState,\n        };\n\t\tthis.loadTracks();\n    }\n\n\tasync loadTracks() {\n\t\tthis.setState({ isLoading: true });\n\t\tconst { trackStore } = this.props.stores;\n\t\tawait trackStore.load();\n\t\tthis.setState({ isLoading: false });\n\t}\n\n\trender() {\n\t\tconst { isLoading } = this.state;\n\t\tconst { trackStore, userStore } = this.props.stores;\n\t\tconst { tracks } = trackStore;\n\t\tconst { user } = userStore;\n\t\treturn (\n\t\t\t<div class='container-fluid' style='margin-bottom: 100px; margin-top: 60px;'>\n\t\t\t\t<div class='row'>\n\t\t\t\t\t<div class='col-12'>\n\t\t\t\t\t\t<div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 px-0'>\n\t\t\t\t\t\t\t<h5>Treningsrundene dine - {tracks.length} stk</h5>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 px-0 clearfix mb-2'>\n\t\t\t\t\t\t\t<a class='btn btn-sm btn-primary float-right'\n\t\t\t\t\t\t\t\thref='/tracks/edit/new'\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<i class='fas fa-plus' /> Legg til runde\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t{!isLoading && tracks && tracks.length === 0 && (\n\t\t\t\t\t\t\t<div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 text-muted'>\n\t\t\t\t\t\t\t\t<div class='text-center mb-5'>\n\t\t\t\t\t\t\t\t\t<div class='display-1'>\n\t\t\t\t\t\t\t\t\t\t<i class='fas fa-map-marked' />\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<h5>\n\t\t\t\t\t\t\t\t\t\tIngen runder er registrert ennå.\n\t\t\t\t\t\t\t\t\t</h5>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<p class='text-center'>\n\t\t\t\t\t\t\t\t\tDu har mulighet til å laste opp GPX-filer fra rundene dine. \n\t\t\t\t\t\t\t\t\tDet finnes mange apper som lar deg lage GPX-filer, men vi anbefaler\n\t\t\t\t\t\t\t\t\tViewRanger for <a href='https://apps.apple.com/gb/app/viewranger-hike-ride-or-walk/id404581674'>iOS</a> og\n\t\t\t\t\t\t\t\t\t&nbsp;<a href='https://play.google.com/store/apps/details?id=com.augmentra.viewranger.android&hl=en'>Android</a>.\n\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\tSlik kommer du i gang:\n\t\t\t\t\t\t\t\t<ol>\n\t\t\t\t\t\t\t\t\t<li>Trykk på knappen \"Legg til runde\" rett nedenfor.</li>\n\t\t\t\t\t\t\t\t</ol>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t)}\n\n\t\t\t\t\t\t{tracks && tracks.map(track => (\n\t\t\t\t\t\t\t<Track stores={this.props.stores} track={track} />\n\t\t\t\t\t\t))}\n\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nexport default Tracks;\n"],"sourceRoot":""}