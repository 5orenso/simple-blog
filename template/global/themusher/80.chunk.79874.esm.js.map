{"version":3,"sources":["webpack:///./components/data/distance.js","webpack:///./components/data/temperature.js","webpack:///./components/data/weight.js","webpack:///./components/dog/simple.js","webpack:///./routes/public/map.js","webpack:///./components/data/elevation.js","webpack:///./components/data/speed.js"],"names":["displayDistance","distance","util","format","Distance","observer","Component","render","value","smallUnit","this","props","userStore","stores","user","settings","imperial","kmToMiles","class","Temperature","celciusToFahrenheit","Weight","kgToPounds","getFatigueLevel","wo","dog","STOP_STATUSES","indexOf","status","WARN_STATUSES","distanceKm","Dog","showWorkout","showTeam","showNeeds","showInfo","showName","showPosition","showAge","className","size","dogStore","language","style","dogStatus","findDogstatus","dogPosition","findDogposition","position","workoutSummary","findCurrentWorkoutSummary","id","hasBirthday","mu","birth","daysUntilBirthday","Math","ceil","daysUntilNextBirthday","image","s3SmallLink","ucfirst","name","icon","href","shortname","age","deceased","gender","findTeam","team","elevation","duration","secToHms","speedAvg","weight","bodyScore","specialNeeds","initialState","mapHeight","WorkoutMap","constructor","super","loadWorkout","async","workoutStore","loadPublic","parseInt","workout","state","componentDidMount","componentWillReceiveProps","nextProps","appState","mapColorMode","mapRangeMin","mapRangeMax","reloadLastEpoch","track","findTrack","gpxInfo","findDogs","dogs","gpx","mapId","geojson","geoJSON","skipGeojson","height","key","showSearch","showZoomControl","showLayersControl","showFullscreenControl","showScaleControl","showRange","layersControlPosition","src","avgGpsMovingSpeed","dogsLeft","map","dogId","find","e","dogsRight","Elevation","meterToFeet","Speed","kmtToMph"],"mappings":"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","file":"80.chunk.79874.esm.js","sourcesContent":["import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport { Text, Localizer } from 'preact-i18n';\n\nimport mu from '../../lib/musher-util';\n\nfunction displayDistance(distance) {\n\tif (distance < 5) {\n\t\treturn util.format(distance, 2);\n\t}\n\tif (distance < 10) {\n\t\treturn util.format(distance, 1);\n\t}\n\treturn util.format(distance, 1);\n}\n\nfunction kmToMiles(value) {\n    return 0.621371 * value;\n}\n\n@observer\nclass Distance extends Component {\n    render() {\n\t\tconst { value = 0, smallUnit } = this.props;\n\t\tconst { userStore } = this.props.stores;\n\t\tconst { user } = userStore;\n\t\tconst { settings = {} } = user;\n\n        if (settings.imperial) {\n            return (<>\n                <nobr>\n\t\t\t\t\t{displayDistance(kmToMiles(value))} {smallUnit ? <><small><small><small class='ml-0 text-muted'>mi</small></small></small></> : <>mi</>}\n\t\t\t\t</nobr>\n            </>);\n        }\n\n\t\treturn (<>\n\t\t\t<nobr>\n\t            {displayDistance(value)} {smallUnit ? <><small><small><small class='ml-0 text-muted'>km</small></small></small></> : <>km</>}\n\t\t\t</nobr>\n\t    </>);\n    }\n}\n\nexport default Distance;\n","import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport { Text, Localizer } from 'preact-i18n';\n\nimport mu from '../../lib/musher-util';\n\nfunction celciusToFahrenheit(value) {\n    return ((value * 9/5) + 32);\n}\n\n@observer\nclass Temperature extends Component {\n    render() {\n\t\tconst { value = 0, smallUnit } = this.props;\n\t\tconst { userStore } = this.props.stores;\n\t\tconst { user } = userStore;\n\t\tconst { settings = {} } = user;\n\n        if (settings.imperial) {\n            return (<>\n                <nobr>\n                    {util.format(celciusToFahrenheit(value), 0)}°F\n                </nobr>\n            </>);\n        }\n\n\t\treturn (<>\n            <nobr>\n                {util.format(value, 1)}°C\n            </nobr>\n        </>);\n    }\n}\n\nexport default Temperature;\n","import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport { Text, Localizer } from 'preact-i18n';\n\nimport mu from '../../lib/musher-util';\n\nfunction kgToPounds(value) {\n    return 2.20462 * value;\n}\n\n@observer\nclass Weight extends Component {\n    render() {\n\t\tconst { value = 0, smallUnit } = this.props;\n\t\tconst { userStore } = this.props.stores;\n\t\tconst { user } = userStore;\n\t\tconst { settings = {} } = user;\n\n        if (settings.imperial) {\n            return (<>\n                <nobr>\n                    {util.format(kgToPounds(value), 0)} lb\n                </nobr>\n            </>);\n        }\n\n\t\treturn (<>\n            <nobr>\n                {util.format(value, 0)} kg\n            </nobr>\n        </>);\n    }\n}\n\nexport default Weight;\n","import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\n\nimport mu from '../../lib/musher-util';\n\nconst STOP_STATUSES = [2, 9];\nconst WARN_STATUSES = [4, 8];\n\n\nfunction getFatigueLevel(wo, dog) {\n    if (dog) {\n        if (STOP_STATUSES.indexOf(dog.status) > -1) {\n            return 'danger';\n        } else if (WARN_STATUSES.indexOf(dog.status) > -1) {\n            return 'warning';\n        }\n    }\n    if (wo) {\n        if (wo.distanceKm > 50) {\n            return 'danger';\n        } else if (wo.distanceKm > 30) {\n            return 'warning';\n        }\n    }\n    return 'success';\n}\n\n@observer\nclass Dog extends Component {\n    render() {\n        const { \n            dog,\n            showWorkout,\n            showTeam,\n            showNeeds,\n            showInfo,\n            showName = true,\n            showPosition = true,\n            showAge = false,\n            className,\n            size,\n        } = this.props;\n\t\tconst { userStore, dogStore } = this.props.stores;\n        const { isAdmin, user } = userStore;\n        const { language = 'en' } = user;\n\n        if (!dog) {\n            if (size === 'small') {\n                return (\n                    <div class={`mb-1 position-relative ${className}`} style='width: 50px;'>\n                        <div class={`text-center border rounded-circle imageRounded imageRoundedSmall text-muted pt-2  mx-auto`}>\n                            <span class='font-weight-lighter' style='font-size: 20px;'>&nbsp;</span>\n                        </div>\n                        {showName && <div class='text-center'>\n                            &nbsp;\n                        </div>}\n                    </div>\n                );\n            }\n            if (size === 'medium') {\n                return (\n                    <div class={`mb-1 position-relative ${className}`} style='width: 60px;'>\n                        <div class={`text-center border rounded-circle imageRounded imageRoundedMedium text-muted pt-2  mx-auto`}>\n                            <span class='font-weight-lighter' style='font-size: 25px;'>&nbsp;</span>\n                        </div>\n                        {showName && <div class='text-center'>\n                            &nbsp;\n                        </div>}\n                    </div>\n                );\n            }\n            return (\n                <div class={`mb-2 position-relative ${className}`} style='width: 92px;'>\n                    <div class={`text-center border rounded-circle imageRounded text-muted pt-2  mx-auto`}>\n                        <span class='font-weight-lighter' style='font-size: 35px;'>&nbsp;</span>\n                    </div>\n                    {showName && <div class='text-center'>\n                        &nbsp;\n                    </div>}\n                </div>\n            );\n        }\n\n        const dogStatus = userStore.findDogstatus({ status: dog.status, language });\n        const dogPosition = userStore.findDogposition({ position: dog.position, language });\n        const workoutSummary = dogStore.findCurrentWorkoutSummary(dog.id);\n        const hasBirthday = mu.hasBirthday(dog.birth);\n        const daysUntilBirthday = Math.ceil(mu.daysUntilNextBirthday(dog.birth));\n\n        if (size === 'small') {\n            return (\n                <div class={`mb-1 position-relative ${className}`} style='width: 50px;'>\n                    <div\n                        class={`text-center border border-${getFatigueLevel(workoutSummary, dog)} rounded-circle imageRounded imageRoundedSmall mx-auto text-muted pt-2`}\n                        style={`${dog.image ? `background-image: url(\"${dog.image.s3SmallLink}\"); background-size: cover;` : ''} border-width: 2px !important;`}\n                    >\n                        {!dog.image && <span class='font-weight-lighter' style='font-size: 20px;'>{util.ucfirst(dog.name, true)}</span>}\n                    </div>\n                </div>\n            );\n        }\n        if (size === 'medium') {\n            return (\n                <div class={`mb-1 position-relative ${className}`} style='width: 60px;'>\n                    <div\n                        class={`text-center border border-${getFatigueLevel(workoutSummary, dog)} rounded-circle imageRounded imageRoundedMedium mx-auto text-muted pt-2`}\n                        style={`${dog.image ? `background-image: url(\"${dog.image.s3SmallLink}\"); background-size: cover;` : ''} border-width: 2px !important;`}\n                    >\n                        {!dog.image && <span class='font-weight-lighter' style='font-size: 20px;'>{util.ucfirst(dog.name, true)}</span>}\n                    </div>\n                </div>\n            );\n        }\n\n        return (\n            <div class={`mb-2 position-relative ${className}`} style='width: 92px;'>\n                {/* {JSON.stringify(dog, null, 4)} */}\n                {showPosition && dogPosition && <small class='position-absolute' style='left:0px; top: 50px;'>\n                    <span class={`badge badge-${dogPosition.class || 'primary'} mr-3`}>{dogPosition.icon && <i class={dogPosition.icon} />} {dogPosition.name}</span>\n                </small>}\n                <div\n                    class={`text-center border border-${getFatigueLevel(workoutSummary, dog)} rounded-circle imageRounded mx-auto text-muted pt-2`}\n                    style={`${dog.image ? `background-image: url(\"${dog.image.s3SmallLink}\"); background-size: cover;` : ''} border-width: 2px !important;`}\n                >\n                    {/* {!dog.image && <i class='fas fa-dog mt-3' style='font-size: 40px;' />} */}\n                    {!dog.image && <span class='font-weight-lighter' style='font-size: 35px;'>{util.ucfirst(dog.name, true)}</span>}\n                </div>\n                <div class='text-center' style='line-height: 1.0em;'>\n                    <small>\n                        {/* <span class='float-right'>\n                            {dog.birth && <span class='mr-2'>{util.age(dog.birth, dog.deceased)}</span>}\n                            {dog.gender === 'female' ? <i class='fas fa-venus' /> : <i class='fas fa-mars' />}\n                        </span> */}\n                        {showName && <a class='stretched-link' href={`/dogs/${dog.id}`}>\n                            <h5 class='mb-1 font-weight-light' style='line-height: 1.0em; font-size: 1.3em;'>\n                                {dog.shortname || dog.name}\n                                {hasBirthday && <>\n                                    <i class='fas fa-birthday-cake ml-3' />\n                                </>}\n                            </h5>\n                        </a>}\n\n                        {dog.birth && showAge && <>\n                            <span>\n                                {daysUntilBirthday < 7 && <>\n                                    <span class='text-muted mr-2'>\n                                        <i class='fas fa-birthday-cake' /> in {daysUntilBirthday} days\n                                    </span>\n                                </>}                                \n                                {dog.birth && <span class='mr-2'>{util.age(dog.birth, dog.deceased)}</span>}\n                                {dog.gender === 'female' ? <i class='fas fa-venus' /> : <i class='fas fa-mars' />}\n                            </span>\n                        </>}\n\n                        {showTeam && <><span class='font-weight-light'>{userStore.findTeam(dog.team)}</span><br /></>}\n\n                        {showWorkout && <small class='text-muted'>\n                            {workoutSummary && workoutSummary.distanceKm > 0 && <span class='mr-2'><i class='fas fa-road' /> {util.format(workoutSummary.distanceKm, 0)}km</span>}\n                            {workoutSummary && workoutSummary.elevation > 0 && <span class='mr-2'><i class='fas fa-mountain' /> {util.format(workoutSummary.elevation, 0)}m</span>}\n                            {workoutSummary && workoutSummary.duration > 0 && <span class='mr-2'><i class='fas fa-clock' /> {util.secToHms(workoutSummary.duration, true)}</span>}\n                            {workoutSummary && workoutSummary.speedAvg > 0 && <span class='mr-2'><i class='fas fa-tachometer-alt' /> {util.format(workoutSummary.speedAvg, 1)}km/t</span>}\n                        </small>}\n\n                        {showInfo && <small class='text-muted'>\n                            {dog.weight && <><i class='fas fa-balance-scale ml-2' /> {util.format(dog.weight, 1)} kg</>}\n                            {dog.bodyScore && <><i class='fas fa-dog ml-2' /> {util.format(dog.bodyScore, 1)}</>}\n                        </small>}\n\n                        {showNeeds && <div class='clearfix pb-0 pt-1'>\n                            {dog.specialNeeds && <span class={`badge badge-warning mr-2`}><i class='fas fa-exclamation-triangle' /> {dog.specialNeeds}</span>}\n                            {dogStatus && <span class={`badge badge-${dogStatus.class} mr-2`}>{dogStatus.icon && <i class={dogStatus.icon} />} {dogStatus.name}</span>}\n                        </div>}\n                    </small>\n                </div>\n            </div>\n        );\n    }\n}\n\nexport default Dog;\n","import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport { route } from 'preact-router';\nimport { Text, Localizer } from 'preact-i18n';\nimport { toJS } from 'mobx';\n\nimport mu from '../../lib/musher-util';\n\nimport Map from '../../components/map';\nimport DogSimple from '../../components/dog/simple';\n\nimport Speed from '../../components/data/speed';\nimport Elevation from '../../components/data/elevation';\nimport Weight from '../../components/data/weight';\nimport Distance from '../../components/data/distance';\nimport Temperature from '../../components/data/temperature';\n\nfunction displayDistance(distanceKm) {\n\tif (distanceKm < 5) {\n\t\treturn util.format(distanceKm, 2);\n\t}\n\tif (distanceKm < 10) {\n\t\treturn util.format(distanceKm, 1);\n\t}\n\treturn util.format(distanceKm, 1);\n}\n\nconst initialState = {\n\tmapHeight: 600,\n};\n\n@observer\nclass WorkoutMap extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            ...initialState,\n        };\n    }\n\n    loadWorkout = async (props = this.props) => {\n\t\tconst { workoutStore } = this.props.stores;\n        await workoutStore.loadPublic(parseInt(props.workout, 10));\n    }\n\n    componentDidMount() {\n        this.loadWorkout();\n    }\n\n\tcomponentWillReceiveProps(nextProps) {\n        // console.log('componentWillReceiveProps', nextProps);\n        if (nextProps.workout !== this.props.workout) {\n            this.loadWorkout(nextProps);\n        }\n    }\n\n\trender() {\n\t\tconst { workoutStore, userStore, appState } = this.props.stores;\n\t\tconst { mapColorMode, mapRangeMin, mapRangeMax } = appState;\n\t\tconst { mapHeight, reloadLastEpoch } = this.state;\n\t\tconst { workout } = workoutStore;\n\t\tconst track = userStore.findTrack(workout.track);\n        const dogs = userStore.findDogs(workout.dogs);\n\t\tconst { gpxInfo = {} } = workout;\n\n\t\treturn (\n\t\t\t<div class='container-fluid p-0 h-100 position-relative'>\n                {workout && workout.gpx && <>\n                    <div style={`height: 100%;`}>\n                        <Map\n                            stores={this.props.stores}\n                            mapId={`${workout.id}-${mapHeight}`}\n                            geojson={workout.gpx.geoJSON}\n                            skipGeojson={false}\n                            gpxInfo={workout.gpxInfo}\n                            height={mapHeight}\n                            mapColorMode={mapColorMode}\n                            mapRangeMin={mapRangeMin}\n                            mapRangeMax={mapRangeMax}\n                            key={`workout-map-${reloadLastEpoch}`}\n\n                            showSearch={false}\n                            showZoomControl={false}\n                            showLayersControl={true}\n                            showFullscreenControl={false}\n                            showScaleControl={false}\n                            showRange={false}\n\n                            layersControlPosition={'topleft'}\n                        />\n                    </div>\n                </>}\n                {track && track.gpx && !(workout && workout.gpx) && <div style={`height: 100%;`}>\n                    <Map\n                        stores={this.props.stores}\n                        mapId={`${track.id}-${mapHeight}`}\n                        geojson={track.gpx.geoJSON}\n                        skipGeojson={false}\n                        gpxInfo={track.gpx.gpxInfo}\n                        height={mapHeight}\n                        mapColorMode={mapColorMode}\n                        mapRangeMin={mapRangeMin}\n                        mapRangeMax={mapRangeMax}\n                        key={`workout-map-${reloadLastEpoch}`}\n\n                        showSearch={false}\n                        showZoomControl={false}\n                        showLayersControl={true}\n                        showFullscreenControl={false}\n                        showScaleControl={false}\n                        showRange={false}\n\n                        layersControlPosition={'topleft'}\n                    />\n                </div>}\n                <div class='position-absolute d-flex' style='top: 5px; left: 5px; z-index: 99999999;'>\n                    <div>\n                        <img src={`https://themusher.litt.no/assets/logo.png`} height='55' />\n                    </div>\n                    <div class='pl-3 text-white'\n                        style='font-size: 2.6em; line-height: 1.0em; text-shadow: 2px 2px #000000;'\n                    >\n                        QPaws\n                    </div>\n                </div>\n                <div\n                    class='position-absolute text-white'\n                    style='bottom: 0px; left: 0px; width: 100%; height: 100px; z-index: 99999999;'\n                >\n                    <div class='d-flex ' style='text-shadow: 2px 2px #000000;'>\n                        <div class='text-center font-weight-bold flex-fill'>\n                            <div style='font-size: 1.5em; line-height: 1.0em;'>Distance</div>\n                            <div style='font-size: 2.5em; line-height: 1.0em;' class='text-overflow'>\n                                <Distance stores={this.props.stores} value={workout.distanceKm} />\n                            </div>\n                        </div>\n                        <div class='text-center font-weight-bold flex-fill'>\n                            <div style='font-size: 1.5em; line-height: 1.0em;'>Elevation</div>\n                            <div style='font-size: 2.5em; line-height: 1.0em;' class='text-overflow'>\n                                <Elevation stores={this.props.stores} value={workout.elevation} />\n                            </div>\n                        </div>\n                        <div class='text-center font-weight-bold flex-fill'>\n                            <div style='font-size: 1.5em; line-height: 1.0em;'>Avg speed</div>\n                            <div style='font-size: 2.5em; line-height: 1.0em;' class='text-overflow'>\n                                {gpxInfo && gpxInfo.avgGpsMovingSpeed > 0 ? <>\n                                    <Speed stores={this.props.stores} value={gpxInfo.avgGpsMovingSpeed * 3.6} />\n                                </> : <>\n                                    <Speed stores={this.props.stores} value={workout.speedAvg} />\n                                </>}\n                            </div>\n                        </div>\n                        <div class='text-center font-weight-bold flex-fill'>\n                            <div style='font-size: 1.5em; line-height: 1.0em;'>Duration</div>\n                            <div style='font-size: 2.5em; line-height: 1.0em;' class='text-overflow'>\n                                {util.secToHms(workout.duration, true)}\n                            </div>\n                        </div>\n                    </div>\n                </div>\n\n                <div\n                    class='position-absolute text-white'\n                    style='bottom: 110px; right: 0px; width: 165px; z-index: 99999999;'\n                >\n                    {workout.dogsLeft && <div class='offset-0 col-12 mt-4'>\n                        <div class='row'>\n                            <div class='col-6 p-0'>\n                                {workout.dogsLeft && workout.dogsLeft.map(dogId => {\n                                    const dog = workout.dogs.find(e => e.id === dogId);\n                                    return <DogSimple\n                                        stores={this.props.stores}\n                                        dog={dog}\n                                        className='ml-auto'\n                                        showName={false}\n                                        showPosition={false}\n                                        size='medium'\n                                    />;\n                                })}\n                            </div>\n                            <div class='col-6 p-0'>\n                                {workout.dogsRight && workout.dogsRight.map(dogId => {\n                                    const dog = workout.dogs.find(e => e.id === dogId);\n                                    return <DogSimple\n                                        stores={this.props.stores}\n                                        dog={dog}\n                                        className='mr-auto'\n                                        showName={false}\n                                        showPosition={false}\n                                        size='medium'\n                                    />;\n                                })}\n                            </div>\n                        </div>\n                    </div>}\n                </div>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nexport default WorkoutMap;\n","import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport { Text, Localizer } from 'preact-i18n';\n\nimport mu from '../../lib/musher-util';\n\nfunction meterToFeet(value) {\n    return 3.28084 * value;\n}\n\n@observer\nclass Elevation extends Component {\n    render() {\n\t\tconst { value = 0, smallUnit } = this.props;\n\t\tconst { userStore } = this.props.stores;\n\t\tconst { user } = userStore;\n\t\tconst { settings = {} } = user;\n\n        if (settings.imperial) {\n            return (<>\n                <nobr>\n                    {util.format(meterToFeet(value), 0)} {smallUnit ? <><small><small><small class='ml-0 text-muted'>ft</small></small></small></> : <>ft</>}\n                </nobr>\n            </>);\n        }\n\n\t\treturn (<>\n            <nobr>\n                {util.format(value, 0)} {smallUnit ? <><small><small><small class='ml-0 text-muted'>m</small></small></small></> : <>m</>}\n            </nobr>\n        </>);\n    }\n}\n\nexport default Elevation;\n","import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport { Text, Localizer } from 'preact-i18n';\n\nimport mu from '../../lib/musher-util';\n\nfunction kmtToMph(value) {\n    return 0.621371 * value;\n}\n\n@observer\nclass Speed extends Component {\n    render() {\n\t\tconst { value = 0, smallUnit } = this.props;\n\t\tconst { userStore } = this.props.stores;\n\t\tconst { user } = userStore;\n\t\tconst { settings = {} } = user;\n\n        if (settings.imperial) {\n            return (<>\n                <nobr>\n                    {util.format(kmtToMph(value), 1)} {smallUnit ? <><small><small><small class='ml-0 text-muted'><Text id='workouts.mph'>mph</Text></small></small></small></> : <><Text id='workouts.mph'>mph</Text></>}\n                </nobr>\n            </>);\n        }\n\n\t\treturn (<>\n            <nobr>\n                {util.format(value, 1)} {smallUnit ? <><small><small><small class='ml-0 text-muted'><Text id='workouts.kmt'>km/t</Text></small></small></small></> : <><Text id='workouts.kmt'>km/t</Text></>}\n            </nobr>\n        </>);\n    }\n}\n\nexport default Speed;\n"],"sourceRoot":""}