(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{HGwV:function(t,e,a){"use strict";(function(t){function s(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,s)}return a}function c(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?s(Object(a),!0).forEach((function(e){o(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):s(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}function o(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function l(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}var r,n,i,h=a("hosL"),d=(a("QRet"),a("Utv1")),b=a("/eY4"),u=a("OhSV"),p=(a("Y3FI"),a("fh8t")),m=a.n(p),f=(a("go65"),a("HQo+")),O=a("wanP"),j=a("ZQlJ"),g=a("q/oJ"),v=a("gWxU"),w=a("Nanz"),y=a("ZOvn"),x=y.a.marginTop(!1),k=y.a.marginTopBack(!1),S=(y.a.marginBottom(),y.a.subMenuMarginTop(),{isLoading:!1,email:"",submenu:"ads",jwtToken:d.a.getJwtToken(),reloadInSec:null,reloadIsActive:!1,leaderboardMode:"mushers",filterByraceClass:"",showLeaderBoard:!0,showNews:!0}),T=Object(b.a)(r=function(e){function a(t){var a;return(a=e.call(this,t)||this).initComponent=function(){a.setState({reloadIsActive:!0},(function(){return a.tickReloadTimeer()}))},a.tickReloadTimeer=function(){var t=a.props.reloadLastEpoch;if(a.state.reloadIsActive){var e=Math.floor((new Date).getTime()/1e3);a.setState({reloadInSec:60-(e-t)}),clearTimeout(a.updateTimer.tick),a.updateTimer.tick=setTimeout((function(){return a.tickReloadTimeer()}),1e3)}return!1},a.state=c({},S),a.updateTimer={},a}l(a,e);var s=a.prototype;return s.componentDidMount=function(){this.initComponent()},s.componentWillUnmount=function(){clearTimeout(this.updateTimer.tick)},s.render=function(){var e=this.state.reloadInSec,a=this.props,s=a.radius,c=void 0===s?13:s,o=a.fontSize,l=void 0===o?11:o,r=a.classNames,n=void 0===r?"":r,i=Math.floor(d.a.normalizeBetween(e,0,60,0,100));return Object(h.h)(t,null,Object(h.h)("span",{class:n},Object(h.h)(O.a,{key:"gauge-reload-page",color:"primary",radius:c,showPercentText:!1,percent:i,showCenterText:!0,centerText:e,centerTextSize:l,centerTextY:"55%"})))},a}(h.Component))||r,D=Object(b.a)(n=function(e){function a(t){var a;return(a=e.call(this,t)||this).toggleAdminInfo=function(t){t.stopPropagation(),a.setState({showAdminInfo:!a.state.showAdminInfo})},a.toggleInfo=function(t){t.stopPropagation(),a.setState({showInfo:!a.state.showInfo})},a.state={},a}return l(a,e),a.prototype.render=function(){var e=this.state,a=e.showAdminInfo,s=e.showInfo,c=this.props,o=c.bib,l=c.email,r=c.onTeamClick,n=c.onDogClick,i=this.props.stores,b=i.raceStore,p=i.userStore.isAdmin,f=o?b.getMusherByBibId(o):b.getMusherByBibEmail(l),O=b.getTeamById(f.team),g=O.members?O.members.find((function(t){return t.email===f.email})):{},v=b.getClassByTeamId(f.team),w=b.getTotalsByTeamId(f.team),x=y.a.getImage({user:g,team:O,priority:"user"}),k=y.a.displayNameShort(g)||y.a.displayNameShort(f);return Object(h.h)(t,null,Object(h.h)("div",{class:"d-flex position-relative"},Object(h.h)("div",{class:"position-relative text-center border rounded-circle imageRounded imageRoundedMedium",style:x?'background-image: url("'+x+'"); background-size: cover;':""},!x&&Object(h.h)("div",{class:"text-muted",style:"font-size: 25px; padding-top: 5px;"},k),Object(h.h)("div",{class:"rounded-pill-both px-2 text-center position-absolute bg-secondary font-weight-bold",style:"bottom: -10px; right: 50%;"},f.bib&&"n/a"!==f.bib&&Object(h.h)(t,null,f.bib))),Object(h.h)("div",{class:"flex-grow-1 pl-3 text-overflow mb-3",style:"line-height: 1.2em;"},Object(h.h)("h6",{class:"font-weight-light mb-0"},v.title),Object(h.h)("h3",{class:"mb-0"},f.flag," ",f.firstname," ",f.lastname),Object(h.h)("h6",{class:"mb-0"},f.sportsClub))),O.public>0&&Object(h.h)(t,null,s?Object(h.h)(t,null,Object(h.h)("button",{class:"btn btn-link float-right",onClick:this.toggleInfo},Object(h.h)("i",{class:"fas fa-angle-up"})," ",Object(h.h)(u.c,{id:"races.hide-info"},"Hide info"))):Object(h.h)(t,null,Object(h.h)("button",{class:"btn btn-link float-right",onClick:this.toggleInfo},Object(h.h)("i",{class:"fas fa-angle-down"})," ",Object(h.h)(u.c,{id:"races.show-info"},"Show info"))),Object(h.h)("h3",null,O.public?Object(h.h)(t,null,Object(h.h)("a",{href:"/teams/public/"+O.uuidv4,onClick:function(t){return r(t,O.uuidv4)}},O.name)):Object(h.h)(t,null,O.name)),s&&Object(h.h)(t,null,Object(h.h)(m.a,{markdown:y.a.replaceImages(O.description,O.images),markdownOpts:y.a.getMarkdownOptions()})),O.dogs&&Object(h.h)("div",{class:"w-100"},Object(h.h)("div",{class:"row pt-2"},Object(h.h)(j.a,{stores:this.props.stores,dogs:O.dogs.map((function(t){return t.id})),allDogs:O.dogs,onDogClick:n})))),w&&w.distanceKm&&Object(h.h)(t,null,Object(h.h)("div",{class:"table-responsive-lg"},Object(h.h)("table",{class:"table table-borderless"},Object(h.h)("tbody",null,Object(h.h)("tr",null,Object(h.h)("td",{style:"width: 5%;"},Object(h.h)("i",{class:"fas fa-dog"})),Object(h.h)("td",{style:"width: 60%"},Object(h.h)(u.c,{id:"races.dogs"},"Dogs")),Object(h.h)("td",{style:"width: 5%;"}," "),Object(h.h)("td",{class:"text-right",style:"width: 30%;"},O.dogs.length)),Object(h.h)("tr",null,Object(h.h)("td",null,Object(h.h)("i",{class:"fas fa-road"})),Object(h.h)("td",null,Object(h.h)(u.c,{id:"races.distance"},"Distance")),Object(h.h)("td",null," "),Object(h.h)("td",{class:"text-right"},Object(h.h)("nobr",null,w.distanceKm?d.a.format(w.distanceKm,1)+" km":"n/a"))),Object(h.h)("tr",null,Object(h.h)("td",null,Object(h.h)("i",{class:"fas fa-mountain"})),Object(h.h)("td",null,Object(h.h)(u.c,{id:"races.ascend"},"Ascending")),Object(h.h)("td",null," "),Object(h.h)("td",{class:"text-right"},Object(h.h)("nobr",null,w.elevation?d.a.format(w.elevation,0)+" m":"n/a"))),Object(h.h)("tr",null,Object(h.h)("td",null,Object(h.h)("i",{class:"fas fa-stopwatch"})),Object(h.h)("td",null,Object(h.h)(u.c,{id:"races.race-time"},"Racetime")),Object(h.h)("td",null,Object(h.h)("i",{class:"fas fa-clock"})),Object(h.h)("td",{class:"text-right"},Object(h.h)("nobr",null,d.a.secToHms(w.duration)||"n/a"))),Object(h.h)("tr",null,Object(h.h)("td",null,Object(h.h)("i",{class:"fas fa-bed"})),Object(h.h)("td",null,Object(h.h)(u.c,{id:"races.rest-time"},"Rest")),Object(h.h)("td",null,Object(h.h)("i",{class:"fas fa-clock"})),Object(h.h)("td",{class:"text-right"},Object(h.h)("nobr",null,d.a.secToHms(w.rest)||"n/a"))))))),p&&Object(h.h)("div",{style:"max-height: 200px; max-width: 70vw; overflow: auto;"},Object(h.h)("button",{class:"btn btn-link btn-block",onClick:this.toggleAdminInfo},"Toggle admin info"),a&&Object(h.h)(t,null,Object(h.h)("small",null,Object(h.h)("xmp",null,JSON.stringify(f,null,4),JSON.stringify(g,null,4),JSON.stringify(O,null,4),JSON.stringify(w,null,4))))))},a}(h.Component))||n,I=Object(b.a)(i=function(e){function a(t){var a;return(a=e.call(this,t)||this).loadLiveRaceResults=function(t){return new Promise((function(e,s){var c;return void 0===t&&(t=a.props),c=t.stores.raceStore,Promise.resolve(c.getRaceTrackerData(c.race.raceTrackerRace)).then((function(){try{return c.getRaceTrackerActiveTeams(),e()}catch(t){return s(t)}}),s)}))},a.loadRaceResults=function(t,e,s){return new Promise((function(c,o){var l;return void 0===t&&(t=a.props),l=t.stores.raceStore,Promise.resolve(l.loadWorkoutSummary(e,t.raceid)).then((function(){try{return l.getWorkoutSummaryActiveTeams(s),c()}catch(t){return o(t)}}),o)}))},a.loadRace=function(t){return new Promise((function(e,s){var c,o,l,r,n,i;return void 0===t&&(t=a.props),a.setState({isLoading:!0}),o=(c=t.stores).raceStore,l=c.appState,Promise.resolve(o.load(t.raceid)).then(function(){try{if(n=l.focusOnMushers,(i=(r=o.race).classes.filter((function(t){return t.contestants&&t.contestants.length>0})).map((function(t){return t.contestants.filter((function(t){return t.team>0})).map((function(t){return t.team}))})).flat()).length>0)return Promise.resolve(o.loadTeams(i.join(","))).then(function(){try{return r.liveRace>0?Promise.resolve(a.loadLiveRaceResults(t,n)).then(function(){try{return e.call(this)}catch(t){return s(t)}}.bind(this),s):Promise.resolve(a.loadRaceResults(t,i.join(","),n)).then(function(){try{return e.call(this)}catch(t){return s(t)}}.bind(this),s);function e(){return c.call(this)}}catch(t){return s(t)}}.bind(this),s);function c(){return o.getAllClassesSortedBy(),clearTimeout(a.updateTimer.reload),a.updateTimer.reload=setTimeout((function(){return new Promise((function(e){var s=Math.floor((new Date).getTime()/1e3);return a.setState({reloadLastEpoch:s}),a.loadRace(t),e()}))}),6e4),a.setState({isLoading:!1}),e()}return c.call(this)}catch(t){return s(t)}}.bind(this),s)}))},a.setLeaderboardMode=function(t){a.setState({leaderboardMode:t.target.parentElement.dataset.mode||t.target.dataset.mode})},a.chooseRaceClass=function(t){a.setState({filterByraceClass:t.target.value})},a.toggleShowLeaderBoard=function(t){a.setState(!0===t?{showLeaderBoard:!1}:{showLeaderBoard:!a.state.showLeaderBoard})},a.toggleShowNews=function(t){a.setState(!0===t?{showNews:!1}:{showNews:!a.state.showNews})},a.onMarkerClick=function(t){a.setState({showModal:!a.state.showModal,modalTitle:t.title,modalBib:t.bib,modalEmail:t.email})},a.toggleModal=function(){a.setState({showModal:!a.state.showModal})},a.onTeamClick=function(t,e){return t.preventDefault(),t.stopPropagation(),a.setState({showTeam:e}),!1},a.hideTeam=function(){a.setState({showTeam:null})},a.onUserClick=function(t){return t.preventDefault(),t.stopPropagation(),!1},a.onDogClick=function(t,e,s){return t.preventDefault(),t.stopPropagation(),a.setState({showDog:e,dogs:s}),!1},a.hideDog=function(){a.setState({showDog:null})},a.back=function(){a.props.stores.history.goBack()},a.state=c(c({},S),{},{reloadLastEpoch:Math.floor((new Date).getTime()/1e3)}),a.updateTimer={},a}l(a,e);var s=a.prototype;return s.componentWillUnmount=function(){clearTimeout(this.updateTimer.reload),clearTimeout(this.updateTimer.tick)},s.componentDidMount=function(){this.loadRace();var t,e={width:(t=window).innerWidth,height:t.innerHeight};e.width<800&&(this.toggleShowLeaderBoard(!0),this.toggleShowNews(!0))},s.render=function(){var e=this.props.stores,a=e.raceStore,s=this.props,c=s.raceid,o=this.state,l=o.reloadLastEpoch,r=o.showModal,n=o.modalBib,i=o.modalEmail,d=o.showTeam,b=o.showDog,u=a.waypoints,p=a.waypoints2,m=a.waypoints3,O=a.zoomToMarkers,j=a.race,y=n?a.getMusherByBibId(n):a.getMusherByBibEmail(i),S=a.getTeamById(y.team);return Object(h.h)(t,null,d&&Object(h.h)(g.a,null,Object(h.h)(v.a,{stores:this.props.stores,teamid:d,marginTop:"0px;",marginBottom:"0px;",back:this.hideTeam,hideTeam:this.hideTeam})),b&&Object(h.h)(g.a,null,Object(h.h)(w.a,{stores:this.props.stores,dogid:b,marginTop:"0px;",marginBottom:"0px;",back:this.hideDog,dogs:S.dogs})),Object(h.h)("div",{class:"container-fluid position-relative p-0",style:"margin-top: "+x+"; height: calc(100vh - 130px);"},Object(h.h)(f.a,{stores:this.props.stores,raceid:c,waypoints:u,waypoints2:p,waypoints3:m,zoomToMarkers:O,fullscreenMap:!0,onMarkerClick:this.onMarkerClick}),Object(h.h)("div",{class:"position-absolute",style:"top: 15px; left: 50px; z-index: 9999;"},Object(h.h)("button",{class:"btn btn-link pl-0 fixed-top text-primary",style:"top: "+k+"; left: 5px; font-size: 35px; width: 45px;",onClick:this.back},Object(h.h)("i",{class:"fas fa-arrow-circle-left"})),Object(h.h)("div",{class:"logo ml-3 clearfix text-white"},Object(h.h)("img",{src:"./assets/homerun-race-logo-2-small.png",height:"37",class:"float-left"}),Object(h.h)("a",{href:"/app-races/"+j.id+"/results"},Object(h.h)("span",{class:"font-weight-bold text-dark",style:"font-size: 1.4em;"},j.title)))),Object(h.h)("div",{class:"position-absolute",style:"top: 55px; left: 5px; z-index: 9999; width: 30px; height: 30px;"},Object(h.h)(T,{stores:this.props.stores,classNames:"float-right ml-2",reloadLastEpoch:l})),r&&Object(h.h)(t,null,Object(h.h)("div",{class:"position-absolute",style:"top: 0px; left: 0px; z-index: 9999; width: 100%; height: 100%; background: rgba(0, 0, 0, 0.3);",onClick:this.toggleModal},Object(h.h)("div",{class:"position-absolute bg-light border rounded rounded-lg pt-5 pb-3 px-2",style:"top: 50%; left: 50%; transform: translate(-50%, -50%); width: 80vw; max-width: 80vw; max-height: 80vh; overflow: auto;"},Object(h.h)("button",{class:"btn btn-link float-right position-absolute",style:"top: 0px; right: 0px;"},"Close"),Object(h.h)(D,{stores:this.props.stores,bib:n,email:i,onTeamClick:this.onTeamClick,onUserClick:this.onUserClick,onDogClick:this.onDogClick}))))))},a}(h.Component))||i;e.a=I}).call(this,a("hosL").Fragment)},"HQo+":function(t,e,a){"use strict";(function(t){function s(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,s)}return a}function c(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}var o,l=a("hosL"),r=(a("Utv1"),a("/eY4")),n=(a("OhSV"),a("cneo"),a("HqZR")),i=(a("ZOvn"),{showAddComment:!1}),h=Object(r.a)(o=function(e){function a(t){var a;return(a=e.call(this,t)||this).state=function(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?s(Object(a),!0).forEach((function(e){c(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):s(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}({},i),a.updateTimer={},a.inputRef={},a}var o,r;r=e,(o=a).prototype=Object.create(r.prototype),o.prototype.constructor=o,o.__proto__=r;var h=a.prototype;return h.loadTrack=function(){return new Promise((function(t){return t()}))},h.componentDidMount=function(){this.loadTrack()},h.render=function(){var e=this.props,a=e.waypoints,s=e.waypoints2,c=e.waypoints3,o=e.zoomToMarkers,r=e.mapid,i=e.fullscreenMap,h=e.onMarkerClick;return Object(l.h)(t,null,Object(l.h)(n.a,{stores:this.props.stores,mapId:r,minZoom:2,maxZoom:18,height:600,waypoints:a,waypoints2:s,waypoints3:c,zoomToMarkers:o,fullscreenMap:i,onMarkerClick:h,key:"map-"+r}))},a}(l.Component))||o;e.a=h}).call(this,a("hosL").Fragment)},J9nn:function(t,e,a){"use strict";(function(t){var s,c=a("hosL"),o=(a("Utv1"),a("/eY4")),l=a("OhSV"),r=(a("Y3FI"),a("fh8t"),a("go65"),a("ZOvn"),Object(o.a)(s=function(e){function a(t){var a;return(a=e.call(this,t)||this).subscribeNotificationTopic=function(t){return new Promise((function(e,s){var c,o;return void 0===(o=(c=a.props.stores.userStore).user.notificationTopics)?{}:o,1,Promise.resolve(c.setNotificationTopic({field:"notificationTopics."+t,value:1})).then((function(){try{return e()}catch(t){return s(t)}}),s)}))},a.state={},a.inputRef={},a.updateTimer={},a}var s,o;return o=e,(s=a).prototype=Object.create(o.prototype),s.prototype.constructor=s,s.__proto__=o,a.prototype.render=function(){var e=this,a=this.props.stores,s=a.userStore,o=s.user,r=void 0===o?{}:o,n=r.notificationTopics,i=void 0===n?{}:n,h=this.props.race,d="race-"+(void 0===h?{}:h).id;return i&&i[d]?"":Object(c.h)(t,null,Object(c.h)("div",{class:"row"},Object(c.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-0 mb-2"},Object(c.h)("button",{class:"btn btn-block btn-info btn-lg",onClick:function(){return e.subscribeNotificationTopic(d)}},Object(c.h)("i",{class:"fas fa-bell"})," ",Object(c.h)(l.c,{id:"race.notifications"},"Subscribe to race notifications")))))},a}(c.Component))||s);e.a=r}).call(this,a("hosL").Fragment)},Pbyq:function(t,e,a){"use strict";(function(t){var s,c=a("hosL"),o=a("Utv1"),l=a("/eY4"),r=(a("OhSV"),a("Y3FI"),a("fh8t"),a("go65"),a("om2D"),a("AEg1")),n=a("gOLw"),i=(a("ZOvn"),Object(l.a)(s=function(e){function a(t){var a;return(a=e.call(this,t)||this).addRaceUserImage=function(){return new Promise((function(t,e){var s;return s=a.props.race,Promise.resolve(a.props.stores.raceStore.addUserImage({id:(void 0===s?{}:s).id,newUserImage:a.state.newRaceUserImage})).then((function(){try{return a.setState({newRaceUserImage:{}}),t()}catch(t){return e(t)}}),e)}))},a.updateUserImageUpload=function(t){var e=a.state.newRaceUserImage;e[t.field]=t.value,a.setState({newRaceUserImage:e})},a.removeRaceUserImage=function(t){return new Promise((function(e,s){var c;return c=a.props.race,Promise.resolve(a.props.stores.raceStore.removeUserImage({id:(void 0===c?{}:c).id,userImageId:t.target.parentElement.dataset.id||t.target.dataset.id})).then((function(){try{return e()}catch(t){return s(t)}}),s)}))},a.editRaceUserImage=function(t){return new Promise((function(e){var s,c=t.target.dataset,l=c.id,r=c.field,n=t.target.value,i=a.props.race,h=(void 0===i?{}:i).id,d=a.props.stores.raceStore,b=((s={raceUserImageId:l})["raceUserImage"+o.a.ucfirst(r)]=n,s);return clearTimeout(a.updateTimer[h+"-"+l+"-"+r]),a.updateTimer[h+"-"+l+"-"+r]=setTimeout((function(){return new Promise((function(t){return d.editUserImage({id:h,data:b}),t()}))}),1500),a.resizeTextarea(t.target),e()}))},a.resizeTextarea=function(t){var e=t;e.target&&(e=t.target),e.style.height=e.scrollHeight+"px"},a.handleImageErrored=function(t){var e=t.target;e.onerror=null,setTimeout((function(){e.src+="?"+new Date}),1e3)},a.state={newRaceUserImage:{}},a.inputRef={},a.updateTimer={},a}var s,l;return l=e,(s=a).prototype=Object.create(l.prototype),s.prototype.constructor=s,s.__proto__=l,a.prototype.render=function(){var e=this.props.stores,a=e.userStore,s=a.user,o=void 0===s?{}:s,l=this.props.race,i=void 0===l?{}:l,h=["photos"];return i.tag&&i.tag.split(",").forEach((function(t){h.push(t.trim())})),Object(c.h)(t,null,o.id&&Object(c.h)(r.a,{stores:this.props.stores,hashTags:h,postfix:"[🔗 "+i.title+": Images](/app-races/"+i.id+"/userImages)",topic:"race-"+i.id}),Object(c.h)(n.a,{stores:this.props.stores,hashtags:h}))},a}(c.Component))||s);e.a=i}).call(this,a("hosL").Fragment)},ULR1:function(t,e,a){"use strict";(function(t){var s,c=a("hosL"),o=a("Utv1"),l=a("/eY4"),r=(a("OhSV"),a("Y3FI"),a("fh8t"),a("go65"),a("om2D"),a("AEg1")),n=a("gOLw"),i=(a("ZOvn"),Object(l.a)(s=function(e){function a(t){var a;return(a=e.call(this,t)||this).addRaceArticle=function(){return new Promise((function(t,e){var s;return s=a.props.race,Promise.resolve(a.props.stores.raceStore.addArticle({id:(void 0===s?{}:s).id,newArticle:a.state.newRaceArticle})).then((function(){try{return a.setState({newRaceArticle:{}}),t()}catch(t){return e(t)}}),e)}))},a.editRaceArticle=function(t){return new Promise((function(e){var s,c=t.target.dataset,l=c.id,r=c.field,n=t.target.value,i=a.props.race,h=(void 0===i?{}:i).id,d=a.props.stores.raceStore,b=((s={raceArticleId:l})["raceArticle"+o.a.ucfirst(r)]=n,s);return clearTimeout(a.updateTimer[h+"-"+l+"-"+r]),a.updateTimer[h+"-"+l+"-"+r]=setTimeout((function(){return new Promise((function(t){return d.editArticle({id:h,data:b}),t()}))}),1500),a.resizeTextarea(t.target),e()}))},a.removeRaceArticle=function(t){return new Promise((function(e,s){var c;return c=a.props.race,Promise.resolve(a.props.stores.raceStore.removeArticle({id:(void 0===c?{}:c).id,articleId:t.target.parentElement.dataset.id||t.target.dataset.id})).then((function(){try{return e()}catch(t){return s(t)}}),s)}))},a.updateArticleUpload=function(t){var e=a.state.newRaceArticle;e[t.field]=t.value,a.setState({newRaceArticle:e})},a.resizeTextarea=function(t){var e=t;e.target&&(e=t.target),e.style.height=e.scrollHeight+"px"},a.handleImageErrored=function(t){var e=t.target;e.onerror=null,setTimeout((function(){e.src+="?"+new Date}),1e3)},a.state={newRaceArticle:{}},a.inputRef={},a.updateTimer={},a}var s,l;return l=e,(s=a).prototype=Object.create(l.prototype),s.prototype.constructor=s,s.__proto__=l,a.prototype.render=function(){var e=this.props.stores,a=e.userStore,s=a.user,o=void 0===s?{}:s,l=this.props.race,i=void 0===l?{}:l,h=["news"];return i.tag&&i.tag.split(",").forEach((function(t){h.push(t.trim())})),Object(c.h)(t,null,o.id&&Object(c.h)(r.a,{stores:this.props.stores,hashTags:h,postfix:"[🔗 "+i.title+": News](/app-races/"+i.id+"/news)",topic:"race-"+i.id}),Object(c.h)(n.a,{stores:this.props.stores,hashtags:h}))},a}(c.Component))||s);e.a=i}).call(this,a("hosL").Fragment)},hwiY:function(t,e,a){"use strict";(function(t){function s(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,s)}return a}function c(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?s(Object(a),!0).forEach((function(e){o(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):s(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}function o(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}var l,r=a("hosL"),n=a("Utv1"),i=a("/eY4"),h=a("OhSV"),d=(a("Y3FI"),a("fh8t")),b=a.n(d),u=(a("go65"),a("ZOvn")),p=Object(i.a)(l=function(e){function a(t){var a;return(a=e.call(this,t)||this).signupToRace=function(){return new Promise((function(t,e){var s,o,l,r,n;return l=(s=a.props.stores).userStore.user,r=(o=s.raceStore).signup,n=a.props.race,Promise.resolve(o.addContestant({id:(void 0===n?{}:n).id,classId:r.class,newContestant:c({team:l.team,firstname:l.firstname,lastname:l.lastname,sportsClub:l.sportsClub,email:l.email,cellphone:l.cellphone,facebook:l.facebook,instagram:l.instagram},r)})).then((function(){try{return t()}catch(t){return e(t)}}),e)}))},a.updateSignup=function(t){a.props.stores.raceStore.updateObjectKeyValue("signup",t.target.id,t.target.value)},a.editSignup=function(t){var e,s=a.props.race,c=(void 0===s?{}:s).id,o=a.props.stores.raceStore,l=t.target.id,r=t.target.value,i=t.target.dataset,h=i.classid,d=i.contestantid;o.updateObjectKeyValue("signup",l,r);var b=((e={raceClassId:h,contestantId:d})["raceClassContestant"+n.a.ucfirst(l)]=r,e);clearTimeout(a.updateTimer[l]),a.updateTimer[l]=setTimeout((function(){return new Promise((function(t,e){function a(){return t()}return o.editClass({id:c,data:b}),o.localUpdateSignup(l,r),"team"===l?Promise.resolve(o.loadTeams(r,!0)).then(function(){try{return a.call(this)}catch(t){return e(t)}}.bind(this),e):a.call(this)}))}),500)},a.state={},a.inputRef={},a.updateTimer={},a}var s,o;return o=e,(s=a).prototype=Object.create(o.prototype),s.prototype.constructor=s,s.__proto__=o,a.prototype.render=function(){var e=this.props.stores,a=e.userStore,s=e.raceStore,c=a.user,o=void 0===c?{}:c,l=a.teams,i=void 0===l?[]:l,d=o.language,p=void 0===d?"en":d,m=this.props.race,f=void 0===m?{}:m,O=s.signup,j={},g=[];O.class&&(j=s.getRaceClassById(O.class)),O.team&&(g=a.findDogsByTeam(parseInt(O.team,10)));var v=a.vaccineLogStatuses,w=new Date;return Object(r.h)(t,null,Object(r.h)("div",{class:"row"},Object(r.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-0 mb-2"},Object(r.h)("h2",{class:"mb-0"},Object(r.h)(h.c,{id:"races.signup"},"Påmelding"))),Object(r.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-3 mb-2"},w>=new Date(f.signupStartDate)&&w<=new Date(f.signupEndDate)?Object(r.h)(t,null,Object(r.h)("span",{class:"font-weight-lighter"},Object(r.h)(h.c,{id:"races.signed-in-as"},"Logget inn som"),":")," ",o.email,Object(r.h)("br",null),Object(r.h)("br",null),O.id?Object(r.h)(t,null,Object(r.h)("div",{class:"font-weight-bold mb-4"},Object(r.h)("i",{class:"fas fa-check text-success"})," ",Object(r.h)(h.c,{id:"races.signed-up"},"Din bruker er påmeldt!"),Object(r.h)("br",null)),!f.liveRace&&f.signuppayment&&Object(r.h)(t,null,Object(r.h)("div",{class:"form-group row my-2"},Object(r.h)("label",{for:"cellphone",class:"col-2 col-form-label text-right font-weight-lighter"},Object(r.h)(h.c,{id:"races.signup"},"Påmelding")),Object(r.h)("div",{class:"col-10"},O.paidSignupfee?Object(r.h)("div",{class:"py-2"},Object(r.h)(h.c,{id:"races.paid"},"Betalt"),": ",n.a.formatDate(O.paidSignupfee),Object(r.h)("i",{class:"fas fa-check text-success ml-3"})):Object(r.h)(t,null,Object(r.h)("div",{class:"alert alert-danger mb-1",role:"alert"},Object(r.h)("h5",null,Object(r.h)("span",{class:"font-weight-lighter"},Object(r.h)(h.c,{id:"races.payment-info"},"Betaling påmelding"),":"),Object(r.h)("br",null),Object(r.h)(b.a,{markdown:u.a.replaceImages(f.signuppayment,f.images,p),markdownOpts:u.a.getMarkdownOptions()}),j.signupfee||f.signupfee," NOK")))))),Object(r.h)("div",{class:"clearfix mt-2"},Object(r.h)("span",{class:"font-weight-lighter float-right"},Object(r.h)(h.c,{id:"races.click-to-change"},"Click the fields to edit."))),Object(r.h)("div",{class:"form-group row my-2"},Object(r.h)("label",{for:"cellphone",class:"col-3 col-form-label text-right font-weight-lighter"},Object(r.h)(h.c,{id:"races.cellphone"},"Mobil")),Object(r.h)("div",{class:"col-9"},Object(r.h)(h.b,null,Object(r.h)("input",{type:"text",class:"form-control",id:"cellphone","data-classid":O.class,"data-contestantid":O.id,onInput:this.editSignup,value:O.cellphone,placeholder:Object(r.h)(h.c,{id:"races.cellphone-help"},"Hva er mobilnummer ditt?")})))),O.name&&Object(r.h)("div",{class:"form-group row my-2"},Object(r.h)("label",{for:"name",class:"col-3 col-form-label text-right font-weight-lighter"},Object(r.h)(h.c,{id:"races.name"},"Navn")),Object(r.h)("div",{class:"col-9"},O.name)),Object(r.h)("div",{class:"form-group row my-2"},Object(r.h)("label",{for:"firstname",class:"col-3 col-form-label text-right font-weight-lighter"},Object(r.h)(h.c,{id:"races.firstname"},"Fornavn")),Object(r.h)("div",{class:"col-9"},Object(r.h)(h.b,null,Object(r.h)("input",{type:"text",class:"form-control",id:"firstname","data-classid":O.class,"data-contestantid":O.id,onInput:this.editSignup,value:O.firstname,placeholder:Object(r.h)(h.c,{id:"races.firstname-help"},"Hva er fornavnet ditt?")})))),Object(r.h)("div",{class:"form-group row my-2"},Object(r.h)("label",{for:"lastname",class:"col-3 col-form-label text-right font-weight-lighter"},Object(r.h)(h.c,{id:"races.lastname"},"Etternavn")),Object(r.h)("div",{class:"col-9"},Object(r.h)(h.b,null,Object(r.h)("input",{type:"text",class:"form-control",id:"lastname","data-classid":O.class,"data-contestantid":O.id,onInput:this.editSignup,value:O.lastname,placeholder:Object(r.h)(h.c,{id:"races.lastname-help"},"Hva er etternavnet ditt?")})))),Object(r.h)("div",{class:"form-group row my-2"},Object(r.h)("label",{for:"sportsClub",class:"col-3 col-form-label text-right font-weight-lighter"},Object(r.h)(h.c,{id:"races.sportsclub"},"Klubb")),Object(r.h)("div",{class:"col-9"},Object(r.h)(h.b,null,Object(r.h)("input",{type:"text",class:"form-control",id:"sportsClub","data-classid":O.class,"data-contestantid":O.id,onInput:this.editSignup,value:O.sportsClub,placeholder:Object(r.h)(h.c,{id:"races.sportsClub-help"},"Hvilken klubb tilhører du?")})))),Object(r.h)("div",{class:"form-group row my-2"},Object(r.h)("label",{for:"facebook",class:"col-3 col-form-label text-right font-weight-lighter"},Object(r.h)(h.c,{id:"races.facebook"},"Facebook")),Object(r.h)("div",{class:"col-9"},Object(r.h)(h.b,null,Object(r.h)("input",{type:"text",class:"form-control",id:"facebook","data-classid":O.class,"data-contestantid":O.id,onInput:this.editSignup,value:O.facebook,placeholder:Object(r.h)(h.c,{id:"races.facebook-help"},"Hva er Facebook brukernavnet ditt?")})))),Object(r.h)("div",{class:"form-group row my-2"},Object(r.h)("label",{for:"instagram",class:"col-3 col-form-label text-right font-weight-lighter"},Object(r.h)(h.c,{id:"races.instagram"},"Instagram")),Object(r.h)("div",{class:"col-9"},Object(r.h)(h.b,null,Object(r.h)("input",{type:"text",class:"form-control",id:"instagram","data-classid":O.class,"data-contestantid":O.id,onInput:this.editSignup,value:O.instagram,placeholder:Object(r.h)(h.c,{id:"races.instagram-help"},"Hva er Instagram brukernavnet ditt?")})))),Object(r.h)("div",{class:"form-group row my-2"},Object(r.h)("label",{for:"team",class:"col-3 col-form-label text-right font-weight-lighter"},Object(r.h)(h.c,{id:"races.team"},"Team")),Object(r.h)("div",{class:"col-9"},Object(r.h)("select",{class:"form-control",id:"team","aria-describedby":"teamHelp","data-classid":O.class,"data-contestantid":O.id,onInput:this.editSignup,value:O.team},Object(r.h)("option",{value:""},"-- ",Object(r.h)(h.c,{id:"races.choose-team"},"Velg team")," --"),i.map((function(t){return Object(r.h)("option",{value:t.id},t.name)}))))),Object(r.h)("div",{class:"form-group row my-2"},Object(r.h)("label",{for:"team",class:"col-3 col-form-label text-right font-weight-lighter"},Object(r.h)(h.c,{id:"races.class"},"Klasse")),Object(r.h)("div",{class:"col-9"},Object(r.h)("select",{class:"form-control",id:"class","aria-describedby":"classHelp","data-classid":O.class,"data-contestantid":O.id,onInput:this.editSignup,value:O.class,disabled:!0},Object(r.h)("option",{value:""},"-- ",Object(r.h)(h.c,{id:"races.choose-class"},"Velg klasse")," --"),f.classes&&f.classes.sort((function(t,e){return t.distance-e.distance})).map((function(e){return Object(r.h)(t,null,Object(r.h)("option",{value:e.id},e.title,!f.liveRace&&Object(r.h)(t,null,"- ",e.distance," km - Påmelding: ",e.signupfee||f.signupfee," NOK")))}))))),f.rules&&Object(r.h)("div",{class:"form-group row my-2"},Object(r.h)("label",{for:"team",class:"col-3 col-form-label text-right font-weight-lighter"}," "),Object(r.h)("div",{class:"col-9 pl-5"},Object(r.h)("input",{type:"checkbox",class:"form-check-input",id:"termsAndAgreement","data-classid":O.class,"data-contestantid":O.id,onInput:this.editSignup,checked:O.termsAndAgreement,value:1}),Object(r.h)("label",{class:"form-check-label",for:"termsAndAgreement"},Object(r.h)(h.c,{id:"races.agreement-accept"},"Jeg har lest og godtar reglene for løpet.")))),f.declaration&&Object(r.h)("div",{class:"form-group row my-4"},Object(r.h)("div",{class:"col-12 text-center border-top"},Object(r.h)("h5",null,Object(r.h)(h.c,{id:"races.declaration"},"Declaration"))),Object(r.h)("details",{class:"col-12"},O.declaration?Object(r.h)(t,null,Object(r.h)("summary",null,Object(r.h)(h.c,{id:"races.see-declaration"},"See declaration")," (",Object(r.h)("span",{class:"text-muted font-weight-light"},Object(r.h)(h.c,{id:"races.declaration-signed"},"Declaration signed"),": ",n.a.isoDate(O.declarationDate)),")")):Object(r.h)(t,null,Object(r.h)("summary",null,Object(r.h)("h5",{class:"btn btn-primary"},Object(r.h)(h.c,{id:"races.see-declaration"},"See declaration")))),Object(r.h)(b.a,{markdown:u.a.replaceImages(f.declaration,f.images,p),markdownOpts:u.a.getMarkdownOptions()}),O.declaration?Object(r.h)(t,null,Object(r.h)("i",null,Object(r.h)(h.c,{id:"races.declaration-signed"},"Declaration signed"),": ",n.a.isoDate(O.declarationDate))):Object(r.h)(t,null,Object(r.h)("div",{class:"pl-5"},Object(r.h)("input",{type:"checkbox",class:"form-check-input",id:"declaration","data-classid":O.class,"data-contestantid":O.id,onInput:this.editSignup,checked:O.declaration,value:1}),Object(r.h)("label",{class:"form-check-label",for:"declaration"},Object(r.h)(h.c,{id:"races.declaration-accept"},"I hereby sign the declaration for the race!")))))),Object(r.h)("div",{class:"form-group row my-4"},Object(r.h)("div",{class:"col-12 text-center border-top"},Object(r.h)("h5",null,Object(r.h)(h.c,{id:"races.chiplist"},"Chiplist"))),Object(r.h)("details",{class:"col-12"},Object(r.h)("summary",null,Object(r.h)(h.c,{id:"races.see-dogs"},"See dogs & chiplist")),Object(r.h)("div",{class:"pt-3"},g&&g.length>0?Object(r.h)(t,null,g.map((function(e){return Object(r.h)(t,null,Object(r.h)("div",{class:"d-flex mb-0 position-relative mb-3"},Object(r.h)("div",{class:"text-center border rounded-circle imageRounded imageRoundedMedium text-muted pt-2",style:e.image?'background-image: url("'+e.image.s3SmallLink+'"); background-size: cover;':""},!e.image&&Object(r.h)("span",{class:"font-weight-lighter",style:"font-size: 35px;"},n.a.ucfirst(e.name,!0))),Object(r.h)("div",{class:"flex-grow-1 pl-3 pr-2"},Object(r.h)("span",{class:"float-right"},e.birth&&Object(r.h)("span",{class:"mr-2"},n.a.age(e.birth,e.deceased)),"female"===e.gender?Object(r.h)("i",{class:"fas fa-venus"}):Object(r.h)("i",{class:"fas fa-mars"})),Object(r.h)("a",{href:"/dogs/edit/"+e.id},Object(r.h)("h6",{class:"mb-1",style:"line-height: 1.0em;"},e.shortname||e.name," ",e.shortname&&""!==e.shortname&&Object(r.h)(t,null," - ",Object(r.h)("span",{class:"font-weight-lighter"},e.name)))),e.chipId?Object(r.h)(t,null,Object(r.h)("i",{class:"fas fa-microchip text-muted"})," ",e.chipId):Object(r.h)(t,null,Object(r.h)("div",{class:"alert alert-danger",role:"alert"},Object(r.h)(h.c,{id:"races.missing-chipid"},"Missing chid id"))),Object(r.h)("div",null,v&&v.filter((function(t){return t.chipId===e.chipId})).map((function(e){return Object(r.h)("span",{class:"badge badge-"+(e.inKarens?"warning":"success")+" mr-2 mb-1"},e.vaccineAgens.name,Object(r.h)("span",{class:"font-weight-lighter ml-2"},Object(r.h)("i",{class:"fas fa-calendar-check"})," ",n.a.isoDate(e.vaccineAgens.durationEnd,!1,!1,!0),e.inKarens&&Object(r.h)(t,null,Object(r.h)("br",null),"(karens: ",n.a.format(e.karensDaysLeft,0)," days left)")))}))))))}))):Object(r.h)(t,null,Object(r.h)("div",{class:"text-center text-muted"},Object(r.h)("div",{class:"display-1"},Object(r.h)("i",{class:"fas fa-dog"})),Object(r.h)("h3",{class:"font-weight-lighter"},Object(r.h)(h.c,{id:"race.add-dogs"},"Add a team to your race signup to see the dogs.")))))))):Object(r.h)(t,null,f.liveRace?Object(r.h)(t,null,"Signup is done at the race normal web pages."):Object(r.h)(t,null,Object(r.h)("div",{class:"form-group"},Object(r.h)("label",{for:"cellphone"},Object(r.h)(h.c,{id:"races.cellphone"},"Mobil")),Object(r.h)("input",{type:"text",class:"form-control",id:"cellphone","aria-describedby":"cellphoneHelp",placeholder:o.cellphone,onInput:this.updateSignup,value:O.cellphone}),Object(r.h)("small",{id:"cellphoneHelp",class:"form-text text-muted"},Object(r.h)(h.c,{id:"races.cellphone-help"},"'Hva er mobilnummer ditt?'"))),O.name&&Object(r.h)("div",{class:"row"},Object(r.h)("div",{class:"col"},Object(r.h)("div",{class:"form-group"},Object(r.h)("label",{for:"name"},Object(r.h)(h.c,{id:"races.name"},"Name")),Object(r.h)("input",{type:"text",class:"form-control",id:"name","aria-describedby":"nameHelp",placeholder:o.name,onInput:this.updateSignup,value:O.name}),Object(r.h)("small",{id:"nameHelp",class:"form-text text-muted"},Object(r.h)(h.c,{id:"races.name-help"},"Hva er navnet ditt?"))))),Object(r.h)("div",{class:"row"},Object(r.h)("div",{class:"col"},Object(r.h)("div",{class:"form-group"},Object(r.h)("label",{for:"firstname"},Object(r.h)(h.c,{id:"races.firstname"},"Fornavn")),Object(r.h)("input",{type:"text",class:"form-control",id:"firstname","aria-describedby":"firstnameHelp",placeholder:o.firstname,onInput:this.updateSignup,value:O.firstname}),Object(r.h)("small",{id:"firstnameHelp",class:"form-text text-muted"},Object(r.h)(h.c,{id:"races.firstname-help"},"Hva er fornavnet ditt?")))),Object(r.h)("div",{class:"col"},Object(r.h)("div",{class:"form-group"},Object(r.h)("label",{for:"lastname"},Object(r.h)(h.c,{id:"races.lastname"},"Etternavn")),Object(r.h)("input",{type:"text",class:"form-control",id:"lastname","aria-describedby":"lastnameHelp",placeholder:o.lastname,onInput:this.updateSignup,value:O.lastname}),Object(r.h)("small",{id:"lastnameHelp",class:"form-text text-muted"},Object(r.h)(h.c,{id:"races.lastname-help"},"Hva er etternavnet ditt?"))))),Object(r.h)("div",{class:"form-group"},Object(r.h)("label",{for:"sportsClub"},Object(r.h)(h.c,{id:"races.sportsclub"},"Klubb")),Object(r.h)("input",{type:"text",class:"form-control",id:"sportsClub","aria-describedby":"sportsClubHelp",placeholder:o.sportsClub,onInput:this.updateSignup,value:O.sportsClub}),Object(r.h)("small",{id:"sportsClubHelp",class:"form-text text-muted"},Object(r.h)(h.c,{id:"races.sportsClub-help"},"Hvilken klubb tilhører du?"))),Object(r.h)("div",{class:"row"},Object(r.h)("div",{class:"col"},Object(r.h)("div",{class:"form-group"},Object(r.h)("label",{for:"facebook"},Object(r.h)(h.c,{id:"races.facebook"},"Facebook")),Object(r.h)("input",{type:"text",class:"form-control",id:"facebook","aria-describedby":"facebookHelp",placeholder:o.facebook,onInput:this.updateSignup,value:O.facebook}),Object(r.h)("small",{id:"facebookHelp",class:"form-text text-muted"},Object(r.h)(h.c,{id:"races.facebook-help"},"Hva er Facebook brukernavnet ditt?")))),Object(r.h)("div",{class:"col"},Object(r.h)("div",{class:"form-group"},Object(r.h)("label",{for:"instagram"},Object(r.h)(h.c,{id:"races.instagram"},"Instagram")),Object(r.h)("input",{type:"text",class:"form-control",id:"instagram","aria-describedby":"instagramHelp",placeholder:o.instagram,onInput:this.updateSignup,value:O.instagram}),Object(r.h)("small",{id:"instagramHelp",class:"form-text text-muted"},Object(r.h)(h.c,{id:"races.instagram-help"},"Hva er Instagram brukernavnet ditt?"))))),Object(r.h)("div",{class:"form-group"},Object(r.h)("label",{for:"team"},Object(r.h)(h.c,{id:"races.team"},"Team")),Object(r.h)("select",{class:"form-control",id:"team","aria-describedby":"teamHelp",onInput:this.updateSignup,value:O.team},Object(r.h)("option",{value:""},"-- ",Object(r.h)(h.c,{id:"races.choose-team"},"Velg team")," --"),i.map((function(t){return Object(r.h)("option",{value:t.id},t.name)}))),Object(r.h)("small",{id:"teamHelp",class:"form-text text-muted"},Object(r.h)(h.c,{id:"races.choose-team-help"},"Velg fra dine team"))),Object(r.h)("div",{class:"form-group"},Object(r.h)("label",{for:"class"},Object(r.h)(h.c,{id:"races.class"},"Klasse")),Object(r.h)("select",{class:"form-control",id:"class","aria-describedby":"classHelp",onInput:this.updateSignup,value:O.class},Object(r.h)("option",{value:""},"-- ",Object(r.h)(h.c,{id:"races.choose-class"},"Velg klasse")," --"),f.classes&&f.classes.map((function(e){return Object(r.h)(t,null,Object(r.h)("option",{value:e.id},e.title," - ",e.distance," km - Påmelding: ",e.signupfee||f.signupfee," NOK"))}))),Object(r.h)("small",{id:"classHelp",class:"form-text text-muted"},Object(r.h)(h.c,{id:"races.choose-class-help"},"Velg ønsket klasse."))),Object(r.h)("div",{class:"form-group form-check"},Object(r.h)("input",{type:"checkbox",class:"form-check-input",id:"termsAndAgreement",onInput:this.updateSignup,checked:O.termsAndAgreement,value:!0}),Object(r.h)("label",{class:"form-check-label",for:"termsAndAgreement"},Object(r.h)(h.c,{id:"races.agreement-accept"},"Jeg har lest og godtar reglene for løpet."))),Object(r.h)("button",{type:"button",class:"btn btn-primary",onClick:this.signupToRace},Object(r.h)(h.c,{id:"races.do-signup"},"Meld meg på"))))):Object(r.h)(t,null,w<new Date(f.signupStartDate)?Object(r.h)(t,null,Object(r.h)("h5",{class:"mt-4"},Object(r.h)("i",{class:"fas fa-exclamation-circle"})," ",Object(r.h)(h.c,{id:"races.signup-not-open-yet"},"Påmeldingen har ikke åpnet ennå!")),Object(r.h)("p",{class:"mt-4"},Object(r.h)(h.c,{id:"races.signup-opening"},"Påmeldingen åpner"),":",Object(r.h)("br",null),Object(r.h)("span",{class:"display-4"},n.a.formatDate(f.signupStartDate,{locale:"no-NB",hour12:!1,hour:"2-digit",minute:"2-digit"})))):Object(r.h)(t,null,Object(r.h)("h5",{class:"mt-4 mb-4"},Object(r.h)("i",{class:"fas fa-exclamation-circle"})," ",Object(r.h)(h.c,{id:"races.signup-closed"},"Påmeldingen er stengt!")))))))},a}(r.Component))||l;e.a=p}).call(this,a("hosL").Fragment)},n7ns:function(t,e,a){"use strict";(function(t){function s(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,s)}return a}function c(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?s(Object(a),!0).forEach((function(e){o(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):s(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}function o(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}var l,r=a("hosL"),n=a("Utv1"),i=a("/eY4"),h=a("OhSV"),d=(a("Y3FI"),a("fh8t")),b=a.n(d),u=a("go65"),p=a("ZOvn"),m=Object(i.a)(l=function(e){function a(t){var a;return(a=e.call(this,t)||this).toggleDisplayDetails=function(t){var e=t.target.closest("tr").dataset.id,s=a.props.stores.appState;s.editUserDetails[e]||s.toggleDisplayDetails(e)},a.adminToggleEditUser=function(t){t.stopPropagation();var e=t.target.closest("tr").dataset.id;a.props.stores.appState.toggleEditUserDetails(e)},a.toggleAdminSendMessage=function(t){var e=t.target.closest("button").dataset.class,s=a.state.showAdminSendMessage;s[e]=!s[e],a.setState({showAdminSendMessage:s})},a.toggleAdminImport=function(t){var e=t.target.closest("button").dataset.class,s=a.state.showAdminImport;s[e]=!s[e],a.setState({showAdminImport:s})},a.adminSignupEdit=function(t){var e,s=a.props.race,c=(void 0===s?{}:s).id,o=a.props.stores.raceStore,l=t.target.id,r=t.target.value,i=t.target.dataset,h=((e={raceClassId:i.classid,contestantId:i.contestantid})["raceClassContestant"+n.a.ucfirst(l)]=r,e);clearTimeout(a.updateTimer[l]),a.updateTimer[l]=setTimeout((function(){return new Promise((function(t){return o.editClass({id:c,data:h}),t()}))}),500)},a.sendEmail=function(t){return new Promise((function(e,s){var c,o,l,r,n;return o=(void 0===(c=a.props.race)?{}:c).id,l=t.target.closest("button").dataset.to,r=t.target.closest("button").dataset.raceclassid,n=a.state.message,Promise.resolve(a.props.stores.appState.sendEmail({to:l,subject:n.subject,body:n.body,raceId:o,raceClassId:r})).then((function(t){try{return a.setState({emailResponse:t}),e()}catch(t){return s(t)}}),s)}))},a.resetEmail=function(){a.setState({emailResponse:null,message:{subject:"",body:""}})},a.signupToRace=function(t){return new Promise((function(e,s){var o,l;return o=t.signup,l=a.props.race,Promise.resolve(a.props.stores.raceStore.addContestant({id:(void 0===l?{}:l).id,classId:o.class,newContestant:c({},o)})).then((function(){try{return e()}catch(t){return s(t)}}),s)}))},a.parseInput=function(t,e){return new Promise((function(s){return clearTimeout(a.parseInputTimer),a.parseInputTimer=setTimeout((function(){return a.doParseInput(t,e)}),500),s()}))},a.doParseInput=function(t,e){return new Promise((function(s){var c=String(t).split("\n"),o=[],l=[],r=c[0];o=r.match(/\t/)?r.split("\t"):r.match(/;/)?r.split(";"):r.split(",");for(var n=function(t){var e=c[t],a=void 0;a=e.match(/\t/)?e.split("\t"):e.match(/;/)?e.split(";"):e.split(",");var s={};a.forEach((function(t,e){var a=t;"email"===o[e]&&(a=t.toLowerCase()),s[o[e]]=a})),l.push(s)},i=1,h=c.length;i<h;i+=1)n(i);var d=a.props.race;return a.props.stores.raceStore.addMultipleContestants({id:(void 0===d?{}:d).id,classId:e,contestants:l}),s(!0)}))},a.state={displayDetails:{},editUserDetails:{},showAdminSendMessage:{},showAdminImport:{},message:{}},a.inputRef={},a.updateTimer={},a.parseInputTimer=null,a}var s,o;return o=e,(s=a).prototype=Object.create(o.prototype),s.prototype.constructor=s,s.__proto__=o,a.prototype.render=function(){var e=this,a=this.state,s=a.showAdminSendMessage,c=void 0===s?{}:s,o=a.showAdminImport,l=void 0===o?{}:o,i=a.message,d=void 0===i?{}:i,m=a.emailResponse,f=this.props.stores,O=f.userStore,j=f.raceStore,g=f.appState,v=O.user,w=O.isAdmin,y=(void 0===v?{}:v).language,x=void 0===y?"en":y,k=g.displayDetails,S=g.editUserDetails,T=this.props.race,D=void 0===T?{}:T;return Object(r.h)(t,null,Object(r.h)("div",{class:"row"},Object(r.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-0 mb-2"},Object(r.h)("h2",{class:"mb-0"},Object(r.h)(h.c,{id:"races.mushers"},"Deltakere"))),Object(r.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-3 mb-2"},D.classes&&D.classes.sort((function(t,e){return t.distance-e.distance})).map((function(a){return Object(r.h)(t,null,w&&Object(r.h)("span",{class:"float-right"},"Total app users: ",a.contestants&&a.contestants.filter((function(t){return t.user})).length),Object(r.h)("h5",null,a.title," ",a.startDate&&Object(r.h)(t,null,": ",Object(r.h)("span",{class:"font-weight-lighter"},n.a.formatDate(a.startDate+" "+(a.startTime||"00:00:00"),{locale:x,hour12:!1,hour:"2-digit",minute:"2-digit"})," - ",n.a.formatDate(a.endDate+" "+(a.endTime||"00:00:00"),{locale:x,hour12:!1,hour:"2-digit",minute:"2-digit"})))),Object(r.h)("div",{class:"table-responsive"},Object(r.h)("table",{class:"table table-sm table-striped"},Object(r.h)("thead",null,Object(r.h)("tr",null,Object(r.h)("th",{scope:"col"},"#"),Object(r.h)("th",{scope:"col",style:"min-width: 90%;"},Object(r.h)(h.c,{id:"races.name"},"Navn")))),Object(r.h)("tbody",null,a.contestants&&a.contestants.map((function(s,c){var o=j.getTeamById(s.team);return Object(r.h)(t,null,Object(r.h)("tr",{onClick:e.toggleDisplayDetails,"data-id":s.id},Object(r.h)("th",{scope:"row"},c+1),Object(r.h)("td",{class:k[s.id]?"font-weight-bold":"",style:k[s.id]?"":"line-height: 0.8em;"},w&&Object(r.h)(t,null,Object(r.h)("button",{class:"btn btn-primary btn-sm float-right",onClick:e.adminToggleEditUser},Object(r.h)("i",{class:"fas fa-user-edit"})),s.paidSignupfee&&Object(r.h)(t,null,Object(r.h)("span",{class:"float-right"},Object(r.h)("i",{class:"fas fa-check text-success"}),Object(r.h)("br",null))),Object(r.h)("small",{class:"float-right"},s.raceStatus&&Object(r.h)(t,null,Object(r.h)("span",{class:"text-muted"},"raceStatus:"),Object(r.h)("br",null)," ",s.raceStatus,Object(r.h)("br",null)),s.raceComment&&Object(r.h)(t,null,Object(r.h)("span",{class:"text-muted"},"raceComment:"),Object(r.h)("br",null)," ",s.raceComment,Object(r.h)("br",null)),s.gpxResultsApproved&&Object(r.h)(t,null,Object(r.h)("span",{class:"text-muted"},"gpxResultsApproved:"),Object(r.h)("br",null)," ",s.gpxResultsApproved,Object(r.h)("br",null)))),w&&D.liveRace>0&&Object(r.h)(t,null,Object(r.h)("span",{class:"float-right text-success mr-2",style:"font-size: 1.2em;"},s.bib&&Object(r.h)(t,null,Object(r.h)("i",{class:"fas fa-tshirt ml-2"})," ",s.bib),s.startTime&&Object(r.h)(t,null,Object(r.h)("i",{class:"fas fa-clock ml-2"})," ",n.a.isoDate(s.startTime)),s.user&&Object(r.h)("i",{class:"fas fa-mobile-alt ml-2"}),s.declaration&&Object(r.h)("i",{class:"fas fa-handshake ml-2",alt:n.a.isoDate(s.declarationDate)}))),k[s.id]?Object(r.h)(t,null,s.firstname?Object(r.h)(t,null,s.firstname," ",s.lastname,Object(r.h)("br",null)):Object(r.h)(t,null,s.name),Object(r.h)("span",{class:"text-muted"},o.name),Object(r.h)("br",null),Object(r.h)("small",{class:"text-muted"},s.sportsClub),Object(r.h)("br",null),s.facebook&&Object(r.h)("a",{class:"mr-2",href:p.a.asFacebookLink(s.facebook),native:!0,target:"_blank",rel:"noreferrer"},Object(r.h)("i",{class:"fab fa-facebook"})),s.instagram&&Object(r.h)("a",{class:"mr-2",href:p.a.asInstagramLink(s.instagram),native:!0,target:"_blank",rel:"noreferrer"},Object(r.h)("i",{class:"fab fa-instagram"})),Object(r.h)("br",null),s.price1&&Object(r.h)("div",{class:"font-weight-lighter"},Object(r.h)("i",{class:"fas fa-trophy text-warning"})," ",s.price1,s.priceSent&&Object(r.h)(t,null,Object(r.h)("i",{class:"fas fa-check text-success"}))),s.price2&&Object(r.h)("div",{class:"font-weight-lighter"},Object(r.h)("i",{class:"fas fa-trophy text-warning"})," ",s.price2),s.price3&&Object(r.h)("div",{class:"font-weight-lighter"},Object(r.h)("i",{class:"fas fa-trophy text-warning"})," ",s.price3),!1):Object(r.h)(t,null,s.price1&&Object(r.h)("span",{class:"float-right text-warning",style:"font-size: 1.2em;"},Object(r.h)("i",{class:"fas fa-trophy"}),s.priceSent&&Object(r.h)(t,null,Object(r.h)("i",{class:"fas fa-check text-success"}))),Object(r.h)("nobr",null,s.firstname?Object(r.h)(t,null,s.firstname," ",s.lastname,Object(r.h)("br",null)):Object(r.h)(t,null,s.name),Object(r.h)("small",{class:"text-muted"},s.sportsClub),Object(r.h)("br",null))),w&&S[s.id]&&Object(r.h)(t,null,Object(r.h)("h5",null,"Admin edit:"),Object(r.h)("div",{class:"form-group row my-0"},Object(r.h)("label",{class:"col-4 col-form-label text-right"},"Email"),Object(r.h)("div",{class:"col-8"},s.email)),Object(r.h)("div",{class:"form-group row my-0"},Object(r.h)("label",{for:"bib",class:"col-4 col-form-label text-right"},"bib"),Object(r.h)("div",{class:"col-8"},Object(r.h)("input",{type:"number",class:"form-control",id:"bib","data-classid":a.id,"data-contestantid":s.id,onInput:e.adminSignupEdit,value:s.bib}))),Object(r.h)("div",{class:"form-group row my-0"},Object(r.h)("label",{for:"startTime",class:"col-4 col-form-label text-right"},"startTime"),Object(r.h)("div",{class:"col-8"},Object(r.h)("input",{type:"date",class:"form-control",id:"startTime","data-classid":a.id,"data-contestantid":s.id,onInput:e.adminSignupEdit,value:s.startTime?n.a.isoDate(s.startTime,!1,!1,!1):null}))),Object(r.h)("div",{class:"form-group row my-0"},Object(r.h)("label",{for:"team",class:"col-4 col-form-label text-right"},"team"),Object(r.h)("div",{class:"col-8"},Object(r.h)("input",{type:"number",class:"form-control",id:"team","data-classid":a.id,"data-contestantid":s.id,onInput:e.adminSignupEdit,value:s.team}))),Object(r.h)("div",{class:"form-group row my-0"},Object(r.h)("label",{for:"user",class:"col-4 col-form-label text-right"},"user"),Object(r.h)("div",{class:"col-8"},Object(r.h)("input",{type:"number",class:"form-control",id:"user","data-classid":a.id,"data-contestantid":s.id,onInput:e.adminSignupEdit,value:s.user}))),Object(r.h)("div",{class:"form-group row my-0"},Object(r.h)("label",{for:"team",class:"col-4 col-form-label text-right"},"Race status"),Object(r.h)("div",{class:"col-8"},Object(r.h)("select",{class:"form-control",id:"raceStatus","data-classid":a.id,"data-contestantid":s.id,onInput:e.adminSignupEdit,value:s.raceStatus},Object(r.h)("option",{value:""},"-- Choose race status --"),Object(r.h)("option",{value:"OK"},"OK - Everything ok"),Object(r.h)("option",{value:"DNS"},"DNS - Did Not Start"),Object(r.h)("option",{value:"DNF"},"DNF - Did Not Finish"),Object(r.h)("option",{value:"DNQ"},"DNQ - Did not qualify"),Object(r.h)("option",{value:"DQ"},"DQ - Disqualified")))),Object(r.h)("div",{class:"form-group row my-0"},Object(r.h)("label",{for:"raceComment",class:"col-4 col-form-label text-right"},"Race comment"),Object(r.h)("div",{class:"col-8"},Object(r.h)("input",{type:"text",class:"form-control",id:"raceComment","data-classid":a.id,"data-contestantid":s.id,onInput:e.adminSignupEdit,value:s.raceComment}))),Object(r.h)("div",{class:"form-group row my-0"},Object(r.h)("label",{for:"gpxResultsApproved",class:"col-4 col-form-label text-right"},"GPX Results approved (date)"),Object(r.h)("div",{class:"col-8"},Object(r.h)("input",{type:"date",class:"form-control",id:"gpxResultsApproved","data-classid":a.id,"data-contestantid":s.id,onInput:e.adminSignupEdit,value:s.gpxResultsApproved?n.a.isoDate(s.gpxResultsApproved,!1,!1,!0):null}))),Object(r.h)("div",{class:"form-group row my-0"},Object(r.h)("label",{for:"paidSignupfee",class:"col-4 col-form-label text-right"},"paidSignupfee (date)"),Object(r.h)("div",{class:"col-8"},Object(r.h)("input",{type:"date",class:"form-control",id:"paidSignupfee","data-classid":a.id,"data-contestantid":s.id,onInput:e.adminSignupEdit,value:s.paidSignupfee?n.a.isoDate(s.paidSignupfee,!1,!1,!0):null}))),Object(r.h)("div",{class:"form-group row my-0"},Object(r.h)("label",{for:"startOrder",class:"col-4 col-form-label text-right"},"startOrder"),Object(r.h)("div",{class:"col-8"},Object(r.h)("input",{type:"number",class:"form-control",id:"startOrder","data-classid":a.id,"data-contestantid":s.id,onInput:e.adminSignupEdit,value:s.startOrder}))),Object(r.h)("div",{class:"form-group row my-0"},Object(r.h)("label",{for:"cellphone",class:"col-4 col-form-label text-right"},"Mobil"),Object(r.h)("div",{class:"col-8"},Object(r.h)("input",{type:"text",class:"form-control",id:"cellphone","data-classid":a.id,"data-contestantid":s.id,onInput:e.adminSignupEdit,value:s.cellphone}))),Object(r.h)("div",{class:"form-group row my-0"},Object(r.h)("label",{for:"name",class:"col-4 col-form-label text-right"},"Navn"),Object(r.h)("div",{class:"col-8"},Object(r.h)("input",{type:"text",class:"form-control",id:"name","data-classid":a.id,"data-contestantid":s.id,onInput:e.adminSignupEdit,value:s.name}))),Object(r.h)("div",{class:"form-group row my-0"},Object(r.h)("label",{for:"firstname",class:"col-4 col-form-label text-right"},"Fornavn"),Object(r.h)("div",{class:"col-8"},Object(r.h)("input",{type:"text",class:"form-control",id:"firstname","data-classid":a.id,"data-contestantid":s.id,onInput:e.adminSignupEdit,value:s.firstname}))),Object(r.h)("div",{class:"form-group row my-0"},Object(r.h)("label",{for:"lastname",class:"col-4 col-form-label text-right"},"Etternavn"),Object(r.h)("div",{class:"col-8"},Object(r.h)("input",{type:"text",class:"form-control",id:"lastname","data-classid":a.id,"data-contestantid":s.id,onInput:e.adminSignupEdit,value:s.lastname}))),Object(r.h)("div",{class:"form-group row my-0"},Object(r.h)("label",{for:"address",class:"col-4 col-form-label text-right"},"Adresse"),Object(r.h)("div",{class:"col-8"},Object(r.h)("input",{type:"text",class:"form-control",id:"address","data-classid":a.id,"data-contestantid":s.id,onInput:e.adminSignupEdit,value:s.address}))),Object(r.h)("div",{class:"form-group row my-0"},Object(r.h)("label",{for:"postalcode",class:"col-4 col-form-label text-right"},"Postalcode"),Object(r.h)("div",{class:"col-8"},Object(r.h)("input",{type:"text",class:"form-control",id:"postalcode","data-classid":a.id,"data-contestantid":s.id,onInput:e.adminSignupEdit,value:s.postalcode}))),Object(r.h)("div",{class:"form-group row my-0"},Object(r.h)("label",{for:"postalplace",class:"col-4 col-form-label text-right"},"Postalplace"),Object(r.h)("div",{class:"col-8"},Object(r.h)("input",{type:"text",class:"form-control",id:"postalplace","data-classid":a.id,"data-contestantid":s.id,onInput:e.adminSignupEdit,value:s.postalplace}))),Object(r.h)("div",{class:"form-group row my-0"},Object(r.h)("label",{for:"flag",class:"col-4 col-form-label text-right"},"flag (emoji)"),Object(r.h)("div",{class:"col-8"},Object(r.h)("input",{type:"text",class:"form-control",id:"flag","data-classid":a.id,"data-contestantid":s.id,onInput:e.adminSignupEdit,value:s.flag}))),Object(r.h)("div",{class:"form-group row my-0"},Object(r.h)("label",{for:"countryCode",class:"col-4 col-form-label text-right"},"countryCode (iso)"),Object(r.h)("div",{class:"col-8"},Object(r.h)("input",{type:"text",class:"form-control",id:"countryCode","data-classid":a.id,"data-contestantid":s.id,onInput:e.adminSignupEdit,value:s.countryCode}))),Object(r.h)("div",{class:"form-group row my-0"},Object(r.h)("label",{for:"birthdate",class:"col-4 col-form-label text-right"},"birthdate"),Object(r.h)("div",{class:"col-8"},Object(r.h)("input",{type:"date",class:"form-control",id:"birthdate","data-classid":a.id,"data-contestantid":s.id,onInput:e.adminSignupEdit,value:s.birthdate?n.a.isoDate(s.birthdate,!1,!1,!0):null}))),Object(r.h)("div",{class:"form-group row my-0"},Object(r.h)("label",{for:"sportsClub",class:"col-4 col-form-label text-right"},"Klubb"),Object(r.h)("div",{class:"col-8"},Object(r.h)("input",{type:"text",class:"form-control",id:"sportsClub","data-classid":a.id,"data-contestantid":s.id,onInput:e.adminSignupEdit,value:s.sportsClub}))),Object(r.h)("div",{class:"form-group row my-0"},Object(r.h)("label",{for:"facebook",class:"col-4 col-form-label text-right"},"Facebook"),Object(r.h)("div",{class:"col-8"},Object(r.h)("input",{type:"text",class:"form-control",id:"facebook","data-classid":a.id,"data-contestantid":s.id,onInput:e.adminSignupEdit,value:s.facebook}))),Object(r.h)("div",{class:"form-group row my-0"},Object(r.h)("label",{for:"instagram",class:"col-4 col-form-label text-right"},"Instagram"),Object(r.h)("div",{class:"col-8"},Object(r.h)("input",{type:"text",class:"form-control",id:"instagram","data-classid":a.id,"data-contestantid":s.id,onInput:e.adminSignupEdit,value:s.instagram}))),Object(r.h)("div",{class:"form-group row my-0"},Object(r.h)("label",{for:"team",class:"col-4 col-form-label text-right"},"Klasse"),Object(r.h)("div",{class:"col-8"},Object(r.h)("select",{class:"form-control",id:"class","aria-describedby":"classHelp","data-classid":a.id,"data-contestantid":s.id,onInput:e.adminSignupEdit,value:s.class},Object(r.h)("option",{value:""},"-- Choose race class --"),D.classes&&D.classes.sort((function(t,e){return t.distance-e.distance})).map((function(e){return Object(r.h)(t,null,Object(r.h)("option",{value:e.id},e.title," - ",e.distance," km - Påmelding: ",e.signupfee||D.signupfee," NOK"))}))))),Object(r.h)("div",{class:"form-group row my-0"},Object(r.h)("label",{for:"price1",class:"col-4 col-form-label text-right"},"Price 1"),Object(r.h)("div",{class:"col-8"},Object(r.h)("input",{type:"text",class:"form-control",id:"price1","data-classid":a.id,"data-contestantid":s.id,onInput:e.adminSignupEdit,value:s.price1}))),Object(r.h)("div",{class:"form-group row my-0"},Object(r.h)("label",{for:"price2",class:"col-4 col-form-label text-right"},"Price 2"),Object(r.h)("div",{class:"col-8"},Object(r.h)("input",{type:"text",class:"form-control",id:"price2","data-classid":a.id,"data-contestantid":s.id,onInput:e.adminSignupEdit,value:s.price2}))),Object(r.h)("div",{class:"form-group row my-0"},Object(r.h)("label",{for:"price3",class:"col-4 col-form-label text-right"},"Price 3"),Object(r.h)("div",{class:"col-8"},Object(r.h)("input",{type:"text",class:"form-control",id:"price3","data-classid":a.id,"data-contestantid":s.id,onInput:e.adminSignupEdit,value:s.price3}))),Object(r.h)("div",{class:"form-group row my-0"},Object(r.h)("label",{for:"priceSent",class:"col-4 col-form-label text-right"},"Price sent"),Object(r.h)("div",{class:"col-8"},Object(r.h)("input",{type:"date",class:"form-control",id:"priceSent","data-classid":a.id,"data-contestantid":s.id,onInput:e.adminSignupEdit,value:s.priceSent?n.a.isoDate(s.priceSent,!1,!1,!0):null}))),Object(r.h)("div",{class:"form-group row my-5"},Object(r.h)("div",{class:"col-8"},Object(r.h)("button",{type:"button",class:"btn btn-danger float-right",id:"deleteUser",value:"1",onClick:e.adminSignupEdit,"data-classid":a.id,"data-contestantid":s.id},"Delete user from this class")))))))}))))),w&&Object(r.h)(t,null,c[a.id]?Object(r.h)(t,null,Object(r.h)("div",{class:"container"},Object(r.h)("div",{class:"row"},Object(r.h)("div",{class:"col-12"},Object(r.h)("h5",null,"Message to all mushers in ",a.title),Object(r.h)("div",{class:"overflow-auto p-5",style:"max-height: 30vh;"},Object(r.h)("small",null,a.emails&&a.emails.map((function(t){return Object(r.h)("div",{class:"border rounded-lg p-3 mb-3"},Object(r.h)("div",{class:"row bg-light"},Object(r.h)("div",{class:"col-3 text-right"},"Date:"),Object(r.h)("div",{class:"col-9"},n.a.formatDate(t.date,{locale:x,hour12:!1,hour:"2-digit",minute:"2-digit"}))),Object(r.h)("div",{class:"row bg-light"},Object(r.h)("div",{class:"col-3 text-right"},"To:"),Object(r.h)("div",{class:"col-9"},t.to.map((function(t){return Object(r.h)("span",{class:"badge badge-info px-2 py-1 mr-2"},t)})))),Object(r.h)("div",{class:"row bg-light"},Object(r.h)("div",{class:"col-3 text-right"},"Subject:"),Object(r.h)("div",{class:"col-9"},t.subject)),Object(r.h)("div",{class:"row mt-2"},Object(r.h)("div",{class:"col-3 text-right"},"Body:"),Object(r.h)("div",{class:"col-9",dangerouslySetInnerHTML:{__html:(e=t.body,"string"==typeof e?e.replace(/[\n]/g,"<br>"):e)}})));var e})))),Object(r.h)("div",{class:"form-group row"},Object(r.h)("label",{for:"subject",class:"col-2 col-form-label text-right font-weight-lighter"},"To"),Object(r.h)("div",{class:"col-10"},a.contestants&&a.contestants.map((function(e){return Object(r.h)(t,null,Object(r.h)("span",{class:"badge badge-info px-2 py-1 mr-2"},e.firstname," ",e.lastname," (",e.email,")"))})))),Object(r.h)("div",{class:"form-group row"},Object(r.h)("label",{for:"subject",class:"col-2 col-form-label text-right font-weight-lighter"},"Subject"),Object(r.h)("div",{class:"col-10"},Object(r.h)("input",{type:"text",class:"form-control",id:"subject",onInput:Object(u.a)(e,"message.subject"),value:d.subject}))),Object(r.h)("div",{class:"form-group row"},Object(r.h)("label",{for:"body",class:"col-2 col-form-label text-right font-weight-lighter"},"Message"),Object(r.h)("div",{class:"col-10"},Object(r.h)("textarea",{type:"text",class:"form-control",id:"body",rows:"10",onInput:Object(u.a)(e,"message.body"),value:d.body})),Object(r.h)("div",{class:"col-5 contain-images"},d.body&&Object(r.h)(b.a,{markdown:d.body,markdownOpts:p.a.getMarkdownOptions()}))),m&&Object(r.h)(t,null,Object(r.h)("div",{class:"alert alert-"+(m&&m.status>=300?"danger":"success"),role:"alert"},Object(r.h)("small",null,Object(r.h)("xmp",null,JSON.stringify(m,null,4))))),Object(r.h)("button",{class:"btn btn-success float-right",type:"button","data-to":a.contestants&&a.contestants.map((function(t){return t.email})),"data-raceclassid":a.id,onClick:e.sendEmail},Object(r.h)("i",{class:"fas fa-paper-plane"})," Send email to all mushers"),Object(r.h)("button",{class:"btn btn-danger float-right mr-2",type:"button",onClick:e.resetEmail},Object(r.h)("i",{class:"fas fa-times"})," Reset email")),Object(r.h)("div",{class:"col-12 text-center"},Object(r.h)("button",{class:"btn btn-sm btn-link",type:"button",onClick:e.toggleAdminSendMessage,"data-class":a.id},"Hide email form"))))):Object(r.h)(t,null,Object(r.h)("div",{class:"col-12 text-center"},Object(r.h)("button",{class:"btn btn-sm btn-link",type:"button",onClick:e.toggleAdminSendMessage,"data-class":a.id},"Send message to all in this class")),Object(r.h)("div",{class:"col-12 text-center"},Object(r.h)("button",{class:"btn btn-sm btn-link",type:"button",onClick:e.toggleAdminImport,"data-class":a.id},"Toggle import form"))),w&&1===D.liveRace&&l[a.id]&&Object(r.h)(t,null,Object(r.h)("div",{class:"form-group"},Object(r.h)("label",{for:"importUsers"},Object(r.h)(h.c,{id:"races.paste-users"},"Paste your user data here to import users"),":"),Object(r.h)("textarea",{class:"form-control",id:"importUsers",rows:"20",oninput:function(t){return e.parseInput(t.target.value,a.id)}})))))})))))},a}(r.Component))||l;e.a=m}).call(this,a("hosL").Fragment)},t1gC:function(t,e,a){"use strict";a.r(e),function(t){function s(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,s)}return a}function c(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?s(Object(a),!0).forEach((function(e){o(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):s(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}function o(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}var l,r=a("hosL"),n=a("Utv1"),i=a("/eY4"),h=a("OhSV"),d=a("Y3FI"),b=a("fh8t"),u=a.n(b),p=(a("go65"),a("Ysxg")),m=a("9lZG"),f=(a("aGZh"),a("om2D"),a("+JSK")),O=a("/DnB"),j=a("w5T0"),g=a("ULR1"),v=a("hwiY"),w=a("uAGO"),y=a("n7ns"),x=a("Pbyq"),k=a("HGwV"),S=a("J9nn"),T=a("ZOvn"),D=T.a.marginTop(!1),I=T.a.marginTopBack(!1),C=T.a.marginBottom(),P=(T.a.subMenuMarginTop(),{isLoading:!1,showAdminSendMessage:{},newRaceArticle:{},newRaceUserImage:{},message:{subject:"",body:""}}),R=Object(i.a)(l=function(e){function a(t){var a;return(a=e.call(this,t)||this).likeRace=function(){return new Promise((function(t,e){var s;return s=a.props.stores.raceStore,Promise.resolve(s.likeRace({id:s.race.id})).then((function(a){try{return a,t()}catch(t){return e(t)}}),e)}))},a.toggleAddComment=function(t){var e=t.target.parentElement.dataset.id||t.target.dataset.id;a.setState({showAddComment:!a.state.showAddComment},(function(){a.inputRef[e]&&a.inputRef[e].focus()}))},a.chooseSubmenu=function(t){var e=t.target.parentElement.dataset.menu||t.target.dataset.menu;a.setState({submenu:e});var s=a.props.raceid;Object(d.route)("/app-races/"+s+"/"+e)},a.resizeTextarea=function(t){var e=t;e.target&&(e=t.target),e.style.height=e.scrollHeight+"px"},a.resizeAllTextareas=function(){for(var t=document.getElementsByTagName("textarea"),e=0,s=t.length;e<s;e+=1){a.resizeTextarea(t[e])}},a.addNavigation=function(t){a.setState({submenu:t.submenu})},a.back=function(){Object(d.route)("/")},a.state=c(c({},P),{},{showAdminSendMessage:{},newRaceArticle:{},newRaceUserImage:{},message:{subject:"",body:""},submenu:t.submenu||"about"}),a.inputRef={},a.updateTimer={},a}var s,o;o=e,(s=a).prototype=Object.create(o.prototype),s.prototype.constructor=s,s.__proto__=o;var l=a.prototype;return l.loadRace=function(t){return new Promise(function(e,a){var s,o,l,r,n,i,h,d,b,u,p,m,f;return void 0===t&&(t=this.props),this.setState({isLoading:!0}),o=(s=t.stores).raceStore,n=void 0===(r=(l=s.userStore).user)?{}:r,i=t.raceid,Promise.resolve(o.load(i)).then(function(){try{if(this.setState({isLoading:!1}),h={},(d=o.race).classes&&n&&n.email)for(b=0,u=d.classes.length;b<u;b+=1)(p=d.classes[b]).contestants&&(m=p.contestants.findIndex((function(t){return t.email===n.email})))>-1&&(h=c(c({},p.contestants[m]),{},{class:p.id}));if(o.updateKeyValue("signup",h),h.user)return Promise.resolve(l.getDogs({id:h.user})).then(function(){try{return t.call(this)}catch(t){return a(t)}}.bind(this),a);function t(){function t(){return o.getAllClassesSortedBy(),Promise.resolve(o.loadPublicInteractions(i)).then((function(){try{return e()}catch(t){return a(t)}}),a)}return(f=d.classes.filter((function(t){return t.contestants&&t.contestants.length>0})).map((function(t){return t.contestants.filter((function(t){return t.team>0})).map((function(t){return t.team}))})).flat()).length>0&&i?Promise.resolve(o.loadTeams(f.join(","))).then(function(){try{return t.call(this)}catch(t){return a(t)}}.bind(this),a):t.call(this)}return t.call(this)}catch(t){return a(t)}}.bind(this),a)}.bind(this))},l.componentDidMount=function(){this.loadRace(),this.resizeAllTextareas()},l.componentWillReceiveProps=function(t){t.raceid!==this.props.raceid&&this.loadRace(t),t.submenu!==this.props.submenu&&this.addNavigation(t)},l.render=function(){var e=this,a=this.state.submenu,s=this.state,c=s.showAddComment,o=this.props.stores,l=o.userStore,i=o.raceStore,d=l.user,b=void 0===d?{}:d,P=l.isAdmin,R=b.language,E=void 0===R?"en":R,A=this.props,M=A.raceid,L=i.race,H=i.signup,N=L.likes,U=void 0===N?[]:N,z=L.comments,B=void 0===z?[]:z,_=L.likes&&L.likes.findIndex((function(t){return t.user===b.id}))>-1,F=new Date,K="";F>=new Date(L.startDate)&&F<=new Date(L.endDate)?K="race":F>=new Date(L.signupStartDate)&&F<=new Date(L.signupEndDate)&&(K="signup");var V=1===L.liveRace,Y=!V||!!H.email;return"tracking"===a?Object(r.h)(k.a,{stores:this.props.stores,raceid:M}):Object(r.h)("div",{class:"container-fluid",style:"margin-bottom: "+C+"; margin-top: "+D+";"},Object(r.h)("button",{class:"btn btn-link pl-0 fixed-top text-primary",style:"top: "+I+"; left: 5px; font-size: 35px; width: 45px;",onClick:this.back},Object(r.h)("i",{class:"fas fa-arrow-circle-left"})),Object(r.h)("div",{class:"row m-0"},Object(r.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-1 mb-2 p-0"},Object(r.h)("div",{class:"row d-flex align-items-center position-relative"},Object(r.h)("h3",{class:"position-absolute",style:"top: 3px; right: 5px;"},"signup"===K&&!V&&Object(r.h)(t,null,Object(r.h)("span",{class:"badge badge-primary badge-lg border border-white ml-2","data-menu":"signup",onClick:this.chooseSubmenu},Object(r.h)(h.c,{id:"races.signup-open"},"Påmelding åpen"))),"race"===K&&Object(r.h)(t,null,Object(r.h)("span",{class:"badge badge-danger border border-white ml-2"},Object(r.h)(h.c,{id:"races.race-in-progress"},"Løp pågår"))),"done"===K&&Object(r.h)(t,null,Object(r.h)("span",{class:"badge badge-success border border-white ml-2"},Object(r.h)(h.c,{id:"races.race-finished"},"Løp avsluttet")))),L.images&&L.images[0]?Object(r.h)("img",{src:L.images[0].s3LargeLink,class:"img-fluid"}):""))),Object(r.h)("div",{class:"row"},Object(r.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3"},P&&Object(r.h)(t,null,Object(r.h)("a",{class:"btn btn-primary float-right",href:"https://homerunrace.no/index#/race/"+L.id+"/edit"},"Edit")),Object(r.h)("h3",null,L.title),Object(r.h)("div",null,L.startDate&&Object(r.h)(t,null,Object(r.h)(h.c,{id:"races.periode"},"Periode"),": ",n.a.formatDate(L.startDate,{locale:"no-NB",hour12:!1,hour:"2-digit",minute:"2-digit"})),L.endDate&&Object(r.h)(t,null," - ",n.a.formatDate(L.endDate,{locale:"no-NB",hour12:!1,hour:"2-digit",minute:"2-digit"}))))),Object(r.h)("div",{class:"row"},Object(r.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3"},Object(r.h)("div",{class:"row"},Object(r.h)("div",{class:"w-100 overflow-hidden"},Object(r.h)("div",{class:"d-flex flex-row flex-nowrap pb-2 px-1",style:"overflow: auto; scroll-snap-type: x mandatory;"},Object(r.h)("div",{class:"col px-0 pt-2"},Object(r.h)("button",{class:"btn btn-block rounded-pill-left rounded-none "+("about"===a?"btn-primary":"btn-outline-primary")+" text-nowrap",style:"text-overflow: ellipsis; overflow: hidden;","data-menu":"about",onClick:this.chooseSubmenu},Object(r.h)("i",{class:"fas fa-info-circle"})," ",Object(r.h)(h.c,{id:"race.about"},"About")),"about"===a&&Object(r.h)(O.a,{horizontal:"center",vertical:"end"})),Object(r.h)("div",{class:"col px-0 pt-2"},Object(r.h)("button",{class:"btn btn-block rounded-none "+("results"===a?"btn-primary":"btn-outline-primary")+" text-nowrap",style:"text-overflow: ellipsis; overflow: hidden;","data-menu":"results",onClick:this.chooseSubmenu},Object(r.h)("i",{class:"fas fa-list-ol"})," ",Object(r.h)(h.c,{id:"race.results"},"Results")),"results"===a&&Object(r.h)(O.a,{horizontal:"center",vertical:"end"})),Object(r.h)("div",{class:"col px-0 pt-2"},Object(r.h)("button",{class:"btn btn-block rounded-none "+("tracking"===a?"btn-primary":"btn-outline-primary")+" text-nowrap",style:"text-overflow: ellipsis; overflow: hidden;","data-menu":"tracking",onClick:this.chooseSubmenu},Object(r.h)("i",{class:"fas fa-map-marker-alt"})," ",Object(r.h)(h.c,{id:"race.tracking"},"Tracking")),"tracking"===a&&Object(r.h)(O.a,{horizontal:"center",vertical:"end"})),Object(r.h)("div",{class:"col px-0 pt-2"},Object(r.h)("button",{class:"btn btn-block rounded-none "+("news"===a?"btn-primary":"btn-outline-primary")+" text-nowrap",style:"text-overflow: ellipsis; overflow: hidden;","data-menu":"news",onClick:this.chooseSubmenu},Object(r.h)("i",{class:"fas fa-rss"})," ",Object(r.h)(h.c,{id:"race.news"},"News")),"news"===a&&Object(r.h)(O.a,{horizontal:"center",vertical:"end"})),Object(r.h)("div",{class:"col px-0 pt-2"},Object(r.h)("button",{class:"btn btn-block rounded-none "+("userImages"===a?"btn-primary":"btn-outline-primary")+" text-nowrap",style:"text-overflow: ellipsis; overflow: hidden;","data-menu":"userImages",onClick:this.chooseSubmenu},Object(r.h)("i",{class:"fas fa-images"})," ",Object(r.h)(h.c,{id:"race.user-images"},"User images")),"userImages"===a&&Object(r.h)(O.a,{horizontal:"center",vertical:"end"})),L.rules&&Object(r.h)("div",{class:"col px-0 pt-2"},Object(r.h)("button",{class:"btn btn-block rounded-none "+("rules"===a?"btn-primary":"btn-outline-primary")+" text-nowrap",style:"text-overflow: ellipsis; overflow: hidden;","data-menu":"rules",onClick:this.chooseSubmenu},Object(r.h)("i",{class:"fas fa-gavel"})," ",Object(r.h)(h.c,{id:"race.rules"},"Rules")),"rules"===a&&Object(r.h)(O.a,{horizontal:"center",vertical:"end"})),L.veterinaryInfo&&Object(r.h)("div",{class:"col px-0 pt-2"},Object(r.h)("button",{class:"btn btn-block rounded-none "+("veterinary"===a?"btn-primary":"btn-outline-primary")+" text-nowrap",style:"text-overflow: ellipsis; overflow: hidden;","data-menu":"veterinary",onClick:this.chooseSubmenu},Object(r.h)("i",{class:"fas fa-stethoscope"})," ",Object(r.h)(h.c,{id:"race.veterinary"},"Veterinary info")),"veterinary"===a&&Object(r.h)(O.a,{horizontal:"center",vertical:"end"})),L.checkpoints&&Object(r.h)("div",{class:"col px-0 pt-2"},Object(r.h)("button",{class:"btn btn-block rounded-none "+("checkpoints"===a?"btn-primary":"btn-outline-primary")+" text-nowrap",style:"text-overflow: ellipsis; overflow: hidden;","data-menu":"checkpoints",onClick:this.chooseSubmenu},Object(r.h)("i",{class:"fas fa-map-marker-alt"})," ",Object(r.h)(h.c,{id:"race.checkpoints"},"Checkpoints")),"checkpoints"===a&&Object(r.h)(O.a,{horizontal:"center",vertical:"end"})),L.trailDescription&&Object(r.h)("div",{class:"col px-0 pt-2"},Object(r.h)("button",{class:"btn btn-block rounded-none "+("track"===a?"btn-primary":"btn-outline-primary")+" text-nowrap",style:"text-overflow: ellipsis; overflow: hidden;","data-menu":"track",onClick:this.chooseSubmenu},Object(r.h)("i",{class:"fas fa-map-signs"})," ",Object(r.h)(h.c,{id:"race.track-description"},"Track description")),"track"===a&&Object(r.h)(O.a,{horizontal:"center",vertical:"end"})),L.program&&Object(r.h)("div",{class:"col px-0 pt-2"},Object(r.h)("button",{class:"btn btn-block rounded-none "+("program"===a?"btn-primary":"btn-outline-primary")+" text-nowrap",style:"text-overflow: ellipsis; overflow: hidden;","data-menu":"program",onClick:this.chooseSubmenu},Object(r.h)("i",{class:"fas fa-list-alt"})," ",Object(r.h)(h.c,{id:"race.program"},"Program")),"program"===a&&Object(r.h)(O.a,{horizontal:"center",vertical:"end"})),L.prices&&Object(r.h)("div",{class:"col px-0 pt-2"},Object(r.h)("button",{class:"btn btn-block rounded-none "+("prices"===a?"btn-primary":"btn-outline-primary")+" text-nowrap",style:"text-overflow: ellipsis; overflow: hidden;","data-menu":"prices",onClick:this.chooseSubmenu},Object(r.h)("i",{class:"fas fa-award"})," ",Object(r.h)(h.c,{id:"race.prices"},"Premier")),"prices"===a&&Object(r.h)(O.a,{horizontal:"center",vertical:"end"})),!V&&Object(r.h)("div",{class:"col px-0 pt-2"},Object(r.h)("button",{class:"btn btn-block rounded-none "+("classes"===a?"btn-primary":"btn-outline-primary")+" text-nowrap",style:"text-overflow: ellipsis; overflow: hidden;","data-menu":"classes",onClick:this.chooseSubmenu},Object(r.h)("i",{class:"fas fa-folder-open"})," ",Object(r.h)(h.c,{id:"race.classes"},"Classes")),"classes"===a&&Object(r.h)(O.a,{horizontal:"center",vertical:"end"})),Object(r.h)("div",{class:"col px-0 pt-2"},Object(r.h)("button",{class:"btn btn-block rounded-none "+(Y?"":"rounded-pill-right")+" "+("mushers"===a?"btn-primary":"btn-outline-primary")+" text-nowrap",style:"text-overflow: ellipsis; overflow: hidden;","data-menu":"mushers",onClick:this.chooseSubmenu},Object(r.h)("i",{class:"fas fa-users"})," ",Object(r.h)(h.c,{id:"races.mushers"},"Mushers")),"mushers"===a&&Object(r.h)(O.a,{horizontal:"center",vertical:"end"})),Y&&Object(r.h)("div",{class:"col px-0 pt-2"},Object(r.h)("button",{class:"btn btn-block rounded-pill-right rounded-none "+("signup"===a?"btn-primary":"btn-outline-primary")+" text-nowrap",style:"text-overflow: ellipsis; overflow: hidden;","data-menu":"signup",onClick:this.chooseSubmenu},Object(r.h)("i",{class:"fas fa-user-edit"})," ",Object(r.h)(h.c,{id:"race.signup"},"Sign up")),"signup"===a&&Object(r.h)(O.a,{horizontal:"center",vertical:"end"}))))))),"about"===a&&Object(r.h)(t,null,Object(r.h)(S.a,{stores:this.props.stores,race:L}),Object(r.h)("div",{class:"row"},Object(r.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-0 mb-2"},Object(r.h)("h2",{class:"mb-0"},Object(r.h)(h.c,{id:"race.about"},"Om løpet"))),Object(r.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-3 mb-2"},Object(r.h)("p",{class:"clearfix"},Object(r.h)("strong",null,Object(r.h)(u.a,{markdown:T.a.replaceImages(L.ingress,L.images,E),markdownOpts:T.a.getMarkdownOptions()}))),"signup"===K&&Object(r.h)(t,null,V?Object(r.h)(t,null,Object(r.h)("button",{class:"btn btn-block btn-success mb-3","data-menu":"signup",onClick:this.chooseSubmenu},Object(r.h)("i",{class:"fas fa-user-edit"})," ",Object(r.h)(h.c,{id:"race.declaration"},"Declaration")," & ",Object(r.h)(h.c,{id:"race.chiplist"},"Chiplist"))):Object(r.h)(t,null,Object(r.h)("button",{class:"btn btn-block btn-success mb-3","data-menu":"signup",onClick:this.chooseSubmenu},Object(r.h)("i",{class:"fas fa-user-edit"})," ",Object(r.h)(h.c,{id:"race.signup"},"Sign up")))),Object(r.h)(u.a,{markdown:T.a.replaceImages(L.body,L.images,E),markdownOpts:T.a.getMarkdownOptions()})),Object(r.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-3 mb-2"},L.tag&&L.tag.split(",").map((function(e){return Object(r.h)(t,null,Object(r.h)("span",{class:"badge badge-pill badge-primary py-1 ml-2"},Object(r.h)("a",{class:"text-white",href:"https://www.facebook.com/hashtag/"+e,target:"_blank",rel:"noreferrer",native:!0},Object(r.h)("i",{class:"fab fa-facebook"})," #",e)),Object(r.h)("span",{class:"badge badge-pill badge-primary py-1 ml-2"},Object(r.h)("a",{class:"text-white",href:"https://www.instagram.com/explore/tags/"+e,target:"_blank",rel:"noreferrer",native:!0},Object(r.h)("i",{class:"fab fa-instagram"})," #",e)))}))))),"results"===a&&Object(r.h)(t,null,Object(r.h)(S.a,{stores:this.props.stores,race:L}),Object(r.h)(j.a,{stores:this.props.stores,raceid:M})),"tracking"===a&&Object(r.h)(t,null,Object(r.h)(k.a,{stores:this.props.stores,raceid:M})),"news"===a&&Object(r.h)(t,null,Object(r.h)(g.a,{stores:this.props.stores,race:L})),"userImages"===a&&Object(r.h)(t,null,Object(r.h)(x.a,{stores:this.props.stores,race:L})),"rules"===a&&Object(r.h)(t,null,Object(r.h)("div",{class:"row"},Object(r.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-0 mb-2"},Object(r.h)("h2",{class:"mb-0"},Object(r.h)(h.c,{id:"race.rules"},"Regler"))),Object(r.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-3 mb-2"},Object(r.h)(u.a,{markdown:T.a.replaceImages(L.rules,L.images,E),markdownOpts:T.a.getMarkdownOptions()})))),"veterinary"===a&&Object(r.h)(t,null,Object(r.h)("div",{class:"row"},Object(r.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-0 mb-2"},Object(r.h)("h2",{class:"mb-0"},Object(r.h)(h.c,{id:"race.veterinary"},"Veterinærinfo"))),Object(r.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-3 mb-2"},Object(r.h)(u.a,{markdown:T.a.replaceImages(L.veterinaryInfo,L.images,E),markdownOpts:T.a.getMarkdownOptions()})))),"checkpoints"===a&&Object(r.h)(t,null,Object(r.h)("div",{class:"row"},Object(r.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-0 mb-2"},Object(r.h)("h2",{class:"mb-0"},Object(r.h)(h.c,{id:"race.checkpoints"},"Sjekkpunkter"))),Object(r.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-3 mb-2"},Object(r.h)(u.a,{markdown:T.a.replaceImages(L.checkpoints,L.images,E),markdownOpts:T.a.getMarkdownOptions()})))),"track"===a&&Object(r.h)(t,null,Object(r.h)("div",{class:"row"},Object(r.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-0 mb-2"},Object(r.h)("h2",{class:"mb-0"},Object(r.h)(h.c,{id:"race.track-description"},"Løypebeskrivelse"))),Object(r.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-3 mb-2"},Object(r.h)(u.a,{markdown:T.a.replaceImages(L.trailDescription,L.images,E),markdownOpts:T.a.getMarkdownOptions()})))),"program"===a&&Object(r.h)(t,null,Object(r.h)("div",{class:"row"},Object(r.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-0 mb-2"},Object(r.h)("h2",{class:"mb-0"},Object(r.h)(h.c,{id:"race.program"},"Program"))),Object(r.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-3 mb-2"},Object(r.h)(u.a,{markdown:T.a.replaceImages(L.program,L.images,E),markdownOpts:T.a.getMarkdownOptions()})))),"prices"===a&&Object(r.h)(t,null,Object(r.h)("div",{class:"row"},Object(r.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-0 mb-2"},Object(r.h)("h2",{class:"mb-0"},Object(r.h)(h.c,{id:"race.prices"},"Premier"))),Object(r.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-3 mb-2"},Object(r.h)(u.a,{markdown:T.a.replaceImages(L.prices,L.images,E),markdownOpts:T.a.getMarkdownOptions()})))),"mushers"===a&&Object(r.h)(t,null,Object(r.h)(y.a,{stores:this.props.stores,race:L})),"classes"===a&&Object(r.h)(t,null,Object(r.h)(w.a,{stores:this.props.stores,race:L})),"signup"===a&&Object(r.h)(t,null,Object(r.h)(v.a,{stores:this.props.stores,race:L})),["about"].indexOf(a)>-1&&Object(r.h)(t,null,Object(r.h)("div",{class:"row"},Object(r.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-0 mb-2"},Object(r.h)("div",{class:""},Object(r.h)(f.a,{stores:this.props.stores,likes:U,comments:B,type:"race"}))),Object(r.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-2 mb-3"},Object(r.h)("div",{class:"row"},Object(r.h)("div",{class:"col-6 text-center"},Object(r.h)("button",{type:"button",class:"btn btn-outline-"+(_?"primary":"secondary")+" btn-lg btn-block "+(_?"text-primary":""),onClick:this.likeRace},Object(r.h)("i",{class:(_?"text-primary fas":"far")+" fa-thumbs-up"})," ",_?Object(r.h)(h.c,{id:"comments.has-liked"},"Liked"):Object(r.h)(h.c,{id:"comments.like"},"Lik"))),Object(r.h)("div",{class:"col-6 text-center"},Object(r.h)("button",{type:"button",class:"btn btn-outline-secondary btn-lg btn-block","data-id":L.id,onClick:this.toggleAddComment},Object(r.h)("i",{class:"fas fa-comment"})," ",Object(r.h)(h.c,{id:"comments.comment-add"},"Comment"))))),Object(r.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-2 mb-3"},c&&b.email&&Object(r.h)(m.a,{stores:this.props.stores,race:L,inputRef:function(t){return e.inputRef[L.id]=t},inputRefObject:this.inputRef})),Object(r.h)("div",{class:"col-12 mt-2"},Object(r.h)(p.a,{stores:this.props.stores,race:L,cols:"12"})))))},a}(r.Component))||l;e.default=R}.call(this,a("hosL").Fragment)},uAGO:function(t,e,a){"use strict";(function(t){var s,c=a("hosL"),o=a("Utv1"),l=a("/eY4"),r=a("OhSV"),n=(a("Y3FI"),a("fh8t")),i=a.n(n),h=(a("go65"),a("ZOvn")),d=Object(l.a)(s=function(e){function a(t){var a;return(a=e.call(this,t)||this).state={},a.inputRef={},a.updateTimer={},a}var s,l;return l=e,(s=a).prototype=Object.create(l.prototype),s.prototype.constructor=s,s.__proto__=l,a.prototype.render=function(){var e=this.props.stores,a=e.userStore,s=a.user,l=a.isAdmin,n=(void 0===s?{}:s).language,d=void 0===n?"en":n,b=this.props.race,u=void 0===b?{}:b;return Object(c.h)(t,null,Object(c.h)("div",{class:"row"},Object(c.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-0 mb-2"},Object(c.h)("h2",{class:"mb-0"},Object(c.h)(r.c,{id:"race.classes"},"Klasser"))),Object(c.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-3 mb-2"},Object(c.h)("div",{class:"row"},u.classes&&u.classes.sort((function(t,e){return t.distance-e.distance})).map((function(e){return Object(c.h)(t,null,Object(c.h)("div",{class:"col-12 col-sm-6 col-lg-4 mb-4"},Object(c.h)("div",{class:"border rounded rounded-lg p-3"},Object(c.h)("h5",null,e.title),l&&Object(c.h)(t,null,Object(c.h)("a",{href:"/tv/top10/"+u.id+"/"+e.id},"TV Top 10")),Object(c.h)("small",null,e.startDate&&Object(c.h)("div",null,Object(c.h)("span",{class:"font-weight-lighter"},Object(c.h)(r.c,{id:"race.startdate"},"Start"),":")," ",o.a.formatDate(e.startDate+" "+(e.startTime||"00:00:00"),{locale:d,hour12:!1,hour:"2-digit",minute:"2-digit"})),e.endDate&&Object(c.h)("div",null,Object(c.h)("span",{class:"font-weight-lighter"},Object(c.h)(r.c,{id:"race.enddate"},"End"),":")," ",o.a.formatDate(e.endDate+" "+(e.endTime||"00:00:00"),{locale:d,hour12:!1,hour:"2-digit",minute:"2-digit"}))),Object(c.h)("div",null,Object(c.h)("span",{class:"font-weight-lighter"},Object(c.h)(r.c,{id:"race.distance"},"Distanse"),":")," ",e.distance," km"),Object(c.h)("div",null,Object(c.h)("span",{class:"font-weight-lighter"},Object(c.h)(r.c,{id:"race.signup"},"Påmelding"),":")," ",e.signupfee||u.signupfee," NOK"),Object(c.h)("p",{class:"clearfix"},Object(c.h)(i.a,{markdown:h.a.replaceImages(e.ingress,u.images,d),markdownOpts:h.a.getMarkdownOptions()})),Object(c.h)("small",null,Object(c.h)(i.a,{markdown:h.a.replaceImages(e.body,u.images,d),markdownOpts:h.a.getMarkdownOptions()})),e.rules&&Object(c.h)(t,null,Object(c.h)("h5",null,Object(c.h)(r.c,{id:"race.rules"},"Regler")),Object(c.h)(i.a,{markdown:h.a.replaceImages(e.rules,u.images,d),markdownOpts:h.a.getMarkdownOptions()})))))}))))))},a}(c.Component))||s;e.a=d}).call(this,a("hosL").Fragment)},w5T0:function(t,e,a){"use strict";(function(t){function s(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,s)}return a}function c(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function o(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}var l,r,n=a("hosL"),i=a("Utv1"),h=a("/eY4"),d=a("OhSV"),b=(a("Y3FI"),a("fh8t")),u=a.n(b),p=(a("go65"),a("/DnB"),a("ZOvn")),m={isLoading:!1,contentIsNotLoaded:!0,reloadInSec:null,reloadLastEpoch:null,reloadIsActive:!1},f=Object(h.a)(l=function(e){function a(t){var a;return(a=e.call(this,t)||this).initComponent=function(){var t=Math.floor((new Date).getTime()/1e3);a.setState({reloadIsActive:!0,reloadLastEpoch:t},(function(){return a.tickReloadTimeer()}))},a.state=function(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?s(Object(a),!0).forEach((function(e){c(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):s(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}({},m),a.updateTimer={},a}o(a,e);var l=a.prototype;return l.tickReloadTimeer=function(){var t=this,e=this.state,a=e.reloadLastEpoch;if(e.reloadIsActive){var s=Math.floor((new Date).getTime()/1e3);this.setState({reloadInSec:60-(s-a)}),clearTimeout(this.updateTimer.tick),this.updateTimer.tick=setTimeout((function(){return t.tickReloadTimeer()}),1e3)}return!1},l.componentDidMount=function(){this.initComponent()},l.componentWillUnmount=function(){clearTimeout(this.updateTimer.tick)},l.render=function(){var e=Math.floor(i.a.normalizeBetween(this.state.reloadInSec,0,60,0,100));return Object(n.h)(t,null,Object(n.h)("div",{class:"progress fixed-top",style:"height: 2px; z-index: 999999;"},Object(n.h)("div",{class:"progress-bar",role:"progressbar",style:"width: "+e+"%;","aria-valuenow":e,"aria-valuemin":"0","aria-valuemax":"100"})))},a}(n.Component))||l,O=Object(h.a)(r=function(e){function a(t){var a;return(a=e.call(this,t)||this).toggleDisplayDetails=function(t){var e=t.target.closest("tr").dataset.email;a.props.stores.appState.toggleDisplayDetails(e)},a.adminToggleEditUser=function(t){t.stopPropagation();var e=t.target.closest("tr").dataset.email;a.props.stores.appState.toggleEditUserDetails(e)},a.adminSignupEdit=function(t){var e,s=a.props.raceid,c=a.props.stores.raceStore,o=t.target.id,l=t.target.value,r=t.target.dataset,n=((e={raceClassId:r.classid,contestantId:r.contestantid})["raceClassContestant"+i.a.ucfirst(o)]=l,e);clearTimeout(a.updateTimer[o]),a.updateTimer[o]=setTimeout((function(){return new Promise((function(t){return c.editClass({id:s,data:n}),t()}))}),500)},a.lockAllWorkoutsInRace=function(){return new Promise((function(t,e){return Promise.resolve(a.props.stores.raceStore.lockAllWorkoutsInRace({id:a.props.raceid})).then((function(s){try{return a.setState({lockMessage:s}),t()}catch(t){return e(t)}}),e)}))},a.filterByClass=function(t){var e=t.target.closest("button").dataset.id;a.props.stores.appState.toggleSelectedClassId(e,!0)},a.state={},a.inputRef={},a.updateTimer={},a}o(a,e);var s=a.prototype;return s.loadRace=function(t){return new Promise(function(e,a){var s,c,o,l;return s=this,void 0===t&&(t=this.props),this.setState({isLoading:!0}),c=t.stores.raceStore,o=t.raceid,Promise.resolve(c.load(o)).then(function(){try{if((l=c.race.classes.filter((function(t){return t.contestants&&t.contestants.length>0})).map((function(t){return t.contestants.filter((function(t){return t.team>0})).map((function(t){return t.team}))})).flat()).length>0&&o)return Promise.resolve(c.loadTeams(l.join(","))).then(function(){try{return Promise.resolve(c.loadWorkoutSummary(l.join(","),o)).then(function(){try{return c.getWorkoutSummaryActiveTeams(),t.call(this)}catch(t){return a(t)}}.bind(this),a)}catch(t){return a(t)}}.bind(this),a);function t(){return c.getAllClassesSortedBy(),clearTimeout(this.updateTimer.reload),this.updateTimer.reload=setTimeout((function(){return new Promise((function(t){var e=Math.floor((new Date).getTime()/1e3);return s.setState({reloadLastEpoch:e}),s.loadRace(),t()}))}),6e4),this.setState({isLoading:!1,contentIsNotLoaded:!1}),e()}return t.call(this)}catch(t){return a(t)}}.bind(this),a)}.bind(this))},s.componentWillUnmount=function(){clearTimeout(this.updateTimer.reload),clearTimeout(this.updateTimer.tick)},s.componentDidMount=function(){this.loadRace()},s.render=function(){var e=this,a=this.state,s=a.contentIsNotLoaded,c=a.lockMessage,o=this.props.stores,l=o.userStore,r=o.raceStore,h=o.appState,b=l.user,m=void 0===b?{}:b,O=l.isAdmin,j=m.language,g=void 0===j?"en":j,v=h.displayDetails,w=h.editUserDetails,y=h.selectedClassIds,x=void 0===y?[]:y,k=r.race,S=void 0===k?{}:k,T=r.classes,D=void 0===T?[]:T,I=new Date(S.endDate);I.setHours(I.getHours()+2);var C=1===S.liveRace;return Object(n.h)(t,null,Object(n.h)("div",{class:"row"},Object(n.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-0 mb-2"},Object(n.h)("h2",{class:"mb-0"},Object(n.h)(d.c,{id:"race.results"},"Results"))),Object(n.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-3 mb-2"},Object(n.h)(f,{stores:this.props.stores}),C?Object(n.h)(t,null):Object(n.h)(t,null,m.email&&Object(n.h)("div",{class:"alert alert-primary",role:"alert"},"no"===g&&Object(n.h)(t,null,"Resultatene hentes direkte fra treningsøktene i QPaws appen.",Object(n.h)("br",null),Object(n.h)("strong",null,"For at treningsøktene skal bli registrert må øktene:"),Object(n.h)("ul",null,Object(n.h)("li",null,"Ha riktig dato som er innenfor løpsperioden."),Object(n.h)("li",null,"Være markert som 'Konkurranse'."),Object(n.h)("li",null,"Være registrert på teamet som er påmeldt."))),"en"===g&&Object(n.h)(t,null,"The results are imported directly from the workouts inside QPaws app.",Object(n.h)("br",null),Object(n.h)("strong",null,"To make sure your workouts are registered check the following:"),Object(n.h)("ul",null,Object(n.h)("li",null,"Use the correct date on your workout. Has to be inside the race period."),Object(n.h)("li",null,"Mark the workout as 'Race'."),Object(n.h)("li",null,"Workout has to be on the same team as you signed up with."))))),S.resultsUrl?Object(n.h)("div",{class:"p-3 my-4 bg-light"},Object(n.h)("a",{href:S.resultsUrl,target:"_blank",rel:"noreferrer",native:!0},S.resultsText?S.resultsText:Object(n.h)(t,null,Object(n.h)(d.c,{id:"races.results-here"},"Se resultater her")," ")," ",Object(n.h)("i",{class:"fas fa-chevron-circle-right"}))):Object(n.h)(t,null),(s||!D||0===D.length)&&Object(n.h)("div",{class:"d-flex justify-content-center my-5 py-5"},Object(n.h)("div",{class:"spinner-border text-primary",role:"status"},Object(n.h)("span",{class:"sr-only"},"Loading...")))),Object(n.h)("div",{class:"col-12"},Object(n.h)("div",{class:"row"},Object(n.h)("div",{class:"w-100 overflow-hidden"},Object(n.h)("div",{class:"d-flex flex-row flex-nowrap pb-2 px-1",style:"overflow: auto; scroll-snap-type: x mandatory;"},S.classes&&S.classes.sort((function(t,e){return t.distance-e.distance})).map((function(a,s){return Object(n.h)(t,null,Object(n.h)("div",{class:"col px-0 pt-2"},Object(n.h)("button",{type:"button",class:"btn btn-block "+(0===s&&"rounded-pill-left")+" "+(s===S.classes.length-1&&"rounded-pill-right")+" rounded-none "+(x.indexOf(a.id)>-1?"btn-primary":"btn-outline-primary")+" text-nowrap",style:"text-overflow: ellipsis; overflow: hidden;",onClick:e.filterByClass,"data-id":a.id},a.title)))})))))),Object(n.h)("div",{class:"col-12"},S.classes&&S.classes.filter((function(t){return!(x.length>0)||x.indexOf(t.id)>-1})).sort((function(t,e){return t.distance-e.distance})).map((function(a){return Object(n.h)("div",{class:"mt-5 mb-5"},S.resultDanger&&Object(n.h)("div",{class:"alert alert-danger",role:"alert"},Object(n.h)("div",{class:"spinner-grow text-danger float-left",role:"status"},Object(n.h)("span",{class:"sr-only"},"Loading...")),Object(n.h)("i",{class:"fas fa-exclamation-triangle float-left mr-4",style:"font-size: 2.0em;"}),Object(n.h)(u.a,{markdown:p.a.replaceImages(S.resultDanger,S.images,g),markdownOpts:p.a.getMarkdownOptions()})),S.resultWarning&&Object(n.h)("div",{class:"alert alert-warning",role:"alert"},Object(n.h)("i",{class:"fas fa-exclamation float-left mr-4",style:"font-size: 2.0em;"}),Object(n.h)(u.a,{markdown:p.a.replaceImages(S.resultWarning,S.images,g),markdownOpts:p.a.getMarkdownOptions()})),S.resultSuccess&&Object(n.h)("div",{class:"alert alert-success",role:"alert"},Object(n.h)("i",{class:"fas fa-check float-left mr-4",style:"font-size: 2.0em;"}),Object(n.h)(u.a,{markdown:p.a.replaceImages(S.resultSuccess,S.images,g),markdownOpts:p.a.getMarkdownOptions()})),Object(n.h)("h3",null,a.title," ",a.startDate&&Object(n.h)(t,null,": ",Object(n.h)("span",{class:"font-weight-lighter"},i.a.formatDate(a.startDate+" "+(a.startTime||"00:00:00"),{locale:g,hour12:!1,hour:"2-digit",minute:"2-digit"})," - ",i.a.formatDate(a.endDate+" "+(a.endTime||"00:00:00"),{locale:g,hour12:!1,hour:"2-digit",minute:"2-digit"})))),Object(n.h)("span",{class:"float-right"},Object(n.h)("span",{class:"text-muted"},Object(n.h)(d.c,{id:"races.mushers"},"Mushers"),": ",a.totalMushers||0),Object(n.h)("span",{class:"text-muted ml-4"},Object(n.h)(d.c,{id:"races.finished-mushers"},"Finished mushers"),": ",a.totalFinished||0," ")),Object(n.h)("div",{class:"table-responsive-md"},Object(n.h)("table",{class:"table table-sm table-striped"},Object(n.h)("thead",null,Object(n.h)("tr",null,Object(n.h)("th",{scope:"col"},"#"),Object(n.h)("th",{scope:"col",style:"min-width: 200px;"},Object(n.h)(d.c,{id:"races.name"},"Navn")),O&&Object(n.h)(t,null,Object(n.h)("th",{class:"d-none d-lg-table-cell",scope:"col"},Object(n.h)("i",{class:"fas fa-user-shield"})," Cellphone"),Object(n.h)("th",{class:"d-none d-lg-table-cell",scope:"col"},Object(n.h)("i",{class:"fas fa-user-shield"})," Email")),Object(n.h)("th",{scope:"col",class:"d-none d-lg-table-cell",style:"min-width: 400px;"},Object(n.h)(d.c,{id:"races.stages"},"Etapper")),Object(n.h)("th",{scope:"col"},Object(n.h)(d.c,{id:"races.result"},"Resultat")))),Object(n.h)("tbody",null,D[a.id]&&D[a.id].contestants&&D[a.id].contestants.map((function(s,c){var o=s.musher,l=s.currentTeam,h=s.currentStages,d=s.currentResults,b=s.completed,m=s.normalizedDuration,f=s.weightedNormalizedDuration,j=s.isDone,y=s.finishedDate,x=s.totalWorkoutTimeUsedSec,k=r.getTotalsByTeamId(l.id);return Object(n.h)(t,null,Object(n.h)("tr",{onClick:e.toggleDisplayDetails,"data-email":o.email},Object(n.h)("th",{scope:"row"},c+1,O&&d&&Object(n.h)(t,null,Object(n.h)("br",null),d.isLocked?Object(n.h)("i",{class:"fas fa-lock text-danger mr-2"}):Object(n.h)("i",{class:"fas fa-lock-open text-success mr-2"}))),Object(n.h)("td",{class:v[o.email]?"font-weight-bold":"",style:v[o.email]?"":"line-height: 0.8em;"},v[o.email]?Object(n.h)(t,null,o.firstname," ",o.lastname,Object(n.h)("br",null),Object(n.h)("span",{class:"text-muted"},l.name),Object(n.h)("br",null),Object(n.h)("small",{class:"text-muted"},o.sportsClub),Object(n.h)("br",null),o.facebook&&Object(n.h)("a",{class:"mr-2",href:p.a.asFacebookLink(o.facebook),native:!0,target:"_blank",rel:"noreferrer"},Object(n.h)("i",{class:"fab fa-facebook"})),o.instagram&&Object(n.h)("a",{class:"mr-2",href:p.a.asInstagramLink(o.instagram),native:!0,target:"_blank",rel:"noreferrer"},Object(n.h)("i",{class:"fab fa-instagram"})),o.price1&&Object(n.h)("div",{class:"font-weight-lighter"},Object(n.h)("i",{class:"fas fa-trophy text-warning"})," ",o.price1,o.priceSent&&Object(n.h)(t,null,Object(n.h)("i",{class:"fas fa-check text-success"}))),o.price2&&Object(n.h)("div",{class:"font-weight-lighter"},Object(n.h)("i",{class:"fas fa-trophy text-warning"})," ",o.price2),o.price3&&Object(n.h)("div",{class:"font-weight-lighter"},Object(n.h)("i",{class:"fas fa-trophy text-warning"})," ",o.price3)):Object(n.h)(t,null,o.price1&&Object(n.h)("span",{class:"float-right text-warning",style:"font-size: 1.2em;"},Object(n.h)("i",{class:"fas fa-trophy"}),o.priceSent&&Object(n.h)(t,null,Object(n.h)("i",{class:"fas fa-check text-success"}))),Object(n.h)("nobr",null,o.firstname," ",o.lastname,Object(n.h)("br",null),Object(n.h)("small",{class:"text-muted"},o.sportsClub),Object(n.h)("br",null)))),O&&Object(n.h)(t,null,Object(n.h)("td",{class:"d-none d-lg-table-cell"},o.cellphone),Object(n.h)("td",{class:"d-none d-lg-table-cell"},o.email)),Object(n.h)("td",{class:"d-none d-lg-table-cell"},O&&Object(n.h)(t,null,Object(n.h)("button",{class:"btn btn-primary btn-sm float-right",onClick:e.adminToggleEditUser},Object(n.h)("i",{class:"fas fa-user-edit"}))),O&&w[o.email]&&Object(n.h)(t,null,Object(n.h)("h5",null,"Admin edit:"),Object(n.h)("div",{class:"form-group row my-0"},Object(n.h)("label",{class:"col-sm-2 col-form-label text-right"},"Email"),Object(n.h)("div",{class:"col-sm-10"},o.email)),Object(n.h)("div",{class:"form-group row my-0"},Object(n.h)("label",{class:"col-sm-2 col-form-label text-right"},"Cellphone"),Object(n.h)("div",{class:"col-sm-10"},o.cellphone)),Object(n.h)("div",{class:"form-group row my-0"},Object(n.h)("label",{for:"team",class:"col-sm-2 col-form-label text-right"},"Race status"),Object(n.h)("div",{class:"col-sm-10"},Object(n.h)("select",{class:"form-control-plaintext",id:"raceStatus","data-classid":o.class,"data-contestantid":o.id,onInput:e.adminSignupEdit,value:o.raceStatus},Object(n.h)("option",{value:""},"-- Choose race status --"),Object(n.h)("option",{value:"OK"},"OK - Everything ok"),Object(n.h)("option",{value:"DNS"},"DNS - Did Not Start"),Object(n.h)("option",{value:"DNF"},"DNF - Did Not Finish"),Object(n.h)("option",{value:"DNQ"},"DNQ - Did not qualify"),Object(n.h)("option",{value:"DQ"},"DQ - Disqualified"),Object(n.h)("option",{value:"DC"},"DC - Data changed by user")))),Object(n.h)("div",{class:"form-group row my-0"},Object(n.h)("label",{for:"raceComment",class:"col-sm-2 col-form-label text-right"},"Race comment"),Object(n.h)("div",{class:"col-sm-10"},Object(n.h)("input",{type:"text",class:"form-control-plaintext",id:"raceComment","data-classid":o.class,"data-contestantid":o.id,onInput:e.adminSignupEdit,value:o.raceComment}))),Object(n.h)("div",{class:"form-group row my-0"},Object(n.h)("label",{for:"gpxResultsApproved",class:"col-sm-2 col-form-label text-right"},"GPX Results approved (date)"),Object(n.h)("div",{class:"col-sm-10"},Object(n.h)("input",{type:"date",class:"form-control-plaintext",id:"gpxResultsApproved","data-classid":o.class,"data-contestantid":o.id,onInput:e.adminSignupEdit,value:o.gpxResultsApproved?i.a.isoDate(o.gpxResultsApproved,!1,!1,!0):null}))),Object(n.h)("div",{class:"form-group row my-0"},Object(n.h)("label",{for:"price1",class:"col-sm-2 col-form-label text-right"},"Price 1"),Object(n.h)("div",{class:"col-sm-10"},Object(n.h)("input",{type:"text",class:"form-control-plaintext",id:"price1","data-classid":o.class,"data-contestantid":o.id,onInput:e.adminSignupEdit,value:o.price1}))),Object(n.h)("div",{class:"form-group row my-0"},Object(n.h)("label",{for:"price2",class:"col-sm-2 col-form-label text-right"},"Price 2"),Object(n.h)("div",{class:"col-sm-10"},Object(n.h)("input",{type:"text",class:"form-control-plaintext",id:"price2","data-classid":o.class,"data-contestantid":o.id,onInput:e.adminSignupEdit,value:o.price2}))),Object(n.h)("div",{class:"form-group row my-0"},Object(n.h)("label",{for:"price3",class:"col-sm-2 col-form-label text-right"},"Price 3"),Object(n.h)("div",{class:"col-sm-10"},Object(n.h)("input",{type:"text",class:"form-control-plaintext",id:"price3","data-classid":o.class,"data-contestantid":o.id,onInput:e.adminSignupEdit,value:o.price3}))),Object(n.h)("div",{class:"form-group row my-0"},Object(n.h)("label",{for:"priceSent",class:"col-sm-2 col-form-label text-right"},"Price sent"),Object(n.h)("div",{class:"col-sm-10"},Object(n.h)("input",{type:"date",class:"form-control-plaintext",id:"priceSent","data-classid":o.class,"data-contestantid":o.id,onInput:e.adminSignupEdit,value:o.priceSent?i.a.isoDate(o.priceSent,!1,!1,!0):null})))),Object(n.h)("div",{class:"d-flex flex-wrap"},h&&h.map((function(e,s){var c=e.distanceKm/a.distance*100,l=(c>100||parseInt(c,10),Math.floor(new Date(e.date).getTime()/1e3)),r=new Date(0);r.setUTCSeconds(l+parseInt(e.duration,10));e.images.flat();return v[o.email]?Object(n.h)(t,null,Object(n.h)("div",{class:"bg-light border rounded-lg  text-right position-relative mr-1 mb-1",style:"width: 350px; min-width: 320px;"},Object(n.h)("svg",{viewBox:"0 0 300 100",class:"position-absolute",style:"width: 100%; height: 95%; bottom: 0px; left: 0px; z-index: 0;"},Object(n.h)("path",{d:""+e.svgElevation,style:"fill: #0063FF; stroke: #0063FF; stroke-width: 2; opacity: 0.2;"})),Object(n.h)("div",{class:"position-relative px-3"},Object(n.h)("span",{class:"position-absolute",style:"top: 3px; left: 3px; font-size: 1.3em;"},s+1),Object(n.h)("small",null,O&&Object(n.h)("span",{class:"position-absolute",style:"top: 0px; right: -5px;"},e.isLocked?Object(n.h)("i",{class:"fas fa-lock text-danger"}):Object(n.h)("i",{class:"fas fa-lock-open text-success"})),Object(n.h)("span",{class:"float-left"},Object(n.h)("nobr",null,Object(n.h)("i",{style:"width: 20px;",class:"fas fa-sign-out-alt text-muted"})," ",i.a.formatDate(e.date,{locale:g,hour12:!1,hour:"2-digit",minute:"2-digit"})),Object(n.h)("nobr",null,Object(n.h)("i",{style:"width: 20px;",class:"fas fa-sign-in-alt text-muted"})," ",i.a.formatDate(r,{locale:g,hour12:!1,hour:"2-digit",minute:"2-digit"}))),Object(n.h)("span",{class:"float-right"},Object(n.h)("nobr",null,Object(n.h)("i",{style:"width: 20px;",class:"fas fa-road text-muted"})," ",i.a.format(e.distanceKm,1)||"n/a"," ",Object(n.h)("span",{class:"font-weight-lighter"},"km")),Object(n.h)("nobr",null,Object(n.h)("i",{style:"width: 20px;",class:"fas fa-mountain text-muted"})," ",i.a.format(e.elevation,0)||"n/a"," ",Object(n.h)("span",{class:"font-weight-lighter"},"m")),Object(n.h)("nobr",null,Object(n.h)("i",{style:"width: 20px;",class:"fas fa-tachometer-alt text-muted"})," ",i.a.format(e.speedAvg,1)||"n/a"," ",Object(n.h)("span",{class:"font-weight-lighter"},"km/t")),Object(n.h)("br",null),Object(n.h)("nobr",null,Object(n.h)("i",{style:"width: 20px;",class:"fas fa-clock text-muted"})," ",i.a.secToHms(e.duration)||"n/a"),Object(n.h)("nobr",null,Object(n.h)("i",{style:"width: 20px;",class:"fas fa-moon text-muted"})," ",i.a.secToHms(e.rest)||"n/a"),Object(n.h)("nobr",null,Object(n.h)("i",{style:"width: 20px;",class:"fas fa-running text-muted"})," ",i.a.secToHms(e.duration-e.rest)||"n/a"),Object(n.h)("br",null),Object(n.h)("nobr",null,Object(n.h)("i",{style:"width: 20px;",class:"fas fa-dog text-muted"})," ",i.a.format(e.avgDogs,0)||"n/a")))))):Object(n.h)(t,null,Object(n.h)("div",{class:"bg-light border rounded-lg text-right position-relative px-3 mr-1 mb-1",style:"width: 300px; min-width: 300px;"},Object(n.h)("small",null,O&&Object(n.h)("span",{class:"position-absolute",style:"top: 2px; right: -5px;"},e.isLocked?Object(n.h)("i",{class:"fas fa-lock text-danger"}):Object(n.h)("i",{class:"fas fa-lock-open text-sucess"})),Object(n.h)("span",{class:"float-left"},s+1),Object(n.h)("nobr",null,Object(n.h)("i",{style:"width: 20px;",class:"fas fa-road text-muted"})," ",i.a.format(e.distanceKm,1)||"n/a"," ",Object(n.h)("span",{class:"font-weight-lighter"},"km")),Object(n.h)("nobr",null,Object(n.h)("i",{style:"width: 20px;",class:"fas fa-tachometer-alt text-muted"})," ",i.a.format(e.speedAvg,1)||"n/a"," ",Object(n.h)("span",{class:"font-weight-lighter"},"km/t")),Object(n.h)("nobr",null,Object(n.h)("i",{style:"width: 20px;",class:"fas fa-clock text-muted"})," ",i.a.secToHms(e.duration)||"n/a"))))})))),Object(n.h)("td",{class:"text-right position-relative pl-4"},function(e){switch(e.raceStatus){case"OK":return Object(n.h)(t,null,Object(n.h)("span",{class:"position-absolute rounded-lg",style:"top: 10px; left: 0px;"},Object(n.h)("i",{class:"fas fa-check text-success"})));case"DNS":case"DNF":case"DNQ":case"DQ":return Object(n.h)(t,null,Object(n.h)("span",{class:"position-absolute bg-danger text-white text-center px-2 rounded-lg border",style:"top: 5px; left: -100px; width: 80px"},Object(n.h)("i",{class:"fas fa-info-circle"})," ",e.raceStatus));case"DC":return Object(n.h)(t,null,Object(n.h)("span",{class:"position-absolute bg-warning text-white text-center px-2 rounded-lg border",style:"top: 5px; left: -150px; width: 80px"},Object(n.h)("i",{class:"fas fa-info-circle"})," ",e.raceStatus));default:return""}}(o),o.raceComment&&Object(n.h)(t,null,Object(n.h)("div",{class:"alert alert-warning text-left",role:"alert"},Object(n.h)("i",{class:"fas fa-exclamation-triangle float-left mr-4",style:"font-size: 2.0em;"}),Object(n.h)(u.a,{markdown:p.a.replaceImages(o.raceComment,S.images,g),markdownOpts:p.a.getMarkdownOptions()}))),O&&d.lastUpdated>I&&Object(n.h)(t,null,Object(n.h)("div",{class:"alert alert-danger text-left d-none d-md-block",role:"alert"},Object(n.h)("i",{class:"fas fa-exclamation-triangle float-left mr-4",style:"font-size: 2.0em;"}),Object(n.h)("i",{class:"fas fa-user-shield"})," Last changed: ",i.a.formatDate(d.lastUpdated,{locale:g,hour12:!1,hour:"2-digit",minute:"2-digit"}))),b>=99?Object(n.h)("span",{class:"position-absolute",style:"top: 10px; left: 0px;"},Object(n.h)("i",{class:"fas fa-flag-checkered text-success"})):"",Object(n.h)("small",null,v[o.email]?Object(n.h)(t,null,Object(n.h)("nobr",null,Object(n.h)("i",{style:"width: 20px;",class:"fas fa-road text-muted"})," ",i.a.format(d.distanceKm,1)||"n/a"," ",Object(n.h)("span",{class:"font-weight-lighter"},"km")),Object(n.h)("nobr",null,Object(n.h)("i",{style:"width: 20px;",class:"fas fa-mountain text-muted"})," ",i.a.format(d.elevation,0)||"n/a"," ",Object(n.h)("span",{class:"font-weight-lighter"},"m")),Object(n.h)("div",{class:"progress mb-1",style:"height: 3px;"},Object(n.h)("div",{class:"progress-bar "+(b>=99?"bg-success":""),role:"progressbar",style:"width: "+b+"%","aria-valuenow":""+b,"aria-valuemin":"0","aria-valuemax":"100"})),S.nonstop?Object(n.h)(t,null,Object(n.h)("nobr",null,Object(n.h)("i",{style:"width: 20px;",class:"fas fa-clock text-muted"})," ",i.a.secToHms(x)||"n/a"),Object(n.h)("nobr",null,Object(n.h)("i",{style:"width: 20px;",class:"fas fa-moon text-muted"})," ",i.a.secToHms(k.totalRest)||"n/a"),Object(n.h)("br",null),Object(n.h)("nobr",null,Object(n.h)("i",{style:"width: 20px;",class:"fas fa-calendar text-muted"})," ",i.a.isoDate(k.firstEpoch)," - ",Object(n.h)("i",{style:"width: 20px;",class:"fas fa-calendar text-muted"})," ",i.a.isoDate(y)),O&&Object(n.h)(t,null,Object(n.h)("br",null),Object(n.h)("div",{class:"text-danger"},k.firstGpxStartEpoch&&Object(n.h)(t,null,Object(n.h)("nobr",null,"firstGpxStartEpoch: ",i.a.isoDate(k.firstGpxStartEpoch)),Object(n.h)("br",null)),k.lastGpxStartEpoch&&Object(n.h)(t,null,Object(n.h)("nobr",null,"lastGpxStartEpoch: ",i.a.isoDate(k.lastGpxStartEpoch)),Object(n.h)("br",null))))):Object(n.h)(t,null,Object(n.h)("nobr",null,Object(n.h)("i",{style:"width: 20px;",class:"fas fa-clock text-muted"})," ",i.a.secToHms(d.duration)||"n/a"),Object(n.h)("nobr",null,Object(n.h)("i",{style:"width: 20px;",class:"fas fa-moon text-muted"})," ",i.a.secToHms(d.rest)||"n/a"),Object(n.h)("nobr",null,Object(n.h)("i",{style:"width: 20px;",class:"fas fa-running text-muted"})," ",i.a.secToHms(d.duration-d.rest)||"n/a"),Object(n.h)("br",null),1===j&&Object(n.h)(t,null,Object(n.h)("nobr",{class:"font-weight-bold"},Object(n.h)("span",{class:"font-weight-lighter text-muted"},"Normalized to race distance:")," ",Object(n.h)("i",{style:"width: 20px;",class:"fas fa-clock text-muted"})," ",i.a.secToHms(m)||"n/a"),Object(n.h)("br",null)),1===j&&Object(n.h)(t,null,Object(n.h)("nobr",{class:"font-weight-bold"},Object(n.h)("span",{class:"font-weight-lighter text-muted"},"Normalized:")," ",Object(n.h)("i",{style:"width: 20px;",class:"fas fa-clock text-muted"})," ",i.a.secToHms(f)||"n/a"),Object(n.h)("br",null)))):Object(n.h)(t,null,Object(n.h)("nobr",null,Object(n.h)("i",{style:"width: 20px;",class:"fas fa-road text-muted"})," ",i.a.format(d.distanceKm,1)||"n/a"," ",Object(n.h)("span",{class:"font-weight-lighter"},"km")),Object(n.h)("nobr",null,Object(n.h)("i",{style:"width: 20px;",class:"fas fa-mountain text-muted"})," ",i.a.format(d.elevation,0)||"n/a"," ",Object(n.h)("span",{class:"font-weight-lighter"},"m")),Object(n.h)("div",{class:"progress mb-1",style:"height: 3px;"},Object(n.h)("div",{class:"progress-bar "+(b>=99?"bg-success":""),role:"progressbar",style:"width: "+b+"%","aria-valuenow":""+b,"aria-valuemin":"0","aria-valuemax":"100"})),S.nonstop?Object(n.h)(t,null,Object(n.h)("nobr",null,Object(n.h)("i",{style:"width: 20px;",class:"fas fa-clock text-muted"})," ",i.a.secToHms(x)||"n/a"),Object(n.h)("nobr",null,Object(n.h)("i",{style:"width: 20px;",class:"fas fa-moon text-muted"})," ",i.a.secToHms(k.totalRest)||"n/a")):Object(n.h)(t,null,1===j?Object(n.h)(t,null,Object(n.h)("nobr",{class:"font-weight-bold"},Object(n.h)("i",{style:"width: 20px;",class:"fas fa-clock text-muted"})," ",i.a.secToHms(f)||"n/a"),Object(n.h)("br",null)):Object(n.h)(t,null,Object(n.h)("nobr",null,Object(n.h)("i",{style:"width: 20px;",class:"fas fa-clock text-muted"})," ",i.a.secToHms(d.duration)||"n/a"),Object(n.h)("br",null))))))))}))))),Object(n.h)("div",{class:"text-center text-muted"},Object(n.h)("small",null,"no"===g&&Object(n.h)(t,null,"OBS! Ref reglene så er det ikke lov til å endre treningsøktene som er med i konkurransen etter at løpet er ferdig.",Object(n.h)("br",null),"Forsøk på dette vil resultere i automatisk deplassering på listene."),"en"===g&&Object(n.h)(t,null,"IMPORTANT! According to the rules: It is NOT allowed to try alter the workouts related to the competition after the race has ended.",Object(n.h)("br",null),"Attempts will result in automatic deplacement on the resultlists."))))}))),O&&Object(n.h)(t,null,Object(n.h)("button",{class:"btn btn-danger btn-lg float-right m-4",onClick:this.lockAllWorkoutsInRace},"Lock all workouts in this race"),Object(n.h)("xmp",{class:"m-5"},JSON.stringify(c,null,4))),Object(n.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-3 mb-2"},Object(n.h)("a",{class:"btn btn-lg btn-block btn-primary",href:"https://homerunrace.no/index#/race/"+S.id+"/results"},"All results"))))},a}(n.Component))||r;e.a=O}).call(this,a("hosL").Fragment)}}]);
//# sourceMappingURL=route-app-races.chunk.111cd.js.map