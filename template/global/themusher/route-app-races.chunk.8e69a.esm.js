(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{t1gC:function(e,t,a){"use strict";a.r(t),function(e){function c(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);t&&(c=c.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,c)}return a}function s(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?c(Object(a),!0).forEach((function(t){l(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):c(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function l(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var i,n=a("hosL"),o=a("Utv1"),r=a("/eY4"),h=a("OhSV"),b=a("Y3FI"),d=a("ZOvn");const p=d.a.marginTop(!1),u=d.a.marginTopBack(!1),m=d.a.marginBottom(),O=(d.a.subMenuMarginTop(),{isLoading:!1});let g=Object(r.a)(i=class extends n.Component{constructor(e){var t;super(e),t=this,this.signupToRace=async function(){const{raceStore:e,userStore:a}=t.props.stores,{user:c}=a,{signup:l}=e,{raceid:i}=t.props;await e.addContestant({id:i,classId:l.class,newContestant:s({team:c.team,firstname:c.firstname,lastname:c.lastname,sportsClub:c.sportsClub,email:c.email,cellphone:c.cellphone,facebook:c.facebook,instagram:c.instagram},l)})},this.updateSignup=e=>{const t=e.target.id,a=e.target.value,{raceStore:c}=this.props.stores;c.updateObjectKeyValue("signup",t,a)},this.editSignup=e=>{const{raceid:t}=this.props,{raceStore:a}=this.props.stores,c=e.target.id,s=e.target.value,{classid:l,contestantid:i}=e.target.dataset;a.updateObjectKeyValue("signup",c,s);const n={raceClassId:l,contestantId:i,["raceClassContestant"+o.a.ucfirst(c)]:s};clearTimeout(this.updateTimer[c]),this.updateTimer[c]=setTimeout((async function(){a.editClass({id:t,data:n})}),500)},this.likeRace=async function(){const{raceStore:e}=t.props.stores,{race:a}=e;await e.likeRace({id:a.id})},this.toggleAddComment=e=>{const t=e.target.parentElement.dataset.id||e.target.dataset.id,{showAddComment:a}=this.state;this.setState({showAddComment:!a},()=>{this.inputRef[t]&&this.inputRef[t].focus()})},this.back=()=>{Object(b.route)("/",!0)},this.state=s({},O),this.inputRef={},this.updateTimer={}}async loadRace(e=this.props){this.setState({isLoading:!0});const{raceStore:t,userStore:a}=e.stores,{user:c={}}=a,{raceid:l}=e;await t.load(l),this.setState({isLoading:!1});let i={};const{race:n}=t;if(n.classes&&c&&c.email)for(let e=0,t=n.classes.length;e<t;e+=1){const t=n.classes[e];if(t.contestants){const e=t.contestants.findIndex(e=>e.email===c.email);e>-1&&(i=s({},t.contestants[e]))}}t.updateKeyValue("signup",i)}componentDidMount(){this.loadRace()}componentWillReceiveProps(e){e.raceid!==this.props.raceid&&this.loadRace(e)}render(){const{userStore:t,raceStore:a,appState:c}=this.props.stores,{user:s={},teams:l=[]}=t,{race:i,signup:r}=a,{language:b="no"}=c;let d={};r.class&&(d=a.getRaceClassById(r.class));const O=new Date;return Object(n.h)("div",{class:"container-fluid",style:`margin-bottom: ${m}; margin-top: ${p};`},Object(n.h)("div",{class:"d-flex justify-content-between mb-2"},Object(n.h)("div",null,Object(n.h)("button",{class:"btn btn-link pl-0 fixed-top",style:`top: ${u}; left: 5px; font-size: 25px; width: 40px;`,onClick:this.back},Object(n.h)("i",{class:"fas fa-arrow-circle-left"}))),Object(n.h)("div",null,Object(n.h)("h5",{class:"text-muted"}," "))),Object(n.h)("h2",{class:"mb-0"},Object(n.h)(h.c,{id:"races.signup"},"Påmelding")," ",Object(n.h)("span",{class:"font-weight-lighter",style:"letter-spacing: -1px;"}," - ",i.title)),Object(n.h)("div",{class:"mb-4"},i.signupStartDate&&Object(n.h)(e,null,Object(n.h)(h.c,{id:"races.periode"},"Periode"),": ",o.a.formatDate(i.signupStartDate,{locale:"no-NB",hour12:!1,hour:"2-digit",minute:"2-digit"})),i.signupEndDate&&Object(n.h)(e,null," - ",o.a.formatDate(i.signupEndDate,{locale:"no-NB",hour12:!1,hour:"2-digit",minute:"2-digit"}))),O>=new Date(i.signupStartDate)&&O<=new Date(i.signupEndDate)?Object(n.h)(e,null,Object(n.h)("span",{class:"font-weight-lighter"},Object(n.h)(h.c,{id:"races.signed-in-as"},"Logget inn som"),":")," ",s.email,Object(n.h)("br",null),Object(n.h)("br",null),r.id?Object(n.h)(e,null,Object(n.h)("div",{class:"font-weight-bold mb-4"},Object(n.h)("i",{class:"fas fa-check text-success"})," ",Object(n.h)(h.c,{id:"races.signed-up"},"Din bruker er påmeldt!"),Object(n.h)("br",null)),i.signuppayment&&Object(n.h)(e,null,Object(n.h)("div",{class:"form-group row my-0"},Object(n.h)("label",{for:"cellphone",class:"col-2 col-form-label text-right font-weight-lighter"},Object(n.h)(h.c,{id:"races.signup"},"Påmelding")),Object(n.h)("div",{class:"col-10"},r.paidSignupfee?Object(n.h)("div",{class:"py-2"},Object(n.h)(h.c,{id:"races.paid"},"Betalt"),": ",o.a.formatDate(r.paidSignupfee),Object(n.h)("i",{class:"fas fa-check text-success ml-3"})):Object(n.h)(e,null,Object(n.h)("div",{class:"alert alert-danger mb-1",role:"alert"},Object(n.h)("h5",null,Object(n.h)("span",{class:"font-weight-lighter"},Object(n.h)(h.c,{id:"races.payment-info"},"Betaling påmelding"),":")," ",function(e="",t,a="no"){if(o.a.isString(e)){let c=e;const s=new RegExp(`<${a}>(.*?)</${a}>`,"s").exec(c);if(s){const e=s[0];e&&(c=e)}return c.replace(/\{\{img\.(\d+)\s*(\d*)\}\}/g,(function(e,a,c){return o.a.isObject(t[a])?`<img src=${t[a].s3XXLargeLink} class='img-fluid float-right' style='width: ${c||40}%;' />`:""}))}return e}(i.signuppayment,i.images,b),Object(n.h)("br",null),d.signupfee||i.signupfee," NOK")))))),Object(n.h)("div",{class:"clearfix mt-2"},Object(n.h)("span",{class:"font-weight-lighter float-right"},Object(n.h)(h.c,{id:"races.click-to-change"},"Klikk for å endre info i påmeldingen."))),Object(n.h)("div",{class:"form-group row my-0"},Object(n.h)("label",{for:"cellphone",class:"col-2 col-form-label text-right font-weight-lighter"},Object(n.h)(h.c,{id:"races.cellphone"},"Mobil")),Object(n.h)("div",{class:"col-10"},Object(n.h)(h.b,null,Object(n.h)("input",{type:"text",class:"form-control-plaintext",id:"cellphone","data-classid":r.class,"data-contestantid":r.id,onInput:this.editSignup,value:r.cellphone,placeholder:Object(n.h)(h.c,{id:"races.cellphone-help"},"Hva er mobilnummer ditt?")})))),Object(n.h)("div",{class:"form-group row my-0"},Object(n.h)("label",{for:"firstname",class:"col-2 col-form-label text-right font-weight-lighter"},Object(n.h)(h.c,{id:"races.firstname"},"Fornavn")),Object(n.h)("div",{class:"col-10"},Object(n.h)(h.b,null,Object(n.h)("input",{type:"text",class:"form-control-plaintext",id:"firstname","data-classid":r.class,"data-contestantid":r.id,onInput:this.editSignup,value:r.firstname,placeholder:Object(n.h)(h.c,{id:"races.firstname-help"},"Hva er fornavnet ditt?")})))),Object(n.h)("div",{class:"form-group row my-0"},Object(n.h)("label",{for:"lastname",class:"col-2 col-form-label text-right font-weight-lighter"},Object(n.h)(h.c,{id:"races.lastname"},"Etternavn")),Object(n.h)("div",{class:"col-10"},Object(n.h)(h.b,null,Object(n.h)("input",{type:"text",class:"form-control-plaintext",id:"lastname","data-classid":r.class,"data-contestantid":r.id,onInput:this.editSignup,value:r.lastname,placeholder:Object(n.h)(h.c,{id:"races.lastname-help"},"Hva er etternavnet ditt?")})))),Object(n.h)("div",{class:"form-group row my-0"},Object(n.h)("label",{for:"sportsClub",class:"col-2 col-form-label text-right font-weight-lighter"},Object(n.h)(h.c,{id:"races.sportsclub"},"Klubb")),Object(n.h)("div",{class:"col-10"},Object(n.h)(h.b,null,Object(n.h)("input",{type:"text",class:"form-control-plaintext",id:"sportsClub","data-classid":r.class,"data-contestantid":r.id,onInput:this.editSignup,value:r.sportsClub,placeholder:Object(n.h)(h.c,{id:"races.sportsClub-help"},"Hvilken klubb tilhører du?")})))),Object(n.h)("div",{class:"form-group row my-0"},Object(n.h)("label",{for:"facebook",class:"col-2 col-form-label text-right font-weight-lighter"},Object(n.h)(h.c,{id:"races.facebook"},"Facebook")),Object(n.h)("div",{class:"col-10"},Object(n.h)(h.b,null,Object(n.h)("input",{type:"text",class:"form-control-plaintext",id:"facebook","data-classid":r.class,"data-contestantid":r.id,onInput:this.editSignup,value:r.facebook,placeholder:Object(n.h)(h.c,{id:"races.facebook-help"},"Hva er Facebook brukernavnet ditt?")})))),Object(n.h)("div",{class:"form-group row my-0"},Object(n.h)("label",{for:"instagram",class:"col-2 col-form-label text-right font-weight-lighter"},Object(n.h)(h.c,{id:"races.instagram"},"Instagram")),Object(n.h)("div",{class:"col-10"},Object(n.h)(h.b,null,Object(n.h)("input",{type:"text",class:"form-control-plaintext",id:"instagram","data-classid":r.class,"data-contestantid":r.id,onInput:this.editSignup,value:r.instagram,placeholder:Object(n.h)(h.c,{id:"races.instagram-help"},"Hva er Instagram brukernavnet ditt?")})))),Object(n.h)("div",{class:"form-group row my-0"},Object(n.h)("label",{for:"team",class:"col-2 col-form-label text-right font-weight-lighter"},Object(n.h)(h.c,{id:"races.team"},"Team")),Object(n.h)("div",{class:"col-10"},Object(n.h)("select",{class:"form-control-plaintext",id:"team","aria-describedby":"teamHelp","data-classid":r.class,"data-contestantid":r.id,onInput:this.editSignup,value:r.team},Object(n.h)("option",{value:""},"-- ",Object(n.h)(h.c,{id:"races.choose-team"},"Velg team")," --"),l.map(e=>Object(n.h)("option",{value:e.id},e.name))))),Object(n.h)("div",{class:"form-group row my-0"},Object(n.h)("label",{for:"team",class:"col-2 col-form-label text-right font-weight-lighter"},Object(n.h)(h.c,{id:"races.class"},"Klasse")),Object(n.h)("div",{class:"col-10"},Object(n.h)("select",{class:"form-control-plaintext",id:"class","aria-describedby":"classHelp",onInput:this.editSignup,value:r.class,disabled:!0},Object(n.h)("option",{value:""},"-- ",Object(n.h)(h.c,{id:"races.choose-class"},"Velg klasse")," --"),i.classes&&i.classes.sort((e,t)=>e.distance-t.distance).map(t=>Object(n.h)(e,null,Object(n.h)("option",{value:t.id},t.title," - ",t.distance," km - Påmelding: ",t.signupfee||i.signupfee," NOK"))))))):Object(n.h)(e,null,Object(n.h)("div",{class:"form-group"},Object(n.h)("label",{for:"cellphone"},Object(n.h)(h.c,{id:"races.cellphone"},"Mobil")),Object(n.h)("input",{type:"text",class:"form-control",id:"cellphone","aria-describedby":"cellphoneHelp",placeholder:s.cellphone,onInput:this.updateSignup,value:r.cellphone}),Object(n.h)("small",{id:"cellphoneHelp",class:"form-text text-muted"},Object(n.h)(h.c,{id:"races.cellphone-help"},"'Hva er mobilnummer ditt?'"))),Object(n.h)("div",{class:"row"},Object(n.h)("div",{class:"col"},Object(n.h)("div",{class:"form-group"},Object(n.h)("label",{for:"firstname"},Object(n.h)(h.c,{id:"races.firstname"},"Fornavn")),Object(n.h)("input",{type:"text",class:"form-control",id:"firstname","aria-describedby":"firstnameHelp",placeholder:s.firstname,onInput:this.updateSignup,value:r.firstname}),Object(n.h)("small",{id:"firstnameHelp",class:"form-text text-muted"},Object(n.h)(h.c,{id:"races.firstname-help"},"Hva er fornavnet ditt?")))),Object(n.h)("div",{class:"col"},Object(n.h)("div",{class:"form-group"},Object(n.h)("label",{for:"lastname"},Object(n.h)(h.c,{id:"races.lastname"},"Etternavn")),Object(n.h)("input",{type:"text",class:"form-control",id:"lastname","aria-describedby":"lastnameHelp",placeholder:s.lastname,onInput:this.updateSignup,value:r.lastname}),Object(n.h)("small",{id:"lastnameHelp",class:"form-text text-muted"},Object(n.h)(h.c,{id:"races.lastname-help"},"Hva er etternavnet ditt?"))))),Object(n.h)("div",{class:"form-group"},Object(n.h)("label",{for:"sportsClub"},Object(n.h)(h.c,{id:"races.sportsclub"},"Klubb")),Object(n.h)("input",{type:"text",class:"form-control",id:"sportsClub","aria-describedby":"sportsClubHelp",placeholder:s.sportsClub,onInput:this.updateSignup,value:r.sportsClub}),Object(n.h)("small",{id:"sportsClubHelp",class:"form-text text-muted"},Object(n.h)(h.c,{id:"races.sportsClub-help"},"Hvilken klubb tilhører du?"))),Object(n.h)("div",{class:"row"},Object(n.h)("div",{class:"col"},Object(n.h)("div",{class:"form-group"},Object(n.h)("label",{for:"facebook"},Object(n.h)(h.c,{id:"races.facebook"},"Facebook")),Object(n.h)("input",{type:"text",class:"form-control",id:"facebook","aria-describedby":"facebookHelp",placeholder:s.facebook,onInput:this.updateSignup,value:r.facebook}),Object(n.h)("small",{id:"facebookHelp",class:"form-text text-muted"},Object(n.h)(h.c,{id:"races.facebook-help"},"Hva er Facebook brukernavnet ditt?")))),Object(n.h)("div",{class:"col"},Object(n.h)("div",{class:"form-group"},Object(n.h)("label",{for:"instagram"},Object(n.h)(h.c,{id:"races.instagram"},"Instagram")),Object(n.h)("input",{type:"text",class:"form-control",id:"instagram","aria-describedby":"instagramHelp",placeholder:s.instagram,onInput:this.updateSignup,value:r.instagram}),Object(n.h)("small",{id:"instagramHelp",class:"form-text text-muted"},Object(n.h)(h.c,{id:"races.instagram-help"},"Hva er Instagram brukernavnet ditt?"))))),Object(n.h)("div",{class:"form-group"},Object(n.h)("label",{for:"team"},Object(n.h)(h.c,{id:"races.team"},"Team")),Object(n.h)("select",{class:"form-control",id:"team","aria-describedby":"teamHelp",onInput:this.updateSignup,value:r.team},Object(n.h)("option",{value:""},"-- ",Object(n.h)(h.c,{id:"races.choose-team"},"Velg team")," --"),l.map(e=>Object(n.h)("option",{value:e.id},e.name))),Object(n.h)("small",{id:"teamHelp",class:"form-text text-muted"},Object(n.h)(h.c,{id:"races.choose-team-help"},"Velg fra dine team"))),Object(n.h)("div",{class:"form-group"},Object(n.h)("label",{for:"class"},Object(n.h)(h.c,{id:"races.class"},"Klasse")),Object(n.h)("select",{class:"form-control",id:"class","aria-describedby":"classHelp",onInput:this.updateSignup,value:r.class},Object(n.h)("option",{value:""},"-- ",Object(n.h)(h.c,{id:"races.choose-class"},"Velg klasse")," --"),i.classes&&i.classes.map(t=>Object(n.h)(e,null,Object(n.h)("option",{value:t.id},t.title," - ",t.distance," km - Påmelding: ",t.signupfee||i.signupfee," NOK")))),Object(n.h)("small",{id:"classHelp",class:"form-text text-muted"},Object(n.h)(h.c,{id:"races.choose-class-help"},"Velg ønsket klasse."))),Object(n.h)("div",{class:"form-group form-check"},Object(n.h)("input",{type:"checkbox",class:"form-check-input",id:"termsAndAgreement",onInput:this.updateSignup,checked:r.termsAndAgreement,value:!0}),Object(n.h)("label",{class:"form-check-label",for:"termsAndAgreement"},Object(n.h)(h.c,{id:"races.agreement-accept"},"Jeg har lest og godtar reglene for løpet."))),Object(n.h)("button",{type:"button",class:"btn btn-primary",onClick:this.signupToRace},Object(n.h)(h.c,{id:"races.do-signup"},"Meld meg på")))):Object(n.h)(e,null,O<new Date(i.signupStartDate)?Object(n.h)(e,null,Object(n.h)("h5",{class:"mt-4"},Object(n.h)("i",{class:"fas fa-exclamation-circle"})," ",Object(n.h)(h.c,{id:"races.signup-not-open-yet"},"Påmeldingen har ikke åpnet ennå!")),Object(n.h)("p",{class:"mt-4"},Object(n.h)(h.c,{id:"races.signup-opening"},"Påmeldingen åpner"),":",Object(n.h)("br",null),Object(n.h)("span",{class:"display-4"},o.a.formatDate(i.signupStartDate,{locale:"no-NB",hour12:!1,hour:"2-digit",minute:"2-digit"})))):Object(n.h)(e,null,Object(n.h)("h5",{class:"mt-4 mb-4"},Object(n.h)("i",{class:"fas fa-exclamation-circle"})," ",Object(n.h)(h.c,{id:"races.signup-closed"},"Påmeldingen er stengt!")))))}})||i;t.default=g}.call(this,a("hosL").Fragment)}}]);
//# sourceMappingURL=route-app-races.chunk.8e69a.esm.js.map