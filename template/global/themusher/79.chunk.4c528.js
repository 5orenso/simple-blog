(window.webpackJsonp=window.webpackJsonp||[]).push([[79],{"4dUO":function(t,e,s){"use strict";function n(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,n)}return s}function o(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}var r,i,c=s("hosL"),a=s("Utv1"),l=s("/eY4"),m=s("OhSV"),d=s("go65"),b=(s("ETxl"),s("ZOvn"),Object(l.a)(r=function(t){function e(){for(var e,s=arguments.length,n=new Array(s),o=0;o<s;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))||this).commentNews=function(){return new Promise((function(t,s){var n,o,r,i,c,a;return r=void 0===(o=(n=e.props).callback)?function(){}:o,i=e.props.news,c=e.state.comment,Promise.resolve(e.props.stores.newsStore.commentReplyNews({id:i.id,commentId:n.commentId,comment:void 0===c?"":c})).then((function(n){try{return(a=n)&&200===a.status&&(e.setState({comment:""}),r({news:i,response:a})),t()}catch(t){return s(t)}}),s)}))},e}var s,n;return n=t,(s=e).prototype=Object.create(n.prototype),s.prototype.constructor=s,s.__proto__=n,e.prototype.render=function(){var t=this.props.inputRef,e=this.state.comment,s=this.props.stores.userStore.user,n=void 0===s?{}:s,o=n.firstname?""+a.a.ucfirst(n.firstname,!0)+a.a.ucfirst(n.lastname,!0):""+a.a.ucfirst(n.email||"",!0),r=n.image||(n.images?n.images[0]:void 0);return Object(c.h)("div",{class:"w-100"},Object(c.h)("div",{class:"d-flex mb-0 position-relative w-100"},Object(c.h)("div",{class:"text-center border rounded-circle imageRounded imageRoundedThumb",style:(r?"background-image: url('"+r.s3SmallLink+"'); background-size: cover;":"")+" border-width: 3px !important;"},!r&&Object(c.h)("span",{class:"font-weight-lighter",style:"font-size: 15px;"},o)),Object(c.h)("div",{class:"col pl-3",style:"line-height: 1.2em;"},Object(c.h)("div",{class:"d-flex bd-highlight"},Object(c.h)("div",{class:"p-0 w-100 bd-highlight"},Object(c.h)("label",{class:"sr-only",for:"inlineFormInput"},Object(c.h)(m.c,{id:"comments.comment"},"Kommentar")),Object(c.h)("div",{class:"border rounded rounded-lg position-relative"},Object(c.h)(m.b,null,Object(c.h)("input",{class:"form-control-plaintext px-2",type:"text",placeholder:Object(c.h)(m.c,{id:"comments.write-comment"},"Skriv en kommentar..."),onInput:Object(d.a)(this,"comment"),value:e,ref:t})))),Object(c.h)("div",{class:"p-0 pl-2 flex-shrink-1 bd-highlight"},Object(c.h)("button",{type:"button",class:"btn btn-sm btn-primary mb-2",onClick:this.commentNews},Object(c.h)("i",{class:"fas fa-paper-plane"})))))))},e}(c.Component))||r),h={showAddComment:{},showAllComments:!1,showAllReplies:{}},p=Object(l.a)(i=function(t){function e(e){var s;return(s=t.call(this,e)||this).likeComment=function(t){return new Promise((function(e,n){var o,r,i,c,a;return r=void 0===(o=s.props.callback)?function(){}:o,i=t.target.parentElement.dataset.id||t.target.dataset.id,c=s.props.news,Promise.resolve(s.props.stores.newsStore.likeNewsComment({id:c.id,commentId:i})).then((function(t){try{return(a=t)&&200===a.status&&r({news:c,commentId:i,response:a}),e(!0)}catch(t){return n(t)}}),n)}))},s.likeReply=function(t){return new Promise((function(e,n){var o,r,i,c,a;return r=void 0===(o=s.props.callback)?function(){}:o,i=t.target.parentElement.dataset.comment||t.target.dataset.comment,c=s.props.news,Promise.resolve(s.props.stores.newsStore.likeNewsCommentReply({id:c.id,replyId:t.target.parentElement.dataset.id||t.target.dataset.id,commentId:i})).then((function(t){try{return(a=t)&&200===a.status&&r({news:c,commentId:i,response:a}),e()}catch(t){return n(t)}}),n)}))},s.replyComment=function(t){return new Promise((function(e){var n=t.target.parentElement.dataset.id||t.target.dataset.id,o=s.state.showAddComment;return o[n]=!o[n],s.setState({showAddComment:o},(function(){s.inputRef[n]&&s.inputRef[n].focus()})),e()}))},s.toggleComments=function(){s.setState({showAllComments:!s.state.showAllComments})},s.toggleReplies=function(t){var e=t.target.parentElement.dataset.id||t.target.dataset.id,n=s.state.showAllReplies;n[e]=!n[e],s.setState({showAllReplies:n})},s.state=function(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?n(Object(s),!0).forEach((function(e){o(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):n(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}({},h),s.inputRef={},s}var s,r;return r=t,(s=e).prototype=Object.create(r.prototype),s.prototype.constructor=s,s.__proto__=r,e.prototype.render=function(){var t=this,e=this.state,s=e.showAddComment,n=e.showAllComments,o=e.showAllReplies,r=this.props,i=r.news,l=r.callback,d=void 0===l?function(){}:l,h=r.col,p=void 0===h?12:h,u=r.offset,f=void 0===u?0:u,g=r.compact,O=this.props.stores.userStore.user,j=[],v=0,w=0;if(i.comments){if(v=i.comments.length,n)j=i.comments;else j=i.comments.slice(Math.max(v-(void 0!==g&&g?0:2),0));w=j.length}return Object(c.h)("div",{class:"col-"+p+" offset-"+f+" col-sm-8 col-lg-6 offset-sm-2 offset-lg-3"},n&&Object(c.h)("div",null,Object(c.h)("button",{class:"btn btn-sm btn-link py-0 mb-2",onClick:this.toggleComments},Object(c.h)(m.c,{id:"comments.hide-all-comments"},"Skjul alle kommentarene."))),i&&j&&j.reverse().map((function(e){var n=e.user,r=void 0===n?{}:n,l=r.firstname?""+a.a.ucfirst(r.firstname,!0)+a.a.ucfirst(r.lastname,!0):""+a.a.ucfirst(r.email||"",!0),h=r.firstname?r.firstname+" "+r.lastname:""+r.email,p=r.image||(r.images?r.images[0]:void 0),u=e.likes&&e.likes.findIndex((function(t){return t.user===O.id}))>-1,f=[],g=0,j=0;return e.comments&&(g=e.comments.length,j=(f=o[e.id]?e.comments:e.comments.slice(0,void 0)).length),Object(c.h)("div",{class:"row"},Object(c.h)("div",{class:"col-12 d-flex mb-2 position-relative"},Object(c.h)("div",{class:"text-center border rounded-circle imageRounded imageRoundedSmall",style:(p?'background-image: url("'+p.s3SmallLink+'"); background-size: cover;':"")+" border-width: 3px !important;"},!r.image&&Object(c.h)("span",{class:"font-weight-lighter",style:"font-size: 15px;"},l)),Object(c.h)("div",{class:"flex-grow-1 pl-3 pt-0",style:"line-height: 1.2em;"},Object(c.h)("div",{class:"bg-light p-2 rounded-lg"},Object(c.h)("h5",{class:"font-weight-bold mb-0",style:"font-size: 1.0em;"},h),e.comment),Object(c.h)("small",null,Object(c.h)("button",{class:"btn btn-sm btn-link py-0 "+(u?"text-primary":""),onClick:t.likeComment,"data-id":e.id},Object(c.h)(m.c,{id:"comments.like"},"Lik")),"-",Object(c.h)("button",{class:"btn btn-sm btn-link py-0",onClick:t.replyComment,"data-id":e.id},Object(c.h)(m.c,{id:"comments.comment-add"},"Kommentar")),"-",Object(c.h)("button",{class:"btn btn-sm btn-link py-0 disabled"},a.a.formatDistance(e.createdDate,new Date,{locale:"no-NB"})))),e.likes&&e.likes.length>0&&Object(c.h)("small",{class:"position-absolute bg-light shadow-sm rounded-lg py-0 px-1",style:"bottom: 20px; right: 15px;"},Object(c.h)("i",{class:"fas fa-thumbs-up text-primary"})," ",e.likes.length)),Object(c.h)("div",{class:"col-11 offset-1 mb-2"},e&&f&&f.map((function(s){var n=s.user,o=void 0===n?{}:n,r=o.firstname?""+a.a.ucfirst(o.firstname,!0)+a.a.ucfirst(o.lastname,!0):""+a.a.ucfirst(o.email||"",!0),i=o.firstname?o.firstname+" "+o.lastname:""+o.email,l=o.image||(o.images?o.images[0]:void 0),d=s.likes&&s.likes.findIndex((function(t){return t.user===O.id}))>-1;return Object(c.h)("div",{class:"row"},Object(c.h)("div",{class:"col-12 d-flex mb-2 position-relative"},Object(c.h)("div",{class:"text-center border rounded-circle imageRounded imageRoundedThumb",style:(l?'background-image: url("'+l.s3SmallLink+'"); background-size: cover;':"")+" border-width: 3px !important;"},!o.image&&Object(c.h)("span",{class:"font-weight-lighter",style:"font-size: 15px;"},r)),Object(c.h)("div",{class:"flex-grow-1 pl-3 pt-0",style:"line-height: 1.2em;"},Object(c.h)("div",{class:"bg-light p-2 rounded-lg"},Object(c.h)("h5",{class:"font-weight-bold mb-0",style:"font-size: 1.0em;"},i),s.comment),Object(c.h)("small",null,Object(c.h)("button",{class:"btn btn-sm btn-link py-0 "+(d?"text-primary":""),onClick:t.likeReply,"data-comment":e.id,"data-id":s.id},Object(c.h)(m.c,{id:"comments.like"},"Lik")),"-",Object(c.h)("button",{class:"btn btn-sm btn-link py-0",onClick:t.replyComment,"data-id":e.id},Object(c.h)(m.c,{id:"comments.comment-add"},"Kommentar")),"-",Object(c.h)("button",{class:"btn btn-sm btn-link py-0 disabled"},a.a.formatDistance(s.createdDate,new Date,{locale:"no-NB"})))),s.likes&&Object(c.h)("small",{class:"position-absolute bg-light shadow-sm rounded-lg py-0 px-1",style:"bottom: 20px; right: 15px;"},Object(c.h)("i",{class:"fas fa-thumbs-up text-primary"})," ",s.likes.length)))})),g-j>0&&Object(c.h)("div",null,Object(c.h)("button",{class:"btn btn-sm btn-link py-0",onClick:t.toggleReplies,"data-id":e.id},Object(c.h)(m.c,{id:"comments.show-more",fields:{more:g-j}},"Vis ",g-j," flere kommentarer...")))),s[e.id]&&Object(c.h)("div",{class:"col-11 offset-1 d-flex mb-2 position-relative"},Object(c.h)(b,{stores:t.props.stores,news:i,callback:d,commentId:e.id,inputRef:function(s){return t.inputRef[e.id]=s}})))})),v-w>0&&Object(c.h)("div",null,Object(c.h)("button",{class:"btn btn-sm btn-link py-0",onClick:this.toggleComments},Object(c.h)(m.c,{id:"comments.show-more",fields:{more:v-w}},"Vis ",v-w," flere kommentarer..."))),n&&Object(c.h)("div",null,Object(c.h)("button",{class:"btn btn-sm btn-link py-0",onClick:this.toggleComments},Object(c.h)(m.c,{id:"comments.hide-all-comments"},"Skjul alle kommentarene."))))},e}(c.Component))||i;e.a=p},"88ZV":function(t,e,s){"use strict";function n(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,n)}return s}function o(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}s.r(e);var r,i=s("hosL"),c=(s("Utv1"),s("/eY4")),a=s("OhSV"),l=s("Y3FI"),m=s("Fg+7"),d=s("4dUO"),b=s("PWmE"),h=s("ZOvn"),p=h.a.marginTop(!1),u=h.a.marginTopBack(!1),f=h.a.marginBottom(),g={isLoading:!1,showAddComment:!1},O=Object(c.a)(r=function(t){function e(e){var s;return(s=t.call(this,e)||this).likeNews=function(){return new Promise((function(t,e){var n;return n=s.props.stores.newsStore,Promise.resolve(n.likeNews({id:n.news.id})).then((function(s){try{return s,t()}catch(t){return e(t)}}),e)}))},s.toggleAddComment=function(t){var e=t.target.parentElement.dataset.id||t.target.dataset.id;s.setState({showAddComment:!s.state.showAddComment},(function(){s.inputRef[e]&&s.inputRef[e].focus()}))},s.back=function(){Object(l.route)("/news")},s.state=function(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?n(Object(s),!0).forEach((function(e){o(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):n(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}({},g),s.inputRef={},s}var s,r;r=t,(s=e).prototype=Object.create(r.prototype),s.prototype.constructor=s,s.__proto__=r;var c=e.prototype;return c.loadNews=function(t){return new Promise(function(e,s){return void 0===t&&(t=this.props),this.setState({isLoading:!0}),Promise.resolve(this.props.stores.newsStore.load(t.id)).then(function(){try{return this.setState({isLoading:!1}),e()}catch(t){return s(t)}}.bind(this),s)}.bind(this))},c.componentDidMount=function(){this.loadNews()},c.render=function(){var t=this,e=this.state.showAddComment,s=this.props.stores,n=s.userStore,o=n.isAdmin,r=s.newsStore.news,c=n.user,l=r.likes,h=void 0===l?[]:l,g=r.comments,O=void 0===g?[]:g,j=r.likes&&r.likes.findIndex((function(t){return t.user===c.id}))>-1;return Object(i.h)("div",{class:"container-fluid",style:"margin-bottom: "+f+"; margin-top: "+p+";"},Object(i.h)("div",{class:"d-flex justify-content-between mb-2"},Object(i.h)("div",null,Object(i.h)("button",{class:"btn btn-link pl-0 fixed-top text-primary",style:"top: "+u+"; left: 5px; font-size: 35px; width: 45px;",onClick:this.back},Object(i.h)("i",{class:"fas fa-arrow-circle-left"}))),Object(i.h)("div",null,Object(i.h)("h5",{class:"text-muted"},Object(i.h)(a.c,{id:"news.heading"},"Siste nytt"))),Object(i.h)("div",null,o&&Object(i.h)("a",{class:"btn btn-sm btn-primary float-right ml-2",href:"/news/edit/"+r.id},Object(i.h)("i",{class:"fas fa-edit"})," ",Object(i.h)(a.c,{id:"news.edit"},"Endre")),o&&Object(i.h)("a",{class:"btn btn-sm btn-success float-right ml-2",href:"/news/edit/new"},Object(i.h)("i",{class:"fas fa-plus"})," ",Object(i.h)(a.c,{id:"news.create"},"Ny")))),Object(i.h)("div",{class:"row"},Object(i.h)("div",{class:"col-12"},Object(i.h)(m.a,{stores:this.props.stores,news:r})),Object(i.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-3"},h&&h.length>0&&Object(i.h)("small",{class:"bg-light shadow-sm rounded-lg py-0 px-1",style:"bottom: 20px; right: 15px;"},Object(i.h)("i",{class:"fas fa-thumbs-up text-primary"})," ",h.length),O&&O.length>0&&Object(i.h)("small",{class:"float-right bg-light shadow-sm rounded-lg py-0 px-1",style:"bottom: 20px; right: 15px;"},Object(i.h)("i",{class:"fas fa-comment text-primary"})," ",O.length)),Object(i.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-2 mb-3"},Object(i.h)("div",{class:"row"},Object(i.h)("div",{class:"col-6 text-center"},Object(i.h)("button",{type:"button",class:"btn btn-outline-"+(j?"primary":"secondary")+" btn-lg btn-block "+(j?"text-primary":""),onClick:this.likeNews},Object(i.h)("i",{class:(j?"text-primary fas":"far")+" fa-thumbs-up"})," Like")),Object(i.h)("div",{class:"col-6 text-center"},Object(i.h)("button",{type:"button",class:"btn btn-outline-secondary btn-lg btn-block","data-id":r.id,onClick:this.toggleAddComment},Object(i.h)("i",{class:"fas fa-comment"})," Comment")))),e&&Object(i.h)(b.a,{stores:this.props.stores,news:r,inputRef:function(e){return t.inputRef[r.id]=e}}),Object(i.h)(d.a,{stores:this.props.stores,news:r,cols:"12"})),Object(i.h)("div",{class:"row"},Object(i.h)("div",{class:"col-12"},Object(i.h)("a",{href:"/news",class:"btn btn-secondary"},Object(i.h)("i",{class:"fas fa-arrow-left mr-2"}),Object(i.h)(a.c,{id:"news.back"},"Tilbake")))))},e}(i.Component))||r;e.default=O},ETxl:function(t){t.exports={hoverelementonly:"hoverelementonly__1mJGJ",hoverElement:"hoverElement__axh3O",hoverelementhide:"hoverelementhide__1k_qH","progress-bar-vertical":"progress-bar-vertical__1B2sC","progress-bar":"progress-bar__pnsVj",dragged:"dragged__QXO46",over:"over__1re3x",list:"list__q_emZ"}},"Fg+7":function(t,e,s){"use strict";(function(t){var n,o=s("hosL"),r=s("Utv1"),i=s("/eY4"),c=s("fh8t"),a=s.n(c),l=s("ZOvn"),m=Object(i.a)(n=function(e){function s(){return e.apply(this,arguments)||this}var n,i;return i=e,(n=s).prototype=Object.create(i.prototype),n.prototype.constructor=n,n.__proto__=i,s.prototype.render=function(){var e=this.props.news,s=this.props.stores,n=s.userStore,i=n.user.language,c=void 0===i?"en":i,m=n.isAdmin;return Object(o.h)(t,null,Object(o.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 px-0"},e.images&&e.images[0]?Object(o.h)("img",{loading:"lazy",src:e.images[0].s3LargeLink,class:"img-fluid border rounded-lg"}):"",Object(o.h)("h1",null,m&&Object(o.h)("i",{class:"fas fa-eye"+(e.active?" text-success":"-slash text-danger")+" float-right"})," ",l.a.replaceImages(e.title,e.images,c)),Object(o.h)("div",{class:"text-muted"},Object(o.h)("small",null,r.a.isoDate(e.createdDate)," - ",e.tag)),Object(o.h)("p",{class:"clearfix"},Object(o.h)("strong",null,l.a.replaceImages(e.ingress,e.images,c))),Object(o.h)(a.a,{markdown:l.a.replaceImages(e.body,e.images,c),markdownOpts:l.a.getMarkdownOptions()})))},s}(o.Component))||n;e.a=m}).call(this,s("hosL").Fragment)},PWmE:function(t,e,s){"use strict";var n,o=s("hosL"),r=s("Utv1"),i=s("/eY4"),c=s("OhSV"),a=s("go65"),l=(s("ETxl"),s("ZOvn"),Object(i.a)(n=function(t){function e(){for(var e,s=arguments.length,n=new Array(s),o=0;o<s;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))||this).commentNews=function(){return new Promise((function(t,s){var n,o,r,i,c;return o=void 0===(n=e.props.callback)?function(){}:n,r=e.props.news,i=e.state.comment,Promise.resolve(e.props.stores.newsStore.commentNews({id:r.id,comment:void 0===i?"":i})).then((function(n){try{return(c=n)&&200===c.status&&(e.setState({comment:""}),o({news:r,response:c})),t()}catch(t){return s(t)}}),s)}))},e}var s,n;return n=t,(s=e).prototype=Object.create(n.prototype),s.prototype.constructor=s,s.__proto__=n,e.prototype.render=function(){var t=this.props.inputRef,e=this.state.comment,s=this.props.stores.userStore.user,n=void 0===s?{}:s,i=n.firstname?""+r.a.ucfirst(n.firstname,!0)+r.a.ucfirst(n.lastname,!0):""+r.a.ucfirst(n.email||"",!0),l=n.image||(n.images?n.images[0]:void 0);return Object(o.h)("div",{class:"col-12 col-sm-8 col-lg-6 offset-sm-2 offset-lg-3 d-flex mb-3 position-relative"},Object(o.h)("div",{class:"d-flex mb-0 position-relative w-100"},Object(o.h)("div",{class:"text-center border rounded-circle imageRounded imageRoundedSmall",style:(l?"background-image: url('"+l.s3SmallLink+"'); background-size: cover;":"")+" border-width: 3px !important;"},!l&&Object(o.h)("span",{class:"font-weight-lighter",style:"font-size: 15px;"},i)),Object(o.h)("div",{class:"col pl-3",style:"line-height: 1.2em;"},Object(o.h)("div",{class:"d-flex bd-highlight"},Object(o.h)("div",{class:"p-0 w-100 bd-highlight"},Object(o.h)("label",{class:"sr-only",for:"inlineFormInput"},Object(o.h)(c.c,{id:"comments.comment"},"Kommentar")),Object(o.h)("div",{class:"border rounded rounded-lg position-relative"},Object(o.h)(c.b,null,Object(o.h)("input",{class:"form-control-plaintext px-2",type:"text",placeholder:Object(o.h)(c.c,{id:"comments.write-comment"},"Skriv en kommentar..."),onInput:Object(a.a)(this,"comment"),value:e,ref:t})))),Object(o.h)("div",{class:"p-0 pl-2 flex-shrink-1 bd-highlight"},Object(o.h)("button",{type:"button",class:"btn btn-primary mb-2",onClick:this.commentNews},Object(o.h)("i",{class:"fas fa-paper-plane"})))))))},e}(o.Component))||n);e.a=l}}]);
//# sourceMappingURL=79.chunk.4c528.js.map