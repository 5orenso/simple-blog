(window.webpackJsonp=window.webpackJsonp||[]).push([[40],{"+JSK":function(t,e,o){"use strict";(function(t){function r(t,e){var o=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),o.push.apply(o,r)}return o}function n(t,e,o){return e in t?Object.defineProperty(t,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[e]=o,t}var s,a=o("hosL"),i=o("Utv1"),c=o("/eY4"),l=o("OhSV"),u=o("ZOvn"),d={},h=Object(c.a)(s=function(e){function o(t){var o;return(o=e.call(this,t)||this).toggleLikes=function(){o.setState({showLikesList:!o.state.showLikesList})},o.state=function(t){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?r(Object(o),!0).forEach((function(e){n(t,e,o[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):r(Object(o)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(o,e))}))}return t}({},d),o}var s,c;return c=e,(s=o).prototype=Object.create(c.prototype),s.prototype.constructor=s,s.__proto__=c,o.prototype.render=function(){var e=this.state.showLikesList,o=this.props.stores,r=o.storyStore,n=o.teamStore,s=o.workoutStore,c=o.raceStore,d=this.props,h=d.likes,m=d.comments,p=d.type,b=void 0===p?"story":p,f=d.onTeamClick,g=void 0===f?function(){}:f;return Object(a.h)(t,null,Object(a.h)("div",{class:"d-flex justify-content-between mb-2"},h&&h.length>0&&Object(a.h)(t,null,Object(a.h)("div",{class:"d-flex flex-row flex-nowrap position-relative mr-3",style:"overflow: auto;"},Object(a.h)("span",{class:"text-muted mr-2",onClick:this.toggleLikes},Object(a.h)("i",{class:"fas fa-thumbs-up text-primary"})," ",h.length),h.slice(0,3).map((function(e){var o,l,d;"story"===b?(o=r.findPublicUser(e.user),l=r.findPublicTeamByMembers(e.user)):"team"===b?(o=n.findPublicUser(e.user),l=n.findPublicTeamByMembers(e.user)):"workout"===b?(o=s.findPublicUser(e.user),l=s.findPublicTeamByMembers(e.user)):"race"===b&&(o=c.findPublicUser(e.user),l=c.findPublicTeamByMembers(e.user)),i.a.isArray(l)&&(d=l.find((function(t){return 1===t.public})));var h=u.a.getImage({user:o,team:d,priority:"user"}),m=u.a.displayNameShort(o);return Object(a.h)(t,null,d?Object(a.h)(t,null,Object(a.h)("a",{href:"/teams/public/"+d.uuidv4,title:d.name,onClick:function(t){return g(t,d.uuidv4)}},Object(a.h)("div",{class:"text-center border rounded-circle imageRounded imageRoundedThumb",style:h?'background-image: url("'+h+'"); background-size: cover;':""},!h&&Object(a.h)("div",{class:"",style:"font-size: 12px; padding-top: 3px;"},m)))):Object(a.h)(t,null,Object(a.h)("div",{class:"text-center border rounded-circle imageRounded imageRoundedThumb",style:(h?'background-image: url("'+h+'"); background-size: cover;':"")+" opacity: 0.5;"},!h&&Object(a.h)("div",{class:"text-muted",style:"font-size: 12px; padding-top: 3px;"},m))))})),h.length>3&&Object(a.h)(t,null,Object(a.h)("span",{class:"text-muted font-weight-lighter ml-2",onClick:this.toggleLikes},Object(a.h)(l.c,{id:"likes-comments.and",fields:{total:h.length-3}},"and ",h.length-3," others."))))),m&&m.length>0&&Object(a.h)("span",{class:"float-right text-muted"},Object(a.h)("i",{class:"fas fa-comment text-primary"})," ",m.length)),e&&Object(a.h)("div",{class:"mt-3 mb-3"},h&&h.map((function(e){var o,l,d;"story"===b?(o=r.findPublicUser(e.user),l=r.findPublicTeamByMembers(e.user)):"team"===b?(o=n.findPublicUser(e.user),l=n.findPublicTeamByMembers(e.user)):"workout"===b?(o=s.findPublicUser(e.user),l=s.findPublicTeamByMembers(e.user)):"race"===b&&(o=c.findPublicUser(e.user),l=c.findPublicTeamByMembers(e.user)),i.a.isArray(l)&&(d=l.find((function(t){return 1===t.public})));var h=u.a.getImage({user:o,team:d,priority:"user"}),m=u.a.displayNameShort(o),p=u.a.displayName(o,!0);return Object(a.h)("div",{class:"d-flex flex-row position-relative font-weight-light mb-1"},d?Object(a.h)(t,null,Object(a.h)("a",{href:"/teams/public/"+d.uuidv4,title:d.name,onClick:function(t){return g(t,d.uuidv4)},class:"stretched-link"},Object(a.h)("div",{class:"text-center border rounded-circle imageRounded imageRoundedThumb",style:h?'background-image: url("'+h+'"); background-size: cover;':""},!h&&Object(a.h)("div",{class:"",style:"font-size: 12px; padding-top: 3px;"},m))),Object(a.h)("div",{class:"ml-2 "},p," ",Object(a.h)("span",{class:"font-weight-lighter"},"- ",d.name))):Object(a.h)(t,null,Object(a.h)("div",{class:"text-center border rounded-circle imageRounded imageRoundedThumb",style:(h?'background-image: url("'+h+'"); background-size: cover;':"")+" opacity: 0.5;"},!h&&Object(a.h)("div",{class:"text-muted",style:"font-size: 12px; padding-top: 3px;"},m)),Object(a.h)("div",{class:"ml-2"},p)))}))))},o}(a.Component))||s;e.a=h}).call(this,o("hosL").Fragment)},"/922":function(t,e,o){"use strict";(function(t){var r,n=o("hosL"),s=o("Utv1"),a=o("/eY4"),i=o("OhSV"),c=o("go65"),l=o("om2D"),u=(o("ETxl"),o("ZOvn")),d=Object(a.a)(r=function(e){function o(t){var o;return(o=e.call(this,t)||this).beforeImagesUploaded=function(){o.setState({sendButtonEnabled:!1})},o.afterImagesUploaded=function(){o.setState({sendButtonEnabled:!0})},o.commentWorkout=function(){return new Promise((function(t,e){var r,n,s,a,i,c,l,d,h,m,p;return o.state.sendButtonEnabled?(s=void 0===(n=(r=o.props).callback)?function(){}:n,i=void 0===(a=r.inputRefObject)?{}:a,c=o.props.workout,l=o.props.stores.workoutStore,h=(d=o.state).comment,m=d.showAddImage,o.setState({sendButtonEnabled:!1}),Promise.resolve(l.commentWorkout({id:c.id,comment:h})).then((function(r){try{return(p=r)&&200===p.status&&(o.setState({comment:{body:"",images:[]}},(function(){u.a.resizeTextarea(i[c.id]),m&&o.addImage()})),s({workout:c,response:p})),o.setState({sendButtonEnabled:!0}),t()}catch(t){return e(t)}}),e)):t(!1)}))},o.addImages=function(t){var e,r=o.state.comment;(e=r.images).push.apply(e,t.value),o.setState({comment:r})},o.addImage=function(){var t=o.state.showAddImage;o.setState({showAddImage:!(void 0!==t&&t)})},o.handleImageErrored=function(t){var e=t.target;e.onerror=null,setTimeout((function(){e.src+="?"+new Date}),1e3)},o.state={comment:{body:"",images:[]},showAddImage:!1,sendButtonEnabled:!0},o.inputRef={},o}var r,a;return a=e,(r=o).prototype=Object.create(a.prototype),r.prototype.constructor=r,r.__proto__=a,o.prototype.render=function(){var e=this,o=this.props,r=o.inputRef,a=o.col,d=void 0===a?12:a,h=o.offset,m=void 0===h?0:h,p=o.showAvatar,b=void 0===p||p,f=o.extraClass,g=void 0===f?"":f,O=o.workout,v=this.state,j=v.comment,y=v.showAddImage,w=v.sendButtonEnabled,k=this.props.stores.userStore.user,x=void 0===k?{}:k,S=x.firstname?""+s.a.ucfirst(x.firstname,!0)+s.a.ucfirst(x.lastname,!0):""+s.a.ucfirst(x.email||"",!0),D=x.image||(x.images?x.images[0]:void 0);return Object(n.h)("div",{class:"col-"+d+" offset-"+m+" "+g},Object(n.h)("div",{class:"d-flex mb-0 position-relative w-100"},b&&Object(n.h)("div",{class:"text-center border rounded-circle imageRounded imageRoundedSmall",style:(D?"background-image: url('"+D.s3SmallLink+"'); background-size: cover;":"")+" border-width: 3px !important;"},!x.image&&Object(n.h)("span",{class:"font-weight-lighter",style:"font-size: 15px;"},S)),Object(n.h)("div",{class:"col pl-3",style:"line-height: 1.2em;"},Object(n.h)("div",{class:"d-flex bd-highlight"},Object(n.h)("div",{class:"p-0 w-100 bd-highlight"},Object(n.h)("label",{class:"sr-only",for:"inlineFormInput"},Object(n.h)(i.c,{id:"comments.comment"},"Kommentar")),Object(n.h)("div",{class:"border rounded rounded-lg position-relative"},Object(n.h)(i.b,null,Object(n.h)("textarea",{class:"form-control-plaintext px-2",type:"text",placeholder:Object(n.h)(i.c,{id:"comments.write-comment"},"Skriv en kommentar..."),onInput:Object(c.a)(this,"comment.body"),onKeyUp:u.a.resizeTextarea,onFocus:u.a.resizeTextarea,style:"height: 2.3em;",value:j.body,ref:r})),Object(n.h)("div",{class:"position-absolute",style:"top: 8px; right: 10px; font-size: 1.2em;"},Object(n.h)("i",{class:"fas fa-image pointerCursor","data-id":O.id,onClick:this.addImage})))),Object(n.h)("div",{class:"p-0 pl-2 flex-shrink-1 bd-highlight"},Object(n.h)("button",{type:"button",class:"btn btn-"+(w?"primary":"secondary")+" mb-2",disabled:!w,onClick:this.commentWorkout},Object(n.h)("i",{class:"fas fa-paper-plane"})))))),y&&Object(n.h)(t,null,Object(n.h)("div",{class:"col-12 text-center"},Object(n.h)("div",{class:"container-fluid"},Object(n.h)("div",{class:"row"},j.images&&j.images.map((function(t){return Object(n.h)("div",{class:"col-3 p-1"},Object(n.h)("img",{src:t.s3SmallLink,class:"img-fluid",onError:e.handleImageErrored}),Object(n.h)("button",{class:"btn btn-sm btn-link",onClick:e.removeImage,"data-name":t.name},Object(n.h)("i",{class:"fas fa-trash"}),"  ",Object(n.h)(i.c,{id:"comments.remove-image"},"Remove")))})))),Object(n.h)(l.a,{object:j,updateField:this.addImages,before:this.beforeImagesUploaded,after:this.afterImagesUploaded,autoOpen:!0}))))},o}(n.Component))||r;e.a=d}).call(this,o("hosL").Fragment)},"/DnB":function(t,e,o){"use strict";function r(t,e){var o=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),o.push.apply(o,r)}return o}function n(t,e,o){return e in t?Object.defineProperty(t,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[e]=o,t}var s,a=o("hosL"),i=(o("Utv1"),o("/eY4")),c={},l=Object(i.a)(s=function(t){function e(e){var o;return(o=t.call(this,e)||this).state=function(t){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?r(Object(o),!0).forEach((function(e){n(t,e,o[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):r(Object(o)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(o,e))}))}return t}({},c),o.container=null,o}var o,s;s=t,(o=e).prototype=Object.create(s.prototype),o.prototype.constructor=o,o.__proto__=s;var i=e.prototype;return i.componentDidMount=function(){var t=this.props,e=t.horizontal,o=t.vertical,r=void 0===o?"":o,n={behavior:"smooth"};e&&(n.inline=e),r&&(n.block=r),this.container.scrollIntoView(n)},i.render=function(){var t=this;return Object(a.h)("div",{ref:function(e){return t.container=e}}," ")},e}(a.Component))||s;e.a=l},"3UPq":function(t,e,o){"use strict";(function(t){var r,n=o("hosL"),s=o("Utv1"),a=o("/eY4"),i=o("OhSV"),c=o("nHdA"),l=o("irB3"),u=(o("UwwE"),o("8Lgr")),d=(o("QkTp"),o("ZOvn")),h=[0,6],m=Object(a.a)(r=function(e){function o(){for(var t,o=arguments.length,r=new Array(o),n=0;n<o;n++)r[n]=arguments[n];return(t=e.call.apply(e,[this].concat(r))||this).chooseDay=function(e){var o=t.state,r=t.props.chooseDayFunction,n=void 0===r?function(){}:r,s=e.target.parentElement.dataset.day||e.target.dataset.day,a=e.target.parentElement.dataset.month||e.target.dataset.month,i=e.target.parentElement.dataset.year||e.target.dataset.year;t.setState(i===o.year&&a===o.month&&s===o.day?{year:null,month:null,day:null}:{year:i,month:a,day:s}),n({day:s,month:a,year:i})},t}var r,a;a=e,(r=o).prototype=Object.create(a.prototype),r.prototype.constructor=r,r.__proto__=a;var m=o.prototype;return m.loadWorkoutSummary=function(t){return new Promise(function(e,o){function r(){return this.setState({isLoading:!1}),e()}var n,a,i,c,l,u,d,h,m,p,b,f,g;return void 0===t&&(t=this.props),this.setState({isLoading:!0}),t.skipLoadSummary?e(!1):(a=(n=this.props.stores).userStore,i=n.workoutStore.currentTeam,c=(new Date).getMonth()+1,d=void 0===(u=(l=t).month)?c:u,m=void 0===(h=l.year)?s.a.getYear():h,b=void 0===(p=l.team)?i:p,(g=void 0===(f=l.dog)?{}:f)&&g.id?Promise.resolve(a.getWorkoutSummary({dog:g.id,year:m})).then(function(){try{return Promise.resolve(a.getWorkoutSummaryDay({month:d,year:m,dog:g.id})).then(function(){try{return r.call(this)}catch(t){return o(t)}}.bind(this),o)}catch(t){return o(t)}}.bind(this),o):Promise.resolve(a.getWorkoutSummary({team:b,dog:g.id,year:m})).then(function(){try{return Promise.resolve(a.getWorkoutSummaryDay({month:d,year:m,team:b,dog:g.id})).then(function(){try{return r.call(this)}catch(t){return o(t)}}.bind(this),o)}catch(t){return o(t)}}.bind(this),o))}.bind(this))},m.componentDidMount=function(){this.loadWorkoutSummary()},m.componentWillReceiveProps=function(t){t.month===this.props.month&&t.year===this.props.year&&t.dog===this.props.dog&&t.team===this.props.team||this.loadWorkoutSummary(t)},m.render=function(){var e=this,o=this.props.stores,r=o.appState,a=o.userStore,m=o.workoutPlanStore,p=a.user.language,b=void 0===p?"en":p,f=d.a.getDays(b),g=d.a.getMonths(b),O=this.state,v=O.day,j=O.month,y=O.year,w=r.darkmode,k=(new Date).getDate(),x=(new Date).getMonth()+1,S=(new Date).getFullYear(),D=this.props,P=D.month,C=void 0===P?x:P,T=D.year,L=void 0===T?S:T,I=D.dog,_=D.basehref,E=D.hideSummary,R=D.hideTable,U=parseInt(C<8?L-1:L,10),z=parseInt(C,10),A=parseInt(L,10),M=d.a.getNextMonth(z,A),W=M.month,F=M.year,B=d.a.getPrevMonth(z,A),Y=B.month,V=B.year,N=(s.a.getDaysInMonth(C,L),s.a.getWeeksInMonth(C,L)),J=s.a.getDaysInWeek(N[0].week,L,C),q=0,K=0,Z=0,G=0,H=[],Q=0;return Object(n.h)(t,null,Object(n.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-4 text-center"},Object(n.h)("a",{href:""+(_||"/workouts/month/")+W+"/"+F+"/skipScroll",class:"float-right btn btn-sm btn-outline-secondary ml-2"},Object(n.h)("i",{class:"fas fa-arrow-right"})),Object(n.h)("a",{href:""+(_||"/workouts/month/")+Y+"/"+V+"/skipScroll",class:"float-left btn btn-sm btn-outline-secondary mr-2"},Object(n.h)("i",{class:"fas fa-arrow-left"})),Object(n.h)("h3",null,Object(n.h)(i.c,{id:"workout.calendar.month"},"Måned")," - ",g[C-1]," ",L),Object(n.h)("h5",{class:"text-muted font-weight-light"},Object(n.h)(i.c,{id:"workout.plan.season"},"Sesongen")," ",U," - ",U+1),I&&Object(n.h)("div",null,I.name)),Object(n.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-4"},!R&&Object(n.h)(t,null,Object(n.h)("table",{class:"table table-striped table-sm"},Object(n.h)("thead",null,Object(n.h)("tr",null,Object(n.h)("th",{class:"text-muted"},Object(n.h)("small",null,Object(n.h)(i.c,{id:"workout.calendar.week"},"Uke"))),J.map((function(t){return Object(n.h)("th",null,Object(n.h)("small",null,f[t.getDay()]))})),Object(n.h)("th",{class:"text-muted"},Object(n.h)("small",null,Object(n.h)(i.c,{id:"workout.calendar.sum"},"Sum"))))),Object(n.h)("tbody",null,N&&N.map((function(t){var o=s.a.getDaysInWeek(t.week,L,C),r=m.findWorkoutPlanSummaryWeek(parseInt(L,10),t.week)||{},i=0;return Object(n.h)("tr",null,Object(n.h)("td",{class:"text-right text-muted pt-3"},Object(n.h)("small",null,Object(n.h)("a",{href:"/workouts/week/"+t.week+"/"+L,class:"text-muted"},t.week))),o.map((function(t){var o=a.findWorkoutSummaryWeekDay(t.getFullYear(),t.getMonth()+1,t.getDate(),z)||{},r=m.findWorkoutPlanSummaryDay(t.getFullYear(),t.getMonth()+1,t.getDate(),z)||{};o&&o.distanceKm&&(i+=o.distanceKm,q+=o.distanceKm,K+=o.count,Z+=o.elevation,G+=o.duration,H.push(o.speedAvg)),r&&r.distance&&(Q+=r.distance);var s=v==t.getDate()&&j==t.getMonth()+1&&y===t.getFullYear(),c=k==t.getDate()&&x==t.getMonth()+1&&S==t.getFullYear(),l=h.indexOf(t.getDay())>-1;return Object(n.h)("td",{class:"text-center font-weight-light position-relative pt-3 pb-3 "+(s?"calendarIsChosen":"")+" "+(c?"calendarIsToday":"")+" "+(l?"calendarIsWeekend":""),style:"font-size: 0.8em;",onClick:e.chooseDay,"data-day":t.getDate(),"data-month":t.getMonth()+1,"data-year":L},Object(n.h)("div",{class:"position-absolute text-muted",style:"top: 0px; right: 2px; font-size: 0.7em;"},t.getDate()),o&&o.distanceKm?Object(n.h)("div",{class:"rounded-pill w-100 px-1",style:"background-color: "+d.a.getTrainingColor(o,w)+";"},Object(n.h)(u.a,{stores:e.props.stores,value:o.distanceKm}),o.count>1&&Object(n.h)("span",{class:"position-absolute text-danger",style:"bottom: 0; right: 0px; font-size: 0.6em;"},o.count)):"-",r.distance>0&&Object(n.h)("span",{class:"position-absolute text-primary",style:"bottom: 0; left: 0px; font-size: 0.9em;"},Object(n.h)(u.a,{stores:e.props.stores,value:r.distance})))})),Object(n.h)("td",{class:"text-right pt-3 pb-3 position-relative",style:"font-size: 0.8em;"},Object(n.h)(u.a,{stores:e.props.stores,value:i}),r.distance>0&&Object(n.h)("span",{class:"position-absolute text-primary",style:"bottom: 0; left: 0px; font-size: 0.9em;"},Object(n.h)(u.a,{stores:e.props.stores,value:r.distance}))))}))),Object(n.h)("tfoot",null,Object(n.h)("tr",null,Object(n.h)("td",{colspan:"8",class:"text-right"},Object(n.h)(i.c,{id:"workout.calendar.totalKm"},"Totalt km")),Object(n.h)("td",{class:"text-right text-muted pb-3 position-relative"},Object(n.h)(u.a,{stores:this.props.stores,value:q}),Q>0&&Object(n.h)("span",{class:"position-absolute text-primary",style:"bottom: 0; left: 0px; font-size: 0.8em;"},Object(n.h)(u.a,{stores:this.props.stores,value:Q}))))))),!E&&Object(n.h)(t,null,Object(n.h)("h5",{class:"mt-4"},Object(n.h)(i.c,{id:"workout.calendar.summary"},"Oppsummering")," - ",g[C-1]," ",L),I&&Object(n.h)("div",null,I.name),Object(n.h)("table",{class:"table table-striped table-sm"},Object(n.h)("tbody",null,Object(n.h)("tr",null,Object(n.h)("td",{class:"text-muted"},Object(n.h)(i.c,{id:"workout.calendar.totalWorkouts"},"Antall økter")),Object(n.h)("td",{class:"text-right"},K)),Object(n.h)("tr",null,Object(n.h)("td",{class:"text-muted"},Object(n.h)(i.c,{id:"workout.calendar.distance"},"Distanse")),Object(n.h)("td",{class:"text-right"},Object(n.h)(u.a,{stores:this.props.stores,value:q}))),Object(n.h)("tr",null,Object(n.h)("td",{class:"text-muted"},Object(n.h)(i.c,{id:"workout.calendar.ascend"},"Høydemeter")),Object(n.h)("td",{class:"text-right"},Object(n.h)(l.a,{stores:this.props.stores,value:Z}))),Object(n.h)("tr",null,Object(n.h)("td",{class:"text-muted"},Object(n.h)(i.c,{id:"workout.calendar.duration"},"Varighet")),Object(n.h)("td",{class:"text-right"},s.a.secToHms(G))),Object(n.h)("tr",null,Object(n.h)("td",{class:"text-muted"},Object(n.h)(i.c,{id:"workout.calendar.avg-speed"},"Gjennomsnittsfart")),Object(n.h)("td",{class:"text-right"},Object(n.h)(c.a,{stores:this.props.stores,value:d.a.avgArr(H)}))))))))},o}(n.Component))||r;e.a=m}).call(this,o("hosL").Fragment)},"3wGD":function(t,e,o){"use strict";var r,n=o("hosL"),s=o("Utv1"),a=o("/eY4"),i=o("OhSV"),c=o("go65"),l=(o("ETxl"),o("ZOvn")),u=Object(a.a)(r=function(t){function e(e){var o;return(o=t.call(this,e)||this).commentWorkout=function(){return new Promise((function(t,e){var r,n,s,a,i,c,u,d,h,m,p;return o.state.sendButtonEnabled?(s=void 0===(n=(r=o.props).callback)?function(){}:n,a=r.commentId,c=void 0===(i=r.inputRefObject)?{}:i,u=o.props.workout,d=o.props.stores.workoutStore,m=void 0===(h=o.state.comment)?"":h,o.setState({sendButtonEnabled:!1}),Promise.resolve(d.commentReplyWorkout({id:u.id,commentId:a,comment:m})).then((function(r){try{return(p=r)&&200===p.status&&(o.setState({comment:""},(function(){l.a.resizeTextarea(c[a])})),s({workout:u,response:p,commentId:a})),o.setState({sendButtonEnabled:!0}),t()}catch(t){return e(t)}}),e)):t(!1)}))},o.state={sendButtonEnabled:!0},o.inputRef={},o}var o,r;return r=t,(o=e).prototype=Object.create(r.prototype),o.prototype.constructor=o,o.__proto__=r,e.prototype.render=function(){var t=this.props.inputRef,e=this.state,o=e.comment,r=e.sendButtonEnabled,a=this.props.stores.userStore.user,u=void 0===a?{}:a,d=u.firstname?""+s.a.ucfirst(u.firstname,!0)+s.a.ucfirst(u.lastname,!0):""+s.a.ucfirst(u.email||"",!0),h=u.image||(u.images?u.images[0]:void 0);return Object(n.h)("div",{class:"w-100"},Object(n.h)("div",{class:"d-flex mb-0 position-relative w-100"},Object(n.h)("div",{class:"text-center border rounded-circle imageRounded imageRoundedThumb",style:(h?"background-image: url('"+h.s3SmallLink+"'); background-size: cover;":"")+" border-width: 3px !important;"},!h&&Object(n.h)("span",{class:"font-weight-lighter",style:"font-size: 15px;"},d)),Object(n.h)("div",{class:"col pl-3",style:"line-height: 1.2em;"},Object(n.h)("div",{class:"d-flex bd-highlight"},Object(n.h)("div",{class:"p-0 w-100 bd-highlight"},Object(n.h)("label",{class:"sr-only",for:"inlineFormInput"},Object(n.h)(i.c,{id:"comments.comment"},"Kommentar")),Object(n.h)("div",{class:"border rounded rounded-lg position-relative"},Object(n.h)(i.b,null,Object(n.h)("textarea",{class:"form-control-plaintext px-2",type:"text",placeholder:Object(n.h)(i.c,{id:"comments.write-comment"},"Skriv en kommentar..."),onInput:Object(c.a)(this,"comment"),onKeyUp:l.a.resizeTextarea,style:"height: 2.3em;",value:o,ref:t})))),Object(n.h)("div",{class:"p-0 pl-2 flex-shrink-1 bd-highlight"},Object(n.h)("button",{type:"button",class:"btn btn-"+(r?"primary":"secondary")+" mb-2",disabled:!r,onClick:this.commentWorkout},Object(n.h)("i",{class:"fas fa-paper-plane"})))))))},e}(n.Component))||r;e.a=u},"6POc":function(t,e,o){"use strict";function r(t,e){var o=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),o.push.apply(o,r)}return o}function n(t,e,o){return e in t?Object.defineProperty(t,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[e]=o,t}o.r(e);var s,a=o("hosL"),i=o("Utv1"),c=o("/eY4"),l=o("OhSV"),u=o("ZOvn"),d=o("JWe/"),h=o("3UPq"),m=o("pJjI"),p=u.a.marginTop(!0),b=u.a.marginBottom(),f=u.a.subMenuMarginTop(),g=["","Jan","Feb","Mar","Apr","Mai","Jun","Jul","Aug","Sep","Okt","Nov","Des"],O={isLoading:!1},v=Object(c.a)(s=function(t){function e(e){var o;return(o=t.call(this,e)||this).loadWorkouts=function(){return new Promise((function(t,e){var r;return o.setState({isLoading:!0}),r=o.props.stores.workoutStore,Promise.resolve(r.load({query:{team:r.currentTeam}})).then((function(){try{return Promise.resolve(o.loadWorkoutSummary()).then((function(){try{return o.setState({isLoading:!1}),t()}catch(t){return e(t)}}),e)}catch(t){return e(t)}}),e)}))},o.loadDogs=function(){return new Promise((function(t,e){var r;return r=o.props.stores.dogStore,Promise.resolve(r.load({query:{team:r.currentTeam},addData:["workoutSummary"]})).then((function(){try{return t()}catch(t){return e(t)}}),e)}))},o.state=function(t){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?r(Object(o),!0).forEach((function(e){n(t,e,o[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):r(Object(o)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(o,e))}))}return t}({},O),o}var o,s;s=t,(o=e).prototype=Object.create(s.prototype),o.prototype.constructor=o,o.__proto__=s;var c=e.prototype;return c.loadTracks=function(){return new Promise(function(t,e){return Promise.resolve(this.props.stores.trackStore.load()).then((function(){try{return t()}catch(t){return e(t)}}),e)}.bind(this))},c.loadWorkoutSummary=function(t){return new Promise(function(e,o){var r,n,s,a,i,c;return void 0===t&&(t=this.props),n=(r=this.props.stores).userStore,s=r.workoutStore.currentTeam,i=(a=t).month,c=a.year,Promise.resolve(n.getWorkoutSummary({team:s})).then((function(){try{return Promise.resolve(n.getWorkoutSummaryDay({month:i,year:c,team:s})).then((function(){try{return e()}catch(t){return o(t)}}),o)}catch(t){return o(t)}}),o)}.bind(this))},c.componentDidMount=function(){this.loadWorkouts()},c.componentWillReceiveProps=function(t){t.month!==this.props.month&&this.loadWorkoutSummary(t)},c.render=function(){var t=this,e=this.props.stores,o=e.userStore,r=e.appState.darkmode,n=e.workoutStore.currentTeam,s=this.props,c=s.month,u=s.year,O=void 0===u?i.a.getYear():u,v=o.workoutsDay;return Object(a.h)("div",{class:"container-fluid",style:"margin-bottom: "+b+"; margin-top: "+p+";"},Object(a.h)("div",{class:"row fixed-top",style:"margin-top: "+f+"; background-color: "+(r?"#191d21":"#f8f9fa")+";"},Object(a.h)("div",{class:"col text-center subtopmenu"},Object(a.h)("a",{href:"/workouts/",class:"text-secondary stretched-link"},Object(a.h)("nobr",null,Object(a.h)("i",{class:"fas fa-chart-line"})," ",Object(a.h)(l.c,{id:"workout.index.dashboard"},"Oversikt")))),Object(a.h)("div",{class:"col text-center subtopmenu"},Object(a.h)("a",{href:"/workouts/list",class:"text-secondary stretched-link"},Object(a.h)("nobr",null,Object(a.h)("i",{class:"fas fa-list"})," ",Object(a.h)(l.c,{id:"workout.index.list"},"Liste")))),Object(a.h)("div",{class:"col text-center subtopmenu"},Object(a.h)("a",{href:"/workouts/plan",class:"text-secondary stretched-link"},Object(a.h)("nobr",null,Object(a.h)("i",{class:"fas fa-calendar-alt"})," ",Object(a.h)(l.c,{id:"workout.index.plan"},"Plan"))))),Object(a.h)("div",{class:"row"},Object(a.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 border-bottom"},Object(a.h)(m.a,{stores:this.props.stores,callback:this.loadWorkouts,key:"teams-"+n})),Object(a.h)(h.a,{stores:this.props.stores,month:c,year:O,team:n}),Object(a.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-4"},Object(a.h)("h5",null,Object(a.h)(l.c,{id:"workouts.month-workouts",fields:{month:g[c],year:O}},"Treningsturene - ",g[c]," ",O))),Object(a.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-4"},v&&v.map((function(e){return Object(a.h)(d.a,{stores:t.props.stores,workout:e,showDate:!0})})))))},e}(a.Component))||s;e.default=v},"8Lgr":function(t,e,o){"use strict";(function(t){function r(t){return a.a.format(t,t<5?2:1)}var n,s=o("hosL"),a=o("Utv1"),i=o("/eY4"),c=(o("OhSV"),o("ZOvn"),Object(i.a)(n=function(e){function o(){return e.apply(this,arguments)||this}var n,a;return a=e,(n=o).prototype=Object.create(a.prototype),n.prototype.constructor=n,n.__proto__=a,o.prototype.render=function(){var e=this.props,o=e.value,n=void 0===o?0:o,a=e.smallUnit,i=this.props.stores.userStore.user.settings;return(void 0===i?{}:i).imperial?Object(s.h)(t,null,Object(s.h)("nobr",null,r(function(t){return.621371*t}(n))," ",a?Object(s.h)(t,null,Object(s.h)("small",null,Object(s.h)("small",null,Object(s.h)("small",{class:"ml-0 text-muted"},"mi")))):Object(s.h)(t,null,"mi"))):Object(s.h)(t,null,Object(s.h)("nobr",null,r(n)," ",a?Object(s.h)(t,null,Object(s.h)("small",null,Object(s.h)("small",null,Object(s.h)("small",{class:"ml-0 text-muted"},"km")))):Object(s.h)(t,null,"km")))},o}(s.Component))||n);e.a=c}).call(this,o("hosL").Fragment)},ETxl:function(t){t.exports={hoverelementonly:"hoverelementonly__1mJGJ",hoverElement:"hoverElement__axh3O",hoverelementhide:"hoverelementhide__1k_qH","progress-bar-vertical":"progress-bar-vertical__1B2sC","progress-bar":"progress-bar__pnsVj",dragged:"dragged__QXO46",over:"over__1re3x",list:"list__q_emZ"}},"JWe/":function(t,e,o){"use strict";(function(t){function r(t,e){var o=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),o.push.apply(o,r)}return o}function n(t){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?r(Object(o),!0).forEach((function(e){s(t,e,o[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):r(Object(o)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(o,e))}))}return t}function s(t,e,o){return e in t?Object.defineProperty(t,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[e]=o,t}function a(t){switch(t.type){case 1:return"border-primary";case 2:return"border-danger";case 3:return"border-success";case 4:return"border-info";default:return"border-warning"}}function i(t){switch(t.type){case 1:return"fas fa-running";case 2:return"fas fa-flag-checkered";case 3:return"fas fa-hiking";case 4:return"fas fa-futbol";default:return"fas fa-hiking"}}var c,l=o("hosL"),u=o("Utv1"),d=o("/eY4"),h=o("cneo"),m=o("OhSV"),p=o("fh8t"),b=o.n(p),f=(o("UJvz"),o("sqi2")),g=o("/922"),O=o("s4FZ"),v=o("ZQlJ"),j=o("q/oJ"),y=o("gWxU"),w=o("Nanz"),k=o("+JSK"),x=o("vY+r"),S=o("nHdA"),D=o("irB3"),P=o("UwwE"),C=o("8Lgr"),T=o("QkTp"),L=o("ZOvn"),I=L.a.getMaxLoadIndex(),_={showAddComment:!1,viewImageIdx:{},likeWorkout:{}},E=Object(d.a)(c=function(e){function o(t){var o;return(o=e.call(this,t)||this).toggleDate=function(t){t.stopPropagation(),t.preventDefault(),o.setState({showDate:!o.state.showDate})},o.likeWorkout=function(){return new Promise((function(t,e){var r,n,s;return r=o.props.stores.workoutStore,(s=o.state.likeWorkout)[n=o.props.workout.id]=!0,o.setState({likeWorkout:s}),setTimeout((function(){var t=o.state.likeWorkout;delete t[n],o.setState({likeWorkout:t})}),1200),Promise.resolve(r.likeWorkout({id:n})).then((function(o){try{return o,t()}catch(t){return e(t)}}),e)}))},o.toggleAddComment=function(t){var e=t.target.parentElement.dataset.id||t.target.dataset.id;o.setState({showAddComment:!o.state.showAddComment},(function(){o.inputRef[e]&&o.inputRef[e].focus()}))},o.viewImage=function(t){var e=t.target.closest("img").dataset,r=o.state.viewImageIdx;r[e.id]=e.idx,o.setState({viewImageIdx:r})},o.shareLink=function(t){var e=t.target.closest("button").dataset;o.props.stores.appState.shareUrl({url:e.url,title:e.title,text:e.text})},o.onTeamClick=function(t,e){return t.preventDefault(),t.stopPropagation(),o.setState({showTeam:e}),!1},o.hideTeam=function(){o.setState({showTeam:null})},o.onUserClick=function(t){return t.preventDefault(),t.stopPropagation(),!1},o.onDogClick=function(t,e,r){return t.preventDefault(),t.stopPropagation(),o.setState({showDog:e,dogs:r}),!1},o.hideDog=function(){o.setState({showDog:null})},o.state=n({},_),o.updateTimer={},o.inputRef={},o}var r,s;return s=e,(r=o).prototype=Object.create(s.prototype),r.prototype.constructor=r,r.__proto__=s,o.prototype.render=function(){var e=this,o=this.state,r=o.showDate,s=o.showAddComment,c=o.likeWorkout,d=o.dogs,p=o.showTeam,_=o.showDog,E=this.props,R=E.workout,U=E.showDate,z=E.wrapperClasses,A=void 0===z?"col-12 col-sm-8 col-lg-6 offset-sm-2 offset-lg-3":z,M=E.wrapperClassesRow,W=void 0===M?"row":M,F=this.props.stores,B=F.userStore,Y=F.appState,V=F.workoutStore,N=Y.viewmode,J=Y.hasShareApi,q=B.user,K=B.dogs,Z=q.language,G=void 0===Z?"en":Z,H=B.findIntensity({code:R.intensity,language:G})||{},Q=B.findTeam(R.team,!0)||{},X=Q.name,$=[];X&&$.push(X),R.teams&&R.teams.forEach((function(t){B.findTeam(t)&&$.push(B.findTeam(t))}));var tt=R.likes,et=void 0===tt?[]:tt,ot=R.comments,rt=void 0===ot?[]:ot,nt=R.likes&&R.likes.findIndex((function(t){return t.user===q.id}))>-1,st=R.gpxInfo,at=R.mushers,it=void 0===at?[]:at,ct=(void 0===st?{}:st).loadIndex,lt=void 0===ct?0:ct,ut=B.findEquipment({equipment:R.equipment,language:G}),dt=B.findEquipment({equipment:R.equipment,field:"icon"}),ht=[];it.length>1&&it.slice(1,10).map((function(t){var e=V.findPublicUser(t)||{};e.images&&e.images[0]&&ht.push(e.images[0])}));var mt,pt=V.findPublicUser(it[0])||{};pt&&pt.images&&pt.images[0]?mt=pt.images[0]:Q.image&&Q.image.s3SmallLink?mt=Q.image:Q.images&&Q.images[0]&&Q.images[0].s3SmallLink?mt=Q.images[0]:R.image&&R.image.s3SmallLink&&(mt=R.image);var bt=[];if(R.mapImage&&bt.push(n(n({},R.mapImage),{},{type:"map"})),R.images){var ft=Object(h.i)(R.images);bt.push.apply(bt,ft)}var gt;R&&R.gpxInfo&&R.gpxInfo.battegryLevelStart&&(gt=100*(R.gpxInfo.battegryLevelStart-R.gpxInfo.battegryLevelEnd));var Ot=L.a.getViews(R.statistics);return Object(l.h)(t,null,p&&Object(l.h)(j.a,null,Object(l.h)(y.default,{stores:this.props.stores,teamid:p,marginTop:"0px;",marginBottom:"0px;",back:this.hideTeam,hideTeam:this.hideTeam})),_&&Object(l.h)(j.a,null,Object(l.h)(w.default,{stores:this.props.stores,dogid:_,marginTop:"0px;",marginBottom:"0px;",back:this.hideDog,dogs:d})),Object(l.h)("div",{class:"w-100 mb-2"},Object(l.h)("div",{class:W},Object(l.h)("div",{class:A+" d-flex mb-0 position-relative"},Object(l.h)("div",{class:"text-center"},Object(l.h)("div",{class:"position-relative text-center border rounded-circle imageRounded "+a(R),style:(mt?'background-image: url("'+mt.s3SmallLink+'"); background-size: cover;':"")+" border-width: 3px !important;"},!mt&&Object(l.h)("i",{class:i(R)+" text-"+(H.class?H.class:"muted")+" mt-3",style:"font-size: 40px;"}),ht&&ht.map((function(e,o){return Object(l.h)(t,null,Object(l.h)("div",{class:"position-absolute rounded-circle imageRounded border imageRoundedThumb border-white",style:'\n                                            background-image: url("'+e.s3SmallLink+'");\n                                            background-size: cover;\n                                            bottom: -3px;\n                                            left: '+(10*o-5)+"px;\n                                        "}))}))),0!==R.temperature&&Object(l.h)(t,null,Object(l.h)("span",{class:"text-muted font-weight-light"},Object(l.h)(T.a,{stores:this.props.stores,value:R.temperature})))),Object(l.h)("div",{class:"flex-grow-1 pl-3",style:"line-height: 1.2em;"},Object(l.h)("span",{class:"float-right"},1===R.isLocked&&Object(l.h)("i",{class:"fas fa-lock text-danger ml-3"}),1===R.isInProgress&&Object(l.h)("div",{class:"spinner-grow text-success ml-3",role:"status"}),2===R.isInProgress&&Object(l.h)("i",{class:"fas fa-pause-circle text-warning ml-3"})),Object(l.h)("a",{class:"stretched-link",href:"/workouts/"+R.id},Object(l.h)("h5",{class:"my-0 mb-1",style:"line-height: 1.0em;"},R.name)),$&&$.length>0&&Object(l.h)("small",{class:"font-weight-lighter"},$.map((function(e,o){return Object(l.h)(t,null,o>0?", ":"",e)}))),Object(l.h)("br",null),Object(l.h)("small",{class:"text-muted"},R.date&&Object(l.h)("small",{onClick:this.toggleDate},U||r?u.a.formatDate(R.date,{locale:"no-NB",hour12:!1,hour:"2-digit",minute:"2-digit"}):u.a.formatDistance(R.date,new Date,{locale:"no-NB"})),Object(l.h)("span",{class:"badge badge-"+H.class+" ml-2"},H.name),lt>0&&Object(l.h)("span",{class:"ml-2 text-"+L.a.getLoadIndexColor(u.a.normalizeBetween(lt,0,I,0,100))},Object(l.h)("i",{class:"fas fa-hand-rock mr-1"}),Math.floor(u.a.normalizeBetween(lt,0,I,0,100))," - ",L.a.getLoadIndexText(u.a.normalizeBetween(lt,0,I,0,100))),Object(l.h)("br",null)),Object(l.h)("small",null,Object(l.h)("div",{class:"text-muted"},R.garminId>0&&Object(l.h)("div",{class:"float-left mr-2 text-center border rounded-circle imageRounded imageRoundedIcon",style:'background-image: url("./assets/garmin-connect.png");'}),R.stravaId>0&&Object(l.h)("div",{class:"float-left mr-2 text-center border rounded-circle imageRounded imageRoundedIcon",style:'background-image: url("./assets/strava-icon.png");'}),R.equipment>0&&Object(l.h)(t,null,Object(l.h)("i",{class:dt+" ml-2"})," ",ut),R.dogs>0&&Object(l.h)(t,null,Object(l.h)("i",{class:"fas fa-dog ml-2"})," ",R.dogs.length),R.track>0&&Object(l.h)(t,null,Object(l.h)("i",{class:"fas fa-map-marked text-"+(R.track>0?"success":"danger")+" ml-2"})),R.dogsLeft>0&&Object(l.h)(t,null,Object(l.h)("i",{class:"fas fa-crosshairs text-"+(R.dogsLeft&&R.dogsRight?"success":"danger")+" ml-2"})),R.sledWeight>0&&Object(l.h)(t,null,Object(l.h)("i",{class:"fas fa-sleigh ml-2"})," ",Object(l.h)(P.a,{stores:this.props.stores,value:R.sledWeight})),gt>0&&Object(l.h)("span",{class:"text-muted ml-2"},Object(l.h)("i",{class:"fas fa-battery-three-quarters"})," ",u.a.format(gt,1),"% ",Object(l.h)(m.c,{id:"workout.battery-used"},"used"))),["beta","advanced"].indexOf(N)>-1&&Object(l.h)("span",{class:"text-muted"},Object(l.h)("i",{class:"fas fa-balance-scale"})," ",u.a.format(R.kcalBurnedTotal)," ",Object(l.h)(m.c,{id:"workout.kcal"},"kcal"),Object(l.h)("i",{class:"fas fa-drumstick-bite ml-2"})," ",Object(l.h)(P.a,{stores:this.props.stores,value:R.kcalMeatGramsTotal/1e3}),Object(l.h)("i",{class:"fas fa-fish ml-2"})," ",Object(l.h)(P.a,{stores:this.props.stores,value:R.kcalSalmonGramsTotal/1e3}),Object(l.h)("i",{class:"fas fa-piggy-bank ml-2"})," ",Object(l.h)(P.a,{stores:this.props.stores,value:R.kcalFatGramsTotal/1e3}))))),Object(l.h)("div",{class:A+" position-relative mt-2"},Object(l.h)("strong",null,R.description)),Object(l.h)("div",{class:A+" position-relative"},Object(l.h)(b.a,{markdown:L.a.replaceImages(R.comment,R.images,G),markdownOpts:L.a.getMarkdownOptions()})),Object(l.h)("div",{class:A+" d-flex mb-0 position-relative"},Object(l.h)("div",{class:"container-fluid px-0"},Object(l.h)("div",{class:"row mt-1"},R.distanceKm>0&&Object(l.h)("div",{class:"col-3"},Object(l.h)("div",{class:"text-overflow"},Object(l.h)("small",null,Object(l.h)("i",{class:"fas fa-road"})," ",Object(l.h)(m.c,{id:"workout.calendar.distance"},"Distanse"))),Object(l.h)("div",{class:"text-overflow font-weight-light",style:"font-size: 1.2em;"},Object(l.h)(C.a,{stores:this.props.stores,value:R.distanceKm}))),R.elevation>0&&Object(l.h)("div",{class:"col-3"},Object(l.h)("div",{class:"text-overflow"},Object(l.h)("small",null,Object(l.h)("i",{class:"fas fa-mountain"})," ",Object(l.h)(m.c,{id:"workout.calendar.ascend"},"Høydemeter"))),Object(l.h)("div",{class:"text-overflow font-weight-light",style:"font-size: 1.2em;"},Object(l.h)(D.a,{stores:this.props.stores,value:R.elevation}))),R.duration>0&&Object(l.h)("div",{class:"col-3"},Object(l.h)("div",{class:"text-overflow"},Object(l.h)("small",null,Object(l.h)("i",{class:"fas fa-clock"})," ",Object(l.h)(m.c,{id:"workout.calendar.duration"},"Varighet"))),Object(l.h)("div",{class:"text-overflow font-weight-light",style:"font-size: 1.2em;"},u.a.secToHms(R.duration,!0))),R.speedAvg>0&&Object(l.h)("div",{class:"col-3"},Object(l.h)("div",{class:"text-overflow"},Object(l.h)("small",null,Object(l.h)("i",{class:"fas fa-tachometer-alt"})," ",Object(l.h)(m.c,{id:"workout.calendar.avg-speed"},"Snittfart"))),Object(l.h)("div",{class:"text-overflow font-weight-light",style:"font-size: 1.2em;"},R.gpxInfo&&R.gpxInfo.avgGpsMovingSpeed>0?Object(l.h)(t,null,Object(l.h)(S.a,{stores:this.props.stores,value:3.6*R.gpxInfo.avgGpsMovingSpeed})):Object(l.h)(t,null,Object(l.h)(S.a,{stores:this.props.stores,value:R.speedAvg}))))))),["beta","advanced","normal"].indexOf(N)>-1&&Object(l.h)("div",{class:""+A},Object(l.h)("div",{class:"container-fluid px-0 mt-1"},Object(l.h)("div",{class:"row"},Object(l.h)(O.a,{stores:this.props.stores,images:bt,id:R.id,dblClick:this.likeWorkout,likeRef:c})))),["beta","advanced","normal"].indexOf(N)>-1&&Object(l.h)(t,null,R.dogs&&R.dogs.length>0&&Object(l.h)("div",{class:"container-fluid px-0 mt-1"},Object(l.h)("div",{class:"row pt-2"},Object(l.h)(v.a,{stores:this.props.stores,dogs:R.dogs,allDogs:K,onDogClick:this.onDogClick}))),Object(l.h)("div",{class:"mt-2"},Object(l.h)(k.a,{stores:this.props.stores,likes:et,comments:rt,type:"workout",onTeamClick:this.onTeamClick,onUserClick:this.onUserClick}))),["beta","advanced","normal"].indexOf(N)>-1&&Object(l.h)(t,null,Object(l.h)("div",{class:A+" mb-0 position-relative mt-2"},Object(l.h)("div",{class:"row"},Object(l.h)("div",{class:"col text-center"},Object(l.h)("button",{type:"button",class:"btn btn-sm btn-outline-"+(nt?"primary":"secondary")+" btn-lg btn-block "+(nt?"text-primary":""),onClick:this.likeWorkout},Object(l.h)("i",{class:(nt?"text-primary fas":"far")+" fa-thumbs-up"})," ",Object(l.h)(m.c,{id:"comments.like"},"Lik"))),Object(l.h)("div",{class:"col text-center"},Object(l.h)("button",{type:"button",class:"btn btn-sm btn-outline-secondary btn-lg btn-block","data-id":R.id,onClick:this.toggleAddComment},Object(l.h)("i",{class:"fas fa-comment"})," ",Object(l.h)(m.c,{id:"comments.comment-add"},"Kommentar"))),J?Object(l.h)(t,null,Object(l.h)("div",{class:"col text-center"},Object(l.h)("button",{class:"btn btn-sm btn-outline-secondary btn-lg btn-block text-overflow",onClick:this.shareLink,"data-url":"https://themusher.app/share/workout/"+R.uuidv4,"data-title":"title: "+R.name},Object(l.h)("i",{class:"fas fa-share"})," ",Object(l.h)(m.c,{id:"workout.share"},"Del")))):Object(l.h)(t,null,Object(l.h)("div",{class:"col text-center"},Object(l.h)("a",{class:"btn btn-sm btn-outline-secondary btn-lg btn-block text-overflow",href:"https://themusher.app/share/workout/"+R.uuidv4,target:"_blank",rel:"noreferrer","data-native":!0},Object(l.h)("i",{class:"fas fa-share"})," ",Object(l.h)(m.c,{id:"workout.share"},"Del")))))),Object(l.h)("div",{class:A+" mt-2 mb-3"},s&&Object(l.h)(g.a,{stores:this.props.stores,workout:R,inputRef:function(t){return e.inputRef[R.id]=t},inputRefObject:this.inputRef,col:"12",offset:"0"}),Object(l.h)(f.a,{stores:this.props.stores,workout:R,col:"10",offset:"2",compact:!0})),Ot>0&&Object(l.h)(t,null,Object(l.h)("div",{class:"mt-2"},Object(l.h)(x.a,{stores:this.props.stores,views:Ot,object:R,type:"workout",isTeamAdmin:!0,isAdmin:!1,onTeamClick:this.onTeamClick,onUserClick:this.onUserClick})))))))},o}(l.Component))||c;e.a=E}).call(this,o("hosL").Fragment)},QkTp:function(t,e,o){"use strict";(function(t){var r,n=o("hosL"),s=o("Utv1"),a=o("/eY4"),i=(o("OhSV"),o("ZOvn"),Object(a.a)(r=function(e){function o(){return e.apply(this,arguments)||this}var r,a;return a=e,(r=o).prototype=Object.create(a.prototype),r.prototype.constructor=r,r.__proto__=a,o.prototype.render=function(){var e=this.props,o=e.value,r=void 0===o?0:o,a=this.props.stores.userStore.user.settings;return(void 0===a?{}:a).imperial?Object(n.h)(t,null,Object(n.h)("nobr",null,s.a.format(function(t){return 9*t/5+32}(r),0),"°F")):Object(n.h)(t,null,Object(n.h)("nobr",null,s.a.format(r,1),"°C"))},o}(n.Component))||r);e.a=i}).call(this,o("hosL").Fragment)},UJvz:function(t,e,o){"use strict";var r,n=o("hosL"),s=o("Utv1"),a=o("/eY4"),i=o("OhSV"),c=Object(a.a)(r=function(t){function e(){for(var e,o=arguments.length,r=new Array(o),n=0;n<o;n++)r[n]=arguments[n];return(e=t.call.apply(t,[this].concat(r))||this).toggleDate=function(){e.setState({showDate:!e.state.showDate})},e.touchStart=function(t){t.stopPropagation(),e.setState({startY:t.touches[0].pageY})},e.touchEnd=function(t){t.stopPropagation(),e.setState({startY:void 0,readyToRefresh:!1})},e.touchMove=function(t){t.stopPropagation();var o=e.state;e.appContainer&&(0===e.appContainer.scrollTop&&t.touches[0].pageY>o.startY+30&&!o.refreshing&&(0,e.props.close)())},e}var o,r;return r=t,(o=e).prototype=Object.create(r.prototype),o.prototype.constructor=o,o.__proto__=r,e.prototype.render=function(){var t=this,e=this.state.showDate,o=this.props,r=o.image,a=o.imagexxl,c=o.close,l=o.thumb,u=o.name,d=o.title,h=o.date;return Object(n.h)("div",{class:"fixed-top bg-dark text-center pt-2",style:"width: 100vw; height: 100vh;"},Object(n.h)("button",{class:"btn btn-secondary float-right mr-2",onClick:c},"X"),Object(n.h)("div",{class:"d-flex mb-2 px-2"},l&&Object(n.h)("div",{class:"text-center border rounded-circle imageRounded imageRoundedSmall",style:l?'background-image: url("'+l+'");':""}," "),Object(n.h)("div",{class:"flex-grow-1 pl-3 pr-2 text-left",style:"line-height: 1.3em;"},u&&Object(n.h)("strong",{class:"mr-2"},u,":"),d,Object(n.h)("br",null),Object(n.h)("small",{class:"text-muted"},h&&Object(n.h)("small",{onClick:this.toggleDate},e?s.a.formatDate(h,{locale:"no-NB"}):s.a.formatDistance(h,new Date,{locale:"no-NB"}))))),Object(n.h)("img",{src:r,class:"img-fluid align-middle mt-2 mb-2",onClick:c,onTouchstart:this.touchStart,onTouchend:this.touchEnd,onTouchmove:this.touchMove,ref:function(e){return t.appContainer=e}}),Object(n.h)("a",{target:"_blank",rel:"noopener noreferrer",href:a||r,download:a||r},Object(n.h)("i",{class:"fas fa-download"})," ",Object(n.h)(i.c,{id:"modal.download"},"Last ned bildet")))},e}(n.Component))||r;e.a=c},UwwE:function(t,e,o){"use strict";(function(t){var r,n=o("hosL"),s=o("Utv1"),a=o("/eY4"),i=(o("OhSV"),o("ZOvn"),Object(a.a)(r=function(e){function o(){return e.apply(this,arguments)||this}var r,a;return a=e,(r=o).prototype=Object.create(a.prototype),r.prototype.constructor=r,r.__proto__=a,o.prototype.render=function(){var e=this.props,o=e.value,r=void 0===o?0:o,a=this.props.stores.userStore.user.settings;return(void 0===a?{}:a).imperial?Object(n.h)(t,null,Object(n.h)("nobr",null,s.a.format(function(t){return 2.20462*t}(r),0)," lb")):Object(n.h)(t,null,Object(n.h)("nobr",null,s.a.format(r,0)," kg"))},o}(n.Component))||r);e.a=i}).call(this,o("hosL").Fragment)},ZQlJ:function(t,e,o){"use strict";var r,n=o("hosL"),s=(o("Utv1"),o("/eY4")),a=(o("OhSV"),o("NDEG")),i=Object(s.a)(r=function(t){function e(e){var o;return(o=t.call(this,e)||this).scrollImages=function(t){var e=t.target,r=e.scrollLeft/e.clientWidth,n=Math.round(r),s=Math.abs(n-r);(Number.isInteger(r)||s<.1)&&o.setState({imageIdx:n})},o.sortByName=function(t,e){var r=o.props.allDogs,n=void 0===r?[]:r,s=n.find((function(e){return e.id===t})),a=n.find((function(t){return t.id===e}));return s&&a&&s.name>a.name?1:-1},o.state={imageIdx:0},o}var o,r;return r=t,(o=e).prototype=Object.create(r.prototype),o.prototype.constructor=o,o.__proto__=r,e.prototype.render=function(){var t=this,e=this.props,o=e.dogs,r=e.allDogs,s=void 0===r?[]:r,i=e.size,c=void 0===i?"medium":i,l=e.onDogClick,u=void 0===l?function(){}:l;return Object(n.h)("div",{class:"w-100"},Object(n.h)("div",{class:"d-flex flex-row flex-nowrap",style:"overflow: auto; scroll-snap-type: x mandatory;",onScroll:this.scrollImages},o&&o.sort(this.sortByName).map((function(e){var r=s.find((function(t){return t.id===e}));return r?Object(n.h)("div",{class:"col clearfix position-relative p-0 mx-2"},Object(n.h)("div",{class:"w-100 h-100 text-center rounded-lg imageContainer d-flex justify-content-center align-items-center",style:"\n                                        flex-wrap: wrap;\n                                        overflow-y: hidden;\n                                    ",onTouchstart:function(t){t.stopPropagation()},onTouchend:function(t){t.stopPropagation()},onTouchmove:function(t){t.stopPropagation()}},Object(n.h)(a.a,{stores:t.props.stores,dog:r,dogs:s.filter((function(t){return o.indexOf(t.id)>-1})).sort((function(t,e){return t.name>e.name?1:-1})),className:"mx-auto",showName:!0,showPosition:!1,size:c,onDogClick:u}))):""}))))},e}(n.Component))||r;e.a=i},irB3:function(t,e,o){"use strict";(function(t){var r,n=o("hosL"),s=o("Utv1"),a=o("/eY4"),i=(o("OhSV"),o("ZOvn"),Object(a.a)(r=function(e){function o(){return e.apply(this,arguments)||this}var r,a;return a=e,(r=o).prototype=Object.create(a.prototype),r.prototype.constructor=r,r.__proto__=a,o.prototype.render=function(){var e=this.props,o=e.value,r=void 0===o?0:o,a=e.smallUnit,i=this.props.stores.userStore.user.settings;return(void 0===i?{}:i).imperial?Object(n.h)(t,null,Object(n.h)("nobr",null,s.a.format(function(t){return 3.28084*t}(r),0)," ",a?Object(n.h)(t,null,Object(n.h)("small",null,Object(n.h)("small",null,Object(n.h)("small",{class:"ml-0 text-muted"},"ft")))):Object(n.h)(t,null,"ft"))):Object(n.h)(t,null,Object(n.h)("nobr",null,s.a.format(r,0)," ",a?Object(n.h)(t,null,Object(n.h)("small",null,Object(n.h)("small",null,Object(n.h)("small",{class:"ml-0 text-muted"},"m")))):Object(n.h)(t,null,"m")))},o}(n.Component))||r);e.a=i}).call(this,o("hosL").Fragment)},nHdA:function(t,e,o){"use strict";(function(t){var r,n=o("hosL"),s=o("Utv1"),a=o("/eY4"),i=o("OhSV"),c=(o("ZOvn"),Object(a.a)(r=function(e){function o(){return e.apply(this,arguments)||this}var r,a;return a=e,(r=o).prototype=Object.create(a.prototype),r.prototype.constructor=r,r.__proto__=a,o.prototype.render=function(){var e=this.props,o=e.value,r=void 0===o?0:o,a=e.smallUnit,c=this.props.stores.userStore.user.settings;return(void 0===c?{}:c).imperial?Object(n.h)(t,null,Object(n.h)("nobr",null,s.a.format(function(t){return.621371*t}(r),1)," ",a?Object(n.h)(t,null,Object(n.h)("small",null,Object(n.h)("small",null,Object(n.h)("small",{class:"ml-0 text-muted"},Object(n.h)(i.c,{id:"workouts.mph"},"mph"))))):Object(n.h)(t,null,Object(n.h)(i.c,{id:"workouts.mph"},"mph")))):Object(n.h)(t,null,Object(n.h)("nobr",null,s.a.format(r,1)," ",a?Object(n.h)(t,null,Object(n.h)("small",null,Object(n.h)("small",null,Object(n.h)("small",{class:"ml-0 text-muted"},Object(n.h)(i.c,{id:"workouts.kmt"},"km/t"))))):Object(n.h)(t,null,Object(n.h)(i.c,{id:"workouts.kmt"},"km/t"))))},o}(n.Component))||r);e.a=c}).call(this,o("hosL").Fragment)},om2D:function(t,e,o){"use strict";var r,n=o("hosL"),s=o("/eY4"),a=(o("cneo"),o("Utv1"),o("u2zT")),i=Object(s.a)(r=function(t){function e(e){var o;return(o=t.call(this,e)||this).handleAddImage=function(t){var e=o.props.addToImages,r=void 0===e||e,n=o.props,s=n.updateField,a=n.object,i=n.field;if(i&&s({id:a.id,field:i,value:t,skipTimer:!0}),r){var c=[];c.push(t),s({id:a.id,field:"images",value:c,skipTimer:!0})}},o.state={files:[]},o}var o,r;return r=t,(o=e).prototype=Object.create(r.prototype),o.prototype.constructor=o,o.__proto__=r,e.prototype.render=function(){var t=this.props,e=t.uploadStatus,o=void 0===e?function(){}:e,r=t.before,s=void 0===r?function(){}:r,i=t.after,c=void 0===i?function(){}:i,l=t.autoOpen,u=void 0===l||l;return Object(n.h)("div",{class:"row"},Object(n.h)("div",{class:"col-12"},Object(n.h)(a.a,{handleAddImage:this.handleAddImage,uploadStatus:o,apiUrl:"/api/fileupload",before:s,after:c,autoOpen:u},Object(n.h)("div",{style:{height:30,width:"100%"}}))))},e}(n.Component))||r;e.a=i},pJjI:function(t,e,o){"use strict";(function(t){var r,n=o("hosL"),s=o("Utv1"),a=o("/eY4"),i=o("OhSV"),c=(o("/DnB"),Object(a.a)(r=function(e){function o(){for(var t,o=arguments.length,r=new Array(o),n=0;n<o;n++)r[n]=arguments[n];return(t=e.call.apply(e,[this].concat(r))||this).toggleTeam=function(e){var o=t.props,r=o.callback,n=o.unsetTeamIfSelected,a=t.props.stores,i=a.dogStore,c=a.workoutStore;(void 0===n||n)&&e===i.currentTeam?(i.setCurrentTeam(void 0),c.setCurrentTeam(void 0)):(i.setCurrentTeam(e),c.setCurrentTeam(e)),s.a.isDefined(r)&&r()},t.showAllTeams=function(){var e=t.props.callback,o=t.props.stores,r=o.workoutStore;o.dogStore.setCurrentTeam(void 0),r.setCurrentTeam(void 0),s.a.isDefined(e)&&e()},t}var r,a;return a=e,(r=o).prototype=Object.create(a.prototype),r.prototype.constructor=r,r.__proto__=a,o.prototype.render=function(){var e=this,o=this.props.stores,r=o.userStore.teams,s=o.dogStore.currentTeam,a=this.props,c=a.highlight,l=a.showAll,u=void 0===l||l;return Object(n.h)("div",{class:"row mt-2"},Object(n.h)("div",{class:"w-100 overflow-hidden"},Object(n.h)("div",{class:"d-flex flex-row flex-nowrap pb-2 px-1",style:"overflow: auto; scroll-snap-type: x mandatory;"},r&&r.map((function(o,a){return Object(n.h)("div",{class:"col mb-0 px-0 clearfix",key:o.id},Object(n.h)("button",{class:"btn btn-sm btn-block \n\t\t\t\t\t\t\t\t\t\trounded-none "+(0===a?"rounded-pill-left":a+1===r.length?"rounded-pill-right":"")+"\n\t\t\t\t\t\t\t\t\t\t"+(s===o.id?"btn-success":"btn-outline-success")+"\n\t\t\t\t\t\t\t\t\t\ttext-nowrap clearfix",style:"text-overflow: ellipsis; overflow: hidden;",onClick:function(){return e.toggleTeam(o.id)}},Object(n.h)("i",{class:"fas fa-users"})," ",o.name,c&&c.indexOf(o.id)>-1&&Object(n.h)(t,null,s===o.id?Object(n.h)(t,null,Object(n.h)("i",{class:"fas fa-check float-right"})):Object(n.h)(t,null,Object(n.h)("div",{class:"spinner-grow text-warning float-right",role:"status"},Object(n.h)("span",{class:"sr-only"},"Loading...")),Object(n.h)("i",{class:"far fa-hand-point-left float-right",style:"font-size: 2.0em;"})))))}))),u&&Object(n.h)("div",{class:"row"},Object(n.h)("div",{class:"col-12 mb-1 px-1 d-flex justify-content-center"},Object(n.h)("button",{class:"btn btn-sm rounded-lg btn-link text-nowrap clearfix",style:"text-overflow: ellipsis; overflow: hidden;",onClick:this.showAllTeams},Object(n.h)("i",{class:"fas fa-users"})," ",Object(n.h)(i.c,{id:"teams.show-all"},"Show all"))))))},o}(n.Component))||r);e.a=c}).call(this,o("hosL").Fragment)},sqi2:function(t,e,o){"use strict";(function(t){function r(t,e){var o=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),o.push.apply(o,r)}return o}function n(t,e,o){return e in t?Object.defineProperty(t,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[e]=o,t}var s,a=o("hosL"),i=o("Utv1"),c=o("/eY4"),l=o("cneo"),u=o("OhSV"),d=o("fh8t"),h=o.n(d),m=o("3wGD"),p=(o("ETxl"),o("ZOvn")),b={showAddComment:{},showAllComments:!1,showAllReplies:{},viewImageIdx:{}},f=Object(c.a)(s=function(e){function o(t){var o;return(o=e.call(this,t)||this).likeComment=function(t){return new Promise((function(e,r){var n,s,a,i,c;return s=void 0===(n=o.props.callback)?function(){}:n,a=t.target.parentElement.dataset.id||t.target.dataset.id,i=o.props.workout,Promise.resolve(o.props.stores.workoutStore.likeWorkoutComment({id:i.id,commentId:a})).then((function(t){try{return(c=t)&&200===c.status&&s({type:"likeComment",workout:i,commentId:a,response:c}),e(!0)}catch(t){return r(t)}}),r)}))},o.likeReply=function(t){return new Promise((function(e,r){var n,s,a,i,c,l;return s=void 0===(n=o.props.callback)?function(){}:n,a=t.target.parentElement.dataset.id||t.target.dataset.id,i=t.target.parentElement.dataset.comment||t.target.dataset.comment,c=o.props.workout,Promise.resolve(o.props.stores.workoutStore.likeWorkoutCommentReply({id:c.id,replyId:a,commentId:i})).then((function(t){try{return(l=t)&&200===l.status&&s({type:"likeReply",workout:c,commentId:i,replyId:a,response:l}),e()}catch(t){return r(t)}}),r)}))},o.replyComment=function(t){return new Promise((function(e){var r=t.target.parentElement.dataset.id||t.target.dataset.id,n=o.state.showAddComment;return n[r]=!n[r],o.setState({showAddComment:n},(function(){o.inputRef[r]&&o.inputRef[r].focus()})),e()}))},o.toggleComments=function(){o.setState({showAllComments:!o.state.showAllComments})},o.toggleReplies=function(t){var e=t.target.parentElement.dataset.id||t.target.dataset.id,r=o.state.showAllReplies;r[e]=!r[e],o.setState({showAllReplies:r})},o.viewImage=function(t){var e=t.target.closest("img").dataset,r=o.state.viewImageIdx;r[e.id]=e.idx,o.setState({viewImageIdx:r})},o.translate=function(t){return new Promise((function(e,r){function n(){return o.setState({showOriginal:p,translatedText:f}),e()}var s,a,i,c,l,u,d,h,m,p,b,f,g;return t.preventDefault(),t.stopPropagation(),s=t.target.closest("button").dataset,c=o.props.workout,u=(l=o.props.stores).teamStore,d=l.userStore.user,f=void 0===(b=(h=o.state).translatedText)?{}:b,(p=void 0===(m=h.showOriginal)?{}:m)[g=(i=s.commentid)+((a=s.replyid)?"-"+a:"")]=0,a?Promise.resolve(u.translateCommentReply({commentid:i,replyid:a,object:c,user:d})).then(function(t){try{return f[g]=t,n.call(this)}catch(t){return r(t)}}.bind(this),r):Promise.resolve(u.translateComment({commentid:i,object:c,user:d})).then(function(t){try{return f[g]=t,n.call(this)}catch(t){return r(t)}}.bind(this),r)}))},o.showOriginal=function(t){var e=t.target.closest("button").dataset,r=e.replyid,n=e.commentid;t.preventDefault(),t.stopPropagation();var s=o.state.showOriginal,a=void 0===s?{}:s;a[n+(r?"-"+r:"")]=1,o.setState({showOriginal:a})},o.state=function(t){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?r(Object(o),!0).forEach((function(e){n(t,e,o[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):r(Object(o)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(o,e))}))}return t}({},b),o.inputRef={},o}var s,c;return c=e,(s=o).prototype=Object.create(c.prototype),s.prototype.constructor=s,s.__proto__=c,o.prototype.render=function(){var e,o=this,r=this.state,n=r.showAddComment,s=r.showAllComments,c=r.showAllReplies,d=r.viewImageIdx,b=r.showOriginal,f=void 0===b?{}:b,g=r.translatedText,O=void 0===g?{}:g,v=this.props,j=v.workout,y=v.callback,w=void 0===y?function(){}:y,k=v.compact,x=this.props.stores,S=x.userStore,D=x.teamStore,P=S.user,C=S.isAdmin,T=P.language,L=void 0===T?"en":T,I=[],_=0,E=0;return j.comments&&(_=j.comments.length,s?I=j.comments:(e=void 0!==k&&k?0:1,I=j.comments.slice(Math.max(_-e,0))),E=I.length),Object(a.h)("div",null,j&&I&&I.reverse().map((function(r){var s=r.user,b=void 0===s?{}:s,g=D.findPublicTeamByMembers(b.id),v=p.a.displayNameShort(b),y=p.a.displayName(b),k=b.image||(b.images?b.images[0]:void 0),x=r.likes&&r.likes.findIndex((function(t){return t.user===P.id}))>-1,S=[],T=0,I=0;r.comments&&(T=r.comments.length,I=(S=c[r.id]?r.comments:r.comments.slice(0,e)).length);var _=[];if(r.images){var E=Object(l.i)(r.images);_.push.apply(_,E)}var R=d[r.id]?d[r.id]:0,U=_&&_[R]?_[R]:null,z=r.currentLocationGeocode,A=void 0===z?{}:z,M=D.getCommentTranslations({object:j,commentid:r.id,targetLang:L})||O[r.id],W=M||r.comment;return f[r.id]&&(W=r.comment),Object(a.h)("div",{class:"row"},Object(a.h)("div",{class:"col-12 d-flex mb-2 position-relative"},Object(a.h)("div",{class:"text-center border rounded-circle imageRounded imageRoundedSmall",style:(k?'background-image: url("'+k.s3SmallLink+'"); background-size: cover;':"")+" border-width: 3px !important;"},!b.image&&Object(a.h)("span",{class:"font-weight-lighter",style:"font-size: 15px;"},v)),Object(a.h)("div",{class:"flex-grow-1 pl-3 pt-0",style:"line-height: 1.2em;"},Object(a.h)("div",{class:"bg-light p-2 rounded rounded-lg"},Object(a.h)("div",null,Object(a.h)("span",{style:"font-size: 0.95em;"},Object(a.h)("h5",{class:"font-weight-bold mb-0",style:"font-size: 1.0em;"},y),g&&g.length>0&&Object(a.h)("div",{class:"mb-2"},Object(a.h)("small",{class:"font-weight-lighter text-muted"},g.filter((function(t){return 1===t.public})).slice(0,2).map((function(e){return Object(a.h)(t,null,Object(a.h)("a",{href:"/teams/public/"+e.uuidv4,class:"mr-2"},Object(a.h)("i",{class:"fas fa-users text-muted"})," ",e.name))})))),Object(a.h)(h.a,{markdown:p.a.replaceImages(W,r.images,L),markdownOpts:p.a.getMarkdownOptions()}))),Object(a.h)("div",{class:"container-fluid px-3 mt-1"},U&&Object(a.h)("div",{class:"clearfix row"},Object(a.h)("div",{class:"col-12 px-0 overflow-hidden",style:"max-height: 30vh;"},Object(a.h)("img",{loading:"lazy",class:"img-fluid",style:"min-width: 100px;",src:U.s3LargeLink}))),_&&_.length>1&&Object(a.h)("div",{class:"clearfix d-flex flex-wrap row"},_.map((function(e,n){return Object(a.h)(t,null,Object(a.h)("div",{class:"col px-0 overflow-hidden",style:"max-height: 100px; min-width: 100px;"},Object(a.h)("img",{loading:"lazy",class:"img-fluid border",style:"min-width: 100px;",src:e.s3SmallLink,onClick:o.viewImage,"data-id":r.id,"data-idx":n})))}))))),Object(a.h)("small",null,Object(a.h)("button",{class:"btn btn-sm btn-link py-0 "+(x?"text-primary":""),onClick:o.likeComment,"data-id":r.id},Object(a.h)(u.c,{id:"comments.like"},"Lik")),"-",Object(a.h)("button",{class:"btn btn-sm btn-link py-0",onClick:o.replyComment,"data-id":r.id},Object(a.h)(u.c,{id:"comments.comment-add"},"Kommentar")),r.language!==L&&Object(a.h)(t,null,"-",!f[r.id]&&M?Object(a.h)(t,null,Object(a.h)("button",{type:"button",class:"btn btn-sm btn-link","data-commentid":r.id,onClick:o.showOriginal},Object(a.h)("i",{class:"fas fa-cog"}),"  ",Object(a.h)(u.c,{id:"home.translate-show-original"},"Show original"))):Object(a.h)(t,null,Object(a.h)("button",{type:"button",class:"btn btn-sm btn-link",onClick:o.translate,"data-commentid":r.id},Object(a.h)("i",{class:"fas fa-cog"})," ",Object(a.h)(u.c,{id:"home.translate-to"},"See translation")))),"-",Object(a.h)("button",{class:"btn btn-sm btn-link py-0 disabled"},i.a.formatDistance(r.createdDate,new Date,{locale:"no-NB"}),r.updatedDate&&Object(a.h)(t,null,Object(a.h)("span",{class:"font-weight-light ml-2"},"(Edited ",i.a.formatDistance(r.updatedDate,new Date,{locale:"no-NB"}),")"))),C&&A&&A.formatted_address&&Object(a.h)(t,null,Object(a.h)("span",{class:"ml-2 text-muted"},Object(a.h)("i",{class:"fas fa-map-marker-alt"})," ",A.formatted_address)))),r.likes&&r.likes.length>0&&Object(a.h)("small",{class:"position-absolute bg-light shadow-sm rounded-lg py-0 px-1",style:"bottom: 20px; right: 15px;"},Object(a.h)("i",{class:"fas fa-thumbs-up text-primary"})," ",r.likes.length)),Object(a.h)("div",{class:"col-11 offset-1 mb-2"},r&&S&&S.map((function(e){var n=e.user,s=void 0===n?{}:n,c=D.findPublicTeamByMembers(s.id),l=s.firstname?""+i.a.ucfirst(s.firstname,!0)+i.a.ucfirst(s.lastname,!0):""+i.a.ucfirst(s.email||"",!0),d=s.firstname?s.firstname+" "+s.lastname:""+s.email,m=s.image||(s.images?s.images[0]:void 0),b=e.likes&&e.likes.findIndex((function(t){return t.user===P.id}))>-1,g=D.getCommentReplyTranslations({object:j,commentid:r.id,replyid:e.id,targetLang:L})||O[r.id+"-"+e.id],v=g||e.comment;return f[r.id+"-"+e.id]&&(v=e.comment),Object(a.h)("div",{class:"row"},Object(a.h)("div",{class:"col-12 d-flex mb-2 position-relative"},Object(a.h)("div",{class:"text-center border rounded-circle imageRounded imageRoundedThumb",style:(m?'background-image: url("'+m.s3SmallLink+'"); background-size: cover;':"")+" border-width: 3px !important;"},!s.image&&Object(a.h)("span",{class:"font-weight-lighter",style:"font-size: 15px;"},l)),Object(a.h)("div",{class:"flex-grow-1 pl-3 pt-0",style:"line-height: 1.2em;"},Object(a.h)("div",{class:"bg-light p-2 rounded-lg"},Object(a.h)("span",{style:"font-size: 0.95em;"},Object(a.h)("h5",{class:"font-weight-bold mb-0",style:"font-size: 1.0em;"},d),c&&c.length>0&&Object(a.h)("div",{class:"mb-2"},Object(a.h)("small",{class:"font-weight-lighter text-muted"},c.filter((function(t){return 1===t.public})).slice(0,2).map((function(e){return Object(a.h)(t,null,Object(a.h)("a",{href:"/teams/public/"+e.uuidv4,class:"mr-2"},Object(a.h)("i",{class:"fas fa-users text-muted"})," ",e.name))})))),Object(a.h)(h.a,{markdown:p.a.replaceImages(v,e.images,L),markdownOpts:p.a.getMarkdownOptions()}))),Object(a.h)("small",null,Object(a.h)("button",{class:"btn btn-sm btn-link py-0 "+(b?"text-primary":""),onClick:o.likeReply,"data-comment":r.id,"data-id":e.id},Object(a.h)(u.c,{id:"comments.like"},"Lik")),"-",Object(a.h)("button",{class:"btn btn-sm btn-link py-0",onClick:o.replyComment,"data-id":r.id},Object(a.h)(u.c,{id:"comments.comment-add"},"Kommentar")),e.language!==L&&Object(a.h)(t,null,"-",!f[r.id+"-"+e.id]&&g?Object(a.h)(t,null,Object(a.h)("button",{type:"button",class:"btn btn-sm btn-link","data-commentid":r.id,"data-replyid":e.id,onClick:o.showOriginal},Object(a.h)("i",{class:"fas fa-cog"}),"  ",Object(a.h)(u.c,{id:"home.translate-show-original"},"Show original"))):Object(a.h)(t,null,Object(a.h)("button",{type:"button",class:"btn btn-sm btn-link",onClick:o.translate,"data-commentid":r.id,"data-replyid":e.id},Object(a.h)("i",{class:"fas fa-cog"})," ",Object(a.h)(u.c,{id:"home.translate-to"},"See translation")))),"-",Object(a.h)("button",{class:"btn btn-sm btn-link py-0 disabled"},i.a.formatDistance(e.createdDate,new Date,{locale:"no-NB"})))),e.likes&&Object(a.h)("small",{class:"position-absolute bg-light shadow-sm rounded-lg py-0 px-1",style:"bottom: 20px; right: 15px;"},Object(a.h)("i",{class:"fas fa-thumbs-up text-primary"})," ",e.likes.length)))})),T-I>0&&Object(a.h)("div",null,Object(a.h)("button",{class:"btn btn-sm btn-link py-0",onClick:o.toggleReplies,"data-id":r.id},Object(a.h)(u.c,{id:"comments.show-more",fields:{more:T-I}},"Vis ",T-I," flere kommentarer...")))),n[r.id]&&Object(a.h)("div",{class:"col-11 offset-1 d-flex mb-2 position-relative"},Object(a.h)(m.a,{stores:o.props.stores,workout:j,callback:w,commentId:r.id,inputRef:function(t){return o.inputRef[r.id]=t},inputRefObject:o.inputRef})))})),_-E>0&&Object(a.h)("div",null,Object(a.h)("button",{class:"btn btn-sm btn-link py-0",onClick:this.toggleComments},Object(a.h)(u.c,{id:"comments.show-more",fields:{more:_-E}},"Vis ",_-E," flere kommentarer..."))),s&&Object(a.h)("div",null,Object(a.h)("button",{class:"btn btn-sm btn-link py-0",onClick:this.toggleComments},Object(a.h)(u.c,{id:"comments.hide-all-comments"},"Skjul alle kommentarene."))))},o}(a.Component))||s;e.a=f}).call(this,o("hosL").Fragment)},u2zT:function(t,e,o){"use strict";var r,n=o("hosL"),s=o("/eY4"),a=o("Utv1"),i=o("OhSV"),c=Object(s.a)(r=function(t){function e(e){var o;return(o=t.call(this,e)||this).dropRef=Object(n.createRef)(),o.handleDrag=function(t){t.preventDefault(),t.stopPropagation()},o.handleDragIn=function(t){t.preventDefault(),t.stopPropagation(),o.dragCounter++,t.dataTransfer.items&&t.dataTransfer.items.length>0&&o.setState({drag:!0})},o.handleDragOut=function(t){t.preventDefault(),t.stopPropagation(),o.dragCounter--,0===o.dragCounter&&o.setState({drag:!1})},o.handleDrop=function(t){if(t.preventDefault(),t.stopPropagation(),o.setState({drag:!1}),t.dataTransfer.files&&t.dataTransfer.files.length>0){for(var e=0,r=t.dataTransfer.files.length;e<r;e+=1){o.readLocalFile(t.dataTransfer.files[e])}o.dragCounter=0}},o.handleAddFiles=function(t){t.preventDefault();var e=t.target;for(var r=0,n=e.files.length;r<n;r+=1){o.readLocalFile(e.files[r])}},o.handleEvent=function(){0},o.handleUpload=function(t){var e=o.props,r=e.uploadStatus,n=e.before,s=void 0===n?function(){}:n,i=e.after,c=void 0===i?function(){}:i;(void 0===r?function(){}:r)(!1),a.a.isFunction(s)&&s();var l=new FormData;l.append("files[]",t);var u={progress:1};u.xhr=new XMLHttpRequest,u.xhr.upload.addEventListener("progress",(function(e){o.updateProgress(e,t)})),u.xhr.addEventListener("loadstart",(function(e){o.handleEvent(e,t)})),u.xhr.addEventListener("load",(function(e){o.handleEvent(e,t)})),u.xhr.addEventListener("loadend",(function(e){var r=t;a.a.isFunction(c)&&c(),o.handleEvent(e,r)})),u.xhr.addEventListener("progress",(function(e){o.handleEvent(e,t)})),u.xhr.addEventListener("error",(function(e){o.handleEvent(e,t)})),u.xhr.addEventListener("abort",(function(e){o.handleEvent(e,t)})),u.xhr.addEventListener("readystatechange",(function(e){o.uploadDone(e,t)})),u.xhr.open("POST",""+a.a.getApiServer()+o.props.apiUrl),u.xhr.setRequestHeader("Authorization","Bearer "+a.a.getJwtToken()),u.xhr.send(l);var d=t.name,h=o.state.uploadedFilesData;h[d]||(h[d]={}),h[d].uploadMeta=u,h[d].imageNum=o.state.imageNum,o.setState({uploadedFilesData:h})},o.readLocalFile=function(t){return new Promise((function(e,r){var n=new FileReader;n.addEventListener("error",(function(t){r(t)})),n.addEventListener("load",(function(r){var n=t,s=n.name,a=o.state.uploadedFilesData;a[s]||(a[s]={}),a[s].event=r,o.setState({uploadedFilesData:a}),o.handleUpload(n),e(r)})),n.readAsDataURL(t)}))},o.updateProgress=function(t,e){if(t.lengthComputable){var r=e.name,n=o.state.uploadedFilesData,s=t.loaded/t.total*100;0,n[r].uploadMeta.progress=s,o.setState({uploadedFilesData:n})}},o.uploadDone=function(t,e){var r=e.name,n=o.state.uploadedFilesData,s=n[r].uploadMeta;if(s&&4===s.xhr.readyState&&201===s.xhr.status)for(var a=JSON.parse(s.xhr.responseText).data.files,i=0;i<a.length;i+=1){o.addFileToUpload(a[i]),o.fileInput.value=""}},o.state={drag:!1,loadingProgress:0,uploadedFiles:[],uploadedFilesData:{}},o}var o,r;r=t,(o=e).prototype=Object.create(r.prototype),o.prototype.constructor=o,o.__proto__=r;var s=e.prototype;return s.addFileToUpload=function(t){var e=this.state.uploadedFilesData,o=this.props,r=o.handleAddImage,n=o.uploadStatus,s=void 0===n?function(){}:n;delete e[t.name],this.setState({uploadedFilesData:e}),r(t),s(!0)},s.componentDidMount=function(){var t=this,e=this.dropRef.current;e.addEventListener("dragenter",this.handleDragIn),e.addEventListener("dragleave",this.handleDragOut),e.addEventListener("dragover",this.handleDrag),e.addEventListener("drop",this.handleDrop),this.props.autoOpen&&setTimeout((function(){t.fileInput.click()}),10)},s.componentWillUnmount=function(){var t=this.dropRef.current;t.removeEventListener("dragenter",this.handleDragIn),t.removeEventListener("dragleave",this.handleDragOut),t.removeEventListener("dragover",this.handleDrag),t.removeEventListener("drop",this.handleDrop)},s.render=function(){var t=this,e=this.state.uploadedFilesData;return Object(n.h)("div",{style:{position:"relative"},ref:this.dropRef},this.state.drag&&Object(n.h)("div",{style:{border:"dashed grey 4px",backgroundColor:"rgba(255,255,255,.8)",position:"absolute",top:0,bottom:0,left:0,right:0,zIndex:9999}},Object(n.h)("div",{style:{position:"absolute",top:"50%",right:0,left:0,textAlign:"center",color:"grey",fontSize:36}},Object(n.h)("div",null,Object(n.h)(i.c,{id:"imageupload.drag-files-here"},"drop your files here :)")))),Object(n.h)("div",null,Object(n.h)("input",{class:"btn btn-info col-sm-12",multiple:!0,type:"file",id:"image-file",onchange:this.handleAddFiles,ref:function(e){t.fileInput=e}})),Object(n.h)("div",null,Object.keys(e).length>0?Object(n.h)("h3",null,Object(n.h)(i.c,{id:"imageupload.upload-images"},"Uploaded images")):"",Object(n.h)("ul",{class:"list-group"},Object.keys(e).map((function(t){var o=e[t].uploadMeta,r=void 0===o?{}:o,s=t.match(/(jpg|jpeg|png|gif|heic|heif|svg|webp|tif)/i);return Object(n.h)("li",{class:"list-group-item list-group-item-action flex-column align-items-start"},Object(n.h)("div",{class:"d-flex w-100 justify-content-between"},s&&Object(n.h)("img",{class:"img-fluid mr-3",src:e[t].event.target.result,style:"max-height: 50px;"}),Object(n.h)("small",null,e[t].event.uploadDone),Object(n.h)(i.c,{id:"imageupload.uploading-image"},"Laster opp bilde..."),Object(n.h)("small",null,a.a.formatBytes(e[t].event.total,2))),Object(n.h)("div",{class:"progress mt-1",style:"height: 4px;"},Object(n.h)("div",{class:"progress-bar progress-bar-striped progress-bar-animated bg-success",role:"progressbar",style:"width: "+r.progress+"%; height: 4px;","aria-valuenow":r.progress,"aria-valuemin":"0","aria-valuemax":"100"})))})))),this.props.children)},e}(n.Component))||r;e.a=c},"vY+r":function(t,e,o){"use strict";(function(t){function r(t,e){var o=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),o.push.apply(o,r)}return o}function n(t,e,o){return e in t?Object.defineProperty(t,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[e]=o,t}var s,a=o("hosL"),i=o("Utv1"),c=o("/eY4"),l=o("OhSV"),u=o("ZOvn"),d={},h=Object(c.a)(s=function(e){function o(t){var o;return(o=e.call(this,t)||this).toggleViews=function(){var t=o.props;(t.isTeamAdmin||t.isAdmin)&&o.setState({showViewList:!o.state.showViewList})},o.state=function(t){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?r(Object(o),!0).forEach((function(e){n(t,e,o[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):r(Object(o)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(o,e))}))}return t}({},d),o}var s,c;return c=e,(s=o).prototype=Object.create(c.prototype),s.prototype.constructor=s,s.__proto__=c,o.prototype.render=function(){var e=this.state.showViewList,o=this.props.stores,r=o.storyStore,n=o.teamStore,s=o.workoutStore,c=this.props,d=c.views,h=c.type,m=void 0===h?"story":h,p=c.onTeamClick,b=void 0===p?function(){}:p,f=[];Object.entries(c.object.statistics).forEach((function(t){Object.entries(t[1]).forEach((function(t){var e=t[1];e.viewUsers&&f.push(e.viewUsers)}))}));var g=f.flat().slice(0,50);return Object(a.h)(t,null,Object(a.h)("div",{class:"d-flex justify-content-between mb-2"},Object(a.h)("small",{class:"ml-2 text-muted",onClick:this.toggleViews},d," ",Object(a.h)(l.c,{id:"story.views"},"views"))),e&&Object(a.h)("div",{class:"mt-3 mb-3"},g&&g.map((function(e){var o,c,l;if("story"===m?(o=r.findPublicUser(e),c=r.findPublicTeamByMembers(e)):"team"===m?(o=n.findPublicUser(e),c=n.findPublicTeamByMembers(e)):"workout"===m&&(o=s.findPublicUser(e),c=s.findPublicTeamByMembers(e)),!o)return"";i.a.isArray(c)&&(l=c.find((function(t){return 1===t.public})));var d=u.a.getImage({user:o,team:l,priority:"user"}),h=u.a.displayNameShort(o),p=u.a.displayName(o,!0);return Object(a.h)("div",{class:"d-flex flex-row position-relative font-weight-light mb-1"},l?Object(a.h)(t,null,Object(a.h)("a",{href:"/teams/public/"+l.uuidv4,title:l.name,onClick:function(t){return b(t,l.uuidv4)},class:"stretched-link"},Object(a.h)("div",{class:"text-center border rounded-circle imageRounded imageRoundedThumb",style:d?'background-image: url("'+d+'"); background-size: cover;':""},!d&&Object(a.h)("div",{class:"",style:"font-size: 12px; padding-top: 3px;"},h))),Object(a.h)("div",{class:"ml-2 "},p," ",Object(a.h)("span",{class:"font-weight-lighter"},"- ",l.name))):Object(a.h)(t,null,Object(a.h)("div",{class:"text-center border rounded-circle imageRounded imageRoundedThumb",style:(d?'background-image: url("'+d+'"); background-size: cover;':"")+" opacity: 0.5;"},!d&&Object(a.h)("div",{class:"text-muted",style:"font-size: 12px; padding-top: 3px;"},h)),Object(a.h)("div",{class:"ml-2"},p)))})),d>g.length&&Object(a.h)(t,null,Object(a.h)("small",{class:"text-muted"},Object(a.h)(l.c,{id:"story.limited-to"},"Limited to max 50 users.")))))},o}(a.Component))||s;e.a=h}).call(this,o("hosL").Fragment)}}]);
//# sourceMappingURL=40.chunk.3d6a1.js.map