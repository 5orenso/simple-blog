(window.webpackJsonp=window.webpackJsonp||[]).push([[86],{EMNp:function(e,t,s){"use strict";s.r(t),function(e){function o(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,o)}return s}function a(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?o(Object(s),!0).forEach((function(t){r(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):o(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function r(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function n(e,t){const s=void 0!==e.musher;return(void 0!==t.musher)-s||!0===s&&e.musher.bib-t.musher.bib||0}var c,i=s("hosL"),l=(s("Utv1"),s("/eY4")),p=(s("OhSV"),s("go65"),s("Y3FI"),s("ZOvn")),u=s("eT2M"),d=s.n(u);const h=p.a.marginTop(!0),m=p.a.marginBottom(),b={};let f=Object(l.a)(c=class extends i.Component{constructor(e){var t;super(e),t=this,this.loadLiveRaceResults=async function(e=t.props,s,o){const{raceStore:a}=e.stores,{race:r}=a;await a.getRaceTrackerData(r.raceTrackerRace),a.getRaceTrackerActiveTeams(s,o)},this.loadRaceResults=async function(e=t.props,s,o){const{raceStore:a}=e.stores,{raceid:r}=e;await a.loadWorkoutSummary(s,r),a.getWorkoutSummaryActiveTeams(s,o)},this.loadRace=async function(e=t.props){t.setState({isLoading:!0});const{raceStore:s,appState:o}=e.stores,{raceid:a,classid:r}=e;await s.load(a);const{race:n}=s,{focusOnMushers:c}=o,{selectedClassIds:i=[]}=o,l=r||i[0];r&&o.toggleSelectedClassId(r,!0);const p=n.classes.filter(e=>e.id===l).filter(e=>e.contestants&&e.contestants.length>0).map(e=>e.contestants.filter(e=>e.team>0).map(e=>e.team)).flat();p.length>0&&await s.loadTeams(p.join(",")),n.liveRace>0?await t.loadLiveRaceResults(t.props,p,c):await t.loadRaceResults(t.props,p,c),s.getAllClassesSortedBy();const u=s.getClassById(l);u&&u.raceTrackerResults&&s.getRacetrackerResults(u.raceTrackerResults),clearTimeout(t.updateTimer.reload),t.updateTimer.reload=setTimeout((async function(){const s=Math.floor((new Date).getTime()/1e3);t.setState({reloadLastEpoch:s}),t.loadRace(e)}),6e4),t.scrollList(),t.setState({isLoading:!1})},this.scrollList=()=>{this.scrollTimer=setTimeout((async function(){const{scrollPosition:e}=t.state;let s=e+1350;s>t.contestantContainer.scrollWidth-t.contestantContainer.clientWidth+1350?s=0:(t.contestantContainer.scrollTo({top:0,left:s,behavior:"smooth"}),t.scrollList()),t.setState({scrollPosition:s})}),5e3)},this.toggleFocusOnMusher=e=>{const t=e.target.parentElement.dataset.musherid||e.target.dataset.musherid,{appState:s,raceStore:o}=this.props.stores;s.toggleFocusOnMusher(t);const{focusOnMushers:a}=s,{race:r}=o;r.liveRace>0?o.getRaceTrackerActiveTeams(null,a):o.getWorkoutSummaryActiveTeams(null,a)},this.state=a(a({},b),{},{scrollPosition:0}),this.updateTimer={},this.scrollTimer=null,this.contestantContainer=null}componentWillUnmount(){clearTimeout(this.updateTimer.reload),clearTimeout(this.updateTimer.tick)}componentDidMount(){this.loadRace()}componentWillReceiveProps(e){this.props.classid!==e.classid&&this.loadRace(e)}render(){const{userStore:t,raceStore:s,appState:o}=this.props.stores,{classid:a,position:r="right",limit:c=10}=this.props,{user:l={},teams:u=[]}=t,{language:b="en"}=l,{selectedClassIds:f=[],focusOnMushers:g=[]}=o,{race:v={},classes:O=[]}=s,{raceTrackerResults:w}=s,y=new Date(v.endDate);y.setHours(y.getHours()+2);const j=v.classes&&v.classes.find(e=>e.id===a)||{};let T=[];return w&&w.data?T=w.data.slice(0,c).map(e=>{const t=s.raceTrackerMapLine(e),o=parseInt(t.Bib,10);let a={};return O&&O[j.id].contestants&&(a=O[j.id].contestants.find(e=>e.musher.bib===o)||{}),a}):O[j.id]&&O[j.id].contestants&&(T=O[j.id].contestants.sort(n).slice(0,c).map(e=>e)),Object(i.h)(e,null,Object(i.h)("div",{class:"fixed-top "+d.a.hoverElement,style:"height: 100px;"},Object(i.h)("div",{class:""+d.a.hoverelementonly},Object(i.h)("div",{class:"row"},v.classes&&v.classes.sort((e,t)=>e.distance-t.distance).map(t=>Object(i.h)(e,null,Object(i.h)("div",{class:"col"},Object(i.h)("a",{class:`btn btn-block ${t.id===a?"btn-success":"btn-outline-success"} text-nowrap`,style:"text-overflow: ellipsis; overflow: hidden;","data-id":t.id,href:`/tv/top10ticker/${v.id}/${t.id}`},t.title))))))),Object(i.h)("div",{class:"container-fluid position-relative",style:`margin-bottom: ${m}; margin-top: ${h}; height: calc(100% - ${m} - ${h});`},Object(i.h)("div",{class:"d-flex position-absolute",style:' bottom: -185px; left: 150px; background-image: url("https://themusher.app/assets/tv-ticker.png"); background-position: 0 100%; background-repeat: no-repeat; width: 1780px; height: 115px; '},Object(i.h)("div",{class:"text-white text-left position-absolute",style:" font-size: 2.3em; font-weight: normal; bottom: 50px; left: 110px; width: 550px; "},Object(i.h)("span",{class:"font-weight-light"},"Topp 10")," - GPS Ranking"),Object(i.h)("div",{class:"text-dark text-left position-absolute",style:"\n                            font-size: 2.0em;\n                            font-weight: normal;\n                            bottom: 4px;\n                            left: 99px;\n                            width: 1486px;\n                    "},Object(i.h)("div",{class:"w-100"},Object(i.h)("div",{class:"d-flex flex-row flex-nowrap",style:"overflow: auto; scroll-snap-type: x mandatory;",onScroll:this.scrollImages,ref:e=>this.contestantContainer=e},T&&T.map((t,s)=>{const{musher:o={},currentTeam:a={},currentResults:r={}}=t;return Object(i.h)(e,null,Object(i.h)("div",{class:"clearfix position-relative p-0 mx-0"},Object(i.h)("div",{class:"h-100 d-flex flex-nowrap justify-content-start align-items-center",style:"\n                                                    flex-wrap: wrap;\n                                                    overflow-y: hidden;\n                                                    width: 450px;\n                                                ",onTouchstart:e=>{e.stopPropagation()},onTouchend:e=>{e.stopPropagation()},onTouchmove:e=>{e.stopPropagation()}},Object(i.h)("div",{class:"pl-3 pr-2 clearfix text-white rounded-pill-right",style:"width: 100px; background-color: "+p.a.getRankingColor(s+1)},o.bib||s+1),Object(i.h)("div",{class:"pl-1 pr-3"},Object(i.h)("nobr",null,o.flag," ",o.firstname," ",o.lastname,Object(i.h)("br",null))))))})))))))}})||c;t.default=f}.call(this,s("hosL").Fragment)},eT2M:function(e){e.exports={hoverelementonly:"hoverelementonly__3_DrK",hoverElement:"hoverElement__3ED7Q",hoverelementhide:"hoverelementhide__2AP13"}}}]);
//# sourceMappingURL=86.chunk.5ca72.esm.js.map