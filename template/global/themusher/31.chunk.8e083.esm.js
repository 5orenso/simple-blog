(window.webpackJsonp=window.webpackJsonp||[]).push([[31],{"/DnB":function(t,e,s){"use strict";function a(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,a)}return s}function o(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}var i,l=s("hosL"),n=(s("Utv1"),s("/eY4"));const c={};let r=Object(n.a)(i=class extends l.Component{constructor(t){super(t),this.state=function(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?a(Object(s),!0).forEach((function(e){o(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):a(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}({},c),this.container=null}componentDidMount(){const{horizontal:t,vertical:e=""}=this.props,s={behavior:"smooth"};t&&(s.inline=t),e&&(s.block=e),this.container.scrollIntoView(s)}render(){return Object(l.h)("div",{ref:t=>this.container=t}," ")}})||i;e.a=r},"1OK2":function(t,e,s){"use strict";var a,o=s("hosL"),i=(s("Utv1"),s("/eY4"));Object(i.a)(a=class extends o.Component{constructor(t){super(t),this.touchStart=t=>{t.stopPropagation(),this.setState({startX:t.touches[0].pageX})},this.touchEnd=t=>{t.stopPropagation(),this.setState({startX:void 0,sliding:!1})},this.touchMove=t=>{t.stopPropagation();const{totalImages:e}=this.state;if(e>1){const{startX:e,sliding:s}=this.state,a=50,o=t.touches[0].pageX;s||(o>e+a?(this.setState({sliding:!0}),this.prevImage()):o<e-a&&(this.setState({sliding:!0}),this.nextImage()))}};const{images:e=[]}=t;this.state={imageContainer:1,currentImage1:e[0]||{},currentImage2:{},currentIdx:0,totalImages:e.length||0,imageDots:[...Array(e.length||0).fill(1).map((t,e)=>t+e)]}}nextImage(){const{images:t}=this.props,{totalImages:e,currentIdx:s,imageContainer:a}=this.state,o=1===a?2:1;let i=s+1;i>e-1&&(i=0),this.setState({["currentImage"+o]:t[i],currentIdx:i,imageContainer:o})}prevImage(){const{images:t}=this.props,{totalImages:e,currentIdx:s,imageContainer:a}=this.state;let o=s-1;o<0&&(o=e-1),this.setState({["currentImage"+(1===a?2:1)]:t[o],currentIdx:o,imageContainer:1===a?2:1})}componentWillReceiveProps(t){if(t.images!==this.props.images){const{images:e=[]}=t;this.setState({imageContainer:1,currentImage1:e.length>0?e[0]:{},currentImage2:{},currentIdx:0,totalImages:e.length||0,imageDots:[...Array(e.length||0).fill(1).map((t,e)=>t+e)]})}}render(){const{currentImage1:t,currentImage2:e,imageContainer:s,totalImages:a,imageDots:i,currentIdx:l}=this.state,n=this["image"+s],c=1===s?t:e,r=n&&n.height?n.width/n.height:4/3;let h,d;if(c.dimensions){const{width:t,height:e,orientation:s}=c.dimensions;s>4&&s<9?(h=t,d=e):(h=e,d=t)}const m=c.dimensions?d/h:r;return a<=0?"":Object(o.h)("div",{class:"w-100"},Object(o.h)("div",{class:"border rounded position-relative w-100",style:`height: calc(85vw / ${m}); overflow: hidden; transition: all .3s ease-in-out;`,onTouchstart:this.touchStart,onTouchend:this.touchEnd,onTouchmove:this.touchMove},a>1&&Object(o.h)("span",{class:"position-absolute",style:"top:0px; right: 5px; z-index: 2000;"},Object(o.h)("small",null,l+1,"/",a)),t&&Object(o.h)("div",{class:"position-absolute",style:(1===s?"opacity: 1;":"opacity: 0;")+" transition: all .3s ease-in-out; top: 0; left: 0;"},Object(o.h)("img",{loading:"lazy",src:t.s3LargeLink,class:"img-fluid align-middle",ref:t=>this.image1=t})),e&&Object(o.h)("div",{class:"position-absolute",style:(2===s?"opacity: 1;":"opacity: 0;")+" transition: all .3s ease-in-out; top: 0; left: 0;"},Object(o.h)("img",{loading:"lazy",src:e.s3LargeLink,class:"img-fluid align-middle",ref:t=>this.image2=t}))),i.length>1&&Object(o.h)("div",{class:"w-100 text-center"},i.map(t=>Object(o.h)("span",{style:`color: ${t===l+1?"#ffffff":"#808080"};`},"•"))))}})},"8Lgr":function(t,e,s){"use strict";(function(t){function a(t){return l.a.format(t,t<5?2:1)}var o,i=s("hosL"),l=s("Utv1"),n=s("/eY4");s("OhSV"),s("ZOvn");let c=Object(n.a)(o=class extends i.Component{render(){const{value:e=0,smallUnit:s}=this.props,{userStore:o}=this.props.stores,{user:l}=o,{settings:n={}}=l;return n.imperial?Object(i.h)(t,null,Object(i.h)("nobr",null,a(function(t){return.621371*t}(e))," ",s?Object(i.h)(t,null,Object(i.h)("small",null,Object(i.h)("small",null,Object(i.h)("small",{class:"ml-0 text-muted"},"mi")))):Object(i.h)(t,null,"mi"))):Object(i.h)(t,null,Object(i.h)("nobr",null,a(e)," ",s?Object(i.h)(t,null,Object(i.h)("small",null,Object(i.h)("small",null,Object(i.h)("small",{class:"ml-0 text-muted"},"km")))):Object(i.h)(t,null,"km")))}})||o;e.a=c}).call(this,s("hosL").Fragment)},ETxl:function(t){t.exports={hoverelementonly:"hoverelementonly__1mJGJ",hoverElement:"hoverElement__axh3O",hoverelementhide:"hoverelementhide__1k_qH","progress-bar-vertical":"progress-bar-vertical__1B2sC","progress-bar":"progress-bar__pnsVj",dragged:"dragged__QXO46",over:"over__1re3x",list:"list__q_emZ"}},K5BL:function(t,e,s){"use strict";var a,o=s("hosL"),i=s("Utv1"),l=s("/eY4"),n=s("OhSV"),c=s("go65");s("ETxl"),s("ZOvn");let r=Object(l.a)(a=class extends o.Component{constructor(...t){var e;super(...t),e=this,this.commentTrack=async function(){const{callback:t=(()=>{}),commentId:s}=e.props,{track:a}=e.props,{trackStore:o}=e.props.stores,{comment:i=""}=e.state,l=await o.commentReplyTrack({id:a.id,commentId:s,comment:i});l&&200===l.status&&(e.setState({comment:""}),t({track:a,response:l}))}}render(){const{inputRef:t}=this.props,{comment:e}=this.state,{userStore:s}=this.props.stores,{user:a={}}=s,l=a.firstname?`${i.a.ucfirst(a.firstname,!0)}${i.a.ucfirst(a.lastname,!0)}`:""+i.a.ucfirst(a.email||"",!0),r=a.image||(a.images?a.images[0]:void 0);return Object(o.h)("div",{class:"w-100"},Object(o.h)("div",{class:"d-flex mb-0 position-relative w-100"},Object(o.h)("div",{class:"text-center border rounded-circle imageRounded imageRoundedThumb",style:(r?`background-image: url('${r.s3SmallLink}'); background-size: cover;`:"")+" border-width: 3px !important;"},!r&&Object(o.h)("span",{class:"font-weight-lighter",style:"font-size: 15px;"},l)),Object(o.h)("div",{class:"col pl-3",style:"line-height: 1.2em;"},Object(o.h)("div",{class:"d-flex bd-highlight"},Object(o.h)("div",{class:"p-0 w-100 bd-highlight"},Object(o.h)("label",{class:"sr-only",for:"inlineFormInput"},Object(o.h)(n.c,{id:"comments.comment"},"Kommentar")),Object(o.h)("div",{class:"border rounded rounded-lg position-relative"},Object(o.h)(n.b,null,Object(o.h)("input",{class:"form-control-plaintext px-2",type:"text",placeholder:Object(o.h)(n.c,{id:"comments.write-comment"},"Skriv en kommentar..."),onInput:Object(c.a)(this,"comment"),value:e,ref:t})))),Object(o.h)("div",{class:"p-0 pl-2 flex-shrink-1 bd-highlight"},Object(o.h)("button",{type:"button",class:"btn btn-sm btn-primary mb-2",onClick:this.commentTrack},Object(o.h)("i",{class:"fas fa-paper-plane"})))))))}})||a;e.a=r},NPbb:function(t,e,s){"use strict";(function(t){function a(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,a)}return s}function o(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?a(Object(s),!0).forEach((function(e){i(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):a(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}function i(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}var l,n=s("hosL"),c=s("Utv1"),r=s("/eY4"),h=(s("OhSV"),s("ZOvn")),d=s("bbv7");s("nHdA"),s("irB3"),s("UwwE"),s("8Lgr"),s("QkTp");let m=Object(r.a)(l=class extends n.Component{render(){const{showTemperatur:e=!0}=this.props,{trackStore:s,userStore:a}=this.props.stores,{track:i={}}=s,{user:l}=a,{settings:r={}}=l,{gpx:m={},gpxInfo:b}=i,{gpxInfo:p={}}=m,u=o(o({},p),b),{speeds:g=[],elevations:f=[],temperatures:O=[],climbs:j=[],distances:v=[],ecor:k=[]}=u;let x=[],w=[],y=[],T=[],L=[];const S=[],D=[],R=[],I=[],C=[],P=[],$=[],E=[];if(f.length>0){const t=h.a.smoothArray(f,5).map((t,e)=>{return{x:e,y:r.imperial?(s=t,3.28084*s):t};var s});x.push(t),S.push("Elevation"),C.push("m")}if(e&&O.length>0){const t=h.a.smoothArray(O,2).map((t,e)=>{return{x:e,y:r.imperial?(s=t,9*s/5+32):t};var s});w.push(t),D.push("Temp"),P.push("°C")}if(j.length>0){const t=h.a.smoothArray(j,2).map((t,e)=>({x:e,y:t}));y.push(t),R.push("Climblevel"),$.push("%")}if(k.length>0){const t=h.a.smoothArray(k,2).map((t,e)=>({x:e,y:1e3*t}));L.push(t),I.push("ECOR (kcal/kg/km)"),E.push("kcal/kg/km")}const A=[];if(i.distanceKm>0){const t=r.imperial?.621371*i.distanceKm:i.distanceKm,e=c.a.range(0,Math.ceil(t),1),s=Math.ceil(e.length/5);Math.floor(e.length/s);for(let t=0,a=e.length;t<a;t+=s)A.push(e[t]);A.push(e[e.length-1])}return Object(n.h)(t,null,Object(n.h)("div",{class:"w-100 mt-3 mb-4"},Object(n.h)(d.a,{stores:this.props.stores,width:1e3,height:200,showXTicks:1,xTicksVal:t=>r.imperial?t+"mi":t+"km",xTicks:A,paddingTop:30,lineFromXzero:!0,lineFromXmax:!0,dataLeft:x,legendLeft:S,showYTicksLeft:1,yTicksLeftPostfix:r.imperial?"ft":"m",unitLeft:C,avgWindowLeft:[0,0,0],smoothLeft:[1,1,1],dataRight:T,legendRight:[],showYTicksRight:T.length>0?1:0,yTicksRightPostfix:r.imperial?"mph":"km/t",unitRight:[],avgWindowRight:[0,0,0],smoothRight:[1,1,1]})),w.length>0&&Object(n.h)("div",{class:"w-100 mt-3 mb-4"},Object(n.h)(d.a,{stores:this.props.stores,width:1e3,height:100,showXTicks:1,xTicksVal:t=>r.imperial?t+"mi":t+"km",xTicks:A,paddingTop:30,lineFromXzero:!0,lineFromXmax:!0,dataLeft:w,legendLeft:D,yMaxMinLeftRound:!1,showYTicksLeft:1,yTicksLeftPostfix:"°C",unitLeft:P,avgWindowLeft:[0],smoothLeft:[1]})),y.length>0&&Object(n.h)("div",{class:"w-100 mt-3 mb-4"},Object(n.h)(d.a,{stores:this.props.stores,width:1e3,height:200,showXTicks:1,xTicksVal:t=>r.imperial?t+"mi":t+"km",xTicks:A,paddingTop:30,lineFromXzero:!0,lineFromXmax:!0,dataLeft:y,legendLeft:R,yMaxMinLeftRound:!1,showYTicksLeft:1,yTicksLeftPostfix:"%",unitLeft:$,avgWindowLeft:[0],smoothLeft:[1],dataRight:L,legendRight:I,showYTicksRight:L.length>0?1:0,yTicksRightVal:t=>c.a.format(t/1e3,2),unitRight:E,avgWindowRight:[0,0,0],smoothRight:[1,1,1]})))}})||l;e.a=m}).call(this,s("hosL").Fragment)},QkTp:function(t,e,s){"use strict";(function(t){var a,o=s("hosL"),i=s("Utv1"),l=s("/eY4");s("OhSV"),s("ZOvn");let n=Object(l.a)(a=class extends o.Component{render(){const{value:e=0}=this.props,{userStore:s}=this.props.stores,{user:a}=s,{settings:l={}}=a;return l.imperial?Object(o.h)(t,null,Object(o.h)("nobr",null,i.a.format(function(t){return 9*t/5+32}(e),0),"°F")):Object(o.h)(t,null,Object(o.h)("nobr",null,i.a.format(e,1),"°C"))}})||a;e.a=n}).call(this,s("hosL").Fragment)},UwwE:function(t,e,s){"use strict";(function(t){var a,o=s("hosL"),i=s("Utv1"),l=s("/eY4");s("OhSV"),s("ZOvn");let n=Object(l.a)(a=class extends o.Component{render(){const{value:e=0}=this.props,{userStore:s}=this.props.stores,{user:a}=s,{settings:l={}}=a;return l.imperial?Object(o.h)(t,null,Object(o.h)("nobr",null,i.a.format(function(t){return 2.20462*t}(e),0)," lb")):Object(o.h)(t,null,Object(o.h)("nobr",null,i.a.format(e,0)," kg"))}})||a;e.a=n}).call(this,s("hosL").Fragment)},WAWY:function(t,e,s){"use strict";(function(t){var a,o=s("hosL"),i=s("Utv1"),l=s("/eY4"),n=s("OhSV"),c=(s("ZOvn"),s("bbv7"));let r=Object(n.d)(()=>({week:Object(o.h)(n.c,{id:"workout.graph.week"}),distance:Object(o.h)(n.c,{id:"workout.graph.distance"}),duration:Object(o.h)(n.c,{id:"workout.graph.duration"},"Duration"),rest:Object(o.h)(n.c,{id:"workout.graph.rest"},"Rest"),ascend:Object(o.h)(n.c,{id:"workout.graph.ascend"}),plan:Object(o.h)(n.c,{id:"workout.graph.plan"}),speedAvg:Object(o.h)(n.c,{id:"workout.graph.speedavg"},"Speed"),loadIndex:Object(o.h)(n.c,{id:"workout.graph.loadindex"},"Loadindex"),avgDogs:Object(o.h)(n.c,{id:"workout.graph.avgdogs"},"Avg dogs"),avgImages:Object(o.h)(n.c,{id:"workout.graph.avgimages"},"Avg images"),sledWeight:Object(o.h)(n.c,{id:"workout.graph.sledweight"},"Sled weight"),rating:Object(o.h)(n.c,{id:"workout.graph.rating"},"Rating"),temperature:Object(o.h)(n.c,{id:"workout.graph.temperature"},"Temperature")}))(a=Object(l.a)(a=class extends o.Component{render(){const{userStore:e,workoutPlanStore:s}=this.props.stores,{user:a,graphWorkoutSummaryWeekDistanceCurrent:l,graphWorkoutSummaryWeekDistancePrev:r,graphWorkoutSummaryWeekElevationCurrent:h,graphWorkoutSummaryWeekElevationPrev:d,avgDayDistance:m,avgDayElevation:b,avgDayDuration:p,avgDaySpeedAvg:u,avgDayLoadIndex:g,avgDayAvgDogs:f,avgDayAvgImages:O,avgDaySledWeight:j,avgDayRest:v,avgDayRating:k,avgDayTemperature:x}=e,{settings:w={}}=a,{graphPlanWeekDistanceCurrent:y}=s,T=(new Date).getMonth()+1,L=(new Date).getFullYear(),{isLoading:S,week:D,distance:R,duration:I,rest:C,ascend:P,plan:$,speedAvg:E,loadIndex:A,avgDogs:F,avgImages:_,sledWeight:W,rating:z,temperature:Y,year:M=L,month:V=T,showExtra:X=!1}=this.props,U=parseInt(V<8?M-1:M,10),B=i.a.weekRange(U+"-08-01",U+1+"-07-31"),N=i.a.dayRange(U+"-08-01",U+1+"-07-31"),Z=B.map(t=>t.week),K=Math.floor(Z.length/5),H=[];for(let t=0,e=Z.length;t<e;t+=K)H.push(Z[t]);const J=N.map(t=>`${t.day}.${t.month}`),q=Math.floor(J.length/5),G=[];for(let t=0,e=J.length;t<e;t+=q)G.push(J[t]);return Object(o.h)(t,null,Object(o.h)("div",{class:"w-100 mt-3 mb-4 border-top pt-5"},Object(o.h)("h5",{class:"text-center"},Object(o.h)(n.c,{id:"workout.graph.total-distance"},"Total distance")),Object(o.h)(c.a,{stores:this.props.stores,width:500,height:200,showXTicks:1,xTicksVal:t=>`${D} ${t}`,xTicks:H,paddingTop:30,lineFromXzero:!0,lineFromXmax:!0,xTicksLink:"/workouts/week/",dataLeft:[l,r,y],legendLeft:[`${U} ${R}`,`${U-1} ${R}`,`${U} ${$}`],dataFillLeft:[1],showYTicksLeft:1,yTicksLeftPostfix:w.imperial?"mi":"km",unitLeft:w.imperial?["mi","mi","mi"]:["km","km","km"],avgWindowLeft:[0,0,0],smoothLeft:[1,1,1],dataRight:[h,d],legendRight:[`${U} ${P}`,`${U-1} ${P}`],showYTicksRight:1,yTicksRightPostfix:w.imperial?"ft":"m",unitRight:w.imperial?["ft","ft"]:["m","m"],avgWindowRight:[0,0],smoothRight:[1,1]})),!S&&l&&l.length<3&&Object(o.h)("div",{class:"mb-5 py-3 border-top border-bottom"},Object(o.h)("div",{class:"text-left",style:"line-height: 1.0em;"},Object(o.h)("div",{class:"display-4 float-left text-warning mr-3"},Object(o.h)("i",{class:"fas fa-paw"})),Object(o.h)("small",null,Object(o.h)(n.c,{id:"workout.graph.too-little-data"},"Foreløpig er det litt lite data for å kunne vise noen fine grafer. Etterhvert som du legger inn flere treninger så vil dette bli en fin tabell og graf som viser progresjonen din.")))),X&&Object(o.h)(t,null,Object(o.h)("div",{class:"w-100 mt-3 mb-4 mt-5 pt-5 border-top"},Object(o.h)("h5",{class:"text-center"},Object(o.h)(n.c,{id:"workout.graph.avg-rating"},"Average rating/day")),Object(o.h)(c.a,{stores:this.props.stores,width:500,height:200,showXTicks:1,xTicksVal:t=>""+t,xTicks:G,paddingTop:30,lineFromXzero:!0,lineFromXmax:!0,dataLeft:[k],legendLeft:[`${U} ${z}`],showYTicksLeft:1,avgWindowLeft:[0,0,0],smoothLeft:[0,0,0],dataRight:[x],legendRight:[`${U} ${Y}`],showYTicksRight:1,yTicksRightPostfix:w.imperial?"°F":"°C",avgWindowRight:[0,0],smoothRight:[0,0]})),Object(o.h)("div",{class:"w-100 mt-3 mb-4 mt-5 pt-5 border-top"},Object(o.h)("h5",{class:"text-center"},Object(o.h)(n.c,{id:"workout.graph.avg-distance"},"Average distance/day")),Object(o.h)(c.a,{stores:this.props.stores,width:500,height:200,showXTicks:1,xTicksVal:t=>""+t,xTicks:G,paddingTop:30,lineFromXzero:!0,lineFromXmax:!0,dataLeft:[m],legendLeft:[`${U} ${R}`],showYTicksLeft:1,yTicksLeftPostfix:w.imperial?"mi":"km",unitLeft:w.imperial?["mi","mi","mi"]:["km","km","km"],avgWindowLeft:[0,0,0],smoothLeft:[0,0,0],dataRight:[b],legendRight:[`${U} ${P}`],showYTicksRight:1,yTicksRightPostfix:w.imperial?"ft":"m",unitRight:w.imperial?["ft","ft"]:["m","m"],avgWindowRight:[0,0],smoothRight:[0,0]})),Object(o.h)("div",{class:"w-100 mt-3 mb-4 mt-5 pt-5 border-top"},Object(o.h)("h5",{class:"text-center"},Object(o.h)(n.c,{id:"workout.graph.avg-duration"},"Average duration/day")),Object(o.h)(c.a,{stores:this.props.stores,width:500,height:200,showXTicks:1,xTicksVal:t=>""+t,xTicks:G,paddingTop:30,paddingLeft:50,yTicksLeftWidth:"50px",lineFromXzero:!0,lineFromXmax:!0,dataLeft:[p],legendLeft:[`${U} ${I}`],yTicksLeftVal:t=>""+i.a.secToHms(t),showYTicksLeft:1,avgWindowLeft:[0,0,0],smoothLeft:[0,0,0],dataRight:[v],legendRight:[`${U} ${C}`],showYTicksRight:1,yTicksRightVal:t=>""+i.a.secToHms(t),avgWindowRight:[0,0],smoothRight:[0,0]})),Object(o.h)("div",{class:"w-100 mt-3 mb-4 mt-5 pt-5 border-top"},Object(o.h)("h5",{class:"text-center"},Object(o.h)(n.c,{id:"workout.graph.avg-speed"},"Average speed/day")),Object(o.h)(c.a,{stores:this.props.stores,width:500,height:200,showXTicks:1,xTicksVal:t=>""+t,xTicks:G,paddingTop:30,lineFromXzero:!0,lineFromXmax:!0,dataLeft:[u],legendLeft:[`${U} ${E}`],showYTicksLeft:1,yTicksLeftPostfix:w.imperial?"mph":"km/t",unitLeft:w.imperial?["mph","mph","mph"]:["km/t","km/t","km/t"],avgWindowLeft:[0,0,0],smoothLeft:[0,0,0],dataRight:[g],legendRight:[`${U} ${A}`],showYTicksRight:1,avgWindowRight:[0,0],smoothRight:[0,0]})),Object(o.h)("div",{class:"w-100 mt-3 mb-4 mt-5 pt-5 border-top"},Object(o.h)("h5",{class:"text-center"},Object(o.h)(n.c,{id:"workout.graph.avg-dogs"},"Average dogs/day")),Object(o.h)(c.a,{stores:this.props.stores,width:500,height:200,showXTicks:1,xTicksVal:t=>""+t,xTicks:G,paddingTop:30,lineFromXzero:!0,lineFromXmax:!0,dataLeft:[f,O],legendLeft:[`${U} ${F}`,`${U} ${_}`],showYTicksLeft:1,avgWindowLeft:[0,0,0],smoothLeft:[0,0,0],dataRight:[j],legendRight:[`${U} ${W}`],showYTicksRight:1,avgWindowRight:[0,0],smoothRight:[0,0]}))))}})||a)||a;e.a=r}).call(this,s("hosL").Fragment)},eK6s:function(t){t.exports={gaugeBackground:"gaugeBackground__1UGxt",gauge:"gauge__2ZDxd",success:"success__3UQxg",primary:"primary__3pPV6",secondary:"secondary__-Vrk_",info:"info__3t5zs",warning:"warning__1jHlR",danger:"danger__BLVC9",gaugeText:"gaugeText__1on-w"}},ePpR:function(t,e,s){"use strict";(function(t){var a,o=s("hosL"),i=s("Utv1"),l=s("/eY4"),n=s("OhSV"),c=s("go65"),r=s("om2D"),h=s("ZOvn");let d=Object(l.a)(a=class extends o.Component{constructor(t){var e;super(t),e=this,this.commentTrack=async function(){const{callback:t=(()=>{}),inputRefObject:s={}}=e.props,{track:a}=e.props,{trackStore:o}=e.props.stores,{comment:i,showAddImage:l}=e.state,n=await o.commentTrack({id:a.id,comment:i});n&&200===n.status&&(e.setState({comment:{body:"",images:[]}},()=>{h.a.resizeTextarea(s[a.id]),l&&e.addImage()}),t({track:a,response:n}))},this.addImages=({value:t})=>{const{comment:e}=this.state;e.images.push(...t),this.setState({comment:e})},this.addImage=()=>{const{showAddImage:t=!1}=this.state;this.setState({showAddImage:!t})},this.handleImageErrored=t=>{const e=t.target;e.onerror=null,setTimeout(()=>{e.src+="?"+new Date},1e3)},this.state={comment:{body:"",images:[]},showAddImage:!1},this.inputRef={}}render(){const{inputRef:e,track:s}=this.props,{comment:a,showAddImage:l}=this.state,{userStore:h}=this.props.stores,{user:d={}}=h,m=d.firstname?`${i.a.ucfirst(d.firstname,!0)}${i.a.ucfirst(d.lastname,!0)}`:""+i.a.ucfirst(d.email||"",!0),b=d.image||(d.images?d.images[0]:void 0);return Object(o.h)("div",{class:"col-12 col-sm-8 col-lg-6 offset-sm-2 offset-lg-3 mb-3 position-relative"},Object(o.h)("div",{class:"d-flex mb-0 position-relative w-100"},Object(o.h)("div",{class:"text-center border rounded-circle imageRounded imageRoundedSmall",style:(b?`background-image: url('${b.s3SmallLink}'); background-size: cover;`:"")+" border-width: 3px !important;"},!b&&Object(o.h)("span",{class:"font-weight-lighter",style:"font-size: 15px;"},m)),Object(o.h)("div",{class:"col pl-3",style:"line-height: 1.2em;"},Object(o.h)("div",{class:"d-flex bd-highlight"},Object(o.h)("div",{class:"p-0 w-100 bd-highlight"},Object(o.h)("label",{class:"sr-only",for:"inlineFormInput"},Object(o.h)(n.c,{id:"comments.comment"},"Kommentar")),Object(o.h)("div",{class:"border rounded rounded-lg position-relative"},Object(o.h)(n.b,null,Object(o.h)("input",{class:"form-control-plaintext px-2",type:"text",placeholder:Object(o.h)(n.c,{id:"comments.write-comment"},"Skriv en kommentar..."),onInput:Object(c.a)(this,"comment.body"),value:a.body,ref:e})),Object(o.h)("div",{class:"position-absolute",style:"top: 8px; right: 10px; font-size: 1.2em;"},Object(o.h)("i",{class:"fas fa-image pointerCursor","data-id":s.id,onClick:this.addImage})))),Object(o.h)("div",{class:"p-0 pl-2 flex-shrink-1 bd-highlight"},Object(o.h)("button",{type:"button",class:"btn btn-primary mb-2",onClick:this.commentTrack},Object(o.h)("i",{class:"fas fa-paper-plane"})))))),l&&Object(o.h)(t,null,Object(o.h)("div",{class:"col-12 text-center"},Object(o.h)("div",{class:"container-fluid"},Object(o.h)("div",{class:"row"},i.a.isArray(a.images)&&a.images.map(t=>Object(o.h)("div",{class:"col-3 p-1"},Object(o.h)("img",{src:t.s3SmallLink,class:"img-fluid",onError:this.handleImageErrored}),Object(o.h)("button",{class:"btn btn-sm btn-link",onClick:this.removeImage,"data-name":t.name},Object(o.h)("i",{class:"fas fa-trash"})," Del"))))),Object(o.h)(r.a,{object:a,updateField:this.addImages,autoOpen:!0}))))}})||a;e.a=d}).call(this,s("hosL").Fragment)},irB3:function(t,e,s){"use strict";(function(t){var a,o=s("hosL"),i=s("Utv1"),l=s("/eY4");s("OhSV"),s("ZOvn");let n=Object(l.a)(a=class extends o.Component{render(){const{value:e=0,smallUnit:s}=this.props,{userStore:a}=this.props.stores,{user:l}=a,{settings:n={}}=l;return n.imperial?Object(o.h)(t,null,Object(o.h)("nobr",null,i.a.format(function(t){return 3.28084*t}(e),0)," ",s?Object(o.h)(t,null,Object(o.h)("small",null,Object(o.h)("small",null,Object(o.h)("small",{class:"ml-0 text-muted"},"ft")))):Object(o.h)(t,null,"ft"))):Object(o.h)(t,null,Object(o.h)("nobr",null,i.a.format(e,0)," ",s?Object(o.h)(t,null,Object(o.h)("small",null,Object(o.h)("small",null,Object(o.h)("small",{class:"ml-0 text-muted"},"m")))):Object(o.h)(t,null,"m")))}})||a;e.a=n}).call(this,s("hosL").Fragment)},lcEk:function(t,e,s){"use strict";(function(t){function a(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,a)}return s}function o(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}var i,l=s("hosL"),n=s("Utv1"),c=s("/eY4"),r=s("cneo"),h=s("OhSV"),d=s("fh8t"),m=s.n(d),b=s("K5BL"),p=(s("ETxl"),s("ZOvn"));const u={showAddComment:{},showAllComments:!1,showAllReplies:{},viewImageIdx:{},likeComment:{},likeReply:{}};let g=Object(c.a)(i=class extends l.Component{constructor(t){var e;super(t),e=this,this.likeComment=async function(t){const{callback:s=(()=>{})}=e.props,a=t.target.parentElement.dataset.id||t.target.dataset.id,{track:o}=e.props,{trackStore:i}=e.props.stores,l=await i.likeTrackComment({id:o.id,commentId:a});return l&&200===l.status&&s({track:o,commentId:a,response:l}),!0},this.likeReply=async function(t){const{callback:s=(()=>{})}=e.props,a=t.target.parentElement.dataset.id||t.target.dataset.id,o=t.target.parentElement.dataset.comment||t.target.dataset.comment,{track:i}=e.props,{trackStore:l}=e.props.stores,n=await l.likeTrackCommentReply({id:i.id,replyId:a,commentId:o});n&&200===n.status&&s({track:i,commentId:o,response:n})},this.replyComment=async function(t){const s=t.target.parentElement.dataset.id||t.target.dataset.id,{showAddComment:a}=e.state;a[s]=!a[s],e.setState({showAddComment:a},()=>{e.inputRef[s]&&e.inputRef[s].focus()})},this.toggleComments=()=>{const{showAllComments:t}=this.state;this.setState({showAllComments:!t})},this.toggleReplies=t=>{const e=t.target.parentElement.dataset.id||t.target.dataset.id,{showAllReplies:s}=this.state;s[e]=!s[e],this.setState({showAllReplies:s})},this.state=function(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?a(Object(s),!0).forEach((function(e){o(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):a(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}({},u),this.inputRef={}}render(){const{showAddComment:e,showAllComments:s,showAllReplies:a,viewImageIdx:o,likeComment:i}=this.state,{track:c,callback:d=(()=>{}),col:u=12,offset:g=0,compact:f=!1}=this.props,{userStore:O}=this.props.stores,{user:j,language:v="en"}=O;let k=[],x=0,w=0;if(c.comments){if(x=c.comments.length,s)k=c.comments;else{k=c.comments.slice(Math.max(x-(f?0:2),0))}w=k.length}return Object(l.h)("div",{class:`col-${u} offset-${g} col-sm-8 col-lg-6 offset-sm-2 offset-lg-3`},s&&Object(l.h)("div",null,Object(l.h)("button",{class:"btn btn-sm btn-link py-0 mb-2",onClick:this.toggleComments},Object(l.h)(h.c,{id:"comments.hide-all-comments"},"Skjul alle kommentarene."))),c&&k&&k.reverse().map(s=>{const{user:u={}}=s,g=u.firstname?`${n.a.ucfirst(u.firstname,!0)}${n.a.ucfirst(u.lastname,!0)}`:""+n.a.ucfirst(u.email||"",!0),f=u.firstname?`${u.firstname} ${u.lastname}`:""+u.email,O=u.image||(u.images?u.images[0]:void 0),k=s.likes&&s.likes.findIndex(t=>t.user===j.id)>-1;let x=[],w=0,y=0;s.comments&&(w=s.comments.length,x=a[s.id]?s.comments:s.comments.slice(0,void 0),y=x.length);const T=[];if(s.images){const t=Object(r.i)(s.images);T.push(...t)}const L=o[s.id]?o[s.id]:0,S=T&&T[L]?T[L]:null,{currentLocationGeocode:D={}}=s;return Object(l.h)("div",{class:"row"},Object(l.h)("div",{class:"col-12 d-flex mb-2 position-relative"},Object(l.h)("div",{class:"text-center border rounded-circle imageRounded imageRoundedSmall",style:(O?`background-image: url("${O.s3SmallLink}"); background-size: cover;`:"")+" border-width: 3px !important;"},!u.image&&Object(l.h)("span",{class:"font-weight-lighter",style:"font-size: 15px;"},g)),Object(l.h)("div",{class:"flex-grow-1 pl-3 pt-0",style:"line-height: 1.2em;"},Object(l.h)("div",{class:"bg-light p-2 rounded-lg"},Object(l.h)("h5",{class:"font-weight-bold mb-0",style:"font-size: 1.0em;"},f),Object(l.h)(m.a,{markdown:p.a.replaceImages(s.comment,s.images,v),markdownOpts:p.a.getMarkdownOptions()})),Object(l.h)("div",null,Object(l.h)("div",{class:"container-fluid px-3 mt-1"},S&&Object(l.h)("div",{class:"clearfix row position-relative"},Object(l.h)("div",{class:"commentContainer col-12 px-0 overflow-hidden",style:"max-height: 60vh;",onDblclick:this.addLikeComment,"data-id":s.id},Object(l.h)("img",{loading:"lazy",class:"img-fluid",style:"min-width: 100px;",src:S.s3LargeLink})),i[s.id]&&Object(l.h)("span",{class:"likeHeart position-absolute text-white display-1",style:"top: calc(50% - 50px); left: calc(50% - 50px); width: 100px; height: 100px;"},Object(l.h)("i",{class:"fas fa-heart likeStory"}))),T&&T.length>1&&Object(l.h)("div",{class:"clearfix d-flex flex-wrap row"},n.a.isArray(T)&&T.map((e,a)=>Object(l.h)(t,null,Object(l.h)("div",{class:"col px-0 overflow-hidden",style:"max-height: 100px; min-width: 100px;"},Object(l.h)("img",{loading:"lazy",class:"img-fluid border",style:"min-width: 100px;",src:e.s3SmallLink,onClick:this.viewImage,"data-id":s.id,"data-idx":a}))))))),Object(l.h)("small",null,Object(l.h)("button",{class:"btn btn-sm btn-link py-0 "+(k?"text-primary":""),onClick:this.likeComment,"data-id":s.id},Object(l.h)(h.c,{id:"comments.like"},"Lik")),"-",Object(l.h)("button",{class:"btn btn-sm btn-link py-0",onClick:this.replyComment,"data-id":s.id},Object(l.h)(h.c,{id:"comments.comment-add"},"Kommentar")),"-",Object(l.h)("button",{class:"btn btn-sm btn-link py-0 disabled"},n.a.formatDistance(s.createdDate,new Date,{locale:"no-NB"})))),s.likes&&s.likes.length>0&&Object(l.h)("small",{class:"position-absolute bg-light shadow-sm rounded-lg py-0 px-1",style:"bottom: 20px; right: 15px;"},Object(l.h)("i",{class:"fas fa-thumbs-up text-primary"})," ",s.likes.length)),Object(l.h)("div",{class:"col-11 offset-1 mb-2"},s&&x&&x.map(t=>{const{user:e={}}=t,a=e.firstname?`${n.a.ucfirst(e.firstname,!0)}${n.a.ucfirst(e.lastname,!0)}`:""+n.a.ucfirst(e.email||"",!0),o=e.firstname?`${e.firstname} ${e.lastname}`:""+e.email,i=e.image||(e.images?e.images[0]:void 0),c=t.likes&&t.likes.findIndex(t=>t.user===j.id)>-1;return Object(l.h)("div",{class:"row"},Object(l.h)("div",{class:"col-12 d-flex mb-2 position-relative"},Object(l.h)("div",{class:"text-center border rounded-circle imageRounded imageRoundedThumb",style:(i?`background-image: url("${i.s3SmallLink}"); background-size: cover;`:"")+" border-width: 3px !important;"},!e.image&&Object(l.h)("span",{class:"font-weight-lighter",style:"font-size: 15px;"},a)),Object(l.h)("div",{class:"flex-grow-1 pl-3 pt-0",style:"line-height: 1.2em;"},Object(l.h)("div",{class:"bg-light p-2 rounded-lg"},Object(l.h)("h5",{class:"font-weight-bold mb-0",style:"font-size: 1.0em;"},o),t.comment),Object(l.h)("small",null,Object(l.h)("button",{class:"btn btn-sm btn-link py-0 "+(c?"text-primary":""),onClick:this.likeReply,"data-comment":s.id,"data-id":t.id},Object(l.h)(h.c,{id:"comments.like"},"Lik")),"-",Object(l.h)("button",{class:"btn btn-sm btn-link py-0",onClick:this.replyComment,"data-id":s.id},Object(l.h)(h.c,{id:"comments.comment-add"},"Kommentar")),"-",Object(l.h)("button",{class:"btn btn-sm btn-link py-0 disabled"},n.a.formatDistance(t.createdDate,new Date,{locale:"no-NB"})))),t.likes&&Object(l.h)("small",{class:"position-absolute bg-light shadow-sm rounded-lg py-0 px-1",style:"bottom: 20px; right: 15px;"},Object(l.h)("i",{class:"fas fa-thumbs-up text-primary"})," ",t.likes.length)))}),w-y>0&&Object(l.h)("div",null,Object(l.h)("button",{class:"btn btn-sm btn-link py-0",onClick:this.toggleReplies,"data-id":s.id},Object(l.h)(h.c,{id:"comments.show-more",fields:{more:w-y}},"Vis ",w-y," flere kommentarer...")))),e[s.id]&&Object(l.h)("div",{class:"col-11 offset-1 d-flex mb-2 position-relative"},Object(l.h)(b.a,{stores:this.props.stores,track:c,callback:d,commentId:s.id,inputRef:t=>this.inputRef[s.id]=t})))}),x-w>0&&Object(l.h)("div",null,Object(l.h)("button",{class:"btn btn-sm btn-link py-0",onClick:this.toggleComments},Object(l.h)(h.c,{id:"comments.show-more",fields:{more:x-w}},"Vis ",x-w," flere kommentarer..."))),s&&Object(l.h)("div",null,Object(l.h)("button",{class:"btn btn-sm btn-link py-0",onClick:this.toggleComments},Object(l.h)(h.c,{id:"comments.hide-all-comments"},"Skjul alle kommentarene."))))}})||i;e.a=g}).call(this,s("hosL").Fragment)},nHdA:function(t,e,s){"use strict";(function(t){var a,o=s("hosL"),i=s("Utv1"),l=s("/eY4"),n=s("OhSV");s("ZOvn");let c=Object(l.a)(a=class extends o.Component{render(){const{value:e=0,smallUnit:s}=this.props,{userStore:a}=this.props.stores,{user:l}=a,{settings:c={}}=l;return c.imperial?Object(o.h)(t,null,Object(o.h)("nobr",null,i.a.format(function(t){return.621371*t}(e),1)," ",s?Object(o.h)(t,null,Object(o.h)("small",null,Object(o.h)("small",null,Object(o.h)("small",{class:"ml-0 text-muted"},Object(o.h)(n.c,{id:"workouts.mph"},"mph"))))):Object(o.h)(t,null,Object(o.h)(n.c,{id:"workouts.mph"},"mph")))):Object(o.h)(t,null,Object(o.h)("nobr",null,i.a.format(e,1)," ",s?Object(o.h)(t,null,Object(o.h)("small",null,Object(o.h)("small",null,Object(o.h)("small",{class:"ml-0 text-muted"},Object(o.h)(n.c,{id:"workouts.kmt"},"km/t"))))):Object(o.h)(t,null,Object(o.h)(n.c,{id:"workouts.kmt"},"km/t"))))}})||a;e.a=c}).call(this,s("hosL").Fragment)},om2D:function(t,e,s){"use strict";var a,o=s("hosL"),i=s("/eY4"),l=(s("cneo"),s("Utv1"),s("u2zT"));let n=Object(i.a)(a=class extends o.Component{constructor(t){super(t),this.handleAddImage=t=>{const{addToImages:e=!0}=this.props,{updateField:s,object:a,field:o}=this.props;if(o&&s({id:a.id,field:o,value:t,skipTimer:!0}),e){const e=[];e.push(t),s({id:a.id,field:"images",value:e,skipTimer:!0})}},this.state={files:[]}}render(){const{uploadStatus:t=(()=>{}),before:e=(()=>{}),after:s=(()=>{}),autoOpen:a=!0}=this.props;return Object(o.h)("div",{class:"row"},Object(o.h)("div",{class:"col-12"},Object(o.h)(l.a,{handleAddImage:this.handleAddImage,uploadStatus:t,apiUrl:"/api/fileupload",before:e,after:s,autoOpen:a},Object(o.h)("div",{style:{height:30,width:"100%"}}))))}})||a;e.a=n},qwZb:function(t,e,s){"use strict";s.r(e),function(t){function a(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,a)}return s}function o(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}var i,l=s("hosL"),n=s("Utv1"),c=s("/eY4"),r=s("Y3FI"),h=s("OhSV"),d=s("X9Km"),m=s("ZOvn"),b=s("HqZR"),p=(s("1OK2"),s("s4FZ")),u=s("WAWY"),g=s("NPbb"),f=s("wanP"),O=s("lcEk"),j=s("ePpR"),v=s("nHdA"),k=s("irB3"),x=(s("UwwE"),s("8Lgr")),w=(s("QkTp"),s("/DnB"));const y=m.a.marginTop(!1),T=m.a.marginTopBack(!1),L=m.a.marginBottom(),S=m.a.getMaxLoadIndex(),D={weather:[],newTrack:{},showAdminInfo:!1,showWeatherDetails:!1,submenu:"map"};let R=Object(c.a)(i=class extends l.Component{constructor(t){var e;super(t),e=this,this.deleteTrack=async function(){const{trackStore:t}=e.props.stores,{track:s}=t;await t.saveField(s.id,"offline",1),d.a.publish(d.b.STATUS_MESSAGE,{message:"Runden er slettet",type:"success",icon:"fas fa-check"}),Object(r.route)("/tracks/")},this.toggleAdminInfo=()=>{const{userStore:t}=this.props.stores,{isAdmin:e}=t;if(e){const{showAdminInfo:t}=this.state;this.setState({showAdminInfo:!t})}},this.likeTrack=async function(){const{trackStore:t}=e.props.stores,{track:s}=t;await t.likeTrack({id:s.id})},this.toggleAddComment=t=>{const e=t.target.parentElement.dataset.id||t.target.dataset.id,{showAddComment:s}=this.state;this.setState({showAddComment:!s},()=>{this.inputRef[e]&&this.inputRef[e].focus()})},this.toggleShowWeatherDetails=()=>{const{showWeatherDetails:t}=this.state;this.setState({showWeatherDetails:!t})},this.chooseSubmenu=t=>{this.setState({submenu:t.target.parentElement.dataset.menu||t.target.dataset.menu})},this.back=()=>{const{history:t}=this.props.stores;t.goBack()},this.state=function(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?a(Object(s),!0).forEach((function(e){o(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):a(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}({},D),this.updateTimer={},this.inputRef={}}async loadTrack(t=this.props){const{trackStore:e,userStore:s,workoutPlanStore:a}=this.props.stores;await e.load(t.track);const{track:o}=e;if(o.firstPoint){const t=await s.getWeather({lat:o.firstPoint[1],lon:o.firstPoint[0],altitude:o.firstPoint[2],force:1});this.setState({weather:t})}a.updateItem("workoutPlans",[]),a.updateItem("workoutPlan",{}),a.resetGraphPlanWeekDistanceCurrent(),await s.getWorkoutSummary({track:o.id})}componentDidMount(){this.loadTrack()}componentWillReceiveProps(t){t.track!==this.props.track&&this.loadTrack(t)}render(){const{trackStore:e,userStore:s}=this.props.stores,{submenu:a,showAdminInfo:o,showAddComment:i,weather:c,showWeatherDetails:r}=this.state,{isPublic:d}=this.props,{isAdmin:D,graphWorkoutSummaryWeekDistanceCurrentTotal:R,user:I={}}=s,{teams:C=[]}=I,{track:P={}}=e,{gpxInfo:$={}}=P,{weightedTotalKcal:E=0,loadIndex:A=0}=$,F=P.user===I.id||C.indexOf(P.team)>-1,{likes:_=[],comments:W=[]}=P,z=P.likes&&P.likes.findIndex(t=>t.user===I.id)>-1;return Object(l.h)("div",{class:"container-fluid",style:`margin-bottom: ${L}; margin-top: ${y};`},Object(l.h)("div",{class:"d-flex justify-content-between"},Object(l.h)("div",null,Object(l.h)("button",{class:"btn btn-link pl-0 fixed-top text-primary",style:`top: ${T}; left: 5px; font-size: 35px; width: 45px;`,onClick:this.back},Object(l.h)("i",{class:"fas fa-arrow-circle-left"}))),Object(l.h)("div",null,Object(l.h)("h5",{class:"text-muted"}," ")),Object(l.h)("div",null,F&&Object(l.h)("a",{class:"btn btn-sm btn-primary float-right",href:"/tracks/edit/"+P.id},Object(l.h)("i",{class:"fas fa-edit"})," ",Object(l.h)(h.c,{id:"tracks.edit"},"Endre")))),Object(l.h)("div",{class:"row"},Object(l.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3"},Object(l.h)("div",{class:"d-flex mb-2"},Object(l.h)("div",{class:"text-center border rounded-circle imageRounded",style:P.image?`background-image: url("${P.image.s3SmallLink}");`:""},!P.image&&Object(l.h)("i",{class:"fas fa-map-marked text-muted mt-3",style:"font-size: 40px;"})),Object(l.h)("div",{class:"flex-grow-1 pl-3"},Object(l.h)("h5",null,P.name),Object(l.h)("div",null,P.place),Object(l.h)("i",{class:"fas fa-calendar-alt mr-1"}),P.gpx&&P.gpx.s3Link&&Object(l.h)("span",{class:"float-right font-weight-lighter"},Object(l.h)("a",{href:P.gpx.s3Link,native:!0},Object(l.h)("i",{class:"fas fa-download"})," ",n.a.formatBytes(P.gpx.bytes,0))),n.a.isoDate(P.date||P.updatedDate||P.createdDate),Object(l.h)("br",null),1===P.public&&Object(l.h)("span",{class:"badge badge-success"},"Is public"),d&&P.userObject&&Object(l.h)("span",{class:"text-muted font-weight-lighter ml-3"},m.a.displayName(P.userObject)))))),Object(l.h)("div",{class:"row"},Object(l.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 my-3"},Object(l.h)("div",{class:"row"},Object(l.h)("div",{class:"w-100 overflow-hidden"},Object(l.h)("div",{class:"d-flex flex-row flex-nowrap pb-2 px-1",style:"overflow: auto; scroll-snap-type: x mandatory;"},Object(l.h)("div",{class:"col px-0 pt-2"},Object(l.h)("button",{class:`btn btn-block rounded-pill-left rounded-none ${"map"===a?"btn-primary":"btn-outline-primary"} text-nowrap`,style:"text-overflow: ellipsis; overflow: hidden;","data-menu":"map",onClick:this.chooseSubmenu},Object(l.h)("i",{class:"fas fa-map-marked-alt"})," ",Object(l.h)(h.c,{id:"tracks.map"},"Map")),"map"===a&&Object(l.h)(w.a,{horizontal:"center",vertical:"end"})),Object(l.h)("div",{class:"col px-0 pt-2"},Object(l.h)("button",{class:`btn btn-block rounded-none ${"stats"===a?"btn-primary":"btn-outline-primary"} text-nowrap`,style:"text-overflow: ellipsis; overflow: hidden;","data-menu":"stats",onClick:this.chooseSubmenu},Object(l.h)("i",{class:"fas fa-chart-line"})," ",Object(l.h)(h.c,{id:"tracks.stats"},"Your stats")),"stats"===a&&Object(l.h)(w.a,{horizontal:"center",vertical:"end"})),Object(l.h)("div",{class:"col px-0 pt-2"},Object(l.h)("button",{class:`btn btn-block rounded-none ${"weather"===a?"btn-primary":"btn-outline-primary"} text-nowrap`,style:"text-overflow: ellipsis; overflow: hidden;","data-menu":"weather",onClick:this.chooseSubmenu},Object(l.h)("i",{class:"fas fa-cloud-sun-rain"})," ",Object(l.h)(h.c,{id:"tracks.weather"},"Weather")),"weather"===a&&Object(l.h)(w.a,{horizontal:"center",vertical:"end"})),Object(l.h)("div",{class:"col px-0 pt-2"},Object(l.h)("button",{class:`btn btn-block rounded-none ${"summary"===a?"btn-primary":"btn-outline-primary"} text-nowrap`,style:"text-overflow: ellipsis; overflow: hidden;","data-menu":"summary",onClick:this.chooseSubmenu},Object(l.h)("i",{class:"fas fa-info-circle"})," ",Object(l.h)(h.c,{id:"tracks.summary"},"Summary")),"summary"===a&&Object(l.h)(w.a,{horizontal:"center",vertical:"end"})),Object(l.h)("div",{class:"col px-0 pt-2"},Object(l.h)("button",{class:`btn btn-block rounded-pill-right rounded-none ${"photos"===a?"btn-primary":"btn-outline-primary"} text-nowrap`,style:"text-overflow: ellipsis; overflow: hidden;","data-menu":"photos",onClick:this.chooseSubmenu},Object(l.h)("i",{class:"fas fa-camera"})," ",Object(l.h)(h.c,{id:"tracks.photos"},"Photos")),"photos"===a&&Object(l.h)(w.a,{horizontal:"center",vertical:"end"}))))))),"map"===a&&Object(l.h)(t,null,Object(l.h)("div",{class:"row mt-4"},Object(l.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 p-0"},P.gpx&&Object(l.h)("div",{class:"mb-4",style:"height: 500px;"},Object(l.h)(b.a,{stores:this.props.stores,mapId:P.id,geojson:P.gpx.geoJSON,gpxInfo:P.gpxInfo||P.gpx.gpxInfo,fullscreenMap:!0}))))),"stats"===a&&Object(l.h)(t,null,Object(l.h)("div",{class:"row mt-4"},Object(l.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3"},Object(l.h)("h5",null,Object(l.h)(h.c,{id:"tracks.your-workout-summary"},"Your workout summary")),R>0?Object(l.h)(t,null,Object(l.h)(u.a,{stores:this.props.stores,isLoading:!1})):Object(l.h)(t,null,Object(l.h)("div",{class:"text-center text-muted"},Object(l.h)("div",{class:"display-1"},Object(l.h)("i",{class:"fas fa-chart-line"})),Object(l.h)("h3",{class:"font-weight-lighter"},Object(l.h)(h.c,{id:"tracks.no-workout-summary"},"You have no workout summary for this track. You can choose track inside your workouts to have the summary calculated."))))))),"weather"===a&&Object(l.h)(t,null,Object(l.h)("div",{class:"row mt-4"},Object(l.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3"},Object(l.h)("h5",null,Object(l.h)(h.c,{id:"tracks.weather-start"},"Weather at the start position")),Object(l.h)("div",{class:"row"},c&&c.length>0?c.slice(0,4).map(t=>Object(l.h)("div",{class:"col-3 text-center"},Object(l.h)("img",{loading:"lazy",src:`./assets/svg/${n.a.getNestedValue(t,"next_1_hours.summary.symbol_code")}.svg`}),Object(l.h)("br",null),Object(l.h)("nobr",null,Object(l.h)("small",null,Object(l.h)("i",{class:"fas fa-temperature-low text-muted ml-1"}))," ",n.a.getNestedValue(t,"instant.details.air_temperature")," ",Object(l.h)("span",{class:"text-muted"},"°C")),Object(l.h)("br",null),Object(l.h)("small",null,Object(l.h)("i",{class:"fas fa-compass text-muted ml-1"})," ",m.a.windDirection(n.a.getNestedValue(t,"instant.details.wind_from_direction")),Object(l.h)("br",null),Object(l.h)("i",{class:"fas fa-wind text-muted ml-1"})," ",n.a.getNestedValue(t,"instant.details.wind_speed")," ",Object(l.h)("span",{class:"text-muted"},"m/s"),Object(l.h)("br",null),Object(l.h)("i",{class:"fas fa-cloud-rain text-muted ml-1"})," ",n.a.getNestedValue(t,"next_1_hours.details.precipitation_amount")," ",Object(l.h)("span",{class:"text-muted"},"mm"),Object(l.h)("br",null),Object(l.h)("i",{class:"fas fa-tint text-muted ml-1"})," ",n.a.getNestedValue(t,"instant.details.relative_humidity")," ",Object(l.h)("span",{class:"text-muted"},"%"),Object(l.h)("br",null)),Object(l.h)("span",{class:"font-weight-strong"},n.a.isoTime(t.time)),Object(l.h)("br",null))):Object(l.h)(t,null,Object(l.h)("div",{class:"text-center text-muted"},Object(l.h)("div",{class:"display-1"},Object(l.h)("i",{class:"fas fa-cloud-sun-rain"})),Object(l.h)("h3",{class:"font-weight-lighter"},Object(l.h)(h.c,{id:"tracks.no-weather"},"Can't find weather for this track."))))),Object(l.h)("small",null,r?Object(l.h)(t,null,Object(l.h)("table",{class:"table table-sm table-striped mt-4"},c&&c.length>0&&c.slice(4,70).map(t=>Object(l.h)("tr",null,Object(l.h)("td",null,Object(l.h)("img",{loading:"lazy",src:`./assets/svg/${n.a.getNestedValue(t,"next_1_hours.summary.symbol_code")||n.a.getNestedValue(t,"next_6_hours.summary.symbol_code")}.svg`,style:"height: 20px;"})),Object(l.h)("td",{class:"text-center"},Object(l.h)("i",{class:"fas fa-temperature-low text-muted ml-1"})," ",n.a.getNestedValue(t,"instant.details.air_temperature")," ",Object(l.h)("span",{class:"text-muted"},"°C")),Object(l.h)("td",{class:"text-center"},Object(l.h)("i",{class:"fas fa-compass text-muted ml-1"})," ",m.a.windDirection(n.a.getNestedValue(t,"instant.details.wind_from_direction"))),Object(l.h)("td",{class:"text-center"},Object(l.h)("i",{class:"fas fa-wind text-muted ml-1"})," ",n.a.getNestedValue(t,"instant.details.wind_speed")," ",Object(l.h)("span",{class:"text-muted"},"m/s")),Object(l.h)("td",{class:"text-center"},Object(l.h)("i",{class:"fas fa-cloud-rain text-muted ml-1"})," ",n.a.getNestedValue(t,"next_1_hours.details.precipitation_amount")||n.a.getNestedValue(t,"next_6_hours.details.precipitation_amount")||0," ",Object(l.h)("span",{class:"text-muted"},"mm")),Object(l.h)("td",{class:"text-center"},Object(l.h)("i",{class:"fas fa-tint text-muted ml-1"})," ",n.a.getNestedValue(t,"instant.details.relative_humidity")," ",Object(l.h)("span",{class:"text-muted"},"%")),Object(l.h)("td",{class:"font-weight-strong text-right"},n.a.isoDate(new Date,!1,!1,!0)!==n.a.isoDate(t.time,!1,!1,!0)?n.a.formatDate(t.time,{year:void 0,weekday:"short",localeMatcher:"lookup"}):""," ",n.a.isoTime(t.time))))),Object(l.h)("button",{class:"btn btn-link",onClick:this.toggleShowWeatherDetails},Object(l.h)("i",{class:"fas fa-eye-slash"})," ",Object(l.h)(h.c,{id:"tracks.weather-hide-details"},"Hide details"))):Object(l.h)("button",{class:"btn btn-link",onClick:this.toggleShowWeatherDetails},Object(l.h)("i",{class:"fas fa-eye"})," ",Object(l.h)(h.c,{id:"tracks.weather-show-details"},"Show details")))))),"summary"===a&&Object(l.h)(t,null,Object(l.h)("div",{class:"row mt-4"},Object(l.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3"},Object(l.h)("h5",null,Object(l.h)(h.c,{id:"tracks.summary"},"Track summary")),Object(l.h)("p",null,Object(l.h)(h.c,{id:"tracks.summary-info"},"The summary for this track is estimated based on the tracks profile and your team settings.")))),Object(l.h)("div",{class:"row mt-2"},Object(l.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3"},Object(l.h)("div",{class:"row"},Object(l.h)("div",{class:"col text-center"},Object(l.h)("small",{class:"text-muted"},Object(l.h)("i",{class:"fas fa-road"})," ",Object(l.h)(h.c,{id:"tracks.distance"},"Distance")),Object(l.h)("h3",null,Object(l.h)(x.a,{stores:this.props.stores,value:P.distanceKm})),$.calculatedTotalDistance>0&&Object(l.h)("small",{class:"text-muted",style:"line-height: 0.8em;"},Object(l.h)(h.c,{id:"workouts.kcal-calculated"},"Beregnet:")," ",Object(l.h)(x.a,{stores:this.props.stores,value:$.calculatedTotalDistance}),Object(l.h)("br",null))),Object(l.h)("div",{class:"col text-center"},Object(l.h)("small",{class:"text-muted"},Object(l.h)("i",{class:"fas fa-mountain"})," ",Object(l.h)(h.c,{id:"tracks.elevation"},"Elevation")),Object(l.h)("h3",null,Object(l.h)(k.a,{stores:this.props.stores,value:P.elevation})),$.calculatedAscend>0&&Object(l.h)("small",{class:"text-muted",style:"line-height: 0.8em;"},Object(l.h)(h.c,{id:"workouts.kcal-calculated"},"Beregnet:")," ",Object(l.h)(k.a,{stores:this.props.stores,value:$.calculatedAscend}),Object(l.h)("br",null))),Object(l.h)("div",{class:"col text-center"},Object(l.h)("small",{class:"text-muted"},Object(l.h)("i",{class:"fas fa-mountain"})," ",Object(l.h)(h.c,{id:"tracks.downhill"},"Downhill")),Object(l.h)("h3",null,Object(l.h)(k.a,{stores:this.props.stores,value:P.decent})),$.calculatedDescend>0&&Object(l.h)("small",{class:"text-muted",style:"line-height: 0.8em;"},Object(l.h)(h.c,{id:"workouts.kcal-calculated"},"Beregnet:")," ",Object(l.h)(k.a,{stores:this.props.stores,value:$.calculatedDescend}),Object(l.h)("br",null)))))),Object(l.h)("div",{class:"row mt-2"},Object(l.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3"},Object(l.h)("div",{class:"row"},Object(l.h)("div",{class:"col text-center"},Object(l.h)("small",{class:"text-muted"},Object(l.h)("i",{class:"fas fa-clock"})," ",Object(l.h)(h.c,{id:"tracks.duration"},"Duration")),Object(l.h)("h3",null,n.a.secToHms($.duration))),$.normalSpeedMs>0?Object(l.h)("div",{class:"col text-center"},Object(l.h)("small",{class:"text-muted"},Object(l.h)("i",{class:"fas fa-tachometer-alt"})," ",Object(l.h)(h.c,{id:"tracks.speed"},"Speed")),Object(l.h)("h3",null,Object(l.h)(v.a,{stores:this.props.stores,value:3.6*$.normalSpeedMs}))):Object(l.h)("div",{class:"col text-center"},Object(l.h)("small",{class:"text-muted"},Object(l.h)("i",{class:"fas fa-tachometer-alt"})," ",Object(l.h)(h.c,{id:"tracks.speed"},"Speed")),Object(l.h)("h3",null,Object(l.h)(v.a,{stores:this.props.stores,value:$.normalSpeed})))))),Object(l.h)("div",{class:"row mt-2"},Object(l.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3"},(n.a.checkNested(P,"gpxInfo","elevations")||n.a.checkNested(P,"gpx","gpxInfo","elevations"))&&Object(l.h)(g.a,{stores:this.props.stores,showTemperatur:!1,key:"track-elevation-"+P.id}))),A>0&&Object(l.h)("div",{class:"row mt-2"},Object(l.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3"},Object(l.h)("h5",{onClick:this.toggleAdminInfo},Object(l.h)(h.c,{id:"workouts.load-index"},"Belastningsindex"))),Object(l.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 text-center"},Object(l.h)(f.a,{key:"gauge-"+A,radius:100,showPercentText:!0,color:m.a.getLoadIndexColor(n.a.normalizeBetween(A,0,S,0,100)),percent:Math.floor(n.a.normalizeBetween(A,0,S,0,100)),completed:m.a.getLoadIndexText(n.a.normalizeBetween(A,0,S,0,100)),prefix:""}),Object(l.h)("div",null,Object(l.h)("span",{class:"badge badge-pill badge-secondary"},"Long distance"),Object(l.h)("span",{class:"badge badge-pill badge-secondary ml-2"},"Serious amature"),Object(l.h)("br",null)),D&&o&&Object(l.h)("div",null,Object(l.h)("small",null,Object(l.h)("span",{class:"badge badge-secondary mr-2"},"loadIndex: ",$.loadIndex),Object(l.h)("span",{class:"badge badge-secondary mr-2"},"Max loadIndex: ",S),Object(l.h)("span",{class:"badge badge-secondary mr-2"},"totalKcalRelated: ",n.a.format($.totalKcalRelated,1)),Object(l.h)("span",{class:"badge badge-secondary mr-2"},"normalSpeedMs: ",$.normalSpeedMs),Object(l.h)("span",{class:"badge badge-secondary mr-2"},"normalDuration: ",$.normalDuration),Object(l.h)("span",{class:"badge badge-secondary mr-2"},"durationFactor: ",n.a.format($.durationFactor,2)),Object(l.h)("div",null,Object(l.h)("small",{class:"text-muted"},"loadIndex = Math.floor(totalKcalRelated * durationFactor * speedFactor * typeFactor * ambitionFactor);"))))))),"photos"===a&&Object(l.h)(t,null,Object(l.h)("div",{class:"row mt-4"},Object(l.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3"},Object(l.h)("h5",null,Object(l.h)(h.c,{id:"tracks.photos"},"Photos from this track")))),Object(l.h)("div",{class:"row"},Object(l.h)(h.b,null,Object(l.h)(p.a,{stores:this.props.stores,images:P.images,noimagestext:Object(l.h)(h.c,{id:"tracks.no-photos"},"No photos for this track.")})))),Object(l.h)("div",{class:"row"},Object(l.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-3"},_&&_.length>0&&Object(l.h)("small",{class:"bg-light shadow-sm rounded-lg py-0 px-1",style:"bottom: 20px; right: 15px;"},Object(l.h)("i",{class:"fas fa-thumbs-up text-primary"})," ",_.length),W&&W.length>0&&Object(l.h)("small",{class:"float-right bg-light shadow-sm rounded-lg py-0 px-1",style:"bottom: 20px; right: 15px;"},Object(l.h)("i",{class:"fas fa-comment text-primary"})," ",W.length)),Object(l.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-2 mb-3"},Object(l.h)("div",{class:"row"},Object(l.h)("div",{class:"col-6 text-center"},Object(l.h)("button",{type:"button",class:`btn btn-outline-${z?"primary":"secondary"} btn-lg btn-block ${z?"text-primary":""}`,onClick:this.likeTrack},Object(l.h)("i",{class:(z?"text-primary fas":"far")+" fa-thumbs-up"})," Like")),Object(l.h)("div",{class:"col-6 text-center"},Object(l.h)("button",{type:"button",class:"btn btn-outline-secondary btn-lg btn-block","data-id":P.id,onClick:this.toggleAddComment},Object(l.h)("i",{class:"fas fa-comment"})," Comment")))),i&&Object(l.h)(j.a,{stores:this.props.stores,track:P,inputRef:t=>this.inputRef[P.id]=t,inputRefObject:this.inputRef}),Object(l.h)(O.a,{stores:this.props.stores,track:P,cols:"12"}),Object(l.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-5"},F&&Object(l.h)("button",{class:"btn btn-sm btn-danger mt-5 float-right",onClick:this.deleteTrack},Object(l.h)("i",{class:"fas fa-trash"})," ",Object(l.h)(h.c,{id:"tracks.delete"},"Slett")," ",P.name))))}})||i;e.default=R}.call(this,s("hosL").Fragment)},s4FZ:function(t,e,s){"use strict";(function(t){function a(t){return l.a.isObject(t)&&t.s3LargeLink}var o,i=s("hosL"),l=s("Utv1"),n=s("/eY4");s("OhSV");let c=Object(n.a)(o=class extends i.Component{constructor(t){super(t),this.scrollImages=t=>{const{images:e}=this.props,{scrollLeft:s,clientWidth:a}=t.target,o=s/a,i=Math.round(o),l=Math.abs(i-o);(Number.isInteger(o)||l<.1)&&this.setState({imageIdx:i})},this.onClickScrollLeft=()=>{const t=this.imageScrollerRef;t.scrollBy({top:0,left:0-t.clientWidth,behavior:"smooth"})},this.onClickScrollRight=()=>{const t=this.imageScrollerRef;t.scrollBy({top:0,left:t.clientWidth,behavior:"smooth"})},this.distance=t=>Math.hypot(t.touches[0].pageX-t.touches[1].pageX,t.touches[0].pageY-t.touches[1].pageY),this.pinchZoomOnTouchStart=t=>{if(2===t.touches.length){t.preventDefault(),t.stopPropagation();const e={};e.x=(t.touches[0].pageX+t.touches[1].pageX)/2,e.y=(t.touches[0].pageY+t.touches[1].pageY)/2,e.distance=this.distance(t),this.setState({start:e})}},this.pinchZoomOnTouchMove=t=>{let{imageElementScale:e,imageElementMaxScale:s}=this.state;const{start:a}=this.state;if(2===t.touches.length){let o;if(t.preventDefault(),t.stopPropagation(),t.scale)o=t.scale;else{o=this.distance(t)/a.distance}e=Math.min(Math.max(1,o),s),this.setState({imageElementScale:e},()=>{const s=`translate3d(${2*((t.touches[0].pageX+t.touches[1].pageX)/2-a.x)}px, ${2*((t.touches[0].pageY+t.touches[1].pageY)/2-a.y)}px, 0) scale(${e})`;t.target.style.transition="",t.target.style.transform=s,t.target.style.WebkitTransform=s,t.target.style.zIndex="100000"})}},this.pinchZoomOnTouchEnd=t=>{this.setState({imageElementScale:1}),t.target.style.transition="transform 250ms",t.target.style.transform="",t.target.style.WebkitTransform="",t.target.style.zIndex=""},this.state={imageIdx:0,imageElementScale:1,imageElementMaxScale:5,start:{}}}render(){const{imageIdx:e,imageElementScale:s}=this.state,{images:o,id:l,dblClick:n=(()=>{}),likeRef:c={},noimagestext:r,minHeight:h="100px"}=this.props,{appState:d}=this.props.stores,{isCordova:m}=d,b=e>0,p=e<o.length-1;return o&&0!==o.length?Object(i.h)("div",{class:"w-100 position-relative"},Object(i.h)("div",{class:"d-flex flex-row flex-nowrap bg-light border-top border-bottom no-scrollbar",style:`\n                        overflow-x: ${s>1&&1===o.length?"visible !important":"auto"};\n                        overflow-y: ${s>1?"visible !important":"auto"};\n                        scroll-snap-type: x mandatory;\n                    `,onScroll:this.scrollImages,ref:t=>this.imageScrollerRef=t},o&&o.filter(a).map(e=>Object(i.h)("div",{class:"col-12 clearfix p-0"},Object(i.h)("div",{class:"w-100 h-100 text-center rounded-lg imageContainer d-flex justify-content-center align-items-center position-relative ",style:"\n                                    scroll-snap-align: start;\n                                    flex-wrap: wrap;\n                                ",onDblclick:n,"data-id":l,onTouchstart:t=>{t.stopPropagation()},onTouchend:t=>{t.stopPropagation()},onTouchmove:t=>{t.stopPropagation()}},Object(i.h)("div",{class:"position-absolute w-100 h-100",style:`\n                                        background-image: url('${e.s3SmallLink}'); background-size: cover;\n                                        filter: blur(10px);\n                                        opacity: 0.5;\n                                    `}),e.s3LargeLink?Object(i.h)("img",{class:"img-fluid position-relative",src:`${e.s3LargeLink}${e.updatedDate?"?updated="+(""+e.updatedDate):""}`,loading:"lazy",style:`max-height: 75vh; min-height: ${h}; `,onTouchstart:this.pinchZoomOnTouchStart,onTouchend:this.pinchZoomOnTouchEnd,onTouchmove:this.pinchZoomOnTouchMove}):Object(i.h)(t,null,Object(i.h)("span",{class:"display-1 text-muted"},Object(i.h)("i",{class:"fas fa-camera"})))),c[l]&&Object(i.h)("span",{class:"likeHeart position-absolute text-white display-1",style:"top: calc(50% - 50px); left: calc(50% - 50px); width: 100px; height: 100px;"},Object(i.h)("i",{class:"fas fa-heart likeStory"}))))),o&&o.length>1&&Object(i.h)(t,null,Object(i.h)("div",{class:"w-100 text-center"},Object(i.h)("small",null,Object(i.h)("small",null,o&&o.filter(a).map((s,a)=>Object(i.h)(t,null,Object(i.h)("i",{class:(a===e?"fas":"far")+" fa-circle mr-1"})))))),Object(i.h)("div",{class:"position-absolute text-white font-weight-lighter px-1 py-1 rounded-lg",style:"top: 10px; right: 10px; background-color: rgba(0, 0, 0, 0.3); line-height: 1.0em;"},Object(i.h)("small",null,e+1," / ",o.length))),m?Object(i.h)(t,null):Object(i.h)(t,null,b&&Object(i.h)("div",{class:"position-absolute d-none d-lg-block",style:"top: 50%; left: 5px;"},Object(i.h)("button",{type:"button",class:"btn btn-link text-secondary",style:"font-size: 3.0em; opacity: 0.7;",onClick:this.onClickScrollLeft},Object(i.h)("i",{class:"fas fa-arrow-circle-left"}))),p&&Object(i.h)("div",{class:"position-absolute d-none d-lg-block",style:"top: 50%; right: 5px;"},Object(i.h)("button",{type:"button",class:"btn btn-link text-secondary",style:"font-size: 3.0em; opacity: 0.7;",onClick:this.onClickScrollRight},Object(i.h)("i",{class:"fas fa-arrow-circle-right"}))))):r?Object(i.h)(t,null,Object(i.h)("div",{class:"col-12 text-center text-muted"},Object(i.h)("div",{class:"display-1"},Object(i.h)("i",{class:"fas fa-camera"})),Object(i.h)("h3",{class:"font-weight-lighter"},r))):Object(i.h)(t,null)}})||o;e.a=c}).call(this,s("hosL").Fragment)},u2zT:function(t,e,s){"use strict";var a,o=s("hosL"),i=s("/eY4"),l=s("Utv1"),n=s("OhSV");let c=Object(i.a)(a=class extends o.Component{constructor(t){super(t),this.dropRef=Object(o.createRef)(),this.handleDrag=t=>{t.preventDefault(),t.stopPropagation()},this.handleDragIn=t=>{t.preventDefault(),t.stopPropagation(),this.dragCounter++,t.dataTransfer.items&&t.dataTransfer.items.length>0&&this.setState({drag:!0})},this.handleDragOut=t=>{t.preventDefault(),t.stopPropagation(),this.dragCounter--,0===this.dragCounter&&this.setState({drag:!1})},this.handleDrop=t=>{if(t.preventDefault(),t.stopPropagation(),this.setState({drag:!1}),t.dataTransfer.files&&t.dataTransfer.files.length>0){for(let e=0,s=t.dataTransfer.files.length;e<s;e+=1){this.readLocalFile(t.dataTransfer.files[e])}this.dragCounter=0}},this.handleAddFiles=t=>{t.preventDefault();const e=t.target;for(let t=0,s=e.files.length;t<s;t+=1){this.readLocalFile(e.files[t])}},this.handleEvent=()=>{0},this.handleUpload=t=>{const{uploadStatus:e=(()=>{}),before:s=(()=>{}),after:a=(()=>{})}=this.props;e(!1),l.a.isFunction(s)&&s();const o=new FormData;o.append("files[]",t);const i={progress:1};i.xhr=new XMLHttpRequest,i.xhr.upload.addEventListener("progress",e=>{this.updateProgress(e,t)}),i.xhr.addEventListener("loadstart",e=>{this.handleEvent(e,t)}),i.xhr.addEventListener("load",e=>{this.handleEvent(e,t)}),i.xhr.addEventListener("loadend",e=>{const s=t;l.a.isFunction(a)&&a(),this.handleEvent(e,s)}),i.xhr.addEventListener("progress",e=>{this.handleEvent(e,t)}),i.xhr.addEventListener("error",e=>{this.handleEvent(e,t)}),i.xhr.addEventListener("abort",e=>{this.handleEvent(e,t)}),i.xhr.addEventListener("readystatechange",e=>{this.uploadDone(e,t)}),i.xhr.open("POST",`${l.a.getApiServer()}${this.props.apiUrl}`),i.xhr.setRequestHeader("Authorization","Bearer "+l.a.getJwtToken()),i.xhr.send(o);const n=t.name,c=this.state.uploadedFilesData;c[n]||(c[n]={}),c[n].uploadMeta=i,c[n].imageNum=this.state.imageNum,this.setState({uploadedFilesData:c})},this.readLocalFile=t=>new Promise((e,s)=>{const a=new FileReader;a.addEventListener("error",t=>{s(t)}),a.addEventListener("load",s=>{const a=t,o=a.name,i=this.state.uploadedFilesData;i[o]||(i[o]={}),i[o].event=s,this.setState({uploadedFilesData:i}),this.handleUpload(a),e(s)}),a.readAsDataURL(t)}),this.updateProgress=(t,e)=>{if(t.lengthComputable){const s=e.name,a=this.state.uploadedFilesData,o=t.loaded/t.total*100;0,a[s].uploadMeta.progress=o,this.setState({uploadedFilesData:a})}},this.uploadDone=(t,e)=>{const s=e.name,a=this.state.uploadedFilesData,o=a[s].uploadMeta;if(o&&4===o.xhr.readyState&&201===o.xhr.status){const t=JSON.parse(o.xhr.responseText).data.files;for(let e=0;e<t.length;e+=1){this.addFileToUpload(t[e]),this.fileInput.value=""}}},this.state={drag:!1,loadingProgress:0,uploadedFiles:[],uploadedFilesData:{}}}addFileToUpload(t){const{uploadedFilesData:e}=this.state,{handleAddImage:s,uploadStatus:a=(()=>{})}=this.props;delete e[t.name],this.setState({uploadedFilesData:e}),s(t),a(!0)}componentDidMount(){const t=this.dropRef.current;t.addEventListener("dragenter",this.handleDragIn),t.addEventListener("dragleave",this.handleDragOut),t.addEventListener("dragover",this.handleDrag),t.addEventListener("drop",this.handleDrop);const{autoOpen:e}=this.props;e&&setTimeout(()=>{this.fileInput.click()},10)}componentWillUnmount(){const t=this.dropRef.current;t.removeEventListener("dragenter",this.handleDragIn),t.removeEventListener("dragleave",this.handleDragOut),t.removeEventListener("dragover",this.handleDrag),t.removeEventListener("drop",this.handleDrop)}render(){const{uploadedFilesData:t}=this.state;return Object(o.h)("div",{style:{position:"relative"},ref:this.dropRef},this.state.drag&&Object(o.h)("div",{style:{border:"dashed grey 4px",backgroundColor:"rgba(255,255,255,.8)",position:"absolute",top:0,bottom:0,left:0,right:0,zIndex:9999}},Object(o.h)("div",{style:{position:"absolute",top:"50%",right:0,left:0,textAlign:"center",color:"grey",fontSize:36}},Object(o.h)("div",null,Object(o.h)(n.c,{id:"imageupload.drag-files-here"},"drop your files here :)")))),Object(o.h)("div",null,Object(o.h)("input",{class:"btn btn-info col-sm-12",multiple:!0,type:"file",id:"image-file",onchange:this.handleAddFiles,ref:t=>{this.fileInput=t}})),Object(o.h)("div",null,Object.keys(t).length>0?Object(o.h)("h3",null,Object(o.h)(n.c,{id:"imageupload.upload-images"},"Uploaded images")):"",Object(o.h)("ul",{class:"list-group"},Object.keys(t).map(e=>{const{uploadMeta:s={}}=t[e],a=e.match(/(jpg|jpeg|png|gif|heic|heif|svg|webp|tif)/i);return Object(o.h)("li",{class:"list-group-item list-group-item-action flex-column align-items-start"},Object(o.h)("div",{class:"d-flex w-100 justify-content-between"},a&&Object(o.h)("img",{class:"img-fluid mr-3",src:t[e].event.target.result,style:"max-height: 50px;"}),Object(o.h)("small",null,t[e].event.uploadDone),Object(o.h)(n.c,{id:"imageupload.uploading-image"},"Laster opp bilde..."),Object(o.h)("small",null,l.a.formatBytes(t[e].event.total,2))),Object(o.h)("div",{class:"progress mt-1",style:"height: 4px;"},Object(o.h)("div",{class:"progress-bar progress-bar-striped progress-bar-animated bg-success",role:"progressbar",style:`width: ${s.progress}%; height: 4px;`,"aria-valuenow":s.progress,"aria-valuemin":"0","aria-valuemax":"100"})))}))),this.props.children)}})||a;e.a=c},wanP:function(t,e,s){"use strict";(function(t){function a(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,a)}return s}function o(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}var i,l=s("hosL"),n=(s("Utv1"),s("/eY4")),c=s("eK6s"),r=s.n(c);const h={mouseData:{}};let d=Object(n.a)(i=class extends l.Component{constructor(t){super(t),this.state=function(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?a(Object(s),!0).forEach((function(e){o(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):a(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}({},h),this.svgRef=null}render(){const{radius:e=50,heightAdd:s=0,color:a="success",showPercentText:o=!0,percent:i=0,prefix:n="",showCenterText:c=!1,centerText:h,centerTextSize:d,centerTextX:m,centerTextY:b,total:p="",totalY:u="90%",totalX:g="50%",totalTextAnchor:f="middle",completed:O="",completedY:j="65%",completedX:v="50%",completedTextAnchor:k="middle"}=this.props,x=.3*e,w=e-x/2,y=.3*e,T=2*w*Math.PI,L=.75*T,S=`${L} ${T}`,D=`rotate(135, ${e}, ${e})`,R=L-Math.min(Math.max(i,0),100)/100*L,I=d||e/2.5,C=e/5;return Object(l.h)(t,null,Object(l.h)("svg",{xmlns:"http://www.w3.org/2000/svg",class:r.a.svg,width:2*e,height:2*e+s,preserveAspectRatio:"none",ref:t=>this.svgRef=t},Object(l.h)("circle",{class:""+r.a.gaugeBackground,cx:e,cy:e,r:w,strokeWidth:x,strokeDasharray:S,strokeLinecap:"round",transform:D}),Object(l.h)("circle",{class:`${r.a[a]} ${r.a.gauge}`,cx:e,cy:e,r:w,stroke:"url(#grad)",strokeDasharray:S,strokeDashoffset:R,strokeLinecap:"round",strokeWidth:y,style:{transition:"stroke-dashoffset 0.3s"},transform:D}),o&&Object(l.h)("text",{class:`${r.a.gaugeText} ${r.a[a]}`,x:m||"50%",y:b||"50%","dominant-baseline":"middle","text-anchor":"middle","font-size":I},i," ",n),c&&Object(l.h)("text",{class:`${r.a.gaugeText} ${r.a[a]}`,x:m||"50%",y:b||"50%","dominant-baseline":"middle","text-anchor":"middle","font-size":I},h),O&&Object(l.h)("text",{class:`${r.a.gaugeText} ${r.a[a]}`,x:v,y:j,"dominant-baseline":"middle","text-anchor":k,"font-size":C},O),Object(l.h)("text",{class:`${r.a.gaugeText} ${r.a.secondary}`,x:g,y:u,"dominant-baseline":"middle","text-anchor":f,"font-size":C},p)))}})||i;e.a=d}).call(this,s("hosL").Fragment)}}]);
//# sourceMappingURL=31.chunk.8e083.esm.js.map