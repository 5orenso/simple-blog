(window.webpackJsonp=window.webpackJsonp||[]).push([[78],{"8j+j":function(e,t,s){"use strict";s.r(t),function(e){function a(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,a)}return s}function o(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?a(Object(s),!0).forEach((function(t){r(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):a(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function r(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function l(e,t){const s=void 0!==e.musher;return(void 0!==t.musher)-s||!0===s&&e.musher.bib-t.musher.bib||0}var c,n,i=s("hosL"),d=s("Utv1"),h=s("/eY4"),u=(s("OhSV"),s("ZOvn")),p=s("eT2M"),m=s.n(p);const f=u.a.marginTop(!0),b=u.a.marginBottom(),g={isLoading:!1,contentIsNotLoaded:!0,reloadInSec:null,reloadLastEpoch:null,reloadIsActive:!1};Object(h.a)(c=class extends i.Component{constructor(e){super(e),this.initComponent=()=>{const e=Math.floor((new Date).getTime()/1e3);this.setState({reloadIsActive:!0,reloadLastEpoch:e},()=>this.tickReloadTimeer())},this.state=o({},g),this.updateTimer={}}tickReloadTimeer(){const{reloadIsActive:e,reloadLastEpoch:t}=this.state;if(e){const e=Math.floor((new Date).getTime()/1e3);this.setState({reloadInSec:60-(e-t)}),clearTimeout(this.updateTimer.tick),this.updateTimer.tick=setTimeout(()=>this.tickReloadTimeer(),1e3)}return!1}componentDidMount(){this.initComponent()}componentWillUnmount(){clearTimeout(this.updateTimer.tick)}render(){const{reloadInSec:t}=this.state,s=Math.floor(d.a.normalizeBetween(t,0,60,0,100));return Object(i.h)(e,null,Object(i.h)("div",{class:"progress fixed-top",style:"height: 2px; z-index: 999999;"},Object(i.h)("div",{class:"progress-bar",role:"progressbar",style:`width: ${s}%;`,"aria-valuenow":s,"aria-valuemin":"0","aria-valuemax":"100"})))}});let O=Object(h.a)(n=class extends i.Component{constructor(e){var t;super(e),t=this,this.loadLiveRaceResults=async function(e=t.props,s,a){const{raceStore:o}=e.stores,{race:r}=o;await o.getRaceTrackerData(r.raceTrackerRace),o.getRaceTrackerActiveTeams(s,a)},this.loadRaceResults=async function(e=t.props,s,a){const{raceStore:o}=e.stores,{raceid:r}=e;await o.loadWorkoutSummary(s,r),o.getWorkoutSummaryActiveTeams(s,a)},this.loadRace=async function(e=t.props){t.setState({isLoading:!0});const{raceStore:s,appState:a}=e.stores,{raceid:o,classid:r}=e;await s.load(o);const{race:l}=s,{focusOnMushers:c}=a,{selectedClassIds:n=[]}=a,i=r||n[0];r&&a.toggleSelectedClassId(r,!0);const d=l.classes.filter(e=>e.id===i).filter(e=>e.contestants&&e.contestants.length>0).map(e=>e.contestants.filter(e=>e.team>0).map(e=>e.team)).flat();d.length>0&&await s.loadTeams(d.join(",")),l.liveRace>0?await t.loadLiveRaceResults(t.props,d,c):await t.loadRaceResults(t.props,d,c),s.getAllClassesSortedBy();const h=s.getClassById(i);h&&h.raceTrackerResults&&s.getRacetrackerResults(h.raceTrackerResults),clearTimeout(t.updateTimer.reload),t.updateTimer.reload=setTimeout((async function(){const s=Math.floor((new Date).getTime()/1e3);t.setState({reloadLastEpoch:s}),t.loadRace(e)}),6e4),t.setState({isLoading:!1})},this.toggleFocusOnMusher=e=>{const t=e.target.parentElement.dataset.musherid||e.target.dataset.musherid,{appState:s,raceStore:a}=this.props.stores;s.toggleFocusOnMusher(t);const{focusOnMushers:o}=s,{race:r}=a;r.liveRace>0?a.getRaceTrackerActiveTeams(null,o):a.getWorkoutSummaryActiveTeams(null,o)},this.state=o({},g),this.inputRef={},this.updateTimer={}}componentWillUnmount(){clearTimeout(this.updateTimer.reload),clearTimeout(this.updateTimer.tick)}componentDidMount(){this.loadRace()}componentWillReceiveProps(e){this.props.classid!==e.classid&&this.loadRace(e)}render(){const{userStore:t,raceStore:s,appState:a}=this.props.stores,{classid:o,position:r="right",limit:c=10}=this.props,{user:n={},teams:h=[]}=t,{language:p="en"}=n,{selectedClassIds:g=[],focusOnMushers:O=[]}=a,{race:j={},classes:v=[]}=s,{raceTrackerResults:y}=s,w=new Date(j.endDate);w.setHours(w.getHours()+2);const T=j.classes&&j.classes.find(e=>e.id===o)||{};let k=[];return y&&y.data?k=y.data.map(e=>{const t=s.raceTrackerMapLine(e),a=parseInt(t.Bib,10);let o={};return v&&v[T.id].contestants&&(o=v[T.id].contestants.find(e=>e.musher.bib===a)||{}),o}):v[T.id]&&v[T.id].contestants&&(k=v[T.id].contestants.sort(l).slice(0,c).map(e=>e)),Object(i.h)(e,null,Object(i.h)("div",{class:"fixed-top "+m.a.hoverElement,style:"height: 100px;"},Object(i.h)("div",{class:""+m.a.hoverelementonly},Object(i.h)("div",{class:"row"},j.classes&&j.classes.sort((e,t)=>e.distance-t.distance).map(t=>Object(i.h)(e,null,Object(i.h)("div",{class:"col"},Object(i.h)("a",{class:`btn btn-block ${t.id===o?"btn-success":"btn-outline-success"} text-nowrap`,style:"text-overflow: ellipsis; overflow: hidden;","data-id":t.id,href:`/tv/top10/${j.id}/${t.id}/${r}`},"Left: ",t.title),Object(i.h)("a",{class:"btn btn-link text-nowrap "+("left"===r?"float-right":"float-left"),style:"text-overflow: ellipsis; overflow: hidden;","data-id":t.id,href:`/tv/top10/${j.id}/${t.id}/${"left"===r?"right":"left"}`},"left"===r?Object(i.h)(e,null,"right ",Object(i.h)("i",{class:"fas fa-angle-right"})):Object(i.h)(e,null,Object(i.h)("i",{class:"fas fa-angle-left"})," left")))))))),Object(i.h)("div",{class:"container-fluid pt-5",style:`margin-bottom: ${b}; margin-top: ${f}; height: calc(100% - ${b} - ${f});`},Object(i.h)("div",{class:"row"},Object(i.h)("div",{class:"left"===r?"col-4 ml-5":"col-4 offset-8 mr-5",style:"font-size: 1.5em; line-height: 1.0em;"},Object(i.h)("table",{class:"table table-sm table-borderless rounded-lg"},Object(i.h)("thead",null,Object(i.h)("tr",null,Object(i.h)("td",{colspan:"2",class:"px-4 py-4 overflow-hidden",style:"background-color: #FB4114; color: #ffffff; border-radius: 10px 0 0 0; font-size: 1.4em;"},Object(i.h)("nobr",null,T.title)),Object(i.h)("td",{class:"px-3 text-center py-4 overflow-hidden",style:"background-color: #FB4114; color: #ffffff; border-radius: 0 10px 0 0 ; font-size: 1.1em;"},"Time"))),Object(i.h)("tbody",{style:' background-color: #1C1F4C; background-image: url("https://themusher.app/assets/tv-single-background.jpg"); background-size: cover !important; background-position: 0 0; '},k&&k.map((t,a)=>{const{musher:o={},currentTeam:r={},currentResults:l={},normalizedDuration:c,isDone:n,totalWorkoutTimeUsedSec:h}=t;s.getTotalsByTeamId(r.id);return Object(i.h)(e,null,Object(i.h)("tr",{style:"border-bottom: 1px solid #7B312F;"},Object(i.h)("td",{class:"text-center align-middle ml-0 pl-0",style:"width: 50px; color: #ffffff; font-size: 1.2em; line-height: 1.2em;"},Object(i.h)("div",{class:"d-flex justify-content-start"},Object(i.h)("div",{class:"pl-3 pr-2 w-100 clearfix rounded-pill-right",style:"background-color: "+u.a.getRankingColor(a+1)},o.bib||a+1))),Object(i.h)("td",{class:"px-3 py-3",style:"color: #ffffff; font-size: 1.2em;"},Object(i.h)("div",{class:"text-overflow",style:"max-width: 368px; line-height: 1.1em;"},Object(i.h)("span",{class:"float-right",onClick:this.toggleFocusOnMusher,"data-musherid":o.id},O.indexOf(o.id)>-1?Object(i.h)("i",{class:"fas fa-star text-warning"}):Object(i.h)("i",{class:"far fa-star"})),Object(i.h)("nobr",null,o.flag," ",o.firstname," ",o.lastname,Object(i.h)("br",null)))),Object(i.h)("td",{class:"text-center align-middle",style:"width: 150px; color: #ffffff; font-size: 1.2em;"},j.nonstop?Object(i.h)(e,null,Object(i.h)("nobr",null,d.a.secToHms(h)||"n/a")):Object(i.h)(e,null,1===n?Object(i.h)(e,null,Object(i.h)("nobr",null,d.a.secToHms(c)||"n/a")):Object(i.h)(e,null,Object(i.h)("nobr",null,d.a.secToHms(l.duration-l.rest)||"n/a"))))))})),Object(i.h)("tfoot",null,Object(i.h)("tr",null,Object(i.h)("td",{colspan:"3",class:"px-5 py-4 text-center overflow-hidden",style:"background-color: #FB4114; color: #ffffff; border-radius: 0 0 10px 10px; font-size: 1.1em;"},Object(i.h)("nobr",{class:"mr-4"},"QPaws app"),Object(i.h)("img",{src:"https://themusher.app/assets/appstore-download.png",height:"40",class:"ml-5 mr-1"}),Object(i.h)("img",{src:"https://themusher.app/assets/playstore-download.png",height:"40",class:"mx-1"})))))))))}})||n;t.default=O}.call(this,s("hosL").Fragment)},eT2M:function(e){e.exports={hoverelementonly:"hoverelementonly__3_DrK",hoverElement:"hoverElement__3ED7Q",hoverelementhide:"hoverelementhide__2AP13"}}}]);
//# sourceMappingURL=78.chunk.a8c7f.esm.js.map