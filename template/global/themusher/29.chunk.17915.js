(window.webpackJsonp=window.webpackJsonp||[]).push([[29],{AEg1:function(e,t,s){"use strict";(function(e){function o(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,o)}return s}function r(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}var n,a=s("hosL"),c=s("Utv1"),i=s("/eY4"),l=s("OhSV"),h=s("go65"),u=s("om2D"),d=s("ZOvn"),p={showAddImage:!1,showTeamChange:!1,showChangeVisibility:!1,showChangeType:!1,sendButtonEnabled:!0},b=Object(i.a)(n=function(t){function s(e){var s;return(s=t.call(this,e)||this).beforeImagesUploaded=function(){s.setState({sendButtonEnabled:!1})},s.afterImagesUploaded=function(){s.setState({sendButtonEnabled:!0})},s.addStory=function(){return new Promise((function(e,t){var o,r,n,a,c,i,l,h,u,p,b,m,f,g,O;return n=void 0===(r=(o=s.state).story)?{}:r,a=o.showAddImage,l=void 0===(i=(c=s.props).callback)?function(){}:i,u=void 0===(h=c.hashTags)?[]:h,p=c.postfix,m=void 0===(b=c.topic)?"team-"+n.team:b,f=s.props.stores.storyStore,o.sendButtonEnabled&&n.body?(s.setState({sendButtonEnabled:!1}),g=n.body,p&&(g+="\n\n"+p),u&&u.length>0&&(g+="\n\n"+u.map((function(e){return"#"+e})).join(" ")),Promise.resolve(f.insert({type:n.type,title:n.title,body:g,pinned:n.pinned,images:n.images,public:n.public?1:0,team:n.team,urlText:n.urlText,url:n.url,currency:n.currency,price:n.price,code:n.code,country:n.country,region:n.region,startDate:n.startDate,endDate:n.endDate,topic:m})).then(function(o){try{if((O=o)&&201===O.status)return Promise.resolve(f.loadPublicFeed({hashtags:u})).then(function(){try{return s.setState({story:{type:1,title:"",body:"",pinned:null,images:[],public:1,urlText:"",url:"",currency:"",price:null,code:"",country:"",region:"",startDate:null,endDate:null}},(function(){d.a.resizeTextarea(s.inputRef.newStoryBody),a&&s.addImage()})),l(O.data),r.call(this)}catch(e){return t(e)}}.bind(this),t);function r(){return s.setState({sendButtonEnabled:!0}),e()}return r.call(this)}catch(e){return t(e)}}.bind(this),t)):e(!1)}))},s.addImages=function(e){var t,o=s.state.story;(t=o.images).push.apply(t,e.value),s.setState({story:o})},s.removeImage=function(e){return new Promise((function(t){var o=s.state.story,r=e.target.parentElement.dataset.name||e.target.dataset.name;if(c.a.isArray(o.images)){var n=o.images.findIndex((function(e){return e.name===r}));n>-1&&o.images.splice(n,1)}return s.setState({story:o}),t()}))},s.addImage=function(){s.setState({showAddImage:!s.state.showAddImage})},s.changeVisibility=function(){s.setState({showChangeVisibility:!s.state.showChangeVisibility})},s.changePinned=function(){s.setState({showChangeVisibility:!s.state.showChangeVisibility})},s.changeType=function(){s.setState({showChangeType:!s.state.showChangeType})},s.toggleTeamChange=function(){s.setState({showTeamChange:!s.state.showTeamChange})},s.handleImageErrored=function(e){var t=e.target;t.onerror=null,setTimeout((function(){t.src+="?"+new Date}),1e3)},s.setPublicTeam=function(){var e=s.props.stores.userStore.findPublicTeams();if(c.a.isArray(e)&&e.length>0){var t=s.state.story;t.team=e[0].id,s.setState({story:t})}},s.setFocus=function(e){s.setState({hasFocus:!0}),d.a.resizeTextarea(e.target)},s.removeFocus=function(){s.setState({hasFocus:!1})},s.state=function(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?o(Object(s),!0).forEach((function(t){r(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):o(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}({story:{type:1,title:"",body:"",images:[],public:1,urlText:"",url:"",currency:"",price:0,code:"",country:"",region:"",startDate:"",endDate:""}},p),s.inputRef={},s}var n,i;i=t,(n=s).prototype=Object.create(i.prototype),n.prototype.constructor=n,n.__proto__=i;var b=s.prototype;return b.componentDidMount=function(){this.setPublicTeam()},b.render=function(){var t=this,s=this.props,o=s.col,r=void 0===o?12:o,n=s.offset,i=void 0===n?0:n,p=s.hashTags,b=void 0===p?[]:p,m=this.state,f=m.story,g=void 0===f?{}:f,O=m.showAddImage,j=m.showTeamChange,y=m.showChangeVisibility,v=m.showChangeType,w=m.sendButtonEnabled,x=m.hasFocus,S=this.props.stores,C=S.userStore,_=S.appState,T=C.user,k=void 0===T?{}:T,I=C.isAdmin,N=k.firstname?""+c.a.ucfirst(k.firstname,!0)+c.a.ucfirst(k.lastname,!0):""+c.a.ucfirst(k.email||"",!0),P=k.image||(k.images?k.images[0]:void 0);if(g.team){var D=parseInt(g.team,10),F=C.findTeam(D,!0);P=F.image||(F.images?F.images[0]:void 0)}var V=_.darkmode;return Object(a.h)("div",{class:"w-100 px-0"},Object(a.h)("div",{class:"row"},Object(a.h)("div",{class:"col-"+r+" offset-"+i+" col-sm-8 col-lg-6 offset-sm-2 offset-lg-3 rounded rounded-lg pt-3 pb-1 bg-"+(V?"black":"white")+" shadow-sm mb-1"},Object(a.h)("div",{class:"d-flex mb-0 position-relative w-100"},Object(a.h)("div",{class:"position-relative"},Object(a.h)("div",{class:"text-center border rounded-circle imageRounded imageRoundedSmall pointerCursor",style:(P?"background-image: url('"+P.s3SmallLink+"'); background-size: cover;":"")+" border-width: 3px !important;",onClick:this.toggleTeamChange},!P&&Object(a.h)("span",{class:"font-weight-lighter",style:"font-size: 15px;"},N)),Object(a.h)("div",{class:"position-absolute",style:"top: 16px; right: 0px;"},Object(a.h)("small",{class:"text-white",style:"font-size: 1.5em;"},Object(a.h)("i",{class:"fas fa-caret-down pointerCursor",onClick:this.toggleTeamChange})))),Object(a.h)("div",{class:"col pl-3 pr-0",style:"line-height: 1.2em;"},Object(a.h)("div",{class:"d-flex bd-highlight"},Object(a.h)("div",{class:"p-0 w-100 bd-highlight"},Object(a.h)("label",{class:"sr-only",for:"inlineFormInput"},Object(a.h)(l.c,{id:"story.body"},"Story")),Object(a.h)("div",{class:"border rounded rounded-lg position-relative"},Object(a.h)(l.b,null,Object(a.h)("textarea",{class:"form-control-plaintext px-2",type:"text",placeholder:Object(a.h)(l.c,{id:"story.write-body"},"Hva tenker du p√•?.."),onInput:Object(h.a)(this,"story.body"),onKeyUp:d.a.resizeTextarea,onFocus:this.setFocus,style:"height: 2.3em;",value:g.body,ref:function(e){return t.inputRef.newStoryBody=e}})),x&&Object(a.h)("div",{class:"position-absolute",style:"bottom: 8px; right: 10px; font-size: 1.2em;"},Object(a.h)("i",{class:"fas fa-image pointerCursor","data-id":g.id,onClick:this.addImage}),Object(a.h)("i",{class:"fas fa-"+(1===g.public?"globe-europe":"users")+" pointerCursor ml-2","data-id":g.id,onClick:this.changeVisibility}),I&&Object(a.h)("i",{class:"fas fa-cog pointerCursor ml-2","data-id":g.id,onClick:this.changeType}))),b&&b.length>0&&Object(a.h)(e,null,b.map((function(t){return Object(a.h)(e,null,Object(a.h)("span",{class:"badge badge-secondary mr-2 my-1"},Object(a.h)("a",{href:"/stories/tag/"+t,class:"text-white"},"#",t)))})))),Object(a.h)("div",{class:"p-0 pl-2 flex-shrink-1 bd-highlight pt-auto"},Object(a.h)("button",{type:"button",class:"btn btn-"+(w?"primary":"secondary")+" ml-1",disabled:!w,onClick:this.addStory},Object(a.h)("i",{class:"fas fa-paper-plane"})))))),Object(a.h)("div",null,Object(a.h)("div",{class:"row"},j&&Object(a.h)(e,null,Object(a.h)("div",{class:"col-12 text-center mt-2"},Object(a.h)("div",{class:"form-group"},Object(a.h)("small",null,Object(a.h)("select",{class:"custom-select custom-select-sm",id:"team",onInput:Object(h.a)(this,"story.team"),onChange:this.toggleTeamChange},Object(a.h)("option",{value:""},"-- ",Object(a.h)(l.c,{id:"story.team-choose"},"Velg team")," --"),c.a.isArray(k.teams)&&k.teams.map((function(e){var t=C.findTeam(e,!0);return t&&t.public?Object(a.h)("option",{value:t.id,selected:g.team==t.id?"selected":""},t.name):""})),!k.teams&&Object(a.h)(e,null,Object(a.h)("option",{value:""},"No public teams"))))))),y&&Object(a.h)(e,null,I&&Object(a.h)(e,null,Object(a.h)("div",{class:"col-12 text-center mt-2"},Object(a.h)("div",{class:"form-group"},Object(a.h)("small",null,Object(a.h)("label",{for:"pinned"},"Pinned to top:"),Object(a.h)("input",{id:"pinned",type:"checkbox",onInput:Object(h.a)(this,"story.pinned"),value:1,checked:g.pinned?1:0}))))),Object(a.h)("div",{class:"col-12 text-center mt-2"},Object(a.h)("div",{class:"form-group"},Object(a.h)("small",null,Object(a.h)("select",{class:"custom-select custom-select-sm",id:"team",onInput:Object(h.a)(this,"story.public"),value:g.public,onChange:this.changeVisibility},Object(a.h)("option",{value:0,selected:0==g.public?"selected":""},"üë• ",Object(a.h)(l.c,{id:"story.visibility-followers"},"Kun synlig for de som f√∏lger deg.")),Object(a.h)("option",{value:1,selected:1==g.public?"selected":""},"üåç ",Object(a.h)(l.c,{id:"story.visibility-public"},"Synlig for alle som bruker appen."))))))),v&&Object(a.h)(e,null,Object(a.h)("div",{class:"col-12 text-center mt-2"},Object(a.h)("div",{class:"form-group"},Object(a.h)("small",null,Object(a.h)("select",{class:"custom-select custom-select-sm",id:"team",onInput:Object(h.a)(this,"story.type"),value:g.type,onChange:this.changeType},Object(a.h)("option",{value:""},"-- ",Object(a.h)(l.c,{id:"story.type-choose"},"Velg type")," --"),Object(a.h)("option",{value:1,selected:1==g.type?"selected":""},"‚úçÔ∏è ",Object(a.h)(l.c,{id:"story.type-regular"},"Vanlig")),Object(a.h)("option",{value:2,selected:2==g.type?"selected":""},"üöÄ ",Object(a.h)(l.c,{id:"story.type-ad"},"Annonse")),Object(a.h)("option",{value:3,selected:3==g.type?"selected":""},"üìÑ ",Object(a.h)(l.c,{id:"story.type-article"},"Artikkel"))))))),O&&Object(a.h)(e,null,Object(a.h)("div",{class:"col-12 text-center mt-2"},Object(a.h)("div",{class:"container-fluid"},Object(a.h)("div",{class:"row"},c.a.isArray(g.images)&&g.images.map((function(e){return Object(a.h)("div",{class:"col-3 p-1"},Object(a.h)("img",{src:e.s3SmallLink,class:"img-fluid",onError:t.handleImageErrored}),Object(a.h)("button",{class:"btn btn-sm btn-link",onClick:t.removeImage,"data-name":e.name},Object(a.h)("i",{class:"fas fa-trash"})," Del"))})))),Object(a.h)(u.a,{object:g,updateField:this.addImages,before:this.beforeImagesUploaded,after:this.afterImagesUploaded,autoOpen:!0}))),g.type>1&&Object(a.h)(e,null,Object(a.h)("div",{class:"col-12 mt-3"},Object(a.h)("label",null,Object(a.h)(l.c,{id:"story.url-text"},"URL text")),Object(a.h)("div",{class:"form-group"},Object(a.h)("small",null,Object(a.h)("input",{class:"form-control",type:"text",name:"urlText",onInput:Object(h.a)(this,"story.urlText"),value:g.urlText})))),Object(a.h)("div",{class:"col-12 mt-3"},Object(a.h)("label",null,Object(a.h)(l.c,{id:"story.url"},"URL")),Object(a.h)("div",{class:"form-group"},Object(a.h)("small",null,Object(a.h)("input",{class:"form-control",type:"text",name:"url",onInput:Object(h.a)(this,"story.url"),value:g.url}))))),2==g.type&&Object(a.h)(e,null,Object(a.h)("div",{class:"col-12 mt-3"},Object(a.h)("label",null,Object(a.h)(l.c,{id:"story.code"},"Code")),Object(a.h)("div",{class:"form-group"},Object(a.h)("small",null,Object(a.h)("input",{class:"form-control",type:"text",name:"code",onInput:Object(h.a)(this,"story.code"),value:g.code})))),Object(a.h)("div",{class:"col-12"},Object(a.h)("label",null,Object(a.h)(l.c,{id:"story.region"},"Region")),Object(a.h)("div",{class:"form-group"},Object(a.h)("small",null,Object(a.h)("input",{class:"form-control",type:"text",name:"region",onInput:Object(h.a)(this,"story.region"),value:g.region})))),Object(a.h)("div",{class:"col-12"},Object(a.h)("label",null,Object(a.h)(l.c,{id:"story.country"},"Country")),Object(a.h)("div",{class:"form-group"},Object(a.h)("small",null,Object(a.h)("input",{class:"form-control",type:"text",name:"country",onInput:Object(h.a)(this,"story.country"),value:g.country})))),Object(a.h)("div",{class:"col-4"},Object(a.h)("label",null,Object(a.h)(l.c,{id:"story.currency"},"Currency")),Object(a.h)("div",{class:"form-group"},Object(a.h)("small",null,Object(a.h)("input",{class:"form-control",type:"text",name:"currency",onInput:Object(h.a)(this,"story.currency"),value:g.currency})))),Object(a.h)("div",{class:"col-8"},Object(a.h)("label",null,Object(a.h)(l.c,{id:"story.price"},"Price")),Object(a.h)("div",{class:"form-group"},Object(a.h)("small",null,Object(a.h)("input",{class:"form-control",type:"text",name:"price",onInput:Object(h.a)(this,"story.price"),value:g.price}))))))))))},s}(a.Component))||n;t.a=b}).call(this,s("hosL").Fragment)},ZQlJ:function(e,t,s){"use strict";var o,r=s("hosL"),n=(s("Utv1"),s("/eY4")),a=(s("OhSV"),s("NDEG")),c=Object(n.a)(o=function(e){function t(t){var s;return(s=e.call(this,t)||this).scrollImages=function(e){var t=e.target,o=t.scrollLeft/t.clientWidth,r=Math.round(o),n=Math.abs(r-o);(Number.isInteger(o)||n<.1)&&s.setState({imageIdx:r})},s.sortByName=function(e,t){var o=s.props.allDogs,r=void 0===o?[]:o,n=r.find((function(t){return t.id===e})),a=r.find((function(e){return e.id===t}));return n&&a&&n.name>a.name?1:-1},s.state={imageIdx:0},s}var s,o;return o=e,(s=t).prototype=Object.create(o.prototype),s.prototype.constructor=s,s.__proto__=o,t.prototype.render=function(){var e=this,t=this.props,s=t.dogs,o=t.allDogs,n=void 0===o?[]:o,c=t.size,i=void 0===c?"medium":c,l=t.onDogClick,h=void 0===l?function(){}:l;return Object(r.h)("div",{class:"w-100"},Object(r.h)("div",{class:"d-flex flex-row flex-nowrap no-scrollbar",style:"overflow: auto; scroll-snap-type: x mandatory;",onScroll:this.scrollImages},s&&s.sort(this.sortByName).map((function(t){var o=n.find((function(e){return e.id===t}));return o?Object(r.h)("div",{class:"col clearfix position-relative p-0 mx-2"},Object(r.h)("div",{class:"w-100 h-100 text-center rounded-lg imageContainer d-flex justify-content-center align-items-center",style:"\n                                        flex-wrap: wrap;\n                                        overflow-y: hidden;\n                                    ",onTouchstart:function(e){e.stopPropagation()},onTouchend:function(e){e.stopPropagation()},onTouchmove:function(e){e.stopPropagation()}},Object(r.h)(a.a,{stores:e.props.stores,dog:o,dogs:n.filter((function(e){return s.indexOf(e.id)>-1})).sort((function(e,t){return e.name>t.name?1:-1})),className:"mx-auto",showName:!0,showPosition:!1,size:i,onDogClick:h}))):""}))))},t}(r.Component))||o;t.a=c},gOLw:function(e,t,s){"use strict";(function(e){function o(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,o)}return s}function r(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}var n,a=s("hosL"),c=s("Utv1"),i=s("/eY4"),l=(s("X9Km"),s("NMoA")),h=s("VKmm"),u=s("rWES"),d=s("epqT"),p=s("yHBq"),b=s("q/oJ"),m=s("gWxU"),f=s("Nanz"),g=s("ISGx"),O=s("ZOvn"),j=O.a.marginTop(!1),y={loading:!1,limit:10,offset:0,idxConfirm:0,idxSuggestion:1,idxAd:5,sessionid:(new Date).getTime()},v=["id","type","user","team","title"],w=Object(i.a)(n=function(t){function s(s){var n;return(n=t.call(this,s)||this).reloadStories=function(){return new Promise((function(e,t){var s,o,r;return s=n.props.stores.appState,r=(o=n.state).limit,o.offset,0,n.setState({offset:0}),Promise.resolve(n.loadStoriesPublicFeed({props:n.props,limit:r,offset:0})).then((function(){try{return s.appContainerScrollTop(),e()}catch(e){return t(e)}}),t)}))},n.setCheckForNewStories=function(e){void 0===e&&(e=n.props),n.checkForNewStoriesTimer=setInterval((function(){return n.checkForNewStories({props:e})}),6e4)},n.clearCheckForNewStories=function(){clearInterval(n.checkForNewStoriesTimer)},n.insertTopRanked=function(){var e=n.props.stores.storyStore,t=e.publicFeed,s=c.a.shuffleArray(e.topRankedStories),o=[].concat(t),r=0,a=new Date;o.forEach((function(e,t){var s=c.a.parseInputDate(e.date);Math.floor((a.getTime()-s.getTime())/1e3)<86400&&(r=t+1)}));var i=o.length;if(i>r+3){for(var l=0;l<3;l+=1){var h=O.a.randomInt(r,i);c.a.isObject(s[l])&&o.splice(h,0,s[l])}e.localUpdateField("publicFeed",o)}},n.insertAds=function(){var e=n.state.idxAd,t=n.props.stores.storyStore,s=[].concat(t.publicFeed);s.splice(e,0,{type:"ad",wrapperClassNames:"row",contentClassNames:"col-12"}),t.localUpdateField("publicFeed",s)},n.insertTeamConfirm=function(){var e=n.state.idxConfirm,t=n.props.stores.storyStore,s=[].concat(t.publicFeed);s.splice(e,0,{type:"teamConfirm",wrapperClassNames:"row",contentClassNames:"col-12"}),t.localUpdateField("publicFeed",s)},n.insertTeamSuggestions=function(){var e=n.state.idxSuggestion,t=n.props.stores.storyStore,s=[].concat(t.publicFeed);s.splice(e,0,{type:"teamSuggestions",wrapperClassNames:"row",contentClassNames:"col-12"}),t.localUpdateField("publicFeed",s)},n.setLoadMore=function(){n.props.stores.storyStore.setLoadMore((function(){var e=n.state,t=e.limit,s=e.offset;n.setState({offset:s+=t}),n.loadStoriesPublicFeed({limit:t,offset:s})}))},n.unsetLoadMore=function(){n.props.stores.storyStore.setLoadMore((function(){}))},n.onTeamClick=function(e,t){return e.preventDefault(),e.stopPropagation(),n.setState({showTeam:t}),!1},n.hideTeam=function(){n.setState({showTeam:null})},n.onUserClick=function(e){return e.preventDefault(),e.stopPropagation(),!1},n.onDogClick=function(e,t,s){return e.preventDefault(),e.stopPropagation(),n.setState({showDog:t,dogs:s}),!1},n.hideDog=function(){n.setState({showDog:null})},n.setupIntersection=function(){n.setState({handleIntersection:O.a.intersectionObserverCallback});var e=n.props.stores.storyStore;n.scrollViewTimer=setInterval((function(){return e.postScrollview(O.a.getIntersectionObserverHistory())}),3e4)},n.renderContent=function(t){var s=t.obj,o=t.idx,r=n.props.stores.appState.path,c=n.props.hashtag;return"ad"===s.type?Object(a.h)(e,null,Object(a.h)(d.a,{stores:n.props.stores,path:r})):"teamConfirm"===s.type?Object(a.h)(e,null,Object(a.h)(u.a,{stores:n.props.stores})):"teamSuggestions"===s.type?Object(a.h)(e,null,Object(a.h)(h.a,{stores:n.props.stores})):"workout"===s.type?Object(a.h)(e,null,Object(a.h)(g.a,{stores:n.props.stores,feed:s,idx:o,onTeamClick:n.onTeamClick,onUserClick:n.onUserClick,onDogClick:n.onDogClick,holdingStore:"story"})):Object(a.h)(e,null,Object(a.h)(l.a,{stores:n.props.stores,story:s,hashtag:c,key:"story-detail-"+s.id,onTeamClick:n.onTeamClick,onUserClick:n.onUserClick}))},n.state=function(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?o(Object(s),!0).forEach((function(t){r(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):o(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}({},y),n.inputRef={},n.ref={},n}var n,i;i=t,(n=s).prototype=Object.create(i.prototype),n.prototype.constructor=n,n.__proto__=i;var w=s.prototype;return w.loadStoriesPublicFeed=function(e){return new Promise(function(t,s){var o,r,n;return n=e.offset,(r=void 0===(o=e.props)?this.props:o).path,Promise.resolve(r.stores.storyStore.loadPublicFeed({hashtag:r.hashtag,hashtags:r.hashtags,teamid:r.teamid,limit:e.limit,offset:n,sort:void 0})).then(function(){try{return n||(this.insertTopRanked(),this.insertTeamConfirm()),t()}catch(e){return s(e)}}.bind(this),s)}.bind(this))},w.checkForNewStories=function(e){return new Promise(function(t,s){var o,r;return e.limit,e.offset,(r=void 0===(o=e.props)?this.props:o).path,Promise.resolve(r.stores.storyStore.checkForNewStories({hashtag:r.hashtag,hashtags:r.hashtags,teamid:r.teamid})).then((function(){try{return t()}catch(e){return s(e)}}),s)}.bind(this))},w.componentWillMount=function(){this.setupIntersection()},w.componentDidMount=function(){this.loadStoriesPublicFeed({limit:this.state.limit,offset:0}),this.setLoadMore(),this.setCheckForNewStories()},w.componentWillUnmount=function(){this.unsetLoadMore(),this.props.stores.storyStore.postScrollview(O.a.getIntersectionObserverHistory()),clearInterval(this.scrollViewTimer),this.clearCheckForNewStories()},w.componentWillReceiveProps=function(e){e.hashtag===this.props.hashtag&&e.path===this.props.path||this.loadStoriesPublicFeed({props:e,limit:this.state.limit,offset:0})},w.render=function(){var t=this.state,s=t.loading,o=t.handleIntersection,r=t.sessionid,n=t.showTeam,c=t.showDog,i=this.props.stores,l=i.storyStore,h=l.publicFeed,u=l.hasNewStories,d=l.publicDogs,g=i.appState.darkmode;return Object(a.h)(e,null,n&&Object(a.h)(b.a,null,Object(a.h)(m.default,{stores:this.props.stores,teamid:n,marginTop:"0px;",marginBottom:"0px;",back:this.hideTeam})),c&&Object(a.h)(b.a,null,Object(a.h)(f.default,{stores:this.props.stores,dogid:c,marginTop:"0px;",marginBottom:"0px;",back:this.hideDog,dogs:d})),Object(a.h)("div",{class:"w-100"},u&&Object(a.h)(e,null,Object(a.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 d-flex justify-content-center fixed-top",style:"margin-top: "+j+";"},Object(a.h)("button",{class:"btn btn-sm btn-primary rounded-pill",onClick:this.reloadStories},"New stories"))),Object(a.h)(p.a,{data:h,wrapperClassNames:"row pb-1",contentClassNames:"col-12 col-sm-8 col-lg-6 offset-sm-2 offset-lg-3 my-1 position-relative rounded rounded-lg py-3 bg-"+(g?"black":"white")+" shadow-sm",renderContent:this.renderContent,dataFields:v,handleIntersection:o,sessionid:r}),s&&Object(a.h)("div",{class:"d-flex justify-content-center"},Object(a.h)("div",{class:"spinner-border text-primary",role:"status"},Object(a.h)("span",{class:"sr-only"},"Loading...")))))},s}(a.Component))||n;t.a=w}).call(this,s("hosL").Fragment)},w93r:function(e,t,s){"use strict";(function(e){var o,r=s("hosL"),n=s("/eY4"),a=s("Utv1"),c=s("OhSV"),i=(s("X9Km"),s("QkTp")),l=s("ZOvn"),h=Object(n.a)(o=function(t){function s(e){var s;return(s=t.call(this,e)||this).toggleyrWeather=function(){s.setState({showWeather:!s.state.showWeather})},s.state={},s.inputRef={},s}var o,n;n=t,(o=s).prototype=Object.create(n.prototype),o.prototype.constructor=o,o.__proto__=n;var h=s.prototype;return h.loadWeather=function(){return new Promise(function(e){var t=this.props.stores.userStore;this.setState({isLoading:!0});var s=t.user;if(s.currentLocationInfo&&s.currentLocationInfo.coords){var o=s.currentLocationInfo.coords;t.getWeatherUser({lat:o.latitude,lon:o.longitude,altitude:o.altitude}),t.formatWeather()}return e()}.bind(this))},h.componentDidMount=function(){this.loadWeather()},h.render=function(){var t=this,s=this.props.stores.userStore,o=s.yrWeather,n=s.yrWeatherKeys,h=s.yrWeatherFormatted,u=s.user.currentLocationGeocode;return o&&this.props.place?this.state.showWeather?Object(r.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 px-0 mb-4"},u&&u.formatted_address&&Object(r.h)("h5",null,u.formatted_address),Object(r.h)("div",{class:"table-responsive",onTouchstart:l.a.captureEvents,onTouchend:l.a.captureEvents,onTouchmove:l.a.captureEvents,onScroll:l.a.captureEvents},Object(r.h)("table",{class:"table table-striped table-sm"},Object(r.h)("thead",null,Object(r.h)("tr",null,Object(r.h)("th",{class:"text-center"},"¬†"),Object(r.h)("th",{class:"text-center"},Object(r.h)(c.c,{id:"weather.night"},"Night")),Object(r.h)("th",{class:"text-center"},Object(r.h)(c.c,{id:"weather.morning"},"Morning")),Object(r.h)("th",{class:"text-center"},Object(r.h)(c.c,{id:"weather.afternoon"},"Afternoon")),Object(r.h)("th",{class:"text-center"},Object(r.h)(c.c,{id:"weather.evening"},"Evening")),Object(r.h)("th",{class:"text-center"},Object(r.h)(c.c,{id:"weather.temp"},"Temp")),Object(r.h)("th",{class:"text-center"},Object(r.h)(c.c,{id:"weather.rainfall"},"Rainfall")),Object(r.h)("th",{class:"text-center"},Object(r.h)(c.c,{id:"weather.wind"},"Wind")))),Object(r.h)("tbody",null,n&&n.map((function(s){return Object(r.h)(e,null,Object(r.h)("tr",null,Object(r.h)("td",{class:"text-center"},Object(r.h)("nobr",null,s)),Object(r.h)("td",{class:"text-center"},Object(r.h)("nobr",null,a.a.getNestedValue(h[s].night,"next_6_hours.summary.symbol_code")&&Object(r.h)("img",{style:"width: 40px;",src:"./assets/svg/"+a.a.getNestedValue(h[s].night,"next_6_hours.summary.symbol_code")+".svg"}))),Object(r.h)("td",{class:"text-center"},Object(r.h)("nobr",null,a.a.getNestedValue(h[s].morning,"next_6_hours.summary.symbol_code")&&Object(r.h)("img",{style:"width: 40px;",src:"./assets/svg/"+a.a.getNestedValue(h[s].morning,"next_6_hours.summary.symbol_code")+".svg"}))),Object(r.h)("td",{class:"text-center"},Object(r.h)("nobr",null,a.a.getNestedValue(h[s].day,"next_6_hours.summary.symbol_code")&&Object(r.h)("img",{style:"width: 40px;",src:"./assets/svg/"+a.a.getNestedValue(h[s].day,"next_6_hours.summary.symbol_code")+".svg"}))),Object(r.h)("td",{class:"text-center"},Object(r.h)("nobr",null,a.a.getNestedValue(h[s].evening,"next_6_hours.summary.symbol_code")&&Object(r.h)("img",{style:"width: 40px;",src:"./assets/svg/"+a.a.getNestedValue(h[s].evening,"next_6_hours.summary.symbol_code")+".svg"}))),Object(r.h)("td",{class:"text-center"},Object(r.h)("nobr",null,Object(r.h)("i",{class:"fas fa-temperature-low text-muted ml-1 mr-2"}),Object(r.h)("span",{class:l.a.getTemperatureColor(a.a.getNestedValue(h[s],"air_temperatures_min"))},Object(r.h)(i.a,{stores:t.props.stores,value:a.a.getNestedValue(h[s],"air_temperatures_min")})),Object(r.h)("span",{class:"text-muted font-weight-lighter mx-1"},"-"),Object(r.h)("span",{class:l.a.getTemperatureColor(a.a.getNestedValue(h[s],"air_temperatures_max"))},Object(r.h)(i.a,{stores:t.props.stores,value:a.a.getNestedValue(h[s],"air_temperatures_max")})))),Object(r.h)("td",{class:"text-center"},Object(r.h)("nobr",null,a.a.format(a.a.getNestedValue(h[s],"precipitation_amount"),1)," ",Object(r.h)("span",{class:"text-muted font-weight-lighter"},"mm"))),Object(r.h)("td",{class:"text-center"},Object(r.h)("nobr",null,Object(r.h)("i",{class:"fas fa-wind text-muted ml-1"})," ",Object(r.h)("span",{class:l.a.getWindSpeedColor(a.a.getNestedValue(h[s],"wind_speeds_min"))},a.a.format(a.a.getNestedValue(h[s],"wind_speeds_min"),1))," ",Object(r.h)("span",{class:"text-muted font-weight-lighter"},"-")," ",Object(r.h)("span",{class:l.a.getWindSpeedColor(a.a.getNestedValue(h[s],"wind_speeds_max"))},a.a.format(a.a.getNestedValue(h[s],"wind_speeds_max"),1))," ",Object(r.h)("span",{class:"text-muted font-weight-lighter"},"m/s")))))}))))),Object(r.h)("button",{type:"button",class:"btn btn-block btn-primary btn-sm",onClick:this.toggleyrWeather},Object(r.h)("i",{class:"fas fa-times-circle"})," ",Object(r.h)(c.c,{id:"weather.close"},"Close"))):Object(r.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 px-0"},o&&o.length>0&&Object(r.h)("div",{class:"container-fluid px-0"},Object(r.h)("div",{class:"row",onClick:this.toggleyrWeather},o&&o.length>0&&o.slice(0,1).map((function(e){return Object(r.h)("div",{class:"col-12 text-right"},Object(r.h)("nobr",null,Object(r.h)("small",{class:"font-weight-light text-muted"},a.a.isoTime(e.time)),":",Object(r.h)("img",{src:"./assets/svg/"+a.a.getNestedValue(e,"next_1_hours.summary.symbol_code")+".svg",class:"ml-2",style:"height: 20px;"}),a.a.getNestedValue(e,"next_1_hours.details.precipitation_amount")>0&&Object(r.h)("small",{class:"ml-2"},a.a.getNestedValue(e,"next_1_hours.details.precipitation_amount"),Object(r.h)("span",{class:"text-muted font-weight-lighter"},"mm")),Object(r.h)("small",{class:"ml-2"},Object(r.h)("i",{class:"fas fa-temperature-low text-muted"})," ",Object(r.h)(i.a,{stores:t.props.stores,value:a.a.getNestedValue(e,"instant.details.air_temperature")})),Object(r.h)("small",{class:"ml-2"},Object(r.h)("i",{class:"fas fa-wind text-muted"})," ",a.a.getNestedValue(e,"instant.details.wind_speed"),Object(r.h)("span",{class:"text-muted font-weight-lighter"},"m/s")," ",Object(r.h)("span",{class:"text-muted font-weight-lighter"},l.a.windDirection(a.a.getNestedValue(e,"instant.details.wind_from_direction"))))),Object(r.h)("br",null))}))))):""},s}(r.Component))||o;t.a=h}).call(this,s("hosL").Fragment)}}]);
//# sourceMappingURL=29.chunk.17915.js.map