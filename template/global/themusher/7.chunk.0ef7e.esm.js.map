{"version":3,"sources":["webpack:///./components/imageSlider/index.js","webpack:///./components/dog/status.js","webpack:///./components/data/distance.js","webpack:///./components/style.css","webpack:///./components/data/temperature.js","webpack:///./components/form/files.js","webpack:///./components/data/weight.js","webpack:///./components/dog/formGraph.js","webpack:///./components/data/elevation.js","webpack:///./components/dog/calendar.js","webpack:///./components/data/speed.js","webpack:///./routes/dogs/detail.js","webpack:///./components/premium/badge.js","webpack:///./components/dog/history.js"],"names":["observer","Component","constructor","props","super","touchStart","e","stopPropagation","this","setState","startX","touches","pageX","touchEnd","undefined","sliding","touchMove","totalImages","state","scrollDistance","x","prevImage","nextImage","images","imageContainer","currentImage1","currentImage2","currentIdx","length","imageDots","Array","fill","map","y","nextImageContainer","nextIdx","componentWillReceiveProps","nextProps","nextImages","render","img","curImage","htmlImageRatio","height","width","imgHeight","imgWidth","dimensions","orientation","imageRatio","class","style","onTouchstart","onTouchend","onTouchmove","loading","src","s3LargeLink","ref","c","image1","image2","i","Dog","dog","showWorkout","showInfo","hideTeam","fullWidth","daysBack","filterBy","userStore","dogStore","workoutPlanStore","stores","user","language","dogStatus","findDogstatus","status","dogStatuses","statuses","dogPosition","findDogposition","position","workoutSummary","findCurrentWorkoutSummary","id","currentWeek","util","getWeek","Date","currentYear","getYear","currentMonth","getMonth","seasonStart","parseInt","week","year","planWeek","sumWorkoutPlanDaysBack","completedWeek","format","distanceKm","hasBirthday","mu","birth","hasWorkoutPlan","percentComplete","image","s3SmallLink","ucfirst","name","key","radius","heightAdd","showPercentText","percent","prefix","total","totalY","completed","completedY","age","deceased","gender","href","shortname","findTeam","team","positions","lead","point","wheel","elevation","duration","secToHms","speedAvg","weight","bodyScore","icon","specialNeeds","displayDistance","distance","Distance","value","smallUnit","settings","imperial","kmToMiles","module","exports","Temperature","celciusToFahrenheit","Files","handleAddImage","file","updateField","object","field","files","uploadStatus","before","after","autoOpen","apiUrl","Weight","kgToPounds","FormGraph","graphFitness","graphFatigue","graphForm","xTicksAll","date","partsLength","Math","floor","xTicks","l","push","showXTicks","paddingTop","lineFromXzero","lineFromXmax","dataLeft","dataFillLeft","legendLeft","dataRight","legendRight","showYTicksLeft","avgWindowLeft","smoothLeft","showYTicksRight","scrollToRight","Elevation","meterToFeet","RED_DAYS","HistoryCalendar","setHistoryType","callback","historyType","prevHistoryType","target","dataset","historytype","parentElement","chooseDay","yyyy","month","mm","day","dd","setDay","isLoading","workoutStore","currentTeam","getFeed","componentDidMount","loadHistorySummary","chosenDD","chosenMM","chosenYYYY","filterHistories","appState","HISTORY_TYPE_MAP","getHistoryMap","DAYS","getDays","MONTHS","getMonths","currentDay","getDate","getFullYear","basehref","monthNum","yearNum","nextMonth","nextYear","getNextMonth","prevMonth","prevYear","getPrevMonth","daysOfMonth","getDaysInMonth","weeksInMonth","getWeeksInMonth","daysOfWeek","getDaysInWeek","isoDate","getDay","weekObj","histories","findHistory","endHistories","findEndHistory","isChosen","isToday","isDayOff","indexOf","onClick","data-day","data-month","data-year","filter","history","idx","bgColor","getHistoryTypeColor","getHistoryPri","data-historytype","Speed","kmtToMph","MARGIN_TOP","marginTop","MARGIN_TOP_BACK","marginTopBack","MARGIN_BOTTOM","marginBottom","initialState","submenu","Input","handleImageErrored","onerror","setTimeout","removeImage","async","removeFile","saved","type","datalist","min","max","step","title","help","onInput","refName","showImages","showFiles","maxValue","for","createdDate","formatBytes","size","data-name","onError","list","aria-describedby","data-id","data-field","el","DogsDetail","loadDog","dogId","Promise","all","load","addData","getWorkoutSummary","findWorkoutSummaryCurrenSeason","findWorkoutSummaryPreviousSeason","loadTeam","motherChipId","loadExternalDogs","fatherChipId","plotFormGraph","loadWorkoutPlans","updateItem","resetGraphPlanWeekDistanceCurrent","query","seasonYear","seasonMonth","workoutPlans","workoutPlanCurrent","prepareWeekGraphs","updateKeyValue","showModal","preventDefault","displayModal","currentImage","currentImageXXL","imagexxl","thumb","closeModal","deleteDog","saveField","PubSub","publish","topics","STATUS_MESSAGE","message","route","elementtype","isNew","updateFieldValue","datatype","skipTimer","newValue","localObjectValue","isArray","split","parseFloat","updateObjectKeyValue","doUpdateField","clearTimeout","updateTimer","chooseSubmenu","menu","back","goBack","toggleCalendar","showCalendar","newHistory","time","isoTime","teamStore","loadAll","workoutPlan","vaccineStatuses","historyStatuses","workoutSummaryCurrentSeason","workoutSummaryPreviousSeason","hasHistory","teamNames","teams","forEach","dogVaccineLogStatuses","findVaccineLogStatuses","chipId","dogMother","findDog","mother","dogFather","father","children","findChildren","siblings","findSiblings","daysUntilBirthday","ceil","daysUntilNextBirthday","close","findHarness","harness","v","endDate","vaccineType","data-menu","horizontal","vertical","description","markdown","replaceImages","markdownOpts","getMarkdownOptions","currentSeason","prevSeason","Object","keys","asNumber","motherName","fatherName","d","className","getNestedValue","fields","reverse","line","trophys","getTrophyImage","textHeader","descriptionHeader","text","vac","inKarens","vaccineAgens","durationEnd","karensDaysLeft","veterinaryFirstname","veterinaryLastname","veterinaryEmail","achievements","url","links","s3Link","rel","VACCINE_TYPES","getVaccineTypes","DogHistoryLine","toggleDate","showDate","eventFired","startY","pageY","diffY","diffX","deleteVerify","reset","deleted","deleteHistoryRequest","deleteHistory","save","$pull","_id","swipeLeft","hasImage","isBeeingEdited","hoverElement","hoverelementonly","abs","grouped","dogImage","dogShortname","dogName","formatDate","locale","formatDistance","email","comment","cost"],"mappings":"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","file":"7.chunk.0ef7e.esm.js","sourcesContent":["import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\n\n@observer\nclass ImageSlider extends Component {\n    constructor(props) {\n        super(props);\n        const { images = [] } = props;\n        this.state = {\n            imageContainer: 1,\n            currentImage1: images[0] || {},\n            currentImage2: {},\n            currentIdx: 0,\n            totalImages: images.length || 0,\n            imageDots: [...Array(images.length || 0).fill(1).map((x, y) => x + y)],\n        };\n    }\n\n    nextImage() {\n        // console.log('next');\n        const { images } = this.props;\n        const { totalImages, currentIdx, imageContainer } = this.state;\n        const nextImageContainer = imageContainer === 1 ? 2 : 1;\n        let nextIdx = currentIdx + 1;\n        if (nextIdx > totalImages -1) {\n            nextIdx = 0;\n        }\n        this.setState({\n            [`currentImage${nextImageContainer}`]: images[nextIdx],\n            currentIdx: nextIdx,\n            imageContainer: nextImageContainer,\n        });\n    }\n\n    prevImage() {\n        // console.log('prev');\n        const { images } = this.props;\n        const { totalImages, currentIdx, imageContainer } = this.state;\n        const nextImageContainer = imageContainer === 1 ? 2 : 1;\n        let nextIdx = currentIdx - 1;\n        if (nextIdx < 0) {\n            nextIdx = totalImages - 1;\n        }\n        this.setState({\n            [`currentImage${nextImageContainer}`]: images[nextIdx],\n            currentIdx: nextIdx,\n            imageContainer: imageContainer === 1 ? 2 : 1,\n        });\n    }\n\n    touchStart = (e) => {\n        e.stopPropagation();\n        this.setState({\n            startX: e.touches[0].pageX,\n        })\n    }\n\n    touchEnd = (e) => {\n        e.stopPropagation();\n        this.setState({\n            startX: undefined,\n            sliding: false,\n        })\n    }\n\n    touchMove = (e) => {\n        e.stopPropagation();\n        // e.preventDefault();\n        const { totalImages } = this.state;\n        if (totalImages > 1) {\n            const { startX, sliding } = this.state;\n            const scrollDistance = 50;\n            const x = e.touches[0].pageX;\n            if (!sliding) {\n                if (x > startX + scrollDistance) {\n                    this.setState({ sliding: true })\n                    this.prevImage();\n                } else if (x < startX - scrollDistance) {\n                    this.setState({ sliding: true })\n                    this.nextImage();\n                }\n            }\n        }\n    }\n\n    componentWillReceiveProps(nextProps) {\n        // console.log('componentWillReceiveProps', nextProps);\n        if (nextProps.images !== this.props.images) {\n            const { images: nextImages = [] } = nextProps;\n            this.setState({\n                imageContainer: 1,\n                currentImage1: nextImages.length > 0 ? nextImages[0] : {},\n                currentImage2: {},\n                currentIdx: 0,\n                totalImages: nextImages.length || 0,\n                imageDots: [...Array(nextImages.length || 0).fill(1).map((x, y) => x + y)],\n            });\n        }\n    }\n\n    render() {\n        const { currentImage1, currentImage2, imageContainer, totalImages, imageDots, currentIdx } = this.state;\n        const img = this[`image${imageContainer}`];\n        const curImage = imageContainer === 1 ? currentImage1 : currentImage2;\n        const htmlImageRatio = img && img.height ? img.width / img.height : 4 / 3;\n        let imgHeight;\n        let imgWidth;\n        if (curImage.dimensions) {\n            const { width, height, orientation } = curImage.dimensions;\n            if (orientation > 4 && orientation < 9) {\n                imgHeight = width;\n                imgWidth = height;\n            } else {\n                imgHeight = height;\n                imgWidth = width;\n            }\n        }\n        const imageRatio = curImage.dimensions ? imgWidth / imgHeight : htmlImageRatio;\n        if (totalImages <= 0) {\n            return '';\n        }\n\n        return (\n            <div class='w-100'>\n                <div class='border rounded position-relative w-100'\n                    style={`height: calc(85vw / ${imageRatio}); overflow: hidden; transition: all .3s ease-in-out;`}\n                    onTouchstart={this.touchStart}\n                    onTouchend={this.touchEnd}\n                    onTouchmove={this.touchMove}\n                >\n                    {totalImages > 1 && <span class='position-absolute' style='top:0px; right: 5px; z-index: 2000;'><small>{currentIdx + 1}/{totalImages}</small></span>}\n                    {currentImage1 && <div class='position-absolute' style={`${imageContainer === 1 ? 'opacity: 1;' :  'opacity: 0;'} transition: all .3s ease-in-out; top: 0; left: 0;`}>\n                        <img loading='lazy' src={currentImage1.s3LargeLink}\n                            class='img-fluid align-middle'\n                            ref={c => this.image1 = c}\n                        />\n                    </div>}\n                    {currentImage2 && <div class='position-absolute' style={`${imageContainer === 2 ? 'opacity: 1;' :  'opacity: 0;'} transition: all .3s ease-in-out; top: 0; left: 0;`}>\n                        <img loading='lazy' src={currentImage2.s3LargeLink}\n                            class='img-fluid align-middle'\n                            ref={c => this.image2 = c}\n                        />\n                    </div>}\n                </div>\n                {imageDots.length > 1 && <div class='w-100 text-center'>{imageDots.map(i => <span style={`color: ${i === currentIdx + 1 ? '#ffffff' : '#808080'};`}>&bull;</span>)}</div>}\n            </div>\n        );\n    }\n}\n\nexport default ImageSlider;\n","import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport { toJS } from 'mobx';\nimport { Text, Localizer, withText } from 'preact-i18n';\n\nimport Gauge from '../gauge';\n\nimport mu from '../../lib/musher-util';\n\n// const STOP_STATUSES = [2, 9];\n// const WARN_STATUSES = [4, 8];\n\nfunction getFatigueLevel(wo, dog) {\n    return 'secondary';\n    // if (dog) {\n    //     if (STOP_STATUSES.indexOf(dog.status) > -1) {\n    //         return 'danger';\n    //     } else if (WARN_STATUSES.indexOf(dog.status) > -1) {\n    //         return 'warning';\n    //     }\n    // }\n    // if (wo) {\n    //     if (wo.distanceKm > 50) {\n    //         return 'danger';\n    //     } else if (wo.distanceKm > 30) {\n    //         return 'warning';\n    //     }\n    // }\n    // return 'success';\n}\n\n@observer\nclass Dog extends Component {\n    render() {\n        const { dog, showWorkout, showInfo, hideTeam = false, fullWidth = false, daysBack = 7, filterBy = '' } = this.props;\n\t\tconst { userStore, dogStore, workoutPlanStore } = this.props.stores;\n        if (!dog) {\n            return '';\n        }\n        const { isAdmin, user } = userStore;\n        const { language = 'en' } = user;\n\n        const dogStatus = userStore.findDogstatus({ status: dog.status, language });\n        const dogStatuses = dog.statuses ? dog.statuses.map(e => userStore.findDogstatus({ status: e, language })) : [];\n\n        const dogPosition = userStore.findDogposition({ position: dog.position, language });\n\n        const workoutSummary = dogStore.findCurrentWorkoutSummary(dog.id) || {};\n\n        const currentWeek = util.getWeek(new Date());\n\t\tconst currentYear = util.getYear();\n        const currentMonth = new Date().getMonth() + 1;\n        const seasonStart = parseInt(currentMonth < 8 ? currentYear - 1 : currentYear, 10);\n\t\tconst { week = currentWeek, year = seasonStart } = this.props;\n\t\tconst planWeek = workoutPlanStore.sumWorkoutPlanDaysBack(parseInt(year, 10), parseInt(week, 10), daysBack) || 0;\n        const completedWeek = util.format(workoutSummary.distanceKm || 0, 0);\n        const hasBirthday = mu.hasBirthday(dog.birth);\n\n        let hasWorkoutPlan = false;\n        let percentComplete = 0;\n        if (completedWeek && planWeek) {\n            percentComplete = completedWeek / planWeek * 100;\n            hasWorkoutPlan = true;\n        }\n        return (\n                    <div class={`${fullWidth ? '' : 'col-4'} mb-3 ${hasWorkoutPlan ? 'mt-2' : ''} position-relative`}>\n                        {/* {JSON.stringify(dog, null, 4)} */}\n                        <div\n                            class={`text-center border border-${getFatigueLevel(workoutSummary, dog)} rounded-circle imageRounded mx-auto text-muted pt-2 position-relative`}\n                            style={`${dog.image ? `background-image: url(\"${dog.image.s3SmallLink}\"); background-size: cover;` : ''} border-width: 2px !important;`}\n                        >\n                            {/* {!dog.image && <i class='fas fa-dog mt-3' style='font-size: 40px;' />} */}\n                            {!dog.image && <span class='font-weight-lighter' style='font-size: 35px;'>{util.ucfirst(dog.name, true)}</span>}\n                            {hasWorkoutPlan && <div class='position-absolute' style='top: -12px; left: -12px;'>\n                                <Gauge key={`gauge-${percentComplete}`}\n                                    radius={48} \n                                    heightAdd={15}\n                                    showPercentText={false}\n                                    percent={percentComplete}\n                                    prefix='%'\n                                    total={`${planWeek} km`}\n                                    totalY='95%'\n                                    completed={`${completedWeek} km`}\n                                    completedY='85%'\n                                />\n                            </div>}\n                        </div>\n                        <div class={`${hasWorkoutPlan ? 'mt-4' : ''}`} style='line-height: 1.0em;'>\n                            <small>\n                                <span class='float-right'>\n                                    {dog.birth && <span class='mr-2'>{util.age(dog.birth, dog.deceased)}</span>}\n                                    {dog.gender === 'female' ? <i class='fas fa-venus' /> : <i class='fas fa-mars' />}\n                                </span>\n                                <a class='stretched-link' href={`/dogs/${dog.id}`}>\n                                    <h5 class='mb-1 font-weight-light' style='line-height: 1.0em; font-size: 1.3em;'>\n                                        {dog.shortname || dog.name}\n                                        {hasBirthday && <>\n                                            <i class='fas fa-birthday-cake ml-3' />\n                                        </>}\n                                    </h5>\n                                </a>\n                                {!hideTeam && <><span class='font-weight-light'>{userStore.findTeam(dog.team)}</span><br /></>}\n                            </small>\n\n                                {filterBy && dog.positions && dog.positions.lead && <div class=''>\n                                    {filterBy === 'leadOnly' && dog.positions.lead.distanceKm > 0 && <span class='badge badge-success mr-2'>\n                                        <span><Text id='dogs.sort-lead'>Lead</Text>:</span> {util.format(dog.positions.lead.distanceKm, 0)} km\n                                    </span>}\n                                    {filterBy === 'pointOnly' && dog.positions.point.distanceKm > 0 && <span class='badge badge-success mr-2'>\n                                        <span><Text id='dogs.sort-point'>Point</Text>:</span> {util.format(dog.positions.point.distanceKm, 0)} km\n                                    </span>}\n                                    {filterBy === 'teamOnly' && dog.positions.team.distanceKm > 0 && <span class='badge badge-success mr-2'>\n                                        <span><Text id='dogs.sort-team'>Team</Text>:</span> {util.format(dog.positions.team.distanceKm, 0)} km\n                                    </span>}\n                                    {filterBy === 'wheelOnly' && dog.positions.wheel.distanceKm > 0 && <span class='badge badge-success mr-2'>\n                                        <span><Text id='dogs.sort-wheel'>Wheel</Text>:</span> {util.format(dog.positions.wheel.distanceKm, 0)} km\n                                    </span>}\n                                </div>}\n\n                            <small>\n                                {showWorkout && <small class='text-muted'>\n                                    {workoutSummary && workoutSummary.distanceKm > 0 && <span class='mr-2'><i class='fas fa-road' /> {util.format(workoutSummary.distanceKm, 0)}km</span>}\n                                    {workoutSummary && workoutSummary.elevation > 0 && <span class='mr-2'><i class='fas fa-mountain' /> {util.format(workoutSummary.elevation, 0)}m</span>}\n                                    {workoutSummary && workoutSummary.duration > 0 && <span class='mr-2'><i class='fas fa-clock' /> {util.secToHms(workoutSummary.duration, true)}</span>}\n                                    {workoutSummary && workoutSummary.speedAvg > 0 && <span class='mr-2'><i class='fas fa-tachometer-alt' /> {util.format(workoutSummary.speedAvg, 1)}km/t</span>}\n                                </small>}\n\n                                {showInfo && <small class='text-muted'>\n                                    {dog.weight && <><i class='fas fa-balance-scale ml-2' /> {util.format(dog.weight, 1)} kg</>}\n                                    {dog.bodyScore && <><i class='fas fa-dog ml-2' /> {util.format(dog.bodyScore, 1)}</>}\n                                </small>}\n\n                                <div class='clearfix pb-0 pt-1'>\n                                    {dogPosition && dogPosition.class && <span class={`badge badge-${dogPosition.class || 'primary'} mr-2`}>{dogPosition.icon && <i class={dogPosition.icon} />} {dogPosition.name}</span>}\n                                    {dog.specialNeeds && <span class={`badge badge-warning mr-2`}><i class='fas fa-exclamation-triangle' /> {dog.specialNeeds}</span>}\n                                    {dogStatus && dogStatus.class && <span class={`badge badge-${dogStatus.class} mr-2 mt-1`}>{dogStatus.icon && <i class={dogStatus.icon} />} {dogStatus.name}</span>}\n                                    {dogStatuses && dogStatuses.map(status => <>\n                                        {status && status.class && <span class={`badge badge-${status.class} mr-2 mt-1`}>{status.icon && <i class={status.icon} />} {status.name}</span>}\n                                    </>)}\n                                </div>\n                            </small>\n                        </div>\n                    </div>\n        );\n    }\n}\n\nexport default Dog;\n","import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport { Text, Localizer } from 'preact-i18n';\n\nimport mu from '../../lib/musher-util';\n\nfunction displayDistance(distance) {\n\tif (distance < 5) {\n\t\treturn util.format(distance, 2);\n\t}\n\tif (distance < 10) {\n\t\treturn util.format(distance, 1);\n\t}\n\treturn util.format(distance, 1);\n}\n\nfunction kmToMiles(value) {\n    return 0.621371 * value;\n}\n\n@observer\nclass Distance extends Component {\n    render() {\n\t\tconst { value = 0, smallUnit } = this.props;\n\t\tconst { userStore } = this.props.stores;\n\t\tconst { user } = userStore;\n\t\tconst { settings = {} } = user;\n\n        if (settings.imperial) {\n            return (<>\n                <nobr>\n\t\t\t\t\t{displayDistance(kmToMiles(value))} {smallUnit ? <><small><small><small class='ml-0 text-muted'>mi</small></small></small></> : <>mi</>}\n\t\t\t\t</nobr>\n            </>);\n        }\n\n\t\treturn (<>\n\t\t\t<nobr>\n\t            {displayDistance(value)} {smallUnit ? <><small><small><small class='ml-0 text-muted'>km</small></small></small></> : <>km</>}\n\t\t\t</nobr>\n\t    </>);\n    }\n}\n\nexport default Distance;\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"hoverelementonly\":\"hoverelementonly__1mJGJ\",\"hoverElement\":\"hoverElement__axh3O\",\"hoverelementhide\":\"hoverelementhide__1k_qH\",\"progress-bar-vertical\":\"progress-bar-vertical__1B2sC\",\"progress-bar\":\"progress-bar__pnsVj\",\"dragged\":\"dragged__QXO46\",\"over\":\"over__1re3x\",\"list\":\"list__q_emZ\"};","import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport { Text, Localizer } from 'preact-i18n';\n\nimport mu from '../../lib/musher-util';\n\nfunction celciusToFahrenheit(value) {\n    return ((value * 9/5) + 32);\n}\n\n@observer\nclass Temperature extends Component {\n    render() {\n\t\tconst { value = 0, smallUnit } = this.props;\n\t\tconst { userStore } = this.props.stores;\n\t\tconst { user } = userStore;\n\t\tconst { settings = {} } = user;\n\n        if (settings.imperial) {\n            return (<>\n                <nobr>\n                    {util.format(celciusToFahrenheit(value), 0)}F\n                </nobr>\n            </>);\n        }\n\n\t\treturn (<>\n            <nobr>\n                {util.format(value, 1)}C\n            </nobr>\n        </>);\n    }\n}\n\nexport default Temperature;\n","import { h, Component } from 'preact';\nimport { observer } from 'mobx-preact';\nimport { toJS } from 'mobx';\nimport util from 'preact-util';\nimport { Text, Localizer } from 'preact-i18n';\n\nimport DragNDropFileupload from './dragNdropFileupload';\n\n@observer\nclass Files extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            files: [],\n        };\n    }\n    \n    handleAddImage = (file) => {\n        // <Images saved={saved} object={dog} field={field} updateField={updateField} />\n        // updateFieldValue = ({ id, field, value, datatype, elementtype, isNew = false, skipTimer = false }) => {\n        const {\n            updateField,\n            object,\n            field,\n        } = this.props;\n        updateField({ id: object.id, field, value: file });\n\n        // let images = toJS(object.images);\n        // if (!util.isArray(images)) {\n        //     images = [];\n        // }\n        // images.push(file);\n        // updateField({ id: object.id, field: 'images', value: images });\n    };\n\n    render() {\n        const { uploadStatus = () => {}, before = () => {}, after = () => {}, autoOpen = false } = this.props;\n        return (\n            <div class='row'>\n                <div class='col-12'>\n                    <Text id='form.files.upload-file'>Last opp fil</Text>:<br />\n                    <DragNDropFileupload\n                        handleAddImage={this.handleAddImage}\n                        apiUrl={'/api/fileupload'}\n                        uploadStatus={uploadStatus}\n                        before={before}\n                        after={after}\n                        autoOpen={autoOpen}\n                    >\n                        <div style={{ height: 30, width: '100%' }}>\n                            {/* {files.map((file, idx) => (\n                                <div key={idx}>\n                                    {file.name}\n                                    Total: {util.asString(file, 'load', 'total')}\n                                    <img style='width: 48px;'\n                                        alt='Preview'\n                                        key={file.preview}\n                                        src={file.src}\n                                    />\n                                </div>\n                            ))} */}\n                        </div>\n                    </DragNDropFileupload>\n                </div>\n            </div>\n        );\n    }\n}\n\nexport default Files;\n","import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport { Text, Localizer } from 'preact-i18n';\n\nimport mu from '../../lib/musher-util';\n\nfunction kgToPounds(value) {\n    return 2.20462 * value;\n}\n\n@observer\nclass Weight extends Component {\n    render() {\n\t\tconst { value = 0, smallUnit } = this.props;\n\t\tconst { userStore } = this.props.stores;\n\t\tconst { user } = userStore;\n\t\tconst { settings = {} } = user;\n\n        if (settings.imperial) {\n            return (<>\n                <nobr>\n                    {util.format(kgToPounds(value), 0)} lb\n                </nobr>\n            </>);\n        }\n\n\t\treturn (<>\n            <nobr>\n                {util.format(value, 0)} kg\n            </nobr>\n        </>);\n    }\n}\n\nexport default Weight;\n","import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport { Text, Localizer, withText } from 'preact-i18n';\n\nimport mu from '../../lib/musher-util';\n\nimport LineGraph from '../../components/lineGraph';\n\n@observer\nclass FormGraph extends Component {\n    render() {\n        const { dogStore } = this.props.stores;\n        const {\n            graphFitness,\n            graphFatigue,\n            graphForm,\n\t\t} = dogStore;\n\n        const xTicksAll = graphForm.map(e => e.date);\n        const partsLength = Math.floor(xTicksAll.length / 4);\n        const xTicks = [];\n        for (let i = 0, l = xTicksAll.length; i < l; i += partsLength) {\n            xTicks.push(xTicksAll[i]);\n        }\n        xTicks[xTicks.length - 1] = xTicksAll[xTicksAll.length - 1];\n\n        return (\n            <>\n                <h5><Text id='teams.fitness'>Form og belastning</Text></h5>\n                <div class='w-100 mt-3 mb-4'>\n                    <Localizer>\n                        <LineGraph\n                            stores={this.props.stores}\n                            width={1500}\n                            height={300}\n                            showXTicks={1}\n                            xTicks={xTicks}\n                            paddingTop={30}\n                            lineFromXzero={false}\n                            lineFromXmax={false}\n\n                            dataLeft={[graphFitness, graphFatigue]}\n                            dataFillLeft={[1]}\n                            legendLeft={[<Text id='teams.legend-fitness'>Fitness</Text>, <Text id='teams.legend-fatigue'>Fatigue</Text>]}\n\n                            dataRight={[graphForm]}\n                            legendRight={[<Text id='teams.legend-form'>Form</Text>]}\n\n                            // yMaxLeft={30}\n                            // yMinLeft={0}\n                            showYTicksLeft={1}\n                            avgWindowLeft={[0, 0]}\n                            smoothLeft={[0, 0]}\n\n                            // dataRight={[graphWorkoutAvgWeekElevationCurrent, graphAvgWorkoutStatsElevation]}\n                            // legendRight={[`${seasonStart} ${ascendAvg}`, `${seasonStart} ${ascendAvgAll}`]}\n                            showYTicksRight={1}\n                            // yTicksRightPostfix={'m'}\n                            // unitRight={['m', 'm']}\n                            // avgWindowRight={[0, 0]}\n                            // smoothRight={[1, 1]}\n\n                            // marker={week}\n                            scrollToRight={true}\n                        />\n                    </Localizer>\n                </div>\n            </>\n        );\n    }\n}\n\nexport default FormGraph;\n","import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport { Text, Localizer } from 'preact-i18n';\n\nimport mu from '../../lib/musher-util';\n\nfunction meterToFeet(value) {\n    return 3.28084 * value;\n}\n\n@observer\nclass Elevation extends Component {\n    render() {\n\t\tconst { value = 0, smallUnit } = this.props;\n\t\tconst { userStore } = this.props.stores;\n\t\tconst { user } = userStore;\n\t\tconst { settings = {} } = user;\n\n        if (settings.imperial) {\n            return (<>\n                <nobr>\n                    {util.format(meterToFeet(value), 0)} {smallUnit ? <><small><small><small class='ml-0 text-muted'>ft</small></small></small></> : <>ft</>}\n                </nobr>\n            </>);\n        }\n\n\t\treturn (<>\n            <nobr>\n                {util.format(value, 0)} {smallUnit ? <><small><small><small class='ml-0 text-muted'>m</small></small></small></> : <>m</>}\n            </nobr>\n        </>);\n    }\n}\n\nexport default Elevation;\n","import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport { Text, Localizer, withText } from 'preact-i18n';\n\nimport mu from '../../lib/musher-util';\n\nconst RED_DAYS = [0, 6];\n\n@observer\nclass HistoryCalendar extends Component {\n\n    async loadHistorySummary(props = this.props) {\n        this.setState({ isLoading: true });\n\t\tconst { userStore, workoutStore } = this.props.stores;\n\t\tconst { currentTeam } = workoutStore;\n\n        const currentMonth = new Date().getMonth() + 1;\n        const { month = currentMonth, year = util.getYear(), team = currentTeam, dog = {}, callback = () => {} } = props;\n        await userStore.getFeed({ month, year, team, dog: dog.id });\n\n        const { historyType } = this.state;\n        callback(historyType);\n\n        this.setState({ isLoading: false });\n    }\n\n    setHistoryType = (e) => {\n        const { callback = () => {} } = this.props;\n        const { historyType: prevHistoryType } = this.state;\n        let historyType = e.target.dataset.historytype || e.target.parentElement.dataset.historytype;\n\n        if (historyType === prevHistoryType) {\n            this.setState({ historyType: null })\n            callback(null);\n        } else {\n            this.setState({ historyType });\n            callback(historyType);\n        }\n    }\n\n    chooseDay = (e) => {\n        const { year: yyyy, month: mm, day: dd } = this.state;\n        const { setDay = () => {} } = this.props;\n\t\tconst day = parseInt(e.target.parentElement.dataset.day || e.target.dataset.day, 10);\n\t\tconst month = parseInt(e.target.parentElement.dataset.month || e.target.dataset.month, 10);\n\t\tconst year = parseInt(e.target.parentElement.dataset.year || e.target.dataset.year, 10);\n\t\t// console.log({ day, month, year });\n\n        if (year === yyyy && month === mm && day === dd) {\n            this.setState({\n                year: null,\n                month: null,\n                day: null,\n            });\n            setDay(null, null, null);\n        } else {\n            this.setState({\n                year,\n                month,\n                day,\n            });\n            setDay(year, month, day);\n        }\n    }\n\n    componentDidMount() {\n        this.loadHistorySummary();\n    }\n\n    componentWillReceiveProps(nextProps) {\n        // console.log('componentWillReceiveProps', nextProps);\n        if (nextProps.month !== this.props.month\n            || nextProps.year !== this.props.year\n            || nextProps.dog !== this.props.dog\n            || nextProps.team !== this.props.team) {\n            this.loadHistorySummary(nextProps);\n        }\n    }\n\n    render() {\n        const { historyType, day: chosenDD, month: chosenMM, year: chosenYYYY } = this.state;\n        const filterHistories = historyType ? (e) => e.historyType === historyType : () => true;\n\n        const { appState, userStore } = this.props.stores;\n        const { user } = userStore;\n        const { language = 'en' } = user;\n\n        const HISTORY_TYPE_MAP = mu.getHistoryMap(language);\n        const DAYS = mu.getDays(language);\n        const MONTHS = mu.getMonths(language);\n\n\t\tconst { darkmode } = appState;\n        const currentDay = new Date().getDate();\n        const currentMonth = new Date().getMonth() + 1;\n        const currentYear = new Date().getFullYear();\n\t\tconst { month = currentMonth, year = util.getYear(), dog, basehref } = this.props;\n\n        const monthNum = parseInt(month, 10);\n        const yearNum = parseInt(year, 10);\n        const { month: nextMonth, year: nextYear } = mu.getNextMonth(monthNum, yearNum);\n        const { month: prevMonth, year: prevYear } = mu.getPrevMonth(monthNum, yearNum);\n\n        const daysOfMonth = util.getDaysInMonth(month, year);\n        const weeksInMonth = util.getWeeksInMonth(month, year);\n        const firstWeek = weeksInMonth[0].week;\n        const daysOfWeek = util.getDaysInWeek(firstWeek, year);\n\n        return (\n            <>\n                <div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-4'>\n                    <a href={`${basehref || '/workouts/month/'}${nextMonth}/${nextYear}/skipScroll`} class='float-right btn btn-sm btn-link'><i class='fas fa-arrow-right' /></a>\n                    <a href={`${basehref || '/workouts/month/'}${prevMonth}/${prevYear}/skipScroll`} class='float-left btn btn-sm btn-link'><i class='fas fa-arrow-left' /></a>\n                    <h5><Text id='dog.calendar.month'>Mned</Text> - {MONTHS[month - 1]} {year}</h5>\n                    {dog && <div>{dog.name}</div>}\n                    <small>{util.isoDate(daysOfMonth[0], false, false, true)} - {util.isoDate(daysOfMonth[daysOfMonth.length - 1], false, false, true)}</small>\n                </div>\n\n                <div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-4 mb-4'>\n                    <table class='table table-striped table-sm'>\n                        <thead>\n                            <tr>\n                                <th class='text-muted'><small><Text id='dog.calendar.week'>Uke</Text></small></th>\n                                {daysOfWeek.map(day => <th><small>{DAYS[day.getDay()]}</small></th>)}\n                                {/* <th class='text-muted'>Totalt</th> */}\n                            </tr>\n                        </thead>\n                        <tbody>\n                            {weeksInMonth && weeksInMonth.map(weekObj => {\n                                const daysOfWeek = util.getDaysInWeek(weekObj.week, year, month);\n                                return (\n                                    <tr>\n                                        <td class='text-right text-muted pt-3'>\n                                            <small>\n                                                {weekObj.week}\n                                            </small>\n                                        </td>\n                                        {daysOfWeek.map(day => {\n                                            const yyyy = day.getFullYear();\n                                            const mm = day.getMonth() + 1;\n                                            const dd = day.getDate()\n                                            const histories = userStore.findHistory(yyyy, mm, dd);\n                                            const endHistories = userStore.findEndHistory(yyyy, mm, dd);\n                                            // { \"id\": \"5f59d861eaa7385aaef6b399\", \"date\": \"2020-09-09T19:00:00.000Z\", \"year\": 2020, \"month\": 9,\n                                            // \"day\": 9, \"createdDate\": \"2020-09-10T07:40:17.834Z\", \"title\": \"Spiste ikke opp alt\",\n                                            // \"historyType\": \"foodLeftover\", \"images\": [], \"dogId\": 4, \"dogName\": \"Glenn\", \"dogShortname\": \"\",\n  \t\t\t\t\t\t\t\t\t\t\tconst isChosen = (chosenYYYY == yyyy && chosenMM == mm && chosenDD == dd);\n\t\t\t\t\t\t\t\t\t\t\tconst isToday =  (currentYear == yyyy) && (currentMonth == mm) && (currentDay == dd);\n\t\t\t\t\t\t\t\t\t\t\tconst isDayOff = RED_DAYS.indexOf(day.getDay()) > -1;\n\n                                            return (\n                                                <td class={`text-center font-weight-light position-relative pt-3 ${isChosen ? 'calendarIsChosen' : ''} ${isToday ? 'calendarIsToday' : ''} ${isDayOff ? 'calendarIsWeekend' : ''}`}\n                                                    style={`font-size: 0.8em;`}\n                                                    onClick={this.chooseDay} data-day={dd} data-month={mm} data-year={yyyy}\n                                                >\n                                                    <div class='position-absolute text-muted' style='top: 0px; right: 2px; font-size: 0.7em;'>\n                                                        {day.getDate()}\n                                                    </div>\n\n                                                    {histories && histories.length > 0 ? <>\n                                                        {histories.filter(filterHistories).map((history, idx) => {\n                                                            if (!history.historyType) {\n                                                                return (\n                                                                    <div class='rounded-circle position-absolute border'\n                                                                        style={`background-color: #808080; top: 50%; left: ${idx * 5}px; width: 15px; height: 15px;`}\n                                                                    />\n                                                                );\n                                                            }\n                                                            const bgColor = mu.getHistoryTypeColor(history.historyType);\n                                                            return (\n                                                                <div class='rounded-circle position-absolute border'\n                                                                    style={`background-color: ${bgColor}; top: 50%; left: ${idx * 5}px; width: 15px; height: 15px;`}\n                                                                />\n                                                            );\n                                                        })}\n                                                        {histories.length > 1 && <span class='position-absolute text-danger'\n                                                            style='bottom: 0; right: 0px; font-size: 0.7em;'>{histories.length}</span>}\n                                                    </>: '-'}\n\n                                                    {endHistories && endHistories.length > 0 ? <>\n                                                        {endHistories.filter(filterHistories).map((history, idx) => {\n                                                            if (!history.historyType) {\n                                                                return (\n                                                                    <div class='rounded position-absolute border border-white'\n                                                                        style={`background-color: #808080; top: 50%; left: ${idx * 5}px; width: 15px; height: 15px;`}\n                                                                    />\n                                                                );\n                                                            }\n                                                            const bgColor = mu.getHistoryTypeColor(history.historyType);\n                                                            return (\n                                                                <div class='rounded position-absolute border border-white'\n                                                                    style={`background-color: ${bgColor}; top: 50%; left: ${idx * 5}px; width: 15px; height: 15px;`}\n                                                                />\n                                                            );\n                                                        })}\n                                                        {endHistories.length > 1 && <span class='position-absolute text-danger'\n                                                            style='bottom: 0; right: 0px; font-size: 0.7em;'>{endHistories.length}</span>}\n                                                    </>: '-'}\n\n                                                </td>\n                                            );\n                                        })}\n                                    </tr>\n                                );\n                            })}\n                        </tbody>\n                    </table>\n                </div>\n\n                <div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-4 mb-4'>\n                    <div class='clearfix'>\n                        <small>\n                            {mu.getHistoryPri().map(key => {\n                                const bgColor = mu.getHistoryTypeColor(key);\n                                return (\n                                    <span class={`float-left mr-2 ${historyType === key ? 'font-weight-bold' : 'font-weight-lighter'}`} onClick={this.setHistoryType} data-historytype={key}>\n                                        <div class='rounded-circle border float-left mr-1'\n                                            style={`background-color: ${bgColor}; width: 15px; height: 15px;`}\n                                        /> {HISTORY_TYPE_MAP[key]}\n                                    </span>\n                                );\n                            })}\n                        </small>\n                    </div>\n                    <div class='clearfix'>\n                        <small>\n                            {mu.getHistoryPri(2).map(key => {\n                                const bgColor = mu.getHistoryTypeColor(key);\n                                return (\n                                    <span class={`float-left mr-2 ${historyType === key ? 'font-weight-bold' : 'font-weight-lighter'}`} onClick={this.setHistoryType} data-historytype={key}>\n                                        <div class='rounded-circle border float-left mr-1'\n                                            style={`background-color: ${bgColor}; width: 15px; height: 15px;`}\n                                        /> {HISTORY_TYPE_MAP[key]}\n                                    </span>\n                                );\n                            })}\n                        </small>\n                    </div>\n                    <div class='clearfix'>\n                        <small>\n                            {mu.getHistoryPri(3).map(key => {\n                                const bgColor = mu.getHistoryTypeColor(key);\n                                return (\n                                    <span class={`float-left mr-2 ${historyType === key ? 'font-weight-bold' : 'font-weight-lighter'}`} onClick={this.setHistoryType} data-historytype={key}>\n                                        <div class='rounded-circle border float-left mr-1'\n                                            style={`background-color: ${bgColor}; width: 15px; height: 15px;`}\n                                        /> {HISTORY_TYPE_MAP[key]}\n                                    </span>\n                                );\n                            })}\n                        </small>\n                    </div>\n                </div>\n            </>\n        );\n    }\n}\n\nexport default HistoryCalendar;\n","import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport { Text, Localizer } from 'preact-i18n';\n\nimport mu from '../../lib/musher-util';\n\nfunction kmtToMph(value) {\n    return 0.621371 * value;\n}\n\n@observer\nclass Speed extends Component {\n    render() {\n\t\tconst { value = 0, smallUnit } = this.props;\n\t\tconst { userStore } = this.props.stores;\n\t\tconst { user } = userStore;\n\t\tconst { settings = {} } = user;\n\n        if (settings.imperial) {\n            return (<>\n                <nobr>\n                    {util.format(kmtToMph(value), 1)} {smallUnit ? <><small><small><small class='ml-0 text-muted'><Text id='workouts.mph'>mph</Text></small></small></small></> : <><Text id='workouts.mph'>mph</Text></>}\n                </nobr>\n            </>);\n        }\n\n\t\treturn (<>\n            <nobr>\n                {util.format(value, 1)} {smallUnit ? <><small><small><small class='ml-0 text-muted'><Text id='workouts.kmt'>km/t</Text></small></small></small></> : <><Text id='workouts.kmt'>km/t</Text></>}\n            </nobr>\n        </>);\n    }\n}\n\nexport default Speed;\n","import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport { route } from 'preact-router';\nimport { Text, Localizer } from 'preact-i18n';\nimport Markdown from 'preact-markdown';\n\nimport PubSub, { topics } from '../../lib/pubsub';\nimport mu from '../../lib/musher-util';\nconst MARGIN_TOP = mu.marginTop(false);\nconst MARGIN_TOP_BACK = mu.marginTopBack(false);\nconst MARGIN_BOTTOM = mu.marginBottom();\n\nimport WorkoutGraph from '../../components/workout/graph';\nimport WorkoutCalendar from '../../components/workout/calendar';\nimport DogHistory from '../../components/dog/history';\nimport DogAddLog from '../../components/dog/addlog';\nimport DogCalendar from '../../components/dog/calendar';\nimport DogStatus from '../../components/dog/status';\nimport FormGraph from '../../components/dog/formGraph';\nimport PremiumBadge from '../../components/premium/badge';\nimport ImageScroller from '../../components/imageScroller';\n\nimport Modal from '../../components/modal';\nimport WorkoutTotals from '../../components/workout/totals';\nimport WorkoutStatus from '../../components/workout/status';\nimport Ad from '../../components/ad/';\n\nimport Speed from '../../components/data/speed';\nimport Elevation from '../../components/data/elevation';\nimport Weight from '../../components/data/weight';\nimport Distance from '../../components/data/distance';\nimport Temperature from '../../components/data/temperature';\n\nimport Images from '../../components/form/images';\nimport Files from '../../components/form/files';\n\nimport ScrollIntoView from '../../components/util/scrollIntoView';\n\nconst initialState = {\n    submenu: 'stats',\n};\n\n@observer\nclass Input extends Component {\n    handleImageErrored = (e) => {\n        const image = e.target;\n        image.onerror = null;\n        setTimeout(() => {\n            image.src += `?${new Date()}`;\n        }, 1000);\n    }\n\n    removeImage = async (e) => {\n        const { dogStore } = this.props.stores;\n        const { dog } = this.props;\n        const imageName = e.target.parentElement.dataset.name || e.target.dataset.name;\n        dogStore.removeImage({\n            id: dog.id,\n            name: imageName,\n        });\n    }\n\n    removeFile = async (e) => {\n        const { dogStore } = this.props.stores;\n        const { dog } = this.props;\n        const fileName = e.target.parentElement.dataset.name || e.target.dataset.name;\n        dogStore.removeFile({\n            id: dog.id,\n            name: fileName,\n        });\n    }\n\n    render() {\n        const { saved, dog, type = 'text', datalist = [], min, max, step, field, title, icon, help, onInput, updateField, refName, showImages = false, showFiles = false } = this.props;\n        let value = dog[field];\n        let maxValue = max;\n        if (type === 'date') {\n            if (value) {\n                value = util.isoDate(dog[field], false, false, true);\n            }\n            if (max === 'today') {\n                maxValue = util.isoDate(undefined, false, false, true);\n            }\n        }\n        if (type === 'file') {\n            return (\n                <div class={`form-group ${saved[`${field}.${dog.id}`] ? 'is-valid' : ''}`}>\n                    <label for={`${field}Input`}>{icon && <i class={`${icon} text-muted`} />} {title}</label>\n                    {showFiles && <>\n                        <div class='container-fluid'>\n                            <div class='row'>\n\n                                {(!dog.files || dog.files.length === 0) && <>\n                                    <div class='text-center text-muted'>\n                                        <div class='display-1'><i class='fas fa-file' /></div>\n                                        <h3><Text id='dogs.no-files-title'>No files attached to this dog!</Text></h3>\n                                        <Text id='dogs.no-files-text'>You can upload files to this dog inside edit. These files can be of any type. Ie: Certificates, test, etc.</Text>\n                                    </div>\n                                </>}\n\n                                {dog.files && dog.files.map(file => (\n                                    <div class='col-12 p-1'>\n                                        <span class='font-weight-lighter mr-2'>{util.isoDate(file.createdDate, false, false, true)}</span>\n                                        <span class='mr-2'>{file.name}</span>\n                                        <span class='font-weight-lighter mr-2'>{util.formatBytes(file.size, 1)}</span>\n                                        <button class='btn btn-sm btn-link float-right p-0'\n                                            onClick={this.removeFile}\n                                            data-name={file.name}\n                                        ><i class='fas fa-trash-alt' /> Del</button>\n                                    </div>\n                                ))}\n                            </div>\n                        </div>\n                    </>}\n                    <Files saved={saved} object={dog} field={field} updateField={updateField} />\n                    {saved[`${field}.${dog.id}`] ? <div class={`valid-feedback`} style='display: block;'><Text id='dogs.changes-saved'>Endringene er lagret</Text></div> :\n                        <small id={`${field}Help`} class='form-text text-muted'>{help}</small>}\n                </div>\n            );\n        }\n        if (type === 'image') {\n            return (\n                <div class={`form-group ${saved[`${field}.${dog.id}`] ? 'is-valid' : ''}`}>\n                    <label for={`${field}Input`}>{icon && <i class={icon} />} {title}</label>\n\n                    {showImages && <>\n                        <div class='container-fluid'>\n                            <div class='row'>\n                                {dog.images && dog.images.map(img => (\n                                    <div class='col-3 p-1'>\n                                        <img src={img.s3SmallLink} class='img-fluid' onError={this.handleImageErrored} />\n                                        <button class='btn btn-sm btn-link'\n                                            onClick={this.removeImage}\n                                            data-name={img.name}\n                                        ><i class='fas fa-trash' /> Remove</button>\n                                    </div>\n                                ))}\n                            </div>\n                        </div>\n                    </>}\n                    <Images saved={saved} object={dog} field={field} updateField={updateField} autoOpen={false} />\n                    {saved[`${field}.${dog.id}`] ? <div class={`valid-feedback`} style='display: block;'><Text id='dogs.changes-saved'>Endringene er lagret</Text></div> :\n                        <small id={`${field}Help`} class='form-text text-muted'>{help}</small>}\n                </div>\n            );\n        }\n        if (type === 'datalist') {\n            return (\n                <div class={`form-group ${saved[`${field}.${dog.id}`] ? 'is-valid' : ''}`}>\n                    <label for={`${field}Input`}>{icon && <i class={icon} />} {title}</label>\n                    <input list={`list-${field}`} class={`form-control ${saved[`${field}.${dog.id}`] ? 'is-valid' : ''}`} id={`${field}Input`} aria-describedby={`${field}Help`}\n                        value={value}\n                        data-id={dog.id}\n                        data-field={field}\n                        onInput={onInput}\n                        // onInput={e => console.log(e)}\n                        // onChange={e => console.log(e)}\n                    />\n                    <datalist id={`list-${field}`}>\n                        {datalist.map(el => (\n                            <option value={el[0]}>{el[1]}</option>\n                        ))}\n                    </datalist>\n                    {saved[`${field}.${dog.id}`] ? <div class={`valid-feedback`} style='display: block;'><Text id='dogs.changes-saved'>Endringene er lagret</Text></div> :\n                        <small id={`${field}Help`} class='form-text text-muted'>{help}</small>}\n                </div>\n            );\n        }\n        if (type === 'select') {\n            return (\n                <div class={`form-group ${saved[`${field}.${dog.id}`] ? 'is-valid' : ''}`}>\n                    <label for={`${field}Input`}>{icon && <i class={icon} />} {title}</label>\n\n                    <select type={type} class={`form-control ${saved[`${field}.${dog.id}`] ? 'is-valid' : ''}`} id={`${field}Input`} aria-describedby={`${field}Help`}\n                        value={value}\n                        data-id={dog.id}\n                        data-field={field}\n                        onInput={onInput}\n                    >\n                        <option value=''>-- Velg kjnn --</option>\n                        {datalist.map(el => (\n                            <option value={el[0]}>{el[1]}</option>\n                        ))}\n                    </select>\n                    {saved[`${field}.${dog.id}`] ? <div class={`valid-feedback`} style='display: block;'><Text id='dogs.changes-saved'>Endringene er lagret</Text></div> :\n                        <small id={`${field}Help`} class='form-text text-muted'>{help}</small>}\n                </div>\n            );\n        }\n        return (\n            <div class={`form-group ${saved[`${field}.${dog.id}`] ? 'is-valid' : ''}`}>\n                <label for={`${field}Input`}>{icon && <i class={icon} />} {title}</label> {refName}\n                <input type={type} class={`form-control ${saved[`${field}.${dog.id}`] ? 'is-valid' : ''}`} id={`${field}Input`} aria-describedby={`${field}Help`}\n                    min={min}\n                    max={maxValue}\n                    step={step}\n                    value={value}\n                    data-id={dog.id}\n                    data-field={field}\n                    onInput={onInput}\n                />\n                {saved[`${field}.${dog.id}`] ? <div class={`valid-feedback`} style='display: block;'><Text id='dogs.changes-saved'>Endringene er lagret</Text></div> :\n                    <small id={`${field}Help`} class='form-text text-muted'>{help}</small>}\n            </div>\n        );\n    }\n}\n\n@observer\nclass DogsDetail extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n\t\t\tnewHistory: {\n\t\t\t\tdate: util.isoDate(new Date(), false, false, true),\n\t\t\t\ttime: util.isoTime(new Date()),\n\t\t\t},\n            ...initialState,\n            submenu: props.submenu || 'stats',\n        };\n        this.updateTimer = {};\n    }\n\n    async loadAll(props = this.props) {\n        this.setState({ isLoading: true });\n        await Promise.all([\n            this.loadDog(props),\n            this.loadWorkoutPlans(props),\n        ]);\n        this.setState({ isLoading: false });\n    }\n\n    loadDog = async (props = this.props) => {\n\t\tconst { dogStore, userStore } = props.stores;\n        const dogId = parseInt(props.dog, 10);\n        await Promise.all([\n            // dogStore.load(dogId, false, { addData: ['vaccineStatuses', 'historyStatuses', 'allDogs'] }),\n            dogStore.load(dogId, false, { addData: ['team', 'user', 'workoutSummary', 'vaccineStatuses', 'historyStatuses', 'vaccineLogStatuses', 'allDogs'] }),\n            userStore.getWorkoutSummary({ dog: dogId }),\n        ]);\n\n        const currentMonth = new Date().getMonth() + 1;\n        const currentYear = new Date().getFullYear();\n\t\tconst { month = currentMonth, year = currentYear } = this.props;\n\t\tconst seasonStart = parseInt(month < 8 ? year - 1 : year, 10);\n        dogStore.findWorkoutSummaryCurrenSeason(dogId, seasonStart) || {};\n        dogStore.findWorkoutSummaryPreviousSeason(dogId, seasonStart - 1) || {};\n\n\n        const { dog } = dogStore;\n        if (dog && dog.team) {\n            this.loadTeam(dog.team);\n        }\n        if (dog && dog.motherChipId) {\n            dogStore.loadExternalDogs([dog.motherChipId, dog.fatherChipId]);\n        }\n        dogStore.plotFormGraph();\n    }\n\n    async loadTeam(team) {\n\t\tconst { teamStore } = this.props.stores;\n        await teamStore.load(team);\n        teamStore.plotFormGraph();\n    }\n\n    loadWorkoutPlans = async (props = this.props) => {\n\t\tconst { year } = props;\n\n\t\tconst currentMonth = new Date().getMonth() + 1;\n\t\tconst currentYear = util.getYear();\n\t\tconst seasonStart = parseInt(year || (currentMonth < 8 ? currentYear - 1 : currentYear), 10);\n\t\tconst { workoutPlanStore, dogStore } = props.stores;\n\t\tconst { dog } = dogStore;\n\n\t\tworkoutPlanStore.updateItem('workoutPlans', []);\n\t\tworkoutPlanStore.updateItem('workoutPlan', {});\n\t\tworkoutPlanStore.resetGraphPlanWeekDistanceCurrent();\n\n\t\tif (dog.team) {\n\t\t\tawait workoutPlanStore.load({ query: {\n\t\t\t\tteam: dog.team,\n\t\t\t\tseasonYear: seasonStart,\n\t\t\t\tseasonMonth: 6,\n\t\t\t} });\n\t\t\tconst { workoutPlans } = workoutPlanStore;\n\t\t\tconst workoutPlanCurrent = workoutPlans[0] || {};\n            if (workoutPlanCurrent.id) {\n                await workoutPlanStore.load(workoutPlanCurrent.id);\n                workoutPlanStore.prepareWeekGraphs({ year });\n            } else {\n                workoutPlanStore.updateKeyValue('workoutPlan', {});\n                workoutPlanStore.updateKeyValue('workoutPlans', []);\n                workoutPlanStore.resetGraphPlanWeekDistanceCurrent();\n            }\n\t\t}\n\t}\n\n\tshowModal = (e) => {\n        e.stopPropagation();\n        e.preventDefault();\n        const img = e.target.dataset.image;\n        const imgXXL = e.target.dataset.imagexxl;\n\t\tconst thumb = e.target.dataset.thumb;\n        const name = e.target.dataset.name;\n        const title = e.target.dataset.title;\n        const date = e.target.dataset.date;\n        this.setState({\n            displayModal: true,\n            currentImage: img,\n            currentImageXXL: imgXXL,\n            thumb,\n            name,\n            title,\n            date,\n        });\n    }\n\n    closeModal = () => {\n        this.setState({\n            displayModal: false,\n        });\n    }\n\n    setHistoryType = (historyType) => {\n\t\tthis.setState({ historyType });\n    }\n\n\tdeleteDog = async () => {\n\t\tconst { dogStore } = this.props.stores;\n\t\tconst { dog } = dogStore;\n        await dogStore.saveField(dog.id, 'offline', 1);\n\t\tPubSub.publish(topics.STATUS_MESSAGE, {\n\t\t\tmessage: 'Hunden er slettet',\n\t\t\ttype: 'success',\n\t\t\ticon: 'fas fa-check',\n\t\t});\n        route(`/dogs/list`);\n\t}\n\n    updateField = (e) => {\n        const { id, field, type, elementtype, isNew } = e.target.dataset;\n        const value = e.target.value;\n        this.updateFieldValue({ id: parseInt(id, 10), field, value, type, elementtype, isNew });\n    }\n\n    updateFieldValue = ({ id, field, value, datatype, elementtype, isNew = false, skipTimer = false }) => {\n        const { dogStore } = this.props.stores;\n        let newValue = value;\n\n        let localObjectValue = value;\n        const { dog } = dogStore;\n        if (field === 'images') {\n            if (Array.isArray(dog.images) && Array.isArray(value)) {\n                localObjectValue = [...dog.images, ...value];\n            }\n        }\n        if (field === 'files') {\n            if (Array.isArray(dog.files)) {\n                if (Array.isArray(value)) {\n                    localObjectValue = [...dog.files, ...value];\n                } else {\n                    localObjectValue = [...dog.files, value];\n                }\n            }\n        }\n\n        if (datatype === 'array' && !Array.isArray(value)) {\n            if (elementtype === 'number') {\n                newValue = value.split(',').map(e => parseFloat(e) || e);\n            } else  {\n                newValue = value.split(',');\n            }\n            // console.log('updateFieldValue', id, field, value, datatype, elementtype);\n        }\n\n        if (isNew) {\n            dogStore.updateObjectKeyValue('newDog', field, value);\n        } else {\n            dogStore.updateField(id, field, localObjectValue);\n            if (skipTimer) {\n                this.doUpdateField(id, field, newValue);\n            } else {\n                clearTimeout(this.updateTimer[field]);\n                this.updateTimer[field] = setTimeout(async () => {\n                    this.doUpdateField(id, field, newValue);\n                }, 500);\n            }\n        }\n    }\n\n    async doUpdateField(id, field, value) {\n        const { dogStore } = this.props.stores;\n        await dogStore.saveField(id, field, value);\n    }\n\n\tchooseSubmenu = (e) => {\n\t\tconst submenu = e.target.parentElement.dataset.menu || e.target.dataset.menu;\n\t\tthis.setState({ submenu });\n\n        // const { dogStore } = this.props.stores;\n        // const { dog } = dogStore;\n        // route(`/dogs/${dog.id}/${submenu}`);\n\t}\n\n    back = () => {\n        const { history } = this.props.stores;\n        history.goBack();\n    }\n\n    toggleCalendar = async () => {\n        const { showCalendar = false } = this.state;\n        this.setState({ showCalendar: !showCalendar });\n    }\n\n\tcomponentDidMount() {\n        this.loadAll();\n    }\n\n    componentWillReceiveProps(nextProps) {\n        // console.log('componentWillReceiveProps', nextProps);\n        if (nextProps.dog !== this.props.dog) {\n            this.loadAll(nextProps);\n        }\n    }\n\n\trender() {\n\t\tconst { displayModal, currentImage, currentImageXXL, thumb, name, title, date, historyType, submenu, showCalendar = false } = this.state;\n        const { month, year } = this.props;\n        // const monthNum = parseInt(month, 10);\n        // const yearNum = parseInt(year, 10);\n        const filterHistories = historyType ? (e) => {\n            // if (monthNum && yearNum) {\n            //     return e.historyType === historyType && e.month === monthNum && e.year === yearNum;\n            // }\n            return e.historyType === historyType;\n        } : () => true;\n\t\tconst { dogStore, userStore, workoutPlanStore, workoutStore } = this.props.stores;\n        const { workoutPlan, workoutPlans } = workoutPlanStore;\n\t\tconst { currentTeam } = workoutStore;\n\n        const { historyFeed, isAdmin, user } = userStore;\n        const { language = 'en' } = user;\n\n\t\tconst { dog, vaccineStatuses, historyStatuses, workoutSummary, workoutSummaryCurrentSeason = {}, workoutSummaryPreviousSeason = {}, saved } = dogStore;\n        const dogStatus = userStore.findDogstatus({ status: dog.status, language });\n        const dogStatuses = dog.statuses ? dog.statuses.map(e => userStore.findDogstatus({ status: e, language })) : [];\n        const dogPosition = userStore.findDogposition({ position: dog.position, language });\n        // const teamName = userStore.findTeam(dog.team);\n        // const teamNames = dog.teams ? dog.teams.map(e => userStore.findTeam(e)) : [];\n\n\t\t// const hasHistory = historyFeed && historyFeed.length > 0;\n\t\tconst hasHistory = dog.history && dog.history.length > 0;\n\n        const teamNames = [];\n        if (userStore.findTeam(dog.team)) {\n            teamNames.push(userStore.findTeam(dog.team));\n        }\n        if (dog.teams) {\n            dog.teams.forEach((e) => {\n                if (userStore.findTeam(e)) {\n                    teamNames.push(userStore.findTeam(e));\n                }\n            });\n        }\n\n        const dogVaccineLogStatuses = dogStore.findVaccineLogStatuses(dog.chipId);\n\n        const dogMother = dogStore.findDog(dog.mother);\n        const dogFather = dogStore.findDog(dog.father);\n\n        const children = dogStore.findChildren(dog.chipId);\n        const siblings = dogStore.findSiblings(dog.id, dog.motherChipId, dog.birth);\n        const hasBirthday = mu.hasBirthday(dog.birth);\n        const daysUntilBirthday = dog.birth ? Math.ceil(mu.daysUntilNextBirthday(dog.birth)) : 365;\n\n\t\treturn (\n\t\t\t<div class='container-fluid' style={`margin-bottom: ${MARGIN_BOTTOM}; margin-top: ${MARGIN_TOP};`}>\n                <div class='d-flex justify-content-between mb-2'>\n                    <div>\n                        <button class='btn btn-link pl-0 fixed-top text-primary'\n                            style={`top: ${MARGIN_TOP_BACK}; left: 5px; font-size: 35px; width: 45px;`}\n                            onClick={this.back}>\n                            <i class='fas fa-arrow-circle-left' />\n                        </button>\n                    </div>\n                    <div>\n                        <h5 class='text-muted'>&nbsp;</h5>\n                    </div>\n                    <div>\n                        <a class='btn btn-sm btn-primary float-left ml-3'\n\t\t\t\t\t\t\thref={`/dogs/edit/${dog.id}`}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<i class='fas fa-edit' /> <Text id='dogs.edit'>Endre</Text>\n\t\t\t\t\t\t</a>\n                        <DogAddLog stores={this.props.stores} dog={dog} callback={this.loadDog} />\n                    </div>\n                </div>\n\t\t\t\t{displayModal && <Modal close={this.closeModal} image={currentImage} imagexxl={currentImageXXL} thumb={thumb} name={name} title={title} date={date} />}\n\n\t\t\t\t<div class='row'>\n\t\t\t\t\t<div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3'>\n\t\t\t\t\t\t<div class='d-flex mb-1'>\n                            {/* {JSON.stringify(dog, null, 4)} */}\n                            <div class={`text-center border rounded-circle imageRounded`} style={dog.image ? `background-image: url(\"${dog.image.s3SmallLink}\");` : ''}>\n                                {!dog.image && <i class='fas fa-dog text-muted mt-3' style='font-size: 40px;' />}\n                            </div>\n                            <div class='flex-grow-1 pl-3 pr-2'\n\t\t\t\t\t\t\t\tstyle={`border-right: 4px solid ${userStore.findHarness(dog.harness, 'colorNonstop')} !important;`}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<span class='float-right'>\n                                    {daysUntilBirthday < 7 && <>\n                                        <span class='text-muted mr-2'>\n                                            <i class='fas fa-birthday-cake' /> in {daysUntilBirthday} days\n                                        </span>\n                                    </>}\n\t\t\t\t\t\t\t\t\t{dog.birth && <span class='mr-2'>{util.age(dog.birth, dog.deceased)}</span>}\n\t\t\t\t\t\t\t\t\t{dog.gender === 'female' ? <i class='fas fa-venus' /> : <i class='fas fa-mars' />}\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t<h5>\n                                    {dog.shortname || dog.name} {dog.shortname && dog.shortname !== '' && <> - <span class='font-weight-lighter'>{dog.name}</span></>}\n                                    {hasBirthday && <>\n                                        <i class='fas fa-birthday-cake ml-3' />\n                                    </>}\n                                </h5>\n\n                                <div>\n                                    {dog.birth && <>\n                                        <small class='text-muted'>\n                                            <i class='fas fa-hand-holding-heart' /> {util.isoDate(dog.birth, false, false, true)}\n                                        </small>\n                                    </>}\n                                </div>\n\n\t\t\t\t\t\t\t\t<div>\n                                    {teamNames && teamNames.length > 0 && <small class='font-weight-lighter'>\n                                        {teamNames.map((name, idx) => <>{idx > 0 ? ', ' : ''}{name}</>)}\n                                    </small>}\n                                </div>\n\n\t\t\t\t\t\t\t\t<div>\n                                    <small class='text-muted'>\n                                        {dog.chipId && dog.chipId.length > 5 && <><i class='fas fa-microchip' /> {dog.chipId}</>}\n                                        {dog.weight > 0 && <><i class='fas fa-balance-scale ml-2' /> {util.format(dog.weight, 1)} kg</>}\n                                        {dog.bodyScore > 0 && <><i class='fas fa-dog ml-2' /> {util.format(dog.bodyScore, 1)}</>}\n                                    </small>\n\t\t\t\t\t\t\t\t</div>\n\n                                <div>\n                                    {vaccineStatuses && vaccineStatuses.filter(e => e.dogId === dog.id).map(v => (\n                                        <span class={`badge badge-success mr-2`} title={util.isoDate(v.endDate, false, false, true)}>\n                                            {v.vaccineType}\n                                            <span class='font-weight-lighter ml-3'>\n                                                <i class='fas fa-calendar-check' /> {util.isoDate(v.endDate, false, false, true)}\n                                            </span>\n                                        </span>\n                                    ))}\n                                </div>\n\n                                <div>\n                                    {historyStatuses && historyStatuses.filter(e => e.dogId === dog.id).map(v => (\n                                        <span class={`badge badge-warning mr-2`} title={util.isoDate(v.endDate, false, false, true)}>{v.title}</span>\n                                    ))}\n                                </div>\n\n                                <div>\n                                    {dog.specialNeeds && <span class={`badge badge-warning mr-2`}><i class='fas fa-exclamation-triangle' /> {dog.specialNeeds}</span>}\n                                    {dogStatus && dogStatus.class && <span class={`badge badge-${dogStatus.class} mr-2`}>{dogStatus.icon && <i class={dogStatus.icon} />} {dogStatus.name}</span>}\n                                    {dogStatuses && dogStatuses.map(status => <>\n                                        {status && status.class && <span class={`badge badge-${status.class} mr-2`}>{status.icon && <i class={status.icon} />} {status.name}</span>}\n                                    </>)}\n                                    {dogPosition && dogPosition.class && <span class={`badge badge-${dogPosition.class || 'primary'} mr-2`}>{dogPosition.icon && <i class={dogPosition.icon} />} {dogPosition.name}</span>}\n                                </div>\n\n                            </div>\n                        </div>\n                    </div>\n\n                    {/* <Ad stores={this.props.stores} url={this.props.url} /> */}\n\n                    <div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 my-3'>\n                        <div class='row'>\n                            <div class='w-100 overflow-hidden'>\n                                <div\n                                    class='d-flex flex-row flex-nowrap pb-2 px-1'\n                                    style='overflow: auto; scroll-snap-type: x mandatory;'\n                                >\n                                    <div class='col px-0 pt-2'>\n                                        <button\n                                            class={`btn btn-block rounded-pill-left rounded-none ${submenu === 'info' ? 'btn-primary' : 'btn-outline-primary'} text-nowrap`}\n                                            style='text-overflow: ellipsis; overflow: hidden;'\n                                            data-menu='info'\n                                            onClick={this.chooseSubmenu}\n                                        ><i class='fas fa-pen-nib' /> <Text id='dogs.info'>Info</Text></button>\n                                        {submenu === 'info' && <ScrollIntoView horizontal={'center'} vertical={'end'} />}\n                                    </div>\n                                    <div class='col px-0 pt-2'>\n                                        <button\n                                            class={`btn btn-block rounded-none ${submenu === 'stats' ? 'btn-primary' : 'btn-outline-primary'} text-nowrap`}\n                                            style='text-overflow: ellipsis; overflow: hidden;'\n                                            data-menu='stats'\n                                            onClick={this.chooseSubmenu}\n                                        ><i class='fas fa-tachometer-alt' /> <Text id='dogs.stats'>Stats</Text></button>\n                                        {submenu === 'stats' && <ScrollIntoView horizontal={'center'} vertical={'end'} />}\n                                    </div>\n                                    <div class='col px-0 pt-2'>\n                                        <button\n                                            class={`btn btn-block rounded-none ${submenu === 'pictures' ? 'btn-primary' : 'btn-outline-primary'} text-nowrap`}\n                                            style='text-overflow: ellipsis; overflow: hidden;'\n                                            data-menu='pictures'\n                                            onClick={this.chooseSubmenu}\n                                        ><i class='fas fa-images' /> <Text id='dogs.pictures'>Pictures</Text></button>\n                                        {submenu === 'pictures' && <ScrollIntoView horizontal={'center'} vertical={'end'} />}\n                                    </div>\n                                    <div class='col px-0 pt-2'>\n                                        <button\n                                            class={`btn btn-block rounded-none ${submenu === 'workouts' ? 'btn-primary' : 'btn-outline-primary'} text-nowrap`}\n                                            style='text-overflow: ellipsis; overflow: hidden;'\n                                            data-menu='workouts'\n                                            onClick={this.chooseSubmenu}\n                                        ><i class='fas fa-running' /> <Text id='dogs.workouts'>Workouts</Text></button>\n                                        {submenu === 'workouts' && <ScrollIntoView horizontal={'center'} vertical={'end'} />}\n                                    </div>\n                                    <div class='col px-0 pt-2'>\n                                        <button\n                                            class={`btn btn-block rounded-none ${submenu === 'fitness' ? 'btn-primary' : 'btn-outline-primary'} text-nowrap`}\n                                            style='text-overflow: ellipsis; overflow: hidden;'\n                                            data-menu='fitness'\n                                            onClick={this.chooseSubmenu}\n                                        ><i class='fas fa-chart-line' /> <Text id='dogs.fitness'>Fitness</Text></button>\n                                        {submenu === 'fitness' && <ScrollIntoView horizontal={'center'} vertical={'end'} />}\n                                    </div>\n                                    <div class='col px-0 pt-2'>\n                                        <button\n                                            class={`btn btn-block rounded-none ${submenu === 'relations' ? 'btn-primary' : 'btn-outline-primary'} text-nowrap`}\n                                            style='text-overflow: ellipsis; overflow: hidden;'\n                                            data-menu='relations'\n                                            onClick={this.chooseSubmenu}\n                                        ><i class='fas fa-users' /> <Text id='dogs.relations'>Relations</Text></button>\n                                        {submenu === 'relations' && <ScrollIntoView horizontal={'center'} vertical={'end'} />}\n                                    </div>\n                                    <div class='col px-0 pt-2'>\n                                        <button\n                                            class={`btn btn-block rounded-none ${submenu === 'log' ? 'btn-primary' : 'btn-outline-primary'} text-nowrap`}\n                                            style='text-overflow: ellipsis; overflow: hidden;'\n                                            data-menu='log'\n                                            onClick={this.chooseSubmenu}\n                                        ><i class='fas fa-history' /> <Text id='dogs.log'>Log</Text></button>\n                                        {submenu === 'log' && <ScrollIntoView horizontal={'center'} vertical={'end'} />}\n                                    </div>\n                                    <div class='col px-0 pt-2'>\n                                        <button\n                                            class={`btn btn-block rounded-none ${submenu === 'trophy' ? 'btn-primary' : 'btn-outline-primary'} text-nowrap`}\n                                            style='text-overflow: ellipsis; overflow: hidden;'\n                                            data-menu='trophy'\n                                            onClick={this.chooseSubmenu}\n                                        ><i class='fas fa-award' /> <Text id='dogs.trophy'>Trophy case</Text></button>\n                                        {submenu === 'trophy' && <ScrollIntoView horizontal={'center'} vertical={'end'} />}\n                                    </div>\n                                    <div class='col px-0 pt-2'>\n                                        <button\n                                            class={`btn btn-block rounded-none ${submenu === 'achievements' ? 'btn-primary' : 'btn-outline-primary'} text-nowrap`}\n                                            style='text-overflow: ellipsis; overflow: hidden;'\n                                            data-menu='achievements'\n                                            onClick={this.chooseSubmenu}\n                                        ><i class='fas fa-clock' /> <Text id='dogs.achievements'>Achievements</Text></button>\n                                        {submenu === 'achievements' && <ScrollIntoView horizontal={'center'} vertical={'end'} />}\n                                    </div>\n                                    <div class='col px-0 pt-2'>\n                                        <button\n                                            class={`btn btn-block rounded-none ${submenu === 'links' ? 'btn-primary' : 'btn-outline-primary'} text-nowrap`}\n                                            style='text-overflow: ellipsis; overflow: hidden;'\n                                            data-menu='links'\n                                            onClick={this.chooseSubmenu}\n                                        ><i class='fas fa-link' /> <Text id='dogs.links'>Links</Text></button>\n                                        {submenu === 'links' && <ScrollIntoView horizontal={'center'} vertical={'end'} />}\n                                    </div>\n                                    <div class='col px-0 pt-2'>\n                                        <button\n                                            class={`btn btn-block rounded-none ${submenu === 'veterinary' ? 'btn-primary' : 'btn-outline-primary'} text-nowrap`}\n                                            style='text-overflow: ellipsis; overflow: hidden;'\n                                            data-menu='veterinary'\n                                            onClick={this.chooseSubmenu}\n                                        ><i class='fas fa-syringe' /> <Text id='dogs.veterinary'>Veterenary</Text></button>\n                                        {submenu === 'veterinary' && <ScrollIntoView horizontal={'center'} vertical={'end'} />}\n                                    </div>\n                                    <div class='col px-0 pt-2'>\n                                        <button\n                                            class={`btn btn-block rounded-pill-right rounded-none ${submenu === 'advanced' ? 'btn-primary' : 'btn-outline-primary'} text-nowrap`}\n                                            style='text-overflow: ellipsis; overflow: hidden;'\n                                            data-menu='advanced'\n                                            onClick={this.chooseSubmenu}\n                                        ><i class='fas fa-cogs' /> <Text id='dogs.advanced'>Advanced</Text></button>\n                                        {submenu === 'advanced' && <ScrollIntoView horizontal={'center'} vertical={'end'} />}\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n\n                {submenu === 'info' && <>\n                    <div class='row mt-4'>\n                        <div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3'>\n                            <h5><Text id='dogs.info-about'>Informasjon om</Text> {dog.name}</h5>\n\n                            {!dog.description && <>\n                                <div class='text-center text-muted'>\n                                    <div class='display-1'>\n                                        <i class='fas fa-pen-nib' />\n                                    </div>\n                                    <h3 class='font-weight-lighter'>\n                                        <Text id='dogs.add-description'>G inn p endring av hunden for  legge inn en beskrivelse.</Text>\n                                    </h3>\n                                </div>\n                            </>}\n                            <Markdown markdown={mu.replaceImages(dog.description, dog.images, language)} markdownOpts={mu.getMarkdownOptions()} />\n                        </div>\n                    </div>\n                </>}\n\n                {submenu === 'stats' && <>\n                    <div class='row mt-4'>\n                        <div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3'>\n                            <WorkoutGraph\n                                stores={this.props.stores}\n                                isLoading={false}\n                                key={`graph-${workoutPlan.id}-${workoutPlans.length}`}\n                            />\n                            <WorkoutTotals stores={this.props.stores}\n                                currentTeam={dog.team}\n                                currentSeason={workoutSummaryCurrentSeason}\n                                prevSeason={workoutSummaryPreviousSeason}\n                                key={`totals-${dog.id}-${Object.keys(workoutSummaryCurrentSeason).length}-${Object.keys(workoutSummaryPreviousSeason).length}`}\n                            />\n                            <WorkoutStatus stores={this.props.stores}\n                                dog={dog.id}\n                                key={`status-${dog.id}-${Object.keys(workoutSummaryCurrentSeason).length}-${Object.keys(workoutSummaryPreviousSeason).length}`}\n                            />\n                        </div>\n\n                        {workoutSummaryCurrentSeason.positions && <>\n                            <div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-3'>\n                                <table class='table table-sm table-striped'>\n                                    <thead>\n                                        <tr>\n                                            <th>&nbsp;</th>\n                                            <th>Lead</th>\n                                            <th>Point</th>\n                                            <th>Team</th>\n                                            <th>Wheel</th>\n                                        </tr>\n                                    </thead>\n                                    <tbody>\n                                        <tr>\n                                            <th><Text id='workouts.distance'>Distance</Text></th>\n                                            <td class='text-center'><Distance stores={this.props.stores} value={util.asNumber(workoutSummaryCurrentSeason, 'positions', 'lead', 'distanceKm') || 0} /> </td>\n                                            <td class='text-center'><Distance stores={this.props.stores} value={util.asNumber(workoutSummaryCurrentSeason, 'positions', 'point', 'distanceKm') || 0} /> </td>\n                                            <td class='text-center'><Distance stores={this.props.stores} value={util.asNumber(workoutSummaryCurrentSeason, 'positions', 'team', 'distanceKm') || 0} /> </td>\n                                            <td class='text-center'><Distance stores={this.props.stores} value={util.asNumber(workoutSummaryCurrentSeason, 'positions', 'wheel', 'distanceKm') || 0} /> </td>\n                                        </tr>\n                                        <tr>\n                                            <th><Text id='workouts.duration'>Duration</Text></th>\n                                            <td class='text-center'>{util.secToHms(util.asNumber(workoutSummaryCurrentSeason, 'positions', 'lead', 'duration') || 0, true)}</td>\n                                            <td class='text-center'>{util.secToHms(util.asNumber(workoutSummaryCurrentSeason, 'positions', 'point', 'duration') || 0, true)}</td>\n                                            <td class='text-center'>{util.secToHms(util.asNumber(workoutSummaryCurrentSeason, 'positions', 'team', 'duration') || 0, true)}</td>\n                                            <td class='text-center'>{util.secToHms(util.asNumber(workoutSummaryCurrentSeason, 'positions', 'wheel', 'duration') || 0, true)}</td>\n                                        </tr>\n                                        <tr>\n                                            <th><Text id='workouts.ascend'>Ascend</Text></th>\n                                            <td class='text-center'><Elevation stores={this.props.stores} value={util.asNumber(workoutSummaryCurrentSeason, 'positions', 'lead', 'elevation') || 0} /></td>\n                                            <td class='text-center'><Elevation stores={this.props.stores} value={util.asNumber(workoutSummaryCurrentSeason, 'positions', 'point', 'elevation') || 0} /></td>\n                                            <td class='text-center'><Elevation stores={this.props.stores} value={util.asNumber(workoutSummaryCurrentSeason, 'positions', 'team', 'elevation') || 0} /></td>\n                                            <td class='text-center'><Elevation stores={this.props.stores} value={util.asNumber(workoutSummaryCurrentSeason, 'positions', 'wheel', 'elevation') || 0} /></td>\n                                        </tr>\n                                    </tbody>\n                                </table>\n                            </div>\n                        </>}\n                    </div>\n                </>}\n\n                {submenu === 'pictures' && <>\n                    <div class='row mt-4'>\n                        <div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3'>\n                            <h5><Text id='dogs.pictures-of'>Bilder av</Text> {dog.name}</h5>\n                            <div class='row'>\n\n                                {(!dog.images || dog.images.length === 0) && <>\n                                    <div class='text-center text-muted'>\n                                        <div class='display-1'><i class='fas fa-images' /></div>\n                                        <h3><Text id='dogs.no-images-title'>No images for this dog!</Text></h3>\n                                        <Text id='dogs.no-images-text'>You can add more images to this dog. Puppy pictures, workout pictures, lazy summer pictures, etc. All is a nice way to create a better profile for this dog.</Text>\n                                    </div>\n                                </>}\n\n                                <ImageScroller stores={this.props.stores} images={dog.images} />\n                            </div>\n                        </div>\n\n                        <div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mb-2 mt-5 bg-light py-4 border rounded-lg'>\n                            <Input saved={saved} dog={dog} field='imageOther' type='image' icon='fas fa-camera'\n                                stores={this.props.stores}\n                                title={<Text id='dogs.photo'>Bilde</Text>}\n                                help={<Text id='dogs.photo-help'>Bilder av hunden.</Text>}\n                                onInput={this.updateField} updateField={this.updateFieldValue}\n                                showImages={false}\n                            />\n                        </div>\n                    </div>\n                </>}\n\n                {submenu === 'workouts' && <>\n                    <div class='row mt-4'>\n                        <WorkoutCalendar\n                            stores={this.props.stores}\n                            dog={dog}\n                            basehref={`/dogs/${dog.id}/`}\n                            month={month}\n                            year={year}\n                            key={`calendar-${workoutPlan.id}-${workoutPlans.length}`}\n                        />\n                    </div>\n                </>}\n\n                {submenu === 'relations' && <>\n                    <div class='row mt-4'>\n                        <div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3'>\n                            <div class='container-fluid mb-5 mt-4'>\n                                <div class='row mt-2'>\n                                    <div class='col text-center'>\n                                        <small class='text-muted'><Text id='dogs.birth'>Fdt</Text></small>\n                                        <h3>\n                                            {util.isoDate(dog.birth, false, false, true)}\n                                        </h3>\n                                    </div>\n                                    {dog.deceased && <div class='col text-center border-left'>\n                                        <small class='text-muted'><Text id='dogs.deceased'>Dd</Text></small>\n                                        <h3>\n                                            {util.isoDate(dog.deceased, false, false, true)}\n                                        </h3>\n                                    </div>}\n                                </div>\n                                <div class='row mt-2'>\n                                    <div class='col text-center'>\n                                        <small class='text-muted'><Text id='dogs.team'>Team</Text></small>\n                                        <h3>\n                                            {dog.team && userStore.findTeam(dog.team)}\n                                        </h3>\n                                    </div>\n                                </div>\n                                <div class='row mt-2'>\n                                    <div class='col text-center'>\n                                        <small class='text-muted'><Text id='dogs.mother'>Mor</Text></small>\n                                        {dogMother ? <DogStatus stores={this.props.stores} dog={dogMother} fullWidth={true} /> : <>\n                                            <h3>\n                                                {dog.motherName}\n                                            </h3>\n                                            <div>\n                                                {dog.motherChipId && <small><i class='fas fa-microchip' /> {dog.motherChipId}</small>}\n                                            </div>\n                                        </>}\n                                    </div>\n                                    <div class='col text-center border-left'>\n                                        <small class='text-muted'><Text id='dogs.father'>Far</Text></small>\n                                        {dogFather ? <DogStatus stores={this.props.stores} dog={dogFather} fullWidth={true} /> : <>\n                                            <h3>\n                                                {dog.fatherName}\n                                            </h3>\n                                            <div>\n                                                {dog.fatherChipId && <small><i class='fas fa-microchip' /> {dog.fatherChipId}</small>}\n                                            </div>\n                                        </>}\n                                    </div>\n                                </div>\n                                <div class='row mt-2'>\n                                    <div class='col text-center'>\n                                        <small class='text-muted'><Text id='dogs.siblings'>Ssken</Text></small>\n                                        <div class='row'>\n                                            {siblings && siblings.map(d => <DogStatus stores={this.props.stores} dog={d} />)}\n                                        </div>\n                                    </div>\n                                </div>\n                                <div class='row mt-2'>\n                                    <div class='col text-center'>\n                                        <small class='text-muted'><Text id='dogs.children'>Avkom</Text></small>\n                                        <div class='row'>\n                                            {children && children.map(d => <DogStatus stores={this.props.stores} dog={d} />)}\n                                        </div>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </>}\n\n                {submenu === 'log' && <>\n                    <div class='row mt-4'>\n                        <div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3'>\n                            <DogAddLog stores={this.props.stores} dog={dog} className={'btn-block btn-primary btn-lg'} />\n                        </div>\n\n                        <div class='offset-0 col-12 mt-5'>\n                            <div class='container-fluid'>\n                                <div class='row'>\n                                    <div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 px-0'>\n                                        <h5 class='mt-3'><Text id='dogs.log-for'>Logg for</Text> {dog.name}</h5>\n                                    </div>\n\n                                    {showCalendar ? <>\n                                        <DogCalendar\n                                            stores={this.props.stores}\n                                            basehref={`/dogs/${dog.id}/history/`}\n                                            dog={dog}\n                                            month={month}\n                                            year={year}\n                                            callback={this.setHistoryType}\n                                            key={`calendar-history-${dog.id}-${util.getNestedValue(dog, 'history.length')}`}\n                                        />\n                                        <div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mb-4'>\n                                            <button class='btn btn-block btn-link' onClick={this.toggleCalendar}>\n                                                <i class='fas fa-angle-up' /> <Text id='dogs.hide-calendar'>Hide Calendar</Text>\n                                            </button>\n                                        </div>\n                                    </> : <>\n                                        <div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mb-4'>\n                                            <button class='btn btn-block btn-link' onClick={this.toggleCalendar}>\n                                                <i class='fas fa-angle-down' /> <Text id='dogs.show-calendar'>Show Calendar</Text>\n                                            </button>\n                                        </div>\n                                    </>}\n\n                                    {!hasHistory && <div class='text-muted'><Text id='dogs.log-for-is-empty' fields={{ name: dog.name }}>Loggen til {dog.name} er tom</Text></div>}\n                                    {/* {hasHistory && historyFeed.filter(filterHistories).map(line => (\n                                        <DogHistory stores={this.props.stores} line={line} />\n                                    ))} */}\n                                    {dog.history && dog.history.reverse().map(line => (\n                                        <DogHistory stores={this.props.stores} line={line} />\n                                    ))}\n\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </>}\n\n                {submenu === 'trophy' && <>\n                    <div class='row mt-4'>\n                        <div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3'>\n                            {(!dog.trophys || dog.trophys.length === 0) && <>\n                                <div class='text-center text-muted'>\n                                    <div class='display-1'><i class='fas fa-award' /></div>\n                                    <h3><Text id='dogs.no-trophys-title'>No trophys for this dog!</Text></h3>\n                                    <Text id='dogs.no-trophys-text'>You have to add more workouts, pictures, log entries for dogs, etc to earn trophys.</Text>\n                                </div>\n                            </>}\n\n                            <div class='row'>\n                                {dog.trophys && dog.trophys.reverse().map(file => {\n                                    const img = mu.getTrophyImage(file.name);\n                                    if (!img) {\n                                        return '';\n                                    }\n                                    const textHeader = file.descriptionHeader && file.descriptionHeader[language] ? file.descriptionHeader[language] : '';\n                                    const text = file.description && file.description[language] ? file.description[language] : '';\n                                    return (\n                                        <div class='col-4 mt-3'>\n                                            <div class='mb-2'>\n                                                <img src={img} class='img-fluid' />\n                                            </div>\n                                            <strong>{textHeader}</strong>\n                                            {/* <small class='font-weight-lighter mr-2'>\n                                                {util.isoDate(file.createdDate, false, false, true)}\n                                            </small> */}\n                                            <small>\n                                                <details>\n                                                    <summary><Text id='dogs.trophy-details'>Details</Text></summary>\n                                                    <Markdown markdown={mu.replaceImages(text, dog.images, language)} markdownOpts={mu.getMarkdownOptions()} />\n                                                </details>\n                                            </small>\n                                        </div>\n                                    );\n                                })}\n                            </div>\n\n                        </div>\n                    </div>\n                </>}\n\n                {submenu === 'fitness' && <>\n                    <div class='row mt-4'>\n                        <div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3'>\n                            <FormGraph stores={this.props.stores} />\n                        </div>\n                    </div>\n                </>}\n\n                {submenu === 'veterinary' && <>\n                    <div class='row mt-4'>\n                        <div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3'>\n                            <h5><Text id='dogs.vetenary-approved-vaccines'>Vetenary approved vaccines</Text></h5>\n\n                            {(!dogVaccineLogStatuses || dogVaccineLogStatuses.length === 0) && <>\n                                <div class='text-center text-muted'>\n                                    <div class='display-1'>\n                                        <i class='fas fa-syringe' />\n                                    </div>\n                                    <h3 class='font-weight-lighter'>\n                                        <Text id='dogs.add-veterinary'>Kontakt din veterinr og be om at vaksinene godkjennes i appen.</Text>\n                                    </h3>\n                                </div>\n                            </>}\n\n                            <div class=''>\n                                {dogVaccineLogStatuses && dogVaccineLogStatuses.map((vac) => {\n                                    return (\n                                        <div class='col-12 mt-2 p-3 border rounded-lg bg-light'>\n\n                                            <span class={`float-right badge badge-${vac.inKarens ? 'warning' : 'success'} ml-2 mb-1`}>\n                                                <span class='font-weight-lighter ml-2'>\n                                                    <i class='fas fa-calendar-check' /> {util.isoDate(vac.vaccineAgens.durationEnd, false, false, true)}\n                                                    {vac.inKarens && <>\n                                                        <br />\n                                                        (<Text id='dogs.vaccine-karens'>karens</Text>: {util.format(vac.karensDaysLeft, 0)} <Text id='dogs.vaccine-karens-days-left'>days left</Text>)\n                                                    </>}\n                                                </span>\n                                            </span>\n\n                                            <h5>{vac.vaccineAgens.name}</h5>\n                                            {/* <span class='font-weight-lighter'>\n                                                <Text id='dogs.vaccine-name'>Vaksinenavn</Text>:\n                                            </span> {vac.vaccineName}<br /> */}\n                                            <span class='font-weight-lighter'>\n                                                <Text id='dogs.vaccine-date'>Vaksinedato</Text>:\n                                            </span> {util.isoDate(vac.date, false, false, true)}<br />\n                                            <span class='font-weight-lighter'>\n                                                <Text id='dogs.vaccine-veterinary'>Veterinr</Text>:\n                                            </span> {vac.veterinaryFirstname} {vac.veterinaryLastname} &lt;{vac.veterinaryEmail}&gt;<br />\n                                        </div>\n                                    );\n                                })}\n                            </div>\n\n                        </div>\n                    </div>\n                </>}\n\n                {submenu === 'achievements' && <>\n                    <div class='row mt-4'>\n                        <div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3'>\n                            {(!dog.achievements || dog.achievements.length === 0) && <>\n                                <div class='text-center text-muted'>\n                                    <div class='display-1'><i class='fas fa-clock' /></div>\n                                    <h3><Text id='dogs.no-achievements-title'>No achievements for this dog!</Text></h3>\n                                    <Text id='dogs.no-achievements-text'>You can add achievements to this dog. Ie. Memories, trips, tests, prices, races, etc.</Text>\n                                </div>\n                            </>}\n\n                            {dog.achievements && dog.achievements.map(file => (\n                                <div class='col-12 p-1'>\n                                    <span class='font-weight-lighter mr-2'>{util.isoDate(file.createdDate, false, false, true)}</span>\n                                    <span class='mr-2'>{file.name}</span>\n                                    <span class='mr-2'>{file.url}</span>\n                                </div>\n                            ))}\n                        </div>\n                    </div>\n                </>}\n\n                {submenu === 'links' && <>\n                    <div class='row mt-4'>\n                        <div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3'>\n                            {(!dog.links || dog.links.length === 0) && <>\n                                <div class='text-center text-muted'>\n                                    <div class='display-1'><i class='fas fa-link' /></div>\n                                    <h3><Text id='dogs.no-links-title'>No links for this dog!</Text></h3>\n                                    <Text id='dogs.no-links-text'>You can add links to this dog. Ie. Links to Facebook page, Instagram page, blogg, etc.</Text>\n                                </div>\n                            </>}\n\n                            {dog.links && dog.links.map(file => (\n                                <div class='col-12 p-1'>\n                                    <span class='font-weight-lighter mr-2'>{util.isoDate(file.createdDate, false, false, true)}</span>\n                                    <span class='mr-2'>{file.name}</span>\n                                    <span class='mr-2'>{file.url}</span>\n                                </div>\n                            ))}\n                        </div>\n                    </div>\n                </>}\n\n                {submenu === 'advanced' && <>\n                    <div class='row mt-4'>\n                        <div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3'>\n                            {(!dog.files || dog.files.length === 0) && <>\n                                <div class='text-center text-muted'>\n                                    <div class='display-1'><i class='fas fa-file' /></div>\n                                    <h3><Text id='dogs.no-files-title'>No files attached to this dog!</Text></h3>\n                                    <Text id='dogs.no-files-text'>You can upload files to this dog inside edit. These files can be of any type. Ie: Certificates, test, etc.</Text>\n                                </div>\n                            </>}\n                            {dog.files && dog.files.map(file => (\n                                <div class='d-flex'>\n                                    <span class='font-weight-lighter mr-2'>{util.isoDate(file.createdDate, false, false, true)}</span>\n                                    <span class='mr-2'><a href={file.s3Link} target='_blank' rel='noreferrer'>{file.name}</a></span>\n                                    <span class='font-weight-lighter mr-2'>{util.formatBytes(file.size, 1)}</span>\n                                </div>\n                            ))}\n                        </div>\n\n                        <div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mb-2 mt-5 bg-light py-4 border rounded-lg'>\n                            <Localizer>\n                                <Input saved={saved} dog={dog} field='files' type='file' icon='fas fa-file'\n                                    stores={this.props.stores}\n                                    title={<Text id='dogs.files'>Files</Text>}\n                                    help={<Text id='dogs.files-help'>Filer til denne hunden.</Text>}\n                                    onInput={this.updateField}\n                                    updateField={this.updateFieldValue}\n                                />\n                            </Localizer>\n                        </div>\n\n                        <div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3'>\n                            <div class='mt-5 pt-5 mb-5'>\n                                <button class='btn btn-sm btn-danger mt-5 float-right'\n                                    onClick={this.deleteDog}\n                                >\n                                    <i class='fas fa-trash' /> <Text id='dogs.delete'>Slett</Text> {dog.name}\n                                </button>\n                            </div>\n                        </div>\n                    </div>\n                </>}\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nexport default DogsDetail;\n","import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport { Text, Localizer } from 'preact-i18n';\n\nimport mu from '../../lib/musher-util';\n\nconst initialState = {};\n\n@observer\nclass PremiumBadge extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            ...initialState,\n        };\n    }\n\n    render() {\n        return (\n            <span class='badge badge-pill badge-warning float-right'><i class='fas fa-award mr-2' /> <Text id='premium.title'>Premium</Text></span>\n\n        );\n    }\n}\n\nexport default PremiumBadge;\n","import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport { Text, Localizer, withText } from 'preact-i18n';\n\nimport mu from '../../lib/musher-util';\n\nimport Modal from '../modal';\nimport ImageSlider from '../imageSlider';\nimport ImageScroller from '../imageScroller';\n\n\nimport style from '../style.css';\n\nconst VACCINE_TYPES = mu.getVaccineTypes();\n\n@observer\nclass DogHistoryLine extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            showDate: false,\n        };\n    }\n\n    showModal = (e) => {\n        e.stopPropagation();\n        e.preventDefault();\n        const img = e.target.dataset.image;\n        const imgXXL = e.target.dataset.imagexxl;\n        const thumb = e.target.dataset.thumb;\n        const name = e.target.dataset.name;\n        const title = e.target.dataset.title;\n        const date = e.target.dataset.date;\n        this.setState({\n            displayModal: true,\n            currentImage: img,\n            currentImageXXL: imgXXL,\n            thumb,\n            name,\n            title,\n            date,\n        });\n    }\n\n    closeModal = () => {\n        this.setState({\n            displayModal: false,\n        });\n    }\n\n    toggleDate = () => {\n        const { showDate } = this.state;\n        this.setState({ showDate: !showDate });\n    }\n\n    touchStart = (e) => {\n        const { eventFired } = this.state;\n        if (!eventFired)  {\n            this.setState({\n                startY: e.touches[0].pageY,\n                startX: e.touches[0].pageX,\n                eventFired: false,\n                diffY: undefined,\n                diffX: undefined,\n                deleteVerify: false,\n            });\n        }\n    }\n\n    touchEnd = () => {\n        const { eventFired } = this.state;\n        if (eventFired) {\n            this.setState({\n                startY: undefined,\n                startX: undefined,\n            });\n        } else {\n            this.setState({\n                startY: undefined,\n                startX: undefined,\n                eventFired: false,\n                diffY: undefined,\n                diffX: undefined,\n                deleteVerify: false,\n            });\n        }\n    }\n\n    touchMove = (e) => {\n        const { eventFired } = this.state;\n        if (eventFired) {\n            return false;\n        }\n        const { startY, startX } = this.state;\n        const scrollDistance = 130;\n        const y = e.touches[0].pageY;\n        const x = e.touches[0].pageX;\n        const diffY = y - startY;\n        const diffX = x - startX;\n        this.setState({\n            diffY,\n            diffX,\n        });\n        if (y > (startY + scrollDistance)) {\n            // console.log('swiping down', y, '>', startY + scrollDistance);\n        } else if (y < (startY - scrollDistance)) {\n            // console.log('swiping up', y, '<', startY + scrollDistance);\n        } else if (x > (startX + scrollDistance)) {\n            // console.log('swiping right', startX, x);\n        } else if (x < (startX - scrollDistance)) {\n            this.setState({\n                eventFired: true,\n            });\n        }\n    }\n\n    reset = (e) => {\n        if (e) {\n            e.stopPropagation();\n            e.preventDefault();\n        }\n        this.setState({\n            deleted: false,\n            startY: undefined,\n            startX: undefined,\n            eventFired: false,\n            diffY: undefined,\n            diffX: undefined,\n            deleteVerify: false,\n        });\n    }\n\n    deleteHistoryRequest = async (e) => {\n        e.stopPropagation();\n        this.setState({\n            deleteVerify: true,\n        });\n    }\n\n    deleteHistory = async (e) => {\n        e.stopPropagation();\n        const { dogStore } = this.props.stores;\n        const { line } = this.props;\n        await dogStore.save({\n\t\t\tid: line.dogId,\n\t\t\t$pull: {\n                history: { _id: line.id || line._id },\n\t\t\t},\n\t\t});\n        this.setState({\n            deleted: true,\n            startY: undefined,\n            startX: undefined,\n            eventFired: false,\n            diffY: undefined,\n            diffX: undefined,\n            deleteVerify: false,\n        });\n    }\n\n    swipeLeft = (e) => {\n        const { eventFired } = this.state;\n        e.stopPropagation();\n        if (eventFired) {\n            this.reset();\n        } else {\n            this.setState({\n                eventFired: true,\n                diffX: -130,\n            });\n        }\n    }\n\n    componentWillReceiveProps(nextProps) {\n        // console.log('componentWillReceiveProps', nextProps);\n        if (nextProps.line.id !== this.props.line.id) {\n            this.reset();\n        }\n    }\n\n    render() {\n        const { userStore } = this.props.stores;\n        const { user } = userStore;\n        const { language = 'en' } = user;\n        const HISTORY_TYPE_MAP = mu.getHistoryMap(language);\n\n        const { displayModal, currentImage, currentImageXXL, showDate, thumb, name, title, date } = this.state;\n        const { line } = this.props;\n        const { diffX, deleted, deleteVerify } = this.state;\n        const hasImage = line.images && line.images.length > 0;\n        const isBeeingEdited = diffX < 0;\n        return (\n            <div class={`w-100 mb-4 position-relative ${style.hoverElement}`}\n                onTouchstart={deleted ? () => {} : this.touchStart}\n                onTouchend={deleted ? () => {} : this.touchEnd}\n                onTouchmove={deleted ? () => {} : this.touchMove}\n                onClick={!deleted && isBeeingEdited ? this.reset : () => {}}\n                style={`opacity: ${deleted ? 0.3 : 1};`}\n            >\n                {!isBeeingEdited && !deleted && <div class={`position-absolute ${style.hoverelementonly}`} style='top: 0px; right: 0px; z-index: 1000;'>\n                    <button class='btn btn-sm btn-secondary' type='button'\n                        onClick={this.swipeLeft}\n                    >\n                        <i class='fas fa-ellipsis-h' />\n                    </button>\n                </div>}\n                {isBeeingEdited && !deleted && <div class='position-absolute' style={`right: 0px; top: 10%; overflow: hidden; width: ${Math.abs(diffX) || 0}px; line-height: 0.8em;`}>\n                    {!line.grouped && <>\n                        {deleteVerify ?\n                            <>\n                                <button class='btn btn-sm btn-secondary float-right ml-3 mb-3'\n                                    onClick={this.reset}\n                                >\n                                    <i class='fas fa-times' /> <Text id='dog.history.no'>Nei</Text>\n                                </button>\n                                <button class='btn btn-sm btn-success float-right'\n                                    onClick={this.deleteHistory}\n                                >\n                                    <i class='fas fa-check' /> <Text id='dog.history.yes'>Ja</Text>\n                                </button>\n                            </>:\n                            <button class='btn btn-sm btn-danger float-right'\n                                onClick={this.deleteHistoryRequest}\n                            >\n                                <i class='fas fa-trash' /> <Text id='dog.history.delete'>Slett</Text>\n                            </button>\n                        }\n                    </>}\n                    {line.grouped && <small>\n                        <Text id='dog.history.cant-delete-groups'>Kan ikke slette grupperinger. G inn p hundene og slett der.</Text><br />\n                        <button class='btn btn-sm btn-success float-right'\n                            onClick={this.reset}\n                        >\n                            <i class='fas fa-check' /> Ok\n                        </button>\n                    </small>}\n                </div>}\n                <div class='row position-relative' style={`left: ${isBeeingEdited ? diffX : 0}px;`}>\n                    <div class='col-12 col-sm-8 col-lg-6 offset-sm-2 offset-lg-3 d-flex mb-0 position-relative'>\n                        {/* {JSON.stringify(dog, null, 4)} */}\n                        {line.dogImage ? <div class={`text-center border rounded-circle imageRounded imageRoundedSmall`} style={line.dogImage ? `background-image: url(\"${line.dogImage.s3SmallLink}\"); background-size: cover;` : ''}>\n                            &nbsp;\n                        </div> : <div class={`text-center border rounded-circle imageRounded imageRoundedSmall`} style={line.images && line.images[0] ? `background-image: url(\"${line.images[0].s3SmallLink}\"); background-size: cover;` : ''}>\n                            {!hasImage && <i class='fas fa-rss text-muted mt-2' style='font-size: 20px;' />}\n                        </div>}                        \n                        <div class='flex-grow-1 pl-3 pr-2' style='line-height: 1.0em;'>\n                            {!line.grouped && line.dogId && <a class='stretched-link' href={`/dogs/${line.dogId}`}>\n                                <strong class='mr-2'>{line.dogShortname || line.dogName}: </strong>\n                            </a>}\n                            {line.title}<br />\n                            \n                            {line.grouped && (\n                                <>\n                                    <div class='w-100 clearfix mt-2'>\n                                        {line.grouped.map(el => (\n                                            <>\n                                                <a href={`/dogs/${el.dogId}`}>\n                                                    {el.dogImage ? (\n                                                        <div class={`text-center border rounded-circle imageRounded imageRoundedThumb float-left`}\n                                                            style={`margin-right: 2px; ${el.dogImage ? `background-image: url(\"${el.dogImage.s3SmallLink}\");` : ''}`}\n                                                        >\n                                                            &nbsp;\n                                                        </div>\n                                                    ) : (\n                                                        <div class={`text-center border rounded-circle imageRounded imageRoundedThumb float-left text-muted pt-1`} \n                                                            style={`margin-right: 2px; ${el.images && el.images[0] ? `background-image: url(\"${el.images[0].s3SmallLink}\");` : ''}`}\n                                                        >\n                                                            {/* {!hasImage && <i class='fas fa-dog text-muted' style='font-size: 10px;' />} */}\n                                                            {!hasImage && <span style='font-size: 15px;'>{util.ucfirst(el.dogName, true)}</span>}\n                                                        </div>\n                                                    )}\n                                                </a>\n                                            </>\n                                        ))}\n                                    </div>\n                                    <div class='w-100 clearfix mt-2'>\n                                        <small>\n                                            {line.grouped.map(el => (\n                                                <span class='float-left mr-2 text-muted'>\n                                                    <a href={`/dogs/${el.dogId}`}>\n                                                        {el.dogShortname || el.dogName}\n                                                    </a>\n                                                </span>\n                                            ))}\n                                        </small>\n                                    </div>\n                                </>\n                            )}\n\n                            <div class='w-100 clearfix'>\n                                <small class='text-muted'>\n                                    {line.date && <small onClick={this.toggleDate}>\n                                        {showDate ? util.formatDate(line.date, { locale: 'no-NB' }) : util.formatDistance(line.date, new Date(), { locale: 'no-NB' })}\n                                        {line.endDate && <span class='ml-3'><i class='fas fa-hourglass-end' /> {util.formatDate(line.endDate, { locale: 'no-NB' })}</span>}\n                                        {line.historyType && <span class='ml-3'>\n                                            <i class='fas fa-folder-open' /> {HISTORY_TYPE_MAP[line.historyType]} {line.vaccineType ? ` - ${VACCINE_TYPES[line.vaccineType].name}` : ''}\n                                        </span>}\n                                        {line.weight && <span class='ml-3'><i class='fas fa-balance-scale' /> {line.weight} kg</span>}\n                                        {line.bodyScore && <span class='ml-3'><i class='fas fa-dog' /> {line.bodyScore}</span>}\n                                        {line.user && line.user.email && <span class='ml-3'><i class='fas fa-user' /> {line.user.email}</span>}\n                                    </small>}\n                                </small>\n                            </div>\n\n                            <div class='row mt-2'>\n                                <div class='col-12'>\n                                    <span class='font-weight-normal'>{line.comment}</span>\n                                    <span class='float-right'>\n                                        {line.cost ? `Kr. ${util.format(line.cost, 2)}` : ''}\n                                    </span>\n                                </div>\n                            </div>\n\n                        </div>\n                    </div>\n\n                    <div class='col-12 col-sm-8 col-lg-6 offset-sm-2 offset-lg-3 mt-1'>\n                        <div class='row'>\n                            <ImageScroller stores={this.props.stores} images={line.images} />\n                        </div>\n                    </div>\n                </div>\n            </div>\n        );\n    }\n}\n\nexport default DogHistoryLine;\n"],"sourceRoot":""}