(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{B7Gj:function(t,e,o){"use strict";o.r(e),function(t){function r(t,e){var o=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),o.push.apply(o,r)}return o}function s(t,e,o){return e in t?Object.defineProperty(t,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[e]=o,t}var n,a=o("hosL"),l=o("Utv1"),c=o("/eY4"),i=o("OhSV"),h=o("ZOvn"),u=o.n(h),b=o("JWe/"),d=(o("3pQw"),o("WAWY")),m=o("azdc"),p=o("3UPq"),f=o("pJjI"),O=o("wanP"),j=o("K9Qx"),y=o("bUJL"),g=o("4imK"),k=o("epqT"),w=u.a.marginTop(!0),v=u.a.marginBottom(),x=u.a.subMenuMarginTop(),S={isLoading:!1,submenu:"totals",workoutFilter:function(){return!0}},P=Object(c.a)(n=function(e){function o(t){var o;return(o=e.call(this,t)||this).loadWorkouts=function(t){return new Promise((function(e,r){var s,n,a,c,i,h,u,b,d;return void 0===t&&(t=o.props),o.setState({isLoading:!0}),a=(s=t.stores).userStore,c=(n=s.workoutStore).currentTeam,i=(new Date).getMonth()+1,h=l.a.getYear(),b=(u=t).month,d=u.year,Promise.resolve(Promise.all([n.load({query:{team:c,year:void 0===d?h:d,month:void 0===b?i:b}}),o.loadWorkoutSummary(t),o.loadWorkoutPlans(t),a.getNotifications(),o.loadStravaActivities(),o.loadGarminActivities()])).then((function(){try{return o.setState({isLoading:!1}),e()}catch(t){return r(t)}}),r)}))},o.loadWorkoutPlans=function(t){return new Promise((function(e,r){function s(){return o.setState({isLoading:!1}),e()}var n,a,c,i,h,u,b,d;return void 0===t&&(t=o.props),o.setState({isLoading:!0}),n=t.year,a=(new Date).getMonth()+1,c=l.a.getYear(),i=parseInt(n||(a<6?c-1:c),10),b=(h=t.stores).workoutStore.currentTeam,(u=h.workoutPlanStore).updateItem("workoutPlans",[]),u.updateItem("workoutPlan",{}),u.resetGraphPlanWeekDistanceCurrent(),b?Promise.resolve(u.load({query:{team:b,seasonYear:i,seasonMonth:6}})).then(function(){try{if((d=u.workoutPlans[0]||{}).id)return Promise.resolve(u.load(d.id)).then(function(){try{return u.prepareWeekGraphs({year:n}),t.call(this)}catch(t){return r(t)}}.bind(this),r);function t(){return s.call(this)}return t.call(this)}catch(t){return r(t)}}.bind(this),r):s.call(this)}))},o.chooseSubmenu=function(t){o.setState({submenu:t.target.parentElement.dataset.menu||t.target.dataset.menu})},o.chooseDay=function(t){var e=t.day,r=t.month,s=t.year,n=o.state;if(n.dd===e&&n.mm===r&&n.yyyy===s)return o.setState({workoutFilter:function(){return!0},dd:null,mm:null,yyyy:null});o.setState({dd:e,mm:r,yyyy:s,workoutFilter:function(t){var o=new Date(t.date),n=o.getDate(),a=o.getMonth()+1,l=o.getFullYear();return n===parseInt(e,10)&&a===parseInt(r,10)&&l===parseInt(s,10)}})},o.state=function(t){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?r(Object(o),!0).forEach((function(e){s(t,e,o[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):r(Object(o)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(o,e))}))}return t}({},S),o}var n,c;c=e,(n=o).prototype=Object.create(c.prototype),n.prototype.constructor=n,n.__proto__=c;var h=o.prototype;return h.loadStravaActivities=function(){return new Promise(function(t){return this.props.stores.stravaActivityStore.load({query:{hideImported:1}}),t()}.bind(this))},h.loadGarminActivities=function(){return new Promise(function(t){return this.props.stores.garminActivityDetailsStore.load({query:{hideImported:1}}),t()}.bind(this))},h.loadWorkoutSummary=function(t){return new Promise(function(e,o){var r,s,n,a,c,i,h,u,b;return void 0===t&&(t=this.props),s=(r=t.stores).userStore,n=r.workoutStore,a=(new Date).getMonth()+1,c=l.a.getYear(),void 0===(h=(i=t).month)?a:h,u=i.year,b=n.currentTeam,Promise.resolve(s.getWorkoutSummary({team:b,year:void 0===u?c:u})).then((function(){try{return Promise.resolve(s.getWorkoutSummaryDay({daysBack:500,team:b})).then((function(){try{return e()}catch(t){return o(t)}}),o)}catch(t){return o(t)}}),o)}.bind(this))},h.componentDidMount=function(){this.loadWorkouts()},h.componentWillReceiveProps=function(t){t.month===this.props.month&&t.year===this.props.year&&t.team===this.props.team||this.loadWorkouts(t)},h.render=function(){var e,o=this,r=this.state,s=r.isLoading,n=r.submenu,c=this.props.stores,h=c.userStore,S=c.appState,P=c.workoutStore,W=c.workoutPlanStore,I=c.stravaActivityStore,M=c.garminActivityDetailsStore,D=W.workoutPlan,L=W.workoutPlans,T=h.user,A=T.language,Y=u.a.getMonths(void 0===A?"no":A),C=(new Date).getMonth()+1,F=l.a.getYear(),_=this.props,G=_.month,q=void 0===G?C:G,J=_.year,K=void 0===J?F:J,R=P.currentTeam,U=S.darkmode,B=P.workouts,E=B.filter(this.state.workoutFilter),H=W.sumWorkoutPlanMonth(parseInt(K,10),parseInt(q,10))||0,z=h.findWorkoutSummaryMonth(parseInt(K,10),parseInt(q,10))||0;H&&(e=Math.floor(z/H*100));var N=h.findWorkoutSummaryMonth(parseInt(K,10),parseInt(q,10),"count",!0)||0,Q=h.findWorkoutSummaryMonth(parseInt(K,10),parseInt(q,10),"distanceKm",!0)||0,V=h.findWorkoutSummaryMonth(parseInt(K,10),parseInt(q,10),"duration",!0)||0,Z=h.findWorkoutSummaryMonth(parseInt(K,10),parseInt(q,10),"speedAvg",!0)||0,X=(h.findWorkoutSummaryMonth(parseInt(K,10),parseInt(q,10),"elevation",!0),parseInt(K||(C<6?F-1:F),10)),$=I.stravaActivities,tt=M.garminActivityDetails;return Object(a.h)("div",{class:"container-fluid",style:"margin-bottom: "+v+"; margin-top: "+w+";"},Object(a.h)("div",{class:"row mb-4 fixed-top",style:"margin-top: "+x+"; background-color: "+(U?"#191d21":"#f8f9fa")+";"},Object(a.h)("div",{class:"col text-center border-bottom border-primary subtopmenu"},Object(a.h)("a",{href:"/workouts/",class:"text-primary stretched-link"},Object(a.h)("nobr",null,Object(a.h)("i",{class:"fas fa-chart-line"})," ",Object(a.h)(i.c,{id:"workout.index.dashboard"},"Oversikt")))),Object(a.h)("div",{class:"col text-center subtopmenu"},Object(a.h)("a",{href:"/workouts/list",class:"text-secondary stretched-link"},Object(a.h)("nobr",null,Object(a.h)("i",{class:"fas fa-list"})," ",Object(a.h)(i.c,{id:"workout.index.list"},"Liste")))),Object(a.h)("div",{class:"col text-center subtopmenu"},Object(a.h)("a",{href:"/workouts/plan",class:"text-secondary stretched-link"},Object(a.h)("nobr",null,Object(a.h)("i",{class:"fas fa-calendar-alt"})," ",Object(a.h)(i.c,{id:"workout.index.plan"},"Plan"))))),Object(a.h)("div",{class:"row"},Object(a.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 border-bottom"},Object(a.h)(f.a,{stores:this.props.stores,callback:this.loadWorkouts,key:"teams-"+R})),Object(a.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-2 mb-2"},Object(a.h)("a",{class:"btn btn-primary btn-sm float-right",href:"/workouts/edit/new"},Object(a.h)("i",{class:"fas fa-plus"})," ",Object(a.h)(i.c,{id:"workout.index.add-workout"},"Legg til treningstur"))),Object(a.h)(p.a,{stores:this.props.stores,isLoading:s,year:K,month:q,chooseDayFunction:this.chooseDay,key:"calendar-header-"+D.id+"-"+L.length,hideTable:"calendar"===n?0:1,hideSummary:"calendar"===n?0:1,skipLoadSummary:"calendar"===n?0:1}),"totals"===n&&Object(a.h)(t,null,Object(a.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-2 mb-2"},Object(a.h)("div",{class:"row"},Object(a.h)("div",{class:"col-4 text-center"},H>=0&&Object(a.h)(O.a,{key:"gauge-"+e,radius:55,percent:e,prefix:"%",total:H+" km",completed:z+" km"}),Object(a.h)("br",null),Object(a.h)("small",{class:"text-muted"},Object(a.h)(i.c,{id:"workout.index.plan"},"Treningsplan"))),Object(a.h)("div",{class:"col-4 text-center"},Object(a.h)("h5",null,Object(a.h)("span",{class:"text-muted font-weight-lighter"},Object(a.h)("i",{class:"fas fa-road"}))),Object(a.h)("h3",null,l.a.format(Q,0)," ",Object(a.h)("small",null,Object(a.h)("small",null,Object(a.h)("small",null,"km")))),Object(a.h)("small",{class:"text-muted"},Object(a.h)(i.c,{id:"workout.calendar.distance"},"Distanse"))),Object(a.h)("div",{class:"col-4 text-center"},Object(a.h)("h5",null,Object(a.h)("span",{class:"text-muted font-weight-lighter"},Object(a.h)("i",{class:"fas fa-tachometer-alt ml-3"}))),Object(a.h)("h3",null,l.a.format(Z,1)," ",Object(a.h)("small",null,Object(a.h)("small",null,Object(a.h)("small",null,"km/t")))),Object(a.h)("small",{class:"text-muted"},Object(a.h)(i.c,{id:"workout.calendar.avg-speed"},"Gj.snittsfart"))),Object(a.h)("div",{class:"col-12 text-center"},Object(a.h)("span",{class:"text-muted font-weight-lighter"},Object(a.h)("i",{class:"fas fa-running"})," ")," ",N,Object(a.h)("span",{class:"text-muted font-weight-lighter"},Object(a.h)("i",{class:"fas fa-clock ml-3"}))," ",l.a.secToHms(V))))),"analysis"===n&&Object(a.h)(t,null,Object(a.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3"},Object(a.h)(d.a,{stores:this.props.stores,isLoading:s,year:K,key:"graph-"+D.id+"-"+L.length}))),"table"===n&&Object(a.h)(t,null,Object(a.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3"},Object(a.h)(m.a,{stores:this.props.stores,isLoading:s,year:K,key:"table-"+D.id+"-"+L.length}))),"workoutplan"===n&&Object(a.h)(t,null,Object(a.h)(j.a,{stores:this.props.stores,basehref:"/workouts/",month:q,year:K,key:(D.id||X)+"-"+R+"-"+q+"-"+K,showNavigation:!1,showHeader:!1})),Object(a.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 my-3"},Object(a.h)("div",{class:"row"},Object(a.h)("div",{class:"col px-1 pt-2"},Object(a.h)("button",{class:"btn btn-block "+("totals"===n?"btn-primary":"btn-outline-primary")+" text-nowrap",style:"text-overflow: ellipsis; overflow: hidden;","data-menu":"totals",onClick:this.chooseSubmenu},Object(a.h)("i",{class:"fas fa-tachometer-alt"})," ",Object(a.h)(i.c,{id:"workouts.totals"},"Totaler"))),Object(a.h)("div",{class:"col px-1 pt-2"},Object(a.h)("button",{class:"btn btn-block "+("analysis"===n?"btn-primary":"btn-outline-primary")+" text-nowrap",style:"text-overflow: ellipsis; overflow: hidden;","data-menu":"analysis",onClick:this.chooseSubmenu},Object(a.h)("i",{class:"fas fa-chart-area"})," ",Object(a.h)(i.c,{id:"workouts.analysis"},"Analyser"))),Object(a.h)("div",{class:"col px-1 pt-2"},Object(a.h)("button",{class:"btn btn-block "+("table"===n?"btn-primary":"btn-outline-primary")+" text-nowrap",style:"text-overflow: ellipsis; overflow: hidden;","data-menu":"table",onClick:this.chooseSubmenu},Object(a.h)("i",{class:"fas fa-table"})," ",Object(a.h)(i.c,{id:"workouts.table"},"Tabell"))),Object(a.h)("div",{class:"col px-1 pt-2"},Object(a.h)("button",{class:"btn btn-block "+("workoutplan"===n?"btn-primary":"btn-outline-primary")+" text-nowrap",style:"text-overflow: ellipsis; overflow: hidden;","data-menu":"workoutplan",onClick:this.chooseSubmenu},Object(a.h)("i",{class:"fas fa-calendar-alt"})," ",Object(a.h)(i.c,{id:"workouts.workoutplan"},"Treningsplan"))),Object(a.h)("div",{class:"col px-1 pt-2"},Object(a.h)("button",{class:"btn btn-block "+("calendar"===n?"btn-primary":"btn-outline-primary")+" text-nowrap",style:"text-overflow: ellipsis; overflow: hidden;","data-menu":"calendar",onClick:this.chooseSubmenu},Object(a.h)("i",{class:"fas fa-calendar-alt"})," ",Object(a.h)(i.c,{id:"workouts.workoutplan"},"Kalender")))))),Object(a.h)("div",{class:"row"},T&&T.strava&&$&&$.length>0&&Object(a.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 border-top border-bottom pt-3 pb-3 my-2"},Object(a.h)("h5",null,Object(a.h)(i.c,{id:"workout.index.strava-workouts"},"Strava workouts / not imported")),$&&$.map((function(t){return Object(a.h)(y.a,{stores:o.props.stores,activity:t,key:"strava-"+R+"-"+t.id})}))),T&&T.garmin&&tt&&tt.length>0&&Object(a.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 border-top border-bottom pt-3 pb-3 my-2"},Object(a.h)("h5",null,Object(a.h)(i.c,{id:"workout.index.garmin-workouts"},"Garmin workouts / not imported")),tt&&tt.map((function(t){return Object(a.h)(g.a,{stores:o.props.stores,activity:t,key:"garmin-"+R+"-"+t.id})})))),Object(a.h)(k.a,{stores:this.props.stores,url:this.props.url}),Object(a.h)("div",{class:"row"},E&&E.length>0&&Object(a.h)("div",{class:"col-12 mb-4"},Object(a.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 px-0 mt-4"},Object(a.h)("h5",null,Object(a.h)(i.c,{id:"workout.index.last-workouts",fields:{total:E.length,month:Y[q-1],year:K}},"Treningsturer ",Y[q-1]," ",K," - ",E.length," stk"))),E&&E.map((function(t){return Object(a.h)(b.a,{stores:o.props.stores,workout:t})}))),!B||0===B.length&&Object(a.h)("div",{class:"col-12 mb-4 text-center pt-5 pb-5"},Object(a.h)("h1",{class:"text-muted"},Object(a.h)("i",{class:"fas fa-running"})),Object(a.h)("h5",{class:"text-muted font-weight-lighter"},Object(a.h)(i.c,{id:"workouts.no-workouts",fields:{month:Y[q-1],year:K}},"Ingen treningsturer registrert...")))),!1)},o}(a.Component))||n;e.default=P}.call(this,o("hosL").Fragment)},azdc:function(t,e,o){"use strict";(function(t){var r,s=o("hosL"),n=o("Utv1"),a=o("/eY4"),l=o("OhSV"),c=o("ZOvn"),i=o.n(c),h=Object(l.d)((function(){return{week:Object(s.h)(l.c,{id:"workout.graph.week"}),distance:Object(s.h)(l.c,{id:"workout.graph.distance"}),ascend:Object(s.h)(l.c,{id:"workout.graph.ascend"}),plan:Object(s.h)(l.c,{id:"workout.graph.plan"})}}))(r=Object(a.a)(r=function(e){function o(){return e.apply(this,arguments)||this}var r,a;return a=e,(r=o).prototype=Object.create(a.prototype),r.prototype.constructor=r,r.__proto__=a,o.prototype.render=function(){for(var e=this.props.stores.userStore,o=this.props,r=o.year,a=o.showHeader,c=void 0===a||a,h=e.user.language,u=i.a.getMonths(void 0===h?"no":h),b=(new Date).getMonth()+1,d=n.a.getYear(),m=parseInt(r||(b<6?d-1:d),10),p=n.a.monthRange(m+"-06-01",m+1+"-05-31"),f=n.a.monthRange(m-1+"-06-01",m+"-05-31"),O=n.a.weekRange(m+"-06-01",m+1+"-05-31").map((function(t){return t.week})),j=Math.floor(O.length/(O.length%6)),y=[],g=0,k=O.length;g<k;g+=j)y.push(O[g]);return Object(s.h)(t,null,c&&Object(s.h)("h5",null,Object(s.h)(l.c,{id:"workout.graph.title"},"Treningsstatistikk")," ",m," - ",m+1),Object(s.h)("div",{class:"w-100 mt-3 mb-4"},Object(s.h)("small",{class:"mb-4"},Object(s.h)("small",null,Object(s.h)("table",{class:"table table-sm font-weigth-lighter border-bottom"},Object(s.h)("thead",null,Object(s.h)("tr",null,Object(s.h)("th",{style:"padding: .15rem;"},Object(s.h)(l.c,{id:"workout.graph.season"},"Sesong")),p.map((function(t){return Object(s.h)("th",{class:"text-right",style:"padding: .15rem;"},Object(s.h)("a",{href:"/workouts/month/"+t.month+"/"+t.year},u[t.month-1]))})))),Object(s.h)("tbody",null,Object(s.h)("tr",null,Object(s.h)("th",{scope:"row",style:"padding: .15rem;"},m-1," - ",m),f.map((function(o){return Object(s.h)(t,null,Object(s.h)("td",{class:"text-right",style:"padding: .15rem;"},Object(s.h)("nobr",null,e.findWorkoutSummaryMonth(o.year,o.month)),Object(s.h)("br",null),Object(s.h)("nobr",null,e.findWorkoutSummaryMonth(o.year,o.month,"elevation")),Object(s.h)("br",null)))})),Object(s.h)("td",{class:"text-muted",style:"padding: .15rem;"},Object(s.h)("nobr",null,Object(s.h)("i",{class:"fas fa-road"})," km"),Object(s.h)("br",null),Object(s.h)("nobr",null,Object(s.h)("i",{class:"fas fa-mountain"})," m"),Object(s.h)("br",null))),Object(s.h)("tr",null,Object(s.h)("th",{scope:"row",style:"padding: .15rem;"},m," - ",m+1),p.map((function(o){return Object(s.h)(t,null,Object(s.h)("td",{class:"text-right",style:"padding: .15rem;"},Object(s.h)("nobr",null,e.findWorkoutSummaryMonth(o.year,o.month)),Object(s.h)("br",null),Object(s.h)("nobr",null,e.findWorkoutSummaryMonth(o.year,o.month,"elevation")),Object(s.h)("br",null)))})),Object(s.h)("td",{class:"text-muted",style:"padding: .15rem;"},Object(s.h)("nobr",null,Object(s.h)("i",{class:"fas fa-road"})," km"),Object(s.h)("br",null),Object(s.h)("nobr",null,Object(s.h)("i",{class:"fas fa-mountain"})," m"),Object(s.h)("br",null)))))))))},o}(s.Component))||r)||r;e.a=h}).call(this,o("hosL").Fragment)}}]);
//# sourceMappingURL=route-workouts.chunk.88d9f.js.map