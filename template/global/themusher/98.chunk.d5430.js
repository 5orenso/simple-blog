(window.webpackJsonp=window.webpackJsonp||[]).push([[98],{TiXY:function(e,t,i){"use strict";var a,r=i("hosL"),s=i("/eY4"),n=(i("cneo"),i("Utv1"),i("OhSV")),c=i("u2zT"),o=Object(s.a)(a=function(e){function t(t){var i;return(i=e.call(this,t)||this).handleAddImage=function(e){var t=i.props;(0,t.updateField)({id:t.object.id,field:t.field,value:e})},i.state={files:[]},i}var i,a;return a=e,(i=t).prototype=Object.create(a.prototype),i.prototype.constructor=i,i.__proto__=a,t.prototype.render=function(){var e=this.props,t=e.uploadStatus,i=void 0===t?function(){}:t,a=e.before,s=void 0===a?function(){}:a,o=e.after,l=void 0===o?function(){}:o,d=e.autoOpen,u=void 0!==d&&d;return Object(r.h)("div",{class:"row"},Object(r.h)("div",{class:"col-12"},Object(r.h)(n.c,{id:"form.files.upload-file"},"Last opp fil"),":",Object(r.h)("br",null),Object(r.h)(c.a,{handleAddImage:this.handleAddImage,apiUrl:"/api/fileupload",uploadStatus:i,before:s,after:l,autoOpen:u},Object(r.h)("div",{style:{height:30,width:"100%"}}))))},t}(r.Component))||a;t.a=o},f0JH:function(e,t,i){"use strict";i.r(t),function(e){function a(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,a)}return i}function r(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function s(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}var n,c,o=i("hosL"),l=(i("Utv1"),i("/eY4")),d=(i("Y3FI"),i("OhSV")),u=i("ZOvn"),p=i("om2D"),h=i("TiXY"),b=(i("HqZR"),u.a.marginTop(!1)),f=u.a.marginTopBack(!1),m=u.a.marginBottom(),O={},j=Object(l.a)(n=function(e){function t(){for(var t,i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return(t=e.call.apply(e,[this].concat(a))||this).handleImageErrored=function(e){var t=e.target;t.onerror=null,setTimeout((function(){t.src+="?"+new Date}),1e3)},t.removeImage=function(e){return new Promise((function(i){return t.props.stores.userStore.removeImage({id:t.props.user.id,name:e.target.parentElement.dataset.name||e.target.dataset.name}),i()}))},t.removeMainImage=function(){var e=t.props;(0,e.updateField)({id:e.user.id,field:e.field,value:{}})},t}return s(t,e),t.prototype.render=function(){var e=this,t=this.props,i=t.saved,a=t.user,r=t.type,s=void 0===r?"text":r,n=t.field,c=t.title,l=t.icon,u=t.help,b=t.onInput,f=t.updateField,m=t.skipImageList,O=a[n];return"image"===s?Object(o.h)("div",{class:"form-group "+(i[n+"."+a.id]?"is-valid":"")},Object(o.h)("label",{for:n+"Input"},l&&Object(o.h)("i",{class:l+" text-muted"})," ",c),!m&&Object(o.h)("div",{class:"container-fluid"},Object(o.h)("div",{class:"row"},a.image&&a.image.s3SmallLink&&Object(o.h)("div",{class:"col-3 p-1"},Object(o.h)("img",{src:a.image.s3SmallLink,class:"img-fluid border rounded-lg",onError:this.handleImageErrored}),Object(o.h)("button",{class:"btn btn-sm btn-link",onClick:this.removeMainImage,"data-name":a.image.name},Object(o.h)("i",{class:"fas fa-trash"})," Del"),Object(o.h)("span",{class:"badge badge-success"},"Main")),a.images&&a.images.filter((function(e){return!a.image||e.md5!==a.image.md5})).map((function(t){return Object(o.h)("div",{class:"col-3 p-1"},Object(o.h)("img",{src:t.s3SmallLink,class:"img-fluid",onError:e.handleImageErrored}),Object(o.h)("button",{class:"btn btn-sm btn-link",onClick:e.removeImage,"data-name":t.name},Object(o.h)("i",{class:"fas fa-trash"})," Del"))})))),Object(o.h)(p.a,{saved:i,object:a,field:n,updateField:f,autoOpen:!1}),i[n+"."+a.id]?Object(o.h)("div",{class:"valid-feedback",style:"display: block;"},Object(o.h)(d.c,{id:"users.changes-saved"},"Endringene er lagret")):Object(o.h)("small",{id:n+"Help",class:"form-text text-muted"},u)):"file"===s?Object(o.h)("div",{class:"form-group "+(i[n+"."+a.id]?"is-valid":"")},Object(o.h)("label",{for:n+"Input"},l&&Object(o.h)("i",{class:l+" text-muted"})," ",c),Object(o.h)(h.a,{saved:i,object:a,field:n,updateField:f}),i[n+"."+a.id]?Object(o.h)("div",{class:"valid-feedback",style:"display: block;"},Object(o.h)(d.c,{id:"users.changes-saved"},"Endringene er lagret")):Object(o.h)("small",{id:n+"Help",class:"form-text text-muted"},u)):Object(o.h)("div",{class:"form-group "+(i[n+"."+a.id]?"is-valid":"")},Object(o.h)("label",{for:n+"Input"},l&&Object(o.h)("i",{class:l+" text-muted"})," ",c),Object(o.h)("input",{type:"text",class:"form-control "+(i[n+"."+a.id]?"is-valid":""),id:n+"Input","aria-describedby":n+"Help",value:O,"data-id":a.id,"data-field":n,onInput:b}),i[n+"."+a.id]?Object(o.h)("div",{class:"valid-feedback",style:"display: block;"},Object(o.h)(d.c,{id:"users.changes-saved"},"Endringene er lagret")):Object(o.h)("small",{id:n+"Help",class:"form-text text-muted"},u))},t}(o.Component))||n,v=Object(l.a)(c=function(t){function i(e){var i;return(i=t.call(this,e)||this).updateField=function(e){var t=e.target.dataset,a=t.field,r=t.type,s=t.elementtype,n=e.target.value;i.updateFieldValue({id:parseInt(t.id,10),field:a,value:n,type:r,elementtype:s})},i.updateFieldValue=function(e){var t=e.id,a=e.field,r=e.value,s=e.datatype,n=e.elementtype,c=e.skipTimer,o=void 0!==c&&c,l=i.props.stores.userStore,d=r,u=r,p=l.user;"images"===a&&Array.isArray(p.images)&&Array.isArray(r)&&(u=[].concat(p.images,r)),"array"!==s||Array.isArray(r)||(d="number"===n?r.split(",").map((function(e){return parseFloat(e)||e})):r.split(",")),l.updateField(t,a,u),o?i.doUpdateField(t,a,d):(clearTimeout(i.updateTimer[a]),i.updateTimer[a]=setTimeout((function(){return new Promise((function(e){return i.doUpdateField(t,a,d),e()}))}),500))},i.back=function(){i.props.stores.history.goBack()},i.state=function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?a(Object(i),!0).forEach((function(t){r(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):a(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}({},O),i.updateTimer={},i}s(i,t);var n=i.prototype;return n.loadUser=function(){return new Promise(function(e){return this.props.stores.userStore.getInfo(),e()}.bind(this))},n.doUpdateField=function(e,t,i){return new Promise(function(a,r){return Promise.resolve(this.props.stores.userStore.saveField(e,t,i)).then((function(){try{return a()}catch(e){return r(e)}}),r)}.bind(this))},n.componentDidMount=function(){this.loadUser()},n.render=function(){var t=this.props.stores.userStore,i=t.insertStatus,a=t.saved,r=t.user,s=r.email,n=this.props,c=n.field,l=n.title,u=n.help,p=n.icon,h=n.type;return c?Object(o.h)(e,null,Object(o.h)(j,{saved:a,user:r,field:c,icon:p,type:h,stores:this.props.stores,title:l,help:u,onInput:this.updateField,updateField:this.updateFieldValue,skipImageList:!1})):Object(o.h)("div",{class:"container-fluid",style:"margin-bottom: "+m+"; margin-top: "+b+";"},Object(o.h)("button",{class:"btn btn-link pl-0 fixed-top text-primary",style:"top: "+f+"; left: 5px; font-size: 35px; width: 45px;",onClick:this.back},Object(o.h)("i",{class:"fas fa-arrow-circle-left"})),Object(o.h)("div",{class:"row"},Object(o.h)("div",{class:"offset-0 col-12 offset-sm-2 col-sm-8 offset-lg-4 col-lg-4",style:"padding-left: 35px;"},Object(o.h)("div",null,Object(o.h)("h5",null,Object(o.h)(d.c,{id:"users.edit"},"Endre"),": ",s),Object(o.h)(j,{saved:a,user:r,field:"username",icon:"fas fa-user",title:Object(o.h)(d.c,{id:"users.username"},"Brukernavn"),help:Object(o.h)(d.c,{id:"users.username-help"},"Ditt brukernavn pÃ¥ The Musher"),onInput:this.updateField}),Object(o.h)("div",{class:"row"},Object(o.h)("div",{class:"col-6"},Object(o.h)(j,{saved:a,user:r,field:"firstname",title:Object(o.h)(d.c,{id:"users.firstname"},"Fornavn"),help:Object(o.h)(d.c,{id:"users.firstname-help"},"Ditt fornavn"),onInput:this.updateField})),Object(o.h)("div",{class:"col-6"},Object(o.h)(j,{saved:a,user:r,field:"lastname",title:Object(o.h)(d.c,{id:"users.lastname"},"Etternavn"),help:Object(o.h)(d.c,{id:"users.lastname-help"},"Ditt etternavn"),onInput:this.updateField}))),Object(o.h)(j,{saved:a,user:r,field:"cellphone",icon:"fas fa-mobile",title:Object(o.h)(d.c,{id:"users.cellphone"},"Mobil"),help:Object(o.h)(d.c,{id:"users.cellphone-help"},"Ditt mobilnummer"),onInput:this.updateField}),Object(o.h)(j,{saved:a,user:r,field:"url",icon:"fas fa-link",title:Object(o.h)(d.c,{id:"users.url"},"Hjemmeside"),help:Object(o.h)(d.c,{id:"users.url-help"},"Din hjemmeside"),onInput:this.updateField}),Object(o.h)(j,{saved:a,user:r,field:"facebook",icon:"fab fa-facebook-square",title:Object(o.h)(d.c,{id:"users.facebook"},"Facebook"),help:Object(o.h)(d.c,{id:"users.facebook-help"},"Din Facebook profil"),onInput:this.updateField}),Object(o.h)(j,{saved:a,user:r,field:"instagram",icon:"fab fa-instagram",title:Object(o.h)(d.c,{id:"users.instagram"},"Instagram"),help:Object(o.h)(d.c,{id:"users.instagram-help"},"Din Instagram profil"),onInput:this.updateField}),Object(o.h)(j,{saved:a,user:r,field:"snapchat",icon:"fab fa-snapchat",title:Object(o.h)(d.c,{id:"users.snapchat"},"Snapchat"),help:Object(o.h)(d.c,{id:"users.snapchat-help"},"Din Snapchat profil"),onInput:this.updateField}),Object(o.h)(j,{saved:a,user:r,field:"image",icon:"fas fa-camera",type:"image",stores:this.props.stores,title:Object(o.h)(d.c,{id:"users.photos"},"Bilder"),help:Object(o.h)(d.c,{id:"users.photos-help"},"Bilder av deg."),onInput:this.updateField,updateField:this.updateFieldValue}))),i&&Object(o.h)("div",{class:"alert alert-success mt-4 col-12",role:"alert"},Object(o.h)(d.c,{id:"users.saved"},"Profilen er lagret."))))},i}(o.Component))||c;t.default=v}.call(this,i("hosL").Fragment)}}]);
//# sourceMappingURL=98.chunk.d5430.js.map