{"version":3,"sources":["webpack:///./routes/public/race/listMusher.js","webpack:///./routes/public/race/raceheader.js","webpack:///./components/public/heatmap.js","webpack:///./lib/icons.js","webpack:///./components/data/distance.js","webpack:///./routes/public/race/submenu.js","webpack:///./components/loading/index.js","webpack:///./components/map/style.css","webpack:///./components/public/trackmap.js","webpack:///./components/map/index.js","webpack:///./routes/public/race/style.css","webpack:///./components/dog/simplePublic.js","webpack:///./components/data/temperature.js","webpack:///./routes/public/race/header.js","webpack:///./components/data/weight.js","webpack:///./routes/public/race/tracking.js","webpack:///./components/dog/scroller.js","webpack:///./routes/public/race/raceText.js","webpack:///./components/drawer/index.js","webpack:///./components/public/raceTrackingMusherDetail.js","webpack:///./components/gauge/style.css","webpack:///./components/team/public.js","webpack:///./components/header/custom.js","webpack:///./routes/teams/publicDetail.js","webpack:///./components/data/elevation.js","webpack:///./components/team/publicLine.js","webpack:///./components/data/speed.js","webpack:///./components/overlay/index.js","webpack:///./components/states/index.js","webpack:///./routes/public/race/displayMusher.js","webpack:///./components/gauge/index.js","webpack:///./components/races/liveCheckpointResult.js","webpack:///./components/public/raceTracking.js"],"names":["initialState","ListMusher","observer","props","toggleFocusOnMusher","e","stores","appState","raceStore","parseInt","target","parentElement","dataset","musherid","getWorkoutSummaryActiveTeams","focusOnMushers","toggleInfoOnMusher","state","render","currentSpeed","updated","isActive","this","team","idx","infoOnMushers","line","getActiveTeamById","id","currentStages","getWorkoutSummaryByTeam","currentClass","getClassByTeamId","currentResults","getWorkoutResultsByTeam","distance","musher","getMusherByTeamId","image","images","length","raceClass","completed","distanceKm","hasStarted","currentLocation","coords","speed","timestamp","toFinish","class","style","s3SmallLink","onClick","data-musherid","util","ucfirst","String","firstname","lastname","name","title","format","secToHms","rest","isInProgress","dogs","formatDistance","Date","indexOf","battery","level","Component","RaceHeader","language","race","today","status","startDate","endDate","signupStartDate","signupEndDate","classes","useEffect","document","PageTitle","formatDate","locale","hour12","hour","minute","liveRace","role","showAddComment","Heatmap","updateTimer","inputRef","loadHeatmap","setState","isLoading","adminStore","getPublicHeatmap","raceid","componentDidMount","waypoints","zoomToMarkers","mapid","fullscreenMap","heatmap","publicHeatmap","mapId","minZoom","maxZoom","height","key","ICONS","adit","Icon","iconUrl","iconSize","iconAnchor","airport","analyse","archaeological","architecture","arrow_up","arrow_up_double","atm","avatar","bag","bar","barracks","battlefield","beach","bicycle","boundary_stone","buddhism","building","burger","bus","bus_stop","cable_car","camera","camp_site","car","caravan_site","cartography","cash","castle","castle_defensive","cave_entrance","cemetery","chapel","christianism","cinema","cinema_alt","city","cityhall","clean","compass","compass_alt","construction","contour","court_house","crown","crucifix","data","database","dentist","disabled","dislike","download","drag_lift","drop","eye","facebook","fire","fishing","flag","forbidden","fort","fountain","fuel","fuel_alt","gallery","gear","github","go","golf","heart","helicopter","home","hospital","hostel","hotel","hotel_alt","ice_ring","information","internet","invisible","islamism","island","judaism","laptop","library","lighthouse","like","linkedin","lion","lock","magnifier","mall","map","mapkey","mapshakers","marina","marker","market_place","mine","monument","mountain","museum","music","nature","nocamera","nonsmoking","north","north_alt","north_alt_II","north_alt_III","oppositeway","parking","pharmacy","picnic_site","pitch","playground","playground_alt","police","post_office","pub","restaurant","rocks","ruins","saddle","sailboat","school","seal","shelter","sinkhole","skype","smartphone","smoking","sport_centre","spring","square","stadium","star","stop","stupa","supermarket","swimming_pool","telephone","theatre","ticket","toilet","tower","town","traffic_signal","train","tram","tram_stop","tree_cinofer","tree_leaf","triangle","underground","unesco","university","upload","viewpoint","viewtower","village","vineyard","volcano","water_tower","water_well","watermill","waterpark","waterwork","wayside_cross","wind_generator","windmill","zoo","Icons","get","icon","list","Object","keys","getDiv","body","color","textColor","borderColor","iconWidth","iconHeight","randomPassword","hsl2Rgb","DivIcon","className","html","getRaceMarker","bib","rank","iconAnchorX","iconAnchorY","imageCirlceRadius","lineHeight","fontSize","paddingTop","paddingBottom","largeMarkers","mapChecked","titlePrefix","dotColor","mu","getRankingColor","mapIsDark","test","imageCircle","getDistanceMarker","getMarker","getSmallMarker","displayDistance","Distance","value","smallUnit","userStore","user","settings","imperial","kmToMiles","marginTop","marginBottom","subMenuMarginTop","email","submenu","jwtToken","getJwtToken","PublicRaceDetail","path","darkmode","currentMenu","match","href","Loading","goto","gotoTitle","routerName","native","module","exports","Trackmap","loadTrack","trackIds","getTrackIdsByClass","selectedClassIds","trackStore","cleanupMemory","loadPublic","query","idin","showHeatmap","allTeamIds","componentWillReceiveProps","nextProps","waypoints2","waypoints3","onMarkerClick","onMarker2Click","onMarker3Click","showTracks","showDistanceMarkers","groupWaypoints","geoJSONs","isAnimatedMarkers","replaySpeed","track","tracks","geojson","gpx","geoJSON","gpxInfo","showTrackProfile","distanceMarkerSteps","showFullscreenControl","MARKDOWN_OPTIONS","pedantic","gfm","breaks","sanitize","smartLists","smartypants","xhtml","BaseLayer","LayersControl","Overlay","L","Default","prototype","_getIconUrl","mergeOptions","iconRetinaUrl","require","shadowUrl","App","mapRef","createRef","polyRef","handleViewportChanged","mapCenter","center","mapZoom","zoom","handleLocationFound","latlng","hasLocation","onEachFeature","feature","layer","popupContent","totalDistance","maxSpeed","avgSpeed","ascent","calculatedAscend","decent","calculatedDescend","duration","bindPopup","handleClick","setLatlng","zoomToGeoJSON","bounds","getBounds","_northEast","fitBounds","err","console","log","markers","force","hasZoomedToMarkers","markerBounds","latLngBounds","forEach","extend","lat","lng","zoomToAllMarkers","zoomToFirst10Markers","slice","zoomToFirst3Markers","zoomToFavoriteMarkers","overlayAdd","visibleLayers","overlayRemove","polylineOptions","rangeSteps","maxHslColor","mapColorMode","newRangeMin","mapRangeMin","newRangeMax","mapRangeMax","speeds","Math","floor","min","ceil","max","range","colors","val","newMin","newMax","normalizeRange","r","g","b","setMapRange","setMapColors","polylineOptionIdxFn","latLng","altThresholds","mapRange","i","meta","polylinetrackPointFactory","dataArray","climbs","filter","item","trkpt","showSpeed","setMapColorMode","handleMarkerClick","opt","handleMarker2Click","handleMarker3Click","baseLayerChange","setMapChecked","whenReadyHandler","on","setMapRef","Windspeed","geoJSONStyle","weight","fillOpacity","fillColor","geoJSONStyleList","componentWillUnmount","startMarker","endMarker","skipGeojson","showZoomControl","showLayersControl","showScaleControl","showRange","layersControlPosition","mapColors","tempGeoJson","toJS","asObject","distanceMarkers","distances","currentDistance","steps","Array","isArray","push","isAdmin","onTouchmove","captureAllEvents","onScroll","whenCreated","onViewportChanged","onLocationfound","zoomControl","doubleClickZoom","scrollWheelZoom","dragging","Browser","mobile","tap","touchZoom","animate","easeLinearity","onOverlayadd","onOverlayremove","whenReady","position","checked","attribution","url","subdomains","metric","gj","eventHandlers","add","ref","positions","optionIdxFn","options","lineCap","opacity","smoothFactor","zoomAnimation","icons","wp","draggable","markdown","markdownOpts","reverse","click","zIndexOffset","bearing","currentState","type","Dog","dog","showTeam","showInfo","showName","showPosition","showAge","size","onDogClick","dogPosition","findDogposition","hasBirthday","birth","containerWidth","daysUntilNextBirthday","imageClasses","onTouchstart","stopPropagation","onTouchend","uuidv4","shortname","age","deceased","gender","findTeam","bodyScore","Temperature","celciusToFahrenheit","menu","profile","main","searchText","Navigation","toggleDropdown","menuName","parentNode","toggleDarkmode","toggleViewmode","mode","reloadApp","window","location","reload","adminLoadAll","getInfo","changeLanguage","lang","setLanguage","search","route","notifications","read","src","data-name","activeClassName","onInput","selected","Weight","kgToPounds","MARGIN_TOP","reloadInSec","reloadIsActive","leaderboardMode","filterByraceClass","showLeaderBoard","showNews","ReloadTimer","initComponent","tickReloadTimeer","reloadLastEpoch","now","getTime","clearTimeout","tick","setTimeout","radius","classNames","reloadPercent","normalizeBetween","showPercentText","percent","showCenterText","centerText","centerTextSize","centerTextY","loadLiveRaceResults","getRaceTrackerData","raceTrackerRace","getRaceTrackerActiveTeams","loadRaceResults","teamIds","loadWorkoutSummary","setLeaderboardMode","chooseRaceClass","toggleShowLeaderBoard","hide","toggleShowNews","loadRace","load","contestants","flat","teamid","loadTeams","join","getAllClassesSortedBy","RELOAD_INTERVAL_IN_SEC","width","innerWidth","innerHeight","teamsInThisRace","activeTeams","teamList","linkBase","articles","article","date","replaceImages","s3LargeLink","ingress","aria-describedby","sort","a","totalMushers","data-mode","contestant","currentTeam","teamId","getTeamById","DogScroller","scrollImages","imageIdx","scrollLeft","clientWidth","nearestInt","round","diff","abs","Number","isInteger","sortByName","allDogs","dogA","find","dogB","dogId","d","text","finalText","regex","RegExp","replace","Drawer","children","onCloseClick","captureEvents","RaceTrackingMusherDetail","totalTrackLength","getClassByBib","members","m","currentUser","totals","getTotalsByTeamId","totalDistancePercent","getImage","priority","fallback","image1","displayNameShort","totalDistanceOnTrack","restPercent","restTime","raceTime","xTicks","dataLeft","legendLeft","unitLeft","xTicksRange","partSize","l","parseInputDate","day","month","x","y","followers","followRequests","findIndex","finishTime","diffToFirstFinishTime","startTime","states","distanceToBehind","distanceToForward","distanceToFirst","distanceToFinish","showXTicks","paddingLeft","yTicksLeftWidth","lineFromXzero","lineFromXmax","dataFillLeft","showYTicksLeft","yTicksLeftPostfix","avgWindowLeft","smoothLeft","elevation","Team","requestFollowTeam","teamStore","followRequest","requestSent","unFollowTeam","unollowTeam","unfollowed","getButton","skipHome","simple","isYourTeam","isFollowing","isBlocked","blockedFollowers","hasRequestedFollow","data-team","public","buttonOnly","teamAmbition","findTeamAmbition","ambition","ambitions","teamType","findTeamType","place","country","HeaderCustom","MARGIN_TOP_BACK","marginTopBack","MARGIN_BOTTOM","newTeam","TeamsDetail","dogid","preventDefault","showDog","hideDog","onUserClick","subscribeNotificationTopic","field","notificationTopics","setNotificationTopic","back","history","goBack","time","apiServer","getApiServer","loadPublicView","getPublicViews","loadAll","loadPublicTeam","loadPublicDetail","setSwipeRight","publicTeam","publicViewsGraphData","isTeamAdmin","some","hideTeam","imageHeader","publicTrophys","publicMemories","publicDogs","headerImage","s3XXLargeLink","teamImage","topic","asUrl","rel","asFacebookLink","instagram","asInstagramLink","snapchat","asSnapchatLink","imagesSponsor","fields","total","sponsors","getMarkdownOptions","description","descriptionWorkoutplan","achievements","file","isoDate","trophys","img","getTrophyImage","textHeader","descriptionHeader","Elevation","meterToFeet","confirmed","deleted","TeamLine","confirmRequest","callback","closest","confirmFollowRequest","deleteRequest","deleteFollowRequest","getUnblockButton","userId","myTeamId","isConfirmed","data-user","username","showBlockButton","storyStore","findPublicUser","displayName","isDeleted","s3MediumLink","Speed","kmtToMph","getStateColor","getStateIcon","States","hideDetail","stateDetail","showStateDetail","nextStateDetail","nextIdx","nextState","avgspeed","statespeeds","stateSpeeds","point","start","end","prevStateDetail","prevIdx","prevState","showText","currentWidth","aria-valuenow","aria-valuemin","aria-valuemax","data-idx","data-state","data-duration","data-distance","data-avgspeed","data-statespeeds","data-point","data-start","data-end","data-percent","DisplayMusher","avgDogs","speedAvg","weightedNormalizedDuration","altitude","loadIndex","viewBox","svgElevation","svgMap","stage","currentEpoch","inDate","setUTCSeconds","mouseData","Gauge","svgRef","heightAdd","prefix","centerTextX","totalY","totalX","totalTextAnchor","completedY","completedX","completedTextAnchor","strokeWidth","innerRadius","strokeWidthGauge","circumference","PI","arc","dashArray","transform","offset","textSize","textSizeSmall","xmlns","svg","preserveAspectRatio","c","gaugeBackground","cx","cy","strokeDasharray","strokeLinecap","gauge","stroke","strokeDashoffset","transition","gaugeText","dominant-baseline","text-anchor","font-size","secondary","fieldSorter","o","dir","substring","reduce","p","n","RaceLiveCheckpointResult","chooseSubmenu","toggleInfo","onClickNav","getClassById","selectedCheckpoint","checkpoints","allResultsCp","results","checkpoint","lastResultsIn","direction","lastResultsOut","lastResultsLegtimes","lastResultsScratched","prevCp","sortOrder","nextCp","prevResultsOut","nextResultsIn","topImage","cellphone","onCLick","isStartLine","distanceFromPrev","distanceToNext","requiredRestMinutes","timeEqualization","hideResults","data-submenu","res","selectedMusher","getMusherByBibId","timeused","resOut","resIn","resScratched","prevResOut","deltaSec","estTimeInNextCp","nextResIn","estTimeToNext","estTimeToCpMinutes","cpSortOrder","addDeltaSec","isFinishLine","Results","currentAvgSpeed","MusherInfo","toggleAdminInfo","showAdminInfo","currentDog","wpData","findWaypointByBib","getMusherByBibEmail","daysUntilBirthday","findNearestMushers","inFront","behind","topImage1","teamImages","sportsClub","findHarness","harness","JSON","stringify","TrackingMap","handleHistoryPointIndex","historyIdx","historyPointIndex","timerRunning","updateWaypointPosition","playHistory","raceTrackerPointTimestamp","getRaceTrackerTimestamp","playingHistory","pauseHistory","classInfo","bibs","historySteps","replayHistory","showDrawerReplay","classid","allClassIds","selectedClassId","filterByBibs","setSelectedClassId","toggleSelectedClassId","closeAllDrawers","showResults","showDrawerCheckpoint","showDrawerMusher","onMusherClick","onCpMarkerClick","cpData","selectedCheckpointId","toggleDrawerMusher","toggleDrawerCheckpoint","toggleResults","selectCheckpoint","showDrawer","onTeamClick","setReplaySpeed","parseFloat","filterByClass","toggleReplayHistory","cleanupMemoryClass","selectedMusherBib","toggleBib","checkForEnter","maxPoints","toggleLines","showLines","showHeader","drawerClassNames","drawerWidth","selectedClass","wpCheckpoints","cp","showTracking","countryRegexp","currentLocationGeocode","formattedCountry","resultsHide","getPillClass","data-id","musherId","getMusherById","mapCredits","data-speed","countryRegexpMessage"],"mappings":"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","file":"64.chunk.69fe1.js","sourcesContent":["import { h, Component } from 'preact';\nimport { useEffect } from \"preact/hooks\";\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport { Text, Localizer } from 'preact-i18n';\n\nconst initialState = {\n};\n\n@observer\nclass ListMusher extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            ...initialState,\n        };\n    }\n\n\ttoggleFocusOnMusher = (e) => {\n\t\tconst musherId = e.target.parentElement.dataset.musherid || e.target.dataset.musherid;\n\t\tconst { appState, raceStore } = this.props.stores;\n\t\tappState.toggleFocusOnMusher(parseInt(musherId, 10));\n\n\t\tconst { focusOnMushers } = appState;\n\t\traceStore.getWorkoutSummaryActiveTeams(focusOnMushers);\n\t}\n\n\ttoggleInfoOnMusher = (e) => {\n\t\tconst musherId = e.target.parentElement.dataset.musherid || e.target.dataset.musherid;\n\t\tconst { appState } = this.props.stores;\n\t\tappState.toggleInfoOnMusher(parseInt(musherId, 10));\n\t}\n\n    render() {\n\t\tconst { raceStore, appState } = this.props.stores;\n\t\tconst { team = {}, idx } = this.props;\n\t\tconst { darkmode, language = 'en', focusOnMushers = [], infoOnMushers = [] } = appState;\n\t\tconst { race } = raceStore;\n\n        const line = raceStore.getActiveTeamById(team.id);\n        const currentStages = raceStore.getWorkoutSummaryByTeam(team.id);\n        const currentClass = raceStore.getClassByTeamId(team.id);\n        const currentResults = raceStore.getWorkoutResultsByTeam(currentStages, currentClass.distance);\n        const musher = raceStore.getMusherByTeamId(team.id);\n        const image = team.images && team.images.length > 0 ? team.images[0] : {};\n        const raceClass = raceStore.getClassByTeamId(team.id);\n\n        const completed = currentResults.distanceKm / currentClass.distance * 100;\n        const hasStarted = completed > 0 ? 1 : 0;\n        const isDone = completed >= 100 ? 1 : 0;\n\n        let currentSpeed;\n        let updated;\n        let isActive;\n        if (line && line.currentLocation && line.currentLocation.coords) {\n            currentSpeed = line.currentLocation.coords.speed * 3.6;\n            updated = line.currentLocation.timestamp;\n            isActive = true;\n        }\n        let toFinish = raceClass.distance - currentResults.distanceKm;\n        if (toFinish < 0) {\n            toFinish = 0;\n        }\n\n        // const currentSpeed = util.format(line.currentLocation.coords.speed * 3.6, 1);\n        // avgDogs: 9.777777777777779\n        // distanceKm: 268.3432364824406\n        // duration: 67524.34002106966\n        // elevation: 5287.123805500813\n        // flatTotalKcal: 4971.658025959346\n        // images: Array(32) [ Proxy, Proxy, Proxy, … ]\n        // loadIndex: 1446\n        // rest: 2306\n        // speedAvg: 14.820718823260847\n        // totalKcalRelated: 1225.314525471911\n        // weightedTotalKcal: 11344.398317216459\n\n        return (<>\n            <div class='row border-top mt-2' style='font-size: 0.7em;'>\n                <div class='col-2 p-0 text-center'>\n                    <h2>{idx + 1}</h2>\n                </div>\n                <div class='col-2 p-0 text-center'>\n                    <div\n                        class={`text-center text-muted pt-2 h-100`}\n                        style={`background-image: url(\"${image.s3SmallLink}\"); background-size: cover;`}\n                        onClick={this.toggleInfoOnMusher} data-musherid={team.id}\n                    >\n                        {!image.s3SmallLink && <>\n                            <span class='font-weight-lighter' style='font-size: 35px;'>\n                                {util.ucfirst(String(musher.firstname), true)}\n                                {util.ucfirst(String(musher.lastname), true)}\n                            </span>\n                        </>}\n                    </div>\n                </div>\n                <div class='col-8'>\n                    <div class='row'>\n                        <div class='col-6 px-1'>\n                            <span class='font-weight-bold'>{musher.firstname} {musher.lastname}</span><br />\n                            <span class='font-weight-lighter'>{team.name}</span><br />\n                            {raceClass && raceClass.title && <>\n                                <span class='font-weight-lighter'>{raceClass.title}</span>\n                            </>}\n                        </div>\n                        <div class='col-3 p-0 text-center'>\n                            <span class='font-weight-lighter'>km</span><br />\n                            <span style='font-size: 2.0em;'>{util.format(currentResults.distanceKm, 0)}</span>\n                        </div>\n                        <div class='col-3 p-0 text-center'>\n                            <span class='font-weight-lighter'>to finish</span><br />\n                            <span style='font-size: 2.0em;'>\n                                {toFinish === 0 ? <i class='fas fa-flag-checkered text-success' /> : <>{util.format(toFinish, 0)}</>}\n                            </span>\n                        </div>\n                    </div>\n                    <div class='row border-top'>\n                        <div class='col-3 p-0 text-center'>\n                            <span class='font-weight-lighter'>Rest</span><br />\n                            {util.secToHms(currentResults.rest)}\n                        </div>\n                        <div class='col-3 p-0 text-center'>\n                            <span class='font-weight-lighter'>Speed</span><br />\n                            {currentSpeed ? <>{util.format(currentSpeed, 1)} km/t</> : '-'}\n                        </div>\n                        <div class='col-3 p-0 text-center'>\n                            <span class='font-weight-lighter'>Status</span><br />\n                            {line.isInProgress === 1 ? <span class='text-primary'>running</span> : ''}\n                            {line.isInProgress === 2 ? <span class='text-danger'>resting</span> : ''}\n                            {toFinish === 0 ? <>\n                                {!line.isInProgress ? <span class='text-success'>FINISH</span> : ''}\n                            </> : <>\n                                {!line.isInProgress ? <>\n                                    {hasStarted ? <span class='text-danger'>resting</span> : <span class='text-muted'>NYS</span>}\n                                </> : ''}\n                            </>}\n                            \n                        </div>\n                        <div class='col-3 p-0 text-center align-bottom'>\n                            <h5>\n                                {team.dogs && team.dogs ? util.format(team.dogs.length, 0) : '-'} <i class='fas fa-dog text-muted ml-2' />\n                            </h5>\n                        </div>\n                    </div>\n                </div>\n            </div>\n            <div class='row bg-secondary text-white' style='font-size: 0.8em;'>\n                <div class='col-6 text-left' style='font-size: 0.8em;'>\n                    {isActive && <>\n                        Updated: {util.formatDistance(updated, new Date())} ago\n                    </>}\n                </div>\n                <div class='col-6 text-right'>\n                    <span class='float-right' onClick={this.toggleFocusOnMusher} data-musherid={team.id}>{focusOnMushers.indexOf(team.id) > -1 ? <i class='fas fa-star text-warning' /> : <i class='far fa-star' />}</span>\n                    <span class='float-right mr-2' onClick={this.toggleInfoOnMusher} data-musherid={team.id}>{infoOnMushers.indexOf(team.id) > -1 ? <i class='fas fa-info-circle text-warning' /> : <i class='fas fa-info-circle' />}</span>\n\n                    {isActive && line.currentLocation.battery.level > 0 && <>\n                        <span class='float-right mr-2'>\n                            <i class='fas fa-battery-three-quarters text-muted ml-2 mr-1' />\n                            {util.format(line.currentLocation.battery.level * 100, 0)}%\n                        </span>\n                    </>}\n\n                </div>\n            </div>\n        </>);\n    }\n}\n\nexport default ListMusher;\n","import { h, Component } from 'preact';\nimport { useEffect } from \"preact/hooks\";\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport { Text, Localizer } from 'preact-i18n';\n\nfunction PageTitle(title, classes = '') {\n\tuseEffect(() => {\n\t\tdocument.title = `Homerun Race: ${title}`;\n\t}, [title]);\n\treturn <h1 class={classes}>{title}</h1>;\n}\n\nconst initialState = {\n};\n\n@observer\nclass RaceHeader extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            ...initialState,\n        };\n    }\n\n    render() {\n\t\tconst { raceStore, appState } = this.props.stores;\n\t\tconst { title } = this.props;\n\t\tconst { darkmode, language = 'en' } = appState;\n\t\tconst { race } = raceStore;\n\n\t\tconst today = new Date();\n\t\tlet status = '';\n\t\tif (today >= new Date(race.startDate) && today <= new Date(race.endDate)) {\n\t\t\tstatus = 'race';\n\t\t} else if (today >= new Date(race.signupStartDate) && today <= new Date(race.signupEndDate)) {\n\t\t\tstatus = 'signup';\n\t\t} else if (today > new Date(race.endDate)) {\n\t\t\tstatus = 'done';\n\t\t}\n\n\t\treturn (\n\t\t\t<>\n\t\t\t\t<div class='d-flex'>\n\t\t\t\t\t<div class='flex-fill'>\n\t\t\t\t\t\t{PageTitle(title, 'mb-0')}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class='flex-fill text-center d-none d-md-block'>\n\t\t\t\t\t\t<h1 class='mb-0' style='line-height: 0.8em;'><span class='font-weight-lighter' style='letter-spacing: -1px;'>{race.title}</span></h1>\n\t\t\t\t\t\t<small class=''>\n\t\t\t\t\t\t\t{race.startDate && <>{util.formatDate(race.startDate, { locale: language, hour12: false, hour: '2-digit', minute: '2-digit' })}</>}\n\t\t\t\t\t\t\t{race.endDate && <> - {util.formatDate(race.endDate, { locale: language, hour12: false, hour: '2-digit', minute: '2-digit' })}</>}\n\t\t\t\t\t\t</small>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class='flex-fill'>\n\t\t\t\t\t\t<h3 class='float-right'>\n\t\t\t\t\t\t\t{status === 'signup' && !race.liveRace && <>\n\t\t\t\t\t\t\t\t<div class='spinner-grow text-primary' role='status' />\n\t\t\t\t\t\t\t\t<span class='badge badge-primary ml-2'><Text id='races.signup-open'>Påmelding åpen</Text></span>\n\t\t\t\t\t\t\t</>}\n\t\t\t\t\t\t\t{status === 'race' && <>\n\t\t\t\t\t\t\t\t<div class='spinner-grow text-danger' role='status' />\n\t\t\t\t\t\t\t\t<span class='badge badge-danger ml-2'><Text id='races.race-in-progress'>Løp pågår</Text></span>\n\t\t\t\t\t\t\t</>}\n\t\t\t\t\t\t\t{status === 'done' && <>\n\t\t\t\t\t\t\t\t<i class='fas fa-check text-success' />\n\t\t\t\t\t\t\t\t<span class='badge badge-success ml-2'><Text id='races.race-finished'>Løp avsluttet</Text></span>\n\t\t\t\t\t\t\t</>}\n\t\t\t\t\t\t</h3>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class='d-block d-md-none'>\n\t\t\t\t\t<h4 class='mb-0' style='line-height: 0.8em;'><span class='font-weight-light' style='letter-spacing: -1px;'>{race.title}</span></h4>\n\t\t\t\t\t<small>\n\t\t\t\t\t\t{race.startDate && <>{util.formatDate(race.startDate, { locale: language, hour12: false, hour: '2-digit', minute: '2-digit' })}</>}\n\t\t\t\t\t\t{race.endDate && <> - {util.formatDate(race.endDate, { locale: language, hour12: false, hour: '2-digit', minute: '2-digit' })}</>}\n\t\t\t\t\t</small>\t\t\t\t\n\t\t\t\t</div>\n\t\t\t</>\n\t\t);\n\t}\n}\n\nexport default RaceHeader;\n","import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport { Text, Localizer } from 'preact-i18n';\nimport { toJS } from 'mobx'\n\nimport Map from '../../components/map';\n\nimport mu from '../../lib/musher-util';\n\nconst initialState = {\n\tshowAddComment: false,\n};\n\n@observer\nclass Heatmap extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            ...initialState,\n        };\n        this.updateTimer = {};\n\t\tthis.inputRef = {};\n    }\n\n\tasync loadHeatmap() {\n\t\tthis.setState({ isLoading: true });\n\t\tconst { adminStore } = this.props.stores;\n        const { raceid } = this.props;\n        await adminStore.getPublicHeatmap(raceid);\n\t\tthis.setState({ isLoading: false });\n\t}\n\n\tcomponentDidMount() {\n\t\tthis.loadHeatmap();\n\t}\n\n    // componentWillReceiveProps() {\n\t// \tthis.loadHeatmap();\n\t// }\n\n    render() {\n        const { adminStore } = this.props.stores;\n        const { waypoints, zoomToMarkers, mapid, fullscreenMap } = this.props;\n        const { publicHeatmap: heatmap } = adminStore;\n        // const heatmap = publicHeatmap.slice(0, 10);\n        // const heatmap = [[60.4433,8.8996,14],[61.384,9.1152,14],[60.42,8.9422,15]];\n\n        return (\n            <>\n                {/* heatmap: {`map-${mapid}`}<br /> */}\n                {/* {JSON.stringify(heatmap)} */}\n                <Map\n                    stores={this.props.stores}\n                    mapId={heatmap.length}\n                    heatmap={heatmap}\n                    minZoom={2}\n                    maxZoom={18}\n                    height={600}\n                    waypoints={waypoints}\n                    zoomToMarkers={zoomToMarkers}\n                    fullscreenMap={fullscreenMap}\n                    key={`map-${mapid}`}\n                />\n            </>\n        );\n    }\n}\n\nexport default Heatmap;\n","import { DivIcon, Icon } from 'leaflet';\nimport util from 'preact-util';\n\nimport mu from './musher-util';\n\nconst ICONS = {\n\tadit: new Icon({ iconUrl: './assets/svg/adit.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\tairport: new Icon({ iconUrl: './assets/svg/airport.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\tanalyse: new Icon({ iconUrl: './assets/svg/analyse.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\tarchaeological: new Icon({ iconUrl: './assets/svg/archaeological.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\tarchitecture: new Icon({ iconUrl: './assets/svg/architecture.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\tarrow_up: new Icon({ iconUrl: './assets/svg/arrow_up.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\tarrow_up_double: new Icon({ iconUrl: './assets/svg/arrow_up_double.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\tatm: new Icon({ iconUrl: './assets/svg/atm.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\tavatar: new Icon({ iconUrl: './assets/svg/avatar.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\tbag: new Icon({ iconUrl: './assets/svg/bag.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\tbar: new Icon({ iconUrl: './assets/svg/bar.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\tbarracks: new Icon({ iconUrl: './assets/svg/barracks.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\tbattlefield: new Icon({ iconUrl: './assets/svg/battlefield.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\tbeach: new Icon({ iconUrl: './assets/svg/beach.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\tbicycle: new Icon({ iconUrl: './assets/svg/bicycle.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\tboundary_stone: new Icon({ iconUrl: './assets/svg/boundary_stone.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\tbuddhism: new Icon({ iconUrl: './assets/svg/buddhism.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\tbuilding: new Icon({ iconUrl: './assets/svg/building.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\tburger: new Icon({ iconUrl: './assets/svg/burger.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\tbus: new Icon({ iconUrl: './assets/svg/bus.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\tbus_stop: new Icon({ iconUrl: './assets/svg/bus_stop.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\tcable_car: new Icon({ iconUrl: './assets/svg/cable_car.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\tcamera: new Icon({ iconUrl: './assets/svg/camera.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\tcamp_site: new Icon({ iconUrl: './assets/svg/camp_site.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\tcar: new Icon({ iconUrl: './assets/svg/car.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\tcaravan_site: new Icon({ iconUrl: './assets/svg/caravan_site.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\tcartography: new Icon({ iconUrl: './assets/svg/cartography.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\tcash: new Icon({ iconUrl: './assets/svg/cash.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\tcastle: new Icon({ iconUrl: './assets/svg/castle.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\tcastle_defensive: new Icon({ iconUrl: './assets/svg/castle_defensive.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\tcave_entrance: new Icon({ iconUrl: './assets/svg/cave_entrance.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\tcemetery: new Icon({ iconUrl: './assets/svg/cemetery.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\tchapel: new Icon({ iconUrl: './assets/svg/chapel.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\tchristianism: new Icon({ iconUrl: './assets/svg/christianism.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\tcinema: new Icon({ iconUrl: './assets/svg/cinema.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\tcinema_alt: new Icon({ iconUrl: './assets/svg/cinema_alt.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\tcity: new Icon({ iconUrl: './assets/svg/city.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\tcityhall: new Icon({ iconUrl: './assets/svg/cityhall.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\tclean: new Icon({ iconUrl: './assets/svg/clean.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\tcompass: new Icon({ iconUrl: './assets/svg/compass.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\tcompass_alt: new Icon({ iconUrl: './assets/svg/compass_alt.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\tconstruction: new Icon({ iconUrl: './assets/svg/construction.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\tcontour: new Icon({ iconUrl: './assets/svg/contour.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\tcourt_house: new Icon({ iconUrl: './assets/svg/court_house.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\tcrown: new Icon({ iconUrl: './assets/svg/crown.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\tcrucifix: new Icon({ iconUrl: './assets/svg/crucifix.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\tdata: new Icon({ iconUrl: './assets/svg/data.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\tdatabase: new Icon({ iconUrl: './assets/svg/database.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\tdentist: new Icon({ iconUrl: './assets/svg/dentist.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\tdisabled: new Icon({ iconUrl: './assets/svg/disabled.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\tdislike: new Icon({ iconUrl: './assets/svg/dislike.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\tdownload: new Icon({ iconUrl: './assets/svg/download.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\tdrag_lift: new Icon({ iconUrl: './assets/svg/drag_lift.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\tdrop: new Icon({ iconUrl: './assets/svg/drop.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\teye: new Icon({ iconUrl: './assets/svg/eye.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\tfacebook: new Icon({ iconUrl: './assets/svg/facebook.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\tfire: new Icon({ iconUrl: './assets/svg/fire.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\tfishing: new Icon({ iconUrl: './assets/svg/fishing.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\tflag: new Icon({ iconUrl: './assets/svg/flag.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\tforbidden: new Icon({ iconUrl: './assets/svg/forbidden.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\tfort: new Icon({ iconUrl: './assets/svg/fort.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\tfountain: new Icon({ iconUrl: './assets/svg/fountain.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\tfuel: new Icon({ iconUrl: './assets/svg/fuel.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\tfuel_alt: new Icon({ iconUrl: './assets/svg/fuel_alt.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\tgallery: new Icon({ iconUrl: './assets/svg/gallery.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\tgear: new Icon({ iconUrl: './assets/svg/gear.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\tgithub: new Icon({ iconUrl: './assets/svg/github.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\tgo: new Icon({ iconUrl: './assets/svg/go.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\tgolf: new Icon({ iconUrl: './assets/svg/golf.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\theart: new Icon({ iconUrl: './assets/svg/heart.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\thelicopter: new Icon({ iconUrl: './assets/svg/helicopter.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\thome: new Icon({ iconUrl: './assets/svg/home.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\thospital: new Icon({ iconUrl: './assets/svg/hospital.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\thostel: new Icon({ iconUrl: './assets/svg/hostel.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\thotel: new Icon({ iconUrl: './assets/svg/hotel.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\thotel_alt: new Icon({ iconUrl: './assets/svg/hotel_alt.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\tice_ring: new Icon({ iconUrl: './assets/svg/ice_ring.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\tinformation: new Icon({ iconUrl: './assets/svg/information.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\tinternet: new Icon({ iconUrl: './assets/svg/internet.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\tinvisible: new Icon({ iconUrl: './assets/svg/invisible.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\tislamism: new Icon({ iconUrl: './assets/svg/islamism.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\tisland: new Icon({ iconUrl: './assets/svg/island.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\tjudaism: new Icon({ iconUrl: './assets/svg/judaism.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\tlaptop: new Icon({ iconUrl: './assets/svg/laptop.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\tlibrary: new Icon({ iconUrl: './assets/svg/library.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\tlighthouse: new Icon({ iconUrl: './assets/svg/lighthouse.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\tlike: new Icon({ iconUrl: './assets/svg/like.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\tlinkedin: new Icon({ iconUrl: './assets/svg/linkedin.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\tlion: new Icon({ iconUrl: './assets/svg/lion.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\tlock: new Icon({ iconUrl: './assets/svg/lock.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\tmagnifier: new Icon({ iconUrl: './assets/svg/magnifier.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\tmall: new Icon({ iconUrl: './assets/svg/mall.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\tmap: new Icon({ iconUrl: './assets/svg/map.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\tmapkey: new Icon({ iconUrl: './assets/svg/mapkey.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\tmapshakers: new Icon({ iconUrl: './assets/svg/mapshakers.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\tmarina: new Icon({ iconUrl: './assets/svg/marina.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\tmarker: new Icon({ iconUrl: './assets/svg/marker.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\tmarket_place: new Icon({ iconUrl: './assets/svg/market_place.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\tmine: new Icon({ iconUrl: './assets/svg/mine.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\tmonument: new Icon({ iconUrl: './assets/svg/monument.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\tmountain: new Icon({ iconUrl: './assets/svg/mountain.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\tmuseum: new Icon({ iconUrl: './assets/svg/museum.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\tmusic: new Icon({ iconUrl: './assets/svg/music.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\tnature: new Icon({ iconUrl: './assets/svg/nature.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\tnocamera: new Icon({ iconUrl: './assets/svg/nocamera.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\tnonsmoking: new Icon({ iconUrl: './assets/svg/nonsmoking.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\tnorth: new Icon({ iconUrl: './assets/svg/north.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\tnorth_alt: new Icon({ iconUrl: './assets/svg/north_alt.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\tnorth_alt_II: new Icon({ iconUrl: './assets/svg/north_alt_II.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\tnorth_alt_III: new Icon({ iconUrl: './assets/svg/north_alt_III.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\toppositeway: new Icon({ iconUrl: './assets/svg/oppositeway.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\tparking: new Icon({ iconUrl: './assets/svg/parking.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\tpharmacy: new Icon({ iconUrl: './assets/svg/pharmacy.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\tpicnic_site: new Icon({ iconUrl: './assets/svg/picnic_site.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\tpitch: new Icon({ iconUrl: './assets/svg/pitch.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\tplayground: new Icon({ iconUrl: './assets/svg/playground.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\tplayground_alt: new Icon({ iconUrl: './assets/svg/playground_alt.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\tpolice: new Icon({ iconUrl: './assets/svg/police.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\tpost_office: new Icon({ iconUrl: './assets/svg/post_office.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\tpub: new Icon({ iconUrl: './assets/svg/pub.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\trestaurant: new Icon({ iconUrl: './assets/svg/restaurant.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\trocks: new Icon({ iconUrl: './assets/svg/rocks.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\truins: new Icon({ iconUrl: './assets/svg/ruins.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\tsaddle: new Icon({ iconUrl: './assets/svg/saddle.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\tsailboat: new Icon({ iconUrl: './assets/svg/sailboat.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\tschool: new Icon({ iconUrl: './assets/svg/school.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\tseal: new Icon({ iconUrl: './assets/svg/seal.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\tshelter: new Icon({ iconUrl: './assets/svg/shelter.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\tsinkhole: new Icon({ iconUrl: './assets/svg/sinkhole.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\tskype: new Icon({ iconUrl: './assets/svg/skype.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\tsmartphone: new Icon({ iconUrl: './assets/svg/smartphone.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\tsmoking: new Icon({ iconUrl: './assets/svg/smoking.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\tsport_centre: new Icon({ iconUrl: './assets/svg/sport_centre.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\tspring: new Icon({ iconUrl: './assets/svg/spring.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\tsquare: new Icon({ iconUrl: './assets/svg/square.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\tstadium: new Icon({ iconUrl: './assets/svg/stadium.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\tstar: new Icon({ iconUrl: './assets/svg/star.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\tstop: new Icon({ iconUrl: './assets/svg/stop.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\tstupa: new Icon({ iconUrl: './assets/svg/stupa.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\tsupermarket: new Icon({ iconUrl: './assets/svg/supermarket.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\tswimming_pool: new Icon({ iconUrl: './assets/svg/swimming_pool.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\ttelephone: new Icon({ iconUrl: './assets/svg/telephone.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\ttheatre: new Icon({ iconUrl: './assets/svg/theatre.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\tticket: new Icon({ iconUrl: './assets/svg/ticket.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\ttoilet: new Icon({ iconUrl: './assets/svg/toilet.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\ttower: new Icon({ iconUrl: './assets/svg/tower.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\ttown: new Icon({ iconUrl: './assets/svg/town.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\ttraffic_signal: new Icon({ iconUrl: './assets/svg/traffic_signal.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\ttrain: new Icon({ iconUrl: './assets/svg/train.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\ttram: new Icon({ iconUrl: './assets/svg/tram.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\ttram_stop: new Icon({ iconUrl: './assets/svg/tram_stop.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\ttree_cinofer: new Icon({ iconUrl: './assets/svg/tree_cinofer.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\ttree_leaf: new Icon({ iconUrl: './assets/svg/tree_leaf.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\ttriangle: new Icon({ iconUrl: './assets/svg/triangle.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\tunderground: new Icon({ iconUrl: './assets/svg/underground.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\tunesco: new Icon({ iconUrl: './assets/svg/unesco.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\tuniversity: new Icon({ iconUrl: './assets/svg/university.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\tupload: new Icon({ iconUrl: './assets/svg/upload.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\tviewpoint: new Icon({ iconUrl: './assets/svg/viewpoint.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\tviewtower: new Icon({ iconUrl: './assets/svg/viewtower.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\tvillage: new Icon({ iconUrl: './assets/svg/village.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\tvineyard: new Icon({ iconUrl: './assets/svg/vineyard.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\tvolcano: new Icon({ iconUrl: './assets/svg/volcano.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\twater_tower: new Icon({ iconUrl: './assets/svg/water_tower.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\twater_well: new Icon({ iconUrl: './assets/svg/water_well.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\twatermill: new Icon({ iconUrl: './assets/svg/watermill.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\twaterpark: new Icon({ iconUrl: './assets/svg/waterpark.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\twaterwork: new Icon({ iconUrl: './assets/svg/waterwork.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\twayside_cross: new Icon({ iconUrl: './assets/svg/wayside_cross.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\twind_generator: new Icon({ iconUrl: './assets/svg/wind_generator.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\twindmill: new Icon({ iconUrl: './assets/svg/windmill.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n\tzoo: new Icon({ iconUrl: './assets/svg/zoo.svg', iconSize: [30, 30], iconAnchor: [10, 30] }),\n}\n\nclass Icons {\n    static get(icon) {\n        return ICONS[icon];\n    }\n\n    static list() {\n        return Object.keys(ICONS);\n    }\n\n\tstatic getDiv({ icon, title, body, color, textColor = '#333333', borderColor = 0, iconWidth = 150, iconHeight = 70 }) {\n\t\tconst id = `img-${util.randomPassword()}`;\n\t\tconst { r, g, b } = util.hsl2Rgb(color, 100, 60);\n\t\tconst { r: wr, g: wg, b: wb } = util.hsl2Rgb(100 - borderColor, 100, 50);\n\t\treturn new DivIcon({\n\t\t\ticonSize: [iconWidth, iconHeight + 30],\n\t\t\ticonAnchor: [15, iconHeight + 30],\n\t\t\tclassName: 'my-div-icon',\n\t\t\thtml: `<div id='${id}' style='width: ${iconWidth}px; height: ${iconHeight + 30}px; line-height: 1.1em;'>\n\t\t\t\t<style>\n\t\t\t\t\t#${id} .map-marker:after {\n\t\t\t\t\t\tborder-top-color: ${color};\n\t\t\t\t\t}\n\t\t\t\t</style>\n\t\t\t\t<div class='map-marker text-white p-1' style='color: ${textColor}; background-color: ${color}; height: ${iconHeight}px;'>\n\t\t\t\t\t<nobr><strong>${title}</strong></nobr><br />\n\t\t\t\t\t<span class='font-weight-light'><nobr>${body}</nobr></span>\n\t\t\t\t</div>\n\t\t\t</div>`,\n\t\t});\n    }\n\n\tstatic getRaceMarker({\n\t\ticon,\n\t\tbib,\n\t\tspeed = '',\n\t\tbearing = '',\n\t\trank,\n\t\tflag = '',\n\t\timage,\n\t\ttitle,\n\t\tbody,\n\t\tcolor,\n\t\ttextColor = '#333333',\n\t\tborderColor = 0,\n\t\ticonWidth = 180,\n\t\ticonHeight = 15,\n\t\ticonAnchorX = 5,\n\t\ticonAnchorY = 5,\n\t\timageCirlceRadius = 10,\n\n\t\tlineHeight = '0.9em',\n\t\tfontSize = '0.9em',\n\t\tpaddingTop = '3px',\n\t\tpaddingBottom = '3px',\n\n\t\tlargeMarkers,\n\n\t\tmapChecked,\n\t\ttitlePrefix = '',\n\t}) {\n\t\tconst id = `img-${util.randomPassword()}`;\n\t\tconst { r, g, b } = util.hsl2Rgb(color, 100, 60);\n\t\tconst { r: wr, g: wg, b: wb } = util.hsl2Rgb(100 - borderColor, 100, 50);\n\n\t\tconst dotColor = mu.getRankingColor(rank);\n\t\tconst mapIsDark = /dark/i.test(mapChecked);\n\n\n\t\tlet imageCircle = image ? `\n\t\t\t<div\n\t\t\t\tclass='rounded-circle imageRounded imageRoundedSmallIcon'\n\t\t\t\tstyle='background-image: url(\"${image}\"); background-size: cover; border: 1px ${dotColor} solid;'\n\t\t\t>\n\t\t\t\t&nbsp;\n\t\t\t</div>\n\t\t` : '';\n\t\timageCircle = bib || rank ? `\n\t\t\t<div\n\t\t\t\tclass='px-0 text-center' style='background-color: ${dotColor ? dotColor : ''}'\n\t\t\t>\n\t\t\t\t${bib || rank}\n\t\t\t</div>\n\t\t` : imageCircle;\n\t\treturn new DivIcon({\n\t\t\ticonSize: [iconWidth, iconHeight],\n\t\t\ticonAnchor: [iconAnchorX, iconAnchorY],\n\t\t\tclassName: 'my-div-icon',\n\t\t\thtml: iconAnchorX > 100 ? `\n\t\t\t\t<div class='d-flex flex-nowrap overflow-hidden justify-content-end' id='${id}' style='width: ${iconWidth}px; height: ${iconHeight}px; line-height: ${lineHeight}; font-size: ${fontSize};'>\n\t\t\t\t\t<div\n\t\t\t\t\t\tclass='${mapIsDark ? 'text-white' : 'text-dark'} pl-3 pr-1 rounded-pill-left rounded-none ${mapIsDark ? 'bg-dark' : 'bg-white'} overflow-hidden'\n\t\t\t\t\t\tstyle='padding-top: ${paddingTop}; padding-bottom: ${paddingBottom};'\n\t\t\t\t\t>\n\t\t\t\t\t\t<nobr>\n\t\t\t\t\t\t\t${titlePrefix} <strong>${title}</strong> ${flag}\n\t\t\t\t\t\t</nobr>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div\n\t\t\t\t\t\tclass='text-white font-weight-bolder ${largeMarkers ? 'pr-3 pl-2' : 'pr-2 pl-1'} rounded-pill-right rounded-none'\n\t\t\t\t\t\tstyle='background-color: ${dotColor ? dotColor : ''}; padding-top: ${paddingTop}; padding-bottom: ${paddingBottom};'\n\t\t\t\t\t>\n\t\t\t\t\t\t${imageCircle}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class='rounded rounded-circle ml-2 mt-1' style='width: ${imageCirlceRadius}px; height: ${imageCirlceRadius}px; background-color: ${dotColor};'>\n\t\t\t\t\t\t&nbsp;\n\t\t\t\t\t</div>\n\t\t\t\t</div>\t\t\t\n\t\t\t` : `\n\t\t\t\t<div class='d-flex flex-nowrap overflow-hidden' id='${id}' style='width: ${iconWidth}px; height: ${iconHeight}px; line-height: ${lineHeight}; font-size: ${fontSize};'>\n\t\t\t\t\t<div class='rounded rounded-circle mr-2 mt-1' style='width: ${imageCirlceRadius}px; height: ${imageCirlceRadius}px; background-color: ${dotColor};'>\n\t\t\t\t\t\t&nbsp;\n\t\t\t\t\t</div>\n\t\t\t\t\t<div\n\t\t\t\t\t\tclass='text-white font-weight-bolder ${largeMarkers ? 'pl-3 pr-2' : 'pl-2 pr-1'} rounded-pill-left rounded-none'\n\t\t\t\t\t\tstyle='background-color: ${dotColor ? dotColor : ''}; padding-top: ${paddingTop}; padding-bottom: ${paddingBottom};'\n\t\t\t\t\t>\n\t\t\t\t\t\t${imageCircle}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div\n\t\t\t\t\t\tclass='${mapIsDark ? 'text-white' : 'text-dark'} pr-3 pl-1 rounded-pill-right rounded-none ${mapIsDark ? 'bg-dark' : 'bg-white'} overflow-hidden'\n\t\t\t\t\t\tstyle='padding-top: ${paddingTop}; padding-bottom: ${paddingBottom};'\n\t\t\t\t\t>\n\t\t\t\t\t\t<nobr>\n\t\t\t\t\t\t\t${flag} <strong>${title}</strong> ${titlePrefix}\n\t\t\t\t\t\t</nobr>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t`,\n\t\t});\n\t\t// ${speed ? `${util.format(speed, 1)} km/t` : ''} ${bearing ? mu.windDirection(bearing) : ''}\n    }\n\n\tstatic getDistanceMarker({ title = '', body = '', color, textColor = '#888', borderColor = 0 }) {\n\t\tconst id = `img-${util.randomPassword()}`;\n\t\treturn new DivIcon({\n\t\t\ticonSize: [20, 20],\n\t\t\ticonAnchor: [10, 10],\n\t\t\tclassName: 'my-div-icon',\n\t\t\thtml: `<div id='${id}' class='rounded-circle bg-primary text-white text-center' style='width: 20px; height: 20px;'>\n\t\t\t\t<strong>${title}</strong><br />\n\t\t\t\t<span class='font-weight-light'>${body}</span>\n\t\t\t</div>`,\n\t\t});\n    }\n\n\t// static getMarker({ title = '', body = '', color, textColor = '#888', borderColor = 0 }) {\n\t// \tconst id = `img-${util.randomPassword()}`;\n\t// \treturn new DivIcon({\n\t// \t\ticonSize: [10, 10],\n\t// \t\ticonAnchor: [5, 5],\n\t// \t\tclassName: 'my-div-icon',\n\t// \t\thtml: `<div id='${id}' class='rounded-circle bg-primary text-white text-center' style='width: 10px; height: 10px;'>\n\t// \t\t\t<strong>${title}</strong><br />\n\t// \t\t\t<span class='font-weight-light'>${body}</span>\n\t// \t\t</div>`,\n\t// \t});\n    // }\n\tstatic getMarker({\n\t\ticon,\n\t\tbib,\n\t\trank,\n\t\tflag = '',\n\t\timage,\n\t\ttitle,\n\t\tbody,\n\t\tcolor = '#a0a0a0',\n\t\ttextColor = '#333333',\n\t\tborderColor = 0,\n\n\t\ticonWidth = 250,\n\t\ticonHeight = 20,\n\t\ticonAnchorX = 7,\n\t\ticonAnchorY = 7,\n\n\t\timageCirlceRadius = 10,\n\n\t\tlineHeight = '1.0em',\n\t\tfontSize = '1.0em',\n\t\tpaddingTop = '3px',\n\t\tpaddingBottom = '3px',\n\n\t\tmapChecked,\n\t}) {\n\t\tconst id = `img-${util.randomPassword()}`;\n\t\tconst { r, g, b } = util.hsl2Rgb(color, 100, 60);\n\t\tconst { r: wr, g: wg, b: wb } = util.hsl2Rgb(100 - borderColor, 100, 50);\n\n\t\tconst dotColor = mu.getRankingColor(bib || rank) || '#808080';\n\t\tconst mapIsDark = /dark/i.test(mapChecked);\n\n\t\tlet imageCircle = image ? `\n\t\t\t<div\n\t\t\t\tclass='rounded-circle imageRounded imageRoundedSmallIcon'\n\t\t\t\tstyle='background-image: url(\"${image}\"); background-size: cover; border: 1px ${dotColor} solid;'\n\t\t\t>\n\t\t\t\t&nbsp;\n\t\t\t</div>\n\t\t` : '';\n\t\timageCircle = bib || rank ? `\n\t\t\t<div\n\t\t\t\tclass='rounded-pill-both px-1 text-center ${dotColor ? '' : 'bg-primary'}' style='background-color: ${dotColor ? dotColor : ''}'\n\t\t\t>\n\t\t\t\t${bib || rank}\n\t\t\t</div>\n\t\t` : imageCircle;\n\t\treturn new DivIcon({\n\t\t\ticonSize: [iconWidth, iconHeight],\n\t\t\ticonAnchor: [iconAnchorX, iconAnchorY],\n\t\t\tclassName: 'my-div-icon',\n\t\t\thtml: `\n\t\t\t\t<div class='d-flex flex-nowrap overflow-hidden' id='${id}' style='width: ${iconWidth}px; height: ${iconHeight}px; line-height: ${lineHeight}; font-size: ${fontSize};'>\n\t\t\t\t\t<div class='rounded rounded-circle mr-2 mt-1' style='width: ${imageCirlceRadius}px; height: ${imageCirlceRadius}px; background-color: ${dotColor};'>\n\t\t\t\t\t\t&nbsp;\n\t\t\t\t\t</div>\n\t\t\t\t\t<div\n\t\t\t\t\t\tclass='${mapIsDark ? 'text-white' : 'text-dark'} px-3 pl-1 rounded-pill-both rounded-none ${mapIsDark ? 'bg-info' : 'bg-info'} overflow-hidden'\n\t\t\t\t\t\tstyle='padding-top: ${paddingTop}; padding-bottom: ${paddingBottom};'\n\t\t\t\t\t>\n\t\t\t\t\t\t<nobr>${flag} <strong>${title}</strong></nobr>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t`,\n\t\t});\n    }\n\n\n\tstatic getSmallMarker({ title = '', body = '', color, textColor = '#888', borderColor = 0 }) {\n\t\tconst id = `img-${util.randomPassword()}`;\n\t\treturn new DivIcon({\n\t\t\ticonSize: [6, 6],\n\t\t\ticonAnchor: [3, 3],\n\t\t\tclassName: 'my-div-icon',\n\t\t\thtml: `<div id='${id}' class='rounded-circle bg-success text-white text-center' style='width: 5px; height: 5px;'>\n\t\t\t\t<strong>${title}</strong><br />\n\t\t\t\t<span class='font-weight-light'>${body}</span>\n\t\t\t</div>`,\n\t\t});\n    }\n\n}\n\nexport default Icons;\n","import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport { Text, Localizer } from 'preact-i18n';\n\nimport mu from '../../lib/musher-util';\n\nfunction displayDistance(distance) {\n\tif (distance < 5) {\n\t\treturn util.format(distance, 2);\n\t}\n\tif (distance < 10) {\n\t\treturn util.format(distance, 1);\n\t}\n\treturn util.format(distance, 1);\n}\n\nfunction kmToMiles(value) {\n    return 0.621371 * value;\n}\n\n@observer\nclass Distance extends Component {\n    render() {\n\t\tconst { value = 0, smallUnit } = this.props;\n\t\tconst { userStore } = this.props.stores;\n\t\tconst { user } = userStore;\n\t\tconst { settings = {} } = user;\n\n        if (settings.imperial) {\n            return (<>\n                <nobr>\n\t\t\t\t\t{displayDistance(kmToMiles(value))} {smallUnit ? <><small><small><small class='ml-0 text-muted'>mi</small></small></small></> : <>mi</>}\n\t\t\t\t</nobr>\n            </>);\n        }\n\n\t\treturn (<>\n\t\t\t<nobr>\n\t            {displayDistance(value)} {smallUnit ? <><small><small><small class='ml-0 text-muted'>km</small></small></small></> : <>km</>}\n\t\t\t</nobr>\n\t    </>);\n    }\n}\n\nexport default Distance;\n","import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport { Text, Localizer } from 'preact-i18n';\nimport linkstate from 'linkstate';\n\nimport Header from './header';\nimport Heatmap from '../../../components/public/heatmap';\n\nimport mu from '../../../lib/musher-util';\nconst MARGIN_TOP = mu.marginTop(true);\nconst MARGIN_BOTTOM = mu.marginBottom();\nconst SUB_MENU_MARGIN_TOP = mu.subMenuMarginTop();\n\nconst initialState = {\n\tisLoading: false,\n\temail: '',\n\tsubmenu: 'ads',\n\tjwtToken: util.getJwtToken(),\n};\n\n@observer\nclass PublicRaceDetail extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            ...initialState,\n        };\n    }\n\n\trender() {\n\t\tconst { appState } = this.props.stores;\n\t\tconst { raceid, path } = this.props;\n\t\tconst { darkmode } = appState;\n\n        let currentMenu = 'default';\n        if (path.match(/\\/race\\/:raceid$/)) {\n            currentMenu = 'default';\n        } else if (path.match(/\\/race\\/:raceid\\/mushers$/)) {\n            currentMenu = 'mushers';\n        } else if (path.match(/\\/race\\/:raceid\\/results$/)) {\n            currentMenu = 'results';\n        } else if (path.match(/\\/race\\/:raceid\\/media$/)) {\n            currentMenu = 'media';\n        } else if (path.match(/\\/race\\/:raceid\\/tracking$/)) {\n            currentMenu = 'tracking';\n        }\n\n\t\treturn (\n\t\t\t<>\t\t\t\t\n                <div class='row fixed-top pr-3' style={`margin-top: 40px; background-color: ${darkmode ? '#191d21' : '#f8f9fa'};`}>\n\n                    <div class='col-12 my-2 mx-2'>\n                        <ul class='nav nav-pills nav-fill flex-nowrap'>\n                            <li class='nav-item' style='max-width: 20%;'>\n                                <a href={`/race/${raceid}`} class={`text-overflow nav-link ${currentMenu === 'default' ? 'active' : ''}`}>\n                                    <nobr><i class='fas fa-info-circle' /> <Text id='race.therace'>Løpet</Text></nobr>\n                                </a>\n                            </li>\n                            <li class='nav-item' style='max-width: 20%;'>\n                                <a href={`/race/${raceid}/mushers`} class={`text-overflow nav-link ${currentMenu === 'mushers' ? 'active' : ''}`}>\n                                    <nobr><i class='fas fa-users' /> <Text id='race.mushers'>Deltakere</Text></nobr>\n                                </a>\n                            </li>\n                            <li class='nav-item' style='max-width: 20%;'>\n                                <a href={`/race/${raceid}/results`} class={`text-overflow nav-link ${currentMenu === 'results' ? 'active' : ''}`}>\n                                    <nobr><i class='fas fa-poll' /> <Text id='race.results'>Resultater</Text></nobr>\n                                </a>\n                            </li>\n                            <li class='nav-item' style='max-width: 20%;'>\n                                <a href={`/race/${raceid}/media`} class={`text-overflow nav-link ${currentMenu === 'media' ? 'active' : ''}`}>\n                                    <nobr><i class='fas fa-images' /> <Text id='race.media'>Bilder</Text></nobr>\n                                </a>\n                            </li>\n                            <li class='nav-item' style='max-width: 20%;'>\n                                <a href={`/race/${raceid}/tracking`} class={`text-overflow nav-link ${currentMenu === 'tracking' ? 'active' : ''}`}>\n                                    <nobr><i class='fas fa-map-marked-alt' /> <Text id='race.tracking'>Tracking</Text></nobr>\n                                </a>\n                            </li>\n                        </ul>\n                    </div>\n\n\n                    {/* <div class={`col text-center subtopmenu ${path.match(/\\/race\\/:raceid$/) ? 'border-bottom border-primary' : ''}`}>\n                        <a href={`/race/${raceid}`} class={`text-${path.match(/\\/race\\/:raceid$/) ? 'primary' : 'secondary'} stretched-link`}>\n                            <nobr><i class='fas fa-chart-line' /> <Text id='race.therace'>Løpet</Text></nobr>\n                        </a>\n                    </div>\n                    <div class={`col text-center subtopmenu ${path.match(/\\/race\\/:raceid\\/mushers$/) ? 'border-bottom border-primary' : ''}`}>\n                        <a href={`/race/${raceid}/mushers`} class={`text-${path.match(/\\/race\\/:raceid\\/mushers$/) ? 'primary' : 'secondary'} stretched-link`}>\n                            <nobr><i class='fas fa-chart-line' /> <Text id='race.mushers'>Deltakere</Text></nobr>\n                        </a>\n                    </div>\n                    <div class={`col text-center subtopmenu ${path.match(/\\/race\\/:raceid\\/results$/) ? 'border-bottom border-primary' : ''}`}>\n                        <a href={`/race/${raceid}/results`} class={`text-${path.match(/\\/race\\/:raceid\\/results$/) ? 'primary' : 'secondary'} stretched-link`}>\n                            <nobr><i class='fas fa-chart-line' /> <Text id='race.results'>Resultater</Text></nobr>\n                        </a>\n                    </div>\n                    <div class={`col text-center subtopmenu ${path.match(/\\/race\\/:raceid\\/tracking$/) ? 'border-bottom border-primary' : ''}`}>\n                        <a href={`/race/${raceid}/tracking`} class={`text-${path.match(/\\/race\\/:raceid\\/tracking$/) ? 'primary' : 'secondary'} stretched-link`}>\n                            <nobr><i class='fas fa-chart-line' /> <Text id='race.tracking'>Tracking</Text></nobr>\n                        </a>\n                    </div> */}\n                </div>\n\t\t\t</>\n\t\t);\n\t}\n}\n\nexport default PublicRaceDetail;\n","import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport { Text, Localizer } from 'preact-i18n';\n\nimport mu from '../../lib/musher-util';\nconst MARGIN_TOP = mu.marginTop(false);\nconst MARGIN_BOTTOM = mu.marginBottom();\n\nconst initialState = {};\n\n@observer\nclass Loading extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            ...initialState,\n        };\n    }\n\n    render() {\n        const { goto, gotoTitle, routerName } = this.props;\n        return (\n            <div class='row h-100'>\n                <div class='col-12 text-center my-auto'>\n                    <div class='spinner-border text-primary' style='width: 8rem; height: 8rem;' role='status'>\n                        <span class='sr-only'><Text id='home.loading'>Loading...</Text></span>\n                    </div>\n                    <h3 class='mt-4'><Text id='home.loading'>Loading...</Text></h3>\n                    {goto && <>\n                        <a class='my-4 btn btn-primary btn-lg btn-block' native href={goto}>{gotoTitle} <i class='fas fa-angle-double-right ml-2' /></a>\n                        <small class='text-muted'>{routerName}</small>\n                    </>}\n                </div>\n            </div>\n        );\n    }\n}\n\nexport default Loading;\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"pointerCursor\":\"pointerCursor__2Gpay\",\"marker-cluster-custom\":\"marker-cluster-custom__1z-5y\"};","import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport { Text, Localizer } from 'preact-i18n';\nimport { toJS } from 'mobx'\n\nimport Map from '../../components/map';\n\nimport mu from '../../lib/musher-util';\n\nconst initialState = {\n\tshowAddComment: false,\n};\n\n@observer\nclass Trackmap extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            ...initialState,\n        };\n        this.updateTimer = {};\n\t\tthis.inputRef = {};\n    }\n\n\tasync loadTrack(props = this.props) {\n        const { showHeatmap, raceid, allTeamIds } = props;\n        const { adminStore, trackStore, raceStore, appState } = props.stores;\n        const { selectedClassIds = [] } = appState;\n\n\t\t// this.setState({ isLoading: true });\n        if (showHeatmap) {\n            await adminStore.getPublicHeatmap(raceid, allTeamIds);\n        }\n\n        // const classId = \n        const trackIds = raceStore.getTrackIdsByClass(selectedClassIds[0]);\n\n        if (trackIds && trackIds.length > 0) {\n            trackStore.cleanupMemory();\n            await trackStore.loadPublic({ query: { idin: trackIds } });\n        }\n\t\t// this.setState({ isLoading: false });\n\t}\n\n\tcomponentDidMount() {\n\t\tthis.loadTrack();\n\t}\n\n    componentWillReceiveProps(nextProps) {\n        if (this.props.selectedClassIds !== nextProps.selectedClassIds) {\n            this.loadTrack(nextProps);\n        }\n\t}\n\n    render() {\n        const { trackStore, raceStore, appState, adminStore } = this.props.stores;\n        const { selectedClassIds = [] } = appState;\n        const {\n            waypoints, waypoints2, waypoints3, zoomToMarkers, mapid,\n            fullscreenMap,\n            onMarkerClick, onMarker2Click, onMarker3Click,\n            showHeatmap, showTracks,\n            showDistanceMarkers, groupWaypoints,\n            focusOnMushers, geoJSONs,\n            largeMarkers, isAnimatedMarkers, replaySpeed,\n        } = this.props;\n        const { tracks } = trackStore;\n        const { publicHeatmap: heatmap } = adminStore;\n        const track = tracks[0];\n        const trackIds = raceStore.getTrackIdsByClass();\n\n        // const heatmap = publicHeatmap.slice(0, 10);\n        // const heatmap = [[60.4433,8.8996,14],[61.384,9.1152,14],[60.42,8.9422,15]];\n\n        return (\n            <>\n                {/* heatmap: {`map-${mapid}`}<br /> */}\n                {/* {JSON.stringify(showTracks && track && track.gpx ? track.gpx.geoJSON : null)} */}\n                {/* {JSON.stringify(geoJSONs)} */}\n                <Map\n                    stores={this.props.stores}\n                    // mapId={mapid}\n                    heatmap={showHeatmap ? heatmap : null}\n                    track={track}\n                    geojson={showTracks && track && track.gpx ? track.gpx.geoJSON : null}\n                    gpxInfo={showTracks && track && (track.gpx || track.gpxInfo) ? (track.gpxInfo || track.gpx.gpxInfo) : null}\n                    minZoom={2}\n                    maxZoom={18}\n                    height={600}\n                    waypoints={waypoints}\n                    waypoints2={waypoints2}\n                    waypoints3={waypoints3}\n                    geoJSONs={geoJSONs}\n                    zoomToMarkers={zoomToMarkers}\n                    fullscreenMap={fullscreenMap}\n                    onMarkerClick={onMarkerClick}\n                    onMarker2Click={onMarker2Click}\n                    onMarker3Click={onMarker3Click}\n                    showTrackProfile={false}\n                    distanceMarkerSteps={'long'}\n                    showDistanceMarkers={showDistanceMarkers}\n                    groupWaypoints={groupWaypoints}\n                    focusOnMushers={focusOnMushers}\n                    showFullscreenControl={false}\n                    largeMarkers={largeMarkers}\n                    isAnimatedMarkers={isAnimatedMarkers}\n                    replaySpeed={replaySpeed}\n                    // key={`map-${mapid}-${util.getNestedValue(track, 'id')}-${trackIds.join('-')}-${selectedClassIds.join('-')}`}\n                    // key={`map-${util.getNestedValue(track, 'id')}`}\n                />\n            </>\n        );\n    }\n}\n\nexport default Trackmap;\n","import { h, Component, createRef, useEffect } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport { toJS } from 'mobx';\nimport Markdown from 'preact-markdown';\n\nimport ReactLeafletMultiOptionsPolyline from 'react-leaflet-multi-options-polyline';\n\nimport ReactLeafletDriftMarker from \"react-leaflet-drift-marker\"\n\nimport style from './style.css';\n\nimport mu from '../../lib/musher-util';\n\nconst MARKDOWN_OPTIONS = {\n\tpedantic: false,\n\tgfm: true,\n\tbreaks: true,\n\tsanitize: false,\n\tsmartLists: true,\n\tsmartypants: true,\n\txhtml: true,\n};\n\nimport {\n\tCircle,\n\tFeatureGroup,\n\tLayerGroup,\n\tLayersControl,\n\tMapContainer,\n\tMarker,\n\tPopup,\n\tRectangle,\n\tTileLayer,\n\tVideoOverlay,\n\tImageOverlay,\n\tGeoJSON,\n\tWMSTileLayer,\n    useLeaflet,\n\tScaleControl,\n\tPolyline,\n} from 'react-leaflet';\n\n// import HeatmapLayer from 'react-leaflet-heatmap-layer';\n\n// import MarkerClusterGroup from 'react-leaflet-markercluster';\n// import '../../../node_modules/react-leaflet-markercluster/dist/styles.min.css';\n\n// import FullscreenControl from 'react-leaflet-fullscreen';\n// import '../../../node_modules/react-leaflet-fullscreen/dist/styles.css';\n\n// import Control from 'react-leaflet-control';\n\nconst { BaseLayer, Overlay } = LayersControl;\n\nimport icons from '../../lib/icons';\nimport '../../../node_modules/leaflet/dist/leaflet.css';\n\nimport L from 'leaflet';\n\ndelete L.Icon.Default.prototype._getIconUrl;\nL.Icon.Default.mergeOptions({\n    iconRetinaUrl: require('../../../node_modules/leaflet/dist/images/marker-icon-2x.png'),\n    iconUrl: require('../../../node_modules/leaflet/dist/images/marker-icon.png'),\n    shadowUrl: require('../../../node_modules/leaflet/dist/images/marker-shadow.png')\n});\n\nconst createClusterCustomIcon = function (cluster) {\n  return L.divIcon({\n    html: `<span>${cluster.getChildCount()}</span>`,\n    className: style['marker-cluster-custom'],\n    iconSize: L.point(40, 40, true),\n  });\n};\n\nfunction normalizeRange(val, min, max, newMin, newMax) {\n    return newMin + (val - min) * (newMax - newMin) / (max - min);\n}\n\nfunction kmtToMph(value) {\n    return 0.621371 * value;\n}\n\nfunction kmToMiles(value) {\n    return 0.621371 * value;\n}\n\nfunction meterToFeet(value) {\n    return 3.28084 * value;\n}\n\nfunction celciusToFahrenheit(value) {\n    return ((value * 9/5) + 32);\n}\n\nconst API_OPEN_WEATHERMAP_KEY = '75cd92317c98db6873031cd2d8de75c5';\nconst INCLINE_STEP = 1;\nconst MAX_HSL_COLOR = 230;\n\n@observer\nclass App extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\thasLocation: false,\n\t\t\tvisibleLayers: {\n\t\t\t\tWindspeed: false,\n\t\t\t},\n\t\t\tmapCenter: [],\n\t\t\tmapZoom: 10,\n\t\t\trangeSteps: INCLINE_STEP,\n\t\t\tmaxHslColor: MAX_HSL_COLOR,\n\t\t\thasZoomedToMarkers: false,\n\t\t};\n\t\t// const { waypointStore } = this.props.stores;\n\t\t// waypointStore.load();\n\t}\n\n\tmapRef = createRef();\n\tpolyRef = createRef();\n\n\thandleViewportChanged = (e) => {\n\t\t// console.log('onViewportChanged', e);\n\t\tthis.setState({\n\t\t\tmapCenter: e.center,\n\t\t\tmapZoom: e.zoom,\n\t\t})\n\t}\n\n\thandleLocationFound = (e) => {\n\t\tif (e.latlng) {\n\t\t\tthis.setState({\n\t\t\t\thasLocation: true,\n\t\t\t\tlatlng: e.latlng,\n\t\t\t});\n\t\t}\n\t}\n\n\tgeoJSONStyle() {\n\t\treturn {\n\t\t\tcolor: '#0347A2',\n\t\t\tweight: 8,\n\t\t\tfillOpacity: 0.5,\n\t\t\tfillColor: '#0347A2',\n\t\t}\n\t}\n\n\tgeoJSONStyleList(idx) {\n\t\tconst color = mu.getRankingColor(idx + 1);\n\t\treturn {\n\t\t\tcolor,\n\t\t\tweight: 3,\n\t\t\tfillOpacity: 0.5,\n\t\t\tfillColor: color,\n\t\t}\n\t}\n\n\tonEachFeature = (feature, layer) => {\n\t\tconst { gpxInfo = {} } = this.props;\n\t\tconst popupContent = `<Popup>\n\t\t\t<h5>Details</h5>\n\t\t\t<ul>\n\t\t\t\t<li>Total distance: ${util.format(gpxInfo.totalDistance, 2)} km</li>\n\t\t\t\t<li>Max speed: ${util.format(gpxInfo.maxSpeed, 1)} km/t</li>\n\t\t\t\t<li>Avg speed: ${util.format(gpxInfo.avgSpeed, 1)} km/t</li>\n\t\t\t\t<li>Ascent: ${util.format(gpxInfo.ascent || gpxInfo.calculatedAscend, 0)} m</li>\n\t\t\t\t<li>Descent: ${util.format(gpxInfo.decent || gpxInfo.calculatedDescend, 0)} m</li>\n\t\t\t\t<li>Duration: ${util.secToHms(gpxInfo.duration)}</li>\n\t\t\t</ul>\n\t\t</Popup>`\n\t\tlayer.bindPopup(popupContent)\n\t}\n\n\thandleClick = (e) => {\n\t\tconst { appState } = this.props.stores;\n\t\tappState.setLatlng(e.latlng);\n\t\t// this.setState({ currentPos: e.latlng });\n\t}\n\n\tzoomToGeoJSON = (e) => {\n\t\t// console.log(e, this.mapRef);\n\t\ttry {\n\t\t\tif (e.target) {\n\t\t\t\tconst map = this.mapRef;  //get native Map instance\n\t\t\t\tlet bounds = e.target.getBounds();\n\t\t\t\tif (bounds && bounds._northEast) {\n\t\t\t\t\tthis.setState({ bounds });\n\t\t\t\t\tmap.fitBounds(bounds);\n\t\t\t\t}\n\t\t\t\t// const map = this.mapRef.leafletElement;  //get native Map instance\n\t\t\t\t// map.fitBounds(bounds);\n\t\t\t}\n\t\t} catch (err) {\n\t\t\tconsole.log(err);\n\t\t}\n\t\t// if (this.geoJSONRef.leafletElement) {\n\t\t// console.log(e);\n\t\t// \tconst map = this.mapRef.leafletElement;  //get native Map instance\n\t\t// \tconst group = this.geoJSONRef.leafletElement; //get native featureGroup instance\n\t\t// \tmap.fitBounds(group.getBounds());\n\t\t// }\n\t}\n\n\tzoomToMarkers = (markers = [], force = false) => {\n\t\tconst { hasZoomedToMarkers } = this.state;\n\t\ttry {\n\t\t\t// console.log('zoomToMarkers', hasZoomedToMarkers, { markers });\n\t\t\tif ((force || !hasZoomedToMarkers) && markers.length && markers.length > 0) {\n\t\t\t\t// const map = this.mapRef.current.leafletElement;  //get native Map instance\n\t\t\t\tconst map = this.mapRef;  //get native Map instance\n\t\t\t\tconst markerBounds = L.latLngBounds([]);\n\t\t\t\tmarkers.forEach(marker => {\n\t// console.log({ marker });\n\t\t\t\t\tmarkerBounds.extend([marker.lat, marker.lng])\n\t\t\t\t});\n\t// console.log('map.fitBounds');\n\t\t\t\tmap.fitBounds(markerBounds);\n\t\t\t\tthis.setState({ hasZoomedToMarkers: true });\n\t\t\t}\n\t\t} catch (err) {\n\t\t\tconsole.log(err);\n\t\t}\n\t}\n\n\tzoomToAllMarkers = () => {\n\t\tconst { waypoints = [] } = this.props;\n\t\tconst markers = waypoints;\n\t\tthis.zoomToMarkers(markers, true);\n\t}\n\n\tzoomToFirst10Markers = () => {\n\t\tconst { waypoints = [] } = this.props;\n\t\tconst markers = waypoints.slice(0, 10);\n\t\tthis.zoomToMarkers(markers, true);\n\t}\n\n\tzoomToFirst3Markers = () => {\n\t\tconst { waypoints = [] } = this.props;\n\t\tconst markers = waypoints.slice(0, 3);\n\t\tthis.zoomToMarkers(markers, true);\n\t}\n\t\n\tzoomToFavoriteMarkers = () => {\n\t\tconst { zoomToMarkers = [], waypoints = [] } = this.props;\n\t\tconst markers = zoomToMarkers.length > 0 ? zoomToMarkers : waypoints;\n\t\tthis.zoomToMarkers(markers, true);\n\t}\n\n\t// componentDidMount() {\n\t// }\n\n\tcomponentWillReceiveProps(nextProps) {\n\t\tif (this.props.zoomToMarkers !== nextProps.zoomToMarkers) {\n\t\t\t// console.log(nextProps.zoomToMarkers)\n\t\t\tthis.zoomToMarkers(nextProps.zoomToMarkers, true);\n        } else if (this.props.waypoints !== nextProps.waypoints) {\n\t\t\tthis.zoomToMarkers(nextProps.waypoints);\n\t\t}\n\n// \t\tconst { zoomToMarkers = [], waypoints = [] } = nextProps;\n// \t\tconst { zoomToMarkers: prevZoomToMarkers = [] } = this.props;\n// // console.log('componentWillReceiveProps', JSON.stringify(zoomToMarkers.length), JSON.stringify(prevZoomToMarkers.length));\n// \t\t// if (zoomToMarkers.length !== prevZoomToMarkers.length) {\n// \t\tconst markers = zoomToMarkers.length > 0 ? zoomToMarkers : waypoints;\n// \t\tthis.zoomToMarkers(markers);\n\t\t// }\n\t}\n\n\tcomponentWillUnmount() {\n\t\t// try {\n\t\t// \tconst map = this.mapRef.current.leafletElement;  //get native Map instance\n\t\t// \tmap.remove()\n\t\t// } catch (err) {\n\t\t// \tconsole.log(err);\n\t\t// }\n\t}\n\n\toverlayAdd = (e) => {\n\t\t// console.log('overlayAdd', e);\n\t\tconst { name } = e;\n\t\tconst { visibleLayers } = this.state;\n\t\tvisibleLayers[name] = true;\n\t\tthis.setState({ visibleLayers });\n\t}\n\toverlayRemove = (e) => {\n\t\tconst { name } = e;\n\t\t// console.log('overlayRemove', e, name)\n\t\tconst { visibleLayers } = this.state;\n\t\tvisibleLayers[name] = false;\n\t\tthis.setState({ visibleLayers });\n\t}\n\n\tpolylineOptions = () => {\n\t\tconst { gpxInfo } = this.props;\n\t\tconst { rangeSteps } = this.state;\n\t\tlet { maxHslColor } = this.state;\n\t\tconst { appState } = this.props.stores;\n\t\tconst { mapColorMode, mapRangeMin, mapRangeMax } = appState;\n\n\t\tlet newRangeMin = mapRangeMin;\n\t\tlet newRangeMax = mapRangeMax;\n\n\t\tif (mapColorMode === 'speed') {\n\t\t\tif (gpxInfo && gpxInfo.speeds && gpxInfo.speeds.length > 0) {\n\t\t\t\tnewRangeMin = Math.floor(Math.min(...gpxInfo.speeds.map(e => e * 3.6)));\n\t\t\t\tnewRangeMax = Math.ceil(Math.max(...gpxInfo.speeds.map(e => e * 3.6)));\n\t\t\t}\n\t\t}\n\n\t\tconst range = util.range(newRangeMin, newRangeMax, rangeSteps);\n\t\tconst colors = range.map((e) => {\n\t\t\tconst val = normalizeRange(e, newRangeMin, newRangeMax, 0, maxHslColor);\n\t\t\tlet colorValue;\n\t\t\tif (mapColorMode === 'speed') {\n\t\t\t\tcolorValue = maxHslColor - val;\n\t\t\t} else {\n\t\t\t\tcolorValue = maxHslColor - val;\n\t\t\t}\n\t\t\tconst { r, g, b } = util.hsl2Rgb(colorValue, 100, 45);\n\t\t\treturn { color: `rgb(${r}, ${g}, ${b})` };\n\t\t});\n\n\t\tappState.setMapRange(range, newRangeMin, newRangeMax);\n\t\tappState.setMapColors(colors);\n\t\treturn colors;\n\t}\n\n\tpolylineOptionIdxFn = (latLng) => {\n\t\tconst { appState } = this.props.stores;\n\t\tconst { mapRange: altThresholds } = appState;\n\t\t// const altThresholds = util.range(MIN_INCLINE, MAX_INCLINE, INCLINE_STEP);\n\t\tfor (let i = 0; i < altThresholds.length; ++i) {\n\t\t\tif (latLng.meta <= altThresholds[i]) {\n\t\t\t\treturn i;\n\t\t\t}\n\t\t}\n\t\treturn altThresholds.length;\n\t}\n\n\tpolylinetrackPointFactory = (data) => {\n\t\tconst { gpxInfo } = this.props;\n\t\tconst { appState } = this.props.stores;\n\t\tconst { mapColorMode, mapRangeMin, mapRangeMax } = appState;\n\n\n\t\tlet dataArray = [];\n\t\tif (mapColorMode === 'speed' && gpxInfo.speeds && gpxInfo.speeds.length > 0) {\n\t\t\tdataArray = gpxInfo.speeds.map(e => e * 3.6);\n\t\t} else if (gpxInfo && gpxInfo.climbs) {\n\t\t\tdataArray = gpxInfo.climbs;\n\t\t}\n\n\t\tconst points = data.filter(e => e[0] && e[1] && e[2]).map((item, idx) => {\n\t\t\tconst trkpt = L.latLng(item[1], item[0], item[2]);\n\t\t\tif (dataArray && dataArray.length > 0) {\n\t\t\t\ttrkpt.meta = dataArray[idx] || 0;\n\t\t\t\tif (trkpt.meta > mapRangeMax) {\n\t\t\t\t\ttrkpt.meta = mapRangeMax;\n\t\t\t\t}\n\t\t\t\tif (trkpt.meta < mapRangeMin) {\n\t\t\t\t\ttrkpt.meta = mapRangeMin;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\ttrkpt.meta = 0;\n\t\t\t}\n\t\t\treturn trkpt;\n\t\t});\n\t\treturn points;\n\t}\n\n\tshowSpeed = () => {\n\t\tconst { appState } = this.props.stores;\n\t\tappState.setMapColorMode('speed');\n\t}\n\n\t// handleMarkerClick = ({ title, bib, email, e }) => {\n\thandleMarkerClick = (opt = {}) => {\n\t\tconst { onMarkerClick = ({ title, bib }) => console.log({ title, bib }) } = this.props;\n\t\ttry {\n\t\t\tonMarkerClick({ ...opt });\n\t\t} catch (err) {\n\t\t\tconsole.log(err);\n\t\t}\n\t}\n\n\thandleMarker2Click = (opt = {}) => {\n\t\tconst { onMarker2Click = (opt) => console.log(opt) } = this.props;\n\t\ttry {\n\t\t\tonMarker2Click({ ...opt });\n\t\t} catch (err) {\n\t\t\tconsole.log(err);\n\t\t}\n\t}\n\n\thandleMarker3Click = (opt = {}) => {\n\t\tconst { onMarker3Click = (opt) => console.log(opt) } = this.props;\n\t\ttry {\n\t\t\tonMarker3Click({ ...opt });\n\t\t} catch (err) {\n\t\t\tconsole.log(err);\n\t\t}\n\t}\n\n\tbaseLayerChange = (e) => {\n\t\tconst { name } = e;\n\t\tconsole.log('baseLayerChange event', e);\n\t\tconsole.log({ name });\n\t\tconst { appState } = this.props.stores;\n\t\tappState.setMapChecked(name);\n\t}\n\n\twhenReadyHandler = (e) => {\n\t\t// console.log('whenReadyHandler', e);\n\t\tconst { target } = e;\n\t\ttarget.on('baselayerchange', this.baseLayerChange);\n\t\tthis.mapRef = e.target;\n\t}\n\n\tsetMapRef = (map) => {\n\t\t// console.log('setMapRef: ', map);\n\t\t// this.mapRef = map;\n\t}\n\n\trender() {\n\t\tconst { userStore, appState } = this.props.stores;\n\t\tconst { mapChecked } = appState;\n\t\tconst { user } = userStore;\n\t\tconst { settings = {} } = user;\n\n\t\tconst { visibleLayers, mapZoom, bounds = null } = this.state;\n\t\tconst {\n\t\t\twaypoints = [],\n\t\t\twaypoints2 = [],\n\t\t\twaypoints3 = [],\n\t\t\tgeoJSONs = [],\n\t\t\tzoomToMarkers = [],\n\t\t\tgeojson,\n\t\t\tgpxInfo,\n\t\t\tmapId = 1,\n\t\t\tcenter = [61.0779066, 9.800984],\n\t\t\tzoom = 5,\n\t\t\tminZoom = 4,\n\t\t\tmaxZoom = 18,\n\t\t\tdarkmode,\n\t\t\theight = 500,\n\t\t\theatmap = [],\n\t\t\tskipGeojson = false,\n\t\t\tzoomToWaypoints = false,\n\t\t\tfullscreenMap = false,\n\n\t\t\tshowSearch = true,\n\t\t\tshowZoomControl = true,\n\t\t\tshowLayersControl = true,\n\t\t\tshowFullscreenControl = true,\n\t\t\tshowScaleControl = true,\n\t\t\tshowRange = true,\n\t\t\tshowTrackProfile = true,\n\t\t\tdistanceMarkerSteps = 'normal',\n\t\t\tshowDistanceMarkers = true,\n\t\t\tgroupWaypoints = true,\n\n\t\t\tlargeMarkers,\n\t\t\tisAnimatedMarkers,\n\t\t\treplaySpeed = 1000,\n\n\t\t\tlayersControlPosition = 'topright',\n\t\t} = this.props;\n\t\tconst { mapColorMode, mapRange: range, mapColors: colors, mapRangeMin, mapRangeMax } = appState;\n\n\t\tconst tempGeoJson = toJS(geojson);\n\t\tconst track = util.asObject(tempGeoJson, 'features', 0, 'geometry', 'coordinates');\n\t\tconst hasWaypoints = zoomToMarkers.length > 0 || waypoints.length > 0;\n\t\tconst hasWaypoints2 = waypoints2.length > 0;\n\n\t\tlet startMarker;\n\t\tlet endMarker;\n\t\tconst distanceMarkers = [];\n\t\tif (track && track[0] && track[0][0]) {\n\t\t\tstartMarker = track[0][0] && track[0][0][0] ?  [track[0][0][1], track[0][0][0]] : [track[0][1], track[0][0]];\n\t\t\tendMarker = track[track.length - 1][0] && track[track.length - 1][0][0] ? [track[track.length - 1][0][1], track[track.length - 1][0][0]] : [track[track.length - 1][1], track[track.length - 1][0]];\n\t\t\tif (gpxInfo && gpxInfo.distances) {\n\t\t\t\tlet totalDistance = 0;\n\t\t\t\tlet currentDistance = 0;\n\t\t\t\tlet steps = 10;\n\t\t\t\tswitch (mapZoom) {\n\t\t\t\t\tcase 15:\n\t\t\t\t\t\tsteps = distanceMarkerSteps === 'long' ? 3 : 1;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 14:\n\t\t\t\t\t\tsteps = distanceMarkerSteps === 'long' ? 5 : 2;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 13:\n\t\t\t\t\t\tsteps = distanceMarkerSteps === 'long' ? 7 : 3;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 12:\n\t\t\t\t\t\tsteps = distanceMarkerSteps === 'long' ? 10 : 5;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 11:\n\t\t\t\t\t\tsteps = distanceMarkerSteps === 'long' ? 15 : 10;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 10:\n\t\t\t\t\t\tsteps = distanceMarkerSteps === 'long' ? 15 : 10;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 9:\n\t\t\t\t\t\tsteps = distanceMarkerSteps === 'long' ? 20 : 15;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 8:\n\t\t\t\t\t\tsteps = distanceMarkerSteps === 'long' ? 30 : 20;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 7:\n\t\t\t\t\t\tsteps = distanceMarkerSteps === 'long' ? 40 : 30;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 6:\n\t\t\t\t\t\tsteps = distanceMarkerSteps === 'long' ? 70 : 50;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 5:\n\t\t\t\t\t\tsteps = distanceMarkerSteps === 'long' ? 150 : 100;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tsteps = distanceMarkerSteps === 'long' ? 200 : 150;\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\t// console.log({ mapZoom, steps });\n\t\t\t\tgpxInfo.distances.forEach((e, idx) => {\n\t\t\t\t\ttotalDistance += settings.imperial ? kmToMiles(e) : e;\n\t\t\t\t\tcurrentDistance += settings.imperial ? kmToMiles(e) : e;\n\t\t\t\t\tif (currentDistance >= steps) {\n\t\t\t\t\t\tcurrentDistance = 0;\n\t\t\t\t\t\tif (track[idx] && Array.isArray(track[idx])) {\n\t\t\t\t\t\t\tdistanceMarkers.push({\n\t\t\t\t\t\t\t\tlat: track[idx][1],\n\t\t\t\t\t\t\t\tlng: track[idx][0],\n\t\t\t\t\t\t\t\t// icon: wp.icon || 'marker',\n\t\t\t\t\t\t\t\ttitle: Math.floor(totalDistance),\n\t\t\t\t\t\t\t\tbody: '',\n\t\t\t\t\t\t\t\t// color: wp.color,\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t}\n        // const mapChecked = darkmode ? 'OpenStreetMap.Dark' : 'OpenStreetMap.Mapnik';\n\t\tconst { isAdmin } = userStore;\n\t\treturn (\n\t\t\t<>\n\t\t\t\t<div class={`${style.home} w-100 h-100 overflow-hidden position-relative`}\n\t\t\t\t\t// onTouchstart={mu.captureAllEvents}\n\t\t\t\t\t// onTouchend={mu.captureAllEvents}\n\t\t\t\t\tonTouchmove={mu.captureAllEvents}\n\t\t\t\t\tonScroll={mu.captureAllEvents}\n\t\t\t\t>\n\t\t\t\t\t<MapContainer\n\t\t\t\t\t\t// key={mapId}\n\t\t\t\t\t\tbounds={bounds}\n\t\t\t\t\t\t// ref={this.mapRef}\n\t\t\t\t\t\t// ref={(ref) => { this.mapRef = ref; }}\n\t\t\t\t\t\twhenCreated={this.setMapRef}\n\t\t\t\t\t\t// onLoad={(e) => console.log(e)}\n\t\t\t\t\t\tonViewportChanged={this.handleViewportChanged}\n\t\t\t\t\t\tminZoom={minZoom}\n\t\t\t\t\t\tmaxZoom={maxZoom}\n\t\t\t\t\t\t// maxBounds={MAX_BOUNDS}\n\t\t\t\t\t\tcenter={center}\n\t\t\t\t\t\t// onClick={this.handleClick}\n\t\t\t\t\t\tonLocationfound={this.handleLocationFound}\n\t\t\t\t\t\t// onLayeradd={(e) => console.log(e)}\n\t\t\t\t\t\t// onOverlayadd={(e) => console.log(e)}\n\t\t\t\t\t\t// ref={(r) => { this.mapRef = r; }}\n\t\t\t\t\t\tzoom={zoom}\n\t\t\t\t\t\tzoomControl={showZoomControl}\n\t\t\t\t\t\tdoubleClickZoom={true}\n\t\t\t\t\t\tscrollWheelZoom={true}\n\t\t\t\t\t\tdragging={fullscreenMap || !L.Browser.mobile}\n\t\t\t\t\t\t// tap={fullscreenMap || !L.Browser.mobile}\n\t\t\t\t\t\t// tap={!L.Browser.mobile}\n\t\t\t\t\t\ttap={!L.Browser.mobile}\n\t\t\t\t\t\ttouchZoom={L.Browser.mobile ? 'center' : false}\n\t\t\t\t\t\tanimate={true}\n\t\t\t\t\t\teaseLinearity={0.35}\n\t\t\t\t\t\tstyle={`width: 100%; min-height: ${height}px; height: 100%;`} className='h-100'\n\t\t\t\t\t\tonOverlayadd={this.overlayAdd}\n\t\t\t\t\t\tonOverlayremove={this.overlayRemove}\n\t\t\t\t\t\twhenReady={this.whenReadyHandler}\n\t\t\t\t\t>\n\t\t\t\t\t\t{showLayersControl && <LayersControl position={layersControlPosition}>\n\t\t\t\t\t\t\t<BaseLayer checked={mapChecked === 'OpenStreetMap.Mapnik'} name='OpenStreetMap.Mapnik'>\n\t\t\t\t\t\t\t\t<TileLayer\n\t\t\t\t\t\t\t\t\tattribution='&amp;copy <a href=\"http://osm.org/copyright\">OpenStreetMap</a> contributors'\n\t\t\t\t\t\t\t\t\turl='https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png'\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</BaseLayer>\n\t\t\t\t\t\t\t<BaseLayer checked={mapChecked === 'OpenStreetMap.Dark'}name='OpenStreetMap.Dark'>\n\t\t\t\t\t\t\t\t<TileLayer\n\t\t\t\t\t\t\t\t\tattribution='&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors, &copy; Map tiles by Carto, under CC BY 3.0. Data by OpenStreetMap, under ODbL.'\n\t\t\t\t\t\t\t\t\turl='https://cartodb-basemaps-{s}.global.ssl.fastly.net/dark_all/{z}/{x}/{y}.png'\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</BaseLayer>\n\n\t\t\t\t\t\t\t{/* {['matrikkel_bakgrunn', 'topo4', 'topo4graatone', 'europa', 'toporaster3', 'sjokartraster', 'norges_grunnkart',\n\t\t\t\t\t\t\t'norges_grunnkart_graatone', 'egk', 'terreng_norgeskart', 'havbunn_grunnkart', 'bakgrunnskart_forenklet'].map(layer => <>\t\t\t\t\t\t\t */}\n\t\t\t\t\t\t\t<BaseLayer checked={mapChecked === `Norway Kartverket topo4`} name={`Norway Kartverket topo4`}>\n\t\t\t\t\t\t\t\t<TileLayer\n\t\t\t\t\t\t\t\t\tsubdomains={['opencache', 'opencache2', 'opencache3']}\n\t\t\t\t\t\t\t\t\tattribution='&amp;copy <a href=\"http://kartverket.no\">Kartverket</a>'\n\t\t\t\t\t\t\t\t\turl='https://{s}.statkart.no/gatekeeper/gk/gk.open_gmaps?layers=topo4&zoom={z}&x={x}&y={y}'\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</BaseLayer>\n\t\t\t\t\t\t\t<BaseLayer checked={mapChecked === `Norway Kartverket topo4graatone`} name={`Norway Kartverket topo4graatone`}>\n\t\t\t\t\t\t\t\t<TileLayer\n\t\t\t\t\t\t\t\t\tsubdomains={['opencache', 'opencache2', 'opencache3']}\n\t\t\t\t\t\t\t\t\tattribution='&amp;copy <a href=\"http://kartverket.no\">Kartverket</a>'\n\t\t\t\t\t\t\t\t\turl='https://{s}.statkart.no/gatekeeper/gk/gk.open_gmaps?layers=topo4graatone&zoom={z}&x={x}&y={y}'\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</BaseLayer>\n\t\t\t\t\t\t\t{/* <BaseLayer checked={mapChecked === `Norway Kartverket terreng_norgeskart`} name={`Norway Kartverket terreng_norgeskart`}>\n\t\t\t\t\t\t\t\t<TileLayer\n\t\t\t\t\t\t\t\t\tsubdomains={['opencache', 'opencache2', 'opencache3']}\n\t\t\t\t\t\t\t\t\tattribution='&amp;copy <a href=\"http://kartverket.no\">Kartverket</a>'\n\t\t\t\t\t\t\t\t\turl='https://{s}.statkart.no/gatekeeper/gk/gk.open_gmaps?layers=terreng_norgeskart&zoom={z}&x={x}&y={y}'\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</BaseLayer>\n\t\t\t\t\t\t\t<BaseLayer checked={mapChecked === `Norway Kartverket norges_grunnkart`} name={`Norway Kartverket norges_grunnkart`}>\n\t\t\t\t\t\t\t\t<TileLayer\n\t\t\t\t\t\t\t\t\tsubdomains={['opencache', 'opencache2', 'opencache3']}\n\t\t\t\t\t\t\t\t\tattribution='&amp;copy <a href=\"http://kartverket.no\">Kartverket</a>'\n\t\t\t\t\t\t\t\t\turl='https://{s}.statkart.no/gatekeeper/gk/gk.open_gmaps?layers=norges_grunnkart&zoom={z}&x={x}&y={y}'\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</BaseLayer>\n\t\t\t\t\t\t\t<BaseLayer checked={mapChecked === `Norway Kartverket norges_grunnkart_graatone`} name={`Norway Kartverket norges_grunnkart_graatone`}>\n\t\t\t\t\t\t\t\t<TileLayer\n\t\t\t\t\t\t\t\t\tsubdomains={['opencache', 'opencache2', 'opencache3']}\n\t\t\t\t\t\t\t\t\tattribution='&amp;copy <a href=\"http://kartverket.no\">Kartverket</a>'\n\t\t\t\t\t\t\t\t\turl='https://{s}.statkart.no/gatekeeper/gk/gk.open_gmaps?layers=norges_grunnkart_graatone&zoom={z}&x={x}&y={y}'\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</BaseLayer> */}\n\n\t\t\t\t\t\t\t{/* <BaseLayer checked={mapChecked === `Google Satellite`} name={`Google Satellite`}>\n\t\t\t\t\t\t\t\t<TileLayer\n\t\t\t\t\t\t\t\t\tsubdomains={['mt0','mt1','mt2','mt3']}\n\t\t\t\t\t\t\t\t\tattribution='&amp;copy <a href=\"http://google.com\">Google</a>'\n\t\t\t\t\t\t\t\t\turl='https://{s}.google.com/vt/lyrs=s&x={x}&y={y}&z={z}'\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</BaseLayer>\n\t\t\t\t\t\t\t<BaseLayer checked={mapChecked === `Google Roadmap`} name={`Google Roadmap`}>\n\t\t\t\t\t\t\t\t<TileLayer\n\t\t\t\t\t\t\t\t\tsubdomains={['mt0','mt1','mt2','mt3']}\n\t\t\t\t\t\t\t\t\tattribution='&amp;copy <a href=\"http://google.com\">Google</a>'\n\t\t\t\t\t\t\t\t\turl='https://{s}.google.com/vt/lyrs=m&x={x}&y={y}&z={z}'\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</BaseLayer> */}\n\t\t\t\t\t\t\t<BaseLayer checked={mapChecked === `Google Satellite Text`} name={`Google Satellite Text`}>\n\t\t\t\t\t\t\t\t<TileLayer\n\t\t\t\t\t\t\t\t\tsubdomains={['mt0','mt1','mt2','mt3']}\n\t\t\t\t\t\t\t\t\tattribution='&amp;copy <a href=\"http://google.com\">Google</a>'\n\t\t\t\t\t\t\t\t\turl='https://{s}.google.com/vt/lyrs=s,h&x={x}&y={y}&z={z}'\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</BaseLayer>\n\t\t\t\t\t\t\t{/* <BaseLayer name='OpenStreetMap.BlackAndWhite'>\n\t\t\t\t\t\t\t\t<TileLayer\n\t\t\t\t\t\t\t\t\tattribution='&amp;copy <a href=\"http://osm.org/copyright\">OpenStreetMap</a> contributors'\n\t\t\t\t\t\t\t\t\turl='https://tiles.wmflabs.org/bw-mapnik/{z}/{x}/{y}.png'\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</BaseLayer> */}\n\t\t\t\t\t\t\t{/* <BaseLayer name='OpenStreetMap.Carto'>\n\t\t\t\t\t\t\t\t<TileLayer\n\t\t\t\t\t\t\t\t\tattribution='&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors, &copy; <a href=\"https://carto.com/attribution\">CARTO</a>'\n\t\t\t\t\t\t\t\t\turl='https://{s}.basemaps.cartocdn.com/light_nolabels/{z}/{x}/{y}.png'\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</BaseLayer> */}\n\t\t\t\t\t\t\t{/* <BaseLayer name='OpenStreetMap.Hikemap'>\n\t\t\t\t\t\t\t\t<TileLayer\n\t\t\t\t\t\t\t\t\tattribution='&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors, &copy; wmflabs Hike & Bike'\n\t\t\t\t\t\t\t\t\turl='https://tiles.wmflabs.org/hikebike/{z}/{x}/{y}.png'\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</BaseLayer> */}\n\t\t\t\t\t\t\t{/* <BaseLayer name='OpenStreetMap.Hiking'>\n\t\t\t\t\t\t\t\t<TileLayer\n\t\t\t\t\t\t\t\t\tattribution='&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors, &copy; Map tiles by Carto, under CC BY 3.0. Data by OpenStreetMap, under ODbL.'\n\t\t\t\t\t\t\t\t\turl=' http://{s}.tiles.wmflabs.org/hikebike/{z}/{x}/{y}.png'\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</BaseLayer> */}\n\t\t\t\t\t\t\t{/*\n\t\t\t\t\t\t\t<Overlay checked name='Layer group with circles'>\n\t\t\t\t\t\t\t\t<LayerGroup>\n\t\t\t\t\t\t\t\t\t<Circle center={center} fillColor='blue' radius={200} />\n\t\t\t\t\t\t\t\t\t<Circle\n\t\t\t\t\t\t\t\t\t\tcenter={center}\n\t\t\t\t\t\t\t\t\t\tfillColor='red'\n\t\t\t\t\t\t\t\t\t\tradius={100}\n\t\t\t\t\t\t\t\t\t\tstroke={false}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t<LayerGroup>\n\t\t\t\t\t\t\t\t\t\t<Circle\n\t\t\t\t\t\t\t\t\t\t\tcenter={circle2}\n\t\t\t\t\t\t\t\t\t\t\tcolor='green'\n\t\t\t\t\t\t\t\t\t\t\tfillColor='green'\n\t\t\t\t\t\t\t\t\t\t\tradius={100}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</LayerGroup>\n\t\t\t\t\t\t\t\t</LayerGroup>\n\t\t\t\t\t\t\t</Overlay>\n\t\t\t\t\t\t\t<Overlay name='Feature group'>\n\t\t\t\t\t\t\t\t<FeatureGroup color='purple'>\n\t\t\t\t\t\t\t\t\t<Popup>Popup in FeatureGroup</Popup>\n\t\t\t\t\t\t\t\t\t<Circle center={circle2} radius={200} />\n\t\t\t\t\t\t\t\t\t<Rectangle bounds={rectangle} />\n\t\t\t\t\t\t\t\t</FeatureGroup>\n\t\t\t\t\t\t\t</Overlay> */}\n\n\t\t\t\t\t\t\t{/* <Overlay name='Geoportal.gov.pl'>\n\t\t\t\t\t\t\t\t<WMSTileLayer\n\t\t\t\t\t\t\t\t\tlayers={'Raster'}\n\t\t\t\t\t\t\t\t\tformat={'image/png'}\n\t\t\t\t\t\t\t\t\ttransparent={true}\n\t\t\t\t\t\t\t\t\turl='http://mapy.geoportal.gov.pl/wss/service/img/guest/ORTO/MapServer/WMSServer?'\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</Overlay>\n\t\t\t\t\t\t\t<Overlay name='Wildfire'>\n\t\t\t\t\t\t\t\t<WMSTileLayer\n\t\t\t\t\t\t\t\t\tlayers={'GWIS'}\n\t\t\t\t\t\t\t\t\tformat={'image/png'}\n\t\t\t\t\t\t\t\t\ttransparent={true}\n\t\t\t\t\t\t\t\t\turl={'https://ies-ows.jrc.ec.europa.eu/gwis?language=eng&'}\n\t\t\t\t\t\t\t\t\tattribution={'European Commission, Joint Research Centre'}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</Overlay> */}\n\n\n\t\t\t\t\t\t\t<Overlay name='Windspeed'>\n\t\t\t\t\t\t\t\t<WMSTileLayer\n\t\t\t\t\t\t\t\t\t// layer={'wind_new'}\n\t\t\t\t\t\t\t\t\t// format={'image/png'}\n\t\t\t\t\t\t\t\t\t// transparent={true}\n\t\t\t\t\t\t\t\t\t// url={`https://tile.openweathermap.org/map/{layer}/{z}/{x}/{y}.png?appid=${API_OPEN_WEATHERMAP_KEY}`}\n\t\t\t\t\t\t\t\t\turl={`https://maps.openweathermap.org/maps/2.0/weather/WND/{z}/{x}/{y}?use_norm=false&opacity=0.25&palette=0:0073FF; 2:00AAFF; 3:4BD0D6; 6:8DE7C7; 12:B0F720; 25:F3363B; 50:C60000&arrow_step=64&appid=${API_OPEN_WEATHERMAP_KEY}`}\n\t\t\t\t\t\t\t\t\tattribution={'Open weather maps'}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</Overlay>\n\t\t\t\t\t\t\t{/* <Overlay checked name='Windspeed2'>\n\t\t\t\t\t\t\t\t<WMSTileLayer\n\t\t\t\t\t\t\t\t\top={'WND'}\n\t\t\t\t\t\t\t\t\t// format={'image/png'}\n\t\t\t\t\t\t\t\t\t// transparent={true}\n\t\t\t\t\t\t\t\t\turl={`http://maps.openweathermap.org/maps/2.0/weather/{op}/{z}/{x}/{y}?appid=${API_OPEN_WEATHERMAP_KEY}`}\n\t\t\t\t\t\t\t\t\tattribution={'Open weather maps'}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</Overlay> */}\n\t\t\t\t\t\t\t<Overlay name='Temperature'>\n\t\t\t\t\t\t\t\t<WMSTileLayer\n\t\t\t\t\t\t\t\t\t// layer={'temp_new'}\n\t\t\t\t\t\t\t\t\t// format={'image/png'}\n\t\t\t\t\t\t\t\t\t// transparent={true}\n\t\t\t\t\t\t\t\t\t// url={`https://tile.openweathermap.org/map/{layer}/{z}/{x}/{y}.png?appid=${API_OPEN_WEATHERMAP_KEY}`}\n\t\t\t\t\t\t\t\t\turl={`https://maps.openweathermap.org/maps/2.0/weather/TA2/{z}/{x}/{y}?fill_bound=true&opacity=0.35&appid=${API_OPEN_WEATHERMAP_KEY}`}\n\t\t\t\t\t\t\t\t\tattribution={'Open weather maps'}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</Overlay>\n\t\t\t\t\t\t\t<Overlay name='Snow depth'>\n\t\t\t\t\t\t\t\t<WMSTileLayer\n\t\t\t\t\t\t\t\t\t// layer={'precipitation_new'}\n\t\t\t\t\t\t\t\t\t// format={'image/png'}\n\t\t\t\t\t\t\t\t\t// transparent={true}\n\t\t\t\t\t\t\t\t\turl={`https://maps.openweathermap.org/maps/2.0/weather/SD0/{z}/{x}/{y}?fill_bound=true&opacity=0.35&appid=${API_OPEN_WEATHERMAP_KEY}`}\n\t\t\t\t\t\t\t\t\tattribution={'Open weather maps'}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</Overlay>\n\t\t\t\t\t\t\t<Overlay name='Precipitation'>\n\t\t\t\t\t\t\t\t<WMSTileLayer\n\t\t\t\t\t\t\t\t\t// layer={'precipitation_new'}\n\t\t\t\t\t\t\t\t\t// format={'image/png'}\n\t\t\t\t\t\t\t\t\t// transparent={true}\n\t\t\t\t\t\t\t\t\turl={`https://maps.openweathermap.org/maps/2.0/weather/PA0/{z}/{x}/{y}?fill_bound=true&opacity=0.35&appid=${API_OPEN_WEATHERMAP_KEY}`}\n\t\t\t\t\t\t\t\t\tattribution={'Open weather maps'}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</Overlay>\n\t\t\t\t\t\t\t{isAdmin && <Overlay name='Atmospheric pressure'>\n\t\t\t\t\t\t\t\t<WMSTileLayer\n\t\t\t\t\t\t\t\t\t// layer={'precipitation_new'}\n\t\t\t\t\t\t\t\t\t// format={'image/png'}\n\t\t\t\t\t\t\t\t\t// transparent={true}\n\t\t\t\t\t\t\t\t\turl={`https://maps.openweathermap.org/maps/2.0/weather/APM/{z}/{x}/{y}?fill_bound=true&opacity=0.35&appid=${API_OPEN_WEATHERMAP_KEY}`}\n\t\t\t\t\t\t\t\t\tattribution={'Open weather maps'}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</Overlay>}\n\t\t\t\t\t\t</LayersControl>}\n\n\t\t\t\t\t\t{/* {showFullscreenControl && <FullscreenControl position='topright' />} */}\n\n\t\t\t\t\t\t{showScaleControl && <ScaleControl\n\t\t\t\t\t\t\tmetric={true}\n\t\t\t\t\t\t\timperial={false}\n\t\t\t\t\t\t/>}\n{/* \n\t\t\t\t\t\t{visibleLayers.Windspeed && <Control position='bottomright'>\n\t\t\t\t\t\t\t<div style=\"\n\t\t\t\t\t\t\t\tcolor: #48484a;\n\t\t\t\t\t\t\t\tdisplay: flex;\n\t\t\t\t\t\t\t\talign-items: center;\n\t\t\t\t\t\t\t\tpadding: 2pt 4pt;\n\t\t\t\t\t\t\t\tbackground-color: #fff;\n\t\t\t\t\t\t\t\tborder-radius: 4pt;\n\t\t\t\t\t\t\t\tbox-shadow: 0 1px 3px rgba(0,0,0,.12),0 1px 2px rgba(0,0,0,.24);\n\t\t\t\t\t\t\t\ttransition: box-shadow .1s ease-out;\n\t\t\t\t\t\t\t\ttransition: box-shadow .1s ease-out,-webkit-box-shadow .1s ease-out;\n\t\t\t\t\t\t\t\tmargin-bottom: 10px;\n\t\t\t\t\t\t\t\tjustify-content: space-between;\n\t\t\t\t\t\t\t\tfont-size: 10px;\n\t\t\t\t\t\t\t\">\n\t\t\t\t\t\t\t\t<div>Wind speed, m/s</div>\n\t\t\t\t\t\t\t\t<div style=\"\n\t\t\t\t\t\t\t\t\tmargin-left: 10px;\n\t\t\t\t\t\t\t\t\tdisplay: flex;\n\t\t\t\t\t\t\t\t\tflex-direction: column;\n\t\t\t\t\t\t\t\t\">\n\t\t\t\t\t\t\t\t\t<div style=\"width: 260px; display: flex; justify-content: space-between;\" class=\"scale-dividers\" >\n\t\t\t\t\t\t\t\t\t\t<div>0</div>\n\t\t\t\t\t\t\t\t\t\t<div>2</div>\n\t\t\t\t\t\t\t\t\t\t<div>3</div>\n\t\t\t\t\t\t\t\t\t\t<div>6</div>\n\t\t\t\t\t\t\t\t\t\t<div>12</div>\n\t\t\t\t\t\t\t\t\t\t<div>25</div>\n\t\t\t\t\t\t\t\t\t\t<div>50</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div style=\"\n\t\t\t\t\t\t\t\t\t\twidth: 260px;\n\t\t\t\t\t\t\t\t\t\theight: 5px;\n\t\t\t\t\t\t\t\t\t\t// background: rgba(0, 0, 0, 0) linear-gradient(to left, rgb(158, 128, 177), rgba(116, 76, 172, 0.9), rgb(164, 123, 170), rgba(170, 128, 177, 0.84), rgba(176, 128, 177, 0.71), rgba(170, 128, 177, 0.54), rgba(170, 128, 177, 0.44), rgba(255, 255, 0, 0)) repeat scroll 0% 0%;\n\t\t\t\t\t\t\t\t\t\tbackground: linear-gradient(to right, #0073FF,#00AAFF,#4BD0D6,#8DE7C7,#B0F720,#F0B800,#FB5515,#F3363B,#C60000) repeat scroll 0% 0%;\n\t\t\t\t\t\t\t\t\t\" />\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</Control>}\n\n\t\t\t\t\t\t{visibleLayers.Temperature && <Control position='bottomright'>\n\t\t\t\t\t\t\t<div style=\"\n\t\t\t\t\t\t\t\tcolor: #48484a;\n\t\t\t\t\t\t\t\tdisplay: flex;\n\t\t\t\t\t\t\t\talign-items: center;\n\t\t\t\t\t\t\t\tpadding: 2pt 4pt;\n\t\t\t\t\t\t\t\tbackground-color: #fff;\n\t\t\t\t\t\t\t\tborder-radius: 4pt;\n\t\t\t\t\t\t\t\tbox-shadow: 0 1px 3px rgba(0,0,0,.12),0 1px 2px rgba(0,0,0,.24);\n\t\t\t\t\t\t\t\ttransition: box-shadow .1s ease-out;\n\t\t\t\t\t\t\t\ttransition: box-shadow .1s ease-out,-webkit-box-shadow .1s ease-out;\n\t\t\t\t\t\t\t\tmargin-bottom: 10px;\n\t\t\t\t\t\t\t\tjustify-content: space-between;\n\t\t\t\t\t\t\t\tfont-size: 10px;\n\t\t\t\t\t\t\t\">\n\t\t\t\t\t\t\t\t<div>Temperature, °C</div>\n\t\t\t\t\t\t\t\t<div style=\"\n\t\t\t\t\t\t\t\t\tmargin-left: 10px;\n\t\t\t\t\t\t\t\t\tdisplay: flex;\n\t\t\t\t\t\t\t\t\tflex-direction: column;\n\t\t\t\t\t\t\t\t\">\n\t\t\t\t\t\t\t\t\t<div style=\"width: 260px; display: flex; justify-content: space-between;\" class=\"scale-dividers\" >\n\t\t\t\t\t\t\t\t\t\t<div>-40</div><div>-20</div><div>0</div><div>20</div><div>40</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div style=\"\n\t\t\t\t\t\t\t\t\t\twidth: 260px;\n\t\t\t\t\t\t\t\t\t\theight: 5px;\n\t\t\t\t\t\t\t\t\t\tbackground-image: linear-gradient(to right, rgb(159, 85, 181) 0%, rgb(44, 106, 187) 8.75%, rgb(82, 139, 213) 12.5%, rgb(103, 163, 222) 18.75%, rgb(142, 202, 240) 25%, rgb(155, 213, 244) 31.25%, rgb(172, 225, 253) 37.5%, rgb(194, 234, 255) 43.75%, rgb(255, 255, 208) 50%, rgb(254, 248, 174) 56.25%, rgb(254, 232, 146) 62.5%, rgb(254, 226, 112) 68.75%, rgb(253, 212, 97) 75%, rgb(244, 168, 94) 82.5%, rgb(244, 129, 89) 87.5%, rgb(244, 104, 89) 93.75%, rgb(244, 76, 73) 100%);\n\t\t\t\t\t\t\t\t\t\" />\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</Control>}\n\n\t\t\t\t\t\t{visibleLayers.Precipitation && <Control position='bottomright'>\n\t\t\t\t\t\t\t<div style=\"\n\t\t\t\t\t\t\t\tcolor: #48484a;\n\t\t\t\t\t\t\t\tdisplay: flex;\n\t\t\t\t\t\t\t\talign-items: center;\n\t\t\t\t\t\t\t\tpadding: 2pt 4pt;\n\t\t\t\t\t\t\t\tbackground-color: #fff;\n\t\t\t\t\t\t\t\tborder-radius: 4pt;\n\t\t\t\t\t\t\t\tbox-shadow: 0 1px 3px rgba(0,0,0,.12),0 1px 2px rgba(0,0,0,.24);\n\t\t\t\t\t\t\t\ttransition: box-shadow .1s ease-out;\n\t\t\t\t\t\t\t\ttransition: box-shadow .1s ease-out,-webkit-box-shadow .1s ease-out;\n\t\t\t\t\t\t\t\tmargin-bottom: 10px;\n\t\t\t\t\t\t\t\tjustify-content: space-between;\n\t\t\t\t\t\t\t\tfont-size: 10px;\n\t\t\t\t\t\t\t\">\n\t\t\t\t\t\t\t\t<div>Precipitation, mm/h</div>\n\t\t\t\t\t\t\t\t<div style=\"\n\t\t\t\t\t\t\t\t\tmargin-left: 10px;\n\t\t\t\t\t\t\t\t\tdisplay: flex;\n\t\t\t\t\t\t\t\t\tflex-direction: column;\n\t\t\t\t\t\t\t\t\">\n\t\t\t\t\t\t\t\t\t<div style=\"width: 260px; display: flex; justify-content: space-between;\" class=\"scale-dividers\" >\n\t\t\t\t\t\t\t\t\t\t<div>0</div><div>0.5</div><div>1</div><div>2</div><div>4</div><div>6</div><div>7</div><div>10</div><div>12</div><div>14</div><div>16</div><div>24</div><div>32</div><div>60</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div style=\"\n\t\t\t\t\t\t\t\t\t\twidth: 260px;\n\t\t\t\t\t\t\t\t\t\theight: 5px;\n\t\t\t\t\t\t\t\t\t\tbackground: rgba(0, 0, 0, 0) linear-gradient(to left, rgb(170, 43, 195), rgb(255, 0, 146), rgb(255, 0, 100), rgb(255, 0, 0), rgb(255, 91, 0), rgb(255, 150, 0), rgb(255, 205, 0), rgb(239, 248, 0), rgb(0, 70, 0), rgb(0, 90, 0), rgb(0, 160, 0), rgb(0, 211, 0), rgb(0, 250, 100), rgba(0, 0, 0, 0)) repeat scroll 0% 0%;\n\t\t\t\t\t\t\t\t\t\" />\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</Control>}\n\n\t\t\t\t\t\t{visibleLayers['Snow depth'] && <Control position='bottomright'>\n\t\t\t\t\t\t\t<div style=\"\n\t\t\t\t\t\t\t\tcolor: #48484a;\n\t\t\t\t\t\t\t\tdisplay: flex;\n\t\t\t\t\t\t\t\talign-items: center;\n\t\t\t\t\t\t\t\tpadding: 2pt 4pt;\n\t\t\t\t\t\t\t\tbackground-color: #fff;\n\t\t\t\t\t\t\t\tborder-radius: 4pt;\n\t\t\t\t\t\t\t\tbox-shadow: 0 1px 3px rgba(0,0,0,.12),0 1px 2px rgba(0,0,0,.24);\n\t\t\t\t\t\t\t\ttransition: box-shadow .1s ease-out;\n\t\t\t\t\t\t\t\ttransition: box-shadow .1s ease-out,-webkit-box-shadow .1s ease-out;\n\t\t\t\t\t\t\t\tmargin-bottom: 10px;\n\t\t\t\t\t\t\t\tjustify-content: space-between;\n\t\t\t\t\t\t\t\tfont-size: 10px;\n\t\t\t\t\t\t\t\">\n\t\t\t\t\t\t\t\t<div>Snow depth (m)</div>\n\t\t\t\t\t\t\t\t<div style=\"\n\t\t\t\t\t\t\t\t\tmargin-left: 10px;\n\t\t\t\t\t\t\t\t\tdisplay: flex;\n\t\t\t\t\t\t\t\t\tflex-direction: column;\n\t\t\t\t\t\t\t\t\">\n\t\t\t\t\t\t\t\t\t<div style=\"width: 260px; display: flex; justify-content: space-between;\" class=\"scale-dividers\" >\n\t\t\t\t\t\t\t\t\t\t<div>0.05</div>\n\t\t\t\t\t\t\t\t\t\t<div>0.4</div>\n\t\t\t\t\t\t\t\t\t\t<div>0.8</div>\n\t\t\t\t\t\t\t\t\t\t<div>1.8</div>\n\t\t\t\t\t\t\t\t\t\t<div>15</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div style=\"\n\t\t\t\t\t\t\t\t\t\twidth: 260px;\n\t\t\t\t\t\t\t\t\t\theight: 5px;\n\t\t\t\t\t\t\t\t\t\tbackground: linear-gradient(to right, #EDEDED, #D9F0F4, #A5E5EF, #7DDEED, #35D2EA, #00CCE8, #706DCE, #514FCC, #3333CC, #1818CC, #C454B7, #C12CB0, #BF00A8, #85408C, #7F2389, #790087, #E80068) repeat scroll 0% 0%;\n\t\t\t\t\t\t\t\t\t\" />\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</Control>}\n\n\t\t\t\t\t\t{visibleLayers['Atmospheric pressure'] && <Control position='bottomright'>\n\t\t\t\t\t\t\t<div style=\"\n\t\t\t\t\t\t\t\tcolor: #48484a;\n\t\t\t\t\t\t\t\tdisplay: flex;\n\t\t\t\t\t\t\t\talign-items: center;\n\t\t\t\t\t\t\t\tpadding: 2pt 4pt;\n\t\t\t\t\t\t\t\tbackground-color: #fff;\n\t\t\t\t\t\t\t\tborder-radius: 4pt;\n\t\t\t\t\t\t\t\tbox-shadow: 0 1px 3px rgba(0,0,0,.12),0 1px 2px rgba(0,0,0,.24);\n\t\t\t\t\t\t\t\ttransition: box-shadow .1s ease-out;\n\t\t\t\t\t\t\t\ttransition: box-shadow .1s ease-out,-webkit-box-shadow .1s ease-out;\n\t\t\t\t\t\t\t\tmargin-bottom: 10px;\n\t\t\t\t\t\t\t\tjustify-content: space-between;\n\t\t\t\t\t\t\t\tfont-size: 10px;\n\t\t\t\t\t\t\t\">\n\t\t\t\t\t\t\t\t<div>Atmospheric pressure (hPa)</div>\n\t\t\t\t\t\t\t\t<div style=\"\n\t\t\t\t\t\t\t\t\tmargin-left: 10px;\n\t\t\t\t\t\t\t\t\tdisplay: flex;\n\t\t\t\t\t\t\t\t\tflex-direction: column;\n\t\t\t\t\t\t\t\t\">\n\t\t\t\t\t\t\t\t\t<div style=\"width: 260px; display: flex; justify-content: space-between;\" class=\"scale-dividers\" >\n\t\t\t\t\t\t\t\t\t\t<div>940</div>\n\t\t\t\t\t\t\t\t\t\t<div>980</div>\n\t\t\t\t\t\t\t\t\t\t<div>1010</div>\n\t\t\t\t\t\t\t\t\t\t<div>1040</div>\n\t\t\t\t\t\t\t\t\t\t<div>1080</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div style=\"\n\t\t\t\t\t\t\t\t\t\twidth: 260px;\n\t\t\t\t\t\t\t\t\t\theight: 5px;\n\t\t\t\t\t\t\t\t\t\tbackground: linear-gradient(to right, #0073FF,#00AAFF,#4BD0D6,#8DE7C7,#B0F720,#F0B800,#FB5515,#F3363B,#C60000) repeat scroll 0% 0%;\n\t\t\t\t\t\t\t\t\t\" />\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</Control>} */}\n\n\n\t\t\t\t\t\t{/* <ImageOverlay\n\t\t\t\t\t\t\turl='./assets/515-overlay-v2.png'\n\t\t\t\t\t\t\tbounds={[\n\t\t\t\t\t\t\t\t[52.056765505175235, 15.068457126617433],\n\t\t\t\t\t\t\t\t[52.04421634105194, 15.105557441711428],\n\t\t\t\t\t\t\t]}\n\t\t\t\t\t\t/> */}\n\t\t\t\t\t\t{/* {heatmap && heatmap.length > 0 && <HeatmapLayer\n\t\t\t\t\t\t\tfitBoundsOnLoad={!hasWaypoints}\n\t\t\t\t\t\t\tfitBoundsOnUpdate={false}\n\t\t\t\t\t\t\tpoints={heatmap}\n\t\t\t\t\t\t\tlongitudeExtractor={m => m[1]}\n\t\t\t\t\t\t\tlatitudeExtractor={m => m[0]}\n\t\t\t\t\t\t\tintensityExtractor={m => parseFloat(m[2])}\n\t\t\t\t\t\t/>} */}\n\n\n\t\t\t\t\t\t{geoJSONs && geoJSONs.length > 0 && geoJSONs.map((gj, idx) => <GeoJSON\n\t\t\t\t\t\t\tdata={gj}\n\t\t\t\t\t\t\tstyle={() => this.geoJSONStyleList(idx)}\n\t\t\t\t\t\t/>)}\n\n\t\t\t\t\t\t{!skipGeojson && geojson && startMarker && <GeoJSON\n\t\t\t\t\t\t\tdata={geojson}\n\t\t\t\t\t\t\tstyle={this.geoJSONStyle}\n\t\t\t\t\t\t\tonEachFeature={this.onEachFeature}\n\t\t\t\t\t\t\teventHandlers={{\n\t\t\t\t\t\t\t\tadd: (e) => this.zoomToGeoJSON(e),\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t/>}\n\n\t\t\t\t\t\t{showTrackProfile && <>\n\t\t\t\t\t\t\t{track && track.length > 0 && <ReactLeafletMultiOptionsPolyline\n\t\t\t\t\t\t\t\tref={this.polyRef}\n\t\t\t\t\t\t\t\tpositions={this.polylinetrackPointFactory(track)}\n\t\t\t\t\t\t\t\toptionIdxFn={this.polylineOptionIdxFn}\n\t\t\t\t\t\t\t\toptions={this.polylineOptions()}\n\t\t\t\t\t\t\t\tweight={4}\n\t\t\t\t\t\t\t\tlineCap='butt'\n\t\t\t\t\t\t\t\topacity={0.75}\n\t\t\t\t\t\t\t\tsmoothFactor={1}\n\t\t\t\t\t\t\t\tzoomAnimation={true}\n\t\t\t\t\t\t\t\tkey={`${mapColorMode}`}\n\t\t\t\t\t\t\t/>}\n\t\t\t\t\t\t</>}\n\n\t\t\t\t\t\t{startMarker && <Marker position={startMarker} icon={icons.get('marker')}>\n\t\t\t\t\t\t\t<Popup>\n\t\t\t\t\t\t\t\tStart position: {util.format(startMarker[0], 4)}, {util.format(startMarker[1], 4)}\n\t\t\t\t\t\t\t</Popup>\n\t\t\t\t\t\t</Marker>}\n\t\t\t\t\t\t{endMarker && <Marker position={endMarker} icon={icons.get('flag')}>\n\t\t\t\t\t\t\t<Popup>\n\t\t\t\t\t\t\t\tEnd position: {util.format(endMarker[0], 4)}, {util.format(endMarker[1], 4)}\n\t\t\t\t\t\t\t</Popup>\n\t\t\t\t\t\t</Marker>}\n\n\t\t\t\t\t\t{showDistanceMarkers && distanceMarkers && distanceMarkers.length > 0 && <>\n\t\t\t\t\t\t\t{distanceMarkers.length > 0 && distanceMarkers.map(wp => (\n\t\t\t\t\t\t\t\t<Marker\n\t\t\t\t\t\t\t\t\tposition={[wp.lat, wp.lng]}\n\t\t\t\t\t\t\t\t\tdraggable={false}\n\t\t\t\t\t\t\t\t\ticon={icons.getDistanceMarker({\n\t\t\t\t\t\t\t\t\t\ttitle: wp.title,\n\t\t\t\t\t\t\t\t\t\tbody: wp.body,\n\t\t\t\t\t\t\t\t\t\tcolor: wp.color,\n\t\t\t\t\t\t\t\t\t\ttextColor: darkmode ? '#333' : '#333',\n\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<Popup position={[wp.lat, wp.lng]}>\n\t\t\t\t\t\t\t\t\t\t<h5>{wp.title}</h5>\n\t\t\t\t\t\t\t\t\t\t<Markdown markdown={wp.body} markdownOpts={MARKDOWN_OPTIONS} />\n\t\t\t\t\t\t\t\t\t</Popup>\n\t\t\t\t\t\t\t\t</Marker>\n\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t</>}\n\n\t\t\t\t\t\t{waypoints3.length > 0 && waypoints3.reverse().map((wp, idx) => (\n\t\t\t\t\t\t\t<Marker\n\t\t\t\t\t\t\t\tposition={[wp.lat, wp.lng]}\n\t\t\t\t\t\t\t\tdraggable={false}\n\t\t\t\t\t\t\t\ticon={icons.getSmallMarker({\n\t\t\t\t\t\t\t\t\ticon: wp.icon || 'marker',\n\t\t\t\t\t\t\t\t\tbib: wp.bib,\n\t\t\t\t\t\t\t\t\tflag: wp.flag,\n\t\t\t\t\t\t\t\t\ttitle: wp.title,\n\t\t\t\t\t\t\t\t\tbody: wp.body,\n\t\t\t\t\t\t\t\t\tcolor: wp.color,\n\t\t\t\t\t\t\t\t\ttextColor: wp.textColor,\n\t\t\t\t\t\t\t\t\tmapChecked,\n\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\teventHandlers={{\n\t\t\t\t\t\t\t\t\tclick: (e) => this.handleMarker3Click({ ...wp, e }),\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t// onClick={(e) => this.handleMarker3Click({ ...wp, e })}\n\t\t\t\t\t\t\t\tzIndexOffset={100 + idx}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{/* <Popup position={[wp.lat, wp.lng]}>\n\t\t\t\t\t\t\t\t\t<h5><Markdown markdown={wp.title} markdownOpts={MARKDOWN_OPTIONS} /></h5>\n\t\t\t\t\t\t\t\t\t<Markdown markdown={wp.body} markdownOpts={MARKDOWN_OPTIONS} />\n\t\t\t\t\t\t\t\t</Popup> */}\n\t\t\t\t\t\t\t</Marker>\n\t\t\t\t\t\t))}\n\t\t\t\t\t\t\n\t\t\t\t\t\t{waypoints2.length > 0 && waypoints2.reverse().map((wp, idx) => (\n\t\t\t\t\t\t\t<Marker\n\t\t\t\t\t\t\t\tposition={[wp.lat, wp.lng]}\n\t\t\t\t\t\t\t\tdraggable={false}\n\t\t\t\t\t\t\t\ticon={icons.getMarker({\n\t\t\t\t\t\t\t\t\ticon: wp.icon || 'marker',\n\t\t\t\t\t\t\t\t\tbib: wp.bib,\n\t\t\t\t\t\t\t\t\tflag: wp.flag,\n\t\t\t\t\t\t\t\t\ttitle: wp.title,\n\t\t\t\t\t\t\t\t\tbody: wp.body,\n\t\t\t\t\t\t\t\t\tcolor: wp.color,\n\t\t\t\t\t\t\t\t\ttextColor: wp.textColor,\n\n\t\t\t\t\t\t\t\t\ticonWidth: largeMarkers ? 300 : 250,\n\t\t\t\t\t\t\t\t\ticonHeight: largeMarkers ? 30 : 20,\n\t\t\t\t\t\t\t\t\ticonAnchorX: largeMarkers ? 10 : 7,\n\t\t\t\t\t\t\t\t\ticonAnchorY: largeMarkers ? 10 : 7,\n\t\t\t\t\t\t\t\t\timageCirlceRadius: largeMarkers ? 20 : 14,\n\n\t\t\t\t\t\t\t\t\tlineHeight: largeMarkers ? '1.5em' : '1.1em',\n\t\t\t\t\t\t\t\t\tfontSize: largeMarkers ? '1.5em' : '1.1em',\n\t\t\t\t\t\t\t\t\tpaddingTop: largeMarkers ? '2px' : '3px',\n\t\t\t\t\t\t\t\t\tpaddingBottom: largeMarkers ? '2px' : '3px',\n\n\t\t\t\t\t\t\t\t\tmapChecked,\n\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t// onClick={(e) => this.handleMarker2Click({ ...wp, e })}\n\t\t\t\t\t\t\t\teventHandlers={{\n\t\t\t\t\t\t\t\t\tclick: (e) => this.handleMarker2Click({ ...wp, e }),\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\tzIndexOffset={200 + idx}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{/* <Popup position={[wp.lat, wp.lng]}>\n\t\t\t\t\t\t\t\t\t<h5><Markdown markdown={wp.title} markdownOpts={MARKDOWN_OPTIONS} /></h5>\n\t\t\t\t\t\t\t\t\t<Markdown markdown={wp.body} markdownOpts={MARKDOWN_OPTIONS} />\n\t\t\t\t\t\t\t\t</Popup> */}\n\t\t\t\t\t\t\t</Marker>\n\t\t\t\t\t\t))}\n\t\t\t\t\t\t{waypoints.length > 0 && waypoints.reverse().map((wp, idx) => (<>\n\t\t\t\t\t\t\t{isAnimatedMarkers ? <>\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t<ReactLeafletDriftMarker\n\t\t\t\t\t\t\t\t\tposition={{ lat: wp.lat, lng: wp.lng }}\n\t\t\t\t\t\t\t\t\tduration={replaySpeed}\n\t\t\t\t\t\t\t\t\tdraggable={false}\n\t\t\t\t\t\t\t\t\ticon={icons.getRaceMarker({\n\t\t\t\t\t\t\t\t\t\ticon: wp.icon || 'marker',\n\t\t\t\t\t\t\t\t\t\tbib: wp.bib,\n\t\t\t\t\t\t\t\t\t\tspeed: wp.speed,\n\t\t\t\t\t\t\t\t\t\tbearing: wp.bearing,\n\t\t\t\t\t\t\t\t\t\trank: wp.rank,\n\t\t\t\t\t\t\t\t\t\temail: wp.email,\n\t\t\t\t\t\t\t\t\t\timage: wp.image,\n\t\t\t\t\t\t\t\t\t\tflag: wp.flag,\n\t\t\t\t\t\t\t\t\t\ttitle: wp.title,\n\t\t\t\t\t\t\t\t\t\tbody: wp.body,\n\t\t\t\t\t\t\t\t\t\tcolor: wp.color,\n\t\t\t\t\t\t\t\t\t\ttextColor: wp.textColor,\n\n\t\t\t\t\t\t\t\t\t\ticonWidth: largeMarkers ? 300 : 170,\n\t\t\t\t\t\t\t\t\t\ticonHeight: largeMarkers ? 30 : 15,\n\t\t\t\t\t\t\t\t\t\ticonAnchorX: largeMarkers ? (idx % 2 === 0 ? 10 : 290) : (idx % 2 === 0 ? 7 : 163),\n\t\t\t\t\t\t\t\t\t\ticonAnchorY: largeMarkers ? 10 : 5,\n\t\t\t\t\t\t\t\t\t\timageCirlceRadius: largeMarkers ? 20 : 10,\n\n\t\t\t\t\t\t\t\t\t\tlineHeight: largeMarkers ? '1.5em' : '0.9em',\n\t\t\t\t\t\t\t\t\t\tfontSize: largeMarkers ? '1.5em' : '0.9em',\n\t\t\t\t\t\t\t\t\t\tpaddingTop: largeMarkers ? '1px' : '3px',\n\t\t\t\t\t\t\t\t\t\tpaddingBottom: largeMarkers ? '2px' : '3px',\n\n\t\t\t\t\t\t\t\t\t\ttitlePrefix: wp.currentState === 'rest' ? '💤' : '',\n\t\t\t\t\t\t\t\t\t\tmapChecked,\n\t\t\t\t\t\t\t\t\t\tlargeMarkers,\n\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\t// onClick={(e) => this.handleMarkerClick({ ...wp, e })}\n\t\t\t\t\t\t\t\t\teventHandlers={{\n\t\t\t\t\t\t\t\t\t\tclick: (e) => this.handleMarkerClick({ ...wp, e }),\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\tzIndexOffset={300 + idx}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{/* <Popup position={[wp.lat, wp.lng]}> */}\n\t\t\t\t\t\t\t\t\t\t{/* <h5><Markdown markdown={wp.title} markdownOpts={MARKDOWN_OPTIONS} /></h5>\n\t\t\t\t\t\t\t\t\t\t<Markdown markdown={wp.body} markdownOpts={MARKDOWN_OPTIONS} /> */}\n\t\t\t\t\t\t\t\t\t{/* </Popup> */}\n\t\t\t\t\t\t\t\t</ReactLeafletDriftMarker>\n\t\t\t\t\t\t\t</> : <>\n\t\t\t\t\t\t\t\t<Marker\n\t\t\t\t\t\t\t\t\tposition={[wp.lat, wp.lng]}\n\t\t\t\t\t\t\t\t\tdraggable={false}\n\t\t\t\t\t\t\t\t\ticon={icons.getRaceMarker({\n\t\t\t\t\t\t\t\t\t\ticon: wp.icon || 'marker',\n\t\t\t\t\t\t\t\t\t\tbib: wp.bib,\n\t\t\t\t\t\t\t\t\t\tspeed: wp.speed,\n\t\t\t\t\t\t\t\t\t\tbearing: wp.bearing,\n\t\t\t\t\t\t\t\t\t\trank: wp.rank,\n\t\t\t\t\t\t\t\t\t\temail: wp.email,\n\t\t\t\t\t\t\t\t\t\timage: wp.image,\n\t\t\t\t\t\t\t\t\t\tflag: wp.flag,\n\t\t\t\t\t\t\t\t\t\ttitle: wp.title,\n\t\t\t\t\t\t\t\t\t\tbody: wp.body,\n\t\t\t\t\t\t\t\t\t\tcolor: wp.color,\n\t\t\t\t\t\t\t\t\t\ttextColor: wp.textColor,\n\n\t\t\t\t\t\t\t\t\t\ticonWidth: largeMarkers ? 300 : 170,\n\t\t\t\t\t\t\t\t\t\ticonHeight: largeMarkers ? 30 : 15,\n\t\t\t\t\t\t\t\t\t\ticonAnchorX: largeMarkers ? (idx % 2 === 0 ? 10 : 290) : (idx % 2 === 0 ? 7 : 163),\n\t\t\t\t\t\t\t\t\t\ticonAnchorY: largeMarkers ? 10 : 5,\n\t\t\t\t\t\t\t\t\t\timageCirlceRadius: largeMarkers ? 20 : 10,\n\n\t\t\t\t\t\t\t\t\t\tlineHeight: largeMarkers ? '1.5em' : '0.9em',\n\t\t\t\t\t\t\t\t\t\tfontSize: largeMarkers ? '1.5em' : '0.9em',\n\t\t\t\t\t\t\t\t\t\tpaddingTop: largeMarkers ? '1px' : '3px',\n\t\t\t\t\t\t\t\t\t\tpaddingBottom: largeMarkers ? '2px' : '3px',\n\n\t\t\t\t\t\t\t\t\t\ttitlePrefix: wp.currentState === 'rest' ? '💤' : '',\n\t\t\t\t\t\t\t\t\t\tmapChecked,\n\t\t\t\t\t\t\t\t\t\tlargeMarkers,\n\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\t// onClick={(e) => this.handleMarkerClick({ ...wp, e })}\n\t\t\t\t\t\t\t\t\teventHandlers={{\n\t\t\t\t\t\t\t\t\t\tclick: (e) => this.handleMarkerClick({ ...wp, e }),\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\tzIndexOffset={300 + idx}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{/* <Popup position={[wp.lat, wp.lng]}> */}\n\t\t\t\t\t\t\t\t\t\t{/* <h5><Markdown markdown={wp.title} markdownOpts={MARKDOWN_OPTIONS} /></h5>\n\t\t\t\t\t\t\t\t\t\t<Markdown markdown={wp.body} markdownOpts={MARKDOWN_OPTIONS} /> */}\n\t\t\t\t\t\t\t\t\t{/* </Popup> */}\n\t\t\t\t\t\t\t\t</Marker>\n\t\t\t\t\t\t\t</>}\n\t\t\t\t\t\t</>))}\n\t\t\t\t\t</MapContainer>\n\n\t\t\t\t\t{/* {showSearch && <div class='position-absolute' style='bottom: 20px; right: 5px; z-index: 999999;'>\n\t\t\t\t\t\t<button type='button' class='btn btn-sm btn-info' onClick={this.zoomToAllMarkers}><i class='fas fa-search' /></button>\n\t\t\t\t\t\t<button type='button' class='btn btn-sm btn-success ml-1' onClick={this.zoomToFavoriteMarkers}><i class='fas fa-search-location' /></button>\n\t\t\t\t\t</div>} */}\n\t\t\t\t\t{waypoints.length > 0 && <div class='position-absolute' style='bottom: 65px; right: 5px; z-index: 999999;'>\n\t\t\t\t\t\t<button type='button' class='btn btn-sm btn-info text-overflow' style='width: 60px' onClick={this.zoomToAllMarkers}><nobr><i class='fas fa-crosshairs' /></nobr></button>\n\t\t\t\t\t</div>}\n\t\t\t\t\t{waypoints.length >= 3 && <div class='position-absolute' style='bottom: 105px; right: 5px; z-index: 999999;'>\n\t\t\t\t\t\t<button type='button' class='btn btn-sm btn-info text-overflow' style='width: 60px' onClick={this.zoomToFirst3Markers}><nobr><i class='fas fa-crosshairs' /> 3</nobr></button>\n\t\t\t\t\t</div>}\n\t\t\t\t\t{waypoints.length >= 10 && <div class='position-absolute' style='bottom: 145px; right: 5px; z-index: 999999;'>\n\t\t\t\t\t\t<button type='button' class='btn btn-sm btn-info text-overflow' style='width: 60px' onClick={this.zoomToFirst10Markers}><nobr><i class='fas fa-crosshairs' /> 10</nobr></button>\n\t\t\t\t\t</div>}\n\n\t\t\t\t</div>\n\t\t\t\t{showRange && range && range.length > 0 && <>\n\t\t\t\t\t<div class='mb-4'>\n\t\t\t\t\t\t<div class='float-right mt-1'>\n\t\t\t\t\t\t\t<div class='px-1 py-0 float-left' style='line-height: 0.8em;'>\n\t\t\t\t\t\t\t\t<small>\n\t\t\t\t\t\t\t\t\t<small>\n\t\t\t\t\t\t\t\t\t\t{util.format(mapRangeMin, 0)}<span class='text-muted'>{mapColorMode === 'speed' ? 'km/t' : '%'}</span>\n\t\t\t\t\t\t\t\t\t</small>\n\t\t\t\t\t\t\t\t</small>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t{range && range.length > 0 && range.map((val, idx) => (\n\t\t\t\t\t\t\t\t<div class='float-left'>\n\t\t\t\t\t\t\t\t\t<div style={`background-color: ${colors[idx].color}; height: 13px; width: 10px;`} />\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t<div class='px-1 py-0 float-left' style='line-height: 0.8em;'>\n\t\t\t\t\t\t\t\t<small>\n\t\t\t\t\t\t\t\t\t<small>\n\t\t\t\t\t\t\t\t\t\t{util.format(mapRangeMax, 0)}<span class='text-muted'>{mapColorMode === 'speed' ? 'km/t' : '%'}</span>\n\t\t\t\t\t\t\t\t\t</small>\n\t\t\t\t\t\t\t\t</small>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t{/* <div class='float-right mt-1 clearfix'>\n\t\t\t\t\t\t\t<button class='btn btn-link' onClick={this.showSpeed}>Show speed</button>\n\t\t\t\t\t\t</div> */}\n\t\t\t\t\t</div>\n\t\t\t\t</>}\n\t\t\t</>\n\t\t);\n\t}\n}\n\nexport default App;\n\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"pointerCursor\":\"pointerCursor__1W6mM\"};","import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\n\nimport mu from '../../lib/musher-util';\n\nconst STOP_STATUSES = [2, 9];\nconst WARN_STATUSES = [4, 8];\n\n\nfunction getFatigueLevel(wo, dog) {\n    if (dog) {\n        if (STOP_STATUSES.indexOf(dog.status) > -1) {\n            return 'danger';\n        } else if (WARN_STATUSES.indexOf(dog.status) > -1) {\n            return 'warning';\n        }\n    }\n    if (wo) {\n        if (wo.distanceKm > 50) {\n            return 'danger';\n        } else if (wo.distanceKm > 30) {\n            return 'warning';\n        }\n    }\n    return 'success';\n}\n\n@observer\nclass Dog extends Component {\n    render() {\n        const { \n            dog = {},\n            dogs = [],\n            showTeam,\n            showInfo,\n            showName = true,\n            showPosition = true,\n            showAge = false,\n            className,\n            size,\n            onDogClick = () => {},\n        } = this.props;\n\t\tconst { userStore } = this.props.stores;\n        const { isAdmin, user } = userStore;\n        const { language = 'en' } = user;\n\n        const dogPosition = userStore.findDogposition({ position: dog.position, language });\n        const hasBirthday = mu.hasBirthday(dog.birth);\n        const daysUntilBirthday = Math.ceil(mu.daysUntilNextBirthday(dog.birth));\n\n        let containerWidth = '92px';\n        let imageClasses = '';\n        let fontSize = '35px';\n        if (size === 'small') {\n            containerWidth = '50px';\n            imageClasses = 'imageRoundedSmall';\n            fontSize = '20px';\n        } else if (size === 'medium') {\n            containerWidth = '60px';\n            imageClasses = 'imageRoundedMedium';\n            fontSize = '25px';\n        }\n\n        return (\n            <div class={`mb-2 position-relative ${className} clearfix`} style={`width: ${containerWidth}`}\n                onTouchstart={(e) => { e.stopPropagation(); }}\n                onTouchend={(e) => { e.stopPropagation(); }}\n                onTouchmove={(e) => { e.stopPropagation(); }}\n            >\n                {/* {JSON.stringify(dog, null, 4)} */}\n                {showPosition && dogPosition && <small class='position-absolute' style='left:0px; top: 50px;'>\n                    <span class={`badge badge-${dogPosition.class || 'primary'} mr-3`}>{dogPosition.icon && <i class={dogPosition.icon} />} {dogPosition.name}</span>\n                </small>}\n                <div\n                    class={`text-center border rounded-circle imageRounded ${imageClasses} mx-auto text-muted pt-2`}\n                    style={`${dog.image ? `background-image: url(\"${dog.image.s3SmallLink}\"); background-size: cover;` : ''} border-width: 2px !important;`}\n                >\n                    {/* {!dog.image && <i class='fas fa-dog mt-3' style='font-size: 40px;' />} */}\n                    {!dog.image && <span class='font-weight-lighter' style={`font-size: ${fontSize};`}>{util.ucfirst(dog.name, true)}</span>}\n                </div>\n                <div class='text-center text-overflow' style='line-height: 1.0em;'>\n                    <small>\n                        {/* <span class='float-right'>\n                            {dog.birth && <span class='mr-2'>{util.age(dog.birth, dog.deceased)}</span>}\n                            {dog.gender === 'female' ? <i class='fas fa-venus' /> : <i class='fas fa-mars' />}\n                        </span> */}\n                        <a href={`/dogs/public/${dog.uuidv4}`} onClick={(e) => onDogClick(e, dog.uuidv4, dogs)} class='stretched-link'>\n                            {showName && <>\n                                <span class='mb-1 font-weight-light'>\n                                    <nobr>\n                                        {dog.shortname || dog.name}\n                                        {hasBirthday && <>\n                                            <i class='fas fa-birthday-cake ml-3' />\n                                        </>}\n                                    </nobr>\n                                </span>\n                            </>}\n                        </a>\n                    </small>\n                </div>\n                <div class='text-center text-overflow' style='line-height: 1.0em;'>\n                    <small>\n                        {dog.birth && showAge && <>\n                            <span class='float-right'>\n                                {/* {daysUntilBirthday < 7 && <>\n                                    <span class='text-muted mr-2'>\n                                        <i class='fas fa-birthday-cake' /> in {daysUntilBirthday} days\n                                    </span>\n                                </>}                                 */}\n                                {dog.birth && <span class='mr-2'>{util.age(dog.birth, dog.deceased)}</span>}\n                                {dog.gender === 'female' ? <i class='fas fa-venus' /> : <i class='fas fa-mars' />}\n                            </span>\n                        </>}\n\n                        {showTeam && <><span class='font-weight-light'>{userStore.findTeam(dog.team)}</span><br /></>}\n\n                        {showInfo && <small class='text-muted'>\n                            {dog.weight && <><i class='fas fa-balance-scale ml-2' /> {util.format(dog.weight, 1)} kg</>}\n                            {dog.bodyScore && <><i class='fas fa-dog ml-2' /> {util.format(dog.bodyScore, 1)}</>}\n                        </small>}\n\n                    </small>\n                </div>\n            </div>\n        );\n    }\n}\n\nexport default Dog;\n","import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport { Text, Localizer } from 'preact-i18n';\n\nimport mu from '../../lib/musher-util';\n\nfunction celciusToFahrenheit(value) {\n    return ((value * 9/5) + 32);\n}\n\n@observer\nclass Temperature extends Component {\n    render() {\n\t\tconst { value = 0, smallUnit } = this.props;\n\t\tconst { userStore } = this.props.stores;\n\t\tconst { user } = userStore;\n\t\tconst { settings = {} } = user;\n\n        if (settings.imperial) {\n            return (<>\n                <nobr>\n                    {util.format(celciusToFahrenheit(value), 0)}°F\n                </nobr>\n            </>);\n        }\n\n\t\treturn (<>\n            <nobr>\n                {util.format(value, 1)}°C\n            </nobr>\n        </>);\n    }\n}\n\nexport default Temperature;\n","import { h, Component } from 'preact';\nimport { Link } from 'preact-router/match';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport linkState from 'linkstate';\nimport { route } from 'preact-router';\nimport { Text, Localizer } from 'preact-i18n';\n\nimport style from './style.css';\n\n\nconst initialState = {\n    menu: {\n\t\tprofile: false,\n\t\tmain: false,\n\t},\n\tsearchText: '',\n};\n\n@observer\nclass Navigation extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            ...initialState,\n        };\n    }\n\n\ttoggleDropdown = (e) => {\n\t\tconst { menu } = this.state;\n\t\tlet menuName = e.target.dataset.name;\n\t\tif (!menuName && e.target.parentNode) {\n\t\t\tmenuName = e.target.parentNode.dataset.name;\n\t\t}\n\t\tif (menuName) {\n\t\t\tmenu[menuName] = !menu[menuName];\n\t\t}\n\t\tthis.setState({ menu });\n\t}\n\n\ttoggleDarkmode = (e) => {\n        const { appState } = this.props.stores;\n\t\tappState.toggleDarkmode();\n\t\tthis.toggleDropdown(e);\n\t}\n\n\ttoggleViewmode = (e) => {\n        const { appState } = this.props.stores;\n\t\tlet mode = e.target.dataset.mode;\n\t\tif (!mode && e.target.parentNode) {\n\t\t\tmode = e.target.parentNode.dataset.mode;\n\t\t}\n\t\tappState.toggleViewmode(mode);\n\t\tthis.toggleDropdown(e);\n\t}\n\n\treloadApp = () => {\n\t\twindow.location.reload(true);\n\t}\n\n\tadminLoadAll = async (e) => {\n        const { userStore } = this.props.stores;\n        await userStore.getInfo(true);\n\t}\n\n\tchangeLanguage = (e) => {\n\t\tconst lang = e.target.value;\n\t\tconsole.log('changeLanguage', lang);\n\t\tconst { appState, userStore } = this.props.stores;\n\t\tconst { user = {} } = userStore;\n\t\tif (user.email) {\n\t\t\tuserStore.setLanguage({ email: user.email, language: lang });\n\t\t}\n\t\tappState.setLanguage(lang);\n\t}\n\n\tsearch = () => {\n\t\tconst { searchText } = this.state;\n\t\troute(`/search/${searchText}`);\n\t}\n\n    render() {\n\t\tconst { menu, searchText } = this.state;\n        const { appState, userStore } = this.props.stores;\n        const { darkmode, viewmode, isCordova } = appState;\n\t\tconst { allUsers, isAdmin, user, notifications = [] } = userStore;\n\t\tconst unreadNotificatins = notifications.filter(e => !e.read);\n\t\tconst unread = unreadNotificatins.length || 0;\n\t\tconst { language = 'en' } = user;\n\n\t\treturn (\n\t\t\t<nav class='navbar navbar-expand-lg navbar-themed fixed-top py-1' style='z-index: 99999;'>\n\t\t\t\t<a class='navbar-brand' href='/race/'>\n\t\t\t\t\t{/* <img src={`./assets/logo-jul-2020-v2-${darkmode ? 'black' : 'white'}.png`} height='30' class='position-absolute' style='top: 8px; left: 6px' /> */}\n\t\t\t\t\t<img src={`./assets/homerun-race-logo-2-${darkmode ? 'white-' : ''}small.png`} height='37' class='position-absolute' style='top: 5px; left: 6px' />\n\t\t\t\t\t<span class='font-weight-normal' style='margin-left: 30px; font-size: 20px;'>Homerun Race</span>\n\t\t\t\t</a>\n\n\t\t\t\t<button class='navbar-toggler' type='button'\n\t\t\t\t\tdata-name='main'\n\t\t\t\t\tonClick={this.toggleDropdown}\n\t\t\t\t>\n\t\t\t\t\t<span class='navbar-toggler-icon' />\n\t\t\t\t</button>\n\n\t\t\t\t<div class={`collapse navbar-collapse ${menu.main ? 'show' : ''}`} id='navbarSupportedContent'>\n\t\t\t\t\t<ul class='navbar-nav mr-auto ml-5'>\n\t\t\t\t\t\t<li class='nav-item'>\n\t\t\t\t\t\t\t<Link className='nav-link' activeClassName={'active'} href='/race'\n\t\t\t\t\t\t\t\tdata-name='main'\n\t\t\t\t\t\t\t\tstyle='font-size: 1.0em !important;'\n\t\t\t\t\t\t\t\tonClick={this.toggleDropdown}\n\t\t\t\t\t\t\t><i class='fas fa-flag-checkered' /> <Text id='header.races'>Løpene</Text></Link>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t\t<li class='nav-item'>\n\t\t\t\t\t\t\t<Link className='nav-link' activeClassName={'active'} href='/race/support'\n\t\t\t\t\t\t\t\tdata-name='main'\n\t\t\t\t\t\t\t\tstyle='font-size: 1.0em !important;'\n\t\t\t\t\t\t\t\tonClick={this.toggleDropdown}\n\t\t\t\t\t\t\t><i class='far fa-question-circle' /> <Text id='header.support'>Support</Text></Link>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t\t<li class='nav-item'>\n\t\t\t\t\t\t\t<Link className='nav-link' activeClassName={'active'} href='/race/news'\n\t\t\t\t\t\t\t\tdata-name='main'\n\t\t\t\t\t\t\t\tstyle='font-size: 1.0em !important;'\n\t\t\t\t\t\t\t\tonClick={this.toggleDropdown}\n\t\t\t\t\t\t\t><i class='fas fa-quote-right' /> <Text id='header.news'>Nyheter</Text></Link>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t\t{/* <li class='nav-item'>\n\t\t\t\t\t\t\t<Link className='nav-link' activeClassName={'active'} href='/'\n\t\t\t\t\t\t\t\tdata-name='main'\n\t\t\t\t\t\t\t\tonClick={this.toggleDropdown}\n\t\t\t\t\t\t\t><i class='fas fa-dog' /> <Text id='header.backtoapp'>The Musher</Text></Link>\n\t\t\t\t\t\t</li> */}\n\t\t\t\t\t\t{/* <li class='nav-item'>\n\t\t\t\t\t\t\t<Link className='nav-link' activeClassName={'active'} href='/news'\n\t\t\t\t\t\t\t\tdata-name='main'\n\t\t\t\t\t\t\t\tonClick={this.toggleDropdown}\n\t\t\t\t\t\t\t><i class='fas fa-quote-right' /> <Text id='header.news'>Nyheter</Text></Link>\n\t\t\t\t\t\t</li> */}\n\t\t\t\t\t\t{/* <li class='nav-item d-block d-lg-none'>\n\t\t\t\t\t\t\t<Link className='nav-link' activeClassName={'active'} href='/howto'\n\t\t\t\t\t\t\t\tdata-name='main'\n\t\t\t\t\t\t\t\tonClick={this.toggleDropdown}\n\t\t\t\t\t\t\t><i class='fas fa-quote-right' /> <Text id='header.howto'>Hvordan gjør man det?</Text></Link>\n\t\t\t\t\t\t</li> */}\n\t\t\t\t\t</ul>\n\n\t\t\t\t\t<ul class='navbar-nav ml-auto '>\n\t\t\t\t\t\t{/* <li class='nav-item mr-2'>\n\t\t\t\t\t\t\t<Link className='nav-link' activeClassName={'active'}\n\t\t\t\t\t\t\t\thref='/users/notifications'\n\t\t\t\t\t\t\t\tdata-name='main'\n\t\t\t\t\t\t\t\tonClick={this.toggleDropdown}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<i class='fas fa-bell mr-1' />\n\t\t\t\t\t\t\t\t{unread > 0 && <>\n\t\t\t\t\t\t\t\t\t<span class='badge badge-pill badge-danger'>{unread > 9 ? '9+' : unread}</span>\n\t\t\t\t\t\t\t\t</>}\n\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t</li> */}\n\t\t\t\t\t\t<li class='nav-item mr-2'>\n\t\t\t\t\t\t\t<div class='form-row align-items-center'>\n\t\t\t\t\t\t\t\t<div class='col-auto my-1' style='width: 80px;'>\n\t\t\t\t\t\t\t\t\t<select class='custom-select'\n\t\t\t\t\t\t\t\t\t\tstyle='background-color: inherit; border: none; padding: 0; height: 1.1em; font-size: 0.9em;'\n\t\t\t\t\t\t\t\t\t\tonInput={this.changeLanguage}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<option value='no' selected={language === 'no'}>🇳🇴 NO</option>\n\t\t\t\t\t\t\t\t\t\t<option value='en' selected={language === 'en'}>🇬🇧 EN</option>\n\t\t\t\t\t\t\t\t\t\t<option value='es' selected={language === 'es'}>🇪🇸 ES</option>\n\t\t\t\t\t\t\t\t\t\t<option value='de' selected={language === 'de'}>🇩🇪 DE</option>\n\t                                    <option value='fr' selected={language === 'fr'}>🇫🇷 FR</option>\n\t                                    <option value='ru' selected={language === 'ru'}>🇷🇺 RU</option>\n\t                                    <option value='se' selected={language === 'se'}>🇸🇪 SE</option>\n\t\t\t\t\t\t\t\t\t</select>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t\t<li class='nav-item d-block d-lg-none'>\n\t\t\t\t\t\t\t<Link className='nav-link' activeClassName={'active'}\n\t\t\t\t\t\t\t\tdata-name='main'\n\t\t\t\t\t\t\t\tonClick={this.toggleDarkmode}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<i class={`${darkmode ? 'fas text-warning' : 'far'} fa-moon`} /> <Text id='header.darkmode'>Nattmodus</Text>\n\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t\t<li class='nav-item mr-2 d-none d-lg-block'>\n\t\t\t\t\t\t\t<button class='btn btn-link'\n\t\t\t\t\t\t\t\tdata-name='profile'\n\t\t\t\t\t\t\t\tonClick={this.toggleDarkmode}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<i class={`${darkmode ? 'fas text-warning' : 'far'} fa-moon`} />\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t\t{/* <li class='nav-item ml-auto d-none d-lg-block'>\n\t\t\t\t\t\t\t<form class='form-inline my-2 my-lg-0'>\n\t\t\t\t\t\t\t\t<Localizer>\n\t\t\t\t\t\t\t\t\t<input class='form-control form-control-sm mr-sm-2' type='search' placeholder={<Text id='header.search-placeholder'>Søk etter det meste...</Text>}\n\t\t\t\t\t\t\t\t\t\tvalue={searchText}\n\t\t\t\t\t\t\t\t\t\tonInput={linkState(this, 'searchText')}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</Localizer>\n\t\t\t\t\t\t\t\t<button class='btn btn-sm btn-outline-success my-2 my-sm-0' type='button'\t\n\t\t\t\t\t\t\t\t\tonClick={this.search}\n\t\t\t\t\t\t\t\t><Text id='header.search'>Søk</Text></button>\n\t\t\t\t\t\t\t</form>\n\t\t\t\t\t\t</li> */}\n\t\t\t\t\t</ul>\n\n\t\t\t\t    \n\n\t\t\t\t</div>\n\t\t\t</nav>\n\t\t);\n\t}\n}\n\nexport default Navigation;\n","import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport { Text, Localizer } from 'preact-i18n';\n\nimport mu from '../../lib/musher-util';\n\nfunction kgToPounds(value) {\n    return 2.20462 * value;\n}\n\n@observer\nclass Weight extends Component {\n    render() {\n\t\tconst { value = 0, smallUnit } = this.props;\n\t\tconst { userStore } = this.props.stores;\n\t\tconst { user } = userStore;\n\t\tconst { settings = {} } = user;\n\n        if (settings.imperial) {\n            return (<>\n                <nobr>\n                    {util.format(kgToPounds(value), 0)} lb\n                </nobr>\n            </>);\n        }\n\n\t\treturn (<>\n            <nobr>\n                {util.format(value, 0)} kg\n            </nobr>\n        </>);\n    }\n}\n\nexport default Weight;\n","import { h, Component } from 'preact';\nimport { useEffect } from 'preact/hooks';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport { Text, Localizer } from 'preact-i18n';\nimport Markdown from 'preact-markdown';\n\nimport Header from './header';\nimport Submenu from './submenu';\nimport Heatmap from '../../../components/public/heatmap';\nimport RaceHeader from './raceheader';\nimport RaceText from './raceText';\nimport DisplayMusher from './displayMusher';\nimport ListMusher from './listMusher';\nimport Gauge from '../../../components/gauge';\n\nimport RaceTracking from '../../../components/public/raceTracking.js';\n\nimport mu from '../../../lib/musher-util';\nconst MARGIN_TOP = mu.marginTop(true, true);\nconst MARGIN_BOTTOM = mu.marginBottom();\n\nconst MARKDOWN_OPTIONS = {\n\tpedantic: false,\n\tgfm: true,\n\tbreaks: true,\n\tsanitize: false,\n\tsmartLists: true,\n\tsmartypants: true,\n\txhtml: true,\n};\n\nfunction PageTitle(title, classes = '', style = '') {\n\tuseEffect(() => {\n\t\tdocument.title = `Homerun Race: ${title}`;\n\t}, [title]);\n\treturn <span class={classes} style={style}>{title}</span>;\n}\n\nfunction getWindowDimensions() {\n    const { innerWidth: width, innerHeight: height } = window;\n    return {\n        width,\n        height\n    };\n}\n\nconst initialState = {\n\tisLoading: false,\n\temail: '',\n\tsubmenu: 'ads',\n\tjwtToken: util.getJwtToken(),\n\n\treloadInSec: null,\n\treloadIsActive: false,\n\n\tleaderboardMode: 'mushers',\n\tfilterByraceClass: '',\n\tshowLeaderBoard: true,\n\tshowNews: true,\n};\n\nconst RELOAD_INTERVAL_IN_SEC = 60;\n\n@observer\nclass ReloadTimer extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            ...initialState,\n        };\n\t\tthis.updateTimer = {};\n    }\n\n\tinitComponent = () => {\n\t\tthis.setState({\n\t\t\treloadIsActive: true,\n\t\t}, () => this.tickReloadTimeer());\n\t}\n\n\ttickReloadTimeer = () => {\n        const { reloadLastEpoch } = this.props;\n\t\tconst { reloadIsActive } = this.state;\n        if (reloadIsActive) {\n\t\t\tconst now = Math.floor(new Date().getTime() / 1000);\n\t\t\tconst reloadInSec = RELOAD_INTERVAL_IN_SEC - (now - reloadLastEpoch);\n\t\t\tthis.setState({ reloadInSec });\n\t\t\tclearTimeout(this.updateTimer.tick);\n\t\t\tthis.updateTimer.tick = setTimeout(() => this.tickReloadTimeer(), 1000);\n        }\n\t\treturn false;\n    }\n\n\tcomponentDidMount() {\n\t\tthis.initComponent();\n\t}\n\n\tcomponentWillUnmount() {\n\t\tclearTimeout(this.updateTimer.tick);\n\t}\n\n\trender() {\n\t\tconst { reloadInSec } = this.state;\n\t\tconst { radius = 13, fontSize = 11, classNames = '' } = this.props;\n\t\tconst reloadPercent = Math.floor(util.normalizeBetween(reloadInSec, 0, RELOAD_INTERVAL_IN_SEC, 0, 100))\n\n\t\treturn (<>\t\t\n\t\t\t<span class={classNames}>\n\t\t\t\t<Gauge key={`gauge-reload-page`}\n\t\t\t\t\tcolor='primary'\n\t\t\t\t\tradius={radius}\n\t\t\t\t\tshowPercentText={false}\n\t\t\t\t\tpercent={reloadPercent}\n\t\t\t\t\tshowCenterText={true}\n\t\t\t\t\tcenterText={reloadInSec}\n\t\t\t\t\tcenterTextSize={fontSize}\n\t\t\t\t\tcenterTextY={'55%'}\n\t\t\t\t/>\n\t\t\t</span>\n\t\t</>);\n\t}\n}\n\n@observer\nclass PublicRaceDetail extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            ...initialState,\n\t\t\treloadLastEpoch: Math.floor(new Date().getTime() / 1000),\n        };\n\t\tthis.updateTimer = {};\n    }\n\n\tloadLiveRaceResults = async (props = this.props, focusOnMushers) => {\n\t\tconst { raceStore } = props.stores;\n\t\tconst { race } = raceStore;\n\t\tawait raceStore.getRaceTrackerData(race.raceTrackerRace);\n\t\traceStore.getRaceTrackerActiveTeams();\n\t}\n\n\tloadRaceResults = async (props = this.props, teamIds, focusOnMushers) => {\n\t\tconst { raceStore } = props.stores;\n\t\tconst { raceid } = props;\n\n\t\tawait raceStore.loadWorkoutSummary(teamIds, raceid);\n\t\traceStore.getWorkoutSummaryActiveTeams(focusOnMushers);\n\t}\n\n\tasync loadRace(props = this.props) {\n\t\tthis.setState({ isLoading: true });\n\t\tconst { raceStore, appState } = props.stores;\n\t\tconst { raceid } = props;\n\t\tawait raceStore.load(raceid);\n\t\tconst { race } = raceStore;\n\t\tconst { focusOnMushers = [] } = appState;\n\n\t\tconst allTeamIds = race.classes.filter(currentClass => currentClass.contestants && currentClass.contestants.length > 0).map((currentClass) => {\n            return currentClass.contestants.filter(musher => musher.team > 0).map(musher => musher.team);\n\t\t}).flat();\n\n\t\tconst teamsInThisRace = focusOnMushers.filter(teamid => allTeamIds.indexOf(teamid) > -1);\n\t\tthis.setState({ allTeamIds });\n\t\tif (allTeamIds.length > 0) {\n\t\t\tawait raceStore.loadTeams(allTeamIds.join(','));\n\t\t\tif (race.liveRace > 0) {\n\t\t\t\tawait this.loadLiveRaceResults(props, focusOnMushers);\n\n\t\t\t} else {\n\t\t\t\tawait this.loadRaceResults(props, allTeamIds.join(','), focusOnMushers);\n\t\t\t}\n\n\t\t}\n\t\traceStore.getAllClassesSortedBy();\n\n\t\tconst isLiveRace = race.liveRace === 1;\n\n\t\tif (!isLiveRace) {\n\t\t\t// Set reload timer\n\t\t\tclearTimeout(this.updateTimer.reload);\n\t\t\tthis.updateTimer.reload = setTimeout(async () => {\n\t\t\t\tconst reloadLastEpoch = Math.floor(new Date().getTime() / 1000);\n\t\t\t\tthis.setState({ reloadLastEpoch });\n\t\t\t\tthis.loadRace();\n\t\t\t}, RELOAD_INTERVAL_IN_SEC * 1000);\n\t\t}\n\n\t\tthis.setState({ isLoading: false });\n\t}\n\n\tsetLeaderboardMode = (e) => {\n\t\tconst leaderboardMode = e.target.parentElement.dataset.mode || e.target.dataset.mode;\n\t\tthis.setState({ leaderboardMode })\n\t}\n\n\tchooseRaceClass = (e) => {\n\t\tconst filterByraceClass = e.target.value;\n\t\tthis.setState({ filterByraceClass })\n\t}\n\n\ttoggleShowLeaderBoard = (hide) => {\n\t\tconst { showLeaderBoard } = this.state;\n\t\tif (hide === true) {\n\t\t\tthis.setState({ showLeaderBoard: false });\n\t\t} else {\n\t\t\tthis.setState({ showLeaderBoard: !showLeaderBoard });\n\t\t}\n\t}\n\n\ttoggleShowNews = (hide) => {\n\t\tconst { showNews } = this.state;\n\t\tif (hide === true) {\n\t\t\tthis.setState({ showNews: false });\n\t\t} else {\n\t\t\tthis.setState({ showNews: !showNews });\n\t\t}\n\t}\n\n\tcomponentWillUnmount() {\n\t\tclearTimeout(this.updateTimer.reload);\n\t\tclearTimeout(this.updateTimer.tick);\n\t}\n\n\tcomponentDidMount() {\n\t\tthis.loadRace();\n\t\tconst { width, height } = getWindowDimensions();\n\t\tif (width < 800) {\n\t\t\tthis.toggleShowLeaderBoard(true);\n\t\t\tthis.toggleShowNews(true);\n\t\t}\n\t}\n\n\tcomponentWillReceiveProps(nextProps) {\n\t\tthis.loadRace(nextProps);\n\t}\n\n\trender() {\n\t\tconst { appState, raceStore, userStore } = this.props.stores;\n\t\tconst { user = {} } = userStore;\n\t\tconst { raceid, path } = this.props;\n\t\tconst { language = 'en', focusOnMushers = [], infoOnMushers = [] } = appState;\n\t\tconst { leaderboardMode, filterByraceClass, showLeaderBoard, showNews, reloadLastEpoch, allTeamIds = [] } = this.state;\n\n\t\tconst teamsInThisRace = focusOnMushers.filter(teamid => allTeamIds.indexOf(teamid) > -1);\n\n\t\tconst { activeTeams, teamList, waypoints, zoomToMarkers, race, classes } = raceStore;\n\n\t\tconst isLiveRace = race.liveRace === 1;\n\n\t\tif (isLiveRace) {\n\t\t\treturn (\n\t\t\t\t<div class='container-fluid position-relative p-0' style={`margin-top: 0; height: calc(100vh - ${MARGIN_TOP}); z-index: 9999;`}>\n\t\t\t\t\t<RaceTracking stores={this.props.stores} raceid={raceid} linkBase={'/race/'} />\n\t\t\t\t</div>\n\t\t\t);\n\t\t}\n\n\t\treturn (\n\t\t\t<>\n\t\t\t\t<div class='container-fluid h-100 position-relative p-0'>\n\t\t\t\t\t<Heatmap\n\t\t\t\t\t\tstores={this.props.stores}\n\t\t\t\t\t\traceid={raceid}\n\t\t\t\t\t\twaypoints={waypoints}\n\t\t\t\t\t\tzoomToMarkers={zoomToMarkers}\n\t\t\t\t\t\tfullscreenMap={true}\n\t\t\t\t\t\t// key={`heatmap-${focusOnMushers.join('-')}-${reloadLastEpoch}`}\n\t\t\t\t\t\t// mapid={`heatmap-${focusOnMushers.join('-')}-${reloadLastEpoch}`}\n\t\t\t\t\t/>\n\n\t\t\t\t\t<div class='position-absolute' style='top: 15px; left: 5px; z-index: 99999999;'>\n\t\t\t\t\t\t<div class='logo ml-3 clearfix text-white'>\n\t\t\t\t\t\t\t<img src={`./assets/homerun-race-logo-2-small.png`} height='37' class='float-left' />\n\t\t\t\t\t\t\t<a href={`/race/${race.id}`}>\n\t\t\t\t\t\t\t\t<span class='font-weight-bold text-dark' style='font-size: 1.4em;'>Homerun Race</span>\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t{!showLeaderBoard && <div class='position-absolute' style='top: 55px; left: 5px; z-index: 99999999; width: 150px; height: 50px;'>\n\t\t\t\t\t\t<button type='button' class='btn btn-sm btn-light' onClick={this.toggleShowLeaderBoard}>\n\t\t                    <ReloadTimer stores={this.props.stores} classNames='float-right ml-2' reloadLastEpoch={reloadLastEpoch} />\n\t\t\t\t\t\t\t<span class='float-left'>Leaderboard</span>\n\t\t\t\t\t\t</button>\n\t\t\t\t\t</div>}\n\n\t\t\t\t\t{!showNews && <div class='position-absolute' style='bottom: 40px; right: 5px; z-index: 99999999; width: 150px; height: 50px;'>\n\t\t\t\t\t\t<button type='button' class='btn btn-sm btn-primary float-right' onClick={this.toggleShowNews}>\n\t\t\t\t\t\t\t<span class='float-left'>News</span>\n\t\t\t\t\t\t</button>\n\t\t\t\t\t</div>}\n\n\t\t\t\t\t{showNews && race && race.articles && race.articles && race.articles.length >  0 && <div class='position-absolute' style='bottom: 50px; right: 5px; z-index: 99999999; width: 350px; height: 40vh;'>\n\t\t\t\t\t\t<div class='container-fluid bg-light rounded-lg py-2 overflow-auto mt-2' style='opacity: 0.9; height: 90%;'>\n\t\t\t\t\t\t\t<div class='row bg-light'>\n\t\t\t\t\t\t\t\t<div class='col-12 bg-primary text-white'>\n\t\t\t\t\t\t\t\t\t<button type='button' class='btn btn-sm btn-danger float-right' onClick={this.toggleShowNews}>\n\t\t\t\t\t\t\t\t\t\tX\n\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\tNews\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class='col-12 bg-light'>\n\t\t\t\t\t\t\t\t\t{race && race.articles && race.articles.reverse().map(article => <div class='border-bottom mb-2 pb-2 clearfix'>\n\t\t\t\t\t\t\t\t\t\t<small class='text-muted float-right'>{util.formatDate(article.date, { locale: language, hour12: false, hour: '2-digit', minute: '2-digit' })}</small>\n\t\t\t\t\t\t\t\t\t\t<h5>{mu.replaceImages(article.title, article.images, language, false)}</h5>\n\t\t\t\t\t\t\t\t\t\t{article.image && <img src={article.image.s3LargeLink} class='float-right rounded-lg ml-2' style='height: 100px;' />}\n\n\t\t\t\t\t\t\t\t\t\t{article.ingress && <strong>\n\t\t\t\t\t\t\t\t\t\t\t<Markdown markdown={mu.replaceImages(article.ingress, article.images, language)} markdownOpts={MARKDOWN_OPTIONS} />\n\t\t\t\t\t\t\t\t\t\t</strong>}\n\t\t\t\t\t\t\t\t\t\t{article.body && <p>\n\t\t\t\t\t\t\t\t\t\t\t<Markdown markdown={mu.replaceImages(article.body, article.images, language)} markdownOpts={MARKDOWN_OPTIONS} />\n\t\t\t\t\t\t\t\t\t\t</p>}\n\t\t\t\t\t\t\t\t\t</div>)}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>}\n\n\t\t\t\t\t{showLeaderBoard && <div class='position-absolute' style='top: 55px; left: 5px; z-index: 99999999; width: 350px; height: 90vh;'>\n\t\t\t\t\t\t<div class='container-fluid bg-light rounded-lg py-2 overflow-auto mt-2' style='opacity: 0.9; height: 90%;'>\n\t\t\t\t\t\t\t<div class='row bg-light'>\n\t\t\t\t\t\t\t\t<div class='col-12'>\n\t\t\t\t\t\t\t\t\t<button type='button' class='btn btn-sm btn-link float-right' onClick={this.toggleShowLeaderBoard}>\n\t\t\t\t\t\t\t\t\t\tX\n\t\t\t\t\t\t\t\t\t</button>\n\n\t\t\t\t\t\t\t\t\t<ReloadTimer stores={this.props.stores} classNames='float-right' radius={15} fontSize={13} reloadLastEpoch={reloadLastEpoch} />\n\t\t\t\t\t\t\t\t\t<h5 class='mb-0'>Leaderboard</h5>\n\t\t\t\t\t\t\t\t\t{PageTitle(race.title, 'font-weight-normal text-dark', 'font-size: 1.0em;')}\n\n\t\t\t\t\t\t\t\t\t<select class='form-control-plaintext' aria-describedby='classHelp'\n\t\t\t\t\t\t\t\t\t\tonInput={this.chooseRaceClass}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<option value=''>-- Choose class --</option>\n\t\t\t\t\t\t\t\t\t\t{race.classes && race.classes.sort((a, b) => a.distance - b.distance).map(currentClass => <>\n\t\t\t\t\t\t\t\t\t\t\t<option value={currentClass.id}>{currentClass.title} ({currentClass.totalMushers})</option>\n\t\t\t\t\t\t\t\t\t\t</>)}\n\t\t\t\t\t\t\t\t\t</select>\n\n\t\t\t\t\t\t\t\t\t<ul class='mt-2 nav nav-tabs nav-justified tracking-nav'>\n\t\t\t\t\t\t\t\t\t\t<li class='nav-item' style='width: 33%;'>\n\t\t\t\t\t\t\t\t\t\t\t<a class={`nav-link ${leaderboardMode === 'mushers' ? 'active' : ''}`} onClick={this.setLeaderboardMode} data-mode='mushers'><Text id='races.mushers'>Deltakere</Text></a>\n\t\t\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t\t\t<li class='nav-item' style='width: 33%;'>\n\t\t\t\t\t\t\t\t\t\t\t<a class={`nav-link ${leaderboardMode === 'onTrail' ? 'active' : ''}`} onClick={this.setLeaderboardMode} data-mode='onTrail'><Text id='races.on-trail'>På sporet nå</Text></a>\n\t\t\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t\t\t<li class='nav-item' style='width: 33%;'>\n\t\t\t\t\t\t\t\t\t\t\t<a class={`nav-link ${leaderboardMode === 'favorites' ? 'active' : ''}`} onClick={this.setLeaderboardMode} data-mode='favorites'><Text id='races.favorites'>Favoritter</Text></a>\n\t\t\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t{leaderboardMode === 'mushers' && <>\n\n\t\t\t\t\t\t\t\t{race.classes && race.classes.sort((a, b) => a.distance - b.distance)\n\t\t\t\t\t\t\t\t\t.filter((currentClass) => {\n\t\t\t\t\t\t\t\t\t\tif (filterByraceClass) {\n\t\t\t\t\t\t\t\t\t\t\tif (filterByraceClass === currentClass.id) {\n\t\t\t\t\t\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t.map(currentClass => <>\n\t\t\t\t\t\t\t\t\t\t<div class='row mt-2 bg-primary text-white'>\n\t\t\t\t\t\t\t\t\t\t\t<div class='col-12'>\n\t\t\t\t\t\t\t\t\t\t\t\t<h5 class='m-0'>\n\t\t\t\t\t\t\t\t\t\t\t\t\t{currentClass.title}\n\t\t\t\t\t\t\t\t\t\t\t\t</h5>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t{classes[currentClass.id] && classes[currentClass.id].contestants && classes[currentClass.id].contestants.map((contestant, idx) => {\n\t\t\t\t\t\t\t\t\t\t\tconst { musher, currentTeam, currentStages, currentResults, completed, duration,\n\t\t\t\t\t\t\t\t\t\t\t\tnormalizedDuration, weightedNormalizedDuration, totalKcalRelated, weightedTotalKcal,\n\t\t\t\t\t\t\t\t\t\t\t\tflatTotalKcal, percentHarder, loadIndex, raceDistance, isDone } = contestant;\n\t\t\t\t\t\t\t\t\t\t\treturn (<>\n\t\t\t\t\t\t\t\t\t\t\t\t<ListMusher stores={this.props.stores} team={currentTeam} idx={idx} />\n\t\t\t\t\t\t\t\t\t\t\t</>);\n\t\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\t</>)}\n\n\n\t\t\t\t\t\t\t\t{/* {(teamList && teamList.length > 0) ? teamList.filter((team) => {\n\t\t\t\t\t\t\t\t\tif (filterByraceClass) {\n\t\t\t\t\t\t\t\t\t\tconst raceClass = raceStore.getClassByTeamId(team.id);\n\t\t\t\t\t\t\t\t\t\tif (filterByraceClass === raceClass.id) {\n\t\t\t\t\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t\t\t}).map((team, idx) => <ListMusher stores={this.props.stores} team={team} idx={idx} />) : <>\n\t\t\t\t\t\t\t\t\t<div class='p-2 text-center'>\n\t\t\t\t\t\t\t\t\t\t<h5><Text id='races.no-teams-signed-up'>Ingen team påmeldt ennå...</Text></h5>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</>} */}\n\t\t\t\t\t\t\t</>}\n\n\t\t\t\t\t\t\t{leaderboardMode === 'favorites' && <>\n\t\t\t\t\t\t\t\t{(teamsInThisRace && teamsInThisRace.length > 0) ? teamsInThisRace.map((teamId, idx) => {\n\t\t\t\t\t\t\t\t\t\tconst team = raceStore.getTeamById(teamId);\n\t\t\t\t\t\t\t\t\t\treturn <ListMusher stores={this.props.stores} team={team} idx={idx} />;\n\t\t\t\t\t\t\t\t\t}\t\n\t\t\t\t\t\t\t\t) : <>\n\t\t\t\t\t\t\t\t\t<div class='p-2 text-center'>\n\t\t\t\t\t\t\t\t\t\t<h5><Text id='races.no-teams-signed-up'>Ingen team påmeldt ennå...</Text></h5>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</>}\n\t\t\t\t\t\t\t</>}\n\n\t\t\t\t\t\t\t{leaderboardMode === 'onTrail' && <>\n\t\t\t\t\t\t\t\t<div class='text-muted text-center bg-light'><Text id='races.mushers-on-trail'>Mushers on trail</Text>: {activeTeams.length}</div>\n\t\t\t\t\t\t\t\t{(activeTeams && activeTeams.length > 0) ? activeTeams.filter((line) => {\n\t\t\t\t\t\t\t\t\tif (filterByraceClass) {\n\t\t\t\t\t\t\t\t\t\tconst raceClass = raceStore.getClassByTeamId(line.team);\n\t\t\t\t\t\t\t\t\t\tif (filterByraceClass === raceClass.id) {\n\t\t\t\t\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t\t\t}).map((line, idx) => {\n\t\t\t\t\t\t\t\t\tconst team = raceStore.getTeamById(line.team);\n\t\t\t\t\t\t\t\t\treturn (<ListMusher stores={this.props.stores} team={team} idx={idx} />);\n\t\t\t\t\t\t\t\t}) : <>\n\t\t\t\t\t\t\t\t\t<div class='p-2 text-center'>\n\t\t\t\t\t\t\t\t\t\t<h5><Text id='races.no-team-on-trail'>Ingen team tracker live i The Musher appen akkurat nå...</Text></h5>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</>}\n\t\t\t\t\t\t\t</>}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>}\n\n\t\t\t\t\t{(infoOnMushers && infoOnMushers.length > 0 && teamList && teamList.length > 0) && <>\n\t\t\t\t\t\t<div class='position-absolute overflow-auto' style='top: 15px; right: 55px; z-index: 99999999; max-width: 830px; max-height: 90%;'>\n\t\t\t\t\t\t\t<div class=''>\n\t\t\t\t\t\t\t\t<div class='d-flex flex-wrap'>\n\t\t\t\t\t\t\t\t\t{infoOnMushers.map(teamId => <DisplayMusher stores={this.props.stores} teamId={teamId} />)}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</>}\n\n\t\t\t\t</div>\n\n\t\t\t</>\n\t\t);\n\t}\n}\n\nexport default PublicRaceDetail;\n","import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport { Text, Localizer } from 'preact-i18n';\n\nimport DogSimplePublic from './simplePublic';\n\n@observer\nclass DogScroller extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            imageIdx: 0,\n        };\n    }\n\n    scrollImages = (e) => {\n        const { dogs } = this.props;\n\n        const { scrollLeft, scrollWidth, clientWidth } = e.target;\n        const imageStep = clientWidth;\n        const imageIdx = scrollLeft / imageStep;\n        // console.log({ e, imageStep, imageIdx, scrollLeft, scrollWidth, clientWidth });\n\n        const nearestInt = Math.round(imageIdx);\n        const diff = Math.abs(nearestInt - imageIdx);\n        // console.log({ nearestInt, diff });\n        if (Number.isInteger(imageIdx) || diff < 0.1) {\n            this.setState({\n                imageIdx: nearestInt,\n            });\n        }\n    }\n\n    sortByName = (a, b) => {\n        const { allDogs = [] } = this.props;\n        const dogA = allDogs.find(e => e.id === a);\n        const dogB = allDogs.find(e => e.id === b);\n        if (dogA && dogB) {\n            if (dogA.name > dogB.name) {\n                return 1;\n            }\n        }\n        return -1;\n    }\n\n    render() {\n        const { imageIdx } = this.state;\n        const { dogs, allDogs = [], size = 'medium', onDogClick = () => {} } = this.props;\n\n        return (\n            <div class='w-100'>\n                <div\n                    class='d-flex flex-row flex-nowrap no-scrollbar'\n                    style='overflow: auto; scroll-snap-type: x mandatory;'\n                    onScroll={this.scrollImages}\n                >\n                    {dogs && dogs.sort(this.sortByName).map((dogId, idx) => {\n                        const dog = allDogs.find(e => e.id === dogId);\n                        if (!dog) {\n                            return '';\n                        }\n                        return (\n                            <div class='col clearfix position-relative p-0 mx-2'>\n                                <div\n                                    class={`w-100 h-100 text-center rounded-lg imageContainer d-flex justify-content-center align-items-center`}\n                                    style={`\n                                        flex-wrap: wrap;\n                                        overflow-y: hidden;\n                                    `}\n                                    onTouchstart={(e) => { e.stopPropagation(); }}\n                                    onTouchend={(e) => { e.stopPropagation(); }}\n                                    onTouchmove={(e) => { e.stopPropagation(); }}\n                                >\n                                    <DogSimplePublic\n                                        stores={this.props.stores}\n                                        dog={dog}\n                                        dogs={allDogs.filter(d => dogs.indexOf(d.id) > -1).sort((a, b) => a.name > b.name ? 1 : -1)}\n                                        className='mx-auto'\n                                        showName={true}\n                                        showPosition={false}\n                                        size={size}\n                                        onDogClick={onDogClick} \n                                    />\n                                    {/* <xmp>{JSON.stringify(img, null, 4)}</xmp> */}\n                                </div>\n                            </div>\n                        );\n                    })}\n                </div>\n            </div>\n        );\n    }\n}\n\nexport default DogScroller;\n","import { h, Component } from 'preact';\nimport { observer } from 'mobx-preact';\n\nconst initialState = {\n};\n\n@observer\nclass RaceText extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            ...initialState,\n        };\n    }\n\n    render() {\n\t\tconst { appState } = this.props.stores;\n\t\tconst { text } = this.props;\n\t\tconst { darkmode, language = 'en' } = appState;\n\n        let finalText = text;\n\n        const regex = new RegExp(`/<${language}>(.*?)<\\/${language}>/`);\n        const parsedText = text.replace(regex, '$1');\n        if (parsedText) {\n            finalText = text;\n        }\n\n\t\treturn (\n\t\t\t<>\n                {finalText}\n\t\t\t</>\n\t\t);\n\t}\n}\n\nexport default RaceText;\n","import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport { Text, Localizer, withText } from 'preact-i18n';\n\nimport mu from '../../lib/musher-util';\n\nconst MARGIN_TOP = mu.marginTop(false);\nconst MARGIN_BOTTOM = mu.marginBottom();\n\n@observer\nclass Drawer extends Component {\n\n    render() {\n        const { appState } = this.props.stores;\n        const { darkmode } = appState;\n        const { children, onCloseClick = () => {}, classNames = 'fixed-bottom', width = '100vw' } = this.props;\n        return (\n            <div\n                class={`${classNames} ${darkmode ? 'bg-darkmode' : 'bg-lightmode'} border rounded rounded-lg pt-4 pb-3 px-2`}\n                style={`\n                    bottom: 0;\n                    left: 0;\n                    width: ${width};\n                    max-height: 80vh;\n                    min-height: 10vh;\n                    overflow: auto;\n                    z-index: 999999;\n                    border-radius: 20px 20px 0 0 !important;\n                    border-top-width: 5px !important;\n                    box-shadow: 0px 0 5px rgba(0, 0, 0, 0.8);\n                `}\n                onTouchmove={mu.captureEvents}\n                onScroll={mu.captureEvents}\n            >\n                <button\n                    class='btn btn-warning btn-sm float-right'\n                    onClick={onCloseClick}\n                >\n                    <i class='fas fa-times' />\n                </button>\n                {children}\n            </div>\n        );\n    }\n}\n\nexport default Drawer;\n","import { h, Component } from 'preact';\nimport { useEffect } from 'preact/hooks';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport { Text, Localizer } from 'preact-i18n';\nimport { route } from 'preact-router';\nimport Markdown from 'preact-markdown';\nimport linkstate from 'linkstate';\n\nimport Trackmap from '../../components/public/trackmap';\nimport Gauge from '../../components/gauge';\n\nimport DogScroller from '../../components/dog/scroller';\nimport ImageScroller from '../imageScroller';\n\nimport Overlay from '../../components/overlay/';\nimport Drawer from '../../components/drawer/';\nimport HeaderCustom from '../../components/header/custom';\nimport Loading from '../../components/loading/';\nimport TeamsPublicDetail from '../../routes/teams/publicDetail';\nimport DogPublicDetail from '../../routes/dogs/publicDetail';\nimport RaceLiveCheckpointResult from '../../components/races/liveCheckpointResult';\nimport LineGraph from '../../components/lineGraph';\nimport States from '../../components/states';\nimport PublicTeam from '../team/public';\n\nimport mu from '../../lib/musher-util';\n\n@observer\nclass RaceTrackingMusherDetail extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n        };\n    }\n\n    render() {\n        const { wp, musher } = this.props;\n        const { raceStore, userStore } = this.props.stores;\n        const { waypoints, totalTrackLength } = raceStore;\n\n        const raceClass = raceStore.getClassByBib(wp.bib);\n\n        const team = raceStore.getTeamById(musher.team);\n        const user = team.members ? team.members.find(m => m.email === musher.email) : {};\n\n        const { isAdmin } = userStore;\n        const { user: currentUser = {} } = userStore;\n\n        const totals = raceStore.getTotalsByTeamId(musher.team);\n        const image = mu.getImage({ user, team, priority: 'user', fallback: musher.image1 });\n        const shortname = mu.displayNameShort(user) || mu.displayNameShort(musher);\n\n        const totalDistancePercent = util.format(wp.totalDistanceOnTrack / totalTrackLength * 100, 0);\n        const restPercent = util.format(wp.restTime / wp.raceTime * 100, 0);\n        const runPercent = 100 - restPercent;\n\n        const locale = 'en-GB';\n        const xTicks = [];\n        const dataLeft = [];\n        const legendLeft = [];\n        const unitLeft = [];\n        if (wp && wp.speeds && wp.speeds.length > 0) {\n            const xTicksRange = util.range(wp.speeds[0].timestamp, wp.speeds[wp.speeds.length - 1].timestamp, 600);\n            const partSize = Math.ceil(xTicksRange.length / 5);\n            const parts = Math.floor(xTicksRange.length / partSize);\n            // if (showDebug) {\n                // console.log({ xTicksRange, parts, partSize });\n            // }\n            for (let i = 0, l = xTicksRange.length; i < l; i += partSize) {\n                xTicks.push(\n                    mu.formatDate(util.parseInputDate(xTicksRange[i]), { locale, day: 'numeric', month: 'numeric', hour12: false, hour: '2-digit', minute: '2-digit' })\n                );\n            }\n            xTicks.push(\n                mu.formatDate(util.parseInputDate(xTicksRange[xTicksRange.length - 1]), { locale, day: 'numeric', month: 'numeric', hour12: false, hour: '2-digit', minute: '2-digit' })\n            );\n            // const smoothed = mu.smoothArray(elevations, 5);\n            const data = wp.speeds.map((speed) => ({\n                x: speed.timestamp,\n                y: speed.speed * 3.6,\n            }));\n            dataLeft.push(data);\n            legendLeft.push('Avg speed');\n            unitLeft.push('km/t');\n        }\n        const isYourTeam = team.members && team.members.indexOf(currentUser.id) > -1;\n        const isFollowing = team.followers && team.followers.indexOf(currentUser.id) > -1;\n        const hasRequestedFollow = team.followRequests && team.followRequests.findIndex(e => e.id === currentUser.id) > -1;\n        // console.log({ xTicks });\n\n        const now = Math.floor(new Date().getTime() / 1000);\n\n        return (<>\n            <div class='d-flex justify-content-between'>\n                <div class='flex-fill bg-light rounded-lg p-3 align-middle'>\n                    <div>\n                        <small class='text-muted'>\n                            <i class='fas fa-list' /> Ranking\n                        </small>\n                    </div>\n                    <div class='text-center' style='font-size: 2.0em;'>\n                        {wp.rank}\n                    </div>\n                </div>\n                {wp.finishTime < 9999999999 ? <>\n                    {wp.diffToFirstFinishTime > 0 ? <>\n                        <div class='flex-fill bg-light rounded-lg p-3 align-middle ml-2'>\n                            <div>\n                                <small class='text-muted'>\n                                    <i class='fas fa-clock' /> Diff to 1st\n                                </small>\n                            </div>\n                            <div class='text-center' style='font-size: 2.0em;'>\n                                {util.secToHms(wp.diffToFirstFinishTime)}\n                            </div>\n                        </div>\n                    </> : <>\n                        <div class='flex-fill bg-light rounded-lg p-3 align-middle ml-2'>\n                            <div>\n                                <small class='text-muted'>\n                                    <i class='fas fa-clock' /> Start time\n                                </small>\n                            </div>\n                            <div class='text-center' style='font-size: 1.5em;'>\n                                {util.formatDate(util.parseInputDate(musher.startTime || raceClass.startDate || wp.startTime), { locale: 'no-NB', hour12: false, hour: '2-digit', minute: '2-digit' })}\n                            </div>\n                        </div>\n                        <div class='flex-fill bg-light rounded-lg p-3 align-middle ml-2'>\n                            <div>\n                                <small class='text-muted'>\n                                    <i class='fas fa-clock' /> Finish time\n                                </small>\n                            </div>\n                            <div class='text-center' style='font-size: 1.5em;'>\n                                {util.formatDate(util.parseInputDate(wp.finishTime), { locale: 'no-NB', hour12: false, hour: '2-digit', minute: '2-digit' })}\n                            </div>\n                        </div>\n                    </>}\n                </> : <>\n                    <div class='flex-fill bg-light rounded-lg p-3 align-middle ml-2'>\n                        <div>\n                            <small class='text-muted'>\n                                <i class='fas fa-tachometer-alt' /> Current speed\n                            </small>\n                        </div>\n                        <div class='text-center' style='font-size: 2.0em;'>\n                            {util.format(wp.speed || 0, 1)} <span class='text-muted' style='font-size: 0.5em;'>km/h</span>\n                        </div>\n                    </div>\n                    <div class='flex-fill bg-light rounded-lg p-3 align-middle ml-2'>\n                        <div>\n                            <small class='text-muted'>\n                                <i class='fas fa-stopwatch' /> Last update\n                            </small>\n                        </div>\n                        <div class='text-center' style='font-size: 2.0em;'>\n                            {util.secToHms(now - wp.timestamp)}\n                        </div>\n                    </div>\n                </>}\n            </div>\n\n            <div class='d-flex justify-content-between mt-2'>\n                <div class='flex-fill bg-light rounded-lg p-3 align-middle'>\n                    <div>\n                        <small class='text-muted'>\n                            <i class='fas fa-road' /> Total distance\n                        </small>\n                    </div>\n                    <div class='text-center mt-2'>\n                        <Gauge key={`gauge-reload-page`}\n                            color='primary'\n                            radius={40}\n                            showPercentText={false}\n                            percent={totalDistancePercent}\n                            showCenterText={true}\n                            centerText={`${totalDistancePercent}%`}\n                            centerTextSize={18}\n                            centerTextY={'55%'}\n                        />\n                    </div>\n                    <div class='text-center'>\n                        <small>\n                            {util.format(wp.totalDistanceOnTrack, 1)} / {util.format(totalTrackLength, 1)} <span class='text-muted'>km</span><br />\n                            <i class='fas fa-clock ml-2 text-muted' /> {util.secToHms(wp.raceTime)}\n                        </small>\n\n                    </div>\n                </div>\n                <div class='flex-fill bg-light rounded-lg p-3 align-middle ml-2'>\n                    <div>\n                        <small class='text-muted'>\n                            <i class='fas fa-bed' /> Rest\n                        </small>\n                    </div>\n                    <div class='text-center mt-2'>\n                        <Gauge key={`gauge-reload-page`}\n                            color={restPercent < 40 ? (restPercent < 30 ? 'danger' : 'warning') : 'success'}\n                            radius={40}\n                            showPercentText={false}\n                            percent={restPercent}\n                            showCenterText={true}\n                            centerText={`${restPercent}%`}\n                            centerTextSize={18}\n                            centerTextY={'55%'}\n                        />\n                    </div>\n                    <div class='text-center'>\n                        <small>\n                            {restPercent} <span class='text-muted'>%</span><br />\n                            <i class='fas fa-clock ml-2 text-muted' /> {util.secToHms(wp.restTime)}\n                        </small>\n                    </div>\n                </div>\n                {/* <div class='flex-fill bg-light rounded-lg p-3 align-middle ml-2'>\n                    <div>\n                        <small class='text-muted'>\n                            Current speed\n                        </small>\n                    </div>\n                    <div class='text-center' style='font-size: 2.0em;'>\n                        {util.format(wp.speed || 0, 1)} <span class='text-muted' style='font-size: 0.5em;'>km/h</span>\n                    </div>\n                </div> */}\n            </div>\n\n            <div class='d-flex justify-content-between mt-2'>\n                <div class='flex-fill bg-light rounded-lg p-3 align-middle w-100'>\n                    <States stores={this.props.stores} states={wp.states} duration={wp.raceTime} key={`state-${wp.bib}`} />\n                </div>\n            </div>\n\n            {wp.finishTime < 9999999999 ? <>\n                {wp.diffToFirstFinishTime > 0 ? <>\n                    <div class='d-flex justify-content-between mt-2'>\n                        <div class='flex-fill bg-light rounded-lg p-3 align-middle'>\n                            <div>\n                                <small class='text-muted'>\n                                    <i class='fas fa-clock' /> Start time\n                                </small>\n                            </div>\n                            <div class='text-center' style='font-size: 1.5em;'>\n                                {util.formatDate(util.parseInputDate(musher.startTime || raceClass.startDate || wp.startTime), { locale: 'no-NB', hour12: false, hour: '2-digit', minute: '2-digit' })}\n                            </div>\n                        </div>\n                        <div class='flex-fill bg-light rounded-lg p-3 align-middle ml-2'>\n                            <div>\n                                <small class='text-muted'>\n                                    <i class='fas fa-clock' /> Finish time\n                                </small>\n                            </div>\n                            <div class='text-center' style='font-size: 1.5em;'>\n                                {util.formatDate(util.parseInputDate(wp.finishTime), { locale: 'no-NB', hour12: false, hour: '2-digit', minute: '2-digit' })}\n                            </div>\n                        </div>\n                    </div>\n                </> : <></>}\n            </> : <>\n                <div class='d-flex justify-content-between mt-2'>\n                    <div class='flex-fill bg-light rounded-lg p-3 align-middle'>\n                        <div>\n                            <small class='text-muted'>\n                                <i class='fas fa-arrow-down' /> Behind\n                            </small>\n                        </div>\n                        <div class='text-center'>\n                            {util.format(wp.distanceToBehind, 1)} <span class='text-muted'>km</span>\n                        </div>\n                    </div>\n                    <div class='flex-fill bg-light rounded-lg p-3 align-middle'>\n                        <div>\n                            <small class='text-muted'>\n                                Team\n                            </small>\n                        </div>\n                        <div class='text-center'>\n                            <i class='fas fa-dog' />\n                        </div>\n                    </div>\n                    <div class='flex-fill bg-light rounded-lg p-3 align-middle'>\n                        <div>\n                            <small class='text-muted'>\n                                <i class='fas fa-arrow-up' /> In front\n                            </small>\n                        </div>\n                        <div class='text-center'>\n                            {util.format(wp.distanceToForward, 1)} <span class='text-muted'>km</span>\n                        </div>\n                    </div>\n                    <div class='flex-fill bg-light rounded-lg p-3 align-middle'>\n                        <div>\n                            <small class='text-muted'>\n                                <i class='fas fa-arrow-up' /> To first\n                            </small>\n                        </div>\n                        <div class='text-center'>\n                            {util.format(wp.distanceToFirst, 1)} <span class='text-muted'>km</span>\n                        </div>\n                    </div>\n                </div>\n                <div class='d-flex justify-content-between mt-2'>\n                    <div class='flex-fill bg-light rounded-lg p-3 align-middle'>\n                        <div>\n                            <small class='text-muted'>\n                                <i class='fas fa-flag-checkered' /> Finish\n                            </small>\n                        </div>\n                        <div class='text-center' style='font-size: 2.0em;'>\n                            {util.format(wp.distanceToFinish, 1)} <span class='text-muted' style='font-size: 0.5em;'>km</span>\n                        </div>\n                    </div>\n                </div>\n            </>}\n\n            <div class='d-flex justify-content-between mt-2'>\n                <div class='flex-fill bg-light rounded-lg p-3 align-middle'>\n                    <div>\n                        <small class='text-muted'>\n                            <i class='fas fa-clock' /> Racetime\n                        </small>\n                    </div>\n                    <div class='text-center' style='font-size: 2.0em;'>\n                        {util.secToHms(wp.raceTime)}\n                    </div>\n                </div>\n                <div class='flex-fill bg-light rounded-lg p-3 align-middle ml-2'>\n                    <div>\n                        <small class='text-muted'>\n                            <i class='fas fa-bed' /> Resttime\n                        </small>\n                    </div>\n                    <div class='text-center' style='font-size: 2.0em;'>\n                        {util.secToHms(wp.restTime)}\n                    </div>\n                </div>\n            </div>\n\n\n            <div class='d-flex justify-content-between mt-2'>\n                <div class='flex-fill bg-light rounded-lg p-3 align-middle w-100'>\n                    <div>\n                        <small class='text-muted'>\n                            <i class='fas fa-tachometer-alt' /> Speed plot\n                        </small>\n                    </div>\n                    <div class='w-100 mt-2 overflow-auto'>\n                        <LineGraph\n                            stores={this.props.stores}\n                            width={1000}\n                            height={200}\n                            showXTicks={1}\n                            // xTicksVal={val => `${val}`}\n                            xTicks={xTicks}\n                            paddingTop={30}\n                            paddingLeft={50}\n                            yTicksLeftWidth={'50px'}\n                            lineFromXzero={true}\n                            lineFromXmax={true}\n                            // xTicksLink={'/workouts/week/'}\n\n                            // yMaxLeft={25}\n                            dataLeft={dataLeft}\n                            legendLeft={legendLeft}\n                            dataFillLeft={[1]}\n                            // yMaxLeft={30}\n                            // yMinLeft={0}\n                            showYTicksLeft={1}\n                            yTicksLeftPostfix={' km/t'}\n                            unitLeft={unitLeft}\n                            avgWindowLeft={[0, 0]}\n                            smoothLeft={[0, 0]}\n\n                            // dataRight={dataRight}\n                            // legendRight={legendRight}\n                            // // dataRight={[graphWorkoutSummaryWeekElevationCurrent, graphWorkoutSummaryWeekElevationPrev]}\n                            // // legendRight={[`${seasonStart} ${ascend}`, `${seasonStart - 1} ${ascend}`]}\n                            // showYTicksRight={dataRight.length > 0 ? 1 : 0}\n                            // yTicksRightPostfix={'km/t'}\n                            // unitRight={unitRight}\n                            // avgWindowRight={[0, 0, 0]}\n                            // smoothRight={[1, 1, 1]}\n\n                            // marker={week}\n                        />\n                        {/* {JSON.stringify(wp.speeds, null, 4)} */}\n                    </div>\n                </div>\n            </div>\n\n\n            {/* distanceToFinish: {JSON.stringify(wp.distanceToFinish, null, 4)}<br />\n            distanceToFirst: {JSON.stringify(wp.distanceToFirst, null, 4)}<br />\n            distanceToForward: {JSON.stringify(wp.distanceToForward, null, 4)}<br />\n            distanceToBehind: {JSON.stringify(wp.distanceToBehind, null, 4)}<br />\n            speed: {JSON.stringify(wp.speed, null, 4)}<br />\n            bearing: {JSON.stringify(wp.bearing, null, 4)}<br />\n            finishTime: {util.isoDate(wp.finishTime)}<br /> */}\n\n            {/*\n                \"lat\": 62.53911889158189,\n                \"lng\": 11.38222829438746,\n                \"icon\": null,\n                \"image\": \"https://themusher.app/220x/the-musher-90bc4d13-1204-49db-9a09-9e4d84775b00.jpeg\",\n                \"bib\": 3,\n                \"rank\": 1,\n                \"flag\": \"🇳🇴\",\n                \"title\": \"Wærner\",\n                \"body\": \"-0,0 km/t, -0,0 km\",\n                \"color\": \"#FA0007\",\n                \"totalDistanceOnTrack\": 619.146473819473,\n                \"bearing\": 0,\n                \"finishTime\": 1644169451\n            */}\n\n\n            {totals && totals.distanceKm && <>\n                <div class='table-responsive-lg'>\n                    <table class='table table-borderless'>\n                        <tbody>\n                            <tr>\n                                <td style='width: 5%;'><i class='fas fa-dog' /></td>\n                                <td style='width: 60%'><Text id='races.dogs'>Dogs</Text></td>\n                                <td style='width: 5%;'>&nbsp;</td>\n                                <td class='text-right' style='width: 30%;'>{team.dogs.length}</td>\n                            </tr>\n                            <tr>\n                                <td><i class='fas fa-road' /></td>\n                                <td><Text id='races.distance'>Distance</Text></td>\n                                <td>&nbsp;</td>\n                                <td class='text-right'><nobr>{totals.distanceKm ? `${util.format(totals.distanceKm, 1)} km` : 'n/a'}</nobr></td>\n                            </tr>\n                            <tr>\n                                <td><i class='fas fa-mountain' /></td>\n                                <td><Text id='races.ascend'>Ascending</Text></td>\n                                <td>&nbsp;</td>\n                                <td class='text-right'><nobr>{totals.elevation ? `${util.format(totals.elevation, 0)} m` : 'n/a'}</nobr></td>\n                            </tr>\n                            <tr>\n                                <td><i class='fas fa-stopwatch' /></td>\n                                <td><Text id='races.race-time'>Racetime</Text></td>\n                                <td><i class='fas fa-clock' /></td>\n                                <td class='text-right'><nobr>{util.secToHms(totals.duration) || 'n/a'}</nobr></td>\n                            </tr>\n                            <tr>\n                                <td><i class='fas fa-bed' /></td>\n                                <td><Text id='races.rest-time'>Rest</Text></td>\n                                <td><i class='fas fa-clock' /></td>\n                                <td class='text-right'><nobr>{util.secToHms(totals.rest) || 'n/a'}</nobr></td>\n                            </tr>\n                        </tbody>\n                    </table>\n                </div>\n            </>}\n        \n        </>);\n    }\n}\n\nexport default RaceTrackingMusherDetail;\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"gaugeBackground\":\"gaugeBackground__1UGxt\",\"gauge\":\"gauge__2ZDxd\",\"success\":\"success__3UQxg\",\"primary\":\"primary__3pPV6\",\"secondary\":\"secondary__-Vrk_\",\"info\":\"info__3t5zs\",\"warning\":\"warning__1jHlR\",\"danger\":\"danger__BLVC9\",\"gaugeText\":\"gaugeText__1on-w\"};","import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport { Text, Localizer } from 'preact-i18n';\n\n@observer\nclass Team extends Component {\n    requestFollowTeam = (e) => {\n        const { teamStore, userStore } = this.props.stores;\n        const { user } = userStore;\n        const teamId = parseInt(e.target.parentElement.dataset.team || e.target.dataset.team, 10);\n        teamStore.followRequest(teamId, user);\n        this.setState({ requestSent: true });\n    }\n\n    unFollowTeam = (e) => {\n        const { teamStore, userStore } = this.props.stores;\n        const { user } = userStore;\n        const teamId = parseInt(e.target.parentElement.dataset.team || e.target.dataset.team, 10);\n        teamStore.unollowTeam(teamId);\n        this.setState({ unfollowed: true });\n    }\n\n    getButton = (text = '') => {\n        const { requestSent } = this.state;\n        const { userStore } = this.props.stores;\n        const { user } = userStore;\n        const { team, skipHome, simple, classNames } = this.props;\n        const isYourTeam = team.members && team.members.indexOf(user.id) > -1;\n        const isFollowing = team.followers && team.followers.indexOf(user.id) > -1;\n        const isBlocked = team.blockedFollowers && team.blockedFollowers.indexOf(user.id) > -1;\n        const hasRequestedFollow = requestSent || team.followRequests && team.followRequests.findIndex(e => e.id === user.id) > -1;\n\n        if (isYourTeam) {\n            if (skipHome) {\n                return '';\n            }\n            return (\n                <i class='fas fa-home' />\n            );\n        }\n        if (isFollowing) {\n            return (<>\n                <button\n                    class={classNames || `btn btn-block btn-outline-secondary float-right`}\n                    onClick={this.unFollowTeam}\n                    disabled='true'\n                    data-team={team.id}\n                >\n                    <i class='fas fa-link mr-2' />\n                    <Text id='teams.connect.is-following'>Følger</Text> {!simple && <>{text}</>}\n                </button>\n                <button\n                    class={classNames || `btn btn-sm btn-block btn-danger float-right`}\n                    onClick={this.unFollowTeam}\n                    data-team={team.id}\n                >\n                    <i class='fas fa-unlink mr-2' />\n                    <Text id='teams.connect.unfollow'>Unfollow</Text>\n                </button>\n            </>);\n        }\n        if (isBlocked) {\n            return '';\n            // return (\n            //     <button\n            //         class={`btn btn-block btn-outline-secondary float-right`}\n            //         disabled='true'\n            //     >\n            //         <i class='fas fa-hand-paper mr-2' />\n            //         <Text id='teams.connect.is-blocked'>Blokkert</Text> {text}\n            //     </button>\n            // );\n        }\n        if (hasRequestedFollow) {\n            return (\n                <button\n                    class={classNames || `btn btn-block btn-outline-secondary float-right`}\n                    disabled='true'\n                >\n                    <i class='fas fa-hourglass-half mr-2' />\n                    <Text id='teams.connect.has-requested'>Venter på godkjenning</Text> {!simple && <>{text}</>}\n                </button>\n            );\n        }\n        if (team.public) {\n            return (\n                <button\n                    class={classNames || `btn btn-block btn-outline-success float-right`}\n                    onClick={this.requestFollowTeam}\n                    data-team={team.id}\n                >\n                    <i class='fas fa-plus mr-2' />\n                    <Text id='teams.connect.follow'>Følg</Text> {!simple && <>{text}</>}\n                </button>\n            );\n        }\n    }\n\n    render() {\n        const { unfollowed } = this.state;\n        const { team, buttonOnly } = this.props;\n        const { userStore } = this.props.stores;\n        const { user } = userStore;\n        const { language = 'en' } = user;\n        const teamAmbition = userStore.findTeamAmbition({ ambition: team.ambitions, language });\n        const teamType = userStore.findTeamType({ type: team.type, language });\n        const image = team.image && team.image.s3SmallLink ? team.image : null;\n\n        if (buttonOnly) {\n            return (<>\n                {this.getButton(`${team.name}`)}\n            </>);\n        }\n\n        return (\n            <div class='w-100 mb-3'>\n                <div class='row'>\n                    <div class='col-12 col-sm-8 col-lg-6 offset-sm-2 offset-lg-3 d-flex mb-0 position-relative border-top pt-3'\n                        style={`${unfollowed ? 'text-decoration: line-through; opacity: 0.3;' : ''}`}\n                    >\n                        {/* {JSON.stringify(team, null, 4)} */}\n                        <a href={`/teams/public/${team.uuidv4}`}>\n                        <div class={`text-center border rounded-circle imageRounded`} style={image ? `background-image: url(\"${image.s3SmallLink}\");  background-size: cover;` : ''}>\n                            {!image && <i class='fas fa-users text-muted mt-3' style='font-size: 40px;' />}\n                        </div>\n                        </a>\n                        <div class='flex-grow-1 pl-3' style='line-height: 1.2em;'>\n                            <h5 class='mb-1' style='line-height: 1.0em;'>\n                                {team.public ? <>\n                                    <a href={`/teams/public/${team.uuidv4}`}>{team.name}</a>\n                                </> : <>\n                                    {team.name}\n                                </>}\n                            </h5>\n                            <div>\n                                {team.place} {team.country}\n                            </div>\n                            <div>\n                                {teamType && <span class='badge badge-pill badge-secondary'>{teamType}</span>}\n                                {teamAmbition && <span class='badge badge-pill badge-secondary ml-2'>{teamAmbition}</span>}\n                            </div>\n                            <small class='text-muted'>\n                                {team && team.dogs && <span class=''><i class='fas fa-dog' /> {team.dogs.length}</span>} \n                                {team && team.followers && <span class='ml-2'><i class='fas fa-user' /> {team.followers.length}</span>}\n                            </small>\n                        </div>\n                        <div>\n                            {this.getButton()}\n                        </div>\n                    </div>\n                </div>\n            </div>\n        );\n    }\n}\n\nexport default Team;\n","import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport { Text, Localizer, withText } from 'preact-i18n';\n\nimport mu from '../../lib/musher-util';\n\nconst MARGIN_TOP = mu.marginTop(false);\nconst MARGIN_BOTTOM = mu.marginBottom();\n\n@observer\nclass HeaderCustom extends Component {\n    render() {\n        const { children, height = '65px' } = this.props;\n        return (\n            <nav\n\t\t\t\tclass={`navbar navbar-themed bg-light fixed-top py-0`}\n\t\t\t\tstyle={`height: ${height};`}\n\t\t\t>\n\n                {children}\n\n            </nav>\n        );\n    }\n}\n\nexport default HeaderCustom;\n","import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport { route, Router } from 'preact-router';\nimport { Text, Localizer } from 'preact-i18n';\nimport Markdown from 'preact-markdown';\n\nimport PubSub, { topics } from '../../lib/pubsub';\nimport mu from '../../lib/musher-util';\nconst MARGIN_TOP = mu.marginTop(false);\nconst MARGIN_TOP_BACK = mu.marginTopBack(false);\nconst MARGIN_BOTTOM = mu.marginBottom();\n\nimport DogSimplePublic from '../../components/dog/simplePublic';\nimport ImageScroller from '../../components/imageScroller';\n// import TeamConnectConfirm from '../../components/team/connect-confirm';\nimport TeamLine from '../../components/team/publicLine';\nimport PublicTeam from '../../components/team/public';\n\nimport Overlay from '../../components/overlay/';\nimport DogPublicDetail from '../dogs/publicDetail';\n\nimport MiniViewGraph from '../../components/dog/miniViewGraph';\n\nconst initialState = {\n    newTeam: {},\n};\n\n@observer\nclass TeamsDetail extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            ...initialState,\n        };\n        this.updateTimer = {};\n        this.time = new Date().getTime();\n        this.apiServer = util.getApiServer();\n    }\n\n    async loadPublicView(props) {\n\t\tthis.setState({ isLoading: true });\n        const { teamid } = props;\n\t\tconst { teamStore } = this.props.stores;\n        await teamStore.getPublicViews(teamid);\n\t\tthis.setState({ isLoading: false });\n\t}\n\n    async loadAll(props = this.props) {\n        await this.loadPublicTeam(props);\n        await this.loadPublicView(props);\n    }\n\n    async loadPublicTeam(props = this.props) {\n\t\tconst { teamStore } = props.stores;\n        const { teamid } = props;\n        await teamStore.loadPublicDetail({ id: teamid });\n    }\n\n    // Overlay functions\n    onDogClick = (e, dogid) => {\n        e.preventDefault();\n        e.stopPropagation();\n        this.setState({\n            showDog: dogid,\n        });\n        return false;\n    }\n\n    hideDog = () => {\n        this.setState({\n            showDog: null,\n        });\n    }\n\n    onUserClick = (e, userid) => {\n        e.preventDefault();\n        e.stopPropagation();\n        return false;\n    }\n    // /Overlay functions\n\n    subscribeNotificationTopic = async (field) => {\n\t\tconst { userStore } = this.props.stores;\n        const { user } = userStore;\n        const { notificationTopics = {} } = user;\n        const value = 1;\n        await userStore.setNotificationTopic({\n            field: `notificationTopics.${field}`,\n            value,\n        });\n    }\n\n    back = () => {\n        const { history } = this.props.stores;\n        history.goBack();\n    }\n    \n\tcomponentDidMount() {\n        const { back = this.back } = this.props;\n        const { appState } = this.props.stores;\n        appState.setSwipeRight(() => {\n            appState.setSwipeRight();\n            back();\n        });\n        this.loadAll();\n    }\n\n    componentWillReceiveProps(nextProps) {\n        // console.log('componentWillReceiveProps', nextProps);\n        if (nextProps.teamid !== this.props.teamid) {\n            this.loadAll(nextProps);\n        }\n    }\n\n\trender() {\n        const { showDog } = this.state;\n\t\tconst { teamStore, userStore } = this.props.stores;\n        const { user, isAdmin } = userStore;\n        const { language = 'en' } = user;\n\t\tconst { publicTeam, publicTeamFollowers, publicViewsGraphData, publicViewsGraphLegend } = teamStore;\n        const isTeamAdmin = (publicTeam && publicTeam.members) ? publicTeam.members.some(m => m.id === user.id) : false;\n\n        const { marginTop, marginBottom, back = this.back, hideTeam = () => {} } = this.props;\n\n        const defaultImage = {\n            s3XXLargeLink: './assets/homerun-race-logo.png',\n        };\n\n        const {\n            dogs = [],\n            users = [],\n            image,\n            imageHeader,\n            publicWorkouts,\n            publicWorkoutDetails,\n            publicWorkoutSummary,\n            publicTrophys,\n            publicMemories,\n            publicDogs,\n        } = publicTeam;\n\n        const headerImage = imageHeader && imageHeader.s3XXLargeLink ? imageHeader : defaultImage;\n        const teamImage = image && image.s3LargeLink ? image : null;\n        const teamAmbition = userStore.findTeamAmbition({ ambition: publicTeam.ambitions, language });\n        const teamType = userStore.findTeamType({ type: publicTeam.type, language });\n        const isYourTeam = publicTeam.members && publicTeam.members.findIndex(e => e.id === user.id) > -1;\n        const isFollowing = publicTeam && publicTeam.followers && publicTeam.followers.indexOf(user.id) > -1;\n        const hasRequestedFollow = publicTeam.followRequests && publicTeam.followRequests.findIndex(e => e.id === user.id) > -1;\n\n        const { notificationTopics = {} } = user;\n        const topic = `team-${publicTeam.id}`;\n\n\t\treturn (<>\n            {showDog && <Overlay>\n                <DogPublicDetail stores={this.props.stores} dogid={showDog} marginTop={'0px;'} marginBottom={'0px;'} back={this.hideDog} dogs={dogs} />\n            </Overlay>}\n\n\t\t\t<div class='container-fluid pb-5' style={`margin-bottom: ${marginBottom || MARGIN_BOTTOM}; margin-top: ${marginTop || MARGIN_TOP};`}>\n                <button class='btn btn-link pl-0 fixed-top text-primary'\n                    style={`top: ${MARGIN_TOP_BACK}; left: 5px; font-size: 35px; width: 45px;`}\n                    onClick={back}>\n                    <i class='fas fa-arrow-circle-left' />\n                </button>\n\n                <div class='row mb-0'>\n                    <div class='w-100 position-relative'\n                        style={`height: 25vh; background-size: cover; background-repeat: no-repeat; background-position: 50% 50%; background-color: #a0a0a0; ${headerImage ? `background-image: url(\"${headerImage.s3XXLargeLink}\");` : ''}`}\n                    >\n                        {isYourTeam && <>\n                            <a class='btn btn-sm btn-primary position-absolute'\n                                style={`top: 5px; right: 10px;`}\n                                href={`/teams/edit/${publicTeam.id}`}\n                            >\n                                <i class='fas fa-edit' /> <Text id='teams.edit'>Endre</Text>\n                            </a>\n                        </>}                    \n                    </div>\n\t\t\t\t\t<div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-3'>\n                        <div class='row'>\n                            <div class='col-3 col-sm-4 col-md-3 col-lg-4 position-relative'>\n                                <div\n                                    class={`text-center border border-white rounded-circle position-absolute imageRounded imageRoundedResponsive imageRoundedResponsivePosition`}\n                                    style={`left: 20px; ${teamImage ? `background-image: url(\"${teamImage.s3LargeLink}\"); background-size: cover; background-repeat: no-repeat; background-position: 50% 50%;` : ''}`}\n                                >\n                                    {!teamImage && <i class='fas fa-users text-muted mt-3' style='font-size: 40px;' />}\n                                </div>\n                                &nbsp;\n                            </div>\n                            <div class='col-9 col-sm-8 col-md-9 col-lg-8' style='line-height: 1.2em;'>\n                                <h5 class='my-0'>{publicTeam.name}</h5>\n                                <small class='text-muted'>\n                                    {publicTeam.place ? `${publicTeam.place}, ` : ''}{publicTeam.country}\n                                </small><br />\n                                {teamType && <span class='badge badge-pill badge-secondary mt-2'>{teamType}</span>}\n                                {teamAmbition && <span class='badge badge-pill badge-secondary mt-2 ml-2'>{teamAmbition}</span>}\n                                <h6 class='mt-2'>\n                                    <span class='mr-3'><span class='font-weight-bolder'>{publicTeam.followers ? publicTeam.followers.length : 0}</span> <Text id='teams.followers'>followers</Text></span>\n                                    <span class='mr-3'><span class='font-weight-bolder'>{publicTeam.dogs ? publicTeam.dogs.length : 0}</span> <Text id='teams.dogs-menu'>dogs</Text></span>\n                                </h6>\n                            </div>\n                        </div>\n                    </div>\n                    {(!notificationTopics || !notificationTopics[topic]) && <>\n                        <div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-3'>\n                            <button class='btn btn-block btn-primary btn-sm' onClick={() => this.subscribeNotificationTopic(topic)}>\n                                <Text id='team.notifications'>Subscribe to team notifications</Text>\n                            </button>                    \n                        </div>\n                    </>}\n                </div>\n\n\t\t\t\t<div class='row mt-5'>\n                    <div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3'>\n                        {!isYourTeam && !isFollowing && !hasRequestedFollow && publicTeam.public > 0 && <div class='clearfix mb-2'>\n                            <PublicTeam stores={this.props.stores} team={publicTeam} buttonOnly={true} skipHome={true} />\n                        </div>}\n                    </div>\n                </div>\n\n                {/* <TeamConnectConfirm stores={this.props.stores} /> */}\n\n\t\t\t\t<div class='row mt-5'>\n                    <div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3'>\n                        <h5 class='font-weight-lighter text-muted border-bottom'><Text id='teams.socialmedia'>Sosialemedier</Text></h5>\n                    </div>\n                    <div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3'>\n                        <div class='d-flex justify-content-center'>\n\n                            {isYourTeam && !publicTeam.facebook && <>\n                                <div class='text-center text-muted'>\n                                    <div class='display-1'>\n                                        <i class='fab fa-facebook' />\n                                    </div>\n                                    <h3 class='font-weight-lighter'>\n                                        <Text id='teams.add-sosialmedia'>Gå inn på endring av teamet for å legge inn en sosialemedier.</Text>\n                                    </h3>\n                                </div>\n                            </>}\n\n                            {publicTeam.url && <div class='mx-2'><h3><a href={mu.asUrl(publicTeam.url)} target='_blank' rel='noreferrer'><i class='fas fa-link' /></a></h3></div>}\n                            {publicTeam.facebook && <div class='mx-2'><h3><a href={mu.asFacebookLink(publicTeam.facebook)} target='_blank' rel='noreferrer'><i class='fab fa-facebook' /></a></h3></div>}\n                            {publicTeam.instagram && <div class='mx-2'><h3><a href={mu.asInstagramLink(publicTeam.instagram)} target='_blank' rel='noreferrer'><i class='fab fa-instagram' /></a></h3></div>}\n                            {publicTeam.snapchat && <div class='mx-2'><h3><a href={mu.asSnapchatLink(publicTeam.snapchat)} target='_blank' rel='noreferrer'><i class='fab fa-snapchat' /></a></h3></div>}\n                        </div>\n                        <div class='d-flex justify-content-center mt-3'>\n                            <div class='mx-2'><h3><a class='btn btn-outline-success' href={`/stories/team/${publicTeam.uuidv4}`}><i class='fas fa-rss' /> <Text id='story.all-stories'>Stories</Text></a></h3></div>\n                            <div class='mx-2'><h3><a class='btn btn-outline-primary' href={`/teams/workouts/team/${publicTeam.uuidv4}`} onClick={hideTeam}><i class='fas fa-running' /> <Text id='story.all-workouts'>All workouts</Text></a></h3></div>\n                        </div>\n                    </div>\n                </div>\n\n                {publicTeam.imagesSponsor && <div class='row mt-5'>\n                    <div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3'>\n                        <h5 class='font-weight-lighter text-muted border-bottom'><Text id='teams.public-sponsor-images' fields={{ total: publicTeam.imagesSponsor.length }}>Sponsorer - {publicTeam.imagesSponsor.length} stk</Text></h5>\n                    </div>\n                    <div class={`col-12 col-sm-8 col-lg-6 offset-sm-2 offset-lg-3 mb-0 position-relative px-0`}>\n                        <ImageScroller stores={this.props.stores} images={publicTeam.imagesSponsor} />\n                    </div>\n                </div>}\n\n                {publicTeam.sponsors && <div class='row mt-5'>\n                    <div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3'>\n                        <h5 class='font-weight-lighter text-muted border-bottom'><Text id='teams.sponsors'>Sponsors</Text></h5>\n                    </div>\n                    <div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3'>\n                        {isYourTeam && !publicTeam.sponsors && <>\n                            <div class='text-center text-muted'>\n                                <div class='display-1'>\n                                    <i class='fas fa-pen-nib' />\n                                </div>\n                                <h3 class='font-weight-lighter'>\n                                    <Text id='teams.add-sponsors'>Gå inn på endring av teamet for å legge inn sponsorer.</Text>\n                                </h3>\n                            </div>\n                        </>}\n                        <Markdown markdown={mu.replaceImages(publicTeam.sponsors, publicTeam.imagesSponsor, language)} markdownOpts={mu.getMarkdownOptions()} />\n                    </div>\n                </div>}\n\n\n\t\t\t\t<div class='row mt-5'>\n                    <div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3'>\n                        <h5 class='font-weight-lighter text-muted border-bottom'><Text id='teams.description'>Beskrivelse</Text></h5>\n                    </div>\n                    <div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3'>\n                        {isYourTeam && !publicTeam.description && <>\n                            <div class='text-center text-muted'>\n                                <div class='display-1'>\n                                    <i class='fas fa-pen-nib' />\n                                </div>\n                                <h3 class='font-weight-lighter'>\n                                    <Text id='teams.add-description'>Gå inn på endring av teamet for å legge inn en beskrivelse.</Text>\n                                </h3>\n                            </div>\n                        </>}\n                        <Markdown markdown={mu.replaceImages(publicTeam.description, publicTeam.images, language)} markdownOpts={mu.getMarkdownOptions()} />\n                    </div>\n                </div>\n\n\t\t\t\t{publicTeam.descriptionWorkoutplan && <div class='row mt-5'>\n                    <div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3'>\n                        <h5 class='font-weight-lighter text-muted border-bottom'><Text id='teams.description-workoutplan'>Workoutplan</Text></h5>\n                    </div>\n                    <div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3'>\n                        {isYourTeam && !publicTeam.descriptionWorkoutplan && <>\n                            <div class='text-center text-muted'>\n                                <div class='display-1'>\n                                    <i class='fas fa-pen-nib' />\n                                </div>\n                                <h3 class='font-weight-lighter'>\n                                    <Text id='teams.add-description-workoutplan'>Gå inn på endring av teamet for å legge inn en treningsplan.</Text>\n                                </h3>\n                            </div>\n                        </>}\n                        <Markdown markdown={mu.replaceImages(publicTeam.descriptionWorkoutplan, publicTeam.images, language)} markdownOpts={mu.getMarkdownOptions()} />\n                    </div>\n                </div>}\n\n\t\t\t\t{publicDogs && <div class='row mt-5'>\n                    <div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3'>\n                        <h5 class='font-weight-lighter text-muted border-bottom'><Text id='teams.dogs' fields={{ total: dogs.length }}>Hundene - {dogs.length} stk</Text></h5>\n                    </div>\n\n                    <div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3'>\n                        <div class='row'>\n                            {dogs && dogs.map(dog => (\n                                <DogSimplePublic stores={this.props.stores} dog={dog} showAge={true} className={'col'}\n                                    onDogClick={this.onDogClick} \n                                />\n                            ))}\n                        </div>\n                    </div>\n                </div>}\n\n\t\t\t\t{publicTeam.images && <div class='row mt-5'>\n                    <div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3'>\n                        <h5 class='font-weight-lighter text-muted border-bottom'><Text id='teams.public-photos' fields={{ total: publicTeam.images.length }}>Teambilder - {publicTeam.images.length} stk</Text></h5>\n                    </div>\n                    <div class={`col-12 col-sm-8 col-lg-6 offset-sm-2 offset-lg-3 mb-0 position-relative px-0`}>\n                        <ImageScroller stores={this.props.stores} images={publicTeam.images} />\n                    </div>\n\t\t\t\t</div>}\n\n                {publicMemories && publicTeam.achievements && <div class='row mt-5'>\n                    <div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3'>\n                        <h5 class='font-weight-lighter text-muted border-bottom'><Text id='teams.achievements'>Achievements</Text></h5>\n                    </div>\n                    <div class={`col-12 col-sm-8 col-lg-6 offset-sm-2 offset-lg-3 mb-0 position-relative`}>\n                        <div class='row'>\n                            {publicTeam.achievements && publicTeam.achievements.map(file => {\n                                return (\n                                    <div class='col-12'>\n                                        {file.date && <span class='font-weight-lighter mr-2'>{util.isoDate(file.date, false, false, true)}</span>}\n                                        <span class='mr-2 font-weight-bold'>{file.name}</span>\n                                        <span class='mr-2 font-weight-light'>{file.description}</span>\n                                        {file.url && <span class='mr-2'><a href={mu.asUrl(file.url)} target='_blank' rel='noreferrer' native><i class='fas fa-link' /></a></span>}\n                                    </div>\n                                );\n                            })}\n                        </div>\n                    </div>\n\t\t\t\t</div>}\n\n\t\t\t\t{publicTrophys && publicTeam.trophys && <div class='row mt-5'>\n                    <div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3'>\n                        <h5 class='font-weight-lighter text-muted border-bottom'><Text id='teams.trophy'>Trophys</Text></h5>\n                    </div>\n                    <div class={`col-12 col-sm-8 col-lg-6 offset-sm-2 offset-lg-3 mb-0 position-relative`}>\n                        <div class='row'>\n                            {publicTeam.trophys && publicTeam.trophys.reverse().map(file => {\n                                const img = mu.getTrophyImage(file.name);\n                                if (!img) {\n                                    return '';\n                                }\n                                const textHeader = file.descriptionHeader && file.descriptionHeader[language] ? file.descriptionHeader[language] : '';\n                                const text = file.description && file.description[language] ? file.description[language] : '';\n                                return (\n                                    <div class='col-4 mt-3'>\n                                        <div class='mb-2'>\n                                            <img src={img} class='img-fluid' />\n                                        </div>\n                                        <strong>{textHeader}</strong>\n                                        {/* <small class='font-weight-lighter mr-2'>\n                                            {util.isoDate(file.createdDate, false, false, true)}\n                                        </small> */}\n                                        <small>\n                                            <details>\n                                                <summary><Text id='teams.trophy-details'>Details</Text></summary>\n                                                <Markdown markdown={mu.replaceImages(text, publicTeam.images, language)} markdownOpts={mu.getMarkdownOptions()} />\n                                            </details>\n                                        </small>\n                                    </div>\n                                );\n                            })}\n                        </div>\n                    </div>\n\t\t\t\t</div>}\n\n                {/* {util.isArray(publicTeamFollowers) && <div class='row mt-5'>\n                    <div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3'>\n                        <h5 class='font-weight-lighter text-muted border-bottom'><Text id='teams.followers'>Followers</Text></h5>\n                    </div>\n                    <div class={`col-12 col-sm-8 col-lg-6 offset-sm-2 offset-lg-3 mb-0 position-relative`}>\n                        {util.isArray(publicTeamFollowers) && publicTeamFollowers.map(t => \n                            <TeamLine stores={this.props.stores} team={t} myTeamId={publicTeam.id} showBlockButton={false} callback={this.loadTeam} />\n                        )}\n                    </div>\n                </div>} */}\n\n\t\t\t\t<div class='row mt-5 mb-5'>\n                    <div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3'>\n                        <div class='text-center text-muted'>\n                            <div class='display-1'>\n                                <i class='fas fa-ellipsis-h' />\n                            </div>\n                            <div style='line-height: 0.9em;'>\n                                <small>\n                                    <Text id='teams.something-missing'>Er det noe du savner på denne siden? Send oss en melding på Facebook.</Text>\n                                </small>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n\n                {(isAdmin || isTeamAdmin) && <>\n                    <h5 class='font-weight-lighter text-muted border-bottom'><Text id='teams.visits'>Team page visits</Text></h5>\n                    <MiniViewGraph stores={this.props.stores}\n                        dataLeft={publicViewsGraphData}\n                        legendLeft={['team']}\n                        key={`minigraph-team-${publicTeam.uuidv4}`}\n                    />\n                </>}\n\n                {publicTeam.uuidv4 && <img src={`${this.apiServer}/api/teams/${publicTeam.uuidv4}/view?user=${user.id}&time=${this.time}`} style='width: 1; height: 1; opacity: 0.1;' />}\n\t\t\t</div>\n\t\t</>);\n\t}\n}\n\nexport default TeamsDetail;\n","import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport { Text, Localizer } from 'preact-i18n';\n\nimport mu from '../../lib/musher-util';\n\nfunction meterToFeet(value) {\n    return 3.28084 * value;\n}\n\n@observer\nclass Elevation extends Component {\n    render() {\n\t\tconst { value = 0, smallUnit } = this.props;\n\t\tconst { userStore } = this.props.stores;\n\t\tconst { user } = userStore;\n\t\tconst { settings = {} } = user;\n\n        if (settings.imperial) {\n            return (<>\n                <nobr>\n                    {util.format(meterToFeet(value), 0)} {smallUnit ? <><small><small><small class='ml-0 text-muted'>ft</small></small></small></> : <>ft</>}\n                </nobr>\n            </>);\n        }\n\n\t\treturn (<>\n            <nobr>\n                {util.format(value, 0)} {smallUnit ? <><small><small><small class='ml-0 text-muted'>m</small></small></small></> : <>m</>}\n            </nobr>\n        </>);\n    }\n}\n\nexport default Elevation;\n","import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport { route } from 'preact-router';\nimport { Text, Localizer } from 'preact-i18n';\n\nimport mu from '../../lib/musher-util';\n\nconst initialState = {\n\trequestSent: {},\n    confirmed: {},\n    deleted: {},\n    submenu: 'notfollowing',\n};\n\n@observer\nclass TeamLine extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            ...initialState,\n        };\n        this.updateTimer = {};\n    }\n\n    requestFollowTeam = async (e) => {\n        const { teamStore, userStore } = this.props.stores;\n        const { user } = userStore;\n        const teamId = parseInt(e.target.parentElement.dataset.team || e.target.dataset.team, 10);\n        teamStore.followRequest(teamId, user);\n        const { requestSent } = this.state;\n        requestSent[teamId] = true;\n        this.setState({ requestSent });\n    }\n\n    confirmRequest = async (e) => {\n        const { callback = () => {} } = this.props;\n        const { team, user } = e.target.closest('button').dataset;\n        const { teamStore } = this.props.stores;\n        const { confirmed, deleted } = this.state;\n\t\tconfirmed[`${team}-${user}`] = true;\n        delete deleted[`${team}-${user}`];\n        this.setState({ confirmed, deleted });\n        await teamStore.confirmFollowRequest({\n            team: parseInt(team, 10),\n            user: parseInt(user, 10),\n        });\n        callback();\n    }\n\n    deleteRequest = async (e) => {\n        const { callback = () => {} } = this.props;\n        const { team, user } = e.target.closest('button').dataset;\n        const { teamStore } = this.props.stores;\n        const { deleted, confirmed } = this.state;\n\t\tdeleted[`${team}-${user}`] = true;\n        delete confirmed[`${team}-${user}`];\n        this.setState({ deleted, confirmed });\n        await teamStore.deleteFollowRequest({\n            team: parseInt(team, 10),\n            user: parseInt(user, 10),\n        });\n        callback();\n    }\n\n    unFollowTeam = (e) => {\n        const { teamStore, userStore } = this.props.stores;\n        const { user } = userStore;\n        const teamId = parseInt(e.target.parentElement.dataset.team || e.target.dataset.team, 10);\n        teamStore.unollowTeam(teamId);\n        this.setState({ unfollowed: true });\n    }\n\n    getUnblockButton = (userId, myTeamId) => {\n        const { confirmed } = this.state;\n        const isConfirmed = confirmed[`${myTeamId}-${userId}`];\n        return <>\n            {isConfirmed ? <>\n                <small class='text-success'>\n                    <i class='fas fa-check' /> <Text id='teams.connect.confirmed'>Confirmed</Text>\n                </small>\n            </> : <>\n                <button class='btn btn-sm btn-block btn-success text-overflow mt-1'\n                    onClick={this.confirmRequest}\n                    data-team={myTeamId}\n                    data-user={userId}>\n                    <Text id='teams.connect.confirm'>Confirm</Text>\n                </button>\n            </>}\n        </>;\n    }\n\n    getButton = (team) => {\n        const { requestSent } = this.state;\n        const { userStore } = this.props.stores;\n        const { user } = userStore;\n\n        const isYourTeam = team.members && team.members.indexOf(user.id) > -1;\n        const isFollowing = team.followers && team.followers.indexOf(user.id) > -1;\n        const isBlocked = team.blockedFollowers && team.blockedFollowers.indexOf(user.id) > -1;\n        const hasRequestedFollow = requestSent[team.id] || team.followRequests && team.followRequests.findIndex(e => e.id === user.id) > -1;\n\n        if (isYourTeam) {\n            return (\n                <i class='fas fa-home' />\n            );\n        }\n        if (!team.public) {\n            return (<>\n                <small class='text-muted'>\n                    <Text id='teams.not-public'>Ikke offentlig</Text>\n                </small>\n            </>);\n        }\n        if (isFollowing) {\n            return (<>\n                <button\n                    class={`btn btn-sm btn-block btn-outline-secondary float-right`}\n                    onClick={this.unFollowTeam}\n                    disabled='true'\n                    data-team={team.id}\n                >\n                    <i class='fas fa-link mr-2' />\n                    <Text id='teams.connect.is-following'>Følger</Text>\n                </button>\n                <button\n                    class={`btn btn-sm btn-block btn-outline-danger float-right`}\n                    onClick={this.unFollowTeam}\n                    disabled='true'\n                    data-team={team.id}\n                >\n                    <Text id='teams.connect.unfollow'>Unfollow</Text>\n                </button>\n            </>);\n        }\n        if (isBlocked) {\n            return (<></>);\n            // return (\n            //     <button\n            //         class={`btn btn-sm btn-block btn-outline-secondary float-right`}\n            //         disabled='true'\n            //     >\n            //         <i class='fas fa-hand-paper mr-2' />\n            //         <Text id='teams.connect.is-blocked'>Blokkert</Text>\n            //     </button>\n            // );\n        }\n        if (hasRequestedFollow) {\n            return (\n                <button\n                    class={`btn btn-sm btn-block btn-outline-secondary float-right`}\n                    disabled='true'\n                >\n                    <i class='fas fa-hourglass-half mr-2' />\n                    <Text id='teams.connect.has-requested'>Venter på godkjenning</Text>\n                </button>\n            );\n        }\n        return (\n            <button\n                class={`btn btn-sm btn-block btn-outline-success float-right`}\n                onClick={this.requestFollowTeam}\n                data-team={team.id}\n            >\n                <i class='far fa-hand-point-right mr-2' />\n                <Text id='teams.connect.follow'>Følg</Text>\n            </button>\n        );\n    }\n\n\trender() {\n        const { deleted = {}, unfollowed } = this.state;\n        const { team, isBlocked, myTeamId, showBlockButton } = this.props;\n        const { storyStore } = this.props.stores;\n\n        const user = storyStore.findPublicUser(team.user) || team.user || {};\n        let image;\n        if (team.image && team.image.s3SmallLink) {\n            image = team.image;\n        } else if (team.images && team.images[0] && team.images[0].s3SmallLink) {\n            image = team.images[0];\n        } else if (user.image && user.image.s3SmallLink) {\n            image = user.image;\n        } else if (user.images && user.images[0] && user.images[0].s3SmallLink) {\n            image = user.images[0];\n        }\n        let shortname;\n        let name;\n        let username;\n        if (team && team.name) {\n            shortname = mu.displayNameShort(team);\n            name = mu.displayName(team);\n            username = mu.displayName(user);\n        } else if (user && user.id) {\n            shortname = mu.displayNameShort(user);\n            name = mu.displayName(user);\n        }\n\n        const isDeleted = deleted[`${myTeamId}-${user.id}`];\n\n        return (\n            <div class='col-12 mb-2 pb-2 border-bottom'\n                style={`${unfollowed ? 'text-decoration: line-through; opacity: 0.3;' : ''}`}\n            >\n                <div class='d-flex position-relative'>\n                    <div\n                        class={`text-center border rounded-circle imageRounded imageRoundedMedium`}\n                        style={image ? `background-image: url(\"${image.s3MediumLink}\"); background-size: cover;` : ''}\n                    >\n                        {!image && <div class='text-muted' style='font-size: 20px; padding-top: 3px;'>{shortname}</div>}\n                    </div>\n                    <div class='flex-grow-1 pl-3 text-overflow' style='line-height: 1.2em;'>\n                        <h5 class='mb-0'>\n                            {team.public ? <>\n                                <a href={`/teams/public/${team.uuidv4}`}>{name}</a>\n                            </> : <>\n                                {name}\n                            </>}                                         \n                        </h5>\n                        <div>\n                            {team.place ? `${team.place}, ` : ''} {team.country} &nbsp;\n                        </div>\n                        <div>\n                            <small class='text-muted'>\n                                {team && team.dogs && <span class=''><i class='fas fa-dog' /> {team.dogs.length}</span>} \n                                {team && team.followers && <span class='ml-2'><i class='fas fa-user' /> {team.followers.length}</span>}\n                                {username && <>\n                                    <small class='ml-2 text-muted'>\n                                        {username}\n                                    </small>\n                                </>}\n                                {showBlockButton && <>\n                                    {isDeleted ? <>\n                                        <small class='text-danger ml-3'>\n                                            <i class='fas fa-ban' /> <Text id='teams.connect.deleted'>Deleted</Text>\n                                        </small>\n                                    </> : <>\n                                        <button class='btn btn-sm btn-link text-overflow p-0 text-muted ml-3'\n                                            style='font-size: 0.8em;'\n                                            onClick={this.deleteRequest}\n                                            data-team={myTeamId}\n                                            data-user={user.id}\n                                        >\n                                            <i class='fas fa-ban' /> <Text id='teams.connect.block'>Blokkere</Text>\n                                        </button>\n                                    </>}\n                                </>}\n                            </small>\n                        </div>\n                    </div>\n                    <div>\n                        {isBlocked ? <>\n                            {this.getUnblockButton(user.id, myTeamId)}\n                        </> : <>\n                            {this.getButton(team)}\n                        </>}\n                    </div>\n                </div>\n            </div>\n        );\n    }\n}\n\nexport default TeamLine;\n","import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport { Text, Localizer } from 'preact-i18n';\n\nimport mu from '../../lib/musher-util';\n\nfunction kmtToMph(value) {\n    return 0.621371 * value;\n}\n\n@observer\nclass Speed extends Component {\n    render() {\n\t\tconst { value = 0, smallUnit } = this.props;\n\t\tconst { userStore } = this.props.stores;\n\t\tconst { user } = userStore;\n\t\tconst { settings = {} } = user;\n\n        if (settings.imperial) {\n            return (<>\n                <nobr>\n                    {util.format(kmtToMph(value), 1)} {smallUnit ? <><small><small><small class='ml-0 text-muted'><Text id='workouts.mph'>mph</Text></small></small></small></> : <><Text id='workouts.mph'>mph</Text></>}\n                </nobr>\n            </>);\n        }\n\n\t\treturn (<>\n            <nobr>\n                {util.format(value, 1)} {smallUnit ? <><small><small><small class='ml-0 text-muted'><Text id='workouts.kmt'>km/t</Text></small></small></small></> : <><Text id='workouts.kmt'>km/t</Text></>}\n            </nobr>\n        </>);\n    }\n}\n\nexport default Speed;\n","import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport { Text, Localizer, withText } from 'preact-i18n';\n\nimport mu from '../../lib/musher-util';\n\nconst MARGIN_TOP = mu.marginTop(false);\nconst MARGIN_BOTTOM = mu.marginBottom();\n\n@observer\nclass Overlay extends Component {\n    render() {\n        const { children } = this.props;\n        return (\n            <div\n                class='w-100 h-100 fixed-top bg-light skipRefresh'\n                style={`\n                    margin-bottom: ${MARGIN_BOTTOM};\n                    margin-top: ${MARGIN_TOP};\n                    height: calc(100vh - ${MARGIN_TOP}) !important;\n                    top: 0;\n                    left: 0;\n                    overflow-x: auto;\n                    overflow-y: auto;\n                    transition: .3s;\n                    overscroll-behavior: contain;\n                    z-index: 10000;\n                `}\n            >\n                {children}\n            </div>\n        );\n    }\n}\n\nexport default Overlay;\n","import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport { route } from 'preact-router';\nimport { Text, Localizer } from 'preact-i18n';\nimport { toJS } from 'mobx';\nimport Markdown from 'preact-markdown';\n\nimport mu from '../../lib/musher-util';\n\nimport Speed from '../../components/data/speed';\nimport Elevation from '../../components/data/elevation';\nimport Weight from '../../components/data/weight';\nimport Distance from '../../components/data/distance';\nimport Temperature from '../../components/data/temperature';\n\nfunction getStateColor(state) {\n\tswitch (state) {\n\t\tcase 'running':\n\t\t\treturn 'primary';\n\t\tcase 'rest':\n\t\t\treturn 'warning';\n\t\tcase 'restTrail':\n\t\t\treturn 'danger';\n\t}\n}\n\nfunction getStateIcon(state) {\n\tswitch (state) {\n\t\tcase 'running':\n\t\t\treturn 'fas fa-running';\n\t\tcase 'rest':\n\t\t\treturn 'fas fa-male';\n\t\tcase 'restTrail':\n\t\t\treturn 'fas fa-bed';\n\t}\n}\n\n@observer\nclass States extends Component {\n    hideDetail = (e) => {\n        e.preventDefault();\n        e.stopPropagation();\n        this.setState({\n\t\t\tstateDetail: {\n\t\t\t\tstate: '',\n                idx: 0,\n\t\t\t},\n\t\t});\n    }\n\n\tshowStateDetail = (e) => {\n        e.preventDefault();\n        e.stopPropagation();\n\t\tconst data = e.target.closest('div').dataset;\n\t\tthis.setState({\n\t\t\tstateDetail: {\n\t\t\t\t...data,\n\t\t\t},\n\t\t});\n\t}\n\n    nextStateDetail = (e) => {\n        e.preventDefault();\n        e.stopPropagation();\n        const { states, duration } = this.props;\n        const { stateDetail = {} } = this.state;\n        const currentIdx = parseInt(stateDetail.idx, 10);\n        const nextIdx = currentIdx + 1;\n        const nextState = states[nextIdx];\n        if (nextState) {\n            this.setState({\n                stateDetail: {\n                    idx: nextIdx,\n                    state: nextState.state,\n                    duration: nextState.duration,\n                    distance: nextState.distance,\n                    avgspeed: nextState.avgSpeed,\n                    statespeeds: nextState.stateSpeeds,\n                    point: nextState.point,\n                    start: nextState.start,\n                    end: nextState.end,\n                    percent: util.normalizeBetween(nextState.duration, 0, duration, 0, 100),\n                },\n            });\n        }\n    }\n\n   prevStateDetail = (e) => {\n        e.preventDefault();\n        e.stopPropagation();\n        const { states, duration } = this.props;\n        const { stateDetail = {} } = this.state;\n        const currentIdx = parseInt(stateDetail.idx, 10);\n        const prevIdx = currentIdx - 1;\n        const prevState = states[prevIdx];\n        if (prevState) {\n            this.setState({\n                stateDetail: {\n                    idx: prevIdx,\n                    state: prevState.state,\n                    duration: prevState.duration,\n                    distance: prevState.distance,\n                    avgspeed: prevState.avgSpeed,\n                    statespeeds: prevState.stateSpeeds,\n                    point: prevState.point,\n                    start: prevState.start,\n                    end: prevState.end,\n                    percent: util.normalizeBetween(prevState.duration, 0, duration, 0, 100),\n                },\n            });\n        }\n    }\n\n    render() {\n        const { states, duration, height = '20px', showText = true } = this.props;\n        const { stateDetail = {} } = this.state;\n        const locale = 'en-GB';\n\n        return (<>\n            <div class='row'>\n                {states && <div class='col-12 px-0'>\n                    <div class='progress' style={`height: ${(stateDetail && stateDetail.idx) ? '20px' : height};`}>\n                        {states.map((state, idx) => {\n                            const value = Math.ceil(util.normalizeBetween(state.duration, 0, duration, 0, 100));\n                            let currentWidth = value;\n                            if (stateDetail && stateDetail.idx == idx) {\n                                currentWidth = value < 10 ? 10 : value;\n                            }\n                            return (<>\n                                <div\n                                    class={`progress-bar bg-${getStateColor(state.state)}`}\n                                    role='progressbar'\n                                    style={`width: ${currentWidth}%`}\n                                    aria-valuenow={value}\n                                    aria-valuemin='0'\n                                    aria-valuemax='100'\n                                    data-idx={idx}\n                                    data-state={state.state}\n                                    data-duration={state.duration}\n                                    data-distance={state.distance}\n                                    data-avgspeed={state.avgSpeed}\n                                    data-statespeeds={state.stateSpeeds}\n                                    data-point={state.point}\n                                    data-start={state.start}\n                                    data-end={state.end}\n                                    data-percent={util.normalizeBetween(state.duration, 0, duration, 0, 100)}\n                                    onClick={this.showStateDetail}\n                                >\n                                    {showText ? <>\n                                        <nobr>\n                                            {value > 10 && <>\n                                                {state.state === 'rest' ? <>\n                                                    {util.secToHms(state.duration, true)}\n                                                </> : <>\n                                                    {util.format(state.distance / 1000, 0)}km\n                                                </>}\n                                            </>}\n                                            {(stateDetail && stateDetail.idx == idx) ? <i class={`fas fa-hand-point-down text-${state.state === 'rest' ? 'dark' : 'warning'} mx-2`} /> : ''}\n                                        </nobr>\n                                    </> : <>\n                                        {(stateDetail && stateDetail.idx == idx) ? <i class={`fas fa-hand-point-down text-${state.state === 'rest' ? 'dark' : 'warning'} mx-2`} /> : ''}\n                                    </>}\n                                </div>\n                            </>);\n                        })}\n                    </div>\n                    {stateDetail && stateDetail.state && <>\n                        <div class='card position-relative'>\n                            <span class='position-absolute' style='top: 0px; right: 5px;'>\n                                <small class='text-muted'>\n                                    <i class={getStateIcon(stateDetail.state)} /> {util.format(stateDetail.percent, 1)}%\n                                </small>\n                            </span>\n                            <div class='card-body'>\n                                {stateDetail.state === 'rest' ? <>\n                                    <div class='card-text row'>\n                                        <div class='col-4 text-nowrap text-overflow'>\n                                            <small class='text-muted'>\n                                                <i class='fas fa-clock ml-2' /> <Text id='workouts.duration'>Vargihet</Text>\n                                            </small>\n                                            <h6>\n                                                {util.secToHms(stateDetail.duration, true)}\n                                            </h6>\n                                        </div>\n                                        {stateDetail.point && <div class='col-8 text-nowrap text-overflow'>\n                                            <small class='text-muted'>\n                                                <i class='fa-map-marked ml-2' /> <Text id='workouts.position'>Position</Text>\n                                            </small>\n                                            <h6>\n                                                {stateDetail.point}\n                                            </h6>\n                                        </div>}\n                                    </div>\n                                    <div class='card-text row'>\n                                        {stateDetail.start && <div class='col-4 text-nowrap text-overflow'>\n                                            <small class='text-muted'>\n                                                <i class='fas fa-clock ml-2' /> <Text id='workouts.starttime'>Start</Text>\n                                            </small>\n                                            <h6>\n                                                {mu.formatDate(util.parseInputDate(stateDetail.start), { locale, hour12: false, day: 'numeric', month: 'numeric', hour: '2-digit', minute: '2-digit' })}\n                                            </h6>\n                                        </div>}\n                                        {stateDetail.end && <div class='col-4 text-nowrap text-overflow'>\n                                            <small class='text-muted'>\n                                                <i class='fas fa-clock ml-2' /> <Text id='workouts.endtime'>End</Text>\n                                            </small>\n                                            <h6>\n                                                {mu.formatDate(util.parseInputDate(stateDetail.end), { locale, hour12: false, day: 'numeric', month: 'numeric', hour: '2-digit', minute: '2-digit' })}\n                                            </h6>\n                                        </div>}\n                                    </div>\n                                </> : <>\n                                    <div class='card-text row'>\n                                        <div class='col-4 text-nowrap text-overflow'>\n                                            <small class='text-muted'>\n                                                <i class='fas fa-road ml-2' /> <Text id='workouts.distance'>Distanse</Text>\n                                            </small>\n                                            <h6>\n                                                <Distance stores={this.props.stores} value={stateDetail.distance / 1000} />\n                                            </h6>\n                                        </div>\n\n                                        <div class='col-4 text-nowrap text-overflow'>\n                                            <small class='text-muted'>\n                                                <i class='fas fa-clock ml-2' /> <Text id='workouts.duration'>Vargihet</Text>\n                                            </small>\n                                            <h6>\n                                                {util.secToHms(stateDetail.duration, true)}\n                                            </h6>\n                                        </div>\n\n                                        <div class='col-4 text-nowrap text-overflow'>\n                                            <small class='text-muted'>\n                                                <i class='fas fa-tachometer-alt ml-2' /> <Text id='workouts.avgspeed'>Gj.fart</Text>\n                                            </small>\n                                            <h6>\n                                                <Speed stores={this.props.stores} value={stateDetail.distance / stateDetail.duration * 3.6} />\n                                            </h6>\n                                        </div>\n                                    </div>\n                                    <div class='card-text row'>\n                                        {stateDetail.start && <div class='col-4 text-nowrap text-overflow'>\n                                            <small class='text-muted'>\n                                                <i class='fas fa-clock ml-2' /> <Text id='workouts.starttime'>Start</Text>\n                                            </small>\n                                            <h6>\n                                                {mu.formatDate(util.parseInputDate(stateDetail.start), { locale, hour12: false, day: 'numeric', month: 'numeric', hour: '2-digit', minute: '2-digit' })}\n                                            </h6>\n                                        </div>}\n                                        {stateDetail.end && <div class='col-4 text-nowrap text-overflow'>\n                                            <small class='text-muted'>\n                                                <i class='fas fa-clock ml-2' /> <Text id='workouts.endtime'>End</Text>\n                                            </small>\n                                            <h6>\n                                                {mu.formatDate(util.parseInputDate(stateDetail.end), { locale, hour12: false, day: 'numeric', month: 'numeric', hour: '2-digit', minute: '2-digit' })}\n                                            </h6>\n                                        </div>}\n                                    </div>\n                                </>}\n                            </div>\n                            <div class='float-right'>\n\n                            <button class='btn btn-link text-primary mx-2 py-0 float-right' onClick={this.hideDetail} style='line-height: 1.0em; font-size: 2.0em;'>\n                                <i class='fas fa-times' />\n                            </button>\n\n                            {stateDetail.idx < states.length - 1 && <button class='btn btn-link text-primary mx-2 py-0 float-right' onClick={this.nextStateDetail} style='line-height: 1.0em; font-size: 2.0em;'>\n                                <i class='fas fa-angle-right' />\n                            </button>}\n                            {stateDetail.idx > 0 && <button class='btn btn-link text-primary mx-2 py-0 float-right' onClick={this.prevStateDetail} style='line-height: 1.0em; font-size: 2.0em;'>\n                                <i class='fas fa-angle-left' />\n                            </button>}\n\n                            </div>\n                        </div>\n                    </>}\n                </div>}\n            </div>\n        </>);\n    }\n}\n\nexport default States;\n","import { h, Component } from 'preact';\nimport { useEffect } from \"preact/hooks\";\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport { Text, Localizer } from 'preact-i18n';\n\nconst initialState = {\n};\n\n@observer\nclass DisplayMusher extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            ...initialState,\n        };\n    }\n\n\ttoggleFocusOnMusher = (e) => {\n\t\tconst musherId = e.target.parentElement.dataset.musherid || e.target.dataset.musherid;\n\t\tconst { appState, raceStore } = this.props.stores;\n\t\tappState.toggleFocusOnMusher(parseInt(musherId, 10));\n\n\t\tconst { focusOnMushers } = appState;\n\t\traceStore.getWorkoutSummaryActiveTeams(focusOnMushers);\n\t}\n\n\ttoggleInfoOnMusher = (e) => {\n\t\tconst musherId = e.target.parentElement.dataset.musherid || e.target.dataset.musherid;\n\t\tconst { appState } = this.props.stores;\n\t\tappState.toggleInfoOnMusher(parseInt(musherId, 10));\n\t}\n\n    render() {\n\t\tconst { raceStore, appState } = this.props.stores;\n\t\tconst { teamId } = this.props;\n\t\tconst { darkmode, language = 'en' } = appState;\n\t\tconst { race } = raceStore;\n\n        const team = raceStore.getTeamById(teamId);\n        if (!team || !team.id) {\n            return <></>;\n        }\n        const line = raceStore.getActiveTeamById(team.id);\n        const currentStages = raceStore.getWorkoutSummaryByTeam(team.id).reverse();\n        const currentClass = raceStore.getClassByTeamId(team.id);\n        const currentResults = raceStore.getWorkoutResultsByTeam(currentStages, currentClass.distance);\n        const musher = raceStore.getMusherByTeamId(team.id);\n        const image = team.images && team.images.length > 0 ? team.images[0] : {};\n        const raceClass = raceStore.getClassByTeamId(team.id);\n\n        const completed = currentResults.distanceKm / currentClass.distance * 100;\n        const hasStarted = completed > 0 ? 1 : 0;\n        const isDone = completed >= 100 ? 1 : 0;\n\n        let currentSpeed;\n        let updated;\n        let isActive;\n        if (line && line.currentLocation && line.currentLocation.coords) {\n            currentSpeed = line.currentLocation.coords.speed * 3.6;\n            updated = line.currentLocation.timestamp;\n            isActive = true;\n        }\n        let toFinish = raceClass.distance - currentResults.distanceKm;\n        if (toFinish < 0) {\n            toFinish = 0;\n        }\n\n        // const currentSpeed = util.format(line.currentLocation.coords.speed * 3.6, 1);\n        // avgDogs: 9.777777777777779\n        // distanceKm: 268.3432364824406\n        // duration: 67524.34002106966\n        // elevation: 5287.123805500813\n        // flatTotalKcal: 4971.658025959346\n        // images: Array(32) [ Proxy, Proxy, Proxy, … ]\n        // loadIndex: 1446\n        // rest: 2306\n        // speedAvg: 14.820718823260847\n        // totalKcalRelated: 1225.314525471911\n        // weightedTotalKcal: 11344.398317216459\n\n\n\t\treturn (\n\t\t\t<>\n                <div class='mr-2 mb-2 overflow-auto' style='width: 350px !important; max-height: 350px; overflow-x: hidden !important;'>\n                    <div class='p-2 bg-light rounded-lg'>\n                        <div class='row mt-2' style='font-size: 0.9em;'>\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n                            <div class='col-4 text-center'>\n                                <div\n                                    class={`text-center text-muted pt-2 h-100`}\n                                    style={`background-image: url(\"${image.s3SmallLink}\"); background-size: cover;`}\n                                    onClick={this.toggleFocusOnMusher} data-musherid={team.id}\n                                >\n                                    {!image.s3SmallLink && <>\n                                        <span class='font-weight-lighter' style='font-size: 55px;'>\n                                            {util.ucfirst(String(musher.firstname), true)}\n                                            {util.ucfirst(String(musher.lastname), true)}\n                                        </span>\n                                    </>}\n                                </div>\n                            </div>\n                            <div class='col-8'>\n                                <div class='row'>\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n                                    <div class='col-12' style='font-size: 1.5em; line-height: 1.0em;'>\n                                        <button\n                                            type='button'\n                                            class='btn btn-sm float-right'\n                                            onClick={this.toggleInfoOnMusher} data-musherid={team.id}\n                                        >\n                                            X\n                                        </button>\n                                        <span class='font-weight-bold'>{musher.firstname} {musher.lastname}</span><br />\n                                        <span class='font-weight-lighter'>{team.name}</span><br />\n                                        {raceClass && raceClass.title && <>\n                                            <span class='font-weight-lighter mr-2' style='font-size: 0.8em;'>\n                                                {raceClass.title} - \n                                            </span>\n                                        </>}\n                                        <span class='font-weight-lighter' style='font-size: 0.8em;'>\n                                            {util.format(currentResults.avgDogs, 1)} <i class='fas fa-dog text-muted ml-1' />\n                                        </span>\n                                    </div>\n                                </div>\n                                <div class='row mt-2'>\n                                    <div class='col-4 text-center' style='line-height: 1.4em;'>\n                                        <span class='text-muted'>km/t</span><br />\n                                        <span style='font-size: 2.0em;'>{util.format(currentResults.speedAvg, 1)}</span>\n                                    </div>\n                                    <div class='col-4 text-center' style='line-height: 1.4em;'>\n                                        <span class='text-muted'>km</span><br />\n                                        <span style='font-size: 2.0em;'>{util.format(currentResults.distanceKm)}</span>\n                                    </div>\n                                    <div class='col-4 text-center' style='line-height: 1.4em;'>\n                                        <span class='text-muted'>to finish</span><br />\n                                        <span style='font-size: 2.0em;'>\n                                            {toFinish === 0 ? <i class='fas fa-flag-checkered text-success' /> : <>{util.format(toFinish, 0)}</>}\n                                        </span>\n                                    </div>\n                                </div>\n                                <div class='row mt-2'>\n                                    <div class='col-6 text-center' style='line-height: 1.4em;'>\n                                        <span class='text-muted'>\n                                            {toFinish === 0 ? <>\n                                                Calc.Duration\n                                            </> : <>\n                                                Duration\n                                            </>}\n                                        </span><br />\n                                        <span style='font-size: 1.5em;'>\n                                            {toFinish === 0 ? <>\n                                                {util.secToHms(currentResults.weightedNormalizedDuration || currentResults.duration)}\n                                            </> : <>\n                                                {util.secToHms(currentResults.duration)}\n                                            </>}\n                                        </span>\n                                    </div>\n                                    <div class='col-6 text-center' style='line-height: 1.4em;'>\n                                        <span class='text-muted'>Status</span><br />\n                                        <span style='font-size: 1.5em;'>\n                                            {isActive ? <>\n                                                {line.isInProgress === 1 ? <span class='text-primary'>running</span> : ''}\n                                                {line.isInProgress === 2 ? <span class='text-danger'>resting</span> : ''}\n                                                {toFinish === 0 ? <>\n                                                    {!line.isInProgress ? <span class='text-success'>FINISH</span> : ''}\n                                                </> : <>\n                                                    {!line.isInProgress ? <>\n                                                        {hasStarted ? <span class='text-danger'>resting</span> : <span class='text-muted'>NYS</span>}\n                                                    </> : '-'}                                                    \n                                                </>}\n                                            </> : <>\n                                                {toFinish === 0 ? <span class='text-success'>FINISH</span> : <>\n                                                    {hasStarted ? <span class='text-danger'>resting</span> : <span class='text-muted'>NYS</span>}\n                                                </>}\n                                            </>}\n                                        </span>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                        <div class='row mt-2' style='font-size: 0.9em;'>\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n                            <div class='col-6'>\n                                <table class='table table-sm table-striped'>\n                                    <tbody>\n                                        <tr>\n                                            <td>Current speed</td>\n                                            <td>{currentSpeed ? <>{util.format(currentSpeed, 1)} km/t</> : '-'}</td>\n                                        </tr>\n                                        <tr>\n                                            <td>Avg speed</td>\n                                            <td>{util.format(currentResults.speedAvg, 1)} km/t</td>\n                                        </tr>\n                                        <tr>\n                                            <td>Duration</td>\n                                            <td>{util.secToHms(currentResults.duration)}</td>\n                                        </tr>\n                                        <tr>\n                                            <td>Calculated duration</td>\n                                            <td>{util.secToHms(currentResults.weightedNormalizedDuration)}</td>\n                                        </tr>\n                                        <tr>\n                                            <td>Rest</td>\n                                            <td>{util.secToHms(currentResults.rest)}</td>\n                                        </tr>\n                                        <tr>\n                                            <td>Elevation</td>\n                                            <td>{util.format(currentResults.elevation, 0)} m</td>\n                                        </tr>\n                                        <tr>\n                                            <td>Altitude</td>\n                                            <td>{isActive ? <>{line.currentLocation.coords.altitude} moh</> : '-'}</td>\n                                        </tr>\n                                        <tr>\n                                            <td>Load index</td>\n                                            <td>{currentResults.loadIndex}</td>\n                                        </tr>\n                                        <tr>\n                                            <td>Updated:</td>\n                                            <td>{isActive ? <>{util.formatDistance(updated, new Date())} ago</> : '-'}</td>\n                                        </tr>\n                                    </tbody>\n                                </table>\n                            </div>\n                            <div class='col-6'>\n                                <span>Elevation profile:</span><br />\n                                {isActive ? <svg viewBox='0 0 300 100' style='width: 180px; height: 60px; top: 0; left: 0;'>\n                                    <path d={`${line.svgElevation}`} style='fill: #0063FF; stroke: #0063FF; stroke-width: 2; opacity: 0.2;' />\n                                </svg> : <div>-</div>}\n                                <span>Map profile:</span><br />\n                                {isActive ? <svg viewBox='0 0 300 300' style='width: 180px; height: 180px; top: 0; left: 0;'>\n                                    <path d={`${line.svgMap}`} style='fill: none; stroke: #FF6300; stroke-width: 5; opacity: 0.2;' />\n                                </svg> : <div>-</div>}\n                            </div>\n                        </div>\n\n                        <div class='mt-2' style='font-size: 0.9em;'>\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n\n                            <div class='d-flex flex-wrap'>\n                                {currentStages && currentStages.map((stage, idx) => {\n                                    const percent = stage.distanceKm / currentClass.distance * 100;\n                                    const width = percent > 100 ? 100 : parseInt(percent, 10);\n                                    const currentEpoch = Math.floor(new Date(stage.date).getTime() / 1000);\n                                    const inDate = new Date(0); // The 0 there is the key, which sets the date to the epoch\n                                    inDate.setUTCSeconds(currentEpoch + parseInt(stage.duration, 10));\n                                    const images = stage.images.flat();\n                                    if (1) {\n                                        return (<>\n                                            <div class='bg-light border rounded-lg text-right position-relative mr-1 mb-1'>\n                                                <svg viewBox='0 0 300 100' class='position-absolute' style='width: 100%; height: 95%; bottom: 0px; left: 0px; z-index: 0;'>\n                                                    <path d={`${stage.svgElevation}`} style='fill: #0063FF; stroke: #0063FF; stroke-width: 2; opacity: 0.2;' />\n                                                </svg>\n                                                <div class='position-relative px-3'>\n                                                    <span class='position-absolute' style='top: 3px; left: 3px; font-size: 1.3em;'>{idx + 1}</span>\n                                                    <small>\n                                                        <span class='float-left'>\n                                                            <nobr><i style='width: 20px;' class='fas fa-sign-out-alt' /> {util.formatDate(stage.date, { locale: language, hour12: false, hour: '2-digit', minute: '2-digit' })}</nobr>\n                                                            <nobr><i style='width: 20px;' class='fas fa-sign-in-alt' /> {util.formatDate(inDate, { locale: language, hour12: false, hour: '2-digit', minute: '2-digit' })}</nobr>\n                                                        </span>\n                                                        <span class='float-right'>\n                                                            {/* {restTimeText}\n                                                            {restTimeTrackText} */}\n                                                            <nobr><i style='width: 20px;' class='fas fa-road' /> {util.format(stage.distanceKm, 1) || 'n/a'} <span class='font-weight-lighter'>km</span></nobr>\n                                                            <nobr><i style='width: 20px;' class='fas fa-mountain' /> {util.format(stage.elevation, 0) || 'n/a'} <span class='font-weight-lighter'>m</span></nobr>\n                                                            <nobr><i style='width: 20px;' class='fas fa-tachometer-alt' /> {util.format(stage.speedAvg, 1) || 'n/a'} <span class='font-weight-lighter'>km/t</span></nobr><br />\n\n                                                            <nobr><i style='width: 20px;' class='fas fa-clock' /> {util.secToHms(stage.duration) || 'n/a'}</nobr>\n                                                            <nobr><i style='width: 20px;' class='fas fa-moon' /> {util.secToHms(stage.rest) || 'n/a'}</nobr><br />\n                                                            <nobr><i style='width: 20px;' class='fas fa-dog' /> {util.format(stage.avgDogs, 0) || 'n/a'}</nobr>\n                                                            <nobr><i style='width: 20px;' class='fas fa-balance-scale' /> {util.format(stage.loadIndex, 0) || 'n/a'}</nobr><br />\n                                                            <nobr><i style='width: 20px;' class='fas fa-images' /> {images.length}</nobr><br />\n                                                        </span>\n                                                    </small>\n                                                </div>\n                                            </div>\n                                        </>);\n                                    }\n                                    return (<>\n                                        <div class='bg-light border rounded-lg text-right position-relative px-3 mr-1 mb-1' style={`width: ${width}%; min-width: 320px;`}>\n                                            <small>\n                                                <span class='float-left'>{idx + 1}</span>\n                                                <nobr><i style='width: 20px;' class='fas fa-road' /> {util.format(stage.distanceKm, 1) || 'n/a'} <span class='font-weight-lighter'>km</span></nobr>\n                                                <nobr><i style='width: 20px;' class='fas fa-tachometer-alt' /> {util.format(stage.speedAvg, 1) || 'n/a'} <span class='font-weight-lighter'>km/t</span></nobr>\n                                                <nobr><i style='width: 20px;' class='fas fa-clock' /> {util.secToHms(stage.duration) || 'n/a'}</nobr>\n                                            </small>\n                                        </div>\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n                                    </>);\n                                })}\n                            </div>\n\n                        </div>\n\n                    </div>\n                </div>\n\t\t\t</>\n\t\t);\n\t}\n}\n\nexport default DisplayMusher;\n","import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\n\nimport style from './style.css';\n\nconst initialState = {\n    mouseData: {},\n};\n\n@observer\nclass Gauge extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            ...initialState,\n        };\n        this.svgRef = null;\n    }\n\n    render() {\n        const {\n            radius = 50,\n            heightAdd = 0,\n            color = 'success',\n\n            showPercentText = true,\n            percent = 0,\n            prefix = '',\n\n            showCenterText= false,\n            centerText,\n            centerTextSize,\n            centerTextX,\n            centerTextY,\n\n            total = '',\n            totalY = '90%',\n            totalX = '50%',\n            totalTextAnchor = 'middle',\n                        \n            completed = '',\n            completedY = '65%',\n            completedX = '50%',\n            completedTextAnchor = 'middle',\n        } = this.props;\n        const strokeWidth = radius * 0.3;\n        const innerRadius = radius - strokeWidth / 2;\n\n        const strokeWidthGauge = radius * 0.3;\n\n        const circumference = innerRadius * 2 * Math.PI;\n        const arc = circumference * (270 / 360);\n        const dashArray = `${arc} ${circumference}`;\n        const transform = `rotate(135, ${radius}, ${radius})`;\n\n        const percentNormalized = Math.min(Math.max(percent, 0), 100);\n        const offset = arc - (percentNormalized / 100) * arc;\n\n        const textSize = centerTextSize || radius / 2.5;\n        const textSizeSmall = radius / 5;\n\n        return (\n            <>\n                <svg xmlns='http://www.w3.org/2000/svg' class={style.svg}\n                    // viewBox={`0 0 ${radius * 2} ${radius * 2}`}\n                    width={radius * 2}\n                    height={radius * 2 + heightAdd}\n                    preserveAspectRatio='none'\n                    ref={c => this.svgRef = c}\n                >\n\n                    <circle\n                        class={`${style.gaugeBackground}`}\n                        cx={radius}\n                        cy={radius}\n                        r={innerRadius}\n                        strokeWidth={strokeWidth}\n                        strokeDasharray={dashArray}\n                        strokeLinecap='round'\n                        transform={transform}\n                    />\n                    \n                    <circle\n                        class={`${style[color]} ${style.gauge}`}\n                        cx={radius}\n                        cy={radius}\n                        r={innerRadius}\n                        stroke='url(#grad)'\n                        strokeDasharray={dashArray}\n                        strokeDashoffset={offset}\n                        strokeLinecap='round'\n                        strokeWidth={strokeWidthGauge}\n                        style={{\n                            transition: 'stroke-dashoffset 0.3s',\n                        }}\n                        transform={transform}\n                    />\n                     \n                    {showPercentText && <text\n                        class={`${style.gaugeText} ${style[color]}`}\n                        x={centerTextX || '50%'}\n                        y={centerTextY || '50%'}\n                        dominant-baseline='middle'\n                        text-anchor='middle'\n                        font-size={textSize}\n                    >{percent} {prefix}</text>}\n\n                    {showCenterText && <text\n                        class={`${style.gaugeText} ${style[color]}`}\n                        x={centerTextX || '50%'}\n                        y={centerTextY || '50%'}\n                        dominant-baseline='middle'\n                        text-anchor='middle'\n                        font-size={textSize}\n                    >{centerText}</text>}\n\n                    {completed && <text\n                        class={`${style.gaugeText} ${style[color]}`}\n                        x={completedX}\n                        y={completedY}\n                        dominant-baseline='middle'\n                        text-anchor={completedTextAnchor}\n                        font-size={textSizeSmall}\n                    >{completed}</text>}\n\n                    <text\n                        class={`${style.gaugeText} ${style.secondary}`}\n                        x={totalX}\n                        y={totalY}\n                        dominant-baseline='middle'\n                        text-anchor={totalTextAnchor}\n                        font-size={textSizeSmall}\n                    >{total}</text>\n\n                </svg>\n            </>\n        );\n    }\n}\n\nexport default Gauge;\n","import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport { Text, Localizer } from 'preact-i18n';\nimport Markdown from 'preact-markdown';\n\nimport mu from '../../lib/musher-util';\n\nconst fieldSorter = (fields) => (a, b) => fields.map(o => {\n    let dir = 1;\n    if (o[0] === '-') { dir = -1; o=o.substring(1); }\n    return a[o] > b[o] ? dir : a[o] < b[o] ? -(dir) : 0;\n}).reduce((p, n) => p ? p : n, 0);\n\n@observer\nclass RaceLiveCheckpointResult extends Component {\n    chooseSubmenu = (e) => {\n\t\tconst submenu = e.target.closest('button').dataset.submenu;\n\t\tthis.setState({ submenu });\n\t}\n\n    toggleInfo = (e) => {\n        const { showInfo } = this.state;\n\t\tthis.setState({ showInfo: !showInfo });\n\t}\n\n    render() {\n        const { id, onClickNav = () => {} } = this.props;\n        const { submenu = 'detailsIn', showInfo } = this.state;\n\n        const { appState, raceStore, userStore } = this.props.stores;\n        const { user: currentUser = {}, teams = [], isAdmin } = userStore;\n        const { language = 'en' } = currentUser;\n\n        const { selectedClassIds = [] } = appState;\n        const selectedClassId = selectedClassIds[0];\n        const currentClass = raceStore.getClassById(selectedClassId);\n\n        let selectedCheckpoint = currentClass.checkpoints ? currentClass.checkpoints.find(e => e.id === id) : null;\n        selectedCheckpoint = selectedCheckpoint ? selectedCheckpoint : {};\n        const { sortedContestants = [] } = raceStore;\n\n        const allResultsCp = currentClass.results ? currentClass.results.slice().sort(fieldSorter(['timestamp', '-direction'])).filter(e => e.checkpoint === id) : null;\n\n        const lastResultsIn = allResultsCp ? allResultsCp.filter(e => e.direction === 'in') : null;\n        const lastResultsOut = allResultsCp ? allResultsCp.filter(e => e.direction === 'out') : null;\n        const lastResultsLegtimes = allResultsCp ? allResultsCp.slice().sort(fieldSorter(['legTime', 'timestamp'])).filter(e => e.direction === 'in') : null;\n\n        const lastResultsScratched = allResultsCp ? allResultsCp.filter(e => e.direction === 'scratched') : null;\n\n        const prevCp = currentClass.checkpoints ? currentClass.checkpoints.find(e => e.sortOrder === selectedCheckpoint.sortOrder - 1) : null;\n        const nextCp = currentClass.checkpoints ? currentClass.checkpoints.find(e => e.sortOrder === selectedCheckpoint.sortOrder + 1) : null;\n        const prevResultsOut = currentClass.results && prevCp ? currentClass.results.slice().filter(e => e.checkpoint === prevCp.id && e.direction === 'out') : null;\n        const nextResultsIn = currentClass.results && nextCp ? currentClass.results.slice().filter(e => e.checkpoint === nextCp.id && e.direction === 'in') : null;\n\n        const image = selectedCheckpoint.image;\n        const topImage = selectedCheckpoint.topImage;\n        const shortname = mu.displayNameShort(selectedCheckpoint);\n        const dotColor = ''; // mu.getRankingColor(selectedCheckpoint.sortOrder);\n\n        const defaultImage = './assets/checkpoint.png';\n        const headerImage = topImage ? topImage : defaultImage;\n\n        return (<>\n            <div class='w-100 position-absolute'\n                style={`z-index: -1; height: 18vh; top: 0px; left: 0px; background-size: cover; background-repeat: no-repeat; background-position: 50% 50%; background-color: #a0a0a0; ${headerImage ? `background-image: url(\"${headerImage}\");` : ''}`}\n            />\n\n            {nextCp && <button class='btn btn-link text-primary float-right mr-2 py-0' style='font-size: 2.0em; line-height: 1.0em;' onClick={() => onClickNav(nextCp.id)}>\n                <i class='fas fa-angle-right' />\n            </button>}\n            {prevCp && <button class='btn btn-link text-primary float-right mr-2 py-0' style='font-size: 2.0em; line-height: 1.0em;' onClick={() => onClickNav(prevCp.id)}>\n                <i class='fas fa-angle-left' />\n            </button>}\n\n            <div class='d-flex position-relative' style='margin-top: 16vh;'>\n                <div\n                    class={`position-relative text-center border rounded-circle imageRounded`}\n                    style={`margin-top: -50px; ${image ? `background-image: url(\"${image}\"); background-size: cover;` : 'background-color: #c0c0c0;'}`}\n                >\n                    {!image && <div class='text-muted' style='font-size: 35px; padding-top: 10px;'>{shortname}</div>}\n                    <div\n                        class={`rounded-pill-both px-2 text-center position-absolute ${dotColor ? '' : 'bg-secondary'} font-weight-bold`}\n                        style={`bottom: -8px; right: 0; ${dotColor ? `background-color: ${dotColor};` : ''}`}\n                    >\n                        {selectedCheckpoint.sortOrder && selectedCheckpoint.sortOrder !== 'n/a' && <>{selectedCheckpoint.sortOrder}</>}\n                    </div>\n                </div>\n                <div class='flex-grow-1 pl-3 text-overflow mb-3' style='line-height: 1.2em;'>\n                    <h3 class='mb-2'>\n                        {selectedCheckpoint.name}\n                    </h3>\n                    <div>\n                        {selectedCheckpoint.cellphone && <><span class='text-muted'><i class='fas fa-phone' /></span> <a href={`tel:${selectedCheckpoint.cellphone}`}>{selectedCheckpoint.cellphone}</a></>}\n                        {selectedCheckpoint.email && <><a class='ml-3' href={`mailto:${selectedCheckpoint.email}`}><i class='fas fa-envelope' /></a></>}\n                        {selectedCheckpoint.facebook && <><a class='ml-3' href={`${mu.asFacebookLink(selectedCheckpoint.facebook)}`}><i class='fab fa-facebook' /></a></>}\n                        {selectedCheckpoint.instagram && <><a class='ml-3' href={`${mu.asInstagramLink(selectedCheckpoint.instagram)}`}><i class='fab fa-instagram' /></a></>}\n                        {selectedCheckpoint.description && <><a class='ml-3 text-primary' onCLick={this.toggleInfo}><i class='fas fa-info-circle' /></a></>}\n                    </div>\n                </div>\n            </div>\n            {showInfo && selectedCheckpoint.description && <div>\n                <Markdown markdown={mu.replaceImages(selectedCheckpoint.description, selectedCheckpoint.images)} markdownOpts={mu.getMarkdownOptions()} />\n            </div>}\n            <div class=''>\n                <div class=''>\n                    <div class='d-flex justify-content-between mt-2'>\n                        <div class='flex-fill bg-light rounded-lg p-3 align-middle'>\n                            <div>\n                                <small class='text-muted'>\n                                    <i class='fas fa-flag' /> Start\n                                </small>\n                            </div>\n                            <div class='text-center'>\n                                {util.format(selectedCheckpoint.totalDistance || 0, 0)} <span class='text-muted'>km</span>\n                            </div>\n                        </div>\n                        {!selectedCheckpoint.isStartLine && <div class='flex-fill bg-light rounded-lg p-3 align-middle'>\n                            <div>\n                                <small class='text-muted'>\n                                    <i class='fas fa-arrow-down' /> Prev\n                                </small>\n                            </div>\n                            <div class='text-center'>\n                                <nobr>{util.format(selectedCheckpoint.distanceFromPrev || 0, 0)} <span class='text-muted'>km</span></nobr>\n                            </div>\n                        </div>}\n                        {/* <div class='flex-fill bg-light rounded-lg p-3 align-middle'>\n                            <div>\n                                <small class='text-muted'>\n                                    <i class='fas fa-campground' /> CP\n                                </small>\n                            </div>\n                            <div class='text-center'>\n                                {selectedCheckpoint.name}\n                            </div>\n                        </div> */}\n                        <div class='flex-fill bg-light rounded-lg p-3 align-middle'>\n                            <div>\n                                <small class='text-muted'>\n                                    <i class='fas fa-arrow-up' /> Next\n                                </small>\n                            </div>\n                            <div class='text-center'>\n                                {util.format(selectedCheckpoint.distanceToNext || 0, 0)} <span class='text-muted'>km</span>\n                            </div>\n                        </div>\n                        <div class='flex-fill bg-light rounded-lg p-3 align-middle'>\n                            <div>\n                                <small class='text-muted'>\n                                    <i class='fas fa-flag-checkered' /> Finish\n                                </small>\n                            </div>\n                            <div class='text-center'>\n                                <nobr>{util.format(selectedCheckpoint.distanceToFinish || 0, 0)} <span class='text-muted'>km</span></nobr>\n                            </div>\n                        </div>\n                    </div>\n                    <div class='d-flex justify-content-between mt-2'>\n                        {selectedCheckpoint.requiredRestMinutes && <div class='flex-fill bg-light rounded-lg p-3 align-middle'>\n                            <div>\n                                <small class='text-muted'>\n                                    <i class='fas fa-bed' /> Mandatory rest\n                                </small>\n                            </div>\n                            <div class='text-center'>\n                                <nobr>{util.secToHms(selectedCheckpoint.requiredRestMinutes * 60, true)}</nobr>\n                                {selectedCheckpoint.timeEqualization && <>\n                                    <span class='text-muted ml-2'>+</span> <i class='fas fa-user-clock' /> Time Equalization\n                                </>}\n                            </div>\n                        </div>}\n                    </div>\n                </div>\n            </div>\n\n\n            {selectedCheckpoint.hideResults ? <></> : <>\n                <div class='d-flex justify-content-center mb-3'>\n                    <div class='col px-0 pt-2'>\n                        <button\n                            type='button'\n                            class={`btn btn-block rounded-pill-left rounded-none ${submenu === 'detailsIn' ? 'btn-primary' : 'btn-outline-primary'} text-nowrap`}\n                            style='text-overflow: ellipsis; overflow: hidden;'\n                            onClick={this.chooseSubmenu}\n                            data-submenu='detailsIn'\n                        >\n                            Details in\n                        </button>\n                    </div>\n                    <div class='col px-0 pt-2'>\n                        <button\n                            type='button'\n                            class={`btn btn-block rounded-none ${submenu === 'detailsOut' ? 'btn-primary' : 'btn-outline-primary'} text-nowrap`}\n                            style='text-overflow: ellipsis; overflow: hidden;'\n                            onClick={this.chooseSubmenu}\n                            data-submenu='detailsOut'\n                        >\n                            Detail out\n                        </button>\n                    </div>\n                    <div class='col px-0 pt-2'>\n                        <button\n                            type='button'\n                            class={`btn btn-block rounded-pill-right rounded-none ${submenu === 'legTimes' ? 'btn-primary' : 'btn-outline-primary'} text-nowrap`}\n                            style='text-overflow: ellipsis; overflow: hidden;'\n                            onClick={this.chooseSubmenu}\n                            data-submenu='legTimes'\n                        >\n                            Leg times\n                        </button>\n                    </div>\n                </div>\n\n                <div\n                    class='w-100 overflow-auto position-relative'\n                    style='max-height: 60vh;'\n                >\n                    {/* {\n                        \"position\": [],\n                        \"id\": \"2e8f57cb-4bc0-4f5f-b41c-783944be9b8a\",\n                        \"bib\": 30,\n                        \"checkpoint\": \"e1f8e66f-1629-4ea6-b155-fa8fb3b377ab\",\n                        \"direction\": \"out\",\n                        \"dogs\": 10,\n                        \"timestamp\": \"2019-03-12T05:50:00.000Z\"\n                    }, */}\n\n                    <div class='table-responsive-lg'>\n                        <table class='table table-striped table-sm'>\n                            {submenu === 'detailsIn' && <>\n                                <thead>\n                                    <tr>\n                                        <th>#</th>\n                                        <th>Musher</th>\n                                        <th>Time in</th>\n                                        <th>Time out</th>\n                                        <th>Time used</th>\n                                        <th>Avg speed</th>\n                                        <th>Dogs in</th>\n                                    </tr>\n                                </thead>\n                                <tbody>\n                                {lastResultsIn && lastResultsIn.map((res, idx) => {\n                                    const bib = parseInt(res.bib, 10);\n                                    let selectedMusher = bib ? raceStore.getMusherByBibId(bib) : null;\n                                    // const team = raceStore.getTeamById(musher.team);\n                                    // let selectedMusher = sortedContestants ? sortedContestants.find(e => e.bib === parseInt(res.bib, 10)) : null;\n\n                                    selectedMusher = selectedMusher ? selectedMusher : {};\n                                    const resOut = lastResultsOut.find(e => e.bib === parseInt(res.bib, 10));\n                                    const resIn = lastResultsIn.find(e => e.bib === parseInt(res.bib, 10));\n                                    const resScratched = lastResultsScratched.find(e => e.bib === parseInt(res.bib, 10));\n                                    const prevResOut = prevResultsOut && prevResultsOut.find(e => e.bib === parseInt(res.bib, 10));\n                                    let timeused;\n                                    let restTime;\n                                    let avgSpeed = 0;\n                                    if (prevResOut && res) {\n                                        timeused = mu.deltaSec(prevResOut.timestamp, res.timestamp);\n                                        avgSpeed = selectedCheckpoint.distanceFromPrev / (timeused / 3600);\n                                    }\n                                    if (resIn && resOut && resIn.timestamp && resOut.timestamp) {\n                                        restTime = mu.deltaSec(resIn.timestamp, resOut.timestamp);\n                                    }\n                                    return (<>\n                                        <tr>\n                                            <td class='text-center'>{idx + 1}</td>\n                                            <td>\n                                                <div class='d-flex flex-nowrap'>\n                                                    <div\n                                                        class='text-white font-weight-bolder pl-2 pr-1 py-0 rounded-pill-left rounded-none mr-2'\n                                                        style={`background-color: ${mu.getRankingColor(idx + 1)}; width: 45px;`}\n                                                    >\n                                                        {res.bib}\n                                                    </div>\n                                                    <div>\n                                                        <nobr>\n                                                            {selectedMusher.flag} {selectedMusher.lastname}\n                                                        </nobr>\n                                                    </div>\n                                                </div>\n                                            </td>\n                                            <td class='text-center'>\n                                                {!selectedCheckpoint.isStartLine && <>\n                                                    <nobr>\n                                                        {mu.formatDate(resIn.timestamp, { locale: language, day: 'numeric', month: 'numeric', hour12: false, hour: '2-digit', minute: '2-digit' })}\n                                                    </nobr>\n                                                </>}\n                                            </td>\n                                            <td class='text-center'>\n                                                {resOut && <>\n                                                    <nobr>\n                                                        {mu.formatDate(resOut.timestamp, { locale: language, day: 'numeric', month: 'numeric', hour12: false, hour: '2-digit', minute: '2-digit' })}\n                                                    </nobr>\n                                                </>}\n                                                {resScratched && <>\n                                                    <nobr class='text-danger'>\n                                                        <i class='fas fa-times' />\n                                                        {mu.formatDate(resScratched.timestamp, { locale: language, day: 'numeric', month: 'numeric', hour12: false, hour: '2-digit', minute: '2-digit' })}\n                                                    </nobr>\n                                                </>}\n                                            </td>\n                                            <td class='text-center'>\n                                                {!selectedCheckpoint.isStartLine && <>\n                                                    <nobr>\n                                                        {util.secToHms(timeused, true)}\n                                                    </nobr>\n                                                </>}\n                                            </td>\n                                            <td class='text-center'>\n                                                {!selectedCheckpoint.isStartLine && <>\n                                                    <nobr>\n                                                        {util.format(avgSpeed || 0, 1)} <span class='text-muted font-weight-lighter'>km/t</span>\n                                                    </nobr>\n                                                </>}\n                                            </td>\n                                            <td class='text-center'>{res.dogs}</td>\n                                        </tr>\n                                        {/* <tr>\n                                            <td colspan='8'>\n                                                <xmp>{JSON.stringify(prevCp, null, 4)}</xmp>\n                                                <xmp>{JSON.stringify(prevResOut, null, 4)}</xmp>\n                                                <xmp>{JSON.stringify(selectedMusher, null, 4)}</xmp>\n                                            </td>\n                                        </tr> */}\n                                    </>);\n                                })}\n                                </tbody>\n                            </>}\n                            {submenu === 'detailsOut' && <>\n                                <thead>\n                                    <tr>\n                                        <th>#</th>\n                                        <th>Musher</th>\n                                        <th>Time in</th>\n                                        <th>Time out</th>\n                                        <th>Time used</th>\n                                        <th>Rest in cp</th>\n                                        <th>Avg speed</th>\n                                        <th>Dogs out</th>\n                                        <th>Next CP</th>\n                                    </tr>\n                                </thead>\n                                <tbody>\n                                {lastResultsOut && lastResultsOut.map((res, idx) => {\n                                    const bib = parseInt(res.bib, 10);\n                                    let selectedMusher = bib ? raceStore.getMusherByBibId(bib) : null;\n                                    selectedMusher = selectedMusher ? selectedMusher : {};\n\n                                    // let selectedMusher = sortedContestants ? sortedContestants.find(e => e.bib === parseInt(res.bib, 10)) : null;\n                                    // selectedMusher = selectedMusher ? selectedMusher : {};\n                                    const resIn = lastResultsIn.find(e => e.bib === parseInt(res.bib, 10));\n                                    const resOut = lastResultsOut.find(e => e.bib === parseInt(res.bib, 10));\n                                    const resScratched = lastResultsScratched.find(e => e.bib === parseInt(res.bib, 10));\n                                    const prevResOut = prevResultsOut && prevResultsOut.find(e => e.bib === parseInt(res.bib, 10));\n                                    const nextResIn = nextResultsIn && nextResultsIn.find(e => e.bib === parseInt(res.bib, 10));\n                                    let timeused;\n                                    let restTime;\n                                    let avgSpeed = 0;\n                                    if (prevResOut && res) {\n                                        timeused = mu.deltaSec(prevResOut.timestamp, res.timestamp);\n                                        avgSpeed = selectedCheckpoint.distanceFromPrev / (timeused / 3600);\n                                    }\n                                    if (resIn && resOut && resIn.timestamp && resOut.timestamp) {\n                                        restTime = mu.deltaSec(resIn.timestamp, resOut.timestamp);\n                                    }\n\n                                    let estTimeInNextCp;\n                                    let estTimeToNext = selectedCheckpoint.estTimeToCpMinutes || 0;\n                                    if (estTimeToNext && selectedMusher.cpSortOrder === selectedCheckpoint.sortOrder) {\n                                        estTimeInNextCp = mu.addDeltaSec(resOut.timestamp, estTimeToNext * 60);\n                                    }\n\n                                    return (<>\n                                        <tr>\n                                            <td class='text-center'>{idx + 1}</td>\n                                            <td>\n                                                <div class='d-flex flex-nowrap'>\n                                                    <div\n                                                        class='text-white font-weight-bolder pl-2 pr-1 py-0 rounded-pill-left rounded-none mr-2'\n                                                        style={`background-color: ${mu.getRankingColor(idx + 1)}; width: 45px;`}\n                                                    >\n                                                        {res.bib}\n                                                    </div>\n                                                    <div>\n                                                        <nobr>\n                                                            {selectedMusher.flag} {selectedMusher.lastname}\n                                                        </nobr>\n                                                    </div>\n                                                </div>\n                                            </td>\n                                            <td class='text-center'>\n                                                {!selectedCheckpoint.isStartLine && <>\n                                                    <nobr>\n                                                        {mu.formatDate(resIn.timestamp, { locale: language, day: 'numeric', month: 'numeric', hour12: false, hour: '2-digit', minute: '2-digit' })}\n                                                    </nobr>\n                                                </>}\n                                            </td>\n                                            <td class='text-center'>\n                                                {resOut && <>\n                                                    <nobr>\n                                                        {mu.formatDate(resOut.timestamp, { locale: language, day: 'numeric', month: 'numeric', hour12: false, hour: '2-digit', minute: '2-digit' })}\n                                                    </nobr>\n                                                </>}\n                                                {resScratched && <>\n                                                    <nobr class='text-danger'>\n                                                        <i class='fas fa-times' />\n                                                        {mu.formatDate(resScratched.timestamp, { locale: language, day: 'numeric', month: 'numeric', hour12: false, hour: '2-digit', minute: '2-digit' })}\n                                                    </nobr>\n                                                </>}\n                                            </td>\n                                            <td class='text-center'>\n                                                {!selectedCheckpoint.isStartLine && <>\n                                                    <nobr>\n                                                        {util.secToHms(timeused, true)}\n                                                    </nobr>\n                                                </>}\n                                            </td>\n                                            <td class='text-center'>\n                                                {!selectedCheckpoint.isStartLine && restTime && <>\n                                                    <nobr>\n                                                        {util.secToHms(restTime, true)}\n                                                    </nobr>\n                                                </>}\n                                            </td>\n                                            <td class='text-center'>\n                                                {!selectedCheckpoint.isStartLine && <>\n                                                    <nobr>\n                                                        {util.format(avgSpeed || 0, 1)} <span class='text-muted font-weight-lighter'>km/t</span>\n                                                    </nobr>\n                                                </>}\n                                            </td>\n                                            <td class='text-center'>\n                                                {resOut.dogs}\n                                            </td>\n                                            <td class='text-center'>\n                                                {!selectedCheckpoint.isFinishLine && nextResIn ? <>\n                                                    <nobr>\n                                                        {mu.formatDate(nextResIn.timestamp, { locale: language, day: 'numeric', month: 'numeric', hour12: false, hour: '2-digit', minute: '2-digit' })}\n                                                    </nobr>\n                                                </> : <>\n                                                    {estTimeInNextCp && <>\n                                                        <nobr class='text-muted'>\n                                                            {mu.formatDate(estTimeInNextCp, { locale: language, day: 'numeric', month: 'numeric', hour12: false, hour: '2-digit', minute: '2-digit' })}\n                                                        </nobr>\n                                                    </>}\n                                                </>}\n                                            </td>                                    \n                                        </tr>\n                                        {/* <tr>\n                                            <td colspan='8'>\n                                                <xmp>{JSON.stringify(prevCp, null, 4)}</xmp>\n                                                <xmp>{JSON.stringify(prevResOut, null, 4)}</xmp>\n                                                <xmp>{JSON.stringify(selectedMusher, null, 4)}</xmp>\n                                            </td>\n                                        </tr> */}\n                                    </>);\n                                })}\n                                </tbody>\n                            </>}\n                            {submenu === 'legTimes' && <>\n                                <thead>\n                                    <tr>\n                                        <th>#</th>\n                                        <th>Musher</th>\n                                        <th>Time in</th>\n                                        <th>Time out</th>\n                                        <th>Time used</th>\n                                        <th>Avg speed</th>\n                                        <th>Dogs in</th>\n                                    </tr>\n                                </thead>\n                                <tbody>\n                                {lastResultsLegtimes && lastResultsLegtimes.map((res, idx) => {\n                                    const bib = parseInt(res.bib, 10);\n                                    let selectedMusher = bib ? raceStore.getMusherByBibId(bib) : null;\n                                    selectedMusher = selectedMusher ? selectedMusher : {};                                    \n                                    // const selectedMusher = sortedContestants ? sortedContestants.find(e => e.bib === parseInt(res.bib, 10)) : null;\n                                    const resIn = lastResultsIn.find(e => e.bib === parseInt(res.bib, 10));\n                                    const resOut = lastResultsOut.find(e => e.bib === parseInt(res.bib, 10));\n                                    const resScratched = lastResultsScratched.find(e => e.bib === parseInt(res.bib, 10));\n                                    const prevResOut = prevResultsOut && prevResultsOut.find(e => e.bib === parseInt(res.bib, 10));\n                                    let timeused;\n                                    let avgSpeed = 0;\n                                    if (prevResOut && res) {\n                                        timeused = mu.deltaSec(prevResOut.timestamp, res.timestamp);\n                                        avgSpeed = selectedCheckpoint.distanceFromPrev / (timeused / 3600);\n                                    }\n                                    return (<>\n                                        <tr>\n                                            <td class='text-center'>{idx + 1}</td>\n                                            <td>\n                                                <div class='d-flex flex-nowrap'>\n                                                    <div\n                                                        class='text-white font-weight-bolder pl-2 pr-1 py-0 rounded-pill-left rounded-none mr-2'\n                                                        style={`background-color: ${mu.getRankingColor(idx + 1)}; width: 45px;`}\n                                                    >\n                                                        {res.bib}\n                                                    </div>\n                                                    <div>\n                                                        <nobr>\n                                                            {selectedMusher.flag} {selectedMusher.lastname}\n                                                        </nobr>\n                                                    </div>\n                                                </div>\n                                            </td>\n                                            <td class='text-center'>\n                                                {!selectedCheckpoint.isStartLine && <>\n                                                    <nobr>\n                                                        {mu.formatDate(resIn.timestamp, { locale: language, day: 'numeric', month: 'numeric', hour12: false, hour: '2-digit', minute: '2-digit' })}\n                                                    </nobr>\n                                                </>}\n                                            </td>\n                                            <td class='text-center'>\n                                                {resOut && <>\n                                                    <nobr>\n                                                        {mu.formatDate(resOut.timestamp, { locale: language, day: 'numeric', month: 'numeric', hour12: false, hour: '2-digit', minute: '2-digit' })}\n                                                    </nobr>\n                                                </>}\n                                                {resScratched && <>\n                                                    <nobr class='text-danger'>\n                                                        <i class='fas fa-times' />\n                                                        {mu.formatDate(resScratched.timestamp, { locale: language, day: 'numeric', month: 'numeric', hour12: false, hour: '2-digit', minute: '2-digit' })}\n                                                    </nobr>\n                                                </>}\n                                            </td>\n                                            <td class='text-center'>\n                                                {!selectedCheckpoint.isStartLine && <>\n                                                    <nobr>\n                                                        {util.secToHms(timeused, true)}\n                                                    </nobr>\n                                                </>}\n                                            </td>\n                                            <td class='text-center'>\n                                                {!selectedCheckpoint.isStartLine && <>\n                                                    <nobr>\n                                                        {util.format(avgSpeed || 0, 1)} <span class='text-muted font-weight-lighter'>km/t</span>\n                                                    </nobr>\n                                                </>}\n                                            </td>\n                                            <td class='text-center'>{res.dogs}</td>\n                                        </tr>\n                                        {/* <tr>\n                                            <td colspan='8'>\n                                                <xmp>{JSON.stringify(prevCp, null, 4)}</xmp>\n                                                <xmp>{JSON.stringify(prevResOut, null, 4)}</xmp>\n                                                <xmp>{JSON.stringify(selectedMusher, null, 4)}</xmp>\n                                            </td>\n                                        </tr> */}\n                                    </>);\n                                })}\n                                </tbody>\n                            </>}\n                        </table>\n                    </div>\n                </div>\n            \n            </>}\n\n\n\n            {/* <h3>RaceLiveCheckpointResult</h3> */}\n            {/* <h5>{id} {selectedCheckpoint.name}</h5> */}\n            {/* <xmp>{JSON.stringify(selectedCheckpoint, null, 4)}</xmp> */}\n            {/* <xmp>{JSON.stringify(selectedCheckpoint, null, 4)}</xmp> */}\n            {/* <xmp>{JSON.stringify(lastResultsIn, null, 4)}</xmp> */}\n        </>);\n    }\n}\n\nexport default RaceLiveCheckpointResult;\n","import { h, Component } from 'preact';\nimport { useEffect } from 'preact/hooks';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport { Text, Localizer } from 'preact-i18n';\nimport { route } from 'preact-router';\nimport Markdown from 'preact-markdown';\nimport linkstate from 'linkstate';\n\nimport Trackmap from '../../components/public/trackmap';\nimport Gauge from '../../components/gauge';\n\nimport DogScroller from '../../components/dog/scroller';\nimport ImageScroller from '../imageScroller';\n\nimport Overlay from '../../components/overlay/';\nimport Drawer from '../../components/drawer/';\nimport HeaderCustom from '../../components/header/custom';\nimport Loading from '../../components/loading/';\nimport TeamsPublicDetail from '../../routes/teams/publicDetail';\nimport DogPublicDetail from '../../routes/dogs/publicDetail';\nimport RaceLiveCheckpointResult from '../../components/races/liveCheckpointResult';\nimport LineGraph from '../../components/lineGraph';\nimport States from '../../components/states';\nimport PublicTeam from '../team/public';\nimport RaceTrackingMusherDetail from './raceTrackingMusherDetail';\n\nimport mu from '../../lib/musher-util';\nconst MARGIN_TOP = mu.marginTop(true, false);\nconst MARGIN_TOP_BACK = mu.marginTopBack(false);\nconst MARGIN_BOTTOM = mu.marginBottom();\nconst SUB_MENU_MARGIN_TOP = mu.subMenuMarginTop();\n\nfunction PageTitle(title, classes = '', style = '') {\n    useEffect(() => {\n        document.title = `Homerun Race: ${title}`;\n    }, [title]);\n    return <span class={classes} style={style}>{title}</span>;\n}\n\nfunction getWindowDimensions() {\n    const { innerWidth: width, innerHeight: height } = window;\n    return {\n        width,\n        height\n    };\n}\n\nconst fieldSorter = (fields) => (a, b) => fields.map(o => {\n    let dir = 1;\n    if (o[0] === '-') { dir = -1; o=o.substring(1); }\n    return a[o] > b[o] ? dir : a[o] < b[o] ? -(dir) : 0;\n}).reduce((p, n) => p ? p : n, 0);\n\nconst initialState = {\n    isLoading: false,\n    email: '',\n    submenu: 'ads',\n    jwtToken: util.getJwtToken(),\n\n    reloadInSec: null,\n    reloadIsActive: false,\n\n    leaderboardMode: 'mushers',\n    filterByraceClass: '',\n    showLeaderBoard: true,\n    showNews: true,\n};\n\nconst RELOAD_INTERVAL_IN_SEC = 60;\nconst REPLAY_SPEED = 1;\n\n@observer\nclass ReloadTimer extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            ...initialState,\n        };\n        this.updateTimer = {};\n    }\n\n    initComponent = () => {\n        this.setState({\n            reloadIsActive: true,\n        }, () => this.tickReloadTimeer());\n    }\n\n    tickReloadTimeer = () => {\n        const { reloadLastEpoch } = this.props;\n        const { reloadIsActive } = this.state;\n        if (reloadIsActive) {\n            const now = Math.floor(new Date().getTime() / 1000);\n            const reloadInSec = RELOAD_INTERVAL_IN_SEC - (now - reloadLastEpoch);\n            this.setState({ reloadInSec });\n            clearTimeout(this.updateTimer.tick);\n            this.updateTimer.tick = setTimeout(() => this.tickReloadTimeer(), 1000);\n        }\n        return false;\n    }\n\n    componentDidMount() {\n        this.initComponent();\n    }\n\n    componentWillUnmount() {\n        clearTimeout(this.updateTimer.tick);\n    }\n\n    render() {\n        const { reloadInSec } = this.state;\n        const { radius = 13, fontSize = 11, classNames = '' } = this.props;\n        const reloadPercent = Math.floor(util.normalizeBetween(reloadInSec, 0, RELOAD_INTERVAL_IN_SEC, 0, 100))\n\n        return (<>\n            <span class={classNames}>\n                <Gauge key={`gauge-reload-page`}\n                    color='primary'\n                    radius={radius}\n                    showPercentText={false}\n                    percent={reloadPercent}\n                    showCenterText={true}\n                    centerText={reloadInSec}\n                    centerTextSize={fontSize}\n                    centerTextY={'55%'}\n                />\n            </span>\n        </>);\n    }\n}\n\n@observer\nclass Results extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n        };\n    }\n\n    chooseSubmenu = (e) => {\n\t\tconst submenu = e.target.closest('button').dataset.submenu;\n\t\tthis.setState({ submenu });\n\t}\n\n    render() {\n        const { raceStore, userStore } = this.props.stores;\n        const { submenu = 'details' } = this.state;\n        const { isAdmin } = userStore;\n\n        const { waypoints } = raceStore;\n        const { raceClass = {}, race = {}, onMarkerClick = () => {} } = this.props;\n\n        return (<>\n            <div class='d-flex justify-content-center align-items-center mb-2'>\n                <span style='font-size: 1.3em;'><Text id='races.gps-ranking'>GPS Ranking</Text>: {race.title} - {raceClass.title}</span>\n            </div>\n\n            <div\n                class='w-100 overflow-auto'\n                style='max-height: 60vh;'\n            >\n                {!waypoints || waypoints.length === 0 && <>\n                    <div class='text-center text-muted'>\n                        <div class='display-1'><i class='fas fa-dog' /></div>\n                        <div class='w-100'>\n                            <h3><Text id='races.no-teams-found'>No teams found!</Text></h3>\n                            <Text id='races.loading-teams'>Loading teams...</Text>\n                        </div>\n                        <div class='spinner-border text-primary' style='width: 3rem; height: 3rem;' role='status'>\n                            <span class='sr-only'>Loading...</span>\n                        </div>\n                    </div>\n                </>}\n\n                <table class='table table-sm table-striped'>\n                    {waypoints && waypoints.map((musher, idx) => {\n                        const restPercent = util.format(musher.restTime / musher.raceTime * 100, 0);\n                        const shortname = mu.displayNameShort(musher);\n\n                        return (<>\n                            <tr onClick={() => onMarkerClick(musher)}>\n                                <td style='width: 15px;' class='text-center'>{musher.rank}</td>\n                                <td>\n                                    <div class='d-flex justify-content-between align-items-start w-100'>\n                                        {/* <div\n                                            class='rounded-circle imageRounded imageRoundedSmallIcon float-left text-center'\n                                            style={`\n                                                background-image: url(\"${musher.image}\");\n                                                background-size: cover;\n                                                border: 1px ${mu.getRankingColor(musher.rank || idx + 1)} solid;\n                                                width: 30px !important;\n                                                height: 30px;\n                                                padding-top: 3px;\n                                            `}\n                                        >\n                                            {musher.image ? '' : shortname}\n                                        </div> */}\n                                        <div class='flex-grow-1'>\n                                            <div class='float-right ml-2'>\n                                                <div class='text-center'>\n                                                    <Gauge key={`gauge-reload-page`}\n                                                        color={restPercent < 40 ? (restPercent < 30 ? 'danger' : 'warning') : 'success'}\n                                                        radius={30}\n                                                        showPercentText={false}\n                                                        percent={restPercent}\n                                                        showCenterText={true}\n                                                        centerText={`${restPercent}%`}\n                                                        centerTextSize={15}\n                                                        centerTextY={'55%'}\n                                                    />\n                                                </div>\n                                            </div>\n                                            <div class='float-right'>\n                                                {musher.finishTime < 9999999999 ? <>\n                                                    <i class='fas fa-flag-checkered text-success' />\n                                                </> : <>\n                                                    {musher.currentState === 'rest' ? <>\n                                                        <i class='fas fa-bed text-warning' />\n                                                    </> : <>\n                                                        <i class='fas fa-running text-primary' />\n                                                    </>}\n                                                </>}\n                                            </div>\n\n                                            <span class='text-white rounded-pill-left px-2 mr-2'\n                                                style={`background-color: ${mu.getRankingColor(musher.rank || idx + 1)};`}\n                                            >\n                                                {musher.bib}\n                                            </span>\n\n                                            {musher.flag}  {musher.title}\n                                            <div>\n                                                <small>\n                                                    {musher.finishTime < 9999999999 ? <>\n                                                        {musher.diffToFirstFinishTime > 0 ? <>\n                                                            <span class='text-muted'><i class='fas fa-arrow-up' /></span> {util.secToHms(musher.diffToFirstFinishTime)}\n                                                        </> : <>\n                                                            <span class='text-muted'><i class='fas fa-flag-checkered' /></span> {util.formatDate(util.parseInputDate(musher.finishTime), { locale: 'no-NB', hour12: false, hour: '2-digit', minute: '2-digit' })}\n                                                        </>}\n                                                        <nobr>\n                                                            <i class='fas fa-running text-muted' /> {util.secToHms(musher.raceTime)}\n                                                        </nobr>\n                                                        <nobr>\n                                                            <i class='fas fa-bed ml-2 text-muted' /> {util.format(musher.restTime / musher.raceTime * 100, 0)}%\n                                                        </nobr>\n                                                    </> : <>\n                                                        {/* <span class='text-muted'><i class='fas fa-compass' /></span> {mu.windDirection(musher.bearing)} */}\n                                                        {/* {util.format(musher.totalDistanceOnTrack, 1)} km */}\n                                                        <nobr>\n                                                            <span class='text-muted'><i class='fas fa-flag-checkered' /></span> {util.format(musher.distanceToFinish, 1)} km\n                                                        </nobr>\n                                                        {musher.distanceToFinish !== musher.distanceToFirst && musher.distanceToFirst > 0 && <>\n                                                            <nobr>\n                                                                <span class='text-muted font-weight-light ml-2'>1st:</span> {util.format(musher.distanceToFirst, 1)} km\n                                                            </nobr>\n                                                        </>}\n                                                        {musher.distanceToFinish !== musher.distanceToForward && musher.distanceToForward > 0 && <>\n                                                            <nobr>\n                                                                <span class='text-muted ml-2'><i class='fas fa-arrow-up' /></span> {util.format(musher.distanceToForward, 1)} km\n                                                            </nobr>\n                                                        </>}\n                                                        {musher.distanceToBehind > 0 && <>\n                                                            <nobr>\n                                                                <span class='text-muted ml-2'><i class='fas fa-arrow-down' /></span> {util.format(musher.distanceToBehind, 1)} km\n                                                            </nobr>\n                                                        </>}\n                                                        <br />\n                                                        <nobr>\n                                                            <span class='text-muted'><i class='fas fa-tachometer-alt' /></span> {util.format((musher.currentAvgSpeed ? musher.currentAvgSpeed * 3.6 : musher.speed) || 0, 1)} km/h\n                                                        </nobr>\n                                                        <nobr>\n                                                            <i class='fas fa-running ml-2 text-muted' /> {util.secToHms(musher.raceTime)}\n                                                        </nobr>\n                                                        <nobr>\n                                                            <i class='fas fa-bed ml-2 text-muted' /> {util.format(musher.restTime / musher.raceTime * 100, 0)}%\n                                                        </nobr>\n                                                    </>}\n\n                                                </small>\n                                            </div>\n                                        </div>\n                                    </div>\n                                    <div class='mt-1 container-fluid'>\n                                        <States stores={this.props.stores} states={musher.states} duration={musher.raceTime} key={`state-${musher.bib}`} height={'6px'} showText={false} />\n                                    </div>\n                                </td>\n                            </tr>\n                        </>);\n                    })}\n                </table>\n\n                {/* waypoints: {JSON.stringify(waypoints.slice(0, 5), null, 4)}<br /> */}\n            </div>\n        </>);\n    }\n}\n\n@observer\nclass MusherInfo extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n        };\n    }\n\n    toggleAdminInfo = (e) => {\n        e.stopPropagation();\n        const { showAdminInfo } = this.state;\n        this.setState({\n            showAdminInfo: !showAdminInfo,\n        });\n    }\n\n    toggleInfo = (e) => {\n        e.stopPropagation();\n        const { showInfo } = this.state;\n        this.setState({\n            showInfo: !showInfo,\n        });\n    }\n\n    onDogClick = (e, dogid, dogs) => {\n        e.preventDefault();\n        e.stopPropagation();\n        const currentDog = dogs.find(e => e.uuidv4 === dogid);\n        this.setState({\n            currentDog,\n            showDog: dogid,\n            dogs,\n        });\n        return false;\n    }\n\n    chooseSubmenu = (e) => {\n\t\tconst submenu = e.target.closest('button').dataset.submenu;\n\t\tthis.setState({ submenu });\n\t}\n\n    render() {\n        const { raceStore, userStore } = this.props.stores;\n        const { showAdminInfo, showInfo, submenu = 'details', showDog, currentDog: dog = {} } = this.state;\n\n        const { waypoints, totalTrackLength } = raceStore;\n\n        const { wpData = {}, onMarkerClick = () => {} } = this.props;\n        const wp = raceStore.findWaypointByBib(wpData.bib);\n\n        const { isAdmin } = userStore;\n        const { user: currentUser = {} } = userStore;\n\n        const musher = (wpData.bib ? raceStore.getMusherByBibId(wpData.bib) : raceStore.getMusherByBibEmail(wpData.email)) || {};\n        const team = raceStore.getTeamById(musher.team);\n        const user = team.members ? team.members.find(m => m.email === musher.email) : {};\n        const raceClass = raceStore.getClassByBib(wpData.bib);\n        const totals = raceStore.getTotalsByTeamId(musher.team);\n        const image = mu.getImage({ user, team, priority: 'user', fallback: musher.image1 });\n        const shortname = mu.displayNameShort(user) || mu.displayNameShort(musher);\n\n        const dotColor = mu.getRankingColor(wp.rank);\n\n        const hasBirthday = mu.hasBirthday(dog.birth);\n        const daysUntilBirthday = dog.birth ? Math.ceil(mu.daysUntilNextBirthday(dog.birth)) : 365;\n\n        // const totalDistancePercent = util.format(wp.totalDistanceOnTrack / totalTrackLength * 100, 0);\n        const { inFront, behind } = raceStore.findNearestMushers(wpData.bib);\n\n        const restPercent = util.format(wp.restTime / wp.raceTime * 100, 0);\n        // const runPercent = 100 - restPercent;\n\n        const defaultImage = {\n            s3XXLargeLink: musher.topImage1 || './assets/homerun-race-logo.png',\n        };\n        const headerImage = team && team.imageHeader && team.imageHeader.s3XXLargeLink ? team.imageHeader : defaultImage;\n\n        const teamImages = team && team.images ? [...team.images] : [];\n        for (let i = 0, l = 3; i < l; i += 1) {\n            if (musher[`image${i}`]) {\n                teamImages.push(\n                    {\n                        s3SmallLink: musher[`image${i}`],\n                        s3LargeLink: musher[`image${i}`],\n                    }\n                );\n            }\n        }\n\n        const locale = 'en-GB';\n\n        const isYourTeam = team.members && team.members.indexOf(currentUser.id) > -1;\n        const isFollowing = team.followers && team.followers.indexOf(currentUser.id) > -1;\n        const hasRequestedFollow = team.followRequests && team.followRequests.findIndex(e => e.id === currentUser.id) > -1;\n\n        const now = Math.floor(new Date().getTime() / 1000);\n\n        return (<>\n            {behind.bib && <button class='btn btn-link text-primary mx-2 py-0 float-right' onClick={() => onMarkerClick(behind)} style='line-height: 1.0em; font-size: 2.0em;'>\n                <i class='fas fa-angle-right' />\n            </button>}\n            {inFront.bib && <button class='btn btn-link text-primary mx-2 py-0 float-right' onClick={() => onMarkerClick(inFront)} style='line-height: 1.0em; font-size: 2.0em;'>\n                <i class='fas fa-angle-left' />\n            </button>}\n\n            <div class='d-flex justify-content-center align-items-center mb-2'>\n                <span style='font-size: 1.3em; height: 16vh;'>&nbsp;</span>\n            </div>\n            <div\n                class='w-100 overflow-auto'\n                style='max-height: 55vh;'\n            >\n\n                <div class='w-100 position-absolute'\n                    style={`z-index: -1; height: 18vh; top: 0px; left: 0px; background-size: cover; background-repeat: no-repeat; background-position: 50% 30%; background-color: #a0a0a0; ${headerImage ? `background-image: url(\"${headerImage.s3XXLargeLink}\");` : ''}`}\n                />\n\n                <div class='d-flex position-relative'>\n                    <div\n                        class={`position-relative text-center border rounded-circle imageRounded imageRoundedMedium`}\n                        style={image ? `background-image: url(\"${image}\"); background-size: cover;` : ''}\n                    >\n                        {!image && <div class='text-muted' style='font-size: 25px; padding-top: 5px;'>{shortname}</div>}\n                        <div\n                            class={`rounded-pill-both px-2 text-center position-absolute ${dotColor ? '' : 'bg-secondary'} font-weight-bold`}\n                            style={`bottom: -20px; right: 0; ${dotColor ? `background-color: ${dotColor};` : ''}`}\n                        >\n                            {musher.bib && musher.bib !== 'n/a' && <>{musher.bib}</>}\n                        </div>\n                    </div>\n                    <div class='flex-grow-1 pl-3 text-overflow mb-3' style='line-height: 1.8em;'>\n                        <div class='float-right' style='font-size: 1.2em;'>\n                            {wp.finishTime < 9999999999 ? <>\n                                <i class='fas fa-flag-checkered text-success' />\n                            </> : <>\n                                {wp.currentState === 'rest' ? <>\n                                    <i class='fas fa-bed text-warning' />\n                                </> : <>\n                                    <i class='fas fa-running text-primary' />\n                                </>}\n                            </>}\n                        </div>\n                        {/* {!isYourTeam && !isFollowing && !hasRequestedFollow && team.public > 0 && <span class='float-right'>\n                            <PublicTeam stores={this.props.stores} team={team} buttonOnly={true} simple={true} classNames={'btn btn-link text-primary'} />\n                        </span>} */}\n\n                        <h3 class='mb-0'>\n                            {musher.flag} {musher.firstname} {musher.lastname}\n                        </h3>\n                        <h6 class='mb-0'>{musher.sportsClub || <>&nbsp;</>}</h6>\n                    </div>\n                </div>\n\n                <div class='d-flex justify-content-center mb-3'>\n                    <div class='col px-0 pt-2'>\n                        <button\n                            type='button'\n                            class={`btn btn-block rounded-pill-left rounded-none ${submenu === 'details' ? 'btn-primary' : 'btn-outline-primary'} text-nowrap`}\n                            style='text-overflow: ellipsis; overflow: hidden;'\n                            onClick={this.chooseSubmenu}\n                            data-submenu='details'\n                        >\n                            Details\n                        </button>\n                    </div>\n                    <div class='col px-0 pt-2'>\n                        <button\n                            type='button'\n                            class={`btn btn-block rounded-none ${submenu === 'team' ? 'btn-primary' : 'btn-outline-primary'} text-nowrap`}\n                            style='text-overflow: ellipsis; overflow: hidden;'\n                            onClick={this.chooseSubmenu}\n                            data-submenu='team'\n                        >\n                            Team\n                        </button>\n                    </div>\n                    <div class='col px-0 pt-2'>\n                        <button\n                            type='button'\n                            class={`btn btn-block rounded-pill-right rounded-none ${submenu === 'dogs' ? 'btn-primary' : 'btn-outline-primary'} text-nowrap`}\n                            style='text-overflow: ellipsis; overflow: hidden;'\n                            onClick={this.chooseSubmenu}\n                            data-submenu='dogs'\n                        >\n                            Dogs\n                        </button>\n                    </div>\n                </div>\n\n                <div\n                    class='w-100 overflow-auto position-relative'\n                >\n                    {submenu === 'details' && <>\n                        <RaceTrackingMusherDetail\n                            stores={this.props.stores}\n                            wp={wp}\n                            musher={musher}\n                        />\n                    </>}\n                    {submenu === 'team' && <>\n                        {team.public > 0 ? <>\n                            <h3>{team.name}</h3>\n                            <Markdown markdown={mu.replaceImages(team.description, team.images)} markdownOpts={mu.getMarkdownOptions()} />\n                            <ImageScroller stores={this.props.stores} images={teamImages} />\n                        </> : <>\n                            <div class='text-center text-muted'>\n                                <div class='display-1'><i class='fas fa-dog' /></div>\n                                <h3><Text id='teams.no-public-team'>No public team!</Text></h3>\n                                <Text id='teams.no-public-team'>This team is not publicly visible.</Text>\n                                {teamImages && <div class='my-3'><ImageScroller stores={this.props.stores} images={teamImages} /></div>}\n                            </div>\n                        </>}\n                    </>}\n                    {submenu === 'dogs' && <>\n                        {team.public > 0 ? <>\n                            {team.dogs && <div class='w-100 container-fluid'>\n                                <div class='row pt-2'>\n                                    <DogScroller stores={this.props.stores} dogs={team.dogs.map(d => d.id)} allDogs={team.dogs} onDogClick={this.onDogClick} />\n                                </div>\n                            </div>}\n                            {showDog && <>\n                                <div class='d-flex mb-0 mt-3 position-relative'>\n                                    <div class={`text-center border rounded-circle imageRounded imageRoundedLarge text-muted pt-2`} style={dog.image ? `background-image: url(\"${dog.image.s3LargeLink}\"); background-size: cover;` : ''}>\n                                        {!dog.image && <span class='font-weight-lighter' style='font-size: 35px;'>{util.ucfirst(dog.name, true)}</span>}\n                                    </div>\n                                    <div class='flex-grow-1 pl-3 pr-2'\n                                        style={`border-right: 4px solid ${userStore.findHarness(dog.harness, 'colorNonstop')} !important; line-height: 1.2em;`}\n                                    >\n                                        <h5 class='mb-1'>\n                                            {dog.shortname || dog.name} {dog.shortname && dog.shortname !== '' && <> - <span class='font-weight-lighter'>{dog.name}</span></>}\n                                            {hasBirthday && <>\n                                                <i class='fas fa-birthday-cake ml-3' />\n                                            </>}\n                                        </h5>\n                                        <div>\n                                            {daysUntilBirthday < 7 && <>\n                                                <span class='text-muted mr-2'>\n                                                    <i class='fas fa-birthday-cake' /> in {daysUntilBirthday} days\n                                                </span>\n                                            </>}\n                                            {dog.birth && <span class='mr-2'>{util.age(dog.birth, dog.deceased)}</span>}\n                                            {dog.gender === 'female' ? <i class='fas fa-venus' /> : <i class='fas fa-mars' />}\n                                        </div>\n                                    </div>\n                                </div>\n                                {/* <xmp>dog: {JSON.stringify(dog, null, 4)}</xmp> */}\n                            </>}\n                        </> : <>\n                            <div class='text-center text-muted'>\n                                <div class='display-1'><i class='fas fa-dog' /></div>\n                                <h3><Text id='teams.no-public-team'>No public team!</Text></h3>\n                                <Text id='teams.no-public-team'>This team is not publicly visible.</Text>\n                            </div>\n                        </>}\n                    </>}\n\n                    {isAdmin && <div style='max-height: 200px; max-width: 70vw; overflow: auto;'>\n                        <button class='btn btn-link btn-block' onClick={this.toggleAdminInfo}>\n                            Toggle admin info\n                        </button>\n                        {showAdminInfo && <>\n                            <small>\n                                <xmp>\n                                    musher: {JSON.stringify(musher, null, 4)}<br />\n                                    user: {JSON.stringify(user, null, 4)}<br />\n                                    team: {JSON.stringify(team, null, 4)}<br />\n                                    totals: {JSON.stringify(totals, null, 4)}<br />\n\n                                    {/* {\n                                        \"firstDate\": \"2021-03-19 11:59\",\n                                        \"lastDate\": \"2021-03-20 17:13\",\n                                        \"firstEpoch\": 1616151540000,\n                                        \"lastEpoch\": 1616256780000,\n                                        \"now\": {\n                                            \"$numberDecimal\": \"1642675856939\"\n                                        },\n                                        \"totalTimeUsedSec\": 26524316,\n                                        \"totalWorkoutTimeUsedSec\": 130895,\n                                        \"lastDuration\": 25655,\n                                        \"team\": 84,\n                                        \"count\": 4,\n                                        \"distanceKm\": 301.5906237951766,\n                                        \"elevation\": 3610.019075719202,\n                                        \"duration\": 77343,\n                                        \"rest\": 1332,\n                                        \"speedAvg\": 8.294634979660305,\n                                        \"totalRest\": 54884,\n                                        \"loadIndex\": 1080.75,\n                                        \"totalKcalRelated\": 544.535560976128,\n                                        \"weightedTotalKcal\": 12303.171406247127,\n                                        \"flatTotalKcal\": 9424.70699359927,\n                                        \"firstGpxStartEpoch\": null,\n                                        \"lastGpxStartEpoch\": null\n                                    } */}\n\n                                </xmp>\n                            </small>\n                        </>}\n                    </div>}\n                </div>\n            </div>\n        </>);\n    }\n}\n\n@observer\nclass TrackingMap extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            ...initialState,\n            reloadLastEpoch: Math.floor(new Date().getTime() / 1000),\n            historyPointIndex: 0,\n            timerRunning: true,\n            replayHistory: false,\n            replaySpeed: REPLAY_SPEED,\n        };\n        this.updateTimer = {};\n    }\n\n    handleHistoryPointIndex = (e) => {\n        const historyIdx = parseInt(e.target.value, 10);\n        clearTimeout(this.updateTimer.reload);\n\n        // console.log({ historyIdx });\n        this.setState({\n            historyPointIndex: historyIdx,\n            timerRunning: false,\n        }, () => {\n            const { historyPointIndex } = this.state;\n            const { raceStore } = this.props.stores;\n            raceStore.updateWaypointPosition(Math.abs(historyPointIndex));\n        });\n    }\n\n    playHistory = () => {\n        clearTimeout(this.updateTimer.reload);\n        const { historyPointIndex, replaySpeed } = this.state;\n        const { raceStore } = this.props.stores;\n        const raceTrackerPointTimestamp = raceStore.getRaceTrackerTimestamp(historyPointIndex + 1);\n        // console.log('playHistory', { historyPointIndex });\n        const state = {\n            historyPointIndex: historyPointIndex + 1,\n            timerRunning: false,\n            playingHistory: true,\n        };\n        if (raceTrackerPointTimestamp) {\n            state.raceTrackerPointTimestamp = raceTrackerPointTimestamp\n        }\n        this.setState({\n            ...state,\n        }, () => {\n            raceStore.updateWaypointPosition(Math.abs(historyPointIndex + 1));\n        });\n\n        // Set replay timer\n        clearTimeout(this.updateTimer.history);\n        this.updateTimer.history = setTimeout(() => {\n            this.playHistory();\n        }, replaySpeed * 1000);\n    }\n\n    pauseHistory = () => {\n        clearTimeout(this.updateTimer.history);\n        this.setState({\n            playingHistory: false,\n        });\n    }\n\n    loadLiveRaceResults = async (props = this.props, { teamIds, focusOnMushers, bibs, classid, historySteps }) => {\n        const { raceStore, userStore } = props.stores;\n        const { race } = raceStore;\n        const { historyPointIndex, replayHistory, timerRunning } = this.state;\n        const { showDrawerReplay } = this.props;\n        const classInfo = raceStore.getClassById(classid) || {};\n        const { isAdmin } = userStore;\n\n        await raceStore.getRaceTrackerData(race.raceTrackerRace, {\n            historySteps,\n            history: (replayHistory || showDrawerReplay),\n            bibs,\n            classid,\n            startDate: classInfo.startDate,\n            endDate: classInfo.endDate,\n            isAdmin,\n        });\n        raceStore.getRaceTrackerActiveTeams(teamIds, focusOnMushers, bibs);\n\n        // Set reload timer\n        if (timerRunning) {\n            clearTimeout(this.updateTimer.reload);\n            this.updateTimer.reload = setTimeout(() => {\n                console.log('loadLiveRaceResults.reloading...');\n                const reloadLastEpoch = Math.floor(new Date().getTime() / 1000);\n                this.setState({ reloadLastEpoch });\n                // this.loadRace(props);\n                this.loadLiveRaceResults(this.props, { teamIds, focusOnMushers, bibs, classid, historySteps });\n            }, RELOAD_INTERVAL_IN_SEC * 1000);\n        }\n    }\n\n    loadRaceResults = async (props = this.props, teamIds, focusOnMushers) => {\n        const { raceStore } = props.stores;\n        const { raceid } = props;\n        const { timerRunning } = this.state;\n\n        await raceStore.loadWorkoutSummary(teamIds, raceid);\n        raceStore.getWorkoutSummaryActiveTeams(teamIds, focusOnMushers);\n\n        if (timerRunning) {\n            clearTimeout(this.updateTimer.reload);\n            this.updateTimer.reload = setTimeout(() => {\n                const reloadLastEpoch = Math.floor(new Date().getTime() / 1000);\n                this.setState({ reloadLastEpoch });\n                // this.loadRace(props);\n                this.loadRaceResults(this.props, teamIds, focusOnMushers);\n            }, RELOAD_INTERVAL_IN_SEC * 1000);\n        }\n    }\n\n    loadRace = async (props = this.props) => {\n        try {\n            this.setState({ isLoading: true });\n            const { raceStore, appState } = props.stores;\n            const { raceid, classid, filterByBibs, historySteps } = props;\n            await raceStore.load(raceid);\n            raceStore.getAllClassesSortedBy();\n\n            const { race } = raceStore;\n            const { focusOnMushers } = appState;\n\n            const { selectedClassIds = [] } = appState;\n            const allClassIds = race?.classes.map(e => e.id);\n            let selectedClassId = classid || selectedClassIds[0];\n            if (allClassIds.indexOf(selectedClassId) === -1) {\n                selectedClassId = allClassIds[0];\n                appState.setSelectedClassId(selectedClassId);\n            }\n            if (classid) {\n                appState.toggleSelectedClassId(classid, true);\n            }\n            const allTeamIds = race.classes\n                .filter(currentClass => currentClass.id === selectedClassId)\n                .filter(currentClass => currentClass.contestants && currentClass.contestants.length > 0)\n                .map((currentClass) => {\n                    return currentClass.contestants.filter(musher => musher.team > 0).map(musher => musher.team);\n                })\n                .flat();\n\n            const bibs = filterByBibs ? filterByBibs : race.classes\n                .filter(currentClass => currentClass.id === selectedClassId)\n                .filter(currentClass => currentClass.contestants && currentClass.contestants.length > 0)\n                .map((currentClass) => {\n                    return currentClass.contestants.filter(musher => musher.bib > 0).map(musher => musher.bib);\n                })\n                .flat();\n\n            if (allTeamIds.length > 0) {\n                await raceStore.loadTeams(allTeamIds.join(','), false, true, true);\n            }\n            if (race.liveRace > 0) {\n                await this.loadLiveRaceResults(this.props, { teamIds: allTeamIds, focusOnMushers, bibs, classid: selectedClassId, historySteps });\n            } else {\n                await this.loadRaceResults(this.props, allTeamIds, focusOnMushers);\n            }\n\n            this.setState({ isLoading: false });\n\t\t} catch (err) {\n\t\t\tconsole.log(err);\n\t\t}\n    }\n\n    setLeaderboardMode = (e) => {\n        const leaderboardMode = e.target.parentElement.dataset.mode || e.target.dataset.mode;\n        this.setState({ leaderboardMode })\n    }\n\n    chooseRaceClass = (e) => {\n        const filterByraceClass = e.target.value;\n        this.setState({ filterByraceClass })\n    }\n\n    toggleShowLeaderBoard = (hide) => {\n        const { showLeaderBoard } = this.state;\n        if (hide === true) {\n            this.setState({ showLeaderBoard: false });\n        } else {\n            this.setState({ showLeaderBoard: !showLeaderBoard });\n        }\n    }\n\n    toggleShowNews = (hide) => {\n        const { showNews } = this.state;\n        if (hide === true) {\n            this.setState({ showNews: false });\n        } else {\n            this.setState({ showNews: !showNews });\n        }\n    }\n\n    componentWillUnmount() {\n        clearTimeout(this.updateTimer.reload);\n        clearTimeout(this.updateTimer.history);\n        clearTimeout(this.updateTimer.tick);\n    }\n\n    componentDidMount() {\n        this.loadRace();\n        try {\n            const { width, height } = getWindowDimensions();\n            if (width < 800) {\n                this.toggleShowLeaderBoard(true);\n                this.toggleShowNews(true);\n            }\n        } catch (err) {\n            console.log(err);\n        }\n    }\n\n    componentWillReceiveProps(nextProps) {\n        if (this.props.classid !== nextProps.classid || this.props.showDrawerReplay !== nextProps.showDrawerReplay) {\n\t\t    this.loadRace(nextProps);\n        }\n\t}\n\n    closeAllDrawers = () => {\n        this.setState({\n            showResults: false,\n            showDrawerCheckpoint: false,\n            showDrawerMusher: false,\n        });\n    }\n\n    onMarkerClick = (wpData) => {\n        this.closeAllDrawers();\n        this.setState({\n            showDrawerMusher: true,\n            wpData,\n        });\n    }\n\n    onMusherClick = (wpData) => {\n        this.setState({\n            showDrawerMusher: true,\n            wpData,\n        });\n    }\n\n    onCpMarkerClick = (cpData) => {\n        if (!cpData || !cpData.id) {\n            return null;\n        }\n        this.closeAllDrawers();\n        this.setState({\n            selectedCheckpointId: cpData.id,\n            showDrawerCheckpoint: true,\n            cpData,\n        });\n    }\n\n    toggleDrawerMusher = () => {\n        const { showDrawerMusher } = this.state;\n        this.setState({\n            showDrawerMusher: !showDrawerMusher,\n        });\n    }\n\n    toggleDrawerCheckpoint = () => {\n        const { showDrawerCheckpoint } = this.state;\n        this.setState({\n            showDrawerCheckpoint: !showDrawerCheckpoint,\n        });\n    }\n\n    toggleResults = () => {\n        const { showResults } = this.state;\n        this.closeAllDrawers();\n        this.setState({            \n            showResults: !showResults,\n        });\n    }\n\n    selectCheckpoint = (selectedCheckpointId) => {\n        this.closeAllDrawers();\n        this.setState({\n            selectedCheckpointId,\n            showDrawerCheckpoint: true,\n            showDrawerMusher: false,\n            showDrawer: false,\n        });\n    }\n\n    // Overlay functions\n    onTeamClick = (e, teamid) => {\n        e.preventDefault();\n        e.stopPropagation();\n        this.setState({\n            showTeam: teamid,\n        });\n        return false;\n    }\n\n    hideTeam = () => {\n        this.setState({\n            showTeam: null,\n        });\n    }\n\n    onUserClick = (e, userid) => {\n        e.preventDefault();\n        e.stopPropagation();\n        return false;\n    }\n\n    onDogClick = (e, dogid, dogs) => {\n        e.preventDefault();\n        e.stopPropagation();\n        this.setState({\n            showDog: dogid,\n            dogs,\n        });\n        return false;\n    }\n\n    hideDog = () => {\n        this.setState({\n            showDog: null,\n        });\n    }\n\n    // /Overlay functions\n\n    setReplaySpeed = (e) => {\n        const speed = e.target.closest('button').dataset.speed;\n        this.setState({\n            replaySpeed: parseFloat(speed),\n        });\n    }\n\n\tfilterByClass = async (e) => {\n        try {\n            const selectedClassId = e.target.closest('button').dataset.id;\n\n            const {\n                showDrawerReplay,\n                historySteps,\n                filterByBibs,\n            } = this.props;\n            const { replayHistory } = this.state;\n            if (replayHistory || showDrawerReplay) {\n                this.toggleReplayHistory();\n            }\n\n            const { appState, raceStore } = this.props.stores;\n            raceStore.cleanupMemoryClass();\n            appState.toggleSelectedClassId(selectedClassId, true);\n\n            const { race } = raceStore;\n            const { focusOnMushers } = appState;\n\n            const allTeamIds = race.classes\n                .filter(currentClass => currentClass.id === selectedClassId)\n                .filter(currentClass => currentClass.contestants && currentClass.contestants.length > 0)\n                .map((currentClass) => {\n                    return currentClass.contestants.filter(musher => musher.team > 0).map(musher => musher.team);\n                })\n                .flat();\n\n            const bibs = filterByBibs ? filterByBibs : race.classes\n                .filter(currentClass => currentClass.id === selectedClassId)\n                .filter(currentClass => currentClass.contestants && currentClass.contestants.length > 0)\n                .map((currentClass) => {\n                    return currentClass.contestants.filter(musher => musher.bib > 0).map(musher => musher.bib);\n                })\n                .flat();\n\n            this.setState({\n                allTeamIds,\n                bibs,\n                selectedMusherBib: '',\n                showDrawerCheckpoint: false,\n                showDrawerMusher: false,\n                showDrawer: false,\n            });\n\n            if (allTeamIds.length > 0) {\n                await raceStore.loadTeams(allTeamIds.join(','), false, true, true);\n            }\n            if (race.liveRace > 0) {\n                await this.loadLiveRaceResults(this.props, { teamIds: allTeamIds, focusOnMushers, bibs, classid: selectedClassId, historySteps });\n\n            } else {\n                await this.loadRaceResults(this.props, allTeamIds, focusOnMushers);\n            }\n\t\t} catch (err) {\n\t\t\tconsole.log(err);\n\t\t}\n\t}\n\n    toggleFocusOnMusher = (e) => {\n        try {\n            const musherId = e.target.parentElement.dataset.musherid || e.target.dataset.musherid;\n            const { appState, raceStore } = this.props.stores;\n            appState.toggleFocusOnMusher(musherId);\n\n            const { focusOnMushers = [], selectedClassIds = [] } = appState;\n            const classid = selectedClassIds[0]\n\n            const { race } = raceStore;\n            const bibs = race.classes\n                .filter(currentClass => currentClass.id === classid)\n                .filter(currentClass => currentClass.contestants && currentClass.contestants.length > 0)\n                .map((currentClass) => {\n                    return currentClass.contestants.filter(musher => musher.bib > 0).map(musher => musher.bib);\n                })\n                .flat();\n\n            if (race.liveRace > 0) {\n                raceStore.getRaceTrackerActiveTeams(null, focusOnMushers, bibs);\n            } else {\n                raceStore.getWorkoutSummaryActiveTeams(null, focusOnMushers, bibs);\n            }\n\t\t} catch (err) {\n\t\t\tconsole.log(err);\n\t\t}\n\t}\n\n    toggleBib = () => {\n        try {\n            const { bib } = this.state;\n            const { appState, raceStore } = this.props.stores;\n            const musher = raceStore.getMusherByBibId(bib);\n            appState.toggleFocusOnMusher(musher.id);\n\t\t} catch (err) {\n\t\t\tconsole.log(err);\n\t\t}\n    }\n\n    checkForEnter = (e) => {\n        if (e.key === 'Enter') {\n            this.toggleBib();\n        }\n    }\n\n    toggleReplayHistory = () => {\n        const { replayHistory } = this.state;\n        clearTimeout(this.updateTimer.reload);\n        this.setState({\n            showDrawer: false,\n            historyPointIndex: 0,\n            replayHistory: !replayHistory,\n            timerRunning: replayHistory,\n        }, async () => {\n            await this.loadRace();\n            const { historyPointIndex } = this.state;\n            const { raceStore } = this.props.stores;\n            const { maxPoints } = raceStore;\n            if (replayHistory) {\n                console.log('toggleReplayHistory: setting to maxPoints', maxPoints);\n                raceStore.updateWaypointPosition(Math.abs(maxPoints - 1));\n            } else {\n                console.log('toggleReplayHistory: setting to first points');\n                for (let i = 0, l = 10; i < l; i += 1) {\n                    raceStore.updateWaypointPosition(Math.abs(historyPointIndex + i));\n                }\n            }\n        });\n    }\n\n    toggleLines = () => {\n        const { showLines } = this.state;\n        this.setState({\n            showLines: !showLines,\n        });\n    }\n\n    render() {\n        const { historyPointIndex, timerRunning, playingHistory, replaySpeed, raceTrackerPointTimestamp, showLines,\n            allTeamIds, bibs,\n        } = this.state;\n        const { userStore, raceStore, appState } = this.props.stores;\n        const { user = {}, teams = [], isAdmin } = userStore;\n        const { language = 'en' } = user;\n\n        const {\n            raceid,\n            path,\n            showHeader = true,\n            drawerClassNames,\n            drawerWidth,\n            showDrawerReplay,\n            largeMarkers,\n            isAnimatedMarkers,\n            linkBase = '/app-races/',\n        } = this.props;\n        const { focusOnMushers = [], infoOnMushers = [], selectedClassIds = [] } = appState;\n\n        const filterByClassId = (c) => {\n\t\t\tif (selectedClassIds.length > 0) {\n\t\t\t\treturn selectedClassIds.indexOf(c.id) > -1;\n\t\t\t}\n\t\t\treturn true;\n\t\t};\n\n        const { leaderboardMode, filterByraceClass, showLeaderBoard, showNews, reloadLastEpoch,\n            showDrawerMusher, showDrawerCheckpoint,\n            wpData = {},\n            cpData = {},\n            showResults,\n            showTeam, showDog,\n            submenu, replayHistory,\n            selectedCheckpointId,\n        } = this.state;\n\n        const { activeTeams, teamList, waypoints, geoJSONs, waypoints2, waypoints3, zoomToMarkers, classes, race, racetrackerData, maxPoints } = raceStore;\n\n        const musher = wpData.bib ? raceStore.getMusherByBibId(wpData.bib) : raceStore.getMusherByBibEmail(wpData.email);\n        const team = raceStore.getTeamById(musher.team);\n        const selectedClass = raceStore.getClassById(selectedClassIds[0]) || {};\n\n        let wpCheckpoints = [];\n        if (selectedClass.waypoints && selectedClass.waypoints.length > 0) {\n            wpCheckpoints = selectedClass.waypoints;\n        } else if (selectedClass.checkpoints && selectedClass.checkpoints.length > 0) {\n            wpCheckpoints = selectedClass.checkpoints\n                .slice()\n                .filter(cp => cp.position && cp.position[0])\n                .map(cp => ({\n                    id: cp.id,\n                    title: cp.name,\n                    lat: cp.position[0],\n                    lng: cp.position[1],\n                }));\n        }\n\n        let showTracking = true;\n        if (race.countryRegexp) {\n            if (user && user.currentLocationGeocode) {\n                const regexp = new RegExp(race.countryRegexp, 'i');\n                if (regexp.test(user.currentLocationGeocode.formattedCountry)) {\n                    showTracking = false;\n                }\n            }\n        }\n\n        return (<>\n            {showTeam && <Overlay>\n                <TeamsPublicDetail stores={this.props.stores} teamid={showTeam} marginTop={'0px;'} marginBottom={'0px;'} back={this.hideTeam} hideTeam={this.hideTeam} />\n            </Overlay>}\n            {showDog && <Overlay>\n                <DogPublicDetail stores={this.props.stores} dogid={showDog} marginTop={'0px;'} marginBottom={'0px;'} back={this.hideDog} dogs={team.dogs} />\n            </Overlay>}\n\n\n            {showHeader && <HeaderCustom height={MARGIN_TOP}>\n                <div class='d-flex justify-content-between align-items-center w-100'>\n                    <div class='d-flex align-items-center'>\n                        <span class='' style='font-size: 2.3em;'>\n                            <a href={`${linkBase}${race.id}`}>\n                                <i class='fas fa-angle-left' />\n                            </a>\n                        </span>\n                        <span class='ml-4 text-primary' style='font-size: 1.4em;' onClick={this.toggleResults}>\n                            <i class='fas fa-list-ol' />\n                        </span>\n                        <span class='ml-4 text-primary' style='font-size: 1.4em;' >\n                            {!race.resultsHide && <a href={`${linkBase}${race.id}/results`}>\n                                <i class='fas fa-stopwatch' />\n                            </a>}\n                        </span>\n                    </div>\n                    <div>\n                        <span class='font-weight-normal text-white' style='font-size: 1.2em;'>{race.title}</span>\n                    </div>\n                    {race.liveRace > 0 ? <>\n                        <div class='d-flex align-items-center text-primary' onClick={this.toggleReplayHistory}>\n                            <span class=''>Replay</span>\n                            <span class='ml-2' style='font-size: 1.4em;'>\n                                <i class='fas fa-play' />\n                            </span>\n                        </div>\n                    </> : <>\n                        <div class='d-flex align-items-center'>\n                            &nbsp;\n                        </div>\n                    </>}\n                </div>\n\n                <div class='w-100 overflow-hidden'>\n                    <div\n                        class='d-flex flex-row flex-nowrap pb-2 px-1'\n                        style='overflow: auto; scroll-snap-type: x mandatory;'\n                    >\n                        {race.classes && race.classes.map((currentClass, idx) => <>\n                            <div class='col px-0 pt-0'>\n                                <button\n                                    type='button'\n                                    class={`btn btn-block ${mu.getPillClass(race.classes.length, idx)} rounded-none ${selectedClassIds.indexOf(currentClass.id) > -1 ? 'btn-primary' : 'btn-outline-primary'} text-nowrap`}\n                                    style='text-overflow: ellipsis; overflow: hidden;'\n                                    onClick={this.filterByClass}\n                                    data-id={currentClass.id}\n                                >\n                                    {currentClass.title}\n                                </button>\n                            </div>\n                        </>)}\n                    </div>\n                </div>\n            </HeaderCustom>}\n\n            {!showTracking ? <>\n                <div\n                    class='container-fluid position-relative p-0 w-100 h-100'\n                    style={`margin-top: ${showHeader ? MARGIN_TOP : 0};`}\n                >\n                    <div class='text-center text-muted'>\n                        <div class='display-1'><i class='fas fa-hand-paper' /></div>\n                        <h3>Not allowed to view tracking</h3>\n                        {race.countryRegexpMessage}\n                    </div>\n                </div>\n            </> : <>\n                <div\n                    class='container-fluid position-relative p-0 w-100 h-100'\n                    style={`margin-top: ${showHeader ? MARGIN_TOP : 0};`}\n                >\n                    {race.id ? <>\n                        <Trackmap\n                            marginTop={MARGIN_TOP}\n                            stores={this.props.stores}\n                            raceid={raceid}\n                            waypoints={waypoints}\n                            geoJSONs={showLines ? geoJSONs : null}\n                            // waypoints2={waypoints2}\n                            // waypoints3={waypoints3}\n                            waypoints2={wpCheckpoints}\n\n                            zoomToMarkers={zoomToMarkers}\n                            fullscreenMap={true}\n                            onMarkerClick={this.onMarkerClick}\n                            onMarker2Click={this.onCpMarkerClick}\n                            showHeatmap={race.liveRace < 1}\n                            allTeamIds={allTeamIds}\n                            showTracks={race.liveRace >= 1}\n                            selectedClassIds={selectedClassIds}\n                            showDistanceMarkers={false}\n                            groupWaypoints={false}\n                            focusOnMushers={focusOnMushers}\n                            largeMarkers={largeMarkers}\n                            isAnimatedMarkers={isAnimatedMarkers}\n                            replaySpeed={replaySpeed * 1000}\n                            // key={`trackmap-${selectedClassIds.join('-')}`}\n                            // key={`heatmap-${racetrackerData.map(e => e.bib).join('-')}`}\n                            // mapid={`heatmap-${racetrackerData.map(e => e.bib).join('-')}`}\n                        />\n                    </> : <>\n                        <Loading stores={this.props.stores} />\n                    </>}\n\n\n                    {timerRunning && <div class='position-absolute' style='top: 125px; left: 5px; z-index: 9999; width: 30px; height: 30px;'>\n                        <ReloadTimer stores={this.props.stores} classNames='float-right ml-2' reloadLastEpoch={reloadLastEpoch} />\n                    </div>}\n\n                    {focusOnMushers && focusOnMushers.length > 0 && <>\n                        <div\n                            class='row mb-2'\n                            style='\n                                background-color: #1C1F4C;\n                                background-image: url(\"https://themusher.app/assets/tv-single-background.jpg\");\n                                background-size: cover !important;\n                                background-position: 0 0;\n                                border-radius: 10px;\n                            '\n                        >\n                            <div class='col-12 text-white' style='font-size: 1.3em;'>\n                                {focusOnMushers && focusOnMushers.map(musherId => {\n                                    const musher = raceStore.getMusherById(musherId);\n                                    return <>\n                                        <div>\n                                            <nobr>\n                                                <span class='mr-2' onClick={this.toggleFocusOnMusher} data-musherid={musher.id}>{focusOnMushers.indexOf(musher.id) > -1 ? <i class='fas fa-times text-warning' /> : <i class='far fa-star' />}</span>\n                                                <span class='text-right' style='width: 50px; display: inline-block;'>{musher.bib}</span> {musher.flag} {musher.firstname} {musher.lastname}<br />\n                                                {/* <small class='text-muted'>{musher.sportsClub}</small><br /> */}\n                                            </nobr>\n                                        </div>\n                                    </>\n                                })}\n                            </div>\n                        </div>\n                    </>}\n\n                    {race.mapCredits && <>\n                        <div class='position-absolute' style='bottom: 30px; left: 7px; z-index: 9999; width: 100px; height: 40px;'>\n                            <Markdown markdown={mu.replaceImages(race.mapCredits, race.images)} markdownOpts={mu.getMarkdownOptions()} />\n                        </div>\n                    </>}\n\n                    {/* <div class={`row`}>\n                        <div class='col-12 form-inline align-top d-flex justify-content-center'>\n                            <div class='form-group'>\n                                <input\n                                    class='form-control form-control-lg text-dark border-primary'\n                                    style='background-color: inherit;'\n                                    type='text'\n                                    onInput={linkstate(this, 'bib')}\n                                    onKeyDown={this.checkForEnter}\n                                />\n                                <button\n                                    type='button'\n                                    class='ml-2 btn btn-lg btn-primary'\n                                    onClick={this.toggleBib}\n                                >Search for Bib</button>\n                            </div>\n                        </div>\n                    </div> */}\n\n                    {(showDrawerReplay || replayHistory) && <>\n                        <Drawer stores={this.props.stores} onCloseClick={this.toggleReplayHistory} classNames={drawerClassNames} width={drawerWidth}>\n\n                            {maxPoints > 0 ? <>\n                                <div class='d-flex justify-content-center mx-3'>\n                                    {playingHistory ? <>\n                                        <div class='pl-1'>\n                                            <button class='btn btn-warning' onClick={this.pauseHistory}><i class='fas fa-pause' /></button>\n                                        </div>\n                                    </> : <>\n                                        <div class='pl-1'>\n                                            <button class='btn btn-success' onClick={this.playHistory}><i class='fas fa-play' /></button>\n                                        </div>\n                                    </>}\n                                    <div class='pl-2 pt-2 flex-grow-1'>\n                                        <input type='range' class='custom-range w-100' min={0} max={maxPoints} value={historyPointIndex} onInput={this.handleHistoryPointIndex} />\n                                    </div>\n                                </div>\n                                <div class='d-flex justify-content-center'>\n                                    <div class='col px-0 pt-2'>\n                                        <button\n                                            type='button'\n                                            class={`btn btn-block rounded-pill-left rounded-none ${replaySpeed === 1 ? 'btn-secondary' : 'btn-outline-secondary'} text-nowrap`}\n                                            style='text-overflow: ellipsis; overflow: hidden;'\n                                            onClick={this.setReplaySpeed}\n                                            data-speed={1}\n                                        >\n                                            60x\n                                        </button>\n                                    </div>\n                                    <div class='col px-0 pt-2'>\n                                        <button\n                                            type='button'\n                                            class={`btn btn-block rounded-none ${replaySpeed === 0.5 ? 'btn-secondary' : 'btn-outline-secondary'} text-nowrap`}\n                                            style='text-overflow: ellipsis; overflow: hidden;'\n                                            onClick={this.setReplaySpeed}\n                                            data-speed={0.5}\n                                        >\n                                            120x\n                                        </button>\n                                    </div>\n                                    <div class='col px-0 pt-2'>\n                                        <button\n                                            type='button'\n                                            class={`btn btn-block rounded-none ${replaySpeed === 0.25 ? 'btn-secondary' : 'btn-outline-secondary'} text-nowrap`}\n                                            style='text-overflow: ellipsis; overflow: hidden;'\n                                            onClick={this.setReplaySpeed}\n                                            data-speed={0.25}\n                                        >\n                                            240x\n                                        </button>\n                                    </div>\n                                    <div class='col px-0 pt-2'>\n                                        <button\n                                            type='button'\n                                            class={`btn btn-block right rounded-none ${replaySpeed === 0.12 ? 'btn-secondary' : 'btn-outline-secondary'} text-nowrap`}\n                                            style='text-overflow: ellipsis; overflow: hidden;'\n                                            onClick={this.setReplaySpeed}\n                                            data-speed={0.12}\n                                        >\n                                            480x\n                                        </button>\n                                    </div>\n                                    <div class='col px-0 pt-2'>\n                                        <button\n                                            type='button'\n                                            class={`btn btn-block rounded-pill-right rounded-none ${replaySpeed === 0.05 ? 'btn-secondary' : 'btn-outline-secondary'} text-nowrap`}\n                                            style='text-overflow: ellipsis; overflow: hidden;'\n                                            onClick={this.setReplaySpeed}\n                                            data-speed={0.05}\n                                        >\n                                            1000x\n                                        </button>\n                                    </div>\n                                </div>\n                                <div class='d-flex justify-content-center'>\n                                    <div class='flex-grow-1 pt-0 font-weight-bolder text-center' style='font-size: 1.1em;'>\n                                        {raceTrackerPointTimestamp && <>\n                                            {util.formatDate(util.parseInputDate(raceTrackerPointTimestamp), { locale: 'no-NB', hour12: false, hour: '2-digit', minute: '2-digit' })}\n                                        </>}\n                                        {isAdmin && <>\n                                            / {historyPointIndex}\n                                        </>}\n                                    </div>\n                                    {isAdmin && <>\n                                        <button class='btn btn-danger mt-2 mr-4 rounded-pill-both rounded-none' onClick={this.toggleLines}>\n                                            <i class='fas fa-wave-square' /> Show lines\n                                        </button>\n                                    </>}\n                                </div>\n                            </> : <>\n                                <div class='spinner-border text-primary' role='status'>\n                                    <span class='sr-only'>Loading...</span>\n                                </div>\n                            </>}\n                        </Drawer>\n                    </>}\n\n                    {showResults && <>\n                        <Drawer stores={this.props.stores} onCloseClick={this.toggleResults} classNames={drawerClassNames} width={drawerWidth}>\n                            <Results\n                                stores={this.props.stores}\n                                raceClass={selectedClass}\n                                race={race}\n                                onMarkerClick={this.onMusherClick}\n                            />\n                        </Drawer>\n                    </>}\n\n                    {showDrawerMusher && <>\n                        <Drawer stores={this.props.stores} onCloseClick={this.toggleDrawerMusher} classNames={drawerClassNames} width={drawerWidth}>\n                            <MusherInfo\n                                stores={this.props.stores}\n                                wpData={wpData}\n                                onMarkerClick={this.onMarkerClick}\n                                onTeamClick={this.onTeamClick}\n                                onUserClick={this.onUserClick}\n                                onDogClick={this.onDogClick}\n                            />\n                        </Drawer>\n                    </>}\n\n                    {showDrawerCheckpoint && <>\n                        <Drawer stores={this.props.stores} onCloseClick={this.toggleDrawerCheckpoint}>\n                            <RaceLiveCheckpointResult stores={this.props.stores} id={selectedCheckpointId} onClickNav={this.selectCheckpoint} />\n                        </Drawer>\n                    </>}\n\n                </div>\n            </>}\n        </>);\n    }\n}\n\nexport default TrackingMap;\n"],"sourceRoot":""}