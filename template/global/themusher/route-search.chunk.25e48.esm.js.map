{"version":3,"sources":["webpack:///./components/team/index.js","webpack:///./routes/search/index.js"],"names":["Team","observer","Component","render","team","this","props","teamStore","userStore","stores","currentMonth","Date","getMonth","currentYear","getFullYear","month","year","seasonStart","parseInt","workoutSummary","findWorkoutSummary","id","user","language","teamAmbition","findTeamAmbition","ambition","ambitions","teamType","findTeamType","type","image","s3SmallLink","class","style","href","name","dogs","length","members","distanceKm","util","format","elevation","duration","secToHms","speedAvg","initialState","Search","constructor","super","loadAll","async","appState","storyStore","search","getSearch","publicTeams","publicUsers","localUpdateField","state","componentDidMount","componentWillReceiveProps","nextProps","searchResultStories","searchResultDogs","searchResultWorkouts","searchResultTeams","searchResultTracks","searchResultUsers","map","e","dog","workout","showDate","track","email","title","story","key"],"mappings":"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","file":"route-search.chunk.25e48.esm.js","sourcesContent":["import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\n\n@observer\nclass Team extends Component {\n    render() {\n        const { team } = this.props;\n        const { teamStore, userStore } = this.props.stores;\n\n        const currentMonth = new Date().getMonth() + 1;\n        const currentYear = new Date().getFullYear();\n\t\tconst { month = currentMonth, year = currentYear } = this.props;\n\t\tconst seasonStart = parseInt(month < 8 ? year - 1 : year, 10);\n\n        const workoutSummary = teamStore.findWorkoutSummary(team.id, seasonStart) || {};\n        const { user } = userStore;\n        const { language = 'no' } = user;\n        const teamAmbition = userStore.findTeamAmbition({ ambition: team.ambitions, language });\n        const teamType = userStore.findTeamType({ type: team.type, language });\n        const image = team.image && team.image.s3SmallLink ? team.image : null;\n\n        return (\n            <div class='w-100 mb-3'>\n                <div class='row'>\n                    <div class='col-12 col-sm-8 col-lg-6 offset-sm-2 offset-lg-3 d-flex mb-0 position-relative'>\n                        {/* {JSON.stringify(team, null, 4)} */}\n                        <div class={`text-center border rounded-circle imageRounded`} style={image ? `background-image: url(\"${image.s3SmallLink}\");` : ''}>\n                            {!image && <i class='fas fa-users text-muted mt-3' style='font-size: 40px;' />}\n                        </div>\n                        <div class='flex-grow-1 pl-3' style='line-height: 1.2em;'>\n                            <a class='stretched-link' href={`/teams/${team.id}`}>\n                                <h5 class='mb-1' style='line-height: 1.0em;'>{team.name}</h5>\n                            </a>\n                            <div>\n                                {teamType && <span class='badge badge-pill badge-secondary'>{teamType}</span>}\n                                {teamAmbition && <span class='badge badge-pill badge-secondary ml-2'>{teamAmbition}</span>}\n                            </div>\n                            <small class='text-muted'>\n                                {team && team.dogs && <span class=''><i class='fas fa-dog' /> {team.dogs.length}</span>} \n                                {team && team.members && <span class='ml-2'><i class='fas fa-user' /> {team.members.length}</span>}\n\n                                {workoutSummary && workoutSummary.distanceKm > 0 && <span class='ml-2'><i class='fas fa-road' /> {util.format(workoutSummary.distanceKm, 0)}km</span>}\n                                {workoutSummary && workoutSummary.elevation > 0 && <span class='ml-2'><i class='fas fa-mountain' /> {util.format(workoutSummary.elevation, 0)}m</span>}\n                                {workoutSummary && workoutSummary.duration > 0 && <span class='ml-2'><i class='fas fa-clock' /> {util.secToHms(workoutSummary.duration)}</span>}\n                                {workoutSummary && workoutSummary.speedAvg > 0 && <span class='ml-2'><i class='fas fa-tachometer-alt' /> {util.format(workoutSummary.speedAvg, 1)}km/t</span>}\n                            </small>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        );\n    }\n}\n\nexport default Team;\n","import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport { Text, Localizer } from 'preact-i18n';\n\nimport Dog from '../../components/dog';\nimport Workout from '../../components/workout';\nimport Team from '../../components/team';\nimport Track from '../../components/track';\nimport User from '../../components/user';\nimport Story from '../../components/story/publicStory';\n\nconst initialState = {};\n\n@observer\nclass Search extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            ...initialState,\n        };\n    }\n\n\tloadAll = async (props = this.props) => {\n\t\tconst { appState, storyStore } = this.props.stores;\n\t\tconst { search } = props;\n\t    await appState.getSearch(search);\n\t\tconst { publicTeams, publicUsers } = appState;\n\t\tstoryStore.localUpdateField('publicTeams', publicTeams);\n\t\tstoryStore.localUpdateField('publicUsers', publicUsers);\n\t}\n\n\tcomponentDidMount() {\n\t\tthis.loadAll();\n\t}\n\n\tcomponentWillReceiveProps(nextProps) {\n        // console.log('componentWillReceiveProps', nextProps);\n        if (nextProps.search !== this.props.search) {\n            this.loadAll(nextProps);\n        }\n    }\n\n\trender() {\n\t\tconst { appState } = this.props.stores;\n\t\tconst { searchResultStories, searchResultDogs, searchResultWorkouts, searchResultTeams, searchResultTracks, searchResultUsers } = appState;\n\t\treturn (\n\t\t\t<div class='container-fluid' style='margin-bottom: 200px; margin-top: 60px;'>\n\t\t\t\t<div class='row'>\n\t\t\t\t\t<div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-0 mb-2'>\n\t\t\t\t\t\t<h1><Text id='search.title'>SÃ¸k</Text></h1>\n\t\t\t\t\t\t\n\t\t\t\t\t\t<h5>searchResultDogs:</h5>\n\t\t\t\t\t\t{/* <xmp>{JSON.stringify(searchResultDogs, null, 4)}</xmp> */}\n\t\t\t\t\t\t{searchResultDogs && searchResultDogs.map(e => <>\n\t\t\t\t\t\t\t<div>{e.id}: {e.user}: {e.name}</div>\n\t\t\t\t\t\t</>)}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class='col-12'>\n\t\t\t\t\t\t{searchResultDogs && searchResultDogs.map(dog => (\n\t\t\t\t\t\t\t<Dog stores={this.props.stores} dog={dog} />\n\t\t\t\t\t\t))}\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-0 mb-2'>\n\t\t\t\t\t\t<h5>searchResultWorkouts:</h5>\n\t\t\t\t\t\t{/* <xmp>{JSON.stringify(searchResultWorkouts, null, 4)}</xmp> */}\n\t\t\t\t\t\t{searchResultWorkouts && searchResultWorkouts.map(e => <>\n\t\t\t\t\t\t\t<div>{e.id}: {e.user}: {e.name}</div>\n\t\t\t\t\t\t</>)}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class='col-12'>\n\t\t\t\t\t\t{searchResultWorkouts && searchResultWorkouts.map(workout => (\n\t\t\t\t\t\t\t<Workout stores={this.props.stores} workout={workout} showDate={true} />\n\t\t\t\t\t\t))}\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-0 mb-2'>\n\t\t\t\t\t\t<h5>searchResultTeams:</h5>\n\t\t\t\t\t\t{/* <xmp>{JSON.stringify(searchResultTeams, null, 4)}</xmp> */}\n\t\t\t\t\t\t{searchResultTeams && searchResultTeams.map(e => <>\n\t\t\t\t\t\t\t<div>{e.id}: {e.user}: {e.name}</div>\n\t\t\t\t\t\t</>)}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class='col-12'>\n\t\t\t\t\t\t{searchResultTeams && searchResultTeams.map(team => (\n\t\t\t\t\t\t\t<Team stores={this.props.stores} team={team} />\n\t\t\t\t\t\t))}\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-0 mb-2'>\n\t\t\t\t\t\t<h5>searchResultTracks:</h5>\n\t\t\t\t\t\t{/* <xmp>{JSON.stringify(searchResultTracks, null, 4)}</xmp> */}\n\t\t\t\t\t\t{searchResultTracks && searchResultTracks.map(e => <>\n\t\t\t\t\t\t\t<div>{e.id}: {e.user}: {e.name}</div>\n\t\t\t\t\t\t</>)}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class='col-12'>\n\t\t\t\t\t\t{searchResultTracks && searchResultTracks.map(track => (\n\t\t\t\t\t\t\t<Track stores={this.props.stores} track={track} />\n\t\t\t\t\t\t))}\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-0 mb-2'>\n\t\t\t\t\t\t<h5>searchResultUsers:</h5>\n\t\t\t\t\t\t{/* <xmp>{JSON.stringify(searchResultUsers, null, 4)}</xmp> */}\n\t\t\t\t\t\t{searchResultUsers && searchResultUsers.map(e => <>\n\t\t\t\t\t\t\t<div>{e.id}: {e.user}: {e.email}</div>\n\t\t\t\t\t\t</>)}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-0 mb-2'>\n\t\t\t\t\t\t{searchResultUsers && searchResultUsers.map(user => (\n\t\t\t\t\t\t\t<User stores={this.props.stores} user={user} />\n\t\t\t\t\t\t))}\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-0 mb-2'>\n\t\t\t\t\t\t<h5>searchResultStories:</h5>\n\t\t\t\t\t\t{/* <xmp>{JSON.stringify(searchResultStories, null, 4)}</xmp> */}\n\t\t\t\t\t\t{searchResultStories && searchResultStories.map(e => <>\n\t\t\t\t\t\t\t<div>{e.id}: {e.user}: {e.title}</div>\n\t\t\t\t\t\t</>)}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class='col-12'>\n\t\t\t\t\t\t{searchResultStories && searchResultStories.map(story => (\n\t\t\t\t\t\t\t<Story\n\t\t\t\t\t\t\t\tstores={this.props.stores}\n\t\t\t\t\t\t\t\tstory={story}\n\t\t\t\t\t\t\t\tkey={`story-detail-${story.id}`}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t))}\n\t\t\t\t\t</div>\n\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nexport default Search;\n"],"sourceRoot":""}