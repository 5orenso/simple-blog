(window.webpackJsonp=window.webpackJsonp||[]).push([[49,13,22,23],{"/DnB":function(t,e,s){"use strict";function a(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,a)}return s}function n(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}var o,i=s("hosL"),r=(s("Utv1"),s("/eY4")),c={},l=Object(r.a)(o=function(t){function e(e){var s;return(s=t.call(this,e)||this).state=function(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?a(Object(s),!0).forEach((function(e){n(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):a(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}({},c),s.container=null,s}var s,o;o=t,(s=e).prototype=Object.create(o.prototype),s.prototype.constructor=s,s.__proto__=o;var r=e.prototype;return r.componentDidMount=function(){var t=this.props,e=t.horizontal,s=t.vertical,a=void 0===s?"":s,n={behavior:"smooth"};e&&(n.inline=e),a&&(n.block=a),this.container.scrollIntoView(n)},r.render=function(){var t=this;return Object(i.h)("div",{ref:function(e){return t.container=e}}," ")},e}(i.Component))||o;e.a=l},"1OK2":function(t,e,s){"use strict";var a,n=s("hosL"),o=(s("Utv1"),s("/eY4"));Object(o.a)(a=function(t){function e(e){var s;(s=t.call(this,e)||this).touchStart=function(t){t.stopPropagation(),s.setState({startX:t.touches[0].pageX})},s.touchEnd=function(t){t.stopPropagation(),s.setState({startX:void 0,sliding:!1})},s.touchMove=function(t){if(t.stopPropagation(),s.state.totalImages>1){var e=s.state,a=e.startX,n=t.touches[0].pageX;e.sliding||(n>a+50?(s.setState({sliding:!0}),s.prevImage()):n<a-50&&(s.setState({sliding:!0}),s.nextImage()))}};var a=e.images,n=void 0===a?[]:a;return s.state={imageContainer:1,currentImage1:n[0]||{},currentImage2:{},currentIdx:0,totalImages:n.length||0,imageDots:[].concat(Array(n.length||0).fill(1).map((function(t,e){return t+e})))},s}var s,a;a=t,(s=e).prototype=Object.create(a.prototype),s.prototype.constructor=s,s.__proto__=a;var o=e.prototype;return o.nextImage=function(){var t,e=this.state,s=1===e.imageContainer?2:1,a=e.currentIdx+1;a>e.totalImages-1&&(a=0),this.setState(((t={})["currentImage"+s]=this.props.images[a],t.currentIdx=a,t.imageContainer=s,t))},o.prevImage=function(){var t,e=this.state,s=e.imageContainer,a=e.currentIdx-1;a<0&&(a=e.totalImages-1),this.setState(((t={})["currentImage"+(1===s?2:1)]=this.props.images[a],t.currentIdx=a,t.imageContainer=1===s?2:1,t))},o.componentWillReceiveProps=function(t){if(t.images!==this.props.images){var e=t.images,s=void 0===e?[]:e;this.setState({imageContainer:1,currentImage1:s.length>0?s[0]:{},currentImage2:{},currentIdx:0,totalImages:s.length||0,imageDots:[].concat(Array(s.length||0).fill(1).map((function(t,e){return t+e})))})}},o.render=function(){var t,e,s=this,a=this.state,o=a.currentImage1,i=a.currentImage2,r=a.imageContainer,c=a.totalImages,l=a.imageDots,d=a.currentIdx,h=this["image"+r],u=1===r?o:i;if(u.dimensions){var b=u.dimensions,p=b.width,m=b.height,f=b.orientation;f>4&&f<9?(t=p,e=m):(t=m,e=p)}var O=u.dimensions?e/t:h&&h.height?h.width/h.height:4/3;return c<=0?"":Object(n.h)("div",{class:"w-100"},Object(n.h)("div",{class:"border rounded position-relative w-100",style:"height: calc(85vw / "+O+"); overflow: hidden; transition: all .3s ease-in-out;",onTouchstart:this.touchStart,onTouchend:this.touchEnd,onTouchmove:this.touchMove},c>1&&Object(n.h)("span",{class:"position-absolute",style:"top:0px; right: 5px; z-index: 2000;"},Object(n.h)("small",null,d+1,"/",c)),o&&Object(n.h)("div",{class:"position-absolute",style:(1===r?"opacity: 1;":"opacity: 0;")+" transition: all .3s ease-in-out; top: 0; left: 0;"},Object(n.h)("img",{loading:"lazy",src:o.s3LargeLink,class:"img-fluid align-middle",ref:function(t){return s.image1=t}})),i&&Object(n.h)("div",{class:"position-absolute",style:(2===r?"opacity: 1;":"opacity: 0;")+" transition: all .3s ease-in-out; top: 0; left: 0;"},Object(n.h)("img",{loading:"lazy",src:i.s3LargeLink,class:"img-fluid align-middle",ref:function(t){return s.image2=t}}))),l.length>1&&Object(n.h)("div",{class:"w-100 text-center"},l.map((function(t){return Object(n.h)("span",{style:"color: "+(t===d+1?"#ffffff":"#808080")+";"},"•")}))))},e}(n.Component))},"4QWe":function(t,e,s){"use strict";(function(t){var a,n=s("hosL"),o=s("Utv1"),i=s("/eY4"),r=s("OhSV"),c=s("go65"),l=s("om2D"),d=s("ZOvn"),h=Object(i.a)(a=function(e){function s(t){var s;return(s=e.call(this,t)||this).beforeImagesUploaded=function(){s.setState({sendButtonEnabled:!1})},s.afterImagesUploaded=function(){s.setState({sendButtonEnabled:!0})},s.commentStory=function(){return new Promise((function(t,e){var a,n,o,i,r,c,l,h,u,b,p;return s.state.sendButtonEnabled?(o=void 0===(n=(a=s.props).callback)?function(){}:n,r=void 0===(i=a.inputRefObject)?{}:i,c=s.props.story,l=s.props.stores.storyStore,u=(h=s.state).comment,b=h.showAddImage,s.setState({sendButtonEnabled:!1}),Promise.resolve(l.commentStory({id:c.id,comment:u})).then((function(a){try{return(p=a)&&200===p.status&&(s.setState({comment:{body:"",images:[]}},(function(){d.a.resizeTextarea(r[c.id]),b&&s.addImage()})),o({story:c,response:p})),s.setState({sendButtonEnabled:!0}),t()}catch(t){return e(t)}}),e)):t(!1)}))},s.addImages=function(t){var e,a=s.state.comment;(e=a.images).push.apply(e,t.value),s.setState({comment:a})},s.addImage=function(){var t=s.state.showAddImage;s.setState({showAddImage:!(void 0!==t&&t)})},s.handleImageErrored=function(t){var e=t.target;e.onerror=null,setTimeout((function(){e.src+="?"+new Date}),1e3)},s.state={comment:{body:"",images:[]},showAddImage:!1,sendButtonEnabled:!0},s.inputRef={},s}var a,i;return i=e,(a=s).prototype=Object.create(i.prototype),a.prototype.constructor=a,a.__proto__=i,s.prototype.render=function(){var e=this,s=this.props,a=s.inputRef,i=s.story,h=this.state,u=h.comment,b=h.showAddImage,p=h.sendButtonEnabled,m=this.props.stores.userStore.user,f=void 0===m?{}:m,O=d.a.displayNameShort(f),g=(d.a.displayName(f),f.image||(f.images?f.images[0]:void 0));return Object(n.h)("div",null,Object(n.h)("div",{class:"d-flex mb-0 position-relative w-100"},Object(n.h)("div",{class:"text-center border rounded-circle imageRounded imageRoundedSmall",style:(g?"background-image: url('"+g.s3SmallLink+"'); background-size: cover;":"")+" border-width: 3px !important;"},!f.image&&Object(n.h)("span",{class:"font-weight-lighter",style:"font-size: 15px;"},O)),Object(n.h)("div",{class:"col pl-3",style:"line-height: 1.2em;"},Object(n.h)("div",{class:"d-flex bd-highlight"},Object(n.h)("div",{class:"p-0 w-100 bd-highlight"},Object(n.h)("label",{class:"sr-only",for:"inlineFormInput"},Object(n.h)(r.c,{id:"comments.comment"},"Kommentar")),Object(n.h)("div",{class:"border rounded rounded-lg position-relative"},Object(n.h)(r.b,null,Object(n.h)("textarea",{class:"form-control-plaintext px-2",type:"text",placeholder:Object(n.h)(r.c,{id:"comments.write-comment"},"Skriv en kommentar..."),onInput:Object(c.a)(this,"comment.body"),onKeyUp:d.a.resizeTextarea,onFocus:d.a.resizeTextarea,style:"height: 2.3em;",value:u.body,ref:a})),Object(n.h)("div",{class:"position-absolute",style:"top: 8px; right: 10px; font-size: 1.2em;"},Object(n.h)("i",{class:"fas fa-image pointerCursor","data-id":i.id,onClick:this.addImage})))),Object(n.h)("div",{class:"p-0 pl-2 flex-shrink-1 bd-highlight"},Object(n.h)("button",{type:"button",class:"btn btn-"+(p?"primary":"secondary")+" mb-2",disabled:!p,onClick:this.commentStory},Object(n.h)("i",{class:"fas fa-paper-plane"})))))),b&&Object(n.h)(t,null,Object(n.h)("div",{class:"col-12 text-center"},Object(n.h)("div",{class:"container-fluid"},Object(n.h)("div",{class:"row"},o.a.isArray(u.images)&&u.images.map((function(t){return Object(n.h)("div",{class:"col-3 p-1"},Object(n.h)("img",{src:t.s3SmallLink,class:"img-fluid",onError:e.handleImageErrored}),Object(n.h)("button",{class:"btn btn-sm btn-link",onClick:e.removeImage,"data-name":t.name},Object(n.h)("i",{class:"fas fa-trash"})," ",Object(n.h)(r.c,{id:"comments.remove-image"},"Remove")))})))),Object(n.h)(l.a,{object:u,updateField:this.addImages,before:this.beforeImagesUploaded,after:this.afterImagesUploaded,autoOpen:!0}))))},s}(n.Component))||a;e.a=h}).call(this,s("hosL").Fragment)},"5uob":function(t,e,s){"use strict";var a,n=s("hosL"),o=(s("Utv1"),s("/eY4")),i=s("OhSV"),r=s("go65"),c=(s("ETxl"),s("ZOvn")),l=Object(o.a)(a=function(t){function e(e){var s;return(s=t.call(this,e)||this).commentStory=function(){return new Promise((function(t,e){var a,n,o,i,r,l,d,h,u,b,p;return s.state.sendButtonEnabled?(o=void 0===(n=(a=s.props).callback)?function(){}:n,i=a.commentId,l=void 0===(r=a.inputRefObject)?{}:r,d=s.props.story,h=s.props.stores.storyStore,b=void 0===(u=s.state.comment)?"":u,s.setState({sendButtonEnabled:!1}),Promise.resolve(h.commentReplyStory({id:d.id,commentId:i,comment:b})).then((function(a){try{return(p=a)&&200===p.status&&(s.setState({comment:""},(function(){c.a.resizeTextarea(l[i])})),o({story:d,response:p,commentId:i})),s.setState({sendButtonEnabled:!0}),t()}catch(t){return e(t)}}),e)):t(!1)}))},s.state={sendButtonEnabled:!0},s.inputRef={},s}var s,a;a=t,(s=e).prototype=Object.create(a.prototype),s.prototype.constructor=s,s.__proto__=a;var o=e.prototype;return o.componentDidMount=function(){var t=this.props.initCall;(void 0===t?function(){}:t)()},o.render=function(){var t=this.props.inputRef,e=this.state,s=e.comment,a=e.sendButtonEnabled,o=this.props.stores.userStore.user,l=void 0===o?{}:o,d=c.a.displayNameShort(l),h=(c.a.displayName(l),l.image||(l.images?l.images[0]:void 0));return Object(n.h)("div",{class:"w-100"},Object(n.h)("div",{class:"d-flex mb-0 position-relative w-100"},Object(n.h)("div",{class:"text-center border rounded-circle imageRounded imageRoundedThumb",style:(h?"background-image: url('"+h.s3SmallLink+"'); background-size: cover;":"")+" border-width: 3px !important;"},!h&&Object(n.h)("span",{class:"font-weight-lighter",style:"font-size: 15px;"},d)),Object(n.h)("div",{class:"col pl-3",style:"line-height: 1.2em;"},Object(n.h)("div",{class:"d-flex bd-highlight"},Object(n.h)("div",{class:"p-0 w-100 bd-highlight"},Object(n.h)("label",{class:"sr-only",for:"inlineFormInput"},Object(n.h)(i.c,{id:"comments.comment"},"Kommentar")),Object(n.h)("div",{class:"border rounded rounded-lg position-relative"},Object(n.h)(i.b,null,Object(n.h)("textarea",{class:"form-control-plaintext px-2",type:"text",placeholder:Object(n.h)(i.c,{id:"comments.write-comment"},"Skriv en kommentar..."),onInput:Object(r.a)(this,"comment"),onKeyUp:c.a.resizeTextarea,style:"height: 2.3em;",value:s,ref:t})))),Object(n.h)("div",{class:"p-0 pl-2 flex-shrink-1 bd-highlight"},Object(n.h)("button",{type:"button",class:"btn btn-"+(a?"primary":"secondary")+" mb-2",disabled:!a,onClick:this.commentStory},Object(n.h)("i",{class:"fas fa-paper-plane"})))))))},e}(n.Component))||a;e.a=l},"6GRK":function(t,e,s){"use strict";(function(t){function a(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,a)}return s}function n(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?a(Object(s),!0).forEach((function(e){o(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):a(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}function o(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}var i,r=s("hosL"),c=s("/eY4"),l=(s("cneo"),s("Utv1")),d=s("OhSV"),h=s("go65"),u=Object(c.a)(i=function(e){function s(t){var s;return(s=e.call(this,t)||this).handleAdd=function(){var t=s.props;(0,t.updateField)({id:t.object.id,field:t.field,value:n({},s.state.data)}),s.setState({data:{name:"",url:""}})},s.removeLink=function(t){return new Promise((function(e){var a=s.props.stores.dogStore,n=s.props.object,o=t.target.closest("button").dataset;return a.removeLink({id:n.id,name:o.name,linkId:o.id}),e()}))},s.state={data:{}},s}var a,o;return o=e,(a=s).prototype=Object.create(o.prototype),a.prototype.constructor=a,a.__proto__=o,s.prototype.render=function(){var e=this,s=this.props,a=s.showFiles,n=void 0===a||a,o=s.object,i=void 0===o?{}:o;return Object(r.h)("div",{class:"row"},Object(r.h)("div",{class:"col-12 mt-3"},n&&Object(r.h)(t,null,Object(r.h)("div",{class:"container-fluid"},Object(r.h)("div",{class:"row"},(!i.links||0===i.links.length)&&Object(r.h)(t,null,Object(r.h)("div",{class:"text-center text-muted"},Object(r.h)("div",{class:"display-1"},Object(r.h)("i",{class:"fas fa-link"})),Object(r.h)("h3",null,Object(r.h)(d.c,{id:"dogs.no-links-title"},"No links for this dog!")),Object(r.h)(d.c,{id:"dogs.no-links-text"},"You can add links to this dog. Ie. Links to Facebook page, Instagram page, blogg, etc."))),i.links&&i.links.map((function(t){return Object(r.h)("div",{class:"col-12 p-1"},Object(r.h)("span",{class:"font-weight-lighter mr-2"},l.a.isoDate(t.createdDate,!1,!1,!0)),Object(r.h)("span",{class:"mr-2"},t.name),Object(r.h)("span",{class:"mr-2"},t.url),Object(r.h)("button",{class:"btn btn-sm btn-link float-right p-0",onClick:e.removeLink,"data-name":t.name,"data-id":t.id},Object(r.h)("i",{class:"fas fa-trash-alt"})," Del"))})))))),Object(r.h)("div",{class:"col-12 mt-3"},Object(r.h)("details",null,Object(r.h)("summary",null,Object(r.h)(d.c,{id:"dogs.link-add"},"Add new link")),Object(r.h)("div",{class:"form-group"},Object(r.h)("label",{for:"name"},Object(r.h)(d.c,{id:"dogs.link-name"},"Name")),Object(r.h)("input",{type:"text",class:"form-control",id:"name","aria-describedby":"nameHelp",onInput:Object(h.a)(this,"data.name")}),Object(r.h)("small",{id:"nameHelp",class:"form-text text-muted"},Object(r.h)(d.c,{id:"dogs.link-name-help"},"Name of link"))),Object(r.h)("div",{class:"form-group"},Object(r.h)("label",{for:"url"},Object(r.h)(d.c,{id:"dogs.link-url"},"Url")),Object(r.h)("input",{type:"text",class:"form-control",id:"url","aria-describedby":"urlHelp",onInput:Object(h.a)(this,"data.url")}),Object(r.h)("small",{id:"urlHelp",class:"form-text text-muted"},Object(r.h)(d.c,{id:"dogs.link-url-help"},"URL of link"))),Object(r.h)("button",{class:"btn btn-success",onClick:this.handleAdd},Object(r.h)(d.c,{id:"dogs.link-add"},"Add link")))))},s}(r.Component))||i;e.a=u}).call(this,s("hosL").Fragment)},"9lZG":function(t,e,s){"use strict";(function(t){var a,n=s("hosL"),o=s("Utv1"),i=s("/eY4"),r=s("OhSV"),c=s("go65"),l=s("om2D"),d=s("ZOvn"),h=Object(i.a)(a=function(e){function s(t){var s;return(s=e.call(this,t)||this).beforeImagesUploaded=function(){s.setState({sendButtonEnabled:!1})},s.afterImagesUploaded=function(){s.setState({sendButtonEnabled:!0})},s.commentRace=function(){return new Promise((function(t,e){var a,n,o,i,r,c,l,h,u,b,p;return s.state.sendButtonEnabled?(o=void 0===(n=(a=s.props).callback)?function(){}:n,r=void 0===(i=a.inputRefObject)?{}:i,c=s.props.race,l=s.props.stores.raceStore,u=(h=s.state).comment,b=h.showAddImage,s.setState({sendButtonEnabled:!1}),Promise.resolve(l.commentRace({id:c.id,comment:u})).then((function(a){try{return(p=a)&&200===p.status&&(s.setState({comment:{body:"",images:[]}},(function(){d.a.resizeTextarea(r[c.id]),b&&s.addImage()})),o({race:c,response:p})),s.setState({sendButtonEnabled:!0}),t()}catch(t){return e(t)}}),e)):t(!1)}))},s.addImages=function(t){var e,a=s.state.comment;(e=a.images).push.apply(e,t.value),s.setState({comment:a})},s.addImage=function(){var t=s.state.showAddImage;s.setState({showAddImage:!(void 0!==t&&t)})},s.handleImageErrored=function(t){var e=t.target;e.onerror=null,setTimeout((function(){e.src+="?"+new Date}),1e3)},s.state={comment:{body:"",images:[]},showAddImage:!1,sendButtonEnabled:!0},s.inputRef={},s}var a,i;return i=e,(a=s).prototype=Object.create(i.prototype),a.prototype.constructor=a,a.__proto__=i,s.prototype.render=function(){var e=this,s=this.props,a=s.inputRef,i=s.race,h=this.state,u=h.comment,b=h.showAddImage,p=h.sendButtonEnabled,m=this.props.stores.userStore.user,f=void 0===m?{}:m,O=d.a.displayNameShort(f),g=(d.a.displayName(f),f.image||(f.images?f.images[0]:void 0));return Object(n.h)(t,null,Object(n.h)("div",null,Object(n.h)("div",{class:"d-flex mb-0 position-relative w-100"},Object(n.h)("div",{class:"text-center border rounded-circle imageRounded imageRoundedSmall",style:(g?"background-image: url('"+g.s3SmallLink+"'); background-size: cover;":"")+" border-width: 3px !important;"},!g&&Object(n.h)("span",{class:"font-weight-lighter",style:"font-size: 15px;"},O)),Object(n.h)("div",{class:"col pl-3",style:"line-height: 1.2em;"},Object(n.h)("div",{class:"d-flex bd-highlight"},Object(n.h)("div",{class:"p-0 w-100 bd-highlight"},Object(n.h)("label",{class:"sr-only",for:"inlineFormInput"},Object(n.h)(r.c,{id:"comments.comment"},"Kommentar")),Object(n.h)("div",{class:"border rounded rounded-lg position-relative"},Object(n.h)(r.b,null,Object(n.h)("textarea",{class:"form-control-plaintext px-2",type:"text",placeholder:Object(n.h)(r.c,{id:"comments.write-comment"},"Skriv en kommentar..."),onInput:Object(c.a)(this,"comment.body"),onKeyUp:d.a.resizeTextarea,onFocus:d.a.resizeTextarea,style:"height: 2.3em;",value:u.body,ref:a})),Object(n.h)("div",{class:"position-absolute",style:"top: 8px; right: 10px; font-size: 1.2em;"},Object(n.h)("i",{class:"fas fa-image pointerCursor","data-id":i.id,onClick:this.addImage})))),Object(n.h)("div",{class:"p-0 pl-2 flex-shrink-1 bd-highlight"},Object(n.h)("button",{type:"button",class:"btn btn-"+(p?"primary":"secondary")+" mb-2",disabled:!p,onClick:this.commentRace},Object(n.h)("i",{class:"fas fa-paper-plane"})))))),b&&Object(n.h)(t,null,Object(n.h)("div",{class:"col-12 text-center"},Object(n.h)("div",{class:"container-fluid"},Object(n.h)("div",{class:"row"},o.a.isArray(u.images)&&u.images.map((function(t){return Object(n.h)("div",{class:"col-3 p-1"},Object(n.h)("img",{src:t.s3SmallLink,class:"img-fluid",onError:e.handleImageErrored}),Object(n.h)("button",{class:"btn btn-sm btn-link",onClick:e.removeImage,"data-name":t.name},Object(n.h)("i",{class:"fas fa-trash"})," ",Object(n.h)(r.c,{id:"comments.remove-image"},"Remove")))})))),Object(n.h)(l.a,{object:u,updateField:this.addImages,before:this.beforeImagesUploaded,after:this.afterImagesUploaded,autoOpen:!0})))))},s}(n.Component))||a;e.a=h}).call(this,s("hosL").Fragment)},"9xg+":function(t,e,s){"use strict";(function(t){function a(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,a)}return s}function n(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}function o(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}var i,r,c,l,d,h,u=s("hosL"),b=s("Utv1"),p=s("/eY4"),m=s("cneo"),f=(s("go65"),s("Y3FI")),O=s("OhSV"),g=(s("fh8t"),s("ZOvn")),j=s("om2D"),v=s("TiXY"),y=s("KOz6"),w=s("6GRK"),x=s("/DnB"),k=(g.a.marginTop(!1),g.a.marginTopBack(!1),g.a.marginBottom(!1),Object(p.a)(i=function(e){function s(){for(var t,s=arguments.length,a=new Array(s),n=0;n<s;n++)a[n]=arguments[n];return(t=e.call.apply(e,[this].concat(a))||this).handleImageErrored=function(t){var e=t.target;if(e.dataset.retry||(e.dataset.retry=0),e.dataset.retry=parseInt(e.dataset.retry,10)+1,e.dataset.retry>5)return!1;e.onerror=null,setTimeout((function(){e.src+="?"+new Date}),1e3)},t.removeImage=function(e){return new Promise((function(s){return t.props.stores.dogStore.removeImage({id:t.props.dog.id,name:e.target.parentElement.dataset.name||e.target.dataset.name}),s()}))},t.removeFile=function(e){return new Promise((function(s){return t.props.stores.dogStore.removeFile({id:t.props.dog.id,name:e.target.parentElement.dataset.name||e.target.dataset.name}),s()}))},t}return o(s,e),s.prototype.render=function(){var e=this,s=this.props,a=s.saved,n=s.dog,o=s.type,i=void 0===o?"text":o,r=s.datalist,c=void 0===r?[]:r,l=s.min,d=s.max,h=s.step,p=s.field,m=s.title,f=s.icon,g=s.help,x=s.onInput,k=s.updateField,S=s.refName,C=s.showImages,I=void 0!==C&&C,D=s.showFiles,T=void 0===D||D,P=n[p]||"",R=d;return"date"===i&&(P&&(P=b.a.isoDate(n[p],!1,!1,!0)),"today"===d&&(R=b.a.isoDate(void 0,!1,!1,!0))),"file"===i?Object(u.h)("div",{class:"form-group "+(a[p+"."+n.id]?"is-valid":"")},Object(u.h)("label",{for:p+"Input"},f&&Object(u.h)("i",{class:f+" text-muted"})," ",m),T&&Object(u.h)(t,null,Object(u.h)("div",{class:"container-fluid"},Object(u.h)("div",{class:"row"},(!n.files||0===n.files.length)&&Object(u.h)(t,null,Object(u.h)("div",{class:"text-center text-muted"},Object(u.h)("div",{class:"display-1"},Object(u.h)("i",{class:"fas fa-file"})),Object(u.h)("h3",null,Object(u.h)(O.c,{id:"dogs.no-files-title"},"No files attached to this dog!")),Object(u.h)(O.c,{id:"dogs.no-files-text"},"You can upload files to this dog inside edit. These files can be of any type. Ie: Certificates, test, etc."))),n.files&&n.files.map((function(t){return Object(u.h)("div",{class:"col-12 p-1"},Object(u.h)("span",{class:"font-weight-lighter mr-2"},b.a.isoDate(t.createdDate,!1,!1,!0)),Object(u.h)("span",{class:"mr-2"},t.name),Object(u.h)("span",{class:"font-weight-lighter mr-2"},b.a.formatBytes(t.size,1)),Object(u.h)("button",{class:"btn btn-sm btn-link float-right p-0",onClick:e.removeFile,"data-name":t.name},Object(u.h)("i",{class:"fas fa-trash-alt"})," Del"))}))))),Object(u.h)(v.a,{saved:a,object:n,field:p,updateField:k}),a[p+"."+n.id]?Object(u.h)("div",{class:"valid-feedback",style:"display: block;"},Object(u.h)(O.c,{id:"dogs.changes-saved"},"Endringene er lagret")):Object(u.h)("small",{id:p+"Help",class:"form-text text-muted"},g)):"textarea"===i?Object(u.h)("div",{class:"form-group "+(a[p+"."+n.id]?"is-valid":"")},Object(u.h)("label",{for:p+"Input"},f&&Object(u.h)("i",{class:f+" text-muted"})," ",m),Object(u.h)("textarea",{type:"text",class:"form-control "+(a[p+"."+n.id]?"is-valid":""),id:p+"Input","aria-describedby":p+"Help",value:P,"data-id":n.id,"data-field":p,onInput:x,rows:10}),a[p+"."+n.id]?Object(u.h)("div",{class:"valid-feedback",style:"display: block;"},Object(u.h)(O.c,{id:"dogs.changes-saved"},"Endringene er lagret")):Object(u.h)("small",{id:p+"Help",class:"form-text text-muted"},g)):"links"===p?Object(u.h)("div",{class:"form-group "+(a[p+"."+n.id]?"is-valid":"")},Object(u.h)("label",{for:p+"Input"},f&&Object(u.h)("i",{class:f+" text-muted"})," ",m),Object(u.h)(w.a,{saved:a,stores:this.props.stores,object:n,field:p,updateField:k}),a[p+"."+n.id]?Object(u.h)("div",{class:"valid-feedback",style:"display: block;"},Object(u.h)(O.c,{id:"dogs.changes-saved"},"Endringene er lagret")):Object(u.h)("small",{id:p+"Help",class:"form-text text-muted"},g)):"achievements"===p?Object(u.h)("div",{class:"form-group "+(a[p+"."+n.id]?"is-valid":"")},Object(u.h)("label",{for:p+"Input"},f&&Object(u.h)("i",{class:f+" text-muted"})," ",m),Object(u.h)(y.a,{saved:a,stores:this.props.stores,object:n,field:p,updateField:k}),a[p+"."+n.id]?Object(u.h)("div",{class:"valid-feedback",style:"display: block;"},Object(u.h)(O.c,{id:"dogs.changes-saved"},"Endringene er lagret")):Object(u.h)("small",{id:p+"Help",class:"form-text text-muted"},g)):"image"===i?Object(u.h)("div",{class:"form-group "+(a[p+"."+n.id]?"is-valid":"")},Object(u.h)("label",{for:p+"Input"},f&&Object(u.h)("i",{class:f})," ",m),I&&Object(u.h)(t,null,Object(u.h)("div",{class:"container-fluid"},Object(u.h)("div",{class:"row"},(!n.images||0===n.images.length)&&Object(u.h)(t,null,Object(u.h)("div",{class:"text-center text-muted mb-3"},Object(u.h)("div",{class:"display-1"},Object(u.h)("i",{class:"fas fa-images"})),Object(u.h)("h3",null,Object(u.h)(O.c,{id:"dogs.no-images-title"},"No images for this dog!")),Object(u.h)(O.c,{id:"dogs.no-images-text"},"You can add more images to this dog. Puppy pictures, workout pictures, lazy summer pictures, etc. All is a nice way to create a better profile for this dog."))),"image"===p?Object(u.h)(t,null,n.image&&n.image.s3SmallLink&&Object(u.h)("div",{class:"col-3 p-1"},Object(u.h)("img",{src:n.image.s3SmallLink,class:"img-fluid border rounded-lg",onError:this.handleImageErrored}),Object(u.h)("button",{class:"btn btn-sm btn-link",onClick:this.removeImage,"data-name":n.image.name},Object(u.h)("i",{class:"fas fa-trash"})," Remove"),Object(u.h)("span",{class:"badge badge-success"},"Main"))):Object(u.h)(t,null,n.images&&n.images.map((function(t){return Object(u.h)("div",{class:"col-3 p-1"},Object(u.h)("img",{src:t.s3SmallLink,class:"img-fluid",onError:e.handleImageErrored}),Object(u.h)("button",{class:"btn btn-sm btn-link",onClick:e.removeImage,"data-name":t.name},Object(u.h)("i",{class:"fas fa-trash"})," Remove"))})))))),"image"===p?Object(u.h)(t,null,Object(u.h)(j.a,{saved:a,object:n,field:p,updateField:k,autoOpen:!1,addToImages:!1})):Object(u.h)(t,null,Object(u.h)(j.a,{saved:a,object:n,field:p,updateField:k,autoOpen:!1})),a[p+"."+n.id]?Object(u.h)("div",{class:"valid-feedback",style:"display: block;"},Object(u.h)(O.c,{id:"dogs.changes-saved"},"Endringene er lagret")):Object(u.h)("small",{id:p+"Help",class:"form-text text-muted"},g)):"datalist"===i?Object(u.h)("div",{class:"form-group "+(a[p+"."+n.id]?"is-valid":"")},Object(u.h)("label",{for:p+"Input"},f&&Object(u.h)("i",{class:f})," ",m),Object(u.h)("input",{list:"list-"+p,class:"form-control "+(a[p+"."+n.id]?"is-valid":""),id:p+"Input","aria-describedby":p+"Help",value:P,"data-id":n.id,"data-field":p,onInput:x}),Object(u.h)("datalist",{id:"list-"+p},c.map((function(t){return Object(u.h)("option",{value:t[0]},t[1])}))),a[p+"."+n.id]?Object(u.h)("div",{class:"valid-feedback",style:"display: block;"},Object(u.h)(O.c,{id:"dogs.changes-saved"},"Endringene er lagret")):Object(u.h)("small",{id:p+"Help",class:"form-text text-muted"},g)):"select"===i?Object(u.h)("div",{class:"form-group "+(a[p+"."+n.id]?"is-valid":"")},Object(u.h)("label",{for:p+"Input"},f&&Object(u.h)("i",{class:f})," ",m),Object(u.h)("select",{type:i,class:"form-control "+(a[p+"."+n.id]?"is-valid":""),id:p+"Input","aria-describedby":p+"Help",value:P,"data-id":n.id,"data-field":p,onInput:x},Object(u.h)("option",{value:""},"-- Velg kjønn --"),c.map((function(t){return Object(u.h)("option",{value:t[0]},t[1])}))),a[p+"."+n.id]?Object(u.h)("div",{class:"valid-feedback",style:"display: block;"},Object(u.h)(O.c,{id:"dogs.changes-saved"},"Endringene er lagret")):Object(u.h)("small",{id:p+"Help",class:"form-text text-muted"},g)):Object(u.h)("div",{class:"form-group "+(a[p+"."+n.id]?"is-valid":"")},Object(u.h)("label",{for:p+"Input"},f&&Object(u.h)("i",{class:f})," ",m)," ",S,Object(u.h)("input",{type:i,class:"form-control "+(a[p+"."+n.id]?"is-valid":""),id:p+"Input","aria-describedby":p+"Help",min:l,max:R,step:h,value:P,"data-id":n.id,"data-field":p,onInput:x}),a[p+"."+n.id]?Object(u.h)("div",{class:"valid-feedback",style:"display: block;"},Object(u.h)(O.c,{id:"dogs.changes-saved"},"Endringene er lagret")):Object(u.h)("small",{id:p+"Help",class:"form-text text-muted"},g))},s}(u.Component))||i),S=Object(p.a)(r=function(e){function s(){return e.apply(this,arguments)||this}o(s,e);var a=s.prototype;return a.toggleType=function(t){var e=this.props.stores.dogStore,s=this.props,a=s.object,n=s.type,o=s.field,i=s.updateField,r=s.isNew,c=Object(m.i)(a[o]);null===(c=c===t?null:t)?i({id:a.id,field:o,value:c,type:n,isNew:r}):a.teams.indexOf(c)>-1?e.removeTeam({id:a.id,team:c}):a.team?e.addTeam({id:a.id,team:c}):i({id:a.id,field:o,value:c,type:n,isNew:r})},a.componentDidMount=function(){this.container&&this.container.scrollIntoView({behavior:"smooth",block:"center"})},a.render=function(){var e=this,s=this.props.stores.userStore.teams,a=this.props,n=a.saved,o=a.object,i=a.field,r=a.title,c=a.icon,l=a.help,d=Object(m.i)(o[i]),h=this.props.highlight;return Object(u.h)("div",{class:"form-group mb-4 pb-1 border-bottom "+(n[i+"."+o.id]?"is-valid":"")},Object(u.h)("label",{for:i+"Input"},c&&Object(u.h)("i",{class:c+" text-muted"})," ",r),Object(u.h)("div",{class:"container-fluid px-0"},Object(u.h)("div",{class:"row"},Object(u.h)("div",{class:"w-100 overflow-hidden"},Object(u.h)("div",{class:"d-flex flex-row flex-nowrap pb-2 px-1",style:"overflow: auto; scroll-snap-type: x mandatory;"},s&&s.map((function(a,n){var i=d===a.id,r=o&&b.a.isArray(o.teams)&&o.teams.indexOf(a.id)>-1;return Object(u.h)("div",{class:"col mb-0 px-0",ref:i||r?function(t){return e.container=t}:null},Object(u.h)("button",{class:"btn btn-block\n            \t\t\t\t\t\t\t\t\t\trounded-none "+(0===n?"rounded-pill-left":n+1===s.length?"rounded-pill-right":"")+"\n                                                    btn"+(i||r?"":"-outline")+"-"+(r?"info":"success")+"\n                                                    text-nowrap overflow-hidden",style:"text-overflow: ellipsis;",onClick:function(){return e.toggleType(a.id)}},o.hintTeam===a.id&&Object(u.h)("span",{class:"float-right text-primary"},Object(u.h)("i",{class:"fas fa-circle"})),Object(u.h)("i",{class:"fas fa-users mr-2"}),a.name,h&&h.indexOf(a.id)>-1&&Object(u.h)(t,null,d===a.id?Object(u.h)(t,null,Object(u.h)("i",{class:"fas fa-check float-right"})):Object(u.h)(t,null,Object(u.h)("div",{class:"spinner-grow text-warning float-right",role:"status"},Object(u.h)("span",{class:"sr-only"},"Loading...")),Object(u.h)("i",{class:"far fa-hand-point-left float-right",style:"font-size: 2.0em;"}))),Object(u.h)("small",null,i&&Object(u.h)("span",{class:"badge badge-pill badge-primary"},"Primary"),r&&Object(u.h)("span",{class:"badge badge-pill badge-secondary"},"Secondary"))))})))))),n[i+"."+o.id]?Object(u.h)("div",{class:"valid-feedback",style:"display: block;"},Object(u.h)(O.c,{id:"workouts.changes-saved"},"Endringene er lagret")):Object(u.h)("small",{id:i+"Help",class:"form-text text-muted"},l))},s}(u.Component))||r,C=Object(p.a)(c=function(t){function e(){return t.apply(this,arguments)||this}o(e,t);var s=e.prototype;return s.toggleType=function(t){var e=this.props,s=e.object,a=e.type,n=e.field,o=e.updateField,i=e.isNew,r=Object(m.i)(s[n]);o({id:s.id,field:n,value:r=r===t?null:t,type:a,isNew:i})},s.render=function(){var t=this,e=this.props.stores.userStore,s=e.harnesses,a=e.user.language,n=void 0===a?"en":a,o=this.props,i=o.saved,r=o.object,c=o.field,l=o.title,d=o.icon,h=o.help,b=Object(m.i)(r[c]);return Object(u.h)("div",{class:"form-group "+(i[c+"."+r.id]?"is-valid":"")},Object(u.h)("label",{for:c+"Input"},d&&Object(u.h)("i",{class:d})," ",l),Object(u.h)("div",{class:"container-fluid px-0"},Object(u.h)("div",{class:"row"},Object(u.h)("div",{class:"w-100 overflow-hidden"},Object(u.h)("div",{class:"d-flex flex-row flex-nowrap pb-2 px-1",style:"overflow: auto; scroll-snap-type: x mandatory;"},s&&s.map((function(e,a){return Object(u.h)("div",{class:"col px-0 mb-2",ref:b===e.id?function(e){return t.container=e}:null},Object(u.h)("div",{class:"border\n                                            rounded-none "+(0===a?"rounded-pill-left":a+1===s.length?"rounded-pill-right":"")+"\n                                            p-2 "+(b===e.id?"bg-success":""),style:"border-bottom: 3px solid "+e.colorNonstop+" !important;",onClick:function(){return t.toggleType(e.id)}},e.lang&&e.lang[n]?e.lang[n]:e.name))})))))),i[c+"."+r.id]?Object(u.h)("div",{class:"valid-feedback",style:"display: block;"},Object(u.h)(O.c,{id:"dogs.changes-saved"},"Endringene er lagret")):Object(u.h)("small",{id:c+"Help",class:"form-text text-muted"},h))},e}(u.Component))||c,I=Object(p.a)(l=function(t){function e(){return t.apply(this,arguments)||this}o(e,t);var s=e.prototype;return s.toggleStatus=function(t){var e=this.props.stores.dogStore,s=this.props,a=s.object,n=s.type,o=s.field,i=s.updateField,r=s.isNew,c=Object(m.i)(a[o]);0===(c=c===t?0:t)?i({id:a.id,field:o,value:c,type:n,isNew:r}):a.statuses.indexOf(c)>-1?e.removeStatus({id:a.id,status:c}):a.status?e.addStatus({id:a.id,status:c}):i({id:a.id,field:o,value:c,type:n,isNew:r})},s.componentDidMount=function(){this.container&&this.container.scrollIntoView({behavior:"smooth",block:"center"})},s.render=function(){var t=this,e=this.props.stores.userStore,s=e.dogstatuses,a=e.user.language,n=this.props,o=n.saved,i=n.object,r=n.field,c=n.title,l=n.icon,d=n.help,h=Object(m.i)(i[r]);return Object(u.h)("div",{class:"form-group  mb-4 pb-1 border-bottom "+(o[r+"."+i.id]?"is-valid":"")},Object(u.h)("label",{for:r+"Input"},l&&Object(u.h)("i",{class:l+" text-muted"})," ",c),Object(u.h)("div",{class:"container-fluid px-0"},Object(u.h)("div",{class:"row"},Object(u.h)("div",{class:"w-100 overflow-hidden"},Object(u.h)("div",{class:"d-flex flex-row flex-nowrap pb-2 px-1",style:"overflow: auto; scroll-snap-type: x mandatory;"},s&&s.map((function(e,n){var o=h===e.id,r=i&&b.a.isArray(i.statuses)&&i.statuses.indexOf(e.id)>-1;return Object(u.h)("div",{class:"col mb-2 px-0",ref:o||r?function(e){return t.container=e}:null},Object(u.h)("button",{class:"btn btn-block\n            \t\t\t\t\t\t\t\t\t\trounded-none "+(0===n?"rounded-pill-left":n+1===s.length?"rounded-pill-right":"")+"\n                                                    btn"+(o||r?"":"-outline")+"-"+(r?"info":"success")+"\n                                                    text-nowrap overflow-hidden",style:"text-overflow: ellipsis;",onClick:function(){return t.toggleStatus(e.id)}},a&&e.lang&&e.lang[a]?e.lang[a]:e.name))})))))),o[r+"."+i.id]?Object(u.h)("div",{class:"valid-feedback",style:"display: block;"},Object(u.h)(O.c,{id:"dogs.changes-saved"},"Endringene er lagret")):Object(u.h)("small",{id:r+"Help",class:"form-text text-muted"},d))},e}(u.Component))||l,D=Object(p.a)(d=function(t){function e(){return t.apply(this,arguments)||this}o(e,t);var s=e.prototype;return s.toggleStatus=function(t){var e=this.props,s=e.object,a=e.type,n=e.field,o=e.updateField,i=e.isNew,r=Object(m.i)(s[n]);o({id:s.id,field:n,value:r=r===t?null:t,type:a,isNew:i})},s.render=function(){var t=this,e=this.props.stores.userStore.dogPositions,s=this.props,a=s.saved,n=s.object,o=s.field,i=s.title,r=s.icon,c=s.help,l=Object(m.i)(n[o]);return Object(u.h)("div",{class:"form-group  mb-4 pb-1 border-bottom "+(a[o+"."+n.id]?"is-valid":"")},Object(u.h)("label",{for:o+"Input"},r&&Object(u.h)("i",{class:r+" text-muted"})," ",i),Object(u.h)("div",{class:"container-fluid px-0"},Object(u.h)("div",{class:"row"},e&&e.map((function(e){return Object(u.h)("div",{class:"offset-2 col-8 mb-2"},Object(u.h)("div",{class:"border rounded rounded-pill px-3 py-1 bg-"+(l===e.id?e.class||"success":""),onClick:function(){return t.toggleStatus(e.id)},style:"line-height: 1.1em; cursor: pointer; pointer-events: inherit;"},Object(u.h)("small",null,e.name)))})))),a[o+"."+n.id]?Object(u.h)("div",{class:"valid-feedback",style:"display: block;"},Object(u.h)(O.c,{id:"dogs.changes-saved"},"Endringene er lagret")):Object(u.h)("small",{id:o+"Help",class:"form-text text-muted"},c))},e}(u.Component))||d,T=Object(p.a)(h=function(e){function s(t){var s;return(s=e.call(this,t)||this).insertDog=function(){return new Promise((function(t,e){return Promise.resolve(s.props.stores.dogStore.insert(function(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?a(Object(s),!0).forEach((function(e){n(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):a(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}({},s.state.newDog))).then((function(){try{return s.resetDog(),Object(f.route)("/dogs/"),t()}catch(t){return e(t)}}),e)}))},s.updateField=function(t){var e=t.target.dataset,a=e.id,n=e.field,o=e.type,i=e.elementtype,r=e.isNew,c=t.target,l=c.value,d=c.min,h=c.max;"date"===c.type&&d&&h?l>=d&&l<=h&&s.updateFieldValue({id:parseInt(a,10),field:n,value:l,type:o,elementtype:i,isNew:r}):s.updateFieldValue({id:parseInt(a,10),field:n,value:l,type:o,elementtype:i,isNew:r})},s.updateFieldValue=function(t){var e=t.id,a=t.field,n=t.value,o=t.datatype,i=t.elementtype,r=t.isNew,c=void 0!==r&&r,l=t.skipTimer,d=void 0!==l&&l,h=s.props.stores.dogStore,u=n,b=n,p=h.dog;"images"===a&&Array.isArray(p.images)&&Array.isArray(n)&&(b=[].concat(p.images,n)),"files"===a&&Array.isArray(p.files)&&(b=Array.isArray(n)?[].concat(p.files,n):[].concat(p.files,[n])),"achievements"===a&&Array.isArray(p.achievements)&&(b=Array.isArray(n)?[].concat(p.achievements,n):[].concat(p.achievements,[n])),"links"===a&&Array.isArray(p.links)&&(b=Array.isArray(n)?[].concat(p.links,n):[].concat(p.links,[n])),"array"!==o||Array.isArray(n)||(u="number"===i?n.split(",").map((function(t){return parseFloat(t)||t})):n.split(",")),c?h.updateObjectKeyValue("newDog",a,n):(h.updateField(e,a,b),d?s.doUpdateField(e,a,u):(clearTimeout(s.updateTimer[a]),s.updateTimer[a]=setTimeout((function(){return new Promise((function(t){return s.doUpdateField(e,a,u),t()}))}),500)))},s.chooseMother=function(t){var e=s.props.stores.dogStore,a=e.dog,n=parseInt(t.target.value,10),o=e.findDog(n);o?(s.updateFieldValue({id:a.id,field:"mother",value:o.id,skipTimer:!0}),s.updateFieldValue({id:a.id,field:"motherName",value:o.name,skipTimer:!0}),s.updateFieldValue({id:a.id,field:"motherChipId",value:o.chipId,skipTimer:!0})):s.updateFieldValue({id:a.id,field:"mother",value:null,skipTimer:!0})},s.chooseFather=function(t){var e=s.props.stores.dogStore,a=e.dog,n=parseInt(t.target.value,10),o=e.findDog(n);o?(s.updateFieldValue({id:a.id,field:"father",value:o.id,skipTimer:!0}),s.updateFieldValue({id:a.id,field:"fatherName",value:o.name,skipTimer:!0}),s.updateFieldValue({id:a.id,field:"fatherChipId",value:o.chipId,skipTimer:!0})):s.updateFieldValue({id:a.id,field:"father",value:null,skipTimer:!0})},s.chooseSubmenu=function(t){s.setState({submenu:t.target.parentElement.dataset.menu||t.target.dataset.menu})},s.back=function(){s.props.stores.history.goBack()},s.state={newDog:{},submenu:t.submenu||"info"},s.updateTimer={},s}o(s,e);var i=s.prototype;return i.loadDog=function(t){return new Promise(function(e,s){var a,n;return void 0===t&&(t=this.props),a=t.id,(n=this.props.stores.dogStore).cleanupMemoryDetail(),Promise.resolve(n.load(a,!1,{addData:["team","user","workoutSummary","vaccineStatuses","historyStatuses","vaccineLogStatuses","allDogs"]})).then((function(){try{return e()}catch(t){return s(t)}}),s)}.bind(this))},i.resetDog=function(){this.setState({newDog:{},createNew:!1})},i.doUpdateField=function(t,e,s){return new Promise(function(a,n){return Promise.resolve(this.props.stores.dogStore.saveField(t,e,s)).then((function(){try{return a()}catch(t){return n(t)}}),n)}.bind(this))},i.componentDidMount=function(){this.loadDog()},i.componentWillReceiveProps=function(t){t.id!==this.props.id&&this.loadDog(t)},i.render=function(){var e=this.state,s=e.submenu,a=this.props.stores,n=a.dogStore,o=n.saved,i=n.dog,r=n.findDogsByGender("female"),c=n.findDogsByGender("male"),l=g.a.hasBirthday(i.birth),d=i.birth?Math.ceil(g.a.daysUntilNextBirthday(i.birth)):365,h=i.name;return Object(u.h)(t,null,Object(u.h)("div",{class:"d-flex position-relative"},Object(u.h)("div",{class:"text-center border rounded-circle imageRounded float-right",style:i.image?'background-image: url("'+i.image.s3SmallLink+'");':""},!i.image&&Object(u.h)("i",{class:"fas fa-dog text-muted mt-3",style:"font-size: 40px;"})),Object(u.h)("div",{class:"flex-grow-1 pl-3"},Object(u.h)("h5",null,h,l&&Object(u.h)(t,null,Object(u.h)("i",{class:"fas fa-birthday-cake ml-3"}))),Object(u.h)("span",null,d<7&&Object(u.h)(t,null,Object(u.h)("span",{class:"text-muted mr-2"},Object(u.h)("i",{class:"fas fa-birthday-cake"})," in ",d," days")),i.birth&&Object(u.h)("span",{class:"mr-2"},b.a.age(i.birth,i.deceased)),"female"===i.gender?Object(u.h)("i",{class:"fas fa-venus"}):Object(u.h)("i",{class:"fas fa-mars"})))),Object(u.h)("div",{class:"d-flex flex-row flex-nowrap pb-2 px-1",style:"overflow: auto; scroll-snap-type: x mandatory;"},Object(u.h)("div",{class:"col px-0 pt-2"},Object(u.h)("button",{class:"btn btn-block rounded-pill-left rounded-none "+("info"===s?"btn-primary":"btn-outline-primary")+" text-nowrap",style:"text-overflow: ellipsis; overflow: hidden;","data-menu":"info",onClick:this.chooseSubmenu},Object(u.h)("i",{class:"fas fa-info-circle"})," ",Object(u.h)(O.c,{id:"dogs.info"},"Info")),"info"===s&&Object(u.h)(x.a,{horizontal:"center",vertical:"end"})),Object(u.h)("div",{class:"col px-0 pt-2"},Object(u.h)("button",{class:"btn btn-block rounded-none "+("pictures"===s?"btn-primary":"btn-outline-primary")+" text-nowrap",style:"text-overflow: ellipsis; overflow: hidden;","data-menu":"pictures",onClick:this.chooseSubmenu},Object(u.h)("i",{class:"fas fa-images"})," ",Object(u.h)(O.c,{id:"dogs.pictures"},"Pictures")),"pictures"===s&&Object(u.h)(x.a,{horizontal:"center",vertical:"end"})),Object(u.h)("div",{class:"col px-0 pt-2"},Object(u.h)("button",{class:"btn btn-block rounded-none "+("team"===s?"btn-primary":"btn-outline-primary")+" text-nowrap",style:"text-overflow: ellipsis; overflow: hidden;","data-menu":"team",onClick:this.chooseSubmenu},Object(u.h)("i",{class:"fas fa-users"})," ",Object(u.h)(O.c,{id:"dogs.team"},"Team")),"team"===s&&Object(u.h)(x.a,{horizontal:"center",vertical:"end"})),Object(u.h)("div",{class:"col px-0 pt-2"},Object(u.h)("button",{class:"btn btn-block rounded-pill-right rounded-none "+("advanced"===s?"btn-primary":"btn-outline-primary")+" text-nowrap",style:"text-overflow: ellipsis; overflow: hidden;","data-menu":"advanced",onClick:this.chooseSubmenu},Object(u.h)("i",{class:"fas fa-cogs"})," ",Object(u.h)(O.c,{id:"dogs.advanced"},"Advanced")),"advanced"===s&&Object(u.h)(x.a,{horizontal:"center",vertical:"end"}))),Object(u.h)("div",{class:"w-100 overflow-auto position-relative",style:"max-height: 50vh;"},Object(u.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3"},"info"===s&&Object(u.h)(t,null,Object(u.h)(O.b,null,Object(u.h)(k,{saved:o,dog:i,field:"name",title:Object(u.h)(O.c,{id:"dogs.full-name"},"Fullt navn"),help:Object(u.h)(O.c,{id:"dogs.full-name-help"},"Fullt navn på hunden."),onInput:this.updateField}),Object(u.h)(k,{saved:o,dog:i,field:"shortname",title:Object(u.h)(O.c,{id:"dogs.short-name"},"Kallenavn"),help:Object(u.h)(O.c,{id:"dogs.short-name-help"},"Kallenavnet på hunden. Hva roper du på innkalling?"),onInput:this.updateField}),Object(u.h)(k,{saved:o,dog:i,field:"gender",type:"select",datalist:[["male",Object(u.h)(O.c,{id:"dogs.gender-male"},"Male")],["female",Object(u.h)(O.c,{id:"dogs.gender-female"},"Female")]],title:Object(u.h)(O.c,{id:"dogs.gender"},"Kjønn"),help:Object(u.h)(O.c,{id:"dogs.gender-help"},"Kjønn på hunden."),onInput:this.updateField}),Object(u.h)(k,{saved:o,dog:i,field:"chipId",title:Object(u.h)(O.c,{id:"dogs.chip-id"},"Chip ID"),help:Object(u.h)(O.c,{id:"dogs.chip-id-help"},"Chip ID på hunden. Står ofte i vetrinærhåndbok eller passet."),onInput:this.updateField}),Object(u.h)(k,{saved:o,dog:i,field:"birth",type:"date",min:"2000-01-01",max:"today",title:Object(u.h)(O.c,{id:"dogs.birth"},"Fødselsdato"),help:Object(u.h)(O.c,{id:"dogs.birth-help"},"Fødselsdato på hunden."),onInput:this.updateField}),Object(u.h)(C,{stores:this.props.stores,saved:o,object:i,type:"number",field:"harness",title:Object(u.h)(O.c,{id:"dogs.harness-size"},"Selestørrelse"),help:Object(u.h)(O.c,{id:"dogs.harness-size-help"},"Sele til hunden"),updateField:this.updateFieldValue}),Object(u.h)(k,{saved:o,dog:i,field:"description",icon:"fas fa-paragraph",type:"textarea",title:Object(u.h)(O.c,{id:"dogs.description"},"Beskrivelse"),help:Object(u.h)(O.c,{id:"dogs.description-help"},"Beskrivelse av hunden."),onInput:this.updateField}))),"status"===s&&Object(u.h)(t,null,Object(u.h)(O.b,null,Object(u.h)(I,{stores:this.props.stores,saved:o,object:i,type:"number",field:"status",title:Object(u.h)(O.c,{id:"dogs.status"},"Status"),help:Object(u.h)(O.c,{id:"dogs.status-help"},"Status til hunden"),updateField:this.updateFieldValue}),Object(u.h)(k,{saved:o,dog:i,field:"specialNeeds",title:Object(u.h)(O.c,{id:"dogs.special-needs"},"Spesielle behov"),help:Object(u.h)(O.c,{id:"dogs.special-needs-help"},'Har hunden spesielle behov? Trenger ekstra mat, utstyr eller annet? Eks: "Ekstra fett", "Husk ulveklobandasje", etc.'),onInput:this.updateField}))),"pictures"===s&&Object(u.h)(t,null,Object(u.h)(O.b,null,Object(u.h)(k,{saved:o,dog:i,field:"image",type:"image",icon:"fas fa-portrait",stores:this.props.stores,title:Object(u.h)(O.c,{id:"dogs.profile-photo"},"Profilbilde"),help:Object(u.h)(O.c,{id:"dogs.profile-photo-help"},"Profilbilde av hunden."),onInput:this.updateField,updateField:this.updateFieldValue,showImages:!0}))),"team"===s&&Object(u.h)(t,null,Object(u.h)(O.b,null,Object(u.h)(S,{stores:this.props.stores,saved:o,object:i,type:"number",field:"team",title:Object(u.h)(O.c,{id:"dogs.team"},"Team"),help:Object(u.h)(O.c,{id:"dogs.team-help"},"Team som hunden er på."),updateField:this.updateFieldValue}),Object(u.h)(D,{stores:this.props.stores,saved:o,object:i,type:"number",field:"position",title:Object(u.h)(O.c,{id:"dogs.position"},"Plass i spannet"),help:Object(u.h)(O.c,{id:"dogs.position-help"},"Foretrukket plass i spannet."),updateField:this.updateFieldValue}))),"relations"===s&&Object(u.h)(t,null,Object(u.h)("h5",{class:"mt-5"},Object(u.h)(O.c,{id:"dogs.mother"},"Mor")),Object(u.h)("select",{class:"form-control","aria-describedby":"fatherHelp",value:i.mother,onInput:this.chooseMother},Object(u.h)("option",{value:""},"-- ",Object(u.h)(O.c,{id:"dogs.choose-mother"},"Velg blant dine hunder")," --"),r&&r.map((function(t){return Object(u.h)("option",{value:t.id},t.name," - ",b.a.age(t.birth,t.deceased))}))),Object(u.h)(O.b,null,Object(u.h)(k,{saved:o,dog:i,field:"motherName",type:"text",title:Object(u.h)(O.c,{id:"dogs.mother-name"},"Navn på mor"),help:Object(u.h)(O.c,{id:"dogs.mother-name-help"},"Navn på moren til denne hunden."),onInput:this.updateField}),Object(u.h)(k,{saved:o,dog:i,field:"motherChipId",type:"text",title:Object(u.h)(O.c,{id:"dogs.mother-chipid"},"Chip ID på mor"),help:Object(u.h)(O.c,{id:"dogs.mother-chipid-help"},"Chip ID til moren til denne hunden. Dersom hunden finnes blant dine hunder, så vil den bli koblet sammen."),onInput:this.updateField}),Object(u.h)(k,{saved:o,dog:i,field:"motherComment",title:Object(u.h)(O.c,{id:"dogs.mother-comment"},"Kommentar til mor"),help:Object(u.h)(O.c,{id:"dogs.mother-comment-help"},"Kommentar til moren til denne hunden."),onInput:this.updateField})),Object(u.h)("h5",{class:"mt-5"},Object(u.h)(O.c,{id:"dogs.father"},"Far")),Object(u.h)("select",{class:"form-control","aria-describedby":"fatherHelp",value:i.father,onInput:this.chooseFather},Object(u.h)("option",{value:""},"-- ",Object(u.h)(O.c,{id:"dogs.choose-father"},"Velg blant dine hunder")," --"),c&&c.map((function(t){return Object(u.h)("option",{value:t.id},t.name," - ",b.a.age(t.birth,t.deceased))}))),Object(u.h)(O.b,null,Object(u.h)(k,{saved:o,dog:i,field:"fatherName",type:"text",title:Object(u.h)(O.c,{id:"dogs.father-name"},"Navn på far"),help:Object(u.h)(O.c,{id:"dogs.father-name-help"},"Navn på faren til denne hunden."),onInput:this.updateField}),Object(u.h)(k,{saved:o,dog:i,field:"fatherChipId",type:"text",title:Object(u.h)(O.c,{id:"dogs.father-chipid"},"Chip ID på far"),help:Object(u.h)(O.c,{id:"dogs.father-chipid-help"},"Chip ID til faren til denne hunden. Dersom hunden finnes blant dine hunder, så vil den bli koblet sammen."),onInput:this.updateField}),Object(u.h)(k,{saved:o,dog:i,field:"fatherComment",title:Object(u.h)(O.c,{id:"dogs.father-comment"},"Kommentar til far"),help:Object(u.h)(O.c,{id:"dogs.father-comment-help"},"Kommentar til faren til denne hunden."),onInput:this.updateField}))),"links"===s&&Object(u.h)(t,null,Object(u.h)(O.b,null,Object(u.h)(k,{saved:o,dog:i,field:"links",type:"text",icon:"fas fa-link",stores:this.props.stores,title:Object(u.h)(O.c,{id:"dogs.links"},"Linker"),help:Object(u.h)(O.c,{id:"dogs.links-help"},"Linker til denne hunden."),onInput:this.updateField,updateField:this.updateFieldValue}))),"achievements"===s&&Object(u.h)(t,null,Object(u.h)(O.b,null,Object(u.h)(k,{saved:o,dog:i,field:"achievements",type:"text",icon:"fas fa-clock",stores:this.props.stores,title:Object(u.h)(O.c,{id:"dogs.achievements"},"Bragder"),help:Object(u.h)(O.c,{id:"dogs.achievements-help"},"Bragder til denne hunden."),onInput:this.updateField,updateField:this.updateFieldValue}))),"advanced"===s&&Object(u.h)(t,null,Object(u.h)(O.b,null,Object(u.h)(k,{saved:o,dog:i,field:"files",type:"file",icon:"fas fa-file",stores:this.props.stores,title:Object(u.h)(O.c,{id:"dogs.files"},"Files"),help:Object(u.h)(O.c,{id:"dogs.files-help"},"Filer til denne hunden."),onInput:this.updateField,updateField:this.updateFieldValue}))))))},s}(u.Component))||h;e.a=T}).call(this,s("hosL").Fragment)},AEg1:function(t,e,s){"use strict";(function(t){function a(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,a)}return s}function n(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}var o,i=s("hosL"),r=s("Utv1"),c=s("/eY4"),l=s("OhSV"),d=s("go65"),h=s("om2D"),u=s("ZOvn"),b={showAddImage:!1,showTeamChange:!1,showChangeVisibility:!1,showChangeType:!1,sendButtonEnabled:!0},p=Object(c.a)(o=function(e){function s(t){var s;return(s=e.call(this,t)||this).beforeImagesUploaded=function(){s.setState({sendButtonEnabled:!1})},s.afterImagesUploaded=function(){s.setState({sendButtonEnabled:!0})},s.addStory=function(){return new Promise((function(t,e){var a,n,o,i,r,c,l,d,h,b,p,m,f,O,g;return o=void 0===(n=(a=s.state).story)?{}:n,i=a.showAddImage,l=void 0===(c=(r=s.props).callback)?function(){}:c,h=void 0===(d=r.hashTags)?[]:d,b=r.postfix,m=void 0===(p=r.topic)?"team-"+o.team:p,f=s.props.stores.storyStore,a.sendButtonEnabled&&o.body?(s.setState({sendButtonEnabled:!1}),O=o.body,b&&(O+="\n\n"+b),h&&h.length>0&&(O+="\n\n"+h.map((function(t){return"#"+t})).join(" ")),Promise.resolve(f.insert({type:o.type,title:o.title,body:O,pinned:o.pinned,images:o.images,public:o.public?1:0,team:o.team,urlText:o.urlText,url:o.url,currency:o.currency,price:o.price,code:o.code,country:o.country,region:o.region,startDate:o.startDate,endDate:o.endDate,topic:m})).then(function(a){try{if((g=a)&&201===g.status)return Promise.resolve(f.loadPublicFeed({hashtags:h})).then(function(){try{return s.setState({story:{type:1,title:"",body:"",pinned:null,images:[],public:1,urlText:"",url:"",currency:"",price:null,code:"",country:"",region:"",startDate:null,endDate:null}},(function(){u.a.resizeTextarea(s.inputRef.newStoryBody),i&&s.addImage()})),l(g.data),n.call(this)}catch(t){return e(t)}}.bind(this),e);function n(){return s.setState({sendButtonEnabled:!0}),t()}return n.call(this)}catch(t){return e(t)}}.bind(this),e)):t(!1)}))},s.addImages=function(t){var e,a=s.state.story;(e=a.images).push.apply(e,t.value),s.setState({story:a})},s.removeImage=function(t){return new Promise((function(e){var a=s.state.story,n=t.target.parentElement.dataset.name||t.target.dataset.name;if(r.a.isArray(a.images)){var o=a.images.findIndex((function(t){return t.name===n}));o>-1&&a.images.splice(o,1)}return s.setState({story:a}),e()}))},s.addImage=function(){s.setState({showAddImage:!s.state.showAddImage})},s.changeVisibility=function(){s.setState({showChangeVisibility:!s.state.showChangeVisibility})},s.changePinned=function(){s.setState({showChangeVisibility:!s.state.showChangeVisibility})},s.changeType=function(){s.setState({showChangeType:!s.state.showChangeType})},s.toggleTeamChange=function(){s.setState({showTeamChange:!s.state.showTeamChange})},s.handleImageErrored=function(t){var e=t.target;e.onerror=null,setTimeout((function(){e.src+="?"+new Date}),1e3)},s.setPublicTeam=function(){var t=s.props.stores.userStore.findPublicTeams();if(r.a.isArray(t)&&t.length>0){var e=s.state.story;e.team=t[0].id,s.setState({story:e})}},s.setFocus=function(t){s.setState({hasFocus:!0}),u.a.resizeTextarea(t.target)},s.removeFocus=function(){s.setState({hasFocus:!1})},s.state=function(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?a(Object(s),!0).forEach((function(e){n(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):a(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}({story:{type:1,title:"",body:"",images:[],public:1,urlText:"",url:"",currency:"",price:0,code:"",country:"",region:"",startDate:"",endDate:""}},b),s.inputRef={},s}var o,c;c=e,(o=s).prototype=Object.create(c.prototype),o.prototype.constructor=o,o.__proto__=c;var p=s.prototype;return p.componentDidMount=function(){this.setPublicTeam()},p.render=function(){var e=this,s=this.props,a=s.col,n=void 0===a?12:a,o=s.offset,c=void 0===o?0:o,b=s.hashTags,p=void 0===b?[]:b,m=this.state,f=m.story,O=void 0===f?{}:f,g=m.showAddImage,j=m.showTeamChange,v=m.showChangeVisibility,y=m.showChangeType,w=m.sendButtonEnabled,x=m.hasFocus,k=this.props.stores,S=k.userStore,C=k.appState,I=S.user,D=void 0===I?{}:I,T=S.isAdmin,P=D.firstname?""+r.a.ucfirst(D.firstname,!0)+r.a.ucfirst(D.lastname,!0):""+r.a.ucfirst(D.email||"",!0),R=D.image||(D.images?D.images[0]:void 0);if(O.team){var E=parseInt(O.team,10),F=S.findTeam(E,!0);R=F.image||(F.images?F.images[0]:void 0)}var M=C.darkmode;return Object(i.h)("div",{class:"w-100 px-0"},Object(i.h)("div",{class:"row"},Object(i.h)("div",{class:"col-"+n+" offset-"+c+" col-sm-8 col-lg-6 offset-sm-2 offset-lg-3 rounded rounded-lg pt-3 pb-1 bg-"+(M?"black":"white")+" shadow-sm mb-1"},Object(i.h)("div",{class:"d-flex mb-0 position-relative w-100"},Object(i.h)("div",{class:"position-relative"},Object(i.h)("div",{class:"text-center border rounded-circle imageRounded imageRoundedSmall pointerCursor",style:(R?"background-image: url('"+R.s3SmallLink+"'); background-size: cover;":"")+" border-width: 3px !important;",onClick:this.toggleTeamChange},!R&&Object(i.h)("span",{class:"font-weight-lighter",style:"font-size: 15px;"},P)),Object(i.h)("div",{class:"position-absolute",style:"top: 16px; right: 0px;"},Object(i.h)("small",{class:"text-white",style:"font-size: 1.5em;"},Object(i.h)("i",{class:"fas fa-caret-down pointerCursor",onClick:this.toggleTeamChange})))),Object(i.h)("div",{class:"col pl-3 pr-0",style:"line-height: 1.2em;"},Object(i.h)("div",{class:"d-flex bd-highlight"},Object(i.h)("div",{class:"p-0 w-100 bd-highlight"},Object(i.h)("label",{class:"sr-only",for:"inlineFormInput"},Object(i.h)(l.c,{id:"story.body"},"Story")),Object(i.h)("div",{class:"border rounded rounded-lg position-relative"},Object(i.h)(l.b,null,Object(i.h)("textarea",{class:"form-control-plaintext px-2",type:"text",placeholder:Object(i.h)(l.c,{id:"story.write-body"},"Hva tenker du på?.."),onInput:Object(d.a)(this,"story.body"),onKeyUp:u.a.resizeTextarea,onFocus:this.setFocus,style:"height: 2.3em;",value:O.body,ref:function(t){return e.inputRef.newStoryBody=t}})),x&&Object(i.h)("div",{class:"position-absolute",style:"bottom: 8px; right: 10px; font-size: 1.2em;"},Object(i.h)("i",{class:"fas fa-image pointerCursor","data-id":O.id,onClick:this.addImage}),Object(i.h)("i",{class:"fas fa-"+(1===O.public?"globe-europe":"users")+" pointerCursor ml-2","data-id":O.id,onClick:this.changeVisibility}),T&&Object(i.h)("i",{class:"fas fa-cog pointerCursor ml-2","data-id":O.id,onClick:this.changeType}))),p&&p.length>0&&Object(i.h)(t,null,p.map((function(e){return Object(i.h)(t,null,Object(i.h)("span",{class:"badge badge-secondary mr-2 my-1"},Object(i.h)("a",{href:"/stories/tag/"+e,class:"text-white"},"#",e)))})))),Object(i.h)("div",{class:"p-0 pl-2 flex-shrink-1 bd-highlight pt-auto"},Object(i.h)("button",{type:"button",class:"btn btn-"+(w?"primary":"secondary")+" ml-1",disabled:!w,onClick:this.addStory},Object(i.h)("i",{class:"fas fa-paper-plane"})))))),Object(i.h)("div",null,Object(i.h)("div",{class:"row"},j&&Object(i.h)(t,null,Object(i.h)("div",{class:"col-12 text-center mt-2"},Object(i.h)("div",{class:"form-group"},Object(i.h)("small",null,Object(i.h)("select",{class:"custom-select custom-select-sm",id:"team",onInput:Object(d.a)(this,"story.team"),onChange:this.toggleTeamChange},Object(i.h)("option",{value:""},"-- ",Object(i.h)(l.c,{id:"story.team-choose"},"Velg team")," --"),r.a.isArray(D.teams)&&D.teams.map((function(t){var e=S.findTeam(t,!0);return e&&e.public?Object(i.h)("option",{value:e.id,selected:O.team==e.id?"selected":""},e.name):""})),!D.teams&&Object(i.h)(t,null,Object(i.h)("option",{value:""},"No public teams"))))))),v&&Object(i.h)(t,null,T&&Object(i.h)(t,null,Object(i.h)("div",{class:"col-12 text-center mt-2"},Object(i.h)("div",{class:"form-group"},Object(i.h)("small",null,Object(i.h)("label",{for:"pinned"},"Pinned to top:"),Object(i.h)("input",{id:"pinned",type:"checkbox",onInput:Object(d.a)(this,"story.pinned"),value:1,checked:O.pinned?1:0}))))),Object(i.h)("div",{class:"col-12 text-center mt-2"},Object(i.h)("div",{class:"form-group"},Object(i.h)("small",null,Object(i.h)("select",{class:"custom-select custom-select-sm",id:"team",onInput:Object(d.a)(this,"story.public"),value:O.public,onChange:this.changeVisibility},Object(i.h)("option",{value:0,selected:0==O.public?"selected":""},"👥 ",Object(i.h)(l.c,{id:"story.visibility-followers"},"Kun synlig for de som følger deg.")),Object(i.h)("option",{value:1,selected:1==O.public?"selected":""},"🌍 ",Object(i.h)(l.c,{id:"story.visibility-public"},"Synlig for alle som bruker appen."))))))),y&&Object(i.h)(t,null,Object(i.h)("div",{class:"col-12 text-center mt-2"},Object(i.h)("div",{class:"form-group"},Object(i.h)("small",null,Object(i.h)("select",{class:"custom-select custom-select-sm",id:"team",onInput:Object(d.a)(this,"story.type"),value:O.type,onChange:this.changeType},Object(i.h)("option",{value:""},"-- ",Object(i.h)(l.c,{id:"story.type-choose"},"Velg type")," --"),Object(i.h)("option",{value:1,selected:1==O.type?"selected":""},"✍️ ",Object(i.h)(l.c,{id:"story.type-regular"},"Vanlig")),Object(i.h)("option",{value:2,selected:2==O.type?"selected":""},"🚀 ",Object(i.h)(l.c,{id:"story.type-ad"},"Annonse")),Object(i.h)("option",{value:3,selected:3==O.type?"selected":""},"📄 ",Object(i.h)(l.c,{id:"story.type-article"},"Artikkel"))))))),g&&Object(i.h)(t,null,Object(i.h)("div",{class:"col-12 text-center mt-2"},Object(i.h)("div",{class:"container-fluid"},Object(i.h)("div",{class:"row"},r.a.isArray(O.images)&&O.images.map((function(t){return Object(i.h)("div",{class:"col-3 p-1"},Object(i.h)("img",{src:t.s3SmallLink,class:"img-fluid",onError:e.handleImageErrored}),Object(i.h)("button",{class:"btn btn-sm btn-link",onClick:e.removeImage,"data-name":t.name},Object(i.h)("i",{class:"fas fa-trash"})," Del"))})))),Object(i.h)(h.a,{object:O,updateField:this.addImages,before:this.beforeImagesUploaded,after:this.afterImagesUploaded,autoOpen:!0}))),O.type>1&&Object(i.h)(t,null,Object(i.h)("div",{class:"col-12 mt-3"},Object(i.h)("label",null,Object(i.h)(l.c,{id:"story.url-text"},"URL text")),Object(i.h)("div",{class:"form-group"},Object(i.h)("small",null,Object(i.h)("input",{class:"form-control",type:"text",name:"urlText",onInput:Object(d.a)(this,"story.urlText"),value:O.urlText})))),Object(i.h)("div",{class:"col-12 mt-3"},Object(i.h)("label",null,Object(i.h)(l.c,{id:"story.url"},"URL")),Object(i.h)("div",{class:"form-group"},Object(i.h)("small",null,Object(i.h)("input",{class:"form-control",type:"text",name:"url",onInput:Object(d.a)(this,"story.url"),value:O.url}))))),2==O.type&&Object(i.h)(t,null,Object(i.h)("div",{class:"col-12 mt-3"},Object(i.h)("label",null,Object(i.h)(l.c,{id:"story.code"},"Code")),Object(i.h)("div",{class:"form-group"},Object(i.h)("small",null,Object(i.h)("input",{class:"form-control",type:"text",name:"code",onInput:Object(d.a)(this,"story.code"),value:O.code})))),Object(i.h)("div",{class:"col-12"},Object(i.h)("label",null,Object(i.h)(l.c,{id:"story.region"},"Region")),Object(i.h)("div",{class:"form-group"},Object(i.h)("small",null,Object(i.h)("input",{class:"form-control",type:"text",name:"region",onInput:Object(d.a)(this,"story.region"),value:O.region})))),Object(i.h)("div",{class:"col-12"},Object(i.h)("label",null,Object(i.h)(l.c,{id:"story.country"},"Country")),Object(i.h)("div",{class:"form-group"},Object(i.h)("small",null,Object(i.h)("input",{class:"form-control",type:"text",name:"country",onInput:Object(d.a)(this,"story.country"),value:O.country})))),Object(i.h)("div",{class:"col-4"},Object(i.h)("label",null,Object(i.h)(l.c,{id:"story.currency"},"Currency")),Object(i.h)("div",{class:"form-group"},Object(i.h)("small",null,Object(i.h)("input",{class:"form-control",type:"text",name:"currency",onInput:Object(d.a)(this,"story.currency"),value:O.currency})))),Object(i.h)("div",{class:"col-8"},Object(i.h)("label",null,Object(i.h)(l.c,{id:"story.price"},"Price")),Object(i.h)("div",{class:"form-group"},Object(i.h)("small",null,Object(i.h)("input",{class:"form-control",type:"text",name:"price",onInput:Object(d.a)(this,"story.price"),value:O.price}))))))))))},s}(i.Component))||o;e.a=p}).call(this,s("hosL").Fragment)},B95u:function(t,e,s){"use strict";(function(t){function a(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,a)}return s}function n(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?a(Object(s),!0).forEach((function(e){o(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):a(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}function o(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}var i,r=s("hosL"),c=s("Utv1"),l=s("/eY4"),d=s("cneo"),h=s("OhSV"),u=s("fh8t"),b=s.n(u),p=s("go65"),m=s("5uob"),f=(s("ETxl"),s("ZOvn")),O={showAddComment:{},showAllComments:!1,showAllReplies:{},viewImageIdx:{},likeComment:{},likeReply:{},showOriginal:{}},g=Object(l.a)(i=function(e){function s(t){var s;return(s=e.call(this,t)||this).addLikeComment=function(t){return new Promise((function(e,a){var n,o,i,r,c,l,d;return o=void 0===(n=s.props.callback)?function(){}:n,i=t.target.closest(".commentContainer").dataset.id,r=s.props.story,c=s.props.stores.storyStore,(l=s.state.likeComment)[i]=!0,s.setState({likeComment:l}),setTimeout((function(){var t=s.state.likeComment;delete t[i],s.setState({likeComment:t})}),1200),Promise.resolve(c.likeStoryComment({id:r.id,commentId:i})).then((function(t){try{return(d=t)&&200===d.status&&o({type:"likeComment",story:r,commentId:i,response:d}),e(!0)}catch(t){return a(t)}}),a)}))},s.likeReply=function(t){return new Promise((function(e,a){var n,o,i,r,c,l,d,h;return o=void 0===(n=s.props.callback)?function(){}:n,i=t.target.closest(".replyContainer").dataset.id,r=t.target.closest(".replyContainer").dataset.comment,c=s.props.story,l=s.props.stores.storyStore,(d=s.state.likeReply)[i]=!0,s.setState({likeReply:d}),setTimeout((function(){var t=s.state.likeReply;delete t[i],s.setState({likeReply:t})}),1200),Promise.resolve(l.likeStoryCommentReply({id:c.id,replyId:i,commentId:r})).then((function(t){try{return(h=t)&&200===h.status&&o({type:"likeReply",story:c,commentId:r,replyId:i,response:h}),e()}catch(t){return a(t)}}),a)}))},s.replyComment=function(t){return new Promise((function(e){var a=t.target.parentElement.dataset.id||t.target.dataset.id,n=s.state.showAddComment;return n[a]=!n[a],s.setState({showAddComment:n},(function(){s.inputRef[a]&&s.inputRef[a].focus()})),e()}))},s.toggleComments=function(){s.setState({showAllComments:!s.state.showAllComments})},s.toggleReplies=function(t){var e=t.target.parentElement.dataset.id||t.target.dataset.id,a=s.state.showAllReplies;a[e]=!a[e],s.setState({showAllReplies:a})},s.toggleMenu=function(t){var e=t.target.closest("i").dataset.id,a=s.state.showMenu,n=void 0===a?{}:a;n[e]=!n[e],s.setState({showDeleteComment:{},showEdit:{},showMenu:n})},s.toggleEdit=function(t){var e=t.target.closest("button").dataset,a=e.id,n=e.comment,o=s.state.showEdit,i=void 0===o?{}:o;i[a]=!i[a],s.setState({showDeleteComment:{},showEdit:i,showMenu:{},commentEditText:n})},s.toggleDeleteComment=function(t){var e=t.target.closest("button").dataset.id,a=s.state.showDeleteComment,n=void 0===a?{}:a;n[e]=!n[e],s.setState({showDeleteComment:n,showEdit:{},showMenu:{}})},s.deleteComment=function(t){return new Promise((function(e,a){var n;return n=t.target.closest("button").dataset.id,Promise.resolve(s.props.stores.storyStore.deleteCommentStory({id:s.props.story.id,commentId:n})).then((function(){try{return s.setState({commentEditText:"",showDeleteComment:{},showEdit:{},showMenu:{}}),e()}catch(t){return a(t)}}),a)}))},s.deleteCommentReply=function(t){return new Promise((function(e,a){var n;return n=t.target.closest("button").dataset,Promise.resolve(s.props.stores.storyStore.deleteCommentReplyStory({id:s.props.story.id,commentId:n.commentid,replyId:n.id})).then((function(){try{return s.setState({commentEditText:"",showDeleteComment:{},showEdit:{},showMenu:{}}),e()}catch(t){return a(t)}}),a)}))},s.saveComment=function(t){return new Promise((function(e,a){var n;return n=t.target.closest("button").dataset.id,Promise.resolve(s.props.stores.storyStore.editCommentStory({id:s.props.story.id,commentId:n,comment:s.state.commentEditText})).then((function(){try{return s.setState({commentEditText:"",showDeleteComment:{},showEdit:{},showMenu:{}}),e()}catch(t){return a(t)}}),a)}))},s.saveCommentReply=function(t){return new Promise((function(e,a){var n;return n=t.target.closest("button").dataset,Promise.resolve(s.props.stores.storyStore.editCommentReplyStory({id:s.props.story.id,commentId:n.commentid,replyId:n.id,comment:s.state.commentEditText})).then((function(){try{return s.setState({commentEditText:"",showDeleteComment:{},showEdit:{},showMenu:{}}),e()}catch(t){return a(t)}}),a)}))},s.viewImage=function(t){var e=t.target.closest("img").dataset,a=s.state.viewImageIdx;a[e.id]=e.idx,s.setState({viewImageIdx:a})},s.translate=function(t){return new Promise((function(e,a){function n(){return s.setState({showOriginal:p,translatedText:f}),e()}var o,i,r,c,l,d,h,u,b,p,m,f,O;return t.preventDefault(),t.stopPropagation(),o=t.target.closest("button").dataset,c=s.props.story,d=(l=s.props.stores).storyStore,h=l.userStore.user,f=void 0===(m=(u=s.state).translatedText)?{}:m,(p=void 0===(b=u.showOriginal)?{}:b)[O=(r=o.commentid)+((i=o.replyid)?"-"+i:"")]=0,i?Promise.resolve(d.translateCommentReply({commentid:r,replyid:i,story:c,user:h})).then(function(t){try{return f[O]=t,n.call(this)}catch(t){return a(t)}}.bind(this),a):Promise.resolve(d.translateComment({commentid:r,story:c,user:h})).then(function(t){try{return f[O]=t,n.call(this)}catch(t){return a(t)}}.bind(this),a)}))},s.showOriginal=function(t){var e=t.target.closest("button").dataset,a=e.replyid,n=e.commentid;t.preventDefault(),t.stopPropagation();var o=s.state.showOriginal,i=void 0===o?{}:o;i[n+(a?"-"+a:"")]=1,s.setState({showOriginal:i})},s.displayTeam=function(t,e){t.preventDefault(),t.stopPropagation(),s.props.stores.appState.openDrawer("publicTeam",{teamId:e,height:"80vh"})},s.openInbox=function(t,e){t.preventDefault(),t.stopPropagation(),s.props.stores.appState.openDrawer("inboxDetail",{fromuser:e,height:"80vh"})},s.state=n(n({},O),{},{showAllComments:t.showAllComments}),s.inputRef={},s}var a,o;return o=e,(a=s).prototype=Object.create(o.prototype),a.prototype.constructor=a,a.__proto__=o,s.prototype.render=function(){var e,s=this,a=this.state,n=a.showAddComment,o=a.showAllComments,i=a.showAllReplies,l=a.viewImageIdx,u=a.showMenu,O=void 0===u?{}:u,g=a.showEdit,j=void 0===g?{}:g,v=a.showDeleteComment,y=void 0===v?{}:v,w=a.commentEditText,x=a.likeComment,k=a.showOriginal,S=void 0===k?{}:k,C=a.translatedText,I=void 0===C?{}:C,D=this.props,T=D.story,P=D.callback,R=void 0===P?function(){}:P,E=D.initCall,F=void 0===E?function(){}:E,M=D.compact,A=this.props.stores,L=A.userStore,N=A.storyStore,B=L.user,z=B.language,H=void 0===z?"en":z,U=[],_=0,V=0;return T.comments&&(_=T.comments.length,o?U=T.comments:(e=void 0!==M&&M?0:2,U=T.comments.slice(Math.max(_-e,0))),V=U.length),Object(r.h)("div",null,T&&c.a.isArray(U)&&U.reverse().map((function(a){var o=a.user,u=void 0===o?{}:o,g=N.findPublicTeamByMembers(u.id),v=f.a.displayNameShort(u),k=f.a.displayName(u),C=u.image||(u.images?u.images[0]:void 0),D=a.likes&&a.likes.findIndex((function(t){return t.user===B.id}))>-1,P=[],E=0,M=0;a.comments&&(E=a.comments.length,M=(P=i[a.id]?a.comments:a.comments.slice(0,e)).length);var A=[];if(a.images){var L=Object(d.i)(a.images);A.push.apply(A,L)}var z=l[a.id]?l[a.id]:0,U=A&&A[z]?A[z]:null,_=N.getCommentTranslations({story:T,commentid:a.id,targetLang:H})||I[a.id],V=_||a.comment;return S[a.id]&&(V=a.comment),Object(r.h)("div",{class:"row"},Object(r.h)("div",{class:"col-11 offset-1 d-flex mb-2 position-relative"},Object(r.h)("div",{class:"text-center border rounded-circle imageRounded imageRoundedSmall",style:(C?'background-image: url("'+C.s3SmallLink+'"); background-size: cover;':"")+" border-width: 3px !important;"},!u.image&&Object(r.h)("span",{class:"font-weight-lighter",style:"font-size: 15px;"},v)),Object(r.h)("div",{class:"flex-grow-1 pl-3 pt-0",style:"line-height: 1.2em;"},Object(r.h)("div",{class:"bg-light p-2 rounded rounded-lg position-relative"},B.id===u.id&&Object(r.h)(t,null,Object(r.h)("span",{class:"float-right font-weight-lighter text-muted"},Object(r.h)("i",{class:"fas fa-ellipsis-h",onClick:s.toggleMenu,"data-id":a.id}))),O[a.id]&&Object(r.h)(t,null,Object(r.h)("div",{class:"position-absolute bg-white p-2 border rounded rounded-lg shadow-sm",style:"top: 30px; right: 10px; width: 60%; z-index: 999999;"},Object(r.h)("button",{class:"btn btn-link btn-block text-left",onClick:s.toggleEdit,"data-id":a.id,"data-comment":a.comment},Object(r.h)("i",{class:"fas fa-edit"})," Edit"),Object(r.h)("hr",null),Object(r.h)("button",{class:"btn btn-link btn-block text-left",onClick:s.toggleDeleteComment,"data-id":a.id},Object(r.h)("i",{class:"fas fa-trash-alt"})," Delete"))),Object(r.h)("div",null,Object(r.h)("span",{style:"font-size: 0.95em;"},Object(r.h)("h5",{class:"font-weight-bold mb-2",style:"font-size: 1.0em;"},u.uuidv4&&u.uuidv4!==B.uuidv4?Object(r.h)(t,null,Object(r.h)("a",{href:"/inbox/"+u.uuidv4,onClick:function(t){return s.openInbox(t,u.uuidv4)}},k)):Object(r.h)(t,null,k),g&&g.length>0&&Object(r.h)(t,null,Object(r.h)("span",{class:"font-weight-lighter text-muted ml-1"},g.filter((function(t){return 1===t.public})).slice(0,1).map((function(e){return Object(r.h)(t,null,"- ",Object(r.h)("a",{href:"/teams/public/"+e.uuidv4,onClick:function(t){return s.displayTeam(t,e.uuidv4)}},e.name))}))))),j[a.id]?Object(r.h)(t,null,Object(r.h)("div",{class:"d-flex bd-highlight"},Object(r.h)("div",{class:"p-0 w-100 bd-highlight"},Object(r.h)("label",{class:"sr-only",for:"inlineFormInput"},Object(r.h)(h.c,{id:"comments.comment"},"Kommentar")),Object(r.h)("div",{class:"border rounded rounded-lg position-relative"},Object(r.h)(h.b,null,Object(r.h)("textarea",{class:"form-control-plaintext px-2",type:"text",placeholder:Object(r.h)(h.c,{id:"comments.write-comment"},"Skriv en kommentar..."),onInput:Object(p.a)(s,"commentEditText"),onKeyUp:f.a.resizeTextarea,onFocus:f.a.resizeTextarea,style:"height: 2.3em;",value:w})))),Object(r.h)("div",{class:"p-0 pl-2 flex-shrink-1 bd-highlight"},Object(r.h)("button",{type:"button",class:"btn btn-primary mb-2",onClick:s.saveComment,"data-id":a.id},Object(r.h)("i",{class:"fas fa-paper-plane"}))))):Object(r.h)(t,null,Object(r.h)(b.a,{markdown:f.a.replaceImages(V,a.images,H),markdownOpts:f.a.getMarkdownOptions()})),y[a.id]&&Object(r.h)("div",{class:"clearfix mt-3 mb-3"},Object(r.h)("button",{class:"btn btn-danger float-left",onClick:s.deleteComment,"data-id":a.id},Object(r.h)("i",{class:"fas fa-trash-alt"})," Delete"),Object(r.h)("button",{class:"btn btn-secondary float-right",onClick:s.toggleDeleteComment,"data-id":a.id},Object(r.h)("i",{class:"fas fa-times-circle"})," Cancel")))),Object(r.h)("div",null,Object(r.h)("div",{class:"container-fluid px-3 mt-1"},U&&Object(r.h)("div",{class:"clearfix row position-relative"},Object(r.h)("div",{class:"commentContainer col-12 px-0 overflow-hidden",style:"max-height: 60vh;",onDblclick:s.addLikeComment,"data-id":a.id},Object(r.h)("img",{loading:"lazy",class:"img-fluid",style:"min-width: 100px;",src:U.s3LargeLink})),x[a.id]&&Object(r.h)("span",{class:"likeHeart position-absolute text-white display-1",style:"top: calc(50% - 50px); left: calc(50% - 50px); width: 100px; height: 100px;"},Object(r.h)("i",{class:"fas fa-heart likeStory"}))),A&&A.length>1&&Object(r.h)("div",{class:"clearfix d-flex flex-wrap row"},c.a.isArray(A)&&A.map((function(e,n){return Object(r.h)(t,null,Object(r.h)("div",{class:"col px-0 overflow-hidden",style:"max-height: 100px; min-width: 100px;"},Object(r.h)("img",{loading:"lazy",class:"img-fluid border",style:"min-width: 100px;",src:e.s3SmallLink,onClick:s.viewImage,"data-id":a.id,"data-idx":n})))})))))),Object(r.h)("small",null,Object(r.h)("button",{class:"commentContainer btn btn-sm btn-link py-0 "+(D?"text-primary":""),onClick:s.addLikeComment,"data-id":a.id,disabled:D},D?Object(r.h)(h.c,{id:"comments.has-liked"},"Liked"):Object(r.h)(h.c,{id:"comments.like"},"Lik")),"-",Object(r.h)("button",{class:"btn btn-sm btn-link py-0",onClick:s.replyComment,"data-id":a.id},Object(r.h)(h.c,{id:"comments.comment-add"},"Kommentar")),a.language!==H&&Object(r.h)(t,null,"-",!S[a.id]&&_?Object(r.h)(t,null,Object(r.h)("button",{type:"button",class:"btn btn-sm btn-link","data-commentid":a.id,onClick:s.showOriginal},Object(r.h)("i",{class:"fas fa-cog"}),"  ",Object(r.h)(h.c,{id:"home.translate-show-original"},"Show original"))):Object(r.h)(t,null,Object(r.h)("button",{type:"button",class:"btn btn-sm btn-link",onClick:s.translate,"data-commentid":a.id},Object(r.h)("i",{class:"fas fa-cog"})," ",Object(r.h)(h.c,{id:"home.translate-to"},"See translation")))),"-",Object(r.h)("button",{class:"btn btn-sm btn-link py-0 disabled"},c.a.formatDistance(a.createdDate,new Date,{locale:"no-NB"}),a.updatedDate&&Object(r.h)(t,null,Object(r.h)("span",{class:"font-weight-light ml-2"},"(Edited ",c.a.formatDistance(a.updatedDate,new Date,{locale:"no-NB"}),")"))))),a.likes&&a.likes.length>0&&Object(r.h)("small",{class:"position-absolute bg-light shadow-sm rounded-lg py-0 px-1",style:"bottom: 20px; right: 15px;"},Object(r.h)("i",{class:"fas fa-thumbs-up text-primary"})," ",a.likes.length)),Object(r.h)("div",{class:"col-10 offset-2 mb-2"},a&&c.a.isArray(P)&&P.map((function(e){var n=e.user,o=void 0===n?{}:n,i=N.findPublicTeamByMembers(o.id),l=f.a.displayNameShort(o),d=f.a.displayName(o),u=o.image||(o.images?o.images[0]:void 0),m=e.likes&&e.likes.findIndex((function(t){return t.user===B.id}))>-1,g=N.getCommentReplyTranslations({story:T,commentid:a.id,replyid:e.id,targetLang:H})||I[a.id+"-"+e.id],v=g||e.comment;return S[a.id+"-"+e.id]&&(v=e.comment),Object(r.h)("div",{class:"row"},Object(r.h)("div",{class:"col-12 d-flex mb-2 position-relative"},Object(r.h)("div",{class:"text-center border rounded-circle imageRounded imageRoundedSmall",style:(u?'background-image: url("'+u.s3SmallLink+'"); background-size: cover;':"")+" border-width: 3px !important;"},!o.image&&Object(r.h)("span",{class:"font-weight-lighter",style:"font-size: 15px;"},l)),Object(r.h)("div",{class:"flex-grow-1 pl-3 pt-0",style:"line-height: 1.2em;"},Object(r.h)("div",{class:"bg-light p-2 rounded-lg position-relative"},B.id===o.id&&Object(r.h)(t,null,Object(r.h)("span",{class:"float-right font-weight-lighter text-muted"},Object(r.h)("i",{class:"fas fa-ellipsis-h",onClick:s.toggleMenu,"data-id":e.id}))),O[e.id]&&Object(r.h)(t,null,Object(r.h)("div",{class:"position-absolute bg-white p-2 border rounded rounded-lg shadow-sm",style:"top: 30px; right: 10px; width: 60%; z-index: 999999;"},Object(r.h)("button",{class:"btn btn-link btn-block text-left",onClick:s.toggleEdit,"data-id":e.id,"data-comment":e.comment},Object(r.h)("i",{class:"fas fa-edit"})," Edit"),Object(r.h)("hr",null),Object(r.h)("button",{class:"btn btn-link btn-block text-left",onClick:s.toggleDeleteComment,"data-id":e.id},Object(r.h)("i",{class:"fas fa-trash-alt"})," Delete"))),Object(r.h)("span",{style:"font-size: 0.95em;"},Object(r.h)("h5",{class:"font-weight-bold mb-2",style:"font-size: 1.0em;"},o.uuidv4&&o.uuidv4!==B.uuidv4?Object(r.h)(t,null,Object(r.h)("a",{href:"/inbox/"+o.uuidv4,onClick:function(t){return s.openInbox(t,o.uuidv4)}},d)):Object(r.h)(t,null,d),i&&i.length>0&&Object(r.h)(t,null,Object(r.h)("span",{class:"font-weight-lighter text-muted ml-2"},i.filter((function(t){return 1===t.public})).slice(0,1).map((function(e){return Object(r.h)(t,null,"- ",Object(r.h)("a",{href:"/teams/public/"+e.uuidv4,class:"mr-2",onClick:function(t){return s.displayTeam(t,e.uuidv4)}}," ",e.name))}))))),j[e.id]?Object(r.h)(t,null,Object(r.h)("div",{class:"d-flex bd-highlight"},Object(r.h)("div",{class:"p-0 w-100 bd-highlight"},Object(r.h)("label",{class:"sr-only",for:"inlineFormInput"},Object(r.h)(h.c,{id:"comments.comment"},"Kommentar")),Object(r.h)("div",{class:"border rounded rounded-lg position-relative"},Object(r.h)(h.b,null,Object(r.h)("textarea",{class:"form-control-plaintext px-2",type:"text",placeholder:Object(r.h)(h.c,{id:"comments.write-comment"},"Skriv en kommentar..."),onInput:Object(p.a)(s,"commentEditText"),onKeyUp:f.a.resizeTextarea,onFocus:f.a.resizeTextarea,style:"height: 2.3em;",value:w})))),Object(r.h)("div",{class:"p-0 pl-2 flex-shrink-1 bd-highlight"},Object(r.h)("button",{type:"button",class:"btn btn-primary mb-2",onClick:s.saveCommentReply,"data-commentid":a.id,"data-id":e.id},Object(r.h)("i",{class:"fas fa-paper-plane"}))))):Object(r.h)(t,null,Object(r.h)(b.a,{markdown:f.a.replaceImages(v,e.images,H),markdownOpts:f.a.getMarkdownOptions()})),y[e.id]&&Object(r.h)("div",{class:"clearfix mt-3 mb-3"},Object(r.h)("button",{class:"btn btn-danger float-left",onClick:s.deleteCommentReply,"data-id":e.id,"data-commentid":a.id},Object(r.h)("i",{class:"fas fa-trash-alt"})," Delete"),Object(r.h)("button",{class:"btn btn-secondary float-right",onClick:s.toggleDeleteComment,"data-id":e.id},Object(r.h)("i",{class:"fas fa-times-circle"})," Cancel")))),Object(r.h)("small",null,Object(r.h)("button",{class:"replyContainer btn btn-sm btn-link py-0 "+(m?"text-primary":""),onClick:s.likeReply,"data-comment":a.id,"data-id":e.id,disabled:m},m?Object(r.h)(h.c,{id:"comments.has-liked"},"Liked"):Object(r.h)(h.c,{id:"comments.like"},"Lik")),"-",Object(r.h)("button",{class:"btn btn-sm btn-link py-0",onClick:s.replyComment,"data-id":a.id},Object(r.h)(h.c,{id:"comments.comment-add"},"Kommentar")),e.language!==H&&Object(r.h)(t,null,"-",!S[a.id+"-"+e.id]&&g?Object(r.h)(t,null,Object(r.h)("button",{type:"button",class:"btn btn-sm btn-link","data-commentid":a.id,"data-replyid":e.id,onClick:s.showOriginal},Object(r.h)("i",{class:"fas fa-cog"}),"  ",Object(r.h)(h.c,{id:"home.translate-show-original"},"Show original"))):Object(r.h)(t,null,Object(r.h)("button",{type:"button",class:"btn btn-sm btn-link",onClick:s.translate,"data-commentid":a.id,"data-replyid":e.id},Object(r.h)("i",{class:"fas fa-cog"})," ",Object(r.h)(h.c,{id:"home.translate-to"},"See translation")))),"-",Object(r.h)("button",{class:"btn btn-sm btn-link py-0 disabled"},c.a.formatDistance(e.createdDate,new Date,{locale:"no-NB"}),e.updatedDate&&Object(r.h)(t,null,Object(r.h)("span",{class:"font-weight-light ml-2"},"(Edited ",c.a.formatDistance(e.updatedDate,new Date,{locale:"no-NB"}),")"))))),e.likes&&Object(r.h)("small",{class:"position-absolute bg-light shadow-sm rounded-lg py-0 px-1",style:"bottom: 20px; right: 15px;"},Object(r.h)("i",{class:"fas fa-thumbs-up text-primary"})," ",e.likes.length)))})),E-M>0&&Object(r.h)("div",null,Object(r.h)("button",{class:"btn btn-sm btn-link py-0",onClick:s.toggleReplies,"data-id":a.id},Object(r.h)(h.c,{id:"comments.show-more",fields:{more:E-M}},"Vis ",E-M," flere kommentarer...")))),n[a.id]&&Object(r.h)("div",{class:"col-11 offset-1 d-flex mb-2 position-relative"},Object(r.h)(m.a,{stores:s.props.stores,story:T,initCall:F,callback:R,commentId:a.id,inputRef:function(t){return s.inputRef[a.id]=t},inputRefObject:s.inputRef,key:"story-commentreply-"+a.id})))})),_-V>0&&Object(r.h)("div",null,Object(r.h)("button",{class:"btn btn-sm btn-link py-0",onClick:this.toggleComments},Object(r.h)(h.c,{id:"comments.show-more",fields:{more:_-V}},"Vis ",_-V," flere kommentarer..."))),o&&Object(r.h)("div",null,Object(r.h)("button",{class:"btn btn-sm btn-link py-0",onClick:this.toggleComments},Object(r.h)(h.c,{id:"comments.hide-all-comments"},"Skjul alle kommentarene."))))},s}(r.Component))||i;e.a=g}).call(this,s("hosL").Fragment)},HGwV:function(t,e,s){"use strict";(function(t){function a(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,a)}return s}function n(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}var o,i=s("hosL"),r=(s("QRet"),s("Utv1"),s("/eY4")),c=(s("OhSV"),s("Y3FI")),l=s("zYNi"),d=s("ZOvn"),h=d.a.marginTop(!0,!1),u=(d.a.marginTopBack(!1),d.a.marginBottom(),d.a.subMenuMarginTop(),{isLoading:!1}),b=Object(r.a)(o=function(e){function s(t){var s;return(s=e.call(this,t)||this).back=function(){var t=s.props,e=t.raceid;Object(c.route)("/app-races/"+e)},s.state=function(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?a(Object(s),!0).forEach((function(e){n(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):a(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}({},u),s.updateTimer={},s}var o,r;return r=e,(o=s).prototype=Object.create(r.prototype),o.prototype.constructor=o,o.__proto__=r,s.prototype.render=function(){var e=this.props.raceid;return Object(i.h)(t,null,Object(i.h)("div",{class:"container-fluid position-relative p-0",style:"margin-top: 0; height: calc(100vh - "+h+"); z-index: 9999;"},Object(i.h)(l.a,{stores:this.props.stores,raceid:e})))},s}(i.Component))||o;e.a=b}).call(this,s("hosL").Fragment)},ISGx:function(t,e,s){"use strict";(function(t){function a(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,a)}return s}function n(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?a(Object(s),!0).forEach((function(e){o(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):a(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}function o(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}var i,r=s("hosL"),c=s("Utv1"),l=s("/eY4"),d=s("cneo"),h=s("OhSV"),u=s("fh8t"),b=s.n(u),p=s("Y3FI"),m=s("s4FZ"),f=s("ZQlJ"),O=s("sqi2"),g=s("/922"),j=s("eQ6k"),v=s("+JSK"),y=s("vY+r"),w=s("nHdA"),x=s("irB3"),k=s("UwwE"),S=s("8Lgr"),C=s("QkTp"),I=s("ZOvn"),D={showAddComment:{},likeWorkout:{},idxSuggestion:0,idxAd:4,limit:15,offset:0,hasFollowSugguestions:!1,hasAd:!1,sessionid:(new Date).getTime()},T=Object(l.a)(i=function(e){function s(t){var s;return(s=e.call(this,t)||this).toggleDate=function(t){t.stopPropagation(),t.preventDefault(),s.setState({showDate:!s.state.showDate})},s.likeWorkout=function(t){return new Promise((function(e,a){var n,o,i,r;return n=parseInt(t.target.closest(".imageContainer").dataset.id,10),o=s.props.stores.workoutStore,(i=s.state.likeWorkout)[n]=!0,s.setState({likeWorkout:i}),setTimeout((function(){var t=s.state.likeWorkout;delete t[n],s.setState({likeWorkout:t})}),1200),Promise.resolve(o.likeWorkout({id:n})).then((function(t){try{return(r=t)&&200===r.status&&s.addLikeToFeed(n,r.data),e()}catch(t){return a(t)}}),a)}))},s.addCommentToFeed=function(t){var e=t.type,a=t.workout,n=t.response,o=t.commentId,i=t.replyId,r=s.props.holdingStore,c=void 0===r?"team":r;if("team"===c){var l=s.props.stores.teamStore;switch(e){case"likeComment":l.addLikeToComment({id:a.id,data:n.data,commentId:o});break;case"likeReply":l.addLikeToCommentReply({id:a.id,data:n.data,commentId:o,replyId:i});break;default:o?l.addCommentToWorkoutComment({id:a.id,data:n.data,commentId:o}):l.addCommentToWorkout({id:a.id,data:n.data})}}else if("story"===c){var d=s.props.stores.storyStore;switch(e){case"likeComment":d.workoutsAddLikeToComment({id:a.id,data:n.data,commentId:o});break;case"likeReply":d.workoutsAddLikeToCommentReply({id:a.id,data:n.data,commentId:o,replyId:i});break;default:o?d.workoutsAddCommentToWorkoutComment({id:a.id,data:n.data,commentId:o}):d.workoutsAddCommentToWorkout({id:a.id,data:n.data})}}},s.addLikeToFeed=function(t,e){var a=s.props.holdingStore,n=void 0===a?"team":a;if("team"===n)s.props.stores.teamStore.addLikeToWorkout({id:t,data:e});else if("story"===n){s.props.stores.storyStore.workoutsAddLikeToWorkout({id:t,data:e})}},s.toggleAddComment=function(t){var e=t.target.closest("button").dataset.id,a=s.state.showAddComment;a[e]?delete a[e]:a[e]=!0,s.setState({showAddComment:a},(function(){s.inputRef[e]&&s.inputRef[e].focus()}))},s.shareLink=function(t){var e=t.target.closest("button").dataset;s.props.stores.appState.shareUrl({url:e.url,title:e.title,text:e.text})},s.showWorkoutDetail=function(t){if("a"===t.target.localName)return!1;var e=t.target.closest("#workoutDetail");if(e){var s=e.dataset.id;s&&(console.log({target:e,id:s}),Object(p.route)("/workouts/public/"+s))}},s.translate=function(t){return new Promise((function(e,a){var n,o,i,r,c,l,d;return t.preventDefault(),t.stopPropagation(),o=void 0===(n=s.props.feed)?{}:n,r=(i=s.props.stores).teamStore,c=i.userStore.user,Promise.resolve(r.translate({object:o,user:c,field:"name"})).then(function(t){try{if(l=t,o.comment)return Promise.resolve(r.translate({object:o,user:c,field:"comment"})).then(function(t){try{return d=t,n.call(this)}catch(t){return a(t)}}.bind(this),a);function n(){return s.setState({showOriginal:0,translatedTextName:l,translatedTextComment:d}),e()}return n.call(this)}catch(t){return a(t)}}.bind(this),a)}))},s.showOriginal=function(t){t.preventDefault(),t.stopPropagation(),s.setState({showOriginal:1})},s.displayTeam=function(t,e){t.preventDefault(),t.stopPropagation(),s.props.stores.appState.openDrawer("publicTeam",{teamId:e,height:"80vh"})},s.openInbox=function(t,e){t.preventDefault(),t.stopPropagation(),s.props.stores.appState.openDrawer("inboxDetail",{fromuser:e,height:"80vh"})},s.state=n({},D),s.inputRef={},s.containerRef=null,s}var a,o;return o=e,(a=s).prototype=Object.create(o.prototype),a.prototype.constructor=a,a.__proto__=o,s.prototype.render=function(){var e,s=this,a=this.props,o=a.feed,i=a.onTeamClick,l=void 0===i?function(){}:i,u=a.onUserClick,p=void 0===u?function(){}:u,D=a.onDogClick,T=void 0===D?function(){}:D,P=a.holdingStore,R=void 0===P?"team":P,E=this.state,F=E.showAddComment,M=E.showDate,A=E.likeWorkout,L=E.showOriginal,N=E.translatedTextName,B=E.translatedTextComment,z=this.props.stores,H=z.teamStore,U=z.storyStore,_=z.userStore,V=z.appState,q=_.user,K=_.isAdmin,W=q.language,Y=void 0===W?"en":W,G=V.hasShareApi,Z={},J={};if("team"===R)Z=H.findPublicTeam(o.team),J=H.findPublicUser(o.user)||{},e=H.publicDogs;else if("story"===R){Z=U.findPublicTeam(o.team),J=U.findPublicUser(o.user)||{},e=U.publicDogs}_.findTeamAmbition({ambition:Z.ambitions,language:Y});var Q,X,$=_.findTeamType({type:Z.type,language:Y}),tt=!(!Z||!Z.members)&&Z.members.some((function(t){return t===q.id})),et=I.a.getImage({user:J,team:Z,object:o,priority:"user"}),st=o.likes,at=o.comments,nt=o.likes&&o.likes.findIndex((function(t){return t.user===q.id}))>-1,ot=Z&&Z.followers?Z.followers.length:0,it=Z.members&&Z.members.indexOf(q.id)>-1,rt=Z&&Z.followers&&Z.followers.indexOf(q.id)>-1,ct=Z.followRequests&&Z.followRequests.findIndex((function(t){return t.id===q.id}))>-1,lt=_.findEquipment({equipment:o.equipment,language:Y}),dt=_.findEquipment({equipment:o.equipment,field:"icon"}),ht=o.gpxInfo,ut=void 0===ht?{}:ht;J&&(I.a.displayNameShort(J),I.a.displayName(J),Q=I.a.displayName(J),J.settings&&J.uuidv4!==q.uuidv4&&(X=J.settings.hideProfile?null:"/inbox/"+J.uuidv4));var bt=[];if(o.mapImage&&bt.push(n(n({},o.mapImage),{},{type:"map"})),o.images){var pt=Object(d.i)(o.images);bt.push.apply(bt,pt)}var mt=o.currentLocationGeocode,ft=void 0===mt?{}:mt,Ot=I.a.getViews(o.statistics),gt=I.a.getAdminData(o.statistics);if(!Z||!Z.name)return"";var jt=I.a.getTranslation({object:o,targetLang:Y,field:"name"})||N,vt=jt||o.name,yt=I.a.getTranslation({object:o,targetLang:Y,field:"comment"})||B||o.comment;return L&&(vt=o.name,yt=o.comment),Object(r.h)(t,null,Object(r.h)("div",{class:"d-flex position-relative"},Object(r.h)("div",{class:"text-center"},Object(r.h)("div",{class:"position-relative text-center border rounded-circle imageRounded imageRoundedMedium",style:et?'background-image: url("'+et+'"); background-size: cover;':""},!et&&Object(r.h)("i",{class:"fas fa-users text-muted mt-2",style:"font-size: 20px;"}))),Object(r.h)("div",{class:"flex-grow-1 pl-3 text-overflow",style:"line-height: 1.2em;"},Object(r.h)("span",{class:"badge badge-pill badge-secondary float-right"},$),Object(r.h)("h5",{class:"mb-1 position-relative",style:"line-height: 1.0em;"},Z.public?Object(r.h)(t,null,Object(r.h)("a",{href:"/teams/public/"+Z.uuidv4,onClick:function(t){return s.displayTeam(t,Z.uuidv4)},class:"stretched-link"},Z.name)):Object(r.h)(t,null,Z.name)),Object(r.h)("div",{class:"mb-2"},o.date&&Object(r.h)("small",{class:"text-muted",onClick:this.toggleDate},M?c.a.formatDate(o.date,{locale:"no-NB",hour12:!1,hour:"2-digit",minute:"2-digit"}):c.a.formatDistance(o.date,new Date,{locale:"no-NB"})),1===o.public?Object(r.h)(t,null,Object(r.h)("small",{class:"ml-2 text-muted"},Object(r.h)("i",{class:"fas fa-globe-europe"}))):Object(r.h)(t,null,Object(r.h)("small",{class:"ml-2 text-muted"},Object(r.h)("i",{class:"fas fa-users"})," (",c.a.format(ot),")")),Q&&Object(r.h)(t,null,Object(r.h)("small",{class:"ml-2 text-muted"},X?Object(r.h)(t,null,Object(r.h)("i",{class:"fas fa-user"})," ",Object(r.h)("a",{href:X,onClick:function(t){return s.openInbox(t,J.uuidv4)}},Q)):Object(r.h)(t,null,Object(r.h)("i",{class:"fas fa-user"})," ",Q))),Object(r.h)("small",{class:"text-muted"},o.equipment>0&&Object(r.h)(t,null,Object(r.h)("i",{class:dt+" ml-2"})," ",lt),o.dogs>0&&Object(r.h)(t,null,Object(r.h)("i",{class:"fas fa-dog ml-2"})," ",o.dogs.length),o.track>0&&Object(r.h)(t,null,Object(r.h)("i",{class:"fas fa-map-marked text-"+(o.track>0?"success":"danger")+" ml-2"})),o.sledWeight>0&&Object(r.h)(t,null,Object(r.h)("i",{class:"fas fa-sleigh ml-2"})," ",Object(r.h)(k.a,{stores:this.props.stores,value:o.sledWeight})),0!==o.temperature&&Object(r.h)(t,null,Object(r.h)("i",{class:"fas fa-temperature-low ml-2"})," ",Object(r.h)(C.a,{stores:this.props.stores,value:o.temperature})),o.dogs&&o.dogs.length>0&&Object(r.h)(t,null,Object(r.h)("i",{class:"fas fa-dog ml-2"})," ",c.a.format(o.dogs.length,0)),ft&&ft.formattedCounty&&Object(r.h)(t,null,Object(r.h)("i",{class:"fas fa-map-marker-alt ml-2"})," ",ft.formattedCounty),o.moonIllumination&&o.moonIllumination.phaseIcon&&Object(r.h)("span",{class:"float-right ml-2"},o.moonIllumination.phaseIcon))),K&&Object(r.h)("div",{class:"d-flex flex-row flex-nowrap bg-light border-top border-bottom py-2",style:"overflow: auto;"},Object(r.h)("small",{class:"text-muted mr-2"},"Adm:"),ft&&ft.formatted_address&&Object(r.h)(t,null,Object(r.h)("small",{class:"text-muted"},Object(r.h)("i",{class:"fas fa-map-marker-alt"})," ",ft.formatted_address)),J.deviceInfo&&Object(r.h)(t,null,Object(r.h)("span",{class:"badge badge-secondary ml-1 float-right font-weight-light"},["platform","manufacturer","model"].map((function(e){return Object(r.h)(t,null,Object(r.h)("span",{class:"ml-1 text-white"},J.deviceInfo[e]))})))),gt&&Object(r.h)(t,null,Object(r.h)("small",{class:"ml-2 text-muted"},"V: ",gt.count),Object(r.h)("small",{class:"ml-2 text-muted"},"R: ",gt.ranking," ",c.a.isNumber(gt.rankingTrend)&&Object(r.h)(t,null,Object(r.h)("i",{class:I.a.getClassForTrend(gt.rankingTrend)}))),Object(r.h)("small",{class:"ml-2 text-muted"},"D: ",c.a.format(gt.durationAvg/1e3,1),"s ",c.a.isNumber(gt.durationAvgTrend)&&Object(r.h)(t,null,Object(r.h)("i",{class:I.a.getClassForTrend(gt.durationAvgTrend)}))),o.statisticsCurrent&&o.statisticsCurrent.totalInteractions>0&&Object(r.h)("small",{class:"ml-2 text-muted"},"S: ",c.a.format(o.statisticsCurrent.totalInteractions,0)),o.shadowTags&&o.shadowTags.map((function(e){return Object(r.h)(t,null,Object(r.h)("span",{class:"badge badge-secondary ml-2 float-right font-weight-light"},e))})))))),Object(r.h)("div",{class:"container-fluid px-0 mt-1"},Object(r.h)("div",{class:"row"},Object(r.h)(m.a,{stores:this.props.stores,images:bt,id:o.id,dblClick:this.likeWorkout,likeRef:A}))),o.dogs&&o.dogs.length>0&&Object(r.h)("div",{class:"container-fluid px-0 mt-1"},Object(r.h)("div",{class:"row pt-2"},Object(r.h)(f.a,{stores:this.props.stores,dogs:o.dogs,allDogs:e,onDogClick:T}))),Object(r.h)("div",{class:"d-flex justify-content-between bg-light rounded-lg px-2"},o.distanceKm>0&&Object(r.h)("div",{class:"mr-2 text-center"},Object(r.h)("div",{class:"text-overflow text-muted"},Object(r.h)("small",null,Object(r.h)("i",{class:"fas fa-road"})," ",Object(r.h)(h.c,{id:"workout.calendar.distance"},"Distanse"))),Object(r.h)("div",{class:"text-overflow font-weight-light",style:"font-size: 1.2em;"},Object(r.h)(S.a,{stores:this.props.stores,value:o.distanceKm}))),o.elevation>0&&Object(r.h)("div",{class:"mr-2 text-center"},Object(r.h)("div",{class:"text-overflow text-muted"},Object(r.h)("small",null,Object(r.h)("i",{class:"fas fa-mountain"})," ",Object(r.h)(h.c,{id:"workout.calendar.ascend"},"Høydemeter"))),Object(r.h)("div",{class:"text-overflow font-weight-light",style:"font-size: 1.2em;"},Object(r.h)(x.a,{stores:this.props.stores,value:o.elevation}))),o.duration>0&&Object(r.h)("div",{class:"mr-2 text-center"},Object(r.h)("div",{class:"text-overflow text-muted"},Object(r.h)("small",null,Object(r.h)("i",{class:"fas fa-clock"})," ",Object(r.h)(h.c,{id:"workout.calendar.duration"},"Varighet"))),Object(r.h)("div",{class:"text-overflow font-weight-light",style:"font-size: 1.2em;"},c.a.secToHms(o.duration,!0))),o.speedAvg>0&&Object(r.h)("div",{class:"text-center"},Object(r.h)("div",{class:"text-overflow text-muted"},Object(r.h)("small",null,Object(r.h)("i",{class:"fas fa-tachometer-alt"})," ",Object(r.h)(h.c,{id:"workout.calendar.avg-speed"},"Snittfart"))),Object(r.h)("div",{class:"text-overflow font-weight-light",style:"font-size: 1.2em;"},ut&&ut.avgGpsMovingSpeed>0?Object(r.h)(t,null,Object(r.h)(w.a,{stores:this.props.stores,value:3.6*ut.avgGpsMovingSpeed})):Object(r.h)(t,null,Object(r.h)(w.a,{stores:this.props.stores,value:o.speedAvg}))))),Object(r.h)("div",{class:"row mt-2"},Object(r.h)("div",{id:"workoutDetail",class:"clearfix col-12 font-weight-bold",style:"font-size: 1.2em;",onClick:this.showWorkoutDetail,"data-id":o.uuidv4},Object(r.h)(b.a,{markdown:I.a.replaceImages(vt,o.images,Y),markdownOpts:I.a.getMarkdownOptions()})),Object(r.h)("div",{class:"clearfix col-12"},Object(r.h)(b.a,{markdown:I.a.replaceImages(yt,o.images,Y),markdownOpts:I.a.getMarkdownOptions()})),o.language!==Y&&Object(r.h)(t,null,!L&&jt?Object(r.h)(t,null,Object(r.h)("button",{type:"button",class:"btn btn-sm btn-link text-muted",onClick:this.showOriginal},Object(r.h)("i",{class:"fas fa-cog"}),"  ",Object(r.h)(h.c,{id:"home.translate-show-original"},"Show original"))):Object(r.h)(t,null,Object(r.h)("button",{type:"button",class:"btn btn-sm btn-link text-muted",onClick:this.translate},Object(r.h)("i",{class:"fas fa-cog"})," ",Object(r.h)(h.c,{id:"home.translate-to"},"See translation"))))),Object(r.h)("div",{class:"mt-2"},Object(r.h)(v.a,{stores:this.props.stores,likes:st,comments:at,type:"team",onTeamClick:l,onUserClick:p})),!it&&!rt&&!ct&&Object(r.h)("div",{class:"clearfix mb-2"},Object(r.h)(j.a,{stores:this.props.stores,team:Z,buttonOnly:!0})),Object(r.h)("div",null,Object(r.h)("div",{class:"row"},Object(r.h)("div",{class:"col text-center"},Object(r.h)("button",{type:"button",class:"imageContainer btn btn-sm btn-outline-"+(nt?"primary":"secondary")+" btn-lg btn-block "+(nt?"text-primary":"")+" text-overflow","data-id":o.id,onClick:this.likeWorkout},Object(r.h)("i",{class:(nt?"text-primary fas":"far")+" fa-thumbs-up"})," ",Object(r.h)(h.c,{id:"comments.like"},"Lik"))),Object(r.h)("div",{class:"col text-center"},Object(r.h)("button",{type:"button",class:"btn btn-sm btn-outline-secondary btn-lg btn-block text-overflow","data-id":o.id,onClick:this.toggleAddComment},Object(r.h)("i",{class:"fas fa-comment"})," ",Object(r.h)(h.c,{id:"comments.comment-add"},"Kommentar"))),G?Object(r.h)(t,null,Object(r.h)("div",{class:"col text-center"},Object(r.h)("button",{class:"btn btn-sm btn-outline-secondary btn-lg btn-block text-overflow",onClick:this.shareLink,"data-url":"https://themusher.app/share/workout/"+o.uuidv4,"data-title":"title: "+o.title},Object(r.h)("i",{class:"fas fa-share"})," ",Object(r.h)(h.c,{id:"story.share"},"Del")))):Object(r.h)(t,null,Object(r.h)("div",{class:"col text-center"},Object(r.h)("a",{class:"btn btn-sm btn-outline-secondary btn-lg btn-block text-overflow",href:"https://themusher.app/share/workout/"+o.uuidv4,target:"_blank",rel:"noreferrer","data-native":!0},Object(r.h)("i",{class:"fas fa-share"})," ",Object(r.h)(h.c,{id:"story.share"},"Del")))))),Ot>0&&Object(r.h)(t,null,Object(r.h)("div",{class:"mt-2"},Object(r.h)(y.a,{stores:this.props.stores,views:Ot,object:o,type:"team",isTeamAdmin:tt,isAdmin:K,onTeamClick:l,onUserClick:p}))),Object(r.h)("div",{class:"mt-2"},F[o.id]&&Object(r.h)(g.a,{stores:this.props.stores,workout:o,inputRef:function(t){return s.inputRef[o.id]=t},inputRefObject:this.inputRef,col:"12",offset:"0",showAvatar:!0,extraClass:"px-0",callback:this.addCommentToFeed}),Object(r.h)(O.a,{stores:this.props.stores,workout:o,col:"12",offset:"0",compact:!1,callback:this.addCommentToFeed})))},s}(r.Component))||i;e.a=T}).call(this,s("hosL").Fragment)},J9nn:function(t,e,s){"use strict";(function(t){var a,n=s("hosL"),o=(s("Utv1"),s("/eY4")),i=s("OhSV"),r=(s("Y3FI"),s("fh8t"),s("go65"),s("ZOvn"),Object(o.a)(a=function(e){function s(t){var s;return(s=e.call(this,t)||this).subscribeNotificationTopic=function(t){return new Promise((function(e,a){var n,o;return void 0===(o=(n=s.props.stores.userStore).user.notificationTopics)?{}:o,1,Promise.resolve(n.setNotificationTopic({field:"notificationTopics."+t,value:1})).then((function(){try{return e()}catch(t){return a(t)}}),a)}))},s.state={},s.inputRef={},s.updateTimer={},s}var a,o;return o=e,(a=s).prototype=Object.create(o.prototype),a.prototype.constructor=a,a.__proto__=o,s.prototype.render=function(){var e=this,s=this.props.stores,a=s.userStore,o=a.user,r=void 0===o?{}:o,c=r.notificationTopics,l=void 0===c?{}:c,d=this.props.race,h="race-"+(void 0===d?{}:d).id;return l&&l[h]?"":Object(n.h)(t,null,Object(n.h)("div",{class:"row"},Object(n.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-0 mb-2"},Object(n.h)("button",{class:"btn btn-block btn-info btn-lg",onClick:function(){return e.subscribeNotificationTopic(h)}},Object(n.h)("i",{class:"fas fa-bell"})," ",Object(n.h)(i.c,{id:"race.notifications"},"Subscribe to race notifications")))))},s}(n.Component))||a);e.a=r}).call(this,s("hosL").Fragment)},KOz6:function(t,e,s){"use strict";(function(t){function a(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,a)}return s}function n(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?a(Object(s),!0).forEach((function(e){o(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):a(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}function o(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}var i,r=s("hosL"),c=s("/eY4"),l=(s("cneo"),s("Utv1")),d=s("OhSV"),h=s("go65"),u=Object(c.a)(i=function(e){function s(t){var s;return(s=e.call(this,t)||this).handleAdd=function(){var t=s.props;(0,t.updateField)({id:t.object.id,field:t.field,value:n({},s.state.data)}),s.setState({data:{name:"",description:"",url:""}})},s.removeAchievement=function(t){return new Promise((function(e){var a=s.props.stores.dogStore,n=s.props.object,o=t.target.closest("button").dataset;return a.removeAchievement({id:n.id,name:o.name,achievementId:o.id}),e()}))},s.state={data:{}},s}var a,o;return o=e,(a=s).prototype=Object.create(o.prototype),a.prototype.constructor=a,a.__proto__=o,s.prototype.render=function(){var e=this,s=this.state.data,a=this.props,n=a.showFiles,o=void 0===n||n,i=a.object,c=void 0===i?{}:i;return Object(r.h)("div",{class:"row"},Object(r.h)("div",{class:"col-12 mt-3"},o&&Object(r.h)(t,null,Object(r.h)("div",{class:"container-fluid"},Object(r.h)("div",{class:"row"},(!c.achievements||0===c.achievements.length)&&Object(r.h)(t,null,Object(r.h)("div",{class:"text-center text-muted"},Object(r.h)("div",{class:"display-1"},Object(r.h)("i",{class:"fas fa-trophy"})),Object(r.h)("h3",null,Object(r.h)(d.c,{id:"dogs.no-achievements-title"},"No achievements for this dog!")),Object(r.h)(d.c,{id:"dogs.no-achievements-text"},"You can add achievements to this dog. Ie. Memories, trips, tests, prices, races, etc."))),c.achievements&&c.achievements.map((function(t){return Object(r.h)("div",{class:"col-12 p-1"},Object(r.h)("span",{class:"font-weight-lighter mr-2"},l.a.isoDate(t.date,!1,!1,!0)),Object(r.h)("span",{class:"mr-2"},t.name),Object(r.h)("span",{class:"mr-2"},t.url),Object(r.h)("button",{class:"btn btn-sm btn-link float-right p-0",onClick:e.removeAchievement,"data-name":t.name,"data-id":t.id},Object(r.h)("i",{class:"fas fa-trash-alt"})," Del"))})))))),Object(r.h)("div",{class:"col-12 mt-3"},Object(r.h)("details",null,Object(r.h)("summary",null,Object(r.h)(d.c,{id:"dogs.achievement-add"},"Add new achievement")),Object(r.h)("div",{class:"form-group"},Object(r.h)("label",{for:"name"},Object(r.h)(d.c,{id:"dogs.achievement-name"},"Name")),Object(r.h)("input",{type:"text",class:"form-control",id:"name","aria-describedby":"nameHelp",onInput:Object(h.a)(this,"data.name"),value:s.name}),Object(r.h)("small",{id:"nameHelp",class:"form-text text-muted"},Object(r.h)(d.c,{id:"dogs.achievement-name-help"},"Name of achievement"))),Object(r.h)("div",{class:"form-group"},Object(r.h)("label",{for:"date"},Object(r.h)(d.c,{id:"dogs.achievement-date"},"Date")),Object(r.h)("input",{type:"date",class:"form-control",id:"date","aria-describedby":"dateHelp",onInput:Object(h.a)(this,"data.date"),value:s.date}),Object(r.h)("small",{id:"dateHelp",class:"form-text text-muted"},Object(r.h)(d.c,{id:"dogs.achievement-date-help"},"Date of achievement"))),Object(r.h)("div",{class:"form-group"},Object(r.h)("label",{for:"description"},Object(r.h)(d.c,{id:"dogs.achievement-description"},"Description")),Object(r.h)("input",{type:"text",class:"form-control",id:"description","aria-describedby":"descriptionHelp",onInput:Object(h.a)(this,"data.description"),value:s.description}),Object(r.h)("small",{id:"descriptionHelp",class:"form-text text-muted"},Object(r.h)(d.c,{id:"dogs.achievement-description-help"},"Description of achievement"))),Object(r.h)("div",{class:"form-group"},Object(r.h)("label",{for:"url"},Object(r.h)(d.c,{id:"dogs.achievement-url"},"Url")),Object(r.h)("input",{type:"text",class:"form-control",id:"url","aria-describedby":"urlHelp",onInput:Object(h.a)(this,"data.url"),value:s.url}),Object(r.h)("small",{id:"urlHelp",class:"form-text text-muted"},Object(r.h)(d.c,{id:"dogs.achievement-url-help"},"URL of achievement"))),Object(r.h)("button",{class:"btn btn-success",onClick:this.handleAdd},Object(r.h)(d.c,{id:"dogs.achievement-add"},"Add achievement")))))},s}(r.Component))||i;e.a=u}).call(this,s("hosL").Fragment)},LbFk:function(t,e,s){"use strict";(function(t){function a(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,a)}return s}function n(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?a(Object(s),!0).forEach((function(e){o(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):a(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}function o(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}function i(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}var r,c,l=s("hosL"),d=s("Utv1"),h=s("/eY4"),u=(s("OhSV"),s("fh8t"),s("go65")),b=s("cneo"),p=(s("ZOvn"),function(t){return function(e,s){return t.map((function(t){var a=1;return"-"===t[0]&&(a=-1,t=t.substring(1)),e[t]>s[t]?a:e[t]<s[t]?-a:0})).reduce((function(t,e){return t||e}),0)}}),m=Object(h.a)(r=function(e){function s(){return e.apply(this,arguments)||this}return i(s,e),s.prototype.render=function(){var e=this.props,s=e.lastResults,a=void 0===s?[]:s,n=e.currentClass,o=void 0===n?{}:n,i=e.selectedMusher,r=void 0===i?{}:i,c=e.selectResult,h=void 0===c?function(){}:c,u=this.props.stores.userStore.user,b=(void 0===u?{}:u).language,p=void 0===b?"en":b;return Object(l.h)(t,null,Object(l.h)("table",{class:"table table-striped"},Object(l.h)("thead",null,Object(l.h)("tr",null,Object(l.h)("th",{style:"width: 10%"},"Time"),Object(l.h)("th",{style:"width: 5%"},"Dir"),Object(l.h)("th",{style:"width: 75%"},"Checkpoint"),Object(l.h)("th",{style:"width: 10%"},"Dogs"))),Object(l.h)("tbody",null,a&&a.length>0&&a.map((function(e){var s=o.checkpoints?o.checkpoints.find((function(t){return t.id===e.checkpoint})):null,a="in"===e.direction&&s.requiredRestMinutes?s.timeEqualization?r.timeEqualization+s.requiredRestMinutes:s.requiredRestMinutes:null;new Date(new Date(e.timestamp).getTime()+6e4*a);return Object(l.h)(t,null,Object(l.h)("tr",{class:"resultLine","data-resultid":e.id,onClick:h},Object(l.h)("td",null,Object(l.h)("nobr",null,Object(l.h)("span",{class:"text-muted"},Object(l.h)("i",{class:"fas fa-clock"}))," ",d.a.formatDate(e.timestamp,{locale:p,year:"2-digit",month:"2-digit",hour12:!1,hour:"2-digit",minute:"2-digit"}))),Object(l.h)("td",null,"in"===e.direction&&Object(l.h)(t,null,Object(l.h)("i",{class:"fas fa-sign-in-alt mr-2 text-success"})),"out"===e.direction&&Object(l.h)(t,null,Object(l.h)("i",{class:"fas fa-sign-out-alt mr-2 text-info"})),"scratched"===e.direction&&Object(l.h)(t,null,Object(l.h)("i",{class:"fas fa-times mr-2 text-danger"}))),Object(l.h)("td",null,Object(l.h)("span",{class:"text-muted"},s.sortOrder,":")," ",s.name),Object(l.h)("td",null,Object(l.h)("nobr",null,Object(l.h)("span",{class:"text-muted"},Object(l.h)("i",{class:"fas fa-dog ml-3"}))," ",e.dogs,Object(l.h)("br",null)))))})))))},s}(l.Component))||r,f=Object(h.a)(c=function(e){function s(t){var s;return(s=e.call(this,t)||this).addResult=function(t){return new Promise((function(e,a){function o(){return Promise.resolve(r.addResult({id:g,classId:h,showTimestamp:!1,newResult:n({direction:d,checkpoint:u},O)})).then((function(){try{return s.setState({result:{bib:"",dogs:"",timestamp:""},selectedMusher:null,lastResults:null,message:"Added "+O.bib+" with "+O.dogs+" dogs "+d+" "+("in"===d?"to":"of")+" checkpoint "+m.name+"."}),clearTimeout(s.updateTimer.message),s.updateTimer.message=setTimeout((function(){return new Promise((function(t){return s.setState({message:""}),t()}))}),3e3),e()}catch(t){return a(t)}}),a)}var i,r,c,l,d,h,u,b,p,m,f,O,g;return r=(i=s.props.stores).raceStore,c=i.appState,l=t.target.closest("button").dataset,d=l.direction,h=l.classid,u=c.checkpointId,p=r.getClassById((void 0===(b=c.selectedClassIds)?[]:b)[0]),m=p.checkpoints?p.checkpoints.find((function(t){return t.id===u})):null,g=r.race.id,(O=(f=s.state).result).timestamp=f.showTimestamp&&O.timestamp?O.timestamp:new Date,"scratched"===d?Promise.resolve(r.addResult({id:g,classId:h,showTimestamp:!1,newResult:n({direction:"in",checkpoint:u},O)})).then(function(){try{return Promise.resolve(r.editContestant({id:g,classId:h,bib:O.bib,field:"raceStatus",value:"DNF"})).then(function(){try{return o.call(this)}catch(t){return a(t)}}.bind(this),a)}catch(t){return a(t)}}.bind(this),a):o.call(this)}))},s.editResult=function(t){var e,a=s.props.stores,n=a.raceStore,o=a.appState,i=s.state.currentResult,r=n.race.id,c=t.target.id,l=t.target.value,h=t.target.dataset,u=h.classid,b=h.resultid;i[c]=l,s.setState({currentResult:i});var p=o.selectedClassIds,m=(void 0===p?[]:p)[0],f=((e={raceClassId:u,resultId:b})["raceClassResult"+d.a.ucfirst(c)]=l,e);clearTimeout(s.updateTimer[c]),s.updateTimer[c]=setTimeout((function(){return new Promise((function(t,e){var s,a,o,i;return Promise.resolve(n.editClass({id:r,data:f})).then((function(){try{return n.updateClassesResultLocal(u,b,c,l),s=n.getClassById(m),n.sortContestantsByResult({contestants:void 0===(o=s.contestants)?[]:o,results:void 0===(i=s.results)?[]:i,checkpoints:void 0===(a=s.checkpoints)?[]:a}),t()}catch(t){return e(t)}}),e)}))}),500)},s.updateField=function(t){var e=s.props.stores,a=e.raceStore,n=e.appState,o=t.target.id,i=t.target.value,r=n.selectedClassIds,c=a.getClassById((void 0===r?[]:r)[0]),l=s.state,h=l.result,u=l.selectedResult,m=l.showTimestamp;h[o]=i;var f,O,g,j,v,y,w,x,k,S=n.checkpointId,C=a.sortedContestants,I=void 0===C?[]:C,D=c.checkpoints?c.checkpoints.find((function(t){return t.id===S})):null,T=I?I.find((function(t){return t.bib===parseInt(h.bib,10)})):null;if(!T)return s.setState({result:h}),!1;c&&((f=c.results?c.results.slice().sort(p(["-timestamp","-direction"])).filter((function(t){return parseInt(t.bib,10)===parseInt(h.bib,10)})):null)&&f.length>0&&(O=f.find((function(t){return t.checkpoint===S&&"in"===t.direction})),g=f.find((function(t){return t.checkpoint===S&&"out"===t.direction})),j=f.find((function(t){return t.checkpoint===S&&"scratched"===t.direction})),(y=a.getPreviousCheckpoint({currentClass:c,checkpointId:S}))&&(w=f.find((function(t){return t.checkpoint===y.id&&"in"===t.direction})),x=f.find((function(t){return t.checkpoint===y.id&&"out"===t.direction})),k=f.find((function(t){return t.checkpoint===y.id&&"scratched"===t.direction})))),v=c.results?Object(b.i)(c.results.slice().find((function(t){return t.id===u}))):{});var P=f&&f[0]?f[0]:null;P&&(m&&(h.timestamp=d.a.isoDate(f&&f[0]?f[0].timestamp:T&&T.startTime?T.startTime:c.startDate,!1,!1,!1)),h.dogs=P.dogs);s.setState({result:h,selectedCheckpoint:D,selectedMusher:T,isCheckedIn:O,isCheckedOut:g,isScratched:j,isCheckedInPrev:w,isCheckedOutPrev:x,isScratchedPrev:k,prevCheckpoint:y,currentResult:v,lastResults:f})},s.deleteResult=function(){return new Promise((function(t,e){var a,n,o,i,r,c,l,d,h;return a=s.state.selectedResult,i=(o=(n=s.props.stores).raceStore).race.id,c=o.getClassById((void 0===(r=n.appState.selectedClassIds)?[]:r)[0]),Promise.resolve(o.editClass({id:i,data:{raceClassId:c.id,resultId:a,raceClassResultDelete:1}})).then((function(){try{return o.sortContestantsByResult({contestants:void 0===(d=c.contestants)?[]:d,results:void 0===(h=c.results)?[]:h,checkpoints:void 0===(l=c.checkpoints)?[]:l}),s.doneEditResult(),t()}catch(t){return e(t)}}),e)}))},s.selectCheckpoint=function(t){var e=s.state,a=e.result,n=t.target.closest("button").dataset.id,o=s.props.stores,i=o.appState,r=o.raceStore;i.selectCheckpoint(n);var c=i.selectedClassIds,l=r.getClassById((void 0===c?[]:c)[0]),d=l.checkpoints?l.checkpoints.find((function(t){return t.id===n})):null,h=r.sortedContestants,u=void 0===h?[]:h,b=u?u.find((function(t){return t.bib===parseInt(a.bib,10)})):null,m=l.results?l.results.slice().sort(p(["-timestamp","-direction"])).filter((function(t){return parseInt(t.bib,10)===parseInt(a.bib,10)})):null,f=m.find((function(t){return t.checkpoint===n&&"in"===t.direction})),O=m.find((function(t){return t.checkpoint===n&&"out"===t.direction})),g=m.find((function(t){return t.checkpoint===n&&"scratched"===t.direction})),j=r.getPreviousCheckpoint({currentClass:l,checkpointId:n}),v=m.find((function(t){return t.checkpoint===j.id&&"in"===t.direction})),y=m.find((function(t){return t.checkpoint===j.id&&"out"===t.direction})),w=m.find((function(t){return t.checkpoint===j.id&&"scratched"===t.direction}));s.setState({selectedCheckpoint:d,selectedMusher:b,isCheckedIn:f,isCheckedOut:O,isScratched:g,isCheckedInPrev:v,isCheckedOutPrev:y,isScratchedPrev:w,lastResults:m})},s.toggleTimestamp=function(){var t,e=s.state,a=e.showTimestamp,n=e.result,o=s.props.stores,i=o.appState.selectedClassIds,r=o.raceStore.getClassById((void 0===i?[]:i)[0]),c=r.contestants?r.contestants.find((function(t){return t.bib===parseInt(n.bib,10)})):null,l=r.results?r.results.slice().sort(p(["timestamp"])).reverse().filter((function(t){return parseInt(t.bib,10)===parseInt(n.bib,10)})):null;t=l&&l[0]?l[0].timestamp:c.startTime?c.startTime:r.startDate?r.startDate:new Date,n.timestamp=d.a.isoDate(t,!1,!1,!1),s.setState({showTimestamp:!a,result:n})},s.doneEditResult=function(){var t=s.props.stores,e=t.appState,a=e.selectedClassIds,n=t.raceStore.getClassById((void 0===a?[]:a)[0]),o=e.checkpointId,i=n.checkpoints?n.checkpoints.find((function(t){return t.id===o})):null;s.setState({selectedResult:"",selectedCheckpoint:i,currentResult:null,result:{bib:"",dogs:"",timestamp:""}})},s.selectResult=function(t){var e=t.target.closest(".resultLine").dataset.resultid,a=s.props.stores,n=a.appState.selectedClassIds,o=a.raceStore.getClassById((void 0===n?[]:n)[0]),i=o.results?Object(b.i)(o.results.slice().find((function(t){return t.id===e}))):{};s.setState({selectedResult:e,currentResult:i})},s.state={result:{},message:""},s.updateTimer={},s}i(s,e);var a=s.prototype;return a.componentWillReceiveProps=function(){},a.componentDidMount=function(){this.doneEditResult()},a.render=function(){var e=this,s=this.state,a=s.result,n=s.showTimestamp,o=s.message,i=s.selectedCheckpoint,r=s.selectedMusher,c=s.isCheckedIn,h=s.isCheckedOut,b=s.isScratched,p=s.isCheckedOutPrev,f=s.currentResult,O=s.lastResults,g=void 0===O?[]:O,j=this.props.stores,v=j.appState,y=v.checkpointId,w=v.selectedClassIds,x=j.raceStore.getClassById((void 0===w?[]:w)[0]),k=g&&g[0]?g[0]:{},S=x.checkpoints?x.checkpoints.find((function(t){return t.id===k.checkpoint})):null;S=S||{};return Object(l.h)(t,null,Object(l.h)("div",{class:"mt-2 pb-5",style:"height: 70vh;"},Object(l.h)("h3",null,"Admin timing - ",x.title),Object(l.h)("div",{class:"w-100 overflow-hidden"},Object(l.h)("div",{class:"d-flex flex-row flex-nowrap pb-2 px-1",style:"overflow: auto; scroll-snap-type: x mandatory;"},x.checkpoints&&x.checkpoints.map((function(s,a){var n={},o={};return g&&g.length>0&&(n=g.slice().find((function(t){return parseInt(t.bib,10)==r.bib&&t.checkpoint===s.id&&"in"===t.direction}))||{},o=g.slice().find((function(t){return parseInt(t.bib,10)==r.bib&&t.checkpoint===s.id&&"out"===t.direction}))||{},g.slice().find((function(t){return parseInt(t.bib,10)==r.bib&&t.checkpoint===s.id&&"scratched"===t.direction}))||{}),Object(l.h)(t,null,Object(l.h)("div",{class:"col px-0 pt-2"},Object(l.h)("button",{type:"button",class:"btn btn-block "+(0===a&&"rounded-pill-left")+" "+(a===x.checkpoints.length-1&&"rounded-pill-right")+" rounded-none "+(y===s.id?"btn-primary":"btn-outline-primary")+" text-nowrap",style:"text-overflow: ellipsis; overflow: hidden;",onClick:e.selectCheckpoint,"data-id":s.id},s.sortOrder,": ",s.name,o&&o.id?Object(l.h)("i",{class:"fas fa-check text-white ml-2"}):"",n&&n.id&&!o.id?Object(l.h)("i",{class:"fas fa-map-marker-alt text-white ml-2"}):"")))})))),Object(l.h)("div",{class:"w-100 overflow-hidden"},i&&Object(l.h)(t,null,Object(l.h)("h3",null,r&&Object(l.h)(t,null,Object(l.h)("i",{class:"fas fa-user text-muted"})," ",r.firstname," ",r.lastname)),f?Object(l.h)(t,null,["bib","dogs"].map((function(s){return Object(l.h)(t,null,Object(l.h)("div",{class:"form-group"},Object(l.h)("label",{for:s},s),Object(l.h)("input",{type:"text",class:"form-control",id:s,"aria-describedby":s+"Help","data-classid":x.id,"data-resultid":f.id,"data-field":s,value:f[s],onInput:e.editResult})))})),["timestamp"].map((function(s){return Object(l.h)(t,null,Object(l.h)("div",{class:"form-group"},Object(l.h)("label",{for:s},Object(l.h)("i",{class:"fas fa-stopwatch"})," ",s),Object(l.h)("input",{type:"datetime-local",class:"form-control",id:s,"aria-describedby":s+"Help","data-classid":x.id,"data-resultid":f.id,"data-field":s,value:d.a.isoDate(f[s],!1,!1,!1),onInput:e.editResult}),Object(l.h)("button",{class:"btn btn-link",onClick:e.toggleTimestamp},"Hide timestamp")))})),Object(l.h)("button",{class:"btn btn-lg btn-danger float-left",onClick:this.deleteResult},"Delete"),Object(l.h)("button",{class:"btn btn-lg btn-info float-right",onClick:this.doneEditResult},"Done")):Object(l.h)(t,null,i.sortOrder>S.sortOrder+1&&Object(l.h)(t,null,Object(l.h)("div",{class:"p-3 mb-2 bg-danger text-white clearfix"},Object(l.h)("span",{class:"float-left",style:"font-size: 2.0em;"},Object(l.h)("i",{class:"fas fa-exclamation-triangle mr-3"})),"Previous checkpoint is not logged yet.")),!p&&i.sortOrder===S.sortOrder+1&&Object(l.h)(t,null,Object(l.h)("div",{class:"p-3 mb-2 bg-danger text-white clearfix"},Object(l.h)("span",{class:"float-left",style:"font-size: 2.0em;"},Object(l.h)("i",{class:"fas fa-exclamation-triangle mr-3"})),"Not checked out of prev.")),["bib"].map((function(s){return Object(l.h)(t,null,Object(l.h)("div",{class:"form-group"},Object(l.h)("label",{for:s},s),Object(l.h)("input",{type:"text",class:"form-control form-control-lg",id:s,"aria-describedby":s+"Help",onInput:e.updateField,value:a[s]})))})),["dogs"].map((function(s){return Object(l.h)(t,null,Object(l.h)("div",{class:"form-group"},Object(l.h)("label",{for:s},Object(l.h)("i",{class:"fas fa-dog"})," ",s),Object(l.h)("input",{type:"text",class:"form-control form-control-lg",id:s,"aria-describedby":s+"Help",onInput:Object(u.a)(e,"result."+s),value:a[s]})))})),n?Object(l.h)(t,null,["timestamp"].map((function(s){return Object(l.h)(t,null,Object(l.h)("div",{class:"form-group"},Object(l.h)("label",{for:s},Object(l.h)("i",{class:"fas fa-stopwatch"})," ",s),Object(l.h)("input",{type:"datetime-local",class:"form-control",id:s,"aria-describedby":s+"Help",onInput:Object(u.a)(e,"result."+s),value:d.a.isoDate(a[s],!1,!1,!1).replace(/ /g,"T"),min:d.a.isoDate(k.timestamp,!1,!1,!1).replace(/ /g,"T")}),Object(l.h)("button",{class:"btn btn-link",onClick:e.toggleTimestamp},Object(l.h)("i",{class:"fas fa-stopwatch"})," Hide timestamp")))}))):Object(l.h)(t,null,Object(l.h)("div",{class:"form-group"},Object(l.h)("button",{class:"btn btn-link",onClick:this.toggleTimestamp},Object(l.h)("i",{class:"fas fa-stopwatch"})," Show timestamp"))),c&&h&&Object(l.h)(t,null,Object(l.h)("div",{class:"alert alert-warning my-2 clearfix",role:"alert"},Object(l.h)("span",{class:"float-left",style:"font-size: 2.0em;"},Object(l.h)("i",{class:"fas fa-exclamation-triangle mr-3"})),r&&Object(l.h)(t,null,r.firstname," ",r.lastname)," Has checked in and out of this checkpoint!")),Object(l.h)("div",{class:"d-flex justify-content-between"},Object(l.h)("div",{class:"text-center"},Object(l.h)("h3",null,Object(l.h)("i",{class:"fas fa-campground text-muted"})," ",i.name))),Object(l.h)("div",{class:"d-flex justify-content-between"},Object(l.h)("button",{class:"btn btn-lg btn-success float-left",onClick:this.addResult,"data-direction":"in","data-classid":x.id,disabled:c?"disabled":""},"CP In ",Object(l.h)("i",{class:"fas fa-sign-in-alt ml-2"})),Object(l.h)("button",{class:"btn btn-lg btn-info float-right",onClick:this.addResult,"data-direction":"out","data-classid":x.id,disabled:h?"disabled":""},Object(l.h)("i",{class:"fas fa-sign-out-alt mr-2"})," CP Out"))))),o&&Object(l.h)("div",{class:"alert alert-success mt-3 clearfix",role:"alert"},o),Object(l.h)("div",{class:"overflow-hidden mb-5 mt-3"},Object(l.h)(m,{stores:this.props.stores,lastResults:g,currentClass:x,selectedMusher:r,selectResult:this.selectResult})),Object(l.h)("div",{class:"d-flex justify-content-center mt-3 mb-5"},Object(l.h)("button",{class:"btn btn-sm btn-block btn-danger",onClick:this.addResult,"data-direction":"scratched","data-classid":x.id,disabled:b?"disabled":""},"Scratch ",Object(l.h)("i",{class:"fas fa-times ml-2"})))))},s}(l.Component))||c;e.a=f}).call(this,s("hosL").Fragment)},NMoA:function(t,e,s){"use strict";(function(t){function a(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,a)}return s}function n(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?a(Object(s),!0).forEach((function(e){o(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):a(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}function o(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}function i(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}var r,c,l,d,h,u=s("hosL"),b=s("Utv1"),p=s("/eY4"),m=s("cneo"),f=s("OhSV"),O=s("fh8t"),g=s.n(O),j=s("go65"),v=s("Y3FI"),y=(s("1OK2"),s("B95u")),w=s("4QWe"),x=(s("NMoA"),s("P9Fo")),k=s("s4FZ"),S=s("+JSK"),C=s("vY+r"),I=s("eQ6k"),D=s("om2D"),T=s("ZOvn"),P={showAddComment:{},showTeamSetting:{},viewImageIdx:{},likeStory:{}},R=Object(p.a)(r=function(e){function s(t){var s;return(s=e.call(this,t)||this).saveStory=function(t){return new Promise((function(e,a){var n,o,i,r,c;return n=t.target.closest("button").dataset.id,o=s.state.storyBody,i=s.props.stores.storyStore,c=void 0===(r=s.props.callback)?function(){return!0}:r,Promise.resolve(i.saveField(parseInt(n,10),"body",o,!0)).then((function(){try{return i.publicFeedUpdate(parseInt(n,10),"body",o),s.setState({storyBody:"",storyType:0}),c(),e()}catch(t){return a(t)}}),a)}))},s.saveStoryField=function(t){return new Promise((function(e){var a=s.props.story.id,n=t.target,o=n.value,i=n.name,r=t.target.dataset,c=r.subfield,l=r.subvalue;return s.state.sendButtonEnabled?(s.props.stores.storyStore.publicFeedUpdate(a,i,o),clearTimeout(s.updateTimer[i]),s.updateTimer[i]=setTimeout((function(){return new Promise((function(t){var e;return s.doUpdateField(a,i,o,{query:(e={},e[c]=l,e)}),t()}))}),1e3),e()):e(!1)}))},s.updateFieldValue=function(t){var e=t.id,a=t.field,n=t.value,o=t.skipTimer,i=void 0!==o&&o,r=s.props.story,c=s.props.stores.storyStore,l=n,d=n;"images"===a&&Array.isArray(r.images)&&Array.isArray(n)&&(d=[].concat(r.images,n)),c.updateField(e,a,d),c.publicFeedUpdate(e,a,d),i?s.doUpdateField(e,a,l):(clearTimeout(s.updateTimer[a]),s.updateTimer[a]=setTimeout((function(){return new Promise((function(t){return s.doUpdateField(e,a,l),t()}))}),500))},s.beforeImagesUploaded=function(){s.setState({sendButtonEnabled:!1})},s.afterImagesUploaded=function(){s.setState({sendButtonEnabled:!0})},s.removeImage=function(t){return new Promise((function(e){return s.props.stores.storyStore.removeImage({id:s.props.story.id,name:t.target.parentElement.dataset.name||t.target.dataset.name}),e()}))},s.handleImageErrored=function(t){var e=t.target;e.onerror=null,setTimeout((function(){e.src+="?"+new Date}),1e3)},s.updateTimer={},s.textareaRef=Object(u.createRef)(),s.state={sendButtonEnabled:!0,storyBody:t.story.body},s}i(s,e);var a=s.prototype;return a.doUpdateField=function(t,e,s,a){return new Promise(function(o,i){return void 0===a&&(a={}),this.setState({sendButtonEnabled:!1}),Promise.resolve(this.props.stores.storyStore.saveField(parseInt(t,10),e,s,!0,{query:n({},a.query)})).then(function(){try{return this.setState({sendButtonEnabled:!0}),o()}catch(t){return i(t)}}.bind(this),i)}.bind(this))},a.componentDidMount=function(){this.textareaRef.current.focus()},a.render=function(){var e=this,s=this.state,a=s.storyBody,n=s.storyType,o=s.sendButtonEnabled,i=this.props.stores.userStore.isAdmin,r=this.props.story;return Object(u.h)(t,null,Object(u.h)("div",{class:"container-fluid px-0 mt-1"},Object(u.h)("div",{class:"row"},Object(u.h)("div",{class:"col-12 text-center mt-2"},Object(u.h)("div",{class:"container-fluid"},Object(u.h)("div",{class:"row d-flex align-items-end"},b.a.isArray(r.images)&&r.images.map((function(t,s){return Object(u.h)("div",{class:"col-3 p-1"},Object(u.h)("img",{src:t.s3SmallLink,class:"img-fluid",onError:e.handleImageErrored}),Object(u.h)("button",{class:"btn btn-sm btn-link",onClick:e.removeImage,"data-name":t.name},Object(u.h)("i",{class:"fas fa-trash"})," Del"),Object(u.h)("small",null,Object(u.h)("input",{class:"form-control",type:"text",name:"images.title","data-subfield":"name","data-subvalue":r.images[s].name,onInput:e.saveStoryField,value:r.images[s].title})))})))),Object(u.h)(D.a,{object:r,updateField:this.updateFieldValue,before:this.beforeImagesUploaded,after:this.afterImagesUploaded,autoOpen:!1}))),Object(u.h)("div",{class:"row"},Object(u.h)("div",{class:"col-12 mt-2"},Object(u.h)("label",null,Object(u.h)(f.c,{id:"story.content"},"Content")),Object(u.h)("div",{class:"border rounded rounded-lg position-relative"},Object(u.h)(f.b,null,Object(u.h)("textarea",{class:"form-control-plaintext px-2",type:"text",placeholder:Object(u.h)(f.c,{id:"story.add-content"},"Add your text here..."),onInput:Object(j.a)(this,"storyBody"),onFocus:T.a.resizeTextarea,style:"height: 2.3em;",value:a||r.body,ref:this.textareaRef}))))),Object(u.h)("div",{class:"row"},Object(u.h)("div",{class:"col-12 mt-2"},i&&Object(u.h)(t,null,Object(u.h)("div",{class:"col-12 mt-2"},Object(u.h)("div",{class:"form-group"},Object(u.h)("small",null,Object(u.h)("input",{type:"checkbox",id:"pinned-"+r.id,name:"pinned",onInput:this.saveStoryField,value:r.pinned?"":b.a.isoDate(),checked:r.pinned?"checked":""}),Object(u.h)("label",{class:"ml-2",for:"pinned-"+r.id},"Pinned to top."))))),i&&Object(u.h)(t,null,Object(u.h)("label",null,Object(u.h)(f.c,{id:"story.type"},"Type")),Object(u.h)("div",{class:"form-group"},Object(u.h)("small",null,Object(u.h)("select",{class:"custom-select custom-select-sm",id:r.id,name:"type",onInput:this.saveStoryField,value:n||r.type},Object(u.h)("option",{value:""},"-- ",Object(u.h)(f.c,{id:"story.type-choose"},"Velg type")," --"),Object(u.h)("option",{value:1,selected:1==r.type?"selected":""},"✍️ ",Object(u.h)(f.c,{id:"story.type-regular"},"Vanlig")),Object(u.h)("option",{value:2,selected:2==r.type?"selected":""},"🚀 ",Object(u.h)(f.c,{id:"story.type-ad"},"Annonse")),Object(u.h)("option",{value:3,selected:3==r.type?"selected":""},"📄 ",Object(u.h)(f.c,{id:"story.type-article"},"Artikkel")))))),r.type>=2&&Object(u.h)(t,null,Object(u.h)("label",null,Object(u.h)(f.c,{id:"story.url-text"},"URL text")),Object(u.h)("div",{class:"form-group"},Object(u.h)("small",null,Object(u.h)("input",{class:"form-control",type:"text",name:"urlText",onInput:this.saveStoryField,value:r.urlText}))),Object(u.h)("label",null,Object(u.h)(f.c,{id:"story.url"},"URL")),Object(u.h)("div",{class:"form-group"},Object(u.h)("small",null,Object(u.h)("input",{class:"form-control",type:"text",name:"url",onInput:this.saveStoryField,value:r.url})))),2===r.type&&Object(u.h)(t,null,Object(u.h)("label",null,Object(u.h)(f.c,{id:"story.code"},"Code")),Object(u.h)("div",{class:"form-group"},Object(u.h)("small",null,Object(u.h)("input",{class:"form-control",type:"text",name:"code",onInput:this.saveStoryField,value:r.code}))),Object(u.h)("label",null,Object(u.h)(f.c,{id:"story.country"},"Country")),Object(u.h)("div",{class:"form-group"},Object(u.h)("small",null,Object(u.h)("input",{class:"form-control",type:"text",name:"country",onInput:this.saveStoryField,value:r.country}))),Object(u.h)("label",null,Object(u.h)(f.c,{id:"story.region"},"Region")),Object(u.h)("div",{class:"form-group"},Object(u.h)("small",null,Object(u.h)("input",{class:"form-control",type:"text",name:"region",onInput:this.saveStoryField,value:r.region}))),Object(u.h)("label",null,Object(u.h)(f.c,{id:"story.currency"},"Currency")),Object(u.h)("div",{class:"form-group"},Object(u.h)("small",null,Object(u.h)("input",{class:"form-control",type:"text",name:"currency",onInput:this.saveStoryField,value:r.currency}))),Object(u.h)("label",null,Object(u.h)(f.c,{id:"story.price"},"Price")),Object(u.h)("div",{class:"form-group"},Object(u.h)("small",null,Object(u.h)("input",{class:"form-control",type:"text",name:"price",onInput:this.saveStoryField,value:r.price})))))),Object(u.h)("div",{class:"row"},Object(u.h)("div",{class:"col-12 mt-2"},Object(u.h)("button",{type:"button",class:"btn btn-block btn-"+(o?"primary":"secondary")+" mb-2",disabled:!o,onClick:this.saveStory,"data-id":r.id},Object(u.h)("i",{class:"fas fa-paper-plane"})," ",Object(u.h)(f.c,{id:"story.edit-save"},"Save changes"))))))},s}(u.Component))||r,E=Object(p.a)(c=function(e){function s(t){var s;return(s=e.call(this,t)||this).viewImage=function(t){var e=t.target.closest("img").dataset,a=s.state.viewImageIdx;a[e.id]=e.idx,s.setState({viewImageIdx:a})},s.showStoryDetail=function(t){if("a"===t.target.localName)return!1;var e=t.target.closest("#storyDetail").dataset.id;e&&Object(v.route)("/stories/"+e)},s.translate=function(t){return new Promise((function(e,a){var n;return t.preventDefault(),t.stopPropagation(),n=s.props.stores,Promise.resolve(n.storyStore.translate({story:s.props.story,user:n.userStore.user})).then((function(t){try{return s.setState({showOriginal:0,translatedText:t}),e()}catch(t){return a(t)}}),a)}))},s.showOriginal=function(t){t.preventDefault(),t.stopPropagation(),s.setState({showOriginal:1})},s.setSelectedImage=function(t){s.setState({selectedImageIdx:t})},s.state={viewImageIdx:{}},s}return i(s,e),s.prototype.render=function(){var e=this,s=this.state,a=s.showOriginal,n=s.translatedText,o=s.selectedImageIdx,i=void 0===o?0:o,r=this.props.stores,c=this.props,l=c.story,d=c.likeStory,h=c.likeRef,b=r.userStore.user.language,p=void 0===b?"en":b,O=[];if(l.images){var j=Object(m.i)(l.images);O.push.apply(O,j)}var v=T.a.getTranslation({object:l,targetLang:p,field:"body"})||n,y=v||l.body;a&&(y=l.body);var w=T.a.getInlineComponents(y||""),S=w.components,C=void 0===S?[]:S,I=w.finalBody,D=void 0===I?"":I;return Object(u.h)(t,null,Object(u.h)("div",{class:"container-fluid px-0 mt-1"},Object(u.h)("div",{class:"row"},Object(u.h)(k.a,{stores:this.props.stores,images:O,id:l.id,dblClick:d,likeRef:h,callback:this.setSelectedImage}))),Object(u.h)("div",{class:"row mt-2"},Object(u.h)("div",{class:"clearfix col-12 overflow-hidden",style:l.offline?"text-decoration: line-through;":""},Object(u.h)("div",{id:"storyDetail",onClick:this.showStoryDetail,"data-id":l.id},Object(u.h)(g.a,{markdown:T.a.replaceImages(D,l.images,p),markdownOpts:T.a.getMarkdownOptions()}),l.language!==p&&Object(u.h)(t,null,!a&&v?Object(u.h)(t,null,Object(u.h)("button",{type:"button",class:"btn btn-sm btn-link text-muted",onClick:this.showOriginal},Object(u.h)("i",{class:"fas fa-cog"}),"  ",Object(u.h)(f.c,{id:"home.translate-show-original"},"Show original"))):Object(u.h)(t,null,Object(u.h)("button",{type:"button",class:"btn btn-sm btn-link text-muted",onClick:this.translate},Object(u.h)("i",{class:"fas fa-cog"})," ",Object(u.h)(f.c,{id:"home.translate-to"},"See translation"))))),C&&C.map((function(t){if("poll"===t.name)return Object(u.h)(x.a,{stores:e.props.stores,story:l,storyId:l.id,params:t.params,opts:t.opts,content:t.content,selectedImageIdx:i})})))))},s}(u.Component))||c,F=Object(p.a)(l=function(e){function s(t){var s;return(s=e.call(this,t)||this).viewImage=function(t){var e=t.target.closest("img").dataset,a=s.state.viewImageIdx;a[e.id]=e.idx,s.setState({viewImageIdx:a})},s.showStoryDetail=function(t){if("a"===t.target.localName)return!1;var e=t.target.closest("#storyDetail").dataset.id;e&&Object(v.route)("/stories/"+e)},s.translate=function(t){return new Promise((function(e,a){var n,o,i,r;return t.preventDefault(),t.stopPropagation(),n=s.props.story,i=(o=s.props.stores).storyStore,r=o.userStore.user,s.setState({showOriginal:0}),Promise.resolve(i.translate({story:n,user:r})).then((function(){try{return e()}catch(t){return a(t)}}),a)}))},s.showOriginal=function(t){t.preventDefault(),t.stopPropagation(),s.setState({showOriginal:1})},s.getTranslation=function(){var t=s.props.stores,e=t.userStore,a=e.user.language;T.a.getTranslation({object:s.props.story,targetLang:void 0===a?"en":a,field:"body"})&&s.setState({showOriginal:0})},s.state={viewImageIdx:{}},s}i(s,e);var a=s.prototype;return a.componentWillMount=function(){this.getTranslation()},a.render=function(){var e=this.state,s=e.showOriginal,a=this.props.stores,n=this.props,o=n.story,i=n.likeStory,r=n.likeRef,c=a.userStore.user.language,l=void 0===c?"en":c,d=[];if(o.images){var h=Object(m.i)(o.images);d.push.apply(d,h)}var p=T.a.getTranslation({object:o,targetLang:l,field:"body"}),O=p||o.body;return s&&(O=o.body),Object(u.h)(t,null,Object(u.h)("div",{class:"container-fluid px-0 mt-1"},Object(u.h)("div",{class:"row"},Object(u.h)(k.a,{stores:this.props.stores,images:d,id:o.id,dblClick:i,likeRef:r}))),Object(u.h)("div",{class:"row mt-2"},Object(u.h)("div",{class:"clearfix col-12 overflow-hidden",style:o.offline?"text-decoration: line-through;":""},Object(u.h)("div",{id:"storyDetail","data-id":o.id},Object(u.h)(g.a,{markdown:T.a.replaceImages(O,o.images,l),markdownOpts:T.a.getMarkdownOptions()}),o.language!==l&&Object(u.h)(t,null,!s&&p?Object(u.h)(t,null,Object(u.h)("button",{type:"button",class:"btn btn-sm btn-link",onClick:this.showOriginal},Object(u.h)("i",{class:"fas fa-cog"}),"  ",Object(u.h)(f.c,{id:"home.translate-show-original"},"Show original"))):Object(u.h)(t,null,Object(u.h)("button",{type:"button",class:"btn btn-sm btn-link",onClick:this.translate},Object(u.h)("i",{class:"fas fa-cog"})," ",Object(u.h)(f.c,{id:"home.translate-to"},"See translation")))))),!!(o.url||o.code||o.price>0)&&Object(u.h)(t,null,Object(u.h)("div",{class:"clearfix col-12  py-2",style:o.offline?"text-decoration: line-through;":""},Object(u.h)("div",{class:"row"},o.url&&Object(u.h)(t,null,Object(u.h)("div",{class:"col-12 text-left",style:"font-size: 1.0em;"},Object(u.h)("a",{href:T.a.asUrl(o.url),target:"_blank",rel:"noreferrer"},Object(u.h)("i",{class:"fas fa-link mr-2"}),o.urlText?Object(u.h)(t,null,o.urlText):Object(u.h)(t,null,Object(u.h)(f.c,{id:"story.ad-url-readmore"},"Les mer..."))))),o.code&&Object(u.h)(t,null,Object(u.h)("div",{class:"col text-left",style:"font-size: 1.2em;"},Object(u.h)("nobr",null,Object(u.h)("span",{class:"font-weight-lighter"},Object(u.h)(f.c,{id:"story.ad-campaign-code"},"Kampanjekode"),":")," ",o.code))),o.price>0&&Object(u.h)(t,null,Object(u.h)("div",{class:"col text-right",style:"font-size: 1.2em;"},Object(u.h)("nobr",null,o.currencty&&Object(u.h)("span",{class:"font-weight-lighter"},o.currency)," ",b.a.format(o.price,2)))))))))},s}(u.Component))||l,M=Object(p.a)(d=function(e){function s(t){var s;return(s=e.call(this,t)||this).viewImage=function(t){var e=t.target.closest("img").dataset,a=s.state.viewImageIdx;a[e.id]=e.idx,s.setState({viewImageIdx:a})},s.showStoryDetail=function(t){if("a"===t.target.localName)return!1;var e=t.target.closest("#storyDetail").dataset.id;e&&Object(v.route)("/stories/"+e)},s.translate=function(t){return new Promise((function(e,a){var n,o,i,r;return t.preventDefault(),t.stopPropagation(),n=s.props.story,i=(o=s.props.stores).storyStore,r=o.userStore.user,s.setState({showOriginal:0}),Promise.resolve(i.translate({story:n,user:r})).then((function(){try{return e()}catch(t){return a(t)}}),a)}))},s.showOriginal=function(t){t.preventDefault(),t.stopPropagation(),s.setState({showOriginal:1})},s.getTranslation=function(){var t=s.props.stores,e=t.userStore,a=e.user.language;T.a.getTranslation({object:s.props.story,targetLang:void 0===a?"en":a,field:"body"})&&s.setState({showOriginal:0})},s.state={viewImageIdx:{}},s}i(s,e);var a=s.prototype;return a.componentWillMount=function(){this.getTranslation()},a.render=function(){var e=this.state,s=e.showOriginal,a=this.props.stores,n=this.props,o=n.story,i=n.likeStory,r=n.likeRef,c=a.userStore.user.language,l=void 0===c?"en":c,d=[];if(o.images){var h=Object(m.i)(o.images);d.push.apply(d,h)}var b=T.a.getTranslation({object:o,targetLang:l,field:"body"}),p=b||o.body;return s&&(p=o.body),Object(u.h)(t,null,Object(u.h)("div",{class:"container-fluid px-0 mt-1"},Object(u.h)("div",{class:"row"},Object(u.h)(k.a,{stores:this.props.stores,images:d,id:o.id,dblClick:i,likeRef:r}))),Object(u.h)("div",{class:"row mt-2"},Object(u.h)("div",{class:"clearfix col-12 overflow-hidden",style:o.offline?"text-decoration: line-through;":""},Object(u.h)("div",{id:"storyDetail",onClick:this.showStoryDetail,"data-id":o.id},Object(u.h)(g.a,{markdown:T.a.replaceImages(p,o.images,l),markdownOpts:T.a.getMarkdownOptions()}),o.language!==l&&Object(u.h)(t,null,!s&&b?Object(u.h)(t,null,Object(u.h)("button",{type:"button",class:"btn btn-sm btn-link",onClick:this.showOriginal},Object(u.h)("i",{class:"fas fa-cog"}),"  ",Object(u.h)(f.c,{id:"home.translate-show-original"},"Show original"))):Object(u.h)(t,null,Object(u.h)("button",{type:"button",class:"btn btn-sm btn-link",onClick:this.translate},Object(u.h)("i",{class:"fas fa-cog"})," ",Object(u.h)(f.c,{id:"home.translate-to"},"See translation")))))),!!(o.url||o.code||o.price)&&Object(u.h)(t,null,Object(u.h)("div",{class:"clearfix col-12  py-2",style:o.offline?"text-decoration: line-through;":""},Object(u.h)("div",{class:"row"},o.url&&Object(u.h)(t,null,Object(u.h)("div",{class:"col-12 text-left",style:"font-size: 1.0em;"},Object(u.h)("a",{href:T.a.asUrl(o.url),target:"_blank",rel:"noreferrer"},Object(u.h)("i",{class:"fas fa-link mr-2"}),o.urlText?Object(u.h)(t,null,o.urlText):Object(u.h)(t,null,Object(u.h)(f.c,{id:"story.ad-url-readmore"},"Les mer..."))))))))))},s}(u.Component))||d,A=Object(p.a)(h=function(e){function s(t){var s;return(s=e.call(this,t)||this).toggleDate=function(t){t.stopPropagation(),t.preventDefault(),s.setState({showDate:!s.state.showDate})},s.likeStory=function(){return new Promise((function(t,e){var a,n,o,i;return n=s.props.stores.storyStore,(o=s.state.likeStory)[a=s.props.story.id]=!0,i=Object.keys(o),s.setState({likeStory:o,likeIds:i}),setTimeout((function(){var t=s.state.likeStory;delete t[a];var e=Object.keys(t);s.setState({likeStory:t,likeIds:e})}),1200),Promise.resolve(n.likeStory({id:a})).then((function(s){try{return s,t()}catch(t){return e(t)}}),e)}))},s.toggleAddComment=function(t){var e=t.target.closest("button").dataset.id,a=s.state.showAddComment;a[e]?delete a[e]:a[e]=!0,s.setState({showAddComment:a},(function(){s.inputRef[e]&&s.inputRef[e].focus()}))},s.closeAllAddComments=function(){s.setState({showAddComment:{}})},s.toggleShowTeamSetting=function(t){var e=t.target.closest("button").dataset.id,a=s.state.showTeamSetting;a[e]?delete a[e]:a[e]=!0,s.setState({showTeamSetting:a})},s.viewImage=function(t){var e=t.target.closest("img").dataset,a=s.state.viewImageIdx;a[e.id]=e.idx,s.setState({viewImageIdx:a})},s.toggleMenu=function(t){var e=t.target.closest("i").dataset.id,a=s.state.showMenu,n=void 0===a?{}:a;n[e]=!n[e],s.setState({showDeleteStory:{},showEdit:{},showMenu:n})},s.toggleEdit=function(t){var e=t.target.closest("button").dataset.id,a=s.state.showEdit,n=void 0===a?{}:a;n[e]=!n[e],s.setState({showDeleteStory:{},showEdit:n,showMenu:{}})},s.toggleDeleteStory=function(t){var e=t.target.closest("button").dataset.id,a=s.state.showDeleteStory,n=void 0===a?{}:a;n[e]=!n[e],s.setState({showDeleteStory:n,showEdit:{},showMenu:{}})},s.reportStory=function(t){return new Promise((function(e,a){var n;return n=t.target.closest("button").dataset.id,Promise.resolve(s.props.stores.storyStore.reportStory({id:n})).then((function(){try{return s.setState({showEdit:{},showMenu:{}}),e()}catch(t){return a(t)}}),a)}))},s.adminRemoveStory=function(t){return new Promise((function(e,a){var n;return n=t.target.closest("button").dataset.id,Promise.resolve(s.props.stores.storyStore.adminHideStory({id:n})).then((function(){try{return s.setState({showEdit:{},showMenu:{}}),e()}catch(t){return a(t)}}),a)}))},s.deleteStory=function(t){return new Promise((function(e,a){var n,o;return n=t.target.closest("button").dataset.id,o=s.props.stores.storyStore,Promise.resolve(o.saveField(parseInt(n,10),"offline",1,!0)).then((function(){try{return o.publicFeedUpdate(parseInt(n,10),"offline",1),s.setState({storyBody:"",showDeleteStory:{},showEdit:{},showMenu:{}}),e()}catch(t){return a(t)}}),a)}))},s.doneEdit=function(){s.setState({showDeleteStory:{},showEdit:{},showMenu:{}})},s.showStoryDetail=function(t){if("a"===t.target.localName)return!1;var e=t.target.closest("#storyDetail").dataset.id;e&&Object(v.route)("/stories/"+e)},s.shareLink=function(t){var e=t.target.closest("button").dataset;s.props.stores.appState.shareUrl({url:e.url,title:e.title,text:e.text})},s.displayTeam=function(t,e){t.preventDefault(),t.stopPropagation(),s.props.stores.appState.openDrawer("publicTeam",{teamId:e,height:"80vh"})},s.openInbox=function(t,e){t.preventDefault(),t.stopPropagation(),s.props.stores.appState.openDrawer("inboxDetail",{fromuser:e,height:"80vh"})},s.state=n({},P),s.inputRef={},s}i(s,e);var a=s.prototype;return a.loadStoriesPublicFeed=function(t){return new Promise(function(e,s){return void 0===t&&(t=this.props),Promise.resolve(t.stores.storyStore.loadPublicFeed({hashtag:t.hashtag})).then((function(){try{return e()}catch(t){return s(t)}}),s)}.bind(this))},a.render=function(){var e,s,a,n,o=this,i=this.state,r=i.showAddComment,c=i.showDate,l=i.showMenu,d=void 0===l?{}:l,h=i.showEdit,p=void 0===h?{}:h,m=i.showDeleteStory,O=void 0===m?{}:m,g=i.showTeamSetting,j=i.likeStory,v=i.likeIds,x=this.props,k=x.story,D=x.showAllComments,P=x.onTeamClick,A=void 0===P?function(){}:P,L=x.onUserClick,N=void 0===L?function(){}:L,B=this.props.stores,z=B.userStore,H=B.storyStore,U=B.appState,_=z.user,V=void 0===_?{}:_,q=z.isAdmin,K=U.hasShareApi,W=H.findPublicTeam(k.team)||{},Y=H.findPublicUser(k.user)||{},G=T.a.getImage({user:Y,team:W,priority:"user",object:k}),Z=!(!W||!W.members)&&W.members.some((function(t){return t===V.id}));W&&W.name?(e=T.a.displayNameShort(W),s=T.a.displayName(W),a=T.a.displayName(Y),Y.settings&&V.uuidv4!==Y.uuidv4&&(n=Y.settings.hideProfile?null:"/inbox/"+Y.uuidv4)):Y&&Y.id&&(e=T.a.displayNameShort(Y),s=T.a.displayName(Y));var J=k.likes,Q=k.comments,X=k.reports,$=void 0===X?[]:X,tt=k.likes&&k.likes.findIndex((function(t){return t.user===V.id}))>-1,et=W.followers?W.followers.length:0,st=W.members&&W.members.indexOf(V.id)>-1,at=W.followers&&W.followers.indexOf(V.id)>-1,nt=W.followRequests&&W.followRequests.findIndex((function(t){return t.id===V.id}))>-1,ot=k.currentLocationGeocode,it=void 0===ot?{}:ot,rt=T.a.getViews(k.statistics),ct=T.a.getAdminData(k.statistics);return Object(u.h)(t,null,q||V.id===Y.id?Object(u.h)(t,null,Object(u.h)("span",{class:"float-right font-weight-lighter text-muted"},Object(u.h)("i",{class:"fas fa-ellipsis-h",onClick:this.toggleMenu,"data-id":k.id}))):Object(u.h)(t,null,!st&&!at&&!nt&&W.public>0&&Object(u.h)("span",{class:"float-right"},Object(u.h)(I.a,{stores:this.props.stores,team:W,buttonOnly:!0,simple:!0,classNames:"btn btn-link text-primary"}))),d[k.id]&&Object(u.h)(t,null,Object(u.h)("div",{class:"position-absolute bg-light p-2 border rounded rounded-lg shadow-sm",style:"top: 30px; right: 10px; width: 60%; z-index: 999999;"},V.id===Y.id?Object(u.h)(t,null,Object(u.h)("button",{class:"btn btn-link btn-block text-left",onClick:this.toggleEdit,"data-id":k.id},Object(u.h)("i",{class:"fas fa-edit"})," Edit"),Object(u.h)("hr",null),Object(u.h)("button",{class:"btn btn-link btn-block text-left text-danger",onClick:this.toggleDeleteStory,"data-id":k.id},Object(u.h)("i",{class:"fas fa-trash-alt"})," Delete")):Object(u.h)(t,null,Object(u.h)("button",{class:"btn btn-link btn-block text-left",onClick:this.reportStory,"data-id":k.id},Object(u.h)("i",{class:"fas fa-flag"})," Report"),q&&Object(u.h)(t,null,Object(u.h)("hr",null),Object(u.h)("button",{class:"btn btn-link btn-block text-left text-danger",onClick:this.adminRemoveStory,"data-id":k.id},Object(u.h)("i",{class:"fas fa-eraser"})," Remove from feed"))))),Object(u.h)("div",{class:"d-flex position-relative"},Object(u.h)("div",{class:"position-relative text-center border rounded-circle imageRounded imageRoundedMedium",style:G?'background-image: url("'+G+'"); background-size: cover;':""},!G&&Object(u.h)("div",{class:"text-muted",style:"font-size: 20px; padding-top: 3px;"},e)),Object(u.h)("div",{class:"flex-grow-1 pl-3 text-overflow",style:"line-height: 1.2em;"},Object(u.h)("h5",{class:"mb-1 position-relative",style:"line-height: 1.0em; "+(k.offline?"text-decoration: line-through;":"")},W.public?Object(u.h)(t,null,Object(u.h)("a",{href:"/teams/public/"+W.uuidv4,onClick:function(t){return o.displayTeam(t,W.uuidv4)},class:"stretched-link"},s)):Object(u.h)(t,null,s),st&&!W.public&&Object(u.h)("button",{type:"button",class:"btn btn-sm btn-link text-muted","data-id":k.id,onClick:this.toggleShowTeamSetting},Object(u.h)("i",{class:"fas fa-exclamation-triangle"}))),Object(u.h)("div",{class:"mb-2",style:k.offline?"text-decoration: line-through;":""},k.pinned&&Object(u.h)(t,null,Object(u.h)("small",{class:"text-muted mr-2"},Object(u.h)("i",{class:"fas fa-thumbtack"}))),2===k.type?Object(u.h)(t,null,Object(u.h)("small",{class:"text-muted"},Object(u.h)(f.c,{id:"story.sponsored"},"Sponsored")," -")):Object(u.h)(t,null,k.date&&Object(u.h)("small",{class:"text-muted",onClick:this.toggleDate},c?b.a.formatDate(k.date,{locale:"no-NB",hour12:!1,hour:"2-digit",minute:"2-digit"}):b.a.formatDistance(k.date,new Date,{locale:"no-NB"}))),1===k.public?Object(u.h)(t,null,Object(u.h)("small",{class:"ml-2 text-muted"},Object(u.h)("i",{class:"fas fa-globe-europe"}))):Object(u.h)(t,null,Object(u.h)("small",{class:"ml-2 text-muted"},Object(u.h)("i",{class:"fas fa-users"})," (",b.a.format(et),")")),a&&Object(u.h)(t,null,Object(u.h)("small",{class:"ml-2 text-muted"},n?Object(u.h)(t,null,Object(u.h)("i",{class:"fas fa-user"})," ",Object(u.h)("a",{href:n,onClick:function(t){return o.openInbox(t,Y.uuidv4)}},a)):Object(u.h)(t,null,Object(u.h)("i",{class:"fas fa-user"})," ",a))),it&&it.formattedCounty&&Object(u.h)(t,null,Object(u.h)("small",{class:"ml-2 text-muted"},Object(u.h)("i",{class:"fas fa-map-marker-alt"})," ",it.formattedCounty))),q&&Object(u.h)("div",{class:"d-flex flex-row flex-nowrap bg-light border-top border-bottom py-2",style:"overflow: auto;"},Object(u.h)("small",{class:"text-muted mr-2"},"Adm:"),$&&$.length>0&&Object(u.h)(t,null,Object(u.h)("small",{class:"text-danger mr-2"},Object(u.h)("i",{class:"fas fa-flag"})," ",$.length)),it&&it.formatted_address&&Object(u.h)(t,null,Object(u.h)("small",{class:"text-muted"},Object(u.h)("i",{class:"fas fa-map-marker-alt"})," ",it.formatted_address)),Y.deviceInfo&&Object(u.h)(t,null,Object(u.h)("span",{class:"badge badge-secondary ml-2 float-right font-weight-light"},["platform","manufacturer","model"].map((function(e){return Object(u.h)(t,null,Object(u.h)("span",{class:"ml-2 text-white"},Y.deviceInfo[e]))})))),ct&&Object(u.h)(t,null,Object(u.h)("small",{class:"ml-2 text-muted"},"V: ",ct.count),Object(u.h)("small",{class:"ml-2 text-muted"},"R: ",ct.ranking," ",b.a.isNumber(ct.rankingTrend)&&Object(u.h)(t,null,Object(u.h)("i",{class:T.a.getClassForTrend(ct.rankingTrend)}))),Object(u.h)("small",{class:"ml-2 text-muted"},"D: ",b.a.format(ct.durationAvg/1e3,1),"s ",b.a.isNumber(ct.durationAvgTrend)&&Object(u.h)(t,null,Object(u.h)("i",{class:T.a.getClassForTrend(ct.durationAvgTrend)}))),k.statisticsCurrent&&k.statisticsCurrent.totalInteractions>0&&Object(u.h)("small",{class:"ml-2 text-muted"},"S: ",b.a.format(k.statisticsCurrent.totalInteractions,0)),k.shadowTags&&k.shadowTags.map((function(e){return Object(u.h)(t,null,Object(u.h)("span",{class:"badge badge-secondary ml-2 float-right font-weight-light"},e))})))))),p[k.id]||O[k.id]?Object(u.h)(t,null,Object(u.h)("div",{class:"row mt-2"},Object(u.h)("div",{class:"clearfix col-12",style:k.offline?"text-decoration: line-through;":""},p[k.id]&&Object(u.h)(t,null,Object(u.h)(R,{stores:this.props.stores,story:k,key:"story-edit-"+k.id,callback:this.doneEdit})),O[k.id]&&Object(u.h)("div",{class:"clearfix mt-3 mb-3"},Object(u.h)("button",{class:"btn btn-danger float-left",onClick:this.deleteStory,"data-id":k.id},Object(u.h)("i",{class:"fas fa-trash-alt"})," Delete"),Object(u.h)("button",{class:"btn btn-secondary float-right",onClick:this.toggleDeleteStory,"data-id":k.id},Object(u.h)("i",{class:"fas fa-times-circle"})," Cancel"))))):Object(u.h)(t,null,(!k.type||1==k.type)&&Object(u.h)(E,{stores:this.props.stores,story:k,key:"story-regular-view-"+k.id,likeStory:this.likeStory,likeRef:j,keys:v}),2==k.type&&Object(u.h)(F,{stores:this.props.stores,story:k,key:"story-ad-view-"+k.id,likeStory:this.likeStory,likeRef:j,keys:v}),3==k.type&&Object(u.h)(M,{stores:this.props.stores,story:k,key:"story-article-view-"+k.id,likeStory:this.likeStory,likeRef:j,keys:v}),Object(u.h)("div",{class:"d-flex justify-content-between mt-2"},Object(u.h)("div",{class:"mr-2"},Object(u.h)(S.a,{stores:this.props.stores,likes:J,comments:Q,type:"story",onTeamClick:A,onUserClick:N})),rt>0&&Object(u.h)(t,null,Object(u.h)("div",null,Object(u.h)(C.a,{stores:this.props.stores,views:rt,object:k,type:"story",isTeamAdmin:Z,isAdmin:q,onTeamClick:A,onUserClick:N})))),g[k.id]&&Object(u.h)(t,null,Object(u.h)("small",null,Object(u.h)("div",{class:"alert alert-info",role:"alert"},Object(u.h)("span",{class:"display-4 float-left"},Object(u.h)("i",{class:"fas fa-exclamation-triangle mr-3 mb-3"})),Object(u.h)("p",null,Object(u.h)(f.c,{id:"story.alert-text-1"},"Your team is not visible and it's not possible to request friendship with your team.")),Object(u.h)("p",null,Object(u.h)(f.c,{id:"story.alert-text-2"},"If you want to make your team visible so other can request to follow your team, you can find the setting here:")),Object(u.h)("p",null,Object(u.h)("a",{href:"/teams/edit/"+W.id},Object(u.h)(f.c,{id:"story.alert-text-3"},"Edit team")))))),Object(u.h)("div",null,Object(u.h)("div",{class:"row"},Object(u.h)("div",{class:"col text-center"},Object(u.h)("button",{type:"button",class:"storyImage btn btn-sm btn-outline-"+(tt?"primary":"secondary")+" btn-lg btn-block "+(tt?"text-primary":"")+" text-overflow","data-id":k.id,onClick:this.likeStory},Object(u.h)("i",{class:(tt?"text-primary fas":"far")+" fa-thumbs-up"})," ",tt?Object(u.h)(f.c,{id:"comments.has-liked"},"Liked"):Object(u.h)(f.c,{id:"comments.like"},"Lik"))),Object(u.h)("div",{class:"col text-center"},Object(u.h)("button",{type:"button",class:"btn btn-sm btn-outline-secondary btn-block text-overflow","data-id":k.id,onClick:this.toggleAddComment},Object(u.h)("i",{class:"fas fa-comment"})," ",Object(u.h)(f.c,{id:"comments.comment-add"},"Kommentar"))),K?Object(u.h)(t,null,Object(u.h)("div",{class:"col text-center"},Object(u.h)("button",{class:"btn btn-sm btn-outline-secondary btn-block text-overflow",onClick:this.shareLink,"data-url":"https://themusher.app/share/story/"+k.uuidv4,"data-title":"title: "+k.title},Object(u.h)("i",{class:"fas fa-share"})," ",Object(u.h)(f.c,{id:"story.share"},"Del")))):Object(u.h)(t,null,Object(u.h)("div",{class:"col text-center"},Object(u.h)("a",{class:"btn btn-sm btn-outline-secondary btn-block text-overflow",href:"https://themusher.app/share/story/"+k.uuidv4,target:"_blank",rel:"noreferrer","data-native":!0},Object(u.h)("i",{class:"fas fa-share"})," ",Object(u.h)(f.c,{id:"story.share"},"Del")))))),Object(u.h)("div",{class:"mt-2"},Object(u.h)(y.a,{stores:this.props.stores,story:k,col:"10",offset:"2",compact:!1,showAllComments:D,initCall:this.closeAllAddComments}),r[k.id]&&Object(u.h)(w.a,{stores:this.props.stores,story:k,inputRef:function(t){return o.inputRef[k.id]=t},inputRefObject:this.inputRef,col:"10",offset:"2",key:"story-comment-"+k.id}))))},s}(u.Component))||h;e.a=A}).call(this,s("hosL").Fragment)},P9Fo:function(t,e,s){"use strict";(function(t){var a,n=s("hosL"),o=s("Utv1"),i=s("/eY4"),r=(s("cneo"),s("OhSV")),c=s("fh8t"),l=s.n(c),d=(s("go65"),s("ZOvn")),h=Object(i.a)(a=function(e){function s(t){var s;return(s=e.call(this,t)||this).pollStory=function(t){return new Promise((function(e,a){var n,o,i;return n=s.props.storyId,o=s.props.stores.storyStore,i=t.target.closest("button").dataset.line,Promise.resolve(o.pollStory({id:n,line:i})).then((function(t){try{return t,e()}catch(t){return a(t)}}),a)}))},s.toggleResult=function(){s.setState({viewResult:!s.state.viewResult})},s.state={},s.inputRef={},s}var a,i;return i=e,(a=s).prototype=Object.create(i.prototype),a.prototype.constructor=a,a.__proto__=i,s.prototype.render=function(){var e=this,s=this.state.viewResult,a=this.props,i=a.story,c=a.opts,h=a.selectedImageIdx,u=this.props.stores,b=u.userStore.user,p=b.language,m=void 0===p?"en":p,f=a.content.split("\n").map((function(t){return t.trim().replace(/^\-\s*/g,"")})),O=i.polls&&i.polls.findIndex((function(t){return t.user===b.id}))>-1,g=i.polls?i.polls.length:0,j=0;f.forEach((function(t){var e=100*(i.polls?i.polls.filter((function(e){return e.line===d.a.md5(t)})).length/g:0);e>j&&(j=e)}));var v=c.days?parseInt(c.days,10):7,y=o.a.addDays(i.date,v),w=y<new Date,x=new RegExp(/{{img\./i);return Object(n.h)(t,null,Object(n.h)("div",{class:"w-100 my-4 storyPoll"},w||O||s?Object(n.h)(t,null,f&&f.map((function(e){var s=i.polls&&i.polls.findIndex((function(t){return t.user===b.id&&t.line===d.a.md5(e)}))>-1,a=(i.polls?i.polls.filter((function(t){return t.line===d.a.md5(e)})).length:0)/g*100;return Object(n.h)(t,null,Object(n.h)("div",{class:"progress position-relative my-2 ",style:"height: 1.5em; font-size: 1.3em;"},Object(n.h)("span",{class:"position-absolute",style:"right: 10px;"}," ",o.a.format(a||0,1),"%"),Object(n.h)("span",{class:"position-absolute",style:"left: 10px;"},Object(n.h)(l.a,{markdown:d.a.replaceImages(e+" "+(s?"<i class='fas fa-check-circle' />":""),i.images,m,!1),markdownOpts:d.a.getMarkdownOptions()})),Object(n.h)("div",{class:"progress-bar "+(j===a?"bg-primary":"bg-secondary"),role:"progressbar",style:"width: "+a+"%;","aria-valuenow":a,"aria-valuemin":"0","aria-valuemax":"100"})))})),Object(n.h)("div",{class:"w-100 mt-3 text-muted d-flex justify-content-start"},Object(n.h)("div",null,Object(n.h)("small",null,o.a.format(g,0)," ",1===g?Object(n.h)(r.c,{id:"story.poll"},"vote"):Object(n.h)(r.c,{id:"story.polls"},"votes"))),w?Object(n.h)(t,null,Object(n.h)("div",{class:"ml-2"},Object(n.h)("small",null,"- ",Object(n.h)(r.c,{id:"story.finished"},"Finished")))):Object(n.h)(t,null,Object(n.h)("div",{class:"ml-2"},Object(n.h)("small",null,"- ",o.a.formatDistance(y,new Date,{},{extended:!0})," ",Object(n.h)(r.c,{id:"story.left"},"left"))),!O&&Object(n.h)("div",{class:"ml-2",onClick:this.toggleResult},Object(n.h)("small",null,"- ",Object(n.h)(r.c,{id:"story.view-vote"},"View vote")))))):Object(n.h)(t,null,f&&f.map((function(s,a){return Object(n.h)(t,null,Object(n.h)("button",{class:"btn btn-block "+(x.test(s)&&a===h?"btn-outline-success":"btn-outline-primary")+" rounded-pill",onClick:e.pollStory,"data-line":d.a.md5(s)},x.test(s)&&a===h&&Object(n.h)("span",{class:"float-right"},Object(n.h)("i",{class:"fas fa-eye"})),Object(n.h)(l.a,{markdown:d.a.replaceImages(s,i.images,m,!1),markdownOpts:d.a.getMarkdownOptions()})))})),Object(n.h)("div",{class:"w-100 mt-3 text-muted d-flex justify-content-start"},Object(n.h)("div",null,Object(n.h)("small",null,o.a.format(g,0)," ",1===g?Object(n.h)(r.c,{id:"story.poll"},"vote"):Object(n.h)(r.c,{id:"story.polls"},"votes"))),w?Object(n.h)(t,null,Object(n.h)("div",{class:"ml-2"},Object(n.h)("small",null,"- ",Object(n.h)(r.c,{id:"story.finished"},"Finished")))):Object(n.h)(t,null,Object(n.h)("div",{class:"ml-2"},Object(n.h)("small",null,"- ",o.a.formatDistance(y,new Date,{},{extended:!0})," ",Object(n.h)(r.c,{id:"story.left"},"left")))),Object(n.h)("div",{class:"ml-2",onClick:this.toggleResult},Object(n.h)("small",null,"- ",Object(n.h)(r.c,{id:"story.view-results"},"View results")))))))},s}(n.Component))||a;e.a=h}).call(this,s("hosL").Fragment)},Pbyq:function(t,e,s){"use strict";(function(t){var a,n=s("hosL"),o=s("Utv1"),i=s("/eY4"),r=(s("OhSV"),s("Y3FI"),s("fh8t"),s("go65"),s("om2D"),s("AEg1")),c=s("gOLw"),l=(s("ZOvn"),Object(i.a)(a=function(e){function s(t){var s;return(s=e.call(this,t)||this).addRaceUserImage=function(){return new Promise((function(t,e){var a;return a=s.props.race,Promise.resolve(s.props.stores.raceStore.addUserImage({id:(void 0===a?{}:a).id,newUserImage:s.state.newRaceUserImage})).then((function(){try{return s.setState({newRaceUserImage:{}}),t()}catch(t){return e(t)}}),e)}))},s.updateUserImageUpload=function(t){var e=s.state.newRaceUserImage;e[t.field]=t.value,s.setState({newRaceUserImage:e})},s.removeRaceUserImage=function(t){return new Promise((function(e,a){var n;return n=s.props.race,Promise.resolve(s.props.stores.raceStore.removeUserImage({id:(void 0===n?{}:n).id,userImageId:t.target.parentElement.dataset.id||t.target.dataset.id})).then((function(){try{return e()}catch(t){return a(t)}}),a)}))},s.editRaceUserImage=function(t){return new Promise((function(e){var a,n=t.target.dataset,i=n.id,r=n.field,c=t.target.value,l=s.props.race,d=(void 0===l?{}:l).id,h=s.props.stores.raceStore,u=((a={raceUserImageId:i})["raceUserImage"+o.a.ucfirst(r)]=c,a);return clearTimeout(s.updateTimer[d+"-"+i+"-"+r]),s.updateTimer[d+"-"+i+"-"+r]=setTimeout((function(){return new Promise((function(t){return h.editUserImage({id:d,data:u}),t()}))}),1500),s.resizeTextarea(t.target),e()}))},s.resizeTextarea=function(t){var e=t;e.target&&(e=t.target),e.style.height=e.scrollHeight+"px"},s.handleImageErrored=function(t){var e=t.target;e.onerror=null,setTimeout((function(){e.src+="?"+new Date}),1e3)},s.state={newRaceUserImage:{}},s.inputRef={},s.updateTimer={},s}var a,i;return i=e,(a=s).prototype=Object.create(i.prototype),a.prototype.constructor=a,a.__proto__=i,s.prototype.render=function(){var e=this.props.stores,s=e.userStore,a=s.user,o=void 0===a?{}:a,i=this.props.race,l=void 0===i?{}:i,d=["photos"];return l.tag&&l.tag.split(",").forEach((function(t){d.push(t.trim())})),Object(n.h)(t,null,o.id&&Object(n.h)(r.a,{stores:this.props.stores,hashTags:d,postfix:"[🔗 "+l.title+": Images](/app-races/"+l.id+"/userImages)",topic:"race-"+l.id}),Object(n.h)(c.a,{stores:this.props.stores,hashtags:d}))},s}(n.Component))||a);e.a=l}).call(this,s("hosL").Fragment)},QuNB:function(t,e,s){"use strict";(function(t){var a,n=s("hosL"),o=s("Utv1"),i=s("/eY4"),r=(s("OhSV"),s("fh8t"),s("ZOvn")),c=s("gcyc"),l=Object(i.a)(a=function(e){function s(){return e.apply(this,arguments)||this}var a,i;return i=e,(a=s).prototype=Object.create(i.prototype),a.prototype.constructor=a,a.__proto__=i,s.prototype.render=function(){var e=this.props,s=e.bib,a=e.onClickNav,i=void 0===a?function(){}:a,l=this.props.stores,d=l.appState,h=l.raceStore,u=d.checkpointId,b=h.sortedContestants,p=void 0===b?[]:b,m=d.selectedClassIds,f=h.getClassById((void 0===m?[]:m)[0])||{},O=f.checkpoints,g=void 0===O?[]:O,j=f.results,v=void 0===j?[]:j,y=(f.checkpoints&&f.checkpoints.find((function(t){return t.id===u})),p?p.find((function(t){return t.bib===parseInt(s,10)})):null);y=y||{};var w,x,k=p?p.findIndex((function(t){return t.bib===parseInt(s,10)})):null,S=(f.results&&f.results.slice().sort((w=["-timestamp","-direction"],function(t,e){return w.map((function(s){var a=1;return"-"===s[0]&&(a=-1,s=s.substring(1)),t[s]>e[s]?a:t[s]<e[s]?-a:0})).reduce((function(t,e){return t||e}),0)})).filter((function(t){return parseInt(t.bib,10)===parseInt(s,10)})),h.getTeamById(y.team)),C=S.members?S.members.find((function(t){return t.email===y.email})):{},I=(r.a.getImage({user:C,team:S,priority:"user"}),r.a.displayNameShort(C)||r.a.displayNameShort(y),0),D=0,T=0,P=0,R=f.startDate,E=0,F=k>-1&&p[k+1]?p[k+1].bib:null,M=k>-1&&p[k-1]?p[k-1].bib:null;return Object(n.h)(t,null,F&&Object(n.h)("button",{class:"btn btn-link text-primary float-right mr-2 py-0",style:"font-size: 2.0em; line-height: 1.0em;",onClick:function(){return i(F)}},Object(n.h)("i",{class:"fas fa-angle-right"})),M&&Object(n.h)("button",{class:"btn btn-link text-primary float-right mr-2 py-0",style:"font-size: 2.0em; line-height: 1.0em;",onClick:function(){return i(M)}},Object(n.h)("i",{class:"fas fa-angle-left"})),Object(n.h)(c.a,{stores:this.props.stores,contestant:y,onTeamClick:this.onTeamClick,onUserClick:this.onUserClick,onDogClick:this.onDogClick,onClickNav:i,rank:k+1},Object(n.h)("div",{class:"table-responsive"},Object(n.h)("table",{class:"table table-striped table-sm"},Object(n.h)("thead",null,Object(n.h)("tr",null,Object(n.h)("th",null,"Checkpoint"),Object(n.h)("th",{class:"text-center"},"In"),Object(n.h)("th",{class:"text-center"},"Out"),Object(n.h)("th",{class:"text-center"},"Moving time"),Object(n.h)("th",{class:"text-center"},"Avg speed"),Object(n.h)("th",{class:"text-center"},"Total moving time"),Object(n.h)("th",{class:"text-center"},"Rest"),Object(n.h)("th",{class:"text-center"},"Total rest"),Object(n.h)("th",{class:"text-center"},"% rest"),Object(n.h)("th",{class:"text-center"},"Distance"),Object(n.h)("th",{class:"text-center"},"Total distance"))),Object(n.h)("tbody",null,g&&g.map((function(e){var s=Math.floor((new Date).getTime()/1e3,10),a=v.slice().find((function(t){return parseInt(t.bib,10)==y.bib&&t.checkpoint===e.id&&"in"===t.direction}))||{},i=v.slice().find((function(t){return parseInt(t.bib,10)==y.bib&&t.checkpoint===e.id&&"out"===t.direction}))||{},c=v.slice().find((function(t){return parseInt(t.bib,10)==y.bib&&t.checkpoint===e.id&&"scratched"===t.direction}))||{},l=0;!e.isStartLine&&a&&i&&a.timestamp&&i.timestamp&&(l=r.a.deltaSec(a.timestamp,i.timestamp));var d=0;x&&a&&x.timestamp&&a.timestamp&&(d=r.a.deltaSec(x.timestamp,a.timestamp));var h=!1,u=0;a&&a.timestamp&&(h=!0,u=e.distanceFromPrev/(d/3600)),I+=e.distanceFromPrev?parseInt(e.distanceFromPrev,10):0,T+=d||0,P+=l||0;var b,p=(D+=(d||0)+(l||0))?P/D*100:0,m=60*f.requiredRestMinutes,O="text-muted font-weight-lighter",g="text-info";if(h){var j,w,k;i&&i.timestamp||(e.isStartLine?w=0:e.timeEqualization?(f.requiredRestMinutes&&P<m&&(w=m-P+60*y.timeEqualization,O="text-warning font-weight-bold"),!w&&e.requiredRestMinutes&&e.timeEqualization&&y.timeEqualization&&(w=60*e.requiredRestMinutes+60*y.timeEqualization)):w=e.requiredRestMinutes>0?60*e.requiredRestMinutes:10800,e.isStartLine?j=r.a.addDeltaSec(y.startTime||f.startDate,0):(j=r.a.addDeltaSec(a.timestamp,w),k=r.a.deltaSec(a.timestamp,s)),R=j,m&&(g=P+k>m+60*y.timeEqualization?"text-success":"text-danger")),b=Object(n.h)(t,null,Object(n.h)("tr",null,Object(n.h)("td",null,Object(n.h)("nobr",null,e.name)),Object(n.h)("td",{class:"text-center"},!e.isStartLine&&Object(n.h)("nobr",null,Object(n.h)("span",{class:"text-muted mr-1"},r.a.formatDate(a.timestamp,{locale:"en-GB",day:"numeric",month:"numeric"})),r.a.formatDate(a.timestamp,{locale:"en-GB",hour12:!1,hour:"2-digit",minute:"2-digit"}),a.dogs>0&&Object(n.h)(t,null,Object(n.h)("i",{class:"fas fa-dog text-muted ml-2"})," ",a.dogs))),Object(n.h)("td",{class:"text-center"},e.isFinishLine?Object(n.h)(t,null," "):Object(n.h)(t,null,i.timestamp&&Object(n.h)("nobr",null,Object(n.h)("span",{class:"text-muted mr-1"},r.a.formatDate(i.timestamp,{locale:"en-GB",day:"numeric",month:"numeric"})),r.a.formatDate(i.timestamp,{locale:"en-GB",hour12:!1,hour:"2-digit",minute:"2-digit"}),i.dogs>0&&Object(n.h)(t,null,Object(n.h)("i",{class:"fas fa-dog text-muted ml-2"})," ",i.dogs)),!c.timestamp&&j&&Object(n.h)("nobr",{class:""+O},Object(n.h)("span",{class:"text-muted mr-1"},r.a.formatDate(j,{locale:"en-GB",day:"numeric",month:"numeric"})),r.a.formatDate(j,{locale:"en-GB",hour12:!1,hour:"2-digit",minute:"2-digit"}))),c.timestamp&&Object(n.h)("nobr",{class:"text-danger"},Object(n.h)("i",{class:"fas fa-times"}),Object(n.h)("span",{class:"text-muted mr-1"},r.a.formatDate(c.timestamp,{locale:"en-GB",day:"numeric",month:"numeric"})),r.a.formatDate(c.timestamp,{locale:"en-GB",hour12:!1,hour:"2-digit",minute:"2-digit"}))),Object(n.h)("td",{class:"text-center"},!e.isStartLine&&Object(n.h)("nobr",null,o.a.secToHms(d,!0))),Object(n.h)("td",{class:"text-center"},!e.isStartLine&&Object(n.h)("nobr",null,o.a.format(u||0,1)," ",Object(n.h)("span",{class:"text-muted font-weight-lighter"},"km/t"))),Object(n.h)("td",{class:"text-center"},!e.isStartLine&&Object(n.h)("nobr",null,o.a.secToHms(T,!0))),Object(n.h)("td",{class:"text-center"},e.isFinishLine||e.isStartLine?Object(n.h)(t,null," "):Object(n.h)(t,null,c.timestamp?Object(n.h)(t,null," "):Object(n.h)(t,null,i&&i.timestamp?Object(n.h)(t,null,!e.isStartLine&&Object(n.h)(t,null,w>0?Object(n.h)(t,null,Object(n.h)("nobr",{class:"text-muted font-weight-lighter"},o.a.secToHms(w,!0))):Object(n.h)(t,null,Object(n.h)("nobr",null,o.a.secToHms(l,!0))))):Object(n.h)(t,null,Object(n.h)("nobr",{class:"text-info"},o.a.secToHms(k,!0)))))),Object(n.h)("td",{class:"text-center"},e.isFinishLine?Object(n.h)(t,null,Object(n.h)("nobr",null,o.a.secToHms(P,!0))):Object(n.h)(t,null,c.timestamp?Object(n.h)(t,null," "):Object(n.h)(t,null,!e.isStartLine&&Object(n.h)(t,null,Object(n.h)("nobr",null,k?Object(n.h)(t,null,Object(n.h)("span",{class:g},o.a.secToHms(P+k,!0))," ",Object(n.h)("span",{class:"text-muted font-weight-lighter"},"/ ",o.a.secToHms(m+60*y.timeEqualization,!0))):Object(n.h)(t,null,o.a.secToHms(P,!0))))))),Object(n.h)("td",{class:"text-center"},e.isStartLine||c.timestamp?Object(n.h)(t,null," "):Object(n.h)(t,null,p>0&&Object(n.h)("nobr",null,o.a.format(p||0,0)," ",Object(n.h)("span",{class:"text-muted font-weight-lighter"},"%")))),Object(n.h)("td",{class:"text-center"},Object(n.h)("nobr",null,e.distanceFromPrev||0," ",Object(n.h)("span",{class:"text-muted font-weight-lighter"},"km"))),Object(n.h)("td",{class:"text-center"},Object(n.h)("nobr",null,I," ",Object(n.h)("span",{class:"text-muted font-weight-lighter"},"km"))))),i&&i.timestamp&&(R=i.timestamp,E=u)}else{var S,C,F,M,A=E?1e3*e.distanceFromPrev/(E/3.6)/60:e.estTimeToCpMinutes||0;e.isStartLine?(S=y.startTime||f.startDate,F=0):R&&(S=r.a.addDeltaSec(R,60*A),C=r.a.addDeltaSec(S,F=e.isStartLine?0:e.requiredRestMinutes&&e.timeEqualization&&y.timeEqualization?60*e.requiredRestMinutes+60*y.timeEqualization:e.requiredRestMinutes>0?60*e.requiredRestMinutes:60*(e.estRestMinutes||180)),R=C),x&&x.timestamp&&(M=r.a.deltaSec(x.timestamp,s)),u=E||e.distanceFromPrev/(60*A/3600),b=Object(n.h)("tr",null,Object(n.h)("td",null,e.name),x&&x.timestamp?Object(n.h)(t,null,Object(n.h)("td",{class:"text-center text-info font-weight-light"},!e.isStartLine&&S&&Object(n.h)("nobr",null,"est:",Object(n.h)("span",{class:"text-muted mr-1 ml-1"},r.a.formatDate(S,{locale:"en-GB",day:"numeric",month:"numeric"})),r.a.formatDate(S,{locale:"en-GB",hour12:!1,hour:"2-digit",minute:"2-digit"})))):Object(n.h)(t,null,Object(n.h)("td",{class:"text-center text-muted font-weight-lighter"},!e.isStartLine&&S&&Object(n.h)("nobr",null,Object(n.h)("span",{class:"text-muted mr-1"},r.a.formatDate(S,{locale:"en-GB",day:"numeric",month:"numeric"})),r.a.formatDate(S,{locale:"en-GB",hour12:!1,hour:"2-digit",minute:"2-digit"})))),Object(n.h)("td",{class:"text-center text-muted font-weight-lighter"},!e.isFinishLine&&C&&Object(n.h)("nobr",null,Object(n.h)("span",{class:"text-muted mr-1"},r.a.formatDate(C,{locale:"en-GB",day:"numeric",month:"numeric"})),r.a.formatDate(C,{locale:"en-GB",hour12:!1,hour:"2-digit",minute:"2-digit"}))),x&&x.timestamp?Object(n.h)(t,null,Object(n.h)("td",{class:"text-center text-info"},Object(n.h)("nobr",null,o.a.secToHms(M,!0)))):Object(n.h)(t,null,Object(n.h)("td",{class:"text-center text-muted font-weight-lighter"},!e.isStartLine&&Object(n.h)("nobr",null,o.a.secToHms(60*e.estTimeToCpMinutes,!0)))),Object(n.h)("td",{class:"text-center text-muted font-weight-lighter"},!e.isStartLine&&Object(n.h)("nobr",null,o.a.format(u||0,1)," ",Object(n.h)("span",{class:"text-muted font-weight-lighter"},"km/t"))),x&&x.timestamp?Object(n.h)(t,null,Object(n.h)("td",{class:"text-center text-info"},Object(n.h)("nobr",null,o.a.secToHms(M+T,!0)))):Object(n.h)(t,null,Object(n.h)("td",{class:"text-center text-muted font-weight-lighter"}," ")),Object(n.h)("td",{class:"text-center text-muted font-weight-lighter"},!e.isStartLine&&!e.isFinishLine&&Object(n.h)("nobr",null,o.a.secToHms(F,!0))),Object(n.h)("td",{class:"text-center text-muted font-weight-lighter"}," "),Object(n.h)("td",{class:"text-center text-muted font-weight-lighter"}," "),Object(n.h)("td",{class:"text-center"},Object(n.h)("nobr",null,e.distanceFromPrev||0," ",Object(n.h)("span",{class:"text-muted font-weight-lighter"},"km"))),Object(n.h)("td",{class:"text-center text-muted font-weight-lighter"}," "),Object(n.h)("td",{class:"text-center text-muted font-weight-lighter"}," "))}return x=i,a,b})))))))},s}(n.Component))||a;e.a=l}).call(this,s("hosL").Fragment)},TiXY:function(t,e,s){"use strict";var a,n=s("hosL"),o=s("/eY4"),i=(s("cneo"),s("Utv1"),s("OhSV")),r=s("u2zT"),c=Object(o.a)(a=function(t){function e(e){var s;return(s=t.call(this,e)||this).handleAddImage=function(t){var e=s.props;(0,e.updateField)({id:e.object.id,field:e.field,value:t})},s.state={files:[]},s}var s,a;return a=t,(s=e).prototype=Object.create(a.prototype),s.prototype.constructor=s,s.__proto__=a,e.prototype.render=function(){var t=this.props,e=t.uploadStatus,s=void 0===e?function(){}:e,a=t.before,o=void 0===a?function(){}:a,c=t.after,l=void 0===c?function(){}:c,d=t.autoOpen,h=void 0!==d&&d;return Object(n.h)("div",{class:"row"},Object(n.h)("div",{class:"col-12"},Object(n.h)(i.c,{id:"form.files.upload-file"},"Last opp fil"),":",Object(n.h)("br",null),Object(n.h)(r.a,{handleAddImage:this.handleAddImage,apiUrl:"/api/fileupload",uploadStatus:s,before:o,after:l,autoOpen:h},Object(n.h)("div",{style:{height:30,width:"100%"}}))))},e}(n.Component))||a;e.a=c},ULR1:function(t,e,s){"use strict";(function(t){var a,n=s("hosL"),o=s("Utv1"),i=s("/eY4"),r=(s("OhSV"),s("Y3FI"),s("fh8t"),s("go65"),s("om2D"),s("AEg1")),c=s("gOLw"),l=(s("ZOvn"),Object(i.a)(a=function(e){function s(t){var s;return(s=e.call(this,t)||this).addRaceArticle=function(){return new Promise((function(t,e){var a;return a=s.props.race,Promise.resolve(s.props.stores.raceStore.addArticle({id:(void 0===a?{}:a).id,newArticle:s.state.newRaceArticle})).then((function(){try{return s.setState({newRaceArticle:{}}),t()}catch(t){return e(t)}}),e)}))},s.editRaceArticle=function(t){return new Promise((function(e){var a,n=t.target.dataset,i=n.id,r=n.field,c=t.target.value,l=s.props.race,d=(void 0===l?{}:l).id,h=s.props.stores.raceStore,u=((a={raceArticleId:i})["raceArticle"+o.a.ucfirst(r)]=c,a);return clearTimeout(s.updateTimer[d+"-"+i+"-"+r]),s.updateTimer[d+"-"+i+"-"+r]=setTimeout((function(){return new Promise((function(t){return h.editArticle({id:d,data:u}),t()}))}),1500),s.resizeTextarea(t.target),e()}))},s.removeRaceArticle=function(t){return new Promise((function(e,a){var n;return n=s.props.race,Promise.resolve(s.props.stores.raceStore.removeArticle({id:(void 0===n?{}:n).id,articleId:t.target.parentElement.dataset.id||t.target.dataset.id})).then((function(){try{return e()}catch(t){return a(t)}}),a)}))},s.updateArticleUpload=function(t){var e=s.state.newRaceArticle;e[t.field]=t.value,s.setState({newRaceArticle:e})},s.resizeTextarea=function(t){var e=t;e.target&&(e=t.target),e.style.height=e.scrollHeight+"px"},s.handleImageErrored=function(t){var e=t.target;e.onerror=null,setTimeout((function(){e.src+="?"+new Date}),1e3)},s.state={newRaceArticle:{}},s.inputRef={},s.updateTimer={},s}var a,i;return i=e,(a=s).prototype=Object.create(i.prototype),a.prototype.constructor=a,a.__proto__=i,s.prototype.render=function(){var e=this.props.stores,s=e.userStore,a=s.user,o=void 0===a?{}:a,i=this.props.race,l=void 0===i?{}:i,d=["news"];return l.tag&&l.tag.split(",").forEach((function(t){d.push(t.trim())})),Object(n.h)(t,null,o.id&&Object(n.h)(r.a,{stores:this.props.stores,hashTags:d,postfix:"[🔗 "+l.title+": News](/app-races/"+l.id+"/news)",topic:"race-"+l.id}),Object(n.h)(c.a,{stores:this.props.stores,hashtags:d}))},s}(n.Component))||a);e.a=l}).call(this,s("hosL").Fragment)},UUHd:function(t,e,s){"use strict";var a,n=s("hosL"),o=(s("Utv1"),s("/eY4")),i=s("OhSV"),r=s("go65"),c=s("ZOvn"),l=Object(o.a)(a=function(t){function e(){for(var e,s=arguments.length,a=new Array(s),n=0;n<s;n++)a[n]=arguments[n];return(e=t.call.apply(t,[this].concat(a))||this).commentRace=function(){return new Promise((function(t,s){var a,n,o,i,r,c;return o=void 0===(n=(a=e.props).callback)?function(){}:n,i=e.props.race,r=e.state.comment,Promise.resolve(e.props.stores.raceStore.commentReplyRace({id:i.id,commentId:a.commentId,comment:void 0===r?"":r})).then((function(a){try{return(c=a)&&200===c.status&&(e.setState({comment:""}),o({race:i,response:c})),t()}catch(t){return s(t)}}),s)}))},e}var s,a;return a=t,(s=e).prototype=Object.create(a.prototype),s.prototype.constructor=s,s.__proto__=a,e.prototype.render=function(){var t=this.props.inputRef,e=this.state.comment,s=this.props.stores.userStore.user,a=void 0===s?{}:s,o=c.a.displayNameShort(a),l=(c.a.displayName(a),a.image||(a.images?a.images[0]:void 0));return Object(n.h)("div",{class:"w-100"},Object(n.h)("div",{class:"d-flex mb-0 position-relative w-100"},Object(n.h)("div",{class:"text-center border rounded-circle imageRounded imageRoundedThumb",style:(l?"background-image: url('"+l.s3SmallLink+"'); background-size: cover;":"")+" border-width: 3px !important;"},!l&&Object(n.h)("span",{class:"font-weight-lighter",style:"font-size: 15px;"},o)),Object(n.h)("div",{class:"col pl-3",style:"line-height: 1.2em;"},Object(n.h)("div",{class:"d-flex bd-highlight"},Object(n.h)("div",{class:"p-0 w-100 bd-highlight"},Object(n.h)("label",{class:"sr-only",for:"inlineFormInput"},Object(n.h)(i.c,{id:"comments.comment"},"Kommentar")),Object(n.h)(i.b,null,Object(n.h)("textarea",{class:"form-control rounded-lg",type:"text",placeholder:Object(n.h)(i.c,{id:"comments.write-reply"},"Write a reply..."),onInput:Object(r.a)(this,"comment"),onKeyUp:c.a.resizeTextarea,onFocus:c.a.resizeTextarea,style:"height: 2.3em;",value:e,ref:t}))),Object(n.h)("div",{class:"p-0 pl-2 flex-shrink-1 bd-highlight"},Object(n.h)("button",{type:"button",class:"btn btn-sm btn-primary mb-2",onClick:this.commentRace},Object(n.h)("i",{class:"fas fa-paper-plane"})))))))},e}(n.Component))||a;e.a=l},VKmm:function(t,e,s){"use strict";function a(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,a)}return s}function n(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}var o,i=s("hosL"),r=s("Utv1"),c=s("/eY4"),l=s("OhSV"),d=(s("ZOvn"),s("eQ6k"),{requestSent:{}}),h=Object(c.a)(o=function(t){function e(e){var s;return(s=t.call(this,e)||this).requestFollowTeam=function(t){var e=s.props.stores,a=e.teamStore,n=e.userStore.user,o=t.target.closest("button").dataset.team;a.followRequest(parseInt(o,10),n);var i=s.state.requestSent;i[o]=!0,s.setState({requestSent:i})},s.getButton=function(t){var e=s.state.requestSent,a=s.props.stores.userStore.user,n=t.members&&t.members.findIndex((function(t){return t.id===a.id}))>-1,o=t.followers&&t.followers.indexOf(a.id)>-1,r=t.blockedFollowers&&t.blockedFollowers.indexOf(a.id)>-1,c=e[t.id]||t.followRequests&&t.followRequests.findIndex((function(t){return t.id===a.id}))>-1;return n?Object(i.h)("i",{class:"fas fa-home"}):o?Object(i.h)("button",{class:"btn btn-sm btn-block btn-outline-secondary float-right",onClick:s.unFollowTeam,disabled:"true","data-team":t.id},Object(i.h)("i",{class:"fas fa-link mr-2"}),Object(i.h)(l.c,{id:"teams.connect.is-following"},"Følger")):r?Object(i.h)("button",{class:"btn btn-sm btn-block btn-outline-secondary float-right",disabled:"true"},Object(i.h)("i",{class:"fas fa-hand-paper mr-2"}),Object(i.h)(l.c,{id:"teams.connect.is-blocked"},"Blokkert")):c?Object(i.h)("button",{class:"btn btn-sm btn-block btn-outline-secondary float-right",disabled:"true"},Object(i.h)("i",{class:"fas fa-hourglass-half mr-2"}),Object(i.h)(l.c,{id:"teams.connect.has-requested"},"Venter på godkjenning")):Object(i.h)("button",{class:"btn btn-sm btn-block btn-outline-success float-right",onClick:s.requestFollowTeam,"data-team":t.id},Object(i.h)("i",{class:"far fa-hand-point-right mr-2"}),Object(i.h)(l.c,{id:"teams.connect.follow"},"Følg"))},s.state=function(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?a(Object(s),!0).forEach((function(e){n(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):a(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}({},d),s}var s,o;o=t,(s=e).prototype=Object.create(o.prototype),s.prototype.constructor=s,s.__proto__=o;var c=e.prototype;return c.loadTeams=function(){return new Promise(function(t,e){return this.setState({isLoading:!0}),Promise.resolve(this.props.stores.teamStore.loadPublic({query:{notfollowing:1,array:1},limit:15})).then(function(){try{return this.setState({isLoading:!1}),t()}catch(t){return e(t)}}.bind(this),e)}.bind(this))},c.componentDidMount=function(){this.loadTeams()},c.render=function(){var t=this,e=this.props.stores,s=e.teamStore.publicTeamsToFollow,a=e.appState.darkmode;return s&&0!==s.length?Object(i.h)("div",{class:"row pb-1 bg-light"},Object(i.h)("div",{class:"col-12 col-sm-8 col-lg-6 offset-sm-2 offset-lg-3 mb-0 position-relative rounded rounded-lg py-3 bg-"+(a?"black":"white")+" shadow-sm"},Object(i.h)("div",{class:"container-fluid"},Object(i.h)("div",{class:"row"},Object(i.h)("div",{class:"col-12"},Object(i.h)("h5",null,Object(i.h)(l.c,{id:"teams.connect.teams-to-follow"},"Team du kan følge"),":"))),Object(i.h)("div",{class:"row"},Object(i.h)("div",{class:"d-flex flex-row flex-nowrap",style:"overflow: auto;"},r.a.isArray(s)&&s.map((function(e){var s=e.image&&e.image.s3SmallLink?e.image:null;return Object(i.h)("div",{class:"mr-2",style:"width: 110px;"},Object(i.h)("div",{class:"text-center border rounded-lg",style:s?'background-image: url("'+s.s3SmallLink+'"); background-size: cover; width: 110px; height: 100px;':"width: 110px; height: 100px;"},!s&&Object(i.h)("i",{class:"fas fa-users text-muted mt-3",style:"font-size: 40px;"})),Object(i.h)("small",null,Object(i.h)("div",{class:"text-overflow"},Object(i.h)("strong",null,e.name)),Object(i.h)("div",{class:"text-overflow"},e.place?e.place+", ":""," ",e.country,"  "),Object(i.h)("div",{class:"text-overflow"},Object(i.h)("small",{class:"text-muted"},e&&e.dogs&&Object(i.h)("span",{class:""},Object(i.h)("i",{class:"fas fa-dog"})," ",e.dogs.length),e&&e.followers&&Object(i.h)("span",{class:"ml-2"},Object(i.h)("i",{class:"fas fa-user"})," ",e.followers.length)))),Object(i.h)("div",null,t.getButton(e)))}))))))):""},e}(i.Component))||o;e.a=h},Ysxg:function(t,e,s){"use strict";(function(t){function a(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,a)}return s}function n(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}var o,i=s("hosL"),r=s("Utv1"),c=s("/eY4"),l=s("cneo"),d=s("OhSV"),h=s("fh8t"),u=s.n(h),b=s("go65"),p=s("UUHd"),m=s("ZOvn"),f={showAddComment:{},showAllComments:!1,showAllReplies:{},viewImageIdx:{},likeComment:{},likeReply:{},showOriginal:{}},O=Object(c.a)(o=function(e){function s(t){var s;return(s=e.call(this,t)||this).addLikeComment=function(t){return new Promise((function(e,a){var n,o,i,r,c,l,d;return o=void 0===(n=s.props.callback)?function(){}:n,i=t.target.closest(".commentContainer").dataset.id,r=s.props.race,c=s.props.stores.raceStore,(l=s.state.likeComment)[i]=!0,s.setState({likeComment:l}),setTimeout((function(){var t=s.state.likeComment;delete t[i],s.setState({likeComment:t})}),1200),Promise.resolve(c.likeRaceComment({id:r.id,commentId:i})).then((function(t){try{return(d=t)&&200===d.status&&o({type:"likeComment",race:r,commentId:i,response:d}),e(!0)}catch(t){return a(t)}}),a)}))},s.likeReply=function(t){return new Promise((function(e,a){var n,o,i,r,c,l,d,h;return o=void 0===(n=s.props.callback)?function(){}:n,i=t.target.closest(".replyContainer").dataset.id,r=t.target.closest(".replyContainer").dataset.comment,c=s.props.race,l=s.props.stores.raceStore,(d=s.state.likeReply)[i]=!0,s.setState({likeReply:d}),setTimeout((function(){var t=s.state.likeReply;delete t[i],s.setState({likeReply:t})}),1200),Promise.resolve(l.likeRaceCommentReply({id:c.id,replyId:i,commentId:r})).then((function(t){try{return(h=t)&&200===h.status&&o({type:"likeReply",race:c,commentId:r,replyId:i,response:h}),e()}catch(t){return a(t)}}),a)}))},s.replyComment=function(t){return new Promise((function(e){var a=t.target.parentElement.dataset.id||t.target.dataset.id,n=s.state.showAddComment;return n[a]=!n[a],s.setState({showAddComment:n},(function(){s.inputRef[a]&&s.inputRef[a].focus()})),e()}))},s.toggleComments=function(){s.setState({showAllComments:!s.state.showAllComments})},s.toggleReplies=function(t){var e=t.target.parentElement.dataset.id||t.target.dataset.id,a=s.state.showAllReplies;a[e]=!a[e],s.setState({showAllReplies:a})},s.toggleMenu=function(t){var e=t.target.closest("i").dataset.id,a=s.state.showMenu,n=void 0===a?{}:a;n[e]=!n[e],s.setState({showDeleteComment:{},showEdit:{},showMenu:n})},s.toggleEdit=function(t){var e=t.target.closest("button").dataset,a=e.id,n=e.comment,o=s.state.showEdit,i=void 0===o?{}:o;i[a]=!i[a],s.setState({showDeleteComment:{},showEdit:i,showMenu:{},commentEditText:n})},s.toggleDeleteComment=function(t){var e=t.target.closest("button").dataset.id,a=s.state.showDeleteComment,n=void 0===a?{}:a;n[e]=!n[e],s.setState({showDeleteComment:n,showEdit:{},showMenu:{}})},s.deleteComment=function(t){return new Promise((function(e,a){var n;return n=t.target.closest("button").dataset.id,Promise.resolve(s.props.stores.raceStore.deleteCommentRace({id:s.props.race.id,commentId:n})).then((function(){try{return s.setState({commentEditText:"",showDeleteComment:{},showEdit:{},showMenu:{}}),e()}catch(t){return a(t)}}),a)}))},s.deleteCommentReply=function(t){return new Promise((function(e,a){var n;return n=t.target.closest("button").dataset,Promise.resolve(s.props.stores.raceStore.deleteCommentReplyRace({id:s.props.race.id,commentId:n.commentid,replyId:n.id})).then((function(){try{return s.setState({commentEditText:"",showDeleteComment:{},showEdit:{},showMenu:{}}),e()}catch(t){return a(t)}}),a)}))},s.saveComment=function(t){return new Promise((function(e,a){var n;return n=t.target.closest("button").dataset.id,Promise.resolve(s.props.stores.raceStore.editCommentRace({id:s.props.race.id,commentId:n,comment:s.state.commentEditText})).then((function(){try{return s.setState({commentEditText:"",showDeleteComment:{},showEdit:{},showMenu:{}}),e()}catch(t){return a(t)}}),a)}))},s.saveCommentReply=function(t){return new Promise((function(e,a){var n;return n=t.target.closest("button").dataset,Promise.resolve(s.props.stores.raceStore.editCommentReplyRace({id:s.props.race.id,commentId:n.commentid,replyId:n.id,comment:s.state.commentEditText})).then((function(){try{return s.setState({commentEditText:"",showDeleteComment:{},showEdit:{},showMenu:{}}),e()}catch(t){return a(t)}}),a)}))},s.viewImage=function(t){var e=t.target.closest("img").dataset,a=s.state.viewImageIdx;a[e.id]=e.idx,s.setState({viewImageIdx:a})},s.translate=function(t){return new Promise((function(e,a){function n(){return s.setState({showOriginal:p,translatedText:f}),e()}var o,i,r,c,l,d,h,u,b,p,m,f,O;return t.preventDefault(),t.stopPropagation(),o=t.target.closest("button").dataset,c=s.props.race,d=(l=s.props.stores).raceStore,h=l.userStore.user,f=void 0===(m=(u=s.state).translatedText)?{}:m,(p=void 0===(b=u.showOriginal)?{}:b)[O=(r=o.commentid)+((i=o.replyid)?"-"+i:"")]=0,i?Promise.resolve(d.translateCommentReply({commentid:r,replyid:i,race:c,user:h})).then(function(t){try{return f[O]=t,n.call(this)}catch(t){return a(t)}}.bind(this),a):Promise.resolve(d.translateComment({commentid:r,race:c,user:h})).then(function(t){try{return f[O]=t,n.call(this)}catch(t){return a(t)}}.bind(this),a)}))},s.showOriginal=function(t){var e=t.target.closest("button").dataset,a=e.replyid,n=e.commentid;t.preventDefault(),t.stopPropagation();var o=s.state.showOriginal,i=void 0===o?{}:o;i[n+(a?"-"+a:"")]=1,s.setState({showOriginal:i})},s.state=function(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?a(Object(s),!0).forEach((function(e){n(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):a(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}({},f),s.inputRef={},s}var o,c;return c=e,(o=s).prototype=Object.create(c.prototype),o.prototype.constructor=o,o.__proto__=c,s.prototype.render=function(){var e=this,s=this.state,a=s.showAddComment,n=s.showAllComments,o=s.showAllReplies,c=s.viewImageIdx,h=s.showMenu,f=void 0===h?{}:h,O=s.showEdit,g=void 0===O?{}:O,j=s.showDeleteComment,v=void 0===j?{}:j,y=s.commentEditText,w=s.likeComment,x=s.showOriginal,k=void 0===x?{}:x,S=s.translatedText,C=void 0===S?{}:S,I=this.props,D=I.race,T=I.callback,P=void 0===T?function(){}:T,R=I.initCall,E=void 0===R?function(){}:R,F=I.col,M=void 0===F?12:F,A=I.offset,L=void 0===A?0:A,N=I.compact,B=this.props.stores,z=B.raceStore,H=B.userStore.user,U=H.language,_=void 0===U?"en":U,V=[],q=0,K=0;if(D.comments){if(q=D.comments.length,n)V=D.comments;else V=D.comments.slice(Math.max(q-(void 0!==N&&N?0:2),0));K=V.length}return Object(i.h)("div",{class:"col-"+M+" offset-"+L+" col-sm-8 col-lg-6 offset-sm-2 offset-lg-3"},D&&r.a.isArray(V)&&V.reverse().map((function(s){var n=s.user,h=void 0===n?{}:n,O=z.findPublicTeamByMembers(h.id),j=m.a.displayNameShort(h),x=m.a.displayName(h),S=h.image||(h.images?h.images[0]:void 0),I=s.likes&&s.likes.findIndex((function(t){return t.user===H.id}))>-1,T=[],R=0,F=0;s.comments&&(R=s.comments.length,F=(T=o[s.id]?s.comments:s.comments.slice(0,void 0)).length);var M=[];if(s.images){var A=Object(l.i)(s.images);M.push.apply(M,A)}var L=c[s.id]?c[s.id]:0,N=M&&M[L]?M[L]:null,B=z.getCommentTranslations({race:D,commentid:s.id,targetLang:_})||C[s.id],U=B||s.comment;return k[s.id]&&(U=s.comment),Object(i.h)("div",{class:"row"},Object(i.h)("div",{class:"col-11 offset-1 d-flex mb-2 position-relative"},Object(i.h)("div",{class:"text-center border rounded-circle imageRounded imageRoundedSmall",style:(S?'background-image: url("'+S.s3SmallLink+'"); background-size: cover;':"")+" border-width: 3px !important;"},!h.image&&Object(i.h)("span",{class:"font-weight-lighter",style:"font-size: 15px;"},j)),Object(i.h)("div",{class:"flex-grow-1 pl-3 pt-0",style:"line-height: 1.2em;"},Object(i.h)("div",{class:"bg-light p-2 rounded rounded-lg position-relative"},H.id===h.id&&Object(i.h)(t,null,Object(i.h)("span",{class:"float-right font-weight-lighter text-muted"},Object(i.h)("i",{class:"fas fa-ellipsis-h",onClick:e.toggleMenu,"data-id":s.id}))),f[s.id]&&Object(i.h)(t,null,Object(i.h)("div",{class:"position-absolute bg-white p-2 border rounded rounded-lg shadow-sm",style:"top: 30px; right: 10px; width: 60%; z-index: 999999;"},Object(i.h)("button",{class:"btn btn-link btn-block text-left",onClick:e.toggleEdit,"data-id":s.id,"data-comment":s.comment},Object(i.h)("i",{class:"fas fa-edit"})," Edit"),Object(i.h)("hr",null),Object(i.h)("button",{class:"btn btn-link btn-block text-left",onClick:e.toggleDeleteComment,"data-id":s.id},Object(i.h)("i",{class:"fas fa-trash-alt"})," Delete"))),Object(i.h)("div",null,Object(i.h)("span",{style:"font-size: 0.95em;"},Object(i.h)("h5",{class:"font-weight-bold mb-2",style:"font-size: 1.0em;"},h.uuidv4&&h.uuidv4!==H.uuidv4?Object(i.h)(t,null,Object(i.h)("a",{href:"/inbox/"+h.uuidv4},x)):Object(i.h)(t,null,x),O&&O.length>0&&Object(i.h)(t,null,Object(i.h)("span",{class:"font-weight-lighter text-muted ml-1"},O.filter((function(t){return 1===t.public})).slice(0,1).map((function(e){return Object(i.h)(t,null,"- ",Object(i.h)("a",{href:"/teams/public/"+e.uuidv4},e.name))}))))),g[s.id]?Object(i.h)(t,null,Object(i.h)("div",{class:"d-flex bd-highlight"},Object(i.h)("div",{class:"p-0 w-100 bd-highlight"},Object(i.h)("label",{class:"sr-only",for:"inlineFormInput"},Object(i.h)(d.c,{id:"comments.comment"},"Kommentar")),Object(i.h)("div",{class:"border rounded rounded-lg position-relative"},Object(i.h)(d.b,null,Object(i.h)("textarea",{class:"form-control-plaintext px-2",type:"text",placeholder:Object(i.h)(d.c,{id:"comments.write-comment"},"Skriv en kommentar..."),onInput:Object(b.a)(e,"commentEditText"),onKeyUp:m.a.resizeTextarea,onFocus:m.a.resizeTextarea,style:"height: 2.3em;",value:y})))),Object(i.h)("div",{class:"p-0 pl-2 flex-shrink-1 bd-highlight"},Object(i.h)("button",{type:"button",class:"btn btn-primary mb-2",onClick:e.saveComment,"data-id":s.id},Object(i.h)("i",{class:"fas fa-paper-plane"}))))):Object(i.h)(t,null,Object(i.h)(u.a,{markdown:m.a.replaceImages(U,s.images,_),markdownOpts:m.a.getMarkdownOptions()})),v[s.id]&&Object(i.h)("div",{class:"clearfix mt-3 mb-3"},Object(i.h)("button",{class:"btn btn-danger float-left",onClick:e.deleteComment,"data-id":s.id},Object(i.h)("i",{class:"fas fa-trash-alt"})," Delete"),Object(i.h)("button",{class:"btn btn-secondary float-right",onClick:e.toggleDeleteComment,"data-id":s.id},Object(i.h)("i",{class:"fas fa-times-circle"})," Cancel")))),Object(i.h)("div",null,Object(i.h)("div",{class:"container-fluid px-3 mt-1"},N&&Object(i.h)("div",{class:"clearfix row position-relative"},Object(i.h)("div",{class:"commentContainer col-12 px-0 overflow-hidden",style:"max-height: 60vh;",onDblclick:e.addLikeComment,"data-id":s.id},Object(i.h)("img",{loading:"lazy",class:"img-fluid",style:"min-width: 100px;",src:N.s3LargeLink})),w[s.id]&&Object(i.h)("span",{class:"likeHeart position-absolute text-white display-1",style:"top: calc(50% - 50px); left: calc(50% - 50px); width: 100px; height: 100px;"},Object(i.h)("i",{class:"fas fa-heart likeStory"}))),M&&M.length>1&&Object(i.h)("div",{class:"clearfix d-flex flex-wrap row"},r.a.isArray(M)&&M.map((function(a,n){return Object(i.h)(t,null,Object(i.h)("div",{class:"col px-0 overflow-hidden",style:"max-height: 100px; min-width: 100px;"},Object(i.h)("img",{loading:"lazy",class:"img-fluid border",style:"min-width: 100px;",src:a.s3SmallLink,onClick:e.viewImage,"data-id":s.id,"data-idx":n})))})))))),Object(i.h)("small",null,Object(i.h)("button",{class:"commentContainer btn btn-sm btn-link py-0 "+(I?"text-primary":""),onClick:e.addLikeComment,"data-id":s.id,disabled:I},I?Object(i.h)(d.c,{id:"comments.has-liked"},"Liked"):Object(i.h)(d.c,{id:"comments.like"},"Lik")),"-",Object(i.h)("button",{class:"btn btn-sm btn-link py-0",onClick:e.replyComment,"data-id":s.id},Object(i.h)(d.c,{id:"comments.comment-add"},"Kommentar")),s.language!==_&&Object(i.h)(t,null,"-",!k[s.id]&&B?Object(i.h)(t,null,Object(i.h)("button",{type:"button",class:"btn btn-sm btn-link","data-commentid":s.id,onClick:e.showOriginal},Object(i.h)("i",{class:"fas fa-cog"}),"  ",Object(i.h)(d.c,{id:"home.translate-show-original"},"Show original"))):Object(i.h)(t,null,Object(i.h)("button",{type:"button",class:"btn btn-sm btn-link",onClick:e.translate,"data-commentid":s.id},Object(i.h)("i",{class:"fas fa-cog"})," ",Object(i.h)(d.c,{id:"home.translate-to"},"See translation")))),"-",Object(i.h)("button",{class:"btn btn-sm btn-link py-0 disabled"},r.a.formatDistance(s.createdDate,new Date,{locale:"no-NB"}),s.updatedDate&&Object(i.h)(t,null,Object(i.h)("span",{class:"font-weight-light ml-2"},"(Edited ",r.a.formatDistance(s.updatedDate,new Date,{locale:"no-NB"}),")"))))),s.likes&&s.likes.length>0&&Object(i.h)("small",{class:"position-absolute bg-light shadow-sm rounded-lg py-0 px-1",style:"bottom: 20px; right: 15px;"},Object(i.h)("i",{class:"fas fa-thumbs-up text-primary"})," ",s.likes.length)),Object(i.h)("div",{class:"col-10 offset-2 mb-2"},s&&r.a.isArray(T)&&T.map((function(a){var n=a.user,o=void 0===n?{}:n,c=z.findPublicTeamByMembers(o.id),l=m.a.displayNameShort(o),h=m.a.displayName(o),p=o.image||(o.images?o.images[0]:void 0),O=a.likes&&a.likes.findIndex((function(t){return t.user===H.id}))>-1,j=z.getCommentReplyTranslations({race:D,commentid:s.id,replyid:a.id,targetLang:_})||C[s.id+"-"+a.id],w=j||a.comment;return k[s.id+"-"+a.id]&&(w=a.comment),Object(i.h)("div",{class:"row"},Object(i.h)("div",{class:"col-12 d-flex mb-2 position-relative"},Object(i.h)("div",{class:"text-center border rounded-circle imageRounded imageRoundedSmall",style:(p?'background-image: url("'+p.s3SmallLink+'"); background-size: cover;':"")+" border-width: 3px !important;"},!o.image&&Object(i.h)("span",{class:"font-weight-lighter",style:"font-size: 15px;"},l)),Object(i.h)("div",{class:"flex-grow-1 pl-3 pt-0",style:"line-height: 1.2em;"},Object(i.h)("div",{class:"bg-light p-2 rounded-lg position-relative"},H.id===o.id&&Object(i.h)(t,null,Object(i.h)("span",{class:"float-right font-weight-lighter text-muted"},Object(i.h)("i",{class:"fas fa-ellipsis-h",onClick:e.toggleMenu,"data-id":a.id}))),f[a.id]&&Object(i.h)(t,null,Object(i.h)("div",{class:"position-absolute bg-white p-2 border rounded rounded-lg shadow-sm",style:"top: 30px; right: 10px; width: 60%; z-index: 999999;"},Object(i.h)("button",{class:"btn btn-link btn-block text-left",onClick:e.toggleEdit,"data-id":a.id,"data-comment":a.comment},Object(i.h)("i",{class:"fas fa-edit"})," Edit"),Object(i.h)("hr",null),Object(i.h)("button",{class:"btn btn-link btn-block text-left",onClick:e.toggleDeleteComment,"data-id":a.id},Object(i.h)("i",{class:"fas fa-trash-alt"})," Delete"))),Object(i.h)("span",{style:"font-size: 0.95em;"},Object(i.h)("h5",{class:"font-weight-bold mb-2",style:"font-size: 1.0em;"},h,c&&c.length>0&&Object(i.h)(t,null,Object(i.h)("span",{class:"font-weight-lighter text-muted ml-2"},c.filter((function(t){return 1===t.public})).slice(0,1).map((function(e){return Object(i.h)(t,null,"- ",Object(i.h)("a",{href:"/teams/public/"+e.uuidv4,class:"mr-2"}," ",e.name))}))))),g[a.id]?Object(i.h)(t,null,Object(i.h)("div",{class:"d-flex bd-highlight"},Object(i.h)("div",{class:"p-0 w-100 bd-highlight"},Object(i.h)("label",{class:"sr-only",for:"inlineFormInput"},Object(i.h)(d.c,{id:"comments.comment"},"Kommentar")),Object(i.h)("div",{class:"border rounded rounded-lg position-relative"},Object(i.h)(d.b,null,Object(i.h)("textarea",{class:"form-control-plaintext px-2",type:"text",placeholder:Object(i.h)(d.c,{id:"comments.write-comment"},"Skriv en kommentar..."),onInput:Object(b.a)(e,"commentEditText"),onKeyUp:m.a.resizeTextarea,onFocus:m.a.resizeTextarea,style:"height: 2.3em;",value:y})))),Object(i.h)("div",{class:"p-0 pl-2 flex-shrink-1 bd-highlight"},Object(i.h)("button",{type:"button",class:"btn btn-primary mb-2",onClick:e.saveCommentReply,"data-commentid":s.id,"data-id":a.id},Object(i.h)("i",{class:"fas fa-paper-plane"}))))):Object(i.h)(t,null,Object(i.h)(u.a,{markdown:m.a.replaceImages(w,a.images,_),markdownOpts:m.a.getMarkdownOptions()})),v[a.id]&&Object(i.h)("div",{class:"clearfix mt-3 mb-3"},Object(i.h)("button",{class:"btn btn-danger float-left",onClick:e.deleteCommentReply,"data-id":a.id,"data-commentid":s.id},Object(i.h)("i",{class:"fas fa-trash-alt"})," Delete"),Object(i.h)("button",{class:"btn btn-secondary float-right",onClick:e.toggleDeleteComment,"data-id":a.id},Object(i.h)("i",{class:"fas fa-times-circle"})," Cancel")))),Object(i.h)("small",null,Object(i.h)("button",{class:"replyContainer btn btn-sm btn-link py-0 "+(O?"text-primary":""),onClick:e.likeReply,"data-comment":s.id,"data-id":a.id,disabled:O},O?Object(i.h)(d.c,{id:"comments.has-liked"},"Liked"):Object(i.h)(d.c,{id:"comments.like"},"Lik")),"-",Object(i.h)("button",{class:"btn btn-sm btn-link py-0",onClick:e.replyComment,"data-id":s.id},Object(i.h)(d.c,{id:"comments.comment-add"},"Kommentar")),a.language!==_&&Object(i.h)(t,null,"-",!k[s.id+"-"+a.id]&&j?Object(i.h)(t,null,Object(i.h)("button",{type:"button",class:"btn btn-sm btn-link","data-commentid":s.id,"data-replyid":a.id,onClick:e.showOriginal},Object(i.h)("i",{class:"fas fa-cog"}),"  ",Object(i.h)(d.c,{id:"home.translate-show-original"},"Show original"))):Object(i.h)(t,null,Object(i.h)("button",{type:"button",class:"btn btn-sm btn-link",onClick:e.translate,"data-commentid":s.id,"data-replyid":a.id},Object(i.h)("i",{class:"fas fa-cog"})," ",Object(i.h)(d.c,{id:"home.translate-to"},"See translation")))),"-",Object(i.h)("button",{class:"btn btn-sm btn-link py-0 disabled"},r.a.formatDistance(a.createdDate,new Date,{locale:"no-NB"}),a.updatedDate&&Object(i.h)(t,null,Object(i.h)("span",{class:"font-weight-light ml-2"},"(Edited ",r.a.formatDistance(a.updatedDate,new Date,{locale:"no-NB"}),")"))))),a.likes&&Object(i.h)("small",{class:"position-absolute bg-light shadow-sm rounded-lg py-0 px-1",style:"bottom: 20px; right: 15px;"},Object(i.h)("i",{class:"fas fa-thumbs-up text-primary"})," ",a.likes.length)))})),R-F>0&&Object(i.h)("div",null,Object(i.h)("button",{class:"btn btn-sm btn-link py-0",onClick:e.toggleReplies,"data-id":s.id},Object(i.h)(d.c,{id:"comments.show-more",fields:{more:R-F}},"Vis ",R-F," flere kommentarer...")))),a[s.id]&&Object(i.h)("div",{class:"col-11 offset-1 d-flex mb-2 position-relative"},Object(i.h)(p.a,{stores:e.props.stores,race:D,initCall:E,callback:P,commentId:s.id,inputRef:function(t){return e.inputRef[s.id]=t},inputRefObject:e.inputRef,key:"race-commentreply-"+s.id})))})),q-K>0&&Object(i.h)("div",null,Object(i.h)("button",{class:"btn btn-sm btn-link py-0",onClick:this.toggleComments},Object(i.h)(d.c,{id:"comments.show-more",fields:{more:q-K}},"Vis ",q-K," flere kommentarer..."))),n&&Object(i.h)("div",null,Object(i.h)("button",{class:"btn btn-sm btn-link py-0",onClick:this.toggleComments},Object(i.h)(d.c,{id:"comments.hide-all-comments"},"Skjul alle kommentarene."))))},s}(i.Component))||o;e.a=O}).call(this,s("hosL").Fragment)},aGZh:function(t,e,s){"use strict";(function(t){function e(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,a)}return s}function a(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}var n,o=s("hosL"),i=s("/eY4"),r={};Object(i.a)(n=function(s){function n(t){var n;return(n=s.call(this,t)||this).state=function(t){for(var s=1;s<arguments.length;s++){var n=null!=arguments[s]?arguments[s]:{};s%2?e(Object(n),!0).forEach((function(e){a(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):e(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},r),n}var i,c;return c=s,(i=n).prototype=Object.create(c.prototype),i.prototype.constructor=i,i.__proto__=c,n.prototype.render=function(){var e=this.props.stores.appState,s=this.props.text,a=e.language,n=void 0===a?"en":a,i=s,r=new RegExp("/<"+n+">(.*?)</"+n+">/");return s.replace(r,"$1")&&(i=s),Object(o.h)(t,null,i)},n}(o.Component))}).call(this,s("hosL").Fragment)},aMCh:function(t,e,s){"use strict";(function(t){function a(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}var n,o,i,r=s("hosL"),c=s("Utv1"),l=s("/eY4"),d=(s("OhSV"),s("fh8t"),s("ZOvn")),h=Object(l.a)(n=function(e){function s(){return e.apply(this,arguments)||this}return a(s,e),s.prototype.render=function(){var e=this.props,s=e.checkpoints,a=e.thClass,n=e.thStyle,o=e.selectedCheckpointId,i=e.width,c=e.widthCp,l=e.onClickCheckpoint,d=void 0===l?function(){}:l,h=e.dotColor;return Object(r.h)(t,null,s&&s.map((function(e,s){return Object(r.h)(t,null,s>0&&Object(r.h)("th",{class:a,style:n},Object(r.h)("div",{class:"",style:"width: "+i+"px;"}," ")),Object(r.h)("th",{class:a,style:n},Object(r.h)("div",{class:"checkpoint position-relative "+(o===e.id?"text-primary":""),style:"width: "+c+"px; font-size: 1.1em;",onClick:d,"data-id":e.id},Object(r.h)("i",{class:"fas fa-campground"}),Object(r.h)("div",{class:"rounded-pill-both px-1 text-center position-absolute "+(h?"":"bg-secondary")+" font-weight-bold",style:"bottom: 0px; right: -20px; font-size: 0.6em; "+(h?"background-color: "+h+";":"")},e.sortOrder&&"n/a"!==e.sortOrder&&Object(r.h)(t,null,e.sortOrder)))))})))},s}(r.Component))||n,u=Object(l.a)(o=function(e){function s(){return e.apply(this,arguments)||this}return a(s,e),s.prototype.render=function(){var e=this.props,s=e.currentClass,a=e.contestants,n=e.limit,o=e.onClickMusher,i=e.tdClass,l=e.tdStyle,h=e.progressStyle,u=e.progressbarStyle,b=s.checkpoints,p=void 0===b?[]:b,m=s.results,f=void 0===m?[]:m,O=a&&n?a.slice(0,n):a,g=this.props.stores.raceStore.sortedContestants,j=void 0===g?[]:g,v=60*s.requiredRestMinutes,y=Math.floor((new Date).getTime()/1e3,10);return Object(r.h)(t,null,O&&O.map((function(e,s){var a,n,b,m,O=0,g=0,w=j?j.find((function(t){return t.bib===parseInt(e.bib,10)})):null;return w=w||{},Object(r.h)(t,null,Object(r.h)("tr",{class:"musher",onClick:o,"data-bib":e.bib},Object(r.h)("td",{class:i,style:l},e.startTime?c.a.isoTime(e.startTime):""),p&&p.map((function(s,o){var c,p,j=f.slice().filter((function(t){return t.checkpoint===s.id})).sort((c=["timestamp"],function(t,e){return c.map((function(s){var a=1;return"-"===s[0]&&(a=-1,s=s.substring(1)),t[s]>e[s]?a:t[s]<e[s]?-a:0})).reduce((function(t,e){return t||e}),0)})),w=j.filter((function(t){return parseInt(t.bib,10)==e.bib})),x=w.find((function(t){return"out"===t.direction})),k=w.find((function(t){return"in"===t.direction})),S=w.find((function(t){return"scratched"===t.direction})),C=j.filter((function(t){return"in"===t.direction||"scratched"===t.direction})).findIndex((function(t){return parseInt(t.bib,10)==e.bib})),I=j.filter((function(t){return"out"===t.direction})).findIndex((function(t){return parseInt(t.bib,10)==e.bib})),D=0;if(!s.isStartLine&&k&&x&&k.timestamp&&x.timestamp&&(D=d.a.deltaSec(k.timestamp,x.timestamp)),g+=D||0,!x&&k&&!s.isStartLine&&s.timeEqualization&&v){var T=d.a.deltaSec(k.timestamp,y);p=(p=(g+T)/v*100)>100?100:p}if(m)return"";if(-1===C){if(a){var P=Math.floor((new Date).getTime()/1e3),R=Math.floor(new Date(a.timestamp).getTime()/1e3),E=Math.floor((P-R)/60),F=E/s.estTimeToCpMinutes*100;F=F>95?95:F;var M=Object(r.h)(t,null,Object(r.h)("td",{class:"text-center align-middle px-0 pr-1 "+i,style:l},Object(r.h)("div",{class:"progress",style:""+h},Object(r.h)("div",{class:"progress-bar progress-bar-striped",role:"progressbar",style:"width: "+F+"%; "+u,"aria-valuenow":F,"aria-valuemin":"0","aria-valuemax":"100","data-prevtimestamp":a.timestamp,"data-timeUsedOnStage":E,"data-estTimeToCpMinutesPrev":b,"data-nowEpoch":P,"data-prevCpOutEpoch":R},n+1>0?n+1:"")),e.cpId&&w.length>0&&Object(r.h)(t,null)));return n=I,a=x,b=s.estTimeToCpMinutes,M}return""}O=o,n=I,a=x,b=s.estTimeToCpMinutes;var A=Object(r.h)(t,null,(k||S)&&o>0&&Object(r.h)(t,null,Object(r.h)("td",{class:"text-center align-middle px-0 pr-1 "+i,style:l},Object(r.h)("div",{class:"progress",style:""+h},Object(r.h)("div",{class:"progress-bar",role:"progressbar",style:"width: 100%; "+u,"aria-valuenow":"100","aria-valuemin":"0","aria-valuemax":"100"})),e.cpId&&w.length>0&&Object(r.h)(t,null))),Object(r.h)("td",{class:"text-center align-middle px-0 pr-1 "+i,style:l},Object(r.h)("div",{class:"progress",style:""+h},Object(r.h)("div",{class:"progress-bar "+(p>0?"progress-bar-striped":"")+" "+(S?"bg-danger":"bg-success"),role:"progressbar",style:"width: "+(p||100)+"%; "+u,"aria-valuenow":p,"aria-valuemin":"0","aria-valuemax":"100"},S?Object(r.h)("i",{class:"fas fa-times"}):Object(r.h)(t,null,C+1>0?C+1:""))),e.cpId&&w.length>0&&Object(r.h)(t,null)));return m=S,A})),Object(r.h)("td",{colspan:2*p.length-O,class:i,style:l},Object(r.h)("div",{class:"d-flex flex-nowrap"},Object(r.h)("div",{class:"text-white font-weight-bolder pl-2 pr-1 py-0 rounded-pill-left rounded-none mr-2",style:"background-color: "+d.a.getRankingColor(s+1)+"; width: 45px;"},e.bib),Object(r.h)("div",null,Object(r.h)("nobr",null,e.flag," ",e.lastname))))))})))},s}(r.Component))||o,b=Object(l.a)(i=function(e){function s(){return e.apply(this,arguments)||this}a(s,e);var n=s.prototype;return n.componentWillReceiveProps=function(t){if(this.props.currentClass.id!==t.currentClass.id||this.props.reloadLastEpoch!==t.reloadLastEpoch){var e=this.props.currentClass,s=e.checkpoints,a=e.contestants,n=e.results;this.props.stores.raceStore.sortContestantsByResult({contestants:void 0===a?[]:a,results:void 0===n?[]:n,checkpoints:void 0===s?[]:s,sortOrderResults:e.sortOrderResults,startDate:e.startDate})}},n.componentDidMount=function(){var t=this.props.currentClass,e=t.checkpoints,s=t.contestants,a=t.results;this.props.stores.raceStore.sortContestantsByResult({contestants:void 0===s?[]:s,results:void 0===a?[]:a,checkpoints:void 0===e?[]:e,sortOrderResults:t.sortOrderResults,startDate:t.startDate})},n.render=function(){var e=this.props,s=e.currentClass,a=e.onClickMusher,n=void 0===a?function(){}:a,o=e.onClickCheckpoint,i=void 0===o?function(){}:o,c=e.selectedCheckpointId,l=e.limit,d=void 0===l?100:l,b=e.tableClass,p=void 0===b?"table-striped table-sm":b,m=e.thClass,f=e.thStyle,O=e.tdClass,g=e.tdStyle,j=e.progressStyle,v=void 0===j?"height: 20px;":j,y=e.progressbarStyle,w=s.checkpoints,x=void 0===w?[]:w,k=this.props.stores.raceStore.sortedContestants,S=void 0===k?[]:k;return Object(r.h)(t,null,Object(r.h)("div",{class:"table-responsive"},Object(r.h)("table",{class:"table "+p},Object(r.h)("thead",null,Object(r.h)("tr",null,Object(r.h)("th",{class:m,style:f},Object(r.h)("div",{class:"",style:"width: 40px;"},Object(r.h)("i",{class:"fas fa-flag"}))),Object(r.h)(h,{stores:this.props.stores,checkpoints:x,thClass:m,thStyle:f,selectedCheckpointId:c,width:40,widthCp:20,onClickCheckpoint:i,dotColor:"#808080"}),Object(r.h)("th",{class:m,style:f},Object(r.h)("div",{class:"",style:"width: 20px;"},Object(r.h)("i",{class:"fas fa-flag-checkered"}))))),Object(r.h)("tbody",null,Object(r.h)(u,{stores:this.props.stores,currentClass:s,contestants:S,limit:d,onClickMusher:n,tdClass:O,tdStyle:g,progressStyle:v,progressbarStyle:y})))))},s}(r.Component))||i;e.a=b}).call(this,s("hosL").Fragment)},epqT:function(t,e,s){"use strict";(function(t){function a(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,a)}return s}function n(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}var o,i=s("hosL"),r=s("Utv1"),c=s("/eY4"),l=s("OhSV"),d=(s("ZOvn"),{showAddComment:!1}),h=Object(l.d)((function(){return{subject:Object(i.h)(l.c,{id:"ad.subject"},"Annonseforespørsel"),body:Object(i.h)(l.c,{id:"ad.body"},"Hei, Jeg ønsker å vite mer om annonsering i appen The Musher.")}}))(o=Object(c.a)(o=function(e){function s(t){var s;return(s=e.call(this,t)||this).logClick=function(){return new Promise((function(t,e){var a,n,o,i,r;return i=void 0===(o=(n=(a=s.props.stores).adStore).ads)?[]:o,r=a.userStore.user,Promise.resolve(n.logClick({id:i.length>0?i[0].id:null,user:(void 0===r?{}:r).id})).then((function(){try{return t()}catch(t){return e(t)}}),e)}))},s.state=function(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?a(Object(s),!0).forEach((function(e){n(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):a(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}({},d),s.updateTimer={},s.inputRef={},s.apiServer=r.a.getApiServer(),s}var o,c;c=e,(o=s).prototype=Object.create(c.prototype),o.prototype.constructor=o,o.__proto__=c;var h=s.prototype;return h.loadAd=function(t){return new Promise(function(e,s){var a,n,o,i,r,c,l,d,h,u,b;return void 0===t&&(t=this.props),this.setState({isLoading:!0}),n=(a=this.props.stores).adStore,i=this.props.section,c=void 0===(r=a.appState.path)?"":r,h=void 0===(d=(o=a.userStore).user.language)?"en":d,u={},(l=a.workoutStore.currentTeam)&&(u=o.findTeam(l,!0))&&u.id&&(o.findTeamAmbition({ambition:u.ambitions,language:h}),o.findTeamType({type:u.type,language:h}),u.postalcode,u.place,u.country),c.replace(/\d+$/,"detail"),b=c.replace(/\/\d+/,"/detail"),Promise.resolve(n.load({query:{page:b,section:i}})).then(function(){try{return n.setTime(),this.setState({isLoading:!1}),e()}catch(t){return s(t)}}.bind(this),s)}.bind(this))},h.componentDidMount=function(){this.loadAd()},h.componentWillReceiveProps=function(t){t.path!==this.props.path&&this.loadAd(t)},h.render=function(){var e=this.props.stores,s=e.adStore,a=this.props,n=a.subject,o=a.body,r=a.section,c=e.appState.path,d=e.userStore.user,h=void 0===d?{}:d,u=s.ads,b=void 0===u?[]:u,p=s.time;if(!h||!h.id||!b||0===b.length)return c.match(/\/(home)/i)?Object(i.h)(t,null,Object(i.h)("div",{class:"w-100"},Object(i.h)("div",{class:"row"},Object(i.h)("div",{class:"col-12 col-sm-8 col-lg-6 offset-sm-2 offset-lg-3 mb-0 position-relative"},Object(i.h)("div",{class:"border rounded-lg p-4 my-3"},Object(i.h)("span",{class:"float-right display-4 text-warning"},Object(i.h)("i",{class:"far fa-smile-wink"})),Object(i.h)("h5",null,Object(i.h)(l.c,{id:"ad.heading"},"Vil du annonsere her?")),Object(i.h)("div",null,Object(i.h)(l.c,{id:"ad.teaser"},"Det er super enkelt :)")),Object(i.h)(l.b,null,Object(i.h)("a",{href:"mailto:post@themusher.no?subject="+n+": "+c+": "+r+"&body="+o,target:"_blank",rel:"noreferrer"},Object(i.h)("i",{class:"fas fa-paper-plane"})," ",Object(i.h)(l.c,{id:"ad.linktext"},"Ta kontakt med The Musher")))))))):Object(i.h)(t,null);var m=b[0];return Object(i.h)(t,null,Object(i.h)("div",{class:"w-100"},Object(i.h)("div",{class:"row"},Object(i.h)("div",{class:"col-12 col-sm-8 col-lg-6 offset-sm-2 offset-lg-3 mb-0 position-relative"},Object(i.h)("div",null,Object(i.h)("small",null,Object(i.h)("small",{class:"text-muted"},Object(i.h)(l.c,{id:"ad.ad"},"Annonse"),":",Object(i.h)("img",{src:this.apiServer+"/api/ads/"+m.id+"/view?user="+h.id+"&time="+p,style:"width: 1; height: 1; opacity: 0.1;"})))),m.target?Object(i.h)(t,null,Object(i.h)("a",{class:"stretched-link",href:""+m.url,target:m.target||"_blank",rel:"noopener noreferrer",onClick:this.logClick,native:!0},m.images&&m.images[0]&&Object(i.h)(t,null,Object(i.h)("img",{src:m.images[0].s3LargeLink,class:"img-fluid rounded-lg"})))):Object(i.h)(t,null,Object(i.h)("a",{class:"stretched-link",href:""+m.url,onClick:this.logClick},m.images&&m.images[0]&&Object(i.h)(t,null,Object(i.h)("img",{src:m.images[0].s3LargeLink,class:"img-fluid rounded-lg"}))))))))},s}(i.Component))||o)||o;e.a=h}).call(this,s("hosL").Fragment)},gOLw:function(t,e,s){"use strict";(function(t){function a(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,a)}return s}function n(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}var o,i=s("hosL"),r=s("Utv1"),c=s("/eY4"),l=(s("X9Km"),s("NMoA")),d=s("VKmm"),h=s("rWES"),u=s("epqT"),b=s("yHBq"),p=s("q/oJ"),m=s("gWxU"),f=s("Nanz"),O=s("ISGx"),g=s("ZOvn"),j=g.a.marginTop(!1),v={loading:!1,limit:10,offset:0,idxConfirm:0,idxSuggestion:1,idxAd:5,sessionid:(new Date).getTime()},y=["id","type","user","team","title"],w=Object(c.a)(o=function(e){function s(s){var o;return(o=e.call(this,s)||this).reloadStories=function(){return new Promise((function(t,e){var s,a,n;return s=o.props.stores.appState,n=(a=o.state).limit,a.offset,0,o.setState({offset:0}),Promise.resolve(o.loadStoriesPublicFeed({props:o.props,limit:n,offset:0})).then((function(){try{return s.appContainerScrollTop(),t()}catch(t){return e(t)}}),e)}))},o.setCheckForNewStories=function(t){void 0===t&&(t=o.props),o.checkForNewStoriesTimer=setInterval((function(){return o.checkForNewStories({props:t})}),6e4)},o.clearCheckForNewStories=function(){clearInterval(o.checkForNewStoriesTimer)},o.insertTopRanked=function(){var t=o.props.stores.storyStore,e=t.publicFeed,s=r.a.shuffleArray(t.topRankedStories),a=[].concat(e),n=0,i=new Date;a.forEach((function(t,e){var s=r.a.parseInputDate(t.date);Math.floor((i.getTime()-s.getTime())/1e3)<86400&&(n=e+1)}));var c=a.length;if(c>n+3){for(var l=0;l<3;l+=1){var d=g.a.randomInt(n,c);r.a.isObject(s[l])&&a.splice(d,0,s[l])}t.localUpdateField("publicFeed",a)}},o.insertAds=function(){var t=o.state.idxAd,e=o.props.stores.storyStore,s=[].concat(e.publicFeed);s.splice(t,0,{type:"ad",wrapperClassNames:"row",contentClassNames:"col-12"}),e.localUpdateField("publicFeed",s)},o.insertTeamConfirm=function(){var t=o.state.idxConfirm,e=o.props.stores.storyStore,s=[].concat(e.publicFeed);s.splice(t,0,{type:"teamConfirm",wrapperClassNames:"row",contentClassNames:"col-12"}),e.localUpdateField("publicFeed",s)},o.insertTeamSuggestions=function(){var t=o.state.idxSuggestion,e=o.props.stores.storyStore,s=[].concat(e.publicFeed);s.splice(t,0,{type:"teamSuggestions",wrapperClassNames:"row",contentClassNames:"col-12"}),e.localUpdateField("publicFeed",s)},o.setLoadMore=function(){o.props.stores.storyStore.setLoadMore((function(){var t=o.state,e=t.limit,s=t.offset;o.setState({offset:s+=e}),o.loadStoriesPublicFeed({limit:e,offset:s})}))},o.unsetLoadMore=function(){o.props.stores.storyStore.setLoadMore((function(){}))},o.onTeamClick=function(t,e){return t.preventDefault(),t.stopPropagation(),o.setState({showTeam:e}),!1},o.hideTeam=function(){o.setState({showTeam:null})},o.onUserClick=function(t){return t.preventDefault(),t.stopPropagation(),!1},o.onDogClick=function(t,e,s){return t.preventDefault(),t.stopPropagation(),o.setState({showDog:e,dogs:s}),!1},o.hideDog=function(){o.setState({showDog:null})},o.setupIntersection=function(){o.setState({handleIntersection:g.a.intersectionObserverCallback});var t=o.props.stores.storyStore;o.scrollViewTimer=setInterval((function(){return t.postScrollview(g.a.getIntersectionObserverHistory())}),3e4)},o.renderContent=function(e){var s=e.obj,a=e.idx,n=o.props.stores.appState.path,r=o.props.hashtag;return"ad"===s.type?Object(i.h)(t,null,Object(i.h)(u.a,{stores:o.props.stores,path:n})):"teamConfirm"===s.type?Object(i.h)(t,null,Object(i.h)(h.a,{stores:o.props.stores})):"teamSuggestions"===s.type?Object(i.h)(t,null,Object(i.h)(d.a,{stores:o.props.stores})):"workout"===s.type?Object(i.h)(t,null,Object(i.h)(O.a,{stores:o.props.stores,feed:s,idx:a,onTeamClick:o.onTeamClick,onUserClick:o.onUserClick,onDogClick:o.onDogClick,holdingStore:"story"})):Object(i.h)(t,null,Object(i.h)(l.a,{stores:o.props.stores,story:s,hashtag:r,key:"story-detail-"+s.id,onTeamClick:o.onTeamClick,onUserClick:o.onUserClick}))},o.state=function(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?a(Object(s),!0).forEach((function(e){n(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):a(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}({},v),o.inputRef={},o.ref={},o}var o,c;c=e,(o=s).prototype=Object.create(c.prototype),o.prototype.constructor=o,o.__proto__=c;var w=s.prototype;return w.loadStoriesPublicFeed=function(t){return new Promise(function(e,s){var a,n,o;return o=t.offset,(n=void 0===(a=t.props)?this.props:a).path,Promise.resolve(n.stores.storyStore.loadPublicFeed({hashtag:n.hashtag,hashtags:n.hashtags,teamid:n.teamid,limit:t.limit,offset:o,sort:void 0})).then(function(){try{return o||(this.insertTopRanked(),this.insertTeamConfirm()),e()}catch(t){return s(t)}}.bind(this),s)}.bind(this))},w.checkForNewStories=function(t){return new Promise(function(e,s){var a,n;return t.limit,t.offset,(n=void 0===(a=t.props)?this.props:a).path,Promise.resolve(n.stores.storyStore.checkForNewStories({hashtag:n.hashtag,hashtags:n.hashtags,teamid:n.teamid})).then((function(){try{return e()}catch(t){return s(t)}}),s)}.bind(this))},w.componentWillMount=function(){this.setupIntersection()},w.componentDidMount=function(){this.loadStoriesPublicFeed({limit:this.state.limit,offset:0}),this.setLoadMore(),this.setCheckForNewStories()},w.componentWillUnmount=function(){this.unsetLoadMore(),this.props.stores.storyStore.postScrollview(g.a.getIntersectionObserverHistory()),clearInterval(this.scrollViewTimer),this.clearCheckForNewStories()},w.componentWillReceiveProps=function(t){t.hashtag===this.props.hashtag&&t.path===this.props.path||this.loadStoriesPublicFeed({props:t,limit:this.state.limit,offset:0})},w.render=function(){var e=this.state,s=e.loading,a=e.handleIntersection,n=e.sessionid,o=e.showTeam,r=e.showDog,c=this.props.stores,l=c.storyStore,d=l.publicFeed,h=l.hasNewStories,u=l.publicDogs,O=c.appState.darkmode;return Object(i.h)(t,null,o&&Object(i.h)(p.a,null,Object(i.h)(m.default,{stores:this.props.stores,teamid:o,marginTop:"0px;",marginBottom:"0px;",back:this.hideTeam})),r&&Object(i.h)(p.a,null,Object(i.h)(f.default,{stores:this.props.stores,dogid:r,marginTop:"0px;",marginBottom:"0px;",back:this.hideDog,dogs:u})),Object(i.h)("div",{class:"w-100"},h&&Object(i.h)(t,null,Object(i.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 d-flex justify-content-center fixed-top",style:"margin-top: "+j+";"},Object(i.h)("button",{class:"btn btn-sm btn-primary rounded-pill",onClick:this.reloadStories},"New stories"))),Object(i.h)(b.a,{data:d,wrapperClassNames:"row pb-1",contentClassNames:"col-12 col-sm-8 col-lg-6 offset-sm-2 offset-lg-3 my-1 position-relative rounded rounded-lg py-3 bg-"+(O?"black":"white")+" shadow-sm",renderContent:this.renderContent,dataFields:y,handleIntersection:a,sessionid:n}),s&&Object(i.h)("div",{class:"d-flex justify-content-center"},Object(i.h)("div",{class:"spinner-border text-primary",role:"status"},Object(i.h)("span",{class:"sr-only"},"Loading...")))))},s}(i.Component))||o;e.a=w}).call(this,s("hosL").Fragment)},gcyc:function(t,e,s){"use strict";(function(t){var a,n=s("hosL"),o=s("Utv1"),i=s("/eY4"),r=s("OhSV"),c=s("fh8t"),l=s.n(c),d=s("ZOvn"),h=s("ZQlJ"),u=s("s4FZ"),b=s("e0EM"),p=Object(i.a)(a=function(e){function s(t){var s;return(s=e.call(this,t)||this).toggleAdminInfo=function(t){t.stopPropagation(),s.setState({showAdminInfo:!s.state.showAdminInfo})},s.toggleInfo=function(t){t.stopPropagation(),s.setState({showInfo:!s.state.showInfo})},s.onDogClick=function(t,e,a){t.preventDefault(),t.stopPropagation();var n=a.find((function(t){return t.uuidv4===e}));return s.setState({currentDog:n,showDog:e,dogs:a}),!1},s.chooseSubmenu=function(t){var e=t.target.closest("button").dataset.submenu;s.setState({submenu:e})},s.state={},s}var a,i;return i=e,(a=s).prototype=Object.create(i.prototype),a.prototype.constructor=a,a.__proto__=i,s.prototype.render=function(){for(var e=this.props.stores,s=e.raceStore,a=e.userStore,i=this.state,c=i.showAdminInfo,p=i.submenu,m=void 0===p?"details":p,f=i.showDog,O=i.currentDog,g=void 0===O?{}:O,j=s.totalTrackLength,v=this.props,y=v.contestant,w=void 0===y?{}:y,x=v.onMarkerClick,k=void 0===x?function(){}:x,S=v.children,C=v.rank,I=s.findWaypointByBib(w.bib),D=a.isAdmin,T=(w.bib?s.getMusherByBibId(w.bib):s.getMusherByBibEmail(w.email))||{},P=s.getTeamById(T.team),R=P.members?P.members.find((function(t){return t.email===T.email})):{},E=(s.getClassByBib(w.bib),s.getTotalsByTeamId(T.team)),F=d.a.getImage({user:R,team:P,priority:"user",fallback:T.image1}),M=d.a.displayNameShort(R)||d.a.displayNameShort(T),A=w.color,L=d.a.hasBirthday(g.birth),N=g.birth?Math.ceil(d.a.daysUntilNextBirthday(g.birth)):365,B=(o.a.format(I.totalDistanceOnTrack/j*100,0),s.findNearestMushers(w.bib)),z=B.inFront,H=B.behind,U=P&&P.imageHeader&&P.imageHeader.s3XXLargeLink?P.imageHeader:{s3XXLargeLink:T.topImage1||"./assets/homerun-race-logo.png"},_=P&&P.images?[].concat(P.images):[],V=0;V<3;V+=1)T["image"+V]&&_.push({s3SmallLink:T["image"+V],s3LargeLink:T["image"+V]});return Object(n.h)(t,null,Object(n.h)("div",{class:"w-100 position-absolute",style:"z-index: -1; height: 18vh; top: 0px; left: 0px; background-size: cover; background-repeat: no-repeat; background-position: 50% 30%; background-color: #a0a0a0; "+(U?'background-image: url("'+U.s3XXLargeLink+'");':"")}),Object(n.h)("div",{class:"d-flex position-relative",style:"margin-top: 17vh;"},Object(n.h)("div",{class:"position-relative text-center border rounded-circle imageRounded",style:"margin-top: -50px; "+(F?'background-image: url("'+F+'"); background-size: cover;':"background-color: #c0c0c0;")},!F&&Object(n.h)("div",{class:"text-muted",style:"font-size: 35px; padding-top: 10px;"},M),Object(n.h)("div",{class:"rounded-pill-both px-2 text-center position-absolute "+(A?"":"bg-secondary")+" font-weight-bold",style:"bottom: -8px; right: 0; font-size: 1.2em; "+(A?"background-color: "+A+";":"")},C&&Object(n.h)(t,null,C))),Object(n.h)("div",{class:"flex-grow-1 pl-3 text-overflow mb-0",style:"line-height: 1.2em;"},Object(n.h)("h5",{class:"mb-0"},Object(n.h)("div",{class:"d-flex flex-nowrap"},Object(n.h)("div",{class:"text-white font-weight-bold pl-2 pr-1 py-0 rounded-pill-left rounded-none mr-2",style:"background-color: "+d.a.getRankingColor(C)+"; width: 55px;"},T.bib),Object(n.h)("div",null,Object(n.h)("nobr",null,T.flag," ",T.firstname," ",T.lastname)))),Object(n.h)("span",{class:"mb-0",style:"margin-left: 93px;"},T.sportsClub||P.name||Object(n.h)(t,null," ")))),Object(n.h)("div",{class:"d-flex justify-content-center mb-3"},Object(n.h)("div",{class:"col px-0 pt-2"},Object(n.h)("button",{type:"button",class:"btn btn-block rounded-pill-left rounded-none "+("details"===m?"btn-primary":"btn-outline-primary")+" text-nowrap",style:"text-overflow: ellipsis; overflow: hidden;",onClick:this.chooseSubmenu,"data-submenu":"details"},"Details")),Object(n.h)("div",{class:"col px-0 pt-2"},Object(n.h)("button",{type:"button",class:"btn btn-block rounded-none "+("gpsdata"===m?"btn-primary":"btn-outline-primary")+" text-nowrap",style:"text-overflow: ellipsis; overflow: hidden;",onClick:this.chooseSubmenu,"data-submenu":"gpsdata"},"GPS Data")),Object(n.h)("div",{class:"col px-0 pt-2"},Object(n.h)("button",{type:"button",class:"btn btn-block rounded-none "+("team"===m?"btn-primary":"btn-outline-primary")+" text-nowrap",style:"text-overflow: ellipsis; overflow: hidden;",onClick:this.chooseSubmenu,"data-submenu":"team"},"Team")),Object(n.h)("div",{class:"col px-0 pt-2"},Object(n.h)("button",{type:"button",class:"btn btn-block rounded-pill-right rounded-none "+("dogs"===m?"btn-primary":"btn-outline-primary")+" text-nowrap",style:"text-overflow: ellipsis; overflow: hidden;",onClick:this.chooseSubmenu,"data-submenu":"dogs"},"Dogs"))),Object(n.h)("div",{class:"w-100 overflow-auto position-relative"},"details"===m&&Object(n.h)(t,null,S),"gpsdata"===m&&Object(n.h)(t,null,Object(n.h)(b.a,{stores:this.props.stores,wp:I,musher:T})),"team"===m&&Object(n.h)(t,null,P.public>0?Object(n.h)(t,null,Object(n.h)("h3",null,P.name),Object(n.h)(l.a,{markdown:d.a.replaceImages(P.description,P.images),markdownOpts:d.a.getMarkdownOptions()}),Object(n.h)(u.a,{stores:this.props.stores,images:_})):Object(n.h)(t,null,Object(n.h)("div",{class:"text-center text-muted"},Object(n.h)("div",{class:"display-1"},Object(n.h)("i",{class:"fas fa-dog"})),Object(n.h)("h3",null,Object(n.h)(r.c,{id:"teams.no-public-team"},"No public team!")),Object(n.h)(r.c,{id:"teams.no-public-team"},"This team is not publicly visible."),_&&Object(n.h)("div",{class:"my-3"},Object(n.h)(u.a,{stores:this.props.stores,images:_}))))),"dogs"===m&&Object(n.h)(t,null,P.public>0?Object(n.h)(t,null,P.dogs&&Object(n.h)("div",{class:"w-100 container-fluid"},Object(n.h)("div",{class:"row pt-2"},Object(n.h)(h.a,{stores:this.props.stores,dogs:P.dogs.map((function(t){return t.id})),allDogs:P.dogs,onDogClick:this.onDogClick}))),f&&Object(n.h)(t,null,Object(n.h)("div",{class:"d-flex mb-0 mt-3 position-relative"},Object(n.h)("div",{class:"text-center border rounded-circle imageRounded imageRoundedLarge text-muted pt-2",style:g.image?'background-image: url("'+g.image.s3LargeLink+'"); background-size: cover;':""},!g.image&&Object(n.h)("span",{class:"font-weight-lighter",style:"font-size: 35px;"},o.a.ucfirst(g.name,!0))),Object(n.h)("div",{class:"flex-grow-1 pl-3 pr-2",style:"border-right: 4px solid "+a.findHarness(g.harness,"colorNonstop")+" !important; line-height: 1.2em;"},Object(n.h)("h5",{class:"mb-1"},g.shortname||g.name," ",g.shortname&&""!==g.shortname&&Object(n.h)(t,null," - ",Object(n.h)("span",{class:"font-weight-lighter"},g.name)),L&&Object(n.h)(t,null,Object(n.h)("i",{class:"fas fa-birthday-cake ml-3"}))),Object(n.h)("div",null,N<7&&Object(n.h)(t,null,Object(n.h)("span",{class:"text-muted mr-2"},Object(n.h)("i",{class:"fas fa-birthday-cake"})," in ",N," days")),g.birth&&Object(n.h)("span",{class:"mr-2"},o.a.age(g.birth,g.deceased)),"female"===g.gender?Object(n.h)("i",{class:"fas fa-venus"}):Object(n.h)("i",{class:"fas fa-mars"})))))):Object(n.h)(t,null,Object(n.h)("div",{class:"text-center text-muted"},Object(n.h)("div",{class:"display-1"},Object(n.h)("i",{class:"fas fa-dog"})),Object(n.h)("h3",null,Object(n.h)(r.c,{id:"teams.no-public-team"},"No public team!")),Object(n.h)(r.c,{id:"teams.no-public-team"},"This team is not publicly visible.")))),D&&Object(n.h)("div",{style:"max-height: 200px; max-width: 70vw; overflow: auto;"},Object(n.h)("button",{class:"btn btn-link btn-block",onClick:this.toggleAdminInfo},"Toggle admin info"),c&&Object(n.h)(t,null,Object(n.h)("small",null,Object(n.h)("xmp",null,"musher: ",JSON.stringify(T,null,4),Object(n.h)("br",null),"user: ",JSON.stringify(R,null,4),Object(n.h)("br",null),"team: ",JSON.stringify(P,null,4),Object(n.h)("br",null),"totals: ",JSON.stringify(E,null,4),Object(n.h)("br",null))))),Object(n.h)("div",{class:"d-flex position-absolute",style:"right: 10px; bottom: 10px;"},z.bib&&Object(n.h)("a",{class:"text-primary mx-2",onClick:function(){return k(z)},style:"line-height: 1.0em; font-size: 2.3em;"},Object(n.h)("i",{class:"fas fa-angle-left"})),H.bib&&Object(n.h)("a",{class:"text-primary mx-2",onClick:function(){return k(H)},style:"line-height: 1.0em; font-size: 2.3em;"},Object(n.h)("i",{class:"fas fa-angle-right"})))))},s}(n.Component))||a;e.a=p}).call(this,s("hosL").Fragment)},hwiY:function(t,e,s){"use strict";(function(t){function a(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,a)}return s}function n(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?a(Object(s),!0).forEach((function(e){o(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):a(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}function o(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}function i(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}var r,c,l,d=s("hosL"),h=s("Utv1"),u=s("/eY4"),b=s("OhSV"),p=(s("Y3FI"),s("fh8t")),m=s.n(p),f=(s("go65"),s("ZOvn")),O=s("om2D"),g=s("TiXY"),j=s("cH0S"),v=s("9xg+"),y=Object(u.a)(r=function(t){function e(){for(var e,s=arguments.length,a=new Array(s),n=0;n<s;n++)a[n]=arguments[n];return(e=t.call.apply(t,[this].concat(a))||this).handleImageErrored=function(t){var e=t.target;e.onerror=null,setTimeout((function(){e.src+="?"+new Date}),1e3)},e.removeImage=function(t){return new Promise((function(s){return e.props.stores.userStore.removeImage({id:e.props.user.id,name:t.target.parentElement.dataset.name||t.target.dataset.name}),s()}))},e.removeMainImage=function(){var t=e.props;(0,t.updateField)({id:t.user.id,field:t.field,value:{}})},e}return i(e,t),e.prototype.render=function(){var t=this,e=this.props,s=e.saved,a=e.user,n=e.type,o=void 0===n?"text":n,i=e.field,r=e.title,c=e.icon,l=e.help,h=e.onInput,u=e.updateField,p=a[i];return"image"===o?Object(d.h)("div",{class:"form-group "+(s[i+"."+a.id]?"is-valid":"")},Object(d.h)("label",{for:i+"Input"},c&&Object(d.h)("i",{class:c+" text-muted"})," ",r),Object(d.h)("div",{class:"container-fluid"},Object(d.h)("div",{class:"row"},a.image&&a.image.s3SmallLink&&Object(d.h)("div",{class:"col-3 p-1"},Object(d.h)("img",{src:a.image.s3SmallLink,class:"img-fluid border rounded-lg",onError:this.handleImageErrored}),Object(d.h)("button",{class:"btn btn-sm btn-link",onClick:this.removeMainImage,"data-name":a.image.name},Object(d.h)("i",{class:"fas fa-trash"})," Del"),Object(d.h)("span",{class:"badge badge-success"},"Main")),a.images&&a.images.filter((function(t){return!a.image||t.md5!==a.image.md5})).map((function(e){return Object(d.h)("div",{class:"col-3 p-1"},Object(d.h)("img",{src:e.s3SmallLink,class:"img-fluid",onError:t.handleImageErrored}),Object(d.h)("button",{class:"btn btn-sm btn-link",onClick:t.removeImage,"data-name":e.name},Object(d.h)("i",{class:"fas fa-trash"})," Del"))})))),Object(d.h)(O.a,{saved:s,object:a,field:i,updateField:u,autoOpen:!1}),s[i+"."+a.id]?Object(d.h)("div",{class:"valid-feedback",style:"display: block;"},Object(d.h)(b.c,{id:"users.changes-saved"},"Endringene er lagret")):Object(d.h)("small",{id:i+"Help",class:"form-text text-muted"},l)):"file"===o?Object(d.h)("div",{class:"form-group "+(s[i+"."+a.id]?"is-valid":"")},Object(d.h)("label",{for:i+"Input"},c&&Object(d.h)("i",{class:c+" text-muted"})," ",r),Object(d.h)(g.a,{saved:s,object:a,field:i,updateField:u}),s[i+"."+a.id]?Object(d.h)("div",{class:"valid-feedback",style:"display: block;"},Object(d.h)(b.c,{id:"users.changes-saved"},"Endringene er lagret")):Object(d.h)("small",{id:i+"Help",class:"form-text text-muted"},l)):Object(d.h)("div",{class:"form-group "+(s[i+"."+a.id]?"is-valid":"")},Object(d.h)("label",{for:i+"Input"},c&&Object(d.h)("i",{class:c+" text-muted"})," ",r),Object(d.h)("input",{type:"text",class:"form-control "+(s[i+"."+a.id]?"is-valid":""),id:i+"Input","aria-describedby":i+"Help",value:p,"data-id":a.id,"data-field":i,onInput:h}),s[i+"."+a.id]?Object(d.h)("div",{class:"valid-feedback",style:"display: block;"},Object(d.h)(b.c,{id:"users.changes-saved"},"Endringene er lagret")):Object(d.h)("small",{id:i+"Help",class:"form-text text-muted"},l))},e}(d.Component))||r,w=Object(u.a)(c=function(e){function s(){return e.apply(this,arguments)||this}return i(s,e),s.prototype.render=function(){var e=this.props,s=e.dog,a=e.children,n=e.onDogClick,o=void 0===n?function(){}:n,i=this.props.stores,r=i.userStore.vaccineLogStatuses;return Object(d.h)("div",{class:"d-flex mb-0 position-relative mb-3 dogInfo","data-id":s.id},Object(d.h)("div",null,Object(d.h)("div",{class:"text-center border rounded-circle imageRounded imageRoundedMedium text-muted pt-2",style:s.image?'background-image: url("'+s.image.s3SmallLink+'"); background-size: cover;':""},!s.image&&Object(d.h)("span",{class:"font-weight-lighter",style:"font-size: 35px;"},h.a.ucfirst(s.name,!0)))),Object(d.h)("div",{class:"flex-grow-1 pl-3 pr-2",onClick:o},a,Object(d.h)("span",{class:"float-right"},s.birth&&Object(d.h)("span",{class:"mr-2"},h.a.age(s.birth,s.deceased)),"female"===s.gender?Object(d.h)("i",{class:"fas fa-venus"}):Object(d.h)("i",{class:"fas fa-mars"})),Object(d.h)("h6",{class:"mb-1",style:"line-height: 1.0em;"},s.shortname||s.name," ",s.shortname&&""!==s.shortname&&Object(d.h)(t,null," - ",Object(d.h)("span",{class:"font-weight-lighter"},s.name))),s.chipId?Object(d.h)(t,null,Object(d.h)("i",{class:"fas fa-microchip text-muted"})," ",s.chipId):Object(d.h)(t,null,Object(d.h)("div",{class:"alert alert-danger",role:"alert"},Object(d.h)(b.c,{id:"races.missing-chipid"},"Missing chid id"))),Object(d.h)("div",null,r&&r.filter((function(t){return t.chipId===s.chipId})).map((function(e){return Object(d.h)("span",{class:"badge badge-"+(e.inKarens?"warning":"success")+" mr-2 mb-1"},e.vaccineAgens.name,Object(d.h)("span",{class:"font-weight-lighter ml-2 d-none d-sm-block"},Object(d.h)("i",{class:"fas fa-calendar-check"})," ",h.a.isoDate(e.vaccineAgens.durationEnd,!1,!1,!0),e.inKarens&&Object(d.h)(t,null,Object(d.h)("br",null),"(karens: ",h.a.format(e.karensDaysLeft,0)," days left)")))})))))},s}(d.Component))||c,x=Object(u.a)(l=function(e){function s(t){var s;return(s=e.call(this,t)||this).updateField=function(t){var e=t.target.dataset,a=e.field,n=e.type,o=e.elementtype,i=t.target.value;s.updateFieldValue({id:parseInt(e.id,10),field:a,value:i,type:n,elementtype:o})},s.updateFieldValue=function(t){var e=t.id,a=t.field,n=t.value,o=t.datatype,i=t.elementtype,r=t.skipTimer,c=void 0!==r&&r,l=s.props.stores.userStore,d=n,h=n,u=l.user;"images"===a&&Array.isArray(u.images)&&Array.isArray(n)&&(h=[].concat(u.images,n)),"array"!==o||Array.isArray(n)||(d="number"===i?n.split(",").map((function(t){return parseFloat(t)||t})):n.split(",")),l.updateField(e,a,h),c?s.doUpdateField(e,a,d):(clearTimeout(s.updateTimer[a]),s.updateTimer[a]=setTimeout((function(){return new Promise((function(t){return s.doUpdateField(e,a,d),t()}))}),500))},s.signupToRace=function(){return new Promise((function(t,e){var a,o,i,r,c;return i=(a=s.props.stores).userStore.user,r=(o=a.raceStore).signup,c=s.props.race,Promise.resolve(o.addContestant({id:(void 0===c?{}:c).id,classId:r.class,newContestant:n({team:i.team,firstname:i.firstname,lastname:i.lastname,sportsClub:i.sportsClub,email:i.email,cellphone:i.cellphone,facebook:i.facebook,instagram:i.instagram},r)})).then((function(){try{return t()}catch(t){return e(t)}}),e)}))},s.updateSignup=function(t){s.props.stores.raceStore.updateObjectKeyValue("signup",t.target.id,t.target.value)},s.editSignup=function(t){var e,a=s.props.race,n=(void 0===a?{}:a).id,o=s.props.stores.raceStore,i=t.target.id,r=t.target.value,c=t.target.dataset,l=c.classid,d=c.contestantid;o.updateObjectKeyValue("signup",i,r);var u=((e={raceClassId:l,contestantId:d})["raceClassContestant"+h.a.ucfirst(i)]=r,e);clearTimeout(s.updateTimer[i]),s.updateTimer[i]=setTimeout((function(){return new Promise((function(t,e){function s(){return t()}return o.editClass({id:n,data:u}),o.localUpdateSignup(i,r),"team"===i?Promise.resolve(o.loadTeams(r,!0)).then(function(){try{return s.call(this)}catch(t){return e(t)}}.bind(this),e):s.call(this)}))}),500)},s.clearSignupValue=function(t){return new Promise((function(e,a){function n(){return e()}var o,i,r,c,l,d,u,b,p;return r=(void 0===(i=s.props.race)?{}:i).id,"null",u=(d=t.target.dataset).classid,b=d.contestantid,(c=s.props.stores.raceStore).updateObjectKeyValue("signup",l=t.target.id,"null"),(o={raceClassId:u,contestantId:b})["raceClassContestant"+h.a.ucfirst(l)]="null",p=o,clearTimeout(s.updateTimer[l]),c.editClass({id:r,data:p}),c.localUpdateSignup(l,"null"),"team"===l?Promise.resolve(c.loadTeams("null",!0)).then(function(){try{return n.call(this)}catch(t){return a(t)}}.bind(this),a):n.call(this)}))},s.toggleDrawer=function(){s.setState({showDrawer:!s.state.showDrawer})},s.onDogClick=function(t){var e=t.target.closest(".dogInfo").dataset.id;console.log("onDogClick",e);var a=s.props.stores,n=a.userStore.findDogsByTeam(parseInt(a.raceStore.signup.team,10)).find((function(t){return t.id==e}));s.setState({showDrawer:!0,currentDog:n})},s.chooseSubmenu=function(t){t.stopPropagation(),s.setState({submenu:t.target.parentElement.dataset.menu||t.target.dataset.menu})},s.state={submenu:"info",showDrawer:!1},s.inputRef={},s.updateTimer={},s}i(s,e);var a=s.prototype;return a.doUpdateField=function(t,e,s){return new Promise(function(a,n){return Promise.resolve(this.props.stores.userStore.saveField(t,e,s)).then((function(){try{return a()}catch(t){return n(t)}}),n)}.bind(this))},a.render=function(){var e=this,s=this.state,a=s.submenu,n=s.showDrawer,o=s.currentDog,i=this.props.stores,r=i.userStore,c=i.raceStore,l=r.user,u=void 0===l?{}:l,p=r.teams,O=void 0===p?[]:p,g=r.saved,x=u.language,k=void 0===x?"en":x,S=this.props.race,C=void 0===S?{}:S,I=c.signup,D={},T=[];I.class&&(D=c.getRaceClassById(I.class)),I.team&&(T=r.findDogsByTeam(parseInt(I.team,10)));var P=new Date,R=f.a.getAlphabet(D.dogs).filter((function(t){return I["dog"+t]})).map((function(t){return I["dog"+t]})),E=function(t){return-1===R.indexOf(t.chipId)};return Object(d.h)(t,null,Object(d.h)("div",{class:"row"},Object(d.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-0 mb-2"},Object(d.h)("h2",{class:"mb-0"},Object(d.h)(b.c,{id:"races.signup"},"Påmelding"))),Object(d.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-3 mb-2"},P>=new Date(C.signupStartDate)&&P<=new Date(C.signupEndDate)?Object(d.h)(t,null,Object(d.h)("span",{class:"font-weight-lighter"},Object(d.h)(b.c,{id:"races.signed-in-as"},"Logget inn som"),":")," ",u.email,Object(d.h)("br",null),Object(d.h)("br",null),I.id?Object(d.h)(t,null,Object(d.h)("div",{class:"font-weight-bold mb-4"},Object(d.h)("i",{class:"fas fa-check text-success"})," ",Object(d.h)(b.c,{id:"races.signed-up"},"Din bruker er påmeldt!"),Object(d.h)("br",null)),!C.liveRace&&C.signuppayment&&Object(d.h)(t,null,Object(d.h)("div",{class:"form-group row my-2"},Object(d.h)("label",{for:"cellphone",class:"col-2 col-form-label text-right font-weight-lighter"},Object(d.h)(b.c,{id:"races.signup"},"Påmelding")),Object(d.h)("div",{class:"col-10"},I.paidSignupfee?Object(d.h)("div",{class:"py-2"},Object(d.h)(b.c,{id:"races.paid"},"Betalt"),": ",h.a.formatDate(I.paidSignupfee),Object(d.h)("i",{class:"fas fa-check text-success ml-3"})):Object(d.h)(t,null,Object(d.h)("div",{class:"alert alert-danger mb-1",role:"alert"},Object(d.h)("h5",null,Object(d.h)("span",{class:"font-weight-lighter"},Object(d.h)(b.c,{id:"races.payment-info"},"Betaling påmelding"),":"),Object(d.h)("br",null),Object(d.h)(m.a,{markdown:f.a.replaceImages(C.signuppayment,C.images,k),markdownOpts:f.a.getMarkdownOptions()}),D.signupfee||C.signupfee," NOK")))))),Object(d.h)("div",{class:"w-100 overflow-hidden"},Object(d.h)("div",{class:"d-flex flex-row flex-nowrap pb-2 px-1",style:"overflow: auto; scroll-snap-type: x mandatory;"},Object(d.h)("div",{class:"col px-0 pt-2"},Object(d.h)("button",{class:"btn btn-block rounded-pill-left rounded-none "+("info"===a?"btn-primary":"btn-outline-primary")+" text-nowrap",style:"text-overflow: ellipsis; overflow: hidden;","data-menu":"info",onClick:this.chooseSubmenu},Object(d.h)("i",{class:"fas fa-info-circle"})," ",Object(d.h)(b.c,{id:"race.info"},"Info"))),Object(d.h)("div",{class:"col px-0 pt-2"},Object(d.h)("button",{class:"btn btn-block rounded-pill-right rounded-none "+("chiplist"===a?"btn-primary":"btn-outline-primary")+" text-nowrap",style:"text-overflow: ellipsis; overflow: hidden;","data-menu":"chiplist",onClick:this.chooseSubmenu},Object(d.h)("i",{class:"fas fa-list-ol"})," ",Object(d.h)(b.c,{id:"race.chiplist"},"Chiplist"))))),"info"===a&&Object(d.h)(t,null,Object(d.h)("div",{class:"form-group row my-5"},Object(d.h)("label",{for:"team",class:"col-3 col-form-label text-right font-weight-lighter"},Object(d.h)(b.c,{id:"races.team"},"Team")),Object(d.h)("div",{class:"col-9"},Object(d.h)("select",{class:"form-control form-control-lg",id:"team","aria-describedby":"teamHelp","data-classid":I.class,"data-contestantid":I.id,onInput:this.editSignup,value:I.team},Object(d.h)("option",{value:""},"-- ",Object(d.h)(b.c,{id:"races.choose-team"},"Velg team")," --"),O.map((function(t){return Object(d.h)("option",{value:t.id},t.name)}))),I.team?Object(d.h)(t,null):Object(d.h)(t,null,Object(d.h)("div",{class:"alert alert-danger clearfix",role:"alert"},Object(d.h)("span",{class:"display-4 float-left mr-3"},Object(d.h)("i",{class:"fas fa-exclamation-triangle"})),Object(d.h)(b.c,{id:"races.choose-race-team",fields:{title:C.title}},"Please choose race team for ",C.title))))),Object(d.h)("div",{class:"form-group row my-2"},Object(d.h)("label",{for:"cellphone",class:"col-3 col-form-label text-right font-weight-lighter"},Object(d.h)(b.c,{id:"races.cellphone"},"Mobil")),Object(d.h)("div",{class:"col-9"},Object(d.h)(b.b,null,Object(d.h)("input",{type:"text",class:"form-control",id:"cellphone","data-classid":I.class,"data-contestantid":I.id,onInput:this.editSignup,value:I.cellphone,placeholder:Object(d.h)(b.c,{id:"races.cellphone-help"},"Hva er mobilnummer ditt?")})))),I.name&&Object(d.h)("div",{class:"form-group row my-2"},Object(d.h)("label",{for:"name",class:"col-3 col-form-label text-right font-weight-lighter"},Object(d.h)(b.c,{id:"races.name"},"Navn")),Object(d.h)("div",{class:"col-9"},I.name)),Object(d.h)("div",{class:"form-group row my-2"},Object(d.h)("label",{for:"firstname",class:"col-3 col-form-label text-right font-weight-lighter"},Object(d.h)(b.c,{id:"races.firstname"},"Fornavn")),Object(d.h)("div",{class:"col-9"},Object(d.h)(b.b,null,Object(d.h)("input",{type:"text",class:"form-control",id:"firstname","data-classid":I.class,"data-contestantid":I.id,onInput:this.editSignup,value:I.firstname,placeholder:Object(d.h)(b.c,{id:"races.firstname-help"},"Hva er fornavnet ditt?")})))),Object(d.h)("div",{class:"form-group row my-2"},Object(d.h)("label",{for:"lastname",class:"col-3 col-form-label text-right font-weight-lighter"},Object(d.h)(b.c,{id:"races.lastname"},"Etternavn")),Object(d.h)("div",{class:"col-9"},Object(d.h)(b.b,null,Object(d.h)("input",{type:"text",class:"form-control",id:"lastname","data-classid":I.class,"data-contestantid":I.id,onInput:this.editSignup,value:I.lastname,placeholder:Object(d.h)(b.c,{id:"races.lastname-help"},"Hva er etternavnet ditt?")})))),Object(d.h)("div",{class:"form-group row my-2"},Object(d.h)("label",{for:"sportsClub",class:"col-3 col-form-label text-right font-weight-lighter"},Object(d.h)(b.c,{id:"races.sportsclub"},"Klubb")),Object(d.h)("div",{class:"col-9"},Object(d.h)(b.b,null,Object(d.h)("input",{type:"text",class:"form-control",id:"sportsClub","data-classid":I.class,"data-contestantid":I.id,onInput:this.editSignup,value:I.sportsClub,placeholder:Object(d.h)(b.c,{id:"races.sportsClub-help"},"Hvilken klubb tilhører du?")})))),Object(d.h)("div",{class:"form-group row my-2"},Object(d.h)("label",{for:"facebook",class:"col-3 col-form-label text-right font-weight-lighter"},Object(d.h)(b.c,{id:"races.facebook"},"Facebook")),Object(d.h)("div",{class:"col-9"},Object(d.h)(b.b,null,Object(d.h)("input",{type:"text",class:"form-control",id:"facebook","data-classid":I.class,"data-contestantid":I.id,onInput:this.editSignup,value:I.facebook,placeholder:Object(d.h)(b.c,{id:"races.facebook-help"},"Hva er Facebook brukernavnet ditt?")})))),Object(d.h)("div",{class:"form-group row my-2"},Object(d.h)("label",{for:"instagram",class:"col-3 col-form-label text-right font-weight-lighter"},Object(d.h)(b.c,{id:"races.instagram"},"Instagram")),Object(d.h)("div",{class:"col-9"},Object(d.h)(b.b,null,Object(d.h)("input",{type:"text",class:"form-control",id:"instagram","data-classid":I.class,"data-contestantid":I.id,onInput:this.editSignup,value:I.instagram,placeholder:Object(d.h)(b.c,{id:"races.instagram-help"},"Hva er Instagram brukernavnet ditt?")})))),Object(d.h)("div",{class:"form-group row my-2"},Object(d.h)("label",{for:"team",class:"col-3 col-form-label text-right font-weight-lighter"},Object(d.h)(b.c,{id:"races.class"},"Klasse")),Object(d.h)("div",{class:"col-9"},Object(d.h)("select",{class:"form-control",id:"class","aria-describedby":"classHelp","data-classid":I.class,"data-contestantid":I.id,onInput:this.editSignup,value:I.class,disabled:!0},Object(d.h)("option",{value:""},"-- ",Object(d.h)(b.c,{id:"races.choose-class"},"Velg klasse")," --"),C.classes&&C.classes.sort((function(t,e){return t.distance-e.distance})).map((function(e){return Object(d.h)(t,null,Object(d.h)("option",{value:e.id},e.title,!C.liveRace&&Object(d.h)(t,null,"- ",e.distance," km - Påmelding: ",e.signupfee||C.signupfee," NOK")))}))))),C.rules&&Object(d.h)("div",{class:"form-group row my-2"},Object(d.h)("label",{for:"team",class:"col-3 col-form-label text-right font-weight-lighter"}," "),Object(d.h)("div",{class:"col-9 pl-5"},Object(d.h)("input",{type:"checkbox",class:"form-check-input",id:"termsAndAgreement","data-classid":I.class,"data-contestantid":I.id,onInput:this.editSignup,checked:I.termsAndAgreement,value:1}),Object(d.h)("label",{class:"form-check-label",for:"termsAndAgreement"},Object(d.h)(b.c,{id:"races.agreement-accept"},"Jeg har lest og godtar reglene for løpet.")))),C.declaration&&Object(d.h)("div",{class:"form-group row my-4"},Object(d.h)("div",{class:"col-12 text-center border-top"},Object(d.h)("h5",null,Object(d.h)(b.c,{id:"races.declaration"},"Declaration"))),Object(d.h)("details",{class:"col-12"},I.declaration?Object(d.h)(t,null,Object(d.h)("summary",null,Object(d.h)(b.c,{id:"races.see-declaration"},"See declaration")," (",Object(d.h)("span",{class:"text-muted font-weight-light"},Object(d.h)(b.c,{id:"races.declaration-signed"},"Declaration signed"),": ",h.a.isoDate(I.declarationDate)),")")):Object(d.h)(t,null,Object(d.h)("summary",null,Object(d.h)("h5",{class:"btn btn-primary"},Object(d.h)(b.c,{id:"races.see-declaration"},"See declaration")))),Object(d.h)(m.a,{markdown:f.a.replaceImages(C.declaration,C.images,k),markdownOpts:f.a.getMarkdownOptions()}),I.declaration?Object(d.h)(t,null,Object(d.h)("i",null,Object(d.h)(b.c,{id:"races.declaration-signed"},"Declaration signed"),": ",h.a.isoDate(I.declarationDate))):Object(d.h)(t,null,Object(d.h)("div",{class:"pl-5"},Object(d.h)("input",{type:"checkbox",class:"form-check-input",id:"declaration","data-classid":I.class,"data-contestantid":I.id,onInput:this.editSignup,checked:I.declaration,value:1}),Object(d.h)("label",{class:"form-check-label",for:"declaration"},Object(d.h)(b.c,{id:"races.declaration-accept"},"I hereby sign the declaration for the race!")))))),Object(d.h)(y,{saved:g,user:u,field:"image",icon:"fas fa-camera",type:"image",stores:this.props.stores,title:Object(d.h)(b.c,{id:"users.photos"},"Bilder"),help:Object(d.h)(b.c,{id:"users.photos-help"},"Bilder av deg."),onInput:this.updateField,updateField:this.updateFieldValue})),"chiplist"===a&&Object(d.h)(t,null,Object(d.h)("div",{class:"form-group row my-4"},Object(d.h)("div",{class:"col-12 text-center border-top pt-3"},Object(d.h)("h5",null,Object(d.h)(b.c,{id:"races.chiplist"},"Chiplist"))),D&&D.dogs&&f.a.getAlphabet(D.dogs,["R1","R2"]).map((function(s){var a=T&&T.length>0?T.find((function(t){return t.chipId===I["dog"+s]})):null;return Object(d.h)(t,null,Object(d.h)("div",{class:"col-12 center border-top pt-3 d-flex"},Object(d.h)("div",{class:"display-4",style:"width: 50px;"},s),Object(d.h)("div",{class:"flex-grow-1 pl-3 pr-2"},a?Object(d.h)(t,null,Object(d.h)(w,{stores:e.props.stores,dog:a,onDogClick:e.onDogClick},Object(d.h)("button",{class:"btn btn-danger float-right ml-2",onClick:e.clearSignupValue,id:"dog"+s,"data-classid":I.class,"data-contestantid":I.id},Object(d.h)("i",{class:"fas fa-times"})))):Object(d.h)(t,null,Object(d.h)("select",{class:"form-control p-0",id:"dog"+s,"data-classid":I.class,"data-contestantid":I.id,onInput:e.editSignup},Object(d.h)("option",{value:""},"-- Choose dog for this position --"),T.filter(E).map((function(e){return Object(d.h)(t,null,Object(d.h)("option",{value:e.chipId,selected:e.chipId===I["dog"+s]?"selected":""},e.shortname||e.name," - ",e.birth&&Object(d.h)(t,null,h.a.age(e.birth,e.deceased))," ","female"===e.gender?"♀️":"♂️"))})))))))})))),"team"===a&&Object(d.h)(t,null,Object(d.h)("div",{class:"form-group row my-4"},Object(d.h)("div",{class:"col-12 border-top pt-3"},T&&T.length>0?Object(d.h)(t,null,T.map((function(s){return Object(d.h)(t,null,Object(d.h)(w,{stores:e.props.stores,dog:s}))}))):Object(d.h)(t,null,Object(d.h)("div",{class:"text-center text-muted"},Object(d.h)("div",{class:"display-1"},Object(d.h)("i",{class:"fas fa-dog"})),Object(d.h)("h3",{class:"font-weight-lighter"},Object(d.h)(b.c,{id:"race.add-dogs"},"Add a team to your race signup to see the dogs.")))))))):Object(d.h)(t,null,C.liveRace?Object(d.h)(t,null,"Signup is done at the race normal web pages."):Object(d.h)(t,null,Object(d.h)("div",{class:"form-group"},Object(d.h)("label",{for:"cellphone"},Object(d.h)(b.c,{id:"races.cellphone"},"Mobil")),Object(d.h)("input",{type:"text",class:"form-control",id:"cellphone","aria-describedby":"cellphoneHelp",placeholder:u.cellphone,onInput:this.updateSignup,value:I.cellphone}),Object(d.h)("small",{id:"cellphoneHelp",class:"form-text text-muted"},Object(d.h)(b.c,{id:"races.cellphone-help"},"'Hva er mobilnummer ditt?'"))),I.name&&Object(d.h)("div",{class:"row"},Object(d.h)("div",{class:"col"},Object(d.h)("div",{class:"form-group"},Object(d.h)("label",{for:"name"},Object(d.h)(b.c,{id:"races.name"},"Name")),Object(d.h)("input",{type:"text",class:"form-control",id:"name","aria-describedby":"nameHelp",placeholder:u.name,onInput:this.updateSignup,value:I.name}),Object(d.h)("small",{id:"nameHelp",class:"form-text text-muted"},Object(d.h)(b.c,{id:"races.name-help"},"Hva er navnet ditt?"))))),Object(d.h)("div",{class:"row"},Object(d.h)("div",{class:"col"},Object(d.h)("div",{class:"form-group"},Object(d.h)("label",{for:"firstname"},Object(d.h)(b.c,{id:"races.firstname"},"Fornavn")),Object(d.h)("input",{type:"text",class:"form-control",id:"firstname","aria-describedby":"firstnameHelp",placeholder:u.firstname,onInput:this.updateSignup,value:I.firstname}),Object(d.h)("small",{id:"firstnameHelp",class:"form-text text-muted"},Object(d.h)(b.c,{id:"races.firstname-help"},"Hva er fornavnet ditt?")))),Object(d.h)("div",{class:"col"},Object(d.h)("div",{class:"form-group"},Object(d.h)("label",{for:"lastname"},Object(d.h)(b.c,{id:"races.lastname"},"Etternavn")),Object(d.h)("input",{type:"text",class:"form-control",id:"lastname","aria-describedby":"lastnameHelp",placeholder:u.lastname,onInput:this.updateSignup,value:I.lastname}),Object(d.h)("small",{id:"lastnameHelp",class:"form-text text-muted"},Object(d.h)(b.c,{id:"races.lastname-help"},"Hva er etternavnet ditt?"))))),Object(d.h)("div",{class:"form-group"},Object(d.h)("label",{for:"sportsClub"},Object(d.h)(b.c,{id:"races.sportsclub"},"Klubb")),Object(d.h)("input",{type:"text",class:"form-control",id:"sportsClub","aria-describedby":"sportsClubHelp",placeholder:u.sportsClub,onInput:this.updateSignup,value:I.sportsClub}),Object(d.h)("small",{id:"sportsClubHelp",class:"form-text text-muted"},Object(d.h)(b.c,{id:"races.sportsClub-help"},"Hvilken klubb tilhører du?"))),Object(d.h)("div",{class:"row"},Object(d.h)("div",{class:"col"},Object(d.h)("div",{class:"form-group"},Object(d.h)("label",{for:"facebook"},Object(d.h)(b.c,{id:"races.facebook"},"Facebook")),Object(d.h)("input",{type:"text",class:"form-control",id:"facebook","aria-describedby":"facebookHelp",placeholder:u.facebook,onInput:this.updateSignup,value:I.facebook}),Object(d.h)("small",{id:"facebookHelp",class:"form-text text-muted"},Object(d.h)(b.c,{id:"races.facebook-help"},"Hva er Facebook brukernavnet ditt?")))),Object(d.h)("div",{class:"col"},Object(d.h)("div",{class:"form-group"},Object(d.h)("label",{for:"instagram"},Object(d.h)(b.c,{id:"races.instagram"},"Instagram")),Object(d.h)("input",{type:"text",class:"form-control",id:"instagram","aria-describedby":"instagramHelp",placeholder:u.instagram,onInput:this.updateSignup,value:I.instagram}),Object(d.h)("small",{id:"instagramHelp",class:"form-text text-muted"},Object(d.h)(b.c,{id:"races.instagram-help"},"Hva er Instagram brukernavnet ditt?"))))),Object(d.h)("div",{class:"form-group"},Object(d.h)("label",{for:"team"},Object(d.h)(b.c,{id:"races.team"},"Team")),Object(d.h)("select",{class:"form-control",id:"team","aria-describedby":"teamHelp",onInput:this.updateSignup,value:I.team},Object(d.h)("option",{value:""},"-- ",Object(d.h)(b.c,{id:"races.choose-team"},"Velg team")," --"),O.map((function(t){return Object(d.h)("option",{value:t.id},t.name)}))),Object(d.h)("small",{id:"teamHelp",class:"form-text text-muted"},Object(d.h)(b.c,{id:"races.choose-team-help"},"Velg fra dine team"))),Object(d.h)("div",{class:"form-group"},Object(d.h)("label",{for:"class"},Object(d.h)(b.c,{id:"races.class"},"Klasse")),Object(d.h)("select",{class:"form-control",id:"class","aria-describedby":"classHelp",onInput:this.updateSignup,value:I.class},Object(d.h)("option",{value:""},"-- ",Object(d.h)(b.c,{id:"races.choose-class"},"Velg klasse")," --"),C.classes&&C.classes.map((function(e){return Object(d.h)(t,null,Object(d.h)("option",{value:e.id},e.title," - ",e.distance," km - Påmelding: ",e.signupfee||C.signupfee," NOK"))}))),Object(d.h)("small",{id:"classHelp",class:"form-text text-muted"},Object(d.h)(b.c,{id:"races.choose-class-help"},"Velg ønsket klasse."))),Object(d.h)("div",{class:"form-group form-check"},Object(d.h)("input",{type:"checkbox",class:"form-check-input",id:"termsAndAgreement",onInput:this.updateSignup,checked:I.termsAndAgreement,value:!0}),Object(d.h)("label",{class:"form-check-label",for:"termsAndAgreement"},Object(d.h)(b.c,{id:"races.agreement-accept"},"Jeg har lest og godtar reglene for løpet."))),Object(d.h)("button",{type:"button",class:"btn btn-primary",onClick:this.signupToRace},Object(d.h)(b.c,{id:"races.do-signup"},"Meld meg på"))))):Object(d.h)(t,null,P<new Date(C.signupStartDate)?Object(d.h)(t,null,Object(d.h)("h5",{class:"mt-4"},Object(d.h)("i",{class:"fas fa-exclamation-circle"})," ",Object(d.h)(b.c,{id:"races.signup-not-open-yet"},"Påmeldingen har ikke åpnet ennå!")),Object(d.h)("p",{class:"mt-4"},Object(d.h)(b.c,{id:"races.signup-opening"},"Påmeldingen åpner"),":",Object(d.h)("br",null),Object(d.h)("span",{class:"display-4"},h.a.formatDate(C.signupStartDate,{locale:"no-NB",hour12:!1,hour:"2-digit",minute:"2-digit"})))):Object(d.h)(t,null,Object(d.h)("h5",{class:"mt-4 mb-4"},Object(d.h)("i",{class:"fas fa-exclamation-circle"})," ",Object(d.h)(b.c,{id:"races.signup-closed"},"Påmeldingen er stengt!")))))),n&&Object(d.h)(t,null,Object(d.h)(j.a,{stores:this.props.stores,onCloseClick:this.toggleDrawer},Object(d.h)(v.a,{stores:this.props.stores,id:o.id}))))},s}(d.Component))||l;e.a=x}).call(this,s("hosL").Fragment)},n7ns:function(t,e,s){"use strict";(function(t){function a(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,a)}return s}function n(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?a(Object(s),!0).forEach((function(e){o(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):a(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}function o(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}function i(t,e){var s=void 0!==t.bib;return(void 0!==e.bib)-s||!0===s&&t.bib-e.bib||0}var r,c=s("hosL"),l=s("Utv1"),d=s("/eY4"),h=s("OhSV"),u=(s("Y3FI"),s("fh8t")),b=s.n(u),p=s("go65"),m=s("ZOvn"),f=s("/DnB"),O=(s("s4FZ"),Object(d.a)(r=function(e){function s(t){var s;return(s=e.call(this,t)||this).toggleDisplayDetails=function(t){var e=t.target.closest("tr").dataset.id,a=s.props.stores.appState;a.editUserDetails[e]||a.toggleDisplayDetails(e)},s.adminToggleEditUser=function(t){return new Promise((function(e,a){function n(){return r.toggleEditUserDetails(o),e()}var o,i,r,c,l,d;return t.stopPropagation(),o=t.target.closest("tr").dataset.id,c=(i=s.props.stores).raceStore,l=i.adminStore,(r=i.appState).editUserDetails[o]?n.call(this):(d=c.getMusherById(o),Promise.resolve(l.getUserByEmail(d.email)).then(function(){try{return n.call(this)}catch(t){return a(t)}}.bind(this),a))}))},s.veterinaryToggleEditUser=function(t){t.stopPropagation();var e=t.target.closest("tr").dataset.id;s.props.stores.appState.toggleVeterinaryUserDetails(e,!0)},s.toggleAdminSendMessage=function(t){var e=t.target.closest("button").dataset.class,a=s.state.showAdminSendMessage;a[e]=!a[e],s.setState({showAdminSendMessage:a})},s.toggleAdminSendInboxMessage=function(t){var e=t.target.closest("button").dataset.class,a=s.state.showAdminSendInboxMessage,n=void 0===a?{}:a;n[e]=!n[e],s.setState({showAdminSendInboxMessage:n})},s.toggleAdminImport=function(t){var e=t.target.closest("button").dataset.class,a=s.state.showAdminImport;a[e]=!a[e],s.setState({showAdminImport:a})},s.adminSignupEdit=function(t){var e,a=s.props.race,n=(void 0===a?{}:a).id,o=s.props.stores.raceStore,i=t.target.id,r=t.target.value,c=t.target.dataset,d=((e={raceClassId:c.classid,contestantId:c.contestantid})["raceClassContestant"+l.a.ucfirst(i)]=r,e);clearTimeout(s.updateTimer[i]),s.updateTimer[i]=setTimeout((function(){return new Promise((function(t){return o.editClass({id:n,data:d}),t()}))}),500)},s.adminSignupSetValue=function(t){var e,a=s.props.race,n=(void 0===a?{}:a).id,o=s.props.stores.raceStore,i=t.target.dataset,r=i.field,c=i.value,d=((e={raceClassId:i.classid,contestantId:i.contestantid})["raceClassContestant"+l.a.ucfirst(r)]=c,e);clearTimeout(s.updateTimer[r]),s.updateTimer[r]=setTimeout((function(){return new Promise((function(t){return o.editClass({id:n,data:d}),t()}))}),5)},s.sendEmail=function(t){return new Promise((function(e,a){var n,o,i,r,c;return o=(void 0===(n=s.props.race)?{}:n).id,i=t.target.closest("button").dataset.to,r=t.target.closest("button").dataset.raceclassid,c=s.state.message,Promise.resolve(s.props.stores.appState.sendEmail({to:i,subject:c.subject,body:c.body,raceId:o,raceClassId:r})).then((function(t){try{return s.setState({emailResponse:t}),e()}catch(t){return a(t)}}),a)}))},s.resetEmail=function(){s.setState({emailResponse:null,message:{subject:"",body:""}})},s.sendInboxMessage=function(t){return new Promise((function(e,a){var n,o,i,r;return n=s.props.stores.raceStore,i=(void 0===(o=s.props.race)?{}:o).id,r=t.target.closest("button").dataset.raceclassid,Promise.resolve(n.sendInboxMessage({body:s.state.inboxMessage.body,raceId:i,raceClassId:r})).then((function(t){try{return s.setState({inboxMessageResponse:t}),e()}catch(t){return a(t)}}),a)}))},s.resetInboxMessage=function(){s.setState({inboxMessage:{body:""}})},s.signupToRace=function(t){return new Promise((function(e,a){var o,i;return o=t.signup,i=s.props.race,Promise.resolve(s.props.stores.raceStore.addContestant({id:(void 0===i?{}:i).id,classId:o.class,newContestant:n({},o)})).then((function(){try{return e()}catch(t){return a(t)}}),a)}))},s.parseInput=function(t,e){return new Promise((function(a){return clearTimeout(s.parseInputTimer),s.parseInputTimer=setTimeout((function(){return s.doParseInput(t,e)}),500),a()}))},s.doParseInput=function(t,e){return new Promise((function(a){var n=String(t).split("\n"),o=[],i=[],r=n[0];o=r.match(/\t/)?r.split("\t"):r.match(/;/)?r.split(";"):r.split(",");for(var c=function(t){var e=n[t],s=void 0;s=e.match(/\t/)?e.split("\t"):e.match(/;/)?e.split(";"):e.split(",");var a={};s.forEach((function(t,e){var s=t;"email"===o[e]&&(s=t.toLowerCase()),a[o[e]]=s})),i.push(a)},l=1,d=n.length;l<d;l+=1)c(l);var h=s.props.race;return s.props.stores.raceStore.addMultipleContestants({id:(void 0===h?{}:h).id,classId:e,contestants:i}),a(!0)}))},s.chooseSubmenu=function(t){t.stopPropagation(),s.setState({submenu:t.target.parentElement.dataset.menu||t.target.dataset.menu})},s.filterByClass=function(t){var e=t.target.closest("button").dataset.id;s.props.stores.appState.toggleSelectedClassId(e,!0)},s.clearSearchForBib=function(){s.setState({searchForBib:""})},s.savePreCheck=function(t){return new Promise((function(e,a){var o,i,r,c,d,h,u,b,p,m,f,O,g,j;return o=t.target.closest("button").dataset,h=(c=s.state).dogJournals,b=(u=s.props.stores).dogJournalStore,f={id:(m=void 0===(p=u.userStore.user)?{}:p).id,firstname:m.firstname,lastname:m.lastname,email:m.email,image:m.image},O={id:i=o.id,chipId:r=o.chipid,name:o.name,shortname:o.shortname,team:o.team},g=n({checkType:"preCheck"},l.a.getNestedValue(d=c.preCheck,i)||{}),j=[{dog:n({},O),journal:n({},g),veterinary:n({},f)}],h[r]||(h[r]=[]),h[r].push(n(n(n({date:new Date},O),g),f)),Promise.resolve(b.insert({data:j})).then((function(){try{return delete d[i],s.setState({preCheck:d}),e()}catch(t){return a(t)}}),a)}))},s.state={displayDetails:{},editUserDetails:{},showAdminSendMessage:{},showAdminImport:{},message:{},inboxMessage:{},submenu:"chiplists",preCheck:{},raceCheck:{},dogJournals:{}},s.inputRef={},s.updateTimer={},s.parseInputTimer=null,s}var a,o;return o=e,(a=s).prototype=Object.create(o.prototype),a.prototype.constructor=a,a.__proto__=o,s.prototype.render=function(){var e=this,s=this.state,a=s.showAdminSendMessage,n=void 0===a?{}:a,o=s.showAdminSendInboxMessage,r=void 0===o?{}:o,d=s.showAdminImport,u=void 0===d?{}:d,O=s.message,g=void 0===O?{}:O,j=s.inboxMessage,v=void 0===j?{}:j,y=s.inboxMessageResponse,w=s.emailResponse,x=s.submenu,k=s.searchForBib,S=s.preCheck,C=void 0===S?{}:S,I=s.dogJournals,D=void 0===I?{}:I,T=this.props.stores,P=T.userStore,R=T.raceStore,E=T.appState,F=T.adminStore,M=P.user,A=P.isAdmin,L=P.isVeterinary,N=(void 0===M?{}:M).language,B=void 0===N?"en":N,z=E.displayDetails,H=E.editUserDetails,U=E.veterinaryUserDetails,_=E.selectedClassIds,V=void 0===_?[]:_,q=this.props.race,K=void 0===q?{}:q,W=function(t){if(k){var e=new RegExp(""+k.replace(/[^a-zA-Z 0-9æøåÆØÅ]/,""),"i");return e.test(t.bib)||e.test(t.firstname)||e.test(t.lastname)}return!0},Y=F.user,G=void 0===Y?{}:Y,Z=F.teams;return Object(c.h)(t,null,Object(c.h)("div",{class:"row"},Object(c.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-0 mb-2"},Object(c.h)("h2",{class:"mb-0"},Object(c.h)(h.c,{id:"races.mushers"},"Deltakere"))),Object(c.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-3 mb-2"},Object(c.h)("div",{class:"w-100 overflow-hidden"},Object(c.h)("div",{class:"d-flex flex-row flex-nowrap pb-2 px-1",style:"overflow: auto; scroll-snap-type: x mandatory;"},K.classes&&K.classes.sort((function(t,e){return t.distance-e.distance})).map((function(s,a){return Object(c.h)(t,null,Object(c.h)("div",{class:"col px-0 pt-2"},Object(c.h)("button",{type:"button",class:"btn btn-block "+(0===a&&"rounded-pill-left")+" "+(a===K.classes.length-1&&"rounded-pill-right")+" rounded-none "+(V.indexOf(s.id)>-1?"btn-primary":"btn-outline-primary")+" text-nowrap",style:"text-overflow: ellipsis; overflow: hidden;",onClick:e.filterByClass,"data-id":s.id},s.title)))})))),Object(c.h)("div",{class:"row mb-3"},Object(c.h)("div",{class:"col-6 offset-3"},Object(c.h)("div",{class:"input-group"},Object(c.h)("input",{class:"form-control form-control-lg",type:"text",placeholder:"Search for bib",value:k,onInput:Object(p.a)(this,"searchForBib")}),k&&Object(c.h)("div",{class:"input-group-append"},Object(c.h)("div",{class:"input-group-text",onClick:this.clearSearchForBib},"x"))))),K.classes&&K.classes.filter((function(t){return!(V.length>0)||V.indexOf(t.id)>-1})).sort((function(t,e){return t.distance-e.distance})).map((function(s){return Object(c.h)(t,null,A&&Object(c.h)("span",{class:"float-right"},"Total app users: ",s.contestants&&s.contestants.filter((function(t){return t.user||t.team})).length),Object(c.h)("h5",null,s.title," ",s.startDate&&Object(c.h)(t,null,": ",Object(c.h)("span",{class:"font-weight-lighter"},l.a.formatDate(s.startDate,{locale:B,hour12:!1,hour:"2-digit",minute:"2-digit"})," - ",l.a.formatDate(s.endDate,{locale:B,hour12:!1,hour:"2-digit",minute:"2-digit"})))),A&&Object(c.h)(t,null,Object(c.h)("a",{class:"mx-2",href:"/tv/top10/"+K.id+"/"+s.id},"TV Top 10")," -",Object(c.h)("a",{class:"mx-2",href:"/tv/top5/"+K.id+"/"+s.id},"TV Top 5")," -",Object(c.h)("a",{class:"mx-2",href:"/tv/top3/"+K.id+"/"+s.id},"TV Top 3")," -",Object(c.h)("a",{class:"mx-2",href:"/tv/top10progress/"+K.id+"/"+s.id},"TV Top Progress 10")," -",Object(c.h)("a",{class:"mx-2",href:"/tv/top5progress/"+K.id+"/"+s.id},"TV Top Progress 5")," -",Object(c.h)("a",{class:"mx-2",href:"/tv/top3progress/"+K.id+"/"+s.id},"TV Top Progress 3")," -",Object(c.h)("a",{class:"mx-2",href:"/tv/team/"+K.id+"/1"},"TV One team")," -",Object(c.h)("a",{class:"mx-2",href:"/tv/tracking/"+K.id+"/"+s.id},"TV tracking")," -",Object(c.h)("a",{class:"mx-2",href:"/tv/freetext"},"TV free text")," -",Object(c.h)("a",{class:"mx-2",href:"/embed/top10/"+K.id+"/"+s.id},"Embed top10")," -",Object(c.h)("a",{class:"mx-2",href:"/embed/tracking/"+K.id+"/"+s.id},"Embed tracking")," -",Object(c.h)("a",{class:"mx-2",href:"/embed/chiplist/"+K.id+"/"+s.id},"Embed chiplist")," -",Object(c.h)("a",{class:"mx-2",href:"/embed/agreement/"+K.id+"/"+s.id},"Embed agreement")," -"),Object(c.h)("div",{class:"table-responsive"},Object(c.h)("table",{class:"table table-sm table-striped"},Object(c.h)("thead",null,Object(c.h)("tr",null,Object(c.h)("th",{scope:"col"},"#"),Object(c.h)("th",{scope:"col",style:"min-width: 90%;"},Object(c.h)(h.c,{id:"races.name"},"Navn")))),Object(c.h)("tbody",null,s.contestants&&s.contestants.filter(W).sort(i).map((function(a,n){var o=R.getTeamById(a.team),i=R.hasVaccines(o),r=a.mandatoryCheck;return Object(c.h)(t,null,Object(c.h)("tr",{onClick:e.toggleDisplayDetails,"data-id":a.id},Object(c.h)("th",{scope:"row"},a.bib?Object(c.h)(t,null,a.bib):Object(c.h)(t,null,Object(c.h)("span",{class:"font-weight-lighter text-muted"},n+1))),Object(c.h)("td",{class:z[a.id]?"font-weight-bold":"",style:z[a.id]||U[a.id]?"":"line-height: 0.8em;"},L&&Object(c.h)(t,null,a.team?Object(c.h)(t,null,Object(c.h)("button",{class:"btn btn-primary btn-sm float-right ml-4",onClick:e.veterinaryToggleEditUser},Object(c.h)("i",{class:"fas fa-user-md"}))):Object(c.h)(t,null,Object(c.h)("button",{class:"btn btn-outline-secondary btn-sm float-right ml-4 disabled",onClick:function(t){return t.stopPropagation()}},Object(c.h)("i",{class:"fas fa-user-md"}))),i?Object(c.h)(t,null,Object(c.h)("button",{class:"btn btn-success btn-sm float-right ml-1",onClick:function(t){return t.stopPropagation()}},Object(c.h)("i",{class:"fas fa-syringe"}))):Object(c.h)(t,null,Object(c.h)("button",{class:"btn btn-outline-secondary btn-sm float-right ml-1",onClick:function(t){return t.stopPropagation()}},Object(c.h)("i",{class:"fas fa-syringe"}))),r?Object(c.h)(t,null,Object(c.h)("button",{class:"btn btn-success btn-sm float-right ml-1",onClick:function(t){return t.stopPropagation()}},Object(c.h)("i",{class:"fas fa-stethoscope"}))):Object(c.h)(t,null,Object(c.h)("button",{class:"btn btn-outline-secondary btn-sm float-right ml-1",onClick:function(t){return t.stopPropagation()}},Object(c.h)("i",{class:"fas fa-stethoscope"})))),A&&Object(c.h)(t,null,Object(c.h)("button",{class:"btn btn-outline-warning btn-sm float-right ml-1",onClick:e.adminToggleEditUser},Object(c.h)("i",{class:"fas fa-user-edit"})),a.paidSignupfee&&Object(c.h)(t,null,Object(c.h)("span",{class:"float-right"},Object(c.h)("i",{class:"fas fa-check text-success"}),Object(c.h)("br",null))),Object(c.h)("small",{class:"float-right"},a.raceStatus&&Object(c.h)(t,null,Object(c.h)("span",{class:"text-muted"},"raceStatus:"),Object(c.h)("br",null)," ",a.raceStatus,Object(c.h)("br",null)),a.raceComment&&Object(c.h)(t,null,Object(c.h)("span",{class:"text-muted"},"raceComment:"),Object(c.h)("br",null)," ",a.raceComment,Object(c.h)("br",null)),a.gpxResultsApproved&&Object(c.h)(t,null,Object(c.h)("span",{class:"text-muted"},"gpxResultsApproved:"),Object(c.h)("br",null)," ",a.gpxResultsApproved,Object(c.h)("br",null)))),(A||L)&&K.liveRace>0&&K.declaration&&Object(c.h)(t,null,Object(c.h)("span",{class:"float-right text-success mr-2",style:"font-size: 1.2em;"},(a.user||a.team)&&Object(c.h)("i",{class:"fas fa-mobile-alt ml-2"}),a.declaration&&Object(c.h)("i",{class:"fas fa-handshake ml-2",alt:l.a.isoDate(a.declarationDate)}))),z[a.id]?Object(c.h)(t,null,a.flag&&Object(c.h)("span",{class:"mr-2"},a.flag),a.firstname?Object(c.h)(t,null,a.firstname," ",a.lastname,Object(c.h)("br",null)):Object(c.h)(t,null,a.name),Object(c.h)("span",{class:"text-muted"},o.name),Object(c.h)("br",null),Object(c.h)("small",{class:"text-muted"},a.sportsClub),Object(c.h)("br",null),a.facebook&&Object(c.h)("a",{class:"mr-2",href:m.a.asFacebookLink(a.facebook),native:!0,target:"_blank",rel:"noreferrer"},Object(c.h)("i",{class:"fab fa-facebook"})),a.instagram&&Object(c.h)("a",{class:"mr-2",href:m.a.asInstagramLink(a.instagram),native:!0,target:"_blank",rel:"noreferrer"},Object(c.h)("i",{class:"fab fa-instagram"})),Object(c.h)("br",null),A&&Object(c.h)(t,null,a.bib&&Object(c.h)(t,null,Object(c.h)("i",{class:"fas fa-tshirt ml-2"})," ",a.bib),a.startTime&&Object(c.h)(t,null,Object(c.h)("i",{class:"fas fa-clock ml-2"})," ",l.a.isoDate(a.startTime))),a.price1&&Object(c.h)("div",{class:"font-weight-lighter"},Object(c.h)("i",{class:"fas fa-trophy text-warning"})," ",a.price1,a.priceSent&&Object(c.h)(t,null,Object(c.h)("i",{class:"fas fa-check text-success"}))),a.price2&&Object(c.h)("div",{class:"font-weight-lighter"},Object(c.h)("i",{class:"fas fa-trophy text-warning"})," ",a.price2),a.price3&&Object(c.h)("div",{class:"font-weight-lighter"},Object(c.h)("i",{class:"fas fa-trophy text-warning"})," ",a.price3)):Object(c.h)(t,null,a.price1&&Object(c.h)("span",{class:"float-right text-warning",style:"font-size: 1.2em;"},Object(c.h)("i",{class:"fas fa-trophy"}),a.priceSent&&Object(c.h)(t,null,Object(c.h)("i",{class:"fas fa-check text-success"}))),Object(c.h)("nobr",null,a.flag&&Object(c.h)("span",{class:"mr-2"},a.flag),a.firstname?Object(c.h)(t,null,a.firstname," ",a.lastname,Object(c.h)("br",null)):Object(c.h)(t,null,a.name),Object(c.h)("small",{class:"text-muted"},a.sportsClub),Object(c.h)("br",null))),L&&U[a.id]&&Object(c.h)(t,null,Object(c.h)(f.a,{horizontal:"end",vertical:"center"}),Object(c.h)("div",{class:"w-100 overflow-hidden",style:"max-width: 100%;"},Object(c.h)("div",{class:"d-flex flex-row flex-nowrap pb-2 px-1",style:"overflow: auto; scroll-snap-type: x mandatory;"},Object(c.h)("div",{class:"col px-0 pt-2"},Object(c.h)("button",{class:"btn btn-sm btn-block rounded-pill-left rounded-none "+("chiplists"===x?"btn-primary":"btn-outline-primary")+" text-nowrap",style:"text-overflow: ellipsis; overflow: hidden;","data-menu":"chiplists",onClick:e.chooseSubmenu},Object(c.h)("i",{class:"fas fa-user-md"})," ",Object(c.h)(h.c,{id:"racevet.chiplists"},"Vaccines"))),Object(c.h)("div",{class:"col px-0 pt-2"},Object(c.h)("button",{class:"btn btn-sm btn-block rounded-none "+("precheck"===x?"btn-primary":"btn-outline-primary")+" text-nowrap",style:"text-overflow: ellipsis; overflow: hidden;","data-menu":"precheck",onClick:e.chooseSubmenu},Object(c.h)("i",{class:"fas fa-stethoscope"})," ",Object(c.h)(h.c,{id:"racevet.precheck"},"PreCheck"))),Object(c.h)("div",{class:"col px-0 pt-2"},Object(c.h)("button",{class:"btn btn-sm btn-block rounded-pill-right rounded-none "+("racecheck"===x?"btn-primary":"btn-outline-primary")+" text-nowrap",style:"text-overflow: ellipsis; overflow: hidden;","data-menu":"racecheck",onClick:e.chooseSubmenu},Object(c.h)("i",{class:"fas fa-flag-checkered"})," ",Object(c.h)(h.c,{id:"racevet.racecheck"},"RaceCheck"))))),"chiplists"===x&&Object(c.h)(t,null,Object(c.h)("h5",{class:"mt-4 border-bottom"},"Chiplist & Vaccines"),Object(c.h)("div",{class:"container-fluid"},Object(c.h)("div",{class:"row"},o&&o.dogs?o.dogs.map((function(e){var s;return o&&o.vaccines&&(s=o.vaccines.filter((function(t){return t.chipId===e.chipId}))),Object(c.h)(t,null,Object(c.h)("div",{class:"col-12 d-flex my-3"},Object(c.h)("div",{class:"mx-0 mr-1 px-0 position-relative pt-1"},Object(c.h)("div",{class:"text-center border rounded-circle imageRounded imageRoundedMedium text-muted pt-2",style:(e.image?'background-image: url("'+e.image.s3SmallLink+'"); background-size: cover;':"")+" border-width: 2px !important;"},!e.image&&Object(c.h)("span",{class:"font-weight-lighter",style:"font-size: 35px;"},l.a.ucfirst(e.name,!0))),Object(c.h)("small",null,Object(c.h)("span",{class:"float-left text-overflow",style:"width: 70px;"},e.name),Object(c.h)("br",null)),(e.birth||e.gender)&&Object(c.h)("small",null,Object(c.h)("small",{class:"font-weight-normal float-right position-absolute text-white bg-info p-1 rounded",style:"top: 0px; right: 0px; line-height: 0.8em;"},e.birth&&Object(c.h)("span",{class:"mr-1 text-white"},l.a.age(e.birth,e.deceased)),e.gender&&Object(c.h)(t,null,"female"===e.gender?Object(c.h)("i",{class:"fas fa-venus"}):Object(c.h)("i",{class:"fas fa-mars"}))))),Object(c.h)("div",{class:"flex-grow-1 row"},Object(c.h)("div",{class:"col-12 font-weight-bold"},Object(c.h)("i",{class:"fas fa-microchip text-muted"})," ",e.chipId),s&&s.map((function(e){return Object(c.h)("div",{class:"col-4 px-1 overflow-hidden"},Object(c.h)("span",{class:"badge badge-"+(e.inKarens?"warning":"success")},Object(c.h)("span",{class:"font-weight-lighter"},Object(c.h)("i",{class:"fas fa-calendar-check"})," ",l.a.isoDate(e.vaccineAgens.durationEnd,!1,!1,!0),e.inKarens&&Object(c.h)(t,null,Object(c.h)("br",null),"(",Object(c.h)(h.c,{id:"dogs.vaccine-karens"},"karens"),": ",l.a.format(e.karensDaysLeft,0)," ",Object(c.h)(h.c,{id:"dogs.vaccine-karens-days-left"},"days left"),")"))),Object(c.h)("div",{class:"text-overflow"},Object(c.h)("small",{class:"font-weight-light"},e.vaccineAgens.name,Object(c.h)("br",null),Object(c.h)("nobr",null,e.vaccineName),Object(c.h)("br",null))))})))))})):Object(c.h)(t,null,Object(c.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 px-0"},Object(c.h)("div",{class:"text-center text-muted"},Object(c.h)("div",{class:"display-1"},Object(c.h)("i",{class:"fas fa-dog"})),Object(c.h)("h3",null,Object(c.h)(h.c,{id:"teams.no-dogs-title"},"No dogs for this team!")))))))),"precheck"===x&&Object(c.h)(t,null,Object(c.h)("h5",{class:"mt-4 border-bottom"},"Precheck"),Object(c.h)("div",{class:"row"},o&&o.dogs?o.dogs.map((function(s){var a;return o&&o.journal&&(a=o.journal.filter((function(t){return t.chipId===s.chipId}))),Object(c.h)(t,null,Object(c.h)("div",{class:"col-12 d-flex my-3"},Object(c.h)("div",{class:"mx-0 mr-1 px-0 position-relative pt-1"},Object(c.h)("div",{class:"text-center border rounded-circle imageRounded imageRoundedMedium text-muted pt-2",style:(s.image?'background-image: url("'+s.image.s3SmallLink+'"); background-size: cover;':"")+" border-width: 2px !important;"},!s.image&&Object(c.h)("span",{class:"font-weight-lighter",style:"font-size: 35px;"},l.a.ucfirst(s.name,!0))),Object(c.h)("small",null,Object(c.h)("span",{class:"float-left text-overflow",style:"width: 70px;"},s.name),Object(c.h)("br",null)),(s.birth||s.gender)&&Object(c.h)("small",null,Object(c.h)("small",{class:"font-weight-normal float-right position-absolute text-white bg-info p-1 rounded",style:"top: 0px; right: 0px; line-height: 0.8em;"},s.birth&&Object(c.h)("span",{class:"mr-1 text-white"},l.a.age(s.birth,s.deceased)),s.gender&&Object(c.h)(t,null,"female"===s.gender?Object(c.h)("i",{class:"fas fa-venus"}):Object(c.h)("i",{class:"fas fa-mars"}))))),Object(c.h)("div",{class:"flex-grow-1 row"},Object(c.h)("div",{class:"col-12 font-weight-bold"},Object(c.h)("i",{class:"fas fa-microchip text-muted"})," ",s.chipId.slice(-5)),Object(c.h)("div",{class:"col-12"},a&&a.length>0&&a.map((function(e){return Object(c.h)(t,null,Object(c.h)("div",{class:"row border-bottom"},Object(c.h)("div",{class:"col-12 text-muted"},Object(c.h)("small",null,Object(c.h)("span",{class:"float-right"},e.checkType&&Object(c.h)(t,null,e.checkType)),l.a.isoDate(e.date)," by ",e.veterinaryFirstname," ",e.veterinaryLastname)),Object(c.h)("div",{class:"col-12 d-flex justify-content-between"},e.diagnoseId>0&&Object(c.h)("span",{class:"mx-1"},Object(c.h)("span",{class:"text-muted"},"ID:")," ",e.diagnoseId),e.heartRate>0&&Object(c.h)("span",{class:"mx-1"},Object(c.h)("span",{class:"text-muted"},"HR:")," ",e.heartRate),e.weight>0&&Object(c.h)("span",{class:"mx-1"},Object(c.h)("i",{class:"fas fa-balance-scale text-muted"})," ",e.weight," ",Object(c.h)("span",{class:"text-muted"},"kg")),e.bodyConditionScore>0&&Object(c.h)("span",{class:"mx-1"},Object(c.h)("span",{class:"text-muted"},"BCS:")," ",e.bodyConditionScore)),Object(c.h)("div",{class:"col-12"},e.generalFindings&&Object(c.h)("span",{class:"mr-1"},Object(c.h)("span",{class:"text-muted"},"Other:")," ",e.generalFindings))))})),D[s.chipId]&&D[s.chipId].length>0&&D[s.chipId].map((function(e){return Object(c.h)(t,null,Object(c.h)("div",{class:"row border-bottom"},Object(c.h)("div",{class:"col-12 text-muted"},Object(c.h)("small",null,Object(c.h)("span",{class:"float-right"},e.checkType&&Object(c.h)(t,null,e.checkType)),l.a.isoDate(e.date)," by ",e.veterinaryFirstname," ",e.veterinaryLastname)),Object(c.h)("div",{class:"col-12 d-flex justify-content-between"},e.diagnoseId>0&&Object(c.h)("span",{class:"mx-1"},Object(c.h)("span",{class:"text-muted"},"ID:")," ",e.diagnoseId),e.heartRate>0&&Object(c.h)("span",{class:"mx-1"},Object(c.h)("span",{class:"text-muted"},"HR:")," ",e.heartRate),e.weight>0&&Object(c.h)("span",{class:"mx-1"},Object(c.h)("i",{class:"fas fa-balance-scale text-muted"})," ",e.weight," ",Object(c.h)("span",{class:"text-muted"},"kg")),e.bodyConditionScore>0&&Object(c.h)("span",{class:"mx-1"},Object(c.h)("span",{class:"text-muted"},"BCS:")," ",e.bodyConditionScore)),Object(c.h)("div",{class:"col-12"},e.generalFindings&&Object(c.h)("span",{class:"mr-1"},Object(c.h)("span",{class:"text-muted"},"Other:")," ",e.generalFindings))))}))),Object(c.h)("div",{class:"col-12 form-group"},Object(c.h)("small",null,Object(c.h)("label",{class:"text-overflow w-100 mb-0",for:"diagnoseId"},"Diagnostic"),Object(c.h)("select",{class:"form-control",id:"diagnoseId",onInput:Object(p.a)(e,"preCheck."+s.id+".diagnoseId"),value:l.a.getNestedValue(C,s.id+".diagnoseId")},Object(c.h)("option",{value:""},"-- Please choose --"),Object(c.h)("option",{value:"100"},"No findings")))),Object(c.h)("div",{class:"col-4 form-group"},Object(c.h)("small",null,Object(c.h)("label",{class:"text-overflow w-100 mb-0",for:"weight"},"Weight"),Object(c.h)("input",{type:"number",class:"form-control",id:"weight",onInput:Object(p.a)(e,"preCheck."+s.id+".weight"),value:l.a.getNestedValue(C,s.id+".weight")}))),Object(c.h)("div",{class:"col-4 form-group overflow-hidden"},Object(c.h)("small",null,Object(c.h)("label",{class:"text-overflow w-100 mb-0",for:"heartRate"},"Heart Rate"),Object(c.h)("input",{type:"text",class:"form-control",id:"heartRate",onInput:Object(p.a)(e,"preCheck."+s.id+".heartRate"),value:l.a.getNestedValue(C,s.id+".heartRate")}))),Object(c.h)("div",{class:"col-4 form-group"},Object(c.h)("small",null,Object(c.h)("label",{class:"text-overflow w-100 mb-0",for:"bodyConditionScore"},"BCS"),Object(c.h)("input",{type:"number",class:"form-control",id:"bodyConditionScore",onInput:Object(p.a)(e,"preCheck."+s.id+".bodyConditionScore"),value:l.a.getNestedValue(C,s.id+".bodyConditionScore")}))),Object(c.h)("div",{class:"col-12 form-group"},Object(c.h)("small",null,Object(c.h)("label",{class:"text-overflow w-100 mb-0",for:"generalFindings"},"General findings"),Object(c.h)("input",{type:"text",class:"form-control",id:"generalFindings",onInput:Object(p.a)(e,"preCheck."+s.id+".generalFindings"),value:l.a.getNestedValue(C,s.id+".generalFindings")})),Object(c.h)("small",{id:"generalFindingsHelp",class:"form-text text-muted"},"Teeth, mucus membranes, general condition, other findings.")),Object(c.h)("div",{class:"col-12 form-group"},Object(c.h)("button",{class:"btn btn-outline-success",onClick:e.savePreCheck,"data-id":s.id,"data-chipid":s.chipId,"data-team":o.id,"data-name":s.name,"data-shortname":s.shortName}," Save Pre Check")))))})):Object(c.h)(t,null,Object(c.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 px-0"},Object(c.h)("div",{class:"text-center text-muted"},Object(c.h)("div",{class:"display-1"},Object(c.h)("i",{class:"fas fa-dog"})),Object(c.h)("h3",null,Object(c.h)(h.c,{id:"teams.no-dogs-title"},"No dogs for this team!"))))))),"racecheck"===x&&Object(c.h)(t,null,Object(c.h)("h5",{class:"mt-4 border-bottom"},"Racecheck"),Object(c.h)("div",{class:"row"},o&&o.dogs?o.dogs.map((function(e){return Object(c.h)(t,null,Object(c.h)("div",{class:"col-12 d-flex my-3"},Object(c.h)("div",{class:"mx-0 mr-1 px-0 position-relative pt-1"},Object(c.h)("div",{class:"text-center border rounded-circle imageRounded imageRoundedMedium text-muted pt-2",style:(e.image?'background-image: url("'+e.image.s3SmallLink+'"); background-size: cover;':"")+" border-width: 2px !important;"},!e.image&&Object(c.h)("span",{class:"font-weight-lighter",style:"font-size: 35px;"},l.a.ucfirst(e.name,!0))),Object(c.h)("small",null,Object(c.h)("span",{class:"float-left text-overflow",style:"width: 70px;"},e.name),Object(c.h)("br",null)),(e.birth||e.gender)&&Object(c.h)("small",null,Object(c.h)("small",{class:"font-weight-normal float-right position-absolute text-white bg-info p-1 rounded",style:"top: 0px; right: 0px; line-height: 0.8em;"},e.birth&&Object(c.h)("span",{class:"mr-1 text-white"},l.a.age(e.birth,e.deceased)),e.gender&&Object(c.h)(t,null,"female"===e.gender?Object(c.h)("i",{class:"fas fa-venus"}):Object(c.h)("i",{class:"fas fa-mars"}))))),Object(c.h)("div",{class:"flex-grow-1 row"},Object(c.h)("div",{class:"col-12 font-weight-bold"},Object(c.h)("i",{class:"fas fa-microchip text-muted"})," ",e.chipId.slice(-5)),Object(c.h)("div",{class:"col-4 form-group"},Object(c.h)("small",null,Object(c.h)("label",{class:"text-overflow w-100",for:"weight"},"Weight"),Object(c.h)("input",{type:"number",class:"form-control",id:"weight"}))),Object(c.h)("div",{class:"col-4 form-group overflow-hidden"},Object(c.h)("small",null,Object(c.h)("label",{class:"text-overflow w-100",for:"hrHeartLungs"},"HR/Heart/Lungs"),Object(c.h)("input",{type:"text",class:"form-control",id:"hrHeartLungs"}))),Object(c.h)("div",{class:"col-4 form-group"},Object(c.h)("small",null,Object(c.h)("label",{class:"text-overflow w-100",for:"bcs"},"BCS"),Object(c.h)("input",{type:"number",class:"form-control",id:"bcs"}))),Object(c.h)("div",{class:"col-12 form-group"},Object(c.h)("small",null,Object(c.h)("label",{class:"text-overflow w-100",for:"general"},"General findings"),Object(c.h)("input",{type:"text",class:"form-control",id:"general"})),Object(c.h)("small",{id:"generalHelp",class:"form-text text-muted"},"Teeth, mucus membranes, general condition, other findings.")))))})):Object(c.h)(t,null,Object(c.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 px-0"},Object(c.h)("div",{class:"text-center text-muted"},Object(c.h)("div",{class:"display-1"},Object(c.h)("i",{class:"fas fa-dog"})),Object(c.h)("h3",null,Object(c.h)(h.c,{id:"teams.no-dogs-title"},"No dogs for this team!")))))))),A&&H[a.id]&&Object(c.h)(t,null,Object(c.h)("h5",null,"Admin edit:"),Object(c.h)("div",{class:"form-group row my-0"},Object(c.h)("label",{class:"col-4 col-form-label text-right"},"Email"),Object(c.h)("div",{class:"col-8"},a.email)),Object(c.h)("div",{class:"form-group row my-0"},Object(c.h)("label",{for:"bib",class:"col-4 col-form-label text-right"},"bib"),Object(c.h)("div",{class:"col-8"},Object(c.h)("input",{type:"number",class:"form-control",id:"bib","data-classid":s.id,"data-contestantid":a.id,onInput:e.adminSignupEdit,value:a.bib}))),Object(c.h)("div",{class:"form-group row my-0"},Object(c.h)("label",{for:"startTime",class:"col-4 col-form-label text-right"},"startTime"),Object(c.h)("div",{class:"col-8"},Object(c.h)("input",{type:"datetime-local",class:"form-control",id:"startTime","data-classid":s.id,"data-contestantid":a.id,onInput:e.adminSignupEdit,value:l.a.isoDate(a.startTime?a.startTime:s.startDate,!1,!1,!1)}))),Object(c.h)("div",{class:"form-group row my-0"},Object(c.h)("label",{for:"team",class:"col-4 col-form-label text-right"},"team"),Object(c.h)("div",{class:"col-8"},Z?Object(c.h)(t,null,Object(c.h)("select",{class:"form-control",id:"team","data-classid":s.id,"data-contestantid":a.id,onInput:e.adminSignupEdit,value:a.team},Object(c.h)("option",{value:""},"-- Choose race team --"),Z&&Z.map((function(e){return Object(c.h)(t,null,Object(c.h)("option",{value:e.id},e.name," ",e.dogs?"("+e.dogs.length+")":""))})))):Object(c.h)(t,null,Object(c.h)("input",{type:"number",class:"form-control",id:"team","data-classid":s.id,"data-contestantid":a.id,onInput:e.adminSignupEdit,value:a.team})))),Object(c.h)("div",{class:"form-group row my-0"},Object(c.h)("label",{for:"user",class:"col-4 col-form-label text-right"},"user"),Object(c.h)("div",{class:"col-8"},Object(c.h)("input",{type:"number",class:"form-control",id:"user","data-classid":s.id,"data-contestantid":a.id,onInput:e.adminSignupEdit,value:a.user}))),Object(c.h)("div",{class:"form-group row my-0"},Object(c.h)("label",{for:"team",class:"col-4 col-form-label text-right"},"Race status"),Object(c.h)("div",{class:"col-8"},Object(c.h)("select",{class:"form-control",id:"raceStatus","data-classid":s.id,"data-contestantid":a.id,onInput:e.adminSignupEdit,value:a.raceStatus},Object(c.h)("option",{value:""},"-- Choose race status --"),Object(c.h)("option",{value:"OK"},"OK - Everything ok"),Object(c.h)("option",{value:"DNS"},"DNS - Did Not Start"),Object(c.h)("option",{value:"DNF"},"DNF - Did Not Finish"),Object(c.h)("option",{value:"DNQ"},"DNQ - Did not qualify"),Object(c.h)("option",{value:"DQ"},"DQ - Disqualified")))),Object(c.h)("div",{class:"form-group row my-0"},Object(c.h)("label",{for:"raceComment",class:"col-4 col-form-label text-right"},"Race comment"),Object(c.h)("div",{class:"col-8"},Object(c.h)("input",{type:"text",class:"form-control",id:"raceComment","data-classid":s.id,"data-contestantid":a.id,onInput:e.adminSignupEdit,value:a.raceComment}))),Object(c.h)("div",{class:"form-group row my-0"},Object(c.h)("label",{for:"gpxResultsApproved",class:"col-4 col-form-label text-right"},"GPX Results approved (date)"),Object(c.h)("div",{class:"col-8"},Object(c.h)("input",{type:"date",class:"form-control",id:"gpxResultsApproved","data-classid":s.id,"data-contestantid":a.id,onInput:e.adminSignupEdit,value:a.gpxResultsApproved?l.a.isoDate(a.gpxResultsApproved,!1,!1,!0):null}))),Object(c.h)("div",{class:"form-group row my-0"},Object(c.h)("label",{for:"paidSignupfee",class:"col-4 col-form-label text-right"},"paidSignupfee (date)"),Object(c.h)("div",{class:"col-8"},Object(c.h)("input",{type:"date",class:"form-control",id:"paidSignupfee","data-classid":s.id,"data-contestantid":a.id,onInput:e.adminSignupEdit,value:a.paidSignupfee?l.a.isoDate(a.paidSignupfee,!1,!1,!0):null}))),Object(c.h)("div",{class:"form-group row my-0"},Object(c.h)("label",{for:"startOrder",class:"col-4 col-form-label text-right"},"startOrder"),Object(c.h)("div",{class:"col-8"},Object(c.h)("input",{type:"number",class:"form-control",id:"startOrder","data-classid":s.id,"data-contestantid":a.id,onInput:e.adminSignupEdit,value:a.startOrder}))),Object(c.h)("div",{class:"form-group row my-0"},Object(c.h)("label",{for:"cellphone",class:"col-4 col-form-label text-right"},"Mobil"),Object(c.h)("div",{class:"col-8"},Object(c.h)("input",{type:"text",class:"form-control",id:"cellphone","data-classid":s.id,"data-contestantid":a.id,onInput:e.adminSignupEdit,value:a.cellphone}),G&&G.cellphone&&Object(c.h)("small",{id:"cellphoneHelp",class:"form-text text-muted","data-field":"cellphone","data-value":G.cellphone,"data-classid":s.id,"data-contestantid":a.id,onClick:e.adminSignupSetValue},G.cellphone||""))),Object(c.h)("div",{class:"form-group row my-0"},Object(c.h)("label",{for:"name",class:"col-4 col-form-label text-right"},"Navn"),Object(c.h)("div",{class:"col-8"},Object(c.h)("input",{type:"text",class:"form-control",id:"name","data-classid":s.id,"data-contestantid":a.id,onInput:e.adminSignupEdit,value:a.name}))),Object(c.h)("div",{class:"form-group row my-0"},Object(c.h)("label",{for:"firstname",class:"col-4 col-form-label text-right"},"Fornavn"),Object(c.h)("div",{class:"col-8"},Object(c.h)("input",{type:"text",class:"form-control",id:"firstname","data-classid":s.id,"data-contestantid":a.id,onInput:e.adminSignupEdit,value:a.firstname}),G&&G.firstname&&Object(c.h)("small",{id:"firstnameHelp",class:"form-text text-muted","data-field":"firstname","data-value":G.firstname,"data-classid":s.id,"data-contestantid":a.id,onClick:e.adminSignupSetValue},G.firstname||""))),Object(c.h)("div",{class:"form-group row my-0"},Object(c.h)("label",{for:"lastname",class:"col-4 col-form-label text-right"},"Etternavn"),Object(c.h)("div",{class:"col-8"},Object(c.h)("input",{type:"text",class:"form-control",id:"lastname","data-classid":s.id,"data-contestantid":a.id,onInput:e.adminSignupEdit,value:a.lastname}),G&&G.lastname&&Object(c.h)("small",{id:"lastnameHelp",class:"form-text text-muted","data-field":"lastname","data-value":G.lastname,"data-classid":s.id,"data-contestantid":a.id,onClick:e.adminSignupSetValue},G.lastname||""))),Object(c.h)("div",{class:"form-group row my-0"},Object(c.h)("label",{for:"address",class:"col-4 col-form-label text-right"},"Adresse"),Object(c.h)("div",{class:"col-8"},Object(c.h)("input",{type:"text",class:"form-control",id:"address","data-classid":s.id,"data-contestantid":a.id,onInput:e.adminSignupEdit,value:a.address}))),Object(c.h)("div",{class:"form-group row my-0"},Object(c.h)("label",{for:"postalcode",class:"col-4 col-form-label text-right"},"Postalcode"),Object(c.h)("div",{class:"col-8"},Object(c.h)("input",{type:"text",class:"form-control",id:"postalcode","data-classid":s.id,"data-contestantid":a.id,onInput:e.adminSignupEdit,value:a.postalcode}),G&&G.postalcode&&Object(c.h)("small",{id:"postalcodeHelp",class:"form-text text-muted","data-field":"postalcode","data-value":G.postalcode,"data-classid":s.id,"data-contestantid":a.id,onClick:e.adminSignupSetValue},G.postalcode||""))),Object(c.h)("div",{class:"form-group row my-0"},Object(c.h)("label",{for:"postalplace",class:"col-4 col-form-label text-right"},"Postalplace"),Object(c.h)("div",{class:"col-8"},Object(c.h)("input",{type:"text",class:"form-control",id:"postalplace","data-classid":s.id,"data-contestantid":a.id,onInput:e.adminSignupEdit,value:a.postalplace}),G&&G.postalplace&&Object(c.h)("small",{id:"postalplaceHelp",class:"form-text text-muted","data-field":"postalplace","data-value":G.postalplace,"data-classid":s.id,"data-contestantid":a.id,onClick:e.adminSignupSetValue},G.postalplace||""))),Object(c.h)("div",{class:"form-group row my-0"},Object(c.h)("label",{for:"flag",class:"col-4 col-form-label text-right"},"flag (emoji)"),Object(c.h)("div",{class:"col-8"},Object(c.h)("input",{type:"text",class:"form-control",id:"flag","data-classid":s.id,"data-contestantid":a.id,onInput:e.adminSignupEdit,value:a.flag}),G&&G.flag&&Object(c.h)("small",{id:"flagHelp",class:"form-text text-muted","data-field":"flag","data-value":G.flag,"data-classid":s.id,"data-contestantid":a.id,onClick:e.adminSignupSetValue},G.flag||""))),Object(c.h)("div",{class:"form-group row my-0"},Object(c.h)("label",{for:"countryCode",class:"col-4 col-form-label text-right"},"countryCode (iso)"),Object(c.h)("div",{class:"col-8"},Object(c.h)("input",{type:"text",class:"form-control",id:"countryCode","data-classid":s.id,"data-contestantid":a.id,onInput:e.adminSignupEdit,value:a.countryCode}))),Object(c.h)("div",{class:"form-group row my-0"},Object(c.h)("label",{for:"birthdate",class:"col-4 col-form-label text-right"},"birthdate"),Object(c.h)("div",{class:"col-8"},Object(c.h)("input",{type:"date",class:"form-control",id:"birthdate","data-classid":s.id,"data-contestantid":a.id,onInput:e.adminSignupEdit,value:a.birthdate?l.a.isoDate(a.birthdate,!1,!1,!0):null}))),Object(c.h)("div",{class:"form-group row my-0"},Object(c.h)("label",{for:"sportsClub",class:"col-4 col-form-label text-right"},"Klubb"),Object(c.h)("div",{class:"col-8"},Object(c.h)("input",{type:"text",class:"form-control",id:"sportsClub","data-classid":s.id,"data-contestantid":a.id,onInput:e.adminSignupEdit,value:a.sportsClub}),G&&G.sportsClub&&Object(c.h)("small",{id:"sportsClubHelp",class:"form-text text-muted","data-field":"sportsClub","data-value":G.sportsClub,"data-classid":s.id,"data-contestantid":a.id,onClick:e.adminSignupSetValue},G.sportsClub||""))),Object(c.h)("div",{class:"form-group row my-0"},Object(c.h)("label",{for:"status",class:"col-4 col-form-label text-right"},"Status"),Object(c.h)("div",{class:"col-8"},Object(c.h)("input",{type:"text",class:"form-control",id:"status","data-classid":s.id,"data-contestantid":a.id,onInput:e.adminSignupEdit,value:a.status}))),Object(c.h)("div",{class:"form-group row my-0"},Object(c.h)("label",{for:"facebook",class:"col-4 col-form-label text-right"},"Facebook"),Object(c.h)("div",{class:"col-8"},Object(c.h)("input",{type:"text",class:"form-control",id:"facebook","data-classid":s.id,"data-contestantid":a.id,onInput:e.adminSignupEdit,value:a.facebook}),G&&G.facebook&&Object(c.h)("small",{id:"facebookHelp",class:"form-text text-muted","data-field":"facebook","data-value":G.facebook,"data-classid":s.id,"data-contestantid":a.id,onClick:e.adminSignupSetValue},G.facebook||""))),Object(c.h)("div",{class:"form-group row my-0"},Object(c.h)("label",{for:"instagram",class:"col-4 col-form-label text-right"},"Instagram"),Object(c.h)("div",{class:"col-8"},Object(c.h)("input",{type:"text",class:"form-control",id:"instagram","data-classid":s.id,"data-contestantid":a.id,onInput:e.adminSignupEdit,value:a.instagram}),G&&G.instagram&&Object(c.h)("small",{id:"instagramHelp",class:"form-text text-muted","data-field":"instagram","data-value":G.instagram,"data-classid":s.id,"data-contestantid":a.id,onClick:e.adminSignupSetValue},G.instagram||""))),Object(c.h)("div",{class:"form-group row my-0"},Object(c.h)("label",{for:"team",class:"col-4 col-form-label text-right"},"Klasse"),Object(c.h)("div",{class:"col-8"},Object(c.h)("select",{class:"form-control",id:"class","aria-describedby":"classHelp","data-classid":s.id,"data-contestantid":a.id,onInput:e.adminSignupEdit,value:a.class},Object(c.h)("option",{value:""},"-- Choose race class --"),K.classes&&K.classes.sort((function(t,e){return t.distance-e.distance})).map((function(e){return Object(c.h)(t,null,Object(c.h)("option",{value:e.id},e.title," - ",e.distance," km - Påmelding: ",e.signupfee||K.signupfee," NOK"))}))))),Object(c.h)("div",{class:"form-group row my-0"},Object(c.h)("label",{for:"price1",class:"col-4 col-form-label text-right"},"Price 1"),Object(c.h)("div",{class:"col-8"},Object(c.h)("input",{type:"text",class:"form-control",id:"price1","data-classid":s.id,"data-contestantid":a.id,onInput:e.adminSignupEdit,value:a.price1}))),Object(c.h)("div",{class:"form-group row my-0"},Object(c.h)("label",{for:"price2",class:"col-4 col-form-label text-right"},"Price 2"),Object(c.h)("div",{class:"col-8"},Object(c.h)("input",{type:"text",class:"form-control",id:"price2","data-classid":s.id,"data-contestantid":a.id,onInput:e.adminSignupEdit,value:a.price2}))),Object(c.h)("div",{class:"form-group row my-0"},Object(c.h)("label",{for:"price3",class:"col-4 col-form-label text-right"},"Price 3"),Object(c.h)("div",{class:"col-8"},Object(c.h)("input",{type:"text",class:"form-control",id:"price3","data-classid":s.id,"data-contestantid":a.id,onInput:e.adminSignupEdit,value:a.price3}))),Object(c.h)("div",{class:"form-group row my-0"},Object(c.h)("label",{for:"priceSent",class:"col-4 col-form-label text-right"},"Price sent"),Object(c.h)("div",{class:"col-8"},Object(c.h)("input",{type:"date",class:"form-control",id:"priceSent","data-classid":s.id,"data-contestantid":a.id,onInput:e.adminSignupEdit,value:a.priceSent?l.a.isoDate(a.priceSent,!1,!1,!0):null}))),Object(c.h)("div",{class:"form-group row my-0"},Object(c.h)("label",{for:"topImage1",class:"col-4 col-form-label text-right"},"topImage1"),Object(c.h)("div",{class:"col-8"},Object(c.h)("input",{type:"text",class:"form-control",id:"topImage1","data-classid":s.id,"data-contestantid":a.id,onInput:e.adminSignupEdit,value:a.topImage1}))),Object(c.h)("div",{class:"form-group row my-0"},Object(c.h)("label",{for:"image1",class:"col-4 col-form-label text-right"},"image1"),Object(c.h)("div",{class:"col-8"},Object(c.h)("input",{type:"text",class:"form-control",id:"image1","data-classid":s.id,"data-contestantid":a.id,onInput:e.adminSignupEdit,value:a.image1}))),Object(c.h)("div",{class:"form-group row my-5"},Object(c.h)("div",{class:"col-8"},Object(c.h)("button",{type:"button",class:"btn btn-danger float-right",id:"deleteUser",value:"1",onClick:e.adminSignupEdit,"data-classid":s.id,"data-contestantid":a.id},"Delete user from this class")))))))}))))),A&&Object(c.h)(t,null,n[s.id]?Object(c.h)(t,null,Object(c.h)("div",{class:"container"},Object(c.h)("div",{class:"row"},Object(c.h)("div",{class:"col-12"},Object(c.h)("h5",null,"Email to all mushers in ",s.title),Object(c.h)("div",{class:"overflow-auto p-5",style:"max-height: 30vh;"},Object(c.h)("small",null,s.emails&&s.emails.map((function(t){return Object(c.h)("div",{class:"border rounded-lg p-3 mb-3"},Object(c.h)("div",{class:"row bg-light"},Object(c.h)("div",{class:"col-3 text-right"},"Date:"),Object(c.h)("div",{class:"col-9"},l.a.formatDate(t.date,{locale:B,hour12:!1,hour:"2-digit",minute:"2-digit"}))),Object(c.h)("div",{class:"row bg-light"},Object(c.h)("div",{class:"col-3 text-right"},"To:"),Object(c.h)("div",{class:"col-9"},t.to.map((function(t){return Object(c.h)("span",{class:"badge badge-info px-2 py-1 mr-2"},t)})))),Object(c.h)("div",{class:"row bg-light"},Object(c.h)("div",{class:"col-3 text-right"},"Subject:"),Object(c.h)("div",{class:"col-9"},t.subject)),Object(c.h)("div",{class:"row mt-2"},Object(c.h)("div",{class:"col-3 text-right"},"Body:"),Object(c.h)("div",{class:"col-9",dangerouslySetInnerHTML:{__html:(e=t.body,"string"==typeof e?e.replace(/[\n]/g,"<br>"):e)}})));var e})))),Object(c.h)("div",{class:"form-group row"},Object(c.h)("label",{for:"subject",class:"col-2 col-form-label text-right font-weight-lighter"},"To"),Object(c.h)("div",{class:"col-10"},s.contestants&&s.contestants.map((function(e){return Object(c.h)(t,null,Object(c.h)("span",{class:"badge badge-info px-2 py-1 mr-2"},e.firstname," ",e.lastname," (",e.email,")"))})))),Object(c.h)("div",{class:"form-group row"},Object(c.h)("label",{for:"subject",class:"col-2 col-form-label text-right font-weight-lighter"},"Subject"),Object(c.h)("div",{class:"col-10"},Object(c.h)("input",{type:"text",class:"form-control",id:"subject",onInput:Object(p.a)(e,"message.subject"),value:g.subject}))),Object(c.h)("div",{class:"form-group row"},Object(c.h)("label",{for:"body",class:"col-2 col-form-label text-right font-weight-lighter"},"Message"),Object(c.h)("div",{class:"col-10"},Object(c.h)("textarea",{type:"text",class:"form-control",id:"body",rows:"10",onInput:Object(p.a)(e,"message.body"),value:g.body})),Object(c.h)("div",{class:"col-5 contain-images"},g.body&&Object(c.h)(b.a,{markdown:g.body,markdownOpts:m.a.getMarkdownOptions()}))),w&&Object(c.h)(t,null,Object(c.h)("div",{class:"alert alert-"+(w&&w.status>=300?"danger":"success"),role:"alert"},Object(c.h)("small",null,Object(c.h)("xmp",null,JSON.stringify(w,null,4))))),Object(c.h)("button",{class:"btn btn-success float-right",type:"button","data-to":s.contestants&&s.contestants.map((function(t){return t.email})),"data-raceclassid":s.id,onClick:e.sendEmail},Object(c.h)("i",{class:"fas fa-paper-plane"})," Send email to all mushers"),Object(c.h)("button",{class:"btn btn-danger float-right mr-2",type:"button",onClick:e.resetEmail},Object(c.h)("i",{class:"fas fa-times"})," Reset email")),Object(c.h)("div",{class:"col-12 text-center"},Object(c.h)("button",{class:"btn btn-sm btn-link",type:"button",onClick:e.toggleAdminSendMessage,"data-class":s.id},"Hide email form"))))):Object(c.h)(t,null,Object(c.h)("div",{class:"col-12 text-center"},Object(c.h)("button",{class:"btn btn-sm btn-link",type:"button",onClick:e.toggleAdminSendMessage,"data-class":s.id},"Send email to all in this class")),Object(c.h)("div",{class:"col-12 text-center"},Object(c.h)("button",{class:"btn btn-sm btn-link",type:"button",onClick:e.toggleAdminSendInboxMessage,"data-class":s.id},"Send inbox message to all in this class")),Object(c.h)("div",{class:"col-12 text-center"},Object(c.h)("button",{class:"btn btn-sm btn-link",type:"button",onClick:e.toggleAdminImport,"data-class":s.id},"Toggle import form"))),r[s.id]?Object(c.h)(t,null,Object(c.h)("div",{class:"container"},Object(c.h)("div",{class:"row"},Object(c.h)("div",{class:"col-12"},Object(c.h)("h5",null,"Inbox Message to all mushers in ",s.title),Object(c.h)("div",{class:"form-group row"},Object(c.h)("label",{for:"body",class:"col-2 col-form-label text-right font-weight-lighter"},"Inbox message"),Object(c.h)("div",{class:"col-10"},Object(c.h)("textarea",{type:"text",class:"form-control",id:"body",rows:"10",onInput:Object(p.a)(e,"inboxMessage.body"),value:v.body})),Object(c.h)("div",{class:"col-5 contain-images"},v.body&&Object(c.h)(b.a,{markdown:v.body,markdownOpts:m.a.getMarkdownOptions()}))),Object(c.h)("div",{class:"clearfix"},Object(c.h)("button",{class:"btn btn-success float-right",type:"button","data-raceclassid":s.id,onClick:e.sendInboxMessage},Object(c.h)("i",{class:"fas fa-paper-plane"})," Send inbox message to all mushers"),Object(c.h)("button",{class:"btn btn-danger float-right mr-2",type:"button",onClick:e.resetInboxMessage},Object(c.h)("i",{class:"fas fa-times"})," Reset inbox message")),y&&Object(c.h)(t,null,Object(c.h)("div",{class:"alert alert-"+(y&&y.status>=300?"danger":"success"),role:"alert",style:"max-height: 20vh;"},Object(c.h)("small",null,Object(c.h)("xmp",null,JSON.stringify(y,null,4)))))),Object(c.h)("div",{class:"col-12 text-center"},Object(c.h)("button",{class:"btn btn-sm btn-link",type:"button",onClick:e.toggleAdminSendInboxMessage,"data-class":s.id},"Hide inboxmessage form"))))):Object(c.h)(t,null),A&&u[s.id]&&Object(c.h)(t,null,Object(c.h)("div",{class:"form-group"},Object(c.h)("label",{for:"importUsers"},Object(c.h)(h.c,{id:"races.paste-users"},"Paste your user data here to import users"),":"),Object(c.h)("textarea",{class:"form-control",id:"importUsers",rows:"20",oninput:function(t){return e.parseInput(t.target.value,s.id)}})))))})))))},s}(c.Component))||r);e.a=O}).call(this,s("hosL").Fragment)},rWES:function(t,e,s){"use strict";(function(t){function a(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,a)}return s}function n(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}var o,i=s("hosL"),r=s("Utv1"),c=s("/eY4"),l=s("OhSV"),d=s("ZOvn"),h=(s("eQ6k"),{confirmed:{},deleted:{}}),u=Object(c.a)(o=function(e){function s(t){var s;return(s=e.call(this,t)||this).confirmRequest=function(t){var e=t.target.closest("button").dataset,a=e.team,n=e.user,o=e.follow,i=s.props.stores.teamStore;i.confirmFollowRequest({team:parseInt(a,10),user:parseInt(n,10)});var r=s.state.confirmed;r[a+"-"+n]=!0,s.setState({confirmed:r}),o&&i.followRequestUser(n)},s.deleteRequest=function(t){var e=t.target.closest("button").dataset,a=e.team,n=e.user;s.props.stores.teamStore.deleteFollowRequest({team:parseInt(a,10),user:parseInt(n,10)});var o=s.state.deleted;o[a+"-"+n]=!0,s.setState({deleted:o})},s.state=function(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?a(Object(s),!0).forEach((function(e){n(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):a(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}({},h),s}var o,c;c=e,(o=s).prototype=Object.create(c.prototype),o.prototype.constructor=o,o.__proto__=c;var u=s.prototype;return u.loadTeams=function(){return new Promise(function(t,e){return Promise.resolve(this.props.stores.teamStore.load({query:{},addData:["followRequests"]})).then((function(){try{return t()}catch(t){return e(t)}}),e)}.bind(this))},u.componentDidMount=function(){this.loadTeams()},u.render=function(){var e=this,s=this.state,a=s.deleted,n=void 0===a?{}:a,o=s.confirmed,c=void 0===o?{}:o,h=this.props.stores,u=h.teamStore,b=u.teams,p=u.followRequests,m=void 0===p?[]:p,f=h.appState.darkmode;return u.hasFollowRequests?Object(i.h)("div",{class:"row pb-1"},Object(i.h)("div",{class:"col-12 col-sm-8 col-lg-6 offset-sm-2 offset-lg-3 mb-0 position-relative rounded rounded-lg py-3 bg-"+(f?"black":"white")+" shadow-sm"},Object(i.h)("div",{class:"container-fluid"},Object(i.h)("div",{class:"row"},Object(i.h)("div",{class:"col-12"},Object(i.h)("h5",null,Object(i.h)(l.c,{id:"teams.connect.teams-follow-requests"},"Forespørsel om å følge"),":"))),Object(i.h)("div",{class:"row"},Object(i.h)("div",{class:"d-flex flex-row flex-nowrap",style:"overflow: auto;"},r.a.isArray(b)&&b.map((function(s){return Object(i.h)(t,null,s&&r.a.isArray(s.followRequests)&&s.followRequests.map((function(a){var o=a.image&&a.image.s3SmallLink?a.image:null,r=n[s.id+"-"+a.id],h=c[s.id+"-"+a.id],u=m.find((function(t){return t.user.id===a.id}));return Object(i.h)("div",{class:"mr-2 py-2 border rounded-lg",style:"width: 150px;"},Object(i.h)("div",{class:"text-center border rounded-circle imageRounded imageRoundedSmall mx-auto",style:o?'background-image: url("'+o.s3SmallLink+'");':""},!o&&Object(i.h)("div",{class:"text-muted font-weight-lighter",style:"font-size: 20px; padding-top: 5px;"},d.a.displayNameShort(a))),Object(i.h)("small",null,Object(i.h)("div",{class:"text-overflow text-center"},Object(i.h)("strong",null,d.a.displayName(a)),Object(i.h)("br",null)),Object(i.h)("div",{class:"text-overflow text-center"},Object(i.h)(l.c,{id:"teams.connect.wants-to-follow"},"wants to follow your team:")),Object(i.h)("div",{class:"text-overflow text-center"},Object(i.h)("strong",null,d.a.displayName(s)))),h||r?Object(i.h)(t,null,Object(i.h)("div",{class:"text-center"},h?Object(i.h)("div",{class:"text-success"},Object(i.h)(l.c,{id:"teams.connect.confirmed"},"Confirmed")," ",Object(i.h)("i",{class:"fas fa-check"})):Object(i.h)("div",{class:"text-danger"},Object(i.h)(l.c,{id:"teams.connect.deleted"},"Deleted")," ",Object(i.h)("i",{class:"fas fa-trash-alt"})))):Object(i.h)(t,null,Object(i.h)("div",null,Object(i.h)("button",{class:"btn btn-sm btn-block btn-success text-overflow mt-1",onClick:e.confirmRequest,"data-team":s.id,"data-user":a.id},Object(i.h)(l.c,{id:"teams.connect.confirm"},"Confirm")),u&&u.public>0&&Object(i.h)("button",{class:"btn btn-sm btn-block btn-outline-success text-overflow mt-1",onClick:e.confirmRequest,"data-team":s.id,"data-user":a.id,"data-follow":!0},Object(i.h)(l.c,{id:"teams.connect.confirm-and-follow"},"Confirm & follow back")),Object(i.h)("div",{class:"mt-3"},Object(i.h)("small",null,Object(i.h)("button",{class:"btn btn-sm btn-block btn-link text-overflow",style:"font-size: 1.0em;",onClick:e.deleteRequest,"data-team":s.id,"data-user":a.id},Object(i.h)(l.c,{id:"teams.connect.delete"},"Del")))))))})))})))),Object(i.h)("details",{class:"mt-3"},Object(i.h)("summary",null,Object(i.h)("small",null,Object(i.h)(l.c,{id:"teams.connect.how-summary"},"How does this work?"))),Object(i.h)("p",null,Object(i.h)(l.c,{id:"teams.connect.how-text"},"What can followers see when I grant them access to follow? The answer is very little. They can see main details of the workouts you share and name of the dogs. That's all. Try to follow a team and check out the workout tab.")))))):""},s}(i.Component))||o;e.a=u}).call(this,s("hosL").Fragment)},t1gC:function(t,e,s){"use strict";s.r(e),function(t){function a(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,a)}return s}function n(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?a(Object(s),!0).forEach((function(e){o(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):a(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}function o(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}var i,r=s("hosL"),c=s("Utv1"),l=s("/eY4"),d=s("OhSV"),h=s("Y3FI"),u=s("fh8t"),b=s.n(u),p=(s("go65"),s("Ysxg")),m=s("9lZG"),f=(s("aGZh"),s("om2D"),s("+JSK")),O=s("/DnB"),g=s("w5T0"),j=s("ULR1"),v=s("hwiY"),y=s("uAGO"),w=s("n7ns"),x=s("Pbyq"),k=s("HGwV"),S=s("J9nn"),C=s("epqT"),I=s("ZOvn"),D=I.a.marginTop(!1),T=I.a.marginTopBack(!1),P=I.a.marginBottom(),R=(I.a.subMenuMarginTop(),{isLoading:!1,showAdminSendMessage:{},newRaceArticle:{},newRaceUserImage:{},message:{subject:"",body:""}}),E=Object(l.a)(i=function(e){function s(t){var s;return(s=e.call(this,t)||this).likeRace=function(){return new Promise((function(t,e){var a;return a=s.props.stores.raceStore,Promise.resolve(a.likeRace({id:a.race.id})).then((function(s){try{return s,t()}catch(t){return e(t)}}),e)}))},s.toggleAddComment=function(t){var e=t.target.parentElement.dataset.id||t.target.dataset.id;s.setState({showAddComment:!s.state.showAddComment},(function(){s.inputRef[e]&&s.inputRef[e].focus()}))},s.chooseSubmenu=function(t){var e=t.target.parentElement.dataset.menu||t.target.dataset.menu;s.setState({submenu:e});var a=s.props.raceid;Object(h.route)("/app-races/"+a+"/"+e)},s.resizeTextarea=function(t){var e=t;e.target&&(e=t.target),e.style.height=e.scrollHeight+"px"},s.resizeAllTextareas=function(){for(var t=document.getElementsByTagName("textarea"),e=0,a=t.length;e<a;e+=1){s.resizeTextarea(t[e])}},s.addNavigation=function(t){s.setState({submenu:t.submenu})},s.back=function(){Object(h.route)("/")},s.state=n(n({},R),{},{showAdminSendMessage:{},newRaceArticle:{},newRaceUserImage:{},message:{subject:"",body:""},submenu:t.submenu||"about"}),s.inputRef={},s.updateTimer={},s}var a,o;o=e,(a=s).prototype=Object.create(o.prototype),a.prototype.constructor=a,a.__proto__=o;var i=s.prototype;return i.loadRace=function(t){return new Promise(function(e,s){var a,o,i,r,c,l,d,h,u,b,p,m,f;return void 0===t&&(t=this.props),this.setState({isLoading:!0}),o=(a=t.stores).raceStore,c=void 0===(r=(i=a.userStore).user)?{}:r,l=t.raceid,Promise.resolve(o.load(l)).then(function(){try{if(this.setState({isLoading:!1}),d={},(h=o.race).classes&&c&&c.email)for(u=0,b=h.classes.length;u<b;u+=1)(p=h.classes[u]).contestants&&(m=p.contestants.findIndex((function(t){return t.email===c.email})))>-1&&(d=n(n({},p.contestants[m]),{},{class:p.id}));if(o.updateKeyValue("signup",d),d.user)return Promise.resolve(i.getDogs({id:d.user})).then(function(){try{return t.call(this)}catch(t){return s(t)}}.bind(this),s);function t(){function t(){return o.getAllClassesSortedBy(),Promise.resolve(o.loadPublicInteractions(l)).then((function(){try{return e()}catch(t){return s(t)}}),s)}return(f=h.classes.filter((function(t){return t.contestants&&t.contestants.length>0})).map((function(t){return t.contestants.filter((function(t){return t.team>0})).map((function(t){return t.team}))})).flat()).length>0&&l?Promise.resolve(o.loadTeams(f.join(","))).then(function(){try{return t.call(this)}catch(t){return s(t)}}.bind(this),s):t.call(this)}return t.call(this)}catch(t){return s(t)}}.bind(this),s)}.bind(this))},i.componentDidMount=function(){this.loadRace(),this.resizeAllTextareas()},i.componentWillReceiveProps=function(t){t.raceid!==this.props.raceid&&this.loadRace(t),t.submenu!==this.props.submenu&&this.addNavigation(t)},i.render=function(){var e=this,s=this.state.submenu,a=this.state,n=a.showAddComment,o=this.props.stores,i=o.userStore,l=o.raceStore,h=i.user,u=void 0===h?{}:h,R=i.isAdmin,E=i.isVeterinary,F=u.language,M=void 0===F?"en":F,A=this.props,L=A.raceid,N=l.race,B=l.signup,z=N.likes,H=void 0===z?[]:z,U=N.comments,_=void 0===U?[]:U,V=N.likes&&N.likes.findIndex((function(t){return t.user===u.id}))>-1,q=new Date,K="";q>=new Date(N.startDate)&&q<=new Date(N.endDate)?K="race":q>=new Date(N.signupStartDate)&&q<=new Date(N.signupEndDate)&&(K="signup");var W=1===N.liveRace,Y=!W||!!B.email;if("tracking"===s)return Object(r.h)(k.a,{stores:this.props.stores,raceid:L});if("results"===s)return Object(r.h)(g.a,{stores:this.props.stores,raceid:L});var G=!0;N.countryRegexp&&(u&&u.currentLocationGeocode&&new RegExp(N.countryRegexp,"i").test(u.currentLocationGeocode.formattedCountry)&&(G=!1));return Object(r.h)("div",{class:"container-fluid",style:"margin-bottom: "+P+"; margin-top: "+D+";"},Object(r.h)("button",{class:"btn btn-link pl-0 fixed-top text-primary",style:"top: "+T+"; left: 5px; font-size: 35px; width: 45px;",onClick:this.back},Object(r.h)("i",{class:"fas fa-arrow-circle-left"})),Object(r.h)("div",{class:"row m-0"},Object(r.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-1 mb-2 p-0"},Object(r.h)("div",{class:"row d-flex align-items-center position-relative"},Object(r.h)("h3",{class:"position-absolute",style:"top: 3px; right: 5px;"},"signup"===K&&!W&&Object(r.h)(t,null,Object(r.h)("span",{class:"badge badge-primary badge-lg border border-white ml-2","data-menu":"signup",onClick:this.chooseSubmenu},Object(r.h)(d.c,{id:"races.signup-open"},"Påmelding åpen"))),"race"===K&&Object(r.h)(t,null,Object(r.h)("span",{class:"badge badge-danger border border-white ml-2"},Object(r.h)(d.c,{id:"races.race-in-progress"},"Løp pågår"))),"done"===K&&Object(r.h)(t,null,Object(r.h)("span",{class:"badge badge-success border border-white ml-2"},Object(r.h)(d.c,{id:"races.race-finished"},"Løp avsluttet")))),N.images&&N.images[0]?Object(r.h)("img",{src:N.images[0].s3LargeLink,class:"img-fluid"}):""))),Object(r.h)("div",{class:"row"},Object(r.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3"},R&&Object(r.h)(t,null,Object(r.h)("a",{class:"btn btn-primary float-right",href:"https://homerunrace.no/index#/race/"+N.id+"/edit"},"Edit")),Object(r.h)("h3",null,N.title),Object(r.h)("div",null,N.startDate&&Object(r.h)(t,null,Object(r.h)(d.c,{id:"races.periode"},"Periode"),": ",c.a.formatDate(N.startDate,{locale:"no-NB",hour12:!1,hour:"2-digit",minute:"2-digit"})),N.endDate&&Object(r.h)(t,null," - ",c.a.formatDate(N.endDate,{locale:"no-NB",hour12:!1,hour:"2-digit",minute:"2-digit"}))))),Object(r.h)("div",{class:"row"},Object(r.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3"},Object(r.h)("div",{class:"row"},Object(r.h)("div",{class:"w-100 overflow-hidden"},Object(r.h)("div",{class:"d-flex flex-row flex-nowrap pb-2 px-1",style:"overflow: auto; scroll-snap-type: x mandatory;"},Object(r.h)("div",{class:"col px-0 pt-2"},Object(r.h)("button",{class:"btn btn-block rounded-pill-left rounded-none "+("about"===s?"btn-primary":"btn-outline-primary")+" text-nowrap",style:"text-overflow: ellipsis; overflow: hidden;","data-menu":"about",onClick:this.chooseSubmenu},Object(r.h)("i",{class:"fas fa-info-circle"})," ",Object(r.h)(d.c,{id:"race.about"},"About")),"about"===s&&Object(r.h)(O.a,{horizontal:"center",vertical:"end"})),Y&&Object(r.h)("div",{class:"col px-0 pt-2"},Object(r.h)("button",{class:"btn btn-block rounded-none "+("signup"===s?"btn-primary":"btn-outline-primary")+" text-nowrap",style:"text-overflow: ellipsis; overflow: hidden;","data-menu":"signup",onClick:this.chooseSubmenu},Object(r.h)("i",{class:"fas fa-user-edit"})," ",Object(r.h)(d.c,{id:"race.signup"},"Sign up")),"signup"===s&&Object(r.h)(O.a,{horizontal:"center",vertical:"end"})),!N.resultsHide&&Object(r.h)("div",{class:"col px-0 pt-2"},Object(r.h)("button",{class:"btn btn-block rounded-none "+("results"===s?"btn-primary":"btn-outline-primary")+" text-nowrap",style:"text-overflow: ellipsis; overflow: hidden;","data-menu":"results",onClick:this.chooseSubmenu},Object(r.h)("i",{class:"fas fa-list-ol"})," ",Object(r.h)(d.c,{id:"race.results"},"Results")),"results"===s&&Object(r.h)(O.a,{horizontal:"center",vertical:"end"})),G&&Object(r.h)("div",{class:"col px-0 pt-2"},Object(r.h)("button",{class:"btn btn-block rounded-none "+("tracking"===s?"btn-primary":"btn-outline-primary")+" text-nowrap",style:"text-overflow: ellipsis; overflow: hidden;","data-menu":"tracking",onClick:this.chooseSubmenu},Object(r.h)("i",{class:"fas fa-map-marker-alt"})," ",Object(r.h)(d.c,{id:"race.tracking"},"Tracking")),"tracking"===s&&Object(r.h)(O.a,{horizontal:"center",vertical:"end"})),(R||E)&&Object(r.h)("div",{class:"col px-0 pt-2"},Object(r.h)("button",{class:"btn btn-block rounded-none "+("mushers"===s?"btn-primary":"btn-outline-primary")+" text-nowrap",style:"text-overflow: ellipsis; overflow: hidden;","data-menu":"mushers",onClick:this.chooseSubmenu},Object(r.h)("i",{class:"fas fa-users"})," ",Object(r.h)(d.c,{id:"races.mushers"},"Mushers")),"mushers"===s&&Object(r.h)(O.a,{horizontal:"center",vertical:"end"})),N.rules&&Object(r.h)("div",{class:"col px-0 pt-2"},Object(r.h)("button",{class:"btn btn-block rounded-none "+("rules"===s?"btn-primary":"btn-outline-primary")+" text-nowrap",style:"text-overflow: ellipsis; overflow: hidden;","data-menu":"rules",onClick:this.chooseSubmenu},Object(r.h)("i",{class:"fas fa-gavel"})," ",Object(r.h)(d.c,{id:"race.rules"},"Rules")),"rules"===s&&Object(r.h)(O.a,{horizontal:"center",vertical:"end"})),N.veterinaryInfo&&Object(r.h)("div",{class:"col px-0 pt-2"},Object(r.h)("button",{class:"btn btn-block rounded-none "+("veterinary"===s?"btn-primary":"btn-outline-primary")+" text-nowrap",style:"text-overflow: ellipsis; overflow: hidden;","data-menu":"veterinary",onClick:this.chooseSubmenu},Object(r.h)("i",{class:"fas fa-stethoscope"})," ",Object(r.h)(d.c,{id:"race.veterinary"},"Veterinary info")),"veterinary"===s&&Object(r.h)(O.a,{horizontal:"center",vertical:"end"})),N.checkpoints&&Object(r.h)("div",{class:"col px-0 pt-2"},Object(r.h)("button",{class:"btn btn-block rounded-none "+("checkpoints"===s?"btn-primary":"btn-outline-primary")+" text-nowrap",style:"text-overflow: ellipsis; overflow: hidden;","data-menu":"checkpoints",onClick:this.chooseSubmenu},Object(r.h)("i",{class:"fas fa-map-marker-alt"})," ",Object(r.h)(d.c,{id:"race.checkpoints"},"Checkpoints")),"checkpoints"===s&&Object(r.h)(O.a,{horizontal:"center",vertical:"end"})),N.trailDescription&&Object(r.h)("div",{class:"col px-0 pt-2"},Object(r.h)("button",{class:"btn btn-block rounded-none "+("track"===s?"btn-primary":"btn-outline-primary")+" text-nowrap",style:"text-overflow: ellipsis; overflow: hidden;","data-menu":"track",onClick:this.chooseSubmenu},Object(r.h)("i",{class:"fas fa-map-signs"})," ",Object(r.h)(d.c,{id:"race.track-description"},"Track description")),"track"===s&&Object(r.h)(O.a,{horizontal:"center",vertical:"end"})),N.program&&Object(r.h)("div",{class:"col px-0 pt-2"},Object(r.h)("button",{class:"btn btn-block rounded-none "+("program"===s?"btn-primary":"btn-outline-primary")+" text-nowrap",style:"text-overflow: ellipsis; overflow: hidden;","data-menu":"program",onClick:this.chooseSubmenu},Object(r.h)("i",{class:"fas fa-list-alt"})," ",Object(r.h)(d.c,{id:"race.program"},"Program")),"program"===s&&Object(r.h)(O.a,{horizontal:"center",vertical:"end"})),N.prices&&Object(r.h)("div",{class:"col px-0 pt-2"},Object(r.h)("button",{class:"btn btn-block rounded-none "+("prices"===s?"btn-primary":"btn-outline-primary")+" text-nowrap",style:"text-overflow: ellipsis; overflow: hidden;","data-menu":"prices",onClick:this.chooseSubmenu},Object(r.h)("i",{class:"fas fa-award"})," ",Object(r.h)(d.c,{id:"race.prices"},"Premier")),"prices"===s&&Object(r.h)(O.a,{horizontal:"center",vertical:"end"})),!W&&Object(r.h)("div",{class:"col px-0 pt-2"},Object(r.h)("button",{class:"btn btn-block rounded-none "+("classes"===s?"btn-primary":"btn-outline-primary")+" text-nowrap",style:"text-overflow: ellipsis; overflow: hidden;","data-menu":"classes",onClick:this.chooseSubmenu},Object(r.h)("i",{class:"fas fa-folder-open"})," ",Object(r.h)(d.c,{id:"race.classes"},"Classes")),"classes"===s&&Object(r.h)(O.a,{horizontal:"center",vertical:"end"})),Object(r.h)("div",{class:"col px-0 pt-2"},Object(r.h)("button",{class:"btn btn-block rounded-none "+("news"===s?"btn-primary":"btn-outline-primary")+" text-nowrap",style:"text-overflow: ellipsis; overflow: hidden;","data-menu":"news",onClick:this.chooseSubmenu},Object(r.h)("i",{class:"fas fa-rss"})," ",Object(r.h)(d.c,{id:"race.news"},"News")),"news"===s&&Object(r.h)(O.a,{horizontal:"center",vertical:"end"})),Object(r.h)("div",{class:"col px-0 pt-2"},Object(r.h)("button",{class:"btn btn-block rounded-pill-right rounded-none "+("userImages"===s?"btn-primary":"btn-outline-primary")+" text-nowrap",style:"text-overflow: ellipsis; overflow: hidden;","data-menu":"userImages",onClick:this.chooseSubmenu},Object(r.h)("i",{class:"fas fa-images"})," ",Object(r.h)(d.c,{id:"race.user-images"},"User images")),"userImages"===s&&Object(r.h)(O.a,{horizontal:"center",vertical:"end"}))))))),Object(r.h)("div",{class:"row"},Object(r.h)("div",{class:"col-12"},Object(r.h)(C.a,{stores:this.props.stores,url:this.props.url,section:s}))),"about"===s&&Object(r.h)(t,null,Object(r.h)(S.a,{stores:this.props.stores,race:N}),Object(r.h)("div",{class:"row"},Object(r.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-0 mb-2"},Object(r.h)("h2",{class:"mb-0"},Object(r.h)(d.c,{id:"race.about"},"Om løpet"))),Object(r.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-3 mb-2"},Object(r.h)("p",{class:"clearfix"},Object(r.h)("strong",null,Object(r.h)(b.a,{markdown:I.a.replaceImages(N.ingress,N.images,M),markdownOpts:I.a.getMarkdownOptions()}))),"signup"===K&&Object(r.h)(t,null,W?Object(r.h)(t,null,Object(r.h)("button",{class:"btn btn-block btn-success mb-3","data-menu":"signup",onClick:this.chooseSubmenu},Object(r.h)("i",{class:"fas fa-user-edit"})," ",N.declaration&&Object(r.h)(t,null,Object(r.h)(d.c,{id:"race.declaration"},"Declaration")," &")," ",Object(r.h)(d.c,{id:"race.chiplist"},"Chiplist"))):Object(r.h)(t,null,Object(r.h)("button",{class:"btn btn-block btn-success mb-3","data-menu":"signup",onClick:this.chooseSubmenu},Object(r.h)("i",{class:"fas fa-user-edit"})," ",Object(r.h)(d.c,{id:"race.signup"},"Sign up")))),Object(r.h)(b.a,{markdown:I.a.replaceImages(N.body,N.images,M),markdownOpts:I.a.getMarkdownOptions()})),Object(r.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-3 mb-2"},N.tag&&N.tag.split(",").map((function(e){return Object(r.h)(t,null,Object(r.h)("span",{class:"badge badge-pill badge-primary py-1 ml-2"},Object(r.h)("a",{class:"text-white",href:"https://www.facebook.com/hashtag/"+e,target:"_blank",rel:"noreferrer",native:!0},Object(r.h)("i",{class:"fab fa-facebook"})," #",e)),Object(r.h)("span",{class:"badge badge-pill badge-primary py-1 ml-2"},Object(r.h)("a",{class:"text-white",href:"https://www.instagram.com/explore/tags/"+e,target:"_blank",rel:"noreferrer",native:!0},Object(r.h)("i",{class:"fab fa-instagram"})," #",e)))}))))),"results"===s&&Object(r.h)(t,null,Object(r.h)(S.a,{stores:this.props.stores,race:N}),Object(r.h)(g.a,{stores:this.props.stores,raceid:L})),"tracking"===s&&Object(r.h)(t,null,Object(r.h)(k.a,{stores:this.props.stores,raceid:L})),"news"===s&&Object(r.h)(t,null,Object(r.h)(j.a,{stores:this.props.stores,race:N})),"userImages"===s&&Object(r.h)(t,null,Object(r.h)(x.a,{stores:this.props.stores,race:N})),"rules"===s&&Object(r.h)(t,null,Object(r.h)("div",{class:"row"},Object(r.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-0 mb-2"},Object(r.h)("h2",{class:"mb-0"},Object(r.h)(d.c,{id:"race.rules"},"Regler"))),Object(r.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-3 mb-2"},Object(r.h)(b.a,{markdown:I.a.replaceImages(N.rules,N.images,M),markdownOpts:I.a.getMarkdownOptions()})))),"veterinary"===s&&Object(r.h)(t,null,Object(r.h)("div",{class:"row"},Object(r.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-0 mb-2"},Object(r.h)("h2",{class:"mb-0"},Object(r.h)(d.c,{id:"race.veterinary"},"Veterinærinfo"))),Object(r.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-3 mb-2"},Object(r.h)(b.a,{markdown:I.a.replaceImages(N.veterinaryInfo,N.images,M),markdownOpts:I.a.getMarkdownOptions()})))),"checkpoints"===s&&Object(r.h)(t,null,Object(r.h)("div",{class:"row"},Object(r.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-0 mb-2"},Object(r.h)("h2",{class:"mb-0"},Object(r.h)(d.c,{id:"race.checkpoints"},"Sjekkpunkter"))),Object(r.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-3 mb-2"},Object(r.h)(b.a,{markdown:I.a.replaceImages(N.checkpoints,N.images,M),markdownOpts:I.a.getMarkdownOptions()})))),"track"===s&&Object(r.h)(t,null,Object(r.h)("div",{class:"row"},Object(r.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-0 mb-2"},Object(r.h)("h2",{class:"mb-0"},Object(r.h)(d.c,{id:"race.track-description"},"Løypebeskrivelse"))),Object(r.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-3 mb-2"},Object(r.h)(b.a,{markdown:I.a.replaceImages(N.trailDescription,N.images,M),markdownOpts:I.a.getMarkdownOptions()})))),"program"===s&&Object(r.h)(t,null,Object(r.h)("div",{class:"row"},Object(r.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-0 mb-2"},Object(r.h)("h2",{class:"mb-0"},Object(r.h)(d.c,{id:"race.program"},"Program"))),Object(r.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-3 mb-2"},Object(r.h)(b.a,{markdown:I.a.replaceImages(N.program,N.images,M),markdownOpts:I.a.getMarkdownOptions()})))),"prices"===s&&Object(r.h)(t,null,Object(r.h)("div",{class:"row"},Object(r.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-0 mb-2"},Object(r.h)("h2",{class:"mb-0"},Object(r.h)(d.c,{id:"race.prices"},"Premier"))),Object(r.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-3 mb-2"},Object(r.h)(b.a,{markdown:I.a.replaceImages(N.prices,N.images,M),markdownOpts:I.a.getMarkdownOptions()})))),"mushers"===s&&Object(r.h)(t,null,Object(r.h)(w.a,{stores:this.props.stores,race:N})),"classes"===s&&Object(r.h)(t,null,Object(r.h)(y.a,{stores:this.props.stores,race:N})),"signup"===s&&Object(r.h)(t,null,Object(r.h)(v.a,{stores:this.props.stores,race:N})),["about"].indexOf(s)>-1&&Object(r.h)(t,null,Object(r.h)("div",{class:"row"},Object(r.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-0 mb-2"},Object(r.h)("div",{class:""},Object(r.h)(f.a,{stores:this.props.stores,likes:H,comments:_,type:"race"}))),Object(r.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-2 mb-3"},Object(r.h)("div",{class:"row"},Object(r.h)("div",{class:"col-6 text-center"},Object(r.h)("button",{type:"button",class:"btn btn-outline-"+(V?"primary":"secondary")+" btn-lg btn-block "+(V?"text-primary":""),onClick:this.likeRace},Object(r.h)("i",{class:(V?"text-primary fas":"far")+" fa-thumbs-up"})," ",V?Object(r.h)(d.c,{id:"comments.has-liked"},"Liked"):Object(r.h)(d.c,{id:"comments.like"},"Lik"))),Object(r.h)("div",{class:"col-6 text-center"},Object(r.h)("button",{type:"button",class:"btn btn-outline-secondary btn-lg btn-block","data-id":N.id,onClick:this.toggleAddComment},Object(r.h)("i",{class:"fas fa-comment"})," ",Object(r.h)(d.c,{id:"comments.comment-add"},"Comment"))))),Object(r.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-2 mb-3"},n&&u.email&&Object(r.h)(m.a,{stores:this.props.stores,race:N,inputRef:function(t){return e.inputRef[N.id]=t},inputRefObject:this.inputRef})),Object(r.h)("div",{class:"col-12 mt-2"},Object(r.h)(p.a,{stores:this.props.stores,race:N,cols:"12"})))))},s}(r.Component))||i;e.default=E}.call(this,s("hosL").Fragment)},uAGO:function(t,e,s){"use strict";(function(t){var a,n=s("hosL"),o=s("Utv1"),i=s("/eY4"),r=s("OhSV"),c=(s("Y3FI"),s("fh8t")),l=s.n(c),d=(s("go65"),s("ZOvn")),h=Object(i.a)(a=function(e){function s(t){var s;return(s=e.call(this,t)||this).state={},s.inputRef={},s.updateTimer={},s}var a,i;return i=e,(a=s).prototype=Object.create(i.prototype),a.prototype.constructor=a,a.__proto__=i,s.prototype.render=function(){var e=this.props.stores,s=e.userStore,a=s.user,i=s.isAdmin,c=(void 0===a?{}:a).language,h=void 0===c?"en":c,u=this.props.race,b=void 0===u?{}:u;return Object(n.h)(t,null,Object(n.h)("div",{class:"row"},Object(n.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-0 mb-2"},Object(n.h)("h2",{class:"mb-0"},Object(n.h)(r.c,{id:"race.classes"},"Klasser"))),Object(n.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-3 mb-2"},Object(n.h)("div",{class:"row"},b.classes&&b.classes.sort((function(t,e){return t.distance-e.distance})).map((function(e){return Object(n.h)(t,null,Object(n.h)("div",{class:"col-12 col-sm-6 col-lg-4 mb-4"},Object(n.h)("div",{class:"border rounded rounded-lg p-3"},Object(n.h)("h5",null,e.title),i&&Object(n.h)(t,null,Object(n.h)("a",{href:"/tv/top10/"+b.id+"/"+e.id},"TV Top 10"),Object(n.h)("br",null),Object(n.h)("a",{href:"/tv/team/"+b.id+"/1"},"TV One team"),Object(n.h)("br",null)),Object(n.h)("small",null,e.startDate&&Object(n.h)("div",null,Object(n.h)("span",{class:"font-weight-lighter"},Object(n.h)(r.c,{id:"race.startdate"},"Start"),":")," ",o.a.formatDate(e.startDate,{locale:h,hour12:!1,hour:"2-digit",minute:"2-digit"})),e.endDate&&Object(n.h)("div",null,Object(n.h)("span",{class:"font-weight-lighter"},Object(n.h)(r.c,{id:"race.enddate"},"End"),":")," ",o.a.formatDate(e.endDate,{locale:h,hour12:!1,hour:"2-digit",minute:"2-digit"}))),Object(n.h)("div",null,Object(n.h)("span",{class:"font-weight-lighter"},Object(n.h)(r.c,{id:"race.distance"},"Distanse"),":")," ",e.distance," km"),Object(n.h)("div",null,Object(n.h)("span",{class:"font-weight-lighter"},Object(n.h)(r.c,{id:"race.signup"},"Påmelding"),":")," ",e.signupfee||b.signupfee," NOK"),Object(n.h)("p",{class:"clearfix"},Object(n.h)(l.a,{markdown:d.a.replaceImages(e.ingress,b.images,h),markdownOpts:d.a.getMarkdownOptions()})),Object(n.h)("small",null,Object(n.h)(l.a,{markdown:d.a.replaceImages(e.body,b.images,h),markdownOpts:d.a.getMarkdownOptions()})),e.rules&&Object(n.h)(t,null,Object(n.h)("h5",null,Object(n.h)(r.c,{id:"race.rules"},"Regler")),Object(n.h)(l.a,{markdown:d.a.replaceImages(e.rules,b.images,h),markdownOpts:d.a.getMarkdownOptions()})))))}))))))},s}(n.Component))||a;e.a=h}).call(this,s("hosL").Fragment)},w5T0:function(t,e,s){"use strict";(function(t){function a(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,a)}return s}function n(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}function o(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}var i,r,c=s("hosL"),l=s("Utv1"),d=s("/eY4"),h=s("OhSV"),u=(s("Y3FI"),s("fh8t")),b=s.n(u),p=(s("go65"),s("/DnB"),s("cH0S")),m=(s("wanP"),s("ZQlJ"),s("fVsX")),f=s("aMCh"),O=(s("gcyc"),s("LbFk")),g=s("QuNB"),j=s("zUny"),v=s("ZOvn"),y={isLoading:!1,contentIsNotLoaded:!0,reloadInSec:null,reloadLastEpoch:null,reloadIsActive:!1},w=v.a.marginTop(!0,!1),x=Object(d.a)(i=function(e){function s(t){var s;return(s=e.call(this,t)||this).initComponent=function(){s.setState({reloadIsActive:!0},(function(){return s.tickReloadTimeer()}))},s.state=function(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?a(Object(s),!0).forEach((function(e){n(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):a(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}({},y),s.updateTimer={},s}o(s,e);var i=s.prototype;return i.tickReloadTimeer=function(){var t=this,e=this.props.reloadLastEpoch;if(this.state.reloadIsActive){var s=Math.floor((new Date).getTime()/1e3);this.setState({reloadInSec:60-(s-e)}),clearTimeout(this.updateTimer.tick),this.updateTimer.tick=setTimeout((function(){return t.tickReloadTimeer()}),1e3)}return!1},i.componentDidMount=function(){this.initComponent()},i.componentWillUnmount=function(){clearTimeout(this.updateTimer.tick)},i.render=function(){var e=Math.floor(l.a.normalizeBetween(this.state.reloadInSec,0,60,0,100));return Object(c.h)(t,null,Object(c.h)("div",{class:"progress fixed-top",style:"height: 2px; z-index: 999999;"},Object(c.h)("div",{class:"progress-bar",role:"progressbar",style:"width: "+e+"%;","aria-valuenow":e,"aria-valuemin":"0","aria-valuemax":"100"})))},s}(c.Component))||i,k=Object(d.a)(r=function(e){function s(t){var s;return(s=e.call(this,t)||this).loadLiveRaceResults=function(t,e){return new Promise((function(a,n){var o,i,r,c,l,d,h,u,b,p,m,f,O;return void 0===t&&(t=s.props),o=e.teamIds,i=e.focusOnMushers,r=e.bibs,l=e.historySteps,u=(d=t.stores).userStore,b=(h=d.raceStore).race,(p=s.state).historyPointIndex,m=p.replayHistory,p.timerRunning,f=s.props.showDrawerReplay,O=h.getClassById(c=e.classid)||{},Promise.resolve(h.getRaceTrackerData(b.raceTrackerRace,{historySteps:l,history:m||f,bibs:r,classid:c,startDate:O.startDate,endDate:O.endDate,isAdmin:u.isAdmin})).then((function(){try{return h.getRaceTrackerActiveTeams(o,i,r,!0),a()}catch(t){return n(t)}}),n)}))},s.loadRaceResults=function(t,e,a){return new Promise((function(n,o){var i,r;return void 0===t&&(t=s.props),i=t.stores.raceStore,r=s.state.timerRunning,Promise.resolve(i.loadWorkoutSummary(e,t.raceid)).then((function(){try{return i.getWorkoutSummaryActiveTeams(e,a),r&&(clearTimeout(s.updateTimer.reload),s.updateTimer.reload=setTimeout((function(){var t=Math.floor((new Date).getTime()/1e3);s.setState({reloadLastEpoch:t}),s.loadRaceResults(s.props,e,a)}),6e4)),n()}catch(t){return o(t)}}),o)}))},s.toggleDisplayDetails=function(t){var e=t.target.closest("tr").dataset.email;s.props.stores.appState.toggleDisplayDetails(e)},s.adminToggleEditUser=function(t){t.stopPropagation();var e=t.target.closest("tr").dataset.email;s.props.stores.appState.toggleEditUserDetails(e)},s.adminSignupEdit=function(t){var e,a=s.props.raceid,n=s.props.stores.raceStore,o=t.target.id,i=t.target.value,r=t.target.dataset,c=((e={raceClassId:r.classid,contestantId:r.contestantid})["raceClassContestant"+l.a.ucfirst(o)]=i,e);clearTimeout(s.updateTimer[o]),s.updateTimer[o]=setTimeout((function(){return new Promise((function(t){return n.editClass({id:a,data:c}),t()}))}),500)},s.lockAllWorkoutsInRace=function(){return new Promise((function(t,e){return Promise.resolve(s.props.stores.raceStore.lockAllWorkoutsInRace({id:s.props.raceid})).then((function(a){try{return s.setState({lockMessage:a}),t()}catch(t){return e(t)}}),e)}))},s.filterByClass=function(t){return new Promise((function(e,a){var n,o,i,r,c,l,d,h,u,b,p,m=function(){try{return e()}catch(t){return a(t)}},f=function(t){try{return console.log(t),m()}catch(t){return a(t)}};try{if(n=t.target.closest("button").dataset.id,i=(o=s.props).historySteps,r=o.filterByBibs,(s.state.replayHistory||o.showDrawerReplay)&&s.toggleReplayHistory(),l=(c=s.props.stores).appState,(d=c.raceStore).cleanupMemoryClass(),l.toggleSelectedClassId(n,!0),u=l.focusOnMushers,b=(h=d.race).classes.filter((function(t){return t.id===n})).filter((function(t){return t.contestants&&t.contestants.length>0})).map((function(t){return t.contestants.filter((function(t){return t.team>0})).map((function(t){return t.team}))})).flat(),p=r||h.classes.filter((function(t){return t.id===n})).filter((function(t){return t.contestants&&t.contestants.length>0})).map((function(t){return t.contestants.filter((function(t){return t.bib>0})).map((function(t){return t.bib}))})).flat(),s.setState({allTeamIds:b,bibs:p,selectedMusherBib:"",showDrawerCheckpoint:!1,showDrawerMusher:!1,showDrawer:!1}),b.length>0)return Promise.resolve(d.loadTeams(b.join(","),!1,!0,!0)).then(function(){try{return O.call(this)}catch(t){return f(t)}}.bind(this),f);function O(){function t(){return m()}return h.liveRace>0?Promise.resolve(s.loadLiveRaceResults(s.props,{teamIds:b,focusOnMushers:u,bibs:p,classid:n,historySteps:i})).then(function(){try{return t.call(this)}catch(t){return f(t)}}.bind(this),f):Promise.resolve(s.loadRaceResults(s.props,b,u)).then(function(){try{return t.call(this)}catch(t){return f(t)}}.bind(this),f)}return O.call(this)}catch(t){f(t)}}))},s.toggleDrawer=function(){s.setState({showDrawer:!s.state.showDrawer,showDrawerCheckpoint:!1,showDrawerMusher:!1})},s.toggleDrawerMusher=function(t){var e=t.target.closest(".musher").dataset.bib;s.selectMusher(e)},s.selectMusher=function(t){s.setState({selectedMusherBib:t,showDrawerMusher:!0,showDrawerCheckpoint:!1,showDrawer:!1})},s.closeDrawerMusher=function(){s.setState({selectedMusherBib:"",showDrawerMusher:!1})},s.toggleDrawerCheckpoint=function(t){var e=t.target.closest(".checkpoint").dataset.id;s.selectCheckpoint(e)},s.selectCheckpoint=function(t){s.setState({selectedCheckpointId:t,showDrawerCheckpoint:!0,showDrawerMusher:!1,showDrawer:!1})},s.closeDrawerCheckpoint=function(){s.setState({selectedCheckpointId:"",showDrawerCheckpoint:!1})},s.state={showDrawer:!1,timerRunning:!0},s.inputRef={},s.updateTimer={},s}o(s,e);var a=s.prototype;return a.loadRace=function(t){return new Promise(function(e,s){var a,n,o,i,r,c,l,d,h,u,b,p,m,f,O,g,j,v;return a=this,void 0===t&&(t=this.props),o=void 0===(n=this.state.loadTimes)?0:n,this.setState({isLoading:!0}),r=(i=t.stores).raceStore,c=i.appState,d=(l=t).classid,h=l.filterByBibs,u=l.historySteps,Promise.resolve(r.load(l.raceid)).then(function(){try{if(r.getAllClassesSortedBy(),p=c.focusOnMushers,f=void 0===(m=c.selectedClassIds)?[]:m,-1===(O=null==(b=r.race)?void 0:b.classes.map((function(t){return t.id}))).indexOf(g=f[0])&&c.setSelectedClassId(g=O[0]),d&&c.toggleSelectedClassId(d,!0),j=b.classes.filter((function(t){return t.id===g})).filter((function(t){return t.contestants&&t.contestants.length>0})).map((function(t){return t.contestants.filter((function(t){return t.team>0})).map((function(t){return t.team}))})).flat(),v=h||b.classes.filter((function(t){return t.id===g})).filter((function(t){return t.contestants&&t.contestants.length>0})).map((function(t){return t.contestants.filter((function(t){return t.bib>0})).map((function(t){return t.bib}))})).flat(),j.length>0)return Promise.resolve(r.loadTeams(j.join(","),!1,!0,!0)).then(function(){try{return t.call(this)}catch(t){return s(t)}}.bind(this),s);function t(){function t(){return this.setState({isLoading:!1,contentIsNotLoaded:!1,loadTimes:o+1}),e()}return b.liveRace>0?Promise.resolve(this.loadLiveRaceResults(this.props,{teamIds:j,focusOnMushers:p,bibs:v,classid:g,historySteps:u})).then(function(){try{return clearTimeout(this.updateTimer.reload),this.updateTimer.reload=setTimeout((function(){return new Promise((function(t){var e=Math.floor((new Date).getTime()/1e3);return a.setState({reloadLastEpoch:e}),a.loadRace(),t()}))}),6e4),t.call(this)}catch(t){return s(t)}}.bind(this),s):Promise.resolve(this.loadRaceResults(this.props,j,p)).then(function(){try{return t.call(this)}catch(t){return s(t)}}.bind(this),s)}return t.call(this)}catch(t){return s(t)}}.bind(this),s)}.bind(this))},a.componentWillUnmount=function(){clearTimeout(this.updateTimer.reload),clearTimeout(this.updateTimer.tick)},a.componentDidMount=function(){this.loadRace()},a.render=function(){var e=this,s=this.state,a=s.contentIsNotLoaded,n=s.lockMessage,o=s.showDrawer,i=s.reloadLastEpoch,r=s.selectedMusherBib,d=s.selectedCheckpointId,u=s.showDrawerCheckpoint,y=s.showDrawerMusher,k=this.props.stores,S=k.userStore,C=k.raceStore,I=k.appState,D=S.user,T=void 0===D?{}:D,P=S.isAdmin,R=S.currentEmail,E=T.language,F=void 0===E?"en":E,M=I.displayDetails,A=I.editUserDetails,L=I.selectedClassIds,N=void 0===L?[]:L,B=C.race,z=void 0===B?{}:B,H=C.classes,U=void 0===H?[]:H,_=new Date(z.endDate);_.setHours(_.getHours()+2);var V=1===z.liveRace,q=z&&z.raceAdmins?z.raceAdmins.split(","):[],K=P||q.indexOf(R)>-1;return Object(c.h)(t,null,Object(c.h)(m.a,{height:w},Object(c.h)("div",{class:"d-flex justify-content-between align-items-center w-100"},Object(c.h)("div",{class:"d-flex align-items-center"},Object(c.h)("span",{class:"",style:"font-size: 2.3em;"},Object(c.h)("a",{href:"/app-races/"+z.id},Object(c.h)("i",{class:"fas fa-angle-left"}))),Object(c.h)("span",{class:"ml-4 text-primary",style:"font-size: 1.4em;"},Object(c.h)("a",{href:"/app-races/"+z.id+"/tracking"},Object(c.h)("i",{class:"fas fa-map-marked"})))),Object(c.h)("div",null,Object(c.h)("a",{href:"/app-races/"+z.id},Object(c.h)("span",{class:"font-weight-normal text-white",style:"font-size: 1.2em;"},z.title))),Object(c.h)("div",{class:"d-flex align-items-center"},K&&Object(c.h)(t,null,Object(c.h)("button",{class:"btn btn-lg btn-block btn-success my-3",onClick:this.toggleDrawer},Object(c.h)("i",{class:"fas fa-clock"}))))),Object(c.h)("div",{class:"w-100 overflow-hidden"},Object(c.h)("div",{class:"d-flex flex-row flex-nowrap pb-2 px-1",style:"overflow: auto; scroll-snap-type: x mandatory;"},z.classes&&z.classes.map((function(s,a){return Object(c.h)(t,null,Object(c.h)("div",{class:"col px-0 pt-0"},Object(c.h)("button",{type:"button",class:"btn btn-block "+v.a.getPillClass(z.classes.length,a)+" rounded-none "+(N.indexOf(s.id)>-1?"btn-primary":"btn-outline-primary")+" text-nowrap",style:"text-overflow: ellipsis; overflow: hidden;",onClick:e.filterByClass,"data-id":s.id},s.title)))}))))),Object(c.h)("div",{class:"container-fluid position-relative p-0 overflow-auto bg-light",style:"margin-top: "+w+"; height: calc(100vh - "+w+"); z-index: 9999;"},Object(c.h)("div",{class:"col-12"},Object(c.h)(x,{stores:this.props.stores,reloadLastEpoch:i}),V?Object(c.h)(t,null):Object(c.h)(t,null,T.email&&Object(c.h)("div",{class:"alert alert-primary",role:"alert"},"no"===F&&Object(c.h)(t,null,"Resultatene hentes direkte fra treningsøktene i QPaws appen.",Object(c.h)("br",null),Object(c.h)("strong",null,"For at treningsøktene skal bli registrert må øktene:"),Object(c.h)("ul",null,Object(c.h)("li",null,"Ha riktig dato som er innenfor løpsperioden."),Object(c.h)("li",null,"Være markert som 'Konkurranse'."),Object(c.h)("li",null,"Være registrert på teamet som er påmeldt."))),"en"===F&&Object(c.h)(t,null,"The results are imported directly from the workouts inside QPaws app.",Object(c.h)("br",null),Object(c.h)("strong",null,"To make sure your workouts are registered check the following:"),Object(c.h)("ul",null,Object(c.h)("li",null,"Use the correct date on your workout. Has to be inside the race period."),Object(c.h)("li",null,"Mark the workout as 'Race'."),Object(c.h)("li",null,"Workout has to be on the same team as you signed up with."))))),z.resultsUrl&&Object(c.h)("div",{class:"p-3 my-2 bg-light"},Object(c.h)("a",{href:z.resultsUrl,target:"_blank",rel:"noreferrer",native:!0},z.resultsText?z.resultsText:Object(c.h)(t,null,Object(c.h)(h.c,{id:"races.results-here"},"Se resultater her")," ")," ",Object(c.h)("i",{class:"fas fa-chevron-circle-right"}))),(a||!U||0===U.length)&&Object(c.h)("div",{class:"d-flex justify-content-center my-5 py-5"},Object(c.h)("div",{class:"spinner-border text-primary",role:"status"},Object(c.h)("span",{class:"sr-only"},"Loading...")))),Object(c.h)("div",{class:"col-12"},z.classes&&z.classes.filter((function(t){return!(N.length>0)||N.indexOf(t.id)>-1})).map((function(s){return Object(c.h)(t,null,Object(c.h)("div",{class:"mt-2 mb-5"},z.resultDanger&&Object(c.h)("div",{class:"alert alert-danger",role:"alert"},Object(c.h)("div",{class:"spinner-grow text-danger float-left",role:"status"},Object(c.h)("span",{class:"sr-only"},"Loading...")),Object(c.h)("i",{class:"fas fa-exclamation-triangle float-left mr-4",style:"font-size: 2.0em;"}),Object(c.h)(b.a,{markdown:v.a.replaceImages(z.resultDanger,z.images,F),markdownOpts:v.a.getMarkdownOptions()})),z.resultWarning&&Object(c.h)("div",{class:"alert alert-warning",role:"alert"},Object(c.h)("i",{class:"fas fa-exclamation float-left mr-4",style:"font-size: 2.0em;"}),Object(c.h)(b.a,{markdown:v.a.replaceImages(z.resultWarning,z.images,F),markdownOpts:v.a.getMarkdownOptions()})),z.resultSuccess&&Object(c.h)("div",{class:"alert alert-success",role:"alert"},Object(c.h)("i",{class:"fas fa-check float-left mr-4",style:"font-size: 2.0em;"}),Object(c.h)(b.a,{markdown:v.a.replaceImages(z.resultSuccess,z.images,F),markdownOpts:v.a.getMarkdownOptions()})),z.liveRace?Object(c.h)(t,null,!o&&Object(c.h)(t,null,Object(c.h)(f.a,{stores:e.props.stores,race:z,currentClass:s,reloadLastEpoch:i,key:"raceclass-"+s.id,onClickMusher:e.toggleDrawerMusher,onClickCheckpoint:e.toggleDrawerCheckpoint,selectedCheckpointId:d}))):Object(c.h)(t,null,Object(c.h)("span",{class:"float-right"},Object(c.h)("span",{class:"text-muted"},Object(c.h)(h.c,{id:"races.mushers"},"Mushers"),": ",s.totalMushers||0),Object(c.h)("span",{class:"text-muted ml-4"},Object(c.h)(h.c,{id:"races.finished-mushers"},"Finished mushers"),": ",s.totalFinished||0," ")),Object(c.h)("div",{class:"table-responsive-md"},Object(c.h)("table",{class:"table table-sm table-striped"},Object(c.h)("thead",null,Object(c.h)("tr",null,Object(c.h)("th",{scope:"col"},"#"),Object(c.h)("th",{scope:"col",style:"min-width: 200px;"},Object(c.h)(h.c,{id:"races.name"},"Navn")),P&&Object(c.h)(t,null,Object(c.h)("th",{class:"d-none d-lg-table-cell",scope:"col"},Object(c.h)("i",{class:"fas fa-user-shield"})," Cellphone"),Object(c.h)("th",{class:"d-none d-lg-table-cell",scope:"col"},Object(c.h)("i",{class:"fas fa-user-shield"})," Email")),P&&Object(c.h)("th",{scope:"col",class:"d-none d-lg-table-cell",style:"min-width: 400px;"},Object(c.h)(h.c,{id:"races.stages"},"Etapper")),Object(c.h)("th",{scope:"col"},Object(c.h)(h.c,{id:"races.result"},"Resultat")))),Object(c.h)("tbody",null,U[s.id]&&U[s.id].contestants&&U[s.id].contestants.map((function(a,n){var o=a.musher,i=a.currentTeam,r=a.currentStages,d=a.currentResults,h=a.completed,u=a.normalizedDuration,p=a.weightedNormalizedDuration,m=a.isDone,f=a.finishedDate,O=a.totalWorkoutTimeUsedSec,g=C.getTotalsByTeamId(i.id);return Object(c.h)(t,null,Object(c.h)("tr",{onClick:e.toggleDisplayDetails,"data-email":o.email},Object(c.h)("th",{scope:"row"},n+1,P&&d&&Object(c.h)(t,null,Object(c.h)("br",null),d.isLocked?Object(c.h)("i",{class:"fas fa-lock text-danger mr-2"}):Object(c.h)("i",{class:"fas fa-lock-open text-success mr-2"}))),Object(c.h)("td",{class:M[o.email]?"font-weight-bold":"",style:M[o.email]?"":"line-height: 0.8em;"},M[o.email]?Object(c.h)(t,null,o.firstname," ",o.lastname,Object(c.h)("br",null),Object(c.h)("span",{class:"text-muted"},i.name),Object(c.h)("br",null),Object(c.h)("small",{class:"text-muted"},o.sportsClub),Object(c.h)("br",null),o.facebook&&Object(c.h)("a",{class:"mr-2",href:v.a.asFacebookLink(o.facebook),native:!0,target:"_blank",rel:"noreferrer"},Object(c.h)("i",{class:"fab fa-facebook"})),o.instagram&&Object(c.h)("a",{class:"mr-2",href:v.a.asInstagramLink(o.instagram),native:!0,target:"_blank",rel:"noreferrer"},Object(c.h)("i",{class:"fab fa-instagram"})),o.price1&&Object(c.h)("div",{class:"font-weight-lighter"},Object(c.h)("i",{class:"fas fa-trophy text-warning"})," ",o.price1,o.priceSent&&Object(c.h)(t,null,Object(c.h)("i",{class:"fas fa-check text-success"}))),o.price2&&Object(c.h)("div",{class:"font-weight-lighter"},Object(c.h)("i",{class:"fas fa-trophy text-warning"})," ",o.price2),o.price3&&Object(c.h)("div",{class:"font-weight-lighter"},Object(c.h)("i",{class:"fas fa-trophy text-warning"})," ",o.price3)):Object(c.h)(t,null,o.price1&&Object(c.h)("span",{class:"float-right text-warning",style:"font-size: 1.2em;"},Object(c.h)("i",{class:"fas fa-trophy"}),o.priceSent&&Object(c.h)(t,null,Object(c.h)("i",{class:"fas fa-check text-success"}))),Object(c.h)("nobr",null,o.firstname," ",o.lastname,Object(c.h)("br",null),Object(c.h)("small",{class:"text-muted"},o.sportsClub),Object(c.h)("br",null)))),P&&Object(c.h)(t,null,Object(c.h)("td",{class:"d-none d-lg-table-cell"},o.cellphone),Object(c.h)("td",{class:"d-none d-lg-table-cell"},o.email)),P&&Object(c.h)("td",{class:"d-none d-lg-table-cell"},P&&Object(c.h)(t,null,Object(c.h)("button",{class:"btn btn-primary btn-sm float-right",onClick:e.adminToggleEditUser},Object(c.h)("i",{class:"fas fa-user-edit"}))),P&&A[o.email]&&Object(c.h)(t,null,Object(c.h)("h5",null,"Admin edit:"),Object(c.h)("div",{class:"form-group row my-0"},Object(c.h)("label",{class:"col-sm-2 col-form-label text-right"},"Email"),Object(c.h)("div",{class:"col-sm-10"},o.email)),Object(c.h)("div",{class:"form-group row my-0"},Object(c.h)("label",{class:"col-sm-2 col-form-label text-right"},"Cellphone"),Object(c.h)("div",{class:"col-sm-10"},o.cellphone)),Object(c.h)("div",{class:"form-group row my-0"},Object(c.h)("label",{for:"team",class:"col-sm-2 col-form-label text-right"},"Race status"),Object(c.h)("div",{class:"col-sm-10"},Object(c.h)("select",{class:"form-control-plaintext",id:"raceStatus","data-classid":o.class,"data-contestantid":o.id,onInput:e.adminSignupEdit,value:o.raceStatus},Object(c.h)("option",{value:""},"-- Choose race status --"),Object(c.h)("option",{value:"OK"},"OK - Everything ok"),Object(c.h)("option",{value:"DNS"},"DNS - Did Not Start"),Object(c.h)("option",{value:"DNF"},"DNF - Did Not Finish"),Object(c.h)("option",{value:"DNQ"},"DNQ - Did not qualify"),Object(c.h)("option",{value:"DQ"},"DQ - Disqualified"),Object(c.h)("option",{value:"DC"},"DC - Data changed by user")))),Object(c.h)("div",{class:"form-group row my-0"},Object(c.h)("label",{for:"raceComment",class:"col-sm-2 col-form-label text-right"},"Race comment"),Object(c.h)("div",{class:"col-sm-10"},Object(c.h)("input",{type:"text",class:"form-control-plaintext",id:"raceComment","data-classid":o.class,"data-contestantid":o.id,onInput:e.adminSignupEdit,value:o.raceComment}))),Object(c.h)("div",{class:"form-group row my-0"},Object(c.h)("label",{for:"gpxResultsApproved",class:"col-sm-2 col-form-label text-right"},"GPX Results approved (date)"),Object(c.h)("div",{class:"col-sm-10"},Object(c.h)("input",{type:"date",class:"form-control-plaintext",id:"gpxResultsApproved","data-classid":o.class,"data-contestantid":o.id,onInput:e.adminSignupEdit,value:o.gpxResultsApproved?l.a.isoDate(o.gpxResultsApproved,!1,!1,!0):null}))),Object(c.h)("div",{class:"form-group row my-0"},Object(c.h)("label",{for:"price1",class:"col-sm-2 col-form-label text-right"},"Price 1"),Object(c.h)("div",{class:"col-sm-10"},Object(c.h)("input",{type:"text",class:"form-control-plaintext",id:"price1","data-classid":o.class,"data-contestantid":o.id,onInput:e.adminSignupEdit,value:o.price1}))),Object(c.h)("div",{class:"form-group row my-0"},Object(c.h)("label",{for:"price2",class:"col-sm-2 col-form-label text-right"},"Price 2"),Object(c.h)("div",{class:"col-sm-10"},Object(c.h)("input",{type:"text",class:"form-control-plaintext",id:"price2","data-classid":o.class,"data-contestantid":o.id,onInput:e.adminSignupEdit,value:o.price2}))),Object(c.h)("div",{class:"form-group row my-0"},Object(c.h)("label",{for:"price3",class:"col-sm-2 col-form-label text-right"},"Price 3"),Object(c.h)("div",{class:"col-sm-10"},Object(c.h)("input",{type:"text",class:"form-control-plaintext",id:"price3","data-classid":o.class,"data-contestantid":o.id,onInput:e.adminSignupEdit,value:o.price3}))),Object(c.h)("div",{class:"form-group row my-0"},Object(c.h)("label",{for:"priceSent",class:"col-sm-2 col-form-label text-right"},"Price sent"),Object(c.h)("div",{class:"col-sm-10"},Object(c.h)("input",{type:"date",class:"form-control-plaintext",id:"priceSent","data-classid":o.class,"data-contestantid":o.id,onInput:e.adminSignupEdit,value:o.priceSent?l.a.isoDate(o.priceSent,!1,!1,!0):null})))),P&&Object(c.h)("div",{class:"d-flex flex-wrap"},r&&r.map((function(e,a){var n=e.distanceKm/s.distance*100,i=(n>100||parseInt(n,10),Math.floor(new Date(e.date).getTime()/1e3)),r=new Date(0);r.setUTCSeconds(i+parseInt(e.duration,10));e.images.flat();return M[o.email]?Object(c.h)(t,null,Object(c.h)("div",{class:"bg-light border rounded-lg  text-right position-relative mr-1 mb-1",style:"width: 350px; min-width: 320px;"},Object(c.h)("svg",{viewBox:"0 0 300 100",class:"position-absolute",style:"width: 100%; height: 95%; bottom: 0px; left: 0px; z-index: 0;"},Object(c.h)("path",{d:""+e.svgElevation,style:"fill: #0063FF; stroke: #0063FF; stroke-width: 2; opacity: 0.2;"})),Object(c.h)("div",{class:"position-relative px-3"},Object(c.h)("span",{class:"position-absolute",style:"top: 3px; left: 3px; font-size: 1.3em;"},a+1),Object(c.h)("small",null,P&&Object(c.h)("span",{class:"position-absolute",style:"top: 0px; right: -5px;"},e.isLocked?Object(c.h)("i",{class:"fas fa-lock text-danger"}):Object(c.h)("i",{class:"fas fa-lock-open text-success"})),Object(c.h)("span",{class:"float-left"},Object(c.h)("nobr",null,Object(c.h)("i",{style:"width: 20px;",class:"fas fa-sign-out-alt text-muted"})," ",l.a.formatDate(e.date,{locale:F,hour12:!1,hour:"2-digit",minute:"2-digit"})),Object(c.h)("nobr",null,Object(c.h)("i",{style:"width: 20px;",class:"fas fa-sign-in-alt text-muted"})," ",l.a.formatDate(r,{locale:F,hour12:!1,hour:"2-digit",minute:"2-digit"}))),Object(c.h)("span",{class:"float-right"},Object(c.h)("nobr",null,Object(c.h)("i",{style:"width: 20px;",class:"fas fa-road text-muted"})," ",l.a.format(e.distanceKm,1)||"n/a"," ",Object(c.h)("span",{class:"font-weight-lighter"},"km")),Object(c.h)("nobr",null,Object(c.h)("i",{style:"width: 20px;",class:"fas fa-mountain text-muted"})," ",l.a.format(e.elevation,0)||"n/a"," ",Object(c.h)("span",{class:"font-weight-lighter"},"m")),Object(c.h)("nobr",null,Object(c.h)("i",{style:"width: 20px;",class:"fas fa-tachometer-alt text-muted"})," ",l.a.format(e.speedAvg,1)||"n/a"," ",Object(c.h)("span",{class:"font-weight-lighter"},"km/t")),Object(c.h)("br",null),Object(c.h)("nobr",null,Object(c.h)("i",{style:"width: 20px;",class:"fas fa-clock text-muted"})," ",l.a.secToHms(e.duration)||"n/a"),Object(c.h)("nobr",null,Object(c.h)("i",{style:"width: 20px;",class:"fas fa-moon text-muted"})," ",l.a.secToHms(e.rest)||"n/a"),Object(c.h)("nobr",null,Object(c.h)("i",{style:"width: 20px;",class:"fas fa-running text-muted"})," ",l.a.secToHms(e.duration-e.rest)||"n/a"),Object(c.h)("br",null),Object(c.h)("nobr",null,Object(c.h)("i",{style:"width: 20px;",class:"fas fa-dog text-muted"})," ",l.a.format(e.avgDogs,0)||"n/a")))))):Object(c.h)(t,null,Object(c.h)("div",{class:"bg-light border rounded-lg text-right position-relative px-3 mr-1 mb-1",style:"width: 300px; min-width: 300px;"},Object(c.h)("small",null,P&&Object(c.h)("span",{class:"position-absolute",style:"top: 2px; right: -5px;"},e.isLocked?Object(c.h)("i",{class:"fas fa-lock text-danger"}):Object(c.h)("i",{class:"fas fa-lock-open text-sucess"})),Object(c.h)("span",{class:"float-left"},a+1),Object(c.h)("nobr",null,Object(c.h)("i",{style:"width: 20px;",class:"fas fa-road text-muted"})," ",l.a.format(e.distanceKm,1)||"n/a"," ",Object(c.h)("span",{class:"font-weight-lighter"},"km")),Object(c.h)("nobr",null,Object(c.h)("i",{style:"width: 20px;",class:"fas fa-tachometer-alt text-muted"})," ",l.a.format(e.speedAvg,1)||"n/a"," ",Object(c.h)("span",{class:"font-weight-lighter"},"km/t")),Object(c.h)("nobr",null,Object(c.h)("i",{style:"width: 20px;",class:"fas fa-clock text-muted"})," ",l.a.secToHms(e.duration)||"n/a"))))})))),Object(c.h)("td",{class:"text-right position-relative pl-4"},function(e){switch(e.raceStatus){case"OK":return Object(c.h)(t,null,Object(c.h)("span",{class:"position-absolute rounded-lg",style:"top: 10px; left: 0px;"},Object(c.h)("i",{class:"fas fa-check text-success"})));case"DNS":case"DNF":case"DNQ":case"DQ":return Object(c.h)(t,null,Object(c.h)("span",{class:"position-absolute bg-danger text-white text-center px-2 rounded-lg border",style:"top: 5px; left: -100px; width: 80px"},Object(c.h)("i",{class:"fas fa-info-circle"})," ",e.raceStatus));case"DC":return Object(c.h)(t,null,Object(c.h)("span",{class:"position-absolute bg-warning text-white text-center px-2 rounded-lg border",style:"top: 5px; left: -150px; width: 80px"},Object(c.h)("i",{class:"fas fa-info-circle"})," ",e.raceStatus));default:return""}}(o),o.raceComment&&Object(c.h)(t,null,Object(c.h)("div",{class:"alert alert-warning text-left",role:"alert"},Object(c.h)("i",{class:"fas fa-exclamation-triangle float-left mr-4",style:"font-size: 2.0em;"}),Object(c.h)(b.a,{markdown:v.a.replaceImages(o.raceComment,z.images,F),markdownOpts:v.a.getMarkdownOptions()}))),P&&d.lastUpdated>_&&Object(c.h)(t,null,Object(c.h)("div",{class:"alert alert-danger text-left d-none d-md-block",role:"alert"},Object(c.h)("i",{class:"fas fa-exclamation-triangle float-left mr-4",style:"font-size: 2.0em;"}),Object(c.h)("i",{class:"fas fa-user-shield"})," Last changed: ",l.a.formatDate(d.lastUpdated,{locale:F,hour12:!1,hour:"2-digit",minute:"2-digit"}))),h>=99?Object(c.h)("span",{class:"position-absolute",style:"top: 10px; left: 0px;"},Object(c.h)("i",{class:"fas fa-flag-checkered text-success"})):"",Object(c.h)("small",null,M[o.email]?Object(c.h)(t,null,Object(c.h)("nobr",null,Object(c.h)("i",{style:"width: 20px;",class:"fas fa-road text-muted"})," ",l.a.format(d.distanceKm,1)||"n/a"," ",Object(c.h)("span",{class:"font-weight-lighter"},"km")),Object(c.h)("nobr",null,Object(c.h)("i",{style:"width: 20px;",class:"fas fa-mountain text-muted"})," ",l.a.format(d.elevation,0)||"n/a"," ",Object(c.h)("span",{class:"font-weight-lighter"},"m")),Object(c.h)("div",{class:"progress mb-1",style:"height: 3px;"},Object(c.h)("div",{class:"progress-bar "+(h>=99?"bg-success":""),role:"progressbar",style:"width: "+h+"%","aria-valuenow":""+h,"aria-valuemin":"0","aria-valuemax":"100"})),z.nonstop?Object(c.h)(t,null,Object(c.h)("nobr",null,Object(c.h)("i",{style:"width: 20px;",class:"fas fa-clock text-muted"})," ",l.a.secToHms(O)||"n/a"),Object(c.h)("nobr",null,Object(c.h)("i",{style:"width: 20px;",class:"fas fa-moon text-muted"})," ",l.a.secToHms(g.totalRest)||"n/a"),Object(c.h)("br",null),Object(c.h)("nobr",null,Object(c.h)("i",{style:"width: 20px;",class:"fas fa-calendar text-muted"})," ",l.a.isoDate(g.firstEpoch)," - ",Object(c.h)("i",{style:"width: 20px;",class:"fas fa-calendar text-muted"})," ",l.a.isoDate(f)),P&&Object(c.h)(t,null,Object(c.h)("br",null),Object(c.h)("div",{class:"text-danger"},g.firstGpxStartEpoch&&Object(c.h)(t,null,Object(c.h)("nobr",null,"firstGpxStartEpoch: ",l.a.isoDate(g.firstGpxStartEpoch)),Object(c.h)("br",null)),g.lastGpxStartEpoch&&Object(c.h)(t,null,Object(c.h)("nobr",null,"lastGpxStartEpoch: ",l.a.isoDate(g.lastGpxStartEpoch)),Object(c.h)("br",null))))):Object(c.h)(t,null,Object(c.h)("nobr",null,Object(c.h)("i",{style:"width: 20px;",class:"fas fa-clock text-muted"})," ",l.a.secToHms(d.duration)||"n/a"),Object(c.h)("nobr",null,Object(c.h)("i",{style:"width: 20px;",class:"fas fa-moon text-muted"})," ",l.a.secToHms(d.rest)||"n/a"),Object(c.h)("nobr",null,Object(c.h)("i",{style:"width: 20px;",class:"fas fa-running text-muted"})," ",l.a.secToHms(d.duration-d.rest)||"n/a"),Object(c.h)("br",null),1===m&&Object(c.h)(t,null,Object(c.h)("nobr",{class:"font-weight-bold"},Object(c.h)("span",{class:"font-weight-lighter text-muted"},"Normalized to race distance:")," ",Object(c.h)("i",{style:"width: 20px;",class:"fas fa-clock text-muted"})," ",l.a.secToHms(u)||"n/a"),Object(c.h)("br",null)),1===m&&Object(c.h)(t,null,Object(c.h)("nobr",{class:"font-weight-bold"},Object(c.h)("span",{class:"font-weight-lighter text-muted"},"Normalized:")," ",Object(c.h)("i",{style:"width: 20px;",class:"fas fa-clock text-muted"})," ",l.a.secToHms(p)||"n/a"),Object(c.h)("br",null)))):Object(c.h)(t,null,Object(c.h)("nobr",null,Object(c.h)("i",{style:"width: 20px;",class:"fas fa-road text-muted"})," ",l.a.format(d.distanceKm,1)||"n/a"," ",Object(c.h)("span",{class:"font-weight-lighter"},"km")),Object(c.h)("nobr",null,Object(c.h)("i",{style:"width: 20px;",class:"fas fa-mountain text-muted"})," ",l.a.format(d.elevation,0)||"n/a"," ",Object(c.h)("span",{class:"font-weight-lighter"},"m")),Object(c.h)("div",{class:"progress mb-1",style:"height: 3px;"},Object(c.h)("div",{class:"progress-bar "+(h>=99?"bg-success":""),role:"progressbar",style:"width: "+h+"%","aria-valuenow":""+h,"aria-valuemin":"0","aria-valuemax":"100"})),z.nonstop?Object(c.h)(t,null,Object(c.h)("nobr",null,Object(c.h)("i",{style:"width: 20px;",class:"fas fa-clock text-muted"})," ",l.a.secToHms(O)||"n/a"),Object(c.h)("nobr",null,Object(c.h)("i",{style:"width: 20px;",class:"fas fa-moon text-muted"})," ",l.a.secToHms(g.totalRest)||"n/a")):Object(c.h)(t,null,1===m?Object(c.h)(t,null,Object(c.h)("nobr",{class:"font-weight-bold"},Object(c.h)("i",{style:"width: 20px;",class:"fas fa-clock text-muted"})," ",l.a.secToHms(p)||"n/a"),Object(c.h)("br",null)):Object(c.h)(t,null,Object(c.h)("nobr",null,Object(c.h)("i",{style:"width: 20px;",class:"fas fa-clock text-muted"})," ",l.a.secToHms(d.duration)||"n/a"),Object(c.h)("br",null))))))))}))))),Object(c.h)("div",{class:"text-center text-muted"},Object(c.h)("small",null,"no"===F&&Object(c.h)(t,null,"OBS! Ref reglene så er det ikke lov til å endre treningsøktene som er med i konkurransen etter at løpet er ferdig.",Object(c.h)("br",null),"Forsøk på dette vil resultere i automatisk deplassering på listene."),"en"===F&&Object(c.h)(t,null,"IMPORTANT! According to the rules: It is NOT allowed to try alter the workouts related to the competition after the race has ended.",Object(c.h)("br",null),"Attempts will result in automatic deplacement on the resultlists."))),P&&Object(c.h)(t,null,Object(c.h)("button",{class:"btn btn-danger btn-lg float-right m-4",onClick:e.lockAllWorkoutsInRace},"Lock all workouts in this race"),Object(c.h)("xmp",{class:"m-5"},JSON.stringify(n,null,4))),Object(c.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-3 mb-2"},Object(c.h)("a",{class:"btn btn-lg btn-block btn-primary",href:"https://homerunrace.no/index#/race/"+z.id+"/results"},"All results")))))})))),o&&Object(c.h)(t,null,Object(c.h)(p.a,{stores:this.props.stores,onCloseClick:this.toggleDrawer},Object(c.h)(O.a,{stores:this.props.stores}))),u&&Object(c.h)(t,null,Object(c.h)(p.a,{stores:this.props.stores,onCloseClick:this.closeDrawerCheckpoint},Object(c.h)(j.a,{stores:this.props.stores,id:d,onClickNav:this.selectCheckpoint}))),y&&Object(c.h)(t,null,Object(c.h)(p.a,{stores:this.props.stores,onCloseClick:this.closeDrawerMusher},Object(c.h)(g.a,{stores:this.props.stores,bib:r,onClickNav:this.selectMusher}))))},s}(c.Component))||r;e.a=k}).call(this,s("hosL").Fragment)},yHBq:function(t,e,s){"use strict";(function(t){function a(){return(a=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var s=arguments[e];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(t[a]=s[a])}return t}).apply(this,arguments)}function n(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}var o,i,r=s("hosL"),c=s("/eY4"),l=s("Utv1"),d=Object(c.a)(o=function(t){function e(e){var s;return(s=t.call(this,e)||this).state={},s.containerRef=null,s}n(e,t);var s=e.prototype;return s.componentWillUnmount=function(){var t=this.props.removeIntersectionObserver;t&&t(this.containerRef)},s.componentDidMount=function(){var t=this.props.addIntersectionObserver;t&&t(this.containerRef)},s.render=function(){var t=this,e=this.props,s=e.wrapperClassNames,n=void 0===s?"":s,o=e.contentClassNames,i=void 0===o?"":o,c=e.renderContent,l=e.obj,d=void 0===l?{}:l,h=e.idx,u=e.dataFields,b=e.dataValues,p=e.sessionid,m={};return p&&(m.sessionid=p),u.forEach((function(t){return m["data-"+t]=encodeURI(b[t]||d[t])})),Object(r.h)("div",a({class:""+n,ref:function(e){return t.containerRef=e},"data-idx":h},m),Object(r.h)("div",{class:""+i,style:"display: block;"},c({obj:d,idx:h})))},e}(r.Component))||o,h=Object(c.a)(i=function(e){function s(t){var s;return(s=e.call(this,t)||this).deleteIntersectionObserver=function(){s.intersectionObserver=null},s.handleIntersection=function(t){var e=s.props.handleIntersection;"function"==typeof e&&e(t),t.forEach((function(t){var e=t.isIntersecting,s=t.target.dataset.height,a=void 0===s?0:s,n=Math.max(t.target.childNodes[0].offsetHeight,t.target.offsetHeight,t.target.scrollHeight);e?(t.target.childNodes[0].style.display="block",t.target.style.minHeight=(n>a?n:a)+"px"):t.target.style.minHeight&&(t.target.style.minHeight=(n>a?n:a)+"px",t.target.childNodes[0].style.display="none")}))},s.setupIntersectionObserver=function(){if(!("IntersectionObserver"in window)||!("IntersectionObserverEntry"in window)||!("intersectionRatio"in window.IntersectionObserverEntry.prototype))return!1;s.intersectionObserver=new IntersectionObserver(s.handleIntersection,{root:null,rootMargin:"100px",threshold:.1})},s.addIntersectionObserver=function(t){s.intersectionObserver&&t&&s.intersectionObserver.observe(t)},s.removeIntersectionObserver=function(t){s.intersectionObserver&&t&&s.intersectionObserver.unobserve(t)},s.state={},s}n(s,e);var a=s.prototype;return a.componentWillMount=function(){this.setupIntersectionObserver()},a.componentWillUnmount=function(){this.deleteIntersectionObserver()},a.render=function(){var e=this,s=this.props,a=s.data,n=void 0===a?[]:a,o=s.wrapperClassNames,i=void 0===o?"row pb-4 bg-light":o,c=s.contentClassNames,h=void 0===c?"col-12 col-sm-8 col-lg-6 offset-sm-2 offset-lg-3 mb-0 position-relative rounded rounded-lg py-3 shadow-sm":c,u=s.renderContent,b=void 0===u?function(){return Object(r.h)(t,null,"Missing render function!")}:u,p=s.dataFields,m=void 0===p?[]:p,f=s.dataValues,O=void 0===f?{}:f;return Object(r.h)("div",{class:"w-100"},n&&n.filter((function(t){return l.a.isObject(t)})).map((function(s,a){var n=s.hasOwnProperty("wrapperClassNames")?s.wrapperClassNames:i,o=s.hasOwnProperty("contentClassNames")?s.contentClassNames:h;return Object(r.h)(t,null,Object(r.h)(d,{key:"fastline-"+a+"-"+s.id,obj:s,idx:a,addIntersectionObserver:e.addIntersectionObserver,removeIntersectionObserver:e.removeIntersectionObserver,wrapperClassNames:n,contentClassNames:o,renderContent:b,dataFields:m,dataValues:O}))})))},s}(r.Component))||i;e.a=h}).call(this,s("hosL").Fragment)},zYNi:function(t,e,s){"use strict";(function(t){function a(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,a)}return s}function n(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?a(Object(s),!0).forEach((function(e){o(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):a(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}function o(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}function i(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}var r,c,l,d,h=s("hosL"),u=(s("QRet"),s("Utv1")),b=s("/eY4"),p=s("OhSV"),m=(s("Y3FI"),s("fh8t")),f=s.n(m),O=(s("go65"),s("HQo+")),g=s("wanP"),j=s("ZQlJ"),v=s("s4FZ"),y=s("q/oJ"),w=s("cH0S"),x=s("fVsX"),k=s("8n2v"),S=s("gWxU"),C=s("Nanz"),I=s("zUny"),D=(s("bbv7"),s("ukv5")),T=(s("eQ6k"),s("e0EM")),P=s("ZOvn"),R=P.a.marginTop(!0,!1),E=(P.a.marginTopBack(!1),P.a.marginBottom(),P.a.subMenuMarginTop(),{isLoading:!1,email:"",submenu:"ads",jwtToken:u.a.getJwtToken(),reloadInSec:null,reloadIsActive:!1,leaderboardMode:"mushers",filterByraceClass:"",showLeaderBoard:!0,showNews:!0}),F=Object(b.a)(r=function(e){function s(t){var s;return(s=e.call(this,t)||this).initComponent=function(){s.setState({reloadIsActive:!0},(function(){return s.tickReloadTimeer()}))},s.tickReloadTimeer=function(){var t=s.props.reloadLastEpoch;if(s.state.reloadIsActive){var e=Math.floor((new Date).getTime()/1e3);s.setState({reloadInSec:60-(e-t)}),clearTimeout(s.updateTimer.tick),s.updateTimer.tick=setTimeout((function(){return s.tickReloadTimeer()}),1e3)}return!1},s.state=n({},E),s.updateTimer={},s}i(s,e);var a=s.prototype;return a.componentDidMount=function(){this.initComponent()},a.componentWillUnmount=function(){clearTimeout(this.updateTimer.tick)},a.render=function(){var e=this.state.reloadInSec,s=this.props,a=s.radius,n=void 0===a?13:a,o=s.fontSize,i=void 0===o?11:o,r=s.classNames,c=void 0===r?"":r,l=Math.floor(u.a.normalizeBetween(e,0,60,0,100));return Object(h.h)(t,null,Object(h.h)("span",{class:c},Object(h.h)(g.a,{key:"gauge-reload-page",color:"primary",radius:n,showPercentText:!1,percent:l,showCenterText:!0,centerText:e,centerTextSize:i,centerTextY:"55%"})))},s}(h.Component))||r,M=Object(b.a)(c=function(e){function s(t){var s;return(s=e.call(this,t)||this).chooseSubmenu=function(t){var e=t.target.closest("button").dataset.submenu;s.setState({submenu:e})},s.state={},s}return i(s,e),s.prototype.render=function(){var e=this,s=this.props.stores,a=s.raceStore.waypoints,n=this.props,o=n.raceClass,i=void 0===o?{}:o,r=n.race,c=void 0===r?{}:r,l=n.onMarkerClick,d=void 0===l?function(){}:l;return Object(h.h)(t,null,Object(h.h)("div",{class:"d-flex justify-content-center align-items-center mb-2"},Object(h.h)("span",{style:"font-size: 1.3em;"},Object(h.h)(p.c,{id:"races.gps-ranking"},"GPS Ranking"),": ",c.title," - ",i.title)),Object(h.h)("div",{class:"w-100 overflow-auto",style:"max-height: 60vh;"},!a||0===a.length&&Object(h.h)(t,null,Object(h.h)("div",{class:"text-center text-muted"},Object(h.h)("div",{class:"display-1"},Object(h.h)("i",{class:"fas fa-dog"})),Object(h.h)("div",{class:"w-100"},Object(h.h)("h3",null,Object(h.h)(p.c,{id:"races.no-teams-found"},"No teams found!")),Object(h.h)(p.c,{id:"races.loading-teams"},"Loading teams...")),Object(h.h)("div",{class:"spinner-border text-primary",style:"width: 3rem; height: 3rem;",role:"status"},Object(h.h)("span",{class:"sr-only"},"Loading...")))),Object(h.h)("table",{class:"table table-sm table-striped"},a&&a.map((function(s,a){var n=u.a.format(s.restTime/s.raceTime*100,0);P.a.displayNameShort(s);return Object(h.h)(t,null,Object(h.h)("tr",{onClick:function(){return d(s)}},Object(h.h)("td",{style:"width: 15px;",class:"text-center"},s.rank),Object(h.h)("td",null,Object(h.h)("div",{class:"d-flex justify-content-between align-items-start w-100"},Object(h.h)("div",{class:"flex-grow-1"},Object(h.h)("div",{class:"float-right ml-2"},Object(h.h)("div",{class:"text-center"},Object(h.h)(g.a,{key:"gauge-reload-page",color:n<40?n<30?"danger":"warning":"success",radius:30,showPercentText:!1,percent:n,showCenterText:!0,centerText:n+"%",centerTextSize:15,centerTextY:"55%"}))),Object(h.h)("div",{class:"float-right"},s.finishTime<9999999999?Object(h.h)(t,null,Object(h.h)("i",{class:"fas fa-flag-checkered text-success"})):Object(h.h)(t,null,"rest"===s.currentState?Object(h.h)(t,null,Object(h.h)("i",{class:"fas fa-bed text-warning"})):Object(h.h)(t,null,Object(h.h)("i",{class:"fas fa-running text-primary"})))),Object(h.h)("span",{class:"text-white rounded-pill-left px-2 mr-2",style:"background-color: "+P.a.getRankingColor(s.rank||a+1)+";"},s.bib),s.flag,"  ",s.title,Object(h.h)("div",null,Object(h.h)("small",null,s.finishTime<9999999999?Object(h.h)(t,null,s.diffToFirstFinishTime>0?Object(h.h)(t,null,Object(h.h)("span",{class:"text-muted"},Object(h.h)("i",{class:"fas fa-arrow-up"}))," ",u.a.secToHms(s.diffToFirstFinishTime)):Object(h.h)(t,null,Object(h.h)("span",{class:"text-muted"},Object(h.h)("i",{class:"fas fa-flag-checkered"}))," ",u.a.formatDate(u.a.parseInputDate(s.finishTime),{locale:"no-NB",hour12:!1,hour:"2-digit",minute:"2-digit"})),Object(h.h)("nobr",null,Object(h.h)("i",{class:"fas fa-running text-muted"})," ",u.a.secToHms(s.raceTime)),Object(h.h)("nobr",null,Object(h.h)("i",{class:"fas fa-bed ml-2 text-muted"})," ",u.a.format(s.restTime/s.raceTime*100,0),"%")):Object(h.h)(t,null,Object(h.h)("nobr",null,Object(h.h)("span",{class:"text-muted"},Object(h.h)("i",{class:"fas fa-flag-checkered"}))," ",u.a.format(s.distanceToFinish,1)," km"),s.distanceToFinish!==s.distanceToFirst&&s.distanceToFirst>0&&Object(h.h)(t,null,Object(h.h)("nobr",null,Object(h.h)("span",{class:"text-muted font-weight-light ml-2"},"1st:")," ",u.a.format(s.distanceToFirst,1)," km")),s.distanceToFinish!==s.distanceToForward&&s.distanceToForward>0&&Object(h.h)(t,null,Object(h.h)("nobr",null,Object(h.h)("span",{class:"text-muted ml-2"},Object(h.h)("i",{class:"fas fa-arrow-up"}))," ",u.a.format(s.distanceToForward,1)," km")),s.distanceToBehind>0&&Object(h.h)(t,null,Object(h.h)("nobr",null,Object(h.h)("span",{class:"text-muted ml-2"},Object(h.h)("i",{class:"fas fa-arrow-down"}))," ",u.a.format(s.distanceToBehind,1)," km")),Object(h.h)("br",null),Object(h.h)("nobr",null,Object(h.h)("span",{class:"text-muted"},Object(h.h)("i",{class:"fas fa-tachometer-alt"}))," ",u.a.format((s.currentAvgSpeed?3.6*s.currentAvgSpeed:s.speed)||0,1)," km/h"),Object(h.h)("nobr",null,Object(h.h)("i",{class:"fas fa-running ml-2 text-muted"})," ",u.a.secToHms(s.raceTime)),Object(h.h)("nobr",null,Object(h.h)("i",{class:"fas fa-bed ml-2 text-muted"})," ",u.a.format(s.restTime/s.raceTime*100,0),"%")))))),Object(h.h)("div",{class:"mt-1 container-fluid"},Object(h.h)(D.a,{stores:e.props.stores,states:s.states,duration:s.raceTime,key:"state-"+s.bib,height:"6px",showText:!1})))))})))))},s}(h.Component))||c,A=Object(b.a)(l=function(e){function s(t){var s;return(s=e.call(this,t)||this).toggleAdminInfo=function(t){t.stopPropagation(),s.setState({showAdminInfo:!s.state.showAdminInfo})},s.toggleInfo=function(t){t.stopPropagation(),s.setState({showInfo:!s.state.showInfo})},s.onDogClick=function(t,e,a){t.preventDefault(),t.stopPropagation();var n=a.find((function(t){return t.uuidv4===e}));return s.setState({currentDog:n,showDog:e,dogs:a}),!1},s.chooseSubmenu=function(t){var e=t.target.closest("button").dataset.submenu;s.setState({submenu:e})},s.state={},s}return i(s,e),s.prototype.render=function(){for(var e=this.props.stores,s=e.raceStore,a=e.userStore,n=this.state,o=n.showAdminInfo,i=n.submenu,r=void 0===i?"details":i,c=n.showDog,l=n.currentDog,d=void 0===l?{}:l,b=this.props,m=b.wpData,O=void 0===m?{}:m,g=b.onMarkerClick,y=void 0===g?function(){}:g,w=s.findWaypointByBib(O.bib),x=a.isAdmin,k=a.user,S=void 0===k?{}:k,C=(O.bib?s.getMusherByBibId(O.bib):s.getMusherByBibEmail(O.email))||{},I=s.getTeamById(C.team),D=I.members?I.members.find((function(t){return t.email===C.email})):{},R=(s.getClassByBib(O.bib),s.getTotalsByTeamId(C.team)),E=P.a.getImage({user:D,team:I,priority:"user",fallback:C.image1}),F=P.a.displayNameShort(D)||P.a.displayNameShort(C),M=P.a.getRankingColor(w.rank),A=P.a.hasBirthday(d.birth),L=d.birth?Math.ceil(P.a.daysUntilNextBirthday(d.birth)):365,N=s.findNearestMushers(O.bib),B=N.inFront,z=N.behind,H=(u.a.format(w.restTime/w.raceTime*100,0),I&&I.imageHeader&&I.imageHeader.s3XXLargeLink?I.imageHeader:{s3XXLargeLink:C.topImage1||"./assets/homerun-race-logo.png"}),U=I&&I.images?[].concat(I.images):[],_=0;_<3;_+=1)C["image"+_]&&U.push({s3SmallLink:C["image"+_],s3LargeLink:C["image"+_]});I.members&&I.members.indexOf(S.id),I.followers&&I.followers.indexOf(S.id),I.followRequests&&I.followRequests.findIndex((function(t){return t.id===S.id})),Math.floor((new Date).getTime()/1e3);return Object(h.h)(t,null,z.bib&&Object(h.h)("button",{class:"btn btn-link text-primary mx-2 py-0 float-right",onClick:function(){return y(z)},style:"line-height: 1.0em; font-size: 2.0em;"},Object(h.h)("i",{class:"fas fa-angle-right"})),B.bib&&Object(h.h)("button",{class:"btn btn-link text-primary mx-2 py-0 float-right",onClick:function(){return y(B)},style:"line-height: 1.0em; font-size: 2.0em;"},Object(h.h)("i",{class:"fas fa-angle-left"})),Object(h.h)("div",{class:"d-flex justify-content-center align-items-center mb-2"},Object(h.h)("span",{style:"font-size: 1.3em; height: 16vh;"}," ")),Object(h.h)("div",{class:"w-100 overflow-auto",style:"max-height: 55vh;"},Object(h.h)("div",{class:"w-100 position-absolute",style:"z-index: -1; height: 18vh; top: 0px; left: 0px; background-size: cover; background-repeat: no-repeat; background-position: 50% 30%; background-color: #a0a0a0; "+(H?'background-image: url("'+H.s3XXLargeLink+'");':"")}),Object(h.h)("div",{class:"d-flex position-relative"},Object(h.h)("div",{class:"position-relative text-center border rounded-circle imageRounded imageRoundedMedium",style:E?'background-image: url("'+E+'"); background-size: cover;':""},!E&&Object(h.h)("div",{class:"text-muted",style:"font-size: 25px; padding-top: 5px;"},F),Object(h.h)("div",{class:"rounded-pill-both px-2 text-center position-absolute "+(M?"":"bg-secondary")+" font-weight-bold",style:"bottom: -20px; right: 0; "+(M?"background-color: "+M+";":"")},C.bib&&"n/a"!==C.bib&&Object(h.h)(t,null,C.bib))),Object(h.h)("div",{class:"flex-grow-1 pl-3 text-overflow mb-3",style:"line-height: 1.8em;"},Object(h.h)("div",{class:"float-right",style:"font-size: 1.2em;"},w.finishTime<9999999999?Object(h.h)(t,null,Object(h.h)("i",{class:"fas fa-flag-checkered text-success"})):Object(h.h)(t,null,"rest"===w.currentState?Object(h.h)(t,null,Object(h.h)("i",{class:"fas fa-bed text-warning"})):Object(h.h)(t,null,Object(h.h)("i",{class:"fas fa-running text-primary"})))),Object(h.h)("h3",{class:"mb-0"},C.flag," ",C.firstname," ",C.lastname),Object(h.h)("h6",{class:"mb-0"},C.sportsClub||Object(h.h)(t,null," ")))),Object(h.h)("div",{class:"d-flex justify-content-center mb-3"},Object(h.h)("div",{class:"col px-0 pt-2"},Object(h.h)("button",{type:"button",class:"btn btn-block rounded-pill-left rounded-none "+("details"===r?"btn-primary":"btn-outline-primary")+" text-nowrap",style:"text-overflow: ellipsis; overflow: hidden;",onClick:this.chooseSubmenu,"data-submenu":"details"},"Details")),Object(h.h)("div",{class:"col px-0 pt-2"},Object(h.h)("button",{type:"button",class:"btn btn-block rounded-none "+("team"===r?"btn-primary":"btn-outline-primary")+" text-nowrap",style:"text-overflow: ellipsis; overflow: hidden;",onClick:this.chooseSubmenu,"data-submenu":"team"},"Team")),Object(h.h)("div",{class:"col px-0 pt-2"},Object(h.h)("button",{type:"button",class:"btn btn-block rounded-pill-right rounded-none "+("dogs"===r?"btn-primary":"btn-outline-primary")+" text-nowrap",style:"text-overflow: ellipsis; overflow: hidden;",onClick:this.chooseSubmenu,"data-submenu":"dogs"},"Dogs"))),Object(h.h)("div",{class:"w-100 overflow-auto position-relative"},"details"===r&&Object(h.h)(t,null,Object(h.h)(T.a,{stores:this.props.stores,wp:w,musher:C})),"team"===r&&Object(h.h)(t,null,I.public>0?Object(h.h)(t,null,Object(h.h)("h3",null,I.name),Object(h.h)(f.a,{markdown:P.a.replaceImages(I.description,I.images),markdownOpts:P.a.getMarkdownOptions()}),Object(h.h)(v.a,{stores:this.props.stores,images:U})):Object(h.h)(t,null,Object(h.h)("div",{class:"text-center text-muted"},Object(h.h)("div",{class:"display-1"},Object(h.h)("i",{class:"fas fa-dog"})),Object(h.h)("h3",null,Object(h.h)(p.c,{id:"teams.no-public-team"},"No public team!")),Object(h.h)(p.c,{id:"teams.no-public-team"},"This team is not publicly visible."),U&&Object(h.h)("div",{class:"my-3"},Object(h.h)(v.a,{stores:this.props.stores,images:U}))))),"dogs"===r&&Object(h.h)(t,null,I.public>0?Object(h.h)(t,null,I.dogs&&Object(h.h)("div",{class:"w-100 container-fluid"},Object(h.h)("div",{class:"row pt-2"},Object(h.h)(j.a,{stores:this.props.stores,dogs:I.dogs.map((function(t){return t.id})),allDogs:I.dogs,onDogClick:this.onDogClick}))),c&&Object(h.h)(t,null,Object(h.h)("div",{class:"d-flex mb-0 mt-3 position-relative"},Object(h.h)("div",{class:"text-center border rounded-circle imageRounded imageRoundedLarge text-muted pt-2",style:d.image?'background-image: url("'+d.image.s3LargeLink+'"); background-size: cover;':""},!d.image&&Object(h.h)("span",{class:"font-weight-lighter",style:"font-size: 35px;"},u.a.ucfirst(d.name,!0))),Object(h.h)("div",{class:"flex-grow-1 pl-3 pr-2",style:"border-right: 4px solid "+a.findHarness(d.harness,"colorNonstop")+" !important; line-height: 1.2em;"},Object(h.h)("h5",{class:"mb-1"},d.shortname||d.name," ",d.shortname&&""!==d.shortname&&Object(h.h)(t,null," - ",Object(h.h)("span",{class:"font-weight-lighter"},d.name)),A&&Object(h.h)(t,null,Object(h.h)("i",{class:"fas fa-birthday-cake ml-3"}))),Object(h.h)("div",null,L<7&&Object(h.h)(t,null,Object(h.h)("span",{class:"text-muted mr-2"},Object(h.h)("i",{class:"fas fa-birthday-cake"})," in ",L," days")),d.birth&&Object(h.h)("span",{class:"mr-2"},u.a.age(d.birth,d.deceased)),"female"===d.gender?Object(h.h)("i",{class:"fas fa-venus"}):Object(h.h)("i",{class:"fas fa-mars"})))))):Object(h.h)(t,null,Object(h.h)("div",{class:"text-center text-muted"},Object(h.h)("div",{class:"display-1"},Object(h.h)("i",{class:"fas fa-dog"})),Object(h.h)("h3",null,Object(h.h)(p.c,{id:"teams.no-public-team"},"No public team!")),Object(h.h)(p.c,{id:"teams.no-public-team"},"This team is not publicly visible.")))),x&&Object(h.h)("div",{style:"max-height: 200px; max-width: 70vw; overflow: auto;"},Object(h.h)("button",{class:"btn btn-link btn-block",onClick:this.toggleAdminInfo},"Toggle admin info"),o&&Object(h.h)(t,null,Object(h.h)("small",null,Object(h.h)("xmp",null,"musher: ",JSON.stringify(C,null,4),Object(h.h)("br",null),"user: ",JSON.stringify(D,null,4),Object(h.h)("br",null),"team: ",JSON.stringify(I,null,4),Object(h.h)("br",null),"totals: ",JSON.stringify(R,null,4),Object(h.h)("br",null))))))))},s}(h.Component))||l,L=Object(b.a)(d=function(e){function s(t){var s;return(s=e.call(this,t)||this).handleHistoryPointIndex=function(t){var e=parseInt(t.target.value,10);clearTimeout(s.updateTimer.reload),s.setState({historyPointIndex:e,timerRunning:!1},(function(){s.props.stores.raceStore.updateWaypointPosition(Math.abs(s.state.historyPointIndex))}))},s.playHistory=function(){clearTimeout(s.updateTimer.reload);var t=s.state,e=t.historyPointIndex,a=t.replaySpeed,o=s.props.stores.raceStore,i=o.getRaceTrackerTimestamp(e+1),r={historyPointIndex:e+1,timerRunning:!1,playingHistory:!0};i&&(r.raceTrackerPointTimestamp=i),s.setState(n({},r),(function(){o.updateWaypointPosition(Math.abs(e+1))})),clearTimeout(s.updateTimer.history),s.updateTimer.history=setTimeout((function(){s.playHistory()}),1e3*a)},s.pauseHistory=function(){clearTimeout(s.updateTimer.history),s.setState({playingHistory:!1})},s.loadLiveRaceResults=function(t,e){return new Promise((function(a,n){var o,i,r,c,l,d,h,u,b,p,m,f,O,g;return void 0===t&&(t=s.props),o=e.teamIds,i=e.focusOnMushers,r=e.bibs,l=e.historySteps,u=(d=t.stores).userStore,b=(h=d.raceStore).race,(p=s.state).historyPointIndex,m=p.replayHistory,f=p.timerRunning,O=s.props.showDrawerReplay,g=h.getClassById(c=e.classid)||{},Promise.resolve(h.getRaceTrackerData(b.raceTrackerRace,{historySteps:l,history:m||O,bibs:r,classid:c,startDate:g.startDate,endDate:g.endDate,isAdmin:u.isAdmin})).then((function(){try{return h.getRaceTrackerActiveTeams(o,i,r),f&&(clearTimeout(s.updateTimer.reload),s.updateTimer.reload=setTimeout((function(){console.log("loadLiveRaceResults.reloading...");var t=Math.floor((new Date).getTime()/1e3);s.setState({reloadLastEpoch:t}),s.loadLiveRaceResults(s.props,{teamIds:o,focusOnMushers:i,bibs:r,classid:c,historySteps:l})}),6e4)),a()}catch(t){return n(t)}}),n)}))},s.loadRaceResults=function(t,e,a){return new Promise((function(n,o){var i,r;return void 0===t&&(t=s.props),i=t.stores.raceStore,r=s.state.timerRunning,Promise.resolve(i.loadWorkoutSummary(e,t.raceid)).then((function(){try{return i.getWorkoutSummaryActiveTeams(e,a),r&&(clearTimeout(s.updateTimer.reload),s.updateTimer.reload=setTimeout((function(){var t=Math.floor((new Date).getTime()/1e3);s.setState({reloadLastEpoch:t}),s.loadRaceResults(s.props,e,a)}),6e4)),n()}catch(t){return o(t)}}),o)}))},s.loadRace=function(t){return new Promise((function(e,a){var n,o,i,r,c,l,d,h,u,b,p,m,f,O,g;void 0===t&&(t=s.props);var j=function(){try{return e()}catch(t){return a(t)}},v=function(t){try{return console.log(t),j()}catch(t){return a(t)}};try{return s.setState({isLoading:!0}),o=(n=t.stores).raceStore,i=n.appState,c=(r=t).classid,l=r.filterByBibs,d=r.historySteps,Promise.resolve(o.load(r.raceid)).then(function(){try{if(o.getAllClassesSortedBy(),u=i.focusOnMushers,p=void 0===(b=i.selectedClassIds)?[]:b,-1===(m=null==(h=o.race)?void 0:h.classes.map((function(t){return t.id}))).indexOf(f=c||p[0])&&i.setSelectedClassId(f=m[0]),c&&i.toggleSelectedClassId(c,!0),O=h.classes.filter((function(t){return t.id===f})).filter((function(t){return t.contestants&&t.contestants.length>0})).map((function(t){return t.contestants.filter((function(t){return t.team>0})).map((function(t){return t.team}))})).flat(),g=l||h.classes.filter((function(t){return t.id===f})).filter((function(t){return t.contestants&&t.contestants.length>0})).map((function(t){return t.contestants.filter((function(t){return t.bib>0})).map((function(t){return t.bib}))})).flat(),O.length>0)return Promise.resolve(o.loadTeams(O.join(","),!1,!0,!0)).then(function(){try{return t.call(this)}catch(t){return v(t)}}.bind(this),v);function t(){function t(){return s.setState({isLoading:!1}),j()}return h.liveRace>0?Promise.resolve(s.loadLiveRaceResults(s.props,{teamIds:O,focusOnMushers:u,bibs:g,classid:f,historySteps:d})).then(function(){try{return t.call(this)}catch(t){return v(t)}}.bind(this),v):Promise.resolve(s.loadRaceResults(s.props,O,u)).then(function(){try{return t.call(this)}catch(t){return v(t)}}.bind(this),v)}return t.call(this)}catch(t){return v(t)}}.bind(this),v)}catch(t){v(t)}}))},s.setLeaderboardMode=function(t){s.setState({leaderboardMode:t.target.parentElement.dataset.mode||t.target.dataset.mode})},s.chooseRaceClass=function(t){s.setState({filterByraceClass:t.target.value})},s.toggleShowLeaderBoard=function(t){s.setState(!0===t?{showLeaderBoard:!1}:{showLeaderBoard:!s.state.showLeaderBoard})},s.toggleShowNews=function(t){s.setState(!0===t?{showNews:!1}:{showNews:!s.state.showNews})},s.closeAllDrawers=function(){s.setState({showResults:!1,showDrawerCheckpoint:!1,showDrawerMusher:!1})},s.onMarkerClick=function(t){s.closeAllDrawers(),s.setState({showDrawerMusher:!0,wpData:t})},s.onMusherClick=function(t){s.setState({showDrawerMusher:!0,wpData:t})},s.onCpMarkerClick=function(t){if(!t||!t.id)return null;s.closeAllDrawers(),s.setState({selectedCheckpointId:t.id,showDrawerCheckpoint:!0,cpData:t})},s.toggleDrawerMusher=function(){s.setState({showDrawerMusher:!s.state.showDrawerMusher})},s.toggleDrawerCheckpoint=function(){s.setState({showDrawerCheckpoint:!s.state.showDrawerCheckpoint})},s.toggleResults=function(){var t=s.state.showResults;s.closeAllDrawers(),s.setState({showResults:!t})},s.selectCheckpoint=function(t){s.closeAllDrawers(),s.setState({selectedCheckpointId:t,showDrawerCheckpoint:!0,showDrawerMusher:!1,showDrawer:!1})},s.onTeamClick=function(t,e){return t.preventDefault(),t.stopPropagation(),s.setState({showTeam:e}),!1},s.hideTeam=function(){s.setState({showTeam:null})},s.onUserClick=function(t){return t.preventDefault(),t.stopPropagation(),!1},s.onDogClick=function(t,e,a){return t.preventDefault(),t.stopPropagation(),s.setState({showDog:e,dogs:a}),!1},s.hideDog=function(){s.setState({showDog:null})},s.setReplaySpeed=function(t){var e=t.target.closest("button").dataset.speed;s.setState({replaySpeed:parseFloat(e)})},s.filterByClass=function(t){return new Promise((function(e,a){var n,o,i,r,c,l,d,h,u,b,p,m=function(){try{return e()}catch(t){return a(t)}},f=function(t){try{return console.log(t),m()}catch(t){return a(t)}};try{if(n=t.target.closest("button").dataset.id,i=(o=s.props).historySteps,r=o.filterByBibs,(s.state.replayHistory||o.showDrawerReplay)&&s.toggleReplayHistory(),l=(c=s.props.stores).appState,(d=c.raceStore).cleanupMemoryClass(),l.toggleSelectedClassId(n,!0),u=l.focusOnMushers,b=(h=d.race).classes.filter((function(t){return t.id===n})).filter((function(t){return t.contestants&&t.contestants.length>0})).map((function(t){return t.contestants.filter((function(t){return t.team>0})).map((function(t){return t.team}))})).flat(),p=r||h.classes.filter((function(t){return t.id===n})).filter((function(t){return t.contestants&&t.contestants.length>0})).map((function(t){return t.contestants.filter((function(t){return t.bib>0})).map((function(t){return t.bib}))})).flat(),s.setState({allTeamIds:b,bibs:p,selectedMusherBib:"",showDrawerCheckpoint:!1,showDrawerMusher:!1,showDrawer:!1}),b.length>0)return Promise.resolve(d.loadTeams(b.join(","),!1,!0,!0)).then(function(){try{return O.call(this)}catch(t){return f(t)}}.bind(this),f);function O(){function t(){return m()}return h.liveRace>0?Promise.resolve(s.loadLiveRaceResults(s.props,{teamIds:b,focusOnMushers:u,bibs:p,classid:n,historySteps:i})).then(function(){try{return t.call(this)}catch(t){return f(t)}}.bind(this),f):Promise.resolve(s.loadRaceResults(s.props,b,u)).then(function(){try{return t.call(this)}catch(t){return f(t)}}.bind(this),f)}return O.call(this)}catch(t){f(t)}}))},s.toggleFocusOnMusher=function(t){try{var e=s.props.stores,a=e.appState,n=e.raceStore;a.toggleFocusOnMusher(t.target.parentElement.dataset.musherid||t.target.dataset.musherid);var o=a.focusOnMushers,i=void 0===o?[]:o,r=a.selectedClassIds,c=(void 0===r?[]:r)[0],l=n.race,d=l.classes.filter((function(t){return t.id===c})).filter((function(t){return t.contestants&&t.contestants.length>0})).map((function(t){return t.contestants.filter((function(t){return t.bib>0})).map((function(t){return t.bib}))})).flat();l.liveRace>0?n.getRaceTrackerActiveTeams(null,i,d):n.getWorkoutSummaryActiveTeams(null,i,d)}catch(t){console.log(t)}},s.toggleBib=function(){try{var t=s.props.stores,e=t.appState,a=t.raceStore.getMusherByBibId(s.state.bib);e.toggleFocusOnMusher(a.id)}catch(t){console.log(t)}},s.checkForEnter=function(t){"Enter"===t.key&&s.toggleBib()},s.toggleReplayHistory=function(){var t=s.state.replayHistory;clearTimeout(s.updateTimer.reload),s.setState({showDrawer:!1,historyPointIndex:0,replayHistory:!t,timerRunning:t},(function(){return new Promise((function(e,a){var n,o,i,r;return Promise.resolve(s.loadRace()).then((function(){try{if(n=s.state.historyPointIndex,i=(o=s.props.stores.raceStore).maxPoints,t)console.log("toggleReplayHistory: setting to maxPoints",i),o.updateWaypointPosition(Math.abs(i-1));else for(console.log("toggleReplayHistory: setting to first points"),r=0,10;r<10;r+=1)o.updateWaypointPosition(Math.abs(n+r));return e()}catch(t){return a(t)}}),a)}))}))},s.toggleLines=function(){s.setState({showLines:!s.state.showLines})},s.state=n(n({},E),{},{reloadLastEpoch:Math.floor((new Date).getTime()/1e3),historyPointIndex:0,timerRunning:!0,replayHistory:!1,replaySpeed:1}),s.updateTimer={},s}i(s,e);var a=s.prototype;return a.componentWillUnmount=function(){clearTimeout(this.updateTimer.reload),clearTimeout(this.updateTimer.history),clearTimeout(this.updateTimer.tick)},a.componentDidMount=function(){this.loadRace();try{var t={width:(e=window).innerWidth,height:e.innerHeight};t.width<800&&(this.toggleShowLeaderBoard(!0),this.toggleShowNews(!0))}catch(t){console.log(t)}var e},a.componentWillReceiveProps=function(t){this.props.classid===t.classid&&this.props.showDrawerReplay===t.showDrawerReplay||this.loadRace(t)},a.render=function(){var e=this,s=this.state,a=s.historyPointIndex,n=s.timerRunning,o=s.playingHistory,i=s.replaySpeed,r=s.raceTrackerPointTimestamp,c=s.showLines,l=s.allTeamIds,d=this.props.stores,b=d.userStore,p=d.raceStore,m=d.appState,g=b.user,j=void 0===g?{}:g,v=b.isAdmin,D=this.props,T=D.raceid,E=D.showHeader,L=void 0===E||E,N=D.drawerClassNames,B=D.drawerWidth,z=D.showDrawerReplay,H=D.largeMarkers,U=D.isAnimatedMarkers,_=D.linkBase,V=void 0===_?"/app-races/":_,q=m.focusOnMushers,K=void 0===q?[]:q,W=m.selectedClassIds,Y=void 0===W?[]:W,G=this.state,Z=G.reloadLastEpoch,J=G.showDrawerMusher,Q=G.showDrawerCheckpoint,X=G.wpData,$=void 0===X?{}:X,tt=G.showResults,et=G.showTeam,st=G.showDog,at=G.replayHistory,nt=G.selectedCheckpointId,ot=p.waypoints,it=p.geoJSONs,rt=p.zoomToMarkers,ct=p.race,lt=p.maxPoints,dt=$.bib?p.getMusherByBibId($.bib):p.getMusherByBibEmail($.email),ht=p.getTeamById(dt.team),ut=p.getClassById(Y[0])||{},bt=[];ut.waypoints&&ut.waypoints.length>0?bt=ut.waypoints:ut.checkpoints&&ut.checkpoints.length>0&&(bt=ut.checkpoints.slice().filter((function(t){return t.position&&t.position[0]})).map((function(t){return{id:t.id,title:t.name,lat:t.position[0],lng:t.position[1]}})));var pt=!0;ct.countryRegexp&&(j&&j.currentLocationGeocode&&new RegExp(ct.countryRegexp,"i").test(j.currentLocationGeocode.formattedCountry)&&(pt=!1));return Object(h.h)(t,null,et&&Object(h.h)(y.a,null,Object(h.h)(S.default,{stores:this.props.stores,teamid:et,marginTop:"0px;",marginBottom:"0px;",back:this.hideTeam,hideTeam:this.hideTeam})),st&&Object(h.h)(y.a,null,Object(h.h)(C.default,{stores:this.props.stores,dogid:st,marginTop:"0px;",marginBottom:"0px;",back:this.hideDog,dogs:ht.dogs})),L&&Object(h.h)(x.a,{height:R},Object(h.h)("div",{class:"d-flex justify-content-between align-items-center w-100"},Object(h.h)("div",{class:"d-flex align-items-center"},Object(h.h)("span",{class:"",style:"font-size: 2.3em;"},Object(h.h)("a",{href:""+V+ct.id},Object(h.h)("i",{class:"fas fa-angle-left"}))),Object(h.h)("span",{class:"ml-4 text-primary",style:"font-size: 1.4em;",onClick:this.toggleResults},Object(h.h)("i",{class:"fas fa-list-ol"})),Object(h.h)("span",{class:"ml-4 text-primary",style:"font-size: 1.4em;"},!ct.resultsHide&&Object(h.h)("a",{href:""+V+ct.id+"/results"},Object(h.h)("i",{class:"fas fa-stopwatch"})))),Object(h.h)("div",null,Object(h.h)("span",{class:"font-weight-normal text-white",style:"font-size: 1.2em;"},ct.title)),ct.liveRace>0?Object(h.h)(t,null,Object(h.h)("div",{class:"d-flex align-items-center text-primary",onClick:this.toggleReplayHistory},Object(h.h)("span",{class:""},"Replay"),Object(h.h)("span",{class:"ml-2",style:"font-size: 1.4em;"},Object(h.h)("i",{class:"fas fa-play"})))):Object(h.h)(t,null,Object(h.h)("div",{class:"d-flex align-items-center"}," "))),Object(h.h)("div",{class:"w-100 overflow-hidden"},Object(h.h)("div",{class:"d-flex flex-row flex-nowrap pb-2 px-1",style:"overflow: auto; scroll-snap-type: x mandatory;"},ct.classes&&ct.classes.map((function(s,a){return Object(h.h)(t,null,Object(h.h)("div",{class:"col px-0 pt-0"},Object(h.h)("button",{type:"button",class:"btn btn-block "+P.a.getPillClass(ct.classes.length,a)+" rounded-none "+(Y.indexOf(s.id)>-1?"btn-primary":"btn-outline-primary")+" text-nowrap",style:"text-overflow: ellipsis; overflow: hidden;",onClick:e.filterByClass,"data-id":s.id},s.title)))}))))),pt?Object(h.h)(t,null,Object(h.h)("div",{class:"container-fluid position-relative p-0 w-100 h-100",style:"margin-top: "+(L?R:0)+";"},ct.id?Object(h.h)(t,null,Object(h.h)(O.a,{marginTop:R,stores:this.props.stores,raceid:T,waypoints:ot,geoJSONs:c?it:null,waypoints2:bt,zoomToMarkers:rt,fullscreenMap:!0,onMarkerClick:this.onMarkerClick,onMarker2Click:this.onCpMarkerClick,showHeatmap:ct.liveRace<1,allTeamIds:l,showTracks:ct.liveRace>=1,selectedClassIds:Y,showDistanceMarkers:!1,groupWaypoints:!1,focusOnMushers:K,largeMarkers:H,isAnimatedMarkers:U,replaySpeed:1e3*i})):Object(h.h)(t,null,Object(h.h)(k.a,{stores:this.props.stores})),n&&Object(h.h)("div",{class:"position-absolute",style:"top: 125px; left: 5px; z-index: 9999; width: 30px; height: 30px;"},Object(h.h)(F,{stores:this.props.stores,classNames:"float-right ml-2",reloadLastEpoch:Z})),K&&K.length>0&&Object(h.h)(t,null,Object(h.h)("div",{class:"row mb-2",style:' background-color: #1C1F4C; background-image: url("https://themusher.app/assets/tv-single-background.jpg"); background-size: cover !important; background-position: 0 0; border-radius: 10px; '},Object(h.h)("div",{class:"col-12 text-white",style:"font-size: 1.3em;"},K&&K.map((function(s){var a=p.getMusherById(s);return Object(h.h)(t,null,Object(h.h)("div",null,Object(h.h)("nobr",null,Object(h.h)("span",{class:"mr-2",onClick:e.toggleFocusOnMusher,"data-musherid":a.id},K.indexOf(a.id)>-1?Object(h.h)("i",{class:"fas fa-times text-warning"}):Object(h.h)("i",{class:"far fa-star"})),Object(h.h)("span",{class:"text-right",style:"width: 50px; display: inline-block;"},a.bib)," ",a.flag," ",a.firstname," ",a.lastname,Object(h.h)("br",null))))}))))),ct.mapCredits&&Object(h.h)(t,null,Object(h.h)("div",{class:"position-absolute",style:"bottom: 30px; left: 7px; z-index: 9999; width: 100px; height: 40px;"},Object(h.h)(f.a,{markdown:P.a.replaceImages(ct.mapCredits,ct.images),markdownOpts:P.a.getMarkdownOptions()}))),(z||at)&&Object(h.h)(t,null,Object(h.h)(w.a,{stores:this.props.stores,onCloseClick:this.toggleReplayHistory,classNames:N,width:B},lt>0?Object(h.h)(t,null,Object(h.h)("div",{class:"d-flex justify-content-center mx-3"},o?Object(h.h)(t,null,Object(h.h)("div",{class:"pl-1"},Object(h.h)("button",{class:"btn btn-warning",onClick:this.pauseHistory},Object(h.h)("i",{class:"fas fa-pause"})))):Object(h.h)(t,null,Object(h.h)("div",{class:"pl-1"},Object(h.h)("button",{class:"btn btn-success",onClick:this.playHistory},Object(h.h)("i",{class:"fas fa-play"})))),Object(h.h)("div",{class:"pl-2 pt-2 flex-grow-1"},Object(h.h)("input",{type:"range",class:"custom-range w-100",min:0,max:lt,value:a,onInput:this.handleHistoryPointIndex}))),Object(h.h)("div",{class:"d-flex justify-content-center"},Object(h.h)("div",{class:"col px-0 pt-2"},Object(h.h)("button",{type:"button",class:"btn btn-block rounded-pill-left rounded-none "+(1===i?"btn-secondary":"btn-outline-secondary")+" text-nowrap",style:"text-overflow: ellipsis; overflow: hidden;",onClick:this.setReplaySpeed,"data-speed":1},"60x")),Object(h.h)("div",{class:"col px-0 pt-2"},Object(h.h)("button",{type:"button",class:"btn btn-block rounded-none "+(.5===i?"btn-secondary":"btn-outline-secondary")+" text-nowrap",style:"text-overflow: ellipsis; overflow: hidden;",onClick:this.setReplaySpeed,"data-speed":.5},"120x")),Object(h.h)("div",{class:"col px-0 pt-2"},Object(h.h)("button",{type:"button",class:"btn btn-block rounded-none "+(.25===i?"btn-secondary":"btn-outline-secondary")+" text-nowrap",style:"text-overflow: ellipsis; overflow: hidden;",onClick:this.setReplaySpeed,"data-speed":.25},"240x")),Object(h.h)("div",{class:"col px-0 pt-2"},Object(h.h)("button",{type:"button",class:"btn btn-block right rounded-none "+(.12===i?"btn-secondary":"btn-outline-secondary")+" text-nowrap",style:"text-overflow: ellipsis; overflow: hidden;",onClick:this.setReplaySpeed,"data-speed":.12},"480x")),Object(h.h)("div",{class:"col px-0 pt-2"},Object(h.h)("button",{type:"button",class:"btn btn-block rounded-pill-right rounded-none "+(.05===i?"btn-secondary":"btn-outline-secondary")+" text-nowrap",style:"text-overflow: ellipsis; overflow: hidden;",onClick:this.setReplaySpeed,"data-speed":.05},"1000x"))),Object(h.h)("div",{class:"d-flex justify-content-center"},Object(h.h)("div",{class:"flex-grow-1 pt-0 font-weight-bolder text-center",style:"font-size: 1.1em;"},r&&Object(h.h)(t,null,u.a.formatDate(u.a.parseInputDate(r),{locale:"no-NB",hour12:!1,hour:"2-digit",minute:"2-digit"})),v&&Object(h.h)(t,null,"/ ",a)),v&&Object(h.h)(t,null,Object(h.h)("button",{class:"btn btn-danger mt-2 mr-4 rounded-pill-both rounded-none",onClick:this.toggleLines},Object(h.h)("i",{class:"fas fa-wave-square"})," Show lines")))):Object(h.h)(t,null,Object(h.h)("div",{class:"spinner-border text-primary",role:"status"},Object(h.h)("span",{class:"sr-only"},"Loading..."))))),tt&&Object(h.h)(t,null,Object(h.h)(w.a,{stores:this.props.stores,onCloseClick:this.toggleResults,classNames:N,width:B},Object(h.h)(M,{stores:this.props.stores,raceClass:ut,race:ct,onMarkerClick:this.onMusherClick}))),J&&Object(h.h)(t,null,Object(h.h)(w.a,{stores:this.props.stores,onCloseClick:this.toggleDrawerMusher,classNames:N,width:B},Object(h.h)(A,{stores:this.props.stores,wpData:$,onMarkerClick:this.onMarkerClick,onTeamClick:this.onTeamClick,onUserClick:this.onUserClick,onDogClick:this.onDogClick}))),Q&&Object(h.h)(t,null,Object(h.h)(w.a,{stores:this.props.stores,onCloseClick:this.toggleDrawerCheckpoint},Object(h.h)(I.a,{stores:this.props.stores,id:nt,onClickNav:this.selectCheckpoint}))))):Object(h.h)(t,null,Object(h.h)("div",{class:"container-fluid position-relative p-0 w-100 h-100",style:"margin-top: "+(L?R:0)+";"},Object(h.h)("div",{class:"text-center text-muted"},Object(h.h)("div",{class:"display-1"},Object(h.h)("i",{class:"fas fa-hand-paper"})),Object(h.h)("h3",null,"Not allowed to view tracking"),ct.countryRegexpMessage))))},s}(h.Component))||d;e.a=L}).call(this,s("hosL").Fragment)}}]);
//# sourceMappingURL=route-app-races.chunk.05745.js.map