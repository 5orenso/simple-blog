(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{qZTL:function(t,e,s){"use strict";s.r(e),function(t){var c,o=s("hosL"),a=s("Utv1"),r=s("/eY4"),n=s("Y3FI"),l=(s("go65"),s("OhSV")),i=s("fh8t"),h=s.n(i),d=s("ZOvn"),f=s("67HY"),u=s("gbHB"),b=s("B+py"),p=s("pJjI"),g=s("s4FZ"),m=Object(r.a)(c=function(e){function s(t){var s;return(s=e.call(this,t)||this).loadApplication=function(){s.props.stores.applicationStore.load(s.state.id)},s.loadTeam=function(){return new Promise((function(t,e){var c;return s.setState({isLoading:!0}),c=s.props.stores,Promise.resolve(c.teamStore.load(c.workoutStore.currentTeam)).then((function(){try{return s.setState({isLoading:!1}),t()}catch(t){return e(t)}}),e)}))},s.changeLanguage=function(t){s.props.stores.appState.setLanguage(t.target.value)},s.grantAccess=function(){return new Promise((function(t,e){function c(){return s.setState({accessGranted:1}),t()}var o,a,r,n,l,i,h;return a=(o=s.props.stores.userStore).user,n=(r=s.state).returnUrl,l=r.id,i=r.team,h={grantedDate:new Date,returnUrl:n,team:i,appId:l},o.findApplicationById(l)?c.call(this):Promise.resolve(o.saveField(a.id,"applications",h)).then(function(){try{return c.call(this)}catch(t){return e(t)}}.bind(this),e)}))},s.denyAccess=function(){Object(n.route)("/",!0)},s.saveInputParams=function(){var t=s.props,e=t.returnUrl,c=t.id;e?(a.a.set("returnUrl",e),a.a.set("id",c)):(e=a.a.get("returnUrl"),c=a.a.get("id")),s.setState({returnUrl:e,id:c})},s.state={returnUrl:"",id:0},s}var c,r;r=e,(c=s).prototype=Object.create(r.prototype),c.prototype.constructor=c,c.__proto__=r;var i=s.prototype;return i.componentWillMount=function(){this.saveInputParams()},i.componentDidMount=function(){this.loadApplication(),this.loadTeam()},i.render=function(){var e=this.props.stores,s=this.props.subsection,c=this.state,a=c.returnUrl,r=c.accessGranted,n=e.workoutStore.currentTeam,i=e.userStore.user,m=e.appState.language,O=void 0===m?"en":m,j=e.applicationStore.application,v=e.teamStore.team;if(!j)return Object(o.h)("div",{class:"container-fluid"},Object(o.h)("div",{class:"row"},Object(o.h)("div",{class:"col-10 offset-1 col-sm-8 offset-sm-2 col-md-6 offset-md-3 col-lg-4 offset-lg-4 pt-5"},Object(o.h)("h1",{class:"mt-5"},Object(o.h)("i",{class:"fas fa-paw"})," The Musher"),Object(o.h)("h5",{class:"mt-1 mb-5 font-weight-lighter"},Object(o.h)(l.c,{id:"grant-access.title"},"Grant access")),Object(o.h)("div",{class:"alert alert-danger",role:"alert"},Object(o.h)("h5",null,"Error"),"Application not found!"))));var w=j.title,k=j.body,y=j.images;return Object(o.h)("div",{class:"container-fluid"},Object(o.h)("div",{class:"row"},Object(o.h)("div",{class:"col-10 offset-1 col-sm-8 offset-sm-2 col-md-6 offset-md-3 col-lg-4 offset-lg-4 pt-5"},Object(o.h)("h1",{class:"mt-5"},Object(o.h)("i",{class:"fas fa-paw"})," The Musher"),Object(o.h)("h5",{class:"mt-1 mb-5 font-weight-lighter"},Object(o.h)(l.c,{id:"grant-access.title"},"Grant access")),Object(o.h)(g.a,{stores:this.props.stores,images:y,minHeight:"50px"}),Object(o.h)("h5",{class:"mt-3"},w),Object(o.h)("p",{class:"mt-3"},Object(o.h)(h.a,{markdown:d.a.replaceImages(k,y,O),markdownOpts:d.a.getMarkdownOptions()})))),Object(o.h)("div",{class:"row"},i.email?Object(o.h)(t,null,r?Object(o.h)(t,null,Object(o.h)("div",{class:"col-10 offset-1 col-sm-8 offset-sm-2 col-md-6 offset-md-3 col-lg-4 offset-lg-4 mt-3 border-top pt-3"},Object(o.h)("div",{class:"display-1 text-success text-center"},Object(o.h)("i",{class:"fas fa-check"})),Object(o.h)("p",null,Object(o.h)(l.c,{id:"grant-access.access-granted"},"Access granted. Now please click the button below to go back to")," ",w,"."),Object(o.h)("a",{class:"btn btn-success btn-block",href:a+"?userId="+i.uuidv4+"&teamId="+v.uuidv4,native:!0},Object(o.h)(l.c,{id:"grant-access.back-to-application"},"Back to"),": ",w," ",Object(o.h)("i",{class:"fas fa-arrow-right"})))):Object(o.h)(t,null,Object(o.h)("div",{class:"col-10 offset-1 col-sm-8 offset-sm-2 col-md-6 offset-md-3 col-lg-4 offset-lg-4 mt-3 border-top pt-3"},Object(o.h)("h5",{class:"font-weight-light"},Object(o.h)(l.c,{id:"grant-access.choose-team"},"Choose team")),Object(o.h)("div",{class:"col-12"},Object(o.h)(p.a,{stores:this.props.stores,callback:this.loadTeam,key:"teams-"+n,showAll:!1}))),Object(o.h)("div",{class:"col-10 offset-1 col-sm-8 offset-sm-2 col-md-6 offset-md-3 col-lg-4 offset-lg-4 mt-3 border-top pt-3"},Object(o.h)("h5",{class:"font-weight-light"},Object(o.h)(l.c,{id:"grant-access.data-shared"},"Data beeing shared"),":"),Object(o.h)("p",null,Object(o.h)("i",{class:"fas fa-user"}),": ",Object(o.h)(l.c,{id:"grant-access.fields-shared-person"},"Image, Name, email, cellphone, address")),Object(o.h)("p",null,Object(o.h)("i",{class:"fas fa-dog"}),": ",Object(o.h)(l.c,{id:"grant-access.fields-shared-dog"},"Image, Name, chipId, gender, birth, vaccines")),Object(o.h)("p",null,Object(o.h)("i",{class:"fas fa-users"}),": ",Object(o.h)(l.c,{id:"grant-access.fields-shared-team"},"Name, description, images"))),Object(o.h)("div",{class:"col-10 offset-1 col-sm-8 offset-sm-2 col-md-6 offset-md-3 col-lg-4 offset-lg-4 mt-3"},Object(o.h)("button",{class:"btn btn-primary btn-block",onClick:this.grantAccess},Object(o.h)("i",{class:"fas fa-check"})," ",Object(o.h)(l.c,{id:"grant-access.grant"},"Grant access")),Object(o.h)("button",{class:"mt-4 btn btn-sm btn-link text-muted float-right",onClick:this.denyAccess},Object(o.h)(l.c,{id:"grant-access.deny"},"Deny access"))))):Object(o.h)(t,null,!s&&Object(o.h)(f.a,{stores:this.props.stores,showLogo:!1,routeLoginOk:"/grant-access",routeLoginNew:"/grant-access/newUser",routeLoginForgot:"/grant-access/forgotPassword"}),"newUser"===s&&Object(o.h)(u.a,{stores:this.props.stores,showLogo:!1,routeLogin:"/grant-access",routeLoginForgot:"/grant-access/forgotPassword",skipPubSub:!0}),"forgotPassword"===s&&Object(o.h)(b.a,{stores:this.props.stores,showLogo:!1,routeLogin:"/grant-access",routeLoginNew:"/grant-access/newUser"}))),Object(o.h)("div",{class:"col-10 offset-1 col-sm-8 offset-sm-2 col-md-6 offset-md-3 col-lg-4 offset-lg-4"},Object(o.h)("div",{class:"form-row align-items-center"},Object(o.h)("div",{class:"col-auto my-1 mx-auto",style:"width: 80px;"},Object(o.h)("select",{class:"custom-select",style:"background-color: inherit; border: none;",onInput:this.changeLanguage},Object(o.h)("option",{value:"no",selected:"no"===O},"ðŸ‡³ðŸ‡´ NO"),Object(o.h)("option",{value:"en",selected:"en"===O},"ðŸ‡¬ðŸ‡§ EN"),Object(o.h)("option",{value:"es",selected:"es"===O},"ðŸ‡ªðŸ‡¸ ES"),Object(o.h)("option",{value:"de",selected:"de"===O},"ðŸ‡©ðŸ‡ª DE"))))))},s}(o.Component))||c;e.default=m}.call(this,s("hosL").Fragment)}}]);
//# sourceMappingURL=route-grant-access.chunk.92ff3.js.map