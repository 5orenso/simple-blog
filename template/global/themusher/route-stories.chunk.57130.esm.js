(window.webpackJsonp=window.webpackJsonp||[]).push([[55],{"1OK2":function(t,e,s){"use strict";var o,a=s("hosL"),i=(s("Utv1"),s("/eY4"));Object(i.a)(o=class extends a.Component{constructor(t){super(t),this.touchStart=t=>{t.stopPropagation(),this.setState({startX:t.touches[0].pageX})},this.touchEnd=t=>{t.stopPropagation(),this.setState({startX:void 0,sliding:!1})},this.touchMove=t=>{t.stopPropagation();const{totalImages:e}=this.state;if(e>1){const{startX:e,sliding:s}=this.state,o=50,a=t.touches[0].pageX;s||(a>e+o?(this.setState({sliding:!0}),this.prevImage()):a<e-o&&(this.setState({sliding:!0}),this.nextImage()))}};const{images:e=[]}=t;this.state={imageContainer:1,currentImage1:e[0]||{},currentImage2:{},currentIdx:0,totalImages:e.length||0,imageDots:[...Array(e.length||0).fill(1).map((t,e)=>t+e)]}}nextImage(){const{images:t}=this.props,{totalImages:e,currentIdx:s,imageContainer:o}=this.state,a=1===o?2:1;let i=s+1;i>e-1&&(i=0),this.setState({["currentImage"+a]:t[i],currentIdx:i,imageContainer:a})}prevImage(){const{images:t}=this.props,{totalImages:e,currentIdx:s,imageContainer:o}=this.state;let a=s-1;a<0&&(a=e-1),this.setState({["currentImage"+(1===o?2:1)]:t[a],currentIdx:a,imageContainer:1===o?2:1})}componentWillReceiveProps(t){if(t.images!==this.props.images){const{images:e=[]}=t;this.setState({imageContainer:1,currentImage1:e.length>0?e[0]:{},currentImage2:{},currentIdx:0,totalImages:e.length||0,imageDots:[...Array(e.length||0).fill(1).map((t,e)=>t+e)]})}}render(){const{currentImage1:t,currentImage2:e,imageContainer:s,totalImages:o,imageDots:i,currentIdx:l}=this.state,n=this["image"+s],c=1===s?t:e,r=n&&n.height?n.width/n.height:4/3;let h,d;if(c.dimensions){const{width:t,height:e,orientation:s}=c.dimensions;s>4&&s<9?(h=t,d=e):(h=e,d=t)}const b=c.dimensions?d/h:r;return o<=0?"":Object(a.h)("div",{class:"w-100"},Object(a.h)("div",{class:"border rounded position-relative w-100",style:`height: calc(85vw / ${b}); overflow: hidden; transition: all .3s ease-in-out;`,onTouchstart:this.touchStart,onTouchend:this.touchEnd,onTouchmove:this.touchMove},o>1&&Object(a.h)("span",{class:"position-absolute",style:"top:0px; right: 5px; z-index: 2000;"},Object(a.h)("small",null,l+1,"/",o)),t&&Object(a.h)("div",{class:"position-absolute",style:(1===s?"opacity: 1;":"opacity: 0;")+" transition: all .3s ease-in-out; top: 0; left: 0;"},Object(a.h)("img",{loading:"lazy",src:t.s3LargeLink,class:"img-fluid align-middle",ref:t=>this.image1=t})),e&&Object(a.h)("div",{class:"position-absolute",style:(2===s?"opacity: 1;":"opacity: 0;")+" transition: all .3s ease-in-out; top: 0; left: 0;"},Object(a.h)("img",{loading:"lazy",src:e.s3LargeLink,class:"img-fluid align-middle",ref:t=>this.image2=t}))),i.length>1&&Object(a.h)("div",{class:"w-100 text-center"},i.map(t=>Object(a.h)("span",{style:`color: ${t===l+1?"#ffffff":"#808080"};`},"â€¢"))))}})},"4QWe":function(t,e,s){"use strict";(function(t){var o,a=s("hosL"),i=s("Utv1"),l=s("/eY4"),n=s("OhSV"),c=s("go65"),r=s("om2D"),h=s("ZOvn");let d=Object(l.a)(o=class extends a.Component{constructor(t){var e;super(t),e=this,this.beforeImagesUploaded=()=>{this.setState({sendButtonEnabled:!1})},this.afterImagesUploaded=()=>{this.setState({sendButtonEnabled:!0})},this.commentStory=async function(){const{sendButtonEnabled:t}=e.state;if(!t)return!1;const{callback:s=(()=>{}),inputRefObject:o={}}=e.props,{story:a}=e.props,{storyStore:i}=e.props.stores,{comment:l,showAddImage:n}=e.state;e.setState({sendButtonEnabled:!1});const c=await i.commentStory({id:a.id,comment:l});c&&200===c.status&&(e.setState({comment:{body:"",images:[]}},()=>{h.a.resizeTextarea(o[a.id]),n&&e.addImage()}),s({story:a,response:c})),e.setState({sendButtonEnabled:!0})},this.addImages=({value:t})=>{const{comment:e}=this.state;e.images.push(...t),this.setState({comment:e})},this.addImage=()=>{const{showAddImage:t=!1}=this.state;this.setState({showAddImage:!t})},this.handleImageErrored=t=>{const e=t.target;e.onerror=null,setTimeout(()=>{e.src+="?"+new Date},1e3)},this.state={comment:{body:"",images:[]},showAddImage:!1,sendButtonEnabled:!0},this.inputRef={}}render(){const{inputRef:e,story:s}=this.props,{comment:o,showAddImage:l,sendButtonEnabled:d}=this.state,{userStore:b}=this.props.stores,{user:m={}}=b,u=h.a.displayNameShort(m),p=(h.a.displayName(m),m.image||(m.images?m.images[0]:void 0));return Object(a.h)("div",null,Object(a.h)("div",{class:"d-flex mb-0 position-relative w-100"},Object(a.h)("div",{class:"text-center border rounded-circle imageRounded imageRoundedSmall",style:(p?`background-image: url('${p.s3SmallLink}'); background-size: cover;`:"")+" border-width: 3px !important;"},!m.image&&Object(a.h)("span",{class:"font-weight-lighter",style:"font-size: 15px;"},u)),Object(a.h)("div",{class:"col pl-3",style:"line-height: 1.2em;"},Object(a.h)("div",{class:"d-flex bd-highlight"},Object(a.h)("div",{class:"p-0 w-100 bd-highlight"},Object(a.h)("label",{class:"sr-only",for:"inlineFormInput"},Object(a.h)(n.c,{id:"comments.comment"},"Kommentar")),Object(a.h)("div",{class:"border rounded rounded-lg position-relative"},Object(a.h)(n.b,null,Object(a.h)("textarea",{class:"form-control-plaintext px-2",type:"text",placeholder:Object(a.h)(n.c,{id:"comments.write-comment"},"Skriv en kommentar..."),onInput:Object(c.a)(this,"comment.body"),onKeyUp:h.a.resizeTextarea,onFocus:h.a.resizeTextarea,style:"height: 2.3em;",value:o.body,ref:e})),Object(a.h)("div",{class:"position-absolute",style:"top: 8px; right: 10px; font-size: 1.2em;"},Object(a.h)("i",{class:"fas fa-image pointerCursor","data-id":s.id,onClick:this.addImage})))),Object(a.h)("div",{class:"p-0 pl-2 flex-shrink-1 bd-highlight"},Object(a.h)("button",{type:"button",class:`btn btn-${d?"primary":"secondary"} mb-2`,disabled:!d,onClick:this.commentStory},Object(a.h)("i",{class:"fas fa-paper-plane"})))))),l&&Object(a.h)(t,null,Object(a.h)("div",{class:"col-12 text-center"},Object(a.h)("div",{class:"container-fluid"},Object(a.h)("div",{class:"row"},i.a.isArray(o.images)&&o.images.map(t=>Object(a.h)("div",{class:"col-3 p-1"},Object(a.h)("img",{src:t.s3SmallLink,class:"img-fluid",onError:this.handleImageErrored}),Object(a.h)("button",{class:"btn btn-sm btn-link",onClick:this.removeImage,"data-name":t.name},Object(a.h)("i",{class:"fas fa-trash"})," ",Object(a.h)(n.c,{id:"comments.remove-image"},"Remove")))))),Object(a.h)(r.a,{object:o,updateField:this.addImages,before:this.beforeImagesUploaded,after:this.afterImagesUploaded,autoOpen:!0}))))}})||o;e.a=d}).call(this,s("hosL").Fragment)},"5uob":function(t,e,s){"use strict";var o,a=s("hosL"),i=(s("Utv1"),s("/eY4")),l=s("OhSV"),n=s("go65"),c=(s("ETxl"),s("ZOvn"));let r=Object(i.a)(o=class extends a.Component{constructor(t){var e;super(t),e=this,this.commentStory=async function(){const{sendButtonEnabled:t}=e.state;if(!t)return!1;const{callback:s=(()=>{}),commentId:o,inputRefObject:a={}}=e.props,{story:i}=e.props,{storyStore:l}=e.props.stores,{comment:n=""}=e.state;e.setState({sendButtonEnabled:!1});const r=await l.commentReplyStory({id:i.id,commentId:o,comment:n});r&&200===r.status&&(e.setState({comment:""},()=>{c.a.resizeTextarea(a[o])}),s({story:i,response:r,commentId:o})),e.setState({sendButtonEnabled:!0})},this.state={sendButtonEnabled:!0},this.inputRef={}}componentDidMount(){const{initCall:t=(()=>{})}=this.props;t()}render(){const{inputRef:t}=this.props,{comment:e,sendButtonEnabled:s}=this.state,{userStore:o}=this.props.stores,{user:i={}}=o,r=c.a.displayNameShort(i),h=(c.a.displayName(i),i.image||(i.images?i.images[0]:void 0));return Object(a.h)("div",{class:"w-100"},Object(a.h)("div",{class:"d-flex mb-0 position-relative w-100"},Object(a.h)("div",{class:"text-center border rounded-circle imageRounded imageRoundedThumb",style:(h?`background-image: url('${h.s3SmallLink}'); background-size: cover;`:"")+" border-width: 3px !important;"},!h&&Object(a.h)("span",{class:"font-weight-lighter",style:"font-size: 15px;"},r)),Object(a.h)("div",{class:"col pl-3",style:"line-height: 1.2em;"},Object(a.h)("div",{class:"d-flex bd-highlight"},Object(a.h)("div",{class:"p-0 w-100 bd-highlight"},Object(a.h)("label",{class:"sr-only",for:"inlineFormInput"},Object(a.h)(l.c,{id:"comments.comment"},"Kommentar")),Object(a.h)("div",{class:"border rounded rounded-lg position-relative"},Object(a.h)(l.b,null,Object(a.h)("textarea",{class:"form-control-plaintext px-2",type:"text",placeholder:Object(a.h)(l.c,{id:"comments.write-comment"},"Skriv en kommentar..."),onInput:Object(n.a)(this,"comment"),onKeyUp:c.a.resizeTextarea,style:"height: 2.3em;",value:e,ref:t})))),Object(a.h)("div",{class:"p-0 pl-2 flex-shrink-1 bd-highlight"},Object(a.h)("button",{type:"button",class:`btn btn-${s?"primary":"secondary"} mb-2`,disabled:!s,onClick:this.commentStory},Object(a.h)("i",{class:"fas fa-paper-plane"})))))))}})||o;e.a=r},AEg1:function(t,e,s){"use strict";(function(t){function o(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,o)}return s}function a(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}var i,l=s("hosL"),n=s("Utv1"),c=s("/eY4"),r=s("OhSV"),h=s("go65"),d=s("om2D"),b=s("ZOvn");const m={showAddImage:!1,showTeamChange:!1,showChangeVisibility:!1,showChangeType:!1,sendButtonEnabled:!0};let u=Object(c.a)(i=class extends l.Component{constructor(t){var e;super(t),e=this,this.beforeImagesUploaded=()=>{this.setState({sendButtonEnabled:!1})},this.afterImagesUploaded=()=>{this.setState({sendButtonEnabled:!0})},this.addStory=async function(){const{story:t={},showAddImage:s,sendButtonEnabled:o}=e.state,{callback:a=(()=>{}),hashTags:i=[],postfix:l,topic:n="team-"+t.team}=e.props,{storyStore:c}=e.props.stores;if(!o)return!1;if(!t.body)return!1;e.setState({sendButtonEnabled:!1});let r=t.body;l&&(r+="\n\n"+l),i&&i.length>0&&(r+="\n\n"+i.map(t=>"#"+t).join(" "));const h=await c.insert({type:t.type,title:t.title,body:r,pinned:t.pinned,images:t.images,public:t.public?1:0,team:t.team,urlText:t.urlText,url:t.url,currency:t.currency,price:t.price,code:t.code,country:t.country,region:t.region,startDate:t.startDate,endDate:t.endDate,topic:n});h&&201===h.status&&(await c.loadPublicFeed({hashtags:i}),e.setState({story:{type:1,title:"",body:"",pinned:null,images:[],public:1,urlText:"",url:"",currency:"",price:null,code:"",country:"",region:"",startDate:null,endDate:null}},()=>{b.a.resizeTextarea(e.inputRef.newStoryBody),s&&e.addImage()}),a(h.data)),e.setState({sendButtonEnabled:!0})},this.addImages=({value:t})=>{const{story:e}=this.state;e.images.push(...t),this.setState({story:e})},this.removeImage=async function(t){const{story:s}=e.state,o=t.target.parentElement.dataset.name||t.target.dataset.name;if(n.a.isArray(s.images)){const t=s.images.findIndex(t=>t.name===o);t>-1&&s.images.splice(t,1)}e.setState({story:s})},this.addImage=()=>{const{showAddImage:t}=this.state;this.setState({showAddImage:!t})},this.changeVisibility=()=>{const{showChangeVisibility:t}=this.state;this.setState({showChangeVisibility:!t})},this.changePinned=()=>{const{showChangeVisibility:t}=this.state;this.setState({showChangeVisibility:!t})},this.changeType=()=>{const{showChangeType:t}=this.state;this.setState({showChangeType:!t})},this.toggleTeamChange=()=>{const{showTeamChange:t}=this.state;this.setState({showTeamChange:!t})},this.handleImageErrored=t=>{const e=t.target;e.onerror=null,setTimeout(()=>{e.src+="?"+new Date},1e3)},this.setPublicTeam=()=>{const{userStore:t}=this.props.stores,e=t.findPublicTeams();if(n.a.isArray(e)&&e.length>0){const{story:t}=this.state;t.team=e[0].id,this.setState({story:t})}},this.setFocus=t=>{this.setState({hasFocus:!0}),b.a.resizeTextarea(t.target)},this.removeFocus=()=>{this.setState({hasFocus:!1})},this.state=function(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?o(Object(s),!0).forEach((function(e){a(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):o(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}({story:{type:1,title:"",body:"",images:[],public:1,urlText:"",url:"",currency:"",price:0,code:"",country:"",region:"",startDate:"",endDate:""}},m),this.inputRef={}}componentDidMount(){this.setPublicTeam()}render(){const{col:e=12,offset:s=0,hashTags:o=[]}=this.props,{story:a={},showAddImage:i,showTeamChange:c,showChangeVisibility:m,showChangeType:u,sendButtonEnabled:p,hasFocus:O}=this.state,{userStore:g,appState:j}=this.props.stores,{user:f={},isAdmin:y}=g,v=f.firstname?`${n.a.ucfirst(f.firstname,!0)}${n.a.ucfirst(f.lastname,!0)}`:""+n.a.ucfirst(f.email||"",!0);let w=f.image||(f.images?f.images[0]:void 0);if(a.team){const t=parseInt(a.team,10),e=g.findTeam(t,!0);w=e.image||(e.images?e.images[0]:void 0)}const{darkmode:x}=j;return Object(l.h)("div",{class:"w-100 px-0"},Object(l.h)("div",{class:"row"},Object(l.h)("div",{class:`col-${e} offset-${s} col-sm-8 col-lg-6 offset-sm-2 offset-lg-3 rounded rounded-lg pt-3 pb-1 bg-${x?"black":"white"} shadow-sm mb-1`},Object(l.h)("div",{class:"d-flex mb-0 position-relative w-100"},Object(l.h)("div",{class:"position-relative"},Object(l.h)("div",{class:"text-center border rounded-circle imageRounded imageRoundedSmall pointerCursor",style:(w?`background-image: url('${w.s3SmallLink}'); background-size: cover;`:"")+" border-width: 3px !important;",onClick:this.toggleTeamChange},!w&&Object(l.h)("span",{class:"font-weight-lighter",style:"font-size: 15px;"},v)),Object(l.h)("div",{class:"position-absolute",style:"top: 16px; right: 0px;"},Object(l.h)("small",{class:"text-white",style:"font-size: 1.5em;"},Object(l.h)("i",{class:"fas fa-caret-down pointerCursor",onClick:this.toggleTeamChange})))),Object(l.h)("div",{class:"col pl-3 pr-0",style:"line-height: 1.2em;"},Object(l.h)("div",{class:"d-flex bd-highlight"},Object(l.h)("div",{class:"p-0 w-100 bd-highlight"},Object(l.h)("label",{class:"sr-only",for:"inlineFormInput"},Object(l.h)(r.c,{id:"story.body"},"Story")),Object(l.h)("div",{class:"border rounded rounded-lg position-relative"},Object(l.h)(r.b,null,Object(l.h)("textarea",{class:"form-control-plaintext px-2",type:"text",placeholder:Object(l.h)(r.c,{id:"story.write-body"},"Hva tenker du pÃ¥?.."),onInput:Object(h.a)(this,"story.body"),onKeyUp:b.a.resizeTextarea,onFocus:this.setFocus,style:"height: 2.3em;",value:a.body,ref:t=>this.inputRef.newStoryBody=t})),O&&Object(l.h)("div",{class:"position-absolute",style:"bottom: 8px; right: 10px; font-size: 1.2em;"},Object(l.h)("i",{class:"fas fa-image pointerCursor","data-id":a.id,onClick:this.addImage}),Object(l.h)("i",{class:`fas fa-${1===a.public?"globe-europe":"users"} pointerCursor ml-2`,"data-id":a.id,onClick:this.changeVisibility}),y&&Object(l.h)("i",{class:"fas fa-cog pointerCursor ml-2","data-id":a.id,onClick:this.changeType}))),o&&o.length>0&&Object(l.h)(t,null,o.map(e=>Object(l.h)(t,null,Object(l.h)("span",{class:"badge badge-secondary mr-2 my-1"},Object(l.h)("a",{href:"/stories/tag/"+e,class:"text-white"},"#",e)))))),Object(l.h)("div",{class:"p-0 pl-2 flex-shrink-1 bd-highlight pt-auto"},Object(l.h)("button",{type:"button",class:`btn btn-${p?"primary":"secondary"} ml-1`,disabled:!p,onClick:this.addStory},Object(l.h)("i",{class:"fas fa-paper-plane"})))))),Object(l.h)("div",null,Object(l.h)("div",{class:"row"},c&&Object(l.h)(t,null,Object(l.h)("div",{class:"col-12 text-center mt-2"},Object(l.h)("div",{class:"form-group"},Object(l.h)("small",null,Object(l.h)("select",{class:"custom-select custom-select-sm",id:"team",onInput:Object(h.a)(this,"story.team"),onChange:this.toggleTeamChange},Object(l.h)("option",{value:""},"-- ",Object(l.h)(r.c,{id:"story.team-choose"},"Velg team")," --"),n.a.isArray(f.teams)&&f.teams.map(t=>{const e=g.findTeam(t,!0);return e&&e.public?Object(l.h)("option",{value:e.id,selected:a.team==e.id?"selected":""},e.name):""}),!f.teams&&Object(l.h)(t,null,Object(l.h)("option",{value:""},"No public teams"))))))),m&&Object(l.h)(t,null,y&&Object(l.h)(t,null,Object(l.h)("div",{class:"col-12 text-center mt-2"},Object(l.h)("div",{class:"form-group"},Object(l.h)("small",null,Object(l.h)("label",{for:"pinned"},"Pinned to top:"),Object(l.h)("input",{id:"pinned",type:"checkbox",onInput:Object(h.a)(this,"story.pinned"),value:1,checked:a.pinned?1:0}))))),Object(l.h)("div",{class:"col-12 text-center mt-2"},Object(l.h)("div",{class:"form-group"},Object(l.h)("small",null,Object(l.h)("select",{class:"custom-select custom-select-sm",id:"team",onInput:Object(h.a)(this,"story.public"),value:a.public,onChange:this.changeVisibility},Object(l.h)("option",{value:0,selected:0==a.public?"selected":""},"ðŸ‘¥ ",Object(l.h)(r.c,{id:"story.visibility-followers"},"Kun synlig for de som fÃ¸lger deg.")),Object(l.h)("option",{value:1,selected:1==a.public?"selected":""},"ðŸŒ ",Object(l.h)(r.c,{id:"story.visibility-public"},"Synlig for alle som bruker appen."))))))),u&&Object(l.h)(t,null,Object(l.h)("div",{class:"col-12 text-center mt-2"},Object(l.h)("div",{class:"form-group"},Object(l.h)("small",null,Object(l.h)("select",{class:"custom-select custom-select-sm",id:"team",onInput:Object(h.a)(this,"story.type"),value:a.type,onChange:this.changeType},Object(l.h)("option",{value:""},"-- ",Object(l.h)(r.c,{id:"story.type-choose"},"Velg type")," --"),Object(l.h)("option",{value:1,selected:1==a.type?"selected":""},"âœï¸ ",Object(l.h)(r.c,{id:"story.type-regular"},"Vanlig")),Object(l.h)("option",{value:2,selected:2==a.type?"selected":""},"ðŸš€ ",Object(l.h)(r.c,{id:"story.type-ad"},"Annonse")),Object(l.h)("option",{value:3,selected:3==a.type?"selected":""},"ðŸ“„ ",Object(l.h)(r.c,{id:"story.type-article"},"Artikkel"))))))),i&&Object(l.h)(t,null,Object(l.h)("div",{class:"col-12 text-center mt-2"},Object(l.h)("div",{class:"container-fluid"},Object(l.h)("div",{class:"row"},n.a.isArray(a.images)&&a.images.map(t=>Object(l.h)("div",{class:"col-3 p-1"},Object(l.h)("img",{src:t.s3SmallLink,class:"img-fluid",onError:this.handleImageErrored}),Object(l.h)("button",{class:"btn btn-sm btn-link",onClick:this.removeImage,"data-name":t.name},Object(l.h)("i",{class:"fas fa-trash"})," Del"))))),Object(l.h)(d.a,{object:a,updateField:this.addImages,before:this.beforeImagesUploaded,after:this.afterImagesUploaded,autoOpen:!0}))),a.type>1&&Object(l.h)(t,null,Object(l.h)("div",{class:"col-12 mt-3"},Object(l.h)("label",null,Object(l.h)(r.c,{id:"story.url-text"},"URL text")),Object(l.h)("div",{class:"form-group"},Object(l.h)("small",null,Object(l.h)("input",{class:"form-control",type:"text",name:"urlText",onInput:Object(h.a)(this,"story.urlText"),value:a.urlText})))),Object(l.h)("div",{class:"col-12 mt-3"},Object(l.h)("label",null,Object(l.h)(r.c,{id:"story.url"},"URL")),Object(l.h)("div",{class:"form-group"},Object(l.h)("small",null,Object(l.h)("input",{class:"form-control",type:"text",name:"url",onInput:Object(h.a)(this,"story.url"),value:a.url}))))),2==a.type&&Object(l.h)(t,null,Object(l.h)("div",{class:"col-12 mt-3"},Object(l.h)("label",null,Object(l.h)(r.c,{id:"story.code"},"Code")),Object(l.h)("div",{class:"form-group"},Object(l.h)("small",null,Object(l.h)("input",{class:"form-control",type:"text",name:"code",onInput:Object(h.a)(this,"story.code"),value:a.code})))),Object(l.h)("div",{class:"col-12"},Object(l.h)("label",null,Object(l.h)(r.c,{id:"story.region"},"Region")),Object(l.h)("div",{class:"form-group"},Object(l.h)("small",null,Object(l.h)("input",{class:"form-control",type:"text",name:"region",onInput:Object(h.a)(this,"story.region"),value:a.region})))),Object(l.h)("div",{class:"col-12"},Object(l.h)("label",null,Object(l.h)(r.c,{id:"story.country"},"Country")),Object(l.h)("div",{class:"form-group"},Object(l.h)("small",null,Object(l.h)("input",{class:"form-control",type:"text",name:"country",onInput:Object(h.a)(this,"story.country"),value:a.country})))),Object(l.h)("div",{class:"col-4"},Object(l.h)("label",null,Object(l.h)(r.c,{id:"story.currency"},"Currency")),Object(l.h)("div",{class:"form-group"},Object(l.h)("small",null,Object(l.h)("input",{class:"form-control",type:"text",name:"currency",onInput:Object(h.a)(this,"story.currency"),value:a.currency})))),Object(l.h)("div",{class:"col-8"},Object(l.h)("label",null,Object(l.h)(r.c,{id:"story.price"},"Price")),Object(l.h)("div",{class:"form-group"},Object(l.h)("small",null,Object(l.h)("input",{class:"form-control",type:"text",name:"price",onInput:Object(h.a)(this,"story.price"),value:a.price}))))))))))}})||i;e.a=u}).call(this,s("hosL").Fragment)},AJN2:function(t,e,s){"use strict";(function(t){function o(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,o)}return s}function a(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}var i,l=s("hosL"),n=(s("Utv1"),s("/eY4")),c=s("NMoA");s("ZOvn");const r={};let h=Object(n.a)(i=class extends l.Component{constructor(t){super(t),this.state=function(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?o(Object(s),!0).forEach((function(e){a(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):o(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}({},r),this.inputRef={}}async loadStoriesPublicFeed(t=this.props){const{storyStore:e}=t.stores,{story:s}=t;await e.loadPublicFeed({story:s})}componentDidMount(){this.loadStoriesPublicFeed()}componentWillReceiveProps(t){t.story!==this.props.story&&this.loadStoriesPublicFeed(t)}render(){const{storyStore:e,appState:s}=this.props.stores,{publicFeed:o}=e,{darkmode:a}=s;return Object(l.h)("div",{class:"w-100"},Object(l.h)("div",{class:"row pb-4 bg-light"},Object(l.h)("div",{class:`col-12 col-sm-8 col-lg-6 offset-sm-2 offset-lg-3 my-1 position-relative rounded rounded-lg py-3 bg-${a?"black":"white"} shadow-sm`},!o||0===o.length&&Object(l.h)(t,null,Object(l.h)("div",{class:"text-center text-muted mt-5"},Object(l.h)("div",{class:"display-1 text-center mb-5"},Object(l.h)("i",{class:"fas fa-comment"})),Object(l.h)("h3",null,"No story found!"))),o&&o.map(e=>Object(l.h)(t,null,Object(l.h)(c.a,{stores:this.props.stores,story:e,showAllComments:!0}))))))}})||i;e.a=h}).call(this,s("hosL").Fragment)},B95u:function(t,e,s){"use strict";(function(t){function o(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,o)}return s}function a(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?o(Object(s),!0).forEach((function(e){i(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):o(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}function i(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}var l,n=s("hosL"),c=s("Utv1"),r=s("/eY4"),h=s("cneo"),d=s("OhSV"),b=s("fh8t"),m=s.n(b),u=s("go65"),p=s("5uob"),O=(s("ETxl"),s("ZOvn"));const g={showAddComment:{},showAllComments:!1,showAllReplies:{},viewImageIdx:{},likeComment:{},likeReply:{},showOriginal:{}};let j=Object(r.a)(l=class extends n.Component{constructor(t){var e;super(t),e=this,this.addLikeComment=async function(t){const{callback:s=(()=>{})}=e.props,o=t.target.closest(".commentContainer").dataset.id,{story:a}=e.props,{storyStore:i}=e.props.stores,{likeComment:l}=e.state;l[o]=!0,e.setState({likeComment:l}),setTimeout(()=>{const{likeComment:t}=e.state;delete t[o],e.setState({likeComment:t})},1200);const n=await i.likeStoryComment({id:a.id,commentId:o});return n&&200===n.status&&s({type:"likeComment",story:a,commentId:o,response:n}),!0},this.likeReply=async function(t){const{callback:s=(()=>{})}=e.props,o=t.target.closest(".replyContainer").dataset.id,a=t.target.closest(".replyContainer").dataset.comment,{story:i}=e.props,{storyStore:l}=e.props.stores,{likeReply:n}=e.state;n[o]=!0,e.setState({likeReply:n}),setTimeout(()=>{const{likeReply:t}=e.state;delete t[o],e.setState({likeReply:t})},1200);const c=await l.likeStoryCommentReply({id:i.id,replyId:o,commentId:a});c&&200===c.status&&s({type:"likeReply",story:i,commentId:a,replyId:o,response:c})},this.replyComment=async function(t){const s=t.target.parentElement.dataset.id||t.target.dataset.id,{showAddComment:o}=e.state;o[s]=!o[s],e.setState({showAddComment:o},()=>{e.inputRef[s]&&e.inputRef[s].focus()})},this.toggleComments=()=>{const{showAllComments:t}=this.state;this.setState({showAllComments:!t})},this.toggleReplies=t=>{const e=t.target.parentElement.dataset.id||t.target.dataset.id,{showAllReplies:s}=this.state;s[e]=!s[e],this.setState({showAllReplies:s})},this.toggleMenu=t=>{const{id:e}=t.target.closest("i").dataset,{showMenu:s={}}=this.state;s[e]=!s[e],this.setState({showDeleteComment:{},showEdit:{},showMenu:s})},this.toggleEdit=t=>{const{id:e,comment:s}=t.target.closest("button").dataset,{showEdit:o={}}=this.state;o[e]=!o[e],this.setState({showDeleteComment:{},showEdit:o,showMenu:{},commentEditText:s})},this.toggleDeleteComment=t=>{const{id:e}=t.target.closest("button").dataset,{showDeleteComment:s={}}=this.state;s[e]=!s[e],this.setState({showDeleteComment:s,showEdit:{},showMenu:{}})},this.deleteComment=async function(t){const{id:s}=t.target.closest("button").dataset,{story:o}=e.props,{storyStore:a}=e.props.stores;await a.deleteCommentStory({id:o.id,commentId:s}),e.setState({commentEditText:"",showDeleteComment:{},showEdit:{},showMenu:{}})},this.deleteCommentReply=async function(t){const{id:s,commentid:o}=t.target.closest("button").dataset,{story:a}=e.props,{storyStore:i}=e.props.stores;await i.deleteCommentReplyStory({id:a.id,commentId:o,replyId:s}),e.setState({commentEditText:"",showDeleteComment:{},showEdit:{},showMenu:{}})},this.saveComment=async function(t){const{id:s}=t.target.closest("button").dataset,{commentEditText:o}=e.state,{story:a}=e.props,{storyStore:i}=e.props.stores;await i.editCommentStory({id:a.id,commentId:s,comment:o}),e.setState({commentEditText:"",showDeleteComment:{},showEdit:{},showMenu:{}})},this.saveCommentReply=async function(t){const{id:s,commentid:o}=t.target.closest("button").dataset,{commentEditText:a}=e.state,{story:i}=e.props,{storyStore:l}=e.props.stores;await l.editCommentReplyStory({id:i.id,commentId:o,replyId:s,comment:a}),e.setState({commentEditText:"",showDeleteComment:{},showEdit:{},showMenu:{}})},this.viewImage=t=>{const{id:e,idx:s}=t.target.closest("img").dataset,{viewImageIdx:o}=this.state;o[e]=s,this.setState({viewImageIdx:o})},this.translate=async function(t){t.preventDefault(),t.stopPropagation();const{replyid:s,commentid:o}=t.target.closest("button").dataset,{story:a}=e.props,{userStore:i,storyStore:l}=e.props.stores,{user:n}=i,{showOriginal:c={},translatedText:r={}}=e.state,h=`${o}${s?"-"+s:""}`;c[h]=0,r[h]=s?await l.translateCommentReply({commentid:o,replyid:s,story:a,user:n}):await l.translateComment({commentid:o,story:a,user:n}),e.setState({showOriginal:c,translatedText:r})},this.showOriginal=t=>{const{replyid:e,commentid:s}=t.target.closest("button").dataset;t.preventDefault(),t.stopPropagation();const{showOriginal:o={}}=this.state;o[`${s}${e?"-"+e:""}`]=1,this.setState({showOriginal:o})},this.state=a(a({},g),{},{showAllComments:t.showAllComments}),this.inputRef={}}render(){const{showAddComment:e,showAllComments:s,showAllReplies:o,viewImageIdx:a,showMenu:i={},showEdit:l={},showDeleteComment:r={},commentEditText:b,likeComment:g,showOriginal:j={},translatedText:f={}}=this.state,{story:y,callback:v=(()=>{}),initCall:w=(()=>{}),compact:x=!1}=this.props,{userStore:k,storyStore:S}=this.props.stores,{user:C}=k,{language:I="en"}=C;let T,D=[],P=0,R=0;return y.comments&&(P=y.comments.length,s?D=y.comments:(T=x?0:2,D=y.comments.slice(Math.max(P-T,0))),R=D.length),Object(n.h)("div",null,y&&c.a.isArray(D)&&D.reverse().map(s=>{const{user:x={}}=s,k=S.findPublicTeamByMembers(x.id),D=O.a.displayNameShort(x),P=O.a.displayName(x),R=x.image||(x.images?x.images[0]:void 0),F=s.likes&&s.likes.findIndex(t=>t.user===C.id)>-1;let E=[],L=0,A=0;s.comments&&(L=s.comments.length,E=o[s.id]?s.comments:s.comments.slice(0,T),A=E.length);const N=[];if(s.images){const t=Object(h.i)(s.images);N.push(...t)}const U=a[s.id]?a[s.id]:0,M=N&&N[U]?N[U]:null,{currentLocationGeocode:$={}}=s,V=S.getCommentTranslations({story:y,commentid:s.id,targetLang:I})||f[s.id];let _=V||s.comment;return j[s.id]&&(_=s.comment),Object(n.h)("div",{class:"row"},Object(n.h)("div",{class:"col-11 offset-1 d-flex mb-2 position-relative"},Object(n.h)("div",{class:"text-center border rounded-circle imageRounded imageRoundedSmall",style:(R?`background-image: url("${R.s3SmallLink}"); background-size: cover;`:"")+" border-width: 3px !important;"},!x.image&&Object(n.h)("span",{class:"font-weight-lighter",style:"font-size: 15px;"},D)),Object(n.h)("div",{class:"flex-grow-1 pl-3 pt-0",style:"line-height: 1.2em;"},Object(n.h)("div",{class:"bg-light p-2 rounded rounded-lg position-relative"},C.id===x.id&&Object(n.h)(t,null,Object(n.h)("span",{class:"float-right font-weight-lighter text-muted"},Object(n.h)("i",{class:"fas fa-ellipsis-h",onClick:this.toggleMenu,"data-id":s.id}))),i[s.id]&&Object(n.h)(t,null,Object(n.h)("div",{class:"position-absolute bg-white p-2 border rounded rounded-lg shadow-sm",style:"top: 30px; right: 10px; width: 60%; z-index: 999999;"},Object(n.h)("button",{class:"btn btn-link btn-block text-left",onClick:this.toggleEdit,"data-id":s.id,"data-comment":s.comment},Object(n.h)("i",{class:"fas fa-edit"})," Edit"),Object(n.h)("hr",null),Object(n.h)("button",{class:"btn btn-link btn-block text-left",onClick:this.toggleDeleteComment,"data-id":s.id},Object(n.h)("i",{class:"fas fa-trash-alt"})," Delete"))),Object(n.h)("div",null,Object(n.h)("span",{style:"font-size: 0.95em;"},Object(n.h)("h5",{class:"font-weight-bold mb-2",style:"font-size: 1.0em;"},x.uuidv4&&x.uuidv4!==C.uuidv4?Object(n.h)(t,null,Object(n.h)("a",{href:"/inbox/"+x.uuidv4},P)):Object(n.h)(t,null,P),k&&k.length>0&&Object(n.h)(t,null,Object(n.h)("span",{class:"font-weight-lighter text-muted ml-1"},k.filter(t=>1===t.public).slice(0,1).map(e=>Object(n.h)(t,null,"- ",Object(n.h)("a",{href:"/teams/public/"+e.uuidv4},e.name)))))),l[s.id]?Object(n.h)(t,null,Object(n.h)("div",{class:"d-flex bd-highlight"},Object(n.h)("div",{class:"p-0 w-100 bd-highlight"},Object(n.h)("label",{class:"sr-only",for:"inlineFormInput"},Object(n.h)(d.c,{id:"comments.comment"},"Kommentar")),Object(n.h)("div",{class:"border rounded rounded-lg position-relative"},Object(n.h)(d.b,null,Object(n.h)("textarea",{class:"form-control-plaintext px-2",type:"text",placeholder:Object(n.h)(d.c,{id:"comments.write-comment"},"Skriv en kommentar..."),onInput:Object(u.a)(this,"commentEditText"),onKeyUp:O.a.resizeTextarea,onFocus:O.a.resizeTextarea,style:"height: 2.3em;",value:b})))),Object(n.h)("div",{class:"p-0 pl-2 flex-shrink-1 bd-highlight"},Object(n.h)("button",{type:"button",class:"btn btn-primary mb-2",onClick:this.saveComment,"data-id":s.id},Object(n.h)("i",{class:"fas fa-paper-plane"}))))):Object(n.h)(t,null,Object(n.h)(m.a,{markdown:O.a.replaceImages(_,s.images,I),markdownOpts:O.a.getMarkdownOptions()})),r[s.id]&&Object(n.h)("div",{class:"clearfix mt-3 mb-3"},Object(n.h)("button",{class:"btn btn-danger float-left",onClick:this.deleteComment,"data-id":s.id},Object(n.h)("i",{class:"fas fa-trash-alt"})," Delete"),Object(n.h)("button",{class:"btn btn-secondary float-right",onClick:this.toggleDeleteComment,"data-id":s.id},Object(n.h)("i",{class:"fas fa-times-circle"})," Cancel")))),Object(n.h)("div",null,Object(n.h)("div",{class:"container-fluid px-3 mt-1"},M&&Object(n.h)("div",{class:"clearfix row position-relative"},Object(n.h)("div",{class:"commentContainer col-12 px-0 overflow-hidden",style:"max-height: 60vh;",onDblclick:this.addLikeComment,"data-id":s.id},Object(n.h)("img",{loading:"lazy",class:"img-fluid",style:"min-width: 100px;",src:M.s3LargeLink})),g[s.id]&&Object(n.h)("span",{class:"likeHeart position-absolute text-white display-1",style:"top: calc(50% - 50px); left: calc(50% - 50px); width: 100px; height: 100px;"},Object(n.h)("i",{class:"fas fa-heart likeStory"}))),N&&N.length>1&&Object(n.h)("div",{class:"clearfix d-flex flex-wrap row"},c.a.isArray(N)&&N.map((e,o)=>Object(n.h)(t,null,Object(n.h)("div",{class:"col px-0 overflow-hidden",style:"max-height: 100px; min-width: 100px;"},Object(n.h)("img",{loading:"lazy",class:"img-fluid border",style:"min-width: 100px;",src:e.s3SmallLink,onClick:this.viewImage,"data-id":s.id,"data-idx":o})))))))),Object(n.h)("small",null,Object(n.h)("button",{class:"commentContainer btn btn-sm btn-link py-0 "+(F?"text-primary":""),onClick:this.addLikeComment,"data-id":s.id,disabled:F},F?Object(n.h)(d.c,{id:"comments.has-liked"},"Liked"):Object(n.h)(d.c,{id:"comments.like"},"Lik")),"-",Object(n.h)("button",{class:"btn btn-sm btn-link py-0",onClick:this.replyComment,"data-id":s.id},Object(n.h)(d.c,{id:"comments.comment-add"},"Kommentar")),s.language!==I&&Object(n.h)(t,null,"-",!j[s.id]&&V?Object(n.h)(t,null,Object(n.h)("button",{type:"button",class:"btn btn-sm btn-link","data-commentid":s.id,onClick:this.showOriginal},Object(n.h)("i",{class:"fas fa-cog"}),"  ",Object(n.h)(d.c,{id:"home.translate-show-original"},"Show original"))):Object(n.h)(t,null,Object(n.h)("button",{type:"button",class:"btn btn-sm btn-link",onClick:this.translate,"data-commentid":s.id},Object(n.h)("i",{class:"fas fa-cog"})," ",Object(n.h)(d.c,{id:"home.translate-to"},"See translation")))),"-",Object(n.h)("button",{class:"btn btn-sm btn-link py-0 disabled"},c.a.formatDistance(s.createdDate,new Date,{locale:"no-NB"}),s.updatedDate&&Object(n.h)(t,null,Object(n.h)("span",{class:"font-weight-light ml-2"},"(Edited ",c.a.formatDistance(s.updatedDate,new Date,{locale:"no-NB"}),")"))))),s.likes&&s.likes.length>0&&Object(n.h)("small",{class:"position-absolute bg-light shadow-sm rounded-lg py-0 px-1",style:"bottom: 20px; right: 15px;"},Object(n.h)("i",{class:"fas fa-thumbs-up text-primary"})," ",s.likes.length)),Object(n.h)("div",{class:"col-10 offset-2 mb-2"},s&&c.a.isArray(E)&&E.map(e=>{const{user:o={}}=e,a=S.findPublicTeamByMembers(o.id),h=O.a.displayNameShort(o),p=O.a.displayName(o),g=o.image||(o.images?o.images[0]:void 0),v=e.likes&&e.likes.findIndex(t=>t.user===C.id)>-1,{currentLocationGeocode:w={}}=e,x=S.getCommentReplyTranslations({story:y,commentid:s.id,replyid:e.id,targetLang:I})||f[`${s.id}-${e.id}`];let k=x||e.comment;return j[`${s.id}-${e.id}`]&&(k=e.comment),Object(n.h)("div",{class:"row"},Object(n.h)("div",{class:"col-12 d-flex mb-2 position-relative"},Object(n.h)("div",{class:"text-center border rounded-circle imageRounded imageRoundedSmall",style:(g?`background-image: url("${g.s3SmallLink}"); background-size: cover;`:"")+" border-width: 3px !important;"},!o.image&&Object(n.h)("span",{class:"font-weight-lighter",style:"font-size: 15px;"},h)),Object(n.h)("div",{class:"flex-grow-1 pl-3 pt-0",style:"line-height: 1.2em;"},Object(n.h)("div",{class:"bg-light p-2 rounded-lg position-relative"},C.id===o.id&&Object(n.h)(t,null,Object(n.h)("span",{class:"float-right font-weight-lighter text-muted"},Object(n.h)("i",{class:"fas fa-ellipsis-h",onClick:this.toggleMenu,"data-id":e.id}))),i[e.id]&&Object(n.h)(t,null,Object(n.h)("div",{class:"position-absolute bg-white p-2 border rounded rounded-lg shadow-sm",style:"top: 30px; right: 10px; width: 60%; z-index: 999999;"},Object(n.h)("button",{class:"btn btn-link btn-block text-left",onClick:this.toggleEdit,"data-id":e.id,"data-comment":e.comment},Object(n.h)("i",{class:"fas fa-edit"})," Edit"),Object(n.h)("hr",null),Object(n.h)("button",{class:"btn btn-link btn-block text-left",onClick:this.toggleDeleteComment,"data-id":e.id},Object(n.h)("i",{class:"fas fa-trash-alt"})," Delete"))),Object(n.h)("span",{style:"font-size: 0.95em;"},Object(n.h)("h5",{class:"font-weight-bold mb-2",style:"font-size: 1.0em;"},p,a&&a.length>0&&Object(n.h)(t,null,Object(n.h)("span",{class:"font-weight-lighter text-muted ml-2"},a.filter(t=>1===t.public).slice(0,1).map(e=>Object(n.h)(t,null,"- ",Object(n.h)("a",{href:"/teams/public/"+e.uuidv4,class:"mr-2"}," ",e.name)))))),l[e.id]?Object(n.h)(t,null,Object(n.h)("div",{class:"d-flex bd-highlight"},Object(n.h)("div",{class:"p-0 w-100 bd-highlight"},Object(n.h)("label",{class:"sr-only",for:"inlineFormInput"},Object(n.h)(d.c,{id:"comments.comment"},"Kommentar")),Object(n.h)("div",{class:"border rounded rounded-lg position-relative"},Object(n.h)(d.b,null,Object(n.h)("textarea",{class:"form-control-plaintext px-2",type:"text",placeholder:Object(n.h)(d.c,{id:"comments.write-comment"},"Skriv en kommentar..."),onInput:Object(u.a)(this,"commentEditText"),onKeyUp:O.a.resizeTextarea,onFocus:O.a.resizeTextarea,style:"height: 2.3em;",value:b})))),Object(n.h)("div",{class:"p-0 pl-2 flex-shrink-1 bd-highlight"},Object(n.h)("button",{type:"button",class:"btn btn-primary mb-2",onClick:this.saveCommentReply,"data-commentid":s.id,"data-id":e.id},Object(n.h)("i",{class:"fas fa-paper-plane"}))))):Object(n.h)(t,null,Object(n.h)(m.a,{markdown:O.a.replaceImages(k,e.images,I),markdownOpts:O.a.getMarkdownOptions()})),r[e.id]&&Object(n.h)("div",{class:"clearfix mt-3 mb-3"},Object(n.h)("button",{class:"btn btn-danger float-left",onClick:this.deleteCommentReply,"data-id":e.id,"data-commentid":s.id},Object(n.h)("i",{class:"fas fa-trash-alt"})," Delete"),Object(n.h)("button",{class:"btn btn-secondary float-right",onClick:this.toggleDeleteComment,"data-id":e.id},Object(n.h)("i",{class:"fas fa-times-circle"})," Cancel")))),Object(n.h)("small",null,Object(n.h)("button",{class:"replyContainer btn btn-sm btn-link py-0 "+(v?"text-primary":""),onClick:this.likeReply,"data-comment":s.id,"data-id":e.id,disabled:v},v?Object(n.h)(d.c,{id:"comments.has-liked"},"Liked"):Object(n.h)(d.c,{id:"comments.like"},"Lik")),"-",Object(n.h)("button",{class:"btn btn-sm btn-link py-0",onClick:this.replyComment,"data-id":s.id},Object(n.h)(d.c,{id:"comments.comment-add"},"Kommentar")),e.language!==I&&Object(n.h)(t,null,"-",!j[`${s.id}-${e.id}`]&&x?Object(n.h)(t,null,Object(n.h)("button",{type:"button",class:"btn btn-sm btn-link","data-commentid":s.id,"data-replyid":e.id,onClick:this.showOriginal},Object(n.h)("i",{class:"fas fa-cog"}),"  ",Object(n.h)(d.c,{id:"home.translate-show-original"},"Show original"))):Object(n.h)(t,null,Object(n.h)("button",{type:"button",class:"btn btn-sm btn-link",onClick:this.translate,"data-commentid":s.id,"data-replyid":e.id},Object(n.h)("i",{class:"fas fa-cog"})," ",Object(n.h)(d.c,{id:"home.translate-to"},"See translation")))),"-",Object(n.h)("button",{class:"btn btn-sm btn-link py-0 disabled"},c.a.formatDistance(e.createdDate,new Date,{locale:"no-NB"}),e.updatedDate&&Object(n.h)(t,null,Object(n.h)("span",{class:"font-weight-light ml-2"},"(Edited ",c.a.formatDistance(e.updatedDate,new Date,{locale:"no-NB"}),")"))))),e.likes&&Object(n.h)("small",{class:"position-absolute bg-light shadow-sm rounded-lg py-0 px-1",style:"bottom: 20px; right: 15px;"},Object(n.h)("i",{class:"fas fa-thumbs-up text-primary"})," ",e.likes.length)))}),L-A>0&&Object(n.h)("div",null,Object(n.h)("button",{class:"btn btn-sm btn-link py-0",onClick:this.toggleReplies,"data-id":s.id},Object(n.h)(d.c,{id:"comments.show-more",fields:{more:L-A}},"Vis ",L-A," flere kommentarer...")))),e[s.id]&&Object(n.h)("div",{class:"col-11 offset-1 d-flex mb-2 position-relative"},Object(n.h)(p.a,{stores:this.props.stores,story:y,initCall:w,callback:v,commentId:s.id,inputRef:t=>this.inputRef[s.id]=t,inputRefObject:this.inputRef,key:"story-commentreply-"+s.id})))}),P-R>0&&Object(n.h)("div",null,Object(n.h)("button",{class:"btn btn-sm btn-link py-0",onClick:this.toggleComments},Object(n.h)(d.c,{id:"comments.show-more",fields:{more:P-R}},"Vis ",P-R," flere kommentarer..."))),s&&Object(n.h)("div",null,Object(n.h)("button",{class:"btn btn-sm btn-link py-0",onClick:this.toggleComments},Object(n.h)(d.c,{id:"comments.hide-all-comments"},"Skjul alle kommentarene."))))}})||l;e.a=j}).call(this,s("hosL").Fragment)},ISGx:function(t,e,s){"use strict";(function(t){function o(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,o)}return s}function a(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?o(Object(s),!0).forEach((function(e){i(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):o(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}function i(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}var l,n=s("hosL"),c=s("Utv1"),r=s("/eY4"),h=s("cneo"),d=s("OhSV"),b=s("fh8t"),m=s.n(b),u=s("Y3FI"),p=s("s4FZ"),O=s("ZQlJ"),g=s("sqi2"),j=s("/922"),f=s("eQ6k"),y=s("+JSK"),v=s("vY+r"),w=s("nHdA"),x=s("irB3"),k=s("UwwE"),S=s("8Lgr"),C=s("QkTp"),I=s("ZOvn");const T={showAddComment:{},likeWorkout:{},idxSuggestion:0,idxAd:4,limit:15,offset:0,hasFollowSugguestions:!1,hasAd:!1,sessionid:(new Date).getTime()};let D=Object(r.a)(l=class extends n.Component{constructor(t){var e;super(t),e=this,this.toggleDate=t=>{t.stopPropagation(),t.preventDefault();const{showDate:e}=this.state;this.setState({showDate:!e})},this.likeWorkout=async function(t){const s=parseInt(t.target.closest(".imageContainer").dataset.id,10),{workoutStore:o}=e.props.stores,{likeWorkout:a}=e.state;a[s]=!0,e.setState({likeWorkout:a}),setTimeout(()=>{const{likeWorkout:t}=e.state;delete t[s],e.setState({likeWorkout:t})},1200);const i=await o.likeWorkout({id:s});i&&200===i.status&&e.addLikeToFeed(s,i.data)},this.addCommentToFeed=({type:t,workout:e,response:s,commentId:o,replyId:a})=>{const{holdingStore:i="team"}=this.props;if("team"===i){const{teamStore:i}=this.props.stores;switch(t){case"likeComment":i.addLikeToComment({id:e.id,data:s.data,commentId:o});break;case"likeReply":i.addLikeToCommentReply({id:e.id,data:s.data,commentId:o,replyId:a});break;default:o?i.addCommentToWorkoutComment({id:e.id,data:s.data,commentId:o}):i.addCommentToWorkout({id:e.id,data:s.data})}}else if("story"===i){const{storyStore:i}=this.props.stores;switch(t){case"likeComment":i.workoutsAddLikeToComment({id:e.id,data:s.data,commentId:o});break;case"likeReply":i.workoutsAddLikeToCommentReply({id:e.id,data:s.data,commentId:o,replyId:a});break;default:o?i.workoutsAddCommentToWorkoutComment({id:e.id,data:s.data,commentId:o}):i.workoutsAddCommentToWorkout({id:e.id,data:s.data})}}},this.addLikeToFeed=(t,e)=>{const{holdingStore:s="team"}=this.props;if("team"===s){const{teamStore:s}=this.props.stores;s.addLikeToWorkout({id:t,data:e})}else if("story"===s){const{storyStore:s}=this.props.stores;s.workoutsAddLikeToWorkout({id:t,data:e})}},this.toggleAddComment=t=>{const e=t.target.closest("button").dataset.id,{showAddComment:s}=this.state;s[e]?delete s[e]:s[e]=!0,this.setState({showAddComment:s},()=>{this.inputRef[e]&&this.inputRef[e].focus()})},this.shareLink=t=>{const{url:e,title:s,text:o}=t.target.closest("button").dataset,{appState:a}=this.props.stores;a.shareUrl({url:e,title:s,text:o})},this.showWorkoutDetail=t=>{if("a"===t.target.localName)return!1;const e=t.target.closest("#workoutDetail");if(e){const{id:t}=e.dataset;t&&(console.log({target:e,id:t}),Object(u.route)("/workouts/public/"+t))}},this.translate=async function(t){t.preventDefault(),t.stopPropagation();const{feed:s={}}=e.props,{userStore:o,teamStore:a}=e.props.stores,{user:i}=o,l=await a.translate({object:s,user:i,field:"name"});let n;s.comment&&(n=await a.translate({object:s,user:i,field:"comment"})),e.setState({showOriginal:0,translatedTextName:l,translatedTextComment:n})},this.showOriginal=t=>{t.preventDefault(),t.stopPropagation(),this.setState({showOriginal:1})},this.state=a({},T),this.inputRef={},this.containerRef=null}render(){const{feed:e,onTeamClick:s=(()=>{}),onUserClick:o=(()=>{}),onDogClick:i=(()=>{}),holdingStore:l="team"}=this.props,{showAddComment:r,showDate:b,likeWorkout:u,showOriginal:T,translatedTextName:D,translatedTextComment:P}=this.state,{teamStore:R,storyStore:F,userStore:E,appState:L}=this.props.stores,{user:A,isAdmin:N}=E,{language:U="en"}=A,{hasShareApi:M}=L;let $,V={},_={};if("team"===l){V=R.findPublicTeam(e.team),_=R.findPublicUser(e.user)||{};const{publicDogs:t}=R;$=t}else if("story"===l){V=F.findPublicTeam(e.team),_=F.findPublicUser(e.user)||{};const{publicDogs:t}=F;$=t}E.findTeamAmbition({ambition:V.ambitions,language:U});const z=E.findTeamType({type:V.type,language:U}),B=!(!V||!V.members)&&V.members.some(t=>t===A.id),W=I.a.getImage({user:_,team:V,object:e,priority:"user"}),{likes:q,comments:K}=e,Y=e.likes&&e.likes.findIndex(t=>t.user===A.id)>-1,H=V&&V.followers?V.followers.length:0,Z=V.members&&V.members.indexOf(A.id)>-1,G=V&&V.followers&&V.followers.indexOf(A.id)>-1,Q=V.followRequests&&V.followRequests.findIndex(t=>t.id===A.id)>-1,J=E.findEquipment({equipment:e.equipment,language:U}),X=E.findEquipment({equipment:e.equipment,field:"icon"}),{gpxInfo:tt={}}=e;let et,st,ot,at;_&&(et=I.a.displayNameShort(_),st=I.a.displayName(_),ot=I.a.displayName(_),_.settings&&_.uuidv4!==A.uuidv4&&(at=_.settings.hideProfile?null:"/inbox/"+_.uuidv4));const it=[];if(e.mapImage&&it.push(a(a({},e.mapImage),{},{type:"map"})),e.images){const t=Object(h.i)(e.images);it.push(...t)}const{currentLocationGeocode:lt={},yrWeather:nt=[]}=e,ct=I.a.getViews(e.statistics),rt=I.a.getAdminData(e.statistics);if(!V||!V.name)return"";const ht=I.a.getTranslation({object:e,targetLang:U,field:"name"})||D;let dt=ht||e.name;let bt=I.a.getTranslation({object:e,targetLang:U,field:"comment"})||P||e.comment;return T&&(dt=e.name,bt=e.comment),Object(n.h)(t,null,Object(n.h)("div",{class:"d-flex position-relative"},Object(n.h)("div",{class:"text-center"},Object(n.h)("div",{class:"position-relative text-center border rounded-circle imageRounded imageRoundedMedium",style:W?`background-image: url("${W}"); background-size: cover;`:""},!W&&Object(n.h)("i",{class:"fas fa-users text-muted mt-2",style:"font-size: 20px;"}))),Object(n.h)("div",{class:"flex-grow-1 pl-3 text-overflow",style:"line-height: 1.2em;"},Object(n.h)("span",{class:"badge badge-pill badge-secondary float-right"},z),Object(n.h)("h5",{class:"mb-1 position-relative",style:"line-height: 1.0em;"},V.public?Object(n.h)(t,null,Object(n.h)("a",{href:"/teams/public/"+V.uuidv4,onClick:t=>s(t,V.uuidv4),class:"stretched-link"},V.name)):Object(n.h)(t,null,V.name)),Object(n.h)("div",{class:"mb-2"},e.date&&Object(n.h)("small",{class:"text-muted",onClick:this.toggleDate},b?c.a.formatDate(e.date,{locale:"no-NB",hour12:!1,hour:"2-digit",minute:"2-digit"}):c.a.formatDistance(e.date,new Date,{locale:"no-NB"})),1===e.public?Object(n.h)(t,null,Object(n.h)("small",{class:"ml-2 text-muted"},Object(n.h)("i",{class:"fas fa-globe-europe"}))):Object(n.h)(t,null,Object(n.h)("small",{class:"ml-2 text-muted"},Object(n.h)("i",{class:"fas fa-users"})," (",c.a.format(H),")")),ot&&Object(n.h)(t,null,Object(n.h)("small",{class:"ml-2 text-muted"},at?Object(n.h)(t,null,Object(n.h)("i",{class:"fas fa-user"})," ",Object(n.h)("a",{href:at},ot)):Object(n.h)(t,null,Object(n.h)("i",{class:"fas fa-user"})," ",ot))),Object(n.h)("small",{class:"text-muted"},e.equipment>0&&Object(n.h)(t,null,Object(n.h)("i",{class:X+" ml-2"})," ",J),e.dogs>0&&Object(n.h)(t,null,Object(n.h)("i",{class:"fas fa-dog ml-2"})," ",e.dogs.length),e.track>0&&Object(n.h)(t,null,Object(n.h)("i",{class:`fas fa-map-marked text-${e.track>0?"success":"danger"} ml-2`})),e.sledWeight>0&&Object(n.h)(t,null,Object(n.h)("i",{class:"fas fa-sleigh ml-2"})," ",Object(n.h)(k.a,{stores:this.props.stores,value:e.sledWeight})),0!==e.temperature&&Object(n.h)(t,null,Object(n.h)("i",{class:"fas fa-temperature-low ml-2"})," ",Object(n.h)(C.a,{stores:this.props.stores,value:e.temperature})),e.dogs&&e.dogs.length>0&&Object(n.h)(t,null,Object(n.h)("i",{class:"fas fa-dog ml-2"})," ",c.a.format(e.dogs.length,0)),lt&&lt.formattedCounty&&Object(n.h)(t,null,Object(n.h)("i",{class:"fas fa-map-marker-alt ml-2"})," ",lt.formattedCounty),e.moonIllumination&&e.moonIllumination.phaseIcon&&Object(n.h)("span",{class:"float-right ml-2"},e.moonIllumination.phaseIcon))),N&&Object(n.h)("div",{class:"d-flex flex-row flex-nowrap bg-light border-top border-bottom py-2",style:"overflow: auto;"},Object(n.h)("small",{class:"text-muted mr-2"},"Adm:"),lt&&lt.formatted_address&&Object(n.h)(t,null,Object(n.h)("small",{class:"text-muted"},Object(n.h)("i",{class:"fas fa-map-marker-alt"})," ",lt.formatted_address)),_.deviceInfo&&Object(n.h)(t,null,Object(n.h)("span",{class:"badge badge-secondary ml-1 float-right font-weight-light"},["platform","manufacturer","model"].map(e=>Object(n.h)(t,null,Object(n.h)("span",{class:"ml-1 text-white"},_.deviceInfo[e]))))),rt&&Object(n.h)(t,null,Object(n.h)("small",{class:"ml-2 text-muted"},"V: ",rt.count),Object(n.h)("small",{class:"ml-2 text-muted"},"R: ",rt.ranking," ",c.a.isNumber(rt.rankingTrend)&&Object(n.h)(t,null,Object(n.h)("i",{class:I.a.getClassForTrend(rt.rankingTrend)}))),Object(n.h)("small",{class:"ml-2 text-muted"},"D: ",c.a.format(rt.durationAvg/1e3,1),"s ",c.a.isNumber(rt.durationAvgTrend)&&Object(n.h)(t,null,Object(n.h)("i",{class:I.a.getClassForTrend(rt.durationAvgTrend)}))),e.statisticsCurrent&&e.statisticsCurrent.totalInteractions>0&&Object(n.h)("small",{class:"ml-2 text-muted"},"S: ",c.a.format(e.statisticsCurrent.totalInteractions,0)),e.shadowTags&&e.shadowTags.map(e=>Object(n.h)(t,null,Object(n.h)("span",{class:"badge badge-secondary ml-2 float-right font-weight-light"},e))))))),Object(n.h)("div",{class:"container-fluid px-0 mt-1"},Object(n.h)("div",{class:"row"},Object(n.h)(p.a,{stores:this.props.stores,images:it,id:e.id,dblClick:this.likeWorkout,likeRef:u}))),e.dogs&&e.dogs.length>0&&Object(n.h)("div",{class:"container-fluid px-0 mt-1"},Object(n.h)("div",{class:"row pt-2"},Object(n.h)(O.a,{stores:this.props.stores,dogs:e.dogs,allDogs:$,onDogClick:i}))),Object(n.h)("div",{class:"d-flex justify-content-between bg-light rounded-lg px-2"},e.distanceKm>0&&Object(n.h)("div",{class:"mr-2 text-center"},Object(n.h)("div",{class:"text-overflow text-muted"},Object(n.h)("small",null,Object(n.h)("i",{class:"fas fa-road"})," ",Object(n.h)(d.c,{id:"workout.calendar.distance"},"Distanse"))),Object(n.h)("div",{class:"text-overflow font-weight-light",style:"font-size: 1.2em;"},Object(n.h)(S.a,{stores:this.props.stores,value:e.distanceKm}))),e.elevation>0&&Object(n.h)("div",{class:"mr-2 text-center"},Object(n.h)("div",{class:"text-overflow text-muted"},Object(n.h)("small",null,Object(n.h)("i",{class:"fas fa-mountain"})," ",Object(n.h)(d.c,{id:"workout.calendar.ascend"},"HÃ¸ydemeter"))),Object(n.h)("div",{class:"text-overflow font-weight-light",style:"font-size: 1.2em;"},Object(n.h)(x.a,{stores:this.props.stores,value:e.elevation}))),e.duration>0&&Object(n.h)("div",{class:"mr-2 text-center"},Object(n.h)("div",{class:"text-overflow text-muted"},Object(n.h)("small",null,Object(n.h)("i",{class:"fas fa-clock"})," ",Object(n.h)(d.c,{id:"workout.calendar.duration"},"Varighet"))),Object(n.h)("div",{class:"text-overflow font-weight-light",style:"font-size: 1.2em;"},c.a.secToHms(e.duration,!0))),e.speedAvg>0&&Object(n.h)("div",{class:"text-center"},Object(n.h)("div",{class:"text-overflow text-muted"},Object(n.h)("small",null,Object(n.h)("i",{class:"fas fa-tachometer-alt"})," ",Object(n.h)(d.c,{id:"workout.calendar.avg-speed"},"Snittfart"))),Object(n.h)("div",{class:"text-overflow font-weight-light",style:"font-size: 1.2em;"},tt&&tt.avgGpsMovingSpeed>0?Object(n.h)(t,null,Object(n.h)(w.a,{stores:this.props.stores,value:3.6*tt.avgGpsMovingSpeed})):Object(n.h)(t,null,Object(n.h)(w.a,{stores:this.props.stores,value:e.speedAvg}))))),Object(n.h)("div",{class:"row mt-2"},Object(n.h)("div",{id:"workoutDetail",class:"clearfix col-12 font-weight-bold",style:"font-size: 1.2em;",onClick:this.showWorkoutDetail,"data-id":e.uuidv4},Object(n.h)(m.a,{markdown:I.a.replaceImages(dt,e.images,U),markdownOpts:I.a.getMarkdownOptions()})),Object(n.h)("div",{class:"clearfix col-12"},Object(n.h)(m.a,{markdown:I.a.replaceImages(bt,e.images,U),markdownOpts:I.a.getMarkdownOptions()})),e.language!==U&&Object(n.h)(t,null,!T&&ht?Object(n.h)(t,null,Object(n.h)("button",{type:"button",class:"btn btn-sm btn-link text-muted",onClick:this.showOriginal},Object(n.h)("i",{class:"fas fa-cog"}),"  ",Object(n.h)(d.c,{id:"home.translate-show-original"},"Show original"))):Object(n.h)(t,null,Object(n.h)("button",{type:"button",class:"btn btn-sm btn-link text-muted",onClick:this.translate},Object(n.h)("i",{class:"fas fa-cog"})," ",Object(n.h)(d.c,{id:"home.translate-to"},"See translation"))))),Object(n.h)("div",{class:"mt-2"},Object(n.h)(y.a,{stores:this.props.stores,likes:q,comments:K,type:"team",onTeamClick:s,onUserClick:o})),!Z&&!G&&!Q&&Object(n.h)("div",{class:"clearfix mb-2"},Object(n.h)(f.a,{stores:this.props.stores,team:V,buttonOnly:!0})),Object(n.h)("div",null,Object(n.h)("div",{class:"row"},Object(n.h)("div",{class:"col text-center"},Object(n.h)("button",{type:"button",class:`imageContainer btn btn-sm btn-outline-${Y?"primary":"secondary"} btn-lg btn-block ${Y?"text-primary":""} text-overflow`,"data-id":e.id,onClick:this.likeWorkout},Object(n.h)("i",{class:(Y?"text-primary fas":"far")+" fa-thumbs-up"})," ",Object(n.h)(d.c,{id:"comments.like"},"Lik"))),Object(n.h)("div",{class:"col text-center"},Object(n.h)("button",{type:"button",class:"btn btn-sm btn-outline-secondary btn-lg btn-block text-overflow","data-id":e.id,onClick:this.toggleAddComment},Object(n.h)("i",{class:"fas fa-comment"})," ",Object(n.h)(d.c,{id:"comments.comment-add"},"Kommentar"))),M?Object(n.h)(t,null,Object(n.h)("div",{class:"col text-center"},Object(n.h)("button",{class:"btn btn-sm btn-outline-secondary btn-lg btn-block text-overflow",onClick:this.shareLink,"data-url":"https://themusher.app/share/workout/"+e.uuidv4,"data-title":"title: "+e.title},Object(n.h)("i",{class:"fas fa-share"})," ",Object(n.h)(d.c,{id:"story.share"},"Del")))):Object(n.h)(t,null,Object(n.h)("div",{class:"col text-center"},Object(n.h)("a",{class:"btn btn-sm btn-outline-secondary btn-lg btn-block text-overflow",href:"https://themusher.app/share/workout/"+e.uuidv4,target:"_blank",rel:"noreferrer","data-native":!0},Object(n.h)("i",{class:"fas fa-share"})," ",Object(n.h)(d.c,{id:"story.share"},"Del")))))),ct>0&&Object(n.h)(t,null,Object(n.h)("div",{class:"mt-2"},Object(n.h)(v.a,{stores:this.props.stores,views:ct,object:e,type:"team",isTeamAdmin:B,isAdmin:N,onTeamClick:s,onUserClick:o}))),Object(n.h)("div",{class:"mt-2"},r[e.id]&&Object(n.h)(j.a,{stores:this.props.stores,workout:e,inputRef:t=>this.inputRef[e.id]=t,inputRefObject:this.inputRef,col:"12",offset:"0",showAvatar:!0,extraClass:"px-0",callback:this.addCommentToFeed}),Object(n.h)(g.a,{stores:this.props.stores,workout:e,col:"12",offset:"0",compact:!1,callback:this.addCommentToFeed})))}})||l;e.a=D}).call(this,s("hosL").Fragment)},NMoA:function(t,e,s){"use strict";(function(t){function o(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,o)}return s}function a(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?o(Object(s),!0).forEach((function(e){i(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):o(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}function i(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}var l,n,c,r,h,d=s("hosL"),b=s("Utv1"),m=s("/eY4"),u=s("cneo"),p=s("OhSV"),O=s("fh8t"),g=s.n(O),j=s("go65"),f=s("Y3FI"),y=(s("X9Km"),s("1OK2"),s("B95u")),v=s("4QWe"),w=(s("NMoA"),s("P9Fo")),x=s("s4FZ"),k=s("+JSK"),S=s("vY+r"),C=s("eQ6k"),I=s("om2D"),T=s("ZOvn");const D={showAddComment:{},showTeamSetting:{},viewImageIdx:{},likeStory:{}};let P=Object(m.a)(l=class extends d.Component{constructor(t){var e;super(t),e=this,this.saveStory=async function(t){const{id:s}=t.target.closest("button").dataset,{storyBody:o}=e.state,{storyStore:a}=e.props.stores,{callback:i=(()=>!0)}=e.props;await a.saveField(parseInt(s,10),"body",o,!0),a.publicFeedUpdate(parseInt(s,10),"body",o),e.setState({storyBody:"",storyType:0}),i()},this.saveStoryField=async function(t){const{story:s}=e.props,{id:o}=s,{value:a,name:i}=t.target,{subfield:l,subvalue:n}=t.target.dataset,{sendButtonEnabled:c}=e.state;if(!c)return!1;const{storyStore:r}=e.props.stores;r.publicFeedUpdate(o,i,a),clearTimeout(e.updateTimer[i]),e.updateTimer[i]=setTimeout((async function(){e.doUpdateField(o,i,a,{query:{[l]:n}})}),1e3)},this.updateFieldValue=({id:t,field:s,value:o,skipTimer:a=!1})=>{const{story:i}=this.props,{storyStore:l}=this.props.stores;let n=o,c=o;"images"===s&&Array.isArray(i.images)&&Array.isArray(o)&&(c=[...i.images,...o]),l.updateField(t,s,c),l.publicFeedUpdate(t,s,c),a?this.doUpdateField(t,s,n):(clearTimeout(this.updateTimer[s]),this.updateTimer[s]=setTimeout((async function(){e.doUpdateField(t,s,n)}),500))},this.beforeImagesUploaded=()=>{this.setState({sendButtonEnabled:!1})},this.afterImagesUploaded=()=>{this.setState({sendButtonEnabled:!0})},this.removeImage=async function(t){const{storyStore:s}=e.props.stores,{story:o}=e.props;s.removeImage({id:o.id,name:t.target.parentElement.dataset.name||t.target.dataset.name})},this.handleImageErrored=t=>{const e=t.target;e.onerror=null,setTimeout(()=>{e.src+="?"+new Date},1e3)},this.updateTimer={},this.textareaRef=Object(d.createRef)(),this.state={sendButtonEnabled:!0,storyBody:t.story.body}}async doUpdateField(t,e,s,o={}){this.setState({sendButtonEnabled:!1});const{storyStore:i}=this.props.stores;await i.saveField(parseInt(t,10),e,s,!0,{query:a({},o.query)}),this.setState({sendButtonEnabled:!0})}componentDidMount(){this.textareaRef.current.focus()}render(){const{storyBody:e,storyType:s,sendButtonEnabled:o}=this.state,{userStore:a}=this.props.stores,{isAdmin:i}=a,{story:l}=this.props;return Object(d.h)(t,null,Object(d.h)("div",{class:"container-fluid px-0 mt-1"},Object(d.h)("div",{class:"row"},Object(d.h)("div",{class:"col-12 text-center mt-2"},Object(d.h)("div",{class:"container-fluid"},Object(d.h)("div",{class:"row d-flex align-items-end"},b.a.isArray(l.images)&&l.images.map((t,e)=>Object(d.h)("div",{class:"col-3 p-1"},Object(d.h)("img",{src:t.s3SmallLink,class:"img-fluid",onError:this.handleImageErrored}),Object(d.h)("button",{class:"btn btn-sm btn-link",onClick:this.removeImage,"data-name":t.name},Object(d.h)("i",{class:"fas fa-trash"})," Del"),Object(d.h)("small",null,Object(d.h)("input",{class:"form-control",type:"text",name:"images.title","data-subfield":"name","data-subvalue":l.images[e].name,onInput:this.saveStoryField,value:l.images[e].title})))))),Object(d.h)(I.a,{object:l,updateField:this.updateFieldValue,before:this.beforeImagesUploaded,after:this.afterImagesUploaded,autoOpen:!1}))),Object(d.h)("div",{class:"row"},Object(d.h)("div",{class:"col-12 mt-2"},Object(d.h)("label",null,Object(d.h)(p.c,{id:"story.content"},"Content")),Object(d.h)("div",{class:"border rounded rounded-lg position-relative"},Object(d.h)(p.b,null,Object(d.h)("textarea",{class:"form-control-plaintext px-2",type:"text",placeholder:Object(d.h)(p.c,{id:"story.add-content"},"Add your text here..."),onInput:Object(j.a)(this,"storyBody"),onFocus:T.a.resizeTextarea,style:"height: 2.3em;",value:e||l.body,ref:this.textareaRef}))))),Object(d.h)("div",{class:"row"},Object(d.h)("div",{class:"col-12 mt-2"},i&&Object(d.h)(t,null,Object(d.h)("div",{class:"col-12 mt-2"},Object(d.h)("div",{class:"form-group"},Object(d.h)("small",null,Object(d.h)("input",{type:"checkbox",id:"pinned-"+l.id,name:"pinned",onInput:this.saveStoryField,value:l.pinned?0:1,checked:l.pinned?1:0}),Object(d.h)("label",{class:"ml-2",for:"pinned-"+l.id},"Pinned to top."))))),i&&Object(d.h)(t,null,Object(d.h)("label",null,Object(d.h)(p.c,{id:"story.type"},"Type")),Object(d.h)("div",{class:"form-group"},Object(d.h)("small",null,Object(d.h)("select",{class:"custom-select custom-select-sm",id:l.id,name:"type",onInput:this.saveStoryField,value:s||l.type},Object(d.h)("option",{value:""},"-- ",Object(d.h)(p.c,{id:"story.type-choose"},"Velg type")," --"),Object(d.h)("option",{value:1,selected:1==l.type?"selected":""},"âœï¸ ",Object(d.h)(p.c,{id:"story.type-regular"},"Vanlig")),Object(d.h)("option",{value:2,selected:2==l.type?"selected":""},"ðŸš€ ",Object(d.h)(p.c,{id:"story.type-ad"},"Annonse")),Object(d.h)("option",{value:3,selected:3==l.type?"selected":""},"ðŸ“„ ",Object(d.h)(p.c,{id:"story.type-article"},"Artikkel")))))),l.type>=2&&Object(d.h)(t,null,Object(d.h)("label",null,Object(d.h)(p.c,{id:"story.url-text"},"URL text")),Object(d.h)("div",{class:"form-group"},Object(d.h)("small",null,Object(d.h)("input",{class:"form-control",type:"text",name:"urlText",onInput:this.saveStoryField,value:l.urlText}))),Object(d.h)("label",null,Object(d.h)(p.c,{id:"story.url"},"URL")),Object(d.h)("div",{class:"form-group"},Object(d.h)("small",null,Object(d.h)("input",{class:"form-control",type:"text",name:"url",onInput:this.saveStoryField,value:l.url})))),2===l.type&&Object(d.h)(t,null,Object(d.h)("label",null,Object(d.h)(p.c,{id:"story.code"},"Code")),Object(d.h)("div",{class:"form-group"},Object(d.h)("small",null,Object(d.h)("input",{class:"form-control",type:"text",name:"code",onInput:this.saveStoryField,value:l.code}))),Object(d.h)("label",null,Object(d.h)(p.c,{id:"story.country"},"Country")),Object(d.h)("div",{class:"form-group"},Object(d.h)("small",null,Object(d.h)("input",{class:"form-control",type:"text",name:"country",onInput:this.saveStoryField,value:l.country}))),Object(d.h)("label",null,Object(d.h)(p.c,{id:"story.region"},"Region")),Object(d.h)("div",{class:"form-group"},Object(d.h)("small",null,Object(d.h)("input",{class:"form-control",type:"text",name:"region",onInput:this.saveStoryField,value:l.region}))),Object(d.h)("label",null,Object(d.h)(p.c,{id:"story.currency"},"Currency")),Object(d.h)("div",{class:"form-group"},Object(d.h)("small",null,Object(d.h)("input",{class:"form-control",type:"text",name:"currency",onInput:this.saveStoryField,value:l.currency}))),Object(d.h)("label",null,Object(d.h)(p.c,{id:"story.price"},"Price")),Object(d.h)("div",{class:"form-group"},Object(d.h)("small",null,Object(d.h)("input",{class:"form-control",type:"text",name:"price",onInput:this.saveStoryField,value:l.price})))))),Object(d.h)("div",{class:"row"},Object(d.h)("div",{class:"col-12 mt-2"},Object(d.h)("button",{type:"button",class:`btn btn-block btn-${o?"primary":"secondary"} mb-2`,disabled:!o,onClick:this.saveStory,"data-id":l.id},Object(d.h)("i",{class:"fas fa-paper-plane"})," ",Object(d.h)(p.c,{id:"story.edit-save"},"Save changes"))))))}})||l,R=Object(m.a)(n=class extends d.Component{constructor(t){var e;super(t),e=this,this.viewImage=t=>{const{id:e,idx:s}=t.target.closest("img").dataset,{viewImageIdx:o}=this.state;o[e]=s,this.setState({viewImageIdx:o})},this.showStoryDetail=t=>{if("a"===t.target.localName)return!1;const{id:e}=t.target.closest("#storyDetail").dataset;e&&Object(f.route)("/stories/"+e)},this.translate=async function(t){t.preventDefault(),t.stopPropagation();const{story:s}=e.props,{userStore:o,storyStore:a}=e.props.stores,{user:i}=o,l=await a.translate({story:s,user:i});e.setState({showOriginal:0,translatedText:l})},this.showOriginal=t=>{t.preventDefault(),t.stopPropagation(),this.setState({showOriginal:1})},this.setSelectedImage=t=>{this.setState({selectedImageIdx:t})},this.state={viewImageIdx:{}}}render(){const{viewImageIdx:e,showOriginal:s,translatedText:o,selectedImageIdx:a=0}=this.state,{userStore:i}=this.props.stores,{story:l,likeStory:n,likeRef:c}=this.props,{user:r}=i,{language:h="en"}=r,b=[];if(l.images){const t=Object(u.i)(l.images);b.push(...t)}const m=T.a.getTranslation({object:l,targetLang:h,field:"body"})||o;let O=m||l.body;s&&(O=l.body);const{components:j=[],finalBody:f=""}=T.a.getInlineComponents(O||"");return Object(d.h)(t,null,Object(d.h)("div",{class:"container-fluid px-0 mt-1"},Object(d.h)("div",{class:"row"},Object(d.h)(x.a,{stores:this.props.stores,images:b,id:l.id,dblClick:n,likeRef:c,callback:this.setSelectedImage}))),Object(d.h)("div",{class:"row mt-2"},Object(d.h)("div",{class:"clearfix col-12 overflow-hidden",style:""+(l.offline?"text-decoration: line-through;":"")},Object(d.h)("div",{id:"storyDetail",onClick:this.showStoryDetail,"data-id":l.id},Object(d.h)(g.a,{markdown:T.a.replaceImages(f,l.images,h),markdownOpts:T.a.getMarkdownOptions()}),l.language!==h&&Object(d.h)(t,null,!s&&m?Object(d.h)(t,null,Object(d.h)("button",{type:"button",class:"btn btn-sm btn-link text-muted",onClick:this.showOriginal},Object(d.h)("i",{class:"fas fa-cog"}),"  ",Object(d.h)(p.c,{id:"home.translate-show-original"},"Show original"))):Object(d.h)(t,null,Object(d.h)("button",{type:"button",class:"btn btn-sm btn-link text-muted",onClick:this.translate},Object(d.h)("i",{class:"fas fa-cog"})," ",Object(d.h)(p.c,{id:"home.translate-to"},"See translation"))))),j&&j.map(t=>{if("poll"===t.name)return Object(d.h)(w.a,{stores:this.props.stores,story:l,storyId:l.id,params:t.params,opts:t.opts,content:t.content,selectedImageIdx:a})}))))}})||n,F=Object(m.a)(c=class extends d.Component{constructor(t){var e;super(t),e=this,this.viewImage=t=>{const{id:e,idx:s}=t.target.closest("img").dataset,{viewImageIdx:o}=this.state;o[e]=s,this.setState({viewImageIdx:o})},this.showStoryDetail=t=>{if("a"===t.target.localName)return!1;const{id:e}=t.target.closest("#storyDetail").dataset;e&&Object(f.route)("/stories/"+e)},this.translate=async function(t){t.preventDefault(),t.stopPropagation();const{story:s}=e.props,{userStore:o,storyStore:a}=e.props.stores,{user:i}=o;e.setState({showOriginal:0}),await a.translate({story:s,user:i})},this.showOriginal=t=>{t.preventDefault(),t.stopPropagation(),this.setState({showOriginal:1})},this.getTranslation=()=>{const{story:t}=this.props,{userStore:e}=this.props.stores,{user:s}=e,{language:o="en"}=s;T.a.getTranslation({object:t,targetLang:o,field:"body"})&&this.setState({showOriginal:0})},this.state={viewImageIdx:{}}}componentWillMount(){this.getTranslation()}render(){const{viewImageIdx:e,showOriginal:s}=this.state,{userStore:o}=this.props.stores,{story:a,likeStory:i,likeRef:l}=this.props,{user:n}=o,{language:c="en"}=n,r=[];if(a.images){const t=Object(u.i)(a.images);r.push(...t)}const h=T.a.getTranslation({object:a,targetLang:c,field:"body"});let m=h||a.body;return s&&(m=a.body),Object(d.h)(t,null,Object(d.h)("div",{class:"container-fluid px-0 mt-1"},Object(d.h)("div",{class:"row"},Object(d.h)(x.a,{stores:this.props.stores,images:r,id:a.id,dblClick:i,likeRef:l}))),Object(d.h)("div",{class:"row mt-2"},Object(d.h)("div",{class:"clearfix col-12 overflow-hidden",style:""+(a.offline?"text-decoration: line-through;":"")},Object(d.h)("div",{id:"storyDetail","data-id":a.id},Object(d.h)(g.a,{markdown:T.a.replaceImages(m,a.images,c),markdownOpts:T.a.getMarkdownOptions()}),a.language!==c&&Object(d.h)(t,null,!s&&h?Object(d.h)(t,null,Object(d.h)("button",{type:"button",class:"btn btn-sm btn-link",onClick:this.showOriginal},Object(d.h)("i",{class:"fas fa-cog"}),"  ",Object(d.h)(p.c,{id:"home.translate-show-original"},"Show original"))):Object(d.h)(t,null,Object(d.h)("button",{type:"button",class:"btn btn-sm btn-link",onClick:this.translate},Object(d.h)("i",{class:"fas fa-cog"})," ",Object(d.h)(p.c,{id:"home.translate-to"},"See translation")))))),!!(a.url||a.code||a.price>0)&&Object(d.h)(t,null,Object(d.h)("div",{class:"clearfix col-12  py-2",style:""+(a.offline?"text-decoration: line-through;":"")},Object(d.h)("div",{class:"row"},a.url&&Object(d.h)(t,null,Object(d.h)("div",{class:"col-12 text-left",style:"font-size: 1.0em;"},Object(d.h)("a",{href:T.a.asUrl(a.url),target:"_blank",rel:"noreferrer"},Object(d.h)("i",{class:"fas fa-link mr-2"}),a.urlText?Object(d.h)(t,null,a.urlText):Object(d.h)(t,null,Object(d.h)(p.c,{id:"story.ad-url-readmore"},"Les mer..."))))),a.code&&Object(d.h)(t,null,Object(d.h)("div",{class:"col text-left",style:"font-size: 1.2em;"},Object(d.h)("nobr",null,Object(d.h)("span",{class:"font-weight-lighter"},Object(d.h)(p.c,{id:"story.ad-campaign-code"},"Kampanjekode"),":")," ",a.code))),a.price>0&&Object(d.h)(t,null,Object(d.h)("div",{class:"col text-right",style:"font-size: 1.2em;"},Object(d.h)("nobr",null,a.currencty&&Object(d.h)("span",{class:"font-weight-lighter"},a.currency)," ",b.a.format(a.price,2)))))))))}})||c,E=Object(m.a)(r=class extends d.Component{constructor(t){var e;super(t),e=this,this.viewImage=t=>{const{id:e,idx:s}=t.target.closest("img").dataset,{viewImageIdx:o}=this.state;o[e]=s,this.setState({viewImageIdx:o})},this.showStoryDetail=t=>{if("a"===t.target.localName)return!1;const{id:e}=t.target.closest("#storyDetail").dataset;e&&Object(f.route)("/stories/"+e)},this.translate=async function(t){t.preventDefault(),t.stopPropagation();const{story:s}=e.props,{userStore:o,storyStore:a}=e.props.stores,{user:i}=o;e.setState({showOriginal:0}),await a.translate({story:s,user:i})},this.showOriginal=t=>{t.preventDefault(),t.stopPropagation(),this.setState({showOriginal:1})},this.getTranslation=()=>{const{story:t}=this.props,{userStore:e}=this.props.stores,{user:s}=e,{language:o="en"}=s;T.a.getTranslation({object:t,targetLang:o,field:"body"})&&this.setState({showOriginal:0})},this.state={viewImageIdx:{}}}componentWillMount(){this.getTranslation()}render(){const{viewImageIdx:e,showOriginal:s}=this.state,{userStore:o}=this.props.stores,{story:a,likeStory:i,likeRef:l}=this.props,{user:n}=o,{language:c="en"}=n,r=[];if(a.images){const t=Object(u.i)(a.images);r.push(...t)}const h=T.a.getTranslation({object:a,targetLang:c,field:"body"});let b=h||a.body;return s&&(b=a.body),Object(d.h)(t,null,Object(d.h)("div",{class:"container-fluid px-0 mt-1"},Object(d.h)("div",{class:"row"},Object(d.h)(x.a,{stores:this.props.stores,images:r,id:a.id,dblClick:i,likeRef:l}))),Object(d.h)("div",{class:"row mt-2"},Object(d.h)("div",{class:"clearfix col-12 overflow-hidden",style:""+(a.offline?"text-decoration: line-through;":"")},Object(d.h)("div",{id:"storyDetail",onClick:this.showStoryDetail,"data-id":a.id},Object(d.h)(g.a,{markdown:T.a.replaceImages(b,a.images,c),markdownOpts:T.a.getMarkdownOptions()}),a.language!==c&&Object(d.h)(t,null,!s&&h?Object(d.h)(t,null,Object(d.h)("button",{type:"button",class:"btn btn-sm btn-link",onClick:this.showOriginal},Object(d.h)("i",{class:"fas fa-cog"}),"  ",Object(d.h)(p.c,{id:"home.translate-show-original"},"Show original"))):Object(d.h)(t,null,Object(d.h)("button",{type:"button",class:"btn btn-sm btn-link",onClick:this.translate},Object(d.h)("i",{class:"fas fa-cog"})," ",Object(d.h)(p.c,{id:"home.translate-to"},"See translation")))))),!!(a.url||a.code||a.price)&&Object(d.h)(t,null,Object(d.h)("div",{class:"clearfix col-12  py-2",style:""+(a.offline?"text-decoration: line-through;":"")},Object(d.h)("div",{class:"row"},a.url&&Object(d.h)(t,null,Object(d.h)("div",{class:"col-12 text-left",style:"font-size: 1.0em;"},Object(d.h)("a",{href:T.a.asUrl(a.url),target:"_blank",rel:"noreferrer"},Object(d.h)("i",{class:"fas fa-link mr-2"}),a.urlText?Object(d.h)(t,null,a.urlText):Object(d.h)(t,null,Object(d.h)(p.c,{id:"story.ad-url-readmore"},"Les mer..."))))))))))}})||r,L=Object(m.a)(h=class extends d.Component{constructor(t){var e;super(t),e=this,this.toggleDate=t=>{t.stopPropagation(),t.preventDefault();const{showDate:e}=this.state;this.setState({showDate:!e})},this.likeStory=async function(){const{story:t}=e.props,{id:s}=t,o=s,{storyStore:a}=e.props.stores,{likeStory:i}=e.state;i[o]=!0;const l=Object.keys(i);e.setState({likeStory:i,likeIds:l}),setTimeout(()=>{const{likeStory:t}=e.state;delete t[o];const s=Object.keys(t);e.setState({likeStory:t,likeIds:s})},1200);await a.likeStory({id:o})},this.toggleAddComment=t=>{const e=t.target.closest("button").dataset.id,{showAddComment:s}=this.state;s[e]?delete s[e]:s[e]=!0,this.setState({showAddComment:s},()=>{this.inputRef[e]&&this.inputRef[e].focus()})},this.closeAllAddComments=()=>{this.setState({showAddComment:{}})},this.toggleShowTeamSetting=t=>{const e=t.target.closest("button").dataset.id,{showTeamSetting:s}=this.state;s[e]?delete s[e]:s[e]=!0,this.setState({showTeamSetting:s})},this.viewImage=t=>{const{id:e,idx:s}=t.target.closest("img").dataset,{viewImageIdx:o}=this.state;o[e]=s,this.setState({viewImageIdx:o})},this.toggleMenu=t=>{const{id:e}=t.target.closest("i").dataset,{showMenu:s={}}=this.state;s[e]=!s[e],this.setState({showDeleteStory:{},showEdit:{},showMenu:s})},this.toggleEdit=t=>{const{id:e}=t.target.closest("button").dataset,{showEdit:s={}}=this.state;s[e]=!s[e],this.setState({showDeleteStory:{},showEdit:s,showMenu:{}})},this.toggleDeleteStory=t=>{const{id:e}=t.target.closest("button").dataset,{showDeleteStory:s={}}=this.state;s[e]=!s[e],this.setState({showDeleteStory:s,showEdit:{},showMenu:{}})},this.reportStory=async function(t){const{id:s}=t.target.closest("button").dataset,{storyStore:o}=e.props.stores;await o.reportStory({id:s}),e.setState({showEdit:{},showMenu:{}})},this.adminRemoveStory=async function(t){const{id:s}=t.target.closest("button").dataset,{storyStore:o}=e.props.stores;await o.adminHideStory({id:s}),e.setState({showEdit:{},showMenu:{}})},this.deleteStory=async function(t){const{id:s}=t.target.closest("button").dataset,{storyStore:o}=e.props.stores;await o.saveField(parseInt(s,10),"offline",1,!0),o.publicFeedUpdate(parseInt(s,10),"offline",1),e.setState({storyBody:"",showDeleteStory:{},showEdit:{},showMenu:{}})},this.doneEdit=()=>{this.setState({showDeleteStory:{},showEdit:{},showMenu:{}})},this.showStoryDetail=t=>{if("a"===t.target.localName)return!1;const{id:e}=t.target.closest("#storyDetail").dataset;e&&Object(f.route)("/stories/"+e)},this.shareLink=t=>{const{url:e,title:s,text:o}=t.target.closest("button").dataset,{appState:a}=this.props.stores;a.shareUrl({url:e,title:s,text:o})},this.state=a({},D),this.inputRef={}}async loadStoriesPublicFeed(t=this.props){const{hashtag:e}=t,{storyStore:s}=t.stores;await s.loadPublicFeed({hashtag:e})}render(){const{showAddComment:e,showDate:s,showMenu:o={},showEdit:a={},showDeleteStory:i={},showTeamSetting:l,likeStory:n,likeIds:c}=this.state,{story:r,showAllComments:h,onTeamClick:m=(()=>{}),onUserClick:u=(()=>{})}=this.props,{userStore:O,storyStore:g,appState:j}=this.props.stores,{user:f={},isAdmin:w}=O,{hasShareApi:x}=j,I=g.findPublicTeam(r.team)||{},D=g.findPublicUser(r.user)||{},L=T.a.getImage({user:D,team:I,priority:"user",object:r}),A=!(!I||!I.members)&&I.members.some(t=>t===f.id);let N,U,M,$;I&&I.name?(N=T.a.displayNameShort(I),U=T.a.displayName(I),M=T.a.displayName(D),D.settings&&f.uuidv4!==D.uuidv4&&($=D.settings.hideProfile?null:"/inbox/"+D.uuidv4)):D&&D.id&&(N=T.a.displayNameShort(D),U=T.a.displayName(D));const{likes:V,comments:_,reports:z=[]}=r,B=r.likes&&r.likes.findIndex(t=>t.user===f.id)>-1,W=I.followers?I.followers.length:0,q=I.members&&I.members.indexOf(f.id)>-1,K=I.followers&&I.followers.indexOf(f.id)>-1,Y=I.followRequests&&I.followRequests.findIndex(t=>t.id===f.id)>-1,{currentLocationGeocode:H={},yrWeather:Z=[]}=r,G=T.a.getViews(r.statistics),Q=T.a.getAdminData(r.statistics);return Object(d.h)(t,null,w||f.id===D.id?Object(d.h)(t,null,Object(d.h)("span",{class:"float-right font-weight-lighter text-muted"},Object(d.h)("i",{class:"fas fa-ellipsis-h",onClick:this.toggleMenu,"data-id":r.id}))):Object(d.h)(t,null,!q&&!K&&!Y&&I.public>0&&Object(d.h)("span",{class:"float-right"},Object(d.h)(C.a,{stores:this.props.stores,team:I,buttonOnly:!0,simple:!0,classNames:"btn btn-link text-primary"}))),o[r.id]&&Object(d.h)(t,null,Object(d.h)("div",{class:"position-absolute bg-light p-2 border rounded rounded-lg shadow-sm",style:"top: 30px; right: 10px; width: 60%; z-index: 999999;"},f.id===D.id?Object(d.h)(t,null,Object(d.h)("button",{class:"btn btn-link btn-block text-left",onClick:this.toggleEdit,"data-id":r.id},Object(d.h)("i",{class:"fas fa-edit"})," Edit"),Object(d.h)("hr",null),Object(d.h)("button",{class:"btn btn-link btn-block text-left text-danger",onClick:this.toggleDeleteStory,"data-id":r.id},Object(d.h)("i",{class:"fas fa-trash-alt"})," Delete")):Object(d.h)(t,null,Object(d.h)("button",{class:"btn btn-link btn-block text-left",onClick:this.reportStory,"data-id":r.id},Object(d.h)("i",{class:"fas fa-flag"})," Report"),w&&Object(d.h)(t,null,Object(d.h)("hr",null),Object(d.h)("button",{class:"btn btn-link btn-block text-left text-danger",onClick:this.adminRemoveStory,"data-id":r.id},Object(d.h)("i",{class:"fas fa-eraser"})," Remove from feed"))))),Object(d.h)("div",{class:"d-flex position-relative"},Object(d.h)("div",{class:"position-relative text-center border rounded-circle imageRounded imageRoundedMedium",style:L?`background-image: url("${L}"); background-size: cover;`:""},!L&&Object(d.h)("div",{class:"text-muted",style:"font-size: 20px; padding-top: 3px;"},N)),Object(d.h)("div",{class:"flex-grow-1 pl-3 text-overflow",style:"line-height: 1.2em;"},Object(d.h)("h5",{class:"mb-1 position-relative",style:"line-height: 1.0em; "+(r.offline?"text-decoration: line-through;":"")},I.public?Object(d.h)(t,null,Object(d.h)("a",{href:"/teams/public/"+I.uuidv4,onClick:t=>m(t,I.uuidv4),class:"stretched-link"},U)):Object(d.h)(t,null,U),q&&!I.public&&Object(d.h)("button",{type:"button",class:"btn btn-sm btn-link text-muted","data-id":r.id,onClick:this.toggleShowTeamSetting},Object(d.h)("i",{class:"fas fa-exclamation-triangle"}))),Object(d.h)("div",{class:"mb-2",style:""+(r.offline?"text-decoration: line-through;":"")},r.pinned&&Object(d.h)(t,null,Object(d.h)("small",{class:"text-muted mr-2"},Object(d.h)("i",{class:"fas fa-thumbtack"}))),2===r.type?Object(d.h)(t,null,Object(d.h)("small",{class:"text-muted"},Object(d.h)(p.c,{id:"story.sponsored"},"Sponsored")," -")):Object(d.h)(t,null,r.date&&Object(d.h)("small",{class:"text-muted",onClick:this.toggleDate},s?b.a.formatDate(r.date,{locale:"no-NB",hour12:!1,hour:"2-digit",minute:"2-digit"}):b.a.formatDistance(r.date,new Date,{locale:"no-NB"}))),1===r.public?Object(d.h)(t,null,Object(d.h)("small",{class:"ml-2 text-muted"},Object(d.h)("i",{class:"fas fa-globe-europe"}))):Object(d.h)(t,null,Object(d.h)("small",{class:"ml-2 text-muted"},Object(d.h)("i",{class:"fas fa-users"})," (",b.a.format(W),")")),M&&Object(d.h)(t,null,Object(d.h)("small",{class:"ml-2 text-muted"},$?Object(d.h)(t,null,Object(d.h)("i",{class:"fas fa-user"})," ",Object(d.h)("a",{href:$},M)):Object(d.h)(t,null,Object(d.h)("i",{class:"fas fa-user"})," ",M))),H&&H.formattedCounty&&Object(d.h)(t,null,Object(d.h)("small",{class:"ml-2 text-muted"},Object(d.h)("i",{class:"fas fa-map-marker-alt"})," ",H.formattedCounty))),w&&Object(d.h)("div",{class:"d-flex flex-row flex-nowrap bg-light border-top border-bottom py-2",style:"overflow: auto;"},Object(d.h)("small",{class:"text-muted mr-2"},"Adm:"),z&&z.length>0&&Object(d.h)(t,null,Object(d.h)("small",{class:"text-danger mr-2"},Object(d.h)("i",{class:"fas fa-flag"})," ",z.length)),H&&H.formatted_address&&Object(d.h)(t,null,Object(d.h)("small",{class:"text-muted"},Object(d.h)("i",{class:"fas fa-map-marker-alt"})," ",H.formatted_address)),D.deviceInfo&&Object(d.h)(t,null,Object(d.h)("span",{class:"badge badge-secondary ml-2 float-right font-weight-light"},["platform","manufacturer","model"].map(e=>Object(d.h)(t,null,Object(d.h)("span",{class:"ml-2 text-white"},D.deviceInfo[e]))))),Q&&Object(d.h)(t,null,Object(d.h)("small",{class:"ml-2 text-muted"},"V: ",Q.count),Object(d.h)("small",{class:"ml-2 text-muted"},"R: ",Q.ranking," ",b.a.isNumber(Q.rankingTrend)&&Object(d.h)(t,null,Object(d.h)("i",{class:T.a.getClassForTrend(Q.rankingTrend)}))),Object(d.h)("small",{class:"ml-2 text-muted"},"D: ",b.a.format(Q.durationAvg/1e3,1),"s ",b.a.isNumber(Q.durationAvgTrend)&&Object(d.h)(t,null,Object(d.h)("i",{class:T.a.getClassForTrend(Q.durationAvgTrend)}))),r.statisticsCurrent&&r.statisticsCurrent.totalInteractions>0&&Object(d.h)("small",{class:"ml-2 text-muted"},"S: ",b.a.format(r.statisticsCurrent.totalInteractions,0)),r.shadowTags&&r.shadowTags.map(e=>Object(d.h)(t,null,Object(d.h)("span",{class:"badge badge-secondary ml-2 float-right font-weight-light"},e))))))),a[r.id]||i[r.id]?Object(d.h)(t,null,Object(d.h)("div",{class:"row mt-2"},Object(d.h)("div",{class:"clearfix col-12",style:""+(r.offline?"text-decoration: line-through;":"")},a[r.id]&&Object(d.h)(t,null,Object(d.h)(P,{stores:this.props.stores,story:r,key:"story-edit-"+r.id,callback:this.doneEdit})),i[r.id]&&Object(d.h)("div",{class:"clearfix mt-3 mb-3"},Object(d.h)("button",{class:"btn btn-danger float-left",onClick:this.deleteStory,"data-id":r.id},Object(d.h)("i",{class:"fas fa-trash-alt"})," Delete"),Object(d.h)("button",{class:"btn btn-secondary float-right",onClick:this.toggleDeleteStory,"data-id":r.id},Object(d.h)("i",{class:"fas fa-times-circle"})," Cancel"))))):Object(d.h)(t,null,(!r.type||1==r.type)&&Object(d.h)(R,{stores:this.props.stores,story:r,key:"story-regular-view-"+r.id,likeStory:this.likeStory,likeRef:n,keys:c}),2==r.type&&Object(d.h)(F,{stores:this.props.stores,story:r,key:"story-ad-view-"+r.id,likeStory:this.likeStory,likeRef:n,keys:c}),3==r.type&&Object(d.h)(E,{stores:this.props.stores,story:r,key:"story-article-view-"+r.id,likeStory:this.likeStory,likeRef:n,keys:c}),Object(d.h)("div",{class:"d-flex justify-content-between mt-2"},Object(d.h)("div",{class:"mr-2"},Object(d.h)(k.a,{stores:this.props.stores,likes:V,comments:_,type:"story",onTeamClick:m,onUserClick:u})),G>0&&Object(d.h)(t,null,Object(d.h)("div",null,Object(d.h)(S.a,{stores:this.props.stores,views:G,object:r,type:"story",isTeamAdmin:A,isAdmin:w,onTeamClick:m,onUserClick:u})))),l[r.id]&&Object(d.h)(t,null,Object(d.h)("small",null,Object(d.h)("div",{class:"alert alert-info",role:"alert"},Object(d.h)("span",{class:"display-4 float-left"},Object(d.h)("i",{class:"fas fa-exclamation-triangle mr-3 mb-3"})),Object(d.h)("p",null,Object(d.h)(p.c,{id:"story.alert-text-1"},"Your team is not visible and it's not possible to request friendship with your team.")),Object(d.h)("p",null,Object(d.h)(p.c,{id:"story.alert-text-2"},"If you want to make your team visible so other can request to follow your team, you can find the setting here:")),Object(d.h)("p",null,Object(d.h)("a",{href:"/teams/edit/"+I.id},Object(d.h)(p.c,{id:"story.alert-text-3"},"Edit team")))))),Object(d.h)("div",null,Object(d.h)("div",{class:"row"},Object(d.h)("div",{class:"col text-center"},Object(d.h)("button",{type:"button",class:`storyImage btn btn-sm btn-outline-${B?"primary":"secondary"} btn-lg btn-block ${B?"text-primary":""} text-overflow`,"data-id":r.id,onClick:this.likeStory},Object(d.h)("i",{class:(B?"text-primary fas":"far")+" fa-thumbs-up"})," ",B?Object(d.h)(p.c,{id:"comments.has-liked"},"Liked"):Object(d.h)(p.c,{id:"comments.like"},"Lik"))),Object(d.h)("div",{class:"col text-center"},Object(d.h)("button",{type:"button",class:"btn btn-sm btn-outline-secondary btn-lg btn-block text-overflow","data-id":r.id,onClick:this.toggleAddComment},Object(d.h)("i",{class:"fas fa-comment"})," ",Object(d.h)(p.c,{id:"comments.comment-add"},"Kommentar"))),x?Object(d.h)(t,null,Object(d.h)("div",{class:"col text-center"},Object(d.h)("button",{class:"btn btn-sm btn-outline-secondary btn-lg btn-block text-overflow",onClick:this.shareLink,"data-url":"https://themusher.app/share/story/"+r.uuidv4,"data-title":"title: "+r.title},Object(d.h)("i",{class:"fas fa-share"})," ",Object(d.h)(p.c,{id:"story.share"},"Del")))):Object(d.h)(t,null,Object(d.h)("div",{class:"col text-center"},Object(d.h)("a",{class:"btn btn-sm btn-outline-secondary btn-lg btn-block text-overflow",href:"https://themusher.app/share/story/"+r.uuidv4,target:"_blank",rel:"noreferrer","data-native":!0},Object(d.h)("i",{class:"fas fa-share"})," ",Object(d.h)(p.c,{id:"story.share"},"Del")))))),Object(d.h)("div",{class:"mt-2"},Object(d.h)(y.a,{stores:this.props.stores,story:r,col:"10",offset:"2",compact:!1,showAllComments:h,initCall:this.closeAllAddComments}),e[r.id]&&Object(d.h)(v.a,{stores:this.props.stores,story:r,inputRef:t=>this.inputRef[r.id]=t,inputRefObject:this.inputRef,col:"10",offset:"2",key:"story-comment-"+r.id}))))}})||h;e.a=L}).call(this,s("hosL").Fragment)},P9Fo:function(t,e,s){"use strict";(function(t){var o,a=s("hosL"),i=s("Utv1"),l=s("/eY4"),n=(s("cneo"),s("OhSV")),c=s("fh8t"),r=s.n(c),h=(s("go65"),s("ZOvn"));let d=Object(l.a)(o=class extends a.Component{constructor(t){var e;super(t),e=this,this.pollStory=async function(t){const{storyId:s}=e.props,{storyStore:o}=e.props.stores,{line:a}=t.target.dataset;await o.pollStory({id:s,line:a})},this.toggleResult=()=>{const{viewResult:t}=this.state;this.setState({viewResult:!t})},this.state={},this.inputRef={}}render(){const{viewResult:e}=this.state,{story:s,opts:o,content:l,selectedImageIdx:c}=this.props,{userStore:d}=this.props.stores,{user:b}=d,{language:m="en"}=b,u=l.split("\n").map(t=>t.trim().replace(/^\-\s*/g,"")),p=s.polls&&s.polls.findIndex(t=>t.user===b.id)>-1,O=s.polls?s.polls.length:0;let g=0;u.forEach(t=>{const e=100*(s.polls?s.polls.filter(e=>e.line===h.a.md5(t)).length/O:0);e>g&&(g=e)});const j=o.days?parseInt(o.days,10):7,f=i.a.addDays(s.date,j),y=f<new Date,v=new RegExp(/{{img\./i);return Object(a.h)(t,null,Object(a.h)("div",{class:"w-100 my-4 storyPoll"},y||p||e?Object(a.h)(t,null,u&&u.map(e=>{const o=s.polls&&s.polls.findIndex(t=>t.user===b.id&&t.line===h.a.md5(e))>-1,l=(s.polls?s.polls.filter(t=>t.line===h.a.md5(e)).length:0)/O*100;return Object(a.h)(t,null,Object(a.h)("div",{class:"progress position-relative my-2 ",style:"height: 1.5em; font-size: 1.3em;"},Object(a.h)("span",{class:"position-absolute",style:"right: 10px;"}," ",i.a.format(l||0,1),"%"),Object(a.h)("span",{class:"position-absolute",style:"left: 10px;"},Object(a.h)(r.a,{markdown:h.a.replaceImages(`${e} ${o&&"<i class='fas fa-check-circle' />"}`,s.images,m,!1),markdownOpts:h.a.getMarkdownOptions()})),Object(a.h)("div",{class:"progress-bar "+(g===l?"bg-primary":"bg-secondary"),role:"progressbar",style:`width: ${l}%;`,"aria-valuenow":l,"aria-valuemin":"0","aria-valuemax":"100"})))}),Object(a.h)("div",{class:"w-100 mt-3 text-muted d-flex justify-content-start"},Object(a.h)("div",null,i.a.format(O,0)," ",1===O?Object(a.h)(n.c,{id:"story.poll"},"vote"):Object(a.h)(n.c,{id:"story.polls"},"votes")),y?Object(a.h)(t,null,Object(a.h)("div",{class:"ml-2"},"- ",Object(a.h)(n.c,{id:"story.finished"},"Finished"))):Object(a.h)(t,null,Object(a.h)("div",{class:"ml-2"},"- ",i.a.formatDistance(f,new Date,{},{extended:!0})," ",Object(a.h)(n.c,{id:"story.left"},"left")),!p&&Object(a.h)("div",{class:"ml-2",onClick:this.toggleResult},"- ",Object(a.h)(n.c,{id:"story.view-vote"},"View vote"))))):Object(a.h)(t,null,u&&u.map((e,o)=>Object(a.h)(t,null,Object(a.h)("button",{class:`btn btn-block ${v.test(e)&&o===c?"btn-outline-success":"btn-outline-primary"} rounded-pill`,onClick:this.pollStory,"data-line":h.a.md5(e)},v.test(e)&&o===c&&Object(a.h)("span",{class:"float-right"},Object(a.h)("i",{class:"fas fa-eye"})),Object(a.h)(r.a,{markdown:h.a.replaceImages(e,s.images,m,!1),markdownOpts:h.a.getMarkdownOptions()})))),Object(a.h)("div",{class:"w-100 mt-3 text-muted d-flex justify-content-start"},Object(a.h)("div",null,i.a.format(O,0)," ",1===O?Object(a.h)(n.c,{id:"story.poll"},"vote"):Object(a.h)(n.c,{id:"story.polls"},"votes")),y?Object(a.h)(t,null,Object(a.h)("div",{class:"ml-2"},"- ",Object(a.h)(n.c,{id:"story.finished"},"Finished"))):Object(a.h)(t,null,Object(a.h)("div",{class:"ml-2"},"- ",i.a.formatDistance(f,new Date,{},{extended:!0})," ",Object(a.h)(n.c,{id:"story.left"},"left"))),Object(a.h)("div",{class:"ml-2",onClick:this.toggleResult},"- ",Object(a.h)(n.c,{id:"story.view-results"},"View results"))))))}})||o;e.a=d}).call(this,s("hosL").Fragment)},VKmm:function(t,e,s){"use strict";function o(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,o)}return s}function a(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}var i,l=s("hosL"),n=s("Utv1"),c=s("/eY4"),r=s("OhSV");s("ZOvn"),s("eQ6k");const h={requestSent:{}};let d=Object(c.a)(i=class extends l.Component{constructor(t){super(t),this.requestFollowTeam=t=>{const{teamStore:e,userStore:s}=this.props.stores,{user:o}=s,{team:a}=t.target.closest("button").dataset;e.followRequest(parseInt(a,10),o);const{requestSent:i}=this.state;i[a]=!0,this.setState({requestSent:i})},this.getButton=t=>{const{requestSent:e}=this.state,{userStore:s}=this.props.stores,{user:o}=s,a=t.members&&t.members.findIndex(t=>t.id===o.id)>-1,i=t.followers&&t.followers.indexOf(o.id)>-1,n=t.blockedFollowers&&t.blockedFollowers.indexOf(o.id)>-1,c=e[t.id]||t.followRequests&&t.followRequests.findIndex(t=>t.id===o.id)>-1;return a?Object(l.h)("i",{class:"fas fa-home"}):i?Object(l.h)("button",{class:"btn btn-sm btn-block btn-outline-secondary float-right",onClick:this.unFollowTeam,disabled:"true","data-team":t.id},Object(l.h)("i",{class:"fas fa-link mr-2"}),Object(l.h)(r.c,{id:"teams.connect.is-following"},"FÃ¸lger")):n?Object(l.h)("button",{class:"btn btn-sm btn-block btn-outline-secondary float-right",disabled:"true"},Object(l.h)("i",{class:"fas fa-hand-paper mr-2"}),Object(l.h)(r.c,{id:"teams.connect.is-blocked"},"Blokkert")):c?Object(l.h)("button",{class:"btn btn-sm btn-block btn-outline-secondary float-right",disabled:"true"},Object(l.h)("i",{class:"fas fa-hourglass-half mr-2"}),Object(l.h)(r.c,{id:"teams.connect.has-requested"},"Venter pÃ¥ godkjenning")):Object(l.h)("button",{class:"btn btn-sm btn-block btn-outline-success float-right",onClick:this.requestFollowTeam,"data-team":t.id},Object(l.h)("i",{class:"far fa-hand-point-right mr-2"}),Object(l.h)(r.c,{id:"teams.connect.follow"},"FÃ¸lg"))},this.state=function(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?o(Object(s),!0).forEach((function(e){a(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):o(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}({},h)}async loadTeams(){this.setState({isLoading:!0});const{teamStore:t}=this.props.stores;await t.loadPublic({query:{notfollowing:1,array:1},limit:15}),this.setState({isLoading:!1})}componentDidMount(){this.loadTeams()}render(){const{teamStore:t,appState:e}=this.props.stores,{publicTeamsToFollow:s}=t,{darkmode:o}=e;return s&&0!==s.length?Object(l.h)("div",{class:"row pb-1 bg-light"},Object(l.h)("div",{class:`col-12 col-sm-8 col-lg-6 offset-sm-2 offset-lg-3 mb-0 position-relative rounded rounded-lg py-3 bg-${o?"black":"white"} shadow-sm`},Object(l.h)("div",{class:"container-fluid"},Object(l.h)("div",{class:"row"},Object(l.h)("div",{class:"col-12"},Object(l.h)("h5",null,Object(l.h)(r.c,{id:"teams.connect.teams-to-follow"},"Team du kan fÃ¸lge"),":"))),Object(l.h)("div",{class:"row"},Object(l.h)("div",{class:"d-flex flex-row flex-nowrap",style:"overflow: auto;"},n.a.isArray(s)&&s.map(t=>{const e=t.image&&t.image.s3SmallLink?t.image:null;return Object(l.h)("div",{class:"mr-2",style:"width: 110px;"},Object(l.h)("div",{class:"text-center border rounded-lg",style:e?`background-image: url("${e.s3SmallLink}"); background-size: cover; width: 110px; height: 100px;`:"width: 110px; height: 100px;"},!e&&Object(l.h)("i",{class:"fas fa-users text-muted mt-3",style:"font-size: 40px;"})),Object(l.h)("small",null,Object(l.h)("div",{class:"text-overflow"},Object(l.h)("strong",null,t.name)),Object(l.h)("div",{class:"text-overflow"},t.place?t.place+", ":""," ",t.country," Â "),Object(l.h)("div",{class:"text-overflow"},Object(l.h)("small",{class:"text-muted"},t&&t.dogs&&Object(l.h)("span",{class:""},Object(l.h)("i",{class:"fas fa-dog"})," ",t.dogs.length),t&&t.followers&&Object(l.h)("span",{class:"ml-2"},Object(l.h)("i",{class:"fas fa-user"})," ",t.followers.length)))),Object(l.h)("div",null,this.getButton(t)))})))))):""}})||i;e.a=d},ZQlJ:function(t,e,s){"use strict";var o,a=s("hosL"),i=(s("Utv1"),s("/eY4")),l=(s("OhSV"),s("NDEG"));let n=Object(i.a)(o=class extends a.Component{constructor(t){super(t),this.scrollImages=t=>{const{scrollLeft:e,clientWidth:s}=t.target,o=e/s,a=Math.round(o),i=Math.abs(a-o);(Number.isInteger(o)||i<.1)&&this.setState({imageIdx:a})},this.sortByName=(t,e)=>{const{allDogs:s=[]}=this.props,o=s.find(e=>e.id===t),a=s.find(t=>t.id===e);return o&&a&&o.name>a.name?1:-1},this.state={imageIdx:0}}render(){const{dogs:t,allDogs:e=[],size:s="medium",onDogClick:o=(()=>{})}=this.props;return Object(a.h)("div",{class:"w-100"},Object(a.h)("div",{class:"d-flex flex-row flex-nowrap no-scrollbar",style:"overflow: auto; scroll-snap-type: x mandatory;",onScroll:this.scrollImages},t&&t.sort(this.sortByName).map(i=>{const n=e.find(t=>t.id===i);return n?Object(a.h)("div",{class:"col clearfix position-relative p-0 mx-2"},Object(a.h)("div",{class:"w-100 h-100 text-center rounded-lg imageContainer d-flex justify-content-center align-items-center",style:"\n                                        flex-wrap: wrap;\n                                        overflow-y: hidden;\n                                    ",onTouchstart:t=>{t.stopPropagation()},onTouchend:t=>{t.stopPropagation()},onTouchmove:t=>{t.stopPropagation()}},Object(a.h)(l.a,{stores:this.props.stores,dog:n,dogs:e.filter(e=>t.indexOf(e.id)>-1).sort((t,e)=>t.name>e.name?1:-1),className:"mx-auto",showName:!0,showPosition:!1,size:s,onDogClick:o}))):""})))}})||o;e.a=n},epqT:function(t,e,s){"use strict";(function(t){function o(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,o)}return s}function a(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}var i,l=s("hosL"),n=s("Utv1"),c=s("/eY4"),r=s("OhSV");s("ZOvn");const h={showAddComment:!1};let d=Object(r.d)(()=>({subject:Object(l.h)(r.c,{id:"ad.subject"},"AnnonseforespÃ¸rsel"),body:Object(l.h)(r.c,{id:"ad.body"},"Hei, Jeg Ã¸nsker Ã¥ vite mer om annonsering i appen The Musher.")}))(i=Object(c.a)(i=class extends l.Component{constructor(t){var e;super(t),e=this,this.logClick=async function(){const{adStore:t,userStore:s}=e.props.stores,{ads:o=[]}=t;let a=o.length>0?o[0].id:null;const{user:i={}}=s;await t.logClick({id:a,user:i.id})},this.state=function(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?o(Object(s),!0).forEach((function(e){a(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):o(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}({},h),this.updateTimer={},this.inputRef={},this.apiServer=n.a.getApiServer()}async loadAd(t=this.props){this.setState({isLoading:!0});const{adStore:e,workoutStore:s,userStore:o,appState:a}=this.props.stores,{section:i}=this.props,{path:l=""}=a,{currentTeam:n}=s,{user:c}=o,{language:r="en"}=c;let h,d,b,m,u,p={};n&&(p=o.findTeam(n,!0),p&&p.id&&(h=o.findTeamAmbition({ambition:p.ambitions,language:r}),d=o.findTeamType({type:p.type,language:r}),b=p.postalcode,m=p.place,u=p.country));let O=l.replace(/\d+$/,"detail");O=l.replace(/\/\d+/,"/detail"),await e.load({query:{page:O,section:i}}),e.setTime(),this.setState({isLoading:!1})}componentDidMount(){this.loadAd()}componentWillReceiveProps(t){t.path!==this.props.path&&this.loadAd(t)}render(){const{adStore:e,userStore:s,appState:o}=this.props.stores,{subject:a,body:i,section:n}=this.props,{path:c}=o,{user:h={}}=s,{ads:d=[],time:b}=e;if(!h||!h.id||!d||0===d.length)return c.match(/\/(home)/i)?Object(l.h)(t,null,Object(l.h)("div",{class:"w-100"},Object(l.h)("div",{class:"row"},Object(l.h)("div",{class:"col-12 col-sm-8 col-lg-6 offset-sm-2 offset-lg-3 mb-0 position-relative"},Object(l.h)("div",{class:"border rounded-lg p-4 my-3"},Object(l.h)("span",{class:"float-right display-4 text-warning"},Object(l.h)("i",{class:"far fa-smile-wink"})),Object(l.h)("h5",null,Object(l.h)(r.c,{id:"ad.heading"},"Vil du annonsere her?")),Object(l.h)("div",null,Object(l.h)(r.c,{id:"ad.teaser"},"Det er super enkelt :)")),Object(l.h)(r.b,null,Object(l.h)("a",{href:`mailto:post@themusher.no?subject=${a}: ${c}: ${n}&body=${i}`,target:"_blank",rel:"noreferrer"},Object(l.h)("i",{class:"fas fa-paper-plane"})," ",Object(l.h)(r.c,{id:"ad.linktext"},"Ta kontakt med The Musher")))))))):Object(l.h)(t,null);const m=d[0];return Object(l.h)(t,null,Object(l.h)("div",{class:"w-100"},Object(l.h)("div",{class:"row"},Object(l.h)("div",{class:"col-12 col-sm-8 col-lg-6 offset-sm-2 offset-lg-3 mb-0 position-relative"},Object(l.h)("div",null,Object(l.h)("small",null,Object(l.h)("small",{class:"text-muted"},Object(l.h)(r.c,{id:"ad.ad"},"Annonse"),":",Object(l.h)("img",{src:`${this.apiServer}/api/ads/${m.id}/view?user=${h.id}&time=${b}`,style:"width: 1; height: 1; opacity: 0.1;"})))),m.target?Object(l.h)(t,null,Object(l.h)("a",{class:"stretched-link",href:""+m.url,target:m.target||"_blank",rel:"noopener noreferrer",onClick:this.logClick,native:!0},m.images&&m.images[0]&&Object(l.h)(t,null,Object(l.h)("img",{src:m.images[0].s3LargeLink,class:"img-fluid rounded-lg"})))):Object(l.h)(t,null,Object(l.h)("a",{class:"stretched-link",href:""+m.url,onClick:this.logClick},m.images&&m.images[0]&&Object(l.h)(t,null,Object(l.h)("img",{src:m.images[0].s3LargeLink,class:"img-fluid rounded-lg"}))))))))}})||i)||i;e.a=d}).call(this,s("hosL").Fragment)},fQqW:function(t,e,s){"use strict";s.r(e),function(t){function o(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,o)}return s}function a(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}var i,l=s("hosL"),n=(s("Utv1"),s("/eY4")),c=s("OhSV"),r=(s("Y3FI"),s("go65"),s("X9Km"),s("ZOvn")),h=s("AEg1"),d=s("gOLw"),b=(s("AJN2"),s("epqT"),s("w93r"));const m=r.a.marginTop(!1),u=r.a.marginBottom(),p=r.a.marginTopBack(!1),O={isLoading:!1,submenu:"lastWorkouts",viewmenu:"wall"};let g=Object(n.a)(i=class extends l.Component{constructor(t){var e;super(t),e=this,this.reloadFeeds=async function(t){t.preventDefault(),e.setState({isLoading:!0}),e.setState({isLoading:!1})},this.sortby=t=>{const{storyStore:e}=this.props.stores;let s=()=>{};switch(t.target.value){case"likes":s=(t,e)=>t.likes&&e.likes&&t.likes.length<e.likes.length;break;case"-likes":s=(t,e)=>t.likes&&e.likes&&t.likes.length>e.likes.length;break;case"comments":s=(t,e)=>t.comments&&e.comments&&t.comments.length<e.comments.length;break;case"-comments":s=(t,e)=>t.comments&&e.comments&&t.comments.length>e.comments.length;break;default:s=(t,e)=>t.id<e.id}e.sortPublicFeed(s)},this.back=()=>{const{history:t}=this.props.stores;t.goBack()},this.state=function(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?o(Object(s),!0).forEach((function(e){a(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):o(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}({},O)}async loadAll(){const{appState:t,userStore:e,messageStore:s}=this.props.stores;this.setState({isLoading:!0}),await t.getFingerprint(),await e.getInfo(),await e.getNotifications(),await s.getUnReadMessages();const{user:o}=e;if(o.currentLocationInfo&&o.currentLocationInfo.coords){const{latitude:t,longitude:s,altitude:a}=o.currentLocationInfo.coords;e.getWeatherUser({lat:t,lon:s,altitude:a})}this.setState({isLoading:!1})}componentDidMount(){this.loadAll()}render(){const{story:e,hashtag:s,teamid:o,path:a}=this.props,{userStore:i,appState:n,storyStore:O}=this.props.stores,g=O.findPublicTeamByUuidv4(o),{user:j}=i,{yrWeather:f,currentLocationGeocode:y={}}=j,{formatted_address:v}=y,w=r.a.getImage({team:g});let x,k,S;return g&&g.name?(x=r.a.displayNameShort(g),k=r.a.displayName(g),S=r.a.displayName(j)):j&&j.id&&(x=r.a.displayNameShort(j),k=r.a.displayName(j)),Object(l.h)("div",{class:"container-fluid",style:`margin-bottom: ${u}; margin-top: ${m};`},Object(l.h)("button",{class:"btn btn-link pl-0 fixed-top text-primary",style:`top: ${p}; left: 5px; font-size: 35px; width: 45px;`,onClick:this.back},Object(l.h)("i",{class:"fas fa-arrow-circle-left"})),Object(l.h)("div",{class:"bg-light"},Object(l.h)(b.a,{stores:this.props.stores,data:f,place:v})),Object(l.h)(h.a,{stores:this.props.stores}),Object(l.h)("div",{class:"row bg-light pb-3 pt-3"},Object(l.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 border-bottom"},Object(l.h)("div",{class:"row"},Object(l.h)("div",{class:"col-7 text-overflow"},Object(l.h)("h3",null,s&&Object(l.h)(t,null,Object(l.h)("span",{class:"badge badge-primary"},"#",s)),g&&Object(l.h)(t,null,Object(l.h)("div",{class:"d-flex position-relative"},Object(l.h)("div",{class:"text-center border rounded-circle imageRounded imageRoundedSmall",style:w?`background-image: url("${w}"); background-size: cover;`:""},!w&&Object(l.h)("div",{class:"text-muted",style:"font-size: 20px; padding-top: 3px;"},x)),Object(l.h)("div",{class:"flex-grow-1 pl-3 text-overflow",style:"line-height: 1.2em;"},Object(l.h)("h3",{class:"mb-1"},g.public?Object(l.h)(t,null,Object(l.h)("a",{href:"/teams/public/"+g.uuidv4,class:"stretched-link"},k)):Object(l.h)(t,null,k))))))),Object(l.h)("div",{class:"col-5"},Object(l.h)("small",{class:"float-right mt-1"},Object(l.h)("select",{class:"custom-select custom-select-sm",id:"team",onChange:this.sortby},Object(l.h)("option",{value:""},Object(l.h)(c.c,{id:"story.sort.new"},"Nyeste fÃ¸rst")),Object(l.h)("option",{value:"likes"},Object(l.h)(c.c,{id:"story.sort.likes-desc"},"Flest likes fÃ¸rst")),Object(l.h)("option",{value:"-likes"},Object(l.h)(c.c,{id:"story.sort.likes-asc"},"FÃ¦rrest likes fÃ¸rst")),Object(l.h)("option",{value:"comments"},Object(l.h)(c.c,{id:"story.sort.comments-desc"},"Flest kommentarer fÃ¸rst")),Object(l.h)("option",{value:"-comments"},Object(l.h)(c.c,{id:"story.sort.comments-asc"},"FÃ¦rrest kommentarer fÃ¸rst")))))))),Object(l.h)(d.a,{stores:this.props.stores,story:e,hashtag:s,teamid:o,path:a}))}})||i;e.default=g}.call(this,s("hosL").Fragment)},gOLw:function(t,e,s){"use strict";(function(t){function o(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,o)}return s}function a(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}var i,l=s("hosL"),n=s("Utv1"),c=s("/eY4"),r=(s("X9Km"),s("NMoA")),h=s("VKmm"),d=s("rWES"),b=s("epqT"),m=s("yHBq"),u=s("q/oJ"),p=s("gWxU"),O=s("Nanz"),g=s("ISGx"),j=s("ZOvn");const f=j.a.marginTop(!1),y={loading:!1,limit:10,offset:0,idxConfirm:0,idxSuggestion:1,idxAd:5,sessionid:(new Date).getTime()},v=["id","type","user","team","title"];let w=Object(c.a)(i=class extends l.Component{constructor(e){var s;super(e),s=this,this.reloadStories=async function(){const{appState:t}=s.props.stores;let{limit:e,offset:o}=s.state;o=0,s.setState({offset:o}),await s.loadStoriesPublicFeed({props:s.props,limit:e,offset:o}),t.appContainerScrollTop()},this.setCheckForNewStories=(t=this.props)=>{this.checkForNewStoriesTimer=setInterval(()=>this.checkForNewStories({props:t}),6e4)},this.clearCheckForNewStories=()=>{clearInterval(this.checkForNewStoriesTimer)},this.insertTopRanked=()=>{const{storyStore:t}=this.props.stores,{publicFeed:e,topRankedStories:s}=t,o=n.a.shuffleArray(s),a=[...e];let i=0;const l=new Date;a.forEach((t,e)=>{const s=n.a.parseInputDate(t.date);Math.floor((l.getTime()-s.getTime())/1e3)<86400&&(i=e+1)});const c=a.length;if(c>i+3){for(let t=0,e=3;t<e;t+=1){const e=j.a.randomInt(i,c);n.a.isObject(o[t])&&a.splice(e,0,o[t])}t.localUpdateField("publicFeed",a)}},this.insertAds=()=>{const{idxAd:t}=this.state,{storyStore:e}=this.props.stores,{publicFeed:s}=e,o=[...s];o.splice(t,0,{type:"ad",wrapperClassNames:"row",contentClassNames:"col-12"}),e.localUpdateField("publicFeed",o)},this.insertTeamConfirm=()=>{const{idxConfirm:t}=this.state,{storyStore:e}=this.props.stores,{publicFeed:s}=e,o=[...s];o.splice(t,0,{type:"teamConfirm",wrapperClassNames:"row",contentClassNames:"col-12"}),e.localUpdateField("publicFeed",o)},this.insertTeamSuggestions=()=>{const{idxSuggestion:t}=this.state,{storyStore:e}=this.props.stores,{publicFeed:s}=e,o=[...s];o.splice(t,0,{type:"teamSuggestions",wrapperClassNames:"row",contentClassNames:"col-12"}),e.localUpdateField("publicFeed",o)},this.setLoadMore=()=>{const{storyStore:t}=this.props.stores;t.setLoadMore(()=>{let{limit:t,offset:e}=this.state;e+=t,this.setState({offset:e}),this.loadStoriesPublicFeed({limit:t,offset:e})})},this.unsetLoadMore=()=>{const{storyStore:t}=this.props.stores;t.setLoadMore(()=>{})},this.onTeamClick=(t,e)=>(t.preventDefault(),t.stopPropagation(),this.setState({showTeam:e}),!1),this.hideTeam=()=>{this.setState({showTeam:null})},this.onUserClick=t=>(t.preventDefault(),t.stopPropagation(),!1),this.onDogClick=(t,e,s)=>(t.preventDefault(),t.stopPropagation(),this.setState({showDog:e,dogs:s}),!1),this.hideDog=()=>{this.setState({showDog:null})},this.setupIntersection=()=>{this.setState({handleIntersection:j.a.intersectionObserverCallback});const{storyStore:t}=this.props.stores;this.scrollViewTimer=setInterval(()=>t.postScrollview(j.a.getIntersectionObserverHistory()),3e4)},this.renderContent=({obj:e,idx:s})=>{const{appState:o}=this.props.stores,{path:a}=o,{hashtag:i}=this.props;return"ad"===e.type?Object(l.h)(t,null,Object(l.h)(b.a,{stores:this.props.stores,path:a})):"teamConfirm"===e.type?Object(l.h)(t,null,Object(l.h)(d.a,{stores:this.props.stores})):"teamSuggestions"===e.type?Object(l.h)(t,null,Object(l.h)(h.a,{stores:this.props.stores})):"workout"===e.type?Object(l.h)(t,null,Object(l.h)(g.a,{stores:this.props.stores,feed:e,idx:s,onTeamClick:this.onTeamClick,onUserClick:this.onUserClick,onDogClick:this.onDogClick,holdingStore:"story"})):Object(l.h)(t,null,Object(l.h)(r.a,{stores:this.props.stores,story:e,hashtag:i,key:"story-detail-"+e.id,onTeamClick:this.onTeamClick,onUserClick:this.onUserClick}))},this.state=function(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?o(Object(s),!0).forEach((function(e){a(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):o(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}({},y),this.inputRef={},this.ref={}}async loadStoriesPublicFeed({props:t=this.props,limit:e,offset:s}){const{hashtag:o,hashtags:a,teamid:i}=t,{storyStore:l}=t.stores;await l.loadPublicFeed({hashtag:o,hashtags:a,teamid:i,limit:e,offset:s,sort:void 0}),s||(this.insertTopRanked(),this.insertTeamConfirm())}async checkForNewStories({props:t=this.props}){const{hashtag:e,hashtags:s,teamid:o}=t,{storyStore:a}=t.stores;await a.checkForNewStories({hashtag:e,hashtags:s,teamid:o})}componentWillMount(){this.setupIntersection()}componentDidMount(){const{limit:t}=this.state;this.loadStoriesPublicFeed({limit:t,offset:0}),this.setLoadMore(),this.setCheckForNewStories()}componentWillUnmount(){this.unsetLoadMore();const{storyStore:t}=this.props.stores;t.postScrollview(j.a.getIntersectionObserverHistory()),clearInterval(this.scrollViewTimer),this.clearCheckForNewStories()}componentWillReceiveProps(t){if(t.hashtag!==this.props.hashtag||t.path!==this.props.path){const{limit:e}=this.state;this.loadStoriesPublicFeed({props:t,limit:e,offset:0})}}render(){const{loading:e,handleIntersection:s,sessionid:o,showTeam:a,showDog:i}=this.state,{storyStore:n,appState:c}=this.props.stores,{publicFeed:r,hasNewStories:h,publicDogs:d}=n,{darkmode:b}=c;return Object(l.h)(t,null,a&&Object(l.h)(u.a,null,Object(l.h)(p.default,{stores:this.props.stores,teamid:a,marginTop:"0px;",marginBottom:"0px;",back:this.hideTeam})),i&&Object(l.h)(u.a,null,Object(l.h)(O.default,{stores:this.props.stores,dogid:i,marginTop:"0px;",marginBottom:"0px;",back:this.hideDog,dogs:d})),Object(l.h)("div",{class:"w-100"},h&&Object(l.h)(t,null,Object(l.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 d-flex justify-content-center fixed-top",style:`margin-top: ${f};`},Object(l.h)("button",{class:"btn btn-sm btn-primary rounded-pill",onClick:this.reloadStories},"New stories"))),Object(l.h)(m.a,{data:r,wrapperClassNames:"row pb-1",contentClassNames:`col-12 col-sm-8 col-lg-6 offset-sm-2 offset-lg-3 my-1 position-relative rounded rounded-lg py-3 bg-${b?"black":"white"} shadow-sm`,renderContent:this.renderContent,dataFields:v,handleIntersection:s,sessionid:o}),e&&Object(l.h)("div",{class:"d-flex justify-content-center"},Object(l.h)("div",{class:"spinner-border text-primary",role:"status"},Object(l.h)("span",{class:"sr-only"},"Loading...")))))}})||i;e.a=w}).call(this,s("hosL").Fragment)},rWES:function(t,e,s){"use strict";(function(t){function o(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,o)}return s}function a(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}var i,l=s("hosL"),n=s("Utv1"),c=s("/eY4"),r=s("OhSV"),h=s("ZOvn");s("eQ6k");const d={confirmed:{},deleted:{}};let b=Object(c.a)(i=class extends l.Component{constructor(t){super(t),this.confirmRequest=t=>{const{team:e,user:s,follow:o}=t.target.closest("button").dataset,{teamStore:a}=this.props.stores;a.confirmFollowRequest({team:parseInt(e,10),user:parseInt(s,10)});const{confirmed:i}=this.state;i[`${e}-${s}`]=!0,this.setState({confirmed:i}),o&&a.followRequestUser(s)},this.deleteRequest=t=>{const{team:e,user:s}=t.target.closest("button").dataset,{teamStore:o}=this.props.stores;o.deleteFollowRequest({team:parseInt(e,10),user:parseInt(s,10)});const{deleted:a}=this.state;a[`${e}-${s}`]=!0,this.setState({deleted:a})},this.state=function(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?o(Object(s),!0).forEach((function(e){a(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):o(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}({},d)}async loadTeams(){const{teamStore:t}=this.props.stores;await t.load({query:{},addData:["followRequests"]})}componentDidMount(){this.loadTeams()}render(){const{deleted:e={},confirmed:s={}}=this.state,{teamStore:o,appState:a}=this.props.stores,{teams:i,hasFollowRequests:c,followRequests:d=[]}=o,{darkmode:b}=a;return c?Object(l.h)("div",{class:"row pb-1"},Object(l.h)("div",{class:`col-12 col-sm-8 col-lg-6 offset-sm-2 offset-lg-3 mb-0 position-relative rounded rounded-lg py-3 bg-${b?"black":"white"} shadow-sm`},Object(l.h)("div",{class:"container-fluid"},Object(l.h)("div",{class:"row"},Object(l.h)("div",{class:"col-12"},Object(l.h)("h5",null,Object(l.h)(r.c,{id:"teams.connect.teams-follow-requests"},"ForespÃ¸rsel om Ã¥ fÃ¸lge"),":"))),Object(l.h)("div",{class:"row"},Object(l.h)("div",{class:"d-flex flex-row flex-nowrap",style:"overflow: auto;"},n.a.isArray(i)&&i.map(o=>Object(l.h)(t,null,o&&n.a.isArray(o.followRequests)&&o.followRequests.map(a=>{const i=a.image&&a.image.s3SmallLink?a.image:null,n=e[`${o.id}-${a.id}`],c=s[`${o.id}-${a.id}`],b=d.find(t=>t.user.id===a.id);return Object(l.h)("div",{class:"mr-2 py-2 border rounded-lg",style:"width: 150px;"},Object(l.h)("div",{class:"text-center border rounded-circle imageRounded imageRoundedSmall mx-auto",style:i?`background-image: url("${i.s3SmallLink}");`:""},!i&&Object(l.h)("div",{class:"text-muted font-weight-lighter",style:"font-size: 20px; padding-top: 5px;"},h.a.displayNameShort(a))),Object(l.h)("small",null,Object(l.h)("div",{class:"text-overflow text-center"},Object(l.h)("strong",null,h.a.displayName(a)),Object(l.h)("br",null)),Object(l.h)("div",{class:"text-overflow text-center"},Object(l.h)(r.c,{id:"teams.connect.wants-to-follow"},"wants to follow your team:")),Object(l.h)("div",{class:"text-overflow text-center"},Object(l.h)("strong",null,h.a.displayName(o)))),c||n?Object(l.h)(t,null,Object(l.h)("div",{class:"text-center"},c?Object(l.h)("div",{class:"text-success"},Object(l.h)(r.c,{id:"teams.connect.confirmed"},"Confirmed")," ",Object(l.h)("i",{class:"fas fa-check"})):Object(l.h)("div",{class:"text-danger"},Object(l.h)(r.c,{id:"teams.connect.deleted"},"Deleted")," ",Object(l.h)("i",{class:"fas fa-trash-alt"})))):Object(l.h)(t,null,Object(l.h)("div",null,Object(l.h)("button",{class:"btn btn-sm btn-block btn-success text-overflow mt-1",onClick:this.confirmRequest,"data-team":o.id,"data-user":a.id},Object(l.h)(r.c,{id:"teams.connect.confirm"},"Confirm")),b&&b.public>0&&Object(l.h)("button",{class:"btn btn-sm btn-block btn-outline-success text-overflow mt-1",onClick:this.confirmRequest,"data-team":o.id,"data-user":a.id,"data-follow":!0},Object(l.h)(r.c,{id:"teams.connect.confirm-and-follow"},"Confirm & follow back")),Object(l.h)("div",{class:"mt-3"},Object(l.h)("small",null,Object(l.h)("button",{class:"btn btn-sm btn-block btn-link text-overflow",style:"font-size: 1.0em;",onClick:this.deleteRequest,"data-team":o.id,"data-user":a.id},Object(l.h)(r.c,{id:"teams.connect.delete"},"Del")))))))}))))),Object(l.h)("details",{class:"mt-3"},Object(l.h)("summary",null,Object(l.h)("small",null,Object(l.h)(r.c,{id:"teams.connect.how-summary"},"How does this work?"))),Object(l.h)("p",null,Object(l.h)(r.c,{id:"teams.connect.how-text"},"What can followers see when I grant them access to follow? The answer is very little. They can see main details of the workouts you share and name of the dogs. That's all. Try to follow a team and check out the workout tab.")))))):""}})||i;e.a=b}).call(this,s("hosL").Fragment)},w93r:function(t,e,s){"use strict";(function(t){var o,a=s("hosL"),i=s("/eY4"),l=s("Utv1"),n=s("OhSV"),c=(s("X9Km"),s("QkTp")),r=s("ZOvn");let h=Object(i.a)(o=class extends a.Component{constructor(t){super(t),this.toggleyrWeather=()=>{const{showWeather:t}=this.state;this.setState({showWeather:!t})},this.state={},this.inputRef={}}async loadWeather(){const{userStore:t}=this.props.stores;this.setState({isLoading:!0});const{user:e}=t;if(e.currentLocationInfo&&e.currentLocationInfo.coords){const{latitude:s,longitude:o,altitude:a}=e.currentLocationInfo.coords;t.getWeatherUser({lat:s,lon:o,altitude:a}),t.formatWeather()}}componentDidMount(){this.loadWeather()}render(){const{showWeather:e}=this.state,{place:s}=this.props,{userStore:o}=this.props.stores,{yrWeather:i,yrWeatherKeys:h,yrWeatherFormatted:d,user:b}=o,{currentLocationGeocode:m}=b;return i&&s?e?Object(a.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 px-0 mb-4"},m&&m.formatted_address&&Object(a.h)("h5",null,m.formatted_address),Object(a.h)("div",{class:"table-responsive",onTouchstart:r.a.captureEvents,onTouchend:r.a.captureEvents,onTouchmove:r.a.captureEvents,onScroll:r.a.captureEvents},Object(a.h)("table",{class:"table table-striped table-sm"},Object(a.h)("thead",null,Object(a.h)("tr",null,Object(a.h)("th",{class:"text-center"},"Â "),Object(a.h)("th",{class:"text-center"},Object(a.h)(n.c,{id:"weather.night"},"Night")),Object(a.h)("th",{class:"text-center"},Object(a.h)(n.c,{id:"weather.morning"},"Morning")),Object(a.h)("th",{class:"text-center"},Object(a.h)(n.c,{id:"weather.afternoon"},"Afternoon")),Object(a.h)("th",{class:"text-center"},Object(a.h)(n.c,{id:"weather.evening"},"Evening")),Object(a.h)("th",{class:"text-center"},Object(a.h)(n.c,{id:"weather.temp"},"Temp")),Object(a.h)("th",{class:"text-center"},Object(a.h)(n.c,{id:"weather.rainfall"},"Rainfall")),Object(a.h)("th",{class:"text-center"},Object(a.h)(n.c,{id:"weather.wind"},"Wind")))),Object(a.h)("tbody",null,h&&h.map(e=>Object(a.h)(t,null,Object(a.h)("tr",null,Object(a.h)("td",{class:"text-center"},Object(a.h)("nobr",null,e)),Object(a.h)("td",{class:"text-center"},Object(a.h)("nobr",null,l.a.getNestedValue(d[e].night,"next_6_hours.summary.symbol_code")&&Object(a.h)("img",{style:"width: 40px;",src:`./assets/svg/${l.a.getNestedValue(d[e].night,"next_6_hours.summary.symbol_code")}.svg`}))),Object(a.h)("td",{class:"text-center"},Object(a.h)("nobr",null,l.a.getNestedValue(d[e].morning,"next_6_hours.summary.symbol_code")&&Object(a.h)("img",{style:"width: 40px;",src:`./assets/svg/${l.a.getNestedValue(d[e].morning,"next_6_hours.summary.symbol_code")}.svg`}))),Object(a.h)("td",{class:"text-center"},Object(a.h)("nobr",null,l.a.getNestedValue(d[e].day,"next_6_hours.summary.symbol_code")&&Object(a.h)("img",{style:"width: 40px;",src:`./assets/svg/${l.a.getNestedValue(d[e].day,"next_6_hours.summary.symbol_code")}.svg`}))),Object(a.h)("td",{class:"text-center"},Object(a.h)("nobr",null,l.a.getNestedValue(d[e].evening,"next_6_hours.summary.symbol_code")&&Object(a.h)("img",{style:"width: 40px;",src:`./assets/svg/${l.a.getNestedValue(d[e].evening,"next_6_hours.summary.symbol_code")}.svg`}))),Object(a.h)("td",{class:"text-center"},Object(a.h)("nobr",null,Object(a.h)("i",{class:"fas fa-temperature-low text-muted ml-1 mr-2"}),Object(a.h)("span",{class:r.a.getTemperatureColor(l.a.getNestedValue(d[e],"air_temperatures_min"))},Object(a.h)(c.a,{stores:this.props.stores,value:l.a.getNestedValue(d[e],"air_temperatures_min")})),Object(a.h)("span",{class:"text-muted font-weight-lighter mx-1"},"-"),Object(a.h)("span",{class:r.a.getTemperatureColor(l.a.getNestedValue(d[e],"air_temperatures_max"))},Object(a.h)(c.a,{stores:this.props.stores,value:l.a.getNestedValue(d[e],"air_temperatures_max")})))),Object(a.h)("td",{class:"text-center"},Object(a.h)("nobr",null,l.a.format(l.a.getNestedValue(d[e],"precipitation_amount"),1)," ",Object(a.h)("span",{class:"text-muted font-weight-lighter"},"mm"))),Object(a.h)("td",{class:"text-center"},Object(a.h)("nobr",null,Object(a.h)("i",{class:"fas fa-wind text-muted ml-1"})," ",Object(a.h)("span",{class:r.a.getWindSpeedColor(l.a.getNestedValue(d[e],"wind_speeds_min"))},l.a.format(l.a.getNestedValue(d[e],"wind_speeds_min"),1))," ",Object(a.h)("span",{class:"text-muted font-weight-lighter"},"-")," ",Object(a.h)("span",{class:r.a.getWindSpeedColor(l.a.getNestedValue(d[e],"wind_speeds_max"))},l.a.format(l.a.getNestedValue(d[e],"wind_speeds_max"),1))," ",Object(a.h)("span",{class:"text-muted font-weight-lighter"},"m/s"))))))))),Object(a.h)("button",{type:"button",class:"btn btn-block btn-primary btn-sm",onClick:this.toggleyrWeather},Object(a.h)("i",{class:"fas fa-times-circle"})," ",Object(a.h)(n.c,{id:"weather.close"},"Close"))):Object(a.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 px-0"},i&&i.length>0&&Object(a.h)("div",{class:"container-fluid px-0"},Object(a.h)("div",{class:"row",onClick:this.toggleyrWeather},i&&i.length>0&&i.slice(0,1).map(t=>Object(a.h)("div",{class:"col-12 text-right"},Object(a.h)("nobr",null,Object(a.h)("small",{class:"font-weight-light text-muted"},l.a.isoTime(t.time)),":",Object(a.h)("img",{src:`./assets/svg/${l.a.getNestedValue(t,"next_1_hours.summary.symbol_code")}.svg`,class:"ml-2",style:"height: 20px;"}),l.a.getNestedValue(t,"next_1_hours.details.precipitation_amount")>0&&Object(a.h)("small",{class:"ml-2"},l.a.getNestedValue(t,"next_1_hours.details.precipitation_amount"),Object(a.h)("span",{class:"text-muted font-weight-lighter"},"mm")),Object(a.h)("small",{class:"ml-2"},Object(a.h)("i",{class:"fas fa-temperature-low text-muted"})," ",Object(a.h)(c.a,{stores:this.props.stores,value:l.a.getNestedValue(t,"instant.details.air_temperature")})),Object(a.h)("small",{class:"ml-2"},Object(a.h)("i",{class:"fas fa-wind text-muted"})," ",l.a.getNestedValue(t,"instant.details.wind_speed"),Object(a.h)("span",{class:"text-muted font-weight-lighter"},"m/s")," ",Object(a.h)("span",{class:"text-muted font-weight-lighter"},r.a.windDirection(l.a.getNestedValue(t,"instant.details.wind_from_direction"))))),Object(a.h)("br",null)))))):""}})||o;e.a=h}).call(this,s("hosL").Fragment)},yHBq:function(t,e,s){"use strict";(function(t){function o(){return(o=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var s=arguments[e];for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(t[o]=s[o])}return t}).apply(this,arguments)}var a,i,l=s("hosL"),n=s("/eY4"),c=s("Utv1");let r=Object(n.a)(a=class extends l.Component{constructor(t){super(t),this.state={},this.containerRef=null}componentWillUnmount(){const{removeIntersectionObserver:t}=this.props;t&&t(this.containerRef)}componentDidMount(){const{addIntersectionObserver:t}=this.props;t&&t(this.containerRef)}render(){const{wrapperClassNames:t="",contentClassNames:e="",renderContent:s,obj:a={},idx:i,dataFields:n,dataValues:c,sessionid:r}=this.props,h={};return r&&(h.sessionid=r),n.forEach(t=>h["data-"+t]=encodeURI(c[t]||a[t])),Object(l.h)("div",o({class:""+t,ref:t=>this.containerRef=t,"data-idx":i},h),Object(l.h)("div",{class:""+e,style:"display: block;"},s({obj:a,idx:i})))}})||a,h=Object(n.a)(i=class extends l.Component{constructor(t){super(t),this.deleteIntersectionObserver=()=>{this.intersectionObserver=null},this.handleIntersection=t=>{const{handleIntersection:e}=this.props;"function"==typeof e&&e(t),t.forEach(t=>{const{isIntersecting:e}=t,{height:s=0}=t.target.dataset,o=Math.max(t.target.childNodes[0].offsetHeight,t.target.offsetHeight,t.target.scrollHeight);e?(t.target.childNodes[0].style.display="block",t.target.style.minHeight=(o>s?o:s)+"px"):t.target.style.minHeight&&(t.target.style.minHeight=(o>s?o:s)+"px",t.target.childNodes[0].style.display="none")})},this.setupIntersectionObserver=()=>{if(!("IntersectionObserver"in window)||!("IntersectionObserverEntry"in window)||!("intersectionRatio"in window.IntersectionObserverEntry.prototype))return!1;this.intersectionObserver=new IntersectionObserver(this.handleIntersection,{root:null,rootMargin:"100px",threshold:.1})},this.addIntersectionObserver=t=>{this.intersectionObserver&&t&&this.intersectionObserver.observe(t)},this.removeIntersectionObserver=t=>{this.intersectionObserver&&t&&this.intersectionObserver.unobserve(t)},this.state={}}componentWillMount(){this.setupIntersectionObserver()}componentWillUnmount(){this.deleteIntersectionObserver()}render(){const{data:e=[],wrapperClassNames:s="row pb-4 bg-light",contentClassNames:o="col-12 col-sm-8 col-lg-6 offset-sm-2 offset-lg-3 mb-0 position-relative rounded rounded-lg py-3 shadow-sm",renderContent:a=(()=>Object(l.h)(t,null,"Missing render function!")),dataFields:i=[],dataValues:n={}}=this.props;return Object(l.h)("div",{class:"w-100"},e&&e.filter(t=>c.a.isObject(t)).map((e,c)=>{const h=e.hasOwnProperty("wrapperClassNames")?e.wrapperClassNames:s,d=e.hasOwnProperty("contentClassNames")?e.contentClassNames:o;return Object(l.h)(t,null,Object(l.h)(r,{key:`fastline-${c}-${e.id}`,obj:e,idx:c,addIntersectionObserver:this.addIntersectionObserver,removeIntersectionObserver:this.removeIntersectionObserver,wrapperClassNames:h,contentClassNames:d,renderContent:a,dataFields:i,dataValues:n}))}))}})||i;e.a=h}).call(this,s("hosL").Fragment)}}]);
//# sourceMappingURL=route-stories.chunk.57130.esm.js.map