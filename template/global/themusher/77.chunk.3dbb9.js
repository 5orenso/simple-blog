(window.webpackJsonp=window.webpackJsonp||[]).push([[77],{"8j+j":function(e,t,r){"use strict";r.r(t),function(e){function n(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){s(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function s(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function a(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}function i(e,t){var r=void 0!==e.musher;return(void 0!==t.musher)-r||!0===r&&e.musher.bib-t.musher.bib||0}var c,l,u=r("hosL"),d=r("Utv1"),h=r("/eY4"),f=(r("OhSV"),r("ZOvn")),p=r("eT2M"),m=r.n(p),b=f.a.marginTop(!0),v=f.a.marginBottom(),g={isLoading:!1,contentIsNotLoaded:!0,reloadInSec:null,reloadLastEpoch:null,reloadIsActive:!1},O=(Object(h.a)(c=function(t){function r(e){var r;return(r=t.call(this,e)||this).initComponent=function(){var e=Math.floor((new Date).getTime()/1e3);r.setState({reloadIsActive:!0,reloadLastEpoch:e},(function(){return r.tickReloadTimeer()}))},r.state=o({},g),r.updateTimer={},r}a(r,t);var n=r.prototype;return n.tickReloadTimeer=function(){var e=this,t=this.state,r=t.reloadLastEpoch;if(t.reloadIsActive){var n=Math.floor((new Date).getTime()/1e3);this.setState({reloadInSec:60-(n-r)}),clearTimeout(this.updateTimer.tick),this.updateTimer.tick=setTimeout((function(){return e.tickReloadTimeer()}),1e3)}return!1},n.componentDidMount=function(){this.initComponent()},n.componentWillUnmount=function(){clearTimeout(this.updateTimer.tick)},n.render=function(){var t=Math.floor(d.a.normalizeBetween(this.state.reloadInSec,0,60,0,100));return Object(u.h)(e,null,Object(u.h)("div",{class:"progress fixed-top",style:"height: 2px; z-index: 999999;"},Object(u.h)("div",{class:"progress-bar",role:"progressbar",style:"width: "+t+"%;","aria-valuenow":t,"aria-valuemin":"0","aria-valuemax":"100"})))},r}(u.Component)),Object(h.a)(l=function(t){function r(e){var r;return(r=t.call(this,e)||this).loadLiveRaceResults=function(e,t,n){return new Promise((function(o,s){var a;return void 0===e&&(e=r.props),a=e.stores.raceStore,Promise.resolve(a.getRaceTrackerData(a.race.raceTrackerRace)).then((function(){try{return a.getRaceTrackerActiveTeams(t,n),o()}catch(e){return s(e)}}),s)}))},r.loadRaceResults=function(e,t,n){return new Promise((function(o,s){var a;return void 0===e&&(e=r.props),a=e.stores.raceStore,Promise.resolve(a.loadWorkoutSummary(t,e.raceid)).then((function(){try{return a.getWorkoutSummaryActiveTeams(t,n),o()}catch(e){return s(e)}}),s)}))},r.loadRace=function(e){return new Promise((function(t,n){var o,s,a,i,c,l,u,d,h,f,p,m;return void 0===e&&(e=r.props),r.setState({isLoading:!0}),s=(o=e.stores).raceStore,a=o.appState,c=(i=e).classid,Promise.resolve(s.load(i.raceid)).then(function(){try{if(l=s.race,u=a.focusOnMushers,h=void 0===(d=a.selectedClassIds)?[]:d,f=c||h[0],c&&a.toggleSelectedClassId(c,!0),(p=l.classes.filter((function(e){return e.id===f})).filter((function(e){return e.contestants&&e.contestants.length>0})).map((function(e){return e.contestants.filter((function(e){return e.team>0})).map((function(e){return e.team}))})).flat()).length>0)return Promise.resolve(s.loadTeams(p.join(","))).then(function(){try{return o.call(this)}catch(e){return n(e)}}.bind(this),n);function o(){function o(){return s.getAllClassesSortedBy(),(m=s.getClassById(f))&&m.raceTrackerResults&&s.getRacetrackerResults(m.raceTrackerResults),clearTimeout(r.updateTimer.reload),r.updateTimer.reload=setTimeout((function(){return new Promise((function(t){var n=Math.floor((new Date).getTime()/1e3);return r.setState({reloadLastEpoch:n}),r.loadRace(e),t()}))}),6e4),r.setState({isLoading:!1}),t()}return l.liveRace>0?Promise.resolve(r.loadLiveRaceResults(r.props,p,u)).then(function(){try{return o.call(this)}catch(e){return n(e)}}.bind(this),n):Promise.resolve(r.loadRaceResults(r.props,p,u)).then(function(){try{return o.call(this)}catch(e){return n(e)}}.bind(this),n)}return o.call(this)}catch(e){return n(e)}}.bind(this),n)}))},r.toggleFocusOnMusher=function(e){var t=r.props.stores,n=t.appState,o=t.raceStore;n.toggleFocusOnMusher(e.target.parentElement.dataset.musherid||e.target.dataset.musherid);var s=n.focusOnMushers;o.race.liveRace>0?o.getRaceTrackerActiveTeams(null,s):o.getWorkoutSummaryActiveTeams(null,s)},r.state=o({},g),r.inputRef={},r.updateTimer={},r}a(r,t);var n=r.prototype;return n.componentWillUnmount=function(){clearTimeout(this.updateTimer.reload),clearTimeout(this.updateTimer.tick)},n.componentDidMount=function(){this.loadRace()},n.componentWillReceiveProps=function(e){this.props.classid!==e.classid&&this.loadRace(e)},n.render=function(){var t=this,r=this.props.stores,n=r.raceStore,o=r.appState,s=this.props,a=s.classid,c=s.position,l=void 0===c?"right":c,h=s.limit,p=void 0===h?10:h,g=o.focusOnMushers,O=void 0===g?[]:g,j=n.race,y=void 0===j?{}:j,T=n.classes,w=void 0===T?[]:T,k=n.raceTrackerResults,x=new Date(y.endDate);x.setHours(x.getHours()+2);var R=y.classes&&y.classes.find((function(e){return e.id===a}))||{},S=[];return k&&k.data?S=k.data.map((function(e){var t=n.raceTrackerMapLine(e),r=parseInt(t.Bib,10),o={};return w&&w[R.id].contestants&&(o=w[R.id].contestants.find((function(e){return e.musher.bib===r}))||{}),o})):w[R.id]&&w[R.id].contestants&&(S=w[R.id].contestants.sort(i).slice(0,p).map((function(e){return e}))),Object(u.h)(e,null,Object(u.h)("div",{class:"fixed-top "+m.a.hoverElement,style:"height: 100px;"},Object(u.h)("div",{class:""+m.a.hoverelementonly},Object(u.h)("div",{class:"row"},y.classes&&y.classes.sort((function(e,t){return e.distance-t.distance})).map((function(t){return Object(u.h)(e,null,Object(u.h)("div",{class:"col"},Object(u.h)("a",{class:"btn btn-block "+(t.id===a?"btn-success":"btn-outline-success")+" text-nowrap",style:"text-overflow: ellipsis; overflow: hidden;","data-id":t.id,href:"/tv/top10/"+y.id+"/"+t.id+"/"+l},"Left: ",t.title),Object(u.h)("a",{class:"btn btn-link text-nowrap "+("left"===l?"float-right":"float-left"),style:"text-overflow: ellipsis; overflow: hidden;","data-id":t.id,href:"/tv/top10/"+y.id+"/"+t.id+"/"+("left"===l?"right":"left")},"left"===l?Object(u.h)(e,null,"right ",Object(u.h)("i",{class:"fas fa-angle-right"})):Object(u.h)(e,null,Object(u.h)("i",{class:"fas fa-angle-left"})," left"))))}))))),Object(u.h)("div",{class:"container-fluid pt-5",style:"margin-bottom: "+v+"; margin-top: "+b+"; height: calc(100% - "+v+" - "+b+");"},Object(u.h)("div",{class:"row"},Object(u.h)("div",{class:"left"===l?"col-4 ml-5":"col-4 offset-8 mr-5",style:"font-size: 1.5em; line-height: 1.0em;"},Object(u.h)("table",{class:"table table-sm table-borderless rounded-lg"},Object(u.h)("thead",null,Object(u.h)("tr",null,Object(u.h)("td",{colspan:"2",class:"px-4 py-4 overflow-hidden",style:"background-color: #FB4114; color: #ffffff; border-radius: 10px 0 0 0; font-size: 1.4em;"},Object(u.h)("nobr",null,R.title)),Object(u.h)("td",{class:"px-3 text-center py-4 overflow-hidden",style:"background-color: #FB4114; color: #ffffff; border-radius: 0 10px 0 0 ; font-size: 1.1em;"},"Time"))),Object(u.h)("tbody",{style:' background-color: #1C1F4C; background-image: url("https://themusher.app/assets/tv-single-background.jpg"); background-size: cover !important; background-position: 0 0; '},S&&S.map((function(r,o){var s=r.musher,a=void 0===s?{}:s,i=r.currentTeam,c=r.currentResults,l=void 0===c?{}:c,h=r.normalizedDuration,p=r.isDone,m=r.totalWorkoutTimeUsedSec;n.getTotalsByTeamId((void 0===i?{}:i).id);return Object(u.h)(e,null,Object(u.h)("tr",{style:"border-bottom: 1px solid #7B312F;"},Object(u.h)("td",{class:"text-center align-middle ml-0 pl-0",style:"width: 50px; color: #ffffff; font-size: 1.2em; line-height: 1.2em;"},Object(u.h)("div",{class:"d-flex justify-content-start"},Object(u.h)("div",{class:"pl-3 pr-2 w-100 clearfix rounded-pill-right",style:"background-color: "+f.a.getRankingColor(o+1)},a.bib||o+1))),Object(u.h)("td",{class:"px-3 py-3",style:"color: #ffffff; font-size: 1.2em;"},Object(u.h)("div",{class:"text-overflow",style:"max-width: 368px; line-height: 1.1em;"},Object(u.h)("span",{class:"float-right",onClick:t.toggleFocusOnMusher,"data-musherid":a.id},O.indexOf(a.id)>-1?Object(u.h)("i",{class:"fas fa-star text-warning"}):Object(u.h)("i",{class:"far fa-star"})),Object(u.h)("nobr",null,a.flag," ",a.firstname," ",a.lastname,Object(u.h)("br",null)))),Object(u.h)("td",{class:"text-center align-middle",style:"width: 150px; color: #ffffff; font-size: 1.2em;"},y.nonstop?Object(u.h)(e,null,Object(u.h)("nobr",null,d.a.secToHms(m)||"n/a")):Object(u.h)(e,null,1===p?Object(u.h)(e,null,Object(u.h)("nobr",null,d.a.secToHms(h)||"n/a")):Object(u.h)(e,null,Object(u.h)("nobr",null,d.a.secToHms(l.duration-l.rest)||"n/a"))))))}))),Object(u.h)("tfoot",null,Object(u.h)("tr",null,Object(u.h)("td",{colspan:"3",class:"px-5 py-4 text-center overflow-hidden",style:"background-color: #FB4114; color: #ffffff; border-radius: 0 0 10px 10px; font-size: 1.1em;"},Object(u.h)("nobr",{class:"mr-4"},"QPaws app"),Object(u.h)("img",{src:"https://themusher.app/assets/appstore-download.png",height:"40",class:"ml-5 mr-1"}),Object(u.h)("img",{src:"https://themusher.app/assets/playstore-download.png",height:"40",class:"mx-1"})))))))))},r}(u.Component))||l);t.default=O}.call(this,r("hosL").Fragment)},eT2M:function(e){e.exports={hoverelementonly:"hoverelementonly__3_DrK",hoverElement:"hoverElement__3ED7Q",hoverelementhide:"hoverelementhide__2AP13"}}}]);
//# sourceMappingURL=77.chunk.3dbb9.js.map