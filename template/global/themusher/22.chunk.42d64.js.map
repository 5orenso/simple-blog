{"version":3,"sources":["webpack:///./components/util/scrollIntoView.js","webpack:///./components/team/formGraph.js","webpack:///./components/workout/totals.js","webpack:///./components/form/links.js","webpack:///./components/workout/status.js","webpack:///./components/user/index.js","webpack:///./components/workout/calendarPlan.js","webpack:///./components/dog/index.js","webpack:///./components/form/achievements.js","webpack:///./components/workout/graphAvg.js","webpack:///./components/form/files.js","webpack:///./components/workout/graph.js","webpack:///./components/user/invite.js","webpack:///./routes/teams/detail.js","webpack:///./components/ad/index.js","webpack:///./components/team/connect-confirm.js","webpack:///./components/premium/badge.js"],"names":["initialState","ScrollIntoView","observer","props","state","container","componentDidMount","this","horizontal","vertical","behavior","inline","block","scrollIntoView","render","ref","c","Component","FormGraph","teamStore","stores","graphFitness","graphFatigue","graphForm","length","xTicksAll","map","e","date","partsLength","Math","floor","xTicks","i","l","push","id","class","width","height","showXTicks","paddingTop","lineFromXzero","lineFromXmax","dataLeft","dataFillLeft","legendLeft","dataRight","legendRight","showYTicksLeft","avgWindowLeft","smoothLeft","showYTicksRight","scrollToRight","WorkoutTotals","loadAll","loadTeams","currentMonth","currentYear","Date","getMonth","getFullYear","month","year","load","query","team","currentTeam","skipMusherWorkoutSummary","addData","componentWillReceiveProps","nextProps","currentSeasonSummary","currentSeason","prevSeasonSummary","prevSeason","seasonStart","parseInt","findWorkoutSummary","findWorkoutSummaryTotal","value","distanceKm","smallUnit","elevation","util","secToHms","duration","speedAvg","Achievements","handleAdd","updateField","object","field","data","setState","name","url","removeLink","dogStore","target","closest","dataset","linkId","showFiles","links","file","isoDate","createdDate","onClick","data-name","data-id","for","type","aria-describedby","onInput","linkstate","WorkoutStatus","loadWorkoutPlans","workoutPlanCurrent","workoutPlanStore","seasonYear","seasonMonth","workoutPlans","loadWorkoutSummary","userStore","getWorkoutSummary","dog","lastPlanMonth","workoutPlan","user","language","MONTHS","mu","getMonths","findTeam","months","monthRange","style","planMonth","sumWorkoutPlanMonth","percCompleted","findWorkoutSummaryMonth","format","role","aria-valuenow","aria-valuemin","aria-valuemax","fields","href","User","removeUser","email","parentNode","console","log","removeMember","adminUpdateUser","clearTimeout","updateTimer","setTimeout","doAdminUpdateUser","simulateUser","getSimulateUser","currentUser","isAdmin","teams","findTeams","summary","findMusherSummary","isTeamAdmin","image","getImage","displayName","cellphone","asUrl","rel","facebook","asFacebookLink","instagram","asInstagramLink","snapchat","asSnapchatLink","data-email","JSON","stringify","settings","subscription","deviceInfo","notifications","notificationTopics","applications","shadowTags","garmin","strava","currentLocationGeocode","lastActivityEpoch","activities","veterinaryAllowed","checked","twoFactorLogin","isVeterinary","firstname","lastname","avgDistance","avgElevation","avgDuration","avgDogs","data-team","RED_DAYS","Calendar","setFocus","inputRef","focus","editMonth","showInput","inputYear","parentElement","inputMonth","inputDay","inputWeek","newDistance","distance","editWeek","week","editDay","day","saveDistance","saveField","resetInput","teamName","workoutStore","getYear","insert","title","nextDay","addDays","getDate","getWeek","checkKeydown","key","updateWorkoutPlanTips","hideWorkoutPlanTips","toggleTips","newValue","updateSetting","darkmode","appState","DAYS","getDays","currentDay","currentEpoch","getTime","basehref","showNavigation","showHeader","monthNum","yearNum","getNextMonth","nextMonth","nextYear","getPrevMonth","prevMonth","prevYear","daysOfMonth","getDaysInMonth","weeksInMonth","getWeeksInMonth","daysOfWeek","getDaysInWeek","totalDistanceKmMonth","totalDistanceKmMonthPlan","totalWorkoutDistanceKmMonth","isMonthInTheFuture","summaryMonth","findWorkoutPlanSummaryMonth","tips","tipsMonth","padDate","hasTipsMonth","comments","placeholder","linkState","onKeydown","autocomplete","getDay","weekObj","summaryWeek","findWorkoutPlanSummaryWeek","asNumber","isWeekInTheFuture","totalWeek","totalWorkoutWeek","tipsWeek","hasTipsWeek","data-week","data-year","data-distance","yyyy","mm","dd","isDayInTheFuture","summaryWorkout","findWorkoutSummaryWeekDay","findWorkoutPlanSummaryDay","isChosen","isToday","isDayOff","indexOf","data-day","data-month","getPlanColor","count","colspan","totalDistance","time","totalWorkouts","avgSpeed","Dog","viewmode","workoutSummary","dogStatuses","statuses","findDogstatus","status","dogVaccines","findVaccineStatuses","dogVaccineLogStatuses","findVaccineLogStatuses","chipId","dogHistoryStatuses","findHistoryStatuses","dogStatus","dogPosition","findDogposition","position","teamNames","forEach","hasBirthday","birth","daysUntilBirthday","ceil","daysUntilNextBirthday","s3SmallLink","ucfirst","findHarness","harness","icon","age","deceased","gender","shortname","idx","history","images","weight","bodyScore","v","endDate","vaccineType","positions","lead","point","wheel","specialNeeds","lang","filter","vac","inKarens","vaccineAgens","description","removeAchievement","achievementId","achievements","WorkoutGraphAvg","withText","distanceAvgAll","distanceAvg","ascendAvgAll","ascendAvg","speedAvgAll","durationAvgAll","durationAvg","realDurationAvgAll","realDurationAvg","loadIndex","loadIndexAll","plan","teamAmbition","teamType","teamId","graphAvgWorkoutStatsDistance","graphAvgWorkoutStatsElevation","graphAvgWorkoutStatsSpeed","graphAvgWorkoutStatsDuration","graphAvgWorkoutStatsLoadIndex","graphWorkoutAvgWeekDistanceCurrent","graphWorkoutAvgWeekElevationCurrent","graphWorkoutAvgWeekSpeedCurrent","graphWorkoutAvgWeekDurationCurrent","graphWorkoutAvgWeekLoadIndexCurrent","graphAvgWorkoutStatsCount","weekRange","wo","partSize","xTicksVal","val","smoothRight","yTicksLeftPostfix","imperial","unitLeft","yTicksLeftVal","Files","handleAddImage","files","uploadStatus","before","after","autoOpen","apiUrl","WorkoutGraph","rest","ascend","avgImages","sledWeight","rating","temperature","graphWorkoutSummaryWeekDistanceCurrent","graphWorkoutSummaryWeekDistancePrev","graphWorkoutSummaryWeekElevationCurrent","graphWorkoutSummaryWeekElevationPrev","avgDayDistance","avgDayElevation","avgDayDuration","avgDaySpeedAvg","avgDayLoadIndex","avgDayAvgDogs","avgDayAvgImages","avgDaySledWeight","avgDayRest","avgDayRating","avgDayTemperature","graphPlanWeekDistanceCurrent","isLoading","showExtra","seasonWeeks","seasonDays","dayRange","parts","xTicksAllDays","partsDays","xTicksDays","xTicksLink","yTicksRightPostfix","unitRight","avgWindowRight","paddingLeft","yTicksLeftWidth","yTicksRightVal","Invite","inviteKennel","friendEmail","response","inviteSent","inviteNew","hideInvite","forceShow","MARGIN_TOP","marginTop","MARGIN_TOP_BACK","marginTopBack","MARGIN_BOTTOM","marginBottom","newTeam","submenu","Input","handleImageErrored","onerror","src","removeImage","removeMainImage","saved","help","datalist","showImages","addToImages","list","data-field","el","onError","img","rows","formatBytes","size","removeFile","TeamsDetail","loadTeam","plotFormGraph","loadHeatmap","getHeatmap","loadMore","offset","loadWorkouts","append","limit","viewTeam","getWorkoutSummaryDay","daysBack","updateItem","resetGraphPlanWeekDistanceCurrent","prepareWeekGraphs","updateKeyValue","deleteTeam","PubSub","publish","topics","STATUS_MESSAGE","message","route","elementtype","isNew","updateFieldValue","datatype","skipTimer","localObjectValue","Array","isArray","split","parseFloat","updateObjectKeyValue","doUpdateField","reCalculateFitness","recalculated","reCalcFitness","chooseSubmenu","menu","back","goBack","loadSummaryData","Promise","all","heatmap","workouts","dogs","users","followers","blockedFollowers","imageHeader","findTeamAmbition","ambition","ambitions","findTeamType","headerImage","s3XXLargeLink","teamImage","s3LargeLink","place","country","public","uuidv4","data-menu","markdown","replaceImages","markdownOpts","getMarkdownOptions","noimagestext","total","workout","showDate","section","trophys","reverse","getTrophyImage","textHeader","descriptionHeader","text","native","t","myTeamId","showBlockButton","callback","isBlocked","mapId","minZoom","showAddComment","Ad","subject","body","logClick","ads","adStore","apiServer","getApiServer","loadAd","page","path","postalcode","replace","setTime","match","ad","confirmed","deleted","Teams","confirmRequest","follow","confirmFollowRequest","followRequestUser","deleteRequest","deleteFollowRequest","followRequests","hasFollowRequests","reqUser","isDeleted","isConfirmed","publicTeam","find","displayNameShort","data-user","data-follow"],"mappings":"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","file":"22.chunk.42d64.js","sourcesContent":["import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\n\nconst initialState = {};\n\n@observer\nclass ScrollIntoView extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            ...initialState,\n        };\n        this.container = null;\n    }\n\n    componentDidMount() {\n        const { horizontal, vertical = '' } = this.props;\n        const props = {\n            behavior: 'smooth',\n        };\n        if (horizontal) {\n            props.inline = horizontal;\n        }\n        if (vertical) {\n            props.block = vertical;\n        }\n\t\tthis.container.scrollIntoView(props);\n\t}\n\n    render() {\n        return (\n            <div ref={c => this.container = c}>&nbsp;</div>\n        );\n    }\n}\n\nexport default ScrollIntoView;\n","import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport { Text, Localizer, withText } from 'preact-i18n';\n\nimport mu from '../../lib/musher-util';\n\nimport LineGraph from '../../components/lineGraph';\n\n@observer\nclass FormGraph extends Component {\n    render() {\n        const { teamStore } = this.props.stores;\n        const {\n            graphFitness,\n            graphFatigue,\n            graphForm,\n\t\t} = teamStore;\n\n        if (!graphFitness || graphFitness.length === 0) {\n            return '';\n        }\n\n        const xTicksAll = graphForm.map(e => e.date);\n        const partsLength = Math.floor(xTicksAll.length / 4);\n        const xTicks = [];\n        for (let i = 0, l = xTicksAll.length; i < l; i += partsLength) {\n            xTicks.push(xTicksAll[i]);\n        }\n        xTicks[xTicks.length - 1] = xTicksAll[xTicksAll.length - 1];\n\n        return (\n            <>\n                <h5><Text id='teams.fitness'>Form og belastning</Text></h5>\n                <div class='w-100 mt-3 mb-4'>\n                    <Localizer>\n                        <LineGraph\n                            stores={this.props.stores}\n                            width={1500}\n                            height={300}\n                            showXTicks={1}\n                            xTicks={xTicks}\n                            paddingTop={30}\n                            lineFromXzero={false}\n                            lineFromXmax={false}\n\n                            dataLeft={[graphFitness, graphFatigue]}\n                            dataFillLeft={[1]}\n                            legendLeft={[<Text id='teams.legend-fitness'>Fitness</Text>, <Text id='teams.legend-fatigue'>Fatigue</Text>]}\n\n                            dataRight={[graphForm]}\n                            legendRight={[<Text id='teams.legend-form'>Form</Text>]}\n\n                            // yMaxLeft={30}\n                            // yMinLeft={0}\n                            showYTicksLeft={1}\n                            avgWindowLeft={[0, 0]}\n                            smoothLeft={[0, 0]}\n\n                            // dataRight={[graphWorkoutAvgWeekElevationCurrent, graphAvgWorkoutStatsElevation]}\n                            // legendRight={[`${seasonStart} ${ascendAvg}`, `${seasonStart} ${ascendAvgAll}`]}\n                            showYTicksRight={1}\n                            // yTicksRightPostfix={'m'}\n                            // unitRight={['m', 'm']}\n                            // avgWindowRight={[0, 0]}\n                            // smoothRight={[1, 1]}\n\n                            // marker={week}\n                            scrollToRight={true}\n                        />\n                    </Localizer>\n                </div>\n            </>\n        );\n    }\n}\n\nexport default FormGraph;\n","import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport { Text, Localizer, withText } from 'preact-i18n';\n\nimport style from '../style.css';\nimport mu from '../../lib/musher-util';\n\nimport Speed from '../../components/data/speed';\nimport Elevation from '../../components/data/elevation';\nimport Weight from '../../components/data/weight';\nimport Distance from '../../components/data/distance';\nimport Temperature from '../../components/data/temperature';\n\n@observer\nclass WorkoutTotals extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {};\n    }\n\n    async loadAll(props = this.props) {\n        await this.loadTeams(props);\n        // await Promise.all([\n        //     this.loadTeams(props),\n        // ]);\n    }\n\n    async loadTeams(props = this.props) {\n\t\tconst { teamStore } = props.stores;\n\n        const currentMonth = new Date().getMonth() + 1;\n        const currentYear = new Date().getFullYear();\n\n\t\tconst { month = currentMonth, year = currentYear, currentTeam } = props;\n\n\t\tawait teamStore.load({ query: { team: currentTeam, skipMusherWorkoutSummary: true, year, month }, addData: ['workoutSummary'] });\n\t}\n\n\tcomponentDidMount() {\n\t\tthis.loadAll();\n\t}\n\n    componentWillReceiveProps(nextProps) {\n        if (nextProps.year !== this.props.year || nextProps.currentTeam !== this.props.currentTeam) {\n            this.loadAll(nextProps);\n        }\n    }\n\n    render() {\n        const { teamStore } = this.props.stores;\n\n        const currentMonth = new Date().getMonth() + 1;\n        const currentYear = new Date().getFullYear();\n\t\tconst { month = currentMonth, year = currentYear, currentTeam, currentSeason: currentSeasonSummary, prevSeason: prevSeasonSummary } = this.props;\n\t\tconst seasonStart = parseInt(month < 8 ? year - 1 : year, 10);\n\n        const { workoutSummary } = teamStore;\n        const prevSeason = prevSeasonSummary || ((currentTeam ? teamStore.findWorkoutSummary(currentTeam, seasonStart - 1) : teamStore.findWorkoutSummaryTotal(seasonStart - 1)) || {});\n        const currentSeason = currentSeasonSummary || ((currentTeam ? teamStore.findWorkoutSummary(currentTeam, seasonStart) : teamStore.findWorkoutSummaryTotal(seasonStart)) || {});\n\n        return (\n            <div class='container-fluid mb-2'>\n                <div class='row mt-2 border-top'>\n                    <div class='col text-center'>\n                        <small class='text-muted'><i class='fas fa-road' /> {seasonStart}-{seasonStart + 1}</small>\n                        <h3>\n                            <Distance stores={this.props.stores} value={currentSeason.distanceKm || 0} smallUnit={true} />\n                        </h3>\n                    </div>\n                    <div class='col text-center border-left'>\n                        <small class='text-muted'><i class='fas fa-road' /> {seasonStart - 1}-{seasonStart}</small>\n                        <h3 class='text-muted'>\n                            <Distance stores={this.props.stores} value={prevSeason.distanceKm || 0} smallUnit={true} />\n                        </h3>\n                    </div>\n                </div>\n                <div class='row mt-2'>\n                    <div class='col text-center'>\n                        <small class='text-muted'><i class='fas fa-mountain' /> {seasonStart}-{seasonStart + 1}</small>\n                        <h3>\n                            <Elevation stores={this.props.stores} value={currentSeason.elevation || 0} smallUnit={true} />\n                        </h3>\n                    </div>\n                    <div class='col text-center border-left'>\n                        <small class='text-muted'><i class='fas fa-mountain' /> {seasonStart - 1}-{seasonStart}</small>\n                        <h3 class='text-muted'>\n                            <Elevation stores={this.props.stores} value={prevSeason.elevation || 0} smallUnit={true} />\n                        </h3>\n                    </div>\n                </div>\n                <div class='row mt-2'>\n                    <div class='col text-center'>\n                        <small class='text-muted'><i class='fas fa-clock' /> {seasonStart}-{seasonStart + 1}</small>\n                        <h3>\n                            {util.secToHms(currentSeason.duration || 0)}\n                        </h3>\n                    </div>\n                    <div class='col text-center border-left'>\n                        <small class='text-muted'><i class='fas fa-clock' /> {seasonStart - 1}-{seasonStart}</small>\n                        <h3 class='text-muted'>\n                            {util.secToHms(prevSeason.duration || 0)}\n                        </h3>\n                    </div>\n                </div>\n                <div class='row mt-2 border-bottom'>\n                    <div class='col text-center'>\n                        <small class='text-muted'><i class='fas fa-tachometer-alt' /> {seasonStart}-{seasonStart + 1}</small>\n                        <h3>\n                            <Speed stores={this.props.stores} value={currentSeason.speedAvg || 0} smallUnit={true} />\n                        </h3>\n                    </div>\n                    <div class='col text-center border-left'>\n                        <small class='text-muted'><i class='fas fa-tachometer-alt' /> {seasonStart - 1}-{seasonStart}</small>\n                        <h3 class='text-muted'>\n                            <Speed stores={this.props.stores} value={prevSeason.speedAvg || 0} smallUnit={true} />\n                        </h3>\n                    </div>\n                </div>\n\n            </div>\n        );\n    }\n}\n\nexport default WorkoutTotals;\n","import { h, Component } from 'preact';\nimport { observer } from 'mobx-preact';\nimport { toJS } from 'mobx';\nimport util from 'preact-util';\nimport { Text, Localizer } from 'preact-i18n';\nimport linkstate from 'linkstate';\n\n@observer\nclass Achievements extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            data: {},\n        };\n    }\n    \n    handleAdd = () => {\n        const { data } = this.state;\n        const {\n            updateField,\n            object,\n            field,\n        } = this.props;\n        updateField({ id: object.id, field, value: { ...data } });\n        this.setState({\n            data: {\n                name: '',\n                url: '',\n            }\n        });\n    };\n\n    removeLink = async (e) => {\n        const { dogStore } = this.props.stores;\n        const { object } = this.props;\n        const { name, id } = e.target.closest('button').dataset;\n        dogStore.removeLink({\n            id: object.id,\n            name,\n            linkId: id,\n        });\n    }\n\n    render() {\n        const { showFiles = true, object = {} } = this.props;\n\n        return (\n            <div class='row'>\n                <div class='col-12 mt-3'>\n                    {showFiles && <>\n                        <div class='container-fluid'>\n                            <div class='row'>\n\n                                {(!object.links || object.links.length === 0) && <>\n                                    <div class='text-center text-muted'>\n                                        <div class='display-1'><i class='fas fa-link' /></div>\n                                        <h3><Text id='dogs.no-links-title'>No links for this dog!</Text></h3>\n                                        <Text id='dogs.no-links-text'>You can add links to this dog. Ie. Links to Facebook page, Instagram page, blogg, etc.</Text>\n                                    </div>\n                                </>}\n\n                                {object.links && object.links.map(file => (\n                                    <div class='col-12 p-1'>\n                                        <span class='font-weight-lighter mr-2'>{util.isoDate(file.createdDate, false, false, true)}</span>\n                                        <span class='mr-2'>{file.name}</span>\n                                        <span class='mr-2'>{file.url}</span>\n                                        <button class='btn btn-sm btn-link float-right p-0'\n                                            onClick={this.removeLink}\n                                            data-name={file.name}\n                                            data-id={file.id}\n                                        ><i class='fas fa-trash-alt' /> Del</button>\n                                    </div>\n                                ))}\n                            </div>\n                        </div>\n                    </>}\n                </div>\n                <div class='col-12 mt-3'>\n                    <details>\n                        <summary><Text id='dogs.link-add'>Add new link</Text></summary>\n                        <div class='form-group'>\n                            <label for='name'><Text id='dogs.link-name'>Name</Text></label>\n                            <input type='text' class='form-control' id='name' aria-describedby='nameHelp' onInput={linkstate(this, 'data.name')} />\n                            <small id='nameHelp' class='form-text text-muted'><Text id='dogs.link-name-help'>Name of link</Text></small>\n                        </div>\n                        <div class='form-group'>\n                            <label for='url'><Text id='dogs.link-url'>Url</Text></label>\n                            <input type='text' class='form-control' id='url' aria-describedby='urlHelp' onInput={linkstate(this, 'data.url')} />\n                            <small id='urlHelp' class='form-text text-muted'><Text id='dogs.link-url-help'>URL of link</Text></small>\n                        </div>\n                        <button class='btn btn-success' onClick={this.handleAdd}>\n                            <Text id='dogs.link-add'>Add link</Text>\n                        </button>\n                    </details>\n                </div>\n            </div>\n        );\n    }\n}\n\nexport default Achievements;\n","import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport { Text, Localizer, withText } from 'preact-i18n';\n\nimport style from '../style.css';\nimport mu from '../../lib/musher-util';\n\n@observer\nclass WorkoutStatus extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {};\n    }\n\n    async loadAll(props = this.props) {\n        // await Promise.all([\n        //     this.loadTeams(props),\n        //     this.loadWorkoutPlans(props),\n        //     this.loadWorkoutSummary(props),\n        // ]);\n    }\n\n    async loadTeams(props = this.props) {\n\t\tconst { teamStore } = props.stores;\n\n        const currentMonth = new Date().getMonth() + 1;\n        const currentYear = new Date().getFullYear();\n\n\t\tconst { month = currentMonth, year = currentYear, currentTeam } = props;\n\t\tawait teamStore.load({ query: { team: currentTeam, skipMusherWorkoutSummary: true, year, month }, addData: ['workoutSummary'] });\n\t}\n\n    loadWorkoutPlans = async (props = this.props) => {\n\t\tconst { workoutPlanStore } = props.stores;\n\n\t\tconst currentMonth = new Date().getMonth() + 1;\n        const currentYear = new Date().getFullYear();\n\t\tconst { year = currentYear, month = currentMonth, currentTeam } = props;\n\t\tconst seasonStart = parseInt(year || (month < 8 ? year - 1 : year), 10);\n\n\t\tif (currentTeam) {\n\t\t\tawait workoutPlanStore.load({ query: {\n\t\t\t\tteam: currentTeam,\n\t\t\t\tseasonYear: seasonStart,\n\t\t\t\tseasonMonth: 6,\n\t\t\t} });\n\t\t\tconst { workoutPlans } = workoutPlanStore;\n\t\t\tconst workoutPlanCurrent = workoutPlans[0] || {};\n\t\t\tif (workoutPlanCurrent.id) {\n\t\t\t\tawait workoutPlanStore.load(workoutPlanCurrent.id);\n\t\t\t}\n\t\t}\n\t}\n\n    async loadWorkoutSummary(props = this.props) {\n        const { year, currentTeam, dog } = props;\n\t\tconst { userStore } = props.stores;\n        await userStore.getWorkoutSummary({ team: currentTeam, year, dog });\n    }\n\n\tcomponentDidMount() {\n\t\tthis.loadAll();\n\t}\n\n    componentWillReceiveProps(nextProps) {\n        if (nextProps.year !== this.props.year || nextProps.currentTeam !== this.props.currentTeam) {\n            this.loadAll(nextProps);\n        }\n    }\n\n    render() {\n\t\tconst { currentSeason, prevSeason, currentTeam } = this.props;\n\n        const { userStore, workoutPlanStore, teamStore } = this.props.stores;\n        const { workoutPlan } = workoutPlanStore;\n        const { user, workoutSummaryTeam } = userStore;\n        const { language = 'en' } = user;\n\t\tconst MONTHS = mu.getMonths(language);\n\n\t\tconst team = teamStore.findTeam(currentTeam) || {};\n\n        const currentMonth = new Date().getMonth() + 1;\n        const currentYear = new Date().getFullYear();\n\n        const { year = currentYear, month = currentMonth } = this.props;\n\t\tconst seasonStart = parseInt(month < 8 ? year - 1 : year, 10);\n        const months = util.monthRange(`${seasonStart}-08-01`, `${seasonStart + 1}-07-31`);\n        let lastPlanMonth;\n\n        return (\n            <div class='container-fluid mb-2'>\n                <div class='row mt-2'>\n                    <div class='col-12'>\n                        <h5>\n                            <span style='display: none;'>{workoutPlan.id}</span>\n                            <Text id='workout.totals.title'>Treningsplanstatus</Text>\n                        </h5>\n                    </div>\n                </div>\n                <div class='row mt-2 border-bottom pb-2'>\n                    {months && months.map((month) => {\n                        if (month.year > year || (month.year === year && month.month >= month)) {\n                            return '';\n                        }\n                        const planMonth = workoutPlanStore.sumWorkoutPlanMonth(month.year, month.month + 1);\n                        if (!planMonth) {\n                            return '';\n                        }\n                        lastPlanMonth = planMonth;\n                        const summaryMonth = userStore.findWorkoutSummaryMonth(month.year, month.month + 1);\n                        const percCompleted = summaryMonth / planMonth * 100;\n                        const height = percCompleted > 100 ? 100 : util.format(percCompleted, 0);\n                        return (\n                            <div class='col-3 text-center'>\n                                {/* <div class='w-100 mt-1'>\n                                    <small class='text-muted'>\n                                        {planMonth}km\n                                    </small>\n                                    <small class='text-info'>\n                                        {summaryMonth}km\n                                    </small>\n                                </div> */}\n                                <div class='px-auto w-100 clearfix'>\n                                    <div class={`progress ${style['progress-bar-vertical']}`}\n                                        style={' margin-left: calc(50% - 20px);'}\n                                    >\n                                        <div class='progress-bar progress-bar-striped bg-success' role='progressbar'\n                                            style={`height: ${height}%; width: 40px;`}\n                                            aria-valuenow={height} aria-valuemin='0' aria-valuemax='100'\n                                        >\n                                            {util.format(percCompleted, 0)}%\n                                        </div>\n                                    </div>\n                                </div>\n                                <div class='w-100 mt-1'>\n                                    {MONTHS[month.month]} {month.year}\n                                </div>\n                            </div>\n                        );\n                    })}\n                    {!lastPlanMonth && <div class='col-12 text-center text-muted mb-5'>\n                        <div class='display-1'>\n                            <i class='far fa-sad-tear' />\n                        </div>\n                        <h3 class='font-weight-lighter'>\n                            <Text id='workout.plan.no-workout-plan-found' fields={{ name: team.name }}>Ingen treningsplaner funnet for team {team.name}.</Text>\n                        </h3>\n                        <a class='btn btn-success btn-lg mt-3' href='/workouts/plan'><i class='fas fa-calendar-alt' /> <Text id='workout.plan.new'>New workoutplan</Text></a>\n                    </div>}\n                </div>\n\n            </div>\n        );\n    }\n}\n\nexport default WorkoutStatus;\n","import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport { Text, Localizer, withText } from 'preact-i18n';\n\nimport Speed from '../../components/data/speed';\nimport Elevation from '../../components/data/elevation';\nimport Weight from '../../components/data/weight';\nimport Distance from '../../components/data/distance';\nimport Temperature from '../../components/data/temperature';\n\nimport mu from '../../lib/musher-util';\n\n@observer\nclass User extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {};\n        this.updateTimer = {};\n    }\n    \n    removeUser = async (e) => {\n        let id =  e.target.dataset.id;\n        let email =  e.target.dataset.email;\n        let team =  e.target.dataset.team;\n        if (!id && e.target.parentNode) {\n            id =  e.target.parentNode.dataset.id;\n            email =  e.target.parentNode.dataset.email;\n            team =  e.target.parentNode.dataset.team;\n\t\t}\n        console.log('id, email, team', id, email, team);\n        const { teamStore } = this.props.stores;\n        await teamStore.removeMember(team, { id, email });\n    }\n\n    adminUpdateUser = (e) => {\n        const { email } = e.target.closest('input').dataset;\n        const { name } = e.target;\n        const field = `${email}-${name}`;\n\n        clearTimeout(this.updateTimer[field]);\n        this.updateTimer[field] = setTimeout(() => {\n            this.doAdminUpdateUser(e);\n        }, 500);\n    }\n\n    doAdminUpdateUser = async (e) => {\n        const { email } = e.target.closest('input').dataset;\n        const { name, value } = e.target;\n\n        // console.log({ email, name, value });\n\t\tconst { userStore } = this.props.stores;\n        await userStore.adminUpdateUser(email, { [name]: value });\n    }\n\n    simulateUser = (e) => {\n        const { email } = e.target.closest('button').dataset;\n        const { userStore } = this.props.stores;\n\t\tuserStore.getSimulateUser(email);\n    }\n\n    render() {\n        const { user, team = {} } = this.props;\n\t\tconst { userStore, teamStore } = this.props.stores;\n        const { user: currentUser, isAdmin } = userStore;\n        const teams = userStore.findTeams(user.teams);\n        const summary = teamStore.findMusherSummary(user.id, team.id) || {};\n        const isTeamAdmin = team.user === currentUser.id;\n        const image = mu.getImage({ user, team });\n        const name = mu.displayName(user);\n\n        // const workoutSummary = dogStore.findWorkoutSummary(dog.id, 2020) || {};\n        // {'0':{'year':2020,'dog':16,'count':1,'distanceKm':9.9,'elevation':202,'duration':0,'speedAvg':0}}\n        return (\n            <div class='w-100 mb-3'>\n                <div class='row'>\n                    <div class='col-12 d-flex mb-0 position-relative'>\n                        {/* {JSON.stringify(dog, null, 4)} */}\n                        <div class={`text-center border rounded-circle imageRounded`} style={image ? `background-image: url('${image}'); background-size: cover;` : ''}>\n                            {!image && <i class='fas fa-user text-muted mt-3' style='font-size: 40px;' />}\n                        </div>\n                        <div class='flex-grow-1 pl-3 pr-2'>\n                            {/* <span class='float-right'>\n                                {dog.birth && <span class='mr-2'>{util.age(dog.birth, dog.deceased)}</span>}\n                                {dog.gender === 'female' ? <i class='fas fa-venus' /> : <i class='fas fa-mars' />}\n                            </span> */}\n                            \n                            <h5>{name}</h5>\n                            <div>\n                                <small class='text-muted'>\n                                    <div class='d-flex justify-content-left'>\n                                        {user.cellphone && <div class='mr-2'><i class='fas fa-mobile-alt' /> {user.cellphone}</div>}\n                                        {user.email && <div class='mr-2'><i class='fas fa-envelope ml-3' /> {user.email}</div>}\n                                        {user.url && <div class='mr-2'><a href={mu.asUrl(user.url)} target='_blank' rel='noreferrer'><i class='fas fa-link' /></a></div>}\n                                        {user.facebook && <div class='mr-2'><a href={mu.asFacebookLink(user.facebook)} target='_blank' rel='noreferrer'><i class='fab fa-facebook' /></a></div>}\n                                        {user.instagram && <div class='mr-2'><a href={mu.asInstagramLink(user.instagram)} target='_blank' rel='noreferrer'><i class='fab fa-instagram' /></a></div>}\n                                        {user.snapchat && <div class='mr-2'><a href={mu.asSnapchatLink(user.snapchat)} target='_blank' rel='noreferrer'><i class='fab fa-snapchat' /></a></div>}\n                                    </div>\n                                </small>\n                            </div>\n                            {isAdmin && <>\n                                <button class='btn btn-block btn-success' onClick={this.simulateUser} data-email={user.email}>\n                                    Simulate user\n                                </button>\n\n                                <small>\n                                    <details>\n                                        <summary>settings</summary>\n                                        <xmp>{JSON.stringify(user.settings, null, 4)}</xmp>\n                                    </details>\n                                    <details>\n                                        <summary>subscription</summary>\n                                        <xmp>{JSON.stringify(user.subscription, null, 4)}</xmp>\n                                    </details>\n                                    <details>\n                                        <summary>deviceInfo</summary>\n                                        <xmp>{JSON.stringify(user.deviceInfo, null, 4)}</xmp>\n                                    </details>\n                                    <details>\n                                        <summary>subscription</summary>\n                                        <xmp>{JSON.stringify(user.subscription, null, 4)}</xmp>\n                                    </details>\n                                    <details>\n                                        <summary>notifications</summary>\n                                        <xmp>{JSON.stringify(user.notifications, null, 4)}</xmp>\n                                    </details>\n                                    <details>\n                                        <summary>notificationTopics</summary>\n                                        <xmp>{JSON.stringify(user.notificationTopics, null, 4)}</xmp>\n                                    </details>\n                                    <details>\n                                        <summary>applications</summary>\n                                        <xmp>{JSON.stringify(user.applications, null, 4)}</xmp>\n                                    </details>\n                                    <details>\n                                        <summary>shadowTags</summary>\n                                        <xmp>{JSON.stringify(user.shadowTags, null, 4)}</xmp>\n                                    </details>\n                                    <details>\n                                        <summary>garmin</summary>\n                                        <xmp>{JSON.stringify(user.garmin, null, 4)}</xmp>\n                                    </details>\n                                    <details>\n                                        <summary>strava</summary>\n                                        <xmp>{JSON.stringify(user.strava, null, 4)}</xmp>\n                                    </details>\n                                    <details>\n                                        <summary>currentLocationGeocode</summary>\n                                        <xmp>{JSON.stringify(user.currentLocationGeocode, null, 4)}</xmp>\n                                    </details>\n                                    lastActivityEpoch: {util.isoDate(user.lastActivityEpoch)}<br />\n                                    activities: {util.format(user.activities)}<br />\n\n                                    {user.settings && <div class='form-check'>\n                                        <input class='form-check-input' type='checkbox' value={user.settings.veterinaryAllowed ? 0 : 1} id={`settings.veterinaryAllowed-${user.id}`} name='settings.veterinaryAllowed' checked={user.settings.veterinaryAllowed ? 'checked' : ''} data-email={user.email} onInput={this.adminUpdateUser} />\n                                        <label class='form-check-label' for={`settings.veterinaryAllowed-${user.id}`}>\n                                            settings.veterinaryAllowed\n                                        </label>\n                                    </div>}\n                                    <div class='form-check'>\n                                        <input class='form-check-input' type='checkbox' value={user.twoFactorLogin ? 0 : 1} id={`twoFactorLogin-${user.id}`} name='twoFactorLogin' checked={user.twoFactorLogin ? 'checked' : ''} data-email={user.email} onInput={this.adminUpdateUser} />\n                                        <label class='form-check-label' for={`twoFactorLogin-${user.id}`}>\n                                            twoFactorLogin\n                                        </label>\n                                    </div>\n                                    <div class='form-check'>\n                                        <input class='form-check-input' type='checkbox' value={user.isVeterinary ? 0 : 1} id={`isVeterinary-${user.id}`} name='isVeterinary' checked={user.isVeterinary ? 'checked' : ''} data-email={user.email} onInput={this.adminUpdateUser} />\n                                        <label class='form-check-label' for={`isVeterinary-${user.id}`}>\n                                            isVeterinary\n                                        </label>\n                                    </div>\n                                    <div class='form-group row'>\n                                        <label class='col-sm-2 col-form-label' for={`cellphone-${user.id}`}>cellphone</label>\n                                        <div class='col-sm-10'>\n                                            <input type='text' id={`cellphone-${user.id}`} name='cellphone' class='form-control' value={user.cellphone} data-email={user.email} onInput={this.adminUpdateUser} />\n                                        </div>\n                                    </div>\n                                    <div class='form-group row'>\n                                        <label class='col-sm-2 col-form-label' for={`firstname-${user.id}`}>firstname</label>\n                                        <div class='col-sm-10'>\n                                            <input type='text' id={`firstname-${user.id}`} name='firstname' class='form-control' value={user.firstname} data-email={user.email} onInput={this.adminUpdateUser} />\n                                        </div>\n                                    </div>\n                                    <div class='form-group row'>\n                                        <label class='col-sm-2 col-form-label' for={`lastname-${user.id}`}>lastname</label>\n                                        <div class='col-sm-10'>\n                                            <input type='text' id={`lastname-${user.id}`} name='lastname' class='form-control' value={user.lastname} data-email={user.email} onInput={this.adminUpdateUser} />\n                                        </div>\n                                    </div>\n                                </small>\n                            </>}\n                            {user.teams && <>\n                                {teams.map(team => (\n                                    <span class='badge badge-pill badge-info mr-2'>{team.name}</span>\n                                ))}<br />\n                            </>}\n                            {team.id && summary && <>\n                                <small class='text-muted'>\n                                    Total:\n                                    {summary && <span class='ml-2'><i class='fas fa-road' /> <Distance stores={this.props.stores} value={summary.distanceKm} /></span>}\n                                    {summary && <span class='ml-2'><i class='fas fa-mountain' /> <Elevation stores={this.props.stores} value={summary.elevation} /></span>}\n                                    {summary && <span class='ml-2'><i class='fas fa-clock' /> {util.secToHms(summary.duration || 0)}</span>}\n                                </small><br />\n                                <small class='text-muted'>\n                                    Avg: \n                                    {summary && <span class='ml-2'><i class='fas fa-road' /> <Distance stores={this.props.stores} value={summary.avgDistance} /></span>}\n                                    {summary && <span class='ml-2'><i class='fas fa-mountain' /> <Elevation stores={this.props.stores} value={summary.avgElevation} /></span>}\n                                    {summary && <span class='ml-2'><i class='fas fa-clock' /> {util.secToHms(summary.avgDuration || 0)}</span>}\n                                    {summary && <span class='ml-2'><i class='fas fa-tachometer-alt' /> <Speed stores={this.props.stores} value={summary.speedAvg} /></span>}\n                                    {summary && <span class='ml-2'><i class='fas fa-dog' /> {util.format(summary.avgDogs, 1)}</span>}\n                                </small>\n                            </>}\n                        </div>\n                        <div>\n                            {isTeamAdmin && user.id !== currentUser.id && <button class='btn btn-sm btn-danger'\n                                onClick={this.removeUser}\n                                data-email={user.email}\n                                data-id={user.id}\n                                data-team={team.id}\n                            ><i class='fas fa-ban' /></button>}\n                            {!isTeamAdmin && user.id === currentUser.id && <button class='btn btn-sm btn-secondary'\n                                onClick={this.removeUser}\n                                data-email={user.email}\n                                data-id={user.id}\n                                data-team={team.id}\n                            ><i class='fas fa-sign-out-alt' />{team.id}</button>}\n                        </div>\n                    </div>\n                </div>\n            </div>\n        );\n    }\n}\n\nexport default User;\n","import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport linkState from 'linkstate';\nimport { Text, Localizer, withText } from 'preact-i18n';\n\nimport Speed from '../../components/data/speed';\nimport Elevation from '../../components/data/elevation';\nimport Weight from '../../components/data/weight';\nimport Distance from '../../components/data/distance';\nimport Temperature from '../../components/data/temperature';\n\nimport mu from '../../lib/musher-util';\n\nconst RED_DAYS = [0, 6];\n\n@observer\nclass Calendar extends Component {\n\tsetFocus = () => {\n\t\tif (this.inputRef) {\n\t\t\tthis.inputRef.focus();\n\t\t}\n\t}\n\teditMonth = (e) => {\n\t\tconst month = e.target.parentElement.dataset.month || e.target.dataset.month;\n\t\tconst year = e.target.parentElement.dataset.year || e.target.dataset.year;\n\t\tconst distance = e.target.parentElement.dataset.distance || e.target.dataset.distance;\n\t\t// console.log({ month, year });\n\t\tthis.setState({\n\t\t\tshowInput: true,\n\t\t\tinputYear: year,\n\t\t\tinputMonth: month,\n\t\t\tinputDay: null,\n\t\t\tinputWeek: null,\n\t\t\tnewDistance: distance || null,\n\t\t}, () => this.setFocus());\n\t}\n\n\teditWeek = (e) => {\n\t\tconst week = e.target.parentElement.dataset.week || e.target.dataset.week;\n\t\tconst year = e.target.parentElement.dataset.year || e.target.dataset.year;\n\t\tconst distance = e.target.parentElement.dataset.distance || e.target.dataset.distance;\n\t\t// console.log({ week, year });\n\t\tthis.setState({\n\t\t\tshowInput: true,\n\t\t\tinputYear: year,\n\t\t\tinputWeek: week,\n\t\t\tinputMonth: null,\n\t\t\tinputDay: null,\n\t\t\tnewDistance: distance || null,\n\t\t}, () => this.setFocus());\n\t}\n\n\teditDay = (e) => {\n\t\tconst day = e.target.parentElement.dataset.day || e.target.dataset.day;\n\t\tconst month = e.target.parentElement.dataset.month || e.target.dataset.month;\n\t\tconst year = e.target.parentElement.dataset.year || e.target.dataset.year;\n\t\tconst week = e.target.parentElement.dataset.week || e.target.dataset.week;\n\t\tconst distance = e.target.parentElement.dataset.distance || e.target.dataset.distance;\n\t\t// console.log({ day, month, year });\n\t\tthis.setState({\n\t\t\tshowInput: true,\n\t\t\tinputYear: year,\n\t\t\tinputMonth: month,\n\t\t\tinputDay: day,\n\t\t\tinputWeek: week,\n\t\t\tnewDistance: distance || null,\n\t\t}, () => this.setFocus());\n\t}\n\n\tsaveDistance = async () => {\n\t\tconst { workoutPlanStore, workoutStore, userStore } = this.props.stores;\n\t\tconst { currentTeam } = workoutStore;\n\t\tconst teamName = userStore.findTeam(currentTeam) || '';\n\t\tconst { year, month } = this.props;\n\t\tconst { workoutPlans } = workoutPlanStore;\n\t\tconst workoutPlanCurrent = workoutPlans[0] || {};\n\t\tconst { inputYear, inputMonth, inputWeek, inputDay, newDistance } = this.state;\n\t\t// console.log({ showInput, inputYear, inputMonth, inputWeek, inputDay, newDistance });\n\n\t\tconst currentMonth = month || new Date().getMonth() + 1;\n\t\tconst currentYear = year || util.getYear();\n\t\tconst seasonStart = parseInt(currentMonth < 8 ? currentYear - 1 : currentYear, 10);\n\n\t\tif (!workoutPlanCurrent.id) {\n\t\t\tconst response = await workoutPlanStore.insert({\n\t\t\t\ttitle: `Workout plan for ${seasonStart} - ${seasonStart + 1}: ${teamName}`,\n\t\t\t\tteam: currentTeam,\n\t\t\t\tseasonYear: seasonStart,\n\t\t\t\tseasonMonth: 6,\n\t\t\t});\n\t\t\tconst { id: newId } = response.data;\n\t\t\tawait workoutPlanStore.load(newId);\n\t\t} else {\n\t\t\tawait workoutPlanStore.load(workoutPlanCurrent.id);\n\t\t}\n\t\tconst { workoutPlan } = workoutPlanStore;\n\t\tconst { id } = workoutPlan;\n\t\t// console.log({ id });\n\n\t\tlet field;\n\t\tif (inputYear) {\n\t\t\tif (inputDay) {\n\t\t\t\tfield = 'days';\n\t\t\t} else {\n\t\t\t\tfield = 'weeks';\n\t\t\t}\n\t\t}\n\t\tawait workoutPlanStore.saveField(id, field, {\n\t\t\tyear: inputYear,\n\t\t\tmonth: inputMonth,\n\t\t\tday: inputDay,\n\t\t\tweek: inputWeek,\n\t\t\tdistance: newDistance,\n\t\t});\n\t\tawait workoutPlanStore.load(id);\n\n\t\tthis.resetInput(true);\n\t}\n\n\tresetInput = (nextDay) => {\n\t\tif (nextDay) {\n\t\t\tconst { inputYear, inputMonth, inputDay } = this.state;\n\t\t\tconst nextDay = util.addDays(new Date(inputYear, inputMonth - 1, inputDay, 0, 0, 0, 0), 1);\n\t\t\tthis.setState({\n\t\t\t\tshowInput: true,\n\t\t\t\tinputYear: nextDay.getFullYear(),\n\t\t\t\tinputMonth: nextDay.getMonth() + 1,\n\t\t\t\tinputDay: nextDay.getDate(),\n\t\t\t\tinputWeek: util.getWeek(nextDay),\n\t\t\t\tnewDistance: null,\n\t\t\t});\n\t\t\tthis.setFocus();\n\t\t} else {\n\t\t\tthis.setState({\n\t\t\t\tshowInput: false,\n\t\t\t\tinputYear: null,\n\t\t\t\tinputMonth: null,\n\t\t\t\tinputDay: null,\n\t\t\t\tinputWeek: null,\n\t\t\t\tnewDistance: null,\n\t\t\t});\n\t\t}\n\t}\n\n\tcheckKeydown = (e) => {\n\t\tswitch (e.key) {\n\t\t\tcase 'Enter':\n\t\t\t\tthis.saveDistance();\n\t\t\t\tbreak;\n\n\t\t\tcase 'Escape':\n\t\t\t\tthis.resetInput();\n\t\t\t\tbreak;\n\t\t\n\t\t\tdefault:\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\tcomponentDidMount() {\n\t\tthis.updateWorkoutPlanTips();\n\t}\n\n\tupdateWorkoutPlanTips = () => {\n\t\t// console.log('updateWorkoutPlanTips');\n\t\tconst { userStore } = this.props.stores;\n\t\tconst { user = {} } = userStore;\n\t\tconst { settings = {} } = user;\n\t\tthis.setState({ hideWorkoutPlanTips: settings.hideWorkoutPlanTips });\n\t}\n\n\ttoggleTips = async () => {\n\t\tconst { hideWorkoutPlanTips } = this.state;\n\t\tconst { userStore } = this.props.stores;\n\t\tconst newValue = hideWorkoutPlanTips === 1 ? 0 : 1;\n\t\tthis.setState({ hideWorkoutPlanTips: newValue });\n\t\tawait userStore.updateSetting({ 'settings.hideWorkoutPlanTips': newValue }, { hideWorkoutPlanTips: newValue });\n\t}\n\n\trender() {\n\t\tconst { hideWorkoutPlanTips } = this.state;\n\t\tconst { appState, workoutPlanStore, userStore, workoutStore, teamStore } = this.props.stores;\n\t\tconst { user } = userStore;\n\t\tconst { language = 'en' } = user;\n\t\tconst { darkmode } = appState;\n\t\tconst DAYS = mu.getDays(language);\n\t\tconst MONTHS = mu.getMonths(language);\n\n\t\tconst { showInput, inputYear, inputMonth, inputWeek, inputDay, newDistance } = this.state;\n\n        const currentDay = new Date().getDate();\n        const currentMonth = new Date().getMonth() + 1;\n        const currentYear = new Date().getFullYear();\n\n\t\tconst currentEpoch = new Date().getTime();\n\t\tconst { month = currentMonth, year = currentYear, dog, basehref, showNavigation = true, showHeader = true, currentTeam } = this.props;\n\n\t\tconst seasonStart = parseInt(month < 8 ? year - 1 : year, 10);\n\n        const monthNum = parseInt(month, 10);\n        const yearNum = parseInt(year, 10);\n        const { month: nextMonth, year: nextYear } = mu.getNextMonth(monthNum, yearNum);\n        const { month: prevMonth, year: prevYear } = mu.getPrevMonth(monthNum, yearNum);\n\n        const daysOfMonth = util.getDaysInMonth(month, year);\n        const weeksInMonth = util.getWeeksInMonth(month, year);\n        const firstWeek = weeksInMonth[0].week;\n        const daysOfWeek = util.getDaysInWeek(firstWeek, year, month);\n        let totalDistanceKmMonth = 0;\n\t\tlet totalDistanceKmMonthPlan = 0;\n\t\tlet totalWorkoutDistanceKmMonth = 0;\n\n\t\tconst monthEpoch = daysOfMonth[daysOfMonth.length - 1].getTime();\n\t\tconst isMonthInTheFuture = monthEpoch > currentEpoch;\n\n\t\tconst summaryMonth = workoutPlanStore.findWorkoutPlanSummaryMonth(year, monthNum) || {};\n\t\tconst { workoutPlan, tips } = workoutPlanStore;\n\n\t\tconst tipsMonth = tips[`${year}-${util.padDate(month)}`];\n\t\tconst hasTipsMonth = tipsMonth && (tipsMonth.comments.length > 0 || tipsMonth.distance);\n\n\t\tconst team = teamStore.findTeam(currentTeam) || {};\n\n\t\treturn (\n\t\t\t<>\n                {showHeader && <>\n\t\t\t\t\t<div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-4 text-center'>\n\t\t\t\t\t\t{showNavigation && <a href={`${basehref || '/workouts/month/'}${nextMonth}/${nextYear}/skipScroll`} class='float-right btn btn-sm btn-outline-secondary ml-2'><i class='fas fa-arrow-right' /></a>}\n\t\t\t\t\t\t{showNavigation && <a href={`${basehref || '/workouts/month/'}${prevMonth}/${prevYear}/skipScroll`} class='float-left btn btn-sm btn-outline-secondary mr-2'><i class='fas fa-arrow-left' /></a>}\n\t\t\t\t\t\t<h3><Text id='workout.plan.month'>Mned</Text> - {MONTHS[month - 1]} {year} {summaryMonth.distance ? `- ${util.format(summaryMonth.distance, 0)} km` : ''}</h3>\n\t\t\t\t\t\t<h5 class='text-muted font-weight-light'><Text id='workout.plan.season'>Sesongen</Text> {seasonStart} - {seasonStart + 1}</h5>\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t{workoutPlan.id ? <>\n\t\t\t\t\t\t\t\t<small>{workoutPlan.title}</small>\n\t\t\t\t\t\t\t</> : <>\n\t\t\t\t\t\t\t\t<div class='display-4'>\n\t\t\t\t\t\t\t\t\t<i class='far fa-sad-tear text-muted' />\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<h5 class='font-weight-lighter text-muted'>\n\t\t\t\t\t\t\t\t\t<Text id='workout.plan.no-workout-plan-found' fields={{ name: team }}>Ingen plan</Text>\n\t\t\t\t\t\t\t\t</h5>\n\t\t\t\t\t\t\t\t<div class='text-muted'>\n\t\t\t\t\t\t\t\t\t<Text id='workout.plan.click-to-start'>Click on a date to get started.</Text>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</>}\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t{dog && <div>{dog.name}</div>}\n\t\t\t\t\t\t{/* <small>{util.isoDate(daysOfMonth[0], false, false, true)} - {util.isoDate(daysOfMonth[daysOfMonth.length - 1], false, false, true)}</small> */}\n\t\t\t\t\t</div>\n\t\t\t\t</>}\n\n                <div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3'>\n\t\t\t\t\t{!!(showInput && inputYear && inputWeek && !inputDay) && (\n\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t<div class='form-inline w-100'>\n\t\t\t\t\t\t\t\t<div class='form-group w-75 mr-3 mb-0'>\n\t\t\t\t\t\t\t\t\t<input class='form-control w-100 form-control' type='text' \n\t\t\t\t\t\t\t\t\t\tplaceholder={`Enter distance for ${inputYear} w${inputWeek}`}\n\t\t\t\t\t\t\t\t\t\tref={c => this.inputRef = c}\n\t\t\t\t\t\t\t\t\t\tonInput={linkState(this, 'newDistance')}\n\t\t\t\t\t\t\t\t\t\tonKeydown={this.checkKeydown}\n\t\t\t\t\t\t\t\t\t\tautocomplete='off'\n\t\t\t\t\t\t\t\t\t\tvalue={newDistance || ''}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<button type='button' class='btn btn-primary' onClick={this.saveDistance}><Text id='workout.plan.save'>Lagre</Text></button>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</>\n\t\t\t\t\t)}\n\t\t\t\t\t{!!(showInput && inputYear && inputMonth) && (\n\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t<div class='form-inline w-100'>\n\t\t\t\t\t\t\t\t<div class='form-group w-75 mr-3 mb-0'>\n\t\t\t\t\t\t\t\t\t<input class='form-control w-100 form-control' type='text'\n\t\t\t\t\t\t\t\t\t\tplaceholder={`Enter distance for ${inputYear}-${util.padDate(inputMonth)} ${inputDay ? `-${util.padDate(inputDay)}` : ''}`}\n\t\t\t\t\t\t\t\t\t\tref={c => this.inputRef = c}\n\t\t\t\t\t\t\t\t\t\tonInput={linkState(this, 'newDistance')}\n\t\t\t\t\t\t\t\t\t\tonKeydown={this.checkKeydown}\n\t\t\t\t\t\t\t\t\t\tautocomplete='off'\n\t\t\t\t\t\t\t\t\t\tvalue={newDistance || ''}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<button type='button' class='btn btn-primary' onClick={this.saveDistance}><Text id='workout.plan.save'>Lagre</Text></button>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</>\n\t\t\t\t\t)}\n\t\t\t\t</div>\n\n\t\t\t\t{language === 'no' && <>\n\t\t\t\t\t{hideWorkoutPlanTips ? <>\n\t\t\t\t\t\t<div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-4 d-flex justify-content-end'>\n\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\ttype='button'\n\t\t\t\t\t\t\t\tclass='btn btn-outline-primary btn-sm'\n\t\t\t\t\t\t\t\tonClick={this.toggleTips}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<i class='fas fa-eye' /> <Text id='workout.plan.show-tips'>Show tips</Text>\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</> : <>\n\t\t\t\t\t\t<div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-4 d-flex justify-content-end'>\n\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\ttype='button'\n\t\t\t\t\t\t\t\tclass='btn btn-primary btn-sm'\n\t\t\t\t\t\t\t\tonClick={this.toggleTips}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<i class='fas fa-eye-slash' /> <Text id='workout.plan.hide-tips'>Hide tips</Text>\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</>}\n\t\t\t\t</>}\n\n                <div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3'>\n\t\t\t\t\t<div class='table-responsive'>\n\t\t\t\t\t\t<table class='table table-striped table-sm'>\n\t\t\t\t\t\t\t<thead>\n\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t<th class='text-muted'><small><Text id='workout.plan.week'>Uke</Text></small></th>\n\t\t\t\t\t\t\t\t\t{daysOfWeek.map(day => <th><small>{DAYS[day.getDay()]}</small></th>)}\n\t\t\t\t\t\t\t\t\t<th class='text-muted'><small><Text id='workout.plan.sum'>Sum</Text></small></th>\n\t\t\t\t\t\t\t\t\t<th class='text-muted'><small><Text id='workout.plan.planned'>Plan</Text></small></th>\n\t\t\t\t\t\t\t\t\t{/* <th class='text-muted'>Totalt</th> */}\n\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t</thead>\n\t\t\t\t\t\t\t<tbody>\n\t\t\t\t\t\t\t\t{weeksInMonth && weeksInMonth.map(weekObj => {\n\t\t\t\t\t\t\t\t\tconst daysOfWeek = util.getDaysInWeek(weekObj.week, year, month);\n\t\t\t\t\t\t\t\t\tconst summaryWeek = workoutPlanStore.findWorkoutPlanSummaryWeek(util.asNumber(year), weekObj.week) || {};\n\t\t\t\t\t\t\t\t\tconst weekEpoch = daysOfWeek[6].getTime();\n\t\t\t\t\t\t\t\t\tconst isWeekInTheFuture = weekEpoch > currentEpoch;\n\t\t\t\t\t\t\t\t\tlet totalWeek = 0;\n\t\t\t\t\t\t\t\t\tlet totalWorkoutWeek = 0;\n\t\t\t\t\t\t\t\t\tif (summaryWeek.distance > 0) {\n\t\t\t\t\t\t\t\t\t\ttotalDistanceKmMonthPlan += summaryWeek.distance;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tconst tipsWeek = tips[`${year}-${util.padDate(month)}-w${util.padDate(weekObj.week)}`];\n\t\t\t\t\t\t\t\t\tconst hasTipsWeek = tipsWeek && (tipsWeek.comments.length > 0 || tipsWeek.distance);\n\n\t\t\t\t\t\t\t\t\treturn (<>\n\t\t\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t\t\t<td class={`text-right text-muted pt-3 border-right ${!inputDay && inputYear == year && inputWeek == weekObj.week ? 'border rounded border-primary' : ''}`}>\n\t\t\t\t\t\t\t\t\t\t\t\t<small onClick={this.editWeek} data-week={weekObj.week} data-year={year} data-distance={summaryWeek.distance}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t{weekObj.week}\n\t\t\t\t\t\t\t\t\t\t\t\t</small>\n\t\t\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t\t\t{daysOfWeek.map(day => {\n\t\t\t\t\t\t\t\t\t\t\t\tconst yyyy = day.getFullYear();\n\t\t\t\t\t\t\t\t\t\t\t\tconst mm = day.getMonth() + 1;\n\t\t\t\t\t\t\t\t\t\t\t\tconst dd = day.getDate();\n\t\t\t\t\t\t\t\t\t\t\t\tconst epoch = day.getTime();\n\t\t\t\t\t\t\t\t\t\t\t\tconst isDayInTheFuture = epoch > currentEpoch;\n\t\t\t\t\t\t\t\t\t\t\t\tconst summaryWorkout = userStore.findWorkoutSummaryWeekDay((isDayInTheFuture ? yyyy - 1 : yyyy), mm, dd, monthNum) || {};\n\t\t\t\t\t\t\t\t\t\t\t\tconst summary = workoutPlanStore.findWorkoutPlanSummaryDay(yyyy, mm, dd, monthNum) || {};\n\t\t\t\t\t\t\t\t\t\t\t\tif (summary && summary.distance) {\n\t\t\t\t\t\t\t\t\t\t\t\t\ttotalWeek += summary.distance;\n\t\t\t\t\t\t\t\t\t\t\t\t\ttotalDistanceKmMonth += summary.distance;\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\tif (summaryWorkout.distanceKm) {\n\t\t\t\t\t\t\t\t\t\t\t\t\ttotalWorkoutWeek += summaryWorkout.distanceKm;\n\t\t\t\t\t\t\t\t\t\t\t\t\ttotalWorkoutDistanceKmMonth += summaryWorkout.distanceKm;\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\t\t\tconst isChosen = (inputYear == yyyy && inputMonth == mm && inputDay == dd);\n\t\t\t\t\t\t\t\t\t\t\t\tconst isToday =  (currentYear == yyyy) && (currentMonth == mm) && (currentDay == dd);\n\t\t\t\t\t\t\t\t\t\t\t\tconst isDayOff = RED_DAYS.indexOf(day.getDay()) > -1;\n\n\t\t\t\t\t\t\t\t\t\t\t\t// console.log(summary);\n\t\t\t\t\t\t\t\t\t\t\t\t// count: 1, day: 5, distanceKm: 10, duration: 3600, elevation: 200, month: 9, speedAvg: 12, year: 2020\n\t\t\t\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t\t\t\t<td class={`text-center overflow-hidden font-weight-light position-relative pt-3 pb-3 border-right ${isChosen ? 'calendarIsChosen' : ''} ${isToday ? 'calendarIsToday' : ''} ${isDayOff ? 'calendarIsWeekend' : ''}`}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tstyle={`font-size: 0.8em; min-width: 3rem;`}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={this.editDay} data-day={day.getDate()} data-month={day.getMonth() + 1} data-year={year} data-week={weekObj.week} data-distance={summary.distance}\n\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div class='position-absolute text-muted' style='top: 0px; right: 2px; font-size: 0.7em;'>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{day.getDate()}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{summary && summary.distance ? \n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div class='rounded-pill w-100 px-1'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstyle={`background-color: ${mu.getPlanColor(summary, darkmode)};`}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Distance stores={this.props.stores} value={summary.distance} />\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{summary.count > 1 && <span class='position-absolute text-danger' style='bottom: 0; right: 0px; font-size: 0.6em;'>{summary.count}</span>}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div> : '-'}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{summaryWorkout.distanceKm > 0 && (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span class={`position-absolute font-weight-bold`}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstyle={`bottom: 0; left: 0px; font-size: 0.85em; color: ${isDayInTheFuture ? '#393DB1' : '#2BAAA9'};`}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Distance stores={this.props.stores} value={summaryWorkout.distanceKm} />\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t)}\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\t\t\t<td class='text-right pt-3 pb-3 position-relative border-right' style='font-size: 0.8em;'>\n\t\t\t\t\t\t\t\t\t\t\t\t<Distance stores={this.props.stores} value={totalWeek} />\n\t\t\t\t\t\t\t\t\t\t\t\t{totalWorkoutWeek > 0 && (\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span class={`position-absolute`}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tstyle={`bottom: 0; left: 0px; font-size: 0.85em; color: ${isWeekInTheFuture ? '#393DB1' : '#2BAAA9'};`}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Distance stores={this.props.stores} value={totalWorkoutWeek} />\n\t\t\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t\t\t<td class='text-right pt-3 pb-3 text-muted border-right' style='font-size: 0.8em;'\n\t\t\t\t\t\t\t\t\t\t\t\tonClick={this.editWeek} data-week={weekObj.week} data-year={year} data-distance={summaryWeek.distance}\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t{summaryWeek.distance > 0 && <>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div class='rounded-pill w-100 px-1 text-white text-center'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tstyle={`background-color: ${mu.getPlanColor(summaryWeek, darkmode)};`}\n\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Distance stores={this.props.stores} value={summaryWeek.distance} />\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t</>}\n\t\t\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t\t\t{/* <td class='text-right text-muted pt-3'>{totalDistanceKmMonth}</td> */}\n\t\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t\t{!hideWorkoutPlanTips && language === 'no' && tipsWeek && hasTipsWeek && <tr>\n\t\t\t\t\t\t\t\t\t\t\t<td colspan='10' class='pb-3'>\n\t\t\t\t\t\t\t\t\t\t\t\t<h5><span class='font-weight-lighter'>Uke {weekObj.week} {year}:</span>Tips fra Femundlpet</h5>\n\n\t\t\t\t\t\t\t\t\t\t\t\t{tipsWeek.totalDistance > 0 && <div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span class='text-muted'><i class='fas fa-road' /> Distanse</span>: {tipsWeek.totalDistance} km\n\t\t\t\t\t\t\t\t\t\t\t\t</div>}\n\t\t\t\t\t\t\t\t\t\t\t\t{tipsWeek.distance > 0 && <div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span class='text-muted'><i class='fas fa-road' /> Distanse pr kt</span>: {tipsWeek.distance}\n\t\t\t\t\t\t\t\t\t\t\t\t</div>}\n\t\t\t\t\t\t\t\t\t\t\t\t{tipsWeek.time && <div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span class='text-muted'><i class='fas fa-clock' /> Tid pr kt</span>: {tipsWeek.time}\n\t\t\t\t\t\t\t\t\t\t\t\t</div>}\n\t\t\t\t\t\t\t\t\t\t\t\t{tipsWeek.totalWorkouts > 0 && <div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span class='text-muted'><i class='fas fa-list-ol' /> Antall kter</span>: {tipsWeek.totalWorkouts}\n\t\t\t\t\t\t\t\t\t\t\t\t</div>}\n\t\t\t\t\t\t\t\t\t\t\t\t{tipsWeek.avgSpeed && <div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span class='text-muted'><i class='fas fa-tachometer-alt' /> Gjennomsnittsfart</span>: {tipsWeek.avgSpeed}\n\t\t\t\t\t\t\t\t\t\t\t\t</div>}\n\n\t\t\t\t\t\t\t\t\t\t\t\t{tipsWeek.comments && <div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t{tipsWeek.comments.map(c => <p>{c}</p>)}\n\t\t\t\t\t\t\t\t\t\t\t\t</div>}\n\t\t\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t\t</tr>}\n\n\t\t\t\t\t\t\t\t\t</>);\n\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t</tbody>\n\t\t\t\t\t\t\t<tfoot>\n\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t<td colspan='8' class='text-right pb-3'><Text id='workout.plan.totalkm'>Totalt km</Text></td>\n\t\t\t\t\t\t\t\t\t<td class='text-right position-relative pb-3'>\n\t\t\t\t\t\t\t\t\t\t<Distance stores={this.props.stores} value={totalDistanceKmMonth} />\n\t\t\t\t\t\t\t\t\t\t{totalWorkoutDistanceKmMonth > 0 && (\n\t\t\t\t\t\t\t\t\t\t\t<span class='position-absolute'\n\t\t\t\t\t\t\t\t\t\t\t\tstyle={`bottom: 0; left: 0px; font-size: 0.65em; color: ${isMonthInTheFuture ? '#393DB1' : '#2BAAA9'};`}\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t<Distance stores={this.props.stores} value={totalWorkoutDistanceKmMonth} />\n\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t<td class='text-right text-muted'>\n\t\t\t\t\t\t\t\t\t\t<Distance stores={this.props.stores} value={totalDistanceKmMonthPlan} />\n\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t{!hideWorkoutPlanTips && language === 'no' && tipsMonth && hasTipsMonth && <tr>\n\t\t\t\t\t\t\t\t\t<td colspan='10' class='pb-3'>\n\t\t\t\t\t\t\t\t\t\t<h5><span class='font-weight-lighter'>{MONTHS[month - 1]} {year}:</span> Tips fra Femundlpet</h5>\n\n\t\t\t\t\t\t\t\t\t\t{tipsMonth.totalDistance > 0 && <div>\n\t\t\t\t\t\t\t\t\t\t\t<span class='text-muted'><i class='fas fa-road' /> Distanse</span>: {tipsMonth.totalDistance} km\n\t\t\t\t\t\t\t\t\t\t</div>}\n\t\t\t\t\t\t\t\t\t\t{tipsMonth.distance > 0 && <div>\n\t\t\t\t\t\t\t\t\t\t\t<span class='text-muted'><i class='fas fa-road' /> Distanse pr kt</span>: {tipsMonth.distance}\n\t\t\t\t\t\t\t\t\t\t</div>}\n\t\t\t\t\t\t\t\t\t\t{tipsMonth.time && <div>\n\t\t\t\t\t\t\t\t\t\t\t<span class='text-muted'><i class='fas fa-clock' /> Tid pr kt</span>: {tipsMonth.time}\n\t\t\t\t\t\t\t\t\t\t</div>}\n\t\t\t\t\t\t\t\t\t\t{tipsMonth.totalWorkouts > 0 && <div>\n\t\t\t\t\t\t\t\t\t\t\t<span class='text-muted'><i class='fas fa-list-ol' /> Antall kter</span>: {tipsMonth.totalWorkouts}\n\t\t\t\t\t\t\t\t\t\t</div>}\n\t\t\t\t\t\t\t\t\t\t{tipsMonth.avgSpeed && <div>\n\t\t\t\t\t\t\t\t\t\t\t<span class='text-muted'><i class='fas fa-tachometer-alt' /> Gjennomsnittsfart</span>: {tipsMonth.avgSpeed}\n\t\t\t\t\t\t\t\t\t\t</div>}\n\n\t\t\t\t\t\t\t\t\t\t{tipsMonth.comments && <div>\n\t\t\t\t\t\t\t\t\t\t\t{tipsMonth.comments.map(c => <p>{c}</p>)}\n\t\t\t\t\t\t\t\t\t\t</div>}\n\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t</tr>}\n\t\t\t\t\t\t\t</tfoot>\n\t\t\t\t\t\t</table>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</>\n\t\t);\n\t}\n}\n\nexport default Calendar;\n","import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport { Text, Localizer, withText } from 'preact-i18n';\n\nimport Speed from '../../components/data/speed';\nimport Elevation from '../../components/data/elevation';\nimport Weight from '../../components/data/weight';\nimport Distance from '../../components/data/distance';\nimport Temperature from '../../components/data/temperature';\n\nimport mu from '../../lib/musher-util';\n\n@observer\nclass Dog extends Component {\n    render() {\n        const { dog } = this.props;\n\t\tconst { userStore, dogStore, appState } = this.props.stores;\n        const { isAdmin, user } = userStore;\n        const { language = 'en' } = user;\n        const { viewmode } = appState;\n\n        const currentMonth = new Date().getMonth() + 1;\n        const currentYear = new Date().getFullYear();\n\t\tconst { month = currentMonth, year = currentYear } = this.props;\n\t\tconst seasonStart = parseInt(month < 8 ? year - 1 : year, 10);\n\n        const workoutSummary = dogStore.findWorkoutSummary(dog.id, seasonStart) || {};\n        // {\"0\":{\"year\":2020,\"dog\":16,\"count\":1,\"distanceKm\":9.9,\"elevation\":202,\"duration\":0,\"speedAvg\":0}}\n        const dogStatuses = dog.statuses ? dog.statuses.map(e => userStore.findDogstatus({ status: e, language })) : [];\n        const dogVaccines = dogStore.findVaccineStatuses(dog.id);\n        const dogVaccineLogStatuses = dogStore.findVaccineLogStatuses(dog.chipId);\n        const dogHistoryStatuses = dogStore.findHistoryStatuses(dog.id);\n        const dogStatus = userStore.findDogstatus({ status: dog.status, language });\n        const dogPosition = userStore.findDogposition({ position: dog.position, language });\n        const teamNames = [];\n        if (userStore.findTeam(dog.team)) {\n            teamNames.push(userStore.findTeam(dog.team));\n        }\n        if (dog.teams) {\n            dog.teams.forEach((e) => {\n                if (userStore.findTeam(e)) {\n                    teamNames.push(userStore.findTeam(e));\n                }\n            });\n        }\n        const hasBirthday = mu.hasBirthday(dog.birth);\n        const daysUntilBirthday = dog.birth ? Math.ceil(mu.daysUntilNextBirthday(dog.birth)) : 365;\n\n        const { url = `/dogs/${dog.id}` } = this.props;\n\n        return (\n            <div class='w-100 mb-3'>\n                <div class='row'>\n                    <div class='col-12 col-sm-8 col-lg-6 offset-sm-2 offset-lg-3 d-flex mb-0 position-relative'>\n                        {/* {JSON.stringify(dog, null, 4)} */}\n                        <div class={`text-center border rounded-circle imageRounded text-muted pt-2`} style={dog.image ? `background-image: url(\"${dog.image.s3SmallLink}\"); background-size: cover;` : ''}>\n                            {/* {!dog.image && <i class='fas fa-dog mt-3' style='font-size: 40px;' />} */}\n                            {!dog.image && <span class='font-weight-lighter' style='font-size: 35px;'>{util.ucfirst(dog.name, true)}</span>}\n                        </div>\n                        <div class='flex-grow-1 pl-3 pr-2'\n                            style={`border-right: 4px solid ${userStore.findHarness(dog.harness, 'colorNonstop')} !important; line-height: 1.2em;`}\n                        >\n                            <span class='float-right'>\n                                {dogPosition && <span class={`badge badge-${dogPosition.class || 'primary'} mr-3`}>{dogPosition.icon && <i class={dogPosition.icon} />} {dogPosition.name}</span>}\n                                {daysUntilBirthday < 7 && <>\n                                    <span class='text-muted mr-2'>\n                                        <i class='fas fa-birthday-cake' /> in {daysUntilBirthday} days\n                                    </span>\n                                </>}                                \n                                {dog.birth && <span class='mr-2'>{util.age(dog.birth, dog.deceased)}</span>}\n                                {dog.gender === 'female' ? <i class='fas fa-venus' /> : <i class='fas fa-mars' />}\n                            </span>\n                            <a class='stretched-link' href={url}>\n                                <h5 class='mb-1' style='line-height: 1.0em;'>\n                                    {dog.shortname || dog.name} {dog.shortname && dog.shortname !== '' && <> - <span class='font-weight-lighter'>{dog.name}</span></>}\n                                    {hasBirthday && <>\n                                        <i class='fas fa-birthday-cake ml-3' />\n                                    </>}\n                                </h5>\n                            </a>\n                            <div>\n                                {teamNames && teamNames.length > 0 && <small class='font-weight-lighter'>\n                                    {teamNames.map((name, idx) => <>{idx > 0 ? ', ' : ''}{name}</>)}\n                                </small>}\n                                <br />\n                            </div>\n\n                            <small class='text-muted'>\n                                {/* {dog.chipId && <span class='ml-0'><i class='fas fa-microchip' /> {dog.chipId}</span>} */}\n                                {dog.history > 0 && <span class='ml-0'><i class='fas fa-file-signature' /> {dog.history.length}</span>}\n                                {dog.images > 0 && <span class='ml-2'><i class='fas fa-image' /> {dog.images.length}</span>}\n\n                                {workoutSummary && workoutSummary.distanceKm > 0 && <span class='ml-2'><i class='fas fa-road' /> <Distance stores={this.props.stores} value={workoutSummary.distanceKm} /></span>}\n                                {workoutSummary && workoutSummary.elevation > 0 && <span class='ml-2'><i class='fas fa-mountain' /> <Elevation stores={this.props.stores} value={workoutSummary.elevation} /></span>}\n                                {workoutSummary && workoutSummary.duration > 0 && <span class='ml-2'><i class='fas fa-clock' /> {util.secToHms(workoutSummary.duration, true)}</span>}\n                                {workoutSummary && workoutSummary.speedAvg > 0 && <span class='ml-2'><i class='fas fa-tachometer-alt' /> <Speed stores={this.props.stores} value={workoutSummary.speedAvg} /></span>}\n\n                                {dog.weight > 0 && <><i class='fas fa-balance-scale ml-2' /> <Weight stores={this.props.stores} value={dog.weight} /></>}\n                                {dog.bodyScore > 0 && <><i class='fas fa-dog ml-2' /> {util.format(dog.bodyScore, 1)}</>}\n                            </small>\n\n                            {['beta', 'advanced', 'normal'].indexOf(viewmode) > -1 && <>\n                                <div>\n                                    {dogVaccines && dogVaccines.map(v => (\n                                        <span class={`badge badge-success mr-2`} title={util.isoDate(v.endDate, false, false, true)}>\n                                            {v.vaccineType}\n                                            <span class='font-weight-light ml-3'>\n                                                <i class='fas fa-calendar-check' /> {util.isoDate(v.endDate, false, false, true)}                                    \n                                            </span>\n                                        </span>\n                                    ))}\n                                    {dogHistoryStatuses && dogHistoryStatuses.map(v => (\n                                        <span class={`badge badge-warning mr-2`} title={util.isoDate(v.endDate, false, false, true)}>{v.title}</span>\n                                    ))}\n                                </div>\n                            </>}\n\n                            {['beta', 'advanced'].indexOf(viewmode) > -1 && <>\n                                {dog.positions && dog.positions.lead && <div class=''>\n                                    {dog.positions.lead.distanceKm > 0 && <span class='badge badge-secondary mr-2'>\n                                        <span class='font-weight-lighter'><Text id='dogs.sort-lead'>Lead</Text>:</span> <Distance stores={this.props.stores} value={dog.positions.lead.distanceKm} />\n                                    </span>}\n                                    {dog.positions.point.distanceKm > 0 && <span class='badge badge-secondary mr-2'>\n                                        <span class='font-weight-lighter'><Text id='dogs.sort-point'>Point</Text>:</span> <Distance stores={this.props.stores} value={dog.positions.point.distanceKm} />\n                                    </span>}\n                                    {dog.positions.team.distanceKm > 0 && <span class='badge badge-secondary mr-2'>\n                                        <span class='font-weight-lighter'><Text id='dogs.sort-team'>Team</Text>:</span> <Distance stores={this.props.stores} value={dog.positions.team.distanceKm} />\n                                    </span>}\n                                    {dog.positions.wheel.distanceKm > 0 && <span class='badge badge-secondary mr-2'>\n                                        <span class='font-weight-lighter'><Text id='dogs.sort-wheel'>Wheel</Text>:</span> <Distance stores={this.props.stores} value={dog.positions.wheel.distanceKm} />\n                                    </span>}\n                                </div>}\n                            </>}\n\n                            <div class='clearfix pb-0'>\n                                {dog.specialNeeds && <span class={`badge badge-warning ml-2 mt-1 float-right`}><i class='fas fa-exclamation-triangle' /> {dog.specialNeeds}</span>}\n                                {dogStatus && <span class={`badge badge-${dogStatus.class} ml-2 mt-1 float-right`}>{dogStatus.icon && <i class={dogStatus.icon} />} {dogStatus.name}</span>}\n                                {dogStatuses && dogStatuses.map(status => <>\n                                    <span class={`badge badge-${status.class} ml-2 mt-1 float-right`}>\n                                        {status.icon && <i class={status.icon} />} {status.lang && status.lang[language] ? status.lang[language] : status.name}\n                                    </span>\n                                </>)}\n                            </div>\n\n                            {dogVaccineLogStatuses && dogVaccineLogStatuses.length > 0 && <>\n                                <div class='mt-2'>\n                                    {dogVaccineLogStatuses && dogVaccineLogStatuses.filter(e => e.chipId === dog.chipId).map((vac) => {\n                                        return (\n                                            <span class={`badge badge-${vac.inKarens ? 'warning' : 'success'} mr-2 mb-1`}>\n                                                <i class='fas fa-user-md' /> {vac.vaccineAgens.name}\n                                                {/* <span class='font-weight-lighter ml-2'> */}\n                                                    {/* <i class='fas fa-calendar-check' /> {util.isoDate(vac.vaccineAgens.durationEnd, false, false, true)} */}\n                                                    {/* {vac.inKarens && <>\n                                                        <br />\n                                                        (karens: {util.format(vac.karensDaysLeft, 0)} days left)\n                                                    </>} */}\n                                                {/* </span> */}\n                                            </span>\n                                        );\n                                    })}\n                                </div>\n                            </>}\n\n                        </div>\n                    </div>\n                </div>\n            </div>\n        );\n    }\n}\n\nexport default Dog;\n","import { h, Component } from 'preact';\nimport { observer } from 'mobx-preact';\nimport { toJS } from 'mobx';\nimport util from 'preact-util';\nimport { Text, Localizer } from 'preact-i18n';\nimport linkstate from 'linkstate';\n\n@observer\nclass Achievements extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            data: {},\n        };\n    }\n    \n    handleAdd = () => {\n        const { data } = this.state;\n        const {\n            updateField,\n            object,\n            field,\n        } = this.props;\n        updateField({ id: object.id, field, value: { ...data } });\n        this.setState({\n            data: {\n                name: '',\n                description: '',\n                url: '',\n            }\n        });\n    };\n\n\n    removeAchievement = async (e) => {\n        const { dogStore } = this.props.stores;\n        const { object } = this.props;\n        const { name, id } = e.target.closest('button').dataset;\n        dogStore.removeAchievement({\n            id: object.id,\n            name,\n            achievementId: id,\n        });\n    }\n\n    render() {\n        const { data } = this.state;\n        const { showFiles = true, object = {} } = this.props;\n        return (\n            <div class='row'>\n                <div class='col-12 mt-3'>\n                    {showFiles && <>\n                        <div class='container-fluid'>\n                            <div class='row'>\n\n                                {(!object.achievements || object.achievements.length === 0) && <>\n                                    <div class='text-center text-muted'>\n                                        <div class='display-1'><i class='fas fa-trophy' /></div>\n                                        <h3><Text id='dogs.no-achievements-title'>No achievements for this dog!</Text></h3>\n                                        <Text id='dogs.no-achievements-text'>You can add achievements to this dog. Ie. Memories, trips, tests, prices, races, etc.</Text>\n                                    </div>\n                                </>}\n\n                                {object.achievements && object.achievements.map(file => (\n                                    <div class='col-12 p-1'>\n                                        <span class='font-weight-lighter mr-2'>{util.isoDate(file.date, false, false, true)}</span>\n                                        <span class='mr-2'>{file.name}</span>\n                                        <span class='mr-2'>{file.url}</span>\n                                        <button class='btn btn-sm btn-link float-right p-0'\n                                            onClick={this.removeAchievement}\n                                            data-name={file.name}\n                                            data-id={file.id}\n                                        ><i class='fas fa-trash-alt' /> Del</button>\n                                    </div>\n                                ))}\n                            </div>\n                        </div>\n                    </>}\n                </div>\n                <div class='col-12 mt-3'>\n                    <details>\n                        <summary><Text id='dogs.achievement-add'>Add new achievement</Text></summary>\n\n                        <div class='form-group'>\n                            <label for='name'><Text id='dogs.achievement-name'>Name</Text></label>\n                            <input type='text' class='form-control' id='name' aria-describedby='nameHelp' onInput={linkstate(this, 'data.name')} value={data.name} />\n                            <small id='nameHelp' class='form-text text-muted'><Text id='dogs.achievement-name-help'>Name of achievement</Text></small>\n                        </div>\n                        <div class='form-group'>\n                            <label for='date'><Text id='dogs.achievement-date'>Date</Text></label>\n                            <input type='date' class='form-control' id='date' aria-describedby='dateHelp' onInput={linkstate(this, 'data.date')} value={data.date} />\n                            <small id='dateHelp' class='form-text text-muted'><Text id='dogs.achievement-date-help'>Date of achievement</Text></small>\n                        </div>\n                        <div class='form-group'>\n                            <label for='description'><Text id='dogs.achievement-description'>Description</Text></label>\n                            <input type='text' class='form-control' id='description' aria-describedby='descriptionHelp' onInput={linkstate(this, 'data.description')} value={data.description} />\n                            <small id='descriptionHelp' class='form-text text-muted'><Text id='dogs.achievement-description-help'>Description of achievement</Text></small>\n                        </div>\n                        <div class='form-group'>\n                            <label for='url'><Text id='dogs.achievement-url'>Url</Text></label>\n                            <input type='text' class='form-control' id='url' aria-describedby='urlHelp' onInput={linkstate(this, 'data.url')} value={data.url} />\n                            <small id='urlHelp' class='form-text text-muted'><Text id='dogs.achievement-url-help'>URL of achievement</Text></small>\n                        </div>\n                        <button class='btn btn-success' onClick={this.handleAdd}>\n                            <Text id='dogs.achievement-add'>Add achievement</Text>\n                        </button>\n                    </details>\n                </div>\n            </div>\n        );\n    }\n}\n\nexport default Achievements;\n","import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport { Text, Localizer, withText } from 'preact-i18n';\n\nimport mu from '../../lib/musher-util';\n\nimport LineGraph from '../../components/lineGraph';\n\n@withText((props) => ({\n    week: <Text id='workout.graph.week' />,\n    distanceAvgAll: <Text id='workout.graph.distance-avg-all' />,\n    distanceAvg: <Text id='workout.graph.distance-avg' />,\n    ascendAvgAll: <Text id='workout.graph.ascend-avg-all' />,\n    ascendAvg: <Text id='workout.graph.ascend-avg' />,\n    speedAvgAll: <Text id='workout.graph.speed-avg-all' />,\n    speedAvg: <Text id='workout.graph.speed-avg' />,\n    durationAvgAll: <Text id='workout.graph.duration-avg-all' />,\n    durationAvg: <Text id='workout.graph.duration-avg' />,\n    realDurationAvgAll: <Text id='workout.graph.real-duration-avg-all' />,\n    realDurationAvg: <Text id='workout.graph.real-duration-avg' />,\n    loadIndex: <Text id='workout.graph.load-index' />,\n    loadIndexAll: <Text id='workout.graph.load-index-all' />,\n    plan: <Text id='workout.graph.plan' />,\n}))\n@observer\nclass WorkoutGraphAvg extends Component {\n    render() {\n        const { userStore } = this.props.stores;\n        const { week, distanceAvgAll, distanceAvg, ascendAvgAll, ascendAvg, speedAvgAll, speedAvg,\n            durationAvg, realDurationAvg,\n            durationAvgAll, realDurationAvgAll,\n            loadIndex, loadIndexAll,\n            year,\n            teamAmbition,\n            teamType,\n            teamId,\n        } = this.props;\n        const {\n\t\t\tgraphAvgWorkoutStatsDistance,\n\t\t\tgraphAvgWorkoutStatsElevation,\n            graphAvgWorkoutStatsSpeed,\n            graphAvgWorkoutStatsDuration,\n            graphAvgWorkoutStatsRealDuration,\n            graphAvgWorkoutStatsLoadIndex,\n            graphWorkoutAvgWeekDistanceCurrent,\n            graphWorkoutAvgWeekElevationCurrent,\n            graphWorkoutAvgWeekSpeedCurrent,\n            graphWorkoutAvgWeekDurationCurrent,\n            graphWorkoutAvgWeekRealDurationCurrent,\n            graphWorkoutAvgWeekLoadIndexCurrent,\n            graphAvgWorkoutStatsCount,\n            user,\n\t\t} = userStore;\n\n        const { settings = {} } = user;\n\n        const currentMonth = new Date().getMonth() + 1;\n        const currentYear = year || util.getYear();\n\t\tconst seasonStart = parseInt(currentMonth < 8 ? currentYear - 1 : currentYear, 10);\n\n        // const summaryMonth = workoutPlanStore.findWorkoutPlanSummaryMonth(year, monthNum) || {};\n        const seasonWeeks = util.weekRange(`${seasonStart}-08-01`, `${seasonStart + 1}-07-31`);\n\n        const xTicksAll = seasonWeeks.map(wo => wo.week);\n        const parts = xTicksAll.length % 6;\n        const partSize = Math.floor(xTicksAll.length / parts);\n        const xTicks = [];\n        for (let i = 0, l = xTicksAll.length; i < l; i += partSize) {\n            xTicks.push(xTicksAll[i]);\n        }\n\n        return (\n            <>\n                {teamType && <a href={`/settings/team/${teamId}`}><span class='badge badge-pill badge-secondary ml-2 float-right'>{teamType}</span></a>}\n                {teamAmbition && <a href={`/settings/team/${teamId}`}><span class='badge badge-pill badge-secondary ml-2 float-right'>{teamAmbition}</span></a>}\n\n                <h5><Text id='workout.graph.title-avg'>Gjennomsnitt</Text> {seasonStart} - {seasonStart + 1}</h5>\n                <div class='w-100 mt-3 mb-4'>\n                    {/* <xmp>graphWorkoutSummaryWeekDistanceCurrent: {JSON.stringify(graphWorkoutSummaryWeekDistanceCurrent, null, 4)}</xmp>\n                    <xmp>graphWorkoutSummaryWeekDistancePrev: {JSON.stringify(graphWorkoutSummaryWeekDistancePrev, null, 4)}</xmp> */}\n                    <LineGraph\n                        stores={this.props.stores}\n                        width={500}\n                        height={150}\n                        showXTicks={1}\n                        xTicksVal={val => `${week} ${val}`}\n                        xTicks={xTicks}\n                        paddingTop={30}\n                        lineFromXzero={true}\n                        lineFromXmax={true}\n\n                        dataLeft={[graphWorkoutAvgWeekLoadIndexCurrent, graphAvgWorkoutStatsLoadIndex]}\n                        legendLeft={[`${seasonStart} ${loadIndex}`, `${seasonStart} ${loadIndexAll}`]}\n                        dataFillLeft={[1]}\n\n                        // yMaxLeft={30}\n                        // yMinLeft={0}\n                        showYTicksLeft={1}\n                        avgWindowLeft={[0, 2]}\n                        smoothLeft={[1, 1]}\n\n                        dataRight={[graphAvgWorkoutStatsCount]}\n                        showYTicksRight={1}\n                        smoothRight={[1]}\n                        // yTicksRightPostfix={'m'}\n                        // unitRight={['m', 'm']}\n                        // avgWindowRight={[0, 0]}\n\n                        // marker={week}\n                    />\n                </div>\n\n                <div class='w-100 mt-3 mb-4'>\n                    {/* <xmp>graphWorkoutSummaryWeekDistanceCurrent: {JSON.stringify(graphWorkoutSummaryWeekDistanceCurrent, null, 4)}</xmp>\n                    <xmp>graphWorkoutSummaryWeekDistancePrev: {JSON.stringify(graphWorkoutSummaryWeekDistancePrev, null, 4)}</xmp> */}\n                    <LineGraph\n                        stores={this.props.stores}\n                        width={500}\n                        height={150}\n                        showXTicks={1}\n                        xTicksVal={val => `${week} ${val}`}\n                        xTicks={xTicks}\n                        paddingTop={30}\n                        lineFromXzero={true}\n                        lineFromXmax={true}\n\n                        dataLeft={[graphWorkoutAvgWeekDistanceCurrent, graphAvgWorkoutStatsDistance]}\n                        legendLeft={[`${seasonStart} ${distanceAvg}`, `${seasonStart} ${distanceAvgAll}`]}\n                        dataFillLeft={[1]}\n                        // yMaxLeft={30}\n                        // yMinLeft={0}\n                        showYTicksLeft={1}\n                        yTicksLeftPostfix={settings.imperial ? 'mi' : 'km'}\n                        unitLeft={settings.imperial ? ['mi', 'mi', 'mi'] : ['km', 'km', 'km']}\n                        avgWindowLeft={[0, 2]}\n                        smoothLeft={[1, 1]}\n\n                        dataRight={[graphAvgWorkoutStatsCount]}\n                        showYTicksRight={1}\n                        smoothRight={[1]}\n                        // yTicksRightPostfix={'m'}\n                        // unitRight={['m', 'm']}\n                        // avgWindowRight={[0, 0]}\n                        // smoothRight={[1, 1]}\n\n                        // marker={week}\n                    />\n                </div>\n                <div class='w-100 mt-3 mb-4'>\n                    {/* <xmp>graphWorkoutSummaryWeekDistanceCurrent: {JSON.stringify(graphWorkoutSummaryWeekDistanceCurrent, null, 4)}</xmp>\n                    <xmp>graphWorkoutSummaryWeekDistancePrev: {JSON.stringify(graphWorkoutSummaryWeekDistancePrev, null, 4)}</xmp> */}\n                    <LineGraph\n                        stores={this.props.stores}\n                        width={500}\n                        height={150}\n                        showXTicks={1}\n                        xTicksVal={val => `${week} ${val}`}\n                        xTicks={xTicks}\n                        paddingTop={30}\n                        lineFromXzero={true}\n                        lineFromXmax={true}\n\n                        dataLeft={[graphWorkoutAvgWeekElevationCurrent, graphAvgWorkoutStatsElevation]}\n                        legendLeft={[`${seasonStart} ${ascendAvg}`, `${seasonStart} ${ascendAvgAll}`]}\n                        dataFillLeft={[1]}\n                        // yMaxLeft={30}\n                        // yMinLeft={0}\n                        showYTicksLeft={1}\n                        yTicksLeftPostfix={settings.imperial ? 'ft' : 'm'}\n                        unitLeft={settings.imperial ? ['ft', 'ft', 'ft'] : ['m', 'm', 'm']}\n                        avgWindowLeft={[0, 2]}\n                        smoothLeft={[1, 1]}\n\n                        dataRight={[graphAvgWorkoutStatsCount]}\n                        showYTicksRight={1}\n                        smoothRight={[1]}\n                        // marker={week}\n                    />\n                </div>\n                <div class='w-100 mt-3 mb-4'>\n                    {/* <xmp>graphWorkoutSummaryWeekDistanceCurrent: {JSON.stringify(graphWorkoutSummaryWeekDistanceCurrent, null, 4)}</xmp>\n                    <xmp>graphWorkoutSummaryWeekDistancePrev: {JSON.stringify(graphWorkoutSummaryWeekDistancePrev, null, 4)}</xmp> */}\n                    <LineGraph\n                        stores={this.props.stores}\n                        width={500}\n                        height={150}\n                        showXTicks={1}\n                        xTicksVal={val => `${week} ${val}`}\n                        xTicks={xTicks}\n                        paddingTop={30}\n                        lineFromXzero={true}\n                        lineFromXmax={true}\n\n                        dataLeft={[graphWorkoutAvgWeekSpeedCurrent, graphAvgWorkoutStatsSpeed]}\n                        legendLeft={[`${seasonStart} ${speedAvg}`, `${seasonStart} ${speedAvgAll}`]}\n                        dataFillLeft={[1]}\n                        // yMaxLeft={30}\n                        // yMinLeft={0}\n                        showYTicksLeft={1}\n                        yTicksLeftPostfix={settings.imperial ? 'mph' : 'km/t'}\n                        avgWindowLeft={[0, 2]}\n                        smoothLeft={[1, 1]}\n\n                        dataRight={[graphAvgWorkoutStatsCount]}\n                        showYTicksRight={1}\n                        smoothRight={[1]}\n\n                        // dataRight={[\n                        //     graphWorkoutAvgWeekDurationCurrent,\n                        //     graphAvgWorkoutStatsDuration,\n                        // ]}\n                        // legendRight={[\n                        //     `${seasonStart} ${durationAvg}`,\n                        //     `${seasonStart} ${durationAvgAll}`,\n                        // ]}\n                        // showYTicksRight={1}\n                        // yTicksRightVal={val => util.secToHms(val, true)}\n                        // avgWindowRight={[0, 0, 2, 2]}\n                        // smoothRight={[1, 1, 1, 1]}\n                        // marker={week}\n                    />\n                </div>\n                <div class='w-100 mt-3 mb-4'>\n                    {/* <xmp>graphWorkoutSummaryWeekDistanceCurrent: {JSON.stringify(graphWorkoutSummaryWeekDistanceCurrent, null, 4)}</xmp>\n                    <xmp>graphWorkoutSummaryWeekDistancePrev: {JSON.stringify(graphWorkoutSummaryWeekDistancePrev, null, 4)}</xmp> */}\n                    <LineGraph\n                        stores={this.props.stores}\n                        width={500}\n                        height={150}\n                        showXTicks={1}\n                        xTicksVal={val => `${week} ${val}`}\n                        xTicks={xTicks}\n                        paddingTop={30}\n                        lineFromXzero={true}\n                        lineFromXmax={true}\n\n                        dataLeft={[graphWorkoutAvgWeekDurationCurrent, graphAvgWorkoutStatsDuration]}\n                        legendLeft={[`${seasonStart} ${durationAvg}`, `${seasonStart} ${durationAvgAll}`]}\n                        dataFillLeft={[1]}\n                        // yMaxLeft={30}\n                        // yMinLeft={0}\n                        showYTicksLeft={1}\n                        yTicksLeftVal={val => util.secToHms(val, true)}\n                        avgWindowLeft={[0, 2]}\n                        smoothLeft={[1, 1]}\n\n                        dataRight={[graphAvgWorkoutStatsCount]}\n                        showYTicksRight={1}\n                        smoothRight={[1]}\n                        // marker={week}\n                    />\n                </div>\n            </>\n        );\n    }\n}\n\nexport default WorkoutGraphAvg;\n","import { h, Component } from 'preact';\nimport { observer } from 'mobx-preact';\nimport { toJS } from 'mobx';\nimport util from 'preact-util';\nimport { Text, Localizer } from 'preact-i18n';\n\nimport DragNDropFileupload from './dragNdropFileupload';\n\n@observer\nclass Files extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            files: [],\n        };\n    }\n    \n    handleAddImage = (file) => {\n        // <Images saved={saved} object={dog} field={field} updateField={updateField} />\n        // updateFieldValue = ({ id, field, value, datatype, elementtype, isNew = false, skipTimer = false }) => {\n        const {\n            updateField,\n            object,\n            field,\n        } = this.props;\n        updateField({ id: object.id, field, value: file });\n\n        // let images = toJS(object.images);\n        // if (!util.isArray(images)) {\n        //     images = [];\n        // }\n        // images.push(file);\n        // updateField({ id: object.id, field: 'images', value: images });\n    };\n\n    render() {\n        const { uploadStatus = () => {}, before = () => {}, after = () => {}, autoOpen = false } = this.props;\n        return (\n            <div class='row'>\n                <div class='col-12'>\n                    <Text id='form.files.upload-file'>Last opp fil</Text>:<br />\n                    <DragNDropFileupload\n                        handleAddImage={this.handleAddImage}\n                        apiUrl={'/api/fileupload'}\n                        uploadStatus={uploadStatus}\n                        before={before}\n                        after={after}\n                        autoOpen={autoOpen}\n                    >\n                        <div style={{ height: 30, width: '100%' }}>\n                            {/* {files.map((file, idx) => (\n                                <div key={idx}>\n                                    {file.name}\n                                    Total: {util.asString(file, 'load', 'total')}\n                                    <img style='width: 48px;'\n                                        alt='Preview'\n                                        key={file.preview}\n                                        src={file.src}\n                                    />\n                                </div>\n                            ))} */}\n                        </div>\n                    </DragNDropFileupload>\n                </div>\n            </div>\n        );\n    }\n}\n\nexport default Files;\n","import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport { Text, Localizer, withText } from 'preact-i18n';\n\nimport mu from '../../lib/musher-util';\n\nimport LineGraph from '../../components/lineGraph';\n\n@withText((props) => ({\n    week: <Text id='workout.graph.week' />,\n    distance: <Text id='workout.graph.distance' />,\n    duration: <Text id='workout.graph.duration'>Duration</Text>,\n    rest: <Text id='workout.graph.rest'>Rest</Text>,\n    ascend: <Text id='workout.graph.ascend' />,\n    plan: <Text id='workout.graph.plan' />,\n    speedAvg: <Text id='workout.graph.speedavg'>Speed</Text>,\n    loadIndex: <Text id='workout.graph.loadindex'>Loadindex</Text>,\n\n    avgDogs: <Text id='workout.graph.avgdogs'>Avg dogs</Text>,\n    avgImages: <Text id='workout.graph.avgimages'>Avg images</Text>,\n    sledWeight: <Text id='workout.graph.sledweight'>Sled weight</Text>,\n    rating: <Text id='workout.graph.rating'>Rating</Text>,\n    temperature: <Text id='workout.graph.temperature'>Temperature</Text>,\n}))\n@observer\nclass WorkoutGraph extends Component {\n    render() {\n        const { userStore, workoutPlanStore } = this.props.stores;\n        const {\n            user,\n\t\t\tworkoutSummary,\n\t\t\tgraphWorkoutSummaryWeekDistanceCurrent, graphWorkoutSummaryWeekDistancePrev,\n\t\t\tgraphWorkoutSummaryWeekElevationCurrent, graphWorkoutSummaryWeekElevationPrev,\n            avgDayDistance, avgDayElevation, \n            avgDayDuration, avgDaySpeedAvg, avgDayLoadIndex, \n            avgDayAvgDogs, avgDayAvgImages, avgDaySledWeight,\n            avgDayRest, avgDayRating, avgDayTemperature,\n\t\t} = userStore;\n        const { settings = {} } = user;\n        const { graphPlanWeekDistanceCurrent } = workoutPlanStore;\n\n        const currentMonth = new Date().getMonth() + 1;\n        const currentYear = new Date().getFullYear();\n\n        const {\n            isLoading,\n            week,\n            distance,\n            duration,\n            rest,\n            ascend,\n            plan,\n            speedAvg,\n            loadIndex,\n            avgDogs,\n            avgImages,\n            sledWeight,\n            rating,\n            temperature,\n            year = currentYear,\n            month = currentMonth,\n            showExtra = false,\n        } = this.props;\n\t\tconst seasonStart = parseInt(month < 8 ? year - 1 : year, 10);\n\n        // const summaryMonth = workoutPlanStore.findWorkoutPlanSummaryMonth(year, monthNum) || {};\n        const seasonWeeks = util.weekRange(`${seasonStart}-08-01`, `${seasonStart + 1}-07-31`);\n        const seasonDays = util.dayRange(`${seasonStart}-08-01`, `${seasonStart + 1}-07-31`);\n\n        const xTicksAll = seasonWeeks.map(wo => wo.week);\n        const parts = Math.floor(xTicksAll.length / 5);\n        const xTicks = [];\n        for (let i = 0, l = xTicksAll.length; i < l; i += parts) {\n            xTicks.push(xTicksAll[i]);\n        }\n\n        const xTicksAllDays = seasonDays.map(wo => `${wo.day}.${wo.month}`);\n        const partsDays = Math.floor(xTicksAllDays.length / 5);\n        const xTicksDays = [];\n        for (let i = 0, l = xTicksAllDays.length; i < l; i += partsDays) {\n            xTicksDays.push(xTicksAllDays[i]);\n        }\n\n        return (\n            <>\n                {/* <h5><Text id='workout.graph.title'>Treningsstatistikk</Text> {seasonStart} - {seasonStart + 1}</h5> */}\n                <div class='w-100 mt-3 mb-4 border-top pt-5'>\n                    {/* <xmp>graphWorkoutSummaryWeekDistanceCurrent: {JSON.stringify(graphWorkoutSummaryWeekDistanceCurrent, null, 4)}</xmp>\n                    <xmp>graphWorkoutSummaryWeekDistancePrev: {JSON.stringify(graphWorkoutSummaryWeekDistancePrev, null, 4)}</xmp> */}\n                    <h5 class='text-center'><Text id='workout.graph.total-distance'>Total distance</Text></h5>\n                    <LineGraph\n                        stores={this.props.stores}\n                        width={500}\n                        height={200}\n                        showXTicks={1}\n                        xTicksVal={val => `${week} ${val}`}\n                        xTicks={xTicks}\n                        paddingTop={30}\n                        lineFromXzero={true}\n                        lineFromXmax={true}\n                        xTicksLink={'/workouts/week/'}\n\n                        dataLeft={[graphWorkoutSummaryWeekDistanceCurrent, graphWorkoutSummaryWeekDistancePrev, graphPlanWeekDistanceCurrent]}\n                        legendLeft={[`${seasonStart} ${distance}`, `${seasonStart - 1} ${distance}`, `${seasonStart} ${plan}`]}\n                        dataFillLeft={[1]}\n                        // yMaxLeft={30}\n                        // yMinLeft={0}\n                        showYTicksLeft={1}\n                        yTicksLeftPostfix={settings.imperial ? 'mi' : 'km'}\n                        unitLeft={settings.imperial ? ['mi', 'mi', 'mi'] : ['km', 'km', 'km']}\n                        avgWindowLeft={[0, 0, 0]}\n                        smoothLeft={[1, 1, 1]}\n\n                        dataRight={[graphWorkoutSummaryWeekElevationCurrent, graphWorkoutSummaryWeekElevationPrev]}\n                        legendRight={[`${seasonStart} ${ascend}`, `${seasonStart - 1} ${ascend}`]}\n                        showYTicksRight={1}\n                        yTicksRightPostfix={settings.imperial ? 'ft' : 'm'}\n                        unitRight={settings.imperial ? ['ft', 'ft'] : ['m', 'm']}\n                        avgWindowRight={[0, 0]}\n                        smoothRight={[1, 1]}\n\n                        // marker={week}\n                    />\n                </div>\n\n                {!isLoading && graphWorkoutSummaryWeekDistanceCurrent && graphWorkoutSummaryWeekDistanceCurrent.length < 3 && (\n                    <div class='mb-5 py-3 border-top border-bottom'>\n                        <div class='text-left' style='line-height: 1.0em;'>\n                            <div class='display-4 float-left text-warning mr-3'>\n                                <i class='fas fa-paw' />\n                            </div>\n                            <small>\n                                <Text id='workout.graph.too-little-data'>Forelpig er det litt lite data for  kunne vise noen fine grafer. \n                                Etterhvert som du legger inn flere treninger s vil dette bli en fin tabell og graf som viser progresjonen din.</Text>\n                            </small>\n                        </div>\n                    </div>\n                )}\n                {showExtra && <>\n                    <div class='w-100 mt-3 mb-4 mt-5 pt-5 border-top'>\n                        <h5 class='text-center'><Text id='workout.graph.avg-rating'>Average rating/day</Text></h5>\n                        <LineGraph\n                            stores={this.props.stores}\n                            width={500}\n                            height={200}\n                            showXTicks={1}\n                            xTicksVal={val => `${val}`}\n                            xTicks={xTicksDays}\n                            paddingTop={30}\n                            lineFromXzero={true}\n                            lineFromXmax={true}\n                            // xTicksLink={'/workouts/week/'}\n\n                            dataLeft={[avgDayRating]}\n                            legendLeft={[`${seasonStart} ${rating}`]}\n                            // dataFillLeft={[1]}\n                            // yMaxLeft={30}\n                            // yMinLeft={0}\n                            showYTicksLeft={1}\n                            // yTicksLeftPostfix={settings.imperial ? 'mph' : 'km/t'}\n                            // unitLeft={settings.imperial ? ['mph', 'mph', 'mph'] : ['km/t', 'km/t', 'km/t']}\n                            avgWindowLeft={[0, 0, 0]}\n                            smoothLeft={[0, 0, 0]}\n\n                            dataRight={[avgDayTemperature]}\n                            legendRight={[`${seasonStart} ${temperature}`]}\n                            showYTicksRight={1}\n                            yTicksRightPostfix={settings.imperial ? 'F' : 'C'}\n                            // unitRight={settings.imperial ? ['ft', 'ft'] : ['m', 'm']}\n                            avgWindowRight={[0, 0]}\n                            smoothRight={[0, 0]}\n\n                            // marker={week}\n                        />\n                    </div>\n\n                    <div class='w-100 mt-3 mb-4 mt-5 pt-5 border-top'>\n                        <h5 class='text-center'><Text id='workout.graph.avg-distance'>Average distance/day</Text></h5>\n                        <LineGraph\n                            stores={this.props.stores}\n                            width={500}\n                            height={200}\n                            showXTicks={1}\n                            xTicksVal={val => `${val}`}\n                            xTicks={xTicksDays}\n                            paddingTop={30}\n                            lineFromXzero={true}\n                            lineFromXmax={true}\n                            // xTicksLink={'/workouts/week/'}\n\n                            dataLeft={[avgDayDistance]}\n                            legendLeft={[`${seasonStart} ${distance}`]}\n                            // dataFillLeft={[1]}\n                            // yMaxLeft={30}\n                            // yMinLeft={0}\n                            showYTicksLeft={1}\n                            yTicksLeftPostfix={settings.imperial ? 'mi' : 'km'}\n                            unitLeft={settings.imperial ? ['mi', 'mi', 'mi'] : ['km', 'km', 'km']}\n                            avgWindowLeft={[0, 0, 0]}\n                            smoothLeft={[0, 0, 0]}\n\n                            dataRight={[avgDayElevation]}\n                            legendRight={[`${seasonStart} ${ascend}`]}\n                            showYTicksRight={1}\n                            yTicksRightPostfix={settings.imperial ? 'ft' : 'm'}\n                            unitRight={settings.imperial ? ['ft', 'ft'] : ['m', 'm']}\n                            avgWindowRight={[0, 0]}\n                            smoothRight={[0, 0]}\n\n                            // marker={week}\n                        />\n                    </div>\n\n                    <div class='w-100 mt-3 mb-4 mt-5 pt-5 border-top'>\n                        <h5 class='text-center'><Text id='workout.graph.avg-duration'>Average duration/day</Text></h5>\n                        <LineGraph\n                            stores={this.props.stores}\n                            width={500}\n                            height={200}\n                            showXTicks={1}\n                            xTicksVal={val => `${val}`}\n                            xTicks={xTicksDays}\n                            paddingTop={30}\n                            paddingLeft={50}\n                            yTicksLeftWidth={'50px'}\n                            lineFromXzero={true}\n                            lineFromXmax={true}\n                            // xTicksLink={'/workouts/week/'}\n\n                            dataLeft={[avgDayDuration]}\n                            legendLeft={[`${seasonStart} ${duration}`]}\n                            yTicksLeftVal={val => `${util.secToHms(val)}`}\n\n                            // dataFillLeft={[1]}\n                            // yMaxLeft={30}\n                            // yMinLeft={0}\n                            showYTicksLeft={1}\n                            // yTicksLeftPostfix={settings.imperial ? 'mi' : 'km'}\n                            // unitLeft={settings.imperial ? ['mi', 'mi', 'mi'] : ['km', 'km', 'km']}\n                            avgWindowLeft={[0, 0, 0]}\n                            smoothLeft={[0, 0, 0]}\n\n                            dataRight={[avgDayRest]}\n                            legendRight={[`${seasonStart} ${rest}`]}\n                            showYTicksRight={1}\n                            yTicksRightVal={val => `${util.secToHms(val)}`}\n                            // yTicksRightPostfix={settings.imperial ? 'ft' : 'm'}\n                            // unitRight={settings.imperial ? ['ft', 'ft'] : ['m', 'm']}\n                            avgWindowRight={[0, 0]}\n                            smoothRight={[0, 0]}\n\n                            // marker={week}\n                        />\n                    </div>\n\n                    <div class='w-100 mt-3 mb-4 mt-5 pt-5 border-top'>\n                        <h5 class='text-center'><Text id='workout.graph.avg-speed'>Average speed/day</Text></h5>\n                        <LineGraph\n                            stores={this.props.stores}\n                            width={500}\n                            height={200}\n                            showXTicks={1}\n                            xTicksVal={val => `${val}`}\n                            xTicks={xTicksDays}\n                            paddingTop={30}\n                            lineFromXzero={true}\n                            lineFromXmax={true}\n                            // xTicksLink={'/workouts/week/'}\n\n                            dataLeft={[avgDaySpeedAvg]}\n                            legendLeft={[`${seasonStart} ${speedAvg}`]}\n                            // dataFillLeft={[1]}\n                            // yMaxLeft={30}\n                            // yMinLeft={0}\n                            showYTicksLeft={1}\n                            yTicksLeftPostfix={settings.imperial ? 'mph' : 'km/t'}\n                            unitLeft={settings.imperial ? ['mph', 'mph', 'mph'] : ['km/t', 'km/t', 'km/t']}\n                            avgWindowLeft={[0, 0, 0]}\n                            smoothLeft={[0, 0, 0]}\n\n                            dataRight={[avgDayLoadIndex]}\n                            legendRight={[`${seasonStart} ${loadIndex}`]}\n                            showYTicksRight={1}\n                            // yTicksRightPostfix={settings.imperial ? 'ft' : 'm'}\n                            // unitRight={settings.imperial ? ['ft', 'ft'] : ['m', 'm']}\n                            avgWindowRight={[0, 0]}\n                            smoothRight={[0, 0]}\n\n                            // marker={week}\n                        />\n                    </div>\n\n                    <div class='w-100 mt-3 mb-4 mt-5 pt-5 border-top'>\n                        <h5 class='text-center'><Text id='workout.graph.avg-dogs'>Average dogs/day</Text></h5>\n                        <LineGraph\n                            stores={this.props.stores}\n                            width={500}\n                            height={200}\n                            showXTicks={1}\n                            xTicksVal={val => `${val}`}\n                            xTicks={xTicksDays}\n                            paddingTop={30}\n                            lineFromXzero={true}\n                            lineFromXmax={true}\n                            // xTicksLink={'/workouts/week/'}\n\n                            dataLeft={[avgDayAvgDogs, avgDayAvgImages]}\n                            legendLeft={[`${seasonStart} ${avgDogs}`, `${seasonStart} ${avgImages}`]}\n                            // dataFillLeft={[1]}\n                            // yMaxLeft={30}\n                            // yMinLeft={0}\n                            showYTicksLeft={1}\n                            // yTicksLeftPostfix={settings.imperial ? 'mph' : 'km/t'}\n                            // unitLeft={settings.imperial ? ['mph', 'mph', 'mph'] : ['km/t', 'km/t', 'km/t']}\n                            avgWindowLeft={[0, 0, 0]}\n                            smoothLeft={[0, 0, 0]}\n\n                            dataRight={[avgDaySledWeight]}\n                            legendRight={[`${seasonStart} ${sledWeight}`]}\n                            showYTicksRight={1}\n                            // yTicksRightPostfix={settings.imperial ? 'ft' : 'm'}\n                            // unitRight={settings.imperial ? ['ft', 'ft'] : ['m', 'm']}\n                            avgWindowRight={[0, 0]}\n                            smoothRight={[0, 0]}\n\n                            // marker={week}\n                        />\n                    </div>\n\n                    {/* <xmp>{JSON.stringify(avgDayDuration, null, 4)}</xmp> */}\n                </>}\n            </>\n        );\n    }\n}\n\nexport default WorkoutGraph;\n","import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport { Text, Localizer } from 'preact-i18n';\nimport linkState from 'linkstate';\n\n@observer\nclass Invite extends Component {\n    inviteKennel = async () => {\n        const { friendEmail: email } = this.state;\n\t\tconst { userStore } = this.props.stores;\n        const response = await userStore.inviteKennel({ email });\n        this.setState({\n            response,\n            inviteSent: true,\n        });\n    }\n\n    inviteNew = () => {\n        this.setState({\n            inviteSent: false,\n        });\n    }\n\n    hideInvite = async () => {\n        const { userStore } = this.props.stores;\n        await userStore.updateSetting({ 'settings.hideInvite': 1 });\n        this.setState({\n            hideInvite: true,\n        });\n    }\n\n    render() {\n        const { inviteSent, hideInvite } = this.state;\n\t\tconst { userStore } = this.props.stores;\n        const { forceShow } = this.props;\n        const { user } = userStore;\n        const { settings = {} } = user;\n        if (!forceShow && settings.hideInvite || hideInvite) {\n            return '';\n        }\n        if (inviteSent) {\n            return (\n                <div class='col-12'>\n                    <Text id='users.invite.thanks'>Takk for at du hjelper oss til  bli flere </Text>\n                    <button type='button' class='btn btn-sm btn-link mb-2' onClick={this.inviteNew}>\n                        <Text id='users.invite.more'>Invitere flere</Text>\n                    </button>\n                </div>\n            );\n        }\n        return (\n            <div class='col-12 pb-4 clearfix'>\n                <h5><Text id='users.invite.title'>Inviter ny kennel til The Musher</Text></h5>\n                <p>\n                    <Text id='users.invite.text'>Jeg hper du vil hjelpe oss til  bli flere. Appen vil bli lansert veldig snart og det er ptide  invitere inn flere brukere.</Text>\n                </p>\n                <div>\n                    <div class='form-row align-items-center'>\n                        <div class='col-auto'>\n                            <label class='sr-only' for='inlineFormInput'><Text id='users.invite.email'>E-post</Text></label>\n                            <Localizer>\n                                <input type='text' class='form-control form-control-sm mb-2' id='inlineFormInput'\n                                    placeholder={<Text id='users.invite.email-placeholder'>E-post til ny kennel</Text>}\n                                    onInput={linkState(this, 'friendEmail')}\n                                />\n                            </Localizer>\n                        </div>\n                        <div class='col-auto'>\n                            <button type='button' class='btn btn-sm btn-primary mb-2' onClick={this.inviteKennel}>\n                                <Text id='users.invite.send'>Send invitasjon</Text>\n                            </button>\n                        </div>\n                    </div>\n                </div>\n                {!forceShow && <button type='button' class='btn btn-sm btn-link mb-2 float-left' onClick={this.hideInvite}>\n                    <i class='fas fa-eye-slash' /> <Text id='users.invite.hide'>Skjul</Text>\n                </button>}\n            </div>\n        );\n    }\n}\n\nexport default Invite;\n","import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport { route } from 'preact-router';\nimport { Text, Localizer } from 'preact-i18n';\nimport Markdown from 'preact-markdown';\n\nimport PubSub, { topics } from '../../lib/pubsub';\nimport mu from '../../lib/musher-util';\nconst MARGIN_TOP = mu.marginTop(false);\nconst MARGIN_TOP_BACK = mu.marginTopBack(false);\nconst MARGIN_BOTTOM = mu.marginBottom();\n\nimport Dog from '../../components/dog';\nimport User from '../../components/user';\nimport FormGraph from '../../components/team/formGraph';\nimport TeamLine from '../../components/team/publicLine';\nimport WorkoutGraph from '../../components/workout/graph';\nimport WorkoutGraphAvg from '../../components/workout/graphAvg';\nimport WorkoutTotals from '../../components/workout/totals';\nimport WorkoutStatus from '../../components/workout/status';\nimport Workout from '../../components/workout';\nimport Map from '../../components/map';\nimport PremiumBadge from '../../components/premium/badge';\nimport UserInvite from '../../components/user/invite';\nimport TeamConnectConfirm from '../../components/team/connect-confirm';\nimport Images from '../../components/form/images';\nimport Files from '../../components/form/files';\nimport Achievements from '../../components/form/achievements';\nimport Links from '../../components/form/links';\nimport ImageScroller from '../../components/imageScroller';\nimport CalendarPlan from '../../components/workout/calendarPlan';\nimport Ad from '../../components/ad/';\n\nimport ScrollIntoView from '../../components/util/scrollIntoView';\n\nconst initialState = {\n    newTeam: {},\n    submenu: 'stats',\n};\n\nconst LIMIT = 10;\n\n\n@observer\nclass Input extends Component {\n    handleImageErrored = (e) => {\n        const image = e.target;\n        image.onerror = null;\n        setTimeout(() => {\n            image.src += `?${new Date()}`;\n        }, 1000);\n    }\n\n    removeImage = async (e) => {\n        const { teamStore } = this.props.stores;\n        const { team } = this.props;\n        const imageName = e.target.parentElement.dataset.name || e.target.dataset.name;\n        teamStore.removeImage({\n            id: team.id,\n            name: imageName,\n        });\n    }\n\n    removeMainImage = () => {\n        const { team, field, updateField } = this.props;\n        updateField({ id: team.id, field, value: {} });\n    }\n\n    render() {\n        const { saved, team, field, icon, title, type, help, onInput, updateField, datalist = [], showImages = true, showFiles = true, addToImages = true } = this.props;\n        const value = team[field];\n        if (type === 'datalist') {\n            return (\n                <div class={`form-group  mb-5 pb-1 border-bottom ${saved[`${field}.${team.id}`] ? 'is-valid' : ''}`}>\n                    <label for={`${field}Input`}>{icon && <i class={`${icon} text-muted`} />} {title}</label>\n                    <input list={`list-${field}`} class={`form-control ${saved[`${field}.${team.id}`] ? 'is-valid' : ''}`} id={`${field}Input`} aria-describedby={`${field}Help`}\n                        value={value}\n                        data-id={team.id}\n                        data-field={field}\n                        onInput={onInput}\n                    />\n                    <datalist id={`list-${field}`} >\n                        {datalist.map(el => (\n                            <option value={el[0]}>{el[1]}</option>\n                        ))}\n                    </datalist>\n                    {saved[`${field}.${team.id}`] ? <div class={`valid-feedback`} style='display: block;'><Text id='teams.changes-saved'>Endringene er lagret</Text></div> : \n                        <small id={`${field}Help`} class='form-text text-muted'>{help}</small>}\n                </div>\n            );\n        }\n\n        if (type === 'select') {\n            return (\n                <div class={`form-group  mb-5 pb-1 border-bottom ${saved[`${field}.${team.id}`] ? 'is-valid' : ''}`}>\n                    <label for={`${field}Input`}>{icon && <i class={`${icon} text-muted`} />} {title}</label>\n\n                    <select\n                        list={`list-${field}`}\n                        class={`form-control ${saved[`${field}.${team.id}`] ? 'is-valid' : ''}`}\n                        id={`${field}Input`}\n                        aria-describedby={`${field}Help`}\n                        value={value}\n                        data-id={team.id}\n                        data-field={field}\n                        onInput={onInput}\n                        autocomplete='off'\n                    >\n                        <option value=''>-- <Text id='teams.choose-country'>Velg land</Text> --</option>\n                        {datalist.map(el => (\n                            <option value={el[0]}>{el[1]}</option>\n                        ))}\n                    </select>\n                    {saved[`${field}.${team.id}`] ? <div class={`valid-feedback`} style='display: block;'><Text id='teams.changes-saved'>Endringene er lagret</Text></div> : \n                        <small id={`${field}Help`} class='form-text text-muted'>{help}</small>}\n                </div>\n            );\n        }\n\n\n        if (type === 'image') {\n            return (\n                <div class={`form-group ${saved[`${field}.${team.id}`] ? 'is-valid' : ''}`}>\n                    <label for={`${field}Input`}>{icon && <i class={`${icon} text-muted`} />} {title}</label>\n\n                    <div class='container-fluid'>\n                        <div class='row'>\n                            {team[field] && team[field].s3SmallLink && <div class='col-3 p-1'>\n                                <img src={team[field].s3SmallLink} class='img-fluid border rounded-lg' onError={this.handleImageErrored} />\n                                <button class='btn btn-sm btn-link'\n                                    onClick={this.removeMainImage}\n                                    data-name={team[field].name}\n                                ><i class='fas fa-trash' /> Del</button>\n                                <span class='badge badge-success'>Main</span>\n                            </div>}\n                            {showImages && <>                            \n                                {team.images && team.images.map(img => (\n                                    <div class='col-3 p-1'>\n                                        <img src={img.s3SmallLink} class='img-fluid' onError={this.handleImageErrored} />\n                                        <button class='btn btn-sm btn-link'\n                                            onClick={this.removeImage}\n                                            data-name={img.name}\n                                        ><i class='fas fa-trash' /> Del</button>\n                                    </div>\n                                ))}\n                            </>}\n                        </div>\n                    </div>\n                    <Images saved={saved} object={team} field={field} updateField={updateField} addToImages={addToImages} autoOpen={false} />\n                    {saved[`${field}.${team.id}`] ? <div class={`valid-feedback`} style='display: block;'><Text id='teams.changes-saved'>Endringene er lagret</Text></div> : \n                        <small id={`${field}Help`} class='form-text text-muted'>{help}</small>}\n                </div>\n            );\n        }\n        if (type === 'toggle') {\n            return (\n                <div class={`form-group ${saved[`${field}.${team.id}`] ? 'is-valid' : ''}`}>\n                    <label for={`${field}Input`}>{icon && <i class={`${icon} text-muted`} />} {title}</label>\n                    <div class='custom-control custom-switch'>\n                        <input type='checkbox'\n                            class='custom-control-input'\n                            id={`${field}Input`}\n                            value={value === 1 ? 0 : 1}\n                            data-id={team.id}\n                            data-field={field}\n                            onInput={onInput}\n                            checked={value == 1 ? 'checked' : ''}\n                        />\n                        <label class='custom-control-label' for={`${field}Input`} />\n                    </div>\n                    {saved[`${field}.${team.id}`] ? <div class={`valid-feedback`} style='display: block;'><Text id='teams.changes-saved'>Endringene er lagret</Text></div> : \n                        <small id={`${field}Help`} class='form-text text-muted'>{help}</small>}\n                </div>\n            );\n        }\n        if (type === 'textarea') {\n            return (\n                <div class={`form-group ${saved[`${field}.${team.id}`] ? 'is-valid' : ''}`}>\n                    <label for={`${field}Input`}>{icon && <i class={`${icon} text-muted`} />} {title}</label>\n                    <textarea type='text' class={`form-control ${saved[`${field}.${team.id}`] ? 'is-valid' : ''}`} id={`${field}Input`} aria-describedby={`${field}Help`}\n                        value={value}\n                        data-id={team.id}\n                        data-field={field}\n                        onInput={onInput}\n                        rows={10}\n                    />\n                    {saved[`${field}.${team.id}`] ? <div class={`valid-feedback`} style='display: block;'><Text id='teams.changes-saved'>Endringene er lagret</Text></div> : \n                        <small id={`${field}Help`} class='form-text text-muted'>{help}</small>}\n                </div>\n            );\n        }\n        if (type === 'file') {\n            return (\n                <div class={`form-group ${saved[`${field}.${team.id}`] ? 'is-valid' : ''}`}>\n                    <label for={`${field}Input`}>{icon && <i class={`${icon} text-muted`} />} {title}</label>\n                    {showFiles && <>\n                        <div class='container-fluid'>\n                            <div class='row'>\n\n                                {(!team.files || team.files.length === 0) && <>\n                                    <div class='text-center text-muted'>\n                                        <div class='display-1'><i class='fas fa-file' /></div>\n                                        <h3><Text id='teams.no-files-title'>No files attached to this dog!</Text></h3>\n                                        <Text id='teams.no-files-text'>You can upload files to this dog inside edit. These files can be of any type. Ie: Certificates, test, etc.</Text>\n                                    </div>\n                                </>}\n\n                                {team.files && team.files.map(file => (\n                                    <div class='col-12 p-1'>\n                                        <span class='font-weight-lighter mr-2'>{util.isoDate(file.createdDate, false, false, true)}</span>\n                                        <span class='mr-2'>{file.name}</span>\n                                        <span class='font-weight-lighter mr-2'>{util.formatBytes(file.size, 1)}</span>\n                                        <button class='btn btn-sm btn-link float-right p-0'\n                                            onClick={this.removeFile}\n                                            data-name={file.name}\n                                        ><i class='fas fa-trash-alt' /> Del</button>\n                                    </div>\n                                ))}\n                            </div>\n                        </div>\n                    </>}\n                    <Files saved={saved} object={team} field={field} updateField={updateField} />\n                    {saved[`${field}.${team.id}`] ? <div class={`valid-feedback`} style='display: block;'><Text id='teams.changes-saved'>Endringene er lagret</Text></div> : \n                        <small id={`${field}Help`} class='form-text text-muted'>{help}</small>}\n                </div>\n            );\n        }        \n        if (field === 'links') {\n            return (\n                <div class={`form-group ${saved[`${field}.${team.id}`] ? 'is-valid' : ''}`}>\n                    <label for={`${field}Input`}>{icon && <i class={`${icon} text-muted`} />} {title}</label>\n                    <Links saved={saved} stores={this.props.stores} object={team} field={field} updateField={updateField} />\n                    {saved[`${field}.${team.id}`] ? <div class={`valid-feedback`} style='display: block;'><Text id='teams.changes-saved'>Endringene er lagret</Text></div> : \n                        <small id={`${field}Help`} class='form-text text-muted'>{help}</small>}\n                </div>\n            );\n        }\n        if (field === 'achievements') {\n            return (\n                <div class={`form-group ${saved[`${field}.${team.id}`] ? 'is-valid' : ''}`}>\n                    <label for={`${field}Input`}>{icon && <i class={`${icon} text-muted`} />} {title}</label>\n                    <Achievements saved={saved} stores={this.props.stores} object={team} field={field} updateField={updateField} />\n                    {saved[`${field}.${team.id}`] ? <div class={`valid-feedback`} style='display: block;'><Text id='teams.changes-saved'>Endringene er lagret</Text></div> : \n                        <small id={`${field}Help`} class='form-text text-muted'>{help}</small>}\n                </div>\n            );\n        }\n        return (\n            <div class={`form-group ${saved[`${field}.${team.id}`] ? 'is-valid' : ''}`}>\n                <label for={`${field}Input`}>{icon && <i class={`${icon} text-muted`} />} {title}</label>\n                <input type='text' class={`form-control ${saved[`${field}.${team.id}`] ? 'is-valid' : ''}`} id={`${field}Input`} aria-describedby={`${field}Help`}\n                    value={value}\n                    data-id={team.id}\n                    data-field={field}\n                    onInput={onInput}\n                />\n                {saved[`${field}.${team.id}`] ? <div class={`valid-feedback`} style='display: block;'><Text id='teams.changes-saved'>Endringene er lagret</Text></div> : \n                    <small id={`${field}Help`} class='form-text text-muted'>{help}</small>}\n            </div>\n        );\n    }\n}\n\n\n@observer\nclass TeamsDetail extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            ...initialState,\n        };\n        this.updateTimer = {};\n    }\n\n    async loadAll(props = this.props) {\n        this.setState({ isLoading: true });\n        await this.loadTeam(props),\n        await this.loadSummaryData(props);\n        this.setState({ isLoading: false });\n    }\n\n    async loadSummaryData(props = this.props) {\n        await Promise.all([\n            this.loadWorkoutPlans(props),\n            this.loadWorkoutSummary(props),\n            this.loadHeatmap(props),\n            this.loadWorkouts(),\n        ]);\n    }\n\n    loadTeam = async (props = this.props) => {\n\t\tconst { teamStore, userStore, workoutStore } = props.stores;\n        await teamStore.load(props.team, false, { addData: ['dogs', 'users', 'followers', 'blockedFollowers'] });\n        const { team } = teamStore;\n        await userStore.getWorkoutSummary({ team: team.id });\n        teamStore.plotFormGraph();\n    }\n\n    loadHeatmap = async (props = this.props) => {\n\t\tconst { workoutStore } = props.stores;\n        await workoutStore.getHeatmap(props.team);\n    }\n\n\tloadMore = () => {\n\t\tconst { offset } = this.state;\n\t\tthis.setState({ offset: offset + LIMIT }, () => {\n\t\t\tthis.loadWorkouts(true);\n\t\t});\n\t}\n\n    loadWorkouts = async (append = false) => {\n\t\tthis.setState({ isLoading: true });\n\t\tconst { workoutStore } = this.props.stores;\n        const { team } = this.props;\n\t\tconst { offset } = this.state;\n\t\tawait workoutStore.load({ query: { team }, limit: LIMIT, offset }, append);\n\t\t// await this.loadWorkoutSummary();\n\t\tthis.setState({ isLoading: false });\n\t}\n\n    loadWorkoutSummary = async (props = this.props) => {\n\t\tconst { userStore, workoutStore } = props.stores;\n\n\t\tconst currentMonth = new Date().getMonth() + 1;\n        const currentYear = new Date().getFullYear();\n\t\tconst { month = currentMonth, year = currentYear } = props;\n\n\t\tconst { currentTeam } = workoutStore;\n        const viewTeam = props.team || currentTeam;\n        await userStore.getWorkoutSummary({ team: viewTeam, year, month });\n\t\t// await userStore.getWorkoutSummaryDay({ month, year, team: viewTeam });\n\t\t// await userStore.getWorkoutSummaryDay({ month, year: year - 1, team: viewTeam });\n\t\tawait userStore.getWorkoutSummaryDay({ daysBack: 500, team: viewTeam });\n    }\n\n    loadWorkoutPlans = async (props = this.props) => {\n\t\tconst { year } = props;\n\t\tconst currentMonth = new Date().getMonth() + 1;\n\t\tconst currentYear = util.getYear();\n\t\tconst seasonStart = parseInt(year || (currentMonth < 8 ? currentYear - 1 : currentYear), 10);\n\t\tconst { workoutPlanStore, teamStore } = props.stores;\n        const { team } = teamStore;\n\n\t\tworkoutPlanStore.updateItem('workoutPlans', []);\n\t\tworkoutPlanStore.updateItem('workoutPlan', {});\n\t\tworkoutPlanStore.resetGraphPlanWeekDistanceCurrent();\n\n\t\tif (team.id) {\n\t\t\tawait workoutPlanStore.load({\n\t\t\t\tquery: {\n\t\t\t\t\tteam: team.id,\n\t\t\t\t\tseasonYear: seasonStart,\n\t\t\t\t},\n\t\t\t\taddData: ['tips'],\n\t\t\t});\n\t\t\tconst { workoutPlans } = workoutPlanStore;\n\t\t\tconst workoutPlanCurrent = workoutPlans[0] || {};\n\t\t\tif (workoutPlanCurrent.id) {\n\t\t\t\tawait workoutPlanStore.load(workoutPlanCurrent.id);\n\t\t\t\tworkoutPlanStore.prepareWeekGraphs({ year });\n\t\t\t} else {\n\t\t\t\tworkoutPlanStore.updateKeyValue('workoutPlan', {});\n\t\t\t\tworkoutPlanStore.updateKeyValue('workoutPlans', []);\n\t\t\t\tworkoutPlanStore.resetGraphPlanWeekDistanceCurrent();\n\t\t\t}\n\t\t}\n\t}\n\n\tdeleteTeam = async () => {\n\t\tconst { teamStore } = this.props.stores;\n\t\tconst { team } = teamStore;\n        await teamStore.saveField(team.id, 'offline', 1);\n\t\tPubSub.publish(topics.STATUS_MESSAGE, {\n\t\t\tmessage: 'Teamet er slettet',\n\t\t\ttype: 'success',\n\t\t\ticon: 'fas fa-check',\n\t\t});\n        route(`/teams/list`);\n\t}\n\n    updateField = (e) => {\n        const { id, field, type, elementtype, isNew } = e.target.dataset;\n        const value = e.target.value;\n        this.updateFieldValue({ id: parseInt(id, 10), field, value, type, elementtype, isNew });\n    }\n\n    updateFieldValue = ({ id, field, value, datatype, elementtype, isNew = false, skipTimer = false }) => {\n        const { teamStore } = this.props.stores;\n        let newValue = value;\n\n        let localObjectValue = value;\n        const { team } = teamStore;\n        if (field === 'images') {\n            if (Array.isArray(team.images) && Array.isArray(value)) {\n                localObjectValue = [...team.images, ...value];\n            }\n        }\n        if (field === 'achievements') {\n            if (Array.isArray(team.achievements)) {\n                if (Array.isArray(value)) {\n                    localObjectValue = [...team.achievements, ...value];\n                } else {\n                    localObjectValue = [...team.achievements, value];\n                }\n            }\n        }\n        if (field === 'links') {\n            if (Array.isArray(team.links)) {\n                if (Array.isArray(value)) {\n                    localObjectValue = [...team.links, ...value];\n                } else {\n                    localObjectValue = [...team.links, value];\n                }\n            }\n        }\n        if (field === 'files') {\n            if (Array.isArray(team.files)) {\n                if (Array.isArray(value)) {\n                    localObjectValue = [...team.files, ...value];\n                } else {\n                    localObjectValue = [...team.files, value];\n                }\n            }\n        }        \n        if (datatype === 'array' && !Array.isArray(value)) {\n            if (elementtype === 'number') {\n                newValue = value.split(',').map(e => parseFloat(e) || e);\n            } else  {\n                newValue = value.split(',');\n            }\n            // console.log('updateFieldValue', id, field, value, datatype, elementtype);\n        }\n\n        if (isNew) {\n            teamStore.updateObjectKeyValue('newTeam', field, value);\n        } else {\n            teamStore.updateField(id, field, localObjectValue);\n            if (skipTimer) {\n                this.doUpdateField(id, field, newValue);\n            } else {\n                clearTimeout(this.updateTimer[field]);\n                this.updateTimer[field] = setTimeout(async () => {\n                    this.doUpdateField(id, field, newValue);\n                }, 500);\n            }\n        }\n    }\n\n    async doUpdateField(id, field, value) {\n        const { teamStore } = this.props.stores;\n        await teamStore.saveField(id, field, value);\n    }\n\n    reCalculateFitness = async () => {\n\t\tconst { recalculated } = this.state;\n\t\tif (recalculated) {\n\t\t\treturn true;\n\t\t}\n\t\tconst { teamStore } = this.props.stores;\n\t\tconst { team } = teamStore;\n\t\tthis.setState({ recalculated: true });\n        await teamStore.reCalcFitness(team.id);\n    }\n\n    chooseSubmenu = (e) => {\n\t\tconst submenu = e.target.parentElement.dataset.menu || e.target.dataset.menu;\n\t\tthis.setState({ submenu });\n\t}\n\n    back = () => {\n        const { history } = this.props.stores;\n        history.goBack();\n    }\n\n\tcomponentDidMount() {\n        this.loadAll();\n    }\n\n    componentWillReceiveProps(nextProps) {\n        // console.log('componentWillReceiveProps', nextProps);\n        if (nextProps.team !== this.props.team) {\n            this.loadAll(nextProps);\n        }\n        if (nextProps.month !== this.props.month || nextProps.year !== this.props.year) {\n            this.loadSummaryData(nextProps);\n        }\n    }\n\n\trender() {\n        const { submenu, recalculated } = this.state;\n\t\tconst { teamStore, userStore, workoutPlanStore, workoutStore } = this.props.stores;\n        const { workoutPlan, workoutPlans } = workoutPlanStore;\n        const { heatmap, workouts, currentTeam } = workoutStore;\n\n        const currentMonth = new Date().getMonth() + 1;\n        const currentYear = new Date().getFullYear();\n\n\t\tconst { month = currentMonth, year = currentYear } = this.props;\n\t\tconst seasonStart = parseInt(month < 8 ? year - 1 : year, 10);\n\n\t\tconst { team, dogs, users, followers = [], blockedFollowers = [], saved, graphFitness } = teamStore;\n\n        const { image, imageHeader } = team;\n        const { isAdmin, user } = userStore;\n        const { language = 'en' } = user;\n        const {\n            user: currentUser,\n        } = userStore;\n        const isTeamAdmin = team.user === currentUser.id;\n        const teamAmbition = userStore.findTeamAmbition({ ambition: team.ambitions, language });\n        const teamType = userStore.findTeamType({ type: team.type, language });\n\n        const defaultImage = {\n            s3XXLargeLink: './assets/homerun-race-logo.png',\n        };\n\n        const headerImage = imageHeader && imageHeader.s3XXLargeLink ? imageHeader : defaultImage;\n        const teamImage = image && image.s3LargeLink ? image : null;\n\n\t\treturn (\n\t\t\t<div class='container-fluid' style={`margin-bottom: ${MARGIN_BOTTOM}; margin-top: ${MARGIN_TOP};`}>\n                <button class='btn btn-link pl-0 fixed-top text-primary'\n                    style={`top: ${MARGIN_TOP_BACK}; left: 5px; font-size: 35px; width: 45px;`}\n                    onClick={this.back}>\n                    <i class='fas fa-arrow-circle-left' />\n                </button>\n\n                <div class='row mb-1'>\n                    <div class='w-100 position-relative'\n                        style={`height: 25vh; background-size: cover; background-repeat: no-repeat; background-position: 50% 50%; background-color: #a0a0a0; ${headerImage ? `background-image: url(\"${headerImage.s3XXLargeLink}\");` : ''}`}\n                    >\n                        <a class='btn btn-sm btn-primary position-absolute'\n                            style={`top: 5px; right: 10px;`}\n                            href={`/teams/edit/${team.id}`}\n                        >\n                            <i class='fas fa-edit' /> <Text id='teams.edit'>Endre</Text>\n                        </a>\n                    </div>\n\t\t\t\t\t<div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-3'>\n                        <div class='row'>\n                            <div class='col-3 col-sm-4 col-md-3 col-lg-4 position-relative'>\n                                <div\n                                    class={`text-center border border-white rounded-circle position-absolute imageRounded imageRoundedResponsive imageRoundedResponsivePosition`}\n                                    style={`left: 20px; ${teamImage ? `background-image: url(\"${teamImage.s3LargeLink}\"); background-size: cover; background-repeat: no-repeat; background-position: 50% 50%;` : ''}`}\n                                >\n                                    {!teamImage && <i class='fas fa-users text-muted mt-4' style='font-size: 60px;' />}\n                                </div>\n                                &nbsp;\n                            </div>\n                            <div class='col-9 col-sm-8 col-md-9 col-lg-8' style='line-height: 1.2em;'>\n                                <h5 class='my-0'>{team.name}</h5>\n                                <small class='text-muted'>\n                                    {team.place ? `${team.place}, ` : ''}{team.country}\n                                </small><br />\n                                {teamType && <a href={`/settings/team/${team.id}`}><span class='badge badge-pill badge-secondary mt-2'>{teamType}</span></a>}\n                                {teamAmbition && <a href={`/settings/team/${team.id}`}><span class='badge badge-pill badge-secondary mt-2 ml-2'>{teamAmbition}</span></a>}\n                                {isTeamAdmin && <span class='badge badge-pill badge-primary mt-2 ml-2'><Text id='teams.admin'>Admin</Text></span>}\n                            </div>\n                        </div>\n                    </div>\n                </div>\n\n\t\t\t\t<div class='row'>\n\t\t\t\t\t<div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 my-1'>\n                        {team.public > 0 && <>\n                            <a href={`/teams/public/${team.uuidv4}`} class='btn btn-success btn-block'><i class='fas fa-users' /> <Text id='teams.public-profile'>Public profile</Text></a>\n                        </>}\n                    </div>\n                </div>\n\n\t\t\t\t<div class='row'>\n                    <div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 my-1'>\n\t\t\t\t\t\t<div class='row'>\n                            <div class='w-100 overflow-hidden'>\n                                <div\n                                    class='d-flex flex-row flex-nowrap pb-2 px-1'\n                                    style='overflow: auto; scroll-snap-type: x mandatory;'\n                                >\n                                    <div class='col px-0 pt-2'>\n                                        <button\n                                            class={`btn btn-block rounded-pill-left rounded-none ${submenu === 'stats' ? 'btn-primary' : 'btn-outline-primary'} text-nowrap`}\n                                            style='text-overflow: ellipsis; overflow: hidden;'\n                                            data-menu='stats'\n                                            onClick={this.chooseSubmenu}\n                                        ><i class='fas fa-tachometer-alt' /> <Text id='teams.stats'>Stats</Text></button>\n                                        {submenu === 'stats' && <ScrollIntoView horizontal={'center'} vertical={'end'} />}\n                                    </div>\n                                    <div class='col px-0 pt-2'>\n                                        <button\n                                            class={`btn btn-block rounded-none ${submenu === 'presentation' ? 'btn-primary' : 'btn-outline-primary'} text-nowrap`}\n                                            style='text-overflow: ellipsis; overflow: hidden;'\n                                            data-menu='presentation'\n                                            onClick={this.chooseSubmenu}\n                                        ><i class='fas fa-chalkboard-teacher' /> <Text id='teams.presentation'>Presentation</Text></button>\n                                        {submenu === 'presentation' && <ScrollIntoView horizontal={'center'} vertical={'end'} />}\n                                    </div>\n                                    <div class='col px-0 pt-2'>\n                                        <button\n                                            class={`btn btn-block rounded-none ${submenu === 'pictures' ? 'btn-primary' : 'btn-outline-primary'} text-nowrap`}\n                                            style='text-overflow: ellipsis; overflow: hidden;'\n                                            data-menu='pictures'\n                                            onClick={this.chooseSubmenu}\n                                        ><i class='fas fa-images' /> <Text id='teams.pictures'>Pictures</Text></button>\n                                        {submenu === 'pictures' && <ScrollIntoView horizontal={'center'} vertical={'end'} />}\n                                    </div>\n                                    <div class='col px-0 pt-2'>\n                                        <button\n                                            class={`btn btn-block rounded-none ${submenu === 'dogs' ? 'btn-primary' : 'btn-outline-primary'} text-nowrap`}\n                                            style='text-overflow: ellipsis; overflow: hidden;'\n                                            data-menu='dogs'\n                                            onClick={this.chooseSubmenu}\n                                        ><i class='fas fa-dog' /> <Text id='teams.dogs-menu'>Dogs</Text></button>\n                                        {submenu === 'dogs' && <ScrollIntoView horizontal={'center'} vertical={'end'} />}\n                                    </div>\n                                    <div class='col px-0 pt-2'>\n                                        <button\n                                            class={`btn btn-block rounded-none ${submenu === 'mushers' ? 'btn-primary' : 'btn-outline-primary'} text-nowrap`}\n                                            style='text-overflow: ellipsis; overflow: hidden;'\n                                            data-menu='mushers'\n                                            onClick={this.chooseSubmenu}\n                                        ><i class='fas fa-user' /> <Text id='teams.mushers'>Mushers</Text></button>\n                                        {submenu === 'mushers' && <ScrollIntoView horizontal={'center'} vertical={'end'} />}\n                                    </div>\n                                    <div class='col px-0 pt-2'>\n                                        <button\n                                            class={`btn btn-block rounded-none ${submenu === 'workouts' ? 'btn-primary' : 'btn-outline-primary'} text-nowrap`}\n                                            style='text-overflow: ellipsis; overflow: hidden;'\n                                            data-menu='workouts'\n                                            onClick={this.chooseSubmenu}\n                                        ><i class='fas fa-running' /> <Text id='teams.workouts'>Workouts</Text></button>\n                                        {submenu === 'workouts' && <ScrollIntoView horizontal={'center'} vertical={'end'} />}\n                                    </div>\n                                    <div class='col px-0 pt-2'>\n                                        <button\n                                            class={`btn btn-block rounded-none ${submenu === 'workoutplan' ? 'btn-primary' : 'btn-outline-primary'} text-nowrap`}\n                                            style='text-overflow: ellipsis; overflow: hidden;'\n                                            data-menu='workoutplan'\n                                            onClick={this.chooseSubmenu}\n                                        ><i class='fas fa-calendar-alt' /> <Text id='workouts.workoutplan'>Treningsplan</Text></button>\n                                        {submenu === 'workoutplan' && <ScrollIntoView horizontal={'center'} vertical={'end'} />}\n                                    </div>\n                                    <div class='col px-0 pt-2'>\n                                        <button\n                                            class={`btn btn-block rounded-none ${submenu === 'fitness' ? 'btn-primary' : 'btn-outline-primary'} text-nowrap`}\n                                            style='text-overflow: ellipsis; overflow: hidden;'\n                                            data-menu='fitness'\n                                            onClick={this.chooseSubmenu}\n                                        ><i class='fas fa-chart-line' /> <Text id='teams.fitness-menu'>Fitness</Text></button>\n                                        {submenu === 'fitness' && <ScrollIntoView horizontal={'center'} vertical={'end'} />}\n                                    </div>\n                                    <div class='col px-0 pt-2'>\n                                        <button\n                                            class={`btn btn-block rounded-none ${submenu === 'compare' ? 'btn-primary' : 'btn-outline-primary'} text-nowrap`}\n                                            style='text-overflow: ellipsis; overflow: hidden;'\n                                            data-menu='compare'\n                                            onClick={this.chooseSubmenu}\n                                        ><i class='fas fa-exchange-alt' /> <Text id='teams.compare'>Compare</Text></button>\n                                        {submenu === 'compare' && <ScrollIntoView horizontal={'center'} vertical={'end'} />}\n                                    </div>\n                                    <div class='col px-0 pt-2'>\n                                        <button\n                                            class={`btn btn-block rounded-none ${submenu === 'trophy' ? 'btn-primary' : 'btn-outline-primary'} text-nowrap`}\n                                            style='text-overflow: ellipsis; overflow: hidden;'\n                                            data-menu='trophy'\n                                            onClick={this.chooseSubmenu}\n                                        ><i class='fas fa-award' /> <Text id='teams.trophy'>Trophy case</Text></button>\n                                        {submenu === 'trophy' && <ScrollIntoView horizontal={'center'} vertical={'end'} />}\n                                    </div>\n                                    <div class='col px-0 pt-2'>\n                                        <button\n                                            class={`btn btn-block rounded-none ${submenu === 'achievements' ? 'btn-primary' : 'btn-outline-primary'} text-nowrap`}\n                                            style='text-overflow: ellipsis; overflow: hidden;'\n                                            data-menu='achievements'\n                                            onClick={this.chooseSubmenu}\n                                        ><i class='fas fa-clock' /> <Text id='teams.achievements'>Achievements</Text></button>\n                                        {submenu === 'achievements' && <ScrollIntoView horizontal={'center'} vertical={'end'} />}\n                                    </div>\n                                    <div class='col px-0 pt-2'>\n                                        <button\n                                            class={`btn btn-block rounded-none ${submenu === 'followers' ? 'btn-primary' : 'btn-outline-primary'} text-nowrap`}\n                                            style='text-overflow: ellipsis; overflow: hidden;'\n                                            data-menu='followers'\n                                            onClick={this.chooseSubmenu}\n                                        ><i class='fas fa-users' /> <Text id='teams.followers'>Followers</Text></button>\n                                        {submenu === 'followers' && <ScrollIntoView horizontal={'center'} vertical={'end'} />}\n                                    </div>\n                                    {/* <div class='col px-0 pt-2'>\n                                        <button\n                                            class={`btn btn-block ${submenu === 'veterinary' ? 'btn-primary' : 'btn-outline-primary'} text-nowrap`}\n                                            style='text-overflow: ellipsis; overflow: hidden;'\n                                            data-menu='veterinary'\n                                            onClick={this.chooseSubmenu}\n                                        ><i class='fas fa-cogs' /> <Text id='teams.veterinary'>Vet</Text></button>\n                                        {submenu === 'veterinary' && <ScrollIntoView horizontal={'center'} vertical={'end'} />}\n                                    </div> */}\n                                    <div class='col px-0 pt-2'>\n                                        <button\n                                            class={`btn btn-block rounded-pill-right rounded-none ${submenu === 'advanced' ? 'btn-primary' : 'btn-outline-primary'} text-nowrap`}\n                                            style='text-overflow: ellipsis; overflow: hidden;'\n                                            data-menu='advanced'\n                                            onClick={this.chooseSubmenu}\n                                        ><i class='fas fa-cogs' /> <Text id='teams.log'>Advanced</Text></button>\n                                        {submenu === 'advanced' && <ScrollIntoView horizontal={'center'} vertical={'end'} />}\n                                    </div>\n                                </div>\n                            </div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n                </div>\n\n\n                {submenu === 'stats' && <>\n                    <div class='row mt-3'>\n                        <div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3'>\n                            <WorkoutGraph stores={this.props.stores} isLoading={false} key={`graph-${workoutPlan.id}-${workoutPlans.length}`} />\n                            <WorkoutTotals stores={this.props.stores} currentTeam={team.id} />\n                            <WorkoutStatus stores={this.props.stores} currentTeam={team.id} />\n                        </div>\n                    </div>\n                </>}\n\n                {submenu === 'presentation' && <>\n                    <div class='row mt-3'>\n                        <div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-3'>\n                            <div class='d-flex justify-content-center'>\n                                {!team.facebook && <>\n                                    <div class='text-center text-muted'>\n                                        <div class='display-1'>\n                                            <i class='fab fa-facebook' />\n                                        </div>\n                                        <h3 class='font-weight-lighter'>\n                                            <Text id='teams.add-sosialmedia'>G inn p endring av teamet for  legge inn en sosialemedier.</Text>\n                                        </h3>\n                                    </div>\n                                </>}\n\n                                {team.url && <div class='mx-2'><h3><a href={mu.asUrl(team.url)} target='_blank' rel='noreferrer'><i class='fas fa-link' /></a></h3></div>}\n                                {team.facebook && <div class='mx-2'><h3><a href={mu.asFacebookLink(team.facebook)} target='_blank' rel='noreferrer'><i class='fab fa-facebook' /></a></h3></div>}\n                                {team.instagram && <div class='mx-2'><h3><a href={mu.asInstagramLink(team.instagram)} target='_blank' rel='noreferrer'><i class='fab fa-instagram' /></a></h3></div>}\n                                {team.snapchat && <div class='mx-2'><h3><a href={mu.asSnapchatLink(team.snapchat)} target='_blank' rel='noreferrer'><i class='fab fa-snapchat' /></a></h3></div>}\n                            </div>\n                        </div>\n                        <div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-3'>\n                            {!team.description && <>\n                                <div class='text-center text-muted'>\n                                    <div class='display-1'>\n                                        <i class='fas fa-pen-nib' />\n                                    </div>\n                                    <h3 class='font-weight-lighter'>\n                                        <Text id='teams.add-description'>G inn p endring av teamet for  legge inn en beskrivelse.</Text>\n                                    </h3>\n                                </div>\n                            </>}\n                            <Markdown markdown={mu.replaceImages(team.description, team.images, language)} markdownOpts={mu.getMarkdownOptions()} />\n                        </div>\n                    </div>\n                </>}\n\n                {submenu === 'pictures' && <>\n                    <div class='row mt-3'>\n                        <div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 px-0'>\n                            <Localizer>\n                                <ImageScroller stores={this.props.stores} images={team.images} noimagestext={<Text id='teams.no-photos'>No photos for this team.</Text>} />\n                            </Localizer>\n                        </div>\n                    </div>\n                </>}\n\n                {submenu === 'dogs' && <>\n                    <div class='row mt-3'>\n\n                        {(!dogs || dogs.length === 0) && <>\n                            <div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 px-0'>\n                                <div class='text-center text-muted'>\n                                    <div class='display-1'><i class='fas fa-dog' /></div>\n                                    <h3><Text id='teams.no-dogs-title'>No dogs for this team!</Text></h3>\n                                    <Text id='teams.no-dogs-text'>You can add more dogs to this team.</Text>\n                                </div>\n                            </div>\n                        </>}\n\n                        {dogs && dogs.length > 0 && <>\n                            <div class='col-12 mt-3'>\n                                <div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 px-0'>\n                                    <h5><Text id='teams.dogs' fields={{ total: dogs.length }}>Hundene - {dogs.length} stk</Text></h5>\n                                </div>\n                                {dogs && dogs.map(dog => (\n                                    <Dog stores={this.props.stores} dog={dog} />\n                                ))}\n                            </div>\n                        </>}\n                    </div>\n                </>}\n\n                {submenu === 'mushers' && <>\n                    <div class='row mt-3'>\n                        <div class='offset-0 col-12 mt-2'>\n                            <div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 px-0'>\n                                <a class='btn btn-secondary float-right'\n                                    href={`/teams/addmember/${team.id}`}\n                                >\n                                    <i class='fas fa-plus' /> <Text id='teams.add-new-member'>Legg til medlem</Text>\n                                </a>\n                            </div>\n                        </div>\n\n                        <div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-3'>\n                            <h5><Text id='teams.members' fields={{ total: users.length }}>Medlemmer - {users.length} stk</Text></h5>\n                            {users && users.map(user => (\n                                <User stores={this.props.stores} user={user} team={team} />\n                            ))}\n                        </div>\n                    </div>\n                </>}\n\n                {submenu === 'workouts' && <>\n                    <div class='row mt-3'>\n\n                        {(!workouts || workouts.length === 0) && <>\n                            <div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 px-0'>\n                                <div class='text-center text-muted'>\n                                    <div class='display-1'><i class='fas fa-running' /></div>\n                                    <h3><Text id='teams.no-workouts-title'>No workouts for this team!</Text></h3>\n                                    <Text id='teams.no-workouts-text'>You can add more workouts to this team.</Text>\n                                </div>\n                                <div class='text-center mt-3'>\n                                    <a href='/workouts' class='btn btn-primary'>\n                                        <i class='fas fa-running' /> <Text id='header.add-workouts'>Add Workouts</Text>\n                                    </a>\n                                </div>\n                            </div>\n                        </>}\n\n                        {workouts && workouts.length > 0 && <>\n                            <div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-3'>\n                                <h5><Text id='teams.workouts'>Workouts</Text></h5>\n                            </div>\n                            <div class='offset-0 col-12 mt-3'>\n                                {workouts && workouts.map(workout => (\n                                    <Workout stores={this.props.stores} workout={workout} showDate={true} />\n                                ))}\n                            </div>\n                        </>}\n                    </div>\n                </>}\n\n                {submenu === 'workoutplan' && <>\n                    <div class='row mt-3'>\n                        <CalendarPlan stores={this.props.stores}\n                            basehref={`/teams/${team.id}/`}\n                            month={month}\n                            year={year}\n                            key={`${workoutPlan.id || seasonStart}-${currentTeam}-${month}-${year}`}\n                            showNavigation={true}\n                            showHeader={true}\n                            currentTeam={currentTeam}\n                        />\n                        <div class='col-12'>\n                            <Ad stores={this.props.stores} url={this.props.url} section={submenu} />\n                        </div>\n                    </div>\n                </>}\n\n                {submenu === 'fitness' && <>\n                    <div class='row mt-3'>\n                        {(!graphFitness || graphFitness.length === 0) && <>\n                            <div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 px-0'>\n                                <div class='text-center text-muted'>\n                                    <div class='display-1'><i class='fas fa-chart-area' /></div>\n                                    <h3><Text id='teams.no-workouts-title'>No workouts for this team!</Text></h3>\n                                    <Text id='teams.no-workouts-fitness-text'>When you add workouts your fitness graph will be calculated every night.</Text>\n                                </div>\n                                <div class='text-center mt-3'>\n                                    <a href='/workouts' class='btn btn-primary'>\n                                        <i class='fas fa-running' /> <Text id='header.add-workouts'>Add Workouts</Text>\n                                    </a>\n                                </div>\n                            </div>\n                        </>}\n\n                        <div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-3'>\n                            <FormGraph stores={this.props.stores} />\n                        </div>\n                    </div>\n                </>}\n\n                {submenu === 'compare' && <>\n                    <div class='row mt-3'>\n                        <div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-3'>\n                            <h5><Text id='teams.compare'>Compare</Text></h5>\n                            <WorkoutGraphAvg stores={this.props.stores} isLoading={false}\n                                key={`graph-avg-${workoutPlan.id}-${workoutPlans.length}`}\n                                teamId={team.id}\n                                teamAmbition={teamAmbition}\n                                teamType={teamType}\n                            />\n                        </div>\n                    </div>\n                </>}\n\n                {submenu === 'trophy' && <>\n                    <div class='row mt-3'>\n                        <div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3'>\n                            {(!team.trophys || team.trophys.length === 0) && <>\n                                <div class='text-center text-muted'>\n                                    <div class='display-1'><i class='fas fa-award' /></div>\n                                    <h3><Text id='teams.no-trophys-title'>No trophys for this team!</Text></h3>\n                                    <Text id='teams.no-trophys-text'>You have to add more workouts, pictures, log entries for dogs, etc to earn trophys.</Text>\n                                </div>\n                            </>}\n\n                            <div class='row'>\n                                {team.trophys && team.trophys.reverse().map(file => {\n                                    const img = mu.getTrophyImage(file.name);\n                                    if (!img) {\n                                        return '';\n                                    }\n                                    const textHeader = file.descriptionHeader && file.descriptionHeader[language] ? file.descriptionHeader[language] : '';\n                                    const text = file.description && file.description[language] ? file.description[language] : '';\n                                    return (\n                                        <div class='col-4 mt-3'>\n                                            <div class='mb-2'>\n                                                <img src={img} class='img-fluid' />\n                                            </div>\n                                            <strong>{textHeader}</strong>\n                                            {/* <small class='font-weight-lighter mr-2'>\n                                                {util.isoDate(file.createdDate, false, false, true)}\n                                            </small> */}\n                                            <small>\n                                                <details>\n                                                    <summary><Text id='teams.trophy-details'>Details</Text></summary>\n                                                    <Markdown markdown={mu.replaceImages(text, team.images, language)} markdownOpts={mu.getMarkdownOptions()} />\n                                                </details>\n                                            </small>\n                                        </div>\n                                    );\n                                })}\n                            </div>\n\n                        </div>\n                    </div>\n                </>}\n\n                {submenu === 'achievements' && <>\n                    <div class='row mt-3'>\n                        <div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3'>\n                            {(!team.achievements || team.achievements.length === 0) && <>\n                                <div class='text-center text-muted'>\n                                    <div class='display-1'><i class='fas fa-clock' /></div>\n                                    <h3><Text id='teams.no-achievements-title'>No achievements for this team!</Text></h3>\n                                    <Text id='teams.no-achievements-text'>You can add achievements to this team. Ie. Memories, trips, tests, prices, races, etc.</Text>\n                                </div>\n                            </>}\n\n                            {team.achievements && team.achievements.map(file => (\n                                <div class='col-12 p-1'>\n                                    {file.date && <span class='font-weight-lighter mr-2'>{util.isoDate(file.date, false, false, true)}</span>}\n                                    <span class='mr-2 font-weight-bold'>{file.name}</span>\n                                    <span class='mr-2 font-weight-light'>{file.description}</span>\n                                    {file.url && <span class='mr-2'><a href={mu.asUrl(file.url)} target='_blank' rel='noreferrer' native><i class='fas fa-link' /></a></span>}\n                                </div>\n                            ))}\n                        </div>\n                    </div>\n                </>}\n\n                {submenu === 'followers' && <>\n                    <div class='row mt-3'>\n                        <div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-3'>\n                            <h5><Text id='teams.followers'>Followers</Text></h5>\n                        </div>\n\n                        <div class={`col-12`}>\n                            <TeamConnectConfirm stores={this.props.stores} />\n                        </div>\n\n                        <div class={`col-12 col-sm-8 col-lg-6 offset-sm-2 offset-lg-3 mb-0 position-relative`}>\n                            <div class='row'>\n                                {(!util.isArray(followers) || followers.length === 0) && <>\n                                    <div class='col-12 text-center text-muted mb-5'>\n                                        <div class='display-1'>\n                                            <i class='far fa-sad-tear' />\n                                        </div>\n                                        <h3 class='font-weight-lighter'>\n                                            <Text id='teams.no-followers'>Currently you have no followers, but fear not. It's easy get new followers. Be active in the feed and make you team profile beautiful.</Text>\n                                        </h3>\n                                    </div>\n\n                                    <div class='col-12 mb-5' style='font-size: 1.5em;'>\n                                        <Localizer>\n                                            <Input stores={this.props.stores} saved={saved} team={team} field='public' icon='fas fa-eye' type='toggle'\n                                                title={<Text id='teams.public'>Synlig offentlig</Text>}\n                                                help={<Text id='teams.public-help'>Skal teamet vre mulig  flge? Alle som vil flge m godkjennes av dere frst.</Text>}\n                                                onInput={this.updateField}\n                                            />\n                                        </Localizer>\n                                    </div>\n                                    {/* <UserInvite stores={this.props.stores} forceShow={true} /> */}\n                                </>}\n\n                                {util.isArray(followers) && followers.map(t => \n                                    <TeamLine stores={this.props.stores} team={t} myTeamId={team.id} showBlockButton={true} callback={this.loadTeam} />\n                                )}\n\n                                {util.isArray(blockedFollowers) && blockedFollowers.length > 0 && <>\n                                    <div class='col-12 mt-5'>\n                                        <h5><Text id='teams.blocked-followers'>Blokkerte team</Text>:</h5>\n                                    </div>\n                                    {util.isArray(blockedFollowers) && blockedFollowers.map(t => \n                                        <TeamLine stores={this.props.stores} team={t} myTeamId={team.id} isBlocked={true} callback={this.loadTeam} />\n                                    )}\n                                </>}\n                            </div>\n                        </div>\n                    </div>\n                </>}\n\n                {submenu === 'advanced' && <>\n                    <div class='row mt-3'>\n                        <div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-3'>\n                            <h5><Text id='teams.heatmap'>Heatmap</Text></h5>\n                            <Text id='teams.heatmap-info'>Heatmapen viser hvor du har vrt denne sesongen.</Text>\n                        </div>\n                        <div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-3'>\n                            {heatmap && heatmap.length > 0 && <Map\n                                stores={this.props.stores}\n                                mapId={heatmap.length}\n                                heatmap={heatmap}\n                                minZoom={2}\n                                height={600}\n                            />}\n                        </div>\n\n\n                        <div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mb-5 mt-5 border-top'>\n                            <h5 class='mt-5'><Text id='teams.recalculate-title'>Recalculate fitness, form and fatigue</Text></h5>\n                            <Text id='teams.recalculate-help'>\n                                Click the button below if you want to recalculate the fitness, form and fatigue data for your team and all dogs in this team.<br />\n                                Please don't overuse this function. If the calculations is not changed after 1 try, \n                                then it's not going to change the next time either.<br />\n                                <br />\n                                Calculations can take up to 1 hour, so please be patitient.\n                            </Text>\n\n                            <button class={`btn btn-block btn-warning mt-2 float-left ${recalculated ? 'disabled': ''}`}\n                                style='font-size: 0.8em;'\n                                onClick={this.reCalculateFitness}\n                            >\n                                <i class='fas fa-sync' /> <Text id='teams.recalculate'>Recalculate fitness, form and fatigue</Text>\n                            </button><br />\n                        </div>\n\n                        <div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-5 border-top'>\n                            <h5 class='mt-5'><Text id='teams.delete-title'>Delete team</Text></h5>\n                            <Text id='teams.delete-help'>\n                                Click the button below to delete this team. All data related to this team will be lost. All team statistics will also be affected.<br />\n                                <br />\n                                It's important to remember that you need to have at lease one team in the app, even if you only have one dog.\n                            </Text>\n                            <button class='btn btn-block btn-sm btn-danger mt-2 float-right'\n                                onClick={this.deleteTeam}\n                            >\n                                <i class='fas fa-trash' /> <Text id='teams.delete'>Delete</Text> {team.name}\n                            </button>\n                        </div>\n\n                    </div>\n                </>}\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nexport default TeamsDetail;\n","import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport { Text, Localizer, withText } from 'preact-i18n';\n\nimport mu from '../../lib/musher-util';\n\nconst initialState = {\n\tshowAddComment: false,\n};\n\n@withText(() => ({\n    subject: <Text id='ad.subject'>Annonseforesprsel</Text>,\n    body: <Text id='ad.body'>Hei, Jeg nsker  vite mer om annonsering i appen The Musher.</Text>,\n}))\n\n@observer\nclass Ad extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            ...initialState,\n        };\n        this.updateTimer = {};\n\t\tthis.inputRef = {};\n        this.apiServer = util.getApiServer();\n    }\n\n\tasync loadAd(props = this.props) {\n\t\tthis.setState({ isLoading: true });\n\t\tconst { adStore, workoutStore, userStore, appState } = this.props.stores;\n        const { section } = this.props;\n        const { path: url = '' } = appState;\n        const { currentTeam } = workoutStore;\n        const { user } = userStore;\n        const { language = 'en' } = user;\n        let team = {};\n        let ambitions;\n        let type;\n        let postalcode;\n        let place;\n        let country;\n        if (currentTeam) {\n            team = userStore.findTeam(currentTeam, true);\n            if (team && team.id) {\n                ambitions = userStore.findTeamAmbition({ ambition: team.ambitions, language });\n                type = userStore.findTeamType({ type: team.type, language });\n                postalcode = team.postalcode;\n                place = team.place;\n                country = team.country;\n            }\n        }\n        // console.log({ currentTeam, team, ambitions,  type, postalcode, place, country });\n        // const { url = '' } = this.props;\n        let page = url.replace(/\\d+$/, 'detail');\n        page = url.replace(/\\/\\d+/, '/detail');\n\n        // props: { \"url\": \"/\" }\n        // props: { \"url\": \"/workouts/\" }\n        // props: { \"url\": \"/workouts/4708\" }\n        // props: { \"url\": \"/dogs\" }\n        // props: { \"url\": \"/dogs/10\" }\n\n\t\tawait adStore.load({ query: { page, section }});\n        adStore.setTime();\n\t\tthis.setState({ isLoading: false });\n\t}\n\n    logClick = async () => {\n        const { adStore, userStore } = this.props.stores;\n        const { ads = [] } = adStore;\n        let id = ads.length > 0 ? ads[0].id : null;\n        const { user = {} } = userStore;\n        await adStore.logClick({ id, user: user.id });\n    }\n\n\tcomponentDidMount() {\n\t\tthis.loadAd();\n\t}\n\n    componentWillReceiveProps(nextProps) {\n        // console.log('componentWillReceiveProps', nextProps);\n        if (nextProps.path !== this.props.path) {\n            this.loadAd(nextProps);\n        }\n    }\n\n    render() {\n        const { adStore, userStore, appState } = this.props.stores;\n        const { subject, body, section } = this.props;\n        const { path } = appState;\n        const { user = {} } = userStore;\n        const { ads = [], time, adViews, adClicks } = adStore;\n        if (!user || !user.id || !ads || ads.length === 0) {\n            if (path.match(/\\/(home)/i)) {\n                return <>\n                    <div class='w-100'>\n                        <div class='row'>\n                            <div class='col-12 col-sm-8 col-lg-6 offset-sm-2 offset-lg-3 mb-0 position-relative'>\n                                <div class='border rounded-lg p-4 my-3'>\n                                    <span class='float-right display-4 text-warning'>\n                                        <i class='far fa-smile-wink' />\n                                    </span>\n                                    <h5><Text id='ad.heading'>Vil du annonsere her?</Text></h5>\n                                    <div><Text id='ad.teaser'>Det er super enkelt :)</Text></div>\n                                    <Localizer>\n                                        <a href={`mailto:post@themusher.no?subject=${subject}: ${path}: ${section}&body=${body}`} target='_blank' rel='noreferrer'>\n                                            <i class='fas fa-paper-plane' /> <Text id='ad.linktext'>Ta kontakt med The Musher</Text>\n                                        </a>\n                                    </Localizer>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </>;\n            }\n            return <></>;\n        }\n        const ad = ads[0];\n        return (\n            <>\n                <div class='w-100'>\n                    <div class='row'>\n                        <div class='col-12 col-sm-8 col-lg-6 offset-sm-2 offset-lg-3 mb-0 position-relative'>\n                            <div>\n                                <small><small class='text-muted'>\n                                    <Text id='ad.ad'>Annonse</Text>:\n                                    <img src={`${this.apiServer}/api/ads/${ad.id}/view?user=${user.id}&time=${time}`} style='width: 1; height: 1; opacity: 0.1;' />\n                                </small></small>\n                            </div>\n                            {ad.target ? <>\n                                <a\n                                    class='stretched-link'\n                                    href={`${ad.url}`}\n                                    target={ad.target || '_blank'}\n                                    rel='noopener noreferrer'\n                                    onClick={this.logClick}\n                                    native\n                                >\n                                    {ad.images && ad.images[0] && <>\n                                        <img src={ad.images[0].s3LargeLink} class='img-fluid rounded-lg' />\n                                    </>}\n                                </a>                            \n                            </> : <>\n                                <a\n                                    class='stretched-link'\n                                    href={`${ad.url}`}\n                                    onClick={this.logClick}\n                                >\n                                    {ad.images && ad.images[0] && <>\n                                        <img src={ad.images[0].s3LargeLink} class='img-fluid rounded-lg' />\n                                    </>}\n                                </a>\n                            </>}\n                        </div>\n                    </div>\n                </div>\n            </>\n        );\n    }\n}\n\nexport default Ad;\n","import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport { Text, Localizer } from 'preact-i18n';\n\nimport mu from '../../lib/musher-util';\n\nimport PublicTeam from '../../components/team/public';\n\nconst initialState = {\n\tconfirmed: {},\n\tdeleted: {},\n};\n\n@observer\nclass Teams extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            ...initialState,\n        };\n    }\n\n    async loadTeams() {\n        const { teamStore } = this.props.stores;\n        await teamStore.load({ query: {}, addData: ['followRequests'] });\n    }\n\n    confirmRequest = (e) => {\n        const { team, user, follow } = e.target.closest('button').dataset;\n        const { teamStore } = this.props.stores;\n        teamStore.confirmFollowRequest({\n            team: parseInt(team, 10),\n            user: parseInt(user, 10),\n        });\n        const { confirmed } = this.state;\n\t\tconfirmed[`${team}-${user}`] = true;\n        this.setState({ confirmed });\n\n        if (follow) {\n            teamStore.followRequestUser(user);\n        }\n    }\n\n    deleteRequest = (e) => {\n        const { team, user } = e.target.closest('button').dataset;\n        const { teamStore } = this.props.stores;\n        teamStore.deleteFollowRequest({\n            team: parseInt(team, 10),\n            user: parseInt(user, 10),\n        });\n        const { deleted } = this.state;\n\t\tdeleted[`${team}-${user}`] = true;\n        this.setState({ deleted });\n    }\n\n\tcomponentDidMount() {\n\t\tthis.loadTeams();\n\t}\n\n\trender() {\n        const { deleted = {}, confirmed = {} } = this.state;\n\t\tconst { teamStore, appState } = this.props.stores;\n\t\tconst { teams, hasFollowRequests, followRequests = [] } = teamStore;\n        const { darkmode } = appState;\n\t\tif (!hasFollowRequests) {\n\t\t\treturn '';\n\t\t}\n\n\t\treturn (\n            <div class='row pb-1'>\n                <div class={`col-12 col-sm-8 col-lg-6 offset-sm-2 offset-lg-3 mb-0 position-relative rounded rounded-lg py-3 bg-${darkmode ? 'black' : 'white'} shadow-sm`}>\n                    <div class='container-fluid'>\n                        <div class='row'>\n                            <div class='col-12'>\n                                <h5><Text id='teams.connect.teams-follow-requests'>Foresprsel om  flge</Text>:</h5>\n                            </div>\n                        </div>\n\t\t\t\t\t\t<div class='row'>\n                            <div class='d-flex flex-row flex-nowrap' style='overflow: auto;'>\n                                {util.isArray(teams) && teams.map((team) => <>\n                                    {team && util.isArray(team.followRequests) && team.followRequests.map((reqUser) => {\n                                        const image = reqUser.image && reqUser.image.s3SmallLink ? reqUser.image : null;\n                                        const isDeleted = deleted[`${team.id}-${reqUser.id}`];\n                                        const isConfirmed = confirmed[`${team.id}-${reqUser.id}`];\n                                        const publicTeam = followRequests.find(e => e.user.id === reqUser.id);\n                                        return (\n                                            <div class='mr-2 py-2 border rounded-lg' style='width: 150px;'>\n                                                <div class={`text-center border rounded-circle imageRounded imageRoundedSmall mx-auto`} style={image ? `background-image: url(\"${image.s3SmallLink}\");` : ''}>\n                                                    {!image && <div class='text-muted font-weight-lighter' style='font-size: 20px; padding-top: 5px;'>{mu.displayNameShort(reqUser)}</div>}\n                                                </div>\n                                                <small>\n                                                    <div class='text-overflow text-center'>\n                                                        <strong>{mu.displayName(reqUser)}</strong><br />\n                                                        {/* {publicTeam && publicTeam.public > 0 ? <>\n                                                            <a href={`/teams/public/${publicTeam.uuidv4}`}>{publicTeam.name}</a>\n                                                        </> : <>\n                                                            {publicTeam ? <>{publicTeam.name}</> : ''}<br />\n                                                            <span class='text-muted'>(<Text id='teams.not-public'>Not public</Text>)</span>\n                                                        </>} */}\n                                                    </div>\n                                                    <div class='text-overflow text-center'>\n                                                        <Text id='teams.connect.wants-to-follow'>wants to follow your team:</Text>\n                                                    </div>\n                                                    <div class='text-overflow text-center'>\n                                                        <strong>{mu.displayName(team)}</strong>\n                                                    </div>\n                                                </small>\n                                                {(isConfirmed || isDeleted) ? <>\n                                                    <div class='text-center'>\n                                                        {isConfirmed ? <div class='text-success'>\n                                                            <Text id='teams.connect.confirmed'>Confirmed</Text> <i class='fas fa-check' />\n                                                        </div> : <div class='text-danger'>\n                                                            <Text id='teams.connect.deleted'>Deleted</Text> <i class='fas fa-trash-alt' />\n                                                        </div>}\n                                                    </div>\n                                                </> : <>                                    \n                                                    <div>\n                                                        <button class='btn btn-sm btn-block btn-success text-overflow mt-1' onClick={this.confirmRequest} data-team={team.id} data-user={reqUser.id}>\n                                                            <Text id='teams.connect.confirm'>Confirm</Text>\n                                                        </button>\n                                                        {publicTeam && publicTeam.public > 0 && <button class='btn btn-sm btn-block btn-outline-success text-overflow mt-1' onClick={this.confirmRequest} data-team={team.id} data-user={reqUser.id} data-follow={true}>\n                                                            <Text id='teams.connect.confirm-and-follow'>Confirm & follow back</Text>\n                                                        </button>}\n                                                        <div class='mt-3'>\n                                                            <small>\n                                                                <button class='btn btn-sm btn-block btn-link text-overflow' style='font-size: 1.0em;' onClick={this.deleteRequest} data-team={team.id} data-user={reqUser.id}>\n                                                                    <Text id='teams.connect.delete'>Del</Text>\n                                                                </button>\n                                                            </small>\n                                                        </div>\n                                                    </div>\n                                                </>}\n                                            </div>\n                                        );\n                                    })}\n                                </>)}\n                            </div>\n                        </div>\n                        <details class='mt-3'>\n                            <summary><small><Text id='teams.connect.how-summary'>How does this work?</Text></small></summary>\n                            <p>\n                                <Text id='teams.connect.how-text'>What can followers see when I grant them access to follow? The answer is very little. They can see main details of the workouts you share and name of the dogs. That's all. Try to follow a team and check out the workout tab.</Text>\n                            </p>\n                        </details>\n                    </div>\n                </div>\n            </div>\n\t\t);\n\t}\n}\n\nexport default Teams;\n","import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport { Text, Localizer } from 'preact-i18n';\n\nimport mu from '../../lib/musher-util';\n\nconst initialState = {};\n\n@observer\nclass PremiumBadge extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            ...initialState,\n        };\n    }\n\n    render() {\n        return (\n            <span class='badge badge-pill badge-warning float-right'><i class='fas fa-award mr-2' /> <Text id='premium.title'>Premium</Text></span>\n\n        );\n    }\n}\n\nexport default PremiumBadge;\n"],"sourceRoot":""}