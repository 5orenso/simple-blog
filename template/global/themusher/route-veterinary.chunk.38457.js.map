{"version":3,"sources":["webpack:///./routes/veterinary/header.js","webpack:///./routes/veterinary/index.js"],"names":["initialState","menu","profile","main","searchText","Navigation","observer","props","toggleDropdown","e","state","menuName","target","dataset","name","parentNode","setState","toggleDarkmode","stores","appState","toggleViewmode","mode","reloadApp","window","location","reload","adminLoadAll","userStore","getInfo","changeLanguage","lang","value","console","log","user","email","setLanguage","language","search","route","render","this","darkmode","notifications","filter","read","class","style","href","src","height","type","data-name","onClick","id","onInput","selected","className","activeClassName","Component","MARGIN_TOP","mu","marginTop","MARGIN_BOTTOM","marginBottom","subMenuMarginTop","getVaccineTypes","isLoading","submenu","jwtToken","util","getJwtToken","Teams","selectTeam","preventDefault","closest","displayTeam","parseInt","teams","map","team","data-id","Dogs","dogs","selectDog","selectedDogs","dogId","idx","indexOf","push","splice","selectAllDogs","removeAllDogs","vaccineStatuses","length","for","aria-describedby","linkstate","autocomplete","searchForMusher","scope","dog","image","images","isSelected","s3ThumbLink","ucfirst","birth","age","deceased","gender","shortname","chipId","v","title","isoDate","endDate","vaccineType","PublicRace","searchUsers","selectMusher","userId","displayUser","getDogs","componentDidMount","componentWillReceiveProps","searchUsersResult","searchUserTeams","col","offset","onSubmit","placeholder","firstname","lastname","facebook","asFacebookLink","rel","instagram","asInstagramLink","cellphone","colspan"],"mappings":"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","file":"route-veterinary.chunk.38457.js","sourcesContent":["import { h, Component } from 'preact';\nimport { Link } from 'preact-router/match';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport linkState from 'linkstate';\nimport { route } from 'preact-router';\nimport { Text, Localizer } from 'preact-i18n';\n\nconst initialState = {\n    menu: {\n\t\tprofile: false,\n\t\tmain: false,\n\t},\n\tsearchText: '',\n};\n\n@observer\nclass Navigation extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            ...initialState,\n        };\n    }\n\n\ttoggleDropdown = (e) => {\n\t\tconst { menu } = this.state;\n\t\tlet menuName = e.target.dataset.name;\n\t\tif (!menuName && e.target.parentNode) {\n\t\t\tmenuName = e.target.parentNode.dataset.name;\n\t\t}\n\t\tif (menuName) {\n\t\t\tmenu[menuName] = !menu[menuName];\n\t\t}\n\t\tthis.setState({ menu });\n\t}\n\n\ttoggleDarkmode = (e) => {\n        const { appState } = this.props.stores;\n\t\tappState.toggleDarkmode();\n\t\tthis.toggleDropdown(e);\n\t}\n\n\ttoggleViewmode = (e) => {\n        const { appState } = this.props.stores;\n\t\tlet mode = e.target.dataset.mode;\n\t\tif (!mode && e.target.parentNode) {\n\t\t\tmode = e.target.parentNode.dataset.mode;\n\t\t}\n\t\tappState.toggleViewmode(mode);\n\t\tthis.toggleDropdown(e);\n\t}\n\n\treloadApp = () => {\n\t\twindow.location.reload(true);\n\t}\n\n\tadminLoadAll = async (e) => {\n        const { userStore } = this.props.stores;\n        await userStore.getInfo(true);\n\t}\n\n\tchangeLanguage = (e) => {\n\t\tconst lang = e.target.value;\n\t\tconsole.log('changeLanguage', lang);\n\t\tconst { appState, userStore } = this.props.stores;\n\t\tconst { user = {} } = userStore;\n\t\tif (user.email) {\n\t\t\tuserStore.setLanguage({ email: user.email, language: lang });\n\t\t}\n\t\tappState.setLanguage(lang);\n\t}\n\n\tsearch = () => {\n\t\tconst { searchText } = this.state;\n\t\troute(`/search/${searchText}`, true);\n\t}\n\n    render() {\n\t\tconst { menu, searchText } = this.state;\n        const { appState, userStore } = this.props.stores;\n        const { darkmode, viewmode, isCordova } = appState;\n\t\tconst { allUsers, isAdmin, user, notifications = [] } = userStore;\n\t\tconst unreadNotificatins = notifications.filter(e => !e.read);\n\t\tconst unread = unreadNotificatins.length || 0;\n\t\tconst { language = 'no' } = user;\n\n\t\treturn (\n\t\t\t<nav class='navbar navbar-expand-lg navbar-themed fixed-top' style='z-index: 99999;'>\n\t\t\t\t<a class='navbar-brand' href='/race/'>\n\t\t\t\t\t{/* <img src={`./assets/logo-jul-2020-v2-${darkmode ? 'black' : 'white'}.png`} height='30' class='position-absolute' style='top: 8px; left: 6px' /> */}\n\t\t\t\t\t<img src={`./assets/logo${darkmode ? '' : ''}.png`} height='37' class='position-absolute' style='top: 10px; left: 6px' />\n\t\t\t\t\t<span class='font-weight-normal' style='margin-left: 30px; font-size: 25px;'>The Musher</span>\n\t\t\t\t</a>\n\n\t\t\t\t<button class='navbar-toggler' type='button'\n\t\t\t\t\tdata-name='main'\n\t\t\t\t\tonClick={this.toggleDropdown}\n\t\t\t\t>\n\t\t\t\t\t<span class='navbar-toggler-icon' />\n\t\t\t\t</button>\n\n\t\t\t\t<div class={`collapse navbar-collapse ${menu.main ? 'show' : ''}`} id='navbarSupportedContent'>\n\t\t\t\t\t<ul class='navbar-nav mr-auto ml-5'>\n\t\t\t\t\t\t{/* <li class='nav-item'>\n\t\t\t\t\t\t\t<Link className='nav-link' activeClassName={'active'} href='/race'\n\t\t\t\t\t\t\t\tdata-name='main'\n\t\t\t\t\t\t\t\tonClick={this.toggleDropdown}\n\t\t\t\t\t\t\t><i class='fas fa-flag-checkered' /> <Text id='header.races'>Løpene</Text></Link>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t\t<li class='nav-item'>\n\t\t\t\t\t\t\t<Link className='nav-link' activeClassName={'active'} href='/race/support'\n\t\t\t\t\t\t\t\tdata-name='main'\n\t\t\t\t\t\t\t\tonClick={this.toggleDropdown}\n\t\t\t\t\t\t\t><i class='far fa-question-circle' /> <Text id='header.support'>Support</Text></Link>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t\t<li class='nav-item'>\n\t\t\t\t\t\t\t<Link className='nav-link' activeClassName={'active'} href='/race/news'\n\t\t\t\t\t\t\t\tdata-name='main'\n\t\t\t\t\t\t\t\tonClick={this.toggleDropdown}\n\t\t\t\t\t\t\t><i class='fas fa-quote-right' /> <Text id='header.news'>Nyheter</Text></Link>\n\t\t\t\t\t\t</li> */}\n\t\t\t\t\t\t{/* <li class='nav-item'>\n\t\t\t\t\t\t\t<Link className='nav-link' activeClassName={'active'} href='/'\n\t\t\t\t\t\t\t\tdata-name='main'\n\t\t\t\t\t\t\t\tonClick={this.toggleDropdown}\n\t\t\t\t\t\t\t><i class='fas fa-dog' /> <Text id='header.backtoapp'>The Musher</Text></Link>\n\t\t\t\t\t\t</li> */}\n\t\t\t\t\t\t{/* <li class='nav-item'>\n\t\t\t\t\t\t\t<Link className='nav-link' activeClassName={'active'} href='/news'\n\t\t\t\t\t\t\t\tdata-name='main'\n\t\t\t\t\t\t\t\tonClick={this.toggleDropdown}\n\t\t\t\t\t\t\t><i class='fas fa-quote-right' /> <Text id='header.news'>Nyheter</Text></Link>\n\t\t\t\t\t\t</li> */}\n\t\t\t\t\t\t{/* <li class='nav-item d-block d-lg-none'>\n\t\t\t\t\t\t\t<Link className='nav-link' activeClassName={'active'} href='/howto'\n\t\t\t\t\t\t\t\tdata-name='main'\n\t\t\t\t\t\t\t\tonClick={this.toggleDropdown}\n\t\t\t\t\t\t\t><i class='fas fa-quote-right' /> <Text id='header.howto'>Hvordan gjør man det?</Text></Link>\n\t\t\t\t\t\t</li> */}\n\t\t\t\t\t</ul>\n\n\t\t\t\t\t<ul class='navbar-nav ml-auto '>\n\t\t\t\t\t\t{/* <li class='nav-item mr-2'>\n\t\t\t\t\t\t\t<Link className='nav-link' activeClassName={'active'}\n\t\t\t\t\t\t\t\thref='/users/notifications'\n\t\t\t\t\t\t\t\tdata-name='main'\n\t\t\t\t\t\t\t\tonClick={this.toggleDropdown}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<i class='fas fa-bell mr-1' />\n\t\t\t\t\t\t\t\t{unread > 0 && <>\n\t\t\t\t\t\t\t\t\t<span class='badge badge-pill badge-danger'>{unread > 9 ? '9+' : unread}</span>\n\t\t\t\t\t\t\t\t</>}\n\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t</li> */}\n\t\t\t\t\t\t<li class='nav-item mr-2'>\n\t\t\t\t\t\t\t<div class='form-row align-items-center'>\n\t\t\t\t\t\t\t\t<div class='col-auto my-1' style='width: 80px;'>\n\t\t\t\t\t\t\t\t\t<select class='custom-select'\n\t\t\t\t\t\t\t\t\t\tstyle='background-color: inherit; border: none; padding: 0; height: 1.1em; font-size: 0.9em;'\n\t\t\t\t\t\t\t\t\t\tonInput={this.changeLanguage}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<option value='no' selected={language === 'no'}>🇳🇴 NO</option>\n\t\t\t\t\t\t\t\t\t\t<option value='en' selected={language === 'en'}>🇬🇧 EN</option>\n\t\t\t\t\t\t\t\t\t\t<option value='de' selected={language === 'de'}>🇩🇪 DE</option>\n\t\t\t\t\t\t\t\t\t</select>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t\t<li class='nav-item d-block d-lg-none'>\n\t\t\t\t\t\t\t<Link className='nav-link' activeClassName={'active'}\n\t\t\t\t\t\t\t\tdata-name='main'\n\t\t\t\t\t\t\t\tonClick={this.toggleDarkmode}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<i class={`${darkmode ? 'fas text-warning' : 'far'} fa-moon`} /> <Text id='header.darkmode'>Nattmodus</Text>\n\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t\t<li class='nav-item mr-2 d-none d-lg-block'>\n\t\t\t\t\t\t\t<button class='btn btn-link'\n\t\t\t\t\t\t\t\tdata-name='profile'\n\t\t\t\t\t\t\t\tonClick={this.toggleDarkmode}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<i class={`${darkmode ? 'fas text-warning' : 'far'} fa-moon`} />\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t\t{/* <li class='nav-item ml-auto d-none d-lg-block'>\n\t\t\t\t\t\t\t<form class='form-inline my-2 my-lg-0'>\n\t\t\t\t\t\t\t\t<Localizer>\n\t\t\t\t\t\t\t\t\t<input class='form-control form-control-sm mr-sm-2' type='search' placeholder={<Text id='header.search-placeholder'>Søk etter det meste...</Text>}\n\t\t\t\t\t\t\t\t\t\tvalue={searchText}\n\t\t\t\t\t\t\t\t\t\tonInput={linkState(this, 'searchText')}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</Localizer>\n\t\t\t\t\t\t\t\t<button class='btn btn-sm btn-outline-success my-2 my-sm-0' type='button'\t\n\t\t\t\t\t\t\t\t\tonClick={this.search}\n\t\t\t\t\t\t\t\t><Text id='header.search'>Søk</Text></button>\n\t\t\t\t\t\t\t</form>\n\t\t\t\t\t\t</li> */}\n\t\t\t\t\t</ul>\n\n\t\t\t\t    \n\n\t\t\t\t</div>\n\t\t\t</nav>\n\t\t);\n\t}\n}\n\nexport default Navigation;\n","import { h, Component } from 'preact';\nimport { useEffect } from 'preact/hooks';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport { Text, Localizer } from 'preact-i18n';\nimport linkstate from 'linkstate';\nimport Markdown from 'preact-markdown';\nimport Header from './header';\n\nimport mu from '../../lib/musher-util';\nconst MARGIN_TOP = mu.marginTop(true);\nconst MARGIN_BOTTOM = mu.marginBottom();\nconst SUB_MENU_MARGIN_TOP = mu.subMenuMarginTop();\n\nconst VACCINE_TYPES = mu.getVaccineTypes();\n\nfunction PageTitle(title = '') {\n  useEffect(() => {\n    document.title = `The Musher: ${title}`;\n  }, [title]);\n  return <h1>{title}</h1>;\n}\n\nconst initialState = {\n\tisLoading: false,\n\temail: '',\n\tsubmenu: 'ads',\n\tjwtToken: util.getJwtToken(),\n};\n\n@observer\nclass Teams extends Component {\n    selectTeam = async (e) => {\n        e.preventDefault();\n        const { id } = e.target.closest('li').dataset;\n        this.setState({ displayTeam: parseInt(id, 10) });\n    }\n\n    render() {\n        const { teams = [] } = this.props;\n        const defaultTeam = teams[0] ? teams[0] : {};\n        const { displayTeam = defaultTeam.id } = this.state;\n        return (\n            <div class='bg-light p-4'>\n                <ul class='nav nav-pills nav-fill'>\n                    {teams && teams.map(team => <>\n                        <li class='nav-item' data-id={team.id}>\n                            <a class={`nav-link ${team.id === displayTeam ? 'active' : ''}`} href='#' onClick={this.selectTeam}>{team.name}</a>\n                        </li>\n                    </>)}\n                </ul>\n                {teams && teams.map(team => <>\n                    {displayTeam === team.id && <>\n                        <Dogs stores={this.props.stores} dogs={team.dogs} />\n                    </>}\n                </>)}\n            </div>\n        );\n    }\n}\n\n@observer\nclass Dogs extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            selectedDogs: [],\n        };\n    }\n    selectDog = (e) => {\n        const { id } = e.target.closest('tr').dataset;\n        const { selectedDogs } = this.state;\n        const dogId = parseInt(id, 10);\n        const idx = selectedDogs.indexOf(dogId);\n        if (idx === -1) {\n            selectedDogs.push(dogId);\n        } else {\n            selectedDogs.splice(idx, 1);\n        }\n        this.setState({ selectedDogs });\n    }\n\n    selectAllDogs = () => {\n        const { dogs } = this.props;\n        const selectedDogs = dogs.map(e => e.id);\n        this.setState({ selectedDogs });\n    }\n\n    removeAllDogs = () => {\n        const selectedDogs = [];\n        this.setState({ selectedDogs });\n    }\n\n    render() {\n        const { selectedDogs } = this.state;\n        const { userStore } = this.props.stores;\n        const { isAdmin, isVeterinary, vaccineStatuses } = userStore;\n        const { dogs } = this.props;\n        return (\n            <div class='table-responsive'>\n\n                {selectedDogs && selectedDogs.length > 0 && <>\n                    <div class='form-row align-items-center p-5'>\n                        <div class='col-8'>\n                            <label for='vaccineTypeInput'><i class='fas fa-syringe' /> <Text id='dog.addlog.vaccine-type'>Vaksinetype</Text></label>\n                            <select class='form-control form-control-lg mb-2' id='vaccineTypeInput' aria-describedby='vaccineTypeHelp'\n                                // onInput={linkState(this, 'newHistory.historyType')}\n                                onInput={linkstate(this, 'vaccineType')}\n                                autocomplete='off'\n                            >\n                                <option value=''>-- <Text id='dog.addlog.choose-vaccine'>Velg vaksinetype</Text> --</option>\n                                <option value='rabies'><Text id='dog.addlog.rabies'>Rabies (3 år)</Text></option>\n                                <option value='deworming'><Text id='dog.addlog.deworming'>Ormekur</Text></option>\n                                <option value='BbPi'><Text id='dog.addlog.BbPi'>BbPi - Nesevaksine (1 år)</Text></option>\n                                <option value='DHP'><Text id='dog.addlog.DHP'>DHP (3 år)</Text></option>\n                                <option value='DHPPi'><Text id='dog.addlog.DHPPi'>DHPPi (3 år)</Text></option>\n                            </select>\n                        </div>\n                        <div class='col-4 pt-4'>\n                            <button\n                                type='button'\n                                class='btn btn-lg btn-danger mb-2'\n                                onClick={this.searchForMusher}\n                            >Add vaccine</button>\n                        </div>\n                    </div>\n                </>}\n\n                <button\n                    class='btn btn-lg btn-block btn-outline-success mt-3'\n                    onClick={this.selectAllDogs}\n                >\n                    Select all dogs\n                </button>\n                {selectedDogs && selectedDogs.length > 0 && <>\n                    <button\n                        class='btn btn-sm btn-block btn-link'\n                        onClick={this.removeAllDogs}\n                    >\n                        Remove all dogs\n                    </button>\n                </>}\n\n                <table class='table table-striped'>\n                    <thead>\n                        <tr>\n                            <th scope='col' style='width: 100px;'>&nbsp;</th>\n                            <th scope='col'>Name</th>\n                        </tr>\n                    </thead>\n                    <tbody>\n                        {dogs && dogs.map(dog => {\n                            let image;\n                            if (dog.images && dog.images[0]) {\n                                image = dog.images[0];\n                            }\n                            if (dog.image) {\n                                image = dog.image;\n                            }\n                            const isSelected = selectedDogs.indexOf(dog.id) > -1;\n                        \n                            return (<>\n                                <tr class='pointerCursor' onClick={this.selectDog} data-id={dog.id}>\n                                    <td class='position-relative'>\n                                        <div\n                                            class={`text-center border rounded-circle imageRounded text-muted pt-2`}\n                                            style={`${image ? `background-image: url('${image.s3ThumbLink}');` : ''}`}\n                                        >\n                                            {!image && <span class='font-weight-lighter' style='font-size: 35px;'>\n                                                {util.ucfirst(dog.name, true)}\n                                            </span>}\n                                        </div>\n                                        {isSelected && <span class='position-absolute display-4' style='top: 0px; left: 0px;'>\n                                            <i class='fas fa-check text-success' />\n                                        </span>}\n                                    </td>\n                                    <td>\n                                        <span class='float-right'>\n                                            {dog.birth && <span class='mr-2'>{util.age(dog.birth, dog.deceased)}</span>}\n                                            {dog.gender === 'female' ? <i class='fas fa-venus' /> : <i class='fas fa-mars' />}\n                                        </span>\n                                        <h5>{dog.name} {dog.shortname && <span class='font-weight-lighter'> - '{dog.shortname}'</span>}</h5>\n                                        <div>\n                                            {dog.chipId && <small><i class='fas fa-microchip' /> {dog.chipId}</small>}\n                                        </div>\n\n                                        <div>\n                                            {vaccineStatuses && vaccineStatuses.filter(e => e.dogId === dog.id).map(v => (\n                                                <span class={`badge badge-success mr-2`} title={util.isoDate(v.endDate, false, false, true)}>{v.vaccineType}</span>\n                                            ))}\n                                        </div>\n                                    </td>\n                                </tr>\n                            </>);\n                        })}\n                    </tbody>\n                </table>\n            </div>\n        );\n    }\n}\n\n\n@observer\nclass PublicRace extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            ...initialState,\n        };\n    }\n\n    searchForMusher = async () => {\n        const { userStore } = this.props.stores;\n        const { search } = this.state;\n        // console.log('search for musher:', search);\n        await userStore.searchUsers({ search });\n    }\n\n    selectMusher = async (e) => {\n        const { id } = e.target.closest('tr').dataset;\n        const { displayUser } = this.state;\n        const userId = parseInt(id, 10);\n        if (displayUser === userId) {\n            this.setState({ displayUser: null });\n        } else {\n            this.setState({ displayUser: userId });\n            const { userStore } = this.props.stores;\n            await userStore.getDogs({ id: userId });\n        }\n    }\n\n\tcomponentDidMount() {\n\t}\n\n\tcomponentWillReceiveProps(nextProps) {\n\t}\n\n\trender() {\n        const { displayUser } = this.state;\n\t\tconst { appState, userStore } = this.props.stores;\n\t\tconst { isAdmin, isVeterinary, searchUsersResult, searchUserTeams } = userStore;\n\t\tconst { language = 'no' } = appState;\n        const { col = 12, offset = 0 } = this.props;\n        const filterBy = (e) => {\n            if (displayUser) {\n                return e.id === displayUser;\n            }\n            return true;\n        }\n\n\t\treturn (\n\t\t\t<>\n\t\t\t\t<Header stores={this.props.stores} />\n\n\t\t\t\t<div class='container-fluid' style={`margin-bottom: ${MARGIN_BOTTOM}; margin-top: ${MARGIN_TOP};`}>\n                    <div class='row'>\n\t\t\t\t\t\t<div class={`col-${col} offset-${offset} col-sm-8 col-lg-8 offset-sm-2 offset-lg-2`}>\n                            <h1>Veterinary search</h1>\n\n                            <form onSubmit={this.searchForMusher}>\n                                <div class='form-row align-items-center'>\n                                    <div class='col-10'>\n                                        <label class='sr-only' for='vetSearch'>Name</label>\n                                        <input\n                                            type='text'\n                                            class='form-control form-control-lg mb-2'\n                                            id='vetSearch'\n                                            placeholder='Search for musher by email, cellphone or name...'\n                                            onInput={linkstate(this, 'search')}\n                                        />\n                                    </div>\n                                    <div class='col-2'>\n                                        <button\n                                            type='button'\n                                            class='btn btn-lg btn-primary mb-2'\n                                            onClick={this.searchForMusher}\n                                        >Search</button>\n                                    </div>\n                                </div>\n                            </form>\n\n                        </div>\n\t\t\t\t\t\t<div class={`col-${col} offset-${offset} col-sm-8 col-lg-8 offset-sm-2 offset-lg-2`}>\n                            {(!searchUsersResult || searchUsersResult.length === 0) ? <>\n                                &nbsp;\n                            </> : <div class='table-responsive'>\n                                <table class='table table-striped'>\n                                    <thead>\n                                        <tr>\n                                            <th scope='col' style='width: 100px;'>&nbsp;</th>\n                                            <th scope='col'>Name</th>\n                                            <th scope='col'>Cellphone</th>\n                                            <th scope='col'>Email</th>\n                                        </tr>\n                                    </thead>\n                                    <tbody>\n                                        {searchUsersResult && searchUsersResult.filter(filterBy).map(user => {\n                                            let image;\n                                            if (user.images && user.images[0]) {\n                                                image = user.images[0];\n                                            }\n                                            if (user.image) {\n                                                image = user.image;\n                                            }\n                                        \n                                            return (<>\n                                                <tr class='pointerCursor' onClick={this.selectMusher} data-id={user.id}>\n                                                    <td>\n                                                        <div\n                                                            class={`text-center border rounded-circle imageRounded text-muted pt-2`}\n                                                            style={`${image ? `background-image: url('${image.s3ThumbLink}');` : ''}`}\n                                                        >\n                                                            {!image && <span class='font-weight-lighter' style='font-size: 35px;'>\n                                                                {user.firstname ? <>\n                                                                    {util.ucfirst(user.firstname, true)}\n                                                                    {util.ucfirst(user.lastname, true)}\n                                                                </> : <>\n                                                                    {util.ucfirst(user.email, true)}\n                                                                </>}\n                                                            </span>}\n                                                        </div>                                                \n                                                    </td>\n                                                    <td>\n                                                        {user.firstname} {user.lastname}<br />\n                                                        {user.facebook && <a class='mr-2' href={mu.asFacebookLink(user.facebook)} target='_blank' rel='noreferrer'>\n                                                            <i class='fab fa-facebook-square' />\n                                                        </a>}\n                                                        {user.instagram && <a class='mr-2' href={mu.asInstagramLink(user.instagram)} target='_blank' rel='noreferrer'>\n                                                            <i class='fab fa-instagram' />\n                                                        </a>}\n                                                    </td>\n                                                    <td>{user.cellphone}</td>\n                                                    <td>{user.email}</td>\n                                                </tr>\n                                                {displayUser === user.id && <>\n                                                    <tr>\n                                                        <td colspan='4'>\n                                                            <Teams stores={this.props.stores} teams={searchUserTeams} />\n                                                        </td>\n                                                    </tr>\n                                                </>}\n                                            </>);\n                                        })}\n                                    </tbody>\n                                </table>\n                            </div>}\n                            {/* <xmp>{JSON.stringify(searchUsersResult, null, 4)}</xmp> */}\n                        </div>\n                    </div>\n\t\t\t\t</div>\n\t\t\t</>\n\t\t);\n\t}\n}\n\nexport default PublicRace;\n"],"sourceRoot":""}