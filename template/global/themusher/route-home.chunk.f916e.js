(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{"+1Jk":function(t,e,s){"use strict";s.r(e),function(t){function o(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,o)}return s}function r(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}var n,a=s("hosL"),i=s("Utv1"),c=s("/eY4"),l=s("OhSV"),u=s("Y3FI"),d=(s("X9Km"),s("ZOvn")),h=(s("XPU5"),s("ZWUU"),s("CE5K"),s("qv+O"),s("0SNj")),m=s("9Bb9"),p=s("pJjI"),b=s("L3gU"),f=s("AEg1"),O=s("gOLw"),g=s("w93r"),j=d.a.marginTop(!1),v=d.a.marginBottom(),w=(d.a.subMenuMarginTop(),{isLoading:!1,submenu:"lastWorkouts"}),y=Object(c.a)(n=function(e){function s(t){var s;return(s=e.call(this,t)||this).chooseSubmenu=function(t){s.setState({submenu:t.target.parentElement.dataset.menu||t.target.dataset.menu})},s.addNavigation=function(t){void 0===t&&(t=s.props);var e=t.viewmenu,o=s.props.stores.appState;"wall"===e&&(o.setSwipeRight(),o.setSwipeLeft((function(){o.setSwipeLeft(),Object(u.route)("/home-workout")}))),"workout"===e&&(o.setSwipeLeft(),o.setSwipeRight((function(){o.setSwipeRight(),Object(u.route)("/")})))},s.getState=function(){return new Promise((function(t,e){var o;return o=s.props.stores.workoutStore,Promise.resolve(o.cordovaGetState()).then((function(){try{return Promise.resolve(o.cordovaProviderState()).then((function(){try{return Promise.resolve(o.cordovaIsPowerSaveMode()).then((function(){try{return Promise.resolve(o.cordovaGetLog()).then((function(){try{return t()}catch(t){return e(t)}}),e)}catch(t){return e(t)}}),e)}catch(t){return e(t)}}),e)}catch(t){return e(t)}}),e)}))},s.destroyLog=function(){return new Promise((function(t){return s.props.stores.workoutStore.cordovaDestroyLog(),t()}))},s.state=function(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?o(Object(s),!0).forEach((function(e){r(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):o(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}({},w),s}var n,c;c=e,(n=s).prototype=Object.create(c.prototype),n.prototype.constructor=n,n.__proto__=c;var d=s.prototype;return d.loadAll=function(){return new Promise(function(t,e){var s,o,r;return o=(s=this.props.stores).appState,r=s.userStore,this.setState({isLoading:!0}),Promise.resolve(o.getFingerprint()).then(function(){try{return Promise.resolve(r.getInfo()).then(function(){try{return Promise.resolve(r.getNotifications()).then(function(){try{return this.setState({isLoading:!1}),t()}catch(t){return e(t)}}.bind(this),e)}catch(t){return e(t)}}.bind(this),e)}catch(t){return e(t)}}.bind(this),e)}.bind(this))},d.componentDidMount=function(){this.loadAll()},d.componentWillUnmount=function(){var t=this.props.stores.appState;t.setSwipeRight(),t.setSwipeLeft()},d.componentWillReceiveProps=function(){},d.render=function(){var e=this.props,s=e.viewmenu,o=e.path,r=this.props.stores,n=r.userStore,c=r.workoutStore,u=n.user,d=u.currentLocationGeocode,w=u.yrWeatherKeys,y=void 0===w?[]:w,k=(void 0===d?{}:d).formatted_address,x=c.currentTeam,S=c.cordovaActiveTrackingParams,P=c.isRunning,C=c.totalDistance,D=c.currentSpeed,T=c.totalTime;return Object(a.h)("div",{class:"container-fluid",style:"margin-bottom: "+v+"; margin-top: "+j+";"},P&&S&&Object(a.h)(t,null,Object(a.h)("div",{class:"row"},Object(a.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 border-bottom bg-light py-4"},Object(a.h)("h1",{class:"text-success font-weight-bold"},"Tracking",Object(a.h)("div",{class:"spinner-grow ml-3",role:"status"})),Object(a.h)("div",{class:"row mb-3"},Object(a.h)("div",{class:"col-4 text-center font-weight-bold",style:"font-size: 1.3em;"},i.a.secToHms(T)),Object(a.h)("div",{class:"col-4 text-center font-weight-bold",style:"font-size: 1.3em;"},i.a.format(3.6*D,1)," km/t"),Object(a.h)("div",{class:"col-4 text-center font-weight-bold",style:"font-size: 1.3em;"},i.a.format(C/1e3,2)," km")),Object(a.h)("a",{class:"btn btn-block btn-danger",href:"/workouts/tracking"},Object(a.h)(l.c,{id:"workouts.go-to-tracking"},"Go to tracking"))))),Object(a.h)("div",{class:""},u.id&&Object(a.h)(g.a,{stores:this.props.stores,place:k,yrWeather:y.join(",")})),u.id&&Object(a.h)(f.a,{stores:this.props.stores}),Object(a.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-0 mb-2"},Object(a.h)("div",{class:"row"},Object(a.h)("div",{class:"col px-1 pt-2"},Object(a.h)("a",{class:"btn btn-block "+("wall"===s?"btn-primary":"btn-outline-primary")+" text-nowrap",style:"text-overflow: ellipsis; overflow: hidden;","data-menu":"wall",href:"/home-wall"},Object(a.h)("i",{class:"fas fa-comments"})," ",Object(a.h)(l.c,{id:"home.wall"},"Veggen"))),Object(a.h)("div",{class:"col px-1 pt-2"},Object(a.h)("a",{class:"btn btn-block "+("workout"===s?"btn-primary":"btn-outline-primary")+" text-nowrap",style:"text-overflow: ellipsis; overflow: hidden;","data-menu":"workout",href:"/home-workout"},Object(a.h)("i",{class:"fas fa-running"}),"  ",Object(a.h)(l.c,{id:"home.workouts"},"Treninger"))))),"wall"===s&&Object(a.h)(t,null,Object(a.h)(O.a,{stores:this.props.stores,path:o})),"workout"===s&&Object(a.h)(t,null,Object(a.h)(b.a,{stores:this.props.stores})),"totals"===s&&Object(a.h)(t,null,Object(a.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 border-bottom"},Object(a.h)(p.a,{stores:this.props.stores}),Object(a.h)(h.a,{stores:this.props.stores,currentTeam:x}),Object(a.h)(m.a,{stores:this.props.stores,currentTeam:x}))))},s}(a.Component))||n;e.default=y}.call(this,s("hosL").Fragment)},ISGx:function(t,e,s){"use strict";(function(t){function o(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,o)}return s}function r(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?o(Object(s),!0).forEach((function(e){n(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):o(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}function n(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}var a,i=s("hosL"),c=s("Utv1"),l=s("/eY4"),u=s("cneo"),d=s("OhSV"),h=s("fh8t"),m=s.n(h),p=s("s4FZ"),b=s("ZQlJ"),f=s("sqi2"),O=s("/922"),g=s("eQ6k"),j=s("+JSK"),v=s("vY+r"),w=s("ZOvn"),y={showAddComment:{},likeWorkout:{},idxSuggestion:0,idxAd:4,limit:15,offset:0,hasFollowSugguestions:!1,hasAd:!1,sessionid:(new Date).getTime()},k=Object(l.a)(a=function(e){function s(t){var s;return(s=e.call(this,t)||this).toggleDate=function(t){t.stopPropagation(),t.preventDefault(),s.setState({showDate:!s.state.showDate})},s.likeWorkout=function(t){return new Promise((function(e,o){var r,n,a,i;return r=parseInt(t.target.closest(".imageContainer").dataset.id,10),n=s.props.stores.workoutStore,(a=s.state.likeWorkout)[r]=!0,s.setState({likeWorkout:a}),setTimeout((function(){var t=s.state.likeWorkout;delete t[r],s.setState({likeWorkout:t})}),1200),Promise.resolve(n.likeWorkout({id:r})).then((function(t){try{return(i=t)&&200===i.status&&s.addLikeToFeed(r,i.data),e()}catch(t){return o(t)}}),o)}))},s.addCommentToFeed=function(t){var e=t.workout,o=t.response,r=t.commentId,n=t.replyId,a=s.props.stores.teamStore;switch(t.type){case"likeComment":a.addLikeToComment({id:e.id,data:o.data,commentId:r});break;case"likeReply":a.addLikeToCommentReply({id:e.id,data:o.data,commentId:r,replyId:n});break;default:r?a.addCommentToWorkoutComment({id:e.id,data:o.data,commentId:r}):a.addCommentToWorkout({id:e.id,data:o.data})}},s.addLikeToFeed=function(t,e){s.props.stores.teamStore.addLikeToWorkout({id:t,data:e})},s.toggleAddComment=function(t){var e=t.target.closest("button").dataset.id,o=s.state.showAddComment;o[e]?delete o[e]:o[e]=!0,s.setState({showAddComment:o},(function(){s.inputRef[e]&&s.inputRef[e].focus()}))},s.shareLink=function(t){var e=t.target.closest("button").dataset;s.props.stores.appState.shareUrl({url:e.url,title:e.title,text:e.text})},s.state=r({},y),s.inputRef={},s.containerRef=null,s}var o,n;return n=e,(o=s).prototype=Object.create(n.prototype),o.prototype.constructor=o,o.__proto__=n,s.prototype.render=function(){var e,s=this,o=this.props,n=o.feed,a=o.onTeamClick,l=void 0===a?function(){}:a,h=o.onUserClick,y=void 0===h?function(){}:h,k=o.onDogClick,x=void 0===k?function(){}:k,S=this.state,P=S.showAddComment,C=S.showDate,D=S.likeWorkout,T=this.props.stores,L=T.teamStore,I=T.userStore,A=T.appState,E=I.user,F=I.isAdmin,R=E.language,W=void 0===R?"no":R,_=A.hasShareApi,U=L.publicDogs,N=L.findPublicTeam(n.team)||{},M=(I.findTeamAmbition({ambition:N.ambitions,language:W}),I.findTeamType({type:N.type,language:W})),q=!(!N||!N.members)&&N.members.some((function(t){return t===E.id}));N.image&&N.image.s3SmallLink?e=N.image:N.images&&N.images[0]&&N.images[0].s3SmallLink&&(e=N.images[0]);var z=n.likes,V=n.comments,B=n.likes&&n.likes.findIndex((function(t){return t.user===E.id}))>-1,K=N&&N.followers?N.followers.length:0,Z=N.members&&N.members.indexOf(E.id)>-1,G=N&&N.followers&&N.followers.indexOf(E.id)>-1,J=N.followRequests&&N.followRequests.findIndex((function(t){return t.id===E.id}))>-1,Y=I.findEquipment({equipment:n.equipment,language:W}),H=I.findEquipment({equipment:n.equipment,field:"icon"}),X=[];if(n.mapImage&&X.push(r(r({},n.mapImage),{},{type:"map"})),n.images){var Q=Object(u.i)(n.images);X.push.apply(X,Q)}var $,tt=n.currentLocationGeocode,et=void 0===tt?{}:tt,st=w.a.getViews(n.statistics),ot=w.a.getAdminData(n.statistics);return N&&N.name?Object(i.h)(t,null,Object(i.h)("div",{class:"d-flex position-relative"},Object(i.h)("div",{class:"text-center"},Object(i.h)("div",{class:"text-center border rounded-circle imageRounded imageRoundedSmall",style:e?'background-image: url("'+e.s3SmallLink+'"); background-size: cover;':""},!e&&Object(i.h)("i",{class:"fas fa-users text-muted mt-2",style:"font-size: 20px;"}))),Object(i.h)("div",{class:"flex-grow-1 pl-3 text-overflow",style:"line-height: 1.2em;"},Object(i.h)("span",{class:"badge badge-pill badge-secondary float-right"},M),Object(i.h)("h5",{class:"mb-1 position-relative",style:"line-height: 1.0em;"},N.public?Object(i.h)(t,null,Object(i.h)("a",{href:"/teams/public/"+N.uuidv4,onClick:function(t){return l(t,N.uuidv4)},class:"stretched-link"},N.name)):Object(i.h)(t,null,N.name)),Object(i.h)("div",{class:"mb-2"},n.date&&Object(i.h)("small",{class:"text-muted",onClick:this.toggleDate},C?c.a.formatDate(n.date,{locale:"no-NB",hour12:!1,hour:"2-digit",minute:"2-digit"}):c.a.formatDistance(n.date,new Date,{locale:"no-NB"})),1===n.public?Object(i.h)(t,null,Object(i.h)("small",{class:"ml-2 text-muted"},Object(i.h)("i",{class:"fas fa-globe-europe"}))):Object(i.h)(t,null,Object(i.h)("small",{class:"ml-2 text-muted"},Object(i.h)("i",{class:"fas fa-users"})," (",c.a.format(K),")")),Object(i.h)("small",{class:"text-muted"},n.equipment>0&&Object(i.h)(t,null,Object(i.h)("i",{class:H+" ml-2"})," ",Y),n.dogs>0&&Object(i.h)(t,null,Object(i.h)("i",{class:"fas fa-dog ml-2"})," ",n.dogs.length),n.track>0&&Object(i.h)(t,null,Object(i.h)("i",{class:"fas fa-map-marked text-"+(n.track>0?"success":"danger")+" ml-2"})),n.sledWeight>0&&Object(i.h)(t,null,Object(i.h)("i",{class:"fas fa-sleigh ml-2"})," ",c.a.format(n.sledWeight,0)," kg"),0!==n.temperature&&Object(i.h)(t,null,Object(i.h)("i",{class:"fas fa-temperature-low ml-2"})," ",c.a.format(n.temperature,1),"°C"),n.dogs&&n.dogs.length>0&&Object(i.h)(t,null,Object(i.h)("i",{class:"fas fa-dog ml-2"})," ",c.a.format(n.dogs.length,0)),et&&et.formattedCounty&&Object(i.h)(t,null,Object(i.h)("i",{class:"fas fa-map-marker-alt ml-2"})," ",et.formattedCounty))),F&&Object(i.h)("div",{class:"d-flex flex-row flex-nowrap bg-light border-top border-bottom py-2",style:"overflow: auto;"},Object(i.h)("small",{class:"text-muted mr-2"},"Adm:"),et&&et.formatted_address&&Object(i.h)(t,null,Object(i.h)("small",{class:"text-muted"},Object(i.h)("i",{class:"fas fa-map-marker-alt"})," ",et.formatted_address)),ot&&Object(i.h)(t,null,Object(i.h)("small",{class:"ml-2 text-muted"},"V: ",ot.count),Object(i.h)("small",{class:"ml-2 text-muted"},"R: ",ot.ranking," ",c.a.isNumber(ot.rankingTrend)&&Object(i.h)(t,null,Object(i.h)("i",{class:w.a.getClassForTrend(ot.rankingTrend)}))),Object(i.h)("small",{class:"ml-2 text-muted"},"D: ",c.a.format(ot.durationAvg/1e3,1),"s ",c.a.isNumber(ot.durationAvgTrend)&&Object(i.h)(t,null,Object(i.h)("i",{class:w.a.getClassForTrend(ot.durationAvgTrend)}))),n.statisticsCurrent&&n.statisticsCurrent.totalInteractions>0&&Object(i.h)("small",{class:"ml-2 text-muted"},"S: ",c.a.format(n.statisticsCurrent.totalInteractions,0)),n.shadowTags&&n.shadowTags.map((function(e){return Object(i.h)(t,null,Object(i.h)("span",{class:"badge badge-secondary ml-2 float-right font-weight-light"},e))})))))),Object(i.h)("div",{class:"row mt-2"},Object(i.h)("div",{class:"clearfix col-12 font-weight-bold",style:"font-size: 1.2em;"},Object(i.h)(m.a,{markdown:w.a.replaceImages(n.name,n.images,W),markdownOpts:w.a.getMarkdownOptions()})),Object(i.h)("div",{class:"clearfix col-12"},Object(i.h)(m.a,{markdown:w.a.replaceImages(n.comment,n.images,W),markdownOpts:w.a.getMarkdownOptions()}))),Object(i.h)("div",{class:"row mt-1"},n.distanceKm>0&&Object(i.h)("div",{class:"col-3"},Object(i.h)("div",{class:"text-overflow"},Object(i.h)("small",null,Object(i.h)("i",{class:"fas fa-road"})," ",Object(i.h)(d.c,{id:"workout.calendar.distance"},"Distanse"))),Object(i.h)("div",{class:"text-overflow font-weight-light",style:"font-size: 1.2em;"},c.a.format($=n.distanceKm,$<5?2:1),"km")),n.elevation>0&&Object(i.h)("div",{class:"col-3"},Object(i.h)("div",{class:"text-overflow"},Object(i.h)("small",null,Object(i.h)("i",{class:"fas fa-mountain"})," ",Object(i.h)(d.c,{id:"workout.calendar.ascend"},"Høydemeter"))),Object(i.h)("div",{class:"text-overflow font-weight-light",style:"font-size: 1.2em;"},c.a.format(n.elevation,0),"m")),n.duration>0&&Object(i.h)("div",{class:"col-3"},Object(i.h)("div",{class:"text-overflow"},Object(i.h)("small",null,Object(i.h)("i",{class:"fas fa-clock"})," ",Object(i.h)(d.c,{id:"workout.calendar.duration"},"Varighet"))),Object(i.h)("div",{class:"text-overflow font-weight-light",style:"font-size: 1.2em;"},c.a.secToHms(n.duration,!0))),n.speedAvg>0&&Object(i.h)("div",{class:"col-3"},Object(i.h)("div",{class:"text-overflow"},Object(i.h)("small",null,Object(i.h)("i",{class:"fas fa-tachometer-alt"})," ",Object(i.h)(d.c,{id:"workout.calendar.avg-speed"},"Snittfart"))),Object(i.h)("div",{class:"text-overflow font-weight-light",style:"font-size: 1.2em;"},c.a.format(n.speedAvg,1),"km/t"))),Object(i.h)("div",{class:"container-fluid px-0 mt-1"},Object(i.h)("div",{class:"row"},Object(i.h)(p.a,{stores:this.props.stores,images:X,id:n.id,dblClick:this.likeWorkout,likeRef:D}))),n.dogs&&n.dogs.length>0&&Object(i.h)("div",{class:"container-fluid px-0 mt-1"},Object(i.h)("div",{class:"row pt-2"},Object(i.h)(b.a,{stores:this.props.stores,dogs:n.dogs,allDogs:U,onDogClick:x}))),Object(i.h)("div",{class:"mt-2"},Object(i.h)(j.a,{stores:this.props.stores,likes:z,comments:V,type:"team",onTeamClick:l,onUserClick:y})),!Z&&!G&&!J&&Object(i.h)("div",{class:"clearfix mb-2"},Object(i.h)(g.a,{stores:this.props.stores,team:N,buttonOnly:!0})),Object(i.h)("div",null,Object(i.h)("div",{class:"row"},Object(i.h)("div",{class:"col text-center"},Object(i.h)("button",{type:"button",class:"imageContainer btn btn-sm btn-outline-"+(B?"primary":"secondary")+" btn-lg btn-block "+(B?"text-primary":"")+" text-overflow","data-id":n.id,onClick:this.likeWorkout},Object(i.h)("i",{class:(B?"text-primary fas":"far")+" fa-thumbs-up"})," ",Object(i.h)(d.c,{id:"comments.like"},"Lik"))),Object(i.h)("div",{class:"col text-center"},Object(i.h)("button",{type:"button",class:"btn btn-sm btn-outline-secondary btn-lg btn-block text-overflow","data-id":n.id,onClick:this.toggleAddComment},Object(i.h)("i",{class:"fas fa-comment"})," ",Object(i.h)(d.c,{id:"comments.comment-add"},"Kommentar"))),_?Object(i.h)(t,null,Object(i.h)("div",{class:"col text-center"},Object(i.h)("button",{class:"btn btn-sm btn-outline-secondary btn-lg btn-block text-overflow",onClick:this.shareLink,"data-url":"https://themusher.app/share/workout/"+n.uuidv4,"data-title":"title: "+n.title},Object(i.h)("i",{class:"fas fa-share"})," ",Object(i.h)(d.c,{id:"story.share"},"Del")))):Object(i.h)(t,null,Object(i.h)("div",{class:"col text-center"},Object(i.h)("a",{class:"btn btn-sm btn-outline-secondary btn-lg btn-block text-overflow",href:"https://themusher.app/share/workout/"+n.uuidv4,target:"_blank",rel:"noreferrer"},Object(i.h)("i",{class:"fas fa-share"})," ",Object(i.h)(d.c,{id:"story.share"},"Del")))))),st>0&&Object(i.h)(t,null,Object(i.h)("div",{class:"mt-2"},Object(i.h)(v.a,{stores:this.props.stores,views:st,object:n,type:"team",isTeamAdmin:q,isAdmin:F,onTeamClick:l,onUserClick:y}))),Object(i.h)("div",{class:"mt-2"},P[n.id]&&Object(i.h)(O.a,{stores:this.props.stores,workout:n,inputRef:function(t){return s.inputRef[n.id]=t},inputRefObject:this.inputRef,col:"12",offset:"0",showAvatar:!0,extraClass:"px-0",callback:this.addCommentToFeed}),Object(i.h)(f.a,{stores:this.props.stores,workout:n,col:"12",offset:"0",compact:!1,callback:this.addCommentToFeed}))):""},s}(i.Component))||a;e.a=k}).call(this,s("hosL").Fragment)},L3gU:function(t,e,s){"use strict";(function(t){function o(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,o)}return s}function r(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}var n,a=s("hosL"),i=s("Utv1"),c=s("/eY4"),l=(s("OhSV"),s("VKmm")),u=s("rWES"),d=s("epqT"),h=s("yHBq"),m=s("q/oJ"),p=s("gWxU"),b=s("Nanz"),f=s("ISGx"),O=s("ZOvn"),g={showAddComment:{},likeWorkout:{},idxSuggestion:0,idxAd:4,limit:10,offset:0,hasFollowSugguestions:!1,hasAd:!1,sessionid:(new Date).getTime()},j=["id","type","user","team","title"],v=Object(c.a)(n=function(e){function s(s){var n;return(n=e.call(this,s)||this).setLoadMore=function(){n.props.stores.teamStore.setLoadMore((function(){var t=n.state,e=t.limit,s=t.offset;n.setState({offset:s+=e}),n.loadTeamsPublicFeed({limit:e,offset:s})}))},n.unsetLoadMore=function(){n.props.stores.teamStore.setLoadMore((function(){}))},n.insertTopRanked=function(){for(var t=n.props.stores.teamStore,e=t.publicTeamsFeed,s=i.a.shuffleArray(t.topRankedWorkouts),o=[].concat(e),r=0;r<3;r+=1){var a=O.a.randomInt(0,7);i.a.isObject(s[r])&&o.splice(a,0,s[r])}t.localUpdateField("publicTeamsFeed",o)},n.insertAds=function(){var t=n.state.idxAd,e=n.props.stores.teamStore,s=[].concat(e.publicTeamsFeed);s.splice(t,0,{type:"ad",wrapperClassNames:"",contentClassNames:""}),e.localUpdateField("publicTeamsFeed",s)},n.insertTeamConfirm=function(){var t=n.state.idxConfirm,e=n.props.stores.teamStore,s=[].concat(e.publicTeamsFeed);s.splice(t,0,{type:"teamConfirm",wrapperClassNames:"",contentClassNames:""}),e.localUpdateField("publicTeamsFeed",s)},n.insertTeamSuggestions=function(){var t=n.state.idxSuggestion,e=n.props.stores.teamStore,s=[].concat(e.publicTeamsFeed);s.splice(t,0,{type:"teamSuggestions",wrapperClassNames:"",contentClassNames:""}),e.localUpdateField("publicTeamsFeed",s)},n.onTeamClick=function(t,e){return t.preventDefault(),t.stopPropagation(),n.setState({showTeam:e}),!1},n.hideTeam=function(){n.setState({showTeam:null})},n.onUserClick=function(t){return t.preventDefault(),t.stopPropagation(),!1},n.onDogClick=function(t,e,s){return t.preventDefault(),t.stopPropagation(),n.setState({showDog:e,dogs:s}),!1},n.hideDog=function(){n.setState({showDog:null})},n.setupIntersection=function(){n.setState({handleIntersection:O.a.intersectionObserverCallback});var t=n.props.stores.teamStore;n.scrollViewTimer=setInterval((function(){return t.postScrollview(O.a.getIntersectionObserverHistory())}),3e4)},n.renderContent=function(e){var s=e.obj,o=e.idx,r=n.props.stores.appState.path;return"ad"===s.type?Object(a.h)(t,null,Object(a.h)(d.a,{stores:n.props.stores,path:r})):"teamConfirm"===s.type?Object(a.h)(t,null,Object(a.h)(u.a,{stores:n.props.stores})):"teamSuggestions"===s.type?Object(a.h)(t,null,Object(a.h)(l.a,{stores:n.props.stores})):Object(a.h)(t,null,Object(a.h)(f.a,{stores:n.props.stores,feed:s,idx:o,onTeamClick:n.onTeamClick,onUserClick:n.onUserClick,onDogClick:n.onDogClick}))},n.state=function(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?o(Object(s),!0).forEach((function(e){r(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):o(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}({},g),n}var n,c;c=e,(n=s).prototype=Object.create(c.prototype),n.prototype.constructor=n,n.__proto__=c;var v=s.prototype;return v.loadTeamsPublicFeed=function(t){return new Promise(function(e,s){var o;return o=t.props,Promise.resolve((void 0===o?this.props:o).stores.teamStore.loadPublicFeed({limit:t.limit,offset:t.offset,sort:"-createdDate"})).then((function(){try{return e()}catch(t){return s(t)}}),s)}.bind(this))},v.loadAll=function(){return new Promise(function(t,e){return Promise.resolve(this.loadTeamsPublicFeed({limit:this.state.limit,offset:0})).then(function(){try{return this.insertTopRanked(),t()}catch(t){return e(t)}}.bind(this),e)}.bind(this))},v.componentWillMount=function(){this.setupIntersection()},v.componentWillUnmount=function(){this.unsetLoadMore(),this.props.stores.teamStore.postScrollview(O.a.getIntersectionObserverHistory()),clearInterval(this.scrollViewTimer)},v.componentDidMount=function(){this.loadAll(),this.setLoadMore()},v.render=function(){var e=this.state,s=e.showTeam,o=e.showDog,r=e.handleIntersection,n=e.sessionid,i=e.dogs,c=this.props.stores,l=c.appState,d=c.teamStore.publicTeamsFeed,f=l.darkmode;return Object(a.h)(t,null,s&&Object(a.h)(m.a,null,Object(a.h)(p.a,{stores:this.props.stores,teamid:s,marginTop:"0px;",marginBottom:"0px;",back:this.hideTeam})),o&&Object(a.h)(m.a,null,Object(a.h)(b.a,{stores:this.props.stores,dogid:o,marginTop:"0px;",marginBottom:"0px;",back:this.hideDog,dogs:i})),Object(a.h)("div",{class:"w-100"},Object(a.h)(u.a,{stores:this.props.stores}),Object(a.h)(h.a,{data:d,wrapperClassNames:"row pb-4",contentClassNames:"col-12 col-sm-8 col-lg-6 offset-sm-2 offset-lg-3 my-1 position-relative rounded rounded-lg py-3 bg-"+(f?"black":"white")+" shadow-sm",renderContent:this.renderContent,dataFields:j,dataValues:{type:"10"},handleIntersection:r,sessionid:n})))},s}(a.Component))||n;e.a=v}).call(this,s("hosL").Fragment)},ZQlJ:function(t,e,s){"use strict";var o,r=s("hosL"),n=(s("Utv1"),s("/eY4")),a=(s("OhSV"),s("NDEG")),i=Object(n.a)(o=function(t){function e(e){var s;return(s=t.call(this,e)||this).scrollImages=function(t){var e=t.target,o=e.scrollLeft/e.clientWidth,r=Math.round(o),n=Math.abs(r-o);(Number.isInteger(o)||n<.1)&&s.setState({imageIdx:r})},s.sortByName=function(t,e){var o=s.props.allDogs,r=void 0===o?[]:o,n=r.find((function(e){return e.id===t})),a=r.find((function(t){return t.id===e}));return n&&a&&n.name>a.name?1:-1},s.state={imageIdx:0},s}var s,o;return o=t,(s=e).prototype=Object.create(o.prototype),s.prototype.constructor=s,s.__proto__=o,e.prototype.render=function(){var t=this,e=this.props,s=e.dogs,o=e.allDogs,n=e.size,i=void 0===n?"medium":n,c=e.onDogClick,l=void 0===c?function(){}:c;return Object(r.h)("div",{class:"w-100"},Object(r.h)("div",{class:"d-flex flex-row flex-nowrap",style:"overflow: auto; scroll-snap-type: x mandatory;",onScroll:this.scrollImages},s&&s.sort(this.sortByName).map((function(e){var n=o.find((function(t){return t.id===e}));return n?Object(r.h)("div",{class:"col clearfix position-relative p-0 mx-2"},Object(r.h)("div",{class:"w-100 h-100 text-center rounded-lg imageContainer d-flex justify-content-center align-items-center",style:"\n                                        flex-wrap: wrap;\n                                        overflow-y: hidden;\n                                    ",onTouchstart:function(t){t.stopPropagation()},onTouchend:function(t){t.stopPropagation()},onTouchmove:function(t){t.stopPropagation()}},Object(r.h)(a.a,{stores:t.props.stores,dog:n,dogs:o.filter((function(t){return s.indexOf(t.id)>-1})).sort((function(t,e){return t.name>e.name?1:-1})),className:"mx-auto",showName:!0,showPosition:!1,size:i,onDogClick:l}))):""}))))},e}(r.Component))||o;e.a=i},ZWUU:function(t,e,s){"use strict";var o,r=s("hosL"),n=(s("Utv1"),s("/eY4")),a=s("OhSV");s("go65"),Object(n.a)(o=function(t){function e(){for(var e,s=arguments.length,o=new Array(s),r=0;r<s;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))||this).toggleSetting=function(t){return new Promise((function(s,o){var r,n,a;return a=(n=e.props.stores.userStore).user.settings,Promise.resolve(n.updateSetting((r={},r["settings."+t]=1===(void 0===a?{}:a)[t]?0:1,r))).then((function(){try{return s()}catch(t){return o(t)}}),o)}))},e.hideSettings=function(){return new Promise((function(t,s){return Promise.resolve(e.props.stores.userStore.updateSetting({"settings.hideSettings":1})).then((function(){try{return e.setState({hideSettings:!0}),t()}catch(t){return s(t)}}),s)}))},e}var s,o;return o=t,(s=e).prototype=Object.create(o.prototype),s.prototype.constructor=s,s.__proto__=o,e.prototype.render=function(){var t=this,e=this.props.stores.userStore.user.settings,s=void 0===e?{}:e;return this.state.hideSettings||s.hideSettings||!this.props.forceShow&&s.summaryEmails&&s.infoEmails&&s.partnerEmails?"":Object(r.h)("div",{class:"col-12 col-sm-8 col-lg-6 offset-sm-2 offset-lg-3 mt-4 mb-4 pt-4 pb-4 border-bottom border-top"},Object(r.h)("h5",null,Object(r.h)(a.c,{id:"users.settings"},"Brukerinnstillinger")),!s.summaryEmails&&Object(r.h)("div",{class:"row mt-4"},Object(r.h)("div",{class:"col-4 text-muted text-right"},Object(r.h)(a.c,{id:"users.settings-summary-email"},"Oppsummeringer")),Object(r.h)("div",{class:"col-8"},Object(r.h)("div",{class:"custom-control custom-switch"},Object(r.h)("input",{type:"checkbox",class:"custom-control-input",id:"settingsSummaryEmails",onInput:function(){return t.toggleSetting("summaryEmails")},checked:s.summaryEmails}),Object(r.h)("label",{class:"custom-control-label",for:"settingsSummaryEmails"})),Object(r.h)("small",{class:"text-muted"},Object(r.h)(a.c,{id:"users.settings-receive-summary-email"},"Motta oppsummeringer via e-post")))),!s.infoEmails&&Object(r.h)("div",{class:"row mt-4"},Object(r.h)("div",{class:"col-4 text-muted text-right"},Object(r.h)(a.c,{id:"users.settings-info-email"},"Info")),Object(r.h)("div",{class:"col-8"},Object(r.h)("div",{class:"custom-control custom-switch"},Object(r.h)("input",{type:"checkbox",class:"custom-control-input",id:"settingsInfoEmails",onInput:function(){return t.toggleSetting("infoEmails")},checked:s.infoEmails}),Object(r.h)("label",{class:"custom-control-label",for:"settingsInfoEmails"})),Object(r.h)("small",{class:"text-muted"},Object(r.h)(a.c,{id:"users.settings-receive-info-email"},"Motta info via e-post")))),!s.partnerEmails&&Object(r.h)("div",{class:"row mt-4"},Object(r.h)("div",{class:"col-4 text-muted text-right"},Object(r.h)(a.c,{id:"users.settings-partner-email"},"Partners")),Object(r.h)("div",{class:"col-8"},Object(r.h)("div",{class:"custom-control custom-switch"},Object(r.h)("input",{type:"checkbox",class:"custom-control-input",id:"settingsPartnerEmails",onInput:function(){return t.toggleSetting("partnerEmails")},checked:s.partnerEmails}),Object(r.h)("label",{class:"custom-control-label",for:"settingsPartnerEmails"})),Object(r.h)("small",{class:"text-muted"},Object(r.h)(a.c,{id:"users.settings-receive-partner-email"},"Motta tilbud fra våre partnere via e-post")))),Object(r.h)("div",{class:"row mt-4"},Object(r.h)("div",{class:"col-12 text-muted"},Object(r.h)("small",null,Object(r.h)("a",{href:"/users"},Object(r.h)("i",{class:"fas fa-sliders-h"})," ",Object(r.h)(a.c,{id:"users.settings-text-info"},"Innstillingene finner du inne på profilen din."))))),Object(r.h)("div",{class:"row mt-4"},Object(r.h)("div",{class:"col-12 text-muted text-right"},Object(r.h)("small",null,Object(r.h)("button",{type:"button",class:"btn btn-sm btn-link mb-2",onClick:this.hideSettings},Object(r.h)("i",{class:"fas fa-eye-slash"})," ",Object(r.h)(a.c,{id:"users.hide-settings"},"Skjul innstillingene"))))))},e}(r.Component))},"qv+O":function(t,e,s){"use strict";(function(t){function e(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,o)}return s}function o(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}function r(t,e,s){if(void 0===t&&(t=""),void 0===s&&(s="no"),i.a.isString(t)){var o=t,r=new RegExp("<"+s+">(.*?)</"+s+">","s").exec(o);if(r){var n=r[0];n&&(o=n)}return o.replace(/\{\{img\.(\d+)\s*(\d*)\}\}/g,(function(t,s,o){return i.a.isObject(e[s])?"<img src="+e[s].s3XXLargeLink+" class='img-fluid float-right' style='width: "+(o||40)+"%;' />":""}))}return t}var n,a=s("hosL"),i=s("Utv1"),c=s("/eY4"),l=s("OhSV"),u=s("fh8t"),d=s.n(u),h=(s("ZOvn"),{pedantic:!1,gfm:!0,breaks:!0,sanitize:!1,smartLists:!0,smartypants:!0,xhtml:!0}),m={isLoading:!1};Object(c.a)(n=function(s){function n(t){var r;return(r=s.call(this,t)||this).state=function(t){for(var s=1;s<arguments.length;s++){var r=null!=arguments[s]?arguments[s]:{};s%2?e(Object(r),!0).forEach((function(e){o(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):e(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({},m),r}var c,u;u=s,(c=n).prototype=Object.create(u.prototype),c.prototype.constructor=c,c.__proto__=u;var p=n.prototype;return p.loadRace=function(t){return new Promise(function(e,s){return void 0===t&&(t=this.props),this.setState({isLoading:!0}),Promise.resolve(t.stores.raceStore.load({query:{}})).then(function(){try{return this.setState({isLoading:!1}),e()}catch(t){return s(t)}}.bind(this),s)}.bind(this))},p.componentDidMount=function(){this.loadRace()},p.componentWillReceiveProps=function(t){this.loadRace(t)},p.render=function(){var e=this.props.stores,s=e.appState,o=e.userStore,n=o.isAdmin,c=e.raceStore.races,u=s.language,m=void 0===u?"no":u;return Object(a.h)("div",{class:"row"},Object(a.h)("div",{class:"col-12"},Object(a.h)("h5",null,Object(a.h)(l.c,{id:"races.homerun"},"Homerun races"))),(c||0===c.length)&&Object(a.h)("div",{class:"col-12 text-center py-5"},Object(a.h)("h5",null,"No upcoming races!"),"Take a look at the previous races:",Object(a.h)("br",null),Object(a.h)("a",{href:"https://homerunrace.no/",target:"_blank",rel:"noreferrer"},"homerunrace.no")),c&&c.sort((function(t,e){return t.startDate-e.startDate})).reverse().map((function(e){var s=new Date,o="";if(s>=new Date(e.startDate)&&s<=new Date(e.endDate))o="race";else if(s>=new Date(e.signupStartDate)&&s<=new Date(e.signupEndDate))o="signup";else if(s>new Date(e.endDate))return Object(a.h)(t,null);return Object(a.h)(t,null,Object(a.h)("div",{class:"col-12 col-sm-12 col-md-6 col-lg-6 mb-3"},Object(a.h)("div",{class:"card position-relative"},Object(a.h)("h5",{class:"position-absolute",style:"top: 10px; right: 10px;"},"signup"===o&&Object(a.h)(t,null,Object(a.h)("div",{class:"spinner-grow text-primary",role:"status"})),"race"===o&&Object(a.h)(t,null,Object(a.h)("div",{class:"spinner-grow text-danger",role:"status"})),"done"===o&&Object(a.h)(t,null,Object(a.h)("span",null,Object(a.h)("i",{class:"fas fa-check text-success"})))),Object(a.h)("h5",{class:"card-header"},n&&Object(a.h)("i",{class:"fas fa-eye"+(e.active?" text-success":"-slash text-danger")+" float-right"}),e.title),Object(a.h)("div",{class:"list-thumb d-flex align-items-center position-relative"},Object(a.h)("h5",{class:"position-absolute",style:"top: 3px; right: 5px;"},"signup"===o&&Object(a.h)(t,null,Object(a.h)("span",{class:"badge badge-primary border border-white ml-2"},Object(a.h)(l.c,{id:"races.signup-open"},"Påmelding åpen"))),"race"===o&&Object(a.h)(t,null,Object(a.h)("span",{class:"badge badge-danger border border-white ml-2"},Object(a.h)(l.c,{id:"races.race-in-progress"},"Løp pågår"))),"done"===o&&Object(a.h)(t,null,Object(a.h)("span",{class:"badge badge-success border border-white ml-2"},Object(a.h)(l.c,{id:"races.race-finished"},"Løp avsluttet")))),e.images&&e.images[0]?Object(a.h)("img",{src:e.images[0].s3MediumLink,class:"card-img-top"}):""),Object(a.h)("div",{class:"card-body"},Object(a.h)("p",{class:"card-text"},Object(a.h)(d.a,{markdown:r(e.ingress,e.images,m),markdownOpts:h})),e.classes&&Object(a.h)(t,null,Object(a.h)("div",{class:"mb-3"},Object(a.h)("small",{class:"font-weight-lighter mr-2"},Object(a.h)(l.c,{id:"races.classes"},"Klasser"),": "),Object(a.h)("br",null),e.classes.sort((function(t,e){return t.distance-e.distance})).map((function(e){return Object(a.h)(t,null,Object(a.h)("span",{class:"badge badge-pill badge-light mr-2 font-weight-light"},e.title))})))),Object(a.h)("a",{href:"/app-races/"+e.id,class:"btn btn-primary stretched-link"},Object(a.h)(l.c,{id:"races.read-more"},"Les mer"))),Object(a.h)("div",{class:"card-footer"},Object(a.h)("small",{class:"text-muted"},Object(a.h)(l.c,{id:"races.race-days"},"Løpsdager"),": ",e.startDate&&Object(a.h)(t,null,i.a.formatDate(e.startDate,{locale:m})),e.endDate&&Object(a.h)(t,null," - ",i.a.formatDate(e.endDate,{locale:m})))))))})))},n}(a.Component))}).call(this,s("hosL").Fragment)}}]);
//# sourceMappingURL=route-home.chunk.f916e.js.map