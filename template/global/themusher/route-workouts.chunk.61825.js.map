{"version":3,"sources":["webpack:///./components/feedback/likesAndComments.js","webpack:///./components/workout/commentAdd.js","webpack:///./components/util/scrollIntoView.js","webpack:///./components/workout/totals.js","webpack:///./components/workout/calendar.js","webpack:///./components/workout/summary.js","webpack:///./components/workout/commentReply.js","webpack:///./components/garmin/index.js","webpack:///./components/data/distance.js","webpack:///./components/workout/status.js","webpack:///./routes/workouts/index.js","webpack:///./components/style.css","webpack:///./components/workout/index.js","webpack:///./components/workout/calendarPlan.js","webpack:///./components/data/temperature.js","webpack:///./components/modal/index.js","webpack:///./components/data/weight.js","webpack:///./components/workout/graph.js","webpack:///./components/dog/scroller.js","webpack:///./components/workout/table.js","webpack:///./components/strava/index.js","webpack:///./components/gauge/style.css","webpack:///./components/ad/index.js","webpack:///./components/data/elevation.js","webpack:///./components/data/speed.js","webpack:///./components/form/images.js","webpack:///./components/team/teams.js","webpack:///./components/workout/comments.js","webpack:///./components/form/dragNdropFileupload.js","webpack:///./components/feedback/views.js","webpack:///./components/gauge/index.js","webpack:///./components/team/fastList.js"],"names":["initialState","DisplayLikesAndComments","observer","props","toggleLikes","setState","showLikesList","state","render","this","stores","storyStore","teamStore","workoutStore","raceStore","likes","comments","type","onTeamClick","class","length","style","onClick","slice","map","like","user","teams","publicTeam","findPublicUser","findPublicTeamByMembers","util","isArray","find","e","public","mu","getImage","team","priority","displayNameShort","name","displayName","href","uuidv4","title","id","fields","total","image","shortname","Component","WorkoutAdd","beforeImagesUploaded","sendButtonEnabled","afterImagesUploaded","commentWorkout","response","callback","inputRefObject","workout","comment","showAddImage","status","body","images","resizeTextarea","addImage","addImages","push","value","handleImageErrored","target","onerror","setTimeout","src","Date","inputRef","col","offset","showAvatar","extraClass","userStore","firstname","ucfirst","lastname","email","userImage","undefined","s3SmallLink","for","placeholder","onInput","linkState","onKeyUp","onFocus","ref","data-id","disabled","img","onError","removeImage","data-name","object","updateField","before","after","autoOpen","ScrollIntoView","container","componentDidMount","horizontal","vertical","behavior","inline","block","scrollIntoView","c","WorkoutTotals","loadAll","loadTeams","currentMonth","currentYear","getMonth","getFullYear","month","year","load","query","currentTeam","skipMusherWorkoutSummary","addData","componentWillReceiveProps","nextProps","currentSeasonSummary","currentSeason","prevSeasonSummary","prevSeason","seasonStart","parseInt","findWorkoutSummary","findWorkoutSummaryTotal","distanceKm","smallUnit","elevation","secToHms","duration","speedAvg","RED_DAYS","WorkoutCalendar","chooseDay","chooseDayFunction","day","parentElement","dataset","loadWorkoutSummary","isLoading","skipLoadSummary","getYear","dog","getWorkoutSummary","getWorkoutSummaryDay","appState","workoutPlanStore","language","DAYS","getDays","MONTHS","getMonths","dd","mm","yyyy","darkmode","currentDay","getDate","basehref","hideSummary","hideTable","monthNum","yearNum","getNextMonth","nextMonth","nextYear","getPrevMonth","prevMonth","prevYear","weeksInMonth","getDaysInMonth","getWeeksInMonth","daysOfWeek","getDaysInWeek","week","totalDistanceKmMonth","totalCountMonth","totalElevationMonth","totalDurationMonth","totalSpeedavgMonth","totalPlanDistanceKmMonth","getDay","weekObj","summaryPlanWeek","findWorkoutPlanSummaryWeek","totalWeek","summary","findWorkoutSummaryWeekDay","summaryPlanDay","findWorkoutPlanSummaryDay","count","distance","isChosen","isToday","isDayOff","indexOf","data-day","data-month","data-year","getTrainingColor","colspan","avgArr","format","WorkoutCommentReply","commentId","commentReplyWorkout","Garmin","toggleDate","stopPropagation","preventDefault","showDate","ignoreGarminWorkout","garminActivityDetailsStore","ignoreWorkout","loadGarminActivities","importGarminWorkout","loadWorkouts","asTrack","importTrack","importWorkout","toggleDetail","showDetail","hideImported","activities","forceShowDate","selectedTeam","findTeam","activity","startDate","parseInputDate","startTimeInSeconds","deviceName","activityType","formatDate","locale","formatDistance","distanceInMeters","totalElevationGainInMeters","averageSpeedInMetersPerSecond","durationInSeconds","displayDistance","Distance","settings","imperial","kmToMiles","WorkoutStatus","loadWorkoutPlans","workoutPlanCurrent","seasonYear","seasonMonth","workoutPlans","lastPlanMonth","workoutPlan","months","monthRange","planMonth","sumWorkoutPlanMonth","percCompleted","findWorkoutSummaryMonth","height","role","aria-valuenow","aria-valuemin","aria-valuemax","MARGIN_TOP","marginTop","MARGIN_BOTTOM","marginBottom","SUB_MENU_MARGIN_TOP","subMenuMarginTop","loadedTime","limit","submenu","workoutFilter","sessionid","getTime","dataFields","Workouts","messageStore","Promise","all","getNotifications","getUnReadMessages","loadStravaActivities","changeTeam","setLoadMore","unsetLoadMore","prepareWeekGraphs","updateKeyValue","resetGraphPlanWeekDistanceCurrent","chooseSubmenu","menu","w","date","d","m","y","renderContent","obj","wrapperClasses","wrapperClassesRow","setupIntersection","handleIntersection","intersectionObserverCallback","scrollViewTimer","setInterval","postScrollview","getIntersectionObserverHistory","stravaActivityStore","daysBack","componentWillMount","componentWillUnmount","clearInterval","checkCordova","percentComplete","scrolledDown","workoutSummaryWeekDay","currentTeamObject","workouts","cordovaActiveTrackingParams","isRunning","totalDistance","currentSpeed","totalTime","workoutsFiltered","filter","summaryMonth","Math","floor","stravaActivities","garminActivityDetails","changeTeams","key","data-menu","radius","percent","prefix","completed","url","section","showExtra","showNavigation","showHeader","strava","garmin","data","wrapperClassNames","contentClassNames","dataValues","module","exports","getWorkoutColor","getWorkoutIcon","MAX_LOADINDEX","getMaxLoadIndex","showAddComment","viewImageIdx","likeWorkout","Workout","workoutId","toggleAddComment","focus","viewImage","closest","idx","shareLink","shareUrl","text","teamid","showTeam","hideTeam","onUserClick","onDogClick","dogid","dogs","showDog","hideDog","updateTimer","viewmode","hasShareApi","allDogs","intensity","findIntensity","code","teamName","teamNames","forEach","hasLikedWorkout","findIndex","gpxInfo","mushers","loadIndex","workoutEquipment","findEquipment","equipment","workoutEquipmentIcon","field","musherImages","musher","u","publicUser","mapImage","imgs","toJS","batteryUsage","battegryLevelStart","battegryLevelEnd","views","getViews","statistics","back","temperature","isLocked","isInProgress","hour12","hour","minute","getLoadIndexColor","normalizeBetween","getLoadIndexText","garminId","stravaId","track","dogsLeft","dogsRight","sledWeight","kcalBurnedTotal","kcalMeatGramsTotal","kcalSalmonGramsTotal","kcalFatGramsTotal","description","markdown","replaceImages","markdownOpts","getMarkdownOptions","avgGpsMovingSpeed","dblClick","likeRef","data-url","data-title","rel","data-native","compact","isTeamAdmin","isAdmin","Calendar","setFocus","editMonth","showInput","inputYear","inputMonth","inputDay","inputWeek","newDistance","editWeek","editDay","saveDistance","saveField","resetInput","insert","nextDay","addDays","getWeek","checkKeydown","updateWorkoutPlanTips","hideWorkoutPlanTips","toggleTips","newValue","updateSetting","currentEpoch","daysOfMonth","totalDistanceKmMonthPlan","totalWorkoutDistanceKmMonth","isMonthInTheFuture","findWorkoutPlanSummaryMonth","tips","tipsMonth","padDate","hasTipsMonth","onKeydown","autocomplete","summaryWeek","asNumber","isWeekInTheFuture","totalWorkoutWeek","tipsWeek","hasTipsWeek","data-week","data-distance","isDayInTheFuture","summaryWorkout","getPlanColor","time","totalWorkouts","avgSpeed","Temperature","celciusToFahrenheit","Modal","touchStart","startY","touches","pageY","touchEnd","readyToRefresh","touchMove","appContainer","scrollTop","refreshing","close","imagexxl","thumb","onTouchstart","onTouchend","onTouchmove","download","Weight","kgToPounds","WorkoutGraph","withText","rest","ascend","plan","avgDogs","avgImages","rating","graphWorkoutSummaryWeekDistanceCurrent","graphWorkoutSummaryWeekDistancePrev","graphWorkoutSummaryWeekElevationCurrent","graphWorkoutSummaryWeekElevationPrev","avgDayDistance","avgDayElevation","avgDayDuration","avgDaySpeedAvg","avgDayLoadIndex","avgDayAvgDogs","avgDayAvgImages","avgDaySledWeight","avgDayRest","avgDayRating","avgDayTemperature","graphPlanWeekDistanceCurrent","seasonWeeks","weekRange","seasonDays","dayRange","xTicksAll","wo","parts","xTicks","i","l","xTicksAllDays","partsDays","xTicksDays","width","showXTicks","xTicksVal","val","paddingTop","lineFromXzero","lineFromXmax","xTicksLink","dataLeft","legendLeft","dataFillLeft","showYTicksLeft","yTicksLeftPostfix","unitLeft","avgWindowLeft","smoothLeft","dataRight","legendRight","showYTicksRight","yTicksRightPostfix","unitRight","avgWindowRight","smoothRight","paddingLeft","yTicksLeftWidth","yTicksLeftVal","yTicksRightVal","DogScroller","scrollImages","imageIdx","scrollLeft","clientWidth","nearestInt","round","diff","abs","Number","isInteger","sortByName","a","b","dogA","dogB","size","onScroll","sort","dogId","className","showName","showPosition","WorkoutTable","seasonMonths","prevSeasonMonths","partSize","scope","Strava","ignoreStravaWorkout","importStravaWorkout","start_date","total_elevation_gain","average_speed","elapsed_time","Ad","subject","logClick","ads","adStore","apiServer","getApiServer","loadAd","page","path","findTeamAmbition","ambition","ambitions","findTeamType","postalcode","place","country","replace","setTime","match","ad","native","s3LargeLink","Elevation","meterToFeet","Speed","kmtToMph","Images","handleAddImage","file","addToImages","skipTimer","files","uploadStatus","apiUrl","Teams","toggleTeam","unsetTeamIfSelected","dogStore","setCurrentTeam","isDefined","showAllTeams","highlight","showAll","classNames","showAllComments","showAllReplies","WorkoutComments","likeComment","likeWorkoutComment","likeReply","replyId","likeWorkoutCommentReply","replyComment","toggleComments","toggleReplies","translate","showOriginal","translatedText","commentid","replyid","translateCommentReply","translateComment","max_comments","currentUser","filteredComments","totalComments","diplayedComments","max","reverse","hasLikedComment","filteredReplises","totalReplies","diplayedReplies","currentImage","currentLocationGeocode","translation","getCommentTranslations","targetLang","t","loading","data-idx","data-commentid","createdDate","updatedDate","formatted_address","reply","hasLikedReply","replyTranslation","getCommentReplyTranslations","replyBody","data-comment","data-replyid","more","DragNDropFileupload","dropRef","createRef","handleDrag","handleDragIn","dragCounter","dataTransfer","items","drag","handleDragOut","handleDrop","readLocalFile","handleAddFiles","event","el","handleEvent","handleUpload","fileObject","isFunction","formData","FormData","append","uploadMeta","progress","xhr","XMLHttpRequest","upload","addEventListener","updateProgress","fileObj","uploadDone","open","setRequestHeader","getJwtToken","send","filename","uploadedFilesData","imageNum","resolve","reject","reader","FileReader","error","photo","readAsDataURL","lengthComputable","loaded","readyState","JSON","parse","responseText","addFileToUpload","fileInput","loadingProgress","uploadedFiles","div","current","click","removeEventListener","position","border","backgroundColor","top","bottom","left","right","zIndex","textAlign","color","fontSize","multiple","onchange","Object","keys","isImage","result","formatBytes","children","toggleViews","showViewList","viewUsersArrays","entries","weekObject","viewUsers","flat","userId","mouseData","Gauge","svgRef","heightAdd","showPercentText","showCenterText","centerText","centerTextSize","centerTextX","centerTextY","totalY","totalX","totalTextAnchor","completedY","completedX","completedTextAnchor","strokeWidth","innerRadius","strokeWidthGauge","circumference","PI","arc","dashArray","transform","min","textSize","textSizeSmall","xmlns","svg","preserveAspectRatio","gaugeBackground","cx","cy","r","strokeDasharray","strokeLinecap","gauge","stroke","strokeDashoffset","transition","gaugeText","x","dominant-baseline","text-anchor","font-size","secondary","FastListLine","containerRef","removeIntersectionObserver","addIntersectionObserver","dataProperties","encodeURI","FastList","deleteIntersectionObserver","intersectionObserver","isIntersecting","currentHeight","childNodes","offsetHeight","scrollHeight","display","minHeight","setupIntersectionObserver","window","IntersectionObserverEntry","prototype","IntersectionObserver","root","rootMargin","threshold","observe","unobserve","isObject","hasOwnProperty","contentClasses"],"mappings":"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","file":"route-workouts.chunk.61825.js","sourcesContent":["import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport { Text, Localizer } from 'preact-i18n';\n\nimport mu from '../../lib/musher-util';\n\nconst initialState = {};\n\nconst MAX_USERS_TO_DISPLAY = 1;\n\n@observer\nclass DisplayLikesAndComments extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            ...initialState,\n        };\n    }\n\n    toggleLikes = () => {\n        const { showLikesList } = this.state;\n        this.setState({\n            showLikesList: !showLikesList,\n        });\n    }\n\n    render() {\n        const { showLikesList } = this.state;\n        const { storyStore, teamStore, workoutStore, raceStore } = this.props.stores;\n        const { likes, comments, type = 'story', onTeamClick = () => {}, onUserClick = () => {} } = this.props;\n\t\treturn (<>\n            <div class='d-flex justify-content-between mb-2'>\n                {likes && likes.length > 0 && <>\n                    <div class='d-flex flex-row flex-nowrap position-relative mr-3' style='overflow: auto;'>\n                        <span\n                            class='text-muted mr-2'\n                            onClick={this.toggleLikes}\n                        >\n                            <i class='fas fa-thumbs-up text-primary' /> {likes.length}\n                        </span>\n                        {likes.slice(0, MAX_USERS_TO_DISPLAY).map((like) => {\n                            let user;\n                            let teams;\n                            if (type === 'story') {\n                                user = storyStore.findPublicUser(like.user);\n                                teams = storyStore.findPublicTeamByMembers(like.user);\n                            } else if (type === 'team') {\n                                user = teamStore.findPublicUser(like.user);\n                                teams = teamStore.findPublicTeamByMembers(like.user);\n                            } else if (type === 'workout') {\n                                user = workoutStore.findPublicUser(like.user);\n                                teams = workoutStore.findPublicTeamByMembers(like.user);\n                            } else if (type === 'race') {\n                                user = raceStore.findPublicUser(like.user);\n                                teams = raceStore.findPublicTeamByMembers(like.user);\n                            }\n                            let publicTeam;\n                            if (util.isArray(teams)) {\n                                publicTeam = teams.find(e => e.public === 1);\n                            }\n                            const image = mu.getImage({ user, team: publicTeam, priority: 'user' });\n                            const shortname = mu.displayNameShort(user);\n                            const name = mu.displayName(user);\n                            return (<>\n                                <span class='font-weight-lighter'>\n                                    {publicTeam ? <>\n                                        <a href={`/teams/public/${publicTeam.uuidv4}`} title={publicTeam.name} onClick={(e) => onTeamClick(e, publicTeam.uuidv4)}>\n                                            {name}\n                                        </a>\n                                    </> : <>\n                                        {name}\n                                    </>}\n                                </span>\n                            </>);\n                            // return (<>\n                            //     {publicTeam ? <>\n                            //         <a href={`/teams/public/${publicTeam.uuidv4}`} title={publicTeam.name} onClick={(e) => onTeamClick(e, publicTeam.uuidv4)}>\n                            //             <div\n                            //                 class={`text-center border rounded-circle imageRounded imageRoundedThumb`}\n                            //                 style={`${image ? `background-image: url(\"${image}\"); background-size: cover;` : ''}`}\n                            //             >\n                            //                 {!image && <div class='' style='font-size: 12px; padding-top: 3px;'>{shortname}</div>}\n                            //             </div>\n                            //         </a>\n                            //     </> : <>\n                            //         <div\n                            //             class={`text-center border rounded-circle imageRounded imageRoundedThumb`}\n                            //             style={`${image ? `background-image: url(\"${image}\"); background-size: cover;` : ''} opacity: 0.5;`}\n                            //         >\n                            //             {!image && <div class='text-muted' style='font-size: 12px; padding-top: 3px;'>{shortname}</div>}\n                            //         </div>\n                            //     </>}\n                            // </>);\n                        })}\n                        {likes.length > MAX_USERS_TO_DISPLAY && <>\n                            <span class='text-muted font-weight-lighter ml-2' onClick={this.toggleLikes}>\n                                <Text id='likes-comments.and' fields={{ total: likes.length - MAX_USERS_TO_DISPLAY }}>and {likes.length - MAX_USERS_TO_DISPLAY} others.</Text>\n                            </span>\n                        </>}\n                    </div>\n                </>}\n\n                {comments && comments.length > 0 && <span class='float-right text-muted'>\n                    <i class='fas fa-comment text-primary' /> {comments.length}\n                </span>}\n            </div>\n            {showLikesList && <div class='mt-3 mb-3'>\n                {likes && likes.map((like) => {\n                    let user;\n                    let teams;\n                    if (type === 'story') {\n                        user = storyStore.findPublicUser(like.user);\n                        teams = storyStore.findPublicTeamByMembers(like.user);\n                    } else if (type === 'team') {\n                        user = teamStore.findPublicUser(like.user);\n                        teams = teamStore.findPublicTeamByMembers(like.user);\n                    } else if (type === 'workout') {\n                        user = workoutStore.findPublicUser(like.user);\n                        teams = workoutStore.findPublicTeamByMembers(like.user);\n                    } else if (type === 'race') {\n                        user = raceStore.findPublicUser(like.user);\n                        teams = raceStore.findPublicTeamByMembers(like.user);\n                    }\n                    let publicTeam;\n                    if (util.isArray(teams)) {\n                        publicTeam = teams.find(e => e.public === 1);\n                    }\n                    const image = mu.getImage({ user, team: publicTeam, priority: 'user' });\n                    const shortname = mu.displayNameShort(user);\n                    const name = mu.displayName(user, true);\n                    return (<div class='d-flex flex-row position-relative font-weight-light mb-1'>\n                        {publicTeam ? <>\n                            <a href={`/teams/public/${publicTeam.uuidv4}`} title={publicTeam.name} onClick={(e) => onTeamClick(e, publicTeam.uuidv4)} class='stretched-link'>\n                                <div\n                                    class={`text-center border rounded-circle imageRounded imageRoundedThumb`}\n                                    style={`${image ? `background-image: url(\"${image}\"); background-size: cover;` : ''}`}\n                                >\n                                    {!image && <div class='' style='font-size: 12px; padding-top: 3px;'>{shortname}</div>}\n                                </div>\n                            </a>\n                            <div class='ml-2 '>\n                                {name} <span class='font-weight-lighter'>- {publicTeam.name}</span>\n                            </div>\n                        </> : <>\n                            <div\n                                class={`text-center border rounded-circle imageRounded imageRoundedThumb`}\n                                style={`${image ? `background-image: url(\"${image}\"); background-size: cover;` : ''} opacity: 0.5;`}\n                            >\n                                {!image && <div class='text-muted' style='font-size: 12px; padding-top: 3px;'>{shortname}</div>}\n                            </div>\n                            <div class='ml-2'>\n                                {name}\n                            </div>\n                        </>}\n                    </div>);\n                })}\n            </div>}\n\t\t</>);\n\t}\n}\n\nexport default DisplayLikesAndComments;\n","import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport { Text, Localizer, withText } from 'preact-i18n';\nimport linkState from 'linkstate';\n\nimport Images from '../form/images';\n\nimport style from '../style.css';\nimport mu from '../../lib/musher-util';\n\n@observer\nclass WorkoutAdd extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            comment: {\n                body: '',\n                images: [],\n            },\n            showAddImage: false,\n            sendButtonEnabled: true,\n        };\n        this.inputRef = {};\n    }\n\n    beforeImagesUploaded = () => {\n        this.setState({ sendButtonEnabled: false });\n    }\n\n    afterImagesUploaded = () => {\n        this.setState({ sendButtonEnabled: true });\n    }\n    \n    commentWorkout = async () => {\n        const { sendButtonEnabled } = this.state;\n        if (!sendButtonEnabled) {\n            return false;\n        }\n        const { callback = () => {}, inputRefObject = {} } = this.props;\n        const { workout } = this.props;\n\t\tconst { workoutStore } = this.props.stores;\n        const { comment, showAddImage } = this.state;\n        this.setState({ sendButtonEnabled: false });\n\t\tconst response = await workoutStore.commentWorkout({ id: workout.id, comment });\n\t\tif (response && response.status === 200) {\n            this.setState({\n                comment: {\n                    body: '',\n                    images: [],\n                },\n            }, () => {\n                mu.resizeTextarea(inputRefObject[workout.id]);\n                if (showAddImage) {\n                    this.addImage();\n                }\n            });\n            callback({ workout, response });\n\t\t}\n        this.setState({ sendButtonEnabled: true });\n\t}\n\n    addImages = ({ value }) => {\n        // updateField({ id: object.id, field: 'images', value: images, skipTimer: true });\n        const { comment } = this.state;\n        comment.images.push(...value);\n        this.setState({ comment });\n    }\n\n    addImage = () => {\n        const { showAddImage = false } = this.state;\n        this.setState({\n            showAddImage: !showAddImage,\n        });\n    }\n\n    handleImageErrored = (e) => {\n        const image = e.target;\n        image.onerror = null;\n        setTimeout(() => {\n            image.src += `?${new Date()}`;\n        }, 1000);\n    }\n\n    render() {\n        const { inputRef, col = 12, offset = 0, showAvatar = true, extraClass = '', workout } = this.props;\n        const { comment, showAddImage, sendButtonEnabled } = this.state;\n        const { userStore } = this.props.stores;\n        const { user = {} } = userStore;\n        const displayNameShort = user.firstname ? `${util.ucfirst(user.firstname, true)}${util.ucfirst(user.lastname, true)}` : `${util.ucfirst(user.email || '', true)}`;\n        // const displayName = user.firstname ? `${user.firstname} ${user.lastname}` : `${user.email}`;\n        const userImage = user.image || (user.images ? user.images[0] : undefined);\n\n        return (\n            <div class={`col-${col} offset-${offset} ${extraClass}`}>\n                <div class='d-flex mb-0 position-relative w-100'>\n                    {showAvatar && <div \n                        class={`text-center border rounded-circle imageRounded imageRoundedSmall`}\n                        style={`${userImage ? `background-image: url('${userImage.s3SmallLink}'); background-size: cover;` : ''} border-width: 3px !important;`}\n                    >\n                        {!user.image && <span class='font-weight-lighter' style='font-size: 15px;'>{displayNameShort}</span>}\n                    </div>}\n                    <div class='col pl-3' style='line-height: 1.2em;'>\n\n                        <div class='d-flex bd-highlight'>\n                            <div class='p-0 w-100 bd-highlight'>\n                                <label class='sr-only' for='inlineFormInput'><Text id='comments.comment'>Kommentar</Text></label>\n                                <div class='border rounded rounded-lg position-relative'>\n                                    <Localizer>\n                                        <textarea\n                                            class='form-control-plaintext px-2'\n                                            type='text'\n                                            placeholder={<Text id='comments.write-comment'>Skriv en kommentar...</Text>}\n                                            onInput={linkState(this, 'comment.body')}\n                                            onKeyUp={mu.resizeTextarea}\n                                            onFocus={mu.resizeTextarea}\n                                            style='height: 2.3em;'\n                                            value={comment.body}\n                                            ref={inputRef}\n                                        />\n                                    </Localizer>\n                                    <div class='position-absolute' style='top: 8px; right: 10px; font-size: 1.2em;'>\n                                        <i class='fas fa-image pointerCursor'\n                                            data-id={workout.id}\n                                            onClick={this.addImage}\n                                        />\n                                    </div>\n                                </div>\n                            </div>\n                            <div class='p-0 pl-2 flex-shrink-1 bd-highlight'>\n                                <button type='button' class={`btn btn-${sendButtonEnabled ? 'primary' : 'secondary'} mb-2`} disabled={!sendButtonEnabled}\n                                    onClick={this.commentWorkout}\n                                ><i class='fas fa-paper-plane' /></button>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n                {showAddImage && <>\n                    <div class='col-12 text-center'>\n                        <div class='container-fluid'>\n                            <div class='row'>\n                                {comment.images && comment.images.map(img => (\n                                    <div class='col-3 p-1'>\n                                        <img src={img.s3SmallLink} class='img-fluid' onError={this.handleImageErrored} />\n                                        <button class='btn btn-sm btn-link'\n                                            onClick={this.removeImage}\n                                            data-name={img.name}\n                                        ><i class='fas fa-trash' />  <Text id='comments.remove-image'>Remove</Text></button>\n                                    </div>\n                                ))}\n                            </div>\n                        </div>\n                        <Images object={comment} updateField={this.addImages} before={this.beforeImagesUploaded} after={this.afterImagesUploaded} autoOpen={true} />\n                    </div>\n                </>}\n            </div>\n        );\n    }\n}\n\nexport default WorkoutAdd;\n","import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\n\nconst initialState = {};\n\n@observer\nclass ScrollIntoView extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            ...initialState,\n        };\n        this.container = null;\n    }\n\n    componentDidMount() {\n        const { horizontal, vertical = '' } = this.props;\n        const props = {\n            behavior: 'smooth',\n        };\n        if (horizontal) {\n            props.inline = horizontal;\n        }\n        if (vertical) {\n            props.block = vertical;\n        }\n\t\tthis.container.scrollIntoView(props);\n\t}\n\n    render() {\n        return (\n            <div ref={c => this.container = c}>&nbsp;</div>\n        );\n    }\n}\n\nexport default ScrollIntoView;\n","import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport { Text, Localizer, withText } from 'preact-i18n';\n\nimport style from '../style.css';\nimport mu from '../../lib/musher-util';\n\nimport Speed from '../../components/data/speed';\nimport Elevation from '../../components/data/elevation';\nimport Weight from '../../components/data/weight';\nimport Distance from '../../components/data/distance';\nimport Temperature from '../../components/data/temperature';\n\n@observer\nclass WorkoutTotals extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {};\n    }\n\n    async loadAll(props = this.props) {\n        await this.loadTeams(props);\n        // await Promise.all([\n        //     this.loadTeams(props),\n        // ]);\n    }\n\n    async loadTeams(props = this.props) {\n\t\tconst { teamStore } = props.stores;\n\n        const currentMonth = new Date().getMonth() + 1;\n        const currentYear = new Date().getFullYear();\n\n\t\tconst { month = currentMonth, year = currentYear, currentTeam } = props;\n\n\t\tawait teamStore.load({ query: { team: currentTeam, skipMusherWorkoutSummary: true, year, month }, addData: ['workoutSummary'] });\n\t}\n\n\tcomponentDidMount() {\n\t\tthis.loadAll();\n\t}\n\n    componentWillReceiveProps(nextProps) {\n        if (nextProps.year !== this.props.year || nextProps.currentTeam !== this.props.currentTeam) {\n            this.loadAll(nextProps);\n        }\n    }\n\n    render() {\n        const { teamStore } = this.props.stores;\n\n        const currentMonth = new Date().getMonth() + 1;\n        const currentYear = new Date().getFullYear();\n\t\tconst { month = currentMonth, year = currentYear, currentTeam, currentSeason: currentSeasonSummary, prevSeason: prevSeasonSummary } = this.props;\n\t\tconst seasonStart = parseInt(month < 8 ? year - 1 : year, 10);\n\n        const { workoutSummary } = teamStore;\n        const prevSeason = prevSeasonSummary || ((currentTeam ? teamStore.findWorkoutSummary(currentTeam, seasonStart - 1) : teamStore.findWorkoutSummaryTotal(seasonStart - 1)) || {});\n        const currentSeason = currentSeasonSummary || ((currentTeam ? teamStore.findWorkoutSummary(currentTeam, seasonStart) : teamStore.findWorkoutSummaryTotal(seasonStart)) || {});\n\n        return (\n            <div class='container-fluid mb-2'>\n                <div class='row mt-2 border-top'>\n                    <div class='col text-center'>\n                        <small class='text-muted'><i class='fas fa-road' /> {seasonStart}-{seasonStart + 1}</small>\n                        <h3>\n                            <Distance stores={this.props.stores} value={currentSeason.distanceKm || 0} smallUnit={true} />\n                        </h3>\n                    </div>\n                    <div class='col text-center border-left'>\n                        <small class='text-muted'><i class='fas fa-road' /> {seasonStart - 1}-{seasonStart}</small>\n                        <h3 class='text-muted'>\n                            <Distance stores={this.props.stores} value={prevSeason.distanceKm || 0} smallUnit={true} />\n                        </h3>\n                    </div>\n                </div>\n                <div class='row mt-2'>\n                    <div class='col text-center'>\n                        <small class='text-muted'><i class='fas fa-mountain' /> {seasonStart}-{seasonStart + 1}</small>\n                        <h3>\n                            <Elevation stores={this.props.stores} value={currentSeason.elevation || 0} smallUnit={true} />\n                        </h3>\n                    </div>\n                    <div class='col text-center border-left'>\n                        <small class='text-muted'><i class='fas fa-mountain' /> {seasonStart - 1}-{seasonStart}</small>\n                        <h3 class='text-muted'>\n                            <Elevation stores={this.props.stores} value={prevSeason.elevation || 0} smallUnit={true} />\n                        </h3>\n                    </div>\n                </div>\n                <div class='row mt-2'>\n                    <div class='col text-center'>\n                        <small class='text-muted'><i class='fas fa-clock' /> {seasonStart}-{seasonStart + 1}</small>\n                        <h3>\n                            {util.secToHms(currentSeason.duration || 0)}\n                        </h3>\n                    </div>\n                    <div class='col text-center border-left'>\n                        <small class='text-muted'><i class='fas fa-clock' /> {seasonStart - 1}-{seasonStart}</small>\n                        <h3 class='text-muted'>\n                            {util.secToHms(prevSeason.duration || 0)}\n                        </h3>\n                    </div>\n                </div>\n                <div class='row mt-2 border-bottom'>\n                    <div class='col text-center'>\n                        <small class='text-muted'><i class='fas fa-tachometer-alt' /> {seasonStart}-{seasonStart + 1}</small>\n                        <h3>\n                            <Speed stores={this.props.stores} value={currentSeason.speedAvg || 0} smallUnit={true} />\n                        </h3>\n                    </div>\n                    <div class='col text-center border-left'>\n                        <small class='text-muted'><i class='fas fa-tachometer-alt' /> {seasonStart - 1}-{seasonStart}</small>\n                        <h3 class='text-muted'>\n                            <Speed stores={this.props.stores} value={prevSeason.speedAvg || 0} smallUnit={true} />\n                        </h3>\n                    </div>\n                </div>\n\n            </div>\n        );\n    }\n}\n\nexport default WorkoutTotals;\n","import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport { Text, Localizer, withText } from 'preact-i18n';\n\nimport Speed from '../../components/data/speed';\nimport Elevation from '../../components/data/elevation';\nimport Weight from '../../components/data/weight';\nimport Distance from '../../components/data/distance';\nimport Temperature from '../../components/data/temperature';\n\nimport mu from '../../lib/musher-util';\n\nconst RED_DAYS = [0, 6];\n\n@observer\nclass WorkoutCalendar extends Component {\n\n    async loadWorkoutSummary(props = this.props) {\n        this.setState({ isLoading: true });\n        if (props.skipLoadSummary) {\n            return false;\n        }\n\n\t\tconst { userStore, workoutStore } = this.props.stores;\n\t\tconst { currentTeam } = workoutStore;\n\n        const currentMonth = new Date().getMonth() + 1;\n        const { month = currentMonth, year = util.getYear(), team = currentTeam, dog = {} } = props;\n        if (dog && dog.id) {\n            await userStore.getWorkoutSummary({ dog: dog.id, year });\n            await userStore.getWorkoutSummaryDay({ month, year, dog: dog.id });\n        } else {\n            await userStore.getWorkoutSummary({ team, dog: dog.id, year });\n            await userStore.getWorkoutSummaryDay({ month, year, team, dog: dog.id });\n        }\n\t\t// await workoutStore.load({ query: { team: currentTeam, month, year } });\n        this.setState({ isLoading: false });\n    }\n\n    chooseDay = (e) => {\n        const { year: yyyy, month: mm, day: dd } = this.state;\n        const { chooseDayFunction = () => {} } = this.props;\n\t\tconst day = e.target.parentElement.dataset.day || e.target.dataset.day;\n\t\tconst month = e.target.parentElement.dataset.month || e.target.dataset.month;\n\t\tconst year = e.target.parentElement.dataset.year || e.target.dataset.year;\n\t\t// console.log({ day, month, year });\n\n        if (year === yyyy && month === mm && day === dd) {\n            this.setState({\n                year: null,\n                month: null,\n                day: null,\n            });\n        } else {\n            this.setState({\n                year,\n                month,\n                day,\n            });\n        }\n        chooseDayFunction({ day, month, year });\n    }\n\n    componentDidMount() {\n        this.loadWorkoutSummary();\n    }\n\n    componentWillReceiveProps(nextProps) {\n        // console.log('componentWillReceiveProps', nextProps);\n        if (nextProps.month !== this.props.month\n            || nextProps.year !== this.props.year\n            || nextProps.dog !== this.props.dog\n            || nextProps.team !== this.props.team) {\n            this.loadWorkoutSummary(nextProps);\n        }\n    }\n\n    render() {\n        const { appState, userStore, workoutPlanStore } = this.props.stores;\n        const { user } = userStore;\n        const { language = 'en' } = user;\n        const DAYS = mu.getDays(language);\n        const MONTHS = mu.getMonths(language);\n\n        const { day: dd, month: mm, year: yyyy } = this.state;\n\n\t\tconst { darkmode } = appState;\n        \n        const currentDay = new Date().getDate();\n        const currentMonth = new Date().getMonth() + 1;\n        const currentYear = new Date().getFullYear();\n\n\t\tconst { month = currentMonth, year = currentYear, dog, basehref, hideSummary, hideTable } = this.props;\n\n\t\tconst seasonStart = parseInt(month < 8 ? year - 1 : year, 10);\n\n        const monthNum = parseInt(month, 10);\n        const yearNum = parseInt(year, 10);\n        const { month: nextMonth, year: nextYear } = mu.getNextMonth(monthNum, yearNum);\n        const { month: prevMonth, year: prevYear } = mu.getPrevMonth(monthNum, yearNum);\n\n        const daysOfMonth = util.getDaysInMonth(month, year);\n        const weeksInMonth = util.getWeeksInMonth(month, year);\n        const firstWeek = weeksInMonth[0].week;\n        const daysOfWeek = util.getDaysInWeek(firstWeek, year, month);\n        let totalDistanceKmMonth = 0;\n        let totalCountMonth = 0;\n        let totalElevationMonth = 0;\n        let totalDurationMonth = 0;\n        let totalSpeedavgMonth = [];\n\n        let totalPlanDistanceKmMonth = 0;\n\n        return (\n            <>\n                <div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-4 text-center'>\n                    <a href={`${basehref || '/workouts/month/'}${nextMonth}/${nextYear}/skipScroll`} class='float-right btn btn-sm btn-outline-secondary ml-2'><i class='fas fa-arrow-right' /></a>\n                    <a href={`${basehref || '/workouts/month/'}${prevMonth}/${prevYear}/skipScroll`} class='float-left btn btn-sm btn-outline-secondary mr-2'><i class='fas fa-arrow-left' /></a>\n                    <h3><Text id='workout.calendar.month'>Mned</Text> - {MONTHS[month - 1]} {year}</h3>\n                    <h5 class='text-muted font-weight-light'><Text id='workout.plan.season'>Sesongen</Text> {seasonStart} - {seasonStart + 1}</h5>\n                    {dog && <div>{dog.name}</div>}\n                    {/* <small>{util.isoDate(daysOfMonth[0], false, false, true)} - {util.isoDate(daysOfMonth[daysOfMonth.length - 1], false, false, true)}</small> */}\n                </div>\n\n                <div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-4'>\n\n                    {!hideTable && <>\n                        <table class='table table-striped table-sm'>\n                            <thead>\n                                <tr>\n                                    <th class='text-muted'><small><Text id='workout.calendar.week'>Uke</Text></small></th>\n                                    {daysOfWeek.map(day => <th><small>{DAYS[day.getDay()]}</small></th>)}\n                                    <th class='text-muted'><small><Text id='workout.calendar.sum'>Sum</Text></small></th>\n                                    {/* <th class='text-muted'>Totalt</th> */}\n                                </tr>\n                            </thead>\n                            <tbody>\n                                {weeksInMonth && weeksInMonth.map(weekObj => {\n                                    const daysOfWeek = util.getDaysInWeek(weekObj.week, year, month);\n                                    const summaryPlanWeek = workoutPlanStore.findWorkoutPlanSummaryWeek(parseInt(year, 10), weekObj.week) || {};\n                                    let totalWeek = 0;\n                                    return (\n                                        <tr>\n                                            <td class='text-right text-muted pt-3'>\n                                                <small>\n                                                    <a href={`/workouts/week/${weekObj.week}/${year}`} class='text-muted'>{weekObj.week}</a>\n                                                </small>\n                                            </td>\n                                            {daysOfWeek.map(day => {\n                                                const summary = userStore.findWorkoutSummaryWeekDay(day.getFullYear(), day.getMonth() + 1, day.getDate(), monthNum) || {};\n                                                const summaryPlanDay = workoutPlanStore.findWorkoutPlanSummaryDay(day.getFullYear(), day.getMonth() + 1, day.getDate(), monthNum) || {};\n                                                if (summary && summary.distanceKm) {\n                                                    totalWeek += summary.distanceKm;\n                                                    totalDistanceKmMonth += summary.distanceKm;\n                                                    totalCountMonth += summary.count;\n                                                    totalElevationMonth += summary.elevation;\n                                                    totalDurationMonth += summary.duration;\n                                                    totalSpeedavgMonth.push(summary.speedAvg);\n                                                }\n                                                if (summaryPlanDay && summaryPlanDay.distance) {\n                                                    totalPlanDistanceKmMonth += summaryPlanDay.distance;\n                                                }\n                                                const isChosen = (dd == day.getDate()) && (mm == day.getMonth() + 1) && (yyyy === day.getFullYear());\n                                                const isToday =  (currentDay == day.getDate()) && (currentMonth == day.getMonth() + 1) && (currentYear == day.getFullYear());\n                                                const isDayOff = RED_DAYS.indexOf(day.getDay()) > -1;\n                                                // console.log(summary);\n                                                // count: 1, day: 5, distanceKm: 10, duration: 3600, elevation: 200, month: 9, speedAvg: 12, year: 2020\n                                                return (\n                                                    <td class={`text-center font-weight-light position-relative pt-3 pb-3 ${isChosen ? 'calendarIsChosen' : ''} ${isToday ? 'calendarIsToday' : ''} ${isDayOff ? 'calendarIsWeekend' : ''}`}\n                                                        style={`font-size: 0.8em;`}\n                                                        onClick={this.chooseDay} data-day={day.getDate()} data-month={day.getMonth() + 1} data-year={year}\n                                                    >\n                                                        <div class='position-absolute text-muted' style='top: 0px; right: 2px; font-size: 0.7em;'>\n                                                            {day.getDate()}\n                                                        </div>\n                                                        {summary && summary.distanceKm ? \n                                                            <div class='rounded-pill w-100 px-1'\n                                                                style={`background-color: ${mu.getTrainingColor(summary, darkmode)};`}\n                                                            >\n                                                                <Distance stores={this.props.stores} value={summary.distanceKm} />\n                                                                {summary.count > 1 && (\n                                                                    <span class='position-absolute text-danger'\n                                                                        style='bottom: 0; right: 0px; font-size: 0.6em;'>\n                                                                        {summary.count}\n                                                                    </span>\n                                                                )}\n\n                                                            </div> : '-'}\n                                                        {summaryPlanDay.distance > 0 && (\n                                                            <span class='position-absolute text-primary'\n                                                                style='bottom: 0; left: 0px; font-size: 0.9em;'>\n                                                                <Distance stores={this.props.stores} value={summaryPlanDay.distance} />\n                                                            </span>\n                                                        )}\n                                                    </td>\n                                                );\n                                            })}\n                                            <td class='text-right pt-3 pb-3 position-relative' style='font-size: 0.8em;'>\n                                                <Distance stores={this.props.stores} value={totalWeek} />\n                                                {summaryPlanWeek.distance > 0 && (\n                                                    <span class='position-absolute text-primary'\n                                                        style='bottom: 0; left: 0px; font-size: 0.9em;'>\n                                                        <Distance stores={this.props.stores} value={summaryPlanWeek.distance} />\n                                                    </span>\n                                                )}    \n                                            </td>\n                                            {/* <td class='text-right text-muted pt-3'>{totalDistanceKmMonth}</td> */}\n                                        </tr>\n                                    );\n                                })}\n                            </tbody>\n                            <tfoot>\n                                <tr>\n                                    <td colspan='8' class='text-right'><Text id='workout.calendar.totalKm'>Totalt km</Text></td>\n                                    <td class='text-right text-muted pb-3 position-relative'>\n                                        <Distance stores={this.props.stores} value={totalDistanceKmMonth} />\n                                        {totalPlanDistanceKmMonth > 0 && (\n                                            <span class='position-absolute text-primary'\n                                                style='bottom: 0; left: 0px; font-size: 0.8em;'>\n                                                <Distance stores={this.props.stores} value={totalPlanDistanceKmMonth} />\n                                            </span>\n                                        )}\n                                    </td>\n                                </tr>\n                            </tfoot>\n                        </table>\n                    </>}\n\n                    {!hideSummary && <>\n                        <h5 class='mt-4'><Text id='workout.calendar.summary'>Oppsummering</Text> - {MONTHS[month - 1]} {year}</h5>\n                        {dog && <div>{dog.name}</div>}\n\n                        <table class='table table-striped table-sm'>\n                            <tbody>\n                                <tr>\n                                    <td class='text-muted'><Text id='workout.calendar.totalWorkouts'>Antall kter</Text></td>\n                                    <td class='text-right'>{totalCountMonth}</td>\n                                </tr>\n                                <tr>\n                                    <td class='text-muted'><Text id='workout.calendar.distance'>Distanse</Text></td>\n                                    <td class='text-right'>\n                                        <Distance stores={this.props.stores} value={totalDistanceKmMonth} />\n                                    </td>\n                                </tr>\n                                <tr>\n                                    <td class='text-muted'><Text id='workout.calendar.ascend'>Hydemeter</Text></td>\n                                    <td class='text-right'>\n                                        <Elevation stores={this.props.stores} value={totalElevationMonth} />\n                                    </td>\n                                </tr>\n                                <tr>\n                                    <td class='text-muted'><Text id='workout.calendar.duration'>Varighet</Text></td>\n                                    <td class='text-right'>\n                                        {util.secToHms(totalDurationMonth)}\n                                    </td>\n                                </tr>\n                                <tr>\n                                    <td class='text-muted'><Text id='workout.calendar.avg-speed'>Gjennomsnittsfart</Text></td>\n                                    <td class='text-right'>\n                                        <Speed stores={this.props.stores} value={mu.avgArr(totalSpeedavgMonth)} />\n                                    </td>\n                                </tr>\n                            </tbody>\n                        </table>\n                    </>}\n                </div>\n            </>\n        );\n    }\n}\n\nexport default WorkoutCalendar;\n","import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport { Text, Localizer, withText } from 'preact-i18n';\n\n@observer\nclass WorkoutSummary extends Component {\n    render() {\n        const { summary = {} } = this.props;\n\n        return (\n            <div class='w-100 mb-3'>\n                <div class='row'>\n                    <div class='col-12 col-sm-8 col-lg-6 offset-sm-2 offset-lg-3 d-flex mb-0 position-relative'>\n                        {/* {JSON.stringify(workout, null, 4)} */}\n                        <div class={`text-center border rounded-circle imageRounded`}>\n                            <div class={`text-muted mt-2`} style='font-size: 40px; line-height: 1;'>{summary.week}</div>\n                            <div class={`text-muted`} style='font-size: 10px; line-height: 0.8em;'>{summary.year}</div>\n                        </div>\n                        <div class='flex-grow-1 pl-3'>\n                            <h5 class='my-0'>{summary.week} - {summary.year}</h5>\n                            <small class='text-muted'>\n                                <i class='fas fa-wave-square' /> {summary.count}\n                                <i class='fas fa-road ml-2' /> {util.format(summary.distanceKm, 0)}km\n                                <i class='fas fa-mountain ml-2' /> {util.format(summary.elevation, 0)}m\n                                <i class='fas fa-stopwatch ml-2' /> {util.secToHms(summary.duration)}\n                                <i class='fas fa-tachometer-alt ml-2' /> {util.format(summary.speedAvg, 1)}km/t\n                            </small>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        );\n    }\n}\n\nexport default WorkoutSummary;\n","import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport { Text, Localizer, withText } from 'preact-i18n';\nimport linkState from 'linkstate';\n\nimport style from '../style.css';\nimport mu from '../../lib/musher-util';\n\n@observer\nclass WorkoutCommentReply extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            sendButtonEnabled: true,\n        };\n        this.inputRef = {};\n    }\n\n    commentWorkout = async () => {\n        const { sendButtonEnabled } = this.state;\n        if (!sendButtonEnabled) {\n            return false;\n        }\n        const { callback = () => {}, commentId, inputRefObject = {} } = this.props;\n        const { workout } = this.props;\n\t\tconst { workoutStore } = this.props.stores;\n        const { comment = '' } = this.state;\n        this.setState({ sendButtonEnabled: false });\n\t\tconst response = await workoutStore.commentReplyWorkout({ id: workout.id, commentId, comment });\n\t\tif (response && response.status === 200) {\n            this.setState({\n                comment: '',\n            }, () => {\n                mu.resizeTextarea(inputRefObject[commentId]);\n            });\n            callback({ workout, response, commentId });\n\t\t}\n        this.setState({ sendButtonEnabled: true });\n\t}\n\n    render() {\n        const { inputRef } = this.props;\n        const { comment, sendButtonEnabled } = this.state;\n        const { userStore } = this.props.stores;\n        const { user = {} } = userStore;\n        const displayNameShort = user.firstname ? `${util.ucfirst(user.firstname, true)}${util.ucfirst(user.lastname, true)}` : `${util.ucfirst(user.email || '', true)}`;\n        // const displayName = user.firstname ? `${user.firstname} ${user.lastname}` : `${user.email}`;\n        const userImage = user.image || (user.images ? user.images[0] : undefined);\n\n        return (\n            <div class='w-100'>\n                <div class='d-flex mb-0 position-relative w-100'>\n                    <div \n                        class={`text-center border rounded-circle imageRounded imageRoundedThumb`}\n                        style={`${userImage ? `background-image: url('${userImage.s3SmallLink}'); background-size: cover;` : ''} border-width: 3px !important;`}\n                    >\n                        {!userImage && <span class='font-weight-lighter' style='font-size: 15px;'>{displayNameShort}</span>}\n                    </div>\n                    <div class='col pl-3' style='line-height: 1.2em;'>\n\n                        <div class='d-flex bd-highlight'>\n                            <div class='p-0 w-100 bd-highlight'>\n                                <label class='sr-only' for='inlineFormInput'><Text id='comments.comment'>Kommentar</Text></label>\n                                <div class='border rounded rounded-lg position-relative'>\n                                    <Localizer>\n                                        <textarea\n                                            class='form-control-plaintext px-2'\n                                            type='text'\n                                            placeholder={<Text id='comments.write-comment'>Skriv en kommentar...</Text>}\n                                            onInput={linkState(this, 'comment')}\n                                            onKeyUp={mu.resizeTextarea}\n                                            style='height: 2.3em;'\n                                            value={comment}\n                                            ref={inputRef}\n                                        />\n                                    </Localizer>\n                                </div>\n                            </div>\n                            <div class='p-0 pl-2 flex-shrink-1 bd-highlight'>\n                                <button type='button' class={`btn btn-${sendButtonEnabled ? 'primary' : 'secondary'} mb-2`} disabled={!sendButtonEnabled}\n                                    onClick={this.commentWorkout}\n                                ><i class='fas fa-paper-plane' /></button>\n                            </div>\n                        </div>\n\n                    </div>\n                </div>\n            </div>\n        );\n    }\n}\n\nexport default WorkoutCommentReply;\n","import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport { Text, Localizer, withText } from 'preact-i18n';\n\nimport Speed from '../../components/data/speed';\nimport Elevation from '../../components/data/elevation';\nimport Weight from '../../components/data/weight';\nimport Distance from '../../components/data/distance';\nimport Temperature from '../../components/data/temperature';\n\n@observer\nclass Garmin extends Component {\n    toggleDate = (e) => {\n        e.stopPropagation();\n        e.preventDefault();\n        const { showDate } = this.state;\n        this.setState({ showDate: !showDate });\n    }\n\n    ignoreGarminWorkout = async (e) => {\n        e.stopPropagation();\n        const id = e.target.parentElement.dataset.id || e.target.dataset.id;\n        const { garminActivityDetailsStore } = this.props.stores;\n\t\tawait garminActivityDetailsStore.ignoreWorkout(id);\n        this.loadGarminActivities();\n    }\n\n    importGarminWorkout = async (e) => {\n        e.stopPropagation();\n        const id = e.target.parentElement.dataset.id || e.target.dataset.id;\n        const { asTrack } = this.props;\n        const { garminActivityDetailsStore, workoutStore } = this.props.stores;\n\t\tconst { currentTeam } = workoutStore;\n        if (asTrack) {\n            await garminActivityDetailsStore.importTrack(id, currentTeam);\n        } else {\n            await garminActivityDetailsStore.importWorkout(id, currentTeam);\n        }\n        this.loadGarminActivities();\n        this.loadWorkouts();\n    }\n\n    async loadGarminActivities() {\n\t\tconst { garminActivityDetailsStore } = this.props.stores;\n\t\tgarminActivityDetailsStore.load({ query: { hideImported: 1 }});\n\t}\n\n    loadWorkouts = async () => {\n\t\tconst { workoutStore } = this.props.stores;\n\t\tconst { currentTeam } = workoutStore;\n\t\tawait workoutStore.load({ query: { team: currentTeam } });\n\t}\n\n    toggleDetail = () => {\n        const { showDetail = false } = this.state;\n        this.setState({\n            showDetail: !showDetail,\n        });\n    }\n\n    componentDidMount() {\n\t\tthis.loadGarminActivities();\n\t}\n\n    render() {\n        const { showDate, showDetail = false } = this.state;\n        const { activities = [], showDate: forceShowDate, asTrack = false } = this.props;\n\t\tconst { userStore, workoutStore } = this.props.stores;\n        const { currentTeam } = workoutStore;\n        const { team } = userStore;\n\n        const selectedTeam = userStore.findTeam(currentTeam || team.id);\n\n        if (!showDetail) {\n            if (activities && activities.length > 0) {\n                return (<>\n                    <div class='col-12 mb-3'>\n                        <button type='button' class='btn btn-block btn-outline-info' onClick={this.toggleDetail}>\n                            <div class={`float-right ml-2 text-center border rounded-circle imageRounded imageRoundedIcon`} style={`background-image: url('./assets/garmin-connect.png');`} />\n                            <Text id='workout.index.garmin-workouts'>Garmin workouts / not imported</Text> {activities.length}\n                        </button>\n                    </div>\n                </>);\n            }\n            return (<></>);\n        }\n\n        return (<>\n            <div class='col-12 mb-3'>\n                <div class='row'>\n                    {activities && activities.length > 0 && (\n                        <div\n                            class='col-12 border-top border-bottom pt-3 pb-3 my-2 bg-light'\n                        >\n                            <button type='button' class='float-right btn btn-sm btn-link' onClick={this.toggleDetail}>\n                                <i class='fas fa-caret-up' /> <Text id='garmin.hide-list'>Hide list</Text>\n                            </button>\n                            <h5><Text id='workout.index.garmin-workouts'>Garmin workouts / not imported</Text> {activities.length}</h5>\n                            {activities && activities.map(activity => {\n                                const { summary = {} } = activity;\n                                const startDate = util.parseInputDate(summary.startTimeInSeconds);\n\n                                return (<>\n                                    {/* <td>{util.secToHms(activity.moving_time)}</td> */}\n                                    {/* <td>{util.secToHms(activity.elapsed_time)}</td> */}\n\n                                    {/* {\n                                        \"durationInSeconds\": 616,\n                                        \"startTimeInSeconds\": 1602065947,\n                                        \"startTimeOffsetInSeconds\": 7200,\n                                        \"activityType\": \"ROAD_BIKING\",\n                                        \"averageSpeedInMetersPerSecond\": 0.152,\n                                        \"averagePaceInMinutesPerKilometer\": 109.649124, \n                                        \"activeKilocalories\": 1, \n                                        \"deviceName\": \"edge1000\", \n                                        \"distanceInMeters\": 94.02, \n                                        \"maxPaceInMinutesPerKilometer\": 14.6455765, \n                                        \"maxSpeedInMetersPerSecond\": 1.138, \n                                        \"startingLatitudeInDegree\": 61.00674974732101, \n                                        \"startingLongitudeInDegree\": 9.975536987185478, \n                                        \"totalElevationLossInMeters\": 2\n                                    } */}\n\n                                    <div class='col-12 d-flex mb-4 position-relative'>\n                                        <div class={`text-center border rounded-circle imageRounded`} style={`background-image: url(\"./assets/garmin-connect.png\"); border-width: 3px !important;`}>\n                                            &nbsp;\n                                        </div>\n                                        <div class='flex-grow-1 pl-3' style='line-height: 1.2em;'>\n                                            <h5 class='my-0 mb-1' style='line-height: 1.0em;'>{summary.deviceName}</h5>\n                                            {summary.activityType}<br />\n                                            <small class='text-muted'>\n                                                {startDate && <small onClick={this.toggleDate}>\n                                                    {forceShowDate || showDate ? util.formatDate(startDate, { locale: 'no-NB' }) : util.formatDistance(startDate, new Date(), { locale: 'no-NB' })}\n                                                </small>}\n                                                <span class='text-muted'>\n                                                    <i class='fas fa-road ml-2' /> <Distance stores={this.props.stores} value={summary.distanceInMeters / 1000} />\n                                                    <i class='fas fa-mountain ml-2' /> <Elevation stores={this.props.stores} value={summary.totalElevationGainInMeters} />\n                                                    <i class='fas fa-tachometer-alt ml-2' /> <Speed stores={this.props.stores} value={summary.averageSpeedInMetersPerSecond * 3.6} />\n                                                    <i class='fas fa-stopwatch ml-2' /> {util.secToHms(summary.durationInSeconds)}\n                                                </span>\n                                            </small>\n                                            <br />\n                                            <button class='btn btn-sm btn-block btn-primary' onClick={this.importGarminWorkout} data-id={activity.id}>\n                                                <i class='fas fa-file-import' /> {asTrack ? <Text id='garmin.import-track'>Import as track</Text> : <><Text id='garmin.import'>Import workout</Text> <i class='fas fa-arrow-right' /> {selectedTeam}</>} \n                                            </button>\n                                            <button class='btn btn-sm btn-link' onClick={this.ignoreGarminWorkout} data-id={activity.id}>\n                                                <i class='fas fa-trash-alt' /> <Text id='garmin.ignore'>Ignore workout</Text>\n                                            </button>\n                                        </div>\n                                    </div>\n                                </>);\n                            })}\n\n                            <button type='button' class='btn btn-block btn-primary mt-3' onClick={this.toggleDetail}>\n                                <i class='fas fa-caret-up' /> <Text id='garmin.hide-list'>Hide list</Text>\n                            </button>\n                        </div>\n                    )}\n\n                </div>\n            </div>\n        </>);\n    }\n}\n\nexport default Garmin;\n","import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport { Text, Localizer } from 'preact-i18n';\n\nimport mu from '../../lib/musher-util';\n\nfunction displayDistance(distance) {\n\tif (distance < 5) {\n\t\treturn util.format(distance, 2);\n\t}\n\tif (distance < 10) {\n\t\treturn util.format(distance, 1);\n\t}\n\treturn util.format(distance, 1);\n}\n\nfunction kmToMiles(value) {\n    return 0.621371 * value;\n}\n\n@observer\nclass Distance extends Component {\n    render() {\n\t\tconst { value = 0, smallUnit } = this.props;\n\t\tconst { userStore } = this.props.stores;\n\t\tconst { user } = userStore;\n\t\tconst { settings = {} } = user;\n\n        if (settings.imperial) {\n            return (<>\n                <nobr>\n\t\t\t\t\t{displayDistance(kmToMiles(value))} {smallUnit ? <><small><small><small class='ml-0 text-muted'>mi</small></small></small></> : <>mi</>}\n\t\t\t\t</nobr>\n            </>);\n        }\n\n\t\treturn (<>\n\t\t\t<nobr>\n\t            {displayDistance(value)} {smallUnit ? <><small><small><small class='ml-0 text-muted'>km</small></small></small></> : <>km</>}\n\t\t\t</nobr>\n\t    </>);\n    }\n}\n\nexport default Distance;\n","import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport { Text, Localizer, withText } from 'preact-i18n';\n\nimport style from '../style.css';\nimport mu from '../../lib/musher-util';\n\n@observer\nclass WorkoutStatus extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {};\n    }\n\n    async loadAll(props = this.props) {\n        // await Promise.all([\n        //     this.loadTeams(props),\n        //     this.loadWorkoutPlans(props),\n        //     this.loadWorkoutSummary(props),\n        // ]);\n    }\n\n    async loadTeams(props = this.props) {\n\t\tconst { teamStore } = props.stores;\n\n        const currentMonth = new Date().getMonth() + 1;\n        const currentYear = new Date().getFullYear();\n\n\t\tconst { month = currentMonth, year = currentYear, currentTeam } = props;\n\t\tawait teamStore.load({ query: { team: currentTeam, skipMusherWorkoutSummary: true, year, month }, addData: ['workoutSummary'] });\n\t}\n\n    loadWorkoutPlans = async (props = this.props) => {\n\t\tconst { workoutPlanStore } = props.stores;\n\n\t\tconst currentMonth = new Date().getMonth() + 1;\n        const currentYear = new Date().getFullYear();\n\t\tconst { year = currentYear, month = currentMonth, currentTeam } = props;\n\t\tconst seasonStart = parseInt(year || (month < 8 ? year - 1 : year), 10);\n\n\t\tif (currentTeam) {\n\t\t\tawait workoutPlanStore.load({ query: {\n\t\t\t\tteam: currentTeam,\n\t\t\t\tseasonYear: seasonStart,\n\t\t\t\tseasonMonth: 6,\n\t\t\t} });\n\t\t\tconst { workoutPlans } = workoutPlanStore;\n\t\t\tconst workoutPlanCurrent = workoutPlans[0] || {};\n\t\t\tif (workoutPlanCurrent.id) {\n\t\t\t\tawait workoutPlanStore.load(workoutPlanCurrent.id);\n\t\t\t}\n\t\t}\n\t}\n\n    async loadWorkoutSummary(props = this.props) {\n        const { year, currentTeam, dog } = props;\n\t\tconst { userStore } = props.stores;\n        await userStore.getWorkoutSummary({ team: currentTeam, year, dog });\n    }\n\n\tcomponentDidMount() {\n\t\tthis.loadAll();\n\t}\n\n    componentWillReceiveProps(nextProps) {\n        if (nextProps.year !== this.props.year || nextProps.currentTeam !== this.props.currentTeam) {\n            this.loadAll(nextProps);\n        }\n    }\n\n    render() {\n\t\tconst { currentSeason, prevSeason, currentTeam } = this.props;\n\n        const { userStore, workoutPlanStore, teamStore } = this.props.stores;\n        const { workoutPlan } = workoutPlanStore;\n        const { user, workoutSummaryTeam } = userStore;\n        const { language = 'en' } = user;\n\t\tconst MONTHS = mu.getMonths(language);\n\n\t\tconst team = teamStore.findTeam(currentTeam) || {};\n\n        const currentMonth = new Date().getMonth() + 1;\n        const currentYear = new Date().getFullYear();\n\n        const { year = currentYear, month = currentMonth } = this.props;\n\t\tconst seasonStart = parseInt(month < 8 ? year - 1 : year, 10);\n        const months = util.monthRange(`${seasonStart}-08-01`, `${seasonStart + 1}-07-31`);\n        let lastPlanMonth;\n\n        return (\n            <div class='container-fluid mb-2'>\n                <div class='row mt-2'>\n                    <div class='col-12'>\n                        <h5>\n                            <span style='display: none;'>{workoutPlan.id}</span>\n                            <Text id='workout.totals.title'>Treningsplanstatus</Text>\n                        </h5>\n                    </div>\n                </div>\n                <div class='row mt-2 border-bottom pb-2'>\n                    {months && months.map((month) => {\n                        if (month.year > year || (month.year === year && month.month >= month)) {\n                            return '';\n                        }\n                        const planMonth = workoutPlanStore.sumWorkoutPlanMonth(month.year, month.month + 1);\n                        if (!planMonth) {\n                            return '';\n                        }\n                        lastPlanMonth = planMonth;\n                        const summaryMonth = userStore.findWorkoutSummaryMonth(month.year, month.month + 1);\n                        const percCompleted = summaryMonth / planMonth * 100;\n                        const height = percCompleted > 100 ? 100 : util.format(percCompleted, 0);\n                        return (\n                            <div class='col-3 text-center'>\n                                {/* <div class='w-100 mt-1'>\n                                    <small class='text-muted'>\n                                        {planMonth}km\n                                    </small>\n                                    <small class='text-info'>\n                                        {summaryMonth}km\n                                    </small>\n                                </div> */}\n                                <div class='px-auto w-100 clearfix'>\n                                    <div class={`progress ${style['progress-bar-vertical']}`}\n                                        style={' margin-left: calc(50% - 20px);'}\n                                    >\n                                        <div class='progress-bar progress-bar-striped bg-success' role='progressbar'\n                                            style={`height: ${height}%; width: 40px;`}\n                                            aria-valuenow={height} aria-valuemin='0' aria-valuemax='100'\n                                        >\n                                            {util.format(percCompleted, 0)}%\n                                        </div>\n                                    </div>\n                                </div>\n                                <div class='w-100 mt-1'>\n                                    {MONTHS[month.month]} {month.year}\n                                </div>\n                            </div>\n                        );\n                    })}\n                    {!lastPlanMonth && <div class='col-12 text-center text-muted mb-5'>\n                        <div class='display-1'>\n                            <i class='far fa-sad-tear' />\n                        </div>\n                        <h3 class='font-weight-lighter'>\n                            <Text id='workout.plan.no-workout-plan-found' fields={{ name: team.name }}>Ingen treningsplaner funnet for team {team.name}.</Text>\n                        </h3>\n                        <a class='btn btn-success btn-lg mt-3' href='/workouts/plan'><i class='fas fa-calendar-alt' /> <Text id='workout.plan.new'>New workoutplan</Text></a>\n                    </div>}\n                </div>\n\n            </div>\n        );\n    }\n}\n\nexport default WorkoutStatus;\n","import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport { Text, Localizer, withText } from 'preact-i18n';\n\nimport mu from '../../lib/musher-util';\nconst MARGIN_TOP = mu.marginTop(true);\nconst MARGIN_BOTTOM = mu.marginBottom();\nconst SUB_MENU_MARGIN_TOP = mu.subMenuMarginTop();\n\nimport Workout from '../../components/workout';\nimport WorkoutSummary from '../../components/workout/summary';\nimport WorkoutTotals from '../../components/workout/totals';\nimport WorkoutStatus from '../../components/workout/status';\nimport WorkoutGraph from '../../components/workout/graph';\nimport WorkoutTable from '../../components/workout/table';\nimport WorkoutCalendar from '../../components/workout/calendar';\nimport Teams from '../../components/team/teams';\nimport Gauge from '../../components/gauge';\nimport CalendarPlan from '../../components/workout/calendarPlan';\nimport Strava from '../../components/strava';\nimport Garmin from '../../components/garmin';\nimport Ad from '../../components/ad/';\n\nimport Speed from '../../components/data/speed';\nimport Elevation from '../../components/data/elevation';\nimport Weight from '../../components/data/weight';\nimport Distance from '../../components/data/distance';\nimport Temperature from '../../components/data/temperature';\n\nimport ScrollIntoView from '../../components/util/scrollIntoView';\n\nimport FastList from '../../components/team/fastList';\n\nfunction kmToMiles(value) {\n    return util.format(0.621371 * value, 1);\n}\n\nconst initialState = {\n\tloadedTime: 0,\n\tisLoading: false,\n\toffset: 0,\n\tlimit: 5,\n\tsubmenu: 'totals',\n\tworkoutFilter: () => true,\n\tsessionid: new Date().getTime(),\n};\n\nconst dataFields = ['id', 'type', 'user', 'team', 'title'];\n\n@observer\nclass Workouts extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            ...initialState,\n        };\n    }\n\n\tloadAll = async (props = this.props) => {\n\t\tconst { limit, offset } = this.state;\n\t\tthis.setState({ isLoading: true });\n\t\tconst { workoutStore, userStore, messageStore } = props.stores;\n\t\tconst { currentTeam } = workoutStore;\n\n\t\t// const currentMonth = new Date().getMonth() + 1;\n        // const { month = currentMonth, year = util.getYear(), team = currentTeam, dog = {} } = props;\n\n\t\t// const { year } = props;\n\t\tconst currentMonth = new Date().getMonth() + 1;\n        const currentYear = new Date().getFullYear();\n\t\tconst { month = currentMonth, year = currentYear } = props;\n\n        // await userStore.getInfo();\n\t\tawait Promise.all([\n\t\t\tthis.loadWorkouts({ team: currentTeam, year, month, limit, offset }),\n\t\t\tthis.loadWorkoutSummary(props),\n\t\t\tthis.loadWorkoutPlans(props),\n\t\t\tuserStore.getNotifications(),\n\t\t\tmessageStore.getUnReadMessages(),\n\t\t\tthis.loadStravaActivities(),\n\t\t\tthis.loadGarminActivities(),\n\t\t\tthis.loadTeams(props),\n\t\t]);\n\t\tthis.setState({\n\t\t\tloadedTime: new Date().getTime(),\n\t\t\tisLoading: false,\n\t\t});\n\t}\n\n\tchangeTeam = () => {\n        this.loadAll();\n\t}\n\n\tloadWorkouts = ({ team, year, month, limit, offset }) => {\n\t\tconst { workoutStore } = this.props.stores;\n\t\tconst append = offset > 0;\n\t\tworkoutStore.load({\n\t\t\tquery: {\n\t\t\t\tteam,\n\t\t\t\tyear,\n\t\t\t\tmonth,\n\t\t\t},\n\t\t\tlimit,\n\t\t\toffset,\n\t\t\taddData: ['publicTeams', 'publicUsers'],\n\t\t}, append);\n\t}\n\n    setLoadMore = () => {\n        const { workoutStore } = this.props.stores;\n\t\tconst { currentTeam } = workoutStore;\n\t\tconst currentMonth = new Date().getMonth() + 1;\n        const currentYear = new Date().getFullYear();\n\t\tconst { month = currentMonth, year = currentYear } = this.props;\n\n        workoutStore.setLoadMore(() => {\n            let { limit, offset } = this.state;\n            offset += limit;\n            this.setState({ offset });\n            this.loadWorkouts({ team: currentTeam, year, month, limit, offset });\n        });\n    }\n\n    unsetLoadMore = () => {\n        const { workoutStore } = this.props.stores;\n        workoutStore.setLoadMore(() => {});\n    }\n\n\tasync loadTeams(props = this.props) {\n\t\tconst { teamStore, workoutStore } = props.stores;\n\t\tconst { currentTeam } = workoutStore;\n\n\t\tconst currentMonth = new Date().getMonth() + 1;\n        const currentYear = new Date().getFullYear();\n\n\t\tconst { month = currentMonth, year = currentYear } = props;\n\t\tawait teamStore.load({ query: { team: currentTeam, skipMusherWorkoutSummary: true, year, month }, addData: ['workoutSummary'] });\n\t}\n\n\tasync loadStravaActivities() {\n\t\tconst { stravaActivityStore } = this.props.stores;\n\t\tstravaActivityStore.load({ query: { hideImported: 1 }});\n\t}\n\n\tasync loadGarminActivities() {\n\t\tconst { garminActivityDetailsStore } = this.props.stores;\n\t\tgarminActivityDetailsStore.load({ query: { hideImported: 1 }});\n\t}\n\n\tloadWorkoutPlans = async (props = this.props) => {\n\t\tthis.setState({ isLoading: true });\n\n\t\tconst currentMonth = new Date().getMonth() + 1;\n        const currentYear = new Date().getFullYear();\n\n\t\tconst { year = currentYear, month = currentMonth } = props;\n\t\tconst seasonStart = (month < 8 ? year - 1 : year);\n\n\t\tconst { workoutPlanStore, workoutStore, userStore } = props.stores;\n\t\tconst { currentTeam } = workoutStore;\n\n\t\tconst { user } = userStore;\n        const { settings = {} } = user;\n\t\tconst { imperial } = settings;\n\n\t\t// workoutPlanStore.updateItem('workoutPlans', []);\n\t\t// workoutPlanStore.updateItem('workoutPlan', {});\n\t\t// workoutPlanStore.resetGraphPlanWeekDistanceCurrent();\n\n\t\tif (currentTeam) {\n\t\t\tawait workoutPlanStore.load({\n\t\t\t\tquery: {\n\t\t\t\t\tteam: currentTeam,\n\t\t\t\t\tseasonYear: seasonStart,\n\t\t\t\t},\n\t\t\t\taddData: ['tips'],\n\t\t\t});\n\t\t\tconst { workoutPlans } = workoutPlanStore;\n\t\t\tconst workoutPlanCurrent = workoutPlans[0] || {};\n\t\t\tif (workoutPlanCurrent.id) {\n\t\t\t\tawait workoutPlanStore.load(workoutPlanCurrent.id);\n\t\t\t\tworkoutPlanStore.prepareWeekGraphs({ year, imperial });\n\t\t\t} else {\n\t\t\t\tworkoutPlanStore.updateKeyValue('workoutPlan', {});\n\t\t\t\tworkoutPlanStore.updateKeyValue('workoutPlans', []);\n\t\t\t\tworkoutPlanStore.resetGraphPlanWeekDistanceCurrent();\n\t\t\t}\n\t\t}\n\t\tthis.setState({ isLoading: false });\n\t}\n\n\tasync loadWorkoutSummary(props = this.props) {\n\t\tconst { userStore, workoutStore } = props.stores;\n\n\t\tconst currentMonth = new Date().getMonth() + 1;\n        const currentYear = new Date().getFullYear();\n\t\tconst { month = currentMonth, year = currentYear } = props;\n\n\t\tconst { currentTeam } = workoutStore;\n        await userStore.getWorkoutSummary({ team: currentTeam, year, month });\n\t\t// await userStore.getWorkoutSummaryDay({ month, year, team: currentTeam });\n\t\t// await userStore.getWorkoutSummaryDay({ month, year: year - 1, team: currentTeam });\n\t\tawait userStore.getWorkoutSummaryDay({ daysBack: 500, team: currentTeam });\n    }\n\n\tchooseSubmenu = (e) => {\n\t\tconst submenu = e.target.parentElement.dataset.menu || e.target.dataset.menu;\n\t\tthis.setState({ submenu });\n\t}\n\n\tchooseDay = ({ day, month, year }) => {\n\t\tconst { dd, mm, yyyy } = this.state;\n\t\tif (dd === day && mm === month && yyyy === year) {\n\t\t\treturn this.setState({\n\t\t\t\tworkoutFilter: () => true,\n\t\t\t\tdd: null,\n\t\t\t\tmm: null,\n\t\t\t\tyyyy: null,\n\t\t\t});\n\t\t}\n\t\tthis.setState({\n\t\t\tdd: day,\n\t\t\tmm: month,\n\t\t\tyyyy: year,\n\t\t\tworkoutFilter: (w) => {\n\t\t\t\tconst date = new Date(w.date);\n\t\t\t\tconst d = date.getDate();\n\t\t\t\tconst m = date.getMonth() + 1;\n\t\t\t\tconst y = date.getFullYear();\n\t\t\t\treturn d === parseInt(day, 10) && m === parseInt(month, 10) && y === parseInt(year, 10);\n\t\t\t},\n\t\t});\n\t}\n\n\trenderContent = ({ obj, idx }) => {\n        const { appState } = this.props.stores;\n        const { path } = appState;\n        const { hashtag } = this.props;\n\n        return (<>\n\t\t\t<Workout\n\t\t\t\tstores={this.props.stores}\n\t\t\t\tworkout={obj}\n\t\t\t\tshowDate={true}\n\t\t\t\twrapperClasses={'w-100'}\n\t\t\t\twrapperClassesRow={''}\n\t\t\t/>\n        </>);\n    }\n\n\t// Scroll views timer\n    setupIntersection = () => {\n        this.setState({\n            handleIntersection: mu.intersectionObserverCallback,\n        });\n        const { workoutStore } = this.props.stores;\n        this.scrollViewTimer = setInterval(() => workoutStore.postScrollview(mu.getIntersectionObserverHistory()), 30 * 1000);\n    }\n\n\tcomponentWillMount() {\n        this.setupIntersection();\n    }\n\n\tcomponentWillUnmount() {\n        const { workoutStore, stravaActivityStore, garminActivityDetailsStore } = this.props.stores;\n        workoutStore.postScrollview(mu.getIntersectionObserverHistory());\n        clearInterval(this.scrollViewTimer);\n        this.unsetLoadMore();\n\t\t// workoutStore.cleanupMemory();\n    }\n\t// /Scroll views timer\n\n\tcomponentDidMount() {\n\t\tconst { appState } = this.props.stores;\n\t\tthis.loadAll();\n\t\t// this.loadDogs();\n\t\t// this.loadTracks();\n\t\tappState.checkCordova();\n\t\tthis.setLoadMore();\n\t}\n\n\tcomponentWillReceiveProps(nextProps) {\n        // console.log('componentWillReceiveProps', nextProps);\n        if (nextProps.month !== this.props.month\n            || nextProps.year !== this.props.year\n            || nextProps.team !== this.props.team) {\n            this.loadAll(nextProps);\n        }\n    }\n\n\trender() {\n        const { scrolledDown } = this.props;\n\t\tconst { isLoading, submenu, handleIntersection, sessionid, loadedTime } = this.state;\n\t\tconst { userStore, appState, workoutStore, workoutPlanStore,\n\t\t\tstravaActivityStore, garminActivityDetailsStore } = this.props.stores;\n\t\tconst { workoutPlan, workoutPlans } = workoutPlanStore;\n\n\t\tconst { user, workoutSummaryWeekDay = [] } = userStore;\n        const { language = 'en', settings = {} } = user;\n        const MONTHS = mu.getMonths(language);\n\n\t\tconst currentMonth = new Date().getMonth() + 1;\n        const currentYear = new Date().getFullYear();\n\n\t\tconst { month = currentMonth, year = currentYear } = this.props;\n\t\tconst seasonStart = parseInt(month < 8 ? year - 1 : year, 10);\n\t\n\t\tconst { currentTeam } = workoutStore;\n\t\tconst currentTeamObject = userStore.findTeam(currentTeam, true);\n\n\t\tconst { darkmode } = appState;\n\t\tconst { workouts, cordovaActiveTrackingParams, isRunning, totalDistance, currentSpeed, totalTime } = workoutStore;\n\n\t\tconst { workoutFilter } = this.state;\n\t\tconst workoutsFiltered = workouts.filter(workoutFilter);\n\n\t\tconst planMonth = workoutPlanStore.sumWorkoutPlanMonth(parseInt(year, 10), parseInt(month, 10)) || 0;\n\t\tconst summaryMonth = userStore.findWorkoutSummaryMonth(parseInt(year, 10), parseInt(month, 10), 'distanceKm', true) || 0;\n\t\tlet percentComplete;\n\t\tif (planMonth) {\n\t\t\tpercentComplete = Math.floor(summaryMonth / planMonth * 100);\n\t\t}\n\t\tconst totalCountMonth = userStore.findWorkoutSummaryMonth(parseInt(year, 10), parseInt(month, 10), 'count', true) || 0;\n\t\tconst totalDistanceKmMonth = userStore.findWorkoutSummaryMonth(parseInt(year, 10), parseInt(month, 10), 'distanceKm', true) || 0;\n\t\tconst totalDurationMonth = userStore.findWorkoutSummaryMonth(parseInt(year, 10), parseInt(month, 10), 'duration', true) || 0;\n\t\tconst totalSpeedavgMonth = userStore.findWorkoutSummaryMonth(parseInt(year, 10), parseInt(month, 10), 'speedAvg', true) || 0;\n\t\tconst totalElevationMonth = userStore.findWorkoutSummaryMonth(parseInt(year, 10), parseInt(month, 10), 'elevation', true) || 0;\n\n\t\tconst { stravaActivities = [] } = stravaActivityStore;\n\t\tconst { garminActivityDetails = [] } = garminActivityDetailsStore;\n\n\t\treturn (\n\t\t\t<div class='container-fluid' style={`margin-bottom: ${MARGIN_BOTTOM}; margin-top: ${MARGIN_TOP};`}>\n\t\t\t\t<div class='row fixed-top pt-2' style={`margin-top: ${scrolledDown > 0 ? 0 : SUB_MENU_MARGIN_TOP}; background-color: ${darkmode ? '#191d21' : '#f8f9fa'}; transition: all 0.3s ease-in-out;`}>\n\t\t\t\t\t<div class='col text-center border-bottom border-primary subtopmenu'>\n\t\t\t\t\t\t<a href='/workouts/' class='text-primary stretched-link'><nobr><i class='fas fa-chart-line' /> <Text id='workout.index.dashboard'>Oversikt</Text></nobr></a>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class='col text-center subtopmenu'>\n\t\t\t\t\t\t<a href='/workouts/list' class='text-secondary stretched-link'><nobr><i class='fas fa-list' /> <Text id='workout.index.list'>Liste</Text></nobr></a>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class='col text-center subtopmenu'>\n\t\t\t\t\t\t<a href='/workouts/plan' class='text-secondary stretched-link'><nobr><i class='fas fa-calendar-alt' /> <Text id='workout.index.plan'>Plan</Text></nobr></a>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\n\t\t\t\t{/* <xmp>\n\t\t\t\ttotalTime: {totalTime}<br />\n\t\t\t\tcordovaActiveTrackingParams: {JSON.stringify(cordovaActiveTrackingParams)}<br />\n\t\t\t\t</xmp> */}\n\n\t\t\t\t{isRunning && cordovaActiveTrackingParams && <>\n\t\t\t\t\t<div class='row'>\n\t\t\t\t\t\t<div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 border-bottom bg-light py-4'>\n\t\t\t\t\t\t\t<h1 class='text-success font-weight-bold'>\n\t\t\t\t\t\t\t\tTracking\n\t\t\t\t\t\t\t\t<div class='spinner-grow ml-3' role='status' />\n\t\t\t\t\t\t\t</h1>\n\t\t\t\t\t\t\t<div class='row mb-3'>\n\t\t\t\t\t\t\t\t<div class='col-4 text-center font-weight-bold' style='font-size: 1.3em;'>{util.secToHms(totalTime)}</div>\n\t\t\t\t\t\t\t\t<div class='col-4 text-center font-weight-bold' style='font-size: 1.3em;'>\n\t\t\t\t\t\t\t\t\t<Speed stores={this.props.stores} value={currentSpeed * 3.6} />\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class='col-4 text-center font-weight-bold' style='font-size: 1.3em;'>\n\t\t\t\t\t\t\t\t\t<Distance stores={this.props.stores} value={totalDistance / 1000} />\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<a class='btn btn-block btn-danger' href='/workouts/tracking'><Text id='workouts.go-to-tracking'>Go to tracking</Text></a>\n\t\t\t\t\t\t\t{/* {JSON.stringify(cordovaActiveTrackingParams)}\n\t\t\t\t\t\t\t{JSON.stringify(isRunning)} */}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</>}\n\n\t\t\t\t<div class='row'>\n\t\t\t\t\t<div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 border-bottom'>\n\t\t\t\t\t\t<Teams stores={this.props.stores} callback={this.changeTeams} key={`teams-${currentTeam}`} />\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-2 mb-2'>\n\t\t\t\t\t\t<a class='btn btn-primary btn-sm float-right'\n\t\t\t\t\t\t\thref='/workouts/edit/new'\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<i class='fas fa-plus' /> <Text id='workout.index.add-workout'>Legg til treningstur</Text>\n\t\t\t\t\t\t</a>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 my-1'>\n\t\t\t\t\t\t<div class='row'>\n\t\t\t\t\t\t\t<div class='w-100 overflow-hidden'>\n                                <div\n                                    class='d-flex flex-row flex-nowrap pb-2 px-1'\n                                    style='overflow: auto; scroll-snap-type: x mandatory;'\n                                >\n\t\t\t\t\t\t\t\t\t<div class='col px-0 pt-2'>\n\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\tclass={`btn btn-block rounded-pill-left rounded-none ${submenu === 'totals' ? 'btn-primary' : 'btn-outline-primary'} text-nowrap`}\n\t\t\t\t\t\t\t\t\t\t\tstyle='text-overflow: ellipsis; overflow: hidden;'\n\t\t\t\t\t\t\t\t\t\t\tdata-menu='totals'\n\t\t\t\t\t\t\t\t\t\t\tonClick={this.chooseSubmenu}\n\t\t\t\t\t\t\t\t\t\t><i class='fas fa-tachometer-alt' /> <Text id='workouts.totals'>Totaler</Text></button>\n                                        {submenu === 'totals' && <ScrollIntoView horizontal={'center'} vertical={'end'} />}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div class='col px-0 pt-2'>\n\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\tclass={`btn btn-block rounded-none ${submenu === 'seasontotals' ? 'btn-primary' : 'btn-outline-primary'} text-nowrap`}\n\t\t\t\t\t\t\t\t\t\t\tstyle='text-overflow: ellipsis; overflow: hidden;'\n\t\t\t\t\t\t\t\t\t\t\tdata-menu='seasontotals'\n\t\t\t\t\t\t\t\t\t\t\tonClick={this.chooseSubmenu}\n\t\t\t\t\t\t\t\t\t\t><i class='fas fa-tachometer-alt' /> <Text id='workouts.seasontotals'>Season totals</Text></button>\n                                        {submenu === 'seasontotals' && <ScrollIntoView horizontal={'center'} vertical={'end'} />}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div class='col px-0 pt-2'>\n\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\tclass={`btn btn-block rounded-none ${submenu === 'analysis' ? 'btn-primary' : 'btn-outline-primary'} text-nowrap`}\n\t\t\t\t\t\t\t\t\t\t\tstyle='text-overflow: ellipsis; overflow: hidden;'\n\t\t\t\t\t\t\t\t\t\t\tdata-menu='analysis'\n\t\t\t\t\t\t\t\t\t\t\tonClick={this.chooseSubmenu}\n\t\t\t\t\t\t\t\t\t\t><i class='fas fa-chart-area' /> <Text id='workouts.analysis'>Analyser</Text></button>\n                                        {submenu === 'analysis' && <ScrollIntoView horizontal={'center'} vertical={'end'} />}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div class='col px-0 pt-2'>\n\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\tclass={`btn btn-block rounded-none ${submenu === 'table' ? 'btn-primary' : 'btn-outline-primary'} text-nowrap`}\n\t\t\t\t\t\t\t\t\t\t\tstyle='text-overflow: ellipsis; overflow: hidden;'\n\t\t\t\t\t\t\t\t\t\t\tdata-menu='table'\n\t\t\t\t\t\t\t\t\t\t\tonClick={this.chooseSubmenu}\n\t\t\t\t\t\t\t\t\t\t><i class='fas fa-table' /> <Text id='workouts.table'>Tabell</Text></button>\n                                        {submenu === 'table' && <ScrollIntoView horizontal={'center'} vertical={'end'} />}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div class='col px-0 pt-2'>\n\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\tclass={`btn btn-block rounded-none ${submenu === 'workoutplan' ? 'btn-primary' : 'btn-outline-primary'} text-nowrap`}\n\t\t\t\t\t\t\t\t\t\t\tstyle='text-overflow: ellipsis; overflow: hidden;'\n\t\t\t\t\t\t\t\t\t\t\tdata-menu='workoutplan'\n\t\t\t\t\t\t\t\t\t\t\tonClick={this.chooseSubmenu}\n\t\t\t\t\t\t\t\t\t\t><i class='fas fa-calendar-alt' /> <Text id='workouts.workoutplan'>Treningsplan</Text></button>\n                                        {submenu === 'workoutplan' && <ScrollIntoView horizontal={'center'} vertical={'end'} />}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div class='col px-0 pt-2'>\n\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\tclass={`btn btn-block rounded-pill-right rounded-none ${submenu === 'calendar' ? 'btn-primary' : 'btn-outline-primary'} text-nowrap`}\n\t\t\t\t\t\t\t\t\t\t\tstyle='text-overflow: ellipsis; overflow: hidden;'\n\t\t\t\t\t\t\t\t\t\t\tdata-menu='calendar'\n\t\t\t\t\t\t\t\t\t\t\tonClick={this.chooseSubmenu}\n\t\t\t\t\t\t\t\t\t\t><i class='fas fa-calendar-alt' /> <Text id='workouts.calendar'>Kalender</Text></button>\n                                        {submenu === 'calendar' && <ScrollIntoView horizontal={'center'} vertical={'end'} />}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t{submenu === 'totals' && <>\n\t\t\t\t\t\t<WorkoutCalendar stores={this.props.stores} isLoading={isLoading}\n\t\t\t\t\t\t\tyear={year}\n\t\t\t\t\t\t\tmonth={month}\n\t\t\t\t\t\t\tchooseDayFunction={this.chooseDay}\n\t\t\t\t\t\t\tkey={`calendar-header-${year}-${month}-${currentTeam}-${loadedTime}-${workoutSummaryWeekDay.length}`}\n\t\t\t\t\t\t\thideTable={submenu === 'calendar' ? 0 : 1}\n\t\t\t\t\t\t\thideSummary={submenu === 'calendar' ? 0 : 1}\n\t\t\t\t\t\t\tskipLoadSummary={submenu === 'calendar' ? 0 : 1}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-2 mb-2'>\n\t\t\t\t\t\t\t<div class='row'>\n\t\t\t\t\t\t\t\t<div class='col-4 text-center'>\n\t\t\t\t\t\t\t\t\t{planMonth >= 0 && (\n\t\t\t\t\t\t\t\t\t\t<Gauge \n\t\t\t\t\t\t\t\t\t\t\tkey={`gauge-${percentComplete}`}\n\t\t\t\t\t\t\t\t\t\t\tradius={55}\n\t\t\t\t\t\t\t\t\t\t\tpercent={percentComplete}\n\t\t\t\t\t\t\t\t\t\t\tprefix='%'\n\t\t\t\t\t\t\t\t\t\t\ttotal={settings.imperial ? `${kmToMiles(planMonth)} mi` : `${util.format(planMonth, 0)} km`}\n\t\t\t\t\t\t\t\t\t\t\tcompleted={settings.imperial ? `${kmToMiles(summaryMonth)} mi` : `${util.format(summaryMonth, 0)} km`}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t)}<br />\n\t\t\t\t\t\t\t\t\t<small class='text-muted'><Text id='workout.index.plan'>Treningsplan</Text></small>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class='col-4 text-center'>\n\t\t\t\t\t\t\t\t\t<h5><span class='text-muted font-weight-lighter'><i class='fas fa-road' /></span></h5>\n\t\t\t\t\t\t\t\t\t<h3>\n\t\t\t\t\t\t\t\t\t\t<Distance stores={this.props.stores} value={totalDistanceKmMonth} smallUnit={true} />\n\t\t\t\t\t\t\t\t\t</h3>\n\t\t\t\t\t\t\t\t\t<small class='text-muted'>\n\t\t\t\t\t\t\t\t\t\t<Text id='workout.calendar.distance'>Distanse</Text>\n\t\t\t\t\t\t\t\t\t</small>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class='col-4 text-center'>\n\t\t\t\t\t\t\t\t\t<h5><span class='text-muted font-weight-lighter'><i class='fas fa-tachometer-alt ml-3' /></span></h5>\n\t\t\t\t\t\t\t\t\t<h3>\n\t\t\t\t\t\t\t\t\t\t<Speed stores={this.props.stores} value={totalSpeedavgMonth} smallUnit={true} />\n\t\t\t\t\t\t\t\t\t</h3>\n\t\t\t\t\t\t\t\t\t<small class='text-muted'>\n\t\t\t\t\t\t\t\t\t\t<Text id='workout.calendar.avg-speed'>Gj.snittsfart</Text>\n\t\t\t\t\t\t\t\t\t</small>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class='col-12 text-center'>\n\t\t\t\t\t\t\t\t\t<span class='text-muted font-weight-lighter'><i class='fas fa-running' /> </span> {totalCountMonth}\n\t\t\t\t\t\t\t\t\t<span class='text-muted font-weight-lighter'><i class='fas fa-clock ml-3' /></span> {util.secToHms(totalDurationMonth)}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class='col-12'>\n\t\t\t\t\t\t\t<Ad stores={this.props.stores} url={this.props.url} section={submenu} />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</>}\n\n\t\t\t\t\t{submenu === 'seasontotals' && <>\n\t\t\t\t\t\t{/* <WorkoutCalendar stores={this.props.stores} isLoading={isLoading}\n\t\t\t\t\t\t\tyear={year}\n\t\t\t\t\t\t\tmonth={month}\n\t\t\t\t\t\t\tchooseDayFunction={this.chooseDay}\n\t\t\t\t\t\t\tkey={`calendar-header-${year}-${month}-${currentTeam}-${loadedTime}-${workoutSummaryWeekDay.length}`}\n\t\t\t\t\t\t\thideTable={submenu === 'calendar' ? 0 : 1}\n\t\t\t\t\t\t\thideSummary={submenu === 'calendar' ? 0 : 1}\n\t\t\t\t\t\t\tskipLoadSummary={submenu === 'calendar' ? 0 : 1}\n\t\t\t\t\t\t/> */}\n\t\t\t\t\t\t<div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 my-3 text-center'>\n\t\t\t\t\t\t\t<h3>\n\t\t\t\t\t\t\t\t<i class='fas fa-tachometer-alt' /> <Text id='workouts.seasontotals'>Season totals</Text>\n\t\t\t\t\t\t\t</h3>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3'>\n\t\t\t\t\t\t\t<WorkoutTotals\n\t\t\t\t\t\t\t\tstores={this.props.stores}\n\t\t\t\t\t\t\t\tcurrentTeam={currentTeam}\n\t\t\t\t\t\t\t\tyear={year}\n\t\t\t\t\t\t\t\tmonth={month}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<WorkoutStatus\n\t\t\t\t\t\t\t\tstores={this.props.stores}\n\t\t\t\t\t\t\t\tcurrentTeam={currentTeam}\n\t\t\t\t\t\t\t\tyear={year}\n\t\t\t\t\t\t\t\tmonth={month}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class='col-12'>\n\t\t\t\t\t\t\t<Ad stores={this.props.stores} url={this.props.url} section={submenu} />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</>}\n\n\t\t\t\t\t{submenu === 'analysis' && <>\n\t\t\t\t\t\t{/* <WorkoutCalendar stores={this.props.stores} isLoading={isLoading}\n\t\t\t\t\t\t\tyear={year}\n\t\t\t\t\t\t\tmonth={month}\n\t\t\t\t\t\t\tchooseDayFunction={this.chooseDay}\n\t\t\t\t\t\t\tkey={`calendar-header-${year}-${month}-${currentTeam}-${loadedTime}-${workoutSummaryWeekDay.length}`}\n\t\t\t\t\t\t\thideTable={submenu === 'calendar' ? 0 : 1}\n\t\t\t\t\t\t\thideSummary={submenu === 'calendar' ? 0 : 1}\n\t\t\t\t\t\t\tskipLoadSummary={submenu === 'calendar' ? 0 : 1}\n\t\t\t\t\t\t/> */}\n\t\t\t\t\t\t<div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 my-3 text-center'>\n\t\t\t\t\t\t\t<h3>\n\t\t\t\t\t\t\t\t<i class='fas fa-chart-area' /> <Text id='workouts.analysis'>Analyser</Text>\n\t\t\t\t\t\t\t</h3>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3'>\n\t\t\t\t\t\t\t<WorkoutGraph\n\t\t\t\t\t\t\t\tstores={this.props.stores}\n\t\t\t\t\t\t\t\tisLoading={isLoading}\n\t\t\t\t\t\t\t\tyear={year}\n\t\t\t\t\t\t\t\tmonth={month}\n\t\t\t\t\t\t\t\tkey={`graph-${workoutPlan.id}-${workoutPlans.length}-${settings.imperial}`}\n\t\t\t\t\t\t\t\tshowExtra={true}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class='col-12'>\n\t\t\t\t\t\t\t<Ad stores={this.props.stores} url={this.props.url} section={submenu} />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</>}\n\n\t\t\t\t\t{submenu === 'table' && <>\n\t\t\t\t\t\t{/* <WorkoutCalendar stores={this.props.stores} isLoading={isLoading}\n\t\t\t\t\t\t\tyear={year}\n\t\t\t\t\t\t\tmonth={month}\n\t\t\t\t\t\t\tchooseDayFunction={this.chooseDay}\n\t\t\t\t\t\t\tkey={`calendar-header-${year}-${month}-${currentTeam}-${loadedTime}-${workoutSummaryWeekDay.length}`}\n\t\t\t\t\t\t\thideTable={submenu === 'calendar' ? 0 : 1}\n\t\t\t\t\t\t\thideSummary={submenu === 'calendar' ? 0 : 1}\n\t\t\t\t\t\t\tskipLoadSummary={submenu === 'calendar' ? 0 : 1}\n\t\t\t\t\t\t/> */}\n\t\t\t\t\t\t<div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 my-3 text-center'>\n\t\t\t\t\t\t\t<h3>\n\t\t\t\t\t\t\t\t<i class='fas fa-table' /> <Text id='workouts.table'>Tabell</Text>\n\t\t\t\t\t\t\t</h3>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3'>\n\t\t\t\t\t\t\t<WorkoutTable\n\t\t\t\t\t\t\t\tstores={this.props.stores}\n\t\t\t\t\t\t\t\tisLoading={isLoading}\n\t\t\t\t\t\t\t\tyear={year}\n\t\t\t\t\t\t\t\tmonth={month}\n\t\t\t\t\t\t\t\tkey={`table-${workoutPlan.id}-${workoutPlans.length}`}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class='col-12'>\n\t\t\t\t\t\t\t<Ad stores={this.props.stores} url={this.props.url} section={submenu} />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</>}\n\n\t\t\t\t\t{submenu === 'calendar' && <>\n\t\t\t\t\t\t<WorkoutCalendar stores={this.props.stores} isLoading={isLoading}\n\t\t\t\t\t\t\tyear={year}\n\t\t\t\t\t\t\tmonth={month}\n\t\t\t\t\t\t\tchooseDayFunction={this.chooseDay}\n\t\t\t\t\t\t\tkey={`calendar-header-${year}-${month}-${currentTeam}-${loadedTime}-${workoutSummaryWeekDay.length}`}\n\t\t\t\t\t\t\thideTable={submenu === 'calendar' ? 0 : 1}\n\t\t\t\t\t\t\thideSummary={submenu === 'calendar' ? 0 : 1}\n\t\t\t\t\t\t\tskipLoadSummary={submenu === 'calendar' ? 0 : 1}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<div class='col-12'>\n\t\t\t\t\t\t\t<Ad stores={this.props.stores} url={this.props.url} section={submenu} />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</>}\n\n\t\t\t\t\t{submenu === 'workoutplan' && <>\n\t\t\t\t\t\t<CalendarPlan stores={this.props.stores}\n\t\t\t\t\t\t\tbasehref='/workouts/'\n\t\t\t\t\t\t\tmonth={month}\n\t\t\t\t\t\t\tyear={year}\n\t\t\t\t\t\t\tkey={`${workoutPlan.id || seasonStart}-${currentTeam}-${month}-${year}-${loadedTime}`}\n\t\t\t\t\t\t\tshowNavigation={true}\n\t\t\t\t\t\t\tshowHeader={true}\n\t\t\t\t\t\t\tcurrentTeam={currentTeam}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<div class='col-12'>\n\t\t\t\t\t\t\t<Ad stores={this.props.stores} url={this.props.url} section={submenu} />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</>}\n\n\t\t\t\t</div>\n\n\t\t\t\t{submenu === 'totals' && <>\n\t\t\t\t\t<div class='row mt-3'>\n\t\t\t\t\t\t<div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-4'>\t\t\n\t\t\t\t\t\t\t<div class='row'>\n\t\t\t\t\t\t\t\t{user && user.strava && <>\n\t\t\t\t\t\t\t\t\t<Strava stores={this.props.stores} activities={stravaActivities} key={`strava-${currentTeam}-${stravaActivities.length}`} />\n\t\t\t\t\t\t\t\t</>}\n\t\t\t\t\t\t\t\t{user && user.garmin && <>\n\t\t\t\t\t\t\t\t\t<Garmin stores={this.props.stores} activities={garminActivityDetails} key={`garmin-${currentTeam}-${garminActivityDetails.length}`} />\n\t\t\t\t\t\t\t\t</>}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class='row'>\n\t\t\t\t\t\t{workoutsFiltered && workoutsFiltered.length > 0 && <div class='col-12 mb-4'>\n\t\t\t\t\t\t\t<div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 px-0 mt-4'>\t\t\n\t\t\t\t\t\t\t\t<h5>\n\t\t\t\t\t\t\t\t\t{/* <Text id='workout.index.last-workouts' fields={{ total: workoutsFiltered.length, month: MONTHS[month - 1], year }}>\n\t\t\t\t\t\t\t\t\t\tTreningsturer {MONTHS[month - 1]} {year} - {workoutsFiltered.length} stk\n\t\t\t\t\t\t\t\t\t</Text> */}\n\t\t\t\t\t\t\t\t\t{currentTeamObject && currentTeamObject.name && <div>\n\t\t\t\t\t\t\t\t\t\t<small class='font-weight-lighter'>(<Text id='workout.index.filtered-by'>Filtered by</Text>: {currentTeamObject.name})</small>\n\t\t\t\t\t\t\t\t\t</div>}\n\t\t\t\t\t\t\t\t</h5>\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t<FastList\n\t\t\t\t\t\t\t\tdata={workoutsFiltered}\n\t\t\t\t\t\t\t\twrapperClassNames={'row pb-4'}\n\t\t\t\t\t\t\t\tcontentClassNames={`col-12 col-sm-8 col-lg-6 offset-sm-2 offset-lg-3 my-1 position-relative rounded rounded-lg py-3 bg-${darkmode ? 'black' : 'white'} shadow-sm`}\n\t\t\t\t\t\t\t\trenderContent={this.renderContent}\n\t\t\t\t\t\t\t\tdataFields={dataFields}\n\t\t\t\t\t\t\t\tdataValues={{ type: '11' }}\n\t\t\t\t\t\t\t\thandleIntersection={handleIntersection}\n\t\t\t\t\t\t\t\tsessionid={sessionid}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t{/* {workoutsFiltered && workoutsFiltered.map(workout => (\n\t\t\t\t\t\t\t\t<Workout stores={this.props.stores} workout={workout} />\n\t\t\t\t\t\t\t))} */}\n\t\t\t\t\t\t</div>}\n\n\t\t\t\t\t\t{!workouts || workouts.length === 0 && <div class='col-12 mb-4 text-center pt-5 pb-5'>\n\t\t\t\t\t\t\t<h1 class='text-muted'><i class='fas fa-running' /></h1>\n\t\t\t\t\t\t\t<h5 class='text-muted font-weight-lighter'>\n\t\t\t\t\t\t\t\t<Text id='workouts.no-workouts' fields={{ month: MONTHS[month - 1], year }}>Ingen treningsturer registrert...</Text>\n\t\t\t\t\t\t\t</h5>\n\t\t\t\t\t\t</div>}\n\t\t\t\t\t</div>\n\t\t\t\t</>}\t\t\t\n\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nexport default Workouts;\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"hoverelementonly\":\"hoverelementonly__1mJGJ\",\"hoverElement\":\"hoverElement__axh3O\",\"hoverelementhide\":\"hoverelementhide__1k_qH\",\"progress-bar-vertical\":\"progress-bar-vertical__1B2sC\",\"progress-bar\":\"progress-bar__pnsVj\",\"dragged\":\"dragged__QXO46\",\"over\":\"over__1re3x\",\"list\":\"list__q_emZ\"};","import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport { toJS } from 'mobx';\nimport { Text, Localizer, withText } from 'preact-i18n';\nimport Markdown from 'preact-markdown';\n\nimport Modal from '../modal';\nimport WorkoutComments from '../../components/workout/comments';\nimport WorkoutAddComment from '../../components/workout/commentAdd';\nimport ImageScroller from '../../components/imageScroller';\nimport DogScroller from '../../components/dog/scroller';\n\nimport Overlay from '../../components/overlay/';\nimport TeamsPublicDetail from '../../routes/teams/publicDetail';\nimport DogPublicDetail from '../../routes/dogs/publicDetail';\n\nimport LikesAndComments from '../../components/feedback/likesAndComments';\nimport Views from '../../components/feedback/views';\n\nimport Speed from '../../components/data/speed';\nimport Elevation from '../../components/data/elevation';\nimport Weight from '../../components/data/weight';\nimport Distance from '../../components/data/distance';\nimport Temperature from '../../components/data/temperature';\n\nimport mu from '../../lib/musher-util';\n\nconst MAX_LOADINDEX = mu.getMaxLoadIndex();\n\nfunction getWorkoutColor(workout) {\n\tswitch (workout.type) {\n\t\tcase 1:\n\t\t\treturn 'border-primary';\n\t\tcase 2:\n\t\t\treturn 'border-danger';\n\t\tcase 3:\n\t\t\treturn 'border-success';\n\t\tcase 4:\n\t\t\treturn 'border-info';\n\t\tdefault:\n\t\t\treturn 'border-warning';\n\t}\n}\n\nfunction getWorkoutIcon(workout) {\n\tswitch (workout.type) {\n\t\tcase 1:\n\t\t\treturn 'fas fa-running';\n\t\tcase 2:\n\t\t\treturn 'fas fa-flag-checkered';\n\t\tcase 3:\n\t\t\treturn 'fas fa-hiking';\n\t\tcase 4:\n\t\t\treturn 'fas fa-futbol';\n\t\tdefault:\n\t\t\treturn 'fas fa-hiking';\n\t}\n}\n\nfunction displayDistance(distanceKm) {\n\tif (distanceKm < 5) {\n\t\treturn util.format(distanceKm, 2);\n\t}\n\tif (distanceKm < 10) {\n\t\treturn util.format(distanceKm, 1);\n\t}\n\treturn util.format(distanceKm, 1);\n}\n\nconst initialState = {\n\tshowAddComment: false,\n    viewImageIdx: {},\n    likeWorkout: {},\n};\n\n@observer\nclass Workout extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            ...initialState,\n        };\n        this.updateTimer = {};\n\t\tthis.inputRef = {};\n    }\n\n    toggleDate = (e) => {\n        e.stopPropagation();\n        e.preventDefault();\n        const { showDate } = this.state;\n        this.setState({ showDate: !showDate });\n    }\n\n\n\tlikeWorkout = async () => {\n\t\tconst { workoutStore } = this.props.stores;\n        const { workout } = this.props;\n        const workoutId = workout.id;\n\n        const { likeWorkout } = this.state;\n        likeWorkout[workoutId] = true;\n        this.setState({ likeWorkout });\n        setTimeout(() => {\n            const { likeWorkout } = this.state;\n            delete likeWorkout[workoutId];\n            this.setState({ likeWorkout });\n        }, 1200);\n\n\t\tconst response = await workoutStore.likeWorkout({ id: workoutId });\n        if (response && response.status === 200) {\n\n\t\t}\n\t}\n\n\ttoggleAddComment = (e) => {\n\t\tconst workoutId = e.target.parentElement.dataset.id || e.target.dataset.id;\n\t\tconst { showAddComment } = this.state;\n\t\tthis.setState({\n\t\t\tshowAddComment: !showAddComment,\n\t\t}, () => {\n\t\t\tif (this.inputRef[workoutId]) {\n\t\t\t\tthis.inputRef[workoutId].focus();\n\t\t\t}\n\t\t});\n\t}\n\n    viewImage = (e) => {\n\t\tconst { id, idx } = e.target.closest('img').dataset;\n        const { viewImageIdx } = this.state;\n        viewImageIdx[id] = idx;\n        this.setState({ viewImageIdx });\n    }\n\n    shareLink = (e) => {\n        const { url, title, text } = e.target.closest('button').dataset;\n        const { appState } = this.props.stores;\n        appState.shareUrl({ url, title, text });\n    }\n\n        // Overlay functions\n    onTeamClick = (e, teamid) => {\n        e.preventDefault();\n        e.stopPropagation();\n        this.setState({\n            showTeam: teamid,\n        });\n        return false;\n    }\n\n    hideTeam = () => {\n        this.setState({\n            showTeam: null,\n        });\n    }\n\n    onUserClick = (e, userid) => {\n        e.preventDefault();\n        e.stopPropagation();\n        return false;\n    }\n\n    onDogClick = (e, dogid, dogs) => {\n        e.preventDefault();\n        e.stopPropagation();\n        this.setState({\n            showDog: dogid,\n            dogs,\n        });\n        return false;\n    }\n\n    hideDog = () => {\n        this.setState({\n            showDog: null,\n        });\n    }\n\n    render() {\n        const {\n            showDate,\n            showAddComment,\n            viewImageIdx = {},\n            likeWorkout,\n            dogs,\n            showTeam,\n            showDog,\n        } = this.state;\n        const {\n            workout,\n            showDate: forceShowDate,\n            wrapperClasses = 'col-12 col-sm-8 col-lg-6 offset-sm-2 offset-lg-3',\n            wrapperClassesRow = 'row',\n        } = this.props;\n\t\tconst { userStore, appState, workoutStore } = this.props.stores;\n        const { viewmode, hasShareApi } = appState;\n        const { user, dogs: allDogs } = userStore;\n        const { language = 'en' } = user;\n        const intensity = userStore.findIntensity({ code: workout.intensity, language }) || {};\n        // const teamName = userStore.findTeam(workout.team);\n        const team = userStore.findTeam(workout.team, true) || {};\n        const teamName = team.name;\n        // const teamNames = workout.teams ? workout.teams.map(e => userStore.findTeam(e)) : [];\n        const teamNames = [];\n        if (teamName) {\n            teamNames.push(teamName);\n        }\n        if (workout.teams) {\n            workout.teams.forEach((e) => {\n                if (userStore.findTeam(e)) {\n                    teamNames.push(userStore.findTeam(e));\n                }\n            });\n        }\n\n        const { likes = [], comments = [] } = workout;\n\t\tconst hasLikedWorkout = workout.likes && workout.likes.findIndex(e => e.user === user.id) > -1;\n        const { gpxInfo = {}, mushers = [] } = workout;\n\t\tconst { loadIndex = 0 } = gpxInfo;\n        const workoutEquipment = userStore.findEquipment({ equipment: workout.equipment, language });\n        const workoutEquipmentIcon = userStore.findEquipment({ equipment: workout.equipment, field: 'icon' });\n\n        const musherImages = [];\n        if (mushers.length > 1) {\n            mushers.slice(1, 10).map((musher) => {\n                const u = workoutStore.findPublicUser(musher) || {};\n                if (u.images && u.images[0]) {\n                    musherImages.push(u.images[0]);\n                }\n            });\n        }\n\n        const publicUser = workoutStore.findPublicUser(mushers[0]) || {};\n        let image;\n        if (publicUser && publicUser.images && publicUser.images[0]) {\n            image = publicUser.images[0];\n        } else if (team.image && team.image.s3SmallLink) {\n            image = team.image;\n        } else if (team.images && team.images[0] && team.images[0].s3SmallLink) {\n            image = team.images[0];\n        } else if (workout.image && workout.image.s3SmallLink) {\n            image = workout.image;\n        }\n\n        const images = [];\n        if (workout.mapImage) {\n            images.push({\n                ...workout.mapImage,\n                type: 'map',\n            });\n        }\n        if (workout.images) {\n            const imgs = toJS(workout.images);\n            images.push(...imgs);\n        }\n        const imageIdx = viewImageIdx[workout.id] ? viewImageIdx[workout.id] : 0;\n        const currentImage = images && images[imageIdx] ? images[imageIdx] : null;\n\n        let batteryUsage;\n        if (workout && workout.gpxInfo && workout.gpxInfo.battegryLevelStart) {\n            batteryUsage = (workout.gpxInfo.battegryLevelStart - workout.gpxInfo.battegryLevelEnd) * 100;\n        }\n\n        const views = mu.getViews(workout.statistics);\n\n        // let temperature;\n        // let windSpeed;\n        // if (util.checkNested(workout, 'temperature')) {\n        //     const yr = toJS(workout.yr[0].instant.details);\n        //     // displayValue = `Yr.no:  ${yr.air_temperature}C,  ${yr.wind_speed}m/s  ${mu.windDirection(yr.wind_from_direction)},  ${yr.cloud_area_fraction}%, ${yr.air_pressure_at_sea_level}mb,  ${yr.relative_humidity}%`;\n        //     temperature = `${yr.air_temperature}C`;\n        //     windSpeed = `${yr.wind_speed}m/s`;\n        // }\n\t\t// // const loadMultiplier = loadIndex / 100;\n\n        return (<>\n\n            {showTeam && <Overlay>\n                <TeamsPublicDetail stores={this.props.stores} teamid={showTeam} marginTop={'0px;'} marginBottom={'0px;'} back={this.hideTeam} hideTeam={this.hideTeam} />\n            </Overlay>}\n\n            {showDog && <Overlay>\n                <DogPublicDetail stores={this.props.stores} dogid={showDog} marginTop={'0px;'} marginBottom={'0px;'} back={this.hideDog} dogs={dogs} />\n            </Overlay>}\n\n            <div class='w-100 mb-2'>\n                <div class={wrapperClassesRow}>\n\n                    <div class={`${wrapperClasses} d-flex mb-0 position-relative`}>\n\n                        {/* {workout.gpxInfo && <svg viewBox='0 0 300 300' style='top: 80px; left: 10px; width: 90px; height: 90px;' class='position-absolute'>\n                            <path d={`${workout.gpxInfo.svgMap}`} style='fill: none; stroke: #0063FF; stroke-width: 5; opacity: 0.3;' />\n                        </svg>} */}\n\n                        {/* {JSON.stringify(workout, null, 4)} */}\n                        <div class='text-center'>\n                            <div\n                                class={`position-relative text-center border rounded-circle imageRounded ${getWorkoutColor(workout)}`}\n                                style={`${image ? `background-image: url(\"${image.s3SmallLink}\"); background-size: cover;` : ''} border-width: 3px !important;`}\n                            >\n                                {!image && <i class={`${getWorkoutIcon(workout)} text-${intensity.class ? intensity.class : 'muted'} mt-3`} style='font-size: 40px;' />}\n\n                                {musherImages && musherImages.map((img, idx) => <>\n                                    <div\n                                        class='position-absolute rounded-circle imageRounded border imageRoundedThumb border-white'\n                                        style={`\n                                            background-image: url(\"${img.s3SmallLink}\");\n                                            background-size: cover;\n                                            bottom: -3px;\n                                            left: ${-5 + (idx * 10)}px;\n                                        `}\n                                    />\n                                </>)}\n                            </div>\n                            {workout.temperature !== 0 && <>\n                                <span class='text-muted font-weight-light'>\n                                    <Temperature stores={this.props.stores} value={workout.temperature} />\n                                </span>\n                            </>}\n                        </div>\n                        <div class='flex-grow-1 pl-3' style='line-height: 1.2em;'>\n                            <span class='float-right'>\n                                {workout.isLocked === 1 && <i class='fas fa-lock text-danger ml-3' />}\n                                {workout.isInProgress === 1 && <div class='spinner-grow text-success ml-3' role='status' />}\n                                {workout.isInProgress === 2 && <i class='fas fa-pause-circle text-warning ml-3' />}\n                            </span>\n                            <a class='stretched-link' href={`/workouts/${workout.id}`}>\n                                <h5 class='my-0 mb-1' style='line-height: 1.0em;'>\n                                    {workout.name}\n                                </h5>\n                            </a>\n                            {teamNames && teamNames.length > 0 && <small class='font-weight-lighter'>\n                                {teamNames.map((name, idx) => <>{idx > 0 ? ', ' : ''}{name}</>)}\n                            </small>}\n                            <br />\n                            <small class='text-muted'>\n                                {workout.date && <small onClick={this.toggleDate}>\n                                    {forceShowDate || showDate ? util.formatDate(workout.date, { locale: 'no-NB', hour12: false, hour: '2-digit', minute: '2-digit' }) : util.formatDistance(workout.date, new Date(), { locale: 'no-NB' })}\n                                </small>}\n                                <span class={`badge badge-${intensity.class} ml-2`}>{intensity.name}</span>\n                                {loadIndex > 0 && <span class={`ml-2 text-${mu.getLoadIndexColor(util.normalizeBetween(loadIndex, 0, MAX_LOADINDEX, 0, 100))}`}>\n                                    <i class='fas fa-hand-rock mr-1' />\n                                    {Math.floor(util.normalizeBetween(loadIndex, 0, MAX_LOADINDEX, 0, 100))} -&nbsp;\n                                    {mu.getLoadIndexText(util.normalizeBetween(loadIndex, 0, MAX_LOADINDEX, 0, 100))}\n                                </span>}\n                                <br />\n                            </small>\n                            <small>\n                                <div class='text-muted'>\n                                    {workout.garminId > 0 && <div class={`float-left mr-2 text-center border rounded-circle imageRounded imageRoundedIcon`} style={`background-image: url(\"./assets/garmin-connect.png\");`} />}\n                                    {workout.stravaId > 0&& <div class={`float-left mr-2 text-center border rounded-circle imageRounded imageRoundedIcon`} style={`background-image: url(\"./assets/strava-icon.png\");`} />}\n\n                                    {workout.equipment > 0 && <><i class={`${workoutEquipmentIcon} ml-2`} /> {workoutEquipment}</>}\n                                    {/* {workout.distanceKm > 0 && <><i class='fas fa-road ml-2' /> {displayDistance(workout.distanceKm)}km</>}\n                                    {workout.elevation > 0 && <><i class='fas fa-mountain ml-2' /> {util.format(workout.elevation, 0)}m</>} */}\n                                    {/* {workout.speedAvg > 0 && <><i class='fas fa-tachometer-alt ml-2' /> {util.format(workout.speedAvg, 1)}km/t</>} */}\n                                    {workout.dogs > 0 && <><i class='fas fa-dog ml-2' /> {workout.dogs.length}</>}\n                                    {workout.track > 0 && <><i class={`fas fa-map-marked text-${workout.track > 0 ? 'success' : 'danger'} ml-2`} /></>}\n                                    {workout.dogsLeft > 0 && <><i class={`fas fa-crosshairs text-${workout.dogsLeft && workout.dogsRight ? 'success' : 'danger'} ml-2`} /></>}\n                                    {workout.sledWeight > 0 && <>\n                                        <i class='fas fa-sleigh ml-2' /> <Weight stores={this.props.stores} value={workout.sledWeight} />\n                                    </>}\n                                    {batteryUsage > 0 && <span class='text-muted ml-2'><i class='fas fa-battery-three-quarters' /> {util.format(batteryUsage, 1)}% <Text id='workout.battery-used'>used</Text></span>}\n                                </div>\n                                {['beta', 'advanced'].indexOf(viewmode) > -1 && (\n                                    <span class='text-muted'>\n                                        <i class='fas fa-balance-scale' /> {util.format(workout.kcalBurnedTotal)} <Text id='workout.kcal'>kcal</Text>\n                                        <i class='fas fa-drumstick-bite ml-2' /> <Weight stores={this.props.stores} value={workout.kcalMeatGramsTotal / 1000} />\n                                        <i class='fas fa-fish ml-2' /> <Weight stores={this.props.stores} value={workout.kcalSalmonGramsTotal / 1000} />\n                                        <i class='fas fa-piggy-bank ml-2' /> <Weight stores={this.props.stores} value={workout.kcalFatGramsTotal / 1000} />\n                                    </span>\n                                )}\n                            </small>\n                        </div>\n                    </div>\n                    <div class={`${wrapperClasses} position-relative mt-2`}>\n                        <strong>\n                            {workout.description}\n                        </strong>\n                    </div>\n                    <div class={`${wrapperClasses} position-relative`}>\n                        <Markdown markdown={mu.replaceImages(workout.comment, workout.images, language)} markdownOpts={mu.getMarkdownOptions()} />\n                    </div>\n                    <div class={`${wrapperClasses} d-flex mb-0 position-relative`}>\n                        <div class='container-fluid px-0'>\n                            <div class='row mt-1'>\n                                {workout.distanceKm > 0 && <div class='col-3'>\n                                    <div class='text-overflow'>\n                                        <small><i class='fas fa-road' /> <Text id='workout.calendar.distance'>Distanse</Text></small>\n                                    </div>\n                                    <div class='text-overflow font-weight-light' style='font-size: 1.2em;'>\n                                        <Distance stores={this.props.stores} value={workout.distanceKm} />\n                                    </div>\n                                </div>}\n                                {workout.elevation > 0 && <div class='col-3'>\n                                    <div class='text-overflow'>\n                                        <small><i class='fas fa-mountain' /> <Text id='workout.calendar.ascend'>Hydemeter</Text></small>\n                                    </div>\n                                    <div class='text-overflow font-weight-light' style='font-size: 1.2em;'>\n                                        <Elevation stores={this.props.stores} value={workout.elevation} />\n                                    </div>\n                                </div>}\n                                {workout.duration > 0 && <div class='col-3'>\n                                    <div class='text-overflow'>\n                                        <small><i class='fas fa-clock' /> <Text id='workout.calendar.duration'>Varighet</Text></small>\n                                    </div>\n                                    <div class='text-overflow font-weight-light' style='font-size: 1.2em;'>\n                                        {util.secToHms(workout.duration, true)}\n                                    </div>\n                                </div>}\n                                {workout.speedAvg > 0 && <div class='col-3'>\n                                    <div class='text-overflow'>\n                                        <small><i class='fas fa-tachometer-alt' /> <Text id='workout.calendar.avg-speed'>Snittfart</Text></small>\n                                    </div>\n                                    <div class='text-overflow font-weight-light' style='font-size: 1.2em;'>\n\t\t\t\t                        {workout.gpxInfo && workout.gpxInfo.avgGpsMovingSpeed > 0 ? <>\n                                            <Speed stores={this.props.stores} value={workout.gpxInfo.avgGpsMovingSpeed * 3.6} />\n                                        </> : <>\n                                            <Speed stores={this.props.stores} value={workout.speedAvg} />\n                                        </>}\n                                    </div>\n                                </div>}\n                            </div>\n                        </div>\n                    </div>\n\n                    {['beta', 'advanced', 'normal'].indexOf(viewmode) > -1 && (\n                        <div class={`${wrapperClasses}`}>\n                            <div class='container-fluid px-0 mt-1'>\n                                <div class='row'>\n                                    <ImageScroller stores={this.props.stores} images={images} id={workout.id} dblClick={this.likeWorkout} likeRef={likeWorkout} />\n                                </div>\n                            </div>\n                        </div>\n                    )}\n\n                    {['beta', 'advanced', 'normal'].indexOf(viewmode) > -1 && <>\n                        {workout.dogs && workout.dogs.length > 0 && <div class='container-fluid px-0 mt-1'>\n                            <div class='row pt-2'>\n                                <DogScroller stores={this.props.stores} dogs={workout.dogs} allDogs={allDogs} onDogClick={this.onDogClick} />\n                            </div>\n                        </div>}\n\n                        <div class='mt-2'>\n                            <LikesAndComments\n                                stores={this.props.stores}\n                                likes={likes}\n                                comments={comments}\n                                type='workout'\n                                onTeamClick={this.onTeamClick}\n                                onUserClick={this.onUserClick}\n                            />\n                        </div>\n\n                    </>}\n\n                    {['beta', 'advanced', 'normal'].indexOf(viewmode) > -1 && <>\n                        <div class={`${wrapperClasses} mb-0 position-relative mt-2`}>\n                            <div class='row'>\n                                <div class='col text-center'>\n                                    <button type='button' class={`btn btn-sm btn-outline-${hasLikedWorkout ? 'primary' : 'secondary'} btn-lg btn-block ${hasLikedWorkout ? 'text-primary' : ''}`}\n                                        onClick={this.likeWorkout}\n                                        // disabled={hasLikedWorkout}\n                                    >\n                                        <i class={`${hasLikedWorkout ? 'text-primary fas' : 'far'} fa-thumbs-up`} /> <Text id='comments.like'>Lik</Text>\n                                    </button>\n                                </div>\n                                <div class='col text-center'>\n                                    <button type='button' class='btn btn-sm btn-outline-secondary btn-lg btn-block'\n                                        data-id={workout.id}\n                                        onClick={this.toggleAddComment}\n                                    >\n                                        <i class='fas fa-comment' /> <Text id='comments.comment-add'>Kommentar</Text>\n                                    </button>\n                                </div>\n                                {hasShareApi ? <>\n                                    <div class='col text-center'>\n                                        <button class='btn btn-sm btn-outline-secondary btn-lg btn-block text-overflow'\n                                            onClick={this.shareLink}\n                                            data-url={`https://themusher.app/share/workout/${workout.uuidv4}`}\n                                            data-title={`title: ${workout.name}`}\n                                        >\n                                            <i class='fas fa-share' /> <Text id='workout.share'>Del</Text>\n                                        </button>\n                                    </div>\n                                </> : <>\n                                    <div class='col text-center'>\n                                        <a class='btn btn-sm btn-outline-secondary btn-lg btn-block text-overflow'\n                                            href={`https://themusher.app/share/workout/${workout.uuidv4}`}\n                                            target='_blank'\n                                            rel='noreferrer'\n                                            data-native\n                                        >\n                                            <i class='fas fa-share' /> <Text id='workout.share'>Del</Text>\n                                        </a>\n                                    </div>\n                                </>}\n                            </div>\n                        </div>\n\n                        <div class={`${wrapperClasses} mt-2 mb-3`}>\n                            {showAddComment && <WorkoutAddComment\n                                stores={this.props.stores}\n                                workout={workout}\n                                inputRef={c => this.inputRef[workout.id] = c}\n                                inputRefObject={this.inputRef}\n                                col='12'\n                                offset='0'\n                            />}\n                            <WorkoutComments stores={this.props.stores} workout={workout} col='10' offset='2' compact={true} />\n                        </div>\n\n                        {views > 0 && <>\n                            <div class='mt-2'>\n                                <Views\n                                    stores={this.props.stores}\n                                    views={views}\n                                    object={workout}\n                                    type='workout'\n                                    isTeamAdmin={true}\n                                    isAdmin={false}\n                                    onTeamClick={this.onTeamClick}\n                                    onUserClick={this.onUserClick}\n                                />\n                            </div>\n                        </>}\n\n                    </>}\n\n                </div>\n            </div>\n        </>);\n    }\n}\n\nexport default Workout;\n","import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport linkState from 'linkstate';\nimport { Text, Localizer, withText } from 'preact-i18n';\n\nimport Speed from '../../components/data/speed';\nimport Elevation from '../../components/data/elevation';\nimport Weight from '../../components/data/weight';\nimport Distance from '../../components/data/distance';\nimport Temperature from '../../components/data/temperature';\n\nimport mu from '../../lib/musher-util';\n\nconst RED_DAYS = [0, 6];\n\n@observer\nclass Calendar extends Component {\n\tsetFocus = () => {\n\t\tif (this.inputRef) {\n\t\t\tthis.inputRef.focus();\n\t\t}\n\t}\n\teditMonth = (e) => {\n\t\tconst month = e.target.parentElement.dataset.month || e.target.dataset.month;\n\t\tconst year = e.target.parentElement.dataset.year || e.target.dataset.year;\n\t\tconst distance = e.target.parentElement.dataset.distance || e.target.dataset.distance;\n\t\t// console.log({ month, year });\n\t\tthis.setState({\n\t\t\tshowInput: true,\n\t\t\tinputYear: year,\n\t\t\tinputMonth: month,\n\t\t\tinputDay: null,\n\t\t\tinputWeek: null,\n\t\t\tnewDistance: distance || null,\n\t\t}, () => this.setFocus());\n\t}\n\n\teditWeek = (e) => {\n\t\tconst week = e.target.parentElement.dataset.week || e.target.dataset.week;\n\t\tconst year = e.target.parentElement.dataset.year || e.target.dataset.year;\n\t\tconst distance = e.target.parentElement.dataset.distance || e.target.dataset.distance;\n\t\t// console.log({ week, year });\n\t\tthis.setState({\n\t\t\tshowInput: true,\n\t\t\tinputYear: year,\n\t\t\tinputWeek: week,\n\t\t\tinputMonth: null,\n\t\t\tinputDay: null,\n\t\t\tnewDistance: distance || null,\n\t\t}, () => this.setFocus());\n\t}\n\n\teditDay = (e) => {\n\t\tconst day = e.target.parentElement.dataset.day || e.target.dataset.day;\n\t\tconst month = e.target.parentElement.dataset.month || e.target.dataset.month;\n\t\tconst year = e.target.parentElement.dataset.year || e.target.dataset.year;\n\t\tconst week = e.target.parentElement.dataset.week || e.target.dataset.week;\n\t\tconst distance = e.target.parentElement.dataset.distance || e.target.dataset.distance;\n\t\t// console.log({ day, month, year });\n\t\tthis.setState({\n\t\t\tshowInput: true,\n\t\t\tinputYear: year,\n\t\t\tinputMonth: month,\n\t\t\tinputDay: day,\n\t\t\tinputWeek: week,\n\t\t\tnewDistance: distance || null,\n\t\t}, () => this.setFocus());\n\t}\n\n\tsaveDistance = async () => {\n\t\tconst { workoutPlanStore, workoutStore, userStore } = this.props.stores;\n\t\tconst { currentTeam } = workoutStore;\n\t\tconst teamName = userStore.findTeam(currentTeam) || '';\n\t\tconst { year, month } = this.props;\n\t\tconst { workoutPlans } = workoutPlanStore;\n\t\tconst workoutPlanCurrent = workoutPlans[0] || {};\n\t\tconst { inputYear, inputMonth, inputWeek, inputDay, newDistance } = this.state;\n\t\t// console.log({ showInput, inputYear, inputMonth, inputWeek, inputDay, newDistance });\n\n\t\tconst currentMonth = month || new Date().getMonth() + 1;\n\t\tconst currentYear = year || util.getYear();\n\t\tconst seasonStart = parseInt(currentMonth < 8 ? currentYear - 1 : currentYear, 10);\n\n\t\tif (!workoutPlanCurrent.id) {\n\t\t\tconst response = await workoutPlanStore.insert({\n\t\t\t\ttitle: `Workout plan for ${seasonStart} - ${seasonStart + 1}: ${teamName}`,\n\t\t\t\tteam: currentTeam,\n\t\t\t\tseasonYear: seasonStart,\n\t\t\t\tseasonMonth: 6,\n\t\t\t});\n\t\t\tconst { id: newId } = response.data;\n\t\t\tawait workoutPlanStore.load(newId);\n\t\t} else {\n\t\t\tawait workoutPlanStore.load(workoutPlanCurrent.id);\n\t\t}\n\t\tconst { workoutPlan } = workoutPlanStore;\n\t\tconst { id } = workoutPlan;\n\t\t// console.log({ id });\n\n\t\tlet field;\n\t\tif (inputYear) {\n\t\t\tif (inputDay) {\n\t\t\t\tfield = 'days';\n\t\t\t} else {\n\t\t\t\tfield = 'weeks';\n\t\t\t}\n\t\t}\n\t\tawait workoutPlanStore.saveField(id, field, {\n\t\t\tyear: inputYear,\n\t\t\tmonth: inputMonth,\n\t\t\tday: inputDay,\n\t\t\tweek: inputWeek,\n\t\t\tdistance: newDistance,\n\t\t});\n\t\tawait workoutPlanStore.load(id);\n\n\t\tthis.resetInput(true);\n\t}\n\n\tresetInput = (nextDay) => {\n\t\tif (nextDay) {\n\t\t\tconst { inputYear, inputMonth, inputDay } = this.state;\n\t\t\tconst nextDay = util.addDays(new Date(inputYear, inputMonth - 1, inputDay, 0, 0, 0, 0), 1);\n\t\t\tthis.setState({\n\t\t\t\tshowInput: true,\n\t\t\t\tinputYear: nextDay.getFullYear(),\n\t\t\t\tinputMonth: nextDay.getMonth() + 1,\n\t\t\t\tinputDay: nextDay.getDate(),\n\t\t\t\tinputWeek: util.getWeek(nextDay),\n\t\t\t\tnewDistance: null,\n\t\t\t});\n\t\t\tthis.setFocus();\n\t\t} else {\n\t\t\tthis.setState({\n\t\t\t\tshowInput: false,\n\t\t\t\tinputYear: null,\n\t\t\t\tinputMonth: null,\n\t\t\t\tinputDay: null,\n\t\t\t\tinputWeek: null,\n\t\t\t\tnewDistance: null,\n\t\t\t});\n\t\t}\n\t}\n\n\tcheckKeydown = (e) => {\n\t\tswitch (e.key) {\n\t\t\tcase 'Enter':\n\t\t\t\tthis.saveDistance();\n\t\t\t\tbreak;\n\n\t\t\tcase 'Escape':\n\t\t\t\tthis.resetInput();\n\t\t\t\tbreak;\n\t\t\n\t\t\tdefault:\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\tcomponentDidMount() {\n\t\tthis.updateWorkoutPlanTips();\n\t}\n\n\tupdateWorkoutPlanTips = () => {\n\t\t// console.log('updateWorkoutPlanTips');\n\t\tconst { userStore } = this.props.stores;\n\t\tconst { user = {} } = userStore;\n\t\tconst { settings = {} } = user;\n\t\tthis.setState({ hideWorkoutPlanTips: settings.hideWorkoutPlanTips });\n\t}\n\n\ttoggleTips = async () => {\n\t\tconst { hideWorkoutPlanTips } = this.state;\n\t\tconst { userStore } = this.props.stores;\n\t\tconst newValue = hideWorkoutPlanTips === 1 ? 0 : 1;\n\t\tthis.setState({ hideWorkoutPlanTips: newValue });\n\t\tawait userStore.updateSetting({ 'settings.hideWorkoutPlanTips': newValue }, { hideWorkoutPlanTips: newValue });\n\t}\n\n\trender() {\n\t\tconst { hideWorkoutPlanTips } = this.state;\n\t\tconst { appState, workoutPlanStore, userStore, workoutStore, teamStore } = this.props.stores;\n\t\tconst { user } = userStore;\n\t\tconst { language = 'en' } = user;\n\t\tconst { darkmode } = appState;\n\t\tconst DAYS = mu.getDays(language);\n\t\tconst MONTHS = mu.getMonths(language);\n\n\t\tconst { showInput, inputYear, inputMonth, inputWeek, inputDay, newDistance } = this.state;\n\n        const currentDay = new Date().getDate();\n        const currentMonth = new Date().getMonth() + 1;\n        const currentYear = new Date().getFullYear();\n\n\t\tconst currentEpoch = new Date().getTime();\n\t\tconst { month = currentMonth, year = currentYear, dog, basehref, showNavigation = true, showHeader = true, currentTeam } = this.props;\n\n\t\tconst seasonStart = parseInt(month < 8 ? year - 1 : year, 10);\n\n        const monthNum = parseInt(month, 10);\n        const yearNum = parseInt(year, 10);\n        const { month: nextMonth, year: nextYear } = mu.getNextMonth(monthNum, yearNum);\n        const { month: prevMonth, year: prevYear } = mu.getPrevMonth(monthNum, yearNum);\n\n        const daysOfMonth = util.getDaysInMonth(month, year);\n        const weeksInMonth = util.getWeeksInMonth(month, year);\n        const firstWeek = weeksInMonth[0].week;\n        const daysOfWeek = util.getDaysInWeek(firstWeek, year, month);\n        let totalDistanceKmMonth = 0;\n\t\tlet totalDistanceKmMonthPlan = 0;\n\t\tlet totalWorkoutDistanceKmMonth = 0;\n\n\t\tconst monthEpoch = daysOfMonth[daysOfMonth.length - 1].getTime();\n\t\tconst isMonthInTheFuture = monthEpoch > currentEpoch;\n\n\t\tconst summaryMonth = workoutPlanStore.findWorkoutPlanSummaryMonth(year, monthNum) || {};\n\t\tconst { workoutPlan, tips } = workoutPlanStore;\n\n\t\tconst tipsMonth = tips[`${year}-${util.padDate(month)}`];\n\t\tconst hasTipsMonth = tipsMonth && (tipsMonth.comments.length > 0 || tipsMonth.distance);\n\n\t\tconst team = teamStore.findTeam(currentTeam) || {};\n\n\t\treturn (\n\t\t\t<>\n                {showHeader && <>\n\t\t\t\t\t<div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-4 text-center'>\n\t\t\t\t\t\t{showNavigation && <a href={`${basehref || '/workouts/month/'}${nextMonth}/${nextYear}/skipScroll`} class='float-right btn btn-sm btn-outline-secondary ml-2'><i class='fas fa-arrow-right' /></a>}\n\t\t\t\t\t\t{showNavigation && <a href={`${basehref || '/workouts/month/'}${prevMonth}/${prevYear}/skipScroll`} class='float-left btn btn-sm btn-outline-secondary mr-2'><i class='fas fa-arrow-left' /></a>}\n\t\t\t\t\t\t<h3><Text id='workout.plan.month'>Mned</Text> - {MONTHS[month - 1]} {year} {summaryMonth.distance ? `- ${util.format(summaryMonth.distance, 0)} km` : ''}</h3>\n\t\t\t\t\t\t<h5 class='text-muted font-weight-light'><Text id='workout.plan.season'>Sesongen</Text> {seasonStart} - {seasonStart + 1}</h5>\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t{workoutPlan.id ? <>\n\t\t\t\t\t\t\t\t<small>{workoutPlan.title}</small>\n\t\t\t\t\t\t\t</> : <>\n\t\t\t\t\t\t\t\t<div class='display-4'>\n\t\t\t\t\t\t\t\t\t<i class='far fa-sad-tear text-muted' />\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<h5 class='font-weight-lighter text-muted'>\n\t\t\t\t\t\t\t\t\t<Text id='workout.plan.no-workout-plan-found' fields={{ name: team }}>Ingen plan</Text>\n\t\t\t\t\t\t\t\t</h5>\n\t\t\t\t\t\t\t\t<div class='text-muted'>\n\t\t\t\t\t\t\t\t\t<Text id='workout.plan.click-to-start'>Click on a date to get started.</Text>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</>}\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t{dog && <div>{dog.name}</div>}\n\t\t\t\t\t\t{/* <small>{util.isoDate(daysOfMonth[0], false, false, true)} - {util.isoDate(daysOfMonth[daysOfMonth.length - 1], false, false, true)}</small> */}\n\t\t\t\t\t</div>\n\t\t\t\t</>}\n\n                <div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3'>\n\t\t\t\t\t{!!(showInput && inputYear && inputWeek && !inputDay) && (\n\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t<div class='form-inline w-100'>\n\t\t\t\t\t\t\t\t<div class='form-group w-75 mr-3 mb-0'>\n\t\t\t\t\t\t\t\t\t<input class='form-control w-100 form-control' type='text' \n\t\t\t\t\t\t\t\t\t\tplaceholder={`Enter distance for ${inputYear} w${inputWeek}`}\n\t\t\t\t\t\t\t\t\t\tref={c => this.inputRef = c}\n\t\t\t\t\t\t\t\t\t\tonInput={linkState(this, 'newDistance')}\n\t\t\t\t\t\t\t\t\t\tonKeydown={this.checkKeydown}\n\t\t\t\t\t\t\t\t\t\tautocomplete='off'\n\t\t\t\t\t\t\t\t\t\tvalue={newDistance || ''}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<button type='button' class='btn btn-primary' onClick={this.saveDistance}><Text id='workout.plan.save'>Lagre</Text></button>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</>\n\t\t\t\t\t)}\n\t\t\t\t\t{!!(showInput && inputYear && inputMonth) && (\n\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t<div class='form-inline w-100'>\n\t\t\t\t\t\t\t\t<div class='form-group w-75 mr-3 mb-0'>\n\t\t\t\t\t\t\t\t\t<input class='form-control w-100 form-control' type='text'\n\t\t\t\t\t\t\t\t\t\tplaceholder={`Enter distance for ${inputYear}-${util.padDate(inputMonth)} ${inputDay ? `-${util.padDate(inputDay)}` : ''}`}\n\t\t\t\t\t\t\t\t\t\tref={c => this.inputRef = c}\n\t\t\t\t\t\t\t\t\t\tonInput={linkState(this, 'newDistance')}\n\t\t\t\t\t\t\t\t\t\tonKeydown={this.checkKeydown}\n\t\t\t\t\t\t\t\t\t\tautocomplete='off'\n\t\t\t\t\t\t\t\t\t\tvalue={newDistance || ''}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<button type='button' class='btn btn-primary' onClick={this.saveDistance}><Text id='workout.plan.save'>Lagre</Text></button>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</>\n\t\t\t\t\t)}\n\t\t\t\t</div>\n\n\t\t\t\t{language === 'no' && <>\n\t\t\t\t\t{hideWorkoutPlanTips ? <>\n\t\t\t\t\t\t<div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-4 d-flex justify-content-end'>\n\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\ttype='button'\n\t\t\t\t\t\t\t\tclass='btn btn-outline-primary btn-sm'\n\t\t\t\t\t\t\t\tonClick={this.toggleTips}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<i class='fas fa-eye' /> <Text id='workout.plan.show-tips'>Show tips</Text>\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</> : <>\n\t\t\t\t\t\t<div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-4 d-flex justify-content-end'>\n\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\ttype='button'\n\t\t\t\t\t\t\t\tclass='btn btn-primary btn-sm'\n\t\t\t\t\t\t\t\tonClick={this.toggleTips}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<i class='fas fa-eye-slash' /> <Text id='workout.plan.hide-tips'>Hide tips</Text>\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</>}\n\t\t\t\t</>}\n\n                <div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3'>\n\t\t\t\t\t<div class='table-responsive'>\n\t\t\t\t\t\t<table class='table table-striped table-sm'>\n\t\t\t\t\t\t\t<thead>\n\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t<th class='text-muted'><small><Text id='workout.plan.week'>Uke</Text></small></th>\n\t\t\t\t\t\t\t\t\t{daysOfWeek.map(day => <th><small>{DAYS[day.getDay()]}</small></th>)}\n\t\t\t\t\t\t\t\t\t<th class='text-muted'><small><Text id='workout.plan.sum'>Sum</Text></small></th>\n\t\t\t\t\t\t\t\t\t<th class='text-muted'><small><Text id='workout.plan.planned'>Plan</Text></small></th>\n\t\t\t\t\t\t\t\t\t{/* <th class='text-muted'>Totalt</th> */}\n\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t</thead>\n\t\t\t\t\t\t\t<tbody>\n\t\t\t\t\t\t\t\t{weeksInMonth && weeksInMonth.map(weekObj => {\n\t\t\t\t\t\t\t\t\tconst daysOfWeek = util.getDaysInWeek(weekObj.week, year, month);\n\t\t\t\t\t\t\t\t\tconst summaryWeek = workoutPlanStore.findWorkoutPlanSummaryWeek(util.asNumber(year), weekObj.week) || {};\n\t\t\t\t\t\t\t\t\tconst weekEpoch = daysOfWeek[6].getTime();\n\t\t\t\t\t\t\t\t\tconst isWeekInTheFuture = weekEpoch > currentEpoch;\n\t\t\t\t\t\t\t\t\tlet totalWeek = 0;\n\t\t\t\t\t\t\t\t\tlet totalWorkoutWeek = 0;\n\t\t\t\t\t\t\t\t\tif (summaryWeek.distance > 0) {\n\t\t\t\t\t\t\t\t\t\ttotalDistanceKmMonthPlan += summaryWeek.distance;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tconst tipsWeek = tips[`${year}-${util.padDate(month)}-w${util.padDate(weekObj.week)}`];\n\t\t\t\t\t\t\t\t\tconst hasTipsWeek = tipsWeek && (tipsWeek.comments.length > 0 || tipsWeek.distance);\n\n\t\t\t\t\t\t\t\t\treturn (<>\n\t\t\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t\t\t<td class={`text-right text-muted pt-3 border-right ${!inputDay && inputYear == year && inputWeek == weekObj.week ? 'border rounded border-primary' : ''}`}>\n\t\t\t\t\t\t\t\t\t\t\t\t<small onClick={this.editWeek} data-week={weekObj.week} data-year={year} data-distance={summaryWeek.distance}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t{weekObj.week}\n\t\t\t\t\t\t\t\t\t\t\t\t</small>\n\t\t\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t\t\t{daysOfWeek.map(day => {\n\t\t\t\t\t\t\t\t\t\t\t\tconst yyyy = day.getFullYear();\n\t\t\t\t\t\t\t\t\t\t\t\tconst mm = day.getMonth() + 1;\n\t\t\t\t\t\t\t\t\t\t\t\tconst dd = day.getDate();\n\t\t\t\t\t\t\t\t\t\t\t\tconst epoch = day.getTime();\n\t\t\t\t\t\t\t\t\t\t\t\tconst isDayInTheFuture = epoch > currentEpoch;\n\t\t\t\t\t\t\t\t\t\t\t\tconst summaryWorkout = userStore.findWorkoutSummaryWeekDay((isDayInTheFuture ? yyyy - 1 : yyyy), mm, dd, monthNum) || {};\n\t\t\t\t\t\t\t\t\t\t\t\tconst summary = workoutPlanStore.findWorkoutPlanSummaryDay(yyyy, mm, dd, monthNum) || {};\n\t\t\t\t\t\t\t\t\t\t\t\tif (summary && summary.distance) {\n\t\t\t\t\t\t\t\t\t\t\t\t\ttotalWeek += summary.distance;\n\t\t\t\t\t\t\t\t\t\t\t\t\ttotalDistanceKmMonth += summary.distance;\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\tif (summaryWorkout.distanceKm) {\n\t\t\t\t\t\t\t\t\t\t\t\t\ttotalWorkoutWeek += summaryWorkout.distanceKm;\n\t\t\t\t\t\t\t\t\t\t\t\t\ttotalWorkoutDistanceKmMonth += summaryWorkout.distanceKm;\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\t\t\tconst isChosen = (inputYear == yyyy && inputMonth == mm && inputDay == dd);\n\t\t\t\t\t\t\t\t\t\t\t\tconst isToday =  (currentYear == yyyy) && (currentMonth == mm) && (currentDay == dd);\n\t\t\t\t\t\t\t\t\t\t\t\tconst isDayOff = RED_DAYS.indexOf(day.getDay()) > -1;\n\n\t\t\t\t\t\t\t\t\t\t\t\t// console.log(summary);\n\t\t\t\t\t\t\t\t\t\t\t\t// count: 1, day: 5, distanceKm: 10, duration: 3600, elevation: 200, month: 9, speedAvg: 12, year: 2020\n\t\t\t\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t\t\t\t<td class={`text-center overflow-hidden font-weight-light position-relative pt-3 pb-3 border-right ${isChosen ? 'calendarIsChosen' : ''} ${isToday ? 'calendarIsToday' : ''} ${isDayOff ? 'calendarIsWeekend' : ''}`}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tstyle={`font-size: 0.8em; min-width: 3rem;`}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={this.editDay} data-day={day.getDate()} data-month={day.getMonth() + 1} data-year={year} data-week={weekObj.week} data-distance={summary.distance}\n\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div class='position-absolute text-muted' style='top: 0px; right: 2px; font-size: 0.7em;'>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{day.getDate()}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{summary && summary.distance ? \n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div class='rounded-pill w-100 px-1'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstyle={`background-color: ${mu.getPlanColor(summary, darkmode)};`}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Distance stores={this.props.stores} value={summary.distance} />\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{summary.count > 1 && <span class='position-absolute text-danger' style='bottom: 0; right: 0px; font-size: 0.6em;'>{summary.count}</span>}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div> : '-'}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{summaryWorkout.distanceKm > 0 && (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span class={`position-absolute font-weight-bold`}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstyle={`bottom: 0; left: 0px; font-size: 0.85em; color: ${isDayInTheFuture ? '#393DB1' : '#2BAAA9'};`}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Distance stores={this.props.stores} value={summaryWorkout.distanceKm} />\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t)}\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\t\t\t<td class='text-right pt-3 pb-3 position-relative border-right' style='font-size: 0.8em;'>\n\t\t\t\t\t\t\t\t\t\t\t\t<Distance stores={this.props.stores} value={totalWeek} />\n\t\t\t\t\t\t\t\t\t\t\t\t{totalWorkoutWeek > 0 && (\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span class={`position-absolute`}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tstyle={`bottom: 0; left: 0px; font-size: 0.85em; color: ${isWeekInTheFuture ? '#393DB1' : '#2BAAA9'};`}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Distance stores={this.props.stores} value={totalWorkoutWeek} />\n\t\t\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t\t\t<td class='text-right pt-3 pb-3 text-muted border-right' style='font-size: 0.8em;'\n\t\t\t\t\t\t\t\t\t\t\t\tonClick={this.editWeek} data-week={weekObj.week} data-year={year} data-distance={summaryWeek.distance}\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t{summaryWeek.distance > 0 && <>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div class='rounded-pill w-100 px-1 text-white text-center'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tstyle={`background-color: ${mu.getPlanColor(summaryWeek, darkmode)};`}\n\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Distance stores={this.props.stores} value={summaryWeek.distance} />\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t</>}\n\t\t\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t\t\t{/* <td class='text-right text-muted pt-3'>{totalDistanceKmMonth}</td> */}\n\t\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t\t{!hideWorkoutPlanTips && language === 'no' && tipsWeek && hasTipsWeek && <tr>\n\t\t\t\t\t\t\t\t\t\t\t<td colspan='10' class='pb-3'>\n\t\t\t\t\t\t\t\t\t\t\t\t<h5><span class='font-weight-lighter'>Uke {weekObj.week} {year}:</span>Tips fra Femundlpet</h5>\n\n\t\t\t\t\t\t\t\t\t\t\t\t{tipsWeek.totalDistance > 0 && <div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span class='text-muted'><i class='fas fa-road' /> Distanse</span>: {tipsWeek.totalDistance} km\n\t\t\t\t\t\t\t\t\t\t\t\t</div>}\n\t\t\t\t\t\t\t\t\t\t\t\t{tipsWeek.distance > 0 && <div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span class='text-muted'><i class='fas fa-road' /> Distanse pr kt</span>: {tipsWeek.distance}\n\t\t\t\t\t\t\t\t\t\t\t\t</div>}\n\t\t\t\t\t\t\t\t\t\t\t\t{tipsWeek.time && <div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span class='text-muted'><i class='fas fa-clock' /> Tid pr kt</span>: {tipsWeek.time}\n\t\t\t\t\t\t\t\t\t\t\t\t</div>}\n\t\t\t\t\t\t\t\t\t\t\t\t{tipsWeek.totalWorkouts > 0 && <div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span class='text-muted'><i class='fas fa-list-ol' /> Antall kter</span>: {tipsWeek.totalWorkouts}\n\t\t\t\t\t\t\t\t\t\t\t\t</div>}\n\t\t\t\t\t\t\t\t\t\t\t\t{tipsWeek.avgSpeed && <div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span class='text-muted'><i class='fas fa-tachometer-alt' /> Gjennomsnittsfart</span>: {tipsWeek.avgSpeed}\n\t\t\t\t\t\t\t\t\t\t\t\t</div>}\n\n\t\t\t\t\t\t\t\t\t\t\t\t{tipsWeek.comments && <div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t{tipsWeek.comments.map(c => <p>{c}</p>)}\n\t\t\t\t\t\t\t\t\t\t\t\t</div>}\n\t\t\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t\t</tr>}\n\n\t\t\t\t\t\t\t\t\t</>);\n\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t</tbody>\n\t\t\t\t\t\t\t<tfoot>\n\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t<td colspan='8' class='text-right pb-3'><Text id='workout.plan.totalkm'>Totalt km</Text></td>\n\t\t\t\t\t\t\t\t\t<td class='text-right position-relative pb-3'>\n\t\t\t\t\t\t\t\t\t\t<Distance stores={this.props.stores} value={totalDistanceKmMonth} />\n\t\t\t\t\t\t\t\t\t\t{totalWorkoutDistanceKmMonth > 0 && (\n\t\t\t\t\t\t\t\t\t\t\t<span class='position-absolute'\n\t\t\t\t\t\t\t\t\t\t\t\tstyle={`bottom: 0; left: 0px; font-size: 0.65em; color: ${isMonthInTheFuture ? '#393DB1' : '#2BAAA9'};`}\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t<Distance stores={this.props.stores} value={totalWorkoutDistanceKmMonth} />\n\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t<td class='text-right text-muted'>\n\t\t\t\t\t\t\t\t\t\t<Distance stores={this.props.stores} value={totalDistanceKmMonthPlan} />\n\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t{!hideWorkoutPlanTips && language === 'no' && tipsMonth && hasTipsMonth && <tr>\n\t\t\t\t\t\t\t\t\t<td colspan='10' class='pb-3'>\n\t\t\t\t\t\t\t\t\t\t<h5><span class='font-weight-lighter'>{MONTHS[month - 1]} {year}:</span> Tips fra Femundlpet</h5>\n\n\t\t\t\t\t\t\t\t\t\t{tipsMonth.totalDistance > 0 && <div>\n\t\t\t\t\t\t\t\t\t\t\t<span class='text-muted'><i class='fas fa-road' /> Distanse</span>: {tipsMonth.totalDistance} km\n\t\t\t\t\t\t\t\t\t\t</div>}\n\t\t\t\t\t\t\t\t\t\t{tipsMonth.distance > 0 && <div>\n\t\t\t\t\t\t\t\t\t\t\t<span class='text-muted'><i class='fas fa-road' /> Distanse pr kt</span>: {tipsMonth.distance}\n\t\t\t\t\t\t\t\t\t\t</div>}\n\t\t\t\t\t\t\t\t\t\t{tipsMonth.time && <div>\n\t\t\t\t\t\t\t\t\t\t\t<span class='text-muted'><i class='fas fa-clock' /> Tid pr kt</span>: {tipsMonth.time}\n\t\t\t\t\t\t\t\t\t\t</div>}\n\t\t\t\t\t\t\t\t\t\t{tipsMonth.totalWorkouts > 0 && <div>\n\t\t\t\t\t\t\t\t\t\t\t<span class='text-muted'><i class='fas fa-list-ol' /> Antall kter</span>: {tipsMonth.totalWorkouts}\n\t\t\t\t\t\t\t\t\t\t</div>}\n\t\t\t\t\t\t\t\t\t\t{tipsMonth.avgSpeed && <div>\n\t\t\t\t\t\t\t\t\t\t\t<span class='text-muted'><i class='fas fa-tachometer-alt' /> Gjennomsnittsfart</span>: {tipsMonth.avgSpeed}\n\t\t\t\t\t\t\t\t\t\t</div>}\n\n\t\t\t\t\t\t\t\t\t\t{tipsMonth.comments && <div>\n\t\t\t\t\t\t\t\t\t\t\t{tipsMonth.comments.map(c => <p>{c}</p>)}\n\t\t\t\t\t\t\t\t\t\t</div>}\n\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t</tr>}\n\t\t\t\t\t\t\t</tfoot>\n\t\t\t\t\t\t</table>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</>\n\t\t);\n\t}\n}\n\nexport default Calendar;\n","import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport { Text, Localizer } from 'preact-i18n';\n\nimport mu from '../../lib/musher-util';\n\nfunction celciusToFahrenheit(value) {\n    return ((value * 9/5) + 32);\n}\n\n@observer\nclass Temperature extends Component {\n    render() {\n\t\tconst { value = 0, smallUnit } = this.props;\n\t\tconst { userStore } = this.props.stores;\n\t\tconst { user } = userStore;\n\t\tconst { settings = {} } = user;\n\n        if (settings.imperial) {\n            return (<>\n                <nobr>\n                    {util.format(celciusToFahrenheit(value), 0)}F\n                </nobr>\n            </>);\n        }\n\n\t\treturn (<>\n            <nobr>\n                {util.format(value, 1)}C\n            </nobr>\n        </>);\n    }\n}\n\nexport default Temperature;\n","import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport { Text, Localizer, withText } from 'preact-i18n';\n\n@observer\nclass Modal extends Component {\n    toggleDate = () => {\n        const { showDate } = this.state;\n        this.setState({ showDate: !showDate });\n    }\n\n    touchStart = (e) => {\n        e.stopPropagation();\n        this.setState({\n            startY: e.touches[0].pageY,\n        })\n    }\n\n    touchEnd = (e) => {\n        e.stopPropagation();\n        this.setState({\n            startY: undefined,\n            readyToRefresh: false,\n        })\n    }\n\n    touchMove = (e) => {\n        e.stopPropagation();\n        const { close } = this.props;\n        const { startY, refreshing } = this.state;\n        const scrollDistance = 30;\n        const y = e.touches[0].pageY;\n        if (this.appContainer) {\n            const { scrollTop } = this.appContainer;\n            if (scrollTop === 0 && y > startY + scrollDistance && !refreshing) {\n                close();\n            }\n        }\n    }\n\n    render() {\n        const { showDate } = this.state;\n        const { image, imagexxl, close, thumb, name, title, date } = this.props;\n        return (\n            <div class='fixed-top bg-dark text-center pt-2' style='width: 100vw; height: 100vh;'>\n                <button class='btn btn-secondary float-right mr-2' onClick={close}>X</button>\n\n                    <div class='d-flex mb-2 px-2'>\n                        {/* {JSON.stringify(dog, null, 4)} */}\n                        {thumb && <div class={`text-center border rounded-circle imageRounded imageRoundedSmall`} style={thumb ? `background-image: url(\"${thumb}\");` : ''}>\n                            &nbsp;\n                        </div>}\n                        <div class='flex-grow-1 pl-3 pr-2 text-left' style='line-height: 1.3em;'>\n                            {name && <strong class='mr-2'>{name}:</strong>}\n                            {title}<br />\n                            <small class='text-muted'>\n                                {date && <small onClick={this.toggleDate}>\n                                    {showDate ? util.formatDate(date, { locale: 'no-NB' }) : util.formatDistance(date, new Date(), { locale: 'no-NB' })}\n                                </small>}\n                            </small>\n                        </div>\n                    </div>\n\n\n                <img src={image}\n                    class='img-fluid align-middle mt-2 mb-2'\n                    onClick={close}\n                    onTouchstart={this.touchStart}\n                    onTouchend={this.touchEnd}\n                    onTouchmove={this.touchMove}\n                    ref={c => this.appContainer = c}\n                />\n\n                <a target='_blank' rel='noopener noreferrer' href={imagexxl || image} download={imagexxl || image}>\n                    <i class='fas fa-download' /> <Text id='modal.download'>Last ned bildet</Text>\n                </a>\n            </div>\n        );\n    }\n}\n\nexport default Modal;\n","import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport { Text, Localizer } from 'preact-i18n';\n\nimport mu from '../../lib/musher-util';\n\nfunction kgToPounds(value) {\n    return 2.20462 * value;\n}\n\n@observer\nclass Weight extends Component {\n    render() {\n\t\tconst { value = 0, smallUnit } = this.props;\n\t\tconst { userStore } = this.props.stores;\n\t\tconst { user } = userStore;\n\t\tconst { settings = {} } = user;\n\n        if (settings.imperial) {\n            return (<>\n                <nobr>\n                    {util.format(kgToPounds(value), 0)} lb\n                </nobr>\n            </>);\n        }\n\n\t\treturn (<>\n            <nobr>\n                {util.format(value, 0)} kg\n            </nobr>\n        </>);\n    }\n}\n\nexport default Weight;\n","import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport { Text, Localizer, withText } from 'preact-i18n';\n\nimport mu from '../../lib/musher-util';\n\nimport LineGraph from '../../components/lineGraph';\n\n@withText((props) => ({\n    week: <Text id='workout.graph.week' />,\n    distance: <Text id='workout.graph.distance' />,\n    duration: <Text id='workout.graph.duration'>Duration</Text>,\n    rest: <Text id='workout.graph.rest'>Rest</Text>,\n    ascend: <Text id='workout.graph.ascend' />,\n    plan: <Text id='workout.graph.plan' />,\n    speedAvg: <Text id='workout.graph.speedavg'>Speed</Text>,\n    loadIndex: <Text id='workout.graph.loadindex'>Loadindex</Text>,\n\n    avgDogs: <Text id='workout.graph.avgdogs'>Avg dogs</Text>,\n    avgImages: <Text id='workout.graph.avgimages'>Avg images</Text>,\n    sledWeight: <Text id='workout.graph.sledweight'>Sled weight</Text>,\n    rating: <Text id='workout.graph.rating'>Rating</Text>,\n    temperature: <Text id='workout.graph.temperature'>Temperature</Text>,\n}))\n@observer\nclass WorkoutGraph extends Component {\n    render() {\n        const { userStore, workoutPlanStore } = this.props.stores;\n        const {\n            user,\n\t\t\tworkoutSummary,\n\t\t\tgraphWorkoutSummaryWeekDistanceCurrent, graphWorkoutSummaryWeekDistancePrev,\n\t\t\tgraphWorkoutSummaryWeekElevationCurrent, graphWorkoutSummaryWeekElevationPrev,\n            avgDayDistance, avgDayElevation, \n            avgDayDuration, avgDaySpeedAvg, avgDayLoadIndex, \n            avgDayAvgDogs, avgDayAvgImages, avgDaySledWeight,\n            avgDayRest, avgDayRating, avgDayTemperature,\n\t\t} = userStore;\n        const { settings = {} } = user;\n        const { graphPlanWeekDistanceCurrent } = workoutPlanStore;\n\n        const currentMonth = new Date().getMonth() + 1;\n        const currentYear = new Date().getFullYear();\n\n        const {\n            isLoading,\n            week,\n            distance,\n            duration,\n            rest,\n            ascend,\n            plan,\n            speedAvg,\n            loadIndex,\n            avgDogs,\n            avgImages,\n            sledWeight,\n            rating,\n            temperature,\n            year = currentYear,\n            month = currentMonth,\n            showExtra = false,\n        } = this.props;\n\t\tconst seasonStart = parseInt(month < 8 ? year - 1 : year, 10);\n\n        // const summaryMonth = workoutPlanStore.findWorkoutPlanSummaryMonth(year, monthNum) || {};\n        const seasonWeeks = util.weekRange(`${seasonStart}-08-01`, `${seasonStart + 1}-07-31`);\n        const seasonDays = util.dayRange(`${seasonStart}-08-01`, `${seasonStart + 1}-07-31`);\n\n        const xTicksAll = seasonWeeks.map(wo => wo.week);\n        const parts = Math.floor(xTicksAll.length / 5);\n        const xTicks = [];\n        for (let i = 0, l = xTicksAll.length; i < l; i += parts) {\n            xTicks.push(xTicksAll[i]);\n        }\n\n        const xTicksAllDays = seasonDays.map(wo => `${wo.day}.${wo.month}`);\n        const partsDays = Math.floor(xTicksAllDays.length / 5);\n        const xTicksDays = [];\n        for (let i = 0, l = xTicksAllDays.length; i < l; i += partsDays) {\n            xTicksDays.push(xTicksAllDays[i]);\n        }\n\n        return (\n            <>\n                {/* <h5><Text id='workout.graph.title'>Treningsstatistikk</Text> {seasonStart} - {seasonStart + 1}</h5> */}\n                <div class='w-100 mt-3 mb-4 border-top pt-5'>\n                    {/* <xmp>graphWorkoutSummaryWeekDistanceCurrent: {JSON.stringify(graphWorkoutSummaryWeekDistanceCurrent, null, 4)}</xmp>\n                    <xmp>graphWorkoutSummaryWeekDistancePrev: {JSON.stringify(graphWorkoutSummaryWeekDistancePrev, null, 4)}</xmp> */}\n                    <h5 class='text-center'><Text id='workout.graph.total-distance'>Total distance</Text></h5>\n                    <LineGraph\n                        stores={this.props.stores}\n                        width={500}\n                        height={200}\n                        showXTicks={1}\n                        xTicksVal={val => `${week} ${val}`}\n                        xTicks={xTicks}\n                        paddingTop={30}\n                        lineFromXzero={true}\n                        lineFromXmax={true}\n                        xTicksLink={'/workouts/week/'}\n\n                        dataLeft={[graphWorkoutSummaryWeekDistanceCurrent, graphWorkoutSummaryWeekDistancePrev, graphPlanWeekDistanceCurrent]}\n                        legendLeft={[`${seasonStart} ${distance}`, `${seasonStart - 1} ${distance}`, `${seasonStart} ${plan}`]}\n                        dataFillLeft={[1]}\n                        // yMaxLeft={30}\n                        // yMinLeft={0}\n                        showYTicksLeft={1}\n                        yTicksLeftPostfix={settings.imperial ? 'mi' : 'km'}\n                        unitLeft={settings.imperial ? ['mi', 'mi', 'mi'] : ['km', 'km', 'km']}\n                        avgWindowLeft={[0, 0, 0]}\n                        smoothLeft={[1, 1, 1]}\n\n                        dataRight={[graphWorkoutSummaryWeekElevationCurrent, graphWorkoutSummaryWeekElevationPrev]}\n                        legendRight={[`${seasonStart} ${ascend}`, `${seasonStart - 1} ${ascend}`]}\n                        showYTicksRight={1}\n                        yTicksRightPostfix={settings.imperial ? 'ft' : 'm'}\n                        unitRight={settings.imperial ? ['ft', 'ft'] : ['m', 'm']}\n                        avgWindowRight={[0, 0]}\n                        smoothRight={[1, 1]}\n\n                        // marker={week}\n                    />\n                </div>\n\n                {!isLoading && graphWorkoutSummaryWeekDistanceCurrent && graphWorkoutSummaryWeekDistanceCurrent.length < 3 && (\n                    <div class='mb-5 py-3 border-top border-bottom'>\n                        <div class='text-left' style='line-height: 1.0em;'>\n                            <div class='display-4 float-left text-warning mr-3'>\n                                <i class='fas fa-paw' />\n                            </div>\n                            <small>\n                                <Text id='workout.graph.too-little-data'>Forelpig er det litt lite data for  kunne vise noen fine grafer. \n                                Etterhvert som du legger inn flere treninger s vil dette bli en fin tabell og graf som viser progresjonen din.</Text>\n                            </small>\n                        </div>\n                    </div>\n                )}\n                {showExtra && <>\n                    <div class='w-100 mt-3 mb-4 mt-5 pt-5 border-top'>\n                        <h5 class='text-center'><Text id='workout.graph.avg-rating'>Average rating/day</Text></h5>\n                        <LineGraph\n                            stores={this.props.stores}\n                            width={500}\n                            height={200}\n                            showXTicks={1}\n                            xTicksVal={val => `${val}`}\n                            xTicks={xTicksDays}\n                            paddingTop={30}\n                            lineFromXzero={true}\n                            lineFromXmax={true}\n                            // xTicksLink={'/workouts/week/'}\n\n                            dataLeft={[avgDayRating]}\n                            legendLeft={[`${seasonStart} ${rating}`]}\n                            // dataFillLeft={[1]}\n                            // yMaxLeft={30}\n                            // yMinLeft={0}\n                            showYTicksLeft={1}\n                            // yTicksLeftPostfix={settings.imperial ? 'mph' : 'km/t'}\n                            // unitLeft={settings.imperial ? ['mph', 'mph', 'mph'] : ['km/t', 'km/t', 'km/t']}\n                            avgWindowLeft={[0, 0, 0]}\n                            smoothLeft={[0, 0, 0]}\n\n                            dataRight={[avgDayTemperature]}\n                            legendRight={[`${seasonStart} ${temperature}`]}\n                            showYTicksRight={1}\n                            yTicksRightPostfix={settings.imperial ? 'F' : 'C'}\n                            // unitRight={settings.imperial ? ['ft', 'ft'] : ['m', 'm']}\n                            avgWindowRight={[0, 0]}\n                            smoothRight={[0, 0]}\n\n                            // marker={week}\n                        />\n                    </div>\n\n                    <div class='w-100 mt-3 mb-4 mt-5 pt-5 border-top'>\n                        <h5 class='text-center'><Text id='workout.graph.avg-distance'>Average distance/day</Text></h5>\n                        <LineGraph\n                            stores={this.props.stores}\n                            width={500}\n                            height={200}\n                            showXTicks={1}\n                            xTicksVal={val => `${val}`}\n                            xTicks={xTicksDays}\n                            paddingTop={30}\n                            lineFromXzero={true}\n                            lineFromXmax={true}\n                            // xTicksLink={'/workouts/week/'}\n\n                            dataLeft={[avgDayDistance]}\n                            legendLeft={[`${seasonStart} ${distance}`]}\n                            // dataFillLeft={[1]}\n                            // yMaxLeft={30}\n                            // yMinLeft={0}\n                            showYTicksLeft={1}\n                            yTicksLeftPostfix={settings.imperial ? 'mi' : 'km'}\n                            unitLeft={settings.imperial ? ['mi', 'mi', 'mi'] : ['km', 'km', 'km']}\n                            avgWindowLeft={[0, 0, 0]}\n                            smoothLeft={[0, 0, 0]}\n\n                            dataRight={[avgDayElevation]}\n                            legendRight={[`${seasonStart} ${ascend}`]}\n                            showYTicksRight={1}\n                            yTicksRightPostfix={settings.imperial ? 'ft' : 'm'}\n                            unitRight={settings.imperial ? ['ft', 'ft'] : ['m', 'm']}\n                            avgWindowRight={[0, 0]}\n                            smoothRight={[0, 0]}\n\n                            // marker={week}\n                        />\n                    </div>\n\n                    <div class='w-100 mt-3 mb-4 mt-5 pt-5 border-top'>\n                        <h5 class='text-center'><Text id='workout.graph.avg-duration'>Average duration/day</Text></h5>\n                        <LineGraph\n                            stores={this.props.stores}\n                            width={500}\n                            height={200}\n                            showXTicks={1}\n                            xTicksVal={val => `${val}`}\n                            xTicks={xTicksDays}\n                            paddingTop={30}\n                            paddingLeft={50}\n                            yTicksLeftWidth={'50px'}\n                            lineFromXzero={true}\n                            lineFromXmax={true}\n                            // xTicksLink={'/workouts/week/'}\n\n                            dataLeft={[avgDayDuration]}\n                            legendLeft={[`${seasonStart} ${duration}`]}\n                            yTicksLeftVal={val => `${util.secToHms(val)}`}\n\n                            // dataFillLeft={[1]}\n                            // yMaxLeft={30}\n                            // yMinLeft={0}\n                            showYTicksLeft={1}\n                            // yTicksLeftPostfix={settings.imperial ? 'mi' : 'km'}\n                            // unitLeft={settings.imperial ? ['mi', 'mi', 'mi'] : ['km', 'km', 'km']}\n                            avgWindowLeft={[0, 0, 0]}\n                            smoothLeft={[0, 0, 0]}\n\n                            dataRight={[avgDayRest]}\n                            legendRight={[`${seasonStart} ${rest}`]}\n                            showYTicksRight={1}\n                            yTicksRightVal={val => `${util.secToHms(val)}`}\n                            // yTicksRightPostfix={settings.imperial ? 'ft' : 'm'}\n                            // unitRight={settings.imperial ? ['ft', 'ft'] : ['m', 'm']}\n                            avgWindowRight={[0, 0]}\n                            smoothRight={[0, 0]}\n\n                            // marker={week}\n                        />\n                    </div>\n\n                    <div class='w-100 mt-3 mb-4 mt-5 pt-5 border-top'>\n                        <h5 class='text-center'><Text id='workout.graph.avg-speed'>Average speed/day</Text></h5>\n                        <LineGraph\n                            stores={this.props.stores}\n                            width={500}\n                            height={200}\n                            showXTicks={1}\n                            xTicksVal={val => `${val}`}\n                            xTicks={xTicksDays}\n                            paddingTop={30}\n                            lineFromXzero={true}\n                            lineFromXmax={true}\n                            // xTicksLink={'/workouts/week/'}\n\n                            dataLeft={[avgDaySpeedAvg]}\n                            legendLeft={[`${seasonStart} ${speedAvg}`]}\n                            // dataFillLeft={[1]}\n                            // yMaxLeft={30}\n                            // yMinLeft={0}\n                            showYTicksLeft={1}\n                            yTicksLeftPostfix={settings.imperial ? 'mph' : 'km/t'}\n                            unitLeft={settings.imperial ? ['mph', 'mph', 'mph'] : ['km/t', 'km/t', 'km/t']}\n                            avgWindowLeft={[0, 0, 0]}\n                            smoothLeft={[0, 0, 0]}\n\n                            dataRight={[avgDayLoadIndex]}\n                            legendRight={[`${seasonStart} ${loadIndex}`]}\n                            showYTicksRight={1}\n                            // yTicksRightPostfix={settings.imperial ? 'ft' : 'm'}\n                            // unitRight={settings.imperial ? ['ft', 'ft'] : ['m', 'm']}\n                            avgWindowRight={[0, 0]}\n                            smoothRight={[0, 0]}\n\n                            // marker={week}\n                        />\n                    </div>\n\n                    <div class='w-100 mt-3 mb-4 mt-5 pt-5 border-top'>\n                        <h5 class='text-center'><Text id='workout.graph.avg-dogs'>Average dogs/day</Text></h5>\n                        <LineGraph\n                            stores={this.props.stores}\n                            width={500}\n                            height={200}\n                            showXTicks={1}\n                            xTicksVal={val => `${val}`}\n                            xTicks={xTicksDays}\n                            paddingTop={30}\n                            lineFromXzero={true}\n                            lineFromXmax={true}\n                            // xTicksLink={'/workouts/week/'}\n\n                            dataLeft={[avgDayAvgDogs, avgDayAvgImages]}\n                            legendLeft={[`${seasonStart} ${avgDogs}`, `${seasonStart} ${avgImages}`]}\n                            // dataFillLeft={[1]}\n                            // yMaxLeft={30}\n                            // yMinLeft={0}\n                            showYTicksLeft={1}\n                            // yTicksLeftPostfix={settings.imperial ? 'mph' : 'km/t'}\n                            // unitLeft={settings.imperial ? ['mph', 'mph', 'mph'] : ['km/t', 'km/t', 'km/t']}\n                            avgWindowLeft={[0, 0, 0]}\n                            smoothLeft={[0, 0, 0]}\n\n                            dataRight={[avgDaySledWeight]}\n                            legendRight={[`${seasonStart} ${sledWeight}`]}\n                            showYTicksRight={1}\n                            // yTicksRightPostfix={settings.imperial ? 'ft' : 'm'}\n                            // unitRight={settings.imperial ? ['ft', 'ft'] : ['m', 'm']}\n                            avgWindowRight={[0, 0]}\n                            smoothRight={[0, 0]}\n\n                            // marker={week}\n                        />\n                    </div>\n\n                    {/* <xmp>{JSON.stringify(avgDayDuration, null, 4)}</xmp> */}\n                </>}\n            </>\n        );\n    }\n}\n\nexport default WorkoutGraph;\n","import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport { Text, Localizer } from 'preact-i18n';\n\nimport DogSimplePublic from './simplePublic';\n\n@observer\nclass DogScroller extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            imageIdx: 0,\n        };\n    }\n\n    scrollImages = (e) => {\n        const { dogs } = this.props;\n\n        const { scrollLeft, scrollWidth, clientWidth } = e.target;\n        const imageStep = clientWidth;\n        const imageIdx = scrollLeft / imageStep;\n        // console.log({ e, imageStep, imageIdx, scrollLeft, scrollWidth, clientWidth });\n\n        const nearestInt = Math.round(imageIdx);\n        const diff = Math.abs(nearestInt - imageIdx);\n        // console.log({ nearestInt, diff });\n        if (Number.isInteger(imageIdx) || diff < 0.1) {\n            this.setState({\n                imageIdx: nearestInt,\n            });\n        }\n    }\n\n    sortByName = (a, b) => {\n        const { allDogs = [] } = this.props;\n        const dogA = allDogs.find(e => e.id === a);\n        const dogB = allDogs.find(e => e.id === b);\n        if (dogA && dogB) {\n            if (dogA.name > dogB.name) {\n                return 1;\n            }\n        }\n        return -1;\n    }\n\n    render() {\n        const { imageIdx } = this.state;\n        const { dogs, allDogs = [], size = 'medium', onDogClick = () => {} } = this.props;\n\n        return (\n            <div class='w-100'>\n                <div\n                    class='d-flex flex-row flex-nowrap no-scrollbar'\n                    style='overflow: auto; scroll-snap-type: x mandatory;'\n                    onScroll={this.scrollImages}\n                >\n                    {dogs && dogs.sort(this.sortByName).map((dogId, idx) => {\n                        const dog = allDogs.find(e => e.id === dogId);\n                        if (!dog) {\n                            return '';\n                        }\n                        return (\n                            <div class='col clearfix position-relative p-0 mx-2'>\n                                <div\n                                    class={`w-100 h-100 text-center rounded-lg imageContainer d-flex justify-content-center align-items-center`}\n                                    style={`\n                                        flex-wrap: wrap;\n                                        overflow-y: hidden;\n                                    `}\n                                    onTouchstart={(e) => { e.stopPropagation(); }}\n                                    onTouchend={(e) => { e.stopPropagation(); }}\n                                    onTouchmove={(e) => { e.stopPropagation(); }}\n                                >\n                                    <DogSimplePublic\n                                        stores={this.props.stores}\n                                        dog={dog}\n                                        dogs={allDogs.filter(d => dogs.indexOf(d.id) > -1).sort((a, b) => a.name > b.name ? 1 : -1)}\n                                        className='mx-auto'\n                                        showName={true}\n                                        showPosition={false}\n                                        size={size}\n                                        onDogClick={onDogClick} \n                                    />\n                                    {/* <xmp>{JSON.stringify(img, null, 4)}</xmp> */}\n                                </div>\n                            </div>\n                        );\n                    })}\n                </div>\n            </div>\n        );\n    }\n}\n\nexport default DogScroller;\n","import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport { Text, Localizer, withText } from 'preact-i18n';\n\nimport Speed from '../../components/data/speed';\nimport Elevation from '../../components/data/elevation';\nimport Weight from '../../components/data/weight';\nimport Distance from '../../components/data/distance';\nimport Temperature from '../../components/data/temperature';\n\nimport mu from '../../lib/musher-util';\n\n@withText((props) => ({\n    week: <Text id='workout.graph.week' />,\n    distance: <Text id='workout.graph.distance' />,\n    ascend: <Text id='workout.graph.ascend' />,\n    plan: <Text id='workout.graph.plan' />,\n}))\n@observer\nclass WorkoutTable extends Component {\n    render() {\n        const { userStore } = this.props.stores;\n\n        const currentMonth = new Date().getMonth() + 1;\n        const currentYear = new Date().getFullYear();\n\n        const { isLoading, year = currentYear, month = currentMonth, showHeader = true } = this.props;\n\t\tconst seasonStart = parseInt(month < 8 ? year - 1 : year, 10);\n\n        const { user } = userStore;\n        const { language = 'en' } = user;\n\t\tconst MONTHS = mu.getMonths(language);\n\n\n        // const summaryMonth = workoutPlanStore.findWorkoutPlanSummaryMonth(year, monthNum) || {};\n        const seasonMonths = util.monthRange(`${seasonStart}-08-01`, `${seasonStart + 1}-07-31`);\n        const prevSeasonMonths = util.monthRange(`${seasonStart - 1}-08-01`, `${seasonStart}-07-31`);\n        const seasonWeeks = util.weekRange(`${seasonStart}-08-01`, `${seasonStart + 1}-07-31`);\n\n        const xTicksAll = seasonWeeks.map(wo => wo.week);\n        const parts = xTicksAll.length % 6;\n        const partSize = Math.floor(xTicksAll.length / parts);\n        const xTicks = [];\n        for (let i = 0, l = xTicksAll.length; i < l; i += partSize) {\n            xTicks.push(xTicksAll[i]);\n        }\n\n        return (\n            <>\n                {showHeader && <h5><Text id='workout.graph.title'>Treningsstatistikk</Text> {seasonStart} - {seasonStart + 1}</h5>}\n                <div class='w-100 mt-3 mb-4'>\n                    {/* <xmp>graphWorkoutSummaryWeekDistanceCurrent: {JSON.stringify(graphWorkoutSummaryWeekDistanceCurrent, null, 4)}</xmp>\n                    <xmp>graphWorkoutSummaryWeekDistancePrev: {JSON.stringify(graphWorkoutSummaryWeekDistancePrev, null, 4)}</xmp> */}\n                    <div class='table-responsive-lg'>\n                        <table class='table table-sm table-striped font-weigth-lighter border-bottom'>\n                            <thead>\n                                <tr>\n                                    <th class='text-center'><Text id='workout.graph.season'>Sesong</Text></th>\n                                    {seasonMonths.map(m => (\n                                        <th class='text-center'><a href={`/workouts/month/${m.month}/${m.year}`}>{MONTHS[m.month - 1]}</a></th>\n                                    ))}\n                                </tr>\n                            </thead>\n                            <tbody>\n                                <tr>\n                                    <th scope='row' style='padding: .15rem;'><nobr>{seasonStart - 1} - {seasonStart}</nobr></th>\n                                    {prevSeasonMonths.map(m => {\n                                        // const summaryMonth = workoutPlanStore.findWorkoutPlanSummaryMonth(m.year, m.month) || {};\n                                        return (\n                                            <>\n                                                <td class='text-right px-3'>\n                                                    {/* <nobr>{summaryMonth.distance}</nobr><br /> */}\n                                                    <nobr>\n                                                        <Distance stores={this.props.stores} value={userStore.findWorkoutSummaryMonth(m.year, m.month)} smallUnit={true} />\n                                                    </nobr><br />\n                                                    <nobr>\n                                                        <Elevation stores={this.props.stores} value={userStore.findWorkoutSummaryMonth(m.year, m.month, 'elevation')} smallUnit={true} />\n                                                    </nobr><br />\n                                                </td>\n                                            </>\n                                        );\n                                    })}\n                                </tr>\n                                <tr>\n                                    <th scope='row' style='padding: .15rem;'><nobr>{seasonStart} - {seasonStart + 1}</nobr></th>\n                                    {seasonMonths.map(m => {\n                                        // const summaryMonth = workoutPlanStore.findWorkoutPlanSummaryMonth(m.year, m.month) || {};\n                                        return (\n                                            <>\n                                                <td class='text-right px-3'>\n                                                    <nobr>\n                                                        <Distance stores={this.props.stores} value={userStore.findWorkoutSummaryMonth(m.year, m.month)} smallUnit={true} />\n                                                    </nobr><br />\n                                                    <nobr>\n                                                        <Elevation stores={this.props.stores} value={userStore.findWorkoutSummaryMonth(m.year, m.month, 'elevation')} smallUnit={true} />\n                                                    </nobr><br />\n                                                </td>\n                                            </>\n                                        );\n                                    })}\n                                </tr>\n                            </tbody>\n                        </table>\n                    </div>\n\n                </div>\n            </>\n        );\n    }\n}\n\nexport default WorkoutTable;\n","import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport { Text, Localizer, withText } from 'preact-i18n';\n\nimport Speed from '../../components/data/speed';\nimport Elevation from '../../components/data/elevation';\nimport Weight from '../../components/data/weight';\nimport Distance from '../../components/data/distance';\nimport Temperature from '../../components/data/temperature';\n\n@observer\nclass Strava extends Component {\n    toggleDate = (e) => {\n        e.stopPropagation();\n        e.preventDefault();\n        const { showDate } = this.state;\n        this.setState({ showDate: !showDate });\n    }\n\n    ignoreStravaWorkout = async (e) => {\n        e.stopPropagation();\n        const id = e.target.parentElement.dataset.id || e.target.dataset.id;\n        const { stravaActivityStore } = this.props.stores;\n\t\tawait stravaActivityStore.ignoreWorkout(id);\n        this.loadStravaActivities();\n    }\n\n    importStravaWorkout = async (e) => {\n        e.stopPropagation();\n        const id = e.target.parentElement.dataset.id || e.target.dataset.id;\n        const { stravaActivityStore, workoutStore } = this.props.stores;\n\t\tconst { currentTeam } = workoutStore;\n\t\tawait stravaActivityStore.importWorkout(id, currentTeam);\n        this.loadStravaActivities();\n        this.loadWorkouts();\n    }\n\n    async loadStravaActivities() {\n\t\tconst { stravaActivityStore } = this.props.stores;\n\t\tstravaActivityStore.load({ query: { hideImported: 1 }});\n\t}\n\n    loadWorkouts = async () => {\n\t\tconst { workoutStore } = this.props.stores;\n\t\tconst { currentTeam } = workoutStore;\n\t\tawait workoutStore.load({ query: { team: currentTeam } });\n\t}\n\n    toggleDetail = () => {\n        const { showDetail = false } = this.state;\n        this.setState({\n            showDetail: !showDetail,\n        });\n    }\n\n\tcomponentDidMount() {\n\t\tthis.loadStravaActivities();\n\t}\n\n    render() {\n        const { showDate, showDetail = false } = this.state;\n        const { activities, showDate: forceShowDate } = this.props;\n\t\tconst { userStore, workoutStore } = this.props.stores;\n        const { currentTeam } = workoutStore;\n        const { team } = userStore;\n\n        const selectedTeam = userStore.findTeam(currentTeam || team.id);\n\n         if (!showDetail) {\n            if (activities && activities.length > 0) {\n                return (<>\n                    <div class='col-12 mb-3'>\n                        <button type='button' class='btn btn-block btn-outline-info' onClick={this.toggleDetail}>\n                            <div class={`float-right ml-2 text-center border rounded-circle imageRounded imageRoundedIcon`} style={`background-image: url('./assets/strava-icon.png');`} />\n                            <Text id='workout.index.strava-workouts'>Strava workouts / not imported</Text> {activities.length}\n                        </button>\n                    </div>\n                </>);\n            }\n            return (<></>);\n        }\n\n        return (<>\n            <div class='col-12 mb-3'>\n                <div class='row'>\n                    {activities && activities.length > 0 && (\n                        <div\n                            class='col-12 border-top border-bottom pt-3 pb-3 my-2 bg-light'\n                        >\n                            <button type='button' class='float-right btn btn-sm btn-link' onClick={this.toggleDetail}>\n                                <i class='fas fa-caret-up' /> <Text id='strava.hide-list'>Hide list</Text>\n                            </button>\n                            <h5><Text id='workout.index.strava-workouts'>Strava workouts / not imported</Text> {activities.length}</h5>\n                            {activities && activities.map(activity => {\n                                const { summary = {} } = activity;\n                                const startDate = util.parseInputDate(summary.startTimeInSeconds);\n\n                                return (<>\n                                    {/* <td>{util.secToHms(activity.moving_time)}</td> */}\n                                    {/* <td>{util.secToHms(activity.elapsed_time)}</td> */}\n\n                                    <div class='col-12 d-flex mb-4 position-relative'>\n                                        <div class={`text-center border rounded-circle imageRounded`} style={`background-image: url(\"./assets/strava-icon.png\"); border-width: 3px !important;`}>\n                                            &nbsp;\n                                        </div>\n                                        <div class='flex-grow-1 pl-3' style='line-height: 1.2em;'>\n                                            <h5 class='my-0 mb-1' style='line-height: 1.0em;'>{activity.name}</h5>\n                                            {activity.type}<br />\n                                            <small class='text-muted'>\n                                                {activity.start_date && <small onClick={this.toggleDate}>\n                                                    {forceShowDate || showDate ? util.formatDate(activity.start_date, { locale: 'no-NB' }) : util.formatDistance(activity.start_date, new Date(), { locale: 'no-NB' })}\n                                                </small>}\n                                                <span class='text-muted'>\n                                                    <i class='fas fa-road ml-2' /> <Distance stores={this.props.stores} value={activity.distance / 1000} />\n                                                    <i class='fas fa-mountain ml-2' /> <Elevation stores={this.props.stores} value={activity.total_elevation_gain} />\n                                                    <i class='fas fa-tachometer-alt ml-2' /> <Speed stores={this.props.stores} value={activity.average_speed * 3.6} />\n                                                    <i class='fas fa-stopwatch ml-2' /> {util.secToHms(activity.elapsed_time)}\n                                                </span>\n                                            </small>\n                                            <br />\n                                            <button class='btn btn-sm btn-block btn-primary' onClick={this.importStravaWorkout} data-id={activity.id}>\n                                                <i class='fas fa-file-import' /> <Text id='strava.import'>Import workout</Text> <i class='fas fa-arrow-right' /> {selectedTeam}\n                                            </button>\n                                            <button class='btn btn-sm btn-link' onClick={this.ignoreStravaWorkout} data-id={activity.id}>\n                                                <i class='fas fa-trash-alt' /> <Text id='strava.ignore'>Ignore workout</Text>\n                                            </button>\n                                        </div>\n                                    </div>\n                                </>);\n                            })}\n\n                            <button type='button' class='btn btn-block btn-primary mt-3' onClick={this.toggleDetail}>\n                                <i class='fas fa-caret-up' /> <Text id='strava.hide-list'>Hide list</Text>\n                            </button>\n                        </div>\n                    )}\n                </div>\n            </div>\n        </>);\n    }\n}\n\nexport default Strava;\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"gaugeBackground\":\"gaugeBackground__1UGxt\",\"gauge\":\"gauge__2ZDxd\",\"success\":\"success__3UQxg\",\"primary\":\"primary__3pPV6\",\"secondary\":\"secondary__-Vrk_\",\"info\":\"info__3t5zs\",\"warning\":\"warning__1jHlR\",\"danger\":\"danger__BLVC9\",\"gaugeText\":\"gaugeText__1on-w\"};","import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport { Text, Localizer, withText } from 'preact-i18n';\n\nimport mu from '../../lib/musher-util';\n\nconst initialState = {\n\tshowAddComment: false,\n};\n\n@withText(() => ({\n    subject: <Text id='ad.subject'>Annonseforesprsel</Text>,\n    body: <Text id='ad.body'>Hei, Jeg nsker  vite mer om annonsering i appen The Musher.</Text>,\n}))\n\n@observer\nclass Ad extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            ...initialState,\n        };\n        this.updateTimer = {};\n\t\tthis.inputRef = {};\n        this.apiServer = util.getApiServer();\n    }\n\n\tasync loadAd(props = this.props) {\n\t\tthis.setState({ isLoading: true });\n\t\tconst { adStore, workoutStore, userStore, appState } = this.props.stores;\n        const { section } = this.props;\n        const { path: url = '' } = appState;\n        const { currentTeam } = workoutStore;\n        const { user } = userStore;\n        const { language = 'en' } = user;\n        let team = {};\n        let ambitions;\n        let type;\n        let postalcode;\n        let place;\n        let country;\n        if (currentTeam) {\n            team = userStore.findTeam(currentTeam, true);\n            if (team && team.id) {\n                ambitions = userStore.findTeamAmbition({ ambition: team.ambitions, language });\n                type = userStore.findTeamType({ type: team.type, language });\n                postalcode = team.postalcode;\n                place = team.place;\n                country = team.country;\n            }\n        }\n        // console.log({ currentTeam, team, ambitions,  type, postalcode, place, country });\n        // const { url = '' } = this.props;\n        let page = url.replace(/\\d+$/, 'detail');\n        page = url.replace(/\\/\\d+/, '/detail');\n\n        // props: { \"url\": \"/\" }\n        // props: { \"url\": \"/workouts/\" }\n        // props: { \"url\": \"/workouts/4708\" }\n        // props: { \"url\": \"/dogs\" }\n        // props: { \"url\": \"/dogs/10\" }\n\n\t\tawait adStore.load({ query: { page, section }});\n        adStore.setTime();\n\t\tthis.setState({ isLoading: false });\n\t}\n\n    logClick = async () => {\n        const { adStore, userStore } = this.props.stores;\n        const { ads = [] } = adStore;\n        let id = ads.length > 0 ? ads[0].id : null;\n        const { user = {} } = userStore;\n        await adStore.logClick({ id, user: user.id });\n    }\n\n\tcomponentDidMount() {\n\t\tthis.loadAd();\n\t}\n\n    componentWillReceiveProps(nextProps) {\n        // console.log('componentWillReceiveProps', nextProps);\n        if (nextProps.path !== this.props.path) {\n            this.loadAd(nextProps);\n        }\n    }\n\n    render() {\n        const { adStore, userStore, appState } = this.props.stores;\n        const { subject, body, section } = this.props;\n        const { path } = appState;\n        const { user = {} } = userStore;\n        const { ads = [], time, adViews, adClicks } = adStore;\n        if (!user || !user.id || !ads || ads.length === 0) {\n            if (path.match(/\\/(home)/i)) {\n                return <>\n                    <div class='w-100'>\n                        <div class='row'>\n                            <div class='col-12 col-sm-8 col-lg-6 offset-sm-2 offset-lg-3 mb-0 position-relative'>\n                                <div class='border rounded-lg p-4 my-3'>\n                                    <span class='float-right display-4 text-warning'>\n                                        <i class='far fa-smile-wink' />\n                                    </span>\n                                    <h5><Text id='ad.heading'>Vil du annonsere her?</Text></h5>\n                                    <div><Text id='ad.teaser'>Det er super enkelt :)</Text></div>\n                                    <Localizer>\n                                        <a href={`mailto:post@themusher.no?subject=${subject}: ${path}: ${section}&body=${body}`} target='_blank' rel='noreferrer'>\n                                            <i class='fas fa-paper-plane' /> <Text id='ad.linktext'>Ta kontakt med The Musher</Text>\n                                        </a>\n                                    </Localizer>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </>;\n            }\n            return <></>;\n        }\n        const ad = ads[0];\n        return (\n            <>\n                <div class='w-100'>\n                    <div class='row'>\n                        <div class='col-12 col-sm-8 col-lg-6 offset-sm-2 offset-lg-3 mb-0 position-relative'>\n                            <div>\n                                <small><small class='text-muted'>\n                                    <Text id='ad.ad'>Annonse</Text>:\n                                    <img src={`${this.apiServer}/api/ads/${ad.id}/view?user=${user.id}&time=${time}`} style='width: 1; height: 1; opacity: 0.1;' />\n                                </small></small>\n                            </div>\n                            {ad.target ? <>\n                                <a\n                                    class='stretched-link'\n                                    href={`${ad.url}`}\n                                    target={ad.target || '_blank'}\n                                    rel='noopener noreferrer'\n                                    onClick={this.logClick}\n                                    native\n                                >\n                                    {ad.images && ad.images[0] && <>\n                                        <img src={ad.images[0].s3LargeLink} class='img-fluid rounded-lg' />\n                                    </>}\n                                </a>                            \n                            </> : <>\n                                <a\n                                    class='stretched-link'\n                                    href={`${ad.url}`}\n                                    onClick={this.logClick}\n                                >\n                                    {ad.images && ad.images[0] && <>\n                                        <img src={ad.images[0].s3LargeLink} class='img-fluid rounded-lg' />\n                                    </>}\n                                </a>\n                            </>}\n                        </div>\n                    </div>\n                </div>\n            </>\n        );\n    }\n}\n\nexport default Ad;\n","import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport { Text, Localizer } from 'preact-i18n';\n\nimport mu from '../../lib/musher-util';\n\nfunction meterToFeet(value) {\n    return 3.28084 * value;\n}\n\n@observer\nclass Elevation extends Component {\n    render() {\n\t\tconst { value = 0, smallUnit } = this.props;\n\t\tconst { userStore } = this.props.stores;\n\t\tconst { user } = userStore;\n\t\tconst { settings = {} } = user;\n\n        if (settings.imperial) {\n            return (<>\n                <nobr>\n                    {util.format(meterToFeet(value), 0)} {smallUnit ? <><small><small><small class='ml-0 text-muted'>ft</small></small></small></> : <>ft</>}\n                </nobr>\n            </>);\n        }\n\n\t\treturn (<>\n            <nobr>\n                {util.format(value, 0)} {smallUnit ? <><small><small><small class='ml-0 text-muted'>m</small></small></small></> : <>m</>}\n            </nobr>\n        </>);\n    }\n}\n\nexport default Elevation;\n","import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport { Text, Localizer } from 'preact-i18n';\n\nimport mu from '../../lib/musher-util';\n\nfunction kmtToMph(value) {\n    return 0.621371 * value;\n}\n\n@observer\nclass Speed extends Component {\n    render() {\n\t\tconst { value = 0, smallUnit } = this.props;\n\t\tconst { userStore } = this.props.stores;\n\t\tconst { user } = userStore;\n\t\tconst { settings = {} } = user;\n\n        if (settings.imperial) {\n            return (<>\n                <nobr>\n                    {util.format(kmtToMph(value), 1)} {smallUnit ? <><small><small><small class='ml-0 text-muted'><Text id='workouts.mph'>mph</Text></small></small></small></> : <><Text id='workouts.mph'>mph</Text></>}\n                </nobr>\n            </>);\n        }\n\n\t\treturn (<>\n            <nobr>\n                {util.format(value, 1)} {smallUnit ? <><small><small><small class='ml-0 text-muted'><Text id='workouts.kmt'>km/t</Text></small></small></small></> : <><Text id='workouts.kmt'>km/t</Text></>}\n            </nobr>\n        </>);\n    }\n}\n\nexport default Speed;\n","import { h, Component } from 'preact';\nimport { observer } from 'mobx-preact';\nimport { toJS } from 'mobx';\nimport util from 'preact-util';\n\nimport DragNDropFileupload from './dragNdropFileupload';\n\n@observer\nclass Images extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            files: [],\n        };\n    }\n    \n    handleAddImage = (file) => {\n        const { addToImages = true } = this.props;\n\n        // <Images saved={saved} object={dog} field={field} updateField={updateField} />\n        // updateFieldValue = ({ id, field, value, datatype, elementtype, isNew = false, skipTimer = false }) => {\n        const {\n            updateField,\n            object,\n            field,\n        } = this.props;\n\n        if (field) {\n            updateField({ id: object.id, field, value: file, skipTimer: true });\n        }\n\n        // let images = toJS(object.images);\n        // if (!util.isArray(images)) {\n        //     images = [];\n        // }\n        if (addToImages) {\n            const images = [];\n            images.push(file);\n            updateField({ id: object.id, field: 'images', value: images, skipTimer: true });\n        }\n        // const allImages = [];\n        // allImages.push(file);\n        // updateField({ id: object.id, field: 'allImages', value: allImages, skipTimer: true });\n    };\n\n    render() {\n        const { uploadStatus = () => {}, before = () => {}, after = () => {}, autoOpen = true } = this.props;\n        return (\n            <div class='row'>\n                <div class='col-12'>\n                    <DragNDropFileupload\n                        handleAddImage={this.handleAddImage}\n                        uploadStatus={uploadStatus}\n                        apiUrl={'/api/fileupload'}\n                        before={before}\n                        after={after}\n                        autoOpen={autoOpen}\n                    >\n                        <div style={{ height: 30, width: '100%' }}>\n                            {/* {files.map((file, idx) => (\n                                <div key={idx}>\n                                    {file.name}\n                                    Total: {util.asString(file, 'load', 'total')}\n                                    <img style='width: 48px;'\n                                        alt='Preview'\n                                        key={file.preview}\n                                        src={file.src}\n                                    />\n                                </div>\n                            ))} */}\n                        </div>\n                    </DragNDropFileupload>\n                </div>\n            </div>\n        );\n    }\n}\n\nexport default Images;\n","import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport { Text, Localizer } from 'preact-i18n';\n\nimport ScrollIntoView from '../../components/util/scrollIntoView';\n\n@observer\nclass Teams extends Component {\n    toggleTeam = (team) => {\n\t\tconst { callback, unsetTeamIfSelected = true } = this.props;\n        const { dogStore, workoutStore } = this.props.stores;\n\t\tconst { currentTeam } = dogStore;\n\t\tif (unsetTeamIfSelected && team === currentTeam) {\n\t\t\tdogStore.setCurrentTeam(undefined);\n\t\t\tworkoutStore.setCurrentTeam(undefined);\n\t\t} else {\n\t\t\tdogStore.setCurrentTeam(team);\n\t\t\tworkoutStore.setCurrentTeam(team);\n\t\t}\n\t\tif (util.isDefined(callback)) {\n\t\t\tcallback();\n\t\t}\n\t}\n\n    showAllTeams = () => {\n\t\tconst { callback } = this.props;\n        const { dogStore, workoutStore } = this.props.stores;\n\t\tdogStore.setCurrentTeam(undefined);\n\t\tworkoutStore.setCurrentTeam(undefined);\n\t\tif (util.isDefined(callback)) {\n\t\t\tcallback();\n\t\t}\n\t}\n\n\t// componentDidMount() {\n\t// \tif (this.container) {\n\t// \t\tthis.container.scrollIntoView({ behavior: 'smooth', block: 'end', inline: 'center' });\n\t// \t}\n\t// }\n\n    render() {\n        const { userStore, dogStore } = this.props.stores;\n        const { teams } = userStore;\n\t\tconst { currentTeam } = dogStore;\n\t\tconst { highlight, showAll = true } = this.props;\n        return (\n\t\t\t<div class='row mt-2'>\n\t\t\t\t<div class='w-100 overflow-hidden'>\n\t\t\t\t\t<div\n\t\t\t\t\t\tclass='d-flex flex-row flex-nowrap pb-2 px-1 no-scrollbar'\n\t\t\t\t\t\tstyle='overflow: auto; scroll-snap-type: x mandatory;'\n\t\t\t\t\t>\n\t\t\t\t\t\t{/* <xmp><br /><br /><br /><br />{JSON.stringify(teams, null, 4)}</xmp> */}\n\t\t\t\t\t\t{teams && teams.map((team, idx) => {\n\t\t\t\t\t\t\tlet classNames;\n\t\t\t\t\t\t\tif (teams.length === 1) {\n\t\t\t\t\t\t\t\tclassNames = 'rounded-pill-both';\n\t\t\t\t\t\t\t} else if (idx === 0) {\n\t\t\t\t\t\t\t\tclassNames = 'rounded-pill-left';\n\t\t\t\t\t\t\t} else if (idx + 1 === teams.length) {\n\t\t\t\t\t\t\t\tclassNames = 'rounded-pill-right';\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t<div class='col mb-0 px-0 clearfix' key={team.id}>\n\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\tclass={`btn btn-sm btn-block \n\t\t\t\t\t\t\t\t\t\t\trounded-none ${classNames}\n\t\t\t\t\t\t\t\t\t\t\t${currentTeam === team.id ? 'btn-success' : 'btn-outline-success'}\n\t\t\t\t\t\t\t\t\t\t\ttext-nowrap clearfix`}\n\t\t\t\t\t\t\t\t\t\tstyle='text-overflow: ellipsis; overflow: hidden;'\n\t\t\t\t\t\t\t\t\t\tonClick={() => this.toggleTeam(team.id)}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<i class='fas fa-users' /> {team.name}\n\n\t\t\t\t\t\t\t\t\t\t{highlight && highlight.indexOf(team.id) > -1 && <>\n\t\t\t\t\t\t\t\t\t\t\t{currentTeam === team.id ? <>\n\t\t\t\t\t\t\t\t\t\t\t\t<i class='fas fa-check float-right' />\n\t\t\t\t\t\t\t\t\t\t\t</> : <>\n\t\t\t\t\t\t\t\t\t\t\t\t<div class='spinner-grow text-warning float-right' role='status'>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span class='sr-only'>Loading...</span>\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t<i class='far fa-hand-point-left float-right' style='font-size: 2.0em;' />   \n\t\t\t\t\t\t\t\t\t\t\t</>}\n\t\t\t\t\t\t\t\t\t\t</>}\n\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t{/* {currentTeam === team.id && <ScrollIntoView horizontal={'center'} vertical={'end'} />} */}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t})}\n\t\t\t\t\t</div>\n\t\t\t\t\t{showAll && <div class='row'>\n\t\t\t\t\t\t<div class='col-12 mb-1 px-1 d-flex justify-content-center'>\n\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\tclass={`btn btn-sm rounded-lg btn-link text-nowrap clearfix`}\n\t\t\t\t\t\t\t\tstyle='text-overflow: ellipsis; overflow: hidden;'\n\t\t\t\t\t\t\t\tonClick={this.showAllTeams}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<i class='fas fa-users' /> <Text id='teams.show-all'>Show all</Text>\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>}\n\t\t\t\t</div>\n\t\t\t</div>\n        );\n    }\n}\n\nexport default Teams;\n","import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport { toJS } from 'mobx';\nimport { Text, Localizer, withText } from 'preact-i18n';\nimport Markdown from 'preact-markdown';\n\nimport WorkoutReplyComment from '../../components/workout/commentReply';\n\nimport style from '../style.css';\nimport mu from '../../lib/musher-util';\n\nconst initialState = {\n    showAddComment: {},\n    showAllComments: false,\n    showAllReplies: {},\n    viewImageIdx: {},\n};\n\nconst MAX_COMMENTS = 1;\n\n@observer\nclass WorkoutComments extends Component {\n     constructor(props) {\n        super(props);\n        this.state = {\n            ...initialState,\n        };\n        this.inputRef = {};\n    }\n\n    likeComment = async (e) => {\n        const { callback = () => {} } = this.props;\n        const commentId = e.target.parentElement.dataset.id || e.target.dataset.id;\n\n        const { workout } = this.props;\n\t\tconst { workoutStore } = this.props.stores;\n\t\tconst response = await workoutStore.likeWorkoutComment({ id: workout.id, commentId });\n\n\t\tif (response && response.status === 200) {\n            callback({ type: 'likeComment', workout, commentId, response });\n\t\t}\n        return true;\n    }\n\n    likeReply = async (e) => {\n        const { callback = () => {} } = this.props;\n\n        const replyId = e.target.parentElement.dataset.id || e.target.dataset.id;\n        const commentId = e.target.parentElement.dataset.comment || e.target.dataset.comment;\n\n        const { workout } = this.props;\n\t\tconst { workoutStore } = this.props.stores;\n\t\tconst response = await workoutStore.likeWorkoutCommentReply({ id: workout.id, replyId, commentId });\n\n        if (response && response.status === 200) {\n            callback({ type: 'likeReply', workout, commentId, replyId, response });\n\t\t}\n    }\n\n    replyComment = async (e) => {\n        const commentId = e.target.parentElement.dataset.id || e.target.dataset.id;\n\n        const { showAddComment } = this.state;\n        showAddComment[commentId] = !showAddComment[commentId];\n\t\tthis.setState({\n\t\t\tshowAddComment,\n\t\t}, () => {\n            if (this.inputRef[commentId]) {\n                this.inputRef[commentId].focus();\n            }\n\t\t});\n    }\n\n    toggleComments = () => {\n\t\tconst { showAllComments } = this.state;\n\t\tthis.setState({\n\t\t\tshowAllComments: !showAllComments,\n\t\t});\n\t}\n\n    toggleReplies = (e) => {\n        const commentId = e.target.parentElement.dataset.id || e.target.dataset.id;\n\t\tconst { showAllReplies } = this.state;\n        showAllReplies[commentId] = !showAllReplies[commentId];\n\t\tthis.setState({\n\t\t\tshowAllReplies,\n\t\t});\n\t}\n\n    viewImage = (e) => {\n\t\tconst { id, idx } = e.target.closest('img').dataset;\n        const { viewImageIdx } = this.state;\n        viewImageIdx[id] = idx;\n        this.setState({ viewImageIdx });\n    }\n\n    translate = async (e) => {\n        e.preventDefault();\n        e.stopPropagation();\n        const { replyid, commentid } = e.target.closest('button').dataset;\n        const { workout } = this.props;\n        const { userStore, teamStore } = this.props.stores;\n        const { user } = userStore;\n        const { showOriginal = {}, translatedText = {} } = this.state;\n        const key = `${commentid}${replyid ? `-${replyid}`: ''}`;\n        showOriginal[key] = 0;\n        if (replyid) {\n            translatedText[key] = await teamStore.translateCommentReply({ commentid, replyid, object: workout, user });\n        } else {\n            translatedText[key] = await teamStore.translateComment({ commentid, object: workout, user });\n        }\n        this.setState({ showOriginal, translatedText });\n    }\n\n    showOriginal = (e) => {\n        const { replyid, commentid } = e.target.closest('button').dataset;\n        e.preventDefault();\n        e.stopPropagation();\n        const { showOriginal = {} } = this.state;\n        showOriginal[`${commentid}${replyid ? `-${replyid}`: ''}`] = 1;\n        this.setState({ showOriginal });\n    }\n\n    render() {\n        const { showAddComment, showAllComments, showAllReplies, viewImageIdx, showOriginal = {}, translatedText = {} } = this.state;\n\t\tconst { workout, callback = () => {}, col = 12, offset = 0, compact = false } = this.props;\n        const { userStore, teamStore } = this.props.stores;\n        const { user: currentUser, isAdmin } = userStore;\n        const { language = 'en' } = currentUser;\n\n        let filteredComments = [];\n        let totalComments = 0;\n        let diplayedComments = 0;\n        let max_comments;\n        if (workout.comments) {\n            totalComments = workout.comments.length;\n            if (showAllComments) {\n                filteredComments = workout.comments;\n            } else {\n                // filteredComments = workout.comments.slice(0, MAX_COMMENTS);\n                max_comments = compact ? 0 : MAX_COMMENTS;\n                filteredComments = workout.comments.slice(Math.max(totalComments - max_comments, 0));\n            }\n            diplayedComments = filteredComments.length;\n        }\n\n        return (\n            <div>\n                {/* {showAllComments && <div>\n                    <button class='btn btn-sm btn-link py-0 mb-2'\n                        onClick={this.toggleComments}\n                    >\n                        <Text id='comments.hide-all-comments'>Skjul alle kommentarene.</Text>\n                    </button>\n                </div>} */}\n                {workout && filteredComments && filteredComments.reverse().map((comment) => {\n                    const { user = {} } = comment;\n                    const teams = teamStore.findPublicTeamByMembers(user.id);\n                    const displayNameShort = mu.displayNameShort(user);\n                    const displayName = mu.displayName(user);\n                    const userImage = user.image || (user.images ? user.images[0] : undefined);\n                    const hasLikedComment = comment.likes && comment.likes.findIndex(e => e.user === currentUser.id) > -1;\n\n                    let filteredReplises = [];\n                    let totalReplies = 0;\n                    let diplayedReplies = 0;\n                    if (comment.comments) {\n                        totalReplies = comment.comments.length;\n                        if (showAllReplies[comment.id]) {\n                            filteredReplises = comment.comments;\n                        } else {\n                            filteredReplises = comment.comments.slice(0, max_comments);\n                        }\n                        diplayedReplies = filteredReplises.length;\n                    }\n\n                    const images = [];\n                    if (comment.images) {\n                        const imgs = toJS(comment.images);\n                        images.push(...imgs);\n                    }\n                    const imageIdx = viewImageIdx[comment.id] ? viewImageIdx[comment.id] : 0;\n                    const currentImage = images && images[imageIdx] ? images[imageIdx] : null;\n\n                    const { currentLocationGeocode = {} } = comment;\n\n                   const translation = teamStore.getCommentTranslations({\n                        object: workout,\n                        commentid: comment.id,\n                        targetLang: language,\n                    }) || translatedText[comment.id];\n                    let body = translation || comment.comment;\n                    if (showOriginal[comment.id]) {\n                        body = comment.comment;\n                    }\n\n                    return (\n                        <div class='row'>\n                            <div class='col-12 d-flex mb-2 position-relative'>\n                                <div \n                                    class={`text-center border rounded-circle imageRounded imageRoundedSmall`}\n                                    style={`${userImage ? `background-image: url(\"${userImage.s3SmallLink}\"); background-size: cover;` : ''} border-width: 3px !important;`}\n                                >\n                                    {!user.image && <span class='font-weight-lighter' style='font-size: 15px;'>{displayNameShort}</span>}\n                                </div>\n                                <div class='flex-grow-1 pl-3 pt-0' style='line-height: 1.2em;'>\n                                    <div class='bg-light p-2 rounded rounded-lg'>\n                                        <div>\n                                            <span style='font-size: 0.95em;'>\n                                                <h5 class='font-weight-bold mb-0' style='font-size: 1.0em;'>\n                                                    {displayName}\n                                                </h5>\n\n                                                {teams && teams.length > 0 && <div class='mb-2'>\n                                                    <small class='font-weight-lighter text-muted'>\n                                                        {teams.filter(e => e.public === 1).slice(0, 2).map(t => <>\n                                                            <a href={`/teams/public/${t.uuidv4}`} class='mr-2'><i class='fas fa-users text-muted' /> {t.name}</a>\n                                                        </>)}\n                                                    </small>\n                                                </div>}\n\n                                                <Markdown markdown={mu.replaceImages(body, comment.images, language)} markdownOpts={mu.getMarkdownOptions()} />\n                                            </span>\n                                        </div>\n                                        <div class='container-fluid px-3 mt-1'>\n                                            {currentImage && <div class='clearfix row'>\n                                                <div\n                                                    class={`col-12 px-0 overflow-hidden`}\n                                                    style={`max-height: 30vh;`}                                                    \n                                                >\n                                                    <img loading='lazy' class={`img-fluid`} style='min-width: 100px;' src={currentImage.s3LargeLink} />\n                                                </div>\n                                            </div>}\n                                            {images && images.length > 1 && <div class='clearfix d-flex flex-wrap row'>\n                                                {images.map((img, idx) => {\n                                                    return (<>\n                                                        <div\n                                                            class={`col px-0 overflow-hidden`}\n                                                            style={`max-height: 100px; min-width: 100px;`}\n                                                        >\n                                                            <img loading='lazy' class={`img-fluid border`} style='min-width: 100px;' src={img.s3SmallLink} onClick={this.viewImage} data-id={comment.id} data-idx={idx} />\n                                                        </div>\n                                                    </>);\n                                                })}\n                                            </div>}\n                                        </div>\n                                    </div>\n                                    <small>\n                                        <button class={`btn btn-sm btn-link py-0 ${hasLikedComment ? 'text-primary' : ''}`}\n                                            onClick={this.likeComment}\n                                            data-id={comment.id}\n                                        >\n                                            <Text id='comments.like'>Lik</Text>\n                                        </button>\n                                        -\n                                        <button class='btn btn-sm btn-link py-0'\n                                            onClick={this.replyComment}\n                                            data-id={comment.id}\n                                        >\n                                            <Text id='comments.comment-add'>Kommentar</Text>\n                                        </button>\n                                        {comment.language !== language && <>\n                                            -\n                                            {!showOriginal[comment.id] && translation ? <>\n                                                <button\n                                                    type='button'\n                                                    class='btn btn-sm btn-link'\n                                                    data-commentid={comment.id}\n                                                    onClick={this.showOriginal}\n                                                >\n                                                    <i class='fas fa-cog' />  <Text id='home.translate-show-original'>Show original</Text>\n                                                </button>\n                                            </> : <>\n                                                <button\n                                                    type='button'\n                                                    class='btn btn-sm btn-link'\n                                                    onClick={this.translate}\n                                                    data-commentid={comment.id}\n                                                >\n                                                    <i class='fas fa-cog' /> <Text id='home.translate-to'>See translation</Text>\n                                                </button>\n                                            </>}\n                                        </>}\n                                        -\n                                        <button class='btn btn-sm btn-link py-0 disabled'>\n                                            {util.formatDistance(comment.createdDate, new Date(), { locale: 'no-NB' })}\n                                            {comment.updatedDate && <>\n                                                <span class='font-weight-light ml-2'>(Edited {util.formatDistance(comment.updatedDate, new Date(), { locale: 'no-NB' })})</span>\n                                            </>}\n                                        </button>\n                                        {isAdmin && currentLocationGeocode && currentLocationGeocode.formatted_address && <>\n                                            <span class='ml-2 text-muted'>\n                                                <i class='fas fa-map-marker-alt' /> {currentLocationGeocode.formatted_address}\n                                            </span>\n                                        </>}\n                                    </small>\n                                </div>\n                                {comment.likes && comment.likes.length > 0 && <small class='position-absolute bg-light shadow-sm rounded-lg py-0 px-1' style='bottom: 20px; right: 15px;'>\n                                    <i class='fas fa-thumbs-up text-primary' /> {comment.likes.length}\n                                </small>}\n                            </div>\n                            <div class='col-11 offset-1 mb-2'>\n\n                                {comment && filteredReplises && filteredReplises.map((reply) => {\n                                    const { user = {} } = reply;\n                                    const teams = teamStore.findPublicTeamByMembers(user.id);\n                                    const displayNameShort = user.firstname ? `${util.ucfirst(user.firstname, true)}${util.ucfirst(user.lastname, true)}` : `${util.ucfirst(user.email || '', true)}`;\n                                    const displayName = user.firstname ? `${user.firstname} ${user.lastname}` : `${user.email}`;\n                                    const userImage = user.image || (user.images ? user.images[0] : undefined);\n                                    const hasLikedReply = reply.likes && reply.likes.findIndex(e => e.user === currentUser.id) > -1;\n\n                                    const replyTranslation = teamStore.getCommentReplyTranslations({\n                                        object: workout,\n                                        commentid: comment.id,\n                                        replyid: reply.id,\n                                        targetLang: language,\n                                    }) || translatedText[`${comment.id}-${reply.id}`];\n                                    let replyBody = replyTranslation || reply.comment;\n                                    if (showOriginal[`${comment.id}-${reply.id}`]) {\n                                        replyBody = reply.comment;\n                                    }\n\n                                    return (\n                                        <div class='row'>\n                                            <div class='col-12 d-flex mb-2 position-relative'>\n                                                <div \n                                                    class={`text-center border rounded-circle imageRounded imageRoundedThumb`}\n                                                    style={`${userImage ? `background-image: url(\"${userImage.s3SmallLink}\"); background-size: cover;` : ''} border-width: 3px !important;`}\n                                                >\n                                                    {!user.image && <span class='font-weight-lighter' style='font-size: 15px;'>{displayNameShort}</span>}\n                                                </div>\n                                                <div class='flex-grow-1 pl-3 pt-0' style='line-height: 1.2em;'>\n                                                    <div class='bg-light p-2 rounded-lg'>\n                                                        <span style='font-size: 0.95em;'>\n                                                            <h5 class='font-weight-bold mb-0' style='font-size: 1.0em;'>\n                                                                {displayName}\n                                                            </h5>\n\n                                                            {teams && teams.length > 0 && <div class='mb-2'>\n                                                                <small class='font-weight-lighter text-muted'>\n                                                                    {teams.filter(e => e.public === 1).slice(0, 2).map(t => <>\n                                                                        <a href={`/teams/public/${t.uuidv4}`} class='mr-2'>\n                                                                            <i class='fas fa-users text-muted' /> {t.name}\n                                                                        </a>\n                                                                    </>)}\n                                                                </small>\n                                                            </div>}\n\n                                                            <Markdown markdown={mu.replaceImages(replyBody, reply.images, language)} markdownOpts={mu.getMarkdownOptions()} />\n                                                        </span>\n                                                    </div>\n                                                    <small>\n                                                        <button class={`btn btn-sm btn-link py-0 ${hasLikedReply ? 'text-primary' : ''}`}\n                                                            onClick={this.likeReply}\n                                                            data-comment={comment.id}\n                                                            data-id={reply.id}\n                                                        >\n                                                            <Text id='comments.like'>Lik</Text>\n                                                        </button>\n                                                        -\n                                                        <button class='btn btn-sm btn-link py-0'\n                                                            onClick={this.replyComment}\n                                                            data-id={comment.id}\n                                                        >\n                                                            <Text id='comments.comment-add'>Kommentar</Text>\n                                                        </button>\n                                                        {reply.language !== language && <>\n                                                            -\n                                                            {!showOriginal[`${comment.id}-${reply.id}`] && replyTranslation ? <>\n                                                                <button\n                                                                    type='button'\n                                                                    class='btn btn-sm btn-link'\n                                                                    data-commentid={comment.id}\n                                                                    data-replyid={reply.id}\n                                                                    onClick={this.showOriginal}\n                                                                >\n                                                                    <i class='fas fa-cog' />  <Text id='home.translate-show-original'>Show original</Text>\n                                                                </button>\n                                                            </> : <>\n                                                                <button\n                                                                    type='button'\n                                                                    class='btn btn-sm btn-link'\n                                                                    onClick={this.translate}\n                                                                    data-commentid={comment.id}\n                                                                    data-replyid={reply.id}\n                                                                >\n                                                                    <i class='fas fa-cog' /> <Text id='home.translate-to'>See translation</Text>\n                                                                </button>\n                                                            </>}\n                                                        </>}\n                                                        -\n                                                        <button class='btn btn-sm btn-link py-0 disabled'>\n                                                            {util.formatDistance(reply.createdDate, new Date(), { locale: 'no-NB' })}\n                                                        </button>\n                                                    </small>\n                                                </div>\n                                                {reply.likes && <small class='position-absolute bg-light shadow-sm rounded-lg py-0 px-1' style='bottom: 20px; right: 15px;'>\n                                                    <i class='fas fa-thumbs-up text-primary' /> {reply.likes.length}\n                                                </small>}\n                                            </div>\n                                        </div>\n                                    );\n                                })}\n                                {totalReplies - diplayedReplies > 0 && <div>\n                                    <button class='btn btn-sm btn-link py-0'\n                                        onClick={this.toggleReplies}\n                                        data-id={comment.id}\n                                    >\n                                        <Text id='comments.show-more' fields={{ more: totalReplies - diplayedReplies }}>\n                                            Vis {totalReplies - diplayedReplies} flere kommentarer...\n                                        </Text>\n                                    </button>\n                                </div>}\n\n                            </div>\n                            {showAddComment[comment.id] && <div class='col-11 offset-1 d-flex mb-2 position-relative'>\n                                <WorkoutReplyComment stores={this.props.stores} workout={workout}\n                                    callback={callback}\n                                    commentId={comment.id}\n                                    inputRef={c => this.inputRef[comment.id] = c}\n                                    inputRefObject={this.inputRef}\n                                />\n                            </div>}\n                        </div>\n                    );\n                })}\n                {totalComments - diplayedComments > 0 && <div>\n                    <button class='btn btn-sm btn-link py-0'\n                        onClick={this.toggleComments}\n                    >\n                        <Text id='comments.show-more' fields={{ more: totalComments - diplayedComments }}>\n                            Vis {totalComments - diplayedComments} flere kommentarer...\n                        </Text>\n                    </button>\n                </div>}\n                {showAllComments && <div>\n                    <button class='btn btn-sm btn-link py-0'\n                        onClick={this.toggleComments}\n                    >\n                        <Text id='comments.hide-all-comments'>Skjul alle kommentarene.</Text>\n                    </button>\n                </div>}\n            </div>\n        );\n    }\n}\n\nexport default WorkoutComments;\n","import { h, Component, createRef } from 'preact';\nimport { observer } from 'mobx-preact';\nimport util from 'preact-util';\nimport { Text, Localizer, withText } from 'preact-i18n';\n\nconst debug = false;\nconst debugName = 'Images';\n\n@observer\nclass DragNDropFileupload extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            drag: false,\n            loadingProgress: 0,\n            uploadedFiles: [],\n            uploadedFilesData: {},\n        };\n    }\n\n    dropRef = createRef();\n\n    handleDrag = (e) => {\n        e.preventDefault();\n        e.stopPropagation();\n    }\n\n    handleDragIn = (e) => {\n        e.preventDefault();\n        e.stopPropagation();\n        this.dragCounter++;\n        if (e.dataTransfer.items && e.dataTransfer.items.length > 0) {\n            this.setState({ drag: true });\n        }\n    }\n\n    handleDragOut = (e) => {\n        e.preventDefault();\n        e.stopPropagation();\n        this.dragCounter--;\n        if (this.dragCounter === 0) {\n            this.setState({ drag: false });\n        }\n    }\n\n    handleDrop = (e) => {\n        if (debug) {\n            console.log(`${debugName}.handleDrop: event`, e);\n        }\n        e.preventDefault();\n        e.stopPropagation();\n        this.setState({ drag: false });\n        if (e.dataTransfer.files && e.dataTransfer.files.length > 0) {\n            // this.props.handleDrop(e.dataTransfer.files);\n            // e.dataTransfer.clearData();\n            for (let i = 0, l = e.dataTransfer.files.length; i < l; i += 1) {\n                const photo = e.dataTransfer.files[i];\n                // if (photo.type.match('image.*')) {\n                this.readLocalFile(photo);\n                // }\n            }\n            this.dragCounter = 0;\n        }\n    }\n\n    // Upload\n    handleAddFiles = (event) => {\n        event.preventDefault();\n        const el = event.target;\n        if (debug) {\n            console.log(`${debugName}.handleAddFiles: event, el`, event, el);\n        }\n        for (let i = 0, l = el.files.length; i < l; i += 1) {\n            const photo = el.files[i];\n            // if (photo.type.match('image.*')) {\n            this.readLocalFile(photo);\n            // }\n        }\n    }\n\n    handleEvent = (e, fileObject) => {\n        if (debug) {\n            console.log(`${debugName}.handleEvent[${fileObject.name}]: ${e.type}: `\n                + `${e.loaded} bytes transferred of ${e.total}. Is lengthComputable: ${e.lengthComputable}: `\n                + `${JSON.stringify(e)}`);\n        }\n    }\n\n    handleUpload = (fileObject) => {\n        if (debug) {\n            console.log(`${debugName}.handleUpload[${fileObject.name}]`);\n        }\n\n        const { uploadStatus = () => {}, before = () => {}, after = () => {} } = this.props;\n        uploadStatus(false);\n\n        if (util.isFunction(before)) {\n            before();\n        }\n\n        const formData = new FormData();\n        formData.append('files[]', fileObject);\n        const uploadMeta = {\n            progress: 1,\n        };\n\n        uploadMeta.xhr = new XMLHttpRequest();\n\n        uploadMeta.xhr.upload.addEventListener('progress', (event) => {\n            const fileObj = fileObject;\n            this.updateProgress(event, fileObj);\n        });\n        uploadMeta.xhr.addEventListener('loadstart', (event) => {\n            const fileObj = fileObject;\n            this.handleEvent(event, fileObj);\n        });\n        uploadMeta.xhr.addEventListener('load', (event) => {\n            const fileObj = fileObject;\n            this.handleEvent(event, fileObj);\n        });\n        uploadMeta.xhr.addEventListener('loadend', (event) => {\n            const fileObj = fileObject;\n            if (util.isFunction(after)) {\n                after();\n            }\n            this.handleEvent(event, fileObj);\n        });\n        uploadMeta.xhr.addEventListener('progress', (event) => {\n            const fileObj = fileObject;\n            this.handleEvent(event, fileObj);\n        });\n        uploadMeta.xhr.addEventListener('error', (event) => {\n            const fileObj = fileObject;\n            this.handleEvent(event, fileObj);\n        });\n        uploadMeta.xhr.addEventListener('abort', (event) => {\n            const fileObj = fileObject;\n            this.handleEvent(event, fileObj);\n        });\n        uploadMeta.xhr.addEventListener('readystatechange', (event) => {\n            const fileObj = fileObject;\n            this.uploadDone(event, fileObj);\n        });\n\n        uploadMeta.xhr.open('POST', `${util.getApiServer()}${this.props.apiUrl}`);\n        uploadMeta.xhr.setRequestHeader('Authorization', `Bearer ${util.getJwtToken()}`);\n        uploadMeta.xhr.send(formData);\n\n        const filename = fileObject.name;\n        const uploadedFilesData = this.state.uploadedFilesData;\n        if (!uploadedFilesData[filename]) {\n            uploadedFilesData[filename] = {};\n        }\n        uploadedFilesData[filename].uploadMeta = uploadMeta;\n        uploadedFilesData[filename].imageNum = this.state.imageNum;\n        this.setState({ uploadedFilesData });\n    }\n\n    // eslint-disable-next-line\n    readLocalFile = (fileObject) => {\n        return new Promise((resolve, reject) => {\n            const reader = new FileReader();\n\n            reader.addEventListener('error', (error) => {\n                if (debug) {\n                    console.log(`${debugName}.FileReader: Error occurred reading file: ${fileObject.name}: ${error}`);\n                }\n                reject(error);\n            });\n\n            reader.addEventListener('load', (event) => {\n                if (debug) {\n                    console.log(`${debugName}.FileReader: File: ${fileObject.name} read successfully: `\n                        + `${JSON.stringify(event)}`);\n                }\n                const photo = fileObject;\n                const filename = photo.name;\n                const uploadedFilesData = this.state.uploadedFilesData;\n                if (!uploadedFilesData[filename]) {\n                    uploadedFilesData[filename] = {};\n                }\n                uploadedFilesData[filename].event = event;\n                this.setState({ uploadedFilesData });\n                this.handleUpload(photo);\n                resolve(event);\n            });\n\n            reader.readAsDataURL(fileObject);\n        });\n    }\n\n    updateProgress = (event, fileObject) => {\n        if (event.lengthComputable) {\n            const filename = fileObject.name;\n            const uploadedFilesData = this.state.uploadedFilesData;\n            const percentComplete = (event.loaded / event.total) * 100;\n            if (debug) {\n                console.log(`${debugName}.updateProgress[${filename}].progress`, percentComplete);\n            }\n            uploadedFilesData[filename].uploadMeta.progress = percentComplete;\n            this.setState({ uploadedFilesData });\n        }\n    }\n\n    uploadDone = (event, fileObject) => {\n        const filename = fileObject.name;\n        const uploadedFilesData = this.state.uploadedFilesData;\n        const uploadMeta = uploadedFilesData[filename].uploadMeta;\n        if (debug) {\n            console.log(`${debugName}.uploadDone[${filename}].uploadedFilesData`, uploadedFilesData);\n            console.log(`${debugName}.uploadDone[${filename}].uploadMeta`, uploadMeta);\n            console.log(`${debugName}.uploadDone.event`, event);\n        }\n\n        if (uploadMeta && uploadMeta.xhr.readyState === 4 && uploadMeta.xhr.status === 201) {\n            const response = JSON.parse(uploadMeta.xhr.responseText);\n            const files = response.data.files;\n            for (let i = 0; i < files.length; i += 1) {\n                const file = files[i];\n                this.addFileToUpload(file);\n                this.fileInput.value = '';\n            }\n        }\n    }\n\n    addFileToUpload(file) {\n        if (debug) {\n            console.log(`${debugName}.addFileToUpload[${file.name}]`);\n        }\n        const { uploadedFilesData } = this.state;\n        const { handleAddImage, uploadStatus = () => {} } = this.props;\n\n        delete uploadedFilesData[file.name];\n        this.setState({ uploadedFilesData });\n        handleAddImage(file);\n        uploadStatus(true);\n    }\n    // /Upload\n\n    componentDidMount() {\n        const div = this.dropRef.current;\n        div.addEventListener('dragenter', this.handleDragIn);\n        div.addEventListener('dragleave', this.handleDragOut);\n        div.addEventListener('dragover', this.handleDrag);\n        div.addEventListener('drop', this.handleDrop);\n\n        const { autoOpen } = this.props;\n\n        if (autoOpen) {\n            setTimeout(() => {\n                // console.log('[setTimeout]');\n                this.fileInput.click();\n            }, 10);\n        }\n    }\n\n    componentWillUnmount() {\n        const div = this.dropRef.current;\n        div.removeEventListener('dragenter', this.handleDragIn);\n        div.removeEventListener('dragleave', this.handleDragOut);\n        div.removeEventListener('dragover', this.handleDrag);\n        div.removeEventListener('drop', this.handleDrop);\n    }\n\n    render() {\n        const { uploadedFilesData } = this.state;\n\n        return (\n            <div style={{ position: 'relative' }} ref={this.dropRef}>\n                {this.state.drag &&\n                <div style={{\n                    border: 'dashed grey 4px',\n                    backgroundColor: 'rgba(255,255,255,.8)',\n                    position: 'absolute',\n                    top: 0,\n                    bottom: 0,\n                    left: 0,\n                    right: 0,\n                    zIndex: 9999,\n                }}>\n                    <div\n                        style={{\n                            position: 'absolute',\n                            top: '50%',\n                            right: 0,\n                            left: 0,\n                            textAlign: 'center',\n                            color: 'grey',\n                            fontSize: 36,\n                        }}\n                    >\n                        <div><Text id='imageupload.drag-files-here'>drop your files here :)</Text></div>\n                    </div>\n                </div>}\n\n                <div>\n                    <input class='btn btn-info col-sm-12' multiple\n                        type='file'\n                        id='image-file'\n                        onchange={this.handleAddFiles}\n                        ref={(c) => {\n                            this.fileInput = c;\n                        }}\n                    />\n                </div>\n                <div>\n                    {Object.keys(uploadedFilesData).length > 0 ? (<h3><Text id='imageupload.upload-images'>Uploaded images</Text></h3>) : ''}\n                    <ul class='list-group'>\n                        {Object.keys(uploadedFilesData).map((key) => {\n                            const { uploadMeta = {} } = uploadedFilesData[key];\n                            const isImage = key.match(/(jpg|jpeg|png|gif|heic|heif|svg|webp|tif)/i);\n                            return (\n                                <li class='list-group-item list-group-item-action flex-column align-items-start'>\n                                    <div class='d-flex w-100 justify-content-between'>\n                                        {isImage && <img class='img-fluid mr-3'\n                                            src={uploadedFilesData[key].event.target.result}\n                                            style='max-height: 50px;'\n                                        />}\n                                        <small>{uploadedFilesData[key].event.uploadDone}</small>\n                                        <Text id='imageupload.uploading-image'>Laster opp bilde...</Text>\n                                        <small>{util.formatBytes(uploadedFilesData[key].event.total, 2)}</small>\n                                    </div>\n                                    <div class='progress mt-1' style='height: 4px;'>\n                                        <div\n                                            class='progress-bar progress-bar-striped progress-bar-animated bg-success'\n                                            role='progressbar'\n                                            style={`width: ${uploadMeta.progress}%; height: 4px;`}\n                                            aria-valuenow={uploadMeta.progress}\n                                            aria-valuemin='0'\n                                            aria-valuemax='100'\n                                        />\n                                    </div>\n                                </li>\n                            );\n                        })}\n                    </ul>\n                </div>\n\n                {this.props.children}\n            </div>\n        );\n    }\n}\n\nexport default DragNDropFileupload;\n","import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport { Text, Localizer } from 'preact-i18n';\n\nimport mu from '../../lib/musher-util';\n\nconst initialState = {};\n\n@observer\nclass DisplayLikesAndComments extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            ...initialState,\n        };\n    }\n\n    toggleViews = () => {\n        const { showViewList } = this.state;\n        const { isTeamAdmin, isAdmin } = this.props;\n        if (isTeamAdmin || isAdmin) {\n            this.setState({\n                showViewList: !showViewList,\n            });\n        }\n    }\n\n    render() {\n        const { showViewList } = this.state;\n        const { storyStore, teamStore, workoutStore } = this.props.stores;\n        const { views, object, isTeamAdmin, isAdmin,\n            type = 'story', onTeamClick = () => {}, onUserClick = () => {} } = this.props;\n\n        const viewUsersArrays = [];\n        Object.entries(object.statistics).forEach(([year, yearObject]) => {\n            // console.log({ year, yearObject });\n            Object.entries(yearObject).forEach(([week, weekObject]) => {\n                // console.log({ week, weekObject });\n                if (weekObject.viewUsers) {\n                    viewUsersArrays.push(weekObject.viewUsers);\n                }\n            });\n        });\n        const viewUsers = viewUsersArrays.flat().slice(0, 50);\n\n\t\treturn (<>\n            <div class='d-flex justify-content-end mb-2'>\n                <span class='ml-2 text-muted font-weight-lighter'\n                    onClick={this.toggleViews}\n                >\n                    {views} <Text id='story.views'>views</Text>\n                </span>\n            </div>\n            {showViewList && <div class='mt-3 mb-3'>\n                {viewUsers && viewUsers.map((userId) => {\n                    let user;\n                    let teams;\n                    if (type === 'story') {\n                        user = storyStore.findPublicUser(userId);\n                        teams = storyStore.findPublicTeamByMembers(userId);\n                    } else if (type === 'team') {\n                        user = teamStore.findPublicUser(userId);\n                        teams = teamStore.findPublicTeamByMembers(userId);\n                    } else if (type === 'workout') {\n                        user = workoutStore.findPublicUser(userId);\n                        teams = workoutStore.findPublicTeamByMembers(userId);\n                    }\n                    if (!user) {\n                        return '';\n                    }\n                    let publicTeam;\n                    if (util.isArray(teams)) {\n                        publicTeam = teams.find(e => e.public === 1);\n                    }\n                    const image = mu.getImage({ user, team: publicTeam, priority: 'user' });\n                    const shortname = mu.displayNameShort(user);\n                    const name = mu.displayName(user, true);\n                    return (<div class='d-flex flex-row position-relative font-weight-light mb-1'>\n                        {publicTeam ? <>\n                            <a href={`/teams/public/${publicTeam.uuidv4}`} title={publicTeam.name} onClick={(e) => onTeamClick(e, publicTeam.uuidv4)} class='stretched-link'>\n                                <div\n                                    class={`text-center border rounded-circle imageRounded imageRoundedThumb`}\n                                    style={`${image ? `background-image: url(\"${image}\"); background-size: cover;` : ''}`}\n                                >\n                                    {!image && <div class='' style='font-size: 12px; padding-top: 3px;'>{shortname}</div>}\n                                </div>\n                            </a>\n                            <div class='ml-2 '>\n                                {name} <span class='font-weight-lighter'>- {publicTeam.name}</span>\n                            </div>\n                        </> : <>\n                            <div\n                                class={`text-center border rounded-circle imageRounded imageRoundedThumb`}\n                                style={`${image ? `background-image: url(\"${image}\"); background-size: cover;` : ''} opacity: 0.5;`}\n                            >\n                                {!image && <div class='text-muted' style='font-size: 12px; padding-top: 3px;'>{shortname}</div>}\n                            </div>\n                            <div class='ml-2'>\n                                {name}\n                            </div>\n                        </>}\n                    </div>);\n                })}\n                {views > viewUsers.length && <>\n                    <small class='text-muted'>\n                        <Text id='story.limited-to'>Limited to max 50 users.</Text>\n                    </small>\n                </>}\n            </div>}\n\t\t</>);\n\t}\n}\n\nexport default DisplayLikesAndComments;\n","import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\n\nimport style from './style.css';\n\nconst initialState = {\n    mouseData: {},\n};\n\n@observer\nclass Gauge extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            ...initialState,\n        };\n        this.svgRef = null;\n    }\n\n    render() {\n        const {\n            radius = 50,\n            heightAdd = 0,\n            color = 'success',\n\n            showPercentText = true,\n            percent = 0,\n            prefix = '',\n\n            showCenterText= false,\n            centerText,\n            centerTextSize,\n            centerTextX,\n            centerTextY,\n\n            total = '',\n            totalY = '90%',\n            totalX = '50%',\n            totalTextAnchor = 'middle',\n                        \n            completed = '',\n            completedY = '65%',\n            completedX = '50%',\n            completedTextAnchor = 'middle',\n        } = this.props;\n        const strokeWidth = radius * 0.3;\n        const innerRadius = radius - strokeWidth / 2;\n\n        const strokeWidthGauge = radius * 0.3;\n\n        const circumference = innerRadius * 2 * Math.PI;\n        const arc = circumference * (270 / 360);\n        const dashArray = `${arc} ${circumference}`;\n        const transform = `rotate(135, ${radius}, ${radius})`;\n\n        const percentNormalized = Math.min(Math.max(percent, 0), 100);\n        const offset = arc - (percentNormalized / 100) * arc;\n\n        const textSize = centerTextSize || radius / 2.5;\n        const textSizeSmall = radius / 5;\n\n        return (\n            <>\n                <svg xmlns='http://www.w3.org/2000/svg' class={style.svg}\n                    // viewBox={`0 0 ${radius * 2} ${radius * 2}`}\n                    width={radius * 2}\n                    height={radius * 2 + heightAdd}\n                    preserveAspectRatio='none'\n                    ref={c => this.svgRef = c}\n                >\n\n                    <circle\n                        class={`${style.gaugeBackground}`}\n                        cx={radius}\n                        cy={radius}\n                        r={innerRadius}\n                        strokeWidth={strokeWidth}\n                        strokeDasharray={dashArray}\n                        strokeLinecap='round'\n                        transform={transform}\n                    />\n                    \n                    <circle\n                        class={`${style[color]} ${style.gauge}`}\n                        cx={radius}\n                        cy={radius}\n                        r={innerRadius}\n                        stroke='url(#grad)'\n                        strokeDasharray={dashArray}\n                        strokeDashoffset={offset}\n                        strokeLinecap='round'\n                        strokeWidth={strokeWidthGauge}\n                        style={{\n                            transition: 'stroke-dashoffset 0.3s',\n                        }}\n                        transform={transform}\n                    />\n                     \n                    {showPercentText && <text\n                        class={`${style.gaugeText} ${style[color]}`}\n                        x={centerTextX || '50%'}\n                        y={centerTextY || '50%'}\n                        dominant-baseline='middle'\n                        text-anchor='middle'\n                        font-size={textSize}\n                    >{percent} {prefix}</text>}\n\n                    {showCenterText && <text\n                        class={`${style.gaugeText} ${style[color]}`}\n                        x={centerTextX || '50%'}\n                        y={centerTextY || '50%'}\n                        dominant-baseline='middle'\n                        text-anchor='middle'\n                        font-size={textSize}\n                    >{centerText}</text>}\n\n                    {completed && <text\n                        class={`${style.gaugeText} ${style[color]}`}\n                        x={completedX}\n                        y={completedY}\n                        dominant-baseline='middle'\n                        text-anchor={completedTextAnchor}\n                        font-size={textSizeSmall}\n                    >{completed}</text>}\n\n                    <text\n                        class={`${style.gaugeText} ${style.secondary}`}\n                        x={totalX}\n                        y={totalY}\n                        dominant-baseline='middle'\n                        text-anchor={totalTextAnchor}\n                        font-size={textSizeSmall}\n                    >{total}</text>\n\n                </svg>\n            </>\n        );\n    }\n}\n\nexport default Gauge;\n","import { h, Component } from 'preact';\nimport { observer } from 'mobx-preact';\nimport util from 'preact-util';\n\n// TODO: Do we need mobx? What is mobx doing here?  \n\n@observer\nclass FastListLine extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {};\n        this.containerRef = null;\n    }\n\n    componentWillUnmount() {\n        const { removeIntersectionObserver } = this.props;\n        if (removeIntersectionObserver) {\n            removeIntersectionObserver(this.containerRef);\n        }\n    }\n\n    componentDidMount() {\n        const { addIntersectionObserver } = this.props;\n        if (addIntersectionObserver) {\n            addIntersectionObserver(this.containerRef);\n        }\n    }\n\n    render() {\n        const {\n            wrapperClassNames = '',\n            contentClassNames = '',\n            renderContent,\n            obj = {},\n            idx,\n            dataFields,\n            dataValues,\n            sessionid,\n        } = this.props;\n\n        const dataProperties = {};\n        if (sessionid) {\n            dataProperties.sessionid = sessionid;\n        }\n        dataFields.forEach(e => dataProperties[`data-${e}`] = encodeURI(dataValues[e] || obj[e]));\n\n        return (\n            <div\n                class={`${wrapperClassNames}`}\n                ref={c => this.containerRef = c}\n                data-idx={idx}\n                {...dataProperties}\n            >\n                <div\n                    class={`${contentClassNames}`}\n                    style={`display: block;`}\n                >\n                    {renderContent({\n                        obj,\n                        idx,\n                    })}\n                </div>\n            </div>\n        );\n    }\n}\n\n@observer\nclass FastList extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {};\n    }\n\n    // IntersectionObserver\n    deleteIntersectionObserver = () => {\n        this.intersectionObserver = null;\n    }\n\n    handleIntersection = (entries) => {\n        const { handleIntersection } = this.props;\n        if (typeof(handleIntersection) === 'function') {\n            // console.log('handleIntersection');\n            handleIntersection(entries);\n        }\n        // console.log({ entries });\n        // TODO: Make it possible to run defined functions for entries.\n        // mu.intersectionObserverCallback(entries);\n        entries.forEach((e) => {\n            const { isIntersecting } = e;\n            const { height = 0 } = e.target.dataset;\n            // const childHeight = e.target.childNodes[0].getBoundingClientRect().height;\n            // const targetHeight = e.target.getBoundingClientRect().height;\n            const childHeight = e.target.childNodes[0].offsetHeight;\n            const targetHeight = e.target.offsetHeight;\n            const scrollHeight = e.target.scrollHeight;\n            const currentHeight = Math.max(childHeight, targetHeight, scrollHeight);\n            // console.log({ isIntersecting, height, childHeight, targetHeight, scrollHeight, currentHeight }, e.target);\n\n            if (isIntersecting) {\n                e.target.childNodes[0].style.display=`block`;\n                // TODO: Should be set after image is loaded.\n                // const height = e.target.childNodes[0].clientHeight > e.target.clientHeight ? e.target.childNodes[0].clientHeight : e.target.clientHeight;\n                // console.log(e.target);\n                // console.log('e.target.childNodes[0].offsetHeight:', e.target.childNodes[0].offsetHeight);\n                // console.log('e.target.childNodes[0].scrollHeight:', e.target.childNodes[0].scrollHeight);\n                // console.log('e.target.childNodes[0].clientHeight:', e.target.childNodes[0].clientHeight);\n                // console.log('e.target.offsetHeight:', e.target.offsetHeight);\n                // console.log('e.target.scrollHeight:', e.target.scrollHeight);\n                // console.log('e.target.clientHeight:', e.target.clientHeight);\n                // console.log('height:', height);\n                // e.target.style.height=`${height}px`;\n                e.target.style.minHeight = `${currentHeight > height ? currentHeight : height}px`;\n            } else if (e.target.style.minHeight) {\n                // e.target.style.height = `${currentHeight > height ? currentHeight : height}px`;\n                e.target.style.minHeight = `${currentHeight > height ? currentHeight : height}px`;\n                e.target.childNodes[0].style.display=`none`;\n            }\n        });\n    }\n\n    setupIntersectionObserver = () => {\n        if (!('IntersectionObserver' in window) ||\n            !('IntersectionObserverEntry' in window) ||\n            !('intersectionRatio' in window.IntersectionObserverEntry.prototype)) {\n            return false;\n        }\n\n        const options = {\n            root: null,\n            rootMargin: '100px',\n            threshold: 0.1,\n        };\n        this.intersectionObserver = new IntersectionObserver(this.handleIntersection, options);\n    }\n\n    addIntersectionObserver = (ref) => {\n        if (this.intersectionObserver && ref) {\n            this.intersectionObserver.observe(ref);\n        }\n    }\n    removeIntersectionObserver = (ref) => {\n        if (this.intersectionObserver && ref) {\n            this.intersectionObserver.unobserve(ref);\n        }\n    }\n\n    componentWillMount() {\n        this.setupIntersectionObserver();\n    }\n\n    componentWillUnmount() {\n        this.deleteIntersectionObserver();\n    }\n\n    render() {\n        const {\n            data = [],\n            wrapperClassNames = 'row pb-4 bg-light',\n            contentClassNames = `col-12 col-sm-8 col-lg-6 offset-sm-2 offset-lg-3 mb-0 position-relative rounded rounded-lg py-3 shadow-sm`,\n            renderContent = (e) => <>Missing render function!</>,\n            dataFields = [],\n            dataValues = {},\n        } = this.props;\n        \n        return (\n            <div class='w-100'>\n                {data && data.filter(e => util.isObject(e)).map((obj, idx) => {\n                    const wrapperClasses = obj.hasOwnProperty('wrapperClassNames') ? obj.wrapperClassNames : wrapperClassNames;\n                    const contentClasses = obj.hasOwnProperty('contentClassNames') ? obj.contentClassNames : contentClassNames;\n                    return (<>\n                        <FastListLine\n                            key={`fastline-${idx}-${obj.id}`}\n                            obj={obj}\n                            idx={idx}\n                            addIntersectionObserver={this.addIntersectionObserver}\n                            removeIntersectionObserver={this.removeIntersectionObserver}\n                            wrapperClassNames={wrapperClasses}\n                            contentClassNames={contentClasses}\n                            renderContent={renderContent}\n                            dataFields={dataFields}\n                            dataValues={dataValues}\n                        />\n                    </>);\n                })}\n            </div>\n        );\n    };\n}\n\nexport default FastList;\n"],"sourceRoot":""}