(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{"JWe/":function(t,e,s){"use strict";(function(t){function a(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,a)}return s}function o(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?a(Object(s),!0).forEach((function(e){r(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):a(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}function r(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}function n(t){switch(t.type){case 1:return"border-primary";case 2:return"border-danger";case 3:return"border-success";case 4:return"border-info";default:return"border-warning"}}function i(t){switch(t.type){case 1:return"fas fa-running";case 2:return"fas fa-flag-checkered";case 3:return"fas fa-hiking";case 4:return"fas fa-futbol";default:return"fas fa-hiking"}}var c,l=s("hosL"),h=s("Utv1"),d=s("/eY4"),u=s("cneo"),m=s("OhSV"),b=s("fh8t"),p=s.n(b),f=(s("UJvz"),s("sqi2")),g=s("/922"),O=s("s4FZ"),j=s("ZQlJ"),v=s("q/oJ"),k=s("gWxU"),w=s("Nanz"),x=s("+JSK"),y=s("vY+r"),D=s("nHdA"),S=s("irB3"),C=s("UwwE"),T=s("8Lgr"),I=s("QkTp"),P=s("ZOvn"),L=P.a.getMaxLoadIndex(),R={showAddComment:!1,viewImageIdx:{},likeWorkout:{}},z=Object(d.a)(c=function(e){function s(t){var s;return(s=e.call(this,t)||this).toggleDate=function(t){t.stopPropagation(),t.preventDefault(),s.setState({showDate:!s.state.showDate})},s.likeWorkout=function(){return new Promise((function(t,e){var a,o,r;return a=s.props.stores.workoutStore,(r=s.state.likeWorkout)[o=s.props.workout.id]=!0,s.setState({likeWorkout:r}),setTimeout((function(){var t=s.state.likeWorkout;delete t[o],s.setState({likeWorkout:t})}),1200),Promise.resolve(a.likeWorkout({id:o})).then((function(s){try{return s,t()}catch(t){return e(t)}}),e)}))},s.toggleAddComment=function(t){var e=t.target.parentElement.dataset.id||t.target.dataset.id;s.setState({showAddComment:!s.state.showAddComment},(function(){s.inputRef[e]&&s.inputRef[e].focus()}))},s.viewImage=function(t){var e=t.target.closest("img").dataset,a=s.state.viewImageIdx;a[e.id]=e.idx,s.setState({viewImageIdx:a})},s.shareLink=function(t){var e=t.target.closest("button").dataset;s.props.stores.appState.shareUrl({url:e.url,title:e.title,text:e.text})},s.onTeamClick=function(t,e){return t.preventDefault(),t.stopPropagation(),s.setState({showTeam:e}),!1},s.hideTeam=function(){s.setState({showTeam:null})},s.onUserClick=function(t){return t.preventDefault(),t.stopPropagation(),!1},s.onDogClick=function(t,e,a){return t.preventDefault(),t.stopPropagation(),s.setState({showDog:e,dogs:a}),!1},s.hideDog=function(){s.setState({showDog:null})},s.state=o({},R),s.updateTimer={},s.inputRef={},s}var a,r;return r=e,(a=s).prototype=Object.create(r.prototype),a.prototype.constructor=a,a.__proto__=r,s.prototype.render=function(){var e=this,s=this.state,a=s.showDate,r=s.showAddComment,c=s.likeWorkout,d=s.dogs,b=s.showTeam,R=s.showDog,z=this.props,U=z.workout,W=z.showDate,_=z.wrapperClasses,A=void 0===_?"col-12 col-sm-8 col-lg-6 offset-sm-2 offset-lg-3":_,B=z.wrapperClassesRow,E=void 0===B?"row":B,N=this.props.stores,q=N.userStore,M=N.appState,J=N.workoutStore,Y=M.viewmode,G=M.hasShareApi,V=q.user,K=q.dogs,Z=V.language,F=void 0===Z?"en":Z,H=q.findIntensity({code:U.intensity,language:F})||{},Q=q.findTeam(U.team,!0)||{},X=Q.name,$=[];X&&$.push(X),U.teams&&U.teams.forEach((function(t){q.findTeam(t)&&$.push(q.findTeam(t))}));var tt=U.likes,et=void 0===tt?[]:tt,st=U.comments,at=void 0===st?[]:st,ot=U.likes&&U.likes.findIndex((function(t){return t.user===V.id}))>-1,rt=U.gpxInfo,nt=U.mushers,it=void 0===nt?[]:nt,ct=(void 0===rt?{}:rt).loadIndex,lt=void 0===ct?0:ct,ht=q.findEquipment({equipment:U.equipment,language:F}),dt=q.findEquipment({equipment:U.equipment,field:"icon"}),ut=[];it.length>1&&it.slice(1,10).map((function(t){var e=J.findPublicUser(t)||{};e.images&&e.images[0]&&ut.push(e.images[0])}));var mt,bt=J.findPublicUser(it[0])||{};bt&&bt.images&&bt.images[0]?mt=bt.images[0]:Q.image&&Q.image.s3SmallLink?mt=Q.image:Q.images&&Q.images[0]&&Q.images[0].s3SmallLink?mt=Q.images[0]:U.image&&U.image.s3SmallLink&&(mt=U.image);var pt=[];if(U.mapImage&&pt.push(o(o({},U.mapImage),{},{type:"map"})),U.images){var ft=Object(u.i)(U.images);pt.push.apply(pt,ft)}var gt;U&&U.gpxInfo&&U.gpxInfo.battegryLevelStart&&(gt=100*(U.gpxInfo.battegryLevelStart-U.gpxInfo.battegryLevelEnd));var Ot=P.a.getViews(U.statistics);return Object(l.h)(t,null,b&&Object(l.h)(v.a,null,Object(l.h)(k.default,{stores:this.props.stores,teamid:b,marginTop:"0px;",marginBottom:"0px;",back:this.hideTeam,hideTeam:this.hideTeam})),R&&Object(l.h)(v.a,null,Object(l.h)(w.default,{stores:this.props.stores,dogid:R,marginTop:"0px;",marginBottom:"0px;",back:this.hideDog,dogs:d})),Object(l.h)("div",{class:"w-100 mb-2"},Object(l.h)("div",{class:E},Object(l.h)("div",{class:A+" d-flex mb-0 position-relative"},Object(l.h)("div",{class:"text-center"},Object(l.h)("div",{class:"position-relative text-center border rounded-circle imageRounded "+n(U),style:(mt?'background-image: url("'+mt.s3SmallLink+'"); background-size: cover;':"")+" border-width: 3px !important;"},!mt&&Object(l.h)("i",{class:i(U)+" text-"+(H.class?H.class:"muted")+" mt-3",style:"font-size: 40px;"}),ut&&ut.map((function(e,s){return Object(l.h)(t,null,Object(l.h)("div",{class:"position-absolute rounded-circle imageRounded border imageRoundedThumb border-white",style:'\n                                            background-image: url("'+e.s3SmallLink+'");\n                                            background-size: cover;\n                                            bottom: -3px;\n                                            left: '+(10*s-5)+"px;\n                                        "}))}))),0!==U.temperature&&Object(l.h)(t,null,Object(l.h)("span",{class:"text-muted font-weight-light"},Object(l.h)(I.a,{stores:this.props.stores,value:U.temperature})))),Object(l.h)("div",{class:"flex-grow-1 pl-3",style:"line-height: 1.2em;"},Object(l.h)("span",{class:"float-right"},1===U.isLocked&&Object(l.h)("i",{class:"fas fa-lock text-danger ml-3"}),1===U.isInProgress&&Object(l.h)("div",{class:"spinner-grow text-success ml-3",role:"status"}),2===U.isInProgress&&Object(l.h)("i",{class:"fas fa-pause-circle text-warning ml-3"})),Object(l.h)("a",{class:"stretched-link",href:"/workouts/"+U.id},Object(l.h)("h5",{class:"my-0 mb-1",style:"line-height: 1.0em;"},U.name)),$&&$.length>0&&Object(l.h)("small",{class:"font-weight-lighter"},$.map((function(e,s){return Object(l.h)(t,null,s>0?", ":"",e)}))),Object(l.h)("br",null),Object(l.h)("small",{class:"text-muted"},U.date&&Object(l.h)("small",{onClick:this.toggleDate},W||a?h.a.formatDate(U.date,{locale:"no-NB",hour12:!1,hour:"2-digit",minute:"2-digit"}):h.a.formatDistance(U.date,new Date,{locale:"no-NB"})),Object(l.h)("span",{class:"badge badge-"+H.class+" ml-2"},H.name),lt>0&&Object(l.h)("span",{class:"ml-2 text-"+P.a.getLoadIndexColor(h.a.normalizeBetween(lt,0,L,0,100))},Object(l.h)("i",{class:"fas fa-hand-rock mr-1"}),Math.floor(h.a.normalizeBetween(lt,0,L,0,100))," - ",P.a.getLoadIndexText(h.a.normalizeBetween(lt,0,L,0,100))),Object(l.h)("br",null)),Object(l.h)("small",null,Object(l.h)("div",{class:"text-muted"},U.garminId>0&&Object(l.h)("div",{class:"float-left mr-2 text-center border rounded-circle imageRounded imageRoundedIcon",style:'background-image: url("./assets/garmin-connect.png");'}),U.stravaId>0&&Object(l.h)("div",{class:"float-left mr-2 text-center border rounded-circle imageRounded imageRoundedIcon",style:'background-image: url("./assets/strava-icon.png");'}),U.equipment>0&&Object(l.h)(t,null,Object(l.h)("i",{class:dt+" ml-2"})," ",ht),U.dogs>0&&Object(l.h)(t,null,Object(l.h)("i",{class:"fas fa-dog ml-2"})," ",U.dogs.length),U.track>0&&Object(l.h)(t,null,Object(l.h)("i",{class:"fas fa-map-marked text-"+(U.track>0?"success":"danger")+" ml-2"})),U.dogsLeft>0&&Object(l.h)(t,null,Object(l.h)("i",{class:"fas fa-crosshairs text-"+(U.dogsLeft&&U.dogsRight?"success":"danger")+" ml-2"})),U.sledWeight>0&&Object(l.h)(t,null,Object(l.h)("i",{class:"fas fa-sleigh ml-2"})," ",Object(l.h)(C.a,{stores:this.props.stores,value:U.sledWeight})),gt>0&&Object(l.h)("span",{class:"text-muted ml-2"},Object(l.h)("i",{class:"fas fa-battery-three-quarters"})," ",h.a.format(gt,1),"% ",Object(l.h)(m.c,{id:"workout.battery-used"},"used"))),["beta","advanced"].indexOf(Y)>-1&&Object(l.h)("span",{class:"text-muted"},Object(l.h)("i",{class:"fas fa-balance-scale"})," ",h.a.format(U.kcalBurnedTotal)," ",Object(l.h)(m.c,{id:"workout.kcal"},"kcal"),Object(l.h)("i",{class:"fas fa-drumstick-bite ml-2"})," ",Object(l.h)(C.a,{stores:this.props.stores,value:U.kcalMeatGramsTotal/1e3}),Object(l.h)("i",{class:"fas fa-fish ml-2"})," ",Object(l.h)(C.a,{stores:this.props.stores,value:U.kcalSalmonGramsTotal/1e3}),Object(l.h)("i",{class:"fas fa-piggy-bank ml-2"})," ",Object(l.h)(C.a,{stores:this.props.stores,value:U.kcalFatGramsTotal/1e3}))))),Object(l.h)("div",{class:A+" position-relative mt-2"},Object(l.h)("strong",null,U.description)),Object(l.h)("div",{class:A+" position-relative"},Object(l.h)(p.a,{markdown:P.a.replaceImages(U.comment,U.images,F),markdownOpts:P.a.getMarkdownOptions()})),Object(l.h)("div",{class:A+" d-flex mb-0 position-relative"},Object(l.h)("div",{class:"container-fluid px-0"},Object(l.h)("div",{class:"row mt-1"},U.distanceKm>0&&Object(l.h)("div",{class:"col-3"},Object(l.h)("div",{class:"text-overflow"},Object(l.h)("small",null,Object(l.h)("i",{class:"fas fa-road"})," ",Object(l.h)(m.c,{id:"workout.calendar.distance"},"Distanse"))),Object(l.h)("div",{class:"text-overflow font-weight-light",style:"font-size: 1.2em;"},Object(l.h)(T.a,{stores:this.props.stores,value:U.distanceKm}))),U.elevation>0&&Object(l.h)("div",{class:"col-3"},Object(l.h)("div",{class:"text-overflow"},Object(l.h)("small",null,Object(l.h)("i",{class:"fas fa-mountain"})," ",Object(l.h)(m.c,{id:"workout.calendar.ascend"},"Høydemeter"))),Object(l.h)("div",{class:"text-overflow font-weight-light",style:"font-size: 1.2em;"},Object(l.h)(S.a,{stores:this.props.stores,value:U.elevation}))),U.duration>0&&Object(l.h)("div",{class:"col-3"},Object(l.h)("div",{class:"text-overflow"},Object(l.h)("small",null,Object(l.h)("i",{class:"fas fa-clock"})," ",Object(l.h)(m.c,{id:"workout.calendar.duration"},"Varighet"))),Object(l.h)("div",{class:"text-overflow font-weight-light",style:"font-size: 1.2em;"},h.a.secToHms(U.duration,!0))),U.speedAvg>0&&Object(l.h)("div",{class:"col-3"},Object(l.h)("div",{class:"text-overflow"},Object(l.h)("small",null,Object(l.h)("i",{class:"fas fa-tachometer-alt"})," ",Object(l.h)(m.c,{id:"workout.calendar.avg-speed"},"Snittfart"))),Object(l.h)("div",{class:"text-overflow font-weight-light",style:"font-size: 1.2em;"},U.gpxInfo&&U.gpxInfo.avgGpsMovingSpeed>0?Object(l.h)(t,null,Object(l.h)(D.a,{stores:this.props.stores,value:3.6*U.gpxInfo.avgGpsMovingSpeed})):Object(l.h)(t,null,Object(l.h)(D.a,{stores:this.props.stores,value:U.speedAvg}))))))),["beta","advanced","normal"].indexOf(Y)>-1&&Object(l.h)("div",{class:""+A},Object(l.h)("div",{class:"container-fluid px-0 mt-1"},Object(l.h)("div",{class:"row"},Object(l.h)(O.a,{stores:this.props.stores,images:pt,id:U.id,dblClick:this.likeWorkout,likeRef:c})))),["beta","advanced","normal"].indexOf(Y)>-1&&Object(l.h)(t,null,U.dogs&&U.dogs.length>0&&Object(l.h)("div",{class:"container-fluid px-0 mt-1"},Object(l.h)("div",{class:"row pt-2"},Object(l.h)(j.a,{stores:this.props.stores,dogs:U.dogs,allDogs:K,onDogClick:this.onDogClick}))),Object(l.h)("div",{class:"mt-2"},Object(l.h)(x.a,{stores:this.props.stores,likes:et,comments:at,type:"workout",onTeamClick:this.onTeamClick,onUserClick:this.onUserClick}))),["beta","advanced","normal"].indexOf(Y)>-1&&Object(l.h)(t,null,Object(l.h)("div",{class:A+" mb-0 position-relative mt-2"},Object(l.h)("div",{class:"row"},Object(l.h)("div",{class:"col text-center"},Object(l.h)("button",{type:"button",class:"btn btn-sm btn-outline-"+(ot?"primary":"secondary")+" btn-lg btn-block "+(ot?"text-primary":""),onClick:this.likeWorkout},Object(l.h)("i",{class:(ot?"text-primary fas":"far")+" fa-thumbs-up"})," ",Object(l.h)(m.c,{id:"comments.like"},"Lik"))),Object(l.h)("div",{class:"col text-center"},Object(l.h)("button",{type:"button",class:"btn btn-sm btn-outline-secondary btn-lg btn-block","data-id":U.id,onClick:this.toggleAddComment},Object(l.h)("i",{class:"fas fa-comment"})," ",Object(l.h)(m.c,{id:"comments.comment-add"},"Kommentar"))),G?Object(l.h)(t,null,Object(l.h)("div",{class:"col text-center"},Object(l.h)("button",{class:"btn btn-sm btn-outline-secondary btn-lg btn-block text-overflow",onClick:this.shareLink,"data-url":"https://themusher.app/share/workout/"+U.uuidv4,"data-title":"title: "+U.name},Object(l.h)("i",{class:"fas fa-share"})," ",Object(l.h)(m.c,{id:"workout.share"},"Del")))):Object(l.h)(t,null,Object(l.h)("div",{class:"col text-center"},Object(l.h)("a",{class:"btn btn-sm btn-outline-secondary btn-lg btn-block text-overflow",href:"https://themusher.app/share/workout/"+U.uuidv4,target:"_blank",rel:"noreferrer","data-native":!0},Object(l.h)("i",{class:"fas fa-share"})," ",Object(l.h)(m.c,{id:"workout.share"},"Del")))))),Object(l.h)("div",{class:A+" mt-2 mb-3"},r&&Object(l.h)(g.a,{stores:this.props.stores,workout:U,inputRef:function(t){return e.inputRef[U.id]=t},inputRefObject:this.inputRef,col:"12",offset:"0"}),Object(l.h)(f.a,{stores:this.props.stores,workout:U,col:"10",offset:"2",compact:!0})),Ot>0&&Object(l.h)(t,null,Object(l.h)("div",{class:"mt-2"},Object(l.h)(y.a,{stores:this.props.stores,views:Ot,object:U,type:"workout",isTeamAdmin:!0,isAdmin:!1,onTeamClick:this.onTeamClick,onUserClick:this.onUserClick})))))))},s}(l.Component))||c;e.a=z}).call(this,s("hosL").Fragment)},UJvz:function(t,e,s){"use strict";var a,o=s("hosL"),r=s("Utv1"),n=s("/eY4"),i=s("OhSV"),c=Object(n.a)(a=function(t){function e(){for(var e,s=arguments.length,a=new Array(s),o=0;o<s;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))||this).toggleDate=function(){e.setState({showDate:!e.state.showDate})},e.touchStart=function(t){t.stopPropagation(),e.setState({startY:t.touches[0].pageY})},e.touchEnd=function(t){t.stopPropagation(),e.setState({startY:void 0,readyToRefresh:!1})},e.touchMove=function(t){t.stopPropagation();var s=e.state;e.appContainer&&(0===e.appContainer.scrollTop&&t.touches[0].pageY>s.startY+30&&!s.refreshing&&(0,e.props.close)())},e}var s,a;return a=t,(s=e).prototype=Object.create(a.prototype),s.prototype.constructor=s,s.__proto__=a,e.prototype.render=function(){var t=this,e=this.state.showDate,s=this.props,a=s.image,n=s.imagexxl,c=s.close,l=s.thumb,h=s.name,d=s.title,u=s.date;return Object(o.h)("div",{class:"fixed-top bg-dark text-center pt-2",style:"width: 100vw; height: 100vh;"},Object(o.h)("button",{class:"btn btn-secondary float-right mr-2",onClick:c},"X"),Object(o.h)("div",{class:"d-flex mb-2 px-2"},l&&Object(o.h)("div",{class:"text-center border rounded-circle imageRounded imageRoundedSmall",style:l?'background-image: url("'+l+'");':""}," "),Object(o.h)("div",{class:"flex-grow-1 pl-3 pr-2 text-left",style:"line-height: 1.3em;"},h&&Object(o.h)("strong",{class:"mr-2"},h,":"),d,Object(o.h)("br",null),Object(o.h)("small",{class:"text-muted"},u&&Object(o.h)("small",{onClick:this.toggleDate},e?r.a.formatDate(u,{locale:"no-NB"}):r.a.formatDistance(u,new Date,{locale:"no-NB"}))))),Object(o.h)("img",{src:a,class:"img-fluid align-middle mt-2 mb-2",onClick:c,onTouchstart:this.touchStart,onTouchend:this.touchEnd,onTouchmove:this.touchMove,ref:function(e){return t.appContainer=e}}),Object(o.h)("a",{target:"_blank",rel:"noopener noreferrer",href:n||a,download:n||a},Object(o.h)("i",{class:"fas fa-download"})," ",Object(o.h)(i.c,{id:"modal.download"},"Last ned bildet")))},e}(o.Component))||a;e.a=c},ZQlJ:function(t,e,s){"use strict";var a,o=s("hosL"),r=(s("Utv1"),s("/eY4")),n=(s("OhSV"),s("NDEG")),i=Object(r.a)(a=function(t){function e(e){var s;return(s=t.call(this,e)||this).scrollImages=function(t){var e=t.target,a=e.scrollLeft/e.clientWidth,o=Math.round(a),r=Math.abs(o-a);(Number.isInteger(a)||r<.1)&&s.setState({imageIdx:o})},s.sortByName=function(t,e){var a=s.props.allDogs,o=void 0===a?[]:a,r=o.find((function(e){return e.id===t})),n=o.find((function(t){return t.id===e}));return r&&n&&r.name>n.name?1:-1},s.state={imageIdx:0},s}var s,a;return a=t,(s=e).prototype=Object.create(a.prototype),s.prototype.constructor=s,s.__proto__=a,e.prototype.render=function(){var t=this,e=this.props,s=e.dogs,a=e.allDogs,r=void 0===a?[]:a,i=e.size,c=void 0===i?"medium":i,l=e.onDogClick,h=void 0===l?function(){}:l;return Object(o.h)("div",{class:"w-100"},Object(o.h)("div",{class:"d-flex flex-row flex-nowrap no-scrollbar",style:"overflow: auto; scroll-snap-type: x mandatory;",onScroll:this.scrollImages},s&&s.sort(this.sortByName).map((function(e){var a=r.find((function(t){return t.id===e}));return a?Object(o.h)("div",{class:"col clearfix position-relative p-0 mx-2"},Object(o.h)("div",{class:"w-100 h-100 text-center rounded-lg imageContainer d-flex justify-content-center align-items-center",style:"\n                                        flex-wrap: wrap;\n                                        overflow-y: hidden;\n                                    ",onTouchstart:function(t){t.stopPropagation()},onTouchend:function(t){t.stopPropagation()},onTouchmove:function(t){t.stopPropagation()}},Object(o.h)(n.a,{stores:t.props.stores,dog:a,dogs:r.filter((function(t){return s.indexOf(t.id)>-1})).sort((function(t,e){return t.name>e.name?1:-1})),className:"mx-auto",showName:!0,showPosition:!1,size:c,onDogClick:h}))):""}))))},e}(o.Component))||a;e.a=i}}]);
//# sourceMappingURL=8.chunk.6fa0a.js.map