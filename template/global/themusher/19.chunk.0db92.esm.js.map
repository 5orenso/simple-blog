{"version":3,"sources":["webpack:///../node_modules/preact-pwa-install/src/util.js","webpack:///../node_modules/preact-pwa-install/src/index.js","webpack:///./components/install/index.js","webpack:///./components/login/index.js","webpack:///./components/error/index.js"],"names":["getWindow","window","e","isStandalone","matchMedia","matches","navigator","standalone","dispatchToOnPrompt","CACHE","onPrompts","forEach","onPrompt","prompt","awaitInstallPrompt","installPromptListener","preventDefault","installPrompt","Promise","resolve","appInstalledListener","addEventListener","userChoice","then","choiceResult","outcome","success","removeEventListener","push","removeOnPrompt","func","filter","reset","useInstaller","useState","setInstallPrompt","useEffect","cancel","installed","InstallButton","class","href","onclick","id","Login","observer","Component","constructor","props","super","handleEmailInput","async","userStore","stores","email","target","value","setState","clearTimeout","checkEmailTimer","setTimeout","checkEmail","togglePassword","passwordType","this","state","updateCapsLockStatus","isCapsLock","login","password","token","checkLogin","resetLoginMessages","newUser","route","forgotten","changeLanguage","lang","appState","setLanguage","validateLoginToken","loginToken","response","status","showToken","componentDidMount","util","isString","render","language","emailIsAvailable","twoFactorLogin","message","messageIcon","error","errorIcon","isValidEmail","validateEmail","isOkToLogin","src","height","icon","remove","type","onInput","onKeypress","placeholder","style","linkState","onClick","role","selected","disabled","Error","componentDidUpdate","removeTimer","componentWillUnmount","className"],"mappings":"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","file":"19.chunk.0db92.esm.js","sourcesContent":["/** Object.assign ponyfill (note: used by Rollup)\n *\t@private\n */\nexport function assign(obj) {\n\tfor (let i=1; i<arguments.length; i++) {\n\t\t// eslint-disable-next-line guard-for-in, prefer-rest-params\n\t\tfor (let p in arguments[i]) obj[p] = arguments[i][p];\n\t}\n\treturn obj;\n}\n\n\nexport function getWindow() {\n\ttry {\n\t\tif (window) return window;\n\t}\n\tcatch (e) {\n\t\treturn;\n\t}\n}\n\n","import { h, Component } from 'preact';\nimport { useState, useEffect } from 'preact/hooks';\nimport { assign, getWindow } from './util'; // eslint-disable-line no-unused-vars\n\n/**\n * Returns true if the application is running as an installed PWA.\n *\n * @example\n * let isStandalone = isStandAlone();\n *\n */\nexport function isStandalone() {\n\tlet window = getWindow();\n\tif (!window) return false;\n\n\treturn window.matchMedia && window.matchMedia('(display-mode: standalone)').matches && true ||\n            window.navigator && window.navigator.standalone === true || false;\n}\n\nconst CACHE = {\n\tprompt: null,\n\tinstallPromptListener: null,\n\tappInstalledListener: null,\n\tonPrompts: []\n};\n\n/**\n * Any window listeners and cached prompts that have been captured by awaitInstallPrompt() are removed.\n */\nexport function reset() {\n\tlet window = getWindow();\n\tif (CACHE.installPromptListener) {\n\t\twindow && window.removeEventListener && window.removeEventListener('beforeinstallprompt', CACHE.installPromptListener);\n\t\tCACHE.installPromptListener = null;\n\t}\n\tif (CACHE.appInstalledListener) {\n\t\twindow && window.removeEventListener && window.removeEventListener('appinstalled', CACHE.appInstalledListener);\n\t\tCACHE.appInstalledListener = null;\n\t}\n\tCACHE.prompt = null;\n\tCACHE.onPrompts = [];\n}\n\nfunction removeOnPrompt(func) {\n\tCACHE.onPrompts = CACHE.onPrompts.filter(onPrompt => onPrompt !== func);\n}\n\nfunction dispatchToOnPrompt() {\n\tCACHE.onPrompts.forEach(onPrompt => onPrompt(CACHE.prompt));\n}\n\n/**\n * This function allows you to listen to the browser for the install prompt\n * that allows you to install the application standalone.\n *\n * Different browsers have different criteria for when this prompt is made available.\n * Currently Chrome requires that  the user \"interact\" with the content on your domain\n * for at least 30 seconds.\n *\n * More info can be found here:\n * https://developers.google.com/web/fundamentals/app-install-banners/\n *\n * awaitInstallPrompt offers the following capabilities:\n * * Listen to the browser for an install prompt.\n * * Stop listening at any time.\n * * Trigger the prompt to request app installation.\n *\n * @param {Function} onPrompt (prompt, cancel) => {} A function that will be called when\n * the browser delivers a prompt that we can present. The first argument prompt is a function\n * you can call at any time the triggers the install process. cancel is another function\n * that allows you to stop listening for prompts.\n *\n * @returns {Function} An function that when called, will stop listening for incoming prompts from the browser.\n *\n * @example\n * let cancel = awaitInstallPrompt((prompt) => {\n *      prompt().then(\n *          success => console.log(\n *              success && 'Successfully installed app as PWA.'\n *                      || 'User abandoned install.'\n *          )\n *      )\n * })\n */\nexport function awaitInstallPrompt(onPrompt) {\n\tif (!CACHE.installPromptListener) {\n\t\tlet window = getWindow();\n\t\tif (!window || isStandalone()) return null;\n\t\tCACHE.installPromptListener = e => {\n\t\t\te.preventDefault();\n\t\t\tlet installPrompt = e;\n\t\t\tCACHE.prompt = () =>  new Promise(resolve => {\n\t\t\t\tCACHE.appInstalledListener = () => {\n\t\t\t\t\tresolve(true);\n\t\t\t\t};\n\t\t\t\twindow.addEventListener('appinstalled', CACHE.appInstalledListener);\n\t\t\t\tinstallPrompt.prompt();\n\t\t\t\tinstallPrompt.userChoice.then(choiceResult => {\n\t\t\t\t\tchoiceResult.outcome !== 'accepted' && resolve(false);\n\t\t\t\t});\n\t\t\t}).then(success => {\n\t\t\t\tinstallPrompt = null;\n\t\t\t\tCACHE.appInstalledListener && window.removeEventListener('appinstalled', CACHE.appInstalledListener);\n\t\t\t\tif (success) {\n\t\t\t\t\tCACHE.prompt = null;\n\t\t\t\t\tdispatchToOnPrompt();\n\t\t\t\t}\n\t\t\t\treturn success;\n\t\t\t});\n\t\t\tdispatchToOnPrompt();\n\t\t};\n\t\twindow.addEventListener('beforeinstallprompt', CACHE.installPromptListener);\n\t}\n\tif (onPrompt) {\n\t\tCACHE.onPrompts.push(onPrompt);\n\t\tCACHE.prompt && onPrompt(CACHE.prompt);\n\t\treturn () => removeOnPrompt(onPrompt);\n\t}\n\treturn () => reset();\n}\n\n/**\n * A Higher Order Component that implements the awaitInstallPrompt() lifecycle and provides\n * the wrapped component with only the meaning full artifacts as props:\n *\n * Props:\n * * isStandalone - true if the app is running in standalone mode.\n * * installPrompt - the prompt function that you call at any time.\n *\n * @example\n * export installer()(\n *      function({isStandalone, installPrompt}){\n *          return (\n *              isStandalone && <p>Running as Standalone</p> ||\n *              installPrompt && <a href=\"#\" onclick={installPrompt}>Install App</a>\n *          );\n *      }\n * );\n */\nexport function installer() {\n\treturn Child => {\n\t\tclass Installer extends Component {\n\n\t\t\tstatic getDerivedStateFromProps(props, state) {\n\t\t\t\treturn state.isStandalone === undefined && { isStandalone: isStandalone() };\n\t\t\t}\n\n\t\t\tcancel() {\n\t\t\t\tthis.setState({ prompt: null });\n\t\t\t\tthis.canceltoken && this.canceltoken();\n\t\t\t}\n        \n\t\t\tcomponentDidMount() {\n\t\t\t\tif (this.state.isStandalone === false) {\n\t\t\t\t\tthis.canceltoken = awaitInstallPrompt(prompt => {\n\t\t\t\t\t\tthis.setState({ prompt });\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t\tcomponentWillUnmount() {\n\t\t\t\tthis.cancel();\n\t\t\t}\n        \n\t\t\trender(props, { isStandalone, prompt }) {\n\t\t\t\treturn h(Child, { ...props, isStandalone, installPrompt: prompt } );\n\t\t\t}\n\t\t}\n\t\treturn Installer;\n\t};\n}\n\n/**\n * A Hook that implements the awaitInstallPrompt() lifecycle and returns\n * an object that contains the isStandalone and installPrompt props:\n *\n * @returns {Object}\n * * isStandalone - true if the app is running in standalone mode.\n * * installPrompt - the prompt function that you call at any time.\n */\nexport function useInstaller() {\n\tconst [standalone] = useState(isStandalone());\n\tconst [installPrompt, setInstallPrompt] = useState(null);\n\tuseEffect(() => awaitInstallPrompt((prompt, cancel) => {\n\t\tsetInstallPrompt({ prompt: () =>\n\t\t\tprompt().then(installed => {\n\t\t\t\tinstalled && cancel();\n\t\t\t\treturn installed;\n\t\t\t})\n\t\t});\n\t}));\n\treturn ({ isStandalone: standalone, installPrompt: installPrompt && installPrompt.prompt });\n}\n\nexport default useInstaller;\n","import { h } from 'preact';\nimport { useInstaller } from 'preact-pwa-install';\nimport { Text } from 'preact-i18n';\n\nexport default function InstallButton() {\n\tconst { installPrompt, isStandalone } = useInstaller();\n\treturn installPrompt && (\n        <div class='text-center'>\n            <a class='btn btn-success' href=\"#\" onclick={installPrompt}>\n                <Text id='install.install-app'>Install The Musher</Text>\n            </a>\n        </div>\n    ) || isStandalone && '';\n}\n","import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport { route } from 'preact-router';\nimport linkState from 'linkstate';\nimport { Text, Localizer, withText } from 'preact-i18n';\n\nimport Error from '../error';\nimport Message from '../message';\nimport Install from '../install';\n\n@observer\nclass Login extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            showToken: false,\n            isCapsLock: false,\n            passwordType: 'password',\n            email: this.props.email,\n        };\n    }\n\n    handleEmailInput = async (e) => {\n        const { userStore } = this.props.stores;\n        const email = e.target.value;\n        this.setState({ email });\n        clearTimeout(this.checkEmailTimer);\n        this.checkEmailTimer = setTimeout(() => userStore.checkEmail(email), 1000);\n    }\n\n    togglePassword = () => {\n        let { passwordType } = this.state;\n        if (passwordType === 'password') {\n            passwordType = 'text';\n        } else {\n            passwordType = 'password';\n        }\n        this.setState({ passwordType });\n    }\n\n    updateCapsLockStatus = (isCapsLock) => {\n        this.setState({\n            isCapsLock,\n        });\n    }\n\n    login = () => {\n        const { email, password, token } = this.state;\n        const { userStore } = this.props.stores;\n        userStore.checkLogin({ email, password, token });\n    }\n\n    resetLoginMessages = () => {\n        const { userStore } = this.props.stores;\n        userStore.resetLoginMessages();\n    }\n\n    newUser = () => {\n        const { email = '' } = this.state;\n        route(`/register/${email}`);\n    }\n\n    forgotten = () => {\n        const { email = '' } = this.state;\n        route(`/forgotten/${email}`);\n    }\n\n    // pwaInstallClick = (e) => {\n    //     // hide our user interface that shows our A2HS button\n    //     // addBtn.style.display = 'none';\n\n    //     // Show the prompt\n    //     this.deferredPrompt.prompt();\n    //     // Wait for the user to respond to the prompt\n    //     this.deferredPrompt.userChoice.then((choiceResult) => {\n    //         if (choiceResult.outcome === 'accepted') {\n    //             console.log('User accepted the A2HS prompt');\n    //         } else {\n    //             console.log('User dismissed the A2HS prompt');\n    //         }\n    //         this.deferredPrompt = null;\n    //     });\n    // }\n\n    // componentWillMount() {\n    //     window.addEventListener('beforeinstallprompt', (e) => {\n    //         // Prevent Chrome 67 and earlier from automatically showing the prompt\n    //         e.preventDefault();\n    //         // Stash the event so it can be triggered later.\n    //         this.deferredPrompt = e;\n\n    //         // // Update UI to notify the user they can add to home screen\n    //         // addBtn.style.display = 'block';\n    //     });\n    // }\n\n    changeLanguage = (e) => {\n        const lang = e.target.value;\n\t\tconst { appState } = this.props.stores;\n        appState.setLanguage(lang);\n    }\n\n    validateLoginToken = async () => {\n        const { userStore } = this.props.stores;\n        const { loginToken } = this.props;\n        // console.log(loginToken, util.isDefined(loginToken));\n        const response = await userStore.validateLoginToken(loginToken);\n        if (response && response.status === 200) {\n            route(`/`);\n        }\n    }\n\n    componentDidMount() {\n        const { userStore } = this.props.stores;\n        if (this.props.email) {\n            clearTimeout(this.checkEmailTimer);\n            this.checkEmailTimer = setTimeout(() => userStore.checkEmail(this.props.email), 1000);\n        }\n        const { loginToken } = this.props;\n        if (util.isString(loginToken)) {\n            this.validateLoginToken();\n        }\n    }\n\n    render() {\n        const { isCapsLock, email, password, token, passwordType } = this.state;\n        const { appState, userStore } = this.props.stores;\n        const { language = 'en' } = appState;\n\n        const { emailIsAvailable, login, twoFactorLogin } = userStore;\n        const { message, messageIcon, error, errorIcon } = login;\n        const isValidEmail = util.validateEmail(email);\n        const isOkToLogin = isValidEmail && password;\n\n        const darkmode = true;\n\n        return (\n            <div class='container-fluid'>\n                <div class='row'>\n                    <div class='col-12 offset-0 col-sm-8 offset-sm-2 col-md-6 offset-md-3 col-lg-4 offset-lg-4 pt-5'>\n\n                        {1 === 2 && util.isMobile() && !util.isStandalone() && (\n                            <div class='mt-5 alert alert-success'>\n                                <Text id='login.tip-1'>Appen kan installeres på telefonen din.</Text> <br />\n                                <br />\n                                <Text id='login.tip-2'>Bruk \"Legg til på hjemskjerm\"-funksjonen.</Text><br />\n                                <br />\n                                <Text id='login.tip-3'>Det er lurt å gjøre dette før du registrer deg.</Text>\n\n                                {/* <button class='btn btn-primary' onClick={this.pwaInstallClick}>\n                                    Legg til på hjemskjermen din\n                                </button> */}\n                            </div>\n                        )}\n\n                        <Install />\n\n                        <div class='d-flex justify-content-center mb-5 mt-5'>\n                            {darkmode ? <>\n                                <img src={`https://themusher.app/assets/logo-qpaws-dark.png`} height='100' />\n                            </> : <>\n                                <img src={`https://themusher.app/assets/logo-qpaws-light.png`} height='100' />\n                            </>}\n                        </div>\n                        {/* <div class='d-flex justify-content-center'>\n                            <h5 class='mt-3 mb-5'><Text id='login.login'>Logg inn</Text></h5>\n                        </div> */}\n\n                        <Error message={error} icon={errorIcon} remove={this.resetLoginMessages} />\n                        <Message message={message} icon={messageIcon} remove={this.resetLoginMessages}  />\n\n                        <div class='form-group'>\n                            {/* <label for='emailInput'><i class='far fa-envelope' /> <Text id='login.email'>E-post</Text></label> */}\n                            <Localizer>\n                                <input type='email'\n                                    class={`form-control form-control-lg ${email ? (isValidEmail && !emailIsAvailable ? 'is-valid' : 'is-invalid') : ''}`}\n                                    id='emailInput'\n                                    onInput={this.handleEmailInput}\n                                    value={email}\n                                    onKeypress={(e) => { util.isCapsLock(e, this.updateCapsLockStatus); }}\n                                    placeholder={<Text id='login.email'>Email</Text>}\n                                />\n                            </Localizer>\n                            {email && isValidEmail && emailIsAvailable && <div class='invalid-feedback' style={`display: block;`}>\n                                <Text id='login.email-not-found'>E-posten finnes ikke, men du kan registrere deg 😃</Text>\n                            </div>}\n                            {email && !isValidEmail && <div class=\"invalid-feedback\" style={'display: block;'}>\n                                <Text id='login.email-not-valid'>Hmm, e-posten ser ikke helt riktig ut. Kan det være en skrivefeil?</Text>\n                            </div>}\n                            {email && isValidEmail && !emailIsAvailable && <div class=\"valid-feedback\" style={'display: block;'}>\n                                <Text id='login.email-looks-good'>E-post ser bra ut.</Text>\n                            </div>}\n                        </div>\n\n                        <div class='form-group'>\n                            {/* <label for='passwordInput'><i class='fas fa-key' /> <Text id='login.password'>Passord</Text></label> */}\n                            <div class='input-group'>\n                                <Localizer>\n                                    <input type={passwordType}\n                                        class={`form-control form-control-lg`}\n                                        id='passwordInput'\n                                        onInput={linkState(this, 'password')}\n                                        value={password}\n                                        onKeypress={(e) => { util.isCapsLock(e, this.updateCapsLockStatus); }}\n                                        placeholder={<Text id='login.password'>Password</Text>}\n                                    />\n                                </Localizer>\n                                <div class='input-group-append'>\n                                    <button class='btn btn-lg btn-primary' type='button'\n                                        onClick={this.togglePassword}\n                                    >\n                                        <i class={`fas fa-eye${passwordType === 'text' ? '-slash' : ''}`} />\n                                    </button>\n                                </div>\n                            </div>\n                        </div>\n\n                        {isCapsLock && <div class='alert alert-danger' role='alert'>\n                            <Text id='login.caps-lock-on'>CAPS LOCK er på!</Text>\n                        </div>}\n\n                        {twoFactorLogin && <>\n                            <div class='form-group'>\n                                {/* <label for='tokenInput'><i class='fas fa-unlock' /> <Text id='login.2fa-token'>2FA Token</Text></label> */}\n                                <Localizer>\n                                    <input type='number'\n                                        class='form-control form-control-lg'\n                                        id='tokenInput'\n                                        onInput={linkState(this, 'token')}\n                                        value={token}\n                                        placeholder={<Text id='login.2fa-token'>2FA Token</Text>}\n                                    />\n                                </Localizer>\n                            </div>\n                        </>}\n\n                        <div class='form-group'>\n                            <div class=\"input-group mb-2\">\n                                <div class=\"input-group-prepend\">\n                                    <div class=\"input-group-text\"><Text id='login.select-language'>Select language</Text></div>\n                                </div>\n                                <select\n                                    class='custom-select custom-select-lg border-0 text-white bg-primary'\n                                    onInput={this.changeLanguage}\n                                >\n                                    <option value='no' selected={language === 'no'}>🇳🇴 NO</option>\n                                    <option value='en' selected={language === 'en'}>🇬🇧 EN</option>\n                                    <option value='es' selected={language === 'es'}>🇪🇸 ES</option>\n                                    <option value='de' selected={language === 'de'}>🇩🇪 DE</option>\n                                    <option value='fr' selected={language === 'fr'}>🇫🇷 FR</option>\n                                    <option value='ru' selected={language === 'ru'}>🇷🇺 RU</option>\n                                    <option value='se' selected={language === 'se'}>🇸🇪 SE</option>\n                                </select>\n                            </div>\n                        </div>\n\n                        <button class={`btn btn-lg btn-block ${isOkToLogin ? 'btn-primary' : 'btn-primary'}`} type='button'\n                            onClick={this.login}\n                            disabled={!isOkToLogin}\n                        >\n                            <i class='fas fa-sign-in-alt mr-2' />\n                            <Text id='login.login'>Logg inn</Text>\n                        </button>\n\n                        <small class='form-text text-muted mt-1 text-right'>\n                            <button class='btn btn-small btn-link text-primary'\n                                onClick={this.forgotten}\n                            >\n                                <Text id='login.forgot-password'>Glemt passordet?</Text>\n                            </button>\n                        </small>\n\n                    </div>\n                </div>\n\n                <div class='col-12 offset-0 col-sm-8 offset-sm-2 col-md-6 offset-md-3 col-lg-4 offset-lg-4 mt-4'>\n                    <div class='form-row align-items-center'>\n\n                        <button class='btn btn-link btn-block text-white' type='button'\n                            onClick={this.newUser}\n                        >\n                            <strong>\n                                <Text id='login.no-account'>No account?</Text>\n                            </strong><br />\n                            <i class='fas fa-plus mr-2' />\n                            <Text id='login.signup-free-account'>Please sign up for a free account here</Text>\n                        </button>\n                    </div>\n                </div>\n\n            </div>\n        );\n    }\n}\n\nexport default Login;\n","import { h, Component } from 'preact';\nimport { observer } from 'mobx-preact';\n\nconst ERROR_DISPLAY_MS = 10000;\n\n@observer\nclass Error extends Component {\n    componentDidUpdate() {\n        const { remove = () => {} } = this.props;\n        clearTimeout(this.removeTimer);\n        this.removeTimer = setTimeout(() => remove(), ERROR_DISPLAY_MS);\n    }\n\n    componentWillUnmount() {\n        clearTimeout(this.removeTimer);\n    }\n\n    render() {\n        const { message, icon, remove = () => {} } = this.props;\n\n        if (!message) {\n            return '';\n        }\n        return (\n            <div class='container'>\n                <div class='alert alert-danger row'>\n                    <div class={`col-12`}>\n                        <a href='#' onclick={remove} class='float-right'>\n                            <i className='fas fa-times' />\n                        </a>\n                        {icon && <h1 class='float-left mr-3'><i class={icon} /></h1>}\n                        {message && <span>{message}</span>}\n                    </div>\n                </div>\n            </div>\n        );\n    }\n}\n\nexport default Error;\n"],"sourceRoot":""}