{"version":3,"sources":["webpack:///./routes/embed/style.css","webpack:///./routes/embed/chiplist.js"],"names":["module","exports","MARGIN_TOP","mu","marginTop","MARGIN_BOTTOM","marginBottom","initialState","OneTeam","observer","props","gotoBib","bib","state","raceid","classid","route","checkForEnter","e","key","loadRace","allTeamIds","this","setState","isLoading","raceStore","stores","load","race","classes","filter","currentClass","contestants","length","map","musher","team","flat","loadTeams","join","loadWorkoutSummary","getWorkoutSummaryActiveTeams","getAllClassesSortedBy","componentDidMount","render","getMusherByBibId","getTeamById","user","members","find","m","email","image","getImage","priority","size","class","style","hoverElement","hoverelementonly","type","onInput","linkstate","onKeyDown","onClick","firstname","lastname","name","flag","sportsClub","dogs","dog","gender","birth","util","age","deceased","isoDate","chipId","Component"],"mappings":"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","file":"39.chunk.6db20.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"hoverelementonly\":\"hoverelementonly__4nHll\",\"hoverElement\":\"hoverElement__rkj2s\",\"hoverelementhide\":\"hoverelementhide__10QkM\"};","import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport { Text, Localizer } from 'preact-i18n';\nimport linkstate from 'linkstate';\nimport { route } from 'preact-router';\n\nimport mu from '../../lib/musher-util';\n\nimport style from './style.css';\n\nconst MARGIN_TOP = mu.marginTop(true);\nconst MARGIN_BOTTOM = mu.marginBottom();\n\nconst initialState = {};\n\n@observer\nclass OneTeam extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            ...initialState,\n        };\n    }\n\n\n    async loadRace(props = this.props) {\n\t\tthis.setState({ isLoading: true });\n\t\tconst { raceStore } = props.stores;\n\t\tconst { raceid } = props;\n        await raceStore.load(raceid);\n        const { race } = raceStore;\n\t\tconst allTeamIds = race.classes.filter(currentClass => currentClass.contestants && currentClass.contestants.length > 0).map((currentClass) => {\n            return currentClass.contestants.filter(musher => musher.team > 0).map(musher => musher.team);\n\t\t}).flat();\n\t\tif (allTeamIds.length > 0 && raceid) {\n\t\t\tawait raceStore.loadTeams(allTeamIds.join(','));\n\t\t\tawait raceStore.loadWorkoutSummary(allTeamIds.join(','), raceid);\n\t\t\traceStore.getWorkoutSummaryActiveTeams();\n\t\t}\n\t\traceStore.getAllClassesSortedBy();\n\t}\n\n    gotoBib = () => {\n        const { bib } = this.state;\n        const { raceid, classid } = this.props;\n        route(`/embed/chiplist/${raceid}/${classid}/${bib}`);\n    }\n\n    checkForEnter = (e) => {\n        if (e.key === 'Enter') {\n            this.gotoBib();\n        }\n    }\n\n\tcomponentDidMount() {\n\t\tthis.loadRace();\n\t}\n\n    render() {\n        const { goto, gotoTitle, routerName, bib } = this.props;\n\t\tconst { userStore, raceStore, appState } = this.props.stores;\n\n        const musher = raceStore.getMusherByBibId(bib);\n        const team = raceStore.getTeamById(musher.team);\n        const user = team.members ? team.members.find(m => m.email === musher.email) : {};\n        const image = mu.getImage({ user, team, priority: 'user', size: 's3LargeLink' });\n\n        return (<>\n            <div class={`fixed-top ${style.hoverElement}`} style='height: 100px;'>\n                <div class={`${style.hoverelementonly}`}>\n                    <div class={`row`}>\n                        <div class='col form-inline'>\n                            <div class='form-group'>\n                                <label class='text-success mr-2'>Enter Bib</label>\n                                <input\n                                    class='form-control form-control-lg text-success border-success'\n                                    style='background-color: inherit;'\n                                    type='text'\n                                    onInput={linkstate(this, 'bib')}\n                                    onKeyDown={this.checkForEnter}\n                                />\n                                <button\n                                    type='button'\n                                    class='btn btn-lg btn-outline-success'\n                                    onClick={this.gotoBib}\n                                >Show Bib</button>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n\t\t\t<div class='container-fluid position-relative' style={`margin-bottom: ${MARGIN_BOTTOM}; margin-top: ${MARGIN_TOP}; height: calc(100% - ${MARGIN_BOTTOM} - ${MARGIN_TOP});`}>\n\n                {image && <div class='d-flex'>\n                    <div\n                        class={`position-relative text-center border rounded-circle imageRounded imageRoundedLarge`}\n                        style={image ? `background-image: url(\"${image}\"); background-size: cover;` : ''}\n                    >\n                        &nbsp;\n                    </div>\n                </div>}\n\n                <h1>{bib}: <nobr>\n                    {musher.firstname ? <>\n                        <span style='font-weight: 300;'>{musher.firstname}</span> <span style='font-weight: 600;'>{musher.lastname}</span>\n                    </> : <>\n                        {musher.name}\n                    </>}\n                </nobr></h1>\n                {musher.flag && <div class='float-left pt-1 mr-3' style='font-size: 1.5em; line-height: 0.8em;'>{musher.flag}</div>} {musher.sportsClub}\n\n                <table class='table table-striped table-bordered'>\n                    <thead>\n                        <th>Dog</th>\n                        <th>Name</th>\n                        <th>Gender</th>\n                        <th>Age</th>\n                        <th>Birth</th>\n                        <th>ChipID</th>\n                    </thead>\n                    <tbody>\n                        {team && team.dogs && team.dogs.map(dog => <>                        \n                            <tr>\n                                <td>&nbsp;</td>\n                                <td>{dog.name}</td>\n                                <td>{dog.gender}</td>\n                                <td>{dog.birth && <>{util.age(dog.birth, dog.deceased)}</>}</td>\n                                <td>{util.isoDate(dog.birth)}</td>\n                                <td>{dog.chipId}</td>\n                            </tr>\n                        </>)}\n                    </tbody>\n                </table>\n\n                {/* <xmp class='text-dark'>musher: {JSON.stringify(musher, null, 4)}</xmp> */}\n                {/* <xmp class='text-dark'>user: {JSON.stringify(user, null, 4)}</xmp> */}\n                {/* <xmp class='text-dark'>team: {JSON.stringify(team, null, 4)}</xmp> */}\n            </div>\n        </>);\n    }\n}\n\nexport default OneTeam;\n"],"sourceRoot":""}