{"version":3,"sources":["webpack:///./routes/tracks/index.js","webpack:///./components/track/index.js"],"names":["initialState","Tracks","observer","props","state","loadTracks","this","stores","trackStore","load","render","tracks","class","style","length","map","track","href","Component","Track","showModal","e","stopPropagation","preventDefault","setState","displayModal","currentImage","target","dataset","image","currentImageXXL","imagexxl","thumb","name","title","date","closeModal","toggleDate","showDate","close","s3SmallLink","id","onClick","util","formatDate","locale","formatDistance","Date","distanceKm","elevation","images","img","data-image","s3LargeLink","data-imagexxl","s3XXLargeLink","data-thumb","data-title","data-date"],"mappings":"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","file":"route-tracks.chunk.43dc6.js","sourcesContent":["import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\n\nimport Track from '../../components/track';\n\nconst initialState = {};\n\n@observer\nclass Tracks extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            ...initialState,\n        };\n\t\tthis.loadTracks();\n    }\n\n\tloadTracks() {\n\t\tconst { trackStore } = this.props.stores;\n\t\ttrackStore.load();\n\t}\n\n\trender() {\n\t\tconst { trackStore, userStore } = this.props.stores;\n\t\tconst { tracks } = trackStore;\n\t\tconst { user } = userStore;\n\t\treturn (\n\t\t\t<div class='container-fluid' style='margin-bottom: 100px; margin-top: 60px;'>\n\t\t\t\t<div class='row'>\n\t\t\t\t\t<div class='col-12'>\n\t\t\t\t\t\t<h5>Treningsrundene dine - {tracks.length} stk</h5>\n\t\t\t\t\t\t<div class='row'>\n\t\t\t\t\t\t\t{tracks && tracks.map(track => (\n\t\t\t\t\t\t\t\t<Track stores={this.props.stores} track={track} />\n\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t<div class='col-12'>\n\t\t\t\t\t\t\t<a class='btn btn-primary mt-5 float-right'\n\t\t\t\t\t\t\t\thref='/tracks/new'\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<i class='fas fa-plus' /> Legg til runde\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nexport default Tracks;\n","import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\n\nimport Modal from '../modal';\n\n@observer\nclass Track extends Component {\n    showModal = (e) => {\n        e.stopPropagation();\n        e.preventDefault();\n        const img = e.target.dataset.image;\n        const imgXXL = e.target.dataset.imagexxl;\n        const thumb = e.target.dataset.thumb;\n        const name = e.target.dataset.name;\n        const title = e.target.dataset.title;\n        const date = e.target.dataset.date;\n        this.setState({\n            displayModal: true,\n            currentImage: img,\n            currentImageXXL: imgXXL,\n            thumb,\n            name,\n            title,\n            date,\n        });\n    }\n\n    closeModal = () => {\n        this.setState({\n            displayModal: false,\n        });\n    }\n\n    toggleDate = () => {\n        const { showDate } = this.state;\n        this.setState({ showDate: !showDate });\n    }\n\n    render() {\n        const { displayModal, currentImage, currentImageXXL, showDate, thumb, name, title, date } = this.state;\n        const { track } = this.props;\n        return (\n            <div class='row mb-3'>\n                <div class='col p-2'>\n                    {displayModal && <Modal close={this.closeModal} image={currentImage} imagexxl={currentImageXXL} thumb={thumb} name={name} title={title} date={date} />}\n\n                    <div class='col-12 col-sm-6 col-lg-2 mb-0 d-flex position-relative'>\n                        {/* {JSON.stringify(track, null, 4)} */}\n\n                        <div class={`text-center border rounded-circle imageRounded`} style={track.image ? `background-image: url(\"${track.image.s3SmallLink}\");` : ''}>\n                            {!track.image && <i class='fas fa-map-marked text-muted mt-3' style='font-size: 40px;' />}\n                        </div>\n                        <div class='flex-grow-1 pl-3' style='line-height: 1.0em;'>\n                            <a class='stretched-link' href={`/tracks/${track.id}`}>\n                                <h5>{track.name}</h5>\n                            </a>\n                            <small class='text-muted'>\n                                {track.date && <small onClick={this.toggleDate}>\n                                    {showDate ? util.formatDate(track.date, { locale: 'no-NB' }) : util.formatDistance(track.date, new Date(), { locale: 'no-NB' })}<br />\n                                </small>}\n                            </small>\n                            <small class='text-muted'>\n                                <i class='fas fa-road' /> {track.distanceKm} km\n                                <i class='fas fa-mountain ml-2' /> {track.elevation} m\n                            </small>\n                        </div>\n                    </div>\n\n                    <div class='container-fluid mt-1' style='padding-left: 122px;'>\n                        <div class='row'>\n                            {track.images && track.images.map(img => (\n                                <div class={`text-center border rounded imageRounded imageRoundedSmall`}\n                                    style={img ? `background-image: url(\"${img.s3SmallLink}\");` : ''}\n                                    onClick={this.showModal}\n                                    data-image={img.s3LargeLink}\n                                    data-imagexxl={img.s3XXLargeLink}\n                                    data-thumb={track.image && track.image.s3SmallLink}\n                                    data-title={track.name}\n                                    data-date={track.date}\n                                >\n                                    &nbsp;\n                                </div>\n                            ))}\n                        </div>\n                    </div>\n\n                </div>\n            </div>\n        );\n    }\n}\n\nexport default Track;\n"],"sourceRoot":""}