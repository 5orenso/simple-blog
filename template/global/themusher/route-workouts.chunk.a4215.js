(window.webpackJsonp=window.webpackJsonp||[]).push([[65],{"3pQw":function(t,e,o){"use strict";var s,a=o("hosL"),r=o("Utv1"),n=o("/eY4");o("OhSV"),Object(n.a)(s=function(t){function e(){return t.apply(this,arguments)||this}var o,s;return s=t,(o=e).prototype=Object.create(s.prototype),o.prototype.constructor=o,o.__proto__=s,e.prototype.render=function(){var t=this.props.summary,e=void 0===t?{}:t;return Object(a.h)("div",{class:"w-100 mb-3"},Object(a.h)("div",{class:"row"},Object(a.h)("div",{class:"col-12 col-sm-8 col-lg-6 offset-sm-2 offset-lg-3 d-flex mb-0 position-relative"},Object(a.h)("div",{class:"text-center border rounded-circle imageRounded"},Object(a.h)("div",{class:"text-muted mt-2",style:"font-size: 40px; line-height: 1;"},e.week),Object(a.h)("div",{class:"text-muted",style:"font-size: 10px; line-height: 0.8em;"},e.year)),Object(a.h)("div",{class:"flex-grow-1 pl-3"},Object(a.h)("h5",{class:"my-0"},e.week," - ",e.year),Object(a.h)("small",{class:"text-muted"},Object(a.h)("i",{class:"fas fa-wave-square"})," ",e.count,Object(a.h)("i",{class:"fas fa-road ml-2"})," ",r.a.format(e.distanceKm,0),"km",Object(a.h)("i",{class:"fas fa-mountain ml-2"})," ",r.a.format(e.elevation,0),"m",Object(a.h)("i",{class:"fas fa-stopwatch ml-2"})," ",r.a.secToHms(e.duration),Object(a.h)("i",{class:"fas fa-tachometer-alt ml-2"})," ",r.a.format(e.speedAvg,1),"km/t")))))},e}(a.Component))},"4imK":function(t,e,o){"use strict";(function(t){var s,a=o("hosL"),r=o("Utv1"),n=o("/eY4"),i=o("OhSV"),c=o("nHdA"),l=o("irB3"),h=(o("UwwE"),o("8Lgr")),u=(o("QkTp"),Object(n.a)(s=function(e){function o(){for(var t,o=arguments.length,s=new Array(o),a=0;a<o;a++)s[a]=arguments[a];return(t=e.call.apply(e,[this].concat(s))||this).toggleDate=function(e){e.stopPropagation(),e.preventDefault(),t.setState({showDate:!t.state.showDate})},t.ignoreGarminWorkout=function(e){return new Promise((function(o,s){return e.stopPropagation(),Promise.resolve(t.props.stores.garminActivityDetailsStore.ignoreWorkout(e.target.parentElement.dataset.id||e.target.dataset.id)).then((function(){try{return t.loadGarminActivities(),o()}catch(t){return s(t)}}),s)}))},t.importGarminWorkout=function(e){return new Promise((function(o,s){function a(){return t.loadGarminActivities(),t.loadWorkouts(),o()}var r,n,i,c;return e.stopPropagation(),r=e.target.parentElement.dataset.id||e.target.dataset.id,i=(n=t.props.stores).garminActivityDetailsStore,c=n.workoutStore.currentTeam,t.props.asTrack?Promise.resolve(i.importTrack(r,c)).then(function(){try{return a.call(this)}catch(t){return s(t)}}.bind(this),s):Promise.resolve(i.importWorkout(r,c)).then(function(){try{return a.call(this)}catch(t){return s(t)}}.bind(this),s)}))},t.loadWorkouts=function(){return new Promise((function(e,o){var s;return s=t.props.stores.workoutStore,Promise.resolve(s.load({query:{team:s.currentTeam}})).then((function(){try{return e()}catch(t){return o(t)}}),o)}))},t.toggleDetail=function(){var e=t.state.showDetail;t.setState({showDetail:!(void 0!==e&&e)})},t}var s,n;n=e,(s=o).prototype=Object.create(n.prototype),s.prototype.constructor=s,s.__proto__=n;var u=o.prototype;return u.loadGarminActivities=function(){return new Promise(function(t){return this.props.stores.garminActivityDetailsStore.load({query:{hideImported:1}}),t()}.bind(this))},u.componentDidMount=function(){this.loadGarminActivities()},u.render=function(){var e=this,o=this.state,s=o.showDate,n=o.showDetail,u=void 0!==n&&n,d=this.props,b=d.activities,p=void 0===b?[]:b,m=d.showDate,f=d.asTrack,O=void 0!==f&&f,j=this.props.stores,v=j.userStore,g=v.findTeam(j.workoutStore.currentTeam||v.team.id);return u?Object(a.h)(t,null,Object(a.h)("div",{class:"col-12 mb-3"},Object(a.h)("div",{class:"row"},p&&p.length>0&&Object(a.h)("div",{class:"col-12 border-top border-bottom pt-3 pb-3 my-2 bg-light"},Object(a.h)("button",{type:"button",class:"float-right btn btn-sm btn-link",onClick:this.toggleDetail},Object(a.h)("i",{class:"fas fa-caret-up"})," ",Object(a.h)(i.c,{id:"garmin.hide-list"},"Hide list")),Object(a.h)("h5",null,Object(a.h)(i.c,{id:"workout.index.garmin-workouts"},"Garmin workouts / not imported")," ",p.length),p&&p.map((function(o){var n=o.summary,u=void 0===n?{}:n,d=r.a.parseInputDate(u.startTimeInSeconds);return Object(a.h)(t,null,Object(a.h)("div",{class:"col-12 d-flex mb-4 position-relative"},Object(a.h)("div",{class:"text-center border rounded-circle imageRounded",style:'background-image: url("./assets/garmin-connect.png"); border-width: 3px !important;'}," "),Object(a.h)("div",{class:"flex-grow-1 pl-3",style:"line-height: 1.2em;"},Object(a.h)("h5",{class:"my-0 mb-1",style:"line-height: 1.0em;"},u.deviceName),u.activityType,Object(a.h)("br",null),Object(a.h)("small",{class:"text-muted"},d&&Object(a.h)("small",{onClick:e.toggleDate},m||s?r.a.formatDate(d,{locale:"no-NB"}):r.a.formatDistance(d,new Date,{locale:"no-NB"})),Object(a.h)("span",{class:"text-muted"},Object(a.h)("i",{class:"fas fa-road ml-2"})," ",Object(a.h)(h.a,{stores:e.props.stores,value:u.distanceInMeters/1e3}),Object(a.h)("i",{class:"fas fa-mountain ml-2"})," ",Object(a.h)(l.a,{stores:e.props.stores,value:u.totalElevationGainInMeters}),Object(a.h)("i",{class:"fas fa-tachometer-alt ml-2"})," ",Object(a.h)(c.a,{stores:e.props.stores,value:3.6*u.averageSpeedInMetersPerSecond}),Object(a.h)("i",{class:"fas fa-stopwatch ml-2"})," ",r.a.secToHms(u.durationInSeconds))),Object(a.h)("br",null),Object(a.h)("button",{class:"btn btn-sm btn-block btn-primary",onClick:e.importGarminWorkout,"data-id":o.id},Object(a.h)("i",{class:"fas fa-file-import"})," ",O?Object(a.h)(i.c,{id:"garmin.import-track"},"Import as track"):Object(a.h)(t,null,Object(a.h)(i.c,{id:"garmin.import"},"Import workout")," ",Object(a.h)("i",{class:"fas fa-arrow-right"})," ",g)),Object(a.h)("button",{class:"btn btn-sm btn-link",onClick:e.ignoreGarminWorkout,"data-id":o.id},Object(a.h)("i",{class:"fas fa-trash-alt"})," ",Object(a.h)(i.c,{id:"garmin.ignore"},"Ignore workout")))))})),Object(a.h)("button",{type:"button",class:"btn btn-block btn-primary mt-3",onClick:this.toggleDetail},Object(a.h)("i",{class:"fas fa-caret-up"})," ",Object(a.h)(i.c,{id:"garmin.hide-list"},"Hide list")))))):p&&p.length>0?Object(a.h)(t,null,Object(a.h)("div",{class:"col-12 mb-3"},Object(a.h)("button",{type:"button",class:"btn btn-block btn-outline-info",onClick:this.toggleDetail},Object(a.h)("div",{class:"float-right ml-2 text-center border rounded-circle imageRounded imageRoundedIcon",style:"background-image: url('./assets/garmin-connect.png');"}),Object(a.h)(i.c,{id:"workout.index.garmin-workouts"},"Garmin workouts / not imported")," ",p.length))):Object(a.h)(t,null)},o}(a.Component))||s);e.a=u}).call(this,o("hosL").Fragment)},B7Gj:function(t,e,o){"use strict";o.r(e),function(t){function s(t,e){var o=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),o.push.apply(o,s)}return o}function a(t,e,o){return e in t?Object.defineProperty(t,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[e]=o,t}function r(t){return c.a.format(.621371*t,1)}var n,i=o("hosL"),c=o("Utv1"),l=o("/eY4"),h=o("OhSV"),u=o("ZOvn"),d=o("JWe/"),b=(o("3pQw"),o("0SNj")),p=o("9Bb9"),m=o("WAWY"),f=o("azdc"),O=o("3UPq"),j=o("pJjI"),v=o("wanP"),g=o("K9Qx"),w=o("bUJL"),y=o("4imK"),k=o("epqT"),x=o("nHdA"),S=(o("irB3"),o("UwwE"),o("8Lgr")),D=(o("QkTp"),o("/DnB")),T=o("yHBq"),I=u.a.marginTop(!0),P=u.a.marginBottom(),W=u.a.subMenuMarginTop(),C={loadedTime:0,isLoading:!1,offset:0,limit:5,submenu:"totals",workoutFilter:function(){return!0},sessionid:(new Date).getTime()},M=["id","type","user","team","title"],A=Object(l.a)(n=function(e){function o(o){var r;return(r=e.call(this,o)||this).loadAll=function(t){return new Promise((function(e,o){var s,a,n,i,c,l,h,u,d,b,p,m;return void 0===t&&(t=r.props),a=(s=r.state).limit,n=s.offset,r.setState({isLoading:!0}),c=(i=t.stores).userStore,l=i.messageStore,h=i.workoutStore.currentTeam,u=(new Date).getMonth()+1,d=(new Date).getFullYear(),p=(b=t).month,m=b.year,Promise.resolve(Promise.all([r.loadWorkouts({team:h,year:void 0===m?d:m,month:void 0===p?u:p,limit:a,offset:n}),r.loadWorkoutSummary(t),r.loadWorkoutPlans(t),c.getNotifications(),l.getUnReadMessages(),r.loadStravaActivities(),r.loadGarminActivities(),r.loadTeams(t)])).then((function(){try{return r.setState({loadedTime:(new Date).getTime(),isLoading:!1}),e()}catch(t){return o(t)}}),o)}))},r.changeTeam=function(){r.loadAll()},r.loadWorkouts=function(t){var e=t.offset;r.props.stores.workoutStore.load({query:{team:t.team,year:t.year,month:t.month},limit:t.limit,offset:e,addData:["publicTeams","publicUsers"]},e>0)},r.setLoadMore=function(){var t=r.props.stores.workoutStore,e=t.currentTeam,o=(new Date).getMonth()+1,s=(new Date).getFullYear(),a=r.props,n=a.month,i=void 0===n?o:n,c=a.year,l=void 0===c?s:c;t.setLoadMore((function(){var t=r.state,o=t.limit,s=t.offset;r.setState({offset:s+=o}),r.loadWorkouts({team:e,year:l,month:i,limit:o,offset:s})}))},r.unsetLoadMore=function(){r.props.stores.workoutStore.setLoadMore((function(){}))},r.loadWorkoutPlans=function(t){return new Promise((function(e,o){function s(){return r.setState({isLoading:!1}),e()}var a,n,i,c,l,h,u,d,b,p,m,f;return void 0===t&&(t=r.props),r.setState({isLoading:!0}),a=(new Date).getMonth()+1,n=(new Date).getFullYear(),l=void 0===(c=(i=t).year)?n:c,h=i.month,d=(u=t.stores).workoutPlanStore,m=(void 0===(p=u.userStore.user.settings)?{}:p).imperial,(b=u.workoutStore.currentTeam)?Promise.resolve(d.load({query:{team:b,seasonYear:(void 0===h?a:h)<8?l-1:l},addData:["tips"]})).then(function(){try{return(f=d.workoutPlans[0]||{}).id?Promise.resolve(d.load(f.id)).then(function(){try{return d.prepareWeekGraphs({year:l,imperial:m}),t.call(this)}catch(t){return o(t)}}.bind(this),o):(d.updateKeyValue("workoutPlan",{}),d.updateKeyValue("workoutPlans",[]),d.resetGraphPlanWeekDistanceCurrent(),t.call(this));function t(){return s.call(this)}}catch(t){return o(t)}}.bind(this),o):s.call(this)}))},r.chooseSubmenu=function(t){r.setState({submenu:t.target.parentElement.dataset.menu||t.target.dataset.menu})},r.chooseDay=function(t){var e=t.day,o=t.month,s=t.year,a=r.state;if(a.dd===e&&a.mm===o&&a.yyyy===s)return r.setState({workoutFilter:function(){return!0},dd:null,mm:null,yyyy:null});r.setState({dd:e,mm:o,yyyy:s,workoutFilter:function(t){var a=new Date(t.date),r=a.getDate(),n=a.getMonth()+1,i=a.getFullYear();return r===parseInt(e,10)&&n===parseInt(o,10)&&i===parseInt(s,10)}})},r.renderContent=function(e){var o=e.obj;return Object(i.h)(t,null,Object(i.h)(d.a,{stores:r.props.stores,workout:o,showDate:!0,wrapperClasses:"w-100",wrapperClassesRow:""}))},r.setupIntersection=function(){r.setState({handleIntersection:u.a.intersectionObserverCallback});var t=r.props.stores.workoutStore;r.scrollViewTimer=setInterval((function(){return t.postScrollview(u.a.getIntersectionObserverHistory())}),3e4)},r.state=function(t){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?s(Object(o),!0).forEach((function(e){a(t,e,o[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):s(Object(o)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(o,e))}))}return t}({},C),r}var n,l;l=e,(n=o).prototype=Object.create(l.prototype),n.prototype.constructor=n,n.__proto__=l;var A=o.prototype;return A.loadTeams=function(t){return new Promise(function(e,o){var s,a,r,n,i,c,l,h;return void 0===t&&(t=this.props),a=(s=t.stores).teamStore,r=s.workoutStore.currentTeam,n=(new Date).getMonth()+1,i=(new Date).getFullYear(),l=(c=t).month,h=c.year,Promise.resolve(a.load({query:{team:r,skipMusherWorkoutSummary:!0,year:void 0===h?i:h,month:void 0===l?n:l},addData:["workoutSummary"]})).then((function(){try{return e()}catch(t){return o(t)}}),o)}.bind(this))},A.loadStravaActivities=function(){return new Promise(function(t){return this.props.stores.stravaActivityStore.load({query:{hideImported:1}}),t()}.bind(this))},A.loadGarminActivities=function(){return new Promise(function(t){return this.props.stores.garminActivityDetailsStore.load({query:{hideImported:1}}),t()}.bind(this))},A.loadWorkoutSummary=function(t){return new Promise(function(e,o){var s,a,r,n,i,c,l,h,u;return void 0===t&&(t=this.props),a=(s=t.stores).userStore,r=s.workoutStore,n=(new Date).getMonth()+1,i=(new Date).getFullYear(),l=(c=t).month,h=c.year,u=r.currentTeam,Promise.resolve(a.getWorkoutSummary({team:u,year:void 0===h?i:h,month:void 0===l?n:l})).then((function(){try{return Promise.resolve(a.getWorkoutSummaryDay({daysBack:500,team:u})).then((function(){try{return e()}catch(t){return o(t)}}),o)}catch(t){return o(t)}}),o)}.bind(this))},A.componentWillMount=function(){this.setupIntersection()},A.componentWillUnmount=function(){var t=this.props.stores;t.workoutStore.postScrollview(u.a.getIntersectionObserverHistory()),clearInterval(this.scrollViewTimer),this.unsetLoadMore()},A.componentDidMount=function(){var t=this.props.stores.appState;this.loadAll(),t.checkCordova(),this.setLoadMore()},A.componentWillReceiveProps=function(t){t.month===this.props.month&&t.year===this.props.year&&t.team===this.props.team||this.loadAll(t)},A.render=function(){var e,o=this.props.scrolledDown,s=this.state,a=s.isLoading,n=s.submenu,l=s.handleIntersection,d=s.sessionid,C=s.loadedTime,A=this.props.stores,L=A.userStore,_=A.appState,F=A.workoutStore,E=A.workoutPlanStore,Y=A.stravaActivityStore,U=A.garminActivityDetailsStore,H=E.workoutPlan,N=E.workoutPlans,R=L.user,B=L.workoutSummaryWeekDay,z=void 0===B?[]:B,G=R.language,K=R.settings,V=void 0===K?{}:K,q=u.a.getMonths(void 0===G?"en":G),Q=(new Date).getMonth()+1,J=(new Date).getFullYear(),Z=this.props,X=Z.month,$=void 0===X?Q:X,tt=Z.year,et=void 0===tt?J:tt,ot=parseInt($<8?et-1:et,10),st=F.currentTeam,at=L.findTeam(st,!0),rt=_.darkmode,nt=F.workouts,it=F.cordovaActiveTrackingParams,ct=F.isRunning,lt=F.totalDistance,ht=F.currentSpeed,ut=F.totalTime,dt=nt.filter(this.state.workoutFilter),bt=E.sumWorkoutPlanMonth(parseInt(et,10),parseInt($,10))||0,pt=L.findWorkoutSummaryMonth(parseInt(et,10),parseInt($,10),"distanceKm",!0)||0;bt&&(e=Math.floor(pt/bt*100));var mt=L.findWorkoutSummaryMonth(parseInt(et,10),parseInt($,10),"count",!0)||0,ft=L.findWorkoutSummaryMonth(parseInt(et,10),parseInt($,10),"distanceKm",!0)||0,Ot=L.findWorkoutSummaryMonth(parseInt(et,10),parseInt($,10),"duration",!0)||0,jt=L.findWorkoutSummaryMonth(parseInt(et,10),parseInt($,10),"speedAvg",!0)||0,vt=(L.findWorkoutSummaryMonth(parseInt(et,10),parseInt($,10),"elevation",!0),Y.stravaActivities),gt=void 0===vt?[]:vt,wt=U.garminActivityDetails,yt=void 0===wt?[]:wt;return Object(i.h)("div",{class:"container-fluid",style:"margin-bottom: "+P+"; margin-top: "+I+";"},Object(i.h)("div",{class:"row fixed-top pt-2",style:"margin-top: "+(o>0?0:W)+"; background-color: "+(rt?"#191d21":"#f8f9fa")+"; transition: all 0.3s ease-in-out;"},Object(i.h)("div",{class:"col text-center border-bottom border-primary subtopmenu"},Object(i.h)("a",{href:"/workouts/",class:"text-primary stretched-link"},Object(i.h)("nobr",null,Object(i.h)("i",{class:"fas fa-chart-line"})," ",Object(i.h)(h.c,{id:"workout.index.dashboard"},"Oversikt")))),Object(i.h)("div",{class:"col text-center subtopmenu"},Object(i.h)("a",{href:"/workouts/list",class:"text-secondary stretched-link"},Object(i.h)("nobr",null,Object(i.h)("i",{class:"fas fa-list"})," ",Object(i.h)(h.c,{id:"workout.index.list"},"Liste")))),Object(i.h)("div",{class:"col text-center subtopmenu"},Object(i.h)("a",{href:"/workouts/plan",class:"text-secondary stretched-link"},Object(i.h)("nobr",null,Object(i.h)("i",{class:"fas fa-calendar-alt"})," ",Object(i.h)(h.c,{id:"workout.index.plan"},"Plan"))))),ct&&it&&Object(i.h)(t,null,Object(i.h)("div",{class:"row"},Object(i.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 border-bottom bg-light py-4"},Object(i.h)("h1",{class:"text-success font-weight-bold"},"Tracking",Object(i.h)("div",{class:"spinner-grow ml-3",role:"status"})),Object(i.h)("div",{class:"row mb-3"},Object(i.h)("div",{class:"col-4 text-center font-weight-bold",style:"font-size: 1.3em;"},c.a.secToHms(ut)),Object(i.h)("div",{class:"col-4 text-center font-weight-bold",style:"font-size: 1.3em;"},Object(i.h)(x.a,{stores:this.props.stores,value:3.6*ht})),Object(i.h)("div",{class:"col-4 text-center font-weight-bold",style:"font-size: 1.3em;"},Object(i.h)(S.a,{stores:this.props.stores,value:lt/1e3}))),Object(i.h)("a",{class:"btn btn-block btn-danger",href:"/workouts/tracking"},Object(i.h)(h.c,{id:"workouts.go-to-tracking"},"Go to tracking"))))),Object(i.h)("div",{class:"row"},Object(i.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 border-bottom"},Object(i.h)(j.a,{stores:this.props.stores,callback:this.changeTeams,key:"teams-"+st})),Object(i.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-2 mb-2"},Object(i.h)("a",{class:"btn btn-primary btn-sm float-right",href:"/workouts/edit/new"},Object(i.h)("i",{class:"fas fa-plus"})," ",Object(i.h)(h.c,{id:"workout.index.add-workout"},"Legg til treningstur"))),Object(i.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 my-1"},Object(i.h)("div",{class:"row"},Object(i.h)("div",{class:"w-100 overflow-hidden"},Object(i.h)("div",{class:"d-flex flex-row flex-nowrap pb-2 px-1",style:"overflow: auto; scroll-snap-type: x mandatory;"},Object(i.h)("div",{class:"col px-0 pt-2"},Object(i.h)("button",{class:"btn btn-block rounded-pill-left rounded-none "+("totals"===n?"btn-primary":"btn-outline-primary")+" text-nowrap",style:"text-overflow: ellipsis; overflow: hidden;","data-menu":"totals",onClick:this.chooseSubmenu},Object(i.h)("i",{class:"fas fa-tachometer-alt"})," ",Object(i.h)(h.c,{id:"workouts.totals"},"Totaler")),"totals"===n&&Object(i.h)(D.a,{horizontal:"center",vertical:"end"})),Object(i.h)("div",{class:"col px-0 pt-2"},Object(i.h)("button",{class:"btn btn-block rounded-none "+("seasontotals"===n?"btn-primary":"btn-outline-primary")+" text-nowrap",style:"text-overflow: ellipsis; overflow: hidden;","data-menu":"seasontotals",onClick:this.chooseSubmenu},Object(i.h)("i",{class:"fas fa-tachometer-alt"})," ",Object(i.h)(h.c,{id:"workouts.seasontotals"},"Season totals")),"seasontotals"===n&&Object(i.h)(D.a,{horizontal:"center",vertical:"end"})),Object(i.h)("div",{class:"col px-0 pt-2"},Object(i.h)("button",{class:"btn btn-block rounded-none "+("analysis"===n?"btn-primary":"btn-outline-primary")+" text-nowrap",style:"text-overflow: ellipsis; overflow: hidden;","data-menu":"analysis",onClick:this.chooseSubmenu},Object(i.h)("i",{class:"fas fa-chart-area"})," ",Object(i.h)(h.c,{id:"workouts.analysis"},"Analyser")),"analysis"===n&&Object(i.h)(D.a,{horizontal:"center",vertical:"end"})),Object(i.h)("div",{class:"col px-0 pt-2"},Object(i.h)("button",{class:"btn btn-block rounded-none "+("table"===n?"btn-primary":"btn-outline-primary")+" text-nowrap",style:"text-overflow: ellipsis; overflow: hidden;","data-menu":"table",onClick:this.chooseSubmenu},Object(i.h)("i",{class:"fas fa-table"})," ",Object(i.h)(h.c,{id:"workouts.table"},"Tabell")),"table"===n&&Object(i.h)(D.a,{horizontal:"center",vertical:"end"})),Object(i.h)("div",{class:"col px-0 pt-2"},Object(i.h)("button",{class:"btn btn-block rounded-none "+("workoutplan"===n?"btn-primary":"btn-outline-primary")+" text-nowrap",style:"text-overflow: ellipsis; overflow: hidden;","data-menu":"workoutplan",onClick:this.chooseSubmenu},Object(i.h)("i",{class:"fas fa-calendar-alt"})," ",Object(i.h)(h.c,{id:"workouts.workoutplan"},"Treningsplan")),"workoutplan"===n&&Object(i.h)(D.a,{horizontal:"center",vertical:"end"})),Object(i.h)("div",{class:"col px-0 pt-2"},Object(i.h)("button",{class:"btn btn-block rounded-pill-right rounded-none "+("calendar"===n?"btn-primary":"btn-outline-primary")+" text-nowrap",style:"text-overflow: ellipsis; overflow: hidden;","data-menu":"calendar",onClick:this.chooseSubmenu},Object(i.h)("i",{class:"fas fa-calendar-alt"})," ",Object(i.h)(h.c,{id:"workouts.calendar"},"Kalender")),"calendar"===n&&Object(i.h)(D.a,{horizontal:"center",vertical:"end"})))))),"totals"===n&&Object(i.h)(t,null,Object(i.h)(O.a,{stores:this.props.stores,isLoading:a,year:et,month:$,chooseDayFunction:this.chooseDay,key:"calendar-header-"+et+"-"+$+"-"+st+"-"+C+"-"+z.length,hideTable:"calendar"===n?0:1,hideSummary:"calendar"===n?0:1,skipLoadSummary:"calendar"===n?0:1}),Object(i.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-2 mb-2"},Object(i.h)("div",{class:"row"},Object(i.h)("div",{class:"col-4 text-center"},bt>=0&&Object(i.h)(v.a,{key:"gauge-"+e,radius:55,percent:e,prefix:"%",total:V.imperial?r(bt)+" mi":c.a.format(bt,0)+" km",completed:V.imperial?r(pt)+" mi":c.a.format(pt,0)+" km"}),Object(i.h)("br",null),Object(i.h)("small",{class:"text-muted"},Object(i.h)(h.c,{id:"workout.index.plan"},"Treningsplan"))),Object(i.h)("div",{class:"col-4 text-center"},Object(i.h)("h5",null,Object(i.h)("span",{class:"text-muted font-weight-lighter"},Object(i.h)("i",{class:"fas fa-road"}))),Object(i.h)("h3",null,Object(i.h)(S.a,{stores:this.props.stores,value:ft,smallUnit:!0})),Object(i.h)("small",{class:"text-muted"},Object(i.h)(h.c,{id:"workout.calendar.distance"},"Distanse"))),Object(i.h)("div",{class:"col-4 text-center"},Object(i.h)("h5",null,Object(i.h)("span",{class:"text-muted font-weight-lighter"},Object(i.h)("i",{class:"fas fa-tachometer-alt ml-3"}))),Object(i.h)("h3",null,Object(i.h)(x.a,{stores:this.props.stores,value:jt,smallUnit:!0})),Object(i.h)("small",{class:"text-muted"},Object(i.h)(h.c,{id:"workout.calendar.avg-speed"},"Gj.snittsfart"))),Object(i.h)("div",{class:"col-12 text-center"},Object(i.h)("span",{class:"text-muted font-weight-lighter"},Object(i.h)("i",{class:"fas fa-running"})," ")," ",mt,Object(i.h)("span",{class:"text-muted font-weight-lighter"},Object(i.h)("i",{class:"fas fa-clock ml-3"}))," ",c.a.secToHms(Ot)))),Object(i.h)("div",{class:"col-12"},Object(i.h)(k.a,{stores:this.props.stores,url:this.props.url,section:n}))),"seasontotals"===n&&Object(i.h)(t,null,Object(i.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 my-3 text-center"},Object(i.h)("h3",null,Object(i.h)("i",{class:"fas fa-tachometer-alt"})," ",Object(i.h)(h.c,{id:"workouts.seasontotals"},"Season totals"))),Object(i.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3"},Object(i.h)(b.a,{stores:this.props.stores,currentTeam:st,year:et,month:$}),Object(i.h)(p.a,{stores:this.props.stores,currentTeam:st,year:et,month:$})),Object(i.h)("div",{class:"col-12"},Object(i.h)(k.a,{stores:this.props.stores,url:this.props.url,section:n}))),"analysis"===n&&Object(i.h)(t,null,Object(i.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 my-3 text-center"},Object(i.h)("h3",null,Object(i.h)("i",{class:"fas fa-chart-area"})," ",Object(i.h)(h.c,{id:"workouts.analysis"},"Analyser"))),Object(i.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3"},Object(i.h)(m.a,{stores:this.props.stores,isLoading:a,year:et,month:$,key:"graph-"+H.id+"-"+N.length+"-"+V.imperial,showExtra:!0})),Object(i.h)("div",{class:"col-12"},Object(i.h)(k.a,{stores:this.props.stores,url:this.props.url,section:n}))),"table"===n&&Object(i.h)(t,null,Object(i.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 my-3 text-center"},Object(i.h)("h3",null,Object(i.h)("i",{class:"fas fa-table"})," ",Object(i.h)(h.c,{id:"workouts.table"},"Tabell"))),Object(i.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3"},Object(i.h)(f.a,{stores:this.props.stores,isLoading:a,year:et,month:$,key:"table-"+H.id+"-"+N.length})),Object(i.h)("div",{class:"col-12"},Object(i.h)(k.a,{stores:this.props.stores,url:this.props.url,section:n}))),"calendar"===n&&Object(i.h)(t,null,Object(i.h)(O.a,{stores:this.props.stores,isLoading:a,year:et,month:$,chooseDayFunction:this.chooseDay,key:"calendar-header-"+et+"-"+$+"-"+st+"-"+C+"-"+z.length,hideTable:"calendar"===n?0:1,hideSummary:"calendar"===n?0:1,skipLoadSummary:"calendar"===n?0:1}),Object(i.h)("div",{class:"col-12"},Object(i.h)(k.a,{stores:this.props.stores,url:this.props.url,section:n}))),"workoutplan"===n&&Object(i.h)(t,null,Object(i.h)(g.a,{stores:this.props.stores,basehref:"/workouts/",month:$,year:et,key:(H.id||ot)+"-"+st+"-"+$+"-"+et+"-"+C,showNavigation:!0,showHeader:!0,currentTeam:st}),Object(i.h)("div",{class:"col-12"},Object(i.h)(k.a,{stores:this.props.stores,url:this.props.url,section:n})))),"totals"===n&&Object(i.h)(t,null,Object(i.h)("div",{class:"row mt-3"},Object(i.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-4"},Object(i.h)("div",{class:"row"},R&&R.strava&&Object(i.h)(t,null,Object(i.h)(w.a,{stores:this.props.stores,activities:gt,key:"strava-"+st+"-"+gt.length})),R&&R.garmin&&Object(i.h)(t,null,Object(i.h)(y.a,{stores:this.props.stores,activities:yt,key:"garmin-"+st+"-"+yt.length}))))),Object(i.h)("div",{class:"row"},dt&&dt.length>0&&Object(i.h)("div",{class:"col-12 mb-4"},Object(i.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 px-0 mt-4"},Object(i.h)("h5",null,at&&at.name&&Object(i.h)("div",null,Object(i.h)("small",{class:"font-weight-lighter"},"(",Object(i.h)(h.c,{id:"workout.index.filtered-by"},"Filtered by"),": ",at.name,")")))),Object(i.h)(T.a,{data:dt,wrapperClassNames:"row pb-4",contentClassNames:"col-12 col-sm-8 col-lg-6 offset-sm-2 offset-lg-3 my-1 position-relative rounded rounded-lg py-3 bg-"+(rt?"black":"white")+" shadow-sm",renderContent:this.renderContent,dataFields:M,dataValues:{type:"11"},handleIntersection:l,sessionid:d})),!nt||0===nt.length&&Object(i.h)("div",{class:"col-12 mb-4 text-center pt-5 pb-5"},Object(i.h)("h1",{class:"text-muted"},Object(i.h)("i",{class:"fas fa-running"})),Object(i.h)("h5",{class:"text-muted font-weight-lighter"},Object(i.h)(h.c,{id:"workouts.no-workouts",fields:{month:q[$-1],year:et}},"Ingen treningsturer registrert..."))))))},o}(i.Component))||n;e.default=A}.call(this,o("hosL").Fragment)},K9Qx:function(t,e,o){"use strict";(function(t){var s,a=o("hosL"),r=o("Utv1"),n=o("/eY4"),i=o("go65"),c=o("OhSV"),l=(o("nHdA"),o("irB3"),o("UwwE"),o("8Lgr")),h=(o("QkTp"),o("ZOvn")),u=[0,6],d=Object(n.a)(s=function(e){function o(){for(var t,o=arguments.length,s=new Array(o),a=0;a<o;a++)s[a]=arguments[a];return(t=e.call.apply(e,[this].concat(s))||this).setFocus=function(){t.inputRef&&t.inputRef.focus()},t.editMonth=function(e){t.setState({showInput:!0,inputYear:e.target.parentElement.dataset.year||e.target.dataset.year,inputMonth:e.target.parentElement.dataset.month||e.target.dataset.month,inputDay:null,inputWeek:null,newDistance:e.target.parentElement.dataset.distance||e.target.dataset.distance||null},(function(){return t.setFocus()}))},t.editWeek=function(e){t.setState({showInput:!0,inputYear:e.target.parentElement.dataset.year||e.target.dataset.year,inputWeek:e.target.parentElement.dataset.week||e.target.dataset.week,inputMonth:null,inputDay:null,newDistance:e.target.parentElement.dataset.distance||e.target.dataset.distance||null},(function(){return t.setFocus()}))},t.editDay=function(e){t.setState({showInput:!0,inputYear:e.target.parentElement.dataset.year||e.target.dataset.year,inputMonth:e.target.parentElement.dataset.month||e.target.dataset.month,inputDay:e.target.parentElement.dataset.day||e.target.dataset.day,inputWeek:e.target.parentElement.dataset.week||e.target.dataset.week,newDistance:e.target.parentElement.dataset.distance||e.target.dataset.distance||null},(function(){return t.setFocus()}))},t.saveDistance=function(){return new Promise((function(e,o){function s(){return w=n.workoutPlan.id,b&&(y=f?"days":"weeks"),Promise.resolve(n.saveField(w,y,{year:b,month:p,day:f,week:m,distance:O})).then((function(){try{return Promise.resolve(n.load(w)).then((function(){try{return t.resetInput(!0),e()}catch(t){return o(t)}}),o)}catch(t){return o(t)}}),o)}var a,n,i,c,l,h,u,d,b,p,m,f,O,j,v,g,w,y;return n=(a=t.props.stores).workoutPlanStore,c=a.userStore.findTeam(i=a.workoutStore.currentTeam)||"",h=(l=t.props).year,u=n.workoutPlans[0]||{},b=(d=t.state).inputYear,p=d.inputMonth,m=d.inputWeek,f=d.inputDay,O=d.newDistance,j=l.month||(new Date).getMonth()+1,v=h||r.a.getYear(),g=parseInt(j<8?v-1:v,10),u.id?Promise.resolve(n.load(u.id)).then(function(){try{return s.call(this)}catch(t){return o(t)}}.bind(this),o):Promise.resolve(n.insert({title:"Workout plan for "+g+" - "+(g+1)+": "+c,team:i,seasonYear:g,seasonMonth:6})).then(function(t){try{return Promise.resolve(n.load(t.data.id)).then(function(){try{return s.call(this)}catch(t){return o(t)}}.bind(this),o)}catch(t){return o(t)}}.bind(this),o)}))},t.resetInput=function(e){if(e){var o=t.state,s=r.a.addDays(new Date(o.inputYear,o.inputMonth-1,o.inputDay,0,0,0,0),1);t.setState({showInput:!0,inputYear:s.getFullYear(),inputMonth:s.getMonth()+1,inputDay:s.getDate(),inputWeek:r.a.getWeek(s),newDistance:null}),t.setFocus()}else t.setState({showInput:!1,inputYear:null,inputMonth:null,inputDay:null,inputWeek:null,newDistance:null})},t.checkKeydown=function(e){switch(e.key){case"Enter":t.saveDistance();break;case"Escape":t.resetInput()}},t.updateWorkoutPlanTips=function(){var e=t.props.stores.userStore.user,o=(void 0===e?{}:e).settings;t.setState({hideWorkoutPlanTips:(void 0===o?{}:o).hideWorkoutPlanTips})},t.toggleTips=function(){return new Promise((function(e,o){var s,a;return s=t.props.stores.userStore,t.setState({hideWorkoutPlanTips:a=1===t.state.hideWorkoutPlanTips?0:1}),Promise.resolve(s.updateSetting({"settings.hideWorkoutPlanTips":a},{hideWorkoutPlanTips:a})).then((function(){try{return e()}catch(t){return o(t)}}),o)}))},t}var s,n;n=e,(s=o).prototype=Object.create(n.prototype),s.prototype.constructor=s,s.__proto__=n;var d=o.prototype;return d.componentDidMount=function(){this.updateWorkoutPlanTips()},d.render=function(){var e=this,o=this.state.hideWorkoutPlanTips,s=this.props.stores,n=s.workoutPlanStore,d=s.userStore,b=s.teamStore,p=d.user.language,m=void 0===p?"en":p,f=s.appState.darkmode,O=h.a.getDays(m),j=h.a.getMonths(m),v=this.state,g=v.showInput,w=v.inputYear,y=v.inputMonth,k=v.inputWeek,x=v.inputDay,S=v.newDistance,D=(new Date).getDate(),T=(new Date).getMonth()+1,I=(new Date).getFullYear(),P=(new Date).getTime(),W=this.props,C=W.month,M=void 0===C?T:C,A=W.year,L=void 0===A?I:A,_=W.dog,F=W.basehref,E=W.showNavigation,Y=void 0===E||E,U=W.showHeader,H=void 0===U||U,N=W.currentTeam,R=parseInt(M<8?L-1:L,10),B=parseInt(M,10),z=parseInt(L,10),G=h.a.getNextMonth(B,z),K=G.month,V=G.year,q=h.a.getPrevMonth(B,z),Q=q.month,J=q.year,Z=r.a.getDaysInMonth(M,L),X=r.a.getWeeksInMonth(M,L),$=r.a.getDaysInWeek(X[0].week,L,M),tt=0,et=0,ot=0,st=Z[Z.length-1].getTime()>P,at=n.findWorkoutPlanSummaryMonth(L,B)||{},rt=n.workoutPlan,nt=n.tips,it=nt[L+"-"+r.a.padDate(M)],ct=it&&(it.comments.length>0||it.distance),lt=b.findTeam(N)||{};return Object(a.h)(t,null,H&&Object(a.h)(t,null,Object(a.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-4 text-center"},Y&&Object(a.h)("a",{href:""+(F||"/workouts/month/")+K+"/"+V+"/skipScroll",class:"float-right btn btn-sm btn-outline-secondary ml-2"},Object(a.h)("i",{class:"fas fa-arrow-right"})),Y&&Object(a.h)("a",{href:""+(F||"/workouts/month/")+Q+"/"+J+"/skipScroll",class:"float-left btn btn-sm btn-outline-secondary mr-2"},Object(a.h)("i",{class:"fas fa-arrow-left"})),Object(a.h)("h3",null,Object(a.h)(c.c,{id:"workout.plan.month"},"Måned")," - ",j[M-1]," ",L," ",at.distance?"- "+r.a.format(at.distance,0)+" km":""),Object(a.h)("h5",{class:"text-muted font-weight-light"},Object(a.h)(c.c,{id:"workout.plan.season"},"Sesongen")," ",R," - ",R+1),Object(a.h)("div",null,rt.id?Object(a.h)(t,null,Object(a.h)("small",null,rt.title)):Object(a.h)(t,null,Object(a.h)("div",{class:"display-4"},Object(a.h)("i",{class:"far fa-sad-tear text-muted"})),Object(a.h)("h5",{class:"font-weight-lighter text-muted"},Object(a.h)(c.c,{id:"workout.plan.no-workout-plan-found",fields:{name:lt}},"Ingen plan")),Object(a.h)("div",{class:"text-muted"},Object(a.h)(c.c,{id:"workout.plan.click-to-start"},"Click on a date to get started.")))),_&&Object(a.h)("div",null,_.name))),Object(a.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3"},!(!(g&&w&&k)||x)&&Object(a.h)(t,null,Object(a.h)("div",{class:"form-inline w-100"},Object(a.h)("div",{class:"form-group w-75 mr-3 mb-0"},Object(a.h)("input",{class:"form-control w-100 form-control",type:"text",placeholder:"Enter distance for "+w+" w"+k,ref:function(t){return e.inputRef=t},onInput:Object(i.a)(this,"newDistance"),onKeydown:this.checkKeydown,autocomplete:"off",value:S||""})),Object(a.h)("button",{type:"button",class:"btn btn-primary",onClick:this.saveDistance},Object(a.h)(c.c,{id:"workout.plan.save"},"Lagre")))),!!(g&&w&&y)&&Object(a.h)(t,null,Object(a.h)("div",{class:"form-inline w-100"},Object(a.h)("div",{class:"form-group w-75 mr-3 mb-0"},Object(a.h)("input",{class:"form-control w-100 form-control",type:"text",placeholder:"Enter distance for "+w+"-"+r.a.padDate(y)+" "+(x?"-"+r.a.padDate(x):""),ref:function(t){return e.inputRef=t},onInput:Object(i.a)(this,"newDistance"),onKeydown:this.checkKeydown,autocomplete:"off",value:S||""})),Object(a.h)("button",{type:"button",class:"btn btn-primary",onClick:this.saveDistance},Object(a.h)(c.c,{id:"workout.plan.save"},"Lagre"))))),"no"===m&&Object(a.h)(t,null,o?Object(a.h)(t,null,Object(a.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-4 d-flex justify-content-end"},Object(a.h)("button",{type:"button",class:"btn btn-outline-primary btn-sm",onClick:this.toggleTips},Object(a.h)("i",{class:"fas fa-eye"})," ",Object(a.h)(c.c,{id:"workout.plan.show-tips"},"Show tips")))):Object(a.h)(t,null,Object(a.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-4 d-flex justify-content-end"},Object(a.h)("button",{type:"button",class:"btn btn-primary btn-sm",onClick:this.toggleTips},Object(a.h)("i",{class:"fas fa-eye-slash"})," ",Object(a.h)(c.c,{id:"workout.plan.hide-tips"},"Hide tips"))))),Object(a.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3"},Object(a.h)("div",{class:"table-responsive"},Object(a.h)("table",{class:"table table-striped table-sm"},Object(a.h)("thead",null,Object(a.h)("tr",null,Object(a.h)("th",{class:"text-muted"},Object(a.h)("small",null,Object(a.h)(c.c,{id:"workout.plan.week"},"Uke"))),$.map((function(t){return Object(a.h)("th",null,Object(a.h)("small",null,O[t.getDay()]))})),Object(a.h)("th",{class:"text-muted"},Object(a.h)("small",null,Object(a.h)(c.c,{id:"workout.plan.sum"},"Sum"))),Object(a.h)("th",{class:"text-muted"},Object(a.h)("small",null,Object(a.h)(c.c,{id:"workout.plan.planned"},"Plan"))))),Object(a.h)("tbody",null,X&&X.map((function(s){var i=r.a.getDaysInWeek(s.week,L,M),c=n.findWorkoutPlanSummaryWeek(r.a.asNumber(L),s.week)||{},b=i[6].getTime()>P,p=0,O=0;c.distance>0&&(et+=c.distance);var j=nt[L+"-"+r.a.padDate(M)+"-w"+r.a.padDate(s.week)],v=j&&(j.comments.length>0||j.distance);return Object(a.h)(t,null,Object(a.h)("tr",null,Object(a.h)("td",{class:"text-right text-muted pt-3 border-right "+(x||w!=L||k!=s.week?"":"border rounded border-primary")},Object(a.h)("small",{onClick:e.editWeek,"data-week":s.week,"data-year":L,"data-distance":c.distance},s.week)),i.map((function(t){var o=t.getFullYear(),r=t.getMonth()+1,i=t.getDate(),c=t.getTime()>P,b=d.findWorkoutSummaryWeekDay(c?o-1:o,r,i,B)||{},m=n.findWorkoutPlanSummaryDay(o,r,i,B)||{};m&&m.distance&&(p+=m.distance,tt+=m.distance),b.distanceKm&&(O+=b.distanceKm,ot+=b.distanceKm);var j=w==o&&y==r&&x==i,v=I==o&&T==r&&D==i,g=u.indexOf(t.getDay())>-1;return Object(a.h)("td",{class:"text-center overflow-hidden font-weight-light position-relative pt-3 pb-3 border-right "+(j?"calendarIsChosen":"")+" "+(v?"calendarIsToday":"")+" "+(g?"calendarIsWeekend":""),style:"font-size: 0.8em; min-width: 3rem;",onClick:e.editDay,"data-day":t.getDate(),"data-month":t.getMonth()+1,"data-year":L,"data-week":s.week,"data-distance":m.distance},Object(a.h)("div",{class:"position-absolute text-muted",style:"top: 0px; right: 2px; font-size: 0.7em;"},t.getDate()),m&&m.distance?Object(a.h)("div",{class:"rounded-pill w-100 px-1",style:"background-color: "+h.a.getPlanColor(m,f)+";"},Object(a.h)(l.a,{stores:e.props.stores,value:m.distance}),m.count>1&&Object(a.h)("span",{class:"position-absolute text-danger",style:"bottom: 0; right: 0px; font-size: 0.6em;"},m.count)):"-",b.distanceKm>0&&Object(a.h)("span",{class:"position-absolute font-weight-bold",style:"bottom: 0; left: 0px; font-size: 0.85em; color: "+(c?"#393DB1":"#2BAAA9")+";"},Object(a.h)(l.a,{stores:e.props.stores,value:b.distanceKm})))})),Object(a.h)("td",{class:"text-right pt-3 pb-3 position-relative border-right",style:"font-size: 0.8em;"},Object(a.h)(l.a,{stores:e.props.stores,value:p}),O>0&&Object(a.h)("span",{class:"position-absolute",style:"bottom: 0; left: 0px; font-size: 0.85em; color: "+(b?"#393DB1":"#2BAAA9")+";"},Object(a.h)(l.a,{stores:e.props.stores,value:O}))),Object(a.h)("td",{class:"text-right pt-3 pb-3 text-muted border-right",style:"font-size: 0.8em;",onClick:e.editWeek,"data-week":s.week,"data-year":L,"data-distance":c.distance},c.distance>0&&Object(a.h)(t,null,Object(a.h)("div",{class:"rounded-pill w-100 px-1 text-white text-center",style:"background-color: "+h.a.getPlanColor(c,f)+";"},Object(a.h)(l.a,{stores:e.props.stores,value:c.distance}))))),!o&&"no"===m&&j&&v&&Object(a.h)("tr",null,Object(a.h)("td",{colspan:"10",class:"pb-3"},Object(a.h)("h5",null,Object(a.h)("span",{class:"font-weight-lighter"},"Uke ",s.week," ",L,":"),"Tips fra Femundløpet"),j.totalDistance>0&&Object(a.h)("div",null,Object(a.h)("span",{class:"text-muted"},Object(a.h)("i",{class:"fas fa-road"})," Distanse"),": ",j.totalDistance," km"),j.distance>0&&Object(a.h)("div",null,Object(a.h)("span",{class:"text-muted"},Object(a.h)("i",{class:"fas fa-road"})," Distanse pr økt"),": ",j.distance),j.time&&Object(a.h)("div",null,Object(a.h)("span",{class:"text-muted"},Object(a.h)("i",{class:"fas fa-clock"})," Tid pr økt"),": ",j.time),j.totalWorkouts>0&&Object(a.h)("div",null,Object(a.h)("span",{class:"text-muted"},Object(a.h)("i",{class:"fas fa-list-ol"})," Antall økter"),": ",j.totalWorkouts),j.avgSpeed&&Object(a.h)("div",null,Object(a.h)("span",{class:"text-muted"},Object(a.h)("i",{class:"fas fa-tachometer-alt"})," Gjennomsnittsfart"),": ",j.avgSpeed),j.comments&&Object(a.h)("div",null,j.comments.map((function(t){return Object(a.h)("p",null,t)}))))))}))),Object(a.h)("tfoot",null,Object(a.h)("tr",null,Object(a.h)("td",{colspan:"8",class:"text-right pb-3"},Object(a.h)(c.c,{id:"workout.plan.totalkm"},"Totalt km")),Object(a.h)("td",{class:"text-right position-relative pb-3"},Object(a.h)(l.a,{stores:this.props.stores,value:tt}),ot>0&&Object(a.h)("span",{class:"position-absolute",style:"bottom: 0; left: 0px; font-size: 0.65em; color: "+(st?"#393DB1":"#2BAAA9")+";"},Object(a.h)(l.a,{stores:this.props.stores,value:ot}))),Object(a.h)("td",{class:"text-right text-muted"},Object(a.h)(l.a,{stores:this.props.stores,value:et}))),!o&&"no"===m&&it&&ct&&Object(a.h)("tr",null,Object(a.h)("td",{colspan:"10",class:"pb-3"},Object(a.h)("h5",null,Object(a.h)("span",{class:"font-weight-lighter"},j[M-1]," ",L,":")," Tips fra Femundløpet"),it.totalDistance>0&&Object(a.h)("div",null,Object(a.h)("span",{class:"text-muted"},Object(a.h)("i",{class:"fas fa-road"})," Distanse"),": ",it.totalDistance," km"),it.distance>0&&Object(a.h)("div",null,Object(a.h)("span",{class:"text-muted"},Object(a.h)("i",{class:"fas fa-road"})," Distanse pr økt"),": ",it.distance),it.time&&Object(a.h)("div",null,Object(a.h)("span",{class:"text-muted"},Object(a.h)("i",{class:"fas fa-clock"})," Tid pr økt"),": ",it.time),it.totalWorkouts>0&&Object(a.h)("div",null,Object(a.h)("span",{class:"text-muted"},Object(a.h)("i",{class:"fas fa-list-ol"})," Antall økter"),": ",it.totalWorkouts),it.avgSpeed&&Object(a.h)("div",null,Object(a.h)("span",{class:"text-muted"},Object(a.h)("i",{class:"fas fa-tachometer-alt"})," Gjennomsnittsfart"),": ",it.avgSpeed),it.comments&&Object(a.h)("div",null,it.comments.map((function(t){return Object(a.h)("p",null,t)}))))))))))},o}(a.Component))||s;e.a=d}).call(this,o("hosL").Fragment)},azdc:function(t,e,o){"use strict";(function(t){var s,a=o("hosL"),r=o("Utv1"),n=o("/eY4"),i=o("OhSV"),c=(o("nHdA"),o("irB3")),l=(o("UwwE"),o("8Lgr")),h=(o("QkTp"),o("ZOvn")),u=Object(i.d)((function(){return{week:Object(a.h)(i.c,{id:"workout.graph.week"}),distance:Object(a.h)(i.c,{id:"workout.graph.distance"}),ascend:Object(a.h)(i.c,{id:"workout.graph.ascend"}),plan:Object(a.h)(i.c,{id:"workout.graph.plan"})}}))(s=Object(n.a)(s=function(e){function o(){return e.apply(this,arguments)||this}var s,n;return n=e,(s=o).prototype=Object.create(n.prototype),s.prototype.constructor=s,s.__proto__=n,o.prototype.render=function(){for(var e=this,o=this.props.stores.userStore,s=(new Date).getMonth()+1,n=(new Date).getFullYear(),u=this.props,d=u.year,b=void 0===d?n:d,p=u.month,m=u.showHeader,f=void 0===m||m,O=parseInt((void 0===p?s:p)<8?b-1:b,10),j=o.user.language,v=h.a.getMonths(void 0===j?"en":j),g=r.a.monthRange(O+"-08-01",O+1+"-07-31"),w=r.a.monthRange(O-1+"-08-01",O+"-07-31"),y=r.a.weekRange(O+"-08-01",O+1+"-07-31").map((function(t){return t.week})),k=Math.floor(y.length/(y.length%6)),x=[],S=0,D=y.length;S<D;S+=k)x.push(y[S]);return Object(a.h)(t,null,f&&Object(a.h)("h5",null,Object(a.h)(i.c,{id:"workout.graph.title"},"Treningsstatistikk")," ",O," - ",O+1),Object(a.h)("div",{class:"w-100 mt-3 mb-4"},Object(a.h)("div",{class:"table-responsive-lg"},Object(a.h)("table",{class:"table table-sm table-striped font-weigth-lighter border-bottom"},Object(a.h)("thead",null,Object(a.h)("tr",null,Object(a.h)("th",{class:"text-center"},Object(a.h)(i.c,{id:"workout.graph.season"},"Sesong")),g.map((function(t){return Object(a.h)("th",{class:"text-center"},Object(a.h)("a",{href:"/workouts/month/"+t.month+"/"+t.year},v[t.month-1]))})))),Object(a.h)("tbody",null,Object(a.h)("tr",null,Object(a.h)("th",{scope:"row",style:"padding: .15rem;"},Object(a.h)("nobr",null,O-1," - ",O)),w.map((function(s){return Object(a.h)(t,null,Object(a.h)("td",{class:"text-right px-3"},Object(a.h)("nobr",null,Object(a.h)(l.a,{stores:e.props.stores,value:o.findWorkoutSummaryMonth(s.year,s.month),smallUnit:!0})),Object(a.h)("br",null),Object(a.h)("nobr",null,Object(a.h)(c.a,{stores:e.props.stores,value:o.findWorkoutSummaryMonth(s.year,s.month,"elevation"),smallUnit:!0})),Object(a.h)("br",null)))}))),Object(a.h)("tr",null,Object(a.h)("th",{scope:"row",style:"padding: .15rem;"},Object(a.h)("nobr",null,O," - ",O+1)),g.map((function(s){return Object(a.h)(t,null,Object(a.h)("td",{class:"text-right px-3"},Object(a.h)("nobr",null,Object(a.h)(l.a,{stores:e.props.stores,value:o.findWorkoutSummaryMonth(s.year,s.month),smallUnit:!0})),Object(a.h)("br",null),Object(a.h)("nobr",null,Object(a.h)(c.a,{stores:e.props.stores,value:o.findWorkoutSummaryMonth(s.year,s.month,"elevation"),smallUnit:!0})),Object(a.h)("br",null)))}))))))))},o}(a.Component))||s)||s;e.a=u}).call(this,o("hosL").Fragment)},bUJL:function(t,e,o){"use strict";(function(t){var s,a=o("hosL"),r=o("Utv1"),n=o("/eY4"),i=o("OhSV"),c=o("nHdA"),l=o("irB3"),h=(o("UwwE"),o("8Lgr")),u=(o("QkTp"),Object(n.a)(s=function(e){function o(){for(var t,o=arguments.length,s=new Array(o),a=0;a<o;a++)s[a]=arguments[a];return(t=e.call.apply(e,[this].concat(s))||this).toggleDate=function(e){e.stopPropagation(),e.preventDefault(),t.setState({showDate:!t.state.showDate})},t.ignoreStravaWorkout=function(e){return new Promise((function(o,s){return e.stopPropagation(),Promise.resolve(t.props.stores.stravaActivityStore.ignoreWorkout(e.target.parentElement.dataset.id||e.target.dataset.id)).then((function(){try{return t.loadStravaActivities(),o()}catch(t){return s(t)}}),s)}))},t.importStravaWorkout=function(e){return new Promise((function(o,s){var a;return e.stopPropagation(),a=t.props.stores,Promise.resolve(a.stravaActivityStore.importWorkout(e.target.parentElement.dataset.id||e.target.dataset.id,a.workoutStore.currentTeam)).then((function(){try{return t.loadStravaActivities(),t.loadWorkouts(),o()}catch(t){return s(t)}}),s)}))},t.loadWorkouts=function(){return new Promise((function(e,o){var s;return s=t.props.stores.workoutStore,Promise.resolve(s.load({query:{team:s.currentTeam}})).then((function(){try{return e()}catch(t){return o(t)}}),o)}))},t.toggleDetail=function(){var e=t.state.showDetail;t.setState({showDetail:!(void 0!==e&&e)})},t}var s,n;n=e,(s=o).prototype=Object.create(n.prototype),s.prototype.constructor=s,s.__proto__=n;var u=o.prototype;return u.loadStravaActivities=function(){return new Promise(function(t){return this.props.stores.stravaActivityStore.load({query:{hideImported:1}}),t()}.bind(this))},u.componentDidMount=function(){this.loadStravaActivities()},u.render=function(){var e=this,o=this.state,s=o.showDate,n=o.showDetail,u=void 0!==n&&n,d=this.props,b=d.activities,p=d.showDate,m=this.props.stores,f=m.userStore,O=f.findTeam(m.workoutStore.currentTeam||f.team.id);return u?Object(a.h)(t,null,Object(a.h)("div",{class:"col-12 mb-3"},Object(a.h)("div",{class:"row"},b&&b.length>0&&Object(a.h)("div",{class:"col-12 border-top border-bottom pt-3 pb-3 my-2 bg-light"},Object(a.h)("button",{type:"button",class:"float-right btn btn-sm btn-link",onClick:this.toggleDetail},Object(a.h)("i",{class:"fas fa-caret-up"})," ",Object(a.h)(i.c,{id:"strava.hide-list"},"Hide list")),Object(a.h)("h5",null,Object(a.h)(i.c,{id:"workout.index.strava-workouts"},"Strava workouts / not imported")," ",b.length),b&&b.map((function(o){var n=o.summary;r.a.parseInputDate((void 0===n?{}:n).startTimeInSeconds);return Object(a.h)(t,null,Object(a.h)("div",{class:"col-12 d-flex mb-4 position-relative"},Object(a.h)("div",{class:"text-center border rounded-circle imageRounded",style:'background-image: url("./assets/strava-icon.png"); border-width: 3px !important;'}," "),Object(a.h)("div",{class:"flex-grow-1 pl-3",style:"line-height: 1.2em;"},Object(a.h)("h5",{class:"my-0 mb-1",style:"line-height: 1.0em;"},o.name),o.type,Object(a.h)("br",null),Object(a.h)("small",{class:"text-muted"},o.start_date&&Object(a.h)("small",{onClick:e.toggleDate},p||s?r.a.formatDate(o.start_date,{locale:"no-NB"}):r.a.formatDistance(o.start_date,new Date,{locale:"no-NB"})),Object(a.h)("span",{class:"text-muted"},Object(a.h)("i",{class:"fas fa-road ml-2"})," ",Object(a.h)(h.a,{stores:e.props.stores,value:o.distance/1e3}),Object(a.h)("i",{class:"fas fa-mountain ml-2"})," ",Object(a.h)(l.a,{stores:e.props.stores,value:o.total_elevation_gain}),Object(a.h)("i",{class:"fas fa-tachometer-alt ml-2"})," ",Object(a.h)(c.a,{stores:e.props.stores,value:3.6*o.average_speed}),Object(a.h)("i",{class:"fas fa-stopwatch ml-2"})," ",r.a.secToHms(o.elapsed_time))),Object(a.h)("br",null),Object(a.h)("button",{class:"btn btn-sm btn-block btn-primary",onClick:e.importStravaWorkout,"data-id":o.id},Object(a.h)("i",{class:"fas fa-file-import"})," ",Object(a.h)(i.c,{id:"strava.import"},"Import workout")," ",Object(a.h)("i",{class:"fas fa-arrow-right"})," ",O),Object(a.h)("button",{class:"btn btn-sm btn-link",onClick:e.ignoreStravaWorkout,"data-id":o.id},Object(a.h)("i",{class:"fas fa-trash-alt"})," ",Object(a.h)(i.c,{id:"strava.ignore"},"Ignore workout")))))})),Object(a.h)("button",{type:"button",class:"btn btn-block btn-primary mt-3",onClick:this.toggleDetail},Object(a.h)("i",{class:"fas fa-caret-up"})," ",Object(a.h)(i.c,{id:"strava.hide-list"},"Hide list")))))):b&&b.length>0?Object(a.h)(t,null,Object(a.h)("div",{class:"col-12 mb-3"},Object(a.h)("button",{type:"button",class:"btn btn-block btn-outline-info",onClick:this.toggleDetail},Object(a.h)("div",{class:"float-right ml-2 text-center border rounded-circle imageRounded imageRoundedIcon",style:"background-image: url('./assets/strava-icon.png');"}),Object(a.h)(i.c,{id:"workout.index.strava-workouts"},"Strava workouts / not imported")," ",b.length))):Object(a.h)(t,null)},o}(a.Component))||s);e.a=u}).call(this,o("hosL").Fragment)},pJjI:function(t,e,o){"use strict";(function(t){var s,a=o("hosL"),r=o("Utv1"),n=o("/eY4"),i=o("OhSV"),c=(o("/DnB"),Object(n.a)(s=function(e){function o(){for(var t,o=arguments.length,s=new Array(o),a=0;a<o;a++)s[a]=arguments[a];return(t=e.call.apply(e,[this].concat(s))||this).toggleTeam=function(e){var o=t.props,s=o.callback,a=o.unsetTeamIfSelected,n=t.props.stores,i=n.dogStore,c=n.workoutStore;(void 0===a||a)&&e===i.currentTeam?(i.setCurrentTeam(void 0),c.setCurrentTeam(void 0)):(i.setCurrentTeam(e),c.setCurrentTeam(e)),r.a.isDefined(s)&&s()},t.showAllTeams=function(){var e=t.props.callback,o=t.props.stores,s=o.workoutStore;o.dogStore.setCurrentTeam(void 0),s.setCurrentTeam(void 0),r.a.isDefined(e)&&e()},t}var s,n;return n=e,(s=o).prototype=Object.create(n.prototype),s.prototype.constructor=s,s.__proto__=n,o.prototype.render=function(){var e=this,o=this.props.stores,s=o.userStore.teams,r=o.dogStore.currentTeam,n=this.props,c=n.highlight,l=n.showAll,h=void 0===l||l;return Object(a.h)("div",{class:"row mt-2"},Object(a.h)("div",{class:"w-100 overflow-hidden"},Object(a.h)("div",{class:"d-flex flex-row flex-nowrap pb-2 px-1 no-scrollbar",style:"overflow: auto; scroll-snap-type: x mandatory;"},s&&s.map((function(o,n){var i;return 1===s.length?i="rounded-pill-both":0===n?i="rounded-pill-left":n+1===s.length&&(i="rounded-pill-right"),Object(a.h)("div",{class:"col mb-0 px-0 clearfix",key:o.id},Object(a.h)("button",{class:"btn btn-sm btn-block \n\t\t\t\t\t\t\t\t\t\t\trounded-none "+i+"\n\t\t\t\t\t\t\t\t\t\t\t"+(r===o.id?"btn-success":"btn-outline-success")+"\n\t\t\t\t\t\t\t\t\t\t\ttext-nowrap clearfix",style:"text-overflow: ellipsis; overflow: hidden;",onClick:function(){return e.toggleTeam(o.id)}},Object(a.h)("i",{class:"fas fa-users"})," ",o.name,c&&c.indexOf(o.id)>-1&&Object(a.h)(t,null,r===o.id?Object(a.h)(t,null,Object(a.h)("i",{class:"fas fa-check float-right"})):Object(a.h)(t,null,Object(a.h)("div",{class:"spinner-grow text-warning float-right",role:"status"},Object(a.h)("span",{class:"sr-only"},"Loading...")),Object(a.h)("i",{class:"far fa-hand-point-left float-right",style:"font-size: 2.0em;"})))))}))),h&&Object(a.h)("div",{class:"row"},Object(a.h)("div",{class:"col-12 mb-1 px-1 d-flex justify-content-center"},Object(a.h)("button",{class:"btn btn-sm rounded-lg btn-link text-nowrap clearfix",style:"text-overflow: ellipsis; overflow: hidden;",onClick:this.showAllTeams},Object(a.h)("i",{class:"fas fa-users"})," ",Object(a.h)(i.c,{id:"teams.show-all"},"Show all"))))))},o}(a.Component))||s);e.a=c}).call(this,o("hosL").Fragment)},yHBq:function(t,e,o){"use strict";(function(t){function s(){return(s=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var o=arguments[e];for(var s in o)Object.prototype.hasOwnProperty.call(o,s)&&(t[s]=o[s])}return t}).apply(this,arguments)}function a(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}var r,n,i=o("hosL"),c=o("/eY4"),l=o("Utv1"),h=Object(c.a)(r=function(t){function e(e){var o;return(o=t.call(this,e)||this).state={},o.containerRef=null,o}a(e,t);var o=e.prototype;return o.componentWillUnmount=function(){var t=this.props.removeIntersectionObserver;t&&t(this.containerRef)},o.componentDidMount=function(){var t=this.props.addIntersectionObserver;t&&t(this.containerRef)},o.render=function(){var t=this,e=this.props,o=e.wrapperClassNames,a=void 0===o?"":o,r=e.contentClassNames,n=void 0===r?"":r,c=e.renderContent,l=e.obj,h=void 0===l?{}:l,u=e.idx,d=e.dataFields,b=e.dataValues,p=e.sessionid,m={};return p&&(m.sessionid=p),d.forEach((function(t){return m["data-"+t]=encodeURI(b[t]||h[t])})),Object(i.h)("div",s({class:""+a,ref:function(e){return t.containerRef=e},"data-idx":u},m),Object(i.h)("div",{class:""+n,style:"display: block;"},c({obj:h,idx:u})))},e}(i.Component))||r,u=Object(c.a)(n=function(e){function o(t){var o;return(o=e.call(this,t)||this).deleteIntersectionObserver=function(){o.intersectionObserver=null},o.handleIntersection=function(t){var e=o.props.handleIntersection;"function"==typeof e&&e(t),t.forEach((function(t){var e=t.isIntersecting,o=t.target.dataset.height,s=void 0===o?0:o,a=Math.max(t.target.childNodes[0].offsetHeight,t.target.offsetHeight,t.target.scrollHeight);e?(t.target.childNodes[0].style.display="block",t.target.style.minHeight=(a>s?a:s)+"px"):t.target.style.minHeight&&(t.target.style.minHeight=(a>s?a:s)+"px",t.target.childNodes[0].style.display="none")}))},o.setupIntersectionObserver=function(){if(!("IntersectionObserver"in window)||!("IntersectionObserverEntry"in window)||!("intersectionRatio"in window.IntersectionObserverEntry.prototype))return!1;o.intersectionObserver=new IntersectionObserver(o.handleIntersection,{root:null,rootMargin:"100px",threshold:.1})},o.addIntersectionObserver=function(t){o.intersectionObserver&&t&&o.intersectionObserver.observe(t)},o.removeIntersectionObserver=function(t){o.intersectionObserver&&t&&o.intersectionObserver.unobserve(t)},o.state={},o}a(o,e);var s=o.prototype;return s.componentWillMount=function(){this.setupIntersectionObserver()},s.componentWillUnmount=function(){this.deleteIntersectionObserver()},s.render=function(){var e=this,o=this.props,s=o.data,a=void 0===s?[]:s,r=o.wrapperClassNames,n=void 0===r?"row pb-4 bg-light":r,c=o.contentClassNames,u=void 0===c?"col-12 col-sm-8 col-lg-6 offset-sm-2 offset-lg-3 mb-0 position-relative rounded rounded-lg py-3 shadow-sm":c,d=o.renderContent,b=void 0===d?function(){return Object(i.h)(t,null,"Missing render function!")}:d,p=o.dataFields,m=void 0===p?[]:p,f=o.dataValues,O=void 0===f?{}:f;return Object(i.h)("div",{class:"w-100"},a&&a.filter((function(t){return l.a.isObject(t)})).map((function(o,s){var a=o.hasOwnProperty("wrapperClassNames")?o.wrapperClassNames:n,r=o.hasOwnProperty("contentClassNames")?o.contentClassNames:u;return Object(i.h)(t,null,Object(i.h)(h,{key:"fastline-"+s+"-"+o.id,obj:o,idx:s,addIntersectionObserver:e.addIntersectionObserver,removeIntersectionObserver:e.removeIntersectionObserver,wrapperClassNames:a,contentClassNames:r,renderContent:b,dataFields:m,dataValues:O}))})))},o}(i.Component))||n;e.a=u}).call(this,o("hosL").Fragment)}}]);
//# sourceMappingURL=route-workouts.chunk.a4215.js.map