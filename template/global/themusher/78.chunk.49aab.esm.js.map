{"version":3,"sources":["webpack:///./routes/teams/public.js","webpack:///./components/header/subnavigation.js","webpack:///./components/dog/simplePublic.js","webpack:///./components/user/invite.js","webpack:///./components/team/public.js","webpack:///./components/team/publicLine.js","webpack:///./components/team/connect-confirm.js"],"names":["MARGIN_TOP","mu","marginTop","MARGIN_BOTTOM","marginTopBack","marginBottom","initialState","requestSent","submenu","TeamsDetail","observer","Component","constructor","props","super","back","history","this","stores","goBack","chooseSubmenu","e","setState","target","parentElement","dataset","menu","state","updateTimer","loadPublicTeams","teamStore","loadPublic","componentDidMount","loadAll","componentWillReceiveProps","nextProps","dog","render","userStore","user","language","publicTeamsToFollow","waitingForApproval","filter","followRequests","findIndex","f","id","following","followers","indexOf","notFollowing","members","t","class","style","title","backtext","data-menu","onClick","util","isArray","length","forceShow","map","team","SUB_MENU_MARGIN_TOP","subMenuMarginTop","SubNavigation","appState","previousPath","route","darkmode","Dog","dogs","showTeam","showInfo","showName","showPosition","showAge","className","size","onDogClick","dogPosition","findDogposition","position","hasBirthday","birth","Math","ceil","daysUntilNextBirthday","containerWidth","imageClasses","fontSize","onTouchstart","stopPropagation","onTouchend","onTouchmove","icon","name","image","s3SmallLink","ucfirst","href","uuidv4","shortname","age","deceased","gender","findTeam","weight","format","bodyScore","Invite","inviteKennel","async","friendEmail","email","response","inviteSent","inviteNew","hideInvite","updateSetting","settings","type","for","placeholder","onInput","linkState","Team","requestFollowTeam","teamId","parseInt","followRequest","unFollowTeam","unollowTeam","unfollowed","getButton","text","skipHome","simple","classNames","isYourTeam","isFollowing","isBlocked","blockedFollowers","hasRequestedFollow","disabled","data-team","public","buttonOnly","teamAmbition","findTeamAmbition","ambition","ambitions","teamType","findTeamType","place","country","confirmed","deleted","TeamLine","confirmRequest","callback","closest","confirmFollowRequest","deleteRequest","deleteFollowRequest","getUnblockButton","userId","myTeamId","isConfirmed","data-user","showBlockButton","storyStore","findPublicUser","username","images","displayNameShort","displayName","isDeleted","s3MediumLink","Teams","follow","followRequestUser","load","query","addData","loadTeams","teams","hasFollowRequests","reqUser","publicTeam","find","data-follow"],"mappings":"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","file":"78.chunk.49aab.esm.js","sourcesContent":["import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport { route } from 'preact-router';\nimport { Text, Localizer } from 'preact-i18n';\nimport Markdown from 'preact-markdown';\n\nimport PubSub, { topics } from '../../lib/pubsub';\nimport mu from '../../lib/musher-util';\nconst MARGIN_TOP = mu.marginTop(true);\nconst MARGIN_TOP_BACK = mu.marginTopBack(false);\nconst MARGIN_BOTTOM = mu.marginBottom();\n\nimport DogSimplePublic from '../../components/dog/simplePublic';\nimport PublicTeam from '../../components/team/public';\nimport TeamConnectConfirm from '../../components/team/connect-confirm';\nimport TeamLine from '../../components/team/publicLine';\nimport SubNavigation from '../../components/header/subnavigation';\nimport UserInvite from '../../components/user/invite';\n\nconst initialState = {\n\trequestSent: {},\n    submenu: 'notfollowing',\n};\n\n@observer\nclass TeamsDetail extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            ...initialState,\n        };\n        this.updateTimer = {};\n    }\n\n    async loadAll(props = this.props) {\n        await this.loadPublicTeams(props);\n    }\n\n    async loadPublicTeams(props = this.props) {\n\t\tconst { teamStore } = props.stores;\n        const { teamid } = props;\n        await teamStore.loadPublic({});\n    }\n\n    back = () => {\n        const { history } = this.props.stores;\n        history.goBack();\n    }\n\n    chooseSubmenu = (e) => {\n\t\tconst submenu = e.target.parentElement.dataset.menu || e.target.dataset.menu;\n\t\tthis.setState({ submenu });\n\t}\n\n\tcomponentDidMount() {\n        this.loadAll();\n    }\n\n    componentWillReceiveProps(nextProps) {\n        // console.log('componentWillReceiveProps', nextProps);\n        if (nextProps.dog !== this.props.dog) {\n            this.loadAll(nextProps);\n        }\n    }\n\n\trender() {\n        const { submenu } = this.state;\n\t\tconst { teamStore, userStore, storyStore } = this.props.stores;\n        const { user } = userStore;\n        const { language = 'en' } = user;\n\t\tconst { publicTeamsToFollow } = teamStore;\n\n        const waitingForApproval = publicTeamsToFollow.filter(e => e.followRequests && e.followRequests.findIndex(f => f.id === user.id) > -1);\n        const following = publicTeamsToFollow.filter(e => e.followers && e.followers.indexOf(user.id) > -1);\n        const notFollowing = publicTeamsToFollow.filter(e => {\n            const isYourTeam = e.members && e.members.findIndex(t => t.id === user.id) > -1;\n            if (isYourTeam) {\n                return false;\n            }\n            if (waitingForApproval.findIndex(t => t.id === e.id) > -1) {\n                return false;\n            }\n            if (following.findIndex(t => t.id === e.id) > -1) {\n                return false;\n            }\n            return true;            \n        });            \n\t\treturn (<>\n\t\t\t<div class='container-fluid' style={`margin-bottom: ${MARGIN_BOTTOM}; margin-top: ${MARGIN_TOP};`}>\n                <Localizer>\n                    <SubNavigation stores={this.props.stores}\n                        title={<Text id='home.find-teams'>Find teams to follow</Text>}\n                        backtext={<Text id='home.back'>Back</Text>}\n                    />\n                </Localizer>\n    \n                <div class='row mt-4'>\n                    <div class={`col-12`}>\n                        <TeamConnectConfirm stores={this.props.stores} />\n                    </div>\n                </div>\n\n                <div class='row'>\n                    <div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 my-3'>\n\t\t\t\t\t\t<div class='row'>\n\t\t\t\t\t\t\t<div class='col px-1 pt-2'>\n                                <button\n                                    class={`btn btn-block ${submenu === 'notfollowing' ? 'btn-primary' : 'btn-outline-primary'} text-nowrap`}\n                                    style='text-overflow: ellipsis; overflow: hidden;'\n                                    data-menu='notfollowing'\n                                    onClick={this.chooseSubmenu}\n                                ><i class='fas fa-tachometer-alt' /> <Text id='teams.notfollowing'>Not following</Text></button>\n                            </div>\n\t\t\t\t\t\t\t<div class='col px-1 pt-2'>\n                                <button\n                                    class={`btn btn-block ${submenu === 'waiting' ? 'btn-primary' : 'btn-outline-primary'} text-nowrap`}\n                                    style='text-overflow: ellipsis; overflow: hidden;'\n                                    data-menu='waiting'\n                                    onClick={this.chooseSubmenu}\n                                ><i class='fas fa-chalkboard-teacher' /> <Text id='teams.waiting-approval'>Waiting for approval</Text></button>\n                            </div>\n\t\t\t\t\t\t\t<div class='col px-1 pt-2'>\n                                <button\n                                    class={`btn btn-block ${submenu === 'following' ? 'btn-primary' : 'btn-outline-primary'} text-nowrap`}\n                                    style='text-overflow: ellipsis; overflow: hidden;'\n                                    data-menu='following'\n                                    onClick={this.chooseSubmenu}\n                                ><i class='fas fa-chalkboard-teacher' /> <Text id='teams.following'>Following</Text></button>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n\n                <div class='row mt-4'>\n                    <div class={`col-12 col-sm-8 col-lg-6 offset-sm-2 offset-lg-3 mb-0 position-relative`}>\n                        <div class='row'>\n                            {submenu === 'notfollowing' && <>\n                                {(!util.isArray(notFollowing) || notFollowing.length === 0) && <>\n                                    <div class='col-12 text-center text-muted mb-5'>\n                                        <div class='display-1'>\n                                            <i class='fas fa-search' />\n                                        </div>\n                                        <h3 class='font-weight-lighter'>\n                                            <Text id='teams.no-more-teams-to-follow'>No more teams to follow.</Text>\n                                        </h3>\n                                    </div>\n                                    <UserInvite stores={this.props.stores} forceShow={true} />\n                                </>}\n                                {util.isArray(notFollowing) && notFollowing.map(team => <TeamLine stores={this.props.stores} team={team} />)}\n                            </>}\n                            {submenu === 'waiting' && <>\n                                {(!util.isArray(waitingForApproval) || waitingForApproval.length === 0) && <>\n                                    <div class='col-12 text-center text-muted mb-5'>\n                                        <div class='display-1'>\n                                            <i class='fas fa-check' />\n                                        </div>\n                                        <h3 class='font-weight-lighter'>\n                                            <Text id='teams.no-pending-follow-requests'>No pending follow requests.</Text>\n                                        </h3>\n                                    </div>\n                                </>}\n                                <UserInvite stores={this.props.stores} forceShow={true} />\n                                {util.isArray(waitingForApproval) && waitingForApproval.map(team => <TeamLine stores={this.props.stores} team={team} />)}\n                            </>}\n                            {submenu === 'following' && <>\n                                {(!util.isArray(following) || following.length === 0) && <>\n                                    <div class='col-12 text-center text-muted mb-5'>\n                                        <div class='display-1'>\n                                            <i class='fas fa-check' />\n                                        </div>\n                                        <h3 class='font-weight-lighter'>\n                                            <Text id='teams.not-following-any-teams'>You are not following any teams.</Text>\n                                        </h3>\n                                    </div>\n                                </>}\n                                <UserInvite stores={this.props.stores} forceShow={true} />\n                                {util.isArray(following) && following.map(team => <TeamLine stores={this.props.stores} team={team} />)}\n                            </>}\n                        </div>\n                    </div>\n                </div>\n\n                <div class='row mt-4'>\n                    <div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3'>\n                        <div class='text-center text-muted'>\n                            <div class='display-1'>\n                                <i class='fas fa-ellipsis-h' />\n                            </div>\n                            <div style='line-height: 0.9em;'>\n                                <small>\n                                    <Text id='teams.something-missing'>Er det noe du savner på denne siden? Send oss en melding på Facebook.</Text>\n                                </small>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n\n            </div>\n\n\n\t\t</>);\n\t}\n}\n\nexport default TeamsDetail;\n","import { h, Component } from 'preact';\nimport { Link } from 'preact-router/match';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport linkState from 'linkstate';\nimport { route } from 'preact-router';\nimport { Text, Localizer } from 'preact-i18n';\n\nimport mu from '../../lib/musher-util';\n\nconst SUB_MENU_MARGIN_TOP = mu.subMenuMarginTop();\n\nconst initialState = {\n};\n\n@observer\nclass SubNavigation extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            ...initialState,\n        };\n    }\n\n    back = () => {\n        const { appState } = this.props.stores;\n        const { previousPath = '/' } = appState;\n        route(previousPath);\n    }\n\n    render() {\n        const { title, backtext } = this.props;\n        const { appState } = this.props.stores;\n        const { darkmode } = appState;\n\t\treturn (\n            <div class='row fixed-top border-bottom' style={`margin-top: ${SUB_MENU_MARGIN_TOP}; background-color: ${darkmode ? '#191d21' : '#f8f9fa'};`}>\n                <div class={`col text-center subtopmenu position-relative`}>\n                    <div class={`text-left subtopmenu position-absolute`} style='top: 0px; left: 20px; line-height: 1.8em;'>\n                        <button\n                            class='btn btn-link text-secondary p-0'\n                            onClick={this.back}\n                        >\n                            <nobr>\n                                <i class='fas fa-chevron-left font-weight-bold' /> {backtext ? <>\n                                    {backtext}\n                                </> : <>\n                                    <Text id='home.home'>Home</Text>\n                                </>}\n                            </nobr>\n                        </button>\n                    </div>\n                    <nobr>\n                        <strong>\n                            {title}\n                        </strong>\n                    </nobr>\n                </div>\n            </div>\n\t\t);\n\t}\n}\n\nexport default SubNavigation;\n","import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\n\nimport mu from '../../lib/musher-util';\n\nconst STOP_STATUSES = [2, 9];\nconst WARN_STATUSES = [4, 8];\n\n\nfunction getFatigueLevel(wo, dog) {\n    if (dog) {\n        if (STOP_STATUSES.indexOf(dog.status) > -1) {\n            return 'danger';\n        } else if (WARN_STATUSES.indexOf(dog.status) > -1) {\n            return 'warning';\n        }\n    }\n    if (wo) {\n        if (wo.distanceKm > 50) {\n            return 'danger';\n        } else if (wo.distanceKm > 30) {\n            return 'warning';\n        }\n    }\n    return 'success';\n}\n\n@observer\nclass Dog extends Component {\n    render() {\n        const { \n            dog = {},\n            dogs = [],\n            showTeam,\n            showInfo,\n            showName = true,\n            showPosition = true,\n            showAge = false,\n            className,\n            size,\n            onDogClick = () => {},\n        } = this.props;\n\t\tconst { userStore } = this.props.stores;\n        const { isAdmin, user } = userStore;\n        const { language = 'en' } = user;\n\n        const dogPosition = userStore.findDogposition({ position: dog.position, language });\n        const hasBirthday = mu.hasBirthday(dog.birth);\n        const daysUntilBirthday = Math.ceil(mu.daysUntilNextBirthday(dog.birth));\n\n        let containerWidth = '92px';\n        let imageClasses = '';\n        let fontSize = '35px';\n        if (size === 'small') {\n            containerWidth = '50px';\n            imageClasses = 'imageRoundedSmall';\n            fontSize = '20px';\n        } else if (size === 'medium') {\n            containerWidth = '60px';\n            imageClasses = 'imageRoundedMedium';\n            fontSize = '25px';\n        }\n\n        return (\n            <div class={`mb-2 position-relative ${className} clearfix`} style={`width: ${containerWidth}`}\n                onTouchstart={(e) => { e.stopPropagation(); }}\n                onTouchend={(e) => { e.stopPropagation(); }}\n                onTouchmove={(e) => { e.stopPropagation(); }}\n            >\n                {/* {JSON.stringify(dog, null, 4)} */}\n                {showPosition && dogPosition && <small class='position-absolute' style='left:0px; top: 50px;'>\n                    <span class={`badge badge-${dogPosition.class || 'primary'} mr-3`}>{dogPosition.icon && <i class={dogPosition.icon} />} {dogPosition.name}</span>\n                </small>}\n                <div\n                    class={`text-center border rounded-circle imageRounded ${imageClasses} mx-auto text-muted pt-2`}\n                    style={`${dog.image ? `background-image: url(\"${dog.image.s3SmallLink}\"); background-size: cover;` : ''} border-width: 2px !important;`}\n                >\n                    {/* {!dog.image && <i class='fas fa-dog mt-3' style='font-size: 40px;' />} */}\n                    {!dog.image && <span class='font-weight-lighter' style={`font-size: ${fontSize};`}>{util.ucfirst(dog.name, true)}</span>}\n                </div>\n                <div class='text-center text-overflow' style='line-height: 1.0em;'>\n                    <small>\n                        {/* <span class='float-right'>\n                            {dog.birth && <span class='mr-2'>{util.age(dog.birth, dog.deceased)}</span>}\n                            {dog.gender === 'female' ? <i class='fas fa-venus' /> : <i class='fas fa-mars' />}\n                        </span> */}\n                        <a href={`/dogs/public/${dog.uuidv4}`} onClick={(e) => onDogClick(e, dog.uuidv4, dogs)} class='stretched-link'>\n                            {showName && <>\n                                <span class='mb-1 font-weight-light'>\n                                    <nobr>\n                                        {dog.shortname || dog.name}\n                                        {hasBirthday && <>\n                                            <i class='fas fa-birthday-cake ml-3' />\n                                        </>}\n                                    </nobr>\n                                </span>\n                            </>}\n                        </a>\n                    </small>\n                </div>\n                <div class='text-center text-overflow' style='line-height: 1.0em;'>\n                    <small>\n                        {dog.birth && showAge && <>\n                            <span class='float-right'>\n                                {/* {daysUntilBirthday < 7 && <>\n                                    <span class='text-muted mr-2'>\n                                        <i class='fas fa-birthday-cake' /> in {daysUntilBirthday} days\n                                    </span>\n                                </>}                                 */}\n                                {dog.birth && <span class='mr-2'>{util.age(dog.birth, dog.deceased)}</span>}\n                                {dog.gender === 'female' ? <i class='fas fa-venus' /> : <i class='fas fa-mars' />}\n                            </span>\n                        </>}\n\n                        {showTeam && <><span class='font-weight-light'>{userStore.findTeam(dog.team)}</span><br /></>}\n\n                        {showInfo && <small class='text-muted'>\n                            {dog.weight && <><i class='fas fa-balance-scale ml-2' /> {util.format(dog.weight, 1)} kg</>}\n                            {dog.bodyScore && <><i class='fas fa-dog ml-2' /> {util.format(dog.bodyScore, 1)}</>}\n                        </small>}\n\n                    </small>\n                </div>\n            </div>\n        );\n    }\n}\n\nexport default Dog;\n","import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport { Text, Localizer } from 'preact-i18n';\nimport linkState from 'linkstate';\n\n@observer\nclass Invite extends Component {\n    inviteKennel = async () => {\n        const { friendEmail: email } = this.state;\n\t\tconst { userStore } = this.props.stores;\n        const response = await userStore.inviteKennel({ email });\n        this.setState({\n            response,\n            inviteSent: true,\n        });\n    }\n\n    inviteNew = () => {\n        this.setState({\n            inviteSent: false,\n        });\n    }\n\n    hideInvite = async () => {\n        const { userStore } = this.props.stores;\n        await userStore.updateSetting({ 'settings.hideInvite': 1 });\n        this.setState({\n            hideInvite: true,\n        });\n    }\n\n    render() {\n        const { inviteSent, hideInvite } = this.state;\n\t\tconst { userStore } = this.props.stores;\n        const { forceShow } = this.props;\n        const { user } = userStore;\n        const { settings = {} } = user;\n        if (!forceShow && settings.hideInvite || hideInvite) {\n            return '';\n        }\n        if (inviteSent) {\n            return (\n                <div class='col-12'>\n                    <Text id='users.invite.thanks'>Takk for at du hjelper oss til å bli flere 😃</Text>\n                    <button type='button' class='btn btn-sm btn-link mb-2' onClick={this.inviteNew}>\n                        <Text id='users.invite.more'>Invitere flere</Text>\n                    </button>\n                </div>\n            );\n        }\n        return (\n            <div class='col-12 pb-4 clearfix'>\n                <h5><Text id='users.invite.title'>Inviter ny kennel til The Musher</Text></h5>\n                <p>\n                    <Text id='users.invite.text'>Jeg håper du vil hjelpe oss til å bli flere. Appen vil bli lansert veldig snart og det er påtide å invitere inn flere brukere.</Text>\n                </p>\n                <div>\n                    <div class='form-row align-items-center'>\n                        <div class='col-auto'>\n                            <label class='sr-only' for='inlineFormInput'><Text id='users.invite.email'>E-post</Text></label>\n                            <Localizer>\n                                <input type='text' class='form-control form-control-sm mb-2' id='inlineFormInput'\n                                    placeholder={<Text id='users.invite.email-placeholder'>E-post til ny kennel</Text>}\n                                    onInput={linkState(this, 'friendEmail')}\n                                />\n                            </Localizer>\n                        </div>\n                        <div class='col-auto'>\n                            <button type='button' class='btn btn-sm btn-primary mb-2' onClick={this.inviteKennel}>\n                                <Text id='users.invite.send'>Send invitasjon</Text>\n                            </button>\n                        </div>\n                    </div>\n                </div>\n                {!forceShow && <button type='button' class='btn btn-sm btn-link mb-2 float-left' onClick={this.hideInvite}>\n                    <i class='fas fa-eye-slash' /> <Text id='users.invite.hide'>Skjul</Text>\n                </button>}\n            </div>\n        );\n    }\n}\n\nexport default Invite;\n","import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport { Text, Localizer } from 'preact-i18n';\n\n@observer\nclass Team extends Component {\n    requestFollowTeam = (e) => {\n        const { teamStore, userStore } = this.props.stores;\n        const { user } = userStore;\n        const teamId = parseInt(e.target.parentElement.dataset.team || e.target.dataset.team, 10);\n        teamStore.followRequest(teamId, user);\n        this.setState({ requestSent: true });\n    }\n\n    unFollowTeam = (e) => {\n        const { teamStore, userStore } = this.props.stores;\n        const { user } = userStore;\n        const teamId = parseInt(e.target.parentElement.dataset.team || e.target.dataset.team, 10);\n        teamStore.unollowTeam(teamId);\n        this.setState({ unfollowed: true });\n    }\n\n    getButton = (text = '') => {\n        const { requestSent } = this.state;\n        const { userStore } = this.props.stores;\n        const { user } = userStore;\n        const { team, skipHome, simple, classNames } = this.props;\n        const isYourTeam = team.members && team.members.indexOf(user.id) > -1;\n        const isFollowing = team.followers && team.followers.indexOf(user.id) > -1;\n        const isBlocked = team.blockedFollowers && team.blockedFollowers.indexOf(user.id) > -1;\n        const hasRequestedFollow = requestSent || team.followRequests && team.followRequests.findIndex(e => e.id === user.id) > -1;\n\n        if (isYourTeam) {\n            if (skipHome) {\n                return '';\n            }\n            return (\n                <i class='fas fa-home' />\n            );\n        }\n        if (isFollowing) {\n            return (<>\n                <button\n                    class={classNames || `btn btn-block btn-outline-secondary float-right`}\n                    onClick={this.unFollowTeam}\n                    disabled='true'\n                    data-team={team.id}\n                >\n                    <i class='fas fa-link mr-2' />\n                    <Text id='teams.connect.is-following'>Følger</Text> {!simple && <>{text}</>}\n                </button>\n                <button\n                    class={classNames || `btn btn-sm btn-block btn-danger float-right`}\n                    onClick={this.unFollowTeam}\n                    data-team={team.id}\n                >\n                    <i class='fas fa-unlink mr-2' />\n                    <Text id='teams.connect.unfollow'>Unfollow</Text>\n                </button>\n            </>);\n        }\n        if (isBlocked) {\n            return '';\n            // return (\n            //     <button\n            //         class={`btn btn-block btn-outline-secondary float-right`}\n            //         disabled='true'\n            //     >\n            //         <i class='fas fa-hand-paper mr-2' />\n            //         <Text id='teams.connect.is-blocked'>Blokkert</Text> {text}\n            //     </button>\n            // );\n        }\n        if (hasRequestedFollow) {\n            return (\n                <button\n                    class={classNames || `btn btn-block btn-outline-secondary float-right`}\n                    disabled='true'\n                >\n                    <i class='fas fa-hourglass-half mr-2' />\n                    <Text id='teams.connect.has-requested'>Venter på godkjenning</Text> {!simple && <>{text}</>}\n                </button>\n            );\n        }\n        if (team.public) {\n            return (\n                <button\n                    class={classNames || `btn btn-block btn-outline-success float-right`}\n                    onClick={this.requestFollowTeam}\n                    data-team={team.id}\n                >\n                    <i class='fas fa-plus mr-2' />\n                    <Text id='teams.connect.follow'>Følg</Text> {!simple && <>{text}</>}\n                </button>\n            );\n        }\n    }\n\n    render() {\n        const { unfollowed } = this.state;\n        const { team, buttonOnly } = this.props;\n        const { userStore } = this.props.stores;\n        const { user } = userStore;\n        const { language = 'en' } = user;\n        const teamAmbition = userStore.findTeamAmbition({ ambition: team.ambitions, language });\n        const teamType = userStore.findTeamType({ type: team.type, language });\n        const image = team.image && team.image.s3SmallLink ? team.image : null;\n\n        if (buttonOnly) {\n            return (<>\n                {this.getButton(`${team.name}`)}\n            </>);\n        }\n\n        return (\n            <div class='w-100 mb-3'>\n                <div class='row'>\n                    <div class='col-12 col-sm-8 col-lg-6 offset-sm-2 offset-lg-3 d-flex mb-0 position-relative border-top pt-3'\n                        style={`${unfollowed ? 'text-decoration: line-through; opacity: 0.3;' : ''}`}\n                    >\n                        {/* {JSON.stringify(team, null, 4)} */}\n                        <a href={`/teams/public/${team.uuidv4}`}>\n                        <div class={`text-center border rounded-circle imageRounded`} style={image ? `background-image: url(\"${image.s3SmallLink}\");  background-size: cover;` : ''}>\n                            {!image && <i class='fas fa-users text-muted mt-3' style='font-size: 40px;' />}\n                        </div>\n                        </a>\n                        <div class='flex-grow-1 pl-3' style='line-height: 1.2em;'>\n                            <h5 class='mb-1' style='line-height: 1.0em;'>\n                                {team.public ? <>\n                                    <a href={`/teams/public/${team.uuidv4}`}>{team.name}</a>\n                                </> : <>\n                                    {team.name}\n                                </>}\n                            </h5>\n                            <div>\n                                {team.place} {team.country}\n                            </div>\n                            <div>\n                                {teamType && <span class='badge badge-pill badge-secondary'>{teamType}</span>}\n                                {teamAmbition && <span class='badge badge-pill badge-secondary ml-2'>{teamAmbition}</span>}\n                            </div>\n                            <small class='text-muted'>\n                                {team && team.dogs && <span class=''><i class='fas fa-dog' /> {team.dogs.length}</span>} \n                                {team && team.followers && <span class='ml-2'><i class='fas fa-user' /> {team.followers.length}</span>}\n                            </small>\n                        </div>\n                        <div>\n                            {this.getButton()}\n                        </div>\n                    </div>\n                </div>\n            </div>\n        );\n    }\n}\n\nexport default Team;\n","import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport { route } from 'preact-router';\nimport { Text, Localizer } from 'preact-i18n';\n\nimport mu from '../../lib/musher-util';\n\nconst initialState = {\n\trequestSent: {},\n    confirmed: {},\n    deleted: {},\n    submenu: 'notfollowing',\n};\n\n@observer\nclass TeamLine extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            ...initialState,\n        };\n        this.updateTimer = {};\n    }\n\n    requestFollowTeam = async (e) => {\n        const { teamStore, userStore } = this.props.stores;\n        const { user } = userStore;\n        const teamId = parseInt(e.target.parentElement.dataset.team || e.target.dataset.team, 10);\n        teamStore.followRequest(teamId, user);\n        const { requestSent } = this.state;\n        requestSent[teamId] = true;\n        this.setState({ requestSent });\n    }\n\n    confirmRequest = async (e) => {\n        const { callback = () => {} } = this.props;\n        const { team, user } = e.target.closest('button').dataset;\n        const { teamStore } = this.props.stores;\n        const { confirmed, deleted } = this.state;\n\t\tconfirmed[`${team}-${user}`] = true;\n        delete deleted[`${team}-${user}`];\n        this.setState({ confirmed, deleted });\n        await teamStore.confirmFollowRequest({\n            team: parseInt(team, 10),\n            user: parseInt(user, 10),\n        });\n        callback();\n    }\n\n    deleteRequest = async (e) => {\n        const { callback = () => {} } = this.props;\n        const { team, user } = e.target.closest('button').dataset;\n        const { teamStore } = this.props.stores;\n        const { deleted, confirmed } = this.state;\n\t\tdeleted[`${team}-${user}`] = true;\n        delete confirmed[`${team}-${user}`];\n        this.setState({ deleted, confirmed });\n        await teamStore.deleteFollowRequest({\n            team: parseInt(team, 10),\n            user: parseInt(user, 10),\n        });\n        callback();\n    }\n\n    unFollowTeam = (e) => {\n        const { teamStore, userStore } = this.props.stores;\n        const { user } = userStore;\n        const teamId = parseInt(e.target.parentElement.dataset.team || e.target.dataset.team, 10);\n        teamStore.unollowTeam(teamId);\n        this.setState({ unfollowed: true });\n    }\n\n    getUnblockButton = (userId, myTeamId) => {\n        const { confirmed } = this.state;\n        const isConfirmed = confirmed[`${myTeamId}-${userId}`];\n        return <>\n            {isConfirmed ? <>\n                <small class='text-success'>\n                    <i class='fas fa-check' /> <Text id='teams.connect.confirmed'>Confirmed</Text>\n                </small>\n            </> : <>\n                <button class='btn btn-sm btn-block btn-success text-overflow mt-1'\n                    onClick={this.confirmRequest}\n                    data-team={myTeamId}\n                    data-user={userId}>\n                    <Text id='teams.connect.confirm'>Confirm</Text>\n                </button>\n            </>}\n        </>;\n    }\n\n    getButton = (team) => {\n        const { requestSent } = this.state;\n        const { userStore } = this.props.stores;\n        const { user } = userStore;\n\n        const isYourTeam = team.members && team.members.indexOf(user.id) > -1;\n        const isFollowing = team.followers && team.followers.indexOf(user.id) > -1;\n        const isBlocked = team.blockedFollowers && team.blockedFollowers.indexOf(user.id) > -1;\n        const hasRequestedFollow = requestSent[team.id] || team.followRequests && team.followRequests.findIndex(e => e.id === user.id) > -1;\n\n        if (isYourTeam) {\n            return (\n                <i class='fas fa-home' />\n            );\n        }\n        if (!team.public) {\n            return (<>\n                <small class='text-muted'>\n                    <Text id='teams.not-public'>Ikke offentlig</Text>\n                </small>\n            </>);\n        }\n        if (isFollowing) {\n            return (<>\n                <button\n                    class={`btn btn-sm btn-block btn-outline-secondary float-right`}\n                    onClick={this.unFollowTeam}\n                    disabled='true'\n                    data-team={team.id}\n                >\n                    <i class='fas fa-link mr-2' />\n                    <Text id='teams.connect.is-following'>Følger</Text>\n                </button>\n                <button\n                    class={`btn btn-sm btn-block btn-outline-danger float-right`}\n                    onClick={this.unFollowTeam}\n                    disabled='true'\n                    data-team={team.id}\n                >\n                    <Text id='teams.connect.unfollow'>Unfollow</Text>\n                </button>\n            </>);\n        }\n        if (isBlocked) {\n            return (<></>);\n            // return (\n            //     <button\n            //         class={`btn btn-sm btn-block btn-outline-secondary float-right`}\n            //         disabled='true'\n            //     >\n            //         <i class='fas fa-hand-paper mr-2' />\n            //         <Text id='teams.connect.is-blocked'>Blokkert</Text>\n            //     </button>\n            // );\n        }\n        if (hasRequestedFollow) {\n            return (\n                <button\n                    class={`btn btn-sm btn-block btn-outline-secondary float-right`}\n                    disabled='true'\n                >\n                    <i class='fas fa-hourglass-half mr-2' />\n                    <Text id='teams.connect.has-requested'>Venter på godkjenning</Text>\n                </button>\n            );\n        }\n        return (\n            <button\n                class={`btn btn-sm btn-block btn-outline-success float-right`}\n                onClick={this.requestFollowTeam}\n                data-team={team.id}\n            >\n                <i class='far fa-hand-point-right mr-2' />\n                <Text id='teams.connect.follow'>Følg</Text>\n            </button>\n        );\n    }\n\n\trender() {\n        const { deleted = {}, unfollowed } = this.state;\n        const { team, isBlocked, myTeamId, showBlockButton } = this.props;\n        const { storyStore } = this.props.stores;\n\n        const user = storyStore.findPublicUser(team.user) || team.user || {};\n        let image;\n        if (team.image && team.image.s3SmallLink) {\n            image = team.image;\n        } else if (team.images && team.images[0] && team.images[0].s3SmallLink) {\n            image = team.images[0];\n        } else if (user.image && user.image.s3SmallLink) {\n            image = user.image;\n        } else if (user.images && user.images[0] && user.images[0].s3SmallLink) {\n            image = user.images[0];\n        }\n        let shortname;\n        let name;\n        let username;\n        if (team && team.name) {\n            shortname = mu.displayNameShort(team);\n            name = mu.displayName(team);\n            username = mu.displayName(user);\n        } else if (user && user.id) {\n            shortname = mu.displayNameShort(user);\n            name = mu.displayName(user);\n        }\n\n        const isDeleted = deleted[`${myTeamId}-${user.id}`];\n\n        return (\n            <div class='col-12 mb-2 pb-2 border-bottom'\n                style={`${unfollowed ? 'text-decoration: line-through; opacity: 0.3;' : ''}`}\n            >\n                <div class='d-flex position-relative'>\n                    <div\n                        class={`text-center border rounded-circle imageRounded imageRoundedMedium`}\n                        style={image ? `background-image: url(\"${image.s3MediumLink}\"); background-size: cover;` : ''}\n                    >\n                        {!image && <div class='text-muted' style='font-size: 20px; padding-top: 3px;'>{shortname}</div>}\n                    </div>\n                    <div class='flex-grow-1 pl-3 text-overflow' style='line-height: 1.2em;'>\n                        <h5 class='mb-0'>\n                            {team.public ? <>\n                                <a href={`/teams/public/${team.uuidv4}`}>{name}</a>\n                            </> : <>\n                                {name}\n                            </>}                                         \n                        </h5>\n                        <div>\n                            {team.place ? `${team.place}, ` : ''} {team.country} &nbsp;\n                        </div>\n                        <div>\n                            <small class='text-muted'>\n                                {team && team.dogs && <span class=''><i class='fas fa-dog' /> {team.dogs.length}</span>} \n                                {team && team.followers && <span class='ml-2'><i class='fas fa-user' /> {team.followers.length}</span>}\n                                {username && <>\n                                    <small class='ml-2 text-muted'>\n                                        {username}\n                                    </small>\n                                </>}\n                                {showBlockButton && <>\n                                    {isDeleted ? <>\n                                        <small class='text-danger ml-3'>\n                                            <i class='fas fa-ban' /> <Text id='teams.connect.deleted'>Deleted</Text>\n                                        </small>\n                                    </> : <>\n                                        <button class='btn btn-sm btn-link text-overflow p-0 text-muted ml-3'\n                                            style='font-size: 0.8em;'\n                                            onClick={this.deleteRequest}\n                                            data-team={myTeamId}\n                                            data-user={user.id}\n                                        >\n                                            <i class='fas fa-ban' /> <Text id='teams.connect.block'>Blokkere</Text>\n                                        </button>\n                                    </>}\n                                </>}\n                            </small>\n                        </div>\n                    </div>\n                    <div>\n                        {isBlocked ? <>\n                            {this.getUnblockButton(user.id, myTeamId)}\n                        </> : <>\n                            {this.getButton(team)}\n                        </>}\n                    </div>\n                </div>\n            </div>\n        );\n    }\n}\n\nexport default TeamLine;\n","import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport { Text, Localizer } from 'preact-i18n';\n\nimport mu from '../../lib/musher-util';\n\nimport PublicTeam from '../../components/team/public';\n\nconst initialState = {\n\tconfirmed: {},\n\tdeleted: {},\n};\n\n@observer\nclass Teams extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            ...initialState,\n        };\n    }\n\n    async loadTeams() {\n        const { teamStore } = this.props.stores;\n        await teamStore.load({ query: {}, addData: ['followRequests'] });\n    }\n\n    confirmRequest = (e) => {\n        const { team, user, follow } = e.target.closest('button').dataset;\n        const { teamStore } = this.props.stores;\n        teamStore.confirmFollowRequest({\n            team: parseInt(team, 10),\n            user: parseInt(user, 10),\n        });\n        const { confirmed } = this.state;\n\t\tconfirmed[`${team}-${user}`] = true;\n        this.setState({ confirmed });\n\n        if (follow) {\n            teamStore.followRequestUser(user);\n        }\n    }\n\n    deleteRequest = (e) => {\n        const { team, user } = e.target.closest('button').dataset;\n        const { teamStore } = this.props.stores;\n        teamStore.deleteFollowRequest({\n            team: parseInt(team, 10),\n            user: parseInt(user, 10),\n        });\n        const { deleted } = this.state;\n\t\tdeleted[`${team}-${user}`] = true;\n        this.setState({ deleted });\n    }\n\n\tcomponentDidMount() {\n\t\tthis.loadTeams();\n\t}\n\n\trender() {\n        const { deleted = {}, confirmed = {} } = this.state;\n\t\tconst { teamStore, appState } = this.props.stores;\n\t\tconst { teams, hasFollowRequests, followRequests = [] } = teamStore;\n        const { darkmode } = appState;\n\t\tif (!hasFollowRequests) {\n\t\t\treturn '';\n\t\t}\n\n\t\treturn (\n            <div class='row pb-1'>\n                <div class={`col-12 col-sm-8 col-lg-6 offset-sm-2 offset-lg-3 mb-0 position-relative rounded rounded-lg py-3 bg-${darkmode ? 'black' : 'white'} shadow-sm`}>\n                    <div class='container-fluid'>\n                        <div class='row'>\n                            <div class='col-12'>\n                                <h5><Text id='teams.connect.teams-follow-requests'>Forespørsel om å følge</Text>:</h5>\n                            </div>\n                        </div>\n\t\t\t\t\t\t<div class='row'>\n                            <div class='d-flex flex-row flex-nowrap' style='overflow: auto;'>\n                                {util.isArray(teams) && teams.map((team) => <>\n                                    {team && util.isArray(team.followRequests) && team.followRequests.map((reqUser) => {\n                                        const image = reqUser.image && reqUser.image.s3SmallLink ? reqUser.image : null;\n                                        const isDeleted = deleted[`${team.id}-${reqUser.id}`];\n                                        const isConfirmed = confirmed[`${team.id}-${reqUser.id}`];\n                                        const publicTeam = followRequests.find(e => e.user.id === reqUser.id);\n                                        return (\n                                            <div class='mr-2 py-2 border rounded-lg' style='width: 150px;'>\n                                                <div class={`text-center border rounded-circle imageRounded imageRoundedSmall mx-auto`} style={image ? `background-image: url(\"${image.s3SmallLink}\");` : ''}>\n                                                    {!image && <div class='text-muted font-weight-lighter' style='font-size: 20px; padding-top: 5px;'>{mu.displayNameShort(reqUser)}</div>}\n                                                </div>\n                                                <small>\n                                                    <div class='text-overflow text-center'>\n                                                        <strong>{mu.displayName(reqUser)}</strong><br />\n                                                        {/* {publicTeam && publicTeam.public > 0 ? <>\n                                                            <a href={`/teams/public/${publicTeam.uuidv4}`}>{publicTeam.name}</a>\n                                                        </> : <>\n                                                            {publicTeam ? <>{publicTeam.name}</> : ''}<br />\n                                                            <span class='text-muted'>(<Text id='teams.not-public'>Not public</Text>)</span>\n                                                        </>} */}\n                                                    </div>\n                                                    <div class='text-overflow text-center'>\n                                                        <Text id='teams.connect.wants-to-follow'>wants to follow your team:</Text>\n                                                    </div>\n                                                    <div class='text-overflow text-center'>\n                                                        <strong>{mu.displayName(team)}</strong>\n                                                    </div>\n                                                </small>\n                                                {(isConfirmed || isDeleted) ? <>\n                                                    <div class='text-center'>\n                                                        {isConfirmed ? <div class='text-success'>\n                                                            <Text id='teams.connect.confirmed'>Confirmed</Text> <i class='fas fa-check' />\n                                                        </div> : <div class='text-danger'>\n                                                            <Text id='teams.connect.deleted'>Deleted</Text> <i class='fas fa-trash-alt' />\n                                                        </div>}\n                                                    </div>\n                                                </> : <>                                    \n                                                    <div>\n                                                        <button class='btn btn-sm btn-block btn-success text-overflow mt-1' onClick={this.confirmRequest} data-team={team.id} data-user={reqUser.id}>\n                                                            <Text id='teams.connect.confirm'>Confirm</Text>\n                                                        </button>\n                                                        {publicTeam && publicTeam.public > 0 && <button class='btn btn-sm btn-block btn-outline-success text-overflow mt-1' onClick={this.confirmRequest} data-team={team.id} data-user={reqUser.id} data-follow={true}>\n                                                            <Text id='teams.connect.confirm-and-follow'>Confirm & follow back</Text>\n                                                        </button>}\n                                                        <div class='mt-3'>\n                                                            <small>\n                                                                <button class='btn btn-sm btn-block btn-link text-overflow' style='font-size: 1.0em;' onClick={this.deleteRequest} data-team={team.id} data-user={reqUser.id}>\n                                                                    <Text id='teams.connect.delete'>Del</Text>\n                                                                </button>\n                                                            </small>\n                                                        </div>\n                                                    </div>\n                                                </>}\n                                            </div>\n                                        );\n                                    })}\n                                </>)}\n                            </div>\n                        </div>\n                        <details class='mt-3'>\n                            <summary><small><Text id='teams.connect.how-summary'>How does this work?</Text></small></summary>\n                            <p>\n                                <Text id='teams.connect.how-text'>What can followers see when I grant them access to follow? The answer is very little. They can see main details of the workouts you share and name of the dogs. That's all. Try to follow a team and check out the workout tab.</Text>\n                            </p>\n                        </details>\n                    </div>\n                </div>\n            </div>\n\t\t);\n\t}\n}\n\nexport default Teams;\n"],"sourceRoot":""}