(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{"3on9":function(e,t,o){"use strict";(function(e){function n(){return(n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n])}return e}).apply(this,arguments)}function i(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}function s(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,n)}return o}function a(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?s(Object(o),!0).forEach((function(t){r(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):s(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}function r(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}var d,l=o("hosL"),c=o("Utv1"),u=o("/eY4"),h=o("cneo"),p=o("go65"),g=(o("Y3FI"),o("OhSV")),f=o("dVCl"),b={id:0,name:"empty"},m=function(){var e=a({},b);return e.unique=(new Date).getTime()+"-"+c.a.randomPassword(),e},v=function(e){function t(){return e.apply(this,arguments)||this}return i(t,e),t.prototype.render=function(){var e,t=this.props,o=t.provided,i=t.snapshot,s=t.innerRef,a=t.children,r=t.className;return Object(l.h)("div",n({class:"h-100 border "+r},o.droppableProps,{ref:s,style:(e=i.isDraggingOver,{borderStyle:e?"dashed":"",width:110})}),a)},t}(l.Component),O=function(t){function o(){for(var e,o=arguments.length,n=new Array(o),i=0;i<o;i++)n[i]=arguments[i];return(e=t.call.apply(t,[this].concat(n))||this).removeThisPlaceholder=function(){var t=e.props,o=t.removePlaceholder;(void 0===o?function(){}:o)({idx:t.idx,list:t.list})},e}return i(o,t),o.prototype.render=function(){var t,o,i=this.props,s=i.provided,r=i.snapshot,d=i.innerRef,u=i.dog;return Object(l.h)("div",n({},s.draggableProps,s.dragHandleProps,{ref:d,class:"mx-2 my-2 p-2",style:(t=r.isDragging,o=s.draggableProps.style,a({userSelect:"none",background:t?"#808080":"",maxWidth:92,height:100},o))}),0===u.id?Object(l.h)(e,null,Object(l.h)("div",null,Object(l.h)("div",{class:"text-center border rounded-circle imageRounded text-muted pt-2"},Object(l.h)("span",{class:"font-weight-lighter",style:"font-size: 35px;"}," ")),Object(l.h)("div",{class:"text-center"},Object(l.h)("button",{class:"btn btn-sm btn-link float-right p-0",onClick:this.removeThisPlaceholder},Object(l.h)("i",{class:"fas fa-trash-alt"}))," "))):Object(l.h)(e,null,Object(l.h)("div",null,Object(l.h)("div",{class:"text-center border rounded-circle imageRounded text-muted pt-2",style:u.image?'background-image: url("'+u.image.s3ThumbLink+'");':""},!u.image&&Object(l.h)("span",{class:"font-weight-lighter",style:"font-size: 35px;"},c.a.ucfirst(u.name,!0))),Object(l.h)("div",{class:"text-center"},Object(l.h)("small",null,u.shortname||u.name,Object(l.h)("br",null))))))},o}(l.Component),j={filterby:c.a.get("dogs-filter")},y=Object(u.a)(d=function(t){function o(e){var o;return(o=t.call(this,e)||this).toggleDog=function(e){return new Promise((function(t,n){var i,s,a,r,d,l,c,u,p,g,f,b,m;return i=e.target.closest("#dogContainer").dataset.id,s=parseInt(i,10),r=(a=o.props).object,d=a.type,l=a.elementtype,c=a.field,u=a.updateField,p=a.isNew,g=a.showPositions,(b=(f=Object(h.i)(r[c])||[]).indexOf(s))>-1?(f.splice(b,1),m="remove"):(f.push(s),m="add"),Promise.resolve(u({id:r.id,field:c,value:f,type:d,elementtype:l,isNew:p,skipTimer:!0,singleValue:s})).then((function(){try{return o.setState({filterText:""}),g&&o.dndDogs({dogId:s,action:m}),t()}catch(e){return n(e)}}),n)}))},o.findAllDogsInTeams=function(){var e=o.props.stores.dogStore.dogs,t=void 0===e?[]:e,n=o.props,i=n.object,s=n.currentTeam,a=void 0===s?{}:s,r=Object(h.i)(i.teams||[]),d=a.id;return t.filter((function(e){return!!(e.team===d||e.teams&&e.teams.indexOf(d)>-1)||(r.indexOf(e.team)>-1||!!e.teams&&e.teams.some((function(e){return r.indexOf(e)>=0})))})).map((function(e){return e.id}))},o.addAllDogsInTeam=function(){return new Promise((function(e,t){var n,i,s,a,r,d,l,c;return i=(n=o.props).object,s=n.type,a=n.elementtype,r=n.field,d=n.updateField,l=n.isNew,c=o.findAllDogsInTeams(),Promise.resolve(d({id:i.id,field:r,value:c,type:s,elementtype:a,isNew:l,skipTimer:!0})).then((function(){try{return e()}catch(e){return t(e)}}),t)}))},o.dndDogs=function(e){var t=e.dogId,n=e.action,i=o.props.stores.dogStore.dogs,s=void 0===i?[]:i,a=o.props.object,r=a.dogs?function(e){return a.dogs.indexOf(e.id)>-1}:function(){return!1},d=Object(h.i)(s),l=d.filter(r),c=Math.ceil(l.length/2),u=l.splice(0,c),p=[];a.dogsLeft&&a.dogsLeft.length>0&&(p=a.dogsLeft.filter((function(e){return 0===e||d.find((function(t){return t.id===e}))&&-1===a.dogsRight.indexOf(e)})).map((function(e){return d.find((function(t){return t.id===e}))||m()})));var g=[];if(a.dogsRight&&a.dogsRight.length>0&&(g=a.dogsRight.filter((function(e){return 0===e||d.find((function(t){return t.id===e}))&&-1===a.dogsLeft.indexOf(e)})).map((function(e){return d.find((function(t){return t.id===e}))||m()}))),"add"===n){var f=s.find((function(e){return e.id===t}));f&&(p.length>g.length?g.push(f):p.push(f))}if("remove"===n){var b=p.findIndex((function(e){return e.id===t}));b>-1&&p.splice(b,1);var v=g.findIndex((function(e){return e.id===t}));v>-1&&g.splice(v,1)}0===p.length&&0===g.length&&(p=u,g=l),n?o.setState({dogsLeft:p,dogsRight:g,dogPositionUpdated:!0},(function(){return o.updateDogPositions()})):o.setState({dogsLeft:p,dogsRight:g})},o.addPlaceholderLeft=function(){var e=o.state.dogsLeft,t=void 0===e?[]:e;t.push(m()),o.setState({dogsLeft:t,dogPositionUpdated:!0})},o.addPlaceholderRight=function(){var e=o.state.dogsRight,t=void 0===e?[]:e;t.push(m()),o.setState({dogsRight:t,dogPositionUpdated:!0})},o.removePlaceholder=function(e){var t=e.idx,n=e.list;if("dogsLeft"===n){var i=o.state.dogsLeft,s=void 0===i?[]:i;s.splice(t,1),o.setState({dogsLeft:s,dogPositionUpdated:!0})}if("dogsRight"===n){var a=o.state.dogsRight,r=void 0===a?[]:a;r.splice(t,1),o.setState({dogsRight:r,dogPositionUpdated:!0})}},o.clearAllDogs=function(){return new Promise((function(e,t){var n;return n=o.props,Promise.resolve((0,n.updateField)({id:n.object.id,field:n.field,value:[],type:n.type,elementtype:n.elementtype,isNew:n.isNew,skipTimer:!0})).then((function(){try{return o.resetDogPositions(),e()}catch(e){return t(e)}}),t)}))},o.toggleSearchField=function(){o.setState({showSearchField:o.state.showSearchField?null:1})},o.getList=function(e){return o.state[e]},o.onDragEnd=function(e){var t=e.source,n=e.destination;if(n)if(t.droppableId===n.droppableId){var i,s=function(e,t,o){var n=Array.from(e),i=n.splice(t,1);return n.splice(o,0,i[0]),n}(o.getList(t.droppableId),t.index,n.index);o.setState(((i={})[t.droppableId]=s,i.dogPositionUpdated=!0,i))}else{var a=function(e,t,o,n){var i=Array.from(e),s=Array.from(t),a=i.splice(o.index,1);s.splice(n.index,0,a[0]);var r={};return r[o.droppableId]=i,r[n.droppableId]=s,r}(o.getList(t.droppableId),o.getList(n.droppableId),t,n);o.setState({dogsLeft:a.dogsLeft,dogsRight:a.dogsRight,dogPositionUpdated:!0})}},o.updateDogPositions=function(){return new Promise((function(e,t){var n,i,s,a,r,d,l,c;return i=(n=o.state).dogsLeft,a=void 0===(s=n.dogsRight)?[]:s,d=(r=o.props).object,l=r.updateField,c=r.isNew,Promise.resolve(l({id:d.id,field:"dogsLeft",value:(void 0===i?[]:i).map((function(e){return e.id})),isNew:c,datatype:"array"})).then((function(){try{return Promise.resolve(l({id:d.id,field:"dogsRight",value:a.map((function(e){return e.id})),isNew:c,datatype:"array"})).then((function(){try{return o.setState({dogPositionUpdated:!1}),e()}catch(e){return t(e)}}),t)}catch(e){return t(e)}}),t)}))},o.resetDogPositions=function(){return new Promise((function(e,t){var n,i,s,a,r,d,l,c,u,p,g;return i=void 0===(n=o.props.stores.dogStore.dogs)?[]:n,a=(s=o.props).object,r=s.updateField,d=s.isNew,l=function(e){return a.dogs.indexOf(e.id)>-1},c=Object(h.i)(i),u=c.filter(l),p=Math.ceil(u.length/2),g=u.splice(0,p),Promise.resolve(r({id:a.id,field:"dogsLeft",value:g.map((function(e){return e.id})),isNew:d,datatype:"array"})).then((function(){try{return Promise.resolve(r({id:a.id,field:"dogsRight",value:u.map((function(e){return e.id})),isNew:d,datatype:"array"})).then((function(){try{return o.setState({dogsLeft:g,dogsRight:u,dogPositionUpdated:!1}),e()}catch(e){return t(e)}}),t)}catch(e){return t(e)}}),t)}))},o.clearDogPositions=function(){return new Promise((function(e,t){var n,i,s,a,r,d;return i=(n=o.props).object,s=n.updateField,a=n.isNew,r=[],d=[],Promise.resolve(s({id:i.id,field:"dogsLeft",value:d,isNew:a,datatype:"array"})).then((function(){try{return Promise.resolve(s({id:i.id,field:"dogsRight",value:r,isNew:a,datatype:"array"})).then((function(){try{return o.setState({dogsLeft:d,dogsRight:r,dogPositionUpdated:!1}),e()}catch(e){return t(e)}}),t)}catch(e){return t(e)}}),t)}))},o.changeFilter=function(e){var t=e.target.value;o.setState({filterby:t}),c.a.set("dogs-filter",t),o.loadDog()},o.getFilteredDogs=function(e){void 0===e&&(e=o.props);var t=o.state,n=t.filterText,i=e.object,s=e.filter,a=o.props.stores.dogStore.dogs,r=void 0===a?[]:a,d=void 0===s?function(){return!0}:s;if(i.dogs)switch(t.filterby){case"all":d=n?function(e){return e.name.match(new RegExp(n,"i"))||i.dogs.indexOf(e.id)>-1}:function(){return!0};break;case"onlySelected":d=n?function(e){return e.name.match(new RegExp(n,"i"))||i.dogs.indexOf(e.id)>-1}:function(e){return i.dogs.indexOf(e.id)>-1};break;case"onlyTeam":d=n?function(e){return e.name.match(new RegExp(n,"i"))||i.dogs.indexOf(e.id)>-1}:function(e){return i.team===e.team||i.dogs.indexOf(e.id)>-1};break;case"leadOnly":d=function(e){return i.dogs.indexOf(e.id)>-1||c.a.getNestedValue(e,"positions.lead.distanceKm")>0};break;case"pointOnly":d=function(e){return i.dogs.indexOf(e.id)>-1||c.a.getNestedValue(e,"positions.point.distanceKm")>0};break;case"teamOnly":d=function(e){return i.dogs.indexOf(e.id)>-1||c.a.getNestedValue(e,"positions.team.distanceKm")>0};break;case"wheelOnly":d=function(e){return i.dogs.indexOf(e.id)>-1||c.a.getNestedValue(e,"positions.wheel.distanceKm")>0}}var l=r.filter(d);o.setState({filteredDogs:l})},o.state=a({dogsLeft:[],dogsRight:[]},j),o}i(o,t);var n=o.prototype;return n.loadDog=function(e){return new Promise(function(t,o){var n;return void 0===e&&(e=this.props),n=this.props.showPositions,Promise.resolve(e.stores.dogStore.load({query:{deceased:0},addData:["team","user","workoutSummary","vaccineStatuses","historyStatuses","vaccineLogStatuses","allDogs"]})).then(function(){try{return n&&this.dndDogs({}),this.getFilteredDogs(),t()}catch(e){return o(e)}}.bind(this),o)}.bind(this))},n.componentWillReceiveProps=function(e){e.filter!==this.props.filter&&this.getFilteredDogs(e)},n.componentDidMount=function(){this.loadDog()},n.render=function(){var t=this,o=this.state,n=o.filterby,i=o.filterText,s=o.showSearchField,a=o.dogsLeft,r=void 0===a?[]:a,d=o.dogsRight,u=void 0===d?[]:d,b=o.dogPositionUpdated,m=o.filteredDogs,j=void 0===m?[]:m,y=this.props.stores,x=y.userStore,w=y.dogStore,D=w.dogs,P=void 0===D?[]:D,L=x.user.language,S=void 0===L?"en":L,k=this.props,R=k.saved,F=void 0===R?{}:R,T=k.object,I=k.field,N=k.title,E=k.icon,C=k.help,A=k.showPositions,U=void 0!==A&&A,V=k.currentTeam,K=void 0===V?{}:V,_=Object(h.i)(T[I])||[],z=this.findAllDogsInTeams(),M=T.teams?T.teams.map((function(e){return x.findTeam(e)})):[];return Object(l.h)("div",{class:"form-group  mb-5 pb-1 border-bottom "+(F[I+"."+T.id]?"is-valid":"")},Object(l.h)("span",{class:"float-right",onClick:this.toggleSearchField},Object(l.h)("i",{class:"fas fa-search"})),Object(l.h)("button",{class:"btn btn-sm btn-link float-right mr-5",onClick:this.clearAllDogs},Object(l.h)("i",{class:"fas fa-eraser"})," ",Object(l.h)(g.c,{id:"dog.dogs.remove-all-dogs"},"Fjern alle hundene")),Object(l.h)("label",{for:I+"Input"},E&&Object(l.h)("i",{class:E+" text-muted"})," ",N),Object(l.h)("div",{class:"container-fluid px-0"},s&&Object(l.h)("div",{class:"row"},Object(l.h)("div",{class:"col-12"},Object(l.h)(g.b,null,Object(l.h)("input",{class:"form-control form-control-sm",type:"text",placeholder:Object(l.h)(g.c,{id:"dog.dogs.search-for-dogs"},"Søk etter hund"),value:i,onInput:Object(p.a)(this,"filterText")})))),Object(l.h)("div",{class:"row"},Object(l.h)("div",{class:"col-12"},Object(l.h)("div",{class:"form-row align-items-center"},Object(l.h)("div",{class:"col-auto my-2 mx-auto"},Object(l.h)("select",{class:"custom-select",style:"background-color: inherit; border: none; padding-top: 0; padding-bottom: 0; height: 1.4em; font-size: 0.8em;",onInput:this.changeFilter},Object(l.h)("option",{value:"",selected:!n},"-- ",Object(l.h)(g.c,{id:"dog.dogs.choose-filter"},"Choose filter")," ---"),Object(l.h)("option",{value:"all",selected:"all"===n},Object(l.h)(g.c,{id:"dog.dogs.show-all"},"Vis alle")),Object(l.h)("option",{value:"onlySelected",selected:"onlySelected"===n},Object(l.h)(g.c,{id:"dog.dogs.show-only-selected"},"Vis kun valgte")),Object(l.h)("option",{value:"onlyTeam",selected:"onlyTeam"===n},Object(l.h)(g.c,{id:"dog.dogs.show-only-team-dogs"},"Vis kun hundene i teamet")),Object(l.h)("option",{value:"leadOnly",selected:"leadOnly"===n},Object(l.h)(g.c,{id:"dog.dogs.show-lead-dogs-only"},"Vis kun lederhunder")),Object(l.h)("option",{value:"pointOnly",selected:"pointOnly"===n},Object(l.h)(g.c,{id:"dog.dogs.show-point-dogs-only"},"Vis kun pointhunder")),Object(l.h)("option",{value:"teamOnly",selected:"teamOnly"===n},Object(l.h)(g.c,{id:"dog.dogs.show-team-dogs-only"},"Vis kun teamhunder")),Object(l.h)("option",{value:"wheelOnly",selected:"wheelOnly"===n},Object(l.h)(g.c,{id:"dog.dogs.show-wheel-dogs-only"},"Vis kun wheelhunder"))))))),Object(l.h)("div",{class:"row"},z.length>0&&Object(l.h)(e,null,Object(l.h)("button",{class:"btn btn-primary btn-block",onClick:this.addAllDogsInTeam},Object(l.h)("i",{class:"fas fa-plus mr-2"})," ",Object(l.h)(g.c,{id:"dog.dogs.add-all-in-team",fields:{total:z.length}},"Add all dogs in team"),K.name?": "+K.name:"",M&&M.length>0&&Object(l.h)("span",{class:"font-weight-lighter"},", ",M.map((function(t,o){return Object(l.h)(e,null,o>0?", ":"",t)}))))),c.a.isArray(P)&&j.map((function(e){var o=x.findDogstatus({status:e.status,language:S}),i=x.findDogposition({position:e.position,language:S}),s=w.findHistoryStatuses(e.id);return Object(l.h)("div",{class:"col-6 col-sm-6 col-md-6 col-lg-6 mb-1"},Object(l.h)("div",{class:"border rounded px-3 pt-2 pb-1 "+(_.indexOf(e.id)>-1?"bg-success":"")+" position-relative",onClick:t.toggleDog,id:"dogContainer","data-id":e.id,style:"padding: .3rem !important; line-height: 1.1em; cursor: pointer; pointer-events: inherit;"},i&&Object(l.h)("small",{class:"position-absolute",style:"left:5px; top: 32px;"},Object(l.h)("span",{class:"badge badge-"+(i.class||"primary")+" mr-3"},i.icon&&Object(l.h)("i",{class:i.icon})," ",i.name)),"leadOnly"===n&&c.a.getNestedValue(e,"positions.lead.distanceKm")>0&&Object(l.h)("small",{class:"position-absolute",style:"left:5px; top: 32px;"},Object(l.h)("span",{class:"badge badge-secondary mr-3"},Object(l.h)(g.c,{id:"dogs.sort-lead"},"Lead"),": ",c.a.format(c.a.getNestedValue(e,"positions.lead.distanceKm"),0),"km")),"pointOnly"===n&&c.a.getNestedValue(e,"positions.point.distanceKm")>0&&Object(l.h)("small",{class:"position-absolute",style:"left:5px; top: 32px;"},Object(l.h)("span",{class:"badge badge-secondary mr-3"},Object(l.h)(g.c,{id:"dogs.sort-point"},"Point"),": ",c.a.format(c.a.getNestedValue(e,"positions.point.distanceKm"),0),"km")),"teamOnly"===n&&c.a.getNestedValue(e,"positions.team.distanceKm")>0&&Object(l.h)("small",{class:"position-absolute",style:"left:5px; top: 32px;"},Object(l.h)("span",{class:"badge badge-secondary mr-3"},Object(l.h)(g.c,{id:"dogs.sort-team"},"Team"),": ",c.a.format(c.a.getNestedValue(e,"positions.team.distanceKm"),0),"km")),"wheelOnly"===n&&c.a.getNestedValue(e,"positions.wheel.distanceKm")>0&&Object(l.h)("small",{class:"position-absolute",style:"left:5px; top: 32px;"},Object(l.h)("span",{class:"badge badge-secondary mr-3"},Object(l.h)(g.c,{id:"dogs.sort-wheel"},"Wheel"),": ",c.a.format(c.a.getNestedValue(e,"positions.wheel.distanceKm"),0),"km")),Object(l.h)("div",{class:"d-flex"},Object(l.h)("div",{class:"text-center border rounded-circle imageRounded imageRoundedSmall text-muted pt-2",style:e.image?'background-image: url("'+e.image.s3ThumbLink+'");':""},!e.image&&Object(l.h)("span",{class:"font-weight-lighter",style:"font-size: 20px;"},c.a.ucfirst(e.name,!0))),Object(l.h)("div",{class:"flex-grow-1 pl-2 pr-1",style:"border-right: 4px solid "+x.findHarness(e.harness,"colorNonstop")+" !important; line-height: 0.9em;"},Object(l.h)("small",null,Object(l.h)("small",{class:"float-right"},e.birth&&Object(l.h)("span",{class:"mr-1"},c.a.age(e.birth,e.deceased)),"female"===e.gender?Object(l.h)("i",{class:"fas fa-venus"}):Object(l.h)("i",{class:"fas fa-mars"})),e.shortname||e.name,Object(l.h)("br",null),Object(l.h)("div",{style:"line-height: 0.8em;"},Object(l.h)("small",null,x.findTeam(e.team)))),Object(l.h)("small",{class:"float-right"},o&&o.id&&Object(l.h)("span",{class:"badge badge-"+o.class+" mr-2 font-weight-light"},o.icon&&Object(l.h)("i",{class:o.icon})," ",o.name),e.specialNeeds&&Object(l.h)("span",{class:"badge badge-warning mr-2 font-weight-light"},Object(l.h)("i",{class:"fas fa-exclamation-triangle"})," ",e.specialNeeds),s&&s.map((function(e){return Object(l.h)("span",{class:"badge badge-warning mr-2",title:c.a.isoDate(e.endDate,!1,!1,!0)},e.title)})))))))})))),F[I+"."+T.id]?Object(l.h)("div",{class:"valid-feedback",style:"display: block;"},Object(l.h)(g.c,{id:"dog.dogs.saved-changes"},"Endringene er lagret")):Object(l.h)("small",{id:I+"Help",class:"form-text text-muted"},C),U&&Object(l.h)(e,null,Object(l.h)("div",{class:"container-fluid px-0 clearfix"},Object(l.h)("div",{class:"row"},Object(l.h)("div",{class:"col-12"},Object(l.h)("h5",null,Object(l.h)(g.c,{id:"dog.dogs.dogs-positions"},"Posisjoner i spannet")))),Object(l.h)(f.a,{onDragEnd:this.onDragEnd},Object(l.h)("div",{class:"row"},Object(l.h)("div",{class:"col-6 pr-0",style:"min-height: 100px;"},Object(l.h)(f.c,{droppableId:"dogsLeft"},(function(e,o){return Object(l.h)(v,{provided:e,snapshot:o,innerRef:e.innerRef,className:"ml-auto"},r&&r.map((function(e,n){return Object(l.h)(f.b,{key:e.id+"-"+e.unique,draggableId:"dragId-"+e.id+"-"+e.unique,index:n},(function(i){return Object(l.h)(O,{provided:i,snapshot:o,innerRef:i.innerRef,dog:e,removePlaceholder:t.removePlaceholder,idx:n,list:"dogsLeft"})}))})),e.placeholder)}))),Object(l.h)("div",{class:"col-6 pl-0",style:"min-height: 100px;"},Object(l.h)(f.c,{droppableId:"dogsRight"},(function(e,o){return Object(l.h)(v,{provided:e,snapshot:o,innerRef:e.innerRef,className:"mr-auto"},u&&u.map((function(e,n){return Object(l.h)(f.b,{key:e.id+"-"+e.unique,draggableId:"dragId-"+e.id+"-"+e.unique,index:n},(function(i){return Object(l.h)(O,{provided:i,snapshot:o,innerRef:i.innerRef,dog:e,removePlaceholder:t.removePlaceholder,idx:n,list:"dogsRight"})}))})),e.placeholder)}))))),Object(l.h)("div",{class:"row mb-3 mt-2"},Object(l.h)("div",{class:"col-6 pr-0"},Object(l.h)("button",{class:"btn btn-sm btn-outline-secondary",onClick:this.addPlaceholderLeft},Object(l.h)("i",{class:"fas fa-plus-circle"})," ",Object(l.h)(g.c,{id:"dog.dogs.addplaceholder"},"Add placeholder"))),Object(l.h)("div",{class:"col-6 pl-0"},Object(l.h)("button",{class:"float-right btn btn-sm btn-outline-secondary",onClick:this.addPlaceholderRight},Object(l.h)("i",{class:"fas fa-plus-circle"})," ",Object(l.h)(g.c,{id:"dog.dogs.addplaceholder"},"Add placeholder"))))),Object(l.h)("div",{class:"container-fluid px-0"},Object(l.h)("div",{class:"row"},Object(l.h)("div",{class:"col-6"},Object(l.h)("button",{class:"btn btn-sm btn-"+(b?"primary":"secondary"),onClick:this.updateDogPositions},Object(l.h)("i",{class:"fas fa-save"})," ",Object(l.h)(g.c,{id:"dog.dogs.saveDogPositions"},"Save dog positions"))),Object(l.h)("div",{class:"col-6"},Object(l.h)("button",{class:"float-right btn btn-sm btn-warning",onClick:this.resetDogPositions},Object(l.h)("i",{class:"fas fa-sync"})," ",Object(l.h)(g.c,{id:"dog.dogs.resetDogPositions"},"Reset dog positions")))),Object(l.h)("div",{class:"row mt-2"},Object(l.h)("div",{class:"col-6"}," "),Object(l.h)("div",{class:"col-6"},Object(l.h)("button",{class:"float-right btn btn-sm btn-link",onClick:this.clearDogPositions},Object(l.h)("i",{class:"fas fa-eraser"})," ",Object(l.h)(g.c,{id:"dog.dogs.clearDogPositions"},"Clear dog positions")))))))},o}(l.Component))||d;t.a=y}).call(this,o("hosL").Fragment)},om2D:function(e,t,o){"use strict";var n,i=o("hosL"),s=o("/eY4"),a=(o("cneo"),o("Utv1"),o("u2zT")),r=Object(s.a)(n=function(e){function t(t){var o;return(o=e.call(this,t)||this).handleAddImage=function(e){var t=o.props.addToImages,n=void 0===t||t,i=o.props,s=i.updateField,a=i.object,r=i.field;if(r&&s({id:a.id,field:r,value:e,skipTimer:!0}),n){var d=[];d.push(e),s({id:a.id,field:"images",value:d,skipTimer:!0})}},o.state={files:[]},o}var o,n;return n=e,(o=t).prototype=Object.create(n.prototype),o.prototype.constructor=o,o.__proto__=n,t.prototype.render=function(){var e=this.props,t=e.uploadStatus,o=void 0===t?function(){}:t,n=e.before,s=void 0===n?function(){}:n,r=e.after,d=void 0===r?function(){}:r,l=e.autoOpen,c=void 0===l||l;return Object(i.h)("div",{class:"row"},Object(i.h)("div",{class:"col-12"},Object(i.h)(a.a,{handleAddImage:this.handleAddImage,uploadStatus:o,apiUrl:"/api/fileupload",before:s,after:d,autoOpen:c},Object(i.h)("div",{style:{height:30,width:"100%"}}))))},t}(i.Component))||n;t.a=r},u2zT:function(e,t,o){"use strict";var n,i=o("hosL"),s=o("/eY4"),a=o("Utv1"),r=o("OhSV"),d=Object(s.a)(n=function(e){function t(t){var o;return(o=e.call(this,t)||this).dropRef=Object(i.createRef)(),o.handleDrag=function(e){e.preventDefault(),e.stopPropagation()},o.handleDragIn=function(e){e.preventDefault(),e.stopPropagation(),o.dragCounter++,e.dataTransfer.items&&e.dataTransfer.items.length>0&&o.setState({drag:!0})},o.handleDragOut=function(e){e.preventDefault(),e.stopPropagation(),o.dragCounter--,0===o.dragCounter&&o.setState({drag:!1})},o.handleDrop=function(e){if(e.preventDefault(),e.stopPropagation(),o.setState({drag:!1}),e.dataTransfer.files&&e.dataTransfer.files.length>0){for(var t=0,n=e.dataTransfer.files.length;t<n;t+=1){o.readLocalFile(e.dataTransfer.files[t])}o.dragCounter=0}},o.handleAddFiles=function(e){e.preventDefault();var t=e.target;for(var n=0,i=t.files.length;n<i;n+=1){o.readLocalFile(t.files[n])}},o.handleEvent=function(){0},o.handleUpload=function(e){var t=o.props,n=t.uploadStatus,i=t.before,s=void 0===i?function(){}:i,r=t.after,d=void 0===r?function(){}:r;(void 0===n?function(){}:n)(!1),a.a.isFunction(s)&&s();var l=new FormData;l.append("files[]",e);var c={progress:1};c.xhr=new XMLHttpRequest,c.xhr.upload.addEventListener("progress",(function(t){o.updateProgress(t,e)})),c.xhr.addEventListener("loadstart",(function(t){o.handleEvent(t,e)})),c.xhr.addEventListener("load",(function(t){o.handleEvent(t,e)})),c.xhr.addEventListener("loadend",(function(t){var n=e;a.a.isFunction(d)&&d(),o.handleEvent(t,n)})),c.xhr.addEventListener("progress",(function(t){o.handleEvent(t,e)})),c.xhr.addEventListener("error",(function(t){o.handleEvent(t,e)})),c.xhr.addEventListener("abort",(function(t){o.handleEvent(t,e)})),c.xhr.addEventListener("readystatechange",(function(t){o.uploadDone(t,e)})),c.xhr.open("POST",""+a.a.getApiServer()+o.props.apiUrl),c.xhr.setRequestHeader("Authorization","Bearer "+a.a.getJwtToken()),c.xhr.send(l);var u=e.name,h=o.state.uploadedFilesData;h[u]||(h[u]={}),h[u].uploadMeta=c,h[u].imageNum=o.state.imageNum,o.setState({uploadedFilesData:h})},o.readLocalFile=function(e){return new Promise((function(t,n){var i=new FileReader;i.addEventListener("error",(function(e){n(e)})),i.addEventListener("load",(function(n){var i=e,s=i.name,a=o.state.uploadedFilesData;a[s]||(a[s]={}),a[s].event=n,o.setState({uploadedFilesData:a}),o.handleUpload(i),t(n)})),i.readAsDataURL(e)}))},o.updateProgress=function(e,t){if(e.lengthComputable){var n=t.name,i=o.state.uploadedFilesData,s=e.loaded/e.total*100;0,i[n].uploadMeta.progress=s,o.setState({uploadedFilesData:i})}},o.uploadDone=function(e,t){var n=t.name,i=o.state.uploadedFilesData,s=i[n].uploadMeta;if(s&&4===s.xhr.readyState&&201===s.xhr.status)for(var a=JSON.parse(s.xhr.responseText).data.files,r=0;r<a.length;r+=1){o.addFileToUpload(a[r]),o.fileInput.value=""}},o.state={drag:!1,loadingProgress:0,uploadedFiles:[],uploadedFilesData:{}},o}var o,n;n=e,(o=t).prototype=Object.create(n.prototype),o.prototype.constructor=o,o.__proto__=n;var s=t.prototype;return s.addFileToUpload=function(e){var t=this.state.uploadedFilesData,o=this.props,n=o.handleAddImage,i=o.uploadStatus,s=void 0===i?function(){}:i;delete t[e.name],this.setState({uploadedFilesData:t}),n(e),s(!0)},s.componentDidMount=function(){var e=this,t=this.dropRef.current;t.addEventListener("dragenter",this.handleDragIn),t.addEventListener("dragleave",this.handleDragOut),t.addEventListener("dragover",this.handleDrag),t.addEventListener("drop",this.handleDrop),this.props.autoOpen&&setTimeout((function(){e.fileInput.click()}),10)},s.componentWillUnmount=function(){var e=this.dropRef.current;e.removeEventListener("dragenter",this.handleDragIn),e.removeEventListener("dragleave",this.handleDragOut),e.removeEventListener("dragover",this.handleDrag),e.removeEventListener("drop",this.handleDrop)},s.render=function(){var e=this,t=this.state.uploadedFilesData;return Object(i.h)("div",{style:{position:"relative"},ref:this.dropRef},this.state.drag&&Object(i.h)("div",{style:{border:"dashed grey 4px",backgroundColor:"rgba(255,255,255,.8)",position:"absolute",top:0,bottom:0,left:0,right:0,zIndex:9999}},Object(i.h)("div",{style:{position:"absolute",top:"50%",right:0,left:0,textAlign:"center",color:"grey",fontSize:36}},Object(i.h)("div",null,Object(i.h)(r.c,{id:"imageupload.drag-files-here"},"drop your files here :)")))),Object(i.h)("div",null,Object(i.h)("input",{class:"btn btn-info col-sm-12",multiple:!0,type:"file",id:"image-file",onchange:this.handleAddFiles,ref:function(t){e.fileInput=t}})),Object(i.h)("div",null,Object.keys(t).length>0?Object(i.h)("h3",null,Object(i.h)(r.c,{id:"imageupload.upload-images"},"Uploaded images")):"",Object(i.h)("ul",{class:"list-group"},Object.keys(t).map((function(e){var o=t[e].uploadMeta,n=void 0===o?{}:o,s=e.match(/(jpg|jpeg|png|gif|heic|heif|svg|webp|tif)/i);return Object(i.h)("li",{class:"list-group-item list-group-item-action flex-column align-items-start"},Object(i.h)("div",{class:"d-flex w-100 justify-content-between"},s&&Object(i.h)("img",{class:"img-fluid mr-3",src:t[e].event.target.result,style:"max-height: 50px;"}),Object(i.h)("small",null,t[e].event.uploadDone),Object(i.h)(r.c,{id:"imageupload.uploading-image"},"Laster opp bilde..."),Object(i.h)("small",null,a.a.formatBytes(t[e].event.total,2))),Object(i.h)("div",{class:"progress mt-1",style:"height: 4px;"},Object(i.h)("div",{class:"progress-bar progress-bar-striped progress-bar-animated bg-success",role:"progressbar",style:"width: "+n.progress+"%; height: 4px;","aria-valuenow":n.progress,"aria-valuemin":"0","aria-valuemax":"100"})))})))),this.props.children)},t}(i.Component))||n;t.a=d}}]);
//# sourceMappingURL=6.chunk.92274.js.map