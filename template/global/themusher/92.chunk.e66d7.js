(window.webpackJsonp=window.webpackJsonp||[]).push([[92,98],{MqFr:function(e,t,s){"use strict";s.r(t),function(e){var a,r=s("hosL"),i=(s("Utv1"),s("/eY4")),n=(s("Y3FI"),s("go65"),s("OhSV"),s("fh8t")),o=s.n(n),l=s("f0JH"),c=s("ZOvn"),d=Object(i.a)(a=function(t){function s(e){var s;return(s=t.call(this,e)||this).scrollImages=function(e){var t=e.target,a=t.scrollLeft/t.clientWidth,r=Math.round(a),i=Math.abs(r-a);(Number.isInteger(a)||i<.1)&&s.setState({imageIdx:r})},s.state={imageIdx:0},s}var a,i;i=t,(a=s).prototype=Object.create(i.prototype),a.prototype.constructor=a,a.__proto__=i;var n=s.prototype;return n.loadNews=function(e){return new Promise(function(t,s){var a,r,i;return void 0===e&&(e=this.props),r=(a=e.stores).newsStore,i={tag:"wizardStartup"},a.userStore.isAdmin&&(i.showall=1),Promise.resolve(r.load({query:i})).then((function(){try{return t()}catch(e){return s(e)}}),s)}.bind(this))},n.componentDidMount=function(){this.loadNews()},n.render=function(){var t=this,s=this.state.imageIdx,a=this.props.stores.appState.language,i=void 0===a?"en":a,n=this.props.stores.newsStore.newsList;return Object(r.h)("div",{class:"container-fluid"},Object(r.h)("div",{class:"row"},Object(r.h)("div",{class:"fixed-bottom",style:"height: 90vh;"},Object(r.h)("div",{class:"d-flex flex-row flex-nowrap no-scrollbar h-100",style:"overflow: auto; scroll-snap-type: x mandatory;",onScroll:this.scrollImages},n.map((function(s){var a=c.a.replaceFieldTags(s.ingress);return Object(r.h)(e,null,Object(r.h)("div",{class:"col-12 clearfix p-0 position-relative"},Object(r.h)("div",{class:"w-100 h-100 text-center",style:"\n                                                flex-wrap: wrap;\n                                                overflow-y: hidden;\n                                                scroll-snap-align: start;\n                                            ",onTouchstart:function(e){e.stopPropagation()},onTouchend:function(e){e.stopPropagation()},onTouchmove:function(e){e.stopPropagation()}},Object(r.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-md-6 offset-md-3 col-lg-4 offset-lg-4 overflow-hidden",style:"height: 25%;"},s.images&&s.images[0]&&Object(r.h)("img",{src:s.images[0].s3LargeLink,class:"img-fluid "})),Object(r.h)("div",{class:"bg-white text-dark",style:"height: 75%;"},Object(r.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-md-6 offset-md-3 col-lg-4 offset-lg-4 pt-5"},Object(r.h)("h3",null,s.title),Object(r.h)(o.a,{markdown:c.a.replaceImages(s.ingress,s.images,i,!1),markdownOpts:c.a.getMarkdownOptions()}),Object(r.h)("div",{class:"text-left"},a&&a.map((function(s){return Object(r.h)(e,null,Object(r.h)(l.default,{stores:t.props.stores,field:s.name,type:s.type,title:s.title,help:s.help}))}))),Object(r.h)("small",null,Object(r.h)(o.a,{markdown:c.a.replaceImages(s.body,s.images,i,!1),markdownOpts:c.a.getMarkdownOptions()})))))))}))),Object(r.h)("div",{class:"w-100 text-center position-absolute bg-white text-dark",style:"bottom: 20px; right: 0px;"},Object(r.h)("small",null,Object(r.h)("small",null,n.map((function(t,a){return Object(r.h)(e,null,Object(r.h)("i",{class:(a===s?"fas":"far")+" fa-circle mr-1"}))}))))))))},s}(r.Component))||a;t.default=d}.call(this,s("hosL").Fragment)},TiXY:function(e,t,s){"use strict";var a,r=s("hosL"),i=s("/eY4"),n=(s("cneo"),s("Utv1"),s("OhSV")),o=s("u2zT"),l=Object(i.a)(a=function(e){function t(t){var s;return(s=e.call(this,t)||this).handleAddImage=function(e){var t=s.props;(0,t.updateField)({id:t.object.id,field:t.field,value:e})},s.state={files:[]},s}var s,a;return a=e,(s=t).prototype=Object.create(a.prototype),s.prototype.constructor=s,s.__proto__=a,t.prototype.render=function(){var e=this.props,t=e.uploadStatus,s=void 0===t?function(){}:t,a=e.before,i=void 0===a?function(){}:a,l=e.after,c=void 0===l?function(){}:l,d=e.autoOpen,u=void 0!==d&&d;return Object(r.h)("div",{class:"row"},Object(r.h)("div",{class:"col-12"},Object(r.h)(n.c,{id:"form.files.upload-file"},"Last opp fil"),":",Object(r.h)("br",null),Object(r.h)(o.a,{handleAddImage:this.handleAddImage,apiUrl:"/api/fileupload",uploadStatus:s,before:i,after:c,autoOpen:u},Object(r.h)("div",{style:{height:30,width:"100%"}}))))},t}(r.Component))||a;t.a=l},f0JH:function(e,t,s){"use strict";s.r(t),function(e){function a(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,a)}return s}function r(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function i(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}var n,o,l=s("hosL"),c=(s("Utv1"),s("/eY4")),d=(s("Y3FI"),s("OhSV")),u=s("ZOvn"),p=s("om2D"),h=s("TiXY"),f=(s("HqZR"),u.a.marginTop(!1)),b=u.a.marginTopBack(!1),m=u.a.marginBottom(),O={},j=Object(c.a)(n=function(e){function t(){for(var t,s=arguments.length,a=new Array(s),r=0;r<s;r++)a[r]=arguments[r];return(t=e.call.apply(e,[this].concat(a))||this).handleImageErrored=function(e){var t=e.target;t.onerror=null,setTimeout((function(){t.src+="?"+new Date}),1e3)},t.removeImage=function(e){return new Promise((function(s){return t.props.stores.userStore.removeImage({id:t.props.user.id,name:e.target.parentElement.dataset.name||e.target.dataset.name}),s()}))},t.removeMainImage=function(){var e=t.props;(0,e.updateField)({id:e.user.id,field:e.field,value:{}})},t}return i(t,e),t.prototype.render=function(){var e=this,t=this.props,s=t.saved,a=t.user,r=t.type,i=void 0===r?"text":r,n=t.field,o=t.title,c=t.icon,u=t.help,f=t.onInput,b=t.updateField,m=t.skipImageList,O=a[n];return"image"===i?Object(l.h)("div",{class:"form-group "+(s[n+"."+a.id]?"is-valid":"")},Object(l.h)("label",{for:n+"Input"},c&&Object(l.h)("i",{class:c+" text-muted"})," ",o),!m&&Object(l.h)("div",{class:"container-fluid"},Object(l.h)("div",{class:"row"},a.image&&a.image.s3SmallLink&&Object(l.h)("div",{class:"col-3 p-1"},Object(l.h)("img",{src:a.image.s3SmallLink,class:"img-fluid border rounded-lg",onError:this.handleImageErrored}),Object(l.h)("button",{class:"btn btn-sm btn-link",onClick:this.removeMainImage,"data-name":a.image.name},Object(l.h)("i",{class:"fas fa-trash"})," Del"),Object(l.h)("span",{class:"badge badge-success"},"Main")),a.images&&a.images.filter((function(e){return!a.image||e.md5!==a.image.md5})).map((function(t){return Object(l.h)("div",{class:"col-3 p-1"},Object(l.h)("img",{src:t.s3SmallLink,class:"img-fluid",onError:e.handleImageErrored}),Object(l.h)("button",{class:"btn btn-sm btn-link",onClick:e.removeImage,"data-name":t.name},Object(l.h)("i",{class:"fas fa-trash"})," Del"))})))),Object(l.h)(p.a,{saved:s,object:a,field:n,updateField:b,autoOpen:!1}),s[n+"."+a.id]?Object(l.h)("div",{class:"valid-feedback",style:"display: block;"},Object(l.h)(d.c,{id:"users.changes-saved"},"Endringene er lagret")):Object(l.h)("small",{id:n+"Help",class:"form-text text-muted"},u)):"file"===i?Object(l.h)("div",{class:"form-group "+(s[n+"."+a.id]?"is-valid":"")},Object(l.h)("label",{for:n+"Input"},c&&Object(l.h)("i",{class:c+" text-muted"})," ",o),Object(l.h)(h.a,{saved:s,object:a,field:n,updateField:b}),s[n+"."+a.id]?Object(l.h)("div",{class:"valid-feedback",style:"display: block;"},Object(l.h)(d.c,{id:"users.changes-saved"},"Endringene er lagret")):Object(l.h)("small",{id:n+"Help",class:"form-text text-muted"},u)):Object(l.h)("div",{class:"form-group "+(s[n+"."+a.id]?"is-valid":"")},Object(l.h)("label",{for:n+"Input"},c&&Object(l.h)("i",{class:c+" text-muted"})," ",o),Object(l.h)("input",{type:"text",class:"form-control "+(s[n+"."+a.id]?"is-valid":""),id:n+"Input","aria-describedby":n+"Help",value:O,"data-id":a.id,"data-field":n,onInput:f}),s[n+"."+a.id]?Object(l.h)("div",{class:"valid-feedback",style:"display: block;"},Object(l.h)(d.c,{id:"users.changes-saved"},"Endringene er lagret")):Object(l.h)("small",{id:n+"Help",class:"form-text text-muted"},u))},t}(l.Component))||n,v=Object(c.a)(o=function(t){function s(e){var s;return(s=t.call(this,e)||this).updateField=function(e){var t=e.target.dataset,a=t.field,r=t.type,i=t.elementtype,n=e.target.value;s.updateFieldValue({id:parseInt(t.id,10),field:a,value:n,type:r,elementtype:i})},s.updateFieldValue=function(e){var t=e.id,a=e.field,r=e.value,i=e.datatype,n=e.elementtype,o=e.skipTimer,l=void 0!==o&&o,c=s.props.stores.userStore,d=r,u=r,p=c.user;"images"===a&&Array.isArray(p.images)&&Array.isArray(r)&&(u=[].concat(p.images,r)),"array"!==i||Array.isArray(r)||(d="number"===n?r.split(",").map((function(e){return parseFloat(e)||e})):r.split(",")),c.updateField(t,a,u),l?s.doUpdateField(t,a,d):(clearTimeout(s.updateTimer[a]),s.updateTimer[a]=setTimeout((function(){return new Promise((function(e){return s.doUpdateField(t,a,d),e()}))}),500))},s.back=function(){s.props.stores.history.goBack()},s.state=function(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?a(Object(s),!0).forEach((function(t){r(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):a(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}({},O),s.updateTimer={},s}i(s,t);var n=s.prototype;return n.loadUser=function(){return new Promise(function(e){return this.props.stores.userStore.getInfo(),e()}.bind(this))},n.doUpdateField=function(e,t,s){return new Promise(function(a,r){return Promise.resolve(this.props.stores.userStore.saveField(e,t,s)).then((function(){try{return a()}catch(e){return r(e)}}),r)}.bind(this))},n.componentDidMount=function(){this.loadUser()},n.render=function(){var t=this.props.stores.userStore,s=t.insertStatus,a=t.saved,r=t.user,i=r.email,n=this.props,o=n.field,c=n.title,u=n.help,p=n.icon,h=n.type;return o?Object(l.h)(e,null,Object(l.h)(j,{saved:a,user:r,field:o,icon:p,type:h,stores:this.props.stores,title:c,help:u,onInput:this.updateField,updateField:this.updateFieldValue,skipImageList:!1})):Object(l.h)("div",{class:"container-fluid",style:"margin-bottom: "+m+"; margin-top: "+f+";"},Object(l.h)("button",{class:"btn btn-link pl-0 fixed-top text-primary",style:"top: "+b+"; left: 5px; font-size: 35px; width: 45px;",onClick:this.back},Object(l.h)("i",{class:"fas fa-arrow-circle-left"})),Object(l.h)("div",{class:"row"},Object(l.h)("div",{class:"offset-0 col-12 offset-sm-2 col-sm-8 offset-lg-4 col-lg-4",style:"padding-left: 35px;"},Object(l.h)("div",null,Object(l.h)("h5",null,Object(l.h)(d.c,{id:"users.edit"},"Endre"),": ",i),Object(l.h)(j,{saved:a,user:r,field:"username",icon:"fas fa-user",title:Object(l.h)(d.c,{id:"users.username"},"Brukernavn"),help:Object(l.h)(d.c,{id:"users.username-help"},"Ditt brukernavn på The Musher"),onInput:this.updateField}),Object(l.h)("div",{class:"row"},Object(l.h)("div",{class:"col-6"},Object(l.h)(j,{saved:a,user:r,field:"firstname",title:Object(l.h)(d.c,{id:"users.firstname"},"Fornavn"),help:Object(l.h)(d.c,{id:"users.firstname-help"},"Ditt fornavn"),onInput:this.updateField})),Object(l.h)("div",{class:"col-6"},Object(l.h)(j,{saved:a,user:r,field:"lastname",title:Object(l.h)(d.c,{id:"users.lastname"},"Etternavn"),help:Object(l.h)(d.c,{id:"users.lastname-help"},"Ditt etternavn"),onInput:this.updateField}))),Object(l.h)(j,{saved:a,user:r,field:"cellphone",icon:"fas fa-mobile",title:Object(l.h)(d.c,{id:"users.cellphone"},"Mobil"),help:Object(l.h)(d.c,{id:"users.cellphone-help"},"Ditt mobilnummer"),onInput:this.updateField}),Object(l.h)(j,{saved:a,user:r,field:"url",icon:"fas fa-link",title:Object(l.h)(d.c,{id:"users.url"},"Hjemmeside"),help:Object(l.h)(d.c,{id:"users.url-help"},"Din hjemmeside"),onInput:this.updateField}),Object(l.h)(j,{saved:a,user:r,field:"facebook",icon:"fab fa-facebook-square",title:Object(l.h)(d.c,{id:"users.facebook"},"Facebook"),help:Object(l.h)(d.c,{id:"users.facebook-help"},"Din Facebook profil"),onInput:this.updateField}),Object(l.h)(j,{saved:a,user:r,field:"instagram",icon:"fab fa-instagram",title:Object(l.h)(d.c,{id:"users.instagram"},"Instagram"),help:Object(l.h)(d.c,{id:"users.instagram-help"},"Din Instagram profil"),onInput:this.updateField}),Object(l.h)(j,{saved:a,user:r,field:"snapchat",icon:"fab fa-snapchat",title:Object(l.h)(d.c,{id:"users.snapchat"},"Snapchat"),help:Object(l.h)(d.c,{id:"users.snapchat-help"},"Din Snapchat profil"),onInput:this.updateField}),Object(l.h)(j,{saved:a,user:r,field:"image",icon:"fas fa-camera",type:"image",stores:this.props.stores,title:Object(l.h)(d.c,{id:"users.photos"},"Bilder"),help:Object(l.h)(d.c,{id:"users.photos-help"},"Bilder av deg."),onInput:this.updateField,updateField:this.updateFieldValue}))),s&&Object(l.h)("div",{class:"alert alert-success mt-4 col-12",role:"alert"},Object(l.h)(d.c,{id:"users.saved"},"Profilen er lagret."))))},s}(l.Component))||o;t.default=v}.call(this,s("hosL").Fragment)}}]);
//# sourceMappingURL=92.chunk.e66d7.js.map