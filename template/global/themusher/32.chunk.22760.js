(window.webpackJsonp=window.webpackJsonp||[]).push([[32],{"8Lgr":function(t,e,a){"use strict";(function(t){function n(t){return s.a.format(t,t<5?2:1)}var o,r=a("hosL"),s=a("Utv1"),i=a("/eY4"),l=(a("OhSV"),a("ZOvn"),Object(i.a)(o=function(e){function a(){return e.apply(this,arguments)||this}var o,s;return s=e,(o=a).prototype=Object.create(s.prototype),o.prototype.constructor=o,o.__proto__=s,a.prototype.render=function(){var e=this.props,a=e.value,o=void 0===a?0:a,s=e.smallUnit,i=this.props.stores.userStore.user.settings;return(void 0===i?{}:i).imperial?Object(r.h)(t,null,Object(r.h)("nobr",null,n(function(t){return.621371*t}(o))," ",s?Object(r.h)(t,null,Object(r.h)("small",null,Object(r.h)("small",null,Object(r.h)("small",{class:"ml-0 text-muted"},"mi")))):Object(r.h)(t,null,"mi"))):Object(r.h)(t,null,Object(r.h)("nobr",null,n(o)," ",s?Object(r.h)(t,null,Object(r.h)("small",null,Object(r.h)("small",null,Object(r.h)("small",{class:"ml-0 text-muted"},"km")))):Object(r.h)(t,null,"km")))},a}(r.Component))||o);e.a=l}).call(this,a("hosL").Fragment)},ETxl:function(t){t.exports={hoverelementonly:"hoverelementonly__1mJGJ",hoverElement:"hoverElement__axh3O",hoverelementhide:"hoverelementhide__1k_qH","progress-bar-vertical":"progress-bar-vertical__1B2sC","progress-bar":"progress-bar__pnsVj",dragged:"dragged__QXO46",over:"over__1re3x",list:"list__q_emZ"}},K5BL:function(t,e,a){"use strict";var n,o=a("hosL"),r=a("Utv1"),s=a("/eY4"),i=a("OhSV"),l=a("go65"),c=(a("ETxl"),a("ZOvn"),Object(s.a)(n=function(t){function e(){for(var e,a=arguments.length,n=new Array(a),o=0;o<a;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))||this).commentTrack=function(){return new Promise((function(t,a){var n,o,r,s,i,l;return r=void 0===(o=(n=e.props).callback)?function(){}:o,s=e.props.track,i=e.state.comment,Promise.resolve(e.props.stores.trackStore.commentReplyTrack({id:s.id,commentId:n.commentId,comment:void 0===i?"":i})).then((function(n){try{return(l=n)&&200===l.status&&(e.setState({comment:""}),r({track:s,response:l})),t()}catch(t){return a(t)}}),a)}))},e}var a,n;return n=t,(a=e).prototype=Object.create(n.prototype),a.prototype.constructor=a,a.__proto__=n,e.prototype.render=function(){var t=this.props.inputRef,e=this.state.comment,a=this.props.stores.userStore.user,n=void 0===a?{}:a,s=n.firstname?""+r.a.ucfirst(n.firstname,!0)+r.a.ucfirst(n.lastname,!0):""+r.a.ucfirst(n.email||"",!0),c=n.image||(n.images?n.images[0]:void 0);return Object(o.h)("div",{class:"w-100"},Object(o.h)("div",{class:"d-flex mb-0 position-relative w-100"},Object(o.h)("div",{class:"text-center border rounded-circle imageRounded imageRoundedThumb",style:(c?"background-image: url('"+c.s3SmallLink+"'); background-size: cover;":"")+" border-width: 3px !important;"},!c&&Object(o.h)("span",{class:"font-weight-lighter",style:"font-size: 15px;"},s)),Object(o.h)("div",{class:"col pl-3",style:"line-height: 1.2em;"},Object(o.h)("div",{class:"d-flex bd-highlight"},Object(o.h)("div",{class:"p-0 w-100 bd-highlight"},Object(o.h)("label",{class:"sr-only",for:"inlineFormInput"},Object(o.h)(i.c,{id:"comments.comment"},"Kommentar")),Object(o.h)("div",{class:"border rounded rounded-lg position-relative"},Object(o.h)(i.b,null,Object(o.h)("input",{class:"form-control-plaintext px-2",type:"text",placeholder:Object(o.h)(i.c,{id:"comments.write-comment"},"Skriv en kommentar..."),onInput:Object(l.a)(this,"comment"),value:e,ref:t})))),Object(o.h)("div",{class:"p-0 pl-2 flex-shrink-1 bd-highlight"},Object(o.h)("button",{type:"button",class:"btn btn-sm btn-primary mb-2",onClick:this.commentTrack},Object(o.h)("i",{class:"fas fa-paper-plane"})))))))},e}(o.Component))||n);e.a=c},QkTp:function(t,e,a){"use strict";(function(t){var n,o=a("hosL"),r=a("Utv1"),s=a("/eY4"),i=(a("OhSV"),a("ZOvn"),Object(s.a)(n=function(e){function a(){return e.apply(this,arguments)||this}var n,s;return s=e,(n=a).prototype=Object.create(s.prototype),n.prototype.constructor=n,n.__proto__=s,a.prototype.render=function(){var e=this.props,a=e.value,n=void 0===a?0:a,s=this.props.stores.userStore.user.settings;return(void 0===s?{}:s).imperial?Object(o.h)(t,null,Object(o.h)("nobr",null,r.a.format(function(t){return 9*t/5+32}(n),0),"°F")):Object(o.h)(t,null,Object(o.h)("nobr",null,r.a.format(n,1),"°C"))},a}(o.Component))||n);e.a=i}).call(this,a("hosL").Fragment)},UJvz:function(t,e,a){"use strict";var n,o=a("hosL"),r=a("Utv1"),s=a("/eY4"),i=a("OhSV"),l=Object(s.a)(n=function(t){function e(){for(var e,a=arguments.length,n=new Array(a),o=0;o<a;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))||this).toggleDate=function(){e.setState({showDate:!e.state.showDate})},e.touchStart=function(t){t.stopPropagation(),e.setState({startY:t.touches[0].pageY})},e.touchEnd=function(t){t.stopPropagation(),e.setState({startY:void 0,readyToRefresh:!1})},e.touchMove=function(t){t.stopPropagation();var a=e.state;e.appContainer&&(0===e.appContainer.scrollTop&&t.touches[0].pageY>a.startY+30&&!a.refreshing&&(0,e.props.close)())},e}var a,n;return n=t,(a=e).prototype=Object.create(n.prototype),a.prototype.constructor=a,a.__proto__=n,e.prototype.render=function(){var t=this,e=this.state.showDate,a=this.props,n=a.image,s=a.imagexxl,l=a.close,c=a.thumb,d=a.name,m=a.title,u=a.date;return Object(o.h)("div",{class:"fixed-top bg-dark text-center pt-2",style:"width: 100vw; height: 100vh;"},Object(o.h)("button",{class:"btn btn-secondary float-right mr-2",onClick:l},"X"),Object(o.h)("div",{class:"d-flex mb-2 px-2"},c&&Object(o.h)("div",{class:"text-center border rounded-circle imageRounded imageRoundedSmall",style:c?'background-image: url("'+c+'");':""}," "),Object(o.h)("div",{class:"flex-grow-1 pl-3 pr-2 text-left",style:"line-height: 1.3em;"},d&&Object(o.h)("strong",{class:"mr-2"},d,":"),m,Object(o.h)("br",null),Object(o.h)("small",{class:"text-muted"},u&&Object(o.h)("small",{onClick:this.toggleDate},e?r.a.formatDate(u,{locale:"no-NB"}):r.a.formatDistance(u,new Date,{locale:"no-NB"}))))),Object(o.h)("img",{src:n,class:"img-fluid align-middle mt-2 mb-2",onClick:l,onTouchstart:this.touchStart,onTouchend:this.touchEnd,onTouchmove:this.touchMove,ref:function(e){return t.appContainer=e}}),Object(o.h)("a",{target:"_blank",rel:"noopener noreferrer",href:s||n,download:s||n},Object(o.h)("i",{class:"fas fa-download"})," ",Object(o.h)(i.c,{id:"modal.download"},"Last ned bildet")))},e}(o.Component))||n;e.a=l},UwwE:function(t,e,a){"use strict";(function(t){var n,o=a("hosL"),r=a("Utv1"),s=a("/eY4"),i=(a("OhSV"),a("ZOvn"),Object(s.a)(n=function(e){function a(){return e.apply(this,arguments)||this}var n,s;return s=e,(n=a).prototype=Object.create(s.prototype),n.prototype.constructor=n,n.__proto__=s,a.prototype.render=function(){var e=this.props,a=e.value,n=void 0===a?0:a,s=this.props.stores.userStore.user.settings;return(void 0===s?{}:s).imperial?Object(o.h)(t,null,Object(o.h)("nobr",null,r.a.format(function(t){return 2.20462*t}(n),0)," lb")):Object(o.h)(t,null,Object(o.h)("nobr",null,r.a.format(n,0)," kg"))},a}(o.Component))||n);e.a=i}).call(this,a("hosL").Fragment)},ePpR:function(t,e,a){"use strict";(function(t){var n,o=a("hosL"),r=a("Utv1"),s=a("/eY4"),i=a("OhSV"),l=a("go65"),c=a("om2D"),d=a("ZOvn"),m=Object(s.a)(n=function(e){function a(t){var a;return(a=e.call(this,t)||this).commentTrack=function(){return new Promise((function(t,e){var n,o,r,s,i,l,c,m,u;return r=void 0===(o=(n=a.props).callback)?function(){}:o,i=void 0===(s=n.inputRefObject)?{}:s,l=a.props.track,m=(c=a.state).showAddImage,Promise.resolve(a.props.stores.trackStore.commentTrack({id:l.id,comment:c.comment})).then((function(n){try{return(u=n)&&200===u.status&&(a.setState({comment:{body:"",images:[]}},(function(){d.a.resizeTextarea(i[l.id]),m&&a.addImage()})),r({track:l,response:u})),t()}catch(t){return e(t)}}),e)}))},a.addImages=function(t){var e,n=a.state.comment;(e=n.images).push.apply(e,t.value),a.setState({comment:n})},a.addImage=function(){var t=a.state.showAddImage;a.setState({showAddImage:!(void 0!==t&&t)})},a.handleImageErrored=function(t){var e=t.target;e.onerror=null,setTimeout((function(){e.src+="?"+new Date}),1e3)},a.state={comment:{body:"",images:[]},showAddImage:!1},a.inputRef={},a}var n,s;return s=e,(n=a).prototype=Object.create(s.prototype),n.prototype.constructor=n,n.__proto__=s,a.prototype.render=function(){var e=this,a=this.props,n=a.inputRef,s=a.track,d=this.state,m=d.comment,u=d.showAddImage,h=this.props.stores.userStore.user,p=void 0===h?{}:h,b=p.firstname?""+r.a.ucfirst(p.firstname,!0)+r.a.ucfirst(p.lastname,!0):""+r.a.ucfirst(p.email||"",!0),f=p.image||(p.images?p.images[0]:void 0);return Object(o.h)("div",{class:"col-12 col-sm-8 col-lg-6 offset-sm-2 offset-lg-3 mb-3 position-relative"},Object(o.h)("div",{class:"d-flex mb-0 position-relative w-100"},Object(o.h)("div",{class:"text-center border rounded-circle imageRounded imageRoundedSmall",style:(f?"background-image: url('"+f.s3SmallLink+"'); background-size: cover;":"")+" border-width: 3px !important;"},!f&&Object(o.h)("span",{class:"font-weight-lighter",style:"font-size: 15px;"},b)),Object(o.h)("div",{class:"col pl-3",style:"line-height: 1.2em;"},Object(o.h)("div",{class:"d-flex bd-highlight"},Object(o.h)("div",{class:"p-0 w-100 bd-highlight"},Object(o.h)("label",{class:"sr-only",for:"inlineFormInput"},Object(o.h)(i.c,{id:"comments.comment"},"Kommentar")),Object(o.h)("div",{class:"border rounded rounded-lg position-relative"},Object(o.h)(i.b,null,Object(o.h)("input",{class:"form-control-plaintext px-2",type:"text",placeholder:Object(o.h)(i.c,{id:"comments.write-comment"},"Skriv en kommentar..."),onInput:Object(l.a)(this,"comment.body"),value:m.body,ref:n})),Object(o.h)("div",{class:"position-absolute",style:"top: 8px; right: 10px; font-size: 1.2em;"},Object(o.h)("i",{class:"fas fa-image pointerCursor","data-id":s.id,onClick:this.addImage})))),Object(o.h)("div",{class:"p-0 pl-2 flex-shrink-1 bd-highlight"},Object(o.h)("button",{type:"button",class:"btn btn-primary mb-2",onClick:this.commentTrack},Object(o.h)("i",{class:"fas fa-paper-plane"})))))),u&&Object(o.h)(t,null,Object(o.h)("div",{class:"col-12 text-center"},Object(o.h)("div",{class:"container-fluid"},Object(o.h)("div",{class:"row"},r.a.isArray(m.images)&&m.images.map((function(t){return Object(o.h)("div",{class:"col-3 p-1"},Object(o.h)("img",{src:t.s3SmallLink,class:"img-fluid",onError:e.handleImageErrored}),Object(o.h)("button",{class:"btn btn-sm btn-link",onClick:e.removeImage,"data-name":t.name},Object(o.h)("i",{class:"fas fa-trash"})," Del"))})))),Object(o.h)(c.a,{object:m,updateField:this.addImages,autoOpen:!0}))))},a}(o.Component))||n;e.a=m}).call(this,a("hosL").Fragment)},irB3:function(t,e,a){"use strict";(function(t){var n,o=a("hosL"),r=a("Utv1"),s=a("/eY4"),i=(a("OhSV"),a("ZOvn"),Object(s.a)(n=function(e){function a(){return e.apply(this,arguments)||this}var n,s;return s=e,(n=a).prototype=Object.create(s.prototype),n.prototype.constructor=n,n.__proto__=s,a.prototype.render=function(){var e=this.props,a=e.value,n=void 0===a?0:a,s=e.smallUnit,i=this.props.stores.userStore.user.settings;return(void 0===i?{}:i).imperial?Object(o.h)(t,null,Object(o.h)("nobr",null,r.a.format(function(t){return 3.28084*t}(n),0)," ",s?Object(o.h)(t,null,Object(o.h)("small",null,Object(o.h)("small",null,Object(o.h)("small",{class:"ml-0 text-muted"},"ft")))):Object(o.h)(t,null,"ft"))):Object(o.h)(t,null,Object(o.h)("nobr",null,r.a.format(n,0)," ",s?Object(o.h)(t,null,Object(o.h)("small",null,Object(o.h)("small",null,Object(o.h)("small",{class:"ml-0 text-muted"},"m")))):Object(o.h)(t,null,"m")))},a}(o.Component))||n);e.a=i}).call(this,a("hosL").Fragment)},lcEk:function(t,e,a){"use strict";(function(t){function n(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,n)}return a}function o(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}var r,s=a("hosL"),i=a("Utv1"),l=a("/eY4"),c=a("cneo"),d=a("OhSV"),m=a("fh8t"),u=a.n(m),h=a("K5BL"),p=(a("ETxl"),a("ZOvn")),b={showAddComment:{},showAllComments:!1,showAllReplies:{},viewImageIdx:{},likeComment:{},likeReply:{}},f=Object(l.a)(r=function(e){function a(t){var a;return(a=e.call(this,t)||this).likeComment=function(t){return new Promise((function(e,n){var o,r,s,i,l;return r=void 0===(o=a.props.callback)?function(){}:o,s=t.target.parentElement.dataset.id||t.target.dataset.id,i=a.props.track,Promise.resolve(a.props.stores.trackStore.likeTrackComment({id:i.id,commentId:s})).then((function(t){try{return(l=t)&&200===l.status&&r({track:i,commentId:s,response:l}),e(!0)}catch(t){return n(t)}}),n)}))},a.likeReply=function(t){return new Promise((function(e,n){var o,r,s,i,l;return r=void 0===(o=a.props.callback)?function(){}:o,s=t.target.parentElement.dataset.comment||t.target.dataset.comment,i=a.props.track,Promise.resolve(a.props.stores.trackStore.likeTrackCommentReply({id:i.id,replyId:t.target.parentElement.dataset.id||t.target.dataset.id,commentId:s})).then((function(t){try{return(l=t)&&200===l.status&&r({track:i,commentId:s,response:l}),e()}catch(t){return n(t)}}),n)}))},a.replyComment=function(t){return new Promise((function(e){var n=t.target.parentElement.dataset.id||t.target.dataset.id,o=a.state.showAddComment;return o[n]=!o[n],a.setState({showAddComment:o},(function(){a.inputRef[n]&&a.inputRef[n].focus()})),e()}))},a.toggleComments=function(){a.setState({showAllComments:!a.state.showAllComments})},a.toggleReplies=function(t){var e=t.target.parentElement.dataset.id||t.target.dataset.id,n=a.state.showAllReplies;n[e]=!n[e],a.setState({showAllReplies:n})},a.state=function(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?n(Object(a),!0).forEach((function(e){o(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):n(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}({},b),a.inputRef={},a}var r,l;return l=e,(r=a).prototype=Object.create(l.prototype),r.prototype.constructor=r,r.__proto__=l,a.prototype.render=function(){var e=this,a=this.state,n=a.showAddComment,o=a.showAllComments,r=a.showAllReplies,l=a.viewImageIdx,m=a.likeComment,b=this.props,f=b.track,g=b.callback,v=void 0===g?function(){}:g,O=b.col,j=void 0===O?12:O,y=b.offset,k=void 0===y?0:y,x=b.compact,w=this.props.stores.userStore,S=w.user,C=w.language,L=void 0===C?"en":C,D=[],_=0,I=0;if(f.comments){if(_=f.comments.length,o)D=f.comments;else D=f.comments.slice(Math.max(_-(void 0!==x&&x?0:2),0));I=D.length}return Object(s.h)("div",{class:"col-"+j+" offset-"+k+" col-sm-8 col-lg-6 offset-sm-2 offset-lg-3"},o&&Object(s.h)("div",null,Object(s.h)("button",{class:"btn btn-sm btn-link py-0 mb-2",onClick:this.toggleComments},Object(s.h)(d.c,{id:"comments.hide-all-comments"},"Skjul alle kommentarene."))),f&&D&&D.reverse().map((function(a){var o=a.user,b=void 0===o?{}:o,g=b.firstname?""+i.a.ucfirst(b.firstname,!0)+i.a.ucfirst(b.lastname,!0):""+i.a.ucfirst(b.email||"",!0),O=b.firstname?b.firstname+" "+b.lastname:""+b.email,j=b.image||(b.images?b.images[0]:void 0),y=a.likes&&a.likes.findIndex((function(t){return t.user===S.id}))>-1,k=[],x=0,w=0;a.comments&&(x=a.comments.length,w=(k=r[a.id]?a.comments:a.comments.slice(0,void 0)).length);var C=[];if(a.images){var D=Object(c.i)(a.images);C.push.apply(C,D)}var _=l[a.id]?l[a.id]:0,I=C&&C[_]?C[_]:null;return Object(s.h)("div",{class:"row"},Object(s.h)("div",{class:"col-12 d-flex mb-2 position-relative"},Object(s.h)("div",{class:"text-center border rounded-circle imageRounded imageRoundedSmall",style:(j?'background-image: url("'+j.s3SmallLink+'"); background-size: cover;':"")+" border-width: 3px !important;"},!b.image&&Object(s.h)("span",{class:"font-weight-lighter",style:"font-size: 15px;"},g)),Object(s.h)("div",{class:"flex-grow-1 pl-3 pt-0",style:"line-height: 1.2em;"},Object(s.h)("div",{class:"bg-light p-2 rounded-lg"},Object(s.h)("h5",{class:"font-weight-bold mb-0",style:"font-size: 1.0em;"},O),Object(s.h)(u.a,{markdown:p.a.replaceImages(a.comment,a.images,L),markdownOpts:p.a.getMarkdownOptions()})),Object(s.h)("div",null,Object(s.h)("div",{class:"container-fluid px-3 mt-1"},I&&Object(s.h)("div",{class:"clearfix row position-relative"},Object(s.h)("div",{class:"commentContainer col-12 px-0 overflow-hidden",style:"max-height: 60vh;",onDblclick:e.addLikeComment,"data-id":a.id},Object(s.h)("img",{loading:"lazy",class:"img-fluid",style:"min-width: 100px;",src:I.s3LargeLink})),m[a.id]&&Object(s.h)("span",{class:"likeHeart position-absolute text-white display-1",style:"top: calc(50% - 50px); left: calc(50% - 50px); width: 100px; height: 100px;"},Object(s.h)("i",{class:"fas fa-heart likeStory"}))),C&&C.length>1&&Object(s.h)("div",{class:"clearfix d-flex flex-wrap row"},i.a.isArray(C)&&C.map((function(n,o){return Object(s.h)(t,null,Object(s.h)("div",{class:"col px-0 overflow-hidden",style:"max-height: 100px; min-width: 100px;"},Object(s.h)("img",{loading:"lazy",class:"img-fluid border",style:"min-width: 100px;",src:n.s3SmallLink,onClick:e.viewImage,"data-id":a.id,"data-idx":o})))}))))),Object(s.h)("small",null,Object(s.h)("button",{class:"btn btn-sm btn-link py-0 "+(y?"text-primary":""),onClick:e.likeComment,"data-id":a.id},Object(s.h)(d.c,{id:"comments.like"},"Lik")),"-",Object(s.h)("button",{class:"btn btn-sm btn-link py-0",onClick:e.replyComment,"data-id":a.id},Object(s.h)(d.c,{id:"comments.comment-add"},"Kommentar")),"-",Object(s.h)("button",{class:"btn btn-sm btn-link py-0 disabled"},i.a.formatDistance(a.createdDate,new Date,{locale:"no-NB"})))),a.likes&&a.likes.length>0&&Object(s.h)("small",{class:"position-absolute bg-light shadow-sm rounded-lg py-0 px-1",style:"bottom: 20px; right: 15px;"},Object(s.h)("i",{class:"fas fa-thumbs-up text-primary"})," ",a.likes.length)),Object(s.h)("div",{class:"col-11 offset-1 mb-2"},a&&k&&k.map((function(t){var n=t.user,o=void 0===n?{}:n,r=o.firstname?""+i.a.ucfirst(o.firstname,!0)+i.a.ucfirst(o.lastname,!0):""+i.a.ucfirst(o.email||"",!0),l=o.firstname?o.firstname+" "+o.lastname:""+o.email,c=o.image||(o.images?o.images[0]:void 0),m=t.likes&&t.likes.findIndex((function(t){return t.user===S.id}))>-1;return Object(s.h)("div",{class:"row"},Object(s.h)("div",{class:"col-12 d-flex mb-2 position-relative"},Object(s.h)("div",{class:"text-center border rounded-circle imageRounded imageRoundedThumb",style:(c?'background-image: url("'+c.s3SmallLink+'"); background-size: cover;':"")+" border-width: 3px !important;"},!o.image&&Object(s.h)("span",{class:"font-weight-lighter",style:"font-size: 15px;"},r)),Object(s.h)("div",{class:"flex-grow-1 pl-3 pt-0",style:"line-height: 1.2em;"},Object(s.h)("div",{class:"bg-light p-2 rounded-lg"},Object(s.h)("h5",{class:"font-weight-bold mb-0",style:"font-size: 1.0em;"},l),t.comment),Object(s.h)("small",null,Object(s.h)("button",{class:"btn btn-sm btn-link py-0 "+(m?"text-primary":""),onClick:e.likeReply,"data-comment":a.id,"data-id":t.id},Object(s.h)(d.c,{id:"comments.like"},"Lik")),"-",Object(s.h)("button",{class:"btn btn-sm btn-link py-0",onClick:e.replyComment,"data-id":a.id},Object(s.h)(d.c,{id:"comments.comment-add"},"Kommentar")),"-",Object(s.h)("button",{class:"btn btn-sm btn-link py-0 disabled"},i.a.formatDistance(t.createdDate,new Date,{locale:"no-NB"})))),t.likes&&Object(s.h)("small",{class:"position-absolute bg-light shadow-sm rounded-lg py-0 px-1",style:"bottom: 20px; right: 15px;"},Object(s.h)("i",{class:"fas fa-thumbs-up text-primary"})," ",t.likes.length)))})),x-w>0&&Object(s.h)("div",null,Object(s.h)("button",{class:"btn btn-sm btn-link py-0",onClick:e.toggleReplies,"data-id":a.id},Object(s.h)(d.c,{id:"comments.show-more",fields:{more:x-w}},"Vis ",x-w," flere kommentarer...")))),n[a.id]&&Object(s.h)("div",{class:"col-11 offset-1 d-flex mb-2 position-relative"},Object(s.h)(h.a,{stores:e.props.stores,track:f,callback:v,commentId:a.id,inputRef:function(t){return e.inputRef[a.id]=t}})))})),_-I>0&&Object(s.h)("div",null,Object(s.h)("button",{class:"btn btn-sm btn-link py-0",onClick:this.toggleComments},Object(s.h)(d.c,{id:"comments.show-more",fields:{more:_-I}},"Vis ",_-I," flere kommentarer..."))),o&&Object(s.h)("div",null,Object(s.h)("button",{class:"btn btn-sm btn-link py-0",onClick:this.toggleComments},Object(s.h)(d.c,{id:"comments.hide-all-comments"},"Skjul alle kommentarene."))))},a}(s.Component))||r;e.a=f}).call(this,a("hosL").Fragment)},nHdA:function(t,e,a){"use strict";(function(t){var n,o=a("hosL"),r=a("Utv1"),s=a("/eY4"),i=a("OhSV"),l=(a("ZOvn"),Object(s.a)(n=function(e){function a(){return e.apply(this,arguments)||this}var n,s;return s=e,(n=a).prototype=Object.create(s.prototype),n.prototype.constructor=n,n.__proto__=s,a.prototype.render=function(){var e=this.props,a=e.value,n=void 0===a?0:a,s=e.smallUnit,l=this.props.stores.userStore.user.settings;return(void 0===l?{}:l).imperial?Object(o.h)(t,null,Object(o.h)("nobr",null,r.a.format(function(t){return.621371*t}(n),1)," ",s?Object(o.h)(t,null,Object(o.h)("small",null,Object(o.h)("small",null,Object(o.h)("small",{class:"ml-0 text-muted"},Object(o.h)(i.c,{id:"workouts.mph"},"mph"))))):Object(o.h)(t,null,Object(o.h)(i.c,{id:"workouts.mph"},"mph")))):Object(o.h)(t,null,Object(o.h)("nobr",null,r.a.format(n,1)," ",s?Object(o.h)(t,null,Object(o.h)("small",null,Object(o.h)("small",null,Object(o.h)("small",{class:"ml-0 text-muted"},Object(o.h)(i.c,{id:"workouts.kmt"},"km/t"))))):Object(o.h)(t,null,Object(o.h)(i.c,{id:"workouts.kmt"},"km/t"))))},a}(o.Component))||n);e.a=l}).call(this,a("hosL").Fragment)},om2D:function(t,e,a){"use strict";var n,o=a("hosL"),r=a("/eY4"),s=(a("cneo"),a("Utv1"),a("u2zT")),i=Object(r.a)(n=function(t){function e(e){var a;return(a=t.call(this,e)||this).handleAddImage=function(t){var e=a.props.addToImages,n=void 0===e||e,o=a.props,r=o.updateField,s=o.object,i=o.field;if(i&&r({id:s.id,field:i,value:t,skipTimer:!0}),n){var l=[];l.push(t),r({id:s.id,field:"images",value:l,skipTimer:!0})}},a.state={files:[]},a}var a,n;return n=t,(a=e).prototype=Object.create(n.prototype),a.prototype.constructor=a,a.__proto__=n,e.prototype.render=function(){var t=this.props,e=t.uploadStatus,a=void 0===e?function(){}:e,n=t.before,r=void 0===n?function(){}:n,i=t.after,l=void 0===i?function(){}:i,c=t.autoOpen,d=void 0===c||c;return Object(o.h)("div",{class:"row"},Object(o.h)("div",{class:"col-12"},Object(o.h)(s.a,{handleAddImage:this.handleAddImage,uploadStatus:a,apiUrl:"/api/fileupload",before:r,after:l,autoOpen:d},Object(o.h)("div",{style:{height:30,width:"100%"}}))))},e}(o.Component))||n;e.a=i},u2zT:function(t,e,a){"use strict";var n,o=a("hosL"),r=a("/eY4"),s=a("Utv1"),i=a("OhSV"),l=Object(r.a)(n=function(t){function e(e){var a;return(a=t.call(this,e)||this).dropRef=Object(o.createRef)(),a.handleDrag=function(t){t.preventDefault(),t.stopPropagation()},a.handleDragIn=function(t){t.preventDefault(),t.stopPropagation(),a.dragCounter++,t.dataTransfer.items&&t.dataTransfer.items.length>0&&a.setState({drag:!0})},a.handleDragOut=function(t){t.preventDefault(),t.stopPropagation(),a.dragCounter--,0===a.dragCounter&&a.setState({drag:!1})},a.handleDrop=function(t){if(t.preventDefault(),t.stopPropagation(),a.setState({drag:!1}),t.dataTransfer.files&&t.dataTransfer.files.length>0){for(var e=0,n=t.dataTransfer.files.length;e<n;e+=1){a.readLocalFile(t.dataTransfer.files[e])}a.dragCounter=0}},a.handleAddFiles=function(t){t.preventDefault();var e=t.target;for(var n=0,o=e.files.length;n<o;n+=1){a.readLocalFile(e.files[n])}},a.handleEvent=function(){0},a.handleUpload=function(t){var e=a.props,n=e.uploadStatus,o=e.before,r=void 0===o?function(){}:o,i=e.after,l=void 0===i?function(){}:i;(void 0===n?function(){}:n)(!1),s.a.isFunction(r)&&r();var c=new FormData;c.append("files[]",t);var d={progress:1};d.xhr=new XMLHttpRequest,d.xhr.upload.addEventListener("progress",(function(e){a.updateProgress(e,t)})),d.xhr.addEventListener("loadstart",(function(e){a.handleEvent(e,t)})),d.xhr.addEventListener("load",(function(e){a.handleEvent(e,t)})),d.xhr.addEventListener("loadend",(function(e){var n=t;s.a.isFunction(l)&&l(),a.handleEvent(e,n)})),d.xhr.addEventListener("progress",(function(e){a.handleEvent(e,t)})),d.xhr.addEventListener("error",(function(e){a.handleEvent(e,t)})),d.xhr.addEventListener("abort",(function(e){a.handleEvent(e,t)})),d.xhr.addEventListener("readystatechange",(function(e){a.uploadDone(e,t)})),d.xhr.open("POST",""+s.a.getApiServer()+a.props.apiUrl),d.xhr.setRequestHeader("Authorization","Bearer "+s.a.getJwtToken()),d.xhr.send(c);var m=t.name,u=a.state.uploadedFilesData;u[m]||(u[m]={}),u[m].uploadMeta=d,u[m].imageNum=a.state.imageNum,a.setState({uploadedFilesData:u})},a.readLocalFile=function(t){return new Promise((function(e,n){var o=new FileReader;o.addEventListener("error",(function(t){n(t)})),o.addEventListener("load",(function(n){var o=t,r=o.name,s=a.state.uploadedFilesData;s[r]||(s[r]={}),s[r].event=n,a.setState({uploadedFilesData:s}),a.handleUpload(o),e(n)})),o.readAsDataURL(t)}))},a.updateProgress=function(t,e){if(t.lengthComputable){var n=e.name,o=a.state.uploadedFilesData,r=t.loaded/t.total*100;0,o[n].uploadMeta.progress=r,a.setState({uploadedFilesData:o})}},a.uploadDone=function(t,e){var n=e.name,o=a.state.uploadedFilesData,r=o[n].uploadMeta;if(r&&4===r.xhr.readyState&&201===r.xhr.status)for(var s=JSON.parse(r.xhr.responseText).data.files,i=0;i<s.length;i+=1){a.addFileToUpload(s[i]),a.fileInput.value=""}},a.state={drag:!1,loadingProgress:0,uploadedFiles:[],uploadedFilesData:{}},a}var a,n;n=t,(a=e).prototype=Object.create(n.prototype),a.prototype.constructor=a,a.__proto__=n;var r=e.prototype;return r.addFileToUpload=function(t){var e=this.state.uploadedFilesData,a=this.props,n=a.handleAddImage,o=a.uploadStatus,r=void 0===o?function(){}:o;delete e[t.name],this.setState({uploadedFilesData:e}),n(t),r(!0)},r.componentDidMount=function(){var t=this,e=this.dropRef.current;e.addEventListener("dragenter",this.handleDragIn),e.addEventListener("dragleave",this.handleDragOut),e.addEventListener("dragover",this.handleDrag),e.addEventListener("drop",this.handleDrop),this.props.autoOpen&&setTimeout((function(){t.fileInput.click()}),10)},r.componentWillUnmount=function(){var t=this.dropRef.current;t.removeEventListener("dragenter",this.handleDragIn),t.removeEventListener("dragleave",this.handleDragOut),t.removeEventListener("dragover",this.handleDrag),t.removeEventListener("drop",this.handleDrop)},r.render=function(){var t=this,e=this.state.uploadedFilesData;return Object(o.h)("div",{style:{position:"relative"},ref:this.dropRef},this.state.drag&&Object(o.h)("div",{style:{border:"dashed grey 4px",backgroundColor:"rgba(255,255,255,.8)",position:"absolute",top:0,bottom:0,left:0,right:0,zIndex:9999}},Object(o.h)("div",{style:{position:"absolute",top:"50%",right:0,left:0,textAlign:"center",color:"grey",fontSize:36}},Object(o.h)("div",null,Object(o.h)(i.c,{id:"imageupload.drag-files-here"},"drop your files here :)")))),Object(o.h)("div",null,Object(o.h)("input",{class:"btn btn-info col-sm-12",multiple:!0,type:"file",id:"image-file",onchange:this.handleAddFiles,ref:function(e){t.fileInput=e}})),Object(o.h)("div",null,Object.keys(e).length>0?Object(o.h)("h3",null,Object(o.h)(i.c,{id:"imageupload.upload-images"},"Uploaded images")):"",Object(o.h)("ul",{class:"list-group"},Object.keys(e).map((function(t){var a=e[t].uploadMeta,n=void 0===a?{}:a,r=t.match(/(jpg|jpeg|png|gif|heic|heif|svg|webp|tif)/i);return Object(o.h)("li",{class:"list-group-item list-group-item-action flex-column align-items-start"},Object(o.h)("div",{class:"d-flex w-100 justify-content-between"},r&&Object(o.h)("img",{class:"img-fluid mr-3",src:e[t].event.target.result,style:"max-height: 50px;"}),Object(o.h)("small",null,e[t].event.uploadDone),Object(o.h)(i.c,{id:"imageupload.uploading-image"},"Laster opp bilde..."),Object(o.h)("small",null,s.a.formatBytes(e[t].event.total,2))),Object(o.h)("div",{class:"progress mt-1",style:"height: 4px;"},Object(o.h)("div",{class:"progress-bar progress-bar-striped progress-bar-animated bg-success",role:"progressbar",style:"width: "+n.progress+"%; height: 4px;","aria-valuenow":n.progress,"aria-valuemin":"0","aria-valuemax":"100"})))})))),this.props.children)},e}(o.Component))||n;e.a=l},w8dD:function(t,e,a){"use strict";function n(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,n)}return a}function o(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}var r,s=a("hosL"),i=a("Utv1"),l=a("/eY4"),c=a("UJvz"),d=a("lcEk"),m=a("ePpR"),u=(a("nHdA"),a("irB3")),h=(a("UwwE"),a("8Lgr")),p=(a("QkTp"),a("ZOvn")),b=p.a.getMaxLoadIndex(),f={showAddComment:!1},g=Object(l.a)(r=function(t){function e(e){var a;return(a=t.call(this,e)||this).likeTrack=function(){return new Promise((function(t,e){return Promise.resolve(a.props.stores.trackStore.likeTrack({id:a.props.track.id})).then((function(a){try{return a,t()}catch(t){return e(t)}}),e)}))},a.toggleAddComment=function(t){var e=t.target.parentElement.dataset.id||t.target.dataset.id;a.setState({showAddComment:!a.state.showAddComment},(function(){a.inputRef[e]&&a.inputRef[e].focus()}))},a.showModal=function(t){t.stopPropagation(),t.preventDefault(),a.setState({displayModal:!0,currentImage:t.target.dataset.image,currentImageXXL:t.target.dataset.imagexxl,thumb:t.target.dataset.thumb,name:t.target.dataset.name,title:t.target.dataset.title,date:t.target.dataset.date})},a.closeModal=function(){a.setState({displayModal:!1})},a.toggleDate=function(){a.setState({showDate:!a.state.showDate})},a.state=function(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?n(Object(a),!0).forEach((function(e){o(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):n(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}({},f),a.updateTimer={},a.inputRef={},a}var a,r;return r=t,(a=e).prototype=Object.create(r.prototype),a.prototype.constructor=a,a.__proto__=r,e.prototype.render=function(){var t=this,e=this.state,a=e.displayModal,n=e.currentImage,o=e.currentImageXXL,r=e.showDate,l=e.thumb,f=e.name,g=e.title,v=e.date,O=e.showAddComment,j=this.props,y=j.track,k=j.showUser,x=void 0!==k&&k,w=j.isPublic,S=void 0!==w&&w,C=y.image&&y.image.s3SmallLink?y.image:null,L=y.gpxInfo,D=(void 0===L?{}:L).loadIndex,_=void 0===D?0:D,I=this.props.stores.userStore.user,R=y.likes,E=void 0===R?[]:R,P=y.comments,T=void 0===P?[]:P,A=y.likes&&y.likes.findIndex((function(t){return t.user===I.id}))>-1;return Object(s.h)("div",{class:"w-100 mb-3"},Object(s.h)("div",{class:"row"},a&&Object(s.h)(c.a,{close:this.closeModal,image:n,imagexxl:o,thumb:l,name:f,title:g,date:v}),Object(s.h)("div",{class:"col-12 col-sm-8 col-lg-6 offset-sm-2 offset-lg-3 d-flex mb-0 position-relative"},Object(s.h)("div",{class:"text-center border rounded-circle imageRounded",style:C?'background-image: url("'+C.s3SmallLink+'");':""},!C&&Object(s.h)("i",{class:"fas fa-map-marked text-muted mt-3",style:"font-size: 40px;"})),Object(s.h)("div",{class:"flex-grow-1 pl-3",style:"line-height: 1.2em;"},Object(s.h)("a",{class:"stretched-link",href:"/tracks/"+y.id+(S?"/public":"")},Object(s.h)("h5",{class:"mb-1",style:"line-height: 1.0em;"},y.name),Object(s.h)("div",{class:"text-muted font-weight-lighter"},Object(s.h)("small",null,y.place))),Object(s.h)("div",null,Object(s.h)("small",null,_>0&&Object(s.h)("span",{class:"ml-2 text-"+p.a.getLoadIndexColor(i.a.normalizeBetween(_,0,b,0,100))},Object(s.h)("i",{class:"fas fa-hand-rock mr-1"}),Math.floor(i.a.normalizeBetween(_,0,b,0,100))," - ",p.a.getLoadIndexText(i.a.normalizeBetween(_,0,b,0,100))))),Object(s.h)("div",null,1===y.public&&Object(s.h)("span",{class:"badge badge-success"},"Is public"),x&&Object(s.h)("span",{class:"text-muted font-weight-lighter ml-3"},p.a.displayName(y.users))),Object(s.h)("small",{class:"text-muted"},y.date&&Object(s.h)("small",{onClick:this.toggleDate},r?i.a.formatDate(y.date,{locale:"no-NB"}):i.a.formatDistance(y.date,new Date,{locale:"no-NB"}),Object(s.h)("br",null))),Object(s.h)("small",{class:"text-muted"},y.garminId>0&&Object(s.h)("div",{class:"float-left mr-2 text-center border rounded-circle imageRounded imageRoundedIcon",style:'background-image: url("./assets/garmin-connect.png");'}),y.stravaId>0&&Object(s.h)("div",{class:"float-left mr-2 text-center border rounded-circle imageRounded imageRoundedIcon",style:'background-image: url("./assets/strava-icon.png");'}),Object(s.h)("i",{class:"fas fa-road"})," ",Object(s.h)(h.a,{stores:this.props.stores,value:y.distanceKm}),Object(s.h)("i",{class:"fas fa-mountain ml-2"})," ",Object(s.h)(u.a,{stores:this.props.stores,value:y.elevation}),y.gpx&&Object(s.h)("i",{class:"fas fa-map-marked-alt ml-2"})))),Object(s.h)("div",{class:"col-12 col-sm-8 col-lg-6 offset-sm-2 offset-lg-3 mt-1",style:"padding-left: 122px;"},Object(s.h)("div",{class:"row"},y.images&&y.images.map((function(e){return Object(s.h)("div",{class:"text-center border rounded imageRounded imageRoundedSmall",style:e?'background-image: url("'+e.s3SmallLink+'");':"",onClick:t.showModal,"data-image":e.s3LargeLink,"data-imagexxl":e.s3XXLargeLink,"data-thumb":y.image&&y.image.s3SmallLink,"data-title":y.name,"data-date":y.date}," ")})))),Object(s.h)("div",{class:"col-10 offset-2 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-3"},E&&E.length>0&&Object(s.h)("small",{class:"bg-light shadow-sm rounded-lg py-0 px-1",style:"bottom: 20px; right: 15px;"},Object(s.h)("i",{class:"fas fa-thumbs-up text-primary"})," ",E.length),T&&T.length>0&&Object(s.h)("small",{class:"float-right bg-light shadow-sm rounded-lg py-0 px-1",style:"bottom: 20px; right: 15px;"},Object(s.h)("i",{class:"fas fa-comment text-primary"})," ",T.length)),Object(s.h)("div",{class:"col-10 offset-2 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-2 mb-3"},Object(s.h)("div",{class:"row"},Object(s.h)("div",{class:"col-6 text-center"},Object(s.h)("button",{type:"button",class:"btn btn-sm btn-outline-"+(A?"primary":"secondary")+" btn-lg btn-block "+(A?"text-primary":""),onClick:this.likeTrack},Object(s.h)("i",{class:(A?"text-primary fas":"far")+" fa-thumbs-up"})," Like")),Object(s.h)("div",{class:"col-6 text-center"},Object(s.h)("button",{type:"button",class:"btn btn-sm btn-outline-secondary btn-lg btn-block","data-id":y.id,onClick:this.toggleAddComment},Object(s.h)("i",{class:"fas fa-comment"})," Comment")))),O&&Object(s.h)(m.a,{stores:this.props.stores,track:y,inputRef:function(e){return t.inputRef[y.id]=e}}),Object(s.h)(d.a,{stores:this.props.stores,track:y,col:10,offset:2,compact:!0})))},e}(s.Component))||r;e.a=g}}]);
//# sourceMappingURL=32.chunk.22760.js.map