(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{"8j+j":function(e,t,s){"use strict";s.r(t),function(e){function a(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,a)}return s}function o(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?a(Object(s),!0).forEach((function(t){i(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):a(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function i(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}var l,r,c=s("hosL"),n=s("Utv1"),d=s("/eY4"),h=(s("OhSV"),s("ZOvn")),p=s("eT2M"),f=s.n(p);const u=h.a.marginTop(!0),m=h.a.marginBottom(),b={isLoading:!1,contentIsNotLoaded:!0,reloadInSec:null,reloadLastEpoch:null,reloadIsActive:!1};Object(d.a)(l=class extends c.Component{constructor(e){super(e),this.initComponent=()=>{const e=Math.floor((new Date).getTime()/1e3);this.setState({reloadIsActive:!0,reloadLastEpoch:e},()=>this.tickReloadTimeer())},this.state=o({},b),this.updateTimer={}}tickReloadTimeer(){const{reloadIsActive:e,reloadLastEpoch:t}=this.state;if(e){const e=Math.floor((new Date).getTime()/1e3);this.setState({reloadInSec:60-(e-t)}),clearTimeout(this.updateTimer.tick),this.updateTimer.tick=setTimeout(()=>this.tickReloadTimeer(),1e3)}return!1}componentDidMount(){this.initComponent()}componentWillUnmount(){clearTimeout(this.updateTimer.tick)}render(){const{reloadInSec:t}=this.state,s=Math.floor(n.a.normalizeBetween(t,0,60,0,100));return Object(c.h)(e,null,Object(c.h)("div",{class:"progress fixed-top",style:"height: 2px; z-index: 999999;"},Object(c.h)("div",{class:"progress-bar",role:"progressbar",style:`width: ${s}%;`,"aria-valuenow":s,"aria-valuemin":"0","aria-valuemax":"100"})))}});let g=Object(d.a)(r=class extends c.Component{constructor(e){var t;super(e),t=this,this.loadLiveRaceResults=async function(e=t.props,{teamIds:s,focusOnMushers:a,bibs:o,classid:i}){const{raceStore:l,userStore:r}=e.stores,{race:c}=l,{historyPointIndex:n,replayHistory:d,timerRunning:h}=t.state,{showDrawerReplay:p}=t.props,f=l.getClassById(i)||{},{isAdmin:u}=r;await l.getRaceTrackerData(c.raceTrackerRace,{history:d||p,bibs:o,classid:i,startDate:f.startDate,endDate:f.endDate,isAdmin:u}),l.getRaceTrackerActiveTeams(s,a,o,n),h&&(clearTimeout(t.updateTimer.reload),t.updateTimer.reload=setTimeout(()=>{console.log("loadLiveRaceResults.reloading...");const e=Math.floor((new Date).getTime()/1e3);t.setState({reloadLastEpoch:e}),t.loadLiveRaceResults(t.props,{teamIds:s,focusOnMushers:a,bibs:o,classid:i})},6e4))},this.loadRaceResults=async function(e=t.props,s,a){const{raceStore:o}=e.stores,{raceid:i}=e;await o.loadWorkoutSummary(s,i),o.getWorkoutSummaryActiveTeams(s,a)},this.loadRace=async function(e=t.props){try{t.setState({isLoading:!0});const{raceStore:s,appState:a}=e.stores,{raceid:o,classid:i}=e;await s.load(o);const{race:l}=s,{focusOnMushers:r}=a,{selectedClassIds:c=[]}=a,n=i||c[0];i&&a.toggleSelectedClassId(i,!0);const d=l.classes.filter(e=>e.id===n).filter(e=>e.contestants&&e.contestants.length>0).map(e=>e.contestants.filter(e=>e.team>0).map(e=>e.team)).flat(),h=l.classes.filter(e=>e.id===n).filter(e=>e.contestants&&e.contestants.length>0).map(e=>e.contestants.filter(e=>e.bib>0).map(e=>e.bib)).flat();d.length>0&&await s.loadTeams(d.join(",")),l.liveRace>0?await t.loadLiveRaceResults(t.props,{teamIds:d,focusOnMushers:r,bibs:h,classid:n}):await t.loadRaceResults(t.props,d,r),s.getAllClassesSortedBy(),t.setState({isLoading:!1})}catch(e){console.log(e)}},this.toggleFocusOnMusher=e=>{const t=e.target.parentElement.dataset.musherid||e.target.dataset.musherid,{appState:s,raceStore:a}=this.props.stores;s.toggleFocusOnMusher(t);const{focusOnMushers:o}=s,{race:i}=a;i.liveRace>0?a.getRaceTrackerActiveTeams(null,o):a.getWorkoutSummaryActiveTeams(null,o)},this.state=o({},b),this.inputRef={},this.updateTimer={}}componentWillUnmount(){clearTimeout(this.updateTimer.reload),clearTimeout(this.updateTimer.tick)}componentDidMount(){this.loadRace()}componentWillReceiveProps(e){this.props.classid!==e.classid&&this.loadRace(e)}render(){const{userStore:t,raceStore:s,appState:a}=this.props.stores,{classid:o,position:i="right",limit:l=10}=this.props,{user:r={},teams:d=[]}=t,{language:p="en"}=r,{selectedClassIds:b=[],focusOnMushers:g=[]}=a,{race:O={},classes:j=[]}=s,{waypoints:w}=s,v=new Date(O.endDate);v.setHours(v.getHours()+2);const y=O.classes&&O.classes.find(e=>e.id===o)||{};return Object(c.h)(e,null,Object(c.h)("div",{class:"fixed-top "+f.a.hoverElement,style:"height: 100px;"},Object(c.h)("div",{class:""+f.a.hoverelementonly},Object(c.h)("div",{class:"row"},O.classes&&O.classes.sort((e,t)=>e.distance-t.distance).map(t=>Object(c.h)(e,null,Object(c.h)("div",{class:"col"},Object(c.h)("a",{class:`btn btn-block ${t.id===o?"btn-success":"btn-outline-success"} text-nowrap`,style:"text-overflow: ellipsis; overflow: hidden;","data-id":t.id,href:`/tv/top10/${O.id}/${t.id}/${i}`},"Left: ",t.title),Object(c.h)("a",{class:"btn btn-link text-nowrap "+("left"===i?"float-right":"float-left"),style:"text-overflow: ellipsis; overflow: hidden;","data-id":t.id,href:`/tv/top10/${O.id}/${t.id}/${"left"===i?"right":"left"}`},"left"===i?Object(c.h)(e,null,"right ",Object(c.h)("i",{class:"fas fa-angle-right"})):Object(c.h)(e,null,Object(c.h)("i",{class:"fas fa-angle-left"})," left")))))))),Object(c.h)("div",{class:"container-fluid pt-5",style:`margin-bottom: ${m}; margin-top: ${u}; height: calc(100% - ${m} - ${u});`},Object(c.h)("div",{class:"row"},Object(c.h)("div",{class:"left"===i?"col-4 ml-5":"col-4 offset-8 mr-5",style:"font-size: 1.5em; line-height: 1.0em;"},Object(c.h)("table",{class:"table table-sm table-borderless rounded-lg"},Object(c.h)("thead",null,Object(c.h)("tr",null,Object(c.h)("td",{colspan:"3",class:"px-4 py-4 overflow-hidden",style:"background-color: #FB4114; color: #ffffff; border-radius: 10px 0 0 0; font-size: 1.4em;"},Object(c.h)("nobr",null,y.title," / GPS Ranking")),Object(c.h)("td",{class:"px-3 text-center py-4 overflow-hidden",style:"background-color: #FB4114; color: #ffffff; border-radius: 0 10px 0 0 ; font-size: 1.1em;"},"Time"))),Object(c.h)("tbody",{style:' background-color: #1C1F4C; background-image: url("https://themusher.app/assets/tv-single-background.jpg"); background-size: cover !important; background-position: 0 0; '},w&&w.slice(0,l).map((t,s)=>{const{bib:a,flag:o,title:i}=t;return Object(c.h)(e,null,Object(c.h)("tr",{style:"border-bottom: 1px solid #7B312F;"},Object(c.h)("td",{class:"pl-3 pr-1 py-3 text-center",style:"color: #ffffff; font-size: 1.2em;"},Object(c.h)("div",{class:"text-overflow",style:"max-width: 100px; line-height: 1.1em;"},s+1)),Object(c.h)("td",{class:"text-center align-middle ml-0 pl-0",style:"width: 50px; color: #ffffff; font-size: 1.2em; line-height: 1.2em;"},Object(c.h)("div",{class:"d-flex justify-content-start"},Object(c.h)("div",{class:"pl-3 pr-2 w-100 clearfix rounded-pill-right",style:"background-color: "+h.a.getRankingColor(s+1)},a||s+1))),Object(c.h)("td",{class:"px-3 py-3",style:"color: #ffffff; font-size: 1.2em;"},Object(c.h)("div",{class:"text-overflow",style:"max-width: 348px; line-height: 1.1em;"},Object(c.h)("nobr",null,o," ",i,Object(c.h)("br",null)))),Object(c.h)("td",{class:"text-center align-middle",style:"width: 150px; color: #ffffff; font-size: 1.2em;"},Object(c.h)("nobr",null,t.finishTime<9999999999?Object(c.h)(e,null,t.diffToFirstFinishTime>0?Object(c.h)(e,null,n.a.secToHms(t.diffToFirstFinishTime)):Object(c.h)(e,null,h.a.formatDate(n.a.parseInputDate(t.finishTime),{locale:p,day:"numeric",month:"numeric",hour12:!1,hour:"2-digit",minute:"2-digit"}))):Object(c.h)(e,null,Object(c.h)("span",{class:"text-muted"},Object(c.h)("i",{class:"fas fa-compass"}))," ",h.a.windDirection(t.bearing),Object(c.h)("span",{class:"text-muted font-weight-light ml-3"},Object(c.h)("i",{class:"fas fa-tachometer-alt"}))," ",n.a.format(t.speed||0,1)," km/h",Object(c.h)("br",null),Object(c.h)("span",{class:"text-muted font-weight-light"},Object(c.h)("i",{class:"fas fa-flag-checkered"}))," ",n.a.format(t.distanceToFinish,1)," km",t.distanceToFinish!==t.distanceToFirst&&t.distanceToFirst>0&&Object(c.h)(e,null,Object(c.h)("span",{class:"text-muted font-weight-light ml-3"},"1st:")," ",n.a.format(t.distanceToFirst,1)," km"),t.distanceToFinish!==t.distanceToForward&&t.distanceToForward>0&&Object(c.h)(e,null,Object(c.h)("span",{class:"text-muted font-weight-light ml-3"},Object(c.h)("i",{class:"fas fa-arrow-up"}))," ",n.a.format(t.distanceToForward,1)," km"),t.distanceToBehind>0&&Object(c.h)(e,null,Object(c.h)("span",{class:"text-muted font-weight-light ml-3"},Object(c.h)("i",{class:"fas fa-arrow-down"}))," ",n.a.format(t.distanceToBehind,1)," km"))))))})),Object(c.h)("tfoot",null,Object(c.h)("tr",null,Object(c.h)("td",{colspan:"4",class:"px-5 py-4 text-center overflow-hidden",style:"background-color: #FB4114; color: #ffffff; border-radius: 0 0 10px 10px; font-size: 1.1em;"},Object(c.h)("nobr",{class:"mr-4"},"QPaws app"),Object(c.h)("img",{src:"https://themusher.app/assets/appstore-download.png",height:"40",class:"ml-5 mr-1"}),Object(c.h)("img",{src:"https://themusher.app/assets/playstore-download.png",height:"40",class:"mx-1"})))))))))}})||r;t.default=g}.call(this,s("hosL").Fragment)},eT2M:function(e){e.exports={hoverelementonly:"hoverelementonly__3_DrK",hoverElement:"hoverElement__3ED7Q",hoverelementhide:"hoverelementhide__2AP13"}}}]);
//# sourceMappingURL=16.chunk.156ef.esm.js.map