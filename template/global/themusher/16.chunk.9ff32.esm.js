(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{"8Lgr":function(t,e,s){"use strict";(function(t){function r(t){return o.a.format(t,t<5?2:1)}var l,a=s("hosL"),o=s("Utv1"),n=s("/eY4");s("OhSV"),s("ZOvn");let c=Object(n.a)(l=class extends a.Component{render(){const{value:e=0,smallUnit:s}=this.props,{userStore:l}=this.props.stores,{user:o}=l,{settings:n={}}=o;return n.imperial?Object(a.h)(t,null,Object(a.h)("nobr",null,r(function(t){return.621371*t}(e))," ",s?Object(a.h)(t,null,Object(a.h)("small",null,Object(a.h)("small",null,Object(a.h)("small",{class:"ml-0 text-muted"},"mi")))):Object(a.h)(t,null,"mi"))):Object(a.h)(t,null,Object(a.h)("nobr",null,r(e)," ",s?Object(a.h)(t,null,Object(a.h)("small",null,Object(a.h)("small",null,Object(a.h)("small",{class:"ml-0 text-muted"},"km")))):Object(a.h)(t,null,"km")))}})||l;e.a=c}).call(this,s("hosL").Fragment)},QkTp:function(t,e,s){"use strict";(function(t){var r,l=s("hosL"),a=s("Utv1"),o=s("/eY4");s("OhSV"),s("ZOvn");let n=Object(o.a)(r=class extends l.Component{render(){const{value:e=0}=this.props,{userStore:s}=this.props.stores,{user:r}=s,{settings:o={}}=r;return o.imperial?Object(l.h)(t,null,Object(l.h)("nobr",null,a.a.format(function(t){return 9*t/5+32}(e),0),"°F")):Object(l.h)(t,null,Object(l.h)("nobr",null,a.a.format(e,1),"°C"))}})||r;e.a=n}).call(this,s("hosL").Fragment)},UwwE:function(t,e,s){"use strict";(function(t){var r,l=s("hosL"),a=s("Utv1"),o=s("/eY4");s("OhSV"),s("ZOvn");let n=Object(o.a)(r=class extends l.Component{render(){const{value:e=0}=this.props,{userStore:s}=this.props.stores,{user:r}=s,{settings:o={}}=r;return o.imperial?Object(l.h)(t,null,Object(l.h)("nobr",null,a.a.format(function(t){return 2.20462*t}(e),0)," lb")):Object(l.h)(t,null,Object(l.h)("nobr",null,a.a.format(e,0)," kg"))}})||r;e.a=n}).call(this,s("hosL").Fragment)},aMCh:function(t,e,s){"use strict";(function(t){var r,l,a,o=s("hosL"),n=s("Utv1"),c=s("/eY4"),i=(s("OhSV"),s("fh8t"),s("ZOvn"));let h=Object(c.a)(r=class extends o.Component{render(){const{checkpoints:e,thClass:s,thStyle:r,selectedCheckpointId:l,width:a,widthCp:n,onClickCheckpoint:c=(()=>{}),dotColor:i}=this.props;return Object(o.h)(t,null,e&&e.map((e,h)=>Object(o.h)(t,null,h>0&&Object(o.h)("th",{class:s,style:r},Object(o.h)("div",{class:"",style:`width: ${a}px;`}," ")),Object(o.h)("th",{class:s,style:r},Object(o.h)("div",{class:"checkpoint position-relative "+(l===e.id?"text-primary":""),style:`width: ${n}px; font-size: 1.1em;`,onClick:c,"data-id":e.id},Object(o.h)("i",{class:"fas fa-campground"}),Object(o.h)("div",{class:`rounded-pill-both px-1 text-center position-absolute ${i?"":"bg-secondary"} font-weight-bold`,style:"bottom: 0px; right: -20px; font-size: 0.6em; "+(i?`background-color: ${i};`:"")},e.sortOrder&&"n/a"!==e.sortOrder&&Object(o.h)(t,null,e.sortOrder)))))))}})||r,p=Object(c.a)(l=class extends o.Component{render(){const{currentClass:e,contestants:s,limit:r,onClickMusher:l,tdClass:a,tdStyle:c,progressStyle:h,progressbarStyle:p}=this.props,{checkpoints:u=[],results:d=[]}=e,b=s&&r?s.slice(0,r):s,{raceStore:m}=this.props.stores,{sortedContestants:O=[]}=m,f=60*e.requiredRestMinutes,g=Math.floor((new Date).getTime()/1e3,10);return Object(o.h)(t,null,b&&b.map((e,s)=>{let r,b,m,j,v=0,y=0,w=O?O.find(t=>t.bib===parseInt(e.bib,10)):null;return w=w||{},Object(o.h)(t,null,Object(o.h)("tr",{class:"musher",onClick:l,"data-bib":e.bib},Object(o.h)("td",{class:a,style:c},e.startTime?n.a.isoTime(e.startTime):""),u&&u.map((s,l)=>{const n=d.slice().filter(t=>t.checkpoint===s.id).sort((u=["timestamp"],(t,e)=>u.map(s=>{let r=1;return"-"===s[0]&&(r=-1,s=s.substring(1)),t[s]>e[s]?r:t[s]<e[s]?-r:0}).reduce((t,e)=>t||e,0)));var u;const O=n.filter(t=>parseInt(t.bib,10)==e.bib),w=O.find(t=>"out"===t.direction),k=O.find(t=>"in"===t.direction),C=O.find(t=>"scratched"===t.direction),S=n.filter(t=>"in"===t.direction||"scratched"===t.direction).findIndex(t=>parseInt(t.bib,10)==e.bib),x=n.filter(t=>"out"===t.direction).findIndex(t=>parseInt(t.bib,10)==e.bib);let T,R=0;if(!s.isStartLine&&k&&w&&k.timestamp&&w.timestamp&&(R=i.a.deltaSec(k.timestamp,w.timestamp)),y+=R||0,!w&&k&&!s.isStartLine&&s.timeEqualization&&f){const t=i.a.deltaSec(k.timestamp,g);T=(y+t)/f*100,T=T>100?100:T}if(j)return"";if(-1===S){if(r){const l=Math.floor((new Date).getTime()/1e3),n=Math.floor(new Date(r.timestamp).getTime()/1e3),i=Math.floor((l-n)/60);let u=i/s.estTimeToCpMinutes*100;u=u>95?95:u;const d=Object(o.h)(t,null,Object(o.h)("td",{class:"text-center align-middle px-0 pr-1 "+a,style:c},Object(o.h)("div",{class:"progress",style:""+h},Object(o.h)("div",{class:"progress-bar progress-bar-striped",role:"progressbar",style:`width: ${u}%; ${p}`,"aria-valuenow":u,"aria-valuemin":"0","aria-valuemax":"100","data-prevtimestamp":r.timestamp,"data-timeUsedOnStage":i,"data-estTimeToCpMinutesPrev":m,"data-nowEpoch":l,"data-prevCpOutEpoch":n},b+1>0?b+1:"")),e.cpId&&O.length>0&&Object(o.h)(t,null)));return b=x,r=w,m=s.estTimeToCpMinutes,d}return""}v=l,b=x,r=w,m=s.estTimeToCpMinutes;const M=Object(o.h)(t,null,(k||C)&&l>0&&Object(o.h)(t,null,Object(o.h)("td",{class:"text-center align-middle px-0 pr-1 "+a,style:c},Object(o.h)("div",{class:"progress",style:""+h},Object(o.h)("div",{class:"progress-bar",role:"progressbar",style:"width: 100%; "+p,"aria-valuenow":"100","aria-valuemin":"0","aria-valuemax":"100"})),e.cpId&&O.length>0&&Object(o.h)(t,null))),Object(o.h)("td",{class:"text-center align-middle px-0 pr-1 "+a,style:c},Object(o.h)("div",{class:"progress",style:""+h},Object(o.h)("div",{class:`progress-bar ${T>0?"progress-bar-striped":""} ${C?"bg-danger":"bg-success"}`,role:"progressbar",style:`width: ${T||100}%; ${p}`,"aria-valuenow":T,"aria-valuemin":"0","aria-valuemax":"100"},C?Object(o.h)("i",{class:"fas fa-times"}):Object(o.h)(t,null,S+1>0?S+1:""))),e.cpId&&O.length>0&&Object(o.h)(t,null)));return j=C,M}),Object(o.h)("td",{colspan:2*u.length-v,class:a,style:c},Object(o.h)("div",{class:"d-flex flex-nowrap"},Object(o.h)("div",{class:"text-white font-weight-bolder pl-2 pr-1 py-0 rounded-pill-left rounded-none mr-2",style:`background-color: ${i.a.getRankingColor(s+1)}; width: 45px;`},e.bib),Object(o.h)("div",null,Object(o.h)("nobr",null,e.flag," ",e.lastname))))))}))}})||l,u=Object(c.a)(a=class extends o.Component{componentWillReceiveProps(t){if(this.props.currentClass.id!==t.currentClass.id||this.props.reloadLastEpoch!==t.reloadLastEpoch){const{currentClass:t}=this.props,{raceStore:e}=this.props.stores,{checkpoints:s=[],contestants:r=[],results:l=[],sortOrderResults:a,startDate:o}=t;e.sortContestantsByResult({contestants:r,results:l,checkpoints:s,sortOrderResults:a,startDate:o})}}componentDidMount(){const{currentClass:t}=this.props,{raceStore:e}=this.props.stores,{checkpoints:s=[],contestants:r=[],results:l=[],sortOrderResults:a,startDate:o}=t;e.sortContestantsByResult({contestants:r,results:l,checkpoints:s,sortOrderResults:a,startDate:o})}render(){const{currentClass:e,onClickMusher:s=(()=>{}),onClickCheckpoint:r=(()=>{}),selectedCheckpointId:l,limit:a=100,tableClass:n="table-striped table-sm",thClass:c,thStyle:i,tdClass:u,tdStyle:d,progressStyle:b="height: 20px;",progressbarStyle:m}=this.props,{checkpoints:O=[]}=e,{raceStore:f}=this.props.stores,{sortedContestants:g=[]}=f;return Object(o.h)(t,null,Object(o.h)("div",{class:"table-responsive"},Object(o.h)("table",{class:"table "+n},Object(o.h)("thead",null,Object(o.h)("tr",null,Object(o.h)("th",{class:c,style:i},Object(o.h)("div",{class:"",style:"width: 40px;"},Object(o.h)("i",{class:"fas fa-flag"}))),Object(o.h)(h,{stores:this.props.stores,checkpoints:O,thClass:c,thStyle:i,selectedCheckpointId:l,width:40,widthCp:20,onClickCheckpoint:r,dotColor:"#808080"}),Object(o.h)("th",{class:c,style:i},Object(o.h)("div",{class:"",style:"width: 20px;"},Object(o.h)("i",{class:"fas fa-flag-checkered"}))))),Object(o.h)("tbody",null,Object(o.h)(p,{stores:this.props.stores,currentClass:e,contestants:g,limit:a,onClickMusher:s,tdClass:u,tdStyle:d,progressStyle:b,progressbarStyle:m})))))}})||a;e.a=u}).call(this,s("hosL").Fragment)},eT2M:function(t){t.exports={hoverelementonly:"hoverelementonly__3_DrK",hoverElement:"hoverElement__3ED7Q",hoverelementhide:"hoverelementhide__2AP13"}},irB3:function(t,e,s){"use strict";(function(t){var r,l=s("hosL"),a=s("Utv1"),o=s("/eY4");s("OhSV"),s("ZOvn");let n=Object(o.a)(r=class extends l.Component{render(){const{value:e=0,smallUnit:s}=this.props,{userStore:r}=this.props.stores,{user:o}=r,{settings:n={}}=o;return n.imperial?Object(l.h)(t,null,Object(l.h)("nobr",null,a.a.format(function(t){return 3.28084*t}(e),0)," ",s?Object(l.h)(t,null,Object(l.h)("small",null,Object(l.h)("small",null,Object(l.h)("small",{class:"ml-0 text-muted"},"ft")))):Object(l.h)(t,null,"ft"))):Object(l.h)(t,null,Object(l.h)("nobr",null,a.a.format(e,0)," ",s?Object(l.h)(t,null,Object(l.h)("small",null,Object(l.h)("small",null,Object(l.h)("small",{class:"ml-0 text-muted"},"m")))):Object(l.h)(t,null,"m")))}})||r;e.a=n}).call(this,s("hosL").Fragment)},n9CS:function(t,e,s){"use strict";s.r(e),function(t){function r(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,r)}return s}function l(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}var a,o=s("hosL"),n=(s("QRet"),s("Utv1"),s("/eY4")),c=(s("OhSV"),s("Y3FI"),s("fh8t"),s("go65"),s("zYNi"),s("aMCh")),i=s("ZOvn"),h=s("eT2M"),p=s.n(h);const u=i.a.marginTop(!1),d=(i.a.marginTopBack(!1),i.a.marginBottom()),b=(i.a.subMenuMarginTop(),{});let m=Object(n.a)(a=class extends o.Component{constructor(t){var e;super(t),e=this,this.loadLiveRaceResults=async function(t=e.props,{teamIds:s,focusOnMushers:r,bibs:l,classid:a}){const{raceStore:o,userStore:n}=t.stores,{race:c}=o,{historyPointIndex:i,replayHistory:h,timerRunning:p}=e.state,{showDrawerReplay:u}=e.props,d=o.getClassById(a)||{},{isAdmin:b}=n;await o.getRaceTrackerData(c.raceTrackerRace,{history:h||u,bibs:l,classid:a,startDate:d.startDate,endDate:d.endDate,isAdmin:b}),o.getRaceTrackerActiveTeams(s,r,l,i),p&&(clearTimeout(e.updateTimer.reload),e.updateTimer.reload=setTimeout(()=>{console.log("loadLiveRaceResults.reloading...");const t=Math.floor((new Date).getTime()/1e3);e.setState({reloadLastEpoch:t}),e.loadLiveRaceResults(e.props,{teamIds:s,focusOnMushers:r,bibs:l,classid:a})},6e4))},this.loadRaceResults=async function(t=e.props,s,r){const{raceStore:l}=t.stores,{raceid:a}=t;await l.loadWorkoutSummary(s,a),l.getWorkoutSummaryActiveTeams(s,r)},this.loadRace=async function(t=e.props){try{e.setState({isLoading:!0});const{raceStore:s,appState:r}=t.stores,{raceid:l,classid:a}=t;await s.load(l);const{race:o}=s,{focusOnMushers:n}=r,{selectedClassIds:c=[]}=r,i=a||c[0];a&&r.toggleSelectedClassId(a,!0);const h=o.classes.filter(t=>t.id===i).filter(t=>t.contestants&&t.contestants.length>0).map(t=>t.contestants.filter(t=>t.team>0).map(t=>t.team)).flat(),p=o.classes.filter(t=>t.id===i).filter(t=>t.contestants&&t.contestants.length>0).map(t=>t.contestants.filter(t=>t.bib>0).map(t=>t.bib)).flat();h.length>0&&await s.loadTeams(h.join(",")),o.liveRace>0?await e.loadLiveRaceResults(e.props,{teamIds:h,focusOnMushers:n,bibs:p,classid:i}):await e.loadRaceResults(e.props,h,n),s.getAllClassesSortedBy(),e.setState({isLoading:!1})}catch(t){console.log(t)}},this.toggleFocusOnMusher=t=>{const e=t.target.parentElement.dataset.musherid||t.target.dataset.musherid,{appState:s,raceStore:r}=this.props.stores;s.toggleFocusOnMusher(e);const{focusOnMushers:l}=s,{race:a}=r;a.liveRace>0?r.getRaceTrackerActiveTeams(null,l):r.getWorkoutSummaryActiveTeams(null,l)},this.toggleBib=()=>{const{bib:t}=this.state,{appState:e,raceStore:s}=this.props.stores,r=s.getMusherByBibId(t);e.toggleFocusOnMusher(r.id);const{focusOnMushers:l}=e,{race:a}=s;a.liveRace>0?s.getRaceTrackerActiveTeams(null,l):s.getWorkoutSummaryActiveTeams(null,l)},this.checkForEnter=t=>{"Enter"===t.key&&this.toggleBib()},this.toggleShowDrawerReplay=()=>{const{showDrawerReplay:t}=this.state;this.setState({showDrawerReplay:!t})},this.back=()=>{const{history:t}=this.props.stores;t.goBack()},this.state=function(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?r(Object(s),!0).forEach((function(e){l(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):r(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}({},b),this.updateTimer={}}componentWillUnmount(){clearTimeout(this.updateTimer.reload),clearTimeout(this.updateTimer.tick)}componentDidMount(){this.loadRace()}componentWillReceiveProps(t){this.props.classid!==t.classid&&this.loadRace(t)}render(){const{userStore:e,raceStore:s,appState:r}=this.props.stores,{user:l={},teams:a=[]}=e,{classid:n,position:i="right",limit:h=10}=this.props,{focusOnMushers:b=[]}=r,{race:m}=s,O=s.getClassById(n);return Object(o.h)(t,null,Object(o.h)("div",{class:"fixed-top "+p.a.hoverElement,style:"height: 100px;"},Object(o.h)("div",{class:""+p.a.hoverelementonly},Object(o.h)("div",{class:"row"},m.classes&&m.classes.sort((t,e)=>t.distance-e.distance).map(e=>Object(o.h)(t,null,Object(o.h)("div",{class:"col text-center"},Object(o.h)("a",{class:`btn btn-block ${e.id===n?"btn-success":"btn-outline-success"} text-nowrap`,style:"text-overflow: ellipsis; overflow: hidden;","data-id":e.id,href:`/tv/top10progress/${m.id}/${e.id}/${i}`},e.title),Object(o.h)("a",{class:"btn btn-link text-nowrap text-center",style:"text-overflow: ellipsis; overflow: hidden;","data-id":e.id,href:`/tv/top10progress/${m.id}/${e.id}/center`},"center"),Object(o.h)("a",{class:"btn btn-link text-nowrap "+("left"===i?"float-right":"float-left"),style:"text-overflow: ellipsis; overflow: hidden;","data-id":e.id,href:`/tv/top10progress/${m.id}/${e.id}/${"left"===i?"right":"left"}`},"left"===i?Object(o.h)(t,null,"right ",Object(o.h)("i",{class:"fas fa-angle-right"})):Object(o.h)(t,null,Object(o.h)("i",{class:"fas fa-angle-left"})," left")))))))),Object(o.h)("div",{class:"container-fluid",style:`margin-bottom: ${d}; margin-top: ${u};`},Object(o.h)("div",{class:"row"},Object(o.h)("div",{class:"center"===i?"offset-1 col-10":"left"===i?"col-4 ml-5":"col-4 offset-8 mr-5"},Object(o.h)("div",{class:"px-4 py-2 overflow-hidden",style:" background-color: #FB4114;  color: #ffffff;  border-radius: 10px 10px 0 0;  font-size: 1.8em; "},Object(o.h)("span",{class:"float-right font-weight-light"},O.title),"Race standing"),Object(o.h)("div",{class:"mr-5 p-0 position-relative w-100",style:' background: rgba(0, 0, 0, 0.3); background-color: #1C1F4C; background-image: url("https://themusher.app/assets/tv-single-background.jpg"); background-size: cover !important; background-position: 0 0;     '},O&&O.id&&Object(o.h)(c.a,{stores:this.props.stores,race:m,currentClass:O,key:"raceclass-"+O.id,onClickMusher:this.toggleDrawerMusher,onClickCheckpoint:this.toggleDrawerCheckpoint,limit:h,tableClass:"",tdClass:"",tdStyle:"color: #ffffff; font-size: 1.5em;",thStyle:"color: #ffffff; font-size: 1.5em;",progressStyle:"height: 30px;",progressbarStyle:"font-size: 1.5em;"})),Object(o.h)("div",{class:"px-4 py-2 overflow-hidden text-center",style:" background-color: #FB4114;  color: #ffffff;  border-radius: 0 0 10px 10px; font-size: 1.4em; "},Object(o.h)("nobr",{class:"mr-4"},"QPaws app"),Object(o.h)("img",{src:"https://themusher.app/assets/appstore-download.png",height:"40",class:"ml-5 mr-1"}),Object(o.h)("img",{src:"https://themusher.app/assets/playstore-download.png",height:"40",class:"mx-1"}))))))}})||a;e.default=m}.call(this,s("hosL").Fragment)},nHdA:function(t,e,s){"use strict";(function(t){var r,l=s("hosL"),a=s("Utv1"),o=s("/eY4"),n=s("OhSV");s("ZOvn");let c=Object(o.a)(r=class extends l.Component{render(){const{value:e=0,smallUnit:s}=this.props,{userStore:r}=this.props.stores,{user:o}=r,{settings:c={}}=o;return c.imperial?Object(l.h)(t,null,Object(l.h)("nobr",null,a.a.format(function(t){return.621371*t}(e),1)," ",s?Object(l.h)(t,null,Object(l.h)("small",null,Object(l.h)("small",null,Object(l.h)("small",{class:"ml-0 text-muted"},Object(l.h)(n.c,{id:"workouts.mph"},"mph"))))):Object(l.h)(t,null,Object(l.h)(n.c,{id:"workouts.mph"},"mph")))):Object(l.h)(t,null,Object(l.h)("nobr",null,a.a.format(e,1)," ",s?Object(l.h)(t,null,Object(l.h)("small",null,Object(l.h)("small",null,Object(l.h)("small",{class:"ml-0 text-muted"},Object(l.h)(n.c,{id:"workouts.kmt"},"km/t"))))):Object(l.h)(t,null,Object(l.h)(n.c,{id:"workouts.kmt"},"km/t"))))}})||r;e.a=c}).call(this,s("hosL").Fragment)}}]);
//# sourceMappingURL=16.chunk.9ff32.esm.js.map