{"version":3,"sources":["webpack:///./components/imageSlider/index.js","webpack:///./components/workout/summary.js","webpack:///./components/dog/status.js","webpack:///./components/workout/index.js","webpack:///./components/modal/index.js","webpack:///./components/dog/scroller.js","webpack:///./components/gauge/style.css","webpack:///./routes/home/todo.js","webpack:///./components/gauge/index.js","webpack:///./components/dog/history.js"],"names":["observer","Component","constructor","props","super","touchStart","e","stopPropagation","this","setState","startX","touches","pageX","touchEnd","undefined","sliding","touchMove","totalImages","state","scrollDistance","x","prevImage","nextImage","images","imageContainer","currentImage1","currentImage2","currentIdx","length","imageDots","Array","fill","map","y","nextImageContainer","nextIdx","componentWillReceiveProps","nextProps","nextImages","render","img","curImage","htmlImageRatio","height","width","imgHeight","imgWidth","dimensions","orientation","imageRatio","class","style","onTouchstart","onTouchend","onTouchmove","loading","src","s3LargeLink","ref","c","image1","image2","i","summary","week","year","count","util","format","distanceKm","elevation","secToHms","duration","speedAvg","Dog","dog","showWorkout","showInfo","hideTeam","fullWidth","daysBack","filterBy","userStore","dogStore","workoutPlanStore","stores","user","language","dogStatus","findDogstatus","status","dogStatuses","statuses","dogPosition","findDogposition","position","workoutSummary","findCurrentWorkoutSummary","id","currentWeek","getWeek","Date","currentYear","getYear","currentMonth","getMonth","seasonStart","parseInt","planWeek","sumWorkoutPlanDaysBack","completedWeek","hasBirthday","mu","birth","hasWorkoutPlan","percentComplete","image","s3SmallLink","ucfirst","name","key","radius","heightAdd","showPercentText","percent","prefix","total","totalY","completed","completedY","age","deceased","gender","href","shortname","findTeam","team","positions","lead","point","wheel","weight","bodyScore","icon","specialNeeds","getWorkoutColor","workout","type","getWorkoutIcon","MAX_LOADINDEX","getMaxLoadIndex","initialState","showAddComment","viewImageIdx","likeWorkout","Workout","toggleDate","preventDefault","showDate","async","workoutStore","workoutId","setTimeout","toggleAddComment","target","parentElement","dataset","inputRef","focus","viewImage","idx","closest","shareLink","url","title","text","appState","shareUrl","onTeamClick","teamid","showTeam","onUserClick","onDogClick","dogid","dogs","showDog","hideDog","updateTimer","forceShowDate","wrapperClasses","wrapperClassesRow","viewmode","hasShareApi","allDogs","intensity","findIntensity","code","teamName","teamNames","push","teams","forEach","likes","comments","hasLikedWorkout","findIndex","gpxInfo","mushers","loadIndex","workoutEquipment","findEquipment","equipment","workoutEquipmentIcon","field","musherImages","slice","musher","u","findPublicUser","publicUser","mapImage","imgs","toJS","batteryUsage","battegryLevelStart","battegryLevelEnd","views","getViews","statistics","marginTop","marginBottom","back","temperature","value","isLocked","isInProgress","role","date","onClick","formatDate","locale","hour12","hour","minute","formatDistance","getLoadIndexColor","normalizeBetween","Math","floor","getLoadIndexText","garminId","stravaId","track","dogsLeft","dogsRight","sledWeight","indexOf","kcalBurnedTotal","kcalMeatGramsTotal","kcalSalmonGramsTotal","kcalFatGramsTotal","description","markdown","replaceImages","comment","markdownOpts","getMarkdownOptions","avgGpsMovingSpeed","dblClick","likeRef","data-id","data-url","uuidv4","data-title","rel","data-native","inputRefObject","col","offset","compact","object","isTeamAdmin","isAdmin","Modal","startY","pageY","readyToRefresh","close","refreshing","appContainer","scrollTop","imagexxl","thumb","download","DogScroller","scrollImages","scrollLeft","clientWidth","imageIdx","nearestInt","round","diff","abs","Number","isInteger","sortByName","a","b","dogA","find","dogB","size","onScroll","sort","dogId","filter","d","className","showName","showPosition","module","exports","MARGIN_TOP","MARGIN_BOTTOM","SUB_MENU_MARGIN_TOP","subMenuMarginTop","isLoading","Home","loadDogs","currentTeam","load","query","addData","componentDidMount","loadAll","darkmode","dogsMaturity","findDogsByStatus","dogsWithStatus","dogsWithNeeds","findDogsWithNeeds","mouseData","Gauge","svgRef","color","showCenterText","centerText","centerTextSize","centerTextX","centerTextY","totalX","totalTextAnchor","completedX","completedTextAnchor","strokeWidth","innerRadius","strokeWidthGauge","circumference","PI","arc","dashArray","transform","min","max","textSize","textSizeSmall","xmlns","svg","preserveAspectRatio","gaugeBackground","cx","cy","r","strokeDasharray","strokeLinecap","gauge","stroke","strokeDashoffset","transition","gaugeText","dominant-baseline","text-anchor","font-size","secondary","VACCINE_TYPES","getVaccineTypes","DogHistoryLine","showModal","displayModal","currentImage","currentImageXXL","closeModal","eventFired","diffY","diffX","deleteVerify","reset","deleted","deleteHistoryRequest","deleteHistory","line","save","$pull","history","_id","swipeLeft","HISTORY_TYPE_MAP","getHistoryMap","hasImage","isBeeingEdited","hoverElement","hoverelementonly","grouped","dogImage","dogShortname","dogName","el","endDate","historyType","vaccineType","email","cost"],"mappings":"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","file":"70.chunk.2e208.esm.js","sourcesContent":["import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\n\n@observer\nclass ImageSlider extends Component {\n    constructor(props) {\n        super(props);\n        const { images = [] } = props;\n        this.state = {\n            imageContainer: 1,\n            currentImage1: images[0] || {},\n            currentImage2: {},\n            currentIdx: 0,\n            totalImages: images.length || 0,\n            imageDots: [...Array(images.length || 0).fill(1).map((x, y) => x + y)],\n        };\n    }\n\n    nextImage() {\n        // console.log('next');\n        const { images } = this.props;\n        const { totalImages, currentIdx, imageContainer } = this.state;\n        const nextImageContainer = imageContainer === 1 ? 2 : 1;\n        let nextIdx = currentIdx + 1;\n        if (nextIdx > totalImages -1) {\n            nextIdx = 0;\n        }\n        this.setState({\n            [`currentImage${nextImageContainer}`]: images[nextIdx],\n            currentIdx: nextIdx,\n            imageContainer: nextImageContainer,\n        });\n    }\n\n    prevImage() {\n        // console.log('prev');\n        const { images } = this.props;\n        const { totalImages, currentIdx, imageContainer } = this.state;\n        const nextImageContainer = imageContainer === 1 ? 2 : 1;\n        let nextIdx = currentIdx - 1;\n        if (nextIdx < 0) {\n            nextIdx = totalImages - 1;\n        }\n        this.setState({\n            [`currentImage${nextImageContainer}`]: images[nextIdx],\n            currentIdx: nextIdx,\n            imageContainer: imageContainer === 1 ? 2 : 1,\n        });\n    }\n\n    touchStart = (e) => {\n        e.stopPropagation();\n        this.setState({\n            startX: e.touches[0].pageX,\n        })\n    }\n\n    touchEnd = (e) => {\n        e.stopPropagation();\n        this.setState({\n            startX: undefined,\n            sliding: false,\n        })\n    }\n\n    touchMove = (e) => {\n        e.stopPropagation();\n        // e.preventDefault();\n        const { totalImages } = this.state;\n        if (totalImages > 1) {\n            const { startX, sliding } = this.state;\n            const scrollDistance = 50;\n            const x = e.touches[0].pageX;\n            if (!sliding) {\n                if (x > startX + scrollDistance) {\n                    this.setState({ sliding: true })\n                    this.prevImage();\n                } else if (x < startX - scrollDistance) {\n                    this.setState({ sliding: true })\n                    this.nextImage();\n                }\n            }\n        }\n    }\n\n    componentWillReceiveProps(nextProps) {\n        // console.log('componentWillReceiveProps', nextProps);\n        if (nextProps.images !== this.props.images) {\n            const { images: nextImages = [] } = nextProps;\n            this.setState({\n                imageContainer: 1,\n                currentImage1: nextImages.length > 0 ? nextImages[0] : {},\n                currentImage2: {},\n                currentIdx: 0,\n                totalImages: nextImages.length || 0,\n                imageDots: [...Array(nextImages.length || 0).fill(1).map((x, y) => x + y)],\n            });\n        }\n    }\n\n    render() {\n        const { currentImage1, currentImage2, imageContainer, totalImages, imageDots, currentIdx } = this.state;\n        const img = this[`image${imageContainer}`];\n        const curImage = imageContainer === 1 ? currentImage1 : currentImage2;\n        const htmlImageRatio = img && img.height ? img.width / img.height : 4 / 3;\n        let imgHeight;\n        let imgWidth;\n        if (curImage.dimensions) {\n            const { width, height, orientation } = curImage.dimensions;\n            if (orientation > 4 && orientation < 9) {\n                imgHeight = width;\n                imgWidth = height;\n            } else {\n                imgHeight = height;\n                imgWidth = width;\n            }\n        }\n        const imageRatio = curImage.dimensions ? imgWidth / imgHeight : htmlImageRatio;\n        if (totalImages <= 0) {\n            return '';\n        }\n\n        return (\n            <div class='w-100'>\n                <div class='border rounded position-relative w-100'\n                    style={`height: calc(85vw / ${imageRatio}); overflow: hidden; transition: all .3s ease-in-out;`}\n                    onTouchstart={this.touchStart}\n                    onTouchend={this.touchEnd}\n                    onTouchmove={this.touchMove}\n                >\n                    {totalImages > 1 && <span class='position-absolute' style='top:0px; right: 5px; z-index: 2000;'><small>{currentIdx + 1}/{totalImages}</small></span>}\n                    {currentImage1 && <div class='position-absolute' style={`${imageContainer === 1 ? 'opacity: 1;' :  'opacity: 0;'} transition: all .3s ease-in-out; top: 0; left: 0;`}>\n                        <img loading='lazy' src={currentImage1.s3LargeLink}\n                            class='img-fluid align-middle'\n                            ref={c => this.image1 = c}\n                        />\n                    </div>}\n                    {currentImage2 && <div class='position-absolute' style={`${imageContainer === 2 ? 'opacity: 1;' :  'opacity: 0;'} transition: all .3s ease-in-out; top: 0; left: 0;`}>\n                        <img loading='lazy' src={currentImage2.s3LargeLink}\n                            class='img-fluid align-middle'\n                            ref={c => this.image2 = c}\n                        />\n                    </div>}\n                </div>\n                {imageDots.length > 1 && <div class='w-100 text-center'>{imageDots.map(i => <span style={`color: ${i === currentIdx + 1 ? '#ffffff' : '#808080'};`}>&bull;</span>)}</div>}\n            </div>\n        );\n    }\n}\n\nexport default ImageSlider;\n","import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport { Text, Localizer, withText } from 'preact-i18n';\n\n@observer\nclass WorkoutSummary extends Component {\n    render() {\n        const { summary = {} } = this.props;\n\n        return (\n            <div class='w-100 mb-3'>\n                <div class='row'>\n                    <div class='col-12 col-sm-8 col-lg-6 offset-sm-2 offset-lg-3 d-flex mb-0 position-relative'>\n                        {/* {JSON.stringify(workout, null, 4)} */}\n                        <div class={`text-center border rounded-circle imageRounded`}>\n                            <div class={`text-muted mt-2`} style='font-size: 40px; line-height: 1;'>{summary.week}</div>\n                            <div class={`text-muted`} style='font-size: 10px; line-height: 0.8em;'>{summary.year}</div>\n                        </div>\n                        <div class='flex-grow-1 pl-3'>\n                            <h5 class='my-0'>{summary.week} - {summary.year}</h5>\n                            <small class='text-muted'>\n                                <i class='fas fa-wave-square' /> {summary.count}\n                                <i class='fas fa-road ml-2' /> {util.format(summary.distanceKm, 0)}km\n                                <i class='fas fa-mountain ml-2' /> {util.format(summary.elevation, 0)}m\n                                <i class='fas fa-stopwatch ml-2' /> {util.secToHms(summary.duration)}\n                                <i class='fas fa-tachometer-alt ml-2' /> {util.format(summary.speedAvg, 1)}km/t\n                            </small>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        );\n    }\n}\n\nexport default WorkoutSummary;\n","import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport { toJS } from 'mobx';\nimport { Text, Localizer, withText } from 'preact-i18n';\n\nimport Gauge from '../gauge';\n\nimport mu from '../../lib/musher-util';\n\n// const STOP_STATUSES = [2, 9];\n// const WARN_STATUSES = [4, 8];\n\nfunction getFatigueLevel(wo, dog) {\n    return 'secondary';\n    // if (dog) {\n    //     if (STOP_STATUSES.indexOf(dog.status) > -1) {\n    //         return 'danger';\n    //     } else if (WARN_STATUSES.indexOf(dog.status) > -1) {\n    //         return 'warning';\n    //     }\n    // }\n    // if (wo) {\n    //     if (wo.distanceKm > 50) {\n    //         return 'danger';\n    //     } else if (wo.distanceKm > 30) {\n    //         return 'warning';\n    //     }\n    // }\n    // return 'success';\n}\n\n@observer\nclass Dog extends Component {\n    render() {\n        const { dog, showWorkout, showInfo, hideTeam = false, fullWidth = false, daysBack = 7, filterBy = '' } = this.props;\n\t\tconst { userStore, dogStore, workoutPlanStore } = this.props.stores;\n        if (!dog) {\n            return '';\n        }\n        const { isAdmin, user } = userStore;\n        const { language = 'en' } = user;\n\n        const dogStatus = userStore.findDogstatus({ status: dog.status, language });\n        const dogStatuses = dog.statuses ? dog.statuses.map(e => userStore.findDogstatus({ status: e, language })) : [];\n\n        const dogPosition = userStore.findDogposition({ position: dog.position, language });\n\n        const workoutSummary = dogStore.findCurrentWorkoutSummary(dog.id) || {};\n\n        const currentWeek = util.getWeek(new Date());\n\t\tconst currentYear = util.getYear();\n        const currentMonth = new Date().getMonth() + 1;\n        const seasonStart = parseInt(currentMonth < 8 ? currentYear - 1 : currentYear, 10);\n\t\tconst { week = currentWeek, year = seasonStart } = this.props;\n\t\tconst planWeek = workoutPlanStore.sumWorkoutPlanDaysBack(parseInt(year, 10), parseInt(week, 10), daysBack) || 0;\n        const completedWeek = util.format(workoutSummary.distanceKm || 0, 0);\n        const hasBirthday = mu.hasBirthday(dog.birth);\n\n        let hasWorkoutPlan = false;\n        let percentComplete = 0;\n        if (completedWeek && planWeek) {\n            percentComplete = completedWeek / planWeek * 100;\n            hasWorkoutPlan = true;\n        }\n        return (\n                    <div class={`${fullWidth ? '' : 'col-4'} mb-3 ${hasWorkoutPlan ? 'mt-2' : ''} position-relative`}>\n                        {/* {JSON.stringify(dog, null, 4)} */}\n                        <div\n                            class={`text-center border border-${getFatigueLevel(workoutSummary, dog)} rounded-circle imageRounded mx-auto text-muted pt-2 position-relative`}\n                            style={`${dog.image ? `background-image: url(\"${dog.image.s3SmallLink}\"); background-size: cover;` : ''} border-width: 2px !important;`}\n                        >\n                            {/* {!dog.image && <i class='fas fa-dog mt-3' style='font-size: 40px;' />} */}\n                            {!dog.image && <span class='font-weight-lighter' style='font-size: 35px;'>{util.ucfirst(dog.name, true)}</span>}\n                            {hasWorkoutPlan && <div class='position-absolute' style='top: -12px; left: -12px;'>\n                                <Gauge key={`gauge-${percentComplete}`}\n                                    radius={48} \n                                    heightAdd={15}\n                                    showPercentText={false}\n                                    percent={percentComplete}\n                                    prefix='%'\n                                    total={`${planWeek} km`}\n                                    totalY='95%'\n                                    completed={`${completedWeek} km`}\n                                    completedY='85%'\n                                />\n                            </div>}\n                        </div>\n                        <div class={`${hasWorkoutPlan ? 'mt-4' : ''}`} style='line-height: 1.0em;'>\n                            <small>\n                                <span class='float-right'>\n                                    {dog.birth && <span class='mr-2'>{util.age(dog.birth, dog.deceased)}</span>}\n                                    {dog.gender === 'female' ? <i class='fas fa-venus' /> : <i class='fas fa-mars' />}\n                                </span>\n                                <a class='stretched-link' href={`/dogs/${dog.id}`}>\n                                    <h5 class='mb-1 font-weight-light' style='line-height: 1.0em; font-size: 1.3em;'>\n                                        {dog.shortname || dog.name}\n                                        {hasBirthday && <>\n                                            <i class='fas fa-birthday-cake ml-3' />\n                                        </>}\n                                    </h5>\n                                </a>\n                                {!hideTeam && <><span class='font-weight-light'>{userStore.findTeam(dog.team)}</span><br /></>}\n                            </small>\n\n                                {filterBy && dog.positions && dog.positions.lead && <div class=''>\n                                    {filterBy === 'leadOnly' && dog.positions.lead.distanceKm > 0 && <span class='badge badge-success mr-2'>\n                                        <span><Text id='dogs.sort-lead'>Lead</Text>:</span> {util.format(dog.positions.lead.distanceKm, 0)} km\n                                    </span>}\n                                    {filterBy === 'pointOnly' && dog.positions.point.distanceKm > 0 && <span class='badge badge-success mr-2'>\n                                        <span><Text id='dogs.sort-point'>Point</Text>:</span> {util.format(dog.positions.point.distanceKm, 0)} km\n                                    </span>}\n                                    {filterBy === 'teamOnly' && dog.positions.team.distanceKm > 0 && <span class='badge badge-success mr-2'>\n                                        <span><Text id='dogs.sort-team'>Team</Text>:</span> {util.format(dog.positions.team.distanceKm, 0)} km\n                                    </span>}\n                                    {filterBy === 'wheelOnly' && dog.positions.wheel.distanceKm > 0 && <span class='badge badge-success mr-2'>\n                                        <span><Text id='dogs.sort-wheel'>Wheel</Text>:</span> {util.format(dog.positions.wheel.distanceKm, 0)} km\n                                    </span>}\n                                </div>}\n\n                            <small>\n                                {showWorkout && <small class='text-muted'>\n                                    {workoutSummary && workoutSummary.distanceKm > 0 && <span class='mr-2'><i class='fas fa-road' /> {util.format(workoutSummary.distanceKm, 0)}km</span>}\n                                    {workoutSummary && workoutSummary.elevation > 0 && <span class='mr-2'><i class='fas fa-mountain' /> {util.format(workoutSummary.elevation, 0)}m</span>}\n                                    {workoutSummary && workoutSummary.duration > 0 && <span class='mr-2'><i class='fas fa-clock' /> {util.secToHms(workoutSummary.duration, true)}</span>}\n                                    {workoutSummary && workoutSummary.speedAvg > 0 && <span class='mr-2'><i class='fas fa-tachometer-alt' /> {util.format(workoutSummary.speedAvg, 1)}km/t</span>}\n                                </small>}\n\n                                {showInfo && <small class='text-muted'>\n                                    {dog.weight && <><i class='fas fa-balance-scale ml-2' /> {util.format(dog.weight, 1)} kg</>}\n                                    {dog.bodyScore && <><i class='fas fa-dog ml-2' /> {util.format(dog.bodyScore, 1)}</>}\n                                </small>}\n\n                                <div class='clearfix pb-0 pt-1'>\n                                    {dogPosition && dogPosition.class && <span class={`badge badge-${dogPosition.class || 'primary'} mr-2`}>{dogPosition.icon && <i class={dogPosition.icon} />} {dogPosition.name}</span>}\n                                    {dog.specialNeeds && <span class={`badge badge-warning mr-2`}><i class='fas fa-exclamation-triangle' /> {dog.specialNeeds}</span>}\n                                    {dogStatus && dogStatus.class && <span class={`badge badge-${dogStatus.class} mr-2 mt-1`}>{dogStatus.icon && <i class={dogStatus.icon} />} {dogStatus.name}</span>}\n                                    {dogStatuses && dogStatuses.map(status => <>\n                                        {status && status.class && <span class={`badge badge-${status.class} mr-2 mt-1`}>{status.icon && <i class={status.icon} />} {status.name}</span>}\n                                    </>)}\n                                </div>\n                            </small>\n                        </div>\n                    </div>\n        );\n    }\n}\n\nexport default Dog;\n","import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport { toJS } from 'mobx';\nimport { Text, Localizer, withText } from 'preact-i18n';\nimport Markdown from 'preact-markdown';\n\nimport Modal from '../modal';\nimport WorkoutComments from '../../components/workout/comments';\nimport WorkoutAddComment from '../../components/workout/commentAdd';\nimport ImageScroller from '../../components/imageScroller';\nimport DogScroller from '../../components/dog/scroller';\n\nimport Overlay from '../../components/overlay/';\nimport TeamsPublicDetail from '../../routes/teams/publicDetail';\nimport DogPublicDetail from '../../routes/dogs/publicDetail';\n\nimport LikesAndComments from '../../components/feedback/likesAndComments';\nimport Views from '../../components/feedback/views';\n\nimport Speed from '../../components/data/speed';\nimport Elevation from '../../components/data/elevation';\nimport Weight from '../../components/data/weight';\nimport Distance from '../../components/data/distance';\nimport Temperature from '../../components/data/temperature';\n\nimport mu from '../../lib/musher-util';\n\nconst MAX_LOADINDEX = mu.getMaxLoadIndex();\n\nfunction getWorkoutColor(workout) {\n\tswitch (workout.type) {\n\t\tcase 1:\n\t\t\treturn 'border-primary';\n\t\tcase 2:\n\t\t\treturn 'border-danger';\n\t\tcase 3:\n\t\t\treturn 'border-success';\n\t\tcase 4:\n\t\t\treturn 'border-info';\n\t\tdefault:\n\t\t\treturn 'border-warning';\n\t}\n}\n\nfunction getWorkoutIcon(workout) {\n\tswitch (workout.type) {\n\t\tcase 1:\n\t\t\treturn 'fas fa-running';\n\t\tcase 2:\n\t\t\treturn 'fas fa-flag-checkered';\n\t\tcase 3:\n\t\t\treturn 'fas fa-hiking';\n\t\tcase 4:\n\t\t\treturn 'fas fa-futbol';\n\t\tdefault:\n\t\t\treturn 'fas fa-hiking';\n\t}\n}\n\nfunction displayDistance(distanceKm) {\n\tif (distanceKm < 5) {\n\t\treturn util.format(distanceKm, 2);\n\t}\n\tif (distanceKm < 10) {\n\t\treturn util.format(distanceKm, 1);\n\t}\n\treturn util.format(distanceKm, 1);\n}\n\nconst initialState = {\n\tshowAddComment: false,\n    viewImageIdx: {},\n    likeWorkout: {},\n};\n\n@observer\nclass Workout extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            ...initialState,\n        };\n        this.updateTimer = {};\n\t\tthis.inputRef = {};\n    }\n\n    toggleDate = (e) => {\n        e.stopPropagation();\n        e.preventDefault();\n        const { showDate } = this.state;\n        this.setState({ showDate: !showDate });\n    }\n\n\n\tlikeWorkout = async () => {\n\t\tconst { workoutStore } = this.props.stores;\n        const { workout } = this.props;\n        const workoutId = workout.id;\n\n        const { likeWorkout } = this.state;\n        likeWorkout[workoutId] = true;\n        this.setState({ likeWorkout });\n        setTimeout(() => {\n            const { likeWorkout } = this.state;\n            delete likeWorkout[workoutId];\n            this.setState({ likeWorkout });\n        }, 1200);\n\n\t\tconst response = await workoutStore.likeWorkout({ id: workoutId });\n        if (response && response.status === 200) {\n\n\t\t}\n\t}\n\n\ttoggleAddComment = (e) => {\n\t\tconst workoutId = e.target.parentElement.dataset.id || e.target.dataset.id;\n\t\tconst { showAddComment } = this.state;\n\t\tthis.setState({\n\t\t\tshowAddComment: !showAddComment,\n\t\t}, () => {\n\t\t\tif (this.inputRef[workoutId]) {\n\t\t\t\tthis.inputRef[workoutId].focus();\n\t\t\t}\n\t\t});\n\t}\n\n    viewImage = (e) => {\n\t\tconst { id, idx } = e.target.closest('img').dataset;\n        const { viewImageIdx } = this.state;\n        viewImageIdx[id] = idx;\n        this.setState({ viewImageIdx });\n    }\n\n    shareLink = (e) => {\n        const { url, title, text } = e.target.closest('button').dataset;\n        const { appState } = this.props.stores;\n        appState.shareUrl({ url, title, text });\n    }\n\n        // Overlay functions\n    onTeamClick = (e, teamid) => {\n        e.preventDefault();\n        e.stopPropagation();\n        this.setState({\n            showTeam: teamid,\n        });\n        return false;\n    }\n\n    hideTeam = () => {\n        this.setState({\n            showTeam: null,\n        });\n    }\n\n    onUserClick = (e, userid) => {\n        e.preventDefault();\n        e.stopPropagation();\n        return false;\n    }\n\n    onDogClick = (e, dogid, dogs) => {\n        e.preventDefault();\n        e.stopPropagation();\n        this.setState({\n            showDog: dogid,\n            dogs,\n        });\n        return false;\n    }\n\n    hideDog = () => {\n        this.setState({\n            showDog: null,\n        });\n    }\n\n    render() {\n        const {\n            showDate,\n            showAddComment,\n            viewImageIdx = {},\n            likeWorkout,\n            dogs,\n            showTeam,\n            showDog,\n        } = this.state;\n        const {\n            workout,\n            showDate: forceShowDate,\n            wrapperClasses = 'col-12 col-sm-8 col-lg-6 offset-sm-2 offset-lg-3',\n            wrapperClassesRow = 'row',\n        } = this.props;\n\t\tconst { userStore, appState, workoutStore } = this.props.stores;\n        const { viewmode, hasShareApi } = appState;\n        const { user, dogs: allDogs } = userStore;\n        const { language = 'en' } = user;\n        const intensity = userStore.findIntensity({ code: workout.intensity, language }) || {};\n        // const teamName = userStore.findTeam(workout.team);\n        const team = userStore.findTeam(workout.team, true) || {};\n        const teamName = team.name;\n        // const teamNames = workout.teams ? workout.teams.map(e => userStore.findTeam(e)) : [];\n        const teamNames = [];\n        if (teamName) {\n            teamNames.push(teamName);\n        }\n        if (workout.teams) {\n            workout.teams.forEach((e) => {\n                if (userStore.findTeam(e)) {\n                    teamNames.push(userStore.findTeam(e));\n                }\n            });\n        }\n\n        const { likes = [], comments = [] } = workout;\n\t\tconst hasLikedWorkout = workout.likes && workout.likes.findIndex(e => e.user === user.id) > -1;\n        const { gpxInfo = {}, mushers = [] } = workout;\n\t\tconst { loadIndex = 0 } = gpxInfo;\n        const workoutEquipment = userStore.findEquipment({ equipment: workout.equipment, language });\n        const workoutEquipmentIcon = userStore.findEquipment({ equipment: workout.equipment, field: 'icon' });\n\n        const musherImages = [];\n        if (mushers.length > 1) {\n            mushers.slice(1, 10).map((musher) => {\n                const u = workoutStore.findPublicUser(musher) || {};\n                if (u.images && u.images[0]) {\n                    musherImages.push(u.images[0]);\n                }\n            });\n        }\n\n        const publicUser = workoutStore.findPublicUser(mushers[0]) || {};\n        let image;\n        if (publicUser && publicUser.images && publicUser.images[0]) {\n            image = publicUser.images[0];\n        } else if (team.image && team.image.s3SmallLink) {\n            image = team.image;\n        } else if (team.images && team.images[0] && team.images[0].s3SmallLink) {\n            image = team.images[0];\n        } else if (workout.image && workout.image.s3SmallLink) {\n            image = workout.image;\n        }\n\n        const images = [];\n        if (workout.mapImage) {\n            images.push({\n                ...workout.mapImage,\n                type: 'map',\n            });\n        }\n        if (workout.images) {\n            const imgs = toJS(workout.images);\n            images.push(...imgs);\n        }\n        const imageIdx = viewImageIdx[workout.id] ? viewImageIdx[workout.id] : 0;\n        const currentImage = images && images[imageIdx] ? images[imageIdx] : null;\n\n        let batteryUsage;\n        if (workout && workout.gpxInfo && workout.gpxInfo.battegryLevelStart) {\n            batteryUsage = (workout.gpxInfo.battegryLevelStart - workout.gpxInfo.battegryLevelEnd) * 100;\n        }\n\n        const views = mu.getViews(workout.statistics);\n\n        // let temperature;\n        // let windSpeed;\n        // if (util.checkNested(workout, 'temperature')) {\n        //     const yr = toJS(workout.yr[0].instant.details);\n        //     // displayValue = `Yr.no: 🌡️ ${yr.air_temperature}°C, 💨 ${yr.wind_speed}m/s 🧭 ${mu.windDirection(yr.wind_from_direction)}, ☁️ ${yr.cloud_area_fraction}%, ${yr.air_pressure_at_sea_level}mb, 💦 ${yr.relative_humidity}%`;\n        //     temperature = `${yr.air_temperature}°C`;\n        //     windSpeed = `${yr.wind_speed}m/s`;\n        // }\n\t\t// // const loadMultiplier = loadIndex / 100;\n\n        return (<>\n\n            {showTeam && <Overlay>\n                <TeamsPublicDetail stores={this.props.stores} teamid={showTeam} marginTop={'0px;'} marginBottom={'0px;'} back={this.hideTeam} hideTeam={this.hideTeam} />\n            </Overlay>}\n\n            {showDog && <Overlay>\n                <DogPublicDetail stores={this.props.stores} dogid={showDog} marginTop={'0px;'} marginBottom={'0px;'} back={this.hideDog} dogs={dogs} />\n            </Overlay>}\n\n            <div class='w-100 mb-2'>\n                <div class={wrapperClassesRow}>\n\n                    <div class={`${wrapperClasses} d-flex mb-0 position-relative`}>\n\n                        {/* {workout.gpxInfo && <svg viewBox='0 0 300 300' style='top: 80px; left: 10px; width: 90px; height: 90px;' class='position-absolute'>\n                            <path d={`${workout.gpxInfo.svgMap}`} style='fill: none; stroke: #0063FF; stroke-width: 5; opacity: 0.3;' />\n                        </svg>} */}\n\n                        {/* {JSON.stringify(workout, null, 4)} */}\n                        <div class='text-center'>\n                            <div\n                                class={`position-relative text-center border rounded-circle imageRounded ${getWorkoutColor(workout)}`}\n                                style={`${image ? `background-image: url(\"${image.s3SmallLink}\"); background-size: cover;` : ''} border-width: 3px !important;`}\n                            >\n                                {!image && <i class={`${getWorkoutIcon(workout)} text-${intensity.class ? intensity.class : 'muted'} mt-3`} style='font-size: 40px;' />}\n\n                                {musherImages && musherImages.map((img, idx) => <>\n                                    <div\n                                        class='position-absolute rounded-circle imageRounded border imageRoundedThumb border-white'\n                                        style={`\n                                            background-image: url(\"${img.s3SmallLink}\");\n                                            background-size: cover;\n                                            bottom: -3px;\n                                            left: ${-5 + (idx * 10)}px;\n                                        `}\n                                    />\n                                </>)}\n                            </div>\n                            {workout.temperature !== 0 && <>\n                                <span class='text-muted font-weight-light'>\n                                    <Temperature stores={this.props.stores} value={workout.temperature} />\n                                </span>\n                            </>}\n                        </div>\n                        <div class='flex-grow-1 pl-3' style='line-height: 1.2em;'>\n                            <span class='float-right'>\n                                {workout.isLocked === 1 && <i class='fas fa-lock text-danger ml-3' />}\n                                {workout.isInProgress === 1 && <div class='spinner-grow text-success ml-3' role='status' />}\n                                {workout.isInProgress === 2 && <i class='fas fa-pause-circle text-warning ml-3' />}\n                            </span>\n                            <a class='stretched-link' href={`/workouts/${workout.id}`}>\n                                <h5 class='my-0 mb-1' style='line-height: 1.0em;'>\n                                    {workout.name}\n                                </h5>\n                            </a>\n                            {teamNames && teamNames.length > 0 && <small class='font-weight-lighter'>\n                                {teamNames.map((name, idx) => <>{idx > 0 ? ', ' : ''}{name}</>)}\n                            </small>}\n                            <br />\n                            <small class='text-muted'>\n                                {workout.date && <small onClick={this.toggleDate}>\n                                    {forceShowDate || showDate ? util.formatDate(workout.date, { locale: 'no-NB', hour12: false, hour: '2-digit', minute: '2-digit' }) : util.formatDistance(workout.date, new Date(), { locale: 'no-NB' })}\n                                </small>}\n                                <span class={`badge badge-${intensity.class} ml-2`}>{intensity.name}</span>\n                                {loadIndex > 0 && <span class={`ml-2 text-${mu.getLoadIndexColor(util.normalizeBetween(loadIndex, 0, MAX_LOADINDEX, 0, 100))}`}>\n                                    <i class='fas fa-hand-rock mr-1' />\n                                    {Math.floor(util.normalizeBetween(loadIndex, 0, MAX_LOADINDEX, 0, 100))} -&nbsp;\n                                    {mu.getLoadIndexText(util.normalizeBetween(loadIndex, 0, MAX_LOADINDEX, 0, 100))}\n                                </span>}\n                                <br />\n                            </small>\n                            <small>\n                                <div class='text-muted'>\n                                    {workout.garminId > 0 && <div class={`float-left mr-2 text-center border rounded-circle imageRounded imageRoundedIcon`} style={`background-image: url(\"./assets/garmin-connect.png\");`} />}\n                                    {workout.stravaId > 0&& <div class={`float-left mr-2 text-center border rounded-circle imageRounded imageRoundedIcon`} style={`background-image: url(\"./assets/strava-icon.png\");`} />}\n\n                                    {workout.equipment > 0 && <><i class={`${workoutEquipmentIcon} ml-2`} /> {workoutEquipment}</>}\n                                    {/* {workout.distanceKm > 0 && <><i class='fas fa-road ml-2' /> {displayDistance(workout.distanceKm)}km</>}\n                                    {workout.elevation > 0 && <><i class='fas fa-mountain ml-2' /> {util.format(workout.elevation, 0)}m</>} */}\n                                    {/* {workout.speedAvg > 0 && <><i class='fas fa-tachometer-alt ml-2' /> {util.format(workout.speedAvg, 1)}km/t</>} */}\n                                    {workout.dogs > 0 && <><i class='fas fa-dog ml-2' /> {workout.dogs.length}</>}\n                                    {workout.track > 0 && <><i class={`fas fa-map-marked text-${workout.track > 0 ? 'success' : 'danger'} ml-2`} /></>}\n                                    {workout.dogsLeft > 0 && <><i class={`fas fa-crosshairs text-${workout.dogsLeft && workout.dogsRight ? 'success' : 'danger'} ml-2`} /></>}\n                                    {workout.sledWeight > 0 && <>\n                                        <i class='fas fa-sleigh ml-2' /> <Weight stores={this.props.stores} value={workout.sledWeight} />\n                                    </>}\n                                    {batteryUsage > 0 && <span class='text-muted ml-2'><i class='fas fa-battery-three-quarters' /> {util.format(batteryUsage, 1)}% <Text id='workout.battery-used'>used</Text></span>}\n                                </div>\n                                {['beta', 'advanced'].indexOf(viewmode) > -1 && (\n                                    <span class='text-muted'>\n                                        <i class='fas fa-balance-scale' /> {util.format(workout.kcalBurnedTotal)} <Text id='workout.kcal'>kcal</Text>\n                                        <i class='fas fa-drumstick-bite ml-2' /> <Weight stores={this.props.stores} value={workout.kcalMeatGramsTotal / 1000} />\n                                        <i class='fas fa-fish ml-2' /> <Weight stores={this.props.stores} value={workout.kcalSalmonGramsTotal / 1000} />\n                                        <i class='fas fa-piggy-bank ml-2' /> <Weight stores={this.props.stores} value={workout.kcalFatGramsTotal / 1000} />\n                                    </span>\n                                )}\n                            </small>\n                        </div>\n                    </div>\n                    <div class={`${wrapperClasses} position-relative mt-2`}>\n                        <strong>\n                            {workout.description}\n                        </strong>\n                    </div>\n                    <div class={`${wrapperClasses} position-relative`}>\n                        <Markdown markdown={mu.replaceImages(workout.comment, workout.images, language)} markdownOpts={mu.getMarkdownOptions()} />\n                    </div>\n                    <div class={`${wrapperClasses} d-flex mb-0 position-relative`}>\n                        <div class='container-fluid px-0'>\n                            <div class='row mt-1'>\n                                {workout.distanceKm > 0 && <div class='col-3'>\n                                    <div class='text-overflow'>\n                                        <small><i class='fas fa-road' /> <Text id='workout.calendar.distance'>Distanse</Text></small>\n                                    </div>\n                                    <div class='text-overflow font-weight-light' style='font-size: 1.2em;'>\n                                        <Distance stores={this.props.stores} value={workout.distanceKm} />\n                                    </div>\n                                </div>}\n                                {workout.elevation > 0 && <div class='col-3'>\n                                    <div class='text-overflow'>\n                                        <small><i class='fas fa-mountain' /> <Text id='workout.calendar.ascend'>Høydemeter</Text></small>\n                                    </div>\n                                    <div class='text-overflow font-weight-light' style='font-size: 1.2em;'>\n                                        <Elevation stores={this.props.stores} value={workout.elevation} />\n                                    </div>\n                                </div>}\n                                {workout.duration > 0 && <div class='col-3'>\n                                    <div class='text-overflow'>\n                                        <small><i class='fas fa-clock' /> <Text id='workout.calendar.duration'>Varighet</Text></small>\n                                    </div>\n                                    <div class='text-overflow font-weight-light' style='font-size: 1.2em;'>\n                                        {util.secToHms(workout.duration, true)}\n                                    </div>\n                                </div>}\n                                {workout.speedAvg > 0 && <div class='col-3'>\n                                    <div class='text-overflow'>\n                                        <small><i class='fas fa-tachometer-alt' /> <Text id='workout.calendar.avg-speed'>Snittfart</Text></small>\n                                    </div>\n                                    <div class='text-overflow font-weight-light' style='font-size: 1.2em;'>\n\t\t\t\t                        {workout.gpxInfo && workout.gpxInfo.avgGpsMovingSpeed > 0 ? <>\n                                            <Speed stores={this.props.stores} value={workout.gpxInfo.avgGpsMovingSpeed * 3.6} />\n                                        </> : <>\n                                            <Speed stores={this.props.stores} value={workout.speedAvg} />\n                                        </>}\n                                    </div>\n                                </div>}\n                            </div>\n                        </div>\n                    </div>\n\n                    {['beta', 'advanced', 'normal'].indexOf(viewmode) > -1 && (\n                        <div class={`${wrapperClasses}`}>\n                            <div class='container-fluid px-0 mt-1'>\n                                <div class='row'>\n                                    <ImageScroller stores={this.props.stores} images={images} id={workout.id} dblClick={this.likeWorkout} likeRef={likeWorkout} />\n                                </div>\n                            </div>\n                        </div>\n                    )}\n\n                    {['beta', 'advanced', 'normal'].indexOf(viewmode) > -1 && <>\n                        {workout.dogs && workout.dogs.length > 0 && <div class='container-fluid px-0 mt-1'>\n                            <div class='row pt-2'>\n                                <DogScroller stores={this.props.stores} dogs={workout.dogs} allDogs={allDogs} onDogClick={this.onDogClick} />\n                            </div>\n                        </div>}\n\n                        <div class='mt-2'>\n                            <LikesAndComments\n                                stores={this.props.stores}\n                                likes={likes}\n                                comments={comments}\n                                type='workout'\n                                onTeamClick={this.onTeamClick}\n                                onUserClick={this.onUserClick}\n                            />\n                        </div>\n\n                    </>}\n\n                    {['beta', 'advanced', 'normal'].indexOf(viewmode) > -1 && <>\n                        <div class={`${wrapperClasses} mb-0 position-relative mt-2`}>\n                            <div class='row'>\n                                <div class='col text-center'>\n                                    <button type='button' class={`btn btn-sm btn-outline-${hasLikedWorkout ? 'primary' : 'secondary'} btn-lg btn-block ${hasLikedWorkout ? 'text-primary' : ''}`}\n                                        onClick={this.likeWorkout}\n                                        // disabled={hasLikedWorkout}\n                                    >\n                                        <i class={`${hasLikedWorkout ? 'text-primary fas' : 'far'} fa-thumbs-up`} /> <Text id='comments.like'>Lik</Text>\n                                    </button>\n                                </div>\n                                <div class='col text-center'>\n                                    <button type='button' class='btn btn-sm btn-outline-secondary btn-lg btn-block'\n                                        data-id={workout.id}\n                                        onClick={this.toggleAddComment}\n                                    >\n                                        <i class='fas fa-comment' /> <Text id='comments.comment-add'>Kommentar</Text>\n                                    </button>\n                                </div>\n                                {hasShareApi ? <>\n                                    <div class='col text-center'>\n                                        <button class='btn btn-sm btn-outline-secondary btn-lg btn-block text-overflow'\n                                            onClick={this.shareLink}\n                                            data-url={`https://themusher.app/share/workout/${workout.uuidv4}`}\n                                            data-title={`title: ${workout.name}`}\n                                        >\n                                            <i class='fas fa-share' /> <Text id='workout.share'>Del</Text>\n                                        </button>\n                                    </div>\n                                </> : <>\n                                    <div class='col text-center'>\n                                        <a class='btn btn-sm btn-outline-secondary btn-lg btn-block text-overflow'\n                                            href={`https://themusher.app/share/workout/${workout.uuidv4}`}\n                                            target='_blank'\n                                            rel='noreferrer'\n                                            data-native\n                                        >\n                                            <i class='fas fa-share' /> <Text id='workout.share'>Del</Text>\n                                        </a>\n                                    </div>\n                                </>}\n                            </div>\n                        </div>\n\n                        <div class={`${wrapperClasses} mt-2 mb-3`}>\n                            {showAddComment && <WorkoutAddComment\n                                stores={this.props.stores}\n                                workout={workout}\n                                inputRef={c => this.inputRef[workout.id] = c}\n                                inputRefObject={this.inputRef}\n                                col='12'\n                                offset='0'\n                            />}\n                            <WorkoutComments stores={this.props.stores} workout={workout} col='10' offset='2' compact={true} />\n                        </div>\n\n                        {views > 0 && <>\n                            <div class='mt-2'>\n                                <Views\n                                    stores={this.props.stores}\n                                    views={views}\n                                    object={workout}\n                                    type='workout'\n                                    isTeamAdmin={true}\n                                    isAdmin={false}\n                                    onTeamClick={this.onTeamClick}\n                                    onUserClick={this.onUserClick}\n                                />\n                            </div>\n                        </>}\n\n                    </>}\n\n                </div>\n            </div>\n        </>);\n    }\n}\n\nexport default Workout;\n","import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport { Text, Localizer, withText } from 'preact-i18n';\n\n@observer\nclass Modal extends Component {\n    toggleDate = () => {\n        const { showDate } = this.state;\n        this.setState({ showDate: !showDate });\n    }\n\n    touchStart = (e) => {\n        e.stopPropagation();\n        this.setState({\n            startY: e.touches[0].pageY,\n        })\n    }\n\n    touchEnd = (e) => {\n        e.stopPropagation();\n        this.setState({\n            startY: undefined,\n            readyToRefresh: false,\n        })\n    }\n\n    touchMove = (e) => {\n        e.stopPropagation();\n        const { close } = this.props;\n        const { startY, refreshing } = this.state;\n        const scrollDistance = 30;\n        const y = e.touches[0].pageY;\n        if (this.appContainer) {\n            const { scrollTop } = this.appContainer;\n            if (scrollTop === 0 && y > startY + scrollDistance && !refreshing) {\n                close();\n            }\n        }\n    }\n\n    render() {\n        const { showDate } = this.state;\n        const { image, imagexxl, close, thumb, name, title, date } = this.props;\n        return (\n            <div class='fixed-top bg-dark text-center pt-2' style='width: 100vw; height: 100vh;'>\n                <button class='btn btn-secondary float-right mr-2' onClick={close}>X</button>\n\n                    <div class='d-flex mb-2 px-2'>\n                        {/* {JSON.stringify(dog, null, 4)} */}\n                        {thumb && <div class={`text-center border rounded-circle imageRounded imageRoundedSmall`} style={thumb ? `background-image: url(\"${thumb}\");` : ''}>\n                            &nbsp;\n                        </div>}\n                        <div class='flex-grow-1 pl-3 pr-2 text-left' style='line-height: 1.3em;'>\n                            {name && <strong class='mr-2'>{name}:</strong>}\n                            {title}<br />\n                            <small class='text-muted'>\n                                {date && <small onClick={this.toggleDate}>\n                                    {showDate ? util.formatDate(date, { locale: 'no-NB' }) : util.formatDistance(date, new Date(), { locale: 'no-NB' })}\n                                </small>}\n                            </small>\n                        </div>\n                    </div>\n\n\n                <img src={image}\n                    class='img-fluid align-middle mt-2 mb-2'\n                    onClick={close}\n                    onTouchstart={this.touchStart}\n                    onTouchend={this.touchEnd}\n                    onTouchmove={this.touchMove}\n                    ref={c => this.appContainer = c}\n                />\n\n                <a target='_blank' rel='noopener noreferrer' href={imagexxl || image} download={imagexxl || image}>\n                    <i class='fas fa-download' /> <Text id='modal.download'>Last ned bildet</Text>\n                </a>\n            </div>\n        );\n    }\n}\n\nexport default Modal;\n","import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport { Text, Localizer } from 'preact-i18n';\n\nimport DogSimplePublic from './simplePublic';\n\n@observer\nclass DogScroller extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            imageIdx: 0,\n        };\n    }\n\n    scrollImages = (e) => {\n        const { dogs } = this.props;\n\n        const { scrollLeft, scrollWidth, clientWidth } = e.target;\n        const imageStep = clientWidth;\n        const imageIdx = scrollLeft / imageStep;\n        // console.log({ e, imageStep, imageIdx, scrollLeft, scrollWidth, clientWidth });\n\n        const nearestInt = Math.round(imageIdx);\n        const diff = Math.abs(nearestInt - imageIdx);\n        // console.log({ nearestInt, diff });\n        if (Number.isInteger(imageIdx) || diff < 0.1) {\n            this.setState({\n                imageIdx: nearestInt,\n            });\n        }\n    }\n\n    sortByName = (a, b) => {\n        const { allDogs = [] } = this.props;\n        const dogA = allDogs.find(e => e.id === a);\n        const dogB = allDogs.find(e => e.id === b);\n        if (dogA && dogB) {\n            if (dogA.name > dogB.name) {\n                return 1;\n            }\n        }\n        return -1;\n    }\n\n    render() {\n        const { imageIdx } = this.state;\n        const { dogs, allDogs = [], size = 'medium', onDogClick = () => {} } = this.props;\n\n        return (\n            <div class='w-100'>\n                <div\n                    class='d-flex flex-row flex-nowrap no-scrollbar'\n                    style='overflow: auto; scroll-snap-type: x mandatory;'\n                    onScroll={this.scrollImages}\n                >\n                    {dogs && dogs.sort(this.sortByName).map((dogId, idx) => {\n                        const dog = allDogs.find(e => e.id === dogId);\n                        if (!dog) {\n                            return '';\n                        }\n                        return (\n                            <div class='col clearfix position-relative p-0 mx-2'>\n                                <div\n                                    class={`w-100 h-100 text-center rounded-lg imageContainer d-flex justify-content-center align-items-center`}\n                                    style={`\n                                        flex-wrap: wrap;\n                                        overflow-y: hidden;\n                                    `}\n                                    onTouchstart={(e) => { e.stopPropagation(); }}\n                                    onTouchend={(e) => { e.stopPropagation(); }}\n                                    onTouchmove={(e) => { e.stopPropagation(); }}\n                                >\n                                    <DogSimplePublic\n                                        stores={this.props.stores}\n                                        dog={dog}\n                                        dogs={allDogs.filter(d => dogs.indexOf(d.id) > -1).sort((a, b) => a.name > b.name ? 1 : -1)}\n                                        className='mx-auto'\n                                        showName={true}\n                                        showPosition={false}\n                                        size={size}\n                                        onDogClick={onDogClick} \n                                    />\n                                    {/* <xmp>{JSON.stringify(img, null, 4)}</xmp> */}\n                                </div>\n                            </div>\n                        );\n                    })}\n                </div>\n            </div>\n        );\n    }\n}\n\nexport default DogScroller;\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"gaugeBackground\":\"gaugeBackground__1UGxt\",\"gauge\":\"gauge__2ZDxd\",\"success\":\"success__3UQxg\",\"primary\":\"primary__3pPV6\",\"secondary\":\"secondary__-Vrk_\",\"info\":\"info__3t5zs\",\"warning\":\"warning__1jHlR\",\"danger\":\"danger__BLVC9\",\"gaugeText\":\"gaugeText__1on-w\"};","import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport { Text, Localizer } from 'preact-i18n';\n\nimport mu from '../../lib/musher-util';\nconst MARGIN_TOP = mu.marginTop(true);\nconst MARGIN_BOTTOM = mu.marginBottom();\nconst SUB_MENU_MARGIN_TOP = mu.subMenuMarginTop();\n\nimport Workout from '../../components/workout';\nimport WorkoutSummary from '../../components/workout/summary';\nimport DogHistory from '../../components/dog/history';\nimport DogAddLog from '../../components/dog/addlog';\nimport DogStatus from '../../components/dog/status';\n\nconst initialState = {\n\tisLoading: false,\n};\n\n@observer\nclass Home extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            ...initialState,\n        };\n    }\n\n\tasync loadAll() {\n\t\tthis.setState({ isLoading: true });\n\t\tawait this.loadDogs();\n\t\tthis.setState({ isLoading: false });\n    }\n\n\tloadDogs = async () => {\n\t\tthis.setState({ isLoading: true });\n\t\tconst { dogStore } = this.props.stores;\n\t\tconst { currentTeam } = dogStore;\n\n\t\tawait dogStore.load({ query: { team: currentTeam }, addData: ['workoutSummary'] });\n\t\tthis.setState({ isLoading: false });\n\t}\n\n\t// componentWillUnmount() {\n\t//     PubSub.unsubscribe(subscription);\n\t// }\n    componentDidMount() {\n        this.loadAll();\n    }\n\n\trender() {\n\t\tconst { dogStore, appState, userStore } = this.props.stores;\n        const { darkmode } = appState;\n\t\tconst { isAdmin } = userStore;\n\n\t\tconst dogsMaturity = dogStore.findDogsByStatus(10);\n\t\tconst dogsWithStatus = dogStore.findDogsByStatus([2, 4, 8, 9]);\n\t\tconst dogsWithNeeds = dogStore.findDogsWithNeeds();\n\n\t\treturn (\n\t\t\t<div class='container-fluid' style={`margin-bottom: ${MARGIN_BOTTOM}; margin-top: ${MARGIN_TOP};`}>\n\t\t\t\t<div class='row fixed-top' style={`margin-top: ${SUB_MENU_MARGIN_TOP}; background-color: ${darkmode ? '#191d21' : '#f8f9fa'};`}>\n\t\t\t\t\t{isAdmin && <div class='col text-center subtopmenu'>\n\t\t\t\t\t\t<a href='/admin' class='text-secondary stretched-link'><nobr><i class='fas fa-user-shield' /> <Text id='home.admin'>Admin</Text></nobr></a>\n\t\t\t\t\t</div>}\n\t\t\t\t\t<div class='col text-center subtopmenu'>\n\t\t\t\t\t\t<a href='/' class='text-secondary stretched-link'><nobr><i class='fas fa-chart-line' /> <Text id='todo.dashboard'>Dashboard</Text></nobr></a>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class='col text-center subtopmenu'>\n\t\t\t\t\t\t<a href='/feed' class='text-secondary stretched-link'><nobr><i class='fas fa-rss' /> <Text id='todo.feed'>Feed</Text></nobr></a>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class='col text-center border-bottom border-primary subtopmenu'>\n\t\t\t\t\t\t<a href='/todo' class='text-primary stretched-link'><nobr><i class='fas fa-list' /> <Text id='todo.todo'>Todo</Text></nobr></a>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\n\t\t\t\t<div class='row'>\n\n\t\t\t\t\t<div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mb-4'>\n\t\t\t\t\t\t<h5><Text id='todo.dogs-follow-up'>Hunder som trenger oppfølging</Text></h5>\n\t\t\t\t\t\t<div class='row'>\n\t\t\t\t\t\t\t{dogsWithStatus && dogsWithStatus.map(d => <DogStatus stores={this.props.stores} dog={d} />)}\n\t\t\t\t\t\t\t{!dogsWithStatus || dogsWithStatus.length === 0 && <div class='col-12 text-center text-muted'>\n\t\t\t\t\t\t\t\t<h3><i class='fas fa-thumbs-up' /></h3>\n\t\t\t\t\t\t\t\t<Text id='todo.no-dogs-follow-up'>Ingen hunder som trenger ekstra oppfølging.</Text>\n\t\t\t\t\t\t\t</div>}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mb-4'>\n\t\t\t\t\t\t<h5><Text id='todo.dogs-special-needs'>Hunder med spesielle behov</Text></h5>\n\t\t\t\t\t\t<div class='row'>\n\t\t\t\t\t\t\t{dogsWithNeeds && dogsWithNeeds.map(d => <DogStatus stores={this.props.stores} dog={d} />)}\n\t\t\t\t\t\t\t{!dogsWithNeeds || dogsWithNeeds.length === 0 && <div class='col-12 text-center text-muted'>\n\t\t\t\t\t\t\t\t<h3><i class='fas fa-thumbs-up' /></h3>\n\t\t\t\t\t\t\t\t<Text id='todo.no-dogs-special-needs'>Ingen hunder med spesielle behov.</Text>\n\t\t\t\t\t\t\t</div>}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mb-4'>\n\t\t\t\t\t\t<h5><Text id='todo.dogs-with-maturity'>Hunder med løpetid</Text></h5>\n\t\t\t\t\t\t<div class='row'>\n\t\t\t\t\t\t\t{dogsMaturity && dogsMaturity.map(d => <DogStatus stores={this.props.stores} dog={d} />)}\n\t\t\t\t\t\t\t{!dogsMaturity || dogsMaturity.length === 0 && <div class='col-12 text-center text-muted'>\n\t\t\t\t\t\t\t\t<h3><i class='fas fa-thumbs-up' /></h3>\n\t\t\t\t\t\t\t\t<Text id='todo.no-dogs-with-maturity'>Ingen hunder med løpetid.</Text>\n\t\t\t\t\t\t\t</div>}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\t\t\t\t\t\n\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nexport default Home;\n","import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\n\nimport style from './style.css';\n\nconst initialState = {\n    mouseData: {},\n};\n\n@observer\nclass Gauge extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            ...initialState,\n        };\n        this.svgRef = null;\n    }\n\n    render() {\n        const {\n            radius = 50,\n            heightAdd = 0,\n            color = 'success',\n\n            showPercentText = true,\n            percent = 0,\n            prefix = '',\n\n            showCenterText= false,\n            centerText,\n            centerTextSize,\n            centerTextX,\n            centerTextY,\n\n            total = '',\n            totalY = '90%',\n            totalX = '50%',\n            totalTextAnchor = 'middle',\n                        \n            completed = '',\n            completedY = '65%',\n            completedX = '50%',\n            completedTextAnchor = 'middle',\n        } = this.props;\n        const strokeWidth = radius * 0.3;\n        const innerRadius = radius - strokeWidth / 2;\n\n        const strokeWidthGauge = radius * 0.3;\n\n        const circumference = innerRadius * 2 * Math.PI;\n        const arc = circumference * (270 / 360);\n        const dashArray = `${arc} ${circumference}`;\n        const transform = `rotate(135, ${radius}, ${radius})`;\n\n        const percentNormalized = Math.min(Math.max(percent, 0), 100);\n        const offset = arc - (percentNormalized / 100) * arc;\n\n        const textSize = centerTextSize || radius / 2.5;\n        const textSizeSmall = radius / 5;\n\n        return (\n            <>\n                <svg xmlns='http://www.w3.org/2000/svg' class={style.svg}\n                    // viewBox={`0 0 ${radius * 2} ${radius * 2}`}\n                    width={radius * 2}\n                    height={radius * 2 + heightAdd}\n                    preserveAspectRatio='none'\n                    ref={c => this.svgRef = c}\n                >\n\n                    <circle\n                        class={`${style.gaugeBackground}`}\n                        cx={radius}\n                        cy={radius}\n                        r={innerRadius}\n                        strokeWidth={strokeWidth}\n                        strokeDasharray={dashArray}\n                        strokeLinecap='round'\n                        transform={transform}\n                    />\n                    \n                    <circle\n                        class={`${style[color]} ${style.gauge}`}\n                        cx={radius}\n                        cy={radius}\n                        r={innerRadius}\n                        stroke='url(#grad)'\n                        strokeDasharray={dashArray}\n                        strokeDashoffset={offset}\n                        strokeLinecap='round'\n                        strokeWidth={strokeWidthGauge}\n                        style={{\n                            transition: 'stroke-dashoffset 0.3s',\n                        }}\n                        transform={transform}\n                    />\n                     \n                    {showPercentText && <text\n                        class={`${style.gaugeText} ${style[color]}`}\n                        x={centerTextX || '50%'}\n                        y={centerTextY || '50%'}\n                        dominant-baseline='middle'\n                        text-anchor='middle'\n                        font-size={textSize}\n                    >{percent} {prefix}</text>}\n\n                    {showCenterText && <text\n                        class={`${style.gaugeText} ${style[color]}`}\n                        x={centerTextX || '50%'}\n                        y={centerTextY || '50%'}\n                        dominant-baseline='middle'\n                        text-anchor='middle'\n                        font-size={textSize}\n                    >{centerText}</text>}\n\n                    {completed && <text\n                        class={`${style.gaugeText} ${style[color]}`}\n                        x={completedX}\n                        y={completedY}\n                        dominant-baseline='middle'\n                        text-anchor={completedTextAnchor}\n                        font-size={textSizeSmall}\n                    >{completed}</text>}\n\n                    <text\n                        class={`${style.gaugeText} ${style.secondary}`}\n                        x={totalX}\n                        y={totalY}\n                        dominant-baseline='middle'\n                        text-anchor={totalTextAnchor}\n                        font-size={textSizeSmall}\n                    >{total}</text>\n\n                </svg>\n            </>\n        );\n    }\n}\n\nexport default Gauge;\n","import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport { Text, Localizer, withText } from 'preact-i18n';\n\nimport mu from '../../lib/musher-util';\n\nimport Modal from '../modal';\nimport ImageSlider from '../imageSlider';\nimport ImageScroller from '../imageScroller';\n\n\nimport style from '../style.css';\n\nconst VACCINE_TYPES = mu.getVaccineTypes();\n\n@observer\nclass DogHistoryLine extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            showDate: false,\n        };\n    }\n\n    showModal = (e) => {\n        e.stopPropagation();\n        e.preventDefault();\n        const img = e.target.dataset.image;\n        const imgXXL = e.target.dataset.imagexxl;\n        const thumb = e.target.dataset.thumb;\n        const name = e.target.dataset.name;\n        const title = e.target.dataset.title;\n        const date = e.target.dataset.date;\n        this.setState({\n            displayModal: true,\n            currentImage: img,\n            currentImageXXL: imgXXL,\n            thumb,\n            name,\n            title,\n            date,\n        });\n    }\n\n    closeModal = () => {\n        this.setState({\n            displayModal: false,\n        });\n    }\n\n    toggleDate = () => {\n        const { showDate } = this.state;\n        this.setState({ showDate: !showDate });\n    }\n\n    touchStart = (e) => {\n        const { eventFired } = this.state;\n        if (!eventFired)  {\n            this.setState({\n                startY: e.touches[0].pageY,\n                startX: e.touches[0].pageX,\n                eventFired: false,\n                diffY: undefined,\n                diffX: undefined,\n                deleteVerify: false,\n            });\n        }\n    }\n\n    touchEnd = () => {\n        const { eventFired } = this.state;\n        if (eventFired) {\n            this.setState({\n                startY: undefined,\n                startX: undefined,\n            });\n        } else {\n            this.setState({\n                startY: undefined,\n                startX: undefined,\n                eventFired: false,\n                diffY: undefined,\n                diffX: undefined,\n                deleteVerify: false,\n            });\n        }\n    }\n\n    touchMove = (e) => {\n        const { eventFired } = this.state;\n        if (eventFired) {\n            return false;\n        }\n        const { startY, startX } = this.state;\n        const scrollDistance = 130;\n        const y = e.touches[0].pageY;\n        const x = e.touches[0].pageX;\n        const diffY = y - startY;\n        const diffX = x - startX;\n        this.setState({\n            diffY,\n            diffX,\n        });\n        if (y > (startY + scrollDistance)) {\n            // console.log('swiping down', y, '>', startY + scrollDistance);\n        } else if (y < (startY - scrollDistance)) {\n            // console.log('swiping up', y, '<', startY + scrollDistance);\n        } else if (x > (startX + scrollDistance)) {\n            // console.log('swiping right', startX, x);\n        } else if (x < (startX - scrollDistance)) {\n            this.setState({\n                eventFired: true,\n            });\n        }\n    }\n\n    reset = (e) => {\n        if (e) {\n            e.stopPropagation();\n            e.preventDefault();\n        }\n        this.setState({\n            deleted: false,\n            startY: undefined,\n            startX: undefined,\n            eventFired: false,\n            diffY: undefined,\n            diffX: undefined,\n            deleteVerify: false,\n        });\n    }\n\n    deleteHistoryRequest = async (e) => {\n        e.stopPropagation();\n        this.setState({\n            deleteVerify: true,\n        });\n    }\n\n    deleteHistory = async (e) => {\n        e.stopPropagation();\n        const { dogStore } = this.props.stores;\n        const { line } = this.props;\n        await dogStore.save({\n\t\t\tid: line.dogId,\n\t\t\t$pull: {\n                history: { _id: line.id || line._id },\n\t\t\t},\n\t\t});\n        this.setState({\n            deleted: true,\n            startY: undefined,\n            startX: undefined,\n            eventFired: false,\n            diffY: undefined,\n            diffX: undefined,\n            deleteVerify: false,\n        });\n    }\n\n    swipeLeft = (e) => {\n        const { eventFired } = this.state;\n        e.stopPropagation();\n        if (eventFired) {\n            this.reset();\n        } else {\n            this.setState({\n                eventFired: true,\n                diffX: -130,\n            });\n        }\n    }\n\n    componentWillReceiveProps(nextProps) {\n        // console.log('componentWillReceiveProps', nextProps);\n        if (nextProps.line.id !== this.props.line.id) {\n            this.reset();\n        }\n    }\n\n    render() {\n        const { userStore } = this.props.stores;\n        const { user } = userStore;\n        const { language = 'en' } = user;\n        const HISTORY_TYPE_MAP = mu.getHistoryMap(language);\n\n        const { displayModal, currentImage, currentImageXXL, showDate, thumb, name, title, date } = this.state;\n        const { line } = this.props;\n        const { diffX, deleted, deleteVerify } = this.state;\n        const hasImage = line.images && line.images.length > 0;\n        const isBeeingEdited = diffX < 0;\n        return (\n            <div class={`w-100 mb-4 position-relative ${style.hoverElement}`}\n                onTouchstart={deleted ? () => {} : this.touchStart}\n                onTouchend={deleted ? () => {} : this.touchEnd}\n                onTouchmove={deleted ? () => {} : this.touchMove}\n                onClick={!deleted && isBeeingEdited ? this.reset : () => {}}\n                style={`opacity: ${deleted ? 0.3 : 1};`}\n            >\n                {!isBeeingEdited && !deleted && <div class={`position-absolute ${style.hoverelementonly}`} style='top: 0px; right: 0px; z-index: 1000;'>\n                    <button class='btn btn-sm btn-secondary' type='button'\n                        onClick={this.swipeLeft}\n                    >\n                        <i class='fas fa-ellipsis-h' />\n                    </button>\n                </div>}\n                {isBeeingEdited && !deleted && <div class='position-absolute' style={`right: 0px; top: 10%; overflow: hidden; width: ${Math.abs(diffX) || 0}px; line-height: 0.8em;`}>\n                    {!line.grouped && <>\n                        {deleteVerify ?\n                            <>\n                                <button class='btn btn-sm btn-secondary float-right ml-3 mb-3'\n                                    onClick={this.reset}\n                                >\n                                    <i class='fas fa-times' /> <Text id='dog.history.no'>Nei</Text>\n                                </button>\n                                <button class='btn btn-sm btn-success float-right'\n                                    onClick={this.deleteHistory}\n                                >\n                                    <i class='fas fa-check' /> <Text id='dog.history.yes'>Ja</Text>\n                                </button>\n                            </>:\n                            <button class='btn btn-sm btn-danger float-right'\n                                onClick={this.deleteHistoryRequest}\n                            >\n                                <i class='fas fa-trash' /> <Text id='dog.history.delete'>Slett</Text>\n                            </button>\n                        }\n                    </>}\n                    {line.grouped && <small>\n                        <Text id='dog.history.cant-delete-groups'>Kan ikke slette grupperinger. Gå inn på hundene og slett der.</Text><br />\n                        <button class='btn btn-sm btn-success float-right'\n                            onClick={this.reset}\n                        >\n                            <i class='fas fa-check' /> Ok\n                        </button>\n                    </small>}\n                </div>}\n                <div class='row position-relative' style={`left: ${isBeeingEdited ? diffX : 0}px;`}>\n                    <div class='col-12 col-sm-8 col-lg-6 offset-sm-2 offset-lg-3 d-flex mb-0 position-relative'>\n                        {/* {JSON.stringify(dog, null, 4)} */}\n                        {line.dogImage ? <div class={`text-center border rounded-circle imageRounded imageRoundedSmall`} style={line.dogImage ? `background-image: url(\"${line.dogImage.s3SmallLink}\"); background-size: cover;` : ''}>\n                            &nbsp;\n                        </div> : <div class={`text-center border rounded-circle imageRounded imageRoundedSmall`} style={line.images && line.images[0] ? `background-image: url(\"${line.images[0].s3SmallLink}\"); background-size: cover;` : ''}>\n                            {!hasImage && <i class='fas fa-rss text-muted mt-2' style='font-size: 20px;' />}\n                        </div>}                        \n                        <div class='flex-grow-1 pl-3 pr-2' style='line-height: 1.0em;'>\n                            {!line.grouped && line.dogId && <a class='stretched-link' href={`/dogs/${line.dogId}`}>\n                                <strong class='mr-2'>{line.dogShortname || line.dogName}: </strong>\n                            </a>}\n                            {line.title}<br />\n                            \n                            {line.grouped && (\n                                <>\n                                    <div class='w-100 clearfix mt-2'>\n                                        {line.grouped.map(el => (\n                                            <>\n                                                <a href={`/dogs/${el.dogId}`}>\n                                                    {el.dogImage ? (\n                                                        <div class={`text-center border rounded-circle imageRounded imageRoundedThumb float-left`}\n                                                            style={`margin-right: 2px; ${el.dogImage ? `background-image: url(\"${el.dogImage.s3SmallLink}\");` : ''}`}\n                                                        >\n                                                            &nbsp;\n                                                        </div>\n                                                    ) : (\n                                                        <div class={`text-center border rounded-circle imageRounded imageRoundedThumb float-left text-muted pt-1`} \n                                                            style={`margin-right: 2px; ${el.images && el.images[0] ? `background-image: url(\"${el.images[0].s3SmallLink}\");` : ''}`}\n                                                        >\n                                                            {/* {!hasImage && <i class='fas fa-dog text-muted' style='font-size: 10px;' />} */}\n                                                            {!hasImage && <span style='font-size: 15px;'>{util.ucfirst(el.dogName, true)}</span>}\n                                                        </div>\n                                                    )}\n                                                </a>\n                                            </>\n                                        ))}\n                                    </div>\n                                    <div class='w-100 clearfix mt-2'>\n                                        <small>\n                                            {line.grouped.map(el => (\n                                                <span class='float-left mr-2 text-muted'>\n                                                    <a href={`/dogs/${el.dogId}`}>\n                                                        {el.dogShortname || el.dogName}\n                                                    </a>\n                                                </span>\n                                            ))}\n                                        </small>\n                                    </div>\n                                </>\n                            )}\n\n                            <div class='w-100 clearfix'>\n                                <small class='text-muted'>\n                                    {line.date && <small onClick={this.toggleDate}>\n                                        {showDate ? util.formatDate(line.date, { locale: 'no-NB' }) : util.formatDistance(line.date, new Date(), { locale: 'no-NB' })}\n                                        {line.endDate && <span class='ml-3'><i class='fas fa-hourglass-end' /> {util.formatDate(line.endDate, { locale: 'no-NB' })}</span>}\n                                        {line.historyType && <span class='ml-3'>\n                                            <i class='fas fa-folder-open' /> {HISTORY_TYPE_MAP[line.historyType]} {line.vaccineType ? ` - ${VACCINE_TYPES[line.vaccineType].name}` : ''}\n                                        </span>}\n                                        {line.weight && <span class='ml-3'><i class='fas fa-balance-scale' /> {line.weight} kg</span>}\n                                        {line.bodyScore && <span class='ml-3'><i class='fas fa-dog' /> {line.bodyScore}</span>}\n                                        {line.user && line.user.email && <span class='ml-3'><i class='fas fa-user' /> {line.user.email}</span>}\n                                    </small>}\n                                </small>\n                            </div>\n\n                            <div class='row mt-2'>\n                                <div class='col-12'>\n                                    <span class='font-weight-normal'>{line.comment}</span>\n                                    <span class='float-right'>\n                                        {line.cost ? `Kr. ${util.format(line.cost, 2)}` : ''}\n                                    </span>\n                                </div>\n                            </div>\n\n                        </div>\n                    </div>\n\n                    <div class='col-12 col-sm-8 col-lg-6 offset-sm-2 offset-lg-3 mt-1'>\n                        <div class='row'>\n                            <ImageScroller stores={this.props.stores} images={line.images} />\n                        </div>\n                    </div>\n                </div>\n            </div>\n        );\n    }\n}\n\nexport default DogHistoryLine;\n"],"sourceRoot":""}