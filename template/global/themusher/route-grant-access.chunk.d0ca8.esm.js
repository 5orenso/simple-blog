(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{qZTL:function(t,e,s){"use strict";s.r(e),function(t){var c,a=s("hosL"),o=s("Utv1"),r=s("/eY4"),l=s("Y3FI"),n=(s("go65"),s("OhSV")),i=s("fh8t"),h=s.n(i),d=s("ZOvn"),b=s("67HY"),g=s("gbHB"),f=s("B+py"),p=s("pJjI"),m=s("s4FZ");let u=Object(r.a)(c=class extends a.Component{constructor(t){var e;super(t),e=this,this.loadApplication=()=>{const{id:t}=this.state,{applicationStore:e}=this.props.stores;e.load(t)},this.loadTeam=async function(){e.setState({isLoading:!0});const{teamStore:t,workoutStore:s}=e.props.stores,{currentTeam:c}=s;await t.load(c),e.setState({isLoading:!1})},this.changeLanguage=t=>{const e=t.target.value,{appState:s}=this.props.stores;s.setLanguage(e)},this.grantAccess=async function(){const{userStore:t}=e.props.stores,{user:s}=t,{returnUrl:c,id:a,team:o}=e.state,r={grantedDate:new Date,returnUrl:c,team:o,appId:a};t.findApplicationById(a)||await t.saveField(s.id,"applications",r),e.setState({accessGranted:1})},this.denyAccess=()=>{Object(l.route)("/",!0)},this.saveInputParams=()=>{let{returnUrl:t,id:e}=this.props;t?(o.a.set("returnUrl",t),o.a.set("id",e)):(t=o.a.get("returnUrl"),e=o.a.get("id")),this.setState({returnUrl:t,id:e})},this.state={returnUrl:"",id:0}}componentWillMount(){this.saveInputParams()}componentDidMount(){this.loadApplication(),this.loadTeam()}render(){const{appState:e,userStore:s,applicationStore:c,workoutStore:o,teamStore:r}=this.props.stores,{subsection:l}=this.props,{returnUrl:i,accessGranted:u}=this.state,{currentTeam:O}=o,{user:j}=s,{language:w="en"}=e,{application:v}=c,{team:k}=r;if(!v)return Object(a.h)("div",{class:"container-fluid"},Object(a.h)("div",{class:"row"},Object(a.h)("div",{class:"col-10 offset-1 col-sm-8 offset-sm-2 col-md-6 offset-md-3 col-lg-4 offset-lg-4 pt-5"},Object(a.h)("h1",{class:"mt-5"},Object(a.h)("i",{class:"fas fa-paw"})," The Musher"),Object(a.h)("h5",{class:"mt-1 mb-5 font-weight-lighter"},Object(a.h)(n.c,{id:"grant-access.title"},"Grant access")),Object(a.h)("div",{class:"alert alert-danger",role:"alert"},Object(a.h)("h5",null,"Error"),"Application not found!"))));const{title:L,body:S,images:y}=v;return Object(a.h)("div",{class:"container-fluid"},Object(a.h)("div",{class:"row"},Object(a.h)("div",{class:"col-10 offset-1 col-sm-8 offset-sm-2 col-md-6 offset-md-3 col-lg-4 offset-lg-4 pt-5"},Object(a.h)("h1",{class:"mt-5"},Object(a.h)("i",{class:"fas fa-paw"})," The Musher"),Object(a.h)("h5",{class:"mt-1 mb-5 font-weight-lighter"},Object(a.h)(n.c,{id:"grant-access.title"},"Grant access")),Object(a.h)(m.a,{stores:this.props.stores,images:y,minHeight:"50px"}),Object(a.h)("h5",{class:"mt-3"},L),Object(a.h)("p",{class:"mt-3"},Object(a.h)(h.a,{markdown:d.a.replaceImages(S,y,w),markdownOpts:d.a.getMarkdownOptions()})))),Object(a.h)("div",{class:"row"},j.email?Object(a.h)(t,null,u?Object(a.h)(t,null,Object(a.h)("div",{class:"col-10 offset-1 col-sm-8 offset-sm-2 col-md-6 offset-md-3 col-lg-4 offset-lg-4 mt-3 border-top pt-3"},Object(a.h)("div",{class:"display-1 text-success text-center"},Object(a.h)("i",{class:"fas fa-check"})),Object(a.h)("p",null,Object(a.h)(n.c,{id:"grant-access.access-granted"},"Access granted. Now please click the button below to go back to")," ",L,"."),Object(a.h)("a",{class:"btn btn-success btn-block",href:`${i}?userId=${j.uuidv4}&teamId=${k.uuidv4}`,native:!0},Object(a.h)(n.c,{id:"grant-access.back-to-application"},"Back to"),": ",L," ",Object(a.h)("i",{class:"fas fa-arrow-right"})))):Object(a.h)(t,null,Object(a.h)("div",{class:"col-10 offset-1 col-sm-8 offset-sm-2 col-md-6 offset-md-3 col-lg-4 offset-lg-4 mt-3 border-top pt-3"},Object(a.h)("h5",{class:"font-weight-light"},Object(a.h)(n.c,{id:"grant-access.choose-team"},"Choose team")),Object(a.h)("div",{class:"col-12"},Object(a.h)(p.a,{stores:this.props.stores,callback:this.loadTeam,key:"teams-"+O,showAll:!1}))),Object(a.h)("div",{class:"col-10 offset-1 col-sm-8 offset-sm-2 col-md-6 offset-md-3 col-lg-4 offset-lg-4 mt-3 border-top pt-3"},Object(a.h)("h5",{class:"font-weight-light"},Object(a.h)(n.c,{id:"grant-access.data-shared"},"Data beeing shared"),":"),Object(a.h)("p",null,Object(a.h)("i",{class:"fas fa-user"}),": ",Object(a.h)(n.c,{id:"grant-access.fields-shared-person"},"Image, Name, email, cellphone, address")),Object(a.h)("p",null,Object(a.h)("i",{class:"fas fa-dog"}),": ",Object(a.h)(n.c,{id:"grant-access.fields-shared-dog"},"Image, Name, chipId, gender, birth, vaccines")),Object(a.h)("p",null,Object(a.h)("i",{class:"fas fa-users"}),": ",Object(a.h)(n.c,{id:"grant-access.fields-shared-team"},"Name, description, images"))),Object(a.h)("div",{class:"col-10 offset-1 col-sm-8 offset-sm-2 col-md-6 offset-md-3 col-lg-4 offset-lg-4 mt-3"},Object(a.h)("button",{class:"btn btn-primary btn-block",onClick:this.grantAccess},Object(a.h)("i",{class:"fas fa-check"})," ",Object(a.h)(n.c,{id:"grant-access.grant"},"Grant access")),Object(a.h)("button",{class:"mt-4 btn btn-sm btn-link text-muted float-right",onClick:this.denyAccess},Object(a.h)(n.c,{id:"grant-access.deny"},"Deny access"))))):Object(a.h)(t,null,!l&&Object(a.h)(b.a,{stores:this.props.stores,showLogo:!1,routeLoginOk:"/grant-access",routeLoginNew:"/grant-access/newUser",routeLoginForgot:"/grant-access/forgotPassword"}),"newUser"===l&&Object(a.h)(g.a,{stores:this.props.stores,showLogo:!1,routeLogin:"/grant-access",routeLoginForgot:"/grant-access/forgotPassword",skipPubSub:!0}),"forgotPassword"===l&&Object(a.h)(f.a,{stores:this.props.stores,showLogo:!1,routeLogin:"/grant-access",routeLoginNew:"/grant-access/newUser"}))),Object(a.h)("div",{class:"col-10 offset-1 col-sm-8 offset-sm-2 col-md-6 offset-md-3 col-lg-4 offset-lg-4"},Object(a.h)("div",{class:"form-row align-items-center"},Object(a.h)("div",{class:"col-auto my-1 mx-auto",style:"width: 80px;"},Object(a.h)("select",{class:"custom-select",style:"background-color: inherit; border: none;",onInput:this.changeLanguage},Object(a.h)("option",{value:"no",selected:"no"===w},"ðŸ‡³ðŸ‡´ NO"),Object(a.h)("option",{value:"en",selected:"en"===w},"ðŸ‡¬ðŸ‡§ EN"),Object(a.h)("option",{value:"es",selected:"es"===w},"ðŸ‡ªðŸ‡¸ ES"),Object(a.h)("option",{value:"de",selected:"de"===w},"ðŸ‡©ðŸ‡ª DE"))))))}})||c;e.default=u}.call(this,s("hosL").Fragment)}}]);
//# sourceMappingURL=route-grant-access.chunk.d0ca8.esm.js.map