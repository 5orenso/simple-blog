(window.webpackJsonp=window.webpackJsonp||[]).push([[59],{"6a5D":function(e,t,a){"use strict";function s(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,s)}return a}function n(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var c,r=a("hosL"),o=a("ox/y"),l=(a("Utv1"),a("/eY4")),i=(a("go65"),a("Y3FI")),h=a("OhSV"),d={menu:{profile:!1,main:!1},searchText:""};Object(l.a)(c=function(e){function t(t){var a;return(a=e.call(this,t)||this).toggleDropdown=function(e){var t=a.state.menu,s=e.target.dataset.name;!s&&e.target.parentNode&&(s=e.target.parentNode.dataset.name),s&&(t[s]=!t[s]),a.setState({menu:t})},a.toggleDarkmode=function(e){a.props.stores.appState.toggleDarkmode(),a.toggleDropdown(e)},a.toggleViewmode=function(e){var t=e.target.dataset.mode;!t&&e.target.parentNode&&(t=e.target.parentNode.dataset.mode),a.props.stores.appState.toggleViewmode(t),a.toggleDropdown(e)},a.reloadApp=function(){window.location.reload(!0)},a.adminLoadAll=function(){return new Promise((function(e,t){return Promise.resolve(a.props.stores.userStore.getInfo(!0)).then((function(){try{return e()}catch(e){return t(e)}}),t)}))},a.changeLanguage=function(e){var t=e.target.value;console.log("changeLanguage",t);var s=a.props.stores,n=s.appState,c=s.userStore,r=c.user,o=void 0===r?{}:r;o.email&&c.setLanguage({email:o.email,language:t}),n.setLanguage(t)},a.search=function(){var e=a.state.searchText;Object(i.route)("/search/"+e)},a.state=function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?s(Object(a),!0).forEach((function(t){n(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):s(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},d),a}var a,c;return c=e,(a=t).prototype=Object.create(c.prototype),a.prototype.constructor=a,a.__proto__=c,t.prototype.render=function(){var e=this.state,t=e.menu,a=this.props.stores,s=a.appState,n=a.userStore,c=s.darkmode,l=n.user,i=n.notifications,d=((void 0===i?[]:i).filter((function(e){return!e.read})),l.language),b=void 0===d?"en":d;return Object(r.h)("nav",{class:"navbar navbar-expand-lg navbar-themed fixed-top",style:"z-index: 99999;"},Object(r.h)("a",{class:"navbar-brand",href:"/"},Object(r.h)("img",{src:"./assets/logo.png",height:"37",class:"position-absolute",style:"top: 10px; left: 6px"}),Object(r.h)("span",{class:"font-weight-normal",style:"margin-left: 30px; font-size: 25px;"},"The Musher")),Object(r.h)("button",{class:"navbar-toggler",type:"button","data-name":"main",onClick:this.toggleDropdown},Object(r.h)("span",{class:"navbar-toggler-icon"})),Object(r.h)("div",{class:"collapse navbar-collapse "+(t.main?"show":""),id:"navbarSupportedContent"},Object(r.h)("ul",{class:"navbar-nav mr-auto ml-5"}),Object(r.h)("ul",{class:"navbar-nav ml-auto "},Object(r.h)("li",{class:"nav-item mr-2"},Object(r.h)("div",{class:"form-row align-items-center"},Object(r.h)("div",{class:"col-auto my-1",style:"width: 80px;"},Object(r.h)("select",{class:"custom-select",style:"background-color: inherit; border: none; padding: 0; height: 1.1em; font-size: 0.9em;",onInput:this.changeLanguage},Object(r.h)("option",{value:"no",selected:"no"===b},"ðŸ‡³ðŸ‡´ NO"),Object(r.h)("option",{value:"en",selected:"en"===b},"ðŸ‡¬ðŸ‡§ EN"),Object(r.h)("option",{value:"es",selected:"es"===b},"ðŸ‡ªðŸ‡¸ ES"),Object(r.h)("option",{value:"de",selected:"de"===b},"ðŸ‡©ðŸ‡ª DE"),Object(r.h)("option",{value:"fr",selected:"fr"===b},"ðŸ‡«ðŸ‡· FR"),Object(r.h)("option",{value:"ru",selected:"ru"===b},"ðŸ‡·ðŸ‡º RU"),Object(r.h)("option",{value:"se",selected:"se"===b},"ðŸ‡¸ðŸ‡ª SE"))))),Object(r.h)("li",{class:"nav-item d-block d-lg-none"},Object(r.h)(o.Link,{className:"nav-link",activeClassName:"active","data-name":"main",onClick:this.toggleDarkmode},Object(r.h)("i",{class:(c?"fas text-warning":"far")+" fa-moon"})," ",Object(r.h)(h.c,{id:"header.darkmode"},"Nattmodus"))),Object(r.h)("li",{class:"nav-item mr-2 d-none d-lg-block"},Object(r.h)("button",{class:"btn btn-link","data-name":"profile",onClick:this.toggleDarkmode},Object(r.h)("i",{class:(c?"fas text-warning":"far")+" fa-moon"}))))))},t}(r.Component))},atwK:function(e,t,a){"use strict";a.r(t),function(e){function s(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,s)}return a}function n(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?s(Object(a),!0).forEach((function(t){c(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):s(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function c(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function r(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}var o,l,i,h=a("hosL"),d=(a("QRet"),a("Utv1")),b=a("/eY4"),u=a("OhSV"),p=a("go65"),g=(a("fh8t"),a("cneo"),a("6a5D"),a("s4FZ")),m=a("ZOvn"),f=m.a.marginTop(!0),O=m.a.marginBottom(),j=(m.a.subMenuMarginTop(),m.a.getVaccineTypesVet()),v=d.a.getApiServer(),y={isLoading:!1,email:"",submenu:"ads",jwtToken:d.a.getJwtToken()},x=Object(b.a)(o=function(t){function a(){for(var e,a=arguments.length,s=new Array(a),n=0;n<a;n++)s[n]=arguments[n];return(e=t.call.apply(t,[this].concat(s))||this).selectTeam=function(t){return new Promise((function(a){return t.preventDefault(),e.setState({displayTeam:parseInt(t.target.value,10)}),a()}))},e}return r(a,t),a.prototype.render=function(){var t=this,a=this.props,s=a.teams,n=void 0===s?[]:s,c=a.displayUser,r=this.props.stores.userStore.isLoading,o=this.state.displayTeam,l=void 0===o?(n[0]?n[0]:{}).id:o;return Object(h.h)("div",{class:"bg-light p-0"},r.getDogs?Object(h.h)(e,null,"Loading..."):Object(h.h)(e,null,Object(h.h)("label",{for:"team"},Object(h.h)("i",{class:"fas fa-users"})," ",Object(h.h)(u.c,{id:"dog.veterinary.team"},"Team")),Object(h.h)("select",{class:"form-control form-control-lg mb-2",id:"team",onChange:this.selectTeam},Object(h.h)("option",{value:""},"-- ",Object(h.h)(u.c,{id:"dog.veterinary.choose-team"},"Choose team")," --"),n&&n.map((function(t){return Object(h.h)(e,null,Object(h.h)("option",{value:t.id},t.name))}))),n&&n.map((function(a){return Object(h.h)(e,null,l===a.id&&Object(h.h)(e,null,Object(h.h)(k,{stores:t.props.stores,dogs:a.dogs,displayUser:c})))}))))},a}(h.Component))||o,k=Object(b.a)(l=function(t){function a(e){var a;return(a=t.call(this,e)||this).selectDog=function(e){var t=e.target.closest("tr").dataset.id,s=a.state,n=s.selectedDogs,c=s.missingChipId,r=parseInt(t,10),o=n.indexOf(r);if(a.props.dogs.find((function(e){return e.id===r})).chipId.length<10)return c[r]=!c[r],a.setState({missingChipId:c}),"";-1===o?n.push(r):n.splice(o,1),a.setState({selectedDogs:n})},a.selectDogSection=function(e){var t=e.target.closest("i").dataset.id,s=a.state,n=s.selectedDogs,c=s.missingChipId,r=parseInt(t,10),o=n.indexOf(r);if(a.props.dogs.find((function(e){return e.id===r})).chipId.length<10)return c[r]=!c[r],a.setState({missingChipId:c}),"";-1===o?n.push(r):n.splice(o,1),a.setState({selectedDogs:n})},a.selectAllDogs=function(){for(var e=a.props.dogs,t=e.filter((function(e){return e.chipId.length>10})).map((function(e){return e.id})),s=e.filter((function(e){return e.chipId.length<10})).map((function(e){return e.id})),n=a.state.missingChipId,c=0,r=s.length;c<r;c+=1){var o=s[c];n[o]=!n[o]}a.setState({selectedDogs:t,missingChipId:n})},a.removeAllDogs=function(){a.setState({selectedDogs:[]})},a.selectVaccine=function(e){var t=e.target.closest("tr").dataset.id,s=a.state.selectedVaccines,n=parseInt(t,10),c=s.indexOf(n);-1===c?s.push(n):s.splice(c,1),a.setState({selectedVaccines:s})},a.addVaccinesToDogs=function(){return new Promise((function(e,t){var s,c,r,o,l,i,h,d,b,u,p,g,m,f;for(r=(s=a.state).selectedVaccines,o=s.vaccineDate,h=(l=a.props.stores).vaccineLogStore,b=[],u=a.props.dogs,p={id:(d=(i=l.userStore).user).id,firstname:d.firstname,lastname:d.lastname,email:d.email,image:d.image},g=function(e){for(var t=c[e],a=u.find((function(e){return e.id===t})),s={id:a.id,user:a.user,team:a.team,name:a.name,shortname:a.shortname,chipId:a.chipId},l=function(e){var t=r[e],a=j.find((function(e){return e.id===t})),c={date:o,id:a.id,name:a.name,agens:a.agens,comment:a.comment};b.push({dog:n({},s),vaccine:n({},c),veterinary:n({},p)})},i=0,h=r.length;i<h;i+=1)l(i)},m=0,f=(c=s.selectedDogs).length;m<f;m+=1)g(m);return Promise.resolve(h.insert({data:b})).then((function(){try{return a.setState({data:b,selectedDogs:[],selectedVaccines:[]}),i.addVaccineLogStatuses(b),e()}catch(e){return t(e)}}),t)}))},a.toggleShowAddVaccineToDogs=function(){var e=a.state.showAddVaccineToDogs;a.setState({showAddVaccineToDogs:!(void 0!==e&&e)})},a.state={missingChipId:{},selectedDogs:[],selectedVaccines:[],vaccineDate:d.a.isoDate(new Date,!1,!1,!0)},a}return r(a,t),a.prototype.render=function(){var t=this,a=this.state,s=a.selectedDogs,n=a.selectedVaccines,c=a.missingChipId,r=a.data,o=a.showAddVaccineToDogs,l=void 0!==o&&o,i=a.vaccineDate,b=this.props.stores.userStore,m=b.isAdmin,f=b.vaccineLogStatuses,O=this.props.dogs,y=j.filter((function(e){return n.indexOf(e.id)>-1})).map((function(e){return e.agens.map((function(e){return e.name}))})).flat();return Object(h.h)(e,null,Object(h.h)("div",{class:"table-responsive mt-3"},Object(h.h)("button",{class:"btn btn-lg btn-block btn-outline-success mt-5",onClick:this.selectAllDogs},Object(h.h)(u.c,{id:"dog.veterinary.select-all-dogs"},"Select all dogs")),s&&s.length>0&&Object(h.h)(e,null,Object(h.h)("button",{class:"btn btn-sm btn-block btn-link",onClick:this.removeAllDogs},Object(h.h)(u.c,{id:"dog.veterinary.remove-all-dogs"},"Remove all dogs"))),Object(h.h)("table",{class:"table table-striped"},Object(h.h)("thead",null,Object(h.h)("tr",null,Object(h.h)("th",{scope:"col",style:"width: 100px;"},"Â "),Object(h.h)("th",{scope:"col"},Object(h.h)(u.c,{id:"dog.veterinary.name"},"Name")))),Object(h.h)("tbody",null,O&&O.map((function(a){var n;a.images&&a.images[0]&&(n=a.images[0]),a.image&&(n=a.image);var r=s.indexOf(a.id)>-1,o=c[a.id];return Object(h.h)(e,null,Object(h.h)("tr",{class:"pointerCursor",onClick:t.selectDog,"data-id":a.id},Object(h.h)("td",{class:"position-relative"},Object(h.h)("div",{class:"text-center border rounded-circle imageRounded text-muted pt-2",style:n?"background-image: url('"+n.s3ThumbLink+"'); background-size: cover;":""},!n&&Object(h.h)("span",{class:"font-weight-lighter",style:"font-size: 35px;"},d.a.ucfirst(a.name,!0))),r&&Object(h.h)("span",{class:"position-absolute display-4",style:"top: 0px; left: 0px;"},Object(h.h)("i",{class:"fas fa-check text-success"})),o&&Object(h.h)("span",{class:"position-absolute display-4",style:"top: 0px; left: 0px;"},Object(h.h)("i",{class:"fas fa-hand-paper text-danger"}))),Object(h.h)("td",null,Object(h.h)("span",{class:"float-right"},a.birth&&Object(h.h)("span",{class:"mr-2"},d.a.age(a.birth,a.deceased)),"female"===a.gender?Object(h.h)("i",{class:"fas fa-venus"}):Object(h.h)("i",{class:"fas fa-mars"})),Object(h.h)("h5",null,a.name," ",a.shortname&&Object(h.h)("span",{class:"font-weight-lighter"}," - '",a.shortname,"'")),Object(h.h)("div",null,Object(h.h)("span",{class:"text-muted"},a.chipId&&Object(h.h)(e,null,Object(h.h)("i",{class:"fas fa-microchip"})," ",a.chipId))),Object(h.h)("div",null,f&&f.filter((function(e){return e.chipId===a.chipId})).map((function(t){return Object(h.h)("span",{class:"badge badge-"+(t.inKarens?"warning":"success")+" mr-2 mb-1"},t.vaccineAgens.name,Object(h.h)("span",{class:"font-weight-lighter ml-2"},Object(h.h)("i",{class:"fas fa-calendar-check"})," ",d.a.isoDate(t.vaccineAgens.durationEnd,!1,!1,!0),t.inKarens&&Object(h.h)(e,null,Object(h.h)("br",null),"(karens: ",d.a.format(t.karensDaysLeft,0)," days left)")))}))),m&&Object(h.h)(e,null,Object(h.h)("h5",null,"Uploaded files for this dog:"),a.files&&a.files.length>0?Object(h.h)(e,null,Object(h.h)(g.a,{stores:t.props.stores,images:a.files.filter((function(e){return e.s3LargeLink}))})):Object(h.h)(e,null)))))}))))),Object(h.h)("div",{class:"mt-5"},s&&s.length>0&&Object(h.h)(e,null,Object(h.h)("div",{class:"form-row align-items-center"},Object(h.h)("div",{class:"col-12"},Object(h.h)("label",{for:"vaccineTypeInput"},Object(h.h)("i",{class:"fas fa-syringe"})," ",Object(h.h)(u.c,{id:"dog.addlog.vaccine-type"},"Vaksinetype")),Object(h.h)("table",{class:"table table-striped"},Object(h.h)("thead",null,Object(h.h)("tr",null,Object(h.h)("th",{scope:"col",style:"width: 100px;"},"Â "),Object(h.h)("th",{scope:"col"},Object(h.h)(u.c,{id:"dog.veterinary.name"},"Name")),Object(h.h)("th",{scope:"col",style:"width: 130px;"},Object(h.h)(u.c,{id:"dog.veterinary.image"},"Image")))),Object(h.h)("tbody",null,j&&j.map((function(a){var s=n.indexOf(a.id)>-1;return Object(h.h)("tr",{"data-id":a.id,onClick:t.selectVaccine},Object(h.h)("td",null,s?Object(h.h)(e,null,Object(h.h)("div",{class:"display-4 text-center"},Object(h.h)("i",{class:"fas fa-check text-success"}))):Object(h.h)(e,null,Object(h.h)("div",{class:"display-4 border rounded-lg text-center"},Object(h.h)("i",{class:"fas fa-radio text-success"})))),Object(h.h)("td",null,a.name,Object(h.h)("br",null),Object(h.h)("small",null,a.agens.map((function(t){return Object(h.h)(e,null,Object(h.h)("span",{class:"badge badge-dark mr-2 mt-1"},t.name," (",t.durationMonths," months, ",t.karensDays," days)"))})))),Object(h.h)("td",null,a.image&&Object(h.h)("img",{class:"img-fluid",src:""+v+a.image})))}))))),Object(h.h)("div",{class:"col-12 pt-4"},Object(h.h)("label",{for:"team"},Object(h.h)("i",{class:"fas fa-dog"})," ",Object(h.h)(u.c,{id:"dog.veterinary.choosen-dogs"},"Valgte hunder")),Object(h.h)("div",{class:"d-flex flex-wrap"},O&&O.map((function(a){var n;if(a.images&&a.images[0]&&(n=a.images[0]),a.image&&(n=a.image),!(s.indexOf(a.id)>-1))return"";var c=f.filter((function(e){return e.chipId===a.chipId})).map((function(e){return e.vaccineAgens.name})).flat();return Object(h.h)(e,null,Object(h.h)("section",{class:"p-2 position-relative",style:"width: 120px;"},Object(h.h)("div",{class:"text-center border rounded-circle imageRounded text-muted pt-2",style:n?"background-image: url('"+n.s3ThumbLink+"');":""},!n&&Object(h.h)("span",{class:"font-weight-lighter",style:"font-size: 35px;"},d.a.ucfirst(a.name,!0))),Object(h.h)("small",null,a.name),Object(h.h)("br",null),Object(h.h)("small",{class:"text-muted"},a.birth&&Object(h.h)("span",{class:"mr-2"},d.a.age(a.birth,a.deceased)),"female"===a.gender?Object(h.h)("i",{class:"fas fa-venus"}):Object(h.h)("i",{class:"fas fa-mars"})),y&&Object(h.h)(e,null,y.filter((function(e){return c.indexOf(e)>-1})).map((function(t){return Object(h.h)(e,null,Object(h.h)("span",{class:"badge badge-danger mr-2 mb-1"},Object(h.h)("i",{class:"fas fa-exclamation-triangle"})," ",t))}))),Object(h.h)("div",{class:"position-absolute",style:"top: 0px; right: 0px; font-size: 2.0em;"},Object(h.h)("i",{class:"fas fa-times-circle text-danger",onClick:t.selectDogSection,"data-id":a.id}))))})))),Object(h.h)("div",{class:"col-12 pt-4"},Object(h.h)("label",null,Object(h.h)("i",{class:"fas fa-syringe"})," ",Object(h.h)(u.c,{id:"dog.veterinary.chosen-vaccines"},"Valgte vaksiner")),j&&j.map((function(t){return n.indexOf(t.id)>-1?Object(h.h)("div",{class:"mb-3"},Object(h.h)("span",{class:"font-weight-lighter"},"+")," ",t.name,Object(h.h)("br",null),Object(h.h)("small",null,t.agens.map((function(t){return Object(h.h)(e,null,Object(h.h)("span",{class:"badge badge-dark mr-2 mt-1"},t.name," (",t.durationMonths," months, ",t.karensDays," days)"))})))):""}))),n&&n.length>0?Object(h.h)(e,null,Object(h.h)("div",{class:"col-12 pt-4"},Object(h.h)("label",null,Object(h.h)("i",{class:"fas fa-calendar-alt"})," ",Object(h.h)(u.c,{id:"dog.veterinary.vaccine-date"},"Dato for vaksine")),Object(h.h)(u.b,null,Object(h.h)("input",{type:"date",class:"form-control form-control-lg mb-2",id:"vetSearch",placeholder:Object(h.h)(u.c,{id:"dog.veterinary.vaccine-date-placeholder"},"Velg dato for vaksine. Dersom vaksine er dagens dato, sÃ¥ trenger du ikke velge."),onInput:Object(p.a)(this,"vaccineDate"),value:i}))),l?Object(h.h)(e,null,Object(h.h)("div",{class:"col-12 pt-4"},Object(h.h)("h5",null,Object(h.h)(u.c,{id:"dog.veterinary.are-you-sure",fields:{dogs:s.length}},"Are you sure you want to add vaccine to ",s.length," dog?")),Object(h.h)("button",{type:"button",class:"btn btn-lg btn-block btn-success mb-2",onClick:this.addVaccinesToDogs},Object(h.h)(u.c,{id:"dog.veterinary.yes-iam-sure"},"Yes, I'm sure!")),Object(h.h)("button",{type:"button",class:"btn btn-lg btn-block btn-danger mb-2",onClick:this.toggleShowAddVaccineToDogs},Object(h.h)(u.c,{id:"dog.veterinary.cancel"},"Cancel")))):Object(h.h)(e,null,Object(h.h)("div",{class:"col-12 pt-4"},Object(h.h)("button",{type:"button",class:"btn btn-lg btn-block btn-success mb-2",onClick:this.toggleShowAddVaccineToDogs},Object(h.h)(u.c,{id:"dog.veterinary.add-vaccine-to-dogs",fields:{dogs:s.length}},"Add vaccine to ",s.length," dogs"))))):Object(h.h)(e,null,Object(h.h)("h3",{class:"text-muted mt-4"},Object(h.h)(u.c,{id:"dog.veterinary.choose-vaccines"},"Velg vaksiner i listen over")))))),r&&Object(h.h)(e,null,Object(h.h)("div",{class:"mt-5"},Object(h.h)("div",{class:"row"},Object(h.h)("div",{class:"col-12 pt-4"},Object(h.h)("h5",null,Object(h.h)(u.c,{id:"dog.veterinary.recepipt"},"Receipt")),Object(h.h)("table",{class:"table table-striped"},Object(h.h)("thead",null,Object(h.h)("tr",null,Object(h.h)("th",{scope:"col"},Object(h.h)(u.c,{id:"dog.veterinary.dog"},"Dog")),Object(h.h)("th",{scope:"col"},Object(h.h)(u.c,{id:"dog.veterinary.vaccine"},"Vaccine")))),Object(h.h)("tbody",null,r&&r.map((function(t){var a=t.dog,s=t.vaccine;return Object(h.h)(e,null,Object(h.h)("tr",null,Object(h.h)("td",null,a.name,Object(h.h)("br",null),Object(h.h)("small",{class:"text-muted"},a.chipId)),Object(h.h)("td",null,s.name,Object(h.h)("small",null,s.agens.map((function(t){return Object(h.h)(e,null,Object(h.h)("span",{class:"badge badge-dark mr-2 mt-1"},t.name," (",t.durationMonths," months, ",t.karensDays," days)"))}))))))})))))))))},a}(h.Component))||l,w=Object(b.a)(i=function(t){function a(e){var a;return(a=t.call(this,e)||this).searchForMusher=function(e){return new Promise((function(t,s){var n,c;return e.preventDefault(),n=a.props.stores.userStore,c=a.state.search,a.setState({isSearcing:!0,displayUser:null}),Promise.resolve(n.searchUsers({search:c})).then((function(){try{return a.setState({isSearcing:!1}),t()}catch(e){return s(e)}}),s)}))},a.selectMusher=function(e){return new Promise((function(t,s){function n(){return t()}var c,r;return c=e.target.closest("tr").dataset.id,a.state.displayUser===(r=parseInt(c,10))?(a.setState({displayUser:null}),n.call(this)):(a.setState({displayUser:r}),Promise.resolve(a.props.stores.userStore.getDogs({id:r})).then(function(){try{return n.call(this)}catch(e){return s(e)}}.bind(this),s))}))},a.state=n({},y),a}r(a,t);var s=a.prototype;return s.componentDidMount=function(){},s.componentWillReceiveProps=function(){},s.render=function(){var t=this,a=this.state,s=a.displayUser,n=a.isSearcing,c=this.props.stores,r=c.userStore,o=r.searchUsersResult,l=r.searchUserTeams,i=r.user,b=this.props,g=b.col,j=void 0===g?12:g,v=b.offset,y=void 0===v?0:v;if(!r.isVeterinary)return Object(h.h)(e,null,Object(h.h)("div",{class:"container-fluid h-100"},Object(h.h)("div",{class:"row h-100"},Object(h.h)("div",{class:"col-12 text-center my-auto"},Object(h.h)("div",{class:"display-1 text-danger"},Object(h.h)("i",{class:"fas fa-hand-paper"})),Object(h.h)("h5",null,Object(h.h)(u.c,{id:"dog.veterinary.no-access"},"No access!")),Object(h.h)("p",null,Object(h.h)(u.c,{id:"dog.veterinary.attempts-logged"},"All attempts are logged and reported.")),Object(h.h)("a",{class:"mt-3 btn btn-lg btn-primary",href:"/"},Object(h.h)(u.c,{id:"dog.veterinary.goto-frontpage"},"Go to the frontpage"))))));var k=m.a.getImage({user:i}),w=m.a.displayNameShort(i),S=m.a.displayName(i,!0);return Object(h.h)(e,null,Object(h.h)("div",{class:"container-fluid",style:"margin-bottom: "+O+"; margin-top: "+f+";"},Object(h.h)("div",{class:"row"},Object(h.h)("div",{class:"col-"+j+" offset-"+y+" col-sm-8 col-lg-8 offset-sm-2 offset-lg-2"},Object(h.h)("div",{class:"d-flex position-relative mb-3"},Object(h.h)("div",{class:"text-center border rounded-circle imageRounded imageRoundedSmall",style:k?'background-image: url("'+k+'"); background-size: cover;':""},!k&&Object(h.h)("div",{class:"text-muted",style:"font-size: 20px; padding-top: 3px;"},w)),Object(h.h)("div",{class:"flex-grow-1 pl-3 text-overflow",style:"line-height: 0.9em;"},Object(h.h)("h1",{class:"mb-0"},Object(h.h)(u.c,{id:"dog.veterinary.title"},"Veterinary search")),Object(h.h)("small",{class:"text-muted"},S))),Object(h.h)("form",{onSubmit:this.searchForMusher},Object(h.h)("div",{class:"form-row align-items-center"},Object(h.h)("div",{class:"col-10"},Object(h.h)("label",{class:"sr-only",for:"vetSearch"},Object(h.h)(u.c,{id:"dog.veterinary.name"},"Name")),Object(h.h)(u.b,null,Object(h.h)("input",{type:"text",class:"form-control form-control-lg mb-2",id:"vetSearch",placeholder:Object(h.h)(u.c,{id:"dog.veterinary.search-placeholder"},"Search for musher by email, cellphone or name..."),onInput:Object(p.a)(this,"search")}))),Object(h.h)("div",{class:"col-2"},Object(h.h)("button",{type:"button",class:"btn btn-lg btn-primary mb-2",onClick:this.searchForMusher},Object(h.h)(u.c,{id:"dog.veterinary.search"},"Search")))))),Object(h.h)("div",{class:"col-"+j+" offset-"+y+" col-sm-8 col-lg-8 offset-sm-2 offset-lg-2"},n&&Object(h.h)(e,null,Object(h.h)("div",{class:"spinner-border text-primary",role:"status"},Object(h.h)("span",{class:"sr-only"},Object(h.h)(u.c,{id:"dog.veterinary.searching"},"Searcing...")))),o&&0!==o.length?Object(h.h)("div",{class:"table-responsive"},Object(h.h)("table",{class:"table table-striped"},Object(h.h)("thead",null,Object(h.h)("tr",null,Object(h.h)("th",{scope:"col",style:"width: 100px;"},"Â "),Object(h.h)("th",{scope:"col"},Object(h.h)(u.c,{id:"dog.veterinary.name"},"Name")))),Object(h.h)("tbody",null,o&&o.filter((function(e){return!s||e.id===s})).map((function(a){var n;return a.images&&a.images[0]&&(n=a.images[0]),a.image&&(n=a.image),Object(h.h)(e,null,Object(h.h)("tr",{class:"pointerCursor",onClick:t.selectMusher,"data-id":a.id},Object(h.h)("td",null,Object(h.h)("div",{class:"text-center border rounded-circle imageRounded text-muted pt-2",style:n?"background-image: url('"+n.s3ThumbLink+"');":""},!n&&Object(h.h)("span",{class:"font-weight-lighter",style:"font-size: 35px;"},a.firstname?Object(h.h)(e,null,d.a.ucfirst(a.firstname,!0),d.a.ucfirst(a.lastname,!0)):Object(h.h)(e,null,d.a.ucfirst(a.email,!0))))),Object(h.h)("td",null,a.firstname," ",a.lastname,Object(h.h)("br",null),Object(h.h)("div",null,a.facebook&&Object(h.h)("a",{class:"mr-2",href:m.a.asFacebookLink(a.facebook),target:"_blank",rel:"noreferrer"},Object(h.h)("i",{class:"fab fa-facebook-square"})),a.instagram&&Object(h.h)("a",{class:"mr-2",href:m.a.asInstagramLink(a.instagram),target:"_blank",rel:"noreferrer"},Object(h.h)("i",{class:"fab fa-instagram"}))),Object(h.h)("i",{class:"fas fa-mobile-alt"})," ",a.cellphone,Object(h.h)("i",{class:"fas fa-envelope ml-3"})," ",a.email)),s===a.id&&Object(h.h)(e,null,Object(h.h)("tr",null,Object(h.h)("td",{colspan:"2"},Object(h.h)(x,{stores:t.props.stores,teams:l,displayUser:s})))))}))))):Object(h.h)(e,null,"Â ")))))},a}(h.Component))||i;t.default=w}.call(this,a("hosL").Fragment)},s4FZ:function(e,t,a){"use strict";(function(e){function s(e){return r.a.isObject(e)&&e.s3LargeLink}var n,c=a("hosL"),r=a("Utv1"),o=a("/eY4"),l=(a("OhSV"),Object(o.a)(n=function(t){function a(e){var a;return(a=t.call(this,e)||this).scrollImages=function(e){var t=a.props,s=t.callback,n=void 0===s?function(){}:s,c=e.target,r=c.scrollLeft/c.clientWidth,o=Math.round(r),l=Math.abs(o-r);(Number.isInteger(r)||l<.1)&&(a.setState({imageIdx:o}),n(o))},a.onClickScrollLeft=function(){var e=a.imageScrollerRef;e.scrollBy({top:0,left:0-e.clientWidth,behavior:"smooth"})},a.onClickScrollRight=function(){var e=a.imageScrollerRef;e.scrollBy({top:0,left:e.clientWidth,behavior:"smooth"})},a.distance=function(e){return Math.hypot(e.touches[0].pageX-e.touches[1].pageX,e.touches[0].pageY-e.touches[1].pageY)},a.pinchZoomOnTouchStart=function(e){if(2===e.touches.length){e.preventDefault(),e.stopPropagation();var t={};t.x=(e.touches[0].pageX+e.touches[1].pageX)/2,t.y=(e.touches[0].pageY+e.touches[1].pageY)/2,t.distance=a.distance(e),a.setState({start:t})}},a.pinchZoomOnTouchMove=function(e){var t=a.state,s=t.imageElementScale,n=t.imageElementMaxScale,c=a.state.start;if(2===e.touches.length){var r;if(e.preventDefault(),e.stopPropagation(),e.scale)r=e.scale;else r=a.distance(e)/c.distance;s=Math.min(Math.max(1,r),n),a.setState({imageElementScale:s},(function(){var t="translate3d("+2*((e.touches[0].pageX+e.touches[1].pageX)/2-c.x)+"px, "+2*((e.touches[0].pageY+e.touches[1].pageY)/2-c.y)+"px, 0) scale("+s+")";e.target.style.transition="",e.target.style.transform=t,e.target.style.WebkitTransform=t,e.target.style.zIndex="100000"}))}},a.pinchZoomOnTouchEnd=function(e){a.setState({imageElementScale:1}),e.target.style.transition="transform 250ms",e.target.style.transform="",e.target.style.WebkitTransform="",e.target.style.zIndex=""},a.state={imageIdx:0,imageElementScale:1,imageElementMaxScale:5,start:{}},a}var n,r;return r=t,(n=a).prototype=Object.create(r.prototype),n.prototype.constructor=n,n.__proto__=r,a.prototype.render=function(){var t=this,a=this.state,n=a.imageIdx,r=a.imageElementScale,o=this.props,l=o.images,i=o.id,h=o.dblClick,d=void 0===h?function(){}:h,b=o.likeRef,u=void 0===b?{}:b,p=o.noimagestext,g=o.minHeight,m=void 0===g?"100px":g,f=this.props.stores.appState.isCordova,O=n>0,j=n<l.length-1;return l&&0!==l.length?Object(c.h)("div",{class:"w-100 position-relative"},Object(c.h)("div",{class:"d-flex flex-row flex-nowrap bg-light border-top border-bottom no-scrollbar",style:"\n                        overflow-x: "+(r>1&&1===l.length?"visible !important":"auto")+";\n                        overflow-y: "+(r>1?"visible !important":"auto")+";\n                        scroll-snap-type: x mandatory;\n                    ",onScroll:this.scrollImages,ref:function(e){return t.imageScrollerRef=e}},l&&l.filter(s).map((function(a){return Object(c.h)("div",{class:"col-12 clearfix p-0"},Object(c.h)("div",{class:"w-100 h-100 text-center rounded-lg imageContainer d-flex justify-content-center align-items-center position-relative ",style:"\n                                    scroll-snap-align: start;\n                                    flex-wrap: wrap;\n                                ",onDblclick:d,"data-id":i,onTouchstart:function(e){e.stopPropagation()},onTouchend:function(e){e.stopPropagation()},onTouchmove:function(e){e.stopPropagation()}},Object(c.h)("div",{class:"position-absolute w-100 h-100",style:"\n                                        background-image: url('"+a.s3SmallLink+"'); background-size: cover;\n                                        filter: blur(10px);\n                                        opacity: 0.5;\n                                    "}),a.s3LargeLink?Object(c.h)("img",{class:"img-fluid position-relative",src:a.s3LargeLink+(a.updatedDate?"?updated="+a.updatedDate:""),loading:"lazy",style:"max-height: 75vh; min-height: "+m+"; ",onTouchstart:t.pinchZoomOnTouchStart,onTouchend:t.pinchZoomOnTouchEnd,onTouchmove:t.pinchZoomOnTouchMove}):Object(c.h)(e,null,Object(c.h)("span",{class:"display-1 text-muted"},Object(c.h)("i",{class:"fas fa-camera"}))),a.title&&Object(c.h)("div",{class:"position-absolute w-100 text-center",style:"bottom: 0px; background-color: rgba(0, 0, 0, 0.5);"},a.title)),u[i]&&Object(c.h)("span",{class:"likeHeart position-absolute text-white display-1",style:"top: calc(50% - 50px); left: calc(50% - 50px); width: 100px; height: 100px;"},Object(c.h)("i",{class:"fas fa-heart likeStory"})))}))),l&&l.length>1&&Object(c.h)(e,null,Object(c.h)("div",{class:"w-100 text-center"},Object(c.h)("small",null,Object(c.h)("small",null,l&&l.filter(s).map((function(t,a){return Object(c.h)(e,null,Object(c.h)("i",{class:(a===n?"fas":"far")+" fa-circle mr-1"}))}))))),Object(c.h)("div",{class:"position-absolute text-white font-weight-lighter px-1 py-1 rounded-lg",style:"top: 10px; right: 10px; background-color: rgba(0, 0, 0, 0.3); line-height: 1.0em;"},Object(c.h)("small",null,n+1," / ",l.length))),f?Object(c.h)(e,null):Object(c.h)(e,null,O&&Object(c.h)("div",{class:"position-absolute d-none d-lg-block",style:"top: 50%; left: 5px;"},Object(c.h)("button",{type:"button",class:"btn btn-link text-secondary",style:"font-size: 3.0em; opacity: 0.7;",onClick:this.onClickScrollLeft},Object(c.h)("i",{class:"fas fa-arrow-circle-left"}))),j&&Object(c.h)("div",{class:"position-absolute d-none d-lg-block",style:"top: 50%; right: 5px;"},Object(c.h)("button",{type:"button",class:"btn btn-link text-secondary",style:"font-size: 3.0em; opacity: 0.7;",onClick:this.onClickScrollRight},Object(c.h)("i",{class:"fas fa-arrow-circle-right"}))))):p?Object(c.h)(e,null,Object(c.h)("div",{class:"col-12 text-center text-muted"},Object(c.h)("div",{class:"display-1"},Object(c.h)("i",{class:"fas fa-camera"})),Object(c.h)("h3",{class:"font-weight-lighter"},p))):Object(c.h)(e,null)},a}(c.Component))||n);t.a=l}).call(this,a("hosL").Fragment)}}]);
//# sourceMappingURL=route-veterinary.chunk.d441e.js.map