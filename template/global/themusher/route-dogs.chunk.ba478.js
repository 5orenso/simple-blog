(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{RUc2:function(t,e,s){"use strict";s.r(e),function(t){function o(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,o)}return s}function n(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?o(Object(s),!0).forEach((function(e){c(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):o(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}function c(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}var l,a=s("hosL"),i=s("Utv1"),r=s("/eY4"),d=(s("cneo"),s("OhSV")),h=s("ZOvn"),b=(s("KDoM"),s("2X7c")),u=s("7g1v"),p=(s("mPUg"),s("pJjI")),f=s("epqT"),g=s("/DnB"),O=h.a.marginTop(!0),j=h.a.marginBottom(),m=h.a.subMenuMarginTop(),y={isLoading:!1,submenu:"all",showDaysBackEdit:!1,showAllDogs:!1},w=Object(r.a)(l=function(e){function s(t){var s;return(s=e.call(this,t)||this).loadDogs=function(t){return new Promise((function(e,o){var n,c,l,a,i,r,d;return void 0===t&&(t=s.props),n=s.state.showAllDogs,s.setState({isLoading:!0}),a=(c=s.props.stores).userStore,i=c.messageStore,r=(l=c.dogStore).daysBack,d={team:l.currentTeam},n&&(d.deceased=1),Promise.resolve(Promise.all([s.loadWorkoutPlans(t),l.load({query:d,addData:["team","user","workoutSummary","vaccineStatuses","historyStatuses","vaccineLogStatuses","allDogs"]}),l.getDogsWithTraining({daysBack:r}),a.getNotifications(),i.getUnReadMessages()])).then((function(){try{return s.setState({isLoading:!1}),e()}catch(t){return o(t)}}),o)}))},s.loadWorkoutPlans=function(t){return new Promise((function(e,o){function n(){return s.setState({isLoading:!1}),e()}var c,l,a,r,d,h,b,u;return void 0===t&&(t=s.props),s.setState({isLoading:!0}),c=t.year,l=(new Date).getMonth()+1,a=i.a.getYear(),r=parseInt(c||(l<8?a-1:a),10),b=(d=t.stores).workoutStore.currentTeam,(h=d.workoutPlanStore).updateItem("workoutPlans",[]),h.updateItem("workoutPlan",{}),h.resetGraphPlanWeekDistanceCurrent(),b?Promise.resolve(h.load({query:{team:b,seasonYear:r,seasonMonth:6}})).then(function(){try{if((u=h.workoutPlans[0]||{}).id)return Promise.resolve(h.load(u.id)).then(function(){try{return h.prepareWeekGraphs({year:c}),t.call(this)}catch(t){return o(t)}}.bind(this),o);function t(){return n.call(this)}return t.call(this)}catch(t){return o(t)}}.bind(this),o):n.call(this)}))},s.toggleDaysBackEdit=function(){s.setState({showDaysBackEdit:!s.state.showDaysBackEdit})},s.toggleShowAllDogs=function(){s.setState({showAllDogs:!s.state.showAllDogs},(function(){return s.loadDogs()}))},s.setHistoryType=function(t){s.setState({historyType:t})},s.chooseSubmenu=function(t){s.setState({submenu:t.target.parentElement.dataset.menu||t.target.dataset.menu})},s.chooseDaysBack=function(t){var e=parseInt(t.target.parentElement.dataset.daysback||t.target.dataset.daysback,10),o=s.props.stores.dogStore;o.setDaysBack(e),o.getDogsWithTraining({daysBack:e}),s.toggleDaysBackEdit()},s.selectDog=function(t){var e=t.target.closest("tr").dataset.chipid,o=s.state.selectedDogs;if(o.indexOf(e)>-1){var n=o.findIndex((function(t){return t===e}));o.splice(n,1)}else o.push(e);s.setState({selectedDogs:o})},s.sendChiplist=function(){return new Promise((function(t,e){return Promise.resolve(s.props.stores.dogStore.sendChiplistByEmail(s.state.selectedDogs)).then((function(o){try{return s.setState({sendChiplistResponse:o}),t()}catch(t){return e(t)}}),e)}))},s.state=n(n({},y),{},{selectedDogs:[]}),s}var o,c;c=e,(o=s).prototype=Object.create(c.prototype),o.prototype.constructor=o,o.__proto__=c;var l=s.prototype;return l.componentDidMount=function(){this.loadDogs()},l.render=function(){var e=this,s=this.props.scrolledDown,o=this.state,n=o.isLoading,c=o.historyType,l=o.submenu,r=o.showDaysBackEdit,y=o.showAllDogs,w=o.selectedDogs,v=o.sendChiplistResponse,k=this.props.stores,x=k.dogStore,D=k.appState,S=x.daysBack,C=x.currentTeam,P=k.userStore.user.language,B=h.a.getHistoryMap(void 0===P?"en":P),T=D.darkmode,L=x.dogs,E=x.workoutSummaryCurrent,I=function(){return!0};if(L)switch(l){case"all":I=function(){return!0};break;case"leadOnly":I=function(t){return!!(t.positions&&t.positions.lead&&t.positions.lead.distanceKm>0)};break;case"pointOnly":I=function(t){return!!(t.positions&&t.positions.point&&t.positions.point.distanceKm>0)};break;case"teamOnly":I=function(t){return!!(t.positions&&t.positions.team&&t.positions.team.distanceKm>0)};break;case"wheelOnly":I=function(t){return!!(t.positions&&t.positions.wheel&&t.positions.wheel.distanceKm>0)}}var A=L.filter(I);return Object(a.h)("div",{class:"container-fluid",style:"margin-bottom: "+j+"; margin-top: "+O+";"},Object(a.h)("div",{class:"row fixed-top",style:"margin-top: "+(s>0?0:m)+"; background-color: "+(T?"#191d21":"#f8f9fa")+"; transition: all 0.3s ease-in-out;"},Object(a.h)("div",{class:"col text-center border-bottom border-primary subtopmenu"},Object(a.h)("nobr",null,Object(a.h)("a",{href:"/dogs",class:"text-primary stretched-link"},Object(a.h)("i",{class:"fas fa-chart-line"})," ",Object(a.h)(d.c,{id:"dogs.dashboard"},"Oversikt")))),Object(a.h)("div",{class:"col text-center subtopmenu"},Object(a.h)("nobr",null,Object(a.h)("a",{href:"/dogs/list",class:"text-secondary stretched-link"},Object(a.h)("i",{class:"fas fa-list"})," ",Object(a.h)(d.c,{id:"dogs.list"},"Liste")))),Object(a.h)("div",{class:"col text-center subtopmenu"},Object(a.h)("nobr",null,Object(a.h)("a",{href:"/dogs/feed",class:"text-secondary stretched-link"},Object(a.h)("i",{class:"fas fa-rss"})," ",Object(a.h)(d.c,{id:"dogs.feed"},"Feed")))),Object(a.h)("div",{class:"col text-center subtopmenu"},Object(a.h)("nobr",null,Object(a.h)("a",{href:"/dogs/todo",class:"text-secondary stretched-link"},Object(a.h)("i",{class:"fas fa-calendar-check"})," ",Object(a.h)(d.c,{id:"dogs.todo"},"Todo"))))),Object(a.h)("div",{class:"row"},Object(a.h)("div",{class:"col-12"},Object(a.h)("div",{class:"row"},Object(a.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 px-0 mb-2 border-bottom"},Object(a.h)(p.a,{stores:this.props.stores,callback:this.loadDogs})),Object(a.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 px-0 pb-2 clearfix"},Object(a.h)("span",{class:"float-right"},Object(a.h)("a",{class:"btn btn-sm btn-primary ml-2",href:"/dogs/edit/new"},Object(a.h)("i",{class:"fas fa-plus"})," ",Object(a.h)(d.c,{id:"dogs.add-dogs"},"Legg til hunder"))),Object(a.h)(b.a,{stores:this.props.stores,dog:{},callback:this.loadDogs})),!n&&L&&0===L.length&&Object(a.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 text-muted"},Object(a.h)("div",{class:"text-center mb-5"},Object(a.h)("div",{class:"display-1"},Object(a.h)("i",{class:"fas fa-dog"})),Object(a.h)("h5",null,Object(a.h)(d.c,{id:"dogs.no-dogs-registered"},"Ingen hunder er registrert ennå."))),Object(a.h)(d.c,{id:"dogs.howto-add-1"},"Slik kommer du i gang:"),Object(a.h)("ol",null,Object(a.h)("li",null,Object(a.h)(d.c,{id:"dogs.howto-add-2"},'Trykk på knappen "Legg til hunder" rett nedenfor.'))))),Object(a.h)("div",{class:"row"},Object(a.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 my-3"},Object(a.h)("div",{class:"row"},Object(a.h)("div",{class:"w-100 overflow-hidden"},Object(a.h)("div",{class:"d-flex flex-row flex-nowrap pb-2 px-1",style:"overflow: auto; scroll-snap-type: x mandatory;"},Object(a.h)("div",{class:"col px-0 pt-2 pl-1"},Object(a.h)("button",{class:"btn btn-block rounded-pill-left rounded-none "+("all"===l?"btn-primary":"btn-outline-primary")+" text-nowrap",style:"text-overflow: ellipsis; overflow: hidden;","data-menu":"all",onClick:this.chooseSubmenu},Object(a.h)("i",{class:"fas fa-tachometer-alt"})," ",Object(a.h)(d.c,{id:"dogs.all"},"Alle")),"all"===l&&Object(a.h)(g.a,{horizontal:"center",vertical:"end"})),Object(a.h)("div",{class:"col px-0 pt-2"},Object(a.h)("button",{class:"btn btn-block rounded-none "+("leadOnly"===l?"btn-primary":"btn-outline-primary")+" text-nowrap",style:"text-overflow: ellipsis; overflow: hidden;","data-menu":"leadOnly",onClick:this.chooseSubmenu},Object(a.h)("i",{class:"fas fa-crosshairs"})," ",Object(a.h)(d.c,{id:"dogs.leadOnly"},"Leder")),"leadOnly"===l&&Object(a.h)(g.a,{horizontal:"center",vertical:"end"})),Object(a.h)("div",{class:"col px-0 pt-2"},Object(a.h)("button",{class:"btn btn-block rounded-none "+("pointOnly"===l?"btn-primary":"btn-outline-primary")+" text-nowrap",style:"text-overflow: ellipsis; overflow: hidden;","data-menu":"pointOnly",onClick:this.chooseSubmenu},Object(a.h)("i",{class:"fas fa-crosshairs"})," ",Object(a.h)(d.c,{id:"dogs.pointOnly"},"Point")),"pointOnly"===l&&Object(a.h)(g.a,{horizontal:"center",vertical:"end"})),Object(a.h)("div",{class:"col px-0 pt-2"},Object(a.h)("button",{class:"btn btn-block rounded-none "+("teamOnly"===l?"btn-primary":"btn-outline-primary")+" text-nowrap",style:"text-overflow: ellipsis; overflow: hidden;","data-menu":"teamOnly",onClick:this.chooseSubmenu},Object(a.h)("i",{class:"fas fa-crosshairs"})," ",Object(a.h)(d.c,{id:"dogs.teamOnly"},"Team")),"teamOnly"===l&&Object(a.h)(g.a,{horizontal:"center",vertical:"end"})),Object(a.h)("div",{class:"col px-0 pt-2 pr-1"},Object(a.h)("button",{class:"btn btn-block rounded-pill-right rounded-none "+("wheelOnly"===l?"btn-primary":"btn-outline-primary")+" text-nowrap",style:"text-overflow: ellipsis; overflow: hidden;","data-menu":"wheelOnly",onClick:this.chooseSubmenu},Object(a.h)("i",{class:"fas fa-crosshairs"})," ",Object(a.h)(d.c,{id:"dogs.wheelOnly"},"Wheel")),"wheelOnly"===l&&Object(a.h)(g.a,{horizontal:"center",vertical:"end"}))))))),Object(a.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 my-3"},r&&Object(a.h)("div",{class:"row"},Object(a.h)("div",{class:"w-100 overflow-hidden"},Object(a.h)("div",{class:"d-flex flex-row flex-nowrap pb-2 px-1",style:"overflow: auto; scroll-snap-type: x mandatory;"},Object(a.h)("div",{class:"col px-0 pt-2"},Object(a.h)("button",{class:"btn btn-block rounded-pill-left rounded-none "+(0===S?"btn-warning":"btn-outline-warning")+" text-nowrap",style:"text-overflow: ellipsis; overflow: hidden;","data-daysback":"0",onClick:this.chooseDaysBack},Object(a.h)(d.c,{id:"dogs.d1"},"Dag"))),Object(a.h)("div",{class:"col px-0 pt-2"},Object(a.h)("button",{class:"btn btn-block rounded-none "+(1===S?"btn-warning":"btn-outline-warning")+" text-nowrap",style:"text-overflow: ellipsis; overflow: hidden;","data-daysback":"1",onClick:this.chooseDaysBack},Object(a.h)(d.c,{id:"dogs.d2"},"2 dager"))),Object(a.h)("div",{class:"col px-0 pt-2"},Object(a.h)("button",{class:"btn btn-block rounded-none "+(7===S?"btn-warning":"btn-outline-warning")+" text-nowrap",style:"text-overflow: ellipsis; overflow: hidden;","data-daysback":"7",onClick:this.chooseDaysBack},Object(a.h)(d.c,{id:"dogs.d7"},"7 dager"))),Object(a.h)("div",{class:"col px-0 pt-2"},Object(a.h)("button",{class:"btn btn-block rounded-none "+(14===S?"btn-warning":"btn-outline-warning")+" text-nowrap",style:"text-overflow: ellipsis; overflow: hidden;","data-daysback":"14",onClick:this.chooseDaysBack},Object(a.h)(d.c,{id:"dogs.d14"},"14 dager"))),Object(a.h)("div",{class:"col px-0 pt-2"},Object(a.h)("button",{class:"btn btn-block rounded-pill-right rounded-none "+(30===S?"btn-warning":"btn-outline-warning")+" text-nowrap",style:"text-overflow: ellipsis; overflow: hidden;","data-daysback":"30",onClick:this.chooseDaysBack},Object(a.h)(d.c,{id:"dogs.d30"},"30 dager"))))))),Object(a.h)(f.a,{stores:this.props.stores,url:this.props.url}),Object(a.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 px-0 mb-4 clearfix"},Object(a.h)("h5",{class:"font-weight-light"},Object(a.h)("span",{class:"float-right",onClick:this.toggleDaysBackEdit},Object(a.h)("span",{class:"text-muted mr-2"},Object(a.h)(d.c,{id:"dogs.days-back"},"Siste"),":"),0===S?Object(a.h)(d.c,{id:"dogs.d1"},"Dag"):"",1===S?Object(a.h)(d.c,{id:"dogs.d2"},"2 dager"):"",7===S?Object(a.h)(d.c,{id:"dogs.d7"},"7 dager"):"",14===S?Object(a.h)(d.c,{id:"dogs.d14"},"14 dager"):"",30===S?Object(a.h)(d.c,{id:"dogs.d30"},"30 dager"):""),c?Object(a.h)("span",null,Object(a.h)(d.c,{id:"dogs.dogs-filtered-by"},"Filtrert på:")," ",B[c]):Object(a.h)("span",null,Object(a.h)(d.c,{id:"dogs.all-dogs",fields:{total:A.length}},"Alle hundene - ",A.length," stk"))),Object(a.h)("div",{class:"row"},A&&A.map((function(t){var s=(x.findCurrentWorkoutSummary(t.id)||{}).distanceKm;return Object(a.h)(u.a,{stores:e.props.stores,key:"dog-"+t.id+"-"+C+"-"+E.length+"-"+s,dog:t,hideTeam:!0,showWorkout:!1,daysBack:S,filterBy:l})}))),Object(a.h)("span",{class:"pointerCursor ml-2 font-weight-lighter float-right",onClick:this.toggleShowAllDogs},y?Object(a.h)(t,null,Object(a.h)(d.c,{id:"dogs.hide-deceased"},"Vis kun nåværende team")):Object(a.h)(t,null,Object(a.h)(d.c,{id:"dogs.absolutely-all"},"Vis absolutt alle")))))),Object(a.h)("div",{class:"row"},Object(a.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 px-0 mb-2"},Object(a.h)("div",{class:"w-100 overflow-hidden"},Object(a.h)("div",{class:"d-flex flex-row flex-nowrap pb-2 px-1",style:"overflow: auto; scroll-snap-type: x mandatory;"},Object(a.h)("div",{class:"col px-0 pt-2 pl-1"},Object(a.h)("button",{class:"btn btn-block rounded-pill-both rounded-none "+("chiplist"===l?"btn-primary":"btn-outline-primary")+" text-nowrap",style:"text-overflow: ellipsis; overflow: hidden;","data-menu":"chiplist",onClick:this.chooseSubmenu},Object(a.h)("i",{class:"fas fa-list"})," ",Object(a.h)(d.c,{id:"dogs.chiplist"},"Chiplist")))))),"chiplist"===l&&Object(a.h)(t,null,Object(a.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 px-0 mb-2"},Object(a.h)("h5",null,Object(a.h)(d.c,{id:"dogs.chiplist"},"Chiplist")),Object(a.h)("table",{class:"table table-striped"},Object(a.h)("thead",null,Object(a.h)("tr",null,Object(a.h)("th",{style:"width: 5%;"}," "),Object(a.h)("th",{style:"width: 10%;"}," "),Object(a.h)("th",{style:"width: 65%;"},Object(a.h)(d.c,{id:"dogs.name"},"Name")),Object(a.h)("th",{style:"width: 20%;"},Object(a.h)(d.c,{id:"dogs.chip-id"},"Chip ID")))),Object(a.h)("tbody",null,A&&A.map((function(s){return Object(a.h)("tr",{onClick:e.selectDog,"data-chipid":s.chipId},Object(a.h)("td",null,w.indexOf(s.chipId)>-1?Object(a.h)(t,null,Object(a.h)("i",{class:"text-success fas fa-check",style:"font-size: 1.5em;"})):Object(a.h)(t,null)),Object(a.h)("td",null,Object(a.h)("div",{class:"text-center border rounded-circle imageRounded imageRoundedSmall mx-auto text-muted pt-2 position-relative",style:(s.image?'background-image: url("'+s.image.s3SmallLink+'"); background-size: cover;':"")+" border-width: 2px !important;"},!s.image&&Object(a.h)("span",{class:"font-weight-lighter",style:"font-size: 35px;"},i.a.ucfirst(s.name,!0)))),Object(a.h)("td",null,Object(a.h)("span",{class:"float-right"},s.birth&&Object(a.h)("span",{class:"mr-2"},i.a.age(s.birth,s.deceased)),"female"===s.gender?Object(a.h)("i",{class:"fas fa-venus"}):Object(a.h)("i",{class:"fas fa-mars"})),s.shortname||s.name),Object(a.h)("td",null,s.chipId))})))),Object(a.h)("button",{class:"btn btn-block btn-success",onClick:this.sendChiplist},Object(a.h)(d.c,{id:"dogs.send-chiplist-by-email"},"Send chiplist by email")),v&&v.message&&Object(a.h)(t,null,Object(a.h)("div",{class:"alert alert-success",role:"alert"},v.message))))))},s}(a.Component))||l;e.default=w}.call(this,s("hosL").Fragment)}}]);
//# sourceMappingURL=route-dogs.chunk.ba478.js.map