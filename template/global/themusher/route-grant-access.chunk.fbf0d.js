(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{qZTL:function(t,e,s){"use strict";s.r(e),function(t){var c,a=s("hosL"),o=s("Utv1"),r=s("/eY4"),n=s("Y3FI"),i=(s("go65"),s("OhSV")),l=s("fh8t"),h=s.n(l),d=s("ZOvn"),u=s("67HY"),p=s("gbHB"),b=s("B+py"),g=Object(r.a)(c=function(e){function s(t){var s;return(s=e.call(this,t)||this).loadApplication=function(){s.props.stores.applicationStore.load(s.state.id)},s.changeLanguage=function(t){s.props.stores.appState.setLanguage(t.target.value)},s.grantAccess=function(){return new Promise((function(t,e){function c(){return s.setState({accessGranted:1}),t()}var a,o,r,n,i,l,h;return o=(a=s.props.stores.userStore).user,n=(r=s.state).returnUrl,i=r.id,l=r.team,h={grantedDate:new Date,returnUrl:n,team:l,appId:i},a.findApplicationById(i)?c.call(this):Promise.resolve(a.saveField(o.id,"applications",h)).then(function(){try{return c.call(this)}catch(t){return e(t)}}.bind(this),e)}))},s.denyAccess=function(){Object(n.route)("/",!0)},s.saveInputParams=function(){var t=s.props,e=t.returnUrl,c=t.id;e?(o.a.set("returnUrl",e),o.a.set("id",c)):(e=o.a.get("returnUrl"),c=o.a.get("id")),s.setState({returnUrl:e,id:c})},s.state={returnUrl:"",id:0},s}var c,r;r=e,(c=s).prototype=Object.create(r.prototype),c.prototype.constructor=c,c.__proto__=r;var l=s.prototype;return l.componentWillMount=function(){this.saveInputParams()},l.componentDidMount=function(){this.loadApplication()},l.render=function(){var e=this.props.stores,s=this.props.subsection,c=this.state,o=c.returnUrl,r=c.accessGranted,n=e.userStore.user,l=e.appState.language,g=void 0===l?"en":l,f=e.applicationStore.application;if(!f)return Object(a.h)("div",{class:"container-fluid"},Object(a.h)("div",{class:"row"},Object(a.h)("div",{class:"col-10 offset-1 col-sm-8 offset-sm-2 col-md-6 offset-md-3 col-lg-4 offset-lg-4 pt-5"},Object(a.h)("h1",{class:"mt-5"},Object(a.h)("i",{class:"fas fa-paw"})," The Musher"),Object(a.h)("h5",{class:"mt-1 mb-5 font-weight-lighter"},Object(a.h)(i.c,{id:"grant-access.title"},"Grant access")),Object(a.h)("div",{class:"alert alert-danger",role:"alert"},Object(a.h)("h5",null,"Error"),"Application not found!"))));var O=f.title,j=f.body,m=f.images;return Object(a.h)("div",{class:"container-fluid"},Object(a.h)("div",{class:"row"},Object(a.h)("div",{class:"col-10 offset-1 col-sm-8 offset-sm-2 col-md-6 offset-md-3 col-lg-4 offset-lg-4 pt-5"},Object(a.h)("h1",{class:"mt-5"},Object(a.h)("i",{class:"fas fa-paw"})," The Musher"),Object(a.h)("h5",{class:"mt-1 mb-5 font-weight-lighter"},Object(a.h)(i.c,{id:"grant-access.title"},"Grant access")),Object(a.h)("h5",null,O),Object(a.h)("p",null,Object(a.h)(h.a,{markdown:d.a.replaceImages(j,m,g),markdownOpts:d.a.getMarkdownOptions()})))),Object(a.h)("div",{class:"row"},n.email?Object(a.h)(t,null,Object(a.h)("div",{class:"col-10 offset-1 col-sm-8 offset-sm-2 col-md-6 offset-md-3 col-lg-4 offset-lg-4"},Object(a.h)("div",{class:"my-4"},Object(a.h)("h5",{class:"font-weight-light"},Object(a.h)(i.c,{id:"grant-access.data-shared"},"Data beeing shared"),":"),Object(a.h)("p",null,Object(a.h)("i",{class:"fas fa-user"}),": ",Object(a.h)(i.c,{id:"grant-access.fields-shared-person"},"Image, Name, email, cellphone, address")),Object(a.h)("p",null,Object(a.h)("i",{class:"fas fa-dog"}),": ",Object(a.h)(i.c,{id:"grant-access.fields-shared-dog"},"Image, Name, chipId, gender, birth, vaccines")),Object(a.h)("p",null,Object(a.h)("i",{class:"fas fa-users"}),": ",Object(a.h)(i.c,{id:"grant-access.fields-shared-team"},"Name, description, images"))),r?Object(a.h)(t,null,Object(a.h)("a",{href:o+"?userId="+n.uuidv4,native:!0},"Go back to application")):Object(a.h)(t,null,Object(a.h)("button",{class:"btn btn-success",onClick:this.grantAccess},Object(a.h)(i.c,{id:"grant-access.grant"},"Grant access")),Object(a.h)("button",{class:"btn btn-sm btn-link text-muted float-right",onClick:this.denyAccess},Object(a.h)(i.c,{id:"grant-access.deny"},"Deny access"))))):Object(a.h)(t,null,!s&&Object(a.h)(u.a,{stores:this.props.stores,showLogo:!1,routeLoginOk:"/grant-access",routeLoginNew:"/grant-access/newUser",routeLoginForgot:"/grant-access/forgotPassword"}),"newUser"===s&&Object(a.h)(p.a,{stores:this.props.stores,showLogo:!1,routeLogin:"/grant-access",routeLoginForgot:"/grant-access/forgotPassword",skipPubSub:!0}),"forgotPassword"===s&&Object(a.h)(b.a,{stores:this.props.stores,showLogo:!1,routeLogin:"/grant-access",routeLoginNew:"/grant-access/newUser"}))),Object(a.h)("div",{class:"col-10 offset-1 col-sm-8 offset-sm-2 col-md-6 offset-md-3 col-lg-4 offset-lg-4"},Object(a.h)("div",{class:"form-row align-items-center"},Object(a.h)("div",{class:"col-auto my-1 mx-auto",style:"width: 80px;"},Object(a.h)("select",{class:"custom-select",style:"background-color: inherit; border: none;",onInput:this.changeLanguage},Object(a.h)("option",{value:"no",selected:"no"===g},"ðŸ‡³ðŸ‡´ NO"),Object(a.h)("option",{value:"en",selected:"en"===g},"ðŸ‡¬ðŸ‡§ EN"),Object(a.h)("option",{value:"es",selected:"es"===g},"ðŸ‡ªðŸ‡¸ ES"),Object(a.h)("option",{value:"de",selected:"de"===g},"ðŸ‡©ðŸ‡ª DE"))))))},s}(a.Component))||c;e.default=g}.call(this,s("hosL").Fragment)}}]);
//# sourceMappingURL=route-grant-access.chunk.fbf0d.js.map