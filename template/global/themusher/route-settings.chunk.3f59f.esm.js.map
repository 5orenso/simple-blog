{"version":3,"sources":["webpack:///./routes/settings/index.js"],"names":["MARGIN_TOP_BACK","mu","marginTopBack","initialState","searchText","showInfo","Settings","withText","veterinaryAllowed","id","veterinaryAllowedHelp","imperial","imperialHelp","observer","Component","constructor","props","super","toggleDarkmode","e","appState","this","stores","toggleInfo","name","target","closest","dataset","state","setState","toggleSetting","async","field","userStore","user","settings","updateSetting","back","history","goBack","componentWillReceiveProps","nextProps","search","loadAll","render","darkmode","language","class","style","onClick","data-name","type","onInput","checked","for","map","setting","idx","href","general"],"mappings":"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","file":"route-settings.chunk.3f59f.esm.js","sourcesContent":["import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport { Text, Localizer, withText } from 'preact-i18n';\nimport linkState from 'linkstate';\n\nimport { route } from 'preact-router';\n\nimport mu from '../../lib/musher-util';\n\nconst MARGIN_TOP_BACK = mu.marginTopBack(false);\n\nconst initialState = {\n\tsearchText: '',\n    showInfo: {},\n};\n\n@withText({\n    veterinaryAllowed: <Text id='users.settings-allow-racevet'>Tillat veterinær</Text>,\n    veterinaryAllowedHelp: <Text id='users.settings-veterinary-help'>Dersom du ønsker at godkjente veterinærer skal kunne søke deg opp og legge inn vaksiner må du skru på her.</Text>,\n    imperial: <Text id='users.settings-imperial'>Imperial units</Text>,\n    imperialHelp: <Text id='users.settings-imperial-email'>Use imperial units like mils, mph, Fahrenheit.</Text>,\n})\n@observer\nclass Settings extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            ...initialState,\n        };\n    }\n\n    toggleDarkmode = (e) => {\n        const { appState } = this.props.stores;\n\t\tappState.toggleDarkmode();\n\t}\n\n    toggleInfo = (e) => {\n        const { name } = e.target.closest('i').dataset;\n        const { showInfo } = this.state;\n        showInfo[name] = !showInfo[name];\n        this.setState({ showInfo });\n\t}\n\n    toggleSetting= async (field) => {\n        const { userStore } = this.props.stores;\n\t\tconst { user } = userStore;\n\t\tconst { settings = {} } = user;\n        await userStore.updateSetting({ [`settings.${field}`]: settings[field] === 1 ? 0 : 1 }, { [field]: settings[field] === 1 ? 0 : 1 });\n    }\n\n\tcomponentWillReceiveProps(nextProps) {\n        // console.log('componentWillReceiveProps', nextProps);\n        if (nextProps.search !== this.props.search) {\n            this.loadAll(nextProps);\n        }\n    }\n\n    back = () => {\n        const { history } = this.props.stores;\n        history.goBack();\n    }\n\n\trender() {\n\t\tconst { submenu, hits, searchText, showInfo = {} } = this.state;\n\t\tconst { appState, userStore } = this.props.stores;\n\t\tconst { search } = this.props;\n\n\t\tconst { darkmode, viewmode } = appState;\n\n\t\tconst { isAdmin, user } = userStore;\n        const { settings = {}, language = 'en' } = user;\n\n\t\tconst { searchResultStories, searchResultDogs, searchResultWorkouts, searchResultTeams, searchResultTracks, searchResultUsers } = appState;\n\t\treturn (\n\t\t\t<div class='container-fluid' style='margin-bottom: 200px; margin-top: 60px;'>\n                <button class='btn btn-link pl-0 fixed-top text-primary'\n                    style={`top: ${MARGIN_TOP_BACK}; left: 5px; font-size: 35px; width: 45px;`}\n                    onClick={this.back}>\n                    <i class='fas fa-arrow-circle-left' />\n                </button>\n\n\t\t\t\t<div class='row m-2'>\n\t\t\t\t\t<div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-0 mb-2'>\n\t\t\t\t\t\t<h1><Text id='settings.title'>Settings</Text></h1>\n                    </div>\n                </div>\n\t\t\t\t<div class='row m-2'>\n\t\t\t\t\t{/* <div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-0 mb-2'>\n\t\t\t\t\t\t<div class='d-flex justify-content-center py-3'>\n\t\t\t\t\t\t\t<Localizer>\n\t\t\t\t\t\t\t\t<input class='form-control form-control mr-2' type='search' placeholder={<Text id='settings.search-placeholder'>Search for settings...</Text>}\n\t\t\t\t\t\t\t\t\tvalue={searchText}\n\t\t\t\t\t\t\t\t\tonInput={linkState(this, 'searchText')}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</Localizer>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div> */}\n\n                    <div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-3 mb-2'>\n                        <h5 class='m-0 text-muted'><Text id='settings.quick-settings'>Quick settings</Text></h5>\n                    </div>\n                    <div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mb-3 bg-light rounded-lg' style='font-size: 1.2em;'>\n\t\t\t\t\t\t<div class='row'>\n\t\t\t\t\t\t\t<div class='col-12 py-2 d-flex align-items-center position-relative'>\n                                <button class='btn btn-secondary py-0 px-1 mr-3' style='width: 2.0em;'>\n                                    <i class='fas fa-moon text-warning' />\n                                </button>\n                                <span class='flex-grow-1' style='line-height: 1.0em;'>\n                                    Darkmode\n                                    <i class='fas fa-info-circle text-muted ml-2' onClick={this.toggleInfo} data-name={'darkmode'} />\n                                    {showInfo.darkmode && <>\n                                        <br /><small class='text-muted'><Text id='settings.darkmode'>Dark or light layout</Text></small>\n                                    </>}\n                                </span>\n                                <div class='custom-control custom-switch custom-switch-lg mt-2' style=\"transform: scale(1.8);\">\n                                    <input type='checkbox' class='custom-control-input' id='settingsDarkmode' onInput={() => this.toggleDarkmode()} checked={darkmode} />\n                                    <label class='custom-control-label' for='settingsDarkmode' />\n                                </div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n                        {['imperial'].map((setting, idx) => <>\n                            <div class={`row ${idx >= 0 ? 'border-top' : ''}`}>\n                                <div class='col-12 py-2 d-flex align-items-center position-relative'>\n                                    <span class='flex-grow-1' style='line-height: 1.0em;'>\n                                        {this.props[setting]}\n                                        {this.props[`${setting}Help`] && <i class='fas fa-info-circle text-muted ml-2' onClick={this.toggleInfo} data-name={setting} />}\n                                        {this.props[`${setting}Help`] && showInfo[setting] && <>\n                                            <br /><small class='text-muted'>{this.props[`${setting}Help`]}</small>\n                                        </>}\n                                    </span>\n                                    <div class='custom-control custom-switch custom-switch-lg mt-2 ml-3' style=\"transform: scale(1.8);\">\n                                        <input type='checkbox' class='custom-control-input' id={`settings${setting}`} onInput={() => this.toggleSetting(setting)} checked={settings[setting]} />\n                                        <label class='custom-control-label' for={`settings${setting}`} />\n                                    </div>\n                                </div>\n                            </div>\n                        </>)}\n\t\t\t\t\t</div>\n\n                    <div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-3 mb-2'>\n                        <h5 class='m-0 text-muted'><Text id='settings.veterinary'>Veterinary</Text></h5>\n                    </div>\n\t\t\t\t\t<div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mb-3 bg-light rounded-lg' style='font-size: 1.2em;'>\n                        {['veterinaryAllowed'].map((setting, idx) => <>\n                            <div class={`row ${idx > 0 ? 'border-top' : ''}`}>\n                                <div class='col-12 py-2 d-flex align-items-center position-relative'>\n                                    <span class='flex-grow-1' style='line-height: 1.0em;'>\n                                        {this.props[setting]}\n                                        {this.props[`${setting}Help`] && <i class='fas fa-info-circle text-muted ml-2' onClick={this.toggleInfo} data-name={setting} />}\n                                        {this.props[`${setting}Help`] && showInfo[setting] && <>\n                                            <br /><small class='text-muted'>{this.props[`${setting}Help`]}</small>\n                                        </>}\n                                    </span>\n                                    <div class='custom-control custom-switch custom-switch-lg mt-2 ml-3' style=\"transform: scale(1.8);\">\n                                        <input type='checkbox' class='custom-control-input' id={`settings${setting}`} onInput={() => this.toggleSetting(setting)} checked={settings[setting]} />\n                                        <label class='custom-control-label' for={`settings${setting}`} />\n                                    </div>\n                                </div>\n                            </div>\n                        </>)}\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 my-3 bg-light rounded-lg' style='font-size: 1.2em;'>\n\t\t\t\t\t\t<div class='row'>\n\t\t\t\t\t\t\t<div class='col-12 py-2 d-flex align-items-center position-relative'>\n                                <button class='btn btn-secondary py-0 px-1 mr-3' style='width: 2.0em;'>\n                                    <i class='fas fa-cog' />\n                                </button>\n                                <span class='flex-grow-1' style='line-height: 1.0em;'>\n                                    <a href='/settings/general' class='stretched-link'><Text id='settings.general'>General</Text></a>\n                                    <i class='fas fa-info-circle text-muted ml-2' onClick={this.toggleInfo} data-name={'general'} />\n                                    {showInfo.general && <>\n                                        <br /><small class='text-muted'><Text id='settings.general-info'>Language, viewmode, logout</Text></small>\n                                    </>}\n                                </span>\n                                <button class='btn btn-link btn-lg py-0 px-1 mr-3'>\n                                    <i class='fas fa-angle-right' />\n                                </button>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class='row border-top'>\n\t\t\t\t\t\t\t<div class='col-12 py-2 d-flex align-items-center position-relative'>\n                                <button class='btn btn-primary py-0 px-1 mr-3' style='width: 2.0em;'>\n                                    <i class='fas fa-user' />\n                                </button>\n                                <span class='flex-grow-1'>\n                                    <a href='/settings/user' class='stretched-link'><Text id='settings.user'>User</Text></a>\n                                </span>\n                                <button class='btn btn-link btn-lg py-0 px-1 mr-3'>\n                                    <i class='fas fa-angle-right' />\n                                </button>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class='row border-top'>\n\t\t\t\t\t\t\t<div class='col-12 py-2 d-flex align-items-center position-relative'>\n                                <button class='btn btn-info py-0 px-1 mr-3' style='width: 2.0em;'>\n                                    <i class='fas fa-users' />\n                                </button>\n                                <span class='flex-grow-1'>\n                                    <a href='/settings/team' class='stretched-link'><Text id='settings.team'>Team</Text></a>\n                                </span>\n                                <button class='btn btn-link btn-lg py-0 px-1 mr-3'>\n                                    <i class='fas fa-angle-right' />\n                                </button>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 my-3 bg-light rounded-lg'>\n\t\t\t\t\t\t<div class='row'>\n\t\t\t\t\t\t\t<div class='col-12 py-2 d-flex align-items-center position-relative'>\n                                <button class='btn btn-secondary py-0 px-1 mr-3' style='width: 2.0em; background-color: #fc4c02; border-color: #fc4c02;'>\n                                    <i class='fab fa-strava' />\n                                </button>\n                                <span class='flex-grow-1'>\n                                    <a href='/users/integrations' class='stretched-link'><Text id='settings.strava'>Strava</Text></a>\n                                </span>\n                                <button class='btn btn-link btn-lg py-0 px-1 mr-3'>\n                                    <i class='fas fa-angle-right' />\n                                </button>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class='row border-top'>\n\t\t\t\t\t\t\t<div class='col-12 py-2 d-flex align-items-center position-relative'>\n                                <button class='btn btn-success py-0 px-1 mr-3' style='width: 2.0em;'>\n                                    <i class='fas fa-plug' />\n                                </button>\n                                <span class='flex-grow-1'>\n                                    <a href='/users/integrations' class='stretched-link'><Text id='settings.garmin-connect'>Garmin Connect</Text></a>\n                                </span>\n                                <button class='btn btn-link btn-lg py-0 px-1 mr-3'>\n                                    <i class='fas fa-angle-right' />\n                                </button>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nexport default Settings;\n"],"sourceRoot":""}