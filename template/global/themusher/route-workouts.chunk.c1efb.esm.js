(window.webpackJsonp=window.webpackJsonp||[]).push([[63],{"3pQw":function(t,e,s){"use strict";var a,o=s("hosL"),n=s("Utv1"),r=s("/eY4");s("OhSV");Object(r.a)(a=class extends o.Component{render(){const{summary:t={}}=this.props;return Object(o.h)("div",{class:"w-100 mb-3"},Object(o.h)("div",{class:"row"},Object(o.h)("div",{class:"col-12 col-sm-8 col-lg-6 offset-sm-2 offset-lg-3 d-flex mb-0 position-relative"},Object(o.h)("div",{class:"text-center border rounded-circle imageRounded"},Object(o.h)("div",{class:"text-muted mt-2",style:"font-size: 40px; line-height: 1;"},t.week),Object(o.h)("div",{class:"text-muted",style:"font-size: 10px; line-height: 0.8em;"},t.year)),Object(o.h)("div",{class:"flex-grow-1 pl-3"},Object(o.h)("h5",{class:"my-0"},t.week," - ",t.year),Object(o.h)("small",{class:"text-muted"},Object(o.h)("i",{class:"fas fa-wave-square"})," ",t.count,Object(o.h)("i",{class:"fas fa-road ml-2"})," ",n.a.format(t.distanceKm,0),"km",Object(o.h)("i",{class:"fas fa-mountain ml-2"})," ",n.a.format(t.elevation,0),"m",Object(o.h)("i",{class:"fas fa-stopwatch ml-2"})," ",n.a.secToHms(t.duration),Object(o.h)("i",{class:"fas fa-tachometer-alt ml-2"})," ",n.a.format(t.speedAvg,1),"km/t")))))}})},"4imK":function(t,e,s){"use strict";(function(t){var a,o=s("hosL"),n=s("Utv1"),r=s("/eY4"),i=s("OhSV"),l=s("nHdA"),c=s("irB3"),h=(s("UwwE"),s("8Lgr"));s("QkTp");let d=Object(r.a)(a=class extends o.Component{constructor(...t){var e;super(...t),e=this,this.toggleDate=t=>{t.stopPropagation(),t.preventDefault();const{showDate:e}=this.state;this.setState({showDate:!e})},this.ignoreGarminWorkout=async function(t){t.stopPropagation();const s=t.target.parentElement.dataset.id||t.target.dataset.id,{garminActivityDetailsStore:a}=e.props.stores;await a.ignoreWorkout(s),e.loadGarminActivities()},this.importGarminWorkout=async function(t){t.stopPropagation();const s=t.target.parentElement.dataset.id||t.target.dataset.id,{asTrack:a}=e.props,{garminActivityDetailsStore:o,workoutStore:n}=e.props.stores,{currentTeam:r}=n;a?await o.importTrack(s,r):await o.importWorkout(s,r),e.loadGarminActivities(),e.loadWorkouts()},this.loadWorkouts=async function(){const{workoutStore:t}=e.props.stores,{currentTeam:s}=t;await t.load({query:{team:s}})},this.toggleDetail=()=>{const{showDetail:t=!1}=this.state;this.setState({showDetail:!t})}}async loadGarminActivities(){const{garminActivityDetailsStore:t}=this.props.stores;t.load({query:{hideImported:1}})}componentDidMount(){this.loadGarminActivities()}render(){const{showDate:e,showDetail:s=!1}=this.state,{activities:a=[],showDate:r,asTrack:d=!1}=this.props,{userStore:b,workoutStore:u}=this.props.stores,{currentTeam:p}=u,{team:m}=b,O=b.findTeam(p||m.id);return s?Object(o.h)(t,null,Object(o.h)("div",{class:"col-12 mb-3"},Object(o.h)("div",{class:"row"},a&&a.length>0&&Object(o.h)("div",{class:"col-12 border-top border-bottom pt-3 pb-3 my-2 bg-light"},Object(o.h)("button",{type:"button",class:"float-right btn btn-sm btn-link",onClick:this.toggleDetail},Object(o.h)("i",{class:"fas fa-caret-up"})," ",Object(o.h)(i.c,{id:"garmin.hide-list"},"Hide list")),Object(o.h)("h5",null,Object(o.h)(i.c,{id:"workout.index.garmin-workouts"},"Garmin workouts / not imported")," ",a.length),a&&a.map(s=>{const{summary:a={}}=s,b=n.a.parseInputDate(a.startTimeInSeconds);return Object(o.h)(t,null,Object(o.h)("div",{class:"col-12 d-flex mb-4 position-relative"},Object(o.h)("div",{class:"text-center border rounded-circle imageRounded",style:'background-image: url("./assets/garmin-connect.png"); border-width: 3px !important;'}," "),Object(o.h)("div",{class:"flex-grow-1 pl-3",style:"line-height: 1.2em;"},Object(o.h)("h5",{class:"my-0 mb-1",style:"line-height: 1.0em;"},a.deviceName),a.activityType,Object(o.h)("br",null),Object(o.h)("small",{class:"text-muted"},b&&Object(o.h)("small",{onClick:this.toggleDate},r||e?n.a.formatDate(b,{locale:"no-NB"}):n.a.formatDistance(b,new Date,{locale:"no-NB"})),Object(o.h)("span",{class:"text-muted"},Object(o.h)("i",{class:"fas fa-road ml-2"})," ",Object(o.h)(h.a,{stores:this.props.stores,value:a.distanceInMeters/1e3}),Object(o.h)("i",{class:"fas fa-mountain ml-2"})," ",Object(o.h)(c.a,{stores:this.props.stores,value:a.totalElevationGainInMeters}),Object(o.h)("i",{class:"fas fa-tachometer-alt ml-2"})," ",Object(o.h)(l.a,{stores:this.props.stores,value:3.6*a.averageSpeedInMetersPerSecond}),Object(o.h)("i",{class:"fas fa-stopwatch ml-2"})," ",n.a.secToHms(a.durationInSeconds))),Object(o.h)("br",null),Object(o.h)("button",{class:"btn btn-sm btn-block btn-primary",onClick:this.importGarminWorkout,"data-id":s.id},Object(o.h)("i",{class:"fas fa-file-import"})," ",d?Object(o.h)(i.c,{id:"garmin.import-track"},"Import as track"):Object(o.h)(t,null,Object(o.h)(i.c,{id:"garmin.import"},"Import workout")," ",Object(o.h)("i",{class:"fas fa-arrow-right"})," ",O)),Object(o.h)("button",{class:"btn btn-sm btn-link",onClick:this.ignoreGarminWorkout,"data-id":s.id},Object(o.h)("i",{class:"fas fa-trash-alt"})," ",Object(o.h)(i.c,{id:"garmin.ignore"},"Ignore workout")))))}),Object(o.h)("button",{type:"button",class:"btn btn-block btn-primary mt-3",onClick:this.toggleDetail},Object(o.h)("i",{class:"fas fa-caret-up"})," ",Object(o.h)(i.c,{id:"garmin.hide-list"},"Hide list")))))):a&&a.length>0?Object(o.h)(t,null,Object(o.h)("div",{class:"col-12 mb-3"},Object(o.h)("button",{type:"button",class:"btn btn-block btn-outline-info",onClick:this.toggleDetail},Object(o.h)("div",{class:"float-right ml-2 text-center border rounded-circle imageRounded imageRoundedIcon",style:"background-image: url('./assets/garmin-connect.png');"}),Object(o.h)(i.c,{id:"workout.index.garmin-workouts"},"Garmin workouts / not imported")," ",a.length))):Object(o.h)(t,null)}})||a;e.a=d}).call(this,s("hosL").Fragment)},B7Gj:function(t,e,s){"use strict";s.r(e),function(t){function a(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,a)}return s}function o(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}function n(t){return l.a.format(.621371*t,1)}var r,i=s("hosL"),l=s("Utv1"),c=s("/eY4"),h=s("OhSV"),d=s("ZOvn"),b=s("JWe/"),u=(s("3pQw"),s("0SNj")),p=s("9Bb9"),m=s("WAWY"),O=s("azdc"),f=s("3UPq"),g=s("pJjI"),j=s("wanP"),w=s("K9Qx"),v=s("bUJL"),k=s("4imK"),y=s("epqT"),x=s("nHdA"),S=(s("irB3"),s("UwwE"),s("8Lgr")),D=(s("QkTp"),s("/DnB")),I=s("yHBq");const T=d.a.marginTop(!0),C=d.a.marginBottom(),W=d.a.subMenuMarginTop(),$={loadedTime:0,isLoading:!1,offset:0,limit:5,submenu:"totals",workoutFilter:()=>!0,sessionid:(new Date).getTime()},P=["id","type","user","team","title"];let M=Object(c.a)(r=class extends i.Component{constructor(e){var s;super(e),s=this,this.loadAll=async function(t=s.props){const{limit:e,offset:a}=s.state;s.setState({isLoading:!0});const{workoutStore:o,userStore:n,messageStore:r}=t.stores,{currentTeam:i}=o,l=(new Date).getMonth()+1,c=(new Date).getFullYear(),{month:h=l,year:d=c}=t;await Promise.all([s.loadWorkouts({team:i,year:d,month:h,limit:e,offset:a}),s.loadWorkoutSummary(t),s.loadWorkoutPlans(t),n.getNotifications(),r.getUnReadMessages(),s.loadStravaActivities(),s.loadGarminActivities(),s.loadTeams(t)]),s.setState({loadedTime:(new Date).getTime(),isLoading:!1})},this.changeTeam=()=>{this.loadAll()},this.loadWorkouts=({team:t,year:e,month:s,limit:a,offset:o})=>{const{workoutStore:n}=this.props.stores;n.load({query:{team:t,year:e,month:s},limit:a,offset:o,addData:["publicTeams","publicUsers"]},o>0)},this.setLoadMore=()=>{const{workoutStore:t}=this.props.stores,{currentTeam:e}=t,s=(new Date).getMonth()+1,a=(new Date).getFullYear(),{month:o=s,year:n=a}=this.props;t.setLoadMore(()=>{let{limit:t,offset:s}=this.state;s+=t,this.setState({offset:s}),this.loadWorkouts({team:e,year:n,month:o,limit:t,offset:s})})},this.unsetLoadMore=()=>{const{workoutStore:t}=this.props.stores;t.setLoadMore(()=>{})},this.loadWorkoutPlans=async function(t=s.props){s.setState({isLoading:!0});const e=(new Date).getMonth()+1,a=(new Date).getFullYear(),{year:o=a,month:n=e}=t,r=n<8?o-1:o,{workoutPlanStore:i,workoutStore:l,userStore:c}=t.stores,{currentTeam:h}=l,{user:d}=c,{settings:b={}}=d,{imperial:u}=b;if(h){await i.load({query:{team:h,seasonYear:r},addData:["tips"]});const{workoutPlans:t}=i,e=t[0]||{};e.id?(await i.load(e.id),i.prepareWeekGraphs({year:o,imperial:u})):(i.updateKeyValue("workoutPlan",{}),i.updateKeyValue("workoutPlans",[]),i.resetGraphPlanWeekDistanceCurrent())}s.setState({isLoading:!1})},this.chooseSubmenu=t=>{this.setState({submenu:t.target.parentElement.dataset.menu||t.target.dataset.menu})},this.chooseDay=({day:t,month:e,year:s})=>{const{dd:a,mm:o,yyyy:n}=this.state;if(a===t&&o===e&&n===s)return this.setState({workoutFilter:()=>!0,dd:null,mm:null,yyyy:null});this.setState({dd:t,mm:e,yyyy:s,workoutFilter:a=>{const o=new Date(a.date),n=o.getDate(),r=o.getMonth()+1,i=o.getFullYear();return n===parseInt(t,10)&&r===parseInt(e,10)&&i===parseInt(s,10)}})},this.renderContent=({obj:e})=>{const{appState:s}=this.props.stores;return Object(i.h)(t,null,Object(i.h)(b.a,{stores:this.props.stores,workout:e,showDate:!0,wrapperClasses:"w-100",wrapperClassesRow:""}))},this.setupIntersection=()=>{this.setState({handleIntersection:d.a.intersectionObserverCallback});const{workoutStore:t}=this.props.stores;this.scrollViewTimer=setInterval(()=>t.postScrollview(d.a.getIntersectionObserverHistory()),3e4)},this.state=function(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?a(Object(s),!0).forEach((function(e){o(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):a(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}({},$)}async loadTeams(t=this.props){const{teamStore:e,workoutStore:s}=t.stores,{currentTeam:a}=s,o=(new Date).getMonth()+1,n=(new Date).getFullYear(),{month:r=o,year:i=n}=t;await e.load({query:{team:a,skipMusherWorkoutSummary:!0,year:i,month:r},addData:["workoutSummary"]})}async loadStravaActivities(){const{stravaActivityStore:t}=this.props.stores;t.load({query:{hideImported:1}})}async loadGarminActivities(){const{garminActivityDetailsStore:t}=this.props.stores;t.load({query:{hideImported:1}})}async loadWorkoutSummary(t=this.props){const{userStore:e,workoutStore:s}=t.stores,a=(new Date).getMonth()+1,o=(new Date).getFullYear(),{month:n=a,year:r=o}=t,{currentTeam:i}=s;await e.getWorkoutSummary({team:i,year:r,month:n}),await e.getWorkoutSummaryDay({daysBack:500,team:i})}componentWillMount(){this.setupIntersection()}componentWillUnmount(){const{workoutStore:t}=this.props.stores;t.postScrollview(d.a.getIntersectionObserverHistory()),clearInterval(this.scrollViewTimer),this.unsetLoadMore()}componentDidMount(){const{appState:t}=this.props.stores;this.loadAll(),t.checkCordova(),this.setLoadMore()}componentWillReceiveProps(t){t.month===this.props.month&&t.year===this.props.year&&t.team===this.props.team||this.loadAll(t)}render(){const{scrolledDown:e}=this.props,{isLoading:s,submenu:a,handleIntersection:o,sessionid:r,loadedTime:c}=this.state,{userStore:b,appState:$,workoutStore:M,workoutPlanStore:L,stravaActivityStore:A,garminActivityDetailsStore:U}=this.props.stores,{workoutPlan:E,workoutPlans:R}=L,{user:F,workoutSummaryWeekDay:z=[]}=b,{language:N="en",settings:B={}}=F,Y=d.a.getMonths(N),H=(new Date).getMonth()+1,G=(new Date).getFullYear(),{month:q=H,year:K=G}=this.props,V=parseInt(q<8?K-1:K,10),{currentTeam:J}=M,Q=b.findTeam(J,!0),{darkmode:_}=$,{workouts:Z,cordovaActiveTrackingParams:X,isRunning:tt,totalDistance:et,currentSpeed:st,totalTime:at}=M,{workoutFilter:ot}=this.state,nt=Z.filter(ot),rt=L.sumWorkoutPlanMonth(parseInt(K,10),parseInt(q,10))||0,it=b.findWorkoutSummaryMonth(parseInt(K,10),parseInt(q,10),"distanceKm",!0)||0;let lt;rt&&(lt=Math.floor(it/rt*100));const ct=b.findWorkoutSummaryMonth(parseInt(K,10),parseInt(q,10),"count",!0)||0,ht=b.findWorkoutSummaryMonth(parseInt(K,10),parseInt(q,10),"distanceKm",!0)||0,dt=b.findWorkoutSummaryMonth(parseInt(K,10),parseInt(q,10),"duration",!0)||0,bt=b.findWorkoutSummaryMonth(parseInt(K,10),parseInt(q,10),"speedAvg",!0)||0,{stravaActivities:ut=[]}=(b.findWorkoutSummaryMonth(parseInt(K,10),parseInt(q,10),"elevation",!0),A),{garminActivityDetails:pt=[]}=U;return Object(i.h)("div",{class:"container-fluid",style:`margin-bottom: ${C}; margin-top: ${T};`},Object(i.h)("div",{class:"row fixed-top pt-2",style:`margin-top: ${e>0?0:W}; background-color: ${_?"#191d21":"#f8f9fa"}; transition: all 0.3s ease-in-out;`},Object(i.h)("div",{class:"col text-center border-bottom border-primary subtopmenu"},Object(i.h)("a",{href:"/workouts/",class:"text-primary stretched-link"},Object(i.h)("nobr",null,Object(i.h)("i",{class:"fas fa-chart-line"})," ",Object(i.h)(h.c,{id:"workout.index.dashboard"},"Oversikt")))),Object(i.h)("div",{class:"col text-center subtopmenu"},Object(i.h)("a",{href:"/workouts/list",class:"text-secondary stretched-link"},Object(i.h)("nobr",null,Object(i.h)("i",{class:"fas fa-list"})," ",Object(i.h)(h.c,{id:"workout.index.list"},"Liste")))),Object(i.h)("div",{class:"col text-center subtopmenu"},Object(i.h)("a",{href:"/workouts/plan",class:"text-secondary stretched-link"},Object(i.h)("nobr",null,Object(i.h)("i",{class:"fas fa-calendar-alt"})," ",Object(i.h)(h.c,{id:"workout.index.plan"},"Plan"))))),tt&&X&&Object(i.h)(t,null,Object(i.h)("div",{class:"row"},Object(i.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 border-bottom bg-light py-4"},Object(i.h)("h1",{class:"text-success font-weight-bold"},"Tracking",Object(i.h)("div",{class:"spinner-grow ml-3",role:"status"})),Object(i.h)("div",{class:"row mb-3"},Object(i.h)("div",{class:"col-4 text-center font-weight-bold",style:"font-size: 1.3em;"},l.a.secToHms(at)),Object(i.h)("div",{class:"col-4 text-center font-weight-bold",style:"font-size: 1.3em;"},Object(i.h)(x.a,{stores:this.props.stores,value:3.6*st})),Object(i.h)("div",{class:"col-4 text-center font-weight-bold",style:"font-size: 1.3em;"},Object(i.h)(S.a,{stores:this.props.stores,value:et/1e3}))),Object(i.h)("a",{class:"btn btn-block btn-danger",href:"/workouts/tracking"},Object(i.h)(h.c,{id:"workouts.go-to-tracking"},"Go to tracking"))))),Object(i.h)("div",{class:"row"},Object(i.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 border-bottom"},Object(i.h)(g.a,{stores:this.props.stores,callback:this.changeTeams,key:"teams-"+J})),Object(i.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-2 mb-2"},Object(i.h)("a",{class:"btn btn-primary btn-sm float-right",href:"/workouts/edit/new"},Object(i.h)("i",{class:"fas fa-plus"})," ",Object(i.h)(h.c,{id:"workout.index.add-workout"},"Legg til treningstur"))),Object(i.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 my-1"},Object(i.h)("div",{class:"row"},Object(i.h)("div",{class:"w-100 overflow-hidden"},Object(i.h)("div",{class:"d-flex flex-row flex-nowrap pb-2 px-1",style:"overflow: auto; scroll-snap-type: x mandatory;"},Object(i.h)("div",{class:"col px-0 pt-2"},Object(i.h)("button",{class:`btn btn-block rounded-pill-left rounded-none ${"totals"===a?"btn-primary":"btn-outline-primary"} text-nowrap`,style:"text-overflow: ellipsis; overflow: hidden;","data-menu":"totals",onClick:this.chooseSubmenu},Object(i.h)("i",{class:"fas fa-tachometer-alt"})," ",Object(i.h)(h.c,{id:"workouts.totals"},"Totaler")),"totals"===a&&Object(i.h)(D.a,{horizontal:"center",vertical:"end"})),Object(i.h)("div",{class:"col px-0 pt-2"},Object(i.h)("button",{class:`btn btn-block rounded-none ${"seasontotals"===a?"btn-primary":"btn-outline-primary"} text-nowrap`,style:"text-overflow: ellipsis; overflow: hidden;","data-menu":"seasontotals",onClick:this.chooseSubmenu},Object(i.h)("i",{class:"fas fa-tachometer-alt"})," ",Object(i.h)(h.c,{id:"workouts.seasontotals"},"Season totals")),"seasontotals"===a&&Object(i.h)(D.a,{horizontal:"center",vertical:"end"})),Object(i.h)("div",{class:"col px-0 pt-2"},Object(i.h)("button",{class:`btn btn-block rounded-none ${"analysis"===a?"btn-primary":"btn-outline-primary"} text-nowrap`,style:"text-overflow: ellipsis; overflow: hidden;","data-menu":"analysis",onClick:this.chooseSubmenu},Object(i.h)("i",{class:"fas fa-chart-area"})," ",Object(i.h)(h.c,{id:"workouts.analysis"},"Analyser")),"analysis"===a&&Object(i.h)(D.a,{horizontal:"center",vertical:"end"})),Object(i.h)("div",{class:"col px-0 pt-2"},Object(i.h)("button",{class:`btn btn-block rounded-none ${"table"===a?"btn-primary":"btn-outline-primary"} text-nowrap`,style:"text-overflow: ellipsis; overflow: hidden;","data-menu":"table",onClick:this.chooseSubmenu},Object(i.h)("i",{class:"fas fa-table"})," ",Object(i.h)(h.c,{id:"workouts.table"},"Tabell")),"table"===a&&Object(i.h)(D.a,{horizontal:"center",vertical:"end"})),Object(i.h)("div",{class:"col px-0 pt-2"},Object(i.h)("button",{class:`btn btn-block rounded-none ${"workoutplan"===a?"btn-primary":"btn-outline-primary"} text-nowrap`,style:"text-overflow: ellipsis; overflow: hidden;","data-menu":"workoutplan",onClick:this.chooseSubmenu},Object(i.h)("i",{class:"fas fa-calendar-alt"})," ",Object(i.h)(h.c,{id:"workouts.workoutplan"},"Treningsplan")),"workoutplan"===a&&Object(i.h)(D.a,{horizontal:"center",vertical:"end"})),Object(i.h)("div",{class:"col px-0 pt-2"},Object(i.h)("button",{class:`btn btn-block rounded-pill-right rounded-none ${"calendar"===a?"btn-primary":"btn-outline-primary"} text-nowrap`,style:"text-overflow: ellipsis; overflow: hidden;","data-menu":"calendar",onClick:this.chooseSubmenu},Object(i.h)("i",{class:"fas fa-calendar-alt"})," ",Object(i.h)(h.c,{id:"workouts.calendar"},"Kalender")),"calendar"===a&&Object(i.h)(D.a,{horizontal:"center",vertical:"end"})))))),"totals"===a&&Object(i.h)(t,null,Object(i.h)(f.a,{stores:this.props.stores,isLoading:s,year:K,month:q,chooseDayFunction:this.chooseDay,key:`calendar-header-${K}-${q}-${J}-${c}-${z.length}`,hideTable:"calendar"===a?0:1,hideSummary:"calendar"===a?0:1,skipLoadSummary:"calendar"===a?0:1}),Object(i.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-2 mb-2"},Object(i.h)("div",{class:"row"},Object(i.h)("div",{class:"col-4 text-center"},rt>=0&&Object(i.h)(j.a,{key:"gauge-"+lt,radius:55,percent:lt,prefix:"%",total:B.imperial?n(rt)+" mi":l.a.format(rt,0)+" km",completed:B.imperial?n(it)+" mi":l.a.format(it,0)+" km"}),Object(i.h)("br",null),Object(i.h)("small",{class:"text-muted"},Object(i.h)(h.c,{id:"workout.index.plan"},"Treningsplan"))),Object(i.h)("div",{class:"col-4 text-center"},Object(i.h)("h5",null,Object(i.h)("span",{class:"text-muted font-weight-lighter"},Object(i.h)("i",{class:"fas fa-road"}))),Object(i.h)("h3",null,Object(i.h)(S.a,{stores:this.props.stores,value:ht,smallUnit:!0})),Object(i.h)("small",{class:"text-muted"},Object(i.h)(h.c,{id:"workout.calendar.distance"},"Distanse"))),Object(i.h)("div",{class:"col-4 text-center"},Object(i.h)("h5",null,Object(i.h)("span",{class:"text-muted font-weight-lighter"},Object(i.h)("i",{class:"fas fa-tachometer-alt ml-3"}))),Object(i.h)("h3",null,Object(i.h)(x.a,{stores:this.props.stores,value:bt,smallUnit:!0})),Object(i.h)("small",{class:"text-muted"},Object(i.h)(h.c,{id:"workout.calendar.avg-speed"},"Gj.snittsfart"))),Object(i.h)("div",{class:"col-12 text-center"},Object(i.h)("span",{class:"text-muted font-weight-lighter"},Object(i.h)("i",{class:"fas fa-running"})," ")," ",ct,Object(i.h)("span",{class:"text-muted font-weight-lighter"},Object(i.h)("i",{class:"fas fa-clock ml-3"}))," ",l.a.secToHms(dt)))),Object(i.h)("div",{class:"col-12"},Object(i.h)(y.a,{stores:this.props.stores,url:this.props.url,section:a}))),"seasontotals"===a&&Object(i.h)(t,null,Object(i.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 my-3 text-center"},Object(i.h)("h3",null,Object(i.h)("i",{class:"fas fa-tachometer-alt"})," ",Object(i.h)(h.c,{id:"workouts.seasontotals"},"Season totals"))),Object(i.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3"},Object(i.h)(u.a,{stores:this.props.stores,currentTeam:J,year:K,month:q}),Object(i.h)(p.a,{stores:this.props.stores,currentTeam:J,year:K,month:q})),Object(i.h)("div",{class:"col-12"},Object(i.h)(y.a,{stores:this.props.stores,url:this.props.url,section:a}))),"analysis"===a&&Object(i.h)(t,null,Object(i.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 my-3 text-center"},Object(i.h)("h3",null,Object(i.h)("i",{class:"fas fa-chart-area"})," ",Object(i.h)(h.c,{id:"workouts.analysis"},"Analyser"))),Object(i.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3"},Object(i.h)(m.a,{stores:this.props.stores,isLoading:s,year:K,month:q,key:`graph-${E.id}-${R.length}-${B.imperial}`,showExtra:!0})),Object(i.h)("div",{class:"col-12"},Object(i.h)(y.a,{stores:this.props.stores,url:this.props.url,section:a}))),"table"===a&&Object(i.h)(t,null,Object(i.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 my-3 text-center"},Object(i.h)("h3",null,Object(i.h)("i",{class:"fas fa-table"})," ",Object(i.h)(h.c,{id:"workouts.table"},"Tabell"))),Object(i.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3"},Object(i.h)(O.a,{stores:this.props.stores,isLoading:s,year:K,month:q,key:`table-${E.id}-${R.length}`})),Object(i.h)("div",{class:"col-12"},Object(i.h)(y.a,{stores:this.props.stores,url:this.props.url,section:a}))),"calendar"===a&&Object(i.h)(t,null,Object(i.h)(f.a,{stores:this.props.stores,isLoading:s,year:K,month:q,chooseDayFunction:this.chooseDay,key:`calendar-header-${K}-${q}-${J}-${c}-${z.length}`,hideTable:"calendar"===a?0:1,hideSummary:"calendar"===a?0:1,skipLoadSummary:"calendar"===a?0:1}),Object(i.h)("div",{class:"col-12"},Object(i.h)(y.a,{stores:this.props.stores,url:this.props.url,section:a}))),"workoutplan"===a&&Object(i.h)(t,null,Object(i.h)(w.a,{stores:this.props.stores,basehref:"/workouts/",month:q,year:K,key:`${E.id||V}-${J}-${q}-${K}-${c}`,showNavigation:!0,showHeader:!0,currentTeam:J}),Object(i.h)("div",{class:"col-12"},Object(i.h)(y.a,{stores:this.props.stores,url:this.props.url,section:a})))),"totals"===a&&Object(i.h)(t,null,Object(i.h)("div",{class:"row mt-3"},Object(i.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-4"},Object(i.h)("div",{class:"row"},F&&F.strava&&Object(i.h)(t,null,Object(i.h)(v.a,{stores:this.props.stores,activities:ut,key:`strava-${J}-${ut.length}`})),F&&F.garmin&&Object(i.h)(t,null,Object(i.h)(k.a,{stores:this.props.stores,activities:pt,key:`garmin-${J}-${pt.length}`}))))),Object(i.h)("div",{class:"row"},nt&&nt.length>0&&Object(i.h)("div",{class:"col-12 mb-4"},Object(i.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 px-0 mt-4"},Object(i.h)("h5",null,Q&&Q.name&&Object(i.h)("div",null,Object(i.h)("small",{class:"font-weight-lighter"},"(",Object(i.h)(h.c,{id:"workout.index.filtered-by"},"Filtered by"),": ",Q.name,")")))),Object(i.h)(I.a,{data:nt,wrapperClassNames:"row pb-4",contentClassNames:`col-12 col-sm-8 col-lg-6 offset-sm-2 offset-lg-3 my-1 position-relative rounded rounded-lg py-3 bg-${_?"black":"white"} shadow-sm`,renderContent:this.renderContent,dataFields:P,dataValues:{type:"11"},handleIntersection:o,sessionid:r})),!Z||0===Z.length&&Object(i.h)("div",{class:"col-12 mb-4 text-center pt-5 pb-5"},Object(i.h)("h1",{class:"text-muted"},Object(i.h)("i",{class:"fas fa-running"})),Object(i.h)("h5",{class:"text-muted font-weight-lighter"},Object(i.h)(h.c,{id:"workouts.no-workouts",fields:{month:Y[q-1],year:K}},"Ingen treningsturer registrert..."))))))}})||r;e.default=M}.call(this,s("hosL").Fragment)},"JWe/":function(t,e,s){"use strict";(function(t){function a(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,a)}return s}function o(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?a(Object(s),!0).forEach((function(e){n(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):a(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}function n(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}function r(t){switch(t.type){case 1:return"border-primary";case 2:return"border-danger";case 3:return"border-success";case 4:return"border-info";default:return"border-warning"}}function i(t){switch(t.type){case 1:return"fas fa-running";case 2:return"fas fa-flag-checkered";case 3:return"fas fa-hiking";case 4:return"fas fa-futbol";default:return"fas fa-hiking"}}var l,c=s("hosL"),h=s("Utv1"),d=s("/eY4"),b=s("cneo"),u=s("OhSV"),p=s("fh8t"),m=s.n(p),O=(s("UJvz"),s("sqi2")),f=s("/922"),g=s("s4FZ"),j=s("ZQlJ"),w=s("q/oJ"),v=s("gWxU"),k=s("Nanz"),y=s("+JSK"),x=s("vY+r"),S=s("nHdA"),D=s("irB3"),I=s("UwwE"),T=s("8Lgr"),C=s("QkTp"),W=s("ZOvn");const $=W.a.getMaxLoadIndex(),P={showAddComment:!1,viewImageIdx:{},likeWorkout:{}};let M=Object(d.a)(l=class extends c.Component{constructor(t){var e;super(t),e=this,this.toggleDate=t=>{t.stopPropagation(),t.preventDefault();const{showDate:e}=this.state;this.setState({showDate:!e})},this.likeWorkout=async function(){const{workoutStore:t}=e.props.stores,{workout:s}=e.props,a=s.id,{likeWorkout:o}=e.state;o[a]=!0,e.setState({likeWorkout:o}),setTimeout(()=>{const{likeWorkout:t}=e.state;delete t[a],e.setState({likeWorkout:t})},1200);await t.likeWorkout({id:a})},this.toggleAddComment=t=>{const e=t.target.parentElement.dataset.id||t.target.dataset.id,{showAddComment:s}=this.state;this.setState({showAddComment:!s},()=>{this.inputRef[e]&&this.inputRef[e].focus()})},this.viewImage=t=>{const{id:e,idx:s}=t.target.closest("img").dataset,{viewImageIdx:a}=this.state;a[e]=s,this.setState({viewImageIdx:a})},this.shareLink=t=>{const{url:e,title:s,text:a}=t.target.closest("button").dataset,{appState:o}=this.props.stores;o.shareUrl({url:e,title:s,text:a})},this.onTeamClick=(t,e)=>(t.preventDefault(),t.stopPropagation(),this.setState({showTeam:e}),!1),this.hideTeam=()=>{this.setState({showTeam:null})},this.onUserClick=t=>(t.preventDefault(),t.stopPropagation(),!1),this.onDogClick=(t,e,s)=>(t.preventDefault(),t.stopPropagation(),this.setState({showDog:e,dogs:s}),!1),this.hideDog=()=>{this.setState({showDog:null})},this.state=o({},P),this.updateTimer={},this.inputRef={}}render(){const{showDate:e,showAddComment:s,viewImageIdx:a={},likeWorkout:n,dogs:l,showTeam:d,showDog:p}=this.state,{workout:P,showDate:M,wrapperClasses:L="col-12 col-sm-8 col-lg-6 offset-sm-2 offset-lg-3",wrapperClassesRow:A="row"}=this.props,{userStore:U,appState:E,workoutStore:R}=this.props.stores,{viewmode:F,hasShareApi:z}=E,{user:N,dogs:B}=U,{language:Y="en"}=N,H=U.findIntensity({code:P.intensity,language:Y})||{},G=U.findTeam(P.team,!0)||{},q=G.name,K=[];q&&K.push(q),P.teams&&P.teams.forEach(t=>{U.findTeam(t)&&K.push(U.findTeam(t))});const{likes:V=[],comments:J=[]}=P,Q=P.likes&&P.likes.findIndex(t=>t.user===N.id)>-1,{gpxInfo:_={},mushers:Z=[]}=P,{loadIndex:X=0}=_,tt=U.findEquipment({equipment:P.equipment,language:Y}),et=U.findEquipment({equipment:P.equipment,field:"icon"}),st=[];Z.length>1&&Z.slice(1,10).map(t=>{const e=R.findPublicUser(t)||{};e.images&&e.images[0]&&st.push(e.images[0])});const at=R.findPublicUser(Z[0])||{};let ot;at&&at.images&&at.images[0]?ot=at.images[0]:G.image&&G.image.s3SmallLink?ot=G.image:G.images&&G.images[0]&&G.images[0].s3SmallLink?ot=G.images[0]:P.image&&P.image.s3SmallLink&&(ot=P.image);const nt=[];if(P.mapImage&&nt.push(o(o({},P.mapImage),{},{type:"map"})),P.images){const t=Object(b.i)(P.images);nt.push(...t)}let rt;P&&P.gpxInfo&&P.gpxInfo.battegryLevelStart&&(rt=100*(P.gpxInfo.battegryLevelStart-P.gpxInfo.battegryLevelEnd));const it=W.a.getViews(P.statistics);return Object(c.h)(t,null,d&&Object(c.h)(w.a,null,Object(c.h)(v.default,{stores:this.props.stores,teamid:d,marginTop:"0px;",marginBottom:"0px;",back:this.hideTeam,hideTeam:this.hideTeam})),p&&Object(c.h)(w.a,null,Object(c.h)(k.default,{stores:this.props.stores,dogid:p,marginTop:"0px;",marginBottom:"0px;",back:this.hideDog,dogs:l})),Object(c.h)("div",{class:"w-100 mb-2"},Object(c.h)("div",{class:A},Object(c.h)("div",{class:L+" d-flex mb-0 position-relative"},Object(c.h)("div",{class:"text-center"},Object(c.h)("div",{class:"position-relative text-center border rounded-circle imageRounded "+r(P),style:(ot?`background-image: url("${ot.s3SmallLink}"); background-size: cover;`:"")+" border-width: 3px !important;"},!ot&&Object(c.h)("i",{class:`${i(P)} text-${H.class?H.class:"muted"} mt-3`,style:"font-size: 40px;"}),st&&st.map((e,s)=>Object(c.h)(t,null,Object(c.h)("div",{class:"position-absolute rounded-circle imageRounded border imageRoundedThumb border-white",style:`\n                                            background-image: url("${e.s3SmallLink}");\n                                            background-size: cover;\n                                            bottom: -3px;\n                                            left: ${10*s-5}px;\n                                        `})))),0!==P.temperature&&Object(c.h)(t,null,Object(c.h)("span",{class:"text-muted font-weight-light"},Object(c.h)(C.a,{stores:this.props.stores,value:P.temperature})))),Object(c.h)("div",{class:"flex-grow-1 pl-3",style:"line-height: 1.2em;"},Object(c.h)("span",{class:"float-right"},1===P.isLocked&&Object(c.h)("i",{class:"fas fa-lock text-danger ml-3"}),1===P.isInProgress&&Object(c.h)("div",{class:"spinner-grow text-success ml-3",role:"status"}),2===P.isInProgress&&Object(c.h)("i",{class:"fas fa-pause-circle text-warning ml-3"})),Object(c.h)("a",{class:"stretched-link",href:"/workouts/"+P.id},Object(c.h)("h5",{class:"my-0 mb-1",style:"line-height: 1.0em;"},P.name)),K&&K.length>0&&Object(c.h)("small",{class:"font-weight-lighter"},K.map((e,s)=>Object(c.h)(t,null,s>0?", ":"",e))),Object(c.h)("br",null),Object(c.h)("small",{class:"text-muted"},P.date&&Object(c.h)("small",{onClick:this.toggleDate},M||e?h.a.formatDate(P.date,{locale:"no-NB",hour12:!1,hour:"2-digit",minute:"2-digit"}):h.a.formatDistance(P.date,new Date,{locale:"no-NB"})),Object(c.h)("span",{class:`badge badge-${H.class} ml-2`},H.name),X>0&&Object(c.h)("span",{class:"ml-2 text-"+W.a.getLoadIndexColor(h.a.normalizeBetween(X,0,$,0,100))},Object(c.h)("i",{class:"fas fa-hand-rock mr-1"}),Math.floor(h.a.normalizeBetween(X,0,$,0,100))," - ",W.a.getLoadIndexText(h.a.normalizeBetween(X,0,$,0,100))),Object(c.h)("br",null)),Object(c.h)("small",null,Object(c.h)("div",{class:"text-muted"},P.garminId>0&&Object(c.h)("div",{class:"float-left mr-2 text-center border rounded-circle imageRounded imageRoundedIcon",style:'background-image: url("./assets/garmin-connect.png");'}),P.stravaId>0&&Object(c.h)("div",{class:"float-left mr-2 text-center border rounded-circle imageRounded imageRoundedIcon",style:'background-image: url("./assets/strava-icon.png");'}),P.equipment>0&&Object(c.h)(t,null,Object(c.h)("i",{class:et+" ml-2"})," ",tt),P.dogs>0&&Object(c.h)(t,null,Object(c.h)("i",{class:"fas fa-dog ml-2"})," ",P.dogs.length),P.track>0&&Object(c.h)(t,null,Object(c.h)("i",{class:`fas fa-map-marked text-${P.track>0?"success":"danger"} ml-2`})),P.dogsLeft>0&&Object(c.h)(t,null,Object(c.h)("i",{class:`fas fa-crosshairs text-${P.dogsLeft&&P.dogsRight?"success":"danger"} ml-2`})),P.sledWeight>0&&Object(c.h)(t,null,Object(c.h)("i",{class:"fas fa-sleigh ml-2"})," ",Object(c.h)(I.a,{stores:this.props.stores,value:P.sledWeight})),rt>0&&Object(c.h)("span",{class:"text-muted ml-2"},Object(c.h)("i",{class:"fas fa-battery-three-quarters"})," ",h.a.format(rt,1),"% ",Object(c.h)(u.c,{id:"workout.battery-used"},"used"))),["beta","advanced"].indexOf(F)>-1&&Object(c.h)("span",{class:"text-muted"},Object(c.h)("i",{class:"fas fa-balance-scale"})," ",h.a.format(P.kcalBurnedTotal)," ",Object(c.h)(u.c,{id:"workout.kcal"},"kcal"),Object(c.h)("i",{class:"fas fa-drumstick-bite ml-2"})," ",Object(c.h)(I.a,{stores:this.props.stores,value:P.kcalMeatGramsTotal/1e3}),Object(c.h)("i",{class:"fas fa-fish ml-2"})," ",Object(c.h)(I.a,{stores:this.props.stores,value:P.kcalSalmonGramsTotal/1e3}),Object(c.h)("i",{class:"fas fa-piggy-bank ml-2"})," ",Object(c.h)(I.a,{stores:this.props.stores,value:P.kcalFatGramsTotal/1e3}))))),Object(c.h)("div",{class:L+" position-relative mt-2"},Object(c.h)("strong",null,P.description)),Object(c.h)("div",{class:L+" position-relative"},Object(c.h)(m.a,{markdown:W.a.replaceImages(P.comment,P.images,Y),markdownOpts:W.a.getMarkdownOptions()})),Object(c.h)("div",{class:L+" d-flex mb-0 position-relative"},Object(c.h)("div",{class:"container-fluid px-0"},Object(c.h)("div",{class:"row mt-1"},P.distanceKm>0&&Object(c.h)("div",{class:"col-3"},Object(c.h)("div",{class:"text-overflow"},Object(c.h)("small",null,Object(c.h)("i",{class:"fas fa-road"})," ",Object(c.h)(u.c,{id:"workout.calendar.distance"},"Distanse"))),Object(c.h)("div",{class:"text-overflow font-weight-light",style:"font-size: 1.2em;"},Object(c.h)(T.a,{stores:this.props.stores,value:P.distanceKm}))),P.elevation>0&&Object(c.h)("div",{class:"col-3"},Object(c.h)("div",{class:"text-overflow"},Object(c.h)("small",null,Object(c.h)("i",{class:"fas fa-mountain"})," ",Object(c.h)(u.c,{id:"workout.calendar.ascend"},"Høydemeter"))),Object(c.h)("div",{class:"text-overflow font-weight-light",style:"font-size: 1.2em;"},Object(c.h)(D.a,{stores:this.props.stores,value:P.elevation}))),P.duration>0&&Object(c.h)("div",{class:"col-3"},Object(c.h)("div",{class:"text-overflow"},Object(c.h)("small",null,Object(c.h)("i",{class:"fas fa-clock"})," ",Object(c.h)(u.c,{id:"workout.calendar.duration"},"Varighet"))),Object(c.h)("div",{class:"text-overflow font-weight-light",style:"font-size: 1.2em;"},h.a.secToHms(P.duration,!0))),P.speedAvg>0&&Object(c.h)("div",{class:"col-3"},Object(c.h)("div",{class:"text-overflow"},Object(c.h)("small",null,Object(c.h)("i",{class:"fas fa-tachometer-alt"})," ",Object(c.h)(u.c,{id:"workout.calendar.avg-speed"},"Snittfart"))),Object(c.h)("div",{class:"text-overflow font-weight-light",style:"font-size: 1.2em;"},P.gpxInfo&&P.gpxInfo.avgGpsMovingSpeed>0?Object(c.h)(t,null,Object(c.h)(S.a,{stores:this.props.stores,value:3.6*P.gpxInfo.avgGpsMovingSpeed})):Object(c.h)(t,null,Object(c.h)(S.a,{stores:this.props.stores,value:P.speedAvg}))))))),["beta","advanced","normal"].indexOf(F)>-1&&Object(c.h)("div",{class:""+L},Object(c.h)("div",{class:"container-fluid px-0 mt-1"},Object(c.h)("div",{class:"row"},Object(c.h)(g.a,{stores:this.props.stores,images:nt,id:P.id,dblClick:this.likeWorkout,likeRef:n})))),["beta","advanced","normal"].indexOf(F)>-1&&Object(c.h)(t,null,P.dogs&&P.dogs.length>0&&Object(c.h)("div",{class:"container-fluid px-0 mt-1"},Object(c.h)("div",{class:"row pt-2"},Object(c.h)(j.a,{stores:this.props.stores,dogs:P.dogs,allDogs:B,onDogClick:this.onDogClick}))),Object(c.h)("div",{class:"mt-2"},Object(c.h)(y.a,{stores:this.props.stores,likes:V,comments:J,type:"workout",onTeamClick:this.onTeamClick,onUserClick:this.onUserClick}))),["beta","advanced","normal"].indexOf(F)>-1&&Object(c.h)(t,null,Object(c.h)("div",{class:L+" mb-0 position-relative mt-2"},Object(c.h)("div",{class:"row"},Object(c.h)("div",{class:"col text-center"},Object(c.h)("button",{type:"button",class:`btn btn-sm btn-outline-${Q?"primary":"secondary"} btn-lg btn-block ${Q?"text-primary":""}`,onClick:this.likeWorkout},Object(c.h)("i",{class:(Q?"text-primary fas":"far")+" fa-thumbs-up"})," ",Object(c.h)(u.c,{id:"comments.like"},"Lik"))),Object(c.h)("div",{class:"col text-center"},Object(c.h)("button",{type:"button",class:"btn btn-sm btn-outline-secondary btn-lg btn-block","data-id":P.id,onClick:this.toggleAddComment},Object(c.h)("i",{class:"fas fa-comment"})," ",Object(c.h)(u.c,{id:"comments.comment-add"},"Kommentar"))),z?Object(c.h)(t,null,Object(c.h)("div",{class:"col text-center"},Object(c.h)("button",{class:"btn btn-sm btn-outline-secondary btn-lg btn-block text-overflow",onClick:this.shareLink,"data-url":"https://themusher.app/share/workout/"+P.uuidv4,"data-title":"title: "+P.name},Object(c.h)("i",{class:"fas fa-share"})," ",Object(c.h)(u.c,{id:"workout.share"},"Del")))):Object(c.h)(t,null,Object(c.h)("div",{class:"col text-center"},Object(c.h)("a",{class:"btn btn-sm btn-outline-secondary btn-lg btn-block text-overflow",href:"https://themusher.app/share/workout/"+P.uuidv4,target:"_blank",rel:"noreferrer","data-native":!0},Object(c.h)("i",{class:"fas fa-share"})," ",Object(c.h)(u.c,{id:"workout.share"},"Del")))))),Object(c.h)("div",{class:L+" mt-2 mb-3"},s&&Object(c.h)(f.a,{stores:this.props.stores,workout:P,inputRef:t=>this.inputRef[P.id]=t,inputRefObject:this.inputRef,col:"12",offset:"0"}),Object(c.h)(O.a,{stores:this.props.stores,workout:P,col:"10",offset:"2",compact:!0})),it>0&&Object(c.h)(t,null,Object(c.h)("div",{class:"mt-2"},Object(c.h)(x.a,{stores:this.props.stores,views:it,object:P,type:"workout",isTeamAdmin:!0,isAdmin:!1,onTeamClick:this.onTeamClick,onUserClick:this.onUserClick})))))))}})||l;e.a=M}).call(this,s("hosL").Fragment)},K9Qx:function(t,e,s){"use strict";(function(t){var a,o=s("hosL"),n=s("Utv1"),r=s("/eY4"),i=s("go65"),l=s("OhSV"),c=(s("nHdA"),s("irB3"),s("UwwE"),s("8Lgr")),h=(s("QkTp"),s("ZOvn"));const d=[0,6];let b=Object(r.a)(a=class extends o.Component{constructor(...t){var e;super(...t),e=this,this.setFocus=()=>{this.inputRef&&this.inputRef.focus()},this.editMonth=t=>{this.setState({showInput:!0,inputYear:t.target.parentElement.dataset.year||t.target.dataset.year,inputMonth:t.target.parentElement.dataset.month||t.target.dataset.month,inputDay:null,inputWeek:null,newDistance:t.target.parentElement.dataset.distance||t.target.dataset.distance||null},()=>this.setFocus())},this.editWeek=t=>{this.setState({showInput:!0,inputYear:t.target.parentElement.dataset.year||t.target.dataset.year,inputWeek:t.target.parentElement.dataset.week||t.target.dataset.week,inputMonth:null,inputDay:null,newDistance:t.target.parentElement.dataset.distance||t.target.dataset.distance||null},()=>this.setFocus())},this.editDay=t=>{this.setState({showInput:!0,inputYear:t.target.parentElement.dataset.year||t.target.dataset.year,inputMonth:t.target.parentElement.dataset.month||t.target.dataset.month,inputDay:t.target.parentElement.dataset.day||t.target.dataset.day,inputWeek:t.target.parentElement.dataset.week||t.target.dataset.week,newDistance:t.target.parentElement.dataset.distance||t.target.dataset.distance||null},()=>this.setFocus())},this.saveDistance=async function(){const{workoutPlanStore:t,workoutStore:s,userStore:a}=e.props.stores,{currentTeam:o}=s,r=a.findTeam(o)||"",{year:i,month:l}=e.props,{workoutPlans:c}=t,h=c[0]||{},{inputYear:d,inputMonth:b,inputWeek:u,inputDay:p,newDistance:m}=e.state,O=l||(new Date).getMonth()+1,f=i||n.a.getYear(),g=parseInt(O<8?f-1:f,10);if(h.id)await t.load(h.id);else{const e=await t.insert({title:`Workout plan for ${g} - ${g+1}: ${r}`,team:o,seasonYear:g,seasonMonth:6}),{id:s}=e.data;await t.load(s)}const{workoutPlan:j}=t,{id:w}=j;let v;d&&(v=p?"days":"weeks"),await t.saveField(w,v,{year:d,month:b,day:p,week:u,distance:m}),await t.load(w),e.resetInput(!0)},this.resetInput=t=>{if(t){const{inputYear:t,inputMonth:e,inputDay:s}=this.state,a=n.a.addDays(new Date(t,e-1,s,0,0,0,0),1);this.setState({showInput:!0,inputYear:a.getFullYear(),inputMonth:a.getMonth()+1,inputDay:a.getDate(),inputWeek:n.a.getWeek(a),newDistance:null}),this.setFocus()}else this.setState({showInput:!1,inputYear:null,inputMonth:null,inputDay:null,inputWeek:null,newDistance:null})},this.checkKeydown=t=>{switch(t.key){case"Enter":this.saveDistance();break;case"Escape":this.resetInput()}},this.updateWorkoutPlanTips=()=>{const{userStore:t}=this.props.stores,{user:e={}}=t,{settings:s={}}=e;this.setState({hideWorkoutPlanTips:s.hideWorkoutPlanTips})},this.toggleTips=async function(){const{hideWorkoutPlanTips:t}=e.state,{userStore:s}=e.props.stores,a=1===t?0:1;e.setState({hideWorkoutPlanTips:a}),await s.updateSetting({"settings.hideWorkoutPlanTips":a},{hideWorkoutPlanTips:a})}}componentDidMount(){this.updateWorkoutPlanTips()}render(){const{hideWorkoutPlanTips:e}=this.state,{appState:s,workoutPlanStore:a,userStore:r,teamStore:b}=this.props.stores,{user:u}=r,{language:p="en"}=u,{darkmode:m}=s,O=h.a.getDays(p),f=h.a.getMonths(p),{showInput:g,inputYear:j,inputMonth:w,inputWeek:v,inputDay:k,newDistance:y}=this.state,x=(new Date).getDate(),S=(new Date).getMonth()+1,D=(new Date).getFullYear(),I=(new Date).getTime(),{month:T=S,year:C=D,dog:W,basehref:$,showNavigation:P=!0,showHeader:M=!0,currentTeam:L}=this.props,A=parseInt(T<8?C-1:C,10),U=parseInt(T,10),E=parseInt(C,10),{month:R,year:F}=h.a.getNextMonth(U,E),{month:z,year:N}=h.a.getPrevMonth(U,E),B=n.a.getDaysInMonth(T,C),Y=n.a.getWeeksInMonth(T,C),H=n.a.getDaysInWeek(Y[0].week,C,T);let G=0,q=0,K=0;const V=B[B.length-1].getTime()>I,J=a.findWorkoutPlanSummaryMonth(C,U)||{},{workoutPlan:Q,tips:_}=a,Z=_[`${C}-${n.a.padDate(T)}`],X=Z&&(Z.comments.length>0||Z.distance),tt=b.findTeam(L)||{};return Object(o.h)(t,null,M&&Object(o.h)(t,null,Object(o.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-4 text-center"},P&&Object(o.h)("a",{href:`${$||"/workouts/month/"}${R}/${F}/skipScroll`,class:"float-right btn btn-sm btn-outline-secondary ml-2"},Object(o.h)("i",{class:"fas fa-arrow-right"})),P&&Object(o.h)("a",{href:`${$||"/workouts/month/"}${z}/${N}/skipScroll`,class:"float-left btn btn-sm btn-outline-secondary mr-2"},Object(o.h)("i",{class:"fas fa-arrow-left"})),Object(o.h)("h3",null,Object(o.h)(l.c,{id:"workout.plan.month"},"Måned")," - ",f[T-1]," ",C," ",J.distance?`- ${n.a.format(J.distance,0)} km`:""),Object(o.h)("h5",{class:"text-muted font-weight-light"},Object(o.h)(l.c,{id:"workout.plan.season"},"Sesongen")," ",A," - ",A+1),Object(o.h)("div",null,Q.id?Object(o.h)(t,null,Object(o.h)("small",null,Q.title)):Object(o.h)(t,null,Object(o.h)("div",{class:"display-4"},Object(o.h)("i",{class:"far fa-sad-tear text-muted"})),Object(o.h)("h5",{class:"font-weight-lighter text-muted"},Object(o.h)(l.c,{id:"workout.plan.no-workout-plan-found",fields:{name:tt}},"Ingen plan")),Object(o.h)("div",{class:"text-muted"},Object(o.h)(l.c,{id:"workout.plan.click-to-start"},"Click on a date to get started.")))),W&&Object(o.h)("div",null,W.name))),Object(o.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3"},!(!(g&&j&&v)||k)&&Object(o.h)(t,null,Object(o.h)("div",{class:"form-inline w-100"},Object(o.h)("div",{class:"form-group w-75 mr-3 mb-0"},Object(o.h)("input",{class:"form-control w-100 form-control",type:"text",placeholder:`Enter distance for ${j} w${v}`,ref:t=>this.inputRef=t,onInput:Object(i.a)(this,"newDistance"),onKeydown:this.checkKeydown,autocomplete:"off",value:y||""})),Object(o.h)("button",{type:"button",class:"btn btn-primary",onClick:this.saveDistance},Object(o.h)(l.c,{id:"workout.plan.save"},"Lagre")))),!!(g&&j&&w)&&Object(o.h)(t,null,Object(o.h)("div",{class:"form-inline w-100"},Object(o.h)("div",{class:"form-group w-75 mr-3 mb-0"},Object(o.h)("input",{class:"form-control w-100 form-control",type:"text",placeholder:`Enter distance for ${j}-${n.a.padDate(w)} ${k?"-"+n.a.padDate(k):""}`,ref:t=>this.inputRef=t,onInput:Object(i.a)(this,"newDistance"),onKeydown:this.checkKeydown,autocomplete:"off",value:y||""})),Object(o.h)("button",{type:"button",class:"btn btn-primary",onClick:this.saveDistance},Object(o.h)(l.c,{id:"workout.plan.save"},"Lagre"))))),"no"===p&&Object(o.h)(t,null,e?Object(o.h)(t,null,Object(o.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-4 d-flex justify-content-end"},Object(o.h)("button",{type:"button",class:"btn btn-outline-primary btn-sm",onClick:this.toggleTips},Object(o.h)("i",{class:"fas fa-eye"})," ",Object(o.h)(l.c,{id:"workout.plan.show-tips"},"Show tips")))):Object(o.h)(t,null,Object(o.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-4 d-flex justify-content-end"},Object(o.h)("button",{type:"button",class:"btn btn-primary btn-sm",onClick:this.toggleTips},Object(o.h)("i",{class:"fas fa-eye-slash"})," ",Object(o.h)(l.c,{id:"workout.plan.hide-tips"},"Hide tips"))))),Object(o.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3"},Object(o.h)("div",{class:"table-responsive"},Object(o.h)("table",{class:"table table-striped table-sm"},Object(o.h)("thead",null,Object(o.h)("tr",null,Object(o.h)("th",{class:"text-muted"},Object(o.h)("small",null,Object(o.h)(l.c,{id:"workout.plan.week"},"Uke"))),H.map(t=>Object(o.h)("th",null,Object(o.h)("small",null,O[t.getDay()]))),Object(o.h)("th",{class:"text-muted"},Object(o.h)("small",null,Object(o.h)(l.c,{id:"workout.plan.sum"},"Sum"))),Object(o.h)("th",{class:"text-muted"},Object(o.h)("small",null,Object(o.h)(l.c,{id:"workout.plan.planned"},"Plan"))))),Object(o.h)("tbody",null,Y&&Y.map(s=>{const i=n.a.getDaysInWeek(s.week,C,T),l=a.findWorkoutPlanSummaryWeek(n.a.asNumber(C),s.week)||{},b=i[6].getTime()>I;let u=0,O=0;l.distance>0&&(q+=l.distance);const f=_[`${C}-${n.a.padDate(T)}-w${n.a.padDate(s.week)}`],g=f&&(f.comments.length>0||f.distance);return Object(o.h)(t,null,Object(o.h)("tr",null,Object(o.h)("td",{class:"text-right text-muted pt-3 border-right "+(k||j!=C||v!=s.week?"":"border rounded border-primary")},Object(o.h)("small",{onClick:this.editWeek,"data-week":s.week,"data-year":C,"data-distance":l.distance},s.week)),i.map(t=>{const e=t.getFullYear(),n=t.getMonth()+1,i=t.getDate(),l=t.getTime()>I,b=r.findWorkoutSummaryWeekDay(l?e-1:e,n,i,U)||{},p=a.findWorkoutPlanSummaryDay(e,n,i,U)||{};p&&p.distance&&(u+=p.distance,G+=p.distance),b.distanceKm&&(O+=b.distanceKm,K+=b.distanceKm);const f=j==e&&w==n&&k==i,g=D==e&&S==n&&x==i,v=d.indexOf(t.getDay())>-1;return Object(o.h)("td",{class:`text-center overflow-hidden font-weight-light position-relative pt-3 pb-3 border-right ${f?"calendarIsChosen":""} ${g?"calendarIsToday":""} ${v?"calendarIsWeekend":""}`,style:"font-size: 0.8em; min-width: 3rem;",onClick:this.editDay,"data-day":t.getDate(),"data-month":t.getMonth()+1,"data-year":C,"data-week":s.week,"data-distance":p.distance},Object(o.h)("div",{class:"position-absolute text-muted",style:"top: 0px; right: 2px; font-size: 0.7em;"},t.getDate()),p&&p.distance?Object(o.h)("div",{class:"rounded-pill w-100 px-1",style:`background-color: ${h.a.getPlanColor(p,m)};`},Object(o.h)(c.a,{stores:this.props.stores,value:p.distance}),p.count>1&&Object(o.h)("span",{class:"position-absolute text-danger",style:"bottom: 0; right: 0px; font-size: 0.6em;"},p.count)):"-",b.distanceKm>0&&Object(o.h)("span",{class:"position-absolute font-weight-bold",style:`bottom: 0; left: 0px; font-size: 0.85em; color: ${l?"#393DB1":"#2BAAA9"};`},Object(o.h)(c.a,{stores:this.props.stores,value:b.distanceKm})))}),Object(o.h)("td",{class:"text-right pt-3 pb-3 position-relative border-right",style:"font-size: 0.8em;"},Object(o.h)(c.a,{stores:this.props.stores,value:u}),O>0&&Object(o.h)("span",{class:"position-absolute",style:`bottom: 0; left: 0px; font-size: 0.85em; color: ${b?"#393DB1":"#2BAAA9"};`},Object(o.h)(c.a,{stores:this.props.stores,value:O}))),Object(o.h)("td",{class:"text-right pt-3 pb-3 text-muted border-right",style:"font-size: 0.8em;",onClick:this.editWeek,"data-week":s.week,"data-year":C,"data-distance":l.distance},l.distance>0&&Object(o.h)(t,null,Object(o.h)("div",{class:"rounded-pill w-100 px-1 text-white text-center",style:`background-color: ${h.a.getPlanColor(l,m)};`},Object(o.h)(c.a,{stores:this.props.stores,value:l.distance}))))),!e&&"no"===p&&f&&g&&Object(o.h)("tr",null,Object(o.h)("td",{colspan:"10",class:"pb-3"},Object(o.h)("h5",null,Object(o.h)("span",{class:"font-weight-lighter"},"Uke ",s.week," ",C,":"),"Tips fra Femundløpet"),f.totalDistance>0&&Object(o.h)("div",null,Object(o.h)("span",{class:"text-muted"},Object(o.h)("i",{class:"fas fa-road"})," Distanse"),": ",f.totalDistance," km"),f.distance>0&&Object(o.h)("div",null,Object(o.h)("span",{class:"text-muted"},Object(o.h)("i",{class:"fas fa-road"})," Distanse pr økt"),": ",f.distance),f.time&&Object(o.h)("div",null,Object(o.h)("span",{class:"text-muted"},Object(o.h)("i",{class:"fas fa-clock"})," Tid pr økt"),": ",f.time),f.totalWorkouts>0&&Object(o.h)("div",null,Object(o.h)("span",{class:"text-muted"},Object(o.h)("i",{class:"fas fa-list-ol"})," Antall økter"),": ",f.totalWorkouts),f.avgSpeed&&Object(o.h)("div",null,Object(o.h)("span",{class:"text-muted"},Object(o.h)("i",{class:"fas fa-tachometer-alt"})," Gjennomsnittsfart"),": ",f.avgSpeed),f.comments&&Object(o.h)("div",null,f.comments.map(t=>Object(o.h)("p",null,t))))))})),Object(o.h)("tfoot",null,Object(o.h)("tr",null,Object(o.h)("td",{colspan:"8",class:"text-right pb-3"},Object(o.h)(l.c,{id:"workout.plan.totalkm"},"Totalt km")),Object(o.h)("td",{class:"text-right position-relative pb-3"},Object(o.h)(c.a,{stores:this.props.stores,value:G}),K>0&&Object(o.h)("span",{class:"position-absolute",style:`bottom: 0; left: 0px; font-size: 0.65em; color: ${V?"#393DB1":"#2BAAA9"};`},Object(o.h)(c.a,{stores:this.props.stores,value:K}))),Object(o.h)("td",{class:"text-right text-muted"},Object(o.h)(c.a,{stores:this.props.stores,value:q}))),!e&&"no"===p&&Z&&X&&Object(o.h)("tr",null,Object(o.h)("td",{colspan:"10",class:"pb-3"},Object(o.h)("h5",null,Object(o.h)("span",{class:"font-weight-lighter"},f[T-1]," ",C,":")," Tips fra Femundløpet"),Z.totalDistance>0&&Object(o.h)("div",null,Object(o.h)("span",{class:"text-muted"},Object(o.h)("i",{class:"fas fa-road"})," Distanse"),": ",Z.totalDistance," km"),Z.distance>0&&Object(o.h)("div",null,Object(o.h)("span",{class:"text-muted"},Object(o.h)("i",{class:"fas fa-road"})," Distanse pr økt"),": ",Z.distance),Z.time&&Object(o.h)("div",null,Object(o.h)("span",{class:"text-muted"},Object(o.h)("i",{class:"fas fa-clock"})," Tid pr økt"),": ",Z.time),Z.totalWorkouts>0&&Object(o.h)("div",null,Object(o.h)("span",{class:"text-muted"},Object(o.h)("i",{class:"fas fa-list-ol"})," Antall økter"),": ",Z.totalWorkouts),Z.avgSpeed&&Object(o.h)("div",null,Object(o.h)("span",{class:"text-muted"},Object(o.h)("i",{class:"fas fa-tachometer-alt"})," Gjennomsnittsfart"),": ",Z.avgSpeed),Z.comments&&Object(o.h)("div",null,Z.comments.map(t=>Object(o.h)("p",null,t))))))))))}})||a;e.a=b}).call(this,s("hosL").Fragment)},ZQlJ:function(t,e,s){"use strict";var a,o=s("hosL"),n=(s("Utv1"),s("/eY4")),r=(s("OhSV"),s("NDEG"));let i=Object(n.a)(a=class extends o.Component{constructor(t){super(t),this.scrollImages=t=>{const{scrollLeft:e,clientWidth:s}=t.target,a=e/s,o=Math.round(a),n=Math.abs(o-a);(Number.isInteger(a)||n<.1)&&this.setState({imageIdx:o})},this.sortByName=(t,e)=>{const{allDogs:s=[]}=this.props,a=s.find(e=>e.id===t),o=s.find(t=>t.id===e);return a&&o&&a.name>o.name?1:-1},this.state={imageIdx:0}}render(){const{dogs:t,allDogs:e=[],size:s="medium",onDogClick:a=(()=>{})}=this.props;return Object(o.h)("div",{class:"w-100"},Object(o.h)("div",{class:"d-flex flex-row flex-nowrap no-scrollbar",style:"overflow: auto; scroll-snap-type: x mandatory;",onScroll:this.scrollImages},t&&t.sort(this.sortByName).map(n=>{const i=e.find(t=>t.id===n);return i?Object(o.h)("div",{class:"col clearfix position-relative p-0 mx-2"},Object(o.h)("div",{class:"w-100 h-100 text-center rounded-lg imageContainer d-flex justify-content-center align-items-center",style:"\n                                        flex-wrap: wrap;\n                                        overflow-y: hidden;\n                                    ",onTouchstart:t=>{t.stopPropagation()},onTouchend:t=>{t.stopPropagation()},onTouchmove:t=>{t.stopPropagation()}},Object(o.h)(r.a,{stores:this.props.stores,dog:i,dogs:e.filter(e=>t.indexOf(e.id)>-1).sort((t,e)=>t.name>e.name?1:-1),className:"mx-auto",showName:!0,showPosition:!1,size:s,onDogClick:a}))):""})))}})||a;e.a=i},azdc:function(t,e,s){"use strict";(function(t){var a,o=s("hosL"),n=s("Utv1"),r=s("/eY4"),i=s("OhSV"),l=(s("nHdA"),s("irB3")),c=(s("UwwE"),s("8Lgr")),h=(s("QkTp"),s("ZOvn"));let d=Object(i.d)(()=>({week:Object(o.h)(i.c,{id:"workout.graph.week"}),distance:Object(o.h)(i.c,{id:"workout.graph.distance"}),ascend:Object(o.h)(i.c,{id:"workout.graph.ascend"}),plan:Object(o.h)(i.c,{id:"workout.graph.plan"})}))(a=Object(r.a)(a=class extends o.Component{render(){const{userStore:e}=this.props.stores,s=(new Date).getMonth()+1,a=(new Date).getFullYear(),{year:r=a,month:d=s,showHeader:b=!0}=this.props,u=parseInt(d<8?r-1:r,10),{user:p}=e,{language:m="en"}=p,O=h.a.getMonths(m),f=n.a.monthRange(u+"-08-01",u+1+"-07-31"),g=n.a.monthRange(u-1+"-08-01",u+"-07-31"),j=n.a.weekRange(u+"-08-01",u+1+"-07-31").map(t=>t.week),w=Math.floor(j.length/(j.length%6)),v=[];for(let t=0,e=j.length;t<e;t+=w)v.push(j[t]);return Object(o.h)(t,null,b&&Object(o.h)("h5",null,Object(o.h)(i.c,{id:"workout.graph.title"},"Treningsstatistikk")," ",u," - ",u+1),Object(o.h)("div",{class:"w-100 mt-3 mb-4"},Object(o.h)("div",{class:"table-responsive-lg"},Object(o.h)("table",{class:"table table-sm table-striped font-weigth-lighter border-bottom"},Object(o.h)("thead",null,Object(o.h)("tr",null,Object(o.h)("th",{class:"text-center"},Object(o.h)(i.c,{id:"workout.graph.season"},"Sesong")),f.map(t=>Object(o.h)("th",{class:"text-center"},Object(o.h)("a",{href:`/workouts/month/${t.month}/${t.year}`},O[t.month-1]))))),Object(o.h)("tbody",null,Object(o.h)("tr",null,Object(o.h)("th",{scope:"row",style:"padding: .15rem;"},Object(o.h)("nobr",null,u-1," - ",u)),g.map(s=>Object(o.h)(t,null,Object(o.h)("td",{class:"text-right px-3"},Object(o.h)("nobr",null,Object(o.h)(c.a,{stores:this.props.stores,value:e.findWorkoutSummaryMonth(s.year,s.month),smallUnit:!0})),Object(o.h)("br",null),Object(o.h)("nobr",null,Object(o.h)(l.a,{stores:this.props.stores,value:e.findWorkoutSummaryMonth(s.year,s.month,"elevation"),smallUnit:!0})),Object(o.h)("br",null))))),Object(o.h)("tr",null,Object(o.h)("th",{scope:"row",style:"padding: .15rem;"},Object(o.h)("nobr",null,u," - ",u+1)),f.map(s=>Object(o.h)(t,null,Object(o.h)("td",{class:"text-right px-3"},Object(o.h)("nobr",null,Object(o.h)(c.a,{stores:this.props.stores,value:e.findWorkoutSummaryMonth(s.year,s.month),smallUnit:!0})),Object(o.h)("br",null),Object(o.h)("nobr",null,Object(o.h)(l.a,{stores:this.props.stores,value:e.findWorkoutSummaryMonth(s.year,s.month,"elevation"),smallUnit:!0})),Object(o.h)("br",null))))))))))}})||a)||a;e.a=d}).call(this,s("hosL").Fragment)},bUJL:function(t,e,s){"use strict";(function(t){var a,o=s("hosL"),n=s("Utv1"),r=s("/eY4"),i=s("OhSV"),l=s("nHdA"),c=s("irB3"),h=(s("UwwE"),s("8Lgr"));s("QkTp");let d=Object(r.a)(a=class extends o.Component{constructor(...t){var e;super(...t),e=this,this.toggleDate=t=>{t.stopPropagation(),t.preventDefault();const{showDate:e}=this.state;this.setState({showDate:!e})},this.ignoreStravaWorkout=async function(t){t.stopPropagation();const s=t.target.parentElement.dataset.id||t.target.dataset.id,{stravaActivityStore:a}=e.props.stores;await a.ignoreWorkout(s),e.loadStravaActivities()},this.importStravaWorkout=async function(t){t.stopPropagation();const s=t.target.parentElement.dataset.id||t.target.dataset.id,{stravaActivityStore:a,workoutStore:o}=e.props.stores,{currentTeam:n}=o;await a.importWorkout(s,n),e.loadStravaActivities(),e.loadWorkouts()},this.loadWorkouts=async function(){const{workoutStore:t}=e.props.stores,{currentTeam:s}=t;await t.load({query:{team:s}})},this.toggleDetail=()=>{const{showDetail:t=!1}=this.state;this.setState({showDetail:!t})}}async loadStravaActivities(){const{stravaActivityStore:t}=this.props.stores;t.load({query:{hideImported:1}})}componentDidMount(){this.loadStravaActivities()}render(){const{showDate:e,showDetail:s=!1}=this.state,{activities:a,showDate:r}=this.props,{userStore:d,workoutStore:b}=this.props.stores,{currentTeam:u}=b,{team:p}=d,m=d.findTeam(u||p.id);return s?Object(o.h)(t,null,Object(o.h)("div",{class:"col-12 mb-3"},Object(o.h)("div",{class:"row"},a&&a.length>0&&Object(o.h)("div",{class:"col-12 border-top border-bottom pt-3 pb-3 my-2 bg-light"},Object(o.h)("button",{type:"button",class:"float-right btn btn-sm btn-link",onClick:this.toggleDetail},Object(o.h)("i",{class:"fas fa-caret-up"})," ",Object(o.h)(i.c,{id:"strava.hide-list"},"Hide list")),Object(o.h)("h5",null,Object(o.h)(i.c,{id:"workout.index.strava-workouts"},"Strava workouts / not imported")," ",a.length),a&&a.map(s=>{const{summary:a={}}=s;n.a.parseInputDate(a.startTimeInSeconds);return Object(o.h)(t,null,Object(o.h)("div",{class:"col-12 d-flex mb-4 position-relative"},Object(o.h)("div",{class:"text-center border rounded-circle imageRounded",style:'background-image: url("./assets/strava-icon.png"); border-width: 3px !important;'}," "),Object(o.h)("div",{class:"flex-grow-1 pl-3",style:"line-height: 1.2em;"},Object(o.h)("h5",{class:"my-0 mb-1",style:"line-height: 1.0em;"},s.name),s.type,Object(o.h)("br",null),Object(o.h)("small",{class:"text-muted"},s.start_date&&Object(o.h)("small",{onClick:this.toggleDate},r||e?n.a.formatDate(s.start_date,{locale:"no-NB"}):n.a.formatDistance(s.start_date,new Date,{locale:"no-NB"})),Object(o.h)("span",{class:"text-muted"},Object(o.h)("i",{class:"fas fa-road ml-2"})," ",Object(o.h)(h.a,{stores:this.props.stores,value:s.distance/1e3}),Object(o.h)("i",{class:"fas fa-mountain ml-2"})," ",Object(o.h)(c.a,{stores:this.props.stores,value:s.total_elevation_gain}),Object(o.h)("i",{class:"fas fa-tachometer-alt ml-2"})," ",Object(o.h)(l.a,{stores:this.props.stores,value:3.6*s.average_speed}),Object(o.h)("i",{class:"fas fa-stopwatch ml-2"})," ",n.a.secToHms(s.elapsed_time))),Object(o.h)("br",null),Object(o.h)("button",{class:"btn btn-sm btn-block btn-primary",onClick:this.importStravaWorkout,"data-id":s.id},Object(o.h)("i",{class:"fas fa-file-import"})," ",Object(o.h)(i.c,{id:"strava.import"},"Import workout")," ",Object(o.h)("i",{class:"fas fa-arrow-right"})," ",m),Object(o.h)("button",{class:"btn btn-sm btn-link",onClick:this.ignoreStravaWorkout,"data-id":s.id},Object(o.h)("i",{class:"fas fa-trash-alt"})," ",Object(o.h)(i.c,{id:"strava.ignore"},"Ignore workout")))))}),Object(o.h)("button",{type:"button",class:"btn btn-block btn-primary mt-3",onClick:this.toggleDetail},Object(o.h)("i",{class:"fas fa-caret-up"})," ",Object(o.h)(i.c,{id:"strava.hide-list"},"Hide list")))))):a&&a.length>0?Object(o.h)(t,null,Object(o.h)("div",{class:"col-12 mb-3"},Object(o.h)("button",{type:"button",class:"btn btn-block btn-outline-info",onClick:this.toggleDetail},Object(o.h)("div",{class:"float-right ml-2 text-center border rounded-circle imageRounded imageRoundedIcon",style:"background-image: url('./assets/strava-icon.png');"}),Object(o.h)(i.c,{id:"workout.index.strava-workouts"},"Strava workouts / not imported")," ",a.length))):Object(o.h)(t,null)}})||a;e.a=d}).call(this,s("hosL").Fragment)},pJjI:function(t,e,s){"use strict";(function(t){var a,o=s("hosL"),n=s("Utv1"),r=s("/eY4"),i=s("OhSV");s("/DnB");let l=Object(r.a)(a=class extends o.Component{constructor(...t){super(...t),this.toggleTeam=t=>{const{callback:e,unsetTeamIfSelected:s=!0}=this.props,{dogStore:a,workoutStore:o}=this.props.stores,{currentTeam:r}=a;s&&t===r?(a.setCurrentTeam(void 0),o.setCurrentTeam(void 0)):(a.setCurrentTeam(t),o.setCurrentTeam(t)),n.a.isDefined(e)&&e()},this.showAllTeams=()=>{const{callback:t}=this.props,{dogStore:e,workoutStore:s}=this.props.stores;e.setCurrentTeam(void 0),s.setCurrentTeam(void 0),n.a.isDefined(t)&&t()}}render(){const{userStore:e,dogStore:s}=this.props.stores,{teams:a}=e,{currentTeam:n}=s,{highlight:r,showAll:l=!0}=this.props;return Object(o.h)("div",{class:"row mt-2"},Object(o.h)("div",{class:"w-100 overflow-hidden"},Object(o.h)("div",{class:"d-flex flex-row flex-nowrap pb-2 px-1 no-scrollbar",style:"overflow: auto; scroll-snap-type: x mandatory;"},a&&a.map((e,s)=>{let i;return 1===a.length?i="rounded-pill-both":0===s?i="rounded-pill-left":s+1===a.length&&(i="rounded-pill-right"),Object(o.h)("div",{class:"col mb-0 px-0 clearfix",key:e.id},Object(o.h)("button",{class:`btn btn-sm btn-block \n\t\t\t\t\t\t\t\t\t\t\trounded-none ${i}\n\t\t\t\t\t\t\t\t\t\t\t${n===e.id?"btn-success":"btn-outline-success"}\n\t\t\t\t\t\t\t\t\t\t\ttext-nowrap clearfix`,style:"text-overflow: ellipsis; overflow: hidden;",onClick:()=>this.toggleTeam(e.id)},Object(o.h)("i",{class:"fas fa-users"})," ",e.name,r&&r.indexOf(e.id)>-1&&Object(o.h)(t,null,n===e.id?Object(o.h)(t,null,Object(o.h)("i",{class:"fas fa-check float-right"})):Object(o.h)(t,null,Object(o.h)("div",{class:"spinner-grow text-warning float-right",role:"status"},Object(o.h)("span",{class:"sr-only"},"Loading...")),Object(o.h)("i",{class:"far fa-hand-point-left float-right",style:"font-size: 2.0em;"})))))})),l&&Object(o.h)("div",{class:"row"},Object(o.h)("div",{class:"col-12 mb-1 px-1 d-flex justify-content-center"},Object(o.h)("button",{class:"btn btn-sm rounded-lg btn-link text-nowrap clearfix",style:"text-overflow: ellipsis; overflow: hidden;",onClick:this.showAllTeams},Object(o.h)("i",{class:"fas fa-users"})," ",Object(o.h)(i.c,{id:"teams.show-all"},"Show all"))))))}})||a;e.a=l}).call(this,s("hosL").Fragment)},yHBq:function(t,e,s){"use strict";(function(t){function a(){return(a=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var s=arguments[e];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(t[a]=s[a])}return t}).apply(this,arguments)}var o,n,r=s("hosL"),i=s("/eY4"),l=s("Utv1");let c=Object(i.a)(o=class extends r.Component{constructor(t){super(t),this.state={},this.containerRef=null}componentWillUnmount(){const{removeIntersectionObserver:t}=this.props;t&&t(this.containerRef)}componentDidMount(){const{addIntersectionObserver:t}=this.props;t&&t(this.containerRef)}render(){const{wrapperClassNames:t="",contentClassNames:e="",renderContent:s,obj:o={},idx:n,dataFields:i,dataValues:l,sessionid:c}=this.props,h={};return c&&(h.sessionid=c),i.forEach(t=>h["data-"+t]=encodeURI(l[t]||o[t])),Object(r.h)("div",a({class:""+t,ref:t=>this.containerRef=t,"data-idx":n},h),Object(r.h)("div",{class:""+e,style:"display: block;"},s({obj:o,idx:n})))}})||o,h=Object(i.a)(n=class extends r.Component{constructor(t){super(t),this.deleteIntersectionObserver=()=>{this.intersectionObserver=null},this.handleIntersection=t=>{const{handleIntersection:e}=this.props;"function"==typeof e&&e(t),t.forEach(t=>{const{isIntersecting:e}=t,{height:s=0}=t.target.dataset,a=Math.max(t.target.childNodes[0].offsetHeight,t.target.offsetHeight,t.target.scrollHeight);e?(t.target.childNodes[0].style.display="block",t.target.style.minHeight=(a>s?a:s)+"px"):t.target.style.minHeight&&(t.target.style.minHeight=(a>s?a:s)+"px",t.target.childNodes[0].style.display="none")})},this.setupIntersectionObserver=()=>{if(!("IntersectionObserver"in window)||!("IntersectionObserverEntry"in window)||!("intersectionRatio"in window.IntersectionObserverEntry.prototype))return!1;this.intersectionObserver=new IntersectionObserver(this.handleIntersection,{root:null,rootMargin:"100px",threshold:.1})},this.addIntersectionObserver=t=>{this.intersectionObserver&&t&&this.intersectionObserver.observe(t)},this.removeIntersectionObserver=t=>{this.intersectionObserver&&t&&this.intersectionObserver.unobserve(t)},this.state={}}componentWillMount(){this.setupIntersectionObserver()}componentWillUnmount(){this.deleteIntersectionObserver()}render(){const{data:e=[],wrapperClassNames:s="row pb-4 bg-light",contentClassNames:a="col-12 col-sm-8 col-lg-6 offset-sm-2 offset-lg-3 mb-0 position-relative rounded rounded-lg py-3 shadow-sm",renderContent:o=(()=>Object(r.h)(t,null,"Missing render function!")),dataFields:n=[],dataValues:i={}}=this.props;return Object(r.h)("div",{class:"w-100"},e&&e.filter(t=>l.a.isObject(t)).map((e,l)=>{const h=e.hasOwnProperty("wrapperClassNames")?e.wrapperClassNames:s,d=e.hasOwnProperty("contentClassNames")?e.contentClassNames:a;return Object(r.h)(t,null,Object(r.h)(c,{key:`fastline-${l}-${e.id}`,obj:e,idx:l,addIntersectionObserver:this.addIntersectionObserver,removeIntersectionObserver:this.removeIntersectionObserver,wrapperClassNames:h,contentClassNames:d,renderContent:o,dataFields:n,dataValues:i}))}))}})||n;e.a=h}).call(this,s("hosL").Fragment)}}]);
//# sourceMappingURL=route-workouts.chunk.c1efb.esm.js.map