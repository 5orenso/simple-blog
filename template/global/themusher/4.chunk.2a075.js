(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{"+JSK":function(t,e,n){"use strict";(function(t){function o(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function r(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var s,i=n("hosL"),a=n("Utv1"),l=n("/eY4"),c=n("OhSV"),u=n("ZOvn"),m={},d=Object(l.a)(s=function(e){function n(t){var n;return(n=e.call(this,t)||this).toggleLikes=function(){n.setState({showLikesList:!n.state.showLikesList})},n.displayTeam=function(t,e){t.preventDefault(),t.stopPropagation(),n.props.stores.appState.openDrawer("publicTeam",{teamId:e,height:"80vh"})},n.openInbox=function(t,e){t.preventDefault(),t.stopPropagation(),n.props.stores.appState.openDrawer("inboxDetail",{fromuser:e,height:"80vh"})},n.state=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?o(Object(n),!0).forEach((function(e){r(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},m),n}var s,l;return l=e,(s=n).prototype=Object.create(l.prototype),s.prototype.constructor=s,s.__proto__=l,n.prototype.render=function(){var e=this,n=this.state.showLikesList,o=this.props.stores,r=o.storyStore,s=o.teamStore,l=o.workoutStore,m=o.raceStore,d=this.props,b=d.likes,h=d.comments,p=d.type,f=void 0===p?"story":p;return Object(i.h)(t,null,Object(i.h)("div",{class:"d-flex justify-content-between mb-2"},b&&b.length>0&&Object(i.h)(t,null,Object(i.h)("div",{class:"d-flex flex-row flex-nowrap position-relative mr-3",style:"overflow: auto;"},Object(i.h)("span",{class:"text-muted mr-2",onClick:this.toggleLikes},Object(i.h)("small",null,Object(i.h)("i",{class:"fas fa-thumbs-up text-primary"})," ",b.length)),b.slice(0,1).map((function(n){var o,c,d;"story"===f?(o=r.findPublicUser(n.user),c=r.findPublicTeamByMembers(n.user)):"team"===f?(o=s.findPublicUser(n.user),c=s.findPublicTeamByMembers(n.user)):"workout"===f?(o=l.findPublicUser(n.user),c=l.findPublicTeamByMembers(n.user)):"race"===f&&(o=m.findPublicUser(n.user),c=m.findPublicTeamByMembers(n.user)),a.a.isArray(c)&&(d=c.find((function(t){return 1===t.public})));u.a.getImage({user:o,team:d,priority:"user"}),u.a.displayNameShort(o);var b=u.a.displayName(o);return Object(i.h)(t,null,Object(i.h)("span",{class:"font-weight-normal"},Object(i.h)("small",null,d?Object(i.h)(t,null,Object(i.h)("a",{href:"/teams/public/"+d.uuidv4,title:d.name,onClick:function(t){return e.displayTeam(t,d.uuidv4)}},b)):Object(i.h)(t,null,b))))})),b.length>1&&Object(i.h)(t,null,Object(i.h)("span",{class:"text-muted font-weight-normal ml-2",onClick:this.toggleLikes},Object(i.h)("small",null,Object(i.h)(c.c,{id:"likes-comments.and",fields:{total:b.length-1}},"and ",b.length-1," others.")))))),h&&h.length>0&&Object(i.h)("span",{class:"float-right text-muted"},Object(i.h)("small",null,Object(i.h)("i",{class:"fas fa-comment text-primary"})," ",h.length))),n&&Object(i.h)("div",{class:"mt-3 mb-3"},b&&b.map((function(n){var o,c,d;"story"===f?(o=r.findPublicUser(n.user),c=r.findPublicTeamByMembers(n.user)):"team"===f?(o=s.findPublicUser(n.user),c=s.findPublicTeamByMembers(n.user)):"workout"===f?(o=l.findPublicUser(n.user),c=l.findPublicTeamByMembers(n.user)):"race"===f&&(o=m.findPublicUser(n.user),c=m.findPublicTeamByMembers(n.user)),a.a.isArray(c)&&(d=c.find((function(t){return 1===t.public})));var b=u.a.getImage({user:o,team:d,priority:"user"}),h=u.a.displayNameShort(o),p=u.a.displayName(o,!0);return Object(i.h)("div",{class:"d-flex flex-row position-relative font-weight-normal mb-1"},d?Object(i.h)(t,null,Object(i.h)("a",{href:"/teams/public/"+d.uuidv4,title:d.name,onClick:function(t){return e.displayTeam(t,d.uuidv4)},class:"stretched-link"},Object(i.h)("div",{class:"text-center border rounded-circle imageRounded imageRoundedThumb",style:b?'background-image: url("'+b+'"); background-size: cover;':""},!b&&Object(i.h)("div",{class:"",style:"font-size: 12px; padding-top: 3px;"},h))),Object(i.h)("div",{class:"ml-2 "},Object(i.h)("small",null,p," ",Object(i.h)("span",{class:"font-weight-lighter"},"- ",d.name)))):Object(i.h)(t,null,Object(i.h)("div",{class:"text-center border rounded-circle imageRounded imageRoundedThumb",style:(b?'background-image: url("'+b+'"); background-size: cover;':"")+" opacity: 0.5;"},!b&&Object(i.h)("div",{class:"text-muted",style:"font-size: 12px; padding-top: 3px;"},h)),Object(i.h)("div",{class:"ml-2"},Object(i.h)("small",null,p))))}))))},n}(i.Component))||s;e.a=d}).call(this,n("hosL").Fragment)},"/922":function(t,e,n){"use strict";(function(t){var o,r=n("hosL"),s=n("Utv1"),i=n("/eY4"),a=n("OhSV"),l=n("go65"),c=n("om2D"),u=(n("ETxl"),n("ZOvn")),m=Object(i.a)(o=function(e){function n(t){var n;return(n=e.call(this,t)||this).beforeImagesUploaded=function(){n.setState({sendButtonEnabled:!1})},n.afterImagesUploaded=function(){n.setState({sendButtonEnabled:!0})},n.commentWorkout=function(){return new Promise((function(t,e){var o,r,s,i,a,l,c,m,d,b,h;return n.state.sendButtonEnabled?(s=void 0===(r=(o=n.props).callback)?function(){}:r,a=void 0===(i=o.inputRefObject)?{}:i,l=n.props.workout,c=n.props.stores.workoutStore,d=(m=n.state).comment,b=m.showAddImage,n.setState({sendButtonEnabled:!1}),Promise.resolve(c.commentWorkout({id:l.id,comment:d})).then((function(o){try{return(h=o)&&200===h.status&&(n.setState({comment:{body:"",images:[]}},(function(){u.a.resizeTextarea(a[l.id]),b&&n.addImage()})),s({workout:l,response:h})),n.setState({sendButtonEnabled:!0}),t()}catch(t){return e(t)}}),e)):t(!1)}))},n.addImages=function(t){var e,o=n.state.comment;(e=o.images).push.apply(e,t.value),n.setState({comment:o})},n.addImage=function(){var t=n.state.showAddImage;n.setState({showAddImage:!(void 0!==t&&t)})},n.handleImageErrored=function(t){var e=t.target;e.onerror=null,setTimeout((function(){e.src+="?"+new Date}),1e3)},n.state={comment:{body:"",images:[]},showAddImage:!1,sendButtonEnabled:!0},n.inputRef={},n}var o,i;return i=e,(o=n).prototype=Object.create(i.prototype),o.prototype.constructor=o,o.__proto__=i,n.prototype.render=function(){var e=this,n=this.props,o=n.inputRef,i=n.col,m=void 0===i?12:i,d=n.offset,b=void 0===d?0:d,h=n.showAvatar,p=void 0===h||h,f=n.extraClass,O=void 0===f?"":f,j=n.workout,g=this.state,v=g.comment,y=g.showAddImage,w=g.sendButtonEnabled,k=this.props.stores.userStore.user,x=void 0===k?{}:k,S=x.firstname?""+s.a.ucfirst(x.firstname,!0)+s.a.ucfirst(x.lastname,!0):""+s.a.ucfirst(x.email||"",!0),P=x.image||(x.images?x.images[0]:void 0);return Object(r.h)("div",{class:"col-"+m+" offset-"+b+" "+O},Object(r.h)("div",{class:"d-flex mb-0 position-relative w-100"},p&&Object(r.h)("div",{class:"text-center border rounded-circle imageRounded imageRoundedSmall",style:(P?"background-image: url('"+P.s3SmallLink+"'); background-size: cover;":"")+" border-width: 3px !important;"},!x.image&&Object(r.h)("span",{class:"font-weight-lighter",style:"font-size: 15px;"},S)),Object(r.h)("div",{class:"col pl-3",style:"line-height: 1.2em;"},Object(r.h)("div",{class:"d-flex bd-highlight"},Object(r.h)("div",{class:"p-0 w-100 bd-highlight"},Object(r.h)("label",{class:"sr-only",for:"inlineFormInput"},Object(r.h)(a.c,{id:"comments.comment"},"Kommentar")),Object(r.h)("div",{class:"border rounded rounded-lg position-relative"},Object(r.h)(a.b,null,Object(r.h)("textarea",{class:"form-control-plaintext px-2",type:"text",placeholder:Object(r.h)(a.c,{id:"comments.write-comment"},"Skriv en kommentar..."),onInput:Object(l.a)(this,"comment.body"),onKeyUp:u.a.resizeTextarea,onFocus:u.a.resizeTextarea,style:"height: 2.3em;",value:v.body,ref:o})),Object(r.h)("div",{class:"position-absolute",style:"top: 8px; right: 10px; font-size: 1.2em;"},Object(r.h)("i",{class:"fas fa-image pointerCursor","data-id":j.id,onClick:this.addImage})))),Object(r.h)("div",{class:"p-0 pl-2 flex-shrink-1 bd-highlight"},Object(r.h)("button",{type:"button",class:"btn btn-"+(w?"primary":"secondary")+" mb-2",disabled:!w,onClick:this.commentWorkout},Object(r.h)("i",{class:"fas fa-paper-plane"})))))),y&&Object(r.h)(t,null,Object(r.h)("div",{class:"col-12 text-center"},Object(r.h)("div",{class:"container-fluid"},Object(r.h)("div",{class:"row"},v.images&&v.images.map((function(t){return Object(r.h)("div",{class:"col-3 p-1"},Object(r.h)("img",{src:t.s3SmallLink,class:"img-fluid",onError:e.handleImageErrored}),Object(r.h)("button",{class:"btn btn-sm btn-link",onClick:e.removeImage,"data-name":t.name},Object(r.h)("i",{class:"fas fa-trash"}),"  ",Object(r.h)(a.c,{id:"comments.remove-image"},"Remove")))})))),Object(r.h)(c.a,{object:v,updateField:this.addImages,before:this.beforeImagesUploaded,after:this.afterImagesUploaded,autoOpen:!0}))))},n}(r.Component))||o;e.a=m}).call(this,n("hosL").Fragment)},"3wGD":function(t,e,n){"use strict";var o,r=n("hosL"),s=n("Utv1"),i=n("/eY4"),a=n("OhSV"),l=n("go65"),c=(n("ETxl"),n("ZOvn")),u=Object(i.a)(o=function(t){function e(e){var n;return(n=t.call(this,e)||this).commentWorkout=function(){return new Promise((function(t,e){var o,r,s,i,a,l,u,m,d,b,h;return n.state.sendButtonEnabled?(s=void 0===(r=(o=n.props).callback)?function(){}:r,i=o.commentId,l=void 0===(a=o.inputRefObject)?{}:a,u=n.props.workout,m=n.props.stores.workoutStore,b=void 0===(d=n.state.comment)?"":d,n.setState({sendButtonEnabled:!1}),Promise.resolve(m.commentReplyWorkout({id:u.id,commentId:i,comment:b})).then((function(o){try{return(h=o)&&200===h.status&&(n.setState({comment:""},(function(){c.a.resizeTextarea(l[i])})),s({workout:u,response:h,commentId:i})),n.setState({sendButtonEnabled:!0}),t()}catch(t){return e(t)}}),e)):t(!1)}))},n.state={sendButtonEnabled:!0},n.inputRef={},n}var n,o;return o=t,(n=e).prototype=Object.create(o.prototype),n.prototype.constructor=n,n.__proto__=o,e.prototype.render=function(){var t=this.props.inputRef,e=this.state,n=e.comment,o=e.sendButtonEnabled,i=this.props.stores.userStore.user,u=void 0===i?{}:i,m=u.firstname?""+s.a.ucfirst(u.firstname,!0)+s.a.ucfirst(u.lastname,!0):""+s.a.ucfirst(u.email||"",!0),d=u.image||(u.images?u.images[0]:void 0);return Object(r.h)("div",{class:"w-100"},Object(r.h)("div",{class:"d-flex mb-0 position-relative w-100"},Object(r.h)("div",{class:"text-center border rounded-circle imageRounded imageRoundedThumb",style:(d?"background-image: url('"+d.s3SmallLink+"'); background-size: cover;":"")+" border-width: 3px !important;"},!d&&Object(r.h)("span",{class:"font-weight-lighter",style:"font-size: 15px;"},m)),Object(r.h)("div",{class:"col pl-3",style:"line-height: 1.2em;"},Object(r.h)("div",{class:"d-flex bd-highlight"},Object(r.h)("div",{class:"p-0 w-100 bd-highlight"},Object(r.h)("label",{class:"sr-only",for:"inlineFormInput"},Object(r.h)(a.c,{id:"comments.comment"},"Kommentar")),Object(r.h)("div",{class:"border rounded rounded-lg position-relative"},Object(r.h)(a.b,null,Object(r.h)("textarea",{class:"form-control-plaintext px-2",type:"text",placeholder:Object(r.h)(a.c,{id:"comments.write-comment"},"Skriv en kommentar..."),onInput:Object(l.a)(this,"comment"),onKeyUp:c.a.resizeTextarea,style:"height: 2.3em;",value:n,ref:t})))),Object(r.h)("div",{class:"p-0 pl-2 flex-shrink-1 bd-highlight"},Object(r.h)("button",{type:"button",class:"btn btn-"+(o?"primary":"secondary")+" mb-2",disabled:!o,onClick:this.commentWorkout},Object(r.h)("i",{class:"fas fa-paper-plane"})))))))},e}(r.Component))||o;e.a=u},"8Lgr":function(t,e,n){"use strict";(function(t){function o(t){return i.a.format(t,t<5?2:1)}var r,s=n("hosL"),i=n("Utv1"),a=n("/eY4"),l=(n("OhSV"),n("ZOvn"),Object(a.a)(r=function(e){function n(){return e.apply(this,arguments)||this}var r,i;return i=e,(r=n).prototype=Object.create(i.prototype),r.prototype.constructor=r,r.__proto__=i,n.prototype.render=function(){var e=this.props,n=e.value,r=void 0===n?0:n,i=e.smallUnit,a=this.props.stores.userStore.user.settings;return(void 0===a?{}:a).imperial?Object(s.h)(t,null,Object(s.h)("nobr",null,o(function(t){return.621371*t}(r))," ",i?Object(s.h)(t,null,Object(s.h)("small",null,Object(s.h)("small",null,Object(s.h)("small",{class:"ml-0 text-muted"},"mi")))):Object(s.h)(t,null,"mi"))):Object(s.h)(t,null,Object(s.h)("nobr",null,o(r)," ",i?Object(s.h)(t,null,Object(s.h)("small",null,Object(s.h)("small",null,Object(s.h)("small",{class:"ml-0 text-muted"},"km")))):Object(s.h)(t,null,"km")))},n}(s.Component))||r);e.a=l}).call(this,n("hosL").Fragment)},ETxl:function(t){t.exports={hoverelementonly:"hoverelementonly__1mJGJ",hoverElement:"hoverElement__axh3O",hoverelementhide:"hoverelementhide__1k_qH","progress-bar-vertical":"progress-bar-vertical__1B2sC","progress-bar":"progress-bar__pnsVj",dragged:"dragged__QXO46",over:"over__1re3x",list:"list__q_emZ"}},QkTp:function(t,e,n){"use strict";(function(t){var o,r=n("hosL"),s=n("Utv1"),i=n("/eY4"),a=(n("OhSV"),n("ZOvn"),Object(i.a)(o=function(e){function n(){return e.apply(this,arguments)||this}var o,i;return i=e,(o=n).prototype=Object.create(i.prototype),o.prototype.constructor=o,o.__proto__=i,n.prototype.render=function(){var e=this.props,n=e.value,o=void 0===n?0:n,i=this.props.stores.userStore.user.settings;return(void 0===i?{}:i).imperial?Object(r.h)(t,null,Object(r.h)("nobr",null,s.a.format(function(t){return 9*t/5+32}(o),0),"°F")):Object(r.h)(t,null,Object(r.h)("nobr",null,s.a.format(o,1),"°C"))},n}(r.Component))||o);e.a=a}).call(this,n("hosL").Fragment)},UwwE:function(t,e,n){"use strict";(function(t){var o,r=n("hosL"),s=n("Utv1"),i=n("/eY4"),a=(n("OhSV"),n("ZOvn"),Object(i.a)(o=function(e){function n(){return e.apply(this,arguments)||this}var o,i;return i=e,(o=n).prototype=Object.create(i.prototype),o.prototype.constructor=o,o.__proto__=i,n.prototype.render=function(){var e=this.props,n=e.value,o=void 0===n?0:n,i=this.props.stores.userStore.user.settings;return(void 0===i?{}:i).imperial?Object(r.h)(t,null,Object(r.h)("nobr",null,s.a.format(function(t){return 2.20462*t}(o),0)," lb")):Object(r.h)(t,null,Object(r.h)("nobr",null,s.a.format(o,0)," kg"))},n}(r.Component))||o);e.a=a}).call(this,n("hosL").Fragment)},irB3:function(t,e,n){"use strict";(function(t){var o,r=n("hosL"),s=n("Utv1"),i=n("/eY4"),a=(n("OhSV"),n("ZOvn"),Object(i.a)(o=function(e){function n(){return e.apply(this,arguments)||this}var o,i;return i=e,(o=n).prototype=Object.create(i.prototype),o.prototype.constructor=o,o.__proto__=i,n.prototype.render=function(){var e=this.props,n=e.value,o=void 0===n?0:n,i=e.smallUnit,a=this.props.stores.userStore.user.settings;return(void 0===a?{}:a).imperial?Object(r.h)(t,null,Object(r.h)("nobr",null,s.a.format(function(t){return 3.28084*t}(o),0)," ",i?Object(r.h)(t,null,Object(r.h)("small",null,Object(r.h)("small",null,Object(r.h)("small",{class:"ml-0 text-muted"},"ft")))):Object(r.h)(t,null,"ft"))):Object(r.h)(t,null,Object(r.h)("nobr",null,s.a.format(o,0)," ",i?Object(r.h)(t,null,Object(r.h)("small",null,Object(r.h)("small",null,Object(r.h)("small",{class:"ml-0 text-muted"},"m")))):Object(r.h)(t,null,"m")))},n}(r.Component))||o);e.a=a}).call(this,n("hosL").Fragment)},nHdA:function(t,e,n){"use strict";(function(t){var o,r=n("hosL"),s=n("Utv1"),i=n("/eY4"),a=n("OhSV"),l=(n("ZOvn"),Object(i.a)(o=function(e){function n(){return e.apply(this,arguments)||this}var o,i;return i=e,(o=n).prototype=Object.create(i.prototype),o.prototype.constructor=o,o.__proto__=i,n.prototype.render=function(){var e=this.props,n=e.value,o=void 0===n?0:n,i=e.smallUnit,l=this.props.stores.userStore.user.settings;return(void 0===l?{}:l).imperial?Object(r.h)(t,null,Object(r.h)("nobr",null,s.a.format(function(t){return.621371*t}(o),1)," ",i?Object(r.h)(t,null,Object(r.h)("small",null,Object(r.h)("small",null,Object(r.h)("small",{class:"ml-0 text-muted"},Object(r.h)(a.c,{id:"workouts.mph"},"mph"))))):Object(r.h)(t,null,Object(r.h)(a.c,{id:"workouts.mph"},"mph")))):Object(r.h)(t,null,Object(r.h)("nobr",null,s.a.format(o,1)," ",i?Object(r.h)(t,null,Object(r.h)("small",null,Object(r.h)("small",null,Object(r.h)("small",{class:"ml-0 text-muted"},Object(r.h)(a.c,{id:"workouts.kmt"},"km/t"))))):Object(r.h)(t,null,Object(r.h)(a.c,{id:"workouts.kmt"},"km/t"))))},n}(r.Component))||o);e.a=l}).call(this,n("hosL").Fragment)},sqi2:function(t,e,n){"use strict";(function(t){function o(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function r(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var s,i=n("hosL"),a=n("Utv1"),l=n("/eY4"),c=n("cneo"),u=n("OhSV"),m=n("fh8t"),d=n.n(m),b=n("3wGD"),h=(n("ETxl"),n("ZOvn")),p={showAddComment:{},showAllComments:!1,showAllReplies:{},viewImageIdx:{}},f=Object(l.a)(s=function(e){function n(t){var n;return(n=e.call(this,t)||this).likeComment=function(t){return new Promise((function(e,o){var r,s,i,a,l;return s=void 0===(r=n.props.callback)?function(){}:r,i=t.target.parentElement.dataset.id||t.target.dataset.id,a=n.props.workout,Promise.resolve(n.props.stores.workoutStore.likeWorkoutComment({id:a.id,commentId:i})).then((function(t){try{return(l=t)&&200===l.status&&s({type:"likeComment",workout:a,commentId:i,response:l}),e(!0)}catch(t){return o(t)}}),o)}))},n.likeReply=function(t){return new Promise((function(e,o){var r,s,i,a,l,c;return s=void 0===(r=n.props.callback)?function(){}:r,i=t.target.parentElement.dataset.id||t.target.dataset.id,a=t.target.parentElement.dataset.comment||t.target.dataset.comment,l=n.props.workout,Promise.resolve(n.props.stores.workoutStore.likeWorkoutCommentReply({id:l.id,replyId:i,commentId:a})).then((function(t){try{return(c=t)&&200===c.status&&s({type:"likeReply",workout:l,commentId:a,replyId:i,response:c}),e()}catch(t){return o(t)}}),o)}))},n.replyComment=function(t){return new Promise((function(e){var o=t.target.parentElement.dataset.id||t.target.dataset.id,r=n.state.showAddComment;return r[o]=!r[o],n.setState({showAddComment:r},(function(){n.inputRef[o]&&n.inputRef[o].focus()})),e()}))},n.toggleComments=function(){n.setState({showAllComments:!n.state.showAllComments})},n.toggleReplies=function(t){var e=t.target.parentElement.dataset.id||t.target.dataset.id,o=n.state.showAllReplies;o[e]=!o[e],n.setState({showAllReplies:o})},n.viewImage=function(t){var e=t.target.closest("img").dataset,o=n.state.viewImageIdx;o[e.id]=e.idx,n.setState({viewImageIdx:o})},n.translate=function(t){return new Promise((function(e,o){function r(){return n.setState({showOriginal:h,translatedText:f}),e()}var s,i,a,l,c,u,m,d,b,h,p,f,O;return t.preventDefault(),t.stopPropagation(),s=t.target.closest("button").dataset,l=n.props.workout,u=(c=n.props.stores).teamStore,m=c.userStore.user,f=void 0===(p=(d=n.state).translatedText)?{}:p,(h=void 0===(b=d.showOriginal)?{}:b)[O=(a=s.commentid)+((i=s.replyid)?"-"+i:"")]=0,i?Promise.resolve(u.translateCommentReply({commentid:a,replyid:i,object:l,user:m})).then(function(t){try{return f[O]=t,r.call(this)}catch(t){return o(t)}}.bind(this),o):Promise.resolve(u.translateComment({commentid:a,object:l,user:m})).then(function(t){try{return f[O]=t,r.call(this)}catch(t){return o(t)}}.bind(this),o)}))},n.showOriginal=function(t){var e=t.target.closest("button").dataset,o=e.replyid,r=e.commentid;t.preventDefault(),t.stopPropagation();var s=n.state.showOriginal,i=void 0===s?{}:s;i[r+(o?"-"+o:"")]=1,n.setState({showOriginal:i})},n.displayTeam=function(t,e){t.preventDefault(),t.stopPropagation(),n.props.stores.appState.openDrawer("publicTeam",{teamId:e,height:"80vh"})},n.openInbox=function(t,e){t.preventDefault(),t.stopPropagation(),n.props.stores.appState.openDrawer("inboxDetail",{fromuser:e,height:"80vh"})},n.state=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?o(Object(n),!0).forEach((function(e){r(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},p),n.inputRef={},n}var s,l;return l=e,(s=n).prototype=Object.create(l.prototype),s.prototype.constructor=s,s.__proto__=l,n.prototype.render=function(){var e,n=this,o=this.state,r=o.showAddComment,s=o.showAllComments,l=o.showAllReplies,m=o.viewImageIdx,p=o.showOriginal,f=void 0===p?{}:p,O=o.translatedText,j=void 0===O?{}:O,g=this.props,v=g.workout,y=g.callback,w=void 0===y?function(){}:y,k=g.compact,x=this.props.stores,S=x.userStore,P=x.teamStore,C=S.user,_=S.isAdmin,I=C.language,L=void 0===I?"en":I,R=[],T=0,D=0;return v.comments&&(T=v.comments.length,s?R=v.comments:(e=void 0!==k&&k?0:1,R=v.comments.slice(Math.max(T-e,0))),D=R.length),Object(i.h)("div",null,v&&R&&R.reverse().map((function(o){var s=o.user,p=void 0===s?{}:s,O=P.findPublicTeamByMembers(p.id),g=h.a.displayNameShort(p),y=h.a.displayName(p),k=p.image||(p.images?p.images[0]:void 0),x=o.likes&&o.likes.findIndex((function(t){return t.user===C.id}))>-1,S=[],I=0,R=0;o.comments&&(I=o.comments.length,R=(S=l[o.id]?o.comments:o.comments.slice(0,e)).length);var T=[];if(o.images){var D=Object(c.i)(o.images);T.push.apply(T,D)}var E=m[o.id]?m[o.id]:0,U=T&&T[E]?T[E]:null,B=o.currentLocationGeocode,z=void 0===B?{}:B,A=P.getCommentTranslations({object:v,commentid:o.id,targetLang:L})||j[o.id],V=A||o.comment;return f[o.id]&&(V=o.comment),Object(i.h)("div",{class:"row"},Object(i.h)("div",{class:"col-12 d-flex mb-2 position-relative"},Object(i.h)("div",{class:"text-center border rounded-circle imageRounded imageRoundedSmall",style:(k?'background-image: url("'+k.s3SmallLink+'"); background-size: cover;':"")+" border-width: 3px !important;"},!p.image&&Object(i.h)("span",{class:"font-weight-lighter",style:"font-size: 15px;"},g)),Object(i.h)("div",{class:"flex-grow-1 pl-3 pt-0",style:"line-height: 1.2em;"},Object(i.h)("div",{class:"bg-light p-2 rounded rounded-lg"},Object(i.h)("div",null,Object(i.h)("span",{style:"font-size: 0.95em;"},Object(i.h)("h5",{class:"font-weight-bold mb-0",style:"font-size: 1.0em;"},p.uuidv4&&p.uuidv4!==C.uuidv4?Object(i.h)(t,null,Object(i.h)("a",{href:"/inbox/"+p.uuidv4,onClick:function(t){return n.openInbox(t,p.uuidv4)}},y)):Object(i.h)(t,null,y)),O&&O.length>0&&Object(i.h)("div",{class:"mb-2"},Object(i.h)("small",{class:"font-weight-lighter text-muted"},O.filter((function(t){return 1===t.public})).slice(0,2).map((function(e){return Object(i.h)(t,null,Object(i.h)("a",{href:"/teams/public/"+e.uuidv4,class:"mr-2"},Object(i.h)("i",{class:"fas fa-users text-muted"})," ",e.name))})))),Object(i.h)(d.a,{markdown:h.a.replaceImages(V,o.images,L),markdownOpts:h.a.getMarkdownOptions()}))),Object(i.h)("div",{class:"container-fluid px-3 mt-1"},U&&Object(i.h)("div",{class:"clearfix row"},Object(i.h)("div",{class:"col-12 px-0 overflow-hidden",style:"max-height: 30vh;"},Object(i.h)("img",{loading:"lazy",class:"img-fluid",style:"min-width: 100px;",src:U.s3LargeLink}))),T&&T.length>1&&Object(i.h)("div",{class:"clearfix d-flex flex-wrap row"},T.map((function(e,r){return Object(i.h)(t,null,Object(i.h)("div",{class:"col px-0 overflow-hidden",style:"max-height: 100px; min-width: 100px;"},Object(i.h)("img",{loading:"lazy",class:"img-fluid border",style:"min-width: 100px;",src:e.s3SmallLink,onClick:n.viewImage,"data-id":o.id,"data-idx":r})))}))))),Object(i.h)("small",null,Object(i.h)("button",{class:"btn btn-sm btn-link py-0 "+(x?"text-primary":""),onClick:n.likeComment,"data-id":o.id},Object(i.h)(u.c,{id:"comments.like"},"Lik")),"-",Object(i.h)("button",{class:"btn btn-sm btn-link py-0",onClick:n.replyComment,"data-id":o.id},Object(i.h)(u.c,{id:"comments.comment-add"},"Kommentar")),o.language!==L&&Object(i.h)(t,null,"-",!f[o.id]&&A?Object(i.h)(t,null,Object(i.h)("button",{type:"button",class:"btn btn-sm btn-link","data-commentid":o.id,onClick:n.showOriginal},Object(i.h)("i",{class:"fas fa-cog"}),"  ",Object(i.h)(u.c,{id:"home.translate-show-original"},"Show original"))):Object(i.h)(t,null,Object(i.h)("button",{type:"button",class:"btn btn-sm btn-link",onClick:n.translate,"data-commentid":o.id},Object(i.h)("i",{class:"fas fa-cog"})," ",Object(i.h)(u.c,{id:"home.translate-to"},"See translation")))),"-",Object(i.h)("button",{class:"btn btn-sm btn-link py-0 disabled"},a.a.formatDistance(o.createdDate,new Date,{locale:"no-NB"}),o.updatedDate&&Object(i.h)(t,null,Object(i.h)("span",{class:"font-weight-light ml-2"},"(Edited ",a.a.formatDistance(o.updatedDate,new Date,{locale:"no-NB"}),")"))),_&&z&&z.formatted_address&&Object(i.h)(t,null,Object(i.h)("span",{class:"ml-2 text-muted"},Object(i.h)("i",{class:"fas fa-map-marker-alt"})," ",z.formatted_address)))),o.likes&&o.likes.length>0&&Object(i.h)("small",{class:"position-absolute bg-light shadow-sm rounded-lg py-0 px-1",style:"bottom: 20px; right: 15px;"},Object(i.h)("i",{class:"fas fa-thumbs-up text-primary"})," ",o.likes.length)),Object(i.h)("div",{class:"col-11 offset-1 mb-2"},o&&S&&S.map((function(e){var r=e.user,s=void 0===r?{}:r,l=P.findPublicTeamByMembers(s.id),c=s.firstname?""+a.a.ucfirst(s.firstname,!0)+a.a.ucfirst(s.lastname,!0):""+a.a.ucfirst(s.email||"",!0),m=s.firstname?s.firstname+" "+s.lastname:""+s.email,b=s.image||(s.images?s.images[0]:void 0),p=e.likes&&e.likes.findIndex((function(t){return t.user===C.id}))>-1,O=P.getCommentReplyTranslations({object:v,commentid:o.id,replyid:e.id,targetLang:L})||j[o.id+"-"+e.id],g=O||e.comment;return f[o.id+"-"+e.id]&&(g=e.comment),Object(i.h)("div",{class:"row"},Object(i.h)("div",{class:"col-12 d-flex mb-2 position-relative"},Object(i.h)("div",{class:"text-center border rounded-circle imageRounded imageRoundedThumb",style:(b?'background-image: url("'+b.s3SmallLink+'"); background-size: cover;':"")+" border-width: 3px !important;"},!s.image&&Object(i.h)("span",{class:"font-weight-lighter",style:"font-size: 15px;"},c)),Object(i.h)("div",{class:"flex-grow-1 pl-3 pt-0",style:"line-height: 1.2em;"},Object(i.h)("div",{class:"bg-light p-2 rounded-lg"},Object(i.h)("span",{style:"font-size: 0.95em;"},Object(i.h)("h5",{class:"font-weight-bold mb-0",style:"font-size: 1.0em;"},s.uuidv4&&s.uuidv4!==C.uuidv4?Object(i.h)(t,null,Object(i.h)("a",{href:"/inbox/"+s.uuidv4,onClick:function(t){return n.openInbox(t,s.uuidv4)}},m)):Object(i.h)(t,null,m)),l&&l.length>0&&Object(i.h)("div",{class:"mb-2"},Object(i.h)("small",{class:"font-weight-lighter text-muted"},l.filter((function(t){return 1===t.public})).slice(0,2).map((function(e){return Object(i.h)(t,null,Object(i.h)("a",{href:"/teams/public/"+e.uuidv4,class:"mr-2"},Object(i.h)("i",{class:"fas fa-users text-muted"})," ",e.name))})))),Object(i.h)(d.a,{markdown:h.a.replaceImages(g,e.images,L),markdownOpts:h.a.getMarkdownOptions()}))),Object(i.h)("small",null,Object(i.h)("button",{class:"btn btn-sm btn-link py-0 "+(p?"text-primary":""),onClick:n.likeReply,"data-comment":o.id,"data-id":e.id},Object(i.h)(u.c,{id:"comments.like"},"Lik")),"-",Object(i.h)("button",{class:"btn btn-sm btn-link py-0",onClick:n.replyComment,"data-id":o.id},Object(i.h)(u.c,{id:"comments.comment-add"},"Kommentar")),e.language!==L&&Object(i.h)(t,null,"-",!f[o.id+"-"+e.id]&&O?Object(i.h)(t,null,Object(i.h)("button",{type:"button",class:"btn btn-sm btn-link","data-commentid":o.id,"data-replyid":e.id,onClick:n.showOriginal},Object(i.h)("i",{class:"fas fa-cog"}),"  ",Object(i.h)(u.c,{id:"home.translate-show-original"},"Show original"))):Object(i.h)(t,null,Object(i.h)("button",{type:"button",class:"btn btn-sm btn-link",onClick:n.translate,"data-commentid":o.id,"data-replyid":e.id},Object(i.h)("i",{class:"fas fa-cog"})," ",Object(i.h)(u.c,{id:"home.translate-to"},"See translation")))),"-",Object(i.h)("button",{class:"btn btn-sm btn-link py-0 disabled"},a.a.formatDistance(e.createdDate,new Date,{locale:"no-NB"})))),e.likes&&Object(i.h)("small",{class:"position-absolute bg-light shadow-sm rounded-lg py-0 px-1",style:"bottom: 20px; right: 15px;"},Object(i.h)("i",{class:"fas fa-thumbs-up text-primary"})," ",e.likes.length)))})),I-R>0&&Object(i.h)("div",null,Object(i.h)("button",{class:"btn btn-sm btn-link py-0",onClick:n.toggleReplies,"data-id":o.id},Object(i.h)(u.c,{id:"comments.show-more",fields:{more:I-R}},"Vis ",I-R," flere kommentarer...")))),r[o.id]&&Object(i.h)("div",{class:"col-11 offset-1 d-flex mb-2 position-relative"},Object(i.h)(b.a,{stores:n.props.stores,workout:v,callback:w,commentId:o.id,inputRef:function(t){return n.inputRef[o.id]=t},inputRefObject:n.inputRef})))})),T-D>0&&Object(i.h)("div",null,Object(i.h)("button",{class:"btn btn-sm btn-link py-0",onClick:this.toggleComments},Object(i.h)(u.c,{id:"comments.show-more",fields:{more:T-D}},"Vis ",T-D," flere kommentarer..."))),s&&Object(i.h)("div",null,Object(i.h)("button",{class:"btn btn-sm btn-link py-0",onClick:this.toggleComments},Object(i.h)(u.c,{id:"comments.hide-all-comments"},"Skjul alle kommentarene."))))},n}(i.Component))||s;e.a=f}).call(this,n("hosL").Fragment)},"vY+r":function(t,e,n){"use strict";(function(t){function o(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function r(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var s,i=n("hosL"),a=n("Utv1"),l=n("/eY4"),c=n("OhSV"),u=n("ZOvn"),m={},d=Object(l.a)(s=function(e){function n(t){var n;return(n=e.call(this,t)||this).toggleViews=function(){var t=n.props;(t.isTeamAdmin||t.isAdmin)&&n.setState({showViewList:!n.state.showViewList})},n.state=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?o(Object(n),!0).forEach((function(e){r(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},m),n}var s,l;return l=e,(s=n).prototype=Object.create(l.prototype),s.prototype.constructor=s,s.__proto__=l,n.prototype.render=function(){var e=this.state.showViewList,n=this.props.stores,o=n.storyStore,r=n.teamStore,s=n.workoutStore,l=this.props,m=l.views,d=l.type,b=void 0===d?"story":d,h=l.onTeamClick,p=void 0===h?function(){}:h,f=[];Object.entries(l.object.statistics).forEach((function(t){Object.entries(t[1]).forEach((function(t){var e=t[1];e.viewUsers&&f.push(e.viewUsers)}))}));var O=f.flat().slice(0,50);return Object(i.h)(t,null,Object(i.h)("div",{class:"d-flex justify-content-end mb-2"},Object(i.h)("span",{class:"ml-2 text-muted font-weight-normal",onClick:this.toggleViews},Object(i.h)("small",null,m," ",Object(i.h)(c.c,{id:"story.views"},"views")))),e&&Object(i.h)("div",{class:"mt-3 mb-3"},O&&O.map((function(e){var n,l,c;if("story"===b?(n=o.findPublicUser(e),l=o.findPublicTeamByMembers(e)):"team"===b?(n=r.findPublicUser(e),l=r.findPublicTeamByMembers(e)):"workout"===b&&(n=s.findPublicUser(e),l=s.findPublicTeamByMembers(e)),!n)return"";a.a.isArray(l)&&(c=l.find((function(t){return 1===t.public})));var m=u.a.getImage({user:n,team:c,priority:"user"}),d=u.a.displayNameShort(n),h=u.a.displayName(n,!0);return Object(i.h)("div",{class:"d-flex flex-row position-relative font-weight-normal mb-1"},c?Object(i.h)(t,null,Object(i.h)("a",{href:"/teams/public/"+c.uuidv4,title:c.name,onClick:function(t){return p(t,c.uuidv4)},class:"stretched-link"},Object(i.h)("div",{class:"text-center border rounded-circle imageRounded imageRoundedThumb",style:m?'background-image: url("'+m+'"); background-size: cover;':""},!m&&Object(i.h)("div",{class:"",style:"font-size: 12px; padding-top: 3px;"},d))),Object(i.h)("div",{class:"ml-2 "},Object(i.h)("small",null,h," ",Object(i.h)("span",{class:"font-weight-normal"},"- ",c.name)))):Object(i.h)(t,null,Object(i.h)("div",{class:"text-center border rounded-circle imageRounded imageRoundedThumb",style:(m?'background-image: url("'+m+'"); background-size: cover;':"")+" opacity: 0.5;"},!m&&Object(i.h)("div",{class:"text-muted",style:"font-size: 12px; padding-top: 3px;"},d)),Object(i.h)("div",{class:"ml-2"},Object(i.h)("small",null,h))))})),m>O.length&&Object(i.h)(t,null,Object(i.h)("small",{class:"text-muted"},Object(i.h)(c.c,{id:"story.limited-to"},"Limited to max 50 users.")))))},n}(i.Component))||s;e.a=d}).call(this,n("hosL").Fragment)}}]);
//# sourceMappingURL=4.chunk.2a075.js.map