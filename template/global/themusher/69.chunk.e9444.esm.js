(window.webpackJsonp=window.webpackJsonp||[]).push([[69],{"8Lgr":function(e,t,s){"use strict";(function(e){function a(e){return n.a.format(e,e<5?2:1)}var r,l=s("hosL"),n=s("Utv1"),o=s("/eY4");s("OhSV"),s("ZOvn");let i=Object(o.a)(r=class extends l.Component{render(){const{value:t=0,smallUnit:s}=this.props,{userStore:r}=this.props.stores,{user:n}=r,{settings:o={}}=n;return o.imperial?Object(l.h)(e,null,Object(l.h)("nobr",null,a(function(e){return.621371*e}(t))," ",s?Object(l.h)(e,null,Object(l.h)("small",null,Object(l.h)("small",null,Object(l.h)("small",{class:"ml-0 text-muted"},"mi")))):Object(l.h)(e,null,"mi"))):Object(l.h)(e,null,Object(l.h)("nobr",null,a(t)," ",s?Object(l.h)(e,null,Object(l.h)("small",null,Object(l.h)("small",null,Object(l.h)("small",{class:"ml-0 text-muted"},"km")))):Object(l.h)(e,null,"km")))}})||r;t.a=i}).call(this,s("hosL").Fragment)},ETxl:function(e){e.exports={hoverelementonly:"hoverelementonly__1mJGJ",hoverElement:"hoverElement__axh3O",hoverelementhide:"hoverelementhide__1k_qH","progress-bar-vertical":"progress-bar-vertical__1B2sC","progress-bar":"progress-bar__pnsVj",dragged:"dragged__QXO46",over:"over__1re3x",list:"list__q_emZ"}},QkTp:function(e,t,s){"use strict";(function(e){var a,r=s("hosL"),l=s("Utv1"),n=s("/eY4");s("OhSV"),s("ZOvn");let o=Object(n.a)(a=class extends r.Component{render(){const{value:t=0}=this.props,{userStore:s}=this.props.stores,{user:a}=s,{settings:n={}}=a;return n.imperial?Object(r.h)(e,null,Object(r.h)("nobr",null,l.a.format(function(e){return 9*e/5+32}(t),0),"°F")):Object(r.h)(e,null,Object(r.h)("nobr",null,l.a.format(t,1),"°C"))}})||a;t.a=o}).call(this,s("hosL").Fragment)},UwwE:function(e,t,s){"use strict";(function(e){var a,r=s("hosL"),l=s("Utv1"),n=s("/eY4");s("OhSV"),s("ZOvn");let o=Object(n.a)(a=class extends r.Component{render(){const{value:t=0}=this.props,{userStore:s}=this.props.stores,{user:a}=s,{settings:n={}}=a;return n.imperial?Object(r.h)(e,null,Object(r.h)("nobr",null,l.a.format(function(e){return 2.20462*e}(t),0)," lb")):Object(r.h)(e,null,Object(r.h)("nobr",null,l.a.format(t,0)," kg"))}})||a;t.a=o}).call(this,s("hosL").Fragment)},irB3:function(e,t,s){"use strict";(function(e){var a,r=s("hosL"),l=s("Utv1"),n=s("/eY4");s("OhSV"),s("ZOvn");let o=Object(n.a)(a=class extends r.Component{render(){const{value:t=0,smallUnit:s}=this.props,{userStore:a}=this.props.stores,{user:n}=a,{settings:o={}}=n;return o.imperial?Object(r.h)(e,null,Object(r.h)("nobr",null,l.a.format(function(e){return 3.28084*e}(t),0)," ",s?Object(r.h)(e,null,Object(r.h)("small",null,Object(r.h)("small",null,Object(r.h)("small",{class:"ml-0 text-muted"},"ft")))):Object(r.h)(e,null,"ft"))):Object(r.h)(e,null,Object(r.h)("nobr",null,l.a.format(t,0)," ",s?Object(r.h)(e,null,Object(r.h)("small",null,Object(r.h)("small",null,Object(r.h)("small",{class:"ml-0 text-muted"},"m")))):Object(r.h)(e,null,"m")))}})||a;t.a=o}).call(this,s("hosL").Fragment)},nHdA:function(e,t,s){"use strict";(function(e){var a,r=s("hosL"),l=s("Utv1"),n=s("/eY4"),o=s("OhSV");s("ZOvn");let i=Object(n.a)(a=class extends r.Component{render(){const{value:t=0,smallUnit:s}=this.props,{userStore:a}=this.props.stores,{user:n}=a,{settings:i={}}=n;return i.imperial?Object(r.h)(e,null,Object(r.h)("nobr",null,l.a.format(function(e){return.621371*e}(t),1)," ",s?Object(r.h)(e,null,Object(r.h)("small",null,Object(r.h)("small",null,Object(r.h)("small",{class:"ml-0 text-muted"},Object(r.h)(o.c,{id:"workouts.mph"},"mph"))))):Object(r.h)(e,null,Object(r.h)(o.c,{id:"workouts.mph"},"mph")))):Object(r.h)(e,null,Object(r.h)("nobr",null,l.a.format(t,1)," ",s?Object(r.h)(e,null,Object(r.h)("small",null,Object(r.h)("small",null,Object(r.h)("small",{class:"ml-0 text-muted"},Object(r.h)(o.c,{id:"workouts.kmt"},"km/t"))))):Object(r.h)(e,null,Object(r.h)(o.c,{id:"workouts.kmt"},"km/t"))))}})||a;t.a=i}).call(this,s("hosL").Fragment)},om2D:function(e,t,s){"use strict";var a,r=s("hosL"),l=s("/eY4"),n=(s("cneo"),s("Utv1"),s("u2zT"));let o=Object(l.a)(a=class extends r.Component{constructor(e){super(e),this.handleAddImage=e=>{const{addToImages:t=!0}=this.props,{updateField:s,object:a,field:r}=this.props;if(r&&s({id:a.id,field:r,value:e,skipTimer:!0}),t){const t=[];t.push(e),s({id:a.id,field:"images",value:t,skipTimer:!0})}},this.state={files:[]}}render(){const{uploadStatus:e=(()=>{}),before:t=(()=>{}),after:s=(()=>{}),autoOpen:a=!0}=this.props;return Object(r.h)("div",{class:"row"},Object(r.h)("div",{class:"col-12"},Object(r.h)(n.a,{handleAddImage:this.handleAddImage,uploadStatus:e,apiUrl:"/api/fileupload",before:t,after:s,autoOpen:a},Object(r.h)("div",{style:{height:30,width:"100%"}}))))}})||a;t.a=o},tLKz:function(e,t,s){"use strict";function a(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,a)}return s}function r(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}s.r(t);var l,n=s("hosL"),o=(s("Utv1"),s("/eY4")),i=s("OhSV"),c=s("go65"),h=s("w8dD"),d=s("ZOvn");const u=d.a.marginTop(!0),p=d.a.marginBottom(),b=d.a.subMenuMarginTop(),m={isLoading:!1,submenu:"all"};let O=Object(o.a)(l=class extends n.Component{constructor(e){super(e),this.chooseSubmenu=e=>{this.setState({submenu:e.target.parentElement.dataset.menu||e.target.dataset.menu})},this.state=function(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?a(Object(s),!0).forEach((function(t){r(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):a(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}({},m)}async loadTracks(){this.setState({isLoading:!0});const{trackStore:e}=this.props.stores;await e.load({addData:["publicTracks"]}),this.setState({isLoading:!1})}componentDidMount(){this.loadTracks()}render(){const{scrolledDown:e}=this.props,{isLoading:t,submenu:s,searchText:a}=this.state,{trackStore:r,appState:l}=this.props.stores,{publicTracks:o}=r,{darkmode:d}=l,m="mapOnly"===s?e=>e.gpx:()=>!0;return Object(n.h)("div",{class:"container-fluid",style:`margin-bottom: ${p}; margin-top: ${u};`},Object(n.h)("div",{class:"row fixed-top pt-2",style:`margin-top: ${e>0?0:b}; background-color: ${d?"#191d21":"#f8f9fa"}; transition: all 0.3s ease-in-out;`},Object(n.h)("div",{class:"col text-center subtopmenu"},Object(n.h)("a",{href:"/tracks/",class:"text-secondary stretched-link"},Object(n.h)("nobr",null,Object(n.h)("i",{class:"fas fa-map-marked"})," ",Object(n.h)(i.c,{id:"tracks.your-tracks"},"Dine runder")))),Object(n.h)("div",{class:"col text-center border-bottom border-primary subtopmenu"},Object(n.h)("a",{href:"/tracks/public",class:"text-primary stretched-link"},Object(n.h)("nobr",null,Object(n.h)("i",{class:"fas fa-map-marked"})," ",Object(n.h)(i.c,{id:"tracks.public-tracks"},"Offentlige runder"))))),Object(n.h)("div",{class:"row"},Object(n.h)("div",{class:"col-12"},Object(n.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 px-0"},Object(n.h)("h5",null,Object(n.h)(i.c,{id:"tracks.all-public-tracks",fields:{total:o.length}},"Offentlige treningsrunder - ",o.length," stk"))),Object(n.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 my-3"},Object(n.h)("div",{class:"d-flex justify-content-center py-3"},Object(n.h)(i.b,null,Object(n.h)("input",{class:"form-control form-control mr-2",type:"search",placeholder:Object(n.h)(i.c,{id:"header.search-placeholder"},"Søk etter det meste..."),value:a,onInput:Object(c.a)(this,"searchText")}))),Object(n.h)("div",{class:"row"},Object(n.h)("div",{class:"w-100 overflow-hidden"},Object(n.h)("div",{class:"d-flex flex-row flex-nowrap pb-2 px-1",style:"overflow: auto; scroll-snap-type: x mandatory;"},Object(n.h)("div",{class:"col px-0 pt-2"},Object(n.h)("button",{class:`btn btn-block rounded-pill-left rounded-none ${"all"===s?"btn-primary":"btn-outline-primary"} text-nowrap`,style:"text-overflow: ellipsis; overflow: hidden;","data-menu":"all",onClick:this.chooseSubmenu},Object(n.h)("i",{class:"fas fa-chart-area"})," ",Object(n.h)(i.c,{id:"tracks.filter-all"},"Vis alle"))),Object(n.h)("div",{class:"col px-0 pt-2"},Object(n.h)("button",{class:`btn btn-block rounded-pill-right rounded-none ${"mapOnly"===s?"btn-primary":"btn-outline-primary"} text-nowrap`,style:"text-overflow: ellipsis; overflow: hidden;","data-menu":"mapOnly",onClick:this.chooseSubmenu},Object(n.h)("i",{class:"fas fa-tachometer-alt"})," ",Object(n.h)(i.c,{id:"tracks.filter-only-map"},"Vis bare de med kart"))))))),!t&&o&&0===o.length&&Object(n.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 text-muted"},Object(n.h)("div",{class:"text-center mb-5"},Object(n.h)("div",{class:"display-1"},Object(n.h)("i",{class:"fas fa-map-marked"})),Object(n.h)("h5",null,Object(n.h)(i.c,{id:"tracks.no-tracks-yet"},"Ingen runder er registrert ennå."))),Object(n.h)("p",{class:"text-center"},Object(n.h)("p",null,Object(n.h)(i.c,{id:"tracks.no-tracks-info-1"},"Du har mulighet til å laste opp GPX-filer fra rundene dine.")),Object(n.h)("p",null,Object(n.h)(i.c,{id:"tracks.no-tracks-info-2"},"Det finnes mange apper som lar deg lage GPX-filer, men vi anbefaler"),":"),"ViewRanger for ",Object(n.h)("a",{href:"https://apps.apple.com/gb/app/viewranger-hike-ride-or-walk/id404581674"},"iOS")," and  ",Object(n.h)("a",{href:"https://play.google.com/store/apps/details?id=com.augmentra.viewranger.android&hl=en"},"Android"),"."),Object(n.h)(i.c,{id:"tracks.howto-title"},"Slik kommer du i gang"),":",Object(n.h)("ol",null,Object(n.h)("li",null,Object(n.h)(i.c,{id:"tracks.howto-1"},'Trykk på knappen "Legg til runde" rett nedenfor.')))),o&&o.filter(m).filter(e=>!a||new RegExp(a,"i").test(e.name)).map(e=>Object(n.h)(h.a,{stores:this.props.stores,track:e,showUser:!0,isPublic:!0})))))}})||l;t.default=O},u2zT:function(e,t,s){"use strict";var a,r=s("hosL"),l=s("/eY4"),n=s("Utv1"),o=s("OhSV");let i=Object(l.a)(a=class extends r.Component{constructor(e){super(e),this.dropRef=Object(r.createRef)(),this.handleDrag=e=>{e.preventDefault(),e.stopPropagation()},this.handleDragIn=e=>{e.preventDefault(),e.stopPropagation(),this.dragCounter++,e.dataTransfer.items&&e.dataTransfer.items.length>0&&this.setState({drag:!0})},this.handleDragOut=e=>{e.preventDefault(),e.stopPropagation(),this.dragCounter--,0===this.dragCounter&&this.setState({drag:!1})},this.handleDrop=e=>{if(e.preventDefault(),e.stopPropagation(),this.setState({drag:!1}),e.dataTransfer.files&&e.dataTransfer.files.length>0){for(let t=0,s=e.dataTransfer.files.length;t<s;t+=1){this.readLocalFile(e.dataTransfer.files[t])}this.dragCounter=0}},this.handleAddFiles=e=>{e.preventDefault();const t=e.target;for(let e=0,s=t.files.length;e<s;e+=1){this.readLocalFile(t.files[e])}},this.handleEvent=()=>{0},this.handleUpload=e=>{const{uploadStatus:t=(()=>{}),before:s=(()=>{}),after:a=(()=>{})}=this.props;t(!1),n.a.isFunction(s)&&s();const r=new FormData;r.append("files[]",e);const l={progress:1};l.xhr=new XMLHttpRequest,l.xhr.upload.addEventListener("progress",t=>{this.updateProgress(t,e)}),l.xhr.addEventListener("loadstart",t=>{this.handleEvent(t,e)}),l.xhr.addEventListener("load",t=>{this.handleEvent(t,e)}),l.xhr.addEventListener("loadend",t=>{const s=e;n.a.isFunction(a)&&a(),this.handleEvent(t,s)}),l.xhr.addEventListener("progress",t=>{this.handleEvent(t,e)}),l.xhr.addEventListener("error",t=>{this.handleEvent(t,e)}),l.xhr.addEventListener("abort",t=>{this.handleEvent(t,e)}),l.xhr.addEventListener("readystatechange",t=>{this.uploadDone(t,e)}),l.xhr.open("POST",`${n.a.getApiServer()}${this.props.apiUrl}`),l.xhr.setRequestHeader("Authorization","Bearer "+n.a.getJwtToken()),l.xhr.send(r);const o=e.name,i=this.state.uploadedFilesData;i[o]||(i[o]={}),i[o].uploadMeta=l,i[o].imageNum=this.state.imageNum,this.setState({uploadedFilesData:i})},this.readLocalFile=e=>new Promise((t,s)=>{const a=new FileReader;a.addEventListener("error",e=>{s(e)}),a.addEventListener("load",s=>{const a=e,r=a.name,l=this.state.uploadedFilesData;l[r]||(l[r]={}),l[r].event=s,this.setState({uploadedFilesData:l}),this.handleUpload(a),t(s)}),a.readAsDataURL(e)}),this.updateProgress=(e,t)=>{if(e.lengthComputable){const s=t.name,a=this.state.uploadedFilesData,r=e.loaded/e.total*100;0,a[s].uploadMeta.progress=r,this.setState({uploadedFilesData:a})}},this.uploadDone=(e,t)=>{const s=t.name,a=this.state.uploadedFilesData,r=a[s].uploadMeta;if(r&&4===r.xhr.readyState&&201===r.xhr.status){const e=JSON.parse(r.xhr.responseText).data.files;for(let t=0;t<e.length;t+=1){this.addFileToUpload(e[t]),this.fileInput.value=""}}},this.state={drag:!1,loadingProgress:0,uploadedFiles:[],uploadedFilesData:{}}}addFileToUpload(e){const{uploadedFilesData:t}=this.state,{handleAddImage:s,uploadStatus:a=(()=>{})}=this.props;delete t[e.name],this.setState({uploadedFilesData:t}),s(e),a(!0)}componentDidMount(){const e=this.dropRef.current;e.addEventListener("dragenter",this.handleDragIn),e.addEventListener("dragleave",this.handleDragOut),e.addEventListener("dragover",this.handleDrag),e.addEventListener("drop",this.handleDrop);const{autoOpen:t}=this.props;t&&setTimeout(()=>{this.fileInput.click()},10)}componentWillUnmount(){const e=this.dropRef.current;e.removeEventListener("dragenter",this.handleDragIn),e.removeEventListener("dragleave",this.handleDragOut),e.removeEventListener("dragover",this.handleDrag),e.removeEventListener("drop",this.handleDrop)}render(){const{uploadedFilesData:e}=this.state;return Object(r.h)("div",{style:{position:"relative"},ref:this.dropRef},this.state.drag&&Object(r.h)("div",{style:{border:"dashed grey 4px",backgroundColor:"rgba(255,255,255,.8)",position:"absolute",top:0,bottom:0,left:0,right:0,zIndex:9999}},Object(r.h)("div",{style:{position:"absolute",top:"50%",right:0,left:0,textAlign:"center",color:"grey",fontSize:36}},Object(r.h)("div",null,Object(r.h)(o.c,{id:"imageupload.drag-files-here"},"drop your files here :)")))),Object(r.h)("div",null,Object(r.h)("input",{class:"btn btn-info col-sm-12",multiple:!0,type:"file",id:"image-file",onchange:this.handleAddFiles,ref:e=>{this.fileInput=e}})),Object(r.h)("div",null,Object.keys(e).length>0?Object(r.h)("h3",null,Object(r.h)(o.c,{id:"imageupload.upload-images"},"Uploaded images")):"",Object(r.h)("ul",{class:"list-group"},Object.keys(e).map(t=>{const{uploadMeta:s={}}=e[t],a=t.match(/(jpg|jpeg|png|gif|heic|heif|svg|webp|tif)/i);return Object(r.h)("li",{class:"list-group-item list-group-item-action flex-column align-items-start"},Object(r.h)("div",{class:"d-flex w-100 justify-content-between"},a&&Object(r.h)("img",{class:"img-fluid mr-3",src:e[t].event.target.result,style:"max-height: 50px;"}),Object(r.h)("small",null,e[t].event.uploadDone),Object(r.h)(o.c,{id:"imageupload.uploading-image"},"Laster opp bilde..."),Object(r.h)("small",null,n.a.formatBytes(e[t].event.total,2))),Object(r.h)("div",{class:"progress mt-1",style:"height: 4px;"},Object(r.h)("div",{class:"progress-bar progress-bar-striped progress-bar-animated bg-success",role:"progressbar",style:`width: ${s.progress}%; height: 4px;`,"aria-valuenow":s.progress,"aria-valuemin":"0","aria-valuemax":"100"})))}))),this.props.children)}})||a;t.a=i}}]);
//# sourceMappingURL=69.chunk.e9444.esm.js.map