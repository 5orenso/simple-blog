(window.webpackJsonp=window.webpackJsonp||[]).push([[51],{"07/T":function(e,t,s){"use strict";(function(e){function n(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function o(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}var i,c=s("hosL"),r=s("Utv1"),a=s("/eY4"),l=s("ZOvn"),m=s("4dUO"),h=s("PWmE");const d={showAddComment:!1};let b=Object(a.a)(i=class extends c.Component{constructor(e){var t;super(e),t=this,this.likeNews=async function(){const{newsStore:e}=t.props.stores,{news:s}=t.props;await e.likeNews({id:s.id})},this.toggleAddComment=e=>{const t=e.target.parentElement.dataset.id||e.target.dataset.id,{showAddComment:s}=this.state;this.setState({showAddComment:!s},()=>{this.inputRef[t]&&this.inputRef[t].focus()})},this.state=function(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?n(Object(s),!0).forEach((function(t){o(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):n(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}({},d),this.updateTimer={},this.inputRef={}}render(){const{showAddComment:t}=this.state,{news:s={}}=this.props,{userStore:n}=this.props.stores,{user:o}=n,{language:i="en"}=o,{likes:a=[],comments:d=[]}=s,b=s.likes&&s.likes.findIndex(e=>e.user===o.id)>-1;return Object(c.h)(e,null,Object(c.h)("div",{class:"w-100 mb-5"},Object(c.h)("div",{class:"row"},Object(c.h)("div",{class:"col-12 col-sm-8 col-lg-6 offset-sm-2 offset-lg-3 d-flex mb-0 position-relative"},Object(c.h)("div",{class:"text-center border rounded-circle imageRounded",style:s.images&&s.images[0]?`background-image: url("${s.images[0].s3SmallLink}");`:""},!(s.images&&s.images[0])&&Object(c.h)("i",{class:"fas fa-paragraph text-muted mt-3",style:"font-size: 40px;"})),Object(c.h)("div",{class:"flex-grow-1 pl-3",style:"line-height: 1.2em;"},Object(c.h)("a",{class:"stretched-link",href:"/news/"+s.id},Object(c.h)("i",{class:`fas fa-eye${s.active?" text-success":"-slash text-danger"} float-right`}),Object(c.h)("h5",{class:"mb-1",style:"line-height: 1.0em;"},l.a.replaceImages(s.title,s.images,i))),Object(c.h)("div",null,Object(c.h)("small",{class:"text-muted"},r.a.isoDate(s.createdDate)," - ",s.tag)),l.a.replaceImages(s.ingress,s.images,i))),Object(c.h)("div",{class:"col-10 offset-2 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-0"},a&&a.length>0&&Object(c.h)("small",{class:"bg-light shadow-sm rounded-lg py-0 px-1",style:"bottom: 20px; right: 15px;"},Object(c.h)("i",{class:"fas fa-thumbs-up text-primary"})," ",a.length),d&&d.length>0&&Object(c.h)("small",{class:"float-right bg-light shadow-sm rounded-lg py-0 px-1",style:"bottom: 20px; right: 15px;"},Object(c.h)("i",{class:"fas fa-comment text-primary"})," ",d.length)),Object(c.h)("div",{class:"col-10 offset-2 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-1 mb-2"},Object(c.h)("div",{class:"row"},Object(c.h)("div",{class:"col-6 text-center"},Object(c.h)("button",{type:"button",class:`btn btn-sm btn-outline-${b?"primary":"secondary"} btn-lg btn-block ${b?"text-primary":""}`,onClick:this.likeNews},Object(c.h)("i",{class:(b?"text-primary fas":"far")+" fa-thumbs-up"})," Like")),Object(c.h)("div",{class:"col-6 text-center"},Object(c.h)("button",{type:"button",class:"btn btn-sm btn-outline-secondary btn-lg btn-block","data-id":s.id,onClick:this.toggleAddComment},Object(c.h)("i",{class:"fas fa-comment"})," Comment")))),t&&Object(c.h)(h.a,{stores:this.props.stores,news:s,inputRef:e=>this.inputRef[s.id]=e}),Object(c.h)(m.a,{stores:this.props.stores,news:s,col:10,offset:2,compact:!0}))))}})||i;t.a=b}).call(this,s("hosL").Fragment)},"4dUO":function(e,t,s){"use strict";function n(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function o(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}var i,c=s("hosL"),r=s("Utv1"),a=s("/eY4"),l=s("OhSV"),m=s("go65");s("ETxl"),s("ZOvn");var h,d=Object(a.a)(i=class extends c.Component{constructor(...e){var t;super(...e),t=this,this.commentNews=async function(){const{callback:e=(()=>{}),commentId:s}=t.props,{news:n}=t.props,{newsStore:o}=t.props.stores,{comment:i=""}=t.state,c=await o.commentReplyNews({id:n.id,commentId:s,comment:i});c&&200===c.status&&(t.setState({comment:""}),e({news:n,response:c}))}}render(){const{inputRef:e}=this.props,{comment:t}=this.state,{userStore:s}=this.props.stores,{user:n={}}=s,o=n.firstname?`${r.a.ucfirst(n.firstname,!0)}${r.a.ucfirst(n.lastname,!0)}`:""+r.a.ucfirst(n.email||"",!0),i=n.image||(n.images?n.images[0]:void 0);return Object(c.h)("div",{class:"w-100"},Object(c.h)("div",{class:"d-flex mb-0 position-relative w-100"},Object(c.h)("div",{class:"text-center border rounded-circle imageRounded imageRoundedThumb",style:(i?`background-image: url('${i.s3SmallLink}'); background-size: cover;`:"")+" border-width: 3px !important;"},!i&&Object(c.h)("span",{class:"font-weight-lighter",style:"font-size: 15px;"},o)),Object(c.h)("div",{class:"col pl-3",style:"line-height: 1.2em;"},Object(c.h)("div",{class:"d-flex bd-highlight"},Object(c.h)("div",{class:"p-0 w-100 bd-highlight"},Object(c.h)("label",{class:"sr-only",for:"inlineFormInput"},Object(c.h)(l.c,{id:"comments.comment"},"Kommentar")),Object(c.h)("div",{class:"border rounded rounded-lg position-relative"},Object(c.h)(l.b,null,Object(c.h)("input",{class:"form-control-plaintext px-2",type:"text",placeholder:Object(c.h)(l.c,{id:"comments.write-comment"},"Skriv en kommentar..."),onInput:Object(m.a)(this,"comment"),value:t,ref:e})))),Object(c.h)("div",{class:"p-0 pl-2 flex-shrink-1 bd-highlight"},Object(c.h)("button",{type:"button",class:"btn btn-sm btn-primary mb-2",onClick:this.commentNews},Object(c.h)("i",{class:"fas fa-paper-plane"})))))))}})||i;const b={showAddComment:{},showAllComments:!1,showAllReplies:{}};let p=Object(a.a)(h=class extends c.Component{constructor(e){var t;super(e),t=this,this.likeComment=async function(e){const{callback:s=(()=>{})}=t.props,n=e.target.parentElement.dataset.id||e.target.dataset.id,{news:o}=t.props,{newsStore:i}=t.props.stores,c=await i.likeNewsComment({id:o.id,commentId:n});return c&&200===c.status&&s({news:o,commentId:n,response:c}),!0},this.likeReply=async function(e){const{callback:s=(()=>{})}=t.props,n=e.target.parentElement.dataset.id||e.target.dataset.id,o=e.target.parentElement.dataset.comment||e.target.dataset.comment,{news:i}=t.props,{newsStore:c}=t.props.stores,r=await c.likeNewsCommentReply({id:i.id,replyId:n,commentId:o});r&&200===r.status&&s({news:i,commentId:o,response:r})},this.replyComment=async function(e){const s=e.target.parentElement.dataset.id||e.target.dataset.id,{showAddComment:n}=t.state;n[s]=!n[s],t.setState({showAddComment:n},()=>{t.inputRef[s]&&t.inputRef[s].focus()})},this.toggleComments=()=>{const{showAllComments:e}=this.state;this.setState({showAllComments:!e})},this.toggleReplies=e=>{const t=e.target.parentElement.dataset.id||e.target.dataset.id,{showAllReplies:s}=this.state;s[t]=!s[t],this.setState({showAllReplies:s})},this.state=function(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?n(Object(s),!0).forEach((function(t){o(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):n(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}({},b),this.inputRef={}}render(){const{showAddComment:e,showAllComments:t,showAllReplies:s}=this.state,{news:n,callback:o=(()=>{}),col:i=12,offset:a=0,compact:m=!1}=this.props,{userStore:h}=this.props.stores,{user:b}=h;let p=[],u=0,g=0;if(n.comments){if(u=n.comments.length,t)p=n.comments;else{p=n.comments.slice(Math.max(u-(m?0:2),0))}g=p.length}return Object(c.h)("div",{class:`col-${i} offset-${a} col-sm-8 col-lg-6 offset-sm-2 offset-lg-3`},t&&Object(c.h)("div",null,Object(c.h)("button",{class:"btn btn-sm btn-link py-0 mb-2",onClick:this.toggleComments},Object(c.h)(l.c,{id:"comments.hide-all-comments"},"Skjul alle kommentarene."))),n&&p&&p.reverse().map(t=>{const{user:i={}}=t,a=i.firstname?`${r.a.ucfirst(i.firstname,!0)}${r.a.ucfirst(i.lastname,!0)}`:""+r.a.ucfirst(i.email||"",!0),m=i.firstname?`${i.firstname} ${i.lastname}`:""+i.email,h=i.image||(i.images?i.images[0]:void 0),p=t.likes&&t.likes.findIndex(e=>e.user===b.id)>-1;let u=[],g=0,f=0;return t.comments&&(g=t.comments.length,u=s[t.id]?t.comments:t.comments.slice(0,void 0),f=u.length),Object(c.h)("div",{class:"row"},Object(c.h)("div",{class:"col-12 d-flex mb-2 position-relative"},Object(c.h)("div",{class:"text-center border rounded-circle imageRounded imageRoundedSmall",style:(h?`background-image: url("${h.s3SmallLink}"); background-size: cover;`:"")+" border-width: 3px !important;"},!i.image&&Object(c.h)("span",{class:"font-weight-lighter",style:"font-size: 15px;"},a)),Object(c.h)("div",{class:"flex-grow-1 pl-3 pt-0",style:"line-height: 1.2em;"},Object(c.h)("div",{class:"bg-light p-2 rounded-lg"},Object(c.h)("h5",{class:"font-weight-bold mb-0",style:"font-size: 1.0em;"},m),t.comment),Object(c.h)("small",null,Object(c.h)("button",{class:"btn btn-sm btn-link py-0 "+(p?"text-primary":""),onClick:this.likeComment,"data-id":t.id},Object(c.h)(l.c,{id:"comments.like"},"Lik")),"-",Object(c.h)("button",{class:"btn btn-sm btn-link py-0",onClick:this.replyComment,"data-id":t.id},Object(c.h)(l.c,{id:"comments.comment-add"},"Kommentar")),"-",Object(c.h)("button",{class:"btn btn-sm btn-link py-0 disabled"},r.a.formatDistance(t.createdDate,new Date,{locale:"no-NB"})))),t.likes&&t.likes.length>0&&Object(c.h)("small",{class:"position-absolute bg-light shadow-sm rounded-lg py-0 px-1",style:"bottom: 20px; right: 15px;"},Object(c.h)("i",{class:"fas fa-thumbs-up text-primary"})," ",t.likes.length)),Object(c.h)("div",{class:"col-11 offset-1 mb-2"},t&&u&&u.map(e=>{const{user:s={}}=e,n=s.firstname?`${r.a.ucfirst(s.firstname,!0)}${r.a.ucfirst(s.lastname,!0)}`:""+r.a.ucfirst(s.email||"",!0),o=s.firstname?`${s.firstname} ${s.lastname}`:""+s.email,i=s.image||(s.images?s.images[0]:void 0),a=e.likes&&e.likes.findIndex(e=>e.user===b.id)>-1;return Object(c.h)("div",{class:"row"},Object(c.h)("div",{class:"col-12 d-flex mb-2 position-relative"},Object(c.h)("div",{class:"text-center border rounded-circle imageRounded imageRoundedThumb",style:(i?`background-image: url("${i.s3SmallLink}"); background-size: cover;`:"")+" border-width: 3px !important;"},!s.image&&Object(c.h)("span",{class:"font-weight-lighter",style:"font-size: 15px;"},n)),Object(c.h)("div",{class:"flex-grow-1 pl-3 pt-0",style:"line-height: 1.2em;"},Object(c.h)("div",{class:"bg-light p-2 rounded-lg"},Object(c.h)("h5",{class:"font-weight-bold mb-0",style:"font-size: 1.0em;"},o),e.comment),Object(c.h)("small",null,Object(c.h)("button",{class:"btn btn-sm btn-link py-0 "+(a?"text-primary":""),onClick:this.likeReply,"data-comment":t.id,"data-id":e.id},Object(c.h)(l.c,{id:"comments.like"},"Lik")),"-",Object(c.h)("button",{class:"btn btn-sm btn-link py-0",onClick:this.replyComment,"data-id":t.id},Object(c.h)(l.c,{id:"comments.comment-add"},"Kommentar")),"-",Object(c.h)("button",{class:"btn btn-sm btn-link py-0 disabled"},r.a.formatDistance(e.createdDate,new Date,{locale:"no-NB"})))),e.likes&&Object(c.h)("small",{class:"position-absolute bg-light shadow-sm rounded-lg py-0 px-1",style:"bottom: 20px; right: 15px;"},Object(c.h)("i",{class:"fas fa-thumbs-up text-primary"})," ",e.likes.length)))}),g-f>0&&Object(c.h)("div",null,Object(c.h)("button",{class:"btn btn-sm btn-link py-0",onClick:this.toggleReplies,"data-id":t.id},Object(c.h)(l.c,{id:"comments.show-more",fields:{more:g-f}},"Vis ",g-f," flere kommentarer...")))),e[t.id]&&Object(c.h)("div",{class:"col-11 offset-1 d-flex mb-2 position-relative"},Object(c.h)(d,{stores:this.props.stores,news:n,callback:o,commentId:t.id,inputRef:e=>this.inputRef[t.id]=e})))}),u-g>0&&Object(c.h)("div",null,Object(c.h)("button",{class:"btn btn-sm btn-link py-0",onClick:this.toggleComments},Object(c.h)(l.c,{id:"comments.show-more",fields:{more:u-g}},"Vis ",u-g," flere kommentarer..."))),t&&Object(c.h)("div",null,Object(c.h)("button",{class:"btn btn-sm btn-link py-0",onClick:this.toggleComments},Object(c.h)(l.c,{id:"comments.hide-all-comments"},"Skjul alle kommentarene."))))}})||h;t.a=p},AxFz:function(e,t,s){"use strict";function n(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function o(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}s.r(t);var i,c=s("hosL"),r=(s("Utv1"),s("/eY4")),a=s("OhSV"),l=s("07/T"),m=s("ZOvn");const h=m.a.marginTop(!1),d=m.a.marginBottom(),b={isLoading:!1};let p=Object(r.a)(i=class extends c.Component{constructor(e){super(e),this.state=function(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?n(Object(s),!0).forEach((function(t){o(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):n(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}({},b)}async loadNews(e=this.props){this.setState({isLoading:!0});const{newsStore:t,userStore:s}=e.stores,{isAdmin:n}=s,o={tag:e.tag};n&&(o.showall=1,delete o.tag),await t.load({query:o}),this.setState({isLoading:!1})}componentDidMount(){this.loadNews()}componentWillReceiveProps(e){this.loadNews(e)}render(){const{tag:e}=this.props,{newsStore:t,userStore:s}=this.props.stores,{newsList:n}=t,{isAdmin:o}=s;return Object(c.h)("div",{class:"container-fluid",style:`margin-bottom: ${d}; margin-top: ${h};`},Object(c.h)("div",{class:"row"},Object(c.h)("div",{class:"col-12"},Object(c.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 px-0"},Object(c.h)("h5",null,"news"===e?Object(c.h)(a.c,{id:"news.heading"},"Siste nytt"):Object(c.h)(a.c,{id:"news.heading-howo"},"Hvordan gjÃ¸r man det?"))),o&&Object(c.h)("a",{class:"btn btn-sm btn-success float-right ml-2",href:"/news/edit/new"},Object(c.h)("i",{class:"fas fa-plus"})," ",Object(c.h)(a.c,{id:"news.create"},"Ny")),n&&n.map(e=>Object(c.h)(l.a,{stores:this.props.stores,news:e})))))}})||i;t.default=p},ETxl:function(e){e.exports={hoverelementonly:"hoverelementonly__1mJGJ",hoverElement:"hoverElement__axh3O",hoverelementhide:"hoverelementhide__1k_qH","progress-bar-vertical":"progress-bar-vertical__1B2sC","progress-bar":"progress-bar__pnsVj",dragged:"dragged__QXO46",over:"over__1re3x",list:"list__q_emZ"}},PWmE:function(e,t,s){"use strict";var n,o=s("hosL"),i=s("Utv1"),c=s("/eY4"),r=s("OhSV"),a=s("go65");s("ETxl"),s("ZOvn");let l=Object(c.a)(n=class extends o.Component{constructor(...e){var t;super(...e),t=this,this.commentNews=async function(){const{callback:e=(()=>{})}=t.props,{news:s}=t.props,{newsStore:n}=t.props.stores,{comment:o=""}=t.state,i=await n.commentNews({id:s.id,comment:o});i&&200===i.status&&(t.setState({comment:""}),e({news:s,response:i}))}}render(){const{inputRef:e}=this.props,{comment:t}=this.state,{userStore:s}=this.props.stores,{user:n={}}=s,c=n.firstname?`${i.a.ucfirst(n.firstname,!0)}${i.a.ucfirst(n.lastname,!0)}`:""+i.a.ucfirst(n.email||"",!0),l=n.image||(n.images?n.images[0]:void 0);return Object(o.h)("div",{class:"col-12 col-sm-8 col-lg-6 offset-sm-2 offset-lg-3 d-flex mb-3 position-relative"},Object(o.h)("div",{class:"d-flex mb-0 position-relative w-100"},Object(o.h)("div",{class:"text-center border rounded-circle imageRounded imageRoundedSmall",style:(l?`background-image: url('${l.s3SmallLink}'); background-size: cover;`:"")+" border-width: 3px !important;"},!l&&Object(o.h)("span",{class:"font-weight-lighter",style:"font-size: 15px;"},c)),Object(o.h)("div",{class:"col pl-3",style:"line-height: 1.2em;"},Object(o.h)("div",{class:"d-flex bd-highlight"},Object(o.h)("div",{class:"p-0 w-100 bd-highlight"},Object(o.h)("label",{class:"sr-only",for:"inlineFormInput"},Object(o.h)(r.c,{id:"comments.comment"},"Kommentar")),Object(o.h)("div",{class:"border rounded rounded-lg position-relative"},Object(o.h)(r.b,null,Object(o.h)("input",{class:"form-control-plaintext px-2",type:"text",placeholder:Object(o.h)(r.c,{id:"comments.write-comment"},"Skriv en kommentar..."),onInput:Object(a.a)(this,"comment"),value:t,ref:e})))),Object(o.h)("div",{class:"p-0 pl-2 flex-shrink-1 bd-highlight"},Object(o.h)("button",{type:"button",class:"btn btn-primary mb-2",onClick:this.commentNews},Object(o.h)("i",{class:"fas fa-paper-plane"})))))))}})||n;t.a=l}}]);
//# sourceMappingURL=route-news.chunk.924b1.esm.js.map