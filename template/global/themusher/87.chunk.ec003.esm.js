(window.webpackJsonp=window.webpackJsonp||[]).push([[87],{"3CQZ":function(t,e,s){"use strict";s.r(e),function(t){function o(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,o)}return s}function a(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?o(Object(s),!0).forEach((function(e){l(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):o(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}function l(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}function i(t,e){const s=void 0!==t.musher;return(void 0!==e.musher)-s||!0===s&&t.musher.bib-e.musher.bib||0}var n,c,r,h=s("hosL"),d=s("Utv1"),b=s("/eY4"),u=s("OhSV"),p=s("fh8t"),m=s.n(p),g=s("ZOvn"),f=s("ZQlJ"),O=s("q/oJ"),j=s("gWxU"),w=s("Nanz");s("5OWT");const x=g.a.marginTop(!0),y=g.a.marginBottom(),v={isLoading:!1,contentIsNotLoaded:!0,reloadInSec:null,reloadLastEpoch:null,reloadIsActive:!1};Object(b.a)(n=class extends h.Component{constructor(t){super(t),this.initComponent=()=>{const t=Math.floor((new Date).getTime()/1e3);this.setState({reloadIsActive:!0,reloadLastEpoch:t},()=>this.tickReloadTimeer())},this.state=a({},v),this.updateTimer={}}tickReloadTimeer(){const{reloadIsActive:t,reloadLastEpoch:e}=this.state;if(t){const t=Math.floor((new Date).getTime()/1e3);this.setState({reloadInSec:60-(t-e)}),clearTimeout(this.updateTimer.tick),this.updateTimer.tick=setTimeout(()=>this.tickReloadTimeer(),1e3)}return!1}componentDidMount(){this.initComponent()}componentWillUnmount(){clearTimeout(this.updateTimer.tick)}render(){const{reloadInSec:e}=this.state,s=Math.floor(d.a.normalizeBetween(e,0,60,0,100));return Object(h.h)(t,null,Object(h.h)("div",{class:"progress fixed-top",style:"height: 2px; z-index: 999999;"},Object(h.h)("div",{class:"progress-bar",role:"progressbar",style:`width: ${s}%;`,"aria-valuenow":s,"aria-valuemin":"0","aria-valuemax":"100"})))}});let k=Object(b.a)(c=class extends h.Component{constructor(t){super(t),this.toggleAdminInfo=t=>{t.stopPropagation();const{showAdminInfo:e}=this.state;this.setState({showAdminInfo:!e})},this.toggleInfo=t=>{t.stopPropagation();const{showInfo:e}=this.state;this.setState({showInfo:!e})},this.state={}}render(){const{showAdminInfo:e,showInfo:s}=this.state,{classid:o,bib:a,email:l,onTeamClick:i,onDogClick:n}=this.props,{raceStore:c,userStore:r}=this.props.stores,{isAdmin:b}=r,p=a?c.getMusherByBibId(a):c.getMusherByBibEmail(l),O=c.getTeamById(p.team),j=O.members?O.members.find(t=>t.email===p.email):{},w=c.getClassById(o),x=c.getTotalsByTeamId(p.team),y=g.a.getImage({user:j,team:O,priority:"user"}),v=g.a.displayNameShort(j)||g.a.displayNameShort(p),k=g.a.getRankingColor(p.bib);return Object(h.h)(t,null,Object(h.h)("div",{class:"d-flex position-relative"},Object(h.h)("div",{class:"position-relative text-center border rounded-circle imageRounded imageRoundedMedium",style:y?`background-image: url("${y}"); background-size: cover;`:""},!y&&Object(h.h)("div",{class:"text-muted",style:"font-size: 25px; padding-top: 5px;"},v),Object(h.h)("div",{class:`rounded-pill-both px-2 text-center position-absolute ${k?"":"bg-secondary"} font-weight-bold`,style:"bottom: -20px; right: 0; "+(k?`background-color: ${k};`:"")},p.bib&&"n/a"!==p.bib&&Object(h.h)(t,null,p.bib))),Object(h.h)("div",{class:"flex-grow-1 pl-3 text-overflow mb-3",style:"line-height: 1.2em;"},Object(h.h)("h6",{class:"font-weight-light mb-0"},w.title),Object(h.h)("h3",{class:"mb-0"},p.flag," ",p.firstname," ",p.lastname),Object(h.h)("h6",{class:"mb-0"},p.sportsClub))),O.public>0&&Object(h.h)(t,null,s?Object(h.h)(t,null,Object(h.h)("button",{class:"btn btn-link float-right",onClick:this.toggleInfo},Object(h.h)("i",{class:"fas fa-angle-up"})," ",Object(h.h)(u.c,{id:"races.hide-info"},"Hide info"))):Object(h.h)(t,null,Object(h.h)("button",{class:"btn btn-link float-right",onClick:this.toggleInfo},Object(h.h)("i",{class:"fas fa-angle-down"})," ",Object(h.h)(u.c,{id:"races.show-info"},"Show info"))),Object(h.h)("h3",null,O.public?Object(h.h)(t,null,Object(h.h)("a",{href:"/teams/public/"+O.uuidv4,onClick:t=>i(t,O.uuidv4)},O.name)):Object(h.h)(t,null,O.name)),s&&Object(h.h)(t,null,Object(h.h)(m.a,{markdown:g.a.replaceImages(O.description,O.images),markdownOpts:g.a.getMarkdownOptions()})),O.dogs&&Object(h.h)("div",{class:"w-100 container-fluid"},Object(h.h)("div",{class:"row pt-2"},Object(h.h)(f.a,{stores:this.props.stores,dogs:O.dogs.map(t=>t.id),allDogs:O.dogs,onDogClick:n})))),x&&x.distanceKm&&Object(h.h)(t,null,Object(h.h)("div",{class:"table-responsive-lg"},Object(h.h)("table",{class:"table table-borderless"},Object(h.h)("tbody",null,Object(h.h)("tr",null,Object(h.h)("td",{style:"width: 5%;"},Object(h.h)("i",{class:"fas fa-dog"})),Object(h.h)("td",{style:"width: 60%"},Object(h.h)(u.c,{id:"races.dogs"},"Dogs")),Object(h.h)("td",{style:"width: 5%;"}," "),Object(h.h)("td",{class:"text-right",style:"width: 30%;"},O.dogs.length)),Object(h.h)("tr",null,Object(h.h)("td",null,Object(h.h)("i",{class:"fas fa-road"})),Object(h.h)("td",null,Object(h.h)(u.c,{id:"races.distance"},"Distance")),Object(h.h)("td",null," "),Object(h.h)("td",{class:"text-right"},Object(h.h)("nobr",null,x.distanceKm?d.a.format(x.distanceKm,1)+" km":"n/a"))),Object(h.h)("tr",null,Object(h.h)("td",null,Object(h.h)("i",{class:"fas fa-mountain"})),Object(h.h)("td",null,Object(h.h)(u.c,{id:"races.ascend"},"Ascending")),Object(h.h)("td",null," "),Object(h.h)("td",{class:"text-right"},Object(h.h)("nobr",null,x.elevation?d.a.format(x.elevation,0)+" m":"n/a"))),Object(h.h)("tr",null,Object(h.h)("td",null,Object(h.h)("i",{class:"fas fa-stopwatch"})),Object(h.h)("td",null,Object(h.h)(u.c,{id:"races.race-time"},"Racetime")),Object(h.h)("td",null,Object(h.h)("i",{class:"fas fa-clock"})),Object(h.h)("td",{class:"text-right"},Object(h.h)("nobr",null,d.a.secToHms(x.duration)||"n/a"))),Object(h.h)("tr",null,Object(h.h)("td",null,Object(h.h)("i",{class:"fas fa-bed"})),Object(h.h)("td",null,Object(h.h)(u.c,{id:"races.rest-time"},"Rest")),Object(h.h)("td",null,Object(h.h)("i",{class:"fas fa-clock"})),Object(h.h)("td",{class:"text-right"},Object(h.h)("nobr",null,d.a.secToHms(x.rest)||"n/a"))))))),b&&Object(h.h)("div",{style:"max-height: 200px; max-width: 70vw; overflow: auto;"},Object(h.h)("button",{class:"btn btn-link btn-block",onClick:this.toggleAdminInfo},"Toggle admin info"),e&&Object(h.h)(t,null,Object(h.h)("small",null,Object(h.h)("xmp",null,JSON.stringify(p,null,4),JSON.stringify(j,null,4),JSON.stringify(O,null,4),JSON.stringify(x,null,4))))))}})||c,T=Object(b.a)(r=class extends h.Component{constructor(t){var e;super(t),e=this,this.loadLiveRaceResults=async function(t=e.props,s,o){const{raceStore:a}=t.stores,{race:l}=a;await a.getRaceTrackerData(l.raceTrackerRace),a.getRaceTrackerActiveTeams(s,o)},this.loadRaceResults=async function(t=e.props,s,o){const{raceStore:a}=t.stores,{raceid:l}=t;await a.loadWorkoutSummary(s,l),a.getWorkoutSummaryActiveTeams(s,o)},this.loadRace=async function(t=e.props){e.setState({isLoading:!0});const{raceStore:s,appState:o}=t.stores,{raceid:a,classid:l}=t;await s.load(a);const{race:i}=s,{focusOnMushers:n}=o,{selectedClassIds:c=[]}=o,r=l||c[0];l&&o.toggleSelectedClassId(l,!0);const h=i.classes.filter(t=>t.id===r).filter(t=>t.contestants&&t.contestants.length>0).map(t=>t.contestants.filter(t=>t.team>0).map(t=>t.team)).flat();h.length>0&&await s.loadTeams(h.join(",")),i.liveRace>0?await e.loadLiveRaceResults(e.props,h,n):await e.loadRaceResults(e.props,h,n),s.getAllClassesSortedBy();const d=s.getClassById(r);d&&d.raceTrackerResults&&s.getRacetrackerResults(d.raceTrackerResults),clearTimeout(e.updateTimer.reload),e.updateTimer.reload=setTimeout((async function(){const s=Math.floor((new Date).getTime()/1e3);e.setState({reloadLastEpoch:s}),e.loadRace(t)}),6e4),e.setState({isLoading:!1})},this.toggleFocusOnMusher=t=>{const e=t.target.parentElement.dataset.musherid||t.target.dataset.musherid,{appState:s,raceStore:o}=this.props.stores;s.toggleFocusOnMusher(e);const{focusOnMushers:a}=s,{race:l}=o;l.liveRace>0?o.getRaceTrackerActiveTeams(null,a):o.getWorkoutSummaryActiveTeams(null,a)},this.handleMusherClick=t=>{const{bib:e}=t.target.closest("tr").dataset,{showModal:s}=this.state;this.setState({showModal:!s,modalBib:e})},this.toggleModal=()=>{const{showModal:t}=this.state;this.setState({showModal:!t})},this.state=a({},v),this.inputRef={},this.updateTimer={}}componentWillUnmount(){clearTimeout(this.updateTimer.reload),clearTimeout(this.updateTimer.tick)}componentDidMount(){this.loadRace()}componentWillReceiveProps(t){this.props.classid!==t.classid&&this.loadRace(t)}render(){const{showTeam:e,showDog:s,showModal:o,modalBib:a,modalEmail:l}=this.state,{userStore:n,raceStore:c,appState:r}=this.props.stores,{classid:b,position:u="right",limit:p=100}=this.props,{user:m={},teams:f=[]}=n,{language:v="en"}=m,{selectedClassIds:T=[],focusOnMushers:S=[]}=r,{race:C={},classes:I=[]}=c,{raceTrackerResults:R}=c,M=new Date(C.endDate);M.setHours(M.getHours()+2);const B=C.classes&&C.classes.find(t=>t.id===b)||{},D=a?c.getMusherByBibId(a):c.getMusherByBibEmail(l),z=c.getTeamById(D.team);let P=[];return R&&R.data?P=R.data.map(t=>{const e=c.raceTrackerMapLine(t),s=parseInt(e.Bib,10);let o={};return I&&I[B.id].contestants&&(o=I[B.id].contestants.find(t=>t.musher.bib===s)||{}),o}):I[B.id]&&I[B.id].contestants&&(P=I[B.id].contestants.sort(i).slice(0,p).map(t=>t)),Object(h.h)(t,null,e&&Object(h.h)(O.a,null,Object(h.h)(j.default,{stores:this.props.stores,teamid:e,marginTop:"0px;",marginBottom:"0px;",back:this.hideTeam,hideTeam:this.hideTeam})),s&&Object(h.h)(O.a,null,Object(h.h)(w.default,{stores:this.props.stores,dogid:s,marginTop:"0px;",marginBottom:"0px;",back:this.hideDog,dogs:z.dogs})),Object(h.h)("div",{class:"container-fluid",style:`margin-bottom: ${y}; height: calc(100% - ${y} - ${x});`},Object(h.h)("div",{class:"row"},Object(h.h)("div",{class:"col-12 px-0 position-relative",style:"font-size: 1.5em; line-height: 1.0em;"},Object(h.h)("div",{class:"w-100 overflow-hidden"},Object(h.h)("div",{class:"d-flex flex-row flex-nowrap pb-2 px-1",style:"overflow: auto; scroll-snap-type: x mandatory;"},C.classes&&C.classes.sort((t,e)=>t.distance-e.distance).map((e,s)=>Object(h.h)(t,null,Object(h.h)("div",{class:"col px-0 pt-2"},Object(h.h)("a",{type:"button",class:`btn btn-block ${0===s&&"rounded-pill-left"} ${s===C.classes.length-1&&"rounded-pill-right"} rounded-none ${e.id===b?"btn-primary":"btn-outline-primary"} text-nowrap`,style:"text-overflow: ellipsis; overflow: hidden;","data-id":e.id,href:`/embed/top10/${C.id}/${e.id}`},e.title)))))),Object(h.h)("table",{class:"table table-sm table-borderless rounded-lg mb-0"},Object(h.h)("thead",null,Object(h.h)("tr",null,Object(h.h)("td",{colspan:"2",class:"px-4 py-4 overflow-hidden",style:"background-color: #FB4114; color: #ffffff; border-radius: 10px 0 0 0; font-size: 1.4em;"},Object(h.h)("nobr",null,B.title)),Object(h.h)("td",{class:"px-3 text-center py-4 overflow-hidden",style:"background-color: #FB4114; color: #ffffff; border-radius: 0 10px 0 0 ; font-size: 1.1em;"},"Time"))),Object(h.h)("tbody",{style:' background-color: #1C1F4C; background-image: url("https://themusher.app/assets/tv-single-background.jpg"); background-size: cover !important; background-position: 0 0; '},P&&P.map((e,s)=>{const{musher:o={},currentTeam:a={},currentResults:l={},normalizedDuration:i,isDone:n,totalWorkoutTimeUsedSec:r}=e;c.getTotalsByTeamId(a.id);return Object(h.h)(t,null,Object(h.h)("tr",{style:"border-bottom: 1px solid #7B312F;","data-bib":o.bib,onClick:this.handleMusherClick},Object(h.h)("td",{class:"text-center align-middle ml-0 pl-0",style:"width: 50px; color: #ffffff; font-size: 1.2em; line-height: 1.2em;"},Object(h.h)("div",{class:"d-flex justify-content-start"},Object(h.h)("div",{class:"pl-3 pr-2 w-100 clearfix rounded-pill-right",style:"background-color: "+g.a.getRankingColor(s+1)},o.bib||s+1))),Object(h.h)("td",{class:"px-3 py-3",style:"color: #ffffff; font-size: 1.2em;"},Object(h.h)("div",{class:"text-overflow",style:"line-height: 1.1em;"},Object(h.h)("span",{class:"float-right",onClick:this.toggleFocusOnMusher,"data-musherid":o.id},S.indexOf(o.id)>-1?Object(h.h)("i",{class:"fas fa-star text-warning"}):Object(h.h)("i",{class:"far fa-star"})),Object(h.h)("nobr",null,o.flag," ",o.firstname," ",o.lastname,Object(h.h)("br",null)))),Object(h.h)("td",{class:"text-center align-middle",style:"width: 150px; color: #ffffff; font-size: 1.2em;"},C.nonstop?Object(h.h)(t,null,Object(h.h)("nobr",null,d.a.secToHms(r)||"n/a")):Object(h.h)(t,null,1===n?Object(h.h)(t,null,Object(h.h)("nobr",null,d.a.secToHms(i)||"n/a")):Object(h.h)(t,null,Object(h.h)("nobr",null,d.a.secToHms(l.duration-l.rest)||"n/a"))))))})),Object(h.h)("tfoot",null,Object(h.h)("tr",null,Object(h.h)("td",{colspan:"3",class:"px-5 py-4 text-center overflow-hidden",style:"background-color: #FB4114; color: #ffffff; border-radius: 0 0 10px 10px; font-size: 1.1em;"},Object(h.h)("nobr",{class:"mr-4"},"QPaws app"),Object(h.h)("img",{src:"https://themusher.app/assets/appstore-download.png",height:"40",class:"ml-5 mr-1"}),Object(h.h)("img",{src:"https://themusher.app/assets/playstore-download.png",height:"40",class:"mx-1"})))))),o&&Object(h.h)(t,null,Object(h.h)("div",{class:"position-absolute",style:" top: 0px; left: 0px; z-index: 9999; width: 100%; height: 100%; background-color: rgba(0,0,0,0.6); ",onClick:this.toggleModal},Object(h.h)("div",{class:"position-absolute rounded rounded-lg pt-3 pb-3 px-2 text-white",style:' top: 50%; left: 50%; transform: translate(-50%, -50%); width: 90%; max-width: 800px; max-height: 600px; overflow: auto; background-color: #1C1F4C; background-image: url("https://themusher.app/assets/tv-single-background.jpg"); background-size: cover !important; background-position: 0 0; box-shadow: rgba(0, 0, 0, 0.35) 0px 5px 15px; '},Object(h.h)("button",{class:"btn btn-primary btn-sm float-right position-absolute",style:"top: 5px; right: 5px;"},Object(h.h)("i",{class:"fas fa-times"})),Object(h.h)(k,{stores:this.props.stores,bib:a,classid:b,onTeamClick:this.onTeamClick,onUserClick:this.onUserClick,onDogClick:this.onDogClick})))))))}})||r;e.default=T}.call(this,s("hosL").Fragment)},"5OWT":function(t){t.exports={hoverelementonly:"hoverelementonly__4nHll",hoverElement:"hoverElement__rkj2s",hoverelementhide:"hoverelementhide__10QkM"}},ZQlJ:function(t,e,s){"use strict";var o,a=s("hosL"),l=(s("Utv1"),s("/eY4")),i=(s("OhSV"),s("NDEG"));let n=Object(l.a)(o=class extends a.Component{constructor(t){super(t),this.scrollImages=t=>{const{scrollLeft:e,clientWidth:s}=t.target,o=e/s,a=Math.round(o),l=Math.abs(a-o);(Number.isInteger(o)||l<.1)&&this.setState({imageIdx:a})},this.sortByName=(t,e)=>{const{allDogs:s=[]}=this.props,o=s.find(e=>e.id===t),a=s.find(t=>t.id===e);return o&&a&&o.name>a.name?1:-1},this.state={imageIdx:0}}render(){const{dogs:t,allDogs:e=[],size:s="medium",onDogClick:o=(()=>{})}=this.props;return Object(a.h)("div",{class:"w-100"},Object(a.h)("div",{class:"d-flex flex-row flex-nowrap no-scrollbar",style:"overflow: auto; scroll-snap-type: x mandatory;",onScroll:this.scrollImages},t&&t.sort(this.sortByName).map(l=>{const n=e.find(t=>t.id===l);return n?Object(a.h)("div",{class:"col clearfix position-relative p-0 mx-2"},Object(a.h)("div",{class:"w-100 h-100 text-center rounded-lg imageContainer d-flex justify-content-center align-items-center",style:"\n                                        flex-wrap: wrap;\n                                        overflow-y: hidden;\n                                    ",onTouchstart:t=>{t.stopPropagation()},onTouchend:t=>{t.stopPropagation()},onTouchmove:t=>{t.stopPropagation()}},Object(a.h)(i.a,{stores:this.props.stores,dog:n,dogs:e.filter(e=>t.indexOf(e.id)>-1).sort((t,e)=>t.name>e.name?1:-1),className:"mx-auto",showName:!0,showPosition:!1,size:s,onDogClick:o}))):""})))}})||o;e.a=n}}]);
//# sourceMappingURL=87.chunk.ec003.esm.js.map