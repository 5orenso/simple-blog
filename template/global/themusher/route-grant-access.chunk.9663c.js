(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{qZTL:function(t,e,s){"use strict";s.r(e),function(t){var c,o=s("hosL"),a=s("Utv1"),r=s("/eY4"),n=s("Y3FI"),l=(s("go65"),s("OhSV")),i=s("fh8t"),h=s.n(i),d=s("ZOvn"),u=s("67HY"),f=s("gbHB"),p=s("B+py"),b=s("pJjI"),g=s("s4FZ"),m=Object(r.a)(c=function(e){function s(t){var s;return(s=e.call(this,t)||this).loadApplication=function(){s.props.stores.applicationStore.load(s.state.id)},s.loadTeam=function(){return new Promise((function(t,e){var c;return s.setState({isLoading:!0}),c=s.props.stores,Promise.resolve(c.teamStore.load(c.workoutStore.currentTeam)).then((function(){try{return s.setState({isLoading:!1}),t()}catch(t){return e(t)}}),e)}))},s.changeLanguage=function(t){s.props.stores.appState.setLanguage(t.target.value)},s.grantAccess=function(){return new Promise((function(t,e){function c(){return s.setState({accessGranted:1}),t()}var o,a,r,n,l,i,h,d,u;return r=(o=s.props.stores).teamStore,n=o.workoutStore.currentTeam,l=(a=o.userStore).user,h=(i=s.state).returnUrl,d=i.id,u={grantedDate:new Date,returnUrl:h,team:n,appId:d},a.findApplicationById(d)?c.call(this):Promise.resolve(a.saveField(l.id,"applications",u)).then(function(){try{return Promise.resolve(a.saveField(l.id,"settings.veterinaryAllowed",1)).then(function(){try{return Promise.resolve(r.saveField(n,"public",1)).then(function(){try{return c.call(this)}catch(t){return e(t)}}.bind(this),e)}catch(t){return e(t)}}.bind(this),e)}catch(t){return e(t)}}.bind(this),e)}))},s.denyAccess=function(){Object(n.route)("/")},s.saveInputParams=function(){var t=s.props,e=t.returnUrl,c=t.id;e?(a.a.set("returnUrl",e),a.a.set("id",c)):(e=a.a.get("returnUrl"),c=a.a.get("id")),s.setState({returnUrl:e,id:c})},s.state={returnUrl:"",id:0},s}var c,r;r=e,(c=s).prototype=Object.create(r.prototype),c.prototype.constructor=c,c.__proto__=r;var i=s.prototype;return i.componentWillMount=function(){this.saveInputParams()},i.componentDidMount=function(){this.loadApplication(),this.loadTeam()},i.render=function(){var e=this.props.stores,s=e.appState,c=this.props.subsection,a=this.state,r=a.returnUrl,n=a.accessGranted,i=e.workoutStore.currentTeam,m=e.userStore.user,O=s.language,j=void 0===O?"en":O,v=s.darkmode,w=e.applicationStore.application,k=e.teamStore.team;if(!w)return Object(o.h)("div",{class:"container-fluid"},Object(o.h)("div",{class:"row"},Object(o.h)("div",{class:"col-10 offset-1 col-sm-8 offset-sm-2 col-md-6 offset-md-3 col-lg-4 offset-lg-4 pt-5"},Object(o.h)("div",{class:"d-flex justify-content-center"},v?Object(o.h)(t,null,Object(o.h)("img",{src:"https://themusher.app/assets/logo-qpaws-dark.png",height:"100"})):Object(o.h)(t,null,Object(o.h)("img",{src:"https://themusher.app/assets/logo-qpaws-light.png",height:"100"}))),Object(o.h)("div",{class:"d-flex justify-content-center"},Object(o.h)("h5",{class:"mt-1 mb-3 font-weight-lighter"},Object(o.h)(l.c,{id:"grant-access.title"},"Grant access"))),Object(o.h)("div",{class:"alert alert-danger",role:"alert"},Object(o.h)("h5",null,"Error"),"Application not found!"))));var y=w.title,S=w.body,L=w.images;return Object(o.h)("div",{class:"container-fluid"},Object(o.h)("div",{class:"row"},Object(o.h)("div",{class:"col-10 offset-1 col-sm-8 offset-sm-2 col-md-6 offset-md-3 col-lg-4 offset-lg-4 pt-5"},Object(o.h)("div",{class:"d-flex justify-content-center"},v?Object(o.h)(t,null,Object(o.h)("img",{src:"https://themusher.app/assets/logo-qpaws-dark.png",height:"100"})):Object(o.h)(t,null,Object(o.h)("img",{src:"https://themusher.app/assets/logo-qpaws-light.png",height:"100"}))),Object(o.h)("div",{class:"d-flex justify-content-center"},Object(o.h)("h5",{class:"mt-1 mb-3 font-weight-lighter"},Object(o.h)(l.c,{id:"grant-access.title"},"Grant access"))),Object(o.h)(g.a,{stores:this.props.stores,images:L,minHeight:"50px"}),Object(o.h)("h5",{class:"mt-3"},y),Object(o.h)("p",{class:"mt-3"},Object(o.h)(h.a,{markdown:d.a.replaceImages(S,L,j),markdownOpts:d.a.getMarkdownOptions()})))),Object(o.h)("div",{class:"row"},m.email?Object(o.h)(t,null,n?Object(o.h)(t,null,Object(o.h)("div",{class:"col-10 offset-1 col-sm-8 offset-sm-2 col-md-6 offset-md-3 col-lg-4 offset-lg-4 mt-3 border-top pt-3"},Object(o.h)("div",{class:"display-1 text-success text-center"},Object(o.h)("i",{class:"fas fa-check"})),Object(o.h)("p",null,Object(o.h)(l.c,{id:"grant-access.access-granted"},"Access granted. Now please click the button below to go back to")," ",y,"."),Object(o.h)("a",{class:"btn btn-success btn-block",href:r+"?userId="+m.uuidv4+"&teamId="+k.uuidv4,native:!0},Object(o.h)(l.c,{id:"grant-access.back-to-application"},"Back to"),": ",y," ",Object(o.h)("i",{class:"fas fa-arrow-right"})))):Object(o.h)(t,null,Object(o.h)("div",{class:"col-10 offset-1 col-sm-8 offset-sm-2 col-md-6 offset-md-3 col-lg-4 offset-lg-4 mt-3 border-top pt-3"},Object(o.h)("h5",{class:"font-weight-light"},Object(o.h)(l.c,{id:"grant-access.data-shared"},"Data beeing shared"),":"),Object(o.h)("p",null,Object(o.h)("i",{class:"fas fa-user"}),": ",Object(o.h)(l.c,{id:"grant-access.fields-shared-person"},"Image, Name, email, cellphone, address")),Object(o.h)("p",null,Object(o.h)("i",{class:"fas fa-dog"}),": ",Object(o.h)(l.c,{id:"grant-access.fields-shared-dog"},"Image, Name, chipId, gender, birth, vaccines")),Object(o.h)("p",null,Object(o.h)("i",{class:"fas fa-users"}),": ",Object(o.h)(l.c,{id:"grant-access.fields-shared-team"},"Name, description, images"))),Object(o.h)("div",{class:"col-10 offset-1 col-sm-8 offset-sm-2 col-md-6 offset-md-3 col-lg-4 offset-lg-4 mt-3 border-top pt-3"},Object(o.h)("h5",{class:"font-weight-light"},Object(o.h)(l.c,{id:"grant-access.choose-team"},"Choose team")),Object(o.h)("div",{class:"col-12"},Object(o.h)(b.a,{stores:this.props.stores,callback:this.loadTeam,key:"teams-"+i,showAll:!1}))),i?Object(o.h)(t,null,Object(o.h)("div",{class:"col-10 offset-1 col-sm-8 offset-sm-2 col-md-6 offset-md-3 col-lg-4 offset-lg-4 mt-3"},Object(o.h)("button",{class:"btn btn-primary btn-block",onClick:this.grantAccess},Object(o.h)("i",{class:"fas fa-check"})," ",Object(o.h)(l.c,{id:"grant-access.grant"},"Grant access")),Object(o.h)("button",{class:"mt-4 btn btn-sm btn-link text-muted float-right",onClick:this.denyAccess},Object(o.h)(l.c,{id:"grant-access.deny"},"Deny access")))):Object(o.h)(t,null,Object(o.h)("div",{class:"col-10 offset-1 col-sm-8 offset-sm-2 col-md-6 offset-md-3 col-lg-4 offset-lg-4 mt-3"},Object(o.h)("span",{class:"display-4"},Object(o.h)("i",{class:"fas fa-hand-point-up"})," Choose team"))))):Object(o.h)(t,null,!c&&Object(o.h)(u.a,{stores:this.props.stores,showLogo:!1,routeLoginOk:"/grant-access",routeLoginNew:"/grant-access/newUser",routeLoginForgot:"/grant-access/forgotPassword"}),"newUser"===c&&Object(o.h)(f.a,{stores:this.props.stores,showLogo:!1,routeLogin:"/grant-access",routeLoginForgot:"/grant-access/forgotPassword",skipPubSub:!0}),"forgotPassword"===c&&Object(o.h)(p.a,{stores:this.props.stores,showLogo:!1,routeLogin:"/grant-access",routeLoginNew:"/grant-access/newUser"}))),Object(o.h)("div",{class:"col-10 offset-1 col-sm-8 offset-sm-2 col-md-6 offset-md-3 col-lg-4 offset-lg-4"},Object(o.h)("div",{class:"form-row align-items-center"},Object(o.h)("div",{class:"col-auto my-1 mx-auto",style:"width: 80px;"},Object(o.h)("select",{class:"custom-select",style:"background-color: inherit; border: none;",onInput:this.changeLanguage},Object(o.h)("option",{value:"no",selected:"no"===j},"ðŸ‡³ðŸ‡´ NO"),Object(o.h)("option",{value:"en",selected:"en"===j},"ðŸ‡¬ðŸ‡§ EN"),Object(o.h)("option",{value:"es",selected:"es"===j},"ðŸ‡ªðŸ‡¸ ES"),Object(o.h)("option",{value:"de",selected:"de"===j},"ðŸ‡©ðŸ‡ª DE"),Object(o.h)("option",{value:"fr",selected:"fr"===j},"ðŸ‡«ðŸ‡· FR"),Object(o.h)("option",{value:"ru",selected:"ru"===j},"ðŸ‡·ðŸ‡º RU"),Object(o.h)("option",{value:"se",selected:"se"===j},"ðŸ‡¸ðŸ‡ª SE"))))))},s}(o.Component))||c;e.default=m}.call(this,s("hosL").Fragment)}}]);
//# sourceMappingURL=route-grant-access.chunk.9663c.js.map