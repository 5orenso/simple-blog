{"version":3,"sources":["webpack:///./components/team/publicFeedLine.js","webpack:///./components/team/connect-boxes.js","webpack:///./components/dog/scroller.js","webpack:///./components/ad/index.js","webpack:///./routes/workouts/publicDetail.js","webpack:///./components/team/connect-confirm.js","webpack:///./components/team/fastList.js"],"names":["initialState","showAddComment","likeWorkout","idxSuggestion","idxAd","limit","offset","hasFollowSugguestions","hasAd","sessionid","Date","getTime","TeamPublicFeedLine","observer","Component","constructor","props","super","toggleDate","e","stopPropagation","preventDefault","showDate","this","state","setState","async","workoutId","parseInt","target","closest","dataset","id","workoutStore","stores","setTimeout","response","status","addLikeToFeed","data","addCommentToFeed","type","workout","commentId","replyId","holdingStore","teamStore","addLikeToComment","addLikeToCommentReply","addCommentToWorkoutComment","addCommentToWorkout","storyStore","workoutsAddLikeToComment","workoutsAddLikeToCommentReply","workoutsAddCommentToWorkoutComment","workoutsAddCommentToWorkout","addLikeToWorkout","workoutsAddLikeToWorkout","toggleAddComment","inputRef","focus","toggleMenu","showMenu","toggleAdminDetails","showAdminDetails","showEdit","reportWorkout","adminRemoveWorkout","adminHideWorkout","shareLink","url","title","text","appState","shareUrl","showWorkoutDetail","localName","console","log","route","translate","feed","userStore","user","translatedTextName","object","field","translatedTextComment","comment","showOriginal","displayTeam","teamId","openDrawer","height","openInbox","fromuser","containerRef","render","onTeamClick","onUserClick","onDogClick","isAdmin","language","hasShareApi","publicDogs","team","publicUser","findPublicTeam","findPublicUser","teamPublicDogs","storyPublicDogs","findTeamAmbition","ambition","ambitions","findTeamType","isTeamAdmin","members","some","m","image","mu","getImage","priority","likes","comments","reports","hasLikedWorkout","findIndex","isYourTeam","indexOf","isFollowing","followers","hasRequestedFollow","followRequests","workoutEquipment","findEquipment","equipment","workoutEquipmentIcon","gpxInfo","shortname","name","username","userLink","displayNameShort","displayName","settings","uuidv4","hideProfile","images","mapImage","push","imgs","toJS","currentLocationGeocode","yrWeather","views","getViews","statistics","adminData","getAdminData","translationName","getTranslation","targetLang","feedName","feedComment","class","onClick","data-id","public","buttonOnly","simple","classNames","style","href","date","util","formatDate","locale","hour12","hour","minute","formatDistance","dogs","length","track","sledWeight","value","temperature","format","formattedCounty","moonIllumination","phaseIcon","formatted_address","deviceInfo","map","count","ranking","isNumber","rankingTrend","getClassForTrend","durationAvg","durationAvgTrend","statisticsCurrent","totalInteractions","shadowTags","tag","dblClick","likeRef","allDogs","distanceKm","elevation","duration","secToHms","speedAvg","avgGpsMovingSpeed","markdown","replaceImages","markdownOpts","getMarkdownOptions","data-url","data-title","rel","data-native","c","inputRefObject","col","showAvatar","extraClass","callback","compact","requestSent","Teams","requestFollowTeam","followRequest","getButton","isBlocked","blockedFollowers","unFollowTeam","disabled","data-team","isLoading","loadPublic","query","notfollowing","array","componentDidMount","loadTeams","publicTeamsToFollow","darkmode","isArray","s3SmallLink","place","country","DogScroller","scrollImages","scrollLeft","clientWidth","imageIdx","nearestInt","Math","round","diff","abs","Number","isInteger","sortByName","a","b","dogA","find","dogB","size","onScroll","sort","dogId","dog","onTouchstart","onTouchend","onTouchmove","filter","d","className","showName","showPosition","Ad","withText","subject","body","logClick","adStore","ads","updateTimer","apiServer","getApiServer","section","path","currentTeam","postalcode","findTeam","page","replace","load","setTime","loadAd","componentWillReceiveProps","nextProps","time","match","ad","src","native","s3LargeLink","MARGIN_TOP","marginTop","MARGIN_TOP_BACK","marginTopBack","MARGIN_BOTTOM","marginBottom","dataFields","WorkoutPublicDetail","teamid","showTeam","hideTeam","dogid","showDog","hideDog","renderContent","obj","idx","back","history","goBack","workoutid","loadPublicFeed","componentWillUnmount","loadPublicWorkouit","handleIntersection","publicTeamsFeed","findPublicTeamByUuidv4","wrapperClassNames","contentClassNames","dataValues","confirmed","deleted","confirmRequest","follow","confirmFollowRequest","followRequestUser","deleteRequest","deleteFollowRequest","addData","teams","hasFollowRequests","reqUser","isDeleted","isConfirmed","publicTeam","data-user","data-follow","FastListLine","removeIntersectionObserver","addIntersectionObserver","dataProperties","forEach","encodeURI","ref","data-idx","FastList","deleteIntersectionObserver","intersectionObserver","entries","isIntersecting","currentHeight","max","childNodes","offsetHeight","scrollHeight","display","minHeight","setupIntersectionObserver","window","IntersectionObserverEntry","prototype","IntersectionObserver","root","rootMargin","threshold","observe","unobserve","componentWillMount","isObject","wrapperClasses","hasOwnProperty","contentClasses","key"],"mappings":"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","file":"79.chunk.c8da9.esm.js","sourcesContent":["import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport { toJS } from 'mobx';\nimport { Text, Localizer } from 'preact-i18n';\nimport Markdown from 'preact-markdown';\nimport { route } from 'preact-router';\n\nimport ImageScroller from '../imageScroller';\nimport DogScroller from '../dog/scroller';\nimport WorkoutComments from '../workout/comments';\nimport WorkoutAddComment from '../workout/commentAdd';\n\nimport PublicTeam from '../team/public';\n\nimport LikesAndComments from '../feedback/likesAndComments';\nimport Views from '../feedback/views';\n\nimport Speed from '../data/speed';\nimport Elevation from '../data/elevation';\nimport Weight from '../data/weight';\nimport Distance from '../data/distance';\nimport Temperature from '../data/temperature';\n\nimport mu from '../../lib/musher-util';\n\nfunction displayDistance(distanceKm) {\n\tif (distanceKm < 5) {\n\t\treturn util.format(distanceKm, 2);\n\t}\n\tif (distanceKm < 10) {\n\t\treturn util.format(distanceKm, 1);\n\t}\n\treturn util.format(distanceKm, 1);\n}\n\nconst initialState = {\n\tshowAddComment: {},\n    // viewImageIdx: {},\n    likeWorkout: {},\n    idxSuggestion: 0,\n    idxAd: 4,\n    limit: 15,\n    offset: 0,\n    hasFollowSugguestions: false,\n    hasAd: false,\n    sessionid: new Date().getTime(),\n};\n\n@observer\nclass TeamPublicFeedLine extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            ...initialState,\n        };\n        this.inputRef = {};\n        this.containerRef = null;\n    }\n\n    toggleDate = (e) => {\n        e.stopPropagation();\n        e.preventDefault();\n        const { showDate } = this.state;\n        this.setState({ showDate: !showDate });\n    }\n\n\tlikeWorkout = async (e) => {\n        const workoutId = parseInt(e.target.closest('.imageContainer').dataset.id, 10);\n\t\tconst { workoutStore } = this.props.stores;\n\n        const { likeWorkout } = this.state;\n        likeWorkout[workoutId] = true;\n        this.setState({ likeWorkout });\n        setTimeout(() => {\n            const { likeWorkout } = this.state;\n            delete likeWorkout[workoutId];\n            this.setState({ likeWorkout });\n        }, 1200);\n\n\t\tconst response = await workoutStore.likeWorkout({ id: workoutId });\n        if (response && response.status === 200) {\n            this.addLikeToFeed(workoutId, response.data);\n\t\t}\n\t}\n\n    addCommentToFeed = ({ type, workout, response, commentId, replyId }) => {\n        // console.log('addCommentToFeed', { workout, response, commentId });\n        const { holdingStore = 'team' } = this.props;\n        if (holdingStore === 'team') {\n            const { teamStore } = this.props.stores;\n            switch (type) {\n                case 'likeComment':\n                    teamStore.addLikeToComment({ id: workout.id, data: response.data, commentId });\n                    break;\n                case 'likeReply':\n                    teamStore.addLikeToCommentReply({ id: workout.id, data: response.data, commentId, replyId });\n                    break;\n\n                default:\n                    if (commentId) {\n                        teamStore.addCommentToWorkoutComment({ id: workout.id, data: response.data, commentId });\n                    } else {\n                        teamStore.addCommentToWorkout({ id: workout.id, data: response.data });\n                    }\n                    break;\n            }\n        } else if (holdingStore === 'story') {\n            const { storyStore } = this.props.stores;\n            switch (type) {\n                case 'likeComment':\n                    storyStore.workoutsAddLikeToComment({ id: workout.id, data: response.data, commentId });\n                    break;\n                case 'likeReply':\n                    storyStore.workoutsAddLikeToCommentReply({ id: workout.id, data: response.data, commentId, replyId });\n                    break;\n\n                default:\n                    if (commentId) {\n                        storyStore.workoutsAddCommentToWorkoutComment({ id: workout.id, data: response.data, commentId });\n                    } else {\n                        storyStore.workoutsAddCommentToWorkout({ id: workout.id, data: response.data });\n                    }\n                    break;\n            }\n        }\n    }\n\n    addLikeToFeed = (id, data) => {\n        const { holdingStore = 'team' } = this.props;\n        if (holdingStore === 'team') {\n            const { teamStore } = this.props.stores;\n            teamStore.addLikeToWorkout({ id, data });\n        } else if (holdingStore === 'story') {\n            const { storyStore } = this.props.stores;\n            storyStore.workoutsAddLikeToWorkout({ id, data });\n        }\n    }\n\n\ttoggleAddComment = (e) => {\n\t\tconst workoutId = e.target.closest('button').dataset.id;\n\t\tconst { showAddComment } = this.state;\n        if (showAddComment[workoutId]) {\n            delete showAddComment[workoutId];\n        } else {\n            showAddComment[workoutId] = true;\n        }\n\t\tthis.setState({\n\t\t\tshowAddComment,\n\t\t}, () => {\n\t\t\tif (this.inputRef[workoutId]) {\n\t\t\t\tthis.inputRef[workoutId].focus();\n\t\t\t}\n\t\t});\n\t}\n\n    toggleMenu = (e) => {\n        const { id } = e.target.closest('i').dataset;\n\t\tconst { showMenu = {} } = this.state;\n        showMenu[id] = !showMenu[id];\n\t\tthis.setState({\n\t\t\tshowMenu,\n\t\t});\n\t}\n\n    toggleAdminDetails = () => {\n        const { showAdminDetails } = this.state;\n        this.setState({\n            showAdminDetails: !showAdminDetails,\n        });\n        this.setState({\n            showEdit: {},\n            showMenu: {},\n\t\t});\n    }\n\n    reportWorkout = async (e) => {\n        const { id } = e.target.closest('button').dataset;\n        const { teamStore } = this.props.stores;\n        await teamStore.reportWorkout({ id });\n        this.setState({\n            showEdit: {},\n            showMenu: {},\n\t\t});\n    }\n\n    adminRemoveWorkout = async (e) => {\n        const { id } = e.target.closest('button').dataset;\n        const { teamStore } = this.props.stores;\n        await teamStore.adminHideWorkout({ id });\n        this.setState({\n            showEdit: {},\n            showMenu: {},\n\t\t});\n    }\n\n    shareLink = (e) => {\n        const { url, title, text } = e.target.closest('button').dataset;\n        const { appState } = this.props.stores;\n        appState.shareUrl({ url, title, text });\n    }\n\n    showWorkoutDetail = (e) => {\n        if (e.target.localName === 'a') {\n            return false;\n        }\n        const target = e.target.closest('#workoutDetail');\n        if (target) {\n            const { id } = target.dataset;\n            if (id) {\n            console.log({ target, id });\n                route(`/workouts/public/${id}`);\n            }\n        }\n    }\n\n    translate = async (e) => {\n        e.preventDefault();\n        e.stopPropagation();\n        const { feed = {} } = this.props;\n        const { userStore, teamStore } = this.props.stores;\n        const { user } = userStore;\n        const translatedTextName = await teamStore.translate({ object: feed, user, field: 'name' });\n        let translatedTextComment;\n        if (feed.comment) {\n            translatedTextComment = await teamStore.translate({ object: feed, user, field: 'comment' });\n        }\n        this.setState({ showOriginal: 0, translatedTextName, translatedTextComment });\n    }\n\n    showOriginal = (e) => {\n        e.preventDefault();\n        e.stopPropagation();\n        this.setState({ showOriginal: 1 });\n    }\n\n    displayTeam = (e, teamId) => {\n        e.preventDefault();\n        e.stopPropagation();\n        const { appState } = this.props.stores;\n        appState.openDrawer('publicTeam', { teamId, height: '80vh' });\n\t}\n\n    openInbox = (e, fromuser) => {\n        e.preventDefault();\n        e.stopPropagation();\n        const { appState } = this.props.stores;\n        appState.openDrawer('inboxDetail', { fromuser, height: '80vh' });\n    }\n\n    render() {\n        const {\n            showAddComment,\n            showDate,\n            likeWorkout,\n            showOriginal,\n            translatedTextName,\n            translatedTextComment,\n            showAdminDetails,\n            showMenu = {},\n        } = this.state;\n        const {\n            feed,\n            idx,\n            onTeamClick = () => {},\n            onUserClick = () => {},\n            onDogClick = () => {},\n            holdingStore = 'team',\n        } = this.props;\n        const { teamStore, storyStore, userStore, appState } = this.props.stores;\n        const { user, isAdmin } = userStore;\n        const { language = 'en' } = user;\n        const { darkmode, hasShareApi } = appState;\n        let publicDogs;\n\n        let team = {};\n        let publicUser = {};\n        if (holdingStore === 'team') {\n            team = teamStore.findPublicTeam(feed.team);\n            publicUser = teamStore.findPublicUser(feed.user) || {};\n            const { publicDogs: teamPublicDogs } = teamStore;\n            publicDogs = teamPublicDogs;\n        } else if (holdingStore === 'story') {\n            team = storyStore.findPublicTeam(feed.team);\n            publicUser = storyStore.findPublicUser(feed.user) || {};\n            const { publicDogs: storyPublicDogs } = storyStore;\n            publicDogs = storyPublicDogs;\n        }\n        const teamAmbition = userStore.findTeamAmbition({ ambition: team.ambitions, language });\n        const teamType = userStore.findTeamType({ type: team.type, language });\n\n        const isTeamAdmin = (team && team.members) ? team.members.some(m => m === user.id) : false;\n\n        const image = mu.getImage({ user: publicUser, team, object: feed, priority: 'user' });\n\n        const { likes, comments, reports = [] } = feed;\n        const hasLikedWorkout = feed.likes && feed.likes.findIndex(e => e.user === user.id) > -1;\n        const totalFollowers = team && team.followers ? team.followers.length : 0;\n\n        const isYourTeam = team.members && team.members.indexOf(user.id) > -1;\n        const isFollowing = team && team.followers && team.followers.indexOf(user.id) > -1;\n        const hasRequestedFollow = team.followRequests && team.followRequests.findIndex(e => e.id === user.id) > -1;\n        const workoutEquipment = userStore.findEquipment({ equipment: feed.equipment, language });\n        const workoutEquipmentIcon = userStore.findEquipment({ equipment: feed.equipment, field: 'icon' });\n\t\tconst { gpxInfo = {} } = feed;\n\n\n        let shortname;\n        let name;\n        let username;\n        let userLink;\n        if (publicUser) {\n            shortname = mu.displayNameShort(publicUser);\n            name = mu.displayName(publicUser);\n            username = mu.displayName(publicUser);\n            if (publicUser.settings && publicUser.uuidv4 !== user.uuidv4) {\n                userLink = publicUser.settings.hideProfile ? null : `/inbox/${publicUser.uuidv4}`;\n            }\n        }\n\n        const images = [];\n        if (feed.mapImage) {\n            images.push({\n                ...feed.mapImage,\n                type: 'map',\n            });\n        }\n        if (feed.images) {\n            const imgs = toJS(feed.images);\n            images.push(...imgs);\n        }\n\n        const { currentLocationGeocode = {}, yrWeather = [] } = feed;\n        const views = mu.getViews(feed.statistics);\n        const adminData = mu.getAdminData(feed.statistics);\n\n        if (!team || !team.name) {\n            return '';\n        }\n\n        const translationName = mu.getTranslation({\n            object: feed,\n            targetLang: language,\n            field: 'name',\n        }) || translatedTextName;\n        let feedName = translationName || feed.name;\n        const translationComment = mu.getTranslation({\n            object: feed,\n            targetLang: language,\n            field: 'comment',\n        }) || translatedTextComment;\n        let feedComment = translationComment || feed.comment;\n\n        if (showOriginal) {\n            feedName = feed.name;\n            feedComment = feed.comment;\n        }\n\n        return (<>\n            {(isAdmin || (user.id === feed.user)) ? <>\n                <span class='float-right font-weight-lighter text-muted'>\n                    <i class='fas fa-ellipsis-h' onClick={this.toggleMenu} data-id={feed.uuidv4} />\n                </span>\n            </> : <>\n                {!isYourTeam && !isFollowing && !hasRequestedFollow && team.public > 0 && <span class='float-right'>\n                    <PublicTeam stores={this.props.stores} team={team} buttonOnly={true} simple={true} classNames={'btn btn-link text-primary'} />\n                </span>}\n            </>}\n            {showMenu[feed.uuidv4] && <>\n                <div class='position-absolute bg-light p-2 border rounded rounded-lg shadow-sm' style='top: 30px; right: 10px; width: 60%; z-index: 999999;'>\n                    <button class='btn btn-link btn-block text-left' onClick={this.reportWorkout} data-id={feed.uuidv4}><i class='fas fa-flag' /> Report</button>\n                    {isAdmin && <>\n                        <hr />\n                        <button class='btn btn-link btn-block text-left text-danger' onClick={this.adminRemoveWorkout} data-id={feed.id}>\n                            <i class='fas fa-eraser' /> Remove from feed\n                        </button>\n                    </>}\n                    <button class='btn btn-link btn-block text-left' onClick={this.toggleAdminDetails}>\n                        <i class='fas fa-user-cog' /> Toggle admin details\n                    </button>\n                </div>\n            </>}\n\n            <div class='d-flex position-relative'>\n                <div class='text-center'>\n                    <div\n                        class={`position-relative text-center border rounded-circle imageRounded imageRoundedMedium`}\n                        style={image ? `background-image: url(\"${image}\"); background-size: cover;` : ''}>\n                        {!image && <i class='fas fa-users text-muted mt-2' style='font-size: 20px;' />}\n                    </div>\n                </div>\n                <div class='flex-grow-1 pl-3 text-overflow' style='line-height: 1.2em;'>\n                    {/* <span class='badge badge-pill badge-secondary float-right'>{teamType}</span> */}\n                    <h5 class='mb-1 position-relative' style='line-height: 1.0em;'>\n                        {team.public ? <>\n                            <a href={`/teams/public/${team.uuidv4}`} onClick={(e) => this.displayTeam(e, team.uuidv4)} class='stretched-link'>{team.name}</a>\n                        </> : <>\n                            {team.name}\n                        </>}\n                    </h5>\n                    \n                    <div class='d-flex flex-row flex-nowrap' style='overflow: auto;'>\n                        {feed.date && <small class='text-muted' onClick={this.toggleDate}>\n                            {showDate ? util.formatDate(feed.date, { locale: 'no-NB', hour12: false, hour: '2-digit', minute: '2-digit' }) : util.formatDistance(feed.date, new Date(), { locale: 'no-NB' })}\n                        </small>}\n                        {username && <>\n                            <small class='ml-2 text-muted'>\n                                {userLink ? <>\n                                    <i class='fas fa-user' /> <a href={userLink} onClick={(e) => this.openInbox(e, publicUser.uuidv4)}>{username}</a>\n                                </> : <>\n                                    <i class='fas fa-user' /> {username}\n                                </>}\n                            </small>\n                        </>}\n                        <small class='text-muted'>\n                            {feed.equipment > 0 && <><i class={`${workoutEquipmentIcon} ml-2`} /> {workoutEquipment}</>}\n                            {/* {feed.distanceKm > 0 && <><i class='fas fa-road ml-2' /> {displayDistance(feed.distanceKm)}km</>}\n                            {feed.elevation > 0 && <><i class='fas fa-mountain ml-2' /> {util.format(feed.elevation, 0)}m</>}\n                            {feed.speedAvg > 0 && <><i class='fas fa-tachometer-alt ml-2' /> {util.format(feed.speedAvg, 1)}km/t</>} */}\n                            {feed.dogs > 0 && <><i class='fas fa-dog ml-2' /> {feed.dogs.length}</>}\n                            {feed.track > 0 && <><i class={`fas fa-map-marked text-${feed.track > 0 ? 'success' : 'danger'} ml-2`} /></>}\n                            {/* {feed.dogsLeft > 0 && <><i class={`fas fa-crosshairs text-${feed.dogsLeft && feed.dogsRight ? 'success' : 'danger'} ml-2`} /></>} */}\n                            {feed.sledWeight > 0 && <>\n                                <i class='fas fa-sleigh ml-2' /> <Weight stores={this.props.stores} value={feed.sledWeight} />\n                            </>}\n                            {feed.temperature !== 0 && <>\n                                <i class='fas fa-temperature-low ml-2' /> <Temperature stores={this.props.stores} value={feed.temperature} />\n                            </>}\n                            {feed.dogs && feed.dogs.length > 0 && <>\n                                <i class='fas fa-dog ml-2' /> {util.format(feed.dogs.length, 0)}\n                            </>}\n                            {/* {feed.kcalBurnedTotal && <><i class='fas fa-balance-scale' /> {util.format(feed.kcalBurnedTotal)} kcal</>}\n                            {feed.kcalMeatGramsTotal && <><i class='fas fa-drumstick-bite ml-2' /> {util.format(feed.kcalMeatGramsTotal / 1000, 1)} kg</>}\n                            {feed.kcalSalmonGramsTotal && <><i class='fas fa-fish ml-2' /> {util.format(feed.kcalSalmonGramsTotal / 1000, 1)} kg</>}\n                            {feed.kcalFatGramsTotal && <><i class='fas fa-piggy-bank ml-2' /> {util.format(feed.kcalFatGramsTotal / 1000, 1)} kg</>} */}\n                            {currentLocationGeocode && currentLocationGeocode.formattedCounty && <>\n                                <i class='fas fa-map-marker-alt ml-2' /> {currentLocationGeocode.formattedCounty}\n                            </>}\n                            {feed.moonIllumination && feed.moonIllumination.phaseIcon && <span class='ml-2'>{feed.moonIllumination.phaseIcon}</span>}\n                        </small>\n                    </div>\n\n                    {showAdminDetails && isAdmin && <div\n                        class='d-flex flex-row flex-nowrap bg-light border-top border-bottom py-2'\n                        style='overflow: auto;'\n                    >\n                        <small class='text-muted mr-2'>Adm:</small>\n                        {reports && reports.length > 0 && <>\n                            <small class='text-danger mr-2'>\n                                <i class='fas fa-flag' /> {reports.length}\n                            </small>\n                        </>}\n                        {currentLocationGeocode && currentLocationGeocode.formatted_address && <>\n                            <small class='text-muted'>\n                                <i class='fas fa-map-marker-alt' /> {currentLocationGeocode.formatted_address}\n                            </small>\n                        </>}\n                        {publicUser.deviceInfo && <>\n                            <span class='badge badge-secondary ml-1 float-right font-weight-light'>\n                                {['platform', 'manufacturer', 'model'].map(e => <>\n                                    <span class='ml-1 text-white'>\n                                        {publicUser.deviceInfo[e]}\n                                    </span>\n                                </>)}\n                            </span>\n                        </>}\n                        {adminData && <>\n                            {/* {JSON.stringify(adminData)}<br /> */}\n                            <small class='ml-2 text-muted'>\n                                V: {adminData.count}\n                            </small>\n                            <small class='ml-2 text-muted'>\n                                R: {adminData.ranking} {util.isNumber(adminData.rankingTrend) && <><i class={mu.getClassForTrend(adminData.rankingTrend)} /></>}\n                            </small>\n                            <small class='ml-2 text-muted'>\n                                D: {util.format(adminData.durationAvg / 1000, 1)}s {util.isNumber(adminData.durationAvgTrend) && <><i class={mu.getClassForTrend(adminData.durationAvgTrend)} /></>}\n                            </small>\n                            {feed.statisticsCurrent && feed.statisticsCurrent.totalInteractions > 0 && <small class='ml-2 text-muted'>\n                                S: {util.format(feed.statisticsCurrent.totalInteractions, 0)}\n                            </small>}\n                            {feed.shadowTags && feed.shadowTags.map(tag => <>\n                                <span class='badge badge-secondary ml-2 float-right font-weight-light'>{tag}</span>\n                            </>)}\n                        </>}\n                    </div>}\n                </div>\n            </div>\n\n\n            {/* <div class='row'>\n                <div class='row mb-3'>\n                    {feed.gpxInfo && feed.gpxInfo.svgMap && <>\n                        <div class='col-6 mt-auto text-center overflow-hidden'>\n                            <svg viewBox='0 0 300 300' style='width: 150px; height: 150px;'>\n                                <path d={`${feed.gpxInfo.svgMap}`} style='fill: none; stroke: #0275d8; stroke-width: 5; opacity: 0.5;' />\n                            </svg>\n                            <small class='text-muted'>Track</small>\n                        </div>\n                    </>}\n                    {feed.gpxInfo && feed.gpxInfo.svgElevation && <>\n                        <div class='col-6 mt-auto text-center overflow-hidden'>\n                            <svg viewBox='0 0 300 200' style='width: 150px; height: 100px;'>\n                                <path d={`${feed.gpxInfo.svgElevation}`} style='fill: none; stroke: #5cb85c; stroke-width: 5; opacity: 0.5;' />\n                            </svg>\n                            <small class='text-muted'>Elevation</small>\n                        </div>\n                    </>}\n                </div>\n            </div> */}\n\n            <div class='container-fluid px-0 mt-1'>\n                <div class='row'>\n                    <ImageScroller stores={this.props.stores} images={images} id={feed.id} dblClick={this.likeWorkout} likeRef={likeWorkout} />\n                </div>\n            </div>\n\n            {feed.dogs && feed.dogs.length > 0 && <div class='container-fluid px-0 mt-1'>\n                <div class='row pt-2'>\n                    <DogScroller stores={this.props.stores} dogs={feed.dogs} allDogs={publicDogs} onDogClick={onDogClick} />\n                </div>\n            </div>}\n\n            <div class='d-flex justify-content-between bg-light rounded-lg px-2'>\n                {feed.distanceKm > 0 && <div class='mr-2 text-center'>\n                    <div class='text-overflow text-muted'>\n                        <small><i class='fas fa-road' /> <Text id='workout.calendar.distance'>Distanse</Text></small>\n                    </div>\n                    <div class='text-overflow font-weight-light' style='font-size: 1.2em;'>\n                        <Distance stores={this.props.stores} value={feed.distanceKm} />\n                    </div>\n                </div>}\n                {feed.elevation > 0 && <div class='mr-2 text-center'>\n                    <div class='text-overflow text-muted'>\n                        <small><i class='fas fa-mountain' /> <Text id='workout.calendar.ascend'>Hydemeter</Text></small>\n                    </div>\n                    <div class='text-overflow font-weight-light' style='font-size: 1.2em;'>\n                        <Elevation stores={this.props.stores} value={feed.elevation} />\n                    </div>\n                </div>}\n                {feed.duration > 0 && <div class='mr-2 text-center'>\n                    <div class='text-overflow text-muted'>\n                        <small><i class='fas fa-clock' /> <Text id='workout.calendar.duration'>Varighet</Text></small>\n                    </div>\n                    <div class='text-overflow font-weight-light' style='font-size: 1.2em;'>\n                        {util.secToHms(feed.duration, true)}\n                    </div>\n                </div>}\n                {feed.speedAvg > 0 && <div class='text-center'>\n                    <div class='text-overflow text-muted'>\n                        <small><i class='fas fa-tachometer-alt' /> <Text id='workout.calendar.avg-speed'>Snittfart</Text></small>\n                    </div>\n                    <div class='text-overflow font-weight-light' style='font-size: 1.2em;'>\n                        {gpxInfo && gpxInfo.avgGpsMovingSpeed > 0 ? <>\n                            <Speed stores={this.props.stores} value={gpxInfo.avgGpsMovingSpeed * 3.6} />\n                        </> : <>\n                            <Speed stores={this.props.stores} value={feed.speedAvg} />\n                        </>}\n                    </div>\n                </div>}\n            </div>\n\n            <div class='row mt-2'>\n                <div id='workoutDetail' class='clearfix col-12 font-weight-bold' style='font-size: 1.2em;' onClick={this.showWorkoutDetail} data-id={feed.uuidv4}>\n                    <Markdown markdown={mu.replaceImages(feedName, feed.images, language)} markdownOpts={mu.getMarkdownOptions()} />\n                </div>\n                <div class='clearfix col-12'>\n                    <Markdown markdown={mu.replaceImages(feedComment, feed.images, language)} markdownOpts={mu.getMarkdownOptions()} />\n                </div>\n                {feed.language !== language && <>\n                    {!showOriginal && translationName ? <>\n                        <button type='button' class='btn btn-sm btn-link text-muted' onClick={this.showOriginal}><i class='fas fa-cog' />  <Text id='home.translate-show-original'>Show original</Text></button>\n                    </> : <>\n                        <button type='button' class='btn btn-sm btn-link text-muted' onClick={this.translate}><i class='fas fa-cog' /> <Text id='home.translate-to'>See translation</Text></button>\n                    </>}\n                </>}\n            </div>\n\n            <div class='mt-2'>\n                <LikesAndComments\n                    stores={this.props.stores}\n                    likes={likes}\n                    comments={comments}\n                    type='team'\n                    onTeamClick={onTeamClick}\n                    onUserClick={onUserClick}\n                />\n            </div>\n\n            {!isYourTeam && !isFollowing && !hasRequestedFollow && <div class='clearfix mb-2'>\n                <PublicTeam stores={this.props.stores} team={team} buttonOnly={true} />\n            </div>}\n\n            <div>\n                <div class='row'>\n                    <div class='col text-center'>\n                        <button type='button' class={`imageContainer btn btn-sm btn-outline-${hasLikedWorkout ? 'primary' : 'secondary'} btn-lg btn-block ${hasLikedWorkout ? 'text-primary' : ''} text-overflow`}\n                            data-id={feed.id}\n                            onClick={this.likeWorkout}\n                            // disabled={hasLikedWorkout}\n                        >\n                            <i class={`${hasLikedWorkout ? 'text-primary fas' : 'far'} fa-thumbs-up`} /> <Text id='comments.like'>Lik</Text>\n                        </button>\n                    </div>\n                    <div class='col text-center'>\n                        <button type='button' class='btn btn-sm btn-outline-secondary btn-lg btn-block text-overflow'\n                            data-id={feed.id}\n                            onClick={this.toggleAddComment}\n                        >\n                            <i class='fas fa-comment' /> <Text id='comments.comment-add'>Kommentar</Text>\n                        </button>\n                    </div>\n                    {hasShareApi ? <>\n                        <div class='col text-center'>\n                            <button class='btn btn-sm btn-outline-secondary btn-lg btn-block text-overflow'\n                                onClick={this.shareLink}\n                                data-url={`https://themusher.app/share/workout/${feed.uuidv4}`}\n                                data-title={`title: ${feed.title}`}\n                            >\n                                <i class='fas fa-share' /> <Text id='story.share'>Del</Text>\n                            </button>\n                        </div>\n                    </> : <>\n                        <div class='col text-center'>\n                            <a class='btn btn-sm btn-outline-secondary btn-lg btn-block text-overflow'\n                                href={`https://themusher.app/share/workout/${feed.uuidv4}`}\n                                target='_blank'\n                                rel='noreferrer'\n                                data-native\n                            >\n                                <i class='fas fa-share' /> <Text id='story.share'>Del</Text>\n                            </a>\n                        </div>\n                    </>}\n                </div>\n            </div>\n\n            {views > 0 && <>\n                <div class='mt-2'>\n                    <Views\n                        stores={this.props.stores}\n                        views={views}\n                        object={feed}\n                        type='team'\n                        isTeamAdmin={isTeamAdmin}\n                        isAdmin={isAdmin}\n                        onTeamClick={onTeamClick}\n                        onUserClick={onUserClick}\n                    />\n                </div>\n            </>}\n\n            <div class='mt-2'>\n                {showAddComment[feed.id] && <WorkoutAddComment\n                    stores={this.props.stores}\n                    workout={feed}\n                    inputRef={c => this.inputRef[feed.id] = c}\n                    inputRefObject={this.inputRef}\n                    col='12'\n                    offset='0'\n                    showAvatar={true}\n                    extraClass='px-0'\n                    callback={this.addCommentToFeed}\n                />}\n                <WorkoutComments\n                    stores={this.props.stores}\n                    workout={feed}\n                    col='12'\n                    offset='0'\n                    compact={false}\n                    callback={this.addCommentToFeed}\n                />\n            </div>\n        </>);\n    }\n}\n\nexport default TeamPublicFeedLine;\n","import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport { Text, Localizer } from 'preact-i18n';\n\nimport mu from '../../lib/musher-util';\n\nimport PublicTeam from '../../components/team/public';\n\nconst initialState = {\n\trequestSent: {},\n};\n\n@observer\nclass Teams extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            ...initialState,\n        };\n    }\n\n\tasync loadTeams() {\n\t\tthis.setState({ isLoading: true });\n\t\tconst { teamStore } = this.props.stores;\n\t\tawait teamStore.loadPublic({ query: { notfollowing: 1, array: 1 }, limit: 15 });\n\t\tthis.setState({ isLoading: false });\n\t}\n\n\trequestFollowTeam = (e) => {\n        const { teamStore, userStore } = this.props.stores;\n        const { user } = userStore;\n        const { team } = e.target.closest('button').dataset;\n        teamStore.followRequest(parseInt(team, 10), user);\n\t\tconst { requestSent } = this.state;\n\t\trequestSent[team] = true;\n        this.setState({ requestSent });\n    }\n\n    getButton = (team) => {\n        const { requestSent } = this.state;\n        const { userStore } = this.props.stores;\n        const { user } = userStore;\n        const isYourTeam = team.members && team.members.findIndex(e => e.id === user.id) > -1;\n        const isFollowing = team.followers && team.followers.indexOf(user.id) > -1;\n        const isBlocked = team.blockedFollowers && team.blockedFollowers.indexOf(user.id) > -1;\n        const hasRequestedFollow = requestSent[team.id] || team.followRequests && team.followRequests.findIndex(e => e.id === user.id) > -1;\n\n        if (isYourTeam) {\n            return (\n                <i class='fas fa-home' />\n            );\n        }\n        if (isFollowing) {\n            return (\n                <button\n                    class={`btn btn-sm btn-block btn-outline-secondary float-right`}\n                    onClick={this.unFollowTeam}\n                    disabled='true'\n                    data-team={team.id}\n                >\n                    <i class='fas fa-link mr-2' />\n                    <Text id='teams.connect.is-following'>Flger</Text>\n                </button>\n            );\n        }\n        if (isBlocked) {\n            return (\n                <button\n                    class={`btn btn-sm btn-block btn-outline-secondary float-right`}\n                    disabled='true'\n                >\n                    <i class='fas fa-hand-paper mr-2' />\n                    <Text id='teams.connect.is-blocked'>Blokkert</Text>\n                </button>\n            );\n        }\n        if (hasRequestedFollow) {\n            return (\n                <button\n                    class={`btn btn-sm btn-block btn-outline-secondary float-right`}\n                    disabled='true'\n                >\n                    <i class='fas fa-hourglass-half mr-2' />\n                    <Text id='teams.connect.has-requested'>Venter p godkjenning</Text>\n                </button>\n            );\n        }\n        return (\n            <button\n                class={`btn btn-sm btn-block btn-outline-success float-right`}\n                onClick={this.requestFollowTeam}\n                data-team={team.id}\n            >\n                <i class='far fa-hand-point-right mr-2' />\n                <Text id='teams.connect.follow'>Flg</Text>\n            </button>\n        );\n    }\n\n\tcomponentDidMount() {\n\t\tthis.loadTeams();\n\t}\n\n\trender() {\n\t\tconst { teamStore, appState } = this.props.stores;\n\t\tconst { publicTeamsToFollow } = teamStore;\n        const { darkmode } = appState;\n\t\tif (!publicTeamsToFollow || publicTeamsToFollow.length === 0) {\n\t\t\treturn '';\n\t\t}\n\n\t\treturn (\n\t\t\t<div class='row pb-1 bg-light'>\n                <div class={`col-12 col-sm-8 col-lg-6 offset-sm-2 offset-lg-3 mb-0 position-relative rounded rounded-lg py-3 bg-${darkmode ? 'black' : 'white'} shadow-sm`}>\n\t\t\t\t\t<div class='container-fluid'>\n\t\t\t\t\t\t<div class='row'>\n\t\t\t\t\t\t\t<div class='col-12'>\n\t\t\t\t\t\t\t\t<h5><Text id='teams.connect.teams-to-follow'>Team du kan flge</Text>:</h5>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class='row'>\n\t\t\t\t\t\t\t<div class='d-flex flex-row flex-nowrap' style='overflow: auto;'>\n\t\t\t\t\t\t\t\t{util.isArray(publicTeamsToFollow) && publicTeamsToFollow.map((team) => {\n\t\t\t\t\t\t\t\t\tconst image = team.image && team.image.s3SmallLink ? team.image : null;\n\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t<div class='mr-2' style='width: 110px;'>\n\t\t\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\t\t\tclass={`text-center border rounded-lg`}\n\t\t\t\t\t\t\t\t\t\t\t\tstyle={image ? `background-image: url(\"${image.s3SmallLink}\"); background-size: cover; width: 110px; height: 100px;` : 'width: 110px; height: 100px;'}\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t{!image && <i class='fas fa-users text-muted mt-3' style='font-size: 40px;' />}\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t<small>\n\t\t\t\t\t\t\t\t\t\t\t\t<div class='text-overflow'>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<strong>{team.name}</strong>\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t<div class='text-overflow'>\n\t\t\t\t\t\t\t\t\t\t\t\t\t{team.place ? `${team.place}, ` : ''} {team.country} &nbsp;\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t<div class='text-overflow'>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<small class='text-muted'>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{team && team.dogs && <span class=''><i class='fas fa-dog' /> {team.dogs.length}</span>} \n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{team && team.followers && <span class='ml-2'><i class='fas fa-user' /> {team.followers.length}</span>}\n\t\t\t\t\t\t\t\t\t\t\t\t\t</small>\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t</small>\n\t\t\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\t\t\t{this.getButton(team)}\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nexport default Teams;\n","import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport { Text, Localizer } from 'preact-i18n';\n\nimport DogSimplePublic from './simplePublic';\n\n@observer\nclass DogScroller extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            imageIdx: 0,\n        };\n    }\n\n    scrollImages = (e) => {\n        const { dogs } = this.props;\n\n        const { scrollLeft, scrollWidth, clientWidth } = e.target;\n        const imageStep = clientWidth;\n        const imageIdx = scrollLeft / imageStep;\n        // console.log({ e, imageStep, imageIdx, scrollLeft, scrollWidth, clientWidth });\n\n        const nearestInt = Math.round(imageIdx);\n        const diff = Math.abs(nearestInt - imageIdx);\n        // console.log({ nearestInt, diff });\n        if (Number.isInteger(imageIdx) || diff < 0.1) {\n            this.setState({\n                imageIdx: nearestInt,\n            });\n        }\n    }\n\n    sortByName = (a, b) => {\n        const { allDogs = [] } = this.props;\n        const dogA = allDogs.find(e => e.id === a);\n        const dogB = allDogs.find(e => e.id === b);\n        if (dogA && dogB) {\n            if (dogA.name > dogB.name) {\n                return 1;\n            }\n        }\n        return -1;\n    }\n\n    render() {\n        const { imageIdx } = this.state;\n        const { dogs, allDogs = [], size = 'medium', onDogClick = () => {} } = this.props;\n\n        return (\n            <div class='w-100'>\n                <div\n                    class='d-flex flex-row flex-nowrap no-scrollbar'\n                    style='overflow: auto; scroll-snap-type: x mandatory;'\n                    onScroll={this.scrollImages}\n                >\n                    {dogs && dogs.sort(this.sortByName).map((dogId, idx) => {\n                        const dog = allDogs.find(e => e.id === dogId);\n                        if (!dog) {\n                            return '';\n                        }\n                        return (\n                            <div class='col clearfix position-relative p-0 mx-2'>\n                                <div\n                                    class={`w-100 h-100 text-center rounded-lg imageContainer d-flex justify-content-center align-items-center`}\n                                    style={`\n                                        flex-wrap: wrap;\n                                        overflow-y: hidden;\n                                    `}\n                                    onTouchstart={(e) => { e.stopPropagation(); }}\n                                    onTouchend={(e) => { e.stopPropagation(); }}\n                                    onTouchmove={(e) => { e.stopPropagation(); }}\n                                >\n                                    <DogSimplePublic\n                                        stores={this.props.stores}\n                                        dog={dog}\n                                        dogs={allDogs.filter(d => dogs.indexOf(d.id) > -1).sort((a, b) => a.name > b.name ? 1 : -1)}\n                                        className='mx-auto'\n                                        showName={true}\n                                        showPosition={false}\n                                        size={size}\n                                        onDogClick={onDogClick} \n                                    />\n                                    {/* <xmp>{JSON.stringify(img, null, 4)}</xmp> */}\n                                </div>\n                            </div>\n                        );\n                    })}\n                </div>\n            </div>\n        );\n    }\n}\n\nexport default DogScroller;\n","import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport { Text, Localizer, withText } from 'preact-i18n';\n\nimport mu from '../../lib/musher-util';\n\nconst initialState = {\n\tshowAddComment: false,\n};\n\n@withText(() => ({\n    subject: <Text id='ad.subject'>Annonseforesprsel</Text>,\n    body: <Text id='ad.body'>Hei, Jeg nsker  vite mer om annonsering i appen The Musher.</Text>,\n}))\n\n@observer\nclass Ad extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            ...initialState,\n        };\n        this.updateTimer = {};\n\t\tthis.inputRef = {};\n        this.apiServer = util.getApiServer();\n    }\n\n\tasync loadAd(props = this.props) {\n\t\tthis.setState({ isLoading: true });\n\t\tconst { adStore, workoutStore, userStore, appState } = this.props.stores;\n        const { section } = this.props;\n        const { path: url = '' } = appState;\n        const { currentTeam } = workoutStore;\n        const { user } = userStore;\n        const { language = 'en' } = user;\n        let team = {};\n        let ambitions;\n        let type;\n        let postalcode;\n        let place;\n        let country;\n        if (currentTeam) {\n            team = userStore.findTeam(currentTeam, true);\n            if (team && team.id) {\n                ambitions = userStore.findTeamAmbition({ ambition: team.ambitions, language });\n                type = userStore.findTeamType({ type: team.type, language });\n                postalcode = team.postalcode;\n                place = team.place;\n                country = team.country;\n            }\n        }\n        // console.log({ currentTeam, team, ambitions,  type, postalcode, place, country });\n        // const { url = '' } = this.props;\n        let page = url.replace(/\\d+$/, 'detail');\n        page = url.replace(/\\/\\d+/, '/detail');\n\n        // props: { \"url\": \"/\" }\n        // props: { \"url\": \"/workouts/\" }\n        // props: { \"url\": \"/workouts/4708\" }\n        // props: { \"url\": \"/dogs\" }\n        // props: { \"url\": \"/dogs/10\" }\n\n\t\tawait adStore.load({ query: { page, section }});\n        adStore.setTime();\n\t\tthis.setState({ isLoading: false });\n\t}\n\n    logClick = async () => {\n        const { adStore, userStore } = this.props.stores;\n        const { ads = [] } = adStore;\n        let id = ads.length > 0 ? ads[0].id : null;\n        const { user = {} } = userStore;\n        await adStore.logClick({ id, user: user.id });\n    }\n\n\tcomponentDidMount() {\n\t\tthis.loadAd();\n\t}\n\n    componentWillReceiveProps(nextProps) {\n        // console.log('componentWillReceiveProps', nextProps);\n        if (nextProps.path !== this.props.path) {\n            this.loadAd(nextProps);\n        }\n    }\n\n    render() {\n        const { adStore, userStore, appState } = this.props.stores;\n        const { subject, body, section } = this.props;\n        const { path } = appState;\n        const { user = {} } = userStore;\n        const { ads = [], time, adViews, adClicks } = adStore;\n        if (!user || !user.id || !ads || ads.length === 0) {\n            if (path.match(/\\/(home)/i)) {\n                return <>\n                    <div class='w-100'>\n                        <div class='row'>\n                            <div class='col-12 col-sm-8 col-lg-6 offset-sm-2 offset-lg-3 mb-0 position-relative'>\n                                <div class='border rounded-lg p-4 my-3'>\n                                    <span class='float-right display-4 text-warning'>\n                                        <i class='far fa-smile-wink' />\n                                    </span>\n                                    <h5><Text id='ad.heading'>Vil du annonsere her?</Text></h5>\n                                    <div><Text id='ad.teaser'>Det er super enkelt :)</Text></div>\n                                    <Localizer>\n                                        <a href={`mailto:post@themusher.no?subject=${subject}: ${path}: ${section}&body=${body}`} target='_blank' rel='noreferrer'>\n                                            <i class='fas fa-paper-plane' /> <Text id='ad.linktext'>Ta kontakt med The Musher</Text>\n                                        </a>\n                                    </Localizer>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </>;\n            }\n            return <></>;\n        }\n        const ad = ads[0];\n        return (\n            <>\n                <div class='w-100'>\n                    <div class='row'>\n                        <div class='col-12 col-sm-8 col-lg-6 offset-sm-2 offset-lg-3 mb-0 position-relative'>\n                            <div>\n                                <small><small class='text-muted'>\n                                    <Text id='ad.ad'>Annonse</Text>:\n                                    <img src={`${this.apiServer}/api/ads/${ad.id}/view?user=${user.id}&time=${time}`} style='width: 1; height: 1; opacity: 0.1;' />\n                                </small></small>\n                            </div>\n                            {ad.target ? <>\n                                <a\n                                    class='stretched-link'\n                                    href={`${ad.url}`}\n                                    target={ad.target || '_blank'}\n                                    rel='noopener noreferrer'\n                                    onClick={this.logClick}\n                                    native\n                                >\n                                    {ad.images && ad.images[0] && <>\n                                        <img src={ad.images[0].s3LargeLink} class='img-fluid rounded-lg' />\n                                    </>}\n                                </a>                            \n                            </> : <>\n                                <a\n                                    class='stretched-link'\n                                    href={`${ad.url}`}\n                                    onClick={this.logClick}\n                                >\n                                    {ad.images && ad.images[0] && <>\n                                        <img src={ad.images[0].s3LargeLink} class='img-fluid rounded-lg' />\n                                    </>}\n                                </a>\n                            </>}\n                        </div>\n                    </div>\n                </div>\n            </>\n        );\n    }\n}\n\nexport default Ad;\n","import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport { Text, Localizer } from 'preact-i18n';\n\nimport TeamConnectBoxes from '../../components/team/connect-boxes';\nimport TeamConnectConfirm from '../../components/team/connect-confirm';\n\nimport Ad from '../../components/ad/';\n\nimport FastList from '../../components/team/fastList';\n\nimport Overlay from '../../components/overlay/';\nimport TeamsPublicDetail from '../../routes/teams/publicDetail';\nimport DogPublicDetail from '../../routes/dogs/publicDetail';\n\nimport TeamPublicFeedLine from '../../components/team/publicFeedLine';\n\nimport mu from '../../lib/musher-util';\n\nconst MARGIN_TOP = mu.marginTop(false);\nconst MARGIN_TOP_BACK = mu.marginTopBack(false);\nconst MARGIN_BOTTOM = mu.marginBottom();\n\nconst initialState = {\n\tshowAddComment: {},\n    // viewImageIdx: {},\n    likeWorkout: {},\n    hasFollowSugguestions: false, \n    hasAd: false,\n    sessionid: new Date().getTime(),\n};\n\nconst dataFields = ['id', 'type', 'user', 'team', 'title'];\n\n@observer\nclass WorkoutPublicDetail extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            ...initialState,\n        };\n    }\n\n    async loadPublicWorkouit({ props = this.props }) {\n\t\tconst { teamStore } = props.stores;\n        const { workout: workoutid } = props;\n\t\tawait teamStore.loadPublicFeed({ workoutid });\n\t}\n\n    // Overlay functions\n    onTeamClick = (e, teamid) => {\n        e.preventDefault();\n        e.stopPropagation();\n        this.setState({\n            showTeam: teamid,\n        });\n        return false;\n    }\n\n    hideTeam = () => {\n        this.setState({\n            showTeam: null,\n        });\n    }\n\n    onUserClick = (e, userid) => {\n        e.preventDefault();\n        e.stopPropagation();\n        return false;\n    }\n\n    onDogClick = (e, dogid, dogs) => {\n        e.preventDefault();\n        e.stopPropagation();\n        this.setState({\n            showDog: dogid,\n            dogs,\n        });\n        return false;\n    }\n\n    hideDog = () => {\n        this.setState({\n            showDog: null,\n        });\n    }\n    // /Overlay functions\n\n    componentWillUnmount() {\n        const { teamStore } = this.props.stores;\n        // teamStore.cleanupMemory();\n    }\n\n\tcomponentDidMount() {\n        this.loadPublicWorkouit(this.props);\n\t}\n\n\tcomponentWillReceiveProps(nextProps) {\n        // console.log('componentWillReceiveProps', nextProps.viewmenu, this.props.viewmenu);\n        if (nextProps.workoutid !== this.props.workoutid) {\n            this.loadPublicWorkouit(nextProps);\n        }\n    }\n\n    renderContent = ({ obj, idx }) => {\n        const { appState } = this.props.stores;\n        const { path } = appState;\n\n        if (obj.type === 'ad') {\n            return(<>\n                <Ad stores={this.props.stores} path={path} />\n            </>);\n        }\n        if (obj.type === 'teamConfirm') {\n            return(<>\n                <TeamConnectConfirm stores={this.props.stores} />\n            </>);\n        }\n        if (obj.type === 'teamSuggestions') {\n            return(<>\n                <TeamConnectBoxes stores={this.props.stores} />\n            </>);\n        }\n        return (<>\n            <TeamPublicFeedLine\n                stores={this.props.stores}\n                feed={obj}\n                idx={idx}\n                onTeamClick={this.onTeamClick}\n                onUserClick={this.onUserClick}\n                onDogClick={this.onDogClick}\n            />\n        </>);\n    }\n\n    back = () => {\n        const { history } = this.props.stores;\n        history.goBack();\n    }\n\n    render() {\n        const { showTeam, showDog, handleIntersection, sessionid, dogs } = this.state;\n        const { teamStore, appState } = this.props.stores;\n        const { publicTeamsFeed } = teamStore;\n        const { path, darkmode } = appState;\n        const { teamid } = this.props;\n        const team = teamStore.findPublicTeamByUuidv4(teamid);\n        \n        const image = mu.getImage({ team });\n        let shortname;\n        let name;\n        let username;\n        if (team && team.name) {\n            shortname = mu.displayNameShort(team);\n            name = mu.displayName(team);\n        }\n\n\n        return (<>\n            {showTeam && <Overlay>\n                <TeamsPublicDetail stores={this.props.stores} teamid={showTeam} marginTop={'0px;'} marginBottom={'0px;'} back={this.hideTeam} hideTeam={this.hideTeam} />\n            </Overlay>}\n\n            {showDog && <Overlay>\n                <DogPublicDetail stores={this.props.stores} dogid={showDog} marginTop={'0px;'} marginBottom={'0px;'} back={this.hideDog} dogs={dogs} />\n            </Overlay>}\n\n\t\t\t<div class='container-fluid' style={`margin-bottom: ${MARGIN_BOTTOM}; margin-top: ${MARGIN_TOP};`}>\n                <div class='d-flex justify-content-between mb-2'>\n                    <div>\n\t\t\t\t\t\t<button class='btn btn-link float-left pl-0 fixed-top'\n                            style={`top: ${MARGIN_TOP_BACK}; left: 5px; font-size: 35px; width: 45px;`}\n\t\t\t\t\t\t\tonClick={this.back}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<i class='fas fa-arrow-circle-left' />\n\t\t\t\t\t\t</button>\n                    </div>\n                    <div>\n                        <h5 class='text-muted'>&nbsp;</h5>\n                    </div>\n                </div>\n\n                <div class='w-100'>\n                    {team ? <>\n                        <div class='row pb-3 pt-3'>\n                            <div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 border-bottom'>\n                                <div class='row'>\n                                    <h3>\n                                        <div class='d-flex position-relative'>\n                                            <div\n                                                class={`text-center border rounded-circle imageRounded imageRoundedSmall`}\n                                                style={image ? `background-image: url(\"${image}\"); background-size: cover;` : ''}\n                                            >\n                                                {!image && <div class='text-muted' style='font-size: 20px; padding-top: 3px;'>{shortname}</div>}\n                                            </div>\n                                            <div class='flex-grow-1 pl-3 text-overflow' style='line-height: 1.2em;'>\n                                                <h3 class='mb-1'>\n                                                    {team.public ? <>\n                                                        <a href={`/teams/public/${team.uuidv4}`} class='stretched-link'>{name}</a>\n                                                    </> : <>\n                                                        {name}\n                                                    </>}\n                                                </h3>\n                                            </div>\n                                        </div>\n                                    </h3>\n                                </div>\n                            </div>\n                        </div>\n                    </> : <>\n                        <TeamConnectConfirm stores={this.props.stores} />\n                    </>}\n\n                    {(!publicTeamsFeed || publicTeamsFeed.length === 0) && <>\n                        <div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 px-0'>\n                            <div class='text-center text-muted'>\n                                <div class='display-1'><i class='fas fa-chart-area' /></div>\n                                <h3><Text id='search.no-workouts-found'>No workouts found.</Text></h3>\n                                <Text id='teams.no-public-workouts-text'>Please follow more teams to see their workout activity on this page. This is a great way to get updates from all your favorite mushers.</Text>\n                            </div>\n                            <div class='text-center mt-3'>\n                                <a href='/teams/connect' class='btn btn-primary'>\n                                    <i class='fas fa-users' /> <Text id='header.connect-team'>Follow teams</Text>\n                                </a>\n                            </div>\n                        </div>\n                    </>}\n\n                    <FastList\n                        data={publicTeamsFeed}\n                        wrapperClassNames={'row pb-4'}\n                        contentClassNames={`col-12 col-sm-8 col-lg-6 offset-sm-2 offset-lg-3 my-1 position-relative rounded rounded-lg py-3 bg-${darkmode ? 'black' : 'white'} shadow-sm`}\n                        renderContent={this.renderContent}\n                        dataFields={dataFields}\n                        dataValues={{ type: '10' }}\n                        handleIntersection={handleIntersection}\n                        sessionid={sessionid}\n                    />\n\n                </div>\n            </div>\n        </>);\n    }\n}\n\nexport default WorkoutPublicDetail;\n","import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport { Text, Localizer } from 'preact-i18n';\n\nimport mu from '../../lib/musher-util';\n\nimport PublicTeam from '../../components/team/public';\n\nconst initialState = {\n\tconfirmed: {},\n\tdeleted: {},\n};\n\n@observer\nclass Teams extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            ...initialState,\n        };\n    }\n\n    async loadTeams() {\n        const { teamStore } = this.props.stores;\n        await teamStore.load({ query: {}, addData: ['followRequests'] });\n    }\n\n    confirmRequest = (e) => {\n        const { team, user, follow } = e.target.closest('button').dataset;\n        const { teamStore } = this.props.stores;\n        teamStore.confirmFollowRequest({\n            team: parseInt(team, 10),\n            user: parseInt(user, 10),\n        });\n        const { confirmed } = this.state;\n\t\tconfirmed[`${team}-${user}`] = true;\n        this.setState({ confirmed });\n\n        if (follow) {\n            teamStore.followRequestUser(user);\n        }\n    }\n\n    deleteRequest = (e) => {\n        const { team, user } = e.target.closest('button').dataset;\n        const { teamStore } = this.props.stores;\n        teamStore.deleteFollowRequest({\n            team: parseInt(team, 10),\n            user: parseInt(user, 10),\n        });\n        const { deleted } = this.state;\n\t\tdeleted[`${team}-${user}`] = true;\n        this.setState({ deleted });\n    }\n\n\tcomponentDidMount() {\n\t\tthis.loadTeams();\n\t}\n\n\trender() {\n        const { deleted = {}, confirmed = {} } = this.state;\n\t\tconst { teamStore, appState } = this.props.stores;\n\t\tconst { teams, hasFollowRequests, followRequests = [] } = teamStore;\n        const { darkmode } = appState;\n\t\tif (!hasFollowRequests) {\n\t\t\treturn '';\n\t\t}\n\n\t\treturn (\n            <div class='row pb-1'>\n                <div class={`col-12 col-sm-8 col-lg-6 offset-sm-2 offset-lg-3 mb-0 position-relative rounded rounded-lg py-3 bg-${darkmode ? 'black' : 'white'} shadow-sm`}>\n                    <div class='container-fluid'>\n                        <div class='row'>\n                            <div class='col-12'>\n                                <h5><Text id='teams.connect.teams-follow-requests'>Foresprsel om  flge</Text>:</h5>\n                            </div>\n                        </div>\n\t\t\t\t\t\t<div class='row'>\n                            <div class='d-flex flex-row flex-nowrap' style='overflow: auto;'>\n                                {util.isArray(teams) && teams.map((team) => <>\n                                    {team && util.isArray(team.followRequests) && team.followRequests.map((reqUser) => {\n                                        const image = reqUser.image && reqUser.image.s3SmallLink ? reqUser.image : null;\n                                        const isDeleted = deleted[`${team.id}-${reqUser.id}`];\n                                        const isConfirmed = confirmed[`${team.id}-${reqUser.id}`];\n                                        const publicTeam = followRequests.find(e => e.user.id === reqUser.id);\n                                        return (\n                                            <div class='mr-2 py-2 border rounded-lg' style='width: 150px;'>\n                                                <div class={`text-center border rounded-circle imageRounded imageRoundedSmall mx-auto`} style={image ? `background-image: url(\"${image.s3SmallLink}\");` : ''}>\n                                                    {!image && <div class='text-muted font-weight-lighter' style='font-size: 20px; padding-top: 5px;'>{mu.displayNameShort(reqUser)}</div>}\n                                                </div>\n                                                <small>\n                                                    <div class='text-overflow text-center'>\n                                                        <strong>{mu.displayName(reqUser)}</strong><br />\n                                                        {/* {publicTeam && publicTeam.public > 0 ? <>\n                                                            <a href={`/teams/public/${publicTeam.uuidv4}`}>{publicTeam.name}</a>\n                                                        </> : <>\n                                                            {publicTeam ? <>{publicTeam.name}</> : ''}<br />\n                                                            <span class='text-muted'>(<Text id='teams.not-public'>Not public</Text>)</span>\n                                                        </>} */}\n                                                    </div>\n                                                    <div class='text-overflow text-center'>\n                                                        <Text id='teams.connect.wants-to-follow'>wants to follow your team:</Text>\n                                                    </div>\n                                                    <div class='text-overflow text-center'>\n                                                        <strong>{mu.displayName(team)}</strong>\n                                                    </div>\n                                                </small>\n                                                {(isConfirmed || isDeleted) ? <>\n                                                    <div class='text-center'>\n                                                        {isConfirmed ? <div class='text-success'>\n                                                            <Text id='teams.connect.confirmed'>Confirmed</Text> <i class='fas fa-check' />\n                                                        </div> : <div class='text-danger'>\n                                                            <Text id='teams.connect.deleted'>Deleted</Text> <i class='fas fa-trash-alt' />\n                                                        </div>}\n                                                    </div>\n                                                </> : <>                                    \n                                                    <div>\n                                                        <button class='btn btn-sm btn-block btn-success text-overflow mt-1' onClick={this.confirmRequest} data-team={team.id} data-user={reqUser.id}>\n                                                            <Text id='teams.connect.confirm'>Confirm</Text>\n                                                        </button>\n                                                        {publicTeam && publicTeam.public > 0 && <button class='btn btn-sm btn-block btn-outline-success text-overflow mt-1' onClick={this.confirmRequest} data-team={team.id} data-user={reqUser.id} data-follow={true}>\n                                                            <Text id='teams.connect.confirm-and-follow'>Confirm & follow back</Text>\n                                                        </button>}\n                                                        <div class='mt-3'>\n                                                            <small>\n                                                                <button class='btn btn-sm btn-block btn-link text-overflow' style='font-size: 1.0em;' onClick={this.deleteRequest} data-team={team.id} data-user={reqUser.id}>\n                                                                    <Text id='teams.connect.delete'>Del</Text>\n                                                                </button>\n                                                            </small>\n                                                        </div>\n                                                    </div>\n                                                </>}\n                                            </div>\n                                        );\n                                    })}\n                                </>)}\n                            </div>\n                        </div>\n                        <details class='mt-3'>\n                            <summary><small><Text id='teams.connect.how-summary'>How does this work?</Text></small></summary>\n                            <p>\n                                <Text id='teams.connect.how-text'>What can followers see when I grant them access to follow? The answer is very little. They can see main details of the workouts you share and name of the dogs. That's all. Try to follow a team and check out the workout tab.</Text>\n                            </p>\n                        </details>\n                    </div>\n                </div>\n            </div>\n\t\t);\n\t}\n}\n\nexport default Teams;\n","import { h, Component } from 'preact';\nimport { observer } from 'mobx-preact';\nimport util from 'preact-util';\n\n// TODO: Do we need mobx? What is mobx doing here?  \n\n@observer\nclass FastListLine extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {};\n        this.containerRef = null;\n    }\n\n    componentWillUnmount() {\n        const { removeIntersectionObserver } = this.props;\n        if (removeIntersectionObserver) {\n            removeIntersectionObserver(this.containerRef);\n        }\n    }\n\n    componentDidMount() {\n        const { addIntersectionObserver } = this.props;\n        if (addIntersectionObserver) {\n            addIntersectionObserver(this.containerRef);\n        }\n    }\n\n    render() {\n        const {\n            wrapperClassNames = '',\n            contentClassNames = '',\n            renderContent,\n            obj = {},\n            idx,\n            dataFields,\n            dataValues,\n            sessionid,\n        } = this.props;\n\n        const dataProperties = {};\n        if (sessionid) {\n            dataProperties.sessionid = sessionid;\n        }\n        dataFields.forEach(e => dataProperties[`data-${e}`] = encodeURI(dataValues[e] || obj[e]));\n\n        return (\n            <div\n                class={`${wrapperClassNames}`}\n                ref={c => this.containerRef = c}\n                data-idx={idx}\n                {...dataProperties}\n            >\n                <div\n                    class={`${contentClassNames}`}\n                    style={`display: block;`}\n                >\n                    {renderContent({\n                        obj,\n                        idx,\n                    })}\n                </div>\n            </div>\n        );\n    }\n}\n\n@observer\nclass FastList extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {};\n    }\n\n    // IntersectionObserver\n    deleteIntersectionObserver = () => {\n        this.intersectionObserver = null;\n    }\n\n    handleIntersection = (entries) => {\n        const { handleIntersection } = this.props;\n        if (typeof(handleIntersection) === 'function') {\n            // console.log('handleIntersection');\n            handleIntersection(entries);\n        }\n        // console.log({ entries });\n        // TODO: Make it possible to run defined functions for entries.\n        // mu.intersectionObserverCallback(entries);\n        entries.forEach((e) => {\n            const { isIntersecting } = e;\n            const { height = 0 } = e.target.dataset;\n            // const childHeight = e.target.childNodes[0].getBoundingClientRect().height;\n            // const targetHeight = e.target.getBoundingClientRect().height;\n            const childHeight = e.target.childNodes[0].offsetHeight;\n            const targetHeight = e.target.offsetHeight;\n            const scrollHeight = e.target.scrollHeight;\n            const currentHeight = Math.max(childHeight, targetHeight, scrollHeight);\n            // console.log({ isIntersecting, height, childHeight, targetHeight, scrollHeight, currentHeight }, e.target);\n\n            if (isIntersecting) {\n                e.target.childNodes[0].style.display=`block`;\n                // TODO: Should be set after image is loaded.\n                // const height = e.target.childNodes[0].clientHeight > e.target.clientHeight ? e.target.childNodes[0].clientHeight : e.target.clientHeight;\n                // console.log(e.target);\n                // console.log('e.target.childNodes[0].offsetHeight:', e.target.childNodes[0].offsetHeight);\n                // console.log('e.target.childNodes[0].scrollHeight:', e.target.childNodes[0].scrollHeight);\n                // console.log('e.target.childNodes[0].clientHeight:', e.target.childNodes[0].clientHeight);\n                // console.log('e.target.offsetHeight:', e.target.offsetHeight);\n                // console.log('e.target.scrollHeight:', e.target.scrollHeight);\n                // console.log('e.target.clientHeight:', e.target.clientHeight);\n                // console.log('height:', height);\n                // e.target.style.height=`${height}px`;\n                e.target.style.minHeight = `${currentHeight > height ? currentHeight : height}px`;\n            } else if (e.target.style.minHeight) {\n                // e.target.style.height = `${currentHeight > height ? currentHeight : height}px`;\n                e.target.style.minHeight = `${currentHeight > height ? currentHeight : height}px`;\n                e.target.childNodes[0].style.display=`none`;\n            }\n        });\n    }\n\n    setupIntersectionObserver = () => {\n        if (!('IntersectionObserver' in window) ||\n            !('IntersectionObserverEntry' in window) ||\n            !('intersectionRatio' in window.IntersectionObserverEntry.prototype)) {\n            return false;\n        }\n\n        const options = {\n            root: null,\n            rootMargin: '100px',\n            threshold: 0.1,\n        };\n        this.intersectionObserver = new IntersectionObserver(this.handleIntersection, options);\n    }\n\n    addIntersectionObserver = (ref) => {\n        if (this.intersectionObserver && ref) {\n            this.intersectionObserver.observe(ref);\n        }\n    }\n    removeIntersectionObserver = (ref) => {\n        if (this.intersectionObserver && ref) {\n            this.intersectionObserver.unobserve(ref);\n        }\n    }\n\n    componentWillMount() {\n        this.setupIntersectionObserver();\n    }\n\n    componentWillUnmount() {\n        this.deleteIntersectionObserver();\n    }\n\n    render() {\n        const {\n            data = [],\n            wrapperClassNames = 'row pb-4 bg-light',\n            contentClassNames = `col-12 col-sm-8 col-lg-6 offset-sm-2 offset-lg-3 mb-0 position-relative rounded rounded-lg py-3 shadow-sm`,\n            renderContent = (e) => <>Missing render function!</>,\n            dataFields = [],\n            dataValues = {},\n        } = this.props;\n        \n        return (\n            <div class='w-100'>\n                {data && data.filter(e => util.isObject(e)).map((obj, idx) => {\n                    const wrapperClasses = obj.hasOwnProperty('wrapperClassNames') ? obj.wrapperClassNames : wrapperClassNames;\n                    const contentClasses = obj.hasOwnProperty('contentClassNames') ? obj.contentClassNames : contentClassNames;\n                    return (<>\n                        <FastListLine\n                            key={`fastline-${idx}-${obj.id}`}\n                            obj={obj}\n                            idx={idx}\n                            addIntersectionObserver={this.addIntersectionObserver}\n                            removeIntersectionObserver={this.removeIntersectionObserver}\n                            wrapperClassNames={wrapperClasses}\n                            contentClassNames={contentClasses}\n                            renderContent={renderContent}\n                            dataFields={dataFields}\n                            dataValues={dataValues}\n                        />\n                    </>);\n                })}\n            </div>\n        );\n    };\n}\n\nexport default FastList;\n"],"sourceRoot":""}