(window.webpackJsonp=window.webpackJsonp||[]).push([[53,32],{"+JSK":function(t,e,s){"use strict";(function(t){function a(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,a)}return s}function o(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}var n,i=s("hosL"),r=s("Utv1"),l=s("/eY4"),c=s("OhSV"),d=s("ZOvn"),h={},u=Object(l.a)(n=function(e){function s(t){var s;return(s=e.call(this,t)||this).toggleLikes=function(){s.setState({showLikesList:!s.state.showLikesList})},s.state=function(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?a(Object(s),!0).forEach((function(e){o(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):a(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}({},h),s}var n,l;return l=e,(n=s).prototype=Object.create(l.prototype),n.prototype.constructor=n,n.__proto__=l,s.prototype.render=function(){var e=this.state.showLikesList,s=this.props.stores,a=s.storyStore,o=s.teamStore,n=s.workoutStore,l=s.raceStore,h=this.props,u=h.likes,m=h.comments,b=h.type,p=void 0===b?"story":b,f=h.onTeamClick,g=void 0===f?function(){}:f;return Object(i.h)(t,null,Object(i.h)("div",{class:"d-flex justify-content-between mb-2"},u&&u.length>0&&Object(i.h)(t,null,Object(i.h)("div",{class:"d-flex flex-row flex-nowrap position-relative mr-3",style:"overflow: auto;"},Object(i.h)("span",{class:"text-muted mr-2",onClick:this.toggleLikes},Object(i.h)("i",{class:"fas fa-thumbs-up text-primary"})," ",u.length),u.slice(0,1).map((function(e){var s,c,h;"story"===p?(s=a.findPublicUser(e.user),c=a.findPublicTeamByMembers(e.user)):"team"===p?(s=o.findPublicUser(e.user),c=o.findPublicTeamByMembers(e.user)):"workout"===p?(s=n.findPublicUser(e.user),c=n.findPublicTeamByMembers(e.user)):"race"===p&&(s=l.findPublicUser(e.user),c=l.findPublicTeamByMembers(e.user)),r.a.isArray(c)&&(h=c.find((function(t){return 1===t.public})));d.a.getImage({user:s,team:h,priority:"user"}),d.a.displayNameShort(s);var u=d.a.displayName(s);return Object(i.h)(t,null,Object(i.h)("span",{class:"font-weight-lighter"},h?Object(i.h)(t,null,Object(i.h)("a",{href:"/teams/public/"+h.uuidv4,title:h.name,onClick:function(t){return g(t,h.uuidv4)}},u)):Object(i.h)(t,null,u)))})),u.length>1&&Object(i.h)(t,null,Object(i.h)("span",{class:"text-muted font-weight-lighter ml-2",onClick:this.toggleLikes},Object(i.h)(c.c,{id:"likes-comments.and",fields:{total:u.length-1}},"and ",u.length-1," others."))))),m&&m.length>0&&Object(i.h)("span",{class:"float-right text-muted"},Object(i.h)("i",{class:"fas fa-comment text-primary"})," ",m.length)),e&&Object(i.h)("div",{class:"mt-3 mb-3"},u&&u.map((function(e){var s,c,h;"story"===p?(s=a.findPublicUser(e.user),c=a.findPublicTeamByMembers(e.user)):"team"===p?(s=o.findPublicUser(e.user),c=o.findPublicTeamByMembers(e.user)):"workout"===p?(s=n.findPublicUser(e.user),c=n.findPublicTeamByMembers(e.user)):"race"===p&&(s=l.findPublicUser(e.user),c=l.findPublicTeamByMembers(e.user)),r.a.isArray(c)&&(h=c.find((function(t){return 1===t.public})));var u=d.a.getImage({user:s,team:h,priority:"user"}),m=d.a.displayNameShort(s),b=d.a.displayName(s,!0);return Object(i.h)("div",{class:"d-flex flex-row position-relative font-weight-light mb-1"},h?Object(i.h)(t,null,Object(i.h)("a",{href:"/teams/public/"+h.uuidv4,title:h.name,onClick:function(t){return g(t,h.uuidv4)},class:"stretched-link"},Object(i.h)("div",{class:"text-center border rounded-circle imageRounded imageRoundedThumb",style:u?'background-image: url("'+u+'"); background-size: cover;':""},!u&&Object(i.h)("div",{class:"",style:"font-size: 12px; padding-top: 3px;"},m))),Object(i.h)("div",{class:"ml-2 "},b," ",Object(i.h)("span",{class:"font-weight-lighter"},"- ",h.name))):Object(i.h)(t,null,Object(i.h)("div",{class:"text-center border rounded-circle imageRounded imageRoundedThumb",style:(u?'background-image: url("'+u+'"); background-size: cover;':"")+" opacity: 0.5;"},!u&&Object(i.h)("div",{class:"text-muted",style:"font-size: 12px; padding-top: 3px;"},m)),Object(i.h)("div",{class:"ml-2"},b)))}))))},s}(i.Component))||n;e.a=u}).call(this,s("hosL").Fragment)},"/922":function(t,e,s){"use strict";(function(t){var a,o=s("hosL"),n=s("Utv1"),i=s("/eY4"),r=s("OhSV"),l=s("go65"),c=s("om2D"),d=(s("ETxl"),s("ZOvn")),h=Object(i.a)(a=function(e){function s(t){var s;return(s=e.call(this,t)||this).beforeImagesUploaded=function(){s.setState({sendButtonEnabled:!1})},s.afterImagesUploaded=function(){s.setState({sendButtonEnabled:!0})},s.commentWorkout=function(){return new Promise((function(t,e){var a,o,n,i,r,l,c,h,u,m,b;return s.state.sendButtonEnabled?(n=void 0===(o=(a=s.props).callback)?function(){}:o,r=void 0===(i=a.inputRefObject)?{}:i,l=s.props.workout,c=s.props.stores.workoutStore,u=(h=s.state).comment,m=h.showAddImage,s.setState({sendButtonEnabled:!1}),Promise.resolve(c.commentWorkout({id:l.id,comment:u})).then((function(a){try{return(b=a)&&200===b.status&&(s.setState({comment:{body:"",images:[]}},(function(){d.a.resizeTextarea(r[l.id]),m&&s.addImage()})),n({workout:l,response:b})),s.setState({sendButtonEnabled:!0}),t()}catch(t){return e(t)}}),e)):t(!1)}))},s.addImages=function(t){var e,a=s.state.comment;(e=a.images).push.apply(e,t.value),s.setState({comment:a})},s.addImage=function(){var t=s.state.showAddImage;s.setState({showAddImage:!(void 0!==t&&t)})},s.handleImageErrored=function(t){var e=t.target;e.onerror=null,setTimeout((function(){e.src+="?"+new Date}),1e3)},s.state={comment:{body:"",images:[]},showAddImage:!1,sendButtonEnabled:!0},s.inputRef={},s}var a,i;return i=e,(a=s).prototype=Object.create(i.prototype),a.prototype.constructor=a,a.__proto__=i,s.prototype.render=function(){var e=this,s=this.props,a=s.inputRef,i=s.col,h=void 0===i?12:i,u=s.offset,m=void 0===u?0:u,b=s.showAvatar,p=void 0===b||b,f=s.extraClass,g=void 0===f?"":f,O=s.workout,j=this.state,v=j.comment,y=j.showAddImage,w=j.sendButtonEnabled,k=this.props.stores.userStore.user,x=void 0===k?{}:k,S=x.firstname?""+n.a.ucfirst(x.firstname,!0)+n.a.ucfirst(x.lastname,!0):""+n.a.ucfirst(x.email||"",!0),C=x.image||(x.images?x.images[0]:void 0);return Object(o.h)("div",{class:"col-"+h+" offset-"+m+" "+g},Object(o.h)("div",{class:"d-flex mb-0 position-relative w-100"},p&&Object(o.h)("div",{class:"text-center border rounded-circle imageRounded imageRoundedSmall",style:(C?"background-image: url('"+C.s3SmallLink+"'); background-size: cover;":"")+" border-width: 3px !important;"},!x.image&&Object(o.h)("span",{class:"font-weight-lighter",style:"font-size: 15px;"},S)),Object(o.h)("div",{class:"col pl-3",style:"line-height: 1.2em;"},Object(o.h)("div",{class:"d-flex bd-highlight"},Object(o.h)("div",{class:"p-0 w-100 bd-highlight"},Object(o.h)("label",{class:"sr-only",for:"inlineFormInput"},Object(o.h)(r.c,{id:"comments.comment"},"Kommentar")),Object(o.h)("div",{class:"border rounded rounded-lg position-relative"},Object(o.h)(r.b,null,Object(o.h)("textarea",{class:"form-control-plaintext px-2",type:"text",placeholder:Object(o.h)(r.c,{id:"comments.write-comment"},"Skriv en kommentar..."),onInput:Object(l.a)(this,"comment.body"),onKeyUp:d.a.resizeTextarea,onFocus:d.a.resizeTextarea,style:"height: 2.3em;",value:v.body,ref:a})),Object(o.h)("div",{class:"position-absolute",style:"top: 8px; right: 10px; font-size: 1.2em;"},Object(o.h)("i",{class:"fas fa-image pointerCursor","data-id":O.id,onClick:this.addImage})))),Object(o.h)("div",{class:"p-0 pl-2 flex-shrink-1 bd-highlight"},Object(o.h)("button",{type:"button",class:"btn btn-"+(w?"primary":"secondary")+" mb-2",disabled:!w,onClick:this.commentWorkout},Object(o.h)("i",{class:"fas fa-paper-plane"})))))),y&&Object(o.h)(t,null,Object(o.h)("div",{class:"col-12 text-center"},Object(o.h)("div",{class:"container-fluid"},Object(o.h)("div",{class:"row"},v.images&&v.images.map((function(t){return Object(o.h)("div",{class:"col-3 p-1"},Object(o.h)("img",{src:t.s3SmallLink,class:"img-fluid",onError:e.handleImageErrored}),Object(o.h)("button",{class:"btn btn-sm btn-link",onClick:e.removeImage,"data-name":t.name},Object(o.h)("i",{class:"fas fa-trash"}),"  ",Object(o.h)(r.c,{id:"comments.remove-image"},"Remove")))})))),Object(o.h)(c.a,{object:v,updateField:this.addImages,before:this.beforeImagesUploaded,after:this.afterImagesUploaded,autoOpen:!0}))))},s}(o.Component))||a;e.a=h}).call(this,s("hosL").Fragment)},"1OK2":function(t,e,s){"use strict";var a,o=s("hosL"),n=(s("Utv1"),s("/eY4"));Object(n.a)(a=function(t){function e(e){var s;(s=t.call(this,e)||this).touchStart=function(t){t.stopPropagation(),s.setState({startX:t.touches[0].pageX})},s.touchEnd=function(t){t.stopPropagation(),s.setState({startX:void 0,sliding:!1})},s.touchMove=function(t){if(t.stopPropagation(),s.state.totalImages>1){var e=s.state,a=e.startX,o=t.touches[0].pageX;e.sliding||(o>a+50?(s.setState({sliding:!0}),s.prevImage()):o<a-50&&(s.setState({sliding:!0}),s.nextImage()))}};var a=e.images,o=void 0===a?[]:a;return s.state={imageContainer:1,currentImage1:o[0]||{},currentImage2:{},currentIdx:0,totalImages:o.length||0,imageDots:[].concat(Array(o.length||0).fill(1).map((function(t,e){return t+e})))},s}var s,a;a=t,(s=e).prototype=Object.create(a.prototype),s.prototype.constructor=s,s.__proto__=a;var n=e.prototype;return n.nextImage=function(){var t,e=this.state,s=1===e.imageContainer?2:1,a=e.currentIdx+1;a>e.totalImages-1&&(a=0),this.setState(((t={})["currentImage"+s]=this.props.images[a],t.currentIdx=a,t.imageContainer=s,t))},n.prevImage=function(){var t,e=this.state,s=e.imageContainer,a=e.currentIdx-1;a<0&&(a=e.totalImages-1),this.setState(((t={})["currentImage"+(1===s?2:1)]=this.props.images[a],t.currentIdx=a,t.imageContainer=1===s?2:1,t))},n.componentWillReceiveProps=function(t){if(t.images!==this.props.images){var e=t.images,s=void 0===e?[]:e;this.setState({imageContainer:1,currentImage1:s.length>0?s[0]:{},currentImage2:{},currentIdx:0,totalImages:s.length||0,imageDots:[].concat(Array(s.length||0).fill(1).map((function(t,e){return t+e})))})}},n.render=function(){var t,e,s=this,a=this.state,n=a.currentImage1,i=a.currentImage2,r=a.imageContainer,l=a.totalImages,c=a.imageDots,d=a.currentIdx,h=this["image"+r],u=1===r?n:i;if(u.dimensions){var m=u.dimensions,b=m.width,p=m.height,f=m.orientation;f>4&&f<9?(t=b,e=p):(t=p,e=b)}var g=u.dimensions?e/t:h&&h.height?h.width/h.height:4/3;return l<=0?"":Object(o.h)("div",{class:"w-100"},Object(o.h)("div",{class:"border rounded position-relative w-100",style:"height: calc(85vw / "+g+"); overflow: hidden; transition: all .3s ease-in-out;",onTouchstart:this.touchStart,onTouchend:this.touchEnd,onTouchmove:this.touchMove},l>1&&Object(o.h)("span",{class:"position-absolute",style:"top:0px; right: 5px; z-index: 2000;"},Object(o.h)("small",null,d+1,"/",l)),n&&Object(o.h)("div",{class:"position-absolute",style:(1===r?"opacity: 1;":"opacity: 0;")+" transition: all .3s ease-in-out; top: 0; left: 0;"},Object(o.h)("img",{loading:"lazy",src:n.s3LargeLink,class:"img-fluid align-middle",ref:function(t){return s.image1=t}})),i&&Object(o.h)("div",{class:"position-absolute",style:(2===r?"opacity: 1;":"opacity: 0;")+" transition: all .3s ease-in-out; top: 0; left: 0;"},Object(o.h)("img",{loading:"lazy",src:i.s3LargeLink,class:"img-fluid align-middle",ref:function(t){return s.image2=t}}))),c.length>1&&Object(o.h)("div",{class:"w-100 text-center"},c.map((function(t){return Object(o.h)("span",{style:"color: "+(t===d+1?"#ffffff":"#808080")+";"},"•")}))))},e}(o.Component))},"3wGD":function(t,e,s){"use strict";var a,o=s("hosL"),n=s("Utv1"),i=s("/eY4"),r=s("OhSV"),l=s("go65"),c=(s("ETxl"),s("ZOvn")),d=Object(i.a)(a=function(t){function e(e){var s;return(s=t.call(this,e)||this).commentWorkout=function(){return new Promise((function(t,e){var a,o,n,i,r,l,d,h,u,m,b;return s.state.sendButtonEnabled?(n=void 0===(o=(a=s.props).callback)?function(){}:o,i=a.commentId,l=void 0===(r=a.inputRefObject)?{}:r,d=s.props.workout,h=s.props.stores.workoutStore,m=void 0===(u=s.state.comment)?"":u,s.setState({sendButtonEnabled:!1}),Promise.resolve(h.commentReplyWorkout({id:d.id,commentId:i,comment:m})).then((function(a){try{return(b=a)&&200===b.status&&(s.setState({comment:""},(function(){c.a.resizeTextarea(l[i])})),n({workout:d,response:b,commentId:i})),s.setState({sendButtonEnabled:!0}),t()}catch(t){return e(t)}}),e)):t(!1)}))},s.state={sendButtonEnabled:!0},s.inputRef={},s}var s,a;return a=t,(s=e).prototype=Object.create(a.prototype),s.prototype.constructor=s,s.__proto__=a,e.prototype.render=function(){var t=this.props.inputRef,e=this.state,s=e.comment,a=e.sendButtonEnabled,i=this.props.stores.userStore.user,d=void 0===i?{}:i,h=d.firstname?""+n.a.ucfirst(d.firstname,!0)+n.a.ucfirst(d.lastname,!0):""+n.a.ucfirst(d.email||"",!0),u=d.image||(d.images?d.images[0]:void 0);return Object(o.h)("div",{class:"w-100"},Object(o.h)("div",{class:"d-flex mb-0 position-relative w-100"},Object(o.h)("div",{class:"text-center border rounded-circle imageRounded imageRoundedThumb",style:(u?"background-image: url('"+u.s3SmallLink+"'); background-size: cover;":"")+" border-width: 3px !important;"},!u&&Object(o.h)("span",{class:"font-weight-lighter",style:"font-size: 15px;"},h)),Object(o.h)("div",{class:"col pl-3",style:"line-height: 1.2em;"},Object(o.h)("div",{class:"d-flex bd-highlight"},Object(o.h)("div",{class:"p-0 w-100 bd-highlight"},Object(o.h)("label",{class:"sr-only",for:"inlineFormInput"},Object(o.h)(r.c,{id:"comments.comment"},"Kommentar")),Object(o.h)("div",{class:"border rounded rounded-lg position-relative"},Object(o.h)(r.b,null,Object(o.h)("textarea",{class:"form-control-plaintext px-2",type:"text",placeholder:Object(o.h)(r.c,{id:"comments.write-comment"},"Skriv en kommentar..."),onInput:Object(l.a)(this,"comment"),onKeyUp:c.a.resizeTextarea,style:"height: 2.3em;",value:s,ref:t})))),Object(o.h)("div",{class:"p-0 pl-2 flex-shrink-1 bd-highlight"},Object(o.h)("button",{type:"button",class:"btn btn-"+(a?"primary":"secondary")+" mb-2",disabled:!a,onClick:this.commentWorkout},Object(o.h)("i",{class:"fas fa-paper-plane"})))))))},e}(o.Component))||a;e.a=d},"4QWe":function(t,e,s){"use strict";(function(t){var a,o=s("hosL"),n=s("Utv1"),i=s("/eY4"),r=s("OhSV"),l=s("go65"),c=s("om2D"),d=s("ZOvn"),h=Object(i.a)(a=function(e){function s(t){var s;return(s=e.call(this,t)||this).beforeImagesUploaded=function(){s.setState({sendButtonEnabled:!1})},s.afterImagesUploaded=function(){s.setState({sendButtonEnabled:!0})},s.commentStory=function(){return new Promise((function(t,e){var a,o,n,i,r,l,c,h,u,m,b;return s.state.sendButtonEnabled?(n=void 0===(o=(a=s.props).callback)?function(){}:o,r=void 0===(i=a.inputRefObject)?{}:i,l=s.props.story,c=s.props.stores.storyStore,u=(h=s.state).comment,m=h.showAddImage,s.setState({sendButtonEnabled:!1}),Promise.resolve(c.commentStory({id:l.id,comment:u})).then((function(a){try{return(b=a)&&200===b.status&&(s.setState({comment:{body:"",images:[]}},(function(){d.a.resizeTextarea(r[l.id]),m&&s.addImage()})),n({story:l,response:b})),s.setState({sendButtonEnabled:!0}),t()}catch(t){return e(t)}}),e)):t(!1)}))},s.addImages=function(t){var e,a=s.state.comment;(e=a.images).push.apply(e,t.value),s.setState({comment:a})},s.addImage=function(){var t=s.state.showAddImage;s.setState({showAddImage:!(void 0!==t&&t)})},s.handleImageErrored=function(t){var e=t.target;e.onerror=null,setTimeout((function(){e.src+="?"+new Date}),1e3)},s.state={comment:{body:"",images:[]},showAddImage:!1,sendButtonEnabled:!0},s.inputRef={},s}var a,i;return i=e,(a=s).prototype=Object.create(i.prototype),a.prototype.constructor=a,a.__proto__=i,s.prototype.render=function(){var e=this,s=this.props,a=s.inputRef,i=s.story,h=this.state,u=h.comment,m=h.showAddImage,b=h.sendButtonEnabled,p=this.props.stores.userStore.user,f=void 0===p?{}:p,g=d.a.displayNameShort(f),O=(d.a.displayName(f),f.image||(f.images?f.images[0]:void 0));return Object(o.h)("div",null,Object(o.h)("div",{class:"d-flex mb-0 position-relative w-100"},Object(o.h)("div",{class:"text-center border rounded-circle imageRounded imageRoundedSmall",style:(O?"background-image: url('"+O.s3SmallLink+"'); background-size: cover;":"")+" border-width: 3px !important;"},!f.image&&Object(o.h)("span",{class:"font-weight-lighter",style:"font-size: 15px;"},g)),Object(o.h)("div",{class:"col pl-3",style:"line-height: 1.2em;"},Object(o.h)("div",{class:"d-flex bd-highlight"},Object(o.h)("div",{class:"p-0 w-100 bd-highlight"},Object(o.h)("label",{class:"sr-only",for:"inlineFormInput"},Object(o.h)(r.c,{id:"comments.comment"},"Kommentar")),Object(o.h)("div",{class:"border rounded rounded-lg position-relative"},Object(o.h)(r.b,null,Object(o.h)("textarea",{class:"form-control-plaintext px-2",type:"text",placeholder:Object(o.h)(r.c,{id:"comments.write-comment"},"Skriv en kommentar..."),onInput:Object(l.a)(this,"comment.body"),onKeyUp:d.a.resizeTextarea,onFocus:d.a.resizeTextarea,style:"height: 2.3em;",value:u.body,ref:a})),Object(o.h)("div",{class:"position-absolute",style:"top: 8px; right: 10px; font-size: 1.2em;"},Object(o.h)("i",{class:"fas fa-image pointerCursor","data-id":i.id,onClick:this.addImage})))),Object(o.h)("div",{class:"p-0 pl-2 flex-shrink-1 bd-highlight"},Object(o.h)("button",{type:"button",class:"btn btn-"+(b?"primary":"secondary")+" mb-2",disabled:!b,onClick:this.commentStory},Object(o.h)("i",{class:"fas fa-paper-plane"})))))),m&&Object(o.h)(t,null,Object(o.h)("div",{class:"col-12 text-center"},Object(o.h)("div",{class:"container-fluid"},Object(o.h)("div",{class:"row"},n.a.isArray(u.images)&&u.images.map((function(t){return Object(o.h)("div",{class:"col-3 p-1"},Object(o.h)("img",{src:t.s3SmallLink,class:"img-fluid",onError:e.handleImageErrored}),Object(o.h)("button",{class:"btn btn-sm btn-link",onClick:e.removeImage,"data-name":t.name},Object(o.h)("i",{class:"fas fa-trash"})," ",Object(o.h)(r.c,{id:"comments.remove-image"},"Remove")))})))),Object(o.h)(c.a,{object:u,updateField:this.addImages,before:this.beforeImagesUploaded,after:this.afterImagesUploaded,autoOpen:!0}))))},s}(o.Component))||a;e.a=h}).call(this,s("hosL").Fragment)},"5uob":function(t,e,s){"use strict";var a,o=s("hosL"),n=(s("Utv1"),s("/eY4")),i=s("OhSV"),r=s("go65"),l=(s("ETxl"),s("ZOvn")),c=Object(n.a)(a=function(t){function e(e){var s;return(s=t.call(this,e)||this).commentStory=function(){return new Promise((function(t,e){var a,o,n,i,r,c,d,h,u,m,b;return s.state.sendButtonEnabled?(n=void 0===(o=(a=s.props).callback)?function(){}:o,i=a.commentId,c=void 0===(r=a.inputRefObject)?{}:r,d=s.props.story,h=s.props.stores.storyStore,m=void 0===(u=s.state.comment)?"":u,s.setState({sendButtonEnabled:!1}),Promise.resolve(h.commentReplyStory({id:d.id,commentId:i,comment:m})).then((function(a){try{return(b=a)&&200===b.status&&(s.setState({comment:""},(function(){l.a.resizeTextarea(c[i])})),n({story:d,response:b,commentId:i})),s.setState({sendButtonEnabled:!0}),t()}catch(t){return e(t)}}),e)):t(!1)}))},s.state={sendButtonEnabled:!0},s.inputRef={},s}var s,a;a=t,(s=e).prototype=Object.create(a.prototype),s.prototype.constructor=s,s.__proto__=a;var n=e.prototype;return n.componentDidMount=function(){var t=this.props.initCall;(void 0===t?function(){}:t)()},n.render=function(){var t=this.props.inputRef,e=this.state,s=e.comment,a=e.sendButtonEnabled,n=this.props.stores.userStore.user,c=void 0===n?{}:n,d=l.a.displayNameShort(c),h=(l.a.displayName(c),c.image||(c.images?c.images[0]:void 0));return Object(o.h)("div",{class:"w-100"},Object(o.h)("div",{class:"d-flex mb-0 position-relative w-100"},Object(o.h)("div",{class:"text-center border rounded-circle imageRounded imageRoundedThumb",style:(h?"background-image: url('"+h.s3SmallLink+"'); background-size: cover;":"")+" border-width: 3px !important;"},!h&&Object(o.h)("span",{class:"font-weight-lighter",style:"font-size: 15px;"},d)),Object(o.h)("div",{class:"col pl-3",style:"line-height: 1.2em;"},Object(o.h)("div",{class:"d-flex bd-highlight"},Object(o.h)("div",{class:"p-0 w-100 bd-highlight"},Object(o.h)("label",{class:"sr-only",for:"inlineFormInput"},Object(o.h)(i.c,{id:"comments.comment"},"Kommentar")),Object(o.h)("div",{class:"border rounded rounded-lg position-relative"},Object(o.h)(i.b,null,Object(o.h)("textarea",{class:"form-control-plaintext px-2",type:"text",placeholder:Object(o.h)(i.c,{id:"comments.write-comment"},"Skriv en kommentar..."),onInput:Object(r.a)(this,"comment"),onKeyUp:l.a.resizeTextarea,style:"height: 2.3em;",value:s,ref:t})))),Object(o.h)("div",{class:"p-0 pl-2 flex-shrink-1 bd-highlight"},Object(o.h)("button",{type:"button",class:"btn btn-"+(a?"primary":"secondary")+" mb-2",disabled:!a,onClick:this.commentStory},Object(o.h)("i",{class:"fas fa-paper-plane"})))))))},e}(o.Component))||a;e.a=c},"8Lgr":function(t,e,s){"use strict";(function(t){function a(t){return i.a.format(t,t<5?2:1)}var o,n=s("hosL"),i=s("Utv1"),r=s("/eY4"),l=(s("OhSV"),s("ZOvn"),Object(r.a)(o=function(e){function s(){return e.apply(this,arguments)||this}var o,i;return i=e,(o=s).prototype=Object.create(i.prototype),o.prototype.constructor=o,o.__proto__=i,s.prototype.render=function(){var e=this.props,s=e.value,o=void 0===s?0:s,i=e.smallUnit,r=this.props.stores.userStore.user.settings;return(void 0===r?{}:r).imperial?Object(n.h)(t,null,Object(n.h)("nobr",null,a(function(t){return.621371*t}(o))," ",i?Object(n.h)(t,null,Object(n.h)("small",null,Object(n.h)("small",null,Object(n.h)("small",{class:"ml-0 text-muted"},"mi")))):Object(n.h)(t,null,"mi"))):Object(n.h)(t,null,Object(n.h)("nobr",null,a(o)," ",i?Object(n.h)(t,null,Object(n.h)("small",null,Object(n.h)("small",null,Object(n.h)("small",{class:"ml-0 text-muted"},"km")))):Object(n.h)(t,null,"km")))},s}(n.Component))||o);e.a=l}).call(this,s("hosL").Fragment)},B95u:function(t,e,s){"use strict";(function(t){function a(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,a)}return s}function o(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?a(Object(s),!0).forEach((function(e){n(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):a(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}function n(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}var i,r=s("hosL"),l=s("Utv1"),c=s("/eY4"),d=s("cneo"),h=s("OhSV"),u=s("fh8t"),m=s.n(u),b=s("go65"),p=s("5uob"),f=(s("ETxl"),s("ZOvn")),g={showAddComment:{},showAllComments:!1,showAllReplies:{},viewImageIdx:{},likeComment:{},likeReply:{},showOriginal:{}},O=Object(c.a)(i=function(e){function s(t){var s;return(s=e.call(this,t)||this).addLikeComment=function(t){return new Promise((function(e,a){var o,n,i,r,l,c,d;return n=void 0===(o=s.props.callback)?function(){}:o,i=t.target.closest(".commentContainer").dataset.id,r=s.props.story,l=s.props.stores.storyStore,(c=s.state.likeComment)[i]=!0,s.setState({likeComment:c}),setTimeout((function(){var t=s.state.likeComment;delete t[i],s.setState({likeComment:t})}),1200),Promise.resolve(l.likeStoryComment({id:r.id,commentId:i})).then((function(t){try{return(d=t)&&200===d.status&&n({type:"likeComment",story:r,commentId:i,response:d}),e(!0)}catch(t){return a(t)}}),a)}))},s.likeReply=function(t){return new Promise((function(e,a){var o,n,i,r,l,c,d,h;return n=void 0===(o=s.props.callback)?function(){}:o,i=t.target.closest(".replyContainer").dataset.id,r=t.target.closest(".replyContainer").dataset.comment,l=s.props.story,c=s.props.stores.storyStore,(d=s.state.likeReply)[i]=!0,s.setState({likeReply:d}),setTimeout((function(){var t=s.state.likeReply;delete t[i],s.setState({likeReply:t})}),1200),Promise.resolve(c.likeStoryCommentReply({id:l.id,replyId:i,commentId:r})).then((function(t){try{return(h=t)&&200===h.status&&n({type:"likeReply",story:l,commentId:r,replyId:i,response:h}),e()}catch(t){return a(t)}}),a)}))},s.replyComment=function(t){return new Promise((function(e){var a=t.target.parentElement.dataset.id||t.target.dataset.id,o=s.state.showAddComment;return o[a]=!o[a],s.setState({showAddComment:o},(function(){s.inputRef[a]&&s.inputRef[a].focus()})),e()}))},s.toggleComments=function(){s.setState({showAllComments:!s.state.showAllComments})},s.toggleReplies=function(t){var e=t.target.parentElement.dataset.id||t.target.dataset.id,a=s.state.showAllReplies;a[e]=!a[e],s.setState({showAllReplies:a})},s.toggleMenu=function(t){var e=t.target.closest("i").dataset.id,a=s.state.showMenu,o=void 0===a?{}:a;o[e]=!o[e],s.setState({showDeleteComment:{},showEdit:{},showMenu:o})},s.toggleEdit=function(t){var e=t.target.closest("button").dataset,a=e.id,o=e.comment,n=s.state.showEdit,i=void 0===n?{}:n;i[a]=!i[a],s.setState({showDeleteComment:{},showEdit:i,showMenu:{},commentEditText:o})},s.toggleDeleteComment=function(t){var e=t.target.closest("button").dataset.id,a=s.state.showDeleteComment,o=void 0===a?{}:a;o[e]=!o[e],s.setState({showDeleteComment:o,showEdit:{},showMenu:{}})},s.deleteComment=function(t){return new Promise((function(e,a){var o;return o=t.target.closest("button").dataset.id,Promise.resolve(s.props.stores.storyStore.deleteCommentStory({id:s.props.story.id,commentId:o})).then((function(){try{return s.setState({commentEditText:"",showDeleteComment:{},showEdit:{},showMenu:{}}),e()}catch(t){return a(t)}}),a)}))},s.deleteCommentReply=function(t){return new Promise((function(e,a){var o;return o=t.target.closest("button").dataset,Promise.resolve(s.props.stores.storyStore.deleteCommentReplyStory({id:s.props.story.id,commentId:o.commentid,replyId:o.id})).then((function(){try{return s.setState({commentEditText:"",showDeleteComment:{},showEdit:{},showMenu:{}}),e()}catch(t){return a(t)}}),a)}))},s.saveComment=function(t){return new Promise((function(e,a){var o;return o=t.target.closest("button").dataset.id,Promise.resolve(s.props.stores.storyStore.editCommentStory({id:s.props.story.id,commentId:o,comment:s.state.commentEditText})).then((function(){try{return s.setState({commentEditText:"",showDeleteComment:{},showEdit:{},showMenu:{}}),e()}catch(t){return a(t)}}),a)}))},s.saveCommentReply=function(t){return new Promise((function(e,a){var o;return o=t.target.closest("button").dataset,Promise.resolve(s.props.stores.storyStore.editCommentReplyStory({id:s.props.story.id,commentId:o.commentid,replyId:o.id,comment:s.state.commentEditText})).then((function(){try{return s.setState({commentEditText:"",showDeleteComment:{},showEdit:{},showMenu:{}}),e()}catch(t){return a(t)}}),a)}))},s.viewImage=function(t){var e=t.target.closest("img").dataset,a=s.state.viewImageIdx;a[e.id]=e.idx,s.setState({viewImageIdx:a})},s.translate=function(t){return new Promise((function(e,a){function o(){return s.setState({showOriginal:b,translatedText:f}),e()}var n,i,r,l,c,d,h,u,m,b,p,f,g;return t.preventDefault(),t.stopPropagation(),n=t.target.closest("button").dataset,l=s.props.story,d=(c=s.props.stores).storyStore,h=c.userStore.user,f=void 0===(p=(u=s.state).translatedText)?{}:p,(b=void 0===(m=u.showOriginal)?{}:m)[g=(r=n.commentid)+((i=n.replyid)?"-"+i:"")]=0,i?Promise.resolve(d.translateCommentReply({commentid:r,replyid:i,story:l,user:h})).then(function(t){try{return f[g]=t,o.call(this)}catch(t){return a(t)}}.bind(this),a):Promise.resolve(d.translateComment({commentid:r,story:l,user:h})).then(function(t){try{return f[g]=t,o.call(this)}catch(t){return a(t)}}.bind(this),a)}))},s.showOriginal=function(t){var e=t.target.closest("button").dataset,a=e.replyid,o=e.commentid;t.preventDefault(),t.stopPropagation();var n=s.state.showOriginal,i=void 0===n?{}:n;i[o+(a?"-"+a:"")]=1,s.setState({showOriginal:i})},s.state=o(o({},g),{},{showAllComments:t.showAllComments}),s.inputRef={},s}var a,n;return n=e,(a=s).prototype=Object.create(n.prototype),a.prototype.constructor=a,a.__proto__=n,s.prototype.render=function(){var e,s=this,a=this.state,o=a.showAddComment,n=a.showAllComments,i=a.showAllReplies,c=a.viewImageIdx,u=a.showMenu,g=void 0===u?{}:u,O=a.showEdit,j=void 0===O?{}:O,v=a.showDeleteComment,y=void 0===v?{}:v,w=a.commentEditText,k=a.likeComment,x=a.showOriginal,S=void 0===x?{}:x,C=a.translatedText,I=void 0===C?{}:C,D=this.props,T=D.story,P=D.callback,R=void 0===P?function(){}:P,L=D.initCall,A=void 0===L?function(){}:L,E=D.compact,_=this.props.stores,U=_.userStore,F=_.storyStore,z=U.user,M=z.language,B=void 0===M?"en":M,N=[],K=0,V=0;return T.comments&&(K=T.comments.length,n?N=T.comments:(e=void 0!==E&&E?0:2,N=T.comments.slice(Math.max(K-e,0))),V=N.length),Object(r.h)("div",null,T&&l.a.isArray(N)&&N.reverse().map((function(a){var n=a.user,u=void 0===n?{}:n,O=F.findPublicTeamByMembers(u.id),v=f.a.displayNameShort(u),x=f.a.displayName(u),C=u.image||(u.images?u.images[0]:void 0),D=a.likes&&a.likes.findIndex((function(t){return t.user===z.id}))>-1,P=[],L=0,E=0;a.comments&&(L=a.comments.length,E=(P=i[a.id]?a.comments:a.comments.slice(0,e)).length);var _=[];if(a.images){var U=Object(d.i)(a.images);_.push.apply(_,U)}var M=c[a.id]?c[a.id]:0,N=_&&_[M]?_[M]:null,K=F.getCommentTranslations({story:T,commentid:a.id,targetLang:B})||I[a.id],V=K||a.comment;return S[a.id]&&(V=a.comment),Object(r.h)("div",{class:"row"},Object(r.h)("div",{class:"col-11 offset-1 d-flex mb-2 position-relative"},Object(r.h)("div",{class:"text-center border rounded-circle imageRounded imageRoundedSmall",style:(C?'background-image: url("'+C.s3SmallLink+'"); background-size: cover;':"")+" border-width: 3px !important;"},!u.image&&Object(r.h)("span",{class:"font-weight-lighter",style:"font-size: 15px;"},v)),Object(r.h)("div",{class:"flex-grow-1 pl-3 pt-0",style:"line-height: 1.2em;"},Object(r.h)("div",{class:"bg-light p-2 rounded rounded-lg position-relative"},z.id===u.id&&Object(r.h)(t,null,Object(r.h)("span",{class:"float-right font-weight-lighter text-muted"},Object(r.h)("i",{class:"fas fa-ellipsis-h",onClick:s.toggleMenu,"data-id":a.id}))),g[a.id]&&Object(r.h)(t,null,Object(r.h)("div",{class:"position-absolute bg-white p-2 border rounded rounded-lg shadow-sm",style:"top: 30px; right: 10px; width: 60%; z-index: 999999;"},Object(r.h)("button",{class:"btn btn-link btn-block text-left",onClick:s.toggleEdit,"data-id":a.id,"data-comment":a.comment},Object(r.h)("i",{class:"fas fa-edit"})," Edit"),Object(r.h)("hr",null),Object(r.h)("button",{class:"btn btn-link btn-block text-left",onClick:s.toggleDeleteComment,"data-id":a.id},Object(r.h)("i",{class:"fas fa-trash-alt"})," Delete"))),Object(r.h)("div",null,Object(r.h)("span",{style:"font-size: 0.95em;"},Object(r.h)("h5",{class:"font-weight-bold mb-2",style:"font-size: 1.0em;"},u.uuidv4&&u.uuidv4!==z.uuidv4?Object(r.h)(t,null,Object(r.h)("a",{href:"/inbox/"+u.uuidv4},x)):Object(r.h)(t,null,x),O&&O.length>0&&Object(r.h)(t,null,Object(r.h)("span",{class:"font-weight-lighter text-muted ml-1"},O.filter((function(t){return 1===t.public})).slice(0,1).map((function(e){return Object(r.h)(t,null,"- ",Object(r.h)("a",{href:"/teams/public/"+e.uuidv4},e.name))}))))),j[a.id]?Object(r.h)(t,null,Object(r.h)("div",{class:"d-flex bd-highlight"},Object(r.h)("div",{class:"p-0 w-100 bd-highlight"},Object(r.h)("label",{class:"sr-only",for:"inlineFormInput"},Object(r.h)(h.c,{id:"comments.comment"},"Kommentar")),Object(r.h)("div",{class:"border rounded rounded-lg position-relative"},Object(r.h)(h.b,null,Object(r.h)("textarea",{class:"form-control-plaintext px-2",type:"text",placeholder:Object(r.h)(h.c,{id:"comments.write-comment"},"Skriv en kommentar..."),onInput:Object(b.a)(s,"commentEditText"),onKeyUp:f.a.resizeTextarea,onFocus:f.a.resizeTextarea,style:"height: 2.3em;",value:w})))),Object(r.h)("div",{class:"p-0 pl-2 flex-shrink-1 bd-highlight"},Object(r.h)("button",{type:"button",class:"btn btn-primary mb-2",onClick:s.saveComment,"data-id":a.id},Object(r.h)("i",{class:"fas fa-paper-plane"}))))):Object(r.h)(t,null,Object(r.h)(m.a,{markdown:f.a.replaceImages(V,a.images,B),markdownOpts:f.a.getMarkdownOptions()})),y[a.id]&&Object(r.h)("div",{class:"clearfix mt-3 mb-3"},Object(r.h)("button",{class:"btn btn-danger float-left",onClick:s.deleteComment,"data-id":a.id},Object(r.h)("i",{class:"fas fa-trash-alt"})," Delete"),Object(r.h)("button",{class:"btn btn-secondary float-right",onClick:s.toggleDeleteComment,"data-id":a.id},Object(r.h)("i",{class:"fas fa-times-circle"})," Cancel")))),Object(r.h)("div",null,Object(r.h)("div",{class:"container-fluid px-3 mt-1"},N&&Object(r.h)("div",{class:"clearfix row position-relative"},Object(r.h)("div",{class:"commentContainer col-12 px-0 overflow-hidden",style:"max-height: 60vh;",onDblclick:s.addLikeComment,"data-id":a.id},Object(r.h)("img",{loading:"lazy",class:"img-fluid",style:"min-width: 100px;",src:N.s3LargeLink})),k[a.id]&&Object(r.h)("span",{class:"likeHeart position-absolute text-white display-1",style:"top: calc(50% - 50px); left: calc(50% - 50px); width: 100px; height: 100px;"},Object(r.h)("i",{class:"fas fa-heart likeStory"}))),_&&_.length>1&&Object(r.h)("div",{class:"clearfix d-flex flex-wrap row"},l.a.isArray(_)&&_.map((function(e,o){return Object(r.h)(t,null,Object(r.h)("div",{class:"col px-0 overflow-hidden",style:"max-height: 100px; min-width: 100px;"},Object(r.h)("img",{loading:"lazy",class:"img-fluid border",style:"min-width: 100px;",src:e.s3SmallLink,onClick:s.viewImage,"data-id":a.id,"data-idx":o})))})))))),Object(r.h)("small",null,Object(r.h)("button",{class:"commentContainer btn btn-sm btn-link py-0 "+(D?"text-primary":""),onClick:s.addLikeComment,"data-id":a.id,disabled:D},D?Object(r.h)(h.c,{id:"comments.has-liked"},"Liked"):Object(r.h)(h.c,{id:"comments.like"},"Lik")),"-",Object(r.h)("button",{class:"btn btn-sm btn-link py-0",onClick:s.replyComment,"data-id":a.id},Object(r.h)(h.c,{id:"comments.comment-add"},"Kommentar")),a.language!==B&&Object(r.h)(t,null,"-",!S[a.id]&&K?Object(r.h)(t,null,Object(r.h)("button",{type:"button",class:"btn btn-sm btn-link","data-commentid":a.id,onClick:s.showOriginal},Object(r.h)("i",{class:"fas fa-cog"}),"  ",Object(r.h)(h.c,{id:"home.translate-show-original"},"Show original"))):Object(r.h)(t,null,Object(r.h)("button",{type:"button",class:"btn btn-sm btn-link",onClick:s.translate,"data-commentid":a.id},Object(r.h)("i",{class:"fas fa-cog"})," ",Object(r.h)(h.c,{id:"home.translate-to"},"See translation")))),"-",Object(r.h)("button",{class:"btn btn-sm btn-link py-0 disabled"},l.a.formatDistance(a.createdDate,new Date,{locale:"no-NB"}),a.updatedDate&&Object(r.h)(t,null,Object(r.h)("span",{class:"font-weight-light ml-2"},"(Edited ",l.a.formatDistance(a.updatedDate,new Date,{locale:"no-NB"}),")"))))),a.likes&&a.likes.length>0&&Object(r.h)("small",{class:"position-absolute bg-light shadow-sm rounded-lg py-0 px-1",style:"bottom: 20px; right: 15px;"},Object(r.h)("i",{class:"fas fa-thumbs-up text-primary"})," ",a.likes.length)),Object(r.h)("div",{class:"col-10 offset-2 mb-2"},a&&l.a.isArray(P)&&P.map((function(e){var o=e.user,n=void 0===o?{}:o,i=F.findPublicTeamByMembers(n.id),c=f.a.displayNameShort(n),d=f.a.displayName(n),u=n.image||(n.images?n.images[0]:void 0),p=e.likes&&e.likes.findIndex((function(t){return t.user===z.id}))>-1,O=F.getCommentReplyTranslations({story:T,commentid:a.id,replyid:e.id,targetLang:B})||I[a.id+"-"+e.id],v=O||e.comment;return S[a.id+"-"+e.id]&&(v=e.comment),Object(r.h)("div",{class:"row"},Object(r.h)("div",{class:"col-12 d-flex mb-2 position-relative"},Object(r.h)("div",{class:"text-center border rounded-circle imageRounded imageRoundedSmall",style:(u?'background-image: url("'+u.s3SmallLink+'"); background-size: cover;':"")+" border-width: 3px !important;"},!n.image&&Object(r.h)("span",{class:"font-weight-lighter",style:"font-size: 15px;"},c)),Object(r.h)("div",{class:"flex-grow-1 pl-3 pt-0",style:"line-height: 1.2em;"},Object(r.h)("div",{class:"bg-light p-2 rounded-lg position-relative"},z.id===n.id&&Object(r.h)(t,null,Object(r.h)("span",{class:"float-right font-weight-lighter text-muted"},Object(r.h)("i",{class:"fas fa-ellipsis-h",onClick:s.toggleMenu,"data-id":e.id}))),g[e.id]&&Object(r.h)(t,null,Object(r.h)("div",{class:"position-absolute bg-white p-2 border rounded rounded-lg shadow-sm",style:"top: 30px; right: 10px; width: 60%; z-index: 999999;"},Object(r.h)("button",{class:"btn btn-link btn-block text-left",onClick:s.toggleEdit,"data-id":e.id,"data-comment":e.comment},Object(r.h)("i",{class:"fas fa-edit"})," Edit"),Object(r.h)("hr",null),Object(r.h)("button",{class:"btn btn-link btn-block text-left",onClick:s.toggleDeleteComment,"data-id":e.id},Object(r.h)("i",{class:"fas fa-trash-alt"})," Delete"))),Object(r.h)("span",{style:"font-size: 0.95em;"},Object(r.h)("h5",{class:"font-weight-bold mb-2",style:"font-size: 1.0em;"},d,i&&i.length>0&&Object(r.h)(t,null,Object(r.h)("span",{class:"font-weight-lighter text-muted ml-2"},i.filter((function(t){return 1===t.public})).slice(0,1).map((function(e){return Object(r.h)(t,null,"- ",Object(r.h)("a",{href:"/teams/public/"+e.uuidv4,class:"mr-2"}," ",e.name))}))))),j[e.id]?Object(r.h)(t,null,Object(r.h)("div",{class:"d-flex bd-highlight"},Object(r.h)("div",{class:"p-0 w-100 bd-highlight"},Object(r.h)("label",{class:"sr-only",for:"inlineFormInput"},Object(r.h)(h.c,{id:"comments.comment"},"Kommentar")),Object(r.h)("div",{class:"border rounded rounded-lg position-relative"},Object(r.h)(h.b,null,Object(r.h)("textarea",{class:"form-control-plaintext px-2",type:"text",placeholder:Object(r.h)(h.c,{id:"comments.write-comment"},"Skriv en kommentar..."),onInput:Object(b.a)(s,"commentEditText"),onKeyUp:f.a.resizeTextarea,onFocus:f.a.resizeTextarea,style:"height: 2.3em;",value:w})))),Object(r.h)("div",{class:"p-0 pl-2 flex-shrink-1 bd-highlight"},Object(r.h)("button",{type:"button",class:"btn btn-primary mb-2",onClick:s.saveCommentReply,"data-commentid":a.id,"data-id":e.id},Object(r.h)("i",{class:"fas fa-paper-plane"}))))):Object(r.h)(t,null,Object(r.h)(m.a,{markdown:f.a.replaceImages(v,e.images,B),markdownOpts:f.a.getMarkdownOptions()})),y[e.id]&&Object(r.h)("div",{class:"clearfix mt-3 mb-3"},Object(r.h)("button",{class:"btn btn-danger float-left",onClick:s.deleteCommentReply,"data-id":e.id,"data-commentid":a.id},Object(r.h)("i",{class:"fas fa-trash-alt"})," Delete"),Object(r.h)("button",{class:"btn btn-secondary float-right",onClick:s.toggleDeleteComment,"data-id":e.id},Object(r.h)("i",{class:"fas fa-times-circle"})," Cancel")))),Object(r.h)("small",null,Object(r.h)("button",{class:"replyContainer btn btn-sm btn-link py-0 "+(p?"text-primary":""),onClick:s.likeReply,"data-comment":a.id,"data-id":e.id,disabled:p},p?Object(r.h)(h.c,{id:"comments.has-liked"},"Liked"):Object(r.h)(h.c,{id:"comments.like"},"Lik")),"-",Object(r.h)("button",{class:"btn btn-sm btn-link py-0",onClick:s.replyComment,"data-id":a.id},Object(r.h)(h.c,{id:"comments.comment-add"},"Kommentar")),e.language!==B&&Object(r.h)(t,null,"-",!S[a.id+"-"+e.id]&&O?Object(r.h)(t,null,Object(r.h)("button",{type:"button",class:"btn btn-sm btn-link","data-commentid":a.id,"data-replyid":e.id,onClick:s.showOriginal},Object(r.h)("i",{class:"fas fa-cog"}),"  ",Object(r.h)(h.c,{id:"home.translate-show-original"},"Show original"))):Object(r.h)(t,null,Object(r.h)("button",{type:"button",class:"btn btn-sm btn-link",onClick:s.translate,"data-commentid":a.id,"data-replyid":e.id},Object(r.h)("i",{class:"fas fa-cog"})," ",Object(r.h)(h.c,{id:"home.translate-to"},"See translation")))),"-",Object(r.h)("button",{class:"btn btn-sm btn-link py-0 disabled"},l.a.formatDistance(e.createdDate,new Date,{locale:"no-NB"}),e.updatedDate&&Object(r.h)(t,null,Object(r.h)("span",{class:"font-weight-light ml-2"},"(Edited ",l.a.formatDistance(e.updatedDate,new Date,{locale:"no-NB"}),")"))))),e.likes&&Object(r.h)("small",{class:"position-absolute bg-light shadow-sm rounded-lg py-0 px-1",style:"bottom: 20px; right: 15px;"},Object(r.h)("i",{class:"fas fa-thumbs-up text-primary"})," ",e.likes.length)))})),L-E>0&&Object(r.h)("div",null,Object(r.h)("button",{class:"btn btn-sm btn-link py-0",onClick:s.toggleReplies,"data-id":a.id},Object(r.h)(h.c,{id:"comments.show-more",fields:{more:L-E}},"Vis ",L-E," flere kommentarer...")))),o[a.id]&&Object(r.h)("div",{class:"col-11 offset-1 d-flex mb-2 position-relative"},Object(r.h)(p.a,{stores:s.props.stores,story:T,initCall:A,callback:R,commentId:a.id,inputRef:function(t){return s.inputRef[a.id]=t},inputRefObject:s.inputRef,key:"story-commentreply-"+a.id})))})),K-V>0&&Object(r.h)("div",null,Object(r.h)("button",{class:"btn btn-sm btn-link py-0",onClick:this.toggleComments},Object(r.h)(h.c,{id:"comments.show-more",fields:{more:K-V}},"Vis ",K-V," flere kommentarer..."))),n&&Object(r.h)("div",null,Object(r.h)("button",{class:"btn btn-sm btn-link py-0",onClick:this.toggleComments},Object(r.h)(h.c,{id:"comments.hide-all-comments"},"Skjul alle kommentarene."))))},s}(r.Component))||i;e.a=O}).call(this,s("hosL").Fragment)},ETxl:function(t){t.exports={hoverelementonly:"hoverelementonly__1mJGJ",hoverElement:"hoverElement__axh3O",hoverelementhide:"hoverelementhide__1k_qH","progress-bar-vertical":"progress-bar-vertical__1B2sC","progress-bar":"progress-bar__pnsVj",dragged:"dragged__QXO46",over:"over__1re3x",list:"list__q_emZ"}},"Gx/q":function(t,e,s){"use strict";(function(t){var a,o=s("hosL"),n=s("Utv1"),i=s("/eY4"),r=(s("OhSV"),s("nHdA")),l=s("irB3"),c=(s("UwwE"),s("8Lgr")),d=(s("QkTp"),s("ZOvn")),h=Object(i.a)(a=function(e){function s(t){var s;return(s=e.call(this,t)||this).removeUser=function(t){return new Promise((function(e,a){var o,n,i;return n=t.target.dataset.email,i=t.target.dataset.team,!(o=t.target.dataset.id)&&t.target.parentNode&&(o=t.target.parentNode.dataset.id,n=t.target.parentNode.dataset.email,i=t.target.parentNode.dataset.team),console.log("id, email, team",o,n,i),Promise.resolve(s.props.stores.teamStore.removeMember(i,{id:o,email:n})).then((function(){try{return e()}catch(t){return a(t)}}),a)}))},s.adminUpdateUser=function(t){var e=t.target.closest("input").dataset.email+"-"+t.target.name;clearTimeout(s.updateTimer[e]),s.updateTimer[e]=setTimeout((function(){s.doAdminUpdateUser(t)}),500)},s.doAdminUpdateUser=function(t){return new Promise((function(e,a){var o,n,i;return n=t.target.closest("input").dataset.email,i=t.target,Promise.resolve(s.props.stores.userStore.adminUpdateUser(n,(o={},o[i.name]=i.value,o))).then((function(){try{return e()}catch(t){return a(t)}}),a)}))},s.simulateUser=function(t){var e=t.target.closest("button").dataset.email;s.props.stores.userStore.getSimulateUser(e)},s.state={},s.updateTimer={},s}var a,i;return i=e,(a=s).prototype=Object.create(i.prototype),a.prototype.constructor=a,a.__proto__=i,s.prototype.render=function(){var e=this.props,s=e.user,a=e.team,i=void 0===a?{}:a,h=this.props.stores,u=h.userStore,m=h.teamStore,b=u.user,p=u.isAdmin,f=u.findTeams(s.teams),g=m.findMusherSummary(s.id,i.id)||{},O=i.user===b.id,j=d.a.getImage({user:s,team:i}),v=d.a.displayName(s);return Object(o.h)("div",{class:"w-100 mb-3"},Object(o.h)("div",{class:"row"},Object(o.h)("div",{class:"col-12 d-flex mb-0 position-relative"},Object(o.h)("div",{class:"text-center border rounded-circle imageRounded",style:j?"background-image: url('"+j+"'); background-size: cover;":""},!j&&Object(o.h)("i",{class:"fas fa-user text-muted mt-3",style:"font-size: 40px;"})),Object(o.h)("div",{class:"flex-grow-1 pl-3 pr-2"},Object(o.h)("h5",null,v),Object(o.h)("div",null,Object(o.h)("small",{class:"text-muted"},Object(o.h)("div",{class:"d-flex justify-content-left"},s.cellphone&&Object(o.h)("div",{class:"mr-2"},Object(o.h)("i",{class:"fas fa-mobile-alt"})," ",s.cellphone),s.email&&Object(o.h)("div",{class:"mr-2"},Object(o.h)("i",{class:"fas fa-envelope ml-3"})," ",s.email),s.url&&Object(o.h)("div",{class:"mr-2"},Object(o.h)("a",{href:d.a.asUrl(s.url),target:"_blank",rel:"noreferrer"},Object(o.h)("i",{class:"fas fa-link"}))),s.facebook&&Object(o.h)("div",{class:"mr-2"},Object(o.h)("a",{href:d.a.asFacebookLink(s.facebook),target:"_blank",rel:"noreferrer"},Object(o.h)("i",{class:"fab fa-facebook"}))),s.instagram&&Object(o.h)("div",{class:"mr-2"},Object(o.h)("a",{href:d.a.asInstagramLink(s.instagram),target:"_blank",rel:"noreferrer"},Object(o.h)("i",{class:"fab fa-instagram"}))),s.snapchat&&Object(o.h)("div",{class:"mr-2"},Object(o.h)("a",{href:d.a.asSnapchatLink(s.snapchat),target:"_blank",rel:"noreferrer"},Object(o.h)("i",{class:"fab fa-snapchat"})))))),p&&Object(o.h)(t,null,Object(o.h)("button",{class:"btn btn-block btn-success",onClick:this.simulateUser,"data-email":s.email},"Simulate user"),Object(o.h)("small",null,Object(o.h)("details",null,Object(o.h)("summary",null,"settings"),Object(o.h)("xmp",null,JSON.stringify(s.settings,null,4))),Object(o.h)("details",null,Object(o.h)("summary",null,"subscription"),Object(o.h)("xmp",null,JSON.stringify(s.subscription,null,4))),Object(o.h)("details",null,Object(o.h)("summary",null,"deviceInfo"),Object(o.h)("xmp",null,JSON.stringify(s.deviceInfo,null,4))),Object(o.h)("details",null,Object(o.h)("summary",null,"subscription"),Object(o.h)("xmp",null,JSON.stringify(s.subscription,null,4))),Object(o.h)("details",null,Object(o.h)("summary",null,"notifications"),Object(o.h)("xmp",null,JSON.stringify(s.notifications,null,4))),Object(o.h)("details",null,Object(o.h)("summary",null,"notificationTopics"),Object(o.h)("xmp",null,JSON.stringify(s.notificationTopics,null,4))),Object(o.h)("details",null,Object(o.h)("summary",null,"applications"),Object(o.h)("xmp",null,JSON.stringify(s.applications,null,4))),Object(o.h)("details",null,Object(o.h)("summary",null,"shadowTags"),Object(o.h)("xmp",null,JSON.stringify(s.shadowTags,null,4))),Object(o.h)("details",null,Object(o.h)("summary",null,"garmin"),Object(o.h)("xmp",null,JSON.stringify(s.garmin,null,4))),Object(o.h)("details",null,Object(o.h)("summary",null,"strava"),Object(o.h)("xmp",null,JSON.stringify(s.strava,null,4))),Object(o.h)("details",null,Object(o.h)("summary",null,"currentLocationGeocode"),Object(o.h)("xmp",null,JSON.stringify(s.currentLocationGeocode,null,4))),"lastActivityEpoch: ",n.a.isoDate(s.lastActivityEpoch),Object(o.h)("br",null),"activities: ",n.a.format(s.activities),Object(o.h)("br",null),s.settings&&Object(o.h)("div",{class:"form-check"},Object(o.h)("input",{class:"form-check-input",type:"checkbox",value:s.settings.veterinaryAllowed?0:1,id:"settings.veterinaryAllowed-"+s.id,name:"settings.veterinaryAllowed",checked:s.settings.veterinaryAllowed?"checked":"","data-email":s.email,onInput:this.adminUpdateUser}),Object(o.h)("label",{class:"form-check-label",for:"settings.veterinaryAllowed-"+s.id},"settings.veterinaryAllowed")),Object(o.h)("div",{class:"form-check"},Object(o.h)("input",{class:"form-check-input",type:"checkbox",value:s.twoFactorLogin?0:1,id:"twoFactorLogin-"+s.id,name:"twoFactorLogin",checked:s.twoFactorLogin?"checked":"","data-email":s.email,onInput:this.adminUpdateUser}),Object(o.h)("label",{class:"form-check-label",for:"twoFactorLogin-"+s.id},"twoFactorLogin")),Object(o.h)("div",{class:"form-check"},Object(o.h)("input",{class:"form-check-input",type:"checkbox",value:s.isVeterinary?0:1,id:"isVeterinary-"+s.id,name:"isVeterinary",checked:s.isVeterinary?"checked":"","data-email":s.email,onInput:this.adminUpdateUser}),Object(o.h)("label",{class:"form-check-label",for:"isVeterinary-"+s.id},"isVeterinary")),Object(o.h)("div",{class:"form-group row"},Object(o.h)("label",{class:"col-sm-2 col-form-label",for:"cellphone-"+s.id},"cellphone"),Object(o.h)("div",{class:"col-sm-10"},Object(o.h)("input",{type:"text",id:"cellphone-"+s.id,name:"cellphone",class:"form-control",value:s.cellphone,"data-email":s.email,onInput:this.adminUpdateUser}))),Object(o.h)("div",{class:"form-group row"},Object(o.h)("label",{class:"col-sm-2 col-form-label",for:"firstname-"+s.id},"firstname"),Object(o.h)("div",{class:"col-sm-10"},Object(o.h)("input",{type:"text",id:"firstname-"+s.id,name:"firstname",class:"form-control",value:s.firstname,"data-email":s.email,onInput:this.adminUpdateUser}))),Object(o.h)("div",{class:"form-group row"},Object(o.h)("label",{class:"col-sm-2 col-form-label",for:"lastname-"+s.id},"lastname"),Object(o.h)("div",{class:"col-sm-10"},Object(o.h)("input",{type:"text",id:"lastname-"+s.id,name:"lastname",class:"form-control",value:s.lastname,"data-email":s.email,onInput:this.adminUpdateUser}))))),s.teams&&Object(o.h)(t,null,f.map((function(t){return Object(o.h)("span",{class:"badge badge-pill badge-info mr-2"},t.name)})),Object(o.h)("br",null)),i.id&&g&&Object(o.h)(t,null,Object(o.h)("small",{class:"text-muted"},"Total:",g&&Object(o.h)("span",{class:"ml-2"},Object(o.h)("i",{class:"fas fa-road"})," ",Object(o.h)(c.a,{stores:this.props.stores,value:g.distanceKm})),g&&Object(o.h)("span",{class:"ml-2"},Object(o.h)("i",{class:"fas fa-mountain"})," ",Object(o.h)(l.a,{stores:this.props.stores,value:g.elevation})),g&&Object(o.h)("span",{class:"ml-2"},Object(o.h)("i",{class:"fas fa-clock"})," ",n.a.secToHms(g.duration||0))),Object(o.h)("br",null),Object(o.h)("small",{class:"text-muted"},"Avg:",g&&Object(o.h)("span",{class:"ml-2"},Object(o.h)("i",{class:"fas fa-road"})," ",Object(o.h)(c.a,{stores:this.props.stores,value:g.avgDistance})),g&&Object(o.h)("span",{class:"ml-2"},Object(o.h)("i",{class:"fas fa-mountain"})," ",Object(o.h)(l.a,{stores:this.props.stores,value:g.avgElevation})),g&&Object(o.h)("span",{class:"ml-2"},Object(o.h)("i",{class:"fas fa-clock"})," ",n.a.secToHms(g.avgDuration||0)),g&&Object(o.h)("span",{class:"ml-2"},Object(o.h)("i",{class:"fas fa-tachometer-alt"})," ",Object(o.h)(r.a,{stores:this.props.stores,value:g.speedAvg})),g&&Object(o.h)("span",{class:"ml-2"},Object(o.h)("i",{class:"fas fa-dog"})," ",n.a.format(g.avgDogs,1))))),Object(o.h)("div",null,O&&s.id!==b.id&&Object(o.h)("button",{class:"btn btn-sm btn-danger",onClick:this.removeUser,"data-email":s.email,"data-id":s.id,"data-team":i.id},Object(o.h)("i",{class:"fas fa-ban"})),!O&&s.id===b.id&&Object(o.h)("button",{class:"btn btn-sm btn-secondary",onClick:this.removeUser,"data-email":s.email,"data-id":s.id,"data-team":i.id},Object(o.h)("i",{class:"fas fa-sign-out-alt"}),i.id)))))},s}(o.Component))||a;e.a=h}).call(this,s("hosL").Fragment)},ISGx:function(t,e,s){"use strict";(function(t){function a(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,a)}return s}function o(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?a(Object(s),!0).forEach((function(e){n(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):a(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}function n(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}var i,r=s("hosL"),l=s("Utv1"),c=s("/eY4"),d=s("cneo"),h=s("OhSV"),u=s("fh8t"),m=s.n(u),b=s("Y3FI"),p=s("s4FZ"),f=s("ZQlJ"),g=s("sqi2"),O=s("/922"),j=s("eQ6k"),v=s("+JSK"),y=s("vY+r"),w=s("nHdA"),k=s("irB3"),x=s("UwwE"),S=s("8Lgr"),C=s("QkTp"),I=s("ZOvn"),D={showAddComment:{},likeWorkout:{},idxSuggestion:0,idxAd:4,limit:15,offset:0,hasFollowSugguestions:!1,hasAd:!1,sessionid:(new Date).getTime()},T=Object(c.a)(i=function(e){function s(t){var s;return(s=e.call(this,t)||this).toggleDate=function(t){t.stopPropagation(),t.preventDefault(),s.setState({showDate:!s.state.showDate})},s.likeWorkout=function(t){return new Promise((function(e,a){var o,n,i,r;return o=parseInt(t.target.closest(".imageContainer").dataset.id,10),n=s.props.stores.workoutStore,(i=s.state.likeWorkout)[o]=!0,s.setState({likeWorkout:i}),setTimeout((function(){var t=s.state.likeWorkout;delete t[o],s.setState({likeWorkout:t})}),1200),Promise.resolve(n.likeWorkout({id:o})).then((function(t){try{return(r=t)&&200===r.status&&s.addLikeToFeed(o,r.data),e()}catch(t){return a(t)}}),a)}))},s.addCommentToFeed=function(t){var e=t.type,a=t.workout,o=t.response,n=t.commentId,i=t.replyId,r=s.props.holdingStore,l=void 0===r?"team":r;if("team"===l){var c=s.props.stores.teamStore;switch(e){case"likeComment":c.addLikeToComment({id:a.id,data:o.data,commentId:n});break;case"likeReply":c.addLikeToCommentReply({id:a.id,data:o.data,commentId:n,replyId:i});break;default:n?c.addCommentToWorkoutComment({id:a.id,data:o.data,commentId:n}):c.addCommentToWorkout({id:a.id,data:o.data})}}else if("story"===l){var d=s.props.stores.storyStore;switch(e){case"likeComment":d.workoutsAddLikeToComment({id:a.id,data:o.data,commentId:n});break;case"likeReply":d.workoutsAddLikeToCommentReply({id:a.id,data:o.data,commentId:n,replyId:i});break;default:n?d.workoutsAddCommentToWorkoutComment({id:a.id,data:o.data,commentId:n}):d.workoutsAddCommentToWorkout({id:a.id,data:o.data})}}},s.addLikeToFeed=function(t,e){var a=s.props.holdingStore,o=void 0===a?"team":a;if("team"===o)s.props.stores.teamStore.addLikeToWorkout({id:t,data:e});else if("story"===o){s.props.stores.storyStore.workoutsAddLikeToWorkout({id:t,data:e})}},s.toggleAddComment=function(t){var e=t.target.closest("button").dataset.id,a=s.state.showAddComment;a[e]?delete a[e]:a[e]=!0,s.setState({showAddComment:a},(function(){s.inputRef[e]&&s.inputRef[e].focus()}))},s.shareLink=function(t){var e=t.target.closest("button").dataset;s.props.stores.appState.shareUrl({url:e.url,title:e.title,text:e.text})},s.showWorkoutDetail=function(t){if("a"===t.target.localName)return!1;var e=t.target.closest("#workoutDetail");if(e){var s=e.dataset.id;s&&(console.log({target:e,id:s}),Object(b.route)("/workouts/public/"+s))}},s.translate=function(t){return new Promise((function(e,a){var o,n,i,r,l,c,d;return t.preventDefault(),t.stopPropagation(),n=void 0===(o=s.props.feed)?{}:o,r=(i=s.props.stores).teamStore,l=i.userStore.user,Promise.resolve(r.translate({object:n,user:l,field:"name"})).then(function(t){try{if(c=t,n.comment)return Promise.resolve(r.translate({object:n,user:l,field:"comment"})).then(function(t){try{return d=t,o.call(this)}catch(t){return a(t)}}.bind(this),a);function o(){return s.setState({showOriginal:0,translatedTextName:c,translatedTextComment:d}),e()}return o.call(this)}catch(t){return a(t)}}.bind(this),a)}))},s.showOriginal=function(t){t.preventDefault(),t.stopPropagation(),s.setState({showOriginal:1})},s.state=o({},D),s.inputRef={},s.containerRef=null,s}var a,n;return n=e,(a=s).prototype=Object.create(n.prototype),a.prototype.constructor=a,a.__proto__=n,s.prototype.render=function(){var e=this,s=this.props,a=s.feed,n=s.onTeamClick,i=void 0===n?function(){}:n,c=s.onUserClick,u=void 0===c?function(){}:c,b=s.onDogClick,D=void 0===b?function(){}:b,T=s.holdingStore,P=void 0===T?"team":T,R=this.state,L=R.showAddComment,A=R.showDate,E=R.likeWorkout,_=R.showOriginal,U=R.translatedTextName,F=R.translatedTextComment,z=this.props.stores,M=z.teamStore,B=z.storyStore,N=z.userStore,K=z.appState,V=N.user,W=N.isAdmin,Y=V.language,q=void 0===Y?"en":Y,J=K.hasShareApi,Z=M.publicDogs,H={},G={};"team"===P?(H=M.findPublicTeam(a.team),G=M.findPublicUser(a.user)||{}):"story"===P&&(H=B.findPublicTeam(a.team),G=B.findPublicUser(a.user)||{});N.findTeamAmbition({ambition:H.ambitions,language:q});var X,Q,$=N.findTeamType({type:H.type,language:q}),tt=!(!H||!H.members)&&H.members.some((function(t){return t===V.id})),et=I.a.getImage({user:G,team:H,object:a,priority:"user"}),st=a.likes,at=a.comments,ot=a.likes&&a.likes.findIndex((function(t){return t.user===V.id}))>-1,nt=H&&H.followers?H.followers.length:0,it=H.members&&H.members.indexOf(V.id)>-1,rt=H&&H.followers&&H.followers.indexOf(V.id)>-1,lt=H.followRequests&&H.followRequests.findIndex((function(t){return t.id===V.id}))>-1,ct=N.findEquipment({equipment:a.equipment,language:q}),dt=N.findEquipment({equipment:a.equipment,field:"icon"}),ht=a.gpxInfo,ut=void 0===ht?{}:ht;G&&(I.a.displayNameShort(G),I.a.displayName(G),X=I.a.displayName(G),G.settings&&G.uuidv4!==V.uuidv4&&(Q=G.settings.hideProfile?null:"/inbox/"+G.uuidv4));var mt=[];if(a.mapImage&&mt.push(o(o({},a.mapImage),{},{type:"map"})),a.images){var bt=Object(d.i)(a.images);mt.push.apply(mt,bt)}var pt=a.currentLocationGeocode,ft=void 0===pt?{}:pt,gt=I.a.getViews(a.statistics),Ot=I.a.getAdminData(a.statistics);if(!H||!H.name)return"";var jt=I.a.getTranslation({object:a,targetLang:q,field:"name"})||U,vt=jt||a.name,yt=I.a.getTranslation({object:a,targetLang:q,field:"comment"})||F||a.comment;return _&&(vt=a.name,yt=a.comment),Object(r.h)(t,null,Object(r.h)("div",{class:"d-flex position-relative"},Object(r.h)("div",{class:"text-center"},Object(r.h)("div",{class:"position-relative text-center border rounded-circle imageRounded imageRoundedMedium",style:et?'background-image: url("'+et+'"); background-size: cover;':""},!et&&Object(r.h)("i",{class:"fas fa-users text-muted mt-2",style:"font-size: 20px;"}))),Object(r.h)("div",{class:"flex-grow-1 pl-3 text-overflow",style:"line-height: 1.2em;"},Object(r.h)("span",{class:"badge badge-pill badge-secondary float-right"},$),Object(r.h)("h5",{class:"mb-1 position-relative",style:"line-height: 1.0em;"},H.public?Object(r.h)(t,null,Object(r.h)("a",{href:"/teams/public/"+H.uuidv4,onClick:function(t){return i(t,H.uuidv4)},class:"stretched-link"},H.name)):Object(r.h)(t,null,H.name)),Object(r.h)("div",{class:"mb-2"},a.date&&Object(r.h)("small",{class:"text-muted",onClick:this.toggleDate},A?l.a.formatDate(a.date,{locale:"no-NB",hour12:!1,hour:"2-digit",minute:"2-digit"}):l.a.formatDistance(a.date,new Date,{locale:"no-NB"})),1===a.public?Object(r.h)(t,null,Object(r.h)("small",{class:"ml-2 text-muted"},Object(r.h)("i",{class:"fas fa-globe-europe"}))):Object(r.h)(t,null,Object(r.h)("small",{class:"ml-2 text-muted"},Object(r.h)("i",{class:"fas fa-users"})," (",l.a.format(nt),")")),X&&Object(r.h)(t,null,Object(r.h)("small",{class:"ml-2 text-muted"},Q?Object(r.h)(t,null,Object(r.h)("i",{class:"fas fa-user"})," ",Object(r.h)("a",{href:Q},X)):Object(r.h)(t,null,Object(r.h)("i",{class:"fas fa-user"})," ",X))),Object(r.h)("small",{class:"text-muted"},a.equipment>0&&Object(r.h)(t,null,Object(r.h)("i",{class:dt+" ml-2"})," ",ct),a.dogs>0&&Object(r.h)(t,null,Object(r.h)("i",{class:"fas fa-dog ml-2"})," ",a.dogs.length),a.track>0&&Object(r.h)(t,null,Object(r.h)("i",{class:"fas fa-map-marked text-"+(a.track>0?"success":"danger")+" ml-2"})),a.sledWeight>0&&Object(r.h)(t,null,Object(r.h)("i",{class:"fas fa-sleigh ml-2"})," ",Object(r.h)(x.a,{stores:this.props.stores,value:a.sledWeight})),0!==a.temperature&&Object(r.h)(t,null,Object(r.h)("i",{class:"fas fa-temperature-low ml-2"})," ",Object(r.h)(C.a,{stores:this.props.stores,value:a.temperature})),a.dogs&&a.dogs.length>0&&Object(r.h)(t,null,Object(r.h)("i",{class:"fas fa-dog ml-2"})," ",l.a.format(a.dogs.length,0)),ft&&ft.formattedCounty&&Object(r.h)(t,null,Object(r.h)("i",{class:"fas fa-map-marker-alt ml-2"})," ",ft.formattedCounty),a.moonIllumination&&a.moonIllumination.phaseIcon&&Object(r.h)("span",{class:"float-right ml-2"},a.moonIllumination.phaseIcon))),W&&Object(r.h)("div",{class:"d-flex flex-row flex-nowrap bg-light border-top border-bottom py-2",style:"overflow: auto;"},Object(r.h)("small",{class:"text-muted mr-2"},"Adm:"),ft&&ft.formatted_address&&Object(r.h)(t,null,Object(r.h)("small",{class:"text-muted"},Object(r.h)("i",{class:"fas fa-map-marker-alt"})," ",ft.formatted_address)),G.deviceInfo&&Object(r.h)(t,null,Object(r.h)("span",{class:"badge badge-secondary ml-1 float-right font-weight-light"},["platform","manufacturer","model"].map((function(e){return Object(r.h)(t,null,Object(r.h)("span",{class:"ml-1 text-white"},G.deviceInfo[e]))})))),Ot&&Object(r.h)(t,null,Object(r.h)("small",{class:"ml-2 text-muted"},"V: ",Ot.count),Object(r.h)("small",{class:"ml-2 text-muted"},"R: ",Ot.ranking," ",l.a.isNumber(Ot.rankingTrend)&&Object(r.h)(t,null,Object(r.h)("i",{class:I.a.getClassForTrend(Ot.rankingTrend)}))),Object(r.h)("small",{class:"ml-2 text-muted"},"D: ",l.a.format(Ot.durationAvg/1e3,1),"s ",l.a.isNumber(Ot.durationAvgTrend)&&Object(r.h)(t,null,Object(r.h)("i",{class:I.a.getClassForTrend(Ot.durationAvgTrend)}))),a.statisticsCurrent&&a.statisticsCurrent.totalInteractions>0&&Object(r.h)("small",{class:"ml-2 text-muted"},"S: ",l.a.format(a.statisticsCurrent.totalInteractions,0)),a.shadowTags&&a.shadowTags.map((function(e){return Object(r.h)(t,null,Object(r.h)("span",{class:"badge badge-secondary ml-2 float-right font-weight-light"},e))})))))),Object(r.h)("div",{class:"container-fluid px-0 mt-1"},Object(r.h)("div",{class:"row"},Object(r.h)(p.a,{stores:this.props.stores,images:mt,id:a.id,dblClick:this.likeWorkout,likeRef:E}))),a.dogs&&a.dogs.length>0&&Object(r.h)("div",{class:"container-fluid px-0 mt-1"},Object(r.h)("div",{class:"row pt-2"},Object(r.h)(f.a,{stores:this.props.stores,dogs:a.dogs,allDogs:Z,onDogClick:D}))),Object(r.h)("div",{class:"d-flex justify-content-between bg-light rounded-lg px-2"},a.distanceKm>0&&Object(r.h)("div",{class:"mr-2 text-center"},Object(r.h)("div",{class:"text-overflow text-muted"},Object(r.h)("small",null,Object(r.h)("i",{class:"fas fa-road"})," ",Object(r.h)(h.c,{id:"workout.calendar.distance"},"Distanse"))),Object(r.h)("div",{class:"text-overflow font-weight-light",style:"font-size: 1.2em;"},Object(r.h)(S.a,{stores:this.props.stores,value:a.distanceKm}))),a.elevation>0&&Object(r.h)("div",{class:"mr-2 text-center"},Object(r.h)("div",{class:"text-overflow text-muted"},Object(r.h)("small",null,Object(r.h)("i",{class:"fas fa-mountain"})," ",Object(r.h)(h.c,{id:"workout.calendar.ascend"},"Høydemeter"))),Object(r.h)("div",{class:"text-overflow font-weight-light",style:"font-size: 1.2em;"},Object(r.h)(k.a,{stores:this.props.stores,value:a.elevation}))),a.duration>0&&Object(r.h)("div",{class:"mr-2 text-center"},Object(r.h)("div",{class:"text-overflow text-muted"},Object(r.h)("small",null,Object(r.h)("i",{class:"fas fa-clock"})," ",Object(r.h)(h.c,{id:"workout.calendar.duration"},"Varighet"))),Object(r.h)("div",{class:"text-overflow font-weight-light",style:"font-size: 1.2em;"},l.a.secToHms(a.duration,!0))),a.speedAvg>0&&Object(r.h)("div",{class:"text-center"},Object(r.h)("div",{class:"text-overflow text-muted"},Object(r.h)("small",null,Object(r.h)("i",{class:"fas fa-tachometer-alt"})," ",Object(r.h)(h.c,{id:"workout.calendar.avg-speed"},"Snittfart"))),Object(r.h)("div",{class:"text-overflow font-weight-light",style:"font-size: 1.2em;"},ut&&ut.avgGpsMovingSpeed>0?Object(r.h)(t,null,Object(r.h)(w.a,{stores:this.props.stores,value:3.6*ut.avgGpsMovingSpeed})):Object(r.h)(t,null,Object(r.h)(w.a,{stores:this.props.stores,value:a.speedAvg}))))),Object(r.h)("div",{class:"row mt-2"},Object(r.h)("div",{id:"workoutDetail",class:"clearfix col-12 font-weight-bold",style:"font-size: 1.2em;",onClick:this.showWorkoutDetail,"data-id":a.uuidv4},Object(r.h)(m.a,{markdown:I.a.replaceImages(vt,a.images,q),markdownOpts:I.a.getMarkdownOptions()})),Object(r.h)("div",{class:"clearfix col-12"},Object(r.h)(m.a,{markdown:I.a.replaceImages(yt,a.images,q),markdownOpts:I.a.getMarkdownOptions()})),a.language!==q&&Object(r.h)(t,null,!_&&jt?Object(r.h)(t,null,Object(r.h)("button",{type:"button",class:"btn btn-sm btn-link text-muted",onClick:this.showOriginal},Object(r.h)("i",{class:"fas fa-cog"}),"  ",Object(r.h)(h.c,{id:"home.translate-show-original"},"Show original"))):Object(r.h)(t,null,Object(r.h)("button",{type:"button",class:"btn btn-sm btn-link text-muted",onClick:this.translate},Object(r.h)("i",{class:"fas fa-cog"})," ",Object(r.h)(h.c,{id:"home.translate-to"},"See translation"))))),Object(r.h)("div",{class:"mt-2"},Object(r.h)(v.a,{stores:this.props.stores,likes:st,comments:at,type:"team",onTeamClick:i,onUserClick:u})),!it&&!rt&&!lt&&Object(r.h)("div",{class:"clearfix mb-2"},Object(r.h)(j.a,{stores:this.props.stores,team:H,buttonOnly:!0})),Object(r.h)("div",null,Object(r.h)("div",{class:"row"},Object(r.h)("div",{class:"col text-center"},Object(r.h)("button",{type:"button",class:"imageContainer btn btn-sm btn-outline-"+(ot?"primary":"secondary")+" btn-lg btn-block "+(ot?"text-primary":"")+" text-overflow","data-id":a.id,onClick:this.likeWorkout},Object(r.h)("i",{class:(ot?"text-primary fas":"far")+" fa-thumbs-up"})," ",Object(r.h)(h.c,{id:"comments.like"},"Lik"))),Object(r.h)("div",{class:"col text-center"},Object(r.h)("button",{type:"button",class:"btn btn-sm btn-outline-secondary btn-lg btn-block text-overflow","data-id":a.id,onClick:this.toggleAddComment},Object(r.h)("i",{class:"fas fa-comment"})," ",Object(r.h)(h.c,{id:"comments.comment-add"},"Kommentar"))),J?Object(r.h)(t,null,Object(r.h)("div",{class:"col text-center"},Object(r.h)("button",{class:"btn btn-sm btn-outline-secondary btn-lg btn-block text-overflow",onClick:this.shareLink,"data-url":"https://themusher.app/share/workout/"+a.uuidv4,"data-title":"title: "+a.title},Object(r.h)("i",{class:"fas fa-share"})," ",Object(r.h)(h.c,{id:"story.share"},"Del")))):Object(r.h)(t,null,Object(r.h)("div",{class:"col text-center"},Object(r.h)("a",{class:"btn btn-sm btn-outline-secondary btn-lg btn-block text-overflow",href:"https://themusher.app/share/workout/"+a.uuidv4,target:"_blank",rel:"noreferrer","data-native":!0},Object(r.h)("i",{class:"fas fa-share"})," ",Object(r.h)(h.c,{id:"story.share"},"Del")))))),gt>0&&Object(r.h)(t,null,Object(r.h)("div",{class:"mt-2"},Object(r.h)(y.a,{stores:this.props.stores,views:gt,object:a,type:"team",isTeamAdmin:tt,isAdmin:W,onTeamClick:i,onUserClick:u}))),Object(r.h)("div",{class:"mt-2"},L[a.id]&&Object(r.h)(O.a,{stores:this.props.stores,workout:a,inputRef:function(t){return e.inputRef[a.id]=t},inputRefObject:this.inputRef,col:"12",offset:"0",showAvatar:!0,extraClass:"px-0",callback:this.addCommentToFeed}),Object(r.h)(g.a,{stores:this.props.stores,workout:a,col:"12",offset:"0",compact:!1,callback:this.addCommentToFeed})))},s}(r.Component))||i;e.a=T}).call(this,s("hosL").Fragment)},"JWe/":function(t,e,s){"use strict";(function(t){function a(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,a)}return s}function o(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?a(Object(s),!0).forEach((function(e){n(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):a(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}function n(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}function i(t){switch(t.type){case 1:return"border-primary";case 2:return"border-danger";case 3:return"border-success";case 4:return"border-info";default:return"border-warning"}}function r(t){switch(t.type){case 1:return"fas fa-running";case 2:return"fas fa-flag-checkered";case 3:return"fas fa-hiking";case 4:return"fas fa-futbol";default:return"fas fa-hiking"}}var l,c=s("hosL"),d=s("Utv1"),h=s("/eY4"),u=s("cneo"),m=s("OhSV"),b=s("fh8t"),p=s.n(b),f=(s("UJvz"),s("sqi2")),g=s("/922"),O=s("s4FZ"),j=s("ZQlJ"),v=s("q/oJ"),y=s("gWxU"),w=s("Nanz"),k=s("+JSK"),x=s("vY+r"),S=s("nHdA"),C=s("irB3"),I=s("UwwE"),D=s("8Lgr"),T=s("QkTp"),P=s("ZOvn"),R=P.a.getMaxLoadIndex(),L={showAddComment:!1,viewImageIdx:{},likeWorkout:{}},A=Object(h.a)(l=function(e){function s(t){var s;return(s=e.call(this,t)||this).toggleDate=function(t){t.stopPropagation(),t.preventDefault(),s.setState({showDate:!s.state.showDate})},s.likeWorkout=function(){return new Promise((function(t,e){var a,o,n;return a=s.props.stores.workoutStore,(n=s.state.likeWorkout)[o=s.props.workout.id]=!0,s.setState({likeWorkout:n}),setTimeout((function(){var t=s.state.likeWorkout;delete t[o],s.setState({likeWorkout:t})}),1200),Promise.resolve(a.likeWorkout({id:o})).then((function(s){try{return s,t()}catch(t){return e(t)}}),e)}))},s.toggleAddComment=function(t){var e=t.target.parentElement.dataset.id||t.target.dataset.id;s.setState({showAddComment:!s.state.showAddComment},(function(){s.inputRef[e]&&s.inputRef[e].focus()}))},s.viewImage=function(t){var e=t.target.closest("img").dataset,a=s.state.viewImageIdx;a[e.id]=e.idx,s.setState({viewImageIdx:a})},s.shareLink=function(t){var e=t.target.closest("button").dataset;s.props.stores.appState.shareUrl({url:e.url,title:e.title,text:e.text})},s.onTeamClick=function(t,e){return t.preventDefault(),t.stopPropagation(),s.setState({showTeam:e}),!1},s.hideTeam=function(){s.setState({showTeam:null})},s.onUserClick=function(t){return t.preventDefault(),t.stopPropagation(),!1},s.onDogClick=function(t,e,a){return t.preventDefault(),t.stopPropagation(),s.setState({showDog:e,dogs:a}),!1},s.hideDog=function(){s.setState({showDog:null})},s.state=o({},L),s.updateTimer={},s.inputRef={},s}var a,n;return n=e,(a=s).prototype=Object.create(n.prototype),a.prototype.constructor=a,a.__proto__=n,s.prototype.render=function(){var e=this,s=this.state,a=s.showDate,n=s.showAddComment,l=s.likeWorkout,h=s.dogs,b=s.showTeam,L=s.showDog,A=this.props,E=A.workout,_=A.showDate,U=A.wrapperClasses,F=void 0===U?"col-12 col-sm-8 col-lg-6 offset-sm-2 offset-lg-3":U,z=A.wrapperClassesRow,M=void 0===z?"row":z,B=this.props.stores,N=B.userStore,K=B.appState,V=B.workoutStore,W=K.viewmode,Y=K.hasShareApi,q=N.user,J=N.dogs,Z=q.language,H=void 0===Z?"en":Z,G=N.findIntensity({code:E.intensity,language:H})||{},X=N.findTeam(E.team,!0)||{},Q=X.name,$=[];Q&&$.push(Q),E.teams&&E.teams.forEach((function(t){N.findTeam(t)&&$.push(N.findTeam(t))}));var tt=E.likes,et=void 0===tt?[]:tt,st=E.comments,at=void 0===st?[]:st,ot=E.likes&&E.likes.findIndex((function(t){return t.user===q.id}))>-1,nt=E.gpxInfo,it=E.mushers,rt=void 0===it?[]:it,lt=(void 0===nt?{}:nt).loadIndex,ct=void 0===lt?0:lt,dt=N.findEquipment({equipment:E.equipment,language:H}),ht=N.findEquipment({equipment:E.equipment,field:"icon"}),ut=[];rt.length>1&&rt.slice(1,10).map((function(t){var e=V.findPublicUser(t)||{};e.images&&e.images[0]&&ut.push(e.images[0])}));var mt,bt=V.findPublicUser(rt[0])||{};bt&&bt.images&&bt.images[0]?mt=bt.images[0]:X.image&&X.image.s3SmallLink?mt=X.image:X.images&&X.images[0]&&X.images[0].s3SmallLink?mt=X.images[0]:E.image&&E.image.s3SmallLink&&(mt=E.image);var pt=[];if(E.mapImage&&pt.push(o(o({},E.mapImage),{},{type:"map"})),E.images){var ft=Object(u.i)(E.images);pt.push.apply(pt,ft)}var gt;E&&E.gpxInfo&&E.gpxInfo.battegryLevelStart&&(gt=100*(E.gpxInfo.battegryLevelStart-E.gpxInfo.battegryLevelEnd));var Ot=P.a.getViews(E.statistics);return Object(c.h)(t,null,b&&Object(c.h)(v.a,null,Object(c.h)(y.default,{stores:this.props.stores,teamid:b,marginTop:"0px;",marginBottom:"0px;",back:this.hideTeam,hideTeam:this.hideTeam})),L&&Object(c.h)(v.a,null,Object(c.h)(w.default,{stores:this.props.stores,dogid:L,marginTop:"0px;",marginBottom:"0px;",back:this.hideDog,dogs:h})),Object(c.h)("div",{class:"w-100 mb-2"},Object(c.h)("div",{class:M},Object(c.h)("div",{class:F+" d-flex mb-0 position-relative"},Object(c.h)("div",{class:"text-center"},Object(c.h)("div",{class:"position-relative text-center border rounded-circle imageRounded "+i(E),style:(mt?'background-image: url("'+mt.s3SmallLink+'"); background-size: cover;':"")+" border-width: 3px !important;"},!mt&&Object(c.h)("i",{class:r(E)+" text-"+(G.class?G.class:"muted")+" mt-3",style:"font-size: 40px;"}),ut&&ut.map((function(e,s){return Object(c.h)(t,null,Object(c.h)("div",{class:"position-absolute rounded-circle imageRounded border imageRoundedThumb border-white",style:'\n                                            background-image: url("'+e.s3SmallLink+'");\n                                            background-size: cover;\n                                            bottom: -3px;\n                                            left: '+(10*s-5)+"px;\n                                        "}))}))),0!==E.temperature&&Object(c.h)(t,null,Object(c.h)("span",{class:"text-muted font-weight-light"},Object(c.h)(T.a,{stores:this.props.stores,value:E.temperature})))),Object(c.h)("div",{class:"flex-grow-1 pl-3",style:"line-height: 1.2em;"},Object(c.h)("span",{class:"float-right"},1===E.isLocked&&Object(c.h)("i",{class:"fas fa-lock text-danger ml-3"}),1===E.isInProgress&&Object(c.h)("div",{class:"spinner-grow text-success ml-3",role:"status"}),2===E.isInProgress&&Object(c.h)("i",{class:"fas fa-pause-circle text-warning ml-3"})),Object(c.h)("a",{class:"stretched-link",href:"/workouts/"+E.id},Object(c.h)("h5",{class:"my-0 mb-1",style:"line-height: 1.0em;"},E.name)),$&&$.length>0&&Object(c.h)("small",{class:"font-weight-lighter"},$.map((function(e,s){return Object(c.h)(t,null,s>0?", ":"",e)}))),Object(c.h)("br",null),Object(c.h)("small",{class:"text-muted"},E.date&&Object(c.h)("small",{onClick:this.toggleDate},_||a?d.a.formatDate(E.date,{locale:"no-NB",hour12:!1,hour:"2-digit",minute:"2-digit"}):d.a.formatDistance(E.date,new Date,{locale:"no-NB"})),Object(c.h)("span",{class:"badge badge-"+G.class+" ml-2"},G.name),ct>0&&Object(c.h)("span",{class:"ml-2 text-"+P.a.getLoadIndexColor(d.a.normalizeBetween(ct,0,R,0,100))},Object(c.h)("i",{class:"fas fa-hand-rock mr-1"}),Math.floor(d.a.normalizeBetween(ct,0,R,0,100))," - ",P.a.getLoadIndexText(d.a.normalizeBetween(ct,0,R,0,100))),Object(c.h)("br",null)),Object(c.h)("small",null,Object(c.h)("div",{class:"text-muted"},E.garminId>0&&Object(c.h)("div",{class:"float-left mr-2 text-center border rounded-circle imageRounded imageRoundedIcon",style:'background-image: url("./assets/garmin-connect.png");'}),E.stravaId>0&&Object(c.h)("div",{class:"float-left mr-2 text-center border rounded-circle imageRounded imageRoundedIcon",style:'background-image: url("./assets/strava-icon.png");'}),E.equipment>0&&Object(c.h)(t,null,Object(c.h)("i",{class:ht+" ml-2"})," ",dt),E.dogs>0&&Object(c.h)(t,null,Object(c.h)("i",{class:"fas fa-dog ml-2"})," ",E.dogs.length),E.track>0&&Object(c.h)(t,null,Object(c.h)("i",{class:"fas fa-map-marked text-"+(E.track>0?"success":"danger")+" ml-2"})),E.dogsLeft>0&&Object(c.h)(t,null,Object(c.h)("i",{class:"fas fa-crosshairs text-"+(E.dogsLeft&&E.dogsRight?"success":"danger")+" ml-2"})),E.sledWeight>0&&Object(c.h)(t,null,Object(c.h)("i",{class:"fas fa-sleigh ml-2"})," ",Object(c.h)(I.a,{stores:this.props.stores,value:E.sledWeight})),gt>0&&Object(c.h)("span",{class:"text-muted ml-2"},Object(c.h)("i",{class:"fas fa-battery-three-quarters"})," ",d.a.format(gt,1),"% ",Object(c.h)(m.c,{id:"workout.battery-used"},"used"))),["beta","advanced"].indexOf(W)>-1&&Object(c.h)("span",{class:"text-muted"},Object(c.h)("i",{class:"fas fa-balance-scale"})," ",d.a.format(E.kcalBurnedTotal)," ",Object(c.h)(m.c,{id:"workout.kcal"},"kcal"),Object(c.h)("i",{class:"fas fa-drumstick-bite ml-2"})," ",Object(c.h)(I.a,{stores:this.props.stores,value:E.kcalMeatGramsTotal/1e3}),Object(c.h)("i",{class:"fas fa-fish ml-2"})," ",Object(c.h)(I.a,{stores:this.props.stores,value:E.kcalSalmonGramsTotal/1e3}),Object(c.h)("i",{class:"fas fa-piggy-bank ml-2"})," ",Object(c.h)(I.a,{stores:this.props.stores,value:E.kcalFatGramsTotal/1e3}))))),Object(c.h)("div",{class:F+" position-relative mt-2"},Object(c.h)("strong",null,E.description)),Object(c.h)("div",{class:F+" position-relative"},Object(c.h)(p.a,{markdown:P.a.replaceImages(E.comment,E.images,H),markdownOpts:P.a.getMarkdownOptions()})),Object(c.h)("div",{class:F+" d-flex mb-0 position-relative"},Object(c.h)("div",{class:"container-fluid px-0"},Object(c.h)("div",{class:"row mt-1"},E.distanceKm>0&&Object(c.h)("div",{class:"col-3"},Object(c.h)("div",{class:"text-overflow"},Object(c.h)("small",null,Object(c.h)("i",{class:"fas fa-road"})," ",Object(c.h)(m.c,{id:"workout.calendar.distance"},"Distanse"))),Object(c.h)("div",{class:"text-overflow font-weight-light",style:"font-size: 1.2em;"},Object(c.h)(D.a,{stores:this.props.stores,value:E.distanceKm}))),E.elevation>0&&Object(c.h)("div",{class:"col-3"},Object(c.h)("div",{class:"text-overflow"},Object(c.h)("small",null,Object(c.h)("i",{class:"fas fa-mountain"})," ",Object(c.h)(m.c,{id:"workout.calendar.ascend"},"Høydemeter"))),Object(c.h)("div",{class:"text-overflow font-weight-light",style:"font-size: 1.2em;"},Object(c.h)(C.a,{stores:this.props.stores,value:E.elevation}))),E.duration>0&&Object(c.h)("div",{class:"col-3"},Object(c.h)("div",{class:"text-overflow"},Object(c.h)("small",null,Object(c.h)("i",{class:"fas fa-clock"})," ",Object(c.h)(m.c,{id:"workout.calendar.duration"},"Varighet"))),Object(c.h)("div",{class:"text-overflow font-weight-light",style:"font-size: 1.2em;"},d.a.secToHms(E.duration,!0))),E.speedAvg>0&&Object(c.h)("div",{class:"col-3"},Object(c.h)("div",{class:"text-overflow"},Object(c.h)("small",null,Object(c.h)("i",{class:"fas fa-tachometer-alt"})," ",Object(c.h)(m.c,{id:"workout.calendar.avg-speed"},"Snittfart"))),Object(c.h)("div",{class:"text-overflow font-weight-light",style:"font-size: 1.2em;"},E.gpxInfo&&E.gpxInfo.avgGpsMovingSpeed>0?Object(c.h)(t,null,Object(c.h)(S.a,{stores:this.props.stores,value:3.6*E.gpxInfo.avgGpsMovingSpeed})):Object(c.h)(t,null,Object(c.h)(S.a,{stores:this.props.stores,value:E.speedAvg}))))))),["beta","advanced","normal"].indexOf(W)>-1&&Object(c.h)("div",{class:""+F},Object(c.h)("div",{class:"container-fluid px-0 mt-1"},Object(c.h)("div",{class:"row"},Object(c.h)(O.a,{stores:this.props.stores,images:pt,id:E.id,dblClick:this.likeWorkout,likeRef:l})))),["beta","advanced","normal"].indexOf(W)>-1&&Object(c.h)(t,null,E.dogs&&E.dogs.length>0&&Object(c.h)("div",{class:"container-fluid px-0 mt-1"},Object(c.h)("div",{class:"row pt-2"},Object(c.h)(j.a,{stores:this.props.stores,dogs:E.dogs,allDogs:J,onDogClick:this.onDogClick}))),Object(c.h)("div",{class:"mt-2"},Object(c.h)(k.a,{stores:this.props.stores,likes:et,comments:at,type:"workout",onTeamClick:this.onTeamClick,onUserClick:this.onUserClick}))),["beta","advanced","normal"].indexOf(W)>-1&&Object(c.h)(t,null,Object(c.h)("div",{class:F+" mb-0 position-relative mt-2"},Object(c.h)("div",{class:"row"},Object(c.h)("div",{class:"col text-center"},Object(c.h)("button",{type:"button",class:"btn btn-sm btn-outline-"+(ot?"primary":"secondary")+" btn-lg btn-block "+(ot?"text-primary":""),onClick:this.likeWorkout},Object(c.h)("i",{class:(ot?"text-primary fas":"far")+" fa-thumbs-up"})," ",Object(c.h)(m.c,{id:"comments.like"},"Lik"))),Object(c.h)("div",{class:"col text-center"},Object(c.h)("button",{type:"button",class:"btn btn-sm btn-outline-secondary btn-lg btn-block","data-id":E.id,onClick:this.toggleAddComment},Object(c.h)("i",{class:"fas fa-comment"})," ",Object(c.h)(m.c,{id:"comments.comment-add"},"Kommentar"))),Y?Object(c.h)(t,null,Object(c.h)("div",{class:"col text-center"},Object(c.h)("button",{class:"btn btn-sm btn-outline-secondary btn-lg btn-block text-overflow",onClick:this.shareLink,"data-url":"https://themusher.app/share/workout/"+E.uuidv4,"data-title":"title: "+E.name},Object(c.h)("i",{class:"fas fa-share"})," ",Object(c.h)(m.c,{id:"workout.share"},"Del")))):Object(c.h)(t,null,Object(c.h)("div",{class:"col text-center"},Object(c.h)("a",{class:"btn btn-sm btn-outline-secondary btn-lg btn-block text-overflow",href:"https://themusher.app/share/workout/"+E.uuidv4,target:"_blank",rel:"noreferrer","data-native":!0},Object(c.h)("i",{class:"fas fa-share"})," ",Object(c.h)(m.c,{id:"workout.share"},"Del")))))),Object(c.h)("div",{class:F+" mt-2 mb-3"},n&&Object(c.h)(g.a,{stores:this.props.stores,workout:E,inputRef:function(t){return e.inputRef[E.id]=t},inputRefObject:this.inputRef,col:"12",offset:"0"}),Object(c.h)(f.a,{stores:this.props.stores,workout:E,col:"10",offset:"2",compact:!0})),Ot>0&&Object(c.h)(t,null,Object(c.h)("div",{class:"mt-2"},Object(c.h)(x.a,{stores:this.props.stores,views:Ot,object:E,type:"workout",isTeamAdmin:!0,isAdmin:!1,onTeamClick:this.onTeamClick,onUserClick:this.onUserClick})))))))},s}(c.Component))||l;e.a=A}).call(this,s("hosL").Fragment)},K5BL:function(t,e,s){"use strict";var a,o=s("hosL"),n=s("Utv1"),i=s("/eY4"),r=s("OhSV"),l=s("go65"),c=(s("ETxl"),s("ZOvn"),Object(i.a)(a=function(t){function e(){for(var e,s=arguments.length,a=new Array(s),o=0;o<s;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))||this).commentTrack=function(){return new Promise((function(t,s){var a,o,n,i,r,l;return n=void 0===(o=(a=e.props).callback)?function(){}:o,i=e.props.track,r=e.state.comment,Promise.resolve(e.props.stores.trackStore.commentReplyTrack({id:i.id,commentId:a.commentId,comment:void 0===r?"":r})).then((function(a){try{return(l=a)&&200===l.status&&(e.setState({comment:""}),n({track:i,response:l})),t()}catch(t){return s(t)}}),s)}))},e}var s,a;return a=t,(s=e).prototype=Object.create(a.prototype),s.prototype.constructor=s,s.__proto__=a,e.prototype.render=function(){var t=this.props.inputRef,e=this.state.comment,s=this.props.stores.userStore.user,a=void 0===s?{}:s,i=a.firstname?""+n.a.ucfirst(a.firstname,!0)+n.a.ucfirst(a.lastname,!0):""+n.a.ucfirst(a.email||"",!0),c=a.image||(a.images?a.images[0]:void 0);return Object(o.h)("div",{class:"w-100"},Object(o.h)("div",{class:"d-flex mb-0 position-relative w-100"},Object(o.h)("div",{class:"text-center border rounded-circle imageRounded imageRoundedThumb",style:(c?"background-image: url('"+c.s3SmallLink+"'); background-size: cover;":"")+" border-width: 3px !important;"},!c&&Object(o.h)("span",{class:"font-weight-lighter",style:"font-size: 15px;"},i)),Object(o.h)("div",{class:"col pl-3",style:"line-height: 1.2em;"},Object(o.h)("div",{class:"d-flex bd-highlight"},Object(o.h)("div",{class:"p-0 w-100 bd-highlight"},Object(o.h)("label",{class:"sr-only",for:"inlineFormInput"},Object(o.h)(r.c,{id:"comments.comment"},"Kommentar")),Object(o.h)("div",{class:"border rounded rounded-lg position-relative"},Object(o.h)(r.b,null,Object(o.h)("input",{class:"form-control-plaintext px-2",type:"text",placeholder:Object(o.h)(r.c,{id:"comments.write-comment"},"Skriv en kommentar..."),onInput:Object(l.a)(this,"comment"),value:e,ref:t})))),Object(o.h)("div",{class:"p-0 pl-2 flex-shrink-1 bd-highlight"},Object(o.h)("button",{type:"button",class:"btn btn-sm btn-primary mb-2",onClick:this.commentTrack},Object(o.h)("i",{class:"fas fa-paper-plane"})))))))},e}(o.Component))||a);e.a=c},KDoM:function(t,e,s){"use strict";(function(t){var a,o=s("hosL"),n=s("Utv1"),i=s("/eY4"),r=s("OhSV"),l=s("nHdA"),c=s("irB3"),d=s("UwwE"),h=s("8Lgr"),u=(s("QkTp"),s("ZOvn")),m=Object(i.a)(a=function(e){function s(){return e.apply(this,arguments)||this}var a,i;return i=e,(a=s).prototype=Object.create(i.prototype),a.prototype.constructor=a,a.__proto__=i,s.prototype.render=function(){var e=this.props.dog,s=this.props.stores,a=s.userStore,i=s.dogStore,m=a.user.language,b=void 0===m?"en":m,p=s.appState.viewmode,f=(new Date).getMonth()+1,g=(new Date).getFullYear(),O=this.props,j=O.month,v=O.year,y=void 0===v?g:v,w=parseInt((void 0===j?f:j)<8?y-1:y,10),k=i.findWorkoutSummary(e.id,w)||{},x=e.statuses?e.statuses.map((function(t){return a.findDogstatus({status:t,language:b})})):[],S=i.findVaccineStatuses(e.id),C=i.findVaccineLogStatuses(e.chipId),I=i.findHistoryStatuses(e.id),D=a.findDogstatus({status:e.status,language:b}),T=a.findDogposition({position:e.position,language:b}),P=[];a.findTeam(e.team)&&P.push(a.findTeam(e.team)),e.teams&&e.teams.forEach((function(t){a.findTeam(t)&&P.push(a.findTeam(t))}));var R=u.a.hasBirthday(e.birth),L=e.birth?Math.ceil(u.a.daysUntilNextBirthday(e.birth)):365,A=this.props.url,E=void 0===A?"/dogs/"+e.id:A;return Object(o.h)("div",{class:"w-100 mb-3"},Object(o.h)("div",{class:"row"},Object(o.h)("div",{class:"col-12 col-sm-8 col-lg-6 offset-sm-2 offset-lg-3 d-flex mb-0 position-relative"},Object(o.h)("div",{class:"text-center border rounded-circle imageRounded text-muted pt-2",style:e.image?'background-image: url("'+e.image.s3SmallLink+'"); background-size: cover;':""},!e.image&&Object(o.h)("span",{class:"font-weight-lighter",style:"font-size: 35px;"},n.a.ucfirst(e.name,!0))),Object(o.h)("div",{class:"flex-grow-1 pl-3 pr-2",style:"border-right: 4px solid "+a.findHarness(e.harness,"colorNonstop")+" !important; line-height: 1.2em;"},Object(o.h)("span",{class:"float-right"},T&&Object(o.h)("span",{class:"badge badge-"+(T.class||"primary")+" mr-3"},T.icon&&Object(o.h)("i",{class:T.icon})," ",T.name),L<7&&Object(o.h)(t,null,Object(o.h)("span",{class:"text-muted mr-2"},Object(o.h)("i",{class:"fas fa-birthday-cake"})," in ",L," days")),e.birth&&Object(o.h)("span",{class:"mr-2"},n.a.age(e.birth,e.deceased)),"female"===e.gender?Object(o.h)("i",{class:"fas fa-venus"}):Object(o.h)("i",{class:"fas fa-mars"})),Object(o.h)("a",{class:"stretched-link",href:E},Object(o.h)("h5",{class:"mb-1",style:"line-height: 1.0em;"},e.shortname||e.name," ",e.shortname&&""!==e.shortname&&Object(o.h)(t,null," - ",Object(o.h)("span",{class:"font-weight-lighter"},e.name)),R&&Object(o.h)(t,null,Object(o.h)("i",{class:"fas fa-birthday-cake ml-3"})))),Object(o.h)("div",null,P&&P.length>0&&Object(o.h)("small",{class:"font-weight-lighter"},P.map((function(e,s){return Object(o.h)(t,null,s>0?", ":"",e)}))),Object(o.h)("br",null)),Object(o.h)("small",{class:"text-muted"},e.history>0&&Object(o.h)("span",{class:"ml-0"},Object(o.h)("i",{class:"fas fa-file-signature"})," ",e.history.length),e.images>0&&Object(o.h)("span",{class:"ml-2"},Object(o.h)("i",{class:"fas fa-image"})," ",e.images.length),k&&k.distanceKm>0&&Object(o.h)("span",{class:"ml-2"},Object(o.h)("i",{class:"fas fa-road"})," ",Object(o.h)(h.a,{stores:this.props.stores,value:k.distanceKm})),k&&k.elevation>0&&Object(o.h)("span",{class:"ml-2"},Object(o.h)("i",{class:"fas fa-mountain"})," ",Object(o.h)(c.a,{stores:this.props.stores,value:k.elevation})),k&&k.duration>0&&Object(o.h)("span",{class:"ml-2"},Object(o.h)("i",{class:"fas fa-clock"})," ",n.a.secToHms(k.duration,!0)),k&&k.speedAvg>0&&Object(o.h)("span",{class:"ml-2"},Object(o.h)("i",{class:"fas fa-tachometer-alt"})," ",Object(o.h)(l.a,{stores:this.props.stores,value:k.speedAvg})),e.weight>0&&Object(o.h)(t,null,Object(o.h)("i",{class:"fas fa-balance-scale ml-2"})," ",Object(o.h)(d.a,{stores:this.props.stores,value:e.weight})),e.bodyScore>0&&Object(o.h)(t,null,Object(o.h)("i",{class:"fas fa-dog ml-2"})," ",n.a.format(e.bodyScore,1))),["beta","advanced","normal"].indexOf(p)>-1&&Object(o.h)(t,null,Object(o.h)("div",null,S&&S.map((function(t){return Object(o.h)("span",{class:"badge badge-success mr-2",title:n.a.isoDate(t.endDate,!1,!1,!0)},t.vaccineType,Object(o.h)("span",{class:"font-weight-light ml-3"},Object(o.h)("i",{class:"fas fa-calendar-check"})," ",n.a.isoDate(t.endDate,!1,!1,!0)))})),I&&I.map((function(t){return Object(o.h)("span",{class:"badge badge-warning mr-2",title:n.a.isoDate(t.endDate,!1,!1,!0)},t.title)})))),["beta","advanced"].indexOf(p)>-1&&Object(o.h)(t,null,e.positions&&e.positions.lead&&Object(o.h)("div",{class:""},e.positions.lead.distanceKm>0&&Object(o.h)("span",{class:"badge badge-secondary mr-2"},Object(o.h)("span",{class:"font-weight-lighter"},Object(o.h)(r.c,{id:"dogs.sort-lead"},"Lead"),":")," ",Object(o.h)(h.a,{stores:this.props.stores,value:e.positions.lead.distanceKm})),e.positions.point.distanceKm>0&&Object(o.h)("span",{class:"badge badge-secondary mr-2"},Object(o.h)("span",{class:"font-weight-lighter"},Object(o.h)(r.c,{id:"dogs.sort-point"},"Point"),":")," ",Object(o.h)(h.a,{stores:this.props.stores,value:e.positions.point.distanceKm})),e.positions.team.distanceKm>0&&Object(o.h)("span",{class:"badge badge-secondary mr-2"},Object(o.h)("span",{class:"font-weight-lighter"},Object(o.h)(r.c,{id:"dogs.sort-team"},"Team"),":")," ",Object(o.h)(h.a,{stores:this.props.stores,value:e.positions.team.distanceKm})),e.positions.wheel.distanceKm>0&&Object(o.h)("span",{class:"badge badge-secondary mr-2"},Object(o.h)("span",{class:"font-weight-lighter"},Object(o.h)(r.c,{id:"dogs.sort-wheel"},"Wheel"),":")," ",Object(o.h)(h.a,{stores:this.props.stores,value:e.positions.wheel.distanceKm})))),Object(o.h)("div",{class:"clearfix pb-0"},e.specialNeeds&&Object(o.h)("span",{class:"badge badge-warning ml-2 mt-1 float-right"},Object(o.h)("i",{class:"fas fa-exclamation-triangle"})," ",e.specialNeeds),D&&Object(o.h)("span",{class:"badge badge-"+D.class+" ml-2 mt-1 float-right"},D.icon&&Object(o.h)("i",{class:D.icon})," ",D.name),x&&x.map((function(e){return Object(o.h)(t,null,Object(o.h)("span",{class:"badge badge-"+e.class+" ml-2 mt-1 float-right"},e.icon&&Object(o.h)("i",{class:e.icon})," ",e.lang&&e.lang[b]?e.lang[b]:e.name))}))),C&&C.length>0&&Object(o.h)(t,null,Object(o.h)("div",{class:"mt-2"},C&&C.filter((function(t){return t.chipId===e.chipId})).map((function(t){return Object(o.h)("span",{class:"badge badge-"+(t.inKarens?"warning":"success")+" mr-2 mb-1"},Object(o.h)("i",{class:"fas fa-user-md"})," ",t.vaccineAgens.name)}))))))))},s}(o.Component))||a;e.a=m}).call(this,s("hosL").Fragment)},NMoA:function(t,e,s){"use strict";(function(t){function a(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,a)}return s}function o(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}function n(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}var i,r,l,c,d,h=s("hosL"),u=s("Utv1"),m=s("/eY4"),b=s("cneo"),p=s("OhSV"),f=s("fh8t"),g=s.n(f),O=s("go65"),j=s("Y3FI"),v=(s("X9Km"),s("1OK2"),s("B95u")),y=s("4QWe"),w=(s("NMoA"),s("s4FZ")),k=s("+JSK"),x=s("vY+r"),S=s("eQ6k"),C=s("ZOvn"),I={showAddComment:{},showTeamSetting:{},viewImageIdx:{},likeStory:{}},D=Object(m.a)(i=function(e){function s(t){var s;return(s=e.call(this,t)||this).saveStory=function(t){return new Promise((function(e,a){var o,n,i,r,l;return o=t.target.closest("button").dataset.id,n=s.state.storyBody,i=s.props.stores.storyStore,l=void 0===(r=s.props.callback)?function(){return!0}:r,Promise.resolve(i.saveField(parseInt(o,10),"body",n,!0)).then((function(){try{return i.publicFeedUpdate(parseInt(o,10),"body",n),s.setState({storyBody:"",storyType:0}),l(),e()}catch(t){return a(t)}}),a)}))},s.saveStoryField=function(t){return new Promise((function(e){var a=s.props.story.id,o=t.target,n=o.value,i=o.name;return clearTimeout(s.updateTimer[i]),s.updateTimer[i]=setTimeout((function(){return new Promise((function(t){return s.doUpdateField(a,i,n),t()}))}),1e3),e()}))},s.updateTimer={},s}n(s,e);var a=s.prototype;return a.doUpdateField=function(t,e,s){return new Promise(function(a,o){var n;return n=this.props.stores.storyStore,Promise.resolve(n.saveField(parseInt(t,10),e,s,!0)).then((function(){try{return n.publicFeedUpdate(parseInt(t,10),e,s),a()}catch(t){return o(t)}}),o)}.bind(this))},a.render=function(){var e=this.state,s=e.storyBody,a=e.storyType,o=this.props.stores.userStore.isAdmin,n=this.props.story;return Object(h.h)(t,null,Object(h.h)("div",{class:"d-flex bd-highlight"},Object(h.h)("div",{class:"p-0 w-100 bd-highlight"},Object(h.h)("label",{class:"sr-only",for:"inlineFormInput"},Object(h.h)(p.c,{id:"comments.comment"},"Kommentar")),Object(h.h)("div",{class:"border rounded rounded-lg position-relative"},Object(h.h)(p.b,null,Object(h.h)("textarea",{class:"form-control-plaintext px-2",type:"text",placeholder:Object(h.h)(p.c,{id:"comments.write-comment"},"Skriv en kommentar..."),onInput:Object(O.a)(this,"storyBody"),onFocus:C.a.resizeTextarea,style:"height: 2.3em;",value:s||n.body}))),Object(h.h)("div",{class:"position-relative mt-3"},o&&Object(h.h)(t,null,Object(h.h)("div",{class:"col-12 text-center mt-2"},Object(h.h)("div",{class:"form-group"},Object(h.h)("small",null,Object(h.h)("label",null,"Pinned to top:"),Object(h.h)("input",{type:"checkbox",id:n.id,name:"pinned",onInput:this.saveStoryField,value:n.pinned?0:1,checked:n.pinned?1:0}))))),o&&Object(h.h)(t,null,Object(h.h)("label",null,Object(h.h)(p.c,{id:"story.type"},"Type")),Object(h.h)("div",{class:"form-group"},Object(h.h)("small",null,Object(h.h)("select",{class:"custom-select custom-select-sm",id:n.id,name:"type",onInput:this.saveStoryField,value:a||n.type},Object(h.h)("option",{value:""},"-- ",Object(h.h)(p.c,{id:"story.type-choose"},"Velg type")," --"),Object(h.h)("option",{value:1,selected:1==n.type?"selected":""},"✍️ ",Object(h.h)(p.c,{id:"story.type-regular"},"Vanlig")),Object(h.h)("option",{value:2,selected:2==n.type?"selected":""},"🚀 ",Object(h.h)(p.c,{id:"story.type-ad"},"Annonse")),Object(h.h)("option",{value:3,selected:3==n.type?"selected":""},"📄 ",Object(h.h)(p.c,{id:"story.type-article"},"Artikkel")))))),n.type>=2&&Object(h.h)(t,null,Object(h.h)("label",null,Object(h.h)(p.c,{id:"story.url-text"},"URL text")),Object(h.h)("div",{class:"form-group"},Object(h.h)("small",null,Object(h.h)("input",{class:"form-control",type:"text",name:"urlText",onInput:this.saveStoryField,value:n.urlText}))),Object(h.h)("label",null,Object(h.h)(p.c,{id:"story.url"},"URL")),Object(h.h)("div",{class:"form-group"},Object(h.h)("small",null,Object(h.h)("input",{class:"form-control",type:"text",name:"url",onInput:this.saveStoryField,value:n.url})))),2===n.type&&Object(h.h)(t,null,Object(h.h)("label",null,Object(h.h)(p.c,{id:"story.code"},"Code")),Object(h.h)("div",{class:"form-group"},Object(h.h)("small",null,Object(h.h)("input",{class:"form-control",type:"text",name:"code",onInput:this.saveStoryField,value:n.code}))),Object(h.h)("label",null,Object(h.h)(p.c,{id:"story.country"},"Country")),Object(h.h)("div",{class:"form-group"},Object(h.h)("small",null,Object(h.h)("input",{class:"form-control",type:"text",name:"country",onInput:this.saveStoryField,value:n.country}))),Object(h.h)("label",null,Object(h.h)(p.c,{id:"story.region"},"Region")),Object(h.h)("div",{class:"form-group"},Object(h.h)("small",null,Object(h.h)("input",{class:"form-control",type:"text",name:"region",onInput:this.saveStoryField,value:n.region}))),Object(h.h)("label",null,Object(h.h)(p.c,{id:"story.currency"},"Currency")),Object(h.h)("div",{class:"form-group"},Object(h.h)("small",null,Object(h.h)("input",{class:"form-control",type:"text",name:"currency",onInput:this.saveStoryField,value:n.currency}))),Object(h.h)("label",null,Object(h.h)(p.c,{id:"story.price"},"Price")),Object(h.h)("div",{class:"form-group"},Object(h.h)("small",null,Object(h.h)("input",{class:"form-control",type:"text",name:"price",onInput:this.saveStoryField,value:n.price})))))),Object(h.h)("div",{class:"p-0 pl-2 flex-shrink-1 bd-highlight"},Object(h.h)("button",{type:"button",class:"btn btn-primary mb-2",onClick:this.saveStory,"data-id":n.id},Object(h.h)("i",{class:"fas fa-paper-plane"})))))},s}(h.Component))||i,T=Object(m.a)(r=function(e){function s(t){var s;return(s=e.call(this,t)||this).viewImage=function(t){var e=t.target.closest("img").dataset,a=s.state.viewImageIdx;a[e.id]=e.idx,s.setState({viewImageIdx:a})},s.showStoryDetail=function(t){if("a"===t.target.localName)return!1;var e=t.target.closest("#storyDetail").dataset.id;e&&Object(j.route)("/stories/"+e)},s.translate=function(t){return new Promise((function(e,a){var o;return t.preventDefault(),t.stopPropagation(),o=s.props.stores,Promise.resolve(o.storyStore.translate({story:s.props.story,user:o.userStore.user})).then((function(t){try{return s.setState({showOriginal:0,translatedText:t}),e()}catch(t){return a(t)}}),a)}))},s.showOriginal=function(t){t.preventDefault(),t.stopPropagation(),s.setState({showOriginal:1})},s.state={viewImageIdx:{}},s}return n(s,e),s.prototype.render=function(){var e=this.state,s=e.showOriginal,a=e.translatedText,o=this.props.stores,n=this.props,i=n.story,r=n.likeStory,l=n.likeRef,c=o.userStore.user.language,d=void 0===c?"en":c,u=[];if(i.images){var m=Object(b.i)(i.images);u.push.apply(u,m)}var f=C.a.getTranslation({object:i,targetLang:d,field:"body"})||a,O=f||i.body;return s&&(O=i.body),Object(h.h)(t,null,Object(h.h)("div",{class:"container-fluid px-0 mt-1"},Object(h.h)("div",{class:"row"},Object(h.h)(w.a,{stores:this.props.stores,images:u,id:i.id,dblClick:r,likeRef:l}))),Object(h.h)("div",{class:"row mt-2"},Object(h.h)("div",{class:"clearfix col-12 overflow-hidden",style:i.offline?"text-decoration: line-through;":""},Object(h.h)("div",{id:"storyDetail",onClick:this.showStoryDetail,"data-id":i.id},Object(h.h)(g.a,{markdown:C.a.replaceImages(O,i.images,d),markdownOpts:C.a.getMarkdownOptions()}),i.language!==d&&Object(h.h)(t,null,!s&&f?Object(h.h)(t,null,Object(h.h)("button",{type:"button",class:"btn btn-sm btn-link text-muted",onClick:this.showOriginal},Object(h.h)("i",{class:"fas fa-cog"}),"  ",Object(h.h)(p.c,{id:"home.translate-show-original"},"Show original"))):Object(h.h)(t,null,Object(h.h)("button",{type:"button",class:"btn btn-sm btn-link text-muted",onClick:this.translate},Object(h.h)("i",{class:"fas fa-cog"})," ",Object(h.h)(p.c,{id:"home.translate-to"},"See translation"))))))))},s}(h.Component))||r,P=Object(m.a)(l=function(e){function s(t){var s;return(s=e.call(this,t)||this).viewImage=function(t){var e=t.target.closest("img").dataset,a=s.state.viewImageIdx;a[e.id]=e.idx,s.setState({viewImageIdx:a})},s.showStoryDetail=function(t){if("a"===t.target.localName)return!1;var e=t.target.closest("#storyDetail").dataset.id;e&&Object(j.route)("/stories/"+e)},s.translate=function(t){return new Promise((function(e,a){var o,n,i,r;return t.preventDefault(),t.stopPropagation(),o=s.props.story,i=(n=s.props.stores).storyStore,r=n.userStore.user,s.setState({showOriginal:0}),Promise.resolve(i.translate({story:o,user:r})).then((function(){try{return e()}catch(t){return a(t)}}),a)}))},s.showOriginal=function(t){t.preventDefault(),t.stopPropagation(),s.setState({showOriginal:1})},s.getTranslation=function(){var t=s.props.stores,e=t.userStore,a=e.user.language;C.a.getTranslation({object:s.props.story,targetLang:void 0===a?"en":a,field:"body"})&&s.setState({showOriginal:0})},s.state={viewImageIdx:{}},s}n(s,e);var a=s.prototype;return a.componentWillMount=function(){this.getTranslation()},a.render=function(){var e=this.state,s=e.showOriginal,a=this.props.stores,o=this.props,n=o.story,i=o.likeStory,r=o.likeRef,l=a.userStore.user.language,c=void 0===l?"en":l,d=[];if(n.images){var m=Object(b.i)(n.images);d.push.apply(d,m)}var f=C.a.getTranslation({object:n,targetLang:c,field:"body"}),O=f||n.body;return s&&(O=n.body),Object(h.h)(t,null,Object(h.h)("div",{class:"container-fluid px-0 mt-1"},Object(h.h)("div",{class:"row"},Object(h.h)(w.a,{stores:this.props.stores,images:d,id:n.id,dblClick:i,likeRef:r}))),Object(h.h)("div",{class:"row mt-2"},Object(h.h)("div",{class:"clearfix col-12 overflow-hidden",style:n.offline?"text-decoration: line-through;":""},Object(h.h)("div",{id:"storyDetail","data-id":n.id},Object(h.h)(g.a,{markdown:C.a.replaceImages(O,n.images,c),markdownOpts:C.a.getMarkdownOptions()}),n.language!==c&&Object(h.h)(t,null,!s&&f?Object(h.h)(t,null,Object(h.h)("button",{type:"button",class:"btn btn-sm btn-link",onClick:this.showOriginal},Object(h.h)("i",{class:"fas fa-cog"}),"  ",Object(h.h)(p.c,{id:"home.translate-show-original"},"Show original"))):Object(h.h)(t,null,Object(h.h)("button",{type:"button",class:"btn btn-sm btn-link",onClick:this.translate},Object(h.h)("i",{class:"fas fa-cog"})," ",Object(h.h)(p.c,{id:"home.translate-to"},"See translation")))))),!!(n.url||n.code||n.price>0)&&Object(h.h)(t,null,Object(h.h)("div",{class:"clearfix col-12  py-2",style:n.offline?"text-decoration: line-through;":""},Object(h.h)("div",{class:"row"},n.url&&Object(h.h)(t,null,Object(h.h)("div",{class:"col-12 text-left",style:"font-size: 1.0em;"},Object(h.h)("a",{href:C.a.asUrl(n.url),target:"_blank",rel:"noreferrer"},Object(h.h)("i",{class:"fas fa-link mr-2"}),n.urlText?Object(h.h)(t,null,n.urlText):Object(h.h)(t,null,Object(h.h)(p.c,{id:"story.ad-url-readmore"},"Les mer..."))))),n.code&&Object(h.h)(t,null,Object(h.h)("div",{class:"col text-left",style:"font-size: 1.2em;"},Object(h.h)("nobr",null,Object(h.h)("span",{class:"font-weight-lighter"},Object(h.h)(p.c,{id:"story.ad-campaign-code"},"Kampanjekode"),":")," ",n.code))),n.price>0&&Object(h.h)(t,null,Object(h.h)("div",{class:"col text-right",style:"font-size: 1.2em;"},Object(h.h)("nobr",null,n.currencty&&Object(h.h)("span",{class:"font-weight-lighter"},n.currency)," ",u.a.format(n.price,2)))))))))},s}(h.Component))||l,R=Object(m.a)(c=function(e){function s(t){var s;return(s=e.call(this,t)||this).viewImage=function(t){var e=t.target.closest("img").dataset,a=s.state.viewImageIdx;a[e.id]=e.idx,s.setState({viewImageIdx:a})},s.showStoryDetail=function(t){if("a"===t.target.localName)return!1;var e=t.target.closest("#storyDetail").dataset.id;e&&Object(j.route)("/stories/"+e)},s.translate=function(t){return new Promise((function(e,a){var o,n,i,r;return t.preventDefault(),t.stopPropagation(),o=s.props.story,i=(n=s.props.stores).storyStore,r=n.userStore.user,s.setState({showOriginal:0}),Promise.resolve(i.translate({story:o,user:r})).then((function(){try{return e()}catch(t){return a(t)}}),a)}))},s.showOriginal=function(t){t.preventDefault(),t.stopPropagation(),s.setState({showOriginal:1})},s.getTranslation=function(){var t=s.props.stores,e=t.userStore,a=e.user.language;C.a.getTranslation({object:s.props.story,targetLang:void 0===a?"en":a,field:"body"})&&s.setState({showOriginal:0})},s.state={viewImageIdx:{}},s}n(s,e);var a=s.prototype;return a.componentWillMount=function(){this.getTranslation()},a.render=function(){var e=this.state,s=e.showOriginal,a=this.props.stores,o=this.props,n=o.story,i=o.likeStory,r=o.likeRef,l=a.userStore.user.language,c=void 0===l?"en":l,d=[];if(n.images){var u=Object(b.i)(n.images);d.push.apply(d,u)}var m=C.a.getTranslation({object:n,targetLang:c,field:"body"}),f=m||n.body;return s&&(f=n.body),Object(h.h)(t,null,Object(h.h)("div",{class:"container-fluid px-0 mt-1"},Object(h.h)("div",{class:"row"},Object(h.h)(w.a,{stores:this.props.stores,images:d,id:n.id,dblClick:i,likeRef:r}))),Object(h.h)("div",{class:"row mt-2"},Object(h.h)("div",{class:"clearfix col-12 overflow-hidden",style:n.offline?"text-decoration: line-through;":""},Object(h.h)("div",{id:"storyDetail",onClick:this.showStoryDetail,"data-id":n.id},Object(h.h)(g.a,{markdown:C.a.replaceImages(f,n.images,c),markdownOpts:C.a.getMarkdownOptions()}),n.language!==c&&Object(h.h)(t,null,!s&&m?Object(h.h)(t,null,Object(h.h)("button",{type:"button",class:"btn btn-sm btn-link",onClick:this.showOriginal},Object(h.h)("i",{class:"fas fa-cog"}),"  ",Object(h.h)(p.c,{id:"home.translate-show-original"},"Show original"))):Object(h.h)(t,null,Object(h.h)("button",{type:"button",class:"btn btn-sm btn-link",onClick:this.translate},Object(h.h)("i",{class:"fas fa-cog"})," ",Object(h.h)(p.c,{id:"home.translate-to"},"See translation")))))),!!(n.url||n.code||n.price)&&Object(h.h)(t,null,Object(h.h)("div",{class:"clearfix col-12  py-2",style:n.offline?"text-decoration: line-through;":""},Object(h.h)("div",{class:"row"},n.url&&Object(h.h)(t,null,Object(h.h)("div",{class:"col-12 text-left",style:"font-size: 1.0em;"},Object(h.h)("a",{href:C.a.asUrl(n.url),target:"_blank",rel:"noreferrer"},Object(h.h)("i",{class:"fas fa-link mr-2"}),n.urlText?Object(h.h)(t,null,n.urlText):Object(h.h)(t,null,Object(h.h)(p.c,{id:"story.ad-url-readmore"},"Les mer..."))))))))))},s}(h.Component))||c,L=Object(m.a)(d=function(e){function s(t){var s;return(s=e.call(this,t)||this).toggleDate=function(t){t.stopPropagation(),t.preventDefault(),s.setState({showDate:!s.state.showDate})},s.likeStory=function(){return new Promise((function(t,e){var a,o,n,i;return o=s.props.stores.storyStore,(n=s.state.likeStory)[a=s.props.story.id]=!0,i=Object.keys(n),s.setState({likeStory:n,likeIds:i}),setTimeout((function(){var t=s.state.likeStory;delete t[a];var e=Object.keys(t);s.setState({likeStory:t,likeIds:e})}),1200),Promise.resolve(o.likeStory({id:a})).then((function(s){try{return s,t()}catch(t){return e(t)}}),e)}))},s.toggleAddComment=function(t){var e=t.target.closest("button").dataset.id,a=s.state.showAddComment;a[e]?delete a[e]:a[e]=!0,s.setState({showAddComment:a},(function(){s.inputRef[e]&&s.inputRef[e].focus()}))},s.closeAllAddComments=function(){s.setState({showAddComment:{}})},s.toggleShowTeamSetting=function(t){var e=t.target.closest("button").dataset.id,a=s.state.showTeamSetting;a[e]?delete a[e]:a[e]=!0,s.setState({showTeamSetting:a})},s.viewImage=function(t){var e=t.target.closest("img").dataset,a=s.state.viewImageIdx;a[e.id]=e.idx,s.setState({viewImageIdx:a})},s.toggleMenu=function(t){var e=t.target.closest("i").dataset.id,a=s.state.showMenu,o=void 0===a?{}:a;o[e]=!o[e],s.setState({showDeleteStory:{},showEdit:{},showMenu:o})},s.toggleEdit=function(t){var e=t.target.closest("button").dataset.id,a=s.state.showEdit,o=void 0===a?{}:a;o[e]=!o[e],s.setState({showDeleteStory:{},showEdit:o,showMenu:{}})},s.toggleDeleteStory=function(t){var e=t.target.closest("button").dataset.id,a=s.state.showDeleteStory,o=void 0===a?{}:a;o[e]=!o[e],s.setState({showDeleteStory:o,showEdit:{},showMenu:{}})},s.reportStory=function(t){return new Promise((function(e,a){var o;return o=t.target.closest("button").dataset.id,Promise.resolve(s.props.stores.storyStore.reportStory({id:o})).then((function(){try{return s.setState({showEdit:{},showMenu:{}}),e()}catch(t){return a(t)}}),a)}))},s.adminRemoveStory=function(t){return new Promise((function(e,a){var o;return o=t.target.closest("button").dataset.id,Promise.resolve(s.props.stores.storyStore.adminHideStory({id:o})).then((function(){try{return s.setState({showEdit:{},showMenu:{}}),e()}catch(t){return a(t)}}),a)}))},s.deleteStory=function(t){return new Promise((function(e,a){var o,n;return o=t.target.closest("button").dataset.id,n=s.props.stores.storyStore,Promise.resolve(n.saveField(parseInt(o,10),"offline",1,!0)).then((function(){try{return n.publicFeedUpdate(parseInt(o,10),"offline",1),s.setState({storyBody:"",showDeleteStory:{},showEdit:{},showMenu:{}}),e()}catch(t){return a(t)}}),a)}))},s.doneEdit=function(){s.setState({storyBody:"",showDeleteStory:{},showEdit:{},showMenu:{}})},s.showStoryDetail=function(t){if("a"===t.target.localName)return!1;var e=t.target.closest("#storyDetail").dataset.id;e&&Object(j.route)("/stories/"+e)},s.shareLink=function(t){var e=t.target.closest("button").dataset;s.props.stores.appState.shareUrl({url:e.url,title:e.title,text:e.text})},s.state=function(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?a(Object(s),!0).forEach((function(e){o(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):a(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}({},I),s.inputRef={},s}n(s,e);var i=s.prototype;return i.loadStoriesPublicFeed=function(t){return new Promise(function(e,s){return void 0===t&&(t=this.props),Promise.resolve(t.stores.storyStore.loadPublicFeed({hashtag:t.hashtag})).then((function(){try{return e()}catch(t){return s(t)}}),s)}.bind(this))},i.render=function(){var e,s,a,o,n=this,i=this.state,r=i.showAddComment,l=i.showDate,c=i.showMenu,d=void 0===c?{}:c,m=i.showEdit,b=void 0===m?{}:m,f=i.showDeleteStory,g=void 0===f?{}:f,O=i.showTeamSetting,j=i.likeStory,w=i.likeIds,I=this.props,L=I.story,A=I.showAllComments,E=I.onTeamClick,_=void 0===E?function(){}:E,U=I.onUserClick,F=void 0===U?function(){}:U,z=this.props.stores,M=z.userStore,B=z.storyStore,N=z.appState,K=M.user,V=void 0===K?{}:K,W=M.isAdmin,Y=N.hasShareApi,q=B.findPublicTeam(L.team)||{},J=B.findPublicUser(L.user)||{},Z=C.a.getImage({user:J,team:q,priority:"user",object:L}),H=!(!q||!q.members)&&q.members.some((function(t){return t===V.id}));q&&q.name?(e=C.a.displayNameShort(q),s=C.a.displayName(q),a=C.a.displayName(J),J.settings&&V.uuidv4!==J.uuidv4&&(o=J.settings.hideProfile?null:"/inbox/"+J.uuidv4)):J&&J.id&&(e=C.a.displayNameShort(J),s=C.a.displayName(J));var G=L.likes,X=L.comments,Q=L.reports,$=void 0===Q?[]:Q,tt=L.likes&&L.likes.findIndex((function(t){return t.user===V.id}))>-1,et=q.followers?q.followers.length:0,st=q.members&&q.members.indexOf(V.id)>-1,at=q.followers&&q.followers.indexOf(V.id)>-1,ot=q.followRequests&&q.followRequests.findIndex((function(t){return t.id===V.id}))>-1,nt=L.currentLocationGeocode,it=void 0===nt?{}:nt,rt=C.a.getViews(L.statistics),lt=C.a.getAdminData(L.statistics);return Object(h.h)(t,null,W||V.id===J.id?Object(h.h)(t,null,Object(h.h)("span",{class:"float-right font-weight-lighter text-muted"},Object(h.h)("i",{class:"fas fa-ellipsis-h",onClick:this.toggleMenu,"data-id":L.id}))):Object(h.h)(t,null,!st&&!at&&!ot&&q.public>0&&Object(h.h)("span",{class:"float-right"},Object(h.h)(S.a,{stores:this.props.stores,team:q,buttonOnly:!0,simple:!0,classNames:"btn btn-link text-primary"}))),d[L.id]&&Object(h.h)(t,null,Object(h.h)("div",{class:"position-absolute bg-light p-2 border rounded rounded-lg shadow-sm",style:"top: 30px; right: 10px; width: 60%; z-index: 999999;"},V.id===J.id?Object(h.h)(t,null,Object(h.h)("button",{class:"btn btn-link btn-block text-left",onClick:this.toggleEdit,"data-id":L.id},Object(h.h)("i",{class:"fas fa-edit"})," Edit"),Object(h.h)("hr",null),Object(h.h)("button",{class:"btn btn-link btn-block text-left text-danger",onClick:this.toggleDeleteStory,"data-id":L.id},Object(h.h)("i",{class:"fas fa-trash-alt"})," Delete")):Object(h.h)(t,null,Object(h.h)("button",{class:"btn btn-link btn-block text-left",onClick:this.reportStory,"data-id":L.id},Object(h.h)("i",{class:"fas fa-flag"})," Report"),W&&Object(h.h)(t,null,Object(h.h)("hr",null),Object(h.h)("button",{class:"btn btn-link btn-block text-left text-danger",onClick:this.adminRemoveStory,"data-id":L.id},Object(h.h)("i",{class:"fas fa-eraser"})," Remove from feed"))))),Object(h.h)("div",{class:"d-flex position-relative"},Object(h.h)("div",{class:"position-relative text-center border rounded-circle imageRounded imageRoundedMedium",style:Z?'background-image: url("'+Z+'"); background-size: cover;':""},!Z&&Object(h.h)("div",{class:"text-muted",style:"font-size: 20px; padding-top: 3px;"},e)),Object(h.h)("div",{class:"flex-grow-1 pl-3 text-overflow",style:"line-height: 1.2em;"},Object(h.h)("h5",{class:"mb-1 position-relative",style:"line-height: 1.0em; "+(L.offline?"text-decoration: line-through;":"")},q.public?Object(h.h)(t,null,Object(h.h)("a",{href:"/teams/public/"+q.uuidv4,onClick:function(t){return _(t,q.uuidv4)},class:"stretched-link"},s)):Object(h.h)(t,null,s),st&&!q.public&&Object(h.h)("button",{type:"button",class:"btn btn-sm btn-link text-muted","data-id":L.id,onClick:this.toggleShowTeamSetting},Object(h.h)("i",{class:"fas fa-exclamation-triangle"}))),Object(h.h)("div",{class:"mb-2",style:L.offline?"text-decoration: line-through;":""},L.pinned&&Object(h.h)(t,null,Object(h.h)("small",{class:"text-muted mr-2"},Object(h.h)("i",{class:"fas fa-thumbtack"}))),2===L.type?Object(h.h)(t,null,Object(h.h)("small",{class:"text-muted"},Object(h.h)(p.c,{id:"story.sponsored"},"Sponsored")," -")):Object(h.h)(t,null,L.date&&Object(h.h)("small",{class:"text-muted",onClick:this.toggleDate},l?u.a.formatDate(L.date,{locale:"no-NB",hour12:!1,hour:"2-digit",minute:"2-digit"}):u.a.formatDistance(L.date,new Date,{locale:"no-NB"}))),1===L.public?Object(h.h)(t,null,Object(h.h)("small",{class:"ml-2 text-muted"},Object(h.h)("i",{class:"fas fa-globe-europe"}))):Object(h.h)(t,null,Object(h.h)("small",{class:"ml-2 text-muted"},Object(h.h)("i",{class:"fas fa-users"})," (",u.a.format(et),")")),a&&Object(h.h)(t,null,Object(h.h)("small",{class:"ml-2 text-muted"},o?Object(h.h)(t,null,Object(h.h)("i",{class:"fas fa-user"})," ",Object(h.h)("a",{href:o},a)):Object(h.h)(t,null,Object(h.h)("i",{class:"fas fa-user"})," ",a))),it&&it.formattedCounty&&Object(h.h)(t,null,Object(h.h)("small",{class:"ml-2 text-muted"},Object(h.h)("i",{class:"fas fa-map-marker-alt"})," ",it.formattedCounty))),W&&Object(h.h)("div",{class:"d-flex flex-row flex-nowrap bg-light border-top border-bottom py-2",style:"overflow: auto;"},Object(h.h)("small",{class:"text-muted mr-2"},"Adm:"),$&&$.length>0&&Object(h.h)(t,null,Object(h.h)("small",{class:"text-danger mr-2"},Object(h.h)("i",{class:"fas fa-flag"})," ",$.length)),it&&it.formatted_address&&Object(h.h)(t,null,Object(h.h)("small",{class:"text-muted"},Object(h.h)("i",{class:"fas fa-map-marker-alt"})," ",it.formatted_address)),J.deviceInfo&&Object(h.h)(t,null,Object(h.h)("span",{class:"badge badge-secondary ml-2 float-right font-weight-light"},["platform","manufacturer","model"].map((function(e){return Object(h.h)(t,null,Object(h.h)("span",{class:"ml-2 text-white"},J.deviceInfo[e]))})))),lt&&Object(h.h)(t,null,Object(h.h)("small",{class:"ml-2 text-muted"},"V: ",lt.count),Object(h.h)("small",{class:"ml-2 text-muted"},"R: ",lt.ranking," ",u.a.isNumber(lt.rankingTrend)&&Object(h.h)(t,null,Object(h.h)("i",{class:C.a.getClassForTrend(lt.rankingTrend)}))),Object(h.h)("small",{class:"ml-2 text-muted"},"D: ",u.a.format(lt.durationAvg/1e3,1),"s ",u.a.isNumber(lt.durationAvgTrend)&&Object(h.h)(t,null,Object(h.h)("i",{class:C.a.getClassForTrend(lt.durationAvgTrend)}))),L.statisticsCurrent&&L.statisticsCurrent.totalInteractions>0&&Object(h.h)("small",{class:"ml-2 text-muted"},"S: ",u.a.format(L.statisticsCurrent.totalInteractions,0)),L.shadowTags&&L.shadowTags.map((function(e){return Object(h.h)(t,null,Object(h.h)("span",{class:"badge badge-secondary ml-2 float-right font-weight-light"},e))})))))),Object(h.h)("div",{class:"row mt-2"},Object(h.h)("div",{class:"clearfix col-12",style:L.offline?"text-decoration: line-through;":""},b[L.id]&&Object(h.h)(t,null,Object(h.h)(D,{stores:this.props.stores,story:L,key:"story-edit-"+L.id,callback:this.doneEdit})),g[L.id]&&Object(h.h)("div",{class:"clearfix mt-3 mb-3"},Object(h.h)("button",{class:"btn btn-danger float-left",onClick:this.deleteStory,"data-id":L.id},Object(h.h)("i",{class:"fas fa-trash-alt"})," Delete"),Object(h.h)("button",{class:"btn btn-secondary float-right",onClick:this.toggleDeleteStory,"data-id":L.id},Object(h.h)("i",{class:"fas fa-times-circle"})," Cancel")))),(!L.type||1==L.type)&&Object(h.h)(T,{stores:this.props.stores,story:L,key:"story-regular-view-"+L.id,likeStory:this.likeStory,likeRef:j,keys:w}),2==L.type&&Object(h.h)(P,{stores:this.props.stores,story:L,key:"story-ad-view-"+L.id,likeStory:this.likeStory,likeRef:j,keys:w}),3==L.type&&Object(h.h)(R,{stores:this.props.stores,story:L,key:"story-article-view-"+L.id,likeStory:this.likeStory,likeRef:j,keys:w}),Object(h.h)("div",{class:"d-flex justify-content-between mt-2"},Object(h.h)("div",{class:"mr-2"},Object(h.h)(k.a,{stores:this.props.stores,likes:G,comments:X,type:"story",onTeamClick:_,onUserClick:F})),rt>0&&Object(h.h)(t,null,Object(h.h)("div",null,Object(h.h)(x.a,{stores:this.props.stores,views:rt,object:L,type:"story",isTeamAdmin:H,isAdmin:W,onTeamClick:_,onUserClick:F})))),O[L.id]&&Object(h.h)(t,null,Object(h.h)("small",null,Object(h.h)("div",{class:"alert alert-info",role:"alert"},Object(h.h)("span",{class:"display-4 float-left"},Object(h.h)("i",{class:"fas fa-exclamation-triangle mr-3 mb-3"})),Object(h.h)("p",null,Object(h.h)(p.c,{id:"story.alert-text-1"},"Your team is not visible and it's not possible to request friendship with your team.")),Object(h.h)("p",null,Object(h.h)(p.c,{id:"story.alert-text-2"},"If you want to make your team visible so other can request to follow your team, you can find the setting here:")),Object(h.h)("p",null,Object(h.h)("a",{href:"/teams/edit/"+q.id},Object(h.h)(p.c,{id:"story.alert-text-3"},"Edit team")))))),Object(h.h)("div",null,Object(h.h)("div",{class:"row"},Object(h.h)("div",{class:"col text-center"},Object(h.h)("button",{type:"button",class:"storyImage btn btn-sm btn-outline-"+(tt?"primary":"secondary")+" btn-lg btn-block "+(tt?"text-primary":"")+" text-overflow","data-id":L.id,onClick:this.likeStory},Object(h.h)("i",{class:(tt?"text-primary fas":"far")+" fa-thumbs-up"})," ",tt?Object(h.h)(p.c,{id:"comments.has-liked"},"Liked"):Object(h.h)(p.c,{id:"comments.like"},"Lik"))),Object(h.h)("div",{class:"col text-center"},Object(h.h)("button",{type:"button",class:"btn btn-sm btn-outline-secondary btn-lg btn-block text-overflow","data-id":L.id,onClick:this.toggleAddComment},Object(h.h)("i",{class:"fas fa-comment"})," ",Object(h.h)(p.c,{id:"comments.comment-add"},"Kommentar"))),Y?Object(h.h)(t,null,Object(h.h)("div",{class:"col text-center"},Object(h.h)("button",{class:"btn btn-sm btn-outline-secondary btn-lg btn-block text-overflow",onClick:this.shareLink,"data-url":"https://themusher.app/share/story/"+L.uuidv4,"data-title":"title: "+L.title},Object(h.h)("i",{class:"fas fa-share"})," ",Object(h.h)(p.c,{id:"story.share"},"Del")))):Object(h.h)(t,null,Object(h.h)("div",{class:"col text-center"},Object(h.h)("a",{class:"btn btn-sm btn-outline-secondary btn-lg btn-block text-overflow",href:"https://themusher.app/share/story/"+L.uuidv4,target:"_blank",rel:"noreferrer","data-native":!0},Object(h.h)("i",{class:"fas fa-share"})," ",Object(h.h)(p.c,{id:"story.share"},"Del")))))),Object(h.h)("div",{class:"mt-2"},Object(h.h)(v.a,{stores:this.props.stores,story:L,col:"10",offset:"2",compact:!1,showAllComments:A,initCall:this.closeAllAddComments}),r[L.id]&&Object(h.h)(y.a,{stores:this.props.stores,story:L,inputRef:function(t){return n.inputRef[L.id]=t},inputRefObject:this.inputRef,col:"10",offset:"2",key:"story-comment-"+L.id})))},s}(h.Component))||d;e.a=L}).call(this,s("hosL").Fragment)},QkTp:function(t,e,s){"use strict";(function(t){var a,o=s("hosL"),n=s("Utv1"),i=s("/eY4"),r=(s("OhSV"),s("ZOvn"),Object(i.a)(a=function(e){function s(){return e.apply(this,arguments)||this}var a,i;return i=e,(a=s).prototype=Object.create(i.prototype),a.prototype.constructor=a,a.__proto__=i,s.prototype.render=function(){var e=this.props,s=e.value,a=void 0===s?0:s,i=this.props.stores.userStore.user.settings;return(void 0===i?{}:i).imperial?Object(o.h)(t,null,Object(o.h)("nobr",null,n.a.format(function(t){return 9*t/5+32}(a),0),"°F")):Object(o.h)(t,null,Object(o.h)("nobr",null,n.a.format(a,1),"°C"))},s}(o.Component))||a);e.a=r}).call(this,s("hosL").Fragment)},UJvz:function(t,e,s){"use strict";var a,o=s("hosL"),n=s("Utv1"),i=s("/eY4"),r=s("OhSV"),l=Object(i.a)(a=function(t){function e(){for(var e,s=arguments.length,a=new Array(s),o=0;o<s;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))||this).toggleDate=function(){e.setState({showDate:!e.state.showDate})},e.touchStart=function(t){t.stopPropagation(),e.setState({startY:t.touches[0].pageY})},e.touchEnd=function(t){t.stopPropagation(),e.setState({startY:void 0,readyToRefresh:!1})},e.touchMove=function(t){t.stopPropagation();var s=e.state;e.appContainer&&(0===e.appContainer.scrollTop&&t.touches[0].pageY>s.startY+30&&!s.refreshing&&(0,e.props.close)())},e}var s,a;return a=t,(s=e).prototype=Object.create(a.prototype),s.prototype.constructor=s,s.__proto__=a,e.prototype.render=function(){var t=this,e=this.state.showDate,s=this.props,a=s.image,i=s.imagexxl,l=s.close,c=s.thumb,d=s.name,h=s.title,u=s.date;return Object(o.h)("div",{class:"fixed-top bg-dark text-center pt-2",style:"width: 100vw; height: 100vh;"},Object(o.h)("button",{class:"btn btn-secondary float-right mr-2",onClick:l},"X"),Object(o.h)("div",{class:"d-flex mb-2 px-2"},c&&Object(o.h)("div",{class:"text-center border rounded-circle imageRounded imageRoundedSmall",style:c?'background-image: url("'+c+'");':""}," "),Object(o.h)("div",{class:"flex-grow-1 pl-3 pr-2 text-left",style:"line-height: 1.3em;"},d&&Object(o.h)("strong",{class:"mr-2"},d,":"),h,Object(o.h)("br",null),Object(o.h)("small",{class:"text-muted"},u&&Object(o.h)("small",{onClick:this.toggleDate},e?n.a.formatDate(u,{locale:"no-NB"}):n.a.formatDistance(u,new Date,{locale:"no-NB"}))))),Object(o.h)("img",{src:a,class:"img-fluid align-middle mt-2 mb-2",onClick:l,onTouchstart:this.touchStart,onTouchend:this.touchEnd,onTouchmove:this.touchMove,ref:function(e){return t.appContainer=e}}),Object(o.h)("a",{target:"_blank",rel:"noopener noreferrer",href:i||a,download:i||a},Object(o.h)("i",{class:"fas fa-download"})," ",Object(o.h)(r.c,{id:"modal.download"},"Last ned bildet")))},e}(o.Component))||a;e.a=l},UwwE:function(t,e,s){"use strict";(function(t){var a,o=s("hosL"),n=s("Utv1"),i=s("/eY4"),r=(s("OhSV"),s("ZOvn"),Object(i.a)(a=function(e){function s(){return e.apply(this,arguments)||this}var a,i;return i=e,(a=s).prototype=Object.create(i.prototype),a.prototype.constructor=a,a.__proto__=i,s.prototype.render=function(){var e=this.props,s=e.value,a=void 0===s?0:s,i=this.props.stores.userStore.user.settings;return(void 0===i?{}:i).imperial?Object(o.h)(t,null,Object(o.h)("nobr",null,n.a.format(function(t){return 2.20462*t}(a),0)," lb")):Object(o.h)(t,null,Object(o.h)("nobr",null,n.a.format(a,0)," kg"))},s}(o.Component))||a);e.a=r}).call(this,s("hosL").Fragment)},bMs3:function(t,e,s){"use strict";var a,o=s("hosL"),n=s("Utv1"),i=s("/eY4"),r=s("OhSV"),l=s("nHdA"),c=s("irB3"),d=(s("UwwE"),s("8Lgr")),h=(s("QkTp"),s("ZOvn")),u=Object(i.a)(a=function(t){function e(){for(var e,s=arguments.length,a=new Array(s),n=0;n<s;n++)a[n]=arguments[n];return(e=t.call.apply(t,[this].concat(a))||this).requestFollowTeam=function(t){t.preventDefault(),t.stopPropagation();var s=e.props.stores,a=s.teamStore,o=s.userStore.user,n=parseInt(t.target.parentElement.dataset.team||t.target.dataset.team,10);a.followRequest(n,o),e.setState({requestSent:!0})},e.getButton=function(t){void 0===t&&(t="");var s=e.state.requestSent,a=e.props.stores.userStore.user,n=e.props,i=n.team,l=n.skipHome,c=i.members&&i.members.indexOf(a.id)>-1,d=i.followers&&i.followers.indexOf(a.id)>-1,h=i.blockedFollowers&&i.blockedFollowers.indexOf(a.id)>-1,u=s||i.followRequests&&i.followRequests.findIndex((function(t){return t.id===a.id}))>-1;return c?l?"":Object(o.h)("i",{class:"fas fa-home"}):d?Object(o.h)("button",{type:"button",class:"btn btn-sm btn-outline-secondary float-right",onClick:e.unFollowTeam,disabled:"true","data-team":i.id},Object(o.h)("i",{class:"fas fa-link mr-2"}),Object(o.h)(r.c,{id:"teams.connect.is-following"},"Følger")," ",t):h?"":u?Object(o.h)("button",{type:"button",class:"btn btn-sm btn-outline-secondary float-right",disabled:"true"},Object(o.h)("i",{class:"fas fa-hourglass-half mr-2"}),Object(o.h)(r.c,{id:"teams.connect.has-requested"},"Venter på godkjenning")," ",t):i.public?Object(o.h)("button",{type:"button",class:"btn btn-sm btn-outline-success float-right",onClick:e.requestFollowTeam,"data-team":i.id},Object(o.h)("i",{class:"far fa-hand-point-right mr-2"}),Object(o.h)(r.c,{id:"teams.connect.follow"},"Følg")," ",t):void 0},e}var s,a;return a=t,(s=e).prototype=Object.create(a.prototype),s.prototype.constructor=s,s.__proto__=a,e.prototype.render=function(){var t=this.props,e=t.team,s=t.showButton,a=t.publicUsers,i=void 0===a?[]:a,r=t.showLocation,u=t.showMembers,m=this.props.stores,b=m.teamStore,p=m.userStore,f=(new Date).getMonth()+1,g=(new Date).getFullYear(),O=this.props,j=O.month,v=O.year,y=void 0===v?g:v,w=parseInt((void 0===j?f:j)<8?y-1:y,10),k=b.findWorkoutSummary(e.id,w)||{},x=p.user.language,S=void 0===x?"en":x,C=p.findTeamAmbition({ambition:e.ambitions,language:S}),I=p.findTeamType({type:e.type,language:S}),D=i.find((function(t){return t.id===e.user})),T=h.a.displayName(D),P=h.a.getImage({user:D,team:e,priority:"user"}),R=this.props.url,L=void 0===R?"/teams/"+e.id:R;return Object(o.h)("div",{class:"w-100 mb-3"},Object(o.h)("div",{class:"row"},Object(o.h)("div",{class:"col-12 col-sm-8 col-lg-6 offset-sm-2 offset-lg-3 d-flex mb-0 position-relative"},Object(o.h)("div",{class:"position-relative d-flex flex-grow-1"},Object(o.h)("div",{class:"text-center border rounded-circle imageRounded",style:P?'background-image: url("'+P+'"); background-size: cover;':""},!P&&Object(o.h)("i",{class:"fas fa-users text-muted mt-3",style:"font-size: 40px;"})),Object(o.h)("div",{class:"flex-grow-1 pl-3",style:"line-height: 1.2em;"},Object(o.h)("a",{class:"stretched-link",href:L},Object(o.h)("h5",{class:"mb-1",style:"line-height: 1.0em;"},e.name)),r&&Object(o.h)("div",null,(e.place||e.country)&&Object(o.h)("span",{class:"mr-3"},Object(o.h)("i",{class:"fas fa-map-marker-alt"}),"  ",e.place," ",e.place?", "+e.country:e.country)),u&&Object(o.h)("div",null,D&&Object(o.h)("span",{class:"mr-2"},Object(o.h)("i",{class:"fas fa-user"})," ",T)),Object(o.h)("div",null,I&&Object(o.h)("span",{class:"badge badge-pill badge-secondary"},I),C&&Object(o.h)("span",{class:"badge badge-pill badge-secondary ml-2"},C)),Object(o.h)("small",{class:"text-muted"},e&&e.dogs&&Object(o.h)("span",{class:""},Object(o.h)("i",{class:"fas fa-dog"})," ",e.dogs.length),e&&e.members&&Object(o.h)("span",{class:"ml-2"},Object(o.h)("i",{class:"fas fa-user"})," ",e.members.length),k&&k.distanceKm>0&&Object(o.h)("span",{class:"ml-2"},Object(o.h)("i",{class:"fas fa-road"})," ",Object(o.h)(d.a,{stores:this.props.stores,value:k.distanceKm})),k&&k.elevation>0&&Object(o.h)("span",{class:"ml-2"},Object(o.h)("i",{class:"fas fa-mountain"})," ",Object(o.h)(c.a,{stores:this.props.stores,value:k.elevation})),k&&k.duration>0&&Object(o.h)("span",{class:"ml-2"},Object(o.h)("i",{class:"fas fa-clock"})," ",n.a.secToHms(k.duration)),k&&k.speedAvg>0&&Object(o.h)("span",{class:"ml-2"},Object(o.h)("i",{class:"fas fa-tachometer-alt"})," ",Object(o.h)(l.a,{stores:this.props.stores,value:k.speedAvg}))))),s&&Object(o.h)("div",null,this.getButton()))))},e}(o.Component))||a;e.a=u},ePpR:function(t,e,s){"use strict";(function(t){var a,o=s("hosL"),n=s("Utv1"),i=s("/eY4"),r=s("OhSV"),l=s("go65"),c=s("om2D"),d=s("ZOvn"),h=Object(i.a)(a=function(e){function s(t){var s;return(s=e.call(this,t)||this).commentTrack=function(){return new Promise((function(t,e){var a,o,n,i,r,l,c,h,u;return n=void 0===(o=(a=s.props).callback)?function(){}:o,r=void 0===(i=a.inputRefObject)?{}:i,l=s.props.track,h=(c=s.state).showAddImage,Promise.resolve(s.props.stores.trackStore.commentTrack({id:l.id,comment:c.comment})).then((function(a){try{return(u=a)&&200===u.status&&(s.setState({comment:{body:"",images:[]}},(function(){d.a.resizeTextarea(r[l.id]),h&&s.addImage()})),n({track:l,response:u})),t()}catch(t){return e(t)}}),e)}))},s.addImages=function(t){var e,a=s.state.comment;(e=a.images).push.apply(e,t.value),s.setState({comment:a})},s.addImage=function(){var t=s.state.showAddImage;s.setState({showAddImage:!(void 0!==t&&t)})},s.handleImageErrored=function(t){var e=t.target;e.onerror=null,setTimeout((function(){e.src+="?"+new Date}),1e3)},s.state={comment:{body:"",images:[]},showAddImage:!1},s.inputRef={},s}var a,i;return i=e,(a=s).prototype=Object.create(i.prototype),a.prototype.constructor=a,a.__proto__=i,s.prototype.render=function(){var e=this,s=this.props,a=s.inputRef,i=s.track,d=this.state,h=d.comment,u=d.showAddImage,m=this.props.stores.userStore.user,b=void 0===m?{}:m,p=b.firstname?""+n.a.ucfirst(b.firstname,!0)+n.a.ucfirst(b.lastname,!0):""+n.a.ucfirst(b.email||"",!0),f=b.image||(b.images?b.images[0]:void 0);return Object(o.h)("div",{class:"col-12 col-sm-8 col-lg-6 offset-sm-2 offset-lg-3 mb-3 position-relative"},Object(o.h)("div",{class:"d-flex mb-0 position-relative w-100"},Object(o.h)("div",{class:"text-center border rounded-circle imageRounded imageRoundedSmall",style:(f?"background-image: url('"+f.s3SmallLink+"'); background-size: cover;":"")+" border-width: 3px !important;"},!f&&Object(o.h)("span",{class:"font-weight-lighter",style:"font-size: 15px;"},p)),Object(o.h)("div",{class:"col pl-3",style:"line-height: 1.2em;"},Object(o.h)("div",{class:"d-flex bd-highlight"},Object(o.h)("div",{class:"p-0 w-100 bd-highlight"},Object(o.h)("label",{class:"sr-only",for:"inlineFormInput"},Object(o.h)(r.c,{id:"comments.comment"},"Kommentar")),Object(o.h)("div",{class:"border rounded rounded-lg position-relative"},Object(o.h)(r.b,null,Object(o.h)("input",{class:"form-control-plaintext px-2",type:"text",placeholder:Object(o.h)(r.c,{id:"comments.write-comment"},"Skriv en kommentar..."),onInput:Object(l.a)(this,"comment.body"),value:h.body,ref:a})),Object(o.h)("div",{class:"position-absolute",style:"top: 8px; right: 10px; font-size: 1.2em;"},Object(o.h)("i",{class:"fas fa-image pointerCursor","data-id":i.id,onClick:this.addImage})))),Object(o.h)("div",{class:"p-0 pl-2 flex-shrink-1 bd-highlight"},Object(o.h)("button",{type:"button",class:"btn btn-primary mb-2",onClick:this.commentTrack},Object(o.h)("i",{class:"fas fa-paper-plane"})))))),u&&Object(o.h)(t,null,Object(o.h)("div",{class:"col-12 text-center"},Object(o.h)("div",{class:"container-fluid"},Object(o.h)("div",{class:"row"},n.a.isArray(h.images)&&h.images.map((function(t){return Object(o.h)("div",{class:"col-3 p-1"},Object(o.h)("img",{src:t.s3SmallLink,class:"img-fluid",onError:e.handleImageErrored}),Object(o.h)("button",{class:"btn btn-sm btn-link",onClick:e.removeImage,"data-name":t.name},Object(o.h)("i",{class:"fas fa-trash"})," Del"))})))),Object(o.h)(c.a,{object:h,updateField:this.addImages,autoOpen:!0}))))},s}(o.Component))||a;e.a=h}).call(this,s("hosL").Fragment)},irB3:function(t,e,s){"use strict";(function(t){var a,o=s("hosL"),n=s("Utv1"),i=s("/eY4"),r=(s("OhSV"),s("ZOvn"),Object(i.a)(a=function(e){function s(){return e.apply(this,arguments)||this}var a,i;return i=e,(a=s).prototype=Object.create(i.prototype),a.prototype.constructor=a,a.__proto__=i,s.prototype.render=function(){var e=this.props,s=e.value,a=void 0===s?0:s,i=e.smallUnit,r=this.props.stores.userStore.user.settings;return(void 0===r?{}:r).imperial?Object(o.h)(t,null,Object(o.h)("nobr",null,n.a.format(function(t){return 3.28084*t}(a),0)," ",i?Object(o.h)(t,null,Object(o.h)("small",null,Object(o.h)("small",null,Object(o.h)("small",{class:"ml-0 text-muted"},"ft")))):Object(o.h)(t,null,"ft"))):Object(o.h)(t,null,Object(o.h)("nobr",null,n.a.format(a,0)," ",i?Object(o.h)(t,null,Object(o.h)("small",null,Object(o.h)("small",null,Object(o.h)("small",{class:"ml-0 text-muted"},"m")))):Object(o.h)(t,null,"m")))},s}(o.Component))||a);e.a=r}).call(this,s("hosL").Fragment)},lcEk:function(t,e,s){"use strict";(function(t){function a(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,a)}return s}function o(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}var n,i=s("hosL"),r=s("Utv1"),l=s("/eY4"),c=s("cneo"),d=s("OhSV"),h=s("fh8t"),u=s.n(h),m=s("K5BL"),b=(s("ETxl"),s("ZOvn")),p={showAddComment:{},showAllComments:!1,showAllReplies:{},viewImageIdx:{},likeComment:{},likeReply:{}},f=Object(l.a)(n=function(e){function s(t){var s;return(s=e.call(this,t)||this).likeComment=function(t){return new Promise((function(e,a){var o,n,i,r,l;return n=void 0===(o=s.props.callback)?function(){}:o,i=t.target.parentElement.dataset.id||t.target.dataset.id,r=s.props.track,Promise.resolve(s.props.stores.trackStore.likeTrackComment({id:r.id,commentId:i})).then((function(t){try{return(l=t)&&200===l.status&&n({track:r,commentId:i,response:l}),e(!0)}catch(t){return a(t)}}),a)}))},s.likeReply=function(t){return new Promise((function(e,a){var o,n,i,r,l;return n=void 0===(o=s.props.callback)?function(){}:o,i=t.target.parentElement.dataset.comment||t.target.dataset.comment,r=s.props.track,Promise.resolve(s.props.stores.trackStore.likeTrackCommentReply({id:r.id,replyId:t.target.parentElement.dataset.id||t.target.dataset.id,commentId:i})).then((function(t){try{return(l=t)&&200===l.status&&n({track:r,commentId:i,response:l}),e()}catch(t){return a(t)}}),a)}))},s.replyComment=function(t){return new Promise((function(e){var a=t.target.parentElement.dataset.id||t.target.dataset.id,o=s.state.showAddComment;return o[a]=!o[a],s.setState({showAddComment:o},(function(){s.inputRef[a]&&s.inputRef[a].focus()})),e()}))},s.toggleComments=function(){s.setState({showAllComments:!s.state.showAllComments})},s.toggleReplies=function(t){var e=t.target.parentElement.dataset.id||t.target.dataset.id,a=s.state.showAllReplies;a[e]=!a[e],s.setState({showAllReplies:a})},s.state=function(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?a(Object(s),!0).forEach((function(e){o(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):a(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}({},p),s.inputRef={},s}var n,l;return l=e,(n=s).prototype=Object.create(l.prototype),n.prototype.constructor=n,n.__proto__=l,s.prototype.render=function(){var e=this,s=this.state,a=s.showAddComment,o=s.showAllComments,n=s.showAllReplies,l=s.viewImageIdx,h=s.likeComment,p=this.props,f=p.track,g=p.callback,O=void 0===g?function(){}:g,j=p.col,v=void 0===j?12:j,y=p.offset,w=void 0===y?0:y,k=p.compact,x=this.props.stores.userStore,S=x.user,C=x.language,I=void 0===C?"en":C,D=[],T=0,P=0;if(f.comments){if(T=f.comments.length,o)D=f.comments;else D=f.comments.slice(Math.max(T-(void 0!==k&&k?0:2),0));P=D.length}return Object(i.h)("div",{class:"col-"+v+" offset-"+w+" col-sm-8 col-lg-6 offset-sm-2 offset-lg-3"},o&&Object(i.h)("div",null,Object(i.h)("button",{class:"btn btn-sm btn-link py-0 mb-2",onClick:this.toggleComments},Object(i.h)(d.c,{id:"comments.hide-all-comments"},"Skjul alle kommentarene."))),f&&D&&D.reverse().map((function(s){var o=s.user,p=void 0===o?{}:o,g=p.firstname?""+r.a.ucfirst(p.firstname,!0)+r.a.ucfirst(p.lastname,!0):""+r.a.ucfirst(p.email||"",!0),j=p.firstname?p.firstname+" "+p.lastname:""+p.email,v=p.image||(p.images?p.images[0]:void 0),y=s.likes&&s.likes.findIndex((function(t){return t.user===S.id}))>-1,w=[],k=0,x=0;s.comments&&(k=s.comments.length,x=(w=n[s.id]?s.comments:s.comments.slice(0,void 0)).length);var C=[];if(s.images){var D=Object(c.i)(s.images);C.push.apply(C,D)}var T=l[s.id]?l[s.id]:0,P=C&&C[T]?C[T]:null;return Object(i.h)("div",{class:"row"},Object(i.h)("div",{class:"col-12 d-flex mb-2 position-relative"},Object(i.h)("div",{class:"text-center border rounded-circle imageRounded imageRoundedSmall",style:(v?'background-image: url("'+v.s3SmallLink+'"); background-size: cover;':"")+" border-width: 3px !important;"},!p.image&&Object(i.h)("span",{class:"font-weight-lighter",style:"font-size: 15px;"},g)),Object(i.h)("div",{class:"flex-grow-1 pl-3 pt-0",style:"line-height: 1.2em;"},Object(i.h)("div",{class:"bg-light p-2 rounded-lg"},Object(i.h)("h5",{class:"font-weight-bold mb-0",style:"font-size: 1.0em;"},j),Object(i.h)(u.a,{markdown:b.a.replaceImages(s.comment,s.images,I),markdownOpts:b.a.getMarkdownOptions()})),Object(i.h)("div",null,Object(i.h)("div",{class:"container-fluid px-3 mt-1"},P&&Object(i.h)("div",{class:"clearfix row position-relative"},Object(i.h)("div",{class:"commentContainer col-12 px-0 overflow-hidden",style:"max-height: 60vh;",onDblclick:e.addLikeComment,"data-id":s.id},Object(i.h)("img",{loading:"lazy",class:"img-fluid",style:"min-width: 100px;",src:P.s3LargeLink})),h[s.id]&&Object(i.h)("span",{class:"likeHeart position-absolute text-white display-1",style:"top: calc(50% - 50px); left: calc(50% - 50px); width: 100px; height: 100px;"},Object(i.h)("i",{class:"fas fa-heart likeStory"}))),C&&C.length>1&&Object(i.h)("div",{class:"clearfix d-flex flex-wrap row"},r.a.isArray(C)&&C.map((function(a,o){return Object(i.h)(t,null,Object(i.h)("div",{class:"col px-0 overflow-hidden",style:"max-height: 100px; min-width: 100px;"},Object(i.h)("img",{loading:"lazy",class:"img-fluid border",style:"min-width: 100px;",src:a.s3SmallLink,onClick:e.viewImage,"data-id":s.id,"data-idx":o})))}))))),Object(i.h)("small",null,Object(i.h)("button",{class:"btn btn-sm btn-link py-0 "+(y?"text-primary":""),onClick:e.likeComment,"data-id":s.id},Object(i.h)(d.c,{id:"comments.like"},"Lik")),"-",Object(i.h)("button",{class:"btn btn-sm btn-link py-0",onClick:e.replyComment,"data-id":s.id},Object(i.h)(d.c,{id:"comments.comment-add"},"Kommentar")),"-",Object(i.h)("button",{class:"btn btn-sm btn-link py-0 disabled"},r.a.formatDistance(s.createdDate,new Date,{locale:"no-NB"})))),s.likes&&s.likes.length>0&&Object(i.h)("small",{class:"position-absolute bg-light shadow-sm rounded-lg py-0 px-1",style:"bottom: 20px; right: 15px;"},Object(i.h)("i",{class:"fas fa-thumbs-up text-primary"})," ",s.likes.length)),Object(i.h)("div",{class:"col-11 offset-1 mb-2"},s&&w&&w.map((function(t){var a=t.user,o=void 0===a?{}:a,n=o.firstname?""+r.a.ucfirst(o.firstname,!0)+r.a.ucfirst(o.lastname,!0):""+r.a.ucfirst(o.email||"",!0),l=o.firstname?o.firstname+" "+o.lastname:""+o.email,c=o.image||(o.images?o.images[0]:void 0),h=t.likes&&t.likes.findIndex((function(t){return t.user===S.id}))>-1;return Object(i.h)("div",{class:"row"},Object(i.h)("div",{class:"col-12 d-flex mb-2 position-relative"},Object(i.h)("div",{class:"text-center border rounded-circle imageRounded imageRoundedThumb",style:(c?'background-image: url("'+c.s3SmallLink+'"); background-size: cover;':"")+" border-width: 3px !important;"},!o.image&&Object(i.h)("span",{class:"font-weight-lighter",style:"font-size: 15px;"},n)),Object(i.h)("div",{class:"flex-grow-1 pl-3 pt-0",style:"line-height: 1.2em;"},Object(i.h)("div",{class:"bg-light p-2 rounded-lg"},Object(i.h)("h5",{class:"font-weight-bold mb-0",style:"font-size: 1.0em;"},l),t.comment),Object(i.h)("small",null,Object(i.h)("button",{class:"btn btn-sm btn-link py-0 "+(h?"text-primary":""),onClick:e.likeReply,"data-comment":s.id,"data-id":t.id},Object(i.h)(d.c,{id:"comments.like"},"Lik")),"-",Object(i.h)("button",{class:"btn btn-sm btn-link py-0",onClick:e.replyComment,"data-id":s.id},Object(i.h)(d.c,{id:"comments.comment-add"},"Kommentar")),"-",Object(i.h)("button",{class:"btn btn-sm btn-link py-0 disabled"},r.a.formatDistance(t.createdDate,new Date,{locale:"no-NB"})))),t.likes&&Object(i.h)("small",{class:"position-absolute bg-light shadow-sm rounded-lg py-0 px-1",style:"bottom: 20px; right: 15px;"},Object(i.h)("i",{class:"fas fa-thumbs-up text-primary"})," ",t.likes.length)))})),k-x>0&&Object(i.h)("div",null,Object(i.h)("button",{class:"btn btn-sm btn-link py-0",onClick:e.toggleReplies,"data-id":s.id},Object(i.h)(d.c,{id:"comments.show-more",fields:{more:k-x}},"Vis ",k-x," flere kommentarer...")))),a[s.id]&&Object(i.h)("div",{class:"col-11 offset-1 d-flex mb-2 position-relative"},Object(i.h)(m.a,{stores:e.props.stores,track:f,callback:O,commentId:s.id,inputRef:function(t){return e.inputRef[s.id]=t}})))})),T-P>0&&Object(i.h)("div",null,Object(i.h)("button",{class:"btn btn-sm btn-link py-0",onClick:this.toggleComments},Object(i.h)(d.c,{id:"comments.show-more",fields:{more:T-P}},"Vis ",T-P," flere kommentarer..."))),o&&Object(i.h)("div",null,Object(i.h)("button",{class:"btn btn-sm btn-link py-0",onClick:this.toggleComments},Object(i.h)(d.c,{id:"comments.hide-all-comments"},"Skjul alle kommentarene."))))},s}(i.Component))||n;e.a=f}).call(this,s("hosL").Fragment)},nHdA:function(t,e,s){"use strict";(function(t){var a,o=s("hosL"),n=s("Utv1"),i=s("/eY4"),r=s("OhSV"),l=(s("ZOvn"),Object(i.a)(a=function(e){function s(){return e.apply(this,arguments)||this}var a,i;return i=e,(a=s).prototype=Object.create(i.prototype),a.prototype.constructor=a,a.__proto__=i,s.prototype.render=function(){var e=this.props,s=e.value,a=void 0===s?0:s,i=e.smallUnit,l=this.props.stores.userStore.user.settings;return(void 0===l?{}:l).imperial?Object(o.h)(t,null,Object(o.h)("nobr",null,n.a.format(function(t){return.621371*t}(a),1)," ",i?Object(o.h)(t,null,Object(o.h)("small",null,Object(o.h)("small",null,Object(o.h)("small",{class:"ml-0 text-muted"},Object(o.h)(r.c,{id:"workouts.mph"},"mph"))))):Object(o.h)(t,null,Object(o.h)(r.c,{id:"workouts.mph"},"mph")))):Object(o.h)(t,null,Object(o.h)("nobr",null,n.a.format(a,1)," ",i?Object(o.h)(t,null,Object(o.h)("small",null,Object(o.h)("small",null,Object(o.h)("small",{class:"ml-0 text-muted"},Object(o.h)(r.c,{id:"workouts.kmt"},"km/t"))))):Object(o.h)(t,null,Object(o.h)(r.c,{id:"workouts.kmt"},"km/t"))))},s}(o.Component))||a);e.a=l}).call(this,s("hosL").Fragment)},om2D:function(t,e,s){"use strict";var a,o=s("hosL"),n=s("/eY4"),i=(s("cneo"),s("Utv1"),s("u2zT")),r=Object(n.a)(a=function(t){function e(e){var s;return(s=t.call(this,e)||this).handleAddImage=function(t){var e=s.props.addToImages,a=void 0===e||e,o=s.props,n=o.updateField,i=o.object,r=o.field;if(r&&n({id:i.id,field:r,value:t,skipTimer:!0}),a){var l=[];l.push(t),n({id:i.id,field:"images",value:l,skipTimer:!0})}},s.state={files:[]},s}var s,a;return a=t,(s=e).prototype=Object.create(a.prototype),s.prototype.constructor=s,s.__proto__=a,e.prototype.render=function(){var t=this.props,e=t.uploadStatus,s=void 0===e?function(){}:e,a=t.before,n=void 0===a?function(){}:a,r=t.after,l=void 0===r?function(){}:r,c=t.autoOpen,d=void 0===c||c;return Object(o.h)("div",{class:"row"},Object(o.h)("div",{class:"col-12"},Object(o.h)(i.a,{handleAddImage:this.handleAddImage,uploadStatus:s,apiUrl:"/api/fileupload",before:n,after:l,autoOpen:d},Object(o.h)("div",{style:{height:30,width:"100%"}}))))},e}(o.Component))||a;e.a=r},sqi2:function(t,e,s){"use strict";(function(t){function a(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,a)}return s}function o(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}var n,i=s("hosL"),r=s("Utv1"),l=s("/eY4"),c=s("cneo"),d=s("OhSV"),h=s("fh8t"),u=s.n(h),m=s("3wGD"),b=(s("ETxl"),s("ZOvn")),p={showAddComment:{},showAllComments:!1,showAllReplies:{},viewImageIdx:{}},f=Object(l.a)(n=function(e){function s(t){var s;return(s=e.call(this,t)||this).likeComment=function(t){return new Promise((function(e,a){var o,n,i,r,l;return n=void 0===(o=s.props.callback)?function(){}:o,i=t.target.parentElement.dataset.id||t.target.dataset.id,r=s.props.workout,Promise.resolve(s.props.stores.workoutStore.likeWorkoutComment({id:r.id,commentId:i})).then((function(t){try{return(l=t)&&200===l.status&&n({type:"likeComment",workout:r,commentId:i,response:l}),e(!0)}catch(t){return a(t)}}),a)}))},s.likeReply=function(t){return new Promise((function(e,a){var o,n,i,r,l,c;return n=void 0===(o=s.props.callback)?function(){}:o,i=t.target.parentElement.dataset.id||t.target.dataset.id,r=t.target.parentElement.dataset.comment||t.target.dataset.comment,l=s.props.workout,Promise.resolve(s.props.stores.workoutStore.likeWorkoutCommentReply({id:l.id,replyId:i,commentId:r})).then((function(t){try{return(c=t)&&200===c.status&&n({type:"likeReply",workout:l,commentId:r,replyId:i,response:c}),e()}catch(t){return a(t)}}),a)}))},s.replyComment=function(t){return new Promise((function(e){var a=t.target.parentElement.dataset.id||t.target.dataset.id,o=s.state.showAddComment;return o[a]=!o[a],s.setState({showAddComment:o},(function(){s.inputRef[a]&&s.inputRef[a].focus()})),e()}))},s.toggleComments=function(){s.setState({showAllComments:!s.state.showAllComments})},s.toggleReplies=function(t){var e=t.target.parentElement.dataset.id||t.target.dataset.id,a=s.state.showAllReplies;a[e]=!a[e],s.setState({showAllReplies:a})},s.viewImage=function(t){var e=t.target.closest("img").dataset,a=s.state.viewImageIdx;a[e.id]=e.idx,s.setState({viewImageIdx:a})},s.translate=function(t){return new Promise((function(e,a){function o(){return s.setState({showOriginal:b,translatedText:f}),e()}var n,i,r,l,c,d,h,u,m,b,p,f,g;return t.preventDefault(),t.stopPropagation(),n=t.target.closest("button").dataset,l=s.props.workout,d=(c=s.props.stores).teamStore,h=c.userStore.user,f=void 0===(p=(u=s.state).translatedText)?{}:p,(b=void 0===(m=u.showOriginal)?{}:m)[g=(r=n.commentid)+((i=n.replyid)?"-"+i:"")]=0,i?Promise.resolve(d.translateCommentReply({commentid:r,replyid:i,object:l,user:h})).then(function(t){try{return f[g]=t,o.call(this)}catch(t){return a(t)}}.bind(this),a):Promise.resolve(d.translateComment({commentid:r,object:l,user:h})).then(function(t){try{return f[g]=t,o.call(this)}catch(t){return a(t)}}.bind(this),a)}))},s.showOriginal=function(t){var e=t.target.closest("button").dataset,a=e.replyid,o=e.commentid;t.preventDefault(),t.stopPropagation();var n=s.state.showOriginal,i=void 0===n?{}:n;i[o+(a?"-"+a:"")]=1,s.setState({showOriginal:i})},s.state=function(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?a(Object(s),!0).forEach((function(e){o(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):a(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}({},p),s.inputRef={},s}var n,l;return l=e,(n=s).prototype=Object.create(l.prototype),n.prototype.constructor=n,n.__proto__=l,s.prototype.render=function(){var e,s=this,a=this.state,o=a.showAddComment,n=a.showAllComments,l=a.showAllReplies,h=a.viewImageIdx,p=a.showOriginal,f=void 0===p?{}:p,g=a.translatedText,O=void 0===g?{}:g,j=this.props,v=j.workout,y=j.callback,w=void 0===y?function(){}:y,k=j.compact,x=this.props.stores,S=x.userStore,C=x.teamStore,I=S.user,D=S.isAdmin,T=I.language,P=void 0===T?"en":T,R=[],L=0,A=0;return v.comments&&(L=v.comments.length,n?R=v.comments:(e=void 0!==k&&k?0:1,R=v.comments.slice(Math.max(L-e,0))),A=R.length),Object(i.h)("div",null,v&&R&&R.reverse().map((function(a){var n=a.user,p=void 0===n?{}:n,g=C.findPublicTeamByMembers(p.id),j=b.a.displayNameShort(p),y=b.a.displayName(p),k=p.image||(p.images?p.images[0]:void 0),x=a.likes&&a.likes.findIndex((function(t){return t.user===I.id}))>-1,S=[],T=0,R=0;a.comments&&(T=a.comments.length,R=(S=l[a.id]?a.comments:a.comments.slice(0,e)).length);var L=[];if(a.images){var A=Object(c.i)(a.images);L.push.apply(L,A)}var E=h[a.id]?h[a.id]:0,_=L&&L[E]?L[E]:null,U=a.currentLocationGeocode,F=void 0===U?{}:U,z=C.getCommentTranslations({object:v,commentid:a.id,targetLang:P})||O[a.id],M=z||a.comment;return f[a.id]&&(M=a.comment),Object(i.h)("div",{class:"row"},Object(i.h)("div",{class:"col-12 d-flex mb-2 position-relative"},Object(i.h)("div",{class:"text-center border rounded-circle imageRounded imageRoundedSmall",style:(k?'background-image: url("'+k.s3SmallLink+'"); background-size: cover;':"")+" border-width: 3px !important;"},!p.image&&Object(i.h)("span",{class:"font-weight-lighter",style:"font-size: 15px;"},j)),Object(i.h)("div",{class:"flex-grow-1 pl-3 pt-0",style:"line-height: 1.2em;"},Object(i.h)("div",{class:"bg-light p-2 rounded rounded-lg"},Object(i.h)("div",null,Object(i.h)("span",{style:"font-size: 0.95em;"},Object(i.h)("h5",{class:"font-weight-bold mb-0",style:"font-size: 1.0em;"},y),g&&g.length>0&&Object(i.h)("div",{class:"mb-2"},Object(i.h)("small",{class:"font-weight-lighter text-muted"},g.filter((function(t){return 1===t.public})).slice(0,2).map((function(e){return Object(i.h)(t,null,Object(i.h)("a",{href:"/teams/public/"+e.uuidv4,class:"mr-2"},Object(i.h)("i",{class:"fas fa-users text-muted"})," ",e.name))})))),Object(i.h)(u.a,{markdown:b.a.replaceImages(M,a.images,P),markdownOpts:b.a.getMarkdownOptions()}))),Object(i.h)("div",{class:"container-fluid px-3 mt-1"},_&&Object(i.h)("div",{class:"clearfix row"},Object(i.h)("div",{class:"col-12 px-0 overflow-hidden",style:"max-height: 30vh;"},Object(i.h)("img",{loading:"lazy",class:"img-fluid",style:"min-width: 100px;",src:_.s3LargeLink}))),L&&L.length>1&&Object(i.h)("div",{class:"clearfix d-flex flex-wrap row"},L.map((function(e,o){return Object(i.h)(t,null,Object(i.h)("div",{class:"col px-0 overflow-hidden",style:"max-height: 100px; min-width: 100px;"},Object(i.h)("img",{loading:"lazy",class:"img-fluid border",style:"min-width: 100px;",src:e.s3SmallLink,onClick:s.viewImage,"data-id":a.id,"data-idx":o})))}))))),Object(i.h)("small",null,Object(i.h)("button",{class:"btn btn-sm btn-link py-0 "+(x?"text-primary":""),onClick:s.likeComment,"data-id":a.id},Object(i.h)(d.c,{id:"comments.like"},"Lik")),"-",Object(i.h)("button",{class:"btn btn-sm btn-link py-0",onClick:s.replyComment,"data-id":a.id},Object(i.h)(d.c,{id:"comments.comment-add"},"Kommentar")),a.language!==P&&Object(i.h)(t,null,"-",!f[a.id]&&z?Object(i.h)(t,null,Object(i.h)("button",{type:"button",class:"btn btn-sm btn-link","data-commentid":a.id,onClick:s.showOriginal},Object(i.h)("i",{class:"fas fa-cog"}),"  ",Object(i.h)(d.c,{id:"home.translate-show-original"},"Show original"))):Object(i.h)(t,null,Object(i.h)("button",{type:"button",class:"btn btn-sm btn-link",onClick:s.translate,"data-commentid":a.id},Object(i.h)("i",{class:"fas fa-cog"})," ",Object(i.h)(d.c,{id:"home.translate-to"},"See translation")))),"-",Object(i.h)("button",{class:"btn btn-sm btn-link py-0 disabled"},r.a.formatDistance(a.createdDate,new Date,{locale:"no-NB"}),a.updatedDate&&Object(i.h)(t,null,Object(i.h)("span",{class:"font-weight-light ml-2"},"(Edited ",r.a.formatDistance(a.updatedDate,new Date,{locale:"no-NB"}),")"))),D&&F&&F.formatted_address&&Object(i.h)(t,null,Object(i.h)("span",{class:"ml-2 text-muted"},Object(i.h)("i",{class:"fas fa-map-marker-alt"})," ",F.formatted_address)))),a.likes&&a.likes.length>0&&Object(i.h)("small",{class:"position-absolute bg-light shadow-sm rounded-lg py-0 px-1",style:"bottom: 20px; right: 15px;"},Object(i.h)("i",{class:"fas fa-thumbs-up text-primary"})," ",a.likes.length)),Object(i.h)("div",{class:"col-11 offset-1 mb-2"},a&&S&&S.map((function(e){var o=e.user,n=void 0===o?{}:o,l=C.findPublicTeamByMembers(n.id),c=n.firstname?""+r.a.ucfirst(n.firstname,!0)+r.a.ucfirst(n.lastname,!0):""+r.a.ucfirst(n.email||"",!0),h=n.firstname?n.firstname+" "+n.lastname:""+n.email,m=n.image||(n.images?n.images[0]:void 0),p=e.likes&&e.likes.findIndex((function(t){return t.user===I.id}))>-1,g=C.getCommentReplyTranslations({object:v,commentid:a.id,replyid:e.id,targetLang:P})||O[a.id+"-"+e.id],j=g||e.comment;return f[a.id+"-"+e.id]&&(j=e.comment),Object(i.h)("div",{class:"row"},Object(i.h)("div",{class:"col-12 d-flex mb-2 position-relative"},Object(i.h)("div",{class:"text-center border rounded-circle imageRounded imageRoundedThumb",style:(m?'background-image: url("'+m.s3SmallLink+'"); background-size: cover;':"")+" border-width: 3px !important;"},!n.image&&Object(i.h)("span",{class:"font-weight-lighter",style:"font-size: 15px;"},c)),Object(i.h)("div",{class:"flex-grow-1 pl-3 pt-0",style:"line-height: 1.2em;"},Object(i.h)("div",{class:"bg-light p-2 rounded-lg"},Object(i.h)("span",{style:"font-size: 0.95em;"},Object(i.h)("h5",{class:"font-weight-bold mb-0",style:"font-size: 1.0em;"},h),l&&l.length>0&&Object(i.h)("div",{class:"mb-2"},Object(i.h)("small",{class:"font-weight-lighter text-muted"},l.filter((function(t){return 1===t.public})).slice(0,2).map((function(e){return Object(i.h)(t,null,Object(i.h)("a",{href:"/teams/public/"+e.uuidv4,class:"mr-2"},Object(i.h)("i",{class:"fas fa-users text-muted"})," ",e.name))})))),Object(i.h)(u.a,{markdown:b.a.replaceImages(j,e.images,P),markdownOpts:b.a.getMarkdownOptions()}))),Object(i.h)("small",null,Object(i.h)("button",{class:"btn btn-sm btn-link py-0 "+(p?"text-primary":""),onClick:s.likeReply,"data-comment":a.id,"data-id":e.id},Object(i.h)(d.c,{id:"comments.like"},"Lik")),"-",Object(i.h)("button",{class:"btn btn-sm btn-link py-0",onClick:s.replyComment,"data-id":a.id},Object(i.h)(d.c,{id:"comments.comment-add"},"Kommentar")),e.language!==P&&Object(i.h)(t,null,"-",!f[a.id+"-"+e.id]&&g?Object(i.h)(t,null,Object(i.h)("button",{type:"button",class:"btn btn-sm btn-link","data-commentid":a.id,"data-replyid":e.id,onClick:s.showOriginal},Object(i.h)("i",{class:"fas fa-cog"}),"  ",Object(i.h)(d.c,{id:"home.translate-show-original"},"Show original"))):Object(i.h)(t,null,Object(i.h)("button",{type:"button",class:"btn btn-sm btn-link",onClick:s.translate,"data-commentid":a.id,"data-replyid":e.id},Object(i.h)("i",{class:"fas fa-cog"})," ",Object(i.h)(d.c,{id:"home.translate-to"},"See translation")))),"-",Object(i.h)("button",{class:"btn btn-sm btn-link py-0 disabled"},r.a.formatDistance(e.createdDate,new Date,{locale:"no-NB"})))),e.likes&&Object(i.h)("small",{class:"position-absolute bg-light shadow-sm rounded-lg py-0 px-1",style:"bottom: 20px; right: 15px;"},Object(i.h)("i",{class:"fas fa-thumbs-up text-primary"})," ",e.likes.length)))})),T-R>0&&Object(i.h)("div",null,Object(i.h)("button",{class:"btn btn-sm btn-link py-0",onClick:s.toggleReplies,"data-id":a.id},Object(i.h)(d.c,{id:"comments.show-more",fields:{more:T-R}},"Vis ",T-R," flere kommentarer...")))),o[a.id]&&Object(i.h)("div",{class:"col-11 offset-1 d-flex mb-2 position-relative"},Object(i.h)(m.a,{stores:s.props.stores,workout:v,callback:w,commentId:a.id,inputRef:function(t){return s.inputRef[a.id]=t},inputRefObject:s.inputRef})))})),L-A>0&&Object(i.h)("div",null,Object(i.h)("button",{class:"btn btn-sm btn-link py-0",onClick:this.toggleComments},Object(i.h)(d.c,{id:"comments.show-more",fields:{more:L-A}},"Vis ",L-A," flere kommentarer..."))),n&&Object(i.h)("div",null,Object(i.h)("button",{class:"btn btn-sm btn-link py-0",onClick:this.toggleComments},Object(i.h)(d.c,{id:"comments.hide-all-comments"},"Skjul alle kommentarene."))))},s}(i.Component))||n;e.a=f}).call(this,s("hosL").Fragment)},u2zT:function(t,e,s){"use strict";var a,o=s("hosL"),n=s("/eY4"),i=s("Utv1"),r=s("OhSV"),l=Object(n.a)(a=function(t){function e(e){var s;return(s=t.call(this,e)||this).dropRef=Object(o.createRef)(),s.handleDrag=function(t){t.preventDefault(),t.stopPropagation()},s.handleDragIn=function(t){t.preventDefault(),t.stopPropagation(),s.dragCounter++,t.dataTransfer.items&&t.dataTransfer.items.length>0&&s.setState({drag:!0})},s.handleDragOut=function(t){t.preventDefault(),t.stopPropagation(),s.dragCounter--,0===s.dragCounter&&s.setState({drag:!1})},s.handleDrop=function(t){if(t.preventDefault(),t.stopPropagation(),s.setState({drag:!1}),t.dataTransfer.files&&t.dataTransfer.files.length>0){for(var e=0,a=t.dataTransfer.files.length;e<a;e+=1){s.readLocalFile(t.dataTransfer.files[e])}s.dragCounter=0}},s.handleAddFiles=function(t){t.preventDefault();var e=t.target;for(var a=0,o=e.files.length;a<o;a+=1){s.readLocalFile(e.files[a])}},s.handleEvent=function(){0},s.handleUpload=function(t){var e=s.props,a=e.uploadStatus,o=e.before,n=void 0===o?function(){}:o,r=e.after,l=void 0===r?function(){}:r;(void 0===a?function(){}:a)(!1),i.a.isFunction(n)&&n();var c=new FormData;c.append("files[]",t);var d={progress:1};d.xhr=new XMLHttpRequest,d.xhr.upload.addEventListener("progress",(function(e){s.updateProgress(e,t)})),d.xhr.addEventListener("loadstart",(function(e){s.handleEvent(e,t)})),d.xhr.addEventListener("load",(function(e){s.handleEvent(e,t)})),d.xhr.addEventListener("loadend",(function(e){var a=t;i.a.isFunction(l)&&l(),s.handleEvent(e,a)})),d.xhr.addEventListener("progress",(function(e){s.handleEvent(e,t)})),d.xhr.addEventListener("error",(function(e){s.handleEvent(e,t)})),d.xhr.addEventListener("abort",(function(e){s.handleEvent(e,t)})),d.xhr.addEventListener("readystatechange",(function(e){s.uploadDone(e,t)})),d.xhr.open("POST",""+i.a.getApiServer()+s.props.apiUrl),d.xhr.setRequestHeader("Authorization","Bearer "+i.a.getJwtToken()),d.xhr.send(c);var h=t.name,u=s.state.uploadedFilesData;u[h]||(u[h]={}),u[h].uploadMeta=d,u[h].imageNum=s.state.imageNum,s.setState({uploadedFilesData:u})},s.readLocalFile=function(t){return new Promise((function(e,a){var o=new FileReader;o.addEventListener("error",(function(t){a(t)})),o.addEventListener("load",(function(a){var o=t,n=o.name,i=s.state.uploadedFilesData;i[n]||(i[n]={}),i[n].event=a,s.setState({uploadedFilesData:i}),s.handleUpload(o),e(a)})),o.readAsDataURL(t)}))},s.updateProgress=function(t,e){if(t.lengthComputable){var a=e.name,o=s.state.uploadedFilesData,n=t.loaded/t.total*100;0,o[a].uploadMeta.progress=n,s.setState({uploadedFilesData:o})}},s.uploadDone=function(t,e){var a=e.name,o=s.state.uploadedFilesData,n=o[a].uploadMeta;if(n&&4===n.xhr.readyState&&201===n.xhr.status)for(var i=JSON.parse(n.xhr.responseText).data.files,r=0;r<i.length;r+=1){s.addFileToUpload(i[r]),s.fileInput.value=""}},s.state={drag:!1,loadingProgress:0,uploadedFiles:[],uploadedFilesData:{}},s}var s,a;a=t,(s=e).prototype=Object.create(a.prototype),s.prototype.constructor=s,s.__proto__=a;var n=e.prototype;return n.addFileToUpload=function(t){var e=this.state.uploadedFilesData,s=this.props,a=s.handleAddImage,o=s.uploadStatus,n=void 0===o?function(){}:o;delete e[t.name],this.setState({uploadedFilesData:e}),a(t),n(!0)},n.componentDidMount=function(){var t=this,e=this.dropRef.current;e.addEventListener("dragenter",this.handleDragIn),e.addEventListener("dragleave",this.handleDragOut),e.addEventListener("dragover",this.handleDrag),e.addEventListener("drop",this.handleDrop),this.props.autoOpen&&setTimeout((function(){t.fileInput.click()}),10)},n.componentWillUnmount=function(){var t=this.dropRef.current;t.removeEventListener("dragenter",this.handleDragIn),t.removeEventListener("dragleave",this.handleDragOut),t.removeEventListener("dragover",this.handleDrag),t.removeEventListener("drop",this.handleDrop)},n.render=function(){var t=this,e=this.state.uploadedFilesData;return Object(o.h)("div",{style:{position:"relative"},ref:this.dropRef},this.state.drag&&Object(o.h)("div",{style:{border:"dashed grey 4px",backgroundColor:"rgba(255,255,255,.8)",position:"absolute",top:0,bottom:0,left:0,right:0,zIndex:9999}},Object(o.h)("div",{style:{position:"absolute",top:"50%",right:0,left:0,textAlign:"center",color:"grey",fontSize:36}},Object(o.h)("div",null,Object(o.h)(r.c,{id:"imageupload.drag-files-here"},"drop your files here :)")))),Object(o.h)("div",null,Object(o.h)("input",{class:"btn btn-info col-sm-12",multiple:!0,type:"file",id:"image-file",onchange:this.handleAddFiles,ref:function(e){t.fileInput=e}})),Object(o.h)("div",null,Object.keys(e).length>0?Object(o.h)("h3",null,Object(o.h)(r.c,{id:"imageupload.upload-images"},"Uploaded images")):"",Object(o.h)("ul",{class:"list-group"},Object.keys(e).map((function(t){var s=e[t].uploadMeta,a=void 0===s?{}:s,n=t.match(/(jpg|jpeg|png|gif|heic|heif|svg|webp|tif)/i);return Object(o.h)("li",{class:"list-group-item list-group-item-action flex-column align-items-start"},Object(o.h)("div",{class:"d-flex w-100 justify-content-between"},n&&Object(o.h)("img",{class:"img-fluid mr-3",src:e[t].event.target.result,style:"max-height: 50px;"}),Object(o.h)("small",null,e[t].event.uploadDone),Object(o.h)(r.c,{id:"imageupload.uploading-image"},"Laster opp bilde..."),Object(o.h)("small",null,i.a.formatBytes(e[t].event.total,2))),Object(o.h)("div",{class:"progress mt-1",style:"height: 4px;"},Object(o.h)("div",{class:"progress-bar progress-bar-striped progress-bar-animated bg-success",role:"progressbar",style:"width: "+a.progress+"%; height: 4px;","aria-valuenow":a.progress,"aria-valuemin":"0","aria-valuemax":"100"})))})))),this.props.children)},e}(o.Component))||a;e.a=l},"vY+r":function(t,e,s){"use strict";(function(t){function a(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,a)}return s}function o(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}var n,i=s("hosL"),r=s("Utv1"),l=s("/eY4"),c=s("OhSV"),d=s("ZOvn"),h={},u=Object(l.a)(n=function(e){function s(t){var s;return(s=e.call(this,t)||this).toggleViews=function(){var t=s.props;(t.isTeamAdmin||t.isAdmin)&&s.setState({showViewList:!s.state.showViewList})},s.state=function(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?a(Object(s),!0).forEach((function(e){o(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):a(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}({},h),s}var n,l;return l=e,(n=s).prototype=Object.create(l.prototype),n.prototype.constructor=n,n.__proto__=l,s.prototype.render=function(){var e=this.state.showViewList,s=this.props.stores,a=s.storyStore,o=s.teamStore,n=s.workoutStore,l=this.props,h=l.views,u=l.type,m=void 0===u?"story":u,b=l.onTeamClick,p=void 0===b?function(){}:b,f=[];Object.entries(l.object.statistics).forEach((function(t){Object.entries(t[1]).forEach((function(t){var e=t[1];e.viewUsers&&f.push(e.viewUsers)}))}));var g=f.flat().slice(0,50);return Object(i.h)(t,null,Object(i.h)("div",{class:"d-flex justify-content-end mb-2"},Object(i.h)("span",{class:"ml-2 text-muted font-weight-lighter",onClick:this.toggleViews},h," ",Object(i.h)(c.c,{id:"story.views"},"views"))),e&&Object(i.h)("div",{class:"mt-3 mb-3"},g&&g.map((function(e){var s,l,c;if("story"===m?(s=a.findPublicUser(e),l=a.findPublicTeamByMembers(e)):"team"===m?(s=o.findPublicUser(e),l=o.findPublicTeamByMembers(e)):"workout"===m&&(s=n.findPublicUser(e),l=n.findPublicTeamByMembers(e)),!s)return"";r.a.isArray(l)&&(c=l.find((function(t){return 1===t.public})));var h=d.a.getImage({user:s,team:c,priority:"user"}),u=d.a.displayNameShort(s),b=d.a.displayName(s,!0);return Object(i.h)("div",{class:"d-flex flex-row position-relative font-weight-light mb-1"},c?Object(i.h)(t,null,Object(i.h)("a",{href:"/teams/public/"+c.uuidv4,title:c.name,onClick:function(t){return p(t,c.uuidv4)},class:"stretched-link"},Object(i.h)("div",{class:"text-center border rounded-circle imageRounded imageRoundedThumb",style:h?'background-image: url("'+h+'"); background-size: cover;':""},!h&&Object(i.h)("div",{class:"",style:"font-size: 12px; padding-top: 3px;"},u))),Object(i.h)("div",{class:"ml-2 "},b," ",Object(i.h)("span",{class:"font-weight-lighter"},"- ",c.name))):Object(i.h)(t,null,Object(i.h)("div",{class:"text-center border rounded-circle imageRounded imageRoundedThumb",style:(h?'background-image: url("'+h+'"); background-size: cover;':"")+" opacity: 0.5;"},!h&&Object(i.h)("div",{class:"text-muted",style:"font-size: 12px; padding-top: 3px;"},u)),Object(i.h)("div",{class:"ml-2"},b)))})),h>g.length&&Object(i.h)(t,null,Object(i.h)("small",{class:"text-muted"},Object(i.h)(c.c,{id:"story.limited-to"},"Limited to max 50 users.")))))},s}(i.Component))||n;e.a=u}).call(this,s("hosL").Fragment)},w8dD:function(t,e,s){"use strict";function a(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,a)}return s}function o(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}var n,i=s("hosL"),r=s("Utv1"),l=s("/eY4"),c=s("UJvz"),d=s("lcEk"),h=s("ePpR"),u=(s("nHdA"),s("irB3")),m=(s("UwwE"),s("8Lgr")),b=(s("QkTp"),s("ZOvn")),p=b.a.getMaxLoadIndex(),f={showAddComment:!1},g=Object(l.a)(n=function(t){function e(e){var s;return(s=t.call(this,e)||this).likeTrack=function(){return new Promise((function(t,e){return Promise.resolve(s.props.stores.trackStore.likeTrack({id:s.props.track.id})).then((function(s){try{return s,t()}catch(t){return e(t)}}),e)}))},s.toggleAddComment=function(t){var e=t.target.parentElement.dataset.id||t.target.dataset.id;s.setState({showAddComment:!s.state.showAddComment},(function(){s.inputRef[e]&&s.inputRef[e].focus()}))},s.showModal=function(t){t.stopPropagation(),t.preventDefault(),s.setState({displayModal:!0,currentImage:t.target.dataset.image,currentImageXXL:t.target.dataset.imagexxl,thumb:t.target.dataset.thumb,name:t.target.dataset.name,title:t.target.dataset.title,date:t.target.dataset.date})},s.closeModal=function(){s.setState({displayModal:!1})},s.toggleDate=function(){s.setState({showDate:!s.state.showDate})},s.state=function(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?a(Object(s),!0).forEach((function(e){o(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):a(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}({},f),s.updateTimer={},s.inputRef={},s}var s,n;return n=t,(s=e).prototype=Object.create(n.prototype),s.prototype.constructor=s,s.__proto__=n,e.prototype.render=function(){var t=this,e=this.state,s=e.displayModal,a=e.currentImage,o=e.currentImageXXL,n=e.showDate,l=e.thumb,f=e.name,g=e.title,O=e.date,j=e.showAddComment,v=this.props,y=v.track,w=v.showUser,k=void 0!==w&&w,x=v.isPublic,S=void 0!==x&&x,C=y.image&&y.image.s3SmallLink?y.image:null,I=y.gpxInfo,D=(void 0===I?{}:I).loadIndex,T=void 0===D?0:D,P=this.props.stores.userStore.user,R=y.likes,L=void 0===R?[]:R,A=y.comments,E=void 0===A?[]:A,_=y.likes&&y.likes.findIndex((function(t){return t.user===P.id}))>-1;return Object(i.h)("div",{class:"w-100 mb-3"},Object(i.h)("div",{class:"row"},s&&Object(i.h)(c.a,{close:this.closeModal,image:a,imagexxl:o,thumb:l,name:f,title:g,date:O}),Object(i.h)("div",{class:"col-12 col-sm-8 col-lg-6 offset-sm-2 offset-lg-3 d-flex mb-0 position-relative"},Object(i.h)("div",{class:"text-center border rounded-circle imageRounded",style:C?'background-image: url("'+C.s3SmallLink+'");':""},!C&&Object(i.h)("i",{class:"fas fa-map-marked text-muted mt-3",style:"font-size: 40px;"})),Object(i.h)("div",{class:"flex-grow-1 pl-3",style:"line-height: 1.2em;"},Object(i.h)("a",{class:"stretched-link",href:"/tracks/"+y.id+(S?"/public":"")},Object(i.h)("h5",{class:"mb-1",style:"line-height: 1.0em;"},y.name),Object(i.h)("div",{class:"text-muted font-weight-lighter"},Object(i.h)("small",null,y.place))),Object(i.h)("div",null,Object(i.h)("small",null,T>0&&Object(i.h)("span",{class:"ml-2 text-"+b.a.getLoadIndexColor(r.a.normalizeBetween(T,0,p,0,100))},Object(i.h)("i",{class:"fas fa-hand-rock mr-1"}),Math.floor(r.a.normalizeBetween(T,0,p,0,100))," - ",b.a.getLoadIndexText(r.a.normalizeBetween(T,0,p,0,100))))),Object(i.h)("div",null,1===y.public&&Object(i.h)("span",{class:"badge badge-success"},"Is public"),k&&Object(i.h)("span",{class:"text-muted font-weight-lighter ml-3"},b.a.displayName(y.users))),Object(i.h)("small",{class:"text-muted"},y.date&&Object(i.h)("small",{onClick:this.toggleDate},n?r.a.formatDate(y.date,{locale:"no-NB"}):r.a.formatDistance(y.date,new Date,{locale:"no-NB"}),Object(i.h)("br",null))),Object(i.h)("small",{class:"text-muted"},y.garminId>0&&Object(i.h)("div",{class:"float-left mr-2 text-center border rounded-circle imageRounded imageRoundedIcon",style:'background-image: url("./assets/garmin-connect.png");'}),y.stravaId>0&&Object(i.h)("div",{class:"float-left mr-2 text-center border rounded-circle imageRounded imageRoundedIcon",style:'background-image: url("./assets/strava-icon.png");'}),Object(i.h)("i",{class:"fas fa-road"})," ",Object(i.h)(m.a,{stores:this.props.stores,value:y.distanceKm}),Object(i.h)("i",{class:"fas fa-mountain ml-2"})," ",Object(i.h)(u.a,{stores:this.props.stores,value:y.elevation}),y.gpx&&Object(i.h)("i",{class:"fas fa-map-marked-alt ml-2"})))),Object(i.h)("div",{class:"col-12 col-sm-8 col-lg-6 offset-sm-2 offset-lg-3 mt-1",style:"padding-left: 122px;"},Object(i.h)("div",{class:"row"},y.images&&y.images.map((function(e){return Object(i.h)("div",{class:"text-center border rounded imageRounded imageRoundedSmall",style:e?'background-image: url("'+e.s3SmallLink+'");':"",onClick:t.showModal,"data-image":e.s3LargeLink,"data-imagexxl":e.s3XXLargeLink,"data-thumb":y.image&&y.image.s3SmallLink,"data-title":y.name,"data-date":y.date}," ")})))),Object(i.h)("div",{class:"col-10 offset-2 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-3"},L&&L.length>0&&Object(i.h)("small",{class:"bg-light shadow-sm rounded-lg py-0 px-1",style:"bottom: 20px; right: 15px;"},Object(i.h)("i",{class:"fas fa-thumbs-up text-primary"})," ",L.length),E&&E.length>0&&Object(i.h)("small",{class:"float-right bg-light shadow-sm rounded-lg py-0 px-1",style:"bottom: 20px; right: 15px;"},Object(i.h)("i",{class:"fas fa-comment text-primary"})," ",E.length)),Object(i.h)("div",{class:"col-10 offset-2 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-2 mb-3"},Object(i.h)("div",{class:"row"},Object(i.h)("div",{class:"col-6 text-center"},Object(i.h)("button",{type:"button",class:"btn btn-sm btn-outline-"+(_?"primary":"secondary")+" btn-lg btn-block "+(_?"text-primary":""),onClick:this.likeTrack},Object(i.h)("i",{class:(_?"text-primary fas":"far")+" fa-thumbs-up"})," Like")),Object(i.h)("div",{class:"col-6 text-center"},Object(i.h)("button",{type:"button",class:"btn btn-sm btn-outline-secondary btn-lg btn-block","data-id":y.id,onClick:this.toggleAddComment},Object(i.h)("i",{class:"fas fa-comment"})," Comment")))),j&&Object(i.h)(h.a,{stores:this.props.stores,track:y,inputRef:function(e){return t.inputRef[y.id]=e}}),Object(i.h)(d.a,{stores:this.props.stores,track:y,col:10,offset:2,compact:!0})))},e}(i.Component))||n;e.a=g},zc1A:function(t,e,s){"use strict";s.r(e),function(t){function a(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,a)}return s}function o(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}var n,i=s("hosL"),r=(s("Utv1"),s("/eY4")),l=s("OhSV"),c=s("go65"),d=s("Y3FI"),h=s("KDoM"),u=(s("JWe/"),s("bMs3")),m=s("w8dD"),b=(s("Gx/q"),s("NMoA")),p=s("ISGx"),f={submenu:"dogs",hits:0,searchText:""},g=Object(r.a)(n=function(e){function s(t){var s;return(s=e.call(this,t)||this).loadAll=function(t){return new Promise((function(e,a){var o,n,i,r,l,c,d,h,u,m,b,p;return void 0===t&&(t=s.props),n=(o=s.props.stores).appState,i=o.storyStore,r=o.teamStore,l=t.search,Promise.resolve(n.getSearch(l)).then((function(){try{return d=n.publicUsers,i.localUpdateField("publicTeams",c=n.publicTeams),i.localUpdateField("publicUsers",d),r.localUpdateField("publicTeams",c),r.localUpdateField("publicUsers",d),m=["stories","dogs","workouts","teams","tracks","users"],b=(u=[n.searchResultStories,n.searchResultDogs,void 0===(h=n.searchResultWorkouts)?[]:h,n.searchResultTeams,n.searchResultTracks]).map((function(t){return t.length})).indexOf(Math.max.apply(Math,u.map((function(t){return t.length})))),p=u.map((function(t){return t.length})).reduce((function(t,e){return t+e}),0),s.setState({searchText:l,submenu:m[b],hits:p}),e()}catch(t){return a(t)}}),a)}))},s.search=function(){var t=s.state.searchText;Object(d.route)("/search/"+t)},s.chooseSubmenu=function(t){s.setState({submenu:t.target.parentElement.dataset.menu||t.target.dataset.menu})},s.state=function(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?a(Object(s),!0).forEach((function(e){o(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):a(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}({},f),s}var n,r;r=e,(n=s).prototype=Object.create(r.prototype),n.prototype.constructor=n,n.__proto__=r;var g=s.prototype;return g.componentDidMount=function(){this.loadAll()},g.componentWillReceiveProps=function(t){t.search!==this.props.search&&this.loadAll(t)},g.render=function(){var e=this,s=this.props.stores,a=s.appState,o=this.props.search,n=a.searchResultStories,r=a.searchResultDogs,d=a.searchResultWorkouts,f=void 0===d?[]:d,g=a.searchResultTeams,O=a.searchResultTracks,j=a.publicUsers,v=this.state,y=v.submenu,w=v.hits,k=v.searchText;return Object(i.h)("div",{class:"container-fluid",style:"margin-bottom: 200px; margin-top: 60px;"},Object(i.h)("div",{class:"row"},Object(i.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-0 mb-2"},Object(i.h)("h1",null,Object(i.h)(l.c,{id:"search.title"},"Search")),Object(i.h)("h5",{class:"my-3"},Object(i.h)(l.c,{id:"search.search-for",fields:{search:o,hits:w}},w,' in your search for "',o,'"')),Object(i.h)("div",{class:"d-flex justify-content-center py-3"},Object(i.h)(l.b,null,Object(i.h)("input",{class:"form-control form-control mr-2",type:"search",placeholder:Object(i.h)(l.c,{id:"header.search-placeholder"},"Søk etter det meste..."),value:k,onInput:Object(c.a)(this,"searchText")})),Object(i.h)("button",{class:"btn btn-outline-success",type:"button",onClick:this.search},Object(i.h)(l.c,{id:"header.search"},"Søk")))),Object(i.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 my-3"},Object(i.h)("div",{class:"row"},Object(i.h)("div",{class:"w-100 overflow-hidden"},Object(i.h)("div",{class:"d-flex flex-row flex-nowrap pb-2 px-1",style:"overflow: auto; scroll-snap-type: x mandatory;"},Object(i.h)("div",{class:"col px-0 pt-2"},Object(i.h)("button",{class:"btn btn-block rounded-pill-left rounded-none "+("dogs"===y?"btn-primary":"btn-outline-primary")+" text-nowrap",style:"text-overflow: ellipsis; overflow: hidden;","data-menu":"dogs",onClick:this.chooseSubmenu},Object(i.h)("i",{class:"fas fa-dog"})," ",Object(i.h)(l.c,{id:"search.dogs"},"Dogs")," (",r.length||0,")")),Object(i.h)("div",{class:"col px-0 pt-2"},Object(i.h)("button",{class:"btn btn-block rounded-none "+("teams"===y?"btn-primary":"btn-outline-primary")+" text-nowrap",style:"text-overflow: ellipsis; overflow: hidden;","data-menu":"teams",onClick:this.chooseSubmenu},Object(i.h)("i",{class:"fas fa-users"})," ",Object(i.h)(l.c,{id:"search.teams"},"Teams")," (",g.length||0,")")),Object(i.h)("div",{class:"col px-0 pt-2"},Object(i.h)("button",{class:"btn btn-block rounded-none "+("tracks"===y?"btn-primary":"btn-outline-primary")+" text-nowrap",style:"text-overflow: ellipsis; overflow: hidden;","data-menu":"tracks",onClick:this.chooseSubmenu},Object(i.h)("i",{class:"fas fa-map-marked-alt"})," ",Object(i.h)(l.c,{id:"search.tracks"},"Tracks")," (",O.length||0,")")),Object(i.h)("div",{class:"col px-0 pt-2"},Object(i.h)("button",{class:"btn btn-block rounded-pill-right rounded-none "+("stories"===y?"btn-primary":"btn-outline-primary")+" text-nowrap",style:"text-overflow: ellipsis; overflow: hidden;","data-menu":"stories",onClick:this.chooseSubmenu},Object(i.h)("i",{class:"fas fa-comments"})," ",Object(i.h)(l.c,{id:"search.stories"},"Stories")," (",n.length||0,")")))))),"dogs"===y&&Object(i.h)(t,null,Object(i.h)("div",{class:"col-12"},(!r||0===r.length)&&Object(i.h)(t,null,Object(i.h)("div",{class:"text-center text-muted"},Object(i.h)("div",{class:"display-1"},Object(i.h)("i",{class:"fas fa-dog"})),Object(i.h)("h3",{class:"font-weight-lighter"},Object(i.h)(l.c,{id:"search.no-dogs-found"},"No dogs found.")))),r&&r.map((function(t){return Object(i.h)(h.a,{stores:e.props.stores,dog:t,url:"/dogs/public/"+t.uuidv4})})))),"workouts"===y&&Object(i.h)(t,null,Object(i.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-0 mb-2"},(!f||0===f.length)&&Object(i.h)(t,null,Object(i.h)("div",{class:"text-center text-muted"},Object(i.h)("div",{class:"display-1"},Object(i.h)("i",{class:"fas fa-running"})),Object(i.h)("h3",{class:"font-weight-lighter"},Object(i.h)(l.c,{id:"search.no-workouts-found"},"No workouts found.")))),f&&f.map((function(t,s){return Object(i.h)("div",{class:"row mb-4"},Object(i.h)("div",{class:"col-12 py-3"},Object(i.h)(p.a,{stores:e.props.stores,feed:t,idx:s})))})))),"teams"===y&&Object(i.h)(t,null,Object(i.h)("div",{class:"col-12"},(!g||0===g.length)&&Object(i.h)(t,null,Object(i.h)("div",{class:"text-center text-muted"},Object(i.h)("div",{class:"display-1"},Object(i.h)("i",{class:"fas fa-users"})),Object(i.h)("h3",{class:"font-weight-lighter"},Object(i.h)(l.c,{id:"search.no-teams-found"},"No teams found.")))),g&&g.map((function(s){return Object(i.h)(t,null,Object(i.h)(u.a,{stores:e.props.stores,team:s,url:"/teams/public/"+s.uuidv4,showButton:!0,publicUsers:j,showMembers:1,showLocation:1}))})))),"tracks"===y&&Object(i.h)(t,null,Object(i.h)("div",{class:"col-12"},(!O||0===O.length)&&Object(i.h)(t,null,Object(i.h)("div",{class:"text-center text-muted"},Object(i.h)("div",{class:"display-1"},Object(i.h)("i",{class:"fas fa-map-marked-alt"})),Object(i.h)("h3",{class:"font-weight-lighter"},Object(i.h)(l.c,{id:"search.no-tracks-found"},"No tracks found.")))),O&&O.map((function(t){return Object(i.h)(m.a,{stores:e.props.stores,track:t})})))),"stories"===y&&Object(i.h)(t,null,Object(i.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-0 mb-2"},(!n||0===n.length)&&Object(i.h)(t,null,Object(i.h)("div",{class:"text-center text-muted"},Object(i.h)("div",{class:"display-1"},Object(i.h)("i",{class:"fas fa-comments"})),Object(i.h)("h3",{class:"font-weight-lighter"},Object(i.h)(l.c,{id:"search.no-stories-found"},"No stories found.")))),n&&n.map((function(t){return Object(i.h)("div",{class:"row mb-4"},Object(i.h)("div",{class:"col-12 py-3"},Object(i.h)(b.a,{stores:e.props.stores,story:t,key:"story-detail-"+t.id})))}))))))},s}(i.Component))||n;e.default=g}.call(this,s("hosL").Fragment)}}]);
//# sourceMappingURL=route-search.chunk.d0f13.js.map