(window.webpackJsonp=window.webpackJsonp||[]).push([[32],{"+JSK":function(t,e,s){"use strict";(function(t){function o(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,o)}return s}function a(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}var i,n=s("hosL"),l=s("Utv1"),r=s("/eY4"),c=s("OhSV"),h=s("ZOvn");const d={};let b=Object(r.a)(i=class extends n.Component{constructor(t){super(t),this.toggleLikes=()=>{const{showLikesList:t}=this.state;this.setState({showLikesList:!t})},this.state=function(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?o(Object(s),!0).forEach((function(e){a(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):o(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}({},d)}render(){const{showLikesList:e}=this.state,{storyStore:s,teamStore:o,workoutStore:a,raceStore:i}=this.props.stores,{likes:r,comments:d,type:b="story",onTeamClick:m=(()=>{}),onUserClick:u=(()=>{})}=this.props;return Object(n.h)(t,null,Object(n.h)("div",{class:"d-flex justify-content-between mb-2"},r&&r.length>0&&Object(n.h)(t,null,Object(n.h)("div",{class:"d-flex flex-row flex-nowrap position-relative mr-3",style:"overflow: auto;"},Object(n.h)("span",{class:"text-muted mr-2",onClick:this.toggleLikes},Object(n.h)("i",{class:"fas fa-thumbs-up text-primary"})," ",r.length),r.slice(0,1).map(e=>{let r,c,d;"story"===b?(r=s.findPublicUser(e.user),c=s.findPublicTeamByMembers(e.user)):"team"===b?(r=o.findPublicUser(e.user),c=o.findPublicTeamByMembers(e.user)):"workout"===b?(r=a.findPublicUser(e.user),c=a.findPublicTeamByMembers(e.user)):"race"===b&&(r=i.findPublicUser(e.user),c=i.findPublicTeamByMembers(e.user)),l.a.isArray(c)&&(d=c.find(t=>1===t.public));h.a.getImage({user:r,team:d,priority:"user"}),h.a.displayNameShort(r);const u=h.a.displayName(r);return Object(n.h)(t,null,Object(n.h)("span",{class:"font-weight-lighter"},d?Object(n.h)(t,null,Object(n.h)("a",{href:"/teams/public/"+d.uuidv4,title:d.name,onClick:t=>m(t,d.uuidv4)},u)):Object(n.h)(t,null,u)))}),r.length>1&&Object(n.h)(t,null,Object(n.h)("span",{class:"text-muted font-weight-lighter ml-2",onClick:this.toggleLikes},Object(n.h)(c.c,{id:"likes-comments.and",fields:{total:r.length-1}},"and ",r.length-1," others."))))),d&&d.length>0&&Object(n.h)("span",{class:"float-right text-muted"},Object(n.h)("i",{class:"fas fa-comment text-primary"})," ",d.length)),e&&Object(n.h)("div",{class:"mt-3 mb-3"},r&&r.map(e=>{let r,c,d;"story"===b?(r=s.findPublicUser(e.user),c=s.findPublicTeamByMembers(e.user)):"team"===b?(r=o.findPublicUser(e.user),c=o.findPublicTeamByMembers(e.user)):"workout"===b?(r=a.findPublicUser(e.user),c=a.findPublicTeamByMembers(e.user)):"race"===b&&(r=i.findPublicUser(e.user),c=i.findPublicTeamByMembers(e.user)),l.a.isArray(c)&&(d=c.find(t=>1===t.public));const u=h.a.getImage({user:r,team:d,priority:"user"}),p=h.a.displayNameShort(r),g=h.a.displayName(r,!0);return Object(n.h)("div",{class:"d-flex flex-row position-relative font-weight-light mb-1"},d?Object(n.h)(t,null,Object(n.h)("a",{href:"/teams/public/"+d.uuidv4,title:d.name,onClick:t=>m(t,d.uuidv4),class:"stretched-link"},Object(n.h)("div",{class:"text-center border rounded-circle imageRounded imageRoundedThumb",style:""+(u?`background-image: url("${u}"); background-size: cover;`:"")},!u&&Object(n.h)("div",{class:"",style:"font-size: 12px; padding-top: 3px;"},p))),Object(n.h)("div",{class:"ml-2 "},g," ",Object(n.h)("span",{class:"font-weight-lighter"},"- ",d.name))):Object(n.h)(t,null,Object(n.h)("div",{class:"text-center border rounded-circle imageRounded imageRoundedThumb",style:(u?`background-image: url("${u}"); background-size: cover;`:"")+" opacity: 0.5;"},!u&&Object(n.h)("div",{class:"text-muted",style:"font-size: 12px; padding-top: 3px;"},p)),Object(n.h)("div",{class:"ml-2"},g)))})))}})||i;e.a=b}).call(this,s("hosL").Fragment)},"1OK2":function(t,e,s){"use strict";var o,a=s("hosL"),i=(s("Utv1"),s("/eY4"));Object(i.a)(o=class extends a.Component{constructor(t){super(t),this.touchStart=t=>{t.stopPropagation(),this.setState({startX:t.touches[0].pageX})},this.touchEnd=t=>{t.stopPropagation(),this.setState({startX:void 0,sliding:!1})},this.touchMove=t=>{t.stopPropagation();const{totalImages:e}=this.state;if(e>1){const{startX:e,sliding:s}=this.state,o=50,a=t.touches[0].pageX;s||(a>e+o?(this.setState({sliding:!0}),this.prevImage()):a<e-o&&(this.setState({sliding:!0}),this.nextImage()))}};const{images:e=[]}=t;this.state={imageContainer:1,currentImage1:e[0]||{},currentImage2:{},currentIdx:0,totalImages:e.length||0,imageDots:[...Array(e.length||0).fill(1).map((t,e)=>t+e)]}}nextImage(){const{images:t}=this.props,{totalImages:e,currentIdx:s,imageContainer:o}=this.state,a=1===o?2:1;let i=s+1;i>e-1&&(i=0),this.setState({["currentImage"+a]:t[i],currentIdx:i,imageContainer:a})}prevImage(){const{images:t}=this.props,{totalImages:e,currentIdx:s,imageContainer:o}=this.state;let a=s-1;a<0&&(a=e-1),this.setState({["currentImage"+(1===o?2:1)]:t[a],currentIdx:a,imageContainer:1===o?2:1})}componentWillReceiveProps(t){if(t.images!==this.props.images){const{images:e=[]}=t;this.setState({imageContainer:1,currentImage1:e.length>0?e[0]:{},currentImage2:{},currentIdx:0,totalImages:e.length||0,imageDots:[...Array(e.length||0).fill(1).map((t,e)=>t+e)]})}}render(){const{currentImage1:t,currentImage2:e,imageContainer:s,totalImages:o,imageDots:i,currentIdx:n}=this.state,l=this["image"+s],r=1===s?t:e,c=l&&l.height?l.width/l.height:4/3;let h,d;if(r.dimensions){const{width:t,height:e,orientation:s}=r.dimensions;s>4&&s<9?(h=t,d=e):(h=e,d=t)}const b=r.dimensions?d/h:c;return o<=0?"":Object(a.h)("div",{class:"w-100"},Object(a.h)("div",{class:"border rounded position-relative w-100",style:`height: calc(85vw / ${b}); overflow: hidden; transition: all .3s ease-in-out;`,onTouchstart:this.touchStart,onTouchend:this.touchEnd,onTouchmove:this.touchMove},o>1&&Object(a.h)("span",{class:"position-absolute",style:"top:0px; right: 5px; z-index: 2000;"},Object(a.h)("small",null,n+1,"/",o)),t&&Object(a.h)("div",{class:"position-absolute",style:(1===s?"opacity: 1;":"opacity: 0;")+" transition: all .3s ease-in-out; top: 0; left: 0;"},Object(a.h)("img",{loading:"lazy",src:t.s3LargeLink,class:"img-fluid align-middle",ref:t=>this.image1=t})),e&&Object(a.h)("div",{class:"position-absolute",style:(2===s?"opacity: 1;":"opacity: 0;")+" transition: all .3s ease-in-out; top: 0; left: 0;"},Object(a.h)("img",{loading:"lazy",src:e.s3LargeLink,class:"img-fluid align-middle",ref:t=>this.image2=t}))),i.length>1&&Object(a.h)("div",{class:"w-100 text-center"},i.map(t=>Object(a.h)("span",{style:`color: ${t===n+1?"#ffffff":"#808080"};`},"•"))))}})},"4QWe":function(t,e,s){"use strict";(function(t){var o,a=s("hosL"),i=s("Utv1"),n=s("/eY4"),l=s("OhSV"),r=s("go65"),c=s("om2D"),h=s("ZOvn");let d=Object(n.a)(o=class extends a.Component{constructor(t){var e;super(t),e=this,this.beforeImagesUploaded=()=>{this.setState({sendButtonEnabled:!1})},this.afterImagesUploaded=()=>{this.setState({sendButtonEnabled:!0})},this.commentStory=async function(){const{sendButtonEnabled:t}=e.state;if(!t)return!1;const{callback:s=(()=>{}),inputRefObject:o={}}=e.props,{story:a}=e.props,{storyStore:i}=e.props.stores,{comment:n,showAddImage:l}=e.state;e.setState({sendButtonEnabled:!1});const r=await i.commentStory({id:a.id,comment:n});r&&200===r.status&&(e.setState({comment:{body:"",images:[]}},()=>{h.a.resizeTextarea(o[a.id]),l&&e.addImage()}),s({story:a,response:r})),e.setState({sendButtonEnabled:!0})},this.addImages=({value:t})=>{const{comment:e}=this.state;e.images.push(...t),this.setState({comment:e})},this.addImage=()=>{const{showAddImage:t=!1}=this.state;this.setState({showAddImage:!t})},this.handleImageErrored=t=>{const e=t.target;e.onerror=null,setTimeout(()=>{e.src+="?"+new Date},1e3)},this.state={comment:{body:"",images:[]},showAddImage:!1,sendButtonEnabled:!0},this.inputRef={}}render(){const{inputRef:e,story:s}=this.props,{comment:o,showAddImage:n,sendButtonEnabled:d}=this.state,{userStore:b}=this.props.stores,{user:m={}}=b,u=h.a.displayNameShort(m),p=(h.a.displayName(m),m.image||(m.images?m.images[0]:void 0));return Object(a.h)("div",null,Object(a.h)("div",{class:"d-flex mb-0 position-relative w-100"},Object(a.h)("div",{class:"text-center border rounded-circle imageRounded imageRoundedSmall",style:(p?`background-image: url('${p.s3SmallLink}'); background-size: cover;`:"")+" border-width: 3px !important;"},!m.image&&Object(a.h)("span",{class:"font-weight-lighter",style:"font-size: 15px;"},u)),Object(a.h)("div",{class:"col pl-3",style:"line-height: 1.2em;"},Object(a.h)("div",{class:"d-flex bd-highlight"},Object(a.h)("div",{class:"p-0 w-100 bd-highlight"},Object(a.h)("label",{class:"sr-only",for:"inlineFormInput"},Object(a.h)(l.c,{id:"comments.comment"},"Kommentar")),Object(a.h)("div",{class:"border rounded rounded-lg position-relative"},Object(a.h)(l.b,null,Object(a.h)("textarea",{class:"form-control-plaintext px-2",type:"text",placeholder:Object(a.h)(l.c,{id:"comments.write-comment"},"Skriv en kommentar..."),onInput:Object(r.a)(this,"comment.body"),onKeyUp:h.a.resizeTextarea,onFocus:h.a.resizeTextarea,style:"height: 2.3em;",value:o.body,ref:e})),Object(a.h)("div",{class:"position-absolute",style:"top: 8px; right: 10px; font-size: 1.2em;"},Object(a.h)("i",{class:"fas fa-image pointerCursor","data-id":s.id,onClick:this.addImage})))),Object(a.h)("div",{class:"p-0 pl-2 flex-shrink-1 bd-highlight"},Object(a.h)("button",{type:"button",class:`btn btn-${d?"primary":"secondary"} mb-2`,disabled:!d,onClick:this.commentStory},Object(a.h)("i",{class:"fas fa-paper-plane"})))))),n&&Object(a.h)(t,null,Object(a.h)("div",{class:"col-12 text-center"},Object(a.h)("div",{class:"container-fluid"},Object(a.h)("div",{class:"row"},i.a.isArray(o.images)&&o.images.map(t=>Object(a.h)("div",{class:"col-3 p-1"},Object(a.h)("img",{src:t.s3SmallLink,class:"img-fluid",onError:this.handleImageErrored}),Object(a.h)("button",{class:"btn btn-sm btn-link",onClick:this.removeImage,"data-name":t.name},Object(a.h)("i",{class:"fas fa-trash"})," ",Object(a.h)(l.c,{id:"comments.remove-image"},"Remove")))))),Object(a.h)(c.a,{object:o,updateField:this.addImages,before:this.beforeImagesUploaded,after:this.afterImagesUploaded,autoOpen:!0}))))}})||o;e.a=d}).call(this,s("hosL").Fragment)},"5uob":function(t,e,s){"use strict";var o,a=s("hosL"),i=(s("Utv1"),s("/eY4")),n=s("OhSV"),l=s("go65"),r=(s("ETxl"),s("ZOvn"));let c=Object(i.a)(o=class extends a.Component{constructor(t){var e;super(t),e=this,this.commentStory=async function(){const{sendButtonEnabled:t}=e.state;if(!t)return!1;const{callback:s=(()=>{}),commentId:o,inputRefObject:a={}}=e.props,{story:i}=e.props,{storyStore:n}=e.props.stores,{comment:l=""}=e.state;e.setState({sendButtonEnabled:!1});const c=await n.commentReplyStory({id:i.id,commentId:o,comment:l});c&&200===c.status&&(e.setState({comment:""},()=>{r.a.resizeTextarea(a[o])}),s({story:i,response:c,commentId:o})),e.setState({sendButtonEnabled:!0})},this.state={sendButtonEnabled:!0},this.inputRef={}}componentDidMount(){const{initCall:t=(()=>{})}=this.props;t()}render(){const{inputRef:t}=this.props,{comment:e,sendButtonEnabled:s}=this.state,{userStore:o}=this.props.stores,{user:i={}}=o,c=r.a.displayNameShort(i),h=(r.a.displayName(i),i.image||(i.images?i.images[0]:void 0));return Object(a.h)("div",{class:"w-100"},Object(a.h)("div",{class:"d-flex mb-0 position-relative w-100"},Object(a.h)("div",{class:"text-center border rounded-circle imageRounded imageRoundedThumb",style:(h?`background-image: url('${h.s3SmallLink}'); background-size: cover;`:"")+" border-width: 3px !important;"},!h&&Object(a.h)("span",{class:"font-weight-lighter",style:"font-size: 15px;"},c)),Object(a.h)("div",{class:"col pl-3",style:"line-height: 1.2em;"},Object(a.h)("div",{class:"d-flex bd-highlight"},Object(a.h)("div",{class:"p-0 w-100 bd-highlight"},Object(a.h)("label",{class:"sr-only",for:"inlineFormInput"},Object(a.h)(n.c,{id:"comments.comment"},"Kommentar")),Object(a.h)("div",{class:"border rounded rounded-lg position-relative"},Object(a.h)(n.b,null,Object(a.h)("textarea",{class:"form-control-plaintext px-2",type:"text",placeholder:Object(a.h)(n.c,{id:"comments.write-comment"},"Skriv en kommentar..."),onInput:Object(l.a)(this,"comment"),onKeyUp:r.a.resizeTextarea,style:"height: 2.3em;",value:e,ref:t})))),Object(a.h)("div",{class:"p-0 pl-2 flex-shrink-1 bd-highlight"},Object(a.h)("button",{type:"button",class:`btn btn-${s?"primary":"secondary"} mb-2`,disabled:!s,onClick:this.commentStory},Object(a.h)("i",{class:"fas fa-paper-plane"})))))))}})||o;e.a=c},AEg1:function(t,e,s){"use strict";(function(t){function o(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,o)}return s}function a(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}var i,n=s("hosL"),l=s("Utv1"),r=s("/eY4"),c=s("OhSV"),h=s("go65"),d=s("om2D"),b=s("ZOvn");const m={showAddImage:!1,showTeamChange:!1,showChangeVisibility:!1,showChangeType:!1,sendButtonEnabled:!0};let u=Object(r.a)(i=class extends n.Component{constructor(t){var e;super(t),e=this,this.beforeImagesUploaded=()=>{this.setState({sendButtonEnabled:!1})},this.afterImagesUploaded=()=>{this.setState({sendButtonEnabled:!0})},this.addStory=async function(){const{story:t={},showAddImage:s,sendButtonEnabled:o}=e.state,{callback:a=(()=>{}),hashTags:i=[],postfix:n,topic:l="team-"+t.team}=e.props,{storyStore:r}=e.props.stores;if(!o)return!1;if(!t.body)return!1;e.setState({sendButtonEnabled:!1});let c=t.body;n&&(c+="\n\n"+n),i&&i.length>0&&(c+="\n\n"+i.map(t=>"#"+t).join(" "));const h=await r.insert({type:t.type,title:t.title,body:c,pinned:t.pinned,images:t.images,public:t.public?1:0,team:t.team,urlText:t.urlText,url:t.url,currency:t.currency,price:t.price,code:t.code,country:t.country,region:t.region,startDate:t.startDate,endDate:t.endDate,topic:l});h&&201===h.status&&(await r.loadPublicFeed({hashtags:i}),e.setState({story:{type:1,title:"",body:"",pinned:null,images:[],public:1,urlText:"",url:"",currency:"",price:null,code:"",country:"",region:"",startDate:null,endDate:null}},()=>{b.a.resizeTextarea(e.inputRef.newStoryBody),s&&e.addImage()}),a(h.data)),e.setState({sendButtonEnabled:!0})},this.addImages=({value:t})=>{const{story:e}=this.state;e.images.push(...t),this.setState({story:e})},this.addImage=()=>{const{showAddImage:t}=this.state;this.setState({showAddImage:!t})},this.changeVisibility=()=>{const{showChangeVisibility:t}=this.state;this.setState({showChangeVisibility:!t})},this.changePinned=()=>{const{showChangeVisibility:t}=this.state;this.setState({showChangeVisibility:!t})},this.changeType=()=>{const{showChangeType:t}=this.state;this.setState({showChangeType:!t})},this.toggleTeamChange=()=>{const{showTeamChange:t}=this.state;this.setState({showTeamChange:!t})},this.handleImageErrored=t=>{const e=t.target;e.onerror=null,setTimeout(()=>{e.src+="?"+new Date},1e3)},this.setPublicTeam=()=>{const{userStore:t}=this.props.stores,e=t.findPublicTeams();if(l.a.isArray(e)&&e.length>0){const{story:t}=this.state;t.team=e[0].id,this.setState({story:t})}},this.setFocus=t=>{this.setState({hasFocus:!0}),b.a.resizeTextarea(t.target)},this.removeFocus=()=>{this.setState({hasFocus:!1})},this.state=function(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?o(Object(s),!0).forEach((function(e){a(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):o(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}({story:{type:1,title:"",body:"",images:[],public:1,urlText:"",url:"",currency:"",price:0,code:"",country:"",region:"",startDate:"",endDate:""}},m),this.inputRef={}}componentDidMount(){this.setPublicTeam()}render(){const{col:e=12,offset:s=0,hashTags:o=[]}=this.props,{story:a={},showAddImage:i,showTeamChange:r,showChangeVisibility:m,showChangeType:u,sendButtonEnabled:p,hasFocus:g}=this.state,{userStore:O,appState:j}=this.props.stores,{user:f={},isAdmin:y}=O,v=f.firstname?`${l.a.ucfirst(f.firstname,!0)}${l.a.ucfirst(f.lastname,!0)}`:""+l.a.ucfirst(f.email||"",!0);let w=f.image||(f.images?f.images[0]:void 0);if(a.team){const t=parseInt(a.team,10),e=O.findTeam(t,!0);w=e.image||(e.images?e.images[0]:void 0)}const{darkmode:x}=j;return Object(n.h)("div",{class:"w-100 px-0"},Object(n.h)("div",{class:"row"},Object(n.h)("div",{class:`col-${e} offset-${s} col-sm-8 col-lg-6 offset-sm-2 offset-lg-3 rounded rounded-lg pt-3 pb-1 bg-${x?"black":"white"} shadow-sm mb-1`},Object(n.h)("div",{class:"d-flex mb-0 position-relative w-100"},Object(n.h)("div",{class:"position-relative"},Object(n.h)("div",{class:"text-center border rounded-circle imageRounded imageRoundedSmall pointerCursor",style:(w?`background-image: url('${w.s3SmallLink}'); background-size: cover;`:"")+" border-width: 3px !important;",onClick:this.toggleTeamChange},!w&&Object(n.h)("span",{class:"font-weight-lighter",style:"font-size: 15px;"},v)),Object(n.h)("div",{class:"position-absolute",style:"top: 16px; right: 0px;"},Object(n.h)("small",{class:"text-white",style:"font-size: 1.5em;"},Object(n.h)("i",{class:"fas fa-caret-down pointerCursor",onClick:this.toggleTeamChange})))),Object(n.h)("div",{class:"col pl-3 pr-0",style:"line-height: 1.2em;"},Object(n.h)("div",{class:"d-flex bd-highlight"},Object(n.h)("div",{class:"p-0 w-100 bd-highlight"},Object(n.h)("label",{class:"sr-only",for:"inlineFormInput"},Object(n.h)(c.c,{id:"story.body"},"Story")),Object(n.h)("div",{class:"border rounded rounded-lg position-relative"},Object(n.h)(c.b,null,Object(n.h)("textarea",{class:"form-control-plaintext px-2",type:"text",placeholder:Object(n.h)(c.c,{id:"story.write-body"},"Hva tenker du på?.."),onInput:Object(h.a)(this,"story.body"),onKeyUp:b.a.resizeTextarea,onFocus:this.setFocus,style:"height: 2.3em;",value:a.body,ref:t=>this.inputRef.newStoryBody=t})),g&&Object(n.h)("div",{class:"position-absolute",style:"bottom: 8px; right: 10px; font-size: 1.2em;"},Object(n.h)("i",{class:"fas fa-image pointerCursor","data-id":a.id,onClick:this.addImage}),Object(n.h)("i",{class:`fas fa-${1===a.public?"globe-europe":"users"} pointerCursor ml-2`,"data-id":a.id,onClick:this.changeVisibility}),y&&Object(n.h)("i",{class:"fas fa-cog pointerCursor ml-2","data-id":a.id,onClick:this.changeType}))),o&&o.length>0&&Object(n.h)(t,null,o.map(e=>Object(n.h)(t,null,Object(n.h)("span",{class:"badge badge-secondary mr-2 my-1"},Object(n.h)("a",{href:"/stories/tag/"+e,class:"text-white"},"#",e)))))),Object(n.h)("div",{class:"p-0 pl-2 flex-shrink-1 bd-highlight pt-auto"},Object(n.h)("button",{type:"button",class:`btn btn-${p?"primary":"secondary"} ml-1`,disabled:!p,onClick:this.addStory},Object(n.h)("i",{class:"fas fa-paper-plane"})))))),Object(n.h)("div",null,Object(n.h)("div",{class:"row"},r&&Object(n.h)(t,null,Object(n.h)("div",{class:"col-12 text-center mt-2"},Object(n.h)("div",{class:"form-group"},Object(n.h)("small",null,Object(n.h)("select",{class:"custom-select custom-select-sm",id:"team",onInput:Object(h.a)(this,"story.team"),onChange:this.toggleTeamChange},Object(n.h)("option",{value:""},"-- ",Object(n.h)(c.c,{id:"story.team-choose"},"Velg team")," --"),l.a.isArray(f.teams)&&f.teams.map(t=>{const e=O.findTeam(t,!0);return e&&e.public?Object(n.h)("option",{value:e.id,selected:a.team==e.id?"selected":""},e.name):""}),!f.teams&&Object(n.h)(t,null,Object(n.h)("option",{value:""},"No public teams"))))))),m&&Object(n.h)(t,null,y&&Object(n.h)(t,null,Object(n.h)("div",{class:"col-12 text-center mt-2"},Object(n.h)("div",{class:"form-group"},Object(n.h)("small",null,Object(n.h)("label",{for:"pinned"},"Pinned to top:"),Object(n.h)("input",{id:"pinned",type:"checkbox",onInput:Object(h.a)(this,"story.pinned"),value:1,checked:a.pinned?1:0}))))),Object(n.h)("div",{class:"col-12 text-center mt-2"},Object(n.h)("div",{class:"form-group"},Object(n.h)("small",null,Object(n.h)("select",{class:"custom-select custom-select-sm",id:"team",onInput:Object(h.a)(this,"story.public"),value:a.public,onChange:this.changeVisibility},Object(n.h)("option",{value:0,selected:0==a.public?"selected":""},"👥 ",Object(n.h)(c.c,{id:"story.visibility-followers"},"Kun synlig for de som følger deg.")),Object(n.h)("option",{value:1,selected:1==a.public?"selected":""},"🌍 ",Object(n.h)(c.c,{id:"story.visibility-public"},"Synlig for alle som bruker appen."))))))),u&&Object(n.h)(t,null,Object(n.h)("div",{class:"col-12 text-center mt-2"},Object(n.h)("div",{class:"form-group"},Object(n.h)("small",null,Object(n.h)("select",{class:"custom-select custom-select-sm",id:"team",onInput:Object(h.a)(this,"story.type"),value:a.type,onChange:this.changeType},Object(n.h)("option",{value:""},"-- ",Object(n.h)(c.c,{id:"story.type-choose"},"Velg type")," --"),Object(n.h)("option",{value:1,selected:1==a.type?"selected":""},"✍️ ",Object(n.h)(c.c,{id:"story.type-regular"},"Vanlig")),Object(n.h)("option",{value:2,selected:2==a.type?"selected":""},"🚀 ",Object(n.h)(c.c,{id:"story.type-ad"},"Annonse")),Object(n.h)("option",{value:3,selected:3==a.type?"selected":""},"📄 ",Object(n.h)(c.c,{id:"story.type-article"},"Artikkel"))))))),i&&Object(n.h)(t,null,Object(n.h)("div",{class:"col-12 text-center mt-2"},Object(n.h)("div",{class:"container-fluid"},Object(n.h)("div",{class:"row"},l.a.isArray(a.images)&&a.images.map(t=>Object(n.h)("div",{class:"col-3 p-1"},Object(n.h)("img",{src:t.s3SmallLink,class:"img-fluid",onError:this.handleImageErrored}),Object(n.h)("button",{class:"btn btn-sm btn-link",onClick:this.removeImage,"data-name":t.name},Object(n.h)("i",{class:"fas fa-trash"})," Del"))))),Object(n.h)(d.a,{object:a,updateField:this.addImages,before:this.beforeImagesUploaded,after:this.afterImagesUploaded,autoOpen:!0}))),a.type>1&&Object(n.h)(t,null,Object(n.h)("div",{class:"col-12 mt-3"},Object(n.h)("label",null,Object(n.h)(c.c,{id:"story.url-text"},"URL text")),Object(n.h)("div",{class:"form-group"},Object(n.h)("small",null,Object(n.h)("input",{class:"form-control",type:"text",name:"urlText",onInput:Object(h.a)(this,"story.urlText"),value:a.urlText})))),Object(n.h)("div",{class:"col-12 mt-3"},Object(n.h)("label",null,Object(n.h)(c.c,{id:"story.url"},"URL")),Object(n.h)("div",{class:"form-group"},Object(n.h)("small",null,Object(n.h)("input",{class:"form-control",type:"text",name:"url",onInput:Object(h.a)(this,"story.url"),value:a.url}))))),2==a.type&&Object(n.h)(t,null,Object(n.h)("div",{class:"col-12 mt-3"},Object(n.h)("label",null,Object(n.h)(c.c,{id:"story.code"},"Code")),Object(n.h)("div",{class:"form-group"},Object(n.h)("small",null,Object(n.h)("input",{class:"form-control",type:"text",name:"code",onInput:Object(h.a)(this,"story.code"),value:a.code})))),Object(n.h)("div",{class:"col-12"},Object(n.h)("label",null,Object(n.h)(c.c,{id:"story.region"},"Region")),Object(n.h)("div",{class:"form-group"},Object(n.h)("small",null,Object(n.h)("input",{class:"form-control",type:"text",name:"region",onInput:Object(h.a)(this,"story.region"),value:a.region})))),Object(n.h)("div",{class:"col-12"},Object(n.h)("label",null,Object(n.h)(c.c,{id:"story.country"},"Country")),Object(n.h)("div",{class:"form-group"},Object(n.h)("small",null,Object(n.h)("input",{class:"form-control",type:"text",name:"country",onInput:Object(h.a)(this,"story.country"),value:a.country})))),Object(n.h)("div",{class:"col-4"},Object(n.h)("label",null,Object(n.h)(c.c,{id:"story.currency"},"Currency")),Object(n.h)("div",{class:"form-group"},Object(n.h)("small",null,Object(n.h)("input",{class:"form-control",type:"text",name:"currency",onInput:Object(h.a)(this,"story.currency"),value:a.currency})))),Object(n.h)("div",{class:"col-8"},Object(n.h)("label",null,Object(n.h)(c.c,{id:"story.price"},"Price")),Object(n.h)("div",{class:"form-group"},Object(n.h)("small",null,Object(n.h)("input",{class:"form-control",type:"text",name:"price",onInput:Object(h.a)(this,"story.price"),value:a.price}))))))))))}})||i;e.a=u}).call(this,s("hosL").Fragment)},AJN2:function(t,e,s){"use strict";(function(t){function o(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,o)}return s}function a(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}var i,n=s("hosL"),l=(s("Utv1"),s("/eY4")),r=s("NMoA");s("ZOvn");const c={};let h=Object(l.a)(i=class extends n.Component{constructor(t){super(t),this.state=function(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?o(Object(s),!0).forEach((function(e){a(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):o(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}({},c),this.inputRef={}}async loadStoriesPublicFeed(t=this.props){const{storyStore:e}=t.stores,{story:s}=t;await e.loadPublicFeed({story:s})}componentDidMount(){this.loadStoriesPublicFeed()}componentWillReceiveProps(t){t.story!==this.props.story&&this.loadStoriesPublicFeed(t)}render(){const{storyStore:e,appState:s}=this.props.stores,{publicFeed:o}=e,{darkmode:a}=s;return Object(n.h)("div",{class:"w-100"},Object(n.h)("div",{class:"row pb-4 bg-light"},Object(n.h)("div",{class:`col-12 col-sm-8 col-lg-6 offset-sm-2 offset-lg-3 my-1 position-relative rounded rounded-lg py-3 bg-${a?"black":"white"} shadow-sm`},!o||0===o.length&&Object(n.h)(t,null,Object(n.h)("div",{class:"text-center text-muted mt-5"},Object(n.h)("div",{class:"display-1 text-center mb-5"},Object(n.h)("i",{class:"fas fa-comment"})),Object(n.h)("h3",null,"No story found!"))),o&&o.map(e=>Object(n.h)(t,null,Object(n.h)(r.a,{stores:this.props.stores,story:e,showAllComments:!0}))))))}})||i;e.a=h}).call(this,s("hosL").Fragment)},B95u:function(t,e,s){"use strict";(function(t){function o(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,o)}return s}function a(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?o(Object(s),!0).forEach((function(e){i(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):o(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}function i(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}var n,l=s("hosL"),r=s("Utv1"),c=s("/eY4"),h=s("cneo"),d=s("OhSV"),b=s("fh8t"),m=s.n(b),u=s("go65"),p=s("5uob"),g=(s("ETxl"),s("ZOvn"));const O={showAddComment:{},showAllComments:!1,showAllReplies:{},viewImageIdx:{},likeComment:{},likeReply:{},showOriginal:{}};let j=Object(c.a)(n=class extends l.Component{constructor(t){var e;super(t),e=this,this.addLikeComment=async function(t){const{callback:s=(()=>{})}=e.props,o=t.target.closest(".commentContainer").dataset.id,{story:a}=e.props,{storyStore:i}=e.props.stores,{likeComment:n}=e.state;n[o]=!0,e.setState({likeComment:n}),setTimeout(()=>{const{likeComment:t}=e.state;delete t[o],e.setState({likeComment:t})},1200);const l=await i.likeStoryComment({id:a.id,commentId:o});return l&&200===l.status&&s({type:"likeComment",story:a,commentId:o,response:l}),!0},this.likeReply=async function(t){const{callback:s=(()=>{})}=e.props,o=t.target.closest(".replyContainer").dataset.id,a=t.target.closest(".replyContainer").dataset.comment,{story:i}=e.props,{storyStore:n}=e.props.stores,{likeReply:l}=e.state;l[o]=!0,e.setState({likeReply:l}),setTimeout(()=>{const{likeReply:t}=e.state;delete t[o],e.setState({likeReply:t})},1200);const r=await n.likeStoryCommentReply({id:i.id,replyId:o,commentId:a});r&&200===r.status&&s({type:"likeReply",story:i,commentId:a,replyId:o,response:r})},this.replyComment=async function(t){const s=t.target.parentElement.dataset.id||t.target.dataset.id,{showAddComment:o}=e.state;o[s]=!o[s],e.setState({showAddComment:o},()=>{e.inputRef[s]&&e.inputRef[s].focus()})},this.toggleComments=()=>{const{showAllComments:t}=this.state;this.setState({showAllComments:!t})},this.toggleReplies=t=>{const e=t.target.parentElement.dataset.id||t.target.dataset.id,{showAllReplies:s}=this.state;s[e]=!s[e],this.setState({showAllReplies:s})},this.toggleMenu=t=>{const{id:e}=t.target.closest("i").dataset,{showMenu:s={}}=this.state;s[e]=!s[e],this.setState({showDeleteComment:{},showEdit:{},showMenu:s})},this.toggleEdit=t=>{const{id:e,comment:s}=t.target.closest("button").dataset,{showEdit:o={}}=this.state;o[e]=!o[e],this.setState({showDeleteComment:{},showEdit:o,showMenu:{},commentEditText:s})},this.toggleDeleteComment=t=>{const{id:e}=t.target.closest("button").dataset,{showDeleteComment:s={}}=this.state;s[e]=!s[e],this.setState({showDeleteComment:s,showEdit:{},showMenu:{}})},this.deleteComment=async function(t){const{id:s}=t.target.closest("button").dataset,{story:o}=e.props,{storyStore:a}=e.props.stores;await a.deleteCommentStory({id:o.id,commentId:s}),e.setState({commentEditText:"",showDeleteComment:{},showEdit:{},showMenu:{}})},this.deleteCommentReply=async function(t){const{id:s,commentid:o}=t.target.closest("button").dataset,{story:a}=e.props,{storyStore:i}=e.props.stores;await i.deleteCommentReplyStory({id:a.id,commentId:o,replyId:s}),e.setState({commentEditText:"",showDeleteComment:{},showEdit:{},showMenu:{}})},this.saveComment=async function(t){const{id:s}=t.target.closest("button").dataset,{commentEditText:o}=e.state,{story:a}=e.props,{storyStore:i}=e.props.stores;await i.editCommentStory({id:a.id,commentId:s,comment:o}),e.setState({commentEditText:"",showDeleteComment:{},showEdit:{},showMenu:{}})},this.saveCommentReply=async function(t){const{id:s,commentid:o}=t.target.closest("button").dataset,{commentEditText:a}=e.state,{story:i}=e.props,{storyStore:n}=e.props.stores;await n.editCommentReplyStory({id:i.id,commentId:o,replyId:s,comment:a}),e.setState({commentEditText:"",showDeleteComment:{},showEdit:{},showMenu:{}})},this.viewImage=t=>{const{id:e,idx:s}=t.target.closest("img").dataset,{viewImageIdx:o}=this.state;o[e]=s,this.setState({viewImageIdx:o})},this.translate=async function(t){t.preventDefault(),t.stopPropagation();const{replyid:s,commentid:o}=t.target.closest("button").dataset,{story:a}=e.props,{userStore:i,storyStore:n}=e.props.stores,{user:l}=i,{showOriginal:r={},translatedText:c={}}=e.state,h=`${o}${s?"-"+s:""}`;r[h]=0,c[h]=s?await n.translateCommentReply({commentid:o,replyid:s,story:a,user:l}):await n.translateComment({commentid:o,story:a,user:l}),e.setState({showOriginal:r,translatedText:c})},this.showOriginal=t=>{const{replyid:e,commentid:s}=t.target.closest("button").dataset;t.preventDefault(),t.stopPropagation();const{showOriginal:o={}}=this.state;o[`${s}${e?"-"+e:""}`]=1,this.setState({showOriginal:o})},this.state=a(a({},O),{},{showAllComments:t.showAllComments}),this.inputRef={}}render(){const{showAddComment:e,showAllComments:s,showAllReplies:o,viewImageIdx:a,showMenu:i={},showEdit:n={},showDeleteComment:c={},commentEditText:b,likeComment:O,showOriginal:j={},translatedText:f={}}=this.state,{story:y,callback:v=(()=>{}),initCall:w=(()=>{}),compact:x=!1}=this.props,{userStore:k,storyStore:S}=this.props.stores,{user:C}=k,{language:I="en"}=C;let T,D=[],P=0,E=0;return y.comments&&(P=y.comments.length,s?D=y.comments:(T=x?0:2,D=y.comments.slice(Math.max(P-T,0))),E=D.length),Object(l.h)("div",null,y&&r.a.isArray(D)&&D.reverse().map(s=>{const{user:x={}}=s,k=S.findPublicTeamByMembers(x.id),D=g.a.displayNameShort(x),P=g.a.displayName(x),E=x.image||(x.images?x.images[0]:void 0),R=s.likes&&s.likes.findIndex(t=>t.user===C.id)>-1;let L=[],F=0,N=0;s.comments&&(F=s.comments.length,L=o[s.id]?s.comments:s.comments.slice(0,T),N=L.length);const A=[];if(s.images){const t=Object(h.i)(s.images);A.push(...t)}const U=a[s.id]?a[s.id]:0,M=A&&A[U]?A[U]:null,{currentLocationGeocode:_={}}=s,V=S.getCommentTranslations({story:y,commentid:s.id,targetLang:I})||f[s.id];let $=V||s.comment;return j[s.id]&&($=s.comment),Object(l.h)("div",{class:"row"},Object(l.h)("div",{class:"col-11 offset-1 d-flex mb-2 position-relative"},Object(l.h)("div",{class:"text-center border rounded-circle imageRounded imageRoundedSmall",style:(E?`background-image: url("${E.s3SmallLink}"); background-size: cover;`:"")+" border-width: 3px !important;"},!x.image&&Object(l.h)("span",{class:"font-weight-lighter",style:"font-size: 15px;"},D)),Object(l.h)("div",{class:"flex-grow-1 pl-3 pt-0",style:"line-height: 1.2em;"},Object(l.h)("div",{class:"bg-light p-2 rounded rounded-lg position-relative"},C.id===x.id&&Object(l.h)(t,null,Object(l.h)("span",{class:"float-right font-weight-lighter text-muted"},Object(l.h)("i",{class:"fas fa-ellipsis-h",onClick:this.toggleMenu,"data-id":s.id}))),i[s.id]&&Object(l.h)(t,null,Object(l.h)("div",{class:"position-absolute bg-white p-2 border rounded rounded-lg shadow-sm",style:"top: 30px; right: 10px; width: 60%; z-index: 999999;"},Object(l.h)("button",{class:"btn btn-link btn-block text-left",onClick:this.toggleEdit,"data-id":s.id,"data-comment":s.comment},Object(l.h)("i",{class:"fas fa-edit"})," Edit"),Object(l.h)("hr",null),Object(l.h)("button",{class:"btn btn-link btn-block text-left",onClick:this.toggleDeleteComment,"data-id":s.id},Object(l.h)("i",{class:"fas fa-trash-alt"})," Delete"))),Object(l.h)("div",null,Object(l.h)("span",{style:"font-size: 0.95em;"},Object(l.h)("h5",{class:"font-weight-bold mb-2",style:"font-size: 1.0em;"},x.uuidv4&&x.uuidv4!==C.uuidv4?Object(l.h)(t,null,Object(l.h)("a",{href:"/inbox/"+x.uuidv4},P)):Object(l.h)(t,null,P),k&&k.length>0&&Object(l.h)(t,null,Object(l.h)("span",{class:"font-weight-lighter text-muted ml-1"},k.filter(t=>1===t.public).slice(0,1).map(e=>Object(l.h)(t,null,"- ",Object(l.h)("a",{href:"/teams/public/"+e.uuidv4},e.name)))))),n[s.id]?Object(l.h)(t,null,Object(l.h)("div",{class:"d-flex bd-highlight"},Object(l.h)("div",{class:"p-0 w-100 bd-highlight"},Object(l.h)("label",{class:"sr-only",for:"inlineFormInput"},Object(l.h)(d.c,{id:"comments.comment"},"Kommentar")),Object(l.h)("div",{class:"border rounded rounded-lg position-relative"},Object(l.h)(d.b,null,Object(l.h)("textarea",{class:"form-control-plaintext px-2",type:"text",placeholder:Object(l.h)(d.c,{id:"comments.write-comment"},"Skriv en kommentar..."),onInput:Object(u.a)(this,"commentEditText"),onKeyUp:g.a.resizeTextarea,onFocus:g.a.resizeTextarea,style:"height: 2.3em;",value:b})))),Object(l.h)("div",{class:"p-0 pl-2 flex-shrink-1 bd-highlight"},Object(l.h)("button",{type:"button",class:"btn btn-primary mb-2",onClick:this.saveComment,"data-id":s.id},Object(l.h)("i",{class:"fas fa-paper-plane"}))))):Object(l.h)(t,null,Object(l.h)(m.a,{markdown:g.a.replaceImages($,s.images,I),markdownOpts:g.a.getMarkdownOptions()})),c[s.id]&&Object(l.h)("div",{class:"clearfix mt-3 mb-3"},Object(l.h)("button",{class:"btn btn-danger float-left",onClick:this.deleteComment,"data-id":s.id},Object(l.h)("i",{class:"fas fa-trash-alt"})," Delete"),Object(l.h)("button",{class:"btn btn-secondary float-right",onClick:this.toggleDeleteComment,"data-id":s.id},Object(l.h)("i",{class:"fas fa-times-circle"})," Cancel")))),Object(l.h)("div",null,Object(l.h)("div",{class:"container-fluid px-3 mt-1"},M&&Object(l.h)("div",{class:"clearfix row position-relative"},Object(l.h)("div",{class:"commentContainer col-12 px-0 overflow-hidden",style:"max-height: 60vh;",onDblclick:this.addLikeComment,"data-id":s.id},Object(l.h)("img",{loading:"lazy",class:"img-fluid",style:"min-width: 100px;",src:M.s3LargeLink})),O[s.id]&&Object(l.h)("span",{class:"likeHeart position-absolute text-white display-1",style:"top: calc(50% - 50px); left: calc(50% - 50px); width: 100px; height: 100px;"},Object(l.h)("i",{class:"fas fa-heart likeStory"}))),A&&A.length>1&&Object(l.h)("div",{class:"clearfix d-flex flex-wrap row"},r.a.isArray(A)&&A.map((e,o)=>Object(l.h)(t,null,Object(l.h)("div",{class:"col px-0 overflow-hidden",style:"max-height: 100px; min-width: 100px;"},Object(l.h)("img",{loading:"lazy",class:"img-fluid border",style:"min-width: 100px;",src:e.s3SmallLink,onClick:this.viewImage,"data-id":s.id,"data-idx":o})))))))),Object(l.h)("small",null,Object(l.h)("button",{class:"commentContainer btn btn-sm btn-link py-0 "+(R?"text-primary":""),onClick:this.addLikeComment,"data-id":s.id,disabled:R},R?Object(l.h)(d.c,{id:"comments.has-liked"},"Liked"):Object(l.h)(d.c,{id:"comments.like"},"Lik")),"-",Object(l.h)("button",{class:"btn btn-sm btn-link py-0",onClick:this.replyComment,"data-id":s.id},Object(l.h)(d.c,{id:"comments.comment-add"},"Kommentar")),s.language!==I&&Object(l.h)(t,null,"-",!j[s.id]&&V?Object(l.h)(t,null,Object(l.h)("button",{type:"button",class:"btn btn-sm btn-link","data-commentid":s.id,onClick:this.showOriginal},Object(l.h)("i",{class:"fas fa-cog"}),"  ",Object(l.h)(d.c,{id:"home.translate-show-original"},"Show original"))):Object(l.h)(t,null,Object(l.h)("button",{type:"button",class:"btn btn-sm btn-link",onClick:this.translate,"data-commentid":s.id},Object(l.h)("i",{class:"fas fa-cog"})," ",Object(l.h)(d.c,{id:"home.translate-to"},"See translation")))),"-",Object(l.h)("button",{class:"btn btn-sm btn-link py-0 disabled"},r.a.formatDistance(s.createdDate,new Date,{locale:"no-NB"}),s.updatedDate&&Object(l.h)(t,null,Object(l.h)("span",{class:"font-weight-light ml-2"},"(Edited ",r.a.formatDistance(s.updatedDate,new Date,{locale:"no-NB"}),")"))))),s.likes&&s.likes.length>0&&Object(l.h)("small",{class:"position-absolute bg-light shadow-sm rounded-lg py-0 px-1",style:"bottom: 20px; right: 15px;"},Object(l.h)("i",{class:"fas fa-thumbs-up text-primary"})," ",s.likes.length)),Object(l.h)("div",{class:"col-10 offset-2 mb-2"},s&&r.a.isArray(L)&&L.map(e=>{const{user:o={}}=e,a=S.findPublicTeamByMembers(o.id),h=g.a.displayNameShort(o),p=g.a.displayName(o),O=o.image||(o.images?o.images[0]:void 0),v=e.likes&&e.likes.findIndex(t=>t.user===C.id)>-1,{currentLocationGeocode:w={}}=e,x=S.getCommentReplyTranslations({story:y,commentid:s.id,replyid:e.id,targetLang:I})||f[`${s.id}-${e.id}`];let k=x||e.comment;return j[`${s.id}-${e.id}`]&&(k=e.comment),Object(l.h)("div",{class:"row"},Object(l.h)("div",{class:"col-12 d-flex mb-2 position-relative"},Object(l.h)("div",{class:"text-center border rounded-circle imageRounded imageRoundedSmall",style:(O?`background-image: url("${O.s3SmallLink}"); background-size: cover;`:"")+" border-width: 3px !important;"},!o.image&&Object(l.h)("span",{class:"font-weight-lighter",style:"font-size: 15px;"},h)),Object(l.h)("div",{class:"flex-grow-1 pl-3 pt-0",style:"line-height: 1.2em;"},Object(l.h)("div",{class:"bg-light p-2 rounded-lg position-relative"},C.id===o.id&&Object(l.h)(t,null,Object(l.h)("span",{class:"float-right font-weight-lighter text-muted"},Object(l.h)("i",{class:"fas fa-ellipsis-h",onClick:this.toggleMenu,"data-id":e.id}))),i[e.id]&&Object(l.h)(t,null,Object(l.h)("div",{class:"position-absolute bg-white p-2 border rounded rounded-lg shadow-sm",style:"top: 30px; right: 10px; width: 60%; z-index: 999999;"},Object(l.h)("button",{class:"btn btn-link btn-block text-left",onClick:this.toggleEdit,"data-id":e.id,"data-comment":e.comment},Object(l.h)("i",{class:"fas fa-edit"})," Edit"),Object(l.h)("hr",null),Object(l.h)("button",{class:"btn btn-link btn-block text-left",onClick:this.toggleDeleteComment,"data-id":e.id},Object(l.h)("i",{class:"fas fa-trash-alt"})," Delete"))),Object(l.h)("span",{style:"font-size: 0.95em;"},Object(l.h)("h5",{class:"font-weight-bold mb-2",style:"font-size: 1.0em;"},p,a&&a.length>0&&Object(l.h)(t,null,Object(l.h)("span",{class:"font-weight-lighter text-muted ml-2"},a.filter(t=>1===t.public).slice(0,1).map(e=>Object(l.h)(t,null,"- ",Object(l.h)("a",{href:"/teams/public/"+e.uuidv4,class:"mr-2"}," ",e.name)))))),n[e.id]?Object(l.h)(t,null,Object(l.h)("div",{class:"d-flex bd-highlight"},Object(l.h)("div",{class:"p-0 w-100 bd-highlight"},Object(l.h)("label",{class:"sr-only",for:"inlineFormInput"},Object(l.h)(d.c,{id:"comments.comment"},"Kommentar")),Object(l.h)("div",{class:"border rounded rounded-lg position-relative"},Object(l.h)(d.b,null,Object(l.h)("textarea",{class:"form-control-plaintext px-2",type:"text",placeholder:Object(l.h)(d.c,{id:"comments.write-comment"},"Skriv en kommentar..."),onInput:Object(u.a)(this,"commentEditText"),onKeyUp:g.a.resizeTextarea,onFocus:g.a.resizeTextarea,style:"height: 2.3em;",value:b})))),Object(l.h)("div",{class:"p-0 pl-2 flex-shrink-1 bd-highlight"},Object(l.h)("button",{type:"button",class:"btn btn-primary mb-2",onClick:this.saveCommentReply,"data-commentid":s.id,"data-id":e.id},Object(l.h)("i",{class:"fas fa-paper-plane"}))))):Object(l.h)(t,null,Object(l.h)(m.a,{markdown:g.a.replaceImages(k,e.images,I),markdownOpts:g.a.getMarkdownOptions()})),c[e.id]&&Object(l.h)("div",{class:"clearfix mt-3 mb-3"},Object(l.h)("button",{class:"btn btn-danger float-left",onClick:this.deleteCommentReply,"data-id":e.id,"data-commentid":s.id},Object(l.h)("i",{class:"fas fa-trash-alt"})," Delete"),Object(l.h)("button",{class:"btn btn-secondary float-right",onClick:this.toggleDeleteComment,"data-id":e.id},Object(l.h)("i",{class:"fas fa-times-circle"})," Cancel")))),Object(l.h)("small",null,Object(l.h)("button",{class:"replyContainer btn btn-sm btn-link py-0 "+(v?"text-primary":""),onClick:this.likeReply,"data-comment":s.id,"data-id":e.id,disabled:v},v?Object(l.h)(d.c,{id:"comments.has-liked"},"Liked"):Object(l.h)(d.c,{id:"comments.like"},"Lik")),"-",Object(l.h)("button",{class:"btn btn-sm btn-link py-0",onClick:this.replyComment,"data-id":s.id},Object(l.h)(d.c,{id:"comments.comment-add"},"Kommentar")),e.language!==I&&Object(l.h)(t,null,"-",!j[`${s.id}-${e.id}`]&&x?Object(l.h)(t,null,Object(l.h)("button",{type:"button",class:"btn btn-sm btn-link","data-commentid":s.id,"data-replyid":e.id,onClick:this.showOriginal},Object(l.h)("i",{class:"fas fa-cog"}),"  ",Object(l.h)(d.c,{id:"home.translate-show-original"},"Show original"))):Object(l.h)(t,null,Object(l.h)("button",{type:"button",class:"btn btn-sm btn-link",onClick:this.translate,"data-commentid":s.id,"data-replyid":e.id},Object(l.h)("i",{class:"fas fa-cog"})," ",Object(l.h)(d.c,{id:"home.translate-to"},"See translation")))),"-",Object(l.h)("button",{class:"btn btn-sm btn-link py-0 disabled"},r.a.formatDistance(e.createdDate,new Date,{locale:"no-NB"}),e.updatedDate&&Object(l.h)(t,null,Object(l.h)("span",{class:"font-weight-light ml-2"},"(Edited ",r.a.formatDistance(e.updatedDate,new Date,{locale:"no-NB"}),")"))))),e.likes&&Object(l.h)("small",{class:"position-absolute bg-light shadow-sm rounded-lg py-0 px-1",style:"bottom: 20px; right: 15px;"},Object(l.h)("i",{class:"fas fa-thumbs-up text-primary"})," ",e.likes.length)))}),F-N>0&&Object(l.h)("div",null,Object(l.h)("button",{class:"btn btn-sm btn-link py-0",onClick:this.toggleReplies,"data-id":s.id},Object(l.h)(d.c,{id:"comments.show-more",fields:{more:F-N}},"Vis ",F-N," flere kommentarer...")))),e[s.id]&&Object(l.h)("div",{class:"col-11 offset-1 d-flex mb-2 position-relative"},Object(l.h)(p.a,{stores:this.props.stores,story:y,initCall:w,callback:v,commentId:s.id,inputRef:t=>this.inputRef[s.id]=t,inputRefObject:this.inputRef,key:"story-commentreply-"+s.id})))}),P-E>0&&Object(l.h)("div",null,Object(l.h)("button",{class:"btn btn-sm btn-link py-0",onClick:this.toggleComments},Object(l.h)(d.c,{id:"comments.show-more",fields:{more:P-E}},"Vis ",P-E," flere kommentarer..."))),s&&Object(l.h)("div",null,Object(l.h)("button",{class:"btn btn-sm btn-link py-0",onClick:this.toggleComments},Object(l.h)(d.c,{id:"comments.hide-all-comments"},"Skjul alle kommentarene."))))}})||n;e.a=j}).call(this,s("hosL").Fragment)},ETxl:function(t){t.exports={hoverelementonly:"hoverelementonly__1mJGJ",hoverElement:"hoverElement__axh3O",hoverelementhide:"hoverelementhide__1k_qH","progress-bar-vertical":"progress-bar-vertical__1B2sC","progress-bar":"progress-bar__pnsVj",dragged:"dragged__QXO46",over:"over__1re3x",list:"list__q_emZ"}},NMoA:function(t,e,s){"use strict";(function(t){function o(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,o)}return s}function a(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}var i,n,l,r,c,h=s("hosL"),d=s("Utv1"),b=s("/eY4"),m=s("cneo"),u=s("OhSV"),p=s("fh8t"),g=s.n(p),O=s("go65"),j=s("Y3FI"),f=(s("X9Km"),s("1OK2"),s("B95u")),y=s("4QWe"),v=(s("NMoA"),s("s4FZ")),w=s("+JSK"),x=s("vY+r"),k=s("eQ6k"),S=s("ZOvn");const C={showAddComment:{},showTeamSetting:{},viewImageIdx:{},likeStory:{}};let I=Object(b.a)(i=class extends h.Component{constructor(t){var e;super(t),e=this,this.saveStory=async function(t){const{id:s}=t.target.closest("button").dataset,{storyBody:o}=e.state,{storyStore:a}=e.props.stores,{callback:i=(()=>!0)}=e.props;await a.saveField(parseInt(s,10),"body",o,!0),a.publicFeedUpdate(parseInt(s,10),"body",o),e.setState({storyBody:"",storyType:0}),i()},this.saveStoryField=async function(t){const{story:s}=e.props,{id:o}=s,{value:a,name:i}=t.target;clearTimeout(e.updateTimer[i]),e.updateTimer[i]=setTimeout((async function(){e.doUpdateField(o,i,a)}),1e3)},this.updateTimer={}}async doUpdateField(t,e,s){const{storyStore:o}=this.props.stores;await o.saveField(parseInt(t,10),e,s,!0),o.publicFeedUpdate(parseInt(t,10),e,s)}render(){const{storyBody:e,storyType:s}=this.state,{userStore:o}=this.props.stores,{isAdmin:a}=o,{story:i}=this.props;return Object(h.h)(t,null,Object(h.h)("div",{class:"d-flex bd-highlight"},Object(h.h)("div",{class:"p-0 w-100 bd-highlight"},Object(h.h)("label",{class:"sr-only",for:"inlineFormInput"},Object(h.h)(u.c,{id:"comments.comment"},"Kommentar")),Object(h.h)("div",{class:"border rounded rounded-lg position-relative"},Object(h.h)(u.b,null,Object(h.h)("textarea",{class:"form-control-plaintext px-2",type:"text",placeholder:Object(h.h)(u.c,{id:"comments.write-comment"},"Skriv en kommentar..."),onInput:Object(O.a)(this,"storyBody"),onFocus:S.a.resizeTextarea,style:"height: 2.3em;",value:e||i.body}))),Object(h.h)("div",{class:"position-relative mt-3"},a&&Object(h.h)(t,null,Object(h.h)("div",{class:"col-12 text-center mt-2"},Object(h.h)("div",{class:"form-group"},Object(h.h)("small",null,Object(h.h)("label",null,"Pinned to top:"),Object(h.h)("input",{type:"checkbox",id:i.id,name:"pinned",onInput:this.saveStoryField,value:i.pinned?0:1,checked:i.pinned?1:0}))))),a&&Object(h.h)(t,null,Object(h.h)("label",null,Object(h.h)(u.c,{id:"story.type"},"Type")),Object(h.h)("div",{class:"form-group"},Object(h.h)("small",null,Object(h.h)("select",{class:"custom-select custom-select-sm",id:i.id,name:"type",onInput:this.saveStoryField,value:s||i.type},Object(h.h)("option",{value:""},"-- ",Object(h.h)(u.c,{id:"story.type-choose"},"Velg type")," --"),Object(h.h)("option",{value:1,selected:1==i.type?"selected":""},"✍️ ",Object(h.h)(u.c,{id:"story.type-regular"},"Vanlig")),Object(h.h)("option",{value:2,selected:2==i.type?"selected":""},"🚀 ",Object(h.h)(u.c,{id:"story.type-ad"},"Annonse")),Object(h.h)("option",{value:3,selected:3==i.type?"selected":""},"📄 ",Object(h.h)(u.c,{id:"story.type-article"},"Artikkel")))))),i.type>=2&&Object(h.h)(t,null,Object(h.h)("label",null,Object(h.h)(u.c,{id:"story.url-text"},"URL text")),Object(h.h)("div",{class:"form-group"},Object(h.h)("small",null,Object(h.h)("input",{class:"form-control",type:"text",name:"urlText",onInput:this.saveStoryField,value:i.urlText}))),Object(h.h)("label",null,Object(h.h)(u.c,{id:"story.url"},"URL")),Object(h.h)("div",{class:"form-group"},Object(h.h)("small",null,Object(h.h)("input",{class:"form-control",type:"text",name:"url",onInput:this.saveStoryField,value:i.url})))),2===i.type&&Object(h.h)(t,null,Object(h.h)("label",null,Object(h.h)(u.c,{id:"story.code"},"Code")),Object(h.h)("div",{class:"form-group"},Object(h.h)("small",null,Object(h.h)("input",{class:"form-control",type:"text",name:"code",onInput:this.saveStoryField,value:i.code}))),Object(h.h)("label",null,Object(h.h)(u.c,{id:"story.country"},"Country")),Object(h.h)("div",{class:"form-group"},Object(h.h)("small",null,Object(h.h)("input",{class:"form-control",type:"text",name:"country",onInput:this.saveStoryField,value:i.country}))),Object(h.h)("label",null,Object(h.h)(u.c,{id:"story.region"},"Region")),Object(h.h)("div",{class:"form-group"},Object(h.h)("small",null,Object(h.h)("input",{class:"form-control",type:"text",name:"region",onInput:this.saveStoryField,value:i.region}))),Object(h.h)("label",null,Object(h.h)(u.c,{id:"story.currency"},"Currency")),Object(h.h)("div",{class:"form-group"},Object(h.h)("small",null,Object(h.h)("input",{class:"form-control",type:"text",name:"currency",onInput:this.saveStoryField,value:i.currency}))),Object(h.h)("label",null,Object(h.h)(u.c,{id:"story.price"},"Price")),Object(h.h)("div",{class:"form-group"},Object(h.h)("small",null,Object(h.h)("input",{class:"form-control",type:"text",name:"price",onInput:this.saveStoryField,value:i.price})))))),Object(h.h)("div",{class:"p-0 pl-2 flex-shrink-1 bd-highlight"},Object(h.h)("button",{type:"button",class:"btn btn-primary mb-2",onClick:this.saveStory,"data-id":i.id},Object(h.h)("i",{class:"fas fa-paper-plane"})))))}})||i,T=Object(b.a)(n=class extends h.Component{constructor(t){var e;super(t),e=this,this.viewImage=t=>{const{id:e,idx:s}=t.target.closest("img").dataset,{viewImageIdx:o}=this.state;o[e]=s,this.setState({viewImageIdx:o})},this.showStoryDetail=t=>{if("a"===t.target.localName)return!1;const{id:e}=t.target.closest("#storyDetail").dataset;e&&Object(j.route)("/stories/"+e)},this.translate=async function(t){t.preventDefault(),t.stopPropagation();const{story:s}=e.props,{userStore:o,storyStore:a}=e.props.stores,{user:i}=o,n=await a.translate({story:s,user:i});e.setState({showOriginal:0,translatedText:n})},this.showOriginal=t=>{t.preventDefault(),t.stopPropagation(),this.setState({showOriginal:1})},this.state={viewImageIdx:{}}}render(){const{viewImageIdx:e,showOriginal:s,translatedText:o}=this.state,{userStore:a}=this.props.stores,{story:i,likeStory:n,likeRef:l}=this.props,{user:r}=a,{language:c="en"}=r,d=[];if(i.images){const t=Object(m.i)(i.images);d.push(...t)}const b=S.a.getTranslation({object:i,targetLang:c,field:"body"})||o;let p=b||i.body;return s&&(p=i.body),Object(h.h)(t,null,Object(h.h)("div",{class:"container-fluid px-0 mt-1"},Object(h.h)("div",{class:"row"},Object(h.h)(v.a,{stores:this.props.stores,images:d,id:i.id,dblClick:n,likeRef:l}))),Object(h.h)("div",{class:"row mt-2"},Object(h.h)("div",{class:"clearfix col-12 overflow-hidden",style:""+(i.offline?"text-decoration: line-through;":"")},Object(h.h)("div",{id:"storyDetail",onClick:this.showStoryDetail,"data-id":i.id},Object(h.h)(g.a,{markdown:S.a.replaceImages(p,i.images,c),markdownOpts:S.a.getMarkdownOptions()}),i.language!==c&&Object(h.h)(t,null,!s&&b?Object(h.h)(t,null,Object(h.h)("button",{type:"button",class:"btn btn-sm btn-link text-muted",onClick:this.showOriginal},Object(h.h)("i",{class:"fas fa-cog"}),"  ",Object(h.h)(u.c,{id:"home.translate-show-original"},"Show original"))):Object(h.h)(t,null,Object(h.h)("button",{type:"button",class:"btn btn-sm btn-link text-muted",onClick:this.translate},Object(h.h)("i",{class:"fas fa-cog"})," ",Object(h.h)(u.c,{id:"home.translate-to"},"See translation"))))))))}})||n,D=Object(b.a)(l=class extends h.Component{constructor(t){var e;super(t),e=this,this.viewImage=t=>{const{id:e,idx:s}=t.target.closest("img").dataset,{viewImageIdx:o}=this.state;o[e]=s,this.setState({viewImageIdx:o})},this.showStoryDetail=t=>{if("a"===t.target.localName)return!1;const{id:e}=t.target.closest("#storyDetail").dataset;e&&Object(j.route)("/stories/"+e)},this.translate=async function(t){t.preventDefault(),t.stopPropagation();const{story:s}=e.props,{userStore:o,storyStore:a}=e.props.stores,{user:i}=o;e.setState({showOriginal:0}),await a.translate({story:s,user:i})},this.showOriginal=t=>{t.preventDefault(),t.stopPropagation(),this.setState({showOriginal:1})},this.getTranslation=()=>{const{story:t}=this.props,{userStore:e}=this.props.stores,{user:s}=e,{language:o="en"}=s;S.a.getTranslation({object:t,targetLang:o,field:"body"})&&this.setState({showOriginal:0})},this.state={viewImageIdx:{}}}componentWillMount(){this.getTranslation()}render(){const{viewImageIdx:e,showOriginal:s}=this.state,{userStore:o}=this.props.stores,{story:a,likeStory:i,likeRef:n}=this.props,{user:l}=o,{language:r="en"}=l,c=[];if(a.images){const t=Object(m.i)(a.images);c.push(...t)}const b=S.a.getTranslation({object:a,targetLang:r,field:"body"});let p=b||a.body;return s&&(p=a.body),Object(h.h)(t,null,Object(h.h)("div",{class:"container-fluid px-0 mt-1"},Object(h.h)("div",{class:"row"},Object(h.h)(v.a,{stores:this.props.stores,images:c,id:a.id,dblClick:i,likeRef:n}))),Object(h.h)("div",{class:"row mt-2"},Object(h.h)("div",{class:"clearfix col-12 overflow-hidden",style:""+(a.offline?"text-decoration: line-through;":"")},Object(h.h)("div",{id:"storyDetail","data-id":a.id},Object(h.h)(g.a,{markdown:S.a.replaceImages(p,a.images,r),markdownOpts:S.a.getMarkdownOptions()}),a.language!==r&&Object(h.h)(t,null,!s&&b?Object(h.h)(t,null,Object(h.h)("button",{type:"button",class:"btn btn-sm btn-link",onClick:this.showOriginal},Object(h.h)("i",{class:"fas fa-cog"}),"  ",Object(h.h)(u.c,{id:"home.translate-show-original"},"Show original"))):Object(h.h)(t,null,Object(h.h)("button",{type:"button",class:"btn btn-sm btn-link",onClick:this.translate},Object(h.h)("i",{class:"fas fa-cog"})," ",Object(h.h)(u.c,{id:"home.translate-to"},"See translation")))))),!!(a.url||a.code||a.price>0)&&Object(h.h)(t,null,Object(h.h)("div",{class:"clearfix col-12  py-2",style:""+(a.offline?"text-decoration: line-through;":"")},Object(h.h)("div",{class:"row"},a.url&&Object(h.h)(t,null,Object(h.h)("div",{class:"col-12 text-left",style:"font-size: 1.0em;"},Object(h.h)("a",{href:S.a.asUrl(a.url),target:"_blank",rel:"noreferrer"},Object(h.h)("i",{class:"fas fa-link mr-2"}),a.urlText?Object(h.h)(t,null,a.urlText):Object(h.h)(t,null,Object(h.h)(u.c,{id:"story.ad-url-readmore"},"Les mer..."))))),a.code&&Object(h.h)(t,null,Object(h.h)("div",{class:"col text-left",style:"font-size: 1.2em;"},Object(h.h)("nobr",null,Object(h.h)("span",{class:"font-weight-lighter"},Object(h.h)(u.c,{id:"story.ad-campaign-code"},"Kampanjekode"),":")," ",a.code))),a.price>0&&Object(h.h)(t,null,Object(h.h)("div",{class:"col text-right",style:"font-size: 1.2em;"},Object(h.h)("nobr",null,a.currencty&&Object(h.h)("span",{class:"font-weight-lighter"},a.currency)," ",d.a.format(a.price,2)))))))))}})||l,P=Object(b.a)(r=class extends h.Component{constructor(t){var e;super(t),e=this,this.viewImage=t=>{const{id:e,idx:s}=t.target.closest("img").dataset,{viewImageIdx:o}=this.state;o[e]=s,this.setState({viewImageIdx:o})},this.showStoryDetail=t=>{if("a"===t.target.localName)return!1;const{id:e}=t.target.closest("#storyDetail").dataset;e&&Object(j.route)("/stories/"+e)},this.translate=async function(t){t.preventDefault(),t.stopPropagation();const{story:s}=e.props,{userStore:o,storyStore:a}=e.props.stores,{user:i}=o;e.setState({showOriginal:0}),await a.translate({story:s,user:i})},this.showOriginal=t=>{t.preventDefault(),t.stopPropagation(),this.setState({showOriginal:1})},this.getTranslation=()=>{const{story:t}=this.props,{userStore:e}=this.props.stores,{user:s}=e,{language:o="en"}=s;S.a.getTranslation({object:t,targetLang:o,field:"body"})&&this.setState({showOriginal:0})},this.state={viewImageIdx:{}}}componentWillMount(){this.getTranslation()}render(){const{viewImageIdx:e,showOriginal:s}=this.state,{userStore:o}=this.props.stores,{story:a,likeStory:i,likeRef:n}=this.props,{user:l}=o,{language:r="en"}=l,c=[];if(a.images){const t=Object(m.i)(a.images);c.push(...t)}const d=S.a.getTranslation({object:a,targetLang:r,field:"body"});let b=d||a.body;return s&&(b=a.body),Object(h.h)(t,null,Object(h.h)("div",{class:"container-fluid px-0 mt-1"},Object(h.h)("div",{class:"row"},Object(h.h)(v.a,{stores:this.props.stores,images:c,id:a.id,dblClick:i,likeRef:n}))),Object(h.h)("div",{class:"row mt-2"},Object(h.h)("div",{class:"clearfix col-12 overflow-hidden",style:""+(a.offline?"text-decoration: line-through;":"")},Object(h.h)("div",{id:"storyDetail",onClick:this.showStoryDetail,"data-id":a.id},Object(h.h)(g.a,{markdown:S.a.replaceImages(b,a.images,r),markdownOpts:S.a.getMarkdownOptions()}),a.language!==r&&Object(h.h)(t,null,!s&&d?Object(h.h)(t,null,Object(h.h)("button",{type:"button",class:"btn btn-sm btn-link",onClick:this.showOriginal},Object(h.h)("i",{class:"fas fa-cog"}),"  ",Object(h.h)(u.c,{id:"home.translate-show-original"},"Show original"))):Object(h.h)(t,null,Object(h.h)("button",{type:"button",class:"btn btn-sm btn-link",onClick:this.translate},Object(h.h)("i",{class:"fas fa-cog"})," ",Object(h.h)(u.c,{id:"home.translate-to"},"See translation")))))),!!(a.url||a.code||a.price)&&Object(h.h)(t,null,Object(h.h)("div",{class:"clearfix col-12  py-2",style:""+(a.offline?"text-decoration: line-through;":"")},Object(h.h)("div",{class:"row"},a.url&&Object(h.h)(t,null,Object(h.h)("div",{class:"col-12 text-left",style:"font-size: 1.0em;"},Object(h.h)("a",{href:S.a.asUrl(a.url),target:"_blank",rel:"noreferrer"},Object(h.h)("i",{class:"fas fa-link mr-2"}),a.urlText?Object(h.h)(t,null,a.urlText):Object(h.h)(t,null,Object(h.h)(u.c,{id:"story.ad-url-readmore"},"Les mer..."))))))))))}})||r,E=Object(b.a)(c=class extends h.Component{constructor(t){var e;super(t),e=this,this.toggleDate=t=>{t.stopPropagation(),t.preventDefault();const{showDate:e}=this.state;this.setState({showDate:!e})},this.likeStory=async function(){const{story:t}=e.props,{id:s}=t,o=s,{storyStore:a}=e.props.stores,{likeStory:i}=e.state;i[o]=!0;const n=Object.keys(i);e.setState({likeStory:i,likeIds:n}),setTimeout(()=>{const{likeStory:t}=e.state;delete t[o];const s=Object.keys(t);e.setState({likeStory:t,likeIds:s})},1200);await a.likeStory({id:o})},this.toggleAddComment=t=>{const e=t.target.closest("button").dataset.id,{showAddComment:s}=this.state;s[e]?delete s[e]:s[e]=!0,this.setState({showAddComment:s},()=>{this.inputRef[e]&&this.inputRef[e].focus()})},this.closeAllAddComments=()=>{this.setState({showAddComment:{}})},this.toggleShowTeamSetting=t=>{const e=t.target.closest("button").dataset.id,{showTeamSetting:s}=this.state;s[e]?delete s[e]:s[e]=!0,this.setState({showTeamSetting:s})},this.viewImage=t=>{const{id:e,idx:s}=t.target.closest("img").dataset,{viewImageIdx:o}=this.state;o[e]=s,this.setState({viewImageIdx:o})},this.toggleMenu=t=>{const{id:e}=t.target.closest("i").dataset,{showMenu:s={}}=this.state;s[e]=!s[e],this.setState({showDeleteStory:{},showEdit:{},showMenu:s})},this.toggleEdit=t=>{const{id:e}=t.target.closest("button").dataset,{showEdit:s={}}=this.state;s[e]=!s[e],this.setState({showDeleteStory:{},showEdit:s,showMenu:{}})},this.toggleDeleteStory=t=>{const{id:e}=t.target.closest("button").dataset,{showDeleteStory:s={}}=this.state;s[e]=!s[e],this.setState({showDeleteStory:s,showEdit:{},showMenu:{}})},this.reportStory=async function(t){const{id:s}=t.target.closest("button").dataset,{storyStore:o}=e.props.stores;await o.reportStory({id:s}),e.setState({showEdit:{},showMenu:{}})},this.adminRemoveStory=async function(t){const{id:s}=t.target.closest("button").dataset,{storyStore:o}=e.props.stores;await o.adminHideStory({id:s}),e.setState({showEdit:{},showMenu:{}})},this.deleteStory=async function(t){const{id:s}=t.target.closest("button").dataset,{storyStore:o}=e.props.stores;await o.saveField(parseInt(s,10),"offline",1,!0),o.publicFeedUpdate(parseInt(s,10),"offline",1),e.setState({storyBody:"",showDeleteStory:{},showEdit:{},showMenu:{}})},this.doneEdit=()=>{this.setState({storyBody:"",showDeleteStory:{},showEdit:{},showMenu:{}})},this.showStoryDetail=t=>{if("a"===t.target.localName)return!1;const{id:e}=t.target.closest("#storyDetail").dataset;e&&Object(j.route)("/stories/"+e)},this.shareLink=t=>{const{url:e,title:s,text:o}=t.target.closest("button").dataset,{appState:a}=this.props.stores;a.shareUrl({url:e,title:s,text:o})},this.state=function(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?o(Object(s),!0).forEach((function(e){a(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):o(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}({},C),this.inputRef={}}async loadStoriesPublicFeed(t=this.props){const{hashtag:e}=t,{storyStore:s}=t.stores;await s.loadPublicFeed({hashtag:e})}render(){const{showAddComment:e,showDate:s,showMenu:o={},showEdit:a={},showDeleteStory:i={},showTeamSetting:n,likeStory:l,likeIds:r}=this.state,{story:c,showAllComments:b,onTeamClick:m=(()=>{}),onUserClick:p=(()=>{})}=this.props,{userStore:g,storyStore:O,appState:j}=this.props.stores,{user:v={},isAdmin:C}=g,{hasShareApi:E}=j,R=O.findPublicTeam(c.team)||{},L=O.findPublicUser(c.user)||{},F=S.a.getImage({user:L,team:R,priority:"user",object:c}),N=!(!R||!R.members)&&R.members.some(t=>t===v.id);let A,U,M,_;R&&R.name?(A=S.a.displayNameShort(R),U=S.a.displayName(R),M=S.a.displayName(L),L.settings&&v.uuidv4!==L.uuidv4&&(_=L.settings.hideProfile?null:"/inbox/"+L.uuidv4)):L&&L.id&&(A=S.a.displayNameShort(L),U=S.a.displayName(L));const{likes:V,comments:$,reports:z=[]}=c,B=c.likes&&c.likes.findIndex(t=>t.user===v.id)>-1,q=R.followers?R.followers.length:0,W=R.members&&R.members.indexOf(v.id)>-1,K=R.followers&&R.followers.indexOf(v.id)>-1,Y=R.followRequests&&R.followRequests.findIndex(t=>t.id===v.id)>-1,{currentLocationGeocode:H={},yrWeather:Z=[]}=c,J=S.a.getViews(c.statistics),X=S.a.getAdminData(c.statistics);return Object(h.h)(t,null,C||v.id===L.id?Object(h.h)(t,null,Object(h.h)("span",{class:"float-right font-weight-lighter text-muted"},Object(h.h)("i",{class:"fas fa-ellipsis-h",onClick:this.toggleMenu,"data-id":c.id}))):Object(h.h)(t,null,!W&&!K&&!Y&&R.public>0&&Object(h.h)("span",{class:"float-right"},Object(h.h)(k.a,{stores:this.props.stores,team:R,buttonOnly:!0,simple:!0,classNames:"btn btn-link text-primary"}))),o[c.id]&&Object(h.h)(t,null,Object(h.h)("div",{class:"position-absolute bg-light p-2 border rounded rounded-lg shadow-sm",style:"top: 30px; right: 10px; width: 60%; z-index: 999999;"},v.id===L.id?Object(h.h)(t,null,Object(h.h)("button",{class:"btn btn-link btn-block text-left",onClick:this.toggleEdit,"data-id":c.id},Object(h.h)("i",{class:"fas fa-edit"})," Edit"),Object(h.h)("hr",null),Object(h.h)("button",{class:"btn btn-link btn-block text-left text-danger",onClick:this.toggleDeleteStory,"data-id":c.id},Object(h.h)("i",{class:"fas fa-trash-alt"})," Delete")):Object(h.h)(t,null,Object(h.h)("button",{class:"btn btn-link btn-block text-left",onClick:this.reportStory,"data-id":c.id},Object(h.h)("i",{class:"fas fa-flag"})," Report"),C&&Object(h.h)(t,null,Object(h.h)("hr",null),Object(h.h)("button",{class:"btn btn-link btn-block text-left text-danger",onClick:this.adminRemoveStory,"data-id":c.id},Object(h.h)("i",{class:"fas fa-eraser"})," Remove from feed"))))),Object(h.h)("div",{class:"d-flex position-relative"},Object(h.h)("div",{class:"position-relative text-center border rounded-circle imageRounded imageRoundedMedium",style:F?`background-image: url("${F}"); background-size: cover;`:""},!F&&Object(h.h)("div",{class:"text-muted",style:"font-size: 20px; padding-top: 3px;"},A)),Object(h.h)("div",{class:"flex-grow-1 pl-3 text-overflow",style:"line-height: 1.2em;"},Object(h.h)("h5",{class:"mb-1 position-relative",style:"line-height: 1.0em; "+(c.offline?"text-decoration: line-through;":"")},R.public?Object(h.h)(t,null,Object(h.h)("a",{href:"/teams/public/"+R.uuidv4,onClick:t=>m(t,R.uuidv4),class:"stretched-link"},U)):Object(h.h)(t,null,U),W&&!R.public&&Object(h.h)("button",{type:"button",class:"btn btn-sm btn-link text-muted","data-id":c.id,onClick:this.toggleShowTeamSetting},Object(h.h)("i",{class:"fas fa-exclamation-triangle"}))),Object(h.h)("div",{class:"mb-2",style:""+(c.offline?"text-decoration: line-through;":"")},c.pinned&&Object(h.h)(t,null,Object(h.h)("small",{class:"text-muted mr-2"},Object(h.h)("i",{class:"fas fa-thumbtack"}))),2===c.type?Object(h.h)(t,null,Object(h.h)("small",{class:"text-muted"},Object(h.h)(u.c,{id:"story.sponsored"},"Sponsored")," -")):Object(h.h)(t,null,c.date&&Object(h.h)("small",{class:"text-muted",onClick:this.toggleDate},s?d.a.formatDate(c.date,{locale:"no-NB",hour12:!1,hour:"2-digit",minute:"2-digit"}):d.a.formatDistance(c.date,new Date,{locale:"no-NB"}))),1===c.public?Object(h.h)(t,null,Object(h.h)("small",{class:"ml-2 text-muted"},Object(h.h)("i",{class:"fas fa-globe-europe"}))):Object(h.h)(t,null,Object(h.h)("small",{class:"ml-2 text-muted"},Object(h.h)("i",{class:"fas fa-users"})," (",d.a.format(q),")")),M&&Object(h.h)(t,null,Object(h.h)("small",{class:"ml-2 text-muted"},_?Object(h.h)(t,null,Object(h.h)("i",{class:"fas fa-user"})," ",Object(h.h)("a",{href:_},M)):Object(h.h)(t,null,Object(h.h)("i",{class:"fas fa-user"})," ",M))),H&&H.formattedCounty&&Object(h.h)(t,null,Object(h.h)("small",{class:"ml-2 text-muted"},Object(h.h)("i",{class:"fas fa-map-marker-alt"})," ",H.formattedCounty))),C&&Object(h.h)("div",{class:"d-flex flex-row flex-nowrap bg-light border-top border-bottom py-2",style:"overflow: auto;"},Object(h.h)("small",{class:"text-muted mr-2"},"Adm:"),z&&z.length>0&&Object(h.h)(t,null,Object(h.h)("small",{class:"text-danger mr-2"},Object(h.h)("i",{class:"fas fa-flag"})," ",z.length)),H&&H.formatted_address&&Object(h.h)(t,null,Object(h.h)("small",{class:"text-muted"},Object(h.h)("i",{class:"fas fa-map-marker-alt"})," ",H.formatted_address)),L.deviceInfo&&Object(h.h)(t,null,Object(h.h)("span",{class:"badge badge-secondary ml-2 float-right font-weight-light"},["platform","manufacturer","model"].map(e=>Object(h.h)(t,null,Object(h.h)("span",{class:"ml-2 text-white"},L.deviceInfo[e]))))),X&&Object(h.h)(t,null,Object(h.h)("small",{class:"ml-2 text-muted"},"V: ",X.count),Object(h.h)("small",{class:"ml-2 text-muted"},"R: ",X.ranking," ",d.a.isNumber(X.rankingTrend)&&Object(h.h)(t,null,Object(h.h)("i",{class:S.a.getClassForTrend(X.rankingTrend)}))),Object(h.h)("small",{class:"ml-2 text-muted"},"D: ",d.a.format(X.durationAvg/1e3,1),"s ",d.a.isNumber(X.durationAvgTrend)&&Object(h.h)(t,null,Object(h.h)("i",{class:S.a.getClassForTrend(X.durationAvgTrend)}))),c.statisticsCurrent&&c.statisticsCurrent.totalInteractions>0&&Object(h.h)("small",{class:"ml-2 text-muted"},"S: ",d.a.format(c.statisticsCurrent.totalInteractions,0)),c.shadowTags&&c.shadowTags.map(e=>Object(h.h)(t,null,Object(h.h)("span",{class:"badge badge-secondary ml-2 float-right font-weight-light"},e))))))),Object(h.h)("div",{class:"row mt-2"},Object(h.h)("div",{class:"clearfix col-12",style:""+(c.offline?"text-decoration: line-through;":"")},a[c.id]&&Object(h.h)(t,null,Object(h.h)(I,{stores:this.props.stores,story:c,key:"story-edit-"+c.id,callback:this.doneEdit})),i[c.id]&&Object(h.h)("div",{class:"clearfix mt-3 mb-3"},Object(h.h)("button",{class:"btn btn-danger float-left",onClick:this.deleteStory,"data-id":c.id},Object(h.h)("i",{class:"fas fa-trash-alt"})," Delete"),Object(h.h)("button",{class:"btn btn-secondary float-right",onClick:this.toggleDeleteStory,"data-id":c.id},Object(h.h)("i",{class:"fas fa-times-circle"})," Cancel")))),(!c.type||1==c.type)&&Object(h.h)(T,{stores:this.props.stores,story:c,key:"story-regular-view-"+c.id,likeStory:this.likeStory,likeRef:l,keys:r}),2==c.type&&Object(h.h)(D,{stores:this.props.stores,story:c,key:"story-ad-view-"+c.id,likeStory:this.likeStory,likeRef:l,keys:r}),3==c.type&&Object(h.h)(P,{stores:this.props.stores,story:c,key:"story-article-view-"+c.id,likeStory:this.likeStory,likeRef:l,keys:r}),Object(h.h)("div",{class:"d-flex justify-content-between mt-2"},Object(h.h)("div",{class:"mr-2"},Object(h.h)(w.a,{stores:this.props.stores,likes:V,comments:$,type:"story",onTeamClick:m,onUserClick:p})),J>0&&Object(h.h)(t,null,Object(h.h)("div",null,Object(h.h)(x.a,{stores:this.props.stores,views:J,object:c,type:"story",isTeamAdmin:N,isAdmin:C,onTeamClick:m,onUserClick:p})))),n[c.id]&&Object(h.h)(t,null,Object(h.h)("small",null,Object(h.h)("div",{class:"alert alert-info",role:"alert"},Object(h.h)("span",{class:"display-4 float-left"},Object(h.h)("i",{class:"fas fa-exclamation-triangle mr-3 mb-3"})),Object(h.h)("p",null,Object(h.h)(u.c,{id:"story.alert-text-1"},"Your team is not visible and it's not possible to request friendship with your team.")),Object(h.h)("p",null,Object(h.h)(u.c,{id:"story.alert-text-2"},"If you want to make your team visible so other can request to follow your team, you can find the setting here:")),Object(h.h)("p",null,Object(h.h)("a",{href:"/teams/edit/"+R.id},Object(h.h)(u.c,{id:"story.alert-text-3"},"Edit team")))))),Object(h.h)("div",null,Object(h.h)("div",{class:"row"},Object(h.h)("div",{class:"col text-center"},Object(h.h)("button",{type:"button",class:`storyImage btn btn-sm btn-outline-${B?"primary":"secondary"} btn-lg btn-block ${B?"text-primary":""} text-overflow`,"data-id":c.id,onClick:this.likeStory},Object(h.h)("i",{class:(B?"text-primary fas":"far")+" fa-thumbs-up"})," ",B?Object(h.h)(u.c,{id:"comments.has-liked"},"Liked"):Object(h.h)(u.c,{id:"comments.like"},"Lik"))),Object(h.h)("div",{class:"col text-center"},Object(h.h)("button",{type:"button",class:"btn btn-sm btn-outline-secondary btn-lg btn-block text-overflow","data-id":c.id,onClick:this.toggleAddComment},Object(h.h)("i",{class:"fas fa-comment"})," ",Object(h.h)(u.c,{id:"comments.comment-add"},"Kommentar"))),E?Object(h.h)(t,null,Object(h.h)("div",{class:"col text-center"},Object(h.h)("button",{class:"btn btn-sm btn-outline-secondary btn-lg btn-block text-overflow",onClick:this.shareLink,"data-url":"https://themusher.app/share/story/"+c.uuidv4,"data-title":"title: "+c.title},Object(h.h)("i",{class:"fas fa-share"})," ",Object(h.h)(u.c,{id:"story.share"},"Del")))):Object(h.h)(t,null,Object(h.h)("div",{class:"col text-center"},Object(h.h)("a",{class:"btn btn-sm btn-outline-secondary btn-lg btn-block text-overflow",href:"https://themusher.app/share/story/"+c.uuidv4,target:"_blank",rel:"noreferrer","data-native":!0},Object(h.h)("i",{class:"fas fa-share"})," ",Object(h.h)(u.c,{id:"story.share"},"Del")))))),Object(h.h)("div",{class:"mt-2"},Object(h.h)(f.a,{stores:this.props.stores,story:c,col:"10",offset:"2",compact:!1,showAllComments:b,initCall:this.closeAllAddComments}),e[c.id]&&Object(h.h)(y.a,{stores:this.props.stores,story:c,inputRef:t=>this.inputRef[c.id]=t,inputRefObject:this.inputRef,col:"10",offset:"2",key:"story-comment-"+c.id})))}})||c;e.a=E}).call(this,s("hosL").Fragment)},QkTp:function(t,e,s){"use strict";(function(t){var o,a=s("hosL"),i=s("Utv1"),n=s("/eY4");s("OhSV"),s("ZOvn");let l=Object(n.a)(o=class extends a.Component{render(){const{value:e=0}=this.props,{userStore:s}=this.props.stores,{user:o}=s,{settings:n={}}=o;return n.imperial?Object(a.h)(t,null,Object(a.h)("nobr",null,i.a.format(function(t){return 9*t/5+32}(e),0),"°F")):Object(a.h)(t,null,Object(a.h)("nobr",null,i.a.format(e,1),"°C"))}})||o;e.a=l}).call(this,s("hosL").Fragment)},VKmm:function(t,e,s){"use strict";function o(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,o)}return s}function a(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}var i,n=s("hosL"),l=s("Utv1"),r=s("/eY4"),c=s("OhSV");s("ZOvn"),s("eQ6k");const h={requestSent:{}};let d=Object(r.a)(i=class extends n.Component{constructor(t){super(t),this.requestFollowTeam=t=>{const{teamStore:e,userStore:s}=this.props.stores,{user:o}=s,{team:a}=t.target.closest("button").dataset;e.followRequest(parseInt(a,10),o);const{requestSent:i}=this.state;i[a]=!0,this.setState({requestSent:i})},this.getButton=t=>{const{requestSent:e}=this.state,{userStore:s}=this.props.stores,{user:o}=s,a=t.members&&t.members.findIndex(t=>t.id===o.id)>-1,i=t.followers&&t.followers.indexOf(o.id)>-1,l=t.blockedFollowers&&t.blockedFollowers.indexOf(o.id)>-1,r=e[t.id]||t.followRequests&&t.followRequests.findIndex(t=>t.id===o.id)>-1;return a?Object(n.h)("i",{class:"fas fa-home"}):i?Object(n.h)("button",{class:"btn btn-sm btn-block btn-outline-secondary float-right",onClick:this.unFollowTeam,disabled:"true","data-team":t.id},Object(n.h)("i",{class:"fas fa-link mr-2"}),Object(n.h)(c.c,{id:"teams.connect.is-following"},"Følger")):l?Object(n.h)("button",{class:"btn btn-sm btn-block btn-outline-secondary float-right",disabled:"true"},Object(n.h)("i",{class:"fas fa-hand-paper mr-2"}),Object(n.h)(c.c,{id:"teams.connect.is-blocked"},"Blokkert")):r?Object(n.h)("button",{class:"btn btn-sm btn-block btn-outline-secondary float-right",disabled:"true"},Object(n.h)("i",{class:"fas fa-hourglass-half mr-2"}),Object(n.h)(c.c,{id:"teams.connect.has-requested"},"Venter på godkjenning")):Object(n.h)("button",{class:"btn btn-sm btn-block btn-outline-success float-right",onClick:this.requestFollowTeam,"data-team":t.id},Object(n.h)("i",{class:"far fa-hand-point-right mr-2"}),Object(n.h)(c.c,{id:"teams.connect.follow"},"Følg"))},this.state=function(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?o(Object(s),!0).forEach((function(e){a(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):o(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}({},h)}async loadTeams(){this.setState({isLoading:!0});const{teamStore:t}=this.props.stores;await t.loadPublic({query:{notfollowing:1,array:1},limit:15}),this.setState({isLoading:!1})}componentDidMount(){this.loadTeams()}render(){const{teamStore:t,appState:e}=this.props.stores,{publicTeamsToFollow:s}=t,{darkmode:o}=e;return s&&0!==s.length?Object(n.h)("div",{class:"row pb-1 bg-light"},Object(n.h)("div",{class:`col-12 col-sm-8 col-lg-6 offset-sm-2 offset-lg-3 mb-0 position-relative rounded rounded-lg py-3 bg-${o?"black":"white"} shadow-sm`},Object(n.h)("div",{class:"container-fluid"},Object(n.h)("div",{class:"row"},Object(n.h)("div",{class:"col-12"},Object(n.h)("h5",null,Object(n.h)(c.c,{id:"teams.connect.teams-to-follow"},"Team du kan følge"),":"))),Object(n.h)("div",{class:"row"},Object(n.h)("div",{class:"d-flex flex-row flex-nowrap",style:"overflow: auto;"},l.a.isArray(s)&&s.map(t=>{const e=t.image&&t.image.s3SmallLink?t.image:null;return Object(n.h)("div",{class:"mr-2",style:"width: 110px;"},Object(n.h)("div",{class:"text-center border rounded-lg",style:e?`background-image: url("${e.s3SmallLink}"); background-size: cover; width: 110px; height: 100px;`:"width: 110px; height: 100px;"},!e&&Object(n.h)("i",{class:"fas fa-users text-muted mt-3",style:"font-size: 40px;"})),Object(n.h)("small",null,Object(n.h)("div",{class:"text-overflow"},Object(n.h)("strong",null,t.name)),Object(n.h)("div",{class:"text-overflow"},t.place?t.place+", ":""," ",t.country,"  "),Object(n.h)("div",{class:"text-overflow"},Object(n.h)("small",{class:"text-muted"},t&&t.dogs&&Object(n.h)("span",{class:""},Object(n.h)("i",{class:"fas fa-dog"})," ",t.dogs.length),t&&t.followers&&Object(n.h)("span",{class:"ml-2"},Object(n.h)("i",{class:"fas fa-user"})," ",t.followers.length)))),Object(n.h)("div",null,this.getButton(t)))})))))):""}})||i;e.a=d},epqT:function(t,e,s){"use strict";(function(t){function o(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,o)}return s}function a(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}var i,n=s("hosL"),l=s("Utv1"),r=s("/eY4"),c=s("OhSV");s("ZOvn");const h={showAddComment:!1};let d=Object(c.d)(()=>({subject:Object(n.h)(c.c,{id:"ad.subject"},"Annonseforespørsel"),body:Object(n.h)(c.c,{id:"ad.body"},"Hei, Jeg ønsker å vite mer om annonsering i appen The Musher.")}))(i=Object(r.a)(i=class extends n.Component{constructor(t){var e;super(t),e=this,this.logClick=async function(){const{adStore:t,userStore:s}=e.props.stores,{ads:o=[]}=t;let a=o.length>0?o[0].id:null;const{user:i={}}=s;await t.logClick({id:a,user:i.id})},this.state=function(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?o(Object(s),!0).forEach((function(e){a(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):o(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}({},h),this.updateTimer={},this.inputRef={},this.apiServer=l.a.getApiServer()}async loadAd(t=this.props){this.setState({isLoading:!0});const{adStore:e,workoutStore:s,userStore:o,appState:a}=this.props.stores,{section:i}=this.props,{path:n=""}=a,{currentTeam:l}=s,{user:r}=o,{language:c="en"}=r;let h,d,b,m,u,p={};l&&(p=o.findTeam(l,!0),p&&p.id&&(h=o.findTeamAmbition({ambition:p.ambitions,language:c}),d=o.findTeamType({type:p.type,language:c}),b=p.postalcode,m=p.place,u=p.country));let g=n.replace(/\d+$/,"detail");g=n.replace(/\/\d+/,"/detail"),await e.load({query:{page:g,section:i}}),e.setTime(),this.setState({isLoading:!1})}componentDidMount(){this.loadAd()}componentWillReceiveProps(t){t.path!==this.props.path&&this.loadAd(t)}render(){const{adStore:e,userStore:s,appState:o}=this.props.stores,{subject:a,body:i,section:l}=this.props,{path:r}=o,{user:h={}}=s,{ads:d=[],time:b}=e;if(!h||!h.id||!d||0===d.length)return r.match(/\/(home)/i)?Object(n.h)(t,null,Object(n.h)("div",{class:"w-100"},Object(n.h)("div",{class:"row"},Object(n.h)("div",{class:"col-12 col-sm-8 col-lg-6 offset-sm-2 offset-lg-3 mb-0 position-relative"},Object(n.h)("div",{class:"border rounded-lg p-4 my-3"},Object(n.h)("span",{class:"float-right display-4 text-warning"},Object(n.h)("i",{class:"far fa-smile-wink"})),Object(n.h)("h5",null,Object(n.h)(c.c,{id:"ad.heading"},"Vil du annonsere her?")),Object(n.h)("div",null,Object(n.h)(c.c,{id:"ad.teaser"},"Det er super enkelt :)")),Object(n.h)(c.b,null,Object(n.h)("a",{href:`mailto:post@themusher.no?subject=${a}: ${r}: ${l}&body=${i}`,target:"_blank",rel:"noreferrer"},Object(n.h)("i",{class:"fas fa-paper-plane"})," ",Object(n.h)(c.c,{id:"ad.linktext"},"Ta kontakt med The Musher")))))))):Object(n.h)(t,null);const m=d[0];return Object(n.h)(t,null,Object(n.h)("div",{class:"w-100"},Object(n.h)("div",{class:"row"},Object(n.h)("div",{class:"col-12 col-sm-8 col-lg-6 offset-sm-2 offset-lg-3 mb-0 position-relative"},Object(n.h)("div",null,Object(n.h)("small",null,Object(n.h)("small",{class:"text-muted"},Object(n.h)(c.c,{id:"ad.ad"},"Annonse"),":",Object(n.h)("img",{src:`${this.apiServer}/api/ads/${m.id}/view?user=${h.id}&time=${b}`,style:"width: 1; height: 1; opacity: 0.1;"})))),m.target?Object(n.h)(t,null,Object(n.h)("a",{class:"stretched-link",href:""+m.url,target:m.target||"_blank",rel:"noopener noreferrer",onClick:this.logClick,native:!0},m.images&&m.images[0]&&Object(n.h)(t,null,Object(n.h)("img",{src:m.images[0].s3LargeLink,class:"img-fluid rounded-lg"})))):Object(n.h)(t,null,Object(n.h)("a",{class:"stretched-link",href:""+m.url,onClick:this.logClick},m.images&&m.images[0]&&Object(n.h)(t,null,Object(n.h)("img",{src:m.images[0].s3LargeLink,class:"img-fluid rounded-lg"}))))))))}})||i)||i;e.a=d}).call(this,s("hosL").Fragment)},gOLw:function(t,e,s){"use strict";(function(t){function o(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,o)}return s}function a(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}var i,n=s("hosL"),l=s("Utv1"),r=s("/eY4"),c=(s("X9Km"),s("NMoA")),h=s("VKmm"),d=s("rWES"),b=s("epqT"),m=s("yHBq"),u=s("q/oJ"),p=s("gWxU"),g=s("ZOvn");const O=g.a.marginTop(!1),j={loading:!1,limit:10,offset:0,idxConfirm:0,idxSuggestion:1,idxAd:5,sessionid:(new Date).getTime()},f=["id","type","user","team","title"];let y=Object(r.a)(i=class extends n.Component{constructor(e){var s;super(e),s=this,this.reloadStories=async function(){const{appState:t}=s.props.stores;let{limit:e,offset:o}=s.state;o=0,s.setState({offset:o}),await s.loadStoriesPublicFeed({props:s.props,limit:e,offset:o}),t.appContainerScrollTop()},this.setCheckForNewStories=(t=this.props)=>{this.checkForNewStoriesTimer=setInterval(()=>this.checkForNewStories({props:t}),6e4)},this.clearCheckForNewStories=()=>{clearInterval(this.checkForNewStoriesTimer)},this.insertTopRanked=()=>{const{storyStore:t}=this.props.stores,{publicFeed:e,topRankedStories:s}=t,o=l.a.shuffleArray(s),a=[...e];let i=0;const n=new Date;a.forEach((t,e)=>{const s=l.a.parseInputDate(t.date);Math.floor((n.getTime()-s.getTime())/1e3)<86400&&(i=e+1)});const r=a.length;if(r>i+3){for(let t=0,e=3;t<e;t+=1){const e=g.a.randomInt(i,r);l.a.isObject(o[t])&&a.splice(e,0,o[t])}t.localUpdateField("publicFeed",a)}},this.insertAds=()=>{const{idxAd:t}=this.state,{storyStore:e}=this.props.stores,{publicFeed:s}=e,o=[...s];o.splice(t,0,{type:"ad",wrapperClassNames:"row",contentClassNames:"col-12"}),e.localUpdateField("publicFeed",o)},this.insertTeamConfirm=()=>{const{idxConfirm:t}=this.state,{storyStore:e}=this.props.stores,{publicFeed:s}=e,o=[...s];o.splice(t,0,{type:"teamConfirm",wrapperClassNames:"row",contentClassNames:"col-12"}),e.localUpdateField("publicFeed",o)},this.insertTeamSuggestions=()=>{const{idxSuggestion:t}=this.state,{storyStore:e}=this.props.stores,{publicFeed:s}=e,o=[...s];o.splice(t,0,{type:"teamSuggestions",wrapperClassNames:"row",contentClassNames:"col-12"}),e.localUpdateField("publicFeed",o)},this.setLoadMore=()=>{const{storyStore:t}=this.props.stores;t.setLoadMore(()=>{let{limit:t,offset:e}=this.state;e+=t,this.setState({offset:e}),this.loadStoriesPublicFeed({limit:t,offset:e})})},this.unsetLoadMore=()=>{const{storyStore:t}=this.props.stores;t.setLoadMore(()=>{})},this.onTeamClick=(t,e)=>(t.preventDefault(),t.stopPropagation(),this.setState({showTeam:e}),!1),this.hideTeam=()=>{this.setState({showTeam:null})},this.onUserClick=t=>(t.preventDefault(),t.stopPropagation(),!1),this.setupIntersection=()=>{this.setState({handleIntersection:g.a.intersectionObserverCallback});const{storyStore:t}=this.props.stores;this.scrollViewTimer=setInterval(()=>t.postScrollview(g.a.getIntersectionObserverHistory()),3e4)},this.renderContent=({obj:e})=>{const{appState:s}=this.props.stores,{path:o}=s,{hashtag:a}=this.props;return"ad"===e.type?Object(n.h)(t,null,Object(n.h)(b.a,{stores:this.props.stores,path:o})):"teamConfirm"===e.type?Object(n.h)(t,null,Object(n.h)(d.a,{stores:this.props.stores})):"teamSuggestions"===e.type?Object(n.h)(t,null,Object(n.h)(h.a,{stores:this.props.stores})):Object(n.h)(t,null,Object(n.h)(c.a,{stores:this.props.stores,story:e,hashtag:a,key:"story-detail-"+e.id,onTeamClick:this.onTeamClick,onUserClick:this.onUserClick}))},this.state=function(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?o(Object(s),!0).forEach((function(e){a(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):o(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}({},j),this.inputRef={},this.ref={}}async loadStoriesPublicFeed({props:t=this.props,limit:e,offset:s}){const{hashtag:o,hashtags:a,teamid:i}=t,{storyStore:n}=t.stores;await n.loadPublicFeed({hashtag:o,hashtags:a,teamid:i,limit:e,offset:s,sort:void 0}),s||(this.insertTopRanked(),this.insertTeamConfirm())}async checkForNewStories({props:t=this.props}){const{hashtag:e,hashtags:s,teamid:o}=t,{storyStore:a}=t.stores;await a.checkForNewStories({hashtag:e,hashtags:s,teamid:o})}componentWillMount(){this.setupIntersection()}componentDidMount(){const{limit:t}=this.state;this.loadStoriesPublicFeed({limit:t,offset:0}),this.setLoadMore(),this.setCheckForNewStories()}componentWillUnmount(){this.unsetLoadMore();const{storyStore:t}=this.props.stores;t.postScrollview(g.a.getIntersectionObserverHistory()),clearInterval(this.scrollViewTimer),this.clearCheckForNewStories()}componentWillReceiveProps(t){if(t.hashtag!==this.props.hashtag||t.path!==this.props.path){const{limit:e}=this.state;this.loadStoriesPublicFeed({props:t,limit:e,offset:0})}}render(){const{loading:e,handleIntersection:s,sessionid:o,showTeam:a}=this.state,{storyStore:i,appState:l}=this.props.stores,{publicFeed:r,hasNewStories:c}=i,{darkmode:h}=l;return Object(n.h)(t,null,a&&Object(n.h)(u.a,null,Object(n.h)(p.default,{stores:this.props.stores,teamid:a,marginTop:"0px;",marginBottom:"0px;",back:this.hideTeam})),Object(n.h)("div",{class:"w-100"},c&&Object(n.h)(t,null,Object(n.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 d-flex justify-content-center fixed-top",style:`margin-top: ${O};`},Object(n.h)("button",{class:"btn btn-sm btn-primary rounded-pill",onClick:this.reloadStories},"New stories"))),Object(n.h)(m.a,{data:r,wrapperClassNames:"row pb-1",contentClassNames:`col-12 col-sm-8 col-lg-6 offset-sm-2 offset-lg-3 my-1 position-relative rounded rounded-lg py-3 bg-${h?"black":"white"} shadow-sm`,renderContent:this.renderContent,dataFields:f,handleIntersection:s,sessionid:o}),e&&Object(n.h)("div",{class:"d-flex justify-content-center"},Object(n.h)("div",{class:"spinner-border text-primary",role:"status"},Object(n.h)("span",{class:"sr-only"},"Loading...")))))}})||i;e.a=y}).call(this,s("hosL").Fragment)},om2D:function(t,e,s){"use strict";var o,a=s("hosL"),i=s("/eY4"),n=(s("cneo"),s("Utv1"),s("u2zT"));let l=Object(i.a)(o=class extends a.Component{constructor(t){super(t),this.handleAddImage=t=>{const{addToImages:e=!0}=this.props,{updateField:s,object:o,field:a}=this.props;if(a&&s({id:o.id,field:a,value:t,skipTimer:!0}),e){const e=[];e.push(t),s({id:o.id,field:"images",value:e,skipTimer:!0})}},this.state={files:[]}}render(){const{uploadStatus:t=(()=>{}),before:e=(()=>{}),after:s=(()=>{}),autoOpen:o=!0}=this.props;return Object(a.h)("div",{class:"row"},Object(a.h)("div",{class:"col-12"},Object(a.h)(n.a,{handleAddImage:this.handleAddImage,uploadStatus:t,apiUrl:"/api/fileupload",before:e,after:s,autoOpen:o},Object(a.h)("div",{style:{height:30,width:"100%"}}))))}})||o;e.a=l},rWES:function(t,e,s){"use strict";(function(t){function o(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,o)}return s}function a(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}var i,n=s("hosL"),l=s("Utv1"),r=s("/eY4"),c=s("OhSV"),h=s("ZOvn");s("eQ6k");const d={confirmed:{},deleted:{}};let b=Object(r.a)(i=class extends n.Component{constructor(t){super(t),this.confirmRequest=t=>{const{team:e,user:s,follow:o}=t.target.closest("button").dataset,{teamStore:a}=this.props.stores;a.confirmFollowRequest({team:parseInt(e,10),user:parseInt(s,10)});const{confirmed:i}=this.state;i[`${e}-${s}`]=!0,this.setState({confirmed:i}),o&&a.followRequestUser(s)},this.deleteRequest=t=>{const{team:e,user:s}=t.target.closest("button").dataset,{teamStore:o}=this.props.stores;o.deleteFollowRequest({team:parseInt(e,10),user:parseInt(s,10)});const{deleted:a}=this.state;a[`${e}-${s}`]=!0,this.setState({deleted:a})},this.state=function(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?o(Object(s),!0).forEach((function(e){a(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):o(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}({},d)}async loadTeams(){const{teamStore:t}=this.props.stores;await t.load({query:{},addData:["followRequests"]})}componentDidMount(){this.loadTeams()}render(){const{deleted:e={},confirmed:s={}}=this.state,{teamStore:o,appState:a}=this.props.stores,{teams:i,hasFollowRequests:r,followRequests:d=[]}=o,{darkmode:b}=a;return r?Object(n.h)("div",{class:"row pb-1"},Object(n.h)("div",{class:`col-12 col-sm-8 col-lg-6 offset-sm-2 offset-lg-3 mb-0 position-relative rounded rounded-lg py-3 bg-${b?"black":"white"} shadow-sm`},Object(n.h)("div",{class:"container-fluid"},Object(n.h)("div",{class:"row"},Object(n.h)("div",{class:"col-12"},Object(n.h)("h5",null,Object(n.h)(c.c,{id:"teams.connect.teams-follow-requests"},"Forespørsel om å følge"),":"))),Object(n.h)("div",{class:"row"},Object(n.h)("div",{class:"d-flex flex-row flex-nowrap",style:"overflow: auto;"},l.a.isArray(i)&&i.map(o=>Object(n.h)(t,null,o&&l.a.isArray(o.followRequests)&&o.followRequests.map(a=>{const i=a.image&&a.image.s3SmallLink?a.image:null,l=e[`${o.id}-${a.id}`],r=s[`${o.id}-${a.id}`],b=d.find(t=>t.user.id===a.id);return Object(n.h)("div",{class:"mr-2 py-2 border rounded-lg",style:"width: 150px;"},Object(n.h)("div",{class:"text-center border rounded-circle imageRounded imageRoundedSmall mx-auto",style:i?`background-image: url("${i.s3SmallLink}");`:""},!i&&Object(n.h)("div",{class:"text-muted font-weight-lighter",style:"font-size: 20px; padding-top: 5px;"},h.a.displayNameShort(a))),Object(n.h)("small",null,Object(n.h)("div",{class:"text-overflow text-center"},Object(n.h)("strong",null,h.a.displayName(a)),Object(n.h)("br",null)),Object(n.h)("div",{class:"text-overflow text-center"},Object(n.h)(c.c,{id:"teams.connect.wants-to-follow"},"wants to follow your team:")),Object(n.h)("div",{class:"text-overflow text-center"},Object(n.h)("strong",null,h.a.displayName(o)))),r||l?Object(n.h)(t,null,Object(n.h)("div",{class:"text-center"},r?Object(n.h)("div",{class:"text-success"},Object(n.h)(c.c,{id:"teams.connect.confirmed"},"Confirmed")," ",Object(n.h)("i",{class:"fas fa-check"})):Object(n.h)("div",{class:"text-danger"},Object(n.h)(c.c,{id:"teams.connect.deleted"},"Deleted")," ",Object(n.h)("i",{class:"fas fa-trash-alt"})))):Object(n.h)(t,null,Object(n.h)("div",null,Object(n.h)("button",{class:"btn btn-sm btn-block btn-success text-overflow mt-1",onClick:this.confirmRequest,"data-team":o.id,"data-user":a.id},Object(n.h)(c.c,{id:"teams.connect.confirm"},"Confirm")),b&&b.public>0&&Object(n.h)("button",{class:"btn btn-sm btn-block btn-outline-success text-overflow mt-1",onClick:this.confirmRequest,"data-team":o.id,"data-user":a.id,"data-follow":!0},Object(n.h)(c.c,{id:"teams.connect.confirm-and-follow"},"Confirm & follow back")),Object(n.h)("div",{class:"mt-3"},Object(n.h)("small",null,Object(n.h)("button",{class:"btn btn-sm btn-block btn-link text-overflow",style:"font-size: 1.0em;",onClick:this.deleteRequest,"data-team":o.id,"data-user":a.id},Object(n.h)(c.c,{id:"teams.connect.delete"},"Del")))))))}))))),Object(n.h)("details",{class:"mt-3"},Object(n.h)("summary",null,Object(n.h)("small",null,Object(n.h)(c.c,{id:"teams.connect.how-summary"},"How does this work?"))),Object(n.h)("p",null,Object(n.h)(c.c,{id:"teams.connect.how-text"},"What can followers see when I grant them access to follow? The answer is very little. They can see main details of the workouts you share and name of the dogs. That's all. Try to follow a team and check out the workout tab.")))))):""}})||i;e.a=b}).call(this,s("hosL").Fragment)},u2zT:function(t,e,s){"use strict";var o,a=s("hosL"),i=s("/eY4"),n=s("Utv1"),l=s("OhSV");let r=Object(i.a)(o=class extends a.Component{constructor(t){super(t),this.dropRef=Object(a.createRef)(),this.handleDrag=t=>{t.preventDefault(),t.stopPropagation()},this.handleDragIn=t=>{t.preventDefault(),t.stopPropagation(),this.dragCounter++,t.dataTransfer.items&&t.dataTransfer.items.length>0&&this.setState({drag:!0})},this.handleDragOut=t=>{t.preventDefault(),t.stopPropagation(),this.dragCounter--,0===this.dragCounter&&this.setState({drag:!1})},this.handleDrop=t=>{if(t.preventDefault(),t.stopPropagation(),this.setState({drag:!1}),t.dataTransfer.files&&t.dataTransfer.files.length>0){for(let e=0,s=t.dataTransfer.files.length;e<s;e+=1){this.readLocalFile(t.dataTransfer.files[e])}this.dragCounter=0}},this.handleAddFiles=t=>{t.preventDefault();const e=t.target;for(let t=0,s=e.files.length;t<s;t+=1){this.readLocalFile(e.files[t])}},this.handleEvent=()=>{0},this.handleUpload=t=>{const{uploadStatus:e=(()=>{}),before:s=(()=>{}),after:o=(()=>{})}=this.props;e(!1),n.a.isFunction(s)&&s();const a=new FormData;a.append("files[]",t);const i={progress:1};i.xhr=new XMLHttpRequest,i.xhr.upload.addEventListener("progress",e=>{this.updateProgress(e,t)}),i.xhr.addEventListener("loadstart",e=>{this.handleEvent(e,t)}),i.xhr.addEventListener("load",e=>{this.handleEvent(e,t)}),i.xhr.addEventListener("loadend",e=>{const s=t;n.a.isFunction(o)&&o(),this.handleEvent(e,s)}),i.xhr.addEventListener("progress",e=>{this.handleEvent(e,t)}),i.xhr.addEventListener("error",e=>{this.handleEvent(e,t)}),i.xhr.addEventListener("abort",e=>{this.handleEvent(e,t)}),i.xhr.addEventListener("readystatechange",e=>{this.uploadDone(e,t)}),i.xhr.open("POST",`${n.a.getApiServer()}${this.props.apiUrl}`),i.xhr.setRequestHeader("Authorization","Bearer "+n.a.getJwtToken()),i.xhr.send(a);const l=t.name,r=this.state.uploadedFilesData;r[l]||(r[l]={}),r[l].uploadMeta=i,r[l].imageNum=this.state.imageNum,this.setState({uploadedFilesData:r})},this.readLocalFile=t=>new Promise((e,s)=>{const o=new FileReader;o.addEventListener("error",t=>{s(t)}),o.addEventListener("load",s=>{const o=t,a=o.name,i=this.state.uploadedFilesData;i[a]||(i[a]={}),i[a].event=s,this.setState({uploadedFilesData:i}),this.handleUpload(o),e(s)}),o.readAsDataURL(t)}),this.updateProgress=(t,e)=>{if(t.lengthComputable){const s=e.name,o=this.state.uploadedFilesData,a=t.loaded/t.total*100;0,o[s].uploadMeta.progress=a,this.setState({uploadedFilesData:o})}},this.uploadDone=(t,e)=>{const s=e.name,o=this.state.uploadedFilesData,a=o[s].uploadMeta;if(a&&4===a.xhr.readyState&&201===a.xhr.status){const t=JSON.parse(a.xhr.responseText).data.files;for(let e=0;e<t.length;e+=1){this.addFileToUpload(t[e]),this.fileInput.value=""}}},this.state={drag:!1,loadingProgress:0,uploadedFiles:[],uploadedFilesData:{}}}addFileToUpload(t){const{uploadedFilesData:e}=this.state,{handleAddImage:s,uploadStatus:o=(()=>{})}=this.props;delete e[t.name],this.setState({uploadedFilesData:e}),s(t),o(!0)}componentDidMount(){const t=this.dropRef.current;t.addEventListener("dragenter",this.handleDragIn),t.addEventListener("dragleave",this.handleDragOut),t.addEventListener("dragover",this.handleDrag),t.addEventListener("drop",this.handleDrop);const{autoOpen:e}=this.props;e&&setTimeout(()=>{this.fileInput.click()},10)}componentWillUnmount(){const t=this.dropRef.current;t.removeEventListener("dragenter",this.handleDragIn),t.removeEventListener("dragleave",this.handleDragOut),t.removeEventListener("dragover",this.handleDrag),t.removeEventListener("drop",this.handleDrop)}render(){const{uploadedFilesData:t}=this.state;return Object(a.h)("div",{style:{position:"relative"},ref:this.dropRef},this.state.drag&&Object(a.h)("div",{style:{border:"dashed grey 4px",backgroundColor:"rgba(255,255,255,.8)",position:"absolute",top:0,bottom:0,left:0,right:0,zIndex:9999}},Object(a.h)("div",{style:{position:"absolute",top:"50%",right:0,left:0,textAlign:"center",color:"grey",fontSize:36}},Object(a.h)("div",null,Object(a.h)(l.c,{id:"imageupload.drag-files-here"},"drop your files here :)")))),Object(a.h)("div",null,Object(a.h)("input",{class:"btn btn-info col-sm-12",multiple:!0,type:"file",id:"image-file",onchange:this.handleAddFiles,ref:t=>{this.fileInput=t}})),Object(a.h)("div",null,Object.keys(t).length>0?Object(a.h)("h3",null,Object(a.h)(l.c,{id:"imageupload.upload-images"},"Uploaded images")):"",Object(a.h)("ul",{class:"list-group"},Object.keys(t).map(e=>{const{uploadMeta:s={}}=t[e],o=e.match(/(jpg|jpeg|png|gif|heic|heif|svg|webp|tif)/i);return Object(a.h)("li",{class:"list-group-item list-group-item-action flex-column align-items-start"},Object(a.h)("div",{class:"d-flex w-100 justify-content-between"},o&&Object(a.h)("img",{class:"img-fluid mr-3",src:t[e].event.target.result,style:"max-height: 50px;"}),Object(a.h)("small",null,t[e].event.uploadDone),Object(a.h)(l.c,{id:"imageupload.uploading-image"},"Laster opp bilde..."),Object(a.h)("small",null,n.a.formatBytes(t[e].event.total,2))),Object(a.h)("div",{class:"progress mt-1",style:"height: 4px;"},Object(a.h)("div",{class:"progress-bar progress-bar-striped progress-bar-animated bg-success",role:"progressbar",style:`width: ${s.progress}%; height: 4px;`,"aria-valuenow":s.progress,"aria-valuemin":"0","aria-valuemax":"100"})))}))),this.props.children)}})||o;e.a=r},"vY+r":function(t,e,s){"use strict";(function(t){function o(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,o)}return s}function a(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}var i,n=s("hosL"),l=s("Utv1"),r=s("/eY4"),c=s("OhSV"),h=s("ZOvn");const d={};let b=Object(r.a)(i=class extends n.Component{constructor(t){super(t),this.toggleViews=()=>{const{showViewList:t}=this.state,{isTeamAdmin:e,isAdmin:s}=this.props;(e||s)&&this.setState({showViewList:!t})},this.state=function(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?o(Object(s),!0).forEach((function(e){a(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):o(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}({},d)}render(){const{showViewList:e}=this.state,{storyStore:s,teamStore:o,workoutStore:a}=this.props.stores,{views:i,object:r,type:d="story",onTeamClick:b=(()=>{}),onUserClick:m=(()=>{})}=this.props,u=[];Object.entries(r.statistics).forEach(([t,e])=>{Object.entries(e).forEach(([t,e])=>{e.viewUsers&&u.push(e.viewUsers)})});const p=u.flat().slice(0,50);return Object(n.h)(t,null,Object(n.h)("div",{class:"d-flex justify-content-end mb-2"},Object(n.h)("span",{class:"ml-2 text-muted font-weight-lighter",onClick:this.toggleViews},i," ",Object(n.h)(c.c,{id:"story.views"},"views"))),e&&Object(n.h)("div",{class:"mt-3 mb-3"},p&&p.map(e=>{let i,r,c;if("story"===d?(i=s.findPublicUser(e),r=s.findPublicTeamByMembers(e)):"team"===d?(i=o.findPublicUser(e),r=o.findPublicTeamByMembers(e)):"workout"===d&&(i=a.findPublicUser(e),r=a.findPublicTeamByMembers(e)),!i)return"";l.a.isArray(r)&&(c=r.find(t=>1===t.public));const m=h.a.getImage({user:i,team:c,priority:"user"}),u=h.a.displayNameShort(i),p=h.a.displayName(i,!0);return Object(n.h)("div",{class:"d-flex flex-row position-relative font-weight-light mb-1"},c?Object(n.h)(t,null,Object(n.h)("a",{href:"/teams/public/"+c.uuidv4,title:c.name,onClick:t=>b(t,c.uuidv4),class:"stretched-link"},Object(n.h)("div",{class:"text-center border rounded-circle imageRounded imageRoundedThumb",style:""+(m?`background-image: url("${m}"); background-size: cover;`:"")},!m&&Object(n.h)("div",{class:"",style:"font-size: 12px; padding-top: 3px;"},u))),Object(n.h)("div",{class:"ml-2 "},p," ",Object(n.h)("span",{class:"font-weight-lighter"},"- ",c.name))):Object(n.h)(t,null,Object(n.h)("div",{class:"text-center border rounded-circle imageRounded imageRoundedThumb",style:(m?`background-image: url("${m}"); background-size: cover;`:"")+" opacity: 0.5;"},!m&&Object(n.h)("div",{class:"text-muted",style:"font-size: 12px; padding-top: 3px;"},u)),Object(n.h)("div",{class:"ml-2"},p)))}),i>p.length&&Object(n.h)(t,null,Object(n.h)("small",{class:"text-muted"},Object(n.h)(c.c,{id:"story.limited-to"},"Limited to max 50 users.")))))}})||i;e.a=b}).call(this,s("hosL").Fragment)},w93r:function(t,e,s){"use strict";(function(t){var o,a=s("hosL"),i=s("/eY4"),n=s("Utv1"),l=s("OhSV"),r=(s("X9Km"),s("QkTp")),c=s("ZOvn");let h=Object(i.a)(o=class extends a.Component{constructor(t){super(t),this.toggleyrWeather=()=>{const{showWeather:t}=this.state;this.setState({showWeather:!t})},this.state={},this.inputRef={}}async loadWeather(){const{userStore:t}=this.props.stores;this.setState({isLoading:!0});const{user:e}=t;if(e.currentLocationInfo&&e.currentLocationInfo.coords){const{latitude:s,longitude:o,altitude:a}=e.currentLocationInfo.coords;t.getWeatherUser({lat:s,lon:o,altitude:a}),t.formatWeather()}}componentDidMount(){this.loadWeather()}render(){const{showWeather:e}=this.state,{place:s}=this.props,{userStore:o}=this.props.stores,{yrWeather:i,yrWeatherKeys:h,yrWeatherFormatted:d,user:b}=o,{currentLocationGeocode:m}=b;return i&&s?e?Object(a.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 px-0 mb-4"},m&&m.formatted_address&&Object(a.h)("h5",null,m.formatted_address),Object(a.h)("div",{class:"table-responsive",onTouchstart:c.a.captureEvents,onTouchend:c.a.captureEvents,onTouchmove:c.a.captureEvents,onScroll:c.a.captureEvents},Object(a.h)("table",{class:"table table-striped table-sm"},Object(a.h)("thead",null,Object(a.h)("tr",null,Object(a.h)("th",{class:"text-center"}," "),Object(a.h)("th",{class:"text-center"},Object(a.h)(l.c,{id:"weather.night"},"Night")),Object(a.h)("th",{class:"text-center"},Object(a.h)(l.c,{id:"weather.morning"},"Morning")),Object(a.h)("th",{class:"text-center"},Object(a.h)(l.c,{id:"weather.afternoon"},"Afternoon")),Object(a.h)("th",{class:"text-center"},Object(a.h)(l.c,{id:"weather.evening"},"Evening")),Object(a.h)("th",{class:"text-center"},Object(a.h)(l.c,{id:"weather.temp"},"Temp")),Object(a.h)("th",{class:"text-center"},Object(a.h)(l.c,{id:"weather.rainfall"},"Rainfall")),Object(a.h)("th",{class:"text-center"},Object(a.h)(l.c,{id:"weather.wind"},"Wind")))),Object(a.h)("tbody",null,h&&h.map(e=>Object(a.h)(t,null,Object(a.h)("tr",null,Object(a.h)("td",{class:"text-center"},Object(a.h)("nobr",null,e)),Object(a.h)("td",{class:"text-center"},Object(a.h)("nobr",null,n.a.getNestedValue(d[e].night,"next_6_hours.summary.symbol_code")&&Object(a.h)("img",{style:"width: 40px;",src:`./assets/svg/${n.a.getNestedValue(d[e].night,"next_6_hours.summary.symbol_code")}.svg`}))),Object(a.h)("td",{class:"text-center"},Object(a.h)("nobr",null,n.a.getNestedValue(d[e].morning,"next_6_hours.summary.symbol_code")&&Object(a.h)("img",{style:"width: 40px;",src:`./assets/svg/${n.a.getNestedValue(d[e].morning,"next_6_hours.summary.symbol_code")}.svg`}))),Object(a.h)("td",{class:"text-center"},Object(a.h)("nobr",null,n.a.getNestedValue(d[e].day,"next_6_hours.summary.symbol_code")&&Object(a.h)("img",{style:"width: 40px;",src:`./assets/svg/${n.a.getNestedValue(d[e].day,"next_6_hours.summary.symbol_code")}.svg`}))),Object(a.h)("td",{class:"text-center"},Object(a.h)("nobr",null,n.a.getNestedValue(d[e].evening,"next_6_hours.summary.symbol_code")&&Object(a.h)("img",{style:"width: 40px;",src:`./assets/svg/${n.a.getNestedValue(d[e].evening,"next_6_hours.summary.symbol_code")}.svg`}))),Object(a.h)("td",{class:"text-center"},Object(a.h)("nobr",null,Object(a.h)("i",{class:"fas fa-temperature-low text-muted ml-1 mr-2"}),Object(a.h)("span",{class:c.a.getTemperatureColor(n.a.getNestedValue(d[e],"air_temperatures_min"))},Object(a.h)(r.a,{stores:this.props.stores,value:n.a.getNestedValue(d[e],"air_temperatures_min")})),Object(a.h)("span",{class:"text-muted font-weight-lighter mx-1"},"-"),Object(a.h)("span",{class:c.a.getTemperatureColor(n.a.getNestedValue(d[e],"air_temperatures_max"))},Object(a.h)(r.a,{stores:this.props.stores,value:n.a.getNestedValue(d[e],"air_temperatures_max")})))),Object(a.h)("td",{class:"text-center"},Object(a.h)("nobr",null,n.a.format(n.a.getNestedValue(d[e],"precipitation_amount"),1)," ",Object(a.h)("span",{class:"text-muted font-weight-lighter"},"mm"))),Object(a.h)("td",{class:"text-center"},Object(a.h)("nobr",null,Object(a.h)("i",{class:"fas fa-wind text-muted ml-1"})," ",Object(a.h)("span",{class:c.a.getWindSpeedColor(n.a.getNestedValue(d[e],"wind_speeds_min"))},n.a.format(n.a.getNestedValue(d[e],"wind_speeds_min"),1))," ",Object(a.h)("span",{class:"text-muted font-weight-lighter"},"-")," ",Object(a.h)("span",{class:c.a.getWindSpeedColor(n.a.getNestedValue(d[e],"wind_speeds_max"))},n.a.format(n.a.getNestedValue(d[e],"wind_speeds_max"),1))," ",Object(a.h)("span",{class:"text-muted font-weight-lighter"},"m/s"))))))))),Object(a.h)("button",{type:"button",class:"btn btn-block btn-primary btn-sm",onClick:this.toggleyrWeather},Object(a.h)("i",{class:"fas fa-times-circle"})," ",Object(a.h)(l.c,{id:"weather.close"},"Close"))):Object(a.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 px-0"},i&&i.length>0&&Object(a.h)("div",{class:"container-fluid px-0"},Object(a.h)("div",{class:"row",onClick:this.toggleyrWeather},i&&i.length>0&&i.slice(0,1).map(t=>Object(a.h)("div",{class:"col-12 text-right"},Object(a.h)("nobr",null,Object(a.h)("small",{class:"font-weight-light text-muted"},n.a.isoTime(t.time)),":",Object(a.h)("img",{src:`./assets/svg/${n.a.getNestedValue(t,"next_1_hours.summary.symbol_code")}.svg`,class:"ml-2",style:"height: 20px;"}),n.a.getNestedValue(t,"next_1_hours.details.precipitation_amount")>0&&Object(a.h)("small",{class:"ml-2"},n.a.getNestedValue(t,"next_1_hours.details.precipitation_amount"),Object(a.h)("span",{class:"text-muted font-weight-lighter"},"mm")),Object(a.h)("small",{class:"ml-2"},Object(a.h)("i",{class:"fas fa-temperature-low text-muted"})," ",Object(a.h)(r.a,{stores:this.props.stores,value:n.a.getNestedValue(t,"instant.details.air_temperature")})),Object(a.h)("small",{class:"ml-2"},Object(a.h)("i",{class:"fas fa-wind text-muted"})," ",n.a.getNestedValue(t,"instant.details.wind_speed"),Object(a.h)("span",{class:"text-muted font-weight-lighter"},"m/s")," ",Object(a.h)("span",{class:"text-muted font-weight-lighter"},c.a.windDirection(n.a.getNestedValue(t,"instant.details.wind_from_direction"))))),Object(a.h)("br",null)))))):""}})||o;e.a=h}).call(this,s("hosL").Fragment)},yHBq:function(t,e,s){"use strict";(function(t){function o(){return(o=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var s=arguments[e];for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(t[o]=s[o])}return t}).apply(this,arguments)}var a,i,n=s("hosL"),l=s("/eY4"),r=s("Utv1");let c=Object(l.a)(a=class extends n.Component{constructor(t){super(t),this.state={},this.containerRef=null}componentWillUnmount(){const{removeIntersectionObserver:t}=this.props;t&&t(this.containerRef)}componentDidMount(){const{addIntersectionObserver:t}=this.props;t&&t(this.containerRef)}render(){const{wrapperClassNames:t="",contentClassNames:e="",renderContent:s,obj:a={},idx:i,dataFields:l,dataValues:r,sessionid:c}=this.props,h={};return c&&(h.sessionid=c),l.forEach(t=>h["data-"+t]=encodeURI(r[t]||a[t])),Object(n.h)("div",o({class:""+t,ref:t=>this.containerRef=t,"data-idx":i},h),Object(n.h)("div",{class:""+e,style:"display: block;"},s({obj:a,idx:i})))}})||a,h=Object(l.a)(i=class extends n.Component{constructor(t){super(t),this.deleteIntersectionObserver=()=>{this.intersectionObserver=null},this.handleIntersection=t=>{const{handleIntersection:e}=this.props;"function"==typeof e&&e(t),t.forEach(t=>{const{isIntersecting:e}=t,{height:s=0}=t.target.dataset,o=Math.max(t.target.childNodes[0].offsetHeight,t.target.offsetHeight,t.target.scrollHeight);e?(t.target.childNodes[0].style.display="block",t.target.style.minHeight=(o>s?o:s)+"px"):t.target.style.minHeight&&(t.target.style.minHeight=(o>s?o:s)+"px",t.target.childNodes[0].style.display="none")})},this.setupIntersectionObserver=()=>{if(!("IntersectionObserver"in window)||!("IntersectionObserverEntry"in window)||!("intersectionRatio"in window.IntersectionObserverEntry.prototype))return!1;this.intersectionObserver=new IntersectionObserver(this.handleIntersection,{root:null,rootMargin:"100px",threshold:.1})},this.addIntersectionObserver=t=>{this.intersectionObserver&&t&&this.intersectionObserver.observe(t)},this.removeIntersectionObserver=t=>{this.intersectionObserver&&t&&this.intersectionObserver.unobserve(t)},this.state={}}componentWillMount(){this.setupIntersectionObserver()}componentWillUnmount(){this.deleteIntersectionObserver()}render(){const{data:e=[],wrapperClassNames:s="row pb-4 bg-light",contentClassNames:o="col-12 col-sm-8 col-lg-6 offset-sm-2 offset-lg-3 mb-0 position-relative rounded rounded-lg py-3 shadow-sm",renderContent:a=(()=>Object(n.h)(t,null,"Missing render function!")),dataFields:i=[],dataValues:l={}}=this.props;return Object(n.h)("div",{class:"w-100"},e&&e.filter(t=>r.a.isObject(t)).map((e,r)=>{const h=e.hasOwnProperty("wrapperClassNames")?e.wrapperClassNames:s,d=e.hasOwnProperty("contentClassNames")?e.contentClassNames:o;return Object(n.h)(t,null,Object(n.h)(c,{key:`fastline-${r}-${e.id}`,obj:e,idx:r,addIntersectionObserver:this.addIntersectionObserver,removeIntersectionObserver:this.removeIntersectionObserver,wrapperClassNames:h,contentClassNames:d,renderContent:a,dataFields:i,dataValues:l}))}))}})||i;e.a=h}).call(this,s("hosL").Fragment)}}]);
//# sourceMappingURL=32.chunk.d2878.esm.js.map