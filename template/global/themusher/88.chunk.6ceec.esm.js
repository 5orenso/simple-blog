(window.webpackJsonp=window.webpackJsonp||[]).push([[88],{"1/9N":function(t,e,s){"use strict";(function(t){var a,i=s("hosL"),o=s("Utv1"),c=s("/eY4"),l=(s("OhSV"),s("ZOvn"),s("bbv7"));let n=Object(c.a)(a=class extends i.Component{render(){const{legendLeft:e=[],legendRight:s=[],dataLeft:a=[],dataRight:c=[],showDebug:n,xTicksVal:r=(t=>o.a.isoDate(t,!1,!1,!0)),xTicksCnt:h=5,yTicksLeftVal:g=(t=>t),yTicksRightVal:d=(t=>t)}=this.props,p=a&&a[0]?a[0]:[],m=[];if(p.length){const t=Math.ceil(p.length/(h-1)),e=Math.floor(p.length/t);n&&console.log({firstData:p,parts:e,partSize:t});for(let e=0,s=p.length;e<s;e+=t)m.push(p[e].epoch);m.push(p[p.length-1].epoch)}return Object(i.h)(t,null,Object(i.h)("div",{class:"w-100 mt-3 mb-4"},Object(i.h)(l.a,{stores:this.props.stores,width:1e3,height:300,showXTicks:1,xTicksVal:r,xTicks:m,paddingTop:30,lineFromXzero:!1,lineFromXmax:!1,dataLeft:a,legendLeft:e,showYTicksLeft:1,yTicksLeftVal:g,avgWindowLeft:[0,0,0,0,0,0,0],smoothLeft:[0,0,0,0,0,0,0],dataRight:c,legendRight:s,showYTicksRight:c.length>0?1:0,yTicksRightVal:d,avgWindowRight:[0,0,0,0,0,0,0],smoothRight:[0,0,0,0,0,0,0],scrollToRight:!0})))}})||a;e.a=n}).call(this,s("hosL").Fragment)},Nanz:function(t,e,s){"use strict";s.r(e),function(t){function a(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,a)}return s}function i(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}var o,c=s("hosL"),l=s("Utv1"),n=s("/eY4"),r=(s("Y3FI"),s("OhSV")),h=s("fh8t"),g=s.n(h),d=(s("X9Km"),s("ZOvn")),p=s("s4FZ"),m=s("1/9N");const b=d.a.marginTop(!1),u=d.a.marginTopBack(!1),f=d.a.marginBottom(),O={newTeam:{}};let j=Object(n.a)(o=class extends c.Component{constructor(t){super(t),this.back=()=>{const{history:t}=this.props.stores;t.goBack()},this.nextDog=()=>{const{nextDogIdx:t}=this.state,{dogs:e=[],stores:s}=this.props,a=e[t];a&&a.uuidv4&&this.loadPublicDog({stores:s,dogs:e,dogid:a.uuidv4})},this.prevDog=()=>{const{prevDogIdx:t}=this.state,{dogs:e=[],stores:s}=this.props,a=e[t];a&&a.uuidv4&&this.loadPublicDog({stores:s,dogs:e,dogid:a.uuidv4})},this.state=function(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?a(Object(s),!0).forEach((function(e){i(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):a(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}({},O),this.updateTimer={},this.time=(new Date).getTime(),this.apiServer=l.a.getApiServer()}async loadPublicView(t){this.setState({isLoading:!0});const{dogid:e}=t,{dogStore:s}=this.props.stores;await s.getPublicViews(e),this.setState({isLoading:!1})}async loadAll(t=this.props){await this.loadPublicDog(t),await this.loadPublicView(t)}async loadPublicDog(t=this.props){const{dogStore:e}=t.stores,{dogid:s,dogs:a=[]}=t;await e.loadPublicDetail({id:s});const{publicDog:i}=e,o=a.findIndex(t=>t.id===i.id);let c=null,l=null,n=null,r=null,h=!1,g=!1;o>0&&(c=o-1,n=a[c].shortname||a[c].name,h=!0),o<a.length-1&&(l=o+1,r=a[l].shortname||a[l].name,g=!0),this.setState({prevDogIdx:c,prevDogName:n,nextDogIdx:l,nextDogName:r,hasPrevDog:h,hasNextDog:g,currentDogIdx:o})}componentDidMount(){const{back:t=this.back}=this.props,{appState:e}=this.props.stores;e.setSwipeRight(()=>{e.setSwipeRight(),t()}),this.loadAll()}componentWillReceiveProps(t){t.dogid!==this.props.dogid&&this.loadAll(t)}render(){const{hasPrevDog:e,hasNextDog:s}=this.state,{teamStore:a,dogStore:i,userStore:o}=this.props.stores,{user:n,isAdmin:h}=o,{language:O="en"}=n,{publicDog:j,publicTeam:v,publicViewsGraphData:x}=i,w=!(!v||!v.members)&&v.members.some(t=>t.id===n.id),y=v||{},{marginTop:k,marginBottom:D,back:T=this.back}=this.props,{users:L=[],imageHeader:S}=y,{image:P}=j,R=S&&S.s3XXLargeLink?S:{s3XXLargeLink:"./assets/homerun-race-logo.png"},$=P&&P.s3LargeLink?P:null,I=(o.findTeamAmbition({ambition:y.ambitions,language:O}),o.findTeamType({type:y.type,language:O}),o.findDogposition({position:j.position,language:O})),X=d.a.hasBirthday(j.birth),z=Math.ceil(d.a.daysUntilNextBirthday(j.birth));return Object(c.h)(t,null,Object(c.h)("div",{class:"container-fluid pb-5",style:`margin-bottom: ${D||f}; margin-top: ${k||b};`},Object(c.h)("button",{class:"btn btn-link pl-0 fixed-top text-primary",style:`top: ${u}; left: 5px; font-size: 2.0em; width: 43px;`,onClick:T},Object(c.h)("i",{class:"fas fa-arrow-circle-left"})),Object(c.h)("div",{class:"row mb-0"},Object(c.h)("div",{class:"w-100 position-relative",style:"height: 25vh; background-size: cover; background-repeat: no-repeat; background-position: 50% 50%; background-color: #a0a0a0; "+(R?`background-image: url("${R.s3XXLargeLink}");`:"")}),Object(c.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-3"},Object(c.h)("div",{class:"row"},Object(c.h)("div",{class:"col-3 col-sm-4 col-md-3 col-lg-4 position-relative"},Object(c.h)("div",{class:"text-center border border-white rounded-circle position-absolute imageRoundedXLarge imageRoundedResponsive imageRoundedResponsivePosition",style:"left: 20px; "+($?`background-image: url("${$.s3LargeLink}"); background-size: cover; background-repeat: no-repeat; background-position: 50% 50%;`:"")},!$&&Object(c.h)("i",{class:"fas fa-users text-muted mt-3",style:"font-size: 40px;"}))," "),Object(c.h)("div",{class:"col-9 col-sm-8 col-md-9 col-lg-8",style:"line-height: 1.2em;"},Object(c.h)("small",{class:"font-weight-light"},y.name),Object(c.h)("br",null),j.birth&&Object(c.h)(t,null,Object(c.h)("h5",{class:"float-right"},z<7&&Object(c.h)(t,null,Object(c.h)("span",{class:"text-muted mr-2"},Object(c.h)("i",{class:"fas fa-birthday-cake"})," in ",z," days")),j.birth&&Object(c.h)("span",{class:"mr-2"},l.a.age(j.birth,j.deceased)),"female"===j.gender?Object(c.h)("i",{class:"fas fa-venus"}):Object(c.h)("i",{class:"fas fa-mars"}))),Object(c.h)("h5",{class:"my-0"},j.shortname||j.name,X&&Object(c.h)(t,null,Object(c.h)("i",{class:"fas fa-birthday-cake ml-3"}))),j.shortname&&Object(c.h)("div",null,j.name),I&&I.class&&Object(c.h)(t,null,Object(c.h)("span",{class:`badge badge-${I.class||"primary"} mt-2`},I.icon&&Object(c.h)("i",{class:I.icon})," ",I.name)),j.weight>0&&Object(c.h)("small",{class:"text-muted"},j.weight&&Object(c.h)(t,null,Object(c.h)("i",{class:"fas fa-balance-scale ml-2"})," ",l.a.format(j.weight,1)," kg")))))),Object(c.h)("div",{class:"row mt-5"},Object(c.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3"},Object(c.h)("h5",{class:"font-weight-lighter text-muted border-bottom"},Object(c.h)(r.c,{id:"dogs.description"},"Beskrivelse"))),Object(c.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3"},Object(c.h)(g.a,{markdown:d.a.replaceImages(j.description,j.images,O),markdownOpts:d.a.getMarkdownOptions()}))),j.images&&Object(c.h)("div",{class:"row mt-5"},Object(c.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3"},Object(c.h)("h5",{class:"font-weight-lighter text-muted border-bottom"},Object(c.h)(r.c,{id:"dogs.public-photos",fields:{total:j.images.length}},"Bilder av hunden - ",j.images.length," stk"))),Object(c.h)("div",{class:"col-12 col-sm-8 col-lg-6 offset-sm-2 offset-lg-3 mb-0 position-relative px-0"},Object(c.h)(p.a,{stores:this.props.stores,images:j.images}))),j.achievements&&Object(c.h)("div",{class:"row mt-5"},Object(c.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3"},Object(c.h)("h5",{class:"font-weight-lighter text-muted border-bottom"},Object(c.h)(r.c,{id:"dogs.achievements"},"Achievements"))),Object(c.h)("div",{class:"col-12 col-sm-8 col-lg-6 offset-sm-2 offset-lg-3 mb-0 position-relative"},Object(c.h)("div",{class:"row"},j.achievements&&j.achievements.map(t=>Object(c.h)("div",{class:"col-12"},t.date&&Object(c.h)("span",{class:"font-weight-lighter mr-2"},l.a.isoDate(t.date,!1,!1,!0)),Object(c.h)("span",{class:"mr-2 font-weight-bold"},t.name),Object(c.h)("span",{class:"mr-2 font-weight-light"},t.description),t.url&&Object(c.h)("span",{class:"mr-2"},Object(c.h)("a",{href:d.a.asUrl(t.url),target:"_blank",rel:"noreferrer",native:!0},Object(c.h)("i",{class:"fas fa-link"})))))))),j.trophys&&Object(c.h)("div",{class:"row mt-5"},Object(c.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3"},Object(c.h)("h5",{class:"font-weight-lighter text-muted border-bottom"},Object(c.h)(r.c,{id:"dogs.trophy"},"Trophys"))),Object(c.h)("div",{class:"col-12 col-sm-8 col-lg-6 offset-sm-2 offset-lg-3 mb-0 position-relative"},Object(c.h)("div",{class:"row"},j.trophys&&j.trophys.reverse().map(t=>{const e=d.a.getTrophyImage(t.name);if(!e)return"";const s=t.descriptionHeader&&t.descriptionHeader[O]?t.descriptionHeader[O]:"",a=t.description&&t.description[O]?t.description[O]:"";return Object(c.h)("div",{class:"col-4 mt-3"},Object(c.h)("div",{class:"mb-2"},Object(c.h)("img",{src:e,class:"img-fluid"})),Object(c.h)("strong",null,s),Object(c.h)("small",null,Object(c.h)("details",null,Object(c.h)("summary",null,Object(c.h)(r.c,{id:"dogs.trophy-details"},"Details")),Object(c.h)(g.a,{markdown:d.a.replaceImages(a,j.images,O),markdownOpts:d.a.getMarkdownOptions()}))))})))),Object(c.h)("div",{class:"row mt-5 mb-5"},Object(c.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3"},Object(c.h)("div",{class:"text-center text-muted"},Object(c.h)("div",{class:"display-1"},Object(c.h)("i",{class:"fas fa-ellipsis-h"})),Object(c.h)("div",{style:"line-height: 0.9em;"},Object(c.h)("small",null,Object(c.h)(r.c,{id:"dogs.something-missing"},"Er det noe du savner på denne siden? Send oss en melding på Facebook.")))))),(h||w)&&Object(c.h)(t,null,Object(c.h)("h5",{class:"font-weight-lighter text-muted border-bottom"},Object(c.h)(r.c,{id:"dogs.visits"},"Dog page visits")),Object(c.h)(m.a,{stores:this.props.stores,dataLeft:x,legendLeft:["dog"],key:"minigraph-dog-"+j.uuidv4})),s&&Object(c.h)("span",{class:"fixed-bottom text-primary",style:"bottom: 60px; left: auto; right: 12px; width: 43px; font-size: 3.0em; z-index: 10;"},Object(c.h)("i",{class:"fas fa-arrow-circle-right",onClick:this.nextDog})),e&&Object(c.h)("span",{class:"fixed-bottom text-primary",style:"bottom: 60px; left: 5px; width: 43px; font-size: 3.0em; z-index: 10;"},Object(c.h)("i",{class:"fas fa-arrow-circle-left",onClick:this.prevDog})),j.uuidv4&&Object(c.h)("img",{src:`${this.apiServer}/api/dogs/${j.uuidv4}/view?user=${n.id}&time=${this.time}`,style:"width: 1; height: 1; opacity: 0.1;"})))}})||o;e.default=j}.call(this,s("hosL").Fragment)},s4FZ:function(t,e,s){"use strict";(function(t){function a(t){return c.a.isObject(t)&&t.s3LargeLink}var i,o=s("hosL"),c=s("Utv1"),l=s("/eY4");s("OhSV");let n=Object(l.a)(i=class extends o.Component{constructor(t){super(t),this.scrollImages=t=>{const{images:e}=this.props,{scrollLeft:s,clientWidth:a}=t.target,i=s/a,o=Math.round(i),c=Math.abs(o-i);(Number.isInteger(i)||c<.1)&&this.setState({imageIdx:o})},this.distance=t=>Math.hypot(t.touches[0].pageX-t.touches[1].pageX,t.touches[0].pageY-t.touches[1].pageY),this.pinchZoomOnTouchStart=t=>{if(2===t.touches.length){t.preventDefault(),t.stopPropagation();const e={};e.x=(t.touches[0].pageX+t.touches[1].pageX)/2,e.y=(t.touches[0].pageY+t.touches[1].pageY)/2,e.distance=this.distance(t),this.setState({start:e})}},this.pinchZoomOnTouchMove=t=>{let{imageElementScale:e,imageElementMaxScale:s}=this.state;const{start:a}=this.state;if(2===t.touches.length){let i;if(t.preventDefault(),t.stopPropagation(),t.scale)i=t.scale;else{i=this.distance(t)/a.distance}e=Math.min(Math.max(1,i),s),this.setState({imageElementScale:e},()=>{const s=`translate3d(${2*((t.touches[0].pageX+t.touches[1].pageX)/2-a.x)}px, ${2*((t.touches[0].pageY+t.touches[1].pageY)/2-a.y)}px, 0) scale(${e})`;t.target.style.transition="",t.target.style.transform=s,t.target.style.WebkitTransform=s,t.target.style.zIndex="100000"})}},this.pinchZoomOnTouchEnd=t=>{this.setState({imageElementScale:1}),t.target.style.transition="transform 250ms",t.target.style.transform="",t.target.style.WebkitTransform="",t.target.style.zIndex=""},this.state={imageIdx:0,imageElementScale:1,imageElementMaxScale:5,start:{}}}render(){const{imageIdx:e,imageElementScale:s}=this.state,{images:i,id:c,dblClick:l=(()=>{}),likeRef:n={},noimagestext:r,minHeight:h="100px"}=this.props;return i&&0!==i.length?Object(o.h)("div",{class:"w-100 position-relative"},Object(o.h)("div",{class:"d-flex flex-row flex-nowrap bg-light border-top border-bottom",style:`\n                        overflow-x: ${s>1&&1===i.length?"visible !important":"auto"};\n                        overflow-y: ${s>1?"visible !important":"auto"};\n                        scroll-snap-type: x mandatory;\n                    `,onScroll:this.scrollImages},i&&i.filter(a).map(e=>Object(o.h)("div",{class:"col-12 clearfix p-0"},Object(o.h)("div",{class:"w-100 h-100 text-center rounded-lg imageContainer d-flex justify-content-center align-items-center position-relative ",style:"\n                                    scroll-snap-align: start;\n                                    flex-wrap: wrap;\n                                ",onDblclick:l,"data-id":c,onTouchstart:t=>{t.stopPropagation()},onTouchend:t=>{t.stopPropagation()},onTouchmove:t=>{t.stopPropagation()}},Object(o.h)("div",{class:"position-absolute w-100 h-100",style:`\n                                        background-image: url('${e.s3SmallLink}'); background-size: cover;\n                                        filter: blur(10px);\n                                        opacity: 0.5;\n                                    `}),e.s3LargeLink?Object(o.h)("img",{class:"img-fluid position-relative",src:`${e.s3LargeLink}${e.updatedDate?"?updated="+(""+e.updatedDate):""}`,loading:"lazy",style:`max-height: 75vh; min-height: ${h}; `,onTouchstart:this.pinchZoomOnTouchStart,onTouchend:this.pinchZoomOnTouchEnd,onTouchmove:this.pinchZoomOnTouchMove}):Object(o.h)(t,null,Object(o.h)("span",{class:"display-1 text-muted"},Object(o.h)("i",{class:"fas fa-camera"})))),n[c]&&Object(o.h)("span",{class:"likeHeart position-absolute text-white display-1",style:"top: calc(50% - 50px); left: calc(50% - 50px); width: 100px; height: 100px;"},Object(o.h)("i",{class:"fas fa-heart likeStory"}))))),i&&i.length>1&&Object(o.h)(t,null,Object(o.h)("div",{class:"w-100 text-center"},Object(o.h)("small",null,Object(o.h)("small",null,i&&i.filter(a).map((s,a)=>Object(o.h)(t,null,Object(o.h)("i",{class:(a===e?"fas":"far")+" fa-circle mr-1"})))))),Object(o.h)("div",{class:"position-absolute text-white font-weight-lighter px-1 py-1 rounded-lg",style:"top: 10px; right: 10px; background-color: rgba(0, 0, 0, 0.3); line-height: 1.0em;"},Object(o.h)("small",null,e+1," / ",i.length)))):r?Object(o.h)(t,null,Object(o.h)("div",{class:"col-12 text-center text-muted"},Object(o.h)("div",{class:"display-1"},Object(o.h)("i",{class:"fas fa-camera"})),Object(o.h)("h3",{class:"font-weight-lighter"},r))):Object(o.h)(t,null)}})||i;e.a=n}).call(this,s("hosL").Fragment)}}]);
//# sourceMappingURL=88.chunk.6ceec.esm.js.map