(window.webpackJsonp=window.webpackJsonp||[]).push([[65,5],{"/V/i":function(t,e,s){"use strict";(function(t){function n(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,n)}return s}function a(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}var o,i=s("hosL"),c=(s("QRet"),s("Utv1")),r=s("/eY4");s("OhSV");const l={};let h=Object(r.a)(o=class extends i.Component{constructor(t){super(t),this.toggleFocusOnMusher=t=>{const e=t.target.parentElement.dataset.musherid||t.target.dataset.musherid,{appState:s,raceStore:n}=this.props.stores;s.toggleFocusOnMusher(parseInt(e,10));const{focusOnMushers:a}=s;n.getWorkoutSummaryActiveTeams(a)},this.toggleInfoOnMusher=t=>{const e=t.target.parentElement.dataset.musherid||t.target.dataset.musherid,{appState:s}=this.props.stores;s.toggleInfoOnMusher(parseInt(e,10))},this.state=function(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?n(Object(s),!0).forEach((function(e){a(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):n(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}({},l)}render(){const{raceStore:e,appState:s}=this.props.stores,{team:n={},idx:a}=this.props,{language:o="en",focusOnMushers:r=[],infoOnMushers:l=[]}=s,h=e.getActiveTeamById(n.id),d=e.getWorkoutSummaryByTeam(n.id),b=e.getClassByTeamId(n.id),u=e.getWorkoutResultsByTeam(d,b.distance),p=e.getMusherByTeamId(n.id),m=n.images&&n.images.length>0?n.images[0]:{},g=e.getClassByTeamId(n.id),O=u.distanceKm/b.distance*100,j=O>0?1:0;let f,v,w;h&&h.currentLocation&&h.currentLocation.coords&&(f=3.6*h.currentLocation.coords.speed,v=h.currentLocation.timestamp,w=!0);let y=g.distance-u.distanceKm;return y<0&&(y=0),Object(i.h)(t,null,Object(i.h)("div",{class:"row border-top mt-2",style:"font-size: 0.7em;"},Object(i.h)("div",{class:"col-2 p-0 text-center"},Object(i.h)("h2",null,a+1)),Object(i.h)("div",{class:"col-2 p-0 text-center"},Object(i.h)("div",{class:"text-center text-muted pt-2 h-100",style:`background-image: url("${m.s3SmallLink}"); background-size: cover;`,onClick:this.toggleInfoOnMusher,"data-musherid":n.id},!m.s3SmallLink&&Object(i.h)(t,null,Object(i.h)("span",{class:"font-weight-lighter",style:"font-size: 35px;"},c.a.ucfirst(String(p.firstname),!0),c.a.ucfirst(String(p.lastname),!0))))),Object(i.h)("div",{class:"col-8"},Object(i.h)("div",{class:"row"},Object(i.h)("div",{class:"col-6 px-1"},Object(i.h)("span",{class:"font-weight-bold"},p.firstname," ",p.lastname),Object(i.h)("br",null),Object(i.h)("span",{class:"font-weight-lighter"},n.name),Object(i.h)("br",null),g&&g.title&&Object(i.h)(t,null,Object(i.h)("span",{class:"font-weight-lighter"},g.title))),Object(i.h)("div",{class:"col-3 p-0 text-center"},Object(i.h)("span",{class:"font-weight-lighter"},"km"),Object(i.h)("br",null),Object(i.h)("span",{style:"font-size: 2.0em;"},c.a.format(u.distanceKm,0))),Object(i.h)("div",{class:"col-3 p-0 text-center"},Object(i.h)("span",{class:"font-weight-lighter"},"to finish"),Object(i.h)("br",null),Object(i.h)("span",{style:"font-size: 2.0em;"},0===y?Object(i.h)("i",{class:"fas fa-flag-checkered text-success"}):Object(i.h)(t,null,c.a.format(y,0))))),Object(i.h)("div",{class:"row border-top"},Object(i.h)("div",{class:"col-3 p-0 text-center"},Object(i.h)("span",{class:"font-weight-lighter"},"Rest"),Object(i.h)("br",null),c.a.secToHms(u.rest)),Object(i.h)("div",{class:"col-3 p-0 text-center"},Object(i.h)("span",{class:"font-weight-lighter"},"Speed"),Object(i.h)("br",null),f?Object(i.h)(t,null,c.a.format(f,1)," km/t"):"-"),Object(i.h)("div",{class:"col-3 p-0 text-center"},Object(i.h)("span",{class:"font-weight-lighter"},"Status"),Object(i.h)("br",null),1===h.isInProgress?Object(i.h)("span",{class:"text-primary"},"running"):"",2===h.isInProgress?Object(i.h)("span",{class:"text-danger"},"resting"):"",0===y?Object(i.h)(t,null,h.isInProgress?"":Object(i.h)("span",{class:"text-success"},"FINISH")):Object(i.h)(t,null,h.isInProgress?"":Object(i.h)(t,null,j?Object(i.h)("span",{class:"text-danger"},"resting"):Object(i.h)("span",{class:"text-muted"},"NYS")))),Object(i.h)("div",{class:"col-3 p-0 text-center align-bottom"},Object(i.h)("h5",null,n.dogs&&n.dogs?c.a.format(n.dogs.length,0):"-"," ",Object(i.h)("i",{class:"fas fa-dog text-muted ml-2"})))))),Object(i.h)("div",{class:"row bg-secondary text-white",style:"font-size: 0.8em;"},Object(i.h)("div",{class:"col-6 text-left",style:"font-size: 0.8em;"},w&&Object(i.h)(t,null,"Updated: ",c.a.formatDistance(v,new Date)," ago")),Object(i.h)("div",{class:"col-6 text-right"},Object(i.h)("span",{class:"float-right",onClick:this.toggleFocusOnMusher,"data-musherid":n.id},r.indexOf(n.id)>-1?Object(i.h)("i",{class:"fas fa-star text-warning"}):Object(i.h)("i",{class:"far fa-star"})),Object(i.h)("span",{class:"float-right mr-2",onClick:this.toggleInfoOnMusher,"data-musherid":n.id},l.indexOf(n.id)>-1?Object(i.h)("i",{class:"fas fa-info-circle text-warning"}):Object(i.h)("i",{class:"fas fa-info-circle"})),w&&h.currentLocation.battery.level>0&&Object(i.h)(t,null,Object(i.h)("span",{class:"float-right mr-2"},Object(i.h)("i",{class:"fas fa-battery-three-quarters text-muted ml-2 mr-1"}),c.a.format(100*h.currentLocation.battery.level,0),"%")))))}})||o;e.a=h}).call(this,s("hosL").Fragment)},"3kDq":function(t,e,s){"use strict";(function(t){function n(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,n)}return s}function a(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}var o,i=s("hosL"),c=s("QRet"),r=s("Utv1"),l=s("/eY4"),h=s("OhSV");const d={};let b=Object(l.a)(o=class extends i.Component{constructor(t){super(t),this.state=function(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?n(Object(s),!0).forEach((function(e){a(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):n(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}({},d)}render(){const{raceStore:e,appState:s}=this.props.stores,{title:n}=this.props,{language:a="en"}=s,{race:o}=e,l=new Date;let d="";return l>=new Date(o.startDate)&&l<=new Date(o.endDate)?d="race":l>=new Date(o.signupStartDate)&&l<=new Date(o.signupEndDate)?d="signup":l>new Date(o.endDate)&&(d="done"),Object(i.h)(t,null,Object(i.h)("div",{class:"d-flex"},Object(i.h)("div",{class:"flex-fill"},function(t,e=""){return Object(c.d)(()=>{document.title="Homerun Race: "+t},[t]),Object(i.h)("h1",{class:e},t)}(n,"mb-0")),Object(i.h)("div",{class:"flex-fill text-center d-none d-md-block"},Object(i.h)("h1",{class:"mb-0",style:"line-height: 0.8em;"},Object(i.h)("span",{class:"font-weight-lighter",style:"letter-spacing: -1px;"},o.title)),Object(i.h)("small",{class:""},o.startDate&&Object(i.h)(t,null,r.a.formatDate(o.startDate,{locale:a,hour12:!1,hour:"2-digit",minute:"2-digit"})),o.endDate&&Object(i.h)(t,null," - ",r.a.formatDate(o.endDate,{locale:a,hour12:!1,hour:"2-digit",minute:"2-digit"})))),Object(i.h)("div",{class:"flex-fill"},Object(i.h)("h3",{class:"float-right"},"signup"===d&&!o.liveRace&&Object(i.h)(t,null,Object(i.h)("div",{class:"spinner-grow text-primary",role:"status"}),Object(i.h)("span",{class:"badge badge-primary ml-2"},Object(i.h)(h.c,{id:"races.signup-open"},"Påmelding åpen"))),"race"===d&&Object(i.h)(t,null,Object(i.h)("div",{class:"spinner-grow text-danger",role:"status"}),Object(i.h)("span",{class:"badge badge-danger ml-2"},Object(i.h)(h.c,{id:"races.race-in-progress"},"Løp pågår"))),"done"===d&&Object(i.h)(t,null,Object(i.h)("i",{class:"fas fa-check text-success"}),Object(i.h)("span",{class:"badge badge-success ml-2"},Object(i.h)(h.c,{id:"races.race-finished"},"Løp avsluttet")))))),Object(i.h)("div",{class:"d-block d-md-none"},Object(i.h)("h4",{class:"mb-0",style:"line-height: 0.8em;"},Object(i.h)("span",{class:"font-weight-light",style:"letter-spacing: -1px;"},o.title)),Object(i.h)("small",null,o.startDate&&Object(i.h)(t,null,r.a.formatDate(o.startDate,{locale:a,hour12:!1,hour:"2-digit",minute:"2-digit"})),o.endDate&&Object(i.h)(t,null," - ",r.a.formatDate(o.endDate,{locale:a,hour12:!1,hour:"2-digit",minute:"2-digit"})))))}})||o;e.a=b}).call(this,s("hosL").Fragment)},"5l0g":function(t,e,s){"use strict";(function(t){function n(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,n)}return s}function a(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}var o,i=s("hosL"),c=(s("Utv1"),s("/eY4")),r=(s("OhSV"),s("cneo"),s("HqZR"));s("ZOvn");const l={showAddComment:!1};let h=Object(c.a)(o=class extends i.Component{constructor(t){super(t),this.state=function(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?n(Object(s),!0).forEach((function(e){a(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):n(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}({},l),this.updateTimer={},this.inputRef={}}async loadHeatmap(){this.setState({isLoading:!0});const{adminStore:t}=this.props.stores,{raceid:e}=this.props;await t.getPublicHeatmap(e),this.setState({isLoading:!1})}componentDidMount(){this.loadHeatmap()}render(){const{adminStore:e}=this.props.stores,{waypoints:s,zoomToMarkers:n,mapid:a,fullscreenMap:o}=this.props,{publicHeatmap:c}=e;return Object(i.h)(t,null,Object(i.h)(r.a,{stores:this.props.stores,mapId:c.length,heatmap:c,minZoom:2,maxZoom:18,height:600,waypoints:s,zoomToMarkers:n,fullscreenMap:o,key:"map-"+a}))}})||o;e.a=h}).call(this,s("hosL").Fragment)},"68RK":function(t,e,s){"use strict";var n=s("ivZ3"),a=s("Utv1"),o=s("ZOvn");const i={adit:new n.Icon({iconUrl:"./assets/svg/adit.svg",iconSize:[30,30],iconAnchor:[10,30]}),airport:new n.Icon({iconUrl:"./assets/svg/airport.svg",iconSize:[30,30],iconAnchor:[10,30]}),analyse:new n.Icon({iconUrl:"./assets/svg/analyse.svg",iconSize:[30,30],iconAnchor:[10,30]}),archaeological:new n.Icon({iconUrl:"./assets/svg/archaeological.svg",iconSize:[30,30],iconAnchor:[10,30]}),architecture:new n.Icon({iconUrl:"./assets/svg/architecture.svg",iconSize:[30,30],iconAnchor:[10,30]}),arrow_up:new n.Icon({iconUrl:"./assets/svg/arrow_up.svg",iconSize:[30,30],iconAnchor:[10,30]}),arrow_up_double:new n.Icon({iconUrl:"./assets/svg/arrow_up_double.svg",iconSize:[30,30],iconAnchor:[10,30]}),atm:new n.Icon({iconUrl:"./assets/svg/atm.svg",iconSize:[30,30],iconAnchor:[10,30]}),avatar:new n.Icon({iconUrl:"./assets/svg/avatar.svg",iconSize:[30,30],iconAnchor:[10,30]}),bag:new n.Icon({iconUrl:"./assets/svg/bag.svg",iconSize:[30,30],iconAnchor:[10,30]}),bar:new n.Icon({iconUrl:"./assets/svg/bar.svg",iconSize:[30,30],iconAnchor:[10,30]}),barracks:new n.Icon({iconUrl:"./assets/svg/barracks.svg",iconSize:[30,30],iconAnchor:[10,30]}),battlefield:new n.Icon({iconUrl:"./assets/svg/battlefield.svg",iconSize:[30,30],iconAnchor:[10,30]}),beach:new n.Icon({iconUrl:"./assets/svg/beach.svg",iconSize:[30,30],iconAnchor:[10,30]}),bicycle:new n.Icon({iconUrl:"./assets/svg/bicycle.svg",iconSize:[30,30],iconAnchor:[10,30]}),boundary_stone:new n.Icon({iconUrl:"./assets/svg/boundary_stone.svg",iconSize:[30,30],iconAnchor:[10,30]}),buddhism:new n.Icon({iconUrl:"./assets/svg/buddhism.svg",iconSize:[30,30],iconAnchor:[10,30]}),building:new n.Icon({iconUrl:"./assets/svg/building.svg",iconSize:[30,30],iconAnchor:[10,30]}),burger:new n.Icon({iconUrl:"./assets/svg/burger.svg",iconSize:[30,30],iconAnchor:[10,30]}),bus:new n.Icon({iconUrl:"./assets/svg/bus.svg",iconSize:[30,30],iconAnchor:[10,30]}),bus_stop:new n.Icon({iconUrl:"./assets/svg/bus_stop.svg",iconSize:[30,30],iconAnchor:[10,30]}),cable_car:new n.Icon({iconUrl:"./assets/svg/cable_car.svg",iconSize:[30,30],iconAnchor:[10,30]}),camera:new n.Icon({iconUrl:"./assets/svg/camera.svg",iconSize:[30,30],iconAnchor:[10,30]}),camp_site:new n.Icon({iconUrl:"./assets/svg/camp_site.svg",iconSize:[30,30],iconAnchor:[10,30]}),car:new n.Icon({iconUrl:"./assets/svg/car.svg",iconSize:[30,30],iconAnchor:[10,30]}),caravan_site:new n.Icon({iconUrl:"./assets/svg/caravan_site.svg",iconSize:[30,30],iconAnchor:[10,30]}),cartography:new n.Icon({iconUrl:"./assets/svg/cartography.svg",iconSize:[30,30],iconAnchor:[10,30]}),cash:new n.Icon({iconUrl:"./assets/svg/cash.svg",iconSize:[30,30],iconAnchor:[10,30]}),castle:new n.Icon({iconUrl:"./assets/svg/castle.svg",iconSize:[30,30],iconAnchor:[10,30]}),castle_defensive:new n.Icon({iconUrl:"./assets/svg/castle_defensive.svg",iconSize:[30,30],iconAnchor:[10,30]}),cave_entrance:new n.Icon({iconUrl:"./assets/svg/cave_entrance.svg",iconSize:[30,30],iconAnchor:[10,30]}),cemetery:new n.Icon({iconUrl:"./assets/svg/cemetery.svg",iconSize:[30,30],iconAnchor:[10,30]}),chapel:new n.Icon({iconUrl:"./assets/svg/chapel.svg",iconSize:[30,30],iconAnchor:[10,30]}),christianism:new n.Icon({iconUrl:"./assets/svg/christianism.svg",iconSize:[30,30],iconAnchor:[10,30]}),cinema:new n.Icon({iconUrl:"./assets/svg/cinema.svg",iconSize:[30,30],iconAnchor:[10,30]}),cinema_alt:new n.Icon({iconUrl:"./assets/svg/cinema_alt.svg",iconSize:[30,30],iconAnchor:[10,30]}),city:new n.Icon({iconUrl:"./assets/svg/city.svg",iconSize:[30,30],iconAnchor:[10,30]}),cityhall:new n.Icon({iconUrl:"./assets/svg/cityhall.svg",iconSize:[30,30],iconAnchor:[10,30]}),clean:new n.Icon({iconUrl:"./assets/svg/clean.svg",iconSize:[30,30],iconAnchor:[10,30]}),compass:new n.Icon({iconUrl:"./assets/svg/compass.svg",iconSize:[30,30],iconAnchor:[10,30]}),compass_alt:new n.Icon({iconUrl:"./assets/svg/compass_alt.svg",iconSize:[30,30],iconAnchor:[10,30]}),construction:new n.Icon({iconUrl:"./assets/svg/construction.svg",iconSize:[30,30],iconAnchor:[10,30]}),contour:new n.Icon({iconUrl:"./assets/svg/contour.svg",iconSize:[30,30],iconAnchor:[10,30]}),court_house:new n.Icon({iconUrl:"./assets/svg/court_house.svg",iconSize:[30,30],iconAnchor:[10,30]}),crown:new n.Icon({iconUrl:"./assets/svg/crown.svg",iconSize:[30,30],iconAnchor:[10,30]}),crucifix:new n.Icon({iconUrl:"./assets/svg/crucifix.svg",iconSize:[30,30],iconAnchor:[10,30]}),data:new n.Icon({iconUrl:"./assets/svg/data.svg",iconSize:[30,30],iconAnchor:[10,30]}),database:new n.Icon({iconUrl:"./assets/svg/database.svg",iconSize:[30,30],iconAnchor:[10,30]}),dentist:new n.Icon({iconUrl:"./assets/svg/dentist.svg",iconSize:[30,30],iconAnchor:[10,30]}),disabled:new n.Icon({iconUrl:"./assets/svg/disabled.svg",iconSize:[30,30],iconAnchor:[10,30]}),dislike:new n.Icon({iconUrl:"./assets/svg/dislike.svg",iconSize:[30,30],iconAnchor:[10,30]}),download:new n.Icon({iconUrl:"./assets/svg/download.svg",iconSize:[30,30],iconAnchor:[10,30]}),drag_lift:new n.Icon({iconUrl:"./assets/svg/drag_lift.svg",iconSize:[30,30],iconAnchor:[10,30]}),drop:new n.Icon({iconUrl:"./assets/svg/drop.svg",iconSize:[30,30],iconAnchor:[10,30]}),eye:new n.Icon({iconUrl:"./assets/svg/eye.svg",iconSize:[30,30],iconAnchor:[10,30]}),facebook:new n.Icon({iconUrl:"./assets/svg/facebook.svg",iconSize:[30,30],iconAnchor:[10,30]}),fire:new n.Icon({iconUrl:"./assets/svg/fire.svg",iconSize:[30,30],iconAnchor:[10,30]}),fishing:new n.Icon({iconUrl:"./assets/svg/fishing.svg",iconSize:[30,30],iconAnchor:[10,30]}),flag:new n.Icon({iconUrl:"./assets/svg/flag.svg",iconSize:[30,30],iconAnchor:[10,30]}),forbidden:new n.Icon({iconUrl:"./assets/svg/forbidden.svg",iconSize:[30,30],iconAnchor:[10,30]}),fort:new n.Icon({iconUrl:"./assets/svg/fort.svg",iconSize:[30,30],iconAnchor:[10,30]}),fountain:new n.Icon({iconUrl:"./assets/svg/fountain.svg",iconSize:[30,30],iconAnchor:[10,30]}),fuel:new n.Icon({iconUrl:"./assets/svg/fuel.svg",iconSize:[30,30],iconAnchor:[10,30]}),fuel_alt:new n.Icon({iconUrl:"./assets/svg/fuel_alt.svg",iconSize:[30,30],iconAnchor:[10,30]}),gallery:new n.Icon({iconUrl:"./assets/svg/gallery.svg",iconSize:[30,30],iconAnchor:[10,30]}),gear:new n.Icon({iconUrl:"./assets/svg/gear.svg",iconSize:[30,30],iconAnchor:[10,30]}),github:new n.Icon({iconUrl:"./assets/svg/github.svg",iconSize:[30,30],iconAnchor:[10,30]}),go:new n.Icon({iconUrl:"./assets/svg/go.svg",iconSize:[30,30],iconAnchor:[10,30]}),golf:new n.Icon({iconUrl:"./assets/svg/golf.svg",iconSize:[30,30],iconAnchor:[10,30]}),heart:new n.Icon({iconUrl:"./assets/svg/heart.svg",iconSize:[30,30],iconAnchor:[10,30]}),helicopter:new n.Icon({iconUrl:"./assets/svg/helicopter.svg",iconSize:[30,30],iconAnchor:[10,30]}),home:new n.Icon({iconUrl:"./assets/svg/home.svg",iconSize:[30,30],iconAnchor:[10,30]}),hospital:new n.Icon({iconUrl:"./assets/svg/hospital.svg",iconSize:[30,30],iconAnchor:[10,30]}),hostel:new n.Icon({iconUrl:"./assets/svg/hostel.svg",iconSize:[30,30],iconAnchor:[10,30]}),hotel:new n.Icon({iconUrl:"./assets/svg/hotel.svg",iconSize:[30,30],iconAnchor:[10,30]}),hotel_alt:new n.Icon({iconUrl:"./assets/svg/hotel_alt.svg",iconSize:[30,30],iconAnchor:[10,30]}),ice_ring:new n.Icon({iconUrl:"./assets/svg/ice_ring.svg",iconSize:[30,30],iconAnchor:[10,30]}),information:new n.Icon({iconUrl:"./assets/svg/information.svg",iconSize:[30,30],iconAnchor:[10,30]}),internet:new n.Icon({iconUrl:"./assets/svg/internet.svg",iconSize:[30,30],iconAnchor:[10,30]}),invisible:new n.Icon({iconUrl:"./assets/svg/invisible.svg",iconSize:[30,30],iconAnchor:[10,30]}),islamism:new n.Icon({iconUrl:"./assets/svg/islamism.svg",iconSize:[30,30],iconAnchor:[10,30]}),island:new n.Icon({iconUrl:"./assets/svg/island.svg",iconSize:[30,30],iconAnchor:[10,30]}),judaism:new n.Icon({iconUrl:"./assets/svg/judaism.svg",iconSize:[30,30],iconAnchor:[10,30]}),laptop:new n.Icon({iconUrl:"./assets/svg/laptop.svg",iconSize:[30,30],iconAnchor:[10,30]}),library:new n.Icon({iconUrl:"./assets/svg/library.svg",iconSize:[30,30],iconAnchor:[10,30]}),lighthouse:new n.Icon({iconUrl:"./assets/svg/lighthouse.svg",iconSize:[30,30],iconAnchor:[10,30]}),like:new n.Icon({iconUrl:"./assets/svg/like.svg",iconSize:[30,30],iconAnchor:[10,30]}),linkedin:new n.Icon({iconUrl:"./assets/svg/linkedin.svg",iconSize:[30,30],iconAnchor:[10,30]}),lion:new n.Icon({iconUrl:"./assets/svg/lion.svg",iconSize:[30,30],iconAnchor:[10,30]}),lock:new n.Icon({iconUrl:"./assets/svg/lock.svg",iconSize:[30,30],iconAnchor:[10,30]}),magnifier:new n.Icon({iconUrl:"./assets/svg/magnifier.svg",iconSize:[30,30],iconAnchor:[10,30]}),mall:new n.Icon({iconUrl:"./assets/svg/mall.svg",iconSize:[30,30],iconAnchor:[10,30]}),map:new n.Icon({iconUrl:"./assets/svg/map.svg",iconSize:[30,30],iconAnchor:[10,30]}),mapkey:new n.Icon({iconUrl:"./assets/svg/mapkey.svg",iconSize:[30,30],iconAnchor:[10,30]}),mapshakers:new n.Icon({iconUrl:"./assets/svg/mapshakers.svg",iconSize:[30,30],iconAnchor:[10,30]}),marina:new n.Icon({iconUrl:"./assets/svg/marina.svg",iconSize:[30,30],iconAnchor:[10,30]}),marker:new n.Icon({iconUrl:"./assets/svg/marker.svg",iconSize:[30,30],iconAnchor:[10,30]}),market_place:new n.Icon({iconUrl:"./assets/svg/market_place.svg",iconSize:[30,30],iconAnchor:[10,30]}),mine:new n.Icon({iconUrl:"./assets/svg/mine.svg",iconSize:[30,30],iconAnchor:[10,30]}),monument:new n.Icon({iconUrl:"./assets/svg/monument.svg",iconSize:[30,30],iconAnchor:[10,30]}),mountain:new n.Icon({iconUrl:"./assets/svg/mountain.svg",iconSize:[30,30],iconAnchor:[10,30]}),museum:new n.Icon({iconUrl:"./assets/svg/museum.svg",iconSize:[30,30],iconAnchor:[10,30]}),music:new n.Icon({iconUrl:"./assets/svg/music.svg",iconSize:[30,30],iconAnchor:[10,30]}),nature:new n.Icon({iconUrl:"./assets/svg/nature.svg",iconSize:[30,30],iconAnchor:[10,30]}),nocamera:new n.Icon({iconUrl:"./assets/svg/nocamera.svg",iconSize:[30,30],iconAnchor:[10,30]}),nonsmoking:new n.Icon({iconUrl:"./assets/svg/nonsmoking.svg",iconSize:[30,30],iconAnchor:[10,30]}),north:new n.Icon({iconUrl:"./assets/svg/north.svg",iconSize:[30,30],iconAnchor:[10,30]}),north_alt:new n.Icon({iconUrl:"./assets/svg/north_alt.svg",iconSize:[30,30],iconAnchor:[10,30]}),north_alt_II:new n.Icon({iconUrl:"./assets/svg/north_alt_II.svg",iconSize:[30,30],iconAnchor:[10,30]}),north_alt_III:new n.Icon({iconUrl:"./assets/svg/north_alt_III.svg",iconSize:[30,30],iconAnchor:[10,30]}),oppositeway:new n.Icon({iconUrl:"./assets/svg/oppositeway.svg",iconSize:[30,30],iconAnchor:[10,30]}),parking:new n.Icon({iconUrl:"./assets/svg/parking.svg",iconSize:[30,30],iconAnchor:[10,30]}),pharmacy:new n.Icon({iconUrl:"./assets/svg/pharmacy.svg",iconSize:[30,30],iconAnchor:[10,30]}),picnic_site:new n.Icon({iconUrl:"./assets/svg/picnic_site.svg",iconSize:[30,30],iconAnchor:[10,30]}),pitch:new n.Icon({iconUrl:"./assets/svg/pitch.svg",iconSize:[30,30],iconAnchor:[10,30]}),playground:new n.Icon({iconUrl:"./assets/svg/playground.svg",iconSize:[30,30],iconAnchor:[10,30]}),playground_alt:new n.Icon({iconUrl:"./assets/svg/playground_alt.svg",iconSize:[30,30],iconAnchor:[10,30]}),police:new n.Icon({iconUrl:"./assets/svg/police.svg",iconSize:[30,30],iconAnchor:[10,30]}),post_office:new n.Icon({iconUrl:"./assets/svg/post_office.svg",iconSize:[30,30],iconAnchor:[10,30]}),pub:new n.Icon({iconUrl:"./assets/svg/pub.svg",iconSize:[30,30],iconAnchor:[10,30]}),restaurant:new n.Icon({iconUrl:"./assets/svg/restaurant.svg",iconSize:[30,30],iconAnchor:[10,30]}),rocks:new n.Icon({iconUrl:"./assets/svg/rocks.svg",iconSize:[30,30],iconAnchor:[10,30]}),ruins:new n.Icon({iconUrl:"./assets/svg/ruins.svg",iconSize:[30,30],iconAnchor:[10,30]}),saddle:new n.Icon({iconUrl:"./assets/svg/saddle.svg",iconSize:[30,30],iconAnchor:[10,30]}),sailboat:new n.Icon({iconUrl:"./assets/svg/sailboat.svg",iconSize:[30,30],iconAnchor:[10,30]}),school:new n.Icon({iconUrl:"./assets/svg/school.svg",iconSize:[30,30],iconAnchor:[10,30]}),seal:new n.Icon({iconUrl:"./assets/svg/seal.svg",iconSize:[30,30],iconAnchor:[10,30]}),shelter:new n.Icon({iconUrl:"./assets/svg/shelter.svg",iconSize:[30,30],iconAnchor:[10,30]}),sinkhole:new n.Icon({iconUrl:"./assets/svg/sinkhole.svg",iconSize:[30,30],iconAnchor:[10,30]}),skype:new n.Icon({iconUrl:"./assets/svg/skype.svg",iconSize:[30,30],iconAnchor:[10,30]}),smartphone:new n.Icon({iconUrl:"./assets/svg/smartphone.svg",iconSize:[30,30],iconAnchor:[10,30]}),smoking:new n.Icon({iconUrl:"./assets/svg/smoking.svg",iconSize:[30,30],iconAnchor:[10,30]}),sport_centre:new n.Icon({iconUrl:"./assets/svg/sport_centre.svg",iconSize:[30,30],iconAnchor:[10,30]}),spring:new n.Icon({iconUrl:"./assets/svg/spring.svg",iconSize:[30,30],iconAnchor:[10,30]}),square:new n.Icon({iconUrl:"./assets/svg/square.svg",iconSize:[30,30],iconAnchor:[10,30]}),stadium:new n.Icon({iconUrl:"./assets/svg/stadium.svg",iconSize:[30,30],iconAnchor:[10,30]}),star:new n.Icon({iconUrl:"./assets/svg/star.svg",iconSize:[30,30],iconAnchor:[10,30]}),stop:new n.Icon({iconUrl:"./assets/svg/stop.svg",iconSize:[30,30],iconAnchor:[10,30]}),stupa:new n.Icon({iconUrl:"./assets/svg/stupa.svg",iconSize:[30,30],iconAnchor:[10,30]}),supermarket:new n.Icon({iconUrl:"./assets/svg/supermarket.svg",iconSize:[30,30],iconAnchor:[10,30]}),swimming_pool:new n.Icon({iconUrl:"./assets/svg/swimming_pool.svg",iconSize:[30,30],iconAnchor:[10,30]}),telephone:new n.Icon({iconUrl:"./assets/svg/telephone.svg",iconSize:[30,30],iconAnchor:[10,30]}),theatre:new n.Icon({iconUrl:"./assets/svg/theatre.svg",iconSize:[30,30],iconAnchor:[10,30]}),ticket:new n.Icon({iconUrl:"./assets/svg/ticket.svg",iconSize:[30,30],iconAnchor:[10,30]}),toilet:new n.Icon({iconUrl:"./assets/svg/toilet.svg",iconSize:[30,30],iconAnchor:[10,30]}),tower:new n.Icon({iconUrl:"./assets/svg/tower.svg",iconSize:[30,30],iconAnchor:[10,30]}),town:new n.Icon({iconUrl:"./assets/svg/town.svg",iconSize:[30,30],iconAnchor:[10,30]}),traffic_signal:new n.Icon({iconUrl:"./assets/svg/traffic_signal.svg",iconSize:[30,30],iconAnchor:[10,30]}),train:new n.Icon({iconUrl:"./assets/svg/train.svg",iconSize:[30,30],iconAnchor:[10,30]}),tram:new n.Icon({iconUrl:"./assets/svg/tram.svg",iconSize:[30,30],iconAnchor:[10,30]}),tram_stop:new n.Icon({iconUrl:"./assets/svg/tram_stop.svg",iconSize:[30,30],iconAnchor:[10,30]}),tree_cinofer:new n.Icon({iconUrl:"./assets/svg/tree_cinofer.svg",iconSize:[30,30],iconAnchor:[10,30]}),tree_leaf:new n.Icon({iconUrl:"./assets/svg/tree_leaf.svg",iconSize:[30,30],iconAnchor:[10,30]}),triangle:new n.Icon({iconUrl:"./assets/svg/triangle.svg",iconSize:[30,30],iconAnchor:[10,30]}),underground:new n.Icon({iconUrl:"./assets/svg/underground.svg",iconSize:[30,30],iconAnchor:[10,30]}),unesco:new n.Icon({iconUrl:"./assets/svg/unesco.svg",iconSize:[30,30],iconAnchor:[10,30]}),university:new n.Icon({iconUrl:"./assets/svg/university.svg",iconSize:[30,30],iconAnchor:[10,30]}),upload:new n.Icon({iconUrl:"./assets/svg/upload.svg",iconSize:[30,30],iconAnchor:[10,30]}),viewpoint:new n.Icon({iconUrl:"./assets/svg/viewpoint.svg",iconSize:[30,30],iconAnchor:[10,30]}),viewtower:new n.Icon({iconUrl:"./assets/svg/viewtower.svg",iconSize:[30,30],iconAnchor:[10,30]}),village:new n.Icon({iconUrl:"./assets/svg/village.svg",iconSize:[30,30],iconAnchor:[10,30]}),vineyard:new n.Icon({iconUrl:"./assets/svg/vineyard.svg",iconSize:[30,30],iconAnchor:[10,30]}),volcano:new n.Icon({iconUrl:"./assets/svg/volcano.svg",iconSize:[30,30],iconAnchor:[10,30]}),water_tower:new n.Icon({iconUrl:"./assets/svg/water_tower.svg",iconSize:[30,30],iconAnchor:[10,30]}),water_well:new n.Icon({iconUrl:"./assets/svg/water_well.svg",iconSize:[30,30],iconAnchor:[10,30]}),watermill:new n.Icon({iconUrl:"./assets/svg/watermill.svg",iconSize:[30,30],iconAnchor:[10,30]}),waterpark:new n.Icon({iconUrl:"./assets/svg/waterpark.svg",iconSize:[30,30],iconAnchor:[10,30]}),waterwork:new n.Icon({iconUrl:"./assets/svg/waterwork.svg",iconSize:[30,30],iconAnchor:[10,30]}),wayside_cross:new n.Icon({iconUrl:"./assets/svg/wayside_cross.svg",iconSize:[30,30],iconAnchor:[10,30]}),wind_generator:new n.Icon({iconUrl:"./assets/svg/wind_generator.svg",iconSize:[30,30],iconAnchor:[10,30]}),windmill:new n.Icon({iconUrl:"./assets/svg/windmill.svg",iconSize:[30,30],iconAnchor:[10,30]}),zoo:new n.Icon({iconUrl:"./assets/svg/zoo.svg",iconSize:[30,30],iconAnchor:[10,30]})};e.a=class{static get(t){return i[t]}static list(){return Object.keys(i)}static getDiv({title:t,body:e,color:s,textColor:o="#333333",borderColor:i=0,iconWidth:c=150,iconHeight:r=70}){const l="img-"+a.a.randomPassword();a.a.hsl2Rgb(s,100,60),a.a.hsl2Rgb(100-i,100,50);return new n.DivIcon({iconSize:[c,r+30],iconAnchor:[15,r+30],className:"my-div-icon",html:`<div id='${l}' style='width: ${c}px; height: ${r+30}px; line-height: 1.1em;'>\n\t\t\t\t<style>\n\t\t\t\t\t#${l} .map-marker:after {\n\t\t\t\t\t\tborder-top-color: ${s};\n\t\t\t\t\t}\n\t\t\t\t</style>\n\t\t\t\t<div class='map-marker text-white p-1' style='color: ${o}; background-color: ${s}; height: ${r}px;'>\n\t\t\t\t\t<nobr><strong>${t}</strong></nobr><br />\n\t\t\t\t\t<span class='font-weight-light'><nobr>${e}</nobr></span>\n\t\t\t\t</div>\n\t\t\t</div>`})}static getRaceMarker({bib:t,speed:e="",bearing:s="",rank:i,flag:c="",image:r,title:l,color:h,textColor:d="#333333",borderColor:b=0,iconWidth:u=180,iconHeight:p=15,iconAnchorX:m=5,iconAnchorY:g=5,imageCirlceRadius:O=10,lineHeight:j="0.9em",fontSize:f="0.9em",paddingTop:v="3px",paddingBottom:w="3px",largeMarkers:y,mapChecked:x,titlePrefix:k=""}){const S="img-"+a.a.randomPassword(),I=(a.a.hsl2Rgb(h,100,60),a.a.hsl2Rgb(100-b,100,50),o.a.getRankingColor(i)),T=/dark/i.test(x);let z=r?`\n\t\t\t<div\n\t\t\t\tclass='rounded-circle imageRounded imageRoundedSmallIcon'\n\t\t\t\tstyle='background-image: url("${r}"); background-size: cover; border: 1px ${I} solid;'\n\t\t\t>\n\t\t\t\t&nbsp;\n\t\t\t</div>\n\t\t`:"";return z=t||i?`\n\t\t\t<div\n\t\t\t\tclass='px-0 text-center' style='background-color: ${I||""}'\n\t\t\t>\n\t\t\t\t${t||i}\n\t\t\t</div>\n\t\t`:z,new n.DivIcon({iconSize:[u,p],iconAnchor:[m,g],className:"my-div-icon",html:m>100?`\n\t\t\t\t<div class='d-flex flex-nowrap overflow-hidden justify-content-end' id='${S}' style='width: ${u}px; height: ${p}px; line-height: ${j}; font-size: ${f};'>\n\t\t\t\t\t<div\n\t\t\t\t\t\tclass='${T?"text-white":"text-dark"} pl-3 pr-1 rounded-pill-left rounded-none ${T?"bg-dark":"bg-white"} overflow-hidden'\n\t\t\t\t\t\tstyle='padding-top: ${v}; padding-bottom: ${w};'\n\t\t\t\t\t>\n\t\t\t\t\t\t<nobr>\n\t\t\t\t\t\t\t${k} <strong>${l}</strong> ${c}\n\t\t\t\t\t\t</nobr>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div\n\t\t\t\t\t\tclass='text-white font-weight-bolder ${y?"pr-3 pl-2":"pr-2 pl-1"} rounded-pill-right rounded-none'\n\t\t\t\t\t\tstyle='background-color: ${I||""}; padding-top: ${v}; padding-bottom: ${w};'\n\t\t\t\t\t>\n\t\t\t\t\t\t${z}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class='rounded rounded-circle ml-2 mt-1' style='width: ${O}px; height: ${O}px; background-color: ${I};'>\n\t\t\t\t\t\t&nbsp;\n\t\t\t\t\t</div>\n\t\t\t\t</div>\t\t\t\n\t\t\t`:`\n\t\t\t\t<div class='d-flex flex-nowrap overflow-hidden' id='${S}' style='width: ${u}px; height: ${p}px; line-height: ${j}; font-size: ${f};'>\n\t\t\t\t\t<div class='rounded rounded-circle mr-2 mt-1' style='width: ${O}px; height: ${O}px; background-color: ${I};'>\n\t\t\t\t\t\t&nbsp;\n\t\t\t\t\t</div>\n\t\t\t\t\t<div\n\t\t\t\t\t\tclass='text-white font-weight-bolder ${y?"pl-3 pr-2":"pl-2 pr-1"} rounded-pill-left rounded-none'\n\t\t\t\t\t\tstyle='background-color: ${I||""}; padding-top: ${v}; padding-bottom: ${w};'\n\t\t\t\t\t>\n\t\t\t\t\t\t${z}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div\n\t\t\t\t\t\tclass='${T?"text-white":"text-dark"} pr-3 pl-1 rounded-pill-right rounded-none ${T?"bg-dark":"bg-white"} overflow-hidden'\n\t\t\t\t\t\tstyle='padding-top: ${v}; padding-bottom: ${w};'\n\t\t\t\t\t>\n\t\t\t\t\t\t<nobr>\n\t\t\t\t\t\t\t${c} <strong>${l}</strong> ${k}\n\t\t\t\t\t\t</nobr>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t`})}static getDistanceMarker({title:t="",body:e="",textColor:s="#888",borderColor:o=0}){const i="img-"+a.a.randomPassword();return new n.DivIcon({iconSize:[20,20],iconAnchor:[10,10],className:"my-div-icon",html:`<div id='${i}' class='rounded-circle bg-primary text-white text-center' style='width: 20px; height: 20px;'>\n\t\t\t\t<strong>${t}</strong><br />\n\t\t\t\t<span class='font-weight-light'>${e}</span>\n\t\t\t</div>`})}static getMarker({bib:t,rank:e,flag:s="",image:i,title:c,color:r="#a0a0a0",textColor:l="#333333",borderColor:h=0,iconWidth:d=250,iconHeight:b=20,iconAnchorX:u=7,iconAnchorY:p=7,imageCirlceRadius:m=10,lineHeight:g="1.0em",fontSize:O="1.0em",paddingTop:j="3px",paddingBottom:f="3px",mapChecked:v}){const w="img-"+a.a.randomPassword(),y=(a.a.hsl2Rgb(r,100,60),a.a.hsl2Rgb(100-h,100,50),o.a.getRankingColor(t||e)||"#808080"),x=/dark/i.test(v);let k=i?`\n\t\t\t<div\n\t\t\t\tclass='rounded-circle imageRounded imageRoundedSmallIcon'\n\t\t\t\tstyle='background-image: url("${i}"); background-size: cover; border: 1px ${y} solid;'\n\t\t\t>\n\t\t\t\t&nbsp;\n\t\t\t</div>\n\t\t`:"";return k=t||e?`\n\t\t\t<div\n\t\t\t\tclass='rounded-pill-both px-1 text-center ${y?"":"bg-primary"}' style='background-color: ${y||""}'\n\t\t\t>\n\t\t\t\t${t||e}\n\t\t\t</div>\n\t\t`:k,new n.DivIcon({iconSize:[d,b],iconAnchor:[u,p],className:"my-div-icon",html:`\n\t\t\t\t<div class='d-flex flex-nowrap overflow-hidden' id='${w}' style='width: ${d}px; height: ${b}px; line-height: ${g}; font-size: ${O};'>\n\t\t\t\t\t<div class='rounded rounded-circle mr-2 mt-1' style='width: ${m}px; height: ${m}px; background-color: ${y};'>\n\t\t\t\t\t\t&nbsp;\n\t\t\t\t\t</div>\n\t\t\t\t\t<div\n\t\t\t\t\t\tclass='${x?"text-white":"text-dark"} px-3 pl-1 rounded-pill-both rounded-none bg-info overflow-hidden'\n\t\t\t\t\t\tstyle='padding-top: ${j}; padding-bottom: ${f};'\n\t\t\t\t\t>\n\t\t\t\t\t\t<nobr>${s} <strong>${c}</strong></nobr>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t`})}static getSmallMarker({title:t="",body:e="",textColor:s="#888",borderColor:o=0}){const i="img-"+a.a.randomPassword();return new n.DivIcon({iconSize:[6,6],iconAnchor:[3,3],className:"my-div-icon",html:`<div id='${i}' class='rounded-circle bg-success text-white text-center' style='width: 5px; height: 5px;'>\n\t\t\t\t<strong>${t}</strong><br />\n\t\t\t\t<span class='font-weight-light'>${e}</span>\n\t\t\t</div>`})}}},"8Lgr":function(t,e,s){"use strict";(function(t){function n(t){return i.a.format(t,t<5?2:1)}var a,o=s("hosL"),i=s("Utv1"),c=s("/eY4");s("OhSV"),s("ZOvn");let r=Object(c.a)(a=class extends o.Component{render(){const{value:e=0,smallUnit:s}=this.props,{userStore:a}=this.props.stores,{user:i}=a,{settings:c={}}=i;return c.imperial?Object(o.h)(t,null,Object(o.h)("nobr",null,n(function(t){return.621371*t}(e))," ",s?Object(o.h)(t,null,Object(o.h)("small",null,Object(o.h)("small",null,Object(o.h)("small",{class:"ml-0 text-muted"},"mi")))):Object(o.h)(t,null,"mi"))):Object(o.h)(t,null,Object(o.h)("nobr",null,n(e)," ",s?Object(o.h)(t,null,Object(o.h)("small",null,Object(o.h)("small",null,Object(o.h)("small",{class:"ml-0 text-muted"},"km")))):Object(o.h)(t,null,"km")))}})||a;e.a=r}).call(this,s("hosL").Fragment)},"8gML":function(t,e,s){"use strict";(function(t){function n(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,n)}return s}function a(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}var o,i=s("hosL"),c=s("Utv1"),r=s("/eY4"),l=s("OhSV"),h=(s("go65"),s("RMlE"),s("5l0g"),s("ZOvn"));h.a.marginTop(!0),h.a.marginBottom(),h.a.subMenuMarginTop();const d={isLoading:!1,email:"",submenu:"ads",jwtToken:c.a.getJwtToken()};let b=Object(r.a)(o=class extends i.Component{constructor(t){super(t),this.state=function(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?n(Object(s),!0).forEach((function(e){a(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):n(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}({},d)}render(){const{appState:e}=this.props.stores,{raceid:s,path:n}=this.props,{darkmode:a}=e;let o="default";return n.match(/\/race\/:raceid$/)?o="default":n.match(/\/race\/:raceid\/mushers$/)?o="mushers":n.match(/\/race\/:raceid\/results$/)?o="results":n.match(/\/race\/:raceid\/media$/)?o="media":n.match(/\/race\/:raceid\/tracking$/)&&(o="tracking"),Object(i.h)(t,null,Object(i.h)("div",{class:"row fixed-top pr-3",style:`margin-top: 40px; background-color: ${a?"#191d21":"#f8f9fa"};`},Object(i.h)("div",{class:"col-12 my-2 mx-2"},Object(i.h)("ul",{class:"nav nav-pills nav-fill flex-nowrap"},Object(i.h)("li",{class:"nav-item",style:"max-width: 20%;"},Object(i.h)("a",{href:"/race/"+s,class:"text-overflow nav-link "+("default"===o?"active":"")},Object(i.h)("nobr",null,Object(i.h)("i",{class:"fas fa-info-circle"})," ",Object(i.h)(l.c,{id:"race.therace"},"Løpet")))),Object(i.h)("li",{class:"nav-item",style:"max-width: 20%;"},Object(i.h)("a",{href:`/race/${s}/mushers`,class:"text-overflow nav-link "+("mushers"===o?"active":"")},Object(i.h)("nobr",null,Object(i.h)("i",{class:"fas fa-users"})," ",Object(i.h)(l.c,{id:"race.mushers"},"Deltakere")))),Object(i.h)("li",{class:"nav-item",style:"max-width: 20%;"},Object(i.h)("a",{href:`/race/${s}/results`,class:"text-overflow nav-link "+("results"===o?"active":"")},Object(i.h)("nobr",null,Object(i.h)("i",{class:"fas fa-poll"})," ",Object(i.h)(l.c,{id:"race.results"},"Resultater")))),Object(i.h)("li",{class:"nav-item",style:"max-width: 20%;"},Object(i.h)("a",{href:`/race/${s}/media`,class:"text-overflow nav-link "+("media"===o?"active":"")},Object(i.h)("nobr",null,Object(i.h)("i",{class:"fas fa-images"})," ",Object(i.h)(l.c,{id:"race.media"},"Bilder")))),Object(i.h)("li",{class:"nav-item",style:"max-width: 20%;"},Object(i.h)("a",{href:`/race/${s}/tracking`,class:"text-overflow nav-link "+("tracking"===o?"active":"")},Object(i.h)("nobr",null,Object(i.h)("i",{class:"fas fa-map-marked-alt"})," ",Object(i.h)(l.c,{id:"race.tracking"},"Tracking"))))))))}})||o;e.a=b}).call(this,s("hosL").Fragment)},"8n2v":function(t,e,s){"use strict";(function(t){function n(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,n)}return s}function a(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}var o,i=s("hosL"),c=(s("Utv1"),s("/eY4")),r=s("OhSV"),l=s("ZOvn");l.a.marginTop(!1),l.a.marginBottom();const h={};let d=Object(c.a)(o=class extends i.Component{constructor(t){super(t),this.state=function(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?n(Object(s),!0).forEach((function(e){a(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):n(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}({},h)}render(){const{goto:e,gotoTitle:s,routerName:n}=this.props;return Object(i.h)("div",{class:"row h-100"},Object(i.h)("div",{class:"col-12 text-center my-auto"},Object(i.h)("div",{class:"spinner-border text-primary",style:"width: 8rem; height: 8rem;",role:"status"},Object(i.h)("span",{class:"sr-only"},Object(i.h)(r.c,{id:"home.loading"},"Loading..."))),Object(i.h)("h3",{class:"mt-4"},Object(i.h)(r.c,{id:"home.loading"},"Loading...")),e&&Object(i.h)(t,null,Object(i.h)("a",{class:"my-4 btn btn-primary btn-lg btn-block",native:!0,href:e},s," ",Object(i.h)("i",{class:"fas fa-angle-double-right ml-2"})),Object(i.h)("small",{class:"text-muted"},n))))}})||o;e.a=d}).call(this,s("hosL").Fragment)},ABWa:function(t){t.exports={pointerCursor:"pointerCursor__2Gpay","marker-cluster-custom":"marker-cluster-custom__1z-5y"}},"HQo+":function(t,e,s){"use strict";(function(t){function n(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,n)}return s}function a(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}var o,i=s("hosL"),c=(s("Utv1"),s("/eY4")),r=(s("OhSV"),s("cneo"),s("HqZR"));s("ZOvn");const l={showAddComment:!1};let h=Object(c.a)(o=class extends i.Component{constructor(t){super(t),this.state=function(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?n(Object(s),!0).forEach((function(e){a(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):n(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}({},l),this.updateTimer={},this.inputRef={}}async loadTrack(t=this.props){const{showHeatmap:e,raceid:s,allTeamIds:n}=t,{adminStore:a,trackStore:o,raceStore:i,appState:c}=t.stores,{selectedClassIds:r=[]}=c;e&&await a.getPublicHeatmap(s,n);const l=i.getTrackIdsByClass(r[0]);l&&l.length>0&&(o.cleanupMemory(),await o.loadPublic({query:{idin:l}}))}componentDidMount(){this.loadTrack()}componentWillReceiveProps(t){this.props.selectedClassIds!==t.selectedClassIds&&this.loadTrack(t)}render(){const{trackStore:e,raceStore:s,appState:n,adminStore:a}=this.props.stores,{selectedClassIds:o=[]}=n,{waypoints:c,waypoints2:l,waypoints3:h,zoomToMarkers:d,fullscreenMap:b,onMarkerClick:u,onMarker2Click:p,onMarker3Click:m,showHeatmap:g,showTracks:O,showDistanceMarkers:j,groupWaypoints:f,focusOnMushers:v,geoJSONs:w,largeMarkers:y,isAnimatedMarkers:x,replaySpeed:k}=this.props,{tracks:S}=e,{publicHeatmap:I}=a,T=S[0];s.getTrackIdsByClass();return Object(i.h)(t,null,Object(i.h)(r.a,{stores:this.props.stores,heatmap:g?I:null,track:T,geojson:O&&T&&T.gpx?T.gpx.geoJSON:null,gpxInfo:O&&T&&(T.gpx||T.gpxInfo)?T.gpxInfo||T.gpx.gpxInfo:null,minZoom:2,maxZoom:18,height:600,waypoints:c,waypoints2:l,waypoints3:h,geoJSONs:w,zoomToMarkers:d,fullscreenMap:b,onMarkerClick:u,onMarker2Click:p,onMarker3Click:m,showTrackProfile:!1,distanceMarkerSteps:"long",showDistanceMarkers:j,groupWaypoints:f,focusOnMushers:v,showFullscreenControl:!1,largeMarkers:y,isAnimatedMarkers:x,replaySpeed:k}))}})||o;e.a=h}).call(this,s("hosL").Fragment)},HqZR:function(t,e,s){"use strict";(function(t){function n(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,n)}return s}function a(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?n(Object(s),!0).forEach((function(e){o(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):n(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}function o(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}function i(t){return.621371*t}var c,r=s("hosL"),l=s("Utv1"),h=s("/eY4"),d=s("cneo"),b=s("fh8t"),u=s.n(b),p=s("6FDT"),m=s.n(p),g=s("5QuX"),O=s.n(g),j=s("ABWa"),f=s.n(j),v=s("ZOvn"),w=s("g1rH"),y=s("LMBq"),x=s("ppmg"),k=s("PmTP"),S=s("svVU"),I=s("/PAx"),T=s("VsMb"),z=s("GdhX"),C=s("68RK"),D=(s("A1fj"),s("ivZ3")),A=s.n(D);const M={pedantic:!1,gfm:!0,breaks:!0,sanitize:!1,smartLists:!0,smartypants:!0,xhtml:!0},{BaseLayer:U,Overlay:P}=w.a;delete A.a.Icon.Default.prototype._getIconUrl,A.a.Icon.Default.mergeOptions({iconRetinaUrl:s("sqja"),iconUrl:s("Drvj"),shadowUrl:s("K5o1")});let L=Object(h.a)(c=class extends r.Component{constructor(t){super(t),this.mapRef=Object(r.createRef)(),this.polyRef=Object(r.createRef)(),this.handleViewportChanged=t=>{this.setState({mapCenter:t.center,mapZoom:t.zoom})},this.handleLocationFound=t=>{t.latlng&&this.setState({hasLocation:!0,latlng:t.latlng})},this.onEachFeature=(t,e)=>{const{gpxInfo:s={}}=this.props,n=`<Popup>\n\t\t\t<h5>Details</h5>\n\t\t\t<ul>\n\t\t\t\t<li>Total distance: ${l.a.format(s.totalDistance,2)} km</li>\n\t\t\t\t<li>Max speed: ${l.a.format(s.maxSpeed,1)} km/t</li>\n\t\t\t\t<li>Avg speed: ${l.a.format(s.avgSpeed,1)} km/t</li>\n\t\t\t\t<li>Ascent: ${l.a.format(s.ascent||s.calculatedAscend,0)} m</li>\n\t\t\t\t<li>Descent: ${l.a.format(s.decent||s.calculatedDescend,0)} m</li>\n\t\t\t\t<li>Duration: ${l.a.secToHms(s.duration)}</li>\n\t\t\t</ul>\n\t\t</Popup>`;e.bindPopup(n)},this.handleClick=t=>{const{appState:e}=this.props.stores;e.setLatlng(t.latlng)},this.zoomToGeoJSON=t=>{try{if(t.target){const e=this.mapRef;let s=t.target.getBounds();s&&s._northEast&&(this.setState({bounds:s}),e.fitBounds(s))}}catch(t){console.log(t)}},this.zoomToMarkers=(t=[],e=!1)=>{const{hasZoomedToMarkers:s}=this.state;try{if((e||!s)&&t.length&&t.length>0){const e=this.mapRef,s=A.a.latLngBounds([]);t.forEach(t=>{s.extend([t.lat,t.lng])}),e.fitBounds(s),this.setState({hasZoomedToMarkers:!0})}}catch(t){console.log(t)}},this.zoomToAllMarkers=()=>{const{waypoints:t=[]}=this.props;this.zoomToMarkers(t,!0)},this.zoomToFirst10Markers=()=>{const{waypoints:t=[]}=this.props,e=t.slice(0,10);this.zoomToMarkers(e,!0)},this.zoomToFirst3Markers=()=>{const{waypoints:t=[]}=this.props,e=t.slice(0,3);this.zoomToMarkers(e,!0)},this.zoomToFavoriteMarkers=()=>{const{zoomToMarkers:t=[],waypoints:e=[]}=this.props;this.zoomToMarkers(t.length>0?t:e,!0)},this.overlayAdd=t=>{const{name:e}=t,{visibleLayers:s}=this.state;s[e]=!0,this.setState({visibleLayers:s})},this.overlayRemove=t=>{const{name:e}=t,{visibleLayers:s}=this.state;s[e]=!1,this.setState({visibleLayers:s})},this.polylineOptions=()=>{const{gpxInfo:t}=this.props,{rangeSteps:e}=this.state;let{maxHslColor:s}=this.state;const{appState:n}=this.props.stores,{mapColorMode:a,mapRangeMin:o,mapRangeMax:i}=n;let c=o,r=i;"speed"===a&&t&&t.speeds&&t.speeds.length>0&&(c=Math.floor(Math.min(...t.speeds.map(t=>3.6*t))),r=Math.ceil(Math.max(...t.speeds.map(t=>3.6*t))));const h=l.a.range(c,r,e),d=h.map(t=>{const e=function(t,e,s,n,a){return n+(t-e)*(a-n)/(s-e)}(t,c,r,0,s);let n;n=s-e;const{r:a,g:o,b:i}=l.a.hsl2Rgb(n,100,45);return{color:`rgb(${a}, ${o}, ${i})`}});return n.setMapRange(h,c,r),n.setMapColors(d),d},this.polylineOptionIdxFn=t=>{const{appState:e}=this.props.stores,{mapRange:s}=e;for(let e=0;e<s.length;++e)if(t.meta<=s[e])return e;return s.length},this.polylinetrackPointFactory=t=>{const{gpxInfo:e}=this.props,{appState:s}=this.props.stores,{mapColorMode:n,mapRangeMin:a,mapRangeMax:o}=s;let i=[];"speed"===n&&e.speeds&&e.speeds.length>0?i=e.speeds.map(t=>3.6*t):e&&e.climbs&&(i=e.climbs);return t.filter(t=>t[0]&&t[1]&&t[2]).map((t,e)=>{const s=A.a.latLng(t[1],t[0],t[2]);return i&&i.length>0?(s.meta=i[e]||0,s.meta>o&&(s.meta=o),s.meta<a&&(s.meta=a)):s.meta=0,s})},this.showSpeed=()=>{const{appState:t}=this.props.stores;t.setMapColorMode("speed")},this.handleMarkerClick=(t={})=>{const{onMarkerClick:e=(({title:t,bib:e})=>console.log({title:t,bib:e}))}=this.props;try{e(a({},t))}catch(t){console.log(t)}},this.handleMarker2Click=(t={})=>{const{onMarker2Click:e=(t=>console.log(t))}=this.props;try{e(a({},t))}catch(t){console.log(t)}},this.handleMarker3Click=(t={})=>{const{onMarker3Click:e=(t=>console.log(t))}=this.props;try{e(a({},t))}catch(t){console.log(t)}},this.baseLayerChange=t=>{const{name:e}=t;console.log("baseLayerChange event",t),console.log({name:e});const{appState:s}=this.props.stores;s.setMapChecked(e)},this.whenReadyHandler=t=>{const{target:e}=t;e.on("baselayerchange",this.baseLayerChange)},this.setMapRef=t=>{this.mapRef=t},this.state={hasLocation:!1,visibleLayers:{Windspeed:!1},mapCenter:[],mapZoom:10,rangeSteps:1,maxHslColor:230,hasZoomedToMarkers:!1}}geoJSONStyle(){return{color:"#0347A2",weight:5,fillOpacity:.5,fillColor:"#0347A2"}}geoJSONStyleList(t){const e=v.a.getRankingColor(t+1);return{color:e,weight:3,fillOpacity:.5,fillColor:e}}componentWillReceiveProps(t){this.props.zoomToMarkers!==t.zoomToMarkers?this.zoomToMarkers(t.zoomToMarkers,!0):this.props.waypoints!==t.waypoints&&this.zoomToMarkers(t.waypoints)}componentWillUnmount(){}render(){const{userStore:e,appState:s}=this.props.stores,{mapChecked:n}=s,{user:o}=e,{settings:c={}}=o,{mapZoom:h,bounds:b=null}=this.state,{waypoints:p=[],waypoints2:g=[],waypoints3:j=[],geoJSONs:D=[],zoomToMarkers:L=[],geojson:R,gpxInfo:$,mapId:B=1,center:F=[61.0779066,9.800984],zoom:N=5,minZoom:H=4,maxZoom:_=18,darkmode:E,height:W=500,heatmap:Z=[],skipGeojson:Y=!1,zoomToWaypoints:V=!1,fullscreenMap:J=!1,showSearch:X=!0,showZoomControl:q=!0,showLayersControl:G=!0,showFullscreenControl:K=!0,showScaleControl:Q=!0,showRange:tt=!0,showTrackProfile:et=!0,distanceMarkerSteps:st="normal",showDistanceMarkers:nt=!0,groupWaypoints:at=!0,largeMarkers:ot,isAnimatedMarkers:it,replaySpeed:ct=1e3,layersControlPosition:rt="topright"}=this.props,{mapColorMode:lt,mapRange:ht,mapColors:dt,mapRangeMin:bt,mapRangeMax:ut}=s,pt=Object(d.i)(R),mt=l.a.asObject(pt,"features",0,"geometry","coordinates");let gt,Ot;const jt=[];if(mt&&mt[0]&&mt[0][0]&&(gt=mt[0][0]&&mt[0][0][0]?[mt[0][0][1],mt[0][0][0]]:[mt[0][1],mt[0][0]],Ot=mt[mt.length-1][0]&&mt[mt.length-1][0][0]?[mt[mt.length-1][0][1],mt[mt.length-1][0][0]]:[mt[mt.length-1][1],mt[mt.length-1][0]],$&&$.distances)){let t=0,e=0,s=10;switch(h){case 15:s="long"===st?3:1;break;case 14:s="long"===st?5:2;break;case 13:s="long"===st?7:3;break;case 12:s="long"===st?10:5;break;case 11:case 10:s="long"===st?15:10;break;case 9:s="long"===st?20:15;break;case 8:s="long"===st?30:20;break;case 7:s="long"===st?40:30;break;case 6:s="long"===st?70:50;break;case 5:s="long"===st?150:100;break;default:s="long"===st?200:150}$.distances.forEach((n,a)=>{t+=c.imperial?i(n):n,e+=c.imperial?i(n):n,e>=s&&(e=0,mt[a]&&Array.isArray(mt[a])&&jt.push({lat:mt[a][1],lng:mt[a][0],title:Math.floor(t),body:""}))})}const{isAdmin:ft}=e;return Object(r.h)(t,null,Object(r.h)("div",{class:f.a.home+" w-100 h-100 overflow-hidden position-relative",onTouchmove:v.a.captureAllEvents,onScroll:v.a.captureAllEvents},Object(r.h)(y.a,{bounds:b,whenCreated:this.setMapRef,onViewportChanged:this.handleViewportChanged,minZoom:H,maxZoom:_,center:F,onLocationfound:this.handleLocationFound,zoom:N,zoomControl:q,doubleClickZoom:!0,scrollWheelZoom:!0,dragging:J||!A.a.Browser.mobile,tap:!A.a.Browser.mobile,touchZoom:!!A.a.Browser.mobile&&"center",animate:!0,easeLinearity:.35,style:`width: 100%; min-height: ${W}px; height: 100%;`,className:"h-100",onOverlayadd:this.overlayAdd,onOverlayremove:this.overlayRemove,whenReady:this.whenReadyHandler},G&&Object(r.h)(w.a,{position:rt},Object(r.h)(U,{checked:"OpenStreetMap.Mapnik"===n,name:"OpenStreetMap.Mapnik"},Object(r.h)(x.a,{attribution:'&copy <a href="http://osm.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"})),Object(r.h)(U,{checked:"OpenStreetMap.Dark"===n,name:"OpenStreetMap.Dark"},Object(r.h)(x.a,{attribution:'© <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors, © Map tiles by Carto, under CC BY 3.0. Data by OpenStreetMap, under ODbL.',url:"https://cartodb-basemaps-{s}.global.ssl.fastly.net/dark_all/{z}/{x}/{y}.png"})),Object(r.h)(U,{checked:"Norway Kartverket topo4"===n,name:"Norway Kartverket topo4"},Object(r.h)(x.a,{subdomains:["opencache","opencache2","opencache3"],attribution:'&copy <a href="http://kartverket.no">Kartverket</a>',url:"https://{s}.statkart.no/gatekeeper/gk/gk.open_gmaps?layers=topo4&zoom={z}&x={x}&y={y}"})),Object(r.h)(U,{checked:"Norway Kartverket topo4graatone"===n,name:"Norway Kartverket topo4graatone"},Object(r.h)(x.a,{subdomains:["opencache","opencache2","opencache3"],attribution:'&copy <a href="http://kartverket.no">Kartverket</a>',url:"https://{s}.statkart.no/gatekeeper/gk/gk.open_gmaps?layers=topo4graatone&zoom={z}&x={x}&y={y}"})),Object(r.h)(U,{checked:"Google Satellite Text"===n,name:"Google Satellite Text"},Object(r.h)(x.a,{subdomains:["mt0","mt1","mt2","mt3"],attribution:'&copy <a href="http://google.com">Google</a>',url:"https://{s}.google.com/vt/lyrs=s,h&x={x}&y={y}&z={z}"})),Object(r.h)(P,{name:"Windspeed"},Object(r.h)(k.a,{url:"https://maps.openweathermap.org/maps/2.0/weather/WND/{z}/{x}/{y}?use_norm=false&opacity=0.25&palette=0:0073FF; 2:00AAFF; 3:4BD0D6; 6:8DE7C7; 12:B0F720; 25:F3363B; 50:C60000&arrow_step=64&appid=75cd92317c98db6873031cd2d8de75c5",attribution:"Open weather maps"})),Object(r.h)(P,{name:"Temperature"},Object(r.h)(k.a,{url:"https://maps.openweathermap.org/maps/2.0/weather/TA2/{z}/{x}/{y}?fill_bound=true&opacity=0.35&appid=75cd92317c98db6873031cd2d8de75c5",attribution:"Open weather maps"})),Object(r.h)(P,{name:"Snow depth"},Object(r.h)(k.a,{url:"https://maps.openweathermap.org/maps/2.0/weather/SD0/{z}/{x}/{y}?fill_bound=true&opacity=0.35&appid=75cd92317c98db6873031cd2d8de75c5",attribution:"Open weather maps"})),Object(r.h)(P,{name:"Precipitation"},Object(r.h)(k.a,{url:"https://maps.openweathermap.org/maps/2.0/weather/PA0/{z}/{x}/{y}?fill_bound=true&opacity=0.35&appid=75cd92317c98db6873031cd2d8de75c5",attribution:"Open weather maps"})),ft&&Object(r.h)(P,{name:"Atmospheric pressure"},Object(r.h)(k.a,{url:"https://maps.openweathermap.org/maps/2.0/weather/APM/{z}/{x}/{y}?fill_bound=true&opacity=0.35&appid=75cd92317c98db6873031cd2d8de75c5",attribution:"Open weather maps"}))),Q&&Object(r.h)(S.a,{metric:!0,imperial:!1}),et&&Object(r.h)(t,null,mt&&mt.length>0&&Object(r.h)(m.a,{ref:this.polyRef,positions:this.polylinetrackPointFactory(mt),optionIdxFn:this.polylineOptionIdxFn,options:this.polylineOptions(),weight:7,lineCap:"butt",opacity:.75,smoothFactor:1,zoomAnimation:!0,key:""+lt})),D&&D.length>0&&D.map((t,e)=>Object(r.h)(I.a,{data:t,style:()=>this.geoJSONStyleList(e)})),!Y&&R&&gt&&Object(r.h)(I.a,{data:R,style:this.geoJSONStyle,onEachFeature:this.onEachFeature,eventHandlers:{add:t=>this.zoomToGeoJSON(t)}}),gt&&Object(r.h)(T.a,{position:gt,icon:C.a.get("marker")},Object(r.h)(z.a,null,"Start position: ",l.a.format(gt[0],4),", ",l.a.format(gt[1],4))),Ot&&Object(r.h)(T.a,{position:Ot,icon:C.a.get("flag")},Object(r.h)(z.a,null,"End position: ",l.a.format(Ot[0],4),", ",l.a.format(Ot[1],4))),nt&&jt&&jt.length>0&&Object(r.h)(t,null,jt.length>0&&jt.map(t=>Object(r.h)(T.a,{position:[t.lat,t.lng],draggable:!1,icon:C.a.getDistanceMarker({title:t.title,body:t.body,color:t.color,textColor:"#333"})},Object(r.h)(z.a,{position:[t.lat,t.lng]},Object(r.h)("h5",null,t.title),Object(r.h)(u.a,{markdown:t.body,markdownOpts:M}))))),j.length>0&&j.reverse().map((t,e)=>Object(r.h)(T.a,{position:[t.lat,t.lng],draggable:!1,icon:C.a.getSmallMarker({icon:t.icon||"marker",bib:t.bib,flag:t.flag,title:t.title,body:t.body,color:t.color,textColor:t.textColor,mapChecked:n}),eventHandlers:{click:e=>this.handleMarker3Click(a(a({},t),{},{e:e}))},zIndexOffset:100+e})),g.length>0&&g.reverse().map((t,e)=>Object(r.h)(T.a,{position:[t.lat,t.lng],draggable:!1,icon:C.a.getMarker({icon:t.icon||"marker",bib:t.bib,flag:t.flag,title:t.title,body:t.body,color:t.color,textColor:t.textColor,iconWidth:ot?300:250,iconHeight:ot?30:20,iconAnchorX:ot?10:7,iconAnchorY:ot?10:7,imageCirlceRadius:ot?20:14,lineHeight:ot?"1.5em":"1.1em",fontSize:ot?"1.5em":"1.1em",paddingTop:ot?"2px":"3px",paddingBottom:ot?"2px":"3px",mapChecked:n}),eventHandlers:{click:e=>this.handleMarker2Click(a(a({},t),{},{e:e}))},zIndexOffset:200+e})),p.length>0&&p.reverse().map((e,s)=>Object(r.h)(t,null,it?Object(r.h)(t,null,Object(r.h)(O.a,{position:{lat:e.lat,lng:e.lng},duration:ct,draggable:!1,icon:C.a.getRaceMarker({icon:e.icon||"marker",bib:e.bib,speed:e.speed,bearing:e.bearing,rank:e.rank,email:e.email,image:e.image,flag:e.flag,title:e.title,body:e.body,color:e.color,textColor:e.textColor,iconWidth:ot?300:170,iconHeight:ot?30:15,iconAnchorX:ot?s%2==0?10:290:s%2==0?7:163,iconAnchorY:ot?10:5,imageCirlceRadius:ot?20:10,lineHeight:ot?"1.5em":"0.9em",fontSize:ot?"1.5em":"0.9em",paddingTop:ot?"1px":"3px",paddingBottom:ot?"2px":"3px",titlePrefix:"rest"===e.currentState?"💤":"",mapChecked:n,largeMarkers:ot}),eventHandlers:{click:t=>this.handleMarkerClick(a(a({},e),{},{e:t}))},zIndexOffset:300+s})):Object(r.h)(t,null,Object(r.h)(T.a,{position:[e.lat,e.lng],draggable:!1,icon:C.a.getRaceMarker({icon:e.icon||"marker",bib:e.bib,speed:e.speed,bearing:e.bearing,rank:e.rank,email:e.email,image:e.image,flag:e.flag,title:e.title,body:e.body,color:e.color,textColor:e.textColor,iconWidth:ot?300:170,iconHeight:ot?30:15,iconAnchorX:ot?s%2==0?10:290:s%2==0?7:163,iconAnchorY:ot?10:5,imageCirlceRadius:ot?20:10,lineHeight:ot?"1.5em":"0.9em",fontSize:ot?"1.5em":"0.9em",paddingTop:ot?"1px":"3px",paddingBottom:ot?"2px":"3px",titlePrefix:"rest"===e.currentState?"💤":"",mapChecked:n,largeMarkers:ot}),eventHandlers:{click:t=>this.handleMarkerClick(a(a({},e),{},{e:t}))},zIndexOffset:300+s}))))),p.length>0&&Object(r.h)("div",{class:"position-absolute",style:"bottom: 65px; right: 5px; z-index: 999999;"},Object(r.h)("button",{type:"button",class:"btn btn-sm btn-info text-overflow",style:"width: 60px",onClick:this.zoomToAllMarkers},Object(r.h)("nobr",null,Object(r.h)("i",{class:"fas fa-crosshairs"})))),p.length>=3&&Object(r.h)("div",{class:"position-absolute",style:"bottom: 105px; right: 5px; z-index: 999999;"},Object(r.h)("button",{type:"button",class:"btn btn-sm btn-info text-overflow",style:"width: 60px",onClick:this.zoomToFirst3Markers},Object(r.h)("nobr",null,Object(r.h)("i",{class:"fas fa-crosshairs"})," 3"))),p.length>=10&&Object(r.h)("div",{class:"position-absolute",style:"bottom: 145px; right: 5px; z-index: 999999;"},Object(r.h)("button",{type:"button",class:"btn btn-sm btn-info text-overflow",style:"width: 60px",onClick:this.zoomToFirst10Markers},Object(r.h)("nobr",null,Object(r.h)("i",{class:"fas fa-crosshairs"})," 10")))),tt&&ht&&ht.length>0&&Object(r.h)(t,null,Object(r.h)("div",{class:"mb-4"},Object(r.h)("div",{class:"float-right mt-1"},Object(r.h)("div",{class:"px-1 py-0 float-left",style:"line-height: 0.8em;"},Object(r.h)("small",null,Object(r.h)("small",null,l.a.format(bt,0),Object(r.h)("span",{class:"text-muted"},"speed"===lt?"km/t":"%")))),ht&&ht.length>0&&ht.map((t,e)=>Object(r.h)("div",{class:"float-left"},Object(r.h)("div",{style:`background-color: ${dt[e].color}; height: 13px; width: 10px;`}))),Object(r.h)("div",{class:"px-1 py-0 float-left",style:"line-height: 0.8em;"},Object(r.h)("small",null,Object(r.h)("small",null,l.a.format(ut,0),Object(r.h)("span",{class:"text-muted"},"speed"===lt?"km/t":"%"))))))))}})||c;e.a=L}).call(this,s("hosL").Fragment)},LMwI:function(t){t.exports={pointerCursor:"pointerCursor__1W6mM"}},QkTp:function(t,e,s){"use strict";(function(t){var n,a=s("hosL"),o=s("Utv1"),i=s("/eY4");s("OhSV"),s("ZOvn");let c=Object(i.a)(n=class extends a.Component{render(){const{value:e=0}=this.props,{userStore:s}=this.props.stores,{user:n}=s,{settings:i={}}=n;return i.imperial?Object(a.h)(t,null,Object(a.h)("nobr",null,o.a.format(function(t){return 9*t/5+32}(e),0),"°F")):Object(a.h)(t,null,Object(a.h)("nobr",null,o.a.format(e,1),"°C"))}})||n;e.a=c}).call(this,s("hosL").Fragment)},RMlE:function(t,e,s){"use strict";function n(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,n)}return s}function a(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}var o,i=s("hosL"),c=s("ox/y"),r=(s("Utv1"),s("/eY4")),l=(s("go65"),s("Y3FI")),h=s("OhSV");s("LMwI");const d={menu:{profile:!1,main:!1},searchText:""};let b=Object(r.a)(o=class extends i.Component{constructor(t){var e;super(t),e=this,this.toggleDropdown=t=>{const{menu:e}=this.state;let s=t.target.dataset.name;!s&&t.target.parentNode&&(s=t.target.parentNode.dataset.name),s&&(e[s]=!e[s]),this.setState({menu:e})},this.toggleDarkmode=t=>{const{appState:e}=this.props.stores;e.toggleDarkmode(),this.toggleDropdown(t)},this.toggleViewmode=t=>{const{appState:e}=this.props.stores;let s=t.target.dataset.mode;!s&&t.target.parentNode&&(s=t.target.parentNode.dataset.mode),e.toggleViewmode(s),this.toggleDropdown(t)},this.reloadApp=()=>{window.location.reload(!0)},this.adminLoadAll=async function(){const{userStore:t}=e.props.stores;await t.getInfo(!0)},this.changeLanguage=t=>{const e=t.target.value;console.log("changeLanguage",e);const{appState:s,userStore:n}=this.props.stores,{user:a={}}=n;a.email&&n.setLanguage({email:a.email,language:e}),s.setLanguage(e)},this.search=()=>{const{searchText:t}=this.state;Object(l.route)("/search/"+t)},this.state=function(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?n(Object(s),!0).forEach((function(e){a(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):n(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}({},d)}render(){const{menu:t}=this.state,{appState:e,userStore:s}=this.props.stores,{darkmode:n}=e,{user:a,notifications:o=[]}=s,{language:r="en"}=(o.filter(t=>!t.read),a);return Object(i.h)("nav",{class:"navbar navbar-expand-lg navbar-themed fixed-top py-1",style:"z-index: 99999;"},Object(i.h)("a",{class:"navbar-brand",href:"/race/"},Object(i.h)("img",{src:`./assets/homerun-race-logo-2-${n?"white-":""}small.png`,height:"37",class:"position-absolute",style:"top: 5px; left: 6px"}),Object(i.h)("span",{class:"font-weight-normal",style:"margin-left: 30px; font-size: 20px;"},"Homerun Race")),Object(i.h)("button",{class:"navbar-toggler",type:"button","data-name":"main",onClick:this.toggleDropdown},Object(i.h)("span",{class:"navbar-toggler-icon"})),Object(i.h)("div",{class:"collapse navbar-collapse "+(t.main?"show":""),id:"navbarSupportedContent"},Object(i.h)("ul",{class:"navbar-nav mr-auto ml-5"},Object(i.h)("li",{class:"nav-item"},Object(i.h)(c.Link,{className:"nav-link",activeClassName:"active",href:"/race","data-name":"main",style:"font-size: 1.0em !important;",onClick:this.toggleDropdown},Object(i.h)("i",{class:"fas fa-flag-checkered"})," ",Object(i.h)(h.c,{id:"header.races"},"Løpene"))),Object(i.h)("li",{class:"nav-item"},Object(i.h)(c.Link,{className:"nav-link",activeClassName:"active",href:"/race/support","data-name":"main",style:"font-size: 1.0em !important;",onClick:this.toggleDropdown},Object(i.h)("i",{class:"far fa-question-circle"})," ",Object(i.h)(h.c,{id:"header.support"},"Support"))),Object(i.h)("li",{class:"nav-item"},Object(i.h)(c.Link,{className:"nav-link",activeClassName:"active",href:"/race/news","data-name":"main",style:"font-size: 1.0em !important;",onClick:this.toggleDropdown},Object(i.h)("i",{class:"fas fa-quote-right"})," ",Object(i.h)(h.c,{id:"header.news"},"Nyheter")))),Object(i.h)("ul",{class:"navbar-nav ml-auto "},Object(i.h)("li",{class:"nav-item mr-2"},Object(i.h)("div",{class:"form-row align-items-center"},Object(i.h)("div",{class:"col-auto my-1",style:"width: 80px;"},Object(i.h)("select",{class:"custom-select",style:"background-color: inherit; border: none; padding: 0; height: 1.1em; font-size: 0.9em;",onInput:this.changeLanguage},Object(i.h)("option",{value:"no",selected:"no"===r},"🇳🇴 NO"),Object(i.h)("option",{value:"en",selected:"en"===r},"🇬🇧 EN"),Object(i.h)("option",{value:"es",selected:"es"===r},"🇪🇸 ES"),Object(i.h)("option",{value:"de",selected:"de"===r},"🇩🇪 DE"),Object(i.h)("option",{value:"fr",selected:"fr"===r},"🇫🇷 FR"),Object(i.h)("option",{value:"ru",selected:"ru"===r},"🇷🇺 RU"),Object(i.h)("option",{value:"se",selected:"se"===r},"🇸🇪 SE"))))),Object(i.h)("li",{class:"nav-item d-block d-lg-none"},Object(i.h)(c.Link,{className:"nav-link",activeClassName:"active","data-name":"main",onClick:this.toggleDarkmode},Object(i.h)("i",{class:(n?"fas text-warning":"far")+" fa-moon"})," ",Object(i.h)(h.c,{id:"header.darkmode"},"Nattmodus"))),Object(i.h)("li",{class:"nav-item mr-2 d-none d-lg-block"},Object(i.h)("button",{class:"btn btn-link","data-name":"profile",onClick:this.toggleDarkmode},Object(i.h)("i",{class:(n?"fas text-warning":"far")+" fa-moon"}))))))}})||o;e.a=b},UwwE:function(t,e,s){"use strict";(function(t){var n,a=s("hosL"),o=s("Utv1"),i=s("/eY4");s("OhSV"),s("ZOvn");let c=Object(i.a)(n=class extends a.Component{render(){const{value:e=0}=this.props,{userStore:s}=this.props.stores,{user:n}=s,{settings:i={}}=n;return i.imperial?Object(a.h)(t,null,Object(a.h)("nobr",null,o.a.format(function(t){return 2.20462*t}(e),0)," lb")):Object(a.h)(t,null,Object(a.h)("nobr",null,o.a.format(e,0)," kg"))}})||n;e.a=c}).call(this,s("hosL").Fragment)},ZC4H:function(t,e,s){"use strict";s.r(e),function(t){function n(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,n)}return s}function a(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?n(Object(s),!0).forEach((function(e){o(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):n(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}function o(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}var i,c,r=s("hosL"),l=s("QRet"),h=s("Utv1"),d=s("/eY4"),b=s("OhSV"),u=s("fh8t"),p=s.n(u),m=(s("RMlE"),s("8gML"),s("5l0g")),g=(s("3kDq"),s("aGZh"),s("vme8")),O=s("/V/i"),j=s("wanP"),f=s("zYNi"),v=s("ZOvn");const w=v.a.marginTop(!0,!0),y=(v.a.marginBottom(),{pedantic:!1,gfm:!0,breaks:!0,sanitize:!1,smartLists:!0,smartypants:!0,xhtml:!0}),x={isLoading:!1,email:"",submenu:"ads",jwtToken:h.a.getJwtToken(),reloadInSec:null,reloadIsActive:!1,leaderboardMode:"mushers",filterByraceClass:"",showLeaderBoard:!0,showNews:!0};let k=Object(d.a)(i=class extends r.Component{constructor(t){super(t),this.initComponent=()=>{this.setState({reloadIsActive:!0},()=>this.tickReloadTimeer())},this.tickReloadTimeer=()=>{const{reloadLastEpoch:t}=this.props,{reloadIsActive:e}=this.state;if(e){const e=Math.floor((new Date).getTime()/1e3);this.setState({reloadInSec:60-(e-t)}),clearTimeout(this.updateTimer.tick),this.updateTimer.tick=setTimeout(()=>this.tickReloadTimeer(),1e3)}return!1},this.state=a({},x),this.updateTimer={}}componentDidMount(){this.initComponent()}componentWillUnmount(){clearTimeout(this.updateTimer.tick)}render(){const{reloadInSec:e}=this.state,{radius:s=13,fontSize:n=11,classNames:a=""}=this.props,o=Math.floor(h.a.normalizeBetween(e,0,60,0,100));return Object(r.h)(t,null,Object(r.h)("span",{class:a},Object(r.h)(j.a,{key:"gauge-reload-page",color:"primary",radius:s,showPercentText:!1,percent:o,showCenterText:!0,centerText:e,centerTextSize:n,centerTextY:"55%"})))}})||i,S=Object(d.a)(c=class extends r.Component{constructor(t){var e;super(t),e=this,this.loadLiveRaceResults=async function(t=e.props){const{raceStore:s}=t.stores,{race:n}=s;await s.getRaceTrackerData(n.raceTrackerRace),s.getRaceTrackerActiveTeams()},this.loadRaceResults=async function(t=e.props,s,n){const{raceStore:a}=t.stores,{raceid:o}=t;await a.loadWorkoutSummary(s,o),a.getWorkoutSummaryActiveTeams(n)},this.setLeaderboardMode=t=>{this.setState({leaderboardMode:t.target.parentElement.dataset.mode||t.target.dataset.mode})},this.chooseRaceClass=t=>{this.setState({filterByraceClass:t.target.value})},this.toggleShowLeaderBoard=t=>{const{showLeaderBoard:e}=this.state;this.setState(!0===t?{showLeaderBoard:!1}:{showLeaderBoard:!e})},this.toggleShowNews=t=>{const{showNews:e}=this.state;this.setState(!0===t?{showNews:!1}:{showNews:!e})},this.state=a(a({},x),{},{reloadLastEpoch:Math.floor((new Date).getTime()/1e3)}),this.updateTimer={}}async loadRace(t=this.props){var e=this;this.setState({isLoading:!0});const{raceStore:s,appState:n}=t.stores,{raceid:a}=t;await s.load(a);const{race:o}=s,{focusOnMushers:i=[]}=n,c=o.classes.filter(t=>t.contestants&&t.contestants.length>0).map(t=>t.contestants.filter(t=>t.team>0).map(t=>t.team)).flat();i.filter(t=>c.indexOf(t)>-1);this.setState({allTeamIds:c}),c.length>0&&(await s.loadTeams(c.join(",")),o.liveRace>0?await this.loadLiveRaceResults(t,i):await this.loadRaceResults(t,c.join(","),i)),s.getAllClassesSortedBy();1===o.liveRace||(clearTimeout(this.updateTimer.reload),this.updateTimer.reload=setTimeout((async function(){const t=Math.floor((new Date).getTime()/1e3);e.setState({reloadLastEpoch:t}),e.loadRace()}),6e4)),this.setState({isLoading:!1})}componentWillUnmount(){clearTimeout(this.updateTimer.reload),clearTimeout(this.updateTimer.tick)}componentDidMount(){this.loadRace();const{width:t}=function(){const{innerWidth:t,innerHeight:e}=window;return{width:t,height:e}}();t<800&&(this.toggleShowLeaderBoard(!0),this.toggleShowNews(!0))}componentWillReceiveProps(t){this.loadRace(t)}render(){const{appState:e,raceStore:s,userStore:n}=this.props.stores,{user:a={}}=n,{raceid:o}=this.props,{language:i="en",focusOnMushers:c=[],infoOnMushers:d=[]}=e,{leaderboardMode:u,filterByraceClass:j,showLeaderBoard:x,showNews:S,reloadLastEpoch:I,allTeamIds:T=[]}=this.state,z=c.filter(t=>T.indexOf(t)>-1),{activeTeams:C,teamList:D,waypoints:A,zoomToMarkers:M,race:U,classes:P}=s;return 1===U.liveRace?Object(r.h)("div",{class:"container-fluid position-relative p-0",style:`margin-top: 0; height: calc(100vh - ${w}); z-index: 9999;`},Object(r.h)(f.a,{stores:this.props.stores,raceid:o,linkBase:"/race/"})):Object(r.h)(t,null,Object(r.h)("div",{class:"container-fluid h-100 position-relative p-0"},Object(r.h)(m.a,{stores:this.props.stores,raceid:o,waypoints:A,zoomToMarkers:M,fullscreenMap:!0}),Object(r.h)("div",{class:"position-absolute",style:"top: 15px; left: 5px; z-index: 99999999;"},Object(r.h)("div",{class:"logo ml-3 clearfix text-white"},Object(r.h)("img",{src:"./assets/homerun-race-logo-2-small.png",height:"37",class:"float-left"}),Object(r.h)("a",{href:"/race/"+U.id},Object(r.h)("span",{class:"font-weight-bold text-dark",style:"font-size: 1.4em;"},"Homerun Race")))),!x&&Object(r.h)("div",{class:"position-absolute",style:"top: 55px; left: 5px; z-index: 99999999; width: 150px; height: 50px;"},Object(r.h)("button",{type:"button",class:"btn btn-sm btn-light",onClick:this.toggleShowLeaderBoard},Object(r.h)(k,{stores:this.props.stores,classNames:"float-right ml-2",reloadLastEpoch:I}),Object(r.h)("span",{class:"float-left"},"Leaderboard"))),!S&&Object(r.h)("div",{class:"position-absolute",style:"bottom: 40px; right: 5px; z-index: 99999999; width: 150px; height: 50px;"},Object(r.h)("button",{type:"button",class:"btn btn-sm btn-primary float-right",onClick:this.toggleShowNews},Object(r.h)("span",{class:"float-left"},"News"))),S&&U&&U.articles&&U.articles&&U.articles.length>0&&Object(r.h)("div",{class:"position-absolute",style:"bottom: 50px; right: 5px; z-index: 99999999; width: 350px; height: 40vh;"},Object(r.h)("div",{class:"container-fluid bg-light rounded-lg py-2 overflow-auto mt-2",style:"opacity: 0.9; height: 90%;"},Object(r.h)("div",{class:"row bg-light"},Object(r.h)("div",{class:"col-12 bg-primary text-white"},Object(r.h)("button",{type:"button",class:"btn btn-sm btn-danger float-right",onClick:this.toggleShowNews},"X"),"News"),Object(r.h)("div",{class:"col-12 bg-light"},U&&U.articles&&U.articles.reverse().map(t=>Object(r.h)("div",{class:"border-bottom mb-2 pb-2 clearfix"},Object(r.h)("small",{class:"text-muted float-right"},h.a.formatDate(t.date,{locale:i,hour12:!1,hour:"2-digit",minute:"2-digit"})),Object(r.h)("h5",null,v.a.replaceImages(t.title,t.images,i,!1)),t.image&&Object(r.h)("img",{src:t.image.s3LargeLink,class:"float-right rounded-lg ml-2",style:"height: 100px;"}),t.ingress&&Object(r.h)("strong",null,Object(r.h)(p.a,{markdown:v.a.replaceImages(t.ingress,t.images,i),markdownOpts:y})),t.body&&Object(r.h)("p",null,Object(r.h)(p.a,{markdown:v.a.replaceImages(t.body,t.images,i),markdownOpts:y})))))))),x&&Object(r.h)("div",{class:"position-absolute",style:"top: 55px; left: 5px; z-index: 99999999; width: 350px; height: 90vh;"},Object(r.h)("div",{class:"container-fluid bg-light rounded-lg py-2 overflow-auto mt-2",style:"opacity: 0.9; height: 90%;"},Object(r.h)("div",{class:"row bg-light"},Object(r.h)("div",{class:"col-12"},Object(r.h)("button",{type:"button",class:"btn btn-sm btn-link float-right",onClick:this.toggleShowLeaderBoard},"X"),Object(r.h)(k,{stores:this.props.stores,classNames:"float-right",radius:15,fontSize:13,reloadLastEpoch:I}),Object(r.h)("h5",{class:"mb-0"},"Leaderboard"),function(t,e="",s=""){return Object(l.d)(()=>{document.title="Homerun Race: "+t},[t]),Object(r.h)("span",{class:e,style:s},t)}(U.title,"font-weight-normal text-dark","font-size: 1.0em;"),Object(r.h)("select",{class:"form-control-plaintext","aria-describedby":"classHelp",onInput:this.chooseRaceClass},Object(r.h)("option",{value:""},"-- Choose class --"),U.classes&&U.classes.sort((t,e)=>t.distance-e.distance).map(e=>Object(r.h)(t,null,Object(r.h)("option",{value:e.id},e.title," (",e.totalMushers,")")))),Object(r.h)("ul",{class:"mt-2 nav nav-tabs nav-justified tracking-nav"},Object(r.h)("li",{class:"nav-item",style:"width: 33%;"},Object(r.h)("a",{class:"nav-link "+("mushers"===u?"active":""),onClick:this.setLeaderboardMode,"data-mode":"mushers"},Object(r.h)(b.c,{id:"races.mushers"},"Deltakere"))),Object(r.h)("li",{class:"nav-item",style:"width: 33%;"},Object(r.h)("a",{class:"nav-link "+("onTrail"===u?"active":""),onClick:this.setLeaderboardMode,"data-mode":"onTrail"},Object(r.h)(b.c,{id:"races.on-trail"},"På sporet nå"))),Object(r.h)("li",{class:"nav-item",style:"width: 33%;"},Object(r.h)("a",{class:"nav-link "+("favorites"===u?"active":""),onClick:this.setLeaderboardMode,"data-mode":"favorites"},Object(r.h)(b.c,{id:"races.favorites"},"Favoritter")))))),"mushers"===u&&Object(r.h)(t,null,U.classes&&U.classes.sort((t,e)=>t.distance-e.distance).filter(t=>!j||j===t.id).map(e=>Object(r.h)(t,null,Object(r.h)("div",{class:"row mt-2 bg-primary text-white"},Object(r.h)("div",{class:"col-12"},Object(r.h)("h5",{class:"m-0"},e.title))),P[e.id]&&P[e.id].contestants&&P[e.id].contestants.map((e,s)=>{const{currentTeam:n}=e;return Object(r.h)(t,null,Object(r.h)(O.a,{stores:this.props.stores,team:n,idx:s}))})))),"favorites"===u&&Object(r.h)(t,null,z&&z.length>0?z.map((t,e)=>{const n=s.getTeamById(t);return Object(r.h)(O.a,{stores:this.props.stores,team:n,idx:e})}):Object(r.h)(t,null,Object(r.h)("div",{class:"p-2 text-center"},Object(r.h)("h5",null,Object(r.h)(b.c,{id:"races.no-teams-signed-up"},"Ingen team påmeldt ennå..."))))),"onTrail"===u&&Object(r.h)(t,null,Object(r.h)("div",{class:"text-muted text-center bg-light"},Object(r.h)(b.c,{id:"races.mushers-on-trail"},"Mushers on trail"),": ",C.length),C&&C.length>0?C.filter(t=>{if(j){const e=s.getClassByTeamId(t.team);return j===e.id}return!0}).map((t,e)=>{const n=s.getTeamById(t.team);return Object(r.h)(O.a,{stores:this.props.stores,team:n,idx:e})}):Object(r.h)(t,null,Object(r.h)("div",{class:"p-2 text-center"},Object(r.h)("h5",null,Object(r.h)(b.c,{id:"races.no-team-on-trail"},"Ingen team tracker live i The Musher appen akkurat nå..."))))))),d&&d.length>0&&D&&D.length>0&&Object(r.h)(t,null,Object(r.h)("div",{class:"position-absolute overflow-auto",style:"top: 15px; right: 55px; z-index: 99999999; max-width: 830px; max-height: 90%;"},Object(r.h)("div",{class:""},Object(r.h)("div",{class:"d-flex flex-wrap"},d.map(t=>Object(r.h)(g.a,{stores:this.props.stores,teamId:t}))))))))}})||c;e.default=S}.call(this,s("hosL").Fragment)},ZQlJ:function(t,e,s){"use strict";var n,a=s("hosL"),o=(s("Utv1"),s("/eY4")),i=(s("OhSV"),s("NDEG"));let c=Object(o.a)(n=class extends a.Component{constructor(t){super(t),this.scrollImages=t=>{const{scrollLeft:e,clientWidth:s}=t.target,n=e/s,a=Math.round(n),o=Math.abs(a-n);(Number.isInteger(n)||o<.1)&&this.setState({imageIdx:a})},this.sortByName=(t,e)=>{const{allDogs:s=[]}=this.props,n=s.find(e=>e.id===t),a=s.find(t=>t.id===e);return n&&a&&n.name>a.name?1:-1},this.state={imageIdx:0}}render(){const{dogs:t,allDogs:e=[],size:s="medium",onDogClick:n=(()=>{})}=this.props;return Object(a.h)("div",{class:"w-100"},Object(a.h)("div",{class:"d-flex flex-row flex-nowrap no-scrollbar",style:"overflow: auto; scroll-snap-type: x mandatory;",onScroll:this.scrollImages},t&&t.sort(this.sortByName).map(o=>{const c=e.find(t=>t.id===o);return c?Object(a.h)("div",{class:"col clearfix position-relative p-0 mx-2"},Object(a.h)("div",{class:"w-100 h-100 text-center rounded-lg imageContainer d-flex justify-content-center align-items-center",style:"\n                                        flex-wrap: wrap;\n                                        overflow-y: hidden;\n                                    ",onTouchstart:t=>{t.stopPropagation()},onTouchend:t=>{t.stopPropagation()},onTouchmove:t=>{t.stopPropagation()}},Object(a.h)(i.a,{stores:this.props.stores,dog:c,dogs:e.filter(e=>t.indexOf(e.id)>-1).sort((t,e)=>t.name>e.name?1:-1),className:"mx-auto",showName:!0,showPosition:!1,size:s,onDogClick:n}))):""})))}})||n;e.a=c},aGZh:function(t,e,s){"use strict";(function(t){function e(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,n)}return s}function n(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}var a,o=s("hosL"),i=s("/eY4");const c={};Object(i.a)(a=class extends o.Component{constructor(t){super(t),this.state=function(t){for(var s=1;s<arguments.length;s++){var a=null!=arguments[s]?arguments[s]:{};s%2?e(Object(a),!0).forEach((function(e){n(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):e(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}({},c)}render(){const{appState:e}=this.props.stores,{text:s}=this.props,{language:n="en"}=e;let a=s;const i=new RegExp(`/<${n}>(.*?)</${n}>/`);return s.replace(i,"$1")&&(a=s),Object(o.h)(t,null,a)}})}).call(this,s("hosL").Fragment)},cH0S:function(t,e,s){"use strict";var n,a=s("hosL"),o=(s("Utv1"),s("/eY4")),i=(s("OhSV"),s("ZOvn"));i.a.marginTop(!1),i.a.marginBottom();let c=Object(o.a)(n=class extends a.Component{render(){const{appState:t}=this.props.stores,{darkmode:e}=t,{children:s,onCloseClick:n=(()=>{}),classNames:o="fixed-bottom",width:c="100vw"}=this.props;return Object(a.h)("div",{class:`${o} ${e?"bg-darkmode":"bg-lightmode"} border rounded rounded-lg pt-4 pb-3 px-2`,style:`\n                    bottom: 0;\n                    left: 0;\n                    width: ${c};\n                    max-height: 80vh;\n                    min-height: 10vh;\n                    overflow: auto;\n                    z-index: 999999;\n                    border-radius: 20px 20px 0 0 !important;\n                    border-top-width: 5px !important;\n                    box-shadow: 0px 0 5px rgba(0, 0, 0, 0.8);\n                `,onTouchmove:i.a.captureEvents,onScroll:i.a.captureEvents},Object(a.h)("button",{class:"btn btn-warning btn-sm float-right",onClick:n},Object(a.h)("i",{class:"fas fa-times"})),s)}})||n;e.a=c},e0EM:function(t,e,s){"use strict";(function(t){var n,a=s("hosL"),o=(s("QRet"),s("Utv1")),i=s("/eY4"),c=s("OhSV"),r=(s("Y3FI"),s("fh8t"),s("go65"),s("HQo+"),s("wanP")),l=(s("ZQlJ"),s("s4FZ"),s("q/oJ"),s("cH0S"),s("fVsX"),s("8n2v"),s("gWxU"),s("Nanz"),s("zUny"),s("bbv7")),h=s("ukv5"),d=(s("eQ6k"),s("ZOvn"));let b=Object(i.a)(n=class extends a.Component{constructor(t){super(t),this.state={}}render(){const{wp:e,musher:s}=this.props,{raceStore:n,userStore:i}=this.props.stores,{totalTrackLength:b}=n,u=n.getClassByBib(e.bib),p=n.getTeamById(s.team),m=p.members?p.members.find(t=>t.email===s.email):{},{user:g={}}=i,O=n.getTotalsByTeamId(s.team),j=(d.a.getImage({user:m,team:p,priority:"user",fallback:s.image1}),d.a.displayNameShort(m)||d.a.displayNameShort(s),o.a.format(e.totalDistanceOnTrack/b*100,0)),f=o.a.format(e.restTime/e.raceTime*100,0),v=[],w=[],y=[],x=[];if(e&&e.speeds&&e.speeds.length>0){const t=o.a.range(e.speeds[0].timestamp,e.speeds[e.speeds.length-1].timestamp,600),s=Math.ceil(t.length/5);Math.floor(t.length/s);for(let e=0,n=t.length;e<n;e+=s)v.push(d.a.formatDate(o.a.parseInputDate(t[e]),{locale:"en-GB",day:"numeric",month:"numeric",hour12:!1,hour:"2-digit",minute:"2-digit"}));v.push(d.a.formatDate(o.a.parseInputDate(t[t.length-1]),{locale:"en-GB",day:"numeric",month:"numeric",hour12:!1,hour:"2-digit",minute:"2-digit"}));const n=e.speeds.map(t=>({x:t.timestamp,y:3.6*t.speed}));w.push(n),y.push("Avg speed"),x.push("km/t")}p.members&&p.members.indexOf(g.id),p.followers&&p.followers.indexOf(g.id),p.followRequests&&p.followRequests.findIndex(t=>t.id===g.id);const k=Math.floor((new Date).getTime()/1e3);return Object(a.h)(t,null,Object(a.h)("div",{class:"d-flex justify-content-between"},Object(a.h)("div",{class:"flex-fill bg-light rounded-lg p-3 align-middle"},Object(a.h)("div",null,Object(a.h)("small",{class:"text-muted"},Object(a.h)("i",{class:"fas fa-list"})," Ranking")),Object(a.h)("div",{class:"text-center",style:"font-size: 2.0em;"},e.rank)),e.finishTime<9999999999?Object(a.h)(t,null,e.diffToFirstFinishTime>0?Object(a.h)(t,null,Object(a.h)("div",{class:"flex-fill bg-light rounded-lg p-3 align-middle ml-2"},Object(a.h)("div",null,Object(a.h)("small",{class:"text-muted"},Object(a.h)("i",{class:"fas fa-clock"})," Diff to 1st")),Object(a.h)("div",{class:"text-center",style:"font-size: 2.0em;"},o.a.secToHms(e.diffToFirstFinishTime)))):Object(a.h)(t,null,Object(a.h)("div",{class:"flex-fill bg-light rounded-lg p-3 align-middle ml-2"},Object(a.h)("div",null,Object(a.h)("small",{class:"text-muted"},Object(a.h)("i",{class:"fas fa-clock"})," Start time")),Object(a.h)("div",{class:"text-center",style:"font-size: 1.5em;"},o.a.formatDate(o.a.parseInputDate(s.startTime||u.startDate||e.startTime),{locale:"no-NB",hour12:!1,hour:"2-digit",minute:"2-digit"}))),Object(a.h)("div",{class:"flex-fill bg-light rounded-lg p-3 align-middle ml-2"},Object(a.h)("div",null,Object(a.h)("small",{class:"text-muted"},Object(a.h)("i",{class:"fas fa-clock"})," Finish time")),Object(a.h)("div",{class:"text-center",style:"font-size: 1.5em;"},o.a.formatDate(o.a.parseInputDate(e.finishTime),{locale:"no-NB",hour12:!1,hour:"2-digit",minute:"2-digit"}))))):Object(a.h)(t,null,Object(a.h)("div",{class:"flex-fill bg-light rounded-lg p-3 align-middle ml-2"},Object(a.h)("div",null,Object(a.h)("small",{class:"text-muted"},Object(a.h)("i",{class:"fas fa-tachometer-alt"})," Current speed")),Object(a.h)("div",{class:"text-center",style:"font-size: 2.0em;"},o.a.format(e.speed||0,1)," ",Object(a.h)("span",{class:"text-muted",style:"font-size: 0.5em;"},"km/h"))),Object(a.h)("div",{class:"flex-fill bg-light rounded-lg p-3 align-middle ml-2"},Object(a.h)("div",null,Object(a.h)("small",{class:"text-muted"},Object(a.h)("i",{class:"fas fa-stopwatch"})," Last update")),Object(a.h)("div",{class:"text-center",style:"font-size: 2.0em;"},o.a.secToHms(k-e.timestamp))))),Object(a.h)("div",{class:"d-flex justify-content-between mt-2"},Object(a.h)("div",{class:"flex-fill bg-light rounded-lg p-3 align-middle"},Object(a.h)("div",null,Object(a.h)("small",{class:"text-muted"},Object(a.h)("i",{class:"fas fa-road"})," Total distance")),Object(a.h)("div",{class:"text-center mt-2"},Object(a.h)(r.a,{key:"gauge-reload-page",color:"primary",radius:40,showPercentText:!1,percent:j,showCenterText:!0,centerText:j+"%",centerTextSize:18,centerTextY:"55%"})),Object(a.h)("div",{class:"text-center"},Object(a.h)("small",null,o.a.format(e.totalDistanceOnTrack,1)," / ",o.a.format(b,1)," ",Object(a.h)("span",{class:"text-muted"},"km"),Object(a.h)("br",null),Object(a.h)("i",{class:"fas fa-clock ml-2 text-muted"})," ",o.a.secToHms(e.raceTime)))),Object(a.h)("div",{class:"flex-fill bg-light rounded-lg p-3 align-middle ml-2"},Object(a.h)("div",null,Object(a.h)("small",{class:"text-muted"},Object(a.h)("i",{class:"fas fa-bed"})," Rest")),Object(a.h)("div",{class:"text-center mt-2"},Object(a.h)(r.a,{key:"gauge-reload-page",color:f<40?f<30?"danger":"warning":"success",radius:40,showPercentText:!1,percent:f,showCenterText:!0,centerText:f+"%",centerTextSize:18,centerTextY:"55%"})),Object(a.h)("div",{class:"text-center"},Object(a.h)("small",null,f," ",Object(a.h)("span",{class:"text-muted"},"%"),Object(a.h)("br",null),Object(a.h)("i",{class:"fas fa-clock ml-2 text-muted"})," ",o.a.secToHms(e.restTime))))),Object(a.h)("div",{class:"d-flex justify-content-between mt-2"},Object(a.h)("div",{class:"flex-fill bg-light rounded-lg p-3 align-middle w-100"},Object(a.h)(h.a,{stores:this.props.stores,states:e.states,duration:e.raceTime,key:"state-"+e.bib}))),e.finishTime<9999999999?Object(a.h)(t,null,e.diffToFirstFinishTime>0?Object(a.h)(t,null,Object(a.h)("div",{class:"d-flex justify-content-between mt-2"},Object(a.h)("div",{class:"flex-fill bg-light rounded-lg p-3 align-middle"},Object(a.h)("div",null,Object(a.h)("small",{class:"text-muted"},Object(a.h)("i",{class:"fas fa-clock"})," Start time")),Object(a.h)("div",{class:"text-center",style:"font-size: 1.5em;"},o.a.formatDate(o.a.parseInputDate(s.startTime||u.startDate||e.startTime),{locale:"no-NB",hour12:!1,hour:"2-digit",minute:"2-digit"}))),Object(a.h)("div",{class:"flex-fill bg-light rounded-lg p-3 align-middle ml-2"},Object(a.h)("div",null,Object(a.h)("small",{class:"text-muted"},Object(a.h)("i",{class:"fas fa-clock"})," Finish time")),Object(a.h)("div",{class:"text-center",style:"font-size: 1.5em;"},o.a.formatDate(o.a.parseInputDate(e.finishTime),{locale:"no-NB",hour12:!1,hour:"2-digit",minute:"2-digit"}))))):Object(a.h)(t,null)):Object(a.h)(t,null,Object(a.h)("div",{class:"d-flex justify-content-between mt-2"},Object(a.h)("div",{class:"flex-fill bg-light rounded-lg p-3 align-middle"},Object(a.h)("div",null,Object(a.h)("small",{class:"text-muted"},Object(a.h)("i",{class:"fas fa-arrow-down"})," Behind")),Object(a.h)("div",{class:"text-center"},o.a.format(e.distanceToBehind,1)," ",Object(a.h)("span",{class:"text-muted"},"km"))),Object(a.h)("div",{class:"flex-fill bg-light rounded-lg p-3 align-middle"},Object(a.h)("div",null,Object(a.h)("small",{class:"text-muted"},"Team")),Object(a.h)("div",{class:"text-center"},Object(a.h)("i",{class:"fas fa-dog"}))),Object(a.h)("div",{class:"flex-fill bg-light rounded-lg p-3 align-middle"},Object(a.h)("div",null,Object(a.h)("small",{class:"text-muted"},Object(a.h)("i",{class:"fas fa-arrow-up"})," In front")),Object(a.h)("div",{class:"text-center"},o.a.format(e.distanceToForward,1)," ",Object(a.h)("span",{class:"text-muted"},"km"))),Object(a.h)("div",{class:"flex-fill bg-light rounded-lg p-3 align-middle"},Object(a.h)("div",null,Object(a.h)("small",{class:"text-muted"},Object(a.h)("i",{class:"fas fa-arrow-up"})," To first")),Object(a.h)("div",{class:"text-center"},o.a.format(e.distanceToFirst,1)," ",Object(a.h)("span",{class:"text-muted"},"km")))),Object(a.h)("div",{class:"d-flex justify-content-between mt-2"},Object(a.h)("div",{class:"flex-fill bg-light rounded-lg p-3 align-middle"},Object(a.h)("div",null,Object(a.h)("small",{class:"text-muted"},Object(a.h)("i",{class:"fas fa-flag-checkered"})," Finish")),Object(a.h)("div",{class:"text-center",style:"font-size: 2.0em;"},o.a.format(e.distanceToFinish,1)," ",Object(a.h)("span",{class:"text-muted",style:"font-size: 0.5em;"},"km"))))),Object(a.h)("div",{class:"d-flex justify-content-between mt-2"},Object(a.h)("div",{class:"flex-fill bg-light rounded-lg p-3 align-middle"},Object(a.h)("div",null,Object(a.h)("small",{class:"text-muted"},Object(a.h)("i",{class:"fas fa-clock"})," Racetime")),Object(a.h)("div",{class:"text-center",style:"font-size: 2.0em;"},o.a.secToHms(e.raceTime))),Object(a.h)("div",{class:"flex-fill bg-light rounded-lg p-3 align-middle ml-2"},Object(a.h)("div",null,Object(a.h)("small",{class:"text-muted"},Object(a.h)("i",{class:"fas fa-bed"})," Resttime")),Object(a.h)("div",{class:"text-center",style:"font-size: 2.0em;"},o.a.secToHms(e.restTime)))),Object(a.h)("div",{class:"d-flex justify-content-between mt-2"},Object(a.h)("div",{class:"flex-fill bg-light rounded-lg p-3 align-middle w-100"},Object(a.h)("div",null,Object(a.h)("small",{class:"text-muted"},Object(a.h)("i",{class:"fas fa-tachometer-alt"})," Speed plot")),Object(a.h)("div",{class:"w-100 mt-2 overflow-auto"},Object(a.h)(l.a,{stores:this.props.stores,width:1e3,height:200,showXTicks:1,xTicks:v,paddingTop:30,paddingLeft:50,yTicksLeftWidth:"50px",lineFromXzero:!0,lineFromXmax:!0,dataLeft:w,legendLeft:y,dataFillLeft:[1],showYTicksLeft:1,yTicksLeftPostfix:" km/t",unitLeft:x,avgWindowLeft:[0,0],smoothLeft:[0,0]})))),O&&O.distanceKm&&Object(a.h)(t,null,Object(a.h)("div",{class:"table-responsive-lg"},Object(a.h)("table",{class:"table table-borderless"},Object(a.h)("tbody",null,Object(a.h)("tr",null,Object(a.h)("td",{style:"width: 5%;"},Object(a.h)("i",{class:"fas fa-dog"})),Object(a.h)("td",{style:"width: 60%"},Object(a.h)(c.c,{id:"races.dogs"},"Dogs")),Object(a.h)("td",{style:"width: 5%;"}," "),Object(a.h)("td",{class:"text-right",style:"width: 30%;"},p.dogs.length)),Object(a.h)("tr",null,Object(a.h)("td",null,Object(a.h)("i",{class:"fas fa-road"})),Object(a.h)("td",null,Object(a.h)(c.c,{id:"races.distance"},"Distance")),Object(a.h)("td",null," "),Object(a.h)("td",{class:"text-right"},Object(a.h)("nobr",null,O.distanceKm?o.a.format(O.distanceKm,1)+" km":"n/a"))),Object(a.h)("tr",null,Object(a.h)("td",null,Object(a.h)("i",{class:"fas fa-mountain"})),Object(a.h)("td",null,Object(a.h)(c.c,{id:"races.ascend"},"Ascending")),Object(a.h)("td",null," "),Object(a.h)("td",{class:"text-right"},Object(a.h)("nobr",null,O.elevation?o.a.format(O.elevation,0)+" m":"n/a"))),Object(a.h)("tr",null,Object(a.h)("td",null,Object(a.h)("i",{class:"fas fa-stopwatch"})),Object(a.h)("td",null,Object(a.h)(c.c,{id:"races.race-time"},"Racetime")),Object(a.h)("td",null,Object(a.h)("i",{class:"fas fa-clock"})),Object(a.h)("td",{class:"text-right"},Object(a.h)("nobr",null,o.a.secToHms(O.duration)||"n/a"))),Object(a.h)("tr",null,Object(a.h)("td",null,Object(a.h)("i",{class:"fas fa-bed"})),Object(a.h)("td",null,Object(a.h)(c.c,{id:"races.rest-time"},"Rest")),Object(a.h)("td",null,Object(a.h)("i",{class:"fas fa-clock"})),Object(a.h)("td",{class:"text-right"},Object(a.h)("nobr",null,o.a.secToHms(O.rest)||"n/a"))))))))}})||n;e.a=b}).call(this,s("hosL").Fragment)},eK6s:function(t){t.exports={gaugeBackground:"gaugeBackground__1UGxt",gauge:"gauge__2ZDxd",success:"success__3UQxg",primary:"primary__3pPV6",secondary:"secondary__-Vrk_",info:"info__3t5zs",warning:"warning__1jHlR",danger:"danger__BLVC9",gaugeText:"gaugeText__1on-w"}},fVsX:function(t,e,s){"use strict";var n,a=s("hosL"),o=(s("Utv1"),s("/eY4")),i=(s("OhSV"),s("ZOvn"));i.a.marginTop(!1),i.a.marginBottom();let c=Object(o.a)(n=class extends a.Component{render(){const{children:t,height:e="65px"}=this.props;return Object(a.h)("nav",{class:"navbar navbar-themed bg-light fixed-top py-0",style:`height: ${e};`},t)}})||n;e.a=c},irB3:function(t,e,s){"use strict";(function(t){var n,a=s("hosL"),o=s("Utv1"),i=s("/eY4");s("OhSV"),s("ZOvn");let c=Object(i.a)(n=class extends a.Component{render(){const{value:e=0,smallUnit:s}=this.props,{userStore:n}=this.props.stores,{user:i}=n,{settings:c={}}=i;return c.imperial?Object(a.h)(t,null,Object(a.h)("nobr",null,o.a.format(function(t){return 3.28084*t}(e),0)," ",s?Object(a.h)(t,null,Object(a.h)("small",null,Object(a.h)("small",null,Object(a.h)("small",{class:"ml-0 text-muted"},"ft")))):Object(a.h)(t,null,"ft"))):Object(a.h)(t,null,Object(a.h)("nobr",null,o.a.format(e,0)," ",s?Object(a.h)(t,null,Object(a.h)("small",null,Object(a.h)("small",null,Object(a.h)("small",{class:"ml-0 text-muted"},"m")))):Object(a.h)(t,null,"m")))}})||n;e.a=c}).call(this,s("hosL").Fragment)},nHdA:function(t,e,s){"use strict";(function(t){var n,a=s("hosL"),o=s("Utv1"),i=s("/eY4"),c=s("OhSV");s("ZOvn");let r=Object(i.a)(n=class extends a.Component{render(){const{value:e=0,smallUnit:s}=this.props,{userStore:n}=this.props.stores,{user:i}=n,{settings:r={}}=i;return r.imperial?Object(a.h)(t,null,Object(a.h)("nobr",null,o.a.format(function(t){return.621371*t}(e),1)," ",s?Object(a.h)(t,null,Object(a.h)("small",null,Object(a.h)("small",null,Object(a.h)("small",{class:"ml-0 text-muted"},Object(a.h)(c.c,{id:"workouts.mph"},"mph"))))):Object(a.h)(t,null,Object(a.h)(c.c,{id:"workouts.mph"},"mph")))):Object(a.h)(t,null,Object(a.h)("nobr",null,o.a.format(e,1)," ",s?Object(a.h)(t,null,Object(a.h)("small",null,Object(a.h)("small",null,Object(a.h)("small",{class:"ml-0 text-muted"},Object(a.h)(c.c,{id:"workouts.kmt"},"km/t"))))):Object(a.h)(t,null,Object(a.h)(c.c,{id:"workouts.kmt"},"km/t"))))}})||n;e.a=r}).call(this,s("hosL").Fragment)},ukv5:function(t,e,s){"use strict";(function(t){function n(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,n)}return s}function a(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?n(Object(s),!0).forEach((function(e){o(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):n(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}function o(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}function i(t){switch(t){case"running":return"primary";case"rest":return"warning";case"restTrail":return"danger"}}function c(t){switch(t){case"running":return"fas fa-running";case"rest":return"fas fa-male";case"restTrail":return"fas fa-bed"}}var r,l=s("hosL"),h=s("Utv1"),d=s("/eY4"),b=(s("Y3FI"),s("OhSV")),u=(s("cneo"),s("fh8t"),s("ZOvn")),p=s("nHdA"),m=(s("irB3"),s("UwwE"),s("8Lgr"));s("QkTp");let g=Object(d.a)(r=class extends l.Component{constructor(...t){super(...t),this.hideDetail=t=>{t.preventDefault(),t.stopPropagation(),this.setState({stateDetail:{state:"",idx:0}})},this.showStateDetail=t=>{t.preventDefault(),t.stopPropagation();const e=t.target.closest("div").dataset;this.setState({stateDetail:a({},e)})},this.nextStateDetail=t=>{t.preventDefault(),t.stopPropagation();const{states:e,duration:s}=this.props,{stateDetail:n={}}=this.state,a=parseInt(n.idx,10)+1,o=e[a];o&&this.setState({stateDetail:{idx:a,state:o.state,duration:o.duration,distance:o.distance,avgspeed:o.avgSpeed,statespeeds:o.stateSpeeds,point:o.point,start:o.start,end:o.end,percent:h.a.normalizeBetween(o.duration,0,s,0,100)}})},this.prevStateDetail=t=>{t.preventDefault(),t.stopPropagation();const{states:e,duration:s}=this.props,{stateDetail:n={}}=this.state,a=parseInt(n.idx,10)-1,o=e[a];o&&this.setState({stateDetail:{idx:a,state:o.state,duration:o.duration,distance:o.distance,avgspeed:o.avgSpeed,statespeeds:o.stateSpeeds,point:o.point,start:o.start,end:o.end,percent:h.a.normalizeBetween(o.duration,0,s,0,100)}})}}render(){const{states:e,duration:s,height:n="20px",showText:a=!0}=this.props,{stateDetail:o={}}=this.state;return Object(l.h)(t,null,Object(l.h)("div",{class:"row"},e&&Object(l.h)("div",{class:"col-12 px-0"},Object(l.h)("div",{class:"progress",style:`height: ${o&&o.idx?"20px":n};`},e.map((e,n)=>{const c=Math.ceil(h.a.normalizeBetween(e.duration,0,s,0,100));let r=c;return o&&o.idx==n&&(r=c<10?10:c),Object(l.h)(t,null,Object(l.h)("div",{class:"progress-bar bg-"+i(e.state),role:"progressbar",style:`width: ${r}%`,"aria-valuenow":c,"aria-valuemin":"0","aria-valuemax":"100","data-idx":n,"data-state":e.state,"data-duration":e.duration,"data-distance":e.distance,"data-avgspeed":e.avgSpeed,"data-statespeeds":e.stateSpeeds,"data-point":e.point,"data-start":e.start,"data-end":e.end,"data-percent":h.a.normalizeBetween(e.duration,0,s,0,100),onClick:this.showStateDetail},a?Object(l.h)(t,null,Object(l.h)("nobr",null,c>10&&Object(l.h)(t,null,"rest"===e.state?Object(l.h)(t,null,h.a.secToHms(e.duration,!0)):Object(l.h)(t,null,h.a.format(e.distance/1e3,0),"km")),o&&o.idx==n?Object(l.h)("i",{class:`fas fa-hand-point-down text-${"rest"===e.state?"dark":"warning"} mx-2`}):"")):Object(l.h)(t,null,o&&o.idx==n?Object(l.h)("i",{class:`fas fa-hand-point-down text-${"rest"===e.state?"dark":"warning"} mx-2`}):"")))})),o&&o.state&&Object(l.h)(t,null,Object(l.h)("div",{class:"card position-relative"},Object(l.h)("span",{class:"position-absolute",style:"top: 0px; right: 5px;"},Object(l.h)("small",{class:"text-muted"},Object(l.h)("i",{class:c(o.state)})," ",h.a.format(o.percent,1),"%")),Object(l.h)("div",{class:"card-body"},"rest"===o.state?Object(l.h)(t,null,Object(l.h)("div",{class:"card-text row"},Object(l.h)("div",{class:"col-4 text-nowrap text-overflow"},Object(l.h)("small",{class:"text-muted"},Object(l.h)("i",{class:"fas fa-clock ml-2"})," ",Object(l.h)(b.c,{id:"workouts.duration"},"Vargihet")),Object(l.h)("h6",null,h.a.secToHms(o.duration,!0))),o.point&&Object(l.h)("div",{class:"col-8 text-nowrap text-overflow"},Object(l.h)("small",{class:"text-muted"},Object(l.h)("i",{class:"fa-map-marked ml-2"})," ",Object(l.h)(b.c,{id:"workouts.position"},"Position")),Object(l.h)("h6",null,o.point))),Object(l.h)("div",{class:"card-text row"},o.start&&Object(l.h)("div",{class:"col-4 text-nowrap text-overflow"},Object(l.h)("small",{class:"text-muted"},Object(l.h)("i",{class:"fas fa-clock ml-2"})," ",Object(l.h)(b.c,{id:"workouts.starttime"},"Start")),Object(l.h)("h6",null,u.a.formatDate(h.a.parseInputDate(o.start),{locale:"en-GB",hour12:!1,day:"numeric",month:"numeric",hour:"2-digit",minute:"2-digit"}))),o.end&&Object(l.h)("div",{class:"col-4 text-nowrap text-overflow"},Object(l.h)("small",{class:"text-muted"},Object(l.h)("i",{class:"fas fa-clock ml-2"})," ",Object(l.h)(b.c,{id:"workouts.endtime"},"End")),Object(l.h)("h6",null,u.a.formatDate(h.a.parseInputDate(o.end),{locale:"en-GB",hour12:!1,day:"numeric",month:"numeric",hour:"2-digit",minute:"2-digit"}))))):Object(l.h)(t,null,Object(l.h)("div",{class:"card-text row"},Object(l.h)("div",{class:"col-4 text-nowrap text-overflow"},Object(l.h)("small",{class:"text-muted"},Object(l.h)("i",{class:"fas fa-road ml-2"})," ",Object(l.h)(b.c,{id:"workouts.distance"},"Distanse")),Object(l.h)("h6",null,Object(l.h)(m.a,{stores:this.props.stores,value:o.distance/1e3}))),Object(l.h)("div",{class:"col-4 text-nowrap text-overflow"},Object(l.h)("small",{class:"text-muted"},Object(l.h)("i",{class:"fas fa-clock ml-2"})," ",Object(l.h)(b.c,{id:"workouts.duration"},"Vargihet")),Object(l.h)("h6",null,h.a.secToHms(o.duration,!0))),Object(l.h)("div",{class:"col-4 text-nowrap text-overflow"},Object(l.h)("small",{class:"text-muted"},Object(l.h)("i",{class:"fas fa-tachometer-alt ml-2"})," ",Object(l.h)(b.c,{id:"workouts.avgspeed"},"Gj.fart")),Object(l.h)("h6",null,Object(l.h)(p.a,{stores:this.props.stores,value:o.distance/o.duration*3.6})))),Object(l.h)("div",{class:"card-text row"},o.start&&Object(l.h)("div",{class:"col-4 text-nowrap text-overflow"},Object(l.h)("small",{class:"text-muted"},Object(l.h)("i",{class:"fas fa-clock ml-2"})," ",Object(l.h)(b.c,{id:"workouts.starttime"},"Start")),Object(l.h)("h6",null,u.a.formatDate(h.a.parseInputDate(o.start),{locale:"en-GB",hour12:!1,day:"numeric",month:"numeric",hour:"2-digit",minute:"2-digit"}))),o.end&&Object(l.h)("div",{class:"col-4 text-nowrap text-overflow"},Object(l.h)("small",{class:"text-muted"},Object(l.h)("i",{class:"fas fa-clock ml-2"})," ",Object(l.h)(b.c,{id:"workouts.endtime"},"End")),Object(l.h)("h6",null,u.a.formatDate(h.a.parseInputDate(o.end),{locale:"en-GB",hour12:!1,day:"numeric",month:"numeric",hour:"2-digit",minute:"2-digit"})))))),Object(l.h)("div",{class:"float-right"},Object(l.h)("button",{class:"btn btn-link text-primary mx-2 py-0 float-right",onClick:this.hideDetail,style:"line-height: 1.0em; font-size: 2.0em;"},Object(l.h)("i",{class:"fas fa-times"})),o.idx<e.length-1&&Object(l.h)("button",{class:"btn btn-link text-primary mx-2 py-0 float-right",onClick:this.nextStateDetail,style:"line-height: 1.0em; font-size: 2.0em;"},Object(l.h)("i",{class:"fas fa-angle-right"})),o.idx>0&&Object(l.h)("button",{class:"btn btn-link text-primary mx-2 py-0 float-right",onClick:this.prevStateDetail,style:"line-height: 1.0em; font-size: 2.0em;"},Object(l.h)("i",{class:"fas fa-angle-left"}))))))))}})||r;e.a=g}).call(this,s("hosL").Fragment)},vme8:function(t,e,s){"use strict";(function(t){function n(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,n)}return s}function a(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}var o,i=s("hosL"),c=(s("QRet"),s("Utv1")),r=s("/eY4");s("OhSV");const l={};let h=Object(r.a)(o=class extends i.Component{constructor(t){super(t),this.toggleFocusOnMusher=t=>{const e=t.target.parentElement.dataset.musherid||t.target.dataset.musherid,{appState:s,raceStore:n}=this.props.stores;s.toggleFocusOnMusher(parseInt(e,10));const{focusOnMushers:a}=s;n.getWorkoutSummaryActiveTeams(a)},this.toggleInfoOnMusher=t=>{const e=t.target.parentElement.dataset.musherid||t.target.dataset.musherid,{appState:s}=this.props.stores;s.toggleInfoOnMusher(parseInt(e,10))},this.state=function(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?n(Object(s),!0).forEach((function(e){a(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):n(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}({},l)}render(){const{raceStore:e,appState:s}=this.props.stores,{teamId:n}=this.props,{language:a="en"}=s,o=e.getTeamById(n);if(!o||!o.id)return Object(i.h)(t,null);const r=e.getActiveTeamById(o.id),l=e.getWorkoutSummaryByTeam(o.id).reverse(),h=e.getClassByTeamId(o.id),d=e.getWorkoutResultsByTeam(l,h.distance),b=e.getMusherByTeamId(o.id),u=o.images&&o.images.length>0?o.images[0]:{},p=e.getClassByTeamId(o.id),m=d.distanceKm/h.distance*100,g=m>0?1:0;let O,j,f;r&&r.currentLocation&&r.currentLocation.coords&&(O=3.6*r.currentLocation.coords.speed,j=r.currentLocation.timestamp,f=!0);let v=p.distance-d.distanceKm;return v<0&&(v=0),Object(i.h)(t,null,Object(i.h)("div",{class:"mr-2 mb-2 overflow-auto",style:"width: 350px !important; max-height: 350px; overflow-x: hidden !important;"},Object(i.h)("div",{class:"p-2 bg-light rounded-lg"},Object(i.h)("div",{class:"row mt-2",style:"font-size: 0.9em;"},Object(i.h)("div",{class:"col-4 text-center"},Object(i.h)("div",{class:"text-center text-muted pt-2 h-100",style:`background-image: url("${u.s3SmallLink}"); background-size: cover;`,onClick:this.toggleFocusOnMusher,"data-musherid":o.id},!u.s3SmallLink&&Object(i.h)(t,null,Object(i.h)("span",{class:"font-weight-lighter",style:"font-size: 55px;"},c.a.ucfirst(String(b.firstname),!0),c.a.ucfirst(String(b.lastname),!0))))),Object(i.h)("div",{class:"col-8"},Object(i.h)("div",{class:"row"},Object(i.h)("div",{class:"col-12",style:"font-size: 1.5em; line-height: 1.0em;"},Object(i.h)("button",{type:"button",class:"btn btn-sm float-right",onClick:this.toggleInfoOnMusher,"data-musherid":o.id},"X"),Object(i.h)("span",{class:"font-weight-bold"},b.firstname," ",b.lastname),Object(i.h)("br",null),Object(i.h)("span",{class:"font-weight-lighter"},o.name),Object(i.h)("br",null),p&&p.title&&Object(i.h)(t,null,Object(i.h)("span",{class:"font-weight-lighter mr-2",style:"font-size: 0.8em;"},p.title," -")),Object(i.h)("span",{class:"font-weight-lighter",style:"font-size: 0.8em;"},c.a.format(d.avgDogs,1)," ",Object(i.h)("i",{class:"fas fa-dog text-muted ml-1"})))),Object(i.h)("div",{class:"row mt-2"},Object(i.h)("div",{class:"col-4 text-center",style:"line-height: 1.4em;"},Object(i.h)("span",{class:"text-muted"},"km/t"),Object(i.h)("br",null),Object(i.h)("span",{style:"font-size: 2.0em;"},c.a.format(d.speedAvg,1))),Object(i.h)("div",{class:"col-4 text-center",style:"line-height: 1.4em;"},Object(i.h)("span",{class:"text-muted"},"km"),Object(i.h)("br",null),Object(i.h)("span",{style:"font-size: 2.0em;"},c.a.format(d.distanceKm))),Object(i.h)("div",{class:"col-4 text-center",style:"line-height: 1.4em;"},Object(i.h)("span",{class:"text-muted"},"to finish"),Object(i.h)("br",null),Object(i.h)("span",{style:"font-size: 2.0em;"},0===v?Object(i.h)("i",{class:"fas fa-flag-checkered text-success"}):Object(i.h)(t,null,c.a.format(v,0))))),Object(i.h)("div",{class:"row mt-2"},Object(i.h)("div",{class:"col-6 text-center",style:"line-height: 1.4em;"},Object(i.h)("span",{class:"text-muted"},0===v?Object(i.h)(t,null,"Calc.Duration"):Object(i.h)(t,null,"Duration")),Object(i.h)("br",null),Object(i.h)("span",{style:"font-size: 1.5em;"},0===v?Object(i.h)(t,null,c.a.secToHms(d.weightedNormalizedDuration||d.duration)):Object(i.h)(t,null,c.a.secToHms(d.duration)))),Object(i.h)("div",{class:"col-6 text-center",style:"line-height: 1.4em;"},Object(i.h)("span",{class:"text-muted"},"Status"),Object(i.h)("br",null),Object(i.h)("span",{style:"font-size: 1.5em;"},f?Object(i.h)(t,null,1===r.isInProgress?Object(i.h)("span",{class:"text-primary"},"running"):"",2===r.isInProgress?Object(i.h)("span",{class:"text-danger"},"resting"):"",0===v?Object(i.h)(t,null,r.isInProgress?"":Object(i.h)("span",{class:"text-success"},"FINISH")):Object(i.h)(t,null,r.isInProgress?"-":Object(i.h)(t,null,g?Object(i.h)("span",{class:"text-danger"},"resting"):Object(i.h)("span",{class:"text-muted"},"NYS")))):Object(i.h)(t,null,0===v?Object(i.h)("span",{class:"text-success"},"FINISH"):Object(i.h)(t,null,g?Object(i.h)("span",{class:"text-danger"},"resting"):Object(i.h)("span",{class:"text-muted"},"NYS")))))))),Object(i.h)("div",{class:"row mt-2",style:"font-size: 0.9em;"},Object(i.h)("div",{class:"col-6"},Object(i.h)("table",{class:"table table-sm table-striped"},Object(i.h)("tbody",null,Object(i.h)("tr",null,Object(i.h)("td",null,"Current speed"),Object(i.h)("td",null,O?Object(i.h)(t,null,c.a.format(O,1)," km/t"):"-")),Object(i.h)("tr",null,Object(i.h)("td",null,"Avg speed"),Object(i.h)("td",null,c.a.format(d.speedAvg,1)," km/t")),Object(i.h)("tr",null,Object(i.h)("td",null,"Duration"),Object(i.h)("td",null,c.a.secToHms(d.duration))),Object(i.h)("tr",null,Object(i.h)("td",null,"Calculated duration"),Object(i.h)("td",null,c.a.secToHms(d.weightedNormalizedDuration))),Object(i.h)("tr",null,Object(i.h)("td",null,"Rest"),Object(i.h)("td",null,c.a.secToHms(d.rest))),Object(i.h)("tr",null,Object(i.h)("td",null,"Elevation"),Object(i.h)("td",null,c.a.format(d.elevation,0)," m")),Object(i.h)("tr",null,Object(i.h)("td",null,"Altitude"),Object(i.h)("td",null,f?Object(i.h)(t,null,r.currentLocation.coords.altitude," moh"):"-")),Object(i.h)("tr",null,Object(i.h)("td",null,"Load index"),Object(i.h)("td",null,d.loadIndex)),Object(i.h)("tr",null,Object(i.h)("td",null,"Updated:"),Object(i.h)("td",null,f?Object(i.h)(t,null,c.a.formatDistance(j,new Date)," ago"):"-"))))),Object(i.h)("div",{class:"col-6"},Object(i.h)("span",null,"Elevation profile:"),Object(i.h)("br",null),f?Object(i.h)("svg",{viewBox:"0 0 300 100",style:"width: 180px; height: 60px; top: 0; left: 0;"},Object(i.h)("path",{d:""+r.svgElevation,style:"fill: #0063FF; stroke: #0063FF; stroke-width: 2; opacity: 0.2;"})):Object(i.h)("div",null,"-"),Object(i.h)("span",null,"Map profile:"),Object(i.h)("br",null),f?Object(i.h)("svg",{viewBox:"0 0 300 300",style:"width: 180px; height: 180px; top: 0; left: 0;"},Object(i.h)("path",{d:""+r.svgMap,style:"fill: none; stroke: #FF6300; stroke-width: 5; opacity: 0.2;"})):Object(i.h)("div",null,"-"))),Object(i.h)("div",{class:"mt-2",style:"font-size: 0.9em;"},Object(i.h)("div",{class:"d-flex flex-wrap"},l&&l.map((e,s)=>{const n=e.distanceKm/h.distance*100,o=(n>100||parseInt(n,10),Math.floor(new Date(e.date).getTime()/1e3)),r=new Date(0);r.setUTCSeconds(o+parseInt(e.duration,10));const l=e.images.flat();return Object(i.h)(t,null,Object(i.h)("div",{class:"bg-light border rounded-lg text-right position-relative mr-1 mb-1"},Object(i.h)("svg",{viewBox:"0 0 300 100",class:"position-absolute",style:"width: 100%; height: 95%; bottom: 0px; left: 0px; z-index: 0;"},Object(i.h)("path",{d:""+e.svgElevation,style:"fill: #0063FF; stroke: #0063FF; stroke-width: 2; opacity: 0.2;"})),Object(i.h)("div",{class:"position-relative px-3"},Object(i.h)("span",{class:"position-absolute",style:"top: 3px; left: 3px; font-size: 1.3em;"},s+1),Object(i.h)("small",null,Object(i.h)("span",{class:"float-left"},Object(i.h)("nobr",null,Object(i.h)("i",{style:"width: 20px;",class:"fas fa-sign-out-alt"})," ",c.a.formatDate(e.date,{locale:a,hour12:!1,hour:"2-digit",minute:"2-digit"})),Object(i.h)("nobr",null,Object(i.h)("i",{style:"width: 20px;",class:"fas fa-sign-in-alt"})," ",c.a.formatDate(r,{locale:a,hour12:!1,hour:"2-digit",minute:"2-digit"}))),Object(i.h)("span",{class:"float-right"},Object(i.h)("nobr",null,Object(i.h)("i",{style:"width: 20px;",class:"fas fa-road"})," ",c.a.format(e.distanceKm,1)||"n/a"," ",Object(i.h)("span",{class:"font-weight-lighter"},"km")),Object(i.h)("nobr",null,Object(i.h)("i",{style:"width: 20px;",class:"fas fa-mountain"})," ",c.a.format(e.elevation,0)||"n/a"," ",Object(i.h)("span",{class:"font-weight-lighter"},"m")),Object(i.h)("nobr",null,Object(i.h)("i",{style:"width: 20px;",class:"fas fa-tachometer-alt"})," ",c.a.format(e.speedAvg,1)||"n/a"," ",Object(i.h)("span",{class:"font-weight-lighter"},"km/t")),Object(i.h)("br",null),Object(i.h)("nobr",null,Object(i.h)("i",{style:"width: 20px;",class:"fas fa-clock"})," ",c.a.secToHms(e.duration)||"n/a"),Object(i.h)("nobr",null,Object(i.h)("i",{style:"width: 20px;",class:"fas fa-moon"})," ",c.a.secToHms(e.rest)||"n/a"),Object(i.h)("br",null),Object(i.h)("nobr",null,Object(i.h)("i",{style:"width: 20px;",class:"fas fa-dog"})," ",c.a.format(e.avgDogs,0)||"n/a"),Object(i.h)("nobr",null,Object(i.h)("i",{style:"width: 20px;",class:"fas fa-balance-scale"})," ",c.a.format(e.loadIndex,0)||"n/a"),Object(i.h)("br",null),Object(i.h)("nobr",null,Object(i.h)("i",{style:"width: 20px;",class:"fas fa-images"})," ",l.length),Object(i.h)("br",null))))))}))))))}})||o;e.a=h}).call(this,s("hosL").Fragment)},wanP:function(t,e,s){"use strict";(function(t){function n(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,n)}return s}function a(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}var o,i=s("hosL"),c=(s("Utv1"),s("/eY4")),r=s("eK6s"),l=s.n(r);const h={mouseData:{}};let d=Object(c.a)(o=class extends i.Component{constructor(t){super(t),this.state=function(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?n(Object(s),!0).forEach((function(e){a(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):n(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}({},h),this.svgRef=null}render(){const{radius:e=50,heightAdd:s=0,color:n="success",showPercentText:a=!0,percent:o=0,prefix:c="",showCenterText:r=!1,centerText:h,centerTextSize:d,centerTextX:b,centerTextY:u,total:p="",totalY:m="90%",totalX:g="50%",totalTextAnchor:O="middle",completed:j="",completedY:f="65%",completedX:v="50%",completedTextAnchor:w="middle"}=this.props,y=.3*e,x=e-y/2,k=.3*e,S=2*x*Math.PI,I=.75*S,T=`${I} ${S}`,z=`rotate(135, ${e}, ${e})`,C=I-Math.min(Math.max(o,0),100)/100*I,D=d||e/2.5,A=e/5;return Object(i.h)(t,null,Object(i.h)("svg",{xmlns:"http://www.w3.org/2000/svg",class:l.a.svg,width:2*e,height:2*e+s,preserveAspectRatio:"none",ref:t=>this.svgRef=t},Object(i.h)("circle",{class:""+l.a.gaugeBackground,cx:e,cy:e,r:x,strokeWidth:y,strokeDasharray:T,strokeLinecap:"round",transform:z}),Object(i.h)("circle",{class:`${l.a[n]} ${l.a.gauge}`,cx:e,cy:e,r:x,stroke:"url(#grad)",strokeDasharray:T,strokeDashoffset:C,strokeLinecap:"round",strokeWidth:k,style:{transition:"stroke-dashoffset 0.3s"},transform:z}),a&&Object(i.h)("text",{class:`${l.a.gaugeText} ${l.a[n]}`,x:b||"50%",y:u||"50%","dominant-baseline":"middle","text-anchor":"middle","font-size":D},o," ",c),r&&Object(i.h)("text",{class:`${l.a.gaugeText} ${l.a[n]}`,x:b||"50%",y:u||"50%","dominant-baseline":"middle","text-anchor":"middle","font-size":D},h),j&&Object(i.h)("text",{class:`${l.a.gaugeText} ${l.a[n]}`,x:v,y:f,"dominant-baseline":"middle","text-anchor":w,"font-size":A},j),Object(i.h)("text",{class:`${l.a.gaugeText} ${l.a.secondary}`,x:g,y:m,"dominant-baseline":"middle","text-anchor":O,"font-size":A},p)))}})||o;e.a=d}).call(this,s("hosL").Fragment)},zUny:function(t,e,s){"use strict";(function(t){var n,a=s("hosL"),o=s("Utv1"),i=s("/eY4"),c=(s("OhSV"),s("fh8t")),r=s.n(c),l=s("ZOvn");const h=t=>(e,s)=>t.map(t=>{let n=1;return"-"===t[0]&&(n=-1,t=t.substring(1)),e[t]>s[t]?n:e[t]<s[t]?-n:0}).reduce((t,e)=>t||e,0);let d=Object(i.a)(n=class extends a.Component{constructor(...t){super(...t),this.chooseSubmenu=t=>{const e=t.target.closest("button").dataset.submenu;this.setState({submenu:e})},this.toggleInfo=()=>{const{showInfo:t}=this.state;this.setState({showInfo:!t})}}render(){const{id:e,onClickNav:s=(()=>{})}=this.props,{submenu:n="detailsIn",showInfo:i}=this.state,{appState:c,raceStore:d,userStore:b}=this.props.stores,{user:u={},teams:p=[]}=b,{language:m="en"}=u,{selectedClassIds:g=[]}=c,O=d.getClassById(g[0]);let j=O.checkpoints?O.checkpoints.find(t=>t.id===e):null;j=j||{};const{sortedContestants:f=[]}=d,v=O.results?O.results.slice().sort(h(["timestamp","-direction"])).filter(t=>t.checkpoint===e):null,w=v?v.filter(t=>"in"===t.direction):null,y=v?v.filter(t=>"out"===t.direction):null,x=v?v.slice().sort(h(["legTime","timestamp"])).filter(t=>"in"===t.direction):null,k=v?v.filter(t=>"scratched"===t.direction):null,S=O.checkpoints?O.checkpoints.find(t=>t.sortOrder===j.sortOrder-1):null,I=O.checkpoints?O.checkpoints.find(t=>t.sortOrder===j.sortOrder+1):null,T=O.results&&S?O.results.slice().filter(t=>t.checkpoint===S.id&&"out"===t.direction):null,z=O.results&&I?O.results.slice().filter(t=>t.checkpoint===I.id&&"in"===t.direction):null,C=j.image,D=j.topImage,A=l.a.displayNameShort(j),M=D||"./assets/checkpoint.png";return Object(a.h)(t,null,Object(a.h)("div",{class:"w-100 position-absolute",style:"z-index: -1; height: 18vh; top: 0px; left: 0px; background-size: cover; background-repeat: no-repeat; background-position: 50% 50%; background-color: #a0a0a0; "+(M?`background-image: url("${M}");`:"")}),I&&Object(a.h)("button",{class:"btn btn-link text-primary float-right mr-2 py-0",style:"font-size: 2.0em; line-height: 1.0em;",onClick:()=>s(I.id)},Object(a.h)("i",{class:"fas fa-angle-right"})),S&&Object(a.h)("button",{class:"btn btn-link text-primary float-right mr-2 py-0",style:"font-size: 2.0em; line-height: 1.0em;",onClick:()=>s(S.id)},Object(a.h)("i",{class:"fas fa-angle-left"})),Object(a.h)("div",{class:"d-flex position-relative",style:"margin-top: 16vh;"},Object(a.h)("div",{class:"position-relative text-center border rounded-circle imageRounded",style:"margin-top: -50px; "+(C?`background-image: url("${C}"); background-size: cover;`:"background-color: #c0c0c0;")},!C&&Object(a.h)("div",{class:"text-muted",style:"font-size: 35px; padding-top: 10px;"},A),Object(a.h)("div",{class:"rounded-pill-both px-2 text-center position-absolute bg-secondary font-weight-bold",style:"bottom: -8px; right: 0; "},j.sortOrder&&"n/a"!==j.sortOrder&&Object(a.h)(t,null,j.sortOrder))),Object(a.h)("div",{class:"flex-grow-1 pl-3 text-overflow mb-3",style:"line-height: 1.2em;"},Object(a.h)("h3",{class:"mb-2"},j.name),Object(a.h)("div",null,j.cellphone&&Object(a.h)(t,null,Object(a.h)("span",{class:"text-muted"},Object(a.h)("i",{class:"fas fa-phone"}))," ",Object(a.h)("a",{href:"tel:"+j.cellphone},j.cellphone)),j.email&&Object(a.h)(t,null,Object(a.h)("a",{class:"ml-3",href:"mailto:"+j.email},Object(a.h)("i",{class:"fas fa-envelope"}))),j.facebook&&Object(a.h)(t,null,Object(a.h)("a",{class:"ml-3",href:""+l.a.asFacebookLink(j.facebook)},Object(a.h)("i",{class:"fab fa-facebook"}))),j.instagram&&Object(a.h)(t,null,Object(a.h)("a",{class:"ml-3",href:""+l.a.asInstagramLink(j.instagram)},Object(a.h)("i",{class:"fab fa-instagram"}))),j.description&&Object(a.h)(t,null,Object(a.h)("a",{class:"ml-3 text-primary",onCLick:this.toggleInfo},Object(a.h)("i",{class:"fas fa-info-circle"})))))),i&&j.description&&Object(a.h)("div",null,Object(a.h)(r.a,{markdown:l.a.replaceImages(j.description,j.images),markdownOpts:l.a.getMarkdownOptions()})),Object(a.h)("div",{class:""},Object(a.h)("div",{class:""},Object(a.h)("div",{class:"d-flex justify-content-between mt-2"},Object(a.h)("div",{class:"flex-fill bg-light rounded-lg p-3 align-middle"},Object(a.h)("div",null,Object(a.h)("small",{class:"text-muted"},Object(a.h)("i",{class:"fas fa-flag"})," Start")),Object(a.h)("div",{class:"text-center"},o.a.format(j.totalDistance||0,0)," ",Object(a.h)("span",{class:"text-muted"},"km"))),!j.isStartLine&&Object(a.h)("div",{class:"flex-fill bg-light rounded-lg p-3 align-middle"},Object(a.h)("div",null,Object(a.h)("small",{class:"text-muted"},Object(a.h)("i",{class:"fas fa-arrow-down"})," Prev")),Object(a.h)("div",{class:"text-center"},Object(a.h)("nobr",null,o.a.format(j.distanceFromPrev||0,0)," ",Object(a.h)("span",{class:"text-muted"},"km")))),Object(a.h)("div",{class:"flex-fill bg-light rounded-lg p-3 align-middle"},Object(a.h)("div",null,Object(a.h)("small",{class:"text-muted"},Object(a.h)("i",{class:"fas fa-arrow-up"})," Next")),Object(a.h)("div",{class:"text-center"},o.a.format(j.distanceToNext||0,0)," ",Object(a.h)("span",{class:"text-muted"},"km"))),Object(a.h)("div",{class:"flex-fill bg-light rounded-lg p-3 align-middle"},Object(a.h)("div",null,Object(a.h)("small",{class:"text-muted"},Object(a.h)("i",{class:"fas fa-flag-checkered"})," Finish")),Object(a.h)("div",{class:"text-center"},Object(a.h)("nobr",null,o.a.format(j.distanceToFinish||0,0)," ",Object(a.h)("span",{class:"text-muted"},"km"))))),Object(a.h)("div",{class:"d-flex justify-content-between mt-2"},j.requiredRestMinutes&&Object(a.h)("div",{class:"flex-fill bg-light rounded-lg p-3 align-middle"},Object(a.h)("div",null,Object(a.h)("small",{class:"text-muted"},Object(a.h)("i",{class:"fas fa-bed"})," Mandatory rest")),Object(a.h)("div",{class:"text-center"},Object(a.h)("nobr",null,o.a.secToHms(60*j.requiredRestMinutes,!0)),j.timeEqualization&&Object(a.h)(t,null,Object(a.h)("span",{class:"text-muted ml-2"},"+")," ",Object(a.h)("i",{class:"fas fa-user-clock"})," Time Equalization")))))),j.hideResults?Object(a.h)(t,null):Object(a.h)(t,null,Object(a.h)("div",{class:"d-flex justify-content-center mb-3"},Object(a.h)("div",{class:"col px-0 pt-2"},Object(a.h)("button",{type:"button",class:`btn btn-block rounded-pill-left rounded-none ${"detailsIn"===n?"btn-primary":"btn-outline-primary"} text-nowrap`,style:"text-overflow: ellipsis; overflow: hidden;",onClick:this.chooseSubmenu,"data-submenu":"detailsIn"},"Details in")),Object(a.h)("div",{class:"col px-0 pt-2"},Object(a.h)("button",{type:"button",class:`btn btn-block rounded-none ${"detailsOut"===n?"btn-primary":"btn-outline-primary"} text-nowrap`,style:"text-overflow: ellipsis; overflow: hidden;",onClick:this.chooseSubmenu,"data-submenu":"detailsOut"},"Detail out")),Object(a.h)("div",{class:"col px-0 pt-2"},Object(a.h)("button",{type:"button",class:`btn btn-block rounded-pill-right rounded-none ${"legTimes"===n?"btn-primary":"btn-outline-primary"} text-nowrap`,style:"text-overflow: ellipsis; overflow: hidden;",onClick:this.chooseSubmenu,"data-submenu":"legTimes"},"Leg times"))),Object(a.h)("div",{class:"w-100 overflow-auto position-relative",style:"max-height: 60vh;"},Object(a.h)("div",{class:"table-responsive-lg"},Object(a.h)("table",{class:"table table-striped table-sm"},"detailsIn"===n&&Object(a.h)(t,null,Object(a.h)("thead",null,Object(a.h)("tr",null,Object(a.h)("th",null,"#"),Object(a.h)("th",null,"Musher"),Object(a.h)("th",null,"Time in"),Object(a.h)("th",null,"Time out"),Object(a.h)("th",null,"Time used"),Object(a.h)("th",null,"Avg speed"),Object(a.h)("th",null,"Dogs in"))),Object(a.h)("tbody",null,w&&w.map((e,s)=>{const n=parseInt(e.bib,10);let i=n?d.getMusherByBibId(n):null;i=i||{};const c=y.find(t=>t.bib===parseInt(e.bib,10)),r=w.find(t=>t.bib===parseInt(e.bib,10)),h=k.find(t=>t.bib===parseInt(e.bib,10)),b=T&&T.find(t=>t.bib===parseInt(e.bib,10));let u,p,g=0;return b&&e&&(u=l.a.deltaSec(b.timestamp,e.timestamp),g=j.distanceFromPrev/(u/3600)),r&&c&&r.timestamp&&c.timestamp&&(p=l.a.deltaSec(r.timestamp,c.timestamp)),Object(a.h)(t,null,Object(a.h)("tr",null,Object(a.h)("td",{class:"text-center"},s+1),Object(a.h)("td",null,Object(a.h)("div",{class:"d-flex flex-nowrap"},Object(a.h)("div",{class:"text-white font-weight-bolder pl-2 pr-1 py-0 rounded-pill-left rounded-none mr-2",style:`background-color: ${l.a.getRankingColor(s+1)}; width: 45px;`},e.bib),Object(a.h)("div",null,Object(a.h)("nobr",null,i.flag," ",i.lastname)))),Object(a.h)("td",{class:"text-center"},!j.isStartLine&&Object(a.h)(t,null,Object(a.h)("nobr",null,l.a.formatDate(r.timestamp,{locale:m,day:"numeric",month:"numeric",hour12:!1,hour:"2-digit",minute:"2-digit"})))),Object(a.h)("td",{class:"text-center"},c&&Object(a.h)(t,null,Object(a.h)("nobr",null,l.a.formatDate(c.timestamp,{locale:m,day:"numeric",month:"numeric",hour12:!1,hour:"2-digit",minute:"2-digit"}))),h&&Object(a.h)(t,null,Object(a.h)("nobr",{class:"text-danger"},Object(a.h)("i",{class:"fas fa-times"}),l.a.formatDate(h.timestamp,{locale:m,day:"numeric",month:"numeric",hour12:!1,hour:"2-digit",minute:"2-digit"})))),Object(a.h)("td",{class:"text-center"},!j.isStartLine&&Object(a.h)(t,null,Object(a.h)("nobr",null,o.a.secToHms(u,!0)))),Object(a.h)("td",{class:"text-center"},!j.isStartLine&&Object(a.h)(t,null,Object(a.h)("nobr",null,o.a.format(g||0,1)," ",Object(a.h)("span",{class:"text-muted font-weight-lighter"},"km/t")))),Object(a.h)("td",{class:"text-center"},e.dogs)))}))),"detailsOut"===n&&Object(a.h)(t,null,Object(a.h)("thead",null,Object(a.h)("tr",null,Object(a.h)("th",null,"#"),Object(a.h)("th",null,"Musher"),Object(a.h)("th",null,"Time in"),Object(a.h)("th",null,"Time out"),Object(a.h)("th",null,"Time used"),Object(a.h)("th",null,"Rest in cp"),Object(a.h)("th",null,"Avg speed"),Object(a.h)("th",null,"Dogs out"),Object(a.h)("th",null,"Next CP"))),Object(a.h)("tbody",null,y&&y.map((e,s)=>{const n=parseInt(e.bib,10);let i=n?d.getMusherByBibId(n):null;i=i||{};const c=w.find(t=>t.bib===parseInt(e.bib,10)),r=y.find(t=>t.bib===parseInt(e.bib,10)),h=k.find(t=>t.bib===parseInt(e.bib,10)),b=T&&T.find(t=>t.bib===parseInt(e.bib,10)),u=z&&z.find(t=>t.bib===parseInt(e.bib,10));let p,g,O,f=0;b&&e&&(p=l.a.deltaSec(b.timestamp,e.timestamp),f=j.distanceFromPrev/(p/3600)),c&&r&&c.timestamp&&r.timestamp&&(g=l.a.deltaSec(c.timestamp,r.timestamp));let v=j.estTimeToCpMinutes||0;return v&&i.cpSortOrder===j.sortOrder&&(O=l.a.addDeltaSec(r.timestamp,60*v)),Object(a.h)(t,null,Object(a.h)("tr",null,Object(a.h)("td",{class:"text-center"},s+1),Object(a.h)("td",null,Object(a.h)("div",{class:"d-flex flex-nowrap"},Object(a.h)("div",{class:"text-white font-weight-bolder pl-2 pr-1 py-0 rounded-pill-left rounded-none mr-2",style:`background-color: ${l.a.getRankingColor(s+1)}; width: 45px;`},e.bib),Object(a.h)("div",null,Object(a.h)("nobr",null,i.flag," ",i.lastname)))),Object(a.h)("td",{class:"text-center"},!j.isStartLine&&Object(a.h)(t,null,Object(a.h)("nobr",null,l.a.formatDate(c.timestamp,{locale:m,day:"numeric",month:"numeric",hour12:!1,hour:"2-digit",minute:"2-digit"})))),Object(a.h)("td",{class:"text-center"},r&&Object(a.h)(t,null,Object(a.h)("nobr",null,l.a.formatDate(r.timestamp,{locale:m,day:"numeric",month:"numeric",hour12:!1,hour:"2-digit",minute:"2-digit"}))),h&&Object(a.h)(t,null,Object(a.h)("nobr",{class:"text-danger"},Object(a.h)("i",{class:"fas fa-times"}),l.a.formatDate(h.timestamp,{locale:m,day:"numeric",month:"numeric",hour12:!1,hour:"2-digit",minute:"2-digit"})))),Object(a.h)("td",{class:"text-center"},!j.isStartLine&&Object(a.h)(t,null,Object(a.h)("nobr",null,o.a.secToHms(p,!0)))),Object(a.h)("td",{class:"text-center"},!j.isStartLine&&g&&Object(a.h)(t,null,Object(a.h)("nobr",null,o.a.secToHms(g,!0)))),Object(a.h)("td",{class:"text-center"},!j.isStartLine&&Object(a.h)(t,null,Object(a.h)("nobr",null,o.a.format(f||0,1)," ",Object(a.h)("span",{class:"text-muted font-weight-lighter"},"km/t")))),Object(a.h)("td",{class:"text-center"},r.dogs),Object(a.h)("td",{class:"text-center"},!j.isFinishLine&&u?Object(a.h)(t,null,Object(a.h)("nobr",null,l.a.formatDate(u.timestamp,{locale:m,day:"numeric",month:"numeric",hour12:!1,hour:"2-digit",minute:"2-digit"}))):Object(a.h)(t,null,O&&Object(a.h)(t,null,Object(a.h)("nobr",{class:"text-muted"},l.a.formatDate(O,{locale:m,day:"numeric",month:"numeric",hour12:!1,hour:"2-digit",minute:"2-digit"})))))))}))),"legTimes"===n&&Object(a.h)(t,null,Object(a.h)("thead",null,Object(a.h)("tr",null,Object(a.h)("th",null,"#"),Object(a.h)("th",null,"Musher"),Object(a.h)("th",null,"Time in"),Object(a.h)("th",null,"Time out"),Object(a.h)("th",null,"Time used"),Object(a.h)("th",null,"Avg speed"),Object(a.h)("th",null,"Dogs in"))),Object(a.h)("tbody",null,x&&x.map((e,s)=>{const n=parseInt(e.bib,10);let i=n?d.getMusherByBibId(n):null;i=i||{};const c=w.find(t=>t.bib===parseInt(e.bib,10)),r=y.find(t=>t.bib===parseInt(e.bib,10)),h=k.find(t=>t.bib===parseInt(e.bib,10)),b=T&&T.find(t=>t.bib===parseInt(e.bib,10));let u,p=0;return b&&e&&(u=l.a.deltaSec(b.timestamp,e.timestamp),p=j.distanceFromPrev/(u/3600)),Object(a.h)(t,null,Object(a.h)("tr",null,Object(a.h)("td",{class:"text-center"},s+1),Object(a.h)("td",null,Object(a.h)("div",{class:"d-flex flex-nowrap"},Object(a.h)("div",{class:"text-white font-weight-bolder pl-2 pr-1 py-0 rounded-pill-left rounded-none mr-2",style:`background-color: ${l.a.getRankingColor(s+1)}; width: 45px;`},e.bib),Object(a.h)("div",null,Object(a.h)("nobr",null,i.flag," ",i.lastname)))),Object(a.h)("td",{class:"text-center"},!j.isStartLine&&Object(a.h)(t,null,Object(a.h)("nobr",null,l.a.formatDate(c.timestamp,{locale:m,day:"numeric",month:"numeric",hour12:!1,hour:"2-digit",minute:"2-digit"})))),Object(a.h)("td",{class:"text-center"},r&&Object(a.h)(t,null,Object(a.h)("nobr",null,l.a.formatDate(r.timestamp,{locale:m,day:"numeric",month:"numeric",hour12:!1,hour:"2-digit",minute:"2-digit"}))),h&&Object(a.h)(t,null,Object(a.h)("nobr",{class:"text-danger"},Object(a.h)("i",{class:"fas fa-times"}),l.a.formatDate(h.timestamp,{locale:m,day:"numeric",month:"numeric",hour12:!1,hour:"2-digit",minute:"2-digit"})))),Object(a.h)("td",{class:"text-center"},!j.isStartLine&&Object(a.h)(t,null,Object(a.h)("nobr",null,o.a.secToHms(u,!0)))),Object(a.h)("td",{class:"text-center"},!j.isStartLine&&Object(a.h)(t,null,Object(a.h)("nobr",null,o.a.format(p||0,1)," ",Object(a.h)("span",{class:"text-muted font-weight-lighter"},"km/t")))),Object(a.h)("td",{class:"text-center"},e.dogs)))}))))))))}})||n;e.a=d}).call(this,s("hosL").Fragment)},zYNi:function(t,e,s){"use strict";(function(t){function n(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,n)}return s}function a(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?n(Object(s),!0).forEach((function(e){o(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):n(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}function o(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}var i,c,r,l,h=s("hosL"),d=(s("QRet"),s("Utv1")),b=s("/eY4"),u=s("OhSV"),p=(s("Y3FI"),s("fh8t")),m=s.n(p),g=(s("go65"),s("HQo+")),O=s("wanP"),j=s("ZQlJ"),f=s("s4FZ"),v=s("q/oJ"),w=s("cH0S"),y=s("fVsX"),x=s("8n2v"),k=s("gWxU"),S=s("Nanz"),I=s("zUny"),T=(s("bbv7"),s("ukv5")),z=(s("eQ6k"),s("e0EM")),C=s("ZOvn");const D=C.a.marginTop(!0,!1),A=(C.a.marginTopBack(!1),C.a.marginBottom(),C.a.subMenuMarginTop(),{isLoading:!1,email:"",submenu:"ads",jwtToken:d.a.getJwtToken(),reloadInSec:null,reloadIsActive:!1,leaderboardMode:"mushers",filterByraceClass:"",showLeaderBoard:!0,showNews:!0});let M=Object(b.a)(i=class extends h.Component{constructor(t){super(t),this.initComponent=()=>{this.setState({reloadIsActive:!0},()=>this.tickReloadTimeer())},this.tickReloadTimeer=()=>{const{reloadLastEpoch:t}=this.props,{reloadIsActive:e}=this.state;if(e){const e=Math.floor((new Date).getTime()/1e3);this.setState({reloadInSec:60-(e-t)}),clearTimeout(this.updateTimer.tick),this.updateTimer.tick=setTimeout(()=>this.tickReloadTimeer(),1e3)}return!1},this.state=a({},A),this.updateTimer={}}componentDidMount(){this.initComponent()}componentWillUnmount(){clearTimeout(this.updateTimer.tick)}render(){const{reloadInSec:e}=this.state,{radius:s=13,fontSize:n=11,classNames:a=""}=this.props,o=Math.floor(d.a.normalizeBetween(e,0,60,0,100));return Object(h.h)(t,null,Object(h.h)("span",{class:a},Object(h.h)(O.a,{key:"gauge-reload-page",color:"primary",radius:s,showPercentText:!1,percent:o,showCenterText:!0,centerText:e,centerTextSize:n,centerTextY:"55%"})))}})||i,U=Object(b.a)(c=class extends h.Component{constructor(t){super(t),this.chooseSubmenu=t=>{const e=t.target.closest("button").dataset.submenu;this.setState({submenu:e})},this.state={}}render(){const{raceStore:e,userStore:s}=this.props.stores,{submenu:n="details"}=this.state,{waypoints:a}=e,{raceClass:o={},race:i={},onMarkerClick:c=(()=>{})}=this.props;return Object(h.h)(t,null,Object(h.h)("div",{class:"d-flex justify-content-center align-items-center mb-2"},Object(h.h)("span",{style:"font-size: 1.3em;"},Object(h.h)(u.c,{id:"races.gps-ranking"},"GPS Ranking"),": ",i.title," - ",o.title)),Object(h.h)("div",{class:"w-100 overflow-auto",style:"max-height: 60vh;"},!a||0===a.length&&Object(h.h)(t,null,Object(h.h)("div",{class:"text-center text-muted"},Object(h.h)("div",{class:"display-1"},Object(h.h)("i",{class:"fas fa-dog"})),Object(h.h)("div",{class:"w-100"},Object(h.h)("h3",null,Object(h.h)(u.c,{id:"races.no-teams-found"},"No teams found!")),Object(h.h)(u.c,{id:"races.loading-teams"},"Loading teams...")),Object(h.h)("div",{class:"spinner-border text-primary",style:"width: 3rem; height: 3rem;",role:"status"},Object(h.h)("span",{class:"sr-only"},"Loading...")))),Object(h.h)("table",{class:"table table-sm table-striped"},a&&a.map((e,s)=>{const n=d.a.format(e.restTime/e.raceTime*100,0);C.a.displayNameShort(e);return Object(h.h)(t,null,Object(h.h)("tr",{onClick:()=>c(e)},Object(h.h)("td",{style:"width: 15px;",class:"text-center"},e.rank),Object(h.h)("td",null,Object(h.h)("div",{class:"d-flex justify-content-between align-items-start w-100"},Object(h.h)("div",{class:"flex-grow-1"},Object(h.h)("div",{class:"float-right ml-2"},Object(h.h)("div",{class:"text-center"},Object(h.h)(O.a,{key:"gauge-reload-page",color:n<40?n<30?"danger":"warning":"success",radius:30,showPercentText:!1,percent:n,showCenterText:!0,centerText:n+"%",centerTextSize:15,centerTextY:"55%"}))),Object(h.h)("div",{class:"float-right"},e.finishTime<9999999999?Object(h.h)(t,null,Object(h.h)("i",{class:"fas fa-flag-checkered text-success"})):Object(h.h)(t,null,"rest"===e.currentState?Object(h.h)(t,null,Object(h.h)("i",{class:"fas fa-bed text-warning"})):Object(h.h)(t,null,Object(h.h)("i",{class:"fas fa-running text-primary"})))),Object(h.h)("span",{class:"text-white rounded-pill-left px-2 mr-2",style:`background-color: ${C.a.getRankingColor(e.rank||s+1)};`},e.bib),e.flag,"  ",e.title,Object(h.h)("div",null,Object(h.h)("small",null,e.finishTime<9999999999?Object(h.h)(t,null,e.diffToFirstFinishTime>0?Object(h.h)(t,null,Object(h.h)("span",{class:"text-muted"},Object(h.h)("i",{class:"fas fa-arrow-up"}))," ",d.a.secToHms(e.diffToFirstFinishTime)):Object(h.h)(t,null,Object(h.h)("span",{class:"text-muted"},Object(h.h)("i",{class:"fas fa-flag-checkered"}))," ",d.a.formatDate(d.a.parseInputDate(e.finishTime),{locale:"no-NB",hour12:!1,hour:"2-digit",minute:"2-digit"})),Object(h.h)("nobr",null,Object(h.h)("i",{class:"fas fa-running text-muted"})," ",d.a.secToHms(e.raceTime)),Object(h.h)("nobr",null,Object(h.h)("i",{class:"fas fa-bed ml-2 text-muted"})," ",d.a.format(e.restTime/e.raceTime*100,0),"%")):Object(h.h)(t,null,Object(h.h)("nobr",null,Object(h.h)("span",{class:"text-muted"},Object(h.h)("i",{class:"fas fa-flag-checkered"}))," ",d.a.format(e.distanceToFinish,1)," km"),e.distanceToFinish!==e.distanceToFirst&&e.distanceToFirst>0&&Object(h.h)(t,null,Object(h.h)("nobr",null,Object(h.h)("span",{class:"text-muted font-weight-light ml-2"},"1st:")," ",d.a.format(e.distanceToFirst,1)," km")),e.distanceToFinish!==e.distanceToForward&&e.distanceToForward>0&&Object(h.h)(t,null,Object(h.h)("nobr",null,Object(h.h)("span",{class:"text-muted ml-2"},Object(h.h)("i",{class:"fas fa-arrow-up"}))," ",d.a.format(e.distanceToForward,1)," km")),e.distanceToBehind>0&&Object(h.h)(t,null,Object(h.h)("nobr",null,Object(h.h)("span",{class:"text-muted ml-2"},Object(h.h)("i",{class:"fas fa-arrow-down"}))," ",d.a.format(e.distanceToBehind,1)," km")),Object(h.h)("br",null),Object(h.h)("nobr",null,Object(h.h)("span",{class:"text-muted"},Object(h.h)("i",{class:"fas fa-tachometer-alt"}))," ",d.a.format((e.currentAvgSpeed?3.6*e.currentAvgSpeed:e.speed)||0,1)," km/h"),Object(h.h)("nobr",null,Object(h.h)("i",{class:"fas fa-running ml-2 text-muted"})," ",d.a.secToHms(e.raceTime)),Object(h.h)("nobr",null,Object(h.h)("i",{class:"fas fa-bed ml-2 text-muted"})," ",d.a.format(e.restTime/e.raceTime*100,0),"%")))))),Object(h.h)("div",{class:"mt-1 container-fluid"},Object(h.h)(T.a,{stores:this.props.stores,states:e.states,duration:e.raceTime,key:"state-"+e.bib,height:"6px",showText:!1})))))}))))}})||c,P=Object(b.a)(r=class extends h.Component{constructor(t){super(t),this.toggleAdminInfo=t=>{t.stopPropagation();const{showAdminInfo:e}=this.state;this.setState({showAdminInfo:!e})},this.toggleInfo=t=>{t.stopPropagation();const{showInfo:e}=this.state;this.setState({showInfo:!e})},this.onDogClick=(t,e,s)=>{t.preventDefault(),t.stopPropagation();const n=s.find(t=>t.uuidv4===e);return this.setState({currentDog:n,showDog:e,dogs:s}),!1},this.chooseSubmenu=t=>{const e=t.target.closest("button").dataset.submenu;this.setState({submenu:e})},this.state={}}render(){const{raceStore:e,userStore:s}=this.props.stores,{showAdminInfo:n,submenu:a="details",showDog:o,currentDog:i={}}=this.state,{wpData:c={},onMarkerClick:r=(()=>{})}=this.props,l=e.findWaypointByBib(c.bib),{isAdmin:b}=s,{user:p={}}=s,g=(c.bib?e.getMusherByBibId(c.bib):e.getMusherByBibEmail(c.email))||{},O=e.getTeamById(g.team),v=O.members?O.members.find(t=>t.email===g.email):{},w=(e.getClassByBib(c.bib),e.getTotalsByTeamId(g.team)),y=C.a.getImage({user:v,team:O,priority:"user",fallback:g.image1}),x=C.a.displayNameShort(v)||C.a.displayNameShort(g),k=C.a.getRankingColor(l.rank),S=C.a.hasBirthday(i.birth),I=i.birth?Math.ceil(C.a.daysUntilNextBirthday(i.birth)):365,{inFront:T,behind:D}=e.findNearestMushers(c.bib),A=(d.a.format(l.restTime/l.raceTime*100,0),O&&O.imageHeader&&O.imageHeader.s3XXLargeLink?O.imageHeader:{s3XXLargeLink:g.topImage1||"./assets/homerun-race-logo.png"}),M=O&&O.images?[...O.images]:[];for(let t=0,e=3;t<e;t+=1)g["image"+t]&&M.push({s3SmallLink:g["image"+t],s3LargeLink:g["image"+t]});O.members&&O.members.indexOf(p.id),O.followers&&O.followers.indexOf(p.id),O.followRequests&&O.followRequests.findIndex(t=>t.id===p.id),Math.floor((new Date).getTime()/1e3);return Object(h.h)(t,null,D.bib&&Object(h.h)("button",{class:"btn btn-link text-primary mx-2 py-0 float-right",onClick:()=>r(D),style:"line-height: 1.0em; font-size: 2.0em;"},Object(h.h)("i",{class:"fas fa-angle-right"})),T.bib&&Object(h.h)("button",{class:"btn btn-link text-primary mx-2 py-0 float-right",onClick:()=>r(T),style:"line-height: 1.0em; font-size: 2.0em;"},Object(h.h)("i",{class:"fas fa-angle-left"})),Object(h.h)("div",{class:"d-flex justify-content-center align-items-center mb-2"},Object(h.h)("span",{style:"font-size: 1.3em; height: 16vh;"}," ")),Object(h.h)("div",{class:"w-100 overflow-auto",style:"max-height: 55vh;"},Object(h.h)("div",{class:"w-100 position-absolute",style:"z-index: -1; height: 18vh; top: 0px; left: 0px; background-size: cover; background-repeat: no-repeat; background-position: 50% 30%; background-color: #a0a0a0; "+(A?`background-image: url("${A.s3XXLargeLink}");`:"")}),Object(h.h)("div",{class:"d-flex position-relative"},Object(h.h)("div",{class:"position-relative text-center border rounded-circle imageRounded imageRoundedMedium",style:y?`background-image: url("${y}"); background-size: cover;`:""},!y&&Object(h.h)("div",{class:"text-muted",style:"font-size: 25px; padding-top: 5px;"},x),Object(h.h)("div",{class:`rounded-pill-both px-2 text-center position-absolute ${k?"":"bg-secondary"} font-weight-bold`,style:"bottom: -20px; right: 0; "+(k?`background-color: ${k};`:"")},g.bib&&"n/a"!==g.bib&&Object(h.h)(t,null,g.bib))),Object(h.h)("div",{class:"flex-grow-1 pl-3 text-overflow mb-3",style:"line-height: 1.8em;"},Object(h.h)("div",{class:"float-right",style:"font-size: 1.2em;"},l.finishTime<9999999999?Object(h.h)(t,null,Object(h.h)("i",{class:"fas fa-flag-checkered text-success"})):Object(h.h)(t,null,"rest"===l.currentState?Object(h.h)(t,null,Object(h.h)("i",{class:"fas fa-bed text-warning"})):Object(h.h)(t,null,Object(h.h)("i",{class:"fas fa-running text-primary"})))),Object(h.h)("h3",{class:"mb-0"},g.flag," ",g.firstname," ",g.lastname),Object(h.h)("h6",{class:"mb-0"},g.sportsClub||Object(h.h)(t,null," ")))),Object(h.h)("div",{class:"d-flex justify-content-center mb-3"},Object(h.h)("div",{class:"col px-0 pt-2"},Object(h.h)("button",{type:"button",class:`btn btn-block rounded-pill-left rounded-none ${"details"===a?"btn-primary":"btn-outline-primary"} text-nowrap`,style:"text-overflow: ellipsis; overflow: hidden;",onClick:this.chooseSubmenu,"data-submenu":"details"},"Details")),Object(h.h)("div",{class:"col px-0 pt-2"},Object(h.h)("button",{type:"button",class:`btn btn-block rounded-none ${"team"===a?"btn-primary":"btn-outline-primary"} text-nowrap`,style:"text-overflow: ellipsis; overflow: hidden;",onClick:this.chooseSubmenu,"data-submenu":"team"},"Team")),Object(h.h)("div",{class:"col px-0 pt-2"},Object(h.h)("button",{type:"button",class:`btn btn-block rounded-pill-right rounded-none ${"dogs"===a?"btn-primary":"btn-outline-primary"} text-nowrap`,style:"text-overflow: ellipsis; overflow: hidden;",onClick:this.chooseSubmenu,"data-submenu":"dogs"},"Dogs"))),Object(h.h)("div",{class:"w-100 overflow-auto position-relative"},"details"===a&&Object(h.h)(t,null,Object(h.h)(z.a,{stores:this.props.stores,wp:l,musher:g})),"team"===a&&Object(h.h)(t,null,O.public>0?Object(h.h)(t,null,Object(h.h)("h3",null,O.name),Object(h.h)(m.a,{markdown:C.a.replaceImages(O.description,O.images),markdownOpts:C.a.getMarkdownOptions()}),Object(h.h)(f.a,{stores:this.props.stores,images:M})):Object(h.h)(t,null,Object(h.h)("div",{class:"text-center text-muted"},Object(h.h)("div",{class:"display-1"},Object(h.h)("i",{class:"fas fa-dog"})),Object(h.h)("h3",null,Object(h.h)(u.c,{id:"teams.no-public-team"},"No public team!")),Object(h.h)(u.c,{id:"teams.no-public-team"},"This team is not publicly visible."),M&&Object(h.h)("div",{class:"my-3"},Object(h.h)(f.a,{stores:this.props.stores,images:M}))))),"dogs"===a&&Object(h.h)(t,null,O.public>0?Object(h.h)(t,null,O.dogs&&Object(h.h)("div",{class:"w-100 container-fluid"},Object(h.h)("div",{class:"row pt-2"},Object(h.h)(j.a,{stores:this.props.stores,dogs:O.dogs.map(t=>t.id),allDogs:O.dogs,onDogClick:this.onDogClick}))),o&&Object(h.h)(t,null,Object(h.h)("div",{class:"d-flex mb-0 mt-3 position-relative"},Object(h.h)("div",{class:"text-center border rounded-circle imageRounded imageRoundedLarge text-muted pt-2",style:i.image?`background-image: url("${i.image.s3LargeLink}"); background-size: cover;`:""},!i.image&&Object(h.h)("span",{class:"font-weight-lighter",style:"font-size: 35px;"},d.a.ucfirst(i.name,!0))),Object(h.h)("div",{class:"flex-grow-1 pl-3 pr-2",style:`border-right: 4px solid ${s.findHarness(i.harness,"colorNonstop")} !important; line-height: 1.2em;`},Object(h.h)("h5",{class:"mb-1"},i.shortname||i.name," ",i.shortname&&""!==i.shortname&&Object(h.h)(t,null," - ",Object(h.h)("span",{class:"font-weight-lighter"},i.name)),S&&Object(h.h)(t,null,Object(h.h)("i",{class:"fas fa-birthday-cake ml-3"}))),Object(h.h)("div",null,I<7&&Object(h.h)(t,null,Object(h.h)("span",{class:"text-muted mr-2"},Object(h.h)("i",{class:"fas fa-birthday-cake"})," in ",I," days")),i.birth&&Object(h.h)("span",{class:"mr-2"},d.a.age(i.birth,i.deceased)),"female"===i.gender?Object(h.h)("i",{class:"fas fa-venus"}):Object(h.h)("i",{class:"fas fa-mars"})))))):Object(h.h)(t,null,Object(h.h)("div",{class:"text-center text-muted"},Object(h.h)("div",{class:"display-1"},Object(h.h)("i",{class:"fas fa-dog"})),Object(h.h)("h3",null,Object(h.h)(u.c,{id:"teams.no-public-team"},"No public team!")),Object(h.h)(u.c,{id:"teams.no-public-team"},"This team is not publicly visible.")))),b&&Object(h.h)("div",{style:"max-height: 200px; max-width: 70vw; overflow: auto;"},Object(h.h)("button",{class:"btn btn-link btn-block",onClick:this.toggleAdminInfo},"Toggle admin info"),n&&Object(h.h)(t,null,Object(h.h)("small",null,Object(h.h)("xmp",null,"musher: ",JSON.stringify(g,null,4),Object(h.h)("br",null),"user: ",JSON.stringify(v,null,4),Object(h.h)("br",null),"team: ",JSON.stringify(O,null,4),Object(h.h)("br",null),"totals: ",JSON.stringify(w,null,4),Object(h.h)("br",null))))))))}})||r,L=Object(b.a)(l=class extends h.Component{constructor(t){var e;super(t),e=this,this.handleHistoryPointIndex=t=>{const e=parseInt(t.target.value,10);clearTimeout(this.updateTimer.reload),this.setState({historyPointIndex:e,timerRunning:!1},()=>{const{historyPointIndex:t}=this.state,{raceStore:e}=this.props.stores;e.updateWaypointPosition(Math.abs(t))})},this.playHistory=()=>{clearTimeout(this.updateTimer.reload);const{historyPointIndex:t,replaySpeed:e}=this.state,{raceStore:s}=this.props.stores,n=s.getRaceTrackerTimestamp(t+1),o={historyPointIndex:t+1,timerRunning:!1,playingHistory:!0};n&&(o.raceTrackerPointTimestamp=n),this.setState(a({},o),()=>{s.updateWaypointPosition(Math.abs(t+1))}),clearTimeout(this.updateTimer.history),this.updateTimer.history=setTimeout(()=>{this.playHistory()},1e3*e)},this.pauseHistory=()=>{clearTimeout(this.updateTimer.history),this.setState({playingHistory:!1})},this.loadLiveRaceResults=async function(t=e.props,{teamIds:s,focusOnMushers:n,bibs:a,classid:o,historySteps:i}){const{raceStore:c,userStore:r}=t.stores,{race:l}=c,{replayHistory:h,timerRunning:d}=e.state,{showDrawerReplay:b}=e.props,u=c.getClassById(o)||{},{isAdmin:p}=r;await c.getRaceTrackerData(l.raceTrackerRace,{historySteps:i,history:h||b,bibs:a,classid:o,startDate:u.startDate,endDate:u.endDate,isAdmin:p}),c.getRaceTrackerActiveTeams(s,n,a),d&&(clearTimeout(e.updateTimer.reload),e.updateTimer.reload=setTimeout(()=>{console.log("loadLiveRaceResults.reloading...");const t=Math.floor((new Date).getTime()/1e3);e.setState({reloadLastEpoch:t}),e.loadLiveRaceResults(e.props,{teamIds:s,focusOnMushers:n,bibs:a,classid:o,historySteps:i})},6e4))},this.loadRaceResults=async function(t=e.props,s,n){const{raceStore:a}=t.stores,{raceid:o}=t,{timerRunning:i}=e.state;await a.loadWorkoutSummary(s,o),a.getWorkoutSummaryActiveTeams(s,n),i&&(clearTimeout(e.updateTimer.reload),e.updateTimer.reload=setTimeout(()=>{const t=Math.floor((new Date).getTime()/1e3);e.setState({reloadLastEpoch:t}),e.loadRaceResults(e.props,s,n)},6e4))},this.loadRace=async function(t=e.props){try{e.setState({isLoading:!0});const{raceStore:s,appState:n}=t.stores,{raceid:a,classid:o,filterByBibs:i,historySteps:c}=t;await s.load(a),s.getAllClassesSortedBy();const{race:r}=s,{focusOnMushers:l}=n,{selectedClassIds:h=[]}=n,d=null==r?void 0:r.classes.map(t=>t.id);let b=o||h[0];-1===d.indexOf(b)&&(b=d[0],n.setSelectedClassId(b)),o&&n.toggleSelectedClassId(o,!0);const u=r.classes.filter(t=>t.id===b).filter(t=>t.contestants&&t.contestants.length>0).map(t=>t.contestants.filter(t=>t.team>0).map(t=>t.team)).flat(),p=i||r.classes.filter(t=>t.id===b).filter(t=>t.contestants&&t.contestants.length>0).map(t=>t.contestants.filter(t=>t.bib>0).map(t=>t.bib)).flat();u.length>0&&await s.loadTeams(u.join(","),!1,!0,!0),r.liveRace>0?await e.loadLiveRaceResults(e.props,{teamIds:u,focusOnMushers:l,bibs:p,classid:b,historySteps:c}):await e.loadRaceResults(e.props,u,l),e.setState({isLoading:!1})}catch(t){console.log(t)}},this.setLeaderboardMode=t=>{this.setState({leaderboardMode:t.target.parentElement.dataset.mode||t.target.dataset.mode})},this.chooseRaceClass=t=>{this.setState({filterByraceClass:t.target.value})},this.toggleShowLeaderBoard=t=>{const{showLeaderBoard:e}=this.state;this.setState(!0===t?{showLeaderBoard:!1}:{showLeaderBoard:!e})},this.toggleShowNews=t=>{const{showNews:e}=this.state;this.setState(!0===t?{showNews:!1}:{showNews:!e})},this.closeAllDrawers=()=>{this.setState({showResults:!1,showDrawerCheckpoint:!1,showDrawerMusher:!1})},this.onMarkerClick=t=>{this.closeAllDrawers(),this.setState({showDrawerMusher:!0,wpData:t})},this.onMusherClick=t=>{this.setState({showDrawerMusher:!0,wpData:t})},this.onCpMarkerClick=t=>{if(!t||!t.id)return null;this.closeAllDrawers(),this.setState({selectedCheckpointId:t.id,showDrawerCheckpoint:!0,cpData:t})},this.toggleDrawerMusher=()=>{const{showDrawerMusher:t}=this.state;this.setState({showDrawerMusher:!t})},this.toggleDrawerCheckpoint=()=>{const{showDrawerCheckpoint:t}=this.state;this.setState({showDrawerCheckpoint:!t})},this.toggleResults=()=>{const{showResults:t}=this.state;this.closeAllDrawers(),this.setState({showResults:!t})},this.selectCheckpoint=t=>{this.closeAllDrawers(),this.setState({selectedCheckpointId:t,showDrawerCheckpoint:!0,showDrawerMusher:!1,showDrawer:!1})},this.onTeamClick=(t,e)=>(t.preventDefault(),t.stopPropagation(),this.setState({showTeam:e}),!1),this.hideTeam=()=>{this.setState({showTeam:null})},this.onUserClick=t=>(t.preventDefault(),t.stopPropagation(),!1),this.onDogClick=(t,e,s)=>(t.preventDefault(),t.stopPropagation(),this.setState({showDog:e,dogs:s}),!1),this.hideDog=()=>{this.setState({showDog:null})},this.setReplaySpeed=t=>{const e=t.target.closest("button").dataset.speed;this.setState({replaySpeed:parseFloat(e)})},this.filterByClass=async function(t){try{const s=t.target.closest("button").dataset.id,{showDrawerReplay:n,historySteps:a,filterByBibs:o}=e.props,{replayHistory:i}=e.state;(i||n)&&e.toggleReplayHistory();const{appState:c,raceStore:r}=e.props.stores;r.cleanupMemoryClass(),c.toggleSelectedClassId(s,!0);const{race:l}=r,{focusOnMushers:h}=c,d=l.classes.filter(t=>t.id===s).filter(t=>t.contestants&&t.contestants.length>0).map(t=>t.contestants.filter(t=>t.team>0).map(t=>t.team)).flat(),b=o||l.classes.filter(t=>t.id===s).filter(t=>t.contestants&&t.contestants.length>0).map(t=>t.contestants.filter(t=>t.bib>0).map(t=>t.bib)).flat();e.setState({allTeamIds:d,bibs:b,selectedMusherBib:"",showDrawerCheckpoint:!1,showDrawerMusher:!1,showDrawer:!1}),d.length>0&&await r.loadTeams(d.join(","),!1,!0,!0),l.liveRace>0?await e.loadLiveRaceResults(e.props,{teamIds:d,focusOnMushers:h,bibs:b,classid:s,historySteps:a}):await e.loadRaceResults(e.props,d,h)}catch(t){console.log(t)}},this.toggleFocusOnMusher=t=>{try{const e=t.target.parentElement.dataset.musherid||t.target.dataset.musherid,{appState:s,raceStore:n}=this.props.stores;s.toggleFocusOnMusher(e);const{focusOnMushers:a=[],selectedClassIds:o=[]}=s,i=o[0],{race:c}=n,r=c.classes.filter(t=>t.id===i).filter(t=>t.contestants&&t.contestants.length>0).map(t=>t.contestants.filter(t=>t.bib>0).map(t=>t.bib)).flat();c.liveRace>0?n.getRaceTrackerActiveTeams(null,a,r):n.getWorkoutSummaryActiveTeams(null,a,r)}catch(t){console.log(t)}},this.toggleBib=()=>{try{const{bib:t}=this.state,{appState:e,raceStore:s}=this.props.stores,n=s.getMusherByBibId(t);e.toggleFocusOnMusher(n.id)}catch(t){console.log(t)}},this.checkForEnter=t=>{"Enter"===t.key&&this.toggleBib()},this.toggleReplayHistory=()=>{const{replayHistory:t}=this.state;clearTimeout(this.updateTimer.reload),this.setState({showDrawer:!1,historyPointIndex:0,replayHistory:!t,timerRunning:t},(async function(){await e.loadRace();const{historyPointIndex:s}=e.state,{raceStore:n}=e.props.stores,{maxPoints:a}=n;if(t)console.log("toggleReplayHistory: setting to maxPoints",a),n.updateWaypointPosition(Math.abs(a-1));else{console.log("toggleReplayHistory: setting to first points");for(let t=0,e=10;t<e;t+=1)n.updateWaypointPosition(Math.abs(s+t))}}))},this.toggleLines=()=>{const{showLines:t}=this.state;this.setState({showLines:!t})},this.state=a(a({},A),{},{reloadLastEpoch:Math.floor((new Date).getTime()/1e3),historyPointIndex:0,timerRunning:!0,replayHistory:!1,replaySpeed:1}),this.updateTimer={}}componentWillUnmount(){clearTimeout(this.updateTimer.reload),clearTimeout(this.updateTimer.history),clearTimeout(this.updateTimer.tick)}componentDidMount(){this.loadRace();try{const{width:t}=function(){const{innerWidth:t,innerHeight:e}=window;return{width:t,height:e}}();t<800&&(this.toggleShowLeaderBoard(!0),this.toggleShowNews(!0))}catch(t){console.log(t)}}componentWillReceiveProps(t){this.props.classid===t.classid&&this.props.showDrawerReplay===t.showDrawerReplay||this.loadRace(t)}render(){const{historyPointIndex:e,timerRunning:s,playingHistory:n,replaySpeed:a,raceTrackerPointTimestamp:o,showLines:i,allTeamIds:c}=this.state,{userStore:r,raceStore:l,appState:b}=this.props.stores,{user:u={},teams:p=[],isAdmin:O}=r,{language:j="en"}=u,{raceid:f,showHeader:T=!0,drawerClassNames:z,drawerWidth:A,showDrawerReplay:L,largeMarkers:R,isAnimatedMarkers:$,linkBase:B="/app-races/"}=this.props,{focusOnMushers:F=[],infoOnMushers:N=[],selectedClassIds:H=[]}=b,{reloadLastEpoch:_,showDrawerMusher:E,showDrawerCheckpoint:W,wpData:Z={},cpData:Y={},showResults:V,showTeam:J,showDog:X,replayHistory:q,selectedCheckpointId:G}=this.state,{waypoints:K,geoJSONs:Q,zoomToMarkers:tt,race:et,maxPoints:st}=l,nt=Z.bib?l.getMusherByBibId(Z.bib):l.getMusherByBibEmail(Z.email),at=l.getTeamById(nt.team),ot=l.getClassById(H[0])||{};let it=[];ot.waypoints&&ot.waypoints.length>0?it=ot.waypoints:ot.checkpoints&&ot.checkpoints.length>0&&(it=ot.checkpoints.slice().filter(t=>t.position&&t.position[0]).map(t=>({id:t.id,title:t.name,lat:t.position[0],lng:t.position[1]})));let ct=!0;if(et.countryRegexp&&u&&u.currentLocationGeocode){new RegExp(et.countryRegexp,"i").test(u.currentLocationGeocode.formattedCountry)&&(ct=!1)}return Object(h.h)(t,null,J&&Object(h.h)(v.a,null,Object(h.h)(k.default,{stores:this.props.stores,teamid:J,marginTop:"0px;",marginBottom:"0px;",back:this.hideTeam,hideTeam:this.hideTeam})),X&&Object(h.h)(v.a,null,Object(h.h)(S.default,{stores:this.props.stores,dogid:X,marginTop:"0px;",marginBottom:"0px;",back:this.hideDog,dogs:at.dogs})),T&&Object(h.h)(y.a,{height:D},Object(h.h)("div",{class:"d-flex justify-content-between align-items-center w-100"},Object(h.h)("div",{class:"d-flex align-items-center"},Object(h.h)("span",{class:"",style:"font-size: 2.3em;"},Object(h.h)("a",{href:`${B}${et.id}`},Object(h.h)("i",{class:"fas fa-angle-left"}))),Object(h.h)("span",{class:"ml-4 text-primary",style:"font-size: 1.4em;",onClick:this.toggleResults},Object(h.h)("i",{class:"fas fa-list-ol"})),Object(h.h)("span",{class:"ml-4 text-primary",style:"font-size: 1.4em;"},!et.resultsHide&&Object(h.h)("a",{href:`${B}${et.id}/results`},Object(h.h)("i",{class:"fas fa-stopwatch"})))),Object(h.h)("div",null,Object(h.h)("span",{class:"font-weight-normal text-white",style:"font-size: 1.2em;"},et.title)),et.liveRace>0?Object(h.h)(t,null,Object(h.h)("div",{class:"d-flex align-items-center text-primary",onClick:this.toggleReplayHistory},Object(h.h)("span",{class:""},"Replay"),Object(h.h)("span",{class:"ml-2",style:"font-size: 1.4em;"},Object(h.h)("i",{class:"fas fa-play"})))):Object(h.h)(t,null,Object(h.h)("div",{class:"d-flex align-items-center"}," "))),Object(h.h)("div",{class:"w-100 overflow-hidden"},Object(h.h)("div",{class:"d-flex flex-row flex-nowrap pb-2 px-1",style:"overflow: auto; scroll-snap-type: x mandatory;"},et.classes&&et.classes.map((e,s)=>Object(h.h)(t,null,Object(h.h)("div",{class:"col px-0 pt-0"},Object(h.h)("button",{type:"button",class:`btn btn-block ${C.a.getPillClass(et.classes.length,s)} rounded-none ${H.indexOf(e.id)>-1?"btn-primary":"btn-outline-primary"} text-nowrap`,style:"text-overflow: ellipsis; overflow: hidden;",onClick:this.filterByClass,"data-id":e.id},e.title))))))),ct?Object(h.h)(t,null,Object(h.h)("div",{class:"container-fluid position-relative p-0 w-100 h-100",style:`margin-top: ${T?D:0};`},et.id?Object(h.h)(t,null,Object(h.h)(g.a,{marginTop:D,stores:this.props.stores,raceid:f,waypoints:K,geoJSONs:i?Q:null,waypoints2:it,zoomToMarkers:tt,fullscreenMap:!0,onMarkerClick:this.onMarkerClick,onMarker2Click:this.onCpMarkerClick,showHeatmap:et.liveRace<1,allTeamIds:c,showTracks:et.liveRace>=1,selectedClassIds:H,showDistanceMarkers:!1,groupWaypoints:!1,focusOnMushers:F,largeMarkers:R,isAnimatedMarkers:$,replaySpeed:1e3*a})):Object(h.h)(t,null,Object(h.h)(x.a,{stores:this.props.stores})),s&&Object(h.h)("div",{class:"position-absolute",style:"top: 125px; left: 5px; z-index: 9999; width: 30px; height: 30px;"},Object(h.h)(M,{stores:this.props.stores,classNames:"float-right ml-2",reloadLastEpoch:_})),F&&F.length>0&&Object(h.h)(t,null,Object(h.h)("div",{class:"row mb-2",style:' background-color: #1C1F4C; background-image: url("https://themusher.app/assets/tv-single-background.jpg"); background-size: cover !important; background-position: 0 0; border-radius: 10px; '},Object(h.h)("div",{class:"col-12 text-white",style:"font-size: 1.3em;"},F&&F.map(e=>{const s=l.getMusherById(e);return Object(h.h)(t,null,Object(h.h)("div",null,Object(h.h)("nobr",null,Object(h.h)("span",{class:"mr-2",onClick:this.toggleFocusOnMusher,"data-musherid":s.id},F.indexOf(s.id)>-1?Object(h.h)("i",{class:"fas fa-times text-warning"}):Object(h.h)("i",{class:"far fa-star"})),Object(h.h)("span",{class:"text-right",style:"width: 50px; display: inline-block;"},s.bib)," ",s.flag," ",s.firstname," ",s.lastname,Object(h.h)("br",null))))})))),et.mapCredits&&Object(h.h)(t,null,Object(h.h)("div",{class:"position-absolute",style:"bottom: 30px; left: 7px; z-index: 9999; width: 100px; height: 40px;"},Object(h.h)(m.a,{markdown:C.a.replaceImages(et.mapCredits,et.images),markdownOpts:C.a.getMarkdownOptions()}))),(L||q)&&Object(h.h)(t,null,Object(h.h)(w.a,{stores:this.props.stores,onCloseClick:this.toggleReplayHistory,classNames:z,width:A},st>0?Object(h.h)(t,null,Object(h.h)("div",{class:"d-flex justify-content-center mx-3"},n?Object(h.h)(t,null,Object(h.h)("div",{class:"pl-1"},Object(h.h)("button",{class:"btn btn-warning",onClick:this.pauseHistory},Object(h.h)("i",{class:"fas fa-pause"})))):Object(h.h)(t,null,Object(h.h)("div",{class:"pl-1"},Object(h.h)("button",{class:"btn btn-success",onClick:this.playHistory},Object(h.h)("i",{class:"fas fa-play"})))),Object(h.h)("div",{class:"pl-2 pt-2 flex-grow-1"},Object(h.h)("input",{type:"range",class:"custom-range w-100",min:0,max:st,value:e,onInput:this.handleHistoryPointIndex}))),Object(h.h)("div",{class:"d-flex justify-content-center"},Object(h.h)("div",{class:"col px-0 pt-2"},Object(h.h)("button",{type:"button",class:`btn btn-block rounded-pill-left rounded-none ${1===a?"btn-secondary":"btn-outline-secondary"} text-nowrap`,style:"text-overflow: ellipsis; overflow: hidden;",onClick:this.setReplaySpeed,"data-speed":1},"60x")),Object(h.h)("div",{class:"col px-0 pt-2"},Object(h.h)("button",{type:"button",class:`btn btn-block rounded-none ${.5===a?"btn-secondary":"btn-outline-secondary"} text-nowrap`,style:"text-overflow: ellipsis; overflow: hidden;",onClick:this.setReplaySpeed,"data-speed":.5},"120x")),Object(h.h)("div",{class:"col px-0 pt-2"},Object(h.h)("button",{type:"button",class:`btn btn-block rounded-none ${.25===a?"btn-secondary":"btn-outline-secondary"} text-nowrap`,style:"text-overflow: ellipsis; overflow: hidden;",onClick:this.setReplaySpeed,"data-speed":.25},"240x")),Object(h.h)("div",{class:"col px-0 pt-2"},Object(h.h)("button",{type:"button",class:`btn btn-block right rounded-none ${.12===a?"btn-secondary":"btn-outline-secondary"} text-nowrap`,style:"text-overflow: ellipsis; overflow: hidden;",onClick:this.setReplaySpeed,"data-speed":.12},"480x")),Object(h.h)("div",{class:"col px-0 pt-2"},Object(h.h)("button",{type:"button",class:`btn btn-block rounded-pill-right rounded-none ${.05===a?"btn-secondary":"btn-outline-secondary"} text-nowrap`,style:"text-overflow: ellipsis; overflow: hidden;",onClick:this.setReplaySpeed,"data-speed":.05},"1000x"))),Object(h.h)("div",{class:"d-flex justify-content-center"},Object(h.h)("div",{class:"flex-grow-1 pt-0 font-weight-bolder text-center",style:"font-size: 1.1em;"},o&&Object(h.h)(t,null,d.a.formatDate(d.a.parseInputDate(o),{locale:"no-NB",hour12:!1,hour:"2-digit",minute:"2-digit"})),O&&Object(h.h)(t,null,"/ ",e)),O&&Object(h.h)(t,null,Object(h.h)("button",{class:"btn btn-danger mt-2 mr-4 rounded-pill-both rounded-none",onClick:this.toggleLines},Object(h.h)("i",{class:"fas fa-wave-square"})," Show lines")))):Object(h.h)(t,null,Object(h.h)("div",{class:"spinner-border text-primary",role:"status"},Object(h.h)("span",{class:"sr-only"},"Loading..."))))),V&&Object(h.h)(t,null,Object(h.h)(w.a,{stores:this.props.stores,onCloseClick:this.toggleResults,classNames:z,width:A},Object(h.h)(U,{stores:this.props.stores,raceClass:ot,race:et,onMarkerClick:this.onMusherClick}))),E&&Object(h.h)(t,null,Object(h.h)(w.a,{stores:this.props.stores,onCloseClick:this.toggleDrawerMusher,classNames:z,width:A},Object(h.h)(P,{stores:this.props.stores,wpData:Z,onMarkerClick:this.onMarkerClick,onTeamClick:this.onTeamClick,onUserClick:this.onUserClick,onDogClick:this.onDogClick}))),W&&Object(h.h)(t,null,Object(h.h)(w.a,{stores:this.props.stores,onCloseClick:this.toggleDrawerCheckpoint},Object(h.h)(I.a,{stores:this.props.stores,id:G,onClickNav:this.selectCheckpoint}))))):Object(h.h)(t,null,Object(h.h)("div",{class:"container-fluid position-relative p-0 w-100 h-100",style:`margin-top: ${T?D:0};`},Object(h.h)("div",{class:"text-center text-muted"},Object(h.h)("div",{class:"display-1"},Object(h.h)("i",{class:"fas fa-hand-paper"})),Object(h.h)("h3",null,"Not allowed to view tracking"),et.countryRegexpMessage))))}})||l;e.a=L}).call(this,s("hosL").Fragment)}}]);
//# sourceMappingURL=65.chunk.bdc24.esm.js.map