{"version":3,"sources":["webpack:///./components/track/index.js","webpack:///./routes/tracks/index.js"],"names":["Track","observer","Component","showModal","e","stopPropagation","preventDefault","this","setState","displayModal","currentImage","target","dataset","image","currentImageXXL","imagexxl","thumb","name","title","date","closeModal","toggleDate","showDate","state","render","track","props","class","close","style","s3SmallLink","href","id","onClick","util","formatDate","locale","formatDistance","Date","distanceKm","elevation","gpx","images","map","img","data-image","s3LargeLink","data-imagexxl","s3XXLargeLink","data-thumb","data-title","data-date","initialState","isLoading","Tracks","constructor","super","loadTracks","trackStore","stores","load","userStore","tracks","length"],"mappings":"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","file":"route-tracks.chunk.4701b.esm.js","sourcesContent":["import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\n\nimport Modal from '../modal';\n\n@observer\nclass Track extends Component {\n    showModal = (e) => {\n        e.stopPropagation();\n        e.preventDefault();\n        const img = e.target.dataset.image;\n        const imgXXL = e.target.dataset.imagexxl;\n        const thumb = e.target.dataset.thumb;\n        const name = e.target.dataset.name;\n        const title = e.target.dataset.title;\n        const date = e.target.dataset.date;\n        this.setState({\n            displayModal: true,\n            currentImage: img,\n            currentImageXXL: imgXXL,\n            thumb,\n            name,\n            title,\n            date,\n        });\n    }\n\n    closeModal = () => {\n        this.setState({\n            displayModal: false,\n        });\n    }\n\n    toggleDate = () => {\n        const { showDate } = this.state;\n        this.setState({ showDate: !showDate });\n    }\n\n    render() {\n        const { displayModal, currentImage, currentImageXXL, showDate, thumb, name, title, date } = this.state;\n        const { track } = this.props;\n        return (\n            <div class='w-100 mb-3'>\n                <div class='row'>\n                    {displayModal && <Modal close={this.closeModal} image={currentImage} imagexxl={currentImageXXL} thumb={thumb} name={name} title={title} date={date} />}\n\n                    <div class='col-12 col-sm-8 col-lg-6 offset-sm-2 offset-lg-3 d-flex mb-0 position-relative'>\n                        {/* {JSON.stringify(track, null, 4)} */}\n\n                        <div class={`text-center border rounded-circle imageRounded`} style={track.image ? `background-image: url(\"${track.image.s3SmallLink}\");` : ''}>\n                            {!track.image && <i class='fas fa-map-marked text-muted mt-3' style='font-size: 40px;' />}\n                        </div>\n                        <div class='flex-grow-1 pl-3' style='line-height: 1.2em;'>\n                            <a class='stretched-link' href={`/tracks/${track.id}`}>\n                                <h5 class='mb-1' style='line-height: 1.0em;'>{track.name}</h5>\n                            </a>\n                            <small class='text-muted'>\n                                {track.date && <small onClick={this.toggleDate}>\n                                    {showDate ? util.formatDate(track.date, { locale: 'no-NB' }) : util.formatDistance(track.date, new Date(), { locale: 'no-NB' })}<br />\n                                </small>}\n                            </small>\n                            <small class='text-muted'>\n                                <i class='fas fa-road' /> {track.distanceKm} km\n                                <i class='fas fa-mountain ml-2' /> {track.elevation} m\n                                {track.gpx && <i class='fas fa-map-marked-alt ml-2' />}\n                            </small>\n                        </div>\n                    </div>\n\n                    <div class='col-12 col-sm-8 col-lg-6 offset-sm-2 offset-lg-3 mt-1' style='padding-left: 122px;'>\n                        <div class='row'>\n                            {track.images && track.images.map(img => (\n                                <div class={`text-center border rounded imageRounded imageRoundedSmall`}\n                                    style={img ? `background-image: url(\"${img.s3SmallLink}\");` : ''}\n                                    onClick={this.showModal}\n                                    data-image={img.s3LargeLink}\n                                    data-imagexxl={img.s3XXLargeLink}\n                                    data-thumb={track.image && track.image.s3SmallLink}\n                                    data-title={track.name}\n                                    data-date={track.date}\n                                >\n                                    &nbsp;\n                                </div>\n                            ))}\n                        </div>\n                    </div>\n\n                </div>\n            </div>\n        );\n    }\n}\n\nexport default Track;\n","import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\n\nimport Track from '../../components/track';\n\nconst initialState = {\n\tisLoading: false,\n};\n\n@observer\nclass Tracks extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            ...initialState,\n        };\n\t\tthis.loadTracks();\n    }\n\n\tasync loadTracks() {\n\t\tthis.setState({ isLoading: true });\n\t\tconst { trackStore } = this.props.stores;\n\t\tawait trackStore.load();\n\t\tthis.setState({ isLoading: false });\n\t}\n\n\trender() {\n\t\tconst { isLoading } = this.state;\n\t\tconst { trackStore, userStore } = this.props.stores;\n\t\tconst { tracks } = trackStore;\n\t\tconst { user } = userStore;\n\t\treturn (\n\t\t\t<div class='container-fluid' style='margin-bottom: 100px; margin-top: 60px;'>\n\t\t\t\t<div class='row'>\n\t\t\t\t\t<div class='col-12'>\n\t\t\t\t\t\t<div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 px-0'>\n\t\t\t\t\t\t\t<h5>Treningsrundene dine - {tracks.length} stk</h5>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 px-0 clearfix mb-2'>\n\t\t\t\t\t\t\t<a class='btn btn-sm btn-primary float-right'\n\t\t\t\t\t\t\t\thref='/tracks/edit/new'\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<i class='fas fa-plus' /> Legg til runde\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t{!isLoading && tracks && tracks.length === 0 && (\n\t\t\t\t\t\t\t<div class='col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 text-muted'>\n\t\t\t\t\t\t\t\t<div class='text-center mb-5'>\n\t\t\t\t\t\t\t\t\t<div class='display-1'>\n\t\t\t\t\t\t\t\t\t\t<i class='fas fa-map-marked' />\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<h5>\n\t\t\t\t\t\t\t\t\t\tIngen runder er registrert ennå.\n\t\t\t\t\t\t\t\t\t</h5>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<p class='text-center'>\n\t\t\t\t\t\t\t\t\tDu har mulighet til å laste opp GPX-filer fra rundene dine. \n\t\t\t\t\t\t\t\t\tDet finnes mange apper som lar deg lage GPX-filer, men vi anbefaler\n\t\t\t\t\t\t\t\t\tViewRanger for <a href='https://apps.apple.com/gb/app/viewranger-hike-ride-or-walk/id404581674'>iOS</a> og\n\t\t\t\t\t\t\t\t\t&nbsp;<a href='https://play.google.com/store/apps/details?id=com.augmentra.viewranger.android&hl=en'>Android</a>.\n\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\tSlik kommer du i gang:\n\t\t\t\t\t\t\t\t<ol>\n\t\t\t\t\t\t\t\t\t<li>Trykk på knappen \"Legg til runde\" rett nedenfor.</li>\n\t\t\t\t\t\t\t\t</ol>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t)}\n\n\t\t\t\t\t\t{tracks && tracks.map(track => (\n\t\t\t\t\t\t\t<Track stores={this.props.stores} track={track} />\n\t\t\t\t\t\t))}\n\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nexport default Tracks;\n"],"sourceRoot":""}