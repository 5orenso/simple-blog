(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{B7Gj:function(t,e,s){"use strict";s.r(e),function(t){function o(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,o)}return s}function a(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}var r,n=s("hosL"),c=s("Utv1"),l=s("/eY4"),i=s("OhSV"),h=s("ZOvn"),u=s.n(h),b=s("JWe/"),d=(s("3pQw"),s("WAWY")),m=s("azdc"),p=s("3UPq"),O=s("pJjI"),f=s("wanP"),j=s("K9Qx"),g=s("bUJL"),y=s("4imK");const k=u.a.marginTop(!0),w=u.a.marginBottom(),v=u.a.subMenuMarginTop(),x={isLoading:!1,submenu:"totals",workoutFilter:()=>!0};let S=Object(l.a)(r=class extends n.Component{constructor(t){var e;super(t),e=this,this.loadWorkouts=async function(t=e.props){e.setState({isLoading:!0});const{workoutStore:s,userStore:o}=t.stores,{currentTeam:a}=s,r=(new Date).getMonth()+1,n=c.a.getYear(),{month:l=r,year:i=n}=t;await Promise.all([s.load({query:{team:a,year:i,month:l}}),e.loadWorkoutSummary(t),e.loadWorkoutPlans(t),o.getNotifications(),e.loadStravaActivities(),e.loadGarminActivities()]),e.setState({isLoading:!1})},this.loadWorkoutPlans=async function(t=e.props){e.setState({isLoading:!0});const{year:s}=t,o=(new Date).getMonth()+1,a=c.a.getYear(),r=parseInt(s||(o<6?a-1:a),10),{workoutPlanStore:n,workoutStore:l}=t.stores,{currentTeam:i}=l;if(n.updateItem("workoutPlans",[]),n.updateItem("workoutPlan",{}),n.resetGraphPlanWeekDistanceCurrent(),i){await n.load({query:{team:i,seasonYear:r,seasonMonth:6}});const{workoutPlans:t}=n,e=t[0]||{};e.id&&(await n.load(e.id),n.prepareWeekGraphs({year:s}))}e.setState({isLoading:!1})},this.chooseSubmenu=t=>{this.setState({submenu:t.target.parentElement.dataset.menu||t.target.dataset.menu})},this.chooseDay=({day:t,month:e,year:s})=>{const{dd:o,mm:a,yyyy:r}=this.state;if(console.log({day:t,month:e,year:s}),console.log({dd:o,mm:a,yyyy:r}),o===t&&a===e&&r===s)return this.setState({workoutFilter:()=>!0,dd:null,mm:null,yyyy:null});this.setState({dd:t,mm:e,yyyy:s,workoutFilter:o=>{const a=new Date(o.date),r=a.getDate(),n=a.getMonth()+1,c=a.getFullYear();return r===parseInt(t,10)&&n===parseInt(e,10)&&c===parseInt(s,10)}})},this.state=function(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?o(Object(s),!0).forEach((function(e){a(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):o(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}({},x)}async loadStravaActivities(){const{stravaActivityStore:t}=this.props.stores;t.load({query:{hideImported:1}})}async loadGarminActivities(){const{garminActivityDetailsStore:t}=this.props.stores;t.load({query:{hideImported:1}})}async loadWorkoutSummary(t=this.props){const{userStore:e,workoutStore:s}=t.stores,o=(new Date).getMonth()+1,a=c.a.getYear(),{month:r=o,year:n=a}=t,{currentTeam:l}=s;await e.getWorkoutSummary({team:l,year:n}),await e.getWorkoutSummaryDay({daysBack:500,team:l})}componentDidMount(){this.loadWorkouts()}componentWillReceiveProps(t){t.month===this.props.month&&t.year===this.props.year&&t.team===this.props.team||this.loadWorkouts(t)}render(){const{isLoading:e,submenu:s}=this.state,{userStore:o,appState:a,workoutStore:r,workoutPlanStore:l,stravaActivityStore:h,garminActivityDetailsStore:x}=this.props.stores,{workoutPlan:S,workoutPlans:P}=l,{user:$}=o,{language:D="no"}=$,W=u.a.getMonths(D),M=(new Date).getMonth()+1,I=c.a.getYear(),{month:L=M,year:T=I}=this.props,{currentTeam:_}=r,{darkmode:A}=a,{workouts:Y}=r,{workoutSummaryWeek:C=[]}=o,{workoutFilter:F}=this.state,G=Y.filter(F),R=l.sumWorkoutPlanMonth(parseInt(T,10),parseInt(L,10))||0,B=o.findWorkoutSummaryMonth(parseInt(T,10),parseInt(L,10))||0;let U;R&&(U=Math.floor(B/R*100));const z=o.findWorkoutSummaryMonth(parseInt(T,10),parseInt(L,10),"count",!0)||0,K=o.findWorkoutSummaryMonth(parseInt(T,10),parseInt(L,10),"distanceKm",!0)||0,q=o.findWorkoutSummaryMonth(parseInt(T,10),parseInt(L,10),"duration",!0)||0,E=o.findWorkoutSummaryMonth(parseInt(T,10),parseInt(L,10),"speedAvg",!0)||0,J=(o.findWorkoutSummaryMonth(parseInt(T,10),parseInt(L,10),"elevation",!0),parseInt(T||(M<6?I-1:I),10)),{stravaActivities:V}=h,{garminActivityDetails:H}=x;return Object(n.h)("div",{class:"container-fluid",style:`margin-bottom: ${w}; margin-top: ${k};`},Object(n.h)("div",{class:"row mb-4 fixed-top",style:`margin-top: ${v}; background-color: ${A?"#191d21":"#f8f9fa"};`},Object(n.h)("div",{class:"col text-center border-bottom border-primary subtopmenu"},Object(n.h)("a",{href:"/workouts/",class:"text-primary stretched-link"},Object(n.h)("nobr",null,Object(n.h)("i",{class:"fas fa-chart-line"})," ",Object(n.h)(i.c,{id:"workout.index.dashboard"},"Oversikt")))),Object(n.h)("div",{class:"col text-center subtopmenu"},Object(n.h)("a",{href:"/workouts/list",class:"text-secondary stretched-link"},Object(n.h)("nobr",null,Object(n.h)("i",{class:"fas fa-list"})," ",Object(n.h)(i.c,{id:"workout.index.list"},"Liste")))),Object(n.h)("div",{class:"col text-center subtopmenu"},Object(n.h)("a",{href:"/workouts/plan",class:"text-secondary stretched-link"},Object(n.h)("nobr",null,Object(n.h)("i",{class:"fas fa-calendar-alt"})," ",Object(n.h)(i.c,{id:"workout.index.plan"},"Plan"))))),Object(n.h)("div",{class:"row"},Object(n.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 border-bottom"},Object(n.h)(O.a,{stores:this.props.stores,callback:this.loadWorkouts,key:"teams-"+_})),Object(n.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-2 mb-2"},Object(n.h)("a",{class:"btn btn-primary btn-sm float-right",href:"/workouts/edit/new"},Object(n.h)("i",{class:"fas fa-plus"})," ",Object(n.h)(i.c,{id:"workout.index.add-workout"},"Legg til treningstur"))),Object(n.h)(p.a,{stores:this.props.stores,isLoading:e,year:T,month:L,chooseDayFunction:this.chooseDay,key:`calendar-header-${S.id}-${P.length}`,hideTable:"calendar"===s?0:1,hideSummary:"calendar"===s?0:1,skipLoadSummary:"calendar"===s?0:1}),"totals"===s&&Object(n.h)(t,null,Object(n.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 mt-2 mb-2"},Object(n.h)("div",{class:"row"},Object(n.h)("div",{class:"col-4 text-center"},R>=0&&Object(n.h)(f.a,{key:"gauge-"+U,radius:55,percent:U,prefix:"%",total:R+" km",completed:B+" km"}),Object(n.h)("br",null),Object(n.h)("small",{class:"text-muted"},Object(n.h)(i.c,{id:"workout.index.plan"},"Treningsplan"))),Object(n.h)("div",{class:"col-4 text-center"},Object(n.h)("h5",null,Object(n.h)("span",{class:"text-muted font-weight-lighter"},Object(n.h)("i",{class:"fas fa-road"}))),Object(n.h)("h3",null,c.a.format(K,0)," ",Object(n.h)("small",null,Object(n.h)("small",null,Object(n.h)("small",null,"km")))),Object(n.h)("small",{class:"text-muted"},Object(n.h)(i.c,{id:"workout.calendar.distance"},"Distanse"))),Object(n.h)("div",{class:"col-4 text-center"},Object(n.h)("h5",null,Object(n.h)("span",{class:"text-muted font-weight-lighter"},Object(n.h)("i",{class:"fas fa-tachometer-alt ml-3"}))),Object(n.h)("h3",null,c.a.format(E,1)," ",Object(n.h)("small",null,Object(n.h)("small",null,Object(n.h)("small",null,"km/t")))),Object(n.h)("small",{class:"text-muted"},Object(n.h)(i.c,{id:"workout.calendar.avg-speed"},"Gj.snittsfart"))),Object(n.h)("div",{class:"col-12 text-center"},Object(n.h)("span",{class:"text-muted font-weight-lighter"},Object(n.h)("i",{class:"fas fa-running"})," ")," ",z,Object(n.h)("span",{class:"text-muted font-weight-lighter"},Object(n.h)("i",{class:"fas fa-clock ml-3"}))," ",c.a.secToHms(q))))),"analysis"===s&&Object(n.h)(t,null,Object(n.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3"},Object(n.h)(d.a,{stores:this.props.stores,isLoading:e,year:T,key:`graph-${S.id}-${P.length}`}))),"table"===s&&Object(n.h)(t,null,Object(n.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3"},Object(n.h)(m.a,{stores:this.props.stores,isLoading:e,year:T,key:`table-${S.id}-${P.length}`}))),"workoutplan"===s&&Object(n.h)(t,null,Object(n.h)(j.a,{stores:this.props.stores,basehref:"/workouts/",month:L,year:T,key:`${S.id||J}-${_}-${L}-${T}`,showNavigation:!1,showHeader:!1})),Object(n.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 my-3"},Object(n.h)("div",{class:"row"},Object(n.h)("div",{class:"col px-1 pt-2"},Object(n.h)("button",{class:`btn btn-block ${"totals"===s?"btn-primary":"btn-outline-primary"} text-nowrap`,style:"text-overflow: ellipsis; overflow: hidden;","data-menu":"totals",onClick:this.chooseSubmenu},Object(n.h)("i",{class:"fas fa-tachometer-alt"})," ",Object(n.h)(i.c,{id:"workouts.totals"},"Totaler"))),Object(n.h)("div",{class:"col px-1 pt-2"},Object(n.h)("button",{class:`btn btn-block ${"analysis"===s?"btn-primary":"btn-outline-primary"} text-nowrap`,style:"text-overflow: ellipsis; overflow: hidden;","data-menu":"analysis",onClick:this.chooseSubmenu},Object(n.h)("i",{class:"fas fa-chart-area"})," ",Object(n.h)(i.c,{id:"workouts.analysis"},"Analyser"))),Object(n.h)("div",{class:"col px-1 pt-2"},Object(n.h)("button",{class:`btn btn-block ${"table"===s?"btn-primary":"btn-outline-primary"} text-nowrap`,style:"text-overflow: ellipsis; overflow: hidden;","data-menu":"table",onClick:this.chooseSubmenu},Object(n.h)("i",{class:"fas fa-table"})," ",Object(n.h)(i.c,{id:"workouts.table"},"Tabell"))),Object(n.h)("div",{class:"col px-1 pt-2"},Object(n.h)("button",{class:`btn btn-block ${"workoutplan"===s?"btn-primary":"btn-outline-primary"} text-nowrap`,style:"text-overflow: ellipsis; overflow: hidden;","data-menu":"workoutplan",onClick:this.chooseSubmenu},Object(n.h)("i",{class:"fas fa-calendar-alt"})," ",Object(n.h)(i.c,{id:"workouts.workoutplan"},"Treningsplan"))),Object(n.h)("div",{class:"col px-1 pt-2"},Object(n.h)("button",{class:`btn btn-block ${"calendar"===s?"btn-primary":"btn-outline-primary"} text-nowrap`,style:"text-overflow: ellipsis; overflow: hidden;","data-menu":"calendar",onClick:this.chooseSubmenu},Object(n.h)("i",{class:"fas fa-calendar-alt"})," ",Object(n.h)(i.c,{id:"workouts.workoutplan"},"Kalender")))))),Object(n.h)("div",{class:"row"},$&&$.strava&&V&&V.length>0&&Object(n.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 border-top border-bottom pt-3 pb-3 my-2"},Object(n.h)("h5",null,Object(n.h)(i.c,{id:"workout.index.strava-workouts"},"Strava workouts / not imported")),V&&V.map(t=>Object(n.h)(g.a,{stores:this.props.stores,activity:t,key:`strava-${_}-${t.id}`}))),$&&$.garmin&&H&&H.length>0&&Object(n.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 border-top border-bottom pt-3 pb-3 my-2"},Object(n.h)("h5",null,Object(n.h)(i.c,{id:"workout.index.garmin-workouts"},"Garmin workouts / not imported")),H&&H.map(t=>Object(n.h)(y.a,{stores:this.props.stores,activity:t,key:`garmin-${_}-${t.id}`})))),Object(n.h)("div",{class:"row"},G&&G.length>0&&Object(n.h)("div",{class:"col-12 mb-4"},Object(n.h)("div",{class:"col-12 offset-0 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 px-0 mt-4"},Object(n.h)("h5",null,Object(n.h)(i.c,{id:"workout.index.last-workouts",fields:{total:G.length,month:W[L-1],year:T}},"Treningsturer ",W[L-1]," ",T," - ",G.length," stk"))),G&&G.map(t=>Object(n.h)(b.a,{stores:this.props.stores,workout:t}))),!Y||0===Y.length&&Object(n.h)("div",{class:"col-12 mb-4 text-center pt-5 pb-5"},Object(n.h)("h1",{class:"text-muted"},Object(n.h)("i",{class:"fas fa-running"})),Object(n.h)("h5",{class:"text-muted font-weight-lighter"},Object(n.h)(i.c,{id:"workouts.no-workouts",fields:{month:W[L-1],year:T}},"Ingen treningsturer registrert...")))),!1)}})||r;e.default=S}.call(this,s("hosL").Fragment)},azdc:function(t,e,s){"use strict";(function(t){var o,a=s("hosL"),r=s("Utv1"),n=s("/eY4"),c=s("OhSV"),l=s("ZOvn"),i=s.n(l);let h=Object(c.d)(()=>({week:Object(a.h)(c.c,{id:"workout.graph.week"}),distance:Object(a.h)(c.c,{id:"workout.graph.distance"}),ascend:Object(a.h)(c.c,{id:"workout.graph.ascend"}),plan:Object(a.h)(c.c,{id:"workout.graph.plan"})}))(o=Object(n.a)(o=class extends a.Component{render(){const{userStore:e}=this.props.stores,{year:s}=this.props,{user:o}=e,{language:n="no"}=o,l=i.a.getMonths(n),h=(new Date).getMonth()+1,u=r.a.getYear(),b=parseInt(s||(h<6?u-1:u),10),d=r.a.monthRange(b+"-06-01",b+1+"-05-31"),m=r.a.monthRange(b-1+"-06-01",b+"-05-31"),p=r.a.weekRange(b+"-06-01",b+1+"-05-31").map(t=>t.week),O=Math.floor(p.length/(p.length%6)),f=[];for(let t=0,e=p.length;t<e;t+=O)f.push(p[t]);return Object(a.h)(t,null,Object(a.h)("h5",null,Object(a.h)(c.c,{id:"workout.graph.title"},"Treningsstatistikk")," ",b," - ",b+1),Object(a.h)("div",{class:"w-100 mt-3 mb-4"},Object(a.h)("small",{class:"mb-4"},Object(a.h)("small",null,Object(a.h)("table",{class:"table table-sm font-weigth-lighter border-bottom"},Object(a.h)("thead",null,Object(a.h)("tr",null,Object(a.h)("th",{style:"padding: .15rem;"},Object(a.h)(c.c,{id:"workout.graph.season"},"Sesong")),d.map(t=>Object(a.h)("th",{class:"text-right",style:"padding: .15rem;"},Object(a.h)("a",{href:`/workouts/month/${t.month}/${t.year}`},l[t.month-1]))))),Object(a.h)("tbody",null,Object(a.h)("tr",null,Object(a.h)("th",{scope:"row",style:"padding: .15rem;"},b-1," - ",b),m.map(s=>Object(a.h)(t,null,Object(a.h)("td",{class:"text-right",style:"padding: .15rem;"},Object(a.h)("nobr",null,e.findWorkoutSummaryMonth(s.year,s.month)),Object(a.h)("br",null),Object(a.h)("nobr",null,e.findWorkoutSummaryMonth(s.year,s.month,"elevation")),Object(a.h)("br",null)))),Object(a.h)("td",{class:"text-muted",style:"padding: .15rem;"},Object(a.h)("nobr",null,Object(a.h)("i",{class:"fas fa-road"})," km"),Object(a.h)("br",null),Object(a.h)("nobr",null,Object(a.h)("i",{class:"fas fa-mountain"})," m"),Object(a.h)("br",null))),Object(a.h)("tr",null,Object(a.h)("th",{scope:"row",style:"padding: .15rem;"},b," - ",b+1),d.map(s=>Object(a.h)(t,null,Object(a.h)("td",{class:"text-right",style:"padding: .15rem;"},Object(a.h)("nobr",null,e.findWorkoutSummaryMonth(s.year,s.month)),Object(a.h)("br",null),Object(a.h)("nobr",null,e.findWorkoutSummaryMonth(s.year,s.month,"elevation")),Object(a.h)("br",null)))),Object(a.h)("td",{class:"text-muted",style:"padding: .15rem;"},Object(a.h)("nobr",null,Object(a.h)("i",{class:"fas fa-road"})," km"),Object(a.h)("br",null),Object(a.h)("nobr",null,Object(a.h)("i",{class:"fas fa-mountain"})," m"),Object(a.h)("br",null)))))))))}})||o)||o;e.a=h}).call(this,s("hosL").Fragment)},eK6s:function(t){t.exports={gaugeBackground:"gaugeBackground__1UGxt",gauge:"gauge__2ZDxd",success:"success__3UQxg",primary:"primary__3pPV6",secondary:"secondary__-Vrk_",info:"info__3t5zs",warning:"warning__1jHlR",danger:"danger__BLVC9",gaugeText:"gaugeText__1on-w"}},wanP:function(t,e,s){"use strict";(function(t){function o(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,o)}return s}function a(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}var r,n=s("hosL"),c=(s("Utv1"),s("/eY4")),l=s("eK6s"),i=s.n(l);const h={mouseData:{}};let u=Object(c.a)(r=class extends n.Component{constructor(t){super(t),this.state=function(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?o(Object(s),!0).forEach((function(e){a(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):o(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}({},h),this.svgRef=null}render(){const{radius:e=50,percent:s=0,color:o="success",total:a="",completed:r="",prefix:c=""}=this.props,l=.3*e,h=e-l/2,u=.3*e,b=2*h*Math.PI,d=.75*b,m=`${d} ${b}`,p=`rotate(135, ${e}, ${e})`,O=d-Math.min(Math.max(s,0),100)/100*d,f=e/2.5,j=e/5;return Object(n.h)(t,null,Object(n.h)("svg",{xmlns:"http://www.w3.org/2000/svg",class:i.a.svg,width:2*e,height:2*e,preserveAspectRatio:"none",ref:t=>this.svgRef=t},Object(n.h)("circle",{class:""+i.a.gaugeBackground,cx:e,cy:e,r:h,strokeWidth:l,strokeDasharray:m,strokeLinecap:"round",transform:p}),Object(n.h)("circle",{class:`${i.a[o]} ${i.a.gauge}`,cx:e,cy:e,r:h,stroke:"url(#grad)",strokeDasharray:m,strokeDashoffset:O,strokeLinecap:"round",strokeWidth:u,style:{transition:"stroke-dashoffset 0.3s"},transform:p}),Object(n.h)("text",{class:`${i.a.gaugeText} ${i.a[o]}`,x:"50%",y:"50%","dominant-baseline":"middle","text-anchor":"middle","font-size":f},s," ",c),Object(n.h)("text",{class:`${i.a.gaugeText} ${i.a[o]}`,x:"50%",y:"65%","dominant-baseline":"middle","text-anchor":"middle","font-size":j},r),Object(n.h)("text",{class:`${i.a.gaugeText} ${i.a.secondary}`,x:"50%",y:"90%","dominant-baseline":"middle","text-anchor":"middle","font-size":j},a)))}})||r;e.a=u}).call(this,s("hosL").Fragment)}}]);
//# sourceMappingURL=route-workouts.chunk.96f65.esm.js.map