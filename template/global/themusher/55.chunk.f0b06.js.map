{"version":3,"sources":["webpack:///./routes/public/race/raceheader.js","webpack:///./routes/public/race/results-main.js","webpack:///./components/public/heatmap.js","webpack:///./routes/public/race/submenu.js","webpack:///./routes/public/race/style.css","webpack:///./routes/public/race/header.js","webpack:///./routes/public/race/raceText.js"],"names":["initialState","RaceHeader","observer","props","state","render","this","stores","appState","title","language","race","raceStore","today","Date","status","startDate","endDate","signupStartDate","signupEndDate","class","classes","useEffect","document","PageTitle","style","util","formatDate","locale","hour12","hour","minute","liveRace","role","id","Component","MARGIN_TOP","mu","marginTop","MARGIN_BOTTOM","marginBottom","isLoading","contentIsNotLoaded","email","submenu","jwtToken","getJwtToken","reloadInSec","reloadLastEpoch","reloadIsActive","PublicRaceDetail","toggleDisplayDetails","e","target","closest","dataset","adminToggleEditUser","stopPropagation","toggleEditUserDetails","adminSignupEdit","raceid","field","value","data","raceClassId","classid","contestantId","contestantid","ucfirst","clearTimeout","updateTimer","setTimeout","editClass","lockAllWorkoutsInRace","setState","lockMessage","filterByClass","selectedClassId","toggleSelectedClassId","loadRace","allTeamIds","load","map","currentClass","contestants","musher","team","length","loadTeams","join","loadWorkoutSummary","getWorkoutSummaryActiveTeams","getAllClassesSortedBy","Math","floor","getTime","tickReloadTimeer","reload","RELOAD_INTERVAL_IN_SEC","now","tick","componentWillUnmount","componentDidMount","componentWillReceiveProps","nextProps","path","displayDetails","selectedClassIds","reloadPercent","normalizeBetween","stages","type","name","distance","lastAllowedChangeDate","setHours","getHours","topMargin","topMargin2","aria-valuenow","aria-valuemin","aria-valuemax","resultsUrl","href","rel","native","resultsText","slice","sort","a","b","indexOf","onClick","data-id","filter","c","resultDanger","markdown","replaceImages","images","markdownOpts","getMarkdownOptions","resultWarning","resultSuccess","totalMushers","startTime","endTime","scope","stage","percent","width","parseInt","contestant","idx","currentTeam","rests","restsSplit","data-email","firstname","lastname","sportsClub","facebook","asFacebookLink","instagram","asInstagramLink","stageIdx","stageCompleted","stageRest","stageRestSplit","stage1","stage2","reverse","left","totalCompleted","showAddComment","Heatmap","inputRef","loadHeatmap","adminStore","getPublicHeatmap","waypoints","zoomToMarkers","mapid","fullscreenMap","heatmap","publicHeatmap","mapId","minZoom","maxZoom","height","key","subMenuMarginTop","darkmode","currentMenu","match","module","exports","menu","profile","main","searchText","Navigation","toggleDropdown","menuName","parentNode","toggleDarkmode","toggleViewmode","mode","reloadApp","window","location","adminLoadAll","userStore","getInfo","changeLanguage","lang","console","log","user","setLanguage","search","route","notifications","read","src","data-name","className","activeClassName","onInput","selected","text","finalText","regex","RegExp","replace"],"mappings":"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","file":"55.chunk.f0b06.js","sourcesContent":["import { h, Component } from 'preact';\nimport { useEffect } from \"preact/hooks\";\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport { Text, Localizer } from 'preact-i18n';\n\nfunction PageTitle(title, classes = '') {\n\tuseEffect(() => {\n\t\tdocument.title = `Homerun Race: ${title}`;\n\t}, [title]);\n\treturn <h1 class={classes}>{title}</h1>;\n}\n\nconst initialState = {\n};\n\n@observer\nclass RaceHeader extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            ...initialState,\n        };\n    }\n\n    render() {\n\t\tconst { raceStore, appState } = this.props.stores;\n\t\tconst { title } = this.props;\n\t\tconst { darkmode, language = 'en' } = appState;\n\t\tconst { race } = raceStore;\n\n\t\tconst today = new Date();\n\t\tlet status = '';\n\t\tif (today >= new Date(race.startDate) && today <= new Date(race.endDate)) {\n\t\t\tstatus = 'race';\n\t\t} else if (today >= new Date(race.signupStartDate) && today <= new Date(race.signupEndDate)) {\n\t\t\tstatus = 'signup';\n\t\t} else if (today > new Date(race.endDate)) {\n\t\t\tstatus = 'done';\n\t\t}\n\n\t\treturn (\n\t\t\t<>\n\t\t\t\t<div class='d-flex'>\n\t\t\t\t\t<div class='flex-fill'>\n\t\t\t\t\t\t{PageTitle(title, 'mb-0')}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class='flex-fill text-center d-none d-md-block'>\n\t\t\t\t\t\t<h1 class='mb-0' style='line-height: 0.8em;'><span class='font-weight-lighter' style='letter-spacing: -1px;'>{race.title}</span></h1>\n\t\t\t\t\t\t<small class=''>\n\t\t\t\t\t\t\t{race.startDate && <>{util.formatDate(race.startDate, { locale: language, hour12: false, hour: '2-digit', minute: '2-digit' })}</>}\n\t\t\t\t\t\t\t{race.endDate && <> - {util.formatDate(race.endDate, { locale: language, hour12: false, hour: '2-digit', minute: '2-digit' })}</>}\n\t\t\t\t\t\t</small>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class='flex-fill'>\n\t\t\t\t\t\t<h3 class='float-right'>\n\t\t\t\t\t\t\t{status === 'signup' && !race.liveRace && <>\n\t\t\t\t\t\t\t\t<div class='spinner-grow text-primary' role='status' />\n\t\t\t\t\t\t\t\t<span class='badge badge-primary ml-2'><Text id='races.signup-open'>Påmelding åpen</Text></span>\n\t\t\t\t\t\t\t</>}\n\t\t\t\t\t\t\t{status === 'race' && <>\n\t\t\t\t\t\t\t\t<div class='spinner-grow text-danger' role='status' />\n\t\t\t\t\t\t\t\t<span class='badge badge-danger ml-2'><Text id='races.race-in-progress'>Løp pågår</Text></span>\n\t\t\t\t\t\t\t</>}\n\t\t\t\t\t\t\t{status === 'done' && <>\n\t\t\t\t\t\t\t\t<i class='fas fa-check text-success' />\n\t\t\t\t\t\t\t\t<span class='badge badge-success ml-2'><Text id='races.race-finished'>Løp avsluttet</Text></span>\n\t\t\t\t\t\t\t</>}\n\t\t\t\t\t\t</h3>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class='d-block d-md-none'>\n\t\t\t\t\t<h4 class='mb-0' style='line-height: 0.8em;'><span class='font-weight-light' style='letter-spacing: -1px;'>{race.title}</span></h4>\n\t\t\t\t\t<small>\n\t\t\t\t\t\t{race.startDate && <>{util.formatDate(race.startDate, { locale: language, hour12: false, hour: '2-digit', minute: '2-digit' })}</>}\n\t\t\t\t\t\t{race.endDate && <> - {util.formatDate(race.endDate, { locale: language, hour12: false, hour: '2-digit', minute: '2-digit' })}</>}\n\t\t\t\t\t</small>\t\t\t\t\n\t\t\t\t</div>\n\t\t\t</>\n\t\t);\n\t}\n}\n\nexport default RaceHeader;\n","import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport { Text, Localizer } from 'preact-i18n';\nimport Markdown from 'preact-markdown';\n\nimport Header from './header';\nimport Submenu from './submenu';\nimport RaceHeader from './raceheader';\nimport RaceText from './raceText';\n\nimport mu from '../../../lib/musher-util';\nconst MARGIN_TOP = mu.marginTop(true, true);\nconst MARGIN_BOTTOM = mu.marginBottom();\n\nfunction raceStatus(musher) {\n\tswitch (musher.raceStatus) {\n\t\tcase 'OK':\n\t\t\treturn (<>\n\t\t\t\t<span class='position-absolute rounded-lg' style='top: 10px; left: 0px;'><i class='fas fa-check text-success' /></span>\n\t\t\t</>);\n\t\tcase 'DNS':\n\t\t\treturn (<>\n\t\t\t\t<span class='position-absolute bg-danger text-white text-center px-2 rounded-lg border' style='top: 5px; left: -100px; width: 80px'><i class='fas fa-info-circle' /> {musher.raceStatus}</span>\n\t\t\t</>);\n\t\tcase 'DNF':\n\t\t\treturn (<>\n\t\t\t\t<span class='position-absolute bg-danger text-white text-center px-2 rounded-lg border' style='top: 5px; left: -100px; width: 80px'><i class='fas fa-info-circle' /> {musher.raceStatus}</span>\n\t\t\t</>);\n\t\tcase 'DNQ':\n\t\t\treturn (<>\n\t\t\t\t<span class='position-absolute bg-danger text-white text-center px-2 rounded-lg border' style='top: 5px; left: -100px; width: 80px'><i class='fas fa-info-circle' /> {musher.raceStatus}</span>\n\t\t\t</>);\n\t\tcase 'DQ':\n\t\t\treturn (<>\n\t\t\t\t<span class='position-absolute bg-danger text-white text-center px-2 rounded-lg border' style='top: 5px; left: -100px; width: 80px'><i class='fas fa-info-circle' /> {musher.raceStatus}</span>\n\t\t\t</>);\n\t\tcase 'DC':\n\t\t\treturn (<>\n\t\t\t\t<span class='position-absolute bg-warning text-white text-center px-2 rounded-lg border' style='top: 5px; left: -150px; width: 80px'><i class='fas fa-info-circle' /> {musher.raceStatus}</span>\n\t\t\t</>);\n\t\tdefault:\n\t\t\treturn '';\n\t}\n}\n\nconst initialState = {\n\tisLoading: false,\n\tcontentIsNotLoaded: true,\n\temail: '',\n\tsubmenu: 'ads',\n\tjwtToken: util.getJwtToken(),\n\n\treloadInSec: null,\n\treloadLastEpoch: null,\n\treloadIsActive: false,\n};\n\nconst RELOAD_INTERVAL_IN_SEC = 60;\n\n@observer\nclass PublicRaceDetail extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            ...initialState,\n        };\n\t\tthis.updateTimer = {};\n    }\n\n\tasync loadRace(props = this.props) {\n\t\tthis.setState({ isLoading: true });\n\t\tconst { raceStore } = props.stores;\n\t\tconst { raceid } = props;\n\t\tawait raceStore.load(raceid);\n\t\tconst { race } = raceStore;\n\t\tconst allTeamIds = race.classes.map((currentClass) => {\n\t\t\tif (currentClass.contestants) {\n\t\t\t\treturn currentClass.contestants.map(musher => musher.team)\n\t\t\t}\n\t\t});\n\t\tif (allTeamIds.length > 0) {\n\t\t\tawait raceStore.loadTeams(allTeamIds.join(','));\n\t\t\tawait raceStore.loadWorkoutSummary(allTeamIds.join(','), raceid);\n\t\t\traceStore.getWorkoutSummaryActiveTeams();\n\t\t}\n\t\traceStore.getAllClassesSortedBy();\n\n\t\tconst reloadLastEpoch = Math.floor(new Date().getTime() / 1000);\n\t\tthis.setState({\n\t\t\treloadIsActive: true,\n\t\t\treloadLastEpoch,\n\t\t}, () => this.tickReloadTimeer());\n\t\t// Set reload timer\n\t\tclearTimeout(this.updateTimer.reload);\n\t\tthis.updateTimer.reload = setTimeout(async () => {\n\t\t\tconst reloadLastEpoch = Math.floor(new Date().getTime() / 1000);\n\t\t\tthis.setState({ reloadLastEpoch });\n\t\t\tthis.loadRace();\n\t\t}, RELOAD_INTERVAL_IN_SEC * 1000);\n\n\t\tthis.setState({\n\t\t\tisLoading: false,\n\t\t\tcontentIsNotLoaded: false,\n\t\t});\n\t}\n\n\ttickReloadTimeer() {\n\t\tconst { reloadIsActive, reloadLastEpoch } = this.state;\n        if (reloadIsActive) {\n\t\t\tconst now = Math.floor(new Date().getTime() / 1000);\n\t\t\tconst reloadInSec = RELOAD_INTERVAL_IN_SEC - (now - reloadLastEpoch);\n\t\t\tthis.setState({ reloadInSec });\n\t\t\tclearTimeout(this.updateTimer.tick);\n\t\t\tthis.updateTimer.tick = setTimeout(() => this.tickReloadTimeer(), 1000);\n        }\n\t\treturn false;\n    }\n\n\ttoggleDisplayDetails = (e) => {\n\t\tconst email = e.target.closest('tr').dataset.email;\n\t\tconst { appState } = this.props.stores;\n\t\tappState.toggleDisplayDetails(email)\n\t}\n\n\tadminToggleEditUser = (e) => {\n\t\te.stopPropagation();\n\t\tconst email = e.target.closest('tr').dataset.email;\n\t\tconst { appState } = this.props.stores;\n\t\tappState.toggleEditUserDetails(email)\n\t}\n\n\tadminSignupEdit = (e) => {\n        const { raceid } = this.props;\n        const { raceStore } = this.props.stores;\n        const field = e.target.id;\n        const value = e.target.value;\n        const { classid, contestantid } = e.target.dataset;\n\n        // console.log({ raceid, field, value, classid });\n        // const { raceStore } = this.props.stores;\n        // raceStore.updateObjectKeyValue('signup', key, value);\n\n        const data = {\n\t\t\traceClassId: classid,\n            contestantId: contestantid,\n\t\t\t[`raceClassContestant${util.ucfirst(field)}`]: value,\n\t\t};\n\t\tclearTimeout(this.updateTimer[field]);\n\t\tthis.updateTimer[field] = setTimeout(async () => {\n\t\t\traceStore.editClass({\n\t\t\t\tid: raceid,\n\t\t\t\tdata,\n\t\t\t});\n\t\t}, 500);\n\t}\n\n\tlockAllWorkoutsInRace = async () => {\n\t\tconst { raceid } = this.props;\n        const { raceStore } = this.props.stores;\n\t\tconst lockMessage = await raceStore.lockAllWorkoutsInRace({ id: raceid });\n\t\tthis.setState({ lockMessage });\n\t}\n\n\tfilterByClass = (e) => {\n\t\tconst selectedClassId = e.target.closest('button').dataset.id;\n\t\tconst { appState } = this.props.stores;\n\t\tappState.toggleSelectedClassId(selectedClassId);\n\t}\n\n\tcomponentWillUnmount() {\n\t\tclearTimeout(this.updateTimer.reload);\n\t\tclearTimeout(this.updateTimer.tick);\n\t}\n\n\tcomponentDidMount() {\n\t\tthis.loadRace();\n\t}\n\n\tcomponentWillReceiveProps(nextProps) {\n\t\tthis.loadRace(nextProps);\n\t}\n\n\trender() {\n\t\tconst { appState, raceStore, userStore } = this.props.stores;\n\t\tconst { user = {}, isAdmin } = userStore;\n\t\tconst { raceid, path } = this.props;\n\t\tconst { darkmode, displayDetails, editUserDetails, language = 'en', selectedClassIds = [] } = appState;\n\t\tconst { race, teamList, classes } = raceStore;\n\n\t\tconst { reloadInSec, contentIsNotLoaded, lockMessage } = this.state;\n\t\tconst reloadPercent = Math.floor(util.normalizeBetween(reloadInSec, 0, RELOAD_INTERVAL_IN_SEC, 0, 100))\n\n\t\tconst { activeTeams, waypoints, zoomToMarkers } = raceStore;\n\n\t\tconst stages = [\n\t\t\t{ type: 'start', name: 'Alta' },\n\t\t\t{ type: 'stage', name: 'Alta-Kautokeino', distance: 132 },\n\t\t\t{ type: 'checkpoint', name: 'Kautokeino' },\n\t\t\t{ type: 'stage', name: 'Kautokeino-Jergul', distance: 101 },\n\t\t\t{ type: 'checkpoint', name: 'Jergul' },\n\t\t\t{ type: 'stage', name: 'Jergul-Levajok', distance: 122 },\n\t\t\t{ type: 'checkpoint', name: 'Levajok' },\n\t\t\t{ type: 'stage', name: 'Levajok-Tana', distance: 97 },\n\t\t\t{ type: 'checkpoint', name: 'Tana' },\n\t\t\t{ type: 'stage', name: 'Tana-Neiden', distance: 101 },\n\t\t\t{ type: 'checkpoint', name: 'Neiden' },\n\t\t\t{ type: 'stage', name: 'Neiden-Kirkenes', distance: 71 },\n\t\t\t{ type: 'checkpoint', name: 'Kirkenes' },\n\t\t\t{ type: 'stage', name: 'Kirkenes-Øvre Pasvik', distance: 85 },\n\t\t\t{ type: 'checkpoint', name: 'Øvre Pasvik' },\n\t\t\t{ type: 'stage', name: 'Øvre Pasvik-Neiden', distance: 78 },\n\t\t\t{ type: 'checkpoint', name: 'Neiden' },\n\t\t\t{ type: 'stage', name: 'Neiden-Varangerbotn', distance: 82 },\n\t\t\t{ type: 'checkpoint', name: 'Varangerbotn' },\n\t\t\t{ type: 'stage', name: 'Varangerbotn-Levajok', distance: 117 },\n\t\t\t{ type: 'checkpoint', name: 'Levajok' },\n\t\t\t{ type: 'stage', name: 'Levajok-Karasjok', distance: 83 },\n\t\t\t{ type: 'checkpoint', name: 'Karasjok' },\n\t\t\t{ type: 'stage', name: 'Karasjok-Jotka', distance: 83 },\n\t\t\t{ type: 'checkpoint', name: 'Jotka' },\n\t\t\t{ type: 'stage', name: 'Jotka-Alta', distance: 49 },\n\t\t\t{ type: 'finish', name: 'Alta' },\n\t\t];\n\n\t\tconst lastAllowedChangeDate = new Date(race.endDate);\n\t\tlastAllowedChangeDate.setHours(lastAllowedChangeDate.getHours() + 2);\n\n\t\tconst filterByClassId = (c) => {\n\t\t\tif (selectedClassIds.length > 0) {\n\t\t\t\treturn selectedClassIds.indexOf(c.id) > -1;\n\t\t\t}\n\t\t\treturn true;\n\t\t};\n\t\tlet topMargin = 0;\n\t\tlet topMargin2 = 0;\n\t\tlet prevStageComplete = 0\n\n\t\treturn (\n\t\t\t<>\n\t\t\t\t<Header stores={this.props.stores} />\n\n\t\t\t\t<div class='container-fluid ' style={`margin-bottom: ${MARGIN_BOTTOM}; margin-top: ${MARGIN_TOP};`}>\n\t\t\t\t\t<Submenu stores={this.props.stores} path={path} raceid={raceid} />\n\n\t\t\t\t\t<div class='row'>\n\t\t\t\t\t\t<div class='col-12'>\n\n\t\t\t\t\t\t\t<Localizer>\n\t\t\t\t\t\t\t\t<RaceHeader stores={this.props.stores} title={<Text id='races.results'>Resultater</Text>} />\n\t\t\t\t\t\t\t</Localizer>\n\n\t\t\t\t\t\t\t{reloadInSec >= 0 && <>\n\t\t\t\t\t\t\t\t<div class='progress fixed-top' style='height: 2px; z-index: 999999;'>\n\t\t\t\t\t\t\t\t\t<div class='progress-bar' role='progressbar' style={`width: ${reloadPercent}%;`} aria-valuenow={reloadPercent} aria-valuemin='0' aria-valuemax='100' />\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</>}\n\n\t\t\t\t\t\t\t{race.resultsUrl ? <div class='p-3 my-4 bg-light'>\n\t\t\t\t\t\t\t\t<a href={race.resultsUrl} target='_blank' rel='noreferrer' native>\n\t\t\t\t\t\t\t\t\t{race.resultsText ? race.resultsText : <><Text id='races.results-here'>Se resultater her</Text> </>} <i class='fas fa-chevron-circle-right' />\n\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t</div> : <>\n\n\t\t\t\t\t\t\t</>}\n\n\t\t\t\t\t\t\t{(contentIsNotLoaded || !classes || classes.length === 0) && <div class='d-flex justify-content-center my-5 py-5'>\n\t\t\t\t\t\t\t\t<div class='spinner-border text-primary' role='status'>\n\t\t\t\t\t\t\t\t\t<span class='sr-only'>Loading...</span>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>}\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t<div class='col-12'>\n\t\t\t\t\t\t\t<nav class='flex-column flex-sm-row'>\n\t\t\t\t\t\t\t\t{race.classes && race.classes.slice().sort((a, b) => a.distance - b.distance).map(currentClass => <>\n\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\ttype='button'\n\t\t\t\t\t\t\t\t\t\tclass={`btn btn-lg flex-sm-fill text-sm-center btn${selectedClassIds.indexOf(currentClass.id) > -1 ? '' : '-outline'}-primary mr-2 mb-2`}\n\t\t\t\t\t\t\t\t\t\tonClick={this.filterByClass}\n\t\t\t\t\t\t\t\t\t\tdata-id={currentClass.id}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t{currentClass.title}\n\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t</>)}\n\t\t\t\t\t\t\t</nav>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t<div class='col-12'>\n\t\t\t\t\t\t\t{race.classes && race.classes.filter(filterByClassId).slice().sort((a, b) => a.distance - b.distance).map(currentClass => <div class='mt-5 mb-5'>\n\t\t\t\t\t\t\t\t{race.resultDanger && <div class='alert alert-danger' role='alert'>\n\t\t\t\t\t\t\t\t\t<div class='spinner-grow text-danger float-left' role='status'>\n\t\t\t\t\t\t\t\t\t\t<span class='sr-only'>Loading...</span>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<i class='fas fa-exclamation-triangle float-left mr-4' style='font-size: 2.0em;' />\n\t\t\t\t\t\t\t\t\t<Markdown markdown={mu.replaceImages(race.resultDanger, race.images, language)} markdownOpts={mu.getMarkdownOptions()} />\n\t\t\t\t\t\t\t\t</div>}\n\t\t\t\t\t\t\t\t{race.resultWarning && <div class='alert alert-warning' role='alert'>\n\t\t\t\t\t\t\t\t\t<i class='fas fa-exclamation float-left mr-4' style='font-size: 2.0em;' />\n\t\t\t\t\t\t\t\t\t<Markdown markdown={mu.replaceImages(race.resultWarning, race.images, language)} markdownOpts={mu.getMarkdownOptions()} />\n\t\t\t\t\t\t\t\t</div>}\n\t\t\t\t\t\t\t\t{race.resultSuccess && <div class='alert alert-success' role='alert'>\n\t\t\t\t\t\t\t\t\t<i class='fas fa-check float-left mr-4' style='font-size: 2.0em;' />\n\t\t\t\t\t\t\t\t\t<Markdown markdown={mu.replaceImages(race.resultSuccess, race.images, language)} markdownOpts={mu.getMarkdownOptions()} />\n\t\t\t\t\t\t\t\t</div>}\n\n\t\t\t\t\t\t\t\t<span class='float-right'>\n\t\t\t\t\t\t\t\t\t<span class='text-muted'><Text id='races.mushers'>Mushers</Text>: {currentClass.totalMushers || 0}</span>\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t<h3>{currentClass.title} {currentClass.startDate && <>\n\t\t\t\t\t\t\t\t\t\t: <span class='font-weight-lighter'>\n\t\t\t\t\t\t\t\t\t\t\t{util.formatDate(`${currentClass.startDate} ${currentClass.startTime || '00:00:00'}`, { locale: language, hour12: false, hour: '2-digit', minute: '2-digit' })} - {util.formatDate(`${currentClass.endDate} ${currentClass.endTime || '00:00:00'}`, { locale: language, hour12: false, hour: '2-digit', minute: '2-digit' })}\n\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t</>}\n\t\t\t\t\t\t\t\t</h3>\n\n\t\t\t\t\t\t\t\t<div class='table-responsive-xl'>\n\t\t\t\t\t\t\t\t\t<table class='table table-sm table-striped'>\n\t\t\t\t\t\t\t\t\t\t<thead>\n\t\t\t\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t\t\t\t<th scope='col' style='width: 2%;'>#</th>\n\t\t\t\t\t\t\t\t\t\t\t\t<th scope='col' style='width: 13%;'><Text id='races.name'>Navn</Text></th>\n\t\t\t\t\t\t\t\t\t\t\t\t<th scope='col' style='width: 85%;'>\n\t\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div class='d-flex' style='height: 70px;'>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{stages && stages.map((stage, stageIdx) => {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tconst percent = stage.distance / 1200 * 100;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tconst width = percent > 100 ? 100 : parseInt(percent, 10);\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (stage.type === 'stage') {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\treturn (<>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div class='position-relative mr-1' style={`width: ${width}%;`}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t&nbsp;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</>);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttopMargin  = topMargin === 32 ? 0 : 32;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\treturn (<>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div class='position-relative' style={`width: 20px;`}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div class='position-absolute text-center font-weight-light' style={`width: 120px; top: ${topMargin}px; left: -58px; font-size: 1.1em;`}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div class={`bubble${topMargin === 0 ? '' : '2'}`}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{stage.name}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</>);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t\t\t\t\t</th>\n\t\t\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t\t</thead>\n\t\t\t\t\t\t\t\t\t\t<tbody>\n\t\t\t\t\t\t\t\t\t\t\t{classes[currentClass.id] && classes[currentClass.id].contestants && classes[currentClass.id].contestants.map((contestant, idx) => {\n\t\t\t\t\t\t\t\t\t\t\t\tconst { musher, currentTeam, currentStages, currentResults, completed, duration,\n\t\t\t\t\t\t\t\t\t\t\t\t\tnormalizedDuration, weightedNormalizedDuration, totalKcalRelated, weightedTotalKcal,\n\t\t\t\t\t\t\t\t\t\t\t\t\tflatTotalKcal, percentHarder, loadIndex, raceDistance, isDone, normalizedKcal, normalizedFlatKcal, rests = [], restsSplit = [] } = contestant;\n\t\t\t\t\t\t\t\t\t\t\t\treturn (<>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<tr onClick={this.toggleDisplayDetails} data-email={musher.email}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<td\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclass='text-right'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstyle={`${displayDetails[musher.email] ? '' : 'line-height: 0.8em;'}`}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{idx + 1}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<td\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclass={`${displayDetails[musher.email] ? 'font-weight-bold' : ''}`}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstyle={`${displayDetails[musher.email] ? '' : 'line-height: 0.8em;'}`}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{displayDetails[musher.email] ? <>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{musher.firstname} {musher.lastname}<br />\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span class='text-muted'>{currentTeam.name}</span><br />\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<small class='text-muted'>{musher.sportsClub}</small><br />\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{musher.facebook && <a class='mr-2' href={mu.asFacebookLink(musher.facebook)} native target='_blank' rel='noreferrer'><i class='fab fa-facebook' /></a>}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{musher.instagram && <a class='mr-2' href={mu.asInstagramLink(musher.instagram)} native target='_blank' rel='noreferrer'><i class='fab fa-instagram' /></a>}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{/* {musher.price1 && <div class='font-weight-lighter'>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<i class='fas fa-trophy text-warning' /> {musher.price1}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{musher.priceSent && <>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<i class='fas fa-check text-success' />\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</>}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{musher.price2 && <div class='font-weight-lighter'><i class='fas fa-trophy text-warning' /> {musher.price2}</div>}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{musher.price3 && <div class='font-weight-lighter'><i class='fas fa-trophy text-warning' /> {musher.price3}</div>} */}\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</> : <>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{/* {musher.price1 && <span class='float-right text-warning' style='font-size: 1.2em;'>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<i class='fas fa-trophy' />\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{musher.priceSent && <>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<i class='fas fa-check text-success' />\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</>}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</span>} */}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<nobr>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{musher.firstname} {musher.lastname}<br />\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</nobr>\t\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</>}\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</td>\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<td style=' min-width: 1280px;'>\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div class='d-flex'>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{stages && stages.map((stage, stageIdx) => {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tconst percent = stage.distance / 1200 * 100;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tconst width = percent > 100 ? 100 : parseInt(percent, 10);\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tlet stageCompleted = 100;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tlet stageRest = 0;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tlet stageRestSplit = 0;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tlet stageEstimated = 0;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (rests && rests.length > stageIdx) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstageRest = rests[stageIdx];\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstageRestSplit = restsSplit[stageIdx];\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t// let stageRest = 2;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (stageIdx > 7) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstageCompleted = 0;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstageRest = 0;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (stageIdx === 9) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstageEstimated = 100 - idx * 3;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t} else if (stageIdx > 6) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstageCompleted = 100 - idx * 3;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (stageRest > stageCompleted) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstageRest = stageCompleted / 2;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (stageRestSplit > stageCompleted) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstageRestSplit = stageCompleted / 2;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif ((stageRest + stageRestSplit) > stageCompleted) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstageRest = 0;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstageRestSplit = 0;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tlet stage1 = stageCompleted;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tlet stage2 = 0;\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (stageRest && stageRestSplit) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstage1 = stageCompleted - stageRestSplit - stageRest;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstage2 = stageCompleted - stage1 - stageRest;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tprevStageComplete = stageCompleted;\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (stage.type === 'checkpoint' || stage.type === 'start' || stage.type === 'finish') {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\treturn (<>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div class='position-relative mr-1' style={`width: 20px; line-height: 0.8em;`}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{stage.type === 'start' && <>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<i class='fas fa-map-marker-alt text-muted' />\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</>}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{stage.type === 'finish' && <>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<i class='fas fa-flag-checkered text-muted' />\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</>}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{stage.type === 'checkpoint' && <>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div class='progress'>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclass={`progress-bar ${stageCompleted === 100 ? 'bg-success' : 'bg-primary progress-bar-striped progress-bar-animated'}`}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\trole='progressbar'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstyle={`width: ${stageCompleted}%;`}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\taria-valuenow={stageCompleted}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\taria-valuemin='0'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\taria-valuemax='100'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</>}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</>);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t// if (stage.type === 'checkpoint' || stage.type === 'start' || stage.type === 'finish') {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t// \treturn '';\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t// }\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\treturn (<>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div class='position-relative mr-1' style={`width: ${width}%;`}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div class='progress'>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{stage1 > 0 && <div\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclass={`progress-bar ${stageCompleted === 100 ? 'bg-success' : 'bg-primary progress-bar-striped progress-bar-animated'}`}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\trole='progressbar'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstyle={`width: ${stage1}%;`}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\taria-valuenow={stage1}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\taria-valuemin='0'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\taria-valuemax='100'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{stageRest > 0 && <div\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclass={`progress-bar bg-warning`}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\trole='progressbar'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstyle={`width: ${stageRest}%;`}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\taria-valuenow={stageRest}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\taria-valuemin='0'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\taria-valuemax='100' />}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{stage2 > 0 && <div\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclass={`progress-bar ${stageCompleted === 100 ? 'bg-success' : 'bg-primary progress-bar-striped progress-bar-animated'}`}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\trole='progressbar'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstyle={`width: ${stage2}%;`}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\taria-valuenow={stage2}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\taria-valuemin='0'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\taria-valuemax='100'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{/* {stageEstimated > 0 && <div\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclass={`progress-bar bg-danger progress-bar-striped progress-bar-animated`}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\trole='progressbar'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstyle={`width: ${stageEstimated}%;`}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\taria-valuenow={stageEstimated}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\taria-valuemin='0'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\taria-valuemax='100'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>} */}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{displayDetails[musher.email] && <>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div class='text-overflow text-center'>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<small>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<i class='fas fa-road text-muted' /> {stage.distance} km<br />\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{stageIdx <= 7 && <>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<i class='fas fa-tachometer-alt text-muted' /> 13,1 km/t<br />\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</>}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</small>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</>}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</>);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t})}\n\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t\t\t\t</>);\n\t\t\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\t\t</tbody>\n\t\t\t\t\t\t\t\t\t</table>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class='mt-5 pt-5' style='margin-top: 130px !important; '>&nbsp;</div>\n\t\t\t\t\t\t\t\t<div class='position-relative border bg-warning' style='height: 2px; margin-bottom: 200px !important;'>\n\t\t\t\t\t\t\t\t&nbsp;\n\t\t\t\t\t\t\t\t\t{classes[currentClass.id] && classes[currentClass.id].contestants && classes[currentClass.id].contestants.slice().reverse().map((contestant, idx) => {\n\t\t\t\t\t\t\t\t\t\tconst { musher, currentTeam, currentStages, currentResults, completed, duration,\n\t\t\t\t\t\t\t\t\t\t\tnormalizedDuration, weightedNormalizedDuration, totalKcalRelated, weightedTotalKcal,\n\t\t\t\t\t\t\t\t\t\t\tflatTotalKcal, percentHarder, loadIndex, raceDistance, isDone, normalizedKcal, normalizedFlatKcal, rests = [], restsSplit = [], totalCompleted } = contestant;\n\t\t\t\t\t\t\t\t\t\ttopMargin2  = topMargin2 <= 0 ? 77 : -108;\n\t\t\t\t\t\t\t\t\t\tconst left = idx * 3 + totalCompleted;\n\n\t\t\t\t\t\t\t\t\t\treturn (<>\n\t\t\t\t\t\t\t\t\t\t\t<div class='position-absolute text-center font-weight-light' style={`width: 120px; top: ${topMargin2}px; left: ${left}%; font-size: 1.1em;`}>\n\t\t\t\t\t\t\t\t\t\t\t\t<div class={`bubble${topMargin2 <= 0 ? '4' : '3'}`}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<small class='font-weight-light'>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{musher.firstname} {musher.lastname}\n\t\t\t\t\t\t\t\t\t\t\t\t\t</small>\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t</>);\n\n\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t</div>)}\n\n\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\n\t\t\t</>\n\t\t);\n\t}\n}\n\nexport default PublicRaceDetail;\n","import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport { Text, Localizer } from 'preact-i18n';\nimport { toJS } from 'mobx'\n\nimport Map from '../../components/map';\n\nimport mu from '../../lib/musher-util';\n\nconst initialState = {\n\tshowAddComment: false,\n};\n\n@observer\nclass Heatmap extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            ...initialState,\n        };\n        this.updateTimer = {};\n\t\tthis.inputRef = {};\n    }\n\n\tasync loadHeatmap() {\n\t\tthis.setState({ isLoading: true });\n\t\tconst { adminStore } = this.props.stores;\n        const { raceid } = this.props;\n        await adminStore.getPublicHeatmap(raceid);\n\t\tthis.setState({ isLoading: false });\n\t}\n\n\tcomponentDidMount() {\n\t\tthis.loadHeatmap();\n\t}\n\n    // componentWillReceiveProps() {\n\t// \tthis.loadHeatmap();\n\t// }\n\n    render() {\n        const { adminStore } = this.props.stores;\n        const { waypoints, zoomToMarkers, mapid, fullscreenMap } = this.props;\n        const { publicHeatmap: heatmap } = adminStore;\n        // const heatmap = publicHeatmap.slice(0, 10);\n        // const heatmap = [[60.4433,8.8996,14],[61.384,9.1152,14],[60.42,8.9422,15]];\n\n        return (\n            <>\n                {/* heatmap: {`map-${mapid}`}<br /> */}\n                {/* {JSON.stringify(heatmap)} */}\n                <Map\n                    stores={this.props.stores}\n                    mapId={heatmap.length}\n                    heatmap={heatmap}\n                    minZoom={2}\n                    maxZoom={18}\n                    height={600}\n                    waypoints={waypoints}\n                    zoomToMarkers={zoomToMarkers}\n                    fullscreenMap={fullscreenMap}\n                    key={`map-${mapid}`}\n                />\n            </>\n        );\n    }\n}\n\nexport default Heatmap;\n","import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport { Text, Localizer } from 'preact-i18n';\nimport linkstate from 'linkstate';\n\nimport Header from './header';\nimport Heatmap from '../../../components/public/heatmap';\n\nimport mu from '../../../lib/musher-util';\nconst MARGIN_TOP = mu.marginTop(true);\nconst MARGIN_BOTTOM = mu.marginBottom();\nconst SUB_MENU_MARGIN_TOP = mu.subMenuMarginTop();\n\nconst initialState = {\n\tisLoading: false,\n\temail: '',\n\tsubmenu: 'ads',\n\tjwtToken: util.getJwtToken(),\n};\n\n@observer\nclass PublicRaceDetail extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            ...initialState,\n        };\n    }\n\n\trender() {\n\t\tconst { appState } = this.props.stores;\n\t\tconst { raceid, path } = this.props;\n\t\tconst { darkmode } = appState;\n\n        let currentMenu = 'default';\n        if (path.match(/\\/race\\/:raceid$/)) {\n            currentMenu = 'default';\n        } else if (path.match(/\\/race\\/:raceid\\/mushers$/)) {\n            currentMenu = 'mushers';\n        } else if (path.match(/\\/race\\/:raceid\\/results$/)) {\n            currentMenu = 'results';\n        } else if (path.match(/\\/race\\/:raceid\\/media$/)) {\n            currentMenu = 'media';\n        } else if (path.match(/\\/race\\/:raceid\\/tracking$/)) {\n            currentMenu = 'tracking';\n        }\n\n\t\treturn (\n\t\t\t<>\t\t\t\t\n                <div class='row fixed-top pr-3' style={`margin-top: 40px; background-color: ${darkmode ? '#191d21' : '#f8f9fa'};`}>\n\n                    <div class='col-12 my-2 mx-2'>\n                        <ul class='nav nav-pills nav-fill flex-nowrap'>\n                            <li class='nav-item' style='max-width: 20%;'>\n                                <a href={`/race/${raceid}`} class={`text-overflow nav-link ${currentMenu === 'default' ? 'active' : ''}`}>\n                                    <nobr><i class='fas fa-info-circle' /> <Text id='race.therace'>Løpet</Text></nobr>\n                                </a>\n                            </li>\n                            <li class='nav-item' style='max-width: 20%;'>\n                                <a href={`/race/${raceid}/mushers`} class={`text-overflow nav-link ${currentMenu === 'mushers' ? 'active' : ''}`}>\n                                    <nobr><i class='fas fa-users' /> <Text id='race.mushers'>Deltakere</Text></nobr>\n                                </a>\n                            </li>\n                            <li class='nav-item' style='max-width: 20%;'>\n                                <a href={`/race/${raceid}/results`} class={`text-overflow nav-link ${currentMenu === 'results' ? 'active' : ''}`}>\n                                    <nobr><i class='fas fa-poll' /> <Text id='race.results'>Resultater</Text></nobr>\n                                </a>\n                            </li>\n                            <li class='nav-item' style='max-width: 20%;'>\n                                <a href={`/race/${raceid}/media`} class={`text-overflow nav-link ${currentMenu === 'media' ? 'active' : ''}`}>\n                                    <nobr><i class='fas fa-images' /> <Text id='race.media'>Bilder</Text></nobr>\n                                </a>\n                            </li>\n                            <li class='nav-item' style='max-width: 20%;'>\n                                <a href={`/race/${raceid}/tracking`} class={`text-overflow nav-link ${currentMenu === 'tracking' ? 'active' : ''}`}>\n                                    <nobr><i class='fas fa-map-marked-alt' /> <Text id='race.tracking'>Tracking</Text></nobr>\n                                </a>\n                            </li>\n                        </ul>\n                    </div>\n\n\n                    {/* <div class={`col text-center subtopmenu ${path.match(/\\/race\\/:raceid$/) ? 'border-bottom border-primary' : ''}`}>\n                        <a href={`/race/${raceid}`} class={`text-${path.match(/\\/race\\/:raceid$/) ? 'primary' : 'secondary'} stretched-link`}>\n                            <nobr><i class='fas fa-chart-line' /> <Text id='race.therace'>Løpet</Text></nobr>\n                        </a>\n                    </div>\n                    <div class={`col text-center subtopmenu ${path.match(/\\/race\\/:raceid\\/mushers$/) ? 'border-bottom border-primary' : ''}`}>\n                        <a href={`/race/${raceid}/mushers`} class={`text-${path.match(/\\/race\\/:raceid\\/mushers$/) ? 'primary' : 'secondary'} stretched-link`}>\n                            <nobr><i class='fas fa-chart-line' /> <Text id='race.mushers'>Deltakere</Text></nobr>\n                        </a>\n                    </div>\n                    <div class={`col text-center subtopmenu ${path.match(/\\/race\\/:raceid\\/results$/) ? 'border-bottom border-primary' : ''}`}>\n                        <a href={`/race/${raceid}/results`} class={`text-${path.match(/\\/race\\/:raceid\\/results$/) ? 'primary' : 'secondary'} stretched-link`}>\n                            <nobr><i class='fas fa-chart-line' /> <Text id='race.results'>Resultater</Text></nobr>\n                        </a>\n                    </div>\n                    <div class={`col text-center subtopmenu ${path.match(/\\/race\\/:raceid\\/tracking$/) ? 'border-bottom border-primary' : ''}`}>\n                        <a href={`/race/${raceid}/tracking`} class={`text-${path.match(/\\/race\\/:raceid\\/tracking$/) ? 'primary' : 'secondary'} stretched-link`}>\n                            <nobr><i class='fas fa-chart-line' /> <Text id='race.tracking'>Tracking</Text></nobr>\n                        </a>\n                    </div> */}\n                </div>\n\t\t\t</>\n\t\t);\n\t}\n}\n\nexport default PublicRaceDetail;\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"pointerCursor\":\"pointerCursor__1W6mM\"};","import { h, Component } from 'preact';\nimport { Link } from 'preact-router/match';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\nimport linkState from 'linkstate';\nimport { route } from 'preact-router';\nimport { Text, Localizer } from 'preact-i18n';\n\nimport style from './style.css';\n\n\nconst initialState = {\n    menu: {\n\t\tprofile: false,\n\t\tmain: false,\n\t},\n\tsearchText: '',\n};\n\n@observer\nclass Navigation extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            ...initialState,\n        };\n    }\n\n\ttoggleDropdown = (e) => {\n\t\tconst { menu } = this.state;\n\t\tlet menuName = e.target.dataset.name;\n\t\tif (!menuName && e.target.parentNode) {\n\t\t\tmenuName = e.target.parentNode.dataset.name;\n\t\t}\n\t\tif (menuName) {\n\t\t\tmenu[menuName] = !menu[menuName];\n\t\t}\n\t\tthis.setState({ menu });\n\t}\n\n\ttoggleDarkmode = (e) => {\n        const { appState } = this.props.stores;\n\t\tappState.toggleDarkmode();\n\t\tthis.toggleDropdown(e);\n\t}\n\n\ttoggleViewmode = (e) => {\n        const { appState } = this.props.stores;\n\t\tlet mode = e.target.dataset.mode;\n\t\tif (!mode && e.target.parentNode) {\n\t\t\tmode = e.target.parentNode.dataset.mode;\n\t\t}\n\t\tappState.toggleViewmode(mode);\n\t\tthis.toggleDropdown(e);\n\t}\n\n\treloadApp = () => {\n\t\twindow.location.reload(true);\n\t}\n\n\tadminLoadAll = async (e) => {\n        const { userStore } = this.props.stores;\n        await userStore.getInfo(true);\n\t}\n\n\tchangeLanguage = (e) => {\n\t\tconst lang = e.target.value;\n\t\tconsole.log('changeLanguage', lang);\n\t\tconst { appState, userStore } = this.props.stores;\n\t\tconst { user = {} } = userStore;\n\t\tif (user.email) {\n\t\t\tuserStore.setLanguage({ email: user.email, language: lang });\n\t\t}\n\t\tappState.setLanguage(lang);\n\t}\n\n\tsearch = () => {\n\t\tconst { searchText } = this.state;\n\t\troute(`/search/${searchText}`);\n\t}\n\n    render() {\n\t\tconst { menu, searchText } = this.state;\n        const { appState, userStore } = this.props.stores;\n        const { darkmode, viewmode, isCordova } = appState;\n\t\tconst { allUsers, isAdmin, user, notifications = [] } = userStore;\n\t\tconst unreadNotificatins = notifications.filter(e => !e.read);\n\t\tconst unread = unreadNotificatins.length || 0;\n\t\tconst { language = 'en' } = user;\n\n\t\treturn (\n\t\t\t<nav class='navbar navbar-expand-lg navbar-themed fixed-top py-1' style='z-index: 99999;'>\n\t\t\t\t<a class='navbar-brand' href='/race/'>\n\t\t\t\t\t{/* <img src={`./assets/logo-jul-2020-v2-${darkmode ? 'black' : 'white'}.png`} height='30' class='position-absolute' style='top: 8px; left: 6px' /> */}\n\t\t\t\t\t<img src={`./assets/homerun-race-logo-2-${darkmode ? 'white-' : ''}small.png`} height='37' class='position-absolute' style='top: 5px; left: 6px' />\n\t\t\t\t\t<span class='font-weight-normal' style='margin-left: 30px; font-size: 20px;'>Homerun Race</span>\n\t\t\t\t</a>\n\n\t\t\t\t<button class='navbar-toggler' type='button'\n\t\t\t\t\tdata-name='main'\n\t\t\t\t\tonClick={this.toggleDropdown}\n\t\t\t\t>\n\t\t\t\t\t<span class='navbar-toggler-icon' />\n\t\t\t\t</button>\n\n\t\t\t\t<div class={`collapse navbar-collapse ${menu.main ? 'show' : ''}`} id='navbarSupportedContent'>\n\t\t\t\t\t<ul class='navbar-nav mr-auto ml-5'>\n\t\t\t\t\t\t<li class='nav-item'>\n\t\t\t\t\t\t\t<Link className='nav-link' activeClassName={'active'} href='/race'\n\t\t\t\t\t\t\t\tdata-name='main'\n\t\t\t\t\t\t\t\tstyle='font-size: 1.0em !important;'\n\t\t\t\t\t\t\t\tonClick={this.toggleDropdown}\n\t\t\t\t\t\t\t><i class='fas fa-flag-checkered' /> <Text id='header.races'>Løpene</Text></Link>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t\t<li class='nav-item'>\n\t\t\t\t\t\t\t<Link className='nav-link' activeClassName={'active'} href='/race/support'\n\t\t\t\t\t\t\t\tdata-name='main'\n\t\t\t\t\t\t\t\tstyle='font-size: 1.0em !important;'\n\t\t\t\t\t\t\t\tonClick={this.toggleDropdown}\n\t\t\t\t\t\t\t><i class='far fa-question-circle' /> <Text id='header.support'>Support</Text></Link>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t\t<li class='nav-item'>\n\t\t\t\t\t\t\t<Link className='nav-link' activeClassName={'active'} href='/race/news'\n\t\t\t\t\t\t\t\tdata-name='main'\n\t\t\t\t\t\t\t\tstyle='font-size: 1.0em !important;'\n\t\t\t\t\t\t\t\tonClick={this.toggleDropdown}\n\t\t\t\t\t\t\t><i class='fas fa-quote-right' /> <Text id='header.news'>Nyheter</Text></Link>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t\t{/* <li class='nav-item'>\n\t\t\t\t\t\t\t<Link className='nav-link' activeClassName={'active'} href='/'\n\t\t\t\t\t\t\t\tdata-name='main'\n\t\t\t\t\t\t\t\tonClick={this.toggleDropdown}\n\t\t\t\t\t\t\t><i class='fas fa-dog' /> <Text id='header.backtoapp'>The Musher</Text></Link>\n\t\t\t\t\t\t</li> */}\n\t\t\t\t\t\t{/* <li class='nav-item'>\n\t\t\t\t\t\t\t<Link className='nav-link' activeClassName={'active'} href='/news'\n\t\t\t\t\t\t\t\tdata-name='main'\n\t\t\t\t\t\t\t\tonClick={this.toggleDropdown}\n\t\t\t\t\t\t\t><i class='fas fa-quote-right' /> <Text id='header.news'>Nyheter</Text></Link>\n\t\t\t\t\t\t</li> */}\n\t\t\t\t\t\t{/* <li class='nav-item d-block d-lg-none'>\n\t\t\t\t\t\t\t<Link className='nav-link' activeClassName={'active'} href='/howto'\n\t\t\t\t\t\t\t\tdata-name='main'\n\t\t\t\t\t\t\t\tonClick={this.toggleDropdown}\n\t\t\t\t\t\t\t><i class='fas fa-quote-right' /> <Text id='header.howto'>Hvordan gjør man det?</Text></Link>\n\t\t\t\t\t\t</li> */}\n\t\t\t\t\t</ul>\n\n\t\t\t\t\t<ul class='navbar-nav ml-auto '>\n\t\t\t\t\t\t{/* <li class='nav-item mr-2'>\n\t\t\t\t\t\t\t<Link className='nav-link' activeClassName={'active'}\n\t\t\t\t\t\t\t\thref='/users/notifications'\n\t\t\t\t\t\t\t\tdata-name='main'\n\t\t\t\t\t\t\t\tonClick={this.toggleDropdown}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<i class='fas fa-bell mr-1' />\n\t\t\t\t\t\t\t\t{unread > 0 && <>\n\t\t\t\t\t\t\t\t\t<span class='badge badge-pill badge-danger'>{unread > 9 ? '9+' : unread}</span>\n\t\t\t\t\t\t\t\t</>}\n\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t</li> */}\n\t\t\t\t\t\t<li class='nav-item mr-2'>\n\t\t\t\t\t\t\t<div class='form-row align-items-center'>\n\t\t\t\t\t\t\t\t<div class='col-auto my-1' style='width: 80px;'>\n\t\t\t\t\t\t\t\t\t<select class='custom-select'\n\t\t\t\t\t\t\t\t\t\tstyle='background-color: inherit; border: none; padding: 0; height: 1.1em; font-size: 0.9em;'\n\t\t\t\t\t\t\t\t\t\tonInput={this.changeLanguage}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<option value='no' selected={language === 'no'}>🇳🇴 NO</option>\n\t\t\t\t\t\t\t\t\t\t<option value='en' selected={language === 'en'}>🇬🇧 EN</option>\n\t\t\t\t\t\t\t\t\t\t<option value='es' selected={language === 'es'}>🇪🇸 ES</option>\n\t\t\t\t\t\t\t\t\t\t<option value='de' selected={language === 'de'}>🇩🇪 DE</option>\n\t                                    <option value='fr' selected={language === 'fr'}>🇫🇷 FR</option>\n\t                                    <option value='ru' selected={language === 'ru'}>🇷🇺 RU</option>\n\t                                    <option value='se' selected={language === 'se'}>🇸🇪 SE</option>\n\t\t\t\t\t\t\t\t\t</select>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t\t<li class='nav-item d-block d-lg-none'>\n\t\t\t\t\t\t\t<Link className='nav-link' activeClassName={'active'}\n\t\t\t\t\t\t\t\tdata-name='main'\n\t\t\t\t\t\t\t\tonClick={this.toggleDarkmode}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<i class={`${darkmode ? 'fas text-warning' : 'far'} fa-moon`} /> <Text id='header.darkmode'>Nattmodus</Text>\n\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t\t<li class='nav-item mr-2 d-none d-lg-block'>\n\t\t\t\t\t\t\t<button class='btn btn-link'\n\t\t\t\t\t\t\t\tdata-name='profile'\n\t\t\t\t\t\t\t\tonClick={this.toggleDarkmode}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<i class={`${darkmode ? 'fas text-warning' : 'far'} fa-moon`} />\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t\t{/* <li class='nav-item ml-auto d-none d-lg-block'>\n\t\t\t\t\t\t\t<form class='form-inline my-2 my-lg-0'>\n\t\t\t\t\t\t\t\t<Localizer>\n\t\t\t\t\t\t\t\t\t<input class='form-control form-control-sm mr-sm-2' type='search' placeholder={<Text id='header.search-placeholder'>Søk etter det meste...</Text>}\n\t\t\t\t\t\t\t\t\t\tvalue={searchText}\n\t\t\t\t\t\t\t\t\t\tonInput={linkState(this, 'searchText')}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</Localizer>\n\t\t\t\t\t\t\t\t<button class='btn btn-sm btn-outline-success my-2 my-sm-0' type='button'\t\n\t\t\t\t\t\t\t\t\tonClick={this.search}\n\t\t\t\t\t\t\t\t><Text id='header.search'>Søk</Text></button>\n\t\t\t\t\t\t\t</form>\n\t\t\t\t\t\t</li> */}\n\t\t\t\t\t</ul>\n\n\t\t\t\t    \n\n\t\t\t\t</div>\n\t\t\t</nav>\n\t\t);\n\t}\n}\n\nexport default Navigation;\n","import { h, Component } from 'preact';\nimport { observer } from 'mobx-preact';\n\nconst initialState = {\n};\n\n@observer\nclass RaceText extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            ...initialState,\n        };\n    }\n\n    render() {\n\t\tconst { appState } = this.props.stores;\n\t\tconst { text } = this.props;\n\t\tconst { darkmode, language = 'en' } = appState;\n\n        let finalText = text;\n\n        const regex = new RegExp(`/<${language}>(.*?)<\\/${language}>/`);\n        const parsedText = text.replace(regex, '$1');\n        if (parsedText) {\n            finalText = text;\n        }\n\n\t\treturn (\n\t\t\t<>\n                {finalText}\n\t\t\t</>\n\t\t);\n\t}\n}\n\nexport default RaceText;\n"],"sourceRoot":""}