{"version":3,"sources":["webpack:///./routes/home/index.js","webpack:///./components/lineGraph/style.css","webpack:///./components/lineGraph/index.js","webpack:///./lib/wifet-util.js"],"names":["forcastData","wutil","makeRandomData","cnt","min","max","onlyUp","inputData","diff","aiData","maxSkew","windData","priceData","demandData","productionData","calcData","calcProductionData","productionBoostData","addPercent","productionLongLifeData","initialState","Home","observer","Component","constructor","props","super","this","state","loadAll","appState","userStore","stores","getFingerprint","getInfo","render","class","data","dataB","dataC","legend","legendB","legendC","width","height","yMax","yMin","showYTicks","yTicks","unit","showXTicks","marker","module","exports","getTicks","count","prefix","postfix","loop","Array","from","keys","range","Math","ceil","floor","map","d","parseInt","parseTicks","ticks","JSON","parse","transformXTick","tick","match","msDiff","replace","now","util","epoch","isoDate","normalizeRange","val","newMin","newMax","round5","x","roundDown","sign","abs","findMaxY","isNumber","y","findMinY","makePath","yRangeMin","yRangeMax","offsetY","maxMinFixed","dataMap","length","maxX","minY","maxY","realHeight","fnX","idx","round","isDefined","xVal","fnY","dataVal","yVal","slice","p","join","mouseData","LineChart","mouseMove","e","svgHeight","svgRef","clientHeight","layerX","clientWidth","layerY","setMousePosition","getMouseData","xPos","key","autoLimit","padding","checkNested","paddingLeft","paddingBottom","tickCount","xTicks","yTicksPrefix","yTicksPostfix","showY2Ticks","y2Ticks","y2TicksPrefix","y2TicksPostfix","y2Max","y2Min","y2BMax","y2BMin","range2bMin","range2bMax","y2CMax","y2CMin","range2cMin","range2cMax","y3Min","y3Max","range3Min","range3Max","legendD","legend2","legend2B","legend2C","legend3","dataD","data2","data2B","data2C","data3","unitB","unitC","unitD","mousePos","darkmode","PADDING_LEFT","PADDING_BOTTOM","common","dataMaxY","MAX_Y","dataMinY","MIN_Y","MAX_X","dB","dataMapB","dC","dataMapC","dD","dataMapD","d2","MIN_Y2","MAX_Y2","d2B","d2C","d3","X_TICKS","Y_TICKS","reverse","Y_TICKS2","style","lineChart","xmlns","svg","viewBox","preserveAspectRatio","onMouseMove","ref","c","path3","path2C","path2B","path2","pathB","pathC","pathD","path","x1","y1","x2","y2","font-size","pathText","mouseLines","cx","cy","r","rx","ry","mouseHoverBox","mouseHoverDarkmode","mouseHover","dy","left","v","data-value","bottom","WifetUtil","random","rangeMin","rangeMax","current","skew","i","l","getRandomInt","isUndefined","push","percent","$max","fn","newVal","windspeed","maxEffect","pow","ws","result"],"mappings":"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","file":"route-home.chunk.defd3.esm.js","sourcesContent":["import { h, Component } from 'preact';\nimport { observer } from 'mobx-preact';\nimport util from 'preact-util';\n\nimport LineGraph from '../../components/lineGraph';\nimport wutil from '../../lib/wifet-util';\n\nconst forcastData = wutil.makeRandomData({ cnt: 500, min: 5, max: 15, onlyUp: false, inputData: [], diff: 1 });\nconst aiData = wutil.makeRandomData({ cnt: 500, min: 0, max: 30, onlyUp: false, inputData: forcastData, diff: 1, maxSkew: 10 });\nconst windData = wutil.makeRandomData({ cnt: 500, min: 0, max: 30, onlyUp: false, inputData: aiData, diff: 1, maxSkew: 10 });\nconst priceData = wutil.makeRandomData({ cnt: 500, min: 0, max: 200, onlyUp: false, inputData: [], diff: 5 });\nconst demandData = wutil.makeRandomData({ cnt: 500, min: 0, max: 4000, onlyUp: false, inputData: [], diff: 100 });\n\nconst productionData = wutil.calcData(windData, wutil.calcProductionData);\nconst productionBoostData = wutil.addPercent(productionData, 10, 100);\nconst productionLongLifeData = wutil.addPercent(productionData, -5, 100);\n\n\nconst initialState = {\n\tforcastData,\n\taiData,\n\twindData,\n\tproductionData,\n\tproductionBoostData,\n\tproductionLongLifeData,\n\tpriceData,\n\tdemandData,\n};\n\n@observer\nclass Home extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            ...initialState,\n        };\n\t\tthis.loadAll();\t\n    }\n\n\tasync loadAll() {\n\t\tconst { appState, userStore } = this.props.stores;\n        appState.getFingerprint();\n        await userStore.getInfo();\n    }\n\n\trender() {\n\t\tconst { windData, productionData, productionBoostData, productionLongLifeData, priceData, demandData } = this.state;\n\t\t// const { userStore } = this.props.stores;\n\t\t// const { user } = userStore;\n\t\treturn (\n\t\t\t<div class='container-fluid mt-5 mb-5 pt-2'>\n\t\t\t\t<div class='row'>\n\t\t\t\t\t<div class='col-12'>\n\t\t\t\t\t\t<h1>Home</h1>\n\n\t\t\t\t\t\t<div class='d-flex'>\n\t\t\t\t\t\t\t<div class='p-2 flex-grow-1 bg-light mr-2'>\n\t\t\t\t\t\t\t\t<i class='fas fa-chart-bar' /> Production / <i class='fas fa-thermometer' /> Wear\n\t\t\t\t\t\t\t\t<LineGraph\n\t\t\t\t\t\t\t\t\tstores={this.props.stores}\n\t\t\t\t\t\t\t\t\tdata={productionData}\n\t\t\t\t\t\t\t\t\tdataB={productionBoostData}\n\t\t\t\t\t\t\t\t\tdataC={productionLongLifeData}\n\t\t\t\t\t\t\t\t\tlegend='Normal production'\n\t\t\t\t\t\t\t\t\tlegendB='Boost 10%'\n\t\t\t\t\t\t\t\t\tlegendC='Long life -10%'\n\t\t\t\t\t\t\t\t\twidth={1200}\n\t\t\t\t\t\t\t\t\theight={200}\n\t\t\t\t\t\t\t\t\tyMax={500}\n\t\t\t\t\t\t\t\t\tyMin={0}\n\t\t\t\t\t\t\t\t\tshowYTicks={1}\n\t\t\t\t\t\t\t\t\tyTicks='[\"500Mw\", \"400Mw\", \"300Mw\", \"200Mw\", \"100Mw\", \"0Mw\"]'\n\t\t\t\t\t\t\t\t\tunit='Mw'\n\t\t\t\t\t\t\t\t\tshowXTicks={1}\n\t\t\t\t\t\t\t\t\tmarker={400}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t{/* <div class='p-2 bg-light'>\n\t\t\t\t\t\t\t\t<i class='fas fa-battery-three-quarters' /> Wear status\n\t\t\t\t\t\t\t</div> */}\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t<div class='d-flex mt-2'>\n\t\t\t\t\t\t\t<div class='p-2 flex-fill bg-light mr-2'>\n\t\t\t\t\t\t\t\t<i class='fas fa-cloud-sun-rain' /> Weather\n\t\t\t\t\t\t\t\t<LineGraph\n\t\t\t\t\t\t\t\t\tstores={this.props.stores}\n\t\t\t\t\t\t\t\t\tdata={windData}\n\t\t\t\t\t\t\t\t\tdataB={forcastData}\n\t\t\t\t\t\t\t\t\tdataC={aiData}\n\t\t\t\t\t\t\t\t\tlegend='Wind'\n\t\t\t\t\t\t\t\t\tlegendB='Wind forcast'\n\t\t\t\t\t\t\t\t\tlegendC='Wind AI prediction'\n\t\t\t\t\t\t\t\t\twidth={1200}\n\t\t\t\t\t\t\t\t\theight={200}\n\t\t\t\t\t\t\t\t\tyMax={30}\n\t\t\t\t\t\t\t\t\tyMin={0}\n\t\t\t\t\t\t\t\t\tshowYTicks={1}\n\t\t\t\t\t\t\t\t\tyTicks='[\"30m/s\", \"25m/s\", \"20m/s\", \"15m/s\", \"10m/s\", \"5m/s\", \"0m/s\"]'\n\t\t\t\t\t\t\t\t\tunit='m/s'\n\t\t\t\t\t\t\t\t\tshowXTicks={1}\n\t\t\t\t\t\t\t\t\tmarker={400}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class='d-flex mt-2'>\n\t\t\t\t\t\t\t<div class='p-2 flex-fill bg-light mr-2'>\n\t\t\t\t\t\t\t\t<i class='fas fa-chart-line' /> Electricity prices\n\t\t\t\t\t\t\t\t<LineGraph\n\t\t\t\t\t\t\t\t\tstores={this.props.stores}\n\t\t\t\t\t\t\t\t\tdata={priceData}\n\t\t\t\t\t\t\t\t\tlegend='Price'\n\t\t\t\t\t\t\t\t\twidth={1200}\n\t\t\t\t\t\t\t\t\theight={200}\n\t\t\t\t\t\t\t\t\tyMax={200}\n\t\t\t\t\t\t\t\t\tyMin={0}\n\t\t\t\t\t\t\t\t\tshowYTicks={1}\n\t\t\t\t\t\t\t\t\tyTicks='[\"2NOK\", \"1.5NOK\", \"1NOK\", \"0.5NOK\", \"0NOK\"]'\n\t\t\t\t\t\t\t\t\tunit='øre'\n\t\t\t\t\t\t\t\t\tshowXTicks={1}\n\t\t\t\t\t\t\t\t\tmarker={400}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class='d-flex mt-2'>\n\t\t\t\t\t\t\t<div class='p-2 flex-fill bg-light'>\n\t\t\t\t\t\t\t\t<i class='fas fa-hand-holding-usd' /> Demand\n\t\t\t\t\t\t\t\t<LineGraph\n\t\t\t\t\t\t\t\t\tstores={this.props.stores}\n\t\t\t\t\t\t\t\t\tdata={demandData}\n\t\t\t\t\t\t\t\t\tlegend='Demand'\n\t\t\t\t\t\t\t\t\twidth={1200}\n\t\t\t\t\t\t\t\t\theight={200}\n\t\t\t\t\t\t\t\t\tyMax={4000}\n\t\t\t\t\t\t\t\t\tyMin={0}\n\t\t\t\t\t\t\t\t\tshowYTicks={1}\n\t\t\t\t\t\t\t\t\tyTicks='[\"4TW\", \"3TW\", \"2TW\", \"1TW\", \"0TW\"]'\n\t\t\t\t\t\t\t\t\tunit='Mw'\n\t\t\t\t\t\t\t\t\tshowXTicks={1}\n\t\t\t\t\t\t\t\t\tmarker={400}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nexport default Home;\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"lineChart\":\"lineChart__1V7gu\",\"svg\":\"svg__2VZNe\",\"pathText\":\"pathText__2RfbE\",\"path\":\"path__39L9w\",\"pathB\":\"pathB__4I_xm\",\"pathC\":\"pathC__1DQi-\",\"pathD\":\"pathD__2lI_C\",\"path2\":\"path2__19gje\",\"path2B\":\"path2B__-l86N\",\"path2C\":\"path2C__3xnAW\",\"path3\":\"path3__1IFnl\",\"x-axis\":\"x-axis__1601s\",\"y-axis\":\"y-axis__13f0R\",\"y-axis2\":\"y-axis2__3xPFM\",\"marker\":\"marker__2peOe\",\"mouseHover\":\"mouseHover__2B4N6\",\"mouseHoverDarkmode\":\"mouseHoverDarkmode__3VPOP\",\"mouseHoverBox\":\"mouseHoverBox__3fJuY\",\"mouseLines\":\"mouseLines__3DgQq\"};","import { h, Component } from 'preact';\nimport util from 'preact-util';\nimport { observer } from 'mobx-preact';\n\nimport style from './style.css';\n\nfunction getTicks(count, min, max, prefix = '', postfix = '') {\n    const loop = Array.from(Array(count).keys());\n    const range = Math.ceil(max) - Math.floor(min);\n    return loop.map(d => `${prefix}${parseInt((range / (count - 1) * d), 10) + Math.floor(min)}${postfix}`);\n}\n\nfunction parseTicks(ticks) {\n    if (ticks) {\n        return JSON.parse(ticks);\n    }\n    return undefined;\n}\n\nfunction transformXTick(tick) {\n    if (typeof tick === 'string') {\n        if (tick.match(/\\d+h/)) {\n            const msDiff = tick.replace(/h/g, '') * 3600 * 1000;\n            const now = util.epoch();\n            const then = now - msDiff;\n            return util.isoDate(then);\n        }\n    }\n    return tick;\n}\n\nfunction normalizeRange(val, min, max, newMin, newMax) {\n    return newMin + (val - min) * (newMax - newMin) / (max - min);\n}\n\nfunction round5(x, roundDown = false) {\n    let sign = 1;\n    if (x < 0) {\n        sign = -1;\n    }\n    if (roundDown && sign === 1) {\n        return Math.floor(Math.abs(x) / 5) * 5 * sign;\n    }\n    return Math.ceil(Math.abs(x) / 5) * 5 * sign;\n}\n\nfunction findMaxY({ data, max }) {\n    if (util.isNumber(max)) {\n        return Math.max(max, ...data.map(d => d.y));\n    }\n    return Math.max(...data.map(d => d.y));\n}\n\nfunction findMinY({ data, min }) {\n    if (util.isNumber(min)) {\n        return Math.min(min, ...data.map(d => d.y));\n    }\n    return Math.min(...data.map(d => d.y));\n}\n\nfunction makePath({ data, yMin, yMax, width, height, yRangeMin, yRangeMax, offsetY = 0, maxMinFixed = false }) {\n    const dataMap = {};\n    if (data && data.length) {\n        const maxX = Math.max(...data.map(d => d.x));\n        let minY;\n        let maxY;\n        if (maxMinFixed) {\n            minY = util.isNumber(yMin) ? yMin : findMinY({ data });\n        } else {\n            minY = util.isNumber(yMin) ? findMinY({ data, min: yMin }) : findMinY({ data });\n            minY = round5(minY, true);\n        }\n        if (maxMinFixed) {\n            maxY = util.isNumber(yMax) ? yMax : findMaxY({ data });\n        } else {\n            maxY = util.isNumber(yMax) ? findMaxY({ data, max: yMax }) : findMaxY({ data });\n            maxY = round5(maxY);\n        }\n\n        const realHeight = height - offsetY;\n        const fnX = (val, idx) => {\n            const x = Math.round(val / maxX * width);\n            if (util.isDefined(idx)) {\n                if (!dataMap[idx]) { dataMap[idx] = {}; }\n                dataMap[idx].x = x;\n                dataMap[idx].xVal = val;\n            }\n            return x;\n        }\n        const fnY = (val, idx) => {\n            let dataVal = val;\n            if (util.isNumber(yRangeMin) && util.isNumber(yRangeMax)) {\n                dataVal = normalizeRange(dataVal, minY, maxY, yRangeMin, yRangeMax);\n                return realHeight - normalizeRange(dataVal, yRangeMin, yRangeMax, offsetY, height);\n            }\n            dataVal = normalizeRange(dataVal, minY, maxY, minY, maxY);\n            const y = Math.round(realHeight - normalizeRange(dataVal, minY, maxY, offsetY, height));\n            if (util.isDefined(idx)) {\n                if (!dataMap[idx]) { dataMap[idx] = {}; }\n                dataMap[idx].y = y;\n                dataMap[idx].yVal = dataVal;\n            }\n            return y;\n        };\n\n        const d = `M-100 ${realHeight + offsetY} L${fnX(data[0].x, 0)} ${fnY(data[0].y, 0)} \n            ${data.slice(1).map((p, idx) => `L${fnX(p.x, idx + 1)} ${fnY(p.y, idx + 1)}`).join(' ')}\n            L${fnX(maxX) + 100} ${realHeight + offsetY}\n        `;\n        return { d, maxX, maxY, minY, dataMap };\n    }\n    return {};\n}\n\nconst initialState = {\n    mouseData: {},\n};\n\n@observer\nclass LineChart extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            ...initialState,\n        };\n        this.svgRef = null;\n    }\n\n    mouseMove = (e) => {\n        if (this.props.stores) {\n            const { width = 600, height = 200 } = this.props;\n            const svgWidth = this.svgRef.clientWidth;\n            const svgHeight = this.svgRef.clientHeight;\n\n            const x = parseInt(normalizeRange(e.layerX, 30, svgWidth, 0, width), 10);\n            const y = parseInt(normalizeRange(e.layerY, 20, svgHeight, 0, height) + 20, 10);\n\n            const { appState } = this.props.stores;\n            appState.setMousePosition([x, y]);\n        }\n    };\n\n    getMouseData(dataMap, xPos, key, autoLimit = false, padding = 0) {\n        const { data = [], width = 600, height = 200 } = this.props;\n        const x = parseInt(normalizeRange(xPos, 0, width, 0, data.length), 10);\n        // console.log(`xPos=${xPos}, svgWidth=${svgWidth}, data.length=${data.length}`)\n        if (util.checkNested(dataMap, x, key)) {\n            // console.log(`dataMap[x]=${JSON.stringify(dataMap[x])}, xPos=${xPos}, x=${x}, key=${key}`);\n            let val = dataMap[x][key];\n            if (autoLimit && key === 'y') {\n                if (val > height / 2) {\n                    return val - 70 - padding;\n                }\n                return val + 20 - padding;\n            }\n            if (autoLimit && key === 'x') {\n                if (val > width / 2) {\n                    // console.log(`autoLimit=${autoLimit}, key=${key}, val=${val}, width=${width}`)\n                    return val - 150 - padding;\n                }\n                return val + 20 - padding;\n            }\n            return val;\n        }\n    }\n\n\n    render() {\n        const {\n            width = 600,\n            height = 200,\n            offsetY = 0,\n            paddingLeft = 0, // Make room for yTicks.\n            paddingBottom = 0, // Make room for xTicks.\n            tickCount = 6, // Number of ticks to show\n            showXTicks, // Show X ticks\n            showYTicks, // Show Y ticks\n            xTicks, // xTicks array to use instead of values. JSON.stringified and backslash escaped.\n            yTicks, // yTicks array to use instead of values. JSON.stringified and backslash escaped.\n            yTicksPrefix,\n            yTicksPostfix = '°C',\n\n            yMax, // Y max value to use for yTicks\n            yMin, // Y min value to use for yTicks\n\n            showY2Ticks, // Show Y ticks\n            y2Ticks, // yTicks array to use instead of values. JSON.stringified and backslash escaped.\n            y2TicksPrefix,\n            y2TicksPostfix = '°C',\n            y2Max, // Y max value to use for y2Ticks\n            y2Min,\n\n            y2BMax, // Y max value to use for y2TicksB\n            y2BMin, // Y max value to use for y2TicksB\n            range2bMin = 0,\n            range2bMax = 100,\n\n            y2CMax, // Y max value to use for y2TicksC\n            y2CMin, // Y max value to use for y2TicksC\n            range2cMin = 0,\n            range2cMax = 100,\n\n            y3Min,\n            y3Max, // Y max value to use for yTicks3\n\n            range3Min = 0,\n            range3Max = 100,\n\n            legend,\n            legendB,\n            legendC,\n            legendD,\n            legend2,\n            legend2B,\n            legend2C,\n            legend3,\n\n            data = [],\n            dataB = [],\n            dataC = [],\n            dataD = [],\n            data2 = [],\n            data2B = [],\n            data2C = [],\n            data3 = [],\n\n            marker,\n            unit,\n            unitB,\n            unitC,\n            unitD,\n        } = this.props;\n        const { appState = {} } = this.props.stores || {};\n        const { mousePos = [], darkmode } = appState;\n\n        const PADDING_LEFT = paddingLeft || (showYTicks ? 30 : 0);\n        const PADDING_BOTTOM = paddingBottom || (showXTicks ? 20 : 0);\n\n        const common = {\n            width,\n            height,\n            offsetY,\n        };\n\n        // console.table(xTicks);\n        // console.table(yTicks);\n        const dataMaxY = findMaxY({ data, max: yMax });\n        const dataBMaxY = findMaxY({ data: dataB, max: dataMaxY });\n        const MAX_Y = round5(dataBMaxY);\n\n        const dataMinY = findMinY({ data, min: yMin });\n        const dataBMinY = findMinY({ data: dataB, min: dataMinY });\n        const MIN_Y = round5(dataBMinY, true);\n\n        const {\n            d,\n            maxX: MAX_X = 0,\n            dataMap,\n        } = makePath({\n            ...common,\n            data,\n            yMin: MIN_Y,\n            yMax: MAX_Y,\n            maxMinFixed: true,\n        });\n\n        const { d: dB, dataMap: dataMapB } = makePath({\n            ...common,\n            data: dataB,\n            yMin: MIN_Y,\n            yMax: MAX_Y,\n            maxMinFixed: true,\n        });\n\n        const { d: dC, dataMap: dataMapC } = makePath({\n            ...common,\n            data: dataC,\n            yMin: MIN_Y,\n            yMax: MAX_Y,\n            maxMinFixed: true,\n        });\n\n        const { d: dD, dataMap: dataMapD } = makePath({\n            ...common,\n            data: dataD,\n            yMin: MIN_Y,\n            yMax: MAX_Y,\n            maxMinFixed: true,\n        });\n\n        const {\n            d: d2,\n            minY: MIN_Y2 = 0,\n            maxY: MAX_Y2 = 0,\n        } = makePath({\n            ...common,\n            data: data2,\n            yMin: y2Min,\n            yMax: y2Max,\n        });\n\n        const { d: d2B } = makePath({\n            ...common,\n            data: data2B,\n            yMin: y2BMin,\n            yMax: y2BMax,\n            yRangeMin: range2bMin,\n            yRangeMax: range2bMax,\n        });\n\n        const { d: d2C } = makePath({\n            ...common,\n            data: data2C,\n            yMin: y2CMin,\n            yMax: y2CMax,\n            yRangeMin: range2cMin,\n            yRangeMax: range2cMax,\n            maxMinFixed: true,\n        });\n\n        const { d: d3 } = makePath({\n            ...common,\n            data: data3,\n            yMin: y3Min,\n            yMax: y3Max,\n            yRangeMin: range3Min,\n            yRangeMax: range3Max,\n        });\n\n        const X_TICKS = parseTicks(xTicks) || getTicks(tickCount, 0, MAX_X);\n        const Y_TICKS = parseTicks(yTicks) || getTicks(tickCount, MIN_Y, MAX_Y, yTicksPrefix, yTicksPostfix).reverse();\n        const Y_TICKS2 = parseTicks(y2Ticks) || getTicks(tickCount, MIN_Y2, MAX_Y2, y2TicksPrefix, y2TicksPostfix).reverse();\n\n        return (\n            <div class={style.lineChart} style={`height: ${height}px; overflow: hidden;`}>\n                <svg xmlns='http://www.w3.org/2000/svg' class={style.svg} viewBox={`0 0 ${width} ${height}`}\n                    preserveAspectRatio='none'\n                    style={`padding-left: ${PADDING_LEFT}px; padding-bottom: ${PADDING_BOTTOM}px; width: calc(100%); max-height: 100%;`}\n                    onMouseMove={this.mouseMove}\n                    ref={c => this.svgRef = c}\n                >\n                    {d3 && <path d={d3} class={style.path3} />}\n                    {d2C && <path d={d2C} class={style.path2C} />}\n                    {d2B && <path d={d2B} class={style.path2B} />}\n                    {d2 && <path d={d2} class={style.path2} />}\n                    {dB && <path d={dB} class={style.pathB} />}\n                    {dC && <path d={dC} class={style.pathC} />}\n                    {dD && <path d={dD} class={style.pathD} />}\n                    {d && <path d={d} class={style.path} />}\n\n                    {/* {dCold && dCold.map(o => <line x1={o[0].x} y1={o[0].y} x2={o[1].x} y2={o[1].y} class={style.pathCold} />)};\n                    {dWarm && dWarm.map(o => <line x1={o[0].x} y1={o[0].y} x2={o[1].x} y2={o[1].y} class={style.pathWarm} />)}; */}\n\n                    {legend && <line x1='10' y1='5' x2='30' y2='5' class={style.path} />}\n                    {legend && <text x='35' y='10' font-size='10px' class={style.pathText}>{legend}</text>}\n\n\n                    {legendB && <line x1='10' y1='15' x2='30' y2='15' class={style.pathB} />}\n                    {legendB && <text x='35' y='20' font-size='10px' class={style.pathText}>{legendB}</text>}\n\n                    {legendC && <line x1='10' y1='25' x2='30' y2='25' class={style.pathC} />}\n                    {legendC && <text x='35' y='30' font-size='10px' class={style.pathText}>{legendC}</text>}\n\n                    {legendD && <line x1='10' y1='35' x2='30' y2='35' class={style.pathD} />}\n                    {legendD && <text x='35' y='40' font-size='10px' class={style.pathText}>{legendD}</text>}\n\n                    {legend2 && <line x1='10' y1='15' x2='30' y2='15' class={style.path2} />}\n                    {legend2 && <text x='35' y='20' font-size='10px' class={style.pathText}>{legend2}</text>}\n\n                    {legend3 && <line x1='10' y1='25' x2='30' y2='25' class={style.path3} />}\n                    {legend3 && <text x='35' y='30' font-size='10px' class={style.pathText}>{legend3}</text>}\n\n                    {legend2B && <line x1='10' y1='45' x2='30' y2='45' class={style.path2B} />}\n                    {legend2B && <text x='35' y='50' font-size='10px' class={style.pathText}>{legend2B}</text>}\n\n                    {legend2C && <line x1='10' y1='55' x2='30' y2='55' class={style.path2C} />}\n                    {legend2C && <text x='35' y='60' font-size='10px' class={style.pathText}>{legend2C}</text>}\n\n                    {marker && <line x1={marker} y1={height} x2={marker} y2='0' class={style.marker} />}\n\n                    {mousePos && mousePos.length > 0 && <line x1={mousePos[0]} y1={height} x2={mousePos[0]} y2='0' class={style.mouseLines} />}\n                    {mousePos && mousePos.length > 0 && <line x1={0} y1={this.getMouseData(dataMap, mousePos[0], 'y')} x2={width} y2={this.getMouseData(dataMap, mousePos[0], 'y')} class={style.mouseLines} />}\n                    {mousePos && mousePos.length > 0 && <circle cx={this.getMouseData(dataMap, mousePos[0], 'x')} cy={this.getMouseData(dataMap, mousePos[0], 'y')} r='5' class={style.marker} />}\n                    {mousePos && mousePos.length > 0 && <rect x={this.getMouseData(dataMap, mousePos[0], 'x', true, 10)} y={this.getMouseData(dataMap, mousePos[0], 'y', true, 10)} width='150' height='70' rx='5' ry='5' class={style.mouseHoverBox} />}\n                    {mousePos && mousePos.length > 0 \n                        && <text x={this.getMouseData(dataMap, mousePos[0], 'x', true)} y={this.getMouseData(dataMap, mousePos[0], 'y', true)} \n                            font-size='11px'\n                            class={darkmode ? style.mouseHoverDarkmode : style.mouseHover}\n                        >\n                            <tspan x={this.getMouseData(dataMap, mousePos[0], 'x', true)} dy='1.2em'>{legend}: {this.getMouseData(dataMap, mousePos[0], 'yVal')} {unit}</tspan>\n                            {dB && dataMapB && <tspan x={this.getMouseData(dataMapB, mousePos[0], 'x', true)} dy='1.2em'>{legendB}: {this.getMouseData(dataMapB, mousePos[0], 'yVal')} {unitB || unit}</tspan>}\n                            {dB && dataMapC && <tspan x={this.getMouseData(dataMapC, mousePos[0], 'x', true)} dy='1.2em'>{legendC}: {this.getMouseData(dataMapC, mousePos[0], 'yVal')} {unitC || unit}</tspan>}\n                            {dB && dataMapD && <tspan x={this.getMouseData(dataMapD, mousePos[0], 'x', true)} dy='1.2em'>{legendD}: {this.getMouseData(dataMapD, mousePos[0], 'yVal')} {unitD || unit}</tspan>}\n                        </text>}\n\n                </svg>\n                {showXTicks && (\n                    <div class={style['x-axis']}\n                        style={{\n                            left: `${PADDING_LEFT}px`,\n                            width: `calc(100% - ${PADDING_LEFT}px)`,\n                        }}\n                    >\n                        {X_TICKS.map(v => <div data-value={transformXTick(v)} />)}\n                    </div>\n                )}\n                {showYTicks && (\n                    <div\n                        class={style['y-axis']}\n                        style={{\n                            bottom: `${PADDING_BOTTOM}px`,\n                        }}\n                    >\n                        {Y_TICKS.map(v => <div data-value={v} />)}\n                    </div>\n                )}\n                {showY2Ticks && (\n                    <div\n                        class={style['y-axis2']}\n                        style={{\n                            bottom: `${PADDING_BOTTOM}px`,\n                        }}\n                    >\n                        {Y_TICKS2.map(v => <div data-value={v} />)}\n                    </div>\n                )}\n            </div>\n        );\n    }\n}\n\nexport default LineChart;\n","import util from 'preact-util';\n\nclass WifetUtil {\n    static normalizeRange(val, min, max, newMin, newMax) {\n        return newMin + (val - min) * (newMax - newMin) / (max - min);\n    }\n\n    /**\n    * Returns a random number between min (inclusive) and max (exclusive)\n    */\n    static getRandom(min, max) {\n        return Math.random() * (max - min) + min;\n}\n\n    /**\n    * Returns a random integer between min (inclusive) and max (inclusive).\n    * The value is no lower than min (or the next integer greater than min\n    * if min isn't an integer) and no greater than max (or the next integer\n    * lower than max if max isn't an integer).\n    * Using Math.round() will give you a non-uniform distribution!\n    */\n    static getRandomInt(min, max) {\n        min = Math.ceil(min);\n        max = Math.floor(max);\n        return Math.floor(Math.random() * (max - min + 1)) + min;\n    }\n\n    static makeRandomData({ cnt = 200, min, max, onlyUp = false, inputData = [], diff = 5, maxSkew = 1, rangeMin, rangeMax }) {\n        const data = [];\n        let current = 0;\n        let skew = 0;\n        for (let i = 0, l = cnt; i < l; i += 1) {\n            if (util.isDefined(inputData[i]) && util.isDefined(inputData[i].y)) {\n                skew = WifetUtil.getRandomInt(skew - diff, skew + diff);\n                current = inputData[i].y + skew;\n                if (Math.abs(skew) > maxSkew) { skew -= skew / 2; }\n            } else if (util.isUndefined(current)) {\n                current = WifetUtil.getRandomInt(min, max);\n            } else if (onlyUp) {\n                current = WifetUtil.getRandomInt(current, current + diff);\n            } else {\n                // console.log('current - diff, current + diff', current - diff, current + diff);\n                current = WifetUtil.getRandomInt(current - diff, current + diff);\n                // console.log('===> ', current);\n            }\n            if (current < min) {\n                current = min;\n            }\n            if (current > max) {\n                current = max;\n            }\n            if (rangeMin && rangeMax) {\n                current = WifetUtil.normalizeRange(current, min, max, rangeMin, rangeMax);\n            }\n            // console.log('current', current);\n            data.push({ x: i, y: current })\n        }\n        return data;\n    }\n\n    static addPercent(inputData = [], percent = 10, $max = 0) {\n        let max = $max;\n        for (let i = 0, l = inputData.length; i < l; i += 1) {\n            if (util.isDefined(inputData[i]) && util.isDefined(inputData[i].y) && inputData[i].y > max) {\n                max = inputData[i].y;\n            }\n        }\n        const data = [];\n        for (let i = 0, l = inputData.length; i < l; i += 1) {\n            if (util.isDefined(inputData[i]) && util.isDefined(inputData[i].y)) {\n                const val = inputData[i].y;\n                const newVal = val + (percent * max / 100);\n                data.push({\n                    x: i,\n                    y: newVal,\n                });\n            }\n        }\n        return data;\n    }\n\n    static calcData(inputData = [], fn = () => {}) {\n        const data = [];\n        for (let i = 0, l = inputData.length; i < l; i += 1) {\n            let newVal = 0;\n            if (util.isDefined(inputData[i]) && util.isDefined(inputData[i].y)) {\n                const val = inputData[i].y;\n                newVal = fn(val);\n            }\n            data.push({\n                x: i,\n                y: newVal,\n            });\n        }\n        return data;\n    }\n\n    static calcProductionData(windspeed, min = 0, max = 500) {\n        const maxEffect = Math.pow(12, 3);\n        let ws = windspeed\n        if (ws > 12) {\n            ws = 12;\n        }\n        const result = Math.round(Math.pow(ws, 3));\n\n        if (util.isDefined(min) && util.isDefined(max)) {\n            return Math.round(WifetUtil.normalizeRange(result, 0, maxEffect, min, max));\n        }\n        return Math.round(result);\n    }\n}\n\nexport default WifetUtil;\n"],"sourceRoot":""}